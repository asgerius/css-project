[{"tags": ["ruby", "encryption", "photo", "delete-file", "snapchat"], "comments": [{"owner": {"reputation": 70793, "user_id": 28128, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/4e974a514f0764fdfe99a8915f192002?s=128&d=identicon&r=PG", "display_name": "David Grayson", "link": "https://stackoverflow.com/users/28128/david-grayson"}, "edited": false, "score": 1, "creation_date": 1468454273, "post_id": 38363490, "comment_id": 64139301, "body": "That&#39;s a <a href=\"https://www.ruby-lang.org/en/\" rel=\"nofollow noreferrer\">Ruby program</a>, so you need to run it using a Ruby interpreter.  Also, shouldn&#39;t you provide a link to the place where you obtained the code so that others can look there to see if there is any documentation?"}, {"owner": {"reputation": 70793, "user_id": 28128, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/4e974a514f0764fdfe99a8915f192002?s=128&d=identicon&r=PG", "display_name": "David Grayson", "link": "https://stackoverflow.com/users/28128/david-grayson"}, "edited": false, "score": 0, "creation_date": 1468454327, "post_id": 38363490, "comment_id": 64139313, "body": "It looks like this code will read from a file named <code>blob</code> in the current working directory, and it will use the key <code>M02cnQ51Ji97vwT4</code>.  You might need to change those variables depending on the name of your file and the key used to encrypt it."}, {"owner": {"reputation": 105, "user_id": 5405076, "user_type": "registered", "accept_rate": 56, "profile_image": "https://lh4.googleusercontent.com/-uG5V0LizzYk/AAAAAAAAAAI/AAAAAAAAIEk/bDPRSB53OoU/photo.jpg?sz=128", "display_name": "Muniza Siddiqui", "link": "https://stackoverflow.com/users/5405076/muniza-siddiqui"}, "reply_to_user": {"reputation": 70793, "user_id": 28128, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/4e974a514f0764fdfe99a8915f192002?s=128&d=identicon&r=PG", "display_name": "David Grayson", "link": "https://stackoverflow.com/users/28128/david-grayson"}, "edited": false, "score": 0, "creation_date": 1468454832, "post_id": 38363490, "comment_id": 64139424, "body": "David Grayson, I honestly have no idea what to do with this, or where to put this. I&#39;m as lost as you, and I myself am trying to figure out this code, which is why I came here to get an answer. It would make sense if I were a programmer of some sort, but I barely no anything about programming, and I&#39;m really frustrated. -_-"}, {"owner": {"reputation": 105, "user_id": 5405076, "user_type": "registered", "accept_rate": 56, "profile_image": "https://lh4.googleusercontent.com/-uG5V0LizzYk/AAAAAAAAAAI/AAAAAAAAIEk/bDPRSB53OoU/photo.jpg?sz=128", "display_name": "Muniza Siddiqui", "link": "https://stackoverflow.com/users/5405076/muniza-siddiqui"}, "reply_to_user": {"reputation": 70793, "user_id": 28128, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/4e974a514f0764fdfe99a8915f192002?s=128&d=identicon&r=PG", "display_name": "David Grayson", "link": "https://stackoverflow.com/users/28128/david-grayson"}, "edited": false, "score": 0, "creation_date": 1468454891, "post_id": 38363490, "comment_id": 64139446, "body": "And I found the code here: <a href=\"https://gist.github.com/jamescmartinez/6913761\" rel=\"nofollow noreferrer\">gist.github.com/jamescmartinez/6913761</a>"}], "answers": [{"comments": [{"owner": {"reputation": 105, "user_id": 5405076, "user_type": "registered", "accept_rate": 56, "profile_image": "https://lh4.googleusercontent.com/-uG5V0LizzYk/AAAAAAAAAAI/AAAAAAAAIEk/bDPRSB53OoU/photo.jpg?sz=128", "display_name": "Muniza Siddiqui", "link": "https://stackoverflow.com/users/5405076/muniza-siddiqui"}, "edited": false, "score": 0, "creation_date": 1468456290, "post_id": 38363652, "comment_id": 64139748, "body": "what is they key for?"}, {"owner": {"reputation": 40236, "user_id": 923315, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/j6lLI.jpg?s=128&g=1", "display_name": "peter", "link": "https://stackoverflow.com/users/923315/peter"}, "reply_to_user": {"reputation": 105, "user_id": 5405076, "user_type": "registered", "accept_rate": 56, "profile_image": "https://lh4.googleusercontent.com/-uG5V0LizzYk/AAAAAAAAAAI/AAAAAAAAIEk/bDPRSB53OoU/photo.jpg?sz=128", "display_name": "Muniza Siddiqui", "link": "https://stackoverflow.com/users/5405076/muniza-siddiqui"}, "edited": false, "score": 0, "creation_date": 1468497960, "post_id": 38363652, "comment_id": 64157843, "body": "encryption most of the time works with one or more keys, it&#39;s what makes it possible to make an encrypted file back to its original, usable state, I suggest you do some reading at wikipedia"}], "tags": [], "owner": {"reputation": 40236, "user_id": 923315, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/j6lLI.jpg?s=128&g=1", "display_name": "peter", "link": "https://stackoverflow.com/users/923315/peter"}, "is_accepted": false, "score": 1, "last_activity_date": 1468455385, "creation_date": 1468455385, "answer_id": 38363652, "question_id": 38363490, "link": "https://stackoverflow.com/questions/38363490/how-can-i-decrypt-snapchat-nomedia-files/38363652#38363652", "title": "How can I decrypt Snapchat .nomedia files?", "body": "<p>You got this sample from </p>\n\n<blockquote>\n  <p><a href=\"http://features.en.softonic.com/retrieve-deleted-snapchat-photos\" rel=\"nofollow\">http://features.en.softonic.com/retrieve-deleted-snapchat-photos</a> ?</p>\n</blockquote>\n\n<p>but you will need to adapt some values like filename (with extension !), key etc.\nIf all you files are store in an encrypted .nomedia file you would need to decrypt each file with the exact encryption key, not that from the sample.\nIf you don't have the key I'm afraid you are lost, at the site linked they may callt he encyption weak, but even if you were an experienced coder, the challenge would be daunting.</p>\n\n<p>I read something about hese files no longer being encrypted, so you could try renaming them with the correct file extension and opening them, good luck !</p>\n\n<p>My advise: don't store files on snapshat to keep them, that's contrary to the purpose of snapshat, though on the new policy this is changing as it seems.\nKeep them local and on a backup and redundantly in the cloud on a remote storage like www.Box.com, Google drive, dropbox etc..</p>\n"}], "owner": {"reputation": 105, "user_id": 5405076, "user_type": "registered", "accept_rate": 56, "profile_image": "https://lh4.googleusercontent.com/-uG5V0LizzYk/AAAAAAAAAAI/AAAAAAAAIEk/bDPRSB53OoU/photo.jpg?sz=128", "display_name": "Muniza Siddiqui", "link": "https://stackoverflow.com/users/5405076/muniza-siddiqui"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 9192, "favorite_count": 1, "answer_count": 1, "score": 1, "last_activity_date": 1548195264, "creation_date": 1468453944, "question_id": 38363490, "link": "https://stackoverflow.com/questions/38363490/how-can-i-decrypt-snapchat-nomedia-files", "title": "How can I decrypt Snapchat .nomedia files?", "body": "<p>Recently, all of my Snapchat photos and videos got deleted, so I have been trying to get them back. Apparently, Snapchat stores photos/videos in a file, then hides that file using a .nomedia extension. However, to make it harder to find, we apparently need to decrypt Snapchat .nomedia files using this code:</p>\n\n<pre><code>#!/usr/bin/env ruby\n\nrequire 'openssl'\n\ndata = File.open('blob', 'r:ASCII-8BIT').read\nc = OpenSSL::Cipher.new('AES-128-ECB')\nc.decrypt\nc.key = 'M02cnQ51Ji97vwT4'\no = ''.force_encoding('ASCII-8BIT')\ndata.bytes.each_slice(16) { |s| o += c.update(s.map(&amp;:chr).join) }\no += c.final\nFile.open('blob.jpg', 'w') { |f| f.write(o) }\n</code></pre>\n\n<p>Sadly, I have no idea what to do with this.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "cart"], "comments": [{"owner": {"reputation": 432, "user_id": 6542561, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/uEiJr.png?s=128&g=1", "display_name": "Bruce David Wilner", "link": "https://stackoverflow.com/users/6542561/bruce-david-wilner"}, "edited": false, "score": 0, "creation_date": 1468452901, "post_id": 38363175, "comment_id": 64138997, "body": "I can&#39;t imagine what your question means.  It is completely inconsistent.  If you have--as you claim--code that totals this, that, and the other, then also adding in the shipping cost is a much of a muchness.  I don&#39;t actually believe such code exists.  The fact that the snippet that you included has nothing to do with calculating totals doesn&#39;t exactly fill me with confidence."}], "answers": [{"tags": [], "owner": {"reputation": 12542, "user_id": 156746, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/8TsPx.jpg?s=128&g=1", "display_name": "DiegoSalazar", "link": "https://stackoverflow.com/users/156746/diegosalazar"}, "is_accepted": false, "score": 0, "last_activity_date": 1468456464, "creation_date": 1468456464, "answer_id": 38363776, "question_id": 38363175, "link": "https://stackoverflow.com/questions/38363175/add-shipping-price-to-total/38363776#38363776", "title": "Add shipping price to total", "body": "<p>I think you want to do:</p>\n\n<pre><code>shipping_cost + cart.total\n</code></pre>\n"}], "owner": {"reputation": 187, "user_id": 5888706, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/516d587e08a70e8be8fd9362564ad12d?s=128&d=identicon&r=PG&f=1", "display_name": "Kris", "link": "https://stackoverflow.com/users/5888706/kris"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 109, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1468456464, "creation_date": 1468451521, "question_id": 38363175, "link": "https://stackoverflow.com/questions/38363175/add-shipping-price-to-total", "title": "Add shipping price to total", "body": "<p>I am having trouble figuring out how to add shipping cost to my total cart cost in the view of my shopping cart app to calculate an order total. </p>\n\n<p>So far I have ruby code that adds up all of the orders and calculates a order subtotal. I have also added a simple html input form with the shipping options. What I cant figure is how to add the subtotal up with the shipping option that is selected. I feel like there is a simple way to to this in rails but I cant figure out what that would be. </p>\n\n<p>Thanks in advance for any help</p>\n\n<p>_shopping_cart.html.erb</p>\n\n<pre><code>&lt;% if !@order_item.nil? &amp;&amp; @order_item.errors.any? %&gt;\n  &lt;div class=\"alert alert-danger\"&gt;\n    &lt;ul&gt;\n    &lt;% @order_item.errors.full_messages.each do |msg| %&gt;\n      &lt;li&gt;&lt;%= msg %&gt;&lt;/li&gt;\n    &lt;% end %&gt;\n    &lt;/ul&gt;\n  &lt;/div&gt;\n&lt;% end %&gt;\n&lt;% if @order_items.size == 0 %&gt;\n  &lt;p class=\"text-center\"&gt;\n    There are no items in your shopping cart.  Please &lt;%= link_to \"go back\", root_path %&gt; and add some items to your cart.\n  &lt;/p&gt;\n&lt;% else %&gt;\n  &lt;% @order_items.each do |order_item| %&gt;\n    &lt;%= render 'carts/cart_row', product: order_item.product, order_item: order_item, show_total: true %&gt;\n  &lt;% end %&gt;\n   &lt;p class=\"text-center\"&gt;Order Subtotal=&lt;%= @order_items.sum(:total_price)%&gt;&lt;/p&gt;\n&lt;% end %&gt;\n&lt;P class=\"text-center\"&gt;Please select shipping:&lt;/P&gt;\n&lt;P class=\"text-center\"&gt;&lt;LABEL ACCESSKEY=C&gt;&lt;INPUT TYPE=radio NAME=\"payment_method\" VALUE=\"2.5\" CHECKED&gt; $2.50 US Standard&lt;/LABEL&gt;&lt;BR&gt;\n&lt;LABEL ACCESSKEY=D&gt;&lt;INPUT TYPE=radio NAME=\"payment_method\" VALUE=\"5.5\"&gt; $5.50 US Priority&lt;/LABEL&gt;&lt;BR&gt;\n&lt;LABEL ACCESSKEY=M&gt;&lt;INPUT TYPE=radio NAME=\"payment_method\" VALUE=\"9.5\"&gt; $9.50 International&lt;/LABEL&gt;&lt;BR&gt;\n&lt;LABEL ACCESSKEY=N&gt;&lt;INPUT TYPE=radio NAME=\"payment_method\" VALUE=\"14.5\"&gt;  $14.50 International Priority&lt;/LABEL&gt;&lt;/P&gt;\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "postgresql"], "comments": [{"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1468464178, "post_id": 38363131, "comment_id": 64141398, "body": "You&#39;re using Rails, so use Active Record. Don&#39;t use pg, as you&#39;re dropping down to a level where you have to use DBM-specific code, tying your code to that database manager, which isn&#39;t a good idea. <i>IF</i> you have to do so, then isolate that code into as small a section as possible, because that&#39;s what you&#39;ll be modifying if you convert to a different DBM. See <a href=\"http://stackoverflow.com/a/24322440/128421\">stackoverflow.com/a/24322440/128421</a> for more information."}, {"owner": {"reputation": 14371, "user_id": 321866, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/25e93a50d485eca289f887868e1bcea5?s=128&d=identicon&r=PG", "display_name": "C Johnson", "link": "https://stackoverflow.com/users/321866/c-johnson"}, "reply_to_user": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1468470225, "post_id": 38363131, "comment_id": 64142763, "body": "Tried the sql query at that link and it didn&#39;t work. Don&#39;t mark this as a duplicate because it isn&#39;t. I&#39;m not asking on how to do the equivalent using activerecord: I asked for psql."}], "answers": [{"comments": [{"owner": {"reputation": 14371, "user_id": 321866, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/25e93a50d485eca289f887868e1bcea5?s=128&d=identicon&r=PG", "display_name": "C Johnson", "link": "https://stackoverflow.com/users/321866/c-johnson"}, "edited": false, "score": 0, "creation_date": 1468470036, "post_id": 38363805, "comment_id": 64142708, "body": "This works perfectly. Thanks so much for confirming."}], "tags": [], "owner": {"reputation": 12542, "user_id": 156746, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/8TsPx.jpg?s=128&g=1", "display_name": "DiegoSalazar", "link": "https://stackoverflow.com/users/156746/diegosalazar"}, "is_accepted": false, "score": 1, "last_activity_date": 1468456645, "creation_date": 1468456645, "answer_id": 38363805, "question_id": 38363131, "link": "https://stackoverflow.com/questions/38363131/how-to-list-postgresql-database-using-ruby-pg-gem/38363805#38363805", "title": "How to list postgresql database using ruby pg gem?", "body": "<p>It raises a <code>PG::ConnectionBad</code> exception.</p>\n\n<pre><code>PG.connect dbname: \"nonexistent\"\n# =&gt; PG::ConnectionBad: FATAL:  database \"nonexistent\" does not exist\n</code></pre>\n\n<p>Rescue that to find out if a db exists.</p>\n\n<pre><code>def db_exists?(name)\n  PG.connect dbname: \"nonexistent\"\nrescue PG::ConnectionBad =&gt; e\n  false\nend\n\ndb_exists?(\"nonexistent\") # =&gt; false\ndb_exists?(\"exists\") # truthy Connection object\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 14371, "user_id": 321866, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/25e93a50d485eca289f887868e1bcea5?s=128&d=identicon&r=PG", "display_name": "C Johnson", "link": "https://stackoverflow.com/users/321866/c-johnson"}, "edited": false, "score": 0, "creation_date": 1468469811, "post_id": 38363868, "comment_id": 64142660, "body": "wow, it worked. It printed out all the databases i have. total black magic."}, {"owner": {"reputation": 14371, "user_id": 321866, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/25e93a50d485eca289f887868e1bcea5?s=128&d=identicon&r=PG", "display_name": "C Johnson", "link": "https://stackoverflow.com/users/321866/c-johnson"}, "edited": false, "score": 0, "creation_date": 1468470012, "post_id": 38363868, "comment_id": 64142703, "body": "I&#39;m going to mark this as the answer since I figured out mostly on my own how to check if the database existed or not. But this answer I could not have figured out on my own, being a total newbie at this stuff."}], "tags": [], "owner": {"reputation": 18224, "user_id": 406987, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8865b16d4f3493cfae865af2b3247fd3?s=128&d=identicon&r=PG", "display_name": "Doon", "link": "https://stackoverflow.com/users/406987/doon"}, "is_accepted": true, "score": 2, "last_activity_date": 1468457203, "creation_date": 1468457203, "answer_id": 38363868, "question_id": 38363131, "link": "https://stackoverflow.com/questions/38363131/how-to-list-postgresql-database-using-ruby-pg-gem/38363868#38363868", "title": "How to list postgresql database using ruby pg gem?", "body": "<p>You could also connect to the <code>template1</code> database and then list all of the databases with</p>\n\n<pre><code>SELECT datname FROM pg_database WHERE datistemplate = false;\n</code></pre>\n\n<p>so something like </p>\n\n<pre><code># Output list of all databases\nconn = PG.connect( dbname: 'template1' )\nconn.exec( \"SELECT datname FROM pg_database WHERE datistemplate = false;\" ) do |result|\n  result.each do |row|\n    puts row.values_at('datname')\n  end\nend\n</code></pre>\n"}], "owner": {"reputation": 14371, "user_id": 321866, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/25e93a50d485eca289f887868e1bcea5?s=128&d=identicon&r=PG", "display_name": "C Johnson", "link": "https://stackoverflow.com/users/321866/c-johnson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1043, "favorite_count": 0, "closed_date": 1468464370, "accepted_answer_id": 38363868, "answer_count": 2, "score": 2, "last_activity_date": 1468457203, "creation_date": 1468451262, "last_edit_date": 1468451577, "question_id": 38363131, "link": "https://stackoverflow.com/questions/38363131/how-to-list-postgresql-database-using-ruby-pg-gem", "closed_reason": "Duplicate", "title": "How to list postgresql database using ruby pg gem?", "body": "<p>Sorry for the basic question. I'm a newbie with postgresql.\nI want to use some gem (the pg gem?) to find out if a certain postgresql databases exists.</p>\n\n<p>Is there something like? </p>\n\n<pre><code>PG.does_exist?('my_test_db')\n</code></pre>\n\n<p>Or will it throw an exception if the database doesn't exist when I simply try to connect?</p>\n\n<pre><code>begin\n  con = PG.connect :dbname =&gt; 'my_test_db'\nrescue PG::Error =&gt; e\n  puts e.message\nensure\n  con.close if con\nend\n</code></pre>\n\n<p>Which still leaves me with the question of how to list the databases that exist.</p>\n\n<p>background:\nusing the command line I can execute:</p>\n\n<pre><code>psql -lt\n</code></pre>\n\n<p>where I can see all my databases. Using really ugly text manipulation you could query if a database exists. But surely there has to be a way to do it using a ruby gem.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4", "actionmailer"], "answers": [{"tags": [], "owner": {"reputation": 17, "user_id": 6475464, "user_type": "registered", "accept_rate": 67, "profile_image": "https://lh6.googleusercontent.com/-DdOdUnS46Gk/AAAAAAAAAAI/AAAAAAAAABo/qUzF93sKjkM/photo.jpg?sz=128", "display_name": "Drew Lilley", "link": "https://stackoverflow.com/users/6475464/drew-lilley"}, "is_accepted": false, "score": 0, "last_activity_date": 1468452411, "creation_date": 1468452411, "answer_id": 38363310, "question_id": 38362946, "link": "https://stackoverflow.com/questions/38362946/rails-mailer-call-messes-up-controller-routes/38363310#38363310", "title": "Rails Mailer call messes up controller routes", "body": "<p>Figured it out. I had to create a new PostMailer controller with the appropriate action in it.</p>\n"}], "owner": {"reputation": 17, "user_id": 6475464, "user_type": "registered", "accept_rate": 67, "profile_image": "https://lh6.googleusercontent.com/-DdOdUnS46Gk/AAAAAAAAAAI/AAAAAAAAABo/qUzF93sKjkM/photo.jpg?sz=128", "display_name": "Drew Lilley", "link": "https://stackoverflow.com/users/6475464/drew-lilley"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 35, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1468452411, "creation_date": 1468449895, "question_id": 38362946, "link": "https://stackoverflow.com/questions/38362946/rails-mailer-call-messes-up-controller-routes", "title": "Rails Mailer call messes up controller routes", "body": "<p>I'm trying to send out an email when a user submits a post. Here's what the relevant part my create action looks like in the post controller:</p>\n\n<pre><code>if @post.save\n      UserMailer.alert_response(@post, @user).deliver\n          respond_to do |format|\n              format.js { render layout: false, content_type: 'text/javascript' }\n            end\n\n        else\n        respond_to do |format|\n            format.js { render layout: false, content_type: 'text/javascript' }\n            end\n          # redirect_to root_url\n    end\n</code></pre>\n\n<p>and I've got a create.js.erb file that gets rendered whether the post saves or not. The alert_response method in my UserMailer controller looks like this:</p>\n\n<pre><code>def alert_response(post, user)\n    @response_post = post\n    @parent = post.parent\n    @parent_user = @parent.user\n    @user = user\n    mail to: @parent_user, subject: \"Someone Responded to Your Post\"\n  end\n</code></pre>\n\n<p>When I don't include UserMailer.alert_upvotes(@post, @user).deliver in the create action, everything works just fine. The create.js.erb file is rendered and that is all. When I do include it, the create.js.erb file is never rendered and for some reason the index action of my post controller gets fired and the index view gets rendered. Is there something wrong with my UserMailer call?</p>\n"}, {"tags": ["ruby", "first-class-functions"], "comments": [{"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 1, "creation_date": 1468450157, "post_id": 38362839, "comment_id": 64138252, "body": "What do you mean by &quot;better&quot;? What are you trying to achieve? More speed, or some additional functionality?"}, {"owner": {"reputation": 91121, "user_id": 179125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5594142dcc49a24b1902ec8059181f8d?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan Running", "link": "https://stackoverflow.com/users/179125/jordan-running"}, "edited": false, "score": 4, "creation_date": 1468450278, "post_id": 38362839, "comment_id": 64138297, "body": "When you call <code>g(f.f)</code> in the above code, the argument you&#39;re passing to <code>g</code> is not a function. You&#39;re calling the method <code>f.f</code> and passing the result, the string <code>&quot;hi&quot;</code>, to <code>g</code>, which simply returns its argument."}, {"owner": {"reputation": 7994, "user_id": 1625339, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/b8ba46f911517c8b2ccc39e0be9050c0?s=128&d=identicon&r=PG", "display_name": "Aetherus", "link": "https://stackoverflow.com/users/1625339/aetherus"}, "reply_to_user": {"reputation": 91121, "user_id": 179125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5594142dcc49a24b1902ec8059181f8d?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan Running", "link": "https://stackoverflow.com/users/179125/jordan-running"}, "edited": false, "score": 2, "creation_date": 1468452437, "post_id": 38362839, "comment_id": 64138873, "body": "@Jordan Actually <code>puts</code> returns <code>nil</code>, so <code>g(f.f)</code> takes <code>nil</code> as the argument."}, {"owner": {"reputation": 91121, "user_id": 179125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5594142dcc49a24b1902ec8059181f8d?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan Running", "link": "https://stackoverflow.com/users/179125/jordan-running"}, "reply_to_user": {"reputation": 7994, "user_id": 1625339, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/b8ba46f911517c8b2ccc39e0be9050c0?s=128&d=identicon&r=PG", "display_name": "Aetherus", "link": "https://stackoverflow.com/users/1625339/aetherus"}, "edited": false, "score": 0, "creation_date": 1468452606, "post_id": 38362839, "comment_id": 64138925, "body": "@Aetherus Good eye. You are correct, of course."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "reply_to_user": {"reputation": 91121, "user_id": 179125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5594142dcc49a24b1902ec8059181f8d?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan Running", "link": "https://stackoverflow.com/users/179125/jordan-running"}, "edited": false, "score": 0, "creation_date": 1468465422, "post_id": 38362839, "comment_id": 64141650, "body": "@Jordan, you were tricked by <code># =&gt; &quot;hi&quot;</code>, which normally refers to the return value. Maybe SO needs something like <code>#-&gt; &quot;hi&quot;</code> for printed values."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1468466586, "post_id": 38362839, "comment_id": 64141875, "body": "@muistooshort would be disappointed to learn that procs are &quot;notorious&quot;, as he uses them for everything."}, {"owner": {"reputation": 81, "user_id": 5699217, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/94f9cc55085bede4d87370f7e330a33c?s=128&d=identicon&r=PG&f=1", "display_name": "user5699217", "link": "https://stackoverflow.com/users/5699217/user5699217"}, "reply_to_user": {"reputation": 91121, "user_id": 179125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5594142dcc49a24b1902ec8059181f8d?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan Running", "link": "https://stackoverflow.com/users/179125/jordan-running"}, "edited": false, "score": 0, "creation_date": 1468698993, "post_id": 38362839, "comment_id": 64237517, "body": "@Jordan is of course correct.  The code should read:"}, {"owner": {"reputation": 81, "user_id": 5699217, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/94f9cc55085bede4d87370f7e330a33c?s=128&d=identicon&r=PG&f=1", "display_name": "user5699217", "link": "https://stackoverflow.com/users/5699217/user5699217"}, "reply_to_user": {"reputation": 91121, "user_id": 179125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5594142dcc49a24b1902ec8059181f8d?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan Running", "link": "https://stackoverflow.com/users/179125/jordan-running"}, "edited": false, "score": 0, "creation_date": 1468700229, "post_id": 38362839, "comment_id": 64237837, "body": "@Jordan is of course correct.   The code should read: def g(fun); fun.f();end  In other words, wrapping a function as a class method of an anonymous class avoids the overhead of capturing the current closure in a proc or lambda, at the cost of creating a new closure for the anonymous class, which is presumably less complex and computationally-expensive than the global closure."}], "answers": [{"comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1468466161, "post_id": 38363527, "comment_id": 64141800, "body": "I don&#39;t understand your remark about the implemention of DSLs, but it sounds interesting--something I&#39;ll have to look into. It&#39;s perhaps worth noting that if the method is first converted to a proc, the proc can be passed to <code>g</code>: <code>proc = &#39;123&#39;.method(:to_i).to_proc  #=&gt; #&lt;Proc:0x007ff1d8971c70 (lambda)&gt;; g(proc) #=&gt; 123</code>."}], "tags": [], "owner": {"reputation": 7994, "user_id": 1625339, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/b8ba46f911517c8b2ccc39e0be9050c0?s=128&d=identicon&r=PG", "display_name": "Aetherus", "link": "https://stackoverflow.com/users/1625339/aetherus"}, "is_accepted": false, "score": 7, "last_activity_date": 1468461331, "last_edit_date": 1468461331, "creation_date": 1468454364, "answer_id": 38363527, "question_id": 38362839, "link": "https://stackoverflow.com/questions/38362839/ruby-anonymous-classes-as-first-class-functions/38363527#38363527", "title": "Ruby anonymous classes as first-class functions", "body": "<p>In fact, Ruby doesn't have functions at all, only methods. So if you want pass a method to another method, you can</p>\n\n<pre><code>def g(f)\n  f.call\nend\n\ng('123'.method(:to_i))\n</code></pre>\n\n<p>This is less concise than Python, but it's the price that Ruby has to pay for the ability to omit parentheses in method calls. I think omitting parentheses is one of the things that makes Ruby shine, because this makes implementing DSL in pure Ruby a lot easier.</p>\n"}, {"tags": [], "owner": {"reputation": 80721, "user_id": 797049, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/5f4f7a23e3d0134123a66015bdc4edd1?s=128&d=identicon&r=PG", "display_name": "Mark Reed", "link": "https://stackoverflow.com/users/797049/mark-reed"}, "is_accepted": false, "score": 1, "last_activity_date": 1468455473, "creation_date": 1468455473, "answer_id": 38363660, "question_id": 38362839, "link": "https://stackoverflow.com/questions/38362839/ruby-anonymous-classes-as-first-class-functions/38363660#38363660", "title": "Ruby anonymous classes as first-class functions", "body": "<p>Ruby has <code>proc</code>s and <code>lambda</code>s (both instances of the <code>Proc</code> class), and <code>Method</code>s, all of which approximate first-class functions. Lambdas are the closest to a true first-class function: they check the number of arguments when called and create a new call context such that <code>return</code> just returns from the lambda.  In contrast, procs are just reified blocks of code; they don't check their number of arguments, and a <code>return</code> causes the enclosing method to return, not just the proc.</p>\n\n<p>Method objects allow you to store an uncalled method in a variable, complete with implied invocant. There's no syntax for creating an anonymous Method, but you said first-class functions, not anonymous ones. Other than the invocant, they are basically lambdas whose body is that of the referenced method.</p>\n\n<p>I'm not sure what an anonymous class gets you that is better than the above solutions, but it is certainly further away from a true first-class function. It's more like the way we had to approximate them in Java before closures were added to the language.</p>\n"}], "owner": {"reputation": 81, "user_id": 5699217, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/94f9cc55085bede4d87370f7e330a33c?s=128&d=identicon&r=PG&f=1", "display_name": "user5699217", "link": "https://stackoverflow.com/users/5699217/user5699217"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 588, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1468461331, "creation_date": 1468449387, "last_edit_date": 1468450086, "question_id": 38362839, "link": "https://stackoverflow.com/questions/38362839/ruby-anonymous-classes-as-first-class-functions", "title": "Ruby anonymous classes as first-class functions", "body": "<p>Ruby does not have first class functions; although it has procs and lambdas, these notoriously require significant overhead.  (Python has first class functions, apparently without the overhead.)\nIt occurred me to that first class functions can be simulated with a little more work by using anonymous classes, as follows:</p>\n\n<pre><code>f = Class.new { def self.f; puts 'hi'; end }\n\ndef g(fun); fun; end\n\ng(f.f)\n# =&gt; \"hi\"\n</code></pre>\n\n<p>Does anyone know a better way?</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1468464662, "post_id": 38362797, "comment_id": 64141509, "body": "Please read &quot;<a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a>&quot; including the linked pages, and &quot;<a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>&quot;. When asking about a syntax error in your code it <i>really</i> helps when you say what it is. That helps us help you."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1468464667, "post_id": 38362797, "comment_id": 64141511, "body": "I&#39;d like to mention a few things about your code that is unrelated to your question.  1. <code>loop do</code> is preferred to the somewhat artificial <code>while(true)</code>. For one, <a href=\"http://ruby-doc.org/core-2.2.0/Kernel.html#method-i-loop\" rel=\"nofollow noreferrer\">Kernel#loop</a> handles the <code>StopInteration</code> exception, a useful property that you will learn about in time. 2. Iterators with blocks are preferred to <code>for</code> loops (which nobody uses): <code>(arr.size-1).times { |i| ...}</code>. (cont.)..."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1468464682, "post_id": 38362797, "comment_id": 64141512, "body": "...3. Ruby allows you to use <i>parallel assignment</i> (aka <i>multiple assignment</i>) to swap two values of the array without the use of a temporary variable (your <code>saved</code>): <code>arr[i], arr[i+1] =  arr[i+1], arr[i]</code>. (cont.)...4. Some prefer <code>break if counter == 0</code> to your 3-line construct. (Or <code>break if counter.zero?</code> to safeguard against the accidental use of a single equals sign.) 5. If the main purpose of a method is to compute a value (here a sorted array), having a print statement within the method makes the method less versatile. Better to move it out and write <code>puts bubble_sort_by(arr)</code>."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1468467095, "post_id": 38362797, "comment_id": 64141954, "body": "...6. <code>return left - right</code> can be shorted to <code>left - right</code> since that is the last value calculated before the method returns. Here <code>return</code> does no harm, but it&#39;s normally omitted when it&#39;s not needed. (Of course, <code>return</code> may be needed  in some situations where a conditional is involved, such as <code>return if...</code>, in a case statement, etc.)"}, {"owner": {"reputation": 15, "user_id": 6222732, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/137f3cd32ed4a4e62b109bf5c82d7a2b?s=128&d=identicon&r=PG&f=1", "display_name": "kirby3021", "link": "https://stackoverflow.com/users/6222732/kirby3021"}, "edited": false, "score": 0, "creation_date": 1468504106, "post_id": 38362797, "comment_id": 64162298, "body": "Thank you all for your input, and thanks Tin Man for the linked article - always good to know how to better ask questions."}], "answers": [{"tags": [], "owner": {"reputation": 742, "user_id": 601555, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b70354d05caf6bdf7e7953713c1cd4?s=128&d=identicon&r=PG", "display_name": "Ilija Eftimov", "link": "https://stackoverflow.com/users/601555/ilija-eftimov"}, "is_accepted": true, "score": 1, "last_activity_date": 1468464716, "last_edit_date": 1468464716, "creation_date": 1468449596, "answer_id": 38362886, "question_id": 38362797, "link": "https://stackoverflow.com/questions/38362797/how-to-use-a-block-as-method-input/38362886#38362886", "title": "How to use a block as method input", "body": "<p>This is the fixed version:</p>\n\n<pre><code> def bubble_sort_by(arr)\n    while(true)\n        counter = 0\n        for i in 0...(arr.size-1)\n            if yield(arr[i], arr[i+1]) &gt; 0\n                saved = arr[i]\n                arr[i] = arr[i+1]\n                arr[i+1] = saved\n                counter += 1\n            end\n        end\n        if (counter == 0)\n            break\n        end\n    end\n\n    print arr\nend\n\nbubble_sort_by([4,3,78,2,0,2]) do |left,right|\n    left - right\nend\n</code></pre>\n\n<p>As you can see, it had two issues:</p>\n\n<ol>\n<li>The space a <code>yield</code> - basically the space was extra because it wasn't passing the numbers in the parenthesis as arguments;</li>\n<li>The <code>return</code> in the block - you do not want the block to explicitly return the value, you need it to be evaluated in <code>bubble_sort_by</code> and then its result used in the context there.</li>\n</ol>\n"}], "owner": {"reputation": 15, "user_id": 6222732, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/137f3cd32ed4a4e62b109bf5c82d7a2b?s=128&d=identicon&r=PG&f=1", "display_name": "kirby3021", "link": "https://stackoverflow.com/users/6222732/kirby3021"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 34, "favorite_count": 0, "accepted_answer_id": 38362886, "answer_count": 1, "score": -1, "last_activity_date": 1468464716, "creation_date": 1468449169, "last_edit_date": 1468464673, "question_id": 38362797, "link": "https://stackoverflow.com/questions/38362797/how-to-use-a-block-as-method-input", "title": "How to use a block as method input", "body": "<p>I am trying to create a method that uses bubble-sort to sort a small array into numerical order. This method accepts two arguments, an array and a method:</p>\n\n<pre><code>def bubble_sort_by(arr)\n    while(true)\n        counter = 0\n        for i in 0...(arr.size-1)\n            if yield (arr[i], arr[i+1]) &gt; 0\n                saved = arr[i]\n                arr[i] = arr[i+1]\n                arr[i+1] = saved\n                counter += 1\n            end\n        end\n        if (counter == 0)\n            break\n        end\n    end\n\n    print arr\nend\n\nbubble_sort_by([4,3,78,2,0,2]) do |left,right|\n    return left - right\nend\n</code></pre>\n\n<p>The sorted array should be</p>\n\n<pre><code>[0,2,2,3,4,78]\n</code></pre>\n\n<p>Currently I am using Ruby version 2.3.0p0.</p>\n\n<p>I keep getting a syntax error when I try to run this code.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "devise", "sidekiq"], "comments": [{"owner": {"reputation": 742, "user_id": 601555, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b70354d05caf6bdf7e7953713c1cd4?s=128&d=identicon&r=PG", "display_name": "Ilija Eftimov", "link": "https://stackoverflow.com/users/601555/ilija-eftimov"}, "edited": false, "score": 1, "creation_date": 1468449710, "post_id": 38362743, "comment_id": 64138090, "body": "Did you generate the devise views and change them to your liking?"}, {"owner": {"reputation": 1, "user_id": 6543498, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4492499cdeab28ee852a58753fb7426a?s=128&d=identicon&r=PG&f=1", "display_name": "tiktik", "link": "https://stackoverflow.com/users/6543498/tiktik"}, "reply_to_user": {"reputation": 742, "user_id": 601555, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b70354d05caf6bdf7e7953713c1cd4?s=128&d=identicon&r=PG", "display_name": "Ilija Eftimov", "link": "https://stackoverflow.com/users/601555/ilija-eftimov"}, "edited": false, "score": 0, "creation_date": 1468455121, "post_id": 38362743, "comment_id": 64139500, "body": "I am using devise scope_views true. So I am having users/mailer . Ideally it should work. It is working in development environment but not in production"}], "owner": {"reputation": 1, "user_id": 6543498, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4492499cdeab28ee852a58753fb7426a?s=128&d=identicon&r=PG&f=1", "display_name": "tiktik", "link": "https://stackoverflow.com/users/6543498/tiktik"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 54, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1468448870, "creation_date": 1468448870, "question_id": 38362743, "link": "https://stackoverflow.com/questions/38362743/sidekiq-not-updating-email-template-devise", "title": "Sidekiq not updating email template devise", "body": "<p>I am having a rails application which uses sidekiq for sending asynchronous devise email. But in production environment, for confirmation email server is using confirmation instructions from devise gem and not from my views. Please help </p>\n"}, {"tags": ["ruby", "xcode", "cocoapods"], "answers": [{"tags": [], "owner": {"reputation": 362, "user_id": 4571768, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2aaa686cbc6cc55be7f1b9e4cb9fa6b0?s=128&d=identicon&r=PG&f=1", "display_name": "DSAjit", "link": "https://stackoverflow.com/users/4571768/dsajit"}, "is_accepted": true, "score": 12, "last_activity_date": 1468491652, "creation_date": 1468491652, "answer_id": 38371639, "question_id": 38362712, "link": "https://stackoverflow.com/questions/38362712/error-during-install-cocoapods/38371639#38371639", "title": "Error during install cocoapods", "body": "<p>First install an old version of 'activesupport' (which is both compatible with ruby 2.0 and with cocoapods) and then install cocoapods. <code>sudo gem install activesupport -v 4.2.6</code></p>\n"}, {"tags": [], "owner": {"reputation": 649, "user_id": 1109832, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/E0z7T.jpg?s=128&g=1", "display_name": "Manoj", "link": "https://stackoverflow.com/users/1109832/manoj"}, "is_accepted": false, "score": 0, "last_activity_date": 1473073969, "last_edit_date": 1473073969, "creation_date": 1469456396, "answer_id": 38570281, "question_id": 38362712, "link": "https://stackoverflow.com/questions/38362712/error-during-install-cocoapods/38570281#38570281", "title": "Error during install cocoapods", "body": "<p>Please install latest version of Ruby and RVM(Ruby version manager) from the below link:(Steps are provided in <a href=\"http://railsapps.github.io/installrubyonrails-mac.html\" rel=\"nofollow\">this</a> link)</p>\n\n<p>Then run \"sudo gem install cocoapods\" in terminal.</p>\n"}], "owner": {"reputation": 43, "user_id": 5275779, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/788167d9563ec773bcfc6a77f85f4be6?s=128&d=identicon&r=PG", "display_name": "enKay", "link": "https://stackoverflow.com/users/5275779/enkay"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2918, "favorite_count": 2, "accepted_answer_id": 38371639, "answer_count": 2, "score": 4, "last_activity_date": 1473073969, "creation_date": 1468448754, "question_id": 38362712, "link": "https://stackoverflow.com/questions/38362712/error-during-install-cocoapods", "title": "Error during install cocoapods", "body": "<p>I am trying to install the latest CocoaPods (which is currently 1.0.1) but it shows me the following error.</p>\n\n<pre><code>$ sudo gem install cocoapods\nPassword:\nFetching: i18n-0.7.0.gem (100%)\nSuccessfully installed i18n-0.7.0\nFetching: thread_safe-0.3.5.gem (100%)\nSuccessfully installed thread_safe-0.3.5\nFetching: tzinfo-1.2.2.gem (100%)\nSuccessfully installed tzinfo-1.2.2\nFetching: minitest-5.9.0.gem (100%)\nSuccessfully installed minitest-5.9.0\nFetching: concurrent-ruby-1.0.2.gem (100%)\nSuccessfully installed concurrent-ruby-1.0.2\nFetching: activesupport-5.0.0.gem (100%)\nERROR:  Error installing cocoapods:\nactivesupport requires Ruby version &gt;= 2.2.2.\n</code></pre>\n\n<p>The installation guide says </p>\n\n<blockquote>\n  <p>[...] it will be installable with the default Ruby available on macOS. You can use a Ruby Version manager, however we recommend that you use the standard Ruby available on macOS unless you know what you're doing.</p>\n</blockquote>\n\n<p>ruby is not my preferred language, so can anybody help me, how i can install the cocoapods gem?</p>\n\n<p>OSX Version: OS X El Capitan 10.11.5</p>\n"}, {"tags": ["ruby", "sinatra", "rake", "rufus-scheduler"], "answers": [{"tags": [], "owner": {"reputation": 880, "user_id": 5279080, "user_type": "registered", "accept_rate": 68, "profile_image": "https://lh5.googleusercontent.com/-LoDm6XYbQug/AAAAAAAAAAI/AAAAAAAAABE/t33anFH2T3I/photo.jpg?sz=128", "display_name": "alilland", "link": "https://stackoverflow.com/users/5279080/alilland"}, "is_accepted": false, "score": 0, "last_activity_date": 1468451882, "last_edit_date": 1495541683, "creation_date": 1468451882, "answer_id": 38363232, "question_id": 38362634, "link": "https://stackoverflow.com/questions/38362634/running-rake-task-with-rufus-scheduler-and-sinatra-it-only-runs-one-time-inst/38363232#38363232", "title": "running rake task with rufus-scheduler and sinatra -- it only runs one time instead of the desired interval", "body": "<p>solved, was able to successfully call using <code>system 'rake first_test'</code></p>\n\n<p>source: <a href=\"https://stackoverflow.com/questions/34098691/rake-tasks-wont-run-inside-of-my-sinatra-app\">Rake tasks won&#39;t run inside of my sinatra app</a></p>\n"}], "owner": {"reputation": 880, "user_id": 5279080, "user_type": "registered", "accept_rate": 68, "profile_image": "https://lh5.googleusercontent.com/-LoDm6XYbQug/AAAAAAAAAAI/AAAAAAAAABE/t33anFH2T3I/photo.jpg?sz=128", "display_name": "alilland", "link": "https://stackoverflow.com/users/5279080/alilland"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 263, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1468451882, "creation_date": 1468448297, "last_edit_date": 1468450755, "question_id": 38362634, "link": "https://stackoverflow.com/questions/38362634/running-rake-task-with-rufus-scheduler-and-sinatra-it-only-runs-one-time-inst", "title": "running rake task with rufus-scheduler and sinatra -- it only runs one time instead of the desired interval", "body": "<p>i have a rakefile in the same folder as my app.rb file, I can successfully call the rakefile task once, but it doesnt run the task more than once. It should run every 3 seconds.</p>\n\n<pre><code>require 'sinatra'\nrequire 'rufus/scheduler'\nrequire 'rake'\n\nclass MySchedule &lt; Sinatra::Base\n  scheduler = Rufus::Scheduler.new\n  rake = Rake::Application.new\n  Rake.application = rake\n  rake.init\n  rake.load_rakefile\n\n  scheduler.every '3s' do\n    rake[:first_test].invoke\n  end\nend\n\nMySchedule.new\n</code></pre>\n"}, {"tags": ["ruby", "yield", "ruby-block"], "answers": [{"comments": [{"owner": {"reputation": 4639, "user_id": 3986708, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/g0JCF.jpg?s=128&g=1", "display_name": "hgiesel", "link": "https://stackoverflow.com/users/3986708/hgiesel"}, "edited": false, "score": 0, "creation_date": 1468449860, "post_id": 38362876, "comment_id": 64138157, "body": "Actually no, that doesn&#39;t work. It has to <code>config.start_vim { vim = Vimrunner.start; vim }</code>. That&#39;s what I find so confusing about it."}, {"owner": {"reputation": 2172, "user_id": 4412925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf7fa1503a3820659b27943c99d463a0?s=128&d=identicon&r=PG&f=1", "display_name": "Nabeel", "link": "https://stackoverflow.com/users/4412925/nabeel"}, "reply_to_user": {"reputation": 4639, "user_id": 3986708, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/g0JCF.jpg?s=128&g=1", "display_name": "hgiesel", "link": "https://stackoverflow.com/users/3986708/hgiesel"}, "edited": false, "score": 0, "creation_date": 1468449907, "post_id": 38362876, "comment_id": 64138172, "body": "That seems odd as it&#39;s pretty much the same thing."}, {"owner": {"reputation": 4639, "user_id": 3986708, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/g0JCF.jpg?s=128&g=1", "display_name": "hgiesel", "link": "https://stackoverflow.com/users/3986708/hgiesel"}, "edited": false, "score": 0, "creation_date": 1468450830, "post_id": 38362876, "comment_id": 64138469, "body": "The thing is I continue to use the <code>VIM</code> constant (or variable, that really doesn&#39;t matter) after that method call. So it&#39;s basically impossible to test it."}], "tags": [], "owner": {"reputation": 2172, "user_id": 4412925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf7fa1503a3820659b27943c99d463a0?s=128&d=identicon&r=PG&f=1", "display_name": "Nabeel", "link": "https://stackoverflow.com/users/4412925/nabeel"}, "is_accepted": true, "score": 1, "last_activity_date": 1468450242, "last_edit_date": 1468450242, "creation_date": 1468449548, "answer_id": 38362876, "question_id": 38362616, "link": "https://stackoverflow.com/questions/38362616/variable-assignment-takes-place-in-a-block-in-a-block/38362876#38362876", "title": "Variable assignment takes place in a block in a block", "body": "<p>You could use an instance variable if you want to access it outside? i.e. <code>@a = 'Hello World!'</code> and then use <code>puts @a</code>. Local variables are tied to the block you're in itself and thus can not be called outside.</p>\n\n<p>I'm not sure exactly what your use case is, however you should be able to use this instead</p>\n\n<pre><code>def foo\n  yield\nend\n\nfoo { 'Hello World!' }\n</code></pre>\n\n<p>or in your first case (since it's a configuration setting I'm not sure if it even matters if you need a variable to store this)</p>\n\n<pre><code>Vimrunner::RSpec.configure do |config|\n  config.reuse_server = true\n  config.start_vim { Vimrunner.start }\n  config\nend\n</code></pre>\n"}], "owner": {"reputation": 4639, "user_id": 3986708, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/g0JCF.jpg?s=128&g=1", "display_name": "hgiesel", "link": "https://stackoverflow.com/users/3986708/hgiesel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 122, "favorite_count": 0, "accepted_answer_id": 38362876, "answer_count": 1, "score": 0, "last_activity_date": 1468450242, "creation_date": 1468448171, "last_edit_date": 1468449724, "question_id": 38362616, "link": "https://stackoverflow.com/questions/38362616/variable-assignment-takes-place-in-a-block-in-a-block", "title": "Variable assignment takes place in a block in a block", "body": "<p>I first had this code, but it wasn't working:</p>\n\n<pre><code>VIM = Vimrunner::RSpec.configure do |config|\n  config.reuse_server = true\n\n  config.start_vim do\n    vim = Vimrunner.start\n    vim\n  end\nend\n</code></pre>\n\n<p>The <code>configure</code> is just a method that does the settings for a <a href=\"https://github.com/AndrewRadev/vimrunner\" rel=\"nofollow\">Vimrunner</a> server. The <code>start_vim</code> method just depicts, what is supposed to be executed to start <code>vim</code>. However that doesn't really matter.</p>\n\n<p>What was actually correct was:</p>\n\n<pre><code>Vimrunner::RSpec.configure do |config|\n  config.reuse_server = true\n\n  config.start_vim do\n    VIM = Vimrunner.start\n    VIM\n  end\nend\n</code></pre>\n\n<p>I don't quite understand this. In the first case I actually assigned a Proc to the <code>VIM</code> constant, as I found out through <code>irb</code>, whereas in the second case, the <code>VIM</code> constant was correctly assigned.</p>\n\n<p>So it seems, I assigned the VIM constant (which lies in the global namespace) through the use of these blocks, and that's where my understanding fails me:</p>\n\n<p>How I can I assign a variable in a block in a block and let that assignment be <em>hurled</em> back to global namespace?</p>\n\n<p><a href=\"https://github.com/AndrewRadev/vimrunner/blob/master/lib/vimrunner/rspec.rb\" rel=\"nofollow\">How does that work</a>? For example I tried this code:</p>\n\n<pre><code>def foo\n    yield\nend\n\nfoo do\n    a = 'Hello World!'\n    a\nend\n\nputs a\n</code></pre>\n\n<p>Which will show me an error. How can I have variables inside ruby blocks be put into the caller's scope?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "rake", "bundler", "rbenv"], "comments": [{"owner": {"reputation": 45754, "user_id": 17410, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1022b779bdc1ddef7cd9d29abd70ed15?s=128&d=identicon&r=PG", "display_name": "zetetic", "link": "https://stackoverflow.com/users/17410/zetetic"}, "edited": false, "score": 4, "creation_date": 1468447113, "post_id": 38362360, "comment_id": 64137152, "body": "Did you try <code>bundle install</code>?"}, {"owner": {"reputation": 742, "user_id": 601555, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b70354d05caf6bdf7e7953713c1cd4?s=128&d=identicon&r=PG", "display_name": "Ilija Eftimov", "link": "https://stackoverflow.com/users/601555/ilija-eftimov"}, "edited": false, "score": 0, "creation_date": 1468449745, "post_id": 38362360, "comment_id": 64138101, "body": "Can you paste the output of <code>which rbenv</code> here?"}, {"owner": {"reputation": 249, "user_id": 4677311, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/4f7a49b82042ffd7aaf0dea7e105e401?s=128&d=identicon&r=PG&f=1", "display_name": "charlottesville", "link": "https://stackoverflow.com/users/4677311/charlottesville"}, "edited": false, "score": 0, "creation_date": 1468521601, "post_id": 38362360, "comment_id": 64173452, "body": "Yes, of course I&#39;ve run &quot;bundle install&quot;. Many times."}, {"owner": {"reputation": 249, "user_id": 4677311, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/4f7a49b82042ffd7aaf0dea7e105e401?s=128&d=identicon&r=PG&f=1", "display_name": "charlottesville", "link": "https://stackoverflow.com/users/4677311/charlottesville"}, "edited": false, "score": 0, "creation_date": 1468521655, "post_id": 38362360, "comment_id": 64173489, "body": "lle Eftimov -- the output of &quot;which rbenv&quot; is: /usr/local/bin/rbenv"}, {"owner": {"reputation": 249, "user_id": 4677311, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/4f7a49b82042ffd7aaf0dea7e105e401?s=128&d=identicon&r=PG&f=1", "display_name": "charlottesville", "link": "https://stackoverflow.com/users/4677311/charlottesville"}, "edited": false, "score": 0, "creation_date": 1469052291, "post_id": 38362360, "comment_id": 64384720, "body": "Deleting .bash_profile and .bashrc and .zshrc and reinstalling ruby and rails and rbenv -- this seemed to help slightly. I&#39;ve got a different error now."}, {"owner": {"reputation": 7565, "user_id": 1021515, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/Z9QcP.jpg?s=128&g=1", "display_name": "mwp", "link": "https://stackoverflow.com/users/1021515/mwp"}, "edited": false, "score": 0, "creation_date": 1472598107, "post_id": 38362360, "comment_id": 65813835, "body": "@charlottesville Are you deploying or trying to get up and running in development?"}], "answers": [{"comments": [{"owner": {"reputation": 881, "user_id": 3010879, "user_type": "registered", "accept_rate": 69, "profile_image": "https://graph.facebook.com/100000951369051/picture?type=large", "display_name": "medik", "link": "https://stackoverflow.com/users/3010879/medik"}, "edited": false, "score": 1, "creation_date": 1500371452, "post_id": 39238321, "comment_id": 77294538, "body": "You should never run <code>gem</code> with <code>sudo</code>, it messes up permissions and will bite you in the future. More: <a href=\"https://stackoverflow.com/questions/2119064/sudo-gem-install-or-gem-install-and-gem-locations\" title=\"sudo gem install or gem install and gem locations\">stackoverflow.com/questions/2119064/&hellip;</a>"}], "tags": [], "owner": {"reputation": 5, "user_id": 6750218, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3820e162838404743b1af023eb5aa4d7?s=128&d=identicon&r=PG&f=1", "display_name": "hihebark", "link": "https://stackoverflow.com/users/6750218/hihebark"}, "is_accepted": false, "score": -2, "last_activity_date": 1524098078, "last_edit_date": 1524098078, "creation_date": 1472597916, "answer_id": 39238321, "question_id": 38362360, "link": "https://stackoverflow.com/questions/38362360/why-doesnt-bundle-exec-see-that-i-have-rake-installed/39238321#39238321", "title": "Why doesn&#39;t &quot;bundle exec&quot; see that I have rake installed?", "body": "<p>You <em>could</em> try to run install command as <em><code>sudo</code></em> and specify <code>rake</code>'s version like this:</p>\n\n<pre class=\"lang-bash prettyprint-override\"><code>sudo gem install rake -v '11.2.2'\n</code></pre>\n"}], "owner": {"reputation": 249, "user_id": 4677311, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/4f7a49b82042ffd7aaf0dea7e105e401?s=128&d=identicon&r=PG&f=1", "display_name": "charlottesville", "link": "https://stackoverflow.com/users/4677311/charlottesville"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 3443, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1524098078, "creation_date": 1468446907, "last_edit_date": 1524097953, "question_id": 38362360, "link": "https://stackoverflow.com/questions/38362360/why-doesnt-bundle-exec-see-that-i-have-rake-installed", "title": "Why doesn&#39;t &quot;bundle exec&quot; see that I have rake installed?", "body": "<p>I've been reading StackOverflow and trying to deal with this error for 2 hours now: </p>\n\n<pre class=\"lang-bash prettyprint-override\"><code>bundle exec rake db:setup\nCould not find rake-10.4.2 in any of the sources\nRun `bundle install` to install missing gems.\n</code></pre>\n\n<p>I followed the advice here, to no avail:</p>\n\n<p><a href=\"https://stackoverflow.com/questions/27879119/rails-s-could-not-find-rake-10-4-2-in-any-of-the-sources-bundlergemnotfound\">rails s: Could not find rake-10.4.2 in any of the sources (Bundler::GemNotFound)</a></p>\n\n<p>also:</p>\n\n<p><a href=\"https://stackoverflow.com/questions/18978002/could-not-find-rake-with-bundle-exec\">Could not find rake with bundle exec</a></p>\n\n<p>So I did: </p>\n\n<pre class=\"lang-bash prettyprint-override\"><code>gem uninstall rake\ngem install rake\n</code></pre>\n\n<p>And, following the other StackOverflow articles I read, I tried: </p>\n\n<pre class=\"lang-bash prettyprint-override\"><code>rbenv install 2.3.1                   \nDownloading ruby-2.3.1.tar.bz2...\n-&gt; https://cache.ruby-lang.org/pub/ruby/2.3/ruby-2.3.1.tar.bz2\nInstalling ruby-2.3.1...\nInstalled ruby-2.3.1 to /Users/lkrubner/.rbenv/versions/2.3.1\n\nrbenv global 2.3.1\nruby -v\nruby 2.0.0p645 (2015-04-13 revision 50299) [universal.x86_64-darwin15]\n\nbundle exec rake db:setup\nCould not find rake-10.4.2 in any of the sources\nRun `bundle install` to install missing gems.\n\nrbenv rehash\nrbenv uninstall rake\nrbenv: version `rake' not installed\n</code></pre>\n\n<p>At the command line, if I look for versions, I see: </p>\n\n<pre class=\"lang-bash prettyprint-override\"><code>rake -V\nrake, version 11.2.2\n\nrails -v\nRails 4.2.0\n\nruby -v\nruby 2.0.0p645 (2015-04-13 revision 50299) [universal.x86_64-darwin15]\n</code></pre>\n\n<p>but I still get this error:</p>\n\n<pre class=\"lang-bash prettyprint-override\"><code>bundle exec rake db:setup   \nCould not find rake-10.4.2 in any of the sources\nRun `bundle install` to install missing gems.\n</code></pre>\n\n<p>What would fix this? </p>\n\n<h2>Update 1</h2>\n\n<p>This is even more confusing:</p>\n\n<pre class=\"lang-bash prettyprint-override\"><code>bundle update rake\n\nFetching gem metadata from https://rubygems.org/.............\nFetching version metadata from https://rubygems.org/...\nFetching dependency metadata from https://rubygems.org/..\nResolving dependencies...\nInstalling rake 11.2.2 (was 10.4.2)\nUsing i18n 0.7.0\nUsing json 1.8.3\nUsing minitest 5.8.3\nUsing thread_safe 0.3.5\nUsing tzinfo 1.2.2\nUsing activesupport 4.2.0\nUsing builder 3.2.2\nUsing erubis 2.7.0\nUsing mini_portile 0.6.2\nUsing nokogiri 1.6.6.4\nUsing rails-deprecated_sanitizer 1.0.3\nUsing rails-dom-testing 1.0.7\nUsing loofah 2.0.3\nUsing rails-html-sanitizer 1.0.2\nUsing actionview 4.2.0\nUsing rack 1.6.4\nUsing rack-test 0.6.3\nUsing actionpack 4.2.0\nUsing globalid 0.3.6\nUsing activejob 4.2.0\nUsing mime-types 2.99\nUsing mail 2.6.3\nUsing actionmailer 4.2.0\nUsing activemodel 4.2.0\nUsing arel 6.0.3\nUsing activerecord 4.2.0\nUsing addressable 2.3.8\nUsing multi_xml 0.5.5\nUsing httparty 0.13.7\nUsing uuidtools 2.1.5\nUsing aws-sdk 1.3.9\nUsing bcrypt 3.1.10\nUsing debug_inspector 0.0.2\nUsing binding_of_caller 0.7.2\nUsing bson 3.2.6\nUsing bson_ext 1.5.1\nUsing bundler 1.8.5\nUsing byebug 8.2.1\nUsing xpath 2.0.0\nUsing capybara 2.5.0\nUsing ffi 1.9.10\nUsing childprocess 0.5.8\nUsing climate_control 0.0.3\nUsing cocaine 0.5.8\nUsing coderay 1.1.0\nUsing coffee-script-source 1.10.0\nUsing execjs 2.6.0\nUsing coffee-script 2.4.1\nUsing thor 0.19.1\nUsing railties 4.2.0\nUsing coffee-rails 4.1.0\nUsing database_cleaner 1.5.1\nUsing orm_adapter 0.5.0\nUsing responders 2.1.0\nUsing warden 1.2.3\nUsing devise 3.5.2\nUsing diff-lcs 1.2.5\nUsing dotenv 2.1.0\nUsing dotenv-rails 2.1.0\nUsing factory_girl 4.5.0\nUsing factory_girl_rails 4.5.0\nUsing faker 1.4.3\nUsing multipart-post 2.0.0\nUsing faraday 0.9.2\nUsing sass 3.4.19\nUsing foundation-rails 5.5.3.2\nUsing geocoder 1.2.9\nUsing httpclient 2.6.0.1\nUsing icalendar 2.3.0\nUsing multi_json 1.11.2\nUsing jbuilder 2.3.2\nUsing jquery-rails 4.0.5\nUsing jwt 1.5.2\nUsing kgio 2.9.3\nUsing method_source 0.8.2\nUsing mimemagic 0.3.0\nUsing mongo 2.1.2\nUsing origin 2.1.1\nUsing mongoid 5.0.1\nUsing paperclip 4.3.2\nUsing mongoid-paperclip 0.0.10\nUsing oauth2 1.0.0\nUsing slop 3.6.0\nUsing pry 0.10.1\nUsing pry-rails 0.3.4\nUsing quiet_assets 1.1.0\nUsing sprockets 3.4.1\nUsing sprockets-rails 2.3.3\nUsing rails 4.2.0\nUsing rails_serve_static_assets 0.0.4\nUsing rails_stdout_logging 0.0.3\nUsing rails_12factor 0.0.3\nUsing raindrops 0.15.0\nUsing rdoc 4.2.0\nUsing rspec-support 3.3.0\nUsing rspec-core 3.3.1\nUsing rspec-expectations 3.3.0\nUsing rspec-mocks 3.3.1\nUsing rspec-rails 3.3.2\nUsing rspec_junit_formatter 0.2.2\nUsing rubyzip 1.1.7\nUsing tilt 2.0.1\nUsing sass-rails 5.0.4\nUsing sdoc 0.4.1\nUsing websocket 1.2.2\nUsing selenium-webdriver 2.48.1\nUsing shoulda-matchers 2.8.0\nUsing signet 0.7.2\nUsing simple_form 3.2.0\nUsing spring 1.4.4\nUsing timezone 0.5.0\nUsing turbolinks 2.5.3\nUsing uglifier 2.7.2\nUsing unicorn 4.9.0\nUsing web-console 2.2.1\nUpdating files in vendor/cache\n  * rake-11.2.2.gem\nRemoving outdated .gem files from vendor/cache\n  * rake-10.4.2.gem\nBundle updated!\n bundle exec rake db:setup\nCould not find rake-11.2.2 in any of the sources\nRun `bundle install` to install missing gems.\n bundle update rake    \n</code></pre>\n\n<p>So one line says that rake is installed, and the next line says that it is not installed, and both lines are nominally being managed by Bundler, so in theory this can not be a cache problem.</p>\n\n<h2>Update 2</h2>\n\n<p>I added this to the Gem file: </p>\n\n<pre class=\"lang-bash prettyprint-override\"><code>gem 'rake', '10.5.0'\n</code></pre>\n\n<p>And then ran </p>\n\n<pre class=\"lang-bash prettyprint-override\"><code>bundle install\n</code></pre>\n\n<p>which gives me: </p>\n\n<pre class=\"lang-bash prettyprint-override\"><code>Updating files in vendor/cache\nBundle complete! 40 Gemfile dependencies, 116 gems now installed.\nBundled gems are installed into ./vendor/cache.\n</code></pre>\n\n<p>So then I try:</p>\n\n<pre class=\"lang-bash prettyprint-override\"><code>bundle exec rake db:setup  \n</code></pre>\n\n<p>and I get: </p>\n\n<pre><code>Could not find rake-10.5.0 in any of the sources\nRun `bundle install` to install missing gems.\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 9030, "user_id": 5101476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JCQrl.jpg?s=128&g=1", "display_name": "ice\u30c4", "link": "https://stackoverflow.com/users/5101476/ice%e3%83%84"}, "edited": false, "score": 0, "creation_date": 1468447906, "post_id": 38362273, "comment_id": 64137446, "body": "probably best not to call your array <code>h</code> since this is usually reserved for hashes."}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 2, "creation_date": 1468448426, "post_id": 38362273, "comment_id": 64137661, "body": "We&#39;d like to see your effort toward solving the problem. Without that it looks like you want us to write your code. Please read &quot;<a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a>&quot; including the linked pages, and &quot;<a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>&quot;."}], "answers": [{"tags": [], "owner": {"reputation": 2450, "user_id": 1114667, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/c855f4e65f04cfbbe403fdb18e32fdfd?s=128&d=identicon&r=PG", "display_name": "Ilya Lavrov", "link": "https://stackoverflow.com/users/1114667/ilya-lavrov"}, "is_accepted": true, "score": 10, "last_activity_date": 1469214806, "last_edit_date": 1495541286, "creation_date": 1468446881, "answer_id": 38362351, "question_id": 38362273, "link": "https://stackoverflow.com/questions/38362273/sort-array-of-hash-by-key-return-descending-order-in-ruby/38362351#38362351", "title": "Sort array of hash by key, return descending order in Ruby", "body": "<p>You can do </p>\n\n<pre><code>h.sort_by! { |k| -k[:bookings_nd] }\n</code></pre>\n\n<p>or </p>\n\n<pre><code>h.sort_by! { |k| k[:bookings_nd] }.reverse!\n</code></pre>\n\n<p>Also i guess this question is duplicate for <a href=\"https://stackoverflow.com/questions/2642182/sorting-an-array-in-descending-order-in-ruby\">Sorting an array in descending order in Ruby</a></p>\n"}], "owner": {"reputation": 129, "user_id": 6586613, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7rqbx.jpg?s=128&g=1", "display_name": "Hugo Barthelemy", "link": "https://stackoverflow.com/users/6586613/hugo-barthelemy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3684, "favorite_count": 1, "closed_date": 1468474184, "accepted_answer_id": 38362351, "answer_count": 1, "score": 0, "last_activity_date": 1498706491, "creation_date": 1468446497, "last_edit_date": 1498706491, "question_id": 38362273, "link": "https://stackoverflow.com/questions/38362273/sort-array-of-hash-by-key-return-descending-order-in-ruby", "closed_reason": "Needs details or clarity", "title": "Sort array of hash by key, return descending order in Ruby", "body": "<p>My input hash: </p>\n\n<pre><code>h = [\n  {user_id: 1, bookings_nd: 3}, \n  {user_id: 2, bookings_nd: 10}, \n  {user_id: 3, bookings_nd: 2}\n]\n</code></pre>\n\n<p>I need: </p>\n\n<pre><code>h = [\n  {user_id: 2, bookings_nd: 10}, \n  {user_id: 1, bookings_nd: 3},\n  {user_id: 3, bookings_nd: 2}\n]\n</code></pre>\n\n<p>How to do it?</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 91121, "user_id": 179125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5594142dcc49a24b1902ec8059181f8d?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan Running", "link": "https://stackoverflow.com/users/179125/jordan-running"}, "edited": false, "score": 1, "creation_date": 1468443034, "post_id": 38361222, "comment_id": 64135300, "body": "To understand why the above doesn&#39;t work, consider the fact that the expression <code>:p1.to_s</code> returns the string <code>&quot;p1&quot;</code>. The expression <code>:p1.address</code> will raise a NoMethodError (which, by the way, you should have included in your question) because <code>:p1</code> is a Symbol, and Symbols do not respond to a method named <code>address</code>. As Simone illustrates below, a Symbol with special characters (or spaces) in it must be enclosed in quotation marks, i.e. <code>:&quot;p1.address&quot;</code> or <code>:&#39;p1.address&#39;</code>."}], "answers": [{"tags": [], "owner": {"reputation": 163714, "user_id": 123527, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/99e0b39c091e10d9c7d4452a34ca52dc?s=128&d=identicon&r=PG", "display_name": "Simone Carletti", "link": "https://stackoverflow.com/users/123527/simone-carletti"}, "is_accepted": false, "score": 3, "last_activity_date": 1468442364, "creation_date": 1468442364, "answer_id": 38361282, "question_id": 38361222, "link": "https://stackoverflow.com/questions/38361222/changing-column-titles-with-a-period/38361282#38361282", "title": "Changing column titles with a &quot;.&quot; period", "body": "<p>You can also use a string:</p>\n\n<pre><code>t.rename \"p1.address\", \"p1_address\"\n</code></pre>\n\n<p>The following syntax is also valid:</p>\n\n<pre><code>t.rename :\"p1.address\", :\"p1_address\"\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 6586426, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/uyNfy.jpg?s=128&g=1", "display_name": "ooa2121", "link": "https://stackoverflow.com/users/6586426/ooa2121"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 26, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1468442364, "creation_date": 1468442059, "question_id": 38361222, "link": "https://stackoverflow.com/questions/38361222/changing-column-titles-with-a-period", "title": "Changing column titles with a &quot;.&quot; period", "body": "<p>I imported data into Rails using a .sql file, to discover that most of the column titles have a period \".\" in them. This is clearly an issue and after attempting to run a migration that changes the column names, the period is still throwing it off. Any workarounds to speak of?</p>\n\n<pre><code>class FixColumnNames &lt; ActiveRecord::Migration\n     def change\n          change_table :my_table do |t|\n               t.rename :p1.address, :'p1_address'\n          end\n     end\nend\n</code></pre>\n"}, {"tags": ["ruby", "ruby-on-rails-4", "paperclip"], "comments": [{"owner": {"reputation": 1827, "user_id": 1362329, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QRckP.jpg?s=128&g=1", "display_name": "neydroid", "link": "https://stackoverflow.com/users/1362329/neydroid"}, "edited": false, "score": 0, "creation_date": 1468443584, "post_id": 38360836, "comment_id": 64135565, "body": "do you need to update the records? because you have the option to override the classname that paperclip uses to save and you don&#39;t have to change your data"}, {"owner": {"reputation": 6132, "user_id": 894209, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/37aeb9f5242f93cec35e98e464ed7424?s=128&d=identicon&r=PG", "display_name": "Itay Grudev", "link": "https://stackoverflow.com/users/894209/itay-grudev"}, "reply_to_user": {"reputation": 1827, "user_id": 1362329, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QRckP.jpg?s=128&g=1", "display_name": "neydroid", "link": "https://stackoverflow.com/users/1362329/neydroid"}, "edited": false, "score": 0, "creation_date": 1468444120, "post_id": 38360836, "comment_id": 64135805, "body": "I need to rename them and use the name for another model."}], "answers": [{"comments": [{"owner": {"reputation": 6132, "user_id": 894209, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/37aeb9f5242f93cec35e98e464ed7424?s=128&d=identicon&r=PG", "display_name": "Itay Grudev", "link": "https://stackoverflow.com/users/894209/itay-grudev"}, "edited": false, "score": 0, "creation_date": 1468520782, "post_id": 38361917, "comment_id": 64172957, "body": "<code>attachment_file_name</code> only contains the filename not the actual path."}], "tags": [], "owner": {"reputation": 1827, "user_id": 1362329, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QRckP.jpg?s=128&g=1", "display_name": "neydroid", "link": "https://stackoverflow.com/users/1362329/neydroid"}, "is_accepted": false, "score": 0, "last_activity_date": 1468603755, "last_edit_date": 1468603755, "creation_date": 1468444946, "answer_id": 38361917, "question_id": 38360836, "link": "https://stackoverflow.com/questions/38360836/updating-paperclip-filename-after-renaming-model/38361917#38361917", "title": "Updating paperclip filename after renaming model?", "body": "<p>You'll have to pass to the method, the option for the new <code>url</code>:</p>\n\n<p>This are the defaults that PaperClip uses:</p>\n\n<p><a href=\"https://github.com/thoughtbot/paperclip/blob/95acf3b898bd782f4429d42fd2d8812505390328/lib/paperclip/attachment.rb#L24\" rel=\"nofollow\">https://github.com/thoughtbot/paperclip/blob/95acf3b898bd782f4429d42fd2d8812505390328/lib/paperclip/attachment.rb#L24</a></p>\n\n<pre><code>{\n  path: ':rails_root/public:url',\n  url: '/system/:class/:attachment/:id_partition/:style/:filename'\n}\n</code></pre>\n\n<p>You'll have to override the behaviour and change <code>:class</code> to your new model name, the path is determined dynamically trough the url:</p>\n\n<pre><code>class User &lt; ActiveRecord::Base\n  has_attached_file :avatar, url: '/system/:class/:attachment/:id_partition/:style/:filename' \nend\n</code></pre>\n\n<p>You'll have to be careful in using the old model name in other model, unless you override also the other model <code>url</code> option.</p>\n"}], "owner": {"reputation": 6132, "user_id": 894209, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/37aeb9f5242f93cec35e98e464ed7424?s=128&d=identicon&r=PG", "display_name": "Itay Grudev", "link": "https://stackoverflow.com/users/894209/itay-grudev"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 242, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1468603755, "creation_date": 1468440536, "question_id": 38360836, "link": "https://stackoverflow.com/questions/38360836/updating-paperclip-filename-after-renaming-model", "title": "Updating paperclip filename after renaming model?", "body": "<p>How do I update the filenames of all paperclip objects after I rename a model and update the table name?</p>\n\n<p>Paperclip stores them in a path that contains the model name. I am looking for an automatic way probably in a migration that would update the file paths.</p>\n"}, {"tags": ["sql", "ruby", "sinatra", "sequel"], "answers": [{"comments": [{"owner": {"reputation": 283, "user_id": 5962592, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/09e937e3c5361ac06e5c17d9f0a133db?s=128&d=identicon&r=PG&f=1", "display_name": "Jes", "link": "https://stackoverflow.com/users/5962592/jes"}, "edited": false, "score": 0, "creation_date": 1468509774, "post_id": 38377263, "comment_id": 64166366, "body": "thank you, I was under impression it should work as it was presented in Sequel documentation. Is there any way to gain the same result without limit?"}, {"owner": {"reputation": 11331, "user_id": 132053, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f183bcc4176b308c9edabe79299e448f?s=128&d=identicon&r=PG", "display_name": "Jeremy Evans", "link": "https://stackoverflow.com/users/132053/jeremy-evans"}, "reply_to_user": {"reputation": 283, "user_id": 5962592, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/09e937e3c5361ac06e5c17d9f0a133db?s=128&d=identicon&r=PG&f=1", "display_name": "Jes", "link": "https://stackoverflow.com/users/5962592/jes"}, "edited": false, "score": 0, "creation_date": 1468533562, "post_id": 38377263, "comment_id": 64179700, "body": "Where in the Sequel documentation does it state that limit.delete should work?  In terms of the same result, using a subselect should work: <code>Product.where(:id=&gt;Product.where(:name=&gt;&#39;Book&#39;).limit(10).se&zwnj;&#8203;lect(:id)).delete</code>"}], "tags": [], "owner": {"reputation": 11331, "user_id": 132053, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f183bcc4176b308c9edabe79299e448f?s=128&d=identicon&r=PG", "display_name": "Jeremy Evans", "link": "https://stackoverflow.com/users/132053/jeremy-evans"}, "is_accepted": false, "score": 0, "last_activity_date": 1468547251, "last_edit_date": 1468547251, "creation_date": 1468507448, "answer_id": 38377263, "question_id": 38360484, "link": "https://stackoverflow.com/questions/38360484/sequel-ignoring-limit/38377263#38377263", "title": "Sequel ignoring limit", "body": "<p>There are very few databases that support <code>DELETE LIMIT</code> (I think MySQL is the only one).</p>\n\n<p>Sequel's default behavior is to ignore the limit setting during <code>DELETE</code>.  On MySQL, it considers it as a database-specific extension.</p>\n"}], "owner": {"reputation": 283, "user_id": 5962592, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/09e937e3c5361ac06e5c17d9f0a133db?s=128&d=identicon&r=PG&f=1", "display_name": "Jes", "link": "https://stackoverflow.com/users/5962592/jes"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 52, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1581279521, "creation_date": 1468439345, "last_edit_date": 1581279521, "question_id": 38360484, "link": "https://stackoverflow.com/questions/38360484/sequel-ignoring-limit", "title": "Sequel ignoring limit", "body": "<p>I use Sequel and Sinatra with Sequel. Sequel properly inserts records, but I'm struggling with deleting. When I use:</p>\n\n<pre><code>Product.where(:name=&gt;\"Book\").limit(10).delete \n</code></pre>\n\n<p>it deletes absolutely every record which fulfills condition. It seems to completely ignore limit. Do you have any idea what the reason can be? </p>\n"}, {"tags": ["ruby-on-rails", "ruby", "heroku", "kaminari"], "comments": [{"owner": {"reputation": 975, "user_id": 3753960, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/1715117417/picture?type=large", "display_name": "Okomikeruko", "link": "https://stackoverflow.com/users/3753960/okomikeruko"}, "edited": false, "score": 1, "creation_date": 1468437752, "post_id": 38360000, "comment_id": 64132580, "body": "The error seems unable to find &quot;silence&quot; method for a class called <code>Logger</code>. Does your code have a <code>Logger</code> class or is that on Heroku&#39;s end?"}, {"owner": {"reputation": 5714, "user_id": 2389501, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/23f6a708c04c660111117c4613592689?s=128&d=identicon&r=PG", "display_name": "Mateusz Urba\u0144ski", "link": "https://stackoverflow.com/users/2389501/mateusz-urba%c5%84ski"}, "reply_to_user": {"reputation": 975, "user_id": 3753960, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/1715117417/picture?type=large", "display_name": "Okomikeruko", "link": "https://stackoverflow.com/users/3753960/okomikeruko"}, "edited": false, "score": 0, "creation_date": 1468437875, "post_id": 38360000, "comment_id": 64132626, "body": "No, my class does not have logger class. In production.rb I have also:    if ENV[&#39;RAILS_LOG_TO_STDOUT&#39;].present?     config.logger = ActiveSupport::TaggedLogging.new(Logger.new(STDOUT))   end  config.log_formatter = ::Logger::Formatter.new"}, {"owner": {"reputation": 4457, "user_id": 4856698, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-YF1b0zyYypU/AAAAAAAAAAI/AAAAAAAAAB0/6hdTAeg_61s/photo.jpg?sz=128", "display_name": "NickGnd", "link": "https://stackoverflow.com/users/4856698/nickgnd"}, "edited": false, "score": 1, "creation_date": 1468441019, "post_id": 38360000, "comment_id": 64134268, "body": "Do you have seen <a href=\"https://github.com/rails/rails/issues/20492\" rel=\"nofollow noreferrer\">this</a> issue on github? <code>silence</code> method of <code>::Logger</code> class was deprecated since Rails4.2 and it was removed from Rails5."}], "answers": [{"tags": [], "owner": {"reputation": 4457, "user_id": 4856698, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-YF1b0zyYypU/AAAAAAAAAAI/AAAAAAAAAB0/6hdTAeg_61s/photo.jpg?sz=128", "display_name": "NickGnd", "link": "https://stackoverflow.com/users/4856698/nickgnd"}, "is_accepted": true, "score": 8, "last_activity_date": 1468442611, "last_edit_date": 1468442611, "creation_date": 1468441735, "answer_id": 38361137, "question_id": 38360000, "link": "https://stackoverflow.com/questions/38360000/actionviewtemplateerror-undefined-method-silence-for/38361137#38361137", "title": "ActionView::Template::Error (undefined method `silence&#39; for)", "body": "<p>In Rails5 <code>silence</code> method was removed from the <code>::Logger</code> base class (see this <a href=\"https://github.com/rails/rails/issues/20492\" rel=\"noreferrer\">issue</a>)</p>\n\n<p>So instead to pass a <code>::Logger</code> instance, try to pass an <code>ActiveSupport::Logger</code> instance which expose the <code>silence</code> method (see <a href=\"http://api.rubyonrails.org/classes/LoggerSilence.html#method-i-silence\" rel=\"noreferrer\">documentation</a>), like this:</p>\n\n<p><code>config.logger = ActiveSupport::TaggedLogging.new(ActiveSupport::Logger.new(STDOUT))</code></p>\n\n<p>note: \n<code>ActiveSupport::Logger</code> inherit from the <code>::Logger</code> base class and include <code>LoggerSilence</code> module (see <a href=\"http://api.rubyonrails.org/classes/ActiveSupport/Logger.html\" rel=\"noreferrer\">documentation</a>)</p>\n\n<p>An example from my <code>rails</code> console (rails5 and ruby2.3.0)</p>\n\n<pre><code>logger = ActiveSupport::TaggedLogging.new(Logger.new(STDOUT))\n =&gt; #&lt;Logger:0x007f890b8a3d10 @progname=nil, @level=0, @default_formatter=#&lt;Logger::Formatter:0x007f890b8a2cd0 @datetime_format=nil&gt;, @formatter=#&lt;ActiveSupport::Logger::SimpleFormatter:0x007f890b8a26e0 @datetime_format=nil&gt;, @logdev=#&lt;Logger::LogDevice:0x007f890b8a2870 @shift_size=nil, @shift_age=nil, @filename=nil, @dev=#&lt;IO:&lt;STDOUT&gt;&gt;, @mon_owner=nil, @mon_count=0, @mon_mutex=#&lt;Thread::Mutex:0x007f890b8a2730&gt;&gt;&gt; \nlogger.silence\nNoMethodError: undefined method `silence' for #&lt;Logger:0x007f890b8a3d10&gt;\n# ...\n\nlogger = ActiveSupport::TaggedLogging.new(ActiveSupport::Logger.new(STDOUT))\n =&gt; #&lt;ActiveSupport::Logger:0x007f890bd2a028 @progname=nil, @level=0, @default_formatter=#&lt;Logger::Formatter:0x007f890bd29fb0 @datetime_format=nil&gt;, @formatter=#&lt;ActiveSupport::Logger::SimpleFormatter:0x007f890bd29f10 @datetime_format=nil&gt;, @logdev=#&lt;Logger::LogDevice:0x007f890bd29f60 @shift_size=nil, @shift_age=nil, @filename=nil, @dev=#&lt;IO:&lt;STDOUT&gt;&gt;, @mon_owner=nil, @mon_count=0, @mon_mutex=#&lt;Thread::Mutex:0x007f890bd29f38&gt;&gt;, @local_levels=#&lt;Concurrent::Map:0x007f890bd29ec0 entries=0 default_proc=nil&gt;&gt; \nlogger.silence\nLocalJumpError: no block given (yield)\n# The method exists, but I don't pass any block\n</code></pre>\n"}], "owner": {"reputation": 5714, "user_id": 2389501, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/23f6a708c04c660111117c4613592689?s=128&d=identicon&r=PG", "display_name": "Mateusz Urba\u0144ski", "link": "https://stackoverflow.com/users/2389501/mateusz-urba%c5%84ski"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1501, "favorite_count": 1, "accepted_answer_id": 38361137, "answer_count": 1, "score": 6, "last_activity_date": 1468442611, "creation_date": 1468437546, "last_edit_date": 1468437914, "question_id": 38360000, "link": "https://stackoverflow.com/questions/38360000/actionviewtemplateerror-undefined-method-silence-for", "title": "ActionView::Template::Error (undefined method `silence&#39; for)", "body": "<p>I have very strange problem on heroku. I have view that looks like this:</p>\n\n<pre><code>= content_for :header_title do\n  = t('.header_title')\n\n- if @appointments.exists?\n  %table.table.table-striped.table-bordered.table-hover\n    %thead\n      %tr\n        %th= t('.id')\n        %th= t('.athena_health_id')\n        %th= t('.start_time')\n        %th= t('.duration')\n        %th= t('.provider')\n        %th= t('.created_at')\n        %th= t('.updated_at')\n    %tbody\n      = render @appointments\n\n  = paginate @appointments\n- else\n  %h3.text-center= t('.appointments_not_found')\n%hr/\n</code></pre>\n\n<p>Nothing special. When I visit page that is using this template on heroku i receive:</p>\n\n<pre><code> ActionView::Template::Error (undefined method `silence' for #&lt;Logger:0x007f7a86267a70&gt;):\n</code></pre>\n\n<p>Spec are passing. On my local everything is working fine. I don't know what is going on. Stacktrace is showing that the problem is following line:</p>\n\n<pre><code>= paginate @appointments\n</code></pre>\n\n<p>I'm using Rails 5.0 and kaminari (1.0.0.alpha). Any ideas?</p>\n\n<p>Edit:\nIn my production.rb I have:</p>\n\n<pre><code>  if ENV['RAILS_LOG_TO_STDOUT'].present?\n    config.logger = ActiveSupport::TaggedLogging.new(Logger.new(STDOUT))\n  end\n\nconfig.log_formatter = ::Logger::Formatter.new\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4", "wisper"], "comments": [{"owner": {"reputation": 41846, "user_id": 926143, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/3396173c3d22988be1a0732d184902aa?s=128&d=identicon&r=PG", "display_name": "7stud", "link": "https://stackoverflow.com/users/926143/7stud"}, "edited": false, "score": 0, "creation_date": 1468441350, "post_id": 38359795, "comment_id": 64134431, "body": "Post your Gemfile.  Post test_helper.rb"}, {"owner": {"reputation": 4339, "user_id": 1338339, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/L1igS.jpg?s=128&g=1", "display_name": "lllllll", "link": "https://stackoverflow.com/users/1338339/lllllll"}, "reply_to_user": {"reputation": 41846, "user_id": 926143, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/3396173c3d22988be1a0732d184902aa?s=128&d=identicon&r=PG", "display_name": "7stud", "link": "https://stackoverflow.com/users/926143/7stud"}, "edited": false, "score": 0, "creation_date": 1468442265, "post_id": 38359795, "comment_id": 64134932, "body": "@7stud you&#39;re right, done!"}, {"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1468443052, "post_id": 38359795, "comment_id": 64135308, "body": "It&#39;s helpful to future readers to post an answer, rather than leaving the question unresolved"}, {"owner": {"reputation": 16672, "user_id": 22237, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/hkobD.png?s=128&g=1", "display_name": "Kris", "link": "https://stackoverflow.com/users/22237/kris"}, "edited": false, "score": 0, "creation_date": 1468507707, "post_id": 38359795, "comment_id": 64164772, "body": "I&#39;d put <code>raise</code> in the <code>after_save</code> to make sure it is actually being called in the test."}, {"owner": {"reputation": 16672, "user_id": 22237, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/hkobD.png?s=128&g=1", "display_name": "Kris", "link": "https://stackoverflow.com/users/22237/kris"}, "edited": false, "score": 1, "creation_date": 1468508050, "post_id": 38359795, "comment_id": 64165022, "body": "You can also check if <code>Transaction</code> is including the Wisper module with <code>Transaction.ancestors.include?(Wisper::Publisher)</code>."}, {"owner": {"reputation": 4339, "user_id": 1338339, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/L1igS.jpg?s=128&g=1", "display_name": "lllllll", "link": "https://stackoverflow.com/users/1338339/lllllll"}, "edited": false, "score": 0, "creation_date": 1468516171, "post_id": 38359795, "comment_id": 64170341, "body": "t@Kris It is being called for sure, since I set some debugger breakpoint there. <code>Transaction.ancestors</code> does indeed contain <code>Wisper::Publisher</code>! I wonder whether <i>all</i> helpers in the <code>app&#47;helpers</code> folders are added to the test-suite? That would explain it since some helper modules include <code>Wisper::Publisher</code>. Thanks!"}, {"owner": {"reputation": 16672, "user_id": 22237, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/hkobD.png?s=128&g=1", "display_name": "Kris", "link": "https://stackoverflow.com/users/22237/kris"}, "edited": false, "score": 0, "creation_date": 1468595013, "post_id": 38359795, "comment_id": 64207083, "body": "As far as I am aware helpers wouldn&#39;t normally be included in a model, not automatically anyway."}, {"owner": {"reputation": 16672, "user_id": 22237, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/hkobD.png?s=128&g=1", "display_name": "Kris", "link": "https://stackoverflow.com/users/22237/kris"}, "edited": false, "score": 0, "creation_date": 1506073114, "post_id": 38359795, "comment_id": 79682628, "body": "did you solve this?"}, {"owner": {"reputation": 4339, "user_id": 1338339, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/L1igS.jpg?s=128&g=1", "display_name": "lllllll", "link": "https://stackoverflow.com/users/1338339/lllllll"}, "reply_to_user": {"reputation": 16672, "user_id": 22237, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/hkobD.png?s=128&g=1", "display_name": "Kris", "link": "https://stackoverflow.com/users/22237/kris"}, "edited": false, "score": 0, "creation_date": 1506074411, "post_id": 38359795, "comment_id": 79683457, "body": "Hi @Kris , unfortunately I can&#39;t remember right now the ending to this inquiry. I take note to re-visit this asap and get back to you."}], "answers": [{"comments": [{"owner": {"reputation": 4339, "user_id": 1338339, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/L1igS.jpg?s=128&g=1", "display_name": "lllllll", "link": "https://stackoverflow.com/users/1338339/lllllll"}, "edited": false, "score": 0, "creation_date": 1468443523, "post_id": 38361523, "comment_id": 64135534, "body": "However the <code>broadcast</code> method is doing exactly what Wisper&#39;s broadcast is doing. Besides the method comes with a parameter eg <code>transaction_saved</code>, which is also submitted(I tested debugging inside the observer method that listens to <code>transaction_saved</code> broadcasts). So <code>Wisper::Publisher</code> must be included somewhere that I&#39;m missing, only for <code>test</code> env."}, {"owner": {"reputation": 16672, "user_id": 22237, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/hkobD.png?s=128&g=1", "display_name": "Kris", "link": "https://stackoverflow.com/users/22237/kris"}, "edited": false, "score": 0, "creation_date": 1506073058, "post_id": 38361523, "comment_id": 79682590, "body": "I wouldn&#39;t define methods outside of a class/module, they will populate everything."}], "tags": [], "owner": {"reputation": 41846, "user_id": 926143, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/3396173c3d22988be1a0732d184902aa?s=128&d=identicon&r=PG", "display_name": "7stud", "link": "https://stackoverflow.com/users/926143/7stud"}, "is_accepted": false, "score": 0, "last_activity_date": 1468443295, "creation_date": 1468443295, "answer_id": 38361523, "question_id": 38359795, "link": "https://stackoverflow.com/questions/38359795/rails-test-environment-has-access-to-non-included-methods/38361523#38361523", "title": "Rails &quot;test&quot; environment has access to non-included methods", "body": "<p>You can certainly do this:</p>\n\n<pre><code>module MyWisper\n  def broadcast\n    puts 'hello'\n  end\nend\n\nclass SomeClass\n  include MyWisper\nend\n\nSomeClass.new.broadcast\n\n--output:--\nhello\n</code></pre>\n\n<p>But you can also do this:</p>\n\n<pre><code>module MyWisper\n  def broadcast\n    puts 'hello'\n  end\nend\n\ndef broadcast\n  puts 'hi'\nend\n\nclass SomeClass\n  #include MyWisper\n  broadcast\nend\n\n\n--output:--\nhi\n</code></pre>\n\n<p>So somewhere in all the requires, you are requiring a global broadcast() method into your test environment.</p>\n"}], "owner": {"reputation": 4339, "user_id": 1338339, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/L1igS.jpg?s=128&g=1", "display_name": "lllllll", "link": "https://stackoverflow.com/users/1338339/lllllll"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 156, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1468443295, "creation_date": 1468436778, "last_edit_date": 1468442225, "question_id": 38359795, "link": "https://stackoverflow.com/questions/38359795/rails-test-environment-has-access-to-non-included-methods", "title": "Rails &quot;test&quot; environment has access to non-included methods", "body": "<p>I'm using the fantastic <a href=\"https://github.com/krisleech/wisper/\" rel=\"nofollow\">wisper gem</a> to react to changes in my models(Rails 4.1).</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>Class Transaction &lt; ActiveRecord::Base\n  #include Wisper::Publisher\n  after_save { broadcast(:transaction_saved)}\n\nend\n</code></pre>\n\n<p>Here <code>broadcast</code> is a method provided by the <code>Wisper::Publisher</code> module, the inclusion of which is commented out as you can see above.</p>\n\n<p>Due to all this, I'm not understanding how a test like this one can pass without complaining about \"<code>broadcast</code> method missing\":</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>require 'test_helper'\nclass TransactionTest &lt; ActiveSupport::TestCase\n  include GeneralHelper # this doesnt include any other module\n  def setup\n    @tr = Transaction.create(...)\n  end\n  def test_transaction_method\n    @tr.update_attributes(amount:100)\n  end\nend\n</code></pre>\n\n<p>As expected <code>development/production</code> environments <em>do</em> complain about method missing</p>\n\n<p>-- Update\n<code>test/test_helper.rb</code></p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>ENV[\"RAILS_ENV\"] ||= \"test\"\nrequire File.expand_path('../../config/environment', __FILE__)\nrequire 'rails/test_help'\nrequire \"mocha/mini_test\"\nrequire 'minitest/reporters'\nMinitest::Reporters.use!(\n  Minitest::Reporters::ProgressReporter.new,\n  ENV,\n  Minitest.backtrace_filter)\n\n# Capybara and poltergeist integration\nrequire \"capybara/rails\"\nrequire \"capybara/poltergeist\"\nCapybara.javascript_driver = :poltergeist\n\n\nclass ActiveSupport::TestCase\n  ActiveRecord::Migration.check_pending!\n  include FactoryGirl::Syntax::Methods\n\n  # Setup all fixtures in test/fixtures/*.yml for all tests in alphabetical order.\n  #\n  # Note: You'll currently still have to declare fixtures explicitly in integration tests\n  # -- they do not yet inherit this setting\n  fixtures :all\n\n  # Add more helper methods to be used by all tests here...\n  def assert_valid(model, msg = nil)\n    msg = message(msg) { \"Expected #{model} to be valid, but got errors: #{errors}.\" }\n    valid = model.valid?\n    errors = model.errors.full_messages.join(', ')\n    assert valid, msg\n  end\nend\n</code></pre>\n\n<p><code>Gemfile</code></p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>source 'https://rubygems.org'\n\n# Bundle edge Rails instead: gem 'rails', github: 'rails/rails'\ngem 'rails', '4.1.13'\n\n# Use pg as the database for Active Record\ngem 'pg'\n\n# Use SCSS for stylesheets\ngem 'sass-rails'#, '~&gt; 4.0.2'\n\n# Use Uglifier as compressor for JavaScript assets\ngem 'uglifier', '&gt;= 1.3.0'\n\n# Use CoffeeScript for .js.coffee assets and views\ngem 'coffee-rails', '~&gt; 4.0.0'\n\n# See https://github.com/sstephenson/execjs#readme for more supported runtimes\n# gem 'therubyracer', platforms: :ruby\n\n# Use jquery as the JavaScript library\ngem 'jquery-rails'\ngem 'jquery-turbolinks'\n\n#gem 'bootstrap-sass'\ngem 'font-awesome-rails'\ngem 'simple-line-icons-rails'\ngem 'active_link_to'\n\ngem 'country_select', github: 'stefanpenner/country_select'\ngem 'chronic'\n\ngem 'will_paginate'#, '3.0.4'\ngem 'will_paginate-bootstrap'\n\n\n#Editable\n#gem 'bootstrap-editable-rails'\n#Encryption\ngem 'aes'\n\n# Turbolinks makes following links in your web application faster. Read more: https://github.com/rails/turbolinks\ngem 'turbolinks'\n\n# Build JSON APIs with ease. Read more: https://github.com/rails/jbuilder\ngem 'jbuilder', '~&gt; 1.2'\n\ngroup :doc do\n  # bundle exec rake doc:rails generates the API under doc/api.\n  gem 'sdoc', require: false\nend\n# Use ActiveModel has_secure_password\ngem 'bcrypt', '~&gt; 3.1.7'\n\ngem 'redis'\ngem 'firebase'\n# Use unicorn as the app server\ngem 'puma'\n\n# Use Capistrano for deployment\n# gem 'capistrano', group: :development\n\n# Use debugger\n# gem 'debugger', group: [:development, :test]\n\ngem 'recipient_interceptor'\n\ngroup :test, :development do\n  #gem 'rspec-rails'\n  #gem 'rspec-its'\n  gem 'pry'\n  gem 'pry-nav'\n  gem 'pry-rails'\nend\n\ngem 'nokogiri'\ngem 'faker'\ngem 'haml'\ngem 'slim'\ngem 'rack-mini-profiler'\ngem 'newrelic_rpm'\n#gem 'appsignal'\n\ngroup :test do\n  gem 'capybara'\n  #gem 'capybara-webkit'\n  gem 'factory_girl_rails'\n  #gem \"connection_pool\"\n  #gem \"launchy\"\n  gem \"minitest\"\n  gem \"minitest-reporters\"\n  gem \"mocha\"\n  gem \"poltergeist\"\n  #gem \"shoulda\"\nend\n\ngem 'axlsx'\ngem 'prawn'\ngem 'active_model_serializers'\n\ngem 'card-rails'\n\ngem 'rails_12factor', group: :production\n#gem 'twitter-typeahead-rails', :git =&gt; \"git://github.com/yourabi/twitter-typeahead-rails.git\"\ngem 'rack-cors', :require =&gt; 'rack/cors'\n\ngem 'sidekiq'\ngem 'rest-client'\ngem 'nest'\ngem 'redic'\ngem 'fog'\ngem 'aws-sdk'\ngem 'twilio-ruby'\ngem 'react-rails', '~&gt; 1.0'\ngem 'wisper', '2.0.0.rc1'\ngem 'ruby-prof'\ngem 'le'\ngem 'mechanize'\ngem 'mandrill-api'\ngem 'business_time'\ngem 'paleta'\ngem \"aftership\", \"~&gt; 4.3.1\"\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 4688, "user_id": 2116518, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Hwt8F.jpg?s=128&g=1", "display_name": "Nic Nilov", "link": "https://stackoverflow.com/users/2116518/nic-nilov"}, "edited": false, "score": 0, "creation_date": 1468437382, "post_id": 38359652, "comment_id": 64132390, "body": "What&#39;s in your rendered html for <code>views&#47;network_hosts&#47;show.html.erb</code>?"}, {"owner": {"reputation": 2074, "user_id": 688071, "user_type": "registered", "accept_rate": 67, "profile_image": "https://graph.facebook.com/1229375604/picture?type=large", "display_name": "Godzilla74", "link": "https://stackoverflow.com/users/688071/godzilla74"}, "reply_to_user": {"reputation": 4688, "user_id": 2116518, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Hwt8F.jpg?s=128&g=1", "display_name": "Nic Nilov", "link": "https://stackoverflow.com/users/2116518/nic-nilov"}, "edited": false, "score": 0, "creation_date": 1468437475, "post_id": 38359652, "comment_id": 64132446, "body": "Just a bunch of <code>@network_host</code> values.  Not having an issue with any of that, just this damn link to."}, {"owner": {"reputation": 4688, "user_id": 2116518, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Hwt8F.jpg?s=128&g=1", "display_name": "Nic Nilov", "link": "https://stackoverflow.com/users/2116518/nic-nilov"}, "edited": false, "score": 0, "creation_date": 1468437529, "post_id": 38359652, "comment_id": 64132470, "body": "More specifically, what do the rendered links look like in html? Do they get the additional param properly?"}, {"owner": {"reputation": 2074, "user_id": 688071, "user_type": "registered", "accept_rate": 67, "profile_image": "https://graph.facebook.com/1229375604/picture?type=large", "display_name": "Godzilla74", "link": "https://stackoverflow.com/users/688071/godzilla74"}, "reply_to_user": {"reputation": 4688, "user_id": 2116518, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Hwt8F.jpg?s=128&g=1", "display_name": "Nic Nilov", "link": "https://stackoverflow.com/users/2116518/nic-nilov"}, "edited": false, "score": 0, "creation_date": 1468437611, "post_id": 38359652, "comment_id": 64132521, "body": "Ah, sorry, no: <code>&lt;a data-toggle=&quot;tooltip&quot; href=&quot;&#47;issues&#47;5&quot; title=&quot;&quot; data-original-title=&quot;View&quot;&gt;&lt;i class=&quot;fa fa-eye&quot;&gt;&lt;&#47;i&gt;&lt;&#47;a&gt;</code>"}, {"owner": {"reputation": 2074, "user_id": 688071, "user_type": "registered", "accept_rate": 67, "profile_image": "https://graph.facebook.com/1229375604/picture?type=large", "display_name": "Godzilla74", "link": "https://stackoverflow.com/users/688071/godzilla74"}, "reply_to_user": {"reputation": 4688, "user_id": 2116518, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Hwt8F.jpg?s=128&g=1", "display_name": "Nic Nilov", "link": "https://stackoverflow.com/users/2116518/nic-nilov"}, "edited": false, "score": 0, "creation_date": 1468437713, "post_id": 38359652, "comment_id": 64132565, "body": "I think I might have just figured it out though... looks like I can&#39;t just &#39;make up&#39; a parameter name as I was doing with <code>host</code>.  Instead, I have to use the modeled name:  <code>&lt;%= link_to &#39;&lt;i class=&quot;fa fa-eye&quot;&gt;&lt;&#47;i&gt;&#39;.html_safe, issue_path({id: issue.id, network_host: @network_host.id}), &quot;data-toggle&quot; =&gt; &quot;tooltip&quot;, &quot;title&quot; =&gt; &quot;View&quot; %&gt;</code>  This works, but it passes the paramter in the URL, which I don&#39;t really like doing: <code>http:&#47;&#47;localhost:3000&#47;issues&#47;5?network_host=55</code>  Any way around it?"}, {"owner": {"reputation": 4688, "user_id": 2116518, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Hwt8F.jpg?s=128&g=1", "display_name": "Nic Nilov", "link": "https://stackoverflow.com/users/2116518/nic-nilov"}, "edited": false, "score": 1, "creation_date": 1468437983, "post_id": 38359652, "comment_id": 64132676, "body": "Well, your first approach should be working just as well, adding the extra parameter in the same fashion. The only required thing is route-declared parameters to be present. Since you&#39;r request is <code>get</code> (as with all plain links) there is no straightforward way around that. You could either use <code>post</code> from javascript or some cookies/sessions hackery to pass the extra values. There is nothing wrong with an url like yours though."}], "answers": [{"tags": [], "owner": {"reputation": 5250, "user_id": 5154683, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eae81933dce5ced9ec019414bbd4f0f4?s=128&d=identicon&r=PG&f=1", "display_name": "Robert Nubel", "link": "https://stackoverflow.com/users/5154683/robert-nubel"}, "is_accepted": true, "score": 0, "last_activity_date": 1468440375, "creation_date": 1468440375, "answer_id": 38360779, "question_id": 38359652, "link": "https://stackoverflow.com/questions/38359652/rails-pass-additional-parameters-in-link-to/38360779#38360779", "title": "Rails Pass additional parameters in link_to", "body": "<p>Your approach is correct, but the <code>host</code> option in your route helper (and all other derivatives of <code>url_for</code>) is reserved for modifying the host in the generated URLs. But since you're using <code>issue_path</code> and not <code>issue_url</code>, the <code>host</code> parameter is just being ignored. To fix your issue, pick another parameter name.</p>\n"}], "owner": {"reputation": 2074, "user_id": 688071, "user_type": "registered", "accept_rate": 67, "profile_image": "https://graph.facebook.com/1229375604/picture?type=large", "display_name": "Godzilla74", "link": "https://stackoverflow.com/users/688071/godzilla74"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 714, "favorite_count": 1, "accepted_answer_id": 38360779, "answer_count": 1, "score": 1, "last_activity_date": 1468440375, "creation_date": 1468436235, "question_id": 38359652, "link": "https://stackoverflow.com/questions/38359652/rails-pass-additional-parameters-in-link-to", "title": "Rails Pass additional parameters in link_to", "body": "<p>I was under the impression that it's possible to pass additional parameters within a <code>link_to</code> tag in Rails.  What I have is a button that a user can click on to move over to another controllers <code>show</code> method/view and I need to be able to pass <code>@network_host.id</code> to the new controller <code>issues_controller.rb</code>, but it's not working.  Instead, I get redirected back to my <code>root_url</code>.</p>\n\n<p>In order of how the user would do it:</p>\n\n<blockquote>\n  <ol>\n  <li>User navigates to www.myserver.com/network_hosts/XX (the show method)</li>\n  <li>controllers/network_hosts_controller.rb kicks in</li>\n  </ol>\n</blockquote>\n\n<pre><code>class NetworkHostsController &lt; ApplicationController\n   before_action :set_network_host, only: [:show]\n\n   def show\n     @network_host = NetworkHost.find(params[:id])\n     if @network_host\n       @major_issues = get_host_issues(@network_host, @network_host.last_test, \"major\")\n       @minor_issues = get_host_issues(@network_host, @network_host.last_test, \"minor\")\n     end\n   end\nend\n</code></pre>\n\n<blockquote>\n  <ol start=\"3\">\n  <li>views/network_hosts/show.html.erb (User clicks the link_to button)</li>\n  </ol>\n</blockquote>\n\n<pre><code>&lt;tbody&gt;\n  &lt;% @major_issues.to_enum.with_index(1).each do |result, index| %&gt;\n    &lt;% issue = result.issue %&gt;\n    &lt;tr&gt;\n      &lt;td&gt;\n        &lt;%= link_to '&lt;i class=\"fa fa-eye\"&gt;&lt;/i&gt;'.html_safe, issue_path({ id: issue.id, host: @network_host.id }), \"data-toggle\" =&gt; \"tooltip\", \"title\" =&gt; \"View\" %&gt;\n      &lt;/td&gt;\n    &lt;/tr&gt;\n  &lt;% end %&gt;\n&lt;/tbody&gt;\n</code></pre>\n\n<blockquote>\n  <ol start=\"4\">\n  <li>Which should then fire controllers/issues_controller.rb (show method, i.e. www.myserver.com/issues/5432),</li>\n  </ol>\n</blockquote>\n\n<pre><code>class IssuesController &lt; ApplicationController\n  def show\n    @issue = Issue.find(params[:id])\n    @network_host = NetworkHost.find(params[:host])\n  end\nend\n</code></pre>\n\n<p>However, step 4 isn't working, instead it routes back to the homepage.  So in my console, I'm looking at what parameters are being passed, and I don't see the <code>host</code> parameter:</p>\n\n<pre><code>Started GET \"/issues/54387\" for 127.0.0.1 at 2016-07-13 14:06:49 -0400\nProcessing by IssuesController#show as HTML\n  Parameters: {\"id\"=&gt;\"54387\"}\n</code></pre>\n\n<p>Am I implementing this wrong?</p>\n"}, {"tags": ["ruby", "jekyll"], "comments": [{"owner": {"reputation": 742, "user_id": 601555, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b70354d05caf6bdf7e7953713c1cd4?s=128&d=identicon&r=PG", "display_name": "Ilija Eftimov", "link": "https://stackoverflow.com/users/601555/ilija-eftimov"}, "edited": false, "score": 0, "creation_date": 1468449863, "post_id": 38359542, "comment_id": 64138158, "body": "What is the <code>layout</code> on the first line of the pages that <i>do not</i> show up?"}, {"owner": {"reputation": 194, "user_id": 2034069, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/296c93c8026ece906a2c7a4905ded301?s=128&d=identicon&r=PG", "display_name": "Zach Herring", "link": "https://stackoverflow.com/users/2034069/zach-herring"}, "reply_to_user": {"reputation": 742, "user_id": 601555, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b70354d05caf6bdf7e7953713c1cd4?s=128&d=identicon&r=PG", "display_name": "Ilija Eftimov", "link": "https://stackoverflow.com/users/601555/ilija-eftimov"}, "edited": false, "score": 0, "creation_date": 1468468520, "post_id": 38359542, "comment_id": 64142331, "body": "@IleEftimov layout: null. It&#39;s pulling my <code>feed.xml</code>, <code>css&#47;main.scss</code> and something marked <code>&#47;</code>, all as pages?"}, {"owner": {"reputation": 194, "user_id": 2034069, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/296c93c8026ece906a2c7a4905ded301?s=128&d=identicon&r=PG", "display_name": "Zach Herring", "link": "https://stackoverflow.com/users/2034069/zach-herring"}, "reply_to_user": {"reputation": 742, "user_id": 601555, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b70354d05caf6bdf7e7953713c1cd4?s=128&d=identicon&r=PG", "display_name": "Ilija Eftimov", "link": "https://stackoverflow.com/users/601555/ilija-eftimov"}, "edited": false, "score": 0, "creation_date": 1468469106, "post_id": 38359542, "comment_id": 64142473, "body": "On further investigation, it&#39;s pulling the index.html from my root folder as a page entry too."}], "answers": [{"tags": [], "owner": {"reputation": 46692, "user_id": 1548376, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qCZQw.gif?s=128&g=1", "display_name": "David Jacquel", "link": "https://stackoverflow.com/users/1548376/david-jacquel"}, "is_accepted": false, "score": 1, "last_activity_date": 1468484182, "creation_date": 1468484182, "answer_id": 38368930, "question_id": 38359542, "link": "https://stackoverflow.com/questions/38359542/jekyll-pages-loop-pulling-all-root-files-including-css-and-config/38368930#38368930", "title": "Jekyll Pages Loop pulling all root files (including CSS and config)", "body": "<p>From <code>jekyll new mysite</code> (with version 3.x) command, you must get four pages from site.pages loop : about.md, feed.xml, index.html and css/main.scss.</p>\n\n<p>If it's not the case : there is a problem.</p>\n\n<p>From jekyll point of view a page is :</p>\n\n<ul>\n<li>anything that is not a document (post or collection item)</li>\n<li>and that have a front matter</li>\n</ul>\n\n<p>If you only want to loop in pages that are generated in html, you can use <code>site.html_pages</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 180, "user_id": 5530648, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/7bf2eca5784c7839f1f3c54d89c2be01?s=128&d=identicon&r=PG&f=1", "display_name": "jMike", "link": "https://stackoverflow.com/users/5530648/jmike"}, "is_accepted": true, "score": 1, "last_activity_date": 1468484388, "creation_date": 1468484388, "answer_id": 38369000, "question_id": 38359542, "link": "https://stackoverflow.com/questions/38359542/jekyll-pages-loop-pulling-all-root-files-including-css-and-config/38369000#38369000", "title": "Jekyll Pages Loop pulling all root files (including CSS and config)", "body": "<p><code>jekyll serve</code> or <code>jekyll build</code> will be generated all .html, .markdown, .md, or .textile files with a YAML Front Matter section. Other directories and files will be copied. <a href=\"https://jekyllrb.com/docs/structure/\" rel=\"nofollow\">Jekyll structure</a></p>\n\n<p>.html, .markdown, .md, or .textile files with a YAML Front Matter section and the exception of posts (in _post), data files (_data) and files in _layouts, _includes, _plugins, _drafts are pages.</p>\n\n<p><code>{% for page in site.pages %}</code> processed with default configuration only these pages. But you can change the page scope.</p>\n\n<p>_config.yml has a exclude option. You can exclude directories and/or files from the conversion.</p>\n"}], "owner": {"reputation": 194, "user_id": 2034069, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/296c93c8026ece906a2c7a4905ded301?s=128&d=identicon&r=PG", "display_name": "Zach Herring", "link": "https://stackoverflow.com/users/2034069/zach-herring"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 195, "favorite_count": 0, "accepted_answer_id": 38369000, "answer_count": 2, "score": 3, "last_activity_date": 1469647849, "creation_date": 1468435791, "last_edit_date": 1469647849, "question_id": 38359542, "link": "https://stackoverflow.com/questions/38359542/jekyll-pages-loop-pulling-all-root-files-including-css-and-config", "title": "Jekyll Pages Loop pulling all root files (including CSS and config)", "body": "<p>I'm using Jekyll to host my portfolio as well as blog. In a <code>{% for page in site.pages %}</code> loop, Jekyll is pulling everything with a root lvl folder, including my <code>css/main.css.</code></p>\n\n<p>When I start a new Jekyll project and write the same <code>for</code>-loop, I'm only given the Pages that have either <code>index.md</code> or <code>.html</code>. I could just port all my work over to a fresh install, but I'd like to understand what's happening.</p>\n\n<p>I'm assuming this is some kind of config or cache error, but searching has turned up bupkis. Anyone have any insight on what's going on?</p>\n\n<p><a href=\"http://i.stack.imgur.com/3IxwC.png\" rel=\"nofollow\">Dom Structure w/ \"Empty\" nodes</a>\n<a href=\"http://i.stack.imgur.com/3ReuV.png\" rel=\"nofollow\">Folder Structure</a></p>\n"}, {"tags": ["ruby", "selenium-webdriver", "webdriver", "firefox-marionette", "geckodriver"], "answers": [{"tags": [], "owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "is_accepted": false, "score": 0, "last_activity_date": 1468438640, "creation_date": 1468438640, "answer_id": 38360290, "question_id": 38359429, "link": "https://stackoverflow.com/questions/38359429/get-browser-version-using-selenium-webdriver-and-ruby/38360290#38360290", "title": "Get browser version using Selenium WebDriver and Ruby", "body": "<p>I tested this with selenium. It seems this line is the problem:</p>\n\n<pre><code>puts browser.capabilities[\"version\"]\n</code></pre>\n\n<p>Here's two ways to get at the version:</p>\n\n<pre><code>browser.capabilities.version\nbrowser.capabilities.send(:capabilities)[:version]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 242, "user_id": 865319, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f2c6487293df8b89cffd957ef457edd9?s=128&d=identicon&r=PG&f=1", "display_name": "xpapazaf", "link": "https://stackoverflow.com/users/865319/xpapazaf"}, "is_accepted": false, "score": 0, "last_activity_date": 1501661873, "creation_date": 1501661873, "answer_id": 45455265, "question_id": 38359429, "link": "https://stackoverflow.com/questions/38359429/get-browser-version-using-selenium-webdriver-and-ruby/45455265#45455265", "title": "Get browser version using Selenium WebDriver and Ruby", "body": "<p>With selenium-webdriver (3.4.0) </p>\n\n<pre><code>browser_version = case @driver.browser\n                  when :firefox\n                    @driver.execute_script('return navigator.userAgent;').split('/')[-1]\n                  when :chrome, :safari\n                    @driver.capabilities[:version]\n                  when :ie\n                    @driver.execute_script('return navigator.userAgent;').split(\"MSIE \")[1].split(\";\")[0]\n                  end\n</code></pre>\n"}], "owner": {"reputation": 89, "user_id": 1296969, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/yvy6v.jpg?s=128&g=1", "display_name": "bitmvr", "link": "https://stackoverflow.com/users/1296969/bitmvr"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1385, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1501661873, "creation_date": 1468435312, "last_edit_date": 1468688276, "question_id": 38359429, "link": "https://stackoverflow.com/questions/38359429/get-browser-version-using-selenium-webdriver-and-ruby", "title": "Get browser version using Selenium WebDriver and Ruby", "body": "<p>Trying to extract the browser version without making a system call. Below is my Ruby code. </p>\n\n<pre><code>#!/usr/bin/env ruby\n\nrequire \"selenium-webdriver\"\n\n# Tell the Ruby bindings to use Marionette.\n# This will not be necessary in the future,\n# when Selenium will default to marionette\n\ncaps = Selenium::WebDriver::Remote::Capabilities.firefox marionette: true\nbrowser = Selenium::WebDriver.for :firefox, :desired_capabilities =&gt; caps\n\nputs browser.capabilities[\"version\"]\n</code></pre>\n\n<p>There is nothing returned to the terminal after execution.</p>\n"}, {"tags": ["ruby", "rubyzip"], "answers": [{"tags": [], "owner": {"reputation": 4688, "user_id": 2116518, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Hwt8F.jpg?s=128&g=1", "display_name": "Nic Nilov", "link": "https://stackoverflow.com/users/2116518/nic-nilov"}, "is_accepted": false, "score": 1, "last_activity_date": 1468439934, "creation_date": 1468439934, "answer_id": 38360655, "question_id": 38359317, "link": "https://stackoverflow.com/questions/38359317/rubyzip-zipfilesystemzipfsdir-glob-method-broken/38360655#38360655", "title": "rubyzip Zip::FileSystem::ZipFsDir glob method broken?", "body": "<p>One reason this is happening is <code>ZipFileNameMapper</code> indeed does not implement the <code>glob</code> method as can be seen <a href=\"https://github.com/rubyzip/rubyzip/blob/3ec40d875d158f73c836a14169d4649bb0a0a84a/lib/zip/filesystem.rb#L549\" rel=\"nofollow\">in it's source</a>.</p>\n\n<p>According to this statement:</p>\n\n<blockquote>\n  <p>All access to Zip::File from ZipFsFile and ZipFsDir goes through a ZipFileNameMapper</p>\n</blockquote>\n\n<p><code>ZipFileNameMapper</code> should implement <code>glob</code> which it doesn't so it looks like a possible bug.</p>\n"}], "owner": {"reputation": 6117, "user_id": 234077, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/68c0567b3dcd0eb91b7b0835b22a9210?s=128&d=identicon&r=PG", "display_name": "KenB", "link": "https://stackoverflow.com/users/234077/kenb"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 93, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1468457954, "creation_date": 1468434849, "last_edit_date": 1468457954, "question_id": 38359317, "link": "https://stackoverflow.com/questions/38359317/rubyzip-zipfilesystemzipfsdir-glob-method-broken", "title": "rubyzip Zip::FileSystem::ZipFsDir glob method broken?", "body": "<p>Using version 1.2.0, I am getting strange results when I try to call <code>glob</code> on a <code>ZipFsDir</code> object.  In a rails console:</p>\n\n<pre><code>&gt; require 'zip/filesystem'\n =&gt; true \n&gt; file = '/home/me/test.zip'\n =&gt; \"/home/me/test.zip\" \n&gt; zf = Zip::File.open file\n =&gt; #&lt;Zip::File:0x0000000880e0c8...\n&gt; d = zf.dir\n =&gt; #&lt;Zip::FileSystem::ZipFsDir:0x0000000880e028\n&gt; d.class\n =&gt; Zip::FileSystem::ZipFsDir\n&gt; d.glob(\"*.shp\")\nNoMethodError: undefined method `glob' for #&lt;Zip::FileSystem::ZipFileNameMapper:0x0000000880e078&gt;\n</code></pre>\n\n<p>Why is it reporting that the method is undefined for <code>Zip::FileSystem::ZipFileNameMapper</code>? I called it on a <code>ZipFsDir</code> object. The docs clearly list <code>glob</code> as a <a href=\"http://www.rubydoc.info/gems/rubyzip/1.2.0/Zip/FileSystem/ZipFsDir#glob-instance_method\" rel=\"nofollow\">ZipFsDir instance method</a>.</p>\n"}, {"tags": ["ruby", "watir"], "comments": [{"owner": {"reputation": 1175, "user_id": 1126719, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/3fe729ad12a3e5f0fec1156753afccc4?s=128&d=identicon&r=PG", "display_name": "Dan Herman", "link": "https://stackoverflow.com/users/1126719/dan-herman"}, "edited": false, "score": 0, "creation_date": 1468439383, "post_id": 38359213, "comment_id": 64133357, "body": "Can you show the full code you are using that is working with the :index =&gt; 1."}, {"owner": {"reputation": 11, "user_id": 6211312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/199fd49b700679272289f4370cbabb08?s=128&d=identicon&r=PG&f=1", "display_name": "a non", "link": "https://stackoverflow.com/users/6211312/a-non"}, "reply_to_user": {"reputation": 1175, "user_id": 1126719, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/3fe729ad12a3e5f0fec1156753afccc4?s=128&d=identicon&r=PG", "display_name": "Dan Herman", "link": "https://stackoverflow.com/users/1126719/dan-herman"}, "edited": false, "score": 0, "creation_date": 1468440172, "post_id": 38359213, "comment_id": 64133825, "body": "l = b.link :text =&gt; &#39;+ load to card&#39;, :index =&gt; 1"}, {"owner": {"reputation": 32896, "user_id": 1276506, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/7149d2bc15314277ac69357ef7251650?s=128&d=identicon&r=PG", "display_name": "boulder_ruby", "link": "https://stackoverflow.com/users/1276506/boulder-ruby"}, "edited": false, "score": 0, "creation_date": 1468691660, "post_id": 38359213, "comment_id": 64235609, "body": "If you have a solution to your question that&#39;s not included in any of the answers you should answer your own question and mark it as correct. No harm in that"}], "answers": [{"comments": [{"owner": {"reputation": 1906, "user_id": 396986, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/82270219349732c881bd50f534c397f8?s=128&d=identicon&r=PG", "display_name": "Dave McNulla", "link": "https://stackoverflow.com/users/396986/dave-mcnulla"}, "edited": false, "score": 0, "creation_date": 1468452499, "post_id": 38360987, "comment_id": 64138893, "body": "Yes, that one should work except you might need a <code>b.back</code> inside the loop."}, {"owner": {"reputation": 11, "user_id": 6211312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/199fd49b700679272289f4370cbabb08?s=128&d=identicon&r=PG&f=1", "display_name": "a non", "link": "https://stackoverflow.com/users/6211312/a-non"}, "edited": false, "score": 0, "creation_date": 1468506496, "post_id": 38360987, "comment_id": 64163919, "body": "So, I put this in as is and it&#39;s not working at all. I&#39;m not sure why. But before I was able to get at least 1 coupon to clip but now it won&#39;t clip any and the script is closing. Am I forgetting something?"}, {"owner": {"reputation": 1906, "user_id": 396986, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/82270219349732c881bd50f534c397f8?s=128&d=identicon&r=PG", "display_name": "Dave McNulla", "link": "https://stackoverflow.com/users/396986/dave-mcnulla"}, "edited": false, "score": 0, "creation_date": 1468508894, "post_id": 38360987, "comment_id": 64165714, "body": "I can&#39;t tell what you implemented based on the limited info in your comment."}, {"owner": {"reputation": 1175, "user_id": 1126719, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/3fe729ad12a3e5f0fec1156753afccc4?s=128&d=identicon&r=PG", "display_name": "Dan Herman", "link": "https://stackoverflow.com/users/1126719/dan-herman"}, "edited": false, "score": 0, "creation_date": 1468520015, "post_id": 38360987, "comment_id": 64172554, "body": "Yes, it would be helpful if you pasted the entire bit of code you are working on so we can see the whole thing."}], "tags": [], "owner": {"reputation": 1175, "user_id": 1126719, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/3fe729ad12a3e5f0fec1156753afccc4?s=128&d=identicon&r=PG", "display_name": "Dan Herman", "link": "https://stackoverflow.com/users/1126719/dan-herman"}, "is_accepted": false, "score": 0, "last_activity_date": 1468441096, "creation_date": 1468441096, "answer_id": 38360987, "question_id": 38359213, "link": "https://stackoverflow.com/questions/38359213/im-learning-ruby-and-using-watir-to-create-a-coupon-clipping-project-im-havin/38360987#38360987", "title": "I&#39;m learning Ruby and using Watir to create a coupon clipping project. I&#39;m having trouble looping through the process though", "body": "<p>You should be able to iterate through the links like so:</p>\n\n<pre><code>coupons = b.links(text: '+ load to card')\ncoupons.each do |coupon|\n  coupon.click\nend\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 6211312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/199fd49b700679272289f4370cbabb08?s=128&d=identicon&r=PG&f=1", "display_name": "a non", "link": "https://stackoverflow.com/users/6211312/a-non"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 81, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1468507600, "creation_date": 1468434468, "last_edit_date": 1468507600, "question_id": 38359213, "link": "https://stackoverflow.com/questions/38359213/im-learning-ruby-and-using-watir-to-create-a-coupon-clipping-project-im-havin", "title": "I&#39;m learning Ruby and using Watir to create a coupon clipping project. I&#39;m having trouble looping through the process though", "body": "<p>I'm trying to write a script in Ruby that will automatically clip coupons on a webpage for me. This page being:\n<a href=\"https://stopandshop.com/dashboard/coupons-deals/#/coupons-and-deals/exclusive-coupons\" rel=\"nofollow\">Stop and Shop Coupons Page</a></p>\n\n<p>What I have so far will open the browser (Firefox) and go to the coupons page on my account, but will only click one coupon and then the script closes. I've tried while loops, I've tried exists? and everything I could find online and I can't get it to clip continuously for all instances of the button '+ load to card'.</p>\n\n<p>I wrote a script for the Publix website a while ago using the site:\n<a href=\"https://www.publix.com/savings/coupons/digital-coupons\" rel=\"nofollow\">Publix Coupon Page</a>\nand it worked just fine. To \"clip\" I just used:</p>\n\n<pre><code>b.buttons(:class =&gt; 'dc-clip-btn').each do |b|\n    b.click\n    sleep 2\nend\n</code></pre>\n\n<p>I needed the \"sleep\" because sometimes the page would hang on the clip and the script would close. When I tried this same on the Stop &amp; Shop page, it didn't work at all. I had to change 'button' to 'link' and ':class' to ':text' to even get it to clip one.</p>\n\n<pre><code>require 'rubygems'\nrequire 'watir'\nrequire 'watir-webdriver'\n\nb = Watir::Browser.new :firefox, :profile =&gt; 'default'\nb.goto 'https://stopandshop.com/dashboard/coupons-deals/#/coupons-and-deals/exclusive-coupons'\n\nl = b.link :text =&gt; '+ load to card' \n\nsleep 3\n\nl.when_present.click\n</code></pre>\n\n<p>I've tried </p>\n\n<pre><code>l.exists?\nl.click\n</code></pre>\n\n<p>Which will only work on one instance. I've trued the when_present as shown above. I've even used a while loop to \"do\" l.click. I've exhausted my resources at this point, as well as my patience. Any help is greatly appreciate. Thank you!</p>\n\n<p>EDIT: </p>\n\n<p>I've found that if I include :index => 1 at the end of the line</p>\n\n<pre><code>l = b.link :text =&gt; '+ load to card', :index =&gt; 1\n</code></pre>\n\n<p>then it will navigate to that specific spot in the array and click that link. So, I guess at this point I need help trying to get it to traverse the array and click all of those links.</p>\n\n<p>EDIT 2: I was hoping to be able to post whether the suggestions worked, however I started running into an issue suddenly where when the site loads, I'm logged in as usual but then suddenly it logs me out for no reason and redirects to </p>\n\n<pre><code>https://stopandshop.com/?DPSLogout=true\n</code></pre>\n\n<p>EDIT 3: The Edit 2 issue was fixed. It was a permissions/cookies issue in my browser. However, none of the suggestions are working.</p>\n\n<p><strong>SOLUTION</strong></p>\n\n<pre><code>while l.exists? do\n    l.click\n    l = b.link :text =&gt; '+ load to card', :index =&gt; 0+1\nend\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "polymorphism", "paperclip", "ruby-on-rails-5"], "owner": {"reputation": 825, "user_id": 2448690, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7181031b639703a64b03af115e5859ad?s=128&d=identicon&r=PG", "display_name": "Florin Ionce", "link": "https://stackoverflow.com/users/2448690/florin-ionce"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 255, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1468429560, "creation_date": 1468429560, "question_id": 38357786, "link": "https://stackoverflow.com/questions/38357786/rails-5-polymorphic-attachment-with-dynamic-styles-using-paperclip", "title": "Rails 5 - polymorphic attachment with dynamic styles using paperclip", "body": "<p>I am trying to have a polymorphic attachment class with dynamic styles using paperclip and use it form another class(Foo).</p>\n\n<p>I have the Attachment class:</p>\n\n<pre><code>class Attachment &lt; ApplicationRecord\n\n  belongs_to :attachable, polymorphic: true, optional: true\n\n  has_attached_file :attachment,\n    styles: -&gt;(a) {a.instance.attachable.attachment_styles}\n\n  validates_attachment_content_type :attachment, content_type: /\\Aimage\\/.*\\Z/\nend\n</code></pre>\n\n<p>And the Foo class:</p>\n\n<pre><code>class Foo &lt; ApplicationRecord\n  has_many :attachments, class_name: \"Attachment\", as: :attachable, dependent: :destroy\n  accepts_nested_attributes_for :attachments\n\n  def attachment_styles\n    {\n     :thumb =&gt; \"30x30&gt;\",\n     :medium =&gt; \"100x100&gt;\"\n    }\n  end\nend\n</code></pre>\n\n<p>The problem here is that I don't have the foo object yet, inside that lambda function. <code>a.instance.attachable</code> returns nil. </p>\n\n<p>The error I'm getting is:</p>\n\n<pre><code>NoMethodError: undefined method `attachment_styles' for nil:NilClass\n</code></pre>\n\n<p>I am using Rails 5 and paperclip 5.0.0. \nI think this worked with Rails 4.</p>\n\n<p>PS: I need the style to be dynamic because I will use the attachment from multiple models, not just from Foo.</p>\n"}, {"tags": ["ruby", "exit"], "comments": [{"owner": {"reputation": 19, "user_id": 6489919, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1cd47fa545b124a66ca4a6a7ae83a5bf?s=128&d=identicon&r=PG&f=1", "display_name": "m.ipp", "link": "https://stackoverflow.com/users/6489919/m-ipp"}, "reply_to_user": {"reputation": 95978, "user_id": 1079354, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/c17dd9cf3e2322be19639e96da9f3eb3?s=128&d=identicon&r=PG", "display_name": "Makoto", "link": "https://stackoverflow.com/users/1079354/makoto"}, "edited": false, "score": 0, "creation_date": 1468429651, "post_id": 38357439, "comment_id": 64127807, "body": "I suppose what I mean is, if my program crashes or exits or something, is there a method I can call using at_exit or something similar to jump back and run the program again? Sort of a failsafe. Is that what a daemon does?"}, {"owner": {"reputation": 2172, "user_id": 4412925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf7fa1503a3820659b27943c99d463a0?s=128&d=identicon&r=PG&f=1", "display_name": "Nabeel", "link": "https://stackoverflow.com/users/4412925/nabeel"}, "edited": false, "score": 0, "creation_date": 1468430304, "post_id": 38357439, "comment_id": 64128218, "body": "No this isn&#39;t really possible, have a look at <a href=\"http://stackoverflow.com/questions/696839/how-do-i-write-a-bash-script-to-restart-a-process-if-it-dies\">this</a> instead."}, {"owner": {"reputation": 19, "user_id": 6489919, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1cd47fa545b124a66ca4a6a7ae83a5bf?s=128&d=identicon&r=PG&f=1", "display_name": "m.ipp", "link": "https://stackoverflow.com/users/6489919/m-ipp"}, "edited": false, "score": 0, "creation_date": 1468430790, "post_id": 38357439, "comment_id": 64128522, "body": "I think I got it. In my main code block called &#39;main&#39;, I told at_exit to call &#39;main_reboot&#39; which has a break and then re-calls &#39;main&#39;. I don&#39;t know if that&#39;s a best practice but it seems to be working"}, {"owner": {"reputation": 95978, "user_id": 1079354, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/c17dd9cf3e2322be19639e96da9f3eb3?s=128&d=identicon&r=PG", "display_name": "Makoto", "link": "https://stackoverflow.com/users/1079354/makoto"}, "edited": false, "score": 0, "creation_date": 1468433026, "post_id": 38357439, "comment_id": 64129895, "body": "Daemon processes can be built to always restart should it no longer be running.  Should you wish to add anything outside of, &quot;restart this script&quot;, you will need to engineer a solution which involves more persistent state storage (flat file, SQLite, etc) so that you can recover the application state.  But at the bare minimum, daemons get you halfway there."}, {"owner": {"reputation": 89316, "user_id": 238886, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/8ca29123b5669b26f9b6ca2c62d9d215?s=128&d=identicon&r=PG", "display_name": "Wayne Conrad", "link": "https://stackoverflow.com/users/238886/wayne-conrad"}, "edited": false, "score": 0, "creation_date": 1468447679, "post_id": 38357439, "comment_id": 64137371, "body": "Restarting a daemon is, at least in the *nix world, best done by something else.  monit, as an example of one of many such tools, will detect a daemon that has stopped running and restart it."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1468462576, "post_id": 38357439, "comment_id": 64141057, "body": "If there is a hardware or operating system issue you obviously cannot include any code to deal with that. If you you want to restart your program if something unexpected happens within the code, there&#39;s a problem with the code that needs to be fixed. Having some sort of restart mechanism only masks the problem. Am I missing something?"}], "answers": [{"tags": [], "owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "is_accepted": false, "score": 0, "last_activity_date": 1468432233, "last_edit_date": 1468432233, "creation_date": 1468431695, "answer_id": 38358405, "question_id": 38357439, "link": "https://stackoverflow.com/questions/38357439/way-to-force-ruby-program-to-re-run-on-exit/38358405#38358405", "title": "Way to force ruby program to re-run on exit?", "body": "<p>While you can write this sort of thing yourself, it's probably better to start with a library like <a href=\"https://github.com/thuehlinger/daemons\" rel=\"nofollow\">daemons</a> and use that to manage your process.</p>\n\n<p>As shown in the README it's pretty simple:</p>\n\n<pre><code>require 'daemons'\n\nDaemons.run('service.rb')\n</code></pre>\n\n<p>Where <code>service.rb</code> is the entry point into your main application that you want to keep running.</p>\n\n<p>Your approach of force-restarting the application within the same Ruby process might seem to work, but it's liable to cause chaos later on. What if your program has entered a state where doing anything leads to an exception, and that causes a restart, which immediately triggers a new exception? What if it crashed because the internal state is mangled?</p>\n\n<p>Let it die, restart it cleanly with a supervisor process like Daemons, and you'll be much better off. These supervisors often throttle restarts to avoid pinning your server with thousands of reboots per second if it's having trouble.</p>\n"}, {"tags": [], "owner": {"reputation": 1439, "user_id": 334582, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0adff13c4bbb337e2ccee14870161615?s=128&d=identicon&r=PG", "display_name": "Jonas Fagundes", "link": "https://stackoverflow.com/users/334582/jonas-fagundes"}, "is_accepted": false, "score": 0, "last_activity_date": 1468433043, "creation_date": 1468433043, "answer_id": 38358818, "question_id": 38357439, "link": "https://stackoverflow.com/questions/38357439/way-to-force-ruby-program-to-re-run-on-exit/38358818#38358818", "title": "Way to force ruby program to re-run on exit?", "body": "<p>The restart logic is properly done for you by the monitor you use in your server (systemd or monit can do that pretty easily but there are many others).</p>\n\n<p>If you are doing a service you don't want it to restart every time because the it will be too costly, the process is held in a event loop that waits for income requests but this is usually done for you in the library you use to handle the protocol, so you write only the handler for the incoming request.</p>\n"}], "owner": {"reputation": 19, "user_id": 6489919, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1cd47fa545b124a66ca4a6a7ae83a5bf?s=128&d=identicon&r=PG&f=1", "display_name": "m.ipp", "link": "https://stackoverflow.com/users/6489919/m-ipp"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 626, "favorite_count": 0, "closed_date": 1468447759, "answer_count": 2, "score": -1, "last_activity_date": 1468433043, "creation_date": 1468428381, "question_id": 38357439, "link": "https://stackoverflow.com/questions/38357439/way-to-force-ruby-program-to-re-run-on-exit", "closed_reason": "Duplicate", "title": "Way to force ruby program to re-run on exit?", "body": "<p>I'm sure there is a simple way to do this but I can't seem to find it.</p>\n\n<p>I simply want my ruby program to run all the time, so if it exits or terminates for some reason I want it to automatically re-run.</p>\n\n<p>Any ideas of how to achieve this?</p>\n\n<p>-Thanks</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "rspec"], "answers": [{"comments": [{"owner": {"reputation": 311, "user_id": 5651001, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/dd8cdbb3f752d6276a0ec0460e047bc5?s=128&d=identicon&r=PG&f=1", "display_name": "Harry B.", "link": "https://stackoverflow.com/users/5651001/harry-b"}, "edited": false, "score": 0, "creation_date": 1468429359, "post_id": 38357603, "comment_id": 64127633, "body": "To clarify, the counter would not be set like that. A players name would be the argument in the initialize definition and the counter is automatically set to 0 when you initialize. After a player takes a turn, the counter increments by one each time"}, {"owner": {"reputation": 39282, "user_id": 336920, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/6e2dbeb23d3fc6552a6e26800ed63289?s=128&d=identicon&r=PG", "display_name": "B Seven", "link": "https://stackoverflow.com/users/336920/b-seven"}, "reply_to_user": {"reputation": 311, "user_id": 5651001, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/dd8cdbb3f752d6276a0ec0460e047bc5?s=128&d=identicon&r=PG&f=1", "display_name": "Harry B.", "link": "https://stackoverflow.com/users/5651001/harry-b"}, "edited": false, "score": 0, "creation_date": 1468430080, "post_id": 38357603, "comment_id": 64128095, "body": "It sounds like you want a <code>#has_moved?</code> method. So that method would check the <code>@counter</code>. The above test will work."}, {"owner": {"reputation": 311, "user_id": 5651001, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/dd8cdbb3f752d6276a0ec0460e047bc5?s=128&d=identicon&r=PG&f=1", "display_name": "Harry B.", "link": "https://stackoverflow.com/users/5651001/harry-b"}, "edited": false, "score": 0, "creation_date": 1468430277, "post_id": 38357603, "comment_id": 64128199, "body": "Okay cool. I&#39;ll try and mess around with some code. Thanks for your help!"}, {"owner": {"reputation": 39282, "user_id": 336920, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/6e2dbeb23d3fc6552a6e26800ed63289?s=128&d=identicon&r=PG", "display_name": "B Seven", "link": "https://stackoverflow.com/users/336920/b-seven"}, "reply_to_user": {"reputation": 311, "user_id": 5651001, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/dd8cdbb3f752d6276a0ec0460e047bc5?s=128&d=identicon&r=PG&f=1", "display_name": "Harry B.", "link": "https://stackoverflow.com/users/5651001/harry-b"}, "edited": false, "score": 0, "creation_date": 1468430519, "post_id": 38357603, "comment_id": 64128341, "body": "Writing specs is a great way to learn. And then you can post your app and spec code in questions on SO to get better help."}], "tags": [], "owner": {"reputation": 39282, "user_id": 336920, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/6e2dbeb23d3fc6552a6e26800ed63289?s=128&d=identicon&r=PG", "display_name": "B Seven", "link": "https://stackoverflow.com/users/336920/b-seven"}, "is_accepted": false, "score": 1, "last_activity_date": 1468428914, "creation_date": 1468428914, "answer_id": 38357603, "question_id": 38357387, "link": "https://stackoverflow.com/questions/38357387/accessing-instance-variables-in-rspec/38357603#38357603", "title": "Accessing instance variables in rspec", "body": "<pre><code>describe Foo do\n  context 'When counter is even' do\n    let( :foo ){ Foo.new(4) }\n\n    specify '#even?' do\n      expect( foo.even? ).to be_true\n    end\n  end\nend\n</code></pre>\n\n<p>According to your question, <code>@counter</code> is set in the initialize method. So the <code>#even?</code> method would check <code>@counter</code>.</p>\n"}], "owner": {"reputation": 311, "user_id": 5651001, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/dd8cdbb3f752d6276a0ec0460e047bc5?s=128&d=identicon&r=PG&f=1", "display_name": "Harry B.", "link": "https://stackoverflow.com/users/5651001/harry-b"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 413, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1468428914, "creation_date": 1468428239, "question_id": 38357387, "link": "https://stackoverflow.com/questions/38357387/accessing-instance-variables-in-rspec", "title": "Accessing instance variables in rspec", "body": "<p>I don't have any code as this is just a hypothetical question, but how would you go about accessing and manipulating instance variables in rspec?</p>\n\n<p>For instance if you had a @counter variable in your initialize method inside of a class, how could you write a test saying that if @counter is a certain number, then a certain method should return true. And if it equals a different number, then that method should return false. </p>\n"}, {"tags": ["ruby"], "answers": [{"comments": [{"owner": {"reputation": 168, "user_id": 4514408, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/93adfe584b7571f7d80b42571fd7d52a?s=128&d=identicon&r=PG&f=1", "display_name": "prajwaldp", "link": "https://stackoverflow.com/users/4514408/prajwaldp"}, "edited": false, "score": 0, "creation_date": 1468429612, "post_id": 38357703, "comment_id": 64127779, "body": "That would be in a rails app. I am working on a gem created through <code>bundle gem gem_name</code>."}, {"owner": {"reputation": 39282, "user_id": 336920, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/6e2dbeb23d3fc6552a6e26800ed63289?s=128&d=identicon&r=PG", "display_name": "B Seven", "link": "https://stackoverflow.com/users/336920/b-seven"}, "reply_to_user": {"reputation": 168, "user_id": 4514408, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/93adfe584b7571f7d80b42571fd7d52a?s=128&d=identicon&r=PG&f=1", "display_name": "prajwaldp", "link": "https://stackoverflow.com/users/4514408/prajwaldp"}, "edited": false, "score": 0, "creation_date": 1468430154, "post_id": 38357703, "comment_id": 64128136, "body": "No, it doesn&#39;t have to be a Rails app. It will work for any app with ActiveRecord."}, {"owner": {"reputation": 168, "user_id": 4514408, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/93adfe584b7571f7d80b42571fd7d52a?s=128&d=identicon&r=PG&f=1", "display_name": "prajwaldp", "link": "https://stackoverflow.com/users/4514408/prajwaldp"}, "edited": false, "score": 0, "creation_date": 1468430353, "post_id": 38357703, "comment_id": 64128248, "body": "Thanks, so this will involve manual parsing of the yaml file and setting the database explicity before the tests?"}, {"owner": {"reputation": 2172, "user_id": 4412925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf7fa1503a3820659b27943c99d463a0?s=128&d=identicon&r=PG&f=1", "display_name": "Nabeel", "link": "https://stackoverflow.com/users/4412925/nabeel"}, "edited": false, "score": 0, "creation_date": 1468430652, "post_id": 38357703, "comment_id": 64128432, "body": "You should be able to use the activerecord gem, then call <code>ActiveRecord::Base.establish_connection(config[ENV[&#39;RACK_ENV&zwnj;&#8203;&#39;]])</code> (assuming environment variable <code>RACK_ENV</code> is set to test)"}, {"owner": {"reputation": 39282, "user_id": 336920, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/6e2dbeb23d3fc6552a6e26800ed63289?s=128&d=identicon&r=PG", "display_name": "B Seven", "link": "https://stackoverflow.com/users/336920/b-seven"}, "edited": false, "score": 0, "creation_date": 1468430677, "post_id": 38357703, "comment_id": 64128444, "body": "Yes. <a href=\"https://gist.github.com/georgeu2000/034a8de58402ac33436aa1c967f4eac7\" rel=\"nofollow noreferrer\">gist.github.com/georgeu2000/034a8de58402ac33436aa1c967f4eac7</a>"}, {"owner": {"reputation": 168, "user_id": 4514408, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/93adfe584b7571f7d80b42571fd7d52a?s=128&d=identicon&r=PG&f=1", "display_name": "prajwaldp", "link": "https://stackoverflow.com/users/4514408/prajwaldp"}, "edited": false, "score": 0, "creation_date": 1468430960, "post_id": 38357703, "comment_id": 64128618, "body": "I&#39;m not using rack either. But I guess I can use a custom environment variable that I can set to <code>test</code> before running the tests."}, {"owner": {"reputation": 39282, "user_id": 336920, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/6e2dbeb23d3fc6552a6e26800ed63289?s=128&d=identicon&r=PG", "display_name": "B Seven", "link": "https://stackoverflow.com/users/336920/b-seven"}, "edited": false, "score": 0, "creation_date": 1468435394, "post_id": 38357703, "comment_id": 64131296, "body": "Yes, <code>RACK_ENV</code> is just a convention. You can use <code>RUBY_ENV</code> or something else."}], "tags": [], "owner": {"reputation": 39282, "user_id": 336920, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/6e2dbeb23d3fc6552a6e26800ed63289?s=128&d=identicon&r=PG", "display_name": "B Seven", "link": "https://stackoverflow.com/users/336920/b-seven"}, "is_accepted": true, "score": 1, "last_activity_date": 1468429257, "creation_date": 1468429257, "answer_id": 38357703, "question_id": 38357188, "link": "https://stackoverflow.com/questions/38357188/create-a-test-environment-database-in-ruby/38357703#38357703", "title": "Create a test environment database in ruby", "body": "<p>Assuming you are using PostgreSQL, you would set it in your <code>database.yml</code> file:</p>\n\n<pre><code>test:\n  adapter: postgresql\n  encoding: unicode\n  database: app_test\n  pool: 5\n  username: username\n  password: \n</code></pre>\n\n<p>You haven't explained what you mean by \"regular database\", but it could be <code>development</code> or <code>production</code>.</p>\n\n<p>Then you have a second entry in the <code>database.yml</code> file for it.</p>\n"}], "owner": {"reputation": 168, "user_id": 4514408, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/93adfe584b7571f7d80b42571fd7d52a?s=128&d=identicon&r=PG&f=1", "display_name": "prajwaldp", "link": "https://stackoverflow.com/users/4514408/prajwaldp"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 37, "favorite_count": 0, "accepted_answer_id": 38357703, "answer_count": 1, "score": 2, "last_activity_date": 1468431354, "creation_date": 1468427603, "last_edit_date": 1468431354, "question_id": 38357188, "link": "https://stackoverflow.com/questions/38357188/create-a-test-environment-database-in-ruby", "title": "Create a test environment database in ruby", "body": "<p>I'm trying to build a ruby gem that uses active_record to connect to a database. How can I configure a separate test and regular database (like rails) so that the test database is used while running tests and the regular database is used otherwise?</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 152277, "user_id": 438992, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/QouOz.jpg?s=128&g=1", "display_name": "Dave Newton", "link": "https://stackoverflow.com/users/438992/dave-newton"}, "edited": false, "score": 0, "creation_date": 1468427497, "post_id": 38357112, "comment_id": 64126571, "body": "Why are you trying to escape forward slashes?"}, {"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 2, "creation_date": 1468427523, "post_id": 38357112, "comment_id": 64126581, "body": "<b>Why</b>? This sounds like a textbook <a href=\"http://meta.stackexchange.com/questions/66377/what-is-the-xy-problem\">XY problem</a>. What are you actually trying to active here?"}, {"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 3, "creation_date": 1468427799, "post_id": 38357112, "comment_id": 64126740, "body": "For what it&#39;s worth, your very first attempt (<code>.gsub(&quot;&#47;&quot;, &#39;\\&#47;&#39;)</code>) already solves the problem you are asking. The &quot;double back-slash&quot; you are seeing is just a way of displaying &quot;this is a literal backslash character, rather than the next character being escaped&quot;."}, {"owner": {"reputation": 1299, "user_id": 2923846, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5e45ca52b59ce69b3844c6e8b09f278c?s=128&d=identicon&r=PG", "display_name": "lwassink", "link": "https://stackoverflow.com/users/2923846/lwassink"}, "edited": false, "score": 0, "creation_date": 1468427825, "post_id": 38357112, "comment_id": 64126757, "body": "Ruby is doing the right thing. The `` character is a special character in ruby, so it needs to be escaped."}, {"owner": {"reputation": 73, "user_id": 1698531, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d7a47d1a67a6765206ff269965d2dc80?s=128&d=identicon&r=PG", "display_name": "JaimeRave", "link": "https://stackoverflow.com/users/1698531/jaimerave"}, "reply_to_user": {"reputation": 152277, "user_id": 438992, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/QouOz.jpg?s=128&g=1", "display_name": "Dave Newton", "link": "https://stackoverflow.com/users/438992/dave-newton"}, "edited": false, "score": 0, "creation_date": 1468428331, "post_id": 38357112, "comment_id": 64127055, "body": "@DaveNewton this is for a custom app that expects the strings with the forward slashes escaped that way."}, {"owner": {"reputation": 432, "user_id": 6542561, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/uEiJr.png?s=128&g=1", "display_name": "Bruce David Wilner", "link": "https://stackoverflow.com/users/6542561/bruce-david-wilner"}, "edited": false, "score": 0, "creation_date": 1468432316, "post_id": 38357112, "comment_id": 64129413, "body": "This is a classic &quot;how many backslashes do you need&quot; problem.  It&#39;s like writing a program in Korn shell, using the ECHO builtin, to generate a C program that includes printf format strings.  Does this backslash turn into four backslashes, or eight, or, for that matter, sixteen? ;-)  You must understand the semantics of elision PRECISELY before tackling this task."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 1, "creation_date": 1468432439, "post_id": 38357112, "comment_id": 64129480, "body": "That custom app sounds broken, but in any case you&#39;ve already solved it, you just don&#39;t realize it."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "reply_to_user": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1468439654, "post_id": 38357112, "comment_id": 64133518, "body": "Further to @Tom&#39;s point, <code>puts &quot;http:&#47;&#47;example.com&#47;qb-xhtml-v1.xsd&quot;.gsub(&quot;&#47;&quot;, &#39;\\&#47;&#39;)</code> prints <code>http:\\&#47;\\&#47;example.com\\&#47;qb-xhtml-v1.xsd</code>, showing it is escaped correctly."}], "answers": [{"comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1468432479, "post_id": 38357225, "comment_id": 64129511, "body": "It&#39;s not convenience, it&#39;s because Ruby strings expressed in their string literal format require escaping on special characters, and backslash is one of those."}], "tags": [], "owner": {"reputation": 14411, "user_id": 52724, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/c1e5bf4421007b7cfe4dba5ecb24f777?s=128&d=identicon&r=PG", "display_name": "Karl Nicoll", "link": "https://stackoverflow.com/users/52724/karl-nicoll"}, "is_accepted": true, "score": 0, "last_activity_date": 1468427722, "creation_date": 1468427722, "answer_id": 38357225, "question_id": 38357112, "link": "https://stackoverflow.com/questions/38357112/escape-forward-slash-in-ruby/38357225#38357225", "title": "Escape forward slash in ruby", "body": "<p>I believe that the interactive ruby shell you're using is adding extra backslashes that aren't really there.</p>\n\n<p>I tried your code in <code>irb</code> and got the same result:</p>\n\n<pre><code>irb(main):005:0&gt; \"http://example.com/qb-xhtml-v1.xsd\".gsub(\"/\", '\\/')\n\"http:\\\\/\\\\/example.com\\\\/qb-xhtml-v1.xsd\"\n</code></pre>\n\n<p>But if I use <code>puts()</code> it prints correctly:</p>\n\n<pre><code>irb(main):006:0&gt; puts \"http://example.com/qb-xhtml-v1.xsd\".gsub('/', '\\/')\nhttp:\\/\\/example.com\\/qb-xhtml-v1.xsd\n=&gt; nil\n</code></pre>\n\n<p>I suspect that the ruby shell is simply escaping the backslashes for convenience, which is causing confusion.</p>\n"}], "owner": {"reputation": 73, "user_id": 1698531, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d7a47d1a67a6765206ff269965d2dc80?s=128&d=identicon&r=PG", "display_name": "JaimeRave", "link": "https://stackoverflow.com/users/1698531/jaimerave"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4904, "favorite_count": 0, "accepted_answer_id": 38357225, "answer_count": 1, "score": 2, "last_activity_date": 1468427722, "creation_date": 1468427335, "question_id": 38357112, "link": "https://stackoverflow.com/questions/38357112/escape-forward-slash-in-ruby", "title": "Escape forward slash in ruby", "body": "<p>I'm trying to escape forward slashes from an URL like this</p>\n\n<pre><code>\"http://example.com/qb-xhtml-v1.xsd\" =&gt; \"http:\\/\\/example.com\\/qb-xhtml-v1.xsd\"\n</code></pre>\n\n<p>But when I try with gsub, this is what I'm getting</p>\n\n<pre><code>\"http://example.com/qb-xhtml-v1.xsd\".gsub(\"/\", '\\/')\n=&gt; \"http:\\\\/\\\\/example.com\\\\/qb-xhtml-v1.xsd\"\n</code></pre>\n\n<p>I also tried with </p>\n\n<pre><code>\"http://example.com/qb-xhtml-v1.xsd\".gsub(\"/\", '/' =&gt; '\\/')\n</code></pre>\n\n<p>and</p>\n\n<pre><code>\"http://example.com/qb-xhtml-v1.xsd\".gsub(/[\\/]/, '\\/')\n</code></pre>\n\n<p>with the same result. Any ideas?</p>\n"}, {"tags": ["javascript", "jquery", "html", "ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 64401, "user_id": 1823841, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/DB73b.jpg?s=128&g=1", "display_name": "pala\u0455\u043d", "link": "https://stackoverflow.com/users/1823841/pala%d1%95%d0%bd"}, "edited": false, "score": 1, "creation_date": 1468424729, "post_id": 38356236, "comment_id": 64124750, "body": "Welcome to SO. Please include attempted solutions, why they didn&#39;t work, and the expected results. That would really helps us to figure out the issue with your code. Also checkout: <a href=\"http://stackoverflow.com/help/mcve\">How to create a Minimal, Complete, and Verifiable example</a>. Thanks!"}, {"owner": {"reputation": 16229, "user_id": 525478, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/3b6c0b47a0c430a0b141baee7ea845be?s=128&d=identicon&r=PG", "display_name": "Brad Werth", "link": "https://stackoverflow.com/users/525478/brad-werth"}, "edited": false, "score": 0, "creation_date": 1468426900, "post_id": 38356236, "comment_id": 64126221, "body": "When the data-x changes, change the hidden field value, too..."}, {"owner": {"reputation": 313, "user_id": 6525065, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/eccf7c6b499cb49febded630ea17e466?s=128&d=identicon&r=PG&f=1", "display_name": "lilixiaocc", "link": "https://stackoverflow.com/users/6525065/lilixiaocc"}, "edited": false, "score": 0, "creation_date": 1468427160, "post_id": 38356236, "comment_id": 64126382, "body": "Yes, that&#39;s what I want, and I will confirm the change with the button clicked"}], "answers": [{"comments": [{"owner": {"reputation": 313, "user_id": 6525065, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/eccf7c6b499cb49febded630ea17e466?s=128&d=identicon&r=PG&f=1", "display_name": "lilixiaocc", "link": "https://stackoverflow.com/users/6525065/lilixiaocc"}, "edited": false, "score": 0, "creation_date": 1468429982, "post_id": 38357386, "comment_id": 64128035, "body": "Yes, this works, I tried use this idea with something like this <code>&lt;%= f.hidden_field :x_value, :id =&gt; &quot;hiddenX&quot; %&gt;</code> and use Jquery to assign the value to this ID and it did export the data to the database. Thank you!"}], "tags": [], "owner": {"reputation": 227, "user_id": 2559962, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/eec912dca27690e9850065a97aba3071?s=128&d=identicon&r=PG", "display_name": "Inf", "link": "https://stackoverflow.com/users/2559962/inf"}, "is_accepted": true, "score": 0, "last_activity_date": 1468428235, "creation_date": 1468428235, "answer_id": 38357386, "question_id": 38356236, "link": "https://stackoverflow.com/questions/38356236/use-html-element-attribute-as-rails-form-input/38357386#38357386", "title": "Use HTML element attribute as rails form input", "body": "<p>Option 1. You can update hidden field on form submit, for example:</p>\n\n<pre><code>$('form').submit(function() {\n  $('input[type=\"hidden\"]').val($('span').attr('data-x'));\n  return true;\n});\n</code></pre>\n\n<p>Option 2. Update hidden field together with span:</p>\n\n<pre><code>var value = function(){};\n$('span').attr('data-x', value);\n$('input[type=\"hidden\"]').val(value);\n</code></pre>\n"}], "owner": {"reputation": 313, "user_id": 6525065, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/eccf7c6b499cb49febded630ea17e466?s=128&d=identicon&r=PG&f=1", "display_name": "lilixiaocc", "link": "https://stackoverflow.com/users/6525065/lilixiaocc"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 316, "favorite_count": 0, "closed_date": 1468476493, "accepted_answer_id": 38357386, "answer_count": 1, "score": 0, "last_activity_date": 1468507850, "creation_date": 1468424628, "last_edit_date": 1468507850, "question_id": 38356236, "link": "https://stackoverflow.com/questions/38356236/use-html-element-attribute-as-rails-form-input", "closed_reason": "Needs more focus", "title": "Use HTML element attribute as rails form input", "body": "<p>I am writing a html.erb page.</p>\n\n<p>Have some dynamic attributes of my span</p>\n\n<p>HTML:</p>\n\n<pre><code>&lt;span&gt;something&lt;span&gt;\n</code></pre>\n\n<p>jQuery:</p>\n\n<pre><code>$('span').attr('data-x', function(){})\n</code></pre>\n\n<p>Ruby:</p>\n\n<pre><code>&lt;%= form_for @blah do |f| %&gt;\n&lt;%= f.hidden_field :x_value, value: ?? %&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>So basically the span attribute 'data-x' will change from time to time based on the function, and I have a button set up, if I click the button, I want the value of the 'data-x' attribute be submitted by form helper to my database column \"x_value\". </p>\n\n<p>How can I do that? Thank y'all!</p>\n\n<p>After getting the idea from Inf, I got this part done. \nGet the value of the attribute in my js file:</p>\n\n<p><code>var valueX = $('span').attr('data-x')</code></p>\n\n<p>Add an ID for the hidden field in my erb file:</p>\n\n<p><code>&lt;%= f.hidden_field :x_value, :id=&gt;\"columnX\" %&gt;</code></p>\n\n<p>Then assign the id with valueX in my js file:</p>\n\n<p><code>$(\"#columnX\").val(valueX)</code></p>\n"}, {"tags": ["ruby", "regex"], "comments": [{"owner": {"reputation": 175861, "user_id": 454533, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/c7715e765817254e0534f89a4092c0aa?s=128&d=identicon&r=PG", "display_name": "Explosion Pills", "link": "https://stackoverflow.com/users/454533/explosion-pills"}, "edited": false, "score": 0, "creation_date": 1468424484, "post_id": 38356140, "comment_id": 64124586, "body": "How would you handle <code>&#39;I&#39;m&#39; a very dumb user</code>?"}, {"owner": {"reputation": 1211, "user_id": 5056202, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Wq9rr.jpg?s=128&g=1", "display_name": "CheeseFry", "link": "https://stackoverflow.com/users/5056202/cheesefry"}, "edited": false, "score": 0, "creation_date": 1468424929, "post_id": 38356140, "comment_id": 64124896, "body": "You mean the initial string is &quot;I&#39;m a very &#39;dumb&#39; stackoverflow user.&quot;, correct?"}, {"owner": {"reputation": 17608, "user_id": 661624, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/347231f8387561ef324e25b48b96ba16?s=128&d=identicon&r=PG&f=1", "display_name": "Henley Chiu", "link": "https://stackoverflow.com/users/661624/henley-chiu"}, "edited": false, "score": 0, "creation_date": 1468424989, "post_id": 38356140, "comment_id": 64124938, "body": "No, the initial string is what I posted... I checked StackOverflow and it seems everyone wants to truncate leading/trailing double spaces, hence this new question."}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1468427553, "post_id": 38356140, "comment_id": 64126607, "body": "What happens when you have a plural possessive, like &quot;species&#39; status&quot;?"}, {"owner": {"reputation": 22099, "user_id": 828366, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/V8V1N.jpg?s=128&g=1", "display_name": "Francesco Casula", "link": "https://stackoverflow.com/users/828366/francesco-casula"}, "edited": false, "score": 1, "creation_date": 1468428574, "post_id": 38356140, "comment_id": 64127195, "body": "Can&#39;t think of a way to cover all cases and possible human errors. You may be finding yourself diving into language recognition algorithms to really be able to always sanitise this kind of texts correctly."}, {"owner": {"reputation": 432, "user_id": 6542561, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/uEiJr.png?s=128&g=1", "display_name": "Bruce David Wilner", "link": "https://stackoverflow.com/users/6542561/bruce-david-wilner"}, "reply_to_user": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 1, "creation_date": 1468429501, "post_id": 38356140, "comment_id": 64127704, "body": "Yes, @theTinMan, and what about oddball endings that drop the final s for the sake of euphony, like &quot;for conscience&#39; sake&quot; or &quot;the phoenix&#39; wings&quot; ?"}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1468431635, "post_id": 38356140, "comment_id": 64129013, "body": "I think this is an XY problem. The situation and need isn&#39;t well defined, and naive solutions being asked for will mangle text in ways that will probably cause more problems downstream."}], "answers": [{"comments": [{"owner": {"reputation": 17608, "user_id": 661624, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/347231f8387561ef324e25b48b96ba16?s=128&d=identicon&r=PG&f=1", "display_name": "Henley Chiu", "link": "https://stackoverflow.com/users/661624/henley-chiu"}, "edited": false, "score": 0, "creation_date": 1468424794, "post_id": 38356208, "comment_id": 64124790, "body": "Thanks, I assume  s.gsub(/( &#39;|&#39; |^&#39;|&#39;$)/, &#39; &#39;) would also work when the quotes are in the beginning/end of the sentence?"}, {"owner": {"reputation": 163714, "user_id": 123527, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/99e0b39c091e10d9c7d4452a34ca52dc?s=128&d=identicon&r=PG", "display_name": "Simone Carletti", "link": "https://stackoverflow.com/users/123527/simone-carletti"}, "reply_to_user": {"reputation": 17608, "user_id": 661624, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/347231f8387561ef324e25b48b96ba16?s=128&d=identicon&r=PG&f=1", "display_name": "Henley Chiu", "link": "https://stackoverflow.com/users/661624/henley-chiu"}, "edited": false, "score": 0, "creation_date": 1468425789, "post_id": 38356208, "comment_id": 64125520, "body": "Depending on what you want to achieve, you may want to use <code>\\A</code> and <code>\\z</code> instead of <code>$</code> and <code>^</code>."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1468427473, "post_id": 38356208, "comment_id": 64126564, "body": "&quot;Chris&#39; car&quot;.gsub(/( &#39;|&#39; )/, &#39; &#39;) #=&gt; &quot;Chris car&quot;."}, {"owner": {"reputation": 163714, "user_id": 123527, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/99e0b39c091e10d9c7d4452a34ca52dc?s=128&d=identicon&r=PG", "display_name": "Simone Carletti", "link": "https://stackoverflow.com/users/123527/simone-carletti"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1468427599, "post_id": 38356208, "comment_id": 64126634, "body": "@CarySwoveland I&#39;m perfectly aware of the possible issues, but as I mentioned there is no perfect solution. It depends on what constraints the user can set. It&#39;s even possible to enhance the regexp to only match opening/closing quotes, where the opening is space|beginning+char and closing is char+space|ending. But I&#39;ll leave that as exercise to the user. ;)"}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1468428088, "post_id": 38356208, "comment_id": 64126909, "body": "The solution is of limited value if it removes something as common as apostrophes used for possessives with words ending in &quot;s&quot;. Also, many words begin with apostrophe&#39;s (&quot;&#39;twas&quot;), with also would be removed. The OP has set the conditions precisely: the character <code>&quot;&#39;&quot;</code> is to removed unless it serves as an apostrophe. Apostrophes are well-defined."}, {"owner": {"reputation": 163714, "user_id": 123527, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/99e0b39c091e10d9c7d4452a34ca52dc?s=128&d=identicon&r=PG", "display_name": "Simone Carletti", "link": "https://stackoverflow.com/users/123527/simone-carletti"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1468428494, "post_id": 38356208, "comment_id": 64127153, "body": "@CarySwoveland feel free to provide a better alternative then."}], "tags": [], "owner": {"reputation": 163714, "user_id": 123527, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/99e0b39c091e10d9c7d4452a34ca52dc?s=128&d=identicon&r=PG", "display_name": "Simone Carletti", "link": "https://stackoverflow.com/users/123527/simone-carletti"}, "is_accepted": false, "score": 7, "last_activity_date": 1468424546, "creation_date": 1468424546, "answer_id": 38356208, "question_id": 38356140, "link": "https://stackoverflow.com/questions/38356140/how-to-remove-single-quotes-from-a-string-leaving-only-the-words/38356208#38356208", "title": "How to remove single quotes from a string, leaving only the words?", "body": "<p>You need to determine what uniquely represents a single quote. For example, it could be:</p>\n\n<ul>\n<li>a quote followed by a space</li>\n<li>a quote preceded by a space</li>\n</ul>\n\n<p>In that case, you can use:</p>\n\n<pre><code>s = \"I'm a very 'dumb' stackoverflow user.\"\ns.gsub(/( '|' )/, ' ')\n# =&gt; \"I'm a very dumb stackoverflow user.\"\n</code></pre>\n\n<p>However, you must ensure that this condition is correct. If it's not, then you need to isolate (and enforce) another condition you can work on.</p>\n"}, {"comments": [{"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 1, "creation_date": 1468427735, "post_id": 38356520, "comment_id": 64126702, "body": "Switching to UTF-8 can cause problems downstream if the text is being rendered or stored in something that doesn&#39;t like UTF-8."}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "reply_to_user": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1468429508, "post_id": 38356520, "comment_id": 64127711, "body": "If in 2016 one is still developing smth that has glitches with utf-8, the problem is way deeper, that single quotes."}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1468431469, "post_id": 38356520, "comment_id": 64128903, "body": "That may be, but in legacy systems we sometimes don&#39;t get a say about it."}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "reply_to_user": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1468433088, "post_id": 38356520, "comment_id": 64129939, "body": "Unfortunately, yes. If this is a case, one might gsub them back to single quotes as the last step."}], "tags": [], "owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "is_accepted": false, "score": 1, "last_activity_date": 1468425746, "last_edit_date": 1468425746, "creation_date": 1468425426, "answer_id": 38356520, "question_id": 38356140, "link": "https://stackoverflow.com/questions/38356140/how-to-remove-single-quotes-from-a-string-leaving-only-the-words/38356520#38356520", "title": "How to remove single quotes from a string, leaving only the words?", "body": "<p>Since you likely want to remove quotes and leave apostrophes intact, I would go with <em>proper utf-8 apostrophes</em>:</p>\n\n<pre><code>\"I'm a very 'dumb' stackoverflow user.\".gsub(/(?&lt;=\\p{L})'(?=\\p{L})/, '\u2019')\n                                       .delete(\"'\")\n#\u21d2 \"I\u2019m a very dumb stackoverflow user.\"\n</code></pre>\n\n<p>What we use here is both positive lookbehind and lookahead: single quotes, having <em>a letter</em> on both sides around it, would be considered being apostrophes.</p>\n\n<p>The other answer would leave a half of quotes in <code>\"He said 'yes', though technically (say, 'literally') he did not want to.\"</code></p>\n"}, {"comments": [{"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1468427795, "post_id": 38357043, "comment_id": 64126738, "body": "What happens with &quot;species&#39; status&quot;?"}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1468428248, "post_id": 38357043, "comment_id": 64126990, "body": "It&#39;s not necessary, or desirable, to tell us you edited something. We can tell when and what was changed if we need to. Also, don&#39;t use &quot;Edit&quot; or &quot;Update&quot; tags to mark changes. Put the changed information into the text as if it was there initially. Again, we can see what changed if we care."}], "tags": [], "owner": {"reputation": 797, "user_id": 1539231, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/ec99536cfd33ab556975e061470cd90a?s=128&d=identicon&r=PG", "display_name": "Pharaz Fadaei", "link": "https://stackoverflow.com/users/1539231/pharaz-fadaei"}, "is_accepted": false, "score": 1, "last_activity_date": 1468428306, "last_edit_date": 1468428306, "creation_date": 1468427069, "answer_id": 38357043, "question_id": 38356140, "link": "https://stackoverflow.com/questions/38356140/how-to-remove-single-quotes-from-a-string-leaving-only-the-words/38357043#38357043", "title": "How to remove single quotes from a string, leaving only the words?", "body": "<p>In case you don't want apostrophes to be replaced(suppose that you're using ASCII), you can simply remove quotes having something non-letter beside them.</p>\n\n<pre><code>\"I'm a very 'dumb' stackoverflow user.\".gsub(/((?&lt;!\\w)'|'(?!\\w))/, '')\n</code></pre>\n\n<p>You can't say for sure that a quote is a apostrophe. There is no accurate rule for detecting them. They can exist at end of a word like in \"I took James' bag!\". But the provided regex can detect them in most cases.</p>\n"}, {"tags": [], "owner": {"reputation": 5730, "user_id": 667987, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8c00249587cb5aa0ceb5765dc811faa7?s=128&d=identicon&r=PG", "display_name": "seph", "link": "https://stackoverflow.com/users/667987/seph"}, "is_accepted": false, "score": 0, "last_activity_date": 1468437234, "creation_date": 1468437234, "answer_id": 38359916, "question_id": 38356140, "link": "https://stackoverflow.com/questions/38356140/how-to-remove-single-quotes-from-a-string-leaving-only-the-words/38359916#38359916", "title": "How to remove single quotes from a string, leaving only the words?", "body": "<p>You might restrict it to apostrophes surrounding a 'word':</p>\n\n<pre><code>\"It's my 'dumb' species' status\".gsub(/'([\\S]+)'/, '\\1')\n =&gt; \"It's my dumb species' status\" \n</code></pre>\n"}], "owner": {"reputation": 17608, "user_id": 661624, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/347231f8387561ef324e25b48b96ba16?s=128&d=identicon&r=PG&f=1", "display_name": "Henley Chiu", "link": "https://stackoverflow.com/users/661624/henley-chiu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2480, "favorite_count": 0, "closed_date": 1468440554, "answer_count": 4, "score": 0, "last_activity_date": 1468437234, "creation_date": 1468424370, "last_edit_date": 1468425697, "question_id": 38356140, "link": "https://stackoverflow.com/questions/38356140/how-to-remove-single-quotes-from-a-string-leaving-only-the-words", "closed_reason": "Needs more focus", "title": "How to remove single quotes from a string, leaving only the words?", "body": "<p>I want to remove single quotes from a string, but not quotes that are apostrophes.</p>\n\n<p>For instance, I want to convert this:</p>\n\n<pre><code>\"I'm a very 'dumb' stackoverflow user.\"\n#=&gt; I'm a very dumb stackoverflow user.\n</code></pre>\n\n<p>So something like <code>string.gsub(\"'\", \"\")</code> \nwon't work as it replaces all single quotes. The <code>'</code> in <code>\"I'm</code> should not be replaced\".</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "routes"], "comments": [{"owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "edited": false, "score": 3, "creation_date": 1468424587, "post_id": 38356066, "comment_id": 64124651, "body": "I suggest to read the <a href=\"http://guides.rubyonrails.org/routing.html#nested-resources\" rel=\"nofollow noreferrer\">Rails Guide about Nested Resources</a>."}, {"owner": {"reputation": 3691, "user_id": 3732906, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/d83d53cbd84d7427ebfd45190b9ded9d?s=128&d=identicon&r=PG&f=1", "display_name": "Coda Chang", "link": "https://stackoverflow.com/users/3732906/coda-chang"}, "reply_to_user": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "edited": false, "score": 0, "creation_date": 1468426608, "post_id": 38356066, "comment_id": 64126020, "body": "Thanks, it&#39;s really useful."}], "answers": [{"comments": [{"owner": {"reputation": 778, "user_id": 1952739, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/338ec1cd4d081f781a966b42fde090d0?s=128&d=identicon&r=PG", "display_name": "unused", "link": "https://stackoverflow.com/users/1952739/unused"}, "edited": false, "score": 0, "creation_date": 1468425504, "post_id": 38356399, "comment_id": 64125318, "body": "I&#39;d always recommend you to stick to the resource routes if you intend to use a route for resource. To limit you can always use only and except, e.g. <code>resources :categories, only: [:show] do #...</code>"}, {"owner": {"reputation": 1281, "user_id": 2308531, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/DV29D.jpg?s=128&g=1", "display_name": "Maxim Fedotov", "link": "https://stackoverflow.com/users/2308531/maxim-fedotov"}, "reply_to_user": {"reputation": 778, "user_id": 1952739, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/338ec1cd4d081f781a966b42fde090d0?s=128&d=identicon&r=PG", "display_name": "unused", "link": "https://stackoverflow.com/users/1952739/unused"}, "edited": false, "score": 0, "creation_date": 1468426053, "post_id": 38356399, "comment_id": 64125691, "body": "I agree, you can also use namespaces if you don&#39;t have an actual resource. Just for organisation sake"}, {"owner": {"reputation": 3691, "user_id": 3732906, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/d83d53cbd84d7427ebfd45190b9ded9d?s=128&d=identicon&r=PG&f=1", "display_name": "Coda Chang", "link": "https://stackoverflow.com/users/3732906/coda-chang"}, "edited": false, "score": 0, "creation_date": 1468426578, "post_id": 38356399, "comment_id": 64125998, "body": "Thank you guys, but I encounter a new problem. I&#39;ve updated my question."}, {"owner": {"reputation": 3691, "user_id": 3732906, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/d83d53cbd84d7427ebfd45190b9ded9d?s=128&d=identicon&r=PG&f=1", "display_name": "Coda Chang", "link": "https://stackoverflow.com/users/3732906/coda-chang"}, "edited": false, "score": 0, "creation_date": 1468427825, "post_id": 38356399, "comment_id": 64126755, "body": "Thanks again, you&#39;ve been a great help!"}], "tags": [], "owner": {"reputation": 1281, "user_id": 2308531, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/DV29D.jpg?s=128&g=1", "display_name": "Maxim Fedotov", "link": "https://stackoverflow.com/users/2308531/maxim-fedotov"}, "is_accepted": true, "score": 2, "last_activity_date": 1468427287, "last_edit_date": 1468427287, "creation_date": 1468425100, "answer_id": 38356399, "question_id": 38356066, "link": "https://stackoverflow.com/questions/38356066/rails-routing-many-to-one/38356399#38356399", "title": "Rails routing many to one", "body": "<p>You should use Nested Routing for this and I recommend using resources, just write:</p>\n\n<pre><code>resources :categories do\n  resources :projects\nend\n</code></pre>\n\n<p>You can read more here <a href=\"http://guides.rubyonrails.org/routing.html#nested-resources\" rel=\"nofollow\">Rails Routing from the Outside In</a></p>\n\n<p>UPDATED:</p>\n\n<p>To correctly link that route, you need to use just the project path <code>&lt;%= link_to \"#{project.name}\", project_path(project) %&gt;</code> </p>\n\n<p>or use category_project_path like <code>&lt;%= link_to \"#{project.name}\", category_project_path(category, project) %&gt;</code></p>\n"}, {"tags": [], "owner": {"reputation": 258, "user_id": 5372350, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-bxH_xBs-r9s/AAAAAAAAAAI/AAAAAAAAABg/UYFtw0nAYW8/photo.jpg?sz=128", "display_name": "Sonu Singh", "link": "https://stackoverflow.com/users/5372350/sonu-singh"}, "is_accepted": false, "score": 2, "last_activity_date": 1468430911, "creation_date": 1468430911, "answer_id": 38358185, "question_id": 38356066, "link": "https://stackoverflow.com/questions/38356066/rails-routing-many-to-one/38358185#38358185", "title": "Rails routing many to one", "body": "<p>As per your requirement in given scenario \nyou have to pass category_id and project_id with path.\nPlease try this.</p>\n\n<pre><code> &lt;% @category.projects.each do |project| %&gt;\n   &lt;%= link_to \"#{project.name}\", category_project_path(@category, project) %&gt;\n &lt;% end %&gt;\n</code></pre>\n\n<p>I hope it would help you.</p>\n"}], "owner": {"reputation": 3691, "user_id": 3732906, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/d83d53cbd84d7427ebfd45190b9ded9d?s=128&d=identicon&r=PG&f=1", "display_name": "Coda Chang", "link": "https://stackoverflow.com/users/3732906/coda-chang"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 92, "favorite_count": 0, "accepted_answer_id": 38356399, "answer_count": 2, "score": 1, "last_activity_date": 1468430911, "creation_date": 1468424140, "last_edit_date": 1468426548, "question_id": 38356066, "link": "https://stackoverflow.com/questions/38356066/rails-routing-many-to-one", "title": "Rails routing many to one", "body": "<p>I thought it's a simple question, but I was just stuck here.</p>\n\n<p>I have two model <code>Category</code> and <code>Project</code>, and <code>Category</code> has many <code>Project</code>.</p>\n\n<p>Then, I thought there would be a route like </p>\n\n<p><a href=\"http://localhost:3000/categories/1872/projects/499\" rel=\"nofollow\">http://localhost:3000/categories/1872/projects/499</a>, the <code>1872</code> will be category' id and <code>499</code> will be project's id. The page would display information of the project.</p>\n\n<p>So, I wrote this in <code>routes.rb</code> </p>\n\n<pre><code>get '/categories/:id/projects/:id', to: 'projects#show', as: 'project'\n</code></pre>\n\n<p>In category's show page, I wrote </p>\n\n<pre><code>&lt;% @category.projects.each do |project| %&gt;\n&lt;h1&gt;\n&lt;%= link_to \"#{project.name}\", project %&gt;\n&lt;/h1&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>But the link I create will be <a href=\"http://localhost:3000/categories/1872/projects/499\" rel=\"nofollow\">http://localhost:3000/categories/499/projects/499</a></p>\n\n<h2>Update</h2>\n\n<p>I've changed routes into </p>\n\n<pre><code>resources :categories, only: [:index, :show]  do\n    resources :projects, only: [:show]\nend\n</code></pre>\n\n<p>But, I don't know how to write <code>link_to</code> path in category's show page.</p>\n\n<p>I wrote this</p>\n\n<pre><code>&lt;% @category.projects.each do |project| %&gt;\n    &lt;%= link_to \"#{project.name}\", category_project_path %&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>But it threw this error</p>\n\n<pre><code>No route matches {:action=&gt;\"show\", :controller=&gt;\"projects\", :id=&gt;\"1982\"} missing required keys: [:category_id] \n</code></pre>\n"}, {"tags": ["arrays", "ruby", "hash"], "comments": [{"owner": {"reputation": 38307, "user_id": 2057388, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ceef8c04f66cd0e2bd360ef6abc14a81?s=128&d=identicon&r=PG", "display_name": "\u0417\u0435\u043b\u0451\u043d\u044b\u0439", "link": "https://stackoverflow.com/users/2057388/%d0%97%d0%b5%d0%bb%d1%91%d0%bd%d1%8b%d0%b9"}, "edited": false, "score": 0, "creation_date": 1468422694, "post_id": 38355513, "comment_id": 64123320, "body": "Please show your efforts."}, {"owner": {"reputation": 9030, "user_id": 5101476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JCQrl.jpg?s=128&g=1", "display_name": "ice\u30c4", "link": "https://stackoverflow.com/users/5101476/ice%e3%83%84"}, "edited": false, "score": 0, "creation_date": 1468445255, "post_id": 38355513, "comment_id": 64136346, "body": "@d_zero my answer definitely works for your original <code>@members</code> hash so like you say it must the changes you made. I can&#39;t really help you at this stage and I cannot recommend you change the OP because that would be unfair on current answers. If you cannot resolve your issues then my only suggestion is to post another question. Good luck."}, {"owner": {"reputation": 21, "user_id": 6217310, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/5ad9fc98cb64407a5e81338e1dfe6312?s=128&d=identicon&r=PG&f=1", "display_name": "d_zero", "link": "https://stackoverflow.com/users/6217310/d-zero"}, "reply_to_user": {"reputation": 9030, "user_id": 5101476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JCQrl.jpg?s=128&g=1", "display_name": "ice\u30c4", "link": "https://stackoverflow.com/users/5101476/ice%e3%83%84"}, "edited": false, "score": 0, "creation_date": 1468445597, "post_id": 38355513, "comment_id": 64136515, "body": "@sagarpandya82 Yeah I deleted my comments about things not working since I realised my mistake. I then realised that somehow I wasn&#39;t actually defining <code>@members</code> so I&#39;ve sorted that now. Thank you for your help."}], "answers": [{"tags": [], "owner": {"reputation": 2572, "user_id": 2862049, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffd65bc37e559c2c407f064f308828a4?s=128&d=identicon&r=PG&f=1", "display_name": "Lukas Baliak", "link": "https://stackoverflow.com/users/2862049/lukas-baliak"}, "is_accepted": false, "score": 0, "last_activity_date": 1468423075, "creation_date": 1468423075, "answer_id": 38355704, "question_id": 38355513, "link": "https://stackoverflow.com/questions/38355513/finding-an-element-in-an-array-inside-a-hash/38355704#38355704", "title": "Finding an element in an array inside a hash", "body": "<p>You can use this itteration with <code>include?</code> method.</p>\n\n<pre><code>@members = {\n  approved: [\"Jill\"],\n  unapproved: [\"Daniel\"],\n  removed: [\"John\"],\n  banned: [\"Daniel\", \"Jane\"]\n}\n\ndef find_member_group(name)\n  @members.each { |group, names| return group if names.include?(name) }\n  nil\nend\n\n@name = 'Jane'\n\ngroup_name = find_member_group(@name)\nputs group_name ? \"#{@name} found in #{group_name}.\" : \"#{@name} not found.\"\n# =&gt; Jane found in banned.\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 9030, "user_id": 5101476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JCQrl.jpg?s=128&g=1", "display_name": "ice\u30c4", "link": "https://stackoverflow.com/users/5101476/ice%e3%83%84"}, "is_accepted": false, "score": 0, "last_activity_date": 1468435827, "last_edit_date": 1468435827, "creation_date": 1468423887, "answer_id": 38355977, "question_id": 38355513, "link": "https://stackoverflow.com/questions/38355513/finding-an-element-in-an-array-inside-a-hash/38355977#38355977", "title": "Finding an element in an array inside a hash", "body": "<p><a href=\"http://ruby-doc.org/core-2.2.3/Hash.html#method-i-select\" rel=\"nofollow\">Hash#select</a> is the method to use here:</p>\n\n<pre><code>def find_member(name)\n  @members.select {|k,v| v.include? name }.keys\nend\n\nfind_member(\"Jill\")   #=&gt; [:approved]\nfind_member(\"Daniel\") #=&gt; [:unapproved, :banned]\nfind_member(\"John\")   #=&gt; [:removed]\nfind_member(\"Jane\")   #=&gt; [:banned]\n</code></pre>\n\n<p><strong>Explanation:</strong></p>\n\n<p><code>select</code> as the name suggests <em>selects</em> and <em>maps</em> only those elements that satisfy the condition in the corresponding code-block. The code-block negates the need for an <code>if</code> statement. Within the code-block we check each <em>key-value pair</em> and if its <em>value</em> <em>includes</em> the <code>name</code> argument, then that <em>key-value pair</em> is selected and mapped to the final output. Finally we're only interested in the memberships (namely the keys), so we apply the <code>keys</code> method to get these in the form of an array.</p>\n"}, {"tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": true, "score": 0, "last_activity_date": 1468454157, "last_edit_date": 1468454157, "creation_date": 1468442289, "answer_id": 38361270, "question_id": 38355513, "link": "https://stackoverflow.com/questions/38355513/finding-an-element-in-an-array-inside-a-hash/38361270#38361270", "title": "Finding an element in an array inside a hash", "body": "<p>The most efficient way to do this is to create a one-to-many mapping of names to keys, and update that mapping only when <code>@members</code> changes.</p>\n\n<pre><code>def find_member(name)\n  update_names_to_keys_if_necessary\n  @member_to_keys[name]\nend\n\ndef update_names_to_keys_if_necessary\n  new_hashcode = @members.hash  \n  return if @old_members.hashcode == new_hashcode\n  @member_to_keys = @members.each_with_object(Hash.new { |h,k| h[k] = [] }) { |(k,v),h|\n    v.each { |name| h[name] &lt;&lt; k } }\n  @old_members_hashcode = new_hashcode\nend\n</code></pre>\n\n<p>Note that <code>@old_members_hashcode</code> evaluates to <code>nil</code> the first time <code>update_names_to_keys_if_necessary</code> is called, so <code>@member_to_keys</code> will be created at that time.</p>\n\n<p>Initially we obtain</p>\n\n<pre><code>@member_to_keys\n  #=&gt; {\"Jill\"=&gt;[:approved], \"Daniel\"=&gt;[:unapproved, :banned],\n  #    \"John\"=&gt;[:removed], \"Jane\"=&gt;[:banned]} \n</code></pre>\n\n<p>Try it.</p>\n\n<pre><code>find_member(\"Jill\")\n  #=&gt; [:approved] \nfind_member(\"Daniel\")\n  #=&gt; [:unapproved, :banned] \nfind_member(\"John\")\n  #=&gt; [:removed] \nfind_member(\"Jane\")\n  #=&gt; [:banned] \nfind_member(\"Billy-Bob\")\n  #=&gt; [] \n</code></pre>\n"}], "owner": {"reputation": 21, "user_id": 6217310, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/5ad9fc98cb64407a5e81338e1dfe6312?s=128&d=identicon&r=PG&f=1", "display_name": "d_zero", "link": "https://stackoverflow.com/users/6217310/d-zero"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 70, "favorite_count": 0, "accepted_answer_id": 38361270, "answer_count": 3, "score": 0, "last_activity_date": 1468454157, "creation_date": 1468422578, "last_edit_date": 1468437754, "question_id": 38355513, "link": "https://stackoverflow.com/questions/38355513/finding-an-element-in-an-array-inside-a-hash", "title": "Finding an element in an array inside a hash", "body": "<pre><code>@members = {\n            approved: [\"Jill\"],\n            unapproved: [\"Daniel\"],\n            removed: [\"John\"],\n            banned: [\"Daniel\", \"Jane\"]\n        }\n</code></pre>\n\n<p>Very simply: making a program to track membership. In the above hash you can see the four membership status keys each with an array containing names.</p>\n\n<p>I'm trying to create a find_member method which allows the user to enter a name and then searches each array for the name and tells the user which key the name was found in.</p>\n\n<p>I'm not very good with hashes and in attempting to do this I've created a mess of loops and I imagine there's a very easy solution, I just haven't found it so far. Is there a really simple way to do this?</p>\n\n<p>I've tried a few things and don't have all my past efforts still, but this is the latest mess I've ended up with, which is probably worse than what I had previously:</p>\n\n<pre><code>def find_member\n  puts \"==Find Member==\"\n  puts \"Name: \"\n  @name = gets.chomp\n  @members.each do |key|\n    key.values.each do |array|\n      array.each do |element|\n        if @name == element\n          puts \"#{@name} found in #{key}\"\n        else\n          puts \"#{@name} not found in #{key}\"\n        end\n      end\n    end\n  end\nend\n</code></pre>\n\n<p>Thanks.</p>\n"}, {"tags": ["ruby"], "answers": [{"comments": [{"owner": {"reputation": 9878, "user_id": 3315785, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/YsMo6.jpg?s=128&g=1", "display_name": "j-dexx", "link": "https://stackoverflow.com/users/3315785/j-dexx"}, "edited": false, "score": 1, "creation_date": 1468422526, "post_id": 38355459, "comment_id": 64123183, "body": "It returns a hash."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 4, "creation_date": 1468425090, "post_id": 38355459, "comment_id": 64125004, "body": "What use is an answer when the author states that it may or may not be correct? Do your research before posting an answer! <code>{}.method(:select).owner #=&gt; Hash</code> tells you that the method is <code>Hash#select</code>. Say your code works because <code>select</code> returns a hash, and give the link to the doc: <a href=\"http://ruby-doc.org/core-2.2.0/Hash.html#method-i-select\" rel=\"nofollow noreferrer\">Hash#select</a>. I suggest you edit."}], "tags": [], "owner": {"reputation": 61, "user_id": 2812308, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0df2fbb0e503d0ec0b1440498cb66217?s=128&d=identicon&r=PG&f=1", "display_name": "bk5115545", "link": "https://stackoverflow.com/users/2812308/bk5115545"}, "is_accepted": false, "score": 0, "last_activity_date": 1468422466, "creation_date": 1468422466, "answer_id": 38355459, "question_id": 38355264, "link": "https://stackoverflow.com/questions/38355264/how-to-reduce-a-ruby-hash-by-a-given-array-of-keys/38355459#38355459", "title": "How to reduce a Ruby hash by a given array of keys?", "body": "<p>You could try something like (inefficient solution below)</p>\n\n<pre><code>original_hash.select{|k,v| wanted_keys.include? k }\n</code></pre>\n\n<p>I'm not entirely up on my Ruby-foo so I'm not sure if this returns a list or a Hash.</p>\n"}, {"tags": [], "owner": {"reputation": 2572, "user_id": 2862049, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffd65bc37e559c2c407f064f308828a4?s=128&d=identicon&r=PG&f=1", "display_name": "Lukas Baliak", "link": "https://stackoverflow.com/users/2862049/lukas-baliak"}, "is_accepted": false, "score": 2, "last_activity_date": 1468425731, "last_edit_date": 1468425731, "creation_date": 1468422581, "answer_id": 38355514, "question_id": 38355264, "link": "https://stackoverflow.com/questions/38355264/how-to-reduce-a-ruby-hash-by-a-given-array-of-keys/38355514#38355514", "title": "How to reduce a Ruby hash by a given array of keys?", "body": "<p>if you dont wanna to iterate whole <code>Hash</code>, you can use <a href=\"http://ruby-doc.org/core-2.3.1/Enumerable.html#method-i-each_with_object\" rel=\"nofollow\">each_with_object</a></p>\n\n<pre><code>original_hash = {one: 1, two: 'too', three: 3}\n\nwanted_keys = [:one, :three]\n\n# iterate only array of keys\nnew_hash = wanted_keys.each_with_object({}) do |key, exp|\n  exp[key] = original_hash[key] if original_hash[key]\nend\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1468428042, "post_id": 38356889, "comment_id": 64126883, "body": "The last two should be preferred because they&#39;re fastest. Like you said, using <code>select</code> and <code>include</code> will slow processing as the hash size, or desired key array, grow."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "reply_to_user": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1468428475, "post_id": 38356889, "comment_id": 64127138, "body": "@theTinMan, thanks for pointing out, &quot;...or desired key array, grow&quot;. I added that."}], "tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": false, "score": 5, "last_activity_date": 1468428418, "last_edit_date": 1468428418, "creation_date": 1468426588, "answer_id": 38356889, "question_id": 38355264, "link": "https://stackoverflow.com/questions/38355264/how-to-reduce-a-ruby-hash-by-a-given-array-of-keys/38356889#38356889", "title": "How to reduce a Ruby hash by a given array of keys?", "body": "<p>If the hash has a very large number of keys and/or the array of wanted keys is very large (improbable as that may be),</p>\n\n<pre><code>original_hash.select { |k, v| wanted_keys.include?(k) }\n</code></pre>\n\n<p>would be relatively inefficient because a linear search of <code>wanted_keys</code> is required for each of <code>original_hash</code>'s keys. Here are two ways to speed things up. (@Lucas' solution is a third way.)</p>\n\n<p><strong>Convert <code>wanted_keys</code> to a set</strong></p>\n\n<pre><code>require 'set'\n\nwanted_keys_set = wanted_keys.to_set\noriginal_hash.select { |k, v| wanted_keys_set.include?(k) }\n  #=&gt; {:one=&gt;1, :three=&gt;3}\n</code></pre>\n\n<p><strong>Match <code>wanted_keys</code> with the values of those keys in <code>original_hash</code> and then convert the resulting array to a hash</strong></p>\n\n<pre><code>wanted_keys.zip(original_hash.values_at(*wanted_keys)).to_h\n  #=&gt; {:one=&gt;1, :three=&gt;3}\n</code></pre>\n\n<p>Prior to Ruby v2.0, when <code>Array#to_h</code> made its debut, this would be written</p>\n\n<pre><code>Hash[wanted_keys.zip(original_hash.values_at(*wanted_keys))]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 17357, "user_id": 794242, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e871d15815cfef926f21737a5ccd30c4?s=128&d=identicon&r=PG", "display_name": "Wand Maker", "link": "https://stackoverflow.com/users/794242/wand-maker"}, "is_accepted": false, "score": 3, "last_activity_date": 1468431097, "creation_date": 1468431097, "answer_id": 38358242, "question_id": 38355264, "link": "https://stackoverflow.com/questions/38355264/how-to-reduce-a-ruby-hash-by-a-given-array-of-keys/38358242#38358242", "title": "How to reduce a Ruby hash by a given array of keys?", "body": "<p>If you happen to be using Rails, you could use <a href=\"http://edgeguides.rubyonrails.org/active_support_core_extensions.html#slicing\" rel=\"nofollow\"><code>Hash#slice</code></a></p>\n\n<pre><code>require \"active_support/core_ext/hash\"\n\noriginal_hash = { one: 1, two: 'too', three: 3 }\nwanted_keys = [:one, :three]\nnew_hash = original_hash.slice *wanted_keys\n#=&gt; {:one=&gt;1, :three=&gt;3}\n</code></pre>\n\n<p>Implementation of <code>Hash#slice</code> method is present in Active support core extensions code <a href=\"https://github.com/rails/rails/blob/master/activesupport/lib/active_support/core_ext/hash/slice.rb\" rel=\"nofollow\">rails/activesupport/lib/active_support/core_ext/hash/slice.rb</a></p>\n"}, {"tags": [], "owner": {"reputation": 61, "user_id": 6529336, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/426a75d201382ec4225b30deb2ccc332?s=128&d=identicon&r=PG", "display_name": "Mykhailo Matrosov", "link": "https://stackoverflow.com/users/6529336/mykhailo-matrosov"}, "is_accepted": false, "score": 4, "last_activity_date": 1585749408, "creation_date": 1585749408, "answer_id": 60972549, "question_id": 38355264, "link": "https://stackoverflow.com/questions/38355264/how-to-reduce-a-ruby-hash-by-a-given-array-of-keys/60972549#60972549", "title": "How to reduce a Ruby hash by a given array of keys?", "body": "<p>this is for your spec passing :)</p>\n\n<p><code>original_hash.slice(*wanted_keys)</code></p>\n"}], "owner": {"reputation": 195223, "user_id": 48523, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/1c787bc735dbe80ec2f88824e1d10c6c?s=128&d=identicon&r=PG", "display_name": "Andrew", "link": "https://stackoverflow.com/users/48523/andrew"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1836, "favorite_count": 1, "answer_count": 5, "score": 2, "last_activity_date": 1585749408, "creation_date": 1468421953, "question_id": 38355264, "link": "https://stackoverflow.com/questions/38355264/how-to-reduce-a-ruby-hash-by-a-given-array-of-keys", "title": "How to reduce a Ruby hash by a given array of keys?", "body": "<p>I'm looking for a simple way to copy/reduce a hash, but only include the keys/values specified in an array of keys.</p>\n\n<pre><code>original_hash = { one: 1, two: 'too', three: 3 }\nwanted_keys = [:one, :three]\nnew_hash = # do something with the hash\nexpect(new_hash).to eq({ one: 1, three: 3 })\n</code></pre>\n"}, {"tags": ["ruby", "rspec"], "comments": [{"owner": {"reputation": 95978, "user_id": 1079354, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/c17dd9cf3e2322be19639e96da9f3eb3?s=128&d=identicon&r=PG", "display_name": "Makoto", "link": "https://stackoverflow.com/users/1079354/makoto"}, "edited": false, "score": 1, "creation_date": 1468421661, "post_id": 38355072, "comment_id": 64122551, "body": "<code>delete_if</code> is mutating the array.  If you want to exclude those results, perhaps look into <code>filter</code>."}], "answers": [{"tags": [], "owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "is_accepted": true, "score": 1, "last_activity_date": 1468422136, "last_edit_date": 1468422136, "creation_date": 1468421667, "answer_id": 38355150, "question_id": 38355072, "link": "https://stackoverflow.com/questions/38355072/all-variables-get-updated-instead-of-just-one-in-ruby-rspec/38355150#38355150", "title": "All variables get updated instead of just one in Ruby/Rspec", "body": "<p>Most things in ruby are passed by reference, not copy. Array is certainly one of such things. So if you don't want it changed, either <code>dup</code> it or don't use destructive methods on it (your <code>delete_if</code> there).</p>\n"}], "owner": {"reputation": 1281, "user_id": 2308531, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/DV29D.jpg?s=128&g=1", "display_name": "Maxim Fedotov", "link": "https://stackoverflow.com/users/2308531/maxim-fedotov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 31, "favorite_count": 0, "accepted_answer_id": 38355150, "answer_count": 1, "score": 0, "last_activity_date": 1468422136, "creation_date": 1468421494, "question_id": 38355072, "link": "https://stackoverflow.com/questions/38355072/all-variables-get-updated-instead-of-just-one-in-ruby-rspec", "title": "All variables get updated instead of just one in Ruby/Rspec", "body": "<p>I've been testing a method I made in a Module in RSpec. When comparing the results I've realised that the variable from the spec that I pass to the method gets updated. Here is the method being tested</p>\n\n<pre><code>def self.location_compact(locations)\n  # Find regions \n  regions = locations.select{|l| l.tag == 'Region'}\n  # Go through region ids and delete locations with that region as a parent (over 5)\n  regions.map(&amp;:id).each do |region_id|\n    if locations.count{|location| location.parent_id == region_id} &gt;= 5\n      locations.delete_if{|l| l.parent_id == region_id}\n    end\n  end\n\n  locations.map(&amp;:name).map {|l| l.split.map(&amp;:capitalize)*' '}.map { |e| \"#{e}\" }\nend\n</code></pre>\n\n<p>And here is the spec: </p>\n\n<pre><code>let (:regions) { Office.where(tag: 'Region').sample(2) }\nlet (:locations) { Office.where(tag: 'MC', parent_id: regions.map(&amp;:id)).sample(9) + regions }\n\ncontext \".location_compact\" do\n  it \"should delete locations that count more than 5 for region\" do\n    result = GIS::GetResponse.location_compact(locations)\n    expect(result).to eq(locations.map(&amp;:name).map {|l| l.split.map(&amp;:capitalize)*' '}.map { |e| \"#{e}\" })\n    expect(result.size).to eq(6)\n  end\nend\n</code></pre>\n\n<p>I want only the <strong>result</strong> to contain the updated array, instead <strong>locations</strong> also gets updated for some reason. I thought that variables in a method are isolated, instead it seems like its updating the memory location itself. Copying locations to another varible updates both of them... Is that I always assumed wrong and that's how Ruby works or am I doing something wrong here?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "email", "ruby-on-rails-4"], "comments": [{"owner": {"reputation": 32451, "user_id": 2516474, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a2179a340c0e84edc285d432211145d?s=128&d=identicon&r=PG", "display_name": "SteveTurczyn", "link": "https://stackoverflow.com/users/2516474/steveturczyn"}, "edited": false, "score": 0, "creation_date": 1468425609, "post_id": 38354966, "comment_id": 64125402, "body": "What do you have in <code>config&#47;environments&#47;development.rb</code> ?  I would&#39;ve expected to see there...   <code>config.action_mailer.delivery_method = :smtp;    config.action_mailer.smtp_settings = {    (settings go here)   }</code>"}, {"owner": {"reputation": 6207, "user_id": 5117953, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/Ca0RW.jpg?s=128&g=1", "display_name": "Vishal", "link": "https://stackoverflow.com/users/5117953/vishal"}, "edited": false, "score": 0, "creation_date": 1468471635, "post_id": 38354966, "comment_id": 64143137, "body": "You dont need to create new file in initializers just add the config details in development.rb"}, {"owner": {"reputation": 47, "user_id": 6579181, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/8d2ca6615942d362d13e5084cea7ee61?s=128&d=identicon&r=PG&f=1", "display_name": "Debasish", "link": "https://stackoverflow.com/users/6579181/debasish"}, "edited": false, "score": 0, "creation_date": 1468478372, "post_id": 38354966, "comment_id": 64145647, "body": "I have tried above answer.......but still now i am facing same issue"}, {"owner": {"reputation": 273, "user_id": 6165160, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/0f16ac1aabf77b83e85e72ecaf6a2805?s=128&d=identicon&r=PG&f=1", "display_name": "Abhradip", "link": "https://stackoverflow.com/users/6165160/abhradip"}, "edited": false, "score": 0, "creation_date": 1483681666, "post_id": 38354966, "comment_id": 70205021, "body": "Please do post something meaningful for the next time. You have just posted your file name and some of the code snippets. Ok,,thats enough?? see, you understand your problem well, not us. So when you are trying to post something,then please do it in a brief manner."}], "answers": [{"comments": [{"owner": {"reputation": 47, "user_id": 6579181, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/8d2ca6615942d362d13e5084cea7ee61?s=128&d=identicon&r=PG&f=1", "display_name": "Debasish", "link": "https://stackoverflow.com/users/6579181/debasish"}, "edited": false, "score": 0, "creation_date": 1468478274, "post_id": 38365629, "comment_id": 64145596, "body": "I have tried above answer.......but still now i am facing same issue ...i am using the port 9292.."}], "tags": [], "owner": {"reputation": 119, "user_id": 5349129, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/dc64aad1850f890acee43c2b9813d869?s=128&d=identicon&r=PG&f=1", "display_name": "Swati Yamgar", "link": "https://stackoverflow.com/users/5349129/swati-yamgar"}, "is_accepted": true, "score": 0, "last_activity_date": 1468471345, "creation_date": 1468471345, "answer_id": 38365629, "question_id": 38354966, "link": "https://stackoverflow.com/questions/38354966/action-mailer-is-not-run-properly-in-rails/38365629#38365629", "title": "Action Mailer is not run properly in rails", "body": "<p>You can add above settings in development.rb as following:</p>\n\n<pre><code>config.action_mailer.default_url_options = { host: 'localhost', port: 3000 }\n\nconfig.action_mailer.delivery_method = :smtp\nconfig.action_mailer.smtp_settings = {\n :address     =&gt;\"smtp.gmail.com\",\n :domain      =&gt;\"gmail.com\",\n :port        =&gt; 587,\n :user_name   =&gt;\"Debasis\",\n :password    =&gt;\"************\",\n :authentication =&gt;\"plain\",\n :enable_starttls_auto =&gt;true\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2227, "user_id": 4723393, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/c0ZUW.jpg?s=128&g=1", "display_name": "Akshay Borade", "link": "https://stackoverflow.com/users/4723393/akshay-borade"}, "is_accepted": false, "score": 1, "last_activity_date": 1468475200, "creation_date": 1468475200, "answer_id": 38366347, "question_id": 38354966, "link": "https://stackoverflow.com/questions/38354966/action-mailer-is-not-run-properly-in-rails/38366347#38366347", "title": "Action Mailer is not run properly in rails", "body": "<p>Here, Your <strong>initializer\\setup_mail.rb</strong> setting will go to the <strong>development.rb</strong> </p>\n\n<pre><code>config.action_mailer.default_url_options = { host: 'localhost', port: 3000 }\n\nconfig.action_mailer.delivery_method = :smtp\nconfig.action_mailer.smtp_settings = {\n :address     =&gt;\"smtp.gmail.com\",\n :domain      =&gt;\"gmail.com\",\n :port        =&gt; 587,\n :user_name   =&gt;\"Debasis\",\n :password    =&gt;\"************\",\n :authentication =&gt;\"plain\",\n :enable_starttls_auto =&gt;true\n}\n</code></pre>\n\n<p>and I think you need to use <code>deliver_now</code> instead of <code>deliver</code> in your <strong>users.controller</strong> \nTry to replace this line </p>\n\n<pre><code>UserMailer.registration_confirmation(@user).deliver\n</code></pre>\n\n<p>with </p>\n\n<pre><code>UserMailer.registration_confirmation(@user).deliver_now\n</code></pre>\n\n<p>Hope this will work for you. Thanks!</p>\n"}], "owner": {"reputation": 47, "user_id": 6579181, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/8d2ca6615942d362d13e5084cea7ee61?s=128&d=identicon&r=PG&f=1", "display_name": "Debasish", "link": "https://stackoverflow.com/users/6579181/debasish"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 119, "favorite_count": 0, "accepted_answer_id": 38365629, "answer_count": 2, "score": 0, "last_activity_date": 1468478480, "creation_date": 1468421234, "last_edit_date": 1468478480, "question_id": 38354966, "link": "https://stackoverflow.com/questions/38354966/action-mailer-is-not-run-properly-in-rails", "title": "Action Mailer is not run properly in rails", "body": "<p>I am trying implementing send mail through action mailer in rails\nrelated code are..</p>\n\n<p><strong>initializer\\setup_mail.rb</strong></p>\n\n<pre><code>  ActionMailer::Base.smtp_settings = {\n    :address     =&gt;\"smtp.gmail.com\",\n    :domain      =&gt;\"gmail.com\",\n    :port        =&gt; 587,\n    :user_name   =&gt;\"Debasis\",\n    :password    =&gt;\"************\",\n    :authentication =&gt;\"plain\",\n    :enable_starttls_auto =&gt;true\n  }\n</code></pre>\n\n<p><strong>my mailers/user_mailer.rb</strong></p>\n\n<pre><code>class UserMailer &lt; ActionMailer::Base\n  default :from =&gt; \"bkdebasish90@gamil.com\"\n  def registration_confirmation(user)\n    mail(:to=&gt;user.email, :subject =&gt;\"Registered\")\n  end\nend\n</code></pre>\n\n<p><strong>and users.controller is</strong></p>\n\n<pre><code>def create\n  @user = User.new(user_params)\n  respond_to do |format| \n    if @user.save\n      UserMailer.registration_confirmation(@user).deliver\n      format.html { redirect_to @user, notice: 'User was successfully created.' }\n      format.json { render :show, status: :created, location: @user }\n    else\n      format.html { render :new }\n      format.json { render json: @user.errors, status: :unprocessable_entity }\n    end\n  end\nend  \n</code></pre>\n\n<p>my devlopment log is --</p>\n\n<pre><code>    UserMailer#registration_confirmation: processed outbound mail in 306.0ms\n\n     Sent mail to debasish.svin@gmail.com (2924.2ms)\n     Date: Wed, 13 Jul 2016 19:02:43 +0530\n      From: bkdebasish90@gamil.com\n       To: debasish.svin@gmail.com\n      Message-ID: &lt;578642fb9cf1a_1b085217834727ad@debashis-PC.mail&gt;\n      Subject: Registered\n     Mime-Version: 1.0\n    Content-Type: text/plain;\n    charset=UTF-8\n      Content-Transfer-Encoding: 7bit\n\n       Hi sir you signed in ....completed\n     Redirected to http://localhost:9292/users/18\n      Completed 302 Found in 3356ms (ActiveRecord: 86.0ms)\n</code></pre>\n\n<p>and i see all are work fine.. but email is not come </p>\n"}, {"tags": ["ruby", "forms", "ruby-on-rails-5", "rails-models"], "answers": [{"tags": [], "owner": {"reputation": 906, "user_id": 2901457, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/nxFaL.jpg?s=128&g=1", "display_name": "s_dolan", "link": "https://stackoverflow.com/users/2901457/s-dolan"}, "is_accepted": false, "score": 0, "last_activity_date": 1468422525, "creation_date": 1468422525, "answer_id": 38355498, "question_id": 38354918, "link": "https://stackoverflow.com/questions/38354918/skip-has-many-through-model-creation-on-no-change/38355498#38355498", "title": "Skip has_many :through Model Creation on No Change", "body": "<p>It turns out that you can actually use any method as a <code>Symbol</code> argument the to <code>accepts_nested_attributes_for</code> <code>reject_if</code> option.</p>\n\n<p>I updated my <code>User</code> model as follows, and now the behavior is exactly what I want:</p>\n\n<pre><code>class User &lt; ApplicationRecord\n  has_many :user_positions\n  has_many :positions, through: :user_positions\n\n  accepts_nested_attributes_for :user_positions,\n    reject_if: :same_as_previous_position\n\n  def same_as_previous_position(attributes)\n    if self.user_positions.empty?\n      return false\n    end\n\n    Position.find(attributes[:position_id]) == self.user_positions.order(created_at: :desc).first.position\n  end\nend\n</code></pre>\n"}], "owner": {"reputation": 906, "user_id": 2901457, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/nxFaL.jpg?s=128&g=1", "display_name": "s_dolan", "link": "https://stackoverflow.com/users/2901457/s-dolan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 19, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1468422525, "creation_date": 1468421102, "last_edit_date": 1468421857, "question_id": 38354918, "link": "https://stackoverflow.com/questions/38354918/skip-has-many-through-model-creation-on-no-change", "title": "Skip has_many :through Model Creation on No Change", "body": "<p>This could be the wrong way to go about this entirely, and I'm very open to alternatives.</p>\n\n<p>I've got the following models, where <code>Users</code> can have many <code>Positions</code>:</p>\n\n<pre><code>class User &lt; ApplicationRecord\n  has_many :user_positions\n  has_many :positions, through: :user_positions\n\n  accepts_nested_attributes_for :user_positions,\n    reject_if: :all_blank\nend\n\nclass UserPosition &lt; ApplicationRecord\n  belongs_to :user\n  belongs_to :position\nend\n\nclass Position &lt; ApplicationRecord\nend\n</code></pre>\n\n<p>On my edit user form, I'd like to allow a <code>User</code>'s current position to be updated. I do that in the following way:</p>\n\n<pre><code>&lt;%= form_for @user do |f| %&gt;\n  &lt;%= f.label :name %&gt;\n  &lt;%= f.text_field :name %&gt;\n\n  &lt;%= f.fields_for :user_positions, @user.user_positions.order(created_at: :desc).first do |ff| %&gt;\n    &lt;%= ff.hidden_field :user_id, value: @user.id %&gt;\n    &lt;%= ff.collection_select :position_id, Position.all, :id, :label %&gt;\n  &lt;% end %&gt;\n\n  &lt;%= f.submit \"Update User\" %&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>The issue I'm running into is that a new instance of <code>UserPosition</code> is being created every time I submit the form, even if the <code>Position</code> that's selected hasn't changed. This leads to a bunch of duplicate entries in the join table, when I really only care about \"promotions\" or \"demotions\" when the value of <code>position_id</code> has changed.</p>\n\n<p>I don't want to add a custom validator to disallow the creation, because I still want the form to be able to submit with an unchanged position. An example of this is when I only want to change the <code>User</code>'s name.</p>\n\n<p>Any advice on how to deal with this use case?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "json", "rendering"], "answers": [{"comments": [{"owner": {"reputation": 7, "user_id": 4967535, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/b2ce03e0d44575898a77e53c5efaa4ad?s=128&d=identicon&r=PG&f=1", "display_name": "Khiem Nguyen", "link": "https://stackoverflow.com/users/4967535/khiem-nguyen"}, "edited": false, "score": 0, "creation_date": 1469020889, "post_id": 38357341, "comment_id": 64367088, "body": "Yep :D. Marked it down"}], "tags": [], "owner": {"reputation": 507, "user_id": 1262164, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/603992781533eb1746d44fb50d5d13b1?s=128&d=identicon&r=PG", "display_name": "Ahmed Fathy", "link": "https://stackoverflow.com/users/1262164/ahmed-fathy"}, "is_accepted": true, "score": 0, "last_activity_date": 1468428665, "last_edit_date": 1468428665, "creation_date": 1468428074, "answer_id": 38357341, "question_id": 38354832, "link": "https://stackoverflow.com/questions/38354832/adding-default-field-such-as-timestamp-to-json-when-rendering-in-rails/38357341#38357341", "title": "Adding default field such as timestamp to json when rendering in rails", "body": "<p>Just like html, you can have a layout for JSON responses.</p>\n\n<p>Create a file app/views/layouts/application.json.jbuilder\nand fill it with this:</p>\n\n<pre><code>    json.merge! JSON.parse(yield)\n    json.time_stamp Time.now.to_i\n</code></pre>\n\n<p>Note that you need to make sure you always return a JSON Object and not an Array.</p>\n"}], "owner": {"reputation": 7, "user_id": 4967535, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/b2ce03e0d44575898a77e53c5efaa4ad?s=128&d=identicon&r=PG&f=1", "display_name": "Khiem Nguyen", "link": "https://stackoverflow.com/users/4967535/khiem-nguyen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 91, "favorite_count": 0, "accepted_answer_id": 38357341, "answer_count": 1, "score": 0, "last_activity_date": 1468428665, "creation_date": 1468420904, "question_id": 38354832, "link": "https://stackoverflow.com/questions/38354832/adding-default-field-such-as-timestamp-to-json-when-rendering-in-rails", "title": "Adding default field such as timestamp to json when rendering in rails", "body": "<p>I am newbie in Ruby on rails and want to config render :json, always adds an extra field such as timestamp or version at the end of json response. Like this</p>\n\n<pre><code>    {\n         //json data\n         \"time_stamp\" : 24312512341235\n    }\n</code></pre>\n\n<p>I think it might have better way to do that than adding parameter everytime calling render json\nThanks for helping</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 12705, "user_id": 483040, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Ux8AH.jpg?s=128&g=1", "display_name": "jaydel", "link": "https://stackoverflow.com/users/483040/jaydel"}, "edited": false, "score": 0, "creation_date": 1468422833, "post_id": 38354783, "comment_id": 64123412, "body": "will this mess with your member resource routes? meaning that the random number might be interpreted by rails routes as the resource id and that will likely fail?"}], "answers": [{"tags": [], "owner": {"reputation": 72, "user_id": 2312053, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/QvtRI.jpg?s=128&g=1", "display_name": "Daniel B", "link": "https://stackoverflow.com/users/2312053/daniel-b"}, "is_accepted": false, "score": 0, "last_activity_date": 1468421009, "creation_date": 1468421009, "answer_id": 38354877, "question_id": 38354783, "link": "https://stackoverflow.com/questions/38354783/rails-adding-random-numbers-at-the-end-of-a-url/38354877#38354877", "title": "Rails - Adding random numbers at the end of a URL", "body": "<p>It should work if you change this line. </p>\n\n<pre><code>format.html { redirect_to 'https://www.uvestymeetings.com/' + rand(1..1000).to_s, notice: \"Thanks for meeting!\" }\n</code></pre>\n\n<p>You dont need to use the ruby tags (<code>&lt;%= %&gt;</code>) in an <code>.rb</code> file.</p>\n\n<p>Doing this will generate a link as such:\n<code>https://www.uvestymeetings.com/580</code></p>\n"}, {"tags": [], "owner": {"reputation": 725, "user_id": 1755526, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QWC5g.png?s=128&g=1", "display_name": "Johnny D\u01b0\u01a1ng", "link": "https://stackoverflow.com/users/1755526/johnny-d%c6%b0%c6%a1ng"}, "is_accepted": false, "score": 0, "last_activity_date": 1468422475, "creation_date": 1468422475, "answer_id": 38355462, "question_id": 38354783, "link": "https://stackoverflow.com/questions/38354783/rails-adding-random-numbers-at-the-end-of-a-url/38355462#38355462", "title": "Rails - Adding random numbers at the end of a URL", "body": "<p>code should be</p>\n\n<pre><code>respond_to do |format|\n  if @meeting.save\n    format.html { redirect_to \"https://www.uvestymeetings.com/#{rand(1...1000)}\", notice: \"Thanks for meeting!\" }\n    format.json { render action: 'show', status: :created, location: @meeting }\n  else\n   format.html { render action: 'new' }\n   format.json { render json: @meeting.errors, status: :unprocessable_entity }\n  end\nend\n</code></pre>\n\n<p>Remember that</p>\n\n<ul>\n<li><strong>rand(1..1000)</strong> generate random numbers from 2 ->1000</li>\n<li><strong>rand(1...1000</strong>) generate random numbers from 1 -> 1000</li>\n</ul>\n"}], "owner": {"reputation": 622, "user_id": 5279783, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/22c1cf8adcf189149e03f48a25a43e5f?s=128&d=identicon&r=PG&f=1", "display_name": "Raidspec", "link": "https://stackoverflow.com/users/5279783/raidspec"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 471, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1582088494, "creation_date": 1468420763, "question_id": 38354783, "link": "https://stackoverflow.com/questions/38354783/rails-adding-random-numbers-at-the-end-of-a-url", "title": "Rails - Adding random numbers at the end of a URL", "body": "<p>I have this line to send a user to a specific page (www.uvestymeetings.com/) and I'm trying to have it generate a random number after the .com/ whenever a user submits. I'm thinking anywhere between 1-1000 is fine for now. </p>\n\n<p>I know the random number on rails is : <code>&lt;%= rand(5..30) %&gt;</code>, but i'm not sure how to put it into this situation. </p>\n\n<p>From controller: </p>\n\n<pre><code>respond_to do |format|\n  if @meeting.save\n    format.html { redirect_to 'https://www.uvestymeetings.com/', notice: \"Thanks for meeting!\" }\n    format.json { render action: 'show', status: :created, location: @meeting }\n  else\n    format.html { render action: 'new' }\n    format.json { render json: @meeting.errors, status: :unprocessable_entity }\n  end\nend\n</code></pre>\n\n<p>end</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "rvm", "bundler"], "comments": [{"owner": {"reputation": 91121, "user_id": 179125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5594142dcc49a24b1902ec8059181f8d?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan Running", "link": "https://stackoverflow.com/users/179125/jordan-running"}, "edited": false, "score": 0, "creation_date": 1468421391, "post_id": 38354544, "comment_id": 64122315, "body": "Are you using Bundler? If not, can you add Bundler to the project? That would solve this problem tidily."}, {"owner": {"reputation": 6076, "user_id": 4044009, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/42e57031eb7d02c47c9afaecfc878638?s=128&d=identicon&r=PG&f=1", "display_name": "Neil", "link": "https://stackoverflow.com/users/4044009/neil"}, "reply_to_user": {"reputation": 91121, "user_id": 179125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5594142dcc49a24b1902ec8059181f8d?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan Running", "link": "https://stackoverflow.com/users/179125/jordan-running"}, "edited": false, "score": 0, "creation_date": 1468421481, "post_id": 38354544, "comment_id": 64122395, "body": "@Jordan I am using Bundler. Do I need to be sure I run <code>bundle</code> every time I <code>cd</code> into this app?  Or: just the first time in order to generate the <code>Gemfile.lock</code> and then I no longer need to do it?"}, {"owner": {"reputation": 91121, "user_id": 179125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5594142dcc49a24b1902ec8059181f8d?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan Running", "link": "https://stackoverflow.com/users/179125/jordan-running"}, "edited": false, "score": 1, "creation_date": 1468421787, "post_id": 38354544, "comment_id": 64122643, "body": "You only have to run <code>bundle</code> once, unless you switch to a different Ruby version (and even then, if you switch <i>back</i>, you don&#39;t have to run <code>bundle</code> again). I don&#39;t think you need to bother with gemsets if you&#39;re using Bundler. As long as you use <code>bundle exec</code>, it will use the version of Rails installed by Bundler (i.e. the one in your Gemfile). Here&#39;s some more information on using Bundler with RVM: <a href=\"https://rvm.io/integration/bundler\" rel=\"nofollow noreferrer\">rvm.io/integration/bundler</a>"}, {"owner": {"reputation": 91121, "user_id": 179125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5594142dcc49a24b1902ec8059181f8d?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan Running", "link": "https://stackoverflow.com/users/179125/jordan-running"}, "edited": false, "score": 0, "creation_date": 1468421909, "post_id": 38354544, "comment_id": 64122732, "body": "P.S. I don&#39;t know if Rails 2.1 has this command, but the <a href=\"http://guides.rubyonrails.org/v2.3.11/command_line.html\" rel=\"nofollow noreferrer\">Rails 2.3 command line guide mentions <code>.&#47;script&#47;about</code></a>, which will print, among other things, the current Ruby and Rails versions. Try <code>bundle exec .&#47;script&#47;about</code> and see what happens."}, {"owner": {"reputation": 12705, "user_id": 483040, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Ux8AH.jpg?s=128&g=1", "display_name": "jaydel", "link": "https://stackoverflow.com/users/483040/jaydel"}, "edited": false, "score": 0, "creation_date": 1468424993, "post_id": 38354544, "comment_id": 64124942, "body": "if you have .ruby-version and .ruby-gemset set up correctly simply cd&#39;ing into the project directory will put those things in play..."}], "answers": [{"comments": [{"owner": {"reputation": 6076, "user_id": 4044009, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/42e57031eb7d02c47c9afaecfc878638?s=128&d=identicon&r=PG&f=1", "display_name": "Neil", "link": "https://stackoverflow.com/users/4044009/neil"}, "edited": false, "score": 0, "creation_date": 1468420956, "post_id": 38354655, "comment_id": 64121996, "body": "My question above might not be clear.  I am not concerned with the ruby version.  I am concerned about the rails version."}, {"owner": {"reputation": 12705, "user_id": 483040, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Ux8AH.jpg?s=128&g=1", "display_name": "jaydel", "link": "https://stackoverflow.com/users/483040/jaydel"}, "edited": false, "score": 0, "creation_date": 1468425031, "post_id": 38354655, "comment_id": 64124963, "body": "rails gem version should be called out in Gemfile. If it is then your rvm set up with the .ruby-version and .ruby-gemset files set up correctly will do what you want."}], "tags": [], "owner": {"reputation": 71, "user_id": 5842117, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d627fabbf3f8ec0719567bbb014f469c?s=128&d=identicon&r=PG&f=1", "display_name": "Stanimir Dimitrov", "link": "https://stackoverflow.com/users/5842117/stanimir-dimitrov"}, "is_accepted": false, "score": 0, "last_activity_date": 1468420472, "creation_date": 1468420472, "answer_id": 38354655, "question_id": 38354544, "link": "https://stackoverflow.com/questions/38354544/rvm-switching-rails-versions/38354655#38354655", "title": "RVM switching Rails Versions", "body": "<p>You can create a <code>.ruby-version</code> file in your project's folder and RVM will automatically switch to the correct Ruby. Something like this:</p>\n\n<pre><code>$ echo '2.1.1' &gt; .ruby-version\n</code></pre>\n\n<p>You just need to make sure you have that version installed, eg.:</p>\n\n<pre><code>$ rvm install ruby-2.1.1\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 258, "user_id": 5372350, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-bxH_xBs-r9s/AAAAAAAAAAI/AAAAAAAAABg/UYFtw0nAYW8/photo.jpg?sz=128", "display_name": "Sonu Singh", "link": "https://stackoverflow.com/users/5372350/sonu-singh"}, "is_accepted": false, "score": 1, "last_activity_date": 1468432267, "creation_date": 1468432267, "answer_id": 38358566, "question_id": 38354544, "link": "https://stackoverflow.com/questions/38354544/rvm-switching-rails-versions/38358566#38358566", "title": "RVM switching Rails Versions", "body": "<p>You can also create rvmrc file into your project directory then it will switch rvm automatically</p>\n\n<p>Please follow the process to create rvmrc file.</p>\n\n<p>Go to project directory</p>\n\n<pre><code> rvm use 2.2.1@rails_2_1_1\n\n rvm --rvmrc --create 2.2.1@rails_2_1_1\n</code></pre>\n\n<p>I think it would help you.</p>\n"}, {"tags": [], "owner": {"reputation": 744, "user_id": 458758, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fea31b1c45361c5a34c7d2e2bbb2a9ab?s=128&d=identicon&r=PG", "display_name": "yeasayer", "link": "https://stackoverflow.com/users/458758/yeasayer"}, "is_accepted": false, "score": 0, "last_activity_date": 1469032775, "creation_date": 1469032775, "answer_id": 38486177, "question_id": 38354544, "link": "https://stackoverflow.com/questions/38354544/rvm-switching-rails-versions/38486177#38486177", "title": "RVM switching Rails Versions", "body": "<p>First of all, I recommend against using <code>.ruby-gemset</code> file, because <code>Gemfile</code> already has everything you'll need. <code>.ruby-version</code> is obsolete too, because Ruby version can be specified inside <code>Gemfile</code> as well:</p>\n\n<pre><code>source 'https://rubygems.org'\n\nruby '2.3.1'\n\ngem 'rails', '~&gt; 4.2.7'\n...\n</code></pre>\n\n<p>Now about Rails versions. As long as you run commands with <code>bundle exec</code>, these commands' versions will be exactly as stated in <code>Gemfile</code>. </p>\n\n<p>There are also <code>binstubs</code> scripts inside projects <code>bin/</code> folder. They're the most preferable way to run commands, because they're usually tweaked for project needs (for example running <code>spring</code> along with your command) and they ultimately run <code>bundle exec</code> anyways.</p>\n\n<p>So the proper way to do things, is to run <code>./bin/rails</code>, which can be tedious. That's why I recommend using helpers. For example, <a href=\"http://ohmyz.sh/\" rel=\"nofollow\">oh-my-zsh</a> project has out-of-the-box <code>rails</code> plugin. First  few lines (read below for explanation):</p>\n\n<pre><code>function _rails_command () {\n  if [ -e \"bin/rails\" ]; then\n    bin/rails $@\n  elif [ -e \"script/rails\" ]; then\n    ruby script/rails $@\n  elif [ -e \"script/server\" ]; then\n    ruby script/$@\n  else\n    command rails $@\n  fi\n}\n\nfunction _rake_command () {\n  if [ -e \"bin/rake\" ]; then\n    bin/rake $@\n  elif type bundle &amp;&gt; /dev/null &amp;&amp; [ -e \"Gemfile\" ]; then\n    bundle exec rake $@\n  else\n    command rake $@\n  fi\n}\n\nalias rails='_rails_command'\ncompdef _rails_command=rails\n\nalias rake='_rake_command'\ncompdef _rake_command=rake\n</code></pre>\n\n<p>When you run <code>rails</code>, this script checks if <code>bin/rails</code> exists (Rails 5 and 4 default) and runs it instead. If not, script checks for <code>script/rails</code> (Rails 3 default) and <code>script/server</code> (Rails 2 default). So basically you have all versions covered. Same is for <code>rake</code>. </p>\n\n<p>With this plugin you never need to worry about extra commands. Always simply run <code>rails</code>. You just install it once and forget about it.</p>\n"}, {"tags": [], "owner": {"reputation": 1586, "user_id": 1257980, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/20ml2.png?s=128&g=1", "display_name": "Eric Wanchic", "link": "https://stackoverflow.com/users/1257980/eric-wanchic"}, "is_accepted": true, "score": 3, "last_activity_date": 1469037994, "creation_date": 1469037994, "answer_id": 38487767, "question_id": 38354544, "link": "https://stackoverflow.com/questions/38354544/rvm-switching-rails-versions/38487767#38487767", "title": "RVM switching Rails Versions", "body": "<p>That's not a problem with RVM and Rails. Using the Gemfile is the best way to do this, IMHO! In your Gemfile, you can specify which ruby and which gemset within that ruby to use.</p>\n\n<h2>Set Default Ruby/Gemset --for system</h2>\n\n<p>First, lets establish that <strong>default</strong> ruby for the system on <code>5.0.0</code>. This will allow any new/existing Rails projects to default to this ruby version (except for those projects that override with the Gemfile):</p>\n\n<pre><code>rvm use --default 5.0.0\n</code></pre>\n\n<p>..and of course, if you want it fixed to a specified gemset:</p>\n\n<pre><code>rvm use --default 5.0.0@my_default_gemset\n</code></pre>\n\n<h2>Set Default Ruby/Gemset --for Rails specific App on Gemfile</h2>\n\n<h3>Example 1</h3>\n\n<p>If you want to setup your rails app to utilize the RVM gemset <code>2.2.1@rails_2_1_1</code>, similar to the RVM command below...</p>\n\n<pre><code>rvm use 2.2.1@rails_2_1_1\n</code></pre>\n\n<p>In your Gemfile, specify right below the <code>source</code> line the following two commented lines:</p>\n\n<pre><code>source 'https://rubygems.org'\n#ruby=2.2.1\n#ruby-gemset=rails_2_1_1\n</code></pre>\n\n<p>Now, when you <code>cd</code> into your rails' app directory, you should receive the following message, or similiar:</p>\n\n<pre><code>RVM used your Gemfile for selecting Ruby, it is all fine - Heroku does \nthat too, you can ignore these warnings with 'rvm rvmrc warning ignore \n/my/rails/app/path/Gemfile'.\n\nTo ignore the warning for all files run 'rvm rvmrc warning ignore\nallGemfiles'.\n</code></pre>\n\n<p>You can double check your results:</p>\n\n<pre><code>rvm list gemsets\n\n   ruby-2.2.1 [ x86_64 ]\n   ruby-2.2.1@global [ x86_64 ]\n=&gt; ruby-2.2.1@rails_2_1_1 [ x86_64 ]\n   ruby-5.0.0 [ x86_64 ]\n   ruby-5.0.0@global [ x86_64 ]\n</code></pre>\n\n<h3>Example 2</h3>\n\n<p>Another example using <code>ruby-2.0.0-p247@rails-4.0.0</code>, example RVM command...</p>\n\n<pre><code>rvm use ruby-2.0.0-p247@rails-4.0.0\n</code></pre>\n\n<p>In your Gemfile, specify:</p>\n\n<pre><code>#ruby=2.0.0-p247\n#ruby-gemset=rails-4.0.0\n</code></pre>\n"}], "owner": {"reputation": 6076, "user_id": 4044009, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/42e57031eb7d02c47c9afaecfc878638?s=128&d=identicon&r=PG&f=1", "display_name": "Neil", "link": "https://stackoverflow.com/users/4044009/neil"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4064, "favorite_count": 0, "accepted_answer_id": 38487767, "answer_count": 4, "score": 3, "last_activity_date": 1469037994, "creation_date": 1468420192, "last_edit_date": 1468425211, "question_id": 38354544, "link": "https://stackoverflow.com/questions/38354544/rvm-switching-rails-versions", "title": "RVM switching Rails Versions", "body": "<p>The situation is that my default gemset on my computer points to <code>rails 5.0.0</code>.  However: I have an app that uses a really old rails version. Lets say for this example the app uses: <code>rails 2.1.1</code>.  </p>\n\n<p>Does my machine automatically switch to <code>rails 2.1.1</code> when <code>cd'ed</code> into this app because <code>rails 2.1.1</code> is specified in the <code>Gemfile</code>?  Or: do I need to <strong><em>explicitly</em></strong> create a gemset in order for my app and my machine to do things the \"rails 2.1.1 way\" (as opposed to doing stuff the \"rails 5.0.0 way which is the rails version in my default gemset)?  </p>\n\n<p>My concern is that perhaps if my machine thinks I am using <code>rails 5.0.0</code> instead of <code>rails 2.1.1</code> while developing inside the app: then rails commands such as generators might create files and do stuff \"the rails 5.0.0 way\" as opposed to the \"rails 2.1.1\" way.</p>\n\n<p>Hopefully this makes sense.  Here is what I would do in order to \"explicitly\" state via a Gemset that this app uses <code>rails 2.1.1</code></p>\n\n<p><strong>Example:</strong></p>\n\n<p>I create a gemset that is to be specified for any app that uses <code>rails 2.1.1</code></p>\n\n<pre><code>rvm gemset create rails_2_1_1\n</code></pre>\n\n<p>I specify the ruby version to use on this gemset</p>\n\n<pre><code>rvm use 2.2.1@rails_2_1_1\n</code></pre>\n\n<p>I then install that old version of rails onto this gemset:</p>\n\n<pre><code>gem install rails --version=2.1.1\n</code></pre>\n\n<p>Now this gemset uses <code>rails 2.1.1</code>.</p>\n\n<p>Now at the root of my app I specify a <code>.ruby-gemset</code> file that tells rails: \"Make sure you are doing stuff the <code>rails 2.1.1</code> way and not the <code>rails 5.0.0</code> way:</p>\n\n<pre><code>#.ruby-gemset\nrails_2_1_1\n</code></pre>\n\n<p>I want to be sure that if another rails version is specified in an app's Gemfile than is in my default gemset: then developing within that app will do everything within the context of the rails version specified in the Gemfile as opposed to the rails version in the default gemset. </p>\n"}, {"tags": ["ruby", "rspec", "puppet", "rspec-puppet"], "comments": [{"owner": {"reputation": 12661, "user_id": 5343387, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/15a14cec3014822297a08ed6dfae2563?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Schuchard", "link": "https://stackoverflow.com/users/5343387/matt-schuchard"}, "edited": false, "score": 0, "creation_date": 1468422138, "post_id": 38354411, "comment_id": 64122901, "body": "The params symbol is actually for class parameters and not a params manifest. My first reaction to your question was no, and a cursory glance at some more advanced rpsec-puppet stuff I have done also seems to indicate no. Puppet 3.7.x is EOL and <code>params.pp</code> use has been deprecated for a while. Have you considered updating, or is this one of those legacy code headache things?"}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "reply_to_user": {"reputation": 12661, "user_id": 5343387, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/15a14cec3014822297a08ed6dfae2563?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Schuchard", "link": "https://stackoverflow.com/users/5343387/matt-schuchard"}, "edited": false, "score": 0, "creation_date": 1468424484, "post_id": 38354411, "comment_id": 64124585, "body": "@MattSchuchard, I don&#39;t follow.  If you write a params class, say <code>mymodule::params</code>, what would <i>you</i> name the manifest in which its definition is stored?"}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1468425077, "post_id": 38354411, "comment_id": 64124996, "body": "Additionally, there are still many modules around that use the params class pattern, and the Puppet language guide has <a href=\"https://docs.puppet.com/puppet/latest/reference/lang_classes.html#inheritance\" rel=\"nofollow noreferrer\">a specific discussion of it</a>.  I don&#39;t see any basis to claim that it is deprecated, nor even falling out of favor.  Indeed, although Puppet, Inc. could deprecate class inheritance, on which the pattern relies, it does not have the power to deprecate the pattern itself."}, {"owner": {"reputation": 12661, "user_id": 5343387, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/15a14cec3014822297a08ed6dfae2563?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Schuchard", "link": "https://stackoverflow.com/users/5343387/matt-schuchard"}, "reply_to_user": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1468428824, "post_id": 38354411, "comment_id": 64127320, "body": "@JohnBollinger Puppet has told us more than once and in their official guides supplied to us that inheritance and <code>params.pp</code> are to be absolutely avoided since late 3.x. I probably should have said &#39;extremely discouraged&#39; instead of deprecated. Now with 4.x you are supposed to use the module data with Puppet data provider (hence why RIPienaar no longer supports his gem to do module data)."}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "reply_to_user": {"reputation": 12661, "user_id": 5343387, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/15a14cec3014822297a08ed6dfae2563?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Schuchard", "link": "https://stackoverflow.com/users/5343387/matt-schuchard"}, "edited": false, "score": 0, "creation_date": 1468430014, "post_id": 38354411, "comment_id": 64128052, "body": "@MattSchuchard, evidently Puppet is sending mixed messages, then.  The latest language guide (linked in a previous comment) contains a discussion of class inheritance in general and of the params class pattern in particular, with no suggestion (there) that the params class pattern should be avoided.  I don&#39;t recall seeing any conflicting messages myself.  <i>Node</i> inheritance, on the other hand, is a whole different kettle of fish: it was deprecated somewhere in 3.x, and no longer exists in Puppet 4."}, {"owner": {"reputation": 173, "user_id": 194920, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/58d13dd43e911c3a0e72f15d87a571b0?s=128&d=identicon&r=PG", "display_name": "Kenny Drobnack", "link": "https://stackoverflow.com/users/194920/kenny-drobnack"}, "edited": false, "score": 0, "creation_date": 1468430700, "post_id": 38354411, "comment_id": 64128461, "body": "To answer the questions - we&#39;ve got quite a bit of Puppet code and it&#39;s standardized on using the params.pp for passing in params. Upgrading is on our radar but it&#39;s likely to be a while before we get there due to other project deadlines."}, {"owner": {"reputation": 12661, "user_id": 5343387, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/15a14cec3014822297a08ed6dfae2563?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Schuchard", "link": "https://stackoverflow.com/users/5343387/matt-schuchard"}, "reply_to_user": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1468432684, "post_id": 38354411, "comment_id": 64129667, "body": "@JohnBollinger I wouldn&#39;t be surprised. Their customer support is dodgy and there seems to be a disconnect between development/engineering and their support team (it was support that told us this). You are probably correct that the thing I thought was deprecated was node inheritance and not class inheritance and I got the two confused."}, {"owner": {"reputation": 12661, "user_id": 5343387, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/15a14cec3014822297a08ed6dfae2563?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Schuchard", "link": "https://stackoverflow.com/users/5343387/matt-schuchard"}, "reply_to_user": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1468595339, "post_id": 38354411, "comment_id": 64207310, "body": "@JohnBollinger Not to get further off-topic, but I just remembered that inheriting from params is part of the official style guidelines as something not to do and a warning in puppet-lint."}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "reply_to_user": {"reputation": 12661, "user_id": 5343387, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/15a14cec3014822297a08ed6dfae2563?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Schuchard", "link": "https://stackoverflow.com/users/5343387/matt-schuchard"}, "edited": false, "score": 0, "creation_date": 1468596067, "post_id": 38354411, "comment_id": 64207810, "body": "@MattSchuchard, I don&#39;t know about puppet-lint, but the current version of <a href=\"https://docs.puppet.com/guides/style_guide.html#the-puppet-language-style-guide\" rel=\"nofollow noreferrer\">Puppet&#39;s official style guide</a> demonstrates the params class pattern as <a href=\"https://docs.puppet.com/guides/style_guide.html#internal-organization-of-classes-and-defined-types\" rel=\"nofollow noreferrer\">recommended style</a>, and elsewhere is explicitly accepting of class inheritance for that purpose (and only that purpose).  For example, &quot;Remember: Class inheritance should only be used for <code>myclass::params</code> parameter defaults.&quot;"}, {"owner": {"reputation": 12661, "user_id": 5343387, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/15a14cec3014822297a08ed6dfae2563?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Schuchard", "link": "https://stackoverflow.com/users/5343387/matt-schuchard"}, "reply_to_user": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1468603282, "post_id": 38354411, "comment_id": 64211856, "body": "@JohnBollinger Ok, this clearly seems to be an enormously conflicting directive. I guess my personal preference will continue to be module data from the Puppet data provider, but be fine with others doing params inherits."}], "answers": [{"tags": [], "owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "is_accepted": false, "score": 0, "last_activity_date": 1468427287, "creation_date": 1468427287, "answer_id": 38357094, "question_id": 38354411, "link": "https://stackoverflow.com/questions/38354411/can-you-read-the-contents-of-params-pp-into-a-hash-in-rspec-puppet/38357094#38357094", "title": "Can you read the contents of params.pp into a hash in Rspec-puppet?", "body": "<p>The contents of a Puppet manifest named <code>params.pp</code> would ordinarily be the definition of a Puppet class whose simple name is \"params\" (or possibly of a defined type having that name).  It is fairly common for modules to use such a class in an implementation of the \"params class\" pattern, wherein the purpose of the class is to provide, via its class variables, default values for the class parameters of other classes in the module.</p>\n\n<p>I suppose, therefore, that what you propose to do is collect the names and values of the class's variables into a hash to test them, but such a test is outside the scope of rspec-puppet:</p>\n\n<blockquote>\n  <p>Rspec-puppet tests are there to test the behaviour of Puppet when it compiles your manifests into a catalogue of Puppet resources.</p>\n</blockquote>\n\n<p>(<a href=\"http://rspec-puppet.com/tutorial/\" rel=\"nofollow\">Rspec-puppet Tutorial</a>)</p>\n\n<p>In other words, rspec-puppet is for testing the catalog compilation process and its results.  If you examine the available matchers, you will see that this is their focus.  The values of class variables that are not parameters (such as those of a params class) are not included as themselves in compiled catalogs, however, so they are not subject to testing with puppet-rspec.  You can test whether those values are reflected in the parameters of resources that <em>are</em> included in the catalog, but the catalog contains no information whatever on variables that were available but not used.</p>\n"}], "owner": {"reputation": 173, "user_id": 194920, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/58d13dd43e911c3a0e72f15d87a571b0?s=128&d=identicon&r=PG", "display_name": "Kenny Drobnack", "link": "https://stackoverflow.com/users/194920/kenny-drobnack"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 457, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1468427287, "creation_date": 1468419860, "last_edit_date": 1468426654, "question_id": 38354411, "link": "https://stackoverflow.com/questions/38354411/can-you-read-the-contents-of-params-pp-into-a-hash-in-rspec-puppet", "title": "Can you read the contents of params.pp into a hash in Rspec-puppet?", "body": "<p>We'd like to have our Rspec Puppet tests read in the contents of <code>params.pp</code> into a hash and verify there are no unexpected elements in that hash.</p>\n\n<p>All the info I've found describes how to set parameters for testing via <code>let (:params)</code>.</p>\n\n<p>We are doing that already, but want to do something like <code>expect params.keys.sort.to eq ('param1', 'param2', 'param3')</code>, but don't know how to get the contents of <code>params.pp</code> into a variable we can use in our tests.</p>\n\n<p>We are using Puppet 3.7.5.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "url-encoding"], "comments": [{"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 1, "creation_date": 1468418809, "post_id": 38353767, "comment_id": 64120269, "body": "You misread the answers to the question linked. In <i>query</i> plus signs are perfectly valid, treated as spaces and therefore there is no such redundant Rails helper existing."}, {"owner": {"reputation": 679, "user_id": 2988753, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/aKneR.jpg?s=128&g=1", "display_name": "AlexLarra", "link": "https://stackoverflow.com/users/2988753/alexlarra"}, "reply_to_user": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1468418988, "post_id": 38353767, "comment_id": 64120397, "body": "I need the params for a url of typeform. It does not treat well the &#39;+&#39;, but it does with &#39;%20&#39;"}], "answers": [{"comments": [{"owner": {"reputation": 679, "user_id": 2988753, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/aKneR.jpg?s=128&g=1", "display_name": "AlexLarra", "link": "https://stackoverflow.com/users/2988753/alexlarra"}, "edited": false, "score": 0, "creation_date": 1468420519, "post_id": 38354448, "comment_id": 64121629, "body": "Yes, it works for the value of a param. But in this case I want to get a group of params with &#39;%20&#39;. Like to_param method but not returning the whitespaces with &#39;+&#39;  <code>name=John%20Key</code>"}], "tags": [], "owner": {"reputation": 1847, "user_id": 2611078, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/a4d6410b45d0deeeee4a144e75067afc?s=128&d=identicon&r=PG", "display_name": "Julie", "link": "https://stackoverflow.com/users/2611078/julie"}, "is_accepted": false, "score": 1, "last_activity_date": 1468421387, "last_edit_date": 1468421387, "creation_date": 1468419956, "answer_id": 38354448, "question_id": 38353767, "link": "https://stackoverflow.com/questions/38353767/how-to-get-params-for-url-with-whitespace-as-20-instead-of-in-rails/38354448#38354448", "title": "How to get params for url with whitespace as &#39;%20&#39; instead of &#39;+&#39; in Rails", "body": "<p>Have you tried using <code>uri</code>?  e.g. </p>\n\n<p><code>require 'uri'\nURI.escape('John Smith')\n</code></p>\n\n<p>The result in this example should be <code>John%20Smith</code></p>\n\n<p>Realized from other post that URI.escape is technically deprecated.  Where <code>h</code> stands for hash, and <code>k</code> is the key in the hash, try this:</p>\n\n<p><code>params.keys.inject({}) {|h, k| h[k] = ERB::Util.url_encode(params[k]); h }</code></p>\n"}, {"tags": [], "owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "is_accepted": true, "score": 7, "last_activity_date": 1468421119, "last_edit_date": 1495540483, "creation_date": 1468420583, "answer_id": 38354712, "question_id": 38353767, "link": "https://stackoverflow.com/questions/38353767/how-to-get-params-for-url-with-whitespace-as-20-instead-of-in-rails/38354712#38354712", "title": "How to get params for url with whitespace as &#39;%20&#39; instead of &#39;+&#39; in Rails", "body": "<p>I would recommend just sticking to the use of a <code>gsub</code>, perhaps with a comment to explain the need for such behaviour.</p>\n\n<p>While you <em>could</em> solve the problem by use of <code>URI.escape</code>, it is supposedly deprecated, as it does not fully conform to RFC specs. <a href=\"https://stackoverflow.com/a/13059657/1954610\">See here</a> for a great write-up on it.</p>\n\n<p><code>Hash#to_param</code> is an alias of <code>Hash#to_query</code>, which calls <code>Object#to_query</code>. The simplest example to demonstrate this <code>+</code> vs <code>%20</code> issue is:</p>\n\n<pre><code>'John Key'.to_query(:name) # =&gt; \"name=John+Key\"\n</code></pre>\n\n<p>The implementation of <code>Object#to_query</code> is:</p>\n\n<pre><code>def to_query(key)\n  \"#{CGI.escape(key.to_param)}=#{CGI.escape(to_param.to_s)}\"\nend\n</code></pre>\n\n<p>And so, we find that:</p>\n\n<pre><code>CGI.escape(\"John Key\") # =&gt; \"John+Key\"\n</code></pre>\n\n<p>Hence, this is why I have referenced the differences between <code>CGI.escape</code> and <code>URI.escape</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 7180, "user_id": 1387670, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/775b403f2af517b276a43fc963725905?s=128&d=identicon&r=PG&f=1", "display_name": "OneChillDude", "link": "https://stackoverflow.com/users/1387670/onechilldude"}, "is_accepted": false, "score": 4, "last_activity_date": 1468420812, "creation_date": 1468420812, "answer_id": 38354798, "question_id": 38353767, "link": "https://stackoverflow.com/questions/38353767/how-to-get-params-for-url-with-whitespace-as-20-instead-of-in-rails/38354798#38354798", "title": "How to get params for url with whitespace as &#39;%20&#39; instead of &#39;+&#39; in Rails", "body": "<p>How about </p>\n\n<pre><code>URI.encode 'John Smith'\n# =&gt; John%20Smith\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 16860, "user_id": 1536309, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/40f2ef2f2a528a76dbd3667acd154e5c?s=128&d=identicon&r=PG", "display_name": "Blair Anderson", "link": "https://stackoverflow.com/users/1536309/blair-anderson"}, "is_accepted": false, "score": 3, "last_activity_date": 1494009917, "creation_date": 1494009917, "answer_id": 43811869, "question_id": 38353767, "link": "https://stackoverflow.com/questions/38353767/how-to-get-params-for-url-with-whitespace-as-20-instead-of-in-rails/43811869#43811869", "title": "How to get params for url with whitespace as &#39;%20&#39; instead of &#39;+&#39; in Rails", "body": "<p>not really. </p>\n\n<p>Suggest using: <code>your_params_hash.to_query.gsub(\"+\", \"%20\")</code></p>\n"}, {"tags": [], "owner": {"reputation": 468, "user_id": 4446898, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5SyO6.jpg?s=128&g=1", "display_name": "Kyle Ratliff", "link": "https://stackoverflow.com/users/4446898/kyle-ratliff"}, "is_accepted": false, "score": 1, "last_activity_date": 1576693461, "creation_date": 1576693461, "answer_id": 59398072, "question_id": 38353767, "link": "https://stackoverflow.com/questions/38353767/how-to-get-params-for-url-with-whitespace-as-20-instead-of-in-rails/59398072#59398072", "title": "How to get params for url with whitespace as &#39;%20&#39; instead of &#39;+&#39; in Rails", "body": "<p>Expanding on Julie's answer to achieve the string of encoded values rather than a hash.</p>\n\n<p>With the depreciation of <code>URI.encode</code> it is possible to achieve this with <code>ERB::Util.url_encode</code>, however you need to encode just the key and value pairs, not the full parameter, then join them together.</p>\n\n<hr>\n\n<pre><code>params = { name: 'John Key' }\n\n# not what we want\nERB::Util.url_encode(params) # =&gt; \"%7B%3Aname%3D%3E%22John%20Key%22%7D\"\n</code></pre>\n\n<p>Here is a (pretty long) command that will work:</p>\n\n<pre><code># Construct a new object (a string here) and build our params into it correctly.\n# k = key of hash. \n# v = value of hash. \n# a = array created in each_with_object.\n\nparams.each_with_object([]) { |(k, v), a| a &lt;&lt; [ERB::Util.url_encode(k), ERB::Util.url_encode(v)].join('=') }.join('&amp;')\n\n# =&gt; \"name=John%20Key\"\n</code></pre>\n\n<p>With more params:</p>\n\n<pre><code>params = { name: 'John Key', occupation: 'Web Developer!', 'Bad Key' =&gt; 'but works' }\n\nparams.each_with_object([]) { |(k, v), a| a &lt;&lt; [ERB::Util.url_encode(k), ERB::Util.url_encode(v)].join('=') }.join('&amp;')\n\n# =&gt; \"name=John%20Key&amp;occupation=Web%20Developer%21&amp;Bad%20Key=but%20works\"\n</code></pre>\n\n<p>compared to Hash.to_query</p>\n\n<pre><code>params.to_query\n\n# =&gt; \"Bad+Key=but+works&amp;name=John+Key&amp;occupation=Web+Developer%21\"\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 3218, "user_id": 75028, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/cfba17819c3ad90965899ebf5637973d?s=128&d=identicon&r=PG", "display_name": "Andrew Hodgkinson", "link": "https://stackoverflow.com/users/75028/andrew-hodgkinson"}, "is_accepted": false, "score": 0, "last_activity_date": 1599513761, "creation_date": 1599513761, "answer_id": 63784421, "question_id": 38353767, "link": "https://stackoverflow.com/questions/38353767/how-to-get-params-for-url-with-whitespace-as-20-instead-of-in-rails/63784421#63784421", "title": "How to get params for url with whitespace as &#39;%20&#39; instead of &#39;+&#39; in Rails", "body": "<p>If you want a literal percent encoding of a string without context (e.g. for <a href=\"https://tools.ietf.org/html/rfc5987\" rel=\"nofollow noreferrer\">RFC 5987</a> encoding of something like a <code>Content-Disposition</code> HTTP header's <code>filename*=...</code> value) then use of <code>URI.escape</code> / <code>URI.encode</code> (its alias) would have been correct. The <a href=\"https://ruby-doc.org/stdlib-2.7.1/libdoc/uri/rdoc/URI/Escape.html#method-i-escape\" rel=\"nofollow noreferrer\">core library documentation's suggested replacements</a> <em>ARE WRONG</em> in this case, as they are not equivalent:</p>\n<ul>\n<li><code> </code> is converted to <code>+</code>, not <code>%20</code></li>\n<li><code>+</code> is converted to <code>%2B</code>, not left as <code>+</code></li>\n</ul>\n<p>Some posts about this suggest a <code>gsub</code> to hack the string back towards the original, but this is far simpler:</p>\n<ul>\n<li><a href=\"https://ruby-doc.org/stdlib-2.7.1/libdoc/erb/rdoc/ERB/Util.html#method-c-url_encode\" rel=\"nofollow noreferrer\">https://ruby-doc.org/stdlib-2.7.1/libdoc/erb/rdoc/ERB/Util.html#method-c-url_encode</a></li>\n</ul>\n<p>...toggle source to see how it works - it's just a blunt encoder without context. That is <em>exactly what you sometimes want</em> when you know what you're doing, so let's hope it doesn't get removed from, or deprecated within the standard library.</p>\n<p>If I get the time I intend to submit a patch to the core library docs that lists the <em>three</em> (not two) possible alternatives and gives more information on when you would use each of them. Right now, it's clear from the very large number of Google hits about this, and large number of at-best misleading answers, that the community is dangerously confused by the status quo.</p>\n"}], "owner": {"reputation": 679, "user_id": 2988753, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/aKneR.jpg?s=128&g=1", "display_name": "AlexLarra", "link": "https://stackoverflow.com/users/2988753/alexlarra"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 5886, "favorite_count": 1, "accepted_answer_id": 38354712, "answer_count": 6, "score": 11, "last_activity_date": 1599513761, "creation_date": 1468418205, "last_edit_date": 1495540031, "question_id": 38353767, "link": "https://stackoverflow.com/questions/38353767/how-to-get-params-for-url-with-whitespace-as-20-instead-of-in-rails", "title": "How to get params for url with whitespace as &#39;%20&#39; instead of &#39;+&#39; in Rails", "body": "<p>If I have this params for adding to the URL</p>\n\n<p><code>params = { name: 'John Key' }</code></p>\n\n<p>and use the method <code>to_param</code>:</p>\n\n<pre><code>params.to_param\n =&gt; \"name=John+Key\"\n</code></pre>\n\n<p>The point is that '+' is not correctly read by the service used and is needed '%20' instead <code>name=John%20Key</code>: <a href=\"https://stackoverflow.com/questions/2678551/when-to-encode-space-to-plus-or-20/2678602#2678602\">When to encode space to plus (+) or %20?</a></p>\n\n<p>Is there a way to return the params with '%20' without using <code>gsub</code>?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "terminal", "activesupport"], "comments": [{"owner": {"reputation": 2131, "user_id": 3475678, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/230e565cac4491b28134bb92bfc28a70?s=128&d=identicon&r=PG&f=1", "display_name": "Aleksey", "link": "https://stackoverflow.com/users/3475678/aleksey"}, "edited": false, "score": 0, "creation_date": 1468418151, "post_id": 38353243, "comment_id": 64119784, "body": "Are you running server with bundler, i.e. <code>bundle exec rails s</code>?"}, {"owner": {"reputation": 1076, "user_id": 5775965, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/98506e548d87020608ab5264f3d57703?s=128&d=identicon&r=PG&f=1", "display_name": "genghiskhan", "link": "https://stackoverflow.com/users/5775965/genghiskhan"}, "reply_to_user": {"reputation": 2131, "user_id": 3475678, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/230e565cac4491b28134bb92bfc28a70?s=128&d=identicon&r=PG&f=1", "display_name": "Aleksey", "link": "https://stackoverflow.com/users/3475678/aleksey"}, "edited": false, "score": 0, "creation_date": 1468421546, "post_id": 38353243, "comment_id": 64122452, "body": "I wasn&#39;t, but I tried it and the same error showed up"}, {"owner": {"reputation": 2131, "user_id": 3475678, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/230e565cac4491b28134bb92bfc28a70?s=128&d=identicon&r=PG&f=1", "display_name": "Aleksey", "link": "https://stackoverflow.com/users/3475678/aleksey"}, "edited": false, "score": 0, "creation_date": 1468423209, "post_id": 38353243, "comment_id": 64123700, "body": "If it is rails project there must be Gemfile and you should run <code>bundle install</code> to install all gems. Did you do it?"}, {"owner": {"reputation": 1076, "user_id": 5775965, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/98506e548d87020608ab5264f3d57703?s=128&d=identicon&r=PG&f=1", "display_name": "genghiskhan", "link": "https://stackoverflow.com/users/5775965/genghiskhan"}, "reply_to_user": {"reputation": 2131, "user_id": 3475678, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/230e565cac4491b28134bb92bfc28a70?s=128&d=identicon&r=PG&f=1", "display_name": "Aleksey", "link": "https://stackoverflow.com/users/3475678/aleksey"}, "edited": false, "score": 0, "creation_date": 1468426254, "post_id": 38353243, "comment_id": 64125805, "body": "Yes I have done that recently"}], "answers": [{"tags": [], "owner": {"reputation": 843, "user_id": 6480404, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5adab07fa18df69f2a2038cf426b698?s=128&d=identicon&r=PG&f=1", "display_name": "3ygun", "link": "https://stackoverflow.com/users/6480404/3ygun"}, "is_accepted": false, "score": 0, "last_activity_date": 1523019581, "creation_date": 1523019581, "answer_id": 49693403, "question_id": 38353243, "link": "https://stackoverflow.com/questions/38353243/cannot-load-such-file-active-support/49693403#49693403", "title": "Cannot Load Such File - Active Support", "body": "<p><strong>Note</strong>: Same error different stack. I was working with <a href=\"http://sinatrarb.com/\" rel=\"nofollow noreferrer\">Sinatra</a> and ran into this issue. Where:</p>\n\n<ol>\n<li><code>gem list</code> was showing that <code>activesupport</code> was installed (e.g. <code>Using activesupport 5.0.2</code>).</li>\n<li>My <code>bundle exec rackup</code> was still failing with <code>LoadError: cannot load such file -- active_support/all</code></li>\n<li>Using Ruby 2.3.0 installed through <a href=\"https://github.com/rbenv/rbenv\" rel=\"nofollow noreferrer\">rbenv</a></li>\n</ol>\n\n<p><strong>Fix</strong>: Trouble shooting lead me to realize I'd run <code>sudo bundle install</code> instead of <code>bundle install</code>. As such, <code>activesupport</code> was installed for the <code>root</code> user not my user. I then ran:</p>\n\n<ol>\n<li>Uninstalled the gem with <code>gem uninstall activesupport</code> (<code>y</code>es to the prompts)</li>\n<li>Reinstalled it on the proper user <code>bundle install</code></li>\n<li>Ran <code>bundle exec rackup</code> to successfully start my app</li>\n</ol>\n\n<p><strong>TLDR</strong>: File permissions issue. Gem was installed on <code>root</code> and attempting to be accessed as <code>non-root</code>. Did <code>gem uninstall all</code> > <code>y</code>es ~50k times > <code>bundle install</code> > app boots without problems.</p>\n"}], "owner": {"reputation": 1076, "user_id": 5775965, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/98506e548d87020608ab5264f3d57703?s=128&d=identicon&r=PG&f=1", "display_name": "genghiskhan", "link": "https://stackoverflow.com/users/5775965/genghiskhan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 2339, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1523019581, "creation_date": 1468416732, "question_id": 38353243, "link": "https://stackoverflow.com/questions/38353243/cannot-load-such-file-active-support", "title": "Cannot Load Such File - Active Support", "body": "<p>I am trying to start a rails server, but I get the error:</p>\n\n<pre><code>/Users/&lt;username&gt;/RubyWorkspace/&lt;appname&gt;/vendor/bundle/gems/railties-5.0.0/lib/rails/commands/rake_proxy.rb:2:in `require': cannot load such file -- active_support (LoadError)\n</code></pre>\n\n<p>When I go to /vendor/bundle and list the gems, I don't see active support:</p>\n\n<pre><code>actioncable-5.0.0       minitest-5.9.0\nactionmailer-5.0.0      multi_json-1.12.1\nactionpack-5.0.0        nio4r-1.2.1\nactionview-5.0.0        pkg-config-1.1.7\nactivejob-5.0.0         rack-2.0.1\nactivemodel-5.0.0       rack-test-0.6.3\nactiverecord-5.0.0      rails-5.0.0\narel-7.0.0              rails-dom-testing-2.0.1\nbuilder-3.2.2           rails-html-sanitizer-1.0.3\nbyebug-9.0.0            railties-5.0.0\nbyebug-9.0.5            rake-11.2.2\ncoffee-rails-4.2.1      rb-fsevent-0.9.7\ncoffee-script-2.4.1     rb-inotify-0.9.7\ncoffee-script-source-1.10.0 sass-3.4.22\nconcurrent-ruby-1.0.2       sass-rails-5.0.5\ndebug_inspector-0.0.2       spring-1.7.1\nerubis-2.7.0            spring-1.7.2\nexecjs-2.7.0            spring-watcher-listen-2.0.0\nffi-1.9.14              sprockets-3.6.3\nglobalid-0.3.6          sprockets-rails-3.1.1\ni18n-0.7.0              thor-0.19.1\njbuilder-2.4.1          thread_safe-0.3.5\njbuilder-2.5.0          tilt-2.0.5\njquery-rails-4.1.1      turbolinks-5.0.0\nlisten-3.0.8            turbolinks-source-5.0.0\nloofah-2.0.3            tzinfo-1.2.2\nmail-2.6.4              uglifier-3.0.0\nmethod_source-0.8.2     web-console-3.1.1\nmime-types-3.1          web-console-3.3.1\nmime-types-data-3.2016.0521 websocket-driver-0.6.4\nmini_portile2-2.1.0     websocket-extensions-0.1.2\n</code></pre>\n\n<p>But when I run bundle update, bundler says that it is using active support:</p>\n\n<pre><code>Using rake 11.2.2\n....\nUsing activesupport 5.0.0\n....\nBundle updated!\nGems in the group production were not installed.\n</code></pre>\n\n<p>One thing that I believe could be causing the error, but I'm not sure, is when I run gem env, under gem paths, it shows:</p>\n\n<pre><code>- GEM PATHS:\n - /Users/&lt;username&gt;/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0\n - /Users/&lt;username&gt;/.gem/ruby/2.3.0\n</code></pre>\n\n<p>Do I need to fix the gem paths, do I need to reinstall active support in a different directory, or is it something else entirely?</p>\n"}, {"tags": ["ruby", "unit-testing", "minitest", "testunit"], "answers": [{"tags": [], "owner": {"reputation": 21, "user_id": 4520085, "user_type": "registered", "profile_image": "https://graph.facebook.com/683140883/picture?type=large", "display_name": "kolomeetz", "link": "https://stackoverflow.com/users/4520085/kolomeetz"}, "is_accepted": false, "score": 2, "last_activity_date": 1468422399, "creation_date": 1468422399, "answer_id": 38355441, "question_id": 38352823, "link": "https://stackoverflow.com/questions/38352823/does-minitest-provide-a-test-directive/38355441#38355441", "title": "Does minitest provide a &quot;test&quot; directive?", "body": "<p>No, Minitest runs ordinary methods with names started from 'test_'.</p>\n\n<p>Method <code>test</code> from ActionController::TestCase is provided by Rails and works as a simple wrap for 'test_*' methods. It converts this</p>\n\n<pre><code>test 'truish' do\n  assert true\nend\n</code></pre>\n\n<p>to this</p>\n\n<pre><code>def test_truish\n  assert true\nend\n</code></pre>\n\n<p>Also it checks if the body of the test was defined, if it wasn't, it will show an error message.</p>\n"}], "owner": {"reputation": 14503, "user_id": 474563, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/3f27430d3d162c443506778a01a24dc2?s=128&d=identicon&r=PG", "display_name": "Pithikos", "link": "https://stackoverflow.com/users/474563/pithikos"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 25, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1468422399, "creation_date": 1468415713, "question_id": 38352823, "link": "https://stackoverflow.com/questions/38352823/does-minitest-provide-a-test-directive", "title": "Does minitest provide a &quot;test&quot; directive?", "body": "<p>In Rails I can use the <code>test</code> keyword for my tests which I find very attractive and a bettter choice to Rspec's verbosity.</p>\n\n<p>Example:</p>\n\n<pre><code>class TestMyClass &lt; ActionController::TestCase\n  test 'one equals one' do\n    assert 1 == 1\n  end\nend\n</code></pre>\n\n<p>At the moment I am creating a gem and I want to follow the same way for my tests - by using the <code>test</code> method. I tried inheriting from Minitest and UnitTest and the latter seems to work. However I was under the impression that Rails uses Minitest. So does Minitest actually provide a <code>test</code> directive?</p>\n\n<p>This works:</p>\n\n<pre><code>class TestMyClass &lt; Test::Unit::TestCase\n  test 'one equals one' do\n    assert 1 == 1\n  end\nend\n</code></pre>\n\n<p>This gives me \"wrong number of arguments for test\":</p>\n\n<pre><code>class TestMyClass &lt; Minitest:Test\n  test 'one equals one' do\n    assert 1 == 1\n  end\nend\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "haml"], "comments": [{"owner": {"reputation": 3309, "user_id": 3786332, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/R33iW.jpg?s=128&g=1", "display_name": "uzaif", "link": "https://stackoverflow.com/users/3786332/uzaif"}, "edited": false, "score": 1, "creation_date": 1468415415, "post_id": 38352668, "comment_id": 64117615, "body": "use to_s method to convert in string"}], "answers": [{"tags": [], "owner": {"reputation": 13091, "user_id": 385532, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/082cc70175616a7f63b134a741c5d6e3?s=128&d=identicon&r=PG", "display_name": "Matt", "link": "https://stackoverflow.com/users/385532/matt"}, "is_accepted": false, "score": 0, "last_activity_date": 1468415850, "creation_date": 1468415850, "answer_id": 38352889, "question_id": 38352668, "link": "https://stackoverflow.com/questions/38352668/rails-and-href-in-haml/38352889#38352889", "title": "Rails and href in haml", "body": "<p><code>url_for[doc]</code> should be <code>url_for(doc)</code></p>\n"}, {"tags": [], "owner": {"reputation": 19261, "user_id": 4758119, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/F4dJY.jpg?s=128&g=1", "display_name": "Deepak Mahakale", "link": "https://stackoverflow.com/users/4758119/deepak-mahakale"}, "is_accepted": true, "score": 2, "last_activity_date": 1468417009, "creation_date": 1468417009, "answer_id": 38353325, "question_id": 38352668, "link": "https://stackoverflow.com/questions/38352668/rails-and-href-in-haml/38353325#38353325", "title": "Rails and href in haml", "body": "<p>You need to change line:5 to - </p>\n\n<pre><code>%a{href: (url_for(doc))}\n\n\n%a{href: (url_for[doc])} # this will give you following error\n#=&gt; ActionView::Template::Error (can't convert Doc into Integer):\n</code></pre>\n\n<p>Refer <a href=\"http://apidock.com/rails/ActionView/RoutingUrlFor/url_for\" rel=\"nofollow\">url_for</a></p>\n"}], "owner": {"reputation": 13, "user_id": 6221699, "user_type": "registered", "profile_image": "https://graph.facebook.com/10153621826026139/picture?type=large", "display_name": "Sandy", "link": "https://stackoverflow.com/users/6221699/sandy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 590, "favorite_count": 0, "accepted_answer_id": 38353325, "answer_count": 2, "score": 1, "last_activity_date": 1468417009, "creation_date": 1468415287, "last_edit_date": 1468416996, "question_id": 38352668, "link": "https://stackoverflow.com/questions/38352668/rails-and-href-in-haml", "title": "Rails and href in haml", "body": "<p>I am attempting to follow along with a tutorial for creating an Evernote-clone but running into trouble with this section on line 5 that is supposed to link back to a document. When I attempt to run it it gives me a TypeError in Docs#index and 'no implicit conversion of Doc into Integer':</p>\n\n<pre><code>.wrapper_with_padding\n    #docs.clearfix\n        -unless @docs.blank?\n            - @docs.each do |doc|\n                %a{href: (url_for[doc])}\n                    .doc\n                        %p.title= link_to doc.title\n                        %p.date= time_ago_in_words(doc.created_at)\n                        %p.content= truncate(doc.content, length:50)\n        -else\n            %h2 Create Doc!\n            %p Start Creating Documents and Organizing Your Life!\n            %button= link_to \"Create Doc\", new_doc_path\n</code></pre>\n"}, {"tags": ["ruby", "json", "api", "parsing"], "answers": [{"comments": [{"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1468417830, "post_id": 38353093, "comment_id": 64119534, "body": "Consider using <code>__callee__</code> instead of <code>__method__</code>, since the former returns alias names for aliases, while the latter returns the actual method name, even when called via an alias."}], "tags": [], "owner": {"reputation": 2572, "user_id": 2862049, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffd65bc37e559c2c407f064f308828a4?s=128&d=identicon&r=PG&f=1", "display_name": "Lukas Baliak", "link": "https://stackoverflow.com/users/2862049/lukas-baliak"}, "is_accepted": false, "score": 0, "last_activity_date": 1468418072, "last_edit_date": 1468418072, "creation_date": 1468416365, "answer_id": 38353093, "question_id": 38352652, "link": "https://stackoverflow.com/questions/38352652/how-find-a-nth-node-value-using-ruby/38353093#38353093", "title": "How find a nth node value using ruby", "body": "<p>Maybe this method will helps you. You can call recursion method with sub hash.</p>\n\n<pre><code>h = {\n  \"id\" =&gt; \"1\",\n  \"node\" =&gt; [\n    {\n      \"id\" =&gt; \"2\",\n      \"node\" =&gt; [\n        {\n          \"id\" =&gt; \"3\",\n          \"node\" =&gt; []\n        }\n      ]\n    }\n  ]\n}\n\ndef get_last_node(h)\n  if Array === h['node'] &amp;&amp; !h['node'].empty?\n    h['node'].each do |node_h|\n      id = send(__callee__, node_h)\n      return id if id\n    end\n    nil\n  else\n    h['id']\n  end\nend\n\nget_last_node(h)\n# =&gt; 3\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 7994, "user_id": 1625339, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/b8ba46f911517c8b2ccc39e0be9050c0?s=128&d=identicon&r=PG", "display_name": "Aetherus", "link": "https://stackoverflow.com/users/1625339/aetherus"}, "edited": false, "score": 0, "creation_date": 1468418854, "post_id": 38353605, "comment_id": 64120302, "body": "I know it&#39;s irrelevant but how can I type <code>\u03bb</code>?"}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "reply_to_user": {"reputation": 7994, "user_id": 1625339, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/b8ba46f911517c8b2ccc39e0be9050c0?s=128&d=identicon&r=PG", "display_name": "Aetherus", "link": "https://stackoverflow.com/users/1625339/aetherus"}, "edited": false, "score": 1, "creation_date": 1468419240, "post_id": 38353605, "comment_id": 64120602, "body": "@Aetherus I use very custom keyboard layout on Linux, operated through xkb\u2019s layouts in <code>&#47;usr&#47;share&#47;X11&#47;xkb&#47;symbols</code>. MacOS/Windows \u2691 suck as operating systems."}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "reply_to_user": {"reputation": 52685, "user_id": 980550, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/8emhY.jpg?s=128&g=1", "display_name": "lurker", "link": "https://stackoverflow.com/users/980550/lurker"}, "edited": false, "score": 0, "creation_date": 1468419600, "post_id": 38353605, "comment_id": 64120880, "body": "@lurker Yeah, let\u2019s live in XX century, type 10 chars instead of one most suitable here and most easy readable."}, {"owner": {"reputation": 7994, "user_id": 1625339, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/b8ba46f911517c8b2ccc39e0be9050c0?s=128&d=identicon&r=PG", "display_name": "Aetherus", "link": "https://stackoverflow.com/users/1625339/aetherus"}, "edited": false, "score": 0, "creation_date": 1468419607, "post_id": 38353605, "comment_id": 64120888, "body": "@mudasobwa I&#39;ll try it on my Elementary OS, and I can&#39;t agree more that Windows sucks. As for MacOS, I don&#39;t know because I haven&#39;t used it much."}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "reply_to_user": {"reputation": 7994, "user_id": 1625339, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/b8ba46f911517c8b2ccc39e0be9050c0?s=128&d=identicon&r=PG", "display_name": "Aetherus", "link": "https://stackoverflow.com/users/1625339/aetherus"}, "edited": false, "score": 1, "creation_date": 1468419798, "post_id": 38353605, "comment_id": 64121067, "body": "@Aetherus google for \u201cxkb customize layout\u201d or like; do not forget to <code>include &quot;level3(ralt_switch)&quot;</code> and you\u2019ll get \u224880 additional symbols of your choice typed in one key press for free :)"}, {"owner": {"reputation": 52685, "user_id": 980550, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/8emhY.jpg?s=128&g=1", "display_name": "lurker", "link": "https://stackoverflow.com/users/980550/lurker"}, "edited": false, "score": 0, "creation_date": 1468419924, "post_id": 38353605, "comment_id": 64121185, "body": "I believe that the FORTRAN language introduced the concept of single-character variables. So mid-20th century. ;) And using <code>\u03bb</code> to define a lambda is cute, until you need to define two or more different lambdas, then do you call them <code>\u03bb1</code> and <code>\u03bb2</code> (harkening back to FORTRAN again)?"}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "reply_to_user": {"reputation": 52685, "user_id": 980550, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/8emhY.jpg?s=128&g=1", "display_name": "lurker", "link": "https://stackoverflow.com/users/980550/lurker"}, "edited": false, "score": 0, "creation_date": 1468420279, "post_id": 38353605, "comment_id": 64121443, "body": "@lurker with single-letter vars one would quickly run out of free names for integers, as far as I remember :) Anyway, <code>\u03bb</code> is a perfect example of good variable name, especially taking into account that <code>lambda</code> is a keyword."}], "tags": [], "owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "is_accepted": false, "score": 3, "last_activity_date": 1468418109, "last_edit_date": 1468418109, "creation_date": 1468417772, "answer_id": 38353605, "question_id": 38352652, "link": "https://stackoverflow.com/questions/38352652/how-find-a-nth-node-value-using-ruby/38353605#38353605", "title": "How find a nth node value using ruby", "body": "<pre><code>h = {\n  \"id\" =&gt; \"1\",\n  \"node\" =&gt; [\n    {\n      \"id\" =&gt; \"2\",\n      \"node\" =&gt; [\n        {\n          \"id\" =&gt; \"3\",\n          \"node\" =&gt; []\n        }\n      ]\n    }\n  ]\n}\n\n\n\u25b6 \u03bb = -&gt;(h) { h['node'].empty? ? h['id'] : \u03bb.(h['node'].last) }\n#\u21d2 #&lt;Proc:0x00000002f4b490@(pry):130 (lambda)&gt;\n\u25b6 \u03bb.(h)\n#\u21d2 \"3\"\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": false, "score": 0, "last_activity_date": 1468740656, "last_edit_date": 1468740656, "creation_date": 1468740059, "answer_id": 38418845, "question_id": 38352652, "link": "https://stackoverflow.com/questions/38352652/how-find-a-nth-node-value-using-ruby/38418845#38418845", "title": "How find a nth node value using ruby", "body": "<p>Similar to @mudasobwa's answer:</p>\n\n<pre><code>def get_last_node(h)\n  h[\"node\"].empty? ? h[\"id\"] : get_last_node(h[\"node\"].first)\nend\n\nget_last_node(h)\n  #=&gt; 3\n</code></pre>\n"}], "owner": {"reputation": 61, "user_id": 4673614, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/2fe6465d421c7f3c762289b44551687d?s=128&d=identicon&r=PG&f=1", "display_name": "sakthivel", "link": "https://stackoverflow.com/users/4673614/sakthivel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 64, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1468740656, "creation_date": 1468415240, "question_id": 38352652, "link": "https://stackoverflow.com/questions/38352652/how-find-a-nth-node-value-using-ruby", "title": "How find a nth node value using ruby", "body": "<p>I have a JSON response tree like structure</p>\n\n<pre><code>{\n  \"id\":\"\"\n  \"node\": [\n      {\n        \"id\":\"\"\n        \"node\": [\n              {\n                \"id\":\"\"\n                \"node\":[] \n           }\n        ]\n     }\n  ]\n}\n</code></pre>\n\n<p>How could I get the last id value, it's just example it may contain n number of loops. </p>\n"}, {"tags": ["ruby-on-rails", "ruby", "postgresql", "activerecord"], "comments": [{"owner": {"reputation": 2131, "user_id": 3475678, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/230e565cac4491b28134bb92bfc28a70?s=128&d=identicon&r=PG&f=1", "display_name": "Aleksey", "link": "https://stackoverflow.com/users/3475678/aleksey"}, "edited": false, "score": 0, "creation_date": 1468417997, "post_id": 38352578, "comment_id": 64119665, "body": "Why you use <code>Device.all</code>? It returns Array not Relation. Try <code>Device.joins(...)</code>"}, {"owner": {"reputation": 603, "user_id": 3655448, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/d265d625523f228c9a94f14dbf7c8893?s=128&d=identicon&r=PG&f=1", "display_name": "Shrolox", "link": "https://stackoverflow.com/users/3655448/shrolox"}, "reply_to_user": {"reputation": 2131, "user_id": 3475678, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/230e565cac4491b28134bb92bfc28a70?s=128&d=identicon&r=PG&f=1", "display_name": "Aleksey", "link": "https://stackoverflow.com/users/3475678/aleksey"}, "edited": false, "score": 0, "creation_date": 1468418251, "post_id": 38352578, "comment_id": 64119871, "body": "I&#39;m pretty sure it does return a relation. Anyways, when I remove .all, I get the exact same error"}, {"owner": {"reputation": 2131, "user_id": 3475678, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/230e565cac4491b28134bb92bfc28a70?s=128&d=identicon&r=PG&f=1", "display_name": "Aleksey", "link": "https://stackoverflow.com/users/3475678/aleksey"}, "edited": false, "score": 0, "creation_date": 1468418451, "post_id": 38352578, "comment_id": 64120010, "body": "Can you try with Proc <code>merge</code>, i.e. <code>Device.all.joins(:user).merge(-&gt; { User.joins(:order)... })</code>?"}, {"owner": {"reputation": 603, "user_id": 3655448, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/d265d625523f228c9a94f14dbf7c8893?s=128&d=identicon&r=PG&f=1", "display_name": "Shrolox", "link": "https://stackoverflow.com/users/3655448/shrolox"}, "reply_to_user": {"reputation": 2131, "user_id": 3475678, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/230e565cac4491b28134bb92bfc28a70?s=128&d=identicon&r=PG&f=1", "display_name": "Aleksey", "link": "https://stackoverflow.com/users/3475678/aleksey"}, "edited": false, "score": 0, "creation_date": 1468418657, "post_id": 38352578, "comment_id": 64120171, "body": "Yeah it works ! Thanks a lot :) Can you post this as an answer ? (Some explanations would be greatly appreciated)"}], "answers": [{"tags": [], "owner": {"reputation": 2131, "user_id": 3475678, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/230e565cac4491b28134bb92bfc28a70?s=128&d=identicon&r=PG&f=1", "display_name": "Aleksey", "link": "https://stackoverflow.com/users/3475678/aleksey"}, "is_accepted": true, "score": 1, "last_activity_date": 1468419473, "creation_date": 1468419473, "answer_id": 38354248, "question_id": 38352578, "link": "https://stackoverflow.com/questions/38352578/missing-from-clause-entry-when-using-nested-merges-with-activerecord/38354248#38354248", "title": "&quot;Missing FROM-clause entry&quot; when using nested merges with ActiveRecord", "body": "<p>Try to use <code>merge</code> as Proc, like</p>\n\n<pre><code>Device.joins(:user).merge(-&gt; { User.joins(:order)... })\n</code></pre>\n\n<p>Sorry, right not I cannot give any explanations because I don't know much about <code>merge</code> method.<br>\nI just read the <a href=\"http://api.rubyonrails.org/classes/ActiveRecord/SpawnMethods.html#method-i-merge\" rel=\"nofollow\">docs</a> and saw Proc option.  </p>\n\n<p>Maybe soon I will dive into the problem and be able to help you with something more than this.</p>\n"}], "owner": {"reputation": 603, "user_id": 3655448, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/d265d625523f228c9a94f14dbf7c8893?s=128&d=identicon&r=PG&f=1", "display_name": "Shrolox", "link": "https://stackoverflow.com/users/3655448/shrolox"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 795, "favorite_count": 0, "accepted_answer_id": 38354248, "answer_count": 1, "score": 0, "last_activity_date": 1468419473, "creation_date": 1468415018, "question_id": 38352578, "link": "https://stackoverflow.com/questions/38352578/missing-from-clause-entry-when-using-nested-merges-with-activerecord", "title": "&quot;Missing FROM-clause entry&quot; when using nested merges with ActiveRecord", "body": "<p>I'm trying to use ActiveRecord queries to select devices belonging to specific users in my DB (devices are just models containing push notifications keys), regarding how many orders users made, or other things.</p>\n\n<p>(In all models I removed non relevant or private stuff)</p>\n\n<p>Here is my Device model:</p>\n\n<pre><code>class Device &lt; ActiveRecord::Base\n    belongs_to :user\nend\n</code></pre>\n\n<p>User model:</p>\n\n<pre><code>class User &lt; ActiveRecord::Base\n  has_many :order\n  has_one :device\nend\n</code></pre>\n\n<p>Order model:</p>\n\n<pre><code>class Order &lt; ActiveRecord::Base\n  belongs_to :user\n  belongs_to :order_status\n  scope :valid, -&gt; { joins(:order_status).merge(OrderStatus.valid) }\nend\n</code></pre>\n\n<p>OrderStatus model:</p>\n\n<pre><code>class OrderStatus &lt; ActiveRecord::Base\n  has_many :orders\n  scope :valid, -&gt; { where.not(name: \"processing\") }\nend\n</code></pre>\n\n<p>So, with all these, i'm trying to get Devices belongings to users who have made more than x valid orders.\nHere is where i am:</p>\n\n<pre><code>Device.all.joins(:user).merge(User.joins(:order).merge(Order.valid).group(\"users.id\").having(\"count(orders.id) &gt; ?\", [NB_ORDERS]))\n</code></pre>\n\n<p>This generates this request:</p>\n\n<pre><code>: SELECT \"devices\".* FROM \"devices\" INNER JOIN \"users\" ON \"users\".\"id\"\n= \"devices\".\"user_id\" LEFT OUTER JOIN \"order_statuses\" ON \"order_statuses\".\"id\" = \"orders\".\"order_status_id\" LEFT OUTER JOIN \"orders\" ON \"orders\".\"user_id\" = \"users\".\"id\" WHERE (\"order_statuses\".\"name\" != $1) GROUP BY users.id HAVING count(orders.id) &gt; 10\n</code></pre>\n\n<p>And gives me this error:</p>\n\n<blockquote>\n  <p>Hirb Error: PG::UndefinedTable: ERROR:  missing FROM-clause entry for\n  table \"orders\" LINE 1: ... JOIN \"order_statuses\" ON\n  \"order_statuses\".\"id\" = \"orders\".\"...</p>\n</blockquote>\n\n<p>What i really don't understand is that when i just do</p>\n\n<pre><code>User.joins(:order).merge(Order.valid).group(\"users.id\").having(\"count(orders.id) &gt; ?\", [NB_ORDERS])\n</code></pre>\n\n<p>It gives me the right result. It seems like nesting merges messes up with Postgres.</p>\n\n<p>is there a way to solve this problem ? (I have a great amount of records so using SQL/ActiveRecord is essential)</p>\n"}, {"tags": ["ruby", "sinatra"], "answers": [{"tags": [], "owner": {"reputation": 11331, "user_id": 132053, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f183bcc4176b308c9edabe79299e448f?s=128&d=identicon&r=PG", "display_name": "Jeremy Evans", "link": "https://stackoverflow.com/users/132053/jeremy-evans"}, "is_accepted": false, "score": 0, "last_activity_date": 1468420824, "creation_date": 1468420824, "answer_id": 38354806, "question_id": 38352403, "link": "https://stackoverflow.com/questions/38352403/ruby-sinatra-sequel-cannot-load-pg-ext/38354806#38354806", "title": "Ruby + Sinatra + Sequel, cannot load pg_ext", "body": "<p>Looks like the pg gem's C extension was not compiled.  You either need to fix that or use a pure ruby driver (e.g. jeremyevans-postgres-pr).</p>\n"}], "owner": {"reputation": 283, "user_id": 5962592, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/09e937e3c5361ac06e5c17d9f0a133db?s=128&d=identicon&r=PG&f=1", "display_name": "Jes", "link": "https://stackoverflow.com/users/5962592/jes"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 63, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1468420824, "creation_date": 1468414549, "last_edit_date": 1468416033, "question_id": 38352403, "link": "https://stackoverflow.com/questions/38352403/ruby-sinatra-sequel-cannot-load-pg-ext", "title": "Ruby + Sinatra + Sequel, cannot load pg_ext", "body": "<p>I'm writing app using Ruby, Sinatra, psql and Sequel. I'm on Windows 7. I created database and wrote migations following tutorial. Now I should run them using </p>\n\n<pre><code>sequel -m migrations postgres://&lt;username&gt;:&lt;password&gt;@localhost/good_vids_development\n</code></pre>\n\n<p>but I'm getting an error <code>AdapterNotFound, Load Error, cannot load such file: pg_ext.</code></p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 109029, "user_id": 2767755, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/BkC8q.jpg?s=128&g=1", "display_name": "Arup Rakshit", "link": "https://stackoverflow.com/users/2767755/arup-rakshit"}, "edited": false, "score": 1, "creation_date": 1468413891, "post_id": 38351930, "comment_id": 64116474, "body": "second code is not same as the first output tells that. But I don&#39;t know from where to start the explanations. :) In your second code <code>memo</code> is <code>&#39;b&#39;</code> and <code>x</code> is <code>&#39;a&#39;</code>. But that <code>memo &lt;&lt; x</code> is not happening, and it shouldn&#39;t though. And that is why once block is finished <code>memo</code> is getting returned, as that is how <code>each_with_object</code> works, it returns <code>memo</code>"}, {"owner": {"reputation": 14578, "user_id": 2229277, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/LZg07.jpg?s=128&g=1", "display_name": "newUserNameHere", "link": "https://stackoverflow.com/users/2229277/newusernamehere"}, "reply_to_user": {"reputation": 109029, "user_id": 2767755, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/BkC8q.jpg?s=128&g=1", "display_name": "Arup Rakshit", "link": "https://stackoverflow.com/users/2767755/arup-rakshit"}, "edited": false, "score": 0, "creation_date": 1468414231, "post_id": 38351930, "comment_id": 64116743, "body": "Could you write the long form equivalent of the second example and submit that as an answer?"}, {"owner": {"reputation": 24853, "user_id": 446681, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/cBjgR.jpg?s=128&g=1", "display_name": "Hector Correa", "link": "https://stackoverflow.com/users/446681/hector-correa"}, "edited": false, "score": 0, "creation_date": 1468414430, "post_id": 38351930, "comment_id": 64116886, "body": "This answer describes how the <code>&amp;</code> operator works and might shed some light on why the two are not equivalent: <a href=\"http://stackoverflow.com/a/9429972/446681\">stackoverflow.com/a/9429972/446681</a>"}, {"owner": {"user_type": "does_not_exist", "display_name": "user2536065"}, "edited": false, "score": 0, "creation_date": 1468415176, "post_id": 38351930, "comment_id": 64117449, "body": "You can seem the implementation in C here: <a href=\"http://ruby-doc.org/core-2.2.2/Symbol.html#method-i-to_proc\" rel=\"nofollow noreferrer\">ruby-doc.org/core-2.2.2/Symbol.html#method-i-to_proc</a>. If you don&#39;t know C, like me. You might find this interesting: <code>[&#39;a&#39;].reduce(&#39;b&#39;, &amp;:&lt;&lt;) #=&gt; &quot;ba&quot;</code>. If you think about it, with each_with_object, even if the strings did concatenate, you would have &quot;ab&quot; instead of &quot;ba&quot;, so the two examples should not be equal anyway."}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1468416112, "post_id": 38351930, "comment_id": 64118153, "body": "@jphager2 \u201ceven if the strings did concatenate\u201d\u2014the strings <i>did concatenate</i>, see my answer."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2536065"}, "edited": false, "score": 0, "creation_date": 1468416865, "post_id": 38351930, "comment_id": 64118747, "body": "aha so its just because of the order of the args to the proc, and that each_with_object returns the object. Obviously =p"}], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user2536065"}, "edited": false, "score": 0, "creation_date": 1468417770, "post_id": 38352946, "comment_id": 64119479, "body": "The old rails implementation of <code>Symbol#to_proc</code> was <code>Proc.new { |*args| args.shift.__send__(self, args) }</code>"}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1468417980, "post_id": 38352946, "comment_id": 64119653, "body": "@jphager2 How is it different from the current implementation and/or the code snippet I provided (save for that my version does not mutate <code>args</code> array, what makes no sense taking into account that <code>args</code> are all on the stack)?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user2536065"}, "edited": false, "score": 0, "creation_date": 1468418414, "post_id": 38352946, "comment_id": 64119982, "body": "The current implementation is written in C and does a lot more, like trying to find the proc in a cache, marking the proc for garbage collection, etc. Actually, I think your implementation has a bug, assuming that you are in the context of a Symbol instance. You will not have access to the args in the method definition of Symbol#to_proc."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2536065"}, "edited": false, "score": 0, "creation_date": 1468419343, "post_id": 38352946, "comment_id": 64120670, "body": "Ah, if you meant the current Rails, implementation, then there isn&#39;t one, because Symbol#to_proc is defined now in Ruby."}], "tags": [], "owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "is_accepted": true, "score": 2, "last_activity_date": 1468417426, "last_edit_date": 1468417426, "creation_date": 1468415980, "answer_id": 38352946, "question_id": 38351930, "link": "https://stackoverflow.com/questions/38351930/ruby-each-with-object-syntatic-sugar-explanation/38352946#38352946", "title": "Ruby each with object syntatic sugar explanation", "body": "<p><code>Symbol#to_proc</code> returns a <code>Proc</code> instance of arity <code>-1</code>:</p>\n\n<pre><code>:&lt;&lt;.to_proc.arity\n#\u21d2\u00a0-1\n</code></pre>\n\n<p>That said, it will silently accept any number of arguments, then basically call <code>args.first.method(self).to_proc</code> and pass the result of the above as codeblock parameter to the caller. That is why <code>['a'].reduce('b', :&lt;&lt;)</code> works as you expected: <code>reduce</code>\u2019s first block argument is <code>memo</code>, and </p>\n\n<pre><code>'b'.method(:&lt;&lt;, 'a')\n</code></pre>\n\n<p>returns <code>\"ba\"</code> string.</p>\n\n<p>Your code works the same way:</p>\n\n<pre><code>arr = ['a']\narr.each_with_object('b', &amp;:&lt;&lt;)\narr\n#\u21d2\u00a0['ab']\n</code></pre>\n\n<p>You\u2019ve just expected the wrong receiver for <code>String#&lt;&lt;</code> method. In this case, the receiver is an array element, since it\u2019s passed to the block <em>as the first argument</em>. Look:</p>\n\n<pre><code>arr = ['a', 'b']\narr.each_with_object('z', &amp;:&lt;&lt;)\narr\n#\u21d2\u00a0['az', 'bz']\n</code></pre>\n\n<p><code>memo</code> itself stays untouched and returned as a result of call to <code>each_with_object</code>. You might even have it <code>frozen</code> and the code will still work.</p>\n\n<p>That said, there is no way to achieve the functionality you requested with syntactic sugar using <code>Symbol#to_proc</code> and <code>each_with_object</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "is_accepted": false, "score": 0, "last_activity_date": 1468418632, "creation_date": 1468418632, "answer_id": 38353935, "question_id": 38351930, "link": "https://stackoverflow.com/questions/38351930/ruby-each-with-object-syntatic-sugar-explanation/38353935#38353935", "title": "Ruby each with object syntatic sugar explanation", "body": "<p>The returned object is the first argument passed to <code>each_with_object</code>. In the first example, this first object <code>\"b\"</code> is appended with \"<code>a</code>\", which is returned. In the second example, the element of the receiver <code>\"a\"</code> is appended with the first argument <code>\"b\"</code>, but nothing happens to the first argument.</p>\n"}], "owner": {"reputation": 14578, "user_id": 2229277, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/LZg07.jpg?s=128&g=1", "display_name": "newUserNameHere", "link": "https://stackoverflow.com/users/2229277/newusernamehere"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 153, "favorite_count": 0, "accepted_answer_id": 38352946, "answer_count": 2, "score": 1, "last_activity_date": 1468418783, "creation_date": 1468413370, "last_edit_date": 1468418783, "question_id": 38351930, "link": "https://stackoverflow.com/questions/38351930/ruby-each-with-object-syntatic-sugar-explanation", "title": "Ruby each with object syntatic sugar explanation", "body": "<p>Why are these not equal? </p>\n\n<pre><code>['a'].each_with_object('b'){|x,memo| memo &lt;&lt; x}\n=&gt; \"ba\"\n\n['a'].each_with_object('b', &amp;:&lt;&lt;)\n=&gt; \"b\"\n</code></pre>\n\n<p>I thought that the second is just a syntactically sugarized version of the first.</p>\n"}, {"tags": ["ruby", "ubuntu-14.04", "rvm"], "comments": [{"owner": {"reputation": 3233, "user_id": 141774, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d3786bf15c95a8b2b867e0e719898802?s=128&d=identicon&r=PG", "display_name": "Todd", "link": "https://stackoverflow.com/users/141774/todd"}, "edited": false, "score": 0, "creation_date": 1468429812, "post_id": 38351926, "comment_id": 64127915, "body": "Did you read the docs for <code>rvm help mount</code>?"}], "answers": [{"comments": [{"owner": {"reputation": 3233, "user_id": 141774, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d3786bf15c95a8b2b867e0e719898802?s=128&d=identicon&r=PG", "display_name": "Todd", "link": "https://stackoverflow.com/users/141774/todd"}, "edited": false, "score": 0, "creation_date": 1468429033, "post_id": 38352538, "comment_id": 64127441, "body": "While I may agree, that does not answer his specific question."}], "tags": [], "owner": {"reputation": 696, "user_id": 3101782, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/a7f2da739317a5199362dd7b998ad967?s=128&d=identicon&r=PG", "display_name": "Disha", "link": "https://stackoverflow.com/users/3101782/disha"}, "is_accepted": false, "score": 0, "last_activity_date": 1468414907, "creation_date": 1468414907, "answer_id": 38352538, "question_id": 38351926, "link": "https://stackoverflow.com/questions/38351926/how-to-update-ruby-version-ubuntu-14-04/38352538#38352538", "title": "How to update ruby version ubuntu 14.04?", "body": "<p>I will suggest you to use <a href=\"https://www.digitalocean.com/community/tutorials/how-to-install-ruby-on-rails-with-rbenv-on-ubuntu-14-04\" rel=\"nofollow\">rbenv</a>.</p>\n\n<p>Use the link for installation steps. Its very simple and easy to use as compared to RVM.</p>\n\n<p>I have installed Ruby 2.3.1 successfully on my Ubuntu 14.4.</p>\n"}], "owner": {"reputation": 29, "user_id": 6074972, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/5mtsR.jpg?s=128&g=1", "display_name": "Maheshkumar.J", "link": "https://stackoverflow.com/users/6074972/maheshkumar-j"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 396, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1468428923, "creation_date": 1468413357, "last_edit_date": 1468428923, "question_id": 38351926, "link": "https://stackoverflow.com/questions/38351926/how-to-update-ruby-version-ubuntu-14-04", "title": "How to update ruby version ubuntu 14.04?", "body": "<p>When I update the version of ruby 2.2.3 to 2.3.1. it returns the error displayed below.</p>\n\n<pre><code>No binary rubies available for: ubuntu/14.04/i386/ruby-2.3.1.\nContinuing with compilation. Please read 'rvm help mount' to get more information on binary rubies.\n</code></pre>\n"}, {"tags": ["ruby", "chef-infra"], "comments": [{"owner": {"reputation": 30536, "user_id": 400222, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/75febe3a9bd5b1ad9cb63fceccb6aa31?s=128&d=identicon&r=PG", "display_name": "StephenKing", "link": "https://stackoverflow.com/users/400222/stephenking"}, "edited": false, "score": 0, "creation_date": 1468413035, "post_id": 38351762, "comment_id": 64115854, "body": "Don&#39;t get your point. Throwing an exception (<code>raise</code>)?"}, {"owner": {"reputation": 804, "user_id": 5689995, "user_type": "registered", "accept_rate": 71, "profile_image": "https://lh3.googleusercontent.com/-dkQNVFt5pIA/AAAAAAAAAAI/AAAAAAAAD4g/DiQXgwL6g3c/photo.jpg?sz=128", "display_name": "laimison", "link": "https://stackoverflow.com/users/5689995/laimison"}, "reply_to_user": {"reputation": 30536, "user_id": 400222, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/75febe3a9bd5b1ad9cb63fceccb6aa31?s=128&d=identicon&r=PG", "display_name": "StephenKing", "link": "https://stackoverflow.com/users/400222/stephenking"}, "edited": false, "score": 0, "creation_date": 1468413678, "post_id": 38351762, "comment_id": 64116326, "body": "The thing is that I don&#39;t want to fail something. I want to just avoid doing something inside of <code>libraries&#47;my_custom_resource.rb</code> and just report with <code>Chef::Log.info</code>. I&#39;m thinking isn&#39;t <code>return</code> to skip the code?"}, {"owner": {"reputation": 804, "user_id": 5689995, "user_type": "registered", "accept_rate": 71, "profile_image": "https://lh3.googleusercontent.com/-dkQNVFt5pIA/AAAAAAAAAAI/AAAAAAAAD4g/DiQXgwL6g3c/photo.jpg?sz=128", "display_name": "laimison", "link": "https://stackoverflow.com/users/5689995/laimison"}, "reply_to_user": {"reputation": 30536, "user_id": 400222, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/75febe3a9bd5b1ad9cb63fceccb6aa31?s=128&d=identicon&r=PG", "display_name": "StephenKing", "link": "https://stackoverflow.com/users/400222/stephenking"}, "edited": false, "score": 0, "creation_date": 1468416629, "post_id": 38351762, "comment_id": 64118556, "body": "This part of code is under <code>def</code> so I need to exit from definition or ideally from the class <code>class MyCustomResource</code>. Thanks"}, {"owner": {"reputation": 15030, "user_id": 3627607, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bd5fd623c0fdd0c93a2535cf6293ec5d?s=128&d=identicon&r=PG", "display_name": "Tensibai", "link": "https://stackoverflow.com/users/3627607/tensibai"}, "edited": false, "score": 2, "creation_date": 1468416656, "post_id": 38351762, "comment_id": 64118580, "body": "<code>return</code> is not enough ? Show your code if you want a real advice..."}], "answers": [{"comments": [{"owner": {"reputation": 804, "user_id": 5689995, "user_type": "registered", "accept_rate": 71, "profile_image": "https://lh3.googleusercontent.com/-dkQNVFt5pIA/AAAAAAAAAAI/AAAAAAAAD4g/DiQXgwL6g3c/photo.jpg?sz=128", "display_name": "laimison", "link": "https://stackoverflow.com/users/5689995/laimison"}, "edited": false, "score": 0, "creation_date": 1468500051, "post_id": 38357032, "comment_id": 64159302, "body": "<code>return</code> works well inside of libraries (HWRP resources). You can just simply add <code>return if something_not_satisfied</code> this will stop doing the action. Thanks!"}], "tags": [], "owner": {"reputation": 43208, "user_id": 78722, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf611565f0b79abd0b3dc200ad867661?s=128&d=identicon&r=PG", "display_name": "coderanger", "link": "https://stackoverflow.com/users/78722/coderanger"}, "is_accepted": true, "score": 1, "last_activity_date": 1468427024, "creation_date": 1468427024, "answer_id": 38357032, "question_id": 38351762, "link": "https://stackoverflow.com/questions/38351762/how-to-exit-from-chef-hwrp-resource-if-something-looks-not-right/38357032#38357032", "title": "How to exit from Chef HWRP resource if something looks not right?", "body": "<p>As @Tensibai mentioned, <code>return</code> is what you want. An action method is at heart just some Ruby code. Normal programming practices apply.</p>\n"}], "owner": {"reputation": 804, "user_id": 5689995, "user_type": "registered", "accept_rate": 71, "profile_image": "https://lh3.googleusercontent.com/-dkQNVFt5pIA/AAAAAAAAAAI/AAAAAAAAD4g/DiQXgwL6g3c/photo.jpg?sz=128", "display_name": "laimison", "link": "https://stackoverflow.com/users/5689995/laimison"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 215, "favorite_count": 0, "accepted_answer_id": 38357032, "answer_count": 1, "score": 0, "last_activity_date": 1468427024, "creation_date": 1468412932, "question_id": 38351762, "link": "https://stackoverflow.com/questions/38351762/how-to-exit-from-chef-hwrp-resource-if-something-looks-not-right", "title": "How to exit from Chef HWRP resource if something looks not right?", "body": "<p>I'm extending Chef resource. So created <code>libraries/my_custom_resource.rb</code> file. Where is <code>class MyCustomResource &lt; Chef::Provider::Package::Yum</code> and ruby code... How should I exit from the resource <code>my_custom_resource.rb</code>when something going wrong or not satisfied to complete the resource action?</p>\n\n<p>I want to exit only from <code>libraries/my_custom_resource.rb</code> so below code in recipe should be executed.</p>\n"}, {"tags": ["ruby", "imap"], "comments": [{"owner": {"reputation": 9142, "user_id": 1442918, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7490251da02084a2e2720e20029d2bff?s=128&d=identicon&r=PG", "display_name": "Max", "link": "https://stackoverflow.com/users/1442918/max"}, "edited": false, "score": 1, "creation_date": 1468426856, "post_id": 38351757, "comment_id": 64126196, "body": "Your issue appears to be in &#39;login&#39;, not &#39;logout&#39;."}, {"owner": {"reputation": 499, "user_id": 1368043, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9ca22ab546a424b858bd0c3593e9a87e?s=128&d=identicon&r=PG", "display_name": "Tomalla", "link": "https://stackoverflow.com/users/1368043/tomalla"}, "reply_to_user": {"reputation": 9142, "user_id": 1442918, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7490251da02084a2e2720e20029d2bff?s=128&d=identicon&r=PG", "display_name": "Max", "link": "https://stackoverflow.com/users/1442918/max"}, "edited": false, "score": 0, "creation_date": 1468491628, "post_id": 38351757, "comment_id": 64153748, "body": "I highly doubt it&#39;s a problem with the <code>LOGIN</code> command, since after the first login I&#39;m able to download all the mails without any hassle."}, {"owner": {"reputation": 499, "user_id": 1368043, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9ca22ab546a424b858bd0c3593e9a87e?s=128&d=identicon&r=PG", "display_name": "Tomalla", "link": "https://stackoverflow.com/users/1368043/tomalla"}, "reply_to_user": {"reputation": 9142, "user_id": 1442918, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7490251da02084a2e2720e20029d2bff?s=128&d=identicon&r=PG", "display_name": "Max", "link": "https://stackoverflow.com/users/1442918/max"}, "edited": false, "score": 0, "creation_date": 1468497476, "post_id": 38351757, "comment_id": 64157537, "body": "I&#39;m sorry, I misunderstood you completely. Yes, it was indeed the problem with the <code>LOGIN</code> command after all. Somehow I was convinced that the problem was with the <code>LOGOUT</code> command all along. I have no idea why."}], "answers": [{"comments": [{"owner": {"reputation": 499, "user_id": 1368043, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9ca22ab546a424b858bd0c3593e9a87e?s=128&d=identicon&r=PG", "display_name": "Tomalla", "link": "https://stackoverflow.com/users/1368043/tomalla"}, "edited": false, "score": 0, "creation_date": 1468492448, "post_id": 38353397, "comment_id": 64154290, "body": "Ah, now this little fact that I missed turned my idea into rubble! However, it still doesn&#39;t answer my question - the exception is still being raised on the <code>LOGOUT</code> command, when I&#39;m actually done with the connection and want to clean the playground. On a side note: calling the <code>imap.disconnect</code> method instead does work, but it feels like a dirty little hack. I&#39;d prefer to inform the server I&#39;m done with the connection with the <code>LOGOUT</code> command, like the RFC standard states and the way it&#39;s intended."}, {"owner": {"reputation": 45322, "user_id": 421705, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/581b1760881c962648f99d6040d41829?s=128&d=identicon&r=PG", "display_name": "Holger Just", "link": "https://stackoverflow.com/users/421705/holger-just"}, "reply_to_user": {"reputation": 499, "user_id": 1368043, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9ca22ab546a424b858bd0c3593e9a87e?s=128&d=identicon&r=PG", "display_name": "Tomalla", "link": "https://stackoverflow.com/users/1368043/tomalla"}, "edited": false, "score": 0, "creation_date": 1468496243, "post_id": 38353397, "comment_id": 64156711, "body": "The exception is being raised on the second <code>login</code> call, not on <code>logout</code> as shown in your stack trace. It might be your line numbers are a bit off though. As for your other remarks, please see my edit."}, {"owner": {"reputation": 499, "user_id": 1368043, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9ca22ab546a424b858bd0c3593e9a87e?s=128&d=identicon&r=PG", "display_name": "Tomalla", "link": "https://stackoverflow.com/users/1368043/tomalla"}, "edited": false, "score": 0, "creation_date": 1468497365, "post_id": 38353397, "comment_id": 64157462, "body": "What an embarrassment. Yes, you are right. I misread the stack trace and got mislead by the line number. Now everything fits. However, I don&#39;t really understand your new comment on the connection, that the IMAP object would automatically create a new connection when sending a new command. Each time I call the <code>login</code> method after disconnecting, I get the exception that the stream is closed. It does not get reconnected in any way. Or did you mean something else?"}, {"owner": {"reputation": 45322, "user_id": 421705, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/581b1760881c962648f99d6040d41829?s=128&d=identicon&r=PG", "display_name": "Holger Just", "link": "https://stackoverflow.com/users/421705/holger-just"}, "reply_to_user": {"reputation": 499, "user_id": 1368043, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9ca22ab546a424b858bd0c3593e9a87e?s=128&d=identicon&r=PG", "display_name": "Tomalla", "link": "https://stackoverflow.com/users/1368043/tomalla"}, "edited": false, "score": 0, "creation_date": 1468498715, "post_id": 38353397, "comment_id": 64158364, "body": "Meh, turns out I miss-read the documentation. Sorry for that. Indeed, there is no way to use the existing <code>imap</code> object after logging out or disconnecting. Once the socket is closed, the only way to re-open it is to create a new <code>imap</code> object. As such, the original version of my answer still stands."}], "tags": [], "owner": {"reputation": 45322, "user_id": 421705, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/581b1760881c962648f99d6040d41829?s=128&d=identicon&r=PG", "display_name": "Holger Just", "link": "https://stackoverflow.com/users/421705/holger-just"}, "is_accepted": true, "score": 3, "last_activity_date": 1468498614, "last_edit_date": 1468498614, "creation_date": 1468417219, "answer_id": 38353397, "question_id": 38351757, "link": "https://stackoverflow.com/questions/38351757/cannot-logout-from-imap-server-ruby/38353397#38353397", "title": "Cannot logout from IMAP server (Ruby)", "body": "<p>Once you have logged out from an IMAP session, you have to create a new connection to execute any further commands. After a LOGOUT, the connection is not allowed to be further re-used.</p>\n\n<p>To quote from <a href=\"https://tools.ietf.org/html/rfc3501#section-6.1.3\" rel=\"nofollow\">RFC 3501</a>:</p>\n\n<blockquote>\n  <p>The LOGOUT command informs the server that the client is done with\n  the connection.  The server MUST send a BYE untagged response\n  before the (tagged) OK response, and then close the network\n  connection.</p>\n</blockquote>\n\n<p>In Ruby code, this effectvely means that after you have called <code>logout</code> on your <code>imap</code> object, you can't do anything useful with it anymore. Instead, create a new connection by creating a new <code>imap</code> object.</p>\n"}], "owner": {"reputation": 499, "user_id": 1368043, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9ca22ab546a424b858bd0c3593e9a87e?s=128&d=identicon&r=PG", "display_name": "Tomalla", "link": "https://stackoverflow.com/users/1368043/tomalla"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 513, "favorite_count": 0, "accepted_answer_id": 38353397, "answer_count": 1, "score": 0, "last_activity_date": 1468498614, "creation_date": 1468412926, "last_edit_date": 1468493255, "question_id": 38351757, "link": "https://stackoverflow.com/questions/38351757/cannot-logout-from-imap-server-ruby", "title": "Cannot logout from IMAP server (Ruby)", "body": "<p>Using Ruby I'm writing a daemon which synchronizes mails from an IMAP server. I have multiple accounts which I log into one after another and download unread messages. However I'm unable to reuse the existing connection to the IMAP server.</p>\n\n<p>Here's a rough example of what I want to do:</p>\n\n<pre><code>require 'net/imap'\n\nimap = Net::IMAP.new('imap.example.com')\n\nimap.login('login@example.com', 'R2D2C3PO')\nimap.select('INBOX')\n\n# interacting with the server, like fetching the messages etc.\n# for example:\nputs imap.fetch(3, \"BODYSTRUCTURE\")\n\n# now I want to log out of the account and log in with another\nimap.logout\n\nimap.login('anotherlogin@example.com', 'R2D2C3PO')\nimap.select('INBOX')    \n\n# again - interacting with the server\nputs imap.fetch(3, \"BODYSTRUCTURE\")\n\nimap.disconnect\n</code></pre>\n\n<p>However an exception is raised when calling the <code>logout</code> method:</p>\n\n<pre><code>/usr/local/rvm/rubies/ruby-2.2.1/lib/ruby/2.2.0/monitor.rb:110:in `sleep': No live threads left. Deadlock? (fatal)\n        from /usr/local/rvm/rubies/ruby-2.2.1/lib/ruby/2.2.0/monitor.rb:110:in `wait'\n        from /usr/local/rvm/rubies/ruby-2.2.1/lib/ruby/2.2.0/monitor.rb:110:in `wait'\n        from /usr/local/rvm/rubies/ruby-2.2.1/lib/ruby/2.2.0/net/imap.rb:1166:in `get_tagged_response'\n        from /usr/local/rvm/rubies/ruby-2.2.1/lib/ruby/2.2.0/net/imap.rb:1225:in `block in send_command'\n        from /usr/local/rvm/rubies/ruby-2.2.1/lib/ruby/2.2.0/monitor.rb:211:in `mon_synchronize'\n        from /usr/local/rvm/rubies/ruby-2.2.1/lib/ruby/2.2.0/net/imap.rb:1207:in `send_command'\n        from /usr/local/rvm/rubies/ruby-2.2.1/lib/ruby/2.2.0/net/imap.rb:435:in `login'\n        from test.rb:13:in `&lt;main&gt;'\n</code></pre>\n\n<p>I'm completely baffled by a threading exception, since the daemon is only single-threaded. Under the hood the process is hang on the conditional variable while waiting for the server response. Why it wasn't a problem when calling previous methods (<code>LOGIN</code>, <code>SELECT</code> and other commands) and it becomes a problem when sending the <code>LOGOUT</code> command?</p>\n\n<hr>\n\n<h2><strong>Edit:</strong></h2>\n\n<p>I somehow completely missed the fact, that the <code>LOGOUT</code> command renders the connection to the IMAP server no longer usable (as @HolgerJust points out). Although my idea to reuse the connection has failed miserably, the main point still stands: the exception is raised when sending the <code>LOGOUT</code> command, which at this point is still a legitimate action and should not cause any trouble.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "optimization"], "comments": [{"owner": {"reputation": 3867, "user_id": 3906189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/432b41df14bd9197f1b8601cabf49386?s=128&d=identicon&r=PG", "display_name": "siegy22", "link": "https://stackoverflow.com/users/3906189/siegy22"}, "edited": false, "score": 0, "creation_date": 1468410424, "post_id": 38350837, "comment_id": 64114041, "body": "You could load every tab with ajax, then when you need it. (see <a href=\"http://stackoverflow.com/questions/27485566/rails-4-ajax-load-content-in-bootstrap-tab\" title=\"rails 4 ajax load content in bootstrap tab\">stackoverflow.com/questions/27485566/&hellip;</a>)"}], "answers": [{"tags": [], "owner": {"reputation": 720, "user_id": 3619384, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/vl8ca.jpg?s=128&g=1", "display_name": "sohail khalil", "link": "https://stackoverflow.com/users/3619384/sohail-khalil"}, "is_accepted": false, "score": 0, "last_activity_date": 1468415726, "creation_date": 1468415726, "answer_id": 38352830, "question_id": 38350837, "link": "https://stackoverflow.com/questions/38350837/optimizing-front-end-code/38352830#38352830", "title": "Optimizing Front-end code", "body": "<p>The best solution for this is to make partial for each tab and load those partials through ajax when you click on that tab. </p>\n\n<p>First, render the main page and add <code>remote: true</code> to tab links. When you click on tab link render partial through js.</p>\n\n<p>I hopes this will help you.</p>\n"}, {"tags": [], "owner": {"reputation": 508, "user_id": 4470094, "user_type": "registered", "accept_rate": 60, "profile_image": "https://graph.facebook.com/100000857022300/picture?type=large", "display_name": "Ali Hassan Mirza", "link": "https://stackoverflow.com/users/4470094/ali-hassan-mirza"}, "is_accepted": false, "score": 0, "last_activity_date": 1468912856, "creation_date": 1468912856, "answer_id": 38451912, "question_id": 38350837, "link": "https://stackoverflow.com/questions/38350837/optimizing-front-end-code/38451912#38451912", "title": "Optimizing Front-end code", "body": "<p>create a partial with the name _tab.html.erb and use</p>\n\n<pre><code>remote: true\n</code></pre>\n\n<p>To use ajax which actually works to render the JS code where you can do whatever you that is the actual workflow.</p>\n\n<p>If you want to call your partial just render it by</p>\n\n<pre><code>render \"tab.html.erb\"\n</code></pre>\n"}], "owner": {"reputation": 56, "user_id": 6584030, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/naBFw.png?s=128&g=1", "display_name": "zzenonn", "link": "https://stackoverflow.com/users/6584030/zzenonn"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 95, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1468912856, "creation_date": 1468410329, "question_id": 38350837, "link": "https://stackoverflow.com/questions/38350837/optimizing-front-end-code", "title": "Optimizing Front-end code", "body": "<p>I have a view on Ruby on Rails, and it works fine, but my problem is that it takes quite sometime before the page loads. This is some of the code:</p>\n\n<h1>Main tab</h1>\n\n<pre><code>&lt;div class=\"tab-content\"&gt;\n                 &lt;div class=\"tab-pane fade in active\" id=\"tabconstituent\"&gt;\n                     &lt;h3&gt;Constituent Database&lt;/h3&gt;\n                     &lt;ul class=\"nav nav-tabs\"&gt;\n                      &lt;li class=\"active\"&gt;&lt;a href=\"#tabconstinbox\" data-toggle=\"tab\"&gt;Inbox&lt;/a&gt;&lt;/li&gt;\n                      &lt;li&gt;&lt;a href=\"#tabconstsent\" data-toggle=\"tab\"&gt;Sent&lt;/a&gt;&lt;/li&gt;\n\n                    &lt;/ul&gt;\n\n                  &lt;div class=\"tab-content\"&gt; \n                      &lt;div role=\"presentation\" class=\"tab-pane fade in active\" id=\"tabconstinbox\"&gt;\n                          &lt;div class=\"container-fluid\"&gt;\n                              &lt;br /&gt;\n                              &lt;div class=\"col-lg-6 pull-right\"&gt;\n                                &lt;div class=\"input-group pull-right\" id=\"searchDrafts\"&gt;\n                                  &lt;input type=\"text\" class=\"form-control\"  placeholder=\"Search for\"&gt;\n                                  &lt;span class=\"input-group-btn\"&gt;\n                                    &lt;button class=\"btn btn-default\"  type=\"button\"&gt;\n                                        &lt;span class=\"glyphicon glyphicon-search\" aria-hidden=\"true\"&gt;&lt;/span&gt;\n                                    &lt;/button&gt;\n                                  &lt;/span&gt;\n                                &lt;/div&gt;&lt;!-- /input-group --&gt;\n\n                                &lt;div class=\"dropdown\"&gt;\n                                     &lt;button class=\"btn btn-default dropdown-toggle pull-right\" type=\"button\" id=\"dropdownDrafts\" data-toggle=\"dropdown\" aria-haspopup=\"true\" aria-expanded=\"true\"&gt;\n                                        Filter by\n                                        &lt;span class=\"caret\"&gt;&lt;/span&gt;\n                                     &lt;/button&gt;\n                                  &lt;ul class=\"dropdown-menu\" aria-labelledby=\"dropdownMenu1\"&gt;\n                                    &lt;li&gt;&lt;a href=\"#\"&gt;Sent to&lt;/a&gt;&lt;/li&gt;\n                                    &lt;li&gt;&lt;a href=\"#\"&gt;Subject&lt;/a&gt;&lt;/li&gt;\n                                    &lt;li&gt;&lt;a href=\"#\"&gt;Date&lt;/a&gt;&lt;/li&gt;\n                                  &lt;/ul&gt;\n                                &lt;/div&gt;\n                             &lt;/div&gt;&lt;!-- /.col-lg-6 --&gt;\n                             &lt;%= will_paginate @received_messages %&gt;\n                              &lt;%= form_tag destroy_many_received_messages_path, method: :post do %&gt;\n                             &lt;table class=\"table table-striped\"&gt;\n                                 &lt;thead&gt;\n                                    &lt;tr&gt;\n                                      &lt;th&gt;&lt;input type=\"checkbox\" id=\"checkbox_all\" /&gt;&lt;/th&gt;\n                                      &lt;th data-field=\"sender\" data-sortable=\"true\"&gt;Sender&lt;/th&gt;\n                                      &lt;th data-field=\"complaint\" data-sortable=\"true\"&gt;Complaint&lt;/th&gt;\n                                      &lt;th data-field=\"location\" data-sortable=\"true\"&gt;Location&lt;/th&gt;\n                                      &lt;th data-field=\"subject\" data-sortable=\"true\"&gt;Subject&lt;/th&gt;\n                                      &lt;th data-field=\"department\" data-sortable=\"true\"&gt;Department&lt;/th&gt;\n                                      &lt;th data-field=\"action_taken\" data-sortable=\"true\"&gt;Action Taken&lt;/th&gt;\n                                      &lt;th data-field=\"status\" data-sortable=\"true\"&gt;Status&lt;/th&gt;\n                                      &lt;th data-field=\"date\" data-sortable=\"true\"&gt;Date&lt;/th&gt;\n                                    &lt;/tr&gt;\n                                 &lt;/thead&gt;\n                                 &lt;tbody&gt;\n\n                                    &lt;% @received_messages.each do |received_message| %&gt;\n                                      &lt;tr&gt;\n                                        &lt;td&gt;&lt;%= check_box_tag \"message_ids[]\", received_message.id%&gt;&lt;/td&gt;\n                                        &lt;td&gt;&lt;%= received_message.name%&gt;&lt;/td&gt;\n                                        &lt;td&gt;&lt;%= received_message.message %&gt;&lt;/td&gt;\n                                        &lt;td&gt;&lt;%= received_message.district %&gt; &lt;%= received_message.barangay %&gt;&lt;/td&gt;\n                                        &lt;td&gt;&lt;%= received_message.subject %&gt;&lt;/td&gt;\n                                        &lt;td&gt;&lt;% received_message.departments.uniq.each do |department|%&gt;\n                                              &lt;%= department.name %&gt; \n                                            &lt;% end -%&gt;&lt;/td&gt;\n                                        &lt;td&gt;&lt;%= received_message.action_taken %&gt;&lt;/td&gt;\n                                        &lt;td&gt;&lt;%= received_message.status %&gt;&lt;/td&gt;\n                                        &lt;td&gt;&lt;%= received_message.created_at %&gt;&lt;/td&gt;\n                                      &lt;/tr&gt;\n                                    &lt;% end %&gt;\n                                 &lt;/tbody&gt;\n                             &lt;/table&gt;  \n\n                             &lt;%= submit_tag \"Delete\", id:\"buttonConstInbox_Delete\", :class =&gt;\"btn btn-primary\"%&gt;\n                             &lt;%= submit_tag \"Update\", id:\"buttonConstInbox_Update\", :class =&gt;\"btn btn-primary\", remote: true, 'data-toggle' =&gt; \"modal\", 'data-target' =&gt; \"#constSentModal\" %&gt;\n                             &lt;%= submit_tag \"Attach\", id:\"buttonConstInbox_Attach\", :class =&gt;\"btn btn-primary\" %&gt;\n                             &lt;% end %&gt;\n\n                         &lt;/div&gt;&lt;!-- /.container-fluid --&gt;\n                      &lt;/div&gt;\n                      &lt;div role=\"presentation\" class=\"tab-pane fade\" id=\"tabconstsent\"&gt;\n                          &lt;div class=\"container-fluid\"&gt;\n                              &lt;br /&gt;\n                              &lt;div class=\"col-lg-6 pull-right\"&gt;\n                                &lt;div class=\"input-group pull-right\" id=\"searchDrafts\"&gt;\n                                  &lt;input type=\"text\" class=\"form-control\"  placeholder=\"Search for\"&gt;\n                                  &lt;span class=\"input-group-btn\"&gt;\n                                    &lt;button class=\"btn btn-default\"  type=\"button\"&gt;\n                                        &lt;span class=\"glyphicon glyphicon-search\" aria-hidden=\"true\"&gt;&lt;/span&gt;\n                                    &lt;/button&gt;\n                                  &lt;/span&gt;\n                                &lt;/div&gt;&lt;!-- /input-group --&gt;\n\n                                &lt;div class=\"dropdown\"&gt;\n                                     &lt;button class=\"btn btn-default dropdown-toggle pull-right\" type=\"button\" id=\"dropdownDrafts\" data-toggle=\"dropdown\" aria-haspopup=\"true\" aria-expanded=\"true\"&gt;\n                                        Filter by\n                                        &lt;span class=\"caret\"&gt;&lt;/span&gt;\n                                     &lt;/button&gt;\n                                  &lt;ul class=\"dropdown-menu\" aria-labelledby=\"dropdownMenu1\"&gt;\n                                    &lt;li&gt;&lt;a href=\"#\"&gt;Sent to&lt;/a&gt;&lt;/li&gt;\n                                    &lt;li&gt;&lt;a href=\"#\"&gt;Subject&lt;/a&gt;&lt;/li&gt;\n                                    &lt;li&gt;&lt;a href=\"#\"&gt;Date&lt;/a&gt;&lt;/li&gt;\n                                  &lt;/ul&gt;\n                                &lt;/div&gt;\n                             &lt;/div&gt;&lt;!-- /.col-lg-6 --&gt;\n                             &lt;%= will_paginate @send_messages %&gt;\n                             &lt;%= form_tag destroy_many_received_messages_path, method: :post do %&gt;\n                             &lt;table class=\"table table-striped\"&gt;\n                                 &lt;thead&gt;\n                                    &lt;tr&gt;\n                                      &lt;th&gt;&lt;input type=\"checkbox\" id=\"checkbox_all\" /&gt;&lt;/th&gt;\n                                      &lt;th data-field=\"sent_to\" data-sortable=\"true\"&gt;Sent To&lt;/th&gt;\n                                      &lt;th data-field=\"message\" data-sortable=\"true\"&gt;Message&lt;/th&gt;\n                                      &lt;th data-field=\"status\" data-sortable=\"true\"&gt;Status&lt;/th&gt;\n                                      &lt;th data-field=\"date\" data-sortable=\"true\"&gt;Date&lt;/th&gt;\n                                    &lt;/tr&gt;\n                                 &lt;/thead&gt;\n\n                                  &lt;tbody&gt;\n                                    &lt;% @send_messages.each do |send_message| %&gt;\n                                      &lt;tr&gt;\n                                        &lt;td&gt;&lt;%= check_box_tag \"message_ids[]\", send_message.id%&gt;&lt;/td&gt;\n                                        &lt;td&gt;&lt;%= send_message.mobile_number%&gt;&lt;/td&gt;\n                                        &lt;td&gt;&lt;%= send_message.message %&gt;&lt;/td&gt;\n                                        &lt;td&gt;&lt;%= send_message.status %&gt;&lt;/td&gt;\n                                        &lt;td&gt;&lt;%= send_message.created_at %&gt;&lt;/td&gt;\n                                      &lt;/tr&gt;\n                                    &lt;% end %&gt;\n                                 &lt;/tbody&gt;\n\n                             &lt;/table&gt;    \n                            &lt;% end %&gt;\n                             &lt;button type = \"button\" id=\"buttonConstSent_Delete\" class = \"btn btn-primary\"&gt;Delete&lt;/button&gt;\n                         &lt;/div&gt;&lt;!-- /.container-fluid --&gt;\n                      &lt;/div&gt;\n                  &lt;/div&gt;&lt;!-- /.tab-content inbox/sent/trash--&gt;\n</code></pre>\n\n<p>There are 5 more tabs that are identical to that, and I have a feeling the reason why it takes a while to load is because, each time a load that page, it loads everything, not the tab I'm currently on. This becomes a big problem especially when I want to paginate the data and each page loads all tabs. Is there any way to better optimize this code? Thank you.</p>\n"}, {"tags": ["ruby", "ibm-cloud-infrastructure", "network-storage"], "answers": [{"comments": [{"owner": {"reputation": 641, "user_id": 1445628, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/36dd9a67a8236dd54d86dd5122d18f69?s=128&d=identicon&r=PG", "display_name": "MadCoder", "link": "https://stackoverflow.com/users/1445628/madcoder"}, "edited": false, "score": 0, "creation_date": 1468568671, "post_id": 38355347, "comment_id": 64189888, "body": "Thanks a lot, Ruber. I could get the &#39;datacenter&#39; details now. But one question, why are you checking for storage[&#39;serviceResource&#39;].has_key?(&#39;datacenter&#39;) ? Is there a possibility that storage exists without being assigned to any datacenter?"}, {"owner": {"reputation": 2732, "user_id": 5094287, "user_type": "registered", "profile_image": "https://graph.facebook.com/10152965294186720/picture?type=large", "display_name": "Ruber Cuellar Valenzuela", "link": "https://stackoverflow.com/users/5094287/ruber-cuellar-valenzuela"}, "reply_to_user": {"reputation": 641, "user_id": 1445628, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/36dd9a67a8236dd54d86dd5122d18f69?s=128&d=identicon&r=PG", "display_name": "MadCoder", "link": "https://stackoverflow.com/users/1445628/madcoder"}, "edited": false, "score": 0, "creation_date": 1468600972, "post_id": 38355347, "comment_id": 64210659, "body": "Well, for some snapshot items (few of them) the datacenter is not displayed using <a href=\"http://sldn.softlayer.com/reference/services/SoftLayer_Account/getNetworkStorage\" rel=\"nofollow noreferrer\">SoftLayer_Account::getNetworkStorage</a> method, but you can use <a href=\"http://sldn.softlayer.com/reference/services/SoftLayer_Network_Storage/getServiceResource\" rel=\"nofollow noreferrer\">SoftLayer_Network_Storage::getServiceResource</a> method, to get the datacenter for them. This is a minor issue that we are working now to fix it. For that reason I added the validation for key <b>storage[&#39;serviceResource&#39;].has_key?(&#39;datacenter&#39;)</b>."}, {"owner": {"reputation": 2732, "user_id": 5094287, "user_type": "registered", "profile_image": "https://graph.facebook.com/10152965294186720/picture?type=large", "display_name": "Ruber Cuellar Valenzuela", "link": "https://stackoverflow.com/users/5094287/ruber-cuellar-valenzuela"}, "reply_to_user": {"reputation": 641, "user_id": 1445628, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/36dd9a67a8236dd54d86dd5122d18f69?s=128&d=identicon&r=PG", "display_name": "MadCoder", "link": "https://stackoverflow.com/users/1445628/madcoder"}, "edited": false, "score": 0, "creation_date": 1468600976, "post_id": 38355347, "comment_id": 64210661, "body": "My apologies if it affects your requirements."}], "tags": [], "owner": {"reputation": 2732, "user_id": 5094287, "user_type": "registered", "profile_image": "https://graph.facebook.com/10152965294186720/picture?type=large", "display_name": "Ruber Cuellar Valenzuela", "link": "https://stackoverflow.com/users/5094287/ruber-cuellar-valenzuela"}, "is_accepted": true, "score": 1, "last_activity_date": 1468422134, "creation_date": 1468422134, "answer_id": 38355347, "question_id": 38349866, "link": "https://stackoverflow.com/questions/38349866/how-to-get-to-which-datacenter-a-network-storage-belongs-to-using-softlayer-ruby/38355347#38355347", "title": "How to get to which datacenter a network storage belongs to using SoftLayer Ruby API?", "body": "<p>You should use an object mask to get datacenter value</p>\n\n<blockquote>\n  <p>e.g.:\n  <strong>mask[serviceResource[datacenter[name]]]</strong></p>\n</blockquote>\n\n<p>Also, you can try the following ruby script to get that kind of information</p>\n\n<pre><code># Get Network Storage\n#\n# This script retrieves an account's associated storage volumes.\n#\n# Important manual pages\n# http://sldn.softlayer.com/reference/services/SoftLayer_Account/getNetworkStorage\n# http://sldn.softlayer.com/reference/datatypes/SoftLayer_Network_Storage\n#\n# @License: http://sldn.softlayer.com/article/License\n# @Author: SoftLayer Technologies, Inc. &lt;sldn@softlayer.com&gt;\nrequire 'rubygems'\nrequire 'softlayer_api'\nrequire 'pp'\n\n# Declare your SoftLayer username and apiKey \nSL_API_USERNAME = 'set me'\nSL_API_KEY = 'set me'\n\n# Create the client\nclient = SoftLayer::Client.new(username: SL_API_USERNAME, api_key: SL_API_KEY)\n\n# Define an object mask to get datacenter name\nobject_mask = 'mask[serviceResource[datacenter[name]]]'\n\nbegin\n  storages = client['SoftLayer_Account'].object_mask(object_mask).getNetworkStorage\n  print \"+------------+---------------------------+------------+-----------------------+\\n\"\n  print \"| ID         | Datacenter                | Size       |  Username             |\\n\"\n  print \"+------------+---------------------------+------------+-----------------------+\\n\"\n  storages.each do |storage|\n      printf('| %-10s ', storage['id'])\n      if storage['serviceResource'].has_key?('datacenter')\n          datacenter = storage['serviceResource']['datacenter']['name']\n      else\n          datacenter = 'None'\n      end\n      printf('| %-25s ', datacenter)\n      printf('| %-10s ', storage['capacityGb'])\n      printf(\"| %-21s | \\n\", storage['username'])\n      end\n  rescue StandardError =&gt; exception\n  puts \"Error. : #{exception}\"\nend\n</code></pre>\n\n<p><strong>References:</strong></p>\n\n<ul>\n<li><a href=\"http://sldn.softlayer.com/article/Ruby\" rel=\"nofollow\">Ruby SoftLayer</a></li>\n<li><a href=\"http://sldn.softlayer.com/article/object-masks\" rel=\"nofollow\">Object Masks</a></li>\n<li><a href=\"http://sldn.softlayer.com/reference/services/SoftLayer_Account/getNetworkStorage\" rel=\"nofollow\">SoftLayer_Account::getNetworkStorage</a></li>\n</ul>\n"}], "owner": {"reputation": 641, "user_id": 1445628, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/36dd9a67a8236dd54d86dd5122d18f69?s=128&d=identicon&r=PG", "display_name": "MadCoder", "link": "https://stackoverflow.com/users/1445628/madcoder"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 78, "favorite_count": 0, "accepted_answer_id": 38355347, "answer_count": 1, "score": 0, "last_activity_date": 1468422134, "creation_date": 1468407846, "question_id": 38349866, "link": "https://stackoverflow.com/questions/38349866/how-to-get-to-which-datacenter-a-network-storage-belongs-to-using-softlayer-ruby", "title": "How to get to which datacenter a network storage belongs to using SoftLayer Ruby API?", "body": "<p>I'm using:</p>\n\n<p><a href=\"http://sldn.softlayer.com/reference/services/SoftLayer_Account/getNetworkStorage\" rel=\"nofollow\">http://sldn.softlayer.com/reference/services/SoftLayer_Account/getNetworkStorage</a></p>\n\n<p>to get a list of all network storages.</p>\n\n<p>But, in <a href=\"http://sldn.softlayer.com/reference/datatypes/SoftLayer_Network_Storage\" rel=\"nofollow\">http://sldn.softlayer.com/reference/datatypes/SoftLayer_Network_Storage</a> , I don't see a way to get the datacenter details to which the network storage belongs to.</p>\n\n<p>But, 'slcli iscsi list' (for example) is showing 'datacenter' column.</p>\n\n<p>How can I get the same via Ruby SoftLayer API?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4"], "answers": [{"comments": [{"owner": {"reputation": 738, "user_id": 3521315, "user_type": "registered", "accept_rate": 42, "profile_image": "https://i.stack.imgur.com/w55jb.jpg?s=128&g=1", "display_name": "Mike.Whitehead", "link": "https://stackoverflow.com/users/3521315/mike-whitehead"}, "edited": false, "score": 0, "creation_date": 1468412046, "post_id": 38351229, "comment_id": 64115168, "body": "Does this go in the Booking model?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user2536065"}, "reply_to_user": {"reputation": 738, "user_id": 3521315, "user_type": "registered", "accept_rate": 42, "profile_image": "https://i.stack.imgur.com/w55jb.jpg?s=128&g=1", "display_name": "Mike.Whitehead", "link": "https://stackoverflow.com/users/3521315/mike-whitehead"}, "edited": false, "score": 0, "creation_date": 1468412379, "post_id": 38351229, "comment_id": 64115378, "body": "You could put it in the controller or the model. If you put it in the model you would have to put it into an instance method and instead of using <code>@booking</code> you could just call methods on self and instead of <code>@events</code> you would use <code>event</code>. I&#39;ll add an example in my answer to make it clear."}, {"owner": {"reputation": 738, "user_id": 3521315, "user_type": "registered", "accept_rate": 42, "profile_image": "https://i.stack.imgur.com/w55jb.jpg?s=128&g=1", "display_name": "Mike.Whitehead", "link": "https://stackoverflow.com/users/3521315/mike-whitehead"}, "edited": false, "score": 0, "creation_date": 1468414274, "post_id": 38351229, "comment_id": 64116777, "body": "Many thanks. I&#39;ve added my index.html.erb code with a further query regarding how I can express the ongoing booking.count - do you know how I can show this to show users how many spaces are left on the event?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user2536065"}, "reply_to_user": {"reputation": 738, "user_id": 3521315, "user_type": "registered", "accept_rate": 42, "profile_image": "https://i.stack.imgur.com/w55jb.jpg?s=128&g=1", "display_name": "Mike.Whitehead", "link": "https://stackoverflow.com/users/3521315/mike-whitehead"}, "edited": false, "score": 0, "creation_date": 1468415310, "post_id": 38351229, "comment_id": 64117542, "body": "you could create an instance method in your Event class: (using ; because its in one line) <code>def spaces_left; number_of_spaces - bookings.count; end</code>"}, {"owner": {"reputation": 738, "user_id": 3521315, "user_type": "registered", "accept_rate": 42, "profile_image": "https://i.stack.imgur.com/w55jb.jpg?s=128&g=1", "display_name": "Mike.Whitehead", "link": "https://stackoverflow.com/users/3521315/mike-whitehead"}, "edited": false, "score": 0, "creation_date": 1468415772, "post_id": 38351229, "comment_id": 64117893, "body": "And then just add &lt;h3&gt;&lt;%= event.spaces_left %&gt;&lt;/h3&gt; to the code above?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user2536065"}, "reply_to_user": {"reputation": 738, "user_id": 3521315, "user_type": "registered", "accept_rate": 42, "profile_image": "https://i.stack.imgur.com/w55jb.jpg?s=128&g=1", "display_name": "Mike.Whitehead", "link": "https://stackoverflow.com/users/3521315/mike-whitehead"}, "edited": false, "score": 0, "creation_date": 1468416643, "post_id": 38351229, "comment_id": 64118567, "body": "you probably have it in an instance variable, so <code>@event</code>, but yeah"}, {"owner": {"reputation": 738, "user_id": 3521315, "user_type": "registered", "accept_rate": 42, "profile_image": "https://i.stack.imgur.com/w55jb.jpg?s=128&g=1", "display_name": "Mike.Whitehead", "link": "https://stackoverflow.com/users/3521315/mike-whitehead"}, "edited": false, "score": 0, "creation_date": 1468419234, "post_id": 38351229, "comment_id": 64120597, "body": "I&#39;ve tried the code in the controller above and it doesn&#39;t appear to work. This was on a free event - I think I need to add more code to make it work for both free and paid events."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2536065"}, "reply_to_user": {"reputation": 738, "user_id": 3521315, "user_type": "registered", "accept_rate": 42, "profile_image": "https://i.stack.imgur.com/w55jb.jpg?s=128&g=1", "display_name": "Mike.Whitehead", "link": "https://stackoverflow.com/users/3521315/mike-whitehead"}, "edited": false, "score": 0, "creation_date": 1468419438, "post_id": 38351229, "comment_id": 64120747, "body": "Let us <a href=\"http://chat.stackoverflow.com/rooms/117225/discussion-between-jphager2-and-mike-whitehead\">continue this discussion in chat</a>."}], "tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user2536065"}, "is_accepted": false, "score": 0, "last_activity_date": 1468413202, "last_edit_date": 1468413202, "creation_date": 1468411374, "answer_id": 38351229, "question_id": 38349333, "link": "https://stackoverflow.com/questions/38349333/rails-tracking-bookings-on-an-event-site/38351229#38351229", "title": "Rails - tracking bookings on an event site", "body": "<p>You probably want to do this with a transaction, because there could be a case when two people try to book an event at the same time and so you end up with a greater number of bookings than number_of_spaces for an event. </p>\n\n<p>In the controller:</p>\n\n<pre><code>Booking.transaction do\n  @booking.save!\n  @event.reload\n  if @event.bookings.count &gt; @event.number_of_spaces\n    flash[:warning] = \"Sorry, this event is fully booked.\"\n    raise ActiveRecord::Rollback, \"event is fully booked\"\n  end \nend\n</code></pre>\n\n<p>Or in the model:</p>\n\n<pre><code>def save_if_space_left\n  Booking.transaction do\n    save!\n    event.reload\n    if event.bookings.count &gt; event.number_of_spaces\n      raise ActiveRecord::Rollback, \"event is fully booked\"\n    else\n      return true\n    end\n  end\n  false\nend\n\n# So in the controller, you could do something like\n\nif @booking.save_if_space_left\n  # Successful\nelse \n  # Not successful\nend\n</code></pre>\n"}], "owner": {"reputation": 738, "user_id": 3521315, "user_type": "registered", "accept_rate": 42, "profile_image": "https://i.stack.imgur.com/w55jb.jpg?s=128&g=1", "display_name": "Mike.Whitehead", "link": "https://stackoverflow.com/users/3521315/mike-whitehead"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 155, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1479133771, "creation_date": 1468406366, "last_edit_date": 1479133771, "question_id": 38349333, "link": "https://stackoverflow.com/questions/38349333/rails-tracking-bookings-on-an-event-site", "title": "Rails - tracking bookings on an event site", "body": "<p>I'm building an events site using Rails. I need to create a system that monitors the number of bookings being taken to ensure an Event does not become over-subscribed. What is the most effective (DRY) way to do this? On my index page I have each event listed with a main image, event title and date. I also want to include a tracking message illustrating how many spaces are left e.g \"50 spaces left - book now\".</p>\n\n<p>I've tried this code in my bookings controller but it doesn't work - </p>\n\n<pre><code>if @event.bookings.count &gt;= @event.number_of_spaces\n        flash[:warning] = \"Sorry, this event is fully booked.\"\n        redirect_to root_path\n\n\n    end\n</code></pre>\n\n<p>Is there a more effective method to do this? I have a Booking MVC set up. </p>\n"}, {"tags": ["ruby", "tsql", "odbc", "nvarchar", "dbd"], "comments": [{"owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "edited": false, "score": 1, "creation_date": 1468407083, "post_id": 38348930, "comment_id": 64111701, "body": "Just out of curiosity: Why do you have to use a Ruby version that is more than 9 years old?"}, {"owner": {"reputation": 52685, "user_id": 980550, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/8emhY.jpg?s=128&g=1", "display_name": "lurker", "link": "https://stackoverflow.com/users/980550/lurker"}, "edited": false, "score": 0, "creation_date": 1468410093, "post_id": 38348930, "comment_id": 64113765, "body": "Are you using Rails? If so, what version of rails are you using? You might want to find out if dbd-odbc is even supported on that version of Rails. Can you show the code you used to execute that query?"}], "owner": {"reputation": 13, "user_id": 3102411, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/422f27499ccc830fdff047d83e240c83?s=128&d=identicon&r=PG&f=1", "display_name": "tamtam", "link": "https://stackoverflow.com/users/3102411/tamtam"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 485, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1468406734, "creation_date": 1468405276, "last_edit_date": 1468406734, "question_id": 38348930, "link": "https://stackoverflow.com/questions/38348930/negative-string-size-or-size-too-big-argument-error-ruby-1-8-6", "title": "Negative string size (or size too big) (Argument Error) - ruby 1.8.6", "body": "<p>I am using ruby 1.8.6 and dbd-odbc 0.2.4.\nI am trying to execute this query: \n<code>SELECT * FROM TABLE1</code></p>\n\n<p>Some of the fields in that table1 are type nvarchar(max). I am getting this error from ruby:</p>\n\n<blockquote>\n  <p><em>Negative string size (or size too big) (Argument Error)</em></p>\n</blockquote>\n\n<p>I have tried reinstalling the gem, tried adding this also <code>set textsize 1000</code>\nbut it's not helping. Any ideas?</p>\n\n<p>Note: I have to use this version of ruby and gem(so pls don't suggest upgrading to higher version of ruby).</p>\n"}, {"tags": ["ruby", "hash"], "answers": [{"tags": [], "owner": {"reputation": 2572, "user_id": 2862049, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffd65bc37e559c2c407f064f308828a4?s=128&d=identicon&r=PG&f=1", "display_name": "Lukas Baliak", "link": "https://stackoverflow.com/users/2862049/lukas-baliak"}, "is_accepted": false, "score": 0, "last_activity_date": 1468405694, "creation_date": 1468405694, "answer_id": 38349083, "question_id": 38348813, "link": "https://stackoverflow.com/questions/38348813/ruby-group-by-like-method-for-hash/38349083#38349083", "title": "Ruby &#39;group_by&#39;-like method for hash", "body": "<p>Maybe you can use something like this</p>\n\n<pre><code>def get_same_first_value(h)\n  h.each_with_object(Hash.new { |k, v| k[v] = [] }) do |(sym, arr), exp|\n    exp[arr.min] &lt;&lt; sym\n  end.select { |k, v| v.size != 1 }.values\nend\n\nh = {\n  :k1 =&gt; [2, 3, 5, 12],\n  :k2 =&gt; [9, 5, 6, 10],\n  :k3 =&gt; [2, 4, 5, 8],\n}\n\nget_same_first_value(h)\n# =&gt; [[:k1, :k3]]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 742, "user_id": 601555, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b70354d05caf6bdf7e7953713c1cd4?s=128&d=identicon&r=PG", "display_name": "Ilija Eftimov", "link": "https://stackoverflow.com/users/601555/ilija-eftimov"}, "is_accepted": false, "score": 1, "last_activity_date": 1468406389, "creation_date": 1468406389, "answer_id": 38349342, "question_id": 38348813, "link": "https://stackoverflow.com/questions/38348813/ruby-group-by-like-method-for-hash/38349342#38349342", "title": "Ruby &#39;group_by&#39;-like method for hash", "body": "<p>I came up with this ugly thing:</p>\n\n<pre><code>h.inject({}) do |memo, (key, array)|\n  memo[array[0]] ||= []\n  memo[array[0]] &lt;&lt; key\n  memo\nend.detect do |(key, values)|\n  values.size &gt; 1\nend.last\n</code></pre>\n\n<p>It basically remaps the hash in the form of:</p>\n\n<pre><code>{first_item_in_array =&gt; keys_that_contain_it}\n</code></pre>\n\n<p>Or, in our case:</p>\n\n<pre><code>{2=&gt;[:k1, :k3]}\n</code></pre>\n\n<p>Then it just detects the first pair that has more than one match and returns it:</p>\n\n<pre><code>[:k1, :k3]\n</code></pre>\n\n<p>Hope that helps!</p>\n"}, {"comments": [{"owner": {"reputation": 5039, "user_id": 178925, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/688a0dd1d721a6ad62b8fdc0d64a5def?s=128&d=identicon&r=PG", "display_name": "JCLL", "link": "https://stackoverflow.com/users/178925/jcll"}, "edited": false, "score": 0, "creation_date": 1468411347, "post_id": 38349595, "comment_id": 64114669, "body": "I was simply not aware of this method for hash. Thx !"}], "tags": [], "owner": {"reputation": 968, "user_id": 1610268, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4ecd8d0271737fd3fb81e12eeacb432c?s=128&d=identicon&r=PG", "display_name": "Julian Kniephoff", "link": "https://stackoverflow.com/users/1610268/julian-kniephoff"}, "is_accepted": true, "score": 2, "last_activity_date": 1468407074, "creation_date": 1468407074, "answer_id": 38349595, "question_id": 38348813, "link": "https://stackoverflow.com/questions/38348813/ruby-group-by-like-method-for-hash/38349595#38349595", "title": "Ruby &#39;group_by&#39;-like method for hash", "body": "<p>Why not just use <code>group_by</code> as the title of your question suggests:</p>\n\n<pre><code>h2 = h.group_by { |k, v| v.first }\n</code></pre>\n\n<p>This gives you something like this:</p>\n\n<pre><code>{2=&gt;[[:k1, [2, 3, 5, 12]], [:k3, [2, 4, 5, 8]]], 9=&gt;[[:k2, [9, 5, 6, 10]]]}\n</code></pre>\n\n<p>You can then use this for further processing. Just want the keys?</p>\n\n<pre><code>h3 = h2.values.map { |v| v.map(&amp;:first) }\n</code></pre>\n\n<p>Only want those with more than one key?</p>\n\n<pre><code>h3.reject { |v| v.length &lt; 2 }\n</code></pre>\n\n<p>Or on <code>h2</code> directly:</p>\n\n<pre><code>h2.reject { |k, v| v.length &lt; 2 }\n</code></pre>\n"}], "owner": {"reputation": 5039, "user_id": 178925, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/688a0dd1d721a6ad62b8fdc0d64a5def?s=128&d=identicon&r=PG", "display_name": "JCLL", "link": "https://stackoverflow.com/users/178925/jcll"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 270, "favorite_count": 0, "accepted_answer_id": 38349595, "answer_count": 3, "score": 0, "last_activity_date": 1468407074, "creation_date": 1468404951, "question_id": 38348813, "link": "https://stackoverflow.com/questions/38348813/ruby-group-by-like-method-for-hash", "title": "Ruby &#39;group_by&#39;-like method for hash", "body": "<p>I need a Ruby function that takes a hash as input (keys are Symbols and values are Arrays of Numerics) and returns the list of keys whose associated Arrays have the same first value.</p>\n\n<p>Here is an example :</p>\n\n<pre><code>h={\n  :k1 =&gt; [2,3,5,12],\n  :k2 =&gt; [9,5,6,10],\n  :k3 =&gt; [2,4,5, 8],\n}\n\nf(h) # should return [[:k1,:k3]] \n</code></pre>\n\n<p>...because 2 appears as the same value in the two arrays associated with <strong>:k1</strong> and <strong>:k3</strong>. The return Object is an array of array (because, several groups of keys can have the same array first values).</p>\n\n<p>So far, I just grouped the arrays themselves :</p>\n\n<pre><code>def f(h)\n  h.values.group_by{|ary| ary.first}\nend   \n\n# returns {2=&gt;[[2, 3, 5, 12], [2, 4, 5, 8]], 9=&gt;[[9, 5, 6, 10]]}\n</code></pre>\n"}, {"tags": ["ruby", "couchbase"], "answers": [{"comments": [{"owner": {"reputation": 1456, "user_id": 1998300, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/XQYma.png?s=128&g=1", "display_name": "Alexandr T", "link": "https://stackoverflow.com/users/1998300/alexandr-t"}, "edited": false, "score": 0, "creation_date": 1477635524, "post_id": 38358417, "comment_id": 67856070, "body": "But when i connecting from python <code>Bucket(&#39;couchbase:&#47;&#47;&lt;server&gt;&#47;auth&#39;)</code> - success, and when i connecting to the same server from ruby <code>Couchbase.connect(&#39;http:&#47;&#47;&lt;server&gt;:&lt;port&gt;&#47;pools&#47;default&#47;buck&zwnj;&#8203;ets&#47;auth&#39;)</code> i&#39;ve got the error <code>Couchbase::Error::Auth: bootstrap error, Authentication failed. You may have provided an invalid username&#47;password combination</code>. Both libraries used the same web admin port - 8091"}], "tags": [], "owner": {"reputation": 89, "user_id": 4825608, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bf23fe8b38274aa400ecdeee66493558?s=128&d=identicon&r=PG&f=1", "display_name": "beamatronic", "link": "https://stackoverflow.com/users/4825608/beamatronic"}, "is_accepted": false, "score": 2, "last_activity_date": 1468431727, "creation_date": 1468431727, "answer_id": 38358417, "question_id": 38348354, "link": "https://stackoverflow.com/questions/38348354/ruby-connect-to-couchbase/38358417#38358417", "title": "Ruby: connect to Couchbase", "body": "<p>Here is what I see on my machine.  </p>\n\n<pre><code># ruby --version\nruby 1.8.7 (2013-06-27 patchlevel 374) [x86_64-linux]\n\n# gem --version\n1.3.7\n\n# gem list --local\n\n*** LOCAL GEMS ***\n\nconnection_pool (2.2.0)\ncouchbase (1.3.14)\nmulti_json (1.12.1)\nyaji (0.3.5)\n\n# cat test.ruby\nrequire 'couchbase'\nc = Couchbase.connect('http://localhost:8091/pools/default/buckets/BUCKETNAME')\nputs c.get('test123')\n\n\n# cbc get test123 -U couchbase://localhost/BUCKETNAME \ntest123              CAS=0x8f1269ea6014, Flags=0x0. Size=17\n{\"hello\":\"there\"}\n\n# ruby -rubygems test.ruby\n[WARNING] MultiJson is using the default adapter (ok_json). We recommend loading a different JSON library to improve performance.\nhellothere\n</code></pre>\n\n<p>This was on one of my Couchbase nodes.  I have bucket called BUCKETNAME and it contains a document with key \"test123\" and the content of the document is</p>\n\n<pre><code>{\n  \"hello\": \"there\"\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1456, "user_id": 1998300, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/XQYma.png?s=128&g=1", "display_name": "Alexandr T", "link": "https://stackoverflow.com/users/1998300/alexandr-t"}, "is_accepted": true, "score": 0, "last_activity_date": 1477637291, "last_edit_date": 1477637291, "creation_date": 1477636717, "answer_id": 40299432, "question_id": 38348354, "link": "https://stackoverflow.com/questions/38348354/ruby-connect-to-couchbase/40299432#40299432", "title": "Ruby: connect to Couchbase", "body": "<p>Need specify bucket if it is <a href=\"https://github.com/couchbase/couchbase-ruby-client/blob/master/lib/couchbase.rb#L52\" rel=\"nofollow\">custom</a>:</p>\n\n<pre><code>Couchbase.connect(\"http://&lt;server&gt;:8091/pools/default\", :bucket =&gt; 'auth')\n</code></pre>\n"}], "owner": {"reputation": 1456, "user_id": 1998300, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/XQYma.png?s=128&g=1", "display_name": "Alexandr T", "link": "https://stackoverflow.com/users/1998300/alexandr-t"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 259, "favorite_count": 0, "accepted_answer_id": 40299432, "answer_count": 2, "score": 1, "last_activity_date": 1477637291, "creation_date": 1468403756, "last_edit_date": 1468407990, "question_id": 38348354, "link": "https://stackoverflow.com/questions/38348354/ruby-connect-to-couchbase", "title": "Ruby: connect to Couchbase", "body": "<p>I want to connect to Couchbase DB server trough <a href=\"https://github.com/couchbase/couchbase-ruby-client\" rel=\"nofollow\">couchbase gem</a>.</p>\n\n<pre><code>require 'couchbase'\nc = Couchbase.connect('http://&lt;server&gt;:&lt;port&gt;/pools/default/buckets/auth')\n</code></pre>\n\n<p>I get an error:</p>\n\n<pre><code>*** Couchbase::Error::BucketNotFound Exception: bootstrap error, The bucket requested does not exist\n</code></pre>\n\n<p>The following code works with the (<a href=\"https://pypi.python.org/pypi/couchbase\" rel=\"nofollow\">couchbase python package</a>):</p>\n\n<pre><code>from couchbase.bucket import Bucket\nc = Bucket('couchbase://&lt;server&gt;/auth')\n</code></pre>\n\n<p>How I can connect from ruby by using connection string <code>couchbase://&lt;server&gt;/auth</code>?</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 1, "creation_date": 1468403918, "post_id": 38348274, "comment_id": 64109670, "body": "For future reference, questions like this are better posted on <a href=\"http://codereview.stackexchange.com/\">codereview.stackexchange.com</a> -- as you already have a solution to the problem, but are only seeking opinions on code quality."}], "answers": [{"comments": [{"owner": {"reputation": 11741, "user_id": 1934428, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/072774c5d4204a1c2385560e6114a887?s=128&d=identicon&r=PG", "display_name": "user1934428", "link": "https://stackoverflow.com/users/1934428/user1934428"}, "edited": false, "score": 0, "creation_date": 1468494327, "post_id": 38348587, "comment_id": 64155482, "body": "Unfortunately, this would give a wrong result. Imagine that the first haystack element would match the third needle, then I would get it as a result, even if the, say, second needle would match the last haystack element. Your solution finds the first haystack element matching <b>some</b> needle, i.e. all needles are treated equal."}, {"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "reply_to_user": {"reputation": 11741, "user_id": 1934428, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/072774c5d4204a1c2385560e6114a887?s=128&d=identicon&r=PG", "display_name": "user1934428", "link": "https://stackoverflow.com/users/1934428/user1934428"}, "edited": false, "score": 1, "creation_date": 1468500328, "post_id": 38348587, "comment_id": 64159487, "body": "Ahh sorry, I missed that point. This would have been clearer to me, if you had provided a more complete example showing this scenario. I&#39;ve updated my answer with two possible solutions."}, {"owner": {"reputation": 11741, "user_id": 1934428, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/072774c5d4204a1c2385560e6114a887?s=128&d=identicon&r=PG", "display_name": "user1934428", "link": "https://stackoverflow.com/users/1934428/user1934428"}, "edited": false, "score": 0, "creation_date": 1468834098, "post_id": 38348587, "comment_id": 64271736, "body": "Really great solutions, and I have learned now about <code>min_by</code>. If we go for efficiency, I should - as you pointed out - use the last version (<code>haystack.min_by ...</code>), <b>and</b> not go through the whole <code>needles</code> array as you suggested, but search only up to (but not including) the needle with lowest index, for which a haystack element has been found already. Unfortunately, this latter optimization makes the code more clumsy again."}, {"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "reply_to_user": {"reputation": 11741, "user_id": 1934428, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/072774c5d4204a1c2385560e6114a887?s=128&d=identicon&r=PG", "display_name": "user1934428", "link": "https://stackoverflow.com/users/1934428/user1934428"}, "edited": false, "score": 1, "creation_date": 1468836015, "post_id": 38348587, "comment_id": 64273032, "body": "Yeah, there&#39;s often a compromise needed between elegant and efficient code. But assuming your <code>haystack</code> and <code>needles</code> aren&#39;t huge, and the <code>predicate</code> isn&#39;t very computationally expensive, I wouldn&#39;t worry about it too much; you&#39;ll probably only be saving a few nano-seconds!"}, {"owner": {"reputation": 11741, "user_id": 1934428, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/072774c5d4204a1c2385560e6114a887?s=128&d=identicon&r=PG", "display_name": "user1934428", "link": "https://stackoverflow.com/users/1934428/user1934428"}, "edited": false, "score": 0, "creation_date": 1468851102, "post_id": 38348587, "comment_id": 64283444, "body": "Thanks, I will think about it. Actually, there are around 3 or 4 needles and the haystack is a few thousand elements deep. Unfortunately, this method is called quite often for different parameters to the predicate (around 100000 times in one run), so I think I will do some time measurements, for the safe side. Anyway, thank you for helping."}], "tags": [], "owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "is_accepted": true, "score": 1, "last_activity_date": 1468578713, "last_edit_date": 1468578713, "creation_date": 1468404409, "answer_id": 38348587, "question_id": 38348274, "link": "https://stackoverflow.com/questions/38348274/ruby-search-record-based-on-predicate-please-suggest-nicer-solutions/38348587#38348587", "title": "Ruby: Search record based on predicate - please suggest nicer solutions", "body": "<p>The important thing to note is that it's the <code>haystack</code> element you want to find, not the <code>needle</code>. Therefore, this variable needs to be the one in your outermost loop.</p>\n\n<p>It would then by more idiomatic to use <a href=\"http://ruby-doc.org/core/Enumerable.html#method-i-any-3F\" rel=\"nofollow\">Enumerable#any?</a> to check for the presence of needles which satisfy the predicate, since you really only care about the <code>true</code>/<code>false</code> return value.</p>\n\n<p>The end result is:</p>\n\n<pre><code>haystack.find do |he|\n  needles.any? { |needle| p(needle, he) }\nend\n</code></pre>\n\n<p><strong>EDIT:</strong> I misunderstood the question slightly, sorry. If we are <em>ordering</em> the needles, and finding the first haystack which satisfies the predicate the \"highest-ordered\" needle, then we could do:</p>\n\n<pre><code>haystack\n  .select { |he| needles.any? { |needle| p(needle, he) } }\n  .min_by { |he| needles.index { |needle| p(needle, he) } }\n</code></pre>\n\n<p>Or as an alternate (more efficient) solution, how about:</p>\n\n<pre><code>haystack.min_by do |he|\n  needles.index { |needle| p(needle, he) } || Float::INFINITY  \nend\n</code></pre>\n\n<p>This funny use of <code>Float::INFINITY</code> is used in case no <code>needles</code> match the condition for the <code>haystack</code> element, in which case the <code>index</code> method returns <code>nil</code>.</p>\n"}], "owner": {"reputation": 11741, "user_id": 1934428, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/072774c5d4204a1c2385560e6114a887?s=128&d=identicon&r=PG", "display_name": "user1934428", "link": "https://stackoverflow.com/users/1934428/user1934428"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 37, "favorite_count": 0, "accepted_answer_id": 38348587, "answer_count": 1, "score": 0, "last_activity_date": 1468833797, "creation_date": 1468403589, "last_edit_date": 1468833797, "question_id": 38348274, "link": "https://stackoverflow.com/questions/38348274/ruby-search-record-based-on-predicate-please-suggest-nicer-solutions", "title": "Ruby: Search record based on predicate - please suggest nicer solutions", "body": "<p>(I already wrote a solution to the problem below, but would like to ask whether someone could suggest a cleaner solution, more being in the \"Spirit\" of Ruby).</p>\n\n<p>PROBLEM: I have an (ordered) set of needles, an (ordered) set of elements in a haystack, and a predicate which takes a needle and a haystack element and yields true or false. The task is to find the first needle where there is some haystack element where the predicate is true, and then returns the haystack element. We are not interested in the needle. The needles and the haystack is represented as an Array.</p>\n\n<p>For example, if</p>\n\n<pre><code>needles = [17,3,7,121]\nhaystack = [40,30,70]\n</code></pre>\n\n<p>and the predicate is</p>\n\n<pre><code>def p(needle, hay)\n  hay % needle == 0\nend\n</code></pre>\n\n<p>the result should be 30, because for needle 17, no element in haystack fulfils the predicate, but for needle 3, the second element (30) does.</p>\n\n<p>Here is my implementation:</p>\n\n<pre><code>found = nil\nneedles.find do |n|\n  found = haystack.find { |he| p(n,he) }\n  break if found \nend\n</code></pre>\n\n<p>What I find a bit unnatural is that I basically throw away the result of the outer <code>find</code> and need to carry around the variable <code>found</code>, which eventually holds the result. I was looking for a more concise expression, which directly assigns the result to <code>found</code>, i.e.:</p>\n\n<pre><code>found = ...... \n</code></pre>\n\n<p>Any ideas?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "amazon-web-services"], "comments": [{"owner": {"reputation": 4110, "user_id": 517616, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/O19zB.jpg?s=128&g=1", "display_name": "Karl Laurentius Roos", "link": "https://stackoverflow.com/users/517616/karl-laurentius-roos"}, "edited": false, "score": 1, "creation_date": 1468403658, "post_id": 38348157, "comment_id": 64109498, "body": "Does the key you&#39;re using have access to <code>ec2::DescribeRegions</code>?"}, {"owner": {"reputation": 360, "user_id": 5782310, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/a7796118fedfdee029ea025d0034b643?s=128&d=identicon&r=PG&f=1", "display_name": "Sushant Bajracharya", "link": "https://stackoverflow.com/users/5782310/sushant-bajracharya"}, "reply_to_user": {"reputation": 4110, "user_id": 517616, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/O19zB.jpg?s=128&g=1", "display_name": "Karl Laurentius Roos", "link": "https://stackoverflow.com/users/517616/karl-laurentius-roos"}, "edited": false, "score": 0, "creation_date": 1468403767, "post_id": 38348157, "comment_id": 64109569, "body": "do i check that by loggin in my account?"}, {"owner": {"reputation": 4602, "user_id": 1141264, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/4af75d466ec6c84e3a0a9f1de61233ae?s=128&d=identicon&r=PG", "display_name": "DickieBoy", "link": "https://stackoverflow.com/users/1141264/dickieboy"}, "edited": false, "score": 1, "creation_date": 1468405732, "post_id": 38348157, "comment_id": 64110885, "body": "@SushantBajracharya you will need to go into: <code>IAM &gt; Users &gt; *username*</code> and attach the necessary policies."}, {"owner": {"reputation": 360, "user_id": 5782310, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/a7796118fedfdee029ea025d0034b643?s=128&d=identicon&r=PG&f=1", "display_name": "Sushant Bajracharya", "link": "https://stackoverflow.com/users/5782310/sushant-bajracharya"}, "reply_to_user": {"reputation": 4110, "user_id": 517616, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/O19zB.jpg?s=128&g=1", "display_name": "Karl Laurentius Roos", "link": "https://stackoverflow.com/users/517616/karl-laurentius-roos"}, "edited": false, "score": 0, "creation_date": 1468406299, "post_id": 38348157, "comment_id": 64111219, "body": "@KarlLaurentiusRoos, can u turn that into answer plz"}, {"owner": {"reputation": 4110, "user_id": 517616, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/O19zB.jpg?s=128&g=1", "display_name": "Karl Laurentius Roos", "link": "https://stackoverflow.com/users/517616/karl-laurentius-roos"}, "edited": false, "score": 0, "creation_date": 1468419689, "post_id": 38348157, "comment_id": 64120964, "body": "@SushantBajracharya done!"}], "answers": [{"tags": [], "owner": {"reputation": 11362, "user_id": 5017586, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b6cf237e6b3b0f4e8ed76d138336bed4?s=128&d=identicon&r=PG&f=1", "display_name": "error2007s", "link": "https://stackoverflow.com/users/5017586/error2007s"}, "is_accepted": false, "score": 2, "last_activity_date": 1468406281, "creation_date": 1468406281, "answer_id": 38349308, "question_id": 38348157, "link": "https://stackoverflow.com/questions/38348157/getting-the-list-of-aws-regions/38349308#38349308", "title": "Getting the list of aws regions", "body": "<p>This is the policy that needs to be added for you to have access to describe regions for ec2 instance. Create this custom policy in AWS IAM (Root User or a AWS Console Admin Will be able to do that).</p>\n\n<pre><code>{\n\"Version\": \"2012-10-17\",\n\"Statement\": [{\n  \"Effect\": \"Allow\",\n  \"Action\": \"ec2:Describe*\",\n  \"Resource\": \"*\"\n}]\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 4110, "user_id": 517616, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/O19zB.jpg?s=128&g=1", "display_name": "Karl Laurentius Roos", "link": "https://stackoverflow.com/users/517616/karl-laurentius-roos"}, "is_accepted": true, "score": 1, "last_activity_date": 1468419677, "creation_date": 1468419677, "answer_id": 38354334, "question_id": 38348157, "link": "https://stackoverflow.com/questions/38348157/getting-the-list-of-aws-regions/38354334#38354334", "title": "Getting the list of aws regions", "body": "<p>Judging by the error message you are getting all you have to do is make sure that the IAM user that owns the key has access to <code>ec2:: DescribeRegions</code>.</p>\n"}], "owner": {"reputation": 360, "user_id": 5782310, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/a7796118fedfdee029ea025d0034b643?s=128&d=identicon&r=PG&f=1", "display_name": "Sushant Bajracharya", "link": "https://stackoverflow.com/users/5782310/sushant-bajracharya"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 109, "favorite_count": 0, "accepted_answer_id": 38354334, "answer_count": 2, "score": 1, "last_activity_date": 1468419677, "creation_date": 1468403336, "last_edit_date": 1495541342, "question_id": 38348157, "link": "https://stackoverflow.com/questions/38348157/getting-the-list-of-aws-regions", "title": "Getting the list of aws regions", "body": "<p>I am trying to populate the aws regions in a dropdown and I followed <a href=\"https://stackoverflow.com/q/11661332/5782310\">this</a> issue as well but I keep getting error like</p>\n\n<pre><code>    [AWS EC2 403 1.950727 0 retries] describe_regions() AWS::EC2::Errors::UnauthorizedOperation You are not authorized to perform this operation.\n\nAWS::EC2::Errors::UnauthorizedOperation: You are not authorized to perform this operation.\n</code></pre>\n\n<p>I have the correct access keys but I have no idea why this is happening.</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1468402868, "post_id": 38347707, "comment_id": 64108968, "body": "So you want to <b>ignore</b> the <code>local timezone</code> information, and just save the raw value? What are you doing currently? (Edit your post to include the code.)"}, {"owner": {"reputation": 2300, "user_id": 2874507, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh4.googleusercontent.com/-bTf3QWEeXi0/AAAAAAAAAAI/AAAAAAAAAvA/G7Uh0JZWsOk/photo.jpg?sz=128", "display_name": "Abhilash", "link": "https://stackoverflow.com/users/2874507/abhilash"}, "reply_to_user": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1468403255, "post_id": 38347707, "comment_id": 64109237, "body": "@TomLord The checkin is for rooms and rooms are located in different time zones. But i think its too much headache to work with timezones and thought it would be easy to use the default utc. The form the user is submiting is an angular form with the javascript date object for the checkin date. So it will be based on the timezone of the user"}, {"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1468403638, "post_id": 38347707, "comment_id": 64109481, "body": "For a start, surely you need to be using the timezone <b>of the room</b> rather than the timezone <b>of the user</b>. Otherwise, booking a room in a non-UTC timezone will give surprising results. And again, I repeat, please include the relevant code in your post."}, {"owner": {"reputation": 2300, "user_id": 2874507, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh4.googleusercontent.com/-bTf3QWEeXi0/AAAAAAAAAAI/AAAAAAAAAvA/G7Uh0JZWsOk/photo.jpg?sz=128", "display_name": "Abhilash", "link": "https://stackoverflow.com/users/2874507/abhilash"}, "reply_to_user": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1468403950, "post_id": 38347707, "comment_id": 64109689, "body": "@TomLord  I dont have custom code for changing to utc. I am just saving the values as recieved from user. Rails is doing the conversion to utc asits recieved in different timezone.  Any way am updating the saving part of the code. sorry for the confusion.."}, {"owner": {"reputation": 2300, "user_id": 2874507, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh4.googleusercontent.com/-bTf3QWEeXi0/AAAAAAAAAAI/AAAAAAAAAvA/G7Uh0JZWsOk/photo.jpg?sz=128", "display_name": "Abhilash", "link": "https://stackoverflow.com/users/2874507/abhilash"}, "reply_to_user": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1468404353, "post_id": 38347707, "comment_id": 64109958, "body": "@TomLord I dont need the time part actually..The date is what am worried about. When showing the booked dates to the room owner am showing dates in utc itself without converting and not showing the time.."}], "answers": [{"tags": [], "owner": {"reputation": 2300, "user_id": 2874507, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh4.googleusercontent.com/-bTf3QWEeXi0/AAAAAAAAAAI/AAAAAAAAAvA/G7Uh0JZWsOk/photo.jpg?sz=128", "display_name": "Abhilash", "link": "https://stackoverflow.com/users/2874507/abhilash"}, "is_accepted": false, "score": 0, "last_activity_date": 1468408775, "creation_date": 1468408775, "answer_id": 38350234, "question_id": 38347707, "link": "https://stackoverflow.com/questions/38347707/preserving-datetime-values-in-rails-while-saving-in-utcdefault/38350234#38350234", "title": "preserving datetime values in rails while saving in utc(default)", "body": "<p>I have found a way to do that. It is not direct conversion as I expected but it works. I changed the form input field to sent a string with just the date and time(without utc). </p>\n\n<pre><code>eg: 2016-07-13 00:00:00\n</code></pre>\n\n<p>Then in my controller before saving I used below code to parse it to utc.\nreservation.check_in= Time.zone.parse(value_from_view)</p>\n\n<p><strong>example:</strong></p>\n\n<pre><code>reservation.check_in= Time.zone.parse('2016-07-13 00:00:00')\n</code></pre>\n\n<p>This returns <code>Wed, 13 Jul 2016 00:00:00 UTC +00:00</code> as expected.</p>\n"}], "owner": {"reputation": 2300, "user_id": 2874507, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh4.googleusercontent.com/-bTf3QWEeXi0/AAAAAAAAAAI/AAAAAAAAAvA/G7Uh0JZWsOk/photo.jpg?sz=128", "display_name": "Abhilash", "link": "https://stackoverflow.com/users/2874507/abhilash"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 35, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1468408775, "creation_date": 1468402099, "last_edit_date": 1468404940, "question_id": 38347707, "link": "https://stackoverflow.com/questions/38347707/preserving-datetime-values-in-rails-while-saving-in-utcdefault", "title": "preserving datetime values in rails while saving in utc(default)", "body": "<p>I have a a checkin:<code>datetime</code> field in <code>rails</code> and is using the default <code>utc</code>. </p>\n\n<p>But the issue is that when the <code>user</code> submits the <code>form</code> the <code>checkin</code> date is coming with his <code>local timezone</code> info. So rails will automatically <code>convert</code> this to utc and depending on the difference with his timezone and utc there might be an off of one day. </p>\n\n<p>So how can I <code>change</code> the <code>date</code> to <code>utc</code> without changing <code>values</code>?</p>\n\n<p><strong>Update</strong></p>\n\n<p>This is the only code I use for saving to database.(the utc conversion is done by activerecord(i think) if the passed in value is not utc)</p>\n\n<pre><code>   reservation=current_user.reservations.create(reservation_params)\n   reservation.save\n</code></pre>\n"}, {"tags": ["ruby", "sinatra"], "answers": [{"comments": [{"owner": {"reputation": 283, "user_id": 5962592, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/09e937e3c5361ac06e5c17d9f0a133db?s=128&d=identicon&r=PG&f=1", "display_name": "Jes", "link": "https://stackoverflow.com/users/5962592/jes"}, "edited": false, "score": 0, "creation_date": 1468401588, "post_id": 38347459, "comment_id": 64108059, "body": "thank you for your answer. Where should I put it? I pasted in into my main app, but it doesn&#39;t recognize word &quot;use&quot;"}, {"owner": {"reputation": 283, "user_id": 5962592, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/09e937e3c5361ac06e5c17d9f0a133db?s=128&d=identicon&r=PG&f=1", "display_name": "Jes", "link": "https://stackoverflow.com/users/5962592/jes"}, "edited": false, "score": 0, "creation_date": 1468401977, "post_id": 38347459, "comment_id": 64108330, "body": "thank you, the thing is now it redirects properly, but it still doesn&#39;t delete my basket item"}, {"owner": {"reputation": 283, "user_id": 5962592, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/09e937e3c5361ac06e5c17d9f0a133db?s=128&d=identicon&r=PG&f=1", "display_name": "Jes", "link": "https://stackoverflow.com/users/5962592/jes"}, "edited": false, "score": 0, "creation_date": 1468402761, "post_id": 38347459, "comment_id": 64108894, "body": "I tried different options. When I do it like in my first post, but with set :method_override, it redirects me properly, but doesn&#39;t delete an item. When I change route to basket/delete/:id as you suggested (and change form accordingly), after clicking on &quot;Delete&quot; button Sinatra gives me error page - it wants me to have action delete &quot;basket/delete/&quot; set. I did so - so now I have both delete &quot;basket/delete/:id&quot; and delete &quot;basket/delete/&quot;. Redirects workd now, but still it doesn&#39;t delete anything."}, {"owner": {"reputation": 27144, "user_id": 3857758, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/58c4295826435f049b7fc32b98c240f9?s=128&d=identicon&r=PG&f=1", "display_name": "Ursus", "link": "https://stackoverflow.com/users/3857758/ursus"}, "reply_to_user": {"reputation": 283, "user_id": 5962592, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/09e937e3c5361ac06e5c17d9f0a133db?s=128&d=identicon&r=PG&f=1", "display_name": "Jes", "link": "https://stackoverflow.com/users/5962592/jes"}, "edited": false, "score": 0, "creation_date": 1468403056, "post_id": 38347459, "comment_id": 64109103, "body": "No I&#39;m sorry I was wrong, you can pass your parameter either in the path or as parameter in your form. But I have no enough information to help you, I don&#39;t know which is the error."}, {"owner": {"reputation": 27144, "user_id": 3857758, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/58c4295826435f049b7fc32b98c240f9?s=128&d=identicon&r=PG&f=1", "display_name": "Ursus", "link": "https://stackoverflow.com/users/3857758/ursus"}, "reply_to_user": {"reputation": 283, "user_id": 5962592, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/09e937e3c5361ac06e5c17d9f0a133db?s=128&d=identicon&r=PG&f=1", "display_name": "Jes", "link": "https://stackoverflow.com/users/5962592/jes"}, "edited": false, "score": 0, "creation_date": 1468403250, "post_id": 38347459, "comment_id": 64109235, "body": "Let us <a href=\"http://chat.stackoverflow.com/rooms/117184/discussion-between-ursus-and-jes\">continue this discussion in chat</a>."}, {"owner": {"reputation": 283, "user_id": 5962592, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/09e937e3c5361ac06e5c17d9f0a133db?s=128&d=identicon&r=PG&f=1", "display_name": "Jes", "link": "https://stackoverflow.com/users/5962592/jes"}, "edited": false, "score": 0, "creation_date": 1468404104, "post_id": 38347459, "comment_id": 64109788, "body": "I hardcoded it: basket = BASKET.find{|p| p.id == 1 } and it works - so it&#39;s now deleting, the problem is somehow params[:id] is wrong value. Do you know how can I print my params? I tried like: delete &quot;basket/delete&quot; print params[:id] etc but it doesn&#39;t print them in my console"}], "tags": [], "owner": {"reputation": 27144, "user_id": 3857758, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/58c4295826435f049b7fc32b98c240f9?s=128&d=identicon&r=PG&f=1", "display_name": "Ursus", "link": "https://stackoverflow.com/users/3857758/ursus"}, "is_accepted": true, "score": 1, "last_activity_date": 1468401607, "last_edit_date": 1495535331, "creation_date": 1468401421, "answer_id": 38347459, "question_id": 38347172, "link": "https://stackoverflow.com/questions/38347172/sinatra-delete-action/38347459#38347459", "title": "Sinatra - delete action", "body": "<p>You need this component in your middleware pipeline <code>use Rack::MethodOverride</code> </p>\n\n<p>Another way seems to be put <code>set :method_override, true</code> in your <code>Sinatra::Base</code> class</p>\n\n<p>See <a href=\"https://stackoverflow.com/questions/5166484/sending-a-delete-request-from-sinatra\">this also</a> </p>\n"}], "owner": {"reputation": 283, "user_id": 5962592, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/09e937e3c5361ac06e5c17d9f0a133db?s=128&d=identicon&r=PG&f=1", "display_name": "Jes", "link": "https://stackoverflow.com/users/5962592/jes"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 712, "favorite_count": 0, "accepted_answer_id": 38347459, "answer_count": 1, "score": 0, "last_activity_date": 1468401607, "creation_date": 1468400634, "question_id": 38347172, "link": "https://stackoverflow.com/questions/38347172/sinatra-delete-action", "title": "Sinatra - delete action", "body": "<p>I have basic Store app - I want to be able to add product to basket and then delete it using Sinatra. My adding works, but I can't make delete to work too. I had special function for that, but now I just want to see whether delete route works at all. My main app has many routes, and part I'm talking about is:</p>\n\n<pre><code>    post '/basket' do  #it works, adds to basket and redirects\n      AddToBasket.new(params).call\n      redirect '/'\n    end\n\n\n     delete \"/basket/delete\" do #it doesn't work at all and doesn't redirect\n      basket = BASKET.find{|p| p.id == params[\"id\"]}    \n      BASKET.delete(basket)\n      redirect \"/\"\n     end\n</code></pre>\n\n<p>In HTML I have:</p>\n\n<pre><code> &lt;% basket.each do |b| %&gt;\n &lt;form action=\"basket/delete\" method=\"post\"&gt;\n    &lt;input type=\"hidden\" name=\"_method\" value=\"delete\"&gt;\n    &lt;input type=\"hidden\" name=\"id\" value=&lt;%= b.id %&gt;&gt;\n    &lt;button type=\"submit\"&gt;Delete&lt;/button&gt;\n &lt;/form&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>As you can see, after clicking on \"Delete\" button, I'm sending \"id\" in my params helper. </p>\n\n<pre><code>basket = BASKET.find{|p| p.id == params[\"id\"]} \n</code></pre>\n\n<p>should find one specific item with this id and delete it from my big array BASKET. But it doesn't work, after clicking on \"Delete\" I'm otransferred to basket/delete page and I have an error, because post for basket/delete doesn't exist. It should redirect me to my index page. What's more, it doesn't delete my basket item, it still exists. I'll appreciate any help.</p>\n"}, {"tags": ["ruby", "jenkins", "command", "chef-infra", "cookbook"], "comments": [{"owner": {"reputation": 15030, "user_id": 3627607, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bd5fd623c0fdd0c93a2535cf6293ec5d?s=128&d=identicon&r=PG", "display_name": "Tensibai", "link": "https://stackoverflow.com/users/3627607/tensibai"}, "edited": false, "score": 0, "creation_date": 1468412664, "post_id": 38347072, "comment_id": 64115563, "body": "&quot;but I can&#39;t become familiar with writing these recipes...&quot; &lt;- ??? Are you saying you don&#39;t want to learn and asking for someone else to do the job for you ?"}, {"owner": {"reputation": 43, "user_id": 6556183, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/7e2be03d80557ec6e1e90d652c978918?s=128&d=identicon&r=PG&f=1", "display_name": "pulpet112", "link": "https://stackoverflow.com/users/6556183/pulpet112"}, "reply_to_user": {"reputation": 15030, "user_id": 3627607, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bd5fd623c0fdd0c93a2535cf6293ec5d?s=128&d=identicon&r=PG", "display_name": "Tensibai", "link": "https://stackoverflow.com/users/3627607/tensibai"}, "edited": false, "score": 0, "creation_date": 1468416118, "post_id": 38347072, "comment_id": 64118158, "body": "No. I mean that I&#39;m beginner with writing recipes. I read documentation, I have basic theoretical knowlege but I have problems with practical use. I have command and I have to convert it to chef recipe, I have a lots of commands like this. Here I am asking for one example how to do this, not doing my job by somone else."}], "answers": [{"tags": [], "owner": {"reputation": 15030, "user_id": 3627607, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bd5fd623c0fdd0c93a2535cf6293ec5d?s=128&d=identicon&r=PG", "display_name": "Tensibai", "link": "https://stackoverflow.com/users/3627607/tensibai"}, "is_accepted": true, "score": 0, "last_activity_date": 1468416268, "creation_date": 1468416268, "answer_id": 38353059, "question_id": 38347072, "link": "https://stackoverflow.com/questions/38347072/chef-cookbook-recipe-executing-windows-batch-command/38353059#38353059", "title": "Chef cookbook recipe - executing windows batch command", "body": "<p>Something along the line:</p>\n\n<pre><code>execute \"install\" do\n  command %Q{pc.exe \"\\\\[some folder]\" -u \"admin\" -p [pass] cmd /c \"cd /D C:\\some folders] &amp;&amp; install.bat\"}\n  cwd \"d:\\[some path]\"\nend\n</code></pre>\n\n<p>should do. \nWithout any insight on what does this command at all, it's hard to give a better advice, as for the placeholders, using attributes should be the way to go, but it's hard to tell without an entry point.</p>\n\n<p>More details <a href=\"https://docs.chef.io/resource_execute.html\" rel=\"nofollow\">in the documentation</a></p>\n"}], "owner": {"reputation": 43, "user_id": 6556183, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/7e2be03d80557ec6e1e90d652c978918?s=128&d=identicon&r=PG&f=1", "display_name": "pulpet112", "link": "https://stackoverflow.com/users/6556183/pulpet112"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1396, "favorite_count": 0, "accepted_answer_id": 38353059, "answer_count": 1, "score": -2, "last_activity_date": 1468416268, "creation_date": 1468400370, "last_edit_date": 1468408314, "question_id": 38347072, "link": "https://stackoverflow.com/questions/38347072/chef-cookbook-recipe-executing-windows-batch-command", "title": "Chef cookbook recipe - executing windows batch command", "body": "<p>I need help in writing chef recipes. I have some jobs in Jenkins and they are done by Execute Windows batch command. I have to rewrite this commands to chef recipe but I can't become familiar with writing these recipes... I need some example of this kind of \"rewriting\".</p>\n\n<p>For instance, this command:</p>\n\n<pre><code>D: &amp;&amp; cd D:\\[some path] &amp;&amp; pc.exe \"\\\\[some folder]\" -u \"admin\" -p [pass] cmd /c \"c: &amp;&amp; cd C:\\some folders]\\ &amp;&amp; install.bat\"\n</code></pre>\n\n<p>need to be rewrite to chef reciepe.\nI can show other commands if it is needed.</p>\n\n<p>I would by grateful to all kind of help</p>\n"}, {"tags": ["ruby", "selenium-webdriver", "rake", "selenium-grid"], "owner": {"reputation": 313, "user_id": 2695818, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/71321de399d47802a3bc1636d4addc64?s=128&d=identicon&r=PG&f=1", "display_name": "yudi2312", "link": "https://stackoverflow.com/users/2695818/yudi2312"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 120, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1468398447, "creation_date": 1468398288, "last_edit_date": 1468398447, "question_id": 38346325, "link": "https://stackoverflow.com/questions/38346325/run-rake-task-in-parallel-using-different-parameters", "title": "Run Rake task in parallel using different parameters", "body": "<p>I've a scenario where data has to be loaded from different input files. So my current approach is to execute the loader script using selenium grid in 10 different systems. Each system will have their own input files and other information like PORT, IP_ADDRESS for grid will also be passed in rake task itself. Now, these information will be saved in an excel file and code has to be written to build n number of rake task with different environment variables and then execute them all together.</p>\n\n<p>I'm unable to come up with a way where all the task will be created automatically and executed as well. </p>\n\n<p>I know it has to be done using 'parallel_test' gem or rake multi-task feature but don't know how exactly this can be achieved. Any other approach is also welcomed. </p>\n"}, {"tags": ["ruby", "capybara"], "answers": [{"comments": [{"owner": {"reputation": 517, "user_id": 4200859, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/72fe764d26ac6cb9d3a5bbeaa45fc1be?s=128&d=identicon&r=PG&f=1", "display_name": "Max", "link": "https://stackoverflow.com/users/4200859/max"}, "edited": false, "score": 0, "creation_date": 1468429932, "post_id": 38348203, "comment_id": 64128002, "body": "Exporting the cookies sounds like the best way then, and page.driver.browser.manage.all_cookies has my cookies in a hash, but how do I get that to a cookies.txt format? I&#39;ve been googling the Mozilla format but I can&#39;t find any gem that supports conversion.. do I need to write my own?"}, {"owner": {"reputation": 42014, "user_id": 2709090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/238c2b7cde2c817fc9a5a2b8eaa2ffad?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas Walpole", "link": "https://stackoverflow.com/users/2709090/thomas-walpole"}, "reply_to_user": {"reputation": 517, "user_id": 4200859, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/72fe764d26ac6cb9d3a5bbeaa45fc1be?s=128&d=identicon&r=PG&f=1", "display_name": "Max", "link": "https://stackoverflow.com/users/4200859/max"}, "edited": false, "score": 0, "creation_date": 1468431746, "post_id": 38348203, "comment_id": 64129073, "body": "@Max Yes you&#39;d need to write them out yourself -- <a href=\"https://xiix.wordpress.com/2006/03/23/mozillafirefox-cookie-format/\" rel=\"nofollow noreferrer\">xiix.wordpress.com/2006/03/23/mozillafirefox-cookie-format</a> is an article that explains the format, it&#39;s pretty basic."}], "tags": [], "owner": {"reputation": 42014, "user_id": 2709090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/238c2b7cde2c817fc9a5a2b8eaa2ffad?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas Walpole", "link": "https://stackoverflow.com/users/2709090/thomas-walpole"}, "is_accepted": false, "score": 0, "last_activity_date": 1468403447, "creation_date": 1468403447, "answer_id": 38348203, "question_id": 38345745, "link": "https://stackoverflow.com/questions/38345745/capybara-downloading-and-using-file/38348203#38348203", "title": "Capybara + Downloading and using file", "body": "<p>For #3 - accessing the cookies is driver dependent - in selenium it's </p>\n\n<pre><code>page.driver.browser.manage.all_cookies\n</code></pre>\n\n<p>or you can use the <a href=\"https://github.com/nruth/show_me_the_cookies\" rel=\"nofollow\">https://github.com/nruth/show_me_the_cookies</a> gem which normalizes access across most of Capybaras drivers.  With those cookies you can write them out to a file and then use the <code>--load-cookies</code> option of wget (<code>--cookie</code> option in curl)</p>\n\n<p>For #1 you'd need to provide more info about any errors you get, what is current_url, what does \"doesn't work\" actually mean, etc </p>\n"}], "owner": {"reputation": 517, "user_id": 4200859, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/72fe764d26ac6cb9d3a5bbeaa45fc1be?s=128&d=identicon&r=PG&f=1", "display_name": "Max", "link": "https://stackoverflow.com/users/4200859/max"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 509, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1468403447, "creation_date": 1468396564, "question_id": 38345745, "link": "https://stackoverflow.com/questions/38345745/capybara-downloading-and-using-file", "title": "Capybara + Downloading and using file", "body": "<p>I'm using Capybara to navigate through a login on a website and then download a few files (I'm automating a frequent process that I have to do). There's a few things I tried that aren't working and I'm hoping someone might know a solution...</p>\n\n<ol>\n<li><p>I have the two links I'm executing .click on, but while one file will start downloading (this is using the Chrome Selenium driver), capybara seems to stop functioning after that. Running .click on the other link doesn't do anything... I figured it's because it's not technically on the page anymore (since it followed a download link) but I tried revisiting the page to click the second link and that doesn't work either.</p>\n\n<ol start=\"2\">\n<li><p>Assuming I can get that working, I'd really like to be able to download to my script location rather than my Downloads folder, but I've tried every profile configuration I've found online and nothing seems to change it.</p></li>\n<li><p>Because of the first two issues, I decided to try wget... but I would need to continue from the session in capybara to authenticate. Is it possible to pull the session data (just cookies?) from capybara and insert it into a wget or curl command?</p></li>\n</ol></li>\n</ol>\n\n<p>Thanks!</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "database", "activerecord", "database-design"], "answers": [{"tags": [], "owner": {"reputation": 227, "user_id": 2559962, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/eec912dca27690e9850065a97aba3071?s=128&d=identicon&r=PG", "display_name": "Inf", "link": "https://stackoverflow.com/users/2559962/inf"}, "is_accepted": false, "score": 0, "last_activity_date": 1468396173, "creation_date": 1468396173, "answer_id": 38345625, "question_id": 38345170, "link": "https://stackoverflow.com/questions/38345170/how-could-i-best-structure-these-similar-models/38345625#38345625", "title": "How could I best structure these similar models?", "body": "<p>Another option would be to use <a href=\"http://guides.rubyonrails.org/association_basics.html#polymorphic-associations\" rel=\"nofollow\">Polymorphic associations</a>:</p>\n\n<pre><code>class Order &lt; ApplicationRecord\n  belongs_to :specific, polymorphic: true, dependent: :destroy\nend\n\nclass EbayOrder &lt; ApplicationRecord\n  has_one :order, as: :specific\nend\n\nclass AmazonOrder &lt; ApplicationRecord\n  has_one :order, as: :specific\nend\n</code></pre>\n\n<p>In <code>Order</code> model you can keep shared attributes, but for custom attributes you can use separate model. Anyway this approach makes querying a database more complex.</p>\n\n<p>Also if you use Postgres then you can review another approach: keep all orders in one table but create JSON column for custom attributes.</p>\n"}], "owner": {"reputation": 169, "user_id": 5455070, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/399d93a061baaf69edaed19dddf44920?s=128&d=identicon&r=PG&f=1", "display_name": "yakattack", "link": "https://stackoverflow.com/users/5455070/yakattack"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 63, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1468396173, "creation_date": 1468394692, "question_id": 38345170, "link": "https://stackoverflow.com/questions/38345170/how-could-i-best-structure-these-similar-models", "title": "How could I best structure these similar models?", "body": "<p>I have n models that represent orders, e.g. <code>EbayOrder</code> and <code>AmazonOrder</code>. Each order model has slightly different fields but they all represent the same basic thing, an order.</p>\n\n<p>The problem is that I frequently need to query all my orders to display them in views, add up fees and sales totals, and perform other analyses on them. It's tricky to do this when the models are separate entities.</p>\n\n<p>Here are some options I've considered:</p>\n\n<p><strong>STI</strong></p>\n\n<p>The STI table would likely be dozens of columns wide.</p>\n\n<p><strong>Keeping separate models but generating a replica <code>Order</code> model with normalized data</strong></p>\n\n<p>This would be a slave 'generic' model that would be a one-to-one duplicate of each type of order, but have more normalized cleaner data. I don't like this option because of the data duplication required.</p>\n\n<p><strong>Normalize all order types into a single <code>Order</code> model</strong></p>\n\n<p>Would be ideal if the data were similar enough, but they're pretty different among order types.</p>\n"}, {"tags": ["ruby", "sinatra", "erb"], "answers": [{"comments": [{"owner": {"reputation": 59, "user_id": 5433989, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/1063d58b53fc013af0cb29e2d2e51847?s=128&d=identicon&r=PG&f=1", "display_name": "sonukrishna", "link": "https://stackoverflow.com/users/5433989/sonukrishna"}, "edited": false, "score": 0, "creation_date": 1468397738, "post_id": 38345433, "comment_id": 64105507, "body": "okkkey, danx    but i just need to knew about the date timepicker"}, {"owner": {"reputation": 1135, "user_id": 1638009, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/cce87e94a76af5a587b5c9fe48461910?s=128&d=identicon&r=PG", "display_name": "Shimu", "link": "https://stackoverflow.com/users/1638009/shimu"}, "reply_to_user": {"reputation": 59, "user_id": 5433989, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/1063d58b53fc013af0cb29e2d2e51847?s=128&d=identicon&r=PG&f=1", "display_name": "sonukrishna", "link": "https://stackoverflow.com/users/5433989/sonukrishna"}, "edited": false, "score": 0, "creation_date": 1468397955, "post_id": 38345433, "comment_id": 64105637, "body": "You don&#39;t have to do anything in Ruby at all. If you wan&#39;t to do it inline in your erb file, than make a script tag with a <code>$.ready()</code> function where you write your init ( <code>$(&quot;#jobdate_from&quot;).datepicker()</code> )"}, {"owner": {"reputation": 59, "user_id": 5433989, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/1063d58b53fc013af0cb29e2d2e51847?s=128&d=identicon&r=PG&f=1", "display_name": "sonukrishna", "link": "https://stackoverflow.com/users/5433989/sonukrishna"}, "edited": false, "score": 0, "creation_date": 1468479283, "post_id": 38345433, "comment_id": 64146144, "body": "but it just a datepicker, i also need a timepicker with it"}], "tags": [], "owner": {"reputation": 1135, "user_id": 1638009, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/cce87e94a76af5a587b5c9fe48461910?s=128&d=identicon&r=PG", "display_name": "Shimu", "link": "https://stackoverflow.com/users/1638009/shimu"}, "is_accepted": false, "score": 0, "last_activity_date": 1468395541, "creation_date": 1468395541, "answer_id": 38345433, "question_id": 38344938, "link": "https://stackoverflow.com/questions/38344938/date-and-time-picker-in-ruby/38345433#38345433", "title": "Date and Time picker in Ruby", "body": "<p>Your date picker is a HTML/CSS/JS thing.<br>\nWrite the correct markup in your erb file, put your styleing in a corresponding CSS file and write your initialization in your js file.<br>\nTo include it in your generated HTML you can set your public folder with the<br>\n   <code>set :public_folder, Proc.new { File.join(root, \"static\") }</code><br>\ncommand. (Has only to be done if it is not called public anyway). Be sure to create a stylesheet/javascript folder underneath.<br>\nIf you have done this, you can access your js/css files from within your erb file as you would access a normal method because the view is evaluated in the same context as your method where you called it.</p>\n"}], "owner": {"reputation": 59, "user_id": 5433989, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/1063d58b53fc013af0cb29e2d2e51847?s=128&d=identicon&r=PG&f=1", "display_name": "sonukrishna", "link": "https://stackoverflow.com/users/5433989/sonukrishna"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 169, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1468395541, "creation_date": 1468394010, "question_id": 38344938, "link": "https://stackoverflow.com/questions/38344938/date-and-time-picker-in-ruby", "title": "Date and Time picker in Ruby", "body": "<p>I like to start a simple work in sinatra(small ruby framework). For this purpose i like to know how to use a date and time picker in ruby. I use a datepicker like below</p>\n\n<pre><code>$(\"#jobdate_from\").datepicker(); $(\"#jobdate_to\").datepicker();\n</code></pre>\n\n<p>I wrote this line in an erb file, if anyone know, at least have an idea about this, please share</p>\n\n<p>Thank you </p>\n"}, {"tags": ["ruby-on-rails", "ruby", "foursquare", "rest-client"], "comments": [{"owner": {"reputation": 742, "user_id": 601555, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b70354d05caf6bdf7e7953713c1cd4?s=128&d=identicon&r=PG", "display_name": "Ilija Eftimov", "link": "https://stackoverflow.com/users/601555/ilija-eftimov"}, "edited": false, "score": 0, "creation_date": 1468400571, "post_id": 38344871, "comment_id": 64107398, "body": "Wild hunch - can you try <code>RestClient.post(url, payload, content_type: &#39;image&#47;jpeg&#39;, file: File.new(file, &quot;rb&quot;)})</code> ?"}, {"owner": {"reputation": 817, "user_id": 2143582, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/d57a53ae465476f71e6e8294e438455c?s=128&d=identicon&r=PG", "display_name": "Ananth", "link": "https://stackoverflow.com/users/2143582/ananth"}, "reply_to_user": {"reputation": 742, "user_id": 601555, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b70354d05caf6bdf7e7953713c1cd4?s=128&d=identicon&r=PG", "display_name": "Ilija Eftimov", "link": "https://stackoverflow.com/users/601555/ilija-eftimov"}, "edited": false, "score": 0, "creation_date": 1468403767, "post_id": 38344871, "comment_id": 64109570, "body": "@IleEftimov Getting <code>&quot;{\\&quot;meta\\&quot;:{\\&quot;code\\&quot;:400,\\&quot;errorType\\&quot;:\\&quot;invalid_auth\\&quot;,\\&quot;er&zwnj;&#8203;rorDetail\\&quot;:\\&quot;Missin&zwnj;&#8203;g access credentials. See https:\\\\&#47;\\\\&#47;developer.foursquare.com\\\\&#47;docs\\\\&#47;oauth.html for details.\\&quot;},\\&quot;response\\&quot;:{}}&quot;</code> as the response.I&#39;m guessing the oauth_token is going as a part of the headers instead of query params? Don&#39;t know.  Debugging it with Net::HTTP with set_debug_output. Will update once I get the data."}], "owner": {"reputation": 817, "user_id": 2143582, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/d57a53ae465476f71e6e8294e438455c?s=128&d=identicon&r=PG", "display_name": "Ananth", "link": "https://stackoverflow.com/users/2143582/ananth"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 110, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1468408270, "creation_date": 1468393779, "last_edit_date": 1592644375, "question_id": 38344871, "link": "https://stackoverflow.com/questions/38344871/foursquare-photo-upload-using-rest-client", "title": "Foursquare photo upload using rest-client", "body": "<p>I'm trying to upload a photo for a venue using the following request using <a href=\"https://github.com/rest-client/rest-client\" rel=\"nofollow noreferrer\">rest-client</a>:</p>\n<pre><code>url = &quot;https://api.foursquare.com/v2/photos/add&quot;\npayload = {&quot;venueId&quot;=&gt;&lt;venueId&gt;, &quot;v&quot;=&gt;&lt;api version&gt;, &quot;oauth_token&quot;=&gt; oauth_token}\n    \nRestClient.post(url, payload, content_type: 'image/jpeg', :upload =&gt; {file: File.new(file, &quot;rb&quot;)})\n</code></pre>\n<p>The response I keep getting is:</p>\n<p><code>400 Bad Request: {&quot;meta&quot;:{&quot;code&quot;:400,&quot;errorType&quot;:&quot;other&quot;,&quot;errorDetail&quot;:&quot;Missing file upload&quot;,&quot;requestId&quot;:&quot;5785e24f498e5d2c551de22b&quot;},&quot;notifications&quot;:[{&quot;type&quot;:&quot;notificationTray&quot;,&quot;item&quot;:{&quot;unreadCount&quot;:0}}],&quot;response&quot;:{}}</code></p>\n<p>The request that is being sent out is:</p>\n<p><code>RestClient.post &quot;https://api.foursquare.com/v2/photos/add&quot;, &quot;venueId=xxxxxxxx&amp;v=xxxxxx&amp;oauth_token=xxxxxx&quot;, &quot;Accept&quot;=&gt;&quot;*/*; q=0.5, application/xml&quot;, &quot;Accept-Encoding&quot;=&gt;&quot;gzip, deflate&quot;, &quot;Content-Length&quot;=&gt;&quot;104&quot;, &quot;Content-Type&quot;=&gt;&quot;application/x-www-form-urlencoded&quot;, &quot;Upload&quot;=&gt;&quot;{:file=&gt;#&lt;File:/tmp/location_photos/2c07b63affc74e5ba6c2e232beb43a05.jpg&gt;}&quot;</code></p>\n<p>I'm unable to move past this step. Should I look into other http clients or is there a way I can get this done using rest-client itself? Thanks in advance. Cheers!</p>\n<p><strong>update</strong></p>\n<p>I tried the same in <code>Net::HTTP</code> with <code>http.set_debug_output($stdout)</code>.\nI have pasted the response in a gist(was unable to format the response here. :3). You can access the gist here: <code>https://gist.github.com/ananth99/86381b37594df969b0f0c2911d7d7a69</code></p>\n"}, {"tags": ["ruby-on-rails", "ruby", "rails-admin"], "answers": [{"tags": [], "owner": {"reputation": 98, "user_id": 4518937, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3jMTY.jpg?s=128&g=1", "display_name": "Vasanth", "link": "https://stackoverflow.com/users/4518937/vasanth"}, "is_accepted": false, "score": 1, "last_activity_date": 1468393357, "creation_date": 1468393357, "answer_id": 38344727, "question_id": 38344058, "link": "https://stackoverflow.com/questions/38344058/rails-admin-customization-in-the-labels/38344727#38344727", "title": "rails admin customization in the labels", "body": "<p>The rails_admin configuration has label for this purpose. A different label can be used for the model to be displayed in the admin panel. </p>\n\n<p><code>RailsAdmin.config {|c| c.label_methods &lt;&lt; :description}</code></p>\n\n<p><a href=\"https://github.com/sferik/rails_admin/wiki/Models\" rel=\"nofollow\">rails_admin wiki</a></p>\n"}], "owner": {"reputation": 31, "user_id": 6443675, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/776479b48b1b6344d178dbfd1d873224?s=128&d=identicon&r=PG&f=1", "display_name": "Suraj", "link": "https://stackoverflow.com/users/6443675/suraj"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 306, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1468393357, "creation_date": 1468391106, "question_id": 38344058, "link": "https://stackoverflow.com/questions/38344058/rails-admin-customization-in-the-labels", "title": "rails admin customization in the labels", "body": "<p>I am using rails admin for my app.</p>\n\n<p>Under <code>rails_admin.rb</code>, I have something like this</p>\n\n<pre><code>config.model Serve do\n exclude_fields :list_id\nend\n</code></pre>\n\n<p>Then in my model for <code>serve.rb</code>, I have something like this</p>\n\n<pre><code>class Serve &lt; ActiveRecord::Base\n  has_and_belongs_to_many :lists\nmount_uploader :servimage, PhotoUploader\nend\n</code></pre>\n\n<p>Now in the admin panel, Instead of label <strong>Serve</strong>, I want to rename it to <strong>Serve Now</strong></p>\n\n<p>So my question is, to do so, I have to change the schema? Or How can I do that?</p>\n\n<p>Please help. </p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1468406372, "post_id": 38343681, "comment_id": 64111261, "body": "edited answer to add a example of how to do this, rather than simply advising against it"}], "answers": [{"tags": [], "owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "is_accepted": false, "score": 3, "last_activity_date": 1468954003, "last_edit_date": 1468954003, "creation_date": 1468391401, "answer_id": 38344138, "question_id": 38343681, "link": "https://stackoverflow.com/questions/38343681/rails-how-to-use-a-method-from-a-controller-in-application-rb/38344138#38344138", "title": "Rails - How to use a method from a controller in application.rb?", "body": "<p>Really, you shouldn't. The better approach would be to refactor the controller method into somewhere globally accessible, such as a file in the <code>config/initializers</code> file or in application.rb itself. Then call it from the controller. The reason being that controller methods have access to special variables such as <code>request</code> and <code>params</code> which won't be available elsewhere. So it's one of those aspects of Rails development which can be considered part of the framework's design. It's easier to learn how to do things the right way. </p>\n\n<hr>\n\n<p>This being said, it is possible.</p>\n\n<p>Say I have a route in <code>PagesController</code> called <code>root</code>. It's easy to initialize the controller:</p>\n\n<pre><code>controller = PagesController.new\n</code></pre>\n\n<p>but running <code>controller.root</code> raises an error: </p>\n\n<pre><code>NoMethodError: undefined method `parameters' for nil:NilClass\n</code></pre>\n\n<p>Some context is required to explain why this error was raised. My controller has a secure_params method which is called whenever any route is run. This methods expects a <code>params</code> object to be defined in the controller. I also have a <code>before_action</code> in my controller which references <code>session</code>. Both these objects are defined on the <code>request</code> object, which I can \"mock\" like so:</p>\n\n<pre><code>class FakeRequest\n  def parameters\n    {}\n  end \n  def session\n    {}\n  end \nend\n</code></pre>\n\n<p>which can be used like this:</p>\n\n<pre><code>controller = PagesController.new\ncontroller.request = FakeRequest.new\ncontroller.root\n</code></pre>\n\n<p>This will run the controller action, however the fake request object may need to be altered depending on what your controllers require to function correctly.</p>\n\n<p>If you're adamant about sharing controller methods throughout your app, it's probably easier to use class methods. This removes the necessity to construct a fake request and instantiate the controller. </p>\n"}], "owner": {"reputation": 40732, "user_id": 984621, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/817afccebcbe3a4983a5e8c584f30373?s=128&d=identicon&r=PG", "display_name": "user984621", "link": "https://stackoverflow.com/users/984621/user984621"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 661, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1468954003, "creation_date": 1468389578, "question_id": 38343681, "link": "https://stackoverflow.com/questions/38343681/rails-how-to-use-a-method-from-a-controller-in-application-rb", "title": "Rails - How to use a method from a controller in application.rb?", "body": "<p>I have a simple method in the <code>ApplicationController</code> that makes a call to database and load some data. I would need to run it in <code>application.rb</code>, like this:</p>\n\n<pre><code>MY_CONST = method_in_application_controller\n</code></pre>\n\n<p>But I get this error:</p>\n\n<pre><code>&lt;top (required)&gt;': undefined local variable or method `method_in_application_controller' for main:Object (NameError)\n</code></pre>\n\n<p>How to load the data in from database in <code>application.rb</code> file?</p>\n\n<p>Thank you.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "authentication", "devise"], "comments": [{"owner": {"reputation": 26120, "user_id": 219883, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/c35b5b0f9e7cce48864f4f1545ead995?s=128&d=identicon&r=PG", "display_name": "Taryn East", "link": "https://stackoverflow.com/users/219883/taryn-east"}, "edited": false, "score": 1, "creation_date": 1468391999, "post_id": 38343622, "comment_id": 64102048, "body": "do you have an <code>after_sign_in_path</code> set? <a href=\"http://www.rubydoc.info/github/plataformatec/devise/Devise/Controllers/Helpers:after_sign_in_path_for\" rel=\"nofollow noreferrer\">rubydoc.info/github/plataformatec/devise/Devise/Controllers/&zwnj;&#8203;&hellip;</a>  If not - you&#39;ll probably get redirected to the root path... which in your case is <code>&#47;</code>"}, {"owner": {"reputation": 10234, "user_id": 138513, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/42b570f6f4312a872c2fc671e3ddc82b?s=128&d=identicon&r=PG", "display_name": "Trejkaz", "link": "https://stackoverflow.com/users/138513/trejkaz"}, "reply_to_user": {"reputation": 26120, "user_id": 219883, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/c35b5b0f9e7cce48864f4f1545ead995?s=128&d=identicon&r=PG", "display_name": "Taryn East", "link": "https://stackoverflow.com/users/219883/taryn-east"}, "edited": false, "score": 0, "creation_date": 1468451404, "post_id": 38343622, "comment_id": 64138612, "body": "I set it explicitly to <code>&#39;&#47;&#39;</code> because I wasn&#39;t sure what it was defaulting to. But the root path also requires authentication. I&#39;m adding logs to show that indeed it does redirect there, but then gets a 401."}, {"owner": {"reputation": 26120, "user_id": 219883, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/c35b5b0f9e7cce48864f4f1545ead995?s=128&d=identicon&r=PG", "display_name": "Taryn East", "link": "https://stackoverflow.com/users/219883/taryn-east"}, "edited": false, "score": 0, "creation_date": 1468453802, "post_id": 38343622, "comment_id": 64139201, "body": "ok, but I guess I was answering your question &quot;why isn&#39;t it signing me in?&quot; with &quot;it is... it&#39;s just then redirecting you back to the root path&quot;... if you want it to redirect you somewhere else after signing in, then you need to change after_signin_path_for. If you want h3e root path to show whether or not you&#39;re signed in, you&#39;ll need something on the page that indicates it eg <code>if signed_in? puts &quot;Welcome to my site&quot; else &#39;login here&#39;</code> or whatever..."}, {"owner": {"reputation": 10234, "user_id": 138513, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/42b570f6f4312a872c2fc671e3ddc82b?s=128&d=identicon&r=PG", "display_name": "Trejkaz", "link": "https://stackoverflow.com/users/138513/trejkaz"}, "reply_to_user": {"reputation": 26120, "user_id": 219883, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/c35b5b0f9e7cce48864f4f1545ead995?s=128&d=identicon&r=PG", "display_name": "Taryn East", "link": "https://stackoverflow.com/users/219883/taryn-east"}, "edited": false, "score": 0, "creation_date": 1468461940, "post_id": 38343622, "comment_id": 64140923, "body": "I think getting a 401 when visiting the root path is pretty conclusively saying that the user is not signed in. See the logs I edited into the question."}, {"owner": {"reputation": 10234, "user_id": 138513, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/42b570f6f4312a872c2fc671e3ddc82b?s=128&d=identicon&r=PG", "display_name": "Trejkaz", "link": "https://stackoverflow.com/users/138513/trejkaz"}, "reply_to_user": {"reputation": 26120, "user_id": 219883, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/c35b5b0f9e7cce48864f4f1545ead995?s=128&d=identicon&r=PG", "display_name": "Taryn East", "link": "https://stackoverflow.com/users/219883/taryn-east"}, "edited": false, "score": 0, "creation_date": 1468462287, "post_id": 38343622, "comment_id": 64141001, "body": "So it seems like perhaps the question could now read, &quot;Why is Devise immediately signing me out after signing me in?&quot;"}, {"owner": {"reputation": 26120, "user_id": 219883, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/c35b5b0f9e7cce48864f4f1545ead995?s=128&d=identicon&r=PG", "display_name": "Taryn East", "link": "https://stackoverflow.com/users/219883/taryn-east"}, "edited": false, "score": 0, "creation_date": 1468471211, "post_id": 38343622, "comment_id": 64143015, "body": "How about this: just try an after_sign_in_path _for... that is different form the root path... doesn&#39;t matter what as long as it&#39;s a page that you have to be signed in to see... and see what happens. I have this vague memory of there being something slightly different you have to do for a page that serves as both login and non-logged-in. This is why I am pushing you to actually try this tack. Once you have tried it and seen whether or not it works... then we can distinguish this option from any other problem that is going on."}, {"owner": {"reputation": 10234, "user_id": 138513, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/42b570f6f4312a872c2fc671e3ddc82b?s=128&d=identicon&r=PG", "display_name": "Trejkaz", "link": "https://stackoverflow.com/users/138513/trejkaz"}, "reply_to_user": {"reputation": 26120, "user_id": 219883, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/c35b5b0f9e7cce48864f4f1545ead995?s=128&d=identicon&r=PG", "display_name": "Taryn East", "link": "https://stackoverflow.com/users/219883/taryn-east"}, "edited": false, "score": 0, "creation_date": 1468543302, "post_id": 38343622, "comment_id": 64182279, "body": "The actual sign-in page is not /, you just happen to see the sign-in page if you visit / without being signed in. So it isn&#39;t serving as both login and non-logged-in, you can only see it if you&#39;re logged in. So anyway, just now I tried overriding <code>after_sign_in_path_for</code> to return <code>&#39;&#47;users&#47;me&#39;</code> instead. The result is that it now redirects to that, which returns 401 and redirects back to /users/login."}, {"owner": {"reputation": 26120, "user_id": 219883, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/c35b5b0f9e7cce48864f4f1545ead995?s=128&d=identicon&r=PG", "display_name": "Taryn East", "link": "https://stackoverflow.com/users/219883/taryn-east"}, "edited": false, "score": 0, "creation_date": 1468544029, "post_id": 38343622, "comment_id": 64182433, "body": "yes, but I&#39;d be guessing that &#39;/&#39; is visible to users that aren&#39;t logged in. As I recall there is a special before_action that needs to be added to all actions that can be <i>both</i> logged in and also public. So it&#39;s not that <code>&#47;</code> is the sign-in page... but that it is visible in both logged-in and not logged-in states. Still... cool to know that that isn&#39;t the issue... there&#39;s something else. You possibly need some kind of skip-authentication on the actual authenticating action."}, {"owner": {"reputation": 10234, "user_id": 138513, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/42b570f6f4312a872c2fc671e3ddc82b?s=128&d=identicon&r=PG", "display_name": "Trejkaz", "link": "https://stackoverflow.com/users/138513/trejkaz"}, "reply_to_user": {"reputation": 26120, "user_id": 219883, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/c35b5b0f9e7cce48864f4f1545ead995?s=128&d=identicon&r=PG", "display_name": "Taryn East", "link": "https://stackoverflow.com/users/219883/taryn-east"}, "edited": false, "score": 0, "creation_date": 1468564605, "post_id": 38343622, "comment_id": 64187636, "body": "The only thing that kills me is that I can&#39;t see why it is signing them in with a &quot;poisoned&quot; user account which is immediately rejected for access in the very next action, when if I sign in manually, the same doesn&#39;t happen and I can access the front page with no problem."}], "answers": [{"tags": [], "owner": {"reputation": 10234, "user_id": 138513, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/42b570f6f4312a872c2fc671e3ddc82b?s=128&d=identicon&r=PG", "display_name": "Trejkaz", "link": "https://stackoverflow.com/users/138513/trejkaz"}, "is_accepted": false, "score": 0, "last_activity_date": 1468462185, "creation_date": 1468462185, "answer_id": 38364418, "question_id": 38343622, "link": "https://stackoverflow.com/questions/38343622/devises-sign-in-after-reset-password-doesnt-seem-to-do-what-its-name-suggests/38364418#38364418", "title": "Devise&#39;s sign_in_after_reset_password doesn&#39;t seem to do what its name suggests", "body": "<p>Not really answering the question itself, but I found a workaround which is at least a solution, even if it's a <em>bad</em> solution.</p>\n\n<p>In my <code>ApplicationController</code>:</p>\n\n<pre><code>  after_action :fix_login_after_password_reset, if: -&gt;(controller) {\n    controller.controller_path == 'devise/passwords' &amp;&amp;\n      controller.action_name == 'update'\n  }\n\n  def fix_login_after_password_reset\n    user = current_user\n    if user &amp;&amp; user.errors.empty?\n      user = User.where(id: user.id).first\n      sign_out\n      bypass_sign_in(user)\n    end\n  end\n</code></pre>\n\n<p>Essentially, I found a post where people who wrote their own \"change password\" pages found that Devise (or Warden?) was logging out the user immediately afterwards. The workaround for them was to change the call to <code>sign_in</code> to <code>bypass_sign_in</code>.</p>\n\n<p>In this situation, though, Devise have already called <code>sign_in</code>. So I thought I'd try adding a filter that applies onto to their one action with the problem, and sign the user out, then sign in a fresh copy of the user. This fixes the issue - now the user is signed in and the root page appears.</p>\n\n<p>I don't like this solution much though so I'm still digging inside Warden to try and figure out why the user is not being signed in with a call to <code>sign_in</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 9, "user_id": 3205851, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b55a175f7a613521ede98753722aa7db?s=128&d=identicon&r=PG&f=1", "display_name": "wmantegna", "link": "https://stackoverflow.com/users/3205851/wmantegna"}, "is_accepted": false, "score": 0, "last_activity_date": 1484016963, "last_edit_date": 1484016963, "creation_date": 1484008471, "answer_id": 41559361, "question_id": 38343622, "link": "https://stackoverflow.com/questions/38343622/devises-sign-in-after-reset-password-doesnt-seem-to-do-what-its-name-suggests/41559361#41559361", "title": "Devise&#39;s sign_in_after_reset_password doesn&#39;t seem to do what its name suggests", "body": "<p>I had the same issue, and found that passing an extra parameter to the <code>sign_up</code> function solves the problem:</p>\n\n<pre><code>sign_in(@user, :bypass =&gt; true)\n</code></pre>\n\n<p>This was something I found <a href=\"http://sourcey.com/rails-4-omniauth-using-devise-with-twitter-facebook-and-linkedin/\" rel=\"nofollow noreferrer\">in this tutorial</a> for setting up omniauth with a <code>finish_signup</code> feature. My implementation below is part of a feature I'm writing for a user to change their password and still retain their status as a logged in user.</p>\n\n<hr>\n\n<p>~/app/controllers/users_controller.rb</p>\n\n<pre><code>class UsersController &lt; ApplicationController\n    before_action :set_current_user, only: [:edit_password, :update_password]\n\n    def edit_password\n    end\n\n    def update_password\n      if @user.update(user_params)\n        # Sign in the user by passing validation in case their password changed\n        sign_in(@user, :bypass =&gt; true)\n        redirect_to root_path\n      else\n        render :edit_password\n      end\n    end\n\n    private\n    def set_current_user\n      @user = User.find(current_user.id)\n    end\nend\n</code></pre>\n\n<hr>\n\n<p>~/app/views/users/edit_password.html.erb</p>\n\n<pre><code>&lt;%= form_for(@user, :url =&gt; { :action =&gt; \"update_password\" } ) do |f| %&gt;\n  &lt;div class=\"field\"&gt;\n    &lt;%= f.label :password, \"Password\" %&gt;&lt;br /&gt;\n    &lt;%= f.password_field :password, :autocomplete =&gt; \"off\"  %&gt;\n  &lt;/div&gt;\n  &lt;div class=\"field\"&gt;\n    &lt;%= f.label :password_confirmation %&gt;&lt;br /&gt;\n    &lt;%= f.password_field :password_confirmation %&gt;\n  &lt;/div&gt;\n  &lt;div class=\"action_container\"&gt;\n    &lt;%= f.submit %&gt;\n  &lt;/div&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<hr>\n\n<p>routes.rb</p>\n\n<pre><code>resource :user, only: [:none] do\n    collection do\n      get :edit_password\n      patch :update_password\n    end\n  end\n</code></pre>\n"}], "owner": {"reputation": 10234, "user_id": 138513, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/42b570f6f4312a872c2fc671e3ddc82b?s=128&d=identicon&r=PG", "display_name": "Trejkaz", "link": "https://stackoverflow.com/users/138513/trejkaz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 980, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1484016963, "creation_date": 1468389282, "last_edit_date": 1468451630, "question_id": 38343622, "link": "https://stackoverflow.com/questions/38343622/devises-sign-in-after-reset-password-doesnt-seem-to-do-what-its-name-suggests", "title": "Devise&#39;s sign_in_after_reset_password doesn&#39;t seem to do what its name suggests", "body": "<p>Devise's <code>sign_in_after_reset_password</code> setting supposedly signs in my user after successfully resetting the password.</p>\n\n<p>However, what it seems to do in practice is to redirect back to '/', which ultimately results in showing the login page.</p>\n\n<p>Why isn't it signing me in?</p>\n\n<p>In <code>user.rb</code>:</p>\n\n<pre><code>  devise :database_authenticatable,\n         :recoverable,\n         :validatable,\n         :encryptable\n</code></pre>\n\n<p>In <code>application_controller.rb</code>:</p>\n\n<pre><code>class ApplicationController &lt; ActionController::Base\n  protect_from_forgery\n  before_action :authenticate_user!, unless: :devise_controller?\n  #omitting business logic filters and helpers\nend\n</code></pre>\n\n<p>Custom routes (solely to change the paths. Have tried to keep the resulting route list identical to the defaults other than the names):</p>\n\n<pre><code>  devise_for :users, skip: [ :passwords, :sessions ]\n  devise_scope :user do\n    get 'users/login' =&gt; 'devise/sessions#new', as: 'new_user_session'\n    post 'users/login' =&gt; 'devise/sessions#create', as: 'user_session'\n    delete 'users/logout' =&gt; 'devise/sessions#destroy', as: 'destroy_user_session'\n\n    post 'users/password' =&gt; 'devise/passwords#create', as: 'user_password'\n    get 'users/password/forgot' =&gt; 'devise/passwords#new', as: 'new_user_password'\n    get 'users/password/reset' =&gt; 'devise/passwords#edit', as: 'edit_user_password'\n    patch 'users/password' =&gt; 'devise/passwords#update', as: nil\n    put 'users/password' =&gt; 'devise/passwords#update', as: nil\n  end\n</code></pre>\n\n<p>The investigation so far:</p>\n\n<ul>\n<li>I had a lot of minor deviations from the structure of a sample devise application which I have been golfing back bit by bit to try and make things easier to figure out. So now my <code>authenticate_user!</code> filter is being specified in the same place as most examples.</li>\n<li>Something I noticed is that after successfully resetting the password, it isn't clearing the reset password token. Maybe that's normal, it's just suspicious.</li>\n<li>I have debugged in Devise's <code>PasswordsController</code> itself and after it executes the <code>sign_in</code> line, <code>signed_in?</code> does return true.</li>\n<li>I have <em>attempted</em> to breakpoint inside <code>signed_in?</code> at the point of requesting the root path, but it seems like I get the 401 error from the web server without <code>signed_in?</code> ever being called. So perhaps Warden is directly kicking me out before the application even gets to run.</li>\n</ul>\n\n<p>I'm starting to run out of avenues for investigation, so I thought I would post it here in case anyone had seen the exact same issue before.</p>\n\n<p>Logs of the event:</p>\n\n<pre><code>Started PUT \"/users/password\" for ::1 at 2016-07-13 17:14:44 +1000\nProcessing by Devise::PasswordsController#update as HTML\n  Parameters: {\"utf8\"=&gt;\"\u2713\", \"authenticity_token\"=&gt;\"[FILTERED]\", \"user\"=&gt;{\"reset_password_token\"=&gt;\"[FILTERED]\", \"password\"=&gt;\"[FILTERED]\", \"password_confirmation\"=&gt;\"[FILTERED]\"}, \"commit\"=&gt;\"Change my password\"}\nCan't verify CSRF token authenticity\n  User Load (0.1ms)  SELECT  \"users\".* FROM \"users\" WHERE \"users\".\"reset_password_token\" = ?  ORDER BY \"users\".\"id\" ASC LIMIT 1  [[\"reset_password_token\", \"[FILTERED]\"]]\n   (0.0ms)  begin transaction\n  Note Load (0.1ms)  SELECT \"notes\".* FROM \"notes\" WHERE \"notes\".\"notable_id\" = ? AND \"notes\".\"notable_type\" = ?  [[\"notable_id\", 2], [\"notable_type\", \"User\"]]\n  Organisation Load (0.1ms)  SELECT  \"organisations\".* FROM \"organisations\" WHERE \"organisations\".\"id\" = ? LIMIT 1  [[\"id\", 1]]\n  User Exists (0.1ms)  SELECT  1 AS one FROM \"users\" WHERE (\"users\".\"login\" = 'test1' AND \"users\".\"id\" != 2) LIMIT 1\n   (0.0ms)  commit transaction\nRedirected to http://localhost:3000/\n  User Load (0.3ms)  SELECT  \"users\".* FROM \"users\" WHERE \"users\".\"id\" = ?  ORDER BY \"users\".\"id\" ASC LIMIT 1  [[\"id\", 2]]\nCompleted 302 Found in 44ms (ActiveRecord: 1.7ms)\n\n\nStarted GET \"/\" for ::1 at 2016-07-13 17:14:44 +1000\nProcessing by SessionsController#welcome as HTML\nCompleted 401 Unauthorized in 0ms (ActiveRecord: 0.0ms)\n\n\nStarted GET \"/users/login\" for ::1 at 2016-07-13 17:14:44 +1000\nProcessing by Devise::SessionsController#new as HTML\n  Rendered users/shared/_links.html.erb (0.1ms)\n  Rendered users/sessions/new.html.erb within layouts/application (2.2ms)\nCompleted 200 OK in 148ms (Views: 147.3ms | ActiveRecord: 0.0ms)\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "string", "excel", "import"], "answers": [{"tags": [], "owner": {"reputation": 2131, "user_id": 3475678, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/230e565cac4491b28134bb92bfc28a70?s=128&d=identicon&r=PG&f=1", "display_name": "Aleksey", "link": "https://stackoverflow.com/users/3475678/aleksey"}, "is_accepted": true, "score": 1, "last_activity_date": 1468402453, "last_edit_date": 1468402453, "creation_date": 1468394943, "answer_id": 38345244, "question_id": 38343587, "link": "https://stackoverflow.com/questions/38343587/how-to-parse-a-single-excel-row-data-in-rails/38345244#38345244", "title": "How to parse a single excel row data in rails", "body": "<p>I recommend to use <a href=\"https://github.com/jumph4x/batch-factory\" rel=\"nofollow\">BatchFactory</a> gem.<br>\nIt uses Roo gem under the hood.<br>\nBatchFactory can read all excel file rows as array of hashes which is very handy to work with.  </p>\n\n<pre><code>require 'batch_factory'\nfactory = BatchFactory.from_file 'filename.xlsx', keys: [:header1, :header2]\nfactory.rows\n</code></pre>\n\n<p>This will give you  </p>\n\n<pre><code>[\n  { header1: 'value11', header2: 'value12' },\n  { header1: 'value21', header2: 'value22' },\n  ...\n]\n</code></pre>\n\n<p>In your case you can do</p>\n\n<pre><code>factory = BatchFactory.from_file 'filename.xlsx', keys: [:firstname]\nfirstnames = factory.rows.map { |row| row[:firstname] }\n</code></pre>\n\n<p>This will give your an array of all values from <code>firstname</code> column.</p>\n\n<p><strong>UPDATE</strong><br>\nYou can even omit <code>rows</code> in <code>factory.rows.map</code> because BatchFactory implement some <code>method_missing</code>, i.e.</p>\n\n<pre><code>firstnames = factory.map { |row| row[:firstname] }\n</code></pre>\n"}], "owner": {"reputation": 273, "user_id": 6165160, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/0f16ac1aabf77b83e85e72ecaf6a2805?s=128&d=identicon&r=PG&f=1", "display_name": "Abhradip", "link": "https://stackoverflow.com/users/6165160/abhradip"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1404, "favorite_count": 0, "accepted_answer_id": 38345244, "answer_count": 1, "score": 0, "last_activity_date": 1468402453, "creation_date": 1468389107, "last_edit_date": 1468397177, "question_id": 38343587, "link": "https://stackoverflow.com/questions/38343587/how-to-parse-a-single-excel-row-data-in-rails", "title": "How to parse a single excel row data in rails", "body": "<p>I am developing a ruby on rails app and I need to import an excel file for that. I am using spreadsheet gem.<br>\nNow my problem is that I can not get a single row data from excel file. </p>\n\n<p>My code is here:</p>\n\n<pre><code> def actual_import(file)\n   puts \"In the actual_import method\"\n   spreadsheet= Employee.open_spreadsheet(file)\n   header=spreadsheet.row(1)\n   (2..spreadsheet.last_row).each do |i|\n     row=Hash[[header,spreadsheet.row(i)].transpose]\n     $send_name=row.to_hash.slice('firstname')\n     puts $send_name.to_s       #this prints a weird result,,described below\n     puts $send_name.length\n     create\n   end\n end\n</code></pre>\n\n<p>And my open_spreadsheet method in Employee model is:</p>\n\n<pre><code>def self.open_spreadsheet(file)\n    case File.extname(file.original_filename)\n    #when \".csv\" then Roo::Csv.new (file.path nil, :ignore)\n    when \".xlsx\" then Roo::Excelx.new (file.path)\n    #when \".xlsx\" then Excelx.new (file.path, nil, :ignore)\n    else raise \"Unknown file type: #{file.original_filename}\"\n    end\nend\n</code></pre>\n\n<p>Now <code>$send_name</code> prints <code>{\"firstname\"=&gt;\"Abc\"}</code> and when I use <code>$send_name.length</code> it gives me 1 . But I need to capture only \"Abc\".<br>\nMy excel file contains only one column named as firstname. But I need only the row data in each iteration as string.</p>\n\n<p>How to solve this issue?</p>\n"}, {"tags": ["ruby", "capybara"], "answers": [{"tags": [], "owner": {"reputation": 42014, "user_id": 2709090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/238c2b7cde2c817fc9a5a2b8eaa2ffad?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas Walpole", "link": "https://stackoverflow.com/users/2709090/thomas-walpole"}, "is_accepted": true, "score": 1, "last_activity_date": 1468394195, "creation_date": 1468394195, "answer_id": 38344992, "question_id": 38343042, "link": "https://stackoverflow.com/questions/38343042/ruby-capybara-getting-actual-file-url-from-a-redirect-link/38344992#38344992", "title": "Ruby, Capybara, getting actual file URL from a redirect link?", "body": "<p>There is no direct way to get the destination of a redirect in Capybara, but you should be able to set the <code>--max-redirect</code> wget option to something more than the default 0 and wget should follow the redirect for you. </p>\n"}], "owner": {"reputation": 517, "user_id": 4200859, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/72fe764d26ac6cb9d3a5bbeaa45fc1be?s=128&d=identicon&r=PG&f=1", "display_name": "Max", "link": "https://stackoverflow.com/users/4200859/max"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 42, "favorite_count": 0, "accepted_answer_id": 38344992, "answer_count": 1, "score": 0, "last_activity_date": 1468394195, "creation_date": 1468386392, "question_id": 38343042, "link": "https://stackoverflow.com/questions/38343042/ruby-capybara-getting-actual-file-url-from-a-redirect-link", "title": "Ruby, Capybara, getting actual file URL from a redirect link?", "body": "<p>I'm trying to automate the download of two files from a website, but the link is actually a redirect that goes to the actual URL. But I can't figure out how to catch that URL (so I can then pass it to wget). Any ideas?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "rspec"], "comments": [{"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1468385674, "post_id": 38342859, "comment_id": 64099560, "body": "Since we are not fortunetellers, the code that actually runs might help us to understand what\u2019s going on. Please post <code>tictactoe.rb</code>."}], "answers": [{"comments": [{"owner": {"reputation": 311, "user_id": 5651001, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/dd8cdbb3f752d6276a0ec0460e047bc5?s=128&d=identicon&r=PG&f=1", "display_name": "Harry B.", "link": "https://stackoverflow.com/users/5651001/harry-b"}, "edited": false, "score": 0, "creation_date": 1468386509, "post_id": 38342974, "comment_id": 64099838, "body": "Thanks! I got it to work. I don&#39;t understand how I can remove those methods from the constructor and still have my program work. Like, if I get the tests to pass, the program won&#39;t work, and vice versa. Is there a way to combat this?"}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "reply_to_user": {"reputation": 311, "user_id": 5651001, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/dd8cdbb3f752d6276a0ec0460e047bc5?s=128&d=identicon&r=PG&f=1", "display_name": "Harry B.", "link": "https://stackoverflow.com/users/5651001/harry-b"}, "edited": false, "score": 0, "creation_date": 1468388474, "post_id": 38342974, "comment_id": 64100529, "body": "You should continue calling methods on created <code>Game</code> instance, like <code>game = Game.new</code>, <code>game.board</code> afterwards to show a board. <code>game.start_player1</code> to start a game itself etc. It\u2019s a normal control flow, that should be implemented: <code>if __FILE__ == $0 ; game = Game.new(&quot;Harry&quot;, &quot;Nick&quot;) ; game.board ; game.start_player1 ; ... ; end</code>"}], "tags": [], "owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "is_accepted": true, "score": 0, "last_activity_date": 1468386183, "last_edit_date": 1495540735, "creation_date": 1468385967, "answer_id": 38342974, "question_id": 38342859, "link": "https://stackoverflow.com/questions/38342859/using-let-and-expect-in-rspec/38342974#38342974", "title": "Using let and expect in rspec", "body": "<p>Remove calls to all functions:</p>\n\n<pre><code>game_board\nstart_player1\n</code></pre>\n\n<p>from your constructor. What you are doing currently is actually:</p>\n\n<ol>\n<li>Instantiate <code>Game</code>;</li>\n<li>Call <code>game_board</code> (which in turn prints out the board);</li>\n<li>Call <code>start_player1</code>, which, surprisingly, starts player1\u2019s moves.</li>\n</ol>\n\n<p>But this won\u2019t fix your test. In test you compare the string to the result of call to <code>puts</code>. Make methods <em>return</em> values, not <em>print</em> them, or use <a href=\"https://stackoverflow.com/questions/16507067/testing-stdout-output-in-rspec#16507680\"><code>to_stdout</code></a> rspec matcher.</p>\n"}], "owner": {"reputation": 311, "user_id": 5651001, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/dd8cdbb3f752d6276a0ec0460e047bc5?s=128&d=identicon&r=PG&f=1", "display_name": "Harry B.", "link": "https://stackoverflow.com/users/5651001/harry-b"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 34, "favorite_count": 0, "accepted_answer_id": 38342974, "answer_count": 1, "score": 0, "last_activity_date": 1468386183, "creation_date": 1468385370, "last_edit_date": 1468385861, "question_id": 38342859, "link": "https://stackoverflow.com/questions/38342859/using-let-and-expect-in-rspec", "title": "Using let and expect in rspec", "body": "<p>At the moment, this code just runs my entire program and I'm not sure why. I've included:</p>\n\n<pre><code> if __FILE__ == $0\n     game = Game.new(\"Harry\", \"Nick\")\n end  \n</code></pre>\n\n<p>In my script but it still starts running the entire program. My goal is to print out the players' names using an instance method called #players. The closest I've come so far is with using let(:game), but all it did was fails the test saying it printed :game instead of the names of the players. Now I can't even get it to fail because it is just running the script.</p>\n\n<pre><code>require \"tictactoe\"\n\ndescribe Game do\n   describe \"#players\" do\n       let(:game) do\n            new_game = Game.new(\"Harry\", \"Nick\")\n            new_game.players\n        end\n\n       it \"displays player names\" do\n            expect(game).to eq(\"Player 1: #{@player1}\\nPlayer 2: #{@player2}\")\n       end\n    end\nend\n</code></pre>\n\n<p>The Game class that runs is included here:</p>\n\n<pre><code> class Game\n\n   def initialize(player1, player2)\n      @player1 = player1\n      @player2 = player2\n      @rows = [[1, 2, 3], [4, 5, 6], [7, 8, 9]]\n\n      @wins = [1, 2, 3], [4, 5, 6], [7, 8, 9], \n        [1, 4, 7], [2, 5, 8], [3, 6, 9],\n        [1, 5, 9], [3, 5, 7]\n\n      @selected_numbers = []\n      @counter = 0\n\n   game_board\n   start_player1\n end\n\n   def players\n      puts \"Player 1: #{@player1}\"\n      puts \"Player 2: #{@player2}\"\n   end\n\n   def game_board\n      @rows.each do |r|\n      puts r.each { |c| c }.join(\" \")\n   end\n   end\n\n   def start_player1\n      puts \"#{@player1}: Please enter a number for your X to go\"\n      player1_input = STDIN.gets.chomp\n\n\n      locate_player1_input(player1_input)\n  end\n</code></pre>\n"}, {"tags": ["ruby", "windows"], "answers": [{"comments": [{"owner": {"reputation": 9436, "user_id": 252627, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/b8128cc645c1a135f1fc28ba1294b53c?s=128&d=identicon&r=PG", "display_name": "janpio", "link": "https://stackoverflow.com/users/252627/janpio"}, "edited": false, "score": 0, "creation_date": 1533563220, "post_id": 38360482, "comment_id": 90379318, "body": "I had a very similar issue, the file was opened via <code>Tempfile.open</code> and I had to use <code>.close</code> on that to make sure the file is rename- and move-able. Thanks for the hint!"}], "tags": [], "owner": {"reputation": 481, "user_id": 4970406, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh6.googleusercontent.com/-5ZDyVZsrxy0/AAAAAAAAAAI/AAAAAAAAABA/Fw9nOXDZ2hY/photo.jpg?sz=128", "display_name": "Toby Murray", "link": "https://stackoverflow.com/users/4970406/toby-murray"}, "is_accepted": true, "score": 3, "last_activity_date": 1468439340, "creation_date": 1468439340, "answer_id": 38360482, "question_id": 38342721, "link": "https://stackoverflow.com/questions/38342721/ruby-fileutils-move-errnoeacces-permission-denied-on-windows/38360482#38360482", "title": "Ruby FileUtils.move Errno::EACCES: Permission denied on Windows", "body": "<p>It turns out the issue was the <code>file = File.new(File.join(\"first_directory\", \"test_file\"))</code>. This actually opens the file, which blocks the rename operation (which is how the move is performed) as the file is currently \"in use\". Removing this line and using the file path instead of the object in <code>FileUtils.move</code> works as expected. </p>\n\n<p>This can similarly be observed by creating the file object, then trying to rename the file in the explorer: <code>The action can't be completed because the file is open in ruby.exe...</code></p>\n"}], "owner": {"reputation": 481, "user_id": 4970406, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh6.googleusercontent.com/-5ZDyVZsrxy0/AAAAAAAAAAI/AAAAAAAAABA/Fw9nOXDZ2hY/photo.jpg?sz=128", "display_name": "Toby Murray", "link": "https://stackoverflow.com/users/4970406/toby-murray"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2251, "favorite_count": 0, "accepted_answer_id": 38360482, "answer_count": 1, "score": 4, "last_activity_date": 1468439340, "creation_date": 1468384384, "last_edit_date": 1468384719, "question_id": 38342721, "link": "https://stackoverflow.com/questions/38342721/ruby-fileutils-move-errnoeacces-permission-denied-on-windows", "title": "Ruby FileUtils.move Errno::EACCES: Permission denied on Windows", "body": "<p>How do you move files on Windows with Ruby? Looking at the <a href=\"http://ruby-doc.org/stdlib-2.3.0/libdoc/fileutils/rdoc/FileUtils.html#method-i-mv\" rel=\"nofollow\">documentation</a> it appears as though it should work with <code>FileUtils.move</code>. This is not working for me on Windows 10. </p>\n\n<pre><code>irb(main):001:0&gt; RUBY_VERSION\n=&gt; \"2.3.0\"\nirb(main):002:0&gt; require 'fileutils'\n=&gt; true\nirb(main):003:0&gt; FileUtils.mkdir(\"first_directory\")\n=&gt; [\"first_directory\"]\nirb(main):004:0&gt; FileUtils.mkdir(\"second_directory\")\n=&gt; [\"second_directory\"]\nirb(main):005:0&gt; FileUtils.touch(File.join(\"first_directory\", \"test_file\"))\n=&gt; [\"first_directory/test_file\"]\nirb(main):006:0&gt; file = File.new(File.join(\"first_directory\", \"test_file\"))\n=&gt; #&lt;File:first_directory/test_file&gt;\nirb(main):007:0&gt; FileUtils.move(file, \"second_directory\")\nErrno::EACCES: Permission denied @ rb_file_s_rename - (first_directory/test_file, second_directory/test_file)\n        from C:/ruby/23-x64/lib/ruby/2.3.0/fileutils.rb:528:in `rename'\n        from C:/ruby/23-x64/lib/ruby/2.3.0/fileutils.rb:528:in `block in mv'\n        from C:/ruby/23-x64/lib/ruby/2.3.0/fileutils.rb:1571:in `block in fu_each_src_dest'\n        from C:/ruby/23-x64/lib/ruby/2.3.0/fileutils.rb:1585:in `fu_each_src_dest0'\n        from C:/ruby/23-x64/lib/ruby/2.3.0/fileutils.rb:1569:in `fu_each_src_dest'\n        from C:/ruby/23-x64/lib/ruby/2.3.0/fileutils.rb:517:in `mv'\n        from (irb):5\n        from C:/ruby/23-x64/bin/irb.cmd:19:in `&lt;main&gt;'\n</code></pre>\n\n<p>Is this a known limitation? Or a bug? Or am I just doing something wrong? Googling yields <code>chmod</code> results for Linux systems, but I don't think that's relevant for Windows (running script as administrator regardless). </p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 1, "creation_date": 1468395848, "post_id": 38342525, "comment_id": 64104417, "body": "I&#39;m voting to close this question as off-topic because it is not about programming, it is about understanding a sentence in the English language."}], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 6544977, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7cdeb74671bb1018eadb76b41835acae?s=128&d=identicon&r=PG&f=1", "display_name": "William Tao", "link": "https://stackoverflow.com/users/6544977/william-tao"}, "edited": false, "score": 0, "creation_date": 1468431722, "post_id": 38342705, "comment_id": 64129058, "body": "Thank you for your help! ^_^"}], "tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user2536065"}, "is_accepted": true, "score": 2, "last_activity_date": 1468384283, "creation_date": 1468384283, "answer_id": 38342705, "question_id": 38342525, "link": "https://stackoverflow.com/questions/38342525/i-dont-really-understand-what-does-nearest-larger-means-ruby/38342705#38342705", "title": "I don&#39;t really understand What does &quot;nearest larger&quot; means (Ruby)", "body": "<p>The parameters for the method <code>nearest_input</code> are: </p>\n\n<ol>\n<li>an array,</li>\n<li>an index to that array. </li>\n</ol>\n\n<p>So in the first example, the method returns the index of the value in the array that is greater than the value at index 2.</p>\n\n<p>So for this array: <code>[2,3,4,8]</code> </p>\n\n<ul>\n<li>The value at index 2 is 4.</li>\n<li>The next highest value is 8. </li>\n<li>The index of the value 8 is 3.</li>\n</ul>\n"}], "owner": {"reputation": 3, "user_id": 6544977, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7cdeb74671bb1018eadb76b41835acae?s=128&d=identicon&r=PG&f=1", "display_name": "William Tao", "link": "https://stackoverflow.com/users/6544977/william-tao"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 155, "favorite_count": 0, "accepted_answer_id": 38342705, "answer_count": 1, "score": -2, "last_activity_date": 1468385512, "creation_date": 1468382816, "last_edit_date": 1468385512, "question_id": 38342525, "link": "https://stackoverflow.com/questions/38342525/i-dont-really-understand-what-does-nearest-larger-means-ruby", "title": "I don&#39;t really understand What does &quot;nearest larger&quot; means (Ruby)", "body": "<p>I am working on a question, but I still don't understand what exactly this question asks for?</p>\n\n<p>I don't know why expected output for ([2,3,4,8], 2) is equal to 3\nMaybe 3 is the nearest number to 2?? or some other number in the array?</p>\n\n<p>I don't understand all the outputs below</p>\n\n<p>Please help me! Thank you so much</p>\n\n<p>This is the question and outputs below:</p>\n\n<blockquote>\n  <p>Write a function, <code>nearest_larger(arr, i)</code> which takes an array and an\n   index.  The function should return another index, <code>j</code>: this should\n   satisfy:</p>\n  \n  <p>(a) <code>arr[i] &lt; arr[j]</code>, AND\n   (b) there is no <code>j2</code> closer to <code>i</code> than <code>j</code> where <code>arr[i] &lt; arr[j2]</code>.\n   In case of ties (see example below), choose the earliest (left-most)\n   of the two indices. If no number in <code>arr</code> is larger than <code>arr[i]</code>,\n   return <code>nil</code>.</p>\n  \n  <p>Difficulty: 2/5</p>\n</blockquote>\n\n<pre><code>def nearest_larger(arr, idx)\nend\n\nputs(\"Tests for #nearest_larger\")\nputs(\"===============================================\")\n    puts \"nearest_larger([2,3,4,8], 2) == 3: \"  + (nearest_larger([2,3,4,8], 2) == 3).to_s\n    puts \"nearest_larger([2,8,4,3], 2) == 1: \"  + (nearest_larger([2,8,4,3], 2) == 1).to_s\n    puts \"nearest_larger([2,6,4,8], 2) == 1: \"  + (nearest_larger([2,6,4,8], 2) == 1).to_s\n    puts \"nearest_larger([2,6,4,6], 2) == 1: \"  + (nearest_larger([2,6,4,6], 2) == 1).to_s\n    puts \"nearest_larger([8,2,4,3], 2) == 0: \"  + (nearest_larger([8,2,4,3], 2) == 0).to_s\n    puts \"nearest_larger([2,4,3,8], 1) == 3: \"  + (nearest_larger([2,4,3,8], 1) == 3).to_s\n    puts \"nearest_larger([2, 6, 4, 8], 3) == nil: \"+ (nearest_larger([2, 6, 4, 8], 3) == nil).to_s\n    puts \"nearest_larger([2, 6, 9, 4, 8], 3) == 2: \"+ (nearest_larger([2, 6, 9, 4, 8], 3) == 2).to_s\nputs(\"===============================================\")\n</code></pre>\n"}, {"tags": ["ruby", "regex"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user5051310"}, "edited": false, "score": 0, "creation_date": 1468380438, "post_id": 38342109, "comment_id": 64098250, "body": "<a href=\"http://stackoverflow.com/questions/12384555/regex-not-to-allow-double-underscores\" title=\"regex not to allow double underscores\">stackoverflow.com/questions/12384555/&hellip;</a> could be a dupe but not too many answers over there"}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1468380864, "post_id": 38342109, "comment_id": 64098340, "body": "What do you mean by \u201ccounted as two\u201d? Is \u201cnai\u0308ve\u201d a word? Is \u201c\u043d\u0430\u0438\u0432\u043d\u044b\u0439\u201d a word?"}, {"owner": {"reputation": 52749, "user_id": 1400768, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tM0N8.png?s=128&g=1", "display_name": "nhahtdh", "link": "https://stackoverflow.com/users/1400768/nhahtdh"}, "edited": false, "score": 0, "creation_date": 1468380866, "post_id": 38342109, "comment_id": 64098341, "body": "I&#39;d rewrite it into a more restrictive regex: <code>[\u2019&#39;]?\\b[a-zA-Z0-9]+([\u2019&#39;-][a-zA-Z0-9]+)*\\b[\u2019&#39;]?</code>, though I&#39;m not sure if it is what you want."}, {"owner": {"reputation": 91121, "user_id": 179125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5594142dcc49a24b1902ec8059181f8d?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan Running", "link": "https://stackoverflow.com/users/179125/jordan-running"}, "edited": false, "score": 1, "creation_date": 1468381366, "post_id": 38342109, "comment_id": 64098439, "body": "Can you edit your question to include some examples of input and the output you want? Also, your question should include more than just your RegExp. How are you &quot;counting&quot; the words?"}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "reply_to_user": {"reputation": 91121, "user_id": 179125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5594142dcc49a24b1902ec8059181f8d?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan Running", "link": "https://stackoverflow.com/users/179125/jordan-running"}, "edited": false, "score": 0, "creation_date": 1468423970, "post_id": 38342109, "comment_id": 64124235, "body": "Further to @Jordan&#39;s comment, you need to be precise in your statement of the question, and avoid assumptions about the approach that should be taken to answer it. You&#39;ve assumed a single regex should be used, but that&#39;s not the only option.  I believe your question is how words defined in a particular way should be counted. If so, you should express your question in those terms. When you show your attempt at a solution you need something like <code>str.scan(regex).size</code>, not just <code>regex</code>. (cont.)..."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1468424106, "post_id": 38342109, "comment_id": 64124334, "body": "...Lastly, an  example string and desired word count would be helpful. Assign the string to a variable (e.g., <code>str = &quot;...&quot;</code>) so readers can refer to the variable in answers and comments without having to define it."}], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user2536065"}, "edited": false, "score": 0, "creation_date": 1468381997, "post_id": 38342352, "comment_id": 64098568, "body": "Do you think you could break down your regexes, and explain the parts?"}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1468382792, "post_id": 38342352, "comment_id": 64098745, "body": "I already explained the only non-obvious part (negative lookahead) and the first example is kinda part of the second one."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2536065"}, "edited": false, "score": 0, "creation_date": 1468383654, "post_id": 38342352, "comment_id": 64098978, "body": "Ok. Regexes always look like gibberish to me anyway."}], "tags": [], "owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "is_accepted": false, "score": 1, "last_activity_date": 1468381630, "creation_date": 1468381630, "answer_id": 38342352, "question_id": 38342109, "link": "https://stackoverflow.com/questions/38342109/regex-to-include-single-but-exclude-double-hyphen/38342352#38342352", "title": "Regex to include single but exclude double hyphen", "body": "<p>First of all, <code>\\b</code> is not a good option, positions before/after hyphen are matched as <code>\\b</code> themselves.</p>\n\n<p>The regexp below works for the whole string: <code>(-(?!-))</code> negative lookahead matches only single hyphen.</p>\n\n<pre><code>/\\A(['\u2019\\p{Alnum}]|(-(?!-)))+\\z/\n</code></pre>\n\n<p>Whether you still need to have a regexp, that matches \u201cwords\u201d (whatever it means) with one hyphen only, one should explicitly specify symbols, that are \u201cword breakers\u201d:</p>\n\n<pre><code>re = /(?&lt;![\\p{Alnum}'\u2019-])((['\u2019\\p{Alnum}]|(-(?!-)))+)(?![\\p{Alnum}'\u2019-])/ \n'goo goo-bar goo--bar, goo-bar--baz'.scan(re).map &amp;:first\n#\u21d2 [\"goo\", \"goo-bar\"]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 52749, "user_id": 1400768, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tM0N8.png?s=128&g=1", "display_name": "nhahtdh", "link": "https://stackoverflow.com/users/1400768/nhahtdh"}, "is_accepted": true, "score": 1, "last_activity_date": 1468381671, "creation_date": 1468381671, "answer_id": 38342355, "question_id": 38342109, "link": "https://stackoverflow.com/questions/38342109/regex-to-include-single-but-exclude-double-hyphen/38342355#38342355", "title": "Regex to include single but exclude double hyphen", "body": "<p>Assuming English alphabet, and that there can only be at most one symbol (any of <code>[\u2019'-]</code>) between substring of alphanumeric characters, and that there can only be at most one of those symbol at the beginning and the end of a \"word\" (\"word\" as defined in the question).</p>\n\n<pre><code>[\u2019']?\\b[a-zA-Z0-9]+(?:[\u2019'-][a-zA-Z0-9]+)*\\b[\u2019']?\n</code></pre>\n\n<p>Test cases:</p>\n\n<pre><code>\"Us and Them\"\u2019s inclusion on the album The Dark Side of the Moon\nYou Am I\u2019s latest CD\nThe 69\u2019ers\u2019 drummer, Tom Callaghan (only the second apostrophe is possessive)\nHis \u2019n\u2019 Hers\u2019 first track is called \"Joyriders\".[18]\nWas She's success greater, or King Solomon\u2019s Mines's?\nRock 'n' Roll\n\u2019bout for about, \u2019less for unless, \u2019twas for it was\n\u201970s for 1970s \nYou-Know-Who\nthe fo\u2019c\u2019s\u2019le\u2019s timbers\nThree-hundred-year-old trees are an indeterminate number of trees that are each aged 300 years.\nsyl-la-bi-fi-ca-tion\ndouble--hyphen\n</code></pre>\n\n<p><a href=\"http://rubular.com/r/881MnbR4JX\" rel=\"nofollow\"><strong>Demo at Rubular</strong></a></p>\n"}, {"tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": false, "score": 1, "last_activity_date": 1468422950, "last_edit_date": 1468422950, "creation_date": 1468389257, "answer_id": 38343617, "question_id": 38342109, "link": "https://stackoverflow.com/questions/38342109/regex-to-include-single-but-exclude-double-hyphen/38343617#38343617", "title": "Regex to include single but exclude double hyphen", "body": "<p>As I understand, the objective is to count words, where those containing two successive hypens are to be counted as two words. Rather than attempting to do everything in a single regex, I've merely replaced all instances of two or more consecutive hyphens with a space, thereby splitting the word into two words, and then just counted the words. </p>\n\n<pre><code>def count_words(str)\n  str.gsub(/-{2,}/, ' ').scan(/[a-zA-Z0-9\u2019'-]+/).size\nend\n</code></pre>\n\n<p>I'll use part of @nhahtdh's test string for demonstration.</p>\n\n<pre><code>str =&lt;&lt;BITTER_END\n\"Us and Them\"\u2019s inclusion on the album The Dark Side of the Moon\nYou Am I\u2019s latest CD\nThe 69\u2019ers\u2019 drummer, Tom Callaghan (only the second apostrophe is possessive)\nHis \u2019n\u2019 Hers\u2019 first track is called \"Joyriders\".[18]\nWas She's success greater, or King Solomon\u2019s Mines's?\nRock 'n' Roll\n\u2019bout for about, \u2019less for unless, \u2019twas for it was\n\u201970s for 1970s\nBITTER_END\n</code></pre>\n\n<p></p>\n\n<pre><code>  #=&gt; \"\\\"Us and Them\\\"\u2019s inclusion on the album The Dark Side of the Moon\\nYou Am   I\u2019s latest CD\\nThe 69\u2019ers\u2019 drummer, Tom Callaghan (only the second apostrophe is possessive)\\nHis \u2019n\u2019 Hers\u2019 first track is called \\\"Joyriders\\\".[18]\\nWas She's success greater, or King Solomon\u2019s Mines's?\\nRock 'n' Roll\\n\u2019bout for about, \u2019less for unless, \u2019twas for it was\\n\u201970s for 1970s\\n\"\n</code></pre>\n\n<p></p>    \n\n<pre><code>count_words(str) #=&gt; 63\n</code></pre>\n\n<p>@nhahtdh and @mudasobwa get the same count (63) for <code>str</code> above.</p>\n"}], "owner": {"reputation": 1310, "user_id": 5957287, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/6f3fe3b6d64fe51b26636b9fceec852e?s=128&d=identicon&r=PG&f=1", "display_name": "Raymond R", "link": "https://stackoverflow.com/users/5957287/raymond-r"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 679, "favorite_count": 0, "accepted_answer_id": 38342355, "answer_count": 3, "score": 1, "last_activity_date": 1468422950, "creation_date": 1468379843, "last_edit_date": 1468381361, "question_id": 38342109, "link": "https://stackoverflow.com/questions/38342109/regex-to-include-single-but-exclude-double-hyphen", "title": "Regex to include single but exclude double hyphen", "body": "<p>I'm trying to get a regex where words with single hyphens are counted as one, but those double hyphens are counted as two. Currently, this is what I have:</p>\n\n<pre><code>/\\b([a-zA-Z0-9\u2019'-])+\\b/\n</code></pre>\n\n<p>What do I need to change to make this work?</p>\n\n<p>Edit:\nTo clarify, I'm using this regex to count words.</p>\n\n<p>Example:\nsingle-dash (1 word)\ndouble--dash (2 words)</p>\n\n<p>I have tried to include a negative lookahead as suggested, but now it's igoring all words before the double dash (<a href=\"http://regexr.com/3dq54\" rel=\"nofollow\">link</a>)</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 14010, "user_id": 3109182, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/a4b305f0077055b4fdcf715067775d5a?s=128&d=identicon&r=PG", "display_name": "Anthony", "link": "https://stackoverflow.com/users/3109182/anthony"}, "edited": false, "score": 0, "creation_date": 1468378308, "post_id": 38341657, "comment_id": 64097812, "body": "fyi <code>get_confirmed_amount</code> isn&#39;t returning a count but <code>reservations</code>.  Instance variables and/or instance methods are the only way to send it to the view"}, {"owner": {"reputation": 975, "user_id": 3753960, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/1715117417/picture?type=large", "display_name": "Okomikeruko", "link": "https://stackoverflow.com/users/3753960/okomikeruko"}, "edited": false, "score": 0, "creation_date": 1468378953, "post_id": 38341657, "comment_id": 64097953, "body": "The problem with <code>@reservations.confirmed_amount</code> is <code>@reservations</code> isn&#39;t a <code>Reservation</code> object. It&#39;s an <code>ActiveRecord Collection</code>. There may be a way to add a method to ActiveRecord Collections, but I don&#39;t know it."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2536065"}, "edited": false, "score": 0, "creation_date": 1468382249, "post_id": 38341657, "comment_id": 64098625, "body": "Is there a specific reason why you don&#39;t want to set an instance variable?"}, {"owner": {"reputation": 3309, "user_id": 3786332, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/R33iW.jpg?s=128&g=1", "display_name": "uzaif", "link": "https://stackoverflow.com/users/3786332/uzaif"}, "edited": false, "score": 0, "creation_date": 1468382554, "post_id": 38341657, "comment_id": 64098686, "body": "@CameronAziz do you only need <code>confirmed_amount</code>?"}, {"owner": {"reputation": 5242, "user_id": 3083848, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/JMddU.jpg?s=128&g=1", "display_name": "Emu", "link": "https://stackoverflow.com/users/3083848/emu"}, "edited": false, "score": 0, "creation_date": 1468383320, "post_id": 38341657, "comment_id": 64098873, "body": "You can <code>cut</code> the <code>get_confirmed_amount</code> method and then paste it to the <code>helper</code> file of the current <code>controller</code>. Then from view call for the method with <code>&lt;%= get_confirmed_amount(@reservations) %&gt;</code>"}], "answers": [{"comments": [{"owner": {"reputation": 14010, "user_id": 3109182, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/a4b305f0077055b4fdcf715067775d5a?s=128&d=identicon&r=PG", "display_name": "Anthony", "link": "https://stackoverflow.com/users/3109182/anthony"}, "edited": false, "score": 1, "creation_date": 1468378349, "post_id": 38341882, "comment_id": 64097821, "body": "if you&#39;re inferring global <i>scope</i> then no."}, {"owner": {"reputation": 975, "user_id": 3753960, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/1715117417/picture?type=large", "display_name": "Okomikeruko", "link": "https://stackoverflow.com/users/3753960/okomikeruko"}, "reply_to_user": {"reputation": 14010, "user_id": 3109182, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/a4b305f0077055b4fdcf715067775d5a?s=128&d=identicon&r=PG", "display_name": "Anthony", "link": "https://stackoverflow.com/users/3109182/anthony"}, "edited": false, "score": 0, "creation_date": 1468378535, "post_id": 38341882, "comment_id": 64097850, "body": "Right. I&#39;m not 100% versed in rails jargon, so I am most likely using the term <i>global</i> wrong, but I do know without the <code>@</code>, it doesn&#39;t get passed to the view."}, {"owner": {"reputation": 91121, "user_id": 179125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5594142dcc49a24b1902ec8059181f8d?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan Running", "link": "https://stackoverflow.com/users/179125/jordan-running"}, "edited": false, "score": 0, "creation_date": 1468379338, "post_id": 38341882, "comment_id": 64098027, "body": "The confusion in terminology is entirely understandable. The way rails passes controller instance variables to views is not intuitive."}], "tags": [], "owner": {"reputation": 975, "user_id": 3753960, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/1715117417/picture?type=large", "display_name": "Okomikeruko", "link": "https://stackoverflow.com/users/3753960/okomikeruko"}, "is_accepted": false, "score": -1, "last_activity_date": 1468378249, "creation_date": 1468378249, "answer_id": 38341882, "question_id": 38341657, "link": "https://stackoverflow.com/questions/38341657/send-variable-to-view-without-passing-two-instance-variables/38341882#38341882", "title": "Send variable to view without passing two instance variables", "body": "<p>Setting the <code>@</code> symbol sets it's global value within the action.</p>\n\n<p>So:</p>\n\n<pre><code>@confirmed_amount = get_confirmed_amount(@reservations)\n</code></pre>\n\n<p>and</p>\n\n<pre><code>&lt;%= @confirmed_amount %&gt;\n</code></pre>\n\n<p>is how you would pass it along as its own variable.</p>\n"}, {"tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user2536065"}, "is_accepted": false, "score": 3, "last_activity_date": 1468383165, "creation_date": 1468383165, "answer_id": 38342573, "question_id": 38341657, "link": "https://stackoverflow.com/questions/38341657/send-variable-to-view-without-passing-two-instance-variables/38342573#38342573", "title": "Send variable to view without passing two instance variables", "body": "<p>As @okomikeruko has already said, setting an instance variable in the controller is the easiest way to access the data in the view. </p>\n\n<p>If you really don't to do that for some reason, and assuming you also don't want to change your <code>#get_confirmed_amount</code> method (which I assume is a private method in your controller or else an included helper method), then you could create a helper method in your controller like this.</p>\n\n<pre><code>protected\n\ndef confirmed_amount\n  return if @reservations.blank?\n\n  get_confirmed_amount(@reservations)\nend\nhelper_method :confirmed_amount\n</code></pre>\n\n<p>Another thing you could to, which would allow you to set confirmed_amount as a sort of property of the <code>@reservations</code> relation is this.</p>\n\n<pre><code>class ReservationsView &lt; SimpleDelegator\n  attr_accessor :confirmed_amount\nend\n\n# In your controller action\ndef index\n  reservations = Reservation\n    .where(customer_id: session[:customer_id])\n    .order(:name)\n\n  @reservations = ReservationsView.new(@reservations)\n  @reservations.confirmed_amount = get_confirmed_amount(@reservations)\nend\n</code></pre>\n\n<p><code>SimpleDelegator</code> will pass all undefined methods to the <code>Reservation</code> <code>ActiveRecord::Relation</code> object, but will allow you to access the <code>confirmed_amount</code> value via a getter method. So in the view you can do this.</p>\n\n<pre><code>&lt;%= @reservations.confirmed_amount %&gt;\n</code></pre>\n"}], "owner": {"reputation": 457, "user_id": 1244081, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/acd3105f8cec0788810a97aa7d978472?s=128&d=identicon&r=PG", "display_name": "Cameron Aziz", "link": "https://stackoverflow.com/users/1244081/cameron-aziz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 86, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1468383165, "creation_date": 1468376512, "question_id": 38341657, "link": "https://stackoverflow.com/questions/38341657/send-variable-to-view-without-passing-two-instance-variables", "title": "Send variable to view without passing two instance variables", "body": "<p>I am looking to get a the number of children that meet certain criteria (is_confirmed, in this instance.) This is returned in <code>get_confirmed_amount</code>:</p>\n\n<pre><code>def get_confirmed_amount(reservations)\n  amount = 0\n  reservations.each do |reservation|\n    if reservation.is_confirmed\n      reservation.persons.each do\n        amount = amount + 1\n      end\n    end\n  end\nend\n</code></pre>\n\n<p>I then calling this from the index action:</p>\n\n<pre><code>def index\n  @reservations = Reservation.where(customer_id: session[:customer_id]).order(:name)\n  confirmed_amount = get_confirmed_amount(@reservations)\nend\n</code></pre>\n\n<p>I then need to pass this information to the view, but setting it as <code>@reservations.confirmed_amount</code> will return <code>NoMethodError</code>. How can I get the information to the view without having to send two instance variables to the view, or is that the only way?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "activerecord", "associations", "rails-activerecord"], "answers": [{"tags": [], "owner": {"reputation": 180, "user_id": 5138523, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/c88985980501cdde7473d699b9a09174?s=128&d=identicon&r=PG&f=1", "display_name": "innhyu", "link": "https://stackoverflow.com/users/5138523/innhyu"}, "is_accepted": false, "score": 0, "last_activity_date": 1468371972, "creation_date": 1468371972, "answer_id": 38341098, "question_id": 38341048, "link": "https://stackoverflow.com/questions/38341048/using-has-one-and-belongs-to-in-the-same-class-for-ruby-association/38341098#38341098", "title": "Using has_one and belongs_to in the same class for ruby association", "body": "<p>I don't think in this case you can have a straight user to status model, since user can have many status, and status can have many users (user who created it, and user tagged in the status if I'm understanding it correctly).</p>\n\n<p>I suggest that you create a model between status and user, call it Status_Info, and create a info attribute which denotes whether the record was made for the creator or the tagged person.</p>\n\n<p>And to find all status about a user, you just have to look for that user_id in the Status_Info model. i.e. Status_Info.where(user_id: wanted_user_id)</p>\n"}, {"comments": [{"owner": {"reputation": 1228, "user_id": 4497621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d140bf5c97a7ee616b0f21189fa9373?s=128&d=identicon&r=PG&f=1", "display_name": "John Hayes-Reed", "link": "https://stackoverflow.com/users/4497621/john-hayes-reed"}, "edited": false, "score": 0, "creation_date": 1468373283, "post_id": 38341157, "comment_id": 64096675, "body": "was just about to post an answer saying a through table is needed, but as your edit has fixed the problem with the previous answer. I will just upvote and move along ;)"}, {"owner": {"reputation": 33085, "user_id": 2423164, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Nxbnp.jpg?s=128&g=1", "display_name": "ndnenkov", "link": "https://stackoverflow.com/users/2423164/ndnenkov"}, "reply_to_user": {"reputation": 1228, "user_id": 4497621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d140bf5c97a7ee616b0f21189fa9373?s=128&d=identicon&r=PG&f=1", "display_name": "John Hayes-Reed", "link": "https://stackoverflow.com/users/4497621/john-hayes-reed"}, "edited": false, "score": 0, "creation_date": 1468373418, "post_id": 38341157, "comment_id": 64096715, "body": "@JohnHayes-Reed, yea, I said he needs many to many and for some reason I didn&#39;t do it. It&#39;s 4:30 AM here :)"}], "tags": [], "owner": {"reputation": 33085, "user_id": 2423164, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Nxbnp.jpg?s=128&g=1", "display_name": "ndnenkov", "link": "https://stackoverflow.com/users/2423164/ndnenkov"}, "is_accepted": false, "score": 3, "last_activity_date": 1468375834, "last_edit_date": 1468375834, "creation_date": 1468372568, "answer_id": 38341157, "question_id": 38341048, "link": "https://stackoverflow.com/questions/38341048/using-has-one-and-belongs-to-in-the-same-class-for-ruby-association/38341157#38341157", "title": "Using has_one and belongs_to in the same class for ruby association", "body": "<p>It makes sense that a user should be able to create more than one status and tag more than one user in a single status. Therefore, you should use <code>has_many</code>, rather than <code>has_one</code>.</p>\n\n<p>As for creating multiple associations with the same class:</p>\n\n<pre><code>class Status &lt; ApplicationRecord\n  belongs_to :creator, class_name: 'User', foreign_key: 'creator_id'\n  has_many :referred_users, through: :mentions, source: :user\nend\n\nclass Mention &lt; ApplicationRecord\n  belongs_to :status\n  belongs_to :user\nend\n\nclass User &lt; ApplicationRecord\n  has_many :statuses, foreign_key: 'creator_id'\n  has_many :referring_statuses, through: :mentions, source: :status\nend\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 6572299, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/cc715fad5950f6fc79cfe9d06b7a7207?s=128&d=identicon&r=PG&f=1", "display_name": "ej96", "link": "https://stackoverflow.com/users/6572299/ej96"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 77, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1468375834, "creation_date": 1468371433, "last_edit_date": 1468373346, "question_id": 38341048, "link": "https://stackoverflow.com/questions/38341048/using-has-one-and-belongs-to-in-the-same-class-for-ruby-association", "title": "Using has_one and belongs_to in the same class for ruby association", "body": "<p>I'm trying to create statuses that will have a user that creates the status and a user that the status is about.</p>\n\n<p>Very similar to \"tagging\" someone in a facebook post.  I need the user who creates the post to be the owner, but i also need to figure out some way to associate the user that the status is about with the actual status.  </p>\n\n<p>The end goal is to display all the status about a certain user.  </p>\n\n<p>I have a status class.  </p>\n\n<pre><code>class Status &lt; ApplicationRecord\n  belongs_to :user\n\n  validates :content, presence: true,\n                      length: { minimum: 2}\n\n  validates :user_id, presence: true\nend\n</code></pre>\n\n<p>I also have a user class</p>\n\n<pre><code>class User &lt; ApplicationRecord\n  rolify\n  # Include default devise modules. Others available are:\n  # :confirmable, :lockable, :timeoutable and :omniauthable\n  devise :database_authenticatable, :registerable,\n         :recoverable, :rememberable, :trackable, :validatable\n\n  validates :first_name, presence: true\n\n  validates :last_name, presence: true\n\n  validates :profile_name, presence: true, uniqueness: true,\n                          format: {\n                            with: /\\A[a-zA-Z0-9_-]+\\z/,\n                            message: 'Must be formatted correctly'\n                          }\n\n  has_many :statuses\nend\n</code></pre>\n\n<p>I originally thought to add</p>\n\n<pre><code>has_one :user\n</code></pre>\n\n<p>to my status class but I am now realizing that this can't be the best implementation.  </p>\n\n<p>Can anyone help me with this association?</p>\n"}, {"tags": ["ruby", "forms", "sinatra", "yield"], "answers": [{"comments": [{"owner": {"reputation": 73, "user_id": 6581868, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1ff3f5bf4bc5b6203d662919c12e989b?s=128&d=identicon&r=PG&f=1", "display_name": "iohzrd", "link": "https://stackoverflow.com/users/6581868/iohzrd"}, "edited": false, "score": 0, "creation_date": 1468380141, "post_id": 38341863, "comment_id": 64098178, "body": "Got it, thank you!  I just needed to append a number to each name/id so I used &lt;% (1..16).each do |i| %&gt; at the beginning of form.erb and boom!"}], "tags": [], "owner": {"reputation": 41846, "user_id": 926143, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/3396173c3d22988be1a0732d184902aa?s=128&d=identicon&r=PG", "display_name": "7stud", "link": "https://stackoverflow.com/users/926143/7stud"}, "is_accepted": true, "score": 0, "last_activity_date": 1468379791, "last_edit_date": 1468379791, "creation_date": 1468378027, "answer_id": 38341863, "question_id": 38341030, "link": "https://stackoverflow.com/questions/38341030/sinatra-yield-the-same-form-multiple-times-in-one-layout-iterating-names/38341863#38341863", "title": "sinatra: yield the same form multiple times in one layout, iterating names", "body": "<blockquote>\n  <p>is there some other, more proper way to accomplish this?</p>\n</blockquote>\n\n<p>You can do this:</p>\n\n<p><strong>routes.rb</strong>:</p>\n\n<pre><code>get '/' do \n\n  @names_and_ids = [\n    %w[nameA idA],\n    %w[nameB idB],\n    %w[nameC idC]\n  ]\n\n  erb :my_form\n\nend\n</code></pre>\n\n<p><strong>my_form.erb</strong>:</p>\n\n<pre><code>&lt;% @names_and_ids.each do |(name, id)| %&gt;\n\n  &lt;form name=\"&lt;%= name %&gt;\" id=\"&lt;%= id %&gt;\" action=\"/\" method=\"POST\"&gt;\n    &lt;input name=\"relay1\" type=\"hidden\"&gt;\n    &lt;input name=\"label\" id=\"label\" type=\"text\" value=\"&lt;%= @label %&gt;\";\"&gt;\n    &lt;input type=\"button\" value=\"Add ON/OFF time\" onClick=\"addInput('relay1');\"&gt;\n    &lt;input type=\"submit\"&gt;\n  &lt;/form&gt;\n\n&lt;% end %&gt; \n</code></pre>\n\n<p>And using the following for <code>views/layout.erb</code>:</p>\n\n<pre><code>&lt;!DOCTYPE html&gt;\n&lt;head&gt;&lt;title&gt;Sinatra App&lt;/title&gt;&lt;/head&gt;\n&lt;body&gt;\n\n&lt;h2&gt;Relay Setup&lt;/h2&gt;\n&lt;h2&gt;&lt;p id=\"CurrentTime\"&gt;&lt;/p&gt;&lt;/h2&gt;\n&lt;p&gt;&lt;strong&gt;Note:&lt;/strong&gt; Set On/Off times for each relay respectively.&lt;/p&gt;\n\n&lt;%= yield %&gt;\n\n&lt;/body&gt;\n&lt;/html&gt;\n</code></pre>\n\n<p>will generate the following html:</p>\n\n<pre><code>&lt;!DOCTYPE html&gt;\n&lt;head&gt;&lt;title&gt;Sinatra App&lt;/title&gt;&lt;/head&gt;\n&lt;body&gt;\n\n&lt;h2&gt;Relay Setup&lt;/h2&gt;\n&lt;h2&gt;&lt;p id=\"CurrentTime\"&gt;&lt;/p&gt;&lt;/h2&gt;\n&lt;p&gt;&lt;strong&gt;Note:&lt;/strong&gt; Set On/Off times for each relay respectively.&lt;/p&gt;\n\n\n  &lt;form name=\"nameA\" id=\"idA\" action=\"/\" method=\"POST\"&gt;\n    &lt;input name=\"relay1\" type=\"hidden\"&gt;\n    &lt;input name=\"label\" id=\"label\" type=\"text\" value=\"\";\"&gt;\n    &lt;input type=\"button\" value=\"Add ON/OFF time\" onClick=\"addInput('relay1');\"&gt;\n    &lt;input type=\"submit\"&gt;\n  &lt;/form&gt;\n\n\n  &lt;form name=\"nameB\" id=\"idB\" action=\"/\" method=\"POST\"&gt;\n    &lt;input name=\"relay1\" type=\"hidden\"&gt;\n    &lt;input name=\"label\" id=\"label\" type=\"text\" value=\"\";\"&gt;\n    &lt;input type=\"button\" value=\"Add ON/OFF time\" onClick=\"addInput('relay1');\"&gt;\n    &lt;input type=\"submit\"&gt;\n  &lt;/form&gt;\n\n\n  &lt;form name=\"nameC\" id=\"idC\" action=\"/\" method=\"POST\"&gt;\n    &lt;input name=\"relay1\" type=\"hidden\"&gt;\n    &lt;input name=\"label\" id=\"label\" type=\"text\" value=\"\";\"&gt;\n    &lt;input type=\"button\" value=\"Add ON/OFF time\" onClick=\"addInput('relay1');\"&gt;\n    &lt;input type=\"submit\"&gt;\n  &lt;/form&gt;\n\n\n\n&lt;/body&gt;\n&lt;/html&gt;\n</code></pre>\n\n<p>which looks like this:</p>\n\n<p><a href=\"https://i.stack.imgur.com/9kZWn.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/9kZWn.png\" alt=\"enter image description here\"></a></p>\n\n<p>Do you really want multiple submit buttons?</p>\n"}, {"tags": [], "owner": {"reputation": 73, "user_id": 6581868, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1ff3f5bf4bc5b6203d662919c12e989b?s=128&d=identicon&r=PG&f=1", "display_name": "iohzrd", "link": "https://stackoverflow.com/users/6581868/iohzrd"}, "is_accepted": false, "score": 0, "last_activity_date": 1468380414, "creation_date": 1468380414, "answer_id": 38342197, "question_id": 38341030, "link": "https://stackoverflow.com/questions/38341030/sinatra-yield-the-same-form-multiple-times-in-one-layout-iterating-names/38342197#38342197", "title": "sinatra: yield the same form multiple times in one layout, iterating names", "body": "<p>7stud's answer led me to this solution within my form.erb file. Thanks again!</p>\n\n<pre><code>&lt;!DOCTYPE html&gt;\n&lt;% (1..16).each do |i| %&gt;\n    &lt;form method=\"POST\" action=\"/\" id=\"relay&lt;%= i %&gt;\"&gt;\n        &lt;input name=\"relay&lt;%= i %&gt;\" type=\"hidden\"&gt;\n        &lt;input name=\"label\" type=\"text\" value=\"\";\"&gt;\n        &lt;input type=\"button\" value=\"Add ON/OFF time\" onClick=\"addInput('relay&lt;%= i %&gt;');\"&gt;\n        &lt;input type=\"submit\"&gt;\n    &lt;/form&gt;\n&lt;% end %&gt;\n</code></pre>\n"}], "owner": {"reputation": 73, "user_id": 6581868, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1ff3f5bf4bc5b6203d662919c12e989b?s=128&d=identicon&r=PG&f=1", "display_name": "iohzrd", "link": "https://stackoverflow.com/users/6581868/iohzrd"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 350, "favorite_count": 0, "accepted_answer_id": 38341863, "answer_count": 2, "score": 0, "last_activity_date": 1468380414, "creation_date": 1468371228, "last_edit_date": 1468376011, "question_id": 38341030, "link": "https://stackoverflow.com/questions/38341030/sinatra-yield-the-same-form-multiple-times-in-one-layout-iterating-names", "title": "sinatra: yield the same form multiple times in one layout, iterating names", "body": "<p>I'm writing a simple single page app. Right now the form.erb has 16 statically written forms that are all the same except their names and ids. I'd like to make it where form.erb only has one copy of the form but is yielded 16 times iterating the names and ids.</p>\n\n<p>'/' gets routed to form.erb</p>\n\n<pre><code>get '/' do\n    erb :form\nend\n</code></pre>\n\n<p>the current layout.erb body is</p>\n\n<pre><code>&lt;body&gt;\n\n&lt;h2&gt;Relay Setup&lt;/h2&gt;\n&lt;h2&gt;&lt;p id=\"CurrentTime\"&gt;&lt;/p&gt;&lt;/h2&gt;\n&lt;p&gt;&lt;strong&gt;Note:&lt;/strong&gt; Set On/Off times for each relay respectively.&lt;/p&gt;\n\n&lt;%= yield %&gt;\n\n&lt;/body&gt;\n</code></pre>\n\n<p>and the current form.erb is</p>\n\n<pre><code>&lt;form name=\"relay1\" id=\"relay1\" action=\"/\" method=\"POST\"&gt;\n    &lt;input name=\"relay1\" type=\"hidden\"&gt;\n    &lt;input name=\"label\" id=\"label\" type=\"text\" value=\"&lt;%= @label %&gt;\";\"&gt;\n    &lt;input type=\"button\" value=\"Add ON/OFF time\" onClick=\"addInput('relay1');\"&gt;\n    &lt;input type=\"submit\"&gt;\n&lt;/form&gt;\n</code></pre>\n\n<p>I already tried a for loop in the router with no success.\nDo I just use more &lt;%= yield %>'s and iterate the names in the router, or is there a flag to set in the layout? If not, is there some other, more proper way to accomplish this?</p>\n\n<p>Thanks in advance...</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "answers": [{"comments": [{"owner": {"reputation": 180, "user_id": 5138523, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/c88985980501cdde7473d699b9a09174?s=128&d=identicon&r=PG&f=1", "display_name": "innhyu", "link": "https://stackoverflow.com/users/5138523/innhyu"}, "edited": false, "score": 0, "creation_date": 1468371166, "post_id": 38340784, "comment_id": 64096270, "body": "If you want to use an image for the button, then replace the &#39;facebook&#39; with an image tag. i.e. &lt;%= link_to image_tag(&#39;filename&#39;), <a href=\"https://www.facebook.com\" rel=\"nofollow noreferrer\">facebook.com</a> %&gt;"}], "tags": [], "owner": {"reputation": 1600, "user_id": 1395009, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/88yfK.jpg?s=128&g=1", "display_name": "nikkypx", "link": "https://stackoverflow.com/users/1395009/nikkypx"}, "is_accepted": true, "score": 9, "last_activity_date": 1468369176, "creation_date": 1468369176, "answer_id": 38340784, "question_id": 38340688, "link": "https://stackoverflow.com/questions/38340688/rails-creating-links-to-external-sites-with-link-to/38340784#38340784", "title": "Rails creating links to external sites with &lt;%= link_to %&gt;", "body": "<p>Yes,</p>\n\n<p><a href=\"http://api.rubyonrails.org/classes/ActionView/Helpers/UrlHelper.html#method-i-link_to\" rel=\"noreferrer\">http://api.rubyonrails.org/classes/ActionView/Helpers/UrlHelper.html#method-i-link_to</a></p>\n\n<pre><code>&lt;%= link_to 'facebook', 'https://www.facebook.com' %&gt; \n</code></pre>\n"}], "owner": {"reputation": 622, "user_id": 5279783, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/22c1cf8adcf189149e03f48a25a43e5f?s=128&d=identicon&r=PG&f=1", "display_name": "Raidspec", "link": "https://stackoverflow.com/users/5279783/raidspec"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4203, "favorite_count": 1, "accepted_answer_id": 38340784, "answer_count": 1, "score": 2, "last_activity_date": 1468369176, "creation_date": 1468368428, "question_id": 38340688, "link": "https://stackoverflow.com/questions/38340688/rails-creating-links-to-external-sites-with-link-to", "title": "Rails creating links to external sites with &lt;%= link_to %&gt;", "body": "<p>Is it possible to send a user to a website such as www.facebook.com with a rails tag? </p>\n\n<p>I tried: </p>\n\n<pre><code>&lt;%= link_to www.facebook.com %&gt;. \n</code></pre>\n"}, {"tags": ["ruby", "rake", "rake-task"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user2536065"}, "edited": false, "score": 1, "creation_date": 1468384884, "post_id": 38340551, "comment_id": 64099314, "body": "Which version of minitest do you have installed?"}, {"owner": {"reputation": 796, "user_id": 1330428, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/e412494ca502d02844c9f4cae2ffacee?s=128&d=identicon&r=PG", "display_name": "Greg Ruhl", "link": "https://stackoverflow.com/users/1330428/greg-ruhl"}, "edited": false, "score": 0, "creation_date": 1468429702, "post_id": 38340551, "comment_id": 64127838, "body": "minitest 5.8.0, ruby 2.1.0p0, rake 10.1.0.  I&#39;m thinking I should update rake to the latest version and give it a shot."}, {"owner": {"reputation": 796, "user_id": 1330428, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/e412494ca502d02844c9f4cae2ffacee?s=128&d=identicon&r=PG", "display_name": "Greg Ruhl", "link": "https://stackoverflow.com/users/1330428/greg-ruhl"}, "edited": false, "score": 0, "creation_date": 1468430502, "post_id": 38340551, "comment_id": 64128336, "body": "Updating the version of rake did the trick.  Thank you!"}], "answers": [{"comments": [{"owner": {"reputation": 796, "user_id": 1330428, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/e412494ca502d02844c9f4cae2ffacee?s=128&d=identicon&r=PG", "display_name": "Greg Ruhl", "link": "https://stackoverflow.com/users/1330428/greg-ruhl"}, "edited": false, "score": 0, "creation_date": 1468371716, "post_id": 38340999, "comment_id": 64096389, "body": "I had to add a gemspec file since bundler was invoked but I&#39;m still getting the same error.  I&#39;ll add another comment above with more details about my test file content."}], "tags": [], "owner": {"reputation": 1600, "user_id": 1395009, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/88yfK.jpg?s=128&g=1", "display_name": "nikkypx", "link": "https://stackoverflow.com/users/1395009/nikkypx"}, "is_accepted": false, "score": 1, "last_activity_date": 1468370978, "creation_date": 1468370978, "answer_id": 38340999, "question_id": 38340551, "link": "https://stackoverflow.com/questions/38340551/rake-not-running-any-tests-with-minitest/38340999#38340999", "title": "Rake not running any tests with minitest", "body": "<p>Try changing your Rakefile to this.</p>\n\n<pre><code>require \"bundler/gem_tasks\"\nrequire \"rake/testtask\"\n\nRake::TestTask.new(:test) do |t|\n  t.libs &lt;&lt; \"test\"\n  t.libs &lt;&lt; \"lib\"\n  t.test_files = FileList['test/**/*_test.rb']\nend\n\ntask :default =&gt; :test\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 796, "user_id": 1330428, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/e412494ca502d02844c9f4cae2ffacee?s=128&d=identicon&r=PG", "display_name": "Greg Ruhl", "link": "https://stackoverflow.com/users/1330428/greg-ruhl"}, "is_accepted": false, "score": 0, "last_activity_date": 1468430602, "creation_date": 1468430602, "answer_id": 38358078, "question_id": 38340551, "link": "https://stackoverflow.com/questions/38340551/rake-not-running-any-tests-with-minitest/38358078#38358078", "title": "Rake not running any tests with minitest", "body": "<p>jphager2 got me thinking about tool versions and it turned out that my version of rake was fairly old.  Updating to 11.x did the trick.</p>\n"}], "owner": {"reputation": 796, "user_id": 1330428, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/e412494ca502d02844c9f4cae2ffacee?s=128&d=identicon&r=PG", "display_name": "Greg Ruhl", "link": "https://stackoverflow.com/users/1330428/greg-ruhl"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 492, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1468430602, "creation_date": 1468367394, "last_edit_date": 1468372024, "question_id": 38340551, "link": "https://stackoverflow.com/questions/38340551/rake-not-running-any-tests-with-minitest", "title": "Rake not running any tests with minitest", "body": "<p>I have a file containing a class of multiple tests (using minitest).  I have <code>require 'minitest/autorun'</code> at the top of the file and all tests run correctly when I call the file directly (<code>ruby my_tests.rb</code>).</p>\n\n<p>So far, so good.  However, now I'm trying to run my tests via <code>rake</code>.  </p>\n\n<pre><code>require \"rake/testtask\"\ntask :default =&gt; [:test]\n\nRake::TestTask.new do |t|\n  t.libs &lt;&lt; Dir.pwd + \"/lib/examples\"\n  t.test_files = FileList['test/test*.rb']\nend\n</code></pre>\n\n<p>Calling <code>rake</code> shows <code>test/my_test.rb</code> getting called but no tests within the class get run (0 tests, 0 assertions, etc.).  I do get these warnings:</p>\n\n<pre><code>...gems/minitest-5.8.0/lib/minitest/assertions.rb:17: warning: already initialized constant MiniTest::Assertions::UNDEFINED\n...ruby/2.1.0/lib/ruby/2.1.0/minitest/unit.rb:80: warning: previous definition of UNDEFINED was here\n</code></pre>\n\n<p>How can I run my tests within rake successfully?  I am <em>not</em> using rails.</p>\n\n<p>EDIT: Here is the top of my test file:</p>\n\n<pre><code>require 'minitest/spec'\nrequire 'minitest/autorun'\nrequire 'minitest/reporters'\n\nreporter_options = { color: true }\nMinitest::Reporters.use![Minitest::Reporters::DefaultReporter.new(reporter_options)]\n\nclass Test_PowerSpecInputs &lt; Minitest::Test\n  def setup\n    @mc = TestClass.new()\n  end\n\n  def test_does_lib_have_constant\n    # my test code\n  end\nend\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "arrays", "ruby", "math"], "comments": [{"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1468366355, "post_id": 38340386, "comment_id": 64095196, "body": "We&#39;d like to see your attempt to add them together. Without that it looks like you&#39;re asking us to write it for you without you trying. Please read &quot;<a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a>&quot; including the linked pages, and &quot;<a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>&quot;. <a href=\"http://meta.stackoverflow.com/q/261592/128421\">meta.stackoverflow.com/q/261592/128421</a> is a good read too."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1468366362, "post_id": 38340386, "comment_id": 64095199, "body": "If <code>arr</code> is your array, the sum of the elements is just <code>arr.reduce(:+)</code>. You should have been able to answer this yourself. Google &quot;ruby summing elements of an array&quot; and see what you get."}, {"owner": {"reputation": 2958, "user_id": 3597730, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/d76b8f632aeb1d920d79d7dd5ab63097?s=128&d=identicon&r=PG", "display_name": "ruby_newbie", "link": "https://stackoverflow.com/users/3597730/ruby-newbie"}, "edited": false, "score": 0, "creation_date": 1468368566, "post_id": 38340386, "comment_id": 64095662, "body": "If his suggestion didn&#39;t work please be more descriptive than &quot;That doesnt work&quot;.  You could for example say &quot;I tried your solution but it gave me NoMethodError: undefined method `+&#39; for &quot;75.00&quot; :String &quot;  We aren&#39;t mind readers.  :)"}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1468381729, "post_id": 38340386, "comment_id": 64098514, "body": "My mistake. I didn&#39;t notice that the elements of the array are strings. You  need <code>x = [&quot;75.00&quot;, &quot;50.00&quot;, &quot;25.00&quot;].reduce(0) { |tot, s| tot + s.to_f } #=&gt; 150.0</code>.  See the doc for <a href=\"http://ruby-doc.org/core-2.2.0/Enumerable.html#method-i-reduce\" rel=\"nofollow noreferrer\">Enumerable#reduce</a> (aka <code>inject</code>). If you want the result to be a string with two digits to the right of the decimal point, one way is <code>&quot;%.2f&quot; % x #=&gt; &quot;150.00&quot;</code>.  See the doc for <a href=\"http://ruby-doc.org/core-2.2.0/Kernel.html#method-i-sprintf\" rel=\"nofollow noreferrer\">Kernel#sprintf</a> for formatting of strings."}], "answers": [{"comments": [{"owner": {"reputation": 91121, "user_id": 179125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5594142dcc49a24b1902ec8059181f8d?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan Running", "link": "https://stackoverflow.com/users/179125/jordan-running"}, "edited": false, "score": 1, "creation_date": 1468380481, "post_id": 38340680, "comment_id": 64098258, "body": "<code>:payment_amount.to_f</code> will raise a NoMethodError. <code>:payment_amount</code> is a Symbol and does not respond to <code>to_f</code>."}], "tags": [], "owner": {"reputation": 2958, "user_id": 3597730, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/d76b8f632aeb1d920d79d7dd5ab63097?s=128&d=identicon&r=PG", "display_name": "ruby_newbie", "link": "https://stackoverflow.com/users/3597730/ruby-newbie"}, "is_accepted": false, "score": 1, "last_activity_date": 1468369278, "last_edit_date": 1468369278, "creation_date": 1468368380, "answer_id": 38340680, "question_id": 38340386, "link": "https://stackoverflow.com/questions/38340386/adding-array-contents-together-in-rails/38340680#38340680", "title": "Adding Array Contents Together in rails", "body": "<p>The other posters are correct in that your question doesn't conform to the how to ask guidelines.  The responses are not intended to put you down but rather to maintain the quality of content for stack overflow.  That said this should get you where you need to go.  IN the future please read the guidelines and submit accordingly. </p>\n\n<pre><code> Credit.last.payments.sum(:payment_amount.to_f)\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 35, "user_id": 3261842, "user_type": "registered", "profile_image": "https://graph.facebook.com/1001154956/picture?type=large", "display_name": "austinrocks1995", "link": "https://stackoverflow.com/users/3261842/austinrocks1995"}, "edited": false, "score": 2, "creation_date": 1468372143, "post_id": 38340829, "comment_id": 64096485, "body": "Thanks Everyone for your help, i really appreciate it. i figure out a method through looking over couple of your guy&#39;s answers and putting it into one method.  <code>Credit.payments.map(&amp;:payment_amount).collect(&amp;:to_f).sum</code>"}], "tags": [], "owner": {"reputation": 7051, "user_id": 848668, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/JQcC4.jpg?s=128&g=1", "display_name": "br3nt", "link": "https://stackoverflow.com/users/848668/br3nt"}, "is_accepted": false, "score": 1, "last_activity_date": 1468370628, "last_edit_date": 1468370628, "creation_date": 1468369529, "answer_id": 38340829, "question_id": 38340386, "link": "https://stackoverflow.com/questions/38340386/adding-array-contents-together-in-rails/38340829#38340829", "title": "Adding Array Contents Together in rails", "body": "<p>One thing you may not have considered is that the array <code>[\"75.00\", \"50.00\", \"25.00\"]</code> contains a bunch of strings.</p>\n\n<p>If you were to sum them together like this:</p>\n\n<pre><code>[\"75.00\", \"50.00\", \"25.00\"].sum\n\n# or like this as one commenter suggested\n[\"75.00\", \"50.00\", \"25.00\"].reduce(&amp;:+)\n\n# or the long-handed version\n[\"75.00\", \"50.00\", \"25.00\"].reduce {|str, val| str + val }\n</code></pre>\n\n<p>You would actually get <code>\"75.0050.0025.00\"</code>.  This is because the individual strings in the array are getting concatenated together.</p>\n\n<p>So in fact, you would need to convert the array to floats or integers first.  This can be done like this:</p>\n\n<pre><code>floats = [\"75.00\", \"50.00\", \"25.00\"].collect(&amp;:to_f)\n\n# or the long-handed version\n[\"75.00\", \"50.00\", \"25.00\"].collect {|val| val.to_f }\n</code></pre>\n\n<p>Then you can sum the values:</p>\n\n<pre><code>sum = floats.sum\n</code></pre>\n\n<p><strong>Edit:</strong></p>\n\n<p>I just tried summing a string column via ActiveRecord and got an exception <code>ActiveRecord::StatementInvalid: TinyTds::Error: Operand data type nvarchar is invalid for sum operator.:</code>.</p>\n\n<pre><code>payment_total = Credit.last.payments.sum(:payment_amount)\n# returns ActiveRecord::StatementInvalid: \n# TinyTds::Error: Operand data type nvarchar is invalid for sum \n# operator.\n</code></pre>\n\n<p>Looks like that won't be an option for you.  Although, you could change the datatype of the column so that it is something other than a string.  If you change the column datatype then you will be able to use <a href=\"http://api.rubyonrails.org/classes/ActiveRecord/Calculations.html\" rel=\"nofollow\">aggregate functions</a>.</p>\n"}], "owner": {"reputation": 35, "user_id": 3261842, "user_type": "registered", "profile_image": "https://graph.facebook.com/1001154956/picture?type=large", "display_name": "austinrocks1995", "link": "https://stackoverflow.com/users/3261842/austinrocks1995"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 59, "favorite_count": 0, "closed_date": 1468397950, "answer_count": 2, "score": -2, "last_activity_date": 1468370628, "creation_date": 1468366157, "last_edit_date": 1468370345, "question_id": 38340386, "link": "https://stackoverflow.com/questions/38340386/adding-array-contents-together-in-rails", "closed_reason": "Needs details or clarity", "title": "Adding Array Contents Together in rails", "body": "<p>Trying to add the contents of an array together. \n<code>[\"75.00\", \"50.00\", \"25.00\"]</code> the way I'm getting that info is with </p>\n\n<pre><code>c = Credit.last\nc.payments.map(&amp;:payment_amount).to_a\n</code></pre>\n\n<p>I'm trying to add up all the values together in the array. </p>\n"}, {"tags": ["javascript", "jquery", "ruby"], "answers": [{"comments": [{"owner": {"reputation": 1146, "user_id": 4232053, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/0986f0e77e408117b8557a825ad84289?s=128&d=identicon&r=PG&f=1", "display_name": "Ctpelnar1988", "link": "https://stackoverflow.com/users/4232053/ctpelnar1988"}, "edited": false, "score": 0, "creation_date": 1468366002, "post_id": 38340322, "comment_id": 64095106, "body": "Awesome, thank you. Do you know why <code>&lt;%=  r.title.to_s %&gt;</code> does not work?"}, {"owner": {"reputation": 54533, "user_id": 94559, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ab13b7f135315a91b9ef13e073354d90?s=128&d=identicon&r=PG&f=1", "display_name": "user94559", "link": "https://stackoverflow.com/users/94559/user94559"}, "reply_to_user": {"reputation": 1146, "user_id": 4232053, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/0986f0e77e408117b8557a825ad84289?s=128&d=identicon&r=PG&f=1", "display_name": "Ctpelnar1988", "link": "https://stackoverflow.com/users/4232053/ctpelnar1988"}, "edited": false, "score": 1, "creation_date": 1468366074, "post_id": 38340322, "comment_id": 64095120, "body": "For the same reason... you need to put quotes around the string."}, {"owner": {"reputation": 394580, "user_id": 479863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ArUCE.jpg?s=128&g=1", "display_name": "mu is too short", "link": "https://stackoverflow.com/users/479863/mu-is-too-short"}, "edited": false, "score": 0, "creation_date": 1468372351, "post_id": 38340322, "comment_id": 64096524, "body": "What happens if <code>r.title</code> contains a double quote?"}, {"owner": {"reputation": 54533, "user_id": 94559, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ab13b7f135315a91b9ef13e073354d90?s=128&d=identicon&r=PG&f=1", "display_name": "user94559", "link": "https://stackoverflow.com/users/94559/user94559"}, "edited": false, "score": 0, "creation_date": 1468373820, "post_id": 38340322, "comment_id": 64096810, "body": "See <a href=\"http://api.rubyonrails.org/classes/ActionView/Helpers/JavaScriptHelper.html#method-i-escape_javascript\" rel=\"nofollow noreferrer\">api.rubyonrails.org/classes/ActionView/Helpers/&hellip;</a>."}], "tags": [], "owner": {"reputation": 54533, "user_id": 94559, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ab13b7f135315a91b9ef13e073354d90?s=128&d=identicon&r=PG&f=1", "display_name": "user94559", "link": "https://stackoverflow.com/users/94559/user94559"}, "is_accepted": true, "score": 1, "last_activity_date": 1468365686, "creation_date": 1468365686, "answer_id": 38340322, "question_id": 38340298, "link": "https://stackoverflow.com/questions/38340298/javascript-uncaught-syntaxerror-missing-after-argument-list/38340322#38340322", "title": "JavaScript: Uncaught SyntaxError: missing ) after argument list", "body": "<p>I think you're missing quotes around the string. Try this:</p>\n\n<pre><code>&lt;p style=\"color:blue;\" class=\"room_&lt;%= counter %&gt;\"\n   onclick='addItemToCart(\"&lt;%= r.title %&gt;\", &lt;%= counter %&gt;)'&gt;Select Item&lt;/p&gt;\n</code></pre>\n\n<p><strong>EDIT</strong></p>\n\n<p>To understand the issue, try looking at the HTML it outputs. I imagine you'll see something like this:</p>\n\n<pre><code>&lt;p style=\"color:blue;\" class=\"room_123\"\n   onclick='addItemToCart(The large item, 123)'&gt;Select Item&lt;/p&gt;\n</code></pre>\n\n<p>Hopefully, the missing quotes are obvious from that output.</p>\n"}, {"tags": [], "owner": {"reputation": 7994, "user_id": 1625339, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/b8ba46f911517c8b2ccc39e0be9050c0?s=128&d=identicon&r=PG", "display_name": "Aetherus", "link": "https://stackoverflow.com/users/1625339/aetherus"}, "is_accepted": false, "score": 0, "last_activity_date": 1468368271, "last_edit_date": 1468368271, "creation_date": 1468367954, "answer_id": 38340627, "question_id": 38340298, "link": "https://stackoverflow.com/questions/38340298/javascript-uncaught-syntaxerror-missing-after-argument-list/38340627#38340627", "title": "JavaScript: Uncaught SyntaxError: missing ) after argument list", "body": "<p>I agree with @smarx, but I think this is a typical sample of mixing HTML, Javascript and Ruby snippet together, which should always be avoided.</p>\n\n<p>The better way is to at least separate Ruby snippet from Javascript.</p>\n\n<p><strong>ERB</strong></p>\n\n<pre><code>&lt;p style=\"color:blue;\" class=\"room_&lt;%= counter %&gt;\"\n  data-title=\"&lt;%= r.title %&gt;\"\n  data-counter=\"&lt;%= counter %&gt;\"\n  onclick='addItemToCart(this)'&gt;Select Item&lt;/p&gt;\n</code></pre>\n\n<p><strong>Javascript</strong></p>\n\n<pre><code>function addItemToCart(element) {\n  var title = element.dataset.title;\n  var counter = element.dataset.counter;\n  // ...\n}\n</code></pre>\n\n<p>You can see that I added two <code>data-*</code> attributes to the HTML, and read them in the Javascript. This seems a little verbose, but it's less spaghetti, and it clearly separates the code running on server (Ruby) from the code running on browsers (Javascript).</p>\n\n<p>P.S. If you're using jQuery, I would strongly recommend <em>NOT</em> to use <code>onclick</code> attribute, because it requires you to define global functions. Use <code>$(...).click(fn)</code> or <code>$(...).on('click', fn)</code> instead, because it allows anonymous non-global functions.</p>\n"}], "owner": {"reputation": 1146, "user_id": 4232053, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/0986f0e77e408117b8557a825ad84289?s=128&d=identicon&r=PG&f=1", "display_name": "Ctpelnar1988", "link": "https://stackoverflow.com/users/4232053/ctpelnar1988"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 442, "favorite_count": 0, "accepted_answer_id": 38340322, "answer_count": 2, "score": 0, "last_activity_date": 1468368271, "creation_date": 1468365539, "question_id": 38340298, "link": "https://stackoverflow.com/questions/38340298/javascript-uncaught-syntaxerror-missing-after-argument-list", "title": "JavaScript: Uncaught SyntaxError: missing ) after argument list", "body": "<p>When I try to pass a string as an argument in the following function, I get the <code>Uncaught SyntaxError: missing ) after argument list</code> error. It works fine when passing integers though. I am confused because I read a string must be passed as the argument, and not an integer. </p>\n\n<p><strong>HTML:</strong></p>\n\n<pre><code>r.title = \"The large item\"\ncounter = &lt;integer&gt;\n\n&lt;% @items.each do |r| %&gt;\n  &lt;p&gt;Title: &lt;%= r.title %&gt;&lt;/p&gt;\n  &lt;p&gt;Price: &lt;%= r.price %&gt;&lt;/p&gt;\n  &lt;p&gt;Description: &lt;%= r.description %&gt;&lt;/p&gt;\n  &lt;p style=\"color:blue;\" class=\"room_&lt;%= counter %&gt;\" onclick='addItemToCart(&lt;%= r.title %&gt;, &lt;%= counter %&gt;)'&gt;Select Item&lt;/p&gt;\n  &lt;br&gt;\n  &lt;br&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>When I pass <code>r.id</code> in place of <code>r.title</code>, the code works.</p>\n\n<p><strong>JavaScript:</strong></p>\n\n<pre><code>&lt;script text/javascript&gt;\n  function addItemToCart(title, item_number){\n    $(\"#\" + item_number).append(\"&lt;br&gt;\"+title);\n  }\n&lt;/script&gt;\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "hash"], "comments": [{"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1468362809, "post_id": 38339734, "comment_id": 64094217, "body": "Probably just check the type. I.e. <code>if value.is_a?(Hash) ... else </code>"}], "answers": [{"tags": [], "owner": {"reputation": 7994, "user_id": 1625339, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/b8ba46f911517c8b2ccc39e0be9050c0?s=128&d=identicon&r=PG", "display_name": "Aetherus", "link": "https://stackoverflow.com/users/1625339/aetherus"}, "is_accepted": false, "score": 4, "last_activity_date": 1468369022, "last_edit_date": 1468369022, "creation_date": 1468362953, "answer_id": 38339937, "question_id": 38339734, "link": "https://stackoverflow.com/questions/38339734/how-to-handle-the-case-when-input-to-reduce-is-hash-rather-than-array-of-hashes/38339937#38339937", "title": "How to handle the case when input to reduce is hash rather than array of hashes", "body": "<p>It's easy to ensure something being an array. You don't need if-else. Just wrap it in a new array, then flatten that array 1 level down. I have to admit that this is not very performant, but I don't care if what I originally want to do is O(n) or higher (like mapping, reducing, sorting, whatever that requires traversing the array at least once). I won't go this way if what I originally want to do is O(log(n)) or lower (like binary search).</p>\n\n<pre><code>[hsh['property']].flatten(1).reduce(HashWithIndifferentAccess.new) do |scan, kv_pair|\n  scan.merge kv_pair['name'] =&gt; kv_pair['value']\nend\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 560, "user_id": 2362505, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/181c3e1a813fb39b2720f4b2ba34e9cd?s=128&d=identicon&r=PG", "display_name": "harshs08", "link": "https://stackoverflow.com/users/2362505/harshs08"}, "edited": false, "score": 0, "creation_date": 1468365252, "post_id": 38340014, "comment_id": 64094944, "body": "The <code>Array</code> part  <code>properties.each_with_index(HashWithIndifferentAccess.new) do |scan, kv_pair|           scan[kv_pair[&#39;name&#39;]] = kv_pair[&#39;value&#39;]  end</code> errors out with <code>ArgumentError Exception: wrong number of arguments (given 1, expected 0)</code>. Seems like <code>each_with_index</code> doesn&#39;t take any argument."}, {"owner": {"reputation": 560, "user_id": 2362505, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/181c3e1a813fb39b2720f4b2ba34e9cd?s=128&d=identicon&r=PG", "display_name": "harshs08", "link": "https://stackoverflow.com/users/2362505/harshs08"}, "edited": false, "score": 0, "creation_date": 1468365707, "post_id": 38340014, "comment_id": 64095046, "body": "Will it be <code>each_with_object</code> rather than <code>each_with_index</code>."}], "tags": [], "owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "is_accepted": false, "score": 1, "last_activity_date": 1468373203, "last_edit_date": 1468373203, "creation_date": 1468363426, "answer_id": 38340014, "question_id": 38339734, "link": "https://stackoverflow.com/questions/38339734/how-to-handle-the-case-when-input-to-reduce-is-hash-rather-than-array-of-hashes/38340014#38340014", "title": "How to handle the case when input to reduce is hash rather than array of hashes", "body": "<p>The first thing to fix is to get rid of <code>merge</code> which creates an intermediate Hash each time through the loop. That's a lot of garbage to collect. The second thing is to use the simpler <code>each_with_index</code> method that doesn't require chaining. This way you can just add data:</p>\n\n<pre><code>hsh['property'].each_with_object(HashWithIndifferentAccess.new) do |kv_pair, scan|\n  scan[kv_pair['name']] = kv_pair['value']\nend\n</code></pre>\n\n<p>This will work so long as <code>property</code> has a series of Hash objects in an array. If you have just one you'll need to special case that:</p>\n\n<pre><code>case hsh['property']\nwhen Hash\n  HashWithIndifferentAccess.new(\n    hsh['property']['name'] =&gt; hsh['property']['value']\n  )\nwhen Array\n  hsh['property'].each_with_object(HashWithIndifferentAccess.new) do |kv_pair, scan|\n    scan[kv_pair['name']] = kv_pair['value']\n  end\nelse\n  # Uh-oh, you've got to handle this case of something random.\nend\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 560, "user_id": 2362505, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/181c3e1a813fb39b2720f4b2ba34e9cd?s=128&d=identicon&r=PG", "display_name": "harshs08", "link": "https://stackoverflow.com/users/2362505/harshs08"}, "edited": false, "score": 0, "creation_date": 1468366207, "post_id": 38340344, "comment_id": 64095160, "body": "I am partially responsible, meaning I am using <code>httparty</code> gem to hit an API endpoint which return an XML. The httparty response object&#39;s parsed_response is the one which is forming this hash."}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "reply_to_user": {"reputation": 560, "user_id": 2362505, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/181c3e1a813fb39b2720f4b2ba34e9cd?s=128&d=identicon&r=PG", "display_name": "harshs08", "link": "https://stackoverflow.com/users/2362505/harshs08"}, "edited": false, "score": 1, "creation_date": 1468366263, "post_id": 38340344, "comment_id": 64095170, "body": "Then immediately change the returned value so you have a consistent result. Don&#39;t live with the misery of having to jump one way or other because the data type changes."}], "tags": [], "owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "is_accepted": true, "score": 1, "last_activity_date": 1468366204, "last_edit_date": 1468366204, "creation_date": 1468365842, "answer_id": 38340344, "question_id": 38339734, "link": "https://stackoverflow.com/questions/38339734/how-to-handle-the-case-when-input-to-reduce-is-hash-rather-than-array-of-hashes/38340344#38340344", "title": "How to handle the case when input to reduce is hash rather than array of hashes", "body": "<p>I'd convert the incoming parameter to an array of a single hash, then proceed:</p>\n\n<pre><code>def foo(aoh)\n  aoh = [aoh] unless Array === aoh\n\n  aoh # return it so we can see it's been changed\n\n  # do stuff with the AoH\nend\n\nfoo({a:1}) # =&gt; [{:a=&gt;1}]\nfoo([{a:1},{b:2}]) # =&gt; [{:a=&gt;1}, {:b=&gt;2}]\n</code></pre>\n\n<p>Once it's an array of a single hash, or multiple hashes, you can iterate over the contents of the array with the same code.</p>\n\n<p>If you are responsible for generating the single hash or an array of hashes, you should always generate the same type of object, an array of hashes, which makes it easier for you to deal with it. If you don't, then convert it to the same type of object and move on.</p>\n"}, {"tags": [], "owner": {"reputation": 33085, "user_id": 2423164, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Nxbnp.jpg?s=128&g=1", "display_name": "ndnenkov", "link": "https://stackoverflow.com/users/2423164/ndnenkov"}, "is_accepted": false, "score": 0, "last_activity_date": 1468370988, "last_edit_date": 1468370988, "creation_date": 1468370604, "answer_id": 38340944, "question_id": 38339734, "link": "https://stackoverflow.com/questions/38339734/how-to-handle-the-case-when-input-to-reduce-is-hash-rather-than-array-of-hashes/38340944#38340944", "title": "How to handle the case when input to reduce is hash rather than array of hashes", "body": "<p>As you are using rails, there is a dedicated method for ensuring something is an array - <a href=\"http://api.rubyonrails.org/v4.2/classes/Array.html#method-c-wrap\" rel=\"nofollow\"><code>Array#wrap</code></a>. Also note that your use of <code>#reduce</code> is considered unindiomatic and you should use <code>#each_with_object</code> instead.</p>\n\n<p>Here is a possible solution:</p>\n\n<pre><code>Array.wrap(hsh['property']).map { |kv| [kv['name'], kv['value']] }.to_h\n</code></pre>\n\n<hr>\n\n<p>If you are using ruby 2.3.0+, you can even take advantage of the cool new <code>Hash#to_proc</code>:</p>\n\n<pre><code>Array.wrap(hsh['property']).map { |kv| ['name', 'value'].map(&amp;kv) }.to_h\n</code></pre>\n\n<hr>\n\n<p>If you insist, you can add the <code>#with_indifferent_access</code> at the end.</p>\n"}], "owner": {"reputation": 560, "user_id": 2362505, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/181c3e1a813fb39b2720f4b2ba34e9cd?s=128&d=identicon&r=PG", "display_name": "harshs08", "link": "https://stackoverflow.com/users/2362505/harshs08"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 86, "favorite_count": 0, "accepted_answer_id": 38340344, "answer_count": 4, "score": 0, "last_activity_date": 1468373203, "creation_date": 1468361717, "last_edit_date": 1468366080, "question_id": 38339734, "link": "https://stackoverflow.com/questions/38339734/how-to-handle-the-case-when-input-to-reduce-is-hash-rather-than-array-of-hashes", "title": "How to handle the case when input to reduce is hash rather than array of hashes", "body": "<p>I have an incoming input which is sometimes an array of hashes and sometimes its just an individual hash.</p>\n\n<pre><code>hsh = {\"property\"=&gt;[{\"name\"=&gt;\"first_name\", \"value\"=&gt;\"Joe\"}, {\"name\"=&gt;\"last_name\", \"value\"=&gt;\"Doe\"}]}\n</code></pre>\n\n<p>or</p>\n\n<pre><code>hsh = {\"property\"=&gt;{\"name\"=&gt;\"Foo\", \"value\"=&gt;\"Bar\"}}\n</code></pre>\n\n<p>From this input I am trying to generate a hash with <code>name</code> as <code>key</code> and <code>value</code> and as <code>value</code>, something like this:</p>\n\n<pre><code>hsh['property'].reduce(HashWithIndifferentAccess.new) do |scan, kv_pair|\n  scan.merge kv_pair['name'] =&gt; kv_pair['value']\nend\n</code></pre>\n\n<p>Giving:</p>\n\n<pre><code>{\"first_name\"=&gt;\"Joe\", \"last_name\"=&gt;\"Doe\"}\n</code></pre>\n\n<p>This works well when <code>hsh['property']</code> is an array of hashes but fails with the following error:</p>\n\n<pre><code>TypeError: no implicit conversion of String into Integer \n</code></pre>\n\n<p>when it's just an hash.</p>\n\n<p>How do I handle the <code>reduce</code> on <code>hsh['property']</code> so it handles the case when input to it is hash rather than array of hashes?</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 1, "creation_date": 1468361107, "post_id": 38339553, "comment_id": 64093659, "body": "ActiveRecord already does this, in part. If you have a schema which details a users table with various columns, you just have to write <code>class User &lt; ActiveRecord::Base; end</code> and you have getters / setters for the columns. So you still need to create model files for each time. I&#39;m not aware of a model auto-gen library."}, {"owner": {"reputation": 1861, "user_id": 2146169, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/b63643435e5114d60fe12267ae197a3c?s=128&d=identicon&r=PG", "display_name": "pepper", "link": "https://stackoverflow.com/users/2146169/pepper"}, "reply_to_user": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1468361556, "post_id": 38339553, "comment_id": 64093831, "body": "Is there a way to make active record inspect the database so that it can be used? How will active record be able to wrap around the database schema without inspecting it at all?"}, {"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1468362308, "post_id": 38339553, "comment_id": 64094056, "body": "active record looks at the schema, not the database. There is apparently a way to generate a schema from your database (see <a href=\"https://stackoverflow.com/questions/12879184/generate-activerecord-schema-from-an-existing-table\">generate-activerecord-schema-from-an-existing-table</a> but there is no need to do this if you&#39;re using migrations to alter the database."}], "answers": [{"comments": [{"owner": {"reputation": 1861, "user_id": 2146169, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/b63643435e5114d60fe12267ae197a3c?s=128&d=identicon&r=PG", "display_name": "pepper", "link": "https://stackoverflow.com/users/2146169/pepper"}, "edited": false, "score": 0, "creation_date": 1468385372, "post_id": 38340881, "comment_id": 64099471, "body": "will this work the same way within rails as well? or does rails require that the database have certain conventions (like names or schema)"}, {"owner": {"reputation": 7994, "user_id": 1625339, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/b8ba46f911517c8b2ccc39e0be9050c0?s=128&d=identicon&r=PG", "display_name": "Aetherus", "link": "https://stackoverflow.com/users/1625339/aetherus"}, "reply_to_user": {"reputation": 1861, "user_id": 2146169, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/b63643435e5114d60fe12267ae197a3c?s=128&d=identicon&r=PG", "display_name": "pepper", "link": "https://stackoverflow.com/users/2146169/pepper"}, "edited": false, "score": 0, "creation_date": 1468418509, "post_id": 38340881, "comment_id": 64120056, "body": "In Rails, you can just omit the the part that starts from <code>db_config = ...</code>"}], "tags": [], "owner": {"reputation": 7994, "user_id": 1625339, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/b8ba46f911517c8b2ccc39e0be9050c0?s=128&d=identicon&r=PG", "display_name": "Aetherus", "link": "https://stackoverflow.com/users/1625339/aetherus"}, "is_accepted": false, "score": 1, "last_activity_date": 1468369954, "creation_date": 1468369954, "answer_id": 38340881, "question_id": 38339553, "link": "https://stackoverflow.com/questions/38339553/something-similar-to-sqlautocode-for-rails-auto-generate-models-from-existing-d/38340881#38340881", "title": "something similar to sqlautocode for rails (auto-generate models from existing db schema)?", "body": "<p>Active Record is good for this. If you want to use it outside rails, then</p>\n\n<pre><code>class Foo &lt; ActiveRecord::Base\n  # In case the table name not following rails convention\n  self.table_name = 'bar'\nend\n\ndb_config = {\n  adapter: 'mysql2',\n  host: 'localhost',\n  port: 3306,\n  database: 'foobar'\n}\n\nActiveRecord::Base.establish_connection(db_config)\n</code></pre>\n\n<p>That's all.</p>\n"}], "owner": {"reputation": 1861, "user_id": 2146169, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/b63643435e5114d60fe12267ae197a3c?s=128&d=identicon&r=PG", "display_name": "pepper", "link": "https://stackoverflow.com/users/2146169/pepper"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 40, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1468369954, "creation_date": 1468360882, "question_id": 38339553, "link": "https://stackoverflow.com/questions/38339553/something-similar-to-sqlautocode-for-rails-auto-generate-models-from-existing-d", "title": "something similar to sqlautocode for rails (auto-generate models from existing db schema)?", "body": "<p>I'm looking for a way to inspect a database schema and auto-generate models in Rails. Does anyone know of a project/gem that does this?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "heroku", "push"], "comments": [{"owner": {"reputation": 4688, "user_id": 2116518, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Hwt8F.jpg?s=128&g=1", "display_name": "Nic Nilov", "link": "https://stackoverflow.com/users/2116518/nic-nilov"}, "edited": false, "score": 0, "creation_date": 1468358649, "post_id": 38339093, "comment_id": 64092612, "body": "Did you take a look <a href=\"https://github.com/bundler/bundler/issues/3053\" rel=\"nofollow noreferrer\">at this</a>?"}, {"owner": {"reputation": 393, "user_id": 4347423, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/0175ce86b787c87515c165b7269483f3?s=128&d=identicon&r=PG&f=1", "display_name": "DanRio", "link": "https://stackoverflow.com/users/4347423/danrio"}, "reply_to_user": {"reputation": 4688, "user_id": 2116518, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Hwt8F.jpg?s=128&g=1", "display_name": "Nic Nilov", "link": "https://stackoverflow.com/users/2116518/nic-nilov"}, "edited": false, "score": 0, "creation_date": 1468359994, "post_id": 38339093, "comment_id": 64093220, "body": "I just had a look thanks. I tried deleting the .bundle/config file and it hasn&#39;t helped. When I run bundle config it doesn&#39;t show any double quotes like the post mentions, I&#39;ll add the output to my question"}, {"owner": {"reputation": 4688, "user_id": 2116518, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Hwt8F.jpg?s=128&g=1", "display_name": "Nic Nilov", "link": "https://stackoverflow.com/users/2116518/nic-nilov"}, "edited": false, "score": 0, "creation_date": 1468360120, "post_id": 38339093, "comment_id": 64093270, "body": "Perhaps more importantly you should update your local bundler and make sure it works before pushing."}, {"owner": {"reputation": 393, "user_id": 4347423, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/0175ce86b787c87515c165b7269483f3?s=128&d=identicon&r=PG&f=1", "display_name": "DanRio", "link": "https://stackoverflow.com/users/4347423/danrio"}, "reply_to_user": {"reputation": 4688, "user_id": 2116518, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Hwt8F.jpg?s=128&g=1", "display_name": "Nic Nilov", "link": "https://stackoverflow.com/users/2116518/nic-nilov"}, "edited": false, "score": 0, "creation_date": 1468361345, "post_id": 38339093, "comment_id": 64093757, "body": "Sorry not sure exactly what you mean, I&#39;ve still got lots to learn. I&#39;ve run <b>gem bundle install</b> which &#39;Successfully installed bundler-1.12.5&#39;. I noticed that in the gemlock file under rails (4.2.6) it says        bundler (&gt;= 1.3.0, &lt; 2.0).    Even if I run &#39;gem install bundler -v &#39;~&gt; 1.3.0&#39; the version stays the same when I run bundler -v. May be well off track, sorry been looking at this too long my brain is melting."}], "answers": [{"comments": [{"owner": {"reputation": 393, "user_id": 4347423, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/0175ce86b787c87515c165b7269483f3?s=128&d=identicon&r=PG&f=1", "display_name": "DanRio", "link": "https://stackoverflow.com/users/4347423/danrio"}, "edited": false, "score": 0, "creation_date": 1468407384, "post_id": 38343016, "comment_id": 64111905, "body": "Thanks for the advice, I&#39;ve tried that but it doesn&#39;t help either. Completely stuck on this"}, {"owner": {"reputation": 7, "user_id": 6525258, "user_type": "registered", "profile_image": "https://graph.facebook.com/10209861669607800/picture?type=large", "display_name": "Nick Read", "link": "https://stackoverflow.com/users/6525258/nick-read"}, "reply_to_user": {"reputation": 393, "user_id": 4347423, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/0175ce86b787c87515c165b7269483f3?s=128&d=identicon&r=PG&f=1", "display_name": "DanRio", "link": "https://stackoverflow.com/users/4347423/danrio"}, "edited": false, "score": 0, "creation_date": 1468518549, "post_id": 38343016, "comment_id": 64171705, "body": "are you able to share your gemfile.lock or just check that you are Bundled with 1.12.5 this should be at the end of the gemfile.lock"}, {"owner": {"reputation": 393, "user_id": 4347423, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/0175ce86b787c87515c165b7269483f3?s=128&d=identicon&r=PG&f=1", "display_name": "DanRio", "link": "https://stackoverflow.com/users/4347423/danrio"}, "edited": false, "score": 0, "creation_date": 1468584777, "post_id": 38343016, "comment_id": 64199939, "body": "Hi Nick I&#39;ve included the gemfile lock lock now, it is bundled with 1.12.5"}], "tags": [], "owner": {"reputation": 7, "user_id": 6525258, "user_type": "registered", "profile_image": "https://graph.facebook.com/10209861669607800/picture?type=large", "display_name": "Nick Read", "link": "https://stackoverflow.com/users/6525258/nick-read"}, "is_accepted": false, "score": 0, "last_activity_date": 1498241073, "last_edit_date": 1498241073, "creation_date": 1468386191, "answer_id": 38343016, "question_id": 38339093, "link": "https://stackoverflow.com/questions/38339093/error-pushing-to-heroku-with-rails-sh-2-syntax-error-unterminated-quoted-st/38343016#38343016", "title": "Error pushing to Heroku with Rails - sh: 2: Syntax error: Unterminated quoted string", "body": "<p>Some times the pg gem can get you into trouble, try running this in your terminal <code>bundle install --without production</code> this will let you install the necessary gems but skip the <code>group :production do</code> where your pg gem is located.</p>\n\n<p>This should let everything run much smoother. </p>\n\n<p>If not try uninstalling the <code>pg</code> and <code>rails_12factor</code> gems:</p>\n\n<pre><code>$ bundle exec gem uninstall pg\n$ bundle install --without production\n$ bundle exec gem uninstall rails_12factor\n$ bundle install --without production\n</code></pre>\n\n<p>I hope this helps!</p>\n"}, {"tags": [], "owner": {"reputation": 2248, "user_id": 3038677, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/297e51c02b57e01d3fd06980f674e1b6?s=128&d=identicon&r=PG", "display_name": "mycargus", "link": "https://stackoverflow.com/users/3038677/mycargus"}, "is_accepted": false, "score": 1, "last_activity_date": 1487849553, "creation_date": 1487849553, "answer_id": 42414606, "question_id": 38339093, "link": "https://stackoverflow.com/questions/38339093/error-pushing-to-heroku-with-rails-sh-2-syntax-error-unterminated-quoted-st/42414606#42414606", "title": "Error pushing to Heroku with Rails - sh: 2: Syntax error: Unterminated quoted string", "body": "<p>Have you tried what the error message suggests?</p>\n\n<blockquote>\n  <p>ensure you can run <code>$ bundle exec rake -P</code> against your app and using the production group of your Gemfile.</p>\n</blockquote>\n\n<p>I encountered a similar issue and trying this showed me I had a Rake task trying to load a dependency which was only defined in my <code>:test</code> Gemfile group. </p>\n\n<p>Removing the <code>require '&lt;dependency&gt;'</code> statement from the Rake task solved the problem as it turned out the Rake task didn't need that library. Alternatively, I could have added the gem to my <code>:production</code> Gemfile group.</p>\n\n<p>Point being this: Try what the error message suggests if you haven't already. :)</p>\n"}], "owner": {"reputation": 393, "user_id": 4347423, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/0175ce86b787c87515c165b7269483f3?s=128&d=identicon&r=PG&f=1", "display_name": "DanRio", "link": "https://stackoverflow.com/users/4347423/danrio"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1722, "favorite_count": 1, "answer_count": 2, "score": 2, "last_activity_date": 1498241073, "creation_date": 1468358493, "last_edit_date": 1468584637, "question_id": 38339093, "link": "https://stackoverflow.com/questions/38339093/error-pushing-to-heroku-with-rails-sh-2-syntax-error-unterminated-quoted-st", "title": "Error pushing to Heroku with Rails - sh: 2: Syntax error: Unterminated quoted string", "body": "<p>I'm using rails and trying to push my app to Heroku. I've made various apps before and never ran into this problem. I've spent hours searching for the cause of the problem and just cannot figure it out. I've ran bundle install, bundle update, removed Heroku .env variables, nothing helps. </p>\n\n<p>When I run <strong>git push heroku master</strong> I get the following error:</p>\n\n<pre><code>    git push heroku\n    Counting objects: 24, done.\n    Delta compression using up to 4 threads.\n    Compressing objects: 100% (24/24), done.\n    Writing objects: 100% (24/24), 4.10 KiB | 0 bytes/s, done.\n    Total 24 (delta 14), reused 0 (delta 0)\n    remote: Compressing source files... done.\n    remote: Building source:\n    remote:\n    remote: -----&gt; Fetching set buildpack https://codon-buildpacks.s3.amazonaws.com/buildpacks/heroku/ruby.tgz\n    remote: -----&gt; Ruby app detected\n    remote: -----&gt; Compiling Ruby/Rails\n    remote: -----&gt; Using Ruby version: ruby-2.2.4\n    remote: -----&gt; Installing dependencies using bundler 1.11.2\n    remote:        Running: bundle install --without development:test --path vendor/bundle --binstubs vendor/bundle/bin -j4 --deployment\n    remote:        Warning: the running version of Bundler is older than the version that created the lockfile. We suggest you upgrade to the latest version of Bundler by running `gem install bundler`.\n    remote:        Fetching gem metadata from https://rubygems.org/...........\n    remote:        Fetching version metadata from https://rubygems.org/...\n    remote:        Fetching dependency metadata from https://rubygems.org/..\n    remote:        Installing i18n 0.7.0\n    remote:        Installing json 1.8.3 with native extensions\n    remote:        Installing rake 11.2.2\n    remote:        Installing minitest 5.9.0\n    remote:        Installing thread_safe 0.3.5\n    remote:        Installing builder 3.2.2\n    remote:        Installing erubis 2.7.0\n    remote:        Installing mini_portile2 2.1.0\n    remote:        Installing pkg-config 1.1.7\n    remote:        Installing rack 1.6.4\n    remote:        Using bundler 1.11.2\n    remote:        Installing mime-types-data 3.2016.0521\n    remote:        Installing arel 6.0.3\n    remote:        Installing thor 0.19.1\n    remote:        Installing concurrent-ruby 1.0.2\n    remote:        Installing execjs 2.7.0\n    remote:        Installing sass 3.4.22\n    remote:        Installing coffee-script-source 1.10.0\n    remote:        Installing high_voltage 2.4.0\n    remote:        Installing multi_json 1.12.1\n    remote:        Installing turbolinks-source 5.0.0\n    remote:        Installing libv8 3.16.14.15\n    remote:        Installing pg 0.17.1 with native extensions\n    remote:        Installing rails_serve_static_assets 0.0.5\n    remote:        Installing rails_stdout_logging 0.0.4\n    remote:        Installing ref 2.0.0\n    remote:        Installing tilt 2.0.5\n    remote:        Installing tzinfo 1.2.2\n    remote:        Installing rdoc 4.2.2\n    remote:        Installing nokogiri 1.6.8 with native extensions\n    remote:        Installing rack-test 0.6.3\n    remote:        Installing heroku-deflater 0.6.2\n    remote:        Installing puma 2.11.1 with native extensions\n    remote:        Installing mime-types 3.1\n    remote:        Installing autoprefixer-rails 6.3.7\n    remote:        Installing uglifier 3.0.0\n    remote:        Installing sprockets 3.6.3\n    remote:        Installing coffee-script 2.4.1\n    remote:        Installing turbolinks 5.0.0\n    remote:        Installing rails_12factor 0.0.2\n    remote:        Installing therubyracer 0.12.2 with native extensions\n    remote:        Installing activesupport 4.2.6\n    remote:        Installing sdoc 0.4.0\n    remote:        Installing mail 2.6.4\n    remote:        Installing bootstrap-sass 3.3.6\n    remote:        Installing loofah 2.0.3\n    remote:        Installing rails-deprecated_sanitizer 1.0.3\n    remote:        Installing globalid 0.3.6\n    remote:        Installing activemodel 4.2.6\n    remote:        Installing jbuilder 2.5.0\n    remote:        Installing rails-html-sanitizer 1.0.3\n    remote:        Installing rails-dom-testing 1.0.7\n    remote:        Installing activejob 4.2.6\n    remote:        Installing activerecord 4.2.6\n    remote:        Installing actionview 4.2.6\n    remote:        Installing actionpack 4.2.6\n    remote:        Installing actionmailer 4.2.6\n    remote:        Installing railties 4.2.6\n    remote:        Installing sprockets-rails 3.1.1\n    remote:        Installing coffee-rails 4.2.1\n    remote:        Installing font-awesome-rails 4.6.3.1\n    remote:        Installing jquery-rails 4.1.1\n    remote:        Installing jquery-turbolinks 2.1.0\n    remote:        Installing rails 4.2.6\n    remote:        Installing sass-rails 5.0.5\n    remote:        Installing animate-rails 1.0.10\n    remote:        Bundle complete! 28 Gemfile dependencies, 66 gems now installed.\n    remote:        Gems in the groups development and test were not installed.\n    remote:        Bundled gems are installed into ./vendor/bundle.\n    remote:        Post-install message from rdoc:\n    remote:        Depending on your version of ruby, you may need to install ruby rdoc/ri data:\n    remote:        &lt;= 1.8.6 : unsupported\n    remote:        = 1.8.7 : gem install rdoc-data; rdoc-data --install\n    remote:        = 1.9.1 : gem install rdoc-data; rdoc-data --install\n    remote:        &gt;= 1.9.2 : nothing to do! Yay!\n    remote:        Bundle completed (33.65s)\n    remote:        Cleaning up the bundler cache.\n    remote:        Warning: the running version of Bundler is older than the version that created the lockfile. We suggest you upgrade to the latest version of Bundler by running `gem install bundler`.\n    remote: sh: 2: Syntax error: Unterminated quoted string\n    remote: sh: 2: Syntax error: Unterminated quoted string\n    remote:  !\n    remote:  !     Could not detect rake tasks\n    remote:  !     ensure you can run `$ bundle exec rake -P` against your app\n    remote:  !     and using the production group of your Gemfile.\n    remote:  !     rake aborted!\n    remote:  !     LoadError: cannot load such file -- /tmp/build_0f0d17123ff56c25b8d1a82d83ea67c6/config/application\n    remote:  !     /tmp/build_0f0d17123ff56c25b8d1a82d83ea67c6/Rakefile:4:in `require'\n    remote:  !     /tmp/build_0f0d17123ff56c25b8d1a82d83ea67c6/Rakefile:4:in `&lt;top (required)&gt;'\n    remote:  !     /tmp/build_0f0d17123ff56c25b8d1a82d83ea67c6/vendor/bundle/ruby/2.2.0/gems/rake-11.2.2/lib/rake/rake_module.rb:28:in `load'\n    remote:  !     /tmp/build_0f0d17123ff56c25b8d1a82d83ea67c6/vendor/bundle/ruby/2.2.0/gems/rake-11.2.2/lib/rake/rake_module.rb:28:in `load_rakefile'\n    remote:  !     /tmp/build_0f0d17123ff56c25b8d1a82d83ea67c6/vendor/bundle/ruby/2.2.0/gems/rake-11.2.2/lib/rake/application.rb:686:in `raw_load_rakefile'\n    remote:  !     /tmp/build_0f0d17123ff56c25b8d1a82d83ea67c6/vendor/bundle/ruby/2.2.0/gems/rake-11.2.2/lib/rake/application.rb:96:in `block in load_rakefile'\n    remote:  !     /tmp/build_0f0d17123ff56c25b8d1a82d83ea67c6/vendor/bundle/ruby/2.2.0/gems/rake-11.2.2/lib/rake/application.rb:178:in `standard_exception_handling'\n    remote:  !     /tmp/build_0f0d17123ff56c25b8d1a82d83ea67c6/vendor/bundle/ruby/2.2.0/gems/rake-11.2.2/lib/rake/application.rb:95:in `load_rakefile'\n    remote:  !     /tmp/build_0f0d17123ff56c25b8d1a82d83ea67c6/vendor/bundle/ruby/2.2.0/gems/rake-11.2.2/lib/rake/application.rb:79:in `block in run'\n    remote:  !     /tmp/build_0f0d17123ff56c25b8d1a82d83ea67c6/vendor/bundle/ruby/2.2.0/gems/rake-11.2.2/lib/rake/application.rb:178:in `standard_exception_handling'\n    remote:  !     /tmp/build_0f0d17123ff56c25b8d1a82d83ea67c6/vendor/bundle/ruby/2.2.0/gems/rake-11.2.2/lib/rake/application.rb:77:in `run'\n    remote:  !     /tmp/build_0f0d17123ff56c25b8d1a82d83ea67c6/vendor/bundle/ruby/2.2.0/gems/rake-11.2.2/exe/rake:27:in `&lt;top (required)&gt;'\n    remote:  !     vendor/bundle/bin/rake:16:in `load'\n    remote:  !     vendor/bundle/bin/rake:16:in `&lt;main&gt;'\n    remote:  !\n    remote: /app/tmp/buildpacks/f6d48d8a14fccbb19c0c0402fca224929d18e9ee042b3e204bc5992612e990d3b3a0fb1f9627b1a3bae11e9fa20dffc96e136bd734a2f3cf92a0d05bedd42cfe/lib/language_pack/helpers/rake_runner.rb:102:in `load_rake_tasks!': Could not detect rake tasks (LanguagePack::Helpers::RakeRunner::CannotLoadRakefileError)\n    remote: ensure you can run `$ bundle exec rake -P` against your app\n    remote: and using the production group of your Gemfile.\n    remote: rake aborted!\n    remote: LoadError: cannot load such file -- /tmp/build_0f0d17123ff56c25b8d1a82d83ea67c6/config/application\n    remote: /tmp/build_0f0d17123ff56c25b8d1a82d83ea67c6/Rakefile:4:in `require'\n    remote: /tmp/build_0f0d17123ff56c25b8d1a82d83ea67c6/Rakefile:4:in `&lt;top (required)&gt;'\n    remote: /tmp/build_0f0d17123ff56c25b8d1a82d83ea67c6/vendor/bundle/ruby/2.2.0/gems/rake-11.2.2/lib/rake/rake_module.rb:28:in `load'\n\n    remote:     from /app/tmp/buildpacks/f6d48d8a14fccbb19c0c0402fca224929d18e9ee042b3e204bc5992612e990d3b3a0fb1f9627b1a3bae11e9fa20dffc96e136bd734a2f3cf92a0d05bedd42cfe/lib/language_pack/instrument.rb:17:in `block in instrument'\n    remote:     from /app/vendor/ruby-2.3.1/lib/ruby/2.3.0/benchmark.rb:308:in `realtime'\n    remote:     from /app/tmp/buildpacks/f6d48d8a14fccbb19c0c0402fca224929d18e9ee042b3e204bc5992612e990d3b3a0fb1f9627b1a3bae11e9fa20dffc96e136bd734a2f3cf92a0d05bedd42cfe/lib/language_pack/instrument.rb:16:in `instrument'\n    remote:     from /app/tmp/buildpacks/f6d48d8a14fccbb19c0c0402fca224929d18e9ee042b3e204bc5992612e990d3b3a0fb1f9627b1a3bae11e9fa20dffc96e136bd734a2f3cf92a0d05bedd42cfe/lib/language_pack/instrument.rb:35:in `trace'\n    remote:     from /app/tmp/buildpacks/f6d48d8a14fccbb19c0c0402fca224929d18e9ee042b3e204bc5992612e990d3b3a0fb1f9627b1a3bae11e9fa20dffc96e136bd734a2f3cf92a0d05bedd42cfe/bin/compile:11:in `&lt;main&gt;'\n    remote:  !     Push rejected, failed to compile Ruby app.\n    remote:\n    remote:  !     Push failed\n    remote: Verifying deploy...\n    remote:\n    remote: !   Push rejected to fast-dawn-92173.\n    remote:\n    To https://git.heroku.com/fast-dawn-92173.git\n     ! [remote rejected] master -&gt; master (pre-receive hook declined)\n    error: failed to push some refs to 'https://git.heroku.com/fast-dawn-92173.git'\n</code></pre>\n\n<p>and here is my gemfile</p>\n\n<pre><code>    source 'https://rubygems.org'\n\n    gem 'rails'\n    gem 'bootstrap-sass'\n    gem 'sass-rails'\n    gem 'therubyracer'\n    gem 'uglifier', '&gt;= 1.3.0'\n    gem 'coffee-rails'\n    gem 'jquery-rails'\n    gem 'turbolinks'\n    gem 'jbuilder'\n    gem 'sdoc', '0.4.0', group: :doc\n    gem 'font-awesome-rails'\n    gem 'high_voltage', '~&gt; 2.4.0'\n    gem 'sprockets-rails', require: 'sprockets/railtie'\n    gem 'jquery-turbolinks'\n    gem 'animate-rails'\n\n    group :development, :test do\n        gem 'sqlite3'\n        gem 'byebug'\n        gem 'web-console'\n        gem 'spring'\n        gem 'better_errors'\n        gem 'letter_opener'\n    end\n\n    group :test do\n        gem 'minitest-reporters', '1.0.5'\n        gem 'mini_backtrace',     '0.1.3'\n        gem 'guard-minitest',     '2.3.1'\n    end\n\n    group :production do\n        gem 'pg', '0.17.1'\n        gem 'rails_12factor', '0.0.2'\n        gem 'puma',           '2.11.1'\n        gem 'heroku-deflater'\n    end\n</code></pre>\n\n<p>Everything is working fine on localhost but just can't push to heroku. Please let me know if you need anything else. Any help would be great thanks!!</p>\n\n<p>As mentioned in a question it could be something to do with the .bundle/config. I deleted that which didn't changed anything, my output from bundle config is:</p>\n\n<pre><code>        Settings are listed in order of priority. The top value will be used.\n    orig_path\n    Set via BUNDLE_ORIG_PATH: \"/Users/luisaczc/.rvm/gems/ruby-2.2.3/bin:/Users/luisaczc/.rvm/gems/ruby-2.2.3@global/bin:/Users/luisaczc/.rvm/rubies/ruby-2.2.3/bin:/usr/local/heroku/bin:/Users/luisaczc/.rbenv/shims:/Users/luisaczc/.rbenv/shims:/Users/luisaczc/.rbenv/shims:/usr/local/bin:/usr/bin:/bin:/usr/sbin:/sbin:/Users/luisaczc/.rvm/bin\"\n\n    orig_gem_path\n    Set via BUNDLE_ORIG_GEM_PATH: \"/Users/luisaczc/.rvm/gems/ruby-2.2.3:/Users/luisaczc/.rvm/gems/ruby-2.2.3@global\"\n</code></pre>\n\n<p>Also here is my Gemfile.lock as requested: (Please note I had to remove a small part of the unimportant heroku push error messages as I had used the maximum stack overflow body chars)</p>\n\n<pre><code>  GEM\n    remote: https://rubygems.org/\n    specs:\n      actionmailer (4.2.7)\n        actionpack (= 4.2.7)\n        actionview (= 4.2.7)\n        activejob (= 4.2.7)\n        mail (~&gt; 2.5, &gt;= 2.5.4)\n        rails-dom-testing (~&gt; 1.0, &gt;= 1.0.5)\n      actionpack (4.2.7)\n        actionview (= 4.2.7)\n        activesupport (= 4.2.7)\n        rack (~&gt; 1.6)\n        rack-test (~&gt; 0.6.2)\n        rails-dom-testing (~&gt; 1.0, &gt;= 1.0.5)\n        rails-html-sanitizer (~&gt; 1.0, &gt;= 1.0.2)\n      actionview (4.2.7)\n        activesupport (= 4.2.7)\n        builder (~&gt; 3.1)\n        erubis (~&gt; 2.7.0)\n        rails-dom-testing (~&gt; 1.0, &gt;= 1.0.5)\n        rails-html-sanitizer (~&gt; 1.0, &gt;= 1.0.2)\n      activejob (4.2.7)\n        activesupport (= 4.2.7)\n        globalid (&gt;= 0.3.0)\n      activemodel (4.2.7)\n        activesupport (= 4.2.7)\n        builder (~&gt; 3.1)\n      activerecord (4.2.7)\n        activemodel (= 4.2.7)\n        activesupport (= 4.2.7)\n        arel (~&gt; 6.0)\n      activesupport (4.2.7)\n        i18n (~&gt; 0.7)\n        json (~&gt; 1.7, &gt;= 1.7.7)\n        minitest (~&gt; 5.1)\n        thread_safe (~&gt; 0.3, &gt;= 0.3.4)\n        tzinfo (~&gt; 1.1)\n      addressable (2.4.0)\n      animate-rails (1.0.10)\n        rails\n      ansi (1.5.0)\n      arel (6.0.3)\n      autoprefixer-rails (6.3.7)\n        execjs\n      better_errors (2.1.1)\n        coderay (&gt;= 1.0.0)\n        erubis (&gt;= 2.6.6)\n        rack (&gt;= 0.9.0)\n      bootstrap-sass (3.3.6)\n        autoprefixer-rails (&gt;= 5.2.1)\n        sass (&gt;= 3.3.4)\n      builder (3.2.2)\n      byebug (9.0.5)\n      coderay (1.1.1)\n      coffee-rails (4.2.1)\n        coffee-script (&gt;= 2.2.0)\n        railties (&gt;= 4.0.0, &lt; 5.2.x)\n      coffee-script (2.4.1)\n        coffee-script-source\n        execjs\n      coffee-script-source (1.10.0)\n      concurrent-ruby (1.0.2)\n      debug_inspector (0.0.2)\n      erubis (2.7.0)\n      execjs (2.7.0)\n      ffi (1.9.14)\n      font-awesome-rails (4.6.3.1)\n        railties (&gt;= 3.2, &lt; 5.1)\n      formatador (0.2.5)\n      globalid (0.3.6)\n        activesupport (&gt;= 4.1.0)\n      guard (2.14.0)\n        formatador (&gt;= 0.2.4)\n        listen (&gt;= 2.7, &lt; 4.0)\n        lumberjack (~&gt; 1.0)\n        nenv (~&gt; 0.1)\n        notiffany (~&gt; 0.0)\n        pry (&gt;= 0.9.12)\n        shellany (~&gt; 0.0)\n        thor (&gt;= 0.18.1)\n      guard-minitest (2.3.1)\n        guard (~&gt; 2.0)\n        minitest (&gt;= 3.0)\n      heroku-deflater (0.6.2)\n        rack (&gt;= 1.4.5)\n      high_voltage (2.4.0)\n      i18n (0.7.0)\n      jbuilder (2.5.0)\n        activesupport (&gt;= 3.0.0, &lt; 5.1)\n        multi_json (~&gt; 1.2)\n      jquery-rails (4.1.1)\n        rails-dom-testing (&gt;= 1, &lt; 3)\n        railties (&gt;= 4.2.0)\n        thor (&gt;= 0.14, &lt; 2.0)\n      jquery-turbolinks (2.1.0)\n        railties (&gt;= 3.1.0)\n        turbolinks\n      json (1.8.3)\n      launchy (2.4.3)\n        addressable (~&gt; 2.3)\n      letter_opener (1.4.1)\n        launchy (~&gt; 2.2)\n      libv8 (3.16.14.15)\n      listen (3.1.5)\n        rb-fsevent (~&gt; 0.9, &gt;= 0.9.4)\n        rb-inotify (~&gt; 0.9, &gt;= 0.9.7)\n        ruby_dep (~&gt; 1.2)\n      loofah (2.0.3)\n        nokogiri (&gt;= 1.5.9)\n      lumberjack (1.0.10)\n      mail (2.6.4)\n        mime-types (&gt;= 1.16, &lt; 4)\n      method_source (0.8.2)\n      mime-types (3.1)\n        mime-types-data (~&gt; 3.2015)\n      mime-types-data (3.2016.0521)\n      mini_backtrace (0.1.3)\n        minitest (&gt; 1.2.0)\n        rails (&gt;= 2.3.3)\n      mini_portile2 (2.1.0)\n      minitest (5.9.0)\n      minitest-reporters (1.0.5)\n        ansi\n        builder\n        minitest (&gt;= 5.0)\n        ruby-progressbar\n      multi_json (1.12.1)\n      nenv (0.3.0)\n      nokogiri (1.6.8)\n        mini_portile2 (~&gt; 2.1.0)\n        pkg-config (~&gt; 1.1.7)\n      notiffany (0.1.0)\n        nenv (~&gt; 0.1)\n        shellany (~&gt; 0.0)\n      pg (0.17.1)\n      pkg-config (1.1.7)\n      pry (0.10.4)\n        coderay (~&gt; 1.1.0)\n        method_source (~&gt; 0.8.1)\n        slop (~&gt; 3.4)\n      puma (2.11.1)\n        rack (&gt;= 1.1, &lt; 2.0)\n      rack (1.6.4)\n      rack-test (0.6.3)\n        rack (&gt;= 1.0)\n      rails (4.2.7)\n        actionmailer (= 4.2.7)\n        actionpack (= 4.2.7)\n        actionview (= 4.2.7)\n        activejob (= 4.2.7)\n        activemodel (= 4.2.7)\n        activerecord (= 4.2.7)\n        activesupport (= 4.2.7)\n        bundler (&gt;= 1.3.0, &lt; 2.0)\n        railties (= 4.2.7)\n        sprockets-rails\n      rails-deprecated_sanitizer (1.0.3)\n        activesupport (&gt;= 4.2.0.alpha)\n      rails-dom-testing (1.0.7)\n        activesupport (&gt;= 4.2.0.beta, &lt; 5.0)\n        nokogiri (~&gt; 1.6.0)\n        rails-deprecated_sanitizer (&gt;= 1.0.1)\n      rails-html-sanitizer (1.0.3)\n        loofah (~&gt; 2.0)\n      rails_12factor (0.0.2)\n        rails_serve_static_assets\n        rails_stdout_logging\n      rails_serve_static_assets (0.0.5)\n      rails_stdout_logging (0.0.5)\n      railties (4.2.7)\n        actionpack (= 4.2.7)\n        activesupport (= 4.2.7)\n        rake (&gt;= 0.8.7)\n        thor (&gt;= 0.18.1, &lt; 2.0)\n      rake (11.2.2)\n      rb-fsevent (0.9.7)\n      rb-inotify (0.9.7)\n        ffi (&gt;= 0.5.0)\n      rdoc (4.2.2)\n        json (~&gt; 1.4)\n      ref (2.0.0)\n      ruby-progressbar (1.8.1)\n      ruby_dep (1.3.1)\n      sass (3.4.22)\n      sass-rails (5.0.5)\n        railties (&gt;= 4.0.0, &lt; 6)\n        sass (~&gt; 3.1)\n        sprockets (&gt;= 2.8, &lt; 4.0)\n        sprockets-rails (&gt;= 2.0, &lt; 4.0)\n        tilt (&gt;= 1.1, &lt; 3)\n      sdoc (0.4.0)\n        json (~&gt; 1.8)\n        rdoc (~&gt; 4.0, &lt; 5.0)\n      shellany (0.0.1)\n      simple_form (3.2.1)\n        actionpack (&gt; 4, &lt; 5.1)\n        activemodel (&gt; 4, &lt; 5.1)\n      slop (3.6.0)\n      spring (1.7.2)\n      sprockets (3.6.3)\n        concurrent-ruby (~&gt; 1.0)\n        rack (&gt; 1, &lt; 3)\n      sprockets-rails (3.1.1)\n        actionpack (&gt;= 4.0)\n        activesupport (&gt;= 4.0)\n        sprockets (&gt;= 3.0.0)\n      sqlite3 (1.3.11)\n      therubyracer (0.12.2)\n        libv8 (~&gt; 3.16.14.0)\n        ref\n      thor (0.19.1)\n      thread_safe (0.3.5)\n      tilt (2.0.5)\n      turbolinks (5.0.0)\n        turbolinks-source (~&gt; 5)\n      turbolinks-source (5.0.0)\n      tzinfo (1.2.2)\n        thread_safe (~&gt; 0.1)\n      uglifier (3.0.0)\n        execjs (&gt;= 0.3.0, &lt; 3)\n      web-console (3.3.0)\n        activemodel (&gt;= 4.2)\n        debug_inspector\n        railties (&gt;= 4.2)\n\n  PLATFORMS\n    ruby\n\n  DEPENDENCIES\n    animate-rails\n    better_errors\n    bootstrap-sass (~&gt; 3.3, &gt;= 3.3.6)\n    byebug\n    coffee-rails\n    font-awesome-rails\n    guard-minitest (= 2.3.1)\n    heroku-deflater\n    high_voltage (~&gt; 2.4.0)\n    jbuilder\n    jquery-rails\n    jquery-turbolinks\n    letter_opener\n    mini_backtrace (= 0.1.3)\n    minitest-reporters (= 1.0.5)\n    pg (= 0.17.1)\n    puma (= 2.11.1)\n    rails\n    rails_12factor (= 0.0.2)\n    sass-rails (~&gt; 5.0, &gt;= 5.0.5)\n    sdoc (= 0.4.0)\n    simple_form\n    spring\n    sprockets-rails\n    sqlite3\n    therubyracer\n    turbolinks\n    uglifier (&gt;= 1.3.0)\n    web-console\n\n  RUBY VERSION\n     ruby 2.2.3p173\n\n  BUNDLED WITH\n     1.12.5\n</code></pre>\n"}, {"tags": ["ruby", "ruby-on-rails-4", "tags", "nokogiri"], "comments": [{"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1468366447, "post_id": 38338722, "comment_id": 64095213, "body": "Please format your question for readability. The effort you put in helps us help you."}], "answers": [{"tags": [], "owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "is_accepted": true, "score": 2, "last_activity_date": 1468366841, "creation_date": 1468366841, "answer_id": 38340484, "question_id": 38338722, "link": "https://stackoverflow.com/questions/38338722/how-do-i-prevent-nokogiri-from-adding-unnecessary-html-tags/38340484#38340484", "title": "How do I prevent Nokogiri from adding unnecessary HTML tags?", "body": "<p>Nokogiri assumes you've already determined whether you're receiving appropriate content for parsing. It's up to you to check prior to passing it to Nokogiri.</p>\n\n<p>Don't use</p>\n\n<pre><code>doc = Nokogiri::HTML(open(url))\n</code></pre>\n\n<p>You can look at the returned HTTP headers for the \"CONTENT-TYPE\", which should be \"application/json\" for a JSON response, or \"TEXT/HTML\" for HTML. The <a href=\"http://ruby-doc.org/stdlib-2.3.1/libdoc/open-uri/rdoc/OpenURI.html#module-OpenURI-label-Example\" rel=\"nofollow\">OpenURI documentation</a> has the following example:</p>\n\n<pre><code>open(\"http://www.ruby-lang.org/en\") {|f|\n  f.each_line {|line| p line}\n  p f.base_uri         # &lt;URI::HTTP:0x40e6ef2 URL:http://www.ruby-lang.org/en/&gt;\n  p f.content_type     # \"text/html\"\n  p f.charset          # \"iso-8859-1\"\n  p f.content_encoding # []\n  p f.last_modified    # Thu Dec 05 02:45:02 UTC 2002\n}\n</code></pre>\n\n<p>Or, you can look at the first character of the returned body, which will tell you whether it's HTML/XML or JSON. The first two will start with <code>&lt;</code> and JSON will start with either <code>[</code> or <code>{</code>.</p>\n\n<p>Something like this would be a decent start:</p>\n\n<pre><code>content = open('http://www.example.com').read\n\nif content.lstrip[0] == '&lt;'\n  # it's XML/HTML so parse it with Nokogiri\nelse\n  # it's JSON so parse it with the JSON parser\nend\n</code></pre>\n"}], "owner": {"reputation": 16802, "user_id": 1235929, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/9f460ae7deb6fa19034c810a53b9fbac?s=128&d=identicon&r=PG", "display_name": "Dave", "link": "https://stackoverflow.com/users/1235929/dave"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 57, "favorite_count": 0, "accepted_answer_id": 38340484, "answer_count": 1, "score": -1, "last_activity_date": 1468366841, "creation_date": 1468356921, "last_edit_date": 1468366405, "question_id": 38338722, "link": "https://stackoverflow.com/questions/38338722/how-do-i-prevent-nokogiri-from-adding-unnecessary-html-tags", "title": "How do I prevent Nokogiri from adding unnecessary HTML tags?", "body": "<p>I\u2019m using Rails 4.2.3.  I have this code that is meant to get the content of a URL</p>\n\n<pre><code>  doc = Nokogiri::HTML(open(url))\n</code></pre>\n\n<p>Sometimes a URL will return HTML but sometimes it will return JSON.  I do not know in advance.  What I have noticed is that when the URL returns JSON, Nokgiri adds all these HTML tags in front of it.  Here is what appears in a browser:</p>\n\n<pre><code>{\"list\":[{\"u\":\"1459808276_000001\",\"i\":\"1459184695_000001\",\"pid\":\"RDE8UZZZ\u201d,\u201dfname\":\"Alexi\",\"lname\u201d:\u201dJones\u201d,\u201dsex\":\"F\",\"city\":\"Eugene\",\"country\":\"US\",\"country_iso\":\"us\",\"course\":\"8k\",\"class\":\"elite\",\"race\":\"8K\",\"name\":\"Alexi Jones\u201d,\u201d_ver\":\"14\",\"tag\":\"0000001\",\"bib\":\"1\"}],\"info\":{\"first\":\"1\",\"last\":\"1\",\"total\":\"1\",\"cacheVer\":\"0~0\"}}\n</code></pre>\n\n<p>However when I execute Nokogiri, this is returned: </p>\n\n<pre><code>&lt;!DOCTYPE html PUBLIC \"-//W3C//DTD HTML 4.0 Transitional//EN\" \"http://www.w3.org/TR/REC-html40/loose.dtd\"&gt;\n&lt;html&gt;&lt;body&gt;&lt;p&gt;{\"list\":[{\"u\":\"1459808276_000001\",\"i\":\"1459184695_000001\",\"pid\":\"RDE8UZZZ\u201d,\u201dfname\":\"Alexi\",\"lname\u201d:\u201dJones\u201d,\u201dsex\":\"F\",\"city\":\"Eugene\",\"country\":\"US\",\"country_iso\":\"us\",\"course\":\"8k\",\"class\":\"elite\",\"race\":\"8K\",\"name\":\"Alexi Jones\u201d,\u201d_ver\":\"14\",\"tag\":\"0000001\",\"bib\":\"1\"}],\"info\":{\"first\":\"1\",\"last\":\"1\",\"total\":\"1\",\"cacheVer\":\"0~0\"}}&lt;/p&gt;&lt;/body&gt;&lt;/html&gt;\n</code></pre>\n\n<p>How do I prevent Nokogiri from adding extra stuff?  I just want it to return exactly what is returned to a browser.</p>\n\n<p>When I try <code>doc = Nokogiri::HTML.fragment(open(url))</code> as recommend by another SO answer, I get the error:</p>\n\n<pre><code>error: undefined method `strip' for #&lt;StringIO:0x007ff8acb34c30&gt;\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "terminal", "nokogiri"], "comments": [{"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1468357147, "post_id": 38338721, "comment_id": 64091922, "body": "have you tried updating your bundle e.g. <code>bundle exec install</code> or <code>bundle exec update</code>?"}, {"owner": {"reputation": 1076, "user_id": 5775965, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/98506e548d87020608ab5264f3d57703?s=128&d=identicon&r=PG&f=1", "display_name": "genghiskhan", "link": "https://stackoverflow.com/users/5775965/genghiskhan"}, "reply_to_user": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1468358253, "post_id": 38338721, "comment_id": 64092418, "body": "I just get a usage message when running bundle exec install, and an error when running bundle exec update"}, {"owner": {"reputation": 2958, "user_id": 3597730, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/d76b8f632aeb1d920d79d7dd5ab63097?s=128&d=identicon&r=PG", "display_name": "ruby_newbie", "link": "https://stackoverflow.com/users/3597730/ruby-newbie"}, "edited": false, "score": 0, "creation_date": 1468369827, "post_id": 38338721, "comment_id": 64095939, "body": "Did you by chance recently upgrade your OS?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user2536065"}, "edited": false, "score": 0, "creation_date": 1468385687, "post_id": 38338721, "comment_id": 64099565, "body": "Looks like you have your gems cached in vendor. Maybe you can try deleting the <code>vendor&#47;cache&#47;nokogiri-1.6.8</code> directory and then <code>bundle install</code> or <code>bundle update nokogiri</code>"}], "answers": [{"tags": [], "owner": {"reputation": 351, "user_id": 3527404, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7320be8fb67d0b0c790f739a8cb3c13f?s=128&d=identicon&r=PG&f=1", "display_name": "CfourPiO", "link": "https://stackoverflow.com/users/3527404/cfourpio"}, "is_accepted": false, "score": 0, "last_activity_date": 1468385046, "creation_date": 1468385046, "answer_id": 38342807, "question_id": 38338721, "link": "https://stackoverflow.com/questions/38338721/nokogiri-aborts-rails-commands/38342807#38342807", "title": "Nokogiri aborts Rails Commands", "body": "<p>Remove the <code>Gemfile.lock</code> in the root directory of the application. Then, remove the versions written in the <code>Gemfile</code>, just have the name of the gem there. Then, again do <code>bundle install</code>. Maybe this can help. </p>\n"}], "owner": {"reputation": 1076, "user_id": 5775965, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/98506e548d87020608ab5264f3d57703?s=128&d=identicon&r=PG&f=1", "display_name": "genghiskhan", "link": "https://stackoverflow.com/users/5775965/genghiskhan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 267, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1468385046, "creation_date": 1468356921, "question_id": 38338721, "link": "https://stackoverflow.com/questions/38338721/nokogiri-aborts-rails-commands", "title": "Nokogiri aborts Rails Commands", "body": "<p>I am trying to start a rails server, but I keep receiving a lengthy and cryptic error message saying that I have an incompatible library version for nokogiri 1.6.8. I have looked at other similar solutions about libxml2, libxslt, and libiconv not been linked with nokogiri and I have tried the what people recommend to fix that, but I still receive the message:</p>\n\n<pre><code>Sams-MBP:toy-app name$ rails server\n/Users/name/RubyWorkspace/toy-app/vendor/bundle/gems/nokogiri-1.6.8/lib/nokogiri.rb:32:in `require': incompatible library version - /Users/name/RubyWorkspace/toy-app/vendor/bundle/gems/nokogiri-1.6.8/lib/nokogiri/nokogiri.bundle (fatal)\nfrom /Users/name/RubyWorkspace/toy-app/vendor/bundle/gems/nokogiri-1.6.8/lib/nokogiri.rb:32:in `rescue in &lt;top (required)&gt;'\nfrom /Users/name/RubyWorkspace/toy-app/vendor/bundle/gems/nokogiri-1.6.8/lib/nokogiri.rb:28:in `&lt;top (required)&gt;'\nfrom /Users/name/RubyWorkspace/toy-app/vendor/bundle/gems/loofah-2.0.3/lib/loofah.rb:3:in `require'\nfrom /Users/name/RubyWorkspace/toy-app/vendor/bundle/gems/loofah-2.0.3/lib/loofah.rb:3:in `&lt;top (required)&gt;'\nfrom /Users/name/RubyWorkspace/toy-app/vendor/bundle/gems/rails-html-sanitizer-1.0.3/lib/rails-html-sanitizer.rb:2:in `require'\nfrom /Users/name/RubyWorkspace/toy-app/vendor/bundle/gems/rails-html-sanitizer-1.0.3/lib/rails-html-sanitizer.rb:2:in `&lt;top (required)&gt;'\nfrom /Users/name/RubyWorkspace/toy-app/vendor/bundle/gems/actionview-5.0.0/lib/action_view/helpers/sanitize_helper.rb:2:in `require'\nfrom /Users/name/RubyWorkspace/toy-app/vendor/bundle/gems/actionview-5.0.0/lib/action_view/helpers/sanitize_helper.rb:2:in `&lt;top (required)&gt;'\nfrom /Users/name/RubyWorkspace/toy-app/vendor/bundle/gems/actionview-5.0.0/lib/action_view/helpers/text_helper.rb:32:in `require'\nfrom /Users/name/RubyWorkspace/toy-app/vendor/bundle/gems/actionview-5.0.0/lib/action_view/helpers/text_helper.rb:32:in `&lt;module:TextHelper&gt;'\nfrom /Users/name/RubyWorkspace/toy-app/vendor/bundle/gems/actionview-5.0.0/lib/action_view/helpers/text_helper.rb:29:in `&lt;module:Helpers&gt;'\nfrom /Users/name/RubyWorkspace/toy-app/vendor/bundle/gems/actionview-5.0.0/lib/action_view/helpers/text_helper.rb:6:in `&lt;module:ActionView&gt;'\nfrom /Users/name/RubyWorkspace/toy-app/vendor/bundle/gems/actionview-5.0.0/lib/action_view/helpers/text_helper.rb:4:in `&lt;top (required)&gt;'\nfrom /Users/name/RubyWorkspace/toy-app/vendor/bundle/gems/actionview-5.0.0/lib/action_view/helpers/form_tag_helper.rb:18:in `require'\nfrom /Users/name/RubyWorkspace/toy-app/vendor/bundle/gems/actionview-5.0.0/lib/action_view/helpers/form_tag_helper.rb:18:in `&lt;module:FormTagHelper&gt;'\nfrom /Users/name/RubyWorkspace/toy-app/vendor/bundle/gems/actionview-5.0.0/lib/action_view/helpers/form_tag_helper.rb:14:in `&lt;module:Helpers&gt;'\nfrom /Users/name/RubyWorkspace/toy-app/vendor/bundle/gems/actionview-5.0.0/lib/action_view/helpers/form_tag_helper.rb:8:in `&lt;module:ActionView&gt;'\nfrom /Users/name/RubyWorkspace/toy-app/vendor/bundle/gems/actionview-5.0.0/lib/action_view/helpers/form_tag_helper.rb:6:in `&lt;top (required)&gt;'\nfrom /Users/name/RubyWorkspace/toy-app/vendor/bundle/gems/actionview-5.0.0/lib/action_view/helpers/form_helper.rb:4:in `require'\nfrom /Users/name/RubyWorkspace/toy-app/vendor/bundle/gems/actionview-5.0.0/lib/action_view/helpers/form_helper.rb:4:in `&lt;top (required)&gt;'\nfrom /Users/name/RubyWorkspace/toy-app/vendor/bundle/gems/actionview-5.0.0/lib/action_view/helpers.rb:50:in `require'\nfrom /Users/name/RubyWorkspace/toy-app/vendor/bundle/gems/actionview-5.0.0/lib/action_view/helpers.rb:50:in `&lt;module:Helpers&gt;'\nfrom /Users/name/RubyWorkspace/toy-app/vendor/bundle/gems/actionview-5.0.0/lib/action_view/helpers.rb:4:in `&lt;module:ActionView&gt;'\nfrom /Users/name/RubyWorkspace/toy-app/vendor/bundle/gems/actionview-5.0.0/lib/action_view/helpers.rb:3:in `&lt;top (required)&gt;'\nfrom /Users/name/RubyWorkspace/toy-app/vendor/bundle/gems/sprockets-rails-3.1.1/lib/sprockets/rails/context.rb:7:in `require'\nfrom /Users/name/RubyWorkspace/toy-app/vendor/bundle/gems/sprockets-rails-3.1.1/lib/sprockets/rails/context.rb:7:in `&lt;module:Context&gt;'\nfrom /Users/name/RubyWorkspace/toy-app/vendor/bundle/gems/sprockets-rails-3.1.1/lib/sprockets/rails/context.rb:6:in `&lt;module:Rails&gt;'\nfrom /Users/name/RubyWorkspace/toy-app/vendor/bundle/gems/sprockets-rails-3.1.1/lib/sprockets/rails/context.rb:5:in `&lt;module:Sprockets&gt;'\nfrom /Users/name/RubyWorkspace/toy-app/vendor/bundle/gems/sprockets-rails-3.1.1/lib/sprockets/rails/context.rb:4:in `&lt;top (required)&gt;'\nfrom /Users/name/RubyWorkspace/toy-app/vendor/bundle/gems/sprockets-rails-3.1.1/lib/sprockets/railtie.rb:7:in `require'\nfrom /Users/name/RubyWorkspace/toy-app/vendor/bundle/gems/sprockets-rails-3.1.1/lib/sprockets/railtie.rb:7:in `&lt;top (required)&gt;'\nfrom /Users/name/RubyWorkspace/toy-app/vendor/bundle/gems/railties-5.0.0/lib/rails/all.rb:14:in `require'\nfrom /Users/name/RubyWorkspace/toy-app/vendor/bundle/gems/railties-5.0.0/lib/rails/all.rb:14:in `block in &lt;top (required)&gt;'\nfrom /Users/name/RubyWorkspace/toy-app/vendor/bundle/gems/railties-5.0.0/lib/rails/all.rb:12:in `each'\nfrom /Users/name/RubyWorkspace/toy-app/vendor/bundle/gems/railties-5.0.0/lib/rails/all.rb:12:in `&lt;top (required)&gt;'\nfrom /Users/name/RubyWorkspace/toy-app/config/application.rb:3:in `require'\nfrom /Users/name/RubyWorkspace/toy-app/config/application.rb:3:in `&lt;top (required)&gt;'\nfrom /Users/name/RubyWorkspace/toy-app/vendor/bundle/gems/railties-5.0.0/lib/rails/commands/commands_tasks.rb:88:in `require'\nfrom /Users/name/RubyWorkspace/toy-app/vendor/bundle/gems/railties-5.0.0/lib/rails/commands/commands_tasks.rb:88:in `block in server'\nfrom /Users/name/RubyWorkspace/toy-app/vendor/bundle/gems/railties-5.0.0/lib/rails/commands/commands_tasks.rb:85:in `tap'\nfrom /Users/name/RubyWorkspace/toy-app/vendor/bundle/gems/railties-5.0.0/lib/rails/commands/commands_tasks.rb:85:in `server'\nfrom /Users/name/RubyWorkspace/toy-app/vendor/bundle/gems/railties-5.0.0/lib/rails/commands/commands_tasks.rb:49:in `run_command!'\nfrom /Users/name/RubyWorkspace/toy-app/vendor/bundle/gems/railties-5.0.0/lib/rails/commands.rb:18:in `&lt;top (required)&gt;'\nfrom bin/rails:4:in `require'\nfrom bin/rails:4:in `&lt;main&gt;'\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "model-view-controller", "controller", "redmine"], "comments": [{"owner": {"reputation": 2503, "user_id": 942986, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/tR28w.jpg?s=128&g=1", "display_name": "fabriciofreitag", "link": "https://stackoverflow.com/users/942986/fabriciofreitag"}, "edited": false, "score": 0, "creation_date": 1468356431, "post_id": 38338467, "comment_id": 64091532, "body": "The link you published is wrong."}, {"owner": {"reputation": 378, "user_id": 3478716, "user_type": "registered", "accept_rate": 18, "profile_image": "https://graph.facebook.com/100001728376244/picture?type=large", "display_name": "Nikage", "link": "https://stackoverflow.com/users/3478716/nikage"}, "reply_to_user": {"reputation": 2503, "user_id": 942986, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/tR28w.jpg?s=128&g=1", "display_name": "fabriciofreitag", "link": "https://stackoverflow.com/users/942986/fabriciofreitag"}, "edited": false, "score": 0, "creation_date": 1468356522, "post_id": 38338467, "comment_id": 64091591, "body": "Why is it supposed to be wrong? I&#39;m currently usin RoR 2.6"}, {"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1468357229, "post_id": 38338467, "comment_id": 64091968, "body": "what do you mean &quot;created different route&quot;"}, {"owner": {"reputation": 378, "user_id": 3478716, "user_type": "registered", "accept_rate": 18, "profile_image": "https://graph.facebook.com/100001728376244/picture?type=large", "display_name": "Nikage", "link": "https://stackoverflow.com/users/3478716/nikage"}, "edited": false, "score": 0, "creation_date": 1468357728, "post_id": 38338467, "comment_id": 64092185, "body": "That means the original url was  <a href=\"http://127.0.0.1/redmine/issues/1/time_entries\" rel=\"nofollow noreferrer\">127.0.0.1/redmine/issues/1/time_entries</a>  And I added another route  <a href=\"http://127.0.0.1/redmine/issues/1/time_entries_estimates\" rel=\"nofollow noreferrer\">127.0.0.1/redmine/issues/1/time_entries_estimates</a> The original controller <code>TimeEntries</code> works fine with the second route <code>time_entries_estimates</code>"}], "answers": [{"comments": [{"owner": {"reputation": 378, "user_id": 3478716, "user_type": "registered", "accept_rate": 18, "profile_image": "https://graph.facebook.com/100001728376244/picture?type=large", "display_name": "Nikage", "link": "https://stackoverflow.com/users/3478716/nikage"}, "edited": false, "score": 0, "creation_date": 1468361429, "post_id": 38338874, "comment_id": 64093789, "body": "Sorry for my ignorance,  I don&#39;t quite understand what exactly shold I do\\write in <code>project_module :time_tracking</code> ?"}, {"owner": {"reputation": 4688, "user_id": 2116518, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Hwt8F.jpg?s=128&g=1", "display_name": "Nic Nilov", "link": "https://stackoverflow.com/users/2116518/nic-nilov"}, "reply_to_user": {"reputation": 378, "user_id": 3478716, "user_type": "registered", "accept_rate": 18, "profile_image": "https://graph.facebook.com/100001728376244/picture?type=large", "display_name": "Nikage", "link": "https://stackoverflow.com/users/3478716/nikage"}, "edited": false, "score": 0, "creation_date": 1468436014, "post_id": 38338874, "comment_id": 64131671, "body": "I&#39;ve added the lines you likely need."}, {"owner": {"reputation": 378, "user_id": 3478716, "user_type": "registered", "accept_rate": 18, "profile_image": "https://graph.facebook.com/100001728376244/picture?type=large", "display_name": "Nikage", "link": "https://stackoverflow.com/users/3478716/nikage"}, "edited": false, "score": 0, "creation_date": 1468436293, "post_id": 38338874, "comment_id": 64131832, "body": "Yeah, I&#39;ve got it already. I figured out that it would much be preferable to use separate plugin with copied controllers. Unless your answer fits my question but it is a hardcode way. Anyway, thanx a lot!"}], "tags": [], "owner": {"reputation": 4688, "user_id": 2116518, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Hwt8F.jpg?s=128&g=1", "display_name": "Nic Nilov", "link": "https://stackoverflow.com/users/2116518/nic-nilov"}, "is_accepted": true, "score": 1, "last_activity_date": 1468435976, "last_edit_date": 1468435976, "creation_date": 1468357555, "answer_id": 38338874, "question_id": 38338467, "link": "https://stackoverflow.com/questions/38338467/ruby-on-rails-controller-copy-does-not-autorize-user/38338874#38338874", "title": "Ruby on rails controller copy does not autorize user", "body": "<p>Redmine uses declarative permissioning. When you created a new controller, it and its actions are missing from permissions definition and therefore inaccessible.</p>\n\n<p>To fix that you need to include your new controller's relevant actions into permissions definitions. <a href=\"https://github.com/redmine/redmine/blob/2.6-stable/lib/redmine.rb#L128-L134\" rel=\"nofollow\">This is the location in <code>lib/redmine.rb</code></a> you probably need to modify. Copied here for clarity:</p>\n\n<pre><code>  map.project_module :time_tracking do |map|\n    map.permission :log_time, {:timelog =&gt; [:new, :create]}, :require =&gt; :loggedin\n    map.permission :view_time_entries, {:timelog =&gt; [:index, :report, :show]}, :read =&gt; true\n    map.permission :edit_time_entries, {:timelog =&gt; [:edit, :update, :destroy, :bulk_edit, :bulk_update]}, :require =&gt; :member\n    map.permission :edit_own_time_entries, {:timelog =&gt; [:edit, :update, :destroy,:bulk_edit, :bulk_update]}, :require =&gt; :loggedin\n    map.permission :manage_project_activities, {:project_enumerations =&gt; [:update, :destroy]}, :require =&gt; :member\n  end\n</code></pre>\n\n<p>You should add something like this inside this block:</p>\n\n<pre><code>    map.permission :view_time_estimates, {:timelog_estimates =&gt; [:index, :report, :show]}, :read =&gt; true\n    map.permission :edit_time_estimates, {:timelog_estimates =&gt; [:edit, :update, :destroy, :bulk_edit, :bulk_update]}, :require =&gt; :member\n    map.permission :edit_own_time_estimates, {:timelog_estimates =&gt; [:edit, :update, :destroy,:bulk_edit, :bulk_update]}, :require =&gt; :loggedin\n</code></pre>\n\n<p>The authorization works through this call in your controller:</p>\n\n<pre><code>before_filter :authorize_global, :only =&gt; [:new, :create, :index, :report]\n</code></pre>\n\n<p>If you follow <code>authorize_global</code> implementation, you will <a href=\"https://github.com/redmine/redmine/blob/2.6-stable/app/controllers/application_controller.rb#L269-L281\" rel=\"nofollow\">find this</a>:</p>\n\n<pre><code>  # Authorize the user for the requested action\n  def authorize(ctrl = params[:controller], action = params[:action], global = false)\n    allowed = User.current.allowed_to?({:controller =&gt; ctrl, :action =&gt; action}, @project || @projects, :global =&gt; global)\n    if allowed\n      true\n    else\n      if @project &amp;&amp; @project.archived?\n        render_403 :message =&gt; :notice_not_authorized_archived_project\n      else\n        deny_access\n      end\n    end\n  end\n</code></pre>\n\n<p>The <code>render_403</code> line is the reason you're getting the error.</p>\n"}], "owner": {"reputation": 378, "user_id": 3478716, "user_type": "registered", "accept_rate": 18, "profile_image": "https://graph.facebook.com/100001728376244/picture?type=large", "display_name": "Nikage", "link": "https://stackoverflow.com/users/3478716/nikage"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 85, "favorite_count": 0, "accepted_answer_id": 38338874, "answer_count": 1, "score": -1, "last_activity_date": 1468435976, "creation_date": 1468355818, "last_edit_date": 1468356461, "question_id": 38338467, "link": "https://stackoverflow.com/questions/38338467/ruby-on-rails-controller-copy-does-not-autorize-user", "title": "Ruby on rails controller copy does not autorize user", "body": "<p>Disclaimer: I'm completely new to ruby..</p>\n\n<p>I've copied  <a href=\"https://github.com/redmine/redmine/blob/2.6-stable/app/controllers/timelog_controller.rb\" rel=\"nofollow\">this controller</a> with the name <code>timelog_estimates_controller.rb</code>, changed the class name to <code>TimelogEstimatesController</code> created different route but the page gives me \"403 forbidden\"</p>\n\n<p>When I use the original TimelogController it works perfectly fine.\nI suppose there is something I've missed. </p>\n"}, {"tags": ["ruby-on-rails", "ruby", "rspec"], "answers": [{"tags": [], "owner": {"reputation": 12542, "user_id": 156746, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/8TsPx.jpg?s=128&g=1", "display_name": "DiegoSalazar", "link": "https://stackoverflow.com/users/156746/diegosalazar"}, "is_accepted": false, "score": 0, "last_activity_date": 1468356158, "last_edit_date": 1495540849, "creation_date": 1468356158, "answer_id": 38338546, "question_id": 38338393, "link": "https://stackoverflow.com/questions/38338393/using-assert-select-to-find-a-select-box-value/38338546#38338546", "title": "Using assert_select to find a select box value?", "body": "<p>To use <code>assert_select</code> this way you have to pass it a block and do your assertion on the array of elements passed to the block. </p>\n\n<p><code>assert_select</code> is \"An assertion that selects elements and makes one or more equality tests\"</p>\n\n<p>Example: </p>\n\n<pre><code> assert_select \"ol\" do |elements|\n   elements.each do |element|\n     assert_select element, \"li\", 4\n   end\n end\n</code></pre>\n\n<p>You need to tweak this example to assert based on the <code>value</code> attribute of the option tag within the selected element (a <code>select</code> tag in this case).</p>\n\n<p>I recommend reading the docs: <a href=\"http://apidock.com/rails/v2.3.8/ActionController/Assertions/SelectorAssertions/assert_select\" rel=\"nofollow noreferrer\">http://apidock.com/rails/v2.3.8/ActionController/Assertions/SelectorAssertions/assert_select</a></p>\n\n<p>If you're using capybara you can use <code>have_select</code>. Answer here: <a href=\"https://stackoverflow.com/a/18622979/156746\">https://stackoverflow.com/a/18622979/156746</a></p>\n"}], "owner": {"reputation": 541, "user_id": 1908281, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/72ee401422cc1119d04b538aeb906918?s=128&d=identicon&r=PG&f=1", "display_name": "Joe Ainsworth", "link": "https://stackoverflow.com/users/1908281/joe-ainsworth"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1434, "favorite_count": 0, "answer_count": 1, "score": 3, "last_activity_date": 1468356158, "creation_date": 1468355578, "question_id": 38338393, "link": "https://stackoverflow.com/questions/38338393/using-assert-select-to-find-a-select-box-value", "title": "Using assert_select to find a select box value?", "body": "<p>I'm struggling to test whether my select box has a value of 6.</p>\n\n<pre><code>&lt;form class=\"edit_line_item\" id=\"edit_line_item_7\" action=\"/line_items/7\" accept-charset=\"UTF-8\" method=\"post\"&gt;&lt;input name=\"utf8\" type=\"hidden\" value=\"\u2713\"&gt;&lt;input type=\"hidden\" name=\"_method\" value=\"patch\"&gt;\n    &lt;select name=\"line_item[quantity]\" id=\"line_item_quantity\"&gt;&lt;option selected=\"selected\" value=\"1\"&gt;1&lt;/option&gt;\n    &lt;/select&gt;\n&lt;/form&gt;\n</code></pre>\n\n<p>My rspec code</p>\n\n<pre><code>assert_select \"select#line_item_quantity\", value: 6\n</code></pre>\n\n<p>Whatever I change the value to my test still passes so I am wrong somewhere.</p>\n"}, {"tags": ["ruby", "string"], "answers": [{"comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 2, "creation_date": 1468355943, "post_id": 38338340, "comment_id": 64091260, "body": "The recommendation to use the namespace is much better. Worth noting that Ruby tradition holds that constants are specified like <code>SITE_PATH</code>, plus given the context here, <code>CMS::</code> is implied and can be omitted."}], "tags": [], "owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "is_accepted": true, "score": 3, "last_activity_date": 1468355351, "last_edit_date": 1495540732, "creation_date": 1468355351, "answer_id": 38338340, "question_id": 38338266, "link": "https://stackoverflow.com/questions/38338266/ruby-unknown-on-trying-to-join-2-strings/38338340#38338340", "title": "Ruby unknown + on trying to join 2 strings", "body": "<p>You can't set instance variables at the class level. You need to set them in an instance method.</p>\n\n<p>Look's like you're using sinatra so you can do this:</p>\n\n<p>See <a href=\"https://stackoverflow.com/a/16117807/2981429\">here</a> for how to make a \"before filter\" like one does in Rails apps. This solution is for the <em>modular</em> style of Sinatra app.</p>\n\n<p>To show an example:</p>\n\n<pre><code>class CMS &lt; Sinatra::Base\n  before do\n    @sitePath = \"./site\"\n  end\n  get '/' do\n    renderCache = File.readlines(@sitePath + \"index.liquid\")\n  end\nend\nCMS.run!\n</code></pre>\n\n<p>You could also keep your existing code if you use a constant instead of an instance variable:</p>\n\n<pre><code>class CMS\n    # Set the site path root.\n    SitePath = \"./site\"\n\n    get '/' do\n        renderCache = File.readlines(CMS::SitePath + \"index.liquid\")\n    end\nend\n</code></pre>\n\n<p>To explain how I read your error and looked for the error:</p>\n\n<p><code>undefined method '+' for nil:NilClass</code> means you're calling <code>+</code> on something which is nil. Referencing the code shows that the nil variable is <code>@sitePath</code>. Undefined instance variables will evaluate to <code>nil</code>. This is different than standard variables, which will raise an undefined variable error. </p>\n"}], "owner": {"reputation": 1158, "user_id": 3154111, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/cc375d11cdbd3d2f7babaf22f4101be0?s=128&d=identicon&r=PG", "display_name": "Rando Hinn", "link": "https://stackoverflow.com/users/3154111/rando-hinn"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 36, "favorite_count": 0, "accepted_answer_id": 38338340, "answer_count": 1, "score": 0, "last_activity_date": 1468355351, "creation_date": 1468355047, "question_id": 38338266, "link": "https://stackoverflow.com/questions/38338266/ruby-unknown-on-trying-to-join-2-strings", "title": "Ruby unknown + on trying to join 2 strings", "body": "<p>So, I'm learning Ruby and immediately, have stumbled upon something rater peculiar when trying to concatenate 2 strings to one. Here's the code, with irrevelant parts stripped, lets just say Sinatra runs it:</p>\n\n<pre><code>class CMS\n    # Set the site path root.\n    @sitePath = \"./site\"\n\n    get '/' do\n        renderCache = File.readlines(@sitePath + \"index.liquid\")\n    end\nend\n</code></pre>\n\n<p>And on loading the page, I am greeted with </p>\n\n<pre><code>NoMethodError at /\nundefined method `+' for nil:NilClass\n</code></pre>\n\n<p>on the <code>renderCache = File.readlines(@sitePath + \"index.liquid\")</code> line. Why is it refusing to concatenate the strings?</p>\n"}, {"tags": ["ruby", "image", "mechanize"], "comments": [{"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 2, "creation_date": 1468355079, "post_id": 38338228, "comment_id": 64090748, "body": "Could you just append the host, like <code>http:&#47;&#47;double14.com&#47;shop&#47;doubleimages&#47;0000000186932.jpg</code>?"}, {"owner": {"reputation": 316, "user_id": 4982995, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/6bdc0c5daca36ee0f7baadd2502f1be8?s=128&d=identicon&r=PG&f=1", "display_name": "JapanRob", "link": "https://stackoverflow.com/users/4982995/japanrob"}, "reply_to_user": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1468363235, "post_id": 38338228, "comment_id": 64094354, "body": "I thought that there might be a way to take the full path name from the site so I could avoid relative path names altogether. If this is all that there is, then that sounds like a valid solution. Thank you."}], "answers": [{"tags": [], "owner": {"reputation": 2958, "user_id": 3597730, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/d76b8f632aeb1d920d79d7dd5ab63097?s=128&d=identicon&r=PG", "display_name": "ruby_newbie", "link": "https://stackoverflow.com/users/3597730/ruby-newbie"}, "is_accepted": false, "score": 0, "last_activity_date": 1468373405, "creation_date": 1468373405, "answer_id": 38341276, "question_id": 38338228, "link": "https://stackoverflow.com/questions/38338228/retrieving-images-under-a-specific-div-with-mechanize-and-ruby/38341276#38341276", "title": "Retrieving images under a specific Div with Mechanize and Ruby", "body": "<p>This is how I did it for a collection of images.  In this case the base_uri is the url that you are passing to get.  Let me know if you have any questions.   </p>\n\n<pre><code>def self.qualify_images(base_uri, images)\n    images.map do |image|\n      next unless has_src?(image)\n      qualify_image(base_uri, image)\n    end.compact\n  end\n\n  def self.qualify_image(base_uri, image)\n    src = image.attributes[\"src\"].value\n    if src =~ /^\\/[\\/]/\n      result = \"#{scheme(base_uri)}#{src}\"\n    elsif src =~ /^\\//\n      result = \"#{base_uri}#{src}\"\n    else\n      result = src\n    end\n    http?(result) ? result : nil\n  end\n\n  def self.has_src?(image)\n    image.attributes[\"src\"].value\n  rescue NoMethodError\n    false\n  end\n\n  def self.scheme(uri)\n    uri = URI.parse(uri)\n    \"#{uri.scheme}:\"\n  end\n\n  def self.http?(uri)\n    uri = URI.parse(uri)\n    uri.kind_of?(URI::HTTP)\n  rescue URI::InvalidURIError\n    false\n  end\n</code></pre>\n\n<p>This will ensure a fully qualified uri for each image. </p>\n"}, {"tags": [], "owner": {"reputation": 47898, "user_id": 966023, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/917fcb4327159076f752c0c3c3fddfbb?s=128&d=identicon&r=PG", "display_name": "pguardiario", "link": "https://stackoverflow.com/users/966023/pguardiario"}, "is_accepted": false, "score": 0, "last_activity_date": 1468413812, "creation_date": 1468413812, "answer_id": 38352104, "question_id": 38338228, "link": "https://stackoverflow.com/questions/38338228/retrieving-images-under-a-specific-div-with-mechanize-and-ruby/38352104#38352104", "title": "Retrieving images under a specific Div with Mechanize and Ruby", "body": "<p>It will look something like:</p>\n\n<pre><code>page.search(\"#item_img img\").each do |img|\n  puts page.uri.merge(img[:src]).to_s\nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 41, "user_id": 6419357, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/156672500b92d075fc95e61c161e9c07?s=128&d=identicon&r=PG", "display_name": "Tim Craft", "link": "https://stackoverflow.com/users/6419357/tim-craft"}, "is_accepted": true, "score": 0, "last_activity_date": 1469118738, "creation_date": 1469118738, "answer_id": 38509689, "question_id": 38338228, "link": "https://stackoverflow.com/questions/38338228/retrieving-images-under-a-specific-div-with-mechanize-and-ruby/38509689#38509689", "title": "Retrieving images under a specific Div with Mechanize and Ruby", "body": "<p>Yes. You can get the full URL for the images with the #resolve method:</p>\n\n<pre><code>require 'mechanize'\n\nmechanize = Mechanize.new\nmechanize.user_agent_alias = 'Mac Safari'\n\npage = mechanize.get('http://double14.com/shopdetail/000000018693/')\n\npage.search('#item_img img').each do |img|\n  puts mechanize.resolve(img['src'])\nend\n</code></pre>\n\n<p>Alternatively you can use the #download method to download them directly.</p>\n"}], "owner": {"reputation": 316, "user_id": 4982995, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/6bdc0c5daca36ee0f7baadd2502f1be8?s=128&d=identicon&r=PG&f=1", "display_name": "JapanRob", "link": "https://stackoverflow.com/users/4982995/japanrob"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 199, "favorite_count": 0, "accepted_answer_id": 38509689, "answer_count": 3, "score": 0, "last_activity_date": 1469118738, "creation_date": 1468354878, "question_id": 38338228, "link": "https://stackoverflow.com/questions/38338228/retrieving-images-under-a-specific-div-with-mechanize-and-ruby", "title": "Retrieving images under a specific Div with Mechanize and Ruby", "body": "<p>I need to retrieve all the images present under a specific div using Ruby and Mechanize. The relevant DOM structure is as follows:</p>\n\n<pre><code>&lt;div id=\"item_img\"&gt;\n&lt;a href=\"JavaScript:imageview('000000018693.jpg')\"&gt;\n&lt;img src=\"/shop/doubleimages/0000000186932.jpg\" border=\"0\" width=\"500\" height=\"500\" alt=\"\u95a2\u4fc2\u306a\u3044\u30b3\u30e1\u30f3\u30c8 z1808\"&gt;\n&lt;/a&gt;\n&lt;img src=\"/shop/doubleimages/000000018693_1.jpg\"&gt;&lt;br&gt;&lt;br&gt;\n&lt;img src=\"/shop/doubleimages/000000018693_2.jpg\"&gt;&lt;br&gt;&lt;br&gt;\n&lt;img src=\"/shop/doubleimages/000000018693_3.jpg\"&gt;&lt;br&gt;&lt;br&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p>So, I initially got all the images after spinning up a new agent by doing:</p>\n\n<pre><code>agent = Mechanize.new\nagent.user_agent_alias = 'Mac Safari'\npage = agent.get ('http://double14.com/shopdetail/000000018693/')\nputs page.images\n</code></pre>\n\n<p>This was nice, but it every image on the page (as it should), and seems to strip out the div id above it, making it impossible to decide what comes from where. As a result, I had every image on the page (no bueno).</p>\n\n<p>I got it down to this: </p>\n\n<pre><code>agent = Mechanize.new\nagent.user_agent_alias = 'Mac Safari'\npage = agent.get ('http://double14.com/shopdetail/000000018693/')\nnode = page.search \"#item_img img\"\n  node.each do |n|\n  puts n.attributes['src']\nend\n</code></pre>\n\n<p>Unfortunately, that outputs the following -</p>\n\n<pre><code>/shop/doubleimages/0000000186932.jpg\n/shop/doubleimages/000000018693_1.jpg\n/shop/doubleimages/000000018693_2.jpg\n/shop/doubleimages/000000018693_3.jpg\n</code></pre>\n\n<p>Is there a way to take the full URL and use that instead? Ultimately, I would like to save these images to a database, but I need the full URL to serialize them to disk for later upload.</p>\n"}, {"tags": ["css", "ruby", "sass", "interpolation"], "answers": [{"tags": [], "owner": {"reputation": 123, "user_id": 4111381, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/3b267c6b3df3ddb1061990070d52a38a?s=128&d=identicon&r=PG&f=1", "display_name": "PaulC", "link": "https://stackoverflow.com/users/4111381/paulc"}, "is_accepted": false, "score": 0, "last_activity_date": 1468354715, "creation_date": 1468354715, "answer_id": 38338185, "question_id": 38338184, "link": "https://stackoverflow.com/questions/38338184/sass-evaluates-e-notation-when-interpolating-certain-map-keys/38338185#38338185", "title": "SASS evaluates E notation when interpolating certain map keys", "body": "<p>The issue can be resolved by enclosing the key in single or double quotes.</p>\n"}], "owner": {"reputation": 123, "user_id": 4111381, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/3b267c6b3df3ddb1061990070d52a38a?s=128&d=identicon&r=PG&f=1", "display_name": "PaulC", "link": "https://stackoverflow.com/users/4111381/paulc"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 13, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1468354715, "creation_date": 1468354715, "question_id": 38338184, "link": "https://stackoverflow.com/questions/38338184/sass-evaluates-e-notation-when-interpolating-certain-map-keys", "title": "SASS evaluates E notation when interpolating certain map keys", "body": "<p>Scenario: Ruby v2.2.4p230, Sass v3.4.22, Windows 10 v1511. See snippet below. Also occurs using <a href=\"http://www.sassmeister.com/\" rel=\"nofollow\">http://www.sassmeister.com/</a>, so it does not appear to be a local machine issue.</p>\n\n<p>Problem: When compiled, certain keys are interpolated with values that are similar but appear corrupt, with numerous zeros inserted.</p>\n\n<p>These are sample key values that are problematic and the associated value that is interpolated:</p>\n\n<ul>\n<li>270e00 => 270</li>\n<li>270e0f => 270f</li>\n<li>270e10 => 2700000000000</li>\n<li>270e90 => 270000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000</li>\n<li>270e9e => 270000000000e</li>\n<li>270e9f => 270000000000f</li>\n</ul>\n\n<p>Through trying other values, the issue seems occurs when the key starts with one or more numeric characters followed by the character 'e' and then one or more numeric characters. Any letters after that are printed normally. All the other values are interpolated without issue.</p>\n\n<p>Based on this, it appears that Sass is evaluating a key starting with #e# as if it were in <a href=\"https://en.wikipedia.org/wiki/Scientific_notation#E_notation\" rel=\"nofollow\">E notation</a>.</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"false\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-css lang-css prettyprint-override\"><code>$imagePath: '../img/';\r\n$images: (\r\n\tcontact: (\r\n\t\telements: (email, phone, linkedin, twitter),\r\n\t\tcolors: (\r\n\t\t\tfff: (states: 1, sizes: (22, 24,26)),\r\n\t\t\t782bbb: (states: 2, sizes: 26),\r\n\t\t)\r\n\t),\r\n\tpage-front: (\r\n\t\telements: (cloud, computer, phone, printer, server),\r\n\t\tcolors: (\r\n\t\t\t270dff: (states: 1, sizes: 64),\r\n\t\t\t270e00: (states: 1, sizes: 64),\r\n\t\t\t270e0f: (states: 1, sizes: 64),\r\n\t\t\t270e10: (states: 1, sizes: 64),\r\n\t\t\t270e90: (states: 1, sizes: 64),\r\n\t\t\t270e9e: (states: 1, sizes: 64),\r\n\t\t\t270e9f: (states: 1, sizes: 64),\r\n\t\t\t270ea0: (states: 1, sizes: 64),\r\n\t\t\t270ef0: (states: 1, sizes: 64),\r\n\t\t\t270f00: (states: 1, sizes: 64),\r\n\t\t\te9aea0: (states: 1, sizes: 64)\r\n\t\t)\r\n\t),\r\n);\r\n@each $type, $type-values in $images {\r\n\t@each $color, $color-values in map-get($type-values, colors) {\r\n\r\n\t\t@each $size in map-get($color-values, sizes) {\r\n\t\t\t.icon-type-#{$type} {\r\n\t\t\t\t&amp;.icon-color-#{$color}, .icon-color-#{$color} {\r\n\t\t\t\t\t&amp;.icon-size-#{$size}, .icon-size-#{$size} {\r\n\t\t\t\t\t\t&amp;.icon, .icon {\r\n\t\t\t\t\t\t\t.image {\r\n\r\n\t\t\t\t\t\t\t\theight: #{$size}px;\r\n\t\t\t\t\t\t\t\tbackground-image: url(#{$imagePath}#{$type}-#{$color}-#{$size}.png);\r\n\r\n\t\t\t\t\t\t\t\t&amp;.alt-hidden {\r\n\t\t\t\t\t\t\t\t\twidth: #{$size}px;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t$elements: map-get($type-values, elements);\r\n\r\n\t\t@for $i from 1 through length($elements) {\r\n\r\n\t\t\t$posY: (($i - 1)/(length($elements) - 1))*100%;\r\n\r\n\t\t\t.icon-type-#{$type} {\r\n\t\t\t\t&amp;.icon-color-#{$color}, .icon-color-#{$color} {\r\n\t\t\t\t\t&amp;.icon, .icon {\r\n\t\t\t\t\t\t&amp;.#{nth($elements, $i)} {\r\n\r\n\t\t\t\t\t\t\t.image { background-position: 0 $posY; }\r\n\r\n\t\t\t\t\t\t\t@if map-get($color-values, states) &gt; 1 {\r\n\r\n\t\t\t\t\t\t\t\t&amp;:active {\r\n\t\t\t\t\t\t\t\t\t.image { background-position: 100% $posY; }\r\n\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t\t$posX: 100%;\r\n\r\n\t\t\t\t\t\t\t\t@if map-get($color-values, states) == 3 { $posX: 50%; }\r\n\r\n\t\t\t\t\t\t\t\t&amp;:hover, &amp;:focus{\r\n\t\t\t\t\t\t\t\t\t.image { background-position: $posX $posY; }\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n}</code></pre>\r\n</div>\r\n</div>\r\n</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "database", "sqlite"], "comments": [{"owner": {"reputation": 3997, "user_id": 3998420, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/55ea542584d3fd2a430c3d409bdafc95?s=128&d=identicon&r=PG&f=1", "display_name": "bkunzi01", "link": "https://stackoverflow.com/users/3998420/bkunzi01"}, "edited": false, "score": 0, "creation_date": 1468355145, "post_id": 38338111, "comment_id": 64090787, "body": "You need to store the result of your query in an instance variable product before using the product instance var in your form_for helper and then you wont have that error however your query also looks incorrect.  Tell us what it is you&#39;re trying to do and we can help you."}], "answers": [{"comments": [{"owner": {"reputation": 85, "user_id": 4843540, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c6bd3509952392a7498c21c7724d3d8b?s=128&d=identicon&r=PG&f=1", "display_name": "Mascasc", "link": "https://stackoverflow.com/users/4843540/mascasc"}, "edited": false, "score": 0, "creation_date": 1468420255, "post_id": 38338308, "comment_id": 64121427, "body": "This works up to the @product.quantity line.  Here, I&#39;m getting an error that this is an undefined method for nil:NilClass.  Since quantity is one of the columns in my database table, should that create a method named #quantity, or is there another method that I should use to access that entry?"}, {"owner": {"reputation": 85, "user_id": 4843540, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c6bd3509952392a7498c21c7724d3d8b?s=128&d=identicon&r=PG&f=1", "display_name": "Mascasc", "link": "https://stackoverflow.com/users/4843540/mascasc"}, "edited": false, "score": 0, "creation_date": 1468422464, "post_id": 38338308, "comment_id": 64123128, "body": "I also had to change the find_by to Product.find_by, so that it would not give me an undefined method error."}, {"owner": {"reputation": 2770, "user_id": 1042201, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/ada99cff697111a404292dbeff3d4313?s=128&d=identicon&r=PG", "display_name": "Kumar", "link": "https://stackoverflow.com/users/1042201/kumar"}, "reply_to_user": {"reputation": 85, "user_id": 4843540, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c6bd3509952392a7498c21c7724d3d8b?s=128&d=identicon&r=PG&f=1", "display_name": "Mascasc", "link": "https://stackoverflow.com/users/4843540/mascasc"}, "edited": false, "score": 0, "creation_date": 1468427840, "post_id": 38338308, "comment_id": 64126765, "body": "My bad, thanks for pointing that out. Yes, you can access <code>quantity</code> just like that. You can get and set its value. Setting value is temporary in this case. You have to save your object, so it gets written to your database. Now what other problem do you face?"}, {"owner": {"reputation": 85, "user_id": 4843540, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c6bd3509952392a7498c21c7724d3d8b?s=128&d=identicon&r=PG&f=1", "display_name": "Mascasc", "link": "https://stackoverflow.com/users/4843540/mascasc"}, "edited": false, "score": 0, "creation_date": 1468429439, "post_id": 38338308, "comment_id": 64127669, "body": "How do I write this change to my database? I&#39;m not sure how to do this."}, {"owner": {"reputation": 2770, "user_id": 1042201, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/ada99cff697111a404292dbeff3d4313?s=128&d=identicon&r=PG", "display_name": "Kumar", "link": "https://stackoverflow.com/users/1042201/kumar"}, "reply_to_user": {"reputation": 85, "user_id": 4843540, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c6bd3509952392a7498c21c7724d3d8b?s=128&d=identicon&r=PG&f=1", "display_name": "Mascasc", "link": "https://stackoverflow.com/users/4843540/mascasc"}, "edited": false, "score": 0, "creation_date": 1468431557, "post_id": 38338308, "comment_id": 64128965, "body": "<code>@product.save</code> will do that. You may verify by opening <code>rails console</code>. Fine out more about rails console <a href=\"http://slash7.com/2006/12/21/secrets-of-the-rails-console-ninjas/\" rel=\"nofollow noreferrer\">here</a>"}, {"owner": {"reputation": 85, "user_id": 4843540, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c6bd3509952392a7498c21c7724d3d8b?s=128&d=identicon&r=PG&f=1", "display_name": "Mascasc", "link": "https://stackoverflow.com/users/4843540/mascasc"}, "edited": false, "score": 0, "creation_date": 1468432013, "post_id": 38338308, "comment_id": 64129228, "body": "Thank you for your help, I&#39;m still not sure why my @product variable has a nil class, but I&#39;m getting a much better picture of what&#39;s going on."}, {"owner": {"reputation": 2770, "user_id": 1042201, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/ada99cff697111a404292dbeff3d4313?s=128&d=identicon&r=PG", "display_name": "Kumar", "link": "https://stackoverflow.com/users/1042201/kumar"}, "reply_to_user": {"reputation": 85, "user_id": 4843540, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c6bd3509952392a7498c21c7724d3d8b?s=128&d=identicon&r=PG&f=1", "display_name": "Mascasc", "link": "https://stackoverflow.com/users/4843540/mascasc"}, "edited": false, "score": 0, "creation_date": 1468432224, "post_id": 38338308, "comment_id": 64129357, "body": "Where do you get your that <code>nil</code> error. Which line?"}, {"owner": {"reputation": 85, "user_id": 4843540, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c6bd3509952392a7498c21c7724d3d8b?s=128&d=identicon&r=PG&f=1", "display_name": "Mascasc", "link": "https://stackoverflow.com/users/4843540/mascasc"}, "edited": false, "score": 0, "creation_date": 1468432377, "post_id": 38338308, "comment_id": 64129443, "body": "I&#39;m getting it at the @product.quantity -= 1 line, it says that I can&#39;t use quantity because that method is not defined for nil class."}, {"owner": {"reputation": 2770, "user_id": 1042201, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/ada99cff697111a404292dbeff3d4313?s=128&d=identicon&r=PG", "display_name": "Kumar", "link": "https://stackoverflow.com/users/1042201/kumar"}, "reply_to_user": {"reputation": 85, "user_id": 4843540, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c6bd3509952392a7498c21c7724d3d8b?s=128&d=identicon&r=PG&f=1", "display_name": "Mascasc", "link": "https://stackoverflow.com/users/4843540/mascasc"}, "edited": false, "score": 0, "creation_date": 1468432563, "post_id": 38338308, "comment_id": 64129572, "body": "That is because it didn&#39;t fine any <code>product</code> with <code>code</code> that you provided in params. Or possibly <code>params[:code]</code> could be nil. I suggest you check your rails server log to verify if code is being passed in your params. Next open <code>rails console</code>, and and try <code>Product.find_by(code: 23)</code> (whatever is your product code), if that gives any output."}, {"owner": {"reputation": 85, "user_id": 4843540, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c6bd3509952392a7498c21c7724d3d8b?s=128&d=identicon&r=PG&f=1", "display_name": "Mascasc", "link": "https://stackoverflow.com/users/4843540/mascasc"}, "edited": false, "score": 0, "creation_date": 1468432628, "post_id": 38338308, "comment_id": 64129612, "body": "I am not able to enter a code into my form, it simply takes me to the ship method and gives me the nil error at this line."}, {"owner": {"reputation": 2770, "user_id": 1042201, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/ada99cff697111a404292dbeff3d4313?s=128&d=identicon&r=PG", "display_name": "Kumar", "link": "https://stackoverflow.com/users/1042201/kumar"}, "reply_to_user": {"reputation": 85, "user_id": 4843540, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c6bd3509952392a7498c21c7724d3d8b?s=128&d=identicon&r=PG&f=1", "display_name": "Mascasc", "link": "https://stackoverflow.com/users/4843540/mascasc"}, "edited": false, "score": 0, "creation_date": 1468432721, "post_id": 38338308, "comment_id": 64129696, "body": "Ah, then <code>code</code> in your params is nil. So basically your searching like this, <code>Product.find_by(code: nil)</code>, which is giving out nil in your <code>@product</code> variable."}, {"owner": {"reputation": 85, "user_id": 4843540, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c6bd3509952392a7498c21c7724d3d8b?s=128&d=identicon&r=PG&f=1", "display_name": "Mascasc", "link": "https://stackoverflow.com/users/4843540/mascasc"}, "edited": false, "score": 0, "creation_date": 1468432975, "post_id": 38338308, "comment_id": 64129863, "body": "Ah, okay, I get it. So, how can I render a view of the form so that people can enter information?"}, {"owner": {"reputation": 2770, "user_id": 1042201, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/ada99cff697111a404292dbeff3d4313?s=128&d=identicon&r=PG", "display_name": "Kumar", "link": "https://stackoverflow.com/users/1042201/kumar"}, "reply_to_user": {"reputation": 85, "user_id": 4843540, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c6bd3509952392a7498c21c7724d3d8b?s=128&d=identicon&r=PG&f=1", "display_name": "Mascasc", "link": "https://stackoverflow.com/users/4843540/mascasc"}, "edited": false, "score": 0, "creation_date": 1468433199, "post_id": 38338308, "comment_id": 64130010, "body": "@Mascasc, I would love to answer that, but I think its getting out of the scope of this question&#39;s answer. It would be awesome if you could walk through the official rails <a href=\"http://guides.rubyonrails.org/\" rel=\"nofollow noreferrer\">guide</a>. You&#39;ll get much more insight about the code you&#39;re dealing with right now. Thank You."}, {"owner": {"reputation": 85, "user_id": 4843540, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c6bd3509952392a7498c21c7724d3d8b?s=128&d=identicon&r=PG&f=1", "display_name": "Mascasc", "link": "https://stackoverflow.com/users/4843540/mascasc"}, "edited": false, "score": 0, "creation_date": 1468433379, "post_id": 38338308, "comment_id": 64130108, "body": "Alright, thank you so much for your help.  I truly appreciate it."}, {"owner": {"reputation": 2770, "user_id": 1042201, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/ada99cff697111a404292dbeff3d4313?s=128&d=identicon&r=PG", "display_name": "Kumar", "link": "https://stackoverflow.com/users/1042201/kumar"}, "reply_to_user": {"reputation": 85, "user_id": 4843540, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c6bd3509952392a7498c21c7724d3d8b?s=128&d=identicon&r=PG&f=1", "display_name": "Mascasc", "link": "https://stackoverflow.com/users/4843540/mascasc"}, "edited": false, "score": 0, "creation_date": 1468433426, "post_id": 38338308, "comment_id": 64130132, "body": "Good luck venturing into rails in depth. :)"}], "tags": [], "owner": {"reputation": 2770, "user_id": 1042201, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/ada99cff697111a404292dbeff3d4313?s=128&d=identicon&r=PG", "display_name": "Kumar", "link": "https://stackoverflow.com/users/1042201/kumar"}, "is_accepted": true, "score": 1, "last_activity_date": 1468427682, "last_edit_date": 1468427682, "creation_date": 1468355224, "answer_id": 38338308, "question_id": 38338111, "link": "https://stackoverflow.com/questions/38338111/referencing-table-entries-in-rails/38338308#38338308", "title": "Referencing Table Entries in Rails", "body": "<p>Try like this, let me know what else do you need.</p>\n\n<pre><code>def ship\n  @product = Product.find_by(code: params[:code]) # or you can use :code =&gt; params[:code], but not an equal sign\n  @product.quantity -= 1\n  if @product.save\n    respond_to do |format|\n      format.html {}\n      format.json {}\n    end\n  end\nend\n</code></pre>\n\n<ul>\n<li><p><code>where</code> returns an array or objects.</p></li>\n<li><p>You after negating the quantity you should save it or update product on the go</p></li>\n<li><p>You should respond back or else you'll get <code>template missing</code> error, OR you can redirect to some page</p></li>\n</ul>\n"}], "owner": {"reputation": 85, "user_id": 4843540, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c6bd3509952392a7498c21c7724d3d8b?s=128&d=identicon&r=PG&f=1", "display_name": "Mascasc", "link": "https://stackoverflow.com/users/4843540/mascasc"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 46, "favorite_count": 0, "accepted_answer_id": 38338308, "answer_count": 1, "score": 2, "last_activity_date": 1468427682, "creation_date": 1468354451, "question_id": 38338111, "link": "https://stackoverflow.com/questions/38338111/referencing-table-entries-in-rails", "title": "Referencing Table Entries in Rails", "body": "<p>I'm working on a project in rails where I have a database of products, and I'm looking to use forms to manipulate them.</p>\n\n<p>However, I'm having a great deal of difficulty figuring out how to do this.</p>\n\n<p>I tried to use the standard:</p>\n\n<pre><code>&lt;%= form_for(@product) %&gt;\n...\n&lt;% end %&gt;\n</code></pre>\n\n<p>to send an entry to my product controller, but that returns a nil/empty field error.</p>\n\n<p>My method to remove products from inventory is below.  I strongly suspect this to be highly incorrect, but I have yet to figure out how to get far enough to even receive an error with that:</p>\n\n<pre><code>def ship\n    @products.where(@products.code = params[:code]).quantity -= 1 \nend\n</code></pre>\n\n<p>If there is any way that anybody could guide me in the right direction, I would be highly grateful.  I've been trying to figure this out for a while now.</p>\n"}, {"tags": ["ruby", "rubygems"], "comments": [{"owner": {"reputation": 7894, "user_id": 981616, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/92513702d30405c7e2ca056bdc72aa9f?s=128&d=identicon&r=PG", "display_name": "uday", "link": "https://stackoverflow.com/users/981616/uday"}, "edited": false, "score": 0, "creation_date": 1468353285, "post_id": 38337768, "comment_id": 64089721, "body": "did you install DevKit?"}, {"owner": {"reputation": 929, "user_id": 4560015, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/9190fdd256e98c401eeaf26d571e8e05?s=128&d=identicon&r=PG&f=1", "display_name": "B A", "link": "https://stackoverflow.com/users/4560015/b-a"}, "reply_to_user": {"reputation": 7894, "user_id": 981616, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/92513702d30405c7e2ca056bdc72aa9f?s=128&d=identicon&r=PG", "display_name": "uday", "link": "https://stackoverflow.com/users/981616/uday"}, "edited": false, "score": 0, "creation_date": 1468353475, "post_id": 38337768, "comment_id": 64089806, "body": "@uDaY yeah, i have railsinstaller installed on my computer and it includes devkit as well."}], "owner": {"reputation": 929, "user_id": 4560015, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/9190fdd256e98c401eeaf26d571e8e05?s=128&d=identicon&r=PG&f=1", "display_name": "B A", "link": "https://stackoverflow.com/users/4560015/b-a"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 24, "favorite_count": 1, "answer_count": 0, "score": 0, "last_activity_date": 1468353773, "creation_date": 1468353138, "last_edit_date": 1468353773, "question_id": 38337768, "link": "https://stackoverflow.com/questions/38337768/tried-installing-summarize-gem-in-windows-7-and-got-an-error", "title": "Tried installing summarize gem in Windows 7 and got an error", "body": "<p>I tried installing the summarize gem on my windows PC and it gave an error: </p>\n\n<pre><code>ERROR:  Error installing summarize:\n        ERROR: Failed to build gem native extension.\n\n    C:/RailsInstaller/Ruby2.2.0/bin/ruby.exe extconf.rb\ncreating Makefile\nC:/RailsInstaller/Ruby2.2.0/bin/ruby.exe extconf.rb\ncreating Makefile\n\nmake \"DESTDIR=\" clean\n\nmake \"DESTDIR=\"\ngenerating summarize-i386-mingw32.def\ncompiling article.c\nIn file included from article.c:25:0:\nlibots.h:24:18: fatal error: glib.h: No such file or directory\ncompilation terminated.\nmake: *** [article.o] Error 1\n\nmake failed, exit code 2\n</code></pre>\n\n<p>Is it possible to overcome this easily? What is the solution?</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 12542, "user_id": 156746, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/8TsPx.jpg?s=128&g=1", "display_name": "DiegoSalazar", "link": "https://stackoverflow.com/users/156746/diegosalazar"}, "edited": false, "score": 0, "creation_date": 1468357182, "post_id": 38336977, "comment_id": 64091949, "body": "Can you elaborate on &quot;use SASS via a php script&quot;. Post the line of code or command that causes the error."}, {"owner": {"reputation": 13, "user_id": 6581004, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/08a4260f4e3ac43b2ef6c77b165aeb53?s=128&d=identicon&r=PG&f=1", "display_name": "chrispajo", "link": "https://stackoverflow.com/users/6581004/chrispajo"}, "reply_to_user": {"reputation": 12542, "user_id": 156746, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/8TsPx.jpg?s=128&g=1", "display_name": "DiegoSalazar", "link": "https://stackoverflow.com/users/156746/diegosalazar"}, "edited": false, "score": 0, "creation_date": 1468398172, "post_id": 38336977, "comment_id": 64105755, "body": "$cmd = &quot;echo \\&quot;&quot; . $src . &quot;\\&quot; | sass --scss --no-cache -s&quot;;"}, {"owner": {"reputation": 13, "user_id": 6581004, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/08a4260f4e3ac43b2ef6c77b165aeb53?s=128&d=identicon&r=PG&f=1", "display_name": "chrispajo", "link": "https://stackoverflow.com/users/6581004/chrispajo"}, "reply_to_user": {"reputation": 12542, "user_id": 156746, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/8TsPx.jpg?s=128&g=1", "display_name": "DiegoSalazar", "link": "https://stackoverflow.com/users/156746/diegosalazar"}, "edited": false, "score": 0, "creation_date": 1468398274, "post_id": 38336977, "comment_id": 64105823, "body": "Where $src is the SCSS string to convert."}], "answers": [{"tags": [], "owner": {"reputation": 12542, "user_id": 156746, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/8TsPx.jpg?s=128&g=1", "display_name": "DiegoSalazar", "link": "https://stackoverflow.com/users/156746/diegosalazar"}, "is_accepted": true, "score": 0, "last_activity_date": 1468420359, "creation_date": 1468420359, "answer_id": 38354608, "question_id": 38336977, "link": "https://stackoverflow.com/questions/38336977/ruby-sass-rvm/38354608#38354608", "title": "Ruby / SASS / RVM", "body": "<p>The user your php script is running as is seing the wrong ruby version, one for which you haven't installed sass for. Try having your script call these bash commands before any others to make sure it uses the one rvm has setup:</p>\n\n<pre><code>source \"/usr/local/rvm/scripts/rvm\"\nrvm use 2.3.1\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 6581004, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/08a4260f4e3ac43b2ef6c77b165aeb53?s=128&d=identicon&r=PG&f=1", "display_name": "chrispajo", "link": "https://stackoverflow.com/users/6581004/chrispajo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 148, "favorite_count": 0, "accepted_answer_id": 38354608, "answer_count": 1, "score": 1, "last_activity_date": 1468420359, "creation_date": 1468350205, "last_edit_date": 1468350498, "question_id": 38336977, "link": "https://stackoverflow.com/questions/38336977/ruby-sass-rvm", "title": "Ruby / SASS / RVM", "body": "<p>I've installed ruby 2.3.1 on RHEL 5, using RVM.</p>\n\n<p>I've also installed SASS.</p>\n\n<pre><code>-bash-3.2$ which ruby\n/usr/local/rvm/rubies/ruby-2.3.1/bin/ruby\n</code></pre>\n\n<p>And</p>\n\n<pre><code>-bash-3.2$ which sass\n/usr/local/rvm/gems/ruby-2.3.1/bin/sass\n</code></pre>\n\n<p>And</p>\n\n<pre><code>-bash-3.2$ gem which sass\n/usr/local/rvm/gems/ruby-2.3.1/gems/sass-3.4.22/lib/sass.rb\n</code></pre>\n\n<p>However, when I try to use SASS via a php script, I get the following error:</p>\n\n<pre><code>/usr/local/rvm/rubies/ruby-2.3.1/lib/ruby/2.3.0/rubygems/dependency.rb:319:in `to_specs': Could not find 'sass' (&gt;= 0.a) among 16 total gem(s) (Gem::LoadError)\nChecked in 'GEM_PATH=/.gem/ruby/2.3.0:/usr/local/rvm/rubies/ruby-2.3.1/lib/ruby/gems/2.3.0', execute `gem env` for more information\n    from /usr/local/rvm/rubies/ruby-2.3.1/lib/ruby/2.3.0/rubygems/dependency.rb:328:in `to_spec'\n    from /usr/local/rvm/rubies/ruby-2.3.1/lib/ruby/2.3.0/rubygems/core_ext/kernel_gem.rb:65:in `gem'\n    from /usr/bin/sass:22:in `&lt;main&gt;'\n    from /usr/bin/ruby_executable_hooks:15:in `eval'\n    from /usr/bin/ruby_executable_hooks:15:in `&lt;main&gt;'\n</code></pre>\n\n<p>Running gem environment gempath yields:</p>\n\n<pre><code>/usr/local/rvm/gems/ruby-2.3.1/gems/:/usr/local/rvm/gems/ruby-2.3.1/bin:/usr/local/rvm/gems/ruby-2.3.1\n</code></pre>\n\n<p>You can see that there is conflicting information regarding the GEM_PATH in the error message, and the value shown above for the environment gempath.</p>\n\n<p>I suspect there's some remnants of a previous version of ruby that are causing issues, but at this point i'm drawing a blank.</p>\n\n<p>The entire results of calling gem env are below:</p>\n\n<pre><code>RubyGems Environment:\n- RUBYGEMS VERSION: 2.5.1\n- RUBY VERSION: 2.3.1 (2016-04-26 patchlevel 112) [x86_64-linux]\n- INSTALLATION DIRECTORY: /usr/local/rvm/gems/ruby-2.3.1\n- USER INSTALLATION DIRECTORY: /root/.gem/ruby/2.3.0\n- RUBY EXECUTABLE: /usr/local/rvm/rubies/ruby-2.3.1/bin/ruby\n- EXECUTABLE DIRECTORY: /usr/local/rvm/gems/ruby-2.3.1/bin\n- SPEC CACHE DIRECTORY: /root/.gem/specs\n- SYSTEM CONFIGURATION DIRECTORY: /usr/local/rvm/rubies/ruby-2.3.1/etc\n- RUBYGEMS PLATFORMS:\n  - ruby\n  - x86_64-linux\n- GEM PATHS:\n  - /usr/local/rvm/gems/ruby-2.3.1\n  - /usr/local/rvm/gems/ruby-2.3.1/gems/\n  - /usr/local/rvm/gems/ruby-2.3.1/bin\n- GEM CONFIGURATION:\n  - :update_sources =&gt; true\n  - :verbose =&gt; true\n  - :backtrace =&gt; false\n  - :bulk_threshold =&gt; 1000\n- REMOTE SOURCES:\n  - https://rubygems.org/\n- SHELL PATH:\n  - /usr/kerberos/sbin\n  - /usr/local/rvm/gems/ruby-2.3.1/bin\n  - /usr/local/rvm/gems/ruby-2.3.1@global/bin\n  - /usr/local/rvm/rubies/ruby-2.3.1/bin\n  - /usr/kerberos/bin\n  - /usr/local/bin\n  - /bin\n  - /usr/bin\n  - /usr/local/rvm/bin\n  - /opt/dell/srvadmin/bin\n  - /opt/dell/srvadmin/sbin\n</code></pre>\n\n<p>Any help or even things to try would be greatly appreciated.</p>\n\n<p>Thank you!</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "amazon-dynamodb", "contains", "aws-sdk"], "answers": [{"comments": [{"owner": {"reputation": 174, "user_id": 2092386, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/570442eded88e8ea5661524d44492e04?s=128&d=identicon&r=PG", "display_name": "sidneivl", "link": "https://stackoverflow.com/users/2092386/sidneivl"}, "edited": false, "score": 0, "creation_date": 1468365065, "post_id": 38337569, "comment_id": 64094896, "body": "Hi Nabeel,  I&#39;ll try it, but the filter is dynamic, then this way can be unusual.  But this example give me a light...i&#39;ll test."}, {"owner": {"reputation": 2172, "user_id": 4412925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf7fa1503a3820659b27943c99d463a0?s=128&d=identicon&r=PG&f=1", "display_name": "Nabeel", "link": "https://stackoverflow.com/users/4412925/nabeel"}, "reply_to_user": {"reputation": 174, "user_id": 2092386, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/570442eded88e8ea5661524d44492e04?s=128&d=identicon&r=PG", "display_name": "sidneivl", "link": "https://stackoverflow.com/users/2092386/sidneivl"}, "edited": false, "score": 0, "creation_date": 1468367148, "post_id": 38337569, "comment_id": 64095362, "body": "One thing to note is that scan filtering will still cost you the same in terms of item reads/writes as if it were a full scan. This is because filtering is applied after the data has been fetched but before it is returned to you, you could very well filter it yourself (but that might include having to deal with pagination, 1 MB size limit, etc)."}, {"owner": {"reputation": 174, "user_id": 2092386, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/570442eded88e8ea5661524d44492e04?s=128&d=identicon&r=PG", "display_name": "sidneivl", "link": "https://stackoverflow.com/users/2092386/sidneivl"}, "edited": false, "score": 0, "creation_date": 1468505767, "post_id": 38337569, "comment_id": 64163403, "body": "I tried your way and another way, but now I got &quot;stack level too deep&quot; error, so, I quit Dynamodb and back to postgres, I got the result in 2 lines code. In the future I&#39;ll try DynamoDB, maybe..."}], "tags": [], "owner": {"reputation": 2172, "user_id": 4412925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf7fa1503a3820659b27943c99d463a0?s=128&d=identicon&r=PG&f=1", "display_name": "Nabeel", "link": "https://stackoverflow.com/users/4412925/nabeel"}, "is_accepted": false, "score": 0, "last_activity_date": 1468352360, "creation_date": 1468352360, "answer_id": 38337569, "question_id": 38336752, "link": "https://stackoverflow.com/questions/38336752/dynamodb-contains-value-in-an-array-using-rails/38337569#38337569", "title": "DynamoDB contains value in an array using rails", "body": "<p>Try this and let me know if it works, I know from experience that DynamoDB is very painful to filter. </p>\n\n<pre><code>result = dynamodb.scan(\n  table_name: 'my_table',\n  expression_attribute_values: { \n    ':one' =&gt; 1,\n    ':two' =&gt; 2,\n    ':three' =&gt; 3,\n    ':four' =&gt; 4\n  },\n  filter_expression: 'contains(numbers, :one) OR contains(numbers, :two) OR contains(numbers, :three) OR contains(numbers, :four)'\n)\n</code></pre>\n\n<p>I can't think of anything simpler currently, the method you linked is marked as deprecated, instead you should use <code>expression_attribute_values</code> and <code>filter_expression</code>.</p>\n"}], "owner": {"reputation": 174, "user_id": 2092386, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/570442eded88e8ea5661524d44492e04?s=128&d=identicon&r=PG", "display_name": "sidneivl", "link": "https://stackoverflow.com/users/2092386/sidneivl"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 396, "favorite_count": 1, "answer_count": 1, "score": 0, "last_activity_date": 1468352360, "creation_date": 1468349399, "question_id": 38336752, "link": "https://stackoverflow.com/questions/38336752/dynamodb-contains-value-in-an-array-using-rails", "title": "DynamoDB contains value in an array using rails", "body": "<p>I'm studying DynamoDB using rails and I got a doubt.\nI not be able to find a solution on web, so If you can solve it I'll thank.</p>\n\n<p>The doubt is how can I find values into array saved on a table, for example:</p>\n\n<p>I have a lot of data in my_table where there are fields called \"numbers\" that are arrays like:</p>\n\n<pre><code>[1,2,3,4]\n[3,4,5,6]\n[1,3,4,7]\n[4,7,8,10]\n[8,9,12,14]\n[12,14,16,20]\n</code></pre>\n\n<p>So, I want select all entries that contains numbers 1,3,4. In this case four results.</p>\n\n<p>So, my code is</p>\n\n<pre><code>result = dynamodb.scan({\n    table_name: \"my_table\",\n    select: \"ALL_ATTRIBUTES\",\n    attributes_to_get: [\"numbers\"],\n    scan_filter: {\n        \"numbers\" =&gt; {\n            attribute_value_list: [1,3,4],\n            comparison_operator: \"CONTAINS\"\n        }\n    }\n})\n</code></pre>\n\n<p>But I get this error: One or more parameter values were invalid: Invalid number of argument(s) for the CONTAINS ComparisonOperator</p>\n\n<p>How can I do this action using dynamo DB?</p>\n\n<p>Thanks a lot</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "activerecord", "heroku"], "comments": [{"owner": {"reputation": 6200, "user_id": 637094, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/fd50f61387b63900335c8556f86237be?s=128&d=identicon&r=PG", "display_name": "Leonel Gal&#225;n", "link": "https://stackoverflow.com/users/637094/leonel-gal%c3%a1n"}, "edited": false, "score": 3, "creation_date": 1468349531, "post_id": 38336726, "comment_id": 64087619, "body": "Did you run the migration on Heroku <code>heroku run rake db:migrate</code>?"}, {"owner": {"reputation": 12542, "user_id": 156746, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/8TsPx.jpg?s=128&g=1", "display_name": "DiegoSalazar", "link": "https://stackoverflow.com/users/156746/diegosalazar"}, "edited": false, "score": 2, "creation_date": 1468357301, "post_id": 38336726, "comment_id": 64091996, "body": "and then wait a few seconds and/or run <code>heroku restart</code> because sometimes the postgres cache needs to be refreshed for the new schema change to be visible to your running dyno"}, {"owner": {"reputation": 819, "user_id": 3005533, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/sjyvA.jpg?s=128&g=1", "display_name": "92tonywills", "link": "https://stackoverflow.com/users/3005533/92tonywills"}, "reply_to_user": {"reputation": 6200, "user_id": 637094, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/fd50f61387b63900335c8556f86237be?s=128&d=identicon&r=PG", "display_name": "Leonel Gal&#225;n", "link": "https://stackoverflow.com/users/637094/leonel-gal%c3%a1n"}, "edited": false, "score": 0, "creation_date": 1468361134, "post_id": 38336726, "comment_id": 64093666, "body": "@Leito Yes a ran the migration, which is why I mentioned that I had checked the Postgres table and that it had the fields I was expecting"}, {"owner": {"reputation": 6200, "user_id": 637094, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/fd50f61387b63900335c8556f86237be?s=128&d=identicon&r=PG", "display_name": "Leonel Gal&#225;n", "link": "https://stackoverflow.com/users/637094/leonel-gal%c3%a1n"}, "edited": false, "score": 0, "creation_date": 1468375118, "post_id": 38336726, "comment_id": 64097082, "body": "You didn&#39;t mentioned the entire column (starting with &quot;heroku&quot;) so I wasn&#39;t sure."}], "answers": [{"comments": [{"owner": {"reputation": 819, "user_id": 3005533, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/sjyvA.jpg?s=128&g=1", "display_name": "92tonywills", "link": "https://stackoverflow.com/users/3005533/92tonywills"}, "edited": false, "score": 0, "creation_date": 1468403556, "post_id": 38341627, "comment_id": 64109422, "body": "As I said in the question I have run the migration and I already checked the database table structure"}], "tags": [], "owner": {"reputation": 221, "user_id": 4078777, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-MrQwIywvJz8/AAAAAAAAAAI/AAAAAAAAABk/J3JLuqVuC0U/photo.jpg?sz=128", "display_name": "C LOKESH REDDY", "link": "https://stackoverflow.com/users/4078777/c-lokesh-reddy"}, "is_accepted": false, "score": 1, "last_activity_date": 1468376345, "creation_date": 1468376345, "answer_id": 38341627, "question_id": 38336726, "link": "https://stackoverflow.com/questions/38336726/activerecord-model-not-fully-instantiating-after-migration-on-heroku/38341627#38341627", "title": "ActiveRecord model not fully instantiating after migration on Heroku", "body": "<p>Once open heroku console and check the model's columns by following command,</p>\n\n<pre><code>    heroku run rails c\n    Project.first\n</code></pre>\n\n<p>If you don't see title column in the object generated then migrate again and restart heroku</p>\n\n<pre><code>    heroku run rake db:migrate\n    heroku restart\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 819, "user_id": 3005533, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/sjyvA.jpg?s=128&g=1", "display_name": "92tonywills", "link": "https://stackoverflow.com/users/3005533/92tonywills"}, "is_accepted": true, "score": 0, "last_activity_date": 1468404108, "creation_date": 1468404108, "answer_id": 38348467, "question_id": 38336726, "link": "https://stackoverflow.com/questions/38336726/activerecord-model-not-fully-instantiating-after-migration-on-heroku/38348467#38348467", "title": "ActiveRecord model not fully instantiating after migration on Heroku", "body": "<p>As @diego.greyrobot mentioned it was a caching issue and running <code>heroku restart</code> (and then waiting a few minutes) seems to have fixed it.</p>\n"}], "owner": {"reputation": 819, "user_id": 3005533, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/sjyvA.jpg?s=128&g=1", "display_name": "92tonywills", "link": "https://stackoverflow.com/users/3005533/92tonywills"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 52, "favorite_count": 0, "accepted_answer_id": 38348467, "answer_count": 2, "score": 0, "last_activity_date": 1468404108, "creation_date": 1468349311, "question_id": 38336726, "link": "https://stackoverflow.com/questions/38336726/activerecord-model-not-fully-instantiating-after-migration-on-heroku", "title": "ActiveRecord model not fully instantiating after migration on Heroku", "body": "<p>Getting the following error trying to show a form for a newly instantiate ActiveRecord model.</p>\n\n<pre><code>ActionView::Template::Error (undefined method `title' for \n        #&lt;Project id: nil, created_at: nil, updated_at: nil&gt;):\n</code></pre>\n\n<p>The method in the controller is simply</p>\n\n<pre><code># GET /projects/new\ndef new\n    @project = Project.new\nend\n</code></pre>\n\n<hr>\n\n<p>It looks like the object only has the basic ActiveRecord accessors, but should have title and a number of others. I <code>pg:psql</code>'ed into my database and checked the structure and they are there, so the migration looks to have gone through.\nThe problem is accessing <code>title</code> from the form throws the above error.</p>\n\n<p>My migration:</p>\n\n<pre><code>class AddTitleBodyToProjects &lt; ActiveRecord::Migration\n    def change\n        add_column :projects, :logo_url, :string\n        add_column :projects, :title, :string\n        add_column :projects, :body, :text\n        add_column :projects, :web_url, :string\n        add_column :projects, :github_url, :string\n        add_column :projects, :appstore_url, :string\n        add_column :projects, :playstore_url, :string\n    end\nend\n</code></pre>\n\n<p>My haml template (which throws the error): </p>\n\n<pre><code>.admin-form.work-form\n= form_for @project, url: { action: @action, id: @project }, class: 'form-horizontal' do |f|\n    .form-group.row\n        = f.label :title, class: 'col-sm-2 control-label'\n        .col-sm-9\n            = f.text_field :title, class: 'form-control'\n    .form-group.row\n        = f.label :body, class: 'col-sm-2 control-label'\n        .col-sm-9\n            = f.text_area :body, class: 'form-control'\n    .form-group.row\n        = f.label :logo_url, class: 'col-sm-2 control-label'\n        .col-sm-9\n            = f.text_field :logo_url, class: 'form-control'\n    .form-group.row\n        = f.label :web_url, class: 'col-sm-2 control-label'\n        .col-sm-9\n            = f.text_field :web_url, class: 'form-control'\n    .form-group.row\n        = f.label :github_url, class: 'col-sm-2 control-label'\n        .col-sm-9\n            = f.text_field :github_url, class: 'form-control'\n    .form-group.row\n        = f.label :appstore_url, class: 'col-sm-2 control-label'\n        .col-sm-9\n            = f.text_field :appstore_url, class: 'form-control'\n    .form-group.row\n        = f.label :playstore_url, class: 'col-sm-2 control-label'\n        .col-sm-9\n            = f.text_field :playstore_url, class: 'form-control'\n    .form-group.row\n        .col-sm-offset-2.col-sm-9\n            = f.submit 'Save', class: 'btn btn-default'\n</code></pre>\n\n<p>It all works fine locally, it's only on the heroku instance where it throws the error.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "postgresql", "pg"], "comments": [{"owner": {"reputation": 394580, "user_id": 479863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ArUCE.jpg?s=128&g=1", "display_name": "mu is too short", "link": "https://stackoverflow.com/users/479863/mu-is-too-short"}, "edited": false, "score": 1, "creation_date": 1468349973, "post_id": 38336602, "comment_id": 64087903, "body": "Your problem lies elsewhere. Standard SQL doubles single quotes to escape them so <code>escape</code> is working properly. What is this <code>ComponentValue</code> and why is it calling <code>PG::Connection.escape</code>?"}, {"owner": {"reputation": 394580, "user_id": 479863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ArUCE.jpg?s=128&g=1", "display_name": "mu is too short", "link": "https://stackoverflow.com/users/479863/mu-is-too-short"}, "edited": false, "score": 0, "creation_date": 1468350315, "post_id": 38336602, "comment_id": 64088098, "body": "BTW, you only need to <code>escape</code> strings that you&#39;re interpolating/concatenating into SQL strings. If you&#39;re escaping strings and then sending them to the database through other means then that&#39;s where your doubled single quotes are coming from."}, {"owner": {"reputation": 2096, "user_id": 2108990, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/886481640b3ab8f05cdf3be8c0efdad6?s=128&d=identicon&r=PG", "display_name": "Zack", "link": "https://stackoverflow.com/users/2108990/zack"}, "reply_to_user": {"reputation": 394580, "user_id": 479863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ArUCE.jpg?s=128&g=1", "display_name": "mu is too short", "link": "https://stackoverflow.com/users/479863/mu-is-too-short"}, "edited": false, "score": 0, "creation_date": 1468355372, "post_id": 38336602, "comment_id": 64090933, "body": "Then why is it that when I run <code>PG::Connection.escape(&quot;I&#39;m O&#39;Riley&quot;)</code> in my terminal I&#39;m getting <code>&quot;I&#39;&#39;m O&#39;&#39;Riley&quot;</code>"}, {"owner": {"reputation": 394580, "user_id": 479863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ArUCE.jpg?s=128&g=1", "display_name": "mu is too short", "link": "https://stackoverflow.com/users/479863/mu-is-too-short"}, "edited": false, "score": 0, "creation_date": 1468356778, "post_id": 38336602, "comment_id": 64091749, "body": "You&#39;re escaping a string and getting an escaped string back. What are you expecting <code>PG::Connection.escape</code> to do to a string? Why would <code>PG::Connection.escape(&quot;I&#39;m O&#39;Riley&quot;)</code> return anything other than <code>&quot;I&#39;&#39;m O&#39;&#39;Riley&quot;</code>?"}, {"owner": {"reputation": 2096, "user_id": 2108990, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/886481640b3ab8f05cdf3be8c0efdad6?s=128&d=identicon&r=PG", "display_name": "Zack", "link": "https://stackoverflow.com/users/2108990/zack"}, "reply_to_user": {"reputation": 394580, "user_id": 479863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ArUCE.jpg?s=128&g=1", "display_name": "mu is too short", "link": "https://stackoverflow.com/users/479863/mu-is-too-short"}, "edited": false, "score": 0, "creation_date": 1468357475, "post_id": 38336602, "comment_id": 64092086, "body": "Well that isn&#39;t escaping. It is duplicating. <code>\\&#39;</code> would be escaping."}, {"owner": {"reputation": 394580, "user_id": 479863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ArUCE.jpg?s=128&g=1", "display_name": "mu is too short", "link": "https://stackoverflow.com/users/479863/mu-is-too-short"}, "edited": false, "score": 1, "creation_date": 1468357838, "post_id": 38336602, "comment_id": 64092226, "body": "Yes, that is SQL escaping as I said in my first comment. If you want to send a (Ruby) string <code>&quot;O&#39;Riley&quot;</code> to the database, it needs to see <code>&#39;O&#39;&#39;Riley&#39;</code> because (a) SQL uses single quotes for string literals and (b) a single quote inside a string literal is escaped by doubling it. Go to <code>psql</code> and say <code>select &#39;O&#39;&#39;Riley&#39;;</code> and you&#39;ll see. Some databases will allow you to use double quotes for string literals but that&#39;s non-standard, double quotes are for quoting identifiers (such as table and column names). Every language has its own escaping rules, that&#39;s why you use library methods to do it."}, {"owner": {"reputation": 394580, "user_id": 479863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ArUCE.jpg?s=128&g=1", "display_name": "mu is too short", "link": "https://stackoverflow.com/users/479863/mu-is-too-short"}, "edited": false, "score": 0, "creation_date": 1468357957, "post_id": 38336602, "comment_id": 64092286, "body": "What specifically are you using these strings for that you would want a single quote escaped as <code>\\&#39;</code>?"}], "owner": {"reputation": 2096, "user_id": 2108990, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/886481640b3ab8f05cdf3be8c0efdad6?s=128&d=identicon&r=PG", "display_name": "Zack", "link": "https://stackoverflow.com/users/2108990/zack"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 241, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1541276287, "creation_date": 1468348888, "last_edit_date": 1541276287, "question_id": 38336602, "link": "https://stackoverflow.com/questions/38336602/pgconnection-is-not-properly-escaping-apostrophes", "title": "PG::Connection is not properly escaping apostrophes", "body": "<p>Been trying to debug an issue with my rails app where apostrophes were being duplicated in the database. </p>\n\n<pre><code>[17] pry(main)&gt; ComponentValue.new(value: \"I'm O'Riley\")\n=&gt; #&lt;ComponentValue:0x007f95ca6bbd88 @value=\"I''m O''Riley\"&gt;\n</code></pre>\n\n<p>Traced the issue back to <code>PG::Connection</code> and found that the escape method is not working properly. </p>\n\n<pre><code>[1] pry(main)&gt; PG::Connection.escape(\"I'm O'Riley\")\n=&gt; \"I''m O''Riley\"\n</code></pre>\n\n<p>Now I THINK that the gem is broken... But first, am I missing something?? Second, other than fixing the gem, is there anything I can do to fix the problem?</p>\n"}, {"tags": ["arrays", "ruby", "object"], "comments": [{"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1468349195, "post_id": 38336549, "comment_id": 64087442, "body": "What language is that? Ruby has no notion of <code>null</code>."}, {"owner": {"reputation": 55, "user_id": 5505351, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/a7422e44d18fa2f175b266e3dc52d976?s=128&d=identicon&r=PG&f=1", "display_name": "Emmanuel Orozco", "link": "https://stackoverflow.com/users/5505351/emmanuel-orozco"}, "reply_to_user": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1468349385, "post_id": 38336549, "comment_id": 64087532, "body": "@mudasobwa My, bad. You are right. I meant &quot;nil&quot;"}, {"owner": {"reputation": 55, "user_id": 5505351, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/a7422e44d18fa2f175b266e3dc52d976?s=128&d=identicon&r=PG&f=1", "display_name": "Emmanuel Orozco", "link": "https://stackoverflow.com/users/5505351/emmanuel-orozco"}, "reply_to_user": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1468349440, "post_id": 38336549, "comment_id": 64087566, "body": "@mudasobwa It is ruby :-)"}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1468351208, "post_id": 38336549, "comment_id": 64088608, "body": "Do you want Ruby or JSON?"}], "answers": [{"comments": [{"owner": {"reputation": 55, "user_id": 5505351, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/a7422e44d18fa2f175b266e3dc52d976?s=128&d=identicon&r=PG&f=1", "display_name": "Emmanuel Orozco", "link": "https://stackoverflow.com/users/5505351/emmanuel-orozco"}, "edited": false, "score": 0, "creation_date": 1468355729, "post_id": 38337041, "comment_id": 64091142, "body": "Thanks! It works like a charm on Ruby. But when I try to use it on Rails. I have the error: &quot;can&#39;t write unknown attribute <code>submenus</code>&quot;.  Any chance you can migrate the code to rails?  Thanks!!!"}, {"owner": {"reputation": 55, "user_id": 5505351, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/a7422e44d18fa2f175b266e3dc52d976?s=128&d=identicon&r=PG&f=1", "display_name": "Emmanuel Orozco", "link": "https://stackoverflow.com/users/5505351/emmanuel-orozco"}, "edited": false, "score": 0, "creation_date": 1468359104, "post_id": 38337041, "comment_id": 64092843, "body": "Never mind! I figure it out using the as_json method. To transform all the ActiveRecord class to array and then process it. You are awesome!"}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1468366141, "post_id": 38337041, "comment_id": 64095135, "body": "Your changed the keys from symbols to strings and are missing the key-value pair <code>:active=&gt; true</code> in your hash <code>{&quot;id&quot;=&gt;5, &quot;title&quot;=&gt;&quot;Torneo&quot;, &quot;parent_menu_id&quot;=&gt;2}</code>."}], "tags": [], "owner": {"reputation": 52334, "user_id": 702638, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/892f65bc0a8a0949ab88598de7d83cab?s=128&d=identicon&r=PG", "display_name": "Hunter McMillen", "link": "https://stackoverflow.com/users/702638/hunter-mcmillen"}, "is_accepted": true, "score": 0, "last_activity_date": 1468350446, "creation_date": 1468350446, "answer_id": 38337041, "question_id": 38336549, "link": "https://stackoverflow.com/questions/38336549/move-object-to-a-parent-object-in-ruby/38337041#38337041", "title": "Move object to a parent object in ruby", "body": "<pre><code>#!ruby\n\nrequire 'pp'\n\nobjects = [\n  {\n    \"id\"             =&gt; 2,\n    \"title\"          =&gt; \"LA COPA\",\n    \"parent_menu_id\" =&gt; nil\n  },\n  {\n    \"id\"             =&gt; 3,\n    \"title\"          =&gt; \"CALENDARIO\",\n    \"parent_menu_id\" =&gt; nil\n  },\n  {\n    \"id\"             =&gt; 5,\n    \"title\"          =&gt; \"Torneo\",\n    \"parent_menu_id\" =&gt; 2\n  },\n  {\n    \"id\"             =&gt; 6,\n    \"title\"          =&gt; \"Nice\",\n    \"parent_menu_id\" =&gt; 2\n  }\n]\n\nobjects.collect! do |child|\n  if not child[\"parent_menu_id\"].nil? then\n    parents = objects.select{|o| o[\"id\"] == child[\"parent_menu_id\"]}\n    parents.each do |pr|\n      pr[\"submenus\"] ||= []\n      pr[\"submenus\"] &lt;&lt; child\n    end\n  end\n  child\nend.select!{|o| o[\"parent_menu_id\"].nil? }\npp objects\n</code></pre>\n\n<p>output:</p>\n\n<pre><code>[{\"id\"=&gt;2,\n  \"title\"=&gt;\"LA COPA\",\n  \"parent_menu_id\"=&gt;nil,\n  \"submenus\"=&gt;\n   [{\"id\"=&gt;5, \"title\"=&gt;\"Torneo\", \"parent_menu_id\"=&gt;2},\n    {\"id\"=&gt;6, \"title\"=&gt;\"Nice\", \"parent_menu_id\"=&gt;2}]},\n {\"id\"=&gt;3, \"title\"=&gt;\"CALENDARIO\", \"parent_menu_id\"=&gt;nil}]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": false, "score": 0, "last_activity_date": 1468365383, "last_edit_date": 1468365383, "creation_date": 1468365078, "answer_id": 38340247, "question_id": 38336549, "link": "https://stackoverflow.com/questions/38336549/move-object-to-a-parent-object-in-ruby/38340247#38340247", "title": "Move object to a parent object in ruby", "body": "<pre><code>arr = [\n  {\n   id: 2,\n   title: \"LA COPA\",\n   parent_menu_id: nil\n  },\n  {\n    id: 3,\n    title: \"CALENDARIO\",\n    parent_menu_id: nil\n  },\n  {\n    id: 5,\n    title: \"Torneo\",\n    parent_menu_id: 2\n  },\n  {\n    id: 6,\n    title: \"Nice\",\n    parent_menu_id: 2\n  }\n]\n</code></pre>\n\n<p></p>    \n\n<pre><code>parents, children = arr.partition { |g| g[:parent_menu_id].nil? }\n  #= [[{:id=&gt;2, :title=&gt;\"LA COPA\", :parent_menu_id=&gt;nil},\n  #     {:id=&gt;3, :title=&gt;\"CALENDARIO\", :parent_menu_id=&gt;nil}],\n  #    [{:id=&gt;5, :title=&gt;\"Torneo\", :parent_menu_id=&gt;2},\n  #     {:id=&gt;6, :title=&gt;\"Nice\", :parent_menu_id=&gt;2}]]\n\nchildren.each do |child|\n  parent_id = child[:parent_menu_id]\n  parent = parents.find { |p| p[:id] == parent_id }\n  if parent.key?(:submenus)\n    parent[:submenus] &lt;&lt; child\n  else\n    parent[:submenus] = [child.merge(active: true)]\n  end\nend\n\nparents\n  #=&gt; [{:id=&gt;2, :title=&gt;\"LA COPA\", :parent_menu_id=&gt;nil,\n  #     :submenus=&gt;[{:id=&gt;5, :title=&gt;\"Torneo\", :parent_menu_id=&gt;2, :active=&gt;true},\n  #                 {:id=&gt;6, :title=&gt;\"Nice\", :parent_menu_id=&gt;2}]},\n  #    {:id=&gt;3, :title=&gt;\"CALENDARIO\", :parent_menu_id=&gt;nil}] \n</code></pre>\n\n<p>Notes:</p>\n\n<ul>\n<li><code>\"id\": 2</code> is redundant. Just use <code>id: 2</code>. You only need quotes when the symbol is comprised of more than one word.</li>\n<li>I assumed that the key value pair <code>active: true</code> is only present for the first element of the value (array) of <code>:submenus</code>.</li>\n</ul>\n"}], "owner": {"reputation": 55, "user_id": 5505351, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/a7422e44d18fa2f175b266e3dc52d976?s=128&d=identicon&r=PG&f=1", "display_name": "Emmanuel Orozco", "link": "https://stackoverflow.com/users/5505351/emmanuel-orozco"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 94, "favorite_count": 0, "accepted_answer_id": 38337041, "answer_count": 2, "score": 0, "last_activity_date": 1468365383, "creation_date": 1468348676, "last_edit_date": 1468349426, "question_id": 38336549, "link": "https://stackoverflow.com/questions/38336549/move-object-to-a-parent-object-in-ruby", "title": "Move object to a parent object in ruby", "body": "<p>I have an array of objects like this:</p>\n\n<pre><code>[\n  {\n   \"id\": 2,\n   \"title\": \"LA COPA\",\n   \"parent_menu_id\": nil\n  },\n  {\n   \"id\": 3,\n   \"title\": \"CALENDARIO\",\n   \"parent_menu_id\": nil\n  },\n  {\n   \"id\": 5,\n   \"title\": \"Torneo\",\n   \"parent_menu_id\": 2\n  },\n  {\n   \"id\": 6,\n   \"title\": \"Nice\",\n   \"parent_menu_id\": 2\n  }\n]\n</code></pre>\n\n<p>This is the structure of a menu. </p>\n\n<p>Each object is an menu item.</p>\n\n<p>If the key \"parent_menu_id\" is nil, it means that the item is a parent menu. </p>\n\n<p>If it has a value, is a children. I.E the third item means that item <strong>id: 5 is child of item id:2.</strong></p>\n\n<p>This is the desired output:</p>\n\n<pre><code>[\n  {\n   \"id\": 2,\n   \"title\": \"LA COPA\",\n   \"active\": true,\n   \"parent_menu_id\": nil,\n   \"submenus\":[\n     {\n       \"id\": 5,\n       \"title\": \"Torneo\",\n       \"active\": true,\n       \"parent_menu_id\": 2\n     },\n     {\n       \"id\": 6,\n       \"title\": \"Nice\",\n       \"parent_menu_id\": 2\n     }\n   ]\n  },\n  {\n   \"id\": 3,\n   \"title\": \"CALENDARIO\",\n   \"active\": true,\n   \"parent_menu_id\": nil\n  }\n]\n</code></pre>\n\n<p>I know the algorithm:</p>\n\n<ol>\n<li><p>if pareny_menu_id is different than nill search the key id  == parent_menu_id</p></li>\n<li><p>If submenu key is not present, create it.</p></li>\n<li><p>Move the child item to the parent.</p></li>\n<li><p>Then delete the child item from base location.</p></li>\n</ol>\n\n<p>But I am not sure about the methods to use..</p>\n\n<p>Any ideas?</p>\n\n<p>Cheers!</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "rest", "ruby-on-rails-4"], "comments": [{"owner": {"reputation": 2893, "user_id": 511374, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2b92928f3f39951cc97dc02a59fbb117?s=128&d=identicon&r=PG", "display_name": "Sergey Moiseev", "link": "https://stackoverflow.com/users/511374/sergey-moiseev"}, "edited": false, "score": 0, "creation_date": 1468347833, "post_id": 38336271, "comment_id": 64086738, "body": "As answer contains in your question, I recommend you to drop that question. <code>config&#47;initializers&#47;forecast_io.rb</code> in your second link."}, {"owner": {"reputation": 13, "user_id": 6534317, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hP5JJ.png?s=128&g=1", "display_name": "David Ruess", "link": "https://stackoverflow.com/users/6534317/david-ruess"}, "reply_to_user": {"reputation": 2893, "user_id": 511374, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2b92928f3f39951cc97dc02a59fbb117?s=128&d=identicon&r=PG", "display_name": "Sergey Moiseev", "link": "https://stackoverflow.com/users/511374/sergey-moiseev"}, "edited": false, "score": 0, "creation_date": 1468429553, "post_id": 38336271, "comment_id": 64127735, "body": "Are you saying I should change the question? Or that I had the answer in the question?"}, {"owner": {"reputation": 2893, "user_id": 511374, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2b92928f3f39951cc97dc02a59fbb117?s=128&d=identicon&r=PG", "display_name": "Sergey Moiseev", "link": "https://stackoverflow.com/users/511374/sergey-moiseev"}, "edited": false, "score": 0, "creation_date": 1468429745, "post_id": 38336271, "comment_id": 64127871, "body": "The problem with your question is that you don&#39;t get how boot process (initializers to be specific) in Rails working and yet you presenting a link in your question, which if you follow it exactly as it states will give you working app. So question makes no sense for me."}, {"owner": {"reputation": 13, "user_id": 6534317, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hP5JJ.png?s=128&g=1", "display_name": "David Ruess", "link": "https://stackoverflow.com/users/6534317/david-ruess"}, "reply_to_user": {"reputation": 2893, "user_id": 511374, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2b92928f3f39951cc97dc02a59fbb117?s=128&d=identicon&r=PG", "display_name": "Sergey Moiseev", "link": "https://stackoverflow.com/users/511374/sergey-moiseev"}, "edited": false, "score": 0, "creation_date": 1468433752, "post_id": 38336271, "comment_id": 64130338, "body": "You&#39;re right, I don&#39;t understand how boot process and initializers work. I&#39;ve thrown myself in and am trying to learn as fast as possible.  It helped me to learn that placing a gem in my Gemfile already requires it by default so I don&#39;t have to type &#39;require etc...&#39; Thanks for the input, and my apologies for the question."}, {"owner": {"reputation": 2893, "user_id": 511374, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2b92928f3f39951cc97dc02a59fbb117?s=128&d=identicon&r=PG", "display_name": "Sergey Moiseev", "link": "https://stackoverflow.com/users/511374/sergey-moiseev"}, "edited": false, "score": 0, "creation_date": 1468433825, "post_id": 38336271, "comment_id": 64130385, "body": "<a href=\"http://guides.rubyonrails.org/initialization.html\" rel=\"nofollow noreferrer\">guides.rubyonrails.org/initialization.html</a>"}], "answers": [{"tags": [], "owner": {"reputation": 5118, "user_id": 3893710, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/YaxSL.jpg?s=128&g=1", "display_name": "oreoluwa", "link": "https://stackoverflow.com/users/3893710/oreoluwa"}, "is_accepted": true, "score": 0, "last_activity_date": 1468391449, "last_edit_date": 1468391449, "creation_date": 1468348467, "answer_id": 38336498, "question_id": 38336271, "link": "https://stackoverflow.com/questions/38336271/ruby-on-rails-in-what-file-do-i-add-the-following-require-forecast-io/38336498#38336498", "title": "Ruby on Rails - In what file do I add the following: require &#39;forecast_io&#39;?", "body": "<p>In Rails, placing a gem in your Gemfile already requires the gem by default, unless explicitly stated to ignore.</p>\n\n<p>If you're still bothered about it though, you could add the <code>require</code> option to your gem as such:</p>\n\n<pre><code>gem 'forecast_io', require: 'forecast_io'\n</code></pre>\n\n<p>Now, for the rest of the configurations mentioned, you can create a file in your initializers and the following:</p>\n\n<pre><code>#config/initializers/forecast_io.rb\n\nForecastIO.configure do |configuration|\n  configuration.api_key = 'this-is-your-api-key'\nend\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 6534317, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hP5JJ.png?s=128&g=1", "display_name": "David Ruess", "link": "https://stackoverflow.com/users/6534317/david-ruess"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 85, "favorite_count": 0, "accepted_answer_id": 38336498, "answer_count": 1, "score": 1, "last_activity_date": 1468391449, "creation_date": 1468347575, "question_id": 38336271, "link": "https://stackoverflow.com/questions/38336271/ruby-on-rails-in-what-file-do-i-add-the-following-require-forecast-io", "title": "Ruby on Rails - In what file do I add the following: require &#39;forecast_io&#39;?", "body": "<p>Thanks for your help, </p>\n\n<p>I believe this is very simple but I can't figure it out. Following the instructions at <a href=\"https://github.com/darkskyapp/forecast-ruby\" rel=\"nofollow\">https://github.com/darkskyapp/forecast-ruby</a> - it tells me to not forget to add require 'forecast_io' - what file do I put this in? </p>\n\n<p>I've run a scaffold to set up a simple lat and lng, following this guide:\n<a href=\"https://campushippo.com/lessons/an-easy-way-to-implement-weather-forecasting-in-rails-9d10403\" rel=\"nofollow\">https://campushippo.com/lessons/an-easy-way-to-implement-weather-forecasting-in-rails-9d10403</a> but keep on getting method errors. So I think we are using different versions of Ruby &amp; Rails, and/or I'm placing this code in the wrong file, or wrong place. My question isn't about method errors, but just where to place this.</p>\n\n<p>I'm unsure whether or not to place it in /config/application.rb; create and place the code in /config/forecast_io.rb; or to create and place it in /config/initializers/forecast_io.rb; or if it's supposed to go somewhere else entirely. </p>\n\n<p>I've looked at the api docs, the ruby wrapper read me, and also have read other tutorials (they won't let me post more links, otherwise I would list them) - one is from hackpsu.westarate that is kind of different with using sinatra, went through the Treehouse tutorial on Rails scaffolding, and began their tutorial on creating an API to better understand REST, and have looked at other rails projects to see how they incorporate external API's, so I'm in the thick of it, and am banging my head against the wall because it seems so simple, but I'm not seeing it yet. </p>\n\n<p>Thanks for your help! \nDavid</p>\n"}]