[{"tags": ["ruby", "ruby-on-rails-4", "arguments"], "comments": [{"owner": {"reputation": 167912, "user_id": 240443, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/495d675e3bc42ed1dee469e2ce701f1b?s=128&d=identicon&r=PG", "display_name": "Amadan", "link": "https://stackoverflow.com/users/240443/amadan"}, "edited": false, "score": 0, "creation_date": 1438820563, "post_id": 31844646, "comment_id": 51611165, "body": "Should <code>location.location(user)</code> be <code>@location.location(user)</code>?"}, {"owner": {"reputation": 11, "user_id": 5191772, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9f9f57cd2f89f027f41f3633b9c8fae1?s=128&d=identicon&r=PG&f=1", "display_name": "Ishaan Sehgal", "link": "https://stackoverflow.com/users/5191772/ishaan-sehgal"}, "reply_to_user": {"reputation": 167912, "user_id": 240443, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/495d675e3bc42ed1dee469e2ce701f1b?s=128&d=identicon&r=PG", "display_name": "Amadan", "link": "https://stackoverflow.com/users/240443/amadan"}, "edited": false, "score": 0, "creation_date": 1438820827, "post_id": 31844646, "comment_id": 51611221, "body": "When I do that I get an error saying this: undefined method `location&#39; for &quot;2603-2633%20Ewing%20Avenue,%20Evanston,%20IL%2060201,%20USA&zwnj;&#8203;&quot;:String   The string above would be the coordinates I gave it."}, {"owner": {"reputation": 167912, "user_id": 240443, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/495d675e3bc42ed1dee469e2ce701f1b?s=128&d=identicon&r=PG", "display_name": "Amadan", "link": "https://stackoverflow.com/users/240443/amadan"}, "edited": false, "score": 0, "creation_date": 1438820903, "post_id": 31844646, "comment_id": 51611247, "body": "I was not suggesting, but wondering whether you even had a variable <code>location</code>. I now see it&#39;s a helper method. In that case, that is definitely the source of the problem. <code>location</code> calls the helper with 0 arguments; then <code>.location(user)</code> calls a method on whatever <code>location</code> would return. If you just want to call the helper, <code>location(user)</code> should suffice."}, {"owner": {"reputation": 11, "user_id": 5191772, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9f9f57cd2f89f027f41f3633b9c8fae1?s=128&d=identicon&r=PG&f=1", "display_name": "Ishaan Sehgal", "link": "https://stackoverflow.com/users/5191772/ishaan-sehgal"}, "reply_to_user": {"reputation": 167912, "user_id": 240443, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/495d675e3bc42ed1dee469e2ce701f1b?s=128&d=identicon&r=PG", "display_name": "Amadan", "link": "https://stackoverflow.com/users/240443/amadan"}, "edited": false, "score": 0, "creation_date": 1438821157, "post_id": 31844646, "comment_id": 51611304, "body": "I just specified data variable so that their is only one API request and so that code is dry when I call: &lt;!-- &lt;h1&gt;You are &lt;%#=data[:distance]%&gt; far from &lt;%#=data[:duration]%&gt; &lt;/h1&gt; --&gt;"}, {"owner": {"reputation": 167912, "user_id": 240443, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/495d675e3bc42ed1dee469e2ce701f1b?s=128&d=identicon&r=PG", "display_name": "Amadan", "link": "https://stackoverflow.com/users/240443/amadan"}, "edited": false, "score": 0, "creation_date": 1438821211, "post_id": 31844646, "comment_id": 51611321, "body": "Sorry, I just realised something and rewrote my comment."}, {"owner": {"reputation": 11, "user_id": 5191772, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9f9f57cd2f89f027f41f3633b9c8fae1?s=128&d=identicon&r=PG&f=1", "display_name": "Ishaan Sehgal", "link": "https://stackoverflow.com/users/5191772/ishaan-sehgal"}, "reply_to_user": {"reputation": 167912, "user_id": 240443, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/495d675e3bc42ed1dee469e2ce701f1b?s=128&d=identicon&r=PG", "display_name": "Amadan", "link": "https://stackoverflow.com/users/240443/amadan"}, "edited": false, "score": 0, "creation_date": 1438821288, "post_id": 31844646, "comment_id": 51611330, "body": "So i would say helper_method :location(user)? Because that gives me error. Again srry i am very new to rails"}, {"owner": {"reputation": 167912, "user_id": 240443, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/495d675e3bc42ed1dee469e2ce701f1b?s=128&d=identicon&r=PG", "display_name": "Amadan", "link": "https://stackoverflow.com/users/240443/amadan"}, "edited": false, "score": 0, "creation_date": 1438821334, "post_id": 31844646, "comment_id": 51611345, "body": "No, just <code>location(user)</code>, if it is correctly registered as a helper method; that is the whole point of them, that you can just call them from views."}, {"owner": {"reputation": 11, "user_id": 5191772, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9f9f57cd2f89f027f41f3633b9c8fae1?s=128&d=identicon&r=PG&f=1", "display_name": "Ishaan Sehgal", "link": "https://stackoverflow.com/users/5191772/ishaan-sehgal"}, "reply_to_user": {"reputation": 167912, "user_id": 240443, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/495d675e3bc42ed1dee469e2ce701f1b?s=128&d=identicon&r=PG", "display_name": "Amadan", "link": "https://stackoverflow.com/users/240443/amadan"}, "edited": false, "score": 0, "creation_date": 1438821724, "post_id": 31844646, "comment_id": 51611431, "body": "Dude it works! But I cant quite wrap my head around it. What is the helper method doing in this case?"}, {"owner": {"reputation": 167912, "user_id": 240443, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/495d675e3bc42ed1dee469e2ce701f1b?s=128&d=identicon&r=PG", "display_name": "Amadan", "link": "https://stackoverflow.com/users/240443/amadan"}, "edited": false, "score": 0, "creation_date": 1438821771, "post_id": 31844646, "comment_id": 51611446, "body": "I don&#39;t understand the question. It&#39;s doing what you said it should do in <code>def location ... end</code>. What else? Or, do you mean what <a href=\"http://apidock.com/rails/ActionController/Helpers/ClassMethods/helper_method\" rel=\"nofollow noreferrer\"><code>helper_method</code></a> is doing? (Which would be, declaring <code>location</code> to be a helper, thus available as a function in views.)"}, {"owner": {"reputation": 11, "user_id": 5191772, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9f9f57cd2f89f027f41f3633b9c8fae1?s=128&d=identicon&r=PG&f=1", "display_name": "Ishaan Sehgal", "link": "https://stackoverflow.com/users/5191772/ishaan-sehgal"}, "reply_to_user": {"reputation": 167912, "user_id": 240443, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/495d675e3bc42ed1dee469e2ce701f1b?s=128&d=identicon&r=PG", "display_name": "Amadan", "link": "https://stackoverflow.com/users/240443/amadan"}, "edited": false, "score": 0, "creation_date": 1438822173, "post_id": 31844646, "comment_id": 51611518, "body": "Ok I get it. So just to clarify please help me understand how: data = location(user) works while date = @location.location(user) didn&#39;t. Srry again for being so dumb."}, {"owner": {"reputation": 167912, "user_id": 240443, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/495d675e3bc42ed1dee469e2ce701f1b?s=128&d=identicon&r=PG", "display_name": "Amadan", "link": "https://stackoverflow.com/users/240443/amadan"}, "edited": false, "score": 0, "creation_date": 1438822302, "post_id": 31844646, "comment_id": 51611549, "body": "<code>@location.location(user)</code> calls a <code>location</code> method on the <code>@location</code> object (which is presumably a model, and it obviously doesn&#39;t define such a method, given your error message above). <code>location(user)</code> calls the <code>location</code> helper. <code>location.location(user)</code> is equivalent to <code>location().location(user)</code> - calls <code>location</code> helper with no arguments, then calls <code>location</code> method on the result (or would have, if there was no error)."}, {"owner": {"reputation": 11, "user_id": 5191772, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9f9f57cd2f89f027f41f3633b9c8fae1?s=128&d=identicon&r=PG&f=1", "display_name": "Ishaan Sehgal", "link": "https://stackoverflow.com/users/5191772/ishaan-sehgal"}, "reply_to_user": {"reputation": 167912, "user_id": 240443, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/495d675e3bc42ed1dee469e2ce701f1b?s=128&d=identicon&r=PG", "display_name": "Amadan", "link": "https://stackoverflow.com/users/240443/amadan"}, "edited": false, "score": 0, "creation_date": 1438822588, "post_id": 31844646, "comment_id": 51611627, "body": "Thanks @Amadan that was very helpful! It works!"}], "owner": {"reputation": 11, "user_id": 5191772, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9f9f57cd2f89f027f41f3633b9c8fae1?s=128&d=identicon&r=PG&f=1", "display_name": "Ishaan Sehgal", "link": "https://stackoverflow.com/users/5191772/ishaan-sehgal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 196, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1438818664, "creation_date": 1438818664, "question_id": 31844646, "link": "https://stackoverflow.com/questions/31844646/wrong-number-of-arguments-0-for-1-rails", "title": "Wrong number of arguments (0 for 1) rails", "body": "<p>My goal is to have a user type in coordinates (longitude and latitude) into a form. The form takes response in params hash and uses google geocoder API to specify a location. I then want this location to be compared with another users location with a distance matrix API which would find distance between the users. </p>\n\n<p>Here are my routes:</p>\n\n<pre><code>get \"/users/:id/runwith\" =&gt; 'application#runwith'\nget \"/reversegeocode\" =&gt; 'application#reversegeocode'\n</code></pre>\n\n<p>Here is controller: </p>\n\n<pre><code>def runwith \nend\ndef reversegeocode\n@users = User.all\nlat = params['longitude']\nlong = params['latitude']\nurl = \"https://maps.googleapis.com/maps/api/geocode/json?latlng=#{lat},#{long}\"\nresult = open(url).read\nparsed_result = JSON.parse(result)\n@location = parsed_result['results'][0]['formatted_address'].gsub(\" \", \"%20\")\nend\n</code></pre>\n\n<p>My custom method:</p>\n\n<pre><code>private\ndef location some_runner\n@users = User.all\ndistance_url = \"https://maps.googleapis.com/maps/api/distancematrix/json?origins=#{@location}&amp;destinations=#{some_runner.location}\"\ndistance_parsed_result = JSON.parse(open(distance_url).read)\n{distance: distance_parsed_result['rows'][0][\"elements\"][0][\"distance\"][\"text\"], duration: distance_parsed_result['rows'][0][\"elements\"][0][\"duration\"][\"text\"]}\nend\nhelper_method :location\nend\n</code></pre>\n\n<p>My form html:</p>\n\n<pre><code>&lt;% if session[:user_id] %&gt;\n&lt;h1&gt; You are already logged in there is no need to specify your location &lt;/h1&gt;\n&lt;%else%&gt;\n\n&lt;h1&gt; Since you aren't logged in, where are you currently? &lt;/h1&gt; \n&lt;form action =\"/reversegeocode\"&gt;\n\n  Longitude:&lt;input name =\"longitude\" type =\"text\" placeholder=\"coordinates\"&gt;\n\n  Latitude:&lt;input name =\"latitude\" type =\"text\" placeholder=\"coordinates\"&gt;\n\n  &lt;input type=\"submit\"&gt;\n\n&lt;/form&gt;\n\n\n&lt;%end%&gt;\n</code></pre>\n\n<p>My end result reversegeocode.html.erb:</p>\n\n<pre><code>&lt;% @users.each do |user| %&gt;\n&lt;h1&gt; &lt;%=@location.gsub(\"%20\",\" \")%&gt; &lt;/h1&gt;\n\n&lt;% data = location.location(user) %&gt;\n\n&lt;!-- &lt;h1&gt;You are &lt;%#=data[:distance]%&gt; far from &lt;%#=data[:duration]%&gt; &lt;/h1&gt; --&gt;\n&lt;%end%&gt;\n</code></pre>\n\n<p>However I keep getting the error wrong number of arguments (0 for 1), def location some_runner. Why??</p>\n"}, {"tags": ["javascript", "ruby-on-rails", "ruby", "ajax", "social-media-like"], "comments": [{"owner": {"reputation": 4805, "user_id": 2869337, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/64c9080ad58924663e8bd4af5046a10a?s=128&d=identicon&r=PG", "display_name": "thedanotto", "link": "https://stackoverflow.com/users/2869337/thedanotto"}, "edited": false, "score": 0, "creation_date": 1438820173, "post_id": 31844643, "comment_id": 51611085, "body": "What exactly are people liking?"}, {"owner": {"reputation": 513, "user_id": 4963727, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/6524275df0f010968860fb814c71d720?s=128&d=identicon&r=PG&f=1", "display_name": "Jill", "link": "https://stackoverflow.com/users/4963727/jill"}, "reply_to_user": {"reputation": 4805, "user_id": 2869337, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/64c9080ad58924663e8bd4af5046a10a?s=128&d=identicon&r=PG", "display_name": "thedanotto", "link": "https://stackoverflow.com/users/2869337/thedanotto"}, "edited": false, "score": 0, "creation_date": 1438820883, "post_id": 31844643, "comment_id": 51611238, "body": "A model named &quot;Images&quot;"}], "answers": [{"tags": [], "owner": {"reputation": 4805, "user_id": 2869337, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/64c9080ad58924663e8bd4af5046a10a?s=128&d=identicon&r=PG", "display_name": "thedanotto", "link": "https://stackoverflow.com/users/2869337/thedanotto"}, "is_accepted": true, "score": 1, "last_activity_date": 1438823954, "creation_date": 1438823954, "answer_id": 31845304, "question_id": 31844643, "link": "https://stackoverflow.com/questions/31844643/adding-a-like-button-which-doesnt-require-user-model/31845304#31845304", "title": "Adding a Like Button which doesn&#39;t require User Model", "body": "<p>I'd create another model called <code>Like</code> and then create a <code>one to many association</code> between <code>Image</code> and <code>Like</code>.</p>\n\n<pre><code>rails g resource Like image_id:integer\n</code></pre>\n\n<p>then update your database by running</p>\n\n<pre><code>rake db:migrate\n</code></pre>\n\n<p>then you'll want to create the association.</p>\n\n<pre><code># like.rb\nclass Like &lt; ActiveRecord::Base\n  belongs_to :image\nend\n\n# image.rb\nclass Image &lt; ActiveRecord::Base\n   has_many :likes\nend\n</code></pre>\n\n<p>Then when someone clicks on the like button, you'll want to create a <code>new Like</code> with the <code>id</code> of the <code>Image</code></p>\n\n<p>I hope this helps.</p>\n"}, {"tags": [], "owner": {"reputation": 382, "user_id": 1399789, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/aa44d07d6d2ec8a487410282121ac2bb?s=128&d=identicon&r=PG", "display_name": "kdavh", "link": "https://stackoverflow.com/users/1399789/kdavh"}, "is_accepted": false, "score": 3, "last_activity_date": 1438824228, "creation_date": 1438824228, "answer_id": 31845331, "question_id": 31844643, "link": "https://stackoverflow.com/questions/31844643/adding-a-like-button-which-doesnt-require-user-model/31845331#31845331", "title": "Adding a Like Button which doesn&#39;t require User Model", "body": "<p>If you want a very simple system where anyone can upvote an 'image', you can put a simple counter on each image.</p>\n\n<p>For example, assuming you're using a sql flavor database that has a table called <code>images</code> right now, make a migration with a <code>change</code> method something like this:</p>\n\n<pre><code>def change\n  add_column :images, :likes, :integer, default: 0\nend\n</code></pre>\n\n<p>Then in your <code>ImagesController</code> or whatever you're calling it, make an action such as</p>\n\n<pre><code>def upvote\n  image = Image.find(params[:id]) # in Rails 4, using strong params, this would look a bit different.\n  image.update_attributes(likes: image.likes + 1)\n  render json: image\nend\n</code></pre>\n\n<p>There is a lot I'm leaving out, but you may get the idea from this that upvoting without users is actually extremely simple.  It only gets complicated once you start trying to keep track of who liked what.</p>\n"}], "owner": {"reputation": 513, "user_id": 4963727, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/6524275df0f010968860fb814c71d720?s=128&d=identicon&r=PG&f=1", "display_name": "Jill", "link": "https://stackoverflow.com/users/4963727/jill"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 113, "favorite_count": 1, "accepted_answer_id": 31845304, "answer_count": 2, "score": 1, "last_activity_date": 1553951766, "creation_date": 1438818657, "last_edit_date": 1553951766, "question_id": 31844643, "link": "https://stackoverflow.com/questions/31844643/adding-a-like-button-which-doesnt-require-user-model", "title": "Adding a Like Button which doesn&#39;t require User Model", "body": "<p>I'm trying to add a like button to my rails site so I've looked at the acts_as_votable gem and the Active Record Reputation System gem. However, both of these require a User Model (I think), and I want to make the like button something that anyone can click whether they are signed in or not.</p>\n\n<p>Is there a way to make one of these gems function like that, or will I have to create the voting system from scratch? Also, if I do have to do it from scratch, some guidelines to approaching it would be helpful.</p>\n"}, {"tags": ["ruby", "hex", "base64", "uuid"], "comments": [{"owner": {"reputation": 4127, "user_id": 4231385, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d89a541a4609cafea3957e4cdfcca50f?s=128&d=identicon&r=PG&f=1", "display_name": "cremno", "link": "https://stackoverflow.com/users/4231385/cremno"}, "edited": false, "score": 1, "creation_date": 1438818330, "post_id": 31844321, "comment_id": 51610617, "body": "Can be done with <a href=\"http://ruby-doc.org/core/String.html#method-i-unpack\" rel=\"nofollow noreferrer\"><code>String#unpack</code></a> (<code>m</code> for Base64 and <code>H</code> for hex string) + <a href=\"http://ruby-doc.org/core/Array.html#method-i-join\" rel=\"nofollow noreferrer\"><code>Array#join</code></a> to add <code>-</code>."}, {"owner": {"reputation": 695, "user_id": 3075906, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/6678ec053acc2e593a5229b2f49e9850?s=128&d=identicon&r=PG&f=1", "display_name": "user3075906", "link": "https://stackoverflow.com/users/3075906/user3075906"}, "reply_to_user": {"reputation": 4127, "user_id": 4231385, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d89a541a4609cafea3957e4cdfcca50f?s=128&d=identicon&r=PG&f=1", "display_name": "cremno", "link": "https://stackoverflow.com/users/4231385/cremno"}, "edited": false, "score": 0, "creation_date": 1438820137, "post_id": 31844321, "comment_id": 51611082, "body": "But how do I split the string as per uuid pattern?"}, {"owner": {"reputation": 4127, "user_id": 4231385, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d89a541a4609cafea3957e4cdfcca50f?s=128&d=identicon&r=PG&f=1", "display_name": "cremno", "link": "https://stackoverflow.com/users/4231385/cremno"}, "edited": false, "score": 0, "creation_date": 1438820273, "post_id": 31844321, "comment_id": 51611105, "body": "<code>Each directive may be followed by a number, indicating the number of times to repeat with this directive.</code> E.g. <code>&quot;H8H4</code>&quot; to unpack the base64 <i>de</i>coded string to <code>[&quot;1562da96&quot;, &quot;9167&quot;]</code>."}], "answers": [{"comments": [{"owner": {"reputation": 2936, "user_id": 658651, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/2e2032cf85e31e19a6758b193782d686?s=128&d=identicon&r=PG", "display_name": "svoop", "link": "https://stackoverflow.com/users/658651/svoop"}, "edited": false, "score": 1, "creation_date": 1521468687, "post_id": 31844920, "comment_id": 85730395, "body": "Converting the (base64) string to  UUID should IMO shouldn&#39;t produce identical UUID for different strings, however, this solution does. Let&#39;s alter the last character in the string from K to L:  <code>&#39;FWLalpF2T5mmyxS03Q+hNQ0K&#39;.unpack(&quot;H8H4H4H4H12&quot;).join(&#39;-&#39;) == &#39;FWLalpF2T5mmyxS03Q+hNQ0L&#39;.unpack(&quot;H8H4H4H4H12&quot;).join(&#39;-&#39;) # =&gt; true</code>"}], "tags": [], "owner": {"reputation": 5292, "user_id": 2727267, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/0e7c773908a4f6095f63cb9553bbc7af?s=128&d=identicon&r=PG", "display_name": "Beartech", "link": "https://stackoverflow.com/users/2727267/beartech"}, "is_accepted": true, "score": 8, "last_activity_date": 1438829276, "last_edit_date": 1438829276, "creation_date": 1438820854, "answer_id": 31844920, "question_id": 31844321, "link": "https://stackoverflow.com/questions/31844321/how-to-convert-a-base64-encoded-string-to-uuid-format/31844920#31844920", "title": "How to convert a Base64 encoded string to UUID format", "body": "<p>I was familiar with <code>unpack</code> but this prompted me to learn the directive as pointed out by cremno. </p>\n\n<p>simplest form:</p>\n\n<pre><code>b64 = 'FWLalpF2T5mmyxS03Q+hNQ0K'\nb64.unpack(\"m0\").first.unpack(\"H8H4H4H4H12\").join('-')\n\n#=&gt; \"1562da96-9176-4f99-a6cb-14b4dd0fa135\"\n\nb64.unpack(\"m0\") \n</code></pre>\n\n<p>give us:</p>\n\n<pre><code>#=&gt; [\"\\x15b\\xDA\\x96\\x91vO\\x99\\xA6\\xCB\\x14\\xB4\\xDD\\x0F\\xA15\\r\\n\"]\n</code></pre>\n\n<p>which is an array so we use <code>.first</code> to grab the string and unpack again using the directive to format it in the 8-4-4-4-12 format:</p>\n\n<pre><code>b64.unpack(\"m0\").first.unpack(\"H8H4H4H4H12\")\n</code></pre>\n\n<p>gives us:</p>\n\n<pre><code>#=&gt; [\"1562da96\", \"9176\", \"4f99\", \"a6cb\", \"14b4dd0fa135\"]\n</code></pre>\n\n<p>an array of strings, so now we just join it with the <code>-</code>:</p>\n\n<pre><code>b64.unpack(\"m0\").first.unpack(\"H8H4H4H4H12\").join('-')\n\n#=&gt; \"1562da96-9176-4f99-a6cb-14b4dd0fa135\"\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2936, "user_id": 658651, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/2e2032cf85e31e19a6758b193782d686?s=128&d=identicon&r=PG", "display_name": "svoop", "link": "https://stackoverflow.com/users/658651/svoop"}, "is_accepted": false, "score": 3, "last_activity_date": 1521471270, "last_edit_date": 1521471270, "creation_date": 1521470739, "answer_id": 49365694, "question_id": 31844321, "link": "https://stackoverflow.com/questions/31844321/how-to-convert-a-base64-encoded-string-to-uuid-format/49365694#49365694", "title": "How to convert a Base64 encoded string to UUID format", "body": "<p><strong>OOPS</strong></p>\n\n<p>The accepted answer has a flaw:</p>\n\n<pre><code>b64 = 'FWLalpF2T5mmyxS03Q+hNQ0K'\nb64.unpack(\"m0\").first.unpack(\"H8H4H4H4H12\").join('-')\n# =&gt; \"1562da96-9176-4f99-a6cb-14b4dd0fa135\"\n</code></pre>\n\n<p>Changing the last char in the b64 string results in the same UUID:</p>\n\n<pre><code>b64 = 'FWLalpF2T5mmyxS03Q+hNQ0L'\nb64.unpack(\"m0\").first.unpack(\"H8H4H4H4H12\").join('-')\n# =&gt; \"1562da96-9176-4f99-a6cb-14b4dd0fa135\"\n</code></pre>\n\n<p>To prevent this, you might want to hash your input (base64 or anything else) to the correct length e.g. with MD5:</p>\n\n<pre><code>require \"digest\"\nb64 = 'FWLalpF2T5mmyxS03Q+hNQ0K'\nDigest::MD5.hexdigest(b64).unpack(\"a8a4a4a4a12\").join('-')\n# =&gt; \"df71c785-6552-a977-e0ac-8edb8fd63f6f\"\n</code></pre>\n\n<p>Now the full input is relevant, altering the last char results in a different UUID:</p>\n\n<pre><code>require \"digest\"\nb64 = 'FWLalpF2T5mmyxS03Q+hNQ0L'\nDigest::MD5.hexdigest(s).unpack(\"a8a4a4a4a12\").join('-')\n# =&gt; \"2625f170-d05a-f65d-38ff-5d9a7a972382\"\n</code></pre>\n"}], "owner": {"reputation": 695, "user_id": 3075906, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/6678ec053acc2e593a5229b2f49e9850?s=128&d=identicon&r=PG&f=1", "display_name": "user3075906", "link": "https://stackoverflow.com/users/3075906/user3075906"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2454, "favorite_count": 1, "accepted_answer_id": 31844920, "answer_count": 2, "score": 4, "last_activity_date": 1521471270, "creation_date": 1438816420, "last_edit_date": 1438827556, "question_id": 31844321, "link": "https://stackoverflow.com/questions/31844321/how-to-convert-a-base64-encoded-string-to-uuid-format", "title": "How to convert a Base64 encoded string to UUID format", "body": "<p>How can I convert a Base64 encoded string to a hex encoded string with dashes(basically to uuid format)?</p>\n\n<p>For example if I have </p>\n\n<pre><code>'FWLalpF2T5mmyxS03Q+hNQ0K' \n</code></pre>\n\n<p>then how can I convert it to:</p>\n\n<pre><code>1562da96-9176-4f99-a6cb-14b4dd0fa135\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "rspec", "devise", "devise-invitable"], "answers": [{"comments": [{"owner": {"reputation": 2071, "user_id": 1499260, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/cf6ki.jpg?s=128&g=1", "display_name": "jackerman09", "link": "https://stackoverflow.com/users/1499260/jackerman09"}, "edited": false, "score": 0, "creation_date": 1438876376, "post_id": 31845850, "comment_id": 51640235, "body": "Thanks, I will try this out"}, {"owner": {"reputation": 4001, "user_id": 1245380, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/IuBwG.png?s=128&g=1", "display_name": "Stratus3D", "link": "https://stackoverflow.com/users/1245380/stratus3d"}, "edited": false, "score": 0, "creation_date": 1508000377, "post_id": 31845850, "comment_id": 80440178, "body": "This doesn&#39;t work for me. Once I&#39;ve got the user in my rspec test the invitation_accepted_at attribute is nil in the object as well as in the database."}], "tags": [], "owner": {"reputation": 5008, "user_id": 1387338, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/e030cb95a6159e7996c4264ffd38f010?s=128&d=identicon&r=PG", "display_name": "steakchaser", "link": "https://stackoverflow.com/users/1387338/steakchaser"}, "is_accepted": false, "score": 1, "last_activity_date": 1438828110, "creation_date": 1438828110, "answer_id": 31845850, "question_id": 31844295, "link": "https://stackoverflow.com/questions/31844295/creating-and-logging-in-a-user-in-rspec-when-using-devise-invitable/31845850#31845850", "title": "Creating and logging in a user in RSpec when using Devise_Invitable", "body": "<p>I would try setting the <code>invitation_accepted_at</code> attribute in your factory.  This should bypass devise_invitable when you try to login (or whatever) in your spec.</p>\n\n<pre><code>factory :user do\n  email\n  invitation_accepted_at { Time.zone.now }\n  password \"secret\"\nend\n</code></pre>\n"}], "owner": {"reputation": 2071, "user_id": 1499260, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/cf6ki.jpg?s=128&g=1", "display_name": "jackerman09", "link": "https://stackoverflow.com/users/1499260/jackerman09"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 224, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1438828110, "creation_date": 1438816268, "question_id": 31844295, "link": "https://stackoverflow.com/questions/31844295/creating-and-logging-in-a-user-in-rspec-when-using-devise-invitable", "title": "Creating and logging in a user in RSpec when using Devise_Invitable", "body": "<p>How can I create a user and log it in when testing with RSpec when using <code>devise_invitable</code>? Is it possible to have a user setup and logged in without sending/testing the emailing of the invitation? Is it possible to do this with FactoryGirl?</p>\n\n<p>I am using Rails 4.1 and Ruby 2.1.</p>\n\n<p>Thanks!</p>\n"}, {"tags": ["ruby", "string", "url"], "comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "reply_to_user": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 1, "creation_date": 1438821404, "post_id": 31843796, "comment_id": 51611360, "body": "You are looking at the problem the wrong way. What you really want to do is append a subdirectory and modify the file name. One way is to find the last forward slash and work from there, but that is not the only way to approach it, as @sawa demonstrates."}], "answers": [{"tags": [], "owner": {"reputation": 6190, "user_id": 5029266, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/7d4922cf09a8b3d3195cd4d848091ba3?s=128&d=identicon&r=PG", "display_name": "EugZol", "link": "https://stackoverflow.com/users/5029266/eugzol"}, "is_accepted": false, "score": 0, "last_activity_date": 1438813594, "creation_date": 1438813594, "answer_id": 31843857, "question_id": 31843796, "link": "https://stackoverflow.com/questions/31843796/cleanest-way-to-inject-into-string/31843857#31843857", "title": "Cleanest way to inject into string", "body": "<p>It's <code>#[Range]</code> method what you need:</p>\n\n<pre><code># a little performance optimization - no need to split split string twice\nparts = s.split('/')\nimg_url = parts[0..-2].join('/') + \"/thumbnails/medium_\" + parts[-1]\n</code></pre>\n\n<p>On a side note. If you are using some Rails plugin for handling images (<code>CarrierWave</code> or <code>Paperclip</code>), you should use built-in mechanisms for URL interpolation.</p>\n"}, {"tags": [], "owner": {"reputation": 7994, "user_id": 1625339, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/b8ba46f911517c8b2ccc39e0be9050c0?s=128&d=identicon&r=PG", "display_name": "Aetherus", "link": "https://stackoverflow.com/users/1625339/aetherus"}, "is_accepted": false, "score": 1, "last_activity_date": 1438815636, "last_edit_date": 1438815636, "creation_date": 1438814335, "answer_id": 31843986, "question_id": 31843796, "link": "https://stackoverflow.com/questions/31843796/cleanest-way-to-inject-into-string/31843986#31843986", "title": "Cleanest way to inject into string", "body": "<pre><code>s = \"https://image.s3-us-west-2.amazonaws.com/8/flower.jpg\"\ns.sub /([^\\/]+)$/, 'thumbnails/medium_\\1'\n</code></pre>\n\n<p>The <code>s.sub</code>'s 2nd argument should be quoted with <strong>single quotation mark</strong>, or you have to escape the backslash in the <code>\\1</code> part.</p>\n\n<h2>UPDATE</h2>\n\n<pre><code>s.sub /([^\\/]+?)(?=$|\\?|#)$/, 'thumbnails/medium_\\1'\n</code></pre>\n\n<p>In case there's a query string or a fragment or both, behind the path, which contains slashes.</p>\n"}, {"comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1438820513, "post_id": 31844335, "comment_id": 51611154, "body": "Good one, Brad. Can I offer some advice? Using <code>insert</code> and <code>rindex</code> is imo a good approach. Adding an alternative (regex) method only dilutes your answer. Besides, others have offered solutions using a regex. I  would remove the last line. I would also remove the penultimate line, as it&#39;s not the right reason (your solution is simpler and reads better than a regex), but readers will make that determination themselves. You might also consider listing only the second solution and noting that <code>.dup</code> could be removed if <code>s</code> can be mutated."}, {"owner": {"reputation": 16229, "user_id": 525478, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/3b6c0b47a0c430a0b141baee7ea845be?s=128&d=identicon&r=PG", "display_name": "Brad Werth", "link": "https://stackoverflow.com/users/525478/brad-werth"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1438876677, "post_id": 31844335, "comment_id": 51640451, "body": "Thanks, @CarySwoveland. I appreciate your advice. I pulled the regex, I agree that it diluted the answer. I couldn&#39;t find a great way to modify the other bit clearly, and I&#39;m somewhat reluctant to dramatically modify accepted answers, so I just left that alone. I think it would be fun to benchmark this against <a href=\"http://stackoverflow.com/a/31844415/525478\">stackoverflow.com/a/31844415/525478</a>, which looks pretty nice, too. Thanks again, have a great day."}], "tags": [], "owner": {"reputation": 16229, "user_id": 525478, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/3b6c0b47a0c430a0b141baee7ea845be?s=128&d=identicon&r=PG", "display_name": "Brad Werth", "link": "https://stackoverflow.com/users/525478/brad-werth"}, "is_accepted": true, "score": 4, "last_activity_date": 1438878393, "last_edit_date": 1438878393, "creation_date": 1438816488, "answer_id": 31844335, "question_id": 31843796, "link": "https://stackoverflow.com/questions/31843796/cleanest-way-to-inject-into-string/31844335#31844335", "title": "Cleanest way to inject into string", "body": "<pre><code>s = \"https://image.s3-us-west-2.amazonaws.com/8/flower.jpg\"\nimg_url = s.insert(s.rindex('/')+1, 'thumbnails/medium_')\n\n# The above approach modifies the original string, if this is unsatisfactory, use:    \nimg_url = s.dup.insert(s.rindex('/')+1, 'thumbnails/medium_')\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "is_accepted": false, "score": 3, "last_activity_date": 1438817011, "creation_date": 1438817011, "answer_id": 31844415, "question_id": 31843796, "link": "https://stackoverflow.com/questions/31843796/cleanest-way-to-inject-into-string/31844415#31844415", "title": "Cleanest way to inject into string", "body": "<pre><code>s = \"https://image.s3-us-west-2.amazonaws.com/8/flower.jpg\"\nimg_url = \"#{File.dirname(s)}/thumbnails/medium_#{File.basename(s)}\"\n# =&gt; \"https://image.s3-us-west-2.amazonaws.com/8/thumbnails/medium_flower.jpg\"\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "is_accepted": false, "score": 2, "last_activity_date": 1438838727, "creation_date": 1438838727, "answer_id": 31847439, "question_id": 31843796, "link": "https://stackoverflow.com/questions/31843796/cleanest-way-to-inject-into-string/31847439#31847439", "title": "Cleanest way to inject into string", "body": "<p>I would probably use <code>URI</code> and <code>Pathname</code> to work with URLs and file paths:</p>\n\n<pre><code>require 'uri'\nrequire 'pathname'\n\nurl = \"https://image.s3-us-west-2.amazonaws.com/8/flower.jpg\"\n\nuri  = URI.new(url)\npath = Pathname.new(uri.path)\nuri.path = \"#{path.dirname}/thumbnails/medium_#{path.basename}\"\n\nuri.to_s\n#=&gt; \"https://image.s3-us-west-2.amazonaws.com/8/thumbnails/medium_flower.jpg\"\n</code></pre>\n"}], "owner": {"reputation": 1334, "user_id": 804827, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/652692128fb9e49ffe691d6fadc41fe4?s=128&d=identicon&r=PG", "display_name": "Du3", "link": "https://stackoverflow.com/users/804827/du3"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 82, "favorite_count": 0, "accepted_answer_id": 31844335, "answer_count": 5, "score": 1, "last_activity_date": 1438878393, "creation_date": 1438813252, "last_edit_date": 1438817404, "question_id": 31843796, "link": "https://stackoverflow.com/questions/31843796/cleanest-way-to-inject-into-string", "title": "Cleanest way to inject into string", "body": "<p>We are looking to optimize images with a thumbnail version, which are stored under a funky version of the existing URL:</p>\n\n<ul>\n<li><p>Original Image:</p>\n\n<p><a href=\"https://image.s3-us-west-2.amazonaws.com/8/flower.jpg\" rel=\"nofollow\">https://image.s3-us-west-2.amazonaws.com/8/flower.jpg</a></p></li>\n<li><p>Thumbnail Image:</p>\n\n<p><a href=\"https://image.s3-us-west-2.amazonaws.com/8/\" rel=\"nofollow\">https://image.s3-us-west-2.amazonaws.com/8/</a><strong>thumbnails/medium_</strong>flower.jpg</p></li>\n</ul>\n\n<p>I was going to look from the end of the string for the last <code>'/'</code> and replacing it with <code>'/thumbnails/medium_'</code>. In my case this always safe, but I can't figure out this kind of mutation in Ruby on Rails.</p>\n\n<pre><code>s = \"https://image.s3-us-west-2.amazonaws.com/8/flower.jpg\"\nimg_url = s.split('/')[-1] // should give 'flower.jpg'\n</code></pre>\n\n<p>The issue is to get everything before the last <code>'/'</code> to inject in <code>'thumbnails/medium_'</code>.  Any ideas?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "model", "input-field", "simple-form-for"], "comments": [{"owner": {"reputation": 6190, "user_id": 5029266, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/7d4922cf09a8b3d3195cd4d848091ba3?s=128&d=identicon&r=PG", "display_name": "EugZol", "link": "https://stackoverflow.com/users/5029266/eugzol"}, "edited": false, "score": 0, "creation_date": 1438812749, "post_id": 31843610, "comment_id": 51608871, "body": "Please add full backtrace of error."}], "answers": [{"tags": [], "owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "is_accepted": true, "score": 1, "last_activity_date": 1438814234, "creation_date": 1438814234, "answer_id": 31843973, "question_id": 31843610, "link": "https://stackoverflow.com/questions/31843610/boolean-input-filed-calls-immediately-the-method-on-rails/31843973#31843973", "title": "boolean input_filed calls immediately the method on Rails", "body": "<p>SimpleForms <code>input_field</code> is a helper which binds an input to a model attribute. It does not create a box which calls your method when the box is ticked! But rather it will call your <code>remove_picture</code> method when it rendering the form.</p>\n\n<p>In some cases like checkboxes you will want to bind inputs to attributes that are not saved in the database. We call these virtual attributes. They are just like any old Ruby attributes:</p>\n\n<pre><code>class Message &lt; ActiveRecord::Base\n  attr_accessor :remove_picture\n\n  # since this method is destructive it should have a bang (!)\n  def remove_picture!\n    self.picture.destroy\n  end\nend\n</code></pre>\n\n<p>You could use it like this:</p>\n\n<pre><code>class MessagesController &lt; ApplicationController\n  def update\n    @message.update(update_params)\n    @message.remove_picture! if message.remove_picture\n    # ...\n  end\n\n  def update_params\n    params.require(:message).allow(:remove_picture)\n  end\nend\n</code></pre>\n\n<p>But there is a better way:</p>\n\n<pre><code>class Message &lt; ActiveRecord::Base\n  has_one :picture_image\n  accepts_nested_attributes_for :picture_image, allow_destroy: true\nend\n</code></pre>\n\n<p><code>accepts_nested_attributes_for</code> lets us create an image with <code>picture_image_attributes</code> and destroy an image with:</p>\n\n<pre><code>@picture.update(picture_image_attributes: { _destroy: true })\n</code></pre>\n\n<p>This is how we would set up the form:</p>\n\n<pre><code>= simple_form_for @message, url: [:admin, @request, @message], html: { class: 'form vertical-form} do |f|\n  = f.input :text, as: :text, input_html: { class: 'form-control', rows: 5 }\n  %br\n  = f.input :link_url, input_html: { class: 'form-control'} \n  %br\n  - if @message.has_picture_image?\n    f.simple_fields_for :picture_image do |pif|\n      = pif.label :image\n      = link_to @message.picture_image, target: \"_blank\" do\n      = image_tag @message.picture_image(:thumb)\n      = pif.file_field :image, class:'imagen-button'\n      = pif.input_field :_destroy, as: :boolean, inline_label: 'Remove'\n  %br \n  .form-actions\n    = f.submit(t('accept'), class: 'btn btn-large btn-primary')\n    = link_to(t('cancel'), [:admin, @message.request, @message], class: 'btn btn-large btn-danger')\n</code></pre>\n\n<p>And your strong parameters whitelist:</p>\n\n<pre><code>def update_attributes\n  params.require(:message).allow(\n    :text, \n    :link_url, \n    picture_image_attributes: [:image, :_destroy]\n  )\nend \n</code></pre>\n"}], "owner": {"reputation": 531, "user_id": 4801466, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh4.googleusercontent.com/-LKQUV9yTvkc/AAAAAAAAAAI/AAAAAAAAABM/3umg80-LeJM/photo.jpg?sz=128", "display_name": "Iv&#225;n Cort&#233;s Romero", "link": "https://stackoverflow.com/users/4801466/iv%c3%a1n-cort%c3%a9s-romero"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 66, "favorite_count": 0, "accepted_answer_id": 31843973, "answer_count": 1, "score": 0, "last_activity_date": 1438814234, "creation_date": 1438812205, "last_edit_date": 1438813118, "question_id": 31843610, "link": "https://stackoverflow.com/questions/31843610/boolean-input-filed-calls-immediately-the-method-on-rails", "title": "boolean input_filed calls immediately the method on Rails", "body": "<p>The project which I am working in, is developed on Rails using haml markup to views. There is a view with a simple form like this:</p>\n\n<pre><code>= simple_form_for @message, url: [:admin, @request, @message], html: { class: 'form vertical-form} do |f|\n  = f.input :text, as: :text, input_html: { class: 'form-control', rows: 5 }\n  %br\n  = f.input :link_url, input_html: { class: 'form-control'} \n  %br\n  - if @message.has_picture_image?\n    = f.label :image\n    =link_to @message.picture_image, target: \"_blank\" do\n    = image_tag @message.picture_image(:thumb)\n    = f.file_field :image, class:'imagen-button'\n    = f.input_field :remove_picture, as: :boolean, inline_label: 'Remove'\n  %br \n  .form-actions\n    = f.submit(t('accept'), class: 'btn btn-large btn-primary')\n    = link_to(t('cancel'), [:admin, @message.request, @message], class: 'btn btn-large btn-danger')\n</code></pre>\n\n<p>and in Message model there is the bellow method:</p>\n\n<pre><code>def remove_picture\n  self.picture.destroy\nend\n</code></pre>\n\n<p>The <code>input_field</code> is used to check if I want to remove the message image if it exists. I understood that <code>input_filed</code> gives me the option to check it so that when I click on <code>accept</code> button, it call the method remove_picture in the Message model. But, before the browser deploys the form, it rise the next error:</p>\n\n<pre><code>undefined method `to_i' for #&lt;Picture:0x007f7675162b58&gt;\n\nExtracted source (around line #39):\n\n37:      = image_tag @message.picture_image(:thumb)\n38:    = f.file_field :image, class:'imagen-button'\n39:    = f.input_field :remove_picture, as: :boolean, inline_label: 'Remove'\n40:  %br\n41:  .form-actions\n42:    = f.submit(t('accept'), class: 'btn btn-large btn-primary')\n</code></pre>\n\n<p>and if I reload the page, this time the form is deployed. I guess this is because in the first time, as the picture exists then immediatly the <code>remove_picture</code> is called and the picture removed, and when I reload the form, as the picture already does not exist, the form is shown.</p>\n\n<p>Obviously I am undestanding wrongly the input_field usage. </p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1439508134, "post_id": 31843587, "comment_id": 51903301, "body": "Don&#39;t forget to select an answer if you find any of them helpful."}], "answers": [{"comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1438813408, "post_id": 31843634, "comment_id": 51609132, "body": "...and if you&#39;ve already defined <code>bar</code> as public (or protected), you can use the method <a href=\"http://ruby-doc.org/core-2.2.0/Module.html#method-i-private\" rel=\"nofollow noreferrer\">Module#private</a> to make it private: <code>private(:bar)</code> or <code>private(&quot;bar&quot;)</code>."}, {"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1438817313, "post_id": 31843634, "comment_id": 51610359, "body": "Also, since Ruby 2.0 <code>def</code> returns the method name as a <code>Symbol</code>, so you can do <code>private def bar; end</code> and <code>private_class_method def self.bar; end</code> as well."}], "tags": [], "owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "is_accepted": false, "score": 5, "last_activity_date": 1438812313, "creation_date": 1438812313, "answer_id": 31843634, "question_id": 31843587, "link": "https://stackoverflow.com/questions/31843587/is-there-a-way-to-declare-local-methods-in-class-ruby/31843634#31843634", "title": "is there a way to declare local methods in class, ruby?", "body": "<p>You can declare private instance methods add the <code>private</code> keyword. Every method below that will be private:</p>\n\n<pre><code>class Foo\n  private\n  def bar\n    #...\n  end\nend\n</code></pre>\n\n<p>To create private class methods you need the <code>private_class_method</code> method:</p>\n\n<pre><code>class Foo\n  def self.bar\n    #...\n  end\n  private_class_method :bar\nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 16971, "user_id": 555690, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/Ygbs5.jpg?s=128&g=1", "display_name": "Voldemort", "link": "https://stackoverflow.com/users/555690/voldemort"}, "is_accepted": false, "score": 3, "last_activity_date": 1438812381, "creation_date": 1438812381, "answer_id": 31843653, "question_id": 31843587, "link": "https://stackoverflow.com/questions/31843587/is-there-a-way-to-declare-local-methods-in-class-ruby/31843653#31843653", "title": "is there a way to declare local methods in class, ruby?", "body": "<pre><code>class Test\n\n  private_class_method :greet\n  def self.greet\n    print \"Hello\"\n  end\n\nend\n\nTest.greet  # Error\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 410, "user_id": 4793100, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/df152828f32e71f57e4ca98ca0e67bc0?s=128&d=identicon&r=PG", "display_name": "Jordy Baylac", "link": "https://stackoverflow.com/users/4793100/jordy-baylac"}, "is_accepted": true, "score": 2, "last_activity_date": 1438812442, "last_edit_date": 1438812442, "creation_date": 1438812404, "answer_id": 31843661, "question_id": 31843587, "link": "https://stackoverflow.com/questions/31843587/is-there-a-way-to-declare-local-methods-in-class-ruby/31843661#31843661", "title": "is there a way to declare local methods in class, ruby?", "body": "<p>you can use private keyword, \nsomething like this:</p>\n\n<pre><code>private\n   def mehtod_name ...\n</code></pre>\n\n<p>and other way is:</p>\n\n<pre><code>private_class_method :method_name, :other_method_name\n</code></pre>\n"}], "owner": {"reputation": 14557, "user_id": 1319799, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/638c6066d351794d90fb3abfa1704c01?s=128&d=identicon&r=PG", "display_name": "Muhammad Umer", "link": "https://stackoverflow.com/users/1319799/muhammad-umer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 60, "favorite_count": 0, "accepted_answer_id": 31843661, "answer_count": 3, "score": 1, "last_activity_date": 1438812442, "creation_date": 1438812097, "question_id": 31843587, "link": "https://stackoverflow.com/questions/31843587/is-there-a-way-to-declare-local-methods-in-class-ruby", "title": "is there a way to declare local methods in class, ruby?", "body": "<p>I can declare instance method</p>\n\n<pre><code>def method_name ...\n</code></pre>\n\n<p>I can declare class method</p>\n\n<pre><code>def self.method_name ...\n</code></pre>\n\n<p>But how do i declare internal private local methods in class or is not possible? So that they can't be accessed by like this <code>Class.method_name</code> or <code>Class.new.method_name</code></p>\n"}, {"tags": ["ruby-on-rails", "ruby", "migration"], "comments": [{"owner": {"reputation": 668, "user_id": 2812350, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/819EP.png?s=128&g=1", "display_name": "Igor Belo", "link": "https://stackoverflow.com/users/2812350/igor-belo"}, "edited": false, "score": 0, "creation_date": 1438811378, "post_id": 31843363, "comment_id": 51608374, "body": "your pending migration is trying to create <code>databases</code> table, which already exist..."}], "answers": [{"comments": [{"owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "edited": false, "score": 9, "creation_date": 1438811641, "post_id": 31843442, "comment_id": 51608463, "body": "I think it is dangerous to assume that it is be okay to drop a development db. I have seen development dbs that take quite some time to restore."}, {"owner": {"reputation": 6190, "user_id": 5029266, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/7d4922cf09a8b3d3195cd4d848091ba3?s=128&d=identicon&r=PG", "display_name": "EugZol", "link": "https://stackoverflow.com/users/5029266/eugzol"}, "reply_to_user": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "edited": false, "score": 0, "creation_date": 1438811824, "post_id": 31843442, "comment_id": 51608538, "body": "what was so hard about restoring it? well, you can use <code>rake db:schema:load</code> instead of <code>db:migrate</code> if you have some legacy migrations which don&#39;t work any longer"}, {"owner": {"reputation": 500, "user_id": 5094718, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/43be6a541d41bbd9b6f767be98e9292a?s=128&d=identicon&r=PG&f=1", "display_name": "Leslie Tate", "link": "https://stackoverflow.com/users/5094718/leslie-tate"}, "reply_to_user": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "edited": false, "score": 0, "creation_date": 1438811887, "post_id": 31843442, "comment_id": 51608558, "body": "That worked! Thanks for the insight! And @spickermann you&#39;re right, fortunately it could be replaced in a matter of seconds as its entry level stuff."}, {"owner": {"reputation": 6190, "user_id": 5029266, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/7d4922cf09a8b3d3195cd4d848091ba3?s=128&d=identicon&r=PG", "display_name": "EugZol", "link": "https://stackoverflow.com/users/5029266/eugzol"}, "edited": false, "score": 1, "creation_date": 1438812589, "post_id": 31843442, "comment_id": 51608809, "body": "Actually I do mind! Because I already did that before/in the middle of posting my answer, and I can&#39;t do it twice :D"}, {"owner": {"reputation": 6190, "user_id": 5029266, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/7d4922cf09a8b3d3195cd4d848091ba3?s=128&d=identicon&r=PG", "display_name": "EugZol", "link": "https://stackoverflow.com/users/5029266/eugzol"}, "reply_to_user": {"reputation": 500, "user_id": 5094718, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/43be6a541d41bbd9b6f767be98e9292a?s=128&d=identicon&r=PG&f=1", "display_name": "Leslie Tate", "link": "https://stackoverflow.com/users/5094718/leslie-tate"}, "edited": false, "score": 1, "creation_date": 1438813384, "post_id": 31843442, "comment_id": 51609123, "body": "@KennyEllis Congratulations on your rep increase and thanks for an upvote! :)"}], "tags": [], "owner": {"reputation": 6190, "user_id": 5029266, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/7d4922cf09a8b3d3195cd4d848091ba3?s=128&d=identicon&r=PG", "display_name": "EugZol", "link": "https://stackoverflow.com/users/5029266/eugzol"}, "is_accepted": false, "score": 15, "last_activity_date": 1438811389, "creation_date": 1438811389, "answer_id": 31843442, "question_id": 31843363, "link": "https://stackoverflow.com/questions/31843363/rails-how-to-delete-a-pending-migration/31843442#31843442", "title": "Rails: How to delete a pending migration", "body": "<p>You migration may have failed midway (so it created the table, but didn't finish).</p>\n\n<p>You are just using development environment, so it's okay to just drop database and rebuild it from scratch:</p>\n\n<pre><code>rake db:drop\nrake db:create\nrake db:migrate\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 6190, "user_id": 5029266, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/7d4922cf09a8b3d3195cd4d848091ba3?s=128&d=identicon&r=PG", "display_name": "EugZol", "link": "https://stackoverflow.com/users/5029266/eugzol"}, "edited": false, "score": 0, "creation_date": 1473684537, "post_id": 31865993, "comment_id": 66222552, "body": "Worth mentioning that this problem could be evaded completely by using proper RDBMS with DDL transactions, like Postgres."}], "tags": [], "owner": {"reputation": 31319, "user_id": 981183, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/88dd7155ef7c0e5f43ab8d1a9efdecab?s=128&d=identicon&r=PG&f=1", "display_name": "K M Rakibul Islam", "link": "https://stackoverflow.com/users/981183/k-m-rakibul-islam"}, "is_accepted": true, "score": 29, "last_activity_date": 1438897449, "last_edit_date": 1438897449, "creation_date": 1438895965, "answer_id": 31865993, "question_id": 31843363, "link": "https://stackoverflow.com/questions/31843363/rails-how-to-delete-a-pending-migration/31865993#31865993", "title": "Rails: How to delete a pending migration", "body": "<p>Sometimes, even dropping a local development database is not a good idea. \nThere are better ways to delete/destroy a specific migration in your Rails application.</p>\n\n<p>You could use <code>rails d migration</code> command to destroy a particular migration:</p>\n\n<pre><code>rails d migration MigrationName\n</code></pre>\n\n<p>To undo the changes corresponding to a particular migration, you can use <code>db:migrate:down</code> method like this:</p>\n\n<pre><code>rake db:migrate:down VERSION=XXX\n</code></pre>\n\n<p>Sometimes, things could get more messy and in those situation another handy thing is to take a look at the <code>schema_migrations</code> table in your database which has all the migrations with their <code>version</code> saved in it. </p>\n\n<p>You can delete a particular migration from this table like this:</p>\n\n<pre><code>delete from schema_migrations WHERE version = VERSION;\n</code></pre>\n\n<p>if you don't want that migration to be present anymore.</p>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 6234837, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/599811073a10067f649f2fb52666a6d8?s=128&d=identicon&r=PG&f=1", "display_name": "Rakshit Saxena", "link": "https://stackoverflow.com/users/6234837/rakshit-saxena"}, "is_accepted": false, "score": -3, "last_activity_date": 1470494732, "creation_date": 1470494732, "answer_id": 38805497, "question_id": 31843363, "link": "https://stackoverflow.com/questions/31843363/rails-how-to-delete-a-pending-migration/38805497#38805497", "title": "Rails: How to delete a pending migration", "body": "<p>If you want to revert the wrong migrations, You can drop the whole db using this:</p>\n\n<pre><code>rake db:drop\n</code></pre>\n\n<p>Then remove the migrations file manually(This wont corrupt the db when you recreate as the Schema migrations would be dropped as well).</p>\n\n<p>Then run </p>\n\n<pre><code>rake db:migrate\n</code></pre>\n\n<p>And if there is data to be seeded, then run this as well</p>\n\n<pre><code>rake db:setup\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 3974, "user_id": 433895, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/26ffb8939a8111e0321254ae5259c7f8?s=128&d=identicon&r=PG", "display_name": "curt", "link": "https://stackoverflow.com/users/433895/curt"}, "is_accepted": false, "score": 3, "last_activity_date": 1496764095, "creation_date": 1496764095, "answer_id": 44394549, "question_id": 31843363, "link": "https://stackoverflow.com/questions/31843363/rails-how-to-delete-a-pending-migration/44394549#44394549", "title": "Rails: How to delete a pending migration", "body": "<p>If you are like me and maintain your database structure outside of Rails, you can just delete the migration file from db/migration. I got the error in the OP's question when I used the rails generate command to create a model class, forgetting that it also creates a migration file.</p>\n\n<p>Do not use this method if you rely on Rails to maintain your database structure!</p>\n\n<p>I keep my Rails structure file up to date by building it from the database using:</p>\n\n<pre><code>bundle exec rake db:structure:dump\n</code></pre>\n"}], "owner": {"reputation": 500, "user_id": 5094718, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/43be6a541d41bbd9b6f767be98e9292a?s=128&d=identicon&r=PG&f=1", "display_name": "Leslie Tate", "link": "https://stackoverflow.com/users/5094718/leslie-tate"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 26390, "favorite_count": 7, "accepted_answer_id": 31865993, "answer_count": 4, "score": 22, "last_activity_date": 1539707992, "creation_date": 1438811032, "last_edit_date": 1539707992, "question_id": 31843363, "link": "https://stackoverflow.com/questions/31843363/rails-how-to-delete-a-pending-migration", "title": "Rails: How to delete a pending migration", "body": "<p>I'm currently following the ruby on rails tutorial: <a href=\"http://guides.rubyonrails.org/getting_started.html\" rel=\"noreferrer\">http://guides.rubyonrails.org/getting_started.html</a>.</p>\n\n<p>I am trying to save data into the database. However, when I run: <code>rails server</code> I get the following error:</p>\n\n<pre><code>Migrations are pending. To resolve this issue, run: bin/rake db:migrate RAILS_ENV=development\n</code></pre>\n\n<p>I've looked at the other articles and when I run:</p>\n\n<pre><code>bin/rake db:migrate \n</code></pre>\n\n<p>I get a <code>rake aborted!</code></p>\n\n<p>After running:</p>\n\n<pre><code>rake db:abort_if_pending_migrations....\n</code></pre>\n\n<p>I see that:</p>\n\n<pre><code>You have 1 pending migration:\n20150805200129 CreateDatabases\n\nSQLite3::SQLException: table \"databases\" already exists:\n</code></pre>\n\n<p>and it just tells me to run rake db:migrate to start again.</p>\n\n<p>It seems that it already exists. Is there a way to cancel the pending migration?</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "answers": [{"comments": [{"owner": {"reputation": 391, "user_id": 5178381, "user_type": "registered", "accept_rate": 71, "profile_image": "https://graph.facebook.com/10207333902844017/picture?type=large", "display_name": "Ryan Oliver Lanham", "link": "https://stackoverflow.com/users/5178381/ryan-oliver-lanham"}, "edited": false, "score": 0, "creation_date": 1438811104, "post_id": 31843342, "comment_id": 51608251, "body": "Oh thank god that works lol. I&#39;ve been trying to figure it out for hours now. I&#39;m going to look for more documentation on the include method. But if you happen to know where it is, could you link it?"}, {"owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "reply_to_user": {"reputation": 391, "user_id": 5178381, "user_type": "registered", "accept_rate": 71, "profile_image": "https://graph.facebook.com/10207333902844017/picture?type=large", "display_name": "Ryan Oliver Lanham", "link": "https://stackoverflow.com/users/5178381/ryan-oliver-lanham"}, "edited": false, "score": 0, "creation_date": 1438811481, "post_id": 31843342, "comment_id": 51608417, "body": "@RyanOliverLanham Read more about the <code>includes</code> method in the <a href=\"http://guides.rubyonrails.org/active_record_querying.html#eager-loading-associations\" rel=\"nofollow noreferrer\">Rails Guide</a>. Please note that <code>includes</code> is just an optimization. The real issue was that your tried to call <code>comment.post_id.title</code> instead of <code>comment.post.title</code>."}, {"owner": {"reputation": 391, "user_id": 5178381, "user_type": "registered", "accept_rate": 71, "profile_image": "https://graph.facebook.com/10207333902844017/picture?type=large", "display_name": "Ryan Oliver Lanham", "link": "https://stackoverflow.com/users/5178381/ryan-oliver-lanham"}, "edited": false, "score": 0, "creation_date": 1438811762, "post_id": 31843342, "comment_id": 51608516, "body": "Okay, so I think I have a better understanding of what&#39;s going on now. Is <code>comment.post.title</code> basically an association within an association? Like <code>@user.comments.post.title</code>? Because users have many comments, and comments belong to one post, which has a title?"}, {"owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "reply_to_user": {"reputation": 391, "user_id": 5178381, "user_type": "registered", "accept_rate": 71, "profile_image": "https://graph.facebook.com/10207333902844017/picture?type=large", "display_name": "Ryan Oliver Lanham", "link": "https://stackoverflow.com/users/5178381/ryan-oliver-lanham"}, "edited": false, "score": 0, "creation_date": 1438812038, "post_id": 31843342, "comment_id": 51608608, "body": "<code>comment</code> is your model, <code>post</code> load the associated post and <code>title</code> calls the  title attribute in that post. This works because <code>comment.post</code> returns one post. Whereas <code>users.comments.post</code> would not work, because <code>users.comments</code> returns an array of comments and you cannot call <code>title</code> directly on that array. You would need something like <code>users.comments.map { |comment| comment.post.title }</code> in that case."}], "tags": [], "owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "is_accepted": true, "score": 0, "last_activity_date": 1438810928, "creation_date": 1438810928, "answer_id": 31843342, "question_id": 31843299, "link": "https://stackoverflow.com/questions/31843299/how-to-display-a-posts-title-through-associations/31843342#31843342", "title": "How to display a post&#39;s title through associations", "body": "<p>I would do something like this:</p>\n\n<pre><code>&lt;% @user.comments.includes(:post).each do |comment| %&gt;\n  &lt;tr&gt;\n    &lt;td&gt;&lt;%= comment.post.title %&gt;&lt;/td&gt;\n    &lt;td&gt;|&lt;/td&gt;\n    &lt;td&gt;&lt;%= link_to 'Show', post_path(comment.post) %&gt;&lt;/td&gt;\n  &lt;/tr&gt;\n&lt;% end %&gt;\n</code></pre>\n"}], "owner": {"reputation": 391, "user_id": 5178381, "user_type": "registered", "accept_rate": 71, "profile_image": "https://graph.facebook.com/10207333902844017/picture?type=large", "display_name": "Ryan Oliver Lanham", "link": "https://stackoverflow.com/users/5178381/ryan-oliver-lanham"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 279, "favorite_count": 0, "accepted_answer_id": 31843342, "answer_count": 1, "score": -1, "last_activity_date": 1438810928, "creation_date": 1438810714, "question_id": 31843299, "link": "https://stackoverflow.com/questions/31843299/how-to-display-a-posts-title-through-associations", "title": "How to display a post&#39;s title through associations", "body": "<p>Very new to Rails and programming.</p>\n\n<p>I have the following associations:</p>\n\n<pre><code>class Comment &lt; ActiveRecord::Base\nbelongs_to :post\nbelongs_to :user\n\nclass Post &lt; ActiveRecord::Base\nhas_many :comments\nbelongs_to :user\n\nclass User &lt; ActiveRecord::Base\nhas_many :posts\nhas_many :comments\n</code></pre>\n\n<p>And in my user#show view I want to create a table that has columns for Commented On, and a Link. And I want the Commented On column to be the name of the post the user commented on.</p>\n\n<p>My comments table has post_id and a user_id foreign keys that get populated upon generation of the comment. I'm struggling to figure out how to retrieve the post title based on the post_id </p>\n\n<p>I want to do something like the following:</p>\n\n<pre><code>&lt;% @user.comments.each do |comment| %&gt;\n    &lt;tr&gt;\n        &lt;td&gt;&lt;%= comment.post_id.title %&gt;&lt;/td&gt;\n        &lt;td&gt;|&lt;/td&gt;\n        &lt;td&gt;&lt;%= link_to 'Show', post_path(comment.post_id) %&gt;&lt;/td&gt;\n    &lt;/tr&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>The \"comment.post_id.title\" is not embedding the title of the post in the view.</p>\n\n<p>Is there a way to do what I'm trying to explain?</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 6190, "user_id": 5029266, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/7d4922cf09a8b3d3195cd4d848091ba3?s=128&d=identicon&r=PG", "display_name": "EugZol", "link": "https://stackoverflow.com/users/5029266/eugzol"}, "edited": false, "score": 1, "creation_date": 1438811549, "post_id": 31843152, "comment_id": 51608436, "body": "Firstly, you need to provide us full source code of your controller :)"}], "answers": [{"comments": [{"owner": {"reputation": 205, "user_id": 4925363, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f9677975a7f1508434abccac7b2409ec?s=128&d=identicon&r=PG&f=1", "display_name": "SeattleDucati", "link": "https://stackoverflow.com/users/4925363/seattleducati"}, "edited": false, "score": 0, "creation_date": 1438825053, "post_id": 31843551, "comment_id": 51612157, "body": "I&#39;m afraid this does not work. I experiment a great deal with the filters. My application controller does indeed have &#39;before_action :authorize&#39;, but I&#39;m not convinced that the problem. If it was an authorization issue, wouldn&#39;t it redirect me to the login page? It doesn&#39;t, the photos and comments simply don&#39;t show up."}], "tags": [], "owner": {"reputation": 4457, "user_id": 4856698, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-YF1b0zyYypU/AAAAAAAAAAI/AAAAAAAAAB0/6hdTAeg_61s/photo.jpg?sz=128", "display_name": "NickGnd", "link": "https://stackoverflow.com/users/4856698/nickgnd"}, "is_accepted": false, "score": 0, "last_activity_date": 1438811909, "creation_date": 1438811909, "answer_id": 31843551, "question_id": 31843152, "link": "https://stackoverflow.com/questions/31843152/rails-4-unauthorized-user-cant-see-dependent-models/31843551#31843551", "title": "Rails 4 - Unauthorized user can&#39;t see dependent models", "body": "<p>have you tried to add the same <em>authorization skip</em> both in PhotocupsController and CommentsController like this:</p>\n\n<pre><code>class PhotocupsController &lt; ApplicationController\n skip_before_action :authorize, only: [:index, :show]\n #...\nend\n\n\nclass CommentsController &lt; ApplicationController\n  skip_before_action :authorize, only: [:index, :show]\n  #...\nend\n</code></pre>\n\n<p>I think you block unauthorized users to see comments and photocups, maybe because you have added a general check for authorization in the ApplicationController?</p>\n\n<p>Let me say!\nbye</p>\n"}, {"tags": [], "owner": {"reputation": 205, "user_id": 4925363, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f9677975a7f1508434abccac7b2409ec?s=128&d=identicon&r=PG&f=1", "display_name": "SeattleDucati", "link": "https://stackoverflow.com/users/4925363/seattleducati"}, "is_accepted": false, "score": 0, "last_activity_date": 1438869332, "creation_date": 1438869332, "answer_id": 31857709, "question_id": 31843152, "link": "https://stackoverflow.com/questions/31843152/rails-4-unauthorized-user-cant-see-dependent-models/31857709#31857709", "title": "Rails 4 - Unauthorized user can&#39;t see dependent models", "body": "<p>I figured this out. It had nothing to do with authorization, it was simply db corruption. For some reason, unauthorized (non-logged in) users were being served up incorrect article ids. I figured it out by clearing the logs, then examining what happened when non-logged in VS. logged in users requested the same article. I did a db:reset, and have not been able to recreate the problem. </p>\n"}], "owner": {"reputation": 205, "user_id": 4925363, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f9677975a7f1508434abccac7b2409ec?s=128&d=identicon&r=PG&f=1", "display_name": "SeattleDucati", "link": "https://stackoverflow.com/users/4925363/seattleducati"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 67, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1438869332, "creation_date": 1438810059, "last_edit_date": 1438825676, "question_id": 31843152, "link": "https://stackoverflow.com/questions/31843152/rails-4-unauthorized-user-cant-see-dependent-models", "title": "Rails 4 - Unauthorized user can&#39;t see dependent models", "body": "<p>I have followed the Hartl guide and the rubyonrails.org guide to create a site. I've noticed that unauthorized users cannot see either of the dependent models that are attached to my <code>Article</code> model. The dependent models are <code>Comment</code> and <code>Photocup</code>. </p>\n\n<p>It doesn't matter how I try and display them, these don't work: </p>\n\n<pre><code> &lt;%= render @article.photocups %&gt;\n &lt;%= render @article.comments %&gt;\n</code></pre>\n\n<p>In the case of <code>Photocup</code>s, I have created a partial called <code>_gallery.html.erb</code>, and used:</p>\n\n<pre><code> &lt;% @photocups.each do |photocup|%&gt; \n</code></pre>\n\n<p>The <code>_gallery.html.erb</code> partial renders along with the article itself, but an unauthorized user doesn't see the photocups. </p>\n\n<p>All of the methods above work perfectly for an authorized user. </p>\n\n<p>The <code>ArticlesController</code> allows index and show:</p>\n\n<pre><code>class ArticlesController &lt; ApplicationController\nskip_before_action :authorize, only: [:index, :show]\n</code></pre>\n\n<p>What do I need to do so unauthorized users can see these dependent models?</p>\n\n<p>Thank you for any help.</p>\n\n<p>EDIT: added article controller below.</p>\n\n<pre><code>  class ArticlesController &lt; ApplicationController\n  skip_before_action :authorize, only: [:index, :show]\n\n\n   def check_box(method, options = {}, checked_value = \"1\",   unchecked_value = \"0\")\n   end\n\n   def remove_photo \n   @article = Article.find(params[:id])\n   @article.photo = nil\n   @article.save\n   redirect_to @article\n   end\n\n   def feature\n   @articles = Article.all\n   end\n\n\n\n  def index\n    #displays the full list of articles\n   @articles = Article.all\n   #if User.find_by(id: session[:user_id])\n   # render 'index', flash[:notice] =&gt; \"Opps, need to be logged in to     do this!\"\n   #end\n\n    #alt. method displays articles only created by the current user.\n    #@articles = Article.where(user_id:current_user.id)\n   end\n\n   def showall\n   @articles = current_user.articles\n   end\n\n\n  def show\n    @article = Article.find(params[:id])\n    @photocups = @article.photocups\n   end\n\n   def new\n    @article = Article.new\n   end\n\n  def edit\n    @article = Article.find(params[:id])\n   end\n\n   def create\n    @article = current_user.articles.new(article_params)\n   @article.author = current_user.name\n    #@article = Article.new(article_params)\n\n    if @article.save\n    redirect_to @article\n    else\n  render 'new' #, :notice =&gt; \"Opps, something not quite right!\" \n    end \n   end\n\n   def update\n   @article = Article.find(params[:id])\n   if @article.user_id == current_user.id || current_user.admin?\n  #update author in case of user name change\n    if @article.user_id == current_user.id\n      @article.author = current_user.name\n    end \n  if @article.update(article_params)\n        redirect_to @article\n    else\n    render 'edit'\n   end\n\n    elsif\n    redirect_to articles_path, :notice =&gt; \"You do not have permission   to edit this resource.\"\n    end\n\n   end\n\n  def destroy\n   @article = Article.find(params[:id])\n\n   if @article.user_id == current_user.id\n    @article.destroy\n    redirect_to articles_path, :notice =&gt; \"Article Deleted.\"\n   else\n    redirect_to articles_path, :notice =&gt; \"You do not have permission  to delete this resource.\"\n   end\n  end\n\n   private\n    def article_params\n    params.require(:article).permit(:title, :text, :author, :manufacturer, :displacement, :model, :photo, :misc)\n     end\n    end\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4"], "answers": [{"tags": [], "owner": {"reputation": 1410, "user_id": 1507845, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/9daba84d2a161462310fe5a0eb3ab53c?s=128&d=identicon&r=PG", "display_name": "XML Slayer", "link": "https://stackoverflow.com/users/1507845/xml-slayer"}, "is_accepted": false, "score": 2, "last_activity_date": 1438810244, "creation_date": 1438810244, "answer_id": 31843190, "question_id": 31843146, "link": "https://stackoverflow.com/questions/31843146/limiting-comments-to-a-certain-time-period-in-ruby-on-rails/31843190#31843190", "title": "Limiting comments to a certain time period in Ruby on Rails", "body": "<p>Create a <code>commentable_until</code> datetime attribute in your Post model.</p>\n\n<p>In the controller in which you save comments, run a check to see if that time has passed or not. If it has, don't save the comment and redirect accordingly.</p>\n\n<p>You can also do this check in the view to prevent an \"Add a comment\" option from even appearing.</p>\n"}, {"comments": [{"owner": {"reputation": 323, "user_id": 3783721, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/33iSb.png?s=128&g=1", "display_name": "Zal&#225;n J&#243;zsa", "link": "https://stackoverflow.com/users/3783721/zal%c3%a1n-j%c3%b3zsa"}, "edited": false, "score": 0, "creation_date": 1438810859, "post_id": 31843291, "comment_id": 51608139, "body": "Wow this is sweet. Exactly what I was looking for! Now I just need to figure out a way in which I can allow the users to modify that time period :)"}, {"owner": {"reputation": 1410, "user_id": 1507845, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/9daba84d2a161462310fe5a0eb3ab53c?s=128&d=identicon&r=PG", "display_name": "XML Slayer", "link": "https://stackoverflow.com/users/1507845/xml-slayer"}, "edited": false, "score": 0, "creation_date": 1438811481, "post_id": 31843291, "comment_id": 51608418, "body": "Instead of using a constant in your model, add a field to your Post model which stores the value (as I showed in my answer). Then you can let the user choose."}], "tags": [], "owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "is_accepted": true, "score": 3, "last_activity_date": 1438810675, "creation_date": 1438810675, "answer_id": 31843291, "question_id": 31843146, "link": "https://stackoverflow.com/questions/31843146/limiting-comments-to-a-certain-time-period-in-ruby-on-rails/31843291#31843291", "title": "Limiting comments to a certain time period in Ruby on Rails", "body": "<p>Define how long the Post should be commentable:</p>\n\n<pre><code># in your model/post.rb\nCOMMENTABLE_TIME_PERIOD = 5.hours\n\ndef commentable?\n  Time.current &lt; created_at + COMMENTABLE_TIME_PERIOD\nend\n</code></pre>\n\n<p>Add something to your view to hide the comment form, when the post is not commentable anymore:</p>\n\n<pre><code>&lt;% unless post.commentable? %&gt;\n  your form\n&lt;% end %&gt;\n</code></pre>\n\n<p>Add a custom validator to ensure that comment cannot be created after that period:</p>\n\n<pre><code># in your model/comment.rb\nvalidates :post_commentable\n\nprivate\ndef post_commentable\n  unless post.commentable?\n    errors.add(:base, \"You cannot comment on old posts\")\n  end\nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 658, "user_id": 1779625, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/LYsdM.jpg?s=128&g=1", "display_name": "Mashpy Rahman", "link": "https://stackoverflow.com/users/1779625/mashpy-rahman"}, "is_accepted": false, "score": 1, "last_activity_date": 1438810753, "creation_date": 1438810753, "answer_id": 31843303, "question_id": 31843146, "link": "https://stackoverflow.com/questions/31843146/limiting-comments-to-a-certain-time-period-in-ruby-on-rails/31843303#31843303", "title": "Limiting comments to a certain time period in Ruby on Rails", "body": "<p>Hope this will be code style. Please write it according to your application.</p>\n\n<pre><code>&lt;% ((if Time.now - @post.created_at)/ 3600) &lt; 5 %&gt;\n&lt;%= You can comment here %&gt;\n&lt;% else %&gt;\n&lt;%= You can not comment here %&gt;\n&lt;% end %&gt;\n</code></pre>\n"}], "owner": {"reputation": 323, "user_id": 3783721, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/33iSb.png?s=128&g=1", "display_name": "Zal&#225;n J&#243;zsa", "link": "https://stackoverflow.com/users/3783721/zal%c3%a1n-j%c3%b3zsa"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 33, "favorite_count": 2, "accepted_answer_id": 31843291, "answer_count": 3, "score": 0, "last_activity_date": 1438810753, "creation_date": 1438810039, "question_id": 31843146, "link": "https://stackoverflow.com/questions/31843146/limiting-comments-to-a-certain-time-period-in-ruby-on-rails", "title": "Limiting comments to a certain time period in Ruby on Rails", "body": "<p>I would like to have the ability to allow users to select a time (i.e. 5hours), when they create a post,and when the time passes the post becomes uncommentable. So after 5 hours you can't comment on that post anymore.</p>\n\n<p>I'm trying to figure out if this is possible, and if it is I would like to know where should I start looking, is this a thing that ca be done by a gem or Rails can't do this?</p>\n"}, {"tags": ["html", "ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 394580, "user_id": 479863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ArUCE.jpg?s=128&g=1", "display_name": "mu is too short", "link": "https://stackoverflow.com/users/479863/mu-is-too-short"}, "edited": false, "score": 0, "creation_date": 1438811190, "post_id": 31843042, "comment_id": 51608296, "body": "This comes up over and over and over again and it is always the same thing, hence the duplicate. To be fair, it can be difficult to find all the duplicates."}, {"owner": {"reputation": 222, "user_id": 1943992, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/1cad5f13af6b1154c9a36f89613be22b?s=128&d=identicon&r=PG", "display_name": "user1943992", "link": "https://stackoverflow.com/users/1943992/user1943992"}, "reply_to_user": {"reputation": 394580, "user_id": 479863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ArUCE.jpg?s=128&g=1", "display_name": "mu is too short", "link": "https://stackoverflow.com/users/479863/mu-is-too-short"}, "edited": false, "score": 0, "creation_date": 1440512893, "post_id": 31843042, "comment_id": 52297462, "body": "I didn&#39;t know that this was the issue I was having so I was not sure what to search for. Should I delete this now that I know?"}], "answers": [{"comments": [{"owner": {"reputation": 51013, "user_id": 976775, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/30bd66ad1795804aebe249d8bcb14409?s=128&d=identicon&r=PG", "display_name": "MrYoshiji", "link": "https://stackoverflow.com/users/976775/mryoshiji"}, "edited": false, "score": 1, "creation_date": 1438809839, "post_id": 31843078, "comment_id": 51607679, "body": "I would explain that using <code>&lt;%=</code> actually outputs the returned result of the ruby code, whereas <code>&lt;%</code> does not ( <code>&lt;%</code> is used for computing without outputting, like looping through an array, setting variables, doing some logic, etc)"}, {"owner": {"reputation": 222, "user_id": 1943992, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/1cad5f13af6b1154c9a36f89613be22b?s=128&d=identicon&r=PG", "display_name": "user1943992", "link": "https://stackoverflow.com/users/1943992/user1943992"}, "edited": false, "score": 0, "creation_date": 1438810050, "post_id": 31843078, "comment_id": 51607785, "body": "Thanks, stupid mistake on my part."}], "tags": [], "owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "is_accepted": false, "score": 5, "last_activity_date": 1438810063, "last_edit_date": 1438810063, "creation_date": 1438809762, "answer_id": 31843078, "question_id": 31843042, "link": "https://stackoverflow.com/questions/31843042/embedded-ruby-html-loops-spit-out-number-of-loop/31843078#31843078", "title": "Embedded Ruby HTML Loops Spit Out Number of Loop", "body": "<p>Just change <code>&lt;%=</code> to just <code>&lt;%</code>:</p>\n\n<pre><code>&lt;% shift.ones.times do %&gt;\n  &lt;p&gt;one&lt;/p&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>This happens because <code>&lt;%=</code> evaluates the expression and prints the returned value, whereas <code>&lt;%</code> just evaluates the expression. And the <code>times</code> method returns the number of times the block was processed (<code>1</code> time in your example).</p>\n"}], "owner": {"reputation": 222, "user_id": 1943992, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/1cad5f13af6b1154c9a36f89613be22b?s=128&d=identicon&r=PG", "display_name": "user1943992", "link": "https://stackoverflow.com/users/1943992/user1943992"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 50, "favorite_count": 0, "closed_date": 1438811138, "answer_count": 1, "score": -1, "last_activity_date": 1438810063, "creation_date": 1438809614, "question_id": 31843042, "link": "https://stackoverflow.com/questions/31843042/embedded-ruby-html-loops-spit-out-number-of-loop", "closed_reason": "Duplicate", "title": "Embedded Ruby HTML Loops Spit Out Number of Loop", "body": "<p>In a partial I have: </p>\n\n<pre><code>&lt;%= shift.ones.times do %&gt;\n&lt;p&gt;one&lt;/p&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>The final HTML (from the page source) is:</p>\n\n<pre><code>&lt;p&gt;one&lt;/p&gt;\n1 \n</code></pre>\n\n<p>Why is this? How can I stop it?   </p>\n\n<p>Thanks in advance.</p>\n"}, {"tags": ["arrays", "ruby"], "answers": [{"tags": [], "owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "is_accepted": false, "score": 2, "last_activity_date": 1438809227, "creation_date": 1438809227, "answer_id": 31842932, "question_id": 31842790, "link": "https://stackoverflow.com/questions/31842790/ruby-array-errors-input-wont-enter-array-issue/31842932#31842932", "title": "Ruby Array Errors. Input won&#39;t enter array issue", "body": "<p>The return value of <code>puts userdata.at_css('h2').text.strip</code> is <code>nil</code>, therefore <code>username1</code> is <code>nil</code>.</p>\n\n<p>Try this instead:</p>\n\n<pre><code>require 'nokogiri'\nrequire 'open-uri'\n\ntestarray = [\"test\"]\n\nurl = \"http://namegeneratorbay.com/username-generator\"\ndocument = Nokogiri::HTML(open(url))\nusername = document.at_css('h2').text.strip\n\ntestarray.push(username)\n\nputs testarray\n#=&gt; [\"test\", \"Rhirawyr\"]\n</code></pre>\n"}], "owner": {"reputation": 9, "user_id": 5195690, "user_type": "registered", "profile_image": "https://graph.facebook.com/836432173077532/picture?type=large", "display_name": "Sam Constante", "link": "https://stackoverflow.com/users/5195690/sam-constante"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 30, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1438817556, "creation_date": 1438808633, "last_edit_date": 1438817556, "question_id": 31842790, "link": "https://stackoverflow.com/questions/31842790/ruby-array-errors-input-wont-enter-array-issue", "title": "Ruby Array Errors. Input won&#39;t enter array issue", "body": "<p>Whenever I run this code, the name that I want is not input correctly  into the array. The output is equal to this #=> RandomUserName\n                                       #=> [\"test\", \"\"]\nIts pretty annoying and it would be great if someone figured out how to input that random user name into the array.</p>\n\n<pre><code>#!/usr/bin/env ruby\nrequire 'mechanize'\nrequire 'open-uri'\n\ntestarray = [\"test\"  ].compact\n\npassword = \"456789solid\"\nurl = \"http://namegeneratorbay.com/username-generator\"\n userdata = Nokogiri::HTML(open(url))\n\n username1 = puts userdata.at_css('h2').text.strip\n\nfinal1 = username1.to_s\n\n\ntestarray.push(\"#{final1}\")\n\n\n\n print testarray\n\n    sleep(10)\n</code></pre>\n"}, {"tags": ["ruby", "rspec", "guard", "rspec3"], "comments": [{"owner": {"reputation": 1785, "user_id": 3373470, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/8f968c218643a09267014e4beaeb4770?s=128&d=identicon&r=PG&f=1", "display_name": "onebree", "link": "https://stackoverflow.com/users/3373470/onebree"}, "edited": false, "score": 0, "creation_date": 1438808544, "post_id": 31842745, "comment_id": 51607044, "body": "does this work when not using guard?"}, {"owner": {"reputation": 1160, "user_id": 2130130, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/32f5b3b60c6dcc54b25397e2f2d5c0e3?s=128&d=identicon&r=PG", "display_name": "pixelpax", "link": "https://stackoverflow.com/users/2130130/pixelpax"}, "reply_to_user": {"reputation": 1785, "user_id": 3373470, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/8f968c218643a09267014e4beaeb4770?s=128&d=identicon&r=PG&f=1", "display_name": "onebree", "link": "https://stackoverflow.com/users/3373470/onebree"}, "edited": false, "score": 0, "creation_date": 1438811533, "post_id": 31842745, "comment_id": 51608431, "body": "No, it doesn&#39;t, is this normal output when there&#39;s an error in RSpec?"}, {"owner": {"reputation": 575, "user_id": 2855747, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9ef29652da2fde5184c329af0e72ccea?s=128&d=identicon&r=PG", "display_name": "Colto", "link": "https://stackoverflow.com/users/2855747/colto"}, "edited": false, "score": 2, "creation_date": 1438814063, "post_id": 31842745, "comment_id": 51609358, "body": "You can run guard in debug mode with <code>-d</code> to get a better understanding of what is going on."}, {"owner": {"reputation": 1785, "user_id": 3373470, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/8f968c218643a09267014e4beaeb4770?s=128&d=identicon&r=PG&f=1", "display_name": "onebree", "link": "https://stackoverflow.com/users/3373470/onebree"}, "edited": false, "score": 1, "creation_date": 1438864354, "post_id": 31842745, "comment_id": 51631054, "body": "@user2130130 if there is an error with RSpec, as in how the gem was bundled (nothing with your tests), then yes errors like this happen. However, if the error was with your tests (meaning a line failed to pass), then output would be &quot;Failures:&quot;, what was expected vs what actually happened, and a small backtrace."}, {"owner": {"reputation": 1160, "user_id": 2130130, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/32f5b3b60c6dcc54b25397e2f2d5c0e3?s=128&d=identicon&r=PG", "display_name": "pixelpax", "link": "https://stackoverflow.com/users/2130130/pixelpax"}, "edited": false, "score": 0, "creation_date": 1438974429, "post_id": 31842745, "comment_id": 51687492, "body": "Thanks so much, I&#39;m new at this"}], "owner": {"reputation": 1160, "user_id": 2130130, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/32f5b3b60c6dcc54b25397e2f2d5c0e3?s=128&d=identicon&r=PG", "display_name": "pixelpax", "link": "https://stackoverflow.com/users/2130130/pixelpax"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 159, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1438811421, "creation_date": 1438808484, "last_edit_date": 1438811421, "question_id": 31842745, "link": "https://stackoverflow.com/questions/31842745/how-can-i-get-guard-rspec-to-print-the-failed-tests", "title": "How can I get guard-rspec to print the failed tests?", "body": "<p>I'm just starting out with rspec and guard. It seems that there's a formatting problem any time a test fails. I get the following error message:</p>\n\n<pre><code>15:57:39 - ERROR - Failed: \"bundle exec rspec -f progress -r /home/gabriel/.rbenv/versions/2.2.2/lib/ruby/gems/2.2.0/gems/guard-rspec-4.6.2/lib/guard/rspec_formatter.rb -f Guard::RSpecFormatter --failure-exit-code 2  spec/investopedia_accessor_spec.rb\" (exit code: 1)\n</code></pre>\n\n<p>There's an uninitialized constant error in my rspec code, but shouldn't it still display some formatted tests? </p>\n\n<p>Any idea how I can fix this? </p>\n"}, {"tags": ["ruby-on-rails", "ruby", "asp.net-web-api", "rest-client"], "comments": [{"owner": {"reputation": 195, "user_id": 3144022, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/e778f594039eb36e69c2d97f715cc4ad?s=128&d=identicon&r=PG", "display_name": "LiveNL", "link": "https://stackoverflow.com/users/3144022/livenl"}, "edited": false, "score": 0, "creation_date": 1438808654, "post_id": 31842586, "comment_id": 51607108, "body": "I&#39;m thinking of a more simple approach. If you define response as an empty array like this: response = [ ] and url would be this: urls = [&#39;<a href=\"http://example1&#39;,&#39;https://example2&#39;]\" rel=\"nofollow noreferrer\">example1&#39;,&#39;https://example2&#39;]</a>. Then if you do: urls.each do |url| response &lt;&lt; RestClient.get(url) end. you would already have the responses together right? After that you can do what you want with it."}, {"owner": {"reputation": 382, "user_id": 1399789, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/aa44d07d6d2ec8a487410282121ac2bb?s=128&d=identicon&r=PG", "display_name": "kdavh", "link": "https://stackoverflow.com/users/1399789/kdavh"}, "edited": false, "score": 0, "creation_date": 1438825201, "post_id": 31842586, "comment_id": 51612186, "body": "you&#39;ve got a lot of bugs in there.  if you say <code>url.each do |i|</code>, then in each iteration of the <code>each</code> loop, your <code>i</code> variable will be the url string <code>&#39;http:&#47;&#47;example1</code>, etc, not an integer like you&#39;re expecting.  second, you can&#39;t call <code>render</code> multiple times in a controller.  it will throw an error.  you have to make the two requests, then combine them however you like, then render one json response."}, {"owner": {"reputation": 391, "user_id": 5188979, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/81be8dbc4c95c605bd5a9aa631023896?s=128&d=identicon&r=PG&f=1", "display_name": "Joel", "link": "https://stackoverflow.com/users/5188979/joel"}, "edited": false, "score": 0, "creation_date": 1438846352, "post_id": 31842586, "comment_id": 51619433, "body": "Thanks, I did :                                                                                              urls = Base64.decode64(params[:urls]).split(&#39;,&#39;)       response=[]       urls.each do |url|         result = JSON.parse(RestClient::Request.execute( method: :get, url: url))          response.push result       end        render json: response, layout: nil     end"}], "answers": [{"comments": [{"owner": {"reputation": 391, "user_id": 5188979, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/81be8dbc4c95c605bd5a9aa631023896?s=128&d=identicon&r=PG&f=1", "display_name": "Joel", "link": "https://stackoverflow.com/users/5188979/joel"}, "edited": false, "score": 0, "creation_date": 1438846837, "post_id": 31842863, "comment_id": 51619710, "body": "Thanks, but it didn&#39;t work because there is no option to do more than  1 render, i did as described  above. thanks anyway!"}, {"owner": {"reputation": 2848, "user_id": 3152127, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/491f8f327df08264110871e1a80e4dee?s=128&d=identicon&r=PG&f=1", "display_name": "Luke Exton", "link": "https://stackoverflow.com/users/3152127/luke-exton"}, "reply_to_user": {"reputation": 391, "user_id": 5188979, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/81be8dbc4c95c605bd5a9aa631023896?s=128&d=identicon&r=PG&f=1", "display_name": "Joel", "link": "https://stackoverflow.com/users/5188979/joel"}, "edited": false, "score": 0, "creation_date": 1438912358, "post_id": 31842863, "comment_id": 51655923, "body": "The edited response above should solve this problem."}], "tags": [], "owner": {"reputation": 2848, "user_id": 3152127, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/491f8f327df08264110871e1a80e4dee?s=128&d=identicon&r=PG&f=1", "display_name": "Luke Exton", "link": "https://stackoverflow.com/users/3152127/luke-exton"}, "is_accepted": true, "score": 1, "last_activity_date": 1439111053, "last_edit_date": 1439111053, "creation_date": 1438808931, "answer_id": 31842863, "question_id": 31842586, "link": "https://stackoverflow.com/questions/31842586/rest-client-in-ruby-on-rails-multiple-request/31842863#31842863", "title": "rest-client in ruby on rails -multiple request", "body": "<p>The error is coming from this line, rather than <code>url[i]</code>, use just <code>i</code>, as i is the url you are trying to access, as an example, to deal with the implicit conversion:</p>\n\n<pre><code>render json: JSON.parse(RestClient::Request.execute( method: :get, url: i)), layout: nil\n</code></pre>\n\n<p>But the core issue is rendering multiple times, this can be solved by getting the data you need first, and then render the array once at the end.</p>\n\n<p>Like so:</p>\n\n<pre><code>def index\n   url_list = ['http://example1','https://example2']\n   responses = []\n   url_list.each do |url|\n       responses &lt;&lt; JSON.parse(RestClient::Request.execute( method: :get, url: url))\n   end\n   render json: responses, layout: nil\nend\n</code></pre>\n"}], "owner": {"reputation": 391, "user_id": 5188979, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/81be8dbc4c95c605bd5a9aa631023896?s=128&d=identicon&r=PG&f=1", "display_name": "Joel", "link": "https://stackoverflow.com/users/5188979/joel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1232, "favorite_count": 0, "accepted_answer_id": 31842863, "answer_count": 1, "score": 0, "last_activity_date": 1439111053, "creation_date": 1438807913, "last_edit_date": 1438808373, "question_id": 31842586, "link": "https://stackoverflow.com/questions/31842586/rest-client-in-ruby-on-rails-multiple-request", "title": "rest-client in ruby on rails -multiple request", "body": "<p>I'm trying to build a web api in ruby on rails, I'm using rest-client gem.\nI have tried this code in order to get a response from multiple urls and display the responses together </p>\n\n<pre><code> def index\n   url =  (['http://example1','https://example2'])\n   url.split(\",\")\n   i = 0\n  url.each do |i|\n       render json: JSON.parse(RestClient::Request.execute( method: :get, url: url[i])), layout: nil\n       end\n    end\n end\n</code></pre>\n\n<p>but i get an error message <code>\"no implicit conversion of String into Integer\"</code></p>\n"}, {"tags": ["ruby", "http", "shoes"], "comments": [{"owner": {"reputation": 4071, "user_id": 3806046, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/5fedf50ce7cd2659bca902e9a2969158?s=128&d=identicon&r=PG&f=1", "display_name": "jkeuhlen", "link": "https://stackoverflow.com/users/3806046/jkeuhlen"}, "edited": false, "score": 0, "creation_date": 1438806762, "post_id": 31842209, "comment_id": 51606018, "body": "I&#39;m not really sure what you are asking here. Could you please try to clarify?"}, {"owner": {"reputation": 32896, "user_id": 1276506, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/7149d2bc15314277ac69357ef7251650?s=128&d=identicon&r=PG", "display_name": "boulder_ruby", "link": "https://stackoverflow.com/users/1276506/boulder-ruby"}, "reply_to_user": {"reputation": 4071, "user_id": 3806046, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/5fedf50ce7cd2659bca902e9a2969158?s=128&d=identicon&r=PG&f=1", "display_name": "jkeuhlen", "link": "https://stackoverflow.com/users/3806046/jkeuhlen"}, "edited": false, "score": 0, "creation_date": 1438807174, "post_id": 31842209, "comment_id": 51606256, "body": "I want to use a rails server to serve json to be used to render text in a shoes gui. The goal is to be able to use shoes as a dumb front end. Ultimately the app is going to be used to passively access the users file system so a web app isn&#39;t feasible"}, {"owner": {"reputation": 32896, "user_id": 1276506, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/7149d2bc15314277ac69357ef7251650?s=128&d=identicon&r=PG", "display_name": "boulder_ruby", "link": "https://stackoverflow.com/users/1276506/boulder-ruby"}, "reply_to_user": {"reputation": 4071, "user_id": 3806046, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/5fedf50ce7cd2659bca902e9a2969158?s=128&d=identicon&r=PG&f=1", "display_name": "jkeuhlen", "link": "https://stackoverflow.com/users/3806046/jkeuhlen"}, "edited": false, "score": 0, "creation_date": 1438807558, "post_id": 31842209, "comment_id": 51606510, "body": "somebody is abusing their SO privileges with that downvote"}, {"owner": {"reputation": 4071, "user_id": 3806046, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/5fedf50ce7cd2659bca902e9a2969158?s=128&d=identicon&r=PG&f=1", "display_name": "jkeuhlen", "link": "https://stackoverflow.com/users/3806046/jkeuhlen"}, "edited": false, "score": 0, "creation_date": 1438807639, "post_id": 31842209, "comment_id": 51606553, "body": "Okay, i get what you are trying to do. So what is your question?"}, {"owner": {"reputation": 32896, "user_id": 1276506, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/7149d2bc15314277ac69357ef7251650?s=128&d=identicon&r=PG", "display_name": "boulder_ruby", "link": "https://stackoverflow.com/users/1276506/boulder-ruby"}, "reply_to_user": {"reputation": 4071, "user_id": 3806046, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/5fedf50ce7cd2659bca902e9a2969158?s=128&d=identicon&r=PG&f=1", "display_name": "jkeuhlen", "link": "https://stackoverflow.com/users/3806046/jkeuhlen"}, "edited": false, "score": 0, "creation_date": 1438807785, "post_id": 31842209, "comment_id": 51606635, "body": "I&#39;m not sure if you&#39;ve ever used Shoes, but it is not readily apparent how one might make http requests within the application such that the response can be actually used. To wit, how can I make HTTP requests within a Ruby Shoes GUI so I can utilize APIs?"}], "answers": [{"tags": [], "owner": {"reputation": 382, "user_id": 1399789, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/aa44d07d6d2ec8a487410282121ac2bb?s=128&d=identicon&r=PG", "display_name": "kdavh", "link": "https://stackoverflow.com/users/1399789/kdavh"}, "is_accepted": true, "score": 2, "last_activity_date": 1438811859, "creation_date": 1438811859, "answer_id": 31843542, "question_id": 31842209, "link": "https://stackoverflow.com/questions/31842209/how-can-i-make-simple-http-requests-within-a-ruby-shoes-gui-application/31843542#31843542", "title": "How can I make simple http requests within a ruby Shoes GUI application?", "body": "<p>The problem for me when I tried to run your code was that the Shoes app couldn't connect locally using <code>localhost</code>.  Instead of using <code>localhost</code>, use your computer's local IP address.  </p>\n\n<p>So just change this:</p>\n\n<p><code>Net::HTTP.get(URI.parse(\"http://localhost:3000\"))</code></p>\n\n<p>to this:</p>\n\n<p><code>Net::HTTP.get(URI.parse(\"http://10.1.4.123:3000\"))</code></p>\n\n<p>if your computer's local IP is <code>10.1.4.123</code>.</p>\n\n<p>To see the error logs that confirm this is happening for you, insert this line at the top of your shoes app: <code>Shoes.show_log</code></p>\n\n<p>Or simply enter <code>cmd</code>+<code>/</code> on a Mac or <code>ctrl</code>+<code>/</code> in Windows(?) when you are running your <code>*.rb</code> file in Shoes.app</p>\n\n<p>For me the error that showed up was:</p>\n\n<p><code>Connection refused - connect(2) for \"::1\" port 3000</code></p>\n"}], "owner": {"reputation": 32896, "user_id": 1276506, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/7149d2bc15314277ac69357ef7251650?s=128&d=identicon&r=PG", "display_name": "boulder_ruby", "link": "https://stackoverflow.com/users/1276506/boulder-ruby"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 329, "favorite_count": 2, "accepted_answer_id": 31843542, "answer_count": 1, "score": 2, "last_activity_date": 1453067651, "creation_date": 1438806465, "last_edit_date": 1438827553, "question_id": 31842209, "link": "https://stackoverflow.com/questions/31842209/how-can-i-make-simple-http-requests-within-a-ruby-shoes-gui-application", "title": "How can I make simple http requests within a ruby Shoes GUI application?", "body": "<p>I'm trying to make a simple http request to a local rails application running at localhost:3000. The code for my application is very much in prototype phase as I am only trying to get raw functionality before I try anything else.</p>\n\n<p>The rails app simply returns JSON that looks like this before being parsed</p>\n\n<pre><code>\"{\\\"response\\\":\\\"foo is blank\\\"}\"\n</code></pre>\n\n<p>Here's the code I'm trying right now:</p>\n\n<pre><code>require 'net/http'\n\ndef get_response\n  return Net::HTTP.get(URI.parse(\"http://localhost:3000\"))\nend\n\nShoes.app(:width =&gt; 280, :height =&gt; 350) do\n\n  flow do\n    stack do\n      button \"make http request and display results in an alert box\" do\n        x = get_response\n        alert x\n      end# of button\n    end# of stack\n  end# of flow\nend\n</code></pre>\n\n<p>I've also tried to put the method inside the Shoes.app block to no avail. When executed, this creates all the elements that it should create, but nothing happens when I click the button.</p>\n\n<p>I know you're not supposed to be able to do anything practical with ruby shoes, but I'm trying anyway. Thanks for your time</p>\n"}, {"tags": ["ruby", "rubymotion", "rubymotion-promotion"], "owner": {"reputation": 173, "user_id": 2903682, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/4W1Iw.jpg?s=128&g=1", "display_name": "yogi_bear", "link": "https://stackoverflow.com/users/2903682/yogi-bear"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 20, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1438806285, "creation_date": 1438806285, "question_id": 31842169, "link": "https://stackoverflow.com/questions/31842169/how-to-present-uialert-in-its-own-screen", "title": "How to present UIAlert in its own Screen", "body": "<p>I am opening registration screen from login screen as follows.<a href=\"https://i.stack.imgur.com/JgIBB.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/JgIBB.png\" alt=\"enter image description here\"></a></p>\n\n<p>Now in the registration screen, i am trying to trigger alert message - rmq.app.alert(\"test alert\") but I get this error message:\"attempt to open UIAlertController on LoginScreen whose view is not in window hierarchy.</p>\n\n<p>When I just open the registration screen as open RegistrationScreen.new(nav_bar: true, title: \"\") then the alert message pops up, but crashes on calling the screen close method. How can I make the alert message work with the above code.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "rake", "mysql2"], "comments": [{"owner": {"reputation": 6190, "user_id": 5029266, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/7d4922cf09a8b3d3195cd4d848091ba3?s=128&d=identicon&r=PG", "display_name": "EugZol", "link": "https://stackoverflow.com/users/5029266/eugzol"}, "edited": false, "score": 0, "creation_date": 1438805832, "post_id": 31841869, "comment_id": 51605510, "body": "Add your Gemfile to the question, please."}, {"owner": {"reputation": 3161, "user_id": 142223, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c3b8fdf45bb507c0b67d4aa2125748b9?s=128&d=identicon&r=PG", "display_name": "Ian Selby", "link": "https://stackoverflow.com/users/142223/ian-selby"}, "edited": false, "score": 0, "creation_date": 1438811797, "post_id": 31841869, "comment_id": 51608528, "body": "Are you using bundler? If so, what happens when you run <code>bundle exec rake generate_secret_token</code>?"}], "owner": {"reputation": 1, "user_id": 5160983, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7b586353d25f1ca781e5a8aac0800e36?s=128&d=identicon&r=PG&f=1", "display_name": "Vritomos", "link": "https://stackoverflow.com/users/5160983/vritomos"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 591, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1438870507, "creation_date": 1438805163, "last_edit_date": 1438870507, "question_id": 31841869, "link": "https://stackoverflow.com/questions/31841869/generate-secret-token-error-mysql2", "title": "Generate secret token error - mysql2", "body": "<p>I've installed Ruby 2.0.0 with Rails on Windows 8 and a set of gems using bundle install. It seemed everything was fine, but when I tried to run the \"rake generate_secret_token\" command the headaches begun. The first error I got was that:</p>\n\n<pre><code>Could not find mysql2-0.3.11-x86-mingw32 in any of the sources\n</code></pre>\n\n<p>I had installed the mysql2 0.3.18 version, but apparently rake requires a downgrade in order to run. Ok.. I uninstalled mysql2 gem and installed the requested version using <code>gem install mysql2 -v=0.3.11</code>. When I tried to generate secret token again, I got this:</p>\n\n<pre><code>rake aborted!\nGem::LoadError: You have already activated rake 10.4.2, but your Gemfile     require\ns rake 0.9.6. Prepending bundle exec to your command may solve this.\nC:/Sites/redmine-3.0.4/config/boot.rb:4:in '&lt;top (required)&gt;'\nC:/Sites/redmine-3.0.4/config/application.rb:1:in '&lt;top (required)&gt;'\nC:/Sites/redmine-3.0.4/Rakefile:5:in '&lt;top (required)&gt;'\n(See full trace by running task with --trace)\n</code></pre>\n\n<p>So it seemed I had to downgrade rake too, but could manage the issue using \"bundle exec\". Ok, so I tried to run again using <code>bundle exec rake generate_secret_token</code>. And then I got this:</p>\n\n<pre><code>DL is deprecated, please use Fiddle\nrake aborted!\ncannot load such file -- mysql2/2.0/mysql2\nC:/Sites/redmine-3.0.4/config/application.rb:5:in '&lt;top (required)&gt;'\nC:/Sites/redmine-3.0.4/Rakefile:5:in 'require'\nC:/Sites/redmine-3.0.4/Rakefile:5:in '&lt;top (required)&gt;'\n(See full trace by running task with --trace)\n</code></pre>\n\n<p>I verified these files - \"application.rb\" and \"Rakefile\", they are there. Now I don't know what to do anymore. Does anyone have any idea of what could be happening?</p>\n\n<p>*The Gemfile shows the following content:</p>\n\n<pre><code>source 'https://rubygems.org'\n\nif Gem::Version.new(Bundler::VERSION) &lt; Gem::Version.new('1.5.0')\n  abort \"Redmine requires Bundler 1.5.0 or higher (you're using #{Bundler::VERSION}).\\nPlease update with 'gem update bundler'.\" \nend\n\ngem \"rails\", \"4.2.3\"\ngem \"jquery-rails\", \"~&gt; 3.1.3\"\ngem \"coderay\", \"~&gt; 1.1.0\"\ngem \"builder\", \"&gt;= 3.0.4\"\ngem \"request_store\", \"1.0.5\"\ngem \"mime-types\"\ngem \"protected_attributes\"\ngem \"actionpack-action_caching\"\ngem \"actionpack-xml_parser\"\n\n# Windows does not include zoneinfo files, so bundle the tzinfo-data gem\ngem 'tzinfo-data', platforms: [:mingw, :x64_mingw, :mswin, :jruby]\ngem \"rbpdf\", \"~&gt; 1.18.6\"\n\n# Optional gem for LDAP authentication\ngroup :ldap do\n  gem \"net-ldap\", \"~&gt; 0.3.1\"\nend\n\n# Optional gem for OpenID authentication\ngroup :openid do\n  gem \"ruby-openid\", \"~&gt; 2.3.0\", :require =&gt; \"openid\"\n  gem \"rack-openid\"\nend\n\nplatforms :mri, :mingw, :x64_mingw do\n  # Optional gem for exporting the gantt to a PNG file, not supported with jruby\n  group :rmagick do\n    gem \"rmagick\", \"~&gt; 2.13.4\"\n  end\n\n  # Optional Markdown support, not for JRuby\n  group :markdown do\n    gem \"redcarpet\", \"~&gt; 3.1.2\"\n  end\nend\n\nplatforms :jruby do\n  # jruby-openssl is bundled with JRuby 1.7.0\n  gem \"jruby-openssl\" if Object.const_defined?(:JRUBY_VERSION) &amp;&amp; JRUBY_VERSION &lt; '1.7.0'\n  gem \"activerecord-jdbc-adapter\", \"~&gt; 1.3.2\"\nend\n\n# Include database gems for the adapters found in the database\n# configuration file\nrequire 'erb'\nrequire 'yaml'\ndatabase_file = File.join(File.dirname(__FILE__), \"config/database.yml\")\nif File.exist?(database_file)\n  database_config = YAML::load(ERB.new(IO.read(database_file)).result)\n  adapters = database_config.values.map {|c| c['adapter']}.compact.uniq\n  if adapters.any?\n    adapters.each do |adapter|\n      case adapter\n      when 'mysql2'\n        gem \"mysql2\", \"~&gt; 0.3.11\", :platforms =&gt; [:mri, :mingw, :x64_mingw]\n        gem \"activerecord-jdbcmysql-adapter\", :platforms =&gt; :jruby\n      when 'mysql'\n        gem \"activerecord-jdbcmysql-adapter\", :platforms =&gt; :jruby\n      when /postgresql/\n        gem \"pg\", \"~&gt; 0.17.1\", :platforms =&gt; [:mri, :mingw, :x64_mingw]\n        gem \"activerecord-jdbcpostgresql-adapter\", :platforms =&gt; :jruby\n      when /sqlite3/\n        gem \"sqlite3\", :platforms =&gt; [:mri, :mingw, :x64_mingw]\n        gem \"jdbc-sqlite3\", \"&gt;= 3.8.10.1\", :platforms =&gt; :jruby\n        gem \"activerecord-jdbcsqlite3-adapter\", :platforms =&gt; :jruby\n      when /sqlserver/\n        gem \"tiny_tds\", \"~&gt; 0.6.2\", :platforms =&gt; [:mri, :mingw, :x64_mingw]\n        gem \"activerecord-sqlserver-adapter\", :platforms =&gt; [:mri, :mingw, :x64_mingw]\n      else\n        warn(\"Unknown database adapter `#{adapter}` found in config/database.yml, use Gemfile.local to load your own database gems\")\n      end\n    end\n  else\n    warn(\"No adapter found in config/database.yml, please configure it first\")\n  end\nelse\n  warn(\"Please configure your config/database.yml first\")\nend\n\ngroup :development do\n  gem \"rdoc\", \"&gt;= 2.4.2\"\n  gem \"yard\"\nend\n\ngroup :test do\n  gem \"minitest\"\n  gem \"rails-dom-testing\"\n  gem \"mocha\"\n  gem \"simplecov\", \"~&gt; 0.9.1\", :require =&gt; false\n  # For running UI tests\n  gem \"capybara\"\n  gem \"selenium-webdriver\"\nend\n\nlocal_gemfile = File.join(File.dirname(__FILE__), \"Gemfile.local\")\nif File.exists?(local_gemfile)\n  eval_gemfile local_gemfile\nend\n\n# Load plugins' Gemfiles\nDir.glob File.expand_path(\"../plugins/*/{Gemfile,PluginGemfile}\", __FILE__) do |file|\n  eval_gemfile file\nend\n</code></pre>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 1785, "user_id": 3373470, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/8f968c218643a09267014e4beaeb4770?s=128&d=identicon&r=PG&f=1", "display_name": "onebree", "link": "https://stackoverflow.com/users/3373470/onebree"}, "edited": false, "score": 0, "creation_date": 1438805217, "post_id": 31841805, "comment_id": 51605206, "body": "First thing that comes to mind is an <code>each_index</code> iteration, then <code>inject</code> the element from arr1 into the element of arr2. If you find this helpful, I will post, but it seems longer than what you have now"}, {"owner": {"reputation": 32451, "user_id": 2516474, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a2179a340c0e84edc285d432211145d?s=128&d=identicon&r=PG", "display_name": "SteveTurczyn", "link": "https://stackoverflow.com/users/2516474/steveturczyn"}, "edited": false, "score": 0, "creation_date": 1438805747, "post_id": 31841805, "comment_id": 51605467, "body": "I don&#39;t see what&#39;s wrong with the way you&#39;re doing it, but an alternative might be <code>arr2.each_with_index{|a,i| a.unshift(arr1[i])}</code> ... but really, yours is nicer."}], "answers": [{"comments": [{"owner": {"reputation": 32451, "user_id": 2516474, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a2179a340c0e84edc285d432211145d?s=128&d=identicon&r=PG", "display_name": "SteveTurczyn", "link": "https://stackoverflow.com/users/2516474/steveturczyn"}, "edited": false, "score": 1, "creation_date": 1438806025, "post_id": 31841971, "comment_id": 51605616, "body": "If you&#39;re doing an unshift you&#39;re mutating the object, so you don&#39;t really need the <code>map!</code> bit.  The original array will change regardless."}, {"owner": {"reputation": 2277, "user_id": 3234367, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/FxQ1m.jpg?s=128&g=1", "display_name": "aaron-coding", "link": "https://stackoverflow.com/users/3234367/aaron-coding"}, "reply_to_user": {"reputation": 32451, "user_id": 2516474, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a2179a340c0e84edc285d432211145d?s=128&d=identicon&r=PG", "display_name": "SteveTurczyn", "link": "https://stackoverflow.com/users/2516474/steveturczyn"}, "edited": false, "score": 0, "creation_date": 1438806195, "post_id": 31841971, "comment_id": 51605703, "body": "@SteveTurczyn good point, updated. Although Doguita&#39;s answer is way better."}], "tags": [], "owner": {"reputation": 2277, "user_id": 3234367, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/FxQ1m.jpg?s=128&g=1", "display_name": "aaron-coding", "link": "https://stackoverflow.com/users/3234367/aaron-coding"}, "is_accepted": false, "score": 1, "last_activity_date": 1438806185, "last_edit_date": 1438806185, "creation_date": 1438805542, "answer_id": 31841971, "question_id": 31841805, "link": "https://stackoverflow.com/questions/31841805/zip-array-of-arrays-to-another-array/31841971#31841971", "title": "Zip array of arrays to another array", "body": "<pre><code>arr2.each_with_index{ |el,i| el.unshift(arr1[i]) }\n</code></pre>\n\n<p>Maybe you like that better?</p>\n"}, {"comments": [{"owner": {"reputation": 2277, "user_id": 3234367, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/FxQ1m.jpg?s=128&g=1", "display_name": "aaron-coding", "link": "https://stackoverflow.com/users/3234367/aaron-coding"}, "edited": false, "score": 0, "creation_date": 1438805780, "post_id": 31841998, "comment_id": 51605484, "body": "That&#39;s a clever use of transpose."}, {"owner": {"reputation": 33085, "user_id": 2423164, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Nxbnp.jpg?s=128&g=1", "display_name": "ndnenkov", "link": "https://stackoverflow.com/users/2423164/ndnenkov"}, "edited": false, "score": 1, "creation_date": 1438806082, "post_id": 31841998, "comment_id": 51605647, "body": "This wouldn&#39;t work if <code>arr2</code> contains arrays with different sizes, isn&#39;t symmetric, doesn&#39;t work if both contain arrays of arrays and OP&#39;s solution is still clearer, but I have to admit that this is pretty clever."}], "tags": [], "owner": {"reputation": 13376, "user_id": 3357295, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3PzYS.jpg?s=128&g=1", "display_name": "Doguita", "link": "https://stackoverflow.com/users/3357295/doguita"}, "is_accepted": true, "score": 12, "last_activity_date": 1438805626, "creation_date": 1438805626, "answer_id": 31841998, "question_id": 31841805, "link": "https://stackoverflow.com/questions/31841805/zip-array-of-arrays-to-another-array/31841998#31841998", "title": "Zip array of arrays to another array", "body": "<p>Another way is:  </p>\n\n<pre><code>arr1.zip(*arr2.transpose)\n# =&gt; [[\"a\", 1, \"foo\"], [\"b\", 2, \"bar\"], [\"c\", 3, \"baz\"]]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": false, "score": 3, "last_activity_date": 1438808527, "last_edit_date": 1438808527, "creation_date": 1438807318, "answer_id": 31842444, "question_id": 31841805, "link": "https://stackoverflow.com/questions/31841805/zip-array-of-arrays-to-another-array/31842444#31842444", "title": "Zip array of arrays to another array", "body": "<p>Here are two other (closely-related) ways:</p>\n\n<pre><code>enum = arr1.to_enum\narr2.map { |a| [enum.next].concat(a) }\n  #=&gt; [[\"a\", 1, \"foo\"], [\"b\", 2, \"bar\"], [\"c\", 3, \"baz\"]] \n</code></pre>\n\n<p>or</p>\n\n<pre><code>arr1_cpy = arr1.dup\narr2.map { |a| [arr1_cpy.shift].concat(a) }\n  #=&gt; [[\"a\", 1, \"foo\"], [\"b\", 2, \"bar\"], [\"c\", 3, \"baz\"]] \n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 6460, "user_id": 6320039, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/U4QjP.jpg?s=128&g=1", "display_name": "Ulysse BN", "link": "https://stackoverflow.com/users/6320039/ulysse-bn"}, "is_accepted": false, "score": 1, "last_activity_date": 1565363473, "last_edit_date": 1565363473, "creation_date": 1565362746, "answer_id": 57432690, "question_id": 31841805, "link": "https://stackoverflow.com/questions/31841805/zip-array-of-arrays-to-another-array/57432690#57432690", "title": "Zip array of arrays to another array", "body": "<p>If you need the content of <code>arr2</code> to be before the content of <code>arr1</code>, you cannot use the <code>#transpose</code> trick. However, you can:</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>arr1.map.with_index { |el, i| [*arr2[i], el] }\n# =&gt; [[1, \"foo\", \"a\"], [2, \"bar\", \"b\"], [3, \"baz\", \"c\"]]\n</code></pre>\n\n<p>Which has the perks of:</p>\n\n<ol>\n<li>not mutating original arrays</li>\n<li>let you choose the order</li>\n</ol>\n\n<hr>\n\n<p>In terms of performance, Doguita's answer seems better:</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>arr1 = %w(foo) * 10_000\narr2 = arr1.length.times.map { |i| [i, i.to_s(2)] }\nBenchmark.bmbm(20) do |x|\n  x.report(\"zip &amp; transpose:\") { arr1.zip(*arr2.transpose) }\n  x.report(\"map &amp; with_index:\") { arr1.map.with_index { |v, i| [v, *arr2[i]] } }\nend\n</code></pre>\n\n<pre><code>Rehearsal --------------------------------------------------------\nzip &amp; transpose:       0.000902   0.000233   0.001135 (  0.001107)\nmap &amp; with_index:      0.004206   0.002308   0.006514 (  0.006828)\n----------------------------------------------- total: 0.007649sec\n\n                           user     system      total        real\nzip &amp; transpose:       0.001474   0.000045   0.001519 (  0.001471)\nmap &amp; with_index:      0.002155   0.000059   0.002214 (  0.002282)\n</code></pre>\n"}], "owner": {"reputation": 730, "user_id": 4167156, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7073d40f13c90a818808d91b093f93ab?s=128&d=identicon&r=PG&f=1", "display_name": "Patosai", "link": "https://stackoverflow.com/users/4167156/patosai"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 443, "favorite_count": 0, "accepted_answer_id": 31841998, "answer_count": 4, "score": 6, "last_activity_date": 1565363473, "creation_date": 1438804938, "last_edit_date": 1438830465, "question_id": 31841805, "link": "https://stackoverflow.com/questions/31841805/zip-array-of-arrays-to-another-array", "title": "Zip array of arrays to another array", "body": "<p>Let's say I have an array</p>\n\n<pre><code>arr1 = [\"a\", \"b\", \"c\"]\n</code></pre>\n\n<p>and I want to zip an array of arrays to it</p>\n\n<pre><code>arr2 = [[1, \"foo\"], [2, \"bar\"], [3, \"baz\"]]\n</code></pre>\n\n<p>so that the end result is</p>\n\n<pre><code>[[\"a\", 1, \"foo\"], [\"b\", 2, \"bar\"], [\"c\", 3, \"baz\"]]\n</code></pre>\n\n<p>Right now what I'm doing is <code>arr1.zip(arr2).map!(&amp;:flatten)</code>, but I'm wondering if there's a better way to do this?</p>\n"}, {"tags": ["ruby", "unit-testing", "rspec"], "comments": [{"owner": {"reputation": 6190, "user_id": 5029266, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/7d4922cf09a8b3d3195cd4d848091ba3?s=128&d=identicon&r=PG", "display_name": "EugZol", "link": "https://stackoverflow.com/users/5029266/eugzol"}, "edited": false, "score": 0, "creation_date": 1438815769, "post_id": 31841803, "comment_id": 51609906, "body": "Can you provide a full code of the method under test please?"}, {"owner": {"reputation": 358, "user_id": 484642, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/XCAhX.gif?s=128&g=1", "display_name": "Max Pollack", "link": "https://stackoverflow.com/users/484642/max-pollack"}, "reply_to_user": {"reputation": 6190, "user_id": 5029266, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/7d4922cf09a8b3d3195cd4d848091ba3?s=128&d=identicon&r=PG", "display_name": "EugZol", "link": "https://stackoverflow.com/users/5029266/eugzol"}, "edited": false, "score": 0, "creation_date": 1438883918, "post_id": 31841803, "comment_id": 51644535, "body": "i will do that right now."}, {"owner": {"reputation": 6190, "user_id": 5029266, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/7d4922cf09a8b3d3195cd4d848091ba3?s=128&d=identicon&r=PG", "display_name": "EugZol", "link": "https://stackoverflow.com/users/5029266/eugzol"}, "edited": false, "score": 0, "creation_date": 1438888746, "post_id": 31841803, "comment_id": 51647253, "body": "Thanks, now please provide full spec&#39;s <code>it</code> block and its parent <code>describe</code> block&#39;s <code>before&#47;after</code> callbacks as well :) Seems like you are not using instance_double correctly."}, {"owner": {"reputation": 6190, "user_id": 5029266, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/7d4922cf09a8b3d3195cd4d848091ba3?s=128&d=identicon&r=PG", "display_name": "EugZol", "link": "https://stackoverflow.com/users/5029266/eugzol"}, "edited": false, "score": 0, "creation_date": 1438890660, "post_id": 31841803, "comment_id": 51648293, "body": "The last thing: where does you controller get <code>@web_client</code> instance variable from?"}, {"owner": {"reputation": 358, "user_id": 484642, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/XCAhX.gif?s=128&g=1", "display_name": "Max Pollack", "link": "https://stackoverflow.com/users/484642/max-pollack"}, "reply_to_user": {"reputation": 6190, "user_id": 5029266, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/7d4922cf09a8b3d3195cd4d848091ba3?s=128&d=identicon&r=PG", "display_name": "EugZol", "link": "https://stackoverflow.com/users/5029266/eugzol"}, "edited": false, "score": 0, "creation_date": 1438896908, "post_id": 31841803, "comment_id": 51651583, "body": "I pass in the instance double in the constructor. Otherwise the value is defaulted in the method argument."}, {"owner": {"reputation": 6190, "user_id": 5029266, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/7d4922cf09a8b3d3195cd4d848091ba3?s=128&d=identicon&r=PG", "display_name": "EugZol", "link": "https://stackoverflow.com/users/5029266/eugzol"}, "edited": false, "score": 0, "creation_date": 1438897456, "post_id": 31841803, "comment_id": 51651844, "body": "The mistery resolved :)"}], "answers": [{"comments": [{"owner": {"reputation": 358, "user_id": 484642, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/XCAhX.gif?s=128&g=1", "display_name": "Max Pollack", "link": "https://stackoverflow.com/users/484642/max-pollack"}, "edited": false, "score": 1, "creation_date": 1438902095, "post_id": 31866323, "comment_id": 51653460, "body": "Thank you SO much! This was driving me nuts. I&#39;m not new to programming, but new to Ruby, and the optional parens are killing me lately. Thank you!"}, {"owner": {"reputation": 6190, "user_id": 5029266, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/7d4922cf09a8b3d3195cd4d848091ba3?s=128&d=identicon&r=PG", "display_name": "EugZol", "link": "https://stackoverflow.com/users/5029266/eugzol"}, "reply_to_user": {"reputation": 358, "user_id": 484642, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/XCAhX.gif?s=128&g=1", "display_name": "Max Pollack", "link": "https://stackoverflow.com/users/484642/max-pollack"}, "edited": false, "score": 0, "creation_date": 1438902323, "post_id": 31866323, "comment_id": 51653523, "body": "Well, I have years of experience with Ruby, and honestly not once did I use optional parens or named arguments. Well, it&#39;s either you who will become more conservative over time/experience with Ruby, or me who will need to start following fancy trends :) You are welcome!"}], "tags": [], "owner": {"reputation": 6190, "user_id": 5029266, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/7d4922cf09a8b3d3195cd4d848091ba3?s=128&d=identicon&r=PG", "display_name": "EugZol", "link": "https://stackoverflow.com/users/5029266/eugzol"}, "is_accepted": true, "score": 1, "last_activity_date": 1438897429, "creation_date": 1438897429, "answer_id": 31866323, "question_id": 31841803, "link": "https://stackoverflow.com/questions/31841803/rspec-instance-double-expectations-and-default-parameter-values/31866323#31866323", "title": "RSpec instance double expectations and default parameter values", "body": "<p>Case closed! Culprit: syntax error.</p>\n\n<p>Change this:</p>\n\n<pre><code>@web_client.make_json_request path, query: { territory: territory_id, status: 'active' }\n.select { |d| d['status'] == 'active' }\n</code></pre>\n\n<p>Into this:</p>\n\n<pre><code>@web_client.make_json_request(path, query: { territory: territory_id, status: 'active' }).select { |d| d['status'] == 'active' }\n</code></pre>\n\n<p>Because you are doing <code>#select</code> on <code>query</code> object, instead of doing in on <code>make_json_request</code>'s result. And it selects nothing from your <code>query</code>, as the spec shows.</p>\n"}], "owner": {"reputation": 358, "user_id": 484642, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/XCAhX.gif?s=128&g=1", "display_name": "Max Pollack", "link": "https://stackoverflow.com/users/484642/max-pollack"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1210, "favorite_count": 1, "accepted_answer_id": 31866323, "answer_count": 1, "score": 1, "last_activity_date": 1438897429, "creation_date": 1438804932, "last_edit_date": 1438890435, "question_id": 31841803, "link": "https://stackoverflow.com/questions/31841803/rspec-instance-double-expectations-and-default-parameter-values", "title": "RSpec instance double expectations and default parameter values", "body": "<p>I'm trying to create a unit test for a class that has a dependency on an object I've created, <code>WebClient</code>, that makes authenticated web requests. I have created an <code>instance_double</code> of <code>WebClient</code> that I'm passing into the object and am going through mocking out its one public method, <code>make_json_request</code>, with a few sets of <code>with</code> expectations so it can return some hashes that I can use in my unit tests.</p>\n\n<p>In the first method I'm testing, the method is called like so:</p>\n\n<pre><code>@web_client.make_json_request '/api/v1/endpoint', query: { territory: territory_id, status: 'active' }\n</code></pre>\n\n<p>And I'm setting up my <code>instance_double</code> like so:</p>\n\n<pre><code>web_client = instance_double('WebClient')\n\nexpect(web_client).to receive(:make_json_request)\n   .with('/api/v1/endpoint', query: { territory: territory_id, status: 'active' })\n   .and_return nil\n</code></pre>\n\n<p>When I attempt to run the tests in rspec, I get the following error:</p>\n\n<pre><code>Failure/Error: state = client.current_state\n #&lt;InstanceDouble(WebClient) (anonymous)&gt; received :make_json_request with unexpected arguments\n   expected: (\"/api/v1/endpoint\", {:query=&gt;{:territory=&gt;1, :status=&gt;\"active\"}})\n        got: (\"/api/v1/endpoint\", {:query=&gt;{}})\n Diff:\n @@ -1,2 +1,2 @@\n -[\"/api/v1/endpoint\", {:query=&gt;{:territory=&gt;1, :status=&gt;\"active\"}}]\n +[\"/api/v1/endpoint\", {:query=&gt;{}}]\n</code></pre>\n\n<p>It seems like it's receiving the message with the default values defined in the method signature, for some reason (method signature below):</p>\n\n<pre><code>def make_json_request(path, method: :get, body: {}, query: {})\n</code></pre>\n\n<p>I know for a fact that it's failing the expectation on the line that is actually passing the named parameter in with the appropriate values, and I'm at a loss of how to work around this. In other cases where I'm using a double, I have not had this problem - it's only in this one case, with named parameters with default values. What am I doing wrong?</p>\n\n<p><strong>Edit</strong>: I was asked for the full code of the method that is being tested:</p>\n\n<pre><code>def load_entities(territory_id)\n    path = '/api/v1/endpoint'\n    @web_client.make_json_request path, query: { territory: territory_id, status: 'active' }\n    .select { |d| d['status'] == 'active' }\nend\n</code></pre>\n\n<p><strong>Edit 2</strong>: The full spec:</p>\n\n<pre><code>describe Loader do\n  let(:territory_id) { 1 }\n  let(:web_client) {\n    web_client = instance_double('WebClient')\n\n    expect(web_client).to receive(:make_json_request)\n      .with('/api/v1/endpoint', query: { territory: territory_id, status: 'active' })\n      .and_return nil\n\n    web_client\n  }\n\n  describe '.current_state' do\n    it 'returns a State' do\n      client = Loader.new territory_id, web_client: web_client\n\n      state = client.current_state\n\n      expect(state).to be_a State\n    end\nend\n</code></pre>\n"}, {"tags": ["javascript", "ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 1785, "user_id": 3373470, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/8f968c218643a09267014e4beaeb4770?s=128&d=identicon&r=PG&f=1", "display_name": "onebree", "link": "https://stackoverflow.com/users/3373470/onebree"}, "edited": false, "score": 0, "creation_date": 1438804562, "post_id": 31841632, "comment_id": 51604856, "body": "Is the JS held in a database? How do you expect to extract it and compare with Ruby? Can you post some code examples, showing a case where JS and Ruby <i>do</i> output the same value?"}, {"owner": {"reputation": 5074, "user_id": 4207394, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/mmfTf.png?s=128&g=1", "display_name": "Deep", "link": "https://stackoverflow.com/users/4207394/deep"}, "edited": false, "score": 1, "creation_date": 1438804604, "post_id": 31841632, "comment_id": 51604873, "body": "What are using for testing capybara/selenium?"}, {"owner": {"reputation": 22725, "user_id": 1068746, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/961c20913b50bacb7ef54e83ad0da0b3?s=128&d=identicon&r=PG", "display_name": "guy mograbi", "link": "https://stackoverflow.com/users/1068746/guy-mograbi"}, "edited": false, "score": 1, "creation_date": 1438805117, "post_id": 31841632, "comment_id": 51605150, "body": "why do you need a browser? why not simply use nodejs to run the javascript?  or perhaps : <a href=\"https://github.com/sstephenson/execjs\" rel=\"nofollow noreferrer\">github.com/sstephenson/execjs</a>"}, {"owner": {"reputation": 646, "user_id": 31352, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2c32b63b4a7dbe19c9327eca4e231bc8?s=128&d=identicon&r=PG", "display_name": "Brad", "link": "https://stackoverflow.com/users/31352/brad"}, "edited": false, "score": 0, "creation_date": 1438807294, "post_id": 31841632, "comment_id": 51606336, "body": "I use the browser to test these now only because I&#39;m testing the whole page where the js runs, and part of testing that page is testing that the server agrees with the client-side calculation.  execjs looks like it might be exactly what I&#39;m asking for..."}], "owner": {"reputation": 646, "user_id": 31352, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2c32b63b4a7dbe19c9327eca4e231bc8?s=128&d=identicon&r=PG", "display_name": "Brad", "link": "https://stackoverflow.com/users/31352/brad"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 34, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1438804364, "creation_date": 1438804364, "question_id": 31841632, "link": "https://stackoverflow.com/questions/31841632/how-can-i-run-a-test-that-compares-js-output-with-ruby-output", "title": "How can I run a test that compares js output with ruby output", "body": "<p>In a rails environment, I have implemented some moderately complicated math in javascript. I've implemented the same math in ruby. If ever they don't agree, I page myself which may or may not wake me up, which is generally undesirable.</p>\n\n<p>Currently I have a small handful of tests that automate the browser and make sure the results agree, but that is very limiting because they're so slow. What I'd like is to be able to call the js and the ruby directly, with the same inputs, and verify that I get the same outputs. This way I could run thousands of tests with randomized inputs and feel moderately confident that I wasn't running into differences in the way numbers are handled in the respective languages.</p>\n\n<p>Any thoughts on how to accomplish this are welcome. Thanks!</p>\n"}, {"tags": ["ruby", "metaprogramming"], "comments": [{"owner": {"reputation": 877, "user_id": 3464137, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/107ae3423c61f79d777f6047b932333f?s=128&d=identicon&r=PG&f=1", "display_name": "egwspiti", "link": "https://stackoverflow.com/users/3464137/egwspiti"}, "edited": false, "score": 0, "creation_date": 1438826425, "post_id": 31841605, "comment_id": 51612512, "body": "Using <code>require</code> inside a <code>module</code> block is not different than using the same <code>require</code> outside of it"}, {"owner": {"reputation": 19, "user_id": 2454936, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7BJRh.png?s=128&g=1", "display_name": "cbaus", "link": "https://stackoverflow.com/users/2454936/cbaus"}, "reply_to_user": {"reputation": 877, "user_id": 3464137, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/107ae3423c61f79d777f6047b932333f?s=128&d=identicon&r=PG&f=1", "display_name": "egwspiti", "link": "https://stackoverflow.com/users/3464137/egwspiti"}, "edited": false, "score": 0, "creation_date": 1438922993, "post_id": 31841605, "comment_id": 51658334, "body": "but i like to define the module names (Client1,Client2) by strings in the bootstrap process, maybe i have ~100 different clients"}], "owner": {"reputation": 19, "user_id": 2454936, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7BJRh.png?s=128&g=1", "display_name": "cbaus", "link": "https://stackoverflow.com/users/2454936/cbaus"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 43, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1438804290, "creation_date": 1438804290, "question_id": 31841605, "link": "https://stackoverflow.com/questions/31841605/declare-new-modules-by-a-string", "title": "Declare new modules by a string", "body": "<p><strong>Background:</strong>\nI write a data sync application in ruby between two remote systems. \nIt should be used for multiple clients with a similar functionality. My idea was to implement a default module and load this module in the application initialize process in a client namespace module (and maybe include additional custom client classes that extend the standard functionality).</p>\n\n<p><strong>generic.rb</strong></p>\n\n<pre>\nmodule DemoClass\n  class A\n    def demo1\n      puts \"Generic::A\"\n    end\n  end\n\n  class B\n    def demo1\n      puts \"Generic::B\"\n    end\n  end\nend\n</pre>\n\n<p>in the initialize process, clients declare a new namespace and include the default functions.</p>\n\n<p>but how can declare a new module by a string?</p>\n\n<pre>\nmodule ClientA\n  require 'generic.rb'\nend\n\nmodule ClientB\n  require 'generic.rb'\n\n  module DemoClass\n    class B\n      def demo1\n        puts \"Client2::DemoClass:B\"\n      end\n    end\n  end\n\nend\n</pre>\n"}, {"tags": ["ruby", "search", "ruby-on-rails-4.1", "mysql2"], "comments": [{"owner": {"reputation": 1785, "user_id": 3373470, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/8f968c218643a09267014e4beaeb4770?s=128&d=identicon&r=PG&f=1", "display_name": "onebree", "link": "https://stackoverflow.com/users/3373470/onebree"}, "edited": false, "score": 2, "creation_date": 1438804359, "post_id": 31841374, "comment_id": 51604753, "body": "Not enough for an answer, but in Rails 4, <code>all(conditions)</code> migth be deprecated. Whether or not, you should use <code>where(attr1: value, attr2: value)</code>"}, {"owner": {"reputation": 2224, "user_id": 4269732, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/swGs5.jpg?s=128&g=1", "display_name": "Qaisar Nadeem", "link": "https://stackoverflow.com/users/4269732/qaisar-nadeem"}, "edited": false, "score": 0, "creation_date": 1438810067, "post_id": 31841374, "comment_id": 51607799, "body": "Can you tell me the value of <code>params[:search]</code> for which this error occures?"}, {"owner": {"reputation": 2140, "user_id": 1450389, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/VYNKp.jpg?s=128&g=1", "display_name": "Serge Pedroza", "link": "https://stackoverflow.com/users/1450389/serge-pedroza"}, "edited": false, "score": 0, "creation_date": 1438810523, "post_id": 31841374, "comment_id": 51607988, "body": "&quot;search&quot;=&gt;&quot;Mentoring, Tutoring&quot;"}], "answers": [{"comments": [{"owner": {"reputation": 1038, "user_id": 708964, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/gIRPQ.png?s=128&g=1", "display_name": "Carl", "link": "https://stackoverflow.com/users/708964/carl"}, "edited": false, "score": 0, "creation_date": 1469281567, "post_id": 31843976, "comment_id": 64477047, "body": "I am trying this, but for some reason it returns every value, just like saying self.all"}, {"owner": {"reputation": 2224, "user_id": 4269732, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/swGs5.jpg?s=128&g=1", "display_name": "Qaisar Nadeem", "link": "https://stackoverflow.com/users/4269732/qaisar-nadeem"}, "reply_to_user": {"reputation": 1038, "user_id": 708964, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/gIRPQ.png?s=128&g=1", "display_name": "Carl", "link": "https://stackoverflow.com/users/708964/carl"}, "edited": false, "score": 0, "creation_date": 1469284050, "post_id": 31843976, "comment_id": 64477632, "body": "What are you passing to <code>search</code> method as paramter?"}], "tags": [], "owner": {"reputation": 2224, "user_id": 4269732, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/swGs5.jpg?s=128&g=1", "display_name": "Qaisar Nadeem", "link": "https://stackoverflow.com/users/4269732/qaisar-nadeem"}, "is_accepted": true, "score": 1, "last_activity_date": 1438814251, "creation_date": 1438814251, "answer_id": 31843976, "question_id": 31841374, "link": "https://stackoverflow.com/questions/31841374/paramssearch-error-after-updating-to-rails-4-1/31843976#31843976", "title": "params[:search] error after updating to Rails 4.1", "body": "<p>After an hour search I came to know that In rails 4.1 onward <code>all</code> method of <code>ActiveRecord</code> does not take any parameters that's why extra argument error occurs. You can try <code>where</code> instead. Here is your search method</p>\n\n<pre><code>def search(string)\n\nreturn [] if string.blank?\n\ncond_text = string.split(', ').map{|w| \"name like ?\"}.join(\" OR \")   \n\ncond_values = string.split(', ').map{|w| \"%#{w}%\"}\n\nself.where(string ? [cond_text, *cond_values] : [])\n\nend\n</code></pre>\n"}], "owner": {"reputation": 2140, "user_id": 1450389, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/VYNKp.jpg?s=128&g=1", "display_name": "Serge Pedroza", "link": "https://stackoverflow.com/users/1450389/serge-pedroza"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 40, "favorite_count": 1, "accepted_answer_id": 31843976, "answer_count": 1, "score": 2, "last_activity_date": 1438814251, "creation_date": 1438803412, "last_edit_date": 1438810569, "question_id": 31841374, "link": "https://stackoverflow.com/questions/31841374/paramssearch-error-after-updating-to-rails-4-1", "title": "params[:search] error after updating to Rails 4.1", "body": "<p>I recently updated my Rails app from 4.0 to 4.1. Everything seems to work fine, except this one line in my Resource_Tag Model that was working before. </p>\n\n<p>Essentially, I want to search/find District_Resources by Tag Name and by the District_Resource Name. </p>\n\n<pre><code>**ex.**\nIf I search the word \"Tutoring\" \n*I should get all District_Resources with the Resource_Tag \"Tutoring\"\n*And all District Resources that include the word Tutoring in it's Name. \n(i.e Tutoring Services)\n</code></pre>\n\n<p>For some reason, I keep getting this error: </p>\n\n<pre><code>wrong number of arguments (1 for 0)\nall(:conditions =&gt;  (string ? [cond_text, *cond_values] : []))\n</code></pre>\n\n<p><strong>CONTROLLER</strong></p>\n\n<pre><code>class ResourceTagsController &lt; ApplicationController\n\n  def index    \n    if params[:search].present?\n\n      #Calls Search Model Method\n      @resource_tags = ResourceTag.search(params[:search])\n      @tagsearch = ResourceTag.search(params[:search])\n      @tag_counts = ResourceTag.count(:group =&gt; :name, \n        :order =&gt; 'count_all DESC', :limit =&gt; 100)\n    else\n      @resource_tags = ResourceTag.all\n    end\n  end\n\nend\n</code></pre>\n\n<p><strong>MODELS</strong></p>\n\n<pre><code>class DistrictResource &lt; ActiveRecord::Base\n\n  has_many :district_mappings, dependent: :destroy\n  has_many :resource_tags, through: :district_mappings\n\n  accepts_nested_attributes_for :resource_tags\nend\n\nclass ResourceTag &lt; ActiveRecord::Base\n\n  #create relationships with all resource and mapping models\n  has_many :district_mappings, dependent: :destroy\n  has_many :district_resources, through: :district_mappings\n\n  #I GET AN ERROR HERE\n  def self.search(string)\n    return [] if string.blank?\n\n    cond_text = string.split(', ').map{|w| \"name like ?\"}.join(\" OR \")   \n\n    cond_values = string.split(', ').map{|w| \"%#{w}%\"}\n\n    all(:conditions =&gt;  (string ? [cond_text, *cond_values] : []))\n  end\n\nend\n</code></pre>\n\n<p><strong>VIEWS</strong></p>\n\n<pre><code>&lt;%= form_tag(resource_tags_path, :method =&gt; 'get', class: \"navbar-search\") do %&gt;\n  &lt;form&gt;\n    &lt;%= text_field_tag :search, params[:search], :class =&gt; \"search-query form-control\" %&gt;\n    &lt;%= submit_tag \"Search\", :name =&gt; nil, :class =&gt; \"search-button\" %&gt;\n  &lt;/form&gt;\n&lt;% end %&gt;\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "migration"], "answers": [{"comments": [{"owner": {"reputation": 500, "user_id": 5094718, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/43be6a541d41bbd9b6f767be98e9292a?s=128&d=identicon&r=PG&f=1", "display_name": "Leslie Tate", "link": "https://stackoverflow.com/users/5094718/leslie-tate"}, "edited": false, "score": 0, "creation_date": 1438803239, "post_id": 31841284, "comment_id": 51604094, "body": "Thank you so much! That step flew right passed me. Would upvote but not enough reputation yet!"}, {"owner": {"reputation": 2277, "user_id": 3234367, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/FxQ1m.jpg?s=128&g=1", "display_name": "aaron-coding", "link": "https://stackoverflow.com/users/3234367/aaron-coding"}, "reply_to_user": {"reputation": 500, "user_id": 5094718, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/43be6a541d41bbd9b6f767be98e9292a?s=128&d=identicon&r=PG&f=1", "display_name": "Leslie Tate", "link": "https://stackoverflow.com/users/5094718/leslie-tate"}, "edited": false, "score": 0, "creation_date": 1438804182, "post_id": 31841284, "comment_id": 51604632, "body": "@KennyEllis You can still press the checkmark right above the arrow because you asked the question. That&#39;s to &quot;Approve&quot; the answer."}], "tags": [], "owner": {"reputation": 22303, "user_id": 2456433, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NiN8K.jpg?s=128&g=1", "display_name": "infused", "link": "https://stackoverflow.com/users/2456433/infused"}, "is_accepted": true, "score": 1, "last_activity_date": 1438803110, "creation_date": 1438803110, "answer_id": 31841284, "question_id": 31841219, "link": "https://stackoverflow.com/questions/31841219/rails-migration-controller-is-not-created/31841284#31841284", "title": "Rails- Migration controller is not created", "body": "<p>You need to generate the controller:</p>\n\n<pre><code>rails generate controller databases\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 500, "user_id": 5094718, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/43be6a541d41bbd9b6f767be98e9292a?s=128&d=identicon&r=PG&f=1", "display_name": "Leslie Tate", "link": "https://stackoverflow.com/users/5094718/leslie-tate"}, "edited": false, "score": 0, "creation_date": 1438804751, "post_id": 31841651, "comment_id": 51604947, "body": "Awesome! Great insight @Keen Learner!"}], "tags": [], "owner": {"reputation": 31319, "user_id": 981183, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/88dd7155ef7c0e5f43ab8d1a9efdecab?s=128&d=identicon&r=PG&f=1", "display_name": "K M Rakibul Islam", "link": "https://stackoverflow.com/users/981183/k-m-rakibul-islam"}, "is_accepted": false, "score": 2, "last_activity_date": 1438804403, "creation_date": 1438804403, "answer_id": 31841651, "question_id": 31841219, "link": "https://stackoverflow.com/questions/31841219/rails-migration-controller-is-not-created/31841651#31841651", "title": "Rails- Migration controller is not created", "body": "<p>As a newcomer to Rails, <code>Scaffolding</code> might be another handy option. <code>Scaffolding</code> can be used to generate some of the major parts of a Rails application such as models, views and controllers for a new resource.</p>\n\n<pre><code>rails generate scaffold Database date:date endpoint:text domain:string\n</code></pre>\n\n<p>That way, you don't have to worry about creating the models, views and controllers separately for your newly added resource.</p>\n"}], "owner": {"reputation": 500, "user_id": 5094718, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/43be6a541d41bbd9b6f767be98e9292a?s=128&d=identicon&r=PG&f=1", "display_name": "Leslie Tate", "link": "https://stackoverflow.com/users/5094718/leslie-tate"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 161, "favorite_count": 1, "accepted_answer_id": 31841284, "answer_count": 2, "score": 1, "last_activity_date": 1438845446, "creation_date": 1438802923, "last_edit_date": 1438845446, "question_id": 31841219, "link": "https://stackoverflow.com/questions/31841219/rails-migration-controller-is-not-created", "title": "Rails- Migration controller is not created", "body": "<p>I'm new to rails, my command: </p>\n\n<pre><code>bin/rails generate model database Date:date Endpoint:text User:string \n</code></pre>\n\n<p>Domain:string</p>\n\n<p>into the command line which then generated:</p>\n\n<p>invoke  active_record</p>\n\n<pre><code>  create    db/migrate/20150805174248_create_databases.rb\n  create    app/models/database.rb\n  invoke    test_unit\n  create      test/models/database_test.rb\n  create      test/fixtures/databases.yml\n</code></pre>\n\n<p>and after I ran:</p>\n\n<pre><code> bin/rake db:migrate \n</code></pre>\n\n<p>However, when following this tutorial <a href=\"http://guides.rubyonrails.org/getting_started.html\" rel=\"nofollow\">http://guides.rubyonrails.org/getting_started.html</a>  SECTION(5.3)</p>\n\n<p>When trying to save data to the controller/database it tells me to access  app/controllers/articles_controller.rb (articles being the variable name they used).</p>\n\n<p>The problem I face is that databases_controller.rb was never created in the first place! Can anyone provide any insight? thanks!</p>\n\n<p><strong>NEW QUESTION</strong> The file databases_controller.rb is empty. I have created one before a few weeks ago and it was full with def index,new, edit, C,R,U,D. However this one is empty. As I'm supposed to add </p>\n\n<pre><code>def create\n  @article = Article.new(params[:article])\n  @article.save\n  redirect_to @article \nend\n</code></pre>\n\n<p>to the create portion </p>\n"}, {"tags": ["ruby-on-rails", "ruby", "rspec", "nokogiri", "libxml2"], "answers": [{"comments": [{"owner": {"reputation": 36228, "user_id": 63761, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/b9a099f02437916c0a76f8326966be17?s=128&d=identicon&r=PG", "display_name": "Meltemi", "link": "https://stackoverflow.com/users/63761/meltemi"}, "edited": false, "score": 0, "creation_date": 1438809883, "post_id": 31841517, "comment_id": 51607706, "body": "Looks like this might have been fixed back in March but <code>1.6.7</code> still not released?!?  If you&#39;re familiar with the library do you know a stable branch with the patch that I can grab until these guys get around to v1.6.7 official?"}, {"owner": {"reputation": 48004, "user_id": 216513, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/30a45c64b2ef288f7ec098c5fb353a22?s=128&d=identicon&r=PG", "display_name": "nathanvda", "link": "https://stackoverflow.com/users/216513/nathanvda"}, "reply_to_user": {"reputation": 36228, "user_id": 63761, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/b9a099f02437916c0a76f8326966be17?s=128&d=identicon&r=PG", "display_name": "Meltemi", "link": "https://stackoverflow.com/users/63761/meltemi"}, "edited": false, "score": 0, "creation_date": 1438858281, "post_id": 31841517, "comment_id": 51627202, "body": "Indeed. I am guessing releasing nokogiri is not so easy, to include all the binaries/dependencies, and building for different platforms as well. So afaik you cannot just install the gem from github (which you could easily do with a pure ruby gem)."}], "tags": [], "owner": {"reputation": 48004, "user_id": 216513, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/30a45c64b2ef288f7ec098c5fb353a22?s=128&d=identicon&r=PG", "display_name": "nathanvda", "link": "https://stackoverflow.com/users/216513/nathanvda"}, "is_accepted": false, "score": 0, "last_activity_date": 1438803974, "creation_date": 1438803974, "answer_id": 31841517, "question_id": 31841180, "link": "https://stackoverflow.com/questions/31841180/whats-causing-validity-error-id-some-id-already-defined/31841517#31841517", "title": "What&#39;s causing &quot;validity error : ID &lt;some-id&gt; already defined&quot;", "body": "<p>It is fixed, but not yet released. It will be released in the 1.6.7 version.</p>\n\n<p>Source: </p>\n\n<ul>\n<li><a href=\"https://github.com/rubys/nokogumbo/issues/21\" rel=\"nofollow\">https://github.com/rubys/nokogumbo/issues/21</a></li>\n<li><a href=\"https://github.com/sparklemotion/nokogiri/issues/1262\" rel=\"nofollow\">https://github.com/sparklemotion/nokogiri/issues/1262</a></li>\n</ul>\n\n<p>It does work, but the output is annoying :)</p>\n"}], "owner": {"reputation": 36228, "user_id": 63761, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/b9a099f02437916c0a76f8326966be17?s=128&d=identicon&r=PG", "display_name": "Meltemi", "link": "https://stackoverflow.com/users/63761/meltemi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 865, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1438884299, "creation_date": 1438802825, "last_edit_date": 1438884299, "question_id": 31841180, "link": "https://stackoverflow.com/questions/31841180/whats-causing-validity-error-id-some-id-already-defined", "title": "What&#39;s causing &quot;validity error : ID &lt;some-id&gt; already defined&quot;", "body": "<p>These just started showing up in my tests and I'm not sure where it's coming from:</p>\n\n<pre><code>element section: validity error : ID with-header already defined\nelement section: validity error : ID with-header already defined\nelement section: validity error : ID with-header already defined\n</code></pre>\n\n<p><code>with-header</code> is the ID</p>\n\n<p>These errors (warnings?!? because tests pass) would appear to be erroneous as I can look at the page and there is only one <code>#with-header</code> so not sure what's throwing them and why?</p>\n\n<p>My preliminary research uncovers <a href=\"https://github.com/sparklemotion/nokogiri/issues/1208\" rel=\"nofollow\">this Nokogiri issue</a> (<a href=\"https://github.com/sparklemotion/nokogiri/issues/1196\" rel=\"nofollow\">and another</a>) pointing the finger at <strong>libxml2</strong> but the issue(s) appear closed so why are these only now appearing for me? </p>\n\n<p>Any ideas how to fix or at least suppress the warnings so they don't vomit all over my tests?</p>\n\n<p>Using:</p>\n\n<ul>\n<li><strong>RSpec</strong> (3.3.2)</li>\n<li><strong>Nokogiri</strong> (1.6.6.2)</li>\n<li><strong>libxml2</strong>: stable 2.9.2 (bottled), HEAD</li>\n</ul>\n"}, {"tags": ["ruby-on-rails", "ruby", "postgresql", "activerecord", "bigdecimal"], "comments": [{"owner": {"reputation": 3614, "user_id": 1569930, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/7bc43a689388dd4697947ffe8f4c9dcd?s=128&d=identicon&r=PG", "display_name": "eirikir", "link": "https://stackoverflow.com/users/1569930/eirikir"}, "edited": false, "score": 0, "creation_date": 1438803304, "post_id": 31840998, "comment_id": 51604127, "body": "Isn&#39;t this a duplicate of the question you linked to? You&#39;re comparing a decimal with scale of 6 to a DB column with a scale of 4, so you need to round just as the answer in the linked question states"}, {"owner": {"reputation": 2080, "user_id": 670433, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/6dabedc47915bc771055f848ef07fc11?s=128&d=identicon&r=PG", "display_name": "s2t2", "link": "https://stackoverflow.com/users/670433/s2t2"}, "reply_to_user": {"reputation": 3614, "user_id": 1569930, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/7bc43a689388dd4697947ffe8f4c9dcd?s=128&d=identicon&r=PG", "display_name": "eirikir", "link": "https://stackoverflow.com/users/1569930/eirikir"}, "edited": false, "score": 0, "creation_date": 1438804114, "post_id": 31840998, "comment_id": 51604593, "body": "its close but the accepted solution to that question advocates using <code>#round</code>, which applied to this example would call for an assignment of <code>position = &quot;0.309624&quot;.to_f.round(4)</code>, which produces the same invalid comparison noted in this question."}, {"owner": {"reputation": 3614, "user_id": 1569930, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/7bc43a689388dd4697947ffe8f4c9dcd?s=128&d=identicon&r=PG", "display_name": "eirikir", "link": "https://stackoverflow.com/users/1569930/eirikir"}, "edited": false, "score": 0, "creation_date": 1438812082, "post_id": 31840998, "comment_id": 51608631, "body": "possible duplicate of <a href=\"http://stackoverflow.com/questions/6297230/how-can-i-compare-a-bigdecimal-with-activerecord-decimal-field\">How can I compare a BigDecimal with ActiveRecord decimal field?</a>"}], "answers": [{"comments": [{"owner": {"reputation": 3614, "user_id": 1569930, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/7bc43a689388dd4697947ffe8f4c9dcd?s=128&d=identicon&r=PG", "display_name": "eirikir", "link": "https://stackoverflow.com/users/1569930/eirikir"}, "edited": false, "score": 0, "creation_date": 1438893982, "post_id": 31841444, "comment_id": 51650132, "body": "Isn&#39;t this exactly what the linked answer states? <code>BigDecimal.new</code> is redundant: <code>&quot;0.309624&quot;.to_d.round(4) == BigDecimal.new(&quot;0.309624&quot;, 4).round(4)</code>"}], "tags": [], "owner": {"reputation": 2080, "user_id": 670433, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/6dabedc47915bc771055f848ef07fc11?s=128&d=identicon&r=PG", "display_name": "s2t2", "link": "https://stackoverflow.com/users/670433/s2t2"}, "is_accepted": true, "score": 0, "last_activity_date": 1438812430, "last_edit_date": 1438812430, "creation_date": 1438803724, "answer_id": 31841444, "question_id": 31840998, "link": "https://stackoverflow.com/questions/31840998/how-to-properly-compare-database-persisted-bigdecimal-to-another-value-using-act/31841444#31841444", "title": "How to properly compare database-persisted BigDecimal to another value using ActiveRecord?", "body": "<p>I think I found the answer, which is to convert the position to BigDecimal before comparison:</p>\n\n<pre><code>position = BigDecimal.new(\"0.309624\", 4) # where 4 is the decimal scale.\n</code></pre>\n\n<p>It seems so simple now...</p>\n\n<p>edit: the BigDecimal also needs to be rounded before storing in the database and when comparing against database value:</p>\n\n<pre><code>position = BigDecimal.new(\"0.309624\", 4).round(4)\n</code></pre>\n"}], "owner": {"reputation": 2080, "user_id": 670433, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/6dabedc47915bc771055f848ef07fc11?s=128&d=identicon&r=PG", "display_name": "s2t2", "link": "https://stackoverflow.com/users/670433/s2t2"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 442, "favorite_count": 1, "accepted_answer_id": 31841444, "answer_count": 1, "score": 0, "last_activity_date": 1438812621, "creation_date": 1438802190, "last_edit_date": 1495539835, "question_id": 31840998, "link": "https://stackoverflow.com/questions/31840998/how-to-properly-compare-database-persisted-bigdecimal-to-another-value-using-act", "title": "How to properly compare database-persisted BigDecimal to another value using ActiveRecord?", "body": "<p>The objective is to use ActiveRecord methods like <code>#where</code> and <code>#first_or_create</code> to properly compare a database-persisted BigDecimal value against a Float or String value.</p>\n\n<p>create_things migration:</p>\n\n<pre><code>t.decimal :position, :precision =&gt; 10, :scale =&gt; 4\n</code></pre>\n\n<p>relevant code:</p>\n\n<pre><code>position = \"0.309624\"\nthing = Thing.where(:position =&gt; position).first_or_create\nthing2 = Thing.where(:position =&gt; position).first_or_initialize\n</code></pre>\n\n<p>the issue:</p>\n\n<p>I'm expecting <code>Thing.count</code> to equal 1 and <code>thing2.persisted?</code> to be <code>true</code>, meaning Active Record was able to properly compare <code>position</code> with <code>thing.position</code> to find the first record and assign it to <code>thing2</code>.</p>\n\n<p>debugging:</p>\n\n<pre><code>thing.position #&gt; #&lt;BigDecimal:7ffbdabe42a8,'0.309624E0',9(18)&gt;\nthing.position == position #&gt; false\n</code></pre>\n\n<p>it's possible to do a valid comparison by converting both variables... </p>\n\n<pre><code>thing.position.to_s == position#&gt; true\nthing.position.to_f == position.to_f #&gt; true\n</code></pre>\n\n<p>... but this requires a conversion of the database-persisted value. Is there a way to make this happen using <code>#where</code> and/or <code>#first_or_create</code>?</p>\n\n<p>see also <a href=\"https://stackoverflow.com/questions/6297230/how-can-i-compare-a-bigdecimal-with-activerecord-decimal-field\">How can I compare a BigDecimal with ActiveRecord decimal field?</a></p>\n\n<p>edit: this question is different from the related question in that the accepted solution to the related question advocates rounding a float, which applied to this example would call for an assignment of <code>position = \"0.309624\".to_f.round(4)</code>, which still produces an invalid comparison.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4", "devise", "form-for"], "comments": [{"owner": {"reputation": 8117, "user_id": 1207687, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/cOUI4.jpg?s=128&g=1", "display_name": "Wes Foster", "link": "https://stackoverflow.com/users/1207687/wes-foster"}, "edited": false, "score": 0, "creation_date": 1438802145, "post_id": 31840911, "comment_id": 51603466, "body": "Based on your routes.rb file, you should be using <code>all_users_path</code>. Run <code>rake routes</code> in your console and post its results."}, {"owner": {"reputation": 7975, "user_id": 1577357, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/9db0054df76cc4b80888ff713527a652?s=128&d=identicon&r=PG", "display_name": "Zulhilmi Zainudin", "link": "https://stackoverflow.com/users/1577357/zulhilmi-zainudin"}, "reply_to_user": {"reputation": 8117, "user_id": 1207687, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/cOUI4.jpg?s=128&g=1", "display_name": "Wes Foster", "link": "https://stackoverflow.com/users/1207687/wes-foster"}, "edited": false, "score": 0, "creation_date": 1438802424, "post_id": 31840911, "comment_id": 51603631, "body": "Just updated my questions with rake routes result."}, {"owner": {"reputation": 8117, "user_id": 1207687, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/cOUI4.jpg?s=128&g=1", "display_name": "Wes Foster", "link": "https://stackoverflow.com/users/1207687/wes-foster"}, "edited": false, "score": 0, "creation_date": 1438802703, "post_id": 31840911, "comment_id": 51603790, "body": "There isn&#39;t a <code>users_path</code> specific. Furthermore, there is not a <code>post</code>, <code>put</code>, or <code>patch</code> route either, so the form is looking for a non-existent path."}], "answers": [{"comments": [{"owner": {"reputation": 8117, "user_id": 1207687, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/cOUI4.jpg?s=128&g=1", "display_name": "Wes Foster", "link": "https://stackoverflow.com/users/1207687/wes-foster"}, "edited": false, "score": 1, "creation_date": 1438803489, "post_id": 31841342, "comment_id": 51604217, "body": "Worth mentioning that using a <code>GET</code> request for your edit form is a bad idea."}, {"owner": {"reputation": 5074, "user_id": 4207394, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/mmfTf.png?s=128&g=1", "display_name": "Deep", "link": "https://stackoverflow.com/users/4207394/deep"}, "reply_to_user": {"reputation": 8117, "user_id": 1207687, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/cOUI4.jpg?s=128&g=1", "display_name": "Wes Foster", "link": "https://stackoverflow.com/users/1207687/wes-foster"}, "edited": false, "score": 0, "creation_date": 1438803638, "post_id": 31841342, "comment_id": 51604299, "body": "Yup that is, but it all depends on the user who needs to use it. The best option is using the resources, it saves a lot of overhead (convention over configuration)."}, {"owner": {"reputation": 7975, "user_id": 1577357, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/9db0054df76cc4b80888ff713527a652?s=128&d=identicon&r=PG", "display_name": "Zulhilmi Zainudin", "link": "https://stackoverflow.com/users/1577357/zulhilmi-zainudin"}, "edited": false, "score": 0, "creation_date": 1438805065, "post_id": 31841342, "comment_id": 51605119, "body": "@Deep thanks. Now I use <code>resources</code>. But why I couldn&#39;t print the user role? Screenshot: <a href=\"http://i.imgur.com/h6K77j1.png\" rel=\"nofollow noreferrer\">i.imgur.com/h6K77j1.png</a> Form code: <a href=\"https://gist.github.com/anonymous/4261cc34b2844fb05da0\" rel=\"nofollow noreferrer\">gist.github.com/anonymous/4261cc34b2844fb05da0</a>"}], "tags": [], "owner": {"reputation": 5074, "user_id": 4207394, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/mmfTf.png?s=128&g=1", "display_name": "Deep", "link": "https://stackoverflow.com/users/4207394/deep"}, "is_accepted": true, "score": 4, "last_activity_date": 1438831334, "last_edit_date": 1495539871, "creation_date": 1438803308, "answer_id": 31841342, "question_id": 31840911, "link": "https://stackoverflow.com/questions/31840911/undefined-method-user-path-in-form-for/31841342#31841342", "title": "Undefined method `user_path&#39; in form_for", "body": "<p>You have in your routes file:</p>\n\n<pre><code>devise_for :users\n</code></pre>\n\n<p>which adds:</p>\n\n<pre><code>        new_user_session GET    /users/sign_in(.:format)                   devise/sessions#new\n            user_session POST   /users/sign_in(.:format)                   devise/sessions#create\n    destroy_user_session DELETE /users/sign_out(.:format)                  devise/sessions#destroy\n           user_password POST   /users/password(.:format)                  devise/passwords#create\n       new_user_password GET    /users/password/new(.:format)              devise/passwords#new\n      edit_user_password GET    /users/password/edit(.:format)             devise/passwords#edit\n                         PATCH  /users/password(.:format)                  devise/passwords#update\n                         PUT    /users/password(.:format)                  devise/passwords#update\ncancel_user_registration GET    /users/cancel(.:format)                    devise/registrations#cancel\n       user_registration POST   /users(.:format)                           devise/registrations#create\n   new_user_registration GET    /users/sign_up(.:format)                   devise/registrations#new\n  edit_user_registration GET    /users/edit(.:format)                      devise/registrations#edit\n                         PATCH  /users(.:format)                           devise/registrations#update\n                         PUT    /users(.:format)                           devise/registrations#update\n                         DELETE /users(.:format)                           devise/registrations#destroy\n</code></pre>\n\n<p>Now what you want to do is allow admin to edit the users. For this you have defined:</p>\n\n<pre><code>  # list of all users\n  get 'users',          to: 'users#index',  as: :all_users\n\n  # single user\n  get 'users/:id',      to: 'users#show',    as: :single_user\n\n  # edit user\n  get 'users/:id/edit', to: 'users#edit',    as: :edit_user\n</code></pre>\n\n<p>which generates:</p>\n\n<pre><code>       all_users GET    /users(.:format)                           users#index\n     single_user GET    /users/:id(.:format)                       users#show\n       edit_user GET    /users/:id/edit(.:format)                  users#edit\n</code></pre>\n\n<p>Now in the form you are writing <code>&lt;%= form_for(@user) do |f| %&gt;</code> which by default is searching for <code>user_path</code>. So instead of the different routes you are defining just add:</p>\n\n<pre><code>resources :users\n</code></pre>\n\n<p>which will generate all the necessary routes you require and map the form to the correct path. This will save a lot of overhead like using only this <code>&lt;%= form_for(@user) do |f| %&gt;</code> will take you to the create action when the user is a new object and it will take you to the update action if the user is a persisted object.</p>\n\n<p>Or if you need to user your routes then you need to do:</p>\n\n<pre><code>&lt;%= form_for(@user, url: edit_user_path, method: :get) do |f| %&gt;\n</code></pre>\n\n<p>But it always a bad idea to use <code>GET</code> method in form submission. These links might help you:</p>\n\n<p><a href=\"https://stackoverflow.com/questions/504947/when-should-i-use-get-or-post-method-whats-the-difference-between-them\">When should I use GET or POST method? What&#39;s the difference between them?</a></p>\n\n<p><a href=\"https://stackoverflow.com/questions/46585/when-do-you-use-post-and-when-do-you-use-get\">When do you use POST and when do you use GET?</a></p>\n\n<p><strong>Update:</strong></p>\n\n<p>As you need to assign a single role to the user from multiple it is better to use a select box like this:</p>\n\n<pre><code>f.collection_select(:role_id, Role.all, :id, :name)\n</code></pre>\n\n<p>Assuming that the <code>user</code> table has attribute <code>role_id</code> and the <code>role</code> table has attribute <code>name</code>. So this will allow you to assign a role to user. What you are printing is <code>user.role</code> which will always print the association instead of the role name.</p>\n\n<p>Hope this helps.</p>\n"}, {"tags": [], "owner": {"reputation": 97, "user_id": 4630523, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/5a872b8cff58e4f43aff075690ddf403?s=128&d=identicon&r=PG&f=1", "display_name": "wolf3D", "link": "https://stackoverflow.com/users/4630523/wolf3d"}, "is_accepted": false, "score": 0, "last_activity_date": 1438803319, "creation_date": 1438803319, "answer_id": 31841345, "question_id": 31840911, "link": "https://stackoverflow.com/questions/31840911/undefined-method-user-path-in-form-for/31841345#31841345", "title": "Undefined method `user_path&#39; in form_for", "body": "<p>Try using edit_user_path instead of user_path if you want to link to the edit page. If you take a look at your routes.rb file there is no route for user_path.</p>\n"}], "owner": {"reputation": 7975, "user_id": 1577357, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/9db0054df76cc4b80888ff713527a652?s=128&d=identicon&r=PG", "display_name": "Zulhilmi Zainudin", "link": "https://stackoverflow.com/users/1577357/zulhilmi-zainudin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3388, "favorite_count": 1, "accepted_answer_id": 31841342, "answer_count": 2, "score": 2, "last_activity_date": 1506039069, "creation_date": 1438801859, "last_edit_date": 1495535237, "question_id": 31840911, "link": "https://stackoverflow.com/questions/31840911/undefined-method-user-path-in-form-for", "title": "Undefined method `user_path&#39; in form_for", "body": "<p>I have User model and Role model.</p>\n\n<pre><code>class User &lt; ActiveRecord::Base\n\n  # Include default devise modules. Others available are:\n  # :confirmable, :lockable, :timeoutable and :omniauthable\n  devise :database_authenticatable, :registerable,\n         :recoverable, :rememberable, :trackable, :validatable\n\n  has_one :role\n\n  def has_role?(role_name)\n    self.role == Role.where(name: role_name).first\n  end \n\n  def add_role(role_name)\n    role = Role.where(name: role_name).first\n    self.role = role unless  role.blank?\n  end\n\nend\n\nclass Role &lt; ActiveRecord::Base\n    belongs_to :user\nend\n</code></pre>\n\n<p>For now, my app have 2 user roles; Admin &amp; Member.</p>\n\n<p>What I'm trying to do now is, giving ability to the Admin to change the member's role (from Admin to Member OR from Member to Admin) using <code>select</code> tag.</p>\n\n<p>I have this inside my <strong>views/users/_form.html.erb</strong></p>\n\n<pre><code>&lt;div class=\"col-md-4\"&gt;\n\n&lt;%= form_for(@user) do |f| %&gt;\n  &lt;% if @user.errors.any? %&gt;\n    &lt;div id=\"error_explanation\"&gt;\n      &lt;p&gt;&lt;%= pluralize(@user.errors.count, \"error\") %&gt; prohibited this user from being saved:&lt;/p&gt;\n\n      &lt;ul&gt;\n      &lt;% @user.errors.full_messages.each do |message| %&gt;\n        &lt;li&gt;&lt;%= message %&gt;&lt;/li&gt;\n      &lt;% end %&gt;\n      &lt;/ul&gt;\n    &lt;/div&gt;\n  &lt;% end %&gt;\n\n  &lt;div class=\"form-group\"&gt;\n    &lt;%= f.label :email %&gt;&lt;br&gt;\n    &lt;%= f.text_field :email, class: \"form-control\" %&gt;\n\n    &lt;%= f.label :role %&gt;\n    &lt;%= f.select :role_id, options_for_select(Role.all.map{|c| [c.name, c.id]}, f.object.role_id)%&gt;   \n  &lt;/div&gt;\n  &lt;%= f.submit 'Save user', :class =&gt; 'btn btn-primary' %&gt;\n  &lt;%= link_to 'Back', users_path, class: \"btn btn-primary\" %&gt;\n  &lt;% end %&gt;\n\n&lt;/div&gt;\n</code></pre>\n\n<p>This is my User controller:</p>\n\n<pre><code>class UsersController &lt; ApplicationController\n    before_action :authenticate_user!\n\n    before_action :set_user, only: [:show, :edit, :update, :destroy]\n\n  # GET /users\n  # GET /users.json\n  def index\n    @users = User.all\n  end\n\n  # GET /users/1\n  # GET /users/1.json\n  def show\n  end\n\n  # GET /users/1/edit\n  def edit\n  end\n\n  # PATCH/PUT /users/1\n  # PATCH/PUT /users/1.json\n  def update\n    respond_to do |format|\n      if @user.update(user_params)\n        format.html { redirect_to users_path, notice: 'user was successfully updated.' }\n        format.json { render :show, status: :ok, location: @user }\n      else\n        format.html { render :edit }\n        format.json { render json: @user.errors, status: :unprocessable_entity }\n      end\n    end\n  end\n\n  # DELETE /users/1\n  # DELETE /users/1.json\n  def destroy\n    @user.destroy\n    respond_to do |format|\n      format.html { redirect_to users_url, notice: 'user was successfully destroyed.' }\n      format.json { head :no_content }\n    end\n  end\n\n  private\n    # Use callbacks to share common setup or constraints between actions.\n    def set_user\n      @user = User.find(params[:id])\n    end\n\n    # Never trust parameters from the scary internet, only allow the white list through.\n    def user_params\n      params.require(:user).permit(:email, :encrypted_password)\n    end\nend\n</code></pre>\n\n<p>And this is my <strong>routes.rb</strong>:</p>\n\n<pre><code>Rails.application.routes.draw do\n\n  devise_for :users\n  root \"orders#index\"\n\n  resources :orders\n  resources :drinks\n  resources :foods\n\n  # link to change foods/drinks status from 0 (processing) to 1 (done)\n  get '/orders/:id/update_foods_status',  to: 'orders#update_foods_status',   as: :update_foods_status\n  get '/orders/:id/update_drinks_status', to: 'orders#update_drinks_status',  as: :update_drinks_status\n\n  # kitchen foods orders\n  get 'kitchen_foods',  to: 'kitchen_foods#index'\n\n  # kitchen drinks orders\n  get 'kitchen_drinks', to: 'kitchen_drinks#index'\n\n  # list of all users\n  get 'users',          to: 'users#index',  as: :all_users\n\n  # single user\n  get 'users/:id',      to: 'users#show',    as: :single_user\n\n  # edit user\n  get 'users/:id/edit', to: 'users#edit',    as: :edit_user  \nend\n</code></pre>\n\n<p><strong>UPDATE</strong>: This is what I get after run <code>rake routes</code></p>\n\n<pre><code>Prefix Verb   URI Pattern                                Controller#Action\n        new_user_session GET    /users/sign_in(.:format)                   devise/sessions#new\n            user_session POST   /users/sign_in(.:format)                   devise/sessions#create\n    destroy_user_session DELETE /users/sign_out(.:format)                  devise/sessions#destroy\n           user_password POST   /users/password(.:format)                  devise/passwords#create\n       new_user_password GET    /users/password/new(.:format)              devise/passwords#new\n      edit_user_password GET    /users/password/edit(.:format)             devise/passwords#edit\n                         PATCH  /users/password(.:format)                  devise/passwords#update\n                         PUT    /users/password(.:format)                  devise/passwords#update\ncancel_user_registration GET    /users/cancel(.:format)                    devise/registrations#cancel\n       user_registration POST   /users(.:format)                           devise/registrations#create\n   new_user_registration GET    /users/sign_up(.:format)                   devise/registrations#new\n  edit_user_registration GET    /users/edit(.:format)                      devise/registrations#edit\n                         PATCH  /users(.:format)                           devise/registrations#update\n                         PUT    /users(.:format)                           devise/registrations#update\n                         DELETE /users(.:format)                           devise/registrations#destroy\n                    root GET    /                                          orders#index\n                  orders GET    /orders(.:format)                          orders#index\n                         POST   /orders(.:format)                          orders#create\n               new_order GET    /orders/new(.:format)                      orders#new\n              edit_order GET    /orders/:id/edit(.:format)                 orders#edit\n                   order GET    /orders/:id(.:format)                      orders#show\n                         PATCH  /orders/:id(.:format)                      orders#update\n                         PUT    /orders/:id(.:format)                      orders#update\n                         DELETE /orders/:id(.:format)                      orders#destroy\n                  drinks GET    /drinks(.:format)                          drinks#index\n                         POST   /drinks(.:format)                          drinks#create\n               new_drink GET    /drinks/new(.:format)                      drinks#new\n              edit_drink GET    /drinks/:id/edit(.:format)                 drinks#edit\n                   drink GET    /drinks/:id(.:format)                      drinks#show\n                         PATCH  /drinks/:id(.:format)                      drinks#update\n                         PUT    /drinks/:id(.:format)                      drinks#update\n                         DELETE /drinks/:id(.:format)                      drinks#destroy\n                   foods GET    /foods(.:format)                           foods#index\n                         POST   /foods(.:format)                           foods#create\n                new_food GET    /foods/new(.:format)                       foods#new\n               edit_food GET    /foods/:id/edit(.:format)                  foods#edit\n                    food GET    /foods/:id(.:format)                       foods#show\n                         PATCH  /foods/:id(.:format)                       foods#update\n                         PUT    /foods/:id(.:format)                       foods#update\n                         DELETE /foods/:id(.:format)                       foods#destroy\n     update_foods_status GET    /orders/:id/update_foods_status(.:format)  orders#update_foods_status\n    update_drinks_status GET    /orders/:id/update_drinks_status(.:format) orders#update_drinks_status\n           kitchen_foods GET    /kitchen_foods(.:format)                   kitchen_foods#index\n          kitchen_drinks GET    /kitchen_drinks(.:format)                  kitchen_drinks#index\n               all_users GET    /users(.:format)                           users#index\n             single_user GET    /users/:id(.:format)                       users#show\n               edit_user GET    /users/:id/edit(.:format)                  users#edit\n</code></pre>\n\n<p><strong>My problem</strong>:</p>\n\n<p>When I navigate to <code>/users/1/edit</code>, I get this error:</p>\n\n<pre><code>NoMethodError in Users#edit\nundefined method `user_path' for #&lt;#&lt;Class:0x007fb702901c88&gt;:0x007fb70098aaf8&gt;\n</code></pre>\n\n<p>How do I fix this problem?</p>\n\n<p>I found <a href=\"https://stackoverflow.com/a/14741497/1577357\">this answer</a> but I couldn't understand it very clearly. Would appreciate a better explaination and answer.</p>\n\n<p>Note: I'm using <a href=\"https://github.com/plataformatec/devise\" rel=\"nofollow noreferrer\">Devise gem</a>.</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 37619, "user_id": 632339, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7de0d2b485ac4f2e4aa2466769b5cdac?s=128&d=identicon&r=PG", "display_name": "Paul.s", "link": "https://stackoverflow.com/users/632339/paul-s"}, "edited": false, "score": 0, "creation_date": 1438801657, "post_id": 31840798, "comment_id": 51603206, "body": "Can you show some example input you would expect from the command line"}, {"owner": {"reputation": 55, "user_id": 2993636, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/e3c23ab81e038572751f47c962b77d2f?s=128&d=identicon&r=PG&f=1", "display_name": "user2993636", "link": "https://stackoverflow.com/users/2993636/user2993636"}, "reply_to_user": {"reputation": 37619, "user_id": 632339, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7de0d2b485ac4f2e4aa2466769b5cdac?s=128&d=identicon&r=PG", "display_name": "Paul.s", "link": "https://stackoverflow.com/users/632339/paul-s"}, "edited": false, "score": 0, "creation_date": 1438802046, "post_id": 31840798, "comment_id": 51603414, "body": "I edited my post to reflect the expected input"}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 1, "creation_date": 1439507745, "post_id": 31840798, "comment_id": 51903195, "body": "Don&#39;t forget to select an answer if you find any of them helpful."}], "answers": [{"comments": [{"owner": {"reputation": 55, "user_id": 2993636, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/e3c23ab81e038572751f47c962b77d2f?s=128&d=identicon&r=PG&f=1", "display_name": "user2993636", "link": "https://stackoverflow.com/users/2993636/user2993636"}, "edited": false, "score": 0, "creation_date": 1438803402, "post_id": 31841283, "comment_id": 51604177, "body": "No, this isn&#39;t it. It gives me an array filled with 0&#39;s for some reason.  I inputed [1,2,3,4,5] and received [0, 1, 0, 2, 0, 3, 0, 4, 0, 5, 0]"}, {"owner": {"reputation": 55, "user_id": 2993636, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/e3c23ab81e038572751f47c962b77d2f?s=128&d=identicon&r=PG&f=1", "display_name": "user2993636", "link": "https://stackoverflow.com/users/2993636/user2993636"}, "edited": false, "score": 0, "creation_date": 1438803564, "post_id": 31841283, "comment_id": 51604250, "body": "Also, I guess I am supposed to enter the numbers without spacing or any formatting using this method, but this simply won&#39;t work for double digit numbers."}, {"owner": {"reputation": 18224, "user_id": 406987, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8865b16d4f3493cfae865af2b3247fd3?s=128&d=identicon&r=PG", "display_name": "Doon", "link": "https://stackoverflow.com/users/406987/doon"}, "edited": false, "score": 0, "creation_date": 1438803741, "post_id": 31841283, "comment_id": 51604365, "body": "<code>arr = str.split(&#47;,&#47;).map(&amp;:to_i)</code> and split on comma,  or <code>arr = str.split.map(&amp;:to_i)</code> and split on space?"}, {"owner": {"reputation": 55, "user_id": 2993636, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/e3c23ab81e038572751f47c962b77d2f?s=128&d=identicon&r=PG&f=1", "display_name": "user2993636", "link": "https://stackoverflow.com/users/2993636/user2993636"}, "edited": false, "score": 0, "creation_date": 1438804002, "post_id": 31841283, "comment_id": 51604518, "body": "Well.. I guess this is a working hack of what I wanted, but I really wanted the user to be able to enter a properly formatted array with brackets. Like this [0,5,3,2,20,10]. The changes you suggested will work for now, but they aren&#39;t exactly what I wanted"}], "tags": [], "owner": {"reputation": 5134, "user_id": 1672197, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/i8HkV.png?s=128&g=1", "display_name": "orde", "link": "https://stackoverflow.com/users/1672197/orde"}, "is_accepted": false, "score": 0, "last_activity_date": 1438803464, "last_edit_date": 1438803464, "creation_date": 1438803109, "answer_id": 31841283, "question_id": 31840798, "link": "https://stackoverflow.com/questions/31840798/getting-an-array-of-integers-from-console/31841283#31841283", "title": "Getting an array of integers from console", "body": "<p>This is a contrived example that takes a user-inputted string of single-digit integers, creates an array via the <code>String::split</code> method, and converts each element from string to integer:</p>\n\n<pre><code>puts \"Enter array: \"              # enter this string: 1234\nstr = gets.chomp\nputs str.class                    #=&gt; String\narr = str.split(//).map(&amp;:to_i)\nputs arr.class                    #=&gt; Array\nputs arr.size                     #=&gt; 4\nputs arr.inspect                  #=&gt; [1, 2, 3, 4]\n</code></pre>\n\n<p>This is far from a full solution (i.e. assumes no delimiter in string, would only work for single-digit integers, etc.), but it demonstrates the basic concept.</p>\n"}, {"tags": [], "owner": {"reputation": 2277, "user_id": 3234367, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/FxQ1m.jpg?s=128&g=1", "display_name": "aaron-coding", "link": "https://stackoverflow.com/users/3234367/aaron-coding"}, "is_accepted": false, "score": 0, "last_activity_date": 1438804538, "creation_date": 1438804538, "answer_id": 31841694, "question_id": 31840798, "link": "https://stackoverflow.com/questions/31840798/getting-an-array-of-integers-from-console/31841694#31841694", "title": "Getting an array of integers from console", "body": "<pre><code>print \"Enter array: \"\na = gets.chomp\na.gsub!(/\\[|\\]/, \"\").split(',').map(&amp;:to_i)\nmy_function(a)\n</code></pre>\n\n<p>In your example you are doing <code>a = ...</code> twice. The first assignment of a is overwritten by the second assignment, so the first assignment is doing nothing. Just so you know.</p>\n\n<p>What I am doing in the third line here is I am mutating the string <code>\"[1,2,3,4]\"</code> into an Array of integers.</p>\n\n<p>Sources: \n<a href=\"http://ruby-doc.org/core-2.2.0/String.html#method-i-split\" rel=\"nofollow\">http://ruby-doc.org/core-2.2.0/String.html#method-i-split</a></p>\n\n<p><a href=\"http://ruby-doc.org/core-2.2.0/String.html#method-i-gsub-21\" rel=\"nofollow\">http://ruby-doc.org/core-2.2.0/String.html#method-i-gsub-21</a></p>\n\n<p><a href=\"http://ruby-doc.org/core-2.2.0/Array.html#method-i-map\" rel=\"nofollow\">http://ruby-doc.org/core-2.2.0/Array.html#method-i-map</a></p>\n"}, {"comments": [{"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 1, "creation_date": 1438812684, "post_id": 31841726, "comment_id": 51608846, "body": "&quot;or worse&quot; \u2026 for example: <code>require &#39;fileutils&#39;; FileUtils.rm_rf(&#39;&#47;&#39;); [1, 2, 3 , 4]</code> It&#39;ll even still return the correct array, so you wouldn&#39;t even notice at first."}], "tags": [], "owner": {"reputation": 18224, "user_id": 406987, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8865b16d4f3493cfae865af2b3247fd3?s=128&d=identicon&r=PG", "display_name": "Doon", "link": "https://stackoverflow.com/users/406987/doon"}, "is_accepted": false, "score": 1, "last_activity_date": 1438804650, "creation_date": 1438804650, "answer_id": 31841726, "question_id": 31840798, "link": "https://stackoverflow.com/questions/31840798/getting-an-array-of-integers-from-console/31841726#31841726", "title": "Getting an array of integers from console", "body": "<p>You could always eval it, but dangerous as heck...</p>\n\n<pre><code>&gt;&gt; foo = \"[0,5,3,2,20,10]\"\n=&gt; \"[0,5,3,2,20,10]\"\n&gt;&gt; a = eval foo\n=&gt; [0, 5, 3, 2, 20, 10]\n&gt;&gt; a\n=&gt; [0, 5, 3, 2, 20, 10]\n&gt;&gt; a.class\n=&gt; Array\n&gt;&gt;\n</code></pre>\n\n<p>could they could do something like this..  </p>\n\n<pre><code>&gt;&gt; foo = \"[0,5,3,2,20,10] - a\"\n=&gt; \"[0,5,3,2,20,10] - a\"\n&gt;&gt; a = eval foo\n=&gt; []\n&gt;&gt;\n</code></pre>\n\n<p>or worse </p>\n"}, {"tags": [], "owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "is_accepted": false, "score": 1, "last_activity_date": 1438812591, "creation_date": 1438812591, "answer_id": 31843703, "question_id": 31840798, "link": "https://stackoverflow.com/questions/31840798/getting-an-array-of-integers-from-console/31843703#31843703", "title": "Getting an array of integers from console", "body": "<p>Your input format seems to be <a href=\"http://json.org/\" rel=\"nofollow\">JSON</a> or <a href=\"http://yaml.org/\" rel=\"nofollow\">YAML</a>, so you could just parse it with a <a href=\"http://ruby-doc.org/stdlib/libdoc/json/rdoc/\" rel=\"nofollow\">JSON parser</a> or <a href=\"http://ruby-doc.org/stdlib/libdoc/yaml/rdoc/\" rel=\"nofollow\">YAML parser</a>:</p>\n\n<pre><code>require 'json'\n\na = JSON.parse(gets) # [1, 2, 3, 4]\n# =&gt; [1, 2, 3, 4]\n</code></pre>\n"}], "owner": {"reputation": 55, "user_id": 2993636, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/e3c23ab81e038572751f47c962b77d2f?s=128&d=identicon&r=PG&f=1", "display_name": "user2993636", "link": "https://stackoverflow.com/users/2993636/user2993636"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 188, "favorite_count": 0, "answer_count": 4, "score": 0, "last_activity_date": 1438812591, "creation_date": 1438801477, "last_edit_date": 1438801833, "question_id": 31840798, "link": "https://stackoverflow.com/questions/31840798/getting-an-array-of-integers-from-console", "title": "Getting an array of integers from console", "body": "<p>I am trying to take in an array of integers from console user input. I thought that the function I need to use was gets, but now I am remembering that this function is going to take in a string, not an array. Can someone help me with how to convert this string into an array? Here is what I have tried to do so far:</p>\n\n<pre><code>print \"Enter array: \"\na = Array.new\na = gets.chomp\nmy_function(a)\n</code></pre>\n\n<p>Expected input: [1,2,3,4]</p>\n"}, {"tags": ["arrays", "ruby", "hash"], "comments": [{"owner": {"reputation": 18773, "user_id": 91830, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2505b282d57c29be797dc35b245adb4c?s=128&d=identicon&r=PG", "display_name": "Philip Hallstrom", "link": "https://stackoverflow.com/users/91830/philip-hallstrom"}, "edited": false, "score": 0, "creation_date": 1438805484, "post_id": 31840736, "comment_id": 51605342, "body": "Show us the desired output."}, {"owner": {"reputation": 463, "user_id": 3843336, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/4b8a7279e051247d33122d045a461aa7?s=128&d=identicon&r=PG&f=1", "display_name": "ollaollu", "link": "https://stackoverflow.com/users/3843336/ollaollu"}, "reply_to_user": {"reputation": 18773, "user_id": 91830, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2505b282d57c29be797dc35b245adb4c?s=128&d=identicon&r=PG", "display_name": "Philip Hallstrom", "link": "https://stackoverflow.com/users/91830/philip-hallstrom"}, "edited": false, "score": 0, "creation_date": 1438806978, "post_id": 31840736, "comment_id": 51606132, "body": "@PhilipHallstrom the desired output is to populate the respective arrays with the values in family hash"}], "answers": [{"comments": [{"owner": {"reputation": 463, "user_id": 3843336, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/4b8a7279e051247d33122d045a461aa7?s=128&d=identicon&r=PG&f=1", "display_name": "ollaollu", "link": "https://stackoverflow.com/users/3843336/ollaollu"}, "edited": false, "score": 0, "creation_date": 1438813417, "post_id": 31841979, "comment_id": 51609134, "body": "<code>family.map {|x| x[:relatives] }.map { |x| x[:grandparents] }</code> throws a <code>&#39;[]&#39;: no implicit conversion of Symbol into Integer (TypeError)</code> error"}, {"owner": {"reputation": 463, "user_id": 3843336, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/4b8a7279e051247d33122d045a461aa7?s=128&d=identicon&r=PG&f=1", "display_name": "ollaollu", "link": "https://stackoverflow.com/users/3843336/ollaollu"}, "edited": false, "score": 0, "creation_date": 1438843788, "post_id": 31841979, "comment_id": 51618009, "body": "looked up more about maps and nesting and this is the correct syntax. It works fine now. Fix your syntax so I accept your answer <code>family.map {|x| x[:relatives].map { |x| x[:grandparents] }}</code>"}], "tags": [], "owner": {"reputation": 10812, "user_id": 1241782, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/576b21d9efadc9217270e971fd6d5027?s=128&d=identicon&r=PG", "display_name": "Mike S", "link": "https://stackoverflow.com/users/1241782/mike-s"}, "is_accepted": true, "score": 1, "last_activity_date": 1438872460, "last_edit_date": 1438872460, "creation_date": 1438805568, "answer_id": 31841979, "question_id": 31840736, "link": "https://stackoverflow.com/questions/31840736/add-nested-array-or-hash-or-a-ruby-hash-to-container/31841979#31841979", "title": "Add nested array or hash or a ruby hash to container", "body": "<p>Instead of using recursion to traverse the data structure and <code>fetch</code>, you could make use of the <code>map</code> method (assuming you know the keys in the hash beforehand).</p>\n\n<p>For example, to fill <code>array_a</code> with all of the <code>:dad</code> entries you can do this</p>\n\n<pre><code>array_a = family.map {|x| x[:dad] }\n</code></pre>\n\n<p>or for grandparents</p>\n\n<pre><code>family.map {|x| x[:relatives].map { |x| x[:grandparents] }}\n</code></pre>\n"}], "owner": {"reputation": 463, "user_id": 3843336, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/4b8a7279e051247d33122d045a461aa7?s=128&d=identicon&r=PG&f=1", "display_name": "ollaollu", "link": "https://stackoverflow.com/users/3843336/ollaollu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 175, "favorite_count": 0, "accepted_answer_id": 31841979, "answer_count": 1, "score": 2, "last_activity_date": 1438872460, "creation_date": 1438801262, "question_id": 31840736, "link": "https://stackoverflow.com/questions/31840736/add-nested-array-or-hash-or-a-ruby-hash-to-container", "title": "Add nested array or hash or a ruby hash to container", "body": "<p>I'm trying to get the values from a nested hash with their keys to be stored into an array but I can't go further than the first level. I have an idea of what to do but I'm stuck on how to proceed from there. </p>\n\n<p>Here is my array of hash values:</p>\n\n<pre><code>family = [{\n    dad: \"Tony\",\n    mum: \"Claire\",\n    relatives: [{\n      uncle: \"Jack\",\n      aunt: \"Lilian\",\n      grandparents: [\"Blake\", \"Amy\"]\n     }]\n}]\n</code></pre>\n\n<p>Here is what I have tried working with:</p>\n\n<pre><code>array_a = []\narray_b = []\narray_c = []\narray_d = []\n\ndef iterate_me(family)\n  family.each do |member|\n    if member.is_a?(Hash) || member.is_a?(Array)\n      iterate_me(member)\n    else\n      #this below works\n      array_a &lt;&lt; member.fetch(:dad)\n      array_b &lt;&lt; member.fetch(:mum)\n\n      #can't get this below to work\n      array_c &lt;&lt; member.fetch(:relatives: uncle or aunt) #add uncle or aunt to array\n      array_d &lt;&lt; member.fetch(:grandparents) #add blake, amy or both to array\n    end\n  end\nend\n</code></pre>\n\n<p>also, is there a simpler way or much more ruby-like way to do this? I'm about 4 months into ruby</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4", "activerecord", "relationship"], "answers": [{"comments": [{"owner": {"reputation": 305, "user_id": 4986896, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-ktb5QDcQ1Z0/AAAAAAAAAAI/AAAAAAAAAA8/7L7C_eXM4Tk/photo.jpg?sz=128", "display_name": "StephanieS", "link": "https://stackoverflow.com/users/4986896/stephanies"}, "edited": false, "score": 0, "creation_date": 1438808028, "post_id": 31840842, "comment_id": 51606784, "body": "Don&#39;t know how I didn&#39;t catch this... Thank you!"}], "tags": [], "owner": {"reputation": 6190, "user_id": 5029266, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/7d4922cf09a8b3d3195cd4d848091ba3?s=128&d=identicon&r=PG", "display_name": "EugZol", "link": "https://stackoverflow.com/users/5029266/eugzol"}, "is_accepted": true, "score": 0, "last_activity_date": 1438801614, "creation_date": 1438801614, "answer_id": 31840842, "question_id": 31840645, "link": "https://stackoverflow.com/questions/31840645/how-to-tell-if-an-association-changed-in-a-rails-edit-form/31840842#31840842", "title": "how to tell if an association changed in a rails edit form", "body": "<p>You can compare array from params in your controller:</p>\n\n<pre><code>new_ids = params[:package_content_ids]\n</code></pre>\n\n<p>with current model's ids (<em>before</em> you assign params to it):</p>\n\n<pre><code>old_ids = @project_level.package_contents_ids\n</code></pre>\n\n<p>You can just use standard Ruby array methods to gain information you need:</p>\n\n<pre><code>old_ids - new_ids # what was deleted\nnew_ids - old_ids # what was added\nnew_ids &amp; old_ids # what was not changed\nnew_ids.sort == old_ids.sort # if something was changed\n</code></pre>\n"}], "owner": {"reputation": 305, "user_id": 4986896, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-ktb5QDcQ1Z0/AAAAAAAAAAI/AAAAAAAAAA8/7L7C_eXM4Tk/photo.jpg?sz=128", "display_name": "StephanieS", "link": "https://stackoverflow.com/users/4986896/stephanies"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 155, "favorite_count": 1, "accepted_answer_id": 31840842, "answer_count": 1, "score": 1, "last_activity_date": 1438801614, "creation_date": 1438800966, "question_id": 31840645, "link": "https://stackoverflow.com/questions/31840645/how-to-tell-if-an-association-changed-in-a-rails-edit-form", "title": "how to tell if an association changed in a rails edit form", "body": "<p>I'm using <code>simple_form_for</code> to create/update two models that are related by using <code>f.association</code>. But whenever I update it, I need to somehow get a collection of what changed in the association. It is a <code>has_and_belongs_to_many</code> relationship between a model called ProjectLevels and a model called PackageContents. So in the <code>project_levels_controller</code> in the strong params I have <code>package_content_ids: []</code>. But if I try to use <code>@project_level.package_content_ids_changed?</code> it gives an undefined method error, even though <code>@project_level.name_changed?</code> will work. I also tried <code>@project_level.package_contents.changed?</code>and it also gives a no method error. So how can I see which package_contents were added or deleted from a project_level in an edit form?</p>\n"}, {"tags": ["ruby", "ruby-on-rails-4.1", "mysql2"], "comments": [{"owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "edited": false, "score": 3, "creation_date": 1438800064, "post_id": 31840243, "comment_id": 51602184, "body": "<code>Mysql2::Error: Unknown column &#39;resource_tags.name&#39;</code>. Did you double check that your test database has the expected structure?"}, {"owner": {"reputation": 2140, "user_id": 1450389, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/VYNKp.jpg?s=128&g=1", "display_name": "Serge Pedroza", "link": "https://stackoverflow.com/users/1450389/serge-pedroza"}, "reply_to_user": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "edited": false, "score": 0, "creation_date": 1438800362, "post_id": 31840243, "comment_id": 51602390, "body": "I do not have a test database. This is a small personal project I was working on. So the test DB does not exist. Could that be the issue? If so, why didn&#39;t i have this problem before"}, {"owner": {"user_type": "does_not_exist", "display_name": "user745235"}, "edited": false, "score": 1, "creation_date": 1438801036, "post_id": 31840243, "comment_id": 51602818, "body": "Paste your <code>schema.rb</code> file"}, {"owner": {"reputation": 2140, "user_id": 1450389, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/VYNKp.jpg?s=128&g=1", "display_name": "Serge Pedroza", "link": "https://stackoverflow.com/users/1450389/serge-pedroza"}, "edited": false, "score": 0, "creation_date": 1438801218, "post_id": 31840243, "comment_id": 51602932, "body": "I just created and migrated a test db. and I am still getting this error"}], "answers": [{"comments": [{"owner": {"reputation": 1785, "user_id": 3373470, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/8f968c218643a09267014e4beaeb4770?s=128&d=identicon&r=PG&f=1", "display_name": "onebree", "link": "https://stackoverflow.com/users/3373470/onebree"}, "edited": false, "score": 0, "creation_date": 1438804213, "post_id": 31840836, "comment_id": 51604649, "body": "If this is your final answer, then please &quot;accept&quot; it"}, {"owner": {"reputation": 2140, "user_id": 1450389, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/VYNKp.jpg?s=128&g=1", "display_name": "Serge Pedroza", "link": "https://stackoverflow.com/users/1450389/serge-pedroza"}, "reply_to_user": {"reputation": 1785, "user_id": 3373470, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/8f968c218643a09267014e4beaeb4770?s=128&d=identicon&r=PG&f=1", "display_name": "onebree", "link": "https://stackoverflow.com/users/3373470/onebree"}, "edited": false, "score": 0, "creation_date": 1438806522, "post_id": 31840836, "comment_id": 51605874, "body": "@HunterStevens i can&#39;t, i have to wait two days."}, {"owner": {"reputation": 1785, "user_id": 3373470, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/8f968c218643a09267014e4beaeb4770?s=128&d=identicon&r=PG&f=1", "display_name": "onebree", "link": "https://stackoverflow.com/users/3373470/onebree"}, "edited": false, "score": 0, "creation_date": 1438806772, "post_id": 31840836, "comment_id": 51606024, "body": "If you feel the solution was basic typo error or stuff, I suggest closing it then"}, {"owner": {"reputation": 1785, "user_id": 3373470, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/8f968c218643a09267014e4beaeb4770?s=128&d=identicon&r=PG&f=1", "display_name": "onebree", "link": "https://stackoverflow.com/users/3373470/onebree"}, "edited": false, "score": 0, "creation_date": 1438864576, "post_id": 31840836, "comment_id": 51631196, "body": "The fact that the accepted solution includes what you have, I suggest deleting this answer, as it is excessive now"}], "tags": [], "owner": {"reputation": 2140, "user_id": 1450389, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/VYNKp.jpg?s=128&g=1", "display_name": "Serge Pedroza", "link": "https://stackoverflow.com/users/1450389/serge-pedroza"}, "is_accepted": false, "score": 0, "last_activity_date": 1438801598, "creation_date": 1438801598, "answer_id": 31840836, "question_id": 31840243, "link": "https://stackoverflow.com/questions/31840243/mysql2error-after-updating-to-rails-4-1/31840836#31840836", "title": "Mysql2::Error: after updating to Rails 4.1", "body": "<p>Fixed it!!</p>\n\n<pre><code>district_resources = district_resources.includes(:resource_tags).where(\"resource_tags.name like :name OR district_resources.name like :name\", {:name =&gt; \"%#{name}%\" }).references(:resource_tags)\n</code></pre>\n\n<p>I had to reference the Resource_Tags Model</p>\n"}, {"tags": [], "owner": {"reputation": 2224, "user_id": 4269732, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/swGs5.jpg?s=128&g=1", "display_name": "Qaisar Nadeem", "link": "https://stackoverflow.com/users/4269732/qaisar-nadeem"}, "is_accepted": true, "score": 1, "last_activity_date": 1438807362, "creation_date": 1438807362, "answer_id": 31842451, "question_id": 31840243, "link": "https://stackoverflow.com/questions/31840243/mysql2error-after-updating-to-rails-4-1/31842451#31842451", "title": "Mysql2::Error: after updating to Rails 4.1", "body": "<p>You are referencing <code>district_resources</code> in where clause but this is not joined in query as you are eager loading <code>resource_tags</code> so here are two solutions for this</p>\n\n<p>1.</p>\n\n<p><code>district_resources = district_resources.joins(:resource_tags).where(\"resource_tags.name like :name OR district_resources.name like :name\", {:name =&gt; \"%#{name}%\" })</code></p>\n\n<p>2.</p>\n\n<p><code>district_resources = district_resources.includes(:resource_tags).refereces(resource_tags).where(\"resource_tags.name like :name OR district_resources.name like :name\", {:name =&gt; \"%#{name}%\" })</code></p>\n\n<p>In both of these cases we are telling rails that we are using <code>resource_tags</code> table in where clause so join <code>district_resources</code> with it</p>\n"}], "owner": {"reputation": 2140, "user_id": 1450389, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/VYNKp.jpg?s=128&g=1", "display_name": "Serge Pedroza", "link": "https://stackoverflow.com/users/1450389/serge-pedroza"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 70, "favorite_count": 1, "accepted_answer_id": 31842451, "answer_count": 2, "score": -2, "last_activity_date": 1438807362, "creation_date": 1438799705, "last_edit_date": 1438801178, "question_id": 31840243, "link": "https://stackoverflow.com/questions/31840243/mysql2error-after-updating-to-rails-4-1", "title": "Mysql2::Error: after updating to Rails 4.1", "body": "<p>I recently updated my Rails app from 4.0 to 4.1. Everything seems to work fine, except this one line in my Search Model that was working before. </p>\n\n<p>Essentially, I want to search/find District_Resources by Tag Name and by the District_Resource Name. </p>\n\n<pre><code>**ex.**\nIf I search the word \"Tutoring\" \n*I should get all District_Resources with the Resource_Tag \"Tutoring\"\n*And all District Resources that include the word Tutoring in it's Name. \n(i.e Tutoring Services)\n</code></pre>\n\n<p>For some reason, I keep getting this error: </p>\n\n<pre><code>(Mysql2::Error: Unknown column 'resource_tags.name' in 'where \nclause': SELECT `district_resources`.* FROM `district_resources`  \nWHERE (resource_tags.name like '%Tutoring%' OR district_resources.name like '%Tutoring%')  \nORDER BY `district_resources`.`name` ASC):\n</code></pre>\n\n<p>But that column does exist in the Resource_Tags table. </p>\n\n<p><strong>MODELS</strong></p>\n\n<pre><code>class DistrictResource &lt; ActiveRecord::Base\n\n  has_many :district_mappings, dependent: :destroy\n  has_many :resource_tags, through: :district_mappings\n\n  accepts_nested_attributes_for :resource_tags\nend\n\nclass ResourceTag &lt; ActiveRecord::Base\n\n  has_many :district_mappings, dependent: :destroy\n  has_many :district_resources, through: :district_mappings\n\nend\n\nclass Search &lt; ActiveRecord::Base\n\n  def district_resources\n    @district_resources ||= find_district_resources\n  end\n\n  def find_district_resources\n    district_resources = DistrictResource.order(:name)\n\n    district_resources = district_resources.includes(:resource_tags).where(\"resource_tags.name like :name OR district_resources.name like :name\", {:name =&gt; \"%#{name}%\" })\n\n    district_resources\n  end\n\nend\n</code></pre>\n\n<p><strong>SCHEMA</strong></p>\n\n<pre><code>create_table \"district_resources\", force: true do |t|\n  t.string   \"name\"\n  t.string   \"description\"\n  t.string   \"website\"\n  t.string   \"phone\"\n  t.string   \"email\"\n  t.datetime \"created_at\"\n  t.datetime \"updated_at\"\nend\n\ncreate_table \"district_mappings\", force: true do |t|\n  t.integer  \"district_resource_id\"\n  t.integer  \"resource_tag_id\"\n  t.datetime \"created_at\"\n  t.datetime \"updated_at\"\nend\n\ncreate_table \"resource_tags\", force: true do |t|\n  t.string   \"name\"\n  t.datetime \"created_at\"\n  t.datetime \"updated_at\"\nend\n</code></pre>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 1785, "user_id": 3373470, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/8f968c218643a09267014e4beaeb4770?s=128&d=identicon&r=PG&f=1", "display_name": "onebree", "link": "https://stackoverflow.com/users/3373470/onebree"}, "edited": false, "score": 3, "creation_date": 1438800737, "post_id": 31840181, "comment_id": 51602649, "body": "It is always interesting to see veteran SO users asking questions."}, {"owner": {"reputation": 74087, "user_id": 214790, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f878c8230342730990acd21f889301d4?s=128&d=identicon&r=PG", "display_name": "matt", "link": "https://stackoverflow.com/users/214790/matt"}, "edited": false, "score": 3, "creation_date": 1438801279, "post_id": 31840181, "comment_id": 51602964, "body": "A quick look at the MRI source suggests that <code>require</code> doesn\u2019t delegate to <code>load</code> as you suggest. They both seem to end up calling the C function <a href=\"https://github.com/ruby/ruby/blob/v2_2_2/load.c#L641\" rel=\"nofollow noreferrer\"><code>rb_load_internal</code></a> (at least for Ruby files, there seems to be a different path for extensions) but the <code>load</code> method isn\u2019t on the code path for <code>require</code>. (Or have I misunderstood your question?)"}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1438802711, "post_id": 31840181, "comment_id": 51603794, "body": "I suspect you&#39;re right. I think I remember that there was a change during one of the big version updates that switched to <code>rb_load_internal</code>. Gotta go look through the errata."}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "reply_to_user": {"reputation": 74087, "user_id": 214790, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f878c8230342730990acd21f889301d4?s=128&d=identicon&r=PG", "display_name": "matt", "link": "https://stackoverflow.com/users/214790/matt"}, "edited": false, "score": 0, "creation_date": 1438807738, "post_id": 31840181, "comment_id": 51606610, "body": "@matt Digging around I don&#39;t see anything back in 1.9.3 that shows require using load. My memory is probably on the blink again. Or I need to look in Ruby 1.8. Make your comment an answer and I&#39;ll accept it."}, {"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 1, "creation_date": 1438817000, "post_id": 31840181, "comment_id": 51610266, "body": "Good candidates would be: replacing MRI with YARV (a completely different, independently developed codebase) in Ruby 1.9.0, integrating RubyGems, also in 1.9.0, and various performance improvements, bugfixes, and behavior changes since then (I remember quite vividly the fact that the version of RubyGems that was originally integrated into YARV was heavily changed from the original, and the resulting discussions that ensued on the ruby-core mailinglist. There were some problems with circular requires, exponential performance, inconsistent recognition of already loaded files, \u2026)"}, {"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 1, "creation_date": 1438817168, "post_id": 31840181, "comment_id": 51610312, "body": "I also want to give some love to <code>Module#prepend</code>, which would allow you to simply use <code>super</code> instead of that ugly <code>alias_method</code> stuff, with the additional bonus that your modifications would actually show up in the ancestry chain and thus much easier to debug."}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "reply_to_user": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1438844530, "post_id": 31840181, "comment_id": 51618397, "body": "Kudos @J&#246;rgWMittag, I&#39;ll look into your suggestions! Thanks!"}], "answers": [{"comments": [{"owner": {"reputation": 9436, "user_id": 252627, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/b8128cc645c1a135f1fc28ba1294b53c?s=128&d=identicon&r=PG", "display_name": "janpio", "link": "https://stackoverflow.com/users/252627/janpio"}, "edited": false, "score": 0, "creation_date": 1538050336, "post_id": 31865427, "comment_id": 92012775, "body": "There is a nice gem that does exactly what you did in your examples: <a href=\"https://github.com/rubyworks/backload\" rel=\"nofollow noreferrer\">github.com/rubyworks/backload</a>"}], "tags": [], "owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "is_accepted": false, "score": 1, "last_activity_date": 1438893755, "last_edit_date": 1495542859, "creation_date": 1438893755, "answer_id": 31865427, "question_id": 31840181, "link": "https://stackoverflow.com/questions/31840181/how-to-override-kernel-load/31865427#31865427", "title": "How to override Kernel.load", "body": "<p>Here are two simple examples that seem to work for overriding <code>require</code> and <code>require_relative</code>, based on examples in \"<a href=\"https://stackoverflow.com/questions/4470108/when-monkey-patching-a-method-can-you-call-the-overridden-method-from-the-new-i/4471202#4471202\">When monkey patching a method, can you call the overridden method from the new implementation?</a>\".</p>\n\n<pre><code>module Kernel\n  old_require = method(:require)\n  define_method(:require) do |filename|\n    puts \"require #{filename}\"\n    old_require.call(filename)\n  end\n\n  old_require_relative = method(:require_relative)\n  define_method(:require_relative) do |filename|\n    puts \"require_relative #{filename}\"\n    old_require_relative.call(filename)\n  end\nend\n</code></pre>\n\n<p>or</p>\n\n<pre><code>module KernelExtensions\n  def require(filename)\n    puts \"require #{filename}\"\n    super\n  end\n  def require_relative(filename)\n    puts \"require_relative #{filename}\"\n    super\n  end\nend\n\nclass Object\n  prepend KernelExtensions\nend\n</code></pre>\n\n<p>Running the second using</p>\n\n<pre><code>module Kernel\n  prepend KernelExtensions\nend\n</code></pre>\n\n<p>didn't work, but since Object includes Kernel, using <code>class Object</code> overriding seems to work cleanly.</p>\n"}], "owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 628, "favorite_count": 0, "answer_count": 1, "score": 7, "last_activity_date": 1438893755, "creation_date": 1438799479, "last_edit_date": 1495540027, "question_id": 31840181, "link": "https://stackoverflow.com/questions/31840181/how-to-override-kernel-load", "title": "How to override Kernel.load", "body": "<p>I need to override <a href=\"http://ruby-doc.org/core-2.2.2/Kernel.html#method-i-load\" rel=\"nofollow noreferrer\"><code>Kernel.load</code></a> in order to watch and process some Ruby files we've written for monitoring. However, it seems immune to such shenanigans.</p>\n\n<p>It's easy to override <a href=\"http://ruby-doc.org/core-2.2.2/Kernel.html#method-i-require\" rel=\"nofollow noreferrer\"><code>require</code></a> and <a href=\"http://ruby-doc.org/core-2.2.2/Kernel.html#method-i-require_relative\" rel=\"nofollow noreferrer\"><code>require_relative</code></a>, but <code>load</code> sits under them and bottlenecks the actual file read if I remember right.</p>\n\n<p>Here's why it seems to be protected from overriding:</p>\n\n<pre><code>Kernel.module_eval do\n\n  alias_method :original_require, :require\n  def require(filename)\n    require_result = original_require(filename)\n    puts \"required #{filename}\"\n\n    require_result\n  end\n\n  alias_method :original_load, :load\n  def load(filename, wrap=true)\n    load_result = original_load(filename, wrap)\n    puts \"loaded #{filename}\"\n\n    load_result\n  end\nend\ninclude Kernel\n\nrequire 'open-uri'\nputs 'done'\n</code></pre>\n\n<p>Running that outputs:</p>\n\n<pre><code>required uri/rfc2396_parser\nrequired uri/rfc3986_parser\nrequired uri/common\nrequired uri/common\nrequired uri/generic\nrequired uri/generic\nrequired uri/ftp\nrequired uri/generic\nrequired uri/http\nrequired uri/http\nrequired uri/https\nrequired uri/generic\nrequired uri/ldap\nrequired uri/ldap\nrequired uri/ldaps\nrequired uri/generic\nrequired uri/mailto\nrequired uri\nrequired stringio\nrequired date_core\nrequired date\nrequired time\nrequired open-uri\ndone\n</code></pre>\n\n<p>I'm content to only override <code>require</code> and <code>require_relative</code>. However, I'm curious what's going on with <code>load</code>.</p>\n\n<hr>\n\n<p>Afterthoughts:</p>\n\n<p>It looks like <code>load</code> isn't called by <code>require</code> or <code>require_relative</code>. Mea culpa. Good catch <a href=\"https://stackoverflow.com/users/214790/matt\">Matt</a>.</p>\n\n<p>This question is similar to \"<a href=\"https://stackoverflow.com/questions/15661788/how-to-override-require-in-ruby\">How to override require in Ruby?</a>\". </p>\n\n<p>Good reading:</p>\n\n<ul>\n<li>\"<a href=\"https://practicingruby.com/articles/ways-to-load-code\" rel=\"nofollow noreferrer\">Ways to load code</a>\"</li>\n<li>\"<a href=\"http://ionrails.com/2009/09/19/ruby_require-vs-load-vs-include-vs-extend/\" rel=\"nofollow noreferrer\">Ruby Require VS Load VS Include VS Extend</a>\"</li>\n<li>And <a href=\"https://stackoverflow.com/users/2988/j%C3%B6rg-w-mittag\">J\u00f6rg's</a> amazing answer in \"<a href=\"https://stackoverflow.com/questions/4470108/when-monkey-patching-a-method-can-you-call-the-overridden-method-from-the-new-i/4471202#4471202\">When monkey patching a method, can you call the overridden method from the new implementation?</a>\"</li>\n</ul>\n\n<p><a href=\"https://stackoverflow.com/users/2988/j%C3%B6rg-w-mittag\">J\u00f6rg's</a> comment</p>\n\n<blockquote>\n  <p>I also want to give some love to Module#prepend, which would allow you to simply use super instead of that ugly alias_method stuff, with the additional bonus that your modifications would actually show up in the ancestry chain and thus much easier to debug.</p>\n</blockquote>\n\n<p>is very sensible and worth using.</p>\n\n<ul>\n<li><a href=\"http://ruby-doc.org/core-2.2.2/Module.html#method-i-prepend\" rel=\"nofollow noreferrer\">http://ruby-doc.org/core-2.2.2/Module.html#method-i-prepend</a></li>\n<li><a href=\"http://ruby-doc.org/core-2.2.2/Module.html#method-i-prepend_features\" rel=\"nofollow noreferrer\">http://ruby-doc.org/core-2.2.2/Module.html#method-i-prepend_features</a></li>\n<li><a href=\"http://ruby-doc.org/core-2.2.2/Module.html#method-i-append_features\" rel=\"nofollow noreferrer\">http://ruby-doc.org/core-2.2.2/Module.html#method-i-append_features</a></li>\n</ul>\n"}, {"tags": ["ruby-on-rails", "ruby", "searchkick"], "answers": [{"comments": [{"owner": {"reputation": 149, "user_id": 2603240, "user_type": "registered", "accept_rate": 71, "profile_image": "https://graph.facebook.com/100000071505458/picture?type=large", "display_name": "Ricardo", "link": "https://stackoverflow.com/users/2603240/ricardo"}, "edited": false, "score": 0, "creation_date": 1438800278, "post_id": 31840133, "comment_id": 51602333, "body": "Nice! How to do this with multiple parameters without repeating many options lines?"}, {"owner": {"reputation": 149, "user_id": 2603240, "user_type": "registered", "accept_rate": 71, "profile_image": "https://graph.facebook.com/100000071505458/picture?type=large", "display_name": "Ricardo", "link": "https://stackoverflow.com/users/2603240/ricardo"}, "edited": false, "score": 0, "creation_date": 1438804656, "post_id": 31840133, "comment_id": 51604897, "body": "Thx! fix: options[s] = params[s] if params[s].present?"}], "tags": [], "owner": {"reputation": 3832, "user_id": 136508, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/391f9b787cdc12aa2c179713f5103e3a?s=128&d=identicon&r=PG", "display_name": "ilan berci", "link": "https://stackoverflow.com/users/136508/ilan-berci"}, "is_accepted": true, "score": 2, "last_activity_date": 1438801042, "last_edit_date": 1438801042, "creation_date": 1438799301, "answer_id": 31840133, "question_id": 31839905, "link": "https://stackoverflow.com/questions/31839905/searchkick-where-hash-optional-params/31840133#31840133", "title": "Searchkick where hash optional params", "body": "<pre><code>options = {\n  other_param: other_param\n  yet_another: yet_another\n}\n\noptions[:gender] = params[:gender] if params[:gender].present?\n</code></pre>\n\n<p>Editing to satisfy request below</p>\n\n<pre><code>[:gender, :sex, :colour].each do |s|\n  options[:s] = params[:s] if params[:s].present?\nend\n</code></pre>\n"}], "owner": {"reputation": 149, "user_id": 2603240, "user_type": "registered", "accept_rate": 71, "profile_image": "https://graph.facebook.com/100000071505458/picture?type=large", "display_name": "Ricardo", "link": "https://stackoverflow.com/users/2603240/ricardo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 621, "favorite_count": 1, "accepted_answer_id": 31840133, "answer_count": 1, "score": 0, "last_activity_date": 1438801042, "creation_date": 1438798467, "question_id": 31839905, "link": "https://stackoverflow.com/questions/31839905/searchkick-where-hash-optional-params", "title": "Searchkick where hash optional params", "body": "<p>How to write this code with Ruby and Searchkick gem.</p>\n\n<p><a href=\"https://github.com/ankane/searchkick#queries\" rel=\"nofollow\">https://github.com/ankane/searchkick#queries</a></p>\n\n<pre><code># Works\n@espacos = User.search where: {\n  gender: params[:gender], # options: :male and :female\n  other_param: param,\n  other_param: param\n}\n\n# How do search all if the parameter is not informed?\n@espacos = User.search where: {\n  if not nil params[:gender]\n    gender: params[:gender],\n  end\n  other_param: param,\n  other_param: param\n}\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "imagemagick", "paperclip", "ubuntu-15.04"], "comments": [{"owner": {"reputation": 20869, "user_id": 438117, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dec2e8d45b1a0210065d1a4e3800f151?s=128&d=identicon&r=PG", "display_name": "emcconville", "link": "https://stackoverflow.com/users/438117/emcconville"}, "edited": false, "score": 0, "creation_date": 1438799993, "post_id": 31839759, "comment_id": 51602141, "body": "Isn&#39;t <code>usr&#47;bin</code> a relative path in your local environment? Meaning that the configuration path would be either <code>~&#47;usr&#47;bin</code>, or <code>.&#47;usr&#47;bin</code>"}, {"owner": {"reputation": 1527, "user_id": 2763058, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/859276278ee617106e18a7a655774f8e?s=128&d=identicon&r=PG&f=1", "display_name": "foxtrotuniform6969", "link": "https://stackoverflow.com/users/2763058/foxtrotuniform6969"}, "reply_to_user": {"reputation": 20869, "user_id": 438117, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dec2e8d45b1a0210065d1a4e3800f151?s=128&d=identicon&r=PG", "display_name": "emcconville", "link": "https://stackoverflow.com/users/438117/emcconville"}, "edited": false, "score": 0, "creation_date": 1438800219, "post_id": 31839759, "comment_id": 51602289, "body": "@emcconville You&#39;re right, that does make sense. However, both of those seem to yield the same error :/"}], "owner": {"reputation": 1527, "user_id": 2763058, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/859276278ee617106e18a7a655774f8e?s=128&d=identicon&r=PG&f=1", "display_name": "foxtrotuniform6969", "link": "https://stackoverflow.com/users/2763058/foxtrotuniform6969"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 426, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1438798028, "creation_date": 1438798028, "question_id": 31839759, "link": "https://stackoverflow.com/questions/31839759/imagemagick-working-on-production-but-not-locally-rails-4-paperclip", "title": "ImageMagick working on production, but not locally (Rails 4, Paperclip)", "body": "<p>I've installed ImageMagick on my local (Ubuntu 15.04), and on my production server (DigitalOcean Dokku stack). I used the same process, but different directories.</p>\n\n<p>On <strong>production</strong>, <code>which convert</code> and <code>which identify</code> results in <code>/usr/local/bin/convert (or identify)</code>, and on my <strong>local</strong> it results in <code>usr/bin</code>. All is good on my production server, but my local gives me the following error:</p>\n\n<pre><code>def raise_because_imagemagick_missing\n      raise Errors::CommandNotFoundError.new(\"Could not run the `identify` command. Please install ImageMagick.\")\nend\n</code></pre>\n\n<p><strong>The server log will be at the bottom of this question.</strong></p>\n\n<p>My <code>production.rb</code> doesn't specify any path for Paperclip commands or image_magick. I've tried doing the same on <code>development.rb</code>, but get the same error when trying to upload an image. I've also tried just specifying <code>:command_path</code> and just specifying <code>:image_magick_path</code> as well as both at the same time with variants of the following code in <code>development.rb</code>:</p>\n\n<pre><code># Paperclip config:\n  Paperclip.options[:image_magick_path] = \"/usr/bin/\"\n  Paperclip.options[:command_path] = \"/usr/bin/\"\n</code></pre>\n\n<p><strong>Local WEBrick Log:</strong></p>\n\n<pre><code>Started PUT \"/users\" for 127.0.0.1 at 2015-08-05 14:03:39 -0400\nProcessing by Devise::RegistrationsController#update as HTML\n  Parameters: {\"utf8\"=&gt;\"\u2713\", \"authenticity_token\"=&gt;\"AjOr280FDoUbV7Qpt4rrLMlvuConAefSBc8F3rCCgRVmC91Anpb7qPeovrpvDhe9WxtNmWKSQdERcNUaoaPdqQ==\", \"user\"=&gt;{\"username\"=&gt;\"nickdb93\", \"email\"=&gt;\"baughmann1@gmail.com\", \"avatar\"=&gt;#&lt;ActionDispatch::Http::UploadedFile:0x007f99f09f2f40 @tempfile=#&lt;Tempfile:/tmp/RackMultipart20150805-4838-1lomun.png&gt;, @original_filename=\"qwesterasquare wall tile.png\", @content_type=\"image/png\", @headers=\"Content-Disposition: form-data; name=\\\"user[avatar]\\\"; filename=\\\"qwesterasquare wall tile.png\\\"\\r\\nContent-Type: image/png\\r\\n\"&gt;, \"password\"=&gt;\"[FILTERED]\", \"password_confirmation\"=&gt;\"[FILTERED]\", \"current_password\"=&gt;\"[FILTERED]\"}, \"commit\"=&gt;\"Update\"}\n  User Load (58.2ms)  SELECT  \"users\".* FROM \"users\" WHERE \"users\".\"id\" = $1  ORDER BY \"users\".\"id\" ASC LIMIT 1  [[\"id\", 1]]\n  User Load (50.7ms)  SELECT  \"users\".* FROM \"users\" WHERE \"users\".\"id\" = $1 LIMIT 1  [[\"id\", 1]]\n   (52.1ms)  BEGIN\nCommand :: PATH=/usr/bin/:$PATH; file -b --mime '/tmp/ba7aa9a469e508addbc1d5969021e8f220150805-4838-74vlew.png'\nCommand :: PATH=/usr/bin/:$PATH; identify -format '%wx%h,%[exif:orientation]' '/tmp/360eb7a818c12ce00c2ac594df5aa9a020150805-4838-14hhllz.png[0]' 2&gt;/dev/null\n   (50.4ms)  ROLLBACK\nCompleted 500 Internal Server Error in 363ms (ActiveRecord: 211.4ms)\n\nPaperclip::Errors::CommandNotFoundError (Could not run the `identify` command. Please install ImageMagick.):\n  paperclip (4.3.0) lib/paperclip/geometry_detector_factory.rb:45:in `raise_because_imagemagick_missing'\n  paperclip (4.3.0) lib/paperclip/geometry_detector_factory.rb:30:in `rescue in geometry_string'\n  paperclip (4.3.0) lib/paperclip/geometry_detector_factory.rb:16:in `geometry_string'\n  paperclip (4.3.0) lib/paperclip/geometry_detector_factory.rb:9:in `make'\n  paperclip (4.3.0) lib/paperclip/geometry.rb:26:in `from_file'\n  paperclip (4.3.0) lib/paperclip/thumbnail.rb:34:in `initialize'\n  paperclip (4.3.0) lib/paperclip/processor.rb:33:in `new'\n  paperclip (4.3.0) lib/paperclip/processor.rb:33:in `make'\n  paperclip (4.3.0) lib/paperclip/attachment.rb:524:in `block in post_process_style'\n  paperclip (4.3.0) lib/paperclip/attachment.rb:523:in `each'\n  paperclip (4.3.0) lib/paperclip/attachment.rb:523:in `inject'\n  paperclip (4.3.0) lib/paperclip/attachment.rb:523:in `post_process_style'\n  paperclip (4.3.0) lib/paperclip/attachment.rb:514:in `block in post_process_styles'\n  paperclip (4.3.0) lib/paperclip/attachment.rb:513:in `each'\n  paperclip (4.3.0) lib/paperclip/attachment.rb:513:in `post_process_styles'\n  paperclip (4.3.0) lib/paperclip/attachment.rb:505:in `block (2 levels) in post_process'\n  activesupport (4.2.1) lib/active_support/callbacks.rb:117:in `call'\n  activesupport (4.2.1) lib/active_support/callbacks.rb:117:in `call'\n  activesupport (4.2.1) lib/active_support/callbacks.rb:555:in `block (2 levels) in compile'\n  activesupport (4.2.1) lib/active_support/callbacks.rb:505:in `call'\n  activesupport (4.2.1) lib/active_support/callbacks.rb:505:in `call'\n  activesupport (4.2.1) lib/active_support/callbacks.rb:92:in `_run_callbacks'\n  activesupport (4.2.1) lib/active_support/callbacks.rb:776:in `_run_avatar_post_process_callbacks'\n  activesupport (4.2.1) lib/active_support/callbacks.rb:81:in `run_callbacks'\n  paperclip (4.3.0) lib/paperclip/callbacks.rb:36:in `run_paperclip_callbacks'\n  paperclip (4.3.0) lib/paperclip/attachment.rb:503:in `block in post_process'\n  activesupport (4.2.1) lib/active_support/callbacks.rb:88:in `call'\n  activesupport (4.2.1) lib/active_support/callbacks.rb:88:in `_run_callbacks'\n  activesupport (4.2.1) lib/active_support/callbacks.rb:776:in `_run_post_process_callbacks'\n  activesupport (4.2.1) lib/active_support/callbacks.rb:81:in `run_callbacks'\n  paperclip (4.3.0) lib/paperclip/callbacks.rb:36:in `run_paperclip_callbacks'\n  paperclip (4.3.0) lib/paperclip/attachment.rb:502:in `post_process'\n  paperclip (4.3.0) lib/paperclip/attachment.rb:458:in `post_process_file'\n  paperclip (4.3.0) lib/paperclip/attachment.rb:108:in `assign'\n  paperclip (4.3.0) lib/paperclip/has_attached_file.rb:66:in `block in define_setter'\n  activerecord (4.2.1) lib/active_record/attribute_assignment.rb:54:in `public_send'\n  activerecord (4.2.1) lib/active_record/attribute_assignment.rb:54:in `_assign_attribute'\n  activerecord (4.2.1) lib/active_record/attribute_assignment.rb:41:in `block in assign_attributes'\n  actionpack (4.2.1) lib/action_controller/metal/strong_parameters.rb:183:in `each_pair'\n  actionpack (4.2.1) lib/action_controller/metal/strong_parameters.rb:183:in `each_pair'\n  activerecord (4.2.1) lib/active_record/attribute_assignment.rb:35:in `assign_attributes'\n  activerecord (4.2.1) lib/active_record/persistence.rb:250:in `block in update'\n  activerecord (4.2.1) lib/active_record/transactions.rb:347:in `block in with_transaction_returning_status'\n  activerecord (4.2.1) lib/active_record/connection_adapters/abstract/database_statements.rb:213:in `block in transaction'\n  activerecord (4.2.1) lib/active_record/connection_adapters/abstract/transaction.rb:188:in `within_new_transaction'\n  activerecord (4.2.1) lib/active_record/connection_adapters/abstract/database_statements.rb:213:in `transaction'\n  activerecord (4.2.1) lib/active_record/transactions.rb:220:in `transaction'\n  activerecord (4.2.1) lib/active_record/transactions.rb:344:in `with_transaction_returning_status'\n  activerecord (4.2.1) lib/active_record/persistence.rb:249:in `update'\n  devise (3.5.1) lib/devise/models/database_authenticatable.rb:71:in `update_with_password'\n  devise (3.5.1) app/controllers/devise/registrations_controller.rb:94:in `update_resource'\n  devise (3.5.1) app/controllers/devise/registrations_controller.rb:48:in `update'\n  actionpack (4.2.1) lib/action_controller/metal/implicit_render.rb:4:in `send_action'\n  actionpack (4.2.1) lib/abstract_controller/base.rb:198:in `process_action'\n  actionpack (4.2.1) lib/action_controller/metal/rendering.rb:10:in `process_action'\n  actionpack (4.2.1) lib/abstract_controller/callbacks.rb:20:in `block in process_action'\n  activesupport (4.2.1) lib/active_support/callbacks.rb:117:in `call'\n  activesupport (4.2.1) lib/active_support/callbacks.rb:117:in `call'\n  activesupport (4.2.1) lib/active_support/callbacks.rb:555:in `block (2 levels) in compile'\n  activesupport (4.2.1) lib/active_support/callbacks.rb:505:in `call'\n  activesupport (4.2.1) lib/active_support/callbacks.rb:505:in `call'\n  activesupport (4.2.1) lib/active_support/callbacks.rb:92:in `_run_callbacks'\n  activesupport (4.2.1) lib/active_support/callbacks.rb:776:in `_run_process_action_callbacks'\n  activesupport (4.2.1) lib/active_support/callbacks.rb:81:in `run_callbacks'\n  actionpack (4.2.1) lib/abstract_controller/callbacks.rb:19:in `process_action'\n  actionpack (4.2.1) lib/action_controller/metal/rescue.rb:29:in `process_action'\n  actionpack (4.2.1) lib/action_controller/metal/instrumentation.rb:32:in `block in process_action'\n  activesupport (4.2.1) lib/active_support/notifications.rb:164:in `block in instrument'\n  activesupport (4.2.1) lib/active_support/notifications/instrumenter.rb:20:in `instrument'\n  activesupport (4.2.1) lib/active_support/notifications.rb:164:in `instrument'\n  actionpack (4.2.1) lib/action_controller/metal/instrumentation.rb:30:in `process_action'\n  actionpack (4.2.1) lib/action_controller/metal/params_wrapper.rb:250:in `process_action'\n  activerecord (4.2.1) lib/active_record/railties/controller_runtime.rb:18:in `process_action'\n  actionpack (4.2.1) lib/abstract_controller/base.rb:137:in `process'\n  actionview (4.2.1) lib/action_view/rendering.rb:30:in `process'\n  actionpack (4.2.1) lib/action_controller/metal.rb:196:in `dispatch'\n  actionpack (4.2.1) lib/action_controller/metal/rack_delegation.rb:13:in `dispatch'\n  actionpack (4.2.1) lib/action_controller/metal.rb:237:in `block in action'\n  actionpack (4.2.1) lib/action_dispatch/routing/route_set.rb:74:in `call'\n  actionpack (4.2.1) lib/action_dispatch/routing/route_set.rb:74:in `dispatch'\n  actionpack (4.2.1) lib/action_dispatch/routing/route_set.rb:43:in `serve'\n  actionpack (4.2.1) lib/action_dispatch/routing/mapper.rb:49:in `serve'\n  actionpack (4.2.1) lib/action_dispatch/journey/router.rb:43:in `block in serve'\n  actionpack (4.2.1) lib/action_dispatch/journey/router.rb:30:in `each'\n  actionpack (4.2.1) lib/action_dispatch/journey/router.rb:30:in `serve'\n  actionpack (4.2.1) lib/action_dispatch/routing/route_set.rb:819:in `call'\n  warden (1.2.3) lib/warden/manager.rb:35:in `block in call'\n  warden (1.2.3) lib/warden/manager.rb:34:in `catch'\n  warden (1.2.3) lib/warden/manager.rb:34:in `call'\n  rack (1.6.4) lib/rack/etag.rb:24:in `call'\n  rack (1.6.4) lib/rack/conditionalget.rb:38:in `call'\n  rack (1.6.4) lib/rack/head.rb:13:in `call'\n  actionpack (4.2.1) lib/action_dispatch/middleware/params_parser.rb:27:in `call'\n  actionpack (4.2.1) lib/action_dispatch/middleware/flash.rb:260:in `call'\n  rack (1.6.4) lib/rack/session/abstract/id.rb:225:in `context'\n  rack (1.6.4) lib/rack/session/abstract/id.rb:220:in `call'\n  actionpack (4.2.1) lib/action_dispatch/middleware/cookies.rb:560:in `call'\n  activerecord (4.2.1) lib/active_record/query_cache.rb:36:in `call'\n  activerecord (4.2.1) lib/active_record/connection_adapters/abstract/connection_pool.rb:649:in `call'\n  activerecord (4.2.1) lib/active_record/migration.rb:378:in `call'\n  actionpack (4.2.1) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'\n  activesupport (4.2.1) lib/active_support/callbacks.rb:88:in `call'\n  activesupport (4.2.1) lib/active_support/callbacks.rb:88:in `_run_callbacks'\n  activesupport (4.2.1) lib/active_support/callbacks.rb:776:in `_run_call_callbacks'\n  activesupport (4.2.1) lib/active_support/callbacks.rb:81:in `run_callbacks'\n  actionpack (4.2.1) lib/action_dispatch/middleware/callbacks.rb:27:in `call'\n  actionpack (4.2.1) lib/action_dispatch/middleware/reloader.rb:73:in `call'\n  actionpack (4.2.1) lib/action_dispatch/middleware/remote_ip.rb:78:in `call'\n  actionpack (4.2.1) lib/action_dispatch/middleware/debug_exceptions.rb:17:in `call'\n  web-console (2.2.1) lib/web_console/middleware.rb:39:in `call'\n  actionpack (4.2.1) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'\n  railties (4.2.1) lib/rails/rack/logger.rb:38:in `call_app'\n  railties (4.2.1) lib/rails/rack/logger.rb:20:in `block in call'\n  activesupport (4.2.1) lib/active_support/tagged_logging.rb:68:in `block in tagged'\n  activesupport (4.2.1) lib/active_support/tagged_logging.rb:26:in `tagged'\n  activesupport (4.2.1) lib/active_support/tagged_logging.rb:68:in `tagged'\n  railties (4.2.1) lib/rails/rack/logger.rb:20:in `call'\n  actionpack (4.2.1) lib/action_dispatch/middleware/request_id.rb:21:in `call'\n  rack (1.6.4) lib/rack/methodoverride.rb:22:in `call'\n  rack (1.6.4) lib/rack/runtime.rb:18:in `call'\n  activesupport (4.2.1) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'\n  rack (1.6.4) lib/rack/lock.rb:17:in `call'\n  actionpack (4.2.1) lib/action_dispatch/middleware/static.rb:113:in `call'\n  rack (1.6.4) lib/rack/sendfile.rb:113:in `call'\n  railties (4.2.1) lib/rails/engine.rb:518:in `call'\n  railties (4.2.1) lib/rails/application.rb:164:in `call'\n  rack (1.6.4) lib/rack/lock.rb:17:in `call'\n  rack (1.6.4) lib/rack/content_length.rb:15:in `call'\n  rack (1.6.4) lib/rack/handler/webrick.rb:88:in `service'\n  /home/nick/.rbenv/versions/2.2.2/lib/ruby/2.2.0/webrick/httpserver.rb:138:in `service'\n  /home/nick/.rbenv/versions/2.2.2/lib/ruby/2.2.0/webrick/httpserver.rb:94:in `run'\n  /home/nick/.rbenv/versions/2.2.2/lib/ruby/2.2.0/webrick/server.rb:294:in `block in start_thread'\n\n\n  Rendered /home/nick/.rbenv/versions/2.2.2/lib/ruby/gems/2.2.0/gems/actionpack-4.2.1/lib/action_dispatch/middleware/templates/rescues/_source.erb (7.1ms)\n  Rendered /home/nick/.rbenv/versions/2.2.2/lib/ruby/gems/2.2.0/gems/actionpack-4.2.1/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (2.8ms)\n  Rendered /home/nick/.rbenv/versions/2.2.2/lib/ruby/gems/2.2.0/gems/actionpack-4.2.1/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (0.9ms)\n  Rendered /home/nick/.rbenv/versions/2.2.2/lib/ruby/gems/2.2.0/gems/actionpack-4.2.1/lib/action_dispatch/middleware/templates/rescues/diagnostics.html.erb within rescues/layout (23.7ms)\nCannot render console with content type multipart/form-dataAllowed content types: [#&lt;Mime::Type:0x007f9a05d76418 @synonyms=[\"application/xhtml+xml\"], @symbol=:html, @string=\"text/html\"&gt;, #&lt;Mime::Type:0x007f9a05d76148 @synonyms=[], @symbol=:text, @string=\"text/plain\"&gt;, #&lt;Mime::Type:0x007f9a05d62148 @synonyms=[], @symbol=:url_encoded_form, @string=\"application/x-www-form-urlencoded\"&gt;]\n</code></pre>\n\n<p>I'm at a loss of what to do. I'm digging through the log output but I can't seem to find a good place to begin. Any suggestions?</p>\n\n<p>Thanks,\n--Nick.</p>\n"}, {"tags": ["ruby", "hash"], "comments": [{"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1438797320, "post_id": 31839423, "comment_id": 51600570, "body": "What is your question?"}, {"owner": {"reputation": 34222, "user_id": 881559, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/K8wbX.png?s=128&g=1", "display_name": "Abram", "link": "https://stackoverflow.com/users/881559/abram"}, "reply_to_user": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1438803132, "post_id": 31839423, "comment_id": 51604026, "body": "@sawa, The question is <i>clearly implied</i> ... see the consistent responses below."}], "answers": [{"comments": [{"owner": {"reputation": 34222, "user_id": 881559, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/K8wbX.png?s=128&g=1", "display_name": "Abram", "link": "https://stackoverflow.com/users/881559/abram"}, "edited": false, "score": 0, "creation_date": 1438797193, "post_id": 31839458, "comment_id": 51600498, "body": "Yeah, I knew I was doing something really wrong! Looks like you don&#39;t need that first new_hash in your loop, but otherwise works perfectly"}, {"owner": {"reputation": 208794, "user_id": 229044, "user_type": "moderator", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/591426cbbacd4025d920467bad356911?s=128&d=identicon&r=PG&f=1", "display_name": "meagar", "link": "https://stackoverflow.com/users/229044/meagar"}, "reply_to_user": {"reputation": 34222, "user_id": 881559, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/K8wbX.png?s=128&g=1", "display_name": "Abram", "link": "https://stackoverflow.com/users/881559/abram"}, "edited": false, "score": 0, "creation_date": 1438797257, "post_id": 31839458, "comment_id": 51600534, "body": "@Abram You absolutely need <code>new_hash = {}</code> in the first loop, otherwise you&#39;re going to be continually appending the same hash to the array, and overwriting its values each iteration."}, {"owner": {"reputation": 34222, "user_id": 881559, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/K8wbX.png?s=128&g=1", "display_name": "Abram", "link": "https://stackoverflow.com/users/881559/abram"}, "edited": false, "score": 0, "creation_date": 1438797330, "post_id": 31839458, "comment_id": 51600578, "body": "Oh hey, good point, now that you&#39;ve added the <code>= {}</code> part that makes more sense!"}], "tags": [], "owner": {"reputation": 208794, "user_id": 229044, "user_type": "moderator", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/591426cbbacd4025d920467bad356911?s=128&d=identicon&r=PG&f=1", "display_name": "meagar", "link": "https://stackoverflow.com/users/229044/meagar"}, "is_accepted": true, "score": 8, "last_activity_date": 1438797023, "creation_date": 1438797023, "answer_id": 31839458, "question_id": 31839423, "link": "https://stackoverflow.com/questions/31839423/build-an-array-of-hashes-from-an-array-of-hashes/31839458#31839458", "title": "Build an array of hashes from an array of hashes", "body": "<p>You are turning an array of hashes into a single hash. You're missing the whole <strong>array</strong> part.</p>\n\n<p>You want</p>\n\n<pre><code>new_array = []\narray_of_hashes.each do |a|\n  new_hash = {}\n  new_hash[\"cow\"] = a[\"a\"]\n  new_hash[\"dog\"] = a[\"b\"]\n  new_array &lt;&lt; new_hash\nend\n</code></pre>\n\n<p>If you were to write this more idiomatically, you'd produce something like this:</p>\n\n<pre><code>new_array = array_of_hashes.map do |hash|\n  { \"cow\" =&gt; hash['a'], \"dog\" =&gt; hash['b'] }\nend\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "edited": false, "score": 0, "creation_date": 1438799546, "post_id": 31839889, "comment_id": 51601886, "body": "I like that you inject a mapping to solve the general problem."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "reply_to_user": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "edited": false, "score": 0, "creation_date": 1438806168, "post_id": 31839889, "comment_id": 51605687, "body": "If that&#39;s my regular downvoter, you have, as always, brought a smile to my face."}], "tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": false, "score": 1, "last_activity_date": 1438798394, "creation_date": 1438798394, "answer_id": 31839889, "question_id": 31839423, "link": "https://stackoverflow.com/questions/31839423/build-an-array-of-hashes-from-an-array-of-hashes/31839889#31839889", "title": "Build an array of hashes from an array of hashes", "body": "<p>This is essentially the same as @meagar's answer, but I included it to show how you might implement it in a fairly general way.</p>\n\n<pre><code>def replace_em(arr, replacements)\n  arr.map do |h|\n    h.each_with_object({}) do |(k,v),g|\n      g[replacements.key?(k) ? replacements[k] : k] = v\n    end\n  end\nend\n\narr = [{ \"a\"=&gt;1, \"b\"=&gt;2, \"c\"=&gt;3 }, { \"a\"=&gt;3, \"b\"=&gt;4, \"d\"=&gt; 5 }]\nreplacements = { \"a\"=&gt;\"cow\", \"b\"=&gt;\"dog\", \"e\"=&gt;\"cat\" }\n\nreplace_em(arr, replacements)\n  #=&gt; [{\"cow\"=&gt;1, \"dog\"=&gt;2, \"c\"=&gt;3}, {\"cow\"=&gt;3, \"dog\"=&gt;4, \"d\"=&gt;5}] \n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "is_accepted": false, "score": 2, "last_activity_date": 1438801897, "last_edit_date": 1495539828, "creation_date": 1438800676, "answer_id": 31840549, "question_id": 31839423, "link": "https://stackoverflow.com/questions/31839423/build-an-array-of-hashes-from-an-array-of-hashes/31840549#31840549", "title": "Build an array of hashes from an array of hashes", "body": "<p>Perhaps these will help you understand what you're doing wrong:</p>\n\n<p>Your code is:</p>\n\n<pre><code>array_of_hashes = [{\"a\" =&gt; 1, \"b\" =&gt; 2}, {\"a\" =&gt; 3, \"b\" =&gt; 4}]\n\nnew_hash = {}\narray_of_hashes.each do |a|\n  new_hash # =&gt; {}, {\"cow\"=&gt;1, \"dog\"=&gt;2}\n</code></pre>\n\n<p>The first time through, <code>new_hash</code> is <code>{}</code>. The second time through it's <code>{\"cow\"=&gt;1, \"dog\"=&gt;2}</code>.</p>\n\n<pre><code>  new_hash[\"cow\"] = a[\"a\"] # =&gt; 1, 3\n</code></pre>\n\n<p>The first time through, you assign <code>1</code> to the value associated with the <code>cow</code> key and the second time you overwrite it with <code>3</code>.</p>\n\n<pre><code>  new_hash[\"dog\"] = a[\"b\"] # =&gt; 2, 4\n</code></pre>\n\n<p>This is similar to above. You're overwriting the values.</p>\n\n<pre><code>  new_hash # =&gt; {\"cow\"=&gt;1, \"dog\"=&gt;2}, {\"cow\"=&gt;3, \"dog\"=&gt;4}\nend\n</code></pre>\n\n<p>Resulting in:</p>\n\n<pre><code>new_hash # =&gt; {\"cow\"=&gt;3, \"dog\"=&gt;4}\n</code></pre>\n\n<p>Instead, you <em>could</em> write:</p>\n\n<pre><code>new_array = []\n</code></pre>\n\n<p>You really want to accumulate into an array, not to a hash since hashes can't hold multiple instances of the same keys.</p>\n\n<pre><code>array_of_hashes.each do |h|\n  new_array # =&gt; [], [{\"cow\"=&gt;1, \"dog\"=&gt;2}]\n</code></pre>\n\n<p>The first time through <code>new_array</code> is empty. The second time it has the previous loop's hash.</p>\n\n<pre><code>  new_array &lt;&lt; {\n    'cow' =&gt; h['a'],\n    'dog' =&gt; h['b']\n  }\n</code></pre>\n\n<p>Append a new hash to the array.</p>\n\n<pre><code>  new_array # =&gt; [{\"cow\"=&gt;1, \"dog\"=&gt;2}], [{\"cow\"=&gt;1, \"dog\"=&gt;2}, {\"cow\"=&gt;3, \"dog\"=&gt;4}]\n</code></pre>\n\n<p>You can see the array accumulating the sub-hashes.</p>\n\n<pre><code>end\nnew_array # =&gt; [{\"cow\"=&gt;1, \"dog\"=&gt;2}, {\"cow\"=&gt;3, \"dog\"=&gt;4}]\n</code></pre>\n\n<p>That said, I'd do it with a simple <code>map</code> as <a href=\"https://stackoverflow.com/a/31839458/128421\">@meager suggested</a>.</p>\n"}], "owner": {"reputation": 34222, "user_id": 881559, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/K8wbX.png?s=128&g=1", "display_name": "Abram", "link": "https://stackoverflow.com/users/881559/abram"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 51, "favorite_count": 1, "accepted_answer_id": 31839458, "answer_count": 3, "score": -1, "last_activity_date": 1438869576, "creation_date": 1438796889, "last_edit_date": 1438869576, "question_id": 31839423, "link": "https://stackoverflow.com/questions/31839423/build-an-array-of-hashes-from-an-array-of-hashes", "title": "Build an array of hashes from an array of hashes", "body": "<p>I have the following:</p>\n\n<pre><code>array_of_hashes = [{\"a\" =&gt; 1, \"b\" =&gt; 2}, {\"a\" =&gt; 3, \"b\" =&gt; 4}]\n</code></pre>\n\n<p>I want to convert this to something like:</p>\n\n<pre><code>new_hash = [{\"cow\" =&gt; 1, \"dog\" =&gt; 2}, {\"cow\" =&gt; 3, \"dog\" =&gt; 4}]\n</code></pre>\n\n<p>I tried the following:</p>\n\n<pre><code>new_hash = {}\narray_of_hashes.each do |a|\n  new_hash[\"cow\"] = a[\"a\"]\n  new_hash[\"dog\"] = a[\"b\"]\nend\n</code></pre>\n\n<p>However, <code>new_hash</code> results in only the second hash from <code>array_of_hashes</code>:</p>\n\n<pre><code>new_hash = {\"cow\"=&gt;3, \"dog\"=&gt;4}\n</code></pre>\n\n<p><strong>For those that need an explicitly stated question:\nHow can I map <code>array_of_hashes</code> to get <code>new_hash</code> (as defined in my first 2 lines of code)?</strong></p>\n"}, {"tags": ["ruby-on-rails", "ruby", "curl", "faraday"], "comments": [{"owner": {"reputation": 113, "user_id": 4552045, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-msc8sAwe2l4/AAAAAAAAAAI/AAAAAAAAABI/dfgKxyt2ku8/photo.jpg?sz=128", "display_name": "Aaron Wortham", "link": "https://stackoverflow.com/users/4552045/aaron-wortham"}, "edited": false, "score": 0, "creation_date": 1438798788, "post_id": 31839319, "comment_id": 51601449, "body": "Well silly answer, but the thing that made it work was removing the www off of the base url I had in place. Apparently the domain wasn&#39;t set up to accept it with or without."}], "answers": [{"tags": [], "owner": {"reputation": 335, "user_id": 3079756, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CCgGK.jpg?s=128&g=1", "display_name": "Serhan", "link": "https://stackoverflow.com/users/3079756/serhan"}, "is_accepted": false, "score": 5, "last_activity_date": 1533210074, "creation_date": 1533210074, "answer_id": 51652742, "question_id": 31839319, "link": "https://stackoverflow.com/questions/31839319/faraday-authorization-header/51652742#51652742", "title": "Faraday Authorization Header", "body": "<p>try this :</p>\n\n<pre><code># set variables\nbase_url = \"calendarapi.spingo.com\"\nurl = \"/v1/events\"\ntoken = \"SpingoAPI token='my-api-key'\"\nparams = {:sections =&gt; 42336}\n\n\n# init connection object\nconnection = Faraday.new(:url =&gt; base_url) do |c|\n   c.use Faraday::Request::UrlEncoded\n   c.use Faraday::Response::Logger\n   c.use Faraday::Adapter::NetHttp\nend\n\n# send request\nresponse = connection.get url, params do |request|\n  request.headers[\"Authorization\"] = token\nend\n</code></pre>\n"}], "owner": {"reputation": 113, "user_id": 4552045, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-msc8sAwe2l4/AAAAAAAAAAI/AAAAAAAAABI/dfgKxyt2ku8/photo.jpg?sz=128", "display_name": "Aaron Wortham", "link": "https://stackoverflow.com/users/4552045/aaron-wortham"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 7024, "favorite_count": 2, "answer_count": 1, "score": 3, "last_activity_date": 1533210074, "creation_date": 1438796557, "last_edit_date": 1438797405, "question_id": 31839319, "link": "https://stackoverflow.com/questions/31839319/faraday-authorization-header", "title": "Faraday Authorization Header", "body": "<p>I am trying to make a request to the <code>Spingo</code> API. I have made a successful request using Curl, but am trying to use the Faraday gem. </p>\n\n<p>The successful curl request looks like this: </p>\n\n<pre><code>curl -v --url \"calendarapi.spingo.com/v1/events?sections=42336\"  --header 'Authorization: SpingoAPI token=\"my-api-key\"'\n</code></pre>\n\n<p>Inititially I tried tried using the default adapter <code>net-http</code>. Then I switched to the <code>Typheous</code> adapter because <code>net-http</code> was capitalizing my <code>SpingoAPI</code> scheme in the Authorization header. This made it read Spingoapi. Now my request looks like this: </p>\n\n<pre><code>  def make_request\n      conn = Faraday.new(base_url) do |f|\n          f.params['sections'] = '42336'\n          f.adapter :typhoeus\n          f.use Faraday::Response::Logger\n      end\n      conn.authorization(:SpingoAPI, token: api_key)\n      conn.get\n  end\n</code></pre>\n\n<p>Switching to <code>Typheous</code> allowed something to return (I wasn't getting anything back from <code>net-http</code>) So my response looks like this. </p>\n\n<pre><code>ETHON: performed EASY effective_url=url\nsections=42336 response_code=200 return_code=ok total_time=0.844381\nI, [2015-08-05T11:16:06.575611 #22692]  INFO -- : get http://www.calendarapi.spingo.com/v1/events?sections=42336\nD, [2015-08-05T11:16:06.575842 #22692] DEBUG -- request: User-Agent: \"Faraday v0.9.1\"\n\nAuthorization: \"SpingoAPI token=\\\"my-token\\\"\"\nI, [2015-08-05T11:16:06.576081 #22692]  INFO -- Status: 200\nD, [2015-08-05T11:16:06.576230 #22692] DEBUG -- response: Content-Type: \"text/html; charset=utf-8\"\nDate: \"Wed, 05 Aug 2015 17:16:03 GMT\"\nServer: \"nginx/1.2.9\"\nSet-Cookie: \"VisitorID=GsPJ8NLBiP; expires=Tue, 03-Nov-2015 17:16:03 GMT\"\nX-Powered-By: \"PHP/5.3.10-1ubuntu3.11\"\nContent-Length: \"152\"\nConnection: \"keep-alive\"\n</code></pre>\n\n<p>This leads me to believe that I am not being authorized, however I am out of ideas on how to pass in the authorization differently. </p>\n\n<p>Any help would be greatly appreciated. </p>\n"}, {"tags": ["ruby"], "answers": [{"tags": [], "owner": {"reputation": 2409, "user_id": 4008366, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/5a9f80535627f21ba4191fea0c6a0771?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Kim", "link": "https://stackoverflow.com/users/4008366/andrew-kim"}, "is_accepted": false, "score": 0, "last_activity_date": 1438794602, "creation_date": 1438794602, "answer_id": 31838775, "question_id": 31838200, "link": "https://stackoverflow.com/questions/31838200/ruby-and-ctioga2-issue/31838775#31838775", "title": "Ruby and ctioga2 issue", "body": "<p>Not familiar with the code base exactly of tioga2. Based on the error message it was expecting an assignment (<code>=</code>) and ran into a <code>|</code> and <code>)</code></p>\n"}, {"tags": [], "owner": {"reputation": 2241, "user_id": 2140271, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/ea24c17719a975fb38c107a60f4b3802?s=128&d=identicon&r=PG", "display_name": "Vincent Fourmond", "link": "https://stackoverflow.com/users/2140271/vincent-fourmond"}, "is_accepted": false, "score": 0, "last_activity_date": 1441309919, "creation_date": 1441309919, "answer_id": 32384322, "question_id": 31838200, "link": "https://stackoverflow.com/questions/31838200/ruby-and-ctioga2-issue/32384322#32384322", "title": "Ruby and ctioga2 issue", "body": "<p>This is a ruby-1.8 specific bug. It is now fixed in the git repository (commit: <a href=\"https://github.com/fourmond/ctioga2/commit/be1cc4bb611093ec842eb674647bc7dc4f2486e0\" rel=\"nofollow\">be1cc4b</a>).</p>\n\n<p>But stackoverflow is not the place to file bug reports for programs, you're lucky I stumbled upon this one. </p>\n\n<p>For <code>ctioga2</code>, please use either the bug tracker at sourceforge: <a href=\"https://sourceforge.net/p/ctioga2/tickets/\" rel=\"nofollow\">https://sourceforge.net/p/ctioga2/tickets/</a> or the one at github if you prefer: <a href=\"https://github.com/fourmond/ctioga2/issues/\" rel=\"nofollow\">https://github.com/fourmond/ctioga2/issues/</a>.</p>\n"}], "owner": {"reputation": 1, "user_id": 5194945, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-IGNIfJc1hPw/AAAAAAAAAAI/AAAAAAAAAA4/GUQk2tfKh0E/photo.jpg?sz=128", "display_name": "Valentin Bouvet", "link": "https://stackoverflow.com/users/5194945/valentin-bouvet"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 38, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1441309919, "creation_date": 1438792666, "last_edit_date": 1438796401, "question_id": 31838200, "link": "https://stackoverflow.com/questions/31838200/ruby-and-ctioga2-issue", "title": "Ruby and ctioga2 issue", "body": "<p>I am trying to run ctioga2 and I keep getting the same error:</p>\n\n<pre><code>bash-4.1$ ctioga2 \n/usr/bin/ctioga2:49:in `require': /usr/lib/ruby/site_ruby/1.8/ctioga2/plotmaker.rb:646: syntax error, unexpected ')' (SyntaxError)\n              ) do |plotmaker, size, options|\n               ^\n/usr/lib/ruby/site_ruby/1.8/ctioga2/plotmaker.rb:646: syntax error, unexpected '|', expecting '='\n/usr/lib/ruby/site_ruby/1.8/ctioga2/plotmaker.rb:867: syntax error, unexpected kEND, expecting $end\nfrom /usr/bin/ctioga2:49\n</code></pre>\n\n<p>Do you guys know why this happens?</p>\n"}, {"tags": ["ruby", "gcc", "curl", "rubygems", "ruby-development-kit"], "comments": [{"owner": {"reputation": 33642, "user_id": 620097, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/820980fd43f2607a815c1f3dbfe152cc?s=128&d=identicon&r=PG", "display_name": "shellter", "link": "https://stackoverflow.com/users/620097/shellter"}, "edited": false, "score": 0, "creation_date": 1438792948, "post_id": 31838196, "comment_id": 51598085, "body": "do you know for certain that <code>libcurl</code> is in <code>--with-curl-lib=C:&#47;curl-7.43.0-win32&#47;lib</code> ? or is it in a subdir under? Good luck."}, {"owner": {"reputation": 7474, "user_id": 617027, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/e15f36cd65529f45542b16a6e1a339cd?s=128&d=identicon&r=PG", "display_name": "Tom", "link": "https://stackoverflow.com/users/617027/tom"}, "reply_to_user": {"reputation": 33642, "user_id": 620097, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/820980fd43f2607a815c1f3dbfe152cc?s=128&d=identicon&r=PG", "display_name": "shellter", "link": "https://stackoverflow.com/users/620097/shellter"}, "edited": false, "score": 0, "creation_date": 1438793068, "post_id": 31838196, "comment_id": 51598166, "body": "In that dir I see libcurl.a and libcurl.def and other .a and .def files."}, {"owner": {"reputation": 33642, "user_id": 620097, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/820980fd43f2607a815c1f3dbfe152cc?s=128&d=identicon&r=PG", "display_name": "shellter", "link": "https://stackoverflow.com/users/620097/shellter"}, "edited": false, "score": 0, "creation_date": 1438793279, "post_id": 31838196, "comment_id": 51598295, "body": "I won&#39;t be able to help much more, just checking on what is obvious (sorry). So <code>curl&#47;curl.h</code> is in the correct dir? AND did you see anything worthwhile re. <code>Check the mkmf.log file for more details.</code> . Best to update your Question so others don&#39;t need to read thru a growing chain of comments. Good luck!"}, {"owner": {"reputation": 7474, "user_id": 617027, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/e15f36cd65529f45542b16a6e1a339cd?s=128&d=identicon&r=PG", "display_name": "Tom", "link": "https://stackoverflow.com/users/617027/tom"}, "reply_to_user": {"reputation": 33642, "user_id": 620097, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/820980fd43f2607a815c1f3dbfe152cc?s=128&d=identicon&r=PG", "display_name": "shellter", "link": "https://stackoverflow.com/users/620097/shellter"}, "edited": false, "score": 0, "creation_date": 1438806456, "post_id": 31838196, "comment_id": 51605836, "body": "I have added the mkmf.log"}, {"owner": {"reputation": 33642, "user_id": 620097, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/820980fd43f2607a815c1f3dbfe152cc?s=128&d=identicon&r=PG", "display_name": "shellter", "link": "https://stackoverflow.com/users/620097/shellter"}, "edited": false, "score": 0, "creation_date": 1438825342, "post_id": 31838196, "comment_id": 51612232, "body": "I don&#39;t see the logfile information. (Don&#39;t try posting a 1000+lines of logfile). Look for the first instance of &#39;ERR&#39; in you log. Anything useful there? Add any ERR(OR) information to your question. Good luck."}, {"owner": {"reputation": 33642, "user_id": 620097, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/820980fd43f2607a815c1f3dbfe152cc?s=128&d=identicon&r=PG", "display_name": "shellter", "link": "https://stackoverflow.com/users/620097/shellter"}, "edited": false, "score": 0, "creation_date": 1438863523, "post_id": 31838196, "comment_id": 51630404, "body": "<code>.... skipping incompatible C:&#47;curl-7.40.0-devel-mingw32&#47;bin&#47;libcurl.dll  ..... cannot find -lcurl .....</code> looks like a problem to me. You may do better posting to <code>ruby</code> specific news groups. Good luck."}], "answers": [{"comments": [{"owner": {"reputation": 576, "user_id": 2100126, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IsukN.jpg?s=128&g=1", "display_name": "nilsandrey", "link": "https://stackoverflow.com/users/2100126/nilsandrey"}, "edited": false, "score": 0, "creation_date": 1603261236, "post_id": 31863601, "comment_id": 113977116, "body": "I voted the answer because works for me. However just want to add some precisions on the parameters that I had to use: <code>--with-curl-dir=C:&#47;curl...&#47;bin   --with-curl-lib=C:&#47;curl...&#47;lib    --with-curl-include=C:&#47;curl...&#47;include</code>"}], "tags": [], "owner": {"reputation": 7474, "user_id": 617027, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/e15f36cd65529f45542b16a6e1a339cd?s=128&d=identicon&r=PG", "display_name": "Tom", "link": "https://stackoverflow.com/users/617027/tom"}, "is_accepted": true, "score": 3, "last_activity_date": 1438888770, "last_edit_date": 1438888770, "creation_date": 1438886937, "answer_id": 31863601, "question_id": 31838196, "link": "https://stackoverflow.com/questions/31838196/building-native-gem-curb-on-64-bit-windows-8-1-fails-checking-for-curl-confi/31863601#31863601", "title": "Building native gem &#39;curb&#39; on 64 bit Windows 8.1 fails: &#39;checking for curl-config... no&#39;", "body": "<p>With my setup (Win 8.1 64bit, ruby 2.16 64 bit), the following version of curl is required: curl-7.40.0-devel-mingw64</p>\n\n<pre><code>gem install curb -- --with-curl-lib=C:/curl-7.40.0-devel-mingw64/bin --with-curl-include=C:/curl-7.40.0-devel-mingw64/include\n</code></pre>\n\n<p>You also need the 64 bit ruby dev kit unzipped into <code>your_ruby_directory/DevKit</code> and the following or equivalent in youir path.</p>\n\n<pre><code>C:\\Ruby21-x64\\bin;C:\\Ruby21-x64\\DevKit\\bin;C:\\Ruby21-x64\\DevKit\\mingw\\bin;C:\\curl-7.40.0-devel-mingw64\\bin;C:\\Ruby21-x64\\bin;C:\\Ruby21-x64\\DevKit\\bin;C:\\Ruby21-x64\\DevKit\\mingw\\bin;\n</code></pre>\n\n<p>I had also ensured that the cygwin curl-config executable was in my path, though it is unclear if this was required.</p>\n"}], "owner": {"reputation": 7474, "user_id": 617027, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/e15f36cd65529f45542b16a6e1a339cd?s=128&d=identicon&r=PG", "display_name": "Tom", "link": "https://stackoverflow.com/users/617027/tom"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 420, "favorite_count": 0, "accepted_answer_id": 31863601, "answer_count": 1, "score": 2, "last_activity_date": 1438888770, "creation_date": 1438792658, "last_edit_date": 1438854631, "question_id": 31838196, "link": "https://stackoverflow.com/questions/31838196/building-native-gem-curb-on-64-bit-windows-8-1-fails-checking-for-curl-confi", "title": "Building native gem &#39;curb&#39; on 64 bit Windows 8.1 fails: &#39;checking for curl-config... no&#39;", "body": "<pre><code>&gt;gem install curb -- --with-curl-dir=C:/curl-7.43.0-win32/bin --with-curl-lib=C:/curl-7.43.0-win32/lib --with-curl-include=C:/curl-7.43.0-win32/include\n</code></pre>\n\n<p>I get the following error</p>\n\n<pre><code>Temporarily enhancing PATH to include DevKit...\nBuilding native extensions.  This could take a while...\nERROR:  Error installing curb:\n        ERROR: Failed to build gem native extension.\n\n        C:/Ruby21-x64/bin/ruby.exe extconf.rb --with-curl-dir=C:/curl-7.43.0-win\n32/bin --with-curl-lib=C:/curl-7.43.0-win32/lib --with-curl-include=C:/curl-7.43\n.0-win32/include\nchecking for curl-config... no\nchecking for main() in -lcurl... no\n*** extconf.rb failed ***\nCould not create Makefile due to some reason, probably lack of necessary\nlibraries and/or headers.  Check the mkmf.log file for more details.  You may\nneed configuration options.\n\nProvided configuration options:\n        --with-opt-dir\n        --without-opt-dir\n        --with-opt-include\n        --without-opt-include=${opt-dir}/include\n        --with-opt-lib\n        --without-opt-lib=${opt-dir}/lib\n        --with-make-prog\n        --without-make-prog\n        --srcdir=.\n        --curdir\n        --ruby=C:/Ruby21-x64/bin/ruby\n        --with-curl-dir\n        --with-curl-include=${curl-dir}/include\n        --with-curl-lib=${curl-dir}/lib\n        --with-curllib\n        --without-curllib\nextconf.rb:18:in `&lt;main&gt;':   Can't find libcurl or curl/curl.h (RuntimeError)\n\n  Try passing --with-curl-dir or --with-curl-lib and --with-curl-include\n  options to extconf.\n</code></pre>\n\n<p>I have researched this for hours and tried installing several different curl versions, making sure the curl directory is in my path. Using both mingw32 and windows command line, the error persists.</p>\n\n<p>Also tried:</p>\n\n<pre><code>gem install curb --platform=mswin32\n</code></pre>\n\n<p>UPDATE</p>\n\n<p>Below is the mkmf.log from the curb directory. What is it trying to tell me?</p>\n\n<pre><code>find_executable: checking for curl-config... -------------------- no\n\n--------------------\n\nhave_library: checking for main() in -lcurl... -------------------- no\n\n\"x86_64-w64-mingw32-gcc -o conftest.exe -Ic:/Ruby21-x64/include/ruby-2.1.0/x64-mingw32 -Ic:/Ruby21-x64/include/ruby-2.1.0/ruby/backward -Ic:/Ruby21-x64/include/ruby-2.1.0 -I. -IC:/curl-7.40.0-devel-mingw32/include -DFD_SETSIZE=2048 -D_WIN32_WINNT=0x0501 -D__MINGW_USE_VC2005_COMPAT -D_FILE_OFFSET_BITS=64   -O3 -fno-omit-frame-pointer -fno-fast-math -g -Wall -Wextra -Wno-unused-parameter -Wno-parentheses -Wno-long-long -Wno-missing-field-initializers -Wunused-variable -Wpointer-arith -Wwrite-strings -Wdeclaration-after-statement -Wimplicit-function-declaration conftest.c  -L. -Lc:/Ruby21-x64/lib -LC:/curl-7.40.0-devel-mingw32/bin -L.      -lx64-msvcrt-ruby210  -lshell32 -lws2_32 -liphlpapi -limagehlp -lshlwapi  \"\nchecked program was:\n/* begin */\n1: #include \"ruby.h\"\n2: \n3: #include &lt;winsock2.h&gt;\n4: #include &lt;windows.h&gt;\n5: int main(int argc, char **argv)\n6: {\n7:   return 0;\n8: }\n/* end */\n\n\"x86_64-w64-mingw32-gcc -o conftest.exe -Ic:/Ruby21-x64/include/ruby-2.1.0/x64-mingw32 -Ic:/Ruby21-x64/include/ruby-2.1.0/ruby/backward -Ic:/Ruby21-x64/include/ruby-2.1.0 -I. -IC:/curl-7.40.0-devel-mingw32/include -DFD_SETSIZE=2048 -D_WIN32_WINNT=0x0501 -D__MINGW_USE_VC2005_COMPAT -D_FILE_OFFSET_BITS=64   -O3 -fno-omit-frame-pointer -fno-fast-math -g -Wall -Wextra -Wno-unused-parameter -Wno-parentheses -Wno-long-long -Wno-missing-field-initializers -Wunused-variable -Wpointer-arith -Wwrite-strings -Wdeclaration-after-statement -Wimplicit-function-declaration conftest.c  -L. -Lc:/Ruby21-x64/lib -LC:/curl-7.40.0-devel-mingw32/bin -L.      -lx64-msvcrt-ruby210 -lcurl  -lshell32 -lws2_32 -liphlpapi -limagehlp -lshlwapi  \"\nconftest.c: In function 't':\nconftest.c:16:32: warning: variable 'p' set but not used [-Wunused-but-set-variable]\nc:/ruby21-x64/devkit/mingw/bin/../lib/gcc/x86_64-w64-mingw32/4.7.2/../../../../x86_64-w64-mingw32/bin/ld.exe: skipping incompatible C:/curl-7.40.0-devel-mingw32/bin/libcurl.dll when searching for -lcurl\nc:/ruby21-x64/devkit/mingw/bin/../lib/gcc/x86_64-w64-mingw32/4.7.2/../../../../x86_64-w64-mingw32/bin/ld.exe: skipping incompatible C:/curl-7.40.0-devel-mingw32/bin/libcurl.dll when searching for -lcurl\nc:/ruby21-x64/devkit/mingw/bin/../lib/gcc/x86_64-w64-mingw32/4.7.2/../../../../x86_64-w64-mingw32/bin/ld.exe: cannot find -lcurl\ncollect2.exe: error: ld returned 1 exit status\nchecked program was:\n/* begin */\n 1: #include \"ruby.h\"\n 2: \n 3: #include &lt;winsock2.h&gt;\n 4: #include &lt;windows.h&gt;\n 5: \n 6: /*top*/\n 7: extern int t(void);\n 8: int main(int argc, char **argv)\n 9: {\n10:   if (argc &gt; 1000000) {\n11:     printf(\"%p\", &amp;t);\n12:   }\n13: \n14:   return 0;\n15: }\n16: int t(void) { void ((*volatile p)()); p = (void ((*)()))main; return 0; }\n/* end */\n\n\"x86_64-w64-mingw32-gcc -o conftest.exe -Ic:/Ruby21-x64/include/ruby-2.1.0/x64-mingw32 -Ic:/Ruby21-x64/include/ruby-2.1.0/ruby/backward -Ic:/Ruby21-x64/include/ruby-2.1.0 -I. -IC:/curl-7.40.0-devel-mingw32/include -DFD_SETSIZE=2048 -D_WIN32_WINNT=0x0501 -D__MINGW_USE_VC2005_COMPAT -D_FILE_OFFSET_BITS=64   -O3 -fno-omit-frame-pointer -fno-fast-math -g -Wall -Wextra -Wno-unused-parameter -Wno-parentheses -Wno-long-long -Wno-missing-field-initializers -Wunused-variable -Wpointer-arith -Wwrite-strings -Wdeclaration-after-statement -Wimplicit-function-declaration conftest.c  -L. -Lc:/Ruby21-x64/lib -LC:/curl-7.40.0-devel-mingw32/bin -L.      -lx64-msvcrt-ruby210 -lcurl  -lshell32 -lws2_32 -liphlpapi -limagehlp -lshlwapi  \"\nconftest.c: In function 't':\nconftest.c:16:1: error: too few arguments to function 'main'\nconftest.c:8:5: note: declared here\nchecked program was:\n/* begin */\n 1: #include \"ruby.h\"\n 2: \n 3: #include &lt;winsock2.h&gt;\n 4: #include &lt;windows.h&gt;\n 5: \n 6: /*top*/\n 7: extern int t(void);\n 8: int main(int argc, char **argv)\n 9: {\n10:   if (argc &gt; 1000000) {\n11:     printf(\"%p\", &amp;t);\n12:   }\n13: \n14:   return 0;\n15: }\n16: int t(void) { main(); return 0; }\n/* end */\n\n--------------------\n</code></pre>\n\n<p>Also, I have curl-config executable in my path.</p>\n"}, {"tags": ["ruby", "redis", "rack", "grape"], "answers": [{"tags": [], "owner": {"reputation": 1698, "user_id": 3778742, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ad62c6ebfd4440c951edde151cb76714?s=128&d=identicon&r=PG&f=1", "display_name": "alexsmn", "link": "https://stackoverflow.com/users/3778742/alexsmn"}, "is_accepted": false, "score": 1, "last_activity_date": 1438792760, "creation_date": 1438792760, "answer_id": 31838231, "question_id": 31837936, "link": "https://stackoverflow.com/questions/31837936/how-to-set-up-redis-for-an-api-using-ruby-and-rack/31838231#31838231", "title": "How to set up redis for an API using Ruby and Rack?", "body": "<p>When I use redis, I do the fallowing:</p>\n\n<p>In my initializers folder I create a file redis.rb and create the connection:</p>\n\n<pre><code>`Redis.new(:host =&gt; \"10.0.1.1\", :port =&gt; 6380, :db =&gt; 15)`\n</code></pre>\n\n<p>Then I assign this conn to a global variable <code>$redis</code> so I can have access to it everywhere.</p>\n\n<p>Then it's up to you, you can organise your code however you want.</p>\n\n<p>An example:</p>\n\n<pre><code>Controller A\ndef index\n  MemoryModel.getAll()\nend\n\nclass MemoryModel\n\n  def getAll()\n    $redis.get(\"key\")\n  end\nend\n</code></pre>\n\n<p>Have a look at <code>redis gem</code> you can find some examples in there, also connection_pool gem</p>\n"}], "owner": {"reputation": 307, "user_id": 3809888, "user_type": "registered", "accept_rate": 31, "profile_image": "https://www.gravatar.com/avatar/36f9e77a573e873058b98a3de6276a03?s=128&d=identicon&r=PG&f=1", "display_name": "user3809888", "link": "https://stackoverflow.com/users/3809888/user3809888"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 287, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1438792760, "creation_date": 1438791831, "question_id": 31837936, "link": "https://stackoverflow.com/questions/31837936/how-to-set-up-redis-for-an-api-using-ruby-and-rack", "title": "How to set up redis for an API using Ruby and Rack?", "body": "<p>I'm building a simple API using <a href=\"https://github.com/ruby-grape/grape\" rel=\"nofollow\">Grape</a>, Ruby, and Rack (no framework).  I want to use redis to store the data the API is working with. So far, I've defined a <code>Directory</code> class and a <code>DirectoryAPI</code> class using Grape.  The <code>Directory</code> class has methods that return JSON data in the exact same way as the API.</p>\n\n<p>I've never had to set up redis before, so I'm not sure how to do it.  What I'm looking to accomplish is:</p>\n\n<ul>\n<li><p>Do a mass insert to redis when I run <code>rackup</code>, so that there is pre-populated data.  The pre-populated data would come from using my <code>Directory</code> class.</p></li>\n<li><p>Have my GET routes return a hash stored in redis</p></li>\n<li><p>Have the POST route for my API add an entry to redis</p></li>\n</ul>\n\n<p>How do I configure redis to run and populate when I run <code>rackup</code>? Should I do it in my <code>config.ru</code> file somehow and define a new class for redis? How would I get the API class to interact with redis?</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 152277, "user_id": 438992, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/QouOz.jpg?s=128&g=1", "display_name": "Dave Newton", "link": "https://stackoverflow.com/users/438992/dave-newton"}, "edited": false, "score": 2, "creation_date": 1438791673, "post_id": 31837835, "comment_id": 51597248, "body": "It&#39;s not clear what the issue is; you have a value you can pass, why can&#39;t you pass it in? How are you <i>calling</i> <code>start_with_letter_c</code>?"}], "answers": [{"comments": [{"owner": {"reputation": 277, "user_id": 2401979, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/qN1EA.png?s=128&g=1", "display_name": "Danny Sullivan", "link": "https://stackoverflow.com/users/2401979/danny-sullivan"}, "edited": false, "score": 0, "creation_date": 1438795073, "post_id": 31838396, "comment_id": 51599349, "body": "Thank you! I wasn&#39;t passing in letters when calling combinations."}], "tags": [], "owner": {"reputation": 10812, "user_id": 1241782, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/576b21d9efadc9217270e971fd6d5027?s=128&d=identicon&r=PG", "display_name": "Mike S", "link": "https://stackoverflow.com/users/1241782/mike-s"}, "is_accepted": true, "score": 3, "last_activity_date": 1438793284, "creation_date": 1438793284, "answer_id": 31838396, "question_id": 31837835, "link": "https://stackoverflow.com/questions/31837835/passing-return-value-into-another-method/31838396#31838396", "title": "Passing return value into another method", "body": "<p>Here you go, no errors:</p>\n\n<pre><code>letters = %w[c s t p b l f g d m  \n             y o u i h t r a e l \n             o t l a e m r s n i \n             m a y l p x s e k d]\n\ndef combinations(letters)\n  combos = letters.combination(4) \n  combos.collect do |letter_set|\n    letter_set.join(\",\").gsub(\",\" ,\"\")  \n  end\nend\n\ndef start_with_letter_c(combinations)\n  combinations.select {|word| word.match(/^ca/) }\nend\n\nstart_with_letter_c(combinations(letters))\n# =&gt; [\"cael\", \"caeo\", \"caet\", \"cael\", \"ca ...and so on\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1785, "user_id": 3373470, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/8f968c218643a09267014e4beaeb4770?s=128&d=identicon&r=PG&f=1", "display_name": "onebree", "link": "https://stackoverflow.com/users/3373470/onebree"}, "edited": false, "score": 1, "creation_date": 1438794246, "post_id": 31838621, "comment_id": 51598898, "body": "I like how you used <code>start_with?</code>, as it is easier to understand its meaning than a regex method."}, {"owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "reply_to_user": {"reputation": 1785, "user_id": 3373470, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/8f968c218643a09267014e4beaeb4770?s=128&d=identicon&r=PG&f=1", "display_name": "onebree", "link": "https://stackoverflow.com/users/3373470/onebree"}, "edited": false, "score": 2, "creation_date": 1438794397, "post_id": 31838621, "comment_id": 51598976, "body": "@HunterStevens: And the <code>start_with?</code> method is faster than the regexp version as a bonus..."}, {"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1438797712, "post_id": 31838621, "comment_id": 51600808, "body": "You don&#39;t need <code>combos =</code>."}], "tags": [], "owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "is_accepted": false, "score": 3, "last_activity_date": 1438798289, "last_edit_date": 1438798289, "creation_date": 1438794012, "answer_id": 31838621, "question_id": 31837835, "link": "https://stackoverflow.com/questions/31837835/passing-return-value-into-another-method/31838621#31838621", "title": "Passing return value into another method", "body": "<p>I would write something like this:</p>\n\n<pre><code>letters = %w[c s t p b l f g d m  \n             y o u i h t r a e l \n             o t l a e m r s n i \n             m a y l p x s e k d]\n\ndef combinations(letters)\n  letters.combination(4).map(&amp;:join) \nend\n\ndef start_with_letter_c(combinations)\n  combinations.select { |word| word.start_with?('ca') }\nend\n\nstart_with_letter_c(combinations(letters))\n</code></pre>\n"}], "owner": {"reputation": 277, "user_id": 2401979, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/qN1EA.png?s=128&g=1", "display_name": "Danny Sullivan", "link": "https://stackoverflow.com/users/2401979/danny-sullivan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 430, "favorite_count": 0, "accepted_answer_id": 31838396, "answer_count": 2, "score": 2, "last_activity_date": 1438798289, "creation_date": 1438791548, "last_edit_date": 1438796956, "question_id": 31837835, "link": "https://stackoverflow.com/questions/31837835/passing-return-value-into-another-method", "title": "Passing return value into another method", "body": "<p>I am starting with an array of letters:</p>\n\n<pre><code>letters = %w[c s t p b l f g d m  \n             y o u i h t r a e l \n             o t l a e m r s n i \n             m a y l p x s e k d]\n</code></pre>\n\n<p>Passing them, finding all combinations that return an array like this <code>[\"cstp\", \"cstb\", \"cstl\"]</code>, this is a shortened example.</p>\n\n<pre><code>def combinations(letters)\n  combos = letters.combination(4) \n  combos.collect do |letter_set|\n    letter_set.join(\",\").gsub(\",\" ,\"\")  \n  end\nend\n</code></pre>\n\n<p>I am trying to figure out how to pass the return value of <code>combinations</code> into <code>start_wtih_letter_c</code>. Do I have to pass a block like <code>&amp;block</code>? I tried various things that keep saying wrong number of arguments. </p>\n\n<pre><code>def start_with_letter_c(pass the return value)\n  combinations.select {|word| word.match(/^ca/) }\nend\n</code></pre>\n"}, {"tags": ["ruby", "io", "stream"], "comments": [{"owner": {"reputation": 1785, "user_id": 3373470, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/8f968c218643a09267014e4beaeb4770?s=128&d=identicon&r=PG&f=1", "display_name": "onebree", "link": "https://stackoverflow.com/users/3373470/onebree"}, "edited": false, "score": 0, "creation_date": 1438802690, "post_id": 31837830, "comment_id": 51603782, "body": "Have you tried <code>File.close</code> or something similar?"}, {"owner": {"reputation": 325, "user_id": 4259169, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/39fa0f5996cd9d5c7bff3412cab51805?s=128&d=identicon&r=PG&f=1", "display_name": "Erik V", "link": "https://stackoverflow.com/users/4259169/erik-v"}, "edited": false, "score": 0, "creation_date": 1438808657, "post_id": 31837830, "comment_id": 51607110, "body": "This is my first time working with I/O so I had not tried that.  Trying it returns an undefined method error (probably because it is only emulating I/O).  Edited to include link to site."}], "answers": [{"tags": [], "owner": {"reputation": 9234, "user_id": 4629810, "user_type": "registered", "accept_rate": 88, "profile_image": "https://lh4.googleusercontent.com/-gcabh64Le4c/AAAAAAAAAAI/AAAAAAAAAQ8/GquVsg_lVoA/photo.jpg?sz=128", "display_name": "Mircea", "link": "https://stackoverflow.com/users/4629810/mircea"}, "is_accepted": false, "score": 1, "last_activity_date": 1438808278, "creation_date": 1438808278, "answer_id": 31842696, "question_id": 31837830, "link": "https://stackoverflow.com/questions/31837830/rubymonk-i-o-stream-too-many-open-files/31842696#31842696", "title": "RubyMonk - I/O Stream - &quot;Too many open files&quot;", "body": "<p>There are 2 things here: </p>\n\n<ul>\n<li>leaking file handles: if you keep opening files and don't close the handles/descriptors you get you will eventually run out of handles. The number of files you can have open per machine/processes is usually limited (and if you do leak you will eventually exhaust them). the solution is to stop the leak and properly clean up after you're done with files.</li>\n<li>needing more file handles that your system currently allow you to have: In the case you legitimately need to have a high number of files opened simultaneously you can run into the limit mentioned above even if you are not leaking thing. In this case I would recommend you look into what the limits are and maybe adjusting them. Start by googling \"ulimit linux\" (for example: <a href=\"http://ss64.com/bash/ulimit.html\" rel=\"nofollow\">http://ss64.com/bash/ulimit.html</a>)</li>\n</ul>\n"}], "owner": {"reputation": 325, "user_id": 4259169, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/39fa0f5996cd9d5c7bff3412cab51805?s=128&d=identicon&r=PG&f=1", "display_name": "Erik V", "link": "https://stackoverflow.com/users/4259169/erik-v"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 407, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1438809267, "creation_date": 1438791530, "last_edit_date": 1438809267, "question_id": 31837830, "link": "https://stackoverflow.com/questions/31837830/rubymonk-i-o-stream-too-many-open-files", "title": "RubyMonk - I/O Stream - &quot;Too many open files&quot;", "body": "<p>I'm on RubyMonk Book 1 Ch 9.1 The default code to demonstrate a concept is this. How do I close the open files? Apparently I ran this too many times after coming back to it and it now returns this error:</p>\n\n<pre><code># open the file \"new-fd\" and create a file descriptor:\nfd = IO.sysopen(\"new-fd\", \"w\")\n\n# create a new I/O stream using the file descriptor for \"new-fd\":\np IO.new(fd)\n\nSTDOUT:\nclass: Errno::EMFILE\nmessage: Too many open files - new-fd\nbacktrace: RubyMonk:4:in `sysopen'\n</code></pre>\n\n<p>EDIT: Apparently the site is emulating file creation/deletion using FakeFS.  This contributes to unusual behavior such as calling IO.methods not returning anything.  Link to site: <a href=\"https://rubymonk.com/learning/books/1-ruby-primer/chapters/42-introduction-to-i-o/lessons/89-streams\" rel=\"nofollow\">https://rubymonk.com/learning/books/1-ruby-primer/chapters/42-introduction-to-i-o/lessons/89-streams</a></p>\n"}, {"tags": ["ruby", "zeromq"], "answers": [{"tags": [], "owner": {"reputation": 2748, "user_id": 946684, "user_type": "registered", "accept_rate": 88, "profile_image": "https://lh6.googleusercontent.com/-q2v9zGAF5X4/AAAAAAAAAAI/AAAAAAAAAoE/GqTvVZJIIJE/photo.jpg?sz=128", "display_name": "blockchaindev", "link": "https://stackoverflow.com/users/946684/blockchaindev"}, "is_accepted": false, "score": 0, "last_activity_date": 1438807090, "creation_date": 1438807090, "answer_id": 31842365, "question_id": 31837560, "link": "https://stackoverflow.com/questions/31837560/rcvmore-in-zeromq/31842365#31842365", "title": "RCVMORE in zeromq", "body": "<p>Are you aware of the recvmsgs socket method? It does exactly what you need. Similarly you should call sendmsgs: <a href=\"http://www.rubydoc.info/github/chuckremes/ffi-rzmq/ZMQ/Socket#recvmsgs-instance_method\" rel=\"nofollow\">http://www.rubydoc.info/github/chuckremes/ffi-rzmq/ZMQ/Socket#recvmsgs-instance_method</a></p>\n\n<p>Note that the correct flow of calls to zeromq is to FIRST call zmq_recv, THEN call zmq_getsockopt followed by zmq_recv, until the returned value is 0.</p>\n\n<p>recv_string calls zmq_msg_close after reading the message contents, which frees all resources associated with the message. Your results may indicate you are not correctly sending multipart messages either.</p>\n"}], "owner": {"reputation": 5744, "user_id": 461557, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/chqe8.jpg?s=128&g=1", "display_name": "Viren", "link": "https://stackoverflow.com/users/461557/viren"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 255, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1438807090, "creation_date": 1438790816, "question_id": 31837560, "link": "https://stackoverflow.com/questions/31837560/rcvmore-in-zeromq", "title": "RCVMORE in zeromq", "body": "<p>I have been trying to determine if my socket has multipart message using <a href=\"http://api.zeromq.org/2-1:zmq-recv\" rel=\"nofollow\">RCVMORE</a> </p>\n\n<blockquote>\n  <p>An application wishing to determine if a message is composed of\n  multiple parts does so by retrieving the value of the ZMQ_RCVMORE\n  socket option on the socket it is receiving the message from. If there\n  are no message parts to follow, or if the message is not composed of\n  multiple parts, ZMQ_RCVMORE shall report a value of zero. Otherwise,\n  ZMQ_RCVMORE shall report a value of 1, indicating that more message\n  parts are to follow.</p>\n</blockquote>\n\n<p>extracted from <a href=\"http://api.zeromq.org/2-1:zmq-recv\" rel=\"nofollow\">here</a> </p>\n\n<p>But, for some odd reason I keep getting the o/p as <strong>0</strong> even though the socket has message it can receive.</p>\n\n<pre><code> socket.getsockopt(ZMQ::RCVMORE,[]).zero?\n=&gt; true ## the o/p is zero but the socket has msg to receive\n socket.recv_string(msg='')\n msg\n=&gt; \"LA_1438789736_0840188\"\n\nsocket.getsockopt(ZMQ::RCVMORE,[]).zero?\n=&gt; true ## again the o/p is zero but the socket still has msg it can receive\n\n socket.recv_string(msg='')\n msg\n=&gt; \"PQ_188212111_0840188\"\n\n socket.getsockopt(ZMQ::RCVMORE,[]).zero?\n=&gt; true ## again the same\n\n socket.recv_string(msg='')\n msg\n=&gt; \"{\\\"seq\\\":1,\\\"call\\\":{},\\\"eval\\\":{},\\\"type\\\":\\\"connect\\\",\\\"vars\\\":{}}\"\n</code></pre>\n\n<p>Not sure, what I'm doing wrong?</p>\n\n<p><strong>NOTE</strong> : - The Zeromq ruby library(ruby client) currently in picture is <a href=\"https://github.com/chuckremes/ffi-rzmq\" rel=\"nofollow\">ffi-rzmq</a></p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-3", "survey"], "comments": [{"owner": {"reputation": 6691, "user_id": 149615, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/70eebdc6c9444520a0a8aac05a0de5fa?s=128&d=identicon&r=PG", "display_name": "Rob", "link": "https://stackoverflow.com/users/149615/rob"}, "edited": false, "score": 1, "creation_date": 1438790214, "post_id": 31837308, "comment_id": 51596312, "body": "Did you run <code>rails generate survey:install</code>? as indicated by the documentation <a href=\"http://www.rubydoc.info/gems/survey/0.2#Installation\" rel=\"nofollow noreferrer\">rubydoc.info/gems/survey/0.2#Installation</a>"}, {"owner": {"reputation": 65, "user_id": 4561833, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/80fe7914976708bc2b9145124aaae5b0?s=128&d=identicon&r=PG&f=1", "display_name": "Ryan", "link": "https://stackoverflow.com/users/4561833/ryan"}, "reply_to_user": {"reputation": 6691, "user_id": 149615, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/70eebdc6c9444520a0a8aac05a0de5fa?s=128&d=identicon&r=PG", "display_name": "Rob", "link": "https://stackoverflow.com/users/149615/rob"}, "edited": false, "score": 0, "creation_date": 1438790411, "post_id": 31837308, "comment_id": 51596443, "body": "Yes I did which is why I find it so odd that the routes didn&#39;t take"}, {"owner": {"reputation": 6691, "user_id": 149615, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/70eebdc6c9444520a0a8aac05a0de5fa?s=128&d=identicon&r=PG", "display_name": "Rob", "link": "https://stackoverflow.com/users/149615/rob"}, "edited": false, "score": 1, "creation_date": 1438790814, "post_id": 31837308, "comment_id": 51596713, "body": "You may need to generate the route separately <code>rails generate survey routes namespace:tests</code>"}, {"owner": {"reputation": 250, "user_id": 4909361, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/4c537320a14a84539a5e85fab6c7fab1?s=128&d=identicon&r=PG&f=1", "display_name": "Brian Kunzig", "link": "https://stackoverflow.com/users/4909361/brian-kunzig"}, "edited": false, "score": 0, "creation_date": 1438790819, "post_id": 31837308, "comment_id": 51596718, "body": "When you type &#39;$bundle exec rake routes&#39;  does anything come up showing survey routes?"}, {"owner": {"reputation": 65, "user_id": 4561833, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/80fe7914976708bc2b9145124aaae5b0?s=128&d=identicon&r=PG&f=1", "display_name": "Ryan", "link": "https://stackoverflow.com/users/4561833/ryan"}, "edited": false, "score": 0, "creation_date": 1438791827, "post_id": 31837308, "comment_id": 51597349, "body": "Hi Rob. I tried running that prior to posting, and again now as you suggested, it does say &#39; insert  config/routes.rb&#39; but doesn&#39;t actually write to the file"}, {"owner": {"reputation": 65, "user_id": 4561833, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/80fe7914976708bc2b9145124aaae5b0?s=128&d=identicon&r=PG&f=1", "display_name": "Ryan", "link": "https://stackoverflow.com/users/4561833/ryan"}, "edited": false, "score": 0, "creation_date": 1438791862, "post_id": 31837308, "comment_id": 51597371, "body": "Brian I did as you suggested and no mention of survey routes shows up"}], "owner": {"reputation": 65, "user_id": 4561833, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/80fe7914976708bc2b9145124aaae5b0?s=128&d=identicon&r=PG&f=1", "display_name": "Ryan", "link": "https://stackoverflow.com/users/4561833/ryan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 57, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1452289873, "creation_date": 1438790084, "last_edit_date": 1438791996, "question_id": 31837308, "link": "https://stackoverflow.com/questions/31837308/survey-gem-not-creating-routes", "title": "Survey gem not creating routes", "body": "<p>I just installed runtimerevolution's <code>survey gem</code> and used <code>rails generate survey plain namespace:tests</code> per the documentation to get a scaffold and CRUD framework.</p>\n\n<p>Although it said in the console it added routes into <code>routes.rb</code> it did not. I'm just wondering if someone can tell me what I should add to my <code>routes.rb</code> to be able to access the view pages created by the gem.</p>\n\n<p>EDIT:</p>\n\n<p>bundle exec rake db:migrate does the following:</p>\n\n<pre><code>== 20150805161555 CreateSurvey: migrating =====================================\n-- create_table(:survey_surveys)\n   -&gt; 0.0070s\n-- create_table(:survey_questions)\n   -&gt; 0.0010s\n-- create_table(:survey_options)\n   -&gt; 0.0020s\n-- create_table(:survey_attempts)\n   -&gt; 0.0010s\n-- create_table(:survey_answers)\n   -&gt; 0.0020s\n== 20150805161555 CreateSurvey: migrated (0.0190s) ============================\n\n\n$ rails generate survey routes namespace:tests\n\n\nDL is deprecated, please use Fiddle\n      insert  config/routes.rb\nGeneration of Routes Template Complete :) enjoy Survey\n</code></pre>\n"}, {"tags": ["ruby", "json", "file", "hash"], "answers": [{"tags": [], "owner": {"reputation": 110733, "user_id": 1009479, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/wlrC5.jpg?s=128&g=1", "display_name": "Yu Hao", "link": "https://stackoverflow.com/users/1009479/yu-hao"}, "is_accepted": true, "score": 0, "last_activity_date": 1438790404, "creation_date": 1438790404, "answer_id": 31837418, "question_id": 31837209, "link": "https://stackoverflow.com/questions/31837209/trouble-working-with-txt-json-files/31837418#31837418", "title": "Trouble working with txt/json files", "body": "<p>Each line of the text is a valid JSON, but putting them together, it's not valid.</p>\n\n<p>You can turn each line into a <code>Hash</code>, and join them together:</p>\n\n<pre><code>students = []\nfile.each do |line|\n  students &lt;&lt; line\nend\nfile.close\n\nstudents.each {|e| e = JSON.parse(e) }\n</code></pre>\n\n<p>Now you can get the entire JSON by <code>students.to_json</code>.</p>\n"}], "owner": {"reputation": 671, "user_id": 2733137, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/8ff8t.jpg?s=128&g=1", "display_name": "SoSimple", "link": "https://stackoverflow.com/users/2733137/sosimple"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 37, "favorite_count": 0, "accepted_answer_id": 31837418, "answer_count": 1, "score": 0, "last_activity_date": 1438792084, "creation_date": 1438789804, "last_edit_date": 1495540283, "question_id": 31837209, "link": "https://stackoverflow.com/questions/31837209/trouble-working-with-txt-json-files", "title": "Trouble working with txt/json files", "body": "<p>I'm interning at a company and was given the following instructions:</p>\n\n<blockquote>\n  <p>\"You'll find student records in a text file (students.json) - one\n  student per line. Write a program to calculate the average grades of\n  the class.\"</p>\n</blockquote>\n\n<p>The student file in question was a gist with .txt extension and this is an example of the content:</p>\n\n<pre><code>{\"first name\": \"mary\", \"last name\": \"roberts\", \"grade\": 78}\n{\"first name\": \"jason\", \"last name\": \"mchale\", \"grade\": 82}\n{\"first name\": \"ciaron\", \"last name\": \"smith\", \"grade\": 63}\n{\"first name\": \"sarah\", \"last name\": \"johnson\", \"grade\": 91}\n</code></pre>\n\n<p>This is my first time working with JSON so I figured I needed to covert it to a hash or something so I can work with the data more easily. </p>\n\n<p>I tried to do so using the following method:</p>\n\n<pre><code>require 'json'\n\ndef distance\n  file = File.open(\"students.txt\", \"r\")\n\n  students = \"\"\n\n  file.each do |line|\n    students &lt;&lt; line\n  end\n  file.close\n\n  puts JSON.parse(students)\nend\n</code></pre>\n\n<p>But I got the error:</p>\n\n<pre><code>JSON::ParserError: 757: unexpected token at '{\"first name\": \"mary\", \"last name\": \"roberts\", \"grade\": 78}\n{\"first name\": \"jason\", \"last name\": \"mchale\", \"grade\": 82}...\n</code></pre>\n\n<p>I had a look at <a href=\"https://stackoverflow.com/questions/29047089/jsonparsererror-757-unexpected-token-at\">this question</a> and it suggests that I don't actually have JSON but a hash written as a String. Unfortunately running</p>\n\n<pre><code>hash.eval(students)\n</code></pre>\n\n<p>only gives me the first student record and not the rest. I'm a little confused about what I'm actually working with, is it a plain text file, a hash as a string or JSON in the wrong file format? If anyone can point me in the right direction towards extracting this data so I can work with it, I'd be eternally grateful!</p>\n"}, {"tags": ["ruby", "model-view-controller"], "comments": [{"owner": {"reputation": 10611, "user_id": 366299, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/0e8e3739ae9c55898c284aaf5ba164ba?s=128&d=identicon&r=PG", "display_name": "atamanroman", "link": "https://stackoverflow.com/users/366299/atamanroman"}, "edited": false, "score": 3, "creation_date": 1438788644, "post_id": 31836602, "comment_id": 51595268, "body": "What should the application do? Your class <code>BankAccount</code> <i>is</i> the model (minus text output, if it&#39;s not just logging). What you need now is some kind of <code>View</code> and a <code>Controller</code> class which modifies the model as a result to an action in the <code>View</code>. You must have some specs which state a) which actions must be possible and b) which kind of view you have to create (web, console, desktop, ..) or you will have a hard time fulfilling your clients/teachers requirements."}, {"owner": {"reputation": 8258, "user_id": 5182047, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/Vkgn6.jpg?s=128&g=1", "display_name": "Erik &#197;sland", "link": "https://stackoverflow.com/users/5182047/erik-%c3%85sland"}, "reply_to_user": {"reputation": 10611, "user_id": 366299, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/0e8e3739ae9c55898c284aaf5ba164ba?s=128&d=identicon&r=PG", "display_name": "atamanroman", "link": "https://stackoverflow.com/users/366299/atamanroman"}, "edited": false, "score": 0, "creation_date": 1438788971, "post_id": 31836602, "comment_id": 51595488, "body": "The application should Greet them from the command line, prompt them to signup for an account, and then allow them to deposit, withdraw, or show their current balance."}, {"owner": {"reputation": 24966, "user_id": 2001031, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/bd4f0d39f82be9c22f6f01c80d7ad800?s=128&d=identicon&r=PG", "display_name": "Neil Slater", "link": "https://stackoverflow.com/users/2001031/neil-slater"}, "edited": false, "score": 1, "creation_date": 1438789186, "post_id": 31836602, "comment_id": 51595627, "body": "In that case the app is console based. The methods where you currently have &quot;puts&quot; could be converted into different views (or different methods of a generic view). Your controller should be accepting inputs from the console, calling the relevant parts of the model as required (e.g. instantiating <code>BankAccount.new</code> when someone signs up, calling deposit when asked etc), and deciding which view to display next."}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 4, "creation_date": 1438789334, "post_id": 31836602, "comment_id": 51595716, "body": "&quot;This assignment is out of my current skill set; it perplexes me.&quot; While it might seem mean, the point of the exercise is for you to figure this out. Learning isn&#39;t always easy; Often times we spend days puzzling and seemingly making no progress as we explore different means of getting where we want to be. And that&#39;s what programming can be until we&#39;ve learned the patterns and ins and outs of the language(s) we&#39;re working with. We&#39;re expected to be resourceful and and to figure it out. We don&#39;t die trying but we do give a heroic try."}, {"owner": {"reputation": 2044, "user_id": 1107211, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/mte2a.jpg?s=128&g=1", "display_name": "wurde", "link": "https://stackoverflow.com/users/1107211/wurde"}, "edited": false, "score": 1, "creation_date": 1438790110, "post_id": 31836602, "comment_id": 51596232, "body": "SO is not for outsourcing assignments, but direction is definitely available. Below I provide a gem I&#39;ve used in the past to do just what you&#39;re trying. Also consider of requiring Rails gems such as ActiveRecord and others in one file to accomplish the same thing."}], "answers": [{"comments": [{"owner": {"reputation": 8258, "user_id": 5182047, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/Vkgn6.jpg?s=128&g=1", "display_name": "Erik &#197;sland", "link": "https://stackoverflow.com/users/5182047/erik-%c3%85sland"}, "edited": false, "score": 0, "creation_date": 1438792130, "post_id": 31837362, "comment_id": 51597530, "body": "This makes sense to me. What doesn&#39;t make sense to me is how you are suppose to get your view file and controller files to play off of each other or communicate with each other."}, {"owner": {"reputation": 10611, "user_id": 366299, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/0e8e3739ae9c55898c284aaf5ba164ba?s=128&d=identicon&r=PG", "display_name": "atamanroman", "link": "https://stackoverflow.com/users/366299/atamanroman"}, "reply_to_user": {"reputation": 8258, "user_id": 5182047, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/Vkgn6.jpg?s=128&g=1", "display_name": "Erik &#197;sland", "link": "https://stackoverflow.com/users/5182047/erik-%c3%85sland"}, "edited": false, "score": 1, "creation_date": 1438792632, "post_id": 31837362, "comment_id": 51597852, "body": "Well you pass your model and view to your controller. If I enter &#39;withdraw 2000&#39;, the view forwards that to your controller. There you decide that the user input means &#39;call withdraw(user_pin, 2000)&#39;. You need to update the view then, because the model (available money) changed. Often this is done by notifying the view from the model. In your case you should be good if you rerender after every action."}, {"owner": {"reputation": 8258, "user_id": 5182047, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/Vkgn6.jpg?s=128&g=1", "display_name": "Erik &#197;sland", "link": "https://stackoverflow.com/users/5182047/erik-%c3%85sland"}, "edited": false, "score": 0, "creation_date": 1438792993, "post_id": 31837362, "comment_id": 51598111, "body": "So theoretically, if I were to put <code>yes_or_no = gets.chomp</code>  in a view file, how would I get it to communicate with an <code>if&#47;else</code> in a controller file?"}, {"owner": {"reputation": 10611, "user_id": 366299, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/0e8e3739ae9c55898c284aaf5ba164ba?s=128&d=identicon&r=PG", "display_name": "atamanroman", "link": "https://stackoverflow.com/users/366299/atamanroman"}, "reply_to_user": {"reputation": 8258, "user_id": 5182047, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/Vkgn6.jpg?s=128&g=1", "display_name": "Erik &#197;sland", "link": "https://stackoverflow.com/users/5182047/erik-%c3%85sland"}, "edited": false, "score": 0, "creation_date": 1438793367, "post_id": 31837362, "comment_id": 51598352, "body": "You would call <code>controller.register(yes_or_no)</code> or maybe collect more information first and have <code>controller.register(user_information) if yes_or_no</code>. You collect data in your view and forward that to your controller where you can decide what to do. I hope you get the overall concept - there is not <i>right</i> solution."}, {"owner": {"reputation": 8258, "user_id": 5182047, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/Vkgn6.jpg?s=128&g=1", "display_name": "Erik &#197;sland", "link": "https://stackoverflow.com/users/5182047/erik-%c3%85sland"}, "edited": false, "score": 0, "creation_date": 1438793768, "post_id": 31837362, "comment_id": 51598597, "body": "Lol. I am super confused and poking around in the dark. You get the answer though. Thanks."}, {"owner": {"reputation": 10611, "user_id": 366299, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/0e8e3739ae9c55898c284aaf5ba164ba?s=128&d=identicon&r=PG", "display_name": "atamanroman", "link": "https://stackoverflow.com/users/366299/atamanroman"}, "reply_to_user": {"reputation": 8258, "user_id": 5182047, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/Vkgn6.jpg?s=128&g=1", "display_name": "Erik &#197;sland", "link": "https://stackoverflow.com/users/5182047/erik-%c3%85sland"}, "edited": false, "score": 0, "creation_date": 1438807966, "post_id": 31837362, "comment_id": 51606742, "body": "Yes this is gonna take a while to grasp fully. Try to find some MVC code examples online (prefer desktop apps without framework use). Nobody expects that you get it right the first (100) time(s). If you have something working and want it reviewed, you can poke me at twitter (same nick). SO is not the best platform for such broad questions."}], "tags": [], "owner": {"reputation": 10611, "user_id": 366299, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/0e8e3739ae9c55898c284aaf5ba164ba?s=128&d=identicon&r=PG", "display_name": "atamanroman", "link": "https://stackoverflow.com/users/366299/atamanroman"}, "is_accepted": true, "score": 2, "last_activity_date": 1438808026, "last_edit_date": 1438808026, "creation_date": 1438790229, "answer_id": 31837362, "question_id": 31836602, "link": "https://stackoverflow.com/questions/31836602/turning-a-single-file-into-mvc-without-rails/31837362#31837362", "title": "Turning a single file into MVC without Rails", "body": "<p>A simple approach would be to create three classes:</p>\n\n<p><code>BankAccount</code> minus text output is your <code>Model</code>. </p>\n\n<p>All the text I/O goes into your <code>View</code>. Prompt the user for an action or registration. Get the model (for displaying data) from your controller or use the model directly.</p>\n\n<p>Your <code>Controller</code> is responsible for a) reacting to user input, b) modifying the model and c) for holding state not directly related to the BankAccount (this point is discussable) like being logged in or what actions are possible from your current state. Your <code>Controller</code> receives all actions with user supplied data from your view.</p>\n\n<p>Clean separation between View and Controller may be a bit hard in a console application. Also, there are about a million possible ways to implement this in a MVC style. Most important point: no UI-Code (puts/gets) in your model.</p>\n"}], "owner": {"reputation": 8258, "user_id": 5182047, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/Vkgn6.jpg?s=128&g=1", "display_name": "Erik &#197;sland", "link": "https://stackoverflow.com/users/5182047/erik-%c3%85sland"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 140, "favorite_count": 0, "accepted_answer_id": 31837362, "answer_count": 1, "score": -3, "last_activity_date": 1438808026, "creation_date": 1438788224, "last_edit_date": 1438798212, "question_id": 31836602, "link": "https://stackoverflow.com/questions/31836602/turning-a-single-file-into-mvc-without-rails", "title": "Turning a single file into MVC without Rails", "body": "<p>I need to take the single file code below and separate it into a Model, View, Controller (MVC) ruby program that can run by the <code>ruby</code> command in the command line without using Rails (for instructions on how to run this program from <code>irb</code>, check out the README.md on my <a href=\"https://github.com/erikasland/RubyBank\" rel=\"nofollow\">RubyBank</a> Github Repo).</p>\n\n<pre><code>require_relative 'view'\n\nclass BankAccount\n  attr_accessor :name, :balance\n  def initialize(name, balance=0)\n    @name = name\n    @balance = balance\n  end\n  def show_balance(pin_access)\n    if pin_access == pin || pin_access == bank_manager \n      puts \"\\nYour current balance is: $#{@balance}\"\n    else\n      puts pin_error_message\n    end\n  end\n  def withdraw(pin_access, amount)\n    if pin_access == pin \n      @balance -= amount\n      puts \"'\\nYou just withdrew $#{amount} from your account. \\n\\nYour remaining balance is: $#{@balance}\\n\\n\"\n    else\n      puts pin_error_message\n    end\n    if @balance &lt; 0\n      @balance += amount\n      return overdraft_protection\n    end\n  end\n  def deposit(pin_access, amount)\n    if pin_access == pin\n      @balance += amount\n      puts \"\\nYou just deposited $#{amount} into your account. \\n\\nYour remaining balance is: $#{@balance}\"\n    else\n      puts pin_error_message\n    end\n  end\n\n  private\n  def pin\n    @pin = 1234\n  end\n  def bank_manager\n    @bank_manager = 4321\n  end\n  def pin_error_message\n    puts \"Invalid PIN number. Try again.\"\n  end\n  def overdraft_protection\n    puts \"\\nYou have overdrafted your account. We cannot complete your withdrawl. Please deposit money before trying again. \\n\\nYour corrected balance is $#{@balance}\"\n  end\nend\n</code></pre>\n\n<p>I am looking for a good place to start or a general approach towards taking on such a task.</p>\n"}, {"tags": ["ruby", "hive", "rbhive"], "comments": [{"owner": {"reputation": 4731, "user_id": 2757483, "user_type": "registered", "accept_rate": 48, "profile_image": "https://graph.facebook.com/7812459/picture?type=large", "display_name": "Jackson", "link": "https://stackoverflow.com/users/2757483/jackson"}, "edited": false, "score": 0, "creation_date": 1438794583, "post_id": 31836486, "comment_id": 51599090, "body": "A little more detail. I am trying to execute the Hive query above with the gem, rbhive."}], "answers": [{"tags": [], "owner": {"reputation": 21521, "user_id": 78613, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/0fa1dc97175c4cc1ea4ecf506119961c?s=128&d=identicon&r=PG", "display_name": "Nick Veys", "link": "https://stackoverflow.com/users/78613/nick-veys"}, "is_accepted": false, "score": 0, "last_activity_date": 1438789378, "creation_date": 1438789378, "answer_id": 31837043, "question_id": 31836486, "link": "https://stackoverflow.com/questions/31836486/hive-query-use-specific-database-and-show-tables/31837043#31837043", "title": "Hive Query: Use specific database and show tables", "body": "<p>Untested, but some simple database APIs don't support multiple statements very well.  Looking at the API, try something like this:</p>\n\n<pre><code>RBHive.connect(address, port) do |connection|\n  connection.execute('USE DATABASE1')\n  connection.fetch('SHOW TABLES')\nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 3328, "user_id": 4930264, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/ace8189a3e4dc7459f70b2741c211885?s=128&d=identicon&r=PG&f=1", "display_name": "invoketheshell", "link": "https://stackoverflow.com/users/4930264/invoketheshell"}, "is_accepted": false, "score": 0, "last_activity_date": 1438791696, "creation_date": 1438791696, "answer_id": 31837886, "question_id": 31836486, "link": "https://stackoverflow.com/questions/31836486/hive-query-use-specific-database-and-show-tables/31837886#31837886", "title": "Hive Query: Use specific database and show tables", "body": "<p>I could not get hive to reproduce your error but this might help.</p>\n\n<ol>\n<li>If the database didn't exist you would get a \"Database does not exist\" error.  So I rule that out.</li>\n<li><p>Don't submit with quotes around it and make sure you close your last line with \";\".  Use this code here:</p>\n\n<pre><code>use database1; show tables;\n</code></pre></li>\n</ol>\n"}, {"tags": [], "owner": {"reputation": 99, "user_id": 10350041, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-O5yeBjOwIWQ/AAAAAAAAAAI/AAAAAAAAAKE/vZnT9UBkJhk/photo.jpg?sz=128", "display_name": "Swarup", "link": "https://stackoverflow.com/users/10350041/swarup"}, "is_accepted": false, "score": 0, "last_activity_date": 1588239242, "creation_date": 1588239242, "answer_id": 61520278, "question_id": 31836486, "link": "https://stackoverflow.com/questions/31836486/hive-query-use-specific-database-and-show-tables/61520278#61520278", "title": "Hive Query: Use specific database and show tables", "body": "<p>You can simply use the below command to get it done.</p>\n\n<pre><code>show tables in &lt;YOUR_DATABASE_NAME&gt;;\n</code></pre>\n"}], "owner": {"reputation": 4731, "user_id": 2757483, "user_type": "registered", "accept_rate": 48, "profile_image": "https://graph.facebook.com/7812459/picture?type=large", "display_name": "Jackson", "link": "https://stackoverflow.com/users/2757483/jackson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 2571, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1588239242, "creation_date": 1438787883, "last_edit_date": 1438792249, "question_id": 31836486, "link": "https://stackoverflow.com/questions/31836486/hive-query-use-specific-database-and-show-tables", "title": "Hive Query: Use specific database and show tables", "body": "<p>I'm trying to execute the following Hive query: </p>\n\n<pre><code>\"USE DATABASE1; SHOW TABLES\"\n</code></pre>\n\n<p>Returns the following error: </p>\n\n<pre><code>HiveServerException: Error while compiling statement: FAILED: ParseException line 1:13 missing EOF at ';' near 'DATABASE1'\n</code></pre>\n"}, {"tags": ["ruby", "rake", "rake-task", "rakefile"], "comments": [{"owner": {"reputation": 1785, "user_id": 3373470, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/8f968c218643a09267014e4beaeb4770?s=128&d=identicon&r=PG&f=1", "display_name": "onebree", "link": "https://stackoverflow.com/users/3373470/onebree"}, "edited": false, "score": 0, "creation_date": 1438802615, "post_id": 31836219, "comment_id": 51603735, "body": "I think this is a good question. What have you done so far? Right now, it looks more like a tutorial question than a help me out question. Include what you have done, and it will be good"}, {"owner": {"reputation": 2659, "user_id": 496501, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/265f8fef23f99b7192248b37c2c584ac?s=128&d=identicon&r=PG", "display_name": "Justin Ohms", "link": "https://stackoverflow.com/users/496501/justin-ohms"}, "reply_to_user": {"reputation": 1785, "user_id": 3373470, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/8f968c218643a09267014e4beaeb4770?s=128&d=identicon&r=PG&f=1", "display_name": "onebree", "link": "https://stackoverflow.com/users/3373470/onebree"}, "edited": false, "score": 0, "creation_date": 1438803756, "post_id": 31836219, "comment_id": 51604378, "body": "@HunterStevens Thanks for your feed back.  I have tried many different ways of approaching this so far (to many to list or remember) and I am continuing to research a solution on my own.  For example, currently I am researching into leveraging the Rake::NameSpace and TaskManager classes to accomplish this directly.  This probably sounds like a tutorial question because I started to think that I might just be overthinking this as it seems like the sort of thing that might be commonly desired.  So, perhaps there is something I have overlooked, in that case yes it would be a tutorial question."}, {"owner": {"reputation": 1785, "user_id": 3373470, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/8f968c218643a09267014e4beaeb4770?s=128&d=identicon&r=PG&f=1", "display_name": "onebree", "link": "https://stackoverflow.com/users/3373470/onebree"}, "edited": false, "score": 0, "creation_date": 1438803930, "post_id": 31836219, "comment_id": 51604475, "body": "Well, I upvoted you because this is a very interesting question. I am not flagging it, but just wanted to let you know"}, {"owner": {"reputation": 195, "user_id": 3144022, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/e778f594039eb36e69c2d97f715cc4ad?s=128&d=identicon&r=PG", "display_name": "LiveNL", "link": "https://stackoverflow.com/users/3144022/livenl"}, "edited": false, "score": 0, "creation_date": 1438807812, "post_id": 31836219, "comment_id": 51606649, "body": "I&#39;m curious, how were you thinking to link the projects anyway? Or is that part of your question?"}, {"owner": {"reputation": 2659, "user_id": 496501, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/265f8fef23f99b7192248b37c2c584ac?s=128&d=identicon&r=PG", "display_name": "Justin Ohms", "link": "https://stackoverflow.com/users/496501/justin-ohms"}, "reply_to_user": {"reputation": 195, "user_id": 3144022, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/e778f594039eb36e69c2d97f715cc4ad?s=128&d=identicon&r=PG", "display_name": "LiveNL", "link": "https://stackoverflow.com/users/3144022/livenl"}, "edited": false, "score": 0, "creation_date": 1438811633, "post_id": 31836219, "comment_id": 51608461, "body": "@LiveNL  I should probably clarify that the projects themselves are not ruby projects; java, javascript, python, c#, objective-c  (It may seem odd but at the moment none of them are ruby projects.) The project A build script has a task that gathers the final artifacts from each project build and places them in the correct locations for the integration tests and deployment process to pick up.  The projects are independent builds, but follow a defined API."}, {"owner": {"reputation": 2282, "user_id": 123642, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/73aa7ad0c97ecb6a1d766fa8810aba29?s=128&d=identicon&r=PG", "display_name": "kolen", "link": "https://stackoverflow.com/users/123642/kolen"}, "edited": false, "score": 0, "creation_date": 1578608636, "post_id": 31836219, "comment_id": 105504648, "body": "Rails <a href=\"https://github.com/rails/rails/blob/d89ee16bbc3b78c47cce7b09de448badf42a4124/Rakefile#L28-L30\" rel=\"nofollow noreferrer\">just does cd to each subdirectory and runs rack (as $0) there</a>, but it&#39;s quite hacky. This approach is popular with regular <code>make</code>."}], "owner": {"reputation": 2659, "user_id": 496501, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/265f8fef23f99b7192248b37c2c584ac?s=128&d=identicon&r=PG", "display_name": "Justin Ohms", "link": "https://stackoverflow.com/users/496501/justin-ohms"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 94, "favorite_count": 2, "answer_count": 0, "score": 3, "last_activity_date": 1438811931, "creation_date": 1438787129, "last_edit_date": 1438811931, "question_id": 31836219, "link": "https://stackoverflow.com/questions/31836219/how-do-i-import-one-set-of-rake-tasks-into-another-but-inside-a-namespace", "title": "How do I import one set of rake tasks into another but inside a namespace?", "body": "<p>I have three projects, I want to be able to import project B and C's rake files into project A rake file but each inside of it's own namespace:</p>\n\n<p>Now to the diagram...</p>\n\n<ul>\n<li>ProjectA\n\n<ul>\n<li>rakefile.rb<br>\n-task1<br>\n-task2</li>\n</ul></li>\n<li>ProjectB\n\n<ul>\n<li>rakefile.rb<br>\n-task3<br>\n-task4</li>\n</ul></li>\n<li>ProjectC\n\n<ul>\n<li>rakefile.rb<br>\n-task3<br>\n-task4</li>\n</ul></li>\n</ul>\n\n<p>From inside of ProjectB and ProjectC I want to be able to run<br>\n<code>rake task3 task4</code><br>\nwith each calling appropriate tasks</p>\n\n<p>From inside of ProjectA I want to be able to run<br>\n<code>rake task1 task2  b:task3 b:task4 c:task2 c:task4</code></p>\n\n<p>This is a simplification of what I want to do. Each rake file might have dozens of tasks and the task names may or may not match from project to project.   Making sure each task runs with the correct paths is not a problem.</p>\n\n<p>Additionally I would like to strip descriptions from the tasks coming from ProjectB and ProjectC so they do not display when doing a rake -T.  Although it might be nice to be able to also pull those descriptions in for say another \"ProjectD\"</p>\n\n<p>The projects themselves are in various languages and targeting various platforms etc.  Project A contains a task that takes care of picking up the build artifacts from each project and placing them in the correct location for integration testing and deployment.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "font-awesome"], "answers": [{"comments": [{"owner": {"reputation": 622, "user_id": 3303513, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/d060e6ac7d96ee538874bdb48d8ed143?s=128&d=identicon&r=PG", "display_name": "maahd", "link": "https://stackoverflow.com/users/3303513/maahd"}, "edited": false, "score": 0, "creation_date": 1438788834, "post_id": 31836398, "comment_id": 51595386, "body": "This works. However, it gets rid of the &quot;(#{number})&quot;"}, {"owner": {"reputation": 10921, "user_id": 85125, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/5636d7549013d9fc365de56ad90d12bc?s=128&d=identicon&r=PG", "display_name": "Bart Jedrocha", "link": "https://stackoverflow.com/users/85125/bart-jedrocha"}, "reply_to_user": {"reputation": 622, "user_id": 3303513, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/d060e6ac7d96ee538874bdb48d8ed143?s=128&d=identicon&r=PG", "display_name": "maahd", "link": "https://stackoverflow.com/users/3303513/maahd"}, "edited": false, "score": 0, "creation_date": 1438789468, "post_id": 31836398, "comment_id": 51595811, "body": "Oops forgot about that. Please see my edited answer."}], "tags": [], "owner": {"reputation": 10921, "user_id": 85125, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/5636d7549013d9fc365de56ad90d12bc?s=128&d=identicon&r=PG", "display_name": "Bart Jedrocha", "link": "https://stackoverflow.com/users/85125/bart-jedrocha"}, "is_accepted": true, "score": 1, "last_activity_date": 1438789449, "last_edit_date": 1438789449, "creation_date": 1438787617, "answer_id": 31836398, "question_id": 31836011, "link": "https://stackoverflow.com/questions/31836011/font-awesome-inside-ruby-function/31836398#31836398", "title": "Font Awesome inside Ruby function", "body": "<p>Well you're not actually rendering the icon. In your code all you're doing is adding an attribute of <code>fa_icon</code> to the span tag. Unless there is some additional code that will interpret this attribute, it won't work. Try this instead</p>\n\n<pre><code>def new_applications(number, new_castings_for_user)\n  content_tag :span, class: \"icon-new-applications#{' highlight' if new_castings_for_user}\" do\n    [content_tag(:i, \"\", class: \"fa fa-user-plus\"), \"(#{number})\"].join.html_safe\n  end\nend\n</code></pre>\n"}], "owner": {"reputation": 622, "user_id": 3303513, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/d060e6ac7d96ee538874bdb48d8ed143?s=128&d=identicon&r=PG", "display_name": "maahd", "link": "https://stackoverflow.com/users/3303513/maahd"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 70, "favorite_count": 1, "accepted_answer_id": 31836398, "answer_count": 1, "score": 1, "last_activity_date": 1438789449, "creation_date": 1438786601, "question_id": 31836011, "link": "https://stackoverflow.com/questions/31836011/font-awesome-inside-ruby-function", "title": "Font Awesome inside Ruby function", "body": "<p>I had a ruby function in my productions_helper.rb:</p>\n\n<pre><code>def new_applications(number, new_castings_for_user)\n  content_tag :span, \"(#{number})\", class: \"icon-new-applications#{' highlight' if new_castings_for_user}\"\nend\n</code></pre>\n\n<p>I added a font awesome icon to it:</p>\n\n<pre><code>def new_applications(number, new_castings_for_user)\n  content_tag :span, \"(#{number})\", fa_icon: \"user-plus\", class: \"icon-new-applications#{' highlight' if new_castings_for_user}\"\nend\n</code></pre>\n\n<p>However, the icon is not showing up on my website. Can someone tell me what I did wrong?</p>\n"}, {"tags": ["ruby", "mongodb", "bson"], "owner": {"reputation": 4875, "user_id": 619036, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/53017a0e184d8663d42a57e26b000d53?s=128&d=identicon&r=PG", "display_name": "Gaurav Shah", "link": "https://stackoverflow.com/users/619036/gaurav-shah"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 283, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1438789889, "creation_date": 1438786255, "last_edit_date": 1438789889, "question_id": 31835899, "link": "https://stackoverflow.com/questions/31835899/ruby-convert-bsonhash-to-mongo-strict-json", "title": "ruby convert BSON::hash to mongo strict json", "body": "<p>I would like to convert a bson hash to a query string which can be used for mongoexport.</p>\n\n<p>For ex following hash to:\n<code>\n{\n'_id' =&gt; BSON::ObjectId.from_string(\"5375a4fb9356c2c27d000007\")\n'time' =&gt; Time.at(1438785734)\n}\n</code></p>\n\n<p>to\n<code>\n'{ \"_id\" : ObjectId(\"5375a4fb9356c2c27d000007\"), \"time\": ISODate(\"2015-03-08T08:00:00Z\")}'\n</code></p>\n\n<p>for python there is <code>json_util</code> method\n<a href=\"http://api.mongodb.org/python/current/api/bson/json_util.html\" rel=\"nofollow\">http://api.mongodb.org/python/current/api/bson/json_util.html</a>\nunable to find something similar in ruby</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 1, "creation_date": 1438786292, "post_id": 31835684, "comment_id": 51593626, "body": "What if a word occurs multiple times? In the string: <code>s = &quot;foo foo&quot;; a = [&quot;foo&quot;]</code> or in the array: <code>s = &quot;foo&quot;; a = [&quot;foo&quot;, &quot;foo&quot;]</code> (or in both)"}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 1, "creation_date": 1438786684, "post_id": 31835684, "comment_id": 51593881, "body": "BTW, <code>&quot;this&quot;</code> and <code>&quot;This&quot;</code> are different strings."}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 1, "creation_date": 1438790286, "post_id": 31835684, "comment_id": 51596367, "body": "Why not show us what you&#39;ve tried, and we&#39;ll help correct it?"}], "answers": [{"comments": [{"owner": {"reputation": 1785, "user_id": 4494614, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/32375d718e1f5f3baa24db104b021443?s=128&d=identicon&r=PG&f=1", "display_name": "Fane", "link": "https://stackoverflow.com/users/4494614/fane"}, "edited": false, "score": 0, "creation_date": 1438785868, "post_id": 31835724, "comment_id": 51593306, "body": "does this change the array &quot;a&quot;?"}], "tags": [], "owner": {"reputation": 14407, "user_id": 3035830, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/14809f2ad7f14e2867798697ab8f8006?s=128&d=identicon&r=PG", "display_name": "shivam", "link": "https://stackoverflow.com/users/3035830/shivam"}, "is_accepted": true, "score": 2, "last_activity_date": 1438785784, "creation_date": 1438785784, "answer_id": 31835724, "question_id": 31835684, "link": "https://stackoverflow.com/questions/31835684/compare-string-against-array-and-extract-array-elements-present-in-ruby/31835724#31835724", "title": "Compare string against array and extract array elements present in ruby", "body": "<p>One way to do this:</p>\n\n<pre><code>str = \"This is a string\"\na = [\"this\",\"is\",\"something\"]\nstr.downcase.split &amp; a\n# =&gt; [\"this\", \"is\"]\n</code></pre>\n\n<p>I am assuming Array <code>a</code> will always have keys(elements) in downcase. </p>\n"}, {"tags": [], "owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "is_accepted": false, "score": 0, "last_activity_date": 1438791441, "last_edit_date": 1490005771, "creation_date": 1438791441, "answer_id": 31837795, "question_id": 31835684, "link": "https://stackoverflow.com/questions/31835684/compare-string-against-array-and-extract-array-elements-present-in-ruby/31837795#31837795", "title": "Compare string against array and extract array elements present in ruby", "body": "<p>Your question has an <a href=\"https://meta.stackexchange.com/questions/66377/what-is-the-xy-problem\">XY problem</a> smell to it. Usually when we want to find what words exist the next thing we want to know is how many times they exist. Frequency counts are all over the internet and Stack Overflow. This is a minor modification to such a thing:</p>\n\n<pre><code>str = \"This is a string\"\na = [\"this\", \"is\", \"something\"]\n\na_hash = a.each_with_object({}) { |i, h| h[i] = 0 } # =&gt; {\"this\"=&gt;0, \"is\"=&gt;0, \"something\"=&gt;0}\n</code></pre>\n\n<p>That defined <code>a_hash</code> with the keys being the words to be counted.</p>\n\n<pre><code>str.downcase.split.each{ |k| a_hash[k] += 1 if a_hash.key?(k) }\na_hash # =&gt; {\"this\"=&gt;1, \"is\"=&gt;1, \"something\"=&gt;0}\n</code></pre>\n\n<p><code>a_hash</code> now contains the counts of the word occurrences. <code>if a_hash.key?(k)</code> is the main difference we'd see compared to a regular word-count as it's only allowing word-counts to occur for the words in <code>a</code>.</p>\n\n<pre><code>a_hash.keys.select{ |k| a_hash[k] &gt; 0 } # =&gt; [\"this\", \"is\"]\n</code></pre>\n\n<p>It's easy to find the words that were in common because the counter is > 0.</p>\n\n<p>This is a very common problem in text processing so it's good knowing how it works and how to bend it to your will.</p>\n"}, {"tags": [], "owner": {"reputation": 53, "user_id": 3658362, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2272f009445ce9dacde2b2d775682d26?s=128&d=identicon&r=PG&f=1", "display_name": "user3658362", "link": "https://stackoverflow.com/users/3658362/user3658362"}, "is_accepted": false, "score": 1, "last_activity_date": 1438808418, "creation_date": 1438808418, "answer_id": 31842725, "question_id": 31835684, "link": "https://stackoverflow.com/questions/31835684/compare-string-against-array-and-extract-array-elements-present-in-ruby/31842725#31842725", "title": "Compare string against array and extract array elements present in ruby", "body": "<p>There's always many ways to do this sort of thing</p>\n\n<pre><code>str = \"this is the example string\"\nwords_to_compare = [\"dogs\", \"ducks\", \"seagulls\", \"the\"]\n\nwords_to_compare.select{|word| word =~ Regexp.union(str.split) }\n#=&gt; [\"the\"]\n</code></pre>\n"}], "owner": {"reputation": 1785, "user_id": 4494614, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/32375d718e1f5f3baa24db104b021443?s=128&d=identicon&r=PG&f=1", "display_name": "Fane", "link": "https://stackoverflow.com/users/4494614/fane"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 58, "favorite_count": 0, "accepted_answer_id": 31835724, "answer_count": 3, "score": 1, "last_activity_date": 1438808418, "creation_date": 1438785665, "last_edit_date": 1438786557, "question_id": 31835684, "link": "https://stackoverflow.com/questions/31835684/compare-string-against-array-and-extract-array-elements-present-in-ruby", "title": "Compare string against array and extract array elements present in ruby", "body": "<p>I have the following string:</p>\n\n<pre><code>str = \"This is a string\"\n</code></pre>\n\n<p>What I want to do is compare it with this array:</p>\n\n<pre><code>a = [\"this\", \"is\", \"something\"]\n</code></pre>\n\n<p>The result should be an array with <code>\"this\"</code> and <code>\"is\"</code> because both are present in the array <em>and</em> in the given string. <code>\"something\"</code> is not present in the string so it shouldn't appear. How can I do this?</p>\n"}, {"tags": ["css", "ruby-on-rails", "ruby", "twitter-bootstrap", "haml"], "comments": [{"owner": {"reputation": 8117, "user_id": 1207687, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/cOUI4.jpg?s=128&g=1", "display_name": "Wes Foster", "link": "https://stackoverflow.com/users/1207687/wes-foster"}, "edited": false, "score": 0, "creation_date": 1438785578, "post_id": 31835588, "comment_id": 51593052, "body": "Post the relative styles"}, {"owner": {"reputation": 3272, "user_id": 2389628, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/A4nuI.jpg?s=128&g=1", "display_name": "smallbutton", "link": "https://stackoverflow.com/users/2389628/smallbutton"}, "edited": false, "score": 0, "creation_date": 1438785863, "post_id": 31835588, "comment_id": 51593301, "body": "This probably has something to do with how you include bootstrap in your project rather than how you are using it. So please post the relevant css files/imports."}, {"owner": {"reputation": 4805, "user_id": 2869337, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/64c9080ad58924663e8bd4af5046a10a?s=128&d=identicon&r=PG", "display_name": "thedanotto", "link": "https://stackoverflow.com/users/2869337/thedanotto"}, "edited": false, "score": 0, "creation_date": 1438786446, "post_id": 31835588, "comment_id": 51593728, "body": "In you HTML you can view source to see what classes are being applied to your link. It&#39;s a good starting point."}], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 5194491, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e94d83f87d12b23b98f70a9426c587e4?s=128&d=identicon&r=PG&f=1", "display_name": "Nano", "link": "https://stackoverflow.com/users/5194491/nano"}, "edited": false, "score": 0, "creation_date": 1438787298, "post_id": 31835911, "comment_id": 51594320, "body": "It was indeed active admin that was styling those links. Now I&#39;ll move on to finding a way to stop it."}], "tags": [], "owner": {"reputation": 7849, "user_id": 1065703, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/tO2eL.jpg?s=128&g=1", "display_name": "Martin M", "link": "https://stackoverflow.com/users/1065703/martin-m"}, "is_accepted": true, "score": 0, "last_activity_date": 1438786302, "creation_date": 1438786302, "answer_id": 31835911, "question_id": 31835588, "link": "https://stackoverflow.com/questions/31835588/ruby-on-rails-styling-conflict-with-bootstrap/31835911#31835911", "title": "Ruby on Rails styling conflict with bootstrap", "body": "<p>You're doing nothin wrong with the <code>link_to</code> syntax.<br>\n<code>link_to</code> only renders a <code>&lt;a href&gt;&lt;/a&gt;</code> element, it does no styling at all (unless you provide an explicite <code>style</code> attribute).<br>\nThe appearence is totaly defined by your CSS.</p>\n\n<p>So use your browser's developer tools to check the CSS styles, that are used on your link and show the resuts here for advise.</p>\n\n<p>Maybe <code>Active Admin</code> styles are overriding the bootstrap styles.</p>\n"}, {"comments": [{"owner": {"reputation": 13, "user_id": 5194491, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e94d83f87d12b23b98f70a9426c587e4?s=128&d=identicon&r=PG&f=1", "display_name": "Nano", "link": "https://stackoverflow.com/users/5194491/nano"}, "edited": false, "score": 0, "creation_date": 1438787332, "post_id": 31836154, "comment_id": 51594340, "body": "Thank you, sounds like this might help me figure out this issue."}], "tags": [], "owner": {"reputation": 1258, "user_id": 1852651, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/rfKGa.jpg?s=128&g=1", "display_name": "Graham S.", "link": "https://stackoverflow.com/users/1852651/graham-s"}, "is_accepted": false, "score": 0, "last_activity_date": 1438791103, "last_edit_date": 1438791103, "creation_date": 1438786956, "answer_id": 31836154, "question_id": 31835588, "link": "https://stackoverflow.com/questions/31835588/ruby-on-rails-styling-conflict-with-bootstrap/31836154#31836154", "title": "Ruby on Rails styling conflict with bootstrap", "body": "<p>The <code>application.css</code> (or <code>.sass</code> or <code>.scss</code> for whatever your file extension is) is used as a master sheet, and if I am not mistaken, is typically loaded <em>last</em> and any of the imports you include on the <code>application.css</code> file will override any of the stylesheets for different controllers (such as <code>post.css.scss</code> would be overridden by <code>application.css</code>, for e.g.).</p>\n\n<p><a href=\"http://www.mattboldt.com/organizing-css-and-sass-rails/\" rel=\"nofollow\">Matt Boldt's article</a> has a great description of that and how to understand it.</p>\n\n<p><strong>Edit</strong>:</p>\n\n<p>I wanted to elaborate on this a bit more, but I was being called into a meeting so I'll do that now since it's over.</p>\n\n<p>In your <code>application.css</code> file, at the very bottom of the list of require lines you should see:</p>\n\n<pre><code>...\n*= require_tree .        //The \"tree\" of all other stylesheets gets compiled first.\n*= require_self          //Then this page (the application.css page) gets loaded after the tree\n*/\n@import stuff...         //Then this overrides all that stuff \n</code></pre>\n\n<p>I'm not sure if possibly switching the <code>require_tree .</code> and <code>require_self</code> lines would do the trick, but it doesn't <em>feel</em> like good practice, and I'm typically not comfortable modifying certain hierarchies in Rails apps, so although that might work, I personally don't suggest it. </p>\n\n<p>I usually write my CSS in the <code>application.css</code>. Even though I am told this is bad practice, it has worked every time for me and never really give me any complications and has actually increased my productivity for a few reasons:</p>\n\n<ul>\n<li>All my CSS is in one file, not scattered over several which may cause styling inconsistencies.</li>\n<li>I don't need to forcefully override Bootstrap styling by using <code>!important</code> everywhere.</li>\n</ul>\n\n<p>And that's pretty much the only two reasons I need. Honestly, use whatever works best for you that doesn't make future development on it a pain.</p>\n"}], "owner": {"reputation": 13, "user_id": 5194491, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e94d83f87d12b23b98f70a9426c587e4?s=128&d=identicon&r=PG&f=1", "display_name": "Nano", "link": "https://stackoverflow.com/users/5194491/nano"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 373, "favorite_count": 0, "accepted_answer_id": 31835911, "answer_count": 2, "score": 1, "last_activity_date": 1439205288, "creation_date": 1438785398, "last_edit_date": 1495540284, "question_id": 31835588, "link": "https://stackoverflow.com/questions/31835588/ruby-on-rails-styling-conflict-with-bootstrap", "title": "Ruby on Rails styling conflict with bootstrap", "body": "<p>I'm having what I assume is a simple syntax problem in haml using ruby on rails and bootstrap.</p>\n\n<p>Currently whenever I want to use a link_to inside a bootstrap element such as a button or a navbar li, the styling of the link_to overrides the one used by the element itself. It results in blue underligned links, which severely clashes with some layouts.</p>\n\n<p>Things like :</p>\n\n<pre><code>%ul.nav.navbar-nav\n %li\n  = link_to t(:button_root), '/'\n %li\n  = link_to t(:button_something), something_path\n</code></pre>\n\n<p>or</p>\n\n<pre><code>.row\n  = link_to something_path, class: 'btn btn-default' do\n   = t(:button_something)\n</code></pre>\n\n<p>will produce this behavior. I've come up with a few impractical solutions like overriding the css directly in application.css but this is hardly something I'd like to have to do everytime. What am I doing wrong in this syntax ?</p>\n\n<p>EDIT :</p>\n\n<p>The inclusion of bootstrap is done through importing through application.css.scss</p>\n\n<pre><code>@import \"bootstrap-sprockets\";\n@import \"bootstrap\";\n</code></pre>\n\n<p>The rest of the stylesheets are empty apart from Active Admin's</p>\n\n<pre><code>@import \"active_admin/mixins\";\n@import \"active_admin/base\";\n</code></pre>\n\n<p>EDIT :</p>\n\n<p>The inclusion of active admin's css in the application stylesheet is the cause of the issue. With a clearer idea of the cause of the issue I could find this answer that explains the issue.</p>\n\n<p><a href=\"https://stackoverflow.com/a/11745446/5194491\">https://stackoverflow.com/a/11745446/5194491</a></p>\n\n<p>I opted to displace active admin's css sheet in the vendor folder as it seemed to me the more sensible choice.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "search", "jquery-chosen", "ransack"], "comments": [{"owner": {"reputation": 4071, "user_id": 3806046, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/5fedf50ce7cd2659bca902e9a2969158?s=128&d=identicon&r=PG&f=1", "display_name": "jkeuhlen", "link": "https://stackoverflow.com/users/3806046/jkeuhlen"}, "edited": false, "score": 0, "creation_date": 1438784886, "post_id": 31834930, "comment_id": 51592545, "body": "What exactly is your question?"}], "answers": [{"comments": [{"owner": {"reputation": 24560, "user_id": 4880924, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/d40e83be235d4f70428da0d42e12d427?s=128&d=identicon&r=PG&f=1", "display_name": "BKSpurgeon", "link": "https://stackoverflow.com/users/4880924/bkspurgeon"}, "edited": false, "score": 1, "creation_date": 1472797833, "post_id": 31836512, "comment_id": 65905428, "body": "insert an empty {}, before the multiple option and it works!"}], "tags": [], "owner": {"reputation": 633, "user_id": 451357, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/27cd8e5e772e3b852a6a3d9284db3e3b?s=128&d=identicon&r=PG", "display_name": "Kamen", "link": "https://stackoverflow.com/users/451357/kamen"}, "is_accepted": false, "score": 2, "last_activity_date": 1473339790, "last_edit_date": 1473339790, "creation_date": 1438787972, "answer_id": 31836512, "question_id": 31834930, "link": "https://stackoverflow.com/questions/31834930/ransack-gem-rails-and-multiselect/31836512#31836512", "title": "Ransack Gem Rails and multiselect", "body": "<p>You should use <code>company_name_in</code> instead of <code>company_name_cont</code>:</p>\n\n<p><code>= f.collection_select :company_name_in, Company.all, :id, :name, {}, {:multiple =&gt; true}</code></p>\n\n<p>More info can be found in ransack's wiki here: <a href=\"https://github.com/activerecord-hackery/ransack/wiki/Basic-Searching#in\" rel=\"nofollow\">https://github.com/activerecord-hackery/ransack/wiki/Basic-Searching#in</a></p>\n"}, {"tags": [], "owner": {"reputation": 976, "user_id": 7249060, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32b7333ee3befe8fb0b44e071d178884?s=128&d=identicon&r=PG&f=1", "display_name": "V K Singh", "link": "https://stackoverflow.com/users/7249060/v-k-singh"}, "is_accepted": false, "score": 1, "last_activity_date": 1515051585, "last_edit_date": 1515051585, "creation_date": 1515051002, "answer_id": 48090607, "question_id": 31834930, "link": "https://stackoverflow.com/questions/31834930/ransack-gem-rails-and-multiselect/48090607#48090607", "title": "Ransack Gem Rails and multiselect", "body": "<p>In general, we can write this as</p>\n\n<pre><code>= f.collection_select :some_id_in, Model.all, :id, :name, {}, {:multiple =&gt; true}\n</code></pre>\n\n<p>where some_id is a model attribute for which we have multiple select value for filter.</p>\n"}], "owner": {"reputation": 41, "user_id": 5194366, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ae75cbd8733f3c14e3ff4bbd01b195fa?s=128&d=identicon&r=PG&f=1", "display_name": "kimo45", "link": "https://stackoverflow.com/users/5194366/kimo45"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1498, "favorite_count": 1, "answer_count": 2, "score": 4, "last_activity_date": 1515051585, "creation_date": 1438783735, "last_edit_date": 1438787954, "question_id": 31834930, "link": "https://stackoverflow.com/questions/31834930/ransack-gem-rails-and-multiselect", "title": "Ransack Gem Rails and multiselect", "body": "<p>I am using the ransack gem for my rails app and have a problem with multiselect.\nI have a job and a company model, a company has many jobs, a job belongs to a company. \nI want to perform a search on jobs so people can see jobs from specific companies, \nI have done some research and apparently this should work in the search form: </p>\n\n<pre><code>= search_form_for @q do |f|\n  = f.collection_select :company_name_cont, Company.all, :id, :name, {:multiple =&gt; true}, class: 'chosen-it'\n  = f.submit \"search\"\n</code></pre>\n\n<p>So in the view I get the list (with autocomplete from the chosen gem) but when I click on search it returns no result and I can't select multiple companies.</p>\n\n<p>However, when I use a search field instead like this:</p>\n\n<pre><code>= f.search_field :company_name_cont\n</code></pre>\n\n<p>The search works.</p>\n\n<p>Could you help me guys</p>\n\n<p>Thanks a lot</p>\n"}, {"tags": ["ruby", "constants"], "answers": [{"tags": [], "owner": {"reputation": 168, "user_id": 4555864, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/93810012ed7e371c8de2f8e4017da91b?s=128&d=identicon&r=PG&f=1", "display_name": "Mangesh Tamhankar", "link": "https://stackoverflow.com/users/4555864/mangesh-tamhankar"}, "is_accepted": false, "score": 1, "last_activity_date": 1438786731, "last_edit_date": 1438786731, "creation_date": 1438784136, "answer_id": 31835080, "question_id": 31834553, "link": "https://stackoverflow.com/questions/31834553/clarification-about-constants-in-ruby/31835080#31835080", "title": "Clarification about constants in ruby", "body": "<p>I've done something similar to this, where I've defined several controller actions (index, create, etc..) in a module, then just <code>include MyModule</code> in the controller in which I want to use them.</p>\n\n<p>At this point, in my Module I can call <code>self.controller_name</code> to get where I actually am coming from.</p>\n\n<p>So instead of trying to set the <code>Route_Name</code>, you could derive it with something like <code>self.controller_name.tableize</code> or <code>self.class.tableize</code></p>\n"}, {"tags": [], "owner": {"reputation": 5298, "user_id": 692560, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/H4sk0.png?s=128&g=1", "display_name": "Thor84no", "link": "https://stackoverflow.com/users/692560/thor84no"}, "is_accepted": false, "score": 0, "last_activity_date": 1438784384, "creation_date": 1438784384, "answer_id": 31835173, "question_id": 31834553, "link": "https://stackoverflow.com/questions/31834553/clarification-about-constants-in-ruby/31835173#31835173", "title": "Clarification about constants in ruby", "body": "<p><code>@route_name</code> as you mentioned is an instance variable and will work, but I think what you're actually looking for is <code>@@route_name</code> which would make it a class level variable (one per class, not per instance).</p>\n"}, {"comments": [{"owner": {"reputation": 168, "user_id": 4555864, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/93810012ed7e371c8de2f8e4017da91b?s=128&d=identicon&r=PG&f=1", "display_name": "Mangesh Tamhankar", "link": "https://stackoverflow.com/users/4555864/mangesh-tamhankar"}, "edited": false, "score": 0, "creation_date": 1438786707, "post_id": 31835174, "comment_id": 51593901, "body": "good point on <code>tableize</code>.. downcase will only work in the two specific examples given."}], "tags": [], "owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "is_accepted": false, "score": 1, "last_activity_date": 1438784739, "last_edit_date": 1438784739, "creation_date": 1438784386, "answer_id": 31835174, "question_id": 31834553, "link": "https://stackoverflow.com/questions/31834553/clarification-about-constants-in-ruby/31835174#31835174", "title": "Clarification about constants in ruby", "body": "<p>Use <code>const_get</code> instead. It's a method call (compared to lookup by static name). Meaning, that it will start the constant lookup from the bottom of the ancestor hierarchy.</p>\n\n<pre><code>module Common\n    def list\n        \"some_url/#{const_get('Route_Name')}.json\"\n    end\nend\n\nclass Posts\n    extend Common\n    Route_Name = 'posts'\nend\n\nclass Comments\n    extend Common\n    Route_Name = 'comments'\nend\n\n\nComments.list # =&gt; \"some_url/comments.json\"\n</code></pre>\n\n<p>@mtamhankar has a good point about deriving routes from class names. Something like this, perhaps (uses <code>tableize</code> from ActiveSupport)</p>\n\n<pre><code>module Common\n    def list\n        \"some_url/#{name.tableize}.json\"\n    end\nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 7994, "user_id": 1625339, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/b8ba46f911517c8b2ccc39e0be9050c0?s=128&d=identicon&r=PG", "display_name": "Aetherus", "link": "https://stackoverflow.com/users/1625339/aetherus"}, "is_accepted": false, "score": 0, "last_activity_date": 1438784922, "last_edit_date": 1438784922, "creation_date": 1438784554, "answer_id": 31835243, "question_id": 31834553, "link": "https://stackoverflow.com/questions/31834553/clarification-about-constants-in-ruby/31835243#31835243", "title": "Clarification about constants in ruby", "body": "<p>A ruby method looks up constants from that method's <code>owner</code>, not the receiver or the class of the receiver. When you access a constant, ruby interpreter looks up the constant along <code>Module.nesting</code> of the calling module or class.</p>\n\n<pre><code>X = 0\n\nmodule A\n  X = 1\n\n  module B\n    p Module.nesting  #=&gt; [A::B, A]\n\n    X = 2\n\n    def self.x\n      X\n    end\n  end\nend\n\nA::B.x  # Try commenting out any 'X = ?' to see the difference\n</code></pre>\n\n<p>When you call <code>A::B.x</code>, ruby tries to find the constant <code>X</code> in the namespace <code>A::B</code> (i.e. tries to find <code>A::B::X</code>), if found, it stops the lookup and returns that value immediately. If not found, then ruby tries to find <code>X</code> inside <code>A</code>, if still not fount, ruby tries to find <code>X</code> inside the top level namespace, which is <code>Object</code>.</p>\n\n<p>Since classes and modules have a class/module method <code>name</code> which returns the name of the class/module, you can refactor your <code>Common</code> module like this:</p>\n\n<pre><code>module Common\n  def list\n    \"some_url/#{name.downcase}.json\"\n  end\nend\n</code></pre>\n\n<p>And annihilate all <code>Route_Name = 'xxx'</code></p>\n"}, {"comments": [{"owner": {"reputation": 2184, "user_id": 3536548, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/qEPjr.png?s=128&g=1", "display_name": "Thermatix", "link": "https://stackoverflow.com/users/3536548/thermatix"}, "edited": false, "score": 0, "creation_date": 1438790628, "post_id": 31835732, "comment_id": 51596597, "body": "There&#39;ll correct but I personally find this to be the most elegant."}], "tags": [], "owner": {"reputation": 16076, "user_id": 802618, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6111449042dd940f360673d25d61ea6b?s=128&d=identicon&r=PG", "display_name": "Kristj&#225;n", "link": "https://stackoverflow.com/users/802618/kristj%c3%a1n"}, "is_accepted": true, "score": 2, "last_activity_date": 1438785796, "creation_date": 1438785796, "answer_id": 31835732, "question_id": 31834553, "link": "https://stackoverflow.com/questions/31834553/clarification-about-constants-in-ruby/31835732#31835732", "title": "Clarification about constants in ruby", "body": "<p>Ruby <a href=\"https://cirw.in/blog/constant-lookup\" rel=\"nofollow\">does constant lookup</a> first by namespace (roughly: where you've nested them) and then by ancestors (what you've inherited from). Because <code>list</code> is declared in <code>Common</code>, lookup starts with <code>Common::Route_Name</code> and can't go any further.</p>\n\n<p>But, when <code>list</code> is called, it's called on <code>Comments</code> or <code>Posts</code>, giving you access to those via <code>self</code>. Instead of leaving Ruby to look for the constant itself, you can use <code>self::Route_Name</code> to make lookup start where you want it.</p>\n\n<pre><code>module Common\n  def list\n    \"some_url/#{self::Route_Name}.json\"\n  end\nend\n\nclass Posts\n  extend Common\n  Route_Name = 'posts'\nend\n\nclass Comments\n  extend Common\n  Route_Name = 'comments'\nend\n\nputs Comments.list #=&gt; some_url/comments.json\nputs Posts.list    #=&gt; some_url/posts.json\n</code></pre>\n"}], "owner": {"reputation": 2184, "user_id": 3536548, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/qEPjr.png?s=128&g=1", "display_name": "Thermatix", "link": "https://stackoverflow.com/users/3536548/thermatix"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 105, "favorite_count": 0, "accepted_answer_id": 31835732, "answer_count": 5, "score": 0, "last_activity_date": 1438786731, "creation_date": 1438782830, "last_edit_date": 1438783982, "question_id": 31834553, "link": "https://stackoverflow.com/questions/31834553/clarification-about-constants-in-ruby", "title": "Clarification about constants in ruby", "body": "<p>I'm trying to build a rest client and since a lot of is almost the same I thought I'd put the actions into a module and just extend the module to get that set of actions and keep the unique bits separate by defining them as a constant, the same constant but each route has it set differently so the end result is a different URL but the same action.</p>\n\n<pre><code>module Common\n    def list\n        \"some_url/#{Route_Name}.json\"\n    end\nend\n\nclass Posts\n    extend Common\n    Route_Name = 'posts'\nend\n\nclass Comments\n    extend Common\n    Route_Name = 'comments'\nend\n\n\nComments.list\n#=&gt; \"some_url/comments.json\"  what I expect to be outputted\n</code></pre>\n\n<p>But it just errors, in this example it would error <code>uninitialized constant Common::Route_Name</code>.</p>\n\n<p>How do I get <code>Route_Name</code> to be what I expect it to be?</p>\n\n<p>EDIT:</p>\n\n<p>I kind of solved the issue by changing <code>Route_Name</code> to <code>@route_name</code>, but the problem is that <code>Route_Name</code> is constant, it will never change so it doesn't feel right using an instance variable, even if it does work.</p>\n"}, {"tags": ["ruby", "google-chrome", "firefox", "selenium", "capybara"], "comments": [{"owner": {"reputation": 1785, "user_id": 3373470, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/8f968c218643a09267014e4beaeb4770?s=128&d=identicon&r=PG&f=1", "display_name": "onebree", "link": "https://stackoverflow.com/users/3373470/onebree"}, "edited": false, "score": 0, "creation_date": 1438803202, "post_id": 31834275, "comment_id": 51604067, "body": "Can you run tests, and show us some query or page load results? Times (in s) for firefox and chrome?"}], "answers": [{"tags": [], "owner": {"reputation": 1785, "user_id": 3373470, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/8f968c218643a09267014e4beaeb4770?s=128&d=identicon&r=PG&f=1", "display_name": "onebree", "link": "https://stackoverflow.com/users/3373470/onebree"}, "is_accepted": false, "score": 0, "last_activity_date": 1438803598, "creation_date": 1438803598, "answer_id": 31841419, "question_id": 31834275, "link": "https://stackoverflow.com/questions/31834275/using-capybara-and-selenium-test-suite-fail-switching-from-firefox-to-chrome/31841419#31841419", "title": "Using Capybara and Selenium test suite fail switching from Firefox to Chrome", "body": "<p>Based on what you have provided, I cannot tell if Chrome actually does load faster than Firefox. However, the following may be of some help. Wherever you define your Capybara conditions, I suggest replacing them with the following:</p>\n\n<pre><code>Capybara.configure do |config|\n  config.register_driver :selenium do |app|\n    Capybara::Selenium::Driver.new(app, browser: :chrome)\n    config.default_wait_time = 5  # default is 2 seconds\n  end\n  config.javascript_driver = :selenium\n  config.default_driver= :selenium\n  config.app_host = ENV['WEB_SERVER_URL']\nend\n</code></pre>\n\n<p>Not only can you change the default wait time for Capybara to search for an element, but your code will be a little DRYer!</p>\n\n<p>You may want to test other JavaScript drivers, like <a href=\"https://github.com/thoughtbot/capybara-webkit\" rel=\"nofollow\">Capybara-Webkit</a>. If this works for Chrome, I would suggest editing the config above, so capybara-webkit is set only when using a Chrome browser.</p>\n"}, {"tags": [], "owner": {"reputation": 42014, "user_id": 2709090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/238c2b7cde2c817fc9a5a2b8eaa2ffad?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas Walpole", "link": "https://stackoverflow.com/users/2709090/thomas-walpole"}, "is_accepted": false, "score": 1, "last_activity_date": 1438823778, "creation_date": 1438823778, "answer_id": 31845279, "question_id": 31834275, "link": "https://stackoverflow.com/questions/31834275/using-capybara-and-selenium-test-suite-fail-switching-from-firefox-to-chrome/31845279#31845279", "title": "Using Capybara and Selenium test suite fail switching from Firefox to Chrome", "body": "<p>Chromedriver with Chrome 44 returns from actions much faster than before (incorrectly apparently) so visit is basically fully asynchronous. There have been numerous issues filed against Chromedriver for this such as <a href=\"https://code.google.com/p/chromedriver/issues/detail?id=1158&amp;sort=-id&amp;colspec=ID%20Status%20Pri%20Owner%20Summary\" rel=\"nofollow\">https://code.google.com/p/chromedriver/issues/detail?id=1158&amp;sort=-id&amp;colspec=ID%20Status%20Pri%20Owner%20Summary</a></p>\n\n<p>What this means for test stability is potentially needing to specify a longer wait on finds for the first element you're looking for after a visit, and checking for content that should be on the page before checking the current url (because content checks will use capybaras waiting behavior while capybara doesn't provide a waiting url matcher currently). You could also revert to Chrome 43 which will probably fix your issues</p>\n"}, {"tags": [], "owner": {"reputation": 2036, "user_id": 1066183, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/71845161952bbfcb58f4e474164453ef?s=128&d=identicon&r=PG", "display_name": "user1066183", "link": "https://stackoverflow.com/users/1066183/user1066183"}, "is_accepted": true, "score": 1, "last_activity_date": 1438940590, "last_edit_date": 1495541640, "creation_date": 1438940590, "answer_id": 31874618, "question_id": 31834275, "link": "https://stackoverflow.com/questions/31834275/using-capybara-and-selenium-test-suite-fail-switching-from-firefox-to-chrome/31874618#31874618", "title": "Using Capybara and Selenium test suite fail switching from Firefox to Chrome", "body": "<p>In accordance with the <a href=\"https://code.google.com/p/chromedriver/issues/detail?id=1158&amp;sort=-id&amp;colspec=ID%20Status%20Pri%20Owner%20Summary\" rel=\"nofollow noreferrer\">link</a> provided by <a href=\"https://stackoverflow.com/users/2709090/tom-walpole\">Tom Walpole</a> I have switch from Chrome 44 to Chromium 43. I prefer use Chromium becouse I use chrome during my working day and I want to always have the latest version.</p>\n\n<p>In my Ubuntu 14.04:</p>\n\n<pre><code>$sudo apt-get install chromium-browser\n</code></pre>\n\n<p>Then:</p>\n\n<pre><code>#spec/spec_helper.rb\nrequire 'selenium/webdriver'\n\nif ENV[\"USE_CHROME_BROWSER\"]\n  Capybara.register_driver :selenium do |app|\n    Selenium::WebDriver::Chrome.path = ENV[\"CHROME_PATH\"] if ENV[\"CHROME_PATH\"]\n    Capybara::Selenium::Driver.new app, browser: :chrome\n  end\nend\n\nCapybara.default_driver = Capybara.javascript_driver = :selenium\nCapybara.app_host = ENV['WEB_SERVER_URL']\n</code></pre>\n\n<p>With this configuration I can easily switch from Firefox (default) to Chromium.</p>\n\n<p>I use <a href=\"https://github.com/bkeepers/dotenv\" rel=\"nofollow noreferrer\">dotenv</a> gem to manage the configurations:</p>\n\n<pre><code>#./.env\n...\nUSE_CHROME_BROWSER = true\nCHROME_PATH = \"/usr/bin/chromium-browser\"\n...\n</code></pre>\n"}], "owner": {"reputation": 2036, "user_id": 1066183, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/71845161952bbfcb58f4e474164453ef?s=128&d=identicon&r=PG", "display_name": "user1066183", "link": "https://stackoverflow.com/users/1066183/user1066183"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 626, "favorite_count": 1, "accepted_answer_id": 31874618, "answer_count": 3, "score": 1, "last_activity_date": 1438940590, "creation_date": 1438782063, "last_edit_date": 1438808199, "question_id": 31834275, "link": "https://stackoverflow.com/questions/31834275/using-capybara-and-selenium-test-suite-fail-switching-from-firefox-to-chrome", "title": "Using Capybara and Selenium test suite fail switching from Firefox to Chrome", "body": "<p>Using capybara (2.4.4) to test a <strong>non</strong> Rails application. I have write some tests, I run the tests using selenium with default firefox web browser and all tests are green. </p>\n\n<p>Today I have tried to run same tests against chrome with this configuration:</p>\n\n<pre><code>Capybara.register_driver :selenium do |app|\n  Capybara::Selenium::Driver.new(app, :browser =&gt; :chrome)\nend\n\nCapybara.javascript_driver = :selenium\nCapybara.default_driver= :selenium\nCapybara.app_host = ENV['WEB_SERVER_URL']\n</code></pre>\n\n<p>When I start the tests they fail becouse Chrome it seems too quick, infact with Firefox to complete the form it took several seconds, instead with Chrome is very very quick but then the tests fails with random errors: </p>\n\n<ol>\n<li>\"email\" field not found (??)</li>\n<li>current_url is not the expected url (?? in the browser I see the correct url!! )</li>\n<li>ect ect..</li>\n</ol>\n\n<p>Errors in my opinion have no sense and is very strange because with Firefox all tests are green. </p>\n\n<p>Have you ever noticed this problem?</p>\n"}, {"tags": ["ruby", "ruby-1.9.3"], "comments": [{"owner": {"reputation": 8397, "user_id": 62002, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/16542722e64db1a1dcb9073802bbdd4d?s=128&d=identicon&r=PG&f=1", "display_name": "matt", "link": "https://stackoverflow.com/users/62002/matt"}, "edited": false, "score": 0, "creation_date": 1438782330, "post_id": 31834272, "comment_id": 51590565, "body": "It&#39;s impossible to know what&#39;s happening without the actual <code>Playback.xml</code> file - what&#39;s the smallest possible file that will reproduce the error?  Can you find some way to either attach it here, or post it somewhere?"}, {"owner": {"reputation": 1644, "user_id": 3090249, "user_type": "registered", "accept_rate": 43, "profile_image": "https://graph.facebook.com/1589107501/picture?type=large", "display_name": "gilmishal", "link": "https://stackoverflow.com/users/3090249/gilmishal"}, "reply_to_user": {"reputation": 8397, "user_id": 62002, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/16542722e64db1a1dcb9073802bbdd4d?s=128&d=identicon&r=PG&f=1", "display_name": "matt", "link": "https://stackoverflow.com/users/62002/matt"}, "edited": false, "score": 0, "creation_date": 1438782642, "post_id": 31834272, "comment_id": 51590802, "body": "It&#39;s a 900 MB file of text containing a lot of XMLs where Bla is root and between each Bla node there is garbage. The script is meant to break it into smaller files."}, {"owner": {"reputation": 1644, "user_id": 3090249, "user_type": "registered", "accept_rate": 43, "profile_image": "https://graph.facebook.com/1589107501/picture?type=large", "display_name": "gilmishal", "link": "https://stackoverflow.com/users/3090249/gilmishal"}, "reply_to_user": {"reputation": 8397, "user_id": 62002, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/16542722e64db1a1dcb9073802bbdd4d?s=128&d=identicon&r=PG&f=1", "display_name": "matt", "link": "https://stackoverflow.com/users/62002/matt"}, "edited": false, "score": 0, "creation_date": 1438782856, "post_id": 31834272, "comment_id": 51590961, "body": "There is no way of copying it -"}, {"owner": {"reputation": 4127, "user_id": 4231385, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d89a541a4609cafea3957e4cdfcca50f?s=128&d=identicon&r=PG&f=1", "display_name": "cremno", "link": "https://stackoverflow.com/users/4231385/cremno"}, "edited": false, "score": 0, "creation_date": 1438782962, "post_id": 31834272, "comment_id": 51591046, "body": "Are you sure the culprit is <code>IO.read</code> or is it possible that the error is somewhere else? What&#39;s the reason for <code>.encode(&quot;utf-8&quot;, replace: nil)</code>? <code>replace:nil</code> is the default."}], "answers": [{"tags": [], "owner": {"reputation": 1644, "user_id": 3090249, "user_type": "registered", "accept_rate": 43, "profile_image": "https://graph.facebook.com/1589107501/picture?type=large", "display_name": "gilmishal", "link": "https://stackoverflow.com/users/3090249/gilmishal"}, "is_accepted": false, "score": 0, "last_activity_date": 1438876507, "last_edit_date": 1495540282, "creation_date": 1438876507, "answer_id": 31860412, "question_id": 31834272, "link": "https://stackoverflow.com/questions/31834272/io-read-not-reading-entire-file/31860412#31860412", "title": "IO read not reading entire file", "body": "<p>The problem is <code>IO.read</code> is creating a buffer on default - and loading only part of the file to cache - In the end I used the following to answer my question </p>\n\n<p><a href=\"https://stackoverflow.com/questions/13910199/regexp-search-through-a-very-large-file\">Regexp search through a very large file</a></p>\n\n<p>the reason is because File.read is not creating a buffer on default - which when using a too big a file can cause the program to crush.</p>\n"}], "owner": {"reputation": 1644, "user_id": 3090249, "user_type": "registered", "accept_rate": 43, "profile_image": "https://graph.facebook.com/1589107501/picture?type=large", "display_name": "gilmishal", "link": "https://stackoverflow.com/users/3090249/gilmishal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 61, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1438876507, "creation_date": 1438782060, "last_edit_date": 1438782444, "question_id": 31834272, "link": "https://stackoverflow.com/questions/31834272/io-read-not-reading-entire-file", "title": "IO read not reading entire file", "body": "<p>I have a very large text  file, 958 MBAnd I have created the following script   </p>\n\n<pre><code>f = IO.read (\"Playback.xml\").encode (\"utf-8\", replace: nil)    \nseparate_files_array = f.scan /strong text&lt;Bla&gt;.*?&lt;\\/Bla&gt;/\ncounter=0\nseparate_files_array.each do |x|\n    .\n    .\n    .\nend\n</code></pre>\n\n<p>The following code only iterates over the first 31 occurences of that regex - and I have no idea why.</p>\n\n<p>No, there is no way these are all the occurrences, I could see its not, and the script runs for a few seconds - this makes no sense for a file that size</p>\n"}, {"tags": ["ruby", "selenium", "selenium-webdriver", "selenium-chromedriver"], "comments": [{"owner": {"reputation": 1201, "user_id": 2642226, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/e9d5fa09e256c4f848594193348bd502?s=128&d=identicon&r=PG", "display_name": "Andrio", "link": "https://stackoverflow.com/users/2642226/andrio"}, "edited": false, "score": 0, "creation_date": 1438804166, "post_id": 31833922, "comment_id": 51604620, "body": "You might be able to crop the image. I&#39;m not sure how you would get the scroll position, but you can use WebDriver to get the height of the current window and crop the image to that height."}], "answers": [{"comments": [{"owner": {"reputation": 93, "user_id": 3012854, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/85y04.jpg?s=128&g=1", "display_name": "Matt Bearman", "link": "https://stackoverflow.com/users/3012854/matt-bearman"}, "edited": false, "score": 0, "creation_date": 1438935199, "post_id": 31840790, "comment_id": 51663553, "body": "Thanks for the detailed response, I saw IE scroll to the top when taking a screenshot, so though it was stitching multiple shots together, but what you say about resizing the window makes more sense.  I find it frustrating that there are competing definitions of &quot;a screenshot&quot;. It seems obvious to me that there should be an option to take a shot of either the full canvas or just the viewport, as different use cases will require both."}, {"owner": {"reputation": 506, "user_id": 1914380, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/942042d1257d3eb8924a953d004089fe?s=128&d=identicon&r=PG", "display_name": "AlexD", "link": "https://stackoverflow.com/users/1914380/alexd"}, "edited": false, "score": 0, "creation_date": 1506010121, "post_id": 31840790, "comment_id": 79657417, "body": "Using Chrome, this &quot;splains&quot; why I&#39;m pulling my hair out when I zoom in my page and the object I need to take the pic from slides out of view. Thanks .but your post is from 2015, we are in 2017, do you see any light at the end of the tunnel for the resolution of this ?"}], "tags": [], "owner": {"reputation": 25741, "user_id": 374693, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/03c70489237ec9fc2e571af68b2dcaae?s=128&d=identicon&r=PG", "display_name": "JimEvans", "link": "https://stackoverflow.com/users/374693/jimevans"}, "is_accepted": true, "score": 5, "last_activity_date": 1438801446, "creation_date": 1438801446, "answer_id": 31840790, "question_id": 31833922, "link": "https://stackoverflow.com/questions/31833922/selenium-webdriver-take-screenshot-of-viewport-only/31840790#31840790", "title": "Selenium Webdriver take screenshot of viewport only", "body": "<p>There are two competing definitions of \"screenshot\" when dealing with WebDriver. The first is the definition used by the open-source project, where a screenshot is defined to be an image of the entire DOM of the loaded page. In this case, both the IE driver and the Firefox driver are doing the correct thing as defined by the project since 2010. The Chrome implementation of WebDriver is incorrect in returning an image of only the visible view port.</p>\n\n<p>The <a href=\"https://w3c.github.io/webdriver/webdriver-spec.html\" rel=\"noreferrer\">W3C WebDriver specification</a>, on the other hand, defines screenshots to be of the current view port only. This is at odds with the current open-source project's driver implementations (IE and Firefox), and can be expected to change in the future. Once the specification has attained \"Candidate Recommendation\" status, those drivers are likely to be updated.</p>\n\n<p>As an aside, it should be noted that the IE driver <strong><em>in no way</em></strong> uses a \"scroll-and-stitch\" method to create its screenshots. It <em>does</em> resize the browser window large enough to display the entire DOM, as calculated at the moment the screenshot is requested, and take an image of that. However, please note that there are issues with IE 10 and 11 in producing these full-DOM screenshots depending on the <a href=\"http://jimevansmusic.blogspot.com/2014/09/screenshots-sendkeys-and-sixty-four.html\" rel=\"noreferrer\">bit-ness of your operating system</a> and of the <code>IEDriverServer</code> executable you're using.</p>\n\n<p>At present, you'll need to use a tool external to WebDriver to obtain view-port-only screenshots for IE and Firefox.</p>\n"}, {"tags": [], "owner": {"reputation": 758, "user_id": 7395064, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/523409dfcdde44018beb5f6947ef5991?s=128&d=identicon&r=PG&f=1", "display_name": "Marlies", "link": "https://stackoverflow.com/users/7395064/marlies"}, "is_accepted": false, "score": 1, "last_activity_date": 1484298158, "last_edit_date": 1495540391, "creation_date": 1484298158, "answer_id": 41630829, "question_id": 31833922, "link": "https://stackoverflow.com/questions/31833922/selenium-webdriver-take-screenshot-of-viewport-only/41630829#41630829", "title": "Selenium Webdriver take screenshot of viewport only", "body": "<p>This is a frequently changing issue..</p>\n\n<p>AFAIK right now Chrome- and IEDriver both capture screenshots of the viewport only, while FFDriver captures a full-page screenshot (FF will change this in the future). See also <a href=\"https://stackoverflow.com/questions/41630075/how-do-i-include-screenshots-of-the-full-page-in-my-serenity-report-and-not-onl\">my answer to this question</a>.</p>\n"}], "owner": {"reputation": 93, "user_id": 3012854, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/85y04.jpg?s=128&g=1", "display_name": "Matt Bearman", "link": "https://stackoverflow.com/users/3012854/matt-bearman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1887, "favorite_count": 0, "accepted_answer_id": 31840790, "answer_count": 2, "score": 2, "last_activity_date": 1484298158, "creation_date": 1438781236, "question_id": 31833922, "link": "https://stackoverflow.com/questions/31833922/selenium-webdriver-take-screenshot-of-viewport-only", "title": "Selenium Webdriver take screenshot of viewport only", "body": "<p>I only need screenshots of the current viewport, particularly respecting the scroll position. Basically what the current Chrome driver does.</p>\n\n<p>From what I've read it seems this should be entirely possible, but for some reason the screenshot commands always strive to take a full document screenshot. In fact the IE driver takes multiple viewport shots and then stitches them together.</p>\n\n<p>I'm using the Ruby webdriver, and I can't see anyway to take a screenshot of just the viewport. Is it possible?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "angularjs", "devise"], "comments": [{"owner": {"reputation": 3467, "user_id": 906511, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/61286bced0ae2da15261439d1bb62297?s=128&d=identicon&r=PG", "display_name": "lcguida", "link": "https://stackoverflow.com/users/906511/lcguida"}, "edited": false, "score": 0, "creation_date": 1438783141, "post_id": 31833159, "comment_id": 51591191, "body": "<a href=\"https://github.com/plataformatec/devise/wiki/OmniAuth:-Overview\" rel=\"nofollow noreferrer\">github.com/plataformatec/devise/wiki/OmniAuth:-Overview</a> Here you can find some info. I don&#39;t know how this would work with angular, but basically you have to implement a callback action in which you&#39;ll have the facebook response hash, and from there you can use as needed."}, {"owner": {"reputation": 96, "user_id": 2883507, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zuBD9.jpg?s=128&g=1", "display_name": "Gustavo Guimaraes", "link": "https://stackoverflow.com/users/2883507/gustavo-guimaraes"}, "reply_to_user": {"reputation": 3467, "user_id": 906511, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/61286bced0ae2da15261439d1bb62297?s=128&d=identicon&r=PG", "display_name": "lcguida", "link": "https://stackoverflow.com/users/906511/lcguida"}, "edited": false, "score": 0, "creation_date": 1438876284, "post_id": 31833159, "comment_id": 51640165, "body": "Thanks @Icguida. On that wiki page I noticed that one is supposed to get request.env[&quot;omniauth.auth&quot;] in the controller action. The specific controller in the Devise auth token gem is <a href=\"https://github.com/lynndylanhurley/devise_token_auth/blob/master/app/controllers/devise_token_auth/omniauth_callbacks_controller.rb#L22\" rel=\"nofollow noreferrer\">DeviseTokenAuth::OmniauthCallbacksController</a> . And the action is omniauth_success.  But request.env[&quot;omniauth.auth&quot;] returns as nil."}], "answers": [{"tags": [], "owner": {"reputation": 463, "user_id": 3287456, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/wKmJw.jpg?s=128&g=1", "display_name": "Sayan", "link": "https://stackoverflow.com/users/3287456/sayan"}, "is_accepted": false, "score": 0, "last_activity_date": 1480362177, "last_edit_date": 1480362177, "creation_date": 1480361509, "answer_id": 40852046, "question_id": 31833159, "link": "https://stackoverflow.com/questions/31833159/devise-token-auth-save-facebook-info/40852046#40852046", "title": "devise token auth + Save Facebook info", "body": "<p>I don't have how to do this with Angular and Rails, but this is how I did it in my Rails app.</p>\n\n<pre><code>def show \n #controller action\n @FbInfoforFrontEnd = FbModel.from_omniauth(request.env[\"omniauth.auth\"])\nend\n</code></pre>\n\n<p>and in the FbModel model, I'd implement the mechanism to save the token and rest of the info like this</p>\n\n<pre><code>def self.from_omniauth(auth)\n #FbModel model method\n oauth = Koala::Facebook::OAuth.new(AppId, AppSecret)\n new_access_info = oauth.exchange_access_token_info auth.credentials.token\n new_access_token = new_access_info[\"access_token\"]\n new_access_expires_at = DateTime.now + new_access_info[\"expires\"].to_i.seconds\n return FbModel.where(provider: auth.provider,\n                      uid: auth.uid)\n               .first_or_create(provider: auth.provider,\n                         uid: auth.uid,\n                         name: auth.info.name)\n               .update_attributes(oauth_expires_at: new_access_expires_at,\n                                  oauth_token: new_access_token)\nend\n</code></pre>\n\n<p>I hope this answers your query</p>\n"}, {"tags": [], "owner": {"reputation": 3922, "user_id": 3399504, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/rRGvW.png?s=128&g=1", "display_name": "ErvalhouS", "link": "https://stackoverflow.com/users/3399504/ervalhous"}, "is_accepted": false, "score": 1, "last_activity_date": 1485568942, "last_edit_date": 1485568942, "creation_date": 1485568506, "answer_id": 41905633, "question_id": 31833159, "link": "https://stackoverflow.com/questions/31833159/devise-token-auth-save-facebook-info/41905633#41905633", "title": "devise token auth + Save Facebook info", "body": "<p>I use this end-point with Ionic2 app, for Facebook Login requests on Rails 5 API, using <a href=\"https://github.com/arsduo/koala\" rel=\"nofollow noreferrer\">Koala</a> and <a href=\"https://github.com/lynndylanhurley/devise_token_auth\" rel=\"nofollow noreferrer\">Devise Token Auth</a> so you should be able to replicate on any Rails 5 app:</p>\n\n<pre><code>def facebook\n  @graph = Koala::Facebook::API.new(oauth_params[:token], ENV[\"FACEBOOK_SECRET\"])\n  @profile = @graph.get_object(\"me?fields=email,first_name,last_name,picture.type(large)\")\n\n  unless @user = User.where(email: @profile[\"email\"])&amp;.first\n    @user = User.new(email: @profile[\"email\"])\n  end\n  #\n  # Here you will make your logic for saving Facebook's data on your User model,\n  # customize accordingly\n  #\n  if @user.new_record?\n    p = SecureRandom.urlsafe_base64(nil, false)\n    @user.password = p\n    @user.password_confirmation = p\n    #\n    # \"Passwordless\" login, user must set password after registering,\n    # or be forever haunted by indecipherable SecureRandom value\n    #\n    @user.name = @profile[\"first_name\"]+ \" \" + @profile[\"last_name\"]\n    @user.remote_avatar_url = @profile[\"picture\"][\"data\"][\"url\"]\n    @user.confirmed_at = Time.now\n    @user.uid = @profile[\"id\"]\n    @user.provider = 'Facebook'\n  end\n\n  @client_id = SecureRandom.urlsafe_base64(nil, false)\n  @token     = SecureRandom.urlsafe_base64(nil, false)\n  @user.tokens[@client_id] = {\n    token: BCrypt::Password.create(@token),\n    expiry: (Time.now + DeviseTokenAuth.token_lifespan).to_i\n  } \n  auth_header = @user.build_auth_header(@token, @client_id)\n  # update the response header\n  response.headers.merge!(auth_header)\n  @user.save!\n  if sign_in(:user, @user, store: false, bypass: false)\n    render json:  {\n      data: @user.token_validation_response \n    }\n  end\nend\n</code></pre>\n\n<p>Point a POST route to this and pass <code>authResponse.accessToken</code> from Facebook request as <code>params[:token]</code>.\nVoil\u00e0, authentication magic!</p>\n"}], "owner": {"reputation": 96, "user_id": 2883507, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zuBD9.jpg?s=128&g=1", "display_name": "Gustavo Guimaraes", "link": "https://stackoverflow.com/users/2883507/gustavo-guimaraes"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1237, "favorite_count": 1, "answer_count": 2, "score": 5, "last_activity_date": 1485568942, "creation_date": 1438779267, "last_edit_date": 1439205162, "question_id": 31833159, "link": "https://stackoverflow.com/questions/31833159/devise-token-auth-save-facebook-info", "title": "devise token auth + Save Facebook info", "body": "<p>I am using <a href=\"https://github.com/lynndylanhurley/devise_token_auth\" rel=\"nofollow\">Devise auth token</a> gem and ng-token auth for authenticating my single page app. Besides registering with email there is the option to sign-up via Facebook. It works. </p>\n\n<p>My problem is that as for my Fb request scope I set to get the user_friends, email and public_info, however when I get the request I don't see the auth_hash request.env['omniauth.auth']. This is described in the omniauth-facebook <a href=\"https://github.com/mkdynamic/omniauth-facebook#auth-hash\" rel=\"nofollow\"> gem documentation</a>. </p>\n\n<p>Basically I want to save what FB gives back about the user in my database. How would you do it? </p>\n"}, {"tags": ["ruby", "ruby-on-rails-3"], "answers": [{"tags": [], "owner": {"reputation": 5631, "user_id": 1589422, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c03d217df4867dfb3b3674649fa92e5b?s=128&d=identicon&r=PG", "display_name": "Robin Daugherty", "link": "https://stackoverflow.com/users/1589422/robin-daugherty"}, "is_accepted": false, "score": 0, "last_activity_date": 1581357206, "creation_date": 1581357206, "answer_id": 60155797, "question_id": 31832617, "link": "https://stackoverflow.com/questions/31832617/rails-printing-log-to-rails-console/60155797#60155797", "title": "Rails printing log to rails console", "body": "<p>Once you open the Rails console:</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>Rails.logger = Logger.new(STDOUT)\n</code></pre>\n\n<p>If you need to change the log level:</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>Rails.logger.level = Logger::DEBUG\n</code></pre>\n\n<p>This keeps the change localized to your console process, so you can see only the output from it and not from the rest of the Rails processes that might be running.</p>\n"}], "owner": {"reputation": 1276, "user_id": 1475737, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/fdf27a6f95737da08085a38047e7de16?s=128&d=identicon&r=PG", "display_name": "snow_leopard", "link": "https://stackoverflow.com/users/1475737/snow-leopard"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1190, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1581357206, "creation_date": 1438777896, "question_id": 31832617, "link": "https://stackoverflow.com/questions/31832617/rails-printing-log-to-rails-console", "title": "Rails printing log to rails console", "body": "<p><br/>\nI want to get the output of Rail.logger.info in the console while running code through rails console. By default I don't see it printing it. Is there any configuration that I need to change ?<BR/>\nThanks</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "activerecord", "orm"], "answers": [{"comments": [{"owner": {"reputation": 541, "user_id": 2978882, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/a10d94307331f18881be9b85f9a02c77?s=128&d=identicon&r=PG&f=1", "display_name": "gazubi", "link": "https://stackoverflow.com/users/2978882/gazubi"}, "edited": false, "score": 0, "creation_date": 1438778705, "post_id": 31832815, "comment_id": 51587697, "body": "i made edits and am using User. i still get the same error"}, {"owner": {"reputation": 3272, "user_id": 2389628, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/A4nuI.jpg?s=128&g=1", "display_name": "smallbutton", "link": "https://stackoverflow.com/users/2389628/smallbutton"}, "reply_to_user": {"reputation": 541, "user_id": 2978882, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/a10d94307331f18881be9b85f9a02c77?s=128&d=identicon&r=PG&f=1", "display_name": "gazubi", "link": "https://stackoverflow.com/users/2978882/gazubi"}, "edited": false, "score": 0, "creation_date": 1438778941, "post_id": 31832815, "comment_id": 51587873, "body": "You are also using the plural version in your belongs_to (<code>:orders</code>,<code>:delivery_times</code>) Those need to be singular. Can you post the relevant contents of all three models ?"}], "tags": [], "owner": {"reputation": 3272, "user_id": 2389628, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/A4nuI.jpg?s=128&g=1", "display_name": "smallbutton", "link": "https://stackoverflow.com/users/2389628/smallbutton"}, "is_accepted": false, "score": 0, "last_activity_date": 1438778368, "creation_date": 1438778368, "answer_id": 31832815, "question_id": 31832461, "link": "https://stackoverflow.com/questions/31832461/rails-active-record-query-with-multiple-associations/31832815#31832815", "title": "Rails active record query with multiple associations", "body": "<p>You will need a join for this kind of query, since you need the joint knowledge of the <code>delivery_times</code> table and the <code>users</code> table. </p>\n\n<p>What <code>includes</code> actually does is it decides between <code>preload</code> and <code>eager_load</code> automatically and tries to always take the better one. In you case it will do an <code>eager_load</code>; have a look into this <a href=\"http://blog.bigbinary.com/2013/07/01/preload-vs-eager-load-vs-joins-vs-includes.html\" rel=\"nofollow\">article</a>. </p>\n\n<p>For the error you get, I guess it yould result from starting with <code>Users</code> and not <code>User</code>:</p>\n\n<pre><code>User.includes(order: :delivery_time).where(\"delivery_times.start &lt; ?\",Time.now)\n</code></pre>\n\n<p>Everything else seems correct to me.</p>\n"}, {"tags": [], "owner": {"reputation": 1422, "user_id": 956867, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/949376c3e1300e12a5e1fbfb3056ce29?s=128&d=identicon&r=PG", "display_name": "Loqman", "link": "https://stackoverflow.com/users/956867/loqman"}, "is_accepted": false, "score": 0, "last_activity_date": 1438782142, "creation_date": 1438782142, "answer_id": 31834312, "question_id": 31832461, "link": "https://stackoverflow.com/questions/31832461/rails-active-record-query-with-multiple-associations/31834312#31834312", "title": "Rails active record query with multiple associations", "body": "<p>The better definition of relations between your models would be this:</p>\n\n<p><a href=\"https://i.stack.imgur.com/yKbXo.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/yKbXo.png\" alt=\"Relationships between models\"></a></p>\n\n<p>So your classes would look like this:</p>\n\n<pre><code>class User &lt; ActiveRecord::Base\n  has_many :orders\nend\n\n\nclass Order &lt; ActiveRecord::Base\n  belongs_to :user\n  has_one :delivery_time\nend\n\nclass DeliveryTime &lt; ActiveRecord::Base\n  belongs_to :order\nend\n</code></pre>\n\n<p>The query you are making doesn't make any sense? What is the result that you are expecting?</p>\n\n<p>If you want to get order that their delivery time is a specific time you can use scopes:</p>\n\n<pre><code>class Order &lt; ActiveRecord::Base\n  belongs_to :user\n  has_one :delivery_time\n\n  scope :ready_to_deliver, includes(:delivery_time).where(\"delivery_time.start &lt; ? \", Time.now)\nend\n</code></pre>\n\n<p>Then you can get orders that are ready to deliver like this:</p>\n\n<pre><code>ready_orders = Order.ready_to_deliver\n</code></pre>\n"}], "owner": {"reputation": 541, "user_id": 2978882, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/a10d94307331f18881be9b85f9a02c77?s=128&d=identicon&r=PG&f=1", "display_name": "gazubi", "link": "https://stackoverflow.com/users/2978882/gazubi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 904, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1438782142, "creation_date": 1438777497, "last_edit_date": 1438781449, "question_id": 31832461, "link": "https://stackoverflow.com/questions/31832461/rails-active-record-query-with-multiple-associations", "title": "Rails active record query with multiple associations", "body": "<p>I have tables called <code>users</code>, <code>orders</code>, and <code>delivery_times</code> that are linked using the following relationship.</p>\n\n<p>For table <code>User</code>:</p>\n\n<pre><code>belongs_to :orders\n</code></pre>\n\n<p>For table <code>orders</code>:</p>\n\n<pre><code>belongs_to :delivery_times\n</code></pre>\n\n<p>I want to write a query on table users using a condition on table delivery_times as shown:</p>\n\n<pre><code>User.includes(order: :delivery_time).where(\"delivery_times.start &lt; ?\",Time.now)\n</code></pre>\n\n<blockquote>\n  <p>PG::UndefinedTable: ERROR:  missing FROM-clause entry for table \"delivery_times\"</p>\n</blockquote>\n\n<p>However I get an error. Can I use the RoR ORM to make this query work using includes, even though I know there is a solution using joins?</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 1184, "user_id": 1269041, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0f4555652545040e404bd072400c810c?s=128&d=identicon&r=PG", "display_name": "konart", "link": "https://stackoverflow.com/users/1269041/konart"}, "edited": false, "score": 4, "creation_date": 1438777178, "post_id": 31832137, "comment_id": 51586587, "body": "Tested your code and I get the same result for both <code>\\r\\n</code> and <code>.</code>. The method does not remove the separator from the string, if that is what confuses you."}], "answers": [{"tags": [], "owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "is_accepted": true, "score": 2, "last_activity_date": 1438783280, "last_edit_date": 1438783280, "creation_date": 1438780471, "answer_id": 31833632, "question_id": 31832137, "link": "https://stackoverflow.com/questions/31832137/using-ruby-stringios-gets-method/31833632#31833632", "title": "Using Ruby StringIO&#39;s gets method", "body": "<p>To see what's actually going on, let's replace <code>print</code> with a more explicit output:</p>\n\n<pre><code>require 'stringio'\n\ndef parse(chunked_data, separator)\n  data = \"\"\n  until chunked_data.eof?\n    if chunk_head = chunked_data.gets(separator)\n      puts \"chunk_head: #{chunk_head.inspect}\"\n      if chunk = chunked_data.read(chunk_head.to_i)\n        puts \"     chunk: #{chunk.inspect}\"\n        data &lt;&lt; chunk\n      end\n    end\n  end\n  data\nend\n\nresult = parse(StringIO.new(\"7\\r\\nHello, \\r\\n6\\r\\nworld!\\r\\n0\\r\\n\"), \"\\r\\n\")\nputs \"    result: #{result.inspect}\"\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>chunk_head: \"7\\r\\n\"\n     chunk: \"Hello, \"\nchunk_head: \"\\r\\n\"\n     chunk: \"\"\nchunk_head: \"6\\r\\n\"\n     chunk: \"world!\"\nchunk_head: \"\\r\\n\"\n     chunk: \"\"\nchunk_head: \"0\\r\\n\"\n     chunk: \"\"\n</code></pre>\n\n<p>Now with a <code>.</code>:</p>\n\n<pre><code>result = parse(StringIO.new(\"7.Hello, .6.world!.0.\"), \".\")\nputs \"    result: #{result.inspect}\"\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>chunk_head: \"7.\"\n     chunk: \"Hello, \"\nchunk_head: \".\"\n     chunk: \"\"\nchunk_head: \"6.\"\n     chunk: \"world!\"\nchunk_head: \".\"\n     chunk: \"\"\nchunk_head: \"0.\"\n     chunk: \"\"\n    result: \"Hello, world!\"\n</code></pre>\n\n<p>As you can see, it works either way and the result is identical.</p>\n\n<p>Although the result is correct, there seems to be a bug in your code: you don't read the separator after <code>chunk</code>. This can be fixed by adding a <code>chunked_data.gets(separator)</code> or <code>chunked_data.read(separator.bytesize)</code>\nafter the <code>if/end</code> block:</p>\n\n<pre><code>def parse(chunked_data, separator)\n  data = \"\"\n  until chunked_data.eof?\n    if chunk_head = chunked_data.gets(separator)\n      puts \"chunk_head: #{chunk_head.inspect}\"\n      if chunk = chunked_data.read(chunk_head.to_i)\n        puts \"     chunk: #{chunk.inspect}\"\n        data &lt;&lt; chunk\n      end\n      chunked_data.read(separator.bytesize)\n    end\n  end\n  data\nend\n\nresult = parse(StringIO.new(\"7.Hello, .6.world!.0.\"), \".\")\nputs \"    result: #{result.inspect}\"\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>chunk_head: \"7.\"\n     chunk: \"Hello, \"\nchunk_head: \"6.\"\n     chunk: \"world!\"\nchunk_head: \"0.\"\n     chunk: \"\"\n    result: \"Hello, world!\"\n</code></pre>\n\n<p>That looks better.</p>\n"}], "owner": {"reputation": 558, "user_id": 1354989, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/6001ea13de4ede7192c0ebed057d1df4?s=128&d=identicon&r=PG", "display_name": "Zack Gao", "link": "https://stackoverflow.com/users/1354989/zack-gao"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 134, "favorite_count": 0, "accepted_answer_id": 31833632, "answer_count": 1, "score": 2, "last_activity_date": 1438783280, "creation_date": 1438776615, "last_edit_date": 1438778300, "question_id": 31832137, "link": "https://stackoverflow.com/questions/31832137/using-ruby-stringios-gets-method", "title": "Using Ruby StringIO&#39;s gets method", "body": "<p>If I run the following code:</p>\n\n<pre><code>require 'stringio'\nchunked_data = StringIO.new(\"7\\r\\nHello, \\r\\n6\\r\\nworld!\\r\\n0\\r\\n\")\ndata = \"\"\nuntil chunked_data.eof?\n  if chunk_head = chunked_data.gets(\"\\r\\n\")\n    print chunk_head\n    if chunk = chunked_data.read(chunk_head.to_i)\n      print chunk\n      data &lt;&lt; chunk\n    end\n  end\nend\n</code></pre>\n\n<p>I get this output:</p>\n\n<pre><code>7\nHello, \n6\nworld!\n0\n</code></pre>\n\n<p><a href=\"http://ruby-doc.org/core-2.2.2/IO.html#method-i-gets\" rel=\"nofollow\">According to the docs</a>, the <code>gets</code> method takes a separator and returns the next line based on that separator. If I replace the <code>\\r\\n</code> in the string and separator with <code>.</code>, then the separator functionality seems to no longer work and I get this:</p>\n\n<pre><code>7.Hello, .6.world!.0.\n</code></pre>\n\n<p>What's going on?</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1438775942, "post_id": 31831828, "comment_id": 51585728, "body": "Not sure what <code>B</code> is doing."}, {"owner": {"reputation": 33085, "user_id": 2423164, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Nxbnp.jpg?s=128&g=1", "display_name": "ndnenkov", "link": "https://stackoverflow.com/users/2423164/ndnenkov"}, "edited": false, "score": 0, "creation_date": 1438776443, "post_id": 31831828, "comment_id": 51586077, "body": "If it was the case that <code>A.new.class</code> was returning something your question would make sense. <code>class A &lt; BasicObject</code> means <code>A</code> inherits from <code>BasicObject</code>, not <code>A</code> is an instance of <code>BasicObject</code>. <code>A</code> is still an instance of <code>Class</code> and therefore of <code>Object</code>."}, {"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 2, "creation_date": 1438776524, "post_id": 31831828, "comment_id": 51586136, "body": "Don&#39;t add new questions to the same thread. If you have additional questions, make a new post."}, {"owner": {"reputation": 33085, "user_id": 2423164, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Nxbnp.jpg?s=128&g=1", "display_name": "ndnenkov", "link": "https://stackoverflow.com/users/2423164/ndnenkov"}, "edited": false, "score": 3, "creation_date": 1438777098, "post_id": 31831828, "comment_id": 51586532, "body": "You have to differentiate between inheritance and instantiation. <code>A.ancestors</code> will give you the names of the classes and modules where methods will be looked if you try to access them on <b>instances</b> of class <code>A</code>. If you want to see the ancestor chain for where methods will be looked if you want to call them on <code>A</code> directly, you have to do <code>A.class.ancestors</code>."}, {"owner": {"reputation": 5017, "user_id": 2047418, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1d49bccfa9d2c633db6f854e67b88362?s=128&d=identicon&r=PG", "display_name": "Filip Bartuzi", "link": "https://stackoverflow.com/users/2047418/filip-bartuzi"}, "reply_to_user": {"reputation": 33085, "user_id": 2423164, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Nxbnp.jpg?s=128&g=1", "display_name": "ndnenkov", "link": "https://stackoverflow.com/users/2423164/ndnenkov"}, "edited": false, "score": 0, "creation_date": 1438777264, "post_id": 31831828, "comment_id": 51586654, "body": "@ndn good point, thanks"}], "answers": [{"tags": [], "owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "is_accepted": false, "score": 3, "last_activity_date": 1438776384, "last_edit_date": 1438776384, "creation_date": 1438776083, "answer_id": 31831936, "question_id": 31831828, "link": "https://stackoverflow.com/questions/31831828/why-does-basicobject-answer-methods-superclass-and-class/31831936#31831936", "title": "Why does `BasicObject` answer methods `superclass` and `class`?", "body": "<p>It is because <code>A</code> (as well as <code>BasicObject</code>) is an instance of the <code>Class</code> class, on which <code>superclass</code> is defined, and <code>Class</code> is a subclass of <code>Object</code>, which includes <code>Kernel</code>, on which <code>class</code> is defined.</p>\n\n<pre><code>BasicObject.method(:superclass).owner # =&gt; Class\nBasicObject.method(:class).owner # =&gt; Kernel\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 5017, "user_id": 2047418, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1d49bccfa9d2c633db6f854e67b88362?s=128&d=identicon&r=PG", "display_name": "Filip Bartuzi", "link": "https://stackoverflow.com/users/2047418/filip-bartuzi"}, "edited": false, "score": 0, "creation_date": 1438776474, "post_id": 31831956, "comment_id": 51586098, "body": "Kernel is included inside Class class. BasicObject doesn&#39;t have anything from Kernel, right? See update"}], "tags": [], "owner": {"reputation": 9917, "user_id": 1586221, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/96ab4c67eb62b315a8e7584f7dfd547a?s=128&d=identicon&r=PG", "display_name": "tompave", "link": "https://stackoverflow.com/users/1586221/tompave"}, "is_accepted": false, "score": 0, "last_activity_date": 1438776138, "creation_date": 1438776138, "answer_id": 31831956, "question_id": 31831828, "link": "https://stackoverflow.com/questions/31831828/why-does-basicobject-answer-methods-superclass-and-class/31831956#31831956", "title": "Why does `BasicObject` answer methods `superclass` and `class`?", "body": "<p>Your assumptions are not correct.</p>\n\n<p><code>#class</code> is defined as an instance method of <code>Kernel</code>:</p>\n\n<pre><code>From: object.c (C Method):\nOwner: Kernel\nVisibility: public\nNumber of lines: 5\n\nVALUE\nrb_obj_class(VALUE obj)\n{\n    return rb_class_real(CLASS_OF(obj));\n}\n</code></pre>\n\n<p>and <code>superclass</code> is defined as an instance method of <code>Class</code>:  </p>\n\n<pre><code>From: object.c (C Method):\nOwner: Class\nVisibility: public\nNumber of lines: 17\n\nVALUE\nrb_class_superclass(VALUE klass)\n{\n    VALUE super = RCLASS_SUPER(klass);\n\n    if (!super) {\n    if (klass == rb_cBasicObject) return Qnil;\n    rb_raise(rb_eTypeError, \"uninitialized class\");\n    }\n    while (RB_TYPE_P(super, T_ICLASS)) {\n    super = RCLASS_SUPER(super);\n    }\n    if (!super) {\n    return Qnil;\n    }\n    return super;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 110733, "user_id": 1009479, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/wlrC5.jpg?s=128&g=1", "display_name": "Yu Hao", "link": "https://stackoverflow.com/users/1009479/yu-hao"}, "is_accepted": true, "score": 2, "last_activity_date": 1438776223, "creation_date": 1438776223, "answer_id": 31831991, "question_id": 31831828, "link": "https://stackoverflow.com/questions/31831828/why-does-basicobject-answer-methods-superclass-and-class/31831991#31831991", "title": "Why does `BasicObject` answer methods `superclass` and `class`?", "body": "<pre><code>class A &lt; BasicObject\nend\n</code></pre>\n\n<p>Here, the <strong>class</strong> <code>A</code> is itself an instance of the class <a href=\"http://ruby-doc.org/core-2.2.2/Class.html\" rel=\"nofollow\"><code>Class</code></a>.</p>\n\n<pre><code>A.class\n#=&gt; Class\n</code></pre>\n\n<p><code>A</code> answers to <code>.class</code> and <code>.superclass</code> because <code>Class</code> supports them.</p>\n\n<p>What you are thinking is an <strong>instance</strong> of <code>A</code>, in that case:</p>\n\n<pre><code>A.new\n(Object doesn't support #inspect)\n=&gt;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 7994, "user_id": 1625339, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/b8ba46f911517c8b2ccc39e0be9050c0?s=128&d=identicon&r=PG", "display_name": "Aetherus", "link": "https://stackoverflow.com/users/1625339/aetherus"}, "is_accepted": false, "score": 0, "last_activity_date": 1438782712, "creation_date": 1438782712, "answer_id": 31834518, "question_id": 31831828, "link": "https://stackoverflow.com/questions/31831828/why-does-basicobject-answer-methods-superclass-and-class/31834518#31834518", "title": "Why does `BasicObject` answer methods `superclass` and `class`?", "body": "<p><code>BasicObject</code> has a minimal set of <strong>instance methods</strong>, but it has as many common <strong>class methods</strong> (instance methods of <code>Class</code> class) as other classes, that's why you can call <code>BasicObject.class</code>. Also remember that <code>BasicObject</code> itself is an <code>Object</code>, and all instances of <code>Object</code> have the method <code>class</code>, so does <code>BasicObject</code>.</p>\n"}], "owner": {"reputation": 5017, "user_id": 2047418, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1d49bccfa9d2c633db6f854e67b88362?s=128&d=identicon&r=PG", "display_name": "Filip Bartuzi", "link": "https://stackoverflow.com/users/2047418/filip-bartuzi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 136, "favorite_count": 0, "accepted_answer_id": 31831991, "answer_count": 4, "score": 4, "last_activity_date": 1438782712, "creation_date": 1438775749, "last_edit_date": 1438777449, "question_id": 31831828, "link": "https://stackoverflow.com/questions/31831828/why-does-basicobject-answer-methods-superclass-and-class", "title": "Why does `BasicObject` answer methods `superclass` and `class`?", "body": "<p>If <code>Object &lt; BasicObject</code>, and <code>#superclass</code> and <code>#class</code> are defined in <code>Object</code>, how it possible that <code>class A &lt; BasicObject</code> answers to <code>A.superclass</code> and <code>A.class</code>? <code>A.ancestors</code>: <code>[A, BasicObject]</code></p>\n\n<p>Going further (according to new answers):</p>\n\n<p>If <code>A</code> is an instance of <code>Object</code> why doesn't it have it in its ancestors?</p>\n\n<pre><code>Class B;end\nB.ancestors # =&gt; [B, Object, Kernel, BasicObject]\n</code></pre>\n\n<p><code>SuperClass</code> might be defined in <code>Kernel</code>, but <code>A</code> doesn't have <code>Kernel</code> in its ancestors. </p>\n\n<p><code>Kernel</code> is included in <code>Object</code> (from <a href=\"http://api.rubyonrails.org/classes/Object.html\" rel=\"nofollow\"><code>object.rb</code></a>):</p>\n\n<pre><code>class Object &lt; BasicObject\n  include Kernel\nend\n</code></pre>\n\n<p><strong>P.S</strong> This <a href=\"https://github.com/jnunemaker/httparty/issues/426\" rel=\"nofollow\">git issue</a> confused me enough to ask about it</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ssl", "cas", "rubycas-client"], "owner": {"reputation": 222, "user_id": 2858781, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8wlrz.png?s=128&g=1", "display_name": "thiyaram", "link": "https://stackoverflow.com/users/2858781/thiyaram"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 21, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1438786856, "creation_date": 1438775119, "last_edit_date": 1438786856, "question_id": 31831602, "link": "https://stackoverflow.com/questions/31831602/rubycas-client-using-https-not-receiving-the-casserver-logoutrequest", "title": "RubyCas client using https not receiving the CasServer &#39;LogoutRequest&#39;", "body": "<p>RubyCas client using https is not receiving the CasServer 'LogoutRequest'</p>\n\n<p>I used 'rubyCas-client' gem. It's working fine in http (with cluster servers also), but when I am trying to use 'HTTPS' (using ssl certificate), my application server itself is not receiving the CasServer session 'LogoutRequest'. It's still maintaining the session.</p>\n\n<p>Why is this happening?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4", "devise", "rendering"], "comments": [{"owner": {"reputation": 3002, "user_id": 976498, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CSZVp.jpg?s=128&g=1", "display_name": "LHH", "link": "https://stackoverflow.com/users/976498/lhh"}, "edited": false, "score": 0, "creation_date": 1438773703, "post_id": 31830991, "comment_id": 51584221, "body": "similar question asked here, please check <a href=\"http://stackoverflow.com/questions/27953848/devise-rendering-default-views-from-gem-instead-of-generated-ones\" title=\"devise rendering default views from gem instead of generated ones\">stackoverflow.com/questions/27953848/&hellip;</a>"}], "answers": [{"comments": [{"owner": {"reputation": 4101, "user_id": 1482055, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/f4D9p.jpg?s=128&g=1", "display_name": "Milind", "link": "https://stackoverflow.com/users/1482055/milind"}, "reply_to_user": {"reputation": 37, "user_id": 4980380, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/c75b13c03f8267383cb8eca7b977cc41?s=128&d=identicon&r=PG&f=1", "display_name": "Jeremy Ong", "link": "https://stackoverflow.com/users/4980380/jeremy-ong"}, "edited": false, "score": 0, "creation_date": 1438809860, "post_id": 31831393, "comment_id": 51607693, "body": "@JeremyOng,glad it helped."}], "tags": [], "owner": {"reputation": 4101, "user_id": 1482055, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/f4D9p.jpg?s=128&g=1", "display_name": "Milind", "link": "https://stackoverflow.com/users/1482055/milind"}, "is_accepted": true, "score": 3, "last_activity_date": 1438774531, "creation_date": 1438774531, "answer_id": 31831393, "question_id": 31830991, "link": "https://stackoverflow.com/questions/31830991/render-custom-views-instead-of-default-devise-views-rails/31831393#31831393", "title": "Render Custom views instead of default Devise views- Rails", "body": "<p><strong>Overriding</strong> the default <code>Devise\u2019s views</code> is simple and straight forward, what we need to do is just generate those views in our <code>app/views</code> folder by the following single command.</p>\n\n<pre><code>rails g devise:views\n</code></pre>\n\n<p>The following <code>views</code> are generated.</p>\n\n<pre><code>app/views/devise/confirmations\napp/views/devise/mailer\napp/views/devise/passwords\napp/views/devise/registrations\napp/views/devise/sessions\napp/views/devise/shared\napp/views/devise/unlocks\n</code></pre>\n\n<p>No other changes are necessary.\n<strong>Or</strong> if you have already done it,you need to move folders inside <code>app/views/devise</code></p>\n"}, {"tags": [], "owner": {"reputation": 682, "user_id": 626048, "user_type": "registered", "profile_image": "https://graph.facebook.com/860325303/picture?type=large", "display_name": "Obie", "link": "https://stackoverflow.com/users/626048/obie"}, "is_accepted": false, "score": 0, "last_activity_date": 1496167876, "creation_date": 1496167876, "answer_id": 44269123, "question_id": 31830991, "link": "https://stackoverflow.com/questions/31830991/render-custom-views-instead-of-default-devise-views-rails/44269123#44269123", "title": "Render Custom views instead of default Devise views- Rails", "body": "<p>If you're using Haml, then the following terminal invocation is useful as a second step after generating views:</p>\n\n<pre><code>$ gem install html2haml\n\n$ for file in app/views/devise/**/*.erb; do html2haml -e $file ${file%erb}haml &amp;&amp; rm $file; done\n</code></pre>\n"}], "owner": {"reputation": 37, "user_id": 4980380, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/c75b13c03f8267383cb8eca7b977cc41?s=128&d=identicon&r=PG&f=1", "display_name": "Jeremy Ong", "link": "https://stackoverflow.com/users/4980380/jeremy-ong"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3741, "favorite_count": 0, "accepted_answer_id": 31831393, "answer_count": 2, "score": 2, "last_activity_date": 1496167876, "creation_date": 1438773448, "last_edit_date": 1438809941, "question_id": 31830991, "link": "https://stackoverflow.com/questions/31830991/render-custom-views-instead-of-default-devise-views-rails", "title": "Render Custom views instead of default Devise views- Rails", "body": "<p>I have changed the views generated by the Devise gem but Rails keeps rendering the file from Devise's gem file path.</p>\n\n<p>Rendered /Users/Jeremy/.rbenv/versions/2.2.2/lib/ruby/gems/2.2.0/gems/devise-3.5.1/app/views/devise/shared/_links.html.erb</p>\n\n<p>P/S - I've already changed config.scoped_views to true</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 32131, "user_id": 2346461, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/i3xAf.jpg?s=128&g=1", "display_name": "Pavan", "link": "https://stackoverflow.com/users/2346461/pavan"}, "edited": false, "score": 1, "creation_date": 1438773482, "post_id": 31830939, "comment_id": 51584077, "body": "Why not use <a href=\"http://apidock.com/rails/ActionView/Helpers/DateHelper/time_ago_in_words\" rel=\"nofollow noreferrer\"><b><i><code>time_ago_in_words</code></i></b></a> ?"}, {"owner": {"reputation": 39050, "user_id": 2336231, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/d7kOQ.jpg?s=128&g=1", "display_name": "BroiSatse", "link": "https://stackoverflow.com/users/2336231/broisatse"}, "edited": false, "score": 0, "creation_date": 1438773579, "post_id": 31830939, "comment_id": 51584146, "body": "Remove all the puts from the code above and it should work. BTW, rails already have a helper called <code>distance_of_time_in_words_to_now</code> -  you might wanna check if that&#39;s suits you."}, {"owner": {"reputation": 39050, "user_id": 2336231, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/d7kOQ.jpg?s=128&g=1", "display_name": "BroiSatse", "link": "https://stackoverflow.com/users/2336231/broisatse"}, "reply_to_user": {"reputation": 32131, "user_id": 2346461, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/i3xAf.jpg?s=128&g=1", "display_name": "Pavan", "link": "https://stackoverflow.com/users/2346461/pavan"}, "edited": false, "score": 0, "creation_date": 1438773646, "post_id": 31830939, "comment_id": 51584177, "body": "@Pavan - Oh, that&#39;s cool. When did they added alias for this ridiculus name I&#39;ve mentioned above?"}, {"owner": {"reputation": 32131, "user_id": 2346461, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/i3xAf.jpg?s=128&g=1", "display_name": "Pavan", "link": "https://stackoverflow.com/users/2346461/pavan"}, "reply_to_user": {"reputation": 39050, "user_id": 2336231, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/d7kOQ.jpg?s=128&g=1", "display_name": "BroiSatse", "link": "https://stackoverflow.com/users/2336231/broisatse"}, "edited": false, "score": 0, "creation_date": 1438773819, "post_id": 31830939, "comment_id": 51584294, "body": "@BroiSatse Don&#39;t know :)"}, {"owner": {"reputation": 569, "user_id": 4425738, "user_type": "registered", "accept_rate": 80, "profile_image": "https://lh3.googleusercontent.com/-YAT3JzYB84E/AAAAAAAAAAI/AAAAAAAAABE/k01K-srKnlI/photo.jpg?sz=128", "display_name": "Yunus Hatipoglu", "link": "https://stackoverflow.com/users/4425738/yunus-hatipoglu"}, "edited": false, "score": 0, "creation_date": 1438774604, "post_id": 31830939, "comment_id": 51584821, "body": "&lt;%= time_ago_in_words(message.created_at) %&gt; ago. I added this one and it worked, I want to add more feature to this, what I want to do is, if it is more than 7 days, I want normal date not 8 days ago, how can I implement?"}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 1, "creation_date": 1438774769, "post_id": 31830939, "comment_id": 51584921, "body": "@YunusHatipoglu: have your own helper which will call <code>time_ago_in_words</code> if &lt; 7 days or display the date otherwise"}], "answers": [{"tags": [], "owner": {"reputation": 39050, "user_id": 2336231, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/d7kOQ.jpg?s=128&g=1", "display_name": "BroiSatse", "link": "https://stackoverflow.com/users/2336231/broisatse"}, "is_accepted": true, "score": 1, "last_activity_date": 1438774768, "creation_date": 1438774768, "answer_id": 31831469, "question_id": 31830939, "link": "https://stackoverflow.com/questions/31830939/ruby-on-rails-created-at-format-show/31831469#31831469", "title": "Ruby on rails created_at format show", "body": "<p>There already is a method for this called <code>time_ago_in_words</code> (Thanks Pavan for mentioning this alias, I always used <code>distance_in_time_in_words_from_now</code>). To change the way sentences are displayed, you need to configure your locales:</p>\n\n<pre><code>en:\n  datetime:\n    distance_in_words:\n      half_a_minute: half a minute\n      less_than_x_seconds:\n        one: less than 1 second\n        other: less than %{count} seconds\n      x_seconds:\n        one: 1 second\n        other: '%{count} seconds'\n      less_than_x_minutes:\n        one: less than a minute\n        other: less than %{count} minutes\n      x_minutes:\n        one: 1 minute\n        other: '%{count} minutes'\n      about_x_hours:\n        one: about 1 hour\n        other: about %{count} hours\n      x_days:\n        one: 1 day\n        other: '%{count} days'\n      about_x_months:\n        one: about 1 month\n        other: about %{count} months\n      x_months:\n        one: 1 month\n        other: '%{count} months'\n      about_x_years:\n        one: about 1 year\n        other: about %{count} years\n      over_x_years:\n        one: over 1 year\n        other: over %{count} years\n      almost_x_years:\n        one: almost 1 year\n        other: almost %{count} years\n</code></pre>\n"}], "owner": {"reputation": 569, "user_id": 4425738, "user_type": "registered", "accept_rate": 80, "profile_image": "https://lh3.googleusercontent.com/-YAT3JzYB84E/AAAAAAAAAAI/AAAAAAAAABE/k01K-srKnlI/photo.jpg?sz=128", "display_name": "Yunus Hatipoglu", "link": "https://stackoverflow.com/users/4425738/yunus-hatipoglu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 504, "favorite_count": 1, "accepted_answer_id": 31831469, "answer_count": 1, "score": 1, "last_activity_date": 1438774768, "creation_date": 1438773316, "last_edit_date": 1438774632, "question_id": 31830939, "link": "https://stackoverflow.com/questions/31830939/ruby-on-rails-created-at-format-show", "title": "Ruby on rails created_at format show", "body": "<p>I added a <code>time</code> method to my <code>application_helper.rb</code>.</p>\n\n<p>I want to show in view <code>&lt;%= message.created_at %&gt;</code> exist, how can I use relative type instead of  <code>&lt;%= message.created_at %&gt;</code> to display such as 2 minutes ago, 1 week ago</p>\n\n<pre><code>def relative_time(start_time)\n  diff_seconds = Time.now - start_time\n\n  case diff_seconds\n  when 0 .. 59\n    puts \"#{diff_seconds} seconds ago\"\n  when 60 .. (3600-1)\n    puts \"#{diff_seconds/60} minutes ago\"\n  when 3600 .. (3600*24-1)\n    puts \"#{diff_seconds/3600} hours ago\"\n  when (3600*24) .. (3600*24*30) \n    puts \"#{diff_seconds/(3600*24)} days ago\"\n  else\n    puts start_time.strftime(\"%m/%d/%Y\")\n  end\nend\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "activerecord", "callback"], "answers": [{"tags": [], "owner": {"reputation": 24729, "user_id": 2564200, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/a92dfcc9fcac72dabd4b1eefa0b5106e?s=128&d=identicon&r=PG&f=1", "display_name": "Santhosh", "link": "https://stackoverflow.com/users/2564200/santhosh"}, "is_accepted": true, "score": 3, "last_activity_date": 1438773357, "creation_date": 1438773357, "answer_id": 31830956, "question_id": 31830837, "link": "https://stackoverflow.com/questions/31830837/in-rails-model-can-we-not-save-an-item-if-the-table-doesnt-exist/31830956#31830956", "title": "In Rails model, can we not save an item if the table doesn&#39;t exist?", "body": "<p>You can check if the table exists by</p>\n\n<pre><code>ActiveRecord::Base.connection.table_exists? 'log_table'\n</code></pre>\n\n<p>The callback can be modified like</p>\n\n<pre><code>after_save :record_to_log, :if =&gt; ActiveRecord::Base.connection.table_exists?('log_table')\n</code></pre>\n"}], "owner": {"reputation": 85, "user_id": 3875422, "user_type": "registered", "accept_rate": 20, "profile_image": "https://i.stack.imgur.com/bAS6Z.jpg?s=128&g=1", "display_name": "Catherine", "link": "https://stackoverflow.com/users/3875422/catherine"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 90, "favorite_count": 1, "accepted_answer_id": 31830956, "answer_count": 1, "score": 1, "last_activity_date": 1438773521, "creation_date": 1438773033, "last_edit_date": 1438773521, "question_id": 31830837, "link": "https://stackoverflow.com/questions/31830837/in-rails-model-can-we-not-save-an-item-if-the-table-doesnt-exist", "title": "In Rails model, can we not save an item if the table doesn&#39;t exist?", "body": "<p>I have several databases that use the <code>Records</code> model. In this model's <code>after_save</code> callback, I am creating a new row in <code>LogTable</code>. I have something like:</p>\n\n<pre><code>class Records &lt; ActiveRecord::Base\n  after_save :record_to_log\n  def record_to_log\n    new_log = LogTable.new\n    new_log.keyword = \"keyword\"\n    new_log.save\n  end\nend\n</code></pre>\n\n<p>But not all my databases have the <code>LogTable</code> table. I am getting an error that says the <code>LogTable</code> doesn't exist. How do I prevent this error, and is there a way to abort save if the table doesn't exist in a particular database?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "mongodb", "mongoid"], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 3950017, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d1d93477d7b60c81f7f3f4ae620947f2?s=128&d=identicon&r=PG", "display_name": "Norm Fasey", "link": "https://stackoverflow.com/users/3950017/norm-fasey"}, "is_accepted": false, "score": 0, "last_activity_date": 1438777692, "creation_date": 1438777692, "answer_id": 31832530, "question_id": 31830702, "link": "https://stackoverflow.com/questions/31830702/nomethoderror-undefined-method-in-my-controller-ruby-on-rails/31832530#31832530", "title": "NoMethodError, undefined method in my controller Ruby on Rails", "body": "<p>It looks like it is complaining that it does not know how to hook up the relationship between Article and ArticleCategory. It may not be able to infer the name of the class in Article?</p>\n\n<p>Try adding the class_name to the definition of the relationship.</p>\n\n<pre><code>class Article\n  include Mongoid::Document\n  include Mongoid::Timestamps\n\n  field :title, type: String\n  field :content, type: String\n\n  belongs_to :user\n  #kategorie\n  belongs_to :article_category, class_name: \"ArticleCategory\"\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 394580, "user_id": 479863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ArUCE.jpg?s=128&g=1", "display_name": "mu is too short", "link": "https://stackoverflow.com/users/479863/mu-is-too-short"}, "is_accepted": false, "score": 1, "last_activity_date": 1438796392, "creation_date": 1438796392, "answer_id": 31839272, "question_id": 31830702, "link": "https://stackoverflow.com/questions/31830702/nomethoderror-undefined-method-in-my-controller-ruby-on-rails/31839272#31839272", "title": "NoMethodError, undefined method in my controller Ruby on Rails", "body": "<p>Your problem is in <code>ArticlesController#article</code>:</p>\n\n<pre><code>def article\n  @article = Article.order_by(created_at: 'desc').page params[:page]\nend\n</code></pre>\n\n<p>That sequence of <code>order_by</code> and <code>page</code> calls is just building a query so you have a <code>Mongoid::Criteria</code> in <code>@article</code> rather than the single <code>Article</code> instance that your template apparently expects.</p>\n\n<p>I'm not sure but the presence of <code>view_article</code> and its <code>article/:id</code> route suggests that your <code>article</code> method should look like:</p>\n\n<pre><code>def article\n  @articles = Article.order_by(created_at: 'desc').page params[:page]\n  # ------^\nend\n</code></pre>\n\n<p>and the corresponding view should iterate over <code>@articles</code> to display each article.</p>\n"}], "owner": {"reputation": 41, "user_id": 4667549, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/3780e1be9bfcac8f16f292913cf9f7e8?s=128&d=identicon&r=PG", "display_name": "Kamil Mrozek", "link": "https://stackoverflow.com/users/4667549/kamil-mrozek"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 519, "favorite_count": 2, "answer_count": 2, "score": 0, "last_activity_date": 1438796392, "creation_date": 1438772658, "last_edit_date": 1438775002, "question_id": 31830702, "link": "https://stackoverflow.com/questions/31830702/nomethoderror-undefined-method-in-my-controller-ruby-on-rails", "title": "NoMethodError, undefined method in my controller Ruby on Rails", "body": "<p>I'm getting NoMethodError at /article</p>\n\n<blockquote>\n  <p>undefined method 'article_category' for Mongoid::Criteria</p>\n</blockquote>\n\n<p><strong>Article model</strong></p>\n\n<pre><code>class Article\n  include Mongoid::Document\n  include Mongoid::Timestamps\n\n  field :title, type: String\n  field :content, type: String\n\n  belongs_to :user\n  #kategorie\n  belongs_to :article_category\n</code></pre>\n\n<p><strong>Article controler</strong></p>\n\n<pre><code>class ArticlesController &lt; ApplicationController\n    def article\n    @article = Article.order_by(created_at: 'desc').page params[:page]\n  end\n\n  def view_article\n    @article = Article.find(params[:id])\n  end\nend\n</code></pre>\n\n<p><strong>ArticleCategory model</strong></p>\n\n<pre><code>class ArticleCategory\n  include Mongoid::Document\n  include Mongoid::Timestamps\n\n\n  field :name, type: String\n\n  has_many :articles\n\n\nend\n</code></pre>\n\n<p><strong>Article_category controller</strong></p>\n\n<pre><code>class ArticleCategoriesController &lt; ApplicationController\n\n def category # Give the view all categories to list\n  @categories = ArticleCategory.order(\"created_at DESC\")\n end\n\n def show\n   @category = ArticleCategory.find(params[:id])\n end\n\nend\n</code></pre>\n\n<p><strong>routes</strong></p>\n\n<pre><code>  get 'article', to: 'articles#article'\n  get 'article/:id', to: 'articles#view_article', as: 'view_article'\n  resources :article_categories do\n  resources :articles, shallow: true\nend\n</code></pre>\n\n<p>Is there everything good with my category controller ? </p>\n\n<p>In my article view  i'm displaying it in this way. </p>\n\n<pre><code>&lt;%= link_to @article.article_category.name, @article.article_category -%&gt;\n</code></pre>\n"}, {"tags": ["arrays", "ruby", "hash"], "comments": [{"owner": {"reputation": 928, "user_id": 1899424, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a7daee92c10febe423ec55cea4119919?s=128&d=identicon&r=PG", "display_name": "dcorking", "link": "https://stackoverflow.com/users/1899424/dcorking"}, "edited": false, "score": 1, "creation_date": 1438772143, "post_id": 31830433, "comment_id": 51583250, "body": "There is a way to do almost anything dynamically in Ruby by overriding method_missing. What is the purpose of your idea?"}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "reply_to_user": {"reputation": 928, "user_id": 1899424, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a7daee92c10febe423ec55cea4119919?s=128&d=identicon&r=PG", "display_name": "dcorking", "link": "https://stackoverflow.com/users/1899424/dcorking"}, "edited": false, "score": 1, "creation_date": 1438772752, "post_id": 31830433, "comment_id": 51583627, "body": "@dcorking: confuse the hell out of coworkers, perhaps? :)"}, {"owner": {"reputation": 15, "user_id": 3535425, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/pC0Bv.jpg?s=128&g=1", "display_name": "Gurdipe", "link": "https://stackoverflow.com/users/3535425/gurdipe"}, "edited": false, "score": 0, "creation_date": 1438773323, "post_id": 31830433, "comment_id": 51583986, "body": "My thinking was that there may be a way in ruby via Meta Programming using Strut or OpenStrut that will allow you to select a value dynamically from a array of hashes or array of deeply nested hashes.  Maybe I need to convert it to json and then use instance methods.  Sorry if I am not explaining what I am trying to achieve clearly"}, {"owner": {"reputation": 928, "user_id": 1899424, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a7daee92c10febe423ec55cea4119919?s=128&d=identicon&r=PG", "display_name": "dcorking", "link": "https://stackoverflow.com/users/1899424/dcorking"}, "edited": false, "score": 0, "creation_date": 1438773547, "post_id": 31830433, "comment_id": 51584124, "body": "Please explain why Amit&#39;s answers don&#39;t do what you need. That might help us better understand your question."}, {"owner": {"reputation": 15, "user_id": 3535425, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/pC0Bv.jpg?s=128&g=1", "display_name": "Gurdipe", "link": "https://stackoverflow.com/users/3535425/gurdipe"}, "edited": false, "score": 0, "creation_date": 1438775175, "post_id": 31830433, "comment_id": 51585185, "body": "Amit&#39;s answer is great, what I was looking for there may be a way in ruby to select a value in a array of hashes dynamically."}, {"owner": {"reputation": 928, "user_id": 1899424, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a7daee92c10febe423ec55cea4119919?s=128&d=identicon&r=PG", "display_name": "dcorking", "link": "https://stackoverflow.com/users/1899424/dcorking"}, "edited": false, "score": 0, "creation_date": 1438783222, "post_id": 31830433, "comment_id": 51591269, "body": "What extra dynamic feature do you need to add to Amit&#39;s answers?"}], "answers": [{"comments": [{"owner": {"reputation": 3412, "user_id": 1427942, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c2035900867f8c2074dc86bbe19cf3c2?s=128&d=identicon&r=PG", "display_name": "Eich", "link": "https://stackoverflow.com/users/1427942/eich"}, "edited": false, "score": 0, "creation_date": 1438772296, "post_id": 31830551, "comment_id": 51583345, "body": "Which gives you the following result: <code>{&quot;label&quot;=&gt;&quot;cat&quot;, &quot;name&quot;=&gt;&quot;kitty&quot;, &quot;id&quot;=&gt;189955}</code>. Example: <a href=\"https://repl.it/BATV\" rel=\"nofollow noreferrer\">repl.it/BATV</a>"}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 3, "creation_date": 1438772594, "post_id": 31830551, "comment_id": 51583525, "body": "Or just use detect/find instead of select+first"}, {"owner": {"reputation": 1295, "user_id": 1602342, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/VxzbS.jpg?s=128&g=1", "display_name": "Amit Suroliya", "link": "https://stackoverflow.com/users/1602342/amit-suroliya"}, "edited": false, "score": 1, "creation_date": 1438772861, "post_id": 31830551, "comment_id": 51583694, "body": "@SergioTulentsev......yes, we can do this &gt;&gt;&gt;  <code>response.find{|x| x[&quot;name&quot;] == &quot;kitty&quot;}</code>"}], "tags": [], "owner": {"reputation": 1295, "user_id": 1602342, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/VxzbS.jpg?s=128&g=1", "display_name": "Amit Suroliya", "link": "https://stackoverflow.com/users/1602342/amit-suroliya"}, "is_accepted": false, "score": 5, "last_activity_date": 1438772379, "last_edit_date": 1438772379, "creation_date": 1438772242, "answer_id": 31830551, "question_id": 31830433, "link": "https://stackoverflow.com/questions/31830433/select-a-value-from-an-array-of-hashes/31830551#31830551", "title": "Select a value from an array of hashes", "body": "<p>You can do this -</p>\n\n<pre><code>response.select{|x| x[\"name\"] == \"kitty\"}.first\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 9602, "user_id": 3607136, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/NRFso.jpg?s=128&g=1", "display_name": "Gagan Gami", "link": "https://stackoverflow.com/users/3607136/gagan-gami"}, "edited": false, "score": 0, "creation_date": 1438778297, "post_id": 31831808, "comment_id": 51587372, "body": "I like this way <code>Proc</code> 1+ for this"}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 1, "creation_date": 1438778948, "post_id": 31831808, "comment_id": 51587878, "body": "Or <code>finder[&#39;name&#39;, &#39;rex&#39;]</code>"}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1438789268, "post_id": 31831808, "comment_id": 51595679, "body": "With some tweaking the proc could accept a hash, i.e. <code>finder[&#39;label&#39; =&gt; &#39;cat&#39;, &#39;name&#39; =&gt; &#39;sam&#39;]</code>"}], "tags": [], "owner": {"reputation": 24729, "user_id": 2564200, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/a92dfcc9fcac72dabd4b1eefa0b5106e?s=128&d=identicon&r=PG&f=1", "display_name": "Santhosh", "link": "https://stackoverflow.com/users/2564200/santhosh"}, "is_accepted": false, "score": 3, "last_activity_date": 1438775692, "creation_date": 1438775692, "answer_id": 31831808, "question_id": 31830433, "link": "https://stackoverflow.com/questions/31830433/select-a-value-from-an-array-of-hashes/31831808#31831808", "title": "Select a value from an array of hashes", "body": "<p>Use a Proc</p>\n\n<pre><code>response = [{\"label\"=&gt;\"cat\", \"name\"=&gt;\"kitty\", \"id\"=&gt;189955},\n            {\"label\" =&gt; \"dog\", \"name\"=&gt;\"rex\", \"id\" =&gt; 550081}]\nfinder = Proc.new {|k, v| response.find {|r| r[k] == v} }\n</code></pre>\n\n<p>Then</p>\n\n<pre><code>finder.call('name', 'rex')\n# =&gt; {\"label\"=&gt;\"dog\", \"name\"=&gt;\"rex\", \"id\"=&gt;550081} \nfinder.call('label', 'cat')\n# =&gt; {\"label\"=&gt;\"cat\", \"name\"=&gt;\"kitty\", \"id\"=&gt;189955}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 2, "creation_date": 1438788656, "post_id": 31832490, "comment_id": 51595278, "body": "<code>select</code> + <code>first</code> finds all elements and throws away all but the first. Use <code>find</code> instead, it stops after the first match."}], "tags": [], "owner": {"reputation": 9602, "user_id": 3607136, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/NRFso.jpg?s=128&g=1", "display_name": "Gagan Gami", "link": "https://stackoverflow.com/users/3607136/gagan-gami"}, "is_accepted": false, "score": 2, "last_activity_date": 1438836591, "last_edit_date": 1438836591, "creation_date": 1438777590, "answer_id": 31832490, "question_id": 31830433, "link": "https://stackoverflow.com/questions/31830433/select-a-value-from-an-array-of-hashes/31832490#31832490", "title": "Select a value from an array of hashes", "body": "<p>You can also pass multiple conditions if required like this:</p>\n\n<pre><code>response = [\n  {\"label\"=&gt;\"cat\", \"name\"=&gt;\"kitty\", \"id\"=&gt;189955},\n  {\"label\"=&gt;\"cat\", \"name\"=&gt;\"kitty\", \"id\"=&gt;189956},\n  {\"label\"=&gt;\"cat\", \"name\"=&gt;\"kitty\", \"id\"=&gt;189957},\n  {\"label\"=&gt;\"cat\", \"name\"=&gt;\"meow\", \"id\"=&gt;189957},\n  {\"label\" =&gt; \"dog\", \"name\"=&gt;\"rex\", \"id\" =&gt; 550081},\n  {\"label\" =&gt; \"dog\", \"name\"=&gt;\"tommy\", \"id\" =&gt; 550082},\n  {\"label\" =&gt; \"dog\", \"name\"=&gt;\"rex\", \"id\" =&gt; 550083}\n]\n\n&gt; response.select{|h| h[\"label\"] == \"cat\" &amp;&amp; h[\"name\"] == \"kitty\" &amp;&amp; h[\"id\"] == 189955}\n=&gt; [{\"label\"=&gt;\"cat\", \"name\"=&gt;\"kitty\", \"id\"=&gt;189955}] # returns array of selected hashes\n\n&gt; response.find{|h| h[\"label\"] == \"cat\" &amp;&amp; h[\"name\"] == \"kitty\" &amp;&amp; h[\"id\"] == 189955}\n=&gt; {\"label\"=&gt;\"cat\", \"name\"=&gt;\"kitty\", \"id\"=&gt;189955} # returns first match element\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 589, "user_id": 1758824, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e92483a59af1553c65339b92bcbbf4e?s=128&d=identicon&r=PG", "display_name": "Kate Kasinskaya", "link": "https://stackoverflow.com/users/1758824/kate-kasinskaya"}, "is_accepted": false, "score": 0, "last_activity_date": 1611590654, "creation_date": 1611590654, "answer_id": 65888265, "question_id": 31830433, "link": "https://stackoverflow.com/questions/31830433/select-a-value-from-an-array-of-hashes/65888265#65888265", "title": "Select a value from an array of hashes", "body": "<p>if you're using Rails - just use <code>.pluck</code></p>\n<pre><code>array_of_hashes = [\n  { name: &quot;Kate&quot;, city: &quot;Minsk&quot;, country: &quot;Belarus&quot;, id: 1 },\n  { name: &quot;Mike&quot;, city: &quot;New York&quot;, country: &quot;USA&quot;, id: 2 },\n  { name: &quot;Aleh&quot;, city: &quot;Warsaw&quot;, country: &quot;Poland&quot;, id: 3},\n]\n\n\n&gt;&gt; array_of_hashes.pluck(:name)\n&gt;&gt;\n&gt;&gt; [ &quot;Kate&quot;, &quot;Mike&quot;, &quot;Aleh&quot; ]\n</code></pre>\n"}], "owner": {"reputation": 15, "user_id": 3535425, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/pC0Bv.jpg?s=128&g=1", "display_name": "Gurdipe", "link": "https://stackoverflow.com/users/3535425/gurdipe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2255, "favorite_count": 1, "answer_count": 4, "score": -1, "last_activity_date": 1611590654, "creation_date": 1438771909, "last_edit_date": 1438773238, "question_id": 31830433, "link": "https://stackoverflow.com/questions/31830433/select-a-value-from-an-array-of-hashes", "title": "Select a value from an array of hashes", "body": "<p>From an array of hashes:</p>\n\n<pre><code>response = [\n  {\"label\"=&gt;\"cat\", \"name\"=&gt;\"kitty\", \"id\"=&gt;189955},\n  {\"label\" =&gt; \"dog\", \"name\"=&gt;\"rex\", \"id\" =&gt; 550081}\n]\n</code></pre>\n\n<p>is there a way to write something like:</p>\n\n<pre><code>response.name.kitty\n</code></pre>\n\n<p>to retrieve the hash that contains this value:</p>\n\n<pre><code>{\"label\"=&gt;\"cat\", \"name\"=&gt;\"kitty\", \"id\"=&gt;189955}\n</code></pre>\n"}, {"tags": ["ruby", "regex"], "comments": [{"owner": {"reputation": 78237, "user_id": 2025923, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/zYYVM.png?s=128&g=1", "display_name": "Tushar", "link": "https://stackoverflow.com/users/2025923/tushar"}, "edited": false, "score": 0, "creation_date": 1438770835, "post_id": 31829996, "comment_id": 51582368, "body": "Join the matched results"}], "answers": [{"comments": [{"owner": {"reputation": 7768, "user_id": 1213273, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/cf372446eb8bcca32373052e4dda2164?s=128&d=identicon&r=PG", "display_name": "Severin", "link": "https://stackoverflow.com/users/1213273/severin"}, "edited": false, "score": 0, "creation_date": 1438773082, "post_id": 31830059, "comment_id": 51583827, "body": "Thx for the response. It is of course possible to do that, but in this particular case all I have access to is the regular expression."}], "tags": [], "owner": {"reputation": 14407, "user_id": 3035830, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/14809f2ad7f14e2867798697ab8f8006?s=128&d=identicon&r=PG", "display_name": "shivam", "link": "https://stackoverflow.com/users/3035830/shivam"}, "is_accepted": false, "score": 0, "last_activity_date": 1438770909, "creation_date": 1438770909, "answer_id": 31830059, "question_id": 31829996, "link": "https://stackoverflow.com/questions/31829996/matching-multiple-parts-of-a-string-as-first-match/31830059#31830059", "title": "Matching multiple parts of a string as first match", "body": "<p>How about joining regex scan? Here:</p>\n\n<pre><code>a = \"details.html?id=8220&amp;inr=4241&amp;marke=Ford&amp;modell=Focus&amp;art=Gebrauchtwagen&amp;standort=\"\na.scan(/\\d+/).join\n# =&gt; \"82204241\"\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 7768, "user_id": 1213273, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/cf372446eb8bcca32373052e4dda2164?s=128&d=identicon&r=PG", "display_name": "Severin", "link": "https://stackoverflow.com/users/1213273/severin"}, "edited": false, "score": 0, "creation_date": 1438773334, "post_id": 31830319, "comment_id": 51583993, "body": "Thank you for your feedback; I was afraid of that."}], "tags": [], "owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "is_accepted": true, "score": 0, "last_activity_date": 1438771589, "creation_date": 1438771589, "answer_id": 31830319, "question_id": 31829996, "link": "https://stackoverflow.com/questions/31829996/matching-multiple-parts-of-a-string-as-first-match/31830319#31830319", "title": "Matching multiple parts of a string as first match", "body": "<p>Regex only matches a substring of the original string. Since <code>82204241</code> does not appear as a substring in the original string, it is impossible to match that as a single match with a regex.</p>\n"}], "owner": {"reputation": 7768, "user_id": 1213273, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/cf372446eb8bcca32373052e4dda2164?s=128&d=identicon&r=PG", "display_name": "Severin", "link": "https://stackoverflow.com/users/1213273/severin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 45, "favorite_count": 0, "accepted_answer_id": 31830319, "answer_count": 2, "score": 0, "last_activity_date": 1438771589, "creation_date": 1438770769, "last_edit_date": 1438771566, "question_id": 31829996, "link": "https://stackoverflow.com/questions/31829996/matching-multiple-parts-of-a-string-as-first-match", "title": "Matching multiple parts of a string as first match", "body": "<p>Given the following string: </p>\n\n<p><code>details.html?id=8220&amp;inr=4241&amp;marke=Ford&amp;modell=Focus&amp;art=Gebrauchtwagen&amp;standort=\n</code></p>\n\n<p>I need to match <code>82204241</code> in a single expression. I need to extract all numbers from it as a single match. Any idea how this can be solved?</p>\n\n<p><code>(\\d+)</code> will create two matches. I also tried with something like this without any luck: <code>details\\.html\\?[id=|.*inr=]+(\\d+)</code></p>\n"}, {"tags": ["ruby-on-rails", "ruby", "httparty"], "comments": [{"owner": {"reputation": 2319, "user_id": 2000910, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/ce74e0d1bd6dc710a4e91df50c68bf43?s=128&d=identicon&r=PG", "display_name": "PericlesTheo", "link": "https://stackoverflow.com/users/2000910/periclestheo"}, "edited": false, "score": 0, "creation_date": 1438770630, "post_id": 31829866, "comment_id": 51582239, "body": "can you show the irb session that you used?"}, {"owner": {"reputation": 1501, "user_id": 452684, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/75830be2998f0ae905c0b5daf4e1214b?s=128&d=identicon&r=PG", "display_name": "Pezholio", "link": "https://stackoverflow.com/users/452684/pezholio"}, "reply_to_user": {"reputation": 2319, "user_id": 2000910, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/ce74e0d1bd6dc710a4e91df50c68bf43?s=128&d=identicon&r=PG", "display_name": "PericlesTheo", "link": "https://stackoverflow.com/users/2000910/periclestheo"}, "edited": false, "score": 0, "creation_date": 1438770720, "post_id": 31829866, "comment_id": 51582295, "body": "$ irb irb(main):001:0&gt; require &#39;httparty&#39; =&gt; true irb(main):002:0&gt; response = HTTParty.get(&#39;<a href=\"https://api.stackexchange.com/2.2/questions?site=stackoverflow&#39;\">api.stackexchange.com/2.2/questions?site=stack&zwnj;&#8203;overflow&#39;</a>) =&gt; #&lt;HTTParty::Response:0x7fde7253f6d0 ... snip"}, {"owner": {"reputation": 1501, "user_id": 452684, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/75830be2998f0ae905c0b5daf4e1214b?s=128&d=identicon&r=PG", "display_name": "Pezholio", "link": "https://stackoverflow.com/users/452684/pezholio"}, "reply_to_user": {"reputation": 2319, "user_id": 2000910, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/ce74e0d1bd6dc710a4e91df50c68bf43?s=128&d=identicon&r=PG", "display_name": "PericlesTheo", "link": "https://stackoverflow.com/users/2000910/periclestheo"}, "edited": false, "score": 0, "creation_date": 1438770865, "post_id": 31829866, "comment_id": 51582393, "body": "Looks like it&#39;s related to some dependency - if I do <code>Bundler.require</code> in the irb session, I get the same issue. Just a case of what dependency"}, {"owner": {"reputation": 6190, "user_id": 5029266, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/7d4922cf09a8b3d3195cd4d848091ba3?s=128&d=identicon&r=PG", "display_name": "EugZol", "link": "https://stackoverflow.com/users/5029266/eugzol"}, "edited": false, "score": 0, "creation_date": 1438771693, "post_id": 31829866, "comment_id": 51582970, "body": "Is your server on port 8881? Do you receive that error when you make the request with HTTParty, or right after you do <code>Bundler.require</code>?"}, {"owner": {"reputation": 1501, "user_id": 452684, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/75830be2998f0ae905c0b5daf4e1214b?s=128&d=identicon&r=PG", "display_name": "Pezholio", "link": "https://stackoverflow.com/users/452684/pezholio"}, "edited": false, "score": 0, "creation_date": 1438772085, "post_id": 31829866, "comment_id": 51583210, "body": "The error happens when I make the HTTParty request. I don&#39;t have anything running on port 8881 AFAIK."}], "owner": {"reputation": 1501, "user_id": 452684, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/75830be2998f0ae905c0b5daf4e1214b?s=128&d=identicon&r=PG", "display_name": "Pezholio", "link": "https://stackoverflow.com/users/452684/pezholio"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1143, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1438770461, "creation_date": 1438770461, "question_id": 31829866, "link": "https://stackoverflow.com/questions/31829866/httparty-gives-me-connection-refused-connect2-for-127-0-0-1-port-8881-in", "title": "HTTParty gives me &#39;Connection refused - connect(2) for &quot;127.0.0.1&quot; port 8881&#39; in &gt;= Ruby 2.0.0", "body": "<p>This is a weird error. I'm in the process of upgrading a Rails 3.2.21 app to Ruby 2.  Everything works fine, but when I want to make any HTTP requests using HTTParty within Rails, I get the following error:</p>\n\n<pre><code>Errno::ECONNREFUSED: Connection refused - connect(2) for \"127.0.0.1\" port 8881\n    from /Users/stuart/.rbenv/versions/2.1.0/lib/ruby/2.1.0/net/http.rb:879:in `initialize'\n    from /Users/stuart/.rbenv/versions/2.1.0/lib/ruby/2.1.0/net/http.rb:879:in `open'\n    from /Users/stuart/.rbenv/versions/2.1.0/lib/ruby/2.1.0/net/http.rb:879:in `block in connect'\n    from /Users/stuart/.rbenv/versions/2.1.0/lib/ruby/2.1.0/timeout.rb:67:in `timeout'\n    from /Users/stuart/.rbenv/versions/2.1.0/lib/ruby/2.1.0/net/http.rb:878:in `connect'\n    from /Users/stuart/.rbenv/versions/2.1.0/lib/ruby/2.1.0/net/http.rb:863:in `do_start'\n    from /Users/stuart/.rbenv/versions/2.1.0/lib/ruby/2.1.0/net/http.rb:852:in `start'\n    from /Users/stuart/.rbenv/versions/2.1.0/lib/ruby/2.1.0/net/http.rb:1369:in `request'\n    from /Users/stuart/.rbenv/versions/2.1.0/lib/ruby/gems/2.1.0/gems/httparty-0.13.5/lib/httparty/request.rb:101:in `perform'\n    from /Users/stuart/.rbenv/versions/2.1.0/lib/ruby/gems/2.1.0/gems/httparty-0.13.5/lib/httparty.rb:522:in `perform_request'\n    from /Users/stuart/.rbenv/versions/2.1.0/lib/ruby/gems/2.1.0/gems/httparty-0.13.5/lib/httparty.rb:460:in `get'\n    from /Users/stuart/.rbenv/versions/2.1.0/lib/ruby/gems/2.1.0/gems/httparty-0.13.5/lib/httparty.rb:560:in `get'\n    from (irb):1\n    from /Users/stuart/.rbenv/versions/2.1.0/lib/ruby/gems/2.1.0/gems/railties-3.2.21/lib/rails/commands/console.rb:47:in `start'\n    from /Users/stuart/.rbenv/versions/2.1.0/lib/ruby/gems/2.1.0/gems/railties-3.2.21/lib/rails/commands/console.rb:8:in `start'\n    from /Users/stuart/.rbenv/versions/2.1.0/lib/ruby/gems/2.1.0/gems/railties-3.2.21/lib/rails/commands.rb:41:in `&lt;top (required)&gt;'\n    from script/rails:6:in `require'\n    from script/rails:6:in `&lt;main&gt;'\n</code></pre>\n\n<p>If I try and connect to the same URL using any other method (web browser, cURL, Net::HTTP), I can get the URL fine. Even if I run <code>irb</code> and require HTTParty and make the same request, it works. </p>\n\n<p>Here's my Gemfile:</p>\n\n<pre><code>source 'https://rubygems.org'\n\ngem 'rails', '~&gt; 3.2.21'\n\n# Bundle edge Rails instead:\n# gem 'rails', :git =&gt; 'git://github.com/rails/rails.git'\n\n# gem \"mongoid\", \"~&gt; 3.0.0\"\n# gem 'bson_ext'\n\n# Gems used only for assets and not required\n# in production environments by default.\ngroup :assets do\n  gem 'sass'\n  gem 'sass-rails',   '~&gt; 3.2.3'\n  gem 'coffee-rails', '~&gt; 3.2.1'\n\n  gem 'haml', '&gt;= 3.1.3'\n\n  # See https://github.com/sstephenson/execjs#readme for more supported runtimes\n  gem 'therubyracer', :platforms =&gt; :ruby\n  gem 'less-rails'\n  gem 'less-rails-bootstrap', '~&gt; 2.3.3'\n  gem 'twitter-bootstrap-rails-confirm'\n\n  gem 'uglifier', '&gt;= 1.0.3'\nend\n\ngroup :test do\n  gem \"factory_girl_rails\", \"~&gt; 4.0\"\n  gem 'sqlite3'\n  gem 'coveralls'\n  gem 'shoulda'\n  gem 'mocha', require: false\n  gem 'test-unit'\n  gem 'pry'\n  gem 'csvlint', github: 'theodi/csvlint.rb'\n  gem 'vcr'\n  gem 'webmock'\n  gem 'shoulda-context'\n  gem 'timecop'\n  gem 'cucumber-rails', require: false\n  gem 'database_cleaner'\nend\n\ngroup :development do\n  gem 'guard', '~&gt; 1.8.3'\n  gem 'guard-test'\n  # gem 'spring', github: 'jonleighton/spring'\n  gem 'terminal-notifier-guard'\n  gem 'ruby-prof'\n  gem 'rails-footnotes', '&gt;= 3.7.9'\n  gem 'rubyXL'\nend\n\ngroup :production do\n  gem 'foreman'\n  gem 'mysql2'\n  gem 'airbrake'\n  gem 'delayed-plugins-airbrake'\n  gem 'logstash-event'\n  gem 'lograge'\nend\n\ngroup :surveyor do\n  gem 'fastercsv', '~&gt; 1.5.4'\n  gem 'formtastic', '~&gt; 2.1.0'\n  gem 'uuidtools', '~&gt; 2.1'\n  gem 'mustache', '0.99.4'\n  gem 'rabl', '~&gt;0.6.13'\nend\n\ngem 'jquery-rails'\n\n#To serve static content / styleguide\ngem 'high_voltage'\n\n# states of the questionnaires\ngem 'aasm'\n\n# authorization\ngem 'cancan'\n\n# pagination\ngem 'kaminari'\n\n# To use ActiveModel has_secure_password\n# gem 'bcrypt-ruby', '~&gt; 3.0.0'\n\n# To use Jbuilder templates for JSON\n# gem 'jbuilder'\n\n# Use unicorn as the app server\n# gem 'unicorn'\ngem 'thin'\n\n# Deploy with Capistrano\n# gem 'capistrano'\n\n# To use debugger\n# gem 'debugger'\n\ngem \"ransack\"\ngem 'surveyor', path: 'vendor/gems/surveyor-1.4.0'\ngem 'redcarpet'\ngem \"devise\", \"3.0.3\"\ngem 'dotenv-rails'\ngem 'httparty'\ngem 'data_kitten', github: 'theodi/data_kitten'\ngem 'delayed_job_active_record'\ngem 'linkeddata'\ngem 'rack-linkeddata'\ngem 'jbuilder'\ngem 'rack-cors', require: 'rack/cors'\ngem 'alternate_rails', :github =&gt; 'theodi/alternate-rails'\ngem 'fog'\ngem 'juvia_rails', github: 'theodi/juvia_rails'\ngem 'domainatrix'\n# newrelic appears to be adding significant performance problems\n#gem 'newrelic_rpm'\ngem 'google_drive'\ngem 'pry-remote'\ngem 'memoist'\ngem 'validate_url'\ngem 'sidekiq'\ngem 'sinatra', :require =&gt; nil\n</code></pre>\n\n<p>And my Gemfile.lock</p>\n\n<pre><code>GIT\n  remote: git://github.com/theodi/alternate-rails.git\n  revision: 188889d66c5df1d7d13f7c6e53e8088e3503dea1\n  specs:\n    alternate_rails (0.0.1)\n      rails (~&gt; 3.2.13)\n\nGIT\n  remote: git://github.com/theodi/csvlint.rb.git\n  revision: 3dc689f4625c8edd4f7b725d1d420fdd67a67df9\n  specs:\n    csvlint (0.0.1)\n      activesupport\n      addressable\n      colorize\n      mime-types\n      open_uri_redirections\n\nGIT\n  remote: git://github.com/theodi/data_kitten.git\n  revision: ddcbb677d7d993091a8f2ca44e537aa5cfd63bb8\n  specs:\n    data_kitten (1.2.0)\n      curb\n      datapackage\n      git\n      json\n      linkeddata\n      nokogiri\n      rake\n      rest-client\n\nGIT\n  remote: git://github.com/theodi/juvia_rails.git\n  revision: 94f982aa8188a18bc0f37c16218c85e890d25294\n  specs:\n    juvia_rails (0.0.1)\n      rails (~&gt; 3.2.1)\n\nPATH\n  remote: vendor/gems/surveyor-1.4.0\n  specs:\n    surveyor (1.4.0)\n\nGEM\n  remote: https://rubygems.org/\n  specs:\n    aasm (3.1.1)\n    actionmailer (3.2.21)\n      actionpack (= 3.2.21)\n      mail (~&gt; 2.5.4)\n    actionpack (3.2.21)\n      activemodel (= 3.2.21)\n      activesupport (= 3.2.21)\n      builder (~&gt; 3.0.0)\n      erubis (~&gt; 2.7.0)\n      journey (~&gt; 1.0.4)\n      rack (~&gt; 1.4.5)\n      rack-cache (~&gt; 1.2)\n      rack-test (~&gt; 0.6.1)\n      sprockets (~&gt; 2.2.1)\n    activemodel (3.2.21)\n      activesupport (= 3.2.21)\n      builder (~&gt; 3.0.0)\n    activerecord (3.2.21)\n      activemodel (= 3.2.21)\n      activesupport (= 3.2.21)\n      arel (~&gt; 3.0.2)\n      tzinfo (~&gt; 0.3.29)\n    activeresource (3.2.21)\n      activemodel (= 3.2.21)\n      activesupport (= 3.2.21)\n    activesupport (3.2.21)\n      i18n (~&gt; 0.6, &gt;= 0.6.4)\n      multi_json (~&gt; 1.0)\n    addressable (2.3.5)\n    airbrake (4.1.0)\n      builder\n      multi_json\n    arel (3.0.3)\n    bcrypt (3.1.7)\n    bcrypt-ruby (3.1.5)\n      bcrypt (&gt;= 3.1.3)\n    builder (3.0.4)\n    cancan (1.6.10)\n    capybara (2.4.1)\n      mime-types (&gt;= 1.16)\n      nokogiri (&gt;= 1.3.3)\n      rack (&gt;= 1.0.0)\n      rack-test (&gt;= 0.5.4)\n      xpath (~&gt; 2.0)\n    celluloid (0.16.0)\n      timers (~&gt; 4.0.0)\n    coderay (1.1.0)\n    coffee-rails (3.2.2)\n      coffee-script (&gt;= 2.2.0)\n      railties (~&gt; 3.2.0)\n    coffee-script (2.2.0)\n      coffee-script-source\n      execjs\n    coffee-script-source (1.7.0)\n    colorize (0.7.3)\n    commonjs (0.2.7)\n    connection_pool (2.1.0)\n    coveralls (0.7.0)\n      multi_json (~&gt; 1.3)\n      rest-client\n      simplecov (&gt;= 0.7)\n      term-ansicolor\n      thor\n    crack (0.4.2)\n      safe_yaml (~&gt; 1.0.0)\n    cucumber (1.3.16)\n      builder (&gt;= 2.1.2)\n      diff-lcs (&gt;= 1.1.3)\n      gherkin (~&gt; 2.12)\n      multi_json (&gt;= 1.7.5, &lt; 2.0)\n      multi_test (&gt;= 0.1.1)\n    cucumber-rails (1.4.1)\n      capybara (&gt;= 1.1.2, &lt; 3)\n      cucumber (&gt;= 1.3.8, &lt; 2)\n      mime-types (~&gt; 1.16)\n      nokogiri (~&gt; 1.5)\n      rails (&gt;= 3, &lt; 5)\n    curb (0.8.8)\n    daemons (1.1.9)\n    database_cleaner (1.3.0)\n    datapackage (0.0.4)\n      colorize\n      json\n      json-schema\n      rest-client\n    delayed-plugins-airbrake (1.1.0)\n      airbrake\n      delayed_job\n    delayed_job (4.0.0)\n      activesupport (&gt;= 3.0, &lt; 4.1)\n    delayed_job_active_record (4.0.0)\n      activerecord (&gt;= 3.0, &lt; 4.1)\n      delayed_job (&gt;= 3.0, &lt; 4.1)\n    devise (3.0.3)\n      bcrypt-ruby (~&gt; 3.0)\n      orm_adapter (~&gt; 0.1)\n      railties (&gt;= 3.2.6, &lt; 5)\n      warden (~&gt; 1.2.3)\n    diff-lcs (1.2.5)\n    docile (1.1.3)\n    domainatrix (0.0.11)\n      addressable\n    dotenv (0.10.0)\n    dotenv-rails (0.10.0)\n      dotenv (= 0.10.0)\n    ebnf (0.3.6)\n      haml (~&gt; 4.0)\n      rdf (~&gt; 1.1)\n      sxp (~&gt; 0.1, &gt;= 0.1.3)\n    equivalent-xml (0.5.1)\n      nokogiri (&gt;= 1.4.3)\n    erubis (2.7.0)\n    eventmachine (1.0.3)\n    excon (0.31.0)\n    execjs (2.0.2)\n    factory_girl (4.4.0)\n      activesupport (&gt;= 3.0.0)\n    factory_girl_rails (4.4.1)\n      factory_girl (~&gt; 4.4.0)\n      railties (&gt;= 3.0.0)\n    faraday (0.9.0)\n      multipart-post (&gt;= 1.2, &lt; 3)\n    fastercsv (1.5.5)\n    ffi (1.9.3)\n    fog (1.20.0)\n      builder\n      excon (~&gt; 0.31.0)\n      formatador (~&gt; 0.2.0)\n      mime-types\n      multi_json (~&gt; 1.0)\n      net-scp (~&gt; 1.1)\n      net-ssh (&gt;= 2.1.3)\n      nokogiri (&gt;= 1.5.11)\n    foreman (0.63.0)\n      dotenv (&gt;= 0.7)\n      thor (&gt;= 0.13.6)\n    formatador (0.2.4)\n    formtastic (2.1.1)\n      actionpack (~&gt; 3.0)\n    gherkin (2.12.2)\n      multi_json (~&gt; 1.3)\n    git (1.2.9.1)\n    google_drive (0.3.9)\n      nokogiri (&gt;= 1.4.4, != 1.5.2, != 1.5.1)\n      oauth (&gt;= 0.3.6)\n      oauth2 (&gt;= 0.5.0)\n    guard (1.8.3)\n      formatador (&gt;= 0.2.4)\n      listen (~&gt; 1.3)\n      lumberjack (&gt;= 1.0.2)\n      pry (&gt;= 0.9.10)\n      thor (&gt;= 0.14.6)\n    guard-test (1.0.0)\n      guard (&gt;= 1.8)\n      test-unit (~&gt; 2.2)\n    haml (4.0.5)\n      tilt\n    high_voltage (2.1.0)\n    hike (1.2.3)\n    hitimes (1.2.2)\n    htmlentities (4.3.2)\n    httparty (0.13.5)\n      json (~&gt; 1.8)\n      multi_xml (&gt;= 0.5.2)\n    i18n (0.6.11)\n    jbuilder (2.0.4)\n      activesupport (&gt;= 3.0.0)\n      multi_json (&gt;= 1.2.0)\n    journey (1.0.4)\n    jquery-rails (3.1.0)\n      railties (&gt;= 3.0, &lt; 5.0)\n      thor (&gt;= 0.14, &lt; 2.0)\n    json (1.8.3)\n    json-ld (1.1.6)\n      rdf (~&gt; 1.1, &gt;= 1.1.4)\n    json-schema (2.5.0)\n      addressable (~&gt; 2.3)\n    jwt (0.1.13)\n      multi_json (&gt;= 1.5)\n    kaminari (0.15.1)\n      actionpack (&gt;= 3.0.0)\n      activesupport (&gt;= 3.0.0)\n    less (2.3.3)\n      commonjs (~&gt; 0.2.6)\n    less-rails (2.3.3)\n      actionpack (&gt;= 3.1)\n      less (~&gt; 2.3.1)\n    less-rails-bootstrap (2.3.3)\n      less-rails (~&gt; 2.3.1)\n    libv8 (3.16.14.7)\n    linkeddata (1.1.1)\n      equivalent-xml (&gt;= 0.4.0)\n      json-ld (&gt;= 1.1.1)\n      nokogiri (&gt;= 1.6.1)\n      rdf (&gt;= 1.1.1)\n      rdf-aggregate-repo (&gt;= 1.1.0)\n      rdf-isomorphic (&gt;= 1.1.0)\n      rdf-json (&gt;= 1.1.0)\n      rdf-microdata (&gt;= 1.1.1)\n      rdf-n3 (&gt;= 1.1.0)\n      rdf-rdfa (&gt;= 1.1.1)\n      rdf-rdfxml (&gt;= 1.1.0)\n      rdf-trig (&gt;= 1.1.2)\n      rdf-trix (&gt;= 1.1.0)\n      rdf-turtle (&gt;= 1.1.2)\n      sparql (&gt;= 1.1.2)\n      sparql-client (&gt;= 1.1.1)\n    listen (1.3.1)\n      rb-fsevent (&gt;= 0.9.3)\n      rb-inotify (&gt;= 0.9)\n      rb-kqueue (&gt;= 0.2)\n    lograge (0.2.2)\n      actionpack (&gt;= 3)\n      activesupport (&gt;= 3)\n      railties (&gt;= 3)\n    logstash-event (1.2.02)\n    lumberjack (1.0.4)\n    mail (2.5.4)\n      mime-types (~&gt; 1.16)\n      treetop (~&gt; 1.4.8)\n    memoist (0.9.3)\n    metaclass (0.0.4)\n    method_source (0.8.2)\n    mime-types (1.25.1)\n    mini_portile (0.6.0)\n    mocha (1.1.0)\n      metaclass (~&gt; 0.0.1)\n    multi_json (1.10.1)\n    multi_test (0.1.1)\n    multi_xml (0.5.5)\n    multipart-post (2.0.0)\n    mustache (0.99.4)\n    mysql2 (0.3.15)\n    net-http-persistent (1.9)\n    net-scp (1.1.2)\n      net-ssh (&gt;= 2.6.5)\n    net-ssh (2.8.0)\n    netrc (0.7.7)\n    nokogiri (1.6.3.1)\n      mini_portile (= 0.6.0)\n    oauth (0.4.7)\n    oauth2 (0.9.3)\n      faraday (&gt;= 0.8, &lt; 0.10)\n      jwt (~&gt; 0.1.8)\n      multi_json (~&gt; 1.3)\n      multi_xml (~&gt; 0.5)\n      rack (~&gt; 1.2)\n    open_uri_redirections (0.1.4)\n    orm_adapter (0.5.0)\n    polyamorous (0.6.4)\n      activerecord (&gt;= 3.0)\n    polyglot (0.3.5)\n    pry (0.9.12.6)\n      coderay (~&gt; 1.0)\n      method_source (~&gt; 0.8)\n      slop (~&gt; 3.4)\n    pry-remote (0.1.8)\n      pry (~&gt; 0.9)\n      slop (~&gt; 3.0)\n    rabl (0.6.14)\n      activesupport (&gt;= 2.3.14)\n      multi_json (~&gt; 1.0)\n    rack (1.4.5)\n    rack-cache (1.2)\n      rack (&gt;= 0.4)\n    rack-cors (0.4.0)\n    rack-linkeddata (1.1.0)\n      linkeddata (&gt;= 1.1.0)\n      rack (&gt;= 1.4)\n    rack-protection (1.5.3)\n      rack\n    rack-ssl (1.3.4)\n      rack\n    rack-test (0.6.2)\n      rack (&gt;= 1.0)\n    rails (3.2.21)\n      actionmailer (= 3.2.21)\n      actionpack (= 3.2.21)\n      activerecord (= 3.2.21)\n      activeresource (= 3.2.21)\n      activesupport (= 3.2.21)\n      bundler (~&gt; 1.0)\n      railties (= 3.2.21)\n    rails-footnotes (3.7.9)\n      rails (&gt;= 3.0.0)\n    railties (3.2.21)\n      actionpack (= 3.2.21)\n      activesupport (= 3.2.21)\n      rack-ssl (~&gt; 1.3.2)\n      rake (&gt;= 0.8.7)\n      rdoc (~&gt; 3.4)\n      thor (&gt;= 0.14.6, &lt; 2.0)\n    rake (10.4.0)\n    ransack (1.1.0)\n      actionpack (&gt;= 3.0)\n      activerecord (&gt;= 3.0)\n      polyamorous (~&gt; 0.6.0)\n    rb-fsevent (0.9.4)\n    rb-inotify (0.9.3)\n      ffi (&gt;= 0.5.0)\n    rb-kqueue (0.2.2)\n      ffi (&gt;= 0.5.0)\n    rdf (1.1.6)\n    rdf-aggregate-repo (1.1.0)\n      rdf (&gt;= 1.1)\n    rdf-isomorphic (1.1.0)\n      rdf (&gt;= 1.1)\n    rdf-json (1.1.0)\n      rdf (&gt;= 1.1.0)\n    rdf-microdata (1.1.2)\n      htmlentities (~&gt; 4.3)\n      nokogiri (~&gt; 1.6)\n      rdf (~&gt; 1.1)\n      rdf-xsd (~&gt; 1.1)\n    rdf-n3 (1.1.2)\n      rdf (~&gt; 1.1, &gt;= 1.1.5)\n    rdf-rdfa (1.1.4)\n      haml (~&gt; 4.0)\n      htmlentities (~&gt; 4.3)\n      rdf (~&gt; 1.1, &gt;= 1.1.6)\n      rdf-xsd (~&gt; 1.1)\n    rdf-rdfxml (1.1.1)\n      rdf (~&gt; 1.1)\n      rdf-rdfa (~&gt; 1.1)\n      rdf-xsd (~&gt; 1.1)\n    rdf-trig (1.1.3.1)\n      ebnf (~&gt; 0.3, &gt;= 0.3.5)\n      rdf (~&gt; 1.1, &gt;= 1.1.2.1)\n      rdf-turtle (~&gt; 1.1, &gt;= 1.1.3)\n    rdf-trix (1.1.0)\n      rdf (&gt;= 1.1)\n    rdf-turtle (1.1.4)\n      ebnf (~&gt; 0.3, &gt;= 0.3.6)\n      rdf (~&gt; 1.1, &gt;= 1.1.4)\n    rdf-xsd (1.1.1)\n      rdf (~&gt; 1.1)\n    rdoc (3.12.2)\n      json (~&gt; 1.4)\n    redcarpet (3.1.1)\n    redis (3.2.1)\n    redis-namespace (1.5.2)\n      redis (~&gt; 3.0, &gt;= 3.0.4)\n    ref (1.0.5)\n    rest-client (1.7.2)\n      mime-types (&gt;= 1.16, &lt; 3.0)\n      netrc (~&gt; 0.7)\n    ruby-prof (0.14.2)\n    rubyXL (3.3.3)\n      nokogiri (&gt;= 1.4.4)\n      rubyzip (&gt;= 1.1.6)\n    rubyzip (1.1.6)\n    safe_yaml (1.0.3)\n    sass (3.2.14)\n    sass-rails (3.2.6)\n      railties (~&gt; 3.2.0)\n      sass (&gt;= 3.1.10)\n      tilt (~&gt; 1.3)\n    shoulda (3.5.0)\n      shoulda-context (~&gt; 1.0, &gt;= 1.0.1)\n      shoulda-matchers (&gt;= 1.4.1, &lt; 3.0)\n    shoulda-context (1.1.6)\n    shoulda-matchers (2.5.0)\n      activesupport (&gt;= 3.0.0)\n    sidekiq (2.17.2)\n      celluloid (&gt;= 0.15.2)\n      connection_pool (&gt;= 1.0.0)\n      json\n      redis (&gt;= 3.0.6)\n      redis-namespace (&gt;= 1.3.1)\n    simplecov (0.8.2)\n      docile (~&gt; 1.1.0)\n      multi_json\n      simplecov-html (~&gt; 0.8.0)\n    simplecov-html (0.8.0)\n    sinatra (1.4.6)\n      rack (~&gt; 1.4)\n      rack-protection (~&gt; 1.4)\n      tilt (&gt;= 1.3, &lt; 3)\n    slop (3.4.7)\n    sparql (1.1.4)\n      builder (~&gt; 3.0)\n      ebnf (~&gt; 0.3, &gt;= 0.3.5)\n      rdf (~&gt; 1.1, &gt;= 1.1.4)\n      rdf-aggregate-repo (~&gt; 1.1, &gt;= 1.1.0)\n      rdf-xsd (~&gt; 1.1)\n      sparql-client (~&gt; 1.1)\n      sxp (~&gt; 0.1)\n    sparql-client (1.1.3)\n      net-http-persistent (~&gt; 1.4)\n      rdf (~&gt; 1.1)\n    sprockets (2.2.3)\n      hike (~&gt; 1.2)\n      multi_json (~&gt; 1.0)\n      rack (~&gt; 1.0)\n      tilt (~&gt; 1.1, != 1.3.0)\n    sqlite3 (1.3.9)\n    sxp (0.1.5)\n    term-ansicolor (1.3.0)\n      tins (~&gt; 1.0)\n    terminal-notifier-guard (1.5.3)\n    test-unit (2.5.5)\n    therubyracer (0.12.1)\n      libv8 (~&gt; 3.16.14.0)\n      ref\n    thin (1.6.2)\n      daemons (&gt;= 1.0.9)\n      eventmachine (&gt;= 1.0.0)\n      rack (&gt;= 1.0.0)\n    thor (0.19.1)\n    tilt (1.4.1)\n    timecop (0.7.1)\n    timers (4.0.1)\n      hitimes\n    tins (1.1.0)\n    treetop (1.4.15)\n      polyglot\n      polyglot (&gt;= 0.3.1)\n    twitter-bootstrap-rails-confirm (1.0.2)\n    tzinfo (0.3.42)\n    uglifier (2.4.0)\n      execjs (&gt;= 0.3.0)\n      json (&gt;= 1.8.0)\n    uuidtools (2.1.4)\n    validate_url (0.2.2)\n      activemodel (&gt;= 3.0.0)\n      addressable\n    vcr (2.9.0)\n    warden (1.2.3)\n      rack (&gt;= 1.0)\n    webmock (1.17.4)\n      addressable (&gt;= 2.2.7)\n      crack (&gt;= 0.3.2)\n    xpath (2.0.0)\n      nokogiri (~&gt; 1.3)\n\nPLATFORMS\n  ruby\n\nDEPENDENCIES\n  aasm\n  airbrake\n  alternate_rails!\n  cancan\n  coffee-rails (~&gt; 3.2.1)\n  coveralls\n  csvlint!\n  cucumber-rails\n  data_kitten!\n  database_cleaner\n  delayed-plugins-airbrake\n  delayed_job_active_record\n  devise (= 3.0.3)\n  domainatrix\n  dotenv-rails\n  factory_girl_rails (~&gt; 4.0)\n  fastercsv (~&gt; 1.5.4)\n  fog\n  foreman\n  formtastic (~&gt; 2.1.0)\n  google_drive\n  guard (~&gt; 1.8.3)\n  guard-test\n  haml (&gt;= 3.1.3)\n  high_voltage\n  httparty\n  jbuilder\n  jquery-rails\n  juvia_rails!\n  kaminari\n  less-rails\n  less-rails-bootstrap (~&gt; 2.3.3)\n  linkeddata\n  lograge\n  logstash-event\n  memoist\n  mocha\n  mustache (= 0.99.4)\n  mysql2\n  pry\n  pry-remote\n  rabl (~&gt; 0.6.13)\n  rack-cors\n  rack-linkeddata\n  rails (~&gt; 3.2.21)\n  rails-footnotes (&gt;= 3.7.9)\n  ransack\n  redcarpet\n  ruby-prof\n  rubyXL\n  sass\n  sass-rails (~&gt; 3.2.3)\n  shoulda\n  shoulda-context\n  sidekiq\n  sinatra\n  sqlite3\n  surveyor!\n  terminal-notifier-guard\n  test-unit\n  therubyracer\n  thin\n  timecop\n  twitter-bootstrap-rails-confirm\n  uglifier (&gt;= 1.0.3)\n  uuidtools (~&gt; 2.1)\n  validate_url\n  vcr\n  webmock\n</code></pre>\n\n<p>Any ideas? </p>\n"}, {"tags": ["ruby", "rubymotion", "rubymotion-promotion"], "answers": [{"comments": [{"owner": {"reputation": 546, "user_id": 1372912, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/E19E2.jpg?s=128&g=1", "display_name": "theCrab", "link": "https://stackoverflow.com/users/1372912/thecrab"}, "edited": false, "score": 0, "creation_date": 1479810421, "post_id": 31899437, "comment_id": 68704586, "body": "I tried using the <code>addChildViewController </code> but it did not work. I have posted my question in the comment below. I think its relevant to promotion and motionkit. Please have a look and help me out... thanks"}, {"owner": {"reputation": 546, "user_id": 1372912, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/E19E2.jpg?s=128&g=1", "display_name": "theCrab", "link": "https://stackoverflow.com/users/1372912/thecrab"}, "edited": false, "score": 0, "creation_date": 1479845022, "post_id": 31899437, "comment_id": 68727195, "body": "I am using ProMotion-map. I cannot seam to get the map touch events. I am assuming there is a view above the map which is covering the map layer. In promotion-map, the <code>on_load</code> presents a <code>MKMapView</code> as <code>self.view</code> if you do not declare one. Here is the gist for the code And this picture below is the end result. But somehow it adds a view with <code>UIColor.clearColor</code> on top of the map.   <a href=\"https://gist.github.com/theCrab/5f57a4662641e2e54f7a4c1ab1be61e9\" rel=\"nofollow noreferrer\">gist.github.com/theCrab/5f57a4662641e2e54f7a4c1ab1be61e9</a>   <a href=\"https://i.stack.imgur.com/UTZRb.png\" rel=\"nofollow noreferrer\">i.stack.imgur.com/UTZRb.png</a>"}], "tags": [], "owner": {"reputation": 20664, "user_id": 204044, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/0562644fed32428ce006bce3f352cf74?s=128&d=identicon&r=PG", "display_name": "Jamon Holmgren", "link": "https://stackoverflow.com/users/204044/jamon-holmgren"}, "is_accepted": true, "score": 2, "last_activity_date": 1439075145, "creation_date": 1439075145, "answer_id": 31899437, "question_id": 31829799, "link": "https://stackoverflow.com/questions/31829799/add-child-screen-to-parent-screen-with-rmq/31899437#31899437", "title": "add child screen to parent screen with rmq", "body": "<p>You're going to need to create an instance of the screen and then add its view.</p>\n\n<pre><code>def on_load\n  @login_screen = LoginScreen.new\n  addChildViewController @login_screen\n  rmq.append(UIImageView, :logo)\n  rmq.append(@login_screen.view, :login_form)\nend\n</code></pre>\n\n<p>The <code>addChildViewController</code> ensures that lifecycle events are properly called on <code>LoginScreen</code>.</p>\n"}], "owner": {"reputation": 173, "user_id": 2903682, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/4W1Iw.jpg?s=128&g=1", "display_name": "yogi_bear", "link": "https://stackoverflow.com/users/2903682/yogi-bear"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 99, "favorite_count": 0, "accepted_answer_id": 31899437, "answer_count": 1, "score": 1, "last_activity_date": 1479810205, "creation_date": 1438770327, "last_edit_date": 1438806337, "question_id": 31829799, "link": "https://stackoverflow.com/questions/31829799/add-child-screen-to-parent-screen-with-rmq", "title": "add child screen to parent screen with rmq", "body": "<p>In the on_load method of HomeScreen class i want to do something like rmq.append(LoginScreen, :login_form). LoginScreen inherits from PM::FormScreen.\n<a href=\"https://i.stack.imgur.com/ngDjf.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/ngDjf.png\" alt=\"enter image description here\"></a></p>\n\n<p>Since I am not implementing initWithFrame in LoginScreen the app crashes.</p>\n\n<p>This has been done in <a href=\"http://jamonholmgren.com/getting-started-with-motionkit-and-promotion/\" rel=\"nofollow noreferrer\">http://jamonholmgren.com/getting-started-with-motionkit-and-promotion/</a> but with motion kit. How can I achieve the same with rmq?</p>\n"}, {"tags": ["ruby", "regex", "bundler"], "answers": [{"comments": [{"owner": {"reputation": 1158, "user_id": 2747638, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/dWpWy.jpg?s=128&g=1", "display_name": "Mio", "link": "https://stackoverflow.com/users/2747638/mio"}, "edited": false, "score": 0, "creation_date": 1438768663, "post_id": 31829118, "comment_id": 51581051, "body": "I&#39;ve added bundlelist result. When trying your proposition. bundlelist.scan(/(?&lt;=* ).*?(?= &#40;/) SyntaxError: (eval):2: end pattern with unmatched parenthesis: /(?&lt;=* ).*?(?= &#40;/"}, {"owner": {"reputation": 33085, "user_id": 2423164, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Nxbnp.jpg?s=128&g=1", "display_name": "ndnenkov", "link": "https://stackoverflow.com/users/2423164/ndnenkov"}, "reply_to_user": {"reputation": 1158, "user_id": 2747638, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/dWpWy.jpg?s=128&g=1", "display_name": "Mio", "link": "https://stackoverflow.com/users/2747638/mio"}, "edited": false, "score": 0, "creation_date": 1438768732, "post_id": 31829118, "comment_id": 51581084, "body": "@BeniMio, there was a little mistake. I fixed it. Try to use the new version (added <code>)</code> at the end)."}], "tags": [], "owner": {"reputation": 33085, "user_id": 2423164, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Nxbnp.jpg?s=128&g=1", "display_name": "ndnenkov", "link": "https://stackoverflow.com/users/2423164/ndnenkov"}, "is_accepted": true, "score": 2, "last_activity_date": 1438768685, "last_edit_date": 1438768685, "creation_date": 1438768487, "answer_id": 31829118, "question_id": 31828984, "link": "https://stackoverflow.com/questions/31828984/grep-with-ruby-the-gemlist/31829118#31829118", "title": "Grep with ruby the gemlist", "body": "<p>Use lookbehind and lookahead instead:</p>\n\n<pre><code>/(?&lt;=\\* ).*?(?= \\()/\n</code></pre>\n\n<p>What this means is the minimum thing that is preceded by <em>star + space</em> and followed by <em>space + opening bracket</em>.</p>\n"}], "owner": {"reputation": 1158, "user_id": 2747638, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/dWpWy.jpg?s=128&g=1", "display_name": "Mio", "link": "https://stackoverflow.com/users/2747638/mio"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 74, "favorite_count": 0, "accepted_answer_id": 31829118, "answer_count": 1, "score": 1, "last_activity_date": 1438768785, "creation_date": 1438768153, "last_edit_date": 1438768785, "question_id": 31828984, "link": "https://stackoverflow.com/questions/31828984/grep-with-ruby-the-gemlist", "title": "Grep with ruby the gemlist", "body": "<p>I'm trying to grep a gem list. I get the list with</p>\n\n<pre><code>bundlelist = `bundle show`\n</code></pre>\n\n<p>Result</p>\n\n<pre><code>\"Gems included by the bundle:\\n  * CFPropertyList (2.3.1)\\n  * abstract_type (0.0.7)\\n  * actionmailer (4.2.3)\\n  * actionpack (4.2.3)\\n\"\n</code></pre>\n\n<p>I would like:</p>\n\n<pre><code>=&gt; [\"CFPropertyList\",\n \"abstract_type\",\n \"actionmailer\",\n \"actionpack\"]\n</code></pre>\n\n<p>When I try to grep on it, I do <code>bundlelist.scan(/\\*.*\\(/)</code>. The result is:</p>\n\n<pre><code>=&gt; [\"* CFPropertyList (\",\n \"* abstract_type (\",\n \"* actionmailer (\",\n \"* actionpack (\"]\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "redirect", "post", "submit"], "comments": [{"owner": {"reputation": 9878, "user_id": 3315785, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/YsMo6.jpg?s=128&g=1", "display_name": "j-dexx", "link": "https://stackoverflow.com/users/3315785/j-dexx"}, "edited": false, "score": 0, "creation_date": 1438768471, "post_id": 31828982, "comment_id": 51580927, "body": "You have this <code>id = params[:id] if params[:id].present?</code> but I assume it&#39;s not losing the param because after that you just check if it&#39;s a post request.  If <code>params[:id]</code> isn&#39;t sent on the post request then you never set id, which means when you redirect it would be nil.  So you need to do something else if it&#39;s a post request and params[:id] isn&#39;t there"}, {"owner": {"reputation": 39050, "user_id": 2336231, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/d7kOQ.jpg?s=128&g=1", "display_name": "BroiSatse", "link": "https://stackoverflow.com/users/2336231/broisatse"}, "edited": false, "score": 0, "creation_date": 1438772042, "post_id": 31828982, "comment_id": 51583178, "body": "Try <code>raise id.inspect</code> just before the redirect - I&#39;m gonna bet it is nil. Apart of that, you should never have a single action to handle two different type of requests, this is something your routing should handle."}], "answers": [{"comments": [{"owner": {"reputation": 39050, "user_id": 2336231, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/d7kOQ.jpg?s=128&g=1", "display_name": "BroiSatse", "link": "https://stackoverflow.com/users/2336231/broisatse"}, "edited": false, "score": 0, "creation_date": 1438771180, "post_id": 31829972, "comment_id": 51582599, "body": "id is accessible. Otherwise it would raise &#39;undefined local variable or method`"}, {"owner": {"reputation": 91, "user_id": 5061740, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-iPqLwqz9U0M/AAAAAAAAAAI/AAAAAAAAAFM/pz61ZlmCL6o/photo.jpg?sz=128", "display_name": "gyohannes", "link": "https://stackoverflow.com/users/5061740/gyohannes"}, "reply_to_user": {"reputation": 39050, "user_id": 2336231, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/d7kOQ.jpg?s=128&g=1", "display_name": "BroiSatse", "link": "https://stackoverflow.com/users/2336231/broisatse"}, "edited": false, "score": 0, "creation_date": 1438771533, "post_id": 31829972, "comment_id": 51582839, "body": "Can you tell me where the id is defined inside the if request.post? block?"}, {"owner": {"reputation": 39050, "user_id": 2336231, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/d7kOQ.jpg?s=128&g=1", "display_name": "BroiSatse", "link": "https://stackoverflow.com/users/2336231/broisatse"}, "edited": false, "score": 0, "creation_date": 1438771746, "post_id": 31829972, "comment_id": 51583000, "body": "It doesn&#39;t need to be defined in this block, code outside of this block is also executed, including the bit you told him to move."}, {"owner": {"reputation": 125, "user_id": 4601048, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/e9901c303e3acd9b4ad67eccd5871396?s=128&d=identicon&r=PG&f=1", "display_name": "Rabah Hamzah", "link": "https://stackoverflow.com/users/4601048/rabah-hamzah"}, "edited": false, "score": 0, "creation_date": 1438774056, "post_id": 31829972, "comment_id": 51584463, "body": "Thank you for your answer, but I meant to say that the id isn&#39;t passed by the params, if you check the production log, you notice that the id is missing. I need to know how can I pass this id with the post params."}], "tags": [], "owner": {"reputation": 91, "user_id": 5061740, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-iPqLwqz9U0M/AAAAAAAAAAI/AAAAAAAAAFM/pz61ZlmCL6o/photo.jpg?sz=128", "display_name": "gyohannes", "link": "https://stackoverflow.com/users/5061740/gyohannes"}, "is_accepted": false, "score": 0, "last_activity_date": 1438770707, "creation_date": 1438770707, "answer_id": 31829972, "question_id": 31828982, "link": "https://stackoverflow.com/questions/31828982/ruby-on-rails-params-lost-after-redirect/31829972#31829972", "title": "Ruby On Rails, params lost after redirect", "body": "<p>The id Variable in </p>\n\n<pre><code>redirect_to :controller =&gt; 'parent_wise_fee_payments', :action =&gt; 'pay_all_fees', :id=&gt;id\n</code></pre>\n\n<p>id not accessible when request is post. Assign the id variable inside the if request.post? block</p>\n\n<pre><code>if request.post?\nif params[:id].present?\n  id = params[:id]\nend\nthe rest of your code\nend\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 125, "user_id": 4601048, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/e9901c303e3acd9b4ad67eccd5871396?s=128&d=identicon&r=PG&f=1", "display_name": "Rabah Hamzah", "link": "https://stackoverflow.com/users/4601048/rabah-hamzah"}, "edited": false, "score": 0, "creation_date": 1438778798, "post_id": 31832788, "comment_id": 51587764, "body": "Thank you, this way I can use student_id to calculate id."}], "tags": [], "owner": {"reputation": 702, "user_id": 3640056, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/eca89ea945abf236fc6a465e454729a2?s=128&d=identicon&r=PG&f=1", "display_name": "user3640056", "link": "https://stackoverflow.com/users/3640056/user3640056"}, "is_accepted": true, "score": 2, "last_activity_date": 1438778300, "creation_date": 1438778300, "answer_id": 31832788, "question_id": 31828982, "link": "https://stackoverflow.com/questions/31828982/ruby-on-rails-params-lost-after-redirect/31832788#31832788", "title": "Ruby On Rails, params lost after redirect", "body": "<p>Try this:</p>\n\n<pre><code> if request.post?\n        student_id=params[:multi_fees_transaction][\"student_id\"]\n..........\n      redirect_to :controller =&gt; 'parent_wise_fee_payments', :action =&gt; 'pay_all_fees', :student_id=&gt;student_id\n</code></pre>\n\n<p>This way you can use student_id to get the id or something.</p>\n"}], "owner": {"reputation": 125, "user_id": 4601048, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/e9901c303e3acd9b4ad67eccd5871396?s=128&d=identicon&r=PG&f=1", "display_name": "Rabah Hamzah", "link": "https://stackoverflow.com/users/4601048/rabah-hamzah"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1029, "favorite_count": 0, "accepted_answer_id": 31832788, "answer_count": 2, "score": -1, "last_activity_date": 1438778300, "creation_date": 1438768148, "last_edit_date": 1438775166, "question_id": 31828982, "link": "https://stackoverflow.com/questions/31828982/ruby-on-rails-params-lost-after-redirect", "title": "Ruby On Rails, params lost after redirect", "body": "<p>I have a page where the user pays fees, and on submit gets redirected to the same page showing the payment done. I'm passing the id on  redirect, but it is lost which is causing an error.</p>\n\n<p>Here is the controller action:</p>\n\n<pre><code>def pay_all_fees \n\n    @target_action='pay_all_fees'\n    @target_controller='parent_wise_fee_payments'\n        if params[:id].present?\n      id = params[:id]\n      else id = 4\n\n       end\n\n      @students=Student.find_all_by_sibling_id(Guardian.find(id).ward_id)\n      @guardian = Guardian.find(id)\n      @students.each do |student|\n            fetch_all_fees\n\n      end\n\n      if request.post?\n      status=true\n      MultiFeesTransaction.transaction do\n        multi_fees_transaction= MultiFeesTransaction.create(params[:multi_fees_transaction])\n        begin\n          finance_transactions=FinanceTransaction.create!(params[:transactions].values)\n        rescue Exception =&gt; e\n          status=false\n        end\n\n        if status and (multi_fees_transaction.valid? &amp;&amp; finance_transactions.all?(&amp;:valid?))\n          multi_fees_transaction.finance_transactions=finance_transactions\n          flash[:notice]=\"#{t('fees_paid')}\"\n        else\n          flash[:notice]=\"#{t('fee_payment_failed')}\"\n          raise ActiveRecord::Rollback\n        end\n      end\n      redirect_to :controller =&gt; 'parent_wise_fee_payments', :action =&gt; 'pay_all_fees', :id=&gt;id\n    end\n      get_paid_fees\n   end\n</code></pre>\n\n<p>And this is the error in the production log:</p>\n\n<pre><code>Processing ParentWiseFeePaymentsController#pay_all_fees (for 178.135.80.106 at 2015-08-03 13:11:29) [POST]\n  Parameters: {\"multi_fees_transaction\"=&gt;{\"student_id\"=&gt;\"4\", \"payment_mode\"=&gt;\"Cash\", \"payment_note\"=&gt;\"\", \"amount\"=&gt;\"500.00\", \"transaction_date\"=&gt;\"2015-08-03\"}, \"controller\"=&gt;\"parent_wise_fee_payments\", \"transactions\"=&gt;{\"4\"=&gt;{\"payee_type\"=&gt;\"Student\", \"title\"=&gt;\"Receipt No.. (Multiple Fees) F3\", \"payment_mode\"=&gt;\"Cash\", \"finance_id\"=&gt;\"3\", \"category_id\"=&gt;\"14\", \"payment_note\"=&gt;\"\", \"payee_id\"=&gt;\"4\", \"amount\"=&gt;\"\", \"finance_type\"=&gt;\"FinanceFee\", \"transaction_date\"=&gt;\"2015-08-03\"}, \"2\"=&gt;{\"payee_type\"=&gt;\"Student\", \"title\"=&gt;\"Receipt No.. (Multiple Fees) F3\", \"payment_mode\"=&gt;\"Cash\", \"finance_id\"=&gt;\"3\", \"category_id\"=&gt;\"14\", \"payment_note\"=&gt;\"\", \"payee_id\"=&gt;\"1\", \"amount\"=&gt;\"500\", \"finance_type\"=&gt;\"FinanceFee\", \"transaction_date\"=&gt;\"2015-08-03\"}}, \"action\"=&gt;\"pay_all_fees\", \"authenticity_token\"=&gt;\"ns37sH/tD/0i5PyMLGfG6bzEb2SHgjwJQGMuV3i3cNE=\", \"transaction_date\"=&gt;\"2015-08-03\"}\nUsername : admin Role : Admin\nRendering template within layouts/application\nRendering parent_wise_fee_payments/pay_all_fees\n\nActionView::TemplateError (undefined method `full_name' for nil:NilClass) on line #31 of vendor/plugins/acme_parent_wise_fee_payment/app/views/parent_wise_fee_payments/pay_all_fees.html.erb:\n28:       &lt;div class=\"val themed_text\"&gt;\n29:         &lt;span&gt;:&lt;/span&gt;\n30:           &lt;div class=\"val-align\"&gt;\n31:             &lt;%= @guardian.full_name %&gt;\n32:           &lt;/div&gt;\n33:       &lt;/div&gt;\n34: \n</code></pre>\n\n<p>So the id is null after redirect. You can notice from the production log that the id is missing after action \"pay_all_fees\". Could you please help me fix this? Is there a way to force passing the id with the authenticity token for example?</p>\n\n<p>UPDATE:</p>\n\n<p>Before getting to this page, the user searches for a guardian, so I'm passing the id from the search page to the current page. Now I need this same id after redirect, I just don't know how.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "rest", "parse-platform", "stripe-payments"], "comments": [{"owner": {"reputation": 6190, "user_id": 5029266, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/7d4922cf09a8b3d3195cd4d848091ba3?s=128&d=identicon&r=PG", "display_name": "EugZol", "link": "https://stackoverflow.com/users/5029266/eugzol"}, "edited": false, "score": 0, "creation_date": 1438791998, "post_id": 31828824, "comment_id": 51597455, "body": "What exactly do you want to achieve with Parse REST API?"}, {"owner": {"reputation": 2865, "user_id": 3670235, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/9ff2385d34ead2ef2401ee979d6c3b97?s=128&d=identicon&r=PG&f=1", "display_name": "user3670235", "link": "https://stackoverflow.com/users/3670235/user3670235"}, "reply_to_user": {"reputation": 6190, "user_id": 5029266, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/7d4922cf09a8b3d3195cd4d848091ba3?s=128&d=identicon&r=PG", "display_name": "EugZol", "link": "https://stackoverflow.com/users/5029266/eugzol"}, "edited": false, "score": 0, "creation_date": 1438797470, "post_id": 31828824, "comment_id": 51600661, "body": "i already implemented the log in and log out for Parse Rest API, but once logged in i want the user to connect with stripe and the their stripe keys will be then saved in there account."}, {"owner": {"reputation": 6190, "user_id": 5029266, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/7d4922cf09a8b3d3195cd4d848091ba3?s=128&d=identicon&r=PG", "display_name": "EugZol", "link": "https://stackoverflow.com/users/5029266/eugzol"}, "edited": false, "score": 0, "creation_date": 1438800204, "post_id": 31828824, "comment_id": 51602276, "body": "Okay, what library do you use for Parse REST API? Could you show what does that login/logout code look like?"}, {"owner": {"reputation": 2865, "user_id": 3670235, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/9ff2385d34ead2ef2401ee979d6c3b97?s=128&d=identicon&r=PG&f=1", "display_name": "user3670235", "link": "https://stackoverflow.com/users/3670235/user3670235"}, "reply_to_user": {"reputation": 6190, "user_id": 5029266, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/7d4922cf09a8b3d3195cd4d848091ba3?s=128&d=identicon&r=PG", "display_name": "EugZol", "link": "https://stackoverflow.com/users/5029266/eugzol"}, "edited": false, "score": 0, "creation_date": 1438800528, "post_id": 31828824, "comment_id": 51602495, "body": "yeah sure ill gist it. and also im not using a library or gem. im using <code>gem httparty</code> to call the api. heres the log in and log out. <a href=\"https://gist.github.com/anonymous/2bd7ca84081605239f5d\" rel=\"nofollow noreferrer\">gist.github.com/anonymous/2bd7ca84081605239f5d</a>"}, {"owner": {"reputation": 6190, "user_id": 5029266, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/7d4922cf09a8b3d3195cd4d848091ba3?s=128&d=identicon&r=PG", "display_name": "EugZol", "link": "https://stackoverflow.com/users/5029266/eugzol"}, "edited": false, "score": 0, "creation_date": 1438800785, "post_id": 31828824, "comment_id": 51602678, "body": "Oh, okay. So your question is: what API method could you use to store user data? Because it seems you know <i>how</i> to use it."}, {"owner": {"reputation": 2865, "user_id": 3670235, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/9ff2385d34ead2ef2401ee979d6c3b97?s=128&d=identicon&r=PG&f=1", "display_name": "user3670235", "link": "https://stackoverflow.com/users/3670235/user3670235"}, "reply_to_user": {"reputation": 6190, "user_id": 5029266, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/7d4922cf09a8b3d3195cd4d848091ba3?s=128&d=identicon&r=PG", "display_name": "EugZol", "link": "https://stackoverflow.com/users/5029266/eugzol"}, "edited": false, "score": 0, "creation_date": 1438801682, "post_id": 31828824, "comment_id": 51603219, "body": "well my question is also how i can retrieve the Stripe Keys after Oauth. i first integrated oauth with Devise, but now obviously i dont need devise bevause i have Parse taking its place."}], "answers": [{"comments": [{"owner": {"reputation": 2865, "user_id": 3670235, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/9ff2385d34ead2ef2401ee979d6c3b97?s=128&d=identicon&r=PG&f=1", "display_name": "user3670235", "link": "https://stackoverflow.com/users/3670235/user3670235"}, "edited": false, "score": 0, "creation_date": 1438803556, "post_id": 31841176, "comment_id": 51604244, "body": "why wouldnt i need to get rid of devise? i dont want to use the login/registration anymore. i have Parse as my log in."}, {"owner": {"reputation": 2865, "user_id": 3670235, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/9ff2385d34ead2ef2401ee979d6c3b97?s=128&d=identicon&r=PG&f=1", "display_name": "user3670235", "link": "https://stackoverflow.com/users/3670235/user3670235"}, "edited": false, "score": 0, "creation_date": 1438803684, "post_id": 31841176, "comment_id": 51604333, "body": "i already have users on Parse, so i want them to be able to log in and then connect with stripe."}, {"owner": {"reputation": 6190, "user_id": 5029266, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/7d4922cf09a8b3d3195cd4d848091ba3?s=128&d=identicon&r=PG", "display_name": "EugZol", "link": "https://stackoverflow.com/users/5029266/eugzol"}, "reply_to_user": {"reputation": 2865, "user_id": 3670235, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/9ff2385d34ead2ef2401ee979d6c3b97?s=128&d=identicon&r=PG&f=1", "display_name": "user3670235", "link": "https://stackoverflow.com/users/3670235/user3670235"}, "edited": false, "score": 0, "creation_date": 1438803685, "post_id": 31841176, "comment_id": 51604334, "body": "But you want your users to log in via Stripe, or not?"}, {"owner": {"reputation": 2865, "user_id": 3670235, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/9ff2385d34ead2ef2401ee979d6c3b97?s=128&d=identicon&r=PG&f=1", "display_name": "user3670235", "link": "https://stackoverflow.com/users/3670235/user3670235"}, "edited": false, "score": 0, "creation_date": 1438803730, "post_id": 31841176, "comment_id": 51604358, "body": "Yes but just do Stripe Connect, and then ill get there keys, and ill store them in Parse under their user"}, {"owner": {"reputation": 6190, "user_id": 5029266, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/7d4922cf09a8b3d3195cd4d848091ba3?s=128&d=identicon&r=PG", "display_name": "EugZol", "link": "https://stackoverflow.com/users/5029266/eugzol"}, "reply_to_user": {"reputation": 2865, "user_id": 3670235, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/9ff2385d34ead2ef2401ee979d6c3b97?s=128&d=identicon&r=PG&f=1", "display_name": "user3670235", "link": "https://stackoverflow.com/users/3670235/user3670235"}, "edited": false, "score": 0, "creation_date": 1438803742, "post_id": 31841176, "comment_id": 51604369, "body": "Ah, then you need <b>both</b> Devise and Parse. Devise is handling Stripe Connect, and then you need to save user&#39;s Stripe credentials to Parse. So instead of @user.update_attributes(...) you need to send the same information to Parse."}, {"owner": {"reputation": 6190, "user_id": 5029266, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/7d4922cf09a8b3d3195cd4d848091ba3?s=128&d=identicon&r=PG", "display_name": "EugZol", "link": "https://stackoverflow.com/users/5029266/eugzol"}, "reply_to_user": {"reputation": 2865, "user_id": 3670235, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/9ff2385d34ead2ef2401ee979d6c3b97?s=128&d=identicon&r=PG&f=1", "display_name": "user3670235", "link": "https://stackoverflow.com/users/3670235/user3670235"}, "edited": false, "score": 0, "creation_date": 1438803806, "post_id": 31841176, "comment_id": 51604407, "body": "Well, you can of course manually implement OAuth. But it&#39;s not very simple, and it&#39;s much easier to just keep using Devise."}, {"owner": {"reputation": 2865, "user_id": 3670235, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/9ff2385d34ead2ef2401ee979d6c3b97?s=128&d=identicon&r=PG&f=1", "display_name": "user3670235", "link": "https://stackoverflow.com/users/3670235/user3670235"}, "edited": false, "score": 0, "creation_date": 1438803853, "post_id": 31841176, "comment_id": 51604433, "body": "gotcha, thats what i was wondering. I was thinking i would just manipulate the #stripe_connect and make it so that it saves to current user."}, {"owner": {"reputation": 2865, "user_id": 3670235, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/9ff2385d34ead2ef2401ee979d6c3b97?s=128&d=identicon&r=PG&f=1", "display_name": "user3670235", "link": "https://stackoverflow.com/users/3670235/user3670235"}, "edited": false, "score": 0, "creation_date": 1438803886, "post_id": 31841176, "comment_id": 51604448, "body": "how do i get rid of the login/registration devise gives"}, {"owner": {"reputation": 6190, "user_id": 5029266, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/7d4922cf09a8b3d3195cd4d848091ba3?s=128&d=identicon&r=PG", "display_name": "EugZol", "link": "https://stackoverflow.com/users/5029266/eugzol"}, "reply_to_user": {"reputation": 2865, "user_id": 3670235, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/9ff2385d34ead2ef2401ee979d6c3b97?s=128&d=identicon&r=PG&f=1", "display_name": "user3670235", "link": "https://stackoverflow.com/users/3670235/user3670235"}, "edited": false, "score": 0, "creation_date": 1438804072, "post_id": 31841176, "comment_id": 51604569, "body": "@user3670235 wait some time, I will update my answer with a general idea of how you do that later today."}, {"owner": {"reputation": 6190, "user_id": 5029266, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/7d4922cf09a8b3d3195cd4d848091ba3?s=128&d=identicon&r=PG", "display_name": "EugZol", "link": "https://stackoverflow.com/users/5029266/eugzol"}, "reply_to_user": {"reputation": 2865, "user_id": 3670235, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/9ff2385d34ead2ef2401ee979d6c3b97?s=128&d=identicon&r=PG&f=1", "display_name": "user3670235", "link": "https://stackoverflow.com/users/3670235/user3670235"}, "edited": false, "score": 0, "creation_date": 1438804955, "post_id": 31841176, "comment_id": 51605056, "body": "@user3670235 Added to my answer."}, {"owner": {"reputation": 2865, "user_id": 3670235, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/9ff2385d34ead2ef2401ee979d6c3b97?s=128&d=identicon&r=PG&f=1", "display_name": "user3670235", "link": "https://stackoverflow.com/users/3670235/user3670235"}, "edited": false, "score": 0, "creation_date": 1438810110, "post_id": 31841176, "comment_id": 51607822, "body": "would i get rid of <code>devise_for :users, :controllers =&gt; { :omniauth_callbacks =&gt; &quot;omniauth_callbacks&quot; }</code>  in  <code>routes.rb</code>"}, {"owner": {"reputation": 6190, "user_id": 5029266, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/7d4922cf09a8b3d3195cd4d848091ba3?s=128&d=identicon&r=PG", "display_name": "EugZol", "link": "https://stackoverflow.com/users/5029266/eugzol"}, "reply_to_user": {"reputation": 2865, "user_id": 3670235, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/9ff2385d34ead2ef2401ee979d6c3b97?s=128&d=identicon&r=PG&f=1", "display_name": "user3670235", "link": "https://stackoverflow.com/users/3670235/user3670235"}, "edited": false, "score": 0, "creation_date": 1438810776, "post_id": 31841176, "comment_id": 51608108, "body": "yes, are you feeling sad for it? don&#39;t worry, it will find another programmer to use it after you delete it, and will make home at some other project :)"}, {"owner": {"reputation": 2865, "user_id": 3670235, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/9ff2385d34ead2ef2401ee979d6c3b97?s=128&d=identicon&r=PG&f=1", "display_name": "user3670235", "link": "https://stackoverflow.com/users/3670235/user3670235"}, "edited": false, "score": 0, "creation_date": 1438811005, "post_id": 31841176, "comment_id": 51608208, "body": "also your answer says to delete devise totally?"}, {"owner": {"reputation": 6190, "user_id": 5029266, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/7d4922cf09a8b3d3195cd4d848091ba3?s=128&d=identicon&r=PG", "display_name": "EugZol", "link": "https://stackoverflow.com/users/5029266/eugzol"}, "reply_to_user": {"reputation": 2865, "user_id": 3670235, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/9ff2385d34ead2ef2401ee979d6c3b97?s=128&d=identicon&r=PG&f=1", "display_name": "user3670235", "link": "https://stackoverflow.com/users/3670235/user3670235"}, "edited": false, "score": 0, "creation_date": 1438811211, "post_id": 31841176, "comment_id": 51608311, "body": "yep, that what you asked, and I gave you a solution that doesn&#39;t require devise. or do you still need it for something?"}, {"owner": {"reputation": 2865, "user_id": 3670235, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/9ff2385d34ead2ef2401ee979d6c3b97?s=128&d=identicon&r=PG&f=1", "display_name": "user3670235", "link": "https://stackoverflow.com/users/3670235/user3670235"}, "edited": false, "score": 0, "creation_date": 1438811328, "post_id": 31841176, "comment_id": 51608357, "body": "no i dont think i do need it. is there a tutorial where it says how to remove it from an application?"}, {"owner": {"reputation": 6190, "user_id": 5029266, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/7d4922cf09a8b3d3195cd4d848091ba3?s=128&d=identicon&r=PG", "display_name": "EugZol", "link": "https://stackoverflow.com/users/5029266/eugzol"}, "reply_to_user": {"reputation": 2865, "user_id": 3670235, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/9ff2385d34ead2ef2401ee979d6c3b97?s=128&d=identicon&r=PG&f=1", "display_name": "user3670235", "link": "https://stackoverflow.com/users/3670235/user3670235"}, "edited": false, "score": 0, "creation_date": 1438811443, "post_id": 31841176, "comment_id": 51608398, "body": "<a href=\"http://stackoverflow.com/questions/6833161/ruby-how-to-uninstall-devise\" title=\"ruby how to uninstall devise\">stackoverflow.com/questions/6833161/&hellip;</a> \u2013 there&#39;s a pretty good answer to that"}, {"owner": {"reputation": 2865, "user_id": 3670235, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/9ff2385d34ead2ef2401ee979d6c3b97?s=128&d=identicon&r=PG&f=1", "display_name": "user3670235", "link": "https://stackoverflow.com/users/3670235/user3670235"}, "reply_to_user": {"reputation": 6190, "user_id": 5029266, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/7d4922cf09a8b3d3195cd4d848091ba3?s=128&d=identicon&r=PG", "display_name": "EugZol", "link": "https://stackoverflow.com/users/5029266/eugzol"}, "edited": false, "score": 0, "creation_date": 1438822789, "post_id": 31841176, "comment_id": 51611674, "body": "Let us <a href=\"http://chat.stackoverflow.com/rooms/85255/discussion-between-user3670235-and-eugzol\">continue this discussion in chat</a>."}], "tags": [], "owner": {"reputation": 6190, "user_id": 5029266, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/7d4922cf09a8b3d3195cd4d848091ba3?s=128&d=identicon&r=PG", "display_name": "EugZol", "link": "https://stackoverflow.com/users/5029266/eugzol"}, "is_accepted": true, "score": 0, "last_activity_date": 1438804710, "last_edit_date": 1438804710, "creation_date": 1438802818, "answer_id": 31841176, "question_id": 31828824, "link": "https://stackoverflow.com/questions/31828824/stripe-connect-with-parse/31841176#31841176", "title": "Stripe Connect With Parse", "body": "<p>You don't need to remove devise, because it's handling user authentication for your site. Parse, on the other hand, in handling your data (basically, saving and restoring it).</p>\n\n<p>In your <code>#stripe_connect</code> method you seem to successfully receive data about user, which Stripe gives you after user logs in.</p>\n\n<p>If you want to save that data, learn how to use <a href=\"https://parse.com/docs/rest/guide/#objects\" rel=\"nofollow\">Objects API</a>.</p>\n\n<p>If you want to save information in your own database (instead of Parse), just forget about Parse, your code is fine.</p>\n\n<p><strong>UPD</strong>. If you are using <a href=\"https://github.com/isaacsanders/omniauth-stripe-connect\" rel=\"nofollow\">omniauth-stripe-connect</a>, you can get rid of Devise (because you don't need its broad functions, just stripe connect).</p>\n\n<p>Following instructions in the documentation, add the following to <code>config/initializers/omniauth.rb</code>:</p>\n\n<pre><code>Rails.application.config.middleware.use OmniAuth::Builder do\n  provider :stripe_connect, ENV['STRIPE_CONNECT_CLIENT_ID'], ENV['STRIPE_SECRET']\nend\nOmniAuth.config.logger = Rails.logger\n</code></pre>\n\n<p>Then add to your <code>routes.rb</code>:</p>\n\n<pre><code>get '/auth/:provider/callback', to: 'sessions#create'\n</code></pre>\n\n<p>Then rename your controller to <code>SessionsController</code> and your <code>stripe_connect</code> method to <code>create</code>. You will have access to the same <code>request.env['omniauth.auth']</code> hash.</p>\n"}], "owner": {"reputation": 2865, "user_id": 3670235, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/9ff2385d34ead2ef2401ee979d6c3b97?s=128&d=identicon&r=PG&f=1", "display_name": "user3670235", "link": "https://stackoverflow.com/users/3670235/user3670235"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 167, "favorite_count": 0, "accepted_answer_id": 31841176, "answer_count": 1, "score": 0, "last_activity_date": 1438804710, "creation_date": 1438767735, "question_id": 31828824, "link": "https://stackoverflow.com/questions/31828824/stripe-connect-with-parse", "title": "Stripe Connect With Parse", "body": "<p>i already have a working stripe connect app but instead of Devise now im having trouble wrapping around how to implement Stripe Connect with Parse. </p>\n\n<p>this is what i already have: </p>\n\n<pre><code>class OmniauthCallbacksController &lt; Devise::OmniauthCallbacksController\n  def stripe_connect\n    @user = current_user\n    if @user.update_attributes({\n      provider: request.env[\"omniauth.auth\"].provider,\n      uid: request.env[\"omniauth.auth\"].uid,\n      access_code: request.env[\"omniauth.auth\"].credentials.token,\n      publishable_key: request.env[\"omniauth.auth\"].info.stripe_publishable_key\n    })\n      # anything else you need to do in response..\n      sign_in_and_redirect @user, :event =&gt; :authentication\n      set_flash_message(:notice, :success, :kind =&gt; \"Stripe\") if is_navigational_format?\n    else\n      session[\"devise.stripe_connect_data\"] = request.env[\"omniauth.auth\"]\n      redirect_to new_user_registration_url\n    end\n  end\nend\n</code></pre>\n\n<p>Also my routes i have: </p>\n\n<pre><code>devise_for :users, :controllers =&gt; { :omniauth_callbacks =&gt; \"omniauth_callbacks\" }\n</code></pre>\n\n<p>I just want to know how i can manipulate this so i can use it with Parse RestApi, thanks.</p>\n"}, {"tags": ["php", "ruby", "perl", "soap"], "comments": [{"owner": {"reputation": 547, "user_id": 1098397, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/821a376ddcbf5c0d4c20272ae631882f?s=128&d=identicon&r=PG&f=1", "display_name": "Rob G", "link": "https://stackoverflow.com/users/1098397/rob-g"}, "edited": false, "score": 1, "creation_date": 1438768198, "post_id": 31828785, "comment_id": 51580750, "body": "is the perl running on the same server &amp; as the same user? do you need to set a proxy server? what happens if you try wget <a href=\"http://10.1.10.20:8070/ShoreTelWebSDK/WebService\" rel=\"nofollow noreferrer\">10.1.10.20:8070/ShoreTelWebSDK/WebService</a> as the same user you&#39;re running the php script as?"}, {"owner": {"reputation": 474, "user_id": 2524743, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ZFiSd.jpg?s=128&g=1", "display_name": "Joel Lewis", "link": "https://stackoverflow.com/users/2524743/joel-lewis"}, "reply_to_user": {"reputation": 547, "user_id": 1098397, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/821a376ddcbf5c0d4c20272ae631882f?s=128&d=identicon&r=PG&f=1", "display_name": "Rob G", "link": "https://stackoverflow.com/users/1098397/rob-g"}, "edited": false, "score": 0, "creation_date": 1438768452, "post_id": 31828785, "comment_id": 51580916, "body": "@RobGudgeon Yes they are the same server.  It shouldn&#39;t nee a proxy since it works with the Perl script.  A wget results in a error.  I am not sure how the Perl script is pulling it that works."}, {"owner": {"reputation": 547, "user_id": 1098397, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/821a376ddcbf5c0d4c20272ae631882f?s=128&d=identicon&r=PG&f=1", "display_name": "Rob G", "link": "https://stackoverflow.com/users/1098397/rob-g"}, "edited": false, "score": 0, "creation_date": 1438768716, "post_id": 31828785, "comment_id": 51581078, "body": "The perl is using a proxy server :) What&#39;s the wget error?   Try this, replacing the x.x.x.x with whatever proxy server the perl is using:  $client = new SOAPClient($soap_url,                          array(                                &#39;proxy_host&#39;     =&gt; x.x.x.x,                                &#39;proxy_port&#39;     =&gt; 8070,                                &#39;trace&#39;          =&gt; 1                                )                          );"}, {"owner": {"reputation": 474, "user_id": 2524743, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ZFiSd.jpg?s=128&g=1", "display_name": "Joel Lewis", "link": "https://stackoverflow.com/users/2524743/joel-lewis"}, "reply_to_user": {"reputation": 547, "user_id": 1098397, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/821a376ddcbf5c0d4c20272ae631882f?s=128&d=identicon&r=PG&f=1", "display_name": "Rob G", "link": "https://stackoverflow.com/users/1098397/rob-g"}, "edited": false, "score": 0, "creation_date": 1438768913, "post_id": 31828785, "comment_id": 51581168, "body": "@RobGudgeon it was a 400 error."}, {"owner": {"reputation": 547, "user_id": 1098397, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/821a376ddcbf5c0d4c20272ae631882f?s=128&d=identicon&r=PG&f=1", "display_name": "Rob G", "link": "https://stackoverflow.com/users/1098397/rob-g"}, "edited": false, "score": 0, "creation_date": 1438769007, "post_id": 31828785, "comment_id": 51581228, "body": "post the full error/output"}, {"owner": {"reputation": 474, "user_id": 2524743, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ZFiSd.jpg?s=128&g=1", "display_name": "Joel Lewis", "link": "https://stackoverflow.com/users/2524743/joel-lewis"}, "reply_to_user": {"reputation": 547, "user_id": 1098397, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/821a376ddcbf5c0d4c20272ae631882f?s=128&d=identicon&r=PG&f=1", "display_name": "Rob G", "link": "https://stackoverflow.com/users/1098397/rob-g"}, "edited": false, "score": 0, "creation_date": 1438769272, "post_id": 31828785, "comment_id": 51581371, "body": "@RobGudgeon The wget response was :HTTP request sent, awaiting response... 400 Bad Request 2015-08-05 04:07:32 ERROR 400: Bad Request."}, {"owner": {"reputation": 474, "user_id": 2524743, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ZFiSd.jpg?s=128&g=1", "display_name": "Joel Lewis", "link": "https://stackoverflow.com/users/2524743/joel-lewis"}, "reply_to_user": {"reputation": 547, "user_id": 1098397, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/821a376ddcbf5c0d4c20272ae631882f?s=128&d=identicon&r=PG&f=1", "display_name": "Rob G", "link": "https://stackoverflow.com/users/1098397/rob-g"}, "edited": false, "score": 0, "creation_date": 1438769291, "post_id": 31828785, "comment_id": 51581386, "body": "@RobGudgeon adding the proxy did not have any effect on the error message."}, {"owner": {"reputation": 547, "user_id": 1098397, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/821a376ddcbf5c0d4c20272ae631882f?s=128&d=identicon&r=PG&f=1", "display_name": "Rob G", "link": "https://stackoverflow.com/users/1098397/rob-g"}, "reply_to_user": {"reputation": 474, "user_id": 2524743, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ZFiSd.jpg?s=128&g=1", "display_name": "Joel Lewis", "link": "https://stackoverflow.com/users/2524743/joel-lewis"}, "edited": false, "score": 0, "creation_date": 1438769341, "post_id": 31828785, "comment_id": 51581422, "body": "Let us <a href=\"http://chat.stackoverflow.com/rooms/85191/discussion-between-rob-gudgeon-and-joel-lewis\">continue this discussion in chat</a>."}], "answers": [{"tags": [], "owner": {"reputation": 474, "user_id": 2524743, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ZFiSd.jpg?s=128&g=1", "display_name": "Joel Lewis", "link": "https://stackoverflow.com/users/2524743/joel-lewis"}, "is_accepted": true, "score": 1, "last_activity_date": 1438772137, "creation_date": 1438772137, "answer_id": 31830519, "question_id": 31828785, "link": "https://stackoverflow.com/questions/31828785/convert-a-ruby-perl-soap-request-to-php/31830519#31830519", "title": "Convert a Ruby/Perl Soap Request to PHP", "body": "<p>I was finaly able to make this work with some help from RobGudeon. It looks like we needed to use the URL the Ruby version wich matched what PHP was expecting.  The working script is:</p>\n\n<pre><code>try\n{\n$soap_url = 'http://xx.x.xx.xx:8070/ShoreTelWebSDK?wsdl';\n$client = new SOAPClient($soap_url, array( 'proxy_host' =&gt; 'xx.x.xx.xx', 'proxy_port' =&gt; 8070, 'trace' =&gt; 1 ) );\n$client = new SoapClient($soap_url);\n\n$header = new SoapHeader(\n\n        'http://www.ShoreTel.com/ProServices/SDK/Web',\n        'RegisterClient'\n\n    );\n    $client-&gt;__setSoapHeaders($header);\n    var_dump($client-&gt;RegisterClient(array(\n            'clientName' =&gt; 'xx.xx.xx'\n        )));    \n}\ncatch (Exception $e)\n{\n   print_r($e);\n}\n</code></pre>\n"}], "owner": {"reputation": 474, "user_id": 2524743, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ZFiSd.jpg?s=128&g=1", "display_name": "Joel Lewis", "link": "https://stackoverflow.com/users/2524743/joel-lewis"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 218, "favorite_count": 0, "accepted_answer_id": 31830519, "answer_count": 1, "score": 1, "last_activity_date": 1438772137, "creation_date": 1438767623, "last_edit_date": 1438771706, "question_id": 31828785, "link": "https://stackoverflow.com/questions/31828785/convert-a-ruby-perl-soap-request-to-php", "title": "Convert a Ruby/Perl Soap Request to PHP", "body": "<p>I have a Perl script that communicates with a web soap server and does great.  However I need to get this same functionality in a PHP application and am having a lot of trouble converting this over.</p>\n\n<p>The working Perl looks like this:</p>\n\n<pre><code>use warnings;\nuse SOAP::Lite;\nuse CGI;\nuse Data::Dumper;\nsub  trim { my $s = shift; $s =~ s/^\\s+|\\s+$//g; return $s };\nprint \"Content-type:text/html\\n\\n\";\n\n# Use SoapLite to create a connection to our Web service.  URI is the namespace for our service,\n# proxy is the endpoint of our service.  The \"on_action\" is necessary to reformat SoapLite's\n# SOAP request to match what a .NET service needs.\n\nmy $myWebService = SOAP::Lite\n  -&gt; uri('http://www.ShoreTel.com/ProServices/SDK/Web')\n  -&gt; proxy('http://xx.x.xx.xx:8070/ShoreTelWebSDK/WebService')\n  -&gt; on_action(sub {sprintf '%s/ShoreTelWebService/%s', $_[0], $_[1]});\n\nmy $query = new CGI;\nmy $ip = $query-&gt;remote_host;                    # IP address of remote party...use later as unique identifier\n\n\n    # To use our service, we need to register ourselves as a client...use remote IP address\n    # as a unique name for association to this session.\n\n    my $regClientResult = $myWebService-&gt;RegisterClient(SOAP::Data-&gt;name('clientName' =&gt; $ip));\n    if ($regClientResult-&gt;fault)\n    {\n      print '&lt;p&gt;FAULT', $myClientID-&gt;faultcode, ', ', $myClientID-&gt;faultstring;\n    }\n    else\n    {\n      # Retrieve client ID which we will be using for subsequent communication.\n\n      $myClientID = $regClientResult-&gt;valueof('//RegisterClientResponse/RegisterClientResult/');\n      print $myClientID;\n\n    }\n</code></pre>\n\n<p>And gives the expected result of producing a Client ID for the session.</p>\n\n<p>The following script also does the same thing in ruby:</p>\n\n<pre><code>require \"soap/wsdlDriver\"\nrequire 'optparse'\nrequire 'ostruct'\nrequire 'pp'\n\n\ndef has_events(events)\n  return (events[\"GetEventsResult\"] != nil) &amp;&amp; (events[\"GetEventsResult\"][\"ShoreTelEventBase\"] != nil)\nend\n\n\n\nbegin\n  options.parse!(ARGV)\nrescue OptionParser::ParseError =&gt; e\n  puts e\nend\n\n# create wsdl driver for SDK\nwsdl = \"http://10.1.10.20:8070/ShoreTelWebSDK?wsdl\"\ndriver = SOAP::WSDLDriverFactory.new(wsdl).create_rpc_driver\ndriver.wiredump_file_base = \"/var/www/WebSDK.out\"\n\n# register with the SDK\nid = driver.RegisterClient(\"clientName\" =&gt;\"ruby\")\nhandle = id.registerClientResult\nprint \"\\nClient ID \", handle, \" has been registered.\\n\\n\"\n</code></pre>\n\n<p>However  attempt at a php version looks like this:</p>\n\n<pre><code>try\n{\n$soap_url = 'http://10.1.10.20:8070/ShoreTelWebSDK/WebService';\n$client = new SoapClient($soap_url);\n\n$header = new SoapHeader(\n\n        'http://www.ShoreTel.com/ProServices/SDK/Web',\n        'RegisterClient',\n        array(\n            'clientName' =&gt; 'xx.xx.xx.xxx'\n        )\n    );\n    $client-&gt;__setSoapHeaders($header);\n    var_dump($client-&gt;__getFunctions());    \n}\ncatch (Exception $e)\n{\n   print_r($e);\n}\n</code></pre>\n\n<p>And is giving the following errors:</p>\n\n<blockquote>\n  <p>SoapFault Object ( [message:protected] => SOAP-ERROR: Parsing WSDL:\n  Couldn't load from '<a href=\"http://xx.x.xx.xx:8070/ShoreTelWebSDK/WebService\" rel=\"nofollow\">http://xx.x.xx.xx:8070/ShoreTelWebSDK/WebService</a>'\n  : failed to load external entity\n  \"<a href=\"http://xx.x.xx.xx:8070/ShoreTelWebSDK/WebService\" rel=\"nofollow\">http://xx.x.xx.xx:8070/ShoreTelWebSDK/WebService</a>\"\n  [string:Exception:private] => [code:protected] => 0 [file:protected]\n  => /var/www/cgi-bin/test.php [line:protected] => 7 [trace:Exception:private] => Array ( [0] => Array ( [file] =>\n  /var/www/cgi-bin/test.php [line] => 7 [function] => SoapClient [class]\n  => SoapClient [type] => -> [args] => Array ( [0] => <a href=\"http://xx.x.xx.xx:8070/ShoreTelWebSDK/WebService\" rel=\"nofollow\">http://xx.x.xx.xx:8070/ShoreTelWebSDK/WebService</a> ) ) )\n  [previous:Exception:private] => [faultstring] => SOAP-ERROR: Parsing\n  WSDL: Couldn't load from\n  '<a href=\"http://xx.x.xx.xx:8070/ShoreTelWebSDK/WebService\" rel=\"nofollow\">http://xx.x.xx.xx:8070/ShoreTelWebSDK/WebService</a>' : failed to load\n  external entity \"<a href=\"http://xx.x.xx.xx:8070/ShoreTelWebSDK/WebService\" rel=\"nofollow\">http://xx.x.xx.xx:8070/ShoreTelWebSDK/WebService</a>\"\n  [faultcode] => WSDL )</p>\n</blockquote>\n\n<p>It looks like it is have issues loading the WSDL, but the Perl script doesn't have any issues, how can I translate this to the PHP script?</p>\n\n<p>I also tried the php script like this:</p>\n\n<pre><code>try\n{\n$soap_url = 'http://10.1.10.20:8070/ShoreTelWebSDK?wsdl';\n$client = new SOAPClient($soap_url, array( 'proxy_host' =&gt; '10.1.10.20', 'proxy_port' =&gt; 8070, 'trace' =&gt; 1 ) );\n$client = new SoapClient($soap_url);\n\n$header = new SoapHeader(\n\n        'http://www.ShoreTel.com/ProServices/SDK/Web',\n        'RegisterClient',\n        array(\n            'clientName' =&gt; 'xx.x.xx.xxx'\n        )\n    );\n    $client-&gt;__setSoapHeaders($header);\n    var_dump($client-&gt;__getFunctions());    \n}\ncatch (Exception $e)\n{\n   print_r($e);\n</code></pre>\n\n<p>This resulted in a list of all possible requests the server accepts, but did not process my request.</p>\n"}, {"tags": ["ruby", "memory", "memory-management", "iterator", "out-of-memory"], "comments": [{"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1438768958, "post_id": 31828588, "comment_id": 51581196, "body": "Please explain your code and describe your environment. What is the above code supposed to do? What is <code>$utilities</code>? What is <code>$current_selected_items</code>? Where / how are the items loaded? Is a database / ORM involved? How does the memory bloat / crash look like?"}, {"owner": {"reputation": 11, "user_id": 5152971, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/91ef18ee9e380489902dd9e94bef3b5a?s=128&d=identicon&r=PG&f=1", "display_name": "Third", "link": "https://stackoverflow.com/users/5152971/third"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1438770578, "post_id": 31828588, "comment_id": 51582205, "body": "The code is used in a scripting console within a piece of software (API). This software is a document review platform. Once a user has gone though the documents and flagged which ones are relevant they become current_selected_items. Utilities is a class within the software APi that has custom methods which you can call to perform specific tasks such as dates of items. what we are trying to do is grab each one of theses documents and compare against other documents to filter out duplicates."}, {"owner": {"reputation": 11, "user_id": 5152971, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/91ef18ee9e380489902dd9e94bef3b5a?s=128&d=identicon&r=PG&f=1", "display_name": "Third", "link": "https://stackoverflow.com/users/5152971/third"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1438770581, "post_id": 31828588, "comment_id": 51582206, "body": "when we do this via the iterator each document is loaded and never dropped creating the bloat as there are millions of documents. The eventual crash is out of memory and the execution is terminated."}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1438770848, "post_id": 31828588, "comment_id": 51582378, "body": "Please update your question and add those details. You might also want to remove parts of your code that are not relevant to your question, such as the utilities class."}], "owner": {"reputation": 11, "user_id": 5152971, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/91ef18ee9e380489902dd9e94bef3b5a?s=128&d=identicon&r=PG&f=1", "display_name": "Third", "link": "https://stackoverflow.com/users/5152971/third"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 62, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1438771213, "creation_date": 1438767123, "last_edit_date": 1438771213, "question_id": 31828588, "link": "https://stackoverflow.com/questions/31828588/ruby-iterator-memory-bloat", "title": "Ruby iterator memory bloat", "body": "<p>The code is used in a scripting console within a piece of software (API). This software is a document review platform. Once a user has gone though the documents and flagged which ones are relevant they become current_selected_items. What we are trying to do is grab each one of theses documents and compare against other documents to filter out duplicates. When we do this via the iterator each document is loaded and never dropped creating the bloat as there are millions of documents. The eventual crash is \"out of memory\" and the execution is terminated.</p>\n\n<p>How can we use the iterator but process only a certain amount of documents at a time or set memory usage a max value?</p>\n\n<pre><code>$current_selected_items.each do |item|\n    counter += 1\n    if counter % 5000 == 0\n        processing_elapsed = Time.at(Time.now - start_time).gmtime.strftime(\"%H:%M:%S\")\n        puts \"[#{processing_elapsed}] #{counter}/#{num_items_selected} documents done, #{processed_items.count} duplicates processed\"\n    end\n\n    next if processed_items.include? item\n\n    processed_items &lt;&lt; item\n    dupes = item.get_duplicates\n\n    next if dupes.count == 0\n\n    master_text = item.get_text_object.to_string\n    is_text_consistent = true\n\n    dupes.each do |dupe_item|\n        processed_items &lt;&lt; dupe_item\n\n        dupe_text = dupe_item.get_text_object.to_string\n        if dupe_text == \"\" then next end\n\n        unless master_text.eql? dupe_text\n            is_text_consistent = false\n            break\n        end\n    end\n</code></pre>\n"}, {"tags": ["ruby", "rubycas-client", "rubycas-server"], "answers": [{"tags": [], "owner": {"reputation": 1945, "user_id": 770670, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/96b97ba8e44ff9ba58309e4e64a87f9b?s=128&d=identicon&r=PG", "display_name": "Michael K Madison", "link": "https://stackoverflow.com/users/770670/michael-k-madison"}, "is_accepted": false, "score": 0, "last_activity_date": 1455580558, "creation_date": 1455580558, "answer_id": 35421313, "question_id": 31828423, "link": "https://stackoverflow.com/questions/31828423/authenticate-multiple-application-with-ruby-cas-server/35421313#35421313", "title": "Authenticate multiple application with Ruby CAS Server", "body": "<p>if you understand how your passwords are hashed, all you have to do is make sure that your authenticator hashes the passwords in the same way -- overriding it if you need to.  Take a look at <a href=\"https://github.com/rbCAS/CASino\" rel=\"nofollow\">CASino</a>, it is a CAS server that makes it pretty easy to override authenticators; also it allows multiple data sources to be used simultaneously, be it multiple databases or LDAP. </p>\n"}], "owner": {"reputation": 2683, "user_id": 1977071, "user_type": "registered", "accept_rate": 9, "profile_image": "https://www.gravatar.com/avatar/0eeaa57c826d2f3186aec91d27994421?s=128&d=identicon&r=PG", "display_name": "Deepti Kakade", "link": "https://stackoverflow.com/users/1977071/deepti-kakade"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 97, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1455580558, "creation_date": 1438766634, "question_id": 31828423, "link": "https://stackoverflow.com/questions/31828423/authenticate-multiple-application-with-ruby-cas-server", "title": "Authenticate multiple application with Ruby CAS Server", "body": "<p>I have two different web applications which are already build. Now one new requirement comes i.e Implement Common Authentication. My one application is build in rails and another application is build in Drupal. I have installed <code>ruby-casserver</code>, but for the CAS we need to set Authenticator in <code>config.yml</code> file, I have set that. </p>\n\n<p>But my problem is how to migrate my old users on CAS, because I am storing the username and also password(i.e encrypetd) on CAS server. Encrypted Passwords which are stored in CAS user table are encrypted using SHA1 algorithm. But the oldest user which are on Drupal uses the MD5 for password encryption.</p>\n\n<p>So my question is how to migrate old users on CAS, or how to Design the CAS which can authenticate for Rails and Drupal users.</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 32131, "user_id": 2346461, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/i3xAf.jpg?s=128&g=1", "display_name": "Pavan", "link": "https://stackoverflow.com/users/2346461/pavan"}, "edited": false, "score": 0, "creation_date": 1438765132, "post_id": 31827818, "comment_id": 51578759, "body": "Are you using windows machine?"}, {"owner": {"reputation": 7032, "user_id": 1743174, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/9f871161f754442df697dce1cede77a5?s=128&d=identicon&r=PG&f=1", "display_name": "Dipak Gupta", "link": "https://stackoverflow.com/users/1743174/dipak-gupta"}, "edited": false, "score": 2, "creation_date": 1438765226, "post_id": 31827818, "comment_id": 51578831, "body": "try this <a href=\"http://stackoverflow.com/questions/28312460/object-doesnt-support-this-property-or-method-rails-windows-64bit\" title=\"object doesnt support this property or method rails windows 64bit\">stackoverflow.com/questions/28312460/&hellip;</a> or <a href=\"http://stackoverflow.com/questions/28882182/rails-coffeescript-typeerror-object-doesnt-support-this-property-or-method\" title=\"rails coffeescript typeerror object doesnt support this property or method\">stackoverflow.com/questions/28882182/&hellip;</a>"}, {"owner": {"reputation": 6015, "user_id": 2590090, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/c19c67c6d03ffbe32ddc46bbb1dcd147?s=128&d=identicon&r=PG&f=1", "display_name": "CJAY", "link": "https://stackoverflow.com/users/2590090/cjay"}, "reply_to_user": {"reputation": 32131, "user_id": 2346461, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/i3xAf.jpg?s=128&g=1", "display_name": "Pavan", "link": "https://stackoverflow.com/users/2346461/pavan"}, "edited": false, "score": 0, "creation_date": 1438765235, "post_id": 31827818, "comment_id": 51578835, "body": "@Pavan yes...its windows i am using"}, {"owner": {"reputation": 32131, "user_id": 2346461, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/i3xAf.jpg?s=128&g=1", "display_name": "Pavan", "link": "https://stackoverflow.com/users/2346461/pavan"}, "reply_to_user": {"reputation": 7032, "user_id": 1743174, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/9f871161f754442df697dce1cede77a5?s=128&d=identicon&r=PG&f=1", "display_name": "Dipak Gupta", "link": "https://stackoverflow.com/users/1743174/dipak-gupta"}, "edited": false, "score": 0, "creation_date": 1438765361, "post_id": 31827818, "comment_id": 51578914, "body": "Then look into the links suggested by @Dipak."}, {"owner": {"reputation": 6015, "user_id": 2590090, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/c19c67c6d03ffbe32ddc46bbb1dcd147?s=128&d=identicon&r=PG&f=1", "display_name": "CJAY", "link": "https://stackoverflow.com/users/2590090/cjay"}, "reply_to_user": {"reputation": 7032, "user_id": 1743174, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/9f871161f754442df697dce1cede77a5?s=128&d=identicon&r=PG&f=1", "display_name": "Dipak Gupta", "link": "https://stackoverflow.com/users/1743174/dipak-gupta"}, "edited": false, "score": 0, "creation_date": 1438765454, "post_id": 31827818, "comment_id": 51578970, "body": "@Dipak   Superb...got it working now."}, {"owner": {"reputation": 6015, "user_id": 2590090, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/c19c67c6d03ffbe32ddc46bbb1dcd147?s=128&d=identicon&r=PG&f=1", "display_name": "CJAY", "link": "https://stackoverflow.com/users/2590090/cjay"}, "edited": false, "score": 0, "creation_date": 1438765478, "post_id": 31827818, "comment_id": 51578986, "body": "@Pavan....thank you."}], "owner": {"reputation": 6015, "user_id": 2590090, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/c19c67c6d03ffbe32ddc46bbb1dcd147?s=128&d=identicon&r=PG&f=1", "display_name": "CJAY", "link": "https://stackoverflow.com/users/2590090/cjay"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 81, "favorite_count": 0, "closed_date": 1438765507, "answer_count": 0, "score": 0, "last_activity_date": 1438764926, "creation_date": 1438764926, "question_id": 31827818, "link": "https://stackoverflow.com/questions/31827818/rails-typeerror-object-doesnt-support-this-property-or-method", "closed_reason": "Duplicate", "title": "Rails :TypeError: Object doesn&#39;t support this property or method", "body": "<p>I just freshly installed rails and generated my new rails app files and pages and started my server. but when i start my server and run localhost:3000 in browser i am getting the error</p>\n\n<pre><code>TypeError: Object doesn't support this property or method`\n</code></pre>\n\n<p>it saysShowing <code>C:/Users/walnut/Desktop/projects/walden/walden/app/views/layouts/application.html.erb where line #6 raised:</code></p>\n\n<pre><code>application.html.erb\n&lt;!DOCTYPE html&gt;\n&lt;html&gt;\n&lt;head&gt;\n  &lt;title&gt;Walden&lt;/title&gt;\n  &lt;%= stylesheet_link_tag    'application', media: 'all', 'data-turbolinks-track' =&gt; true %&gt;\n  &lt;%= javascript_include_tag 'application', 'data-turbolinks-track' =&gt; true %&gt;\n  &lt;%= csrf_meta_tags %&gt;\n&lt;/head&gt;\n&lt;body&gt;\n&lt;%= yield %&gt;\n&lt;/body&gt;\n&lt;/html&gt;\n</code></pre>\n\n<p>How to solve this?</p>\n"}, {"tags": ["arrays", "ruby"], "comments": [{"owner": {"reputation": 38307, "user_id": 2057388, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ceef8c04f66cd0e2bd360ef6abc14a81?s=128&d=identicon&r=PG", "display_name": "\u0417\u0435\u043b\u0451\u043d\u044b\u0439", "link": "https://stackoverflow.com/users/2057388/%d0%97%d0%b5%d0%bb%d1%91%d0%bd%d1%8b%d0%b9"}, "edited": false, "score": 0, "creation_date": 1438764955, "post_id": 31827779, "comment_id": 51578632, "body": "Please show us your efforts."}, {"owner": {"reputation": 5242, "user_id": 3083848, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/JMddU.jpg?s=128&g=1", "display_name": "Emu", "link": "https://stackoverflow.com/users/3083848/emu"}, "reply_to_user": {"reputation": 38307, "user_id": 2057388, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ceef8c04f66cd0e2bd360ef6abc14a81?s=128&d=identicon&r=PG", "display_name": "\u0417\u0435\u043b\u0451\u043d\u044b\u0439", "link": "https://stackoverflow.com/users/2057388/%d0%97%d0%b5%d0%bb%d1%91%d0%bd%d1%8b%d0%b9"}, "edited": false, "score": 0, "creation_date": 1438765146, "post_id": 31827779, "comment_id": 51578771, "body": "@\u0417\u0435\u043b\u0451\u043d\u044b\u0439, I haven&#39;t done anything yet. I assume that I can do it using a  <code>brute force</code> <b>loop</b> approach, but I want to know if there is anything in ruby to do this easily."}, {"owner": {"reputation": 38307, "user_id": 2057388, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ceef8c04f66cd0e2bd360ef6abc14a81?s=128&d=identicon&r=PG", "display_name": "\u0417\u0435\u043b\u0451\u043d\u044b\u0439", "link": "https://stackoverflow.com/users/2057388/%d0%97%d0%b5%d0%bb%d1%91%d0%bd%d1%8b%d0%b9"}, "edited": false, "score": 1, "creation_date": 1438765551, "post_id": 31827779, "comment_id": 51579026, "body": "In other words, i don&#39;t want to try something, write code for me."}, {"owner": {"reputation": 5242, "user_id": 3083848, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/JMddU.jpg?s=128&g=1", "display_name": "Emu", "link": "https://stackoverflow.com/users/3083848/emu"}, "reply_to_user": {"reputation": 38307, "user_id": 2057388, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ceef8c04f66cd0e2bd360ef6abc14a81?s=128&d=identicon&r=PG", "display_name": "\u0417\u0435\u043b\u0451\u043d\u044b\u0439", "link": "https://stackoverflow.com/users/2057388/%d0%97%d0%b5%d0%bb%d1%91%d0%bd%d1%8b%d0%b9"}, "edited": false, "score": 0, "creation_date": 1438765664, "post_id": 31827779, "comment_id": 51579097, "body": "@\u0417\u0435\u043b\u0451\u043d\u044b\u0439, If you think that&#39;s what I want, then don&#39;t bother to write code for me. :) . Thanks."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "reply_to_user": {"reputation": 38307, "user_id": 2057388, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ceef8c04f66cd0e2bd360ef6abc14a81?s=128&d=identicon&r=PG", "display_name": "\u0417\u0435\u043b\u0451\u043d\u044b\u0439", "link": "https://stackoverflow.com/users/2057388/%d0%97%d0%b5%d0%bb%d1%91%d0%bd%d1%8b%d0%b9"}, "edited": false, "score": 0, "creation_date": 1438797291, "post_id": 31827779, "comment_id": 51600553, "body": "@\u0417\u0435\u043b\u0451\u043d\u044b\u0439 (I hope I pronounced that correctly), I&#39;ve never understood demands for OPs to show failed code.  If it solicits a response, the code produced is generally artificial, particularly if the OP doesn&#39;t really know where to begin. It&#39;s also smacks of elitism, as high-rep (and not so high-rep) askers are <i>never</i> asked to produce code. If the question is clear, and not stupid, that&#39;s enough for me."}], "answers": [{"comments": [{"owner": {"reputation": 5242, "user_id": 3083848, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/JMddU.jpg?s=128&g=1", "display_name": "Emu", "link": "https://stackoverflow.com/users/3083848/emu"}, "edited": false, "score": 1, "creation_date": 1438766453, "post_id": 31828252, "comment_id": 51579602, "body": "Thanks @Stefan. You&#39;re just awesome. :D"}], "tags": [], "owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "is_accepted": true, "score": 6, "last_activity_date": 1438767217, "last_edit_date": 1438767217, "creation_date": 1438766188, "answer_id": 31828252, "question_id": 31827779, "link": "https://stackoverflow.com/questions/31827779/insert-array-values-into-random-positions-of-another-array/31828252#31828252", "title": "Insert array values into random positions of another array", "body": "<p>This will probably work:</p>\n\n<pre><code>a = [1, 2, 3]\nb = [:foo, :bar, :baz]\n\nb.each_with_object(a.dup) { |e, ary| ary.insert(rand(0..ary.size), e) }\n#=&gt; [:baz, 1, 2, :foo, :bar, 3]\n</code></pre>\n\n<ul>\n<li><a href=\"http://ruby-doc.org/core-2.2.2/Kernel.html#method-i-rand\" rel=\"nofollow\"><code>dup</code></a> creates a copy of <code>a</code> that is passed as <code>ary</code> into the block, along with each of <code>b</code>'s elements</li>\n<li><a href=\"http://ruby-doc.org/core-2.2.2/Kernel.html#method-i-rand\" rel=\"nofollow\"><code>rand</code></a> returns a random index between <code>0</code> (beginning of array) and <code>ary.size</code> (end of array)</li>\n<li><a href=\"http://ruby-doc.org/core-2.2.2/Array.html#method-i-insert\" rel=\"nofollow\"><code>insert</code></a> inserts the current element at the given index</li>\n<li><a href=\"http://ruby-doc.org/core-2.2.2/Enumerable.html#method-i-each_with_object\" rel=\"nofollow\"><code>each_with_object</code></a> returns the copied array with the randomly inserted elements</li>\n</ul>\n"}, {"comments": [{"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1438793565, "post_id": 31829225, "comment_id": 51598492, "body": "That will modify <code>a</code>. The whole purpose of <code>each_with_object</code> is to return a new hash."}, {"owner": {"reputation": 406, "user_id": 4482286, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-Sl_16MRc3EQ/AAAAAAAAAAI/AAAAAAAAAJ4/OjoaYnwT9HU/photo.jpg?sz=128", "display_name": "RossMc", "link": "https://stackoverflow.com/users/4482286/rossmc"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1438872185, "post_id": 31829225, "comment_id": 51637041, "body": "I see. I missed that the result was supposed to be returned in a new array."}], "tags": [], "owner": {"reputation": 406, "user_id": 4482286, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-Sl_16MRc3EQ/AAAAAAAAAAI/AAAAAAAAAJ4/OjoaYnwT9HU/photo.jpg?sz=128", "display_name": "RossMc", "link": "https://stackoverflow.com/users/4482286/rossmc"}, "is_accepted": false, "score": 0, "last_activity_date": 1438768784, "last_edit_date": 1495540679, "creation_date": 1438768784, "answer_id": 31829225, "question_id": 31827779, "link": "https://stackoverflow.com/questions/31827779/insert-array-values-into-random-positions-of-another-array/31829225#31829225", "title": "Insert array values into random positions of another array", "body": "<p>I think the simplest method is below.</p>\n\n<pre><code>a = [\"Fruit\", \"Emu\", \"Color\"]\nb = [\"Banana\", \"Name\", \"Orange\"]\n\nb.each { |value| a.insert(rand(0..a.length), value) }\n\n#=&gt; [\"Name\", \"Orange\", \"Fruit\", \"Emu\", \"Banana\", \"Color\"]\n</code></pre>\n\n<p>For each element of <code>b</code>, insert the value into a random index of <code>a</code>.</p>\n\n<p>This is essentially the answer from <a href=\"https://stackoverflow.com/a/31828252/4482286\">Stefan</a>, but without the <code>each_with_object</code> method. I think it's slightly cleaner this way and provides the same solution.</p>\n"}, {"tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": false, "score": 1, "last_activity_date": 1438796608, "last_edit_date": 1438796608, "creation_date": 1438796302, "answer_id": 31839247, "question_id": 31827779, "link": "https://stackoverflow.com/questions/31827779/insert-array-values-into-random-positions-of-another-array/31839247#31839247", "title": "Insert array values into random positions of another array", "body": "<p>Here's another way:</p>\n\n<pre><code>def stuff_randomly(a,b)\n  sz_a  = a.size\n  cpy_a = a.dup\n  (sz_a+b.size).times.to_a.shuffle.map do |i|\n    (i &lt; sz_a) ? cpy_a.shift : b[i-sz_a]\n  end\nend\n\na = [1, 2, 3]\nb = [:foo, :bar, :baz]\n10.times { p stuff_randomly(a,b) }\n[:foo, 1, 2, 3, :bar, :baz]\n[1, :baz, 2, :foo, 3, :bar]\n[1, :foo, :bar, :baz, 2, 3]\n[1, 2, 3, :foo, :bar, :baz]\n[1, :bar, :foo, 2, 3, :baz]\n[:foo, 1, :baz, 2, :bar, 3]\n[:bar, 1, 2, 3, :foo, :baz]\n[:bar, 1, :foo, :baz, 2, 3]\n[1, 2, :baz, :bar, :foo, 3]\n[1, :foo, :bar, 2, 3, :baz]\n</code></pre>\n"}], "owner": {"reputation": 5242, "user_id": 3083848, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/JMddU.jpg?s=128&g=1", "display_name": "Emu", "link": "https://stackoverflow.com/users/3083848/emu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1080, "favorite_count": 0, "accepted_answer_id": 31828252, "answer_count": 3, "score": 1, "last_activity_date": 1438796608, "creation_date": 1438764838, "last_edit_date": 1438765694, "question_id": 31827779, "link": "https://stackoverflow.com/questions/31827779/insert-array-values-into-random-positions-of-another-array", "title": "Insert array values into random positions of another array", "body": "<p>Suppose I have two arrays:</p>\n\n<pre><code>a = [\"Fruit\", \"Emu\", \"Color\"]\nb = [\"Banana\", \"Name\", \"Orange\"]\n</code></pre>\n\n<p>I want to insert <code>b</code> array values into  random positions of <code>a</code>. A possible output for these two arrays would be:</p>\n\n<pre><code>c = [\"Banana\", \"Fruit\", \"Emu\", \"Color\", \"Orange\", \"Name\"]\n</code></pre>\n\n<p>Here, <code>b</code> array values are inserted into <code>a</code>, but the value sequence</p>\n\n<blockquote>\n  <p><code>\"Fruit\"</code> \u2192 <code>\"Emu\"</code> \u2192 <code>\"Color\"</code></p>\n</blockquote>\n\n<p>of <code>a</code> is not hampered. How can I do that?  </p>\n"}, {"tags": ["ruby", "methods"], "answers": [{"comments": [{"owner": {"reputation": 9368, "user_id": 316408, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/2d693c173f4a9e6cfec05c26c1df0d91?s=128&d=identicon&r=PG&f=1", "display_name": "mahatmanich", "link": "https://stackoverflow.com/users/316408/mahatmanich"}, "edited": false, "score": 0, "creation_date": 1438764171, "post_id": 31827442, "comment_id": 51578109, "body": "That looks like what I want. I would need to use symbols here right?"}, {"owner": {"reputation": 3618, "user_id": 2968762, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/EhAX3.png?s=128&g=1", "display_name": "Abhi", "link": "https://stackoverflow.com/users/2968762/abhi"}, "edited": false, "score": 0, "creation_date": 1438764350, "post_id": 31827442, "comment_id": 51578212, "body": "Define your method as <code>def my_method(id, *args)</code>. Here, your <b>*args</b> will be array of params"}, {"owner": {"reputation": 48413, "user_id": 1279683, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1veuT.jpg?s=128&g=1", "display_name": "Marek Lipka", "link": "https://stackoverflow.com/users/1279683/marek-lipka"}, "reply_to_user": {"reputation": 9368, "user_id": 316408, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/2d693c173f4a9e6cfec05c26c1df0d91?s=128&d=identicon&r=PG&f=1", "display_name": "mahatmanich", "link": "https://stackoverflow.com/users/316408/mahatmanich"}, "edited": false, "score": 0, "creation_date": 1438764435, "post_id": 31827442, "comment_id": 51578273, "body": "@mahatmanich This construction is not a hash with symbol as keys, but other construct - keword arguments (or named arguments)."}, {"owner": {"reputation": 3618, "user_id": 2968762, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/EhAX3.png?s=128&g=1", "display_name": "Abhi", "link": "https://stackoverflow.com/users/2968762/abhi"}, "edited": false, "score": 0, "creation_date": 1438764725, "post_id": 31827442, "comment_id": 51578469, "body": "@MarekLipka Sorry, I was confused about <b>arguments</b>, I thought you meant <b>*args</b> as posted by Dipak"}, {"owner": {"reputation": 9368, "user_id": 316408, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/2d693c173f4a9e6cfec05c26c1df0d91?s=128&d=identicon&r=PG&f=1", "display_name": "mahatmanich", "link": "https://stackoverflow.com/users/316408/mahatmanich"}, "edited": false, "score": 0, "creation_date": 1438765821, "post_id": 31827442, "comment_id": 51579198, "body": "@MarekLipka Do you have a pointer to ruby doc where this kind of method declaration is documented?"}, {"owner": {"reputation": 48413, "user_id": 1279683, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1veuT.jpg?s=128&g=1", "display_name": "Marek Lipka", "link": "https://stackoverflow.com/users/1279683/marek-lipka"}, "reply_to_user": {"reputation": 9368, "user_id": 316408, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/2d693c173f4a9e6cfec05c26c1df0d91?s=128&d=identicon&r=PG&f=1", "display_name": "mahatmanich", "link": "https://stackoverflow.com/users/316408/mahatmanich"}, "edited": false, "score": 1, "creation_date": 1438765984, "post_id": 31827442, "comment_id": 51579307, "body": "@mahatmanich Here: <a href=\"http://ruby-doc.org/core-2.1.0/doc/syntax/methods_rdoc.html#label-Keyword+Arguments\" rel=\"nofollow noreferrer\">ruby-doc.org/core-2.1.0/doc/syntax/&hellip;</a>"}], "tags": [], "owner": {"reputation": 48413, "user_id": 1279683, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1veuT.jpg?s=128&g=1", "display_name": "Marek Lipka", "link": "https://stackoverflow.com/users/1279683/marek-lipka"}, "is_accepted": true, "score": 4, "last_activity_date": 1438763912, "creation_date": 1438763912, "answer_id": 31827442, "question_id": 31827417, "link": "https://stackoverflow.com/questions/31827417/method-calling-a-singular-optional-param-and-keep-the-other-optional-param-at-de/31827442#31827442", "title": "Method calling a singular optional param and keep the other optional param at default", "body": "<p>You can't do it this way. Instead, you can use keyword arguments:</p>\n\n<pre><code>def my_method(id, raise_error: true, validate: false)\n  #  ...\nend\n</code></pre>\n\n<p>and call it with only <code>validate</code> argument:</p>\n\n<pre><code>my_method(20, validate: true)\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 9368, "user_id": 316408, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/2d693c173f4a9e6cfec05c26c1df0d91?s=128&d=identicon&r=PG&f=1", "display_name": "mahatmanich", "link": "https://stackoverflow.com/users/316408/mahatmanich"}, "edited": false, "score": 0, "creation_date": 1438764320, "post_id": 31827557, "comment_id": 51578193, "body": "I would want to keep raise_error to be default as <code>true</code> if it is not used."}, {"owner": {"reputation": 38307, "user_id": 2057388, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ceef8c04f66cd0e2bd360ef6abc14a81?s=128&d=identicon&r=PG", "display_name": "\u0417\u0435\u043b\u0451\u043d\u044b\u0439", "link": "https://stackoverflow.com/users/2057388/%d0%97%d0%b5%d0%bb%d1%91%d0%bd%d1%8b%d0%b9"}, "edited": false, "score": 1, "creation_date": 1438764353, "post_id": 31827557, "comment_id": 51578219, "body": "<code>nil</code> is nothing, if you can avoid it, you should avoid it, no need to work with nothing."}, {"owner": {"reputation": 91, "user_id": 5061740, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-iPqLwqz9U0M/AAAAAAAAAAI/AAAAAAAAAFM/pz61ZlmCL6o/photo.jpg?sz=128", "display_name": "gyohannes", "link": "https://stackoverflow.com/users/5061740/gyohannes"}, "edited": false, "score": 0, "creation_date": 1438764801, "post_id": 31827557, "comment_id": 51578532, "body": "he wants that parameter in the method, but he also wants to call the method with out that parameter in a particular case"}, {"owner": {"reputation": 9368, "user_id": 316408, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/2d693c173f4a9e6cfec05c26c1df0d91?s=128&d=identicon&r=PG&f=1", "display_name": "mahatmanich", "link": "https://stackoverflow.com/users/316408/mahatmanich"}, "edited": false, "score": 0, "creation_date": 1438765182, "post_id": 31827557, "comment_id": 51578799, "body": "I want to keep the default set in the optional parameters and I want to call the method interchangeably to call either optional parameters. btw I did not downvote you."}], "tags": [], "owner": {"reputation": 91, "user_id": 5061740, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-iPqLwqz9U0M/AAAAAAAAAAI/AAAAAAAAAFM/pz61ZlmCL6o/photo.jpg?sz=128", "display_name": "gyohannes", "link": "https://stackoverflow.com/users/5061740/gyohannes"}, "is_accepted": false, "score": -1, "last_activity_date": 1438764228, "creation_date": 1438764228, "answer_id": 31827557, "question_id": 31827417, "link": "https://stackoverflow.com/questions/31827417/method-calling-a-singular-optional-param-and-keep-the-other-optional-param-at-de/31827557#31827557", "title": "Method calling a singular optional param and keep the other optional param at default", "body": "<p>I would suggest passing nil to the first optional parameter</p>\n\n<pre><code>my_method(20, nil, false)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 7032, "user_id": 1743174, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/9f871161f754442df697dce1cede77a5?s=128&d=identicon&r=PG&f=1", "display_name": "Dipak Gupta", "link": "https://stackoverflow.com/users/1743174/dipak-gupta"}, "is_accepted": false, "score": 2, "last_activity_date": 1438764450, "creation_date": 1438764450, "answer_id": 31827625, "question_id": 31827417, "link": "https://stackoverflow.com/questions/31827417/method-calling-a-singular-optional-param-and-keep-the-other-optional-param-at-de/31827625#31827625", "title": "Method calling a singular optional param and keep the other optional param at default", "body": "<p>Yes you can also use optional hash here:</p>\n\n<p>Below is argument calling herarchy that might help.</p>\n\n<p><a href=\"https://i.stack.imgur.com/aQVQX.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/aQVQX.png\" alt=\"enter image description here\"></a></p>\n\n<p><a href=\"https://i.stack.imgur.com/rYzyS.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/rYzyS.png\" alt=\"enter image description here\"></a></p>\n"}], "owner": {"reputation": 9368, "user_id": 316408, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/2d693c173f4a9e6cfec05c26c1df0d91?s=128&d=identicon&r=PG&f=1", "display_name": "mahatmanich", "link": "https://stackoverflow.com/users/316408/mahatmanich"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 75, "favorite_count": 2, "accepted_answer_id": 31827442, "answer_count": 3, "score": 0, "last_activity_date": 1443817045, "creation_date": 1438763822, "last_edit_date": 1438765402, "question_id": 31827417, "link": "https://stackoverflow.com/questions/31827417/method-calling-a-singular-optional-param-and-keep-the-other-optional-param-at-de", "title": "Method calling a singular optional param and keep the other optional param at default", "body": "<p>I have a method:</p>\n\n<pre><code>def my_method(id,raise_error=true,validate=false)\n  ...\nend\n</code></pre>\n\n<p>How can I call this method using only the second optional parameter?</p>\n\n<p>I tried:</p>\n\n<pre><code>my_method(20,,false)\n</code></pre>\n\n<p>Would it be better here to use an options hash?</p>\n\n<p><strong>Update:</strong></p>\n\n<p>I would also be able to call the method setting <code>raise_error = false</code> and keep <code>validate</code> at default value <code>false</code></p>\n"}, {"tags": ["ruby", "ruby-on-rails-4", "internationalization", "carrierwave", "nested-attributes"], "answers": [{"tags": [], "owner": {"reputation": 106, "user_id": 956677, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/50f9b1c5eb8f24cb670377006eea40e7?s=128&d=identicon&r=PG", "display_name": "Youri", "link": "https://stackoverflow.com/users/956677/youri"}, "is_accepted": false, "score": 0, "last_activity_date": 1439368247, "last_edit_date": 1439368247, "creation_date": 1439367313, "answer_id": 31959652, "question_id": 31827320, "link": "https://stackoverflow.com/questions/31827320/nested-attribute-localization-for-error-messages-in-rails-4/31959652#31959652", "title": "Nested attribute localization for error messages in Rails 4", "body": "<p>Assuming you've implemented the custom validator from the wiki (<a href=\"https://github.com/carrierwaveuploader/carrierwave/wiki/How-to:-Validate-attachment-file-size\" rel=\"nofollow\">https://github.com/carrierwaveuploader/carrierwave/wiki/How-to:-Validate-attachment-file-size</a>).</p>\n\n<p>Try this:</p>\n\n<pre><code>en:\n  activemodel:\n    errors:\n      models:\n        book_attachment:\n          attributes:\n            image:\n              size_too_big: \"The image is too big. The maximum size is %{file_size} MB\"\n</code></pre>\n\n<p>Alternatively you could also try a validation on the model directly:</p>\n\n<pre><code>class BookAttachment &lt; ActiveRecord::Base\n  belongs_to :book\n  has_many :images\n\n  mount_uploader :image, ImageUploader\n\n  validate :image_size\n\n  def image_size\n    if image.file.size.to_i &gt; 3.megabytes.to_i\n      errors.add(:image, :size_too_big)\n    end\n  end\nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 387, "user_id": 310812, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/31ac6ede293e13f34f749271f026cbcd?s=128&d=identicon&r=PG", "display_name": "jissy", "link": "https://stackoverflow.com/users/310812/jissy"}, "is_accepted": true, "score": 0, "last_activity_date": 1439970391, "creation_date": 1439970391, "answer_id": 32089472, "question_id": 31827320, "link": "https://stackoverflow.com/questions/31827320/nested-attribute-localization-for-error-messages-in-rails-4/32089472#32089472", "title": "Nested attribute localization for error messages in Rails 4", "body": "<pre><code>en:  \n  activerecord:    \n    errors:\n      models:\n        book_attachment:\n          attributes:\n            image:\n              size_too_big: \"is too big (should be at most 3 MB)\"\n</code></pre>\n\n<p>The above worked for me . Thanks @Youri for the help. i used activerecord instead of activemodel.</p>\n"}], "owner": {"reputation": 387, "user_id": 310812, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/31ac6ede293e13f34f749271f026cbcd?s=128&d=identicon&r=PG", "display_name": "jissy", "link": "https://stackoverflow.com/users/310812/jissy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 804, "favorite_count": 0, "accepted_answer_id": 32089472, "answer_count": 2, "score": 0, "last_activity_date": 1439970391, "creation_date": 1438763529, "last_edit_date": 1438834894, "question_id": 31827320, "link": "https://stackoverflow.com/questions/31827320/nested-attribute-localization-for-error-messages-in-rails-4", "title": "Nested attribute localization for error messages in Rails 4", "body": "<p>I am using CarrierWave to upload the images.</p>\n\n<p>i have 2 models</p>\n\n<pre><code>class Book &lt; ActiveRecord::Base\n  has_many :book_attachments, dependent: :destroy\n  accepts_nested_attributes_for :book_attachments,   allow_destroy:        true, reject_if: proc { |attributes| attributes['image'].blank?}\nend\n\n\nclass BookAttachment &lt; ActiveRecord::Base\n  belongs_to :book\n  has_many :images\n\n  validates :image,\n    :file_size =&gt; { \n    :maximum =&gt; 3.megabytes.to_i\n  }\n\n  mount_uploader :image, ImageUploader\n\nend\n</code></pre>\n\n<p>i need to localize the validation message for image size validation.</p>\n\n<p>i give like the following in the en.yml:</p>\n\n<pre><code>en:  \n  activerecord:    \n    errors:\n      models:\n        book_attachment:\n          attributes:\n            image:\n              too_big: The image is too big. The maximum size is 3 MB\n</code></pre>\n\n<p>The following message will get by default if image size is more: \n    \"Book attachments image is too big (should be at most 3 MB)\".</p>\n\n<p>But. i need to get the message shown in the en.yml file.</p>\n\n<p>Please help.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "variables", "url", "concatenation"], "answers": [{"tags": [], "owner": {"reputation": 8871, "user_id": 4381282, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh4.googleusercontent.com/-rIutmC2tG4M/AAAAAAAAAAI/AAAAAAAAAE4/wicIrC8KhUs/photo.jpg?sz=128", "display_name": "Pawe\u0142 Dawczak", "link": "https://stackoverflow.com/users/4381282/pawe%c5%82-dawczak"}, "is_accepted": false, "score": 0, "last_activity_date": 1438763166, "creation_date": 1438763166, "answer_id": 31827209, "question_id": 31827174, "link": "https://stackoverflow.com/questions/31827174/concatenate-url-string-with-a-variable/31827209#31827209", "title": "Concatenate url string with a variable", "body": "<p>You should change your code to:</p>\n\n<pre><code>&lt;%= link_to \"Panier\", \"/clients/#{liste.client_id}\" %&gt;\n</code></pre>\n\n<p>So Ruby performs interpolation. Otherwise it understands is <em>as-is</em>.</p>\n\n<p>Good luck!</p>\n"}, {"tags": [], "owner": {"reputation": 16396, "user_id": 2564298, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/BhG1x.jpg?s=128&g=1", "display_name": "Rajdeep Singh", "link": "https://stackoverflow.com/users/2564298/rajdeep-singh"}, "is_accepted": false, "score": 0, "last_activity_date": 1438763166, "creation_date": 1438763166, "answer_id": 31827210, "question_id": 31827174, "link": "https://stackoverflow.com/questions/31827174/concatenate-url-string-with-a-variable/31827210#31827210", "title": "Concatenate url string with a variable", "body": "<p>Use <code>\"\"</code> instead</p>\n\n<pre><code>&lt;%= link_to \"Panier\", \"/clients/#{liste.client_id}\" %&gt;\n</code></pre>\n\n<p>Hope that helps!</p>\n"}, {"comments": [{"owner": {"reputation": 164, "user_id": 5135700, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/eb93f6e14f217cf850b23183258b9cfd?s=128&d=identicon&r=PG&f=1", "display_name": "GDMN", "link": "https://stackoverflow.com/users/5135700/gdmn"}, "edited": false, "score": 0, "creation_date": 1438764044, "post_id": 31827425, "comment_id": 51578023, "body": "Thank you it works fine. I find it more safe isn&#39;t it ? More than concatenation ?"}, {"owner": {"reputation": 9878, "user_id": 3315785, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/YsMo6.jpg?s=128&g=1", "display_name": "j-dexx", "link": "https://stackoverflow.com/users/3315785/j-dexx"}, "reply_to_user": {"reputation": 164, "user_id": 5135700, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/eb93f6e14f217cf850b23183258b9cfd?s=128&d=identicon&r=PG&f=1", "display_name": "GDMN", "link": "https://stackoverflow.com/users/5135700/gdmn"}, "edited": false, "score": 0, "creation_date": 1438764844, "post_id": 31827425, "comment_id": 51578563, "body": "I wouldn&#39;t say it&#39;s more safe as it doesn&#39;t rely on user input but I would always use the rails routes if possibl"}], "tags": [], "owner": {"reputation": 9878, "user_id": 3315785, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/YsMo6.jpg?s=128&g=1", "display_name": "j-dexx", "link": "https://stackoverflow.com/users/3315785/j-dexx"}, "is_accepted": true, "score": 1, "last_activity_date": 1438763851, "creation_date": 1438763851, "answer_id": 31827425, "question_id": 31827174, "link": "https://stackoverflow.com/questions/31827174/concatenate-url-string-with-a-variable/31827425#31827425", "title": "Concatenate url string with a variable", "body": "<p>You should use rails routes if possible.</p>\n\n<pre><code>&lt;%= link_to \"Panier\", client_path(liste.client_id) %&gt;\n</code></pre>\n"}], "owner": {"reputation": 164, "user_id": 5135700, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/eb93f6e14f217cf850b23183258b9cfd?s=128&d=identicon&r=PG&f=1", "display_name": "GDMN", "link": "https://stackoverflow.com/users/5135700/gdmn"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1041, "favorite_count": 0, "accepted_answer_id": 31827425, "answer_count": 3, "score": -1, "last_activity_date": 1438763851, "creation_date": 1438763084, "question_id": 31827174, "link": "https://stackoverflow.com/questions/31827174/concatenate-url-string-with-a-variable", "title": "Concatenate url string with a variable", "body": "<p>I want to use a link_to option and use a url which is variable.\nSo I wrote this :</p>\n\n<pre><code>&lt;%= link_to \"Panier\", '/clients/#{liste.client_id}' %&gt;\n</code></pre>\n\n<p>However I am redirected to the webpage <code>/clients</code> with the url <code>/clients/#{liste.client_id}</code></p>\n\n<p>Can anyone give me the solution and explain why it does not work ? Thank you.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "activerecord"], "comments": [{"owner": {"reputation": 610, "user_id": 2873497, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/acd75ed7dc7b147b62a5f06592c8e8ba?s=128&d=identicon&r=PG", "display_name": "arthur.karganyan", "link": "https://stackoverflow.com/users/2873497/arthur-karganyan"}, "edited": false, "score": 0, "creation_date": 1438765264, "post_id": 31827159, "comment_id": 51578857, "body": "The problem, that I see here is that paginate won&#39;t work here. And I am sorry, but I am interested, why do you need to swap elements? If you want to make some Product at the top - that is another case."}, {"owner": {"reputation": 43, "user_id": 3484544, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/68d7918e08c08f58b3783d15283ff08a?s=128&d=identicon&r=PG&f=1", "display_name": "zeitgeist", "link": "https://stackoverflow.com/users/3484544/zeitgeist"}, "reply_to_user": {"reputation": 610, "user_id": 2873497, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/acd75ed7dc7b147b62a5f06592c8e8ba?s=128&d=identicon&r=PG", "display_name": "arthur.karganyan", "link": "https://stackoverflow.com/users/2873497/arthur-karganyan"}, "edited": false, "score": 0, "creation_date": 1438771616, "post_id": 31827159, "comment_id": 51582913, "body": "@arthur.karganyan, why pagination won&#39;t work? It works perfectly. Yes, I need to make product at the top. I have no idea except swaping, how it can be achieved?"}, {"owner": {"reputation": 610, "user_id": 2873497, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/acd75ed7dc7b147b62a5f06592c8e8ba?s=128&d=identicon&r=PG", "display_name": "arthur.karganyan", "link": "https://stackoverflow.com/users/2873497/arthur-karganyan"}, "edited": false, "score": 0, "creation_date": 1438772586, "post_id": 31827159, "comment_id": 51583516, "body": "It won&#39;t work because pagination is applied only to ActiveRecord::Relation. This solution has bugs with pagination."}], "answers": [{"comments": [{"owner": {"reputation": 43, "user_id": 3484544, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/68d7918e08c08f58b3783d15283ff08a?s=128&d=identicon&r=PG&f=1", "display_name": "zeitgeist", "link": "https://stackoverflow.com/users/3484544/zeitgeist"}, "edited": false, "score": 0, "creation_date": 1438781591, "post_id": 31831037, "comment_id": 51589971, "body": "problems with pagination, there are 9 product in first page=(, not 8"}, {"owner": {"reputation": 43, "user_id": 3484544, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/68d7918e08c08f58b3783d15283ff08a?s=128&d=identicon&r=PG&f=1", "display_name": "zeitgeist", "link": "https://stackoverflow.com/users/3484544/zeitgeist"}, "edited": false, "score": 0, "creation_date": 1438782170, "post_id": 31831037, "comment_id": 51590431, "body": "Finally, the solution was just to delete good befote adding. Thank you!"}], "tags": [], "owner": {"reputation": 610, "user_id": 2873497, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/acd75ed7dc7b147b62a5f06592c8e8ba?s=128&d=identicon&r=PG", "display_name": "arthur.karganyan", "link": "https://stackoverflow.com/users/2873497/arthur-karganyan"}, "is_accepted": true, "score": 2, "last_activity_date": 1438773594, "creation_date": 1438773594, "answer_id": 31831037, "question_id": 31827159, "link": "https://stackoverflow.com/questions/31827159/rails-activerecord-swap-data/31831037#31831037", "title": "rails activerecord swap data", "body": "<p>I am not 100% sure that this is what you are trying to achieve, but can try</p>\n\n<pre><code>@allProd = Product.where(service_id:params[:id], product_category_id:descenId).order(rating: :desc).paginate(:page =&gt; params[:page], :per_page =&gt; 8).to_a.unshift(Product.find(prodId))\n</code></pre>\n\n<p>I assume that on each page Product with id prodId will be the first.</p>\n"}, {"tags": [], "owner": {"reputation": 451, "user_id": 4985643, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/e742671a7530acf81abb900f9e67b51e?s=128&d=identicon&r=PG&f=1", "display_name": "Puja", "link": "https://stackoverflow.com/users/4985643/puja"}, "is_accepted": false, "score": 1, "last_activity_date": 1438774139, "creation_date": 1438774139, "answer_id": 31831257, "question_id": 31827159, "link": "https://stackoverflow.com/questions/31827159/rails-activerecord-swap-data/31831257#31831257", "title": "rails activerecord swap data", "body": "<p>Sorry but I am also interested, why do you need to swap elements? If you only make 1 product in the top of the list then use \"unshift\" function.</p>\n\n<pre><code> @allProd=[[]]\n @allProd = Product.where(service_id:params[:id], product_category_id:descenId).order(rating: :desc)\n @allProd=@allProd.unshift(name_of_product_obj_you_want_to_add_at_top)\n</code></pre>\n\n<p>And then apply pagination to \"@allProd\" array.</p>\n"}], "owner": {"reputation": 43, "user_id": 3484544, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/68d7918e08c08f58b3783d15283ff08a?s=128&d=identicon&r=PG&f=1", "display_name": "zeitgeist", "link": "https://stackoverflow.com/users/3484544/zeitgeist"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 429, "favorite_count": 1, "accepted_answer_id": 31831037, "answer_count": 2, "score": 1, "last_activity_date": 1438782569, "creation_date": 1438763046, "last_edit_date": 1438782569, "question_id": 31827159, "link": "https://stackoverflow.com/questions/31827159/rails-activerecord-swap-data", "title": "rails activerecord swap data", "body": "<p>I need to make 1 product in the top of the list. I tryed:</p>\n\n<pre><code>  @allProd = Product.where(service_id:params[:id], product_category_id:descenId).order(rating: :desc).paginate(:page =&gt; params[:page], :per_page =&gt; 8)\n  tmp = @allProd[0]\n  indx = @allProd.find_index(Product.find(prodId))\n  @allProd[0] = @allProd[indx]\n  @allProd[indx] = tmp   \n</code></pre>\n\n<p>But array of datas are not changed. What is the best way to do this?</p>\n\n<p>UPD:\nFinal solution was</p>\n\n<pre><code> @allProd = Product.where(service_id:params[:id], product_category_id:descenId).order(rating: :desc).paginate(:page =&gt; params[:page], :per_page =&gt; 8).to_a\n   @allProd.delete(Product.find(prodId))\n   @allProd = @allProd.unshift(Product.find(prodId))\n</code></pre>\n\n<p>But keep in mind that you will have problems with number of paginated products if shifted product is in not first page. But for me, it is ok)</p>\n"}, {"tags": ["ruby", "ruby-on-rails-4", "rubygems", "rails-activerecord", "simple-form"], "comments": [{"owner": {"reputation": 32131, "user_id": 2346461, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/i3xAf.jpg?s=128&g=1", "display_name": "Pavan", "link": "https://stackoverflow.com/users/2346461/pavan"}, "edited": false, "score": 3, "creation_date": 1438762317, "post_id": 31826861, "comment_id": 51576973, "body": "Can you post the <code>new.html.erb</code> code in the question?"}, {"owner": {"reputation": 69, "user_id": 5192849, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-g2dDA-_0HzM/AAAAAAAAAAI/AAAAAAAAAAA/ayxi_YBZbKs/photo.jpg?sz=128", "display_name": "Sudeep Kaushik", "link": "https://stackoverflow.com/users/5192849/sudeep-kaushik"}, "reply_to_user": {"reputation": 32131, "user_id": 2346461, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/i3xAf.jpg?s=128&g=1", "display_name": "Pavan", "link": "https://stackoverflow.com/users/2346461/pavan"}, "edited": false, "score": 0, "creation_date": 1438884637, "post_id": 31826861, "comment_id": 51644950, "body": "@Pavan: Thanks for looking into this Pavan. Here&#39;s the new.html.erb file&#39;s contents."}, {"owner": {"reputation": 69, "user_id": 5192849, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-g2dDA-_0HzM/AAAAAAAAAAI/AAAAAAAAAAA/ayxi_YBZbKs/photo.jpg?sz=128", "display_name": "Sudeep Kaushik", "link": "https://stackoverflow.com/users/5192849/sudeep-kaushik"}, "reply_to_user": {"reputation": 32131, "user_id": 2346461, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/i3xAf.jpg?s=128&g=1", "display_name": "Pavan", "link": "https://stackoverflow.com/users/2346461/pavan"}, "edited": false, "score": 0, "creation_date": 1438884677, "post_id": 31826861, "comment_id": 51644973, "body": "&lt;% content_for :title do %&gt;Contact&lt;% end %&gt;  &lt;h3&gt;Contact&lt;/h3&gt; &lt;div class=&quot;form&quot;&gt; \t&lt;%= simple_form_for @contact do |form| %&gt;  \t\t&lt;%= form.error_notification %&gt; \t\t&lt;%= form.input :name, autofocus: true %&gt;  \t\t&lt;%= form.input :email %&gt; \t\t&lt;%= form.input :content, as: :text %&gt; \t\t&lt;%= form.button :submit, &#39;Submit&#39;, class: &#39;submit&#39; %&gt;  \t&lt;% end %&gt; &lt;/div&gt;"}, {"owner": {"reputation": 32131, "user_id": 2346461, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/i3xAf.jpg?s=128&g=1", "display_name": "Pavan", "link": "https://stackoverflow.com/users/2346461/pavan"}, "edited": false, "score": 0, "creation_date": 1438884708, "post_id": 31826861, "comment_id": 51644996, "body": "Please post it in the question."}, {"owner": {"reputation": 69, "user_id": 5192849, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-g2dDA-_0HzM/AAAAAAAAAAI/AAAAAAAAAAA/ayxi_YBZbKs/photo.jpg?sz=128", "display_name": "Sudeep Kaushik", "link": "https://stackoverflow.com/users/5192849/sudeep-kaushik"}, "reply_to_user": {"reputation": 32131, "user_id": 2346461, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/i3xAf.jpg?s=128&g=1", "display_name": "Pavan", "link": "https://stackoverflow.com/users/2346461/pavan"}, "edited": false, "score": 1, "creation_date": 1438973422, "post_id": 31826861, "comment_id": 51687017, "body": "@Pavan: As suggested, added the code for new.html.erb to the original question."}], "answers": [{"tags": [], "owner": {"reputation": 11, "user_id": 5348526, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ece3c14c058cb96377845055d1d4c997?s=128&d=identicon&r=PG&f=1", "display_name": "sbattineni", "link": "https://stackoverflow.com/users/5348526/sbattineni"}, "is_accepted": false, "score": 1, "last_activity_date": 1442535624, "creation_date": 1442535624, "answer_id": 32641978, "question_id": 31826861, "link": "https://stackoverflow.com/questions/31826861/nomethoderror-undefined-method-type-for-stringstring/32641978#32641978", "title": "NoMethodError - undefined method `type&#39; for &quot;string&quot;:String:", "body": "<p>In contact.rb file change this </p>\n\n<pre><code>#column :name, :string\n#column :email, :string\n#column :content, :string\n</code></pre>\n\n<h1>replace above 3 lines with below lines in 4.2.2</h1>\n\n<pre><code>attr_accessor :name, :string\nattr_accessor :email, :string\nattr_accessor :content, :string\n</code></pre>\n"}], "owner": {"reputation": 69, "user_id": 5192849, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-g2dDA-_0HzM/AAAAAAAAAAI/AAAAAAAAAAA/ayxi_YBZbKs/photo.jpg?sz=128", "display_name": "Sudeep Kaushik", "link": "https://stackoverflow.com/users/5192849/sudeep-kaushik"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2211, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1442535624, "creation_date": 1438762215, "last_edit_date": 1438973337, "question_id": 31826861, "link": "https://stackoverflow.com/questions/31826861/nomethoderror-undefined-method-type-for-stringstring", "title": "NoMethodError - undefined method `type&#39; for &quot;string&quot;:String:", "body": "<p>Anyone reading \"Learn Ruby on Rails\" by Daniel Kehoe? If not, then please skip the next paragraph and see the stack directly. </p>\n\n<p>I just finished building the \"Rails Way\" app with the Contact page for the \"new\" and \"create\" routes using the model approach. Author just introduced how cool the validation is with the \"Rails Way\". However, when I click on the Contact link in the Menu, it throws an error that I'm not able to comprehend so far. I'm providing the details of the error below. Any insight you could provide would be very helpful. </p>\n\n<p>Anyone encountered the error below dealing with ActiveRecord?</p>\n\n<p>Error: </p>\n\n<pre><code>NoMethodError - undefined method `type' for \"string\":String:\n</code></pre>\n\n<p>STACK:</p>\n\n<pre><code>Started GET \"/contacts/new\" for ::1 at 2015-08-05 00:22:18 -0700\nProcessing by ContactsController#new as HTML\n  Rendered contacts/new.html.erb within layouts/application (1.7ms)\nCompleted 500 Internal Server Error in 5ms (ActiveRecord: 0.0ms)\n\nNoMethodError - undefined method `type' for \"string\":String:\n  activerecord (4.2.2) lib/active_record/connection_adapters/column.rb:18:in `type'\n  activesupport (4.2.2) lib/active_support/core_ext/object/try.rb:77:in `public_send'\n  activesupport (4.2.2) lib/active_support/core_ext/object/try.rb:77:in `try!'\n  activesupport (4.2.2) lib/active_support/core_ext/object/try.rb:63:in `try'\n  simple_form (3.1.0) lib/simple_form/form_builder.rb:514:in `default_input_type'\n  simple_form (3.1.0) lib/simple_form/form_builder.rb:497:in `find_input'\n  simple_form (3.1.0) lib/simple_form/form_builder.rb:112:in `input'\n  app/views/contacts/new.html.erb:6:in `block in _app_views_contacts_new_html_erb___1021484279056782038_70328966650640'\n  actionview (4.2.2) lib/action_view/helpers/capture_helper.rb:38:in `block in capture'\n  actionview (4.2.2) lib/action_view/helpers/capture_helper.rb:200:in `with_output_buffer'\n  actionview (4.2.2) lib/action_view/helpers/capture_helper.rb:38:in `capture'\n  actionview (4.2.2) lib/action_view/helpers/form_helper.rb:444:in `form_for'\n...\n</code></pre>\n\n<p>Contents of new.html.erb</p>\n\n<p>&lt;% content_for :title do %>Contact&lt;% end %> <h3>Contact</h3>  &lt;%= simple_form_for @contact do |form| %> &lt;%= form.error_notification %> &lt;%= form.input :name, autofocus: true %> &lt;%= form.input :email %> &lt;%= form.input :content, as: :text %> &lt;%= form.button :submit, 'Submit', class: 'submit' %> &lt;% end %>  </p>\n"}, {"tags": ["ruby-on-rails", "ruby", "http", "post", "request"], "comments": [{"owner": {"reputation": 8871, "user_id": 4381282, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh4.googleusercontent.com/-rIutmC2tG4M/AAAAAAAAAAI/AAAAAAAAAE4/wicIrC8KhUs/photo.jpg?sz=128", "display_name": "Pawe\u0142 Dawczak", "link": "https://stackoverflow.com/users/4381282/pawe%c5%82-dawczak"}, "edited": false, "score": 0, "creation_date": 1438761732, "post_id": 31826636, "comment_id": 51576631, "body": "Have you tried <code>params[:id]</code> and <code>params[:name]</code>?"}, {"owner": {"reputation": 613, "user_id": 5032873, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/MSWnq.jpg?s=128&g=1", "display_name": "mike927", "link": "https://stackoverflow.com/users/5032873/mike927"}, "reply_to_user": {"reputation": 8871, "user_id": 4381282, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh4.googleusercontent.com/-rIutmC2tG4M/AAAAAAAAAAI/AAAAAAAAAE4/wicIrC8KhUs/photo.jpg?sz=128", "display_name": "Pawe\u0142 Dawczak", "link": "https://stackoverflow.com/users/4381282/pawe%c5%82-dawczak"}, "edited": false, "score": 0, "creation_date": 1438761844, "post_id": 31826636, "comment_id": 51576696, "body": "yes but I get 422 status"}, {"owner": {"reputation": 8871, "user_id": 4381282, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh4.googleusercontent.com/-rIutmC2tG4M/AAAAAAAAAAI/AAAAAAAAAE4/wicIrC8KhUs/photo.jpg?sz=128", "display_name": "Pawe\u0142 Dawczak", "link": "https://stackoverflow.com/users/4381282/pawe%c5%82-dawczak"}, "edited": false, "score": 0, "creation_date": 1438762389, "post_id": 31826636, "comment_id": 51577008, "body": "Could you try to change in your <i>sending</i> script to: <code>data = { package: { id: 1, name: &#39;ABC&#39; } }</code>, and in your controller try to access it simply with <code>params[:package]</code>?"}, {"owner": {"reputation": 2291, "user_id": 1752333, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1009edfa56c5a71d0e6de2738342bee7?s=128&d=identicon&r=PG", "display_name": "scorix", "link": "https://stackoverflow.com/users/1752333/scorix"}, "edited": false, "score": 0, "creation_date": 1438763162, "post_id": 31826636, "comment_id": 51577507, "body": "you should turn off CSRF token in controller and try again. <code>protect_from_forgery :except =&gt; :create</code>"}, {"owner": {"reputation": 613, "user_id": 5032873, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/MSWnq.jpg?s=128&g=1", "display_name": "mike927", "link": "https://stackoverflow.com/users/5032873/mike927"}, "edited": false, "score": 0, "creation_date": 1438764914, "post_id": 31826636, "comment_id": 51578610, "body": "I dont know how to solve it still"}], "answers": [{"comments": [{"owner": {"reputation": 6190, "user_id": 5029266, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/7d4922cf09a8b3d3195cd4d848091ba3?s=128&d=identicon&r=PG", "display_name": "EugZol", "link": "https://stackoverflow.com/users/5029266/eugzol"}, "reply_to_user": {"reputation": 613, "user_id": 5032873, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/MSWnq.jpg?s=128&g=1", "display_name": "mike927", "link": "https://stackoverflow.com/users/5032873/mike927"}, "edited": false, "score": 0, "creation_date": 1438765596, "post_id": 31826926, "comment_id": 51579051, "body": "Sure. What exactly do you want to do with that data from request?"}, {"owner": {"reputation": 613, "user_id": 5032873, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/MSWnq.jpg?s=128&g=1", "display_name": "mike927", "link": "https://stackoverflow.com/users/5032873/mike927"}, "edited": false, "score": 0, "creation_date": 1438765699, "post_id": 31826926, "comment_id": 51579123, "body": "create a new hash and assign values from params to specified keys within my new hash"}, {"owner": {"reputation": 613, "user_id": 5032873, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/MSWnq.jpg?s=128&g=1", "display_name": "mike927", "link": "https://stackoverflow.com/users/5032873/mike927"}, "edited": false, "score": 0, "creation_date": 1438765868, "post_id": 31826926, "comment_id": 51579228, "body": "status 200 and then I can create a new view and display there that hash"}, {"owner": {"reputation": 613, "user_id": 5032873, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/MSWnq.jpg?s=128&g=1", "display_name": "mike927", "link": "https://stackoverflow.com/users/5032873/mike927"}, "edited": false, "score": 0, "creation_date": 1438765983, "post_id": 31826926, "comment_id": 51579305, "body": "now I get: Started POST &quot;/events&quot; for 127.0.0.1 at 2015-08-05 11:12:22 +0200 Processing by ReceiverController#create_package as JSON   Parameters: {&quot;id&quot;=&gt;1, &quot;name&quot;=&gt;&quot;ABC&quot;, &quot;receiver&quot;=&gt;{&quot;id&quot;=&gt;1, &quot;name&quot;=&gt;&quot;ABC&quot;}} Completed 500 Internal Server Error in 5ms (ActiveRecord: 0.0ms)  ActionView::MissingTemplate (Missing template receiver/create_package, application/create_package with {:locale=&gt;[:en], :formats=&gt;[:json], :variants=&gt;[], :handlers=&gt;[:erb, :builder, :raw, :ruby, :slim, :coffee, :jbuilder]}."}, {"owner": {"reputation": 6190, "user_id": 5029266, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/7d4922cf09a8b3d3195cd4d848091ba3?s=128&d=identicon&r=PG", "display_name": "EugZol", "link": "https://stackoverflow.com/users/5029266/eugzol"}, "reply_to_user": {"reputation": 613, "user_id": 5032873, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/MSWnq.jpg?s=128&g=1", "display_name": "mike927", "link": "https://stackoverflow.com/users/5032873/mike927"}, "edited": false, "score": 0, "creation_date": 1438768286, "post_id": 31826926, "comment_id": 51580814, "body": "Well, that&#39;s because you need to first create a new view. Or you could add <code>head :no_content</code> to the end of your controller to render empty response."}, {"owner": {"reputation": 613, "user_id": 5032873, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/MSWnq.jpg?s=128&g=1", "display_name": "mike927", "link": "https://stackoverflow.com/users/5032873/mike927"}, "edited": false, "score": 0, "creation_date": 1438840153, "post_id": 31826926, "comment_id": 51616209, "body": "I had to use corses in addition but it works fine now"}], "tags": [], "owner": {"reputation": 6190, "user_id": 5029266, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/7d4922cf09a8b3d3195cd4d848091ba3?s=128&d=identicon&r=PG", "display_name": "EugZol", "link": "https://stackoverflow.com/users/5029266/eugzol"}, "is_accepted": true, "score": 2, "last_activity_date": 1438768409, "last_edit_date": 1438768409, "creation_date": 1438762415, "answer_id": 31826926, "question_id": 31826636, "link": "https://stackoverflow.com/questions/31826636/rails-http-post/31826926#31826926", "title": "Rails HTTP - POST", "body": "<p>You should set Content-Type header in your request as well:</p>\n\n<pre><code>http.post(uri, data.to_json, {\"Content-Type\" =&gt; \"application/json\", \"Accept\" =&gt; \"application/json\"})\n</code></pre>\n\n<p>Then you can use <code>params[:id]</code> and <code>params[:data]</code> in your controller.</p>\n\n<pre><code>def create\n  @package = {id: params.require(:id), data: params.require(:data)}\n  head :no_content\nend\n</code></pre>\n\n<p><code>head :no_content</code> will render empty reply (so you can create view later). And <code>params.require</code> will ensure that your parameters is provided (otherwise controller will return 400 Bad Request response) \u2013 so you won't receive some strange <code>undefined method ... of nil</code> errors later in case you missed params in your request.</p>\n"}], "owner": {"reputation": 613, "user_id": 5032873, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/MSWnq.jpg?s=128&g=1", "display_name": "mike927", "link": "https://stackoverflow.com/users/5032873/mike927"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4268, "favorite_count": 0, "accepted_answer_id": 31826926, "answer_count": 1, "score": 3, "last_activity_date": 1438768409, "creation_date": 1438761522, "last_edit_date": 1438762897, "question_id": 31826636, "link": "https://stackoverflow.com/questions/31826636/rails-http-post", "title": "Rails HTTP - POST", "body": "<p>I am sending HTTP POST request:</p>\n\n<pre><code>data = { id: 1, name: 'ABC' }\n\nuri = URI.parse('http://localhost:3000/events')\nhttp = Net::HTTP.new(uri.host, uri.port)\nhttp.post(uri, data.to_json)\n</code></pre>\n\n<p>My routes file:</p>\n\n<pre><code>Rails.application.routes.draw do\n  post '/events' =&gt; 'receiver#create'\nend\n</code></pre>\n\n<p>Whereas create methods looks like:</p>\n\n<pre><code>def create\n package = {\n  id: ,\n  name: \n }\nend\n</code></pre>\n\n<p>How can I get access to data values passing via request? My goal is to assign it to new hash within create method</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "reference", "foreign-keys", "relational-database"], "comments": [{"owner": {"reputation": 3691, "user_id": 3732906, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/d83d53cbd84d7427ebfd45190b9ded9d?s=128&d=identicon&r=PG&f=1", "display_name": "Coda Chang", "link": "https://stackoverflow.com/users/3732906/coda-chang"}, "reply_to_user": {"reputation": 47232, "user_id": 1772830, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Qtoqg.jpg?s=128&g=1", "display_name": "Andrey Deineko", "link": "https://stackoverflow.com/users/1772830/andrey-deineko"}, "edited": false, "score": 0, "creation_date": 1438761695, "post_id": 31826409, "comment_id": 51576609, "body": "yeah! you have been a great help, thanks"}], "answers": [{"tags": [], "owner": {"reputation": 2291, "user_id": 1752333, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1009edfa56c5a71d0e6de2738342bee7?s=128&d=identicon&r=PG", "display_name": "scorix", "link": "https://stackoverflow.com/users/1752333/scorix"}, "is_accepted": false, "score": 8, "last_activity_date": 1438761568, "creation_date": 1438761568, "answer_id": 31826650, "question_id": 31826409, "link": "https://stackoverflow.com/questions/31826409/rails-violates-foreign-key-constraint/31826650#31826650", "title": "Rails: violates foreign key constraint", "body": "<p>Try this:</p>\n\n<pre><code>ActiveRecord::Base.connection.disable_referential_integrity do\n    Book.destroy_all\n    Genre.destroy_all\n    # ...create data \nend\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 6375, "user_id": 6826164, "user_type": "registered", "accept_rate": 39, "profile_image": "https://lh6.googleusercontent.com/-CKThqFqe5Eo/AAAAAAAAAAI/AAAAAAAAP10/ih0uh1YgT_I/photo.jpg?sz=128", "display_name": "Jonathan Tuzman", "link": "https://stackoverflow.com/users/6826164/jonathan-tuzman"}, "edited": false, "score": 0, "creation_date": 1547749380, "post_id": 31826756, "comment_id": 95308497, "body": "how do you set that at the database level?"}, {"owner": {"reputation": 47232, "user_id": 1772830, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Qtoqg.jpg?s=128&g=1", "display_name": "Andrey Deineko", "link": "https://stackoverflow.com/users/1772830/andrey-deineko"}, "reply_to_user": {"reputation": 6375, "user_id": 6826164, "user_type": "registered", "accept_rate": 39, "profile_image": "https://lh6.googleusercontent.com/-CKThqFqe5Eo/AAAAAAAAAAI/AAAAAAAAP10/ih0uh1YgT_I/photo.jpg?sz=128", "display_name": "Jonathan Tuzman", "link": "https://stackoverflow.com/users/6826164/jonathan-tuzman"}, "edited": false, "score": 1, "creation_date": 1547910688, "post_id": 31826756, "comment_id": 95359745, "body": "@JonathanTuzman <code>add_foreign_key(       :comments,       :users,       column: :user_id,       on_delete: :cascade     )</code>"}], "tags": [], "owner": {"reputation": 47232, "user_id": 1772830, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Qtoqg.jpg?s=128&g=1", "display_name": "Andrey Deineko", "link": "https://stackoverflow.com/users/1772830/andrey-deineko"}, "is_accepted": true, "score": 14, "last_activity_date": 1548004262, "last_edit_date": 1548004262, "creation_date": 1438761861, "answer_id": 31826756, "question_id": 31826409, "link": "https://stackoverflow.com/questions/31826409/rails-violates-foreign-key-constraint/31826756#31826756", "title": "Rails: violates foreign key constraint", "body": "<p>Add <code>dependent: :destroy</code> option to your <code>has_many</code> definitions. </p>\n\n<p><a href=\"http://apidock.com/rails/ActiveRecord/Associations/ClassMethods/has_many\" rel=\"nofollow noreferrer\">Check docs</a></p>\n\n<p>Yet better option to respect data integrity is to set the <code>CASCADE DELETE</code> on the database level: say, you have <code>comments</code> table and <code>users</code> table. User has many comments You want to add a foreign_key to table <code>comments</code> and set deleting the comment whenever the user is destroyed you would go with the following (the <code>on_delete: :cascade</code> option will ensure it):</p>\n\n<pre><code>add_foreign_key(\n  :comments,\n  :users,\n  column:\n  :user_id,\n  on_delete: :cascade\n)\n</code></pre>\n"}], "owner": {"reputation": 3691, "user_id": 3732906, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/d83d53cbd84d7427ebfd45190b9ded9d?s=128&d=identicon&r=PG&f=1", "display_name": "Coda Chang", "link": "https://stackoverflow.com/users/3732906/coda-chang"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 8195, "favorite_count": 2, "accepted_answer_id": 31826756, "answer_count": 2, "score": 9, "last_activity_date": 1548004262, "creation_date": 1438760827, "last_edit_date": 1538733561, "question_id": 31826409, "link": "https://stackoverflow.com/questions/31826409/rails-violates-foreign-key-constraint", "title": "Rails: violates foreign key constraint", "body": "<p>I have three models: <code>Book</code>, <code>genre</code>, <code>BookGenre</code>, and here are relationships:</p>\n\n<pre><code>class BookGenre &lt; ActiveRecord::Base\n  belongs_to :book\n  belongs_to :genre\nend\n\n\nclass Book &lt; ActiveRecord::Base\n  has_many :book_genres\n  has_many :genres, through: :book_genres\nend\n\n\nclass Genre &lt; ActiveRecord::Base\n  has_many :book_genres\n  has_many :books, through: :book_genres\nend\n</code></pre>\n\n<p>And then I use <code>seed</code> file to put data into these tables.</p>\n\n<p>But when I want to do <code>rake db:seed</code> again, it showed this error </p>\n\n<pre><code>ActiveRecord::InvalidForeignKey: PG::ForeignKeyViolation: ERROR:  update or delete on table \"books\" violates foreign key constraint \"fk_rails_4a117802d7\" on table \"book_genres\"\nDETAIL:  Key (id)=(10) is still referenced from table \"book_genres\".\n</code></pre>\n\n<p>In my <strong>seed.rb</strong> </p>\n\n<pre><code>Book.destroy_all\nGenre.destroy_all\n...create data \n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4", "scaffolding", "ruby-on-rails-4.1"], "comments": [{"owner": {"reputation": 32131, "user_id": 2346461, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/i3xAf.jpg?s=128&g=1", "display_name": "Pavan", "link": "https://stackoverflow.com/users/2346461/pavan"}, "edited": false, "score": 0, "creation_date": 1438758967, "post_id": 31825750, "comment_id": 51574937, "body": "Do you have the <code>routes</code> set up in <code>routes.rb</code>?"}, {"owner": {"reputation": 40, "user_id": 5156578, "user_type": "registered", "accept_rate": 60, "profile_image": "https://lh5.googleusercontent.com/-YNDzP52bx1U/AAAAAAAAAAI/AAAAAAAAAUE/3pv_ZpB96cA/photo.jpg?sz=128", "display_name": "Ryzokuken", "link": "https://stackoverflow.com/users/5156578/ryzokuken"}, "reply_to_user": {"reputation": 32131, "user_id": 2346461, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/i3xAf.jpg?s=128&g=1", "display_name": "Pavan", "link": "https://stackoverflow.com/users/2346461/pavan"}, "edited": false, "score": 0, "creation_date": 1438759007, "post_id": 31825750, "comment_id": 51574957, "body": "doesn&#39;t scaffolding do that for me?"}, {"owner": {"reputation": 1440, "user_id": 3839549, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/477123df7db174c0b2739f0e6ac9b20e?s=128&d=identicon&r=PG&f=1", "display_name": "Dave Slutzkin", "link": "https://stackoverflow.com/users/3839549/dave-slutzkin"}, "edited": false, "score": 3, "creation_date": 1438759029, "post_id": 31825750, "comment_id": 51574970, "body": "Calling a column <code>class</code> is almost certainly a bad idea. Not sure if that&#39;s related but try changing the name of that column."}, {"owner": {"reputation": 40, "user_id": 5156578, "user_type": "registered", "accept_rate": 60, "profile_image": "https://lh5.googleusercontent.com/-YNDzP52bx1U/AAAAAAAAAAI/AAAAAAAAAUE/3pv_ZpB96cA/photo.jpg?sz=128", "display_name": "Ryzokuken", "link": "https://stackoverflow.com/users/5156578/ryzokuken"}, "edited": false, "score": 0, "creation_date": 1438759056, "post_id": 31825750, "comment_id": 51574983, "body": "No routes set up as of now. All my routes.rb has is: <code>resources :students</code>"}, {"owner": {"reputation": 32131, "user_id": 2346461, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/i3xAf.jpg?s=128&g=1", "display_name": "Pavan", "link": "https://stackoverflow.com/users/2346461/pavan"}, "reply_to_user": {"reputation": 1440, "user_id": 3839549, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/477123df7db174c0b2739f0e6ac9b20e?s=128&d=identicon&r=PG&f=1", "display_name": "Dave Slutzkin", "link": "https://stackoverflow.com/users/3839549/dave-slutzkin"}, "edited": false, "score": 1, "creation_date": 1438759234, "post_id": 31825750, "comment_id": 51575100, "body": "Yes. Nevermind :) Try @Dave suggestion. <code>class</code> a keyword in <b><i>Ruby</i></b>."}, {"owner": {"reputation": 40, "user_id": 5156578, "user_type": "registered", "accept_rate": 60, "profile_image": "https://lh5.googleusercontent.com/-YNDzP52bx1U/AAAAAAAAAAI/AAAAAAAAAUE/3pv_ZpB96cA/photo.jpg?sz=128", "display_name": "Ryzokuken", "link": "https://stackoverflow.com/users/5156578/ryzokuken"}, "reply_to_user": {"reputation": 1440, "user_id": 3839549, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/477123df7db174c0b2739f0e6ac9b20e?s=128&d=identicon&r=PG&f=1", "display_name": "Dave Slutzkin", "link": "https://stackoverflow.com/users/3839549/dave-slutzkin"}, "edited": false, "score": 0, "creation_date": 1438759390, "post_id": 31825750, "comment_id": 51575200, "body": "crap. <code>class</code> was creating problems. Thanks @Dave, and post that as an answer. I will vote up and tag solved :D  P.S. Rails ain&#39;t exactly programming but it still uses class a a keyword"}, {"owner": {"reputation": 2322, "user_id": 3088748, "user_type": "registered", "accept_rate": 63, "profile_image": "https://graph.facebook.com/544821277/picture?type=large", "display_name": "AJFaraday", "link": "https://stackoverflow.com/users/3088748/ajfaraday"}, "edited": false, "score": 0, "creation_date": 1438759595, "post_id": 31825750, "comment_id": 51575321, "body": "@Ryzokuken I&#39;ve been coding rails for 5 years, it is, exactly, programming. What you&#39;re currently doing, using a scaffold to create a completely generic CRUD app, is just using a script, but please don&#39;t think that&#39;s the end of it&#39;s capabilities."}, {"owner": {"reputation": 40, "user_id": 5156578, "user_type": "registered", "accept_rate": 60, "profile_image": "https://lh5.googleusercontent.com/-YNDzP52bx1U/AAAAAAAAAAI/AAAAAAAAAUE/3pv_ZpB96cA/photo.jpg?sz=128", "display_name": "Ryzokuken", "link": "https://stackoverflow.com/users/5156578/ryzokuken"}, "reply_to_user": {"reputation": 2322, "user_id": 3088748, "user_type": "registered", "accept_rate": 63, "profile_image": "https://graph.facebook.com/544821277/picture?type=large", "display_name": "AJFaraday", "link": "https://stackoverflow.com/users/3088748/ajfaraday"}, "edited": false, "score": 0, "creation_date": 1438762017, "post_id": 31825750, "comment_id": 51576792, "body": "@AJFaraday thanks for the advice sir, ill keep it in mind. :D"}, {"owner": {"reputation": 1052, "user_id": 5153223, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/b2eb1e2066f49fd770286205385ad6d1?s=128&d=identicon&r=PG&f=1", "display_name": "Borsunho", "link": "https://stackoverflow.com/users/5153223/borsunho"}, "edited": false, "score": 0, "creation_date": 1438762504, "post_id": 31825750, "comment_id": 51577086, "body": "I&#39;d advise you to stop using <code>rails g scaffold</code> and stick to more specific generators like <code>rails g model</code> because if you think that Rails is not programming you are clearly missing stuff that happens behind the scenes."}], "answers": [{"comments": [{"owner": {"reputation": 40, "user_id": 5156578, "user_type": "registered", "accept_rate": 60, "profile_image": "https://lh5.googleusercontent.com/-YNDzP52bx1U/AAAAAAAAAAI/AAAAAAAAAUE/3pv_ZpB96cA/photo.jpg?sz=128", "display_name": "Ryzokuken", "link": "https://stackoverflow.com/users/5156578/ryzokuken"}, "edited": false, "score": 0, "creation_date": 1438842304, "post_id": 31847141, "comment_id": 51617212, "body": "Thanks! It works like a charm :D  Too stupid of me not to notice that, but maybe coding(HTML/CSS) has taken its toll on me"}], "tags": [], "owner": {"reputation": 1440, "user_id": 3839549, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/477123df7db174c0b2739f0e6ac9b20e?s=128&d=identicon&r=PG&f=1", "display_name": "Dave Slutzkin", "link": "https://stackoverflow.com/users/3839549/dave-slutzkin"}, "is_accepted": true, "score": 0, "last_activity_date": 1438837044, "creation_date": 1438837044, "answer_id": 31847141, "question_id": 31825750, "link": "https://stackoverflow.com/questions/31825750/rails-scaffolding-controllernew-crashing-server/31847141#31847141", "title": "Rails Scaffolding [controller]#new crashing server", "body": "<p><code>class</code> is a keyword in Ruby, so using that as a column name isn't a great idea. On this line:</p>\n\n<p><code>$ rails generate scaffold student name:string id_number:integer class:integer section:string issued:date returned:date fine:integer reissued:date</code></p>\n\n<p>change <code>class:integer</code> to <code>kind:integer</code> and it should work.</p>\n"}], "owner": {"reputation": 40, "user_id": 5156578, "user_type": "registered", "accept_rate": 60, "profile_image": "https://lh5.googleusercontent.com/-YNDzP52bx1U/AAAAAAAAAAI/AAAAAAAAAUE/3pv_ZpB96cA/photo.jpg?sz=128", "display_name": "Ryzokuken", "link": "https://stackoverflow.com/users/5156578/ryzokuken"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 56, "favorite_count": 0, "accepted_answer_id": 31847141, "answer_count": 1, "score": 0, "last_activity_date": 1440835216, "creation_date": 1438758778, "last_edit_date": 1440835216, "question_id": 31825750, "link": "https://stackoverflow.com/questions/31825750/rails-scaffolding-controllernew-crashing-server", "title": "Rails Scaffolding [controller]#new crashing server", "body": "<p>Continuing with my Rails Library Management App, I learnt about scaffolds and thought that it would give me ample framework to re-work upon. The thing is, that although scaffolds are being generated and everything, they aren't working properly. Rather, they aren't working at all.</p>\n\n<p>When I access to <strong><a href=\"http://localhost/[controller-name]\" rel=\"nofollow\">http://localhost/[controller-name]</a></strong>, It shoots up a webpage that says <strong>Listing [controller-name]</strong> all fine. But when i click on new button or navigate to <strong><a href=\"http://localhost/[controller-name]/new\" rel=\"nofollow\">http://localhost/[controller-name]/new</a></strong>, the server crashes without an error.</p>\n\n<p><strong>P.S.</strong> </p>\n\n<p>While trying things, I noticed that although,</p>\n\n<pre><code>$ rails generate scaffold person name:string identity:integer DOB:date\n</code></pre>\n\n<p>works just fine, </p>\n\n<pre><code>$ rails generate scaffold student name:string id_number:integer class:integer section:string issued:date returned:date fine:integer reissued:date\n</code></pre>\n\n<p>doesn't?</p>\n\n<p><strong>P.P.S.</strong></p>\n\n<p>The real problem is, accessing the action \"student#new\" does not only <strong>NOT</strong> work, but also crashes my server (yeah no exiting WEBrick). All I can provide are the messages that appear at the end:</p>\n\n<pre><code>Started GET \"/assets/students.css?body=1\" for 127.0.0.1 at 2015-08-05 12:20:19 +0530\n\n\nStarted GET \"/assets/scaffolds.css?body=1\" for 127.0.0.1 at 2015-08-05 12:20:19 +0530\n\n\nStarted GET \"/assets/application.css?body=1\" for 127.0.0.1 at 2015-08-05 12:20:19 +0530\n\n\nStarted GET \"/students/new\" for 127.0.0.1 at 2015-08-05 12:20:21 +0530\nProcessing by StudentsController#new as HTML\n</code></pre>\n"}, {"tags": ["ruby", "encoding", "uri"], "answers": [{"comments": [{"owner": {"reputation": 20735, "user_id": 307106, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/6a13e655e637138f8d571cec3f9cea76?s=128&d=identicon&r=PG", "display_name": "jrochkind", "link": "https://stackoverflow.com/users/307106/jrochkind"}, "edited": false, "score": 1, "creation_date": 1443671261, "post_id": 31830456, "comment_id": 53588991, "body": "This will not do anything useful. URI.encode is not idempotent. Often <code>url != URI.encode(url)</code> even if the url was already escaped/encoded. Which is exactly what leads to the double-encoding problem in the original question. In fact, your code is exactly equivalent to simply <code>URI.encode(url)</code>, the ternary you put in there will never change the output vs the simple original (try to find an example where it does)."}, {"owner": {"reputation": 406, "user_id": 4482286, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-Sl_16MRc3EQ/AAAAAAAAAAI/AAAAAAAAAJ4/OjoaYnwT9HU/photo.jpg?sz=128", "display_name": "RossMc", "link": "https://stackoverflow.com/users/4482286/rossmc"}, "reply_to_user": {"reputation": 20735, "user_id": 307106, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/6a13e655e637138f8d571cec3f9cea76?s=128&d=identicon&r=PG", "display_name": "jrochkind", "link": "https://stackoverflow.com/users/307106/jrochkind"}, "edited": false, "score": 0, "creation_date": 1444035890, "post_id": 31830456, "comment_id": 53714641, "body": "That&#39;s very useful to know, thanks. I expected that there would be a difference to the string."}, {"owner": {"reputation": 20735, "user_id": 307106, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/6a13e655e637138f8d571cec3f9cea76?s=128&d=identicon&r=PG", "display_name": "jrochkind", "link": "https://stackoverflow.com/users/307106/jrochkind"}, "edited": false, "score": 1, "creation_date": 1444045081, "post_id": 31830456, "comment_id": 53720074, "body": "There is a difference to the string, even if it was already URI-encoded; that&#39;s why it won&#39;t work."}], "tags": [], "owner": {"reputation": 406, "user_id": 4482286, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-Sl_16MRc3EQ/AAAAAAAAAAI/AAAAAAAAAJ4/OjoaYnwT9HU/photo.jpg?sz=128", "display_name": "RossMc", "link": "https://stackoverflow.com/users/4482286/rossmc"}, "is_accepted": false, "score": -1, "last_activity_date": 1438771962, "creation_date": 1438771962, "answer_id": 31830456, "question_id": 31825687, "link": "https://stackoverflow.com/questions/31825687/how-to-avoid-double-encoding-uri/31830456#31830456", "title": "How to avoid double encoding URI", "body": "<p>I'm not sure of a method included in OpenURI to do this, so just do a comparison with the <a href=\"https://en.wikipedia.org/wiki/Ternary_operation\" rel=\"nofollow\">ternary</a> operator.</p>\n\n<pre><code>url == URI.encode(url) ? url : URI.encode(url)\n</code></pre>\n\n<p>It's easily readable and simple.</p>\n\n<pre><code>if_this_is_a_true_value ? then_the_result_is_this : else_it_is_this\n</code></pre>\n\n<p>There may be other ways, including checking the string for certain characters, etc. But I think for the sake of keeping things simple and readable, this is a decent solution.</p>\n"}, {"comments": [{"owner": {"reputation": 1983, "user_id": 7549483, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/986a0b7cfec95b191249f7c907a249e4?s=128&d=identicon&r=PG&f=1", "display_name": "Eureka", "link": "https://stackoverflow.com/users/7549483/eureka"}, "edited": false, "score": 0, "creation_date": 1578698150, "post_id": 32879116, "comment_id": 105536863, "body": "Or whenever you store a URI in a variable, explicitly state whether it is encorded or not. It is equivalent to the task of keeping track of units (Centigrade versus Fahrenheit, or kg versus lbs). If the variable name contains the units, such as <code>imageUrlEncoded</code>, you will always know whether to encode/decode or not."}], "tags": [], "owner": {"reputation": 20735, "user_id": 307106, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/6a13e655e637138f8d571cec3f9cea76?s=128&d=identicon&r=PG", "display_name": "jrochkind", "link": "https://stackoverflow.com/users/307106/jrochkind"}, "is_accepted": false, "score": 4, "last_activity_date": 1443671305, "creation_date": 1443671305, "answer_id": 32879116, "question_id": 31825687, "link": "https://stackoverflow.com/questions/31825687/how-to-avoid-double-encoding-uri/32879116#32879116", "title": "How to avoid double encoding URI", "body": "<p>There's no real way, you just need to keep track of whether the string is already URI-escaped or not. If you have a string that you have no idea if it's already URI-escaped or not, there's no good solution. </p>\n\n<p>Generally you should be doing encoding at a single point in your code. In memory, all your strings should generally NOT be URI-escaped. You should unescape components immediately after parsing them from a URI. And when constructing URI's, only escape/encode them at the point of constructing a full URI. </p>\n\n<p>You are out of luck at the point you have a string and have no idea if it's encoded or not; you need to keep track, ideally by making sure the encoding happens at clear system boundaries. </p>\n"}, {"tags": [], "owner": {"reputation": 65, "user_id": 4938478, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3a9488436b5db90560db5e69dc322a05?s=128&d=identicon&r=PG&f=1", "display_name": "MOzSalles", "link": "https://stackoverflow.com/users/4938478/mozsalles"}, "is_accepted": false, "score": 2, "last_activity_date": 1486596596, "last_edit_date": 1495542261, "creation_date": 1486595937, "answer_id": 42125456, "question_id": 31825687, "link": "https://stackoverflow.com/questions/31825687/how-to-avoid-double-encoding-uri/42125456#42125456", "title": "How to avoid double encoding URI", "body": "<p>There's a duplicate of this question that has a partially valid answer by user <a href=\"https://stackoverflow.com/users/179125/jordan\">jordan</a></p>\n\n<p>(<a href=\"https://stackoverflow.com/questions/37592065/ruby-how-to-encode-url-without-re-encoding-already-encoded-characters\">Ruby - how to encode URL without re-encoding already encoded characters</a>).</p>\n\n<blockquote>\n  <p><code>URI.escape</code> appears to work the way you want in all cases except when\n  characters are already encoded. With that in mind we can take the\n  result of <code>URI.encode</code> and use <code>String#gsub</code> to \"un-encode\" only those\n  characters.</p>\n  \n  <p>The below regular expression looks for <code>%25</code> (an encoded <code>%</code>) followed\n  by two hex digits, turning e.g. <code>%252f</code> back into <code>%2f</code>:</p>\n\n<pre><code>require \"uri\"\n\nDOUBLE_ESCAPED_EXPR = /%25([0-9a-f]{2})/i\n\ndef escape_uri(uri)\n  URI.encode(uri).gsub(DOUBLE_ESCAPED_EXPR, '%\\1')\nend\n\nputs escape_uri(\"https://www.example.com/url-d\u00e9j\u00e0-vu\")\n# =&gt; https://www.example.com/url-d%C3%A9j%C3%A0-vu\n</code></pre>\n</blockquote>\n\n<p>It'a a bit klunky but it works for all the problem cases I have. Better yet, it's idempotent:</p>\n\n<pre><code>URI.encode(\"http://example.com/#example%example\")\n# =&gt; \"http://example.com/%23example%25example\"\n\nURI.encode(URI.encode(\"http://example.com/#example%example\"))\n# =&gt; \"http://example.com/%2523example%2525example\"\n\nescape_uri(\"http://example.com/#example%example\")\n# =&gt; \"http://example.com/%23example%25example\"\n\nescape_uri(escape_uri(\"http://example.com/#example%example\"))\n# =&gt; \"http://example.com/%23example%25example\"\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 529, "user_id": 5273239, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2f4d2e5b1a18cf2c57cdd9b2fae56dd0?s=128&d=identicon&r=PG&f=1", "display_name": "Matthew", "link": "https://stackoverflow.com/users/5273239/matthew"}, "edited": false, "score": 0, "creation_date": 1579916473, "post_id": 47167234, "comment_id": 105938005, "body": "It&#39;s worth noting that <code>Addressable::URI.normaized_encode</code> is 9-10x slower than <code>URI.encode</code>. For larger apps that are looking for performance, Addressable is not the right gem."}], "tags": [], "owner": {"reputation": 1959, "user_id": 1020168, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/f97951f0a41a76e04e3bf542dc171a58?s=128&d=identicon&r=PG", "display_name": "MothOnMars", "link": "https://stackoverflow.com/users/1020168/mothonmars"}, "is_accepted": false, "score": 1, "last_activity_date": 1510088000, "creation_date": 1510088000, "answer_id": 47167234, "question_id": 31825687, "link": "https://stackoverflow.com/questions/31825687/how-to-avoid-double-encoding-uri/47167234#47167234", "title": "How to avoid double encoding URI", "body": "<p>The <a href=\"https://rubygems.org/gems/addressable/versions/2.4.0\" rel=\"nofollow noreferrer\">Addressable</a> gem often has the methods lacking in the URI library. In this case, Addressable::URI's <code>normalized_encode</code> method may do the trick:</p>\n\n<pre><code>weird = \"https://www.example.com/this url\u2019s weird\"\n# =&gt; \"https://www.example.com/this url\u2019s weird\"\n\nencoded = Addressable::URI.normalized_encode weird\n# =&gt; \"https://www.example.com/this%20url%E2%80%99s%20weird\"\n\nAddressable::URI.normalized_encode encoded\n# =&gt; \"https://www.example.com/this%20url%E2%80%99s%20weird\"\n</code></pre>\n\n<p>References:\n<a href=\"http://www.rubydoc.info/gems/addressable/2.3.5/Addressable/URI#normalized_encode-class_method\" rel=\"nofollow noreferrer\">http://www.rubydoc.info/gems/addressable/2.3.5/Addressable/URI#normalized_encode-class_method</a></p>\n"}, {"tags": [], "owner": {"reputation": 529, "user_id": 5273239, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2f4d2e5b1a18cf2c57cdd9b2fae56dd0?s=128&d=identicon&r=PG&f=1", "display_name": "Matthew", "link": "https://stackoverflow.com/users/5273239/matthew"}, "is_accepted": false, "score": 1, "last_activity_date": 1579916906, "creation_date": 1579916906, "answer_id": 59905690, "question_id": 31825687, "link": "https://stackoverflow.com/questions/31825687/how-to-avoid-double-encoding-uri/59905690#59905690", "title": "How to avoid double encoding URI", "body": "<p>What's wrong with decoding a URI before encoding it? You sacrifice a little bit of performance for encoding safety:</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>uri = \"www.example.com/%E5%86%99%E7%9C%9F/cats\"\n\nURI.encode(uri)\n\n# =&gt; www.example.com/%25E5%2586%2599%25E7%259C%259F/cats\n\nURI.encode(URI.decode(uri))\n\n# =&gt; www.example.com/%E5%86%99%E7%9C%9F/cats\n</code></pre>\n\n<p>It's a little less than twice as slow as a simple encode, but it's <em>much</em> faster than the alternatives like <code>Addressable</code>. </p>\n"}], "owner": {"reputation": 26124, "user_id": 972789, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/4Y8VM.jpg?s=128&g=1", "display_name": "Nick Ginanto", "link": "https://stackoverflow.com/users/972789/nick-ginanto"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4795, "favorite_count": 0, "answer_count": 5, "score": 2, "last_activity_date": 1579916906, "creation_date": 1438758563, "question_id": 31825687, "link": "https://stackoverflow.com/questions/31825687/how-to-avoid-double-encoding-uri", "title": "How to avoid double encoding URI", "body": "<p>if a URL is not encoded, it causes problems later on, so I do</p>\n\n<pre><code>URI.encode(url)\n</code></pre>\n\n<p>problem is if the url is already encoded (for whatever reason), which further encodes the url making it unusable.</p>\n\n<p>besides doing <code>URI.encode(URI.decode(url))</code>, is there a better way to ensure the url is encoded only once?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "debugging", "ruby-on-rails-4"], "comments": [{"owner": {"reputation": 48413, "user_id": 1279683, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1veuT.jpg?s=128&g=1", "display_name": "Marek Lipka", "link": "https://stackoverflow.com/users/1279683/marek-lipka"}, "edited": false, "score": 1, "creation_date": 1438758265, "post_id": 31825546, "comment_id": 51574536, "body": "The error is pretty descriptive, <code>current_item.quantity</code> returns <code>nil</code>."}, {"owner": {"reputation": 154, "user_id": 4497639, "user_type": "registered", "accept_rate": 56, "profile_image": "https://lh3.googleusercontent.com/-RLLqItvwRik/AAAAAAAAAAI/AAAAAAAAABg/L0Ij-MTw0FQ/photo.jpg?sz=128", "display_name": "Abhilash Cherukat", "link": "https://stackoverflow.com/users/4497639/abhilash-cherukat"}, "reply_to_user": {"reputation": 48413, "user_id": 1279683, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1veuT.jpg?s=128&g=1", "display_name": "Marek Lipka", "link": "https://stackoverflow.com/users/1279683/marek-lipka"}, "edited": false, "score": 0, "creation_date": 1438758358, "post_id": 31825546, "comment_id": 51574578, "body": "So it is saying the quantity is nil and not the current_item? if yes i seriously look like a fool to miss that :("}, {"owner": {"reputation": 48413, "user_id": 1279683, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1veuT.jpg?s=128&g=1", "display_name": "Marek Lipka", "link": "https://stackoverflow.com/users/1279683/marek-lipka"}, "edited": false, "score": 2, "creation_date": 1438758403, "post_id": 31825546, "comment_id": 51574601, "body": "No, <code>current_item</code> probably returns correct object, but its <code>quantity</code> is <code>nil</code>."}, {"owner": {"reputation": 154, "user_id": 4497639, "user_type": "registered", "accept_rate": 56, "profile_image": "https://lh3.googleusercontent.com/-RLLqItvwRik/AAAAAAAAAAI/AAAAAAAAABg/L0Ij-MTw0FQ/photo.jpg?sz=128", "display_name": "Abhilash Cherukat", "link": "https://stackoverflow.com/users/4497639/abhilash-cherukat"}, "reply_to_user": {"reputation": 48413, "user_id": 1279683, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1veuT.jpg?s=128&g=1", "display_name": "Marek Lipka", "link": "https://stackoverflow.com/users/1279683/marek-lipka"}, "edited": false, "score": 0, "creation_date": 1438758509, "post_id": 31825546, "comment_id": 51574661, "body": "ok is there a way to print the values in the current_item into the console from a modal as an array? I am looking something like print_r from php"}, {"owner": {"reputation": 48413, "user_id": 1279683, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1veuT.jpg?s=128&g=1", "display_name": "Marek Lipka", "link": "https://stackoverflow.com/users/1279683/marek-lipka"}, "edited": false, "score": 1, "creation_date": 1438758580, "post_id": 31825546, "comment_id": 51574709, "body": "Honestly, there are much better ways to debug your code in Ruby than printing output into the log - look at <code>pry</code>, for example."}, {"owner": {"reputation": 154, "user_id": 4497639, "user_type": "registered", "accept_rate": 56, "profile_image": "https://lh3.googleusercontent.com/-RLLqItvwRik/AAAAAAAAAAI/AAAAAAAAABg/L0Ij-MTw0FQ/photo.jpg?sz=128", "display_name": "Abhilash Cherukat", "link": "https://stackoverflow.com/users/4497639/abhilash-cherukat"}, "reply_to_user": {"reputation": 48413, "user_id": 1279683, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1veuT.jpg?s=128&g=1", "display_name": "Marek Lipka", "link": "https://stackoverflow.com/users/1279683/marek-lipka"}, "edited": false, "score": 0, "creation_date": 1438758678, "post_id": 31825546, "comment_id": 51574762, "body": "Thank you, It was a pleasant conversation. have a nice day"}], "owner": {"reputation": 154, "user_id": 4497639, "user_type": "registered", "accept_rate": 56, "profile_image": "https://lh3.googleusercontent.com/-RLLqItvwRik/AAAAAAAAAAI/AAAAAAAAABg/L0Ij-MTw0FQ/photo.jpg?sz=128", "display_name": "Abhilash Cherukat", "link": "https://stackoverflow.com/users/4497639/abhilash-cherukat"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 211, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1438758183, "creation_date": 1438758183, "question_id": 31825546, "link": "https://stackoverflow.com/questions/31825546/debugging-in-rails-or-printing-variable-value-to-log-in-rails", "title": "Debugging in rails or Printing variable value to log in rails", "body": "<p>I am very new to ruby.</p>\n\n<p>This is my model(I am following an example from the book \"Agile development using Rails 4\")</p>\n\n<pre><code>class Cart &lt; ActiveRecord::Base\n  has_many :line_items,dependent: :destroy\n\n  def add_product(product_id)\n    current_item =line_items.find_by(product_id: product_id)\n\n    if current_item\n        current_item.quantity += 1\n    else\n      current_item=line_items.build(product_id: product_id)\n    end\n    current_item\n  end\n\nend\n</code></pre>\n\n<p>This is giving me error \"undefined method `+' for nil:NilClass\" on the line \"current_item.quantity += 1\"</p>\n\n<p>The code is written by hand and not a copy paste. I dont want to do a copy paste because I am going to learn the hard way. </p>\n\n<p>I understood that the current_item is not having nil, if that is the case it will execute the else part.But again the error is saying its a nilClass. I am confused. How will I debug the problem. I would like to know a way to print the current_item,product_id to the development log or console.</p>\n\n<p>The call is comming from the line_item controller</p>\n\n<pre><code>def create\n    product=Product.find(params[:product_id])\n    @line_item = @cart.add_product(product.id)\n    respond_to do |format|\n      if @line_item.save\n        format.html { redirect_to @line_item.cart,\n                      notice: 'Line item was successfully created.' }\n        format.json { render :show, status: :created, location: @line_item }\n      else\n        format.html { render action:new }\n        format.json { render json: @line_item.errors, status: :unprocessable_entity }\n      end\n    end\n  end\n</code></pre>\n\n<p>Where am I going wrong?</p>\n"}, {"tags": ["ruby", "sinatra", "sequel"], "comments": [{"owner": {"reputation": 11068, "user_id": 335847, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/o0AC7.png?s=128&g=1", "display_name": "iain", "link": "https://stackoverflow.com/users/335847/iain"}, "edited": false, "score": 0, "creation_date": 1438788470, "post_id": 31824424, "comment_id": 51595155, "body": "You&#39;ve commented out the unique constraint. The code above should create a new entry every time you visit the route."}, {"owner": {"reputation": 938, "user_id": 3820641, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/58350e62b68a86f07c0400096d10706c?s=128&d=identicon&r=PG&f=1", "display_name": "harisk92", "link": "https://stackoverflow.com/users/3820641/harisk92"}, "reply_to_user": {"reputation": 11068, "user_id": 335847, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/o0AC7.png?s=128&g=1", "display_name": "iain", "link": "https://stackoverflow.com/users/335847/iain"}, "edited": false, "score": 0, "creation_date": 1438799948, "post_id": 31824424, "comment_id": 51602103, "body": "@iain well yeah,but it creates 3 records instead .First I got Unique constraint violation I thought something is wrong so I checked without it and realized that each time you visit that route you create 3 new entries."}, {"owner": {"reputation": 11068, "user_id": 335847, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/o0AC7.png?s=128&g=1", "display_name": "iain", "link": "https://stackoverflow.com/users/335847/iain"}, "edited": false, "score": 0, "creation_date": 1438814964, "post_id": 31824424, "comment_id": 51609668, "body": "What happens if you load Sequel and your model into IRB and you run the <code>User.create\u2026</code> method, do you get 3 entries then? How are you checking that you got 3 entries?"}, {"owner": {"reputation": 938, "user_id": 3820641, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/58350e62b68a86f07c0400096d10706c?s=128&d=identicon&r=PG&f=1", "display_name": "harisk92", "link": "https://stackoverflow.com/users/3820641/harisk92"}, "reply_to_user": {"reputation": 11068, "user_id": 335847, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/o0AC7.png?s=128&g=1", "display_name": "iain", "link": "https://stackoverflow.com/users/335847/iain"}, "edited": false, "score": 0, "creation_date": 1438933802, "post_id": 31824424, "comment_id": 51662735, "body": "@iain solved it,problem was that I got error <code>ERROR Rack::Lint::LintError: Body yielded non-string value</code>.I added string response at the end and everything was fine."}, {"owner": {"reputation": 11068, "user_id": 335847, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/o0AC7.png?s=128&g=1", "display_name": "iain", "link": "https://stackoverflow.com/users/335847/iain"}, "edited": false, "score": 0, "creation_date": 1438950464, "post_id": 31824424, "comment_id": 51673010, "body": "Ah, very obvious now you&#39;ve said it :) Glad you got it sorted."}], "owner": {"reputation": 938, "user_id": 3820641, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/58350e62b68a86f07c0400096d10706c?s=128&d=identicon&r=PG&f=1", "display_name": "harisk92", "link": "https://stackoverflow.com/users/3820641/harisk92"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 70, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1581279591, "creation_date": 1438754151, "last_edit_date": 1581279591, "question_id": 31824424, "link": "https://stackoverflow.com/questions/31824424/sequel-makes-duplicate-entries", "title": "Sequel makes duplicate entries", "body": "<p>I'm using Sequel with Sinatra and I've been trying it out and I noticed that it creates duplicate entries (3x).I've tried to debug it but in the end I couldn't understand why is this occurring.</p>\n\n<p>This is my code:</p>\n\n<pre><code>require 'sinatra'\nrequire 'mysql2'\nrequire 'sequel'\n\n DB=Sequel.connect(\n                      :adapter =&gt; \"mysql2\",\n                      :host =&gt;\"localhost\",\n                      :user =&gt; \"root\",\n                      :password =&gt; \"\",\n                      :database =&gt; \"test\"\n                      )\n  if !DB.table_exists? :users \n    DB.create_table :users do\n      primary_key :id\n      String :username ,:size=&gt;20 #,:unique=&gt;true\n      String :password ,:size=&gt;30 \n  end   \n  puts \"Schema created\"\nelse\n  puts \"Already exists\"\nend\n\n  class User &lt; Sequel::Model;end\n\n\n\n\n\nclass Test &lt; Sinatra::Base\n\n  get '/:username' do   \n    \"Creating user\"\n    User.create(:username =&gt; \"#{params['username']}\",:password =&gt; \"test\")\n  end\nend\n</code></pre>\n"}, {"tags": ["ruby", "class", "rspec", "module"], "comments": [{"owner": {"reputation": 91121, "user_id": 179125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5594142dcc49a24b1902ec8059181f8d?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan Running", "link": "https://stackoverflow.com/users/179125/jordan-running"}, "edited": false, "score": 5, "creation_date": 1438749557, "post_id": 31823510, "comment_id": 51571154, "body": "There is nothing wrong with the code you&#39;ve posted. Can you edit your question to include your Pry session (i.e. everything you typed into Pry and all of the output it gave you)?"}, {"owner": {"reputation": 1160, "user_id": 2130130, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/32f5b3b60c6dcc54b25397e2f2d5c0e3?s=128&d=identicon&r=PG", "display_name": "pixelpax", "link": "https://stackoverflow.com/users/2130130/pixelpax"}, "reply_to_user": {"reputation": 91121, "user_id": 179125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5594142dcc49a24b1902ec8059181f8d?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan Running", "link": "https://stackoverflow.com/users/179125/jordan-running"}, "edited": false, "score": 0, "creation_date": 1438811584, "post_id": 31823510, "comment_id": 51608449, "body": "I&#39;ve posted the original files I was having trouble with and more explicit description of my actions. Sorry about that."}, {"owner": {"reputation": 74087, "user_id": 214790, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f878c8230342730990acd21f889301d4?s=128&d=identicon&r=PG", "display_name": "matt", "link": "https://stackoverflow.com/users/214790/matt"}, "edited": false, "score": 2, "creation_date": 1438814203, "post_id": 31823510, "comment_id": 51609406, "body": "Your class is <code>InvAccessor</code> but you try and reference <code>Invaccessor</code>. The name is case sensitive."}, {"owner": {"reputation": 4611, "user_id": 3257186, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/1e036860583a98d1826052230afd931c?s=128&d=identicon&r=PG", "display_name": "Flip", "link": "https://stackoverflow.com/users/3257186/flip"}, "edited": false, "score": 0, "creation_date": 1438838308, "post_id": 31823510, "comment_id": 51615567, "body": "I am just wondering: Is it allowed to completely change a question after it has been answered (and the answer was approved)? Right now, my answer doesn&#39;t fit the question anymore. Could you please include the old question, at least?"}], "answers": [{"tags": [], "owner": {"reputation": 4611, "user_id": 3257186, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/1e036860583a98d1826052230afd931c?s=128&d=identicon&r=PG", "display_name": "Flip", "link": "https://stackoverflow.com/users/3257186/flip"}, "is_accepted": true, "score": 2, "last_activity_date": 1438837560, "last_edit_date": 1438837560, "creation_date": 1438755007, "answer_id": 31824612, "question_id": 31823510, "link": "https://stackoverflow.com/questions/31823510/ruby-can-i-require-a-file-which-contains-only-a-class/31824612#31824612", "title": "Ruby: Can I &#39;require&#39; a file which contains only a class?", "body": "<p>Yes, you can.\nTry this inside the directory where your classfile.rb lies:</p>\n\n<pre><code>&gt;&gt; require './classfile'\n=&gt; true\n&gt;&gt; A\n=&gt; A\n</code></pre>\n\n<p>You definitely don't have to put a class into a module to require it.</p>\n"}], "owner": {"reputation": 1160, "user_id": 2130130, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/32f5b3b60c6dcc54b25397e2f2d5c0e3?s=128&d=identicon&r=PG", "display_name": "pixelpax", "link": "https://stackoverflow.com/users/2130130/pixelpax"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 109, "favorite_count": 0, "accepted_answer_id": 31824612, "answer_count": 1, "score": 0, "last_activity_date": 1489242528, "creation_date": 1438749166, "last_edit_date": 1489242528, "question_id": 31823510, "link": "https://stackoverflow.com/questions/31823510/ruby-can-i-require-a-file-which-contains-only-a-class", "title": "Ruby: Can I &#39;require&#39; a file which contains only a class?", "body": "<p>I have a file <code>/project/lib/invaccessor.rb</code> with the following content</p>\n\n<pre><code>class InvAccessor\n  def initialize\n    @browser = \"browser\"\n  end\nend\n</code></pre>\n\n<p>and a spec file <code>project/spec/invaccessor_spec.rb</code> which requires it</p>\n\n<pre><code>require_relative '../lib/invaccessor'\n\ndescribe Invaccessor do\n  it {expect(2).to be_even}     \nend\n</code></pre>\n\n<p>When I run <code>rspec spec/invaccessor.rb</code> I get an <code>uninitialized constant error</code> for <code>Invaccessor</code>. Do I have to put all file contents in a module in order to access them?</p>\n\n<p>I'm using Ruby 2.2.2. </p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4"], "answers": [{"tags": [], "owner": {"reputation": 777, "user_id": 2481481, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UzCtU.jpg?s=128&g=1", "display_name": "Yanis Vieilly", "link": "https://stackoverflow.com/users/2481481/yanis-vieilly"}, "is_accepted": true, "score": 8, "last_activity_date": 1438748306, "creation_date": 1438748306, "answer_id": 31823362, "question_id": 31823277, "link": "https://stackoverflow.com/questions/31823277/getting-has-many-through-models-using-rails/31823362#31823362", "title": "Getting has_many through models using Rails", "body": "<p>If you only want the <code>has_many :through</code> associations, you can filter your array like this:</p>\n\n<pre><code>User.reflect_on_all_associations(:has_many).select do |association|\n  association.options.key? :through\nend\n</code></pre>\n"}], "owner": {"reputation": 2440, "user_id": 1077711, "user_type": "registered", "accept_rate": 42, "profile_image": "https://i.stack.imgur.com/fem9y.jpg?s=128&g=1", "display_name": "AllenC", "link": "https://stackoverflow.com/users/1077711/allenc"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 79, "favorite_count": 0, "accepted_answer_id": 31823362, "answer_count": 1, "score": 1, "last_activity_date": 1438748306, "creation_date": 1438747650, "question_id": 31823277, "link": "https://stackoverflow.com/questions/31823277/getting-has-many-through-models-using-rails", "title": "Getting has_many through models using Rails", "body": "<p>I am currently getting <strong>has_many</strong> relationship associations of a <strong>User</strong> model using this </p>\n\n<pre><code>User.reflect_on_all_associations(:has_many)\n</code></pre>\n\n<p>Now, how can I want to get <strong>User</strong> models with <strong>has_many through</strong> associations</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "postgresql", "postgis"], "answers": [{"tags": [], "owner": {"reputation": 73, "user_id": 796436, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vtEfd.jpg?s=128&g=1", "display_name": "Jimmy Ngu", "link": "https://stackoverflow.com/users/796436/jimmy-ngu"}, "is_accepted": true, "score": 2, "last_activity_date": 1438760355, "last_edit_date": 1438760355, "creation_date": 1438760027, "answer_id": 31826135, "question_id": 31823079, "link": "https://stackoverflow.com/questions/31823079/reverse-geocoding-with-postgis-in-ruby-on-rails/31826135#31826135", "title": "Reverse geocoding with postgis in ruby on rails", "body": "<p>You can manually define <code>:latitude</code> &amp; <code>:longitude</code> manually like this</p>\n\n<pre><code># app/models/place.rb\nreverse_geocoded_by :latitude, :longitude\nafter_validation :reverse_geocode\n\nattr_reader :latitude, :longitude\n\ndef latitude\n  start_point.lat if start_point\nend\n\ndef longitude\n  start_point.lon if start_point\nend\n</code></pre>\n\n<p>And remember st_point is defined as <code>POINT(lon lat)</code> as per the Cartesian plane expression (x,y). As oppose to the lat/lon format we usually see on Google Maps.</p>\n"}], "owner": {"reputation": 468, "user_id": 4373372, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/2FtKn.jpg?s=128&g=1", "display_name": "Alif Jamaluddin", "link": "https://stackoverflow.com/users/4373372/alif-jamaluddin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 320, "favorite_count": 0, "accepted_answer_id": 31826135, "answer_count": 1, "score": 0, "last_activity_date": 1438760355, "creation_date": 1438746018, "question_id": 31823079, "link": "https://stackoverflow.com/questions/31823079/reverse-geocoding-with-postgis-in-ruby-on-rails", "title": "Reverse geocoding with postgis in ruby on rails", "body": "<p>In my model, I have created column address and start_point. start_point is stored in st_point datatype from PostGIS.</p>\n\n<p>I have found one of the methods to get the address from longitude and latitude, but I haven't found any method to get addresses from st_point datatype.</p>\n\n<pre><code># app/models/place.rb\nreverse_geocoded_by :latitude, :longitude,\n  :address =&gt; :location\nafter_validation :reverse_geocode\n</code></pre>\n\n<p>How can I do reverse geocoding by using st_point datatype from PostGIS in my application?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "rspec", "factory-bot"], "comments": [{"owner": {"reputation": 1440, "user_id": 3839549, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/477123df7db174c0b2739f0e6ac9b20e?s=128&d=identicon&r=PG&f=1", "display_name": "Dave Slutzkin", "link": "https://stackoverflow.com/users/3839549/dave-slutzkin"}, "edited": false, "score": 3, "creation_date": 1438746667, "post_id": 31823022, "comment_id": 51570497, "body": "Why are you calling <code>FactoryGirl.factories.clear</code> in spec_helper? That looks like it means you&#39;ll never have any factories."}, {"owner": {"reputation": 61, "user_id": 2694333, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04f06d0a526c4b1767d3e108a6f020b1?s=128&d=identicon&r=PG&f=1", "display_name": "garthcodes", "link": "https://stackoverflow.com/users/2694333/garthcodes"}, "reply_to_user": {"reputation": 1440, "user_id": 3839549, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/477123df7db174c0b2739f0e6ac9b20e?s=128&d=identicon&r=PG&f=1", "display_name": "Dave Slutzkin", "link": "https://stackoverflow.com/users/3839549/dave-slutzkin"}, "edited": false, "score": 0, "creation_date": 1438746993, "post_id": 31823022, "comment_id": 51570563, "body": "@Dave I get a different error when I take that out     NameError:        uninitialized constant Company"}, {"owner": {"reputation": 16076, "user_id": 802618, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6111449042dd940f360673d25d61ea6b?s=128&d=identicon&r=PG", "display_name": "Kristj&#225;n", "link": "https://stackoverflow.com/users/802618/kristj%c3%a1n"}, "edited": false, "score": 2, "creation_date": 1438752704, "post_id": 31823022, "comment_id": 51572076, "body": "Have you defined a <code>Company</code> class? FactoryGirl tries to instantiate a class matching your declaration of <code>factory :company</code>."}, {"owner": {"reputation": 61, "user_id": 2694333, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04f06d0a526c4b1767d3e108a6f020b1?s=128&d=identicon&r=PG&f=1", "display_name": "garthcodes", "link": "https://stackoverflow.com/users/2694333/garthcodes"}, "edited": false, "score": 0, "creation_date": 1438787070, "post_id": 31823022, "comment_id": 51594182, "body": "I do have a Company class. The error &#39;NameError: uninitialized constant Company&#39; seems as though it can&#39;t find it. Idk why that is."}], "answers": [{"tags": [], "owner": {"reputation": 61, "user_id": 2694333, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04f06d0a526c4b1767d3e108a6f020b1?s=128&d=identicon&r=PG&f=1", "display_name": "garthcodes", "link": "https://stackoverflow.com/users/2694333/garthcodes"}, "is_accepted": true, "score": 0, "last_activity_date": 1438789600, "creation_date": 1438789600, "answer_id": 31837127, "question_id": 31823022, "link": "https://stackoverflow.com/questions/31823022/factory-girl-argumenterror-factory-not-registered/31837127#31837127", "title": "Factory Girl ArgumentError: Factory not registered:", "body": "<p>I had everything but much of it in the wrong place:</p>\n\n<p>gemfile needed to be:</p>\n\n<pre><code>group :development, :test do\n  gem 'rspec-rails'\n  gem 'shoulda-matchers', require: false\n  gem 'database_cleaner'\n  gem 'factory_girl_rails', '~&gt; 4.0', require: false\n  gem 'faker'\n end\n</code></pre>\n\n<p>everything in the spec_helper I moved to rails_helper.rb and got rid of two lines:</p>\n\n<pre><code>require 'factory_girl_rails'\nRSpec.configure do |config|\n config.include FactoryGirl::Syntax::Methods\n FactoryGirl.definition_file_paths = [File.expand_path('../factories', __FILE__)]\n // FactoryGirl.find_definitions // got rid of this\n // FactoryGirl.factories.clear // got rid of this\nend\n</code></pre>\n\n<p>company_spec.rb:</p>\n\n<pre><code>require 'rails_helper'\n\ndescribe 'Company' do\n it 'has a valid factory' do\n  expect(build(:company)).to be_valid\n end\nend\n</code></pre>\n\n<p>Most of this info was from the comments and derived from this <a href=\"http://www.webascender.com/Blog/ID/566/Testing-Rails-4-Apps-With-RSpec-3-Part-I#.VcIve5NVhBe\" rel=\"nofollow\">tutorial</a> about rspec and factory girl.</p>\n"}], "owner": {"reputation": 61, "user_id": 2694333, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04f06d0a526c4b1767d3e108a6f020b1?s=128&d=identicon&r=PG&f=1", "display_name": "garthcodes", "link": "https://stackoverflow.com/users/2694333/garthcodes"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2995, "favorite_count": 0, "accepted_answer_id": 31837127, "answer_count": 1, "score": 5, "last_activity_date": 1438789600, "creation_date": 1438745692, "last_edit_date": 1438765095, "question_id": 31823022, "link": "https://stackoverflow.com/questions/31823022/factory-girl-argumenterror-factory-not-registered", "title": "Factory Girl ArgumentError: Factory not registered:", "body": "<p>I have gone through what seems like all the correct steps and I continue to get this error.\nFrom the gemfile:</p>\n\n<pre><code> group :test do\n  gem 'rspec-rails'\n  gem 'shoulda-matchers', require: false\n  gem 'database_cleaner'\n  gem 'factory_girl_rails', '~&gt; 4.0', require: false\n  gem 'faker'\n end\n</code></pre>\n\n<p>spec_helper.rb:</p>\n\n<pre><code>require 'factory_girl_rails'\nRSpec.configure do |config|\n config.include FactoryGirl::Syntax::Methods\n FactoryGirl.definition_file_paths = [File.expand_path('../factories', __FILE__)]\n FactoryGirl.find_definitions\n FactoryGirl.factories.clear\nend\n</code></pre>\n\n<p>spec/factories/company.rb:\n    require 'spec_helper'\n    require 'faker'</p>\n\n<pre><code>FactoryGirl.define do\n  factory :company do\n    name { Faker::Name.name }\n    system_name { Faker::Company.name }\n    domain { Faker::Internet.url }\n  end\nend\n</code></pre>\n\n<p>company_spec.rb:\n    require 'spec_helper'</p>\n\n<pre><code>describe 'Company' do\n  it 'has a valid factory' do\n    FactoryGirl.build(:company).should be_valid\n  end\nend\n</code></pre>\n\n<p>Getting the error Failure/Error: </p>\n\n<pre><code>Failure/Error: FactoryGirl.create(:company).should be_valid\n     ArgumentError:\n       Factory not registered: company\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4", "amazon-s3", "aws-sdk"], "answers": [{"tags": [], "owner": {"reputation": 111, "user_id": 2345152, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/7a91ab0cac52a5e0057c1b1a91374f8b?s=128&d=identicon&r=PG&f=1", "display_name": "Mourkeer", "link": "https://stackoverflow.com/users/2345152/mourkeer"}, "is_accepted": true, "score": 1, "last_activity_date": 1438807137, "creation_date": 1438807137, "answer_id": 31842387, "question_id": 31822340, "link": "https://stackoverflow.com/questions/31822340/seahorseclientnetworkingerror-amazon-s3-file-upload-with-rails/31842387#31842387", "title": "Seahorse::Client::NetworkingError Amazon S3 file upload with rails", "body": "<p>Well I never found the solution for this problem and had to resort to other options since I was on a deadline. I'm assuming it is a bug on Amazon's end or with the aws-sdk gem, because I have checked my configuration many times, and it is correct.</p>\n\n<p>My workaround was to use the fog gem, which is actually very handy. after adding <code>gem 'fog'</code> to my gemfile and running <code>bundle install</code> my code now looks like this:</p>\n\n<pre><code>def upload_to_s3(folder_name)\n  filename = \"ss-\" + DateTime.now.strftime(\"%Y%d%m-%s\") + \"-\" + SecureRandom.hex(4) + \".png\"\n  full_bucket_path = Pathname(folder_name.to_s).join(filename).to_s\n  image_contents = open(url).read\n\n  connection = Fog::Storage.new({\n    :provider                 =&gt; 'AWS',\n    :aws_access_key_id        =&gt; ENV[\"AWS_ACCESS_KEY_ID\"],\n    :aws_secret_access_key    =&gt; ENV[\"AWS_SECRET_ACCESS_KEY\"]\n  })\n\n  directory = connection.directories.get(ENV[\"BUCKET\"])\n  file = directory.files.create(key: full_bucket_path, public: true)\n  file.body = image_contents\n  file.save\n  return file.public_url\n\nend\n</code></pre>\n\n<p>Which is simple enough and was a breeze to implement. Wish I knew what was messing up with the aws-sdk gem, but for anyone else who has problems, give fog a go.</p>\n"}], "owner": {"reputation": 111, "user_id": 2345152, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/7a91ab0cac52a5e0057c1b1a91374f8b?s=128&d=identicon&r=PG&f=1", "display_name": "Mourkeer", "link": "https://stackoverflow.com/users/2345152/mourkeer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2055, "favorite_count": 0, "accepted_answer_id": 31842387, "answer_count": 1, "score": 2, "last_activity_date": 1438807137, "creation_date": 1438741032, "last_edit_date": 1438750549, "question_id": 31822340, "link": "https://stackoverflow.com/questions/31822340/seahorseclientnetworkingerror-amazon-s3-file-upload-with-rails", "title": "Seahorse::Client::NetworkingError Amazon S3 file upload with rails", "body": "<p>In my rails 4 application I'm trying to download and then upload a regular png file to my s3 bucket using the aws-sdk (using <code>gem 'aws-sdk', '~&gt; 2'</code>).</p>\n\n<p>In development environment, the code works totally fine. But if I try <code>rails s -e production</code> or if I test out the upload on my heroku instance, I get the following error when I test out the image upload functionality,</p>\n\n<pre><code>Seahorse::Client::NetworkingError (Connection reset by peer):\n  app/helpers/aws_s3.rb:73:in `upload_to_s3'\n  app/controllers/evaluations_controller.rb:19:in `test'\n</code></pre>\n\n<p>my upload_to_s3 method mentioned in the trace looks like:</p>\n\n<pre><code>def upload_to_s3(folder_name)\n  url = \"http://i.imgur.com/WKeQQox.png\"\n  filename = \"ss-\" + DateTime.now.strftime(\"%Y%d%m-%s\") + \"-\" + SecureRandom.hex(4) + \".png\"\n  full_bucket_path = Pathname(folder_name.to_s).join(filename).to_s\n  file = save_to_tempfile(url, filename)\n  s3 = Aws::S3::Resource.new(access_key_id: ENV[\"IAM_ID\"], secret_access_key: ENV[\"IAM_SECRET\"], region: 'us-east-1')\n  s3_file = s3.bucket(ENV[\"BUCKET\"]).object(full_bucket_path)\n  s3_file.upload_file(file.path)\n  raise s3_file.public_url.to_s.inspect\nend\n</code></pre>\n\n<p>The environment variables are the same between both environments. I don't really know where else to turn to debug this. Why would it work in development, but not in production? I have a feeling I'm missing something pretty obvious.</p>\n\n<p>UPDATE:</p>\n\n<p>Let's simplify this further since I'm not getting very much feedback.</p>\n\n<pre><code>s3 = Aws::S3::Resource.new\nbucket = s3.bucket(ENV[\"BUCKET\"])\nbucket.object(\"some_file.txt\").put(body:'Hello World!')\n</code></pre>\n\n<p>The above totally works in my development environment, but not my production environment. In production it faults when I call <code>put(body:'Hello World!')</code>. I know this is probably related to write permissions or something, but again, I've checked my environment variables, and they are identical. Is there some configuration that I'm not aware of that I should be checking?</p>\n\n<p>I've tried using a new IAM user. I also temporarily copied the entire contents of development.rb over to production.rb just to see if the configuration for the development or production was affecting it, to no avail. I ran bundle update as well. Again, no luck.</p>\n\n<p>I wish the error was more descriptive, but it just says <code>Seahorse::Client::NetworkingError (Connection reset by peer)</code> no matter what I try.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4"], "answers": [{"tags": [], "owner": {"reputation": 563, "user_id": 4553127, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/798f12d07ee2d35642aa794acae5e1a2?s=128&d=identicon&r=PG", "display_name": "ChiefRockaChris", "link": "https://stackoverflow.com/users/4553127/chiefrockachris"}, "is_accepted": true, "score": 2, "last_activity_date": 1438840243, "last_edit_date": 1438840243, "creation_date": 1438758537, "answer_id": 31825679, "question_id": 31822006, "link": "https://stackoverflow.com/questions/31822006/rails-4-displaying-a-dependent-model-in-a-table/31825679#31825679", "title": "Rails 4 - Displaying a dependent model in a table", "body": "<p>It can be on the <code>articles#show</code> page. Provided your associations are done correctly, you have a: </p>\n\n<pre><code>#article.rb\nClass Article &gt; ActiveRecord::Base\nhas_many :photocups\nend \n</code></pre>\n\n<p>and</p>\n\n<pre><code>#photocup.rb\nClass Photocup &gt; ActiveRecord::Base\nbelongs_to :article \nend\n</code></pre>\n\n<p>You'll have to declare an instance variable under the show action in the Articles controller. It'll look something like this: </p>\n\n<pre><code>#articles_controller.rb\ndef show\n         @article=Article.find(params[:id])\n         @photocups=@article.photocups\n    end\n</code></pre>\n\n<p>Then use the code for your example index view in your show view and it should show the rows you are seeking.</p>\n\n<p>Also, side note, this line: </p>\n\n<pre><code>&lt;%= @photocups.each do |photocup| %&gt;\n</code></pre>\n\n<p>in your example index page does not need an <code>=</code>. Those should be reserved for things you want the user to see in the view, it should be: </p>\n\n<pre><code>&lt;% @photocups.each do |photocup| %&gt;.\n</code></pre>\n"}], "owner": {"reputation": 205, "user_id": 4925363, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f9677975a7f1508434abccac7b2409ec?s=128&d=identicon&r=PG&f=1", "display_name": "SeattleDucati", "link": "https://stackoverflow.com/users/4925363/seattleducati"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 51, "favorite_count": 1, "accepted_answer_id": 31825679, "answer_count": 1, "score": 0, "last_activity_date": 1438840243, "creation_date": 1438738382, "question_id": 31822006, "link": "https://stackoverflow.com/questions/31822006/rails-4-displaying-a-dependent-model-in-a-table", "title": "Rails 4 - Displaying a dependent model in a table", "body": "<p>I have an Article model, with a dependent model Photocup. Each Photocup instance has an image attached (using paperclip/imagemagick). I followed the rails guide for adding a second model, the same way Comments are associated with an Article.</p>\n\n<p><a href=\"http://guides.rubyonrails.org/getting_started.html#adding-a-second-model\" rel=\"nofollow\">http://guides.rubyonrails.org/getting_started.html#adding-a-second-model</a></p>\n\n<p>It works fine. But I want more control over how the Photocups are displayed. I've created a partial _gallery.html.erb in Views/Article. The gallery partial looks like this:</p>\n\n<pre><code>  Photo Gallery\n &lt;table class=\"table2\"&gt;\n &lt;%= render @article.photocups %&gt;\n &lt;/table&gt;\n</code></pre>\n\n<p>_photocup.html.erb in Views/Photocup looks like this\"</p>\n\n<pre><code> &lt;td&gt;\n &lt;%= photocup.label %&gt;\n &lt;br&gt; \n &lt;%= image_tag photocup.image(:small) %&gt;\n &lt;br&gt;\n  &lt;%= link_to 'Remove Photo', [photocup.article, photocup],\n           method: :delete,\n           data: { confirm: 'Are you sure?' } %&gt;\n &lt;/td&gt;\n</code></pre>\n\n<p>Works fine, but I can't figure out how to add in a row! </p>\n\n<p>Is there anyway to display the Photocups for the Article I'm looking at the way one does with non-dependent model? For example, an index page would typically have something like this\"</p>\n\n<pre><code> &lt;table&gt;\n &lt;tr&gt;\n &lt;th&gt;Title&lt;/th&gt;\n &lt;/tr&gt;\n &lt;%= @photocups.each do |photocup| %&gt;\n &lt;/tr&gt;\n &lt;td&gt;&lt;%= photocup.title %&gt;&lt;/td&gt;\n &lt;% end %&gt; \n &lt;/table&gt;\n</code></pre>\n\n<p>Could this be done on the show.html.erb page for the article somehow? Could it be done if I created a partial in Views/Photocup? </p>\n\n<p>If it matters, the route looks like this:</p>\n\n<pre><code> resources :articles do\n resources :comments\n resources :photocups\n get 'gallery' \n get 'showall'\n get 'feature', on: :collection\n end \n</code></pre>\n\n<p>Thank you in advance for any help.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "activerecord"], "comments": [{"owner": {"reputation": 3614, "user_id": 1569930, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/7bc43a689388dd4697947ffe8f4c9dcd?s=128&d=identicon&r=PG", "display_name": "eirikir", "link": "https://stackoverflow.com/users/1569930/eirikir"}, "edited": false, "score": 2, "creation_date": 1438740856, "post_id": 31821989, "comment_id": 51569169, "body": "Nope, welcome to ActiveRecord. The <code>join</code> expects the relation name from the model, whereas the <code>where</code> expects the table name (likely because its faster to execute that way)."}], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 1598877, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ukv0e.png?s=128&g=1", "display_name": "stepped pyramids", "link": "https://stackoverflow.com/users/1598877/stepped-pyramids"}, "is_accepted": false, "score": 0, "last_activity_date": 1438753739, "creation_date": 1438753739, "answer_id": 31824321, "question_id": 31821989, "link": "https://stackoverflow.com/questions/31821989/activerecord-inner-join-using-name-from-has-many-association/31824321#31824321", "title": "ActiveRecord inner join using name from has_many association", "body": "<p>The more arguments you have to provide to <code>belongs_to</code> and other relation declarations, the more pain you are setting yourself up for in the future. As clunky as <code>import_job.import_logs</code> sounds, your AR models should be as simple as possible even at the cost of a certain degree of elegance.</p>\n\n<p>Instead, build your beautiful, elegant API as a layer between your AR models and your controllers. Limit it to just the operations you need, not the unlimited operations that <code>ActiveRecord::Base</code> permits. Take that opportunity to define a clean, just-enough interface to your import system, with the AR models as an implementation detail. It will pay dividends in the future.</p>\n"}], "owner": {"reputation": 3043, "user_id": 52263, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/QmlMX.jpg?s=128&g=1", "display_name": "Riley Watkins", "link": "https://stackoverflow.com/users/52263/riley-watkins"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 132, "favorite_count": 1, "answer_count": 1, "score": 3, "last_activity_date": 1438753739, "creation_date": 1438738224, "question_id": 31821989, "link": "https://stackoverflow.com/questions/31821989/activerecord-inner-join-using-name-from-has-many-association", "title": "ActiveRecord inner join using name from has_many association", "body": "<p>I have these two basic ActiveRecord models (Rails 4.2):</p>\n\n<pre><code>class ImportJob &lt; ActiveRecord::Base\n  has_many :logs, class_name: 'ImportLog', foreign_key: 'job_id', dependent: :destroy\nend\n\nclass ImportLog &lt; ActiveRecord::Base\n  belongs_to :job, class_name: 'ImportJob', foreign_key: :job_id\nend\n</code></pre>\n\n<p>I'm trying to run a query on <code>ImportJob</code> with an <code>INNER JOIN</code> on <code>ImportLog</code>, using the name I gave it in the <code>has_many</code> declaration:</p>\n\n<pre><code>ImportJob.joins(:logs).where(logs: { stage: \"load\", status: \"succeeded\" })\n</code></pre>\n\n<p>However, ActiveRecord does not automatically use the name <code>logs</code> when constructing the <code>INNER JOIN</code>. This is the error with the SQL it generated:</p>\n\n<pre><code>PG::UndefinedTable: ERROR:  missing FROM-clause entry for table \"logs\"\nLINE 1: ...\"import_logs\".\"job_id\" = \"import_jobs\".\"id\" WHERE \"logs\".\"st...\n                                                             ^\n: SELECT \"import_jobs\".* FROM \"import_jobs\" INNER JOIN \"import_logs\" ON \"import_logs\".\"job_id\" = \"import_jobs\".\"id\" WHERE \"logs\".\"stage\" = $1 AND \"logs\".\"status\" = $2\n</code></pre>\n\n<hr>\n\n<p>These two queries both work, but they seem either unintuitive or inelegant:</p>\n\n<ol>\n<li><p>Refer to \"logs\" using the table name \"import_logs\" (unintuitive). </p>\n\n<pre><code>ImportJob.joins(:logs).where(import_logs: { stage: \"load\", status: \"succeeded\" })\n</code></pre></li>\n<li><p>Write the <code>INNER JOIN</code> myself and include \"AS logs\" (inelegant).</p>\n\n<pre><code>ImportJob.joins(\"INNER JOIN import_logs AS logs ON logs.job_id = import_jobs.id\")\n     .where(logs: { stage: \"load\", status: \"succeeded\" })\n</code></pre></li>\n</ol>\n\n<p>Is there a better solution than these?</p>\n"}, {"tags": ["ruby", "hash"], "answers": [{"tags": [], "owner": {"reputation": 167912, "user_id": 240443, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/495d675e3bc42ed1dee469e2ce701f1b?s=128&d=identicon&r=PG", "display_name": "Amadan", "link": "https://stackoverflow.com/users/240443/amadan"}, "is_accepted": false, "score": 4, "last_activity_date": 1438736396, "last_edit_date": 1438736396, "creation_date": 1438735271, "answer_id": 31821609, "question_id": 31821568, "link": "https://stackoverflow.com/questions/31821568/number-of-keys-that-match-a-string/31821609#31821609", "title": "Number of keys that match a string", "body": "<p>Like this:</p>\n\n<pre><code>h.keys.grep(/day/).count\n</code></pre>\n\n<p><strong>EDIT:</strong> Because Cary Swoveland is completely correct,</p>\n\n<pre><code>h.each_key.lazy.grep(/day/).count\n</code></pre>\n\n<p>TIMTOWTDI :D</p>\n"}, {"tags": [], "owner": {"reputation": 111, "user_id": 2661839, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/040536d7fa00b5f67544e330c8adc6ae?s=128&d=identicon&r=PG", "display_name": "dougcosine", "link": "https://stackoverflow.com/users/2661839/dougcosine"}, "is_accepted": false, "score": 0, "last_activity_date": 1438736100, "creation_date": 1438736100, "answer_id": 31821720, "question_id": 31821568, "link": "https://stackoverflow.com/questions/31821568/number-of-keys-that-match-a-string/31821720#31821720", "title": "Number of keys that match a string", "body": "<ul>\n<li><a href=\"http://ruby-doc.org/core-2.2.0/Hash.html#method-i-keys\" rel=\"nofollow\">Hash.keys</a> returns an array of the keys in <code>hash</code></li>\n<li><a href=\"http://ruby-doc.org/core-2.2.0/Array.html#method-i-select\" rel=\"nofollow\">Array.select</a> filters that array based on the regex <code>/day/</code></li>\n<li><p><a href=\"http://ruby-doc.org/core-2.2.0/Array.html#method-i-count\" rel=\"nofollow\">Array.count</a> counts the number of elements in the filtered array:</p>\n\n<p><code>hash.keys.select { |key| key =~ /day/ }.count</code></p></li>\n</ul>\n"}, {"tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": true, "score": 8, "last_activity_date": 1438736287, "creation_date": 1438736287, "answer_id": 31821745, "question_id": 31821568, "link": "https://stackoverflow.com/questions/31821568/number-of-keys-that-match-a-string/31821745#31821745", "title": "Number of keys that match a string", "body": "<p>There's no need to create a temporary array:</p>\n\n<pre><code>h.count { |k,_| k.start_with?(\"day\") }\n  #=&gt; 7 \n</code></pre>\n\n<p>I've assumed that the key must begin with <code>\"day\"</code>, but if not:</p>\n\n<pre><code>h.count { |k,_| k =~ /day/ }\n  #=&gt; 7 \n</code></pre>\n"}], "owner": {"reputation": 2516, "user_id": 5123, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/c267b791052632e1e13a607f78f73918?s=128&d=identicon&r=PG&f=1", "display_name": "Allan", "link": "https://stackoverflow.com/users/5123/allan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 72, "favorite_count": 2, "accepted_answer_id": 31821745, "answer_count": 3, "score": 1, "last_activity_date": 1438754363, "creation_date": 1438734973, "last_edit_date": 1438754363, "question_id": 31821568, "link": "https://stackoverflow.com/questions/31821568/number-of-keys-that-match-a-string", "title": "Number of keys that match a string", "body": "<p>I have the following hash:</p>\n\n<pre><code>{\n  \"day_mon\"=&gt;\"on\", \"day_tue\"=&gt;\"on\", \"day_wed\"=&gt;\"on\", \"day_thu\"=&gt;\"on\",\n  \"day_fri\"=&gt;\"on\", \"day_sat\"=&gt;\"on\", \"day_sun\"=&gt;\"on\"\n}\n</code></pre>\n\n<p>How can I count the number of keys in the hash that match the string <code>\"day\"</code>?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "activerecord"], "answers": [{"tags": [], "owner": {"reputation": 10005, "user_id": 724036, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/6VXVJ.jpg?s=128&g=1", "display_name": "zishe", "link": "https://stackoverflow.com/users/724036/zishe"}, "is_accepted": false, "score": 0, "last_activity_date": 1438735678, "last_edit_date": 1438735678, "creation_date": 1438732385, "answer_id": 31821248, "question_id": 31821173, "link": "https://stackoverflow.com/questions/31821173/ruby-on-rails-activerecord-relation-not-working/31821248#31821248", "title": "Ruby on rails ActiveRecord Relation not working?", "body": "<p>Probably, you should select one model </p>\n\n<pre><code>Game.where(:appid =&gt; game[\"appid\"]).first\n</code></pre>\n\n<p>and then get relational models</p>\n\n<pre><code>.achievements.new\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 59, "user_id": 2166807, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/ea4c301271495a243c2fb265b70159a9?s=128&d=identicon&r=PG", "display_name": "Jason Attwood", "link": "https://stackoverflow.com/users/2166807/jason-attwood"}, "edited": false, "score": 0, "creation_date": 1438779835, "post_id": 31821452, "comment_id": 51588585, "body": "Thanks I didn&#39;t notice that all query&#39;s always come back as an array , thanks the problem is fixed now!"}], "tags": [], "owner": {"reputation": 516, "user_id": 1965639, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d1b26f7f5bf496afa58f8aa562d53a2e?s=128&d=identicon&r=PG", "display_name": "jjk", "link": "https://stackoverflow.com/users/1965639/jjk"}, "is_accepted": true, "score": 1, "last_activity_date": 1438733945, "creation_date": 1438733945, "answer_id": 31821452, "question_id": 31821173, "link": "https://stackoverflow.com/questions/31821173/ruby-on-rails-activerecord-relation-not-working/31821452#31821452", "title": "Ruby on rails ActiveRecord Relation not working?", "body": "<p>You are getting an association here:</p>\n\n<pre><code> Game.where(:appid =&gt; game[\"appid\"])\n</code></pre>\n\n<p>... this is realized as an array of objects (even if the sql returns no records, then it is still an array, although it is empty).</p>\n\n<p>You need to select one of them ... probably the first, like this:</p>\n\n<pre><code> Game.where(:appid =&gt; game[\"appid\"]).first.achievements.new\n</code></pre>\n\n<p>Or you can run through the values:</p>\n\n<pre><code> Game.where(:appid =&gt; game[\"appid\"]).each { |game| game.achievements.new }\n</code></pre>\n\n<p>or some such. </p>\n"}, {"tags": [], "owner": {"reputation": 311, "user_id": 2517810, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d0cc6ac8c3f852840afa8c31f0270fa9?s=128&d=identicon&r=PG", "display_name": "joem", "link": "https://stackoverflow.com/users/2517810/joem"}, "is_accepted": false, "score": 0, "last_activity_date": 1443127942, "last_edit_date": 1443127942, "creation_date": 1438734544, "answer_id": 31821520, "question_id": 31821173, "link": "https://stackoverflow.com/questions/31821173/ruby-on-rails-activerecord-relation-not-working/31821520#31821520", "title": "Ruby on rails ActiveRecord Relation not working?", "body": "<p>The answer is in the exception.  #where returns an ActiveRecord_Relation, not a Game, even if there is only one Game in the relation.  So you really have an enumerable. i.e:</p>\n\n<pre><code>puts Game.where(:appid =&gt; game[\"appid\"]).first.achievements.new\n</code></pre>\n\n<p>If you just want the first game that meets the criteria, you can use find_by</p>\n\n<pre><code>Game.find_by(:appid =&gt; game[\"appid\"])\n</code></pre>\n\n<p>but I am not sure that's what you are looking for</p>\n"}], "owner": {"reputation": 59, "user_id": 2166807, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/ea4c301271495a243c2fb265b70159a9?s=128&d=identicon&r=PG", "display_name": "Jason Attwood", "link": "https://stackoverflow.com/users/2166807/jason-attwood"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 731, "favorite_count": 0, "accepted_answer_id": 31821452, "answer_count": 3, "score": 1, "last_activity_date": 1443127942, "creation_date": 1438731885, "last_edit_date": 1438732408, "question_id": 31821173, "link": "https://stackoverflow.com/questions/31821173/ruby-on-rails-activerecord-relation-not-working", "title": "Ruby on rails ActiveRecord Relation not working?", "body": "<p>I have an issue where my ActiveRecord::Relation isn't working I have 3 Db's Users,Games,Achievements The relation defined between them is such</p>\n\n<p>Users </p>\n\n<pre><code>has_many :games\n</code></pre>\n\n<p>Games</p>\n\n<pre><code>belongs_to :user\nhas_many :achievements\n</code></pre>\n\n<p>Achievements</p>\n\n<pre><code>belongs_to :game\n</code></pre>\n\n<p>The problem is when i try to call </p>\n\n<pre><code>Game.where(:appid =&gt; game[\"appid\"]).achievements.new\n</code></pre>\n\n<p>it gives me and error saying that </p>\n\n<pre><code>undefined method `achievements' for #&lt;Game::ActiveRecord_Relation:0x730f9f8&gt;\n</code></pre>\n\n<p>I am running on Ruby on Rails 4.1.8 and I have no clue why this is happening (I do have the belongs_to :game,index: true column in my Achievements table I can't think of why its not working)</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "geokit"], "answers": [{"tags": [], "owner": {"reputation": 3196, "user_id": 4462191, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6486706e99bddb0c2db4c712cc178604?s=128&d=identicon&r=PG", "display_name": "camiblanch", "link": "https://stackoverflow.com/users/4462191/camiblanch"}, "is_accepted": false, "score": 0, "last_activity_date": 1442426370, "creation_date": 1442426370, "answer_id": 32615550, "question_id": 31821152, "link": "https://stackoverflow.com/questions/31821152/if-geokit-rails-no-longer-has-geo-scope-method-what-i-am-supposed-to-use-to-get/32615550#32615550", "title": "If geokit-rails no longer has geo_scope method, what I am supposed to use to get lat/long of an address", "body": "<p>As an alternative you could use an address verification service. Some of these include, SmartyStreets (where I work), Melissa Data, and Lob. I'm not a huge expert with the other providers, but I know with SmartyStreets you can use the street API to get latitude and longitude from an address and have the comfort of knowing that the address exists. SmartyStreets has both a <a href=\"https://smartystreets.com/docs/address\" rel=\"nofollow\">US Street API</a> and an <a href=\"https://smartystreets.com/docs/international\" rel=\"nofollow\">International Street API</a></p>\n\n<p>If you use a non address verification service like Google Maps, you run the risk of approximate latitude and longitude coordinates being returned to you. </p>\n"}], "owner": {"reputation": 1, "user_id": 5191658, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-VMygqVlGjKg/AAAAAAAAAAI/AAAAAAAAABg/UoTmJR5NsVk/photo.jpg?sz=128", "display_name": "Gibby", "link": "https://stackoverflow.com/users/5191658/gibby"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 189, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1442426370, "creation_date": 1438731763, "question_id": 31821152, "link": "https://stackoverflow.com/questions/31821152/if-geokit-rails-no-longer-has-geo-scope-method-what-i-am-supposed-to-use-to-get", "title": "If geokit-rails no longer has geo_scope method, what I am supposed to use to get lat/long of an address", "body": "<p>Looking at the latest release of geokit-rails (2.1.0), it looks like they have removed the method geo_scope (<a href=\"https://github.com/geokit/geokit-rails/commit/781c4dc62d3b044196efbfad269d4780e6afbe6b\" rel=\"nofollow\">https://github.com/geokit/geokit-rails/commit/781c4dc62d3b044196efbfad269d4780e6afbe6b</a>). </p>\n\n<p>However, the README on the github account still says to use it. </p>\n\n<p>If the example they provide in the README -- \"Location.geo_scope(:origin => '100 Spear st, San Francisco, CA')\" -- no longer works whats the new method?</p>\n\n<p>Problem I am trying to solve: </p>\n\n<p>When users register for my site, I collect their mailing address, I need to convert that to lat/long and store it in my database.</p>\n"}, {"tags": ["ruby", "hash"], "comments": [{"owner": {"reputation": 7158, "user_id": 1445444, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/e0baa59194d1ab50811481dd6b4aab5c?s=128&d=identicon&r=PG&f=1", "display_name": "Horse Voice", "link": "https://stackoverflow.com/users/1445444/horse-voice"}, "edited": false, "score": 0, "creation_date": 1438811101, "post_id": 31821099, "comment_id": 51608249, "body": "Why was this flagged to close?"}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1439491316, "post_id": 31821099, "comment_id": 51896062, "body": "If you found either answer helpful, please select one."}], "answers": [{"tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": false, "score": 3, "last_activity_date": 1438741558, "creation_date": 1438741558, "answer_id": 31822406, "question_id": 31821099, "link": "https://stackoverflow.com/questions/31821099/recursively-delete-hashes-with-empty-values/31822406#31822406", "title": "Recursively delete hashes with empty values", "body": "<p>I have assumed that for any hash <code>h</code>, you want to create another hash <code>g</code> which is the same as <code>h</code> except no nested hash in <code>g</code> will have a key-value pair <code>[k,v]</code> for which <code>v.respond_to(:empty?)</code> and <code>v.empty?</code> both return <code>true</code>. For example, if the following nested hash is present in <code>h</code>:</p>\n\n<pre><code>{ a: { b: '', c: {}, d: [] }, e: 3 }\n</code></pre>\n\n<p>then the corresponding nested hash in <code>g</code> will be:</p>\n\n<pre><code>{ e: 3 }\n</code></pre>\n\n<p>In effect, we \"remove\" the key-value pairs <code>:b=&gt; ''</code>, <code>:c=&gt; {}</code> and <code>:d=&gt; []</code> because <code>''</code>, <code>{}</code> and <code>[]</code> all respond to <code>:empty?</code> and all are empty. That reduces the nested hash to:</p>\n\n<pre><code>{ a: {}, e: 3 }\n</code></pre>\n\n<p>Since the value of <code>a</code> is now empty, we remove that key-value pair, leaving the nested hash in <code>g</code> equal to:</p>\n\n<pre><code>{ e: 3 }\n</code></pre>\n\n<p>I believe this can be achieved as follows:</p>\n\n<pre><code>def remove(h)\n  loop do\n    h_new = remove_empties(h)\n    break h if h==h_new\n    h = h_new\n  end\nend\n\ndef remove_empties(h)\n  h.each_with_object({}) do |(k,v),g|\n    case v\n    when Hash\n      g[k] = remove_empties(h[k]) unless v.empty? \n    else\n      g[k] = v unless v.respond_to?(:empty?) &amp;&amp; v.empty?\n    end\n  end\nend\n</code></pre>\n\n<p>For your hash, which I refer to as <code>h</code>:</p>\n\n<pre><code>remove(h)\n  #=&gt; {:query=&gt;\n  #      {:filtered=&gt;\n  #        {:filter=&gt;\n  #          {:query=&gt;\n  #            {:query_string=&gt;\n  #              {:fields=&gt;\n                   [[\"standard_analyzed_name\", \"standard_analyzed_message\"]],\n  #               :query=&gt;\"Arnold AND Schwarz\"\n  #              }\n  #            }\n  #          }\n  #        }\n  #      },\n  #    :sort=&gt;[\n  #             {:total_interactions=&gt;\n  #               {:order=&gt;\"desc\"}\n  #             }\n  #           ]\n  #  }\n</code></pre>\n\n<p>Note that the recursion is performed repeatedly until no further modifications of the hash are performed.</p>\n"}, {"comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1438742056, "post_id": 31822407, "comment_id": 51569409, "body": "I too was wondering about arrays, but since nothing was said of them I just assumed they were a stopping point. I did, however, remove keys whose values were empty arrays and strings, as well as empty hashes (any object responding to <code>:empty</code> that was empty)."}, {"owner": {"reputation": 394580, "user_id": 479863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ArUCE.jpg?s=128&g=1", "display_name": "mu is too short", "link": "https://stackoverflow.com/users/479863/mu-is-too-short"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1438742719, "post_id": 31822407, "comment_id": 51569552, "body": "@CarySwoveland: Empty arrays, <code>nil</code>s, empty stings, ... there are a few unspecified loose threads to pull on."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1438742719, "post_id": 31822407, "comment_id": 51569553, "body": "\u03bc, the most significant difference between our two solutions is that you structured the recursion so you only made a single pass, whereas I repeated it until no further changes were observed.  Your approach is clearly superior."}, {"owner": {"reputation": 7158, "user_id": 1445444, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/e0baa59194d1ab50811481dd6b4aab5c?s=128&d=identicon&r=PG&f=1", "display_name": "Horse Voice", "link": "https://stackoverflow.com/users/1445444/horse-voice"}, "edited": false, "score": 0, "creation_date": 1438886970, "post_id": 31822407, "comment_id": 51646268, "body": "thank you. Why are you using <code>is_a?</code> instead of the what I&#39;m using: <code>value.class == Hash</code>? my worry was that Hash is_a object. So is array which is also an object. So didn&#39;t want to take that risk. You think it&#39;s fine?"}, {"owner": {"reputation": 394580, "user_id": 479863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ArUCE.jpg?s=128&g=1", "display_name": "mu is too short", "link": "https://stackoverflow.com/users/479863/mu-is-too-short"}, "edited": false, "score": 0, "creation_date": 1438887978, "post_id": 31822407, "comment_id": 51646830, "body": "<code>value.class == Hash</code> doesn&#39;t allow for subclasses, shouldn&#39;t make much (if any) difference in this case since I&#39;m creating new Hashes and Arrays all over the place without accounting for subclasses anyway."}], "tags": [], "owner": {"reputation": 394580, "user_id": 479863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ArUCE.jpg?s=128&g=1", "display_name": "mu is too short", "link": "https://stackoverflow.com/users/479863/mu-is-too-short"}, "is_accepted": true, "score": 4, "last_activity_date": 1438741561, "creation_date": 1438741561, "answer_id": 31822407, "question_id": 31821099, "link": "https://stackoverflow.com/questions/31821099/recursively-delete-hashes-with-empty-values/31822407#31822407", "title": "Recursively delete hashes with empty values", "body": "<p>You have a few problems here:</p>\n\n<ol>\n<li>You're modifying the hash in-place when you might not mean to, you'd probably want to name your method <code>compactify_hash!</code> if you really want to modify it in-place.</li>\n<li>You have Arrays inside your Hash but you don't scan them for empty Hashes.</li>\n<li><p>Most importantly, you never check your recursively compactified hashes to see if compactifying them has also emptied them. in here:</p>\n\n<pre><code>if(value.class == Hash &amp;&amp; !value.empty?)\n    compactify_hash(value)\nelsif(value.class == Hash &amp;&amp; value.empty?)\n    main_hash.delete(key)\nend\n</code></pre>\n\n<p>you need to check <code>value.empty?</code> <em>after</em> you <code>compactify_hash(value)</code>.</p></li>\n</ol>\n\n<p>You could do something like this instead:</p>\n\n<pre><code>def compactify_hash(main_hash)\n    main_hash.each_with_object({}) do |(k, v), h|\n        if(v.is_a?(Hash))\n            ch = compactify_hash(v)\n            h[k] = ch if(!ch.empty?)\n        elsif(v.is_a?(Array))\n            h[k] = v.map do |e|\n                e.is_a?(Hash) ? compactify_hash(e) : e\n            end\n        else\n            h[k] = v\n        end\n    end\nend\n</code></pre>\n"}], "owner": {"reputation": 7158, "user_id": 1445444, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/e0baa59194d1ab50811481dd6b4aab5c?s=128&d=identicon&r=PG&f=1", "display_name": "Horse Voice", "link": "https://stackoverflow.com/users/1445444/horse-voice"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 824, "favorite_count": 2, "accepted_answer_id": 31822407, "answer_count": 2, "score": 2, "last_activity_date": 1438755033, "creation_date": 1438731395, "last_edit_date": 1438755033, "question_id": 31821099, "link": "https://stackoverflow.com/questions/31821099/recursively-delete-hashes-with-empty-values", "title": "Recursively delete hashes with empty values", "body": "<p>I'd like to delete empty hashes at different nested levels. And once that empty hash is deleted, I'd like to delete it's container hash as well. How would I do this?</p>\n\n<p>Here is the hash I want to work on:</p>\n\n<pre><code>{\n  \"query\"=&gt;{\"filtered\"=&gt;{\n    \"query\"=&gt;{\"bool\"=&gt;{}},\n    \"filter\"=&gt;{\"query\"=&gt;{\"query_string\"=&gt;{\n      \"fields\"=&gt;[[\"standard_analyzed_name\", \"standard_analyzed_message\"]],\n      \"query\"=&gt;\"Arnold AND Schwarz\"\n    }}}\n  }},\n  \"sort\"=&gt;[{\"total_interactions\"=&gt;{\"order\"=&gt;\"desc\"}}]\n}\n</code></pre>\n\n<p>Below is the code that I have that does not remove the empty <code>{\"query\"=&gt;{\"bool\"=&gt;{}}</code> part:</p>\n\n<pre><code>def compactify_hash(main_hash)\n  main_hash.each do |key, value|\n    if(value.class == Hash &amp;&amp; !value.empty?)\n      compactify_hash(value)\n    elsif(value.class == Hash &amp;&amp; value.empty?)\n      main_hash.delete(key)\n    end\n  end\n  return main_hash\nend\n</code></pre>\n"}]