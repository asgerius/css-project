[{"tags": ["ruby-on-rails", "arrays", "ruby"], "answers": [{"comments": [{"owner": {"reputation": 2074, "user_id": 688071, "user_type": "registered", "accept_rate": 67, "profile_image": "https://graph.facebook.com/1229375604/picture?type=large", "display_name": "Godzilla74", "link": "https://stackoverflow.com/users/688071/godzilla74"}, "edited": false, "score": 0, "creation_date": 1492041483, "post_id": 43381433, "comment_id": 73824953, "body": "That&#39;s actually quite similar to what I originally had.  The problem is that I can&#39;t just fill up the remaining space with zeros.  I need to only push them if there is no test for the given date that&#39;s currently being iterated through."}, {"owner": {"reputation": 2074, "user_id": 688071, "user_type": "registered", "accept_rate": 67, "profile_image": "https://graph.facebook.com/1229375604/picture?type=large", "display_name": "Godzilla74", "link": "https://stackoverflow.com/users/688071/godzilla74"}, "edited": false, "score": 0, "creation_date": 1492042528, "post_id": 43381433, "comment_id": 73825212, "body": "So, push a <code>0</code> 30+ times to the <code>score</code> array since the other test dates won&#39;t match?"}], "tags": [], "owner": {"reputation": 3320, "user_id": 4950680, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/C8cEh.jpg?s=128&g=1", "display_name": "Martin Zinovsky", "link": "https://stackoverflow.com/users/4950680/martin-zinovsky"}, "is_accepted": false, "score": 0, "last_activity_date": 1492041733, "last_edit_date": 1492041733, "creation_date": 1492041318, "answer_id": 43381433, "question_id": 43381301, "link": "https://stackoverflow.com/questions/43381301/finding-matches-in-nested-blocks/43381433#43381433", "title": "Finding matches in nested blocks", "body": "<blockquote>\n  <p>I'm stuck trying to figure out how to insert a 0 if there aren't any\n  tests for the given date.</p>\n</blockquote>\n\n<p>You can push as much zeros as you need to after your code is done:</p>\n\n<pre><code>(1..31-array.size).each do |x|\n  array.push(0)\nend\n</code></pre>\n\n<p>Thats not pretty but answers the question I guess</p>\n\n<hr>\n\n<blockquote>\n  <p>I need to only push them if there is no test for the given date that's\n  currently being iterated through.</p>\n</blockquote>\n\n<p>How about this one:</p>\n\n<pre><code>if t.date.strftime(\"%Y-%m-%d\") == r\n  score.push(t.security_percentage)\nelse\n  score.push(0)\nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2074, "user_id": 688071, "user_type": "registered", "accept_rate": 67, "profile_image": "https://graph.facebook.com/1229375604/picture?type=large", "display_name": "Godzilla74", "link": "https://stackoverflow.com/users/688071/godzilla74"}, "is_accepted": false, "score": 0, "last_activity_date": 1492045211, "creation_date": 1492045211, "answer_id": 43381912, "question_id": 43381301, "link": "https://stackoverflow.com/questions/43381301/finding-matches-in-nested-blocks/43381912#43381912", "title": "Finding matches in nested blocks", "body": "<p>Ended up learning about using <code>.select</code>:</p>\n\n<pre><code>dates = []\narray = []\ntoday = Date.today + 1\ntests = company.tests.where(date: today - 31..today).order(date: :asc)\n(today - 31..today).each{|date| dates.push(date.to_s)}\n  dates.each do |r|\n    score = []\n    matches = tests.select{ |t| t.date.strftime(\"%Y-%m-%d\") == r }\n    if matches.length &gt; 0\n      matches.each do |m|\n        score.push(m.security_percentage)\n      end\n      average = score.reduce(:+).to_i / score.size\n      array.push(average)\n    else\n      array.push(0)\n    end\n  end\n</code></pre>\n"}], "owner": {"reputation": 2074, "user_id": 688071, "user_type": "registered", "accept_rate": 67, "profile_image": "https://graph.facebook.com/1229375604/picture?type=large", "display_name": "Godzilla74", "link": "https://stackoverflow.com/users/688071/godzilla74"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 40, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1492081909, "creation_date": 1492040355, "last_edit_date": 1492081909, "question_id": 43381301, "link": "https://stackoverflow.com/questions/43381301/finding-matches-in-nested-blocks", "title": "Finding matches in nested blocks", "body": "<p>I have an array of <code>dates</code> and an object <code>tests</code>, which is submitted by the user:</p>\n\n<pre><code>dates = []\ntoday = Date.today + 1\n(today - 31..today).each{|date| dates.push(date.to_s)}\ntests = company.tests.where(date: today - 31..today).order(date: :asc)\n</code></pre>\n\n<p>I'm iterating over each <code>date</code>, and if there is a <code>test</code> that matches the <code>date</code>, I add it to a <code>score</code> array. There may be multiple, hence the <code>average</code> calculation.</p>\n\n<pre><code>score = []\narray = []\ndates.each do |r|\n  tests.each do |t|\n    if t.date.strftime(\"%Y-%m-%d\") == r\n      score.push(t.security_percentage)\n    end\n  end\n  average = score.reduce(:+).to_i / score.size\n  array.push(average)\nend\n</code></pre>\n\n<p>I'm stuck trying to figure out how to insert a <code>0</code> if there aren't any tests for the given date. I expect <code>array</code> to have 31 entries:</p>\n\n<pre><code>[0, 98, 89, 99, 0, 0, ...]\n</code></pre>\n\n<p>but it only has 20 entries since I only have 20 tests.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "paginate"], "comments": [{"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1492039555, "post_id": 43381161, "comment_id": 73824410, "body": "Please read &quot;<a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a>&quot; and &quot;<a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>&quot; and their linked pages. Your didn&#39;t ask a question nor do you show an error or how to run your code. Please review the help for editing and formatting your text and make it so it&#39;s readable."}], "answers": [{"tags": [], "owner": {"reputation": 40, "user_id": 7850533, "user_type": "registered", "profile_image": "https://graph.facebook.com/1447836771934645/picture?type=large", "display_name": "Smriti Gupta", "link": "https://stackoverflow.com/users/7850533/smriti-gupta"}, "is_accepted": true, "score": 1, "last_activity_date": 1492064412, "creation_date": 1492064412, "answer_id": 43384879, "question_id": 43381161, "link": "https://stackoverflow.com/questions/43381161/did-you-forget-to-pass-the-collection-object-for-will-paginate-rails/43384879#43384879", "title": "Did you forget to pass the collection object for will_paginate? Rails", "body": "<p>&lt;%= will_paginate @conversations %>\nCheck this you need to pass the variable, you want to paginate.</p>\n"}], "owner": {"reputation": 63, "user_id": 7843201, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4671498cf5570a9688a7e9b689766961?s=128&d=identicon&r=PG&f=1", "display_name": "Jay", "link": "https://stackoverflow.com/users/7843201/jay"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 583, "favorite_count": 0, "accepted_answer_id": 43384879, "answer_count": 1, "score": -1, "last_activity_date": 1492064412, "creation_date": 1492039326, "last_edit_date": 1492060578, "question_id": 43381161, "link": "https://stackoverflow.com/questions/43381161/did-you-forget-to-pass-the-collection-object-for-will-paginate-rails", "title": "Did you forget to pass the collection object for will_paginate? Rails", "body": "<p>On Rails, I get the error \"...,Did you forget to pass the collection object for will_paginate?\" I am using the will_paginate gem along with mailboxer</p>\n\n<p>view/conversations</p>\n\n\n\n<pre><code>&lt;p&gt;&lt;%= link_to 'Start conversation', new_message_path, class: 'btn btn-lg btn-primary' %&gt;&lt;/p&gt;\n\n&lt;ul class=\"list-group\"&gt;\n  &lt;%= render partial: 'conversations/conversation', collection: @conversations %&gt;\n&lt;/ul&gt;\n\n&lt;%= will_paginate %&gt;\n</code></pre>\n\n<p>controller/conversations</p>\n\n<pre><code>class ConversationsController &lt; ApplicationController\n  before_action :authenticate_member!\n  #before_action :get_mailbox\n  before_action :get_conversation, except: [:index]\n\n  def show\n  end\n\n  private\n\n  def get_conversation\n    @conversation ||= @mailbox.conversations.find(params[:id])\n  end\n\n  def index\n # @conversations = Conversation.paginate(page: params[:page]) # paginated\n\n       @conversations = Conversation.paginate(:page =&gt; params[:page], :per_page =&gt; 2)    \n\n    end\n\nend\n</code></pre>\n\n<p>How do I solve this?</p>\n"}, {"tags": ["python", "arrays", "ruby", "compare", "multiplication"], "comments": [{"owner": {"reputation": 97835, "user_id": 355230, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/VjcbL.jpg?s=128&g=1", "display_name": "martineau", "link": "https://stackoverflow.com/users/355230/martineau"}, "edited": false, "score": 1, "creation_date": 1492037888, "post_id": 43380843, "comment_id": 73823948, "body": "What does <code>(a1-a2).empty?</code> mean?"}, {"owner": {"reputation": 670, "user_id": 3672977, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7eede4ef5afe2d79fb1aaedc02859f6e?s=128&d=identicon&r=PG", "display_name": "thesonyman101", "link": "https://stackoverflow.com/users/3672977/thesonyman101"}, "edited": false, "score": 0, "creation_date": 1492038269, "post_id": 43380843, "comment_id": 73824057, "body": "What&#39;s in the arrays? numbers, strings etc?"}, {"owner": {"reputation": 39519, "user_id": 2063361, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/jB77z.jpg?s=128&g=1", "display_name": "Anonymous", "link": "https://stackoverflow.com/users/2063361/anonymous"}, "edited": false, "score": 0, "creation_date": 1492038632, "post_id": 43380843, "comment_id": 73824144, "body": "are <code>a1</code>, <code>a2</code> the name of the variables?"}, {"owner": {"reputation": 97835, "user_id": 355230, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/VjcbL.jpg?s=128&g=1", "display_name": "martineau", "link": "https://stackoverflow.com/users/355230/martineau"}, "edited": false, "score": 0, "creation_date": 1492039467, "post_id": 43380843, "comment_id": 73824384, "body": "What is the source of the &quot;labeled&quot; arrays? Would make more sense to store them in a single container, like a list, then you wouldn&#39;t have to deal with so many of them and they could be iterated over without have to specify each name (in either language)."}, {"owner": {"reputation": 9, "user_id": 4451055, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/S0hSU.jpg?s=128&g=1", "display_name": "Food Warrior", "link": "https://stackoverflow.com/users/4451055/food-warrior"}, "edited": false, "score": 0, "creation_date": 1492039950, "post_id": 43380843, "comment_id": 73824532, "body": "a1, a2 is the name for the array."}, {"owner": {"reputation": 1843, "user_id": 4067720, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a52c645614505bcaeb65a6c5199158c1?s=128&d=identicon&r=PG", "display_name": "Glyoko", "link": "https://stackoverflow.com/users/4067720/glyoko"}, "reply_to_user": {"reputation": 97835, "user_id": 355230, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/VjcbL.jpg?s=128&g=1", "display_name": "martineau", "link": "https://stackoverflow.com/users/355230/martineau"}, "edited": false, "score": 1, "creation_date": 1492040222, "post_id": 43380843, "comment_id": 73824611, "body": "What @martineau&#39;s asking is how you&#39;re getting the data into your interpreter to begin with. Do you have a script where you&#39;re manually setting <code>a1 = [...]</code>, <code>a2=[...]</code>, and so on? <i>How</i> is the data being loaded?"}, {"owner": {"reputation": 9, "user_id": 4451055, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/S0hSU.jpg?s=128&g=1", "display_name": "Food Warrior", "link": "https://stackoverflow.com/users/4451055/food-warrior"}, "edited": false, "score": 0, "creation_date": 1492041537, "post_id": 43380843, "comment_id": 73824962, "body": "The data is already set. I was given the data in a spread sheet."}, {"owner": {"reputation": 1843, "user_id": 4067720, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a52c645614505bcaeb65a6c5199158c1?s=128&d=identicon&r=PG", "display_name": "Glyoko", "link": "https://stackoverflow.com/users/4067720/glyoko"}, "edited": false, "score": 0, "creation_date": 1492041893, "post_id": 43380843, "comment_id": 73825061, "body": "Sure, but then how are you loading that spreadsheet into the interpreter? Are you using the <a href=\"http://ruby-doc.org/stdlib-2.0.0/libdoc/csv/rdoc/CSV.html\" rel=\"nofollow noreferrer\">Ruby CSV</a> lib? Are you just copy-pasting it? Can you share the code where you load the data from the spreadsheet?"}, {"owner": {"reputation": 9, "user_id": 4451055, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/S0hSU.jpg?s=128&g=1", "display_name": "Food Warrior", "link": "https://stackoverflow.com/users/4451055/food-warrior"}, "edited": false, "score": 0, "creation_date": 1492042124, "post_id": 43380843, "comment_id": 73825110, "body": "I just copy and pasted into sublime from excel. Glyoko thanks for the help."}, {"owner": {"reputation": 1843, "user_id": 4067720, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a52c645614505bcaeb65a6c5199158c1?s=128&d=identicon&r=PG", "display_name": "Glyoko", "link": "https://stackoverflow.com/users/4067720/glyoko"}, "edited": false, "score": 0, "creation_date": 1492043111, "post_id": 43380843, "comment_id": 73825347, "body": "Check out the <a href=\"http://ruby-doc.org/stdlib-2.0.0/libdoc/csv/rdoc/CSV.html#class-CSV-label-All+at+Once\" rel=\"nofollow noreferrer\">csv</a> lib. You can use it to programmatically read your data in. That way you won&#39;t have to deal with a million variables. Regarding my below answer, <code>all_arrays = [a1, a2, a3, ... a39208]</code> just becomes <code>all_arrays = CSV.read(&quot;path&#47;to&#47;your&#47;file.csv&quot;)</code>. Excel should have an option to export an .xls file to a .csv file somewhere."}, {"owner": {"reputation": 1464, "user_id": 5712410, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/2be8636271ba5bf194537f8119d752b1?s=128&d=identicon&r=PG&f=1", "display_name": "Marko Avlija\u0161", "link": "https://stackoverflow.com/users/5712410/marko-avlija%c5%a1"}, "edited": false, "score": 0, "creation_date": 1492073699, "post_id": 43380843, "comment_id": 73836632, "body": "Copy pasting from excel just sucks. Don&#39;t do that, read CSV file programmatically like Glyoko suggests."}], "answers": [{"tags": [], "owner": {"reputation": 1843, "user_id": 4067720, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a52c645614505bcaeb65a6c5199158c1?s=128&d=identicon&r=PG", "display_name": "Glyoko", "link": "https://stackoverflow.com/users/4067720/glyoko"}, "is_accepted": false, "score": 6, "last_activity_date": 1492039885, "last_edit_date": 1492039885, "creation_date": 1492038720, "answer_id": 43381059, "question_id": 43380843, "link": "https://stackoverflow.com/questions/43380843/comparing-multiple-arrays-against-multiple-arrays-in-ruby-or-python/43381059#43381059", "title": "Comparing multiple arrays against multiple arrays (in ruby or python)", "body": "<p>So first off, the bigger problem here is that you're dealing with 39208 variables. There is almost certainly a better way to work with your data without needing to deal with that many variables. I don't know how you're getting this data into your code, but you should start by putting all these variables into a single array so you don't have to deal with so many variables, e.g.</p>\n\n<pre><code>all_arrays = [a1, a2, a3, ... a39208]\n</code></pre>\n\n<p>After that, you can use <a href=\"https://ruby-doc.org/core-2.2.0/Array.html#method-i-combination\" rel=\"noreferrer\">Array#combination</a> to iterate over all pairs in <code>all_arrays</code>:</p>\n\n<pre><code>all_arrays.combination(2).map do |arr1, arr2|\n  (arr1 - arr2).empty?\nend\n</code></pre>\n\n<p><code>all_arrays.combination(2)</code> will give you <em>all pairs</em> of elements in <code>all_arrays</code>.</p>\n\n<hr>\n\n<p>Looking at it again, it should be pointed out that you may also want to compare these elements in reverse. For some arrays, <code>(a1 - a2).empty?</code> might be true, but <code>(a2 - a1).empty?</code> might be false. e.g.</p>\n\n<pre><code>a1 = [1,2,3]\na2 = [1,2,3,4]\n\n(a1 - a2).empty?\n# =&gt; ([1,2,3] - [1,2,3,4]).empty?\n# =&gt; ([]).empty?\n# =&gt; true\n\n(a2 - a1).empty?\n# =&gt; ([1,2,3,4] - [1,2,3]).empty?\n# =&gt; ([4]).empty?\n# =&gt; false\n</code></pre>\n\n<p>If this matters for your use case, just use <a href=\"https://ruby-doc.org/core-2.2.0/Array.html#method-i-permutation\" rel=\"noreferrer\">Array#permutation</a> instead:</p>\n\n<pre><code>all_arrays.permutation(2).map do |arr1, arr2| ...\n</code></pre>\n"}], "owner": {"reputation": 9, "user_id": 4451055, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/S0hSU.jpg?s=128&g=1", "display_name": "Food Warrior", "link": "https://stackoverflow.com/users/4451055/food-warrior"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 393, "favorite_count": 1, "answer_count": 1, "score": 0, "last_activity_date": 1492039885, "creation_date": 1492037280, "last_edit_date": 1492039831, "question_id": 43380843, "link": "https://stackoverflow.com/questions/43380843/comparing-multiple-arrays-against-multiple-arrays-in-ruby-or-python", "title": "Comparing multiple arrays against multiple arrays (in ruby or python)", "body": "<p>I have 39208 arrays. Labelled <code>a1, a2, a3, a4,... a39208</code>.\nI want to be able to compare each array against all the other arrays.</p>\n\n<pre><code>(a1-a2).empty?; (a1-a3).empty?; (a2-a3).empty?;... (a4-a39208).empty?\n</code></pre>\n\n<p>I'm not sure how to code an array name change in my code. For example if I had a loop:</p>\n\n<pre><code>  b = 0\n     loop do\n       b +=1\n       m = [\"a1\" + b.to_s]\n       w = m\n       k = (m - a1).empty?\n     puts k\n   if b == 39208\n  break\n  end\n end\n</code></pre>\n\n<p>NOT ACTUAL CODE: Just trying to convey an idea. Where <code>m</code> should change to <code>a2, a3, a4, a5</code> As the loop goes along. I know it would just append a # on the end and I would end up with <code>a11, a12, a13</code></p>\n\n<p>So with out having to write <code>(a1-a2).empty?; (a1-a3).empty?; (a2-a3).empty?;... (a4-a39208).empty?</code> until the end of time. How do I have it that the code <code>(a1-a2).empty?</code> changes into <code>-a3, -a4, -a5,... -a390208</code>. => <code>(a1-a39028).empty?</code></p>\n\n<p>What I'm trying to do is input another array into the code changing which array is facing off against the other.</p>\n\n<p>Perhaps there are any other ways of going about this. I can change the arrays into lists, or strings.</p>\n\n<p>EDIT: \nEach array contains 30 numbers, there are 39208 arrays. I'm looking to find the all the arrays that are the same and list each duplicate array.</p>\n"}, {"tags": ["javascript", "ruby-on-rails", "ruby"], "answers": [{"comments": [{"owner": {"reputation": 5850, "user_id": 4501354, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/1230cfcc7f68488ad19d0022cf7b1a93?s=128&d=identicon&r=PG&f=1", "display_name": "Donato", "link": "https://stackoverflow.com/users/4501354/donato"}, "edited": false, "score": 0, "creation_date": 1492036854, "post_id": 43380736, "comment_id": 73823636, "body": "Why must I use inspect too? Why wouldn&#39;t to_json just work?"}, {"owner": {"reputation": 102358, "user_id": 15245, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/9a2a53db8e9b4476038c94a64b32833f?s=128&d=identicon&r=PG", "display_name": "Ryan Bigg", "link": "https://stackoverflow.com/users/15245/ryan-bigg"}, "reply_to_user": {"reputation": 5850, "user_id": 4501354, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/1230cfcc7f68488ad19d0022cf7b1a93?s=128&d=identicon&r=PG&f=1", "display_name": "Donato", "link": "https://stackoverflow.com/users/4501354/donato"}, "edited": false, "score": 0, "creation_date": 1492037027, "post_id": 43380736, "comment_id": 73823702, "body": "Oops, you&#39;re right. <code>to_json</code> will work fine without the <code>inspect</code>."}, {"owner": {"reputation": 5850, "user_id": 4501354, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/1230cfcc7f68488ad19d0022cf7b1a93?s=128&d=identicon&r=PG&f=1", "display_name": "Donato", "link": "https://stackoverflow.com/users/4501354/donato"}, "edited": false, "score": 1, "creation_date": 1492037187, "post_id": 43380736, "comment_id": 73823759, "body": "I think html_safe might be required as well: @full_calendar_options.to_json.html_safe"}], "tags": [], "owner": {"reputation": 102358, "user_id": 15245, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/9a2a53db8e9b4476038c94a64b32833f?s=128&d=identicon&r=PG", "display_name": "Ryan Bigg", "link": "https://stackoverflow.com/users/15245/ryan-bigg"}, "is_accepted": true, "score": 0, "last_activity_date": 1492037019, "last_edit_date": 1492037019, "creation_date": 1492036671, "answer_id": 43380736, "question_id": 43380659, "link": "https://stackoverflow.com/questions/43380659/parse-ruby-hash-within-script-tag-in-a-index-html-erb-file/43380736#43380736", "title": "Parse ruby hash within script tag in a index.html.erb file", "body": "<p>You probably want this output to JSON, as it looks like you're assigning it to a JavaScript variable. In that case:</p>\n\n<pre><code>var options =  &lt;%= @full_calendar_options.to_json %&gt;\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 5850, "user_id": 4501354, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/1230cfcc7f68488ad19d0022cf7b1a93?s=128&d=identicon&r=PG&f=1", "display_name": "Donato", "link": "https://stackoverflow.com/users/4501354/donato"}, "edited": false, "score": 0, "creation_date": 1492112312, "post_id": 43380748, "comment_id": 73861448, "body": "Out of curiosity why does Rails escape the data by default? Isn&#39;t it an inconvenience? Who would want data that looks like this? {:theme=&amp;gt;true, :header=&amp;gt;"}, {"owner": {"reputation": 5850, "user_id": 4501354, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/1230cfcc7f68488ad19d0022cf7b1a93?s=128&d=identicon&r=PG&f=1", "display_name": "Donato", "link": "https://stackoverflow.com/users/4501354/donato"}, "edited": false, "score": 0, "creation_date": 1492119618, "post_id": 43380748, "comment_id": 73864824, "body": "This is a good explanation why: <a href=\"http://yehudakatz.com/2010/02/01/safebuffers-and-rails-3-0/\" rel=\"nofollow noreferrer\">yehudakatz.com/2010/02/01/safebuffers-and-rails-3-0</a> Basically because anything within &lt;%= %&gt; can be unsafe user input, including malicious javascript so it by default escapes it so as not to be malicious."}], "tags": [], "owner": {"reputation": 20644, "user_id": 184184, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/f6a508697f9eca2680b12ddb85ba1319?s=128&d=identicon&r=PG", "display_name": "Lenin Raj Rajasekaran", "link": "https://stackoverflow.com/users/184184/lenin-raj-rajasekaran"}, "is_accepted": false, "score": 2, "last_activity_date": 1492036732, "creation_date": 1492036732, "answer_id": 43380748, "question_id": 43380659, "link": "https://stackoverflow.com/questions/43380659/parse-ruby-hash-within-script-tag-in-a-index-html-erb-file/43380748#43380748", "title": "Parse ruby hash within script tag in a index.html.erb file", "body": "<pre><code>&lt;script&gt;\nvar options =  &lt;%= raw @full_calendar_options.to_json %&gt;;\n</code></pre>\n"}], "owner": {"reputation": 5850, "user_id": 4501354, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/1230cfcc7f68488ad19d0022cf7b1a93?s=128&d=identicon&r=PG&f=1", "display_name": "Donato", "link": "https://stackoverflow.com/users/4501354/donato"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 291, "favorite_count": 0, "accepted_answer_id": 43380736, "answer_count": 2, "score": 1, "last_activity_date": 1492037019, "creation_date": 1492036240, "question_id": 43380659, "link": "https://stackoverflow.com/questions/43380659/parse-ruby-hash-within-script-tag-in-a-index-html-erb-file", "title": "Parse ruby hash within script tag in a index.html.erb file", "body": "<p>How would I parse a ruby hash within a <code>&lt;script&gt;</code> tag in my <code>index.html.erb</code> file?</p>\n\n<p>The controller:</p>\n\n<pre><code>@full_calendar_options = { theme: true, header: { left: 'month,agendaWeek,agendaDay', center: 'title', right: 'prev,next' }, defaultView: 'agendaWeek', buttonIcons: { prev: 'calendar-left-arrow', next: 'calendar-right-arrow' } }\n</code></pre>\n\n<p>In the index.html.erb, this would produce javascript syntax error:</p>\n\n<pre><code>&lt;script&gt;\nvar options =  &lt;%= @full_calendar_options %&gt;;\n</code></pre>\n\n<p>As it would produce:</p>\n\n<pre><code> var options =  {:theme=&amp;gt;true, :header=&amp;gt;{:left=&amp;gt;&amp;quot;month,agendaWeek,agendaDay&amp;quot;, :center=&amp;gt;&amp;quot;title&amp;quot;, :right=&amp;gt;&amp;quot;prev,next&amp;quot;} ...\n</code></pre>\n\n<p>When I wrap the ruby capture with a string, I get no error:</p>\n\n<pre><code>var options =  '&lt;%= @full_calendar_options %&gt;';\n</code></pre>\n\n<p>But it produces:</p>\n\n<pre><code>var options =  '{:theme=&amp;gt;true, :header=&amp;gt;{:left=&amp;gt;&amp;quot;month,agendaWeek,agendaDay&amp;quot;, :center=&amp;gt;&amp;quot;title&amp;quot;, :right=&amp;gt;&amp;quot;prev,next&amp;quot;}, ...\n</code></pre>\n\n<p>which is an encoded string. It is not JSON so I cannot parse it into an object literal. I am trying to get the object literal in JavaScript. What is the best way to achieve this?</p>\n"}, {"tags": ["ruby", "bundler"], "comments": [{"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1492035031, "post_id": 43380205, "comment_id": 73822981, "body": "Can you just git ignore your lock file? I know this does not answer the question but could resolve the issue"}, {"owner": {"reputation": 16229, "user_id": 525478, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/3b6c0b47a0c430a0b141baee7ea845be?s=128&d=identicon&r=PG", "display_name": "Brad Werth", "link": "https://stackoverflow.com/users/525478/brad-werth"}, "edited": false, "score": 0, "creation_date": 1492035363, "post_id": 43380205, "comment_id": 73823120, "body": "What OS are you on?"}, {"owner": {"reputation": 20644, "user_id": 184184, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/f6a508697f9eca2680b12ddb85ba1319?s=128&d=identicon&r=PG", "display_name": "Lenin Raj Rajasekaran", "link": "https://stackoverflow.com/users/184184/lenin-raj-rajasekaran"}, "edited": false, "score": 0, "creation_date": 1492036137, "post_id": 43380205, "comment_id": 73823394, "body": "tell us what is changing in the lock file. there lies the clue."}, {"owner": {"reputation": 39041, "user_id": 27358, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/fed1635f89478c88eda07e87de452bcf?s=128&d=identicon&r=PG", "display_name": "David Moles", "link": "https://stackoverflow.com/users/27358/david-moles"}, "reply_to_user": {"reputation": 16229, "user_id": 525478, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/3b6c0b47a0c430a0b141baee7ea845be?s=128&d=identicon&r=PG", "display_name": "Brad Werth", "link": "https://stackoverflow.com/users/525478/brad-werth"}, "edited": false, "score": 0, "creation_date": 1492036148, "post_id": 43380205, "comment_id": 73823397, "body": "@BradWerth macOS (El Capitan)."}, {"owner": {"reputation": 39041, "user_id": 27358, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/fed1635f89478c88eda07e87de452bcf?s=128&d=identicon&r=PG", "display_name": "David Moles", "link": "https://stackoverflow.com/users/27358/david-moles"}, "reply_to_user": {"reputation": 20644, "user_id": 184184, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/f6a508697f9eca2680b12ddb85ba1319?s=128&d=identicon&r=PG", "display_name": "Lenin Raj Rajasekaran", "link": "https://stackoverflow.com/users/184184/lenin-raj-rajasekaran"}, "edited": false, "score": 0, "creation_date": 1492036214, "post_id": 43380205, "comment_id": 73823422, "body": "@emaillenin I don&#39;t think so. It&#39;s just some random gem versions, different ones each time."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1492036337, "post_id": 43380205, "comment_id": 73823465, "body": "It would help if you can identify what changes have been made, perhaps via <code>git diff</code> or by looking between the <code>&gt;&gt;&gt;</code> sections identifying a conflict. Newer versions of Bundler put in a version stamp, and out of sync versions can cause version control noise."}, {"owner": {"reputation": 39041, "user_id": 27358, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/fed1635f89478c88eda07e87de452bcf?s=128&d=identicon&r=PG", "display_name": "David Moles", "link": "https://stackoverflow.com/users/27358/david-moles"}, "reply_to_user": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 1, "creation_date": 1492036696, "post_id": 43380205, "comment_id": 73823577, "body": "@engineersmnky For reproducibility, we want the application Gemfile.lock in version control. (Cf. <a href=\"http://doc.crates.io/faq.html#why-do-binaries-have-cargolock-in-version-control-but-not-libraries\" rel=\"nofollow noreferrer\">this discussion</a> around Cargo.lock, which plays a similar role in the Rust world.)"}, {"owner": {"reputation": 39041, "user_id": 27358, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/fed1635f89478c88eda07e87de452bcf?s=128&d=identicon&r=PG", "display_name": "David Moles", "link": "https://stackoverflow.com/users/27358/david-moles"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1492036813, "post_id": 43380205, "comment_id": 73823621, "body": "@tadman it&#39;s usually one line, e.g. <code>- jquery-turbolinks (~&gt; 2.1.0) &#47; + jquery-turbolinks</code> or <code>+ unf_ext (0.0.7.3) &#47; + unf_ext (0.0.7.2)</code>. Whatever&#39;s causing the file to be regenerated has nothing to do with the content as such; it&#39;s just rerunning <code>bundle install</code> in a slightly different environment from the previousi checkin (or doing something else that has the same effect)."}, {"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1492036836, "post_id": 43380205, "comment_id": 73823628, "body": "@DavidMoles I understand just a thought I mean obviously you could always lock gem versions explicitly or at least major.minor version in the Gemfile itself"}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1492036986, "post_id": 43380205, "comment_id": 73823687, "body": "Looks like some kind of oddball platform issue. JRuby vs. MRI Ruby? Windows vs. Linux?"}, {"owner": {"reputation": 39041, "user_id": 27358, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/fed1635f89478c88eda07e87de452bcf?s=128&d=identicon&r=PG", "display_name": "David Moles", "link": "https://stackoverflow.com/users/27358/david-moles"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1492037137, "post_id": 43380205, "comment_id": 73823750, "body": "@tadman Nope, the whole team is on MRI and macOS, though some use rvm and some use rbenv. I think the differences are mostly a matter of timing (e.g. a new version of some gem being released in between different developers&#39; runs of <code>bundle install</code>.)"}, {"owner": {"reputation": 12661, "user_id": 5343387, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/15a14cec3014822297a08ed6dfae2563?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Schuchard", "link": "https://stackoverflow.com/users/5343387/matt-schuchard"}, "edited": false, "score": 0, "creation_date": 1492086336, "post_id": 43380205, "comment_id": 73845371, "body": "<a href=\"https://www.cyberciti.biz/tips/linux-audit-files-to-see-who-made-changes-to-a-file.html\" rel=\"nofollow noreferrer\">cyberciti.biz/tips/&hellip;</a>"}, {"owner": {"reputation": 39041, "user_id": 27358, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/fed1635f89478c88eda07e87de452bcf?s=128&d=identicon&r=PG", "display_name": "David Moles", "link": "https://stackoverflow.com/users/27358/david-moles"}, "reply_to_user": {"reputation": 12661, "user_id": 5343387, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/15a14cec3014822297a08ed6dfae2563?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Schuchard", "link": "https://stackoverflow.com/users/5343387/matt-schuchard"}, "edited": false, "score": 0, "creation_date": 1492101206, "post_id": 43380205, "comment_id": 73855792, "body": "@MattSchuchard macOS. see above comments."}, {"owner": {"reputation": 39041, "user_id": 27358, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/fed1635f89478c88eda07e87de452bcf?s=128&d=identicon&r=PG", "display_name": "David Moles", "link": "https://stackoverflow.com/users/27358/david-moles"}, "reply_to_user": {"reputation": 12661, "user_id": 5343387, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/15a14cec3014822297a08ed6dfae2563?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Schuchard", "link": "https://stackoverflow.com/users/5343387/matt-schuchard"}, "edited": false, "score": 0, "creation_date": 1492460947, "post_id": 43380205, "comment_id": 73974158, "body": "@MattSchuchard (Also, no offense meant, but a comment consisting of nothing but a <code>cyberciti.biz</code> URL looks sketchy AF\u2014I was this close to flagging as spam without clicking.)"}], "answers": [{"comments": [{"owner": {"reputation": 179, "user_id": 1343535, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b1ad9e484e4adf66eb539d03339f88dc?s=128&d=identicon&r=PG", "display_name": "dbenton", "link": "https://stackoverflow.com/users/1343535/dbenton"}, "edited": false, "score": 2, "creation_date": 1513994189, "post_id": 43414678, "comment_id": 82868175, "body": "Thanks! <code>spring stop</code> did the trick for me."}, {"owner": {"reputation": 5944, "user_id": 2758467, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/Sljaj.jpg?s=128&g=1", "display_name": "Rajesh Paul", "link": "https://stackoverflow.com/users/2758467/rajesh-paul"}, "edited": false, "score": 0, "creation_date": 1584952588, "post_id": 43414678, "comment_id": 107588668, "body": "THanks a lot buddy. Ran into the same proble. U r a lifesaver"}], "tags": [], "owner": {"reputation": 39041, "user_id": 27358, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/fed1635f89478c88eda07e87de452bcf?s=128&d=identicon&r=PG", "display_name": "David Moles", "link": "https://stackoverflow.com/users/27358/david-moles"}, "is_accepted": true, "score": 5, "last_activity_date": 1492183964, "last_edit_date": 1495540455, "creation_date": 1492183964, "answer_id": 43414678, "question_id": 43380205, "link": "https://stackoverflow.com/questions/43380205/something-keeps-rewriting-my-gemfile-lock/43414678#43414678", "title": "Something keeps rewriting my Gemfile.lock", "body": "<p>Found the culprit, thanks to <a href=\"https://stackoverflow.com/a/29134747/27358\">this answer</a> (<a href=\"https://stackoverflow.com/a/31790448/27358\">this answer</a> concurs): <a href=\"https://github.com/rails/spring\" rel=\"nofollow noreferrer\">Spring</a>. There were half a dozen rogue <code>spring</code> processes on my machine, and any or all of them must have been regenerating the file. Killing those processes solved the problem, and so far adding <code>export DISABLE_SPRING=1</code> to my <code>.bash_profile</code> seems to have kept it from recurring.</p>\n\n<p>(<code>spring stop</code> might have worked too. I don't know whether it stops all Spring processes or just one of them, though.)</p>\n"}], "owner": {"reputation": 39041, "user_id": 27358, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/fed1635f89478c88eda07e87de452bcf?s=128&d=identicon&r=PG", "display_name": "David Moles", "link": "https://stackoverflow.com/users/27358/david-moles"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 759, "favorite_count": 1, "closed_date": 1492184357, "accepted_answer_id": 43414678, "answer_count": 1, "score": 3, "last_activity_date": 1492183964, "creation_date": 1492033763, "question_id": 43380205, "link": "https://stackoverflow.com/questions/43380205/something-keeps-rewriting-my-gemfile-lock", "closed_reason": "Duplicate", "title": "Something keeps rewriting my Gemfile.lock", "body": "<p>Working on a shared project, I often find that my <code>Gemfile.lock</code> gets out of sync with the repository, producing error messages like:</p>\n\n<pre><code>$ git pull\nUpdating 1911275..8c5d26f\nerror: Your local changes to the following files would be overwritten by merge:\n    Gemfile.lock\nPlease commit your changes or stash them before you merge.\nAborting\n</code></pre>\n\n<p>When I try to <code>git stash</code> the change, it doesn't work:</p>\n\n<pre><code>$ git stash\nSaved working directory and index state WIP on development: 1911275 Merge branch 'development' of https://github.com/mygroup/myrepo into development\nHEAD is now at 1911275 Merge branch 'development' of https://github.com/mygroup/myrepo into development\n$ git status\nOn branch development\nYour branch is behind 'origin/development' by 3 commits, and can be fast-forwarded.\n  (use \"git pull\" to update your local branch)\nChanges not staged for commit:\n  (use \"git add &lt;file&gt;...\" to update what will be committed)\n  (use \"git checkout -- &lt;file&gt;...\" to discard changes in working directory)\n\n    modified:   Gemfile.lock\n\nno changes added to commit (use \"git add\" and/or \"git commit -a\")\n</code></pre>\n\n<p>If I <code>stash</code> and <code>status</code> quickly enough, I can see that the change is getting stashed:</p>\n\n<pre><code>$ git stash &amp;&amp; git status\nSaved working directory and index state WIP on development: 1911275 Merge branch 'development' of https://github.com/mygroup/myrepo into development\nHEAD is now at 1911275 Merge branch 'development' of https://github.com/mygroup/myrepo into development\nOn branch development\nYour branch is behind 'origin/development' by 3 commits, and can be fast-forwarded.\n  (use \"git pull\" to update your local branch)\nnothing to commit, working tree clean\n</code></pre>\n\n<p>But another <code>status</code> shows that <code>Gemfile.lock</code> has come back:</p>\n\n<pre><code>$ git status\nOn branch development\nYour branch is behind 'origin/development' by 3 commits, and can be fast-forwarded.\n  (use \"git pull\" to update your local branch)\nChanges not staged for commit:\n  (use \"git add &lt;file&gt;...\" to update what will be committed)\n  (use \"git checkout -- &lt;file&gt;...\" to discard changes in working directory)\n\n    modified:   Gemfile.lock\n\nno changes added to commit (use \"git add\" and/or \"git commit -a\")\n</code></pre>\n\n<p>Unfortunately the same trick doesn't work with <code>git stash &amp;&amp; git pull</code>; <code>pull</code> is too slow, and the lockfile reappears before the pull can succeed.</p>\n\n<p>I thought it might be my IDE re-bundling in the background, but it happens whether or not the IDE is running. I can't find any running bundler processes, gem processes, or indeed any obvious Ruby processes of any kind.</p>\n\n<p>Who or what is regenerating my file?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "imagemagick", "minimagick"], "answers": [{"comments": [{"owner": {"reputation": 986, "user_id": 8304905, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YpAOE.jpg?s=128&g=1", "display_name": "EmmanuelB", "link": "https://stackoverflow.com/users/8304905/emmanuelb"}, "edited": false, "score": 0, "creation_date": 1541621029, "post_id": 53196953, "comment_id": 93282451, "body": "There are probably better solutions, specifying how to <code>repeat the same image</code> instead of <code>adding the same image multiple times</code>, maybe a different mode than <code>concatenate</code>, handle the column-row grid better and so on... But this answer is a good place to start and it solves your question. Hope it helps."}], "tags": [], "owner": {"reputation": 986, "user_id": 8304905, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YpAOE.jpg?s=128&g=1", "display_name": "EmmanuelB", "link": "https://stackoverflow.com/users/8304905/emmanuelb"}, "is_accepted": false, "score": 1, "last_activity_date": 1541620886, "creation_date": 1541620886, "answer_id": 53196953, "question_id": 43380058, "link": "https://stackoverflow.com/questions/43380058/minimagick-tile-same-image/53196953#53196953", "title": "MiniMagick tile same image", "body": "<p>You have to use <code>Minimagick::Tool::Montage</code></p>\n\n<pre><code>MiniMagick::Tool::Montage.new do |montage|\n  montage.mode 'concatenate'\n  11.times do \n    montage &lt;&lt; 'yeah.jpg'\n  end\n  # montage.tile '3x3'\n  montage &lt;&lt; 'result.jpg'\nend\n</code></pre>\n\n<p>You have to add the same same image as many times as you need to have it repeated.</p>\n\n<p>If you specify the <code>tile</code>, then you control the <code>COLxROW</code> of your result.</p>\n\n<p>If the number of images you send to your montage does not fit in your <code>tile</code> specification, different resulting images will be generated. You can check this behavior by uncommenting <code>montage.tile</code> in the example provided.</p>\n"}], "owner": {"reputation": 11, "user_id": 5991412, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-JPZewJK8Q1A/AAAAAAAAAAI/AAAAAAAAHmk/lLAsTk5mwDs/photo.jpg?sz=128", "display_name": " Galiullin_ko ", "link": "https://stackoverflow.com/users/5991412/galiullin-ko"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 322, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1541620886, "creation_date": 1492033035, "last_edit_date": 1492087938, "question_id": 43380058, "link": "https://stackoverflow.com/questions/43380058/minimagick-tile-same-image", "title": "MiniMagick tile same image", "body": "<p>I'm trying to make background by tiling same image (sorry, don't know how to write it correctly, <a href=\"https://i.stack.imgur.com/EqoA0.jpg\" rel=\"nofollow noreferrer\">here's example</a> ) with <code>MiniMagick</code>. I saw <code>ImageMagick</code> command <code>convert -size 1056x576 tile:Castillo_001.gif Castillo_tiled.gif</code>, but I can't reproduce it in <code>MiniMagick</code>. Or maybe here's some better solution, if I already have <code>MiniMagick::Image</code> object? Can you help me, please? </p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4", "amazon-s3", "paperclip"], "comments": [{"owner": {"reputation": 138098, "user_id": 1695906, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/638d2ec6b52f3db1583890be23d74cc6?s=128&d=identicon&r=PG", "display_name": "Michael - sqlbot", "link": "https://stackoverflow.com/users/1695906/michael-sqlbot"}, "edited": false, "score": 0, "creation_date": 1492041117, "post_id": 43379977, "comment_id": 73824859, "body": "This suggests a problem with the <code>file</code> utility not running thus returning no content type.  Does the command <code>file -b --mime &#39;&#47;tmp&#47;82ec0de52ea6371366640c52ac59bc3120170412-25375-1gm001x&zwnj;&#8203;.pdf</code> work on this machine?"}], "answers": [{"tags": [], "owner": {"reputation": 88, "user_id": 4569046, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2dad96b11d6ac0007a6362f40f4f483d?s=128&d=identicon&r=PG&f=1", "display_name": "imh0tep", "link": "https://stackoverflow.com/users/4569046/imh0tep"}, "is_accepted": false, "score": 0, "last_activity_date": 1507761617, "creation_date": 1507761617, "answer_id": 46698625, "question_id": 43379977, "link": "https://stackoverflow.com/questions/43379977/paperclip-error-paperclip-content-type-spoof-on-staging/46698625#46698625", "title": "Paperclip error [paperclip] Content Type Spoof on staging", "body": "<p>This problem arises because for some reason <code>/usr/bin</code> is not in the <code>$PATH</code> that is used by Paperclip when running through Passenger.  To resolve, add the following to <code>config/environments/production.rb</code> (or similar):</p>\n\n<pre><code>Paperclip.options[:command_path] = \"/usr/bin/\"\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 7036508, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4a3de6665e23ddb19b728b9e90cda6a3?s=128&d=identicon&r=PG&f=1", "display_name": "Victor Arruda", "link": "https://stackoverflow.com/users/7036508/victor-arruda"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 564, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1507761617, "creation_date": 1492032615, "last_edit_date": 1492033827, "question_id": 43379977, "link": "https://stackoverflow.com/questions/43379977/paperclip-error-paperclip-content-type-spoof-on-staging", "title": "Paperclip error [paperclip] Content Type Spoof on staging", "body": "<p>I managed to set up Paperclip on my company project and everything works fine on my local machine, the files are both saved locally and on my S3 bucket, but when i make the deploy to our staging environt the following error show in the log: </p>\n\n<blockquote>\n  <p>Command :: file -b --mime\n  '/tmp/82ec0de52ea6371366640c52ac59bc3120170412-25375-1gm001x.pdf' I,\n  [2017-04-12T20:45:53.506732 #25375]  INFO -- : [paperclip] Content\n  Type Spoof: Filename test.pdf  (application/pdf from Headers,\n  [\"application/pdf\"] from Extension), content type discovered from file\n  command: . See documentation to allow this combination.</p>\n</blockquote>\n\n<p>The error of spoofed media type shows up on the screen. And I cannot find anything on the internet about this specific situation. </p>\n"}, {"tags": ["ruby", "ansible"], "comments": [{"owner": {"reputation": 3012, "user_id": 4111295, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/V9WSf.jpg?s=128&g=1", "display_name": "alexventuraio", "link": "https://stackoverflow.com/users/4111295/alexventuraio"}, "edited": false, "score": 0, "creation_date": 1613002073, "post_id": 43379844, "comment_id": 116945337, "body": "what was the fix for this? I have the same problem right now. Can you help me sharing your solution, please?"}, {"owner": {"reputation": 5950, "user_id": 3803152, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/3k2Tp.jpg?s=128&g=1", "display_name": "TheSoundDefense", "link": "https://stackoverflow.com/users/3803152/thesounddefense"}, "reply_to_user": {"reputation": 3012, "user_id": 4111295, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/V9WSf.jpg?s=128&g=1", "display_name": "alexventuraio", "link": "https://stackoverflow.com/users/4111295/alexventuraio"}, "edited": false, "score": 0, "creation_date": 1614712677, "post_id": 43379844, "comment_id": 117467707, "body": "@alexventuraio the expected answer solved the issue I&#39;m having (along with the comments below)."}], "answers": [{"comments": [{"owner": {"reputation": 5950, "user_id": 3803152, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/3k2Tp.jpg?s=128&g=1", "display_name": "TheSoundDefense", "link": "https://stackoverflow.com/users/3803152/thesounddefense"}, "edited": false, "score": 0, "creation_date": 1492034156, "post_id": 43380114, "comment_id": 73822649, "body": "Unfortunately this is not the case. If I manually SSH into the machine and switch to rvmuser, <code>which rvm</code> succeeds. The directory it&#39;s located in turns up in the <code>PATH</code> variable, as well."}, {"owner": {"reputation": 3776, "user_id": 6684013, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d1fabba34247a20ea9ade92c321db34a?s=128&d=identicon&r=PG&f=1", "display_name": "Zlemini ", "link": "https://stackoverflow.com/users/6684013/zlemini"}, "reply_to_user": {"reputation": 5950, "user_id": 3803152, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/3k2Tp.jpg?s=128&g=1", "display_name": "TheSoundDefense", "link": "https://stackoverflow.com/users/3803152/thesounddefense"}, "edited": false, "score": 3, "creation_date": 1492035121, "post_id": 43380114, "comment_id": 73823019, "body": "Ansible does not use a login shell when it transfers modules and executes them, thats why its not picking up the <code>$PATH</code> of the <code>rvm</code> user. You can either run <code>rvm</code> with full path or source the env in a shell task: pseudocode <code>- shell: . &#47;etc&#47;environment &amp;&amp; commandhere</code>"}, {"owner": {"reputation": 5950, "user_id": 3803152, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/3k2Tp.jpg?s=128&g=1", "display_name": "TheSoundDefense", "link": "https://stackoverflow.com/users/3803152/thesounddefense"}, "edited": false, "score": 0, "creation_date": 1492036417, "post_id": 43380114, "comment_id": 73823489, "body": "Ahh, that makes sense. This seems to have done the trick! Now I need to figure out expect. Thanks!"}], "tags": [], "owner": {"reputation": 3776, "user_id": 6684013, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d1fabba34247a20ea9ade92c321db34a?s=128&d=identicon&r=PG&f=1", "display_name": "Zlemini ", "link": "https://stackoverflow.com/users/6684013/zlemini"}, "is_accepted": true, "score": 2, "last_activity_date": 1492033931, "last_edit_date": 1492033931, "creation_date": 1492033256, "answer_id": 43380114, "question_id": 43379844, "link": "https://stackoverflow.com/questions/43379844/how-to-run-ansible-tasks-as-a-specific-user/43380114#43380114", "title": "How to run Ansible tasks as a specific user", "body": "<p>That looks like a path issue, i.e. the newly created <code>rvmuser</code> does not have <code>rvm</code> in its <code>$PATH</code>:</p>\n\n<p>Try full path to <code>rvm</code> in this task: </p>\n\n<pre><code>- name: Install Ruby\n  shell: \"rvm install 2.2.1\"\n  become: True\n  become_user: rvmuser\n</code></pre>\n"}], "owner": {"reputation": 5950, "user_id": 3803152, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/3k2Tp.jpg?s=128&g=1", "display_name": "TheSoundDefense", "link": "https://stackoverflow.com/users/3803152/thesounddefense"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1043, "favorite_count": 0, "accepted_answer_id": 43380114, "answer_count": 1, "score": 1, "last_activity_date": 1492034256, "creation_date": 1492032049, "last_edit_date": 1492034256, "question_id": 43379844, "link": "https://stackoverflow.com/questions/43379844/how-to-run-ansible-tasks-as-a-specific-user", "title": "How to run Ansible tasks as a specific user", "body": "<p>Part of the Ansible playbook I'm currently writing involves creating a new user as root, installing <code>rvm</code> for that specific user, then switching to them in order to run <code>rvm</code>. It doesn't seem to take, however. Here's what I'm currently running.</p>\n\n<pre><code>---\n- name: Install pexpect\n  yum:\n    name: pexpect\n    state: latest\n- name: Create rvm group\n  group:\n    name: rvm\n    state: present\n- name: Create rvmuser\n  user:\n    name: rvmuser\n    state: present\n    group: rvm\n    password: \"{{vault_rvm_password}}\"\n- name: Download signing key\n  shell: \"command curl -sSL https://rvm.io/mpapis.asc | gpg2 --import -\"\n  become: True\n  become_user: rvmuser\n- name: RVM single-user install\n  shell: \"curl -L https://get.rvm.io | bash -s stable\"\n  become: True\n  become_user: rvmuser\n- name: Install Ruby\n  shell: \"rvm install 2.2.1\"\n  become: True\n  become_user: rvmuser\n</code></pre>\n\n<p>(These particular shell steps appear to be the preferred way of installing a specific version of Ruby; I tried using <code>yum</code> to install an RPM, but then <code>gem</code> fails.)</p>\n\n<p>Basically, when it gets to the \"Install Ruby\" step, it fails because it can't find <code>rvm</code>, which is a strong indication that it's still trying to run the command as root. Here's the error:</p>\n\n<pre><code>TASK [ruby : Install Ruby] *****************************************************\nfatal: [10.121.250.21]: FAILED! =&gt; {\"changed\": true, \"cmd\": \"rvm install 2.2.1\", \"delta\": \"0:00:00.007545\", \"end\": \"2017-04-12 16:14:35.974732\", \"failed\": true, \"rc\": 127, \"start\": \"2017-04-12 16:14:35.967187\", \"stderr\": \"/bin/sh: rvm: command not found\", \"stdout\": \"\", \"stdout_lines\": [], \"warnings\": []}\n</code></pre>\n\n<p>Am I doing this incorrectly, or is something else going wrong behind the scenes?</p>\n\n<p>EDIT: The user is being created correctly, I've confirmed. After running the top five steps, I can SSH into the machine, switch to <code>rvmuser</code> and see that <code>which rvm</code> returns a path.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4", "serialization", "associations"], "comments": [{"owner": {"reputation": 4600, "user_id": 5961578, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/df7cbfdd2a92a7926af3bbb8648318aa?s=128&d=identicon&r=PG", "display_name": "moveson", "link": "https://stackoverflow.com/users/5961578/moveson"}, "edited": false, "score": 1, "creation_date": 1492033850, "post_id": 43379798, "comment_id": 73822526, "body": "In the attributes of your QuestionSerializer, you have a trailing comma after <code>:required_languages</code>. Is that comma actually there in your code? If so, delete it and see if that helps."}, {"owner": {"reputation": 11, "user_id": 6836403, "user_type": "registered", "profile_image": "https://graph.facebook.com/10209147251430643/picture?type=large", "display_name": "Robin Gonzalez Valero", "link": "https://stackoverflow.com/users/6836403/robin-gonzalez-valero"}, "reply_to_user": {"reputation": 4600, "user_id": 5961578, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/df7cbfdd2a92a7926af3bbb8648318aa?s=128&d=identicon&r=PG", "display_name": "moveson", "link": "https://stackoverflow.com/users/5961578/moveson"}, "edited": false, "score": 0, "creation_date": 1492097320, "post_id": 43379798, "comment_id": 73853502, "body": "@moveson unfortunately it is not in the code anymore so it is not the issue :("}, {"owner": {"reputation": 4600, "user_id": 5961578, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/df7cbfdd2a92a7926af3bbb8648318aa?s=128&d=identicon&r=PG", "display_name": "moveson", "link": "https://stackoverflow.com/users/5961578/moveson"}, "edited": false, "score": 0, "creation_date": 1492118390, "post_id": 43379798, "comment_id": 73864330, "body": "Could you show the controller that calls the serializer?"}], "owner": {"reputation": 11, "user_id": 6836403, "user_type": "registered", "profile_image": "https://graph.facebook.com/10209147251430643/picture?type=large", "display_name": "Robin Gonzalez Valero", "link": "https://stackoverflow.com/users/6836403/robin-gonzalez-valero"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 138, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1492097291, "creation_date": 1492031851, "last_edit_date": 1492097291, "question_id": 43379798, "link": "https://stackoverflow.com/questions/43379798/association-not-working-in-serializer", "title": "Association not working in serializer", "body": "<p>So I have two tables <code>questions</code> and <code>answers</code>, a question has many answers. I built a serializer to show the answers from questions as such:</p>\n\n<p>Questions serializer:</p>\n\n<pre><code>class QuestionSerializer &lt; ActiveModel::Serializer\n  attributes :id, :name, :question_type, :is_deleted, :is_editable, :sort, :max_character,\n             :min_character, :weighting, :required_languages\n\n  has_many :answers, serializer: AnswerSerializer\n\n  def name\n    { en: object.name_en, fr: object.name_fr, es: object.name_es }\n  end\n</code></pre>\n\n<p>Answers serializer:</p>\n\n<pre><code>class AnswerSerializer &lt; ActiveModel::Serializer\n  attributes :text, :order, :answerId\n\n  def answerId\n    object.id\n  end\n\n  def text\n    { en: object.text_en, fr: object.text_fr, es: object.text_es }\n  end\nend\n</code></pre>\n\n<p>The problem is that when querying for questions, I don't get answers inside with the has_many association. However, if I include <code>:answers</code> as an attribute then the answers do show inside the question. The models for answers and questions are these:</p>\n\n<p>Questions model:</p>\n\n<pre><code>class Question &lt; ActiveRecord::Base\n  # Belongs_to associations\n  belongs_to :company_department\n  belongs_to :question_category\n\n  # Has_many associations\n  has_many :join_forms_questions\n  has_many :join_answers_forms_questions, through: :join_forms_questions\n  has_many :answers\n  has_many :join_categories_questions\n  has_many :question_categories, through: :join_categories_questions\n  has_many :forms, through: :join_forms_questions\nend\n</code></pre>\n\n<p>Answers model:</p>\n\n<pre><code>class Answer &lt; ActiveRecord::Base\n  # Belongs_to associations\n  belongs_to :questions\n  belongs_to :join_answers_forms_questions\nend\n</code></pre>\n\n<p>Anyone has any ideas what could be happening?</p>\n"}, {"tags": ["sql-server", "ruby", "postgresql", "orm", "sequel"], "comments": [{"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1492035488, "post_id": 43379084, "comment_id": 73823178, "body": "I am assuming client_groups exists only in DB1?"}, {"owner": {"reputation": 456, "user_id": 3122311, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/679c944afa134ee19cbf571de55aae15?s=128&d=identicon&r=PG", "display_name": "Pedro Vin&#237;cius", "link": "https://stackoverflow.com/users/3122311/pedro-vin%c3%adcius"}, "reply_to_user": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1492038294, "post_id": 43379084, "comment_id": 73824068, "body": "Yes @engineersmnky,  exactly! My intention is relate the data in both databases through clients_groups in DB 1."}, {"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1492038467, "post_id": 43379084, "comment_id": 73824116, "body": "Not sure never tried cross database query with different Sql databases but I think either postgres handles this better than tiny tds or you need the join table in both databases. Like I said never tried it I would more likely migrate the data into the preferred database and repoint"}], "owner": {"reputation": 456, "user_id": 3122311, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/679c944afa134ee19cbf571de55aae15?s=128&d=identicon&r=PG", "display_name": "Pedro Vin&#237;cius", "link": "https://stackoverflow.com/users/3122311/pedro-vin%c3%adcius"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 171, "favorite_count": 0, "answer_count": 0, "score": 4, "last_activity_date": 1492055492, "creation_date": 1492028995, "last_edit_date": 1492034165, "question_id": 43379084, "link": "https://stackoverflow.com/questions/43379084/may-i-have-a-join-between-tables-in-different-databases-while-using-sequel", "title": "May I have a join between tables in different databases while using Sequel?", "body": "<p>I'm building an integration software between two different systems. I have <em>Clients</em> in a database, and <em>Groups</em> in another. One Client can be in multiple groups, and one group can have multiple clients. So, I created an intermediate table named as <code>clients_groups</code> to represent this relation. </p>\n\n<p>My models are so:</p>\n\n<pre><code>DB1 = Sequel.connect(adapter: 'postgresql'...)\nDB2 = Sequel.connect(adapter: 'tinytds'...)\n\nclass Client &lt; Sequel::Model\n  set_dataset DB1[:clients]\n\n  many_to_many :groups, left_ley: :client_id, right_key: :group_id, join_table: :clients_groups, left_primary_key_column: :id\nend\n\nclass Group &lt; Sequel::Model\n  set_dataset DB2[:groups]\n\n  many_to_many :clients, left_ley: :group_id, right_key: :client_id, join_table: :clients_groups, right_primary_key_column: :id\nend\n</code></pre>\n\n<p>This statement works:</p>\n\n<p><code>Client.last.groups</code></p>\n\n<p>While this throws an error:</p>\n\n<p><code>Group.last.clients # =&gt; Sequel::DatabaseError: TinyTds::Error: Invalid object name 'CLIENTS_GROUPS'</code></p>\n\n<p>What am I doing wrong?</p>\n"}, {"tags": ["sql", "ruby", "sqlite"], "comments": [{"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1492039962, "post_id": 43378967, "comment_id": 73824538, "body": "I&#39;d recommend looking into using an ORM. They reduce the need to learn SQL and allow you concentrate on the code. Also, when it&#39;s time to move the code to another DBM an ORM can reduce the task to changing one line of code, rather than having to rewrite all your queries if the query-language isn&#39;t compatible. I&#39;d recommend checking out <a href=\"http://sequel.jeremyevans.net\" rel=\"nofollow noreferrer\">Sequel</a> and its <a href=\"http://sequel.jeremyevans.net/rdoc/files/doc/cheat_sheet_rdoc.html\" rel=\"nofollow noreferrer\">Cheat Sheet</a>."}], "answers": [{"comments": [{"owner": {"reputation": 779, "user_id": 6484371, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/9739ce20bf000c611ddf35e50443aadd?s=128&d=identicon&r=PG&f=1", "display_name": "ByteMe", "link": "https://stackoverflow.com/users/6484371/byteme"}, "edited": false, "score": 0, "creation_date": 1492029397, "post_id": 43379035, "comment_id": 73820507, "body": "Assuming I have say 100+ links, can I just place the array directly in? db.execute(&quot;SELECT 1 FROM ListData WHERE Link IN url&quot;) I just need to know which urls are already in the database column"}, {"owner": {"reputation": 2195, "user_id": 4862301, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7WRAJ.jpg?s=128&g=1", "display_name": "Dan Ionescu", "link": "https://stackoverflow.com/users/4862301/dan-ionescu"}, "reply_to_user": {"reputation": 779, "user_id": 6484371, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/9739ce20bf000c611ddf35e50443aadd?s=128&d=identicon&r=PG&f=1", "display_name": "ByteMe", "link": "https://stackoverflow.com/users/6484371/byteme"}, "edited": false, "score": 0, "creation_date": 1492062658, "post_id": 43379035, "comment_id": 73830486, "body": "if you have that many links, you should insert them into the database and them join with them to filter. I assume you don&#39;t have 100k different links each time"}], "tags": [], "owner": {"reputation": 2195, "user_id": 4862301, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7WRAJ.jpg?s=128&g=1", "display_name": "Dan Ionescu", "link": "https://stackoverflow.com/users/4862301/dan-ionescu"}, "is_accepted": false, "score": 0, "last_activity_date": 1492028767, "creation_date": 1492028767, "answer_id": 43379035, "question_id": 43378967, "link": "https://stackoverflow.com/questions/43378967/how-to-match-row-data-against-an-array-of-values/43379035#43379035", "title": "How to match row data against an array of values", "body": "<p>Use WHERE IN clause like this:</p>\n\n<pre><code>SELECT 1 FROM ListData WHERE Link IN ('www.site1.com','www.site2.com')\n</code></pre>\n"}], "owner": {"reputation": 779, "user_id": 6484371, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/9739ce20bf000c611ddf35e50443aadd?s=128&d=identicon&r=PG&f=1", "display_name": "ByteMe", "link": "https://stackoverflow.com/users/6484371/byteme"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 841, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1492040053, "creation_date": 1492028533, "last_edit_date": 1492040053, "question_id": 43378967, "link": "https://stackoverflow.com/questions/43378967/how-to-match-row-data-against-an-array-of-values", "title": "How to match row data against an array of values", "body": "<p>Is there a good way to check for matches in a SQL column, using an array of data, without having to loop as shown? Assume the url array has 100+ links, the below is just an example. </p>\n\n<pre><code>url = [\"www.site1.com\", \"www.site2.com\"]\nurl.each do |url|\n    match = db.execute(\"SELECT 1 FROM ListData WHERE Link=? \", url)\n    if match[0][0] == 1\n       flag = true\n    end\nend\n</code></pre>\n"}, {"tags": ["ruby", "oop"], "answers": [{"comments": [{"owner": {"reputation": 45322, "user_id": 421705, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/581b1760881c962648f99d6040d41829?s=128&d=identicon&r=PG", "display_name": "Holger Just", "link": "https://stackoverflow.com/users/421705/holger-just"}, "edited": false, "score": 0, "creation_date": 1492094530, "post_id": 43378973, "comment_id": 73851517, "body": "Digging through the internals of an object is generally not a good idea. Instead, you should check the documentation of the object and use its public interface whenever possible. Usually, classes don&#39;t guaranteed anything about their internal representation. Any update can change this in any way while the external interface through the exposed methods will often stay stable."}], "tags": [], "owner": {"reputation": 47232, "user_id": 1772830, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Qtoqg.jpg?s=128&g=1", "display_name": "Andrey Deineko", "link": "https://stackoverflow.com/users/1772830/andrey-deineko"}, "is_accepted": true, "score": 4, "last_activity_date": 1492028555, "creation_date": 1492028555, "answer_id": 43378973, "question_id": 43378895, "link": "https://stackoverflow.com/questions/43378895/getting-values-from-ruby-objects-in-general/43378973#43378973", "title": "Getting values from Ruby objects in general?", "body": "<p>I don't know which library you're using, but you can simply go with dirty getting instance variables:</p>\n\n<pre><code>arr = res.instance_variable_get(:@http_header).instance_variable_get(:@header_item)\n</code></pre>\n\n<p>Now, simply search through the array:</p>\n\n<pre><code>arr.find { |a| a.first == 'Content-Length' }.last\n#=&gt; \"291\"\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "is_accepted": false, "score": 1, "last_activity_date": 1492073156, "creation_date": 1492073156, "answer_id": 43387518, "question_id": 43378895, "link": "https://stackoverflow.com/questions/43378895/getting-values-from-ruby-objects-in-general/43387518#43387518", "title": "Getting values from Ruby objects in general?", "body": "<p>Unfortunately, you don't tell us what that object is. My best guess is that it is a <a href=\"http://rubydoc.info/gems/httpclient/HTTP/Message/Headers\" rel=\"nofollow noreferrer\"><code>HTTP::Message::Headers</code></a> object from the <a href=\"https://github.com/nahi/httpclient\" rel=\"nofollow noreferrer\"><code>httpclient</code></a> gem. If that is the case, then you get the Content-Length header using the <a href=\"http://rubydoc.info/gems/httpclient/HTTP%2FMessage%2FHeaders:[]\" rel=\"nofollow noreferrer\"><code>HTTP::Message::Headers#[]</code></a> method as per <a href=\"http://rubydoc.info/gems/httpclient\" rel=\"nofollow noreferrer\">the documentation</a>:</p>\n\n<pre><code>res.http_header['Content-Length']\n</code></pre>\n"}], "owner": {"reputation": 5139, "user_id": 3293148, "user_type": "registered", "accept_rate": 99, "profile_image": "https://www.gravatar.com/avatar/a5b0a16cfd67f7e3944d886fd1bebde5?s=128&d=identicon&r=PG", "display_name": "Jasmine Lognnes", "link": "https://stackoverflow.com/users/3293148/jasmine-lognnes"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 42, "favorite_count": 0, "accepted_answer_id": 43378973, "answer_count": 2, "score": 1, "last_activity_date": 1492073156, "creation_date": 1492028289, "question_id": 43378895, "link": "https://stackoverflow.com/questions/43378895/getting-values-from-ruby-objects-in-general", "title": "Getting values from Ruby objects in general?", "body": "<p>This and similar problems do I run into all the time, and I would like to understand the thought process behind getting values from objects, so I  can solve similar problems.</p>\n\n<p>If you have a similar example that illustrates the same, then that is just a good.</p>\n\n<p><strong>Question</strong></p>\n\n<p>How to get the value of <code>Content-Length</code>?</p>\n\n<p>And how did you get to the solution?</p>\n\n<p>If I do <code>pp res</code> then I get</p>\n\n<pre><code>#&lt;HTTP::Message:0x0055ab1ef42738\n @http_body=\n  #&lt;HTTP::Message::Body:0x0055ab1ef42698\n   @body=\n    \"...\",\n   @chunk_size=nil,\n   @positions=nil,\n   @size=0&gt;,\n @http_header=\n  #&lt;HTTP::Message::Headers:0x0055ab1ef42710\n   @body_charset=nil,\n   @body_date=nil,\n   @body_encoding=#&lt;Encoding:ASCII-8BIT&gt;,\n   @body_size=0,\n   @body_type=nil,\n   @chunked=false,\n   @dumped=false,\n   @header_item=\n    [[\"Connection\", \"close\"],\n     [\"Content-Type\", \"text/html\"],\n     [\"Content-Length\", \"291\"]],\n   @http_version=\"1.1\",\n</code></pre>\n\n<p>If I do <code>pp res.methods</code> then I see <code>http_header</code>, so I am temped to think that I can get closer to <code>Content-Length</code> by <code>pp res.http_header.header_item</code>, but this fails.</p>\n\n<p>The output of <code>pp res.http_header.methods</code> is</p>\n\n<pre><code>[:[],\n :[]=,\n :dump,\n :delete,\n :add,\n :all,\n :get,\n :set,\n :request_query,\n :content_type,\n :body_encoding,\n :http_version,\n :http_version=,\n :set_headers,\n :request_uri,\n :request_absolute_uri,\n :request_absolute_uri=,\n :set_date_header,\n :request_method,\n :body_size,\n :chunked,\n :status_code,\n :reason_phrase,\n :body_type,\n :body_charset,\n :body_date,\n :init_connect_request,\n :init_request,\n :init_response,\n :status_code=,\n :content_type=,\n :contenttype,\n :contenttype=,\n :set_body_encoding,\n :body_size=,\n :create_query_uri,\n :create_query_part,\n :chunked=,\n :reason_phrase=,\n :request_uri=,\n :request_query=,\n :body_type=,\n :body_charset=,\n :body_date=,\n :methods,\n :singleton_methods,\n :protected_methods,\n :private_methods,\n :public_methods,\n :to_yaml,\n :to_yaml_properties,\n :psych_to_yaml,\n :pretty_print,\n :pretty_print_cycle,\n :pretty_print_instance_variables,\n :pretty_print_inspect,\n :instance_of?,\n :public_send,\n :instance_variable_get,\n :instance_variable_set,\n :instance_variable_defined?,\n :remove_instance_variable,\n :kind_of?,\n :instance_variables,\n :tap,\n :public_method,\n :singleton_method,\n :is_a?,\n :extend,\n :define_singleton_method,\n :method,\n :awesome_print,\n :to_enum,\n :enum_for,\n :awesome_inspect,\n :ai,\n :pretty_inspect,\n :&lt;=&gt;,\n :===,\n :=~,\n :!~,\n :eql?,\n :respond_to?,\n :freeze,\n :inspect,\n :display,\n :object_id,\n :send,\n :to_s,\n :nil?,\n :hash,\n :class,\n :singleton_class,\n :clone,\n :dup,\n :itself,\n :taint,\n :tainted?,\n :untaint,\n :untrust,\n :trust,\n :untrusted?,\n :frozen?,\n :!,\n :==,\n :!=,\n :__send__,\n :equal?,\n :instance_eval,\n :instance_exec,\n :__id__]\n</code></pre>\n"}, {"tags": ["ruby", "algorithm", "function", "if-statement"], "comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 1, "creation_date": 1492027923, "post_id": 43378458, "comment_id": 73819672, "body": "If you need to use the trailing <code>if</code> or <code>unless</code> clause, try and keep it as simple as possible. For example: <code>next if (...)</code> is fine, but anything longer deserves the block-style use."}], "answers": [{"tags": [], "owner": {"reputation": 4600, "user_id": 5961578, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/df7cbfdd2a92a7926af3bbb8648318aa?s=128&d=identicon&r=PG", "display_name": "moveson", "link": "https://stackoverflow.com/users/5961578/moveson"}, "is_accepted": false, "score": 2, "last_activity_date": 1492027597, "creation_date": 1492027597, "answer_id": 43378718, "question_id": 43378458, "link": "https://stackoverflow.com/questions/43378458/ruby-one-liner-and-warning-else-without-rescue-is-useless/43378718#43378718", "title": "Ruby one-liner and warning: &#39;else without rescue is useless&#39;", "body": "<p>The problem seems to be the flow control is getting confused with the logic as to what is output. This will do what you want, I think:</p>\n\n<pre><code>def triangle(n, chars)\n  if (n % 2 == 0) || (n &lt; 0)\n    puts \"#{n} must be odd and positive\"\n  else\n    (n + 1).times { |i| puts chars * i }\n  end\nend\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1492035891, "post_id": 43378954, "comment_id": 73823313, "body": "You could change this to return puts blah blah if condition because puts returns nil any way"}, {"owner": {"reputation": 126343, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "reply_to_user": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1492037231, "post_id": 43378954, "comment_id": 73823770, "body": "@engineersmnky I&#39;d hesitate to do that. I doubt most folks know what <code>puts</code> returns (I would assume a boolean). It also smashes together two otherwise unrelated statements just because one happens to return the needed value; we&#39;re not returning the result of <code>puts</code>, and the reader will wonder why. Vertical whitespace should be used where appropriate for clarity."}, {"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1492037454, "post_id": 43378954, "comment_id": 73823833, "body": "To each there own I tend to try and use a single line guard clause wherever possible rather than explicit early return. Seems more in line with style specifications (my opinion). Either way I agree with ArgumentError over the other implementations as it is more explicit and informative"}, {"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 2, "creation_date": 1492072417, "post_id": 43378954, "comment_id": 73835876, "body": "&quot;Why it&#39;s not a syntax error, I have no idea&quot; \u2013 Well, because it&#39;s perfectly legal syntax. Method, block, and lambda bodies form an implicit <code>begin</code> block. <code>def foo() bar if baz else quux end</code> is equivalent to <code>def foo() begin bar if baz rescue StandardError else quux end end</code>."}], "tags": [], "owner": {"reputation": 126343, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "is_accepted": true, "score": 5, "last_activity_date": 1492028502, "creation_date": 1492028502, "answer_id": 43378954, "question_id": 43378458, "link": "https://stackoverflow.com/questions/43378458/ruby-one-liner-and-warning-else-without-rescue-is-useless/43378954#43378954", "title": "Ruby one-liner and warning: &#39;else without rescue is useless&#39;", "body": "<p>Ruby is interpreting your code as two separate statements.</p>\n\n<pre><code>puts \"#{n} must be odd and positive\" if n % 2 == 0 || n &lt; 0\n\nelse (n + 1).times { |i| puts chars * i } \n</code></pre>\n\n<p>The <code>else</code> is not associated with the <code>if</code>. Ruby is, I guess in desperation, interpreting that as part of a <a href=\"http://rubylearning.com/satishtalim/ruby_exceptions.html\" rel=\"noreferrer\"><code>begin/rescue/else</code> condition</a>. Why it's not a syntax error, I have no idea, but it's interpreting it as having no <code>begin</code> block which is technically \"successful\" so the <code>else</code> always runs.</p>\n\n<p>Conditional statements like <code>do this if that</code> are intended only for simple conditions covering simple statements. Trying to wedge in an else condition is right out. Instead, use a normal condition.</p>\n\n<pre><code>def triangle(n, chars)\n    if n % 2 == 0 || n &lt; 0\n        puts \"#{n} must be odd and positive\"    \n    else\n        (n + 1).times { |i| puts chars * i } \n    end\nend\n</code></pre>\n\n<p>In general, avoid the <code>else</code> entirely by taking care of the error condition immediately. It avoids nesting the bulk of the function in an <code>else</code> block. This is more relevant for longer functions, but it's a good habit to get into.</p>\n\n<pre><code>def triangle(n, chars)\n    if n % 2 == 0 || n &lt; 0\n        puts \"#{n} must be odd and positive\"\n        return nil\n    end\n\n    (n + 1).times { |i| puts chars * i } \nend\n</code></pre>\n\n<p>Finally, errors should be handled with exceptions, not printed error messages. Exceptions can be caught and dealt with by the caller, printed error messages are difficult to catch and bubble up to the user. Exceptions, if not dealt with, halt the program; if the user forgets to handle an error the program will stop and they'll know to fix it. Printed error messages simply let the program plow forward and can be ignored leading to further problems down the road.</p>\n\n<p>Exceptions can also be categorized allowing the caller to figure out what sort of error happened and act appropriately.</p>\n\n<pre><code>def triangle(n, chars)\n    if n % 2 == 0 || n &lt; 0\n        raise ArgumentError, \"#{n} must be odd and positive\"\n    end\n\n    (n + 1).times { |i| puts chars * i } \nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "is_accepted": false, "score": 0, "last_activity_date": 1492049145, "last_edit_date": 1492049145, "creation_date": 1492039243, "answer_id": 43381142, "question_id": 43378458, "link": "https://stackoverflow.com/questions/43378458/ruby-one-liner-and-warning-else-without-rescue-is-useless/43381142#43381142", "title": "Ruby one-liner and warning: &#39;else without rescue is useless&#39;", "body": "<p>As a more graceful implementation lets take this a step further and handle unexpected arguments </p>\n\n<pre><code>def triangle(n, chars='#')\n  raise(ArgumentError, \"{n} must be odd and positive\") unless n.to_i.odd? &amp;&amp; n.to_i &gt; 0\n  1.upto(n.to_i) { |i| chars.to_s * i} \nend\n</code></pre>\n\n<p>This will now handle any <code>n</code> that responds to <code>to_i</code> and any <code>chars</code> that responds to <code>to_s</code>. e.g. '13', ['x', 'x', 1] are still valid arguments even if they make a weird triangle.</p>\n\n<p>Ruby is extremely supportive of duck typing in this fashion and it makes your code less type specific. </p>\n"}], "owner": {"reputation": 1217, "user_id": 6397805, "user_type": "registered", "accept_rate": 57, "profile_image": "https://graph.facebook.com/882480008529203/picture?type=large", "display_name": "Huy Tran", "link": "https://stackoverflow.com/users/6397805/huy-tran"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 724, "favorite_count": 0, "accepted_answer_id": 43378954, "answer_count": 3, "score": 0, "last_activity_date": 1492049145, "creation_date": 1492026708, "question_id": 43378458, "link": "https://stackoverflow.com/questions/43378458/ruby-one-liner-and-warning-else-without-rescue-is-useless", "title": "Ruby one-liner and warning: &#39;else without rescue is useless&#39;", "body": "<p>I'm trying to print a basic triangle pattern with a Ruby function which only accepts positive odd number for n </p>\n\n<pre><code>def triangle(n, chars)\n    puts \"#{n} must be odd and positive\" if n % 2 == 0 || n &lt; 0 else (n + 1).times { |i| puts chars * i } \nend\n</code></pre>\n\n<p>The problem is this function accepts not only odd but also positive n. \n<code>triangle(3, '#')</code>would print </p>\n\n<pre><code>    #\n    ##\n    ###\n</code></pre>\n\n<p>but 'triangle(4, '#')' also works fine </p>\n\n<pre><code>    #\n    ##\n    ###\n    ####\n</code></pre>\n\n<p>It seems my <em>if</em> statement is not working correctly and I get the warning <code>else without rescue is useless</code>. Why and how should I fix this?</p>\n"}, {"tags": ["ruby", "mailgun"], "owner": {"reputation": 1670, "user_id": 6388521, "user_type": "registered", "accept_rate": 69, "profile_image": "https://lh4.googleusercontent.com/-VdFWPJVSpRc/AAAAAAAAAAI/AAAAAAAAAFo/vCc8QOz6v9Y/photo.jpg?sz=128", "display_name": "Ruslan", "link": "https://stackoverflow.com/users/6388521/ruslan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 53, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1492024382, "creation_date": 1492024080, "last_edit_date": 1492024382, "question_id": 43377753, "link": "https://stackoverflow.com/questions/43377753/ruby-mailgun-batch-doesnt-set-the-recepient-variables", "title": "Ruby mailgun batch doesnt set the recepient variables", "body": "<p>So here's the issue: I am trying to run a mass mailer using mailgun from a csv file</p>\n\n<p>The file contains the email and a few parameters to replace in the html body (things like <code>\"account_id\", \"first_name\", \"last_name\"</code>)</p>\n\n<p>Issue is that the placeholders (<code>\"%account_id%\"</code>) in the email do not get replaced by mailgun. the <code>recipient_variables</code> looks legit, but they don't show up on the mailgun server log</p>\n\n<p>Code is taken from <a href=\"https://github.com/mailgun/mailgun-ruby/blob/master/docs/Messages.md\" rel=\"nofollow noreferrer\">here</a> and <a href=\"http://blog.mailgun.com/the-official-mailgun-ruby-sdk-is-here/\" rel=\"nofollow noreferrer\">here</a></p>\n\n<p>I haven't tried constructing the message manually instead of a batch. Is this the gem issue or a mailgun api issue?</p>\n\n<pre><code>batch = Mailgun::BatchMessage.new(Mailgun::Client.new, Mailgun.domain)\nbatch.from(s[:from])\nbatch.reply_to(s[:reply_to])\nbatch.subject(s[:subject])\nbatch.body_html(\"&lt;p&gt;%account_id%&lt;/p&gt;\")\n\ncsv_data.each do |d|\n  batch.add_recipient(:to, d[:email], d)   \nend\n\nputs batch.recipient_variables\nbatch.finalize\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "node.js"], "answers": [{"tags": [], "owner": {"reputation": 1212, "user_id": 1341809, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/afdd238a7321a4dbdbf70cd063d7ef61?s=128&d=identicon&r=PG", "display_name": "learner", "link": "https://stackoverflow.com/users/1341809/learner"}, "is_accepted": false, "score": 0, "last_activity_date": 1492023988, "creation_date": 1492023988, "answer_id": 43377724, "question_id": 43377496, "link": "https://stackoverflow.com/questions/43377496/execjsprogramerror-in-staticpageshome/43377724#43377724", "title": "ExecJS::ProgramError in StaticPages#home", "body": "<p>Solved. Based on Thorin's answer I installed coffee script source and worked fine.</p>\n"}], "owner": {"reputation": 1212, "user_id": 1341809, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/afdd238a7321a4dbdbf70cd063d7ef61?s=128&d=identicon&r=PG", "display_name": "learner", "link": "https://stackoverflow.com/users/1341809/learner"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 170, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1492023988, "creation_date": 1492023255, "last_edit_date": 1495535449, "question_id": 43377496, "link": "https://stackoverflow.com/questions/43377496/execjsprogramerror-in-staticpageshome", "title": "ExecJS::ProgramError in StaticPages#home", "body": "<p>I'm following Michael Hart's Ruby tutorial, precisely chapter 5.\nWhen I'm running my application I having the following error:</p>\n\n<pre><code>ExecJS::ProgramError in StaticPages#home\n\n&lt;%= link_to image_tag(\"rails.png\", alt: \"Rails logo\"), 'http://rubyonrails.org/' %&gt;\n\nTypeError: Object doesn't support this property or method\n</code></pre>\n\n<p>I've seen <a href=\"https://stackoverflow.com/questions/28421547/rails-execjsprogramerror-in-pageshome\">this post</a> on SO. Some answers says to install NodeJS and others says to add coffee-script-source.\nInstalling NodeJS for me is a bit strange.</p>\n\n<p>I'm running this in Windows 10 64 bits.</p>\n\n<p>This is my gemfile: </p>\n\n<pre><code>source 'https://rubygems.org'\ngit_source(:github) do |repo_name|\n   repo_name = \"#{repo_name}/#{repo_name}\" unless repo_name.include?(\"/\")\n   \"https://github.com/#{repo_name}.git\"\nend\n\ngem 'rails',                   '5.0.1'\ngem 'bcrypt',                  '3.1.11'\ngem 'faker',                   '1.6.6'\ngem 'carrierwave',             '0.11.2'\ngem 'mini_magick',             '4.5.1'\ngem 'fog',                     '1.38.0'\ngem 'will_paginate',           '3.1.0'\ngem 'bootstrap-will_paginate', '0.0.10'\ngem 'bootstrap-sass',          '3.3.6'\ngem 'puma',                    '3.4.0'\ngem 'sass-rails',              '5.0.6'\ngem 'uglifier',                '3.0.0'\ngem 'coffee-rails',            '4.2.1'\ngem 'jquery-rails',            '4.1.1'\ngem 'turbolinks',              '5.0.1'\ngem 'jbuilder',                '2.4.1'\n\ngroup :development, :test do\n    gem 'sqlite3', '1.3.12'\n    gem 'byebug',  '9.0.0', platform: :mri\nend\n\ngroup :development do\n    gem 'web-console',           '3.1.1'\n    gem 'listen',                '3.0.8'\n    gem 'spring',                '1.7.2'\n    gem 'spring-watcher-listen', '2.0.0'\nend\n\ngroup :test do\n    gem 'rails-controller-testing', '0.1.1'\n    gem 'minitest-reporters',       '1.1.9'\n    gem 'guard',                    '2.13.0'\n    gem 'guard-minitest',           '2.4.4'\nend\n\ngroup :production do\n    gem 'pg',   '0.18.4'\nend\n\n# Windows does not include zoneinfo files, so bundle the tzinfo-data gem\ngem 'tzinfo-data', platforms: [:mingw, :mswin, :x64_mingw, :jruby]\n</code></pre>\n"}, {"tags": ["ruby", "parsing", "cookies", "httpclient"], "comments": [{"owner": {"reputation": 14010, "user_id": 3109182, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/a4b305f0077055b4fdcf715067775d5a?s=128&d=identicon&r=PG", "display_name": "Anthony", "link": "https://stackoverflow.com/users/3109182/anthony"}, "edited": false, "score": 0, "creation_date": 1492023884, "post_id": 43376865, "comment_id": 73817358, "body": "Cookies are typically salted/encrypted/signed so unless you have the secret you won&#39;t be able to decrypt it."}, {"owner": {"reputation": 5139, "user_id": 3293148, "user_type": "registered", "accept_rate": 99, "profile_image": "https://www.gravatar.com/avatar/a5b0a16cfd67f7e3944d886fd1bebde5?s=128&d=identicon&r=PG", "display_name": "Jasmine Lognnes", "link": "https://stackoverflow.com/users/3293148/jasmine-lognnes"}, "reply_to_user": {"reputation": 14010, "user_id": 3109182, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/a4b305f0077055b4fdcf715067775d5a?s=128&d=identicon&r=PG", "display_name": "Anthony", "link": "https://stackoverflow.com/users/3109182/anthony"}, "edited": false, "score": 0, "creation_date": 1492024159, "post_id": 43376865, "comment_id": 73817515, "body": "It is the value of <code>target</code> I am looking for which is plain text. So the question is how to access it."}, {"owner": {"reputation": 14010, "user_id": 3109182, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/a4b305f0077055b4fdcf715067775d5a?s=128&d=identicon&r=PG", "display_name": "Anthony", "link": "https://stackoverflow.com/users/3109182/anthony"}, "edited": false, "score": 0, "creation_date": 1492024967, "post_id": 43376865, "comment_id": 73817979, "body": "You mean you want to get the <code>target</code> query param from the value of <code>origin</code>?"}, {"owner": {"reputation": 5139, "user_id": 3293148, "user_type": "registered", "accept_rate": 99, "profile_image": "https://www.gravatar.com/avatar/a5b0a16cfd67f7e3944d886fd1bebde5?s=128&d=identicon&r=PG", "display_name": "Jasmine Lognnes", "link": "https://stackoverflow.com/users/3293148/jasmine-lognnes"}, "reply_to_user": {"reputation": 14010, "user_id": 3109182, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/a4b305f0077055b4fdcf715067775d5a?s=128&d=identicon&r=PG", "display_name": "Anthony", "link": "https://stackoverflow.com/users/3109182/anthony"}, "edited": false, "score": 0, "creation_date": 1492025040, "post_id": 43376865, "comment_id": 73818023, "body": "Yes, in this case I want to end up with <code>https:&#47;&#47;example.com:65003</code> in a variable."}], "answers": [{"tags": [], "owner": {"reputation": 14010, "user_id": 3109182, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/a4b305f0077055b4fdcf715067775d5a?s=128&d=identicon&r=PG", "display_name": "Anthony", "link": "https://stackoverflow.com/users/3109182/anthony"}, "is_accepted": true, "score": 1, "last_activity_date": 1492025457, "creation_date": 1492025457, "answer_id": 43378103, "question_id": 43376865, "link": "https://stackoverflow.com/questions/43376865/how-to-parse-cookies-in-httpclient/43378103#43378103", "title": "How to parse cookies in HTTPClient?", "body": "<p>You can do it with the URI module:</p>\n\n<pre><code>origin\n=&gt; \"https://example.com:9000/auth/?id=7C05C91D24C4A798230A29FD28C587F3&amp;target=https://example.com:65003&amp;\"\nURI.decode_www_form(URI.parse(origin).query).to_h[\"target\"]\n=&gt; \"https://example.com:65003\"\n</code></pre>\n"}], "owner": {"reputation": 5139, "user_id": 3293148, "user_type": "registered", "accept_rate": 99, "profile_image": "https://www.gravatar.com/avatar/a5b0a16cfd67f7e3944d886fd1bebde5?s=128&d=identicon&r=PG", "display_name": "Jasmine Lognnes", "link": "https://stackoverflow.com/users/3293148/jasmine-lognnes"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 265, "favorite_count": 0, "accepted_answer_id": 43378103, "answer_count": 1, "score": 1, "last_activity_date": 1492025457, "creation_date": 1492021176, "question_id": 43376865, "link": "https://stackoverflow.com/questions/43376865/how-to-parse-cookies-in-httpclient", "title": "How to parse cookies in HTTPClient?", "body": "<p>In the below script I access a website which does many redirects and I need to know the URL/port of the last redirect.</p>\n\n<pre><code>cookie_file = Tempfile.new('cookie_jar.txt')\nclient.set_cookie_store(cookie_file)\nclient.set_auth(nil, user, pass)\nclient.ssl_config.verify_mode = nil\n\nr = client.get(uri, :follow_redirect =&gt; true)\nr = client.get_content(uri, :follow_redirect =&gt; true)\n\npp client.cookie_manager.jar\n</code></pre>\n\n<p>Looking at the cookies I can see from the second cookie that this time is was <code>https://example.com:65003</code>. If I try again then it will be a different port.</p>\n\n<p><strong>Question</strong></p>\n\n<p>How can I parse a HTTPClient cookie?</p>\n\n<pre><code>[#&lt;HTTP::Cookie:name=\"ASPSESSIONIDQGDSCTSA\",\nvalue=\"DBEHBGICIKNNIBBMNAMGIMFG\", domain=\"example.com\",\nfor_domain=false, path=\"/\", secure=true, httponly=false, expires=nil,\nmax_age=nil, created_at=2017-04-12 20:09:58 +0200,\naccessed_at=2017-04-12 20:09:58 +0200 \norigin=https://example.com/bwtem/?follow_redirect=true&gt;,\n\n#&lt;HTTP::Cookie:name=\"ASPSESSIONIDSGAQARRD\",\nvalue=\"APJDHADDOHENHCCHOLLMAHNJ\", domain=\"example.com\",\nfor_domain=false, path=\"/\", secure=true, httponly=false, expires=nil,\nmax_age=nil, created_at=2017-04-12 20:09:57 +0200,\naccessed_at=2017-04-12 20:09:58 +0200 \norigin=https://example.com:9000/auth/?id=7C05C91D24C4A798230A29FD28C587F3&amp;target=https://example.com:65003&amp;&gt;]\n</code></pre>\n"}, {"tags": ["ruby", "braintree", "braintree-rails", "braintree-sandbox"], "comments": [{"owner": {"reputation": 250, "user_id": 6828249, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fdb9f998d3e0d525544b0d72bacd69dc?s=128&d=identicon&r=PG&f=1", "display_name": "zepp", "link": "https://stackoverflow.com/users/6828249/zepp"}, "edited": false, "score": 0, "creation_date": 1492031514, "post_id": 43376858, "comment_id": 73821571, "body": "A <a href=\"https://developers.braintreepayments.com/start/overview#payment-method-nonce\" rel=\"nofollow noreferrer\">payment method nonce</a> generally does not correspond to a vaulted <a href=\"https://developers.braintreepayments.com/reference/response/payment-method\" rel=\"nofollow noreferrer\">payment method</a>. The nonce represents temporary payment information to be consumed. The main exception to this is if you&#39;re using the Drop-in UI and including a <a href=\"https://developers.braintreepayments.com/guides/drop-in/javascript/#customer-id\" rel=\"nofollow noreferrer\"><code>customer_id</code> in the client token</a>. Can you edit your question to say whether you are using the Drop-in UI&#39;s auto-vaulting capability?"}, {"owner": {"reputation": 483, "user_id": 7318294, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b697e63d9e7e9b5bf3b0fd45fa579fb8?s=128&d=identicon&r=PG&f=1", "display_name": "C Joseph", "link": "https://stackoverflow.com/users/7318294/c-joseph"}, "edited": false, "score": 0, "creation_date": 1492097682, "post_id": 43376858, "comment_id": 73853711, "body": "Assuming you&#39;re generating your custom list of the user&#39;s credit cards by finding the <a href=\"https://developers.braintreepayments.com/reference/response/customer\" rel=\"nofollow noreferrer\">customer object</a>, you can access the <a href=\"https://developers.braintreepayments.com/reference/response/payment-method\" rel=\"nofollow noreferrer\">payment method token</a> through the <a href=\"https://developers.braintreepayments.com/reference/response/customer/#payment_methods\" rel=\"nofollow noreferrer\">customer&#39;s payment methods attribute</a>.  If you&#39;re not populating your payment methods in this way, can you add your code that generates the list of the user&#39;s credit cards?"}], "answers": [{"tags": [], "owner": {"reputation": 483, "user_id": 7318294, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b697e63d9e7e9b5bf3b0fd45fa579fb8?s=128&d=identicon&r=PG&f=1", "display_name": "C Joseph", "link": "https://stackoverflow.com/users/7318294/c-joseph"}, "is_accepted": true, "score": 1, "last_activity_date": 1492179017, "creation_date": 1492179017, "answer_id": 43413244, "question_id": 43376858, "link": "https://stackoverflow.com/questions/43376858/braintree-how-do-i-delete-a-users-credit-card-with-the-nonce-from-the-client/43413244#43413244", "title": "Braintree, How do I delete a users credit card with the nonce from the client?", "body": "<p><sub>Full disclosure: I work at Braintree. If you have any further questions, feel free to contact <a href=\"https://articles.braintreepayments.com/\" rel=\"nofollow noreferrer\">support</a>.</sub></p>\n\n<p>If using <a href=\"https://braintree.github.io/braintree-web/current/VaultManager.html#~fetchPaymentMethodsPayload\" rel=\"nofollow noreferrer\">VaultManager</a> on the client-side to populate your cards, you will not have the functionality to allow a user to delete one of those cards. The reason for this goes back to what you said, that nonces are what's returned on the <code>fetchPaymentMethodsPayload</code> method. <code>VaultManager</code> can populate a <code>nonce</code> that's associated with an already created card, since it's only passing that nonce into a <code>Transaction.sale() call</code>. Since the nonce is populated when the form is rendered, you can not search for that nonce compared to a payment method in the vault, since it will not exist previously and nonces are meant for one time use. This is why nonces aren't passed into <code>PaymentMethod.find()</code> calls.  </p>\n\n<p>To accomplish your task you would need to build out custom logic that mimics what Vault Manager does; however, would need to returns the tokens. One way would be as mentioned in my comment: by finding the <a href=\"https://developers.braintreepayments.com/reference/response/customer/ruby\" rel=\"nofollow noreferrer\">customer object</a> and grabbing the <a href=\"https://developers.braintreepayments.com/reference/response/customer/ruby#payment_methods\" rel=\"nofollow noreferrer\">customer's payment methods</a>, and then pulling out the tokens associated with those payment methods.</p>\n"}, {"tags": [], "owner": {"reputation": 99, "user_id": 3081613, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UBat5.jpg?s=128&g=1", "display_name": "jmjm", "link": "https://stackoverflow.com/users/3081613/jmjm"}, "is_accepted": false, "score": 0, "last_activity_date": 1575996206, "creation_date": 1575996206, "answer_id": 59271901, "question_id": 43376858, "link": "https://stackoverflow.com/questions/43376858/braintree-how-do-i-delete-a-users-credit-card-with-the-nonce-from-the-client/59271901#59271901", "title": "Braintree, How do I delete a users credit card with the nonce from the client?", "body": "<p>I noticed that when you create a payment method with same creds, it won't get duplicated. So it's kinda like \"find or create\", you can then use that result to get the token and then do a <code>gateway.payment_method.delete( result.payment_method.token )</code></p>\n"}], "owner": {"reputation": 473, "user_id": 786457, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/397914ab2c94fa0992974af9d1ea6fb5?s=128&d=identicon&r=PG", "display_name": "Jake", "link": "https://stackoverflow.com/users/786457/jake"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 957, "favorite_count": 0, "accepted_answer_id": 43413244, "answer_count": 2, "score": 1, "last_activity_date": 1575996206, "creation_date": 1492021156, "last_edit_date": 1492108996, "question_id": 43376858, "link": "https://stackoverflow.com/questions/43376858/braintree-how-do-i-delete-a-users-credit-card-with-the-nonce-from-the-client", "title": "Braintree, How do I delete a users credit card with the nonce from the client?", "body": "<p>Server side there is a function to delete a payment method (<code>result = Braintree::PaymentMethod.delete(\"the_token\")</code>) but it takes a payment method token. How do I get the payment methods token with the nonce from the client?</p>\n\n<p>edit: I'm not using the drop in UI. I have a custom list of credit cards the user has (using the Javascript v3 SDK). I want to have a button to delete cards. The JS SDK dosnt give the credit cards token, just a nonce. What is the process for turning the data available to the client into something I can use to delete the card on the server?</p>\n\n<p>edit2: The list of credit cards on the clent side uses the <a href=\"https://braintree.github.io/braintree-web/current/VaultManager.html#fetchPaymentMethods\" rel=\"nofollow noreferrer\">VaultManager</a> from the JavaScript v3 SDK. It returns a <a href=\"https://braintree.github.io/braintree-web/current/VaultManager.html#~fetchPaymentMethodsPayload\" rel=\"nofollow noreferrer\">fetchPaymentMethodsPayload</a>.</p>\n\n<p>This is the client side code:</p>\n\n<pre><code>_loadPaymentMethods() {\n    this.paymentService.getBraintreeToken().then( token =&gt; {\n      this.braintreeClient.create({\n        authorization: token\n      }, (clientErr, clientInstance) =&gt; {\n\n        if (clientErr) {\n          // Handle error in client creation\n          return;\n        }\n\n        var options = {\n          client: clientInstance,\n        };\n\n        this.vaultManager.create(options, (err, vaultInstance) =&gt; {\n          if (err) {\n            console.log(err);\n            return;\n          }\n          vaultInstance.fetchPaymentMethods({ defaultFirst: true }, (err, paymentMethods) =&gt; {\n            paymentMethods.forEach( paymentMethod =&gt; {\n              if(paymentMethod.type == 'CreditCard') {\n                this.cards.push(paymentMethod);\n                if(paymentMethod.default) {\n                  this.card = paymentMethod;\n                }\n              }\n            });\n          });\n        });\n\n      });\n    });\n  }\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "carrierwave", "avatar"], "comments": [{"owner": {"reputation": 424, "user_id": 6150184, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/26aa5396de57080c2084de1b8a5aeaa5?s=128&d=identicon&r=PG&f=1", "display_name": "DiodonHystrix", "link": "https://stackoverflow.com/users/6150184/diodonhystrix"}, "edited": false, "score": 0, "creation_date": 1492064128, "post_id": 43376833, "comment_id": 73831126, "body": "Could you show your controller&#39;s code? You can remove <code>== true</code> from <code>&lt;% if @child.new_record? == true %&gt;</code>"}, {"owner": {"reputation": 85, "user_id": 5050789, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh6.googleusercontent.com/-Pbo7Fd6Lhpw/AAAAAAAAAAI/AAAAAAAAACY/q9YwBTTJafk/photo.jpg?sz=128", "display_name": "Xcelleratr", "link": "https://stackoverflow.com/users/5050789/xcelleratr"}, "reply_to_user": {"reputation": 424, "user_id": 6150184, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/26aa5396de57080c2084de1b8a5aeaa5?s=128&d=identicon&r=PG&f=1", "display_name": "DiodonHystrix", "link": "https://stackoverflow.com/users/6150184/diodonhystrix"}, "edited": false, "score": 0, "creation_date": 1492097588, "post_id": 43376833, "comment_id": 73853664, "body": "Ok, I edited in the controller code. Also not all of this code is mine I am working with a group of people and we are all basically Rails novices."}, {"owner": {"reputation": 424, "user_id": 6150184, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/26aa5396de57080c2084de1b8a5aeaa5?s=128&d=identicon&r=PG&f=1", "display_name": "DiodonHystrix", "link": "https://stackoverflow.com/users/6150184/diodonhystrix"}, "edited": false, "score": 0, "creation_date": 1492108695, "post_id": 43376833, "comment_id": 73859585, "body": "Looks like <code>:remove_avatar</code> is not present in the strong params. Could you try adding it?"}, {"owner": {"reputation": 85, "user_id": 5050789, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh6.googleusercontent.com/-Pbo7Fd6Lhpw/AAAAAAAAAAI/AAAAAAAAACY/q9YwBTTJafk/photo.jpg?sz=128", "display_name": "Xcelleratr", "link": "https://stackoverflow.com/users/5050789/xcelleratr"}, "reply_to_user": {"reputation": 424, "user_id": 6150184, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/26aa5396de57080c2084de1b8a5aeaa5?s=128&d=identicon&r=PG&f=1", "display_name": "DiodonHystrix", "link": "https://stackoverflow.com/users/6150184/diodonhystrix"}, "edited": false, "score": 0, "creation_date": 1492127023, "post_id": 43376833, "comment_id": 73867124, "body": "Thanks that worked, I didn&#39;t think of it before because it was nowhere in the readme on GitHub and normally leaving that kind of thing out gives me errors, rather than just not doing anything."}], "owner": {"reputation": 85, "user_id": 5050789, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh6.googleusercontent.com/-Pbo7Fd6Lhpw/AAAAAAAAAAI/AAAAAAAAACY/q9YwBTTJafk/photo.jpg?sz=128", "display_name": "Xcelleratr", "link": "https://stackoverflow.com/users/5050789/xcelleratr"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 200, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1492097488, "creation_date": 1492021069, "last_edit_date": 1492097488, "question_id": 43376833, "link": "https://stackoverflow.com/questions/43376833/remove-avatar-isnt-working-for-me", "title": "Remove Avatar isn&#39;t working for me", "body": "<p>The Remove Avatar checkbox isn't doing anything for me on my edit form. Here is my code.</p>\n\n<p>_form.html.erb</p>\n\n<pre><code>&lt;%= simple_form_for(@child, html: { multipart: true}) do |f| %&gt;\n\n  &lt;% if child.errors.any? %&gt;\n    &lt;div id=\"error_explanation\"&gt;\n      &lt;h2&gt;&lt;%= pluralize(child.errors.count, \"error\") %&gt; prohibited this child from being saved:&lt;/h2&gt;\n\n      &lt;ul&gt;\n      &lt;% child.errors.full_messages.each do |message| %&gt;\n        &lt;li&gt;&lt;%= message %&gt;&lt;/li&gt;\n      &lt;% end %&gt;\n      &lt;/ul&gt;\n    &lt;/div&gt;\n  &lt;% end %&gt;\n\n\n    &lt;%= f.label :name %&gt;&lt;br /&gt;\n     &lt;div class=\"field\"&gt;&lt;%= f.text_field(:name) %&gt; &lt;br /&gt;&lt;/div&gt;\n\n    &lt;%= f.label :balance %&gt;&lt;br /&gt;\n     &lt;div class=\"field\"&gt; &lt;%= f.text_field(:balance) %&gt; &lt;br /&gt;&lt;/div&gt;\n\n    &lt;%= f.label :parent_id %&gt;&lt;b&gt; ID&lt;/b&gt;&lt;br /&gt;\n\n     &lt;%= f.number_field :parent_id, :value =&gt; current_parent.id, :readonly =&gt; true %&gt;&lt;br /&gt;\n\n     &lt;%=f.label :avatar %&gt;&lt;br /&gt;\n     &lt;%= image_tag(@child.avatar_url) if @child.avatar? %&gt;\n     &lt;%= f.file_field(:avatar) %&gt;\n     &lt;%= f.hidden_field(:avatar_cache) %&gt;\n     &lt;br /&gt;\n     &lt;label&gt;\n     &lt;%= f.check_box :remove_avatar %&gt;\n     Remove Avatar\n     &lt;/label&gt;\n\n  &lt;div class=\"actions\"&gt;\n    &lt;% if @child.new_record? == true %&gt;\n    &lt;%= f.submit(\"Add Child\") %&gt;\n    &lt;% else %&gt;\n\n    &lt;%= f.submit(\"Save Child\") %&gt;\n    &lt;% end %&gt;\n  &lt;/div&gt;\n\n\n&lt;% end %&gt;\n</code></pre>\n\n<p>Child Controller</p>\n\n<pre><code>class ChildrenController &lt; ApplicationController\n\n  before_filter :authenticate_parent!\n  before_action :set_child, only: [:show, :edit, :update, :destroy]\n\n\n  # GET /children\n  # GET /children.json\n  def index\n    @children = Child.all\n  end\n\n  # GET /children/1\n  # GET /children/1.json\n  def show\n\n  end\n\n  # GET /children/new\n  def new\n    @child = Child.new\n  end\n\n  # GET /children/1/edit\n  def edit\n  end\n\n\n\n\n  # POST /children\n  # POST /children.json\n  def create\n    @child = Child.new(child_params)\n    if @child.avatar.file.nil?\n      img = LetterAvatar.generate(@child.name, 200)\n      File.open(img) do |f|\n        @child.avatar = f\n      end\n    end\n\n    respond_to do |format|\n      if @child.save\n        format.html { redirect_to @child, notice: 'Child was successfully created.' }\n        format.json { render :show, status: :created, location: @child }\n      else\n        format.html { render :new }\n        format.json { render json: @child.errors, status: :unprocessable_entity }\n      end\n    end\n  end\n\n  # PATCH/PUT /children/1\n  # PATCH/PUT /children/1.json\n  def update\n    if @child.avatar.file.nil?\n      img = LetterAvatar.generate(@child.name, 200)\n      File.open(img) do |f|\n        @child.avatar = f\n      end\n    end\n    respond_to do |format|\n      if @child.update(child_params)\n        format.html { redirect_to @child, notice: 'Child was successfully updated.' }\n        format.json { render :show, status: :ok, location: @child }\n      else\n        format.html { render :edit }\n        format.json { render json: @child.errors, status: :unprocessable_entity }\n      end\n    end\n  end\n\n  # DELETE /children/1\n  # DELETE /children/1.json\n  def destroy\n    @child.destroy\n    respond_to do |format|\n      format.html { redirect_to children_url, notice: 'Child was successfully destroyed.' }\n      format.json { head :no_content }\n    end\n  end\n\n  private\n    # Use callbacks to share common setup or constraints between actions.\n    def set_child\n      @child = Child.find(params[:id])\n    end\n\n    # Never trust parameters from the scary internet, only allow the white list through.\n    def child_params\n      params.fetch(:child, {}).permit(:name, :balance, :parent_id, :avatar)\n\n          # params.fetch(:user, {}).permit(:first_name, :last_name, :email, :phone, \n    end\nend\n</code></pre>\n\n<p>If I click save with the Remove Avatar box checked, it literally does nothing to the avatar, if I go back to any page that displayed the avatar, it is still there. What am I doing wrong? I am using Ruby on Rails 5.0.1</p>\n\n<p>Side note: I am aware of some of the deprecated things that are being used here, such as before_filter. I am working with a large group of people so not all of this code is mine, fixing it is not priority at the moment.</p>\n"}, {"tags": ["ruby", "selenium-webdriver", "rspec", "ssl-certificate"], "comments": [{"owner": {"reputation": 343, "user_id": 1336988, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/N9enR.jpg?s=128&g=1", "display_name": "codelitt", "link": "https://stackoverflow.com/users/1336988/codelitt"}, "edited": false, "score": 0, "creation_date": 1492031043, "post_id": 43376731, "comment_id": 73821348, "body": "Have you tried only using <code>profile.accept_untrusted_certs = true</code> and not using <code>assume_untrusted_certificate_issuer = false</code> ?"}, {"owner": {"reputation": 11, "user_id": 5481546, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/MPMwc.jpg?s=128&g=1", "display_name": "RaK427", "link": "https://stackoverflow.com/users/5481546/rak427"}, "reply_to_user": {"reputation": 343, "user_id": 1336988, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/N9enR.jpg?s=128&g=1", "display_name": "codelitt", "link": "https://stackoverflow.com/users/1336988/codelitt"}, "edited": false, "score": 0, "creation_date": 1492033224, "post_id": 43376731, "comment_id": 73822244, "body": "I have, it looks like what I might need is Firefox 47.0.2 and to find a legacy driver for it, unfortunately."}], "owner": {"reputation": 11, "user_id": 5481546, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/MPMwc.jpg?s=128&g=1", "display_name": "RaK427", "link": "https://stackoverflow.com/users/5481546/rak427"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 165, "favorite_count": 1, "answer_count": 0, "score": 0, "last_activity_date": 1492030951, "creation_date": 1492020588, "question_id": 43376731, "link": "https://stackoverflow.com/questions/43376731/how-can-i-stop-selenium-webdriver-from-closing-firefox-and-throwing-an-error-whe", "title": "How can I stop Selenium-Webdriver from closing Firefox and throwing an error when it hits a certificate error with automation through Ruby/Rspec?", "body": "<p>Failure/Error: visit url<br>\nSelenium::WebDriver::Error::UnknownError:  </p>\n\n<p>I get the above error whenever visiting a URL that has an expired certificate, the Your connection is not secure page doesn't have an opportunity to load before the browser closes my test with the failure.  I've tried importing the certificate and then adding it, the latter of which fails.  I've tried creating a profile with different variations of,  </p>\n\n<pre><code>Capybara.register_driver :selenium_profile do |app|  \n  profile = Selenium::WebDriver::Firefox::Profile.new  \n  profile.secure_ssl = false  \n  profile.assume_untrusted_certificate_issuer = false  \n  profile.accept_untrusted_certs = true  \n  Capybara::Selenium::Driver.new(app, :browser =&gt; firefox, :profile =&gt; profile)  \nend  \n</code></pre>\n\n<p>through about:config in Firefox I've set browser.ssl_override_behaviour from 2 to 1.  My automation navigates to other environment URLs that don't experience the certificate error and runs as it's supposed to.  I've also confirmed the URL stored in url isn't malformed.</p>\n\n<p>In addition to the driver setup above, I also have  </p>\n\n<pre><code>  require \"capybara\"  \n  require \"capybara/dsl\"  \n  require \"capybara/rspec\"  \n  require \"capybara-screenshot/rspec\"  \n  require 'selenium-webdriver'  \n</code></pre>\n\n<p>in my spec_helper.rb.  </p>\n\n<p>Firefox 52.0.2 (32-bit)<br>\nGeckodriver 0.15.0 (32-bit)<br>\nselenium-webdriver (3.3.0)<br>\nrspec (3.5.0)<br>\ncapybara (2.13.0)<br>\nruby 2.3.3p222 (2016-11-21 revision 56859) [x64-mingw32]</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "validation"], "comments": [{"owner": {"reputation": 11075, "user_id": 744346, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/4d4016d193e6a2ccf2fef223f7eac9db?s=128&d=identicon&r=PG", "display_name": "MrDanA", "link": "https://stackoverflow.com/users/744346/mrdana"}, "edited": false, "score": 0, "creation_date": 1492022468, "post_id": 43376594, "comment_id": 73816587, "body": "My guess is the Rails validators use the basic accessors to fetch the data, then validate them, then put that back in to the object, and now your accessors are compromised. This is a fairly silly idea, but I&#39;ll throw it out there just in case you end up with nothing else: the accessor that your <code>profanity_attrs</code> macro redefines could look at the call stack, and if it sees a validation method, just return the normal data instead of cleaning it. Another option would be to try maybe a way of only cleaning the data for view code, maybe with helpers/decorators."}, {"owner": {"reputation": 11597, "user_id": 473467, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/2270d703967bfebb9cb555f85b3bb56b?s=128&d=identicon&r=PG", "display_name": "awendt", "link": "https://stackoverflow.com/users/473467/awendt"}, "edited": false, "score": 0, "creation_date": 1492023104, "post_id": 43376594, "comment_id": 73816969, "body": "If you never want the profanity-sanitized attributes to end up in the DB, why don&#39;t you use a wrapper that filters when <i>showing</i> the model?"}], "answers": [{"comments": [{"owner": {"reputation": 15399, "user_id": 48553, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/9f841250f16164ae270f1ce286171165?s=128&d=identicon&r=PG", "display_name": "Steven Evers", "link": "https://stackoverflow.com/users/48553/steven-evers"}, "edited": false, "score": 0, "creation_date": 1492035348, "post_id": 43378523, "comment_id": 73823115, "body": "I&#39;m not mutating the value. profanity_filter takes a <code>content</code> param, creates a copy ( <code>content_out = content</code> ) and then mutates and returns <code>content_out</code>. The reason for making the macro is because I don&#39;t want to rename all of the accessors and then have to update all of the clients as well (the models are returned in API calls)."}, {"owner": {"reputation": 654, "user_id": 273895, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/2cc101ef6e494fe56559cd0bbc9513ff?s=128&d=identicon&r=PG", "display_name": "user273895", "link": "https://stackoverflow.com/users/273895/user273895"}, "reply_to_user": {"reputation": 15399, "user_id": 48553, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/9f841250f16164ae270f1ce286171165?s=128&d=identicon&r=PG", "display_name": "Steven Evers", "link": "https://stackoverflow.com/users/48553/steven-evers"}, "edited": false, "score": 0, "creation_date": 1492049525, "post_id": 43378523, "comment_id": 73826802, "body": "From a small test I run with rails 5, it didn&#39;t seem like your approach actually changed the value that was saved to the DB (if truly you&#39;re not updating the value in your filter method)."}, {"owner": {"reputation": 15399, "user_id": 48553, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/9f841250f16164ae270f1ce286171165?s=128&d=identicon&r=PG", "display_name": "Steven Evers", "link": "https://stackoverflow.com/users/48553/steven-evers"}, "edited": false, "score": 0, "creation_date": 1492193102, "post_id": 43378523, "comment_id": 73892537, "body": "I&#39;m fairly new to ruby/rails so I&#39;ll take another look to be sure. If I remove the validates: :body length: {...} line, then it&#39;ll work as expected. Maybe there&#39;s a Concern that&#39;s doing something that I&#39;m missing."}, {"owner": {"reputation": 654, "user_id": 273895, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/2cc101ef6e494fe56559cd0bbc9513ff?s=128&d=identicon&r=PG", "display_name": "user273895", "link": "https://stackoverflow.com/users/273895/user273895"}, "reply_to_user": {"reputation": 15399, "user_id": 48553, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/9f841250f16164ae270f1ce286171165?s=128&d=identicon&r=PG", "display_name": "Steven Evers", "link": "https://stackoverflow.com/users/48553/steven-evers"}, "edited": false, "score": 0, "creation_date": 1492194073, "post_id": 43378523, "comment_id": 73893039, "body": "Be aware that Strings in Ruby are mutatable, I don&#39;t know how you&#39;re updating <code>content_out</code> but there&#39;s a chance you&#39;re affecting the original string. the best way to test those things are in the rails console, run <code>rails c</code> and run it there     <code>a = &quot;hello&quot;     b = a     b[&#47;ll&#47;] = &quot;X&quot;     b  (prints &quot;heXo&quot;)     a  (prints &quot;heXo&quot;)</code>"}], "tags": [], "owner": {"reputation": 654, "user_id": 273895, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/2cc101ef6e494fe56559cd0bbc9513ff?s=128&d=identicon&r=PG", "display_name": "user273895", "link": "https://stackoverflow.com/users/273895/user273895"}, "is_accepted": false, "score": 1, "last_activity_date": 1492026902, "creation_date": 1492026902, "answer_id": 43378523, "question_id": 43376594, "link": "https://stackoverflow.com/questions/43376594/rails-is-persisting-on-validates/43378523#43378523", "title": "Rails is persisting on validates", "body": "<p>Verify that you are not setting the attribute value in your <strong>profanity_filter</strong> implementation, that you are just returning a filtered copy of it (just validating an attribute shouldn't change it's value unless you're accidently also setting its value in your profanity_filter method).</p>\n\n<p>In addition I would also change a little bit what you did in the macro you defined, instead of </p>\n\n<pre><code>define_method(attr)\n</code></pre>\n\n<p>I would define the method as </p>\n\n<pre><code>define_method(\"#{attr}_clean\")\n</code></pre>\n\n<p>and in the views access the filtered version of the attribute by calling the \"clean\" version, i.e. </p>\n\n<pre><code>&lt;%= post.body_clean %&gt;\n</code></pre>\n"}], "owner": {"reputation": 15399, "user_id": 48553, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/9f841250f16164ae270f1ce286171165?s=128&d=identicon&r=PG", "display_name": "Steven Evers", "link": "https://stackoverflow.com/users/48553/steven-evers"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 70, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1492026902, "creation_date": 1492020123, "last_edit_date": 1495542339, "question_id": 43376594, "link": "https://stackoverflow.com/questions/43376594/rails-is-persisting-on-validates", "title": "Rails is persisting on validates", "body": "<p>I have an ActiveRecord model that does find and replace filtering on an attribute when its accessor is called, and I'm doing it like the answer to my question <a href=\"https://stackoverflow.com/questions/43130198/wrap-many-rails-attributes-with-custom-functionality\">here</a>. It looks like this:</p>\n\n<pre><code>class Post &lt; ActiveRecord::Base\n    include Replaceable\n\n    profanity_attrs :body, :title\nend\n</code></pre>\n\n<p>If you haven't looked at the link, then there's a macro called profanity_attrs that calls a profanity_filter method that does find/replace on known keywords.</p>\n\n<p>So when I have something like <code>body = \"Oh my poop\"</code> and I do a replace with **** so that the filter returns \"Oh my ****\" then that's what it looks like, and I'm very happy. The DB shows \"Oh my poop\" and the view shows \"Oh my ****\", which is exactly what I want, until... I add validation. So if I do this:</p>\n\n<pre><code>class Post &lt; ActiveRecord::Base\n    include Replaceable\n\n    validates :body, length: { maximum: 255 }\n\n    profanity_attrs :body, :title\nend\n</code></pre>\n\n<p>Then it still does the replace properly, but the replaced value will be persisted (ie. the db contains \"Oh my ****\"), and that doesn't make a lot of sense to me. It appears as if the validator is mutating the field that it validates.</p>\n\n<p>Is there a way to preserve the validation, but not have it persist the value returned from the accessor?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "bundler"], "answers": [{"tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user2150911"}, "is_accepted": true, "score": 0, "last_activity_date": 1492019291, "creation_date": 1492019291, "answer_id": 43376340, "question_id": 43376192, "link": "https://stackoverflow.com/questions/43376192/pronto-gitlab-gem-not-found-error/43376340#43376340", "title": "Pronto: gitlab gem not found error", "body": "<p>As is, you can't use the gem without gitlab, since <a href=\"https://github.com/mmozuras/pronto/blob/96bba3d9b16baef5c07754047fb1f46b33a0670b/lib/pronto.rb#L3\" rel=\"nofollow noreferrer\">it is a requirement in the gem's main file</a>.</p>\n\n<p>You could fork the gem and remove Gitlab from that file. I didn't comb through the code, but this might break more things. It should be possible to remove the references to Gitlab without breaking the core functionality though.</p>\n"}], "owner": {"reputation": 1582, "user_id": 1115117, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/0ce67ee0c177c92f77933234ccf7db95?s=128&d=identicon&r=PG", "display_name": "ascherman", "link": "https://stackoverflow.com/users/1115117/ascherman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 243, "favorite_count": 0, "accepted_answer_id": 43376340, "answer_count": 1, "score": 0, "last_activity_date": 1540396004, "creation_date": 1492018759, "last_edit_date": 1540396004, "question_id": 43376192, "link": "https://stackoverflow.com/questions/43376192/pronto-gitlab-gem-not-found-error", "title": "Pronto: gitlab gem not found error", "body": "<p>I have a <strong>rails project</strong> in a <code>github repo</code>, and a <code>CI server</code> for running tests.</p>\n\n<p>The thing is, I added <code>rubocop/pronto</code> to get some feedback about the code style (not need to post messages on Github for now, only to run it locally to get warnings about my changes), and <strong>pronto has the gitlab gem as a dependency</strong>.</p>\n\n<p>Given my CI server doesn't have the gitlab gem installed (because there is no need to), the build is failing with the message:</p>\n\n<blockquote>\n  <p>gems/2.2.0/gems/bundler-1.14.5/lib/bundler/spec_set.rb:87:in `block in materialize': Could not find gitlab-3.6.1 in any of the sources (Bundler::GemNotFound)</p>\n</blockquote>\n\n<p>These are added to my Gemfile.lock after running <code>bundle</code></p>\n\n<pre><code>pronto (0.8.2)\n  gitlab (~&gt; 3.6, &gt;= 3.4.0)\n...\ngitlab (3.6.1)\n  httparty\n  terminal-table\n</code></pre>\n\n<p>Is there any way I can install pronto without installing the gitlab gem?</p>\n"}, {"tags": ["ruby", "mri"], "answers": [{"comments": [{"owner": {"reputation": 5824, "user_id": 781743, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/d19aed08825cbb3a52289ce9d5613035?s=128&d=identicon&r=PG", "display_name": "graywolf", "link": "https://stackoverflow.com/users/781743/graywolf"}, "edited": false, "score": 0, "creation_date": 1492021141, "post_id": 43376451, "comment_id": 73815860, "body": "good to know, thank you :)"}], "tags": [], "owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "is_accepted": true, "score": 3, "last_activity_date": 1492019693, "creation_date": 1492019693, "answer_id": 43376451, "question_id": 43376108, "link": "https://stackoverflow.com/questions/43376108/why-does-ruby-require-parentheses-here/43376451#43376451", "title": "Why does ruby require parentheses here?", "body": "<p>In the first example, the curly braces are interpreted as delimiting a block. Since <code>dry: true</code> is not a legal expression, you get a <code>SyntaxError</code>.</p>\n"}], "owner": {"reputation": 5824, "user_id": 781743, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/d19aed08825cbb3a52289ce9d5613035?s=128&d=identicon&r=PG", "display_name": "graywolf", "link": "https://stackoverflow.com/users/781743/graywolf"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 49, "favorite_count": 0, "closed_date": 1492026620, "accepted_answer_id": 43376451, "answer_count": 1, "score": 4, "last_activity_date": 1492019693, "creation_date": 1492018479, "last_edit_date": 1492018850, "question_id": 43376108, "link": "https://stackoverflow.com/questions/43376108/why-does-ruby-require-parentheses-here", "closed_reason": "Duplicate", "title": "Why does ruby require parentheses here?", "body": "<p>When I try to do</p>\n\n<pre><code>assert_equal { dry: true }, res\n</code></pre>\n\n<p>I get</p>\n\n<pre><code>syntax error, unexpected ':', expecting '}'\n\n        assert_equal { dry: true }, res\n</code></pre>\n\n<p>but</p>\n\n<pre><code>assert_equal({ dry: true }, res)\n</code></pre>\n\n<p>works fine. Why is first form not sufficient for ruby to understand what\nI mean? Or to be more precise, what does Ruby think I'm trying to do?</p>\n"}, {"tags": ["javascript", "jquery", "ruby-on-rails", "ruby", "rails-sprockets"], "answers": [{"comments": [{"owner": {"reputation": 63, "user_id": 7484683, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3541ffa01a455bab738dd9532447c8a5?s=128&d=identicon&r=PG&f=1", "display_name": "Craig Ness", "link": "https://stackoverflow.com/users/7484683/craig-ness"}, "edited": false, "score": 0, "creation_date": 1492106883, "post_id": 43377580, "comment_id": 73858682, "body": "@JD, thanks for the answer and the tip about Sass, wouldn&#39;t have known that otherwise!"}], "tags": [], "owner": {"reputation": 9729, "user_id": 4554116, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/cu8de.png?s=128&g=1", "display_name": "Julius", "link": "https://stackoverflow.com/users/4554116/julius"}, "is_accepted": true, "score": 2, "last_activity_date": 1492023523, "creation_date": 1492023523, "answer_id": 43377580, "question_id": 43376087, "link": "https://stackoverflow.com/questions/43376087/how-are-sprockets-directives-read-in-manifest-file-when-using-rails/43377580#43377580", "title": "How are Sprockets directives read in manifest file when using Rails?", "body": "<p>Dont know how much you know, so will try to explain in details. </p>\n\n<p>Rails stores our assets (like images, css, js files) in separate places, so its all in order and better for us - devs, to use. So thats called Assed Pipeline. When Rails loads those assets, say, css files, it creates one big file from all our app files, to avoid multiple calls. And Manifest is like a map or rules for Rails which files to include in that big css file and this <code>*=</code> is whats telling Rails what exactly to include (I consider it as a Rails syntax). So when you have something like this:</p>\n\n<pre><code>//= require jquery\n//= require jquery_ujs\n//= require turbolinks\n//= require_tree . \n</code></pre>\n\n<p><code>require_tree .</code> tells Rails to grab all files from the javascripts folder, while <code>//= require jquery</code>and others directs Rails to <em>special cases</em> - assets, usually used by your gems (those files you never keep in your javascripts/stylesheets folders, so <code>//= require_tree .</code> cant see them).</p>\n\n<p>When you add your on css file, you just add it in the stylesheets folder and <code>require_tree</code> informs Rails to include it in the big picture. But Rails has a nice feature - scaffolding. You scaffold your object with command <code>rails g scaffold User</code> and Rails creates everything for you - views, controller, model, tests (and who knows what else :) ). So in this case you don't even need to create your css file, just insert css rules into it and Rails will find it due <code>require_tree .</code></p>\n\n<p>A bit different story with sass files:</p>\n\n<blockquote>\n  <p>If you want to use multiple Sass files, you should generally use the\n  Sass @import rule instead of these Sprockets directives. When using\n  Sprockets directives, Sass files exist within their own scope, making\n  variables or mixins only available within the document they were\n  defined in.</p>\n</blockquote>\n\n<p>So if you will be using Bootstrap (probably will), this is a important to know as well. </p>\n\n<p>Hope this helps</p>\n"}, {"comments": [{"owner": {"reputation": 63, "user_id": 7484683, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3541ffa01a455bab738dd9532447c8a5?s=128&d=identicon&r=PG&f=1", "display_name": "Craig Ness", "link": "https://stackoverflow.com/users/7484683/craig-ness"}, "edited": false, "score": 0, "creation_date": 1492106705, "post_id": 43377666, "comment_id": 73858596, "body": "Thanks @SergioTulentsev! This definitely helped clear things up"}], "tags": [], "owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "is_accepted": false, "score": 1, "last_activity_date": 1492024180, "last_edit_date": 1492024180, "creation_date": 1492023829, "answer_id": 43377666, "question_id": 43376087, "link": "https://stackoverflow.com/questions/43376087/how-are-sprockets-directives-read-in-manifest-file-when-using-rails/43377666#43377666", "title": "How are Sprockets directives read in manifest file when using Rails?", "body": "<blockquote>\n  <p>How? Why must the directive be commented out first</p>\n</blockquote>\n\n<p>Because this is sprockets directive. It is executed well before any js/coffee in that file gets the chance to run. And css is not \"runnable\" code at all. How do you make this kind of code not produce any errors? You comment it.</p>\n\n<blockquote>\n  <p>... and the equal sign added?</p>\n</blockquote>\n\n<p>To tell these special directives apart from other, \"regular\" comments, which may be in that file.</p>\n\n<blockquote>\n  <p>I'm assuming I shouldn't add css directly inside of the manifest file...</p>\n</blockquote>\n\n<p>Why not, go ahead. Although you may want to put any custom code in separate files for reasons of code organization. But technically, there's no problem here.</p>\n\n<blockquote>\n  <p>Also, when I add my own custom css stylesheet, do I add a require directive in the application.css manifest file</p>\n</blockquote>\n\n<p>No need, <code>require_tree .</code> will find and include your file.</p>\n\n<blockquote>\n  <p>or do I add the stylesheet link such as <code>&lt;link rel=\"stylesheet\"type=\"text/css\" href=\"mystyle.css\"&gt;</code>?</p>\n</blockquote>\n\n<p>Nope, don't do that.</p>\n"}], "owner": {"reputation": 63, "user_id": 7484683, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3541ffa01a455bab738dd9532447c8a5?s=128&d=identicon&r=PG&f=1", "display_name": "Craig Ness", "link": "https://stackoverflow.com/users/7484683/craig-ness"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 359, "favorite_count": 0, "accepted_answer_id": 43377580, "answer_count": 2, "score": 3, "last_activity_date": 1492024180, "creation_date": 1492018412, "question_id": 43376087, "link": "https://stackoverflow.com/questions/43376087/how-are-sprockets-directives-read-in-manifest-file-when-using-rails", "title": "How are Sprockets directives read in manifest file when using Rails?", "body": "<p>New to Rails so bear with me...I was looking at a manifest file (application.js) today while researching the asset pipeline and was curious how the directives such as <code>//= require jquery</code> are being read. Is this something Sprockets is doing in the background? How? Why must the directive be commented out first, and the equal sign added? If I uncomment the directives and load the application.js file in my broswer, I no longer see the jquery library contents. Just curious how this is working in the background.</p>\n\n<p>Also, when I add my own custom css stylesheet, do I add a require directive in the application.css manifest file, or do I add the stylesheet link such as <code>&lt;link rel=\"stylesheet\" type=\"text/css\" href=\"mystyle.css\"&gt;</code>? Or do I do both? I'm assuming I shouldn't add css directly inside of the manifest file...</p>\n\n<p>Thanks!</p>\n"}, {"tags": ["html", "ruby", "xml", "html-parsing"], "comments": [{"owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "edited": false, "score": 0, "creation_date": 1492015635, "post_id": 43375214, "comment_id": 73812876, "body": "Are you sure that your HTML is actually valid XML? HTML might look like and might be XML, but it must not follow the strict rules of XML to still by valid HTML."}, {"owner": {"reputation": 779, "user_id": 237646, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f63530eed07b0d72e43e49a30a5374b3?s=128&d=identicon&r=PG", "display_name": "Edward", "link": "https://stackoverflow.com/users/237646/edward"}, "reply_to_user": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "edited": false, "score": 0, "creation_date": 1492017112, "post_id": 43375214, "comment_id": 73813735, "body": "This html is not a valid xml, for example it could contain self closed tags <code>&lt;img src=&quot;logo.png&quot; alt=&quot;logo&quot;&gt;&#39;)</code>. The main question how to parse and extract text from html which is not always valid xml. Other libraries like <code>Nokogiri</code> have such possibility, so probably it could be done with <code>Ox</code> as well"}, {"owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "edited": false, "score": 0, "creation_date": 1492017820, "post_id": 43375214, "comment_id": 73814103, "body": "Did you read and try the section about HTML parsing on OX&#39;s homepage: <a href=\"http://www.ohler.com/ox/\" rel=\"nofollow noreferrer\">ohler.com/ox</a> ?"}, {"owner": {"reputation": 779, "user_id": 237646, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f63530eed07b0d72e43e49a30a5374b3?s=128&d=identicon&r=PG", "display_name": "Edward", "link": "https://stackoverflow.com/users/237646/edward"}, "reply_to_user": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "edited": false, "score": 0, "creation_date": 1492019776, "post_id": 43375214, "comment_id": 73815114, "body": "@spickermann yes, i tried to change default settings like in documentation, but result is the same: <code>Ox::ParseError</code> ..."}, {"owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "edited": false, "score": 0, "creation_date": 1492023963, "post_id": 43375214, "comment_id": 73817403, "body": "Can you please an example document, for example the one that was failing at line 1, column 23 for your question?"}, {"owner": {"reputation": 779, "user_id": 237646, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f63530eed07b0d72e43e49a30a5374b3?s=128&d=identicon&r=PG", "display_name": "Edward", "link": "https://stackoverflow.com/users/237646/edward"}, "reply_to_user": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "edited": false, "score": 0, "creation_date": 1492031568, "post_id": 43375214, "comment_id": 73821594, "body": "it fails:  <code>Ox.parse(&#39;&lt;img src=&quot;logo.png&quot; alt=&quot;logo&quot;&gt;&#39;) Ox::ParseError: invalid format, document not terminated at line 1, column 33 [parse.c:521]</code>"}], "answers": [{"tags": [], "owner": {"reputation": 779, "user_id": 237646, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f63530eed07b0d72e43e49a30a5374b3?s=128&d=identicon&r=PG", "display_name": "Edward", "link": "https://stackoverflow.com/users/237646/edward"}, "is_accepted": true, "score": 1, "last_activity_date": 1492341398, "last_edit_date": 1492341398, "creation_date": 1492270874, "answer_id": 43427991, "question_id": 43375214, "link": "https://stackoverflow.com/questions/43375214/how-to-extract-plain-text-from-html-markup-in-ruby-with-help-of-ox-gem/43427991#43427991", "title": "How to extract plain text from html markup in ruby with help of &#39;Ox&#39; gem", "body": "<p>For parsing html I should use <code>Ox.sax_html</code> method with sax handler, but not <code>Ox.parse</code></p>\n\n<pre><code>require 'stringio'\nrequire 'ox'\n\nclass TextHandler &lt; ::Ox::Sax\n  attr_reader :parsed_text\n\n  def initialize()\n    @parsed_text = ''\n  end\n\n  def text(value)\n    @parsed_text &lt;&lt; \" #{value}\"\n  end\nend\n\ntext_handler = TextHandler.new\n\noptions = {\n  symbolize: true,\n  skip: :skip_white,\n  smart: true\n}\n\nsome_markup = '&lt;img src=\"logo.png\" alt=\"logo\"&gt;&lt;div&gt;hello&lt;/div&gt;&lt;div&gt;world ...'\n\ninput = StringIO.new(some_markup)\n\nOx.sax_html(text_handler, input, options)\n\ntext_handler.parsed_text\n</code></pre>\n"}], "owner": {"reputation": 779, "user_id": 237646, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f63530eed07b0d72e43e49a30a5374b3?s=128&d=identicon&r=PG", "display_name": "Edward", "link": "https://stackoverflow.com/users/237646/edward"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 379, "favorite_count": 1, "accepted_answer_id": 43427991, "answer_count": 1, "score": 0, "last_activity_date": 1492341398, "creation_date": 1492015358, "question_id": 43375214, "link": "https://stackoverflow.com/questions/43375214/how-to-extract-plain-text-from-html-markup-in-ruby-with-help-of-ox-gem", "title": "How to extract plain text from html markup in ruby with help of &#39;Ox&#39; gem", "body": "<p>I have a lot of markup stored in database table text field, this markup could have different structure.\nI need to extract plain text from each of these pieces of markup stored in the database, so I decided to use <code>Ox</code> gem for this since it the fastest xml parsing library for ruby according to tests. When I try to do it I get errors like this:</p>\n\n<pre><code>irb(main):026:0&gt; Ox.parse(some_html)\nOx::ParseError: invalid format, document not terminated at line 1, column 23 [parse.c:521]\n</code></pre>\n\n<p>I know how to do it with <code>Nokogiri</code> but I need to use <code>Ox</code> library</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 2188, "user_id": 1489914, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/7PReX.jpg?s=128&g=1", "display_name": "Tall Paul", "link": "https://stackoverflow.com/users/1489914/tall-paul"}, "edited": false, "score": 1, "creation_date": 1492014861, "post_id": 43375001, "comment_id": 73812436, "body": "can you show your schema file / migration that covers user image?"}, {"owner": {"reputation": 1723, "user_id": 4735914, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d998392dbbbd8061d2ef13ea60955633?s=128&d=identicon&r=PG&f=1", "display_name": "jdgray", "link": "https://stackoverflow.com/users/4735914/jdgray"}, "edited": false, "score": 0, "creation_date": 1492015038, "post_id": 43375001, "comment_id": 73812534, "body": "Can you confirm your model is <code>Userimage</code> compared to <code>UserImage</code>?"}, {"owner": {"reputation": 23, "user_id": 5421028, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GBz6B.jpg?s=128&g=1", "display_name": "deskmonkey", "link": "https://stackoverflow.com/users/5421028/deskmonkey"}, "edited": false, "score": 0, "creation_date": 1492015751, "post_id": 43375001, "comment_id": 73812935, "body": "<code>create_table &quot;userimages&quot;, force: :cascade do |t|     t.text     &quot;description&quot;     t.string   &quot;title&quot;     t.datetime &quot;created_at&quot;,   null: false     t.datetime &quot;updated_at&quot;,   null: false   end</code>"}, {"owner": {"reputation": 23, "user_id": 5421028, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GBz6B.jpg?s=128&g=1", "display_name": "deskmonkey", "link": "https://stackoverflow.com/users/5421028/deskmonkey"}, "edited": false, "score": 0, "creation_date": 1492015784, "post_id": 43375001, "comment_id": 73812956, "body": "I looked at the model and every other file and it i Userimages not UserImages."}], "answers": [{"comments": [{"owner": {"reputation": 23, "user_id": 5421028, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GBz6B.jpg?s=128&g=1", "display_name": "deskmonkey", "link": "https://stackoverflow.com/users/5421028/deskmonkey"}, "edited": false, "score": 0, "creation_date": 1492016346, "post_id": 43375170, "comment_id": 73813306, "body": "To me, Rails is alien technology. I&#39;m impress to how much it automatically does things for me and it just works with less code.  .... Oh, oh! My light bulb just came on! So rails was routing according to the model/crud not controller/crud?..interesting. It works!! I was mystify why it was looking for userimages_path. Thought it was smart enough to route to new_uploads in the form_for so I didn&#39;t think to look there! Marked as answer! Thank you!"}], "tags": [], "owner": {"reputation": 38307, "user_id": 2057388, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ceef8c04f66cd0e2bd360ef6abc14a81?s=128&d=identicon&r=PG", "display_name": "\u0417\u0435\u043b\u0451\u043d\u044b\u0439", "link": "https://stackoverflow.com/users/2057388/%d0%97%d0%b5%d0%bb%d1%91%d0%bd%d1%8b%d0%b9"}, "is_accepted": true, "score": 1, "last_activity_date": 1492016353, "last_edit_date": 1492016353, "creation_date": 1492015204, "answer_id": 43375170, "question_id": 43375001, "link": "https://stackoverflow.com/questions/43375001/rails-access-model-from-different-controller/43375170#43375170", "title": "Rails: Access model from different controller", "body": "<p>It is a Rails magic, when you don't specify second option(<code>url</code>) for <code>form_for</code>, Rails try to set it, in your case <code>&lt;%= form_for @userimage do |f|%&gt;</code> converts by Rails to <code>&lt;%= form_for @userimage, url: userimages_path do |f|%&gt;</code>, in your routes, there is no such <code>_path</code> helper. \nTo resolve this issue run <code>bundle rake routes</code> and set the right <code>url</code> option.</p>\n\n<p><a href=\"http://api.rubyonrails.org/classes/ActionView/Helpers/FormHelper.html#method-i-form_for\" rel=\"nofollow noreferrer\"><code>Check the documentation</code></a></p>\n"}, {"tags": [], "owner": {"reputation": 4527, "user_id": 5497690, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/577c8ad14fffb59cd619e43634c51dad?s=128&d=identicon&r=PG&f=1", "display_name": "puneet18", "link": "https://stackoverflow.com/users/5497690/puneet18"}, "is_accepted": false, "score": 0, "last_activity_date": 1492015552, "creation_date": 1492015552, "answer_id": 43375271, "question_id": 43375001, "link": "https://stackoverflow.com/questions/43375001/rails-access-model-from-different-controller/43375271#43375271", "title": "Rails: Access model from different controller", "body": "<p>try below code:</p>\n\n<h1>view</h1>\n\n<pre><code> &lt;%= form_for @userimage, url: \"/uploads\" do |f|%&gt;\n</code></pre>\n\n<h1>uploads controller</h1>\n\n<pre><code>def create\n  ...\nend\n</code></pre>\n"}], "owner": {"reputation": 23, "user_id": 5421028, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GBz6B.jpg?s=128&g=1", "display_name": "deskmonkey", "link": "https://stackoverflow.com/users/5421028/deskmonkey"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 757, "favorite_count": 1, "accepted_answer_id": 43375170, "answer_count": 2, "score": 1, "last_activity_date": 1492016353, "creation_date": 1492014632, "question_id": 43375001, "link": "https://stackoverflow.com/questions/43375001/rails-access-model-from-different-controller", "title": "Rails: Access model from different controller", "body": "<p>I know this question been ask before and they said 'models are independent of the controller.' So, following my same code I did for other models I just renamed my working code to fit to my new model. But I'm getting an error <code>undefined method 'userimages_path'</code> Here the code I'm using. </p>\n\n<p>The model is <code>userimage</code> and the controller is <code>uploads</code>. </p>\n\n<p>Controller/uploads_controller.rb</p>\n\n<pre><code>  def new\n    @userimage = Userimage.new\n  end                       \n</code></pre>\n\n<p><br>\nModel/userimage.rb is an empty file\n<br></p>\n\n<p>Views/uploads/new.html.erb (This line is throwing the error.)</p>\n\n<pre><code>  &lt;%= form_for @userimage do |f|%&gt;\n</code></pre>\n\n<p>In my routes.rb</p>\n\n<pre><code>resources :uploads\n</code></pre>\n\n<p>I have <code>rake db:migrate</code> several times to make sure I did migrate the database thinking this might be why it can't find the <code>Userimage</code>. </p>\n\n<p>What I have I done wrong/missing here?</p>\n"}, {"tags": ["json", "ruby"], "comments": [{"owner": {"reputation": 208794, "user_id": 229044, "user_type": "moderator", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/591426cbbacd4025d920467bad356911?s=128&d=identicon&r=PG&f=1", "display_name": "meagar", "link": "https://stackoverflow.com/users/229044/meagar"}, "edited": false, "score": 0, "creation_date": 1492014693, "post_id": 43374771, "comment_id": 73812338, "body": "You fundamentally misunderstand what JSON is. There are no security concerns possible. JSON isn&#39;t code, you can&#39;t inject harmful values into it."}, {"owner": {"reputation": 45322, "user_id": 421705, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/581b1760881c962648f99d6040d41829?s=128&d=identicon&r=PG", "display_name": "Holger Just", "link": "https://stackoverflow.com/users/421705/holger-just"}, "edited": false, "score": 1, "creation_date": 1492026771, "post_id": 43374771, "comment_id": 73818998, "body": "<code>JSON.parse</code> is safe. <code>JSON.load</code> is not. Always use the former unless you  really, really do need the specific behavior of the latter (which you won&#39;t)."}], "answers": [{"comments": [{"owner": {"reputation": 256, "user_id": 7170785, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/29433a054b4f112e4906f209514b70f2?s=128&d=identicon&r=PG&f=1", "display_name": "DepressedDaniel", "link": "https://stackoverflow.com/users/7170785/depresseddaniel"}, "edited": false, "score": 0, "creation_date": 1492014167, "post_id": 43374831, "comment_id": 73812004, "body": "Well I think it depends what you put in the <code>JSON</code>, for example, <code>JSON.parse([1,2,3].to_json)</code> returns an array."}, {"owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "reply_to_user": {"reputation": 256, "user_id": 7170785, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/29433a054b4f112e4906f209514b70f2?s=128&d=identicon&r=PG&f=1", "display_name": "DepressedDaniel", "link": "https://stackoverflow.com/users/7170785/depresseddaniel"}, "edited": false, "score": 0, "creation_date": 1492014469, "post_id": 43374831, "comment_id": 73812199, "body": "@DepressedDaniel: JSON allows only a short list of data types (see <a href=\"https://en.wikipedia.org/wiki/JSON#Data_types.2C_syntax_and_example\" rel=\"nofollow noreferrer\">Wikipedia</a>), therefore it is not possible to inject fancy and dangerous datatypes with JSON."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 1, "creation_date": 1492014723, "post_id": 43374831, "comment_id": 73812353, "body": "Technically <code>JSON.parse</code> <i>should</i> not evaluate anything, but there&#39;s been a few <a href=\"https://www.trendmicro.com/vinfo/us/threat-encyclopedia/vulnerability/4835/ruby-on-rails-json-parser-remote-code-execution-vulnerability\" rel=\"nofollow noreferrer\">massive &quot;oops&quot; moments in history</a>. It&#39;s generally okay to presume it won&#39;t execute code, but like any software, really nasty bugs happen."}], "tags": [], "owner": {"reputation": 47232, "user_id": 1772830, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Qtoqg.jpg?s=128&g=1", "display_name": "Andrey Deineko", "link": "https://stackoverflow.com/users/1772830/andrey-deineko"}, "is_accepted": false, "score": 1, "last_activity_date": 1492015033, "last_edit_date": 1492015033, "creation_date": 1492014072, "answer_id": 43374831, "question_id": 43374771, "link": "https://stackoverflow.com/questions/43374771/security-of-json-parse-in-ruby/43374831#43374831", "title": "security of `JSON.parse()` in Ruby?", "body": "<p><a href=\"http://ruby-doc.org/stdlib-2.4.1/libdoc/json/rdoc/JSON.html#method-i-parse\" rel=\"nofollow noreferrer\">JSON.<code>parse</code></a> does not evaluate anything, it parses json. What can go wrong? Nothing.</p>\n"}], "owner": {"reputation": 256, "user_id": 7170785, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/29433a054b4f112e4906f209514b70f2?s=128&d=identicon&r=PG&f=1", "display_name": "DepressedDaniel", "link": "https://stackoverflow.com/users/7170785/depresseddaniel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 861, "favorite_count": 2, "closed_date": 1492014760, "answer_count": 1, "score": 0, "last_activity_date": 1492015033, "creation_date": 1492013913, "question_id": 43374771, "link": "https://stackoverflow.com/questions/43374771/security-of-json-parse-in-ruby", "closed_reason": "Duplicate", "title": "security of `JSON.parse()` in Ruby?", "body": "<p>Can I <code>JSON.parse</code> untrusted data and then validate its structure (e.g., map from strings to array of strings)? Or can bad stuff happen just from parsing <code>JSON</code> (like with <code>Marshal</code>, which is inherently unsafe against remote code execution)?</p>\n"}, {"tags": ["ruby", "bots", "discord"], "answers": [{"tags": [], "owner": {"reputation": 1349, "user_id": 6163262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7f3655350c57cb94195d64808b7ba61?s=128&d=identicon&r=PG&f=1", "display_name": "whodini9", "link": "https://stackoverflow.com/users/6163262/whodini9"}, "is_accepted": true, "score": 1, "last_activity_date": 1492014843, "last_edit_date": 1492014843, "creation_date": 1492014210, "answer_id": 43374867, "question_id": 43374728, "link": "https://stackoverflow.com/questions/43374728/ruby-chat-bot-command-cooldown/43374867#43374867", "title": "Ruby chat bot command cooldown", "body": "<p>Not sure what your code looks like but you could do something like this:</p>\n\n<p>Initialize <code>@last_reply_time</code> with some old time value, then before each response:</p>\n\n<pre><code>if Time.now &gt;= @last_reply_time + 300  #(seconds)\n  # Reply\n  # ...\n  @last_reply_time = Time.now # update the @last_reply_time last\nend\n</code></pre>\n\n<p>Obviously you can extend this to check multiple variables, or a list of times for each type of reply and make the logic more complex.</p>\n"}], "owner": {"reputation": 1, "user_id": 7857683, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d35a64447cd7a08031a731e7b8516bad?s=128&d=identicon&r=PG&f=1", "display_name": "Ingenic", "link": "https://stackoverflow.com/users/7857683/ingenic"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 226, "favorite_count": 0, "closed_date": 1492015004, "accepted_answer_id": 43374867, "answer_count": 1, "score": -1, "last_activity_date": 1492014843, "creation_date": 1492013788, "question_id": 43374728, "link": "https://stackoverflow.com/questions/43374728/ruby-chat-bot-command-cooldown", "closed_reason": "Needs more focus", "title": "Ruby chat bot command cooldown", "body": "<p>I'm writing a bot for a discord server using the discordrb gem in Ruby. How could I prevent the bot (and users) from spamming commands in the chat channels? I was thinking about putting certain commands on a 5 minute cooldown, but the only way I could come up with is by using <code>sleep</code> but that prevents the bot from accepting other commands during that time. </p>\n\n<p>Anyone have a suggestion?</p>\n"}, {"tags": ["arrays", "ruby", "nested"], "answers": [{"comments": [{"owner": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "edited": false, "score": 0, "creation_date": 1492014399, "post_id": 43374814, "comment_id": 73812147, "body": "From the description, I&#39;d say that you deleted one array too many."}, {"owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "reply_to_user": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "edited": false, "score": 0, "creation_date": 1492014810, "post_id": 43374814, "comment_id": 73812407, "body": "Reading the question again I am not sure if he wants to keep or remove the array with the <code>11:00</code>. If he wants to keep it, just change the range to exclude the ending - like this <code>(&#39;09:00&#39;...&#39;11:00&#39;)</code> (note the three dots)."}], "tags": [], "owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "is_accepted": false, "score": 1, "last_activity_date": 1492014031, "creation_date": 1492014031, "answer_id": 43374814, "question_id": 43374702, "link": "https://stackoverflow.com/questions/43374702/can-i-delete-a-span-of-items-in-an-array/43374814#43374814", "title": "Can i delete a span of items in an array.?", "body": "<p>I would start with something like this:</p>\n\n<pre><code>daily_time_chunks.delete_if do |time_slot| \n  ('09:00'..'11:00').cover?(time_slot.first.rjust(5, '0'))\nend\n#=&gt; [[\"8:30\",\"9:00\"],[\"11:30\",\"12:00\"],[\"1:00\",\"1:30\"]]\n</code></pre>\n\n<p>Because this is based on string comparisons it is important to <em>normalize</em> the input time from <code>9:00</code> to <code>09:00</code> and to normalize the existing entries in the array before checking the condition: (<code>rjust(5, '0')</code> prepends <code>0</code> to entries that are too short).</p>\n"}, {"tags": [], "owner": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "is_accepted": false, "score": 0, "last_activity_date": 1492017059, "last_edit_date": 1492017059, "creation_date": 1492015906, "answer_id": 43375398, "question_id": 43374702, "link": "https://stackoverflow.com/questions/43374702/can-i-delete-a-span-of-items-in-an-array/43375398#43375398", "title": "Can i delete a span of items in an array.?", "body": "<p>This code is a bit verbose, but it should be more robust than just checking the first or the last element.</p>\n\n<p>It :</p>\n\n<ul>\n<li>converts a time to minutes (e.g. <code>'11:30'</code> to <code>690</code>)</li>\n<li>converts the time spans to an integer range (<code>['8:30','9:00']</code> to <code>510..540</code>)</li>\n<li>removes any time spans which overlaps <code>'9:00', '11:00'</code> during at least one minute.</li>\n<li>leaves spans which only touch <code>'9:00', '11:00'</code>. <code>[\"8:30\", \"9:00\"], [\"11:00\", \"11:30\"]</code> are left in the array.</li>\n</ul>\n\n<hr>\n\n<pre><code>def time_to_minutes(hhmm)\n  h, m = hhmm.split(':').map(&amp;:to_i)\n  h * 60 + m\nend\n\ndef to_minute_range(hhmm1, hhmm2)\n  (time_to_minutes(hhmm1)..time_to_minutes(hhmm2))\nend\n\ndef strict_overlap?(range1, range2)\n  range1.min &lt; range2.max &amp;&amp; range2.min &lt; range1.max\nend\n\nto_delete = to_minute_range('9:00', '11:00')\n\np daily_time_chunks.reject{|times| strict_overlap?(to_minute_range(*times), to_delete)}\n# [[\"8:30\", \"9:00\"], [\"11:00\", \"11:30\"], [\"11:30\", \"12:00\"], [\"1:00\", \"1:30\"]]\n</code></pre>\n\n<p>With <code>'8:55', '11:05'</code>, it outputs:</p>\n\n<pre><code>[[\"11:30\", \"12:00\"], [\"1:00\", \"1:30\"]]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 5382, "user_id": 7671538, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3506350bc4dd02281ad7f99e8e84715c?s=128&d=identicon&r=PG&f=1", "display_name": "gwcodes", "link": "https://stackoverflow.com/users/7671538/gwcodes"}, "is_accepted": false, "score": 0, "last_activity_date": 1492016586, "creation_date": 1492016586, "answer_id": 43375592, "question_id": 43374702, "link": "https://stackoverflow.com/questions/43374702/can-i-delete-a-span-of-items-in-an-array/43375592#43375592", "title": "Can i delete a span of items in an array.?", "body": "<p>You could <a href=\"https://ruby-doc.org/core-2.4.1/Array.html#method-i-transpose\" rel=\"nofollow noreferrer\"><code>transpose</code></a> your nested array, find the index of the start and end elements, and then <a href=\"https://ruby-doc.org/core-2.4.1/Array.html#method-i-slice-21\" rel=\"nofollow noreferrer\"><code>slice!</code></a> out everything in that range. Like this:</p>\n\n<pre><code>def filter_out(chunks, start_time, end_time)\n  new_chunks = chunks.transpose\n\n  start_index, end_index = [start_time, end_time].map do |t|\n    new_chunks.shift.index(t)\n  end\n\n  chunks.slice!(start_index, end_index)\n  chunks\nend\n\nfilter_out(daily_time_chunks, \"9:00\", \"11:00\")\n#=&gt; [[\"8:30\", \"9:00\"], [\"11:00\", \"11:30\"], [\"11:30\", \"12:00\"], [\"1:00\", \"1:30\"]]\n</code></pre>\n\n<p>This assumes that your nested array is sorted, and that the time you are filtering on always matches the span times (e.g. if you need to filter everything between \"9:25\" and \"11:10\", then this approach won't work)</p>\n"}, {"tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": false, "score": 0, "last_activity_date": 1492028686, "creation_date": 1492028686, "answer_id": 43379014, "question_id": 43374702, "link": "https://stackoverflow.com/questions/43374702/can-i-delete-a-span-of-items-in-an-array/43379014#43379014", "title": "Can i delete a span of items in an array.?", "body": "<p>You could use Ruby's <a href=\"http://nithinbekal.com/posts/ruby-flip-flop/\" rel=\"nofollow noreferrer\">flip-flop</a> operator here.</p>\n\n<pre><code>chunks = [[ '8:30', '9:00'], [ '9:00', '9:30'], [ '9:30','10:00'], ['10:00','10:30'],\n          ['10:30','11:00'], ['11:00','11:30'], ['11:30','12:00'], [ '1:00', '1:30']]\n\nchunks.reject { |s,e| s=='9:00'..e=='11:00' ? true : false }\n  #=&gt; [[\"8:30\", \"9:00\"], [\"11:00\", \"11:30\"], [\"11:30\", \"12:00\"], [\"1:00\", \"1:30\"]] \n</code></pre>\n\n<p>Note that one cannot write</p>\n\n<pre><code>chunks.reject { |s,e| s=='9:00'..e=='11:00' }\n  #=&gt; ArgumentError: bad value for range\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 4021199, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YFY5D.jpg?s=128&g=1", "display_name": "wolverineandrew", "link": "https://stackoverflow.com/users/4021199/wolverineandrew"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 63, "favorite_count": 0, "answer_count": 4, "score": 0, "last_activity_date": 1492028686, "creation_date": 1492013710, "question_id": 43374702, "link": "https://stackoverflow.com/questions/43374702/can-i-delete-a-span-of-items-in-an-array", "title": "Can i delete a span of items in an array.?", "body": "<p>Say i have an array of times:</p>\n\n<pre><code>daily_time_chunks = [ ['8:30','9:00'], \n                ['9:00','9:30'], \n                ['9:30','10:00'], \n                ['10:00','10:30'], \n                ['10:30','11:00'], \n                ['11:00','11:30'], \n                ['11:30','12:00'], \n                ['1:00','1:30'] ]\n</code></pre>\n\n<p>Is there a way to delete spans in this array. If 9:00 matched my specification for a start time and 11:00 matched my other specification for an end time, can i delete the nested array starting with the 9:00, the nested array ending with 11:00 and all the nested arrays in between them?</p>\n"}, {"tags": ["ruby", "selenium", "webdriver", "double-click"], "comments": [{"owner": {"reputation": 67463, "user_id": 203130, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/1RE8c.jpg?s=128&g=1", "display_name": "coreyward", "link": "https://stackoverflow.com/users/203130/coreyward"}, "edited": false, "score": 0, "creation_date": 1492011205, "post_id": 43373844, "comment_id": 73810005, "body": "Saying something \u201cappears to not be working\u201d is not enough. Why doesn&#39;t the existing solution work?"}, {"owner": {"reputation": 1, "user_id": 7857411, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NExrR.jpg?s=128&g=1", "display_name": "Gabriel Klueh", "link": "https://stackoverflow.com/users/7857411/gabriel-klueh"}, "reply_to_user": {"reputation": 67463, "user_id": 203130, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/1RE8c.jpg?s=128&g=1", "display_name": "coreyward", "link": "https://stackoverflow.com/users/203130/coreyward"}, "edited": false, "score": 0, "creation_date": 1492011455, "post_id": 43373844, "comment_id": 73810206, "body": "Good question - that is what I am trying to determine. It appears I have followed the examples correctly but am receiving the error still. The existing solutions post says it worked, so I am trying to determine what may be wrong with my situation as it has been over a year since that post and things may have changed that I cannot pinpoint (versions/drivers/etc.)... I am a newbie to this as well."}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 7857411, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NExrR.jpg?s=128&g=1", "display_name": "Gabriel Klueh", "link": "https://stackoverflow.com/users/7857411/gabriel-klueh"}, "edited": false, "score": 0, "creation_date": 1492011992, "post_id": 43373947, "comment_id": 73810595, "body": "Thanks for the quick response here - when I try that I get the same error. <code>Error: TypeError: expected Selenium::WebDriver::Element, got &quot;nbviewer-zone-overlay-13B27E79C7BC32F1&quot;:String</code> I suspected it was not liking it as a <code>String</code> based on the error, but am not sure how to convert it to the <code>Selenium::WebDriver::Element</code> that it&#39;s looking for."}, {"owner": {"reputation": 1, "user_id": 7857411, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NExrR.jpg?s=128&g=1", "display_name": "Gabriel Klueh", "link": "https://stackoverflow.com/users/7857411/gabriel-klueh"}, "edited": false, "score": 0, "creation_date": 1492012308, "post_id": 43373947, "comment_id": 73810806, "body": "I also tried the first line of code without the <code>attribute</code> like this <code>@article_zone = @driver.find_element(:id, &quot;nbviewer-zone-overlay-13B27E79C7BC32F1&quot;)</code> but that assigns <code>@article_zone</code> as <code>#&lt;Selenium::WebDriver::Element:0x..f3c886a24 id=&quot;0.3165787053371305-3&quot;&gt;</code>. This doesn&#39;t throw an error - but also doesn&#39;t perform the double-click. It basically skips that step doing nothing."}, {"owner": {"reputation": 67463, "user_id": 203130, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/1RE8c.jpg?s=128&g=1", "display_name": "coreyward", "link": "https://stackoverflow.com/users/203130/coreyward"}, "reply_to_user": {"reputation": 1, "user_id": 7857411, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NExrR.jpg?s=128&g=1", "display_name": "Gabriel Klueh", "link": "https://stackoverflow.com/users/7857411/gabriel-klueh"}, "edited": false, "score": 0, "creation_date": 1492012884, "post_id": 43373947, "comment_id": 73811198, "body": "@GabrielKlueh Well that&#39;s the right object type, so that&#39;s what you want. You&#39;ve moved to the next stage of the process: figuring out why you&#39;re not getting the expected result from <code>double_click</code>. You can&#39;t just hand it garbage and expect it to start working. ;)"}, {"owner": {"reputation": 1, "user_id": 7857411, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NExrR.jpg?s=128&g=1", "display_name": "Gabriel Klueh", "link": "https://stackoverflow.com/users/7857411/gabriel-klueh"}, "edited": false, "score": 0, "creation_date": 1492013190, "post_id": 43373947, "comment_id": 73811416, "body": "Just to clarify, are you saying the right object type is the latter (2nd comment I posted)? (i.e. #&lt;Selenium::WebDriver::Element:0x..f3c886a24 id=&quot;0.3165787053371305-3&quot;&gt;)"}, {"owner": {"reputation": 67463, "user_id": 203130, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/1RE8c.jpg?s=128&g=1", "display_name": "coreyward", "link": "https://stackoverflow.com/users/203130/coreyward"}, "reply_to_user": {"reputation": 1, "user_id": 7857411, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NExrR.jpg?s=128&g=1", "display_name": "Gabriel Klueh", "link": "https://stackoverflow.com/users/7857411/gabriel-klueh"}, "edited": false, "score": 0, "creation_date": 1492031837, "post_id": 43373947, "comment_id": 73821703, "body": "@GabrielKlueh Yes."}], "tags": [], "owner": {"reputation": 67463, "user_id": 203130, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/1RE8c.jpg?s=128&g=1", "display_name": "coreyward", "link": "https://stackoverflow.com/users/203130/coreyward"}, "is_accepted": false, "score": 0, "last_activity_date": 1492011372, "creation_date": 1492011372, "answer_id": 43373947, "question_id": 43373844, "link": "https://stackoverflow.com/questions/43373844/ruby-webdriver-actionclass-double-click-not-working/43373947#43373947", "title": "Ruby Webdriver ActionClass double_click Not Working", "body": "<p>When you do this:</p>\n\n<pre><code>@driver.action.double_click(\"id=\" + @article_zone).perform\n</code></pre>\n\n<p>You call the <code>+</code> method on an instance of <code>String</code>. That is going to try to implicitly convert <code>@article_zone</code> into a string and append it to <code>\"id=\"</code>. That string is then being handed to the <code>double_click</code> method, which is expecting an instance of <code>Selenium::WebDriver::Element</code>.</p>\n\n<p>I suspect that if you remove <code>\"id=\" +</code> you would be okay:</p>\n\n<pre><code>@driver.action.double_click(@article_zone).perform\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 7857411, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NExrR.jpg?s=128&g=1", "display_name": "Gabriel Klueh", "link": "https://stackoverflow.com/users/7857411/gabriel-klueh"}, "is_accepted": true, "score": 0, "last_activity_date": 1494426399, "creation_date": 1494426399, "answer_id": 43895355, "question_id": 43373844, "link": "https://stackoverflow.com/questions/43373844/ruby-webdriver-actionclass-double-click-not-working/43895355#43895355", "title": "Ruby Webdriver ActionClass double_click Not Working", "body": "<p>The issue is because <code>double_click</code> <strong>by default tries to click in the middle of the element</strong>. When I inspect the element, the middle of it is hidden below the \"fold\". To get around this, I can move to the element with an offset (from top left) and perform a double click in place:</p>\n\n<pre><code>@driver.action.move_to(@article, 10, 10).double_click.perform\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 7857411, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NExrR.jpg?s=128&g=1", "display_name": "Gabriel Klueh", "link": "https://stackoverflow.com/users/7857411/gabriel-klueh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 215, "favorite_count": 0, "accepted_answer_id": 43895355, "answer_count": 2, "score": 0, "last_activity_date": 1494426399, "creation_date": 1492011052, "last_edit_date": 1495540021, "question_id": 43373844, "link": "https://stackoverflow.com/questions/43373844/ruby-webdriver-actionclass-double-click-not-working", "title": "Ruby Webdriver ActionClass double_click Not Working", "body": "<p>I found a similar topic <a href=\"https://stackoverflow.com/questions/16775467/how-to-double-click-on-a-cell-in-table-with-selenium-ruby-webdriver/16775560#16775560?newreg=f405fe29748c4e638b9dfcda9c2da735\">here</a> and followed the example, but the solution appears to not be working.</p>\n\n<p>I am trying to double click on an element using the documentation found <a href=\"http://www.rubydoc.info/gems/selenium-webdriver/Selenium/WebDriver/ActionBuilder#double_click-instance_method\" rel=\"nofollow noreferrer\">here</a>.</p>\n\n<p>I have the following code:</p>\n\n<pre><code>@article_zone = @driver.find_element(:id, \"nbviewer-zone-overlay-13B27E79C7BC32F1\").attribute(\"id\")\n</code></pre>\n\n<p>Which assigns <code>@article_zone = \"nbviewer-zone-overlay-13B27E79C7BC32F1\"</code></p>\n\n<p>I then have the next line of code:</p>\n\n<p><code>@driver.action.double_click(\"id=\" + @article_zone).perform</code></p>\n\n<p>But this line is throwing the following error:\n<code>Error: TypeError: expected Selenium::WebDriver::Element, got \"id=nbviewer-zone-overlay-13B27E79C7BC32F1\":String</code></p>\n\n<p>The element <code>id=nbviewer-zone-overlay-13B27E79C7BC32F1</code> is what I am trying to double click. I am at a loss as to why I am receiving this error.</p>\n\n<p>Any assistance is greatly appreciated. Thanks for looking!</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "sidekiq"], "comments": [{"owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "edited": false, "score": 0, "creation_date": 1492010200, "post_id": 43373389, "comment_id": 73809206, "body": "What is wrong with translating that times into UTC?"}, {"owner": {"reputation": 167, "user_id": 4027842, "user_type": "registered", "accept_rate": 40, "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Chad Taylor", "link": "https://stackoverflow.com/users/4027842/chad-taylor"}, "reply_to_user": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "edited": false, "score": 0, "creation_date": 1492011038, "post_id": 43373389, "comment_id": 73809894, "body": "We record all times in UTC in the database. Maybe my question is not clear... we have users across the world and we want to send out a &quot;daily digest&quot; at 8pm in each user&#39;s timezone. Does that make sense? @spickermann"}, {"owner": {"reputation": 67463, "user_id": 203130, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/1RE8c.jpg?s=128&g=1", "display_name": "coreyward", "link": "https://stackoverflow.com/users/203130/coreyward"}, "edited": false, "score": 0, "creation_date": 1492011486, "post_id": 43373389, "comment_id": 73810235, "body": "<a href=\"http://sidekiq.org/products/enterprise\" rel=\"nofollow noreferrer\">Sidekiq Enterprise</a> can do this, but the free and Pro versions do not include this functionality."}, {"owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "edited": false, "score": 0, "creation_date": 1492011566, "post_id": 43373389, "comment_id": 73810287, "body": "And you know your users&#39; timezone? How is that information stored (by timezone abbreviations (which might be ambiguous), offset, tz)?"}, {"owner": {"reputation": 167, "user_id": 4027842, "user_type": "registered", "accept_rate": 40, "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Chad Taylor", "link": "https://stackoverflow.com/users/4027842/chad-taylor"}, "reply_to_user": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "edited": false, "score": 0, "creation_date": 1492028284, "post_id": 43373389, "comment_id": 73819892, "body": "Yea, we have the offset, tz, and even the lat/lon coordinates. I see that you just provided an answer below that looks like a very promising solution. Many thanks, @spickermann! Will up it."}], "answers": [{"comments": [{"owner": {"reputation": 167, "user_id": 4027842, "user_type": "registered", "accept_rate": 40, "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Chad Taylor", "link": "https://stackoverflow.com/users/4027842/chad-taylor"}, "edited": false, "score": 0, "creation_date": 1492010869, "post_id": 43373616, "comment_id": 73809748, "body": "Our server is set up to UTC -- but we want to run the SAME recurring task (eg: <code>MyModel.task_1</code>) in EVERY timezone at a specific time (eg: 8:00 PM). Is this possible with the <code>whenever</code> gem?"}, {"owner": {"reputation": 14010, "user_id": 3109182, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/a4b305f0077055b4fdcf715067775d5a?s=128&d=identicon&r=PG", "display_name": "Anthony", "link": "https://stackoverflow.com/users/3109182/anthony"}, "reply_to_user": {"reputation": 167, "user_id": 4027842, "user_type": "registered", "accept_rate": 40, "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Chad Taylor", "link": "https://stackoverflow.com/users/4027842/chad-taylor"}, "edited": false, "score": 0, "creation_date": 1492011756, "post_id": 43373616, "comment_id": 73810434, "body": "Yes, you&#39;d just use cron syntax."}, {"owner": {"reputation": 14010, "user_id": 3109182, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/a4b305f0077055b4fdcf715067775d5a?s=128&d=identicon&r=PG", "display_name": "Anthony", "link": "https://stackoverflow.com/users/3109182/anthony"}, "reply_to_user": {"reputation": 167, "user_id": 4027842, "user_type": "registered", "accept_rate": 40, "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Chad Taylor", "link": "https://stackoverflow.com/users/4027842/chad-taylor"}, "edited": false, "score": 0, "creation_date": 1492018949, "post_id": 43373616, "comment_id": 73814671, "body": "Updated my answer @ChadTaylor"}], "tags": [], "owner": {"reputation": 14010, "user_id": 3109182, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/a4b305f0077055b4fdcf715067775d5a?s=128&d=identicon&r=PG", "display_name": "Anthony", "link": "https://stackoverflow.com/users/3109182/anthony"}, "is_accepted": false, "score": 0, "last_activity_date": 1492018929, "last_edit_date": 1492018929, "creation_date": 1492010365, "answer_id": 43373616, "question_id": 43373389, "link": "https://stackoverflow.com/questions/43373389/sidekiq-to-execute-at-specific-time-in-every-timezones/43373616#43373616", "title": "Sidekiq to execute at specific time in every timezones", "body": "<p>Sidekiq has no scheduling mechanism for your use case of 'every day'.  You need a cron scheduler like <a href=\"https://github.com/javan/whenever\" rel=\"nofollow noreferrer\">whenever</a>.  </p>\n\n<p>Assuming your server is configured to UTC, you'd just create your schedule:</p>\n\n<pre><code># EST 8pm\nevery 1.day, :at =&gt; '1:00 am' do\n  runner \"MyModel.task_to_run_at_1_am_UTC\"\nend\n# CST 8pm\nevery 1.day, :at =&gt; '2:00 am' do\n  runner \"MyOtherModel.task_to_run_at_2_am_UTC\"\nend\n</code></pre>\n\n<p>To do it in one line:</p>\n\n<pre><code>every '* 6,7,8,9,10 1 * *' do\n  runner \"MyOtherModel.task_to_run_at_2_am_UTC\"\nend\n</code></pre>\n\n<p>Take a look at how <a href=\"https://en.wikipedia.org/wiki/Cron\" rel=\"nofollow noreferrer\">cron syntax</a> is formulated.</p>\n"}, {"tags": [], "owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "is_accepted": true, "score": 8, "last_activity_date": 1580412332, "last_edit_date": 1580412332, "creation_date": 1492013019, "answer_id": 43374495, "question_id": 43373389, "link": "https://stackoverflow.com/questions/43373389/sidekiq-to-execute-at-specific-time-in-every-timezones/43374495#43374495", "title": "Sidekiq to execute at specific time in every timezones", "body": "<p>I would just run the same job at the start of <em>each</em> hour. You might want to use cron to run the job each hour or have a look at this list on how to create <a href=\"https://github.com/mperham/sidekiq/wiki/Related-Projects#recurring-jobs\" rel=\"nofollow noreferrer\">recurring jobs in Sidekiq</a>.</p>\n\n<p>The first step within the job is to figure out all time zones in which it is <code>8AM</code> right now:</p>\n\n<pre><code>8am_time_zones = ActiveSupport::TimeZone.all\n                                        .select { |tz| tz.now.hour == 8 }\n                                        .map { |tz| tz.tzinfo.name }\n#=&gt; [\"America/Los_Angeles\", \"America/Tijuana\", \"America/Phoenix\"]\n</code></pre>\n\n<p>With this list you can easily load users from your database who live in one of the time zones (assuming you stored the users' time zone in this format) and send them the email:</p>\n\n<pre><code>User.where(time_zone: 8am_time_zones).find_each do |user|\n  # email_newsletter(recipient: user)\nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 691, "user_id": 2073339, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d7c75b6a20f47e2d142159bd3bbf089?s=128&d=identicon&r=PG", "display_name": "Khaled AbuShqear", "link": "https://stackoverflow.com/users/2073339/khaled-abushqear"}, "is_accepted": false, "score": 0, "last_activity_date": 1613746088, "creation_date": 1613746088, "answer_id": 66279755, "question_id": 43373389, "link": "https://stackoverflow.com/questions/43373389/sidekiq-to-execute-at-specific-time-in-every-timezones/66279755#66279755", "title": "Sidekiq to execute at specific time in every timezones", "body": "<p>Create this job and execute every 1 hour and 1 minute</p>\n<pre class=\"lang-rb prettyprint-override\"><code>class ScheduleBasedOnTimeZoneJob &lt; ApplicationJob\n  queue_as :default\n\n  def perform\n    # only execute in the beggening if the day\n    return unless now.to_i - now.beginning_of_day.to_i &lt; 300\n\n    time_zones = [&quot;America/Los_Angeles&quot;, &quot;America/Tijuana&quot;, &quot;America/Phoenix&quot;]\n    time_zones.each do |time_zone|\n      now = Time.now.in_time_zone(time_zone)\n\n      # Schedule job at 08:00 AM based on the provided timezone\n      schedule_at = now.change(hour: 8, min: 0)\n      MyTzBasedJob.set(wait_until: schedule_at).perform_later(time_zone: time_zone)\n    end\n  end\nend\n</code></pre>\n"}], "owner": {"reputation": 167, "user_id": 4027842, "user_type": "registered", "accept_rate": 40, "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Chad Taylor", "link": "https://stackoverflow.com/users/4027842/chad-taylor"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2511, "favorite_count": 2, "accepted_answer_id": 43374495, "answer_count": 3, "score": 3, "last_activity_date": 1613746088, "creation_date": 1492009809, "question_id": 43373389, "link": "https://stackoverflow.com/questions/43373389/sidekiq-to-execute-at-specific-time-in-every-timezones", "title": "Sidekiq to execute at specific time in every timezones", "body": "<p>Using Sidekiq, what are the strategy to have it execute at a particular time in every time zone? </p>\n\n<p>For example, I need Sidekiq to perform a task every day at the following time and time zones across the world:</p>\n\n<p><code>\n...\n8:00 PM EST\n8:00 PM CST\n8:00 PM MST\n8:00 PM PST\n...\n</code></p>\n"}, {"tags": ["mysql", "ruby", "activerecord"], "comments": [{"owner": {"reputation": 14010, "user_id": 3109182, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/a4b305f0077055b4fdcf715067775d5a?s=128&d=identicon&r=PG", "display_name": "Anthony", "link": "https://stackoverflow.com/users/3109182/anthony"}, "edited": false, "score": 2, "creation_date": 1492009832, "post_id": 43372421, "comment_id": 73808914, "body": "don&#39;t put passwords in a SO question.  Also are you using the mysql adapter or mysql2?  mysql ruby gem hasn&#39;t been updated in 4yrs and is deprecated."}, {"owner": {"reputation": 41, "user_id": 2603380, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9y5Ub.jpg?s=128&g=1", "display_name": "nahurmf", "link": "https://stackoverflow.com/users/2603380/nahurmf"}, "reply_to_user": {"reputation": 14010, "user_id": 3109182, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/a4b305f0077055b4fdcf715067775d5a?s=128&d=identicon&r=PG", "display_name": "Anthony", "link": "https://stackoverflow.com/users/3109182/anthony"}, "edited": false, "score": 0, "creation_date": 1492014917, "post_id": 43372421, "comment_id": 73812457, "body": "Changing to mysql2 fixed the problem. It took me a while though to figure out what version of mysql2 is compatible with my version of activerecord. Thanks."}], "owner": {"reputation": 41, "user_id": 2603380, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9y5Ub.jpg?s=128&g=1", "display_name": "nahurmf", "link": "https://stackoverflow.com/users/2603380/nahurmf"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 18, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1492010872, "creation_date": 1492007206, "last_edit_date": 1492010872, "question_id": 43372421, "link": "https://stackoverflow.com/questions/43372421/varchar-type-being-converted-incorrectly-to-activerecordtypevalue-or-activer", "title": "VARCHAR type being converted incorrectly to ActiveRecord::Type::Value or ActiveRecord::Type::Decimal with mysql adapter", "body": "<p>Here is what I do to end up with the wrong ActiveRecord types.</p>\n\n<p>First, the schema of the table:</p>\n\n<pre><code>Field       | Type\n------------------------------\nid          | int(10) unsigned\nuser_name   | varchar(255)\n</code></pre>\n\n<p>Here is the code I tried in irb:</p>\n\n<pre><code>require 'active_record'\nActiveRecord::Base.establish_connection(adapter: 'mysql', host: 'mrom.akamai.com', username: 'SOME_USER', password: 'SOME_PASSWORD', database: 'mrom_v3')\nc=ActiveRecord::Base.connection\nr = c.exec_query(\"select id, user_name, 'fixed string' value from user limit 2\")\nt = r.column_types\n\n=&gt; {\"id\"=&gt;#&lt;ActiveRecord::Type::Integer:0x007fc144a5ed00 @precision=nil, @scale=nil, @limit=nil, @range=-2147483648...2147483648&gt;, \"user_name\"=&gt;#&lt;ActiveRecord::Type::Value:0x007fc144113f20 @precision=nil, @scale=nil, @limit=nil&gt;, \"value\"=&gt;#&lt;ActiveRecord::Type::Decimal:0x007fc144113e30 @precision=nil, @scale=nil, @limit=nil&gt;} \n</code></pre>\n\n<p>Notice the ::Value and ::Decimal types for the user_name and value columns. I was expecting String.</p>\n\n<p>How can I fix this?</p>\n"}, {"tags": ["ruby", "regex"], "answers": [{"tags": [], "owner": {"reputation": 481662, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "is_accepted": false, "score": 4, "last_activity_date": 1492007426, "creation_date": 1492007426, "answer_id": 43372502, "question_id": 43372399, "link": "https://stackoverflow.com/questions/43372399/inserting-space-between-a-letter-and-a-number-in-ruby/43372502#43372502", "title": "Inserting space between a letter and a number in Ruby", "body": "<p>Use lookarounds and replace with a single space:</p>\n\n<pre><code>.gsub(/(?&lt;=\\p{L})(?=\\d)|(?&lt;=\\d)(?=\\p{L})/, ' ')\n</code></pre>\n\n<p>The <code>(?&lt;=\\p{L})(?=\\d)|(?&lt;=\\d)(?=\\p{L})</code> regex will match 2 locations: </p>\n\n<ul>\n<li><code>(?&lt;=\\p{L})(?=\\d)</code> - location between a letter and a digit</li>\n<li><code>|</code> - or</li>\n<li><code>(?&lt;=\\d)(?=\\p{L})</code> - location between a digit and a letter.</li>\n</ul>\n\n<p>So, the space will be just \"inserted\" in between the digit or letter.</p>\n"}, {"comments": [{"owner": {"reputation": 83048, "user_id": 2255089, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZNAsT.jpg?s=128&g=1", "display_name": "Casimir et Hippolyte", "link": "https://stackoverflow.com/users/2255089/casimir-et-hippolyte"}, "edited": false, "score": 1, "creation_date": 1492009148, "post_id": 43372507, "comment_id": 73808303, "body": "Why not split like this: <code>&quot;moscow city46 d&quot;.split(&#47; |(\\d+)&#47;).map(&amp;:capitalize).join(&#39; &#39;)</code> or something similar."}, {"owner": {"reputation": 33085, "user_id": 2423164, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Nxbnp.jpg?s=128&g=1", "display_name": "ndnenkov", "link": "https://stackoverflow.com/users/2423164/ndnenkov"}, "reply_to_user": {"reputation": 83048, "user_id": 2255089, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZNAsT.jpg?s=128&g=1", "display_name": "Casimir et Hippolyte", "link": "https://stackoverflow.com/users/2255089/casimir-et-hippolyte"}, "edited": false, "score": 0, "creation_date": 1492009345, "post_id": 43372507, "comment_id": 73808484, "body": "@CasimiretHippolyte I find it easier to reason that my tokens are either digits or non-digits. Also you have to be mindful of why you needed to add it a group and so on."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "reply_to_user": {"reputation": 83048, "user_id": 2255089, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZNAsT.jpg?s=128&g=1", "display_name": "Casimir et Hippolyte", "link": "https://stackoverflow.com/users/2255089/casimir-et-hippolyte"}, "edited": false, "score": 0, "creation_date": 1492062416, "post_id": 43372507, "comment_id": 73830405, "body": "\u2705, <code>&quot;New york city23 b\\nMiami 355c&quot;.scan....join(&#39; &#39;) #=&gt; &quot;New York City 23 B Miami 355 C&quot;</code>. This is, the newline is missing. Nor is @Casimir&#39;s suggestion not quite right. Play with both and I&#39;m sure you&#39;ll find a fix."}, {"owner": {"reputation": 33085, "user_id": 2423164, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Nxbnp.jpg?s=128&g=1", "display_name": "ndnenkov", "link": "https://stackoverflow.com/users/2423164/ndnenkov"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1492063112, "post_id": 43372507, "comment_id": 73830671, "body": "@CarySwoveland, I&#39;ll leave it to the reader if it&#39;s a situation they are concerned with."}], "tags": [], "owner": {"reputation": 33085, "user_id": 2423164, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Nxbnp.jpg?s=128&g=1", "display_name": "ndnenkov", "link": "https://stackoverflow.com/users/2423164/ndnenkov"}, "is_accepted": false, "score": 2, "last_activity_date": 1492007438, "creation_date": 1492007438, "answer_id": 43372507, "question_id": 43372399, "link": "https://stackoverflow.com/questions/43372399/inserting-space-between-a-letter-and-a-number-in-ruby/43372507#43372507", "title": "Inserting space between a letter and a number in Ruby", "body": "<pre><code>'New york city23 b'.scan(/\\D+|\\d+/).flat_map(&amp;:split).map(&amp;:capitalize).join(' ')\n  # =&gt; \"New York City 23 B\"\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "edited": false, "score": 0, "creation_date": 1492008017, "post_id": 43372670, "comment_id": 73807343, "body": "It&#39;s actually much cleverer than the other solutions IMHO. Note: <code>titleize</code> is an ActiveSupport method."}], "tags": [], "owner": {"reputation": 91121, "user_id": 179125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5594142dcc49a24b1902ec8059181f8d?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan Running", "link": "https://stackoverflow.com/users/179125/jordan-running"}, "is_accepted": true, "score": 5, "last_activity_date": 1492008241, "last_edit_date": 1492008241, "creation_date": 1492007846, "answer_id": 43372670, "question_id": 43372399, "link": "https://stackoverflow.com/questions/43372399/inserting-space-between-a-letter-and-a-number-in-ruby/43372670#43372670", "title": "Inserting space between a letter and a number in Ruby", "body": "<p>Since you used <code>titleize</code> I'm assuming you don't mind using other ActiveSupport methods. It's not as \"clever\" as some, but <a href=\"http://api.rubyonrails.org/classes/String.html#method-i-squish\" rel=\"nofollow noreferrer\"><code>String#squish</code></a>, which replaces runs of consecutive whitespace with a single space, makes for a pretty simple solution:</p>\n\n<pre><code>str.gsub(/\\d+/, ' \\0 ').squish.titleize\n</code></pre>\n\n<p>Ruby (sans Rails) has a similar <a href=\"http://ruby-doc.org/core-2.4.0/String.html#method-i-squeeze\" rel=\"nofollow noreferrer\"><code>String#squeeze</code></a> method, but unlike <code>squish</code> it doesn't trim leading and trailing whitespace, so it has to be combined with <a href=\"http://ruby-doc.org/core-2.4.0/String.html#method-i-strip\" rel=\"nofollow noreferrer\"><code>String#strip</code></a>.</p>\n"}, {"tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": false, "score": 1, "last_activity_date": 1492043176, "last_edit_date": 1492043176, "creation_date": 1492031913, "answer_id": 43379810, "question_id": 43372399, "link": "https://stackoverflow.com/questions/43372399/inserting-space-between-a-letter-and-a-number-in-ruby/43379810#43379810", "title": "Inserting space between a letter and a number in Ruby", "body": "<p>This is a non-regex pure-Ruby solution.</p>\n\n<pre><code>cities =&lt;&lt;-_\nNew york city23 b\nMiami 355c\n_\n\ncities.each_char.each_cons(2).map do |a,b|\n  str = a+b\n  r = /[[:alpha:]][[:digit:]]/\n  str =~ r || str.reverse =~ r ? \"#{a} \" : a\nend.join.split.map(&amp;:capitalize).join(' ')\n  #=&gt; \"New York City 23 B Miami 355 C\"\n</code></pre>\n"}], "owner": {"reputation": 6105, "user_id": 1700874, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/ad36477949cfd7db659cd4420537911c?s=128&d=identicon&r=PG&f=1", "display_name": "The Whiz of Oz", "link": "https://stackoverflow.com/users/1700874/the-whiz-of-oz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1012, "favorite_count": 1, "accepted_answer_id": 43372670, "answer_count": 4, "score": 1, "last_activity_date": 1492043176, "creation_date": 1492007159, "question_id": 43372399, "link": "https://stackoverflow.com/questions/43372399/inserting-space-between-a-letter-and-a-number-in-ruby", "title": "Inserting space between a letter and a number in Ruby", "body": "<p>I am working on formatting a list of addresses like:</p>\n\n<pre><code>New york city23 b\nMiami 355c\n</code></pre>\n\n<p>I need them to look like</p>\n\n<pre><code>New York City 23 B\nMiami 355 C\n</code></pre>\n\n<p>The problem is adding space before and after the letter+number combination. I came up with the following regex to highlight the troubled areas: </p>\n\n<pre><code>/\\p{L}\\d|\\d\\p{L}/\n</code></pre>\n\n<p>But am missing the logic to actually put a space between those. Right now the code looks like</p>\n\n<pre><code>\"moscow city46 d\".titleize.gsub(/\\p{L}\\d|\\d\\p{L}/, ' \\0')\n# titleize is a Rails method\n</code></pre>\n\n<p>which outputs </p>\n\n<pre><code>Moscow Cit y46 D\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 2546, "user_id": 2603130, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/60f46755895fd7c8bfa4f39d527ba9a8?s=128&d=identicon&r=PG", "display_name": "radubogdan", "link": "https://stackoverflow.com/users/2603130/radubogdan"}, "edited": false, "score": 1, "creation_date": 1492004166, "post_id": 43371108, "comment_id": 73804079, "body": "Possible duplicate of <a href=\"http://stackoverflow.com/questions/7930370/ruby-code-to-get-the-date-of-next-monday-or-any-day-of-the-week\">Ruby code to get the date of next Monday (or any day of the week)</a>"}, {"owner": {"reputation": 2578, "user_id": 4383667, "user_type": "registered", "accept_rate": 86, "profile_image": "https://lh3.googleusercontent.com/-0D7SldkahZc/AAAAAAAAAAI/AAAAAAAAAFk/V8nUZfLVtyk/photo.jpg?sz=128", "display_name": "AnthonyGalli.com", "link": "https://stackoverflow.com/users/4383667/anthonygalli-com"}, "reply_to_user": {"reputation": 2546, "user_id": 2603130, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/60f46755895fd7c8bfa4f39d527ba9a8?s=128&d=identicon&r=PG", "display_name": "radubogdan", "link": "https://stackoverflow.com/users/2603130/radubogdan"}, "edited": false, "score": 0, "creation_date": 1492004437, "post_id": 43371108, "comment_id": 73804319, "body": "I tried those answers. I was unable to render the appropriate days in the view @radubogdan"}, {"owner": {"reputation": 2546, "user_id": 2603130, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/60f46755895fd7c8bfa4f39d527ba9a8?s=128&d=identicon&r=PG", "display_name": "radubogdan", "link": "https://stackoverflow.com/users/2603130/radubogdan"}, "edited": false, "score": 1, "creation_date": 1492004676, "post_id": 43371108, "comment_id": 73804499, "body": "Ok :) Looks like there is a good answer suitable for your question. Cheers"}, {"owner": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "reply_to_user": {"reputation": 2546, "user_id": 2603130, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/60f46755895fd7c8bfa4f39d527ba9a8?s=128&d=identicon&r=PG", "display_name": "radubogdan", "link": "https://stackoverflow.com/users/2603130/radubogdan"}, "edited": false, "score": 0, "creation_date": 1492009182, "post_id": 43371108, "comment_id": 73808327, "body": "@radubogdan: It is not a duplicate. The linked answer gives you the next thursday (tomorrow), not thursday of next week (in 8 days)."}], "answers": [{"comments": [{"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1492004868, "post_id": 43371303, "comment_id": 73804668, "body": "Alternatively <code>Date.current.next_week + n</code> if you prefer a numerical offset."}], "tags": [], "owner": {"reputation": 5382, "user_id": 7671538, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3506350bc4dd02281ad7f99e8e84715c?s=128&d=identicon&r=PG&f=1", "display_name": "gwcodes", "link": "https://stackoverflow.com/users/7671538/gwcodes"}, "is_accepted": true, "score": 3, "last_activity_date": 1492004532, "creation_date": 1492004532, "answer_id": 43371303, "question_id": 43371108, "link": "https://stackoverflow.com/questions/43371108/how-to-get-day-of-the-week-next-week/43371303#43371303", "title": "How to get day of the week next week?", "body": "<p>Your syntax for <a href=\"https://apidock.com/rails/DateAndTime/Calculations/next_week\" rel=\"nofollow noreferrer\"><code>next_week</code></a> needs tweaking:</p>\n\n<pre><code># Works\n&lt;%= Date.current.next_week(:tuesday) %&gt;\n</code></pre>\n\n<p>To understand why your original approach doesn't work: <code>monday</code> and <code>sunday</code> just happen to be defined on <a href=\"http://api.rubyonrails.org/classes/DateAndTime/Calculations.html\" rel=\"nofollow noreferrer\">DateAndTime::Calculations</a>, but the other days of the week are not.</p>\n"}, {"tags": [], "owner": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "is_accepted": false, "score": 1, "last_activity_date": 1492010465, "creation_date": 1492010465, "answer_id": 43373645, "question_id": 43371108, "link": "https://stackoverflow.com/questions/43371108/how-to-get-day-of-the-week-next-week/43373645#43373645", "title": "How to get day of the week next week?", "body": "<p>If you ever need it in plain Ruby, here's a simple way to get it:</p>\n\n<ul>\n<li><code>date</code> minus <a href=\"https://ruby-doc.org/stdlib-2.4.1/libdoc/date/rdoc/Date.html#method-i-cwday\" rel=\"nofollow noreferrer\"><code>cwday</code></a> (day of calendar week) gives you \"last sunday\"</li>\n<li>\"Last sunday + 8\" gives you \"next monday\".</li>\n</ul>\n\n<hr>\n\n<pre><code>require 'date'\n\ndef next_week(date, day = :monday)\n  days = %w(monday tuesday wednesday thursday friday saturday sunday)\n  date - date.cwday + 8 + days.index(day.to_s.downcase).to_i\nend\n\nputs next_week(Date.today)\n# 2017-04-17\nputs next_week(Date.today, :friday)\n# 2017-04-21\nputs next_week(Date.new(2017,4,16))\n# 2017-04-17\nputs next_week(Date.new(2017,4,17))\n# 2017-04-24\n</code></pre>\n\n<p>For your question, you could use:</p>\n\n<pre><code>next_monday = next_week(Date.today)\nputs working_days_next_week = Array.new(5){ |i| next_monday + i }\n# 2017-04-17\n# 2017-04-18\n# 2017-04-19\n# 2017-04-20\n# 2017-04-21\n</code></pre>\n"}], "owner": {"reputation": 2578, "user_id": 4383667, "user_type": "registered", "accept_rate": 86, "profile_image": "https://lh3.googleusercontent.com/-0D7SldkahZc/AAAAAAAAAAI/AAAAAAAAAFk/V8nUZfLVtyk/photo.jpg?sz=128", "display_name": "AnthonyGalli.com", "link": "https://stackoverflow.com/users/4383667/anthonygalli-com"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 891, "favorite_count": 0, "accepted_answer_id": 43371303, "answer_count": 2, "score": 1, "last_activity_date": 1492010465, "creation_date": 1492004041, "last_edit_date": 1492004495, "question_id": 43371108, "link": "https://stackoverflow.com/questions/43371108/how-to-get-day-of-the-week-next-week", "title": "How to get day of the week next week?", "body": "<p>I tried something like...</p>\n\n<pre><code>&lt;%= Date.current.next_week.monday %&gt;\n&lt;%= Date.current.next_week.tuesday %&gt;\n&lt;%= Date.current.next_week.wednesday %&gt;\n&lt;%= Date.current.next_week.thursday %&gt;\n&lt;%= Date.current.next_week.friday %&gt;\n</code></pre>\n\n<p>Getting error: <code>ActionView::Template::Error (undefined method 'tuesday' for Mon, 17 Apr 2017:Date):</code></p>\n\n<p>So as of today's date the dates would be...</p>\n\n<pre><code>Apr 17\nApr 18\nApr 19\nApr 20\nApr 21\n</code></pre>\n\n<p>--</p>\n\n<p>Not duplicate (I don't think). I tried those answers. I was unable to render the appropriate days in the view.</p>\n"}, {"tags": ["ruby", "automation", "chef-infra"], "comments": [{"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 1, "creation_date": 1492003749, "post_id": 43370790, "comment_id": 73803684, "body": "What have you tried? What is the code you are having trouble with? What is the problem with your code? Do you get an error? If yes, what is the precise error you are getting? Does the actual result differ from the expected result? If yes, what is the result you are expecting, why are you expecting that result, what is the actual result and how do they differ? Does the observed behavior of the code differ from the intended behavior? If yes, what is the intended behavior and why, what is the behavior you are seeing, and how do they differ? What is the specification for the intended behavior?"}, {"owner": {"reputation": 9, "user_id": 4775767, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-KnpM_-3wczo/AAAAAAAAAAI/AAAAAAAAAEA/vVA9mi_68ig/photo.jpg?sz=128", "display_name": "saravana kumar", "link": "https://stackoverflow.com/users/4775767/saravana-kumar"}, "reply_to_user": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1492005239, "post_id": 43370790, "comment_id": 73804959, "body": "my query i need to remove the &quot;\\t\\t\\t :&quot; on the array indexes"}], "answers": [{"tags": [], "owner": {"reputation": 3320, "user_id": 4950680, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/C8cEh.jpg?s=128&g=1", "display_name": "Martin Zinovsky", "link": "https://stackoverflow.com/users/4950680/martin-zinovsky"}, "is_accepted": false, "score": 0, "last_activity_date": 1492012744, "creation_date": 1492012744, "answer_id": 43374400, "question_id": 43370790, "link": "https://stackoverflow.com/questions/43370790/ruby-chef-os-related/43374400#43374400", "title": "Ruby chef os related", "body": "<p>Use <a href=\"http://ruby-doc.org/core-2.4.1/Array.html#method-i-map\" rel=\"nofollow noreferrer\">Array#map</a> and <a href=\"http://ruby-doc.org/core-2.4.1/String.html#method-i-gsub\" rel=\"nofollow noreferrer\">String#gsub</a>.</p>\n\n<p>So the code will be:</p>\n\n<p><code>command(\"chage -l root\").stdout.split(\"\\n\").flatten{|x| x.strip || x}.map{|x| x.gsub(/\\t/, '')}</code></p>\n"}], "owner": {"reputation": 9, "user_id": 4775767, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-KnpM_-3wczo/AAAAAAAAAAI/AAAAAAAAAEA/vVA9mi_68ig/photo.jpg?sz=128", "display_name": "saravana kumar", "link": "https://stackoverflow.com/users/4775767/saravana-kumar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 31, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1492027452, "creation_date": 1492003336, "last_edit_date": 1492027452, "question_id": 43370790, "link": "https://stackoverflow.com/questions/43370790/ruby-chef-os-related", "title": "Ruby chef os related", "body": "<p>I need to remove the tab space from  the array and compare the values with one array value with a string.</p>\n\n<pre><code>inspec&gt; command(\"chage -l root\").stdout.split(\"\\n\").flatten{|x| x.strip || x}\n=&gt; [\"Last password change\\t\\t\\t\\t\\t: Feb 27, 2017\",\n \"Password expires\\t\\t\\t\\t\\t: May 28, 2017\",\n \"Password inactive\\t\\t\\t\\t\\t: Apr 20, 2067\",\n \"Account expires\\t\\t\\t\\t\\t\\t: Nov 27, 2019\",\n \"Minimum number of days between password change\\t\\t: 0\",\n \"Maximum number of days between password change\\t\\t: 90\",\n \"Number of days of warning before password expires\\t: 7\"]\ninspec&gt; \n</code></pre>\n"}, {"tags": ["ruby"], "answers": [{"comments": [{"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 3, "creation_date": 1492003698, "post_id": 43370785, "comment_id": 73803645, "body": "<code>%</code> also supports named placeholders: <code>&#39;something_%{environment}&#39; % {environment: &#39;test&#39;}</code>"}, {"owner": {"reputation": 83, "user_id": 4075901, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e2b0e986d604df588d157c99e687b4f1?s=128&d=identicon&r=PG&f=1", "display_name": "et071385", "link": "https://stackoverflow.com/users/4075901/et071385"}, "edited": false, "score": 0, "creation_date": 1492018640, "post_id": 43370785, "comment_id": 73814508, "body": "Named templates is exactly what I was looking for.  Didn&#39;t know I could use names with %.  Stefan if you put a new answer in I&#39;ll mark as accepted answer."}], "tags": [], "owner": {"reputation": 497, "user_id": 3979725, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mj52I.jpg?s=128&g=1", "display_name": "David Lilue", "link": "https://stackoverflow.com/users/3979725/david-lilue"}, "is_accepted": false, "score": 2, "last_activity_date": 1492003330, "creation_date": 1492003330, "answer_id": 43370785, "question_id": 43370683, "link": "https://stackoverflow.com/questions/43370683/ruby-evaluate-string-placeholder-in-variable-at-runtime/43370785#43370785", "title": "Ruby - evaluate string placeholder in variable at runtime", "body": "<p>Use templates with <code>%</code>:</p>\n\n<pre><code>template = \"something_%s\"\n#=&gt; \"something_%s\"\nx = template % [\"test\"]\n#=&gt; \"something_test\"\n</code></pre>\n"}], "owner": {"reputation": 83, "user_id": 4075901, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e2b0e986d604df588d157c99e687b4f1?s=128&d=identicon&r=PG&f=1", "display_name": "et071385", "link": "https://stackoverflow.com/users/4075901/et071385"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 689, "favorite_count": 0, "closed_date": 1492003863, "answer_count": 1, "score": 1, "last_activity_date": 1492018767, "creation_date": 1492003047, "last_edit_date": 1492018767, "question_id": 43370683, "link": "https://stackoverflow.com/questions/43370683/ruby-evaluate-string-placeholder-in-variable-at-runtime", "closed_reason": "Duplicate", "title": "Ruby - evaluate string placeholder in variable at runtime", "body": "<p>I have a string within a variable that contains a placeholder.  So quite literally I have this:</p>\n\n<pre><code>x = \"something_\\#{environment}\"\n</code></pre>\n\n<p>I want to perform placeholder substitution of x at runtime with a value of environment that isn't available at the point x is defined.  I ultimately want to end up with:</p>\n\n<pre><code>y = \"something_test\"\n</code></pre>\n\n<p>Is there any way to accomplish this in Ruby?</p>\n\n<p>Edit 1: this isn't solved using eval which is dead.  Hence the linked duplicate doesn't address my question.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "heroku", "nokogiri"], "comments": [{"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1492037347, "post_id": 43370624, "comment_id": 73823806, "body": "Your code isn&#39;t optimal, but nothing stands out that would cause it to run that much more slowly. I suggest the problem is your environment on Heroku. Please read &quot;<a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>&quot; and the linked page. You&#39;re asking us to guess what you&#39;re parsing, which could directly affect the speed of processing. Using a bare <code>rescue</code> isn&#39;t good practice, but again that shouldn&#39;t affect the speed. (Output the message of the <code>rescue</code> to confirm that no exception is being ignored.)"}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1492106700, "post_id": 43370624, "comment_id": 73858594, "body": "Note also, Nokogiri will run the same speed in either location, but <code>open</code> might not. <code>open</code> isn&#39;t part of Nokogiri, it&#39;s only handing off a file-handle that Nokogiri reads to get the content of the page. If that filestream takes a while to open or is slowly feeding data it&#39;ll take a while for Nokogiri to be able to begin processing, but at no point is Nokogiri responsible for that delay."}], "answers": [{"comments": [{"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1492106865, "post_id": 43371022, "comment_id": 73858675, "body": "While this cleans up the parsing a bit it won&#39;t affect the run-time speed of the code enough to fix a 30 second delta."}], "tags": [], "owner": {"reputation": 199, "user_id": 7853452, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-spCZZ8oWRRU/AAAAAAAAAAI/AAAAAAAAAiQ/BiYJ549C63A/photo.jpg?sz=128", "display_name": "Dori Aviram", "link": "https://stackoverflow.com/users/7853452/dori-aviram"}, "is_accepted": false, "score": 0, "last_activity_date": 1492003811, "creation_date": 1492003811, "answer_id": 43371022, "question_id": 43370624, "link": "https://stackoverflow.com/questions/43370624/how-to-speed-up-scraping-in-rails/43371022#43371022", "title": "How to speed up scraping in Rails", "body": "<p>you query the DOM 2 times any result box when you can just query once for all the '.new-car-name', and you creating for each one useless hash</p>\n\n<p>Try this: </p>\n\n<pre><code>if @url\n    @arr = Array.new\n  begin\n    doc = Nokogiri::HTML(open(@url))\n    url_prefix = 'http://uae.yallamotor.com'\n    doc.css(\".new-cars-results-box &gt; .new-car-name\").each do |item|\n      type = item.text\n      link = url_prefix + item[:href]\n      @arr &lt;&lt; [link,type]\n    end\n  rescue\n  end\nend\n</code></pre>\n\n<p>also try to replace this line </p>\n\n<pre><code>doc.css(\".new-cars-results-box &gt; .new-car-name\").each do |item|\n</code></pre>\n\n<p>with this: </p>\n\n<pre><code>doc.css(\".new-car-name\").each do |item|\n</code></pre>\n"}], "owner": {"reputation": 5144, "user_id": 5411461, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/RyJfN.jpg?s=128&g=1", "display_name": "Haseeb Ahmad", "link": "https://stackoverflow.com/users/5411461/haseeb-ahmad"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 274, "favorite_count": 1, "answer_count": 1, "score": 0, "last_activity_date": 1492106542, "creation_date": 1492002880, "last_edit_date": 1492106542, "question_id": 43370624, "link": "https://stackoverflow.com/questions/43370624/how-to-speed-up-scraping-in-rails", "title": "How to speed up scraping in Rails", "body": "<p>This code works fine locally, but on Heroku it takes more than 30 seconds due to a request timeout:</p>\n\n<pre><code>if @url\n  @arr = Array.new\n  begin\n    doc = Nokogiri::HTML(open(@url))\n    doc.css(\".new-cars-results-box\").each do |item|\n      hash = Hash.new\n\n      type = item.at_css(\".new-car-name\").text\n      link = \"http://uae.yallamotor.com\"+item.at_css(\".new-car-name\")[:href]\n      @arr &lt;&lt; [link,type]\n    end\n  rescue\n  end\n\nend\n</code></pre>\n\n<p>How can I speed this up?</p>\n"}, {"tags": ["ruby", "variables"], "comments": [{"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 4, "creation_date": 1492001008, "post_id": 43369851, "comment_id": 73801436, "body": "Of course not. ..."}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 4, "creation_date": 1492001147, "post_id": 43369851, "comment_id": 73801539, "body": "... and hopefully never will be ;-)"}, {"owner": {"reputation": 7605, "user_id": 584552, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/dc70f4a04726fada8b9db8a18ff40412?s=128&d=identicon&r=PG", "display_name": "mdesantis", "link": "https://stackoverflow.com/users/584552/mdesantis"}, "edited": false, "score": 0, "creation_date": 1492002971, "post_id": 43369851, "comment_id": 73803045, "body": "Possible duplicate of <a href=\"http://stackoverflow.com/questions/30840127/get-value-from-string-representing-local-variable\">Get value from string representing local variable</a>"}, {"owner": {"reputation": 33085, "user_id": 2423164, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Nxbnp.jpg?s=128&g=1", "display_name": "ndnenkov", "link": "https://stackoverflow.com/users/2423164/ndnenkov"}, "reply_to_user": {"reputation": 7605, "user_id": 584552, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/dc70f4a04726fada8b9db8a18ff40412?s=128&d=identicon&r=PG", "display_name": "mdesantis", "link": "https://stackoverflow.com/users/584552/mdesantis"}, "edited": false, "score": 2, "creation_date": 1492003066, "post_id": 43369851, "comment_id": 73803126, "body": "@mdesantis, AFAIU OP doesn&#39;t have the variable name, just the variable identity."}, {"owner": {"reputation": 7605, "user_id": 584552, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/dc70f4a04726fada8b9db8a18ff40412?s=128&d=identicon&r=PG", "display_name": "mdesantis", "link": "https://stackoverflow.com/users/584552/mdesantis"}, "edited": false, "score": 0, "creation_date": 1492003174, "post_id": 43369851, "comment_id": 73803223, "body": "Oh so OP wants the variable name starting from <code>object_id</code> value, thank you I didn&#39;t get that part"}, {"owner": {"reputation": 33085, "user_id": 2423164, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Nxbnp.jpg?s=128&g=1", "display_name": "ndnenkov", "link": "https://stackoverflow.com/users/2423164/ndnenkov"}, "edited": false, "score": 1, "creation_date": 1492005473, "post_id": 43369851, "comment_id": 73805146, "body": "I have the feeling that OP wanted something way simpler and will be completely confused by our interpretation when he sees the answers."}], "answers": [{"comments": [{"owner": {"reputation": 7605, "user_id": 584552, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/dc70f4a04726fada8b9db8a18ff40412?s=128&d=identicon&r=PG", "display_name": "mdesantis", "link": "https://stackoverflow.com/users/584552/mdesantis"}, "edited": false, "score": 2, "creation_date": 1492002846, "post_id": 43370171, "comment_id": 73802953, "body": "you can use <code>binding.local_variable_get(&quot;variable&quot;)</code> instead of <code>eval</code> <a href=\"http://stackoverflow.com/a/30840502/584552\">stackoverflow.com/a/30840502/584552</a>"}], "tags": [], "owner": {"reputation": 63078, "user_id": 220147, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b3881a28fe402dd2d1de44717486cae8?s=128&d=identicon&r=PG", "display_name": "Michael Kohl", "link": "https://stackoverflow.com/users/220147/michael-kohl"}, "is_accepted": false, "score": 1, "last_activity_date": 1492005031, "last_edit_date": 1492005031, "creation_date": 1492001707, "answer_id": 43370171, "question_id": 43369851, "link": "https://stackoverflow.com/questions/43369851/accessing-a-variables-name-from-an-object/43370171#43370171", "title": "Accessing a variable&#39;s name from an object", "body": "<p>The only way I can come up with is something along these lines:</p>\n\n<pre><code>binding.local_variables.each do |var|\n  puts \"The name of the variable is '#{var}' and its value is '#{eval(var.to_s)}'\"\n  # or\n  # puts \"The name of the variable is '#{var}' and its value is '#{binding.local_variable_get(var)}'\"\nend\n# The name of the variable is 'object_name' and its value is 'hello'\n</code></pre>\n\n<p>Of course this will output all local variables that are currently in scope and, well, <code>eval</code>. </p>\n"}, {"comments": [{"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1492002458, "post_id": 43370193, "comment_id": 73802642, "body": "Instead of using <code>object_id</code>, you could compare the objects via <code>equal?</code>"}, {"owner": {"reputation": 33085, "user_id": 2423164, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Nxbnp.jpg?s=128&g=1", "display_name": "ndnenkov", "link": "https://stackoverflow.com/users/2423164/ndnenkov"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1492002590, "post_id": 43370193, "comment_id": 73802739, "body": "@Stefan, you can. OP wanted <code>object_id</code> for some reason in the question. I&#39;m not sure what possible use case this can have anyway."}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1492002752, "post_id": 43370193, "comment_id": 73802878, "body": "I see. I thought this was the OP&#39;s attempt to get the variable&#39;s name."}, {"owner": {"reputation": 7605, "user_id": 584552, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/dc70f4a04726fada8b9db8a18ff40412?s=128&d=identicon&r=PG", "display_name": "mdesantis", "link": "https://stackoverflow.com/users/584552/mdesantis"}, "edited": false, "score": 0, "creation_date": 1492003408, "post_id": 43370193, "comment_id": 73803404, "body": "Concerning the downfall: call the method <code>find_vars</code>, replace <code>find</code> with <code>select</code> and let it return an array. If you want just the first value then you can call <code>find_vars()[0]</code>."}, {"owner": {"reputation": 33085, "user_id": 2423164, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Nxbnp.jpg?s=128&g=1", "display_name": "ndnenkov", "link": "https://stackoverflow.com/users/2423164/ndnenkov"}, "reply_to_user": {"reputation": 7605, "user_id": 584552, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/dc70f4a04726fada8b9db8a18ff40412?s=128&d=identicon&r=PG", "display_name": "mdesantis", "link": "https://stackoverflow.com/users/584552/mdesantis"}, "edited": false, "score": 0, "creation_date": 1492003567, "post_id": 43370193, "comment_id": 73803547, "body": "@mdesantis, yes, but I expect that if I call <code>whatever binding, b.object_id</code>, where <code>a = b = 42</code>, I should get <code>b</code> back, not <code>a</code> or <code>[a, b]</code>."}, {"owner": {"reputation": 7605, "user_id": 584552, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/dc70f4a04726fada8b9db8a18ff40412?s=128&d=identicon&r=PG", "display_name": "mdesantis", "link": "https://stackoverflow.com/users/584552/mdesantis"}, "edited": false, "score": 0, "creation_date": 1492003725, "post_id": 43370193, "comment_id": 73803664, "body": "Well no, I do not, why a value should be bound just to one single variable name?"}, {"owner": {"reputation": 33085, "user_id": 2423164, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Nxbnp.jpg?s=128&g=1", "display_name": "ndnenkov", "link": "https://stackoverflow.com/users/2423164/ndnenkov"}, "reply_to_user": {"reputation": 7605, "user_id": 584552, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/dc70f4a04726fada8b9db8a18ff40412?s=128&d=identicon&r=PG", "display_name": "mdesantis", "link": "https://stackoverflow.com/users/584552/mdesantis"}, "edited": false, "score": 0, "creation_date": 1492004348, "post_id": 43370193, "comment_id": 73804228, "body": "@mdesantis, well it&#39;s not but that is what OP is asking for the way I understand it."}, {"owner": {"reputation": 7605, "user_id": 584552, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/dc70f4a04726fada8b9db8a18ff40412?s=128&d=identicon&r=PG", "display_name": "mdesantis", "link": "https://stackoverflow.com/users/584552/mdesantis"}, "edited": false, "score": 0, "creation_date": 1492016184, "post_id": 43370193, "comment_id": 73813194, "body": "Yes actually it is a refactoring: it&#39;s better to write methods that conceptually do the things they should do and adapt your code to it, instead of writing a method that do exactly what you want, but has a conceptual flaw. in this case, in your &quot;backend&quot; code the method should be pluralized, since the bound variables can be more then one. Then in your &quot;frontend&quot; code you use just the first var name. If you write the code in this way, you can omit the downfall part, think about it. It&#39;s just a refactoring matter anyway."}], "tags": [], "owner": {"reputation": 33085, "user_id": 2423164, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Nxbnp.jpg?s=128&g=1", "display_name": "ndnenkov", "link": "https://stackoverflow.com/users/2423164/ndnenkov"}, "is_accepted": false, "score": 3, "last_activity_date": 1492002809, "last_edit_date": 1492002809, "creation_date": 1492001753, "answer_id": 43370193, "question_id": 43369851, "link": "https://stackoverflow.com/questions/43369851/accessing-a-variables-name-from-an-object/43370193#43370193", "title": "Accessing a variable&#39;s name from an object", "body": "<pre><code>def find_var(in_binding, object_id)\n  name = in_binding.local_variables.find do |name|\n    in_binding.local_variable_get(name).object_id == object_id\n  end\n\n  [name, in_binding.local_variable_get(name)]\nend\n\nthe_answer = 42\nfind_var binding, the_answer.object_id # =&gt; [:the_answer, 42]\n\nfoo = 'bar'\nbaz = [foo]\nfind_var binding, baz.first.object_id # =&gt; [:foo, \"bar\"]\n</code></pre>\n\n<p>Obvious downfall - two variables pointing to the same object. Aka</p>\n\n<pre><code>a = b = 42\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "is_accepted": false, "score": 1, "last_activity_date": 1492003434, "creation_date": 1492003434, "answer_id": 43370843, "question_id": 43369851, "link": "https://stackoverflow.com/questions/43369851/accessing-a-variables-name-from-an-object/43370843#43370843", "title": "Accessing a variable&#39;s name from an object", "body": "<p>Just out of curiosity:</p>\n\n<pre><code>object_name = \"hello\"\nvar_name = File.readlines(__FILE__)[__LINE__ - 2][/\\w+(?=\\s*=)/]\nputs \"Variable named '#{var_name}' has value '#{eval(var_name)}'\"\n\n&gt; ruby /tmp/d.rb\n#\u21d2\u00a0Variable named 'object_name' has value 'hello'\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 69, "user_id": 6029849, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/qTPSR.jpg?s=128&g=1", "display_name": "Peter", "link": "https://stackoverflow.com/users/6029849/peter"}, "is_accepted": false, "score": 0, "last_activity_date": 1495627441, "creation_date": 1495627441, "answer_id": 44157918, "question_id": 43369851, "link": "https://stackoverflow.com/questions/43369851/accessing-a-variables-name-from-an-object/44157918#44157918", "title": "Accessing a variable&#39;s name from an object", "body": "<p>Took me a while, but I solved this eventually. Thanks to all for the above answers. Here are the feature file, step definitions and methods I used to work it out.</p>\n\n<pre><code>Feature: try and work out a simple version of the f2d pages that could be used for all\n\n  Scenario Outline: first go\n    Given I set up an object for these things\n      | page_1   | page_2   |\n      | &lt;page_1&gt; | &lt;page_2&gt; |\n    Then I create objects and output two things for one\n\n    Examples:\n      | page_1    | page_2      |\n      | elephants | scary pants |\n</code></pre>\n\n<p>Step Definitions:</p>\n\n<pre><code>Given(/^I set up an object for these things$/) do |table|\n  set_up_a_hash_from_a_table(table)\nend\n\nThen(/^I create objects and output two things for one$/) do\n  do_something_with_a_hash\nend\n</code></pre>\n\n<p>Methods:</p>\n\n<pre><code>def set_up_a_hash_from_a_table(table)\n  @objects = Hash.new\n  @summary = Array.new\n  data = table.hashes\n\n  data.each do |field_data|\n    @objects['page_1'] = field_data['page_1']\n    @objects['page_2'] = field_data['page_2']\n  end\nend\n\ndef do_something_with_a_hash\n\n  show_me_page_1\n\n  show_me_page_2\n\n  puts \"Summary is #{@summary}\"\n\nend\n\ndef show_me_page_1\n  do_stuff_for_a_page('page_1')\nend\n\ndef show_me_page_2\n  do_stuff_for_a_page('page_2')\n end\n\ndef do_stuff_for_a_page(my_object)\n  puts \"key is #{my_object} and value is #{@objects[my_object]}\"\n  @summary.push(\"#{my_object} - #{@objects[my_object]}\")\n  end\n</code></pre>\n\n<p>Result:</p>\n\n<pre><code>#=&gt; key is page_1 and value is elephants\n\n#=&gt; key is page_2 and value is scary pants\n\n#=&gt; Summary is [\"page_1 - elephants\", \"page_2 - scary pants\"]\n</code></pre>\n"}], "owner": {"reputation": 69, "user_id": 6029849, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/qTPSR.jpg?s=128&g=1", "display_name": "Peter", "link": "https://stackoverflow.com/users/6029849/peter"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 117, "favorite_count": 0, "answer_count": 4, "score": 1, "last_activity_date": 1495627441, "creation_date": 1492000893, "last_edit_date": 1492003440, "question_id": 43369851, "link": "https://stackoverflow.com/questions/43369851/accessing-a-variables-name-from-an-object", "title": "Accessing a variable&#39;s name from an object", "body": "<p>Given an object:</p>\n\n<pre><code>object_name = \"hello\"\n</code></pre>\n\n<p>is there any way to get the variable's name <code>\"object_name\"</code>? I need to create a string with the variable's name and the value in it, e.g. </p>\n\n<pre><code>\"The name of the variable is 'object_name' and its value is 'hello'\"\n</code></pre>\n\n<p>I tried:</p>\n\n<pre><code>object_name.object_id\n# =&gt; 20084556\n</code></pre>\n"}, {"tags": ["mysql", "ruby-on-rails", "ruby", "activerecord"], "comments": [{"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1492001056, "post_id": 43369839, "comment_id": 73801478, "body": "<i>&quot;similar as the last time&quot;</i> \u2013 are you referring to another question? If so, provide a link, please."}, {"owner": {"reputation": 43, "user_id": 7850981, "user_type": "registered", "accept_rate": 75, "profile_image": "https://graph.facebook.com/10207072307120618/picture?type=large", "display_name": "Valentin Ferey", "link": "https://stackoverflow.com/users/7850981/valentin-ferey"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1492001707, "post_id": 43369839, "comment_id": 73802033, "body": "Yes the other one was this : <a href=\"https://stackoverflow.com/questions/43348313/rails-check-if-relationships-exist-in-database\">here</a>"}, {"owner": {"reputation": 2450, "user_id": 1114667, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/c855f4e65f04cfbbe403fdb18e32fdfd?s=128&d=identicon&r=PG", "display_name": "Ilya Lavrov", "link": "https://stackoverflow.com/users/1114667/ilya-lavrov"}, "edited": false, "score": 0, "creation_date": 1492001760, "post_id": 43369839, "comment_id": 73802077, "body": "<code>@mark</code> contains <code>course_id</code> and <code>user_id</code>. So you may write <code>if @mark.course_id == @course.id &amp;&amp; @mark.user_id == user.id</code>"}, {"owner": {"reputation": 6207, "user_id": 5117953, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/Ca0RW.jpg?s=128&g=1", "display_name": "Vishal", "link": "https://stackoverflow.com/users/5117953/vishal"}, "edited": false, "score": 0, "creation_date": 1492001912, "post_id": 43369839, "comment_id": 73802194, "body": "@Velantin Mark belongs to user and Mark belongs to course . it means Mark will always have only one course and user. right ?"}, {"owner": {"reputation": 43, "user_id": 7850981, "user_type": "registered", "accept_rate": 75, "profile_image": "https://graph.facebook.com/10207072307120618/picture?type=large", "display_name": "Valentin Ferey", "link": "https://stackoverflow.com/users/7850981/valentin-ferey"}, "edited": false, "score": 0, "creation_date": 1492002180, "post_id": 43369839, "comment_id": 73802403, "body": "My view will be a show on my course so example : course/1. I find the <code>@mark</code> by making a findall where <code>course_id: params[:id]</code> ! This is to get every <code>@mark</code> in my table link to this course. So <code>@mark</code> is a table and can&#39;t call method <code>user_id</code> or <code>course_id</code> without a <code>.each</code> !"}, {"owner": {"reputation": 43, "user_id": 7850981, "user_type": "registered", "accept_rate": 75, "profile_image": "https://graph.facebook.com/10207072307120618/picture?type=large", "display_name": "Valentin Ferey", "link": "https://stackoverflow.com/users/7850981/valentin-ferey"}, "reply_to_user": {"reputation": 6207, "user_id": 5117953, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/Ca0RW.jpg?s=128&g=1", "display_name": "Vishal", "link": "https://stackoverflow.com/users/5117953/vishal"}, "edited": false, "score": 0, "creation_date": 1492002341, "post_id": 43369839, "comment_id": 73802544, "body": "@Vishal No a User can have 1 mark per course and a course 1 mark per user ! So maybe i&#39;m doing the wrong way ! I didn&#39;t really get the difference maybe :/"}, {"owner": {"reputation": 43, "user_id": 7850981, "user_type": "registered", "accept_rate": 75, "profile_image": "https://graph.facebook.com/10207072307120618/picture?type=large", "display_name": "Valentin Ferey", "link": "https://stackoverflow.com/users/7850981/valentin-ferey"}, "edited": false, "score": 0, "creation_date": 1492002426, "post_id": 43369839, "comment_id": 73802611, "body": "It like : my Course is <b>Maths</b> and I want to add a mark to <b>Valentin</b>  But <b>Valentin</b> can&#39;t have two different mark in this course"}], "answers": [{"comments": [{"owner": {"reputation": 43, "user_id": 7850981, "user_type": "registered", "accept_rate": 75, "profile_image": "https://graph.facebook.com/10207072307120618/picture?type=large", "display_name": "Valentin Ferey", "link": "https://stackoverflow.com/users/7850981/valentin-ferey"}, "edited": false, "score": 0, "creation_date": 1492012297, "post_id": 43370767, "comment_id": 73810802, "body": "This could work but my User_id is not the current_user ! This is a id of every user in this course this need a .each method ..."}], "tags": [], "owner": {"reputation": 1755, "user_id": 3247496, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/nDtef.png?s=128&g=1", "display_name": "Ahmad Al-kheat", "link": "https://stackoverflow.com/users/3247496/ahmad-al-kheat"}, "is_accepted": false, "score": 1, "last_activity_date": 1492003284, "creation_date": 1492003284, "answer_id": 43370767, "question_id": 43369839, "link": "https://stackoverflow.com/questions/43369839/ruby-check-if-data-exist-in-database/43370767#43370767", "title": "ruby check if data exist in database", "body": "<p>First, I suggest you rethink your tables, maybe take a look at the many-to-many relationship.</p>\n\n<p>Regarding your question, you want to know if there exists a mark that belongs to a specific course for a specific user, so you would need something like this : </p>\n\n<pre><code>Mark.where(course_id: @course.id, user_id: current_user.id).any?\n</code></pre>\n\n<p>This will return true if such a record exists.</p>\n"}, {"comments": [{"owner": {"reputation": 43, "user_id": 7850981, "user_type": "registered", "accept_rate": 75, "profile_image": "https://graph.facebook.com/10207072307120618/picture?type=large", "display_name": "Valentin Ferey", "link": "https://stackoverflow.com/users/7850981/valentin-ferey"}, "edited": false, "score": 0, "creation_date": 1492011066, "post_id": 43372120, "comment_id": 73809912, "body": "Thanks for you answer ! But If i want to use @mark.course for exemple, what shoul i have in my controller? Actually I have this <code>@mark = Mark.where(course_id: params[:id])</code> but this is an array :/"}, {"owner": {"reputation": 449, "user_id": 3083488, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/e2fOL.png?s=128&g=1", "display_name": "Zain", "link": "https://stackoverflow.com/users/3083488/zain"}, "reply_to_user": {"reputation": 43, "user_id": 7850981, "user_type": "registered", "accept_rate": 75, "profile_image": "https://graph.facebook.com/10207072307120618/picture?type=large", "display_name": "Valentin Ferey", "link": "https://stackoverflow.com/users/7850981/valentin-ferey"}, "edited": false, "score": 0, "creation_date": 1492091353, "post_id": 43372120, "comment_id": 73849146, "body": "@ValentinFerey .where will always return a collection of records. Also, a single course can have multiple marks so it makes sense that it returns an array of marks for the course. You have to loop through each one and display a form for it. Check my updated answer."}, {"owner": {"reputation": 43, "user_id": 7850981, "user_type": "registered", "accept_rate": 75, "profile_image": "https://graph.facebook.com/10207072307120618/picture?type=large", "display_name": "Valentin Ferey", "link": "https://stackoverflow.com/users/7850981/valentin-ferey"}, "edited": false, "score": 0, "creation_date": 1492450945, "post_id": 43372120, "comment_id": 73968624, "body": "WoooW ! Thanks a lot !! Of course I new that was the only solution but I just didn&#39;t know about the &quot;Unless&quot; tag ! With this I can fix all my problems ! Thanks a lot ! I never heard about unless before ROR ..."}], "tags": [], "owner": {"reputation": 449, "user_id": 3083488, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/e2fOL.png?s=128&g=1", "display_name": "Zain", "link": "https://stackoverflow.com/users/3083488/zain"}, "is_accepted": true, "score": 0, "last_activity_date": 1492091236, "last_edit_date": 1492091236, "creation_date": 1492006508, "answer_id": 43372120, "question_id": 43369839, "link": "https://stackoverflow.com/questions/43369839/ruby-check-if-data-exist-in-database/43372120#43372120", "title": "ruby check if data exist in database", "body": "<p>A belongs_to association sets up a one-to-one connection with the other models. Rails then creates a singular utility method (among others) in your model.</p>\n\n<p>For example, According to your model associations, a Mark <strong>belongs_to</strong> a Course and a User. Rails will create the following utility methods in your Mark model:</p>\n\n<pre><code>@mark.course\n@mark.user\n</code></pre>\n\n<p>So the statement:</p>\n\n<pre><code>@mark.course_ids.include?(@course.id) and @mark.user_ids.include?(user.id)\n</code></pre>\n\n<p>is incorrect. Those methods do not exist in the Mark model.</p>\n\n<p>Try this:</p>\n\n<p><strong>Controller</strong></p>\n\n<pre><code>@marks = Mark.where(course_id: params[:id])\n</code></pre>\n\n<p>This will get all the marks for that course so the mark will definitely have a course associated with it (there's no need to make that check in your view).</p>\n\n<p><strong>View</strong></p>\n\n<p>Render a form for each mark:    </p>\n\n<pre><code>&lt;% @marks.each do |mark| %&gt;\n  &lt;% unless mark.user.exists? %&gt;\n    &lt;%= form_for Mark.new do |f| %&gt;\n      &lt;%= hidden_field_tag :course_id, @course.id %&gt;\n      &lt;%= hidden_field_tag :user_id, user.id %&gt;\n      Grade: #{number_field_tag :grade, nil, min: 0, max: 100}#{f.submit}\n    &lt;% end %&gt;\n  &lt;% end %&gt;\n&lt;% end %&gt;\n</code></pre>\n"}], "owner": {"reputation": 43, "user_id": 7850981, "user_type": "registered", "accept_rate": 75, "profile_image": "https://graph.facebook.com/10207072307120618/picture?type=large", "display_name": "Valentin Ferey", "link": "https://stackoverflow.com/users/7850981/valentin-ferey"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 386, "favorite_count": 0, "accepted_answer_id": 43372120, "answer_count": 2, "score": 0, "last_activity_date": 1492091236, "creation_date": 1492000875, "last_edit_date": 1492017943, "question_id": 43369839, "link": "https://stackoverflow.com/questions/43369839/ruby-check-if-data-exist-in-database", "title": "ruby check if data exist in database", "body": "<p>Im new with ruby on rails and I'm again blocked on something really similar as the last time.. I have a User table, a Course table and a Mark table.\nI can create a Mark with a user_id, a course_id and a grade.</p>\n\n<p>In my models i have :</p>\n\n<pre><code>/* Mark model */\nclass Mark &lt; ActiveRecord::Base\n  belongs_to :user\n  belongs_to :course\nend\n\n/* Course model */\nclass Course &lt; ActiveRecord::Base\n  has_many :marks\nend\n\n/* User model */\nclass User &lt; ActiveRecord::Base\n  has_many :marks\nend\n</code></pre>\n\n<p>So what I want to do is when I created a new mark, with my form I want that my form disappear and display a button destroy ! Like this :</p>\n\n<pre><code>&lt;% if @mark.course_ids.include?(@course.id) and @mark.user_ids.include?(user.id)\n   # Button destroy\n&lt;% else %&gt;\n   &lt;%= form_for Mark.new do |f| %&gt;\n       &lt;%= hidden_field_tag :course_id, @course.id %&gt;\n       &lt;%= hidden_field_tag :user_id, user.id %&gt;\n       Grade: &lt;%= number_field_tag :grade, nil, min: 0, max: 100 %&gt;\n       &lt;%= f.submit %&gt;\n    &lt;% end %&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>The goal is to avoid the form when the mark just be added previously..\nBut here obviously @mark.course_ids and @mark.user_ids doesn't exist !!</p>\n\n<p>Thanks for you help ! </p>\n"}, {"tags": ["ruby", "literals"], "comments": [{"owner": {"reputation": 12629, "user_id": 4739257, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/MdhEs.jpg?s=128&g=1", "display_name": "Ilya", "link": "https://stackoverflow.com/users/4739257/ilya"}, "edited": false, "score": 1, "creation_date": 1492000579, "post_id": 43369675, "comment_id": 73801131, "body": "<code>item[0]</code> without quotes."}, {"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1492000671, "post_id": 43369675, "comment_id": 73801178, "body": "<code>&#39;item[0]&#39;</code> is not <code>item[0]</code>."}], "answers": [{"tags": [], "owner": {"reputation": 12629, "user_id": 4739257, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/MdhEs.jpg?s=128&g=1", "display_name": "Ilya", "link": "https://stackoverflow.com/users/4739257/ilya"}, "is_accepted": true, "score": 2, "last_activity_date": 1492003614, "last_edit_date": 1492003614, "creation_date": 1492000967, "answer_id": 43369879, "question_id": 43369675, "link": "https://stackoverflow.com/questions/43369675/check-if-an-array-has-any-element-in-another-array/43369879#43369879", "title": "Check if an array has any element in another array", "body": "<p>You should use just <code>item[0]</code> without quotes. But you said that you want to check <em>all values</em> in subarrays: in this case your solution will still wrong, so possible solution is:</p>\n\n<pre><code>one = [\"2cndb\", \"7bndb\", \"14accdb\", \"5ggdb\"]\ntwo = [[\"2cndb\", \"alive\"], [\"14accdb\", \"alive\"], \n       [\"5ggdb\", \"not alive\"], [\"foo\", \"bar\"]]\ntwo.map { |e| e + [(one &amp; e).empty? ? 'no'  : 'yes']}\n#=&gt; [[\"2cndb\", \"alive\", \"yes\"], [\"14accdb\", \"alive\", \"yes\"],\n#    [\"5ggdb\", \"not alive\", \"yes\"], [\"foo\", \"bar\", \"no\"]]\n</code></pre>\n"}], "owner": {"reputation": 193, "user_id": 6500563, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/79d8d08238533616559c33c5650255b1?s=128&d=identicon&r=PG&f=1", "display_name": "mila002", "link": "https://stackoverflow.com/users/6500563/mila002"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 423, "favorite_count": 0, "accepted_answer_id": 43369879, "answer_count": 1, "score": 0, "last_activity_date": 1492003614, "creation_date": 1492000443, "last_edit_date": 1492000849, "question_id": 43369675, "link": "https://stackoverflow.com/questions/43369675/check-if-an-array-has-any-element-in-another-array", "title": "Check if an array has any element in another array", "body": "<p>I have two arrays:</p>\n\n<pre><code>one = [\"2cndb\", \"7bndb\", \"14accdb\", \"5ggdb\"]\ntwo = [[\"2cndb\", \"alive\"], [\"14accdb\", \"alive\"], [\"5ggdb\", \"not alive\"]]\n</code></pre>\n\n<p>I want to check if each sub-array in <code>two</code> contains any element of <code>one</code>. When it does, I want to add an element <code>\"yes\"</code> to the sub-array, <code>\"no\"</code> otherwise.</p>\n\n<p>My code is:</p>\n\n<pre><code>two.each do |item|\nif (one.include?('item[0]'))\n        item.push(\"yes\")\n    else\n        item.push(\"no\")\n    end\nend\n</code></pre>\n\n<p>and I get </p>\n\n<pre><code>two = [[\"2cndb\", \"alive\", \"no\"], [\"14accdb\", \"alive\", \"no\"], [\"5ggdb\", \"not alive\", \"no\"]]\n</code></pre>\n\n<p>But <code>\"2cndb\"</code>, <code>\"14accdb\"</code>, <code>\"5ggdb\"</code> are present in <code>one</code>. Can You suggest where the problem is?</p>\n"}, {"tags": ["ruby", "circleci"], "comments": [{"owner": {"reputation": 2842, "user_id": 599686, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/6e2b017e2266ab3c15e0439a1ca10946?s=128&d=identicon&r=PG", "display_name": "bliof", "link": "https://stackoverflow.com/users/599686/bliof"}, "edited": false, "score": 0, "creation_date": 1492000817, "post_id": 43369021, "comment_id": 73801278, "body": "How about using <a href=\"https://github.com/vcr/vcr\" rel=\"nofollow noreferrer\">github.com/vcr/vcr</a> or <a href=\"https://github.com/bblimke/webmock\" rel=\"nofollow noreferrer\">github.com/bblimke/webmock</a> ?"}, {"owner": {"reputation": 2842, "user_id": 599686, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/6e2b017e2266ab3c15e0439a1ca10946?s=128&d=identicon&r=PG", "display_name": "bliof", "link": "https://stackoverflow.com/users/599686/bliof"}, "edited": false, "score": 0, "creation_date": 1492001278, "post_id": 43369021, "comment_id": 73801634, "body": "Otherwise you could try Circle Ci 2 <a href=\"https://circleci.com/beta-access/\" rel=\"nofollow noreferrer\">circleci.com/beta-access</a> and try multiple containers"}], "owner": {"reputation": 5744, "user_id": 461557, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/chqe8.jpg?s=128&g=1", "display_name": "Viren", "link": "https://stackoverflow.com/users/461557/viren"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 51, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1491998633, "creation_date": 1491998633, "question_id": 43369021, "link": "https://stackoverflow.com/questions/43369021/stub-a-server-for-webhook-response-in-circle-ci", "title": "STUB a server for Webhook response in CIRCLE-CI", "body": "<p>We are currently building our integration test. One of our test demand that we expect out test expect to receive (a callback response) from one of our services.</p>\n\n<p>Stuff look like this</p>\n\n<pre><code>describe 'Integration Test' do \n  before(:each) do \n     @replies = { '/callback' =&gt; [200, {}, [\"Callback Received\"]] }\n  end\n\n  context 'Callback' do \n     it 'should receive a callback response' do  \n       StubServer.open('4567', @replies) do |server|\n         server.wait until server.recorded_reqs.any?\n         req_body = JSON.parse(server.recorded_reqs.first[\"REQUEST_BODY\"]).symbolize_keys\n         expect(req_body[:data]).not_to be_nil \n       end\n     end\n  end\nend\n</code></pre>\n\n<blockquote>\n  <p>Service 1 trigger a callback to  --> Integration Test (Stub Server\n  Running) --> Integration Stub server intercept the request and run the\n  matched expectation.</p>\n</blockquote>\n\n<p>When Locally, we run StubServer (stub server running at <a href=\"http://localhost:4567\" rel=\"nofollow noreferrer\">http://localhost:4567</a>) and we validate the acceptance test for the callback response callback response or a request originated from Service 1</p>\n\n<p>IF I have to simulate the above behavior in Circle CI. I would need an endpoint along with port to run my stub service which accessible from outside.</p>\n\n<p>Any Clue on this?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "model-view-controller", "checkbox", "models"], "comments": [{"owner": {"reputation": 4644, "user_id": 2594185, "user_type": "registered", "profile_image": "https://graph.facebook.com/100003773788931/picture?type=large", "display_name": "Jagdeep Singh", "link": "https://stackoverflow.com/users/2594185/jagdeep-singh"}, "edited": false, "score": 0, "creation_date": 1491997507, "post_id": 43368570, "comment_id": 73798964, "body": "You could use <a href=\"http://api.jquery.com/jquery.ajax/\" rel=\"nofollow noreferrer\">api.jquery.com/jquery.ajax</a>"}, {"owner": {"reputation": 3865, "user_id": 4540175, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/a789c8057fed1368f96c15cfbdba6421?s=128&d=identicon&r=PG&f=1", "display_name": "gates", "link": "https://stackoverflow.com/users/4540175/gates"}, "edited": false, "score": 0, "creation_date": 1491998172, "post_id": 43368570, "comment_id": 73799340, "body": "Here is a high level idea, have a class those checkboxes, in the javascript have a trigger for that checkbox. On that trigger, call an api to update the field in the controller."}, {"owner": {"reputation": 101, "user_id": 7598927, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ff6a64040a43609704ce5eb5f706fc42?s=128&d=identicon&r=PG&f=1", "display_name": "andriy", "link": "https://stackoverflow.com/users/7598927/andriy"}, "edited": false, "score": 0, "creation_date": 1491998534, "post_id": 43368570, "comment_id": 73799566, "body": "You have to use     <a href=\"http://stackoverflow.com/questions/7031226/jquery-checkbox-change-and-click-event\" title=\"jquery checkbox change and click event\">stackoverflow.com/questions/7031226/&hellip;</a>  to catch chackbox change event"}, {"owner": {"reputation": 77, "user_id": 7802501, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/4874272e8bba778b1452bdb1e8a7c625?s=128&d=identicon&r=PG&f=1", "display_name": "NanoBreaker", "link": "https://stackoverflow.com/users/7802501/nanobreaker"}, "reply_to_user": {"reputation": 3865, "user_id": 4540175, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/a789c8057fed1368f96c15cfbdba6421?s=128&d=identicon&r=PG&f=1", "display_name": "gates", "link": "https://stackoverflow.com/users/4540175/gates"}, "edited": false, "score": 0, "creation_date": 1491998923, "post_id": 43368570, "comment_id": 73799902, "body": "@gates Thanks guys, I&#39;ll try to use that information!"}], "answers": [{"tags": [], "owner": {"reputation": 101, "user_id": 7598927, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ff6a64040a43609704ce5eb5f706fc42?s=128&d=identicon&r=PG&f=1", "display_name": "andriy", "link": "https://stackoverflow.com/users/7598927/andriy"}, "is_accepted": true, "score": 0, "last_activity_date": 1491999581, "last_edit_date": 1495540954, "creation_date": 1491998921, "answer_id": 43369122, "question_id": 43368570, "link": "https://stackoverflow.com/questions/43368570/ruby-on-rails-updating-model-when-checkbox-is-changed/43369122#43369122", "title": "Ruby on Rails: updating model when checkbox is changed", "body": "<p>You have to use \n   <a href=\"https://stackoverflow.com/questions/7031226/jquery-checkbox-change-and-click-event\">jQuery checkbox change and click event</a> \nto catch checkbox change event,</p>\n\n<p>further you can use ajax request \n   <a href=\"http://api.jquery.com/jquery.ajax/\" rel=\"nofollow noreferrer\">http://api.jquery.com/jquery.ajax/</a> on the change event,</p>\n\n<p>in the ajax request use path to update method in Projects controller.</p>\n\n<p>Note that you have to put the path in file config/routes.rb,\nsomething like this:</p>\n\n<p>post 'url' => 'projects#update'</p>\n"}], "owner": {"reputation": 77, "user_id": 7802501, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/4874272e8bba778b1452bdb1e8a7c625?s=128&d=identicon&r=PG&f=1", "display_name": "NanoBreaker", "link": "https://stackoverflow.com/users/7802501/nanobreaker"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 650, "favorite_count": 0, "accepted_answer_id": 43369122, "answer_count": 1, "score": 2, "last_activity_date": 1491999581, "creation_date": 1491997371, "question_id": 43368570, "link": "https://stackoverflow.com/questions/43368570/ruby-on-rails-updating-model-when-checkbox-is-changed", "title": "Ruby on Rails: updating model when checkbox is changed", "body": "<p>I got projects and todos inside them, todos have checkbox &amp; text, so when I change the checkbox the whole model must be updated without any buttons.</p>\n\n<p>Here is my project on heroku: <a href=\"https://polar-scrubland-30279.herokuapp.com/\" rel=\"nofollow noreferrer\">https://polar-scrubland-30279.herokuapp.com/</a></p>\n\n<p>index.html.erb ( I know that I'm not the best code speller)</p>\n\n<pre><code>&lt;% @projects.each do |project| %&gt;\n  &lt;div class=\"col-md-4\"&gt;\n\n    &lt;div class=\"project\"&gt;\n      &lt;%= form_for(local_assigns[:project] || project) do |f| %&gt;\n\n        &lt;div class=\"project-header\"&gt;\n          &lt;h2&gt; &lt;%= f.object.title %&gt; &lt;/h2&gt;\n        &lt;/div&gt;\n\n        &lt;div class=\"project-todos\"&gt;\n          &lt;%= f.fields_for(:todos) do |tf| %&gt;\n            &lt;div class=\"todo\"&gt;\n              &lt;div class=\"todo--checkbox\"&gt;\n                &lt;%= tf.check_box :isCompleted %&gt;\n              &lt;/div&gt;\n              &lt;div class=\"todo--text\"&gt;\n                &lt;%= tf.object.text %&gt;\n              &lt;/div&gt;\n            &lt;/div&gt;\n          &lt;% end %&gt;\n        &lt;/div&gt;\n      &lt;% end %&gt;\n    &lt;/div&gt;\n\n  &lt;/div&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>This is my ProjectsController:</p>\n\n<pre><code>class ProjectsController &lt; ApplicationController\n\n  def index\n    @projects = Project.all\n  end\n\n  def show\n    @project = Project.find(params[:id])\n  end\n\n  def new\n    @project = Project.new\n  end\n\n  def create\n    @project = Project.new(project_params)\n    if @project.save\n      # ...\n    else\n      # ...\n    end\n  end\n\n  def update\n    if @project.update(project_params)\n      # ...\n    else\n      # ...\n    end\n  end\n\n  private\n\n  def set_project\n    @project = Project.find(params[:id])\n  end\n\n  def project_params\n    params.require(:project).permit(:foo, :bar, todos_attributes: [:isCompleted, :text])\n  end\n\nend\n</code></pre>\n\n<p>project.rb</p>\n\n<pre><code>class Project &lt; ActiveRecord::Base\n  has_many :todos\n  accepts_nested_attributes_for :todos\nend\n</code></pre>\n\n<p>todo.rb</p>\n\n<pre><code>class Todo &lt; ActiveRecord::Base\n  belongs_to :project\nend\n</code></pre>\n\n<p><strong>The question is:</strong> how do I connect my form with my controller, and change todo's boolean variable when checkbox is checked/uncheked. I've tried some variants, but there is need a refresh button, which I don't wanna have.</p>\n\n<p>GitHub - <a href=\"https://github.com/NanoBreaker/taskmanager\" rel=\"nofollow noreferrer\">https://github.com/NanoBreaker/taskmanager</a></p>\n"}, {"tags": ["ruby-on-rails", "arrays", "ruby", "enums"], "comments": [{"owner": {"reputation": 2546, "user_id": 2603130, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/60f46755895fd7c8bfa4f39d527ba9a8?s=128&d=identicon&r=PG", "display_name": "radubogdan", "link": "https://stackoverflow.com/users/2603130/radubogdan"}, "edited": false, "score": 0, "creation_date": 1491994516, "post_id": 43367535, "comment_id": 73796772, "body": "What did you try?"}, {"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1491994583, "post_id": 43367535, "comment_id": 73796833, "body": "Your questions is unclear. Ruby doesn&#39;t have 2D arrays, so what do you mean by &quot;2D array&quot;? How is your question starting with &quot;Also \u2026&quot; related to your problem? And what do you mean by &quot;using something like map etc&quot;? Why do you want to use &quot;something like map&quot; instead of simply using <code>map</code>?"}, {"owner": {"reputation": 4070, "user_id": 2453089, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/vhgD8.jpg?s=128&g=1", "display_name": "vish4071", "link": "https://stackoverflow.com/users/2453089/vish4071"}, "edited": false, "score": 0, "creation_date": 1491994622, "post_id": 43367535, "comment_id": 73796865, "body": "I was trying something like colors.keys.map{[|s| s, colors[s]]} but this is invalid syntax."}, {"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1491994624, "post_id": 43367535, "comment_id": 73796869, "body": "What have you tried? What is the code you are having trouble with? What is the problem with your code? Do you get an error? If yes, what is the precise error you are getting? Does the actual result differ from the expected result? If yes, what is the result you are expecting, why are you expecting that result, what is the actual result and how do they differ? Does the observed behavior of the code differ from the intended behavior? If yes, what is the intended behavior and why, what is the behavior you are seeing, and how do they differ? What is the specification for the intended behavior?"}, {"owner": {"reputation": 4070, "user_id": 2453089, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/vhgD8.jpg?s=128&g=1", "display_name": "vish4071", "link": "https://stackoverflow.com/users/2453089/vish4071"}, "edited": false, "score": 0, "creation_date": 1491994955, "post_id": 43367535, "comment_id": 73797135, "body": "Is it still really unclear what I am asking? Steve&#39;s answer is exactly what I need here."}], "answers": [{"comments": [{"owner": {"reputation": 4070, "user_id": 2453089, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/vhgD8.jpg?s=128&g=1", "display_name": "vish4071", "link": "https://stackoverflow.com/users/2453089/vish4071"}, "edited": false, "score": 0, "creation_date": 1491995229, "post_id": 43367704, "comment_id": 73797368, "body": "One more thing Steve. What if I want to do some changes to keys here, like <code>humanize</code> eg. So that o/p is <code>[[&quot;Black&quot;,0], [&quot;Dark gray&quot;,1], [&quot;Light gray&quot;,2], [&quot;White&quot;,3]]</code>"}, {"owner": {"reputation": 32451, "user_id": 2516474, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a2179a340c0e84edc285d432211145d?s=128&d=identicon&r=PG", "display_name": "SteveTurczyn", "link": "https://stackoverflow.com/users/2516474/steveturczyn"}, "reply_to_user": {"reputation": 4070, "user_id": 2453089, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/vhgD8.jpg?s=128&g=1", "display_name": "vish4071", "link": "https://stackoverflow.com/users/2453089/vish4071"}, "edited": false, "score": 0, "creation_date": 1491996422, "post_id": 43367704, "comment_id": 73798208, "body": "You can just do that with a map.. <code>MyModel.colors.to_a.map{|c|[ c[0].humanize, c[1]]}</code>  I&#39;m a bit curious as to why you want this... it&#39;s not for a form, is it?  A form should return the colors text, not the colors index."}, {"owner": {"reputation": 4070, "user_id": 2453089, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/vhgD8.jpg?s=128&g=1", "display_name": "vish4071", "link": "https://stackoverflow.com/users/2453089/vish4071"}, "edited": false, "score": 0, "creation_date": 1491997137, "post_id": 43367704, "comment_id": 73798731, "body": "It is for a for a form only. I was thinking that the form would be showing the color names and return the index (corresponding enum value) which is stored in DB. Is this a wrong approach?"}, {"owner": {"reputation": 32451, "user_id": 2516474, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a2179a340c0e84edc285d432211145d?s=128&d=identicon&r=PG", "display_name": "SteveTurczyn", "link": "https://stackoverflow.com/users/2516474/steveturczyn"}, "reply_to_user": {"reputation": 4070, "user_id": 2453089, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/vhgD8.jpg?s=128&g=1", "display_name": "vish4071", "link": "https://stackoverflow.com/users/2453089/vish4071"}, "edited": false, "score": 0, "creation_date": 1491999681, "post_id": 43367704, "comment_id": 73800486, "body": "enum fields are stored as index, but the value has to be set to the text when updating the record in the database.  ActiveRecord does the translation from text to integer and vice versa.  You set <code>@model.color = &#39;black&#39;</code> not <code>@model.color = 0</code>"}, {"owner": {"reputation": 4070, "user_id": 2453089, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/vhgD8.jpg?s=128&g=1", "display_name": "vish4071", "link": "https://stackoverflow.com/users/2453089/vish4071"}, "edited": false, "score": 0, "creation_date": 1492000301, "post_id": 43367704, "comment_id": 73800929, "body": "Ok. Thanks for the help. I understand what you are saying and make the necessary changes."}], "tags": [], "owner": {"reputation": 32451, "user_id": 2516474, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a2179a340c0e84edc285d432211145d?s=128&d=identicon&r=PG", "display_name": "SteveTurczyn", "link": "https://stackoverflow.com/users/2516474/steveturczyn"}, "is_accepted": true, "score": 5, "last_activity_date": 1491994810, "creation_date": 1491994810, "answer_id": 43367704, "question_id": 43367535, "link": "https://stackoverflow.com/questions/43367535/map-an-enum-or-array-to-2-d-array-ruby/43367704#43367704", "title": "Map an enum or array to 2-d array ruby", "body": "<p>This facility already exists but you should change your enum to singular</p>\n\n<pre><code>enum color: [:black, :dark_gray, :light_gray, :white]\n</code></pre>\n\n<p>There is a class method in your model now called <code>colors</code></p>\n\n<pre><code>MyModel.colors\n</code></pre>\n\n<p>which will return a hash</p>\n\n<p>You can convert it into an array of arrays with the <code>#to_a</code> method</p>\n\n<pre><code>MyModel.colors.to_a\n</code></pre>\n"}], "owner": {"reputation": 4070, "user_id": 2453089, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/vhgD8.jpg?s=128&g=1", "display_name": "vish4071", "link": "https://stackoverflow.com/users/2453089/vish4071"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 598, "favorite_count": 1, "accepted_answer_id": 43367704, "answer_count": 1, "score": -2, "last_activity_date": 1491995836, "creation_date": 1491994371, "last_edit_date": 1491995836, "question_id": 43367535, "link": "https://stackoverflow.com/questions/43367535/map-an-enum-or-array-to-2-d-array-ruby", "title": "Map an enum or array to 2-d array ruby", "body": "<p>Suppose I have an enum like this:</p>\n\n<pre><code>enum colors: [:black, :dark_gray, :light_gray, :white]\n</code></pre>\n\n<p>I want the output as:</p>\n\n<pre><code>[[\"black\",0], [\"dark_gray\",1], [\"light_gray\",2], [\"white\",3]]\n</code></pre>\n\n<p>or as</p>\n\n<pre><code>[[\"Black\",0], [\"Dark gray\",1], [\"Light gray\",2], [\"White\",3]] #using k.humanize on all keys\n</code></pre>\n\n<p>How can I get this as output. Also, is this possible from a 1-d array as well. eg.</p>\n\n<pre><code>input=[1,2,3]\noutput=[[1,1],[2,4],[3,9]]\n</code></pre>\n\n<p>using something like map etc.</p>\n\n<p>I tried using <code>map</code> function, but the way I tried gives invalid syntax. So I asked it here. The answer should be kind of trivial, however I am missing something.</p>\n\n<p>I tried:</p>\n\n<pre><code>op = colors.keys.map{[|s| s, colors[s]]}\n</code></pre>\n\n<p>but this is wrong syntax.</p>\n\n<pre><code>SyntaxError: unexpected ']', expecting '}'\n</code></pre>\n"}, {"tags": ["c#", "ruby"], "comments": [{"owner": {"reputation": 84066, "user_id": 5311735, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6rhPk.jpg?s=128&g=1", "display_name": "Evk", "link": "https://stackoverflow.com/users/5311735/evk"}, "edited": false, "score": 1, "creation_date": 1491993066, "post_id": 43366955, "comment_id": 73795661, "body": "So you wrote it in C#. Does it work as expected or not?"}, {"owner": {"reputation": 3538, "user_id": 275882, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/6x8aS.jpg?s=128&g=1", "display_name": "Artur K\u0119dzior", "link": "https://stackoverflow.com/users/275882/artur-k%c4%99dzior"}, "reply_to_user": {"reputation": 84066, "user_id": 5311735, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6rhPk.jpg?s=128&g=1", "display_name": "Evk", "link": "https://stackoverflow.com/users/5311735/evk"}, "edited": false, "score": 0, "creation_date": 1491993713, "post_id": 43366955, "comment_id": 73796187, "body": "No, conversion from string to Int fails."}], "answers": [{"tags": [], "owner": {"reputation": 84066, "user_id": 5311735, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6rhPk.jpg?s=128&g=1", "display_name": "Evk", "link": "https://stackoverflow.com/users/5311735/evk"}, "is_accepted": false, "score": 1, "last_activity_date": 1491994156, "creation_date": 1491994156, "answer_id": 43367447, "question_id": 43366955, "link": "https://stackoverflow.com/questions/43366955/how-do-i-convert-this-piece-of-ruby-code-to-c/43367447#43367447", "title": "How do I convert this piece of ruby code to c#?", "body": "<p>Since your problem is only with converting your string to int - I will address just that. Number <code>0xf9f1e687</code> is out of range for C# <code>Int32</code>. <code>Int32.MaxValue</code> is <code>0x7FFFFFFF</code>. That is why your conversion gives wrong (negative) value. It would be better if it just throw an exception, but it does not. To fix, use either <code>long</code> (<code>Int64</code>) or unsigned int (<code>UInt32</code>):</p>\n\n<pre><code>var server_id = (uint) new UInt32Converter()\n     .ConvertFromString(\"0xf9f1e687\");\nvar server_id = (long) new Int64Converter()\n            .ConvertFromString(\"0xf9f1e687\");\n</code></pre>\n\n<p>Alternative way:</p>\n\n<pre><code>var server_id = uint.Parse(\"0xf9f1e687\".Replace(\"0x\", \"\"), NumberStyles.AllowHexSpecifier);\n</code></pre>\n"}], "owner": {"reputation": 3538, "user_id": 275882, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/6x8aS.jpg?s=128&g=1", "display_name": "Artur K\u0119dzior", "link": "https://stackoverflow.com/users/275882/artur-k%c4%99dzior"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 121, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1491994969, "creation_date": 1491992787, "last_edit_date": 1491993085, "question_id": 43366955, "link": "https://stackoverflow.com/questions/43366955/how-do-i-convert-this-piece-of-ruby-code-to-c", "title": "How do I convert this piece of ruby code to c#?", "body": "<p>I have this piece of code in Ruby:</p>\n\n<pre><code>server_id = \"0xf9f1e687\"\n\nactions = \"S(#{Time.now.to_f * 1000).to_i.to_s})S(12946;server:#{server_id.to_i(16).to_s})\"\n</code></pre>\n\n<p>How do I write it in C#?</p>\n\n<p>Closest I got is:</p>\n\n<pre><code>int server_id = (int)new System.ComponentModel.Int32Converter()\n                .ConvertFromString(\"0xf9f1e687\");\n\nvar actions = \"S(\" + DateTime.Now.Second + \")S(12946;server:\" + server_id + \")\";\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4.2"], "answers": [{"comments": [{"owner": {"reputation": 14827, "user_id": 645886, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2abb0123e9484284a9cb2d36aa9854b3?s=128&d=identicon&r=PG&f=1", "display_name": "Surya", "link": "https://stackoverflow.com/users/645886/surya"}, "edited": false, "score": 2, "creation_date": 1491993667, "post_id": 43366829, "comment_id": 73796148, "body": "Such answers are the reasons I admire you. Always humble and bent towards helping newcomers like me. Thanks for being on SO. Keep it up. :)"}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "reply_to_user": {"reputation": 14827, "user_id": 645886, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2abb0123e9484284a9cb2d36aa9854b3?s=128&d=identicon&r=PG&f=1", "display_name": "Surya", "link": "https://stackoverflow.com/users/645886/surya"}, "edited": false, "score": 1, "creation_date": 1491994005, "post_id": 43366829, "comment_id": 73796423, "body": "@Surya: at 10k rep, you can hardly qualify as a newcomer. But thanks :)"}], "tags": [], "owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "is_accepted": false, "score": 6, "last_activity_date": 1491992500, "creation_date": 1491992500, "answer_id": 43366829, "question_id": 43366703, "link": "https://stackoverflow.com/questions/43366703/convert-the-total-seconds-to-time-in-rails/43366829#43366829", "title": "Convert the total seconds to time in rails", "body": "<p>Well, given that <code>34:52:37</code> is not a valid time string, it makes little sense to use time parsing/conversion libraries for this. Better to calculate it manually. <code>div</code> and <code>mod</code> are your best friends here. Take a look:</p>\n\n<pre><code>secs = 125557\nsecs_in_an_hour = 3600\n\nhours, secs = secs.divmod(secs_in_an_hour)\nhours # =&gt; 34\nsecs # =&gt; 3157 # This now contains only minutes and seconds, no full hours\n</code></pre>\n\n<p>It should be quite easy to evolve this to a full working solution. </p>\n"}, {"tags": [], "owner": {"reputation": 3516, "user_id": 4094161, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rCzRm.png?s=128&g=1", "display_name": "PHP Team", "link": "https://stackoverflow.com/users/4094161/php-team"}, "is_accepted": false, "score": 3, "last_activity_date": 1491992668, "creation_date": 1491992668, "answer_id": 43366893, "question_id": 43366703, "link": "https://stackoverflow.com/questions/43366703/convert-the-total-seconds-to-time-in-rails/43366893#43366893", "title": "Convert the total seconds to time in rails", "body": "<p>Try this</p>\n\n<pre><code>total_seconds = 125557\n\nseconds = total_seconds % 60\nminutes = (total_seconds / 60) % 60\nhours = total_seconds / (60 * 60)\n\nformat(\"%02d:%02d:%02d\", hours, minutes, seconds)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 775, "user_id": 1544440, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/75da798fa2e162ff6eab82bc51a2d3a3?s=128&d=identicon&r=PG", "display_name": "Omar Bahareth", "link": "https://stackoverflow.com/users/1544440/omar-bahareth"}, "is_accepted": false, "score": 0, "last_activity_date": 1492252231, "last_edit_date": 1492252231, "creation_date": 1492251831, "answer_id": 43424878, "question_id": 43366703, "link": "https://stackoverflow.com/questions/43366703/convert-the-total-seconds-to-time-in-rails/43424878#43424878", "title": "Convert the total seconds to time in rails", "body": "<p>You could try the <a href=\"https://github.com/peleteiro/ruby-duration\" rel=\"nofollow noreferrer\">ruby-duration gem</a> if you want to deal with weeks, days, hours, minutes, and seconds more easily.</p>\n\n<pre><code>d = Duration.new(125557)\n=&gt; #&lt;Duration:0x007f84180758e8 @days=1, @hours=10, @minutes=52, @negative=false, @seconds=37, @total=125557, @weeks=0&gt;\nd.total_hours\n=&gt; 34\nd.total_minutes\n=&gt; 2092\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 628, "user_id": 2970582, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/0i4u3.jpg?s=128&g=1", "display_name": "Sathish", "link": "https://stackoverflow.com/users/2970582/sathish"}, "is_accepted": false, "score": 0, "last_activity_date": 1593026883, "creation_date": 1593026883, "answer_id": 62562696, "question_id": 43366703, "link": "https://stackoverflow.com/questions/43366703/convert-the-total-seconds-to-time-in-rails/62562696#62562696", "title": "Convert the total seconds to time in rails", "body": "<p>I posted my answer here <a href=\"https://stackoverflow.com/a/62562658/2970582\">https://stackoverflow.com/a/62562658/2970582</a>\n<code>ActiveSupport::Duration</code> + <code>inspect</code> gives you valid results</p>\n"}, {"tags": [], "owner": {"reputation": 1228, "user_id": 960819, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/382c8d761371f83ff28f5e96da0204fe?s=128&d=identicon&r=PG", "display_name": "Pere Joan Martorell", "link": "https://stackoverflow.com/users/960819/pere-joan-martorell"}, "is_accepted": false, "score": 0, "last_activity_date": 1608201786, "creation_date": 1608201786, "answer_id": 65339141, "question_id": 43366703, "link": "https://stackoverflow.com/questions/43366703/convert-the-total-seconds-to-time-in-rails/65339141#65339141", "title": "Convert the total seconds to time in rails", "body": "<p>Since <strong>Rails 6.1.0</strong> you can do:</p>\n<pre class=\"lang-rb prettyprint-override\"><code>1.day.in_hours # =&gt; 24.0\n3600.seconds.in_hours # =&gt; 1.0\n</code></pre>\n<p>Documentation: <a href=\"https://api.rubyonrails.org/classes/ActiveSupport/Duration.html#method-i-in_hours\" rel=\"nofollow noreferrer\">https://api.rubyonrails.org/classes/ActiveSupport/Duration.html#method-i-in_hours</a></p>\n"}], "owner": {"reputation": 57, "user_id": 5772393, "user_type": "registered", "accept_rate": 20, "profile_image": "https://lh6.googleusercontent.com/-rVql-bINZH4/AAAAAAAAAAI/AAAAAAAAAQ8/WlxzK3Ly9Zs/photo.jpg?sz=128", "display_name": "Mahesh Dokku", "link": "https://stackoverflow.com/users/5772393/mahesh-dokku"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1559, "favorite_count": 0, "answer_count": 5, "score": 0, "last_activity_date": 1608201786, "creation_date": 1491992202, "question_id": 43366703, "link": "https://stackoverflow.com/questions/43366703/convert-the-total-seconds-to-time-in-rails", "title": "Convert the total seconds to time in rails", "body": "<p>My total seconds is <code>125557</code></p>\n\n<p>when i tried to convert the seconds into \"H:M:S\" by using </p>\n\n<pre><code>Time.at(125557).utc.strftime(\"%H:%M:%S\")\n</code></pre>\n\n<p>it gives like <code>10:52:37</code></p>\n\n<p>but i want actually like <code>34:52:37</code> (adding one day to 10:52:37 ) </p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "answers": [{"tags": [], "owner": {"reputation": 47232, "user_id": 1772830, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Qtoqg.jpg?s=128&g=1", "display_name": "Andrey Deineko", "link": "https://stackoverflow.com/users/1772830/andrey-deineko"}, "is_accepted": true, "score": 7, "last_activity_date": 1491992122, "creation_date": 1491992122, "answer_id": 43366672, "question_id": 43366541, "link": "https://stackoverflow.com/questions/43366541/can-i-include-helper-method-in-service-object/43366672#43366672", "title": "Can I include helper method in service object?", "body": "<p>You are using <code>include</code>, which makes <code>current_segment</code> an <em>instance method</em> in the including classes while what you need, is a <em>class instance method</em> (singleton method). In order to achieve it you should use <code>extend</code>:</p>\n\n<pre><code>module EnumData   \n  class Base\n    extend MembersHelper   \n  end\nend\n</code></pre>\n"}], "owner": {"reputation": 1609, "user_id": 6571456, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/WQSQM.jpg?s=128&g=1", "display_name": "bird", "link": "https://stackoverflow.com/users/6571456/bird"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3907, "favorite_count": 0, "accepted_answer_id": 43366672, "answer_count": 1, "score": 5, "last_activity_date": 1491992122, "creation_date": 1491991803, "question_id": 43366541, "link": "https://stackoverflow.com/questions/43366541/can-i-include-helper-method-in-service-object", "title": "Can I include helper method in service object?", "body": "<p>I defined a helper method: <code>MembersHelper</code></p>\n\n<pre><code>module MembersHelper\n def current_segment\n   Segment.where(current: true).first\n end\nend\n</code></pre>\n\n<p>then included it in a class call Base in <code>app/service/enum_data/base.rb</code> file</p>\n\n<pre><code>module EnumData   \n  class Base\n    include MembersHelper   \n  end\nend\n</code></pre>\n\n<p>And used it from Base's subclass: GetAll in <code>app/service/enum_data/get_all.rb</code> file</p>\n\n<pre><code>module EnumData\n  class GetAll &lt; Base\n    def self.call\n      reference_data = current_segment.entities.all\n    end\n  end\nend\n</code></pre>\n\n<p>But I got an error </p>\n\n<p><code>undefined local variable or method 'current_segment' for EnumData::GetByCategory:Class</code></p>\n\n<p>I fixed it by moving <code>current_segment</code> method to Base class, but I want to know why it doesn't work when I include that helper method? Did I miss something?</p>\n"}, {"tags": ["jquery", "ruby-on-rails", "ruby", "heroku", "coffeescript"], "comments": [{"owner": {"reputation": 2573, "user_id": 5787849, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/0885a24e8501106661f4475a59fe1a0b?s=128&d=identicon&r=PG&f=1", "display_name": "Aniket Shivam Tiwari", "link": "https://stackoverflow.com/users/5787849/aniket-shivam-tiwari"}, "edited": false, "score": 0, "creation_date": 1491993408, "post_id": 43365897, "comment_id": 73795927, "body": "You have a syntax error in coffeescript"}, {"owner": {"reputation": 31, "user_id": 7282978, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fcf3c8ac30b2e7fa8212516aa93adf46?s=128&d=identicon&r=PG&f=1", "display_name": "Gabriella G", "link": "https://stackoverflow.com/users/7282978/gabriella-g"}, "reply_to_user": {"reputation": 2573, "user_id": 5787849, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/0885a24e8501106661f4475a59fe1a0b?s=128&d=identicon&r=PG&f=1", "display_name": "Aniket Shivam Tiwari", "link": "https://stackoverflow.com/users/5787849/aniket-shivam-tiwari"}, "edited": false, "score": 0, "creation_date": 1492019027, "post_id": 43365897, "comment_id": 73814714, "body": "@AniketShivamTiwari I haven&#39;t changed my coffeescript at all though, minus updating my site.js file and adding in the unedited version of the elevate jquery file?"}], "answers": [{"tags": [], "owner": {"reputation": 31, "user_id": 7282978, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fcf3c8ac30b2e7fa8212516aa93adf46?s=128&d=identicon&r=PG&f=1", "display_name": "Gabriella G", "link": "https://stackoverflow.com/users/7282978/gabriella-g"}, "is_accepted": false, "score": 2, "last_activity_date": 1492019348, "creation_date": 1492019348, "answer_id": 43376353, "question_id": 43365897, "link": "https://stackoverflow.com/questions/43365897/execjsruntimeerror-syntaxerror-unexpected-token-operator/43376353#43376353", "title": "ExecJS::RuntimeError: SyntaxError: Unexpected token: operator (&lt;)", "body": "<p>So I have fixed my own problem (as things usually go) and I wanted to post it so that other people could also learn from my mistakes. The issue with my code was in the elevateZoom file that I got from github. I didn't look at that code to see how different it looked because I just assumed it would be correct - and once I went to examine it, it turned out it was entirely the wrong file - so just a reminder to people to triplecheck files and not take their correctness for granted! </p>\n"}], "owner": {"reputation": 31, "user_id": 7282978, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fcf3c8ac30b2e7fa8212516aa93adf46?s=128&d=identicon&r=PG&f=1", "display_name": "Gabriella G", "link": "https://stackoverflow.com/users/7282978/gabriella-g"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 967, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1492019348, "creation_date": 1491990083, "last_edit_date": 1495540445, "question_id": 43365897, "link": "https://stackoverflow.com/questions/43365897/execjsruntimeerror-syntaxerror-unexpected-token-operator", "title": "ExecJS::RuntimeError: SyntaxError: Unexpected token: operator (&lt;)", "body": "<p>I'm making my way through CareerFoundry's Web Development course and I've run into an issue getting a \"precompiled assets failed\" message. This is the original error message from just trying to upload my files to heroku</p>\n\n<pre><code>    ExecJS::RuntimeError: SyntaxError: Unexpected token: operator (&lt;) (line: 12192, col: 0, pos: 370557)\n    remote:        Error\n    remote:        at new JS_Parse_Error (/tmp/execjs20170412-395-1h7cphhjs:3623:11948)\n    remote:        at js_error (/tmp/execjs20170412-395-1h7cphhjs:3623:12167)\n    remote:        at croak (/tmp/execjs20170412-395-1h7cphhjs:3623:22038)\n    remote:        at token_error (/tmp/execjs20170412-395-1h7cphhjs:3623:22175)\n    remote:        at unexpected (/tmp/execjs20170412-395-1h7cphhjs:3623:22263)\n    remote:        at expr_atom (/tmp/execjs20170412-395-1h7cphhjs:3623:31244)\n    remote:        at maybe_unary (/tmp/execjs20170412-395-1h7cphhjs:3624:1752)\n    remote:        at expr_ops (/tmp/execjs20170412-395-1h7cphhjs:3624:2523)\n    remote:        at maybe_conditional (/tmp/execjs20170412-395-1h7cphhjs:3624:2615)\n    remote:        at maybe_assign (/tmp/execjs20170412-395-1h7cphhjs:3624:3058)\n    remote:        at expression (/tmp/execjs20170412-395-1h7cphhjs:3624:3384)\n    remote:        at simple_statement (/tmp/execjs20170412-395-1h7cphhjs:3623:25942)\n    remote:        new JS_Parse_Error ((\n\nexecjs):3623:11948)\nremote:        js_error ((execjs):3623:12167)\nremote:        croak ((execjs):3623:22038)\nremote:        token_error ((execjs):3623:22175)\nremote:        unexpected ((execjs):3623:22263)\nremote:        expr_atom ((execjs):3623:31244)\nremote:        maybe_unary ((execjs):3624:1752)\nremote:        expr_ops ((execjs):3624:2523)\nremote:        maybe_conditional ((execjs):3624:2615)\nremote:        maybe_assign ((execjs):3624:3058)\nremote:        expression ((execjs):3624:3384)\nremote:        simple_statement ((execjs):3623:25942)\nremote:        /tmp/build_83e6f5fa137e00570c8f3c555e0c4b73/vendor/bundle/ruby/2.2.0/gems/execjs-2.7.0/lib/execjs/external_runtime.rb:39:in `exec'\nremote:        /tmp/build_83e6f5fa137e00570c8f3c555e0c4b73/vendor/bundle/ruby/2.2.0/gems/execjs-2.7.0/lib/execjs/external_runtime.rb:21:in `eval'\nremote:        /tmp/build_83e6f5fa137e00570c8f3c555e0c4b73/vendor/bundle/ruby/2.2.0/gems/execjs-2.7.0/lib/execjs/external_runtime.rb:46:in `call'\nremote:        /tmp/build_83e6f5fa137e00570c8f3c555e0c4b73/vendor/bundle/ruby/2.2.0/gems/uglifier-3.0.4/lib/uglifier.rb:184:in `run_uglifyjs'\nremote:        /tmp/build_83e6f5fa137e00570c8f3c555e0c4b73/vendor/bundle/ruby/2.2.0/gems/uglifier-3.0.4/lib/uglifier.rb:146:in `compile'\nremote:        /tmp/build_83e6f5fa137e00570c8f3c555e0c4b73/vendor/bundle/ruby/2.2.0/gems/sprockets-3.7.1/lib/sprockets/uglifier_compressor.rb:53:in `call'\nremote:        /tmp/build_83e6f5fa137e00570c8f3c555e0c4b73/vendor/bundle/ruby/2.2.0/gems/sprockets-3.7.1/lib/sprockets/uglifier_compressor.rb:28:in `call'\nremote:        /tmp/build_83e6f5fa137e00570c8f3c555e0c4b73/vendor/bundle/ruby/2.2.0/gems/sprockets-3.7.1/lib/sprockets/processor_utils.rb:75:in `call_processor'\nremote:        /tmp/build_83e6f5fa137e00570c8f3c555e0c4b73/vendor/bundle/ruby/2.2.0/gems/sprockets-3.7.1/lib/sprockets/processor_utils.rb:57:in `block in call_processors'\nremote:        /tmp/build_83e6f5fa137e00570c8f3c555e0c4b73/vendor/bundle/ruby/2.2.0/gems/sprockets-3.7.1/lib/sprockets/processor_utils.rb:56:in `reverse_each'\nremote:        /tmp/build_83e6f5fa137e00570c8f3c555e0c4b73/vendor/bundle/ruby/2.2.0/gems/sprockets-3.7.1/lib/sprockets/processor_utils.rb:56:in `call_processors'\nremote:        /tmp/build_83e6f5fa137e00570c8f3c555e0c4b73/vendor/bundle/ruby/2.2.0/gems/sprockets-3.7.1/lib/sprockets/loader.rb:134:in `load_from_unloaded'\nremote:        /tmp/build_83e6f5fa137e00570c8f3c555e0c4b73/vendor/bundle/ruby/2.2.0/gems/sprockets-3.7.1/lib/sprockets/loader.rb:60:in `block in load'\nremote:        /tmp/build_83e6f5fa137e00570c8f3c555e0c4b73/vendor/bundle/ruby/2.2.0/gems/sprockets-3.7.1/lib/sprockets/loader.rb:317:in `fetch_asset_from_dependency_cache'\nremote:        /tmp/build_83e6f5fa137e00570c8f3c555e0c4b73/vendor/bundle/ruby/2.2.0/gems/sprockets-3.7.1/lib/sprockets/loader.rb:44:in `load'\nremote:        /tmp/build_83e6f5fa137e00570c8f3c555e0c4b73/vendor/bundle/ruby/2.2.0/gems/sprockets-3.7.1/lib/sprockets/cached_environment.rb:20:in `block in initialize'\nremote:        /tmp/build_83e6f5fa137e00570c8f3c555e0c4b73/vendor/bundle/ruby/2.2.0/gems/sprockets-3.7.1/lib/sprockets/cached_environment.rb:47:in `yield'\nremote:        /tmp/build_83e6f5fa137e00570c8f3c555e0c4b73/vendor/bundle/ruby/2.2.0/gems/sprockets-3.7.1/lib/sprockets/cached_environment.rb:47:in `load'\nremote:        /tmp/build_83e6f5fa137e00570c8f3c555e0c4b73/vendor/bundle/ruby/2.2.0/gems/sprockets-3.7.1/lib/sprockets/base.rb:66:in `find_asset'\nremote:        /tmp/build_83e6f5fa137e00570c8f3c555e0c4b73/vendor/bundle/ruby/2.2.0/gems/sprockets-3.7.1/lib/sprockets/base.rb:73:in `find_all_linked_assets'\nremote:        /tmp/build_83e6f5fa137e00570c8f3c555e0c4b73/vendor/bundle/ruby/2.2.0/gems/sprockets-3.7.1/lib/sprockets/manifest.rb:142:in `block in find'\nremote:        /tmp/build_83e6f5fa137e00570c8f3c555e0c4b73/vendor/bundle/ruby/2.2.0/gems/sprockets-3.7.1/lib/sprockets/legacy.rb:114:in `block (2 levels) in logical_paths'\nremote:        /tmp/build_83e6f5fa137e00570c8f3c555e0c4b73/vendor/bundle/ruby/2.2.0/gems/sprockets-3.7.1/lib/sprockets/path_utils.rb:228:in `block in stat_tree'\nremote:        /tmp/build_83e6f5fa137e00570c8f3c555e0c4b73/vendor/bundle/ruby/2.2.0/gems/sprockets-3.7.1/lib/sprockets/path_utils.rb:212:in `block in stat_directory'\nremote:        /tmp/build_83e6f5fa137e00570c8f3c555e0c4b73/vendor/bundle/ruby/2.2.0/gems/sprockets-3.7.1/lib/sprockets/path_utils.rb:209:in `each'\nremote:        /tmp/build_83e6f5fa137e00570c8f3c555e0c4b73/vendor/bundle/ruby/2.2.0/gems/sprockets-3.7.1/lib/sprockets/path_utils.rb:209:in `stat_directory'\nremote:        /tmp/build_83e6f5fa137e00570c8f3c555e0c4b73/vendor/bundle/ruby/2.2.0/gems/sprockets-3.7.1/lib/sprockets/path_utils.rb:227:in `stat_tree'\nremote:        /tmp/build_83e6f5fa137e00570c8f3c555e0c4b73/vendor/bundle/ruby/2.2.0/gems/sprockets-3.7.1/lib/sprockets/legacy.rb:105:in `each'\nremote:        /tmp/build_83e6f5fa137e00570c8f3c555e0c4b73/vendor/bundle/ruby/2.2.0/gems/sprockets-3.7.1/lib/sprockets/legacy.rb:105:in `block in logical_paths'\nremote:        /tmp/build_83e6f5fa137e00570c8f3c555e0c4b73/vendor/bundle/ruby/2.2.0/gems/sprockets-3.7.1/lib/sprockets/legacy.rb:104:in `each'\nremote:        /tmp/build_83e6f5fa137e00570c8f3c555e0c4b73/vendor/bundle/ruby/2.2.0/gems/sprockets-3.7.1/lib/sprockets/legacy.rb:104:in `logical_paths'\nremote:        /tmp/build_83e6f5fa137e00570c8f3c555e0c4b73/vendor/bundle/ruby/2.2.0/gems/sprockets-3.7.1/lib/sprockets/manifest.rb:140:in `find'\nremote:        /tmp/build_83e6f5fa137e00570c8f3c555e0c4b73/vendor/bundle/ruby/2.2.0/gems/sprockets-3.7.1/lib/sprockets/manifest.rb:185:in `compile'\nremote:        /tmp/build_83e6f5fa137e00570c8f3c555e0c4b73/vendor/bundle/ruby/2.2.0/gems/sprockets-rails-3.2.0/lib/sprockets/rails/task.rb:68:in `block (3 levels) in define'\nremote:        /tmp/build_83e6f5fa137e00570c8f3c555e0c4b73/vendor/bundle/ruby/2.2.0/gems/sprockets-3.7.1/lib/rake/sprocketstask.rb:147:in `with_logger'\nremote:        /tmp/build_83e6f5fa137e00570c8f3c555e0c4b73/vendor/bundle/ruby/2.2.0/gems/sprockets-rails-3.2.0/lib/sprockets/rails/task.rb:67:in `block (2 levels) in define'\nremote:        /tmp/build_83e6f5fa137e00570c8f3c555e0c4b73/vendor/bundle/ruby/2.2.0/gems/rake-12.0.0/exe/rake:27:in `&lt;top (required)&gt;'\nremote:        Tasks: TOP =&gt; assets:precompile\nremote:        (See full trace by running task with --trace)\nremote:  !\nremote:  !     Precompiling assets failed.\nremote:  !\nremote:  !     Push rejected, failed to compile Ruby app.\nremote: \nremote:  !     Push failed\nremote: Verifying deploy...\nremote: \nremote: !   Push rejected to sonntag-nacht.\n</code></pre>\n\n<p>I went through the steps detailed in the answer to <a href=\"https://stackoverflow.com/questions/30417990/precompiling-assets-failed-execjsprogramerror-unexpected-token-operator\">THIS question</a> and ran</p>\n\n<pre><code>rake assets:precompile RAILS_ENV=production\n</code></pre>\n\n<p>which gave me this as a result: </p>\n\n<pre><code>    GabrielsMacBook:TestApp gabriellagricius$ rake assets:precompile RAILS_ENV=production\n/usr/local/lib/ruby/gems/2.4.0/gems/activesupport-5.0.1/lib/active_support/xml_mini.rb:51: warning: constant ::Fixnum is deprecated\n/usr/local/lib/ruby/gems/2.4.0/gems/activesupport-5.0.1/lib/active_support/xml_mini.rb:52: warning: constant ::Bignum is deprecated\n/usr/local/lib/ruby/gems/2.4.0/gems/activesupport-5.0.1/lib/active_support/core_ext/numeric/conversions.rb:138: warning: constant ::Fixnum is deprecated\nrake aborted!\nExecJS::RuntimeError: SyntaxError: Unexpected token: operator (&lt;) (line: 12192, col: 0, pos: 370557)\n\nJS_Parse_Error@/var/folders/jt/g3npcq397gzgmzvm4jqtcs8h0000gn/T/execjs20170412-73446-1lvsnmujs:3623:11957\njs_error@/var/folders/jt/g3npcq397gzgmzvm4jqtcs8h0000gn/T/execjs20170412-73446-1lvsnmujs:3623:12185\ncroak@/var/folders/jt/g3npcq397gzgmzvm4jqtcs8h0000gn/T/execjs20170412-73446-1lvsnmujs:3623:22046\ntoken_error@/var/folders/jt/g3npcq397gzgmzvm4jqtcs8h0000gn/T/execjs20170412-73446-1lvsnmujs:3623:22180\nunexpected@/var/folders/jt/g3npcq397gzgmzvm4jqtcs8h0000gn/T/execjs20170412-73446-1lvsnmujs:3623:22274\nexpr_atom@/var/folders/jt/g3npcq397gzgmzvm4jqtcs8h0000gn/T/execjs20170412-73446-1lvsnmujs:3623:31254\nmaybe_unary@/var/folders/jt/g3npcq397gzgmzvm4jqtcs8h0000gn/T/execjs20170412-73446-1lvsnmujs:3624:1761\nexpr_ops@/var/folders/jt/g3npcq397gzgmzvm4jqtcs8h0000gn/T/execjs20170412-73446-1lvsnmujs:3624:2534\nmaybe_conditional@/var/folders/jt/g3npcq397gzgmzvm4jqtcs8h0000gn/T/execjs20170412-73446-1lvsnmujs:3624:2623\nmaybe_assign@/var/folders/jt/g3npcq397gzgmzvm4jqtcs8h0000gn/T/execjs20170412-73446-1lvsnmujs:3624:3075\nexpression@/var/folders/jt/g3npcq397gzgmzvm4jqtcs8h0000gn/T/execjs20170412-73446-1lvsnmujs:3624:3396\nsimple_statement@/var/folders/jt/g3npcq397gzgmzvm4jqtcs8h0000gn/T/execjs20170412-73446-1lvsnmujs:3623:25952\n/var/folders/jt/g3npcq397gzgmzvm4jqtcs8h0000gn/T/execjs20170412-73446-1lvsnmujs:3623:23678\n/var/folders/jt/g3npcq397gzgmzvm4jqtcs8h0000gn/T/execjs20170412-73446-1lvsnmujs:3623:22960\n/var/folders/jt/g3npcq397gzgmzvm4jqtcs8h0000gn/T/execjs20170412-73446-1lvsnmujs:3624:3768\nparse@/var/folders/jt/g3npcq397gzgmzvm4jqtcs8h0000gn/T/execjs20170412-73446-1lvsnmujs:3624:3999\nparse@/var/folders/jt/g3npcq397gzgmzvm4jqtcs8h0000gn/T/execjs20170412-73446-1lvsnmujs:3958:27\nuglifier@/var/folders/jt/g3npcq397gzgmzvm4jqtcs8h0000gn/T/execjs20170412-73446-1lvsnmujs:4003:18\neval code\neval@[native code]\n/var/folders/jt/g3npcq397gzgmzvm4jqtcs8h0000gn/T/execjs20170412-73446-1lvsnmujs:4039:12\n/var/folders/jt/g3npcq397gzgmzvm4jqtcs8h0000gn/T/execjs20170412-73446-1lvsnmujs:4043:21\n/var/folders/jt/g3npcq397gzgmzvm4jqtcs8h0000gn/T/execjs20170412-73446-1lvsnmujs:1:46\nglobal code@/var/folders/jt/g3npcq397gzgmzvm4jqtcs8h0000gn/T/execjs20170412-73446-1lvsnmujs:1:58\nJS_Parse_Error@(execjs):3623:11957\njs_error@(execjs):3623:12185\ncroak@(execjs):3623:22046\ntoken_error@(execjs):3623:22180\nunexpected@(execjs):3623:22274\nexpr_atom@(execjs):3623:31254\nmaybe_unary@(execjs):3624:1761\nexpr_ops@(execjs):3624:2534\nmaybe_conditional@(execjs):3624:2623\nmaybe_assign@(execjs):3624:3075\nexpression@(execjs):3624:3396\nsimple_statement@(execjs):3623:25952\n(execjs):3623:23678\n(execjs):3623:22960\n(execjs):3624:3768\nparse@(execjs):3624:3999\nparse@(execjs):3958:27\nuglifier@(execjs):4003:18\n(execjs):4039:12\n(execjs):4043:21\n(execjs):1:46\nglobal code@(execjs):1:58\n/usr/local/lib/ruby/gems/2.4.0/gems/execjs-2.7.0/lib/execjs/external_runtime.rb:39:in `exec'\n/usr/local/lib/ruby/gems/2.4.0/gems/execjs-2.7.0/lib/execjs/external_runtime.rb:21:in `eval'\n/usr/local/lib/ruby/gems/2.4.0/gems/execjs-2.7.0/lib/execjs/external_runtime.rb:46:in `call'\n/usr/local/lib/ruby/gems/2.4.0/gems/uglifier-3.0.4/lib/uglifier.rb:184:in `run_uglifyjs'\n/usr/local/lib/ruby/gems/2.4.0/gems/uglifier-3.0.4/lib/uglifier.rb:146:in `compile'\n/usr/local/lib/ruby/gems/2.4.0/gems/sprockets-3.7.1/lib/sprockets/uglifier_compressor.rb:53:in `call'\n/usr/local/lib/ruby/gems/2.4.0/gems/sprockets-3.7.1/lib/sprockets/uglifier_compressor.rb:28:in `call'\n/usr/local/lib/ruby/gems/2.4.0/gems/sprockets-3.7.1/lib/sprockets/processor_utils.rb:75:in `call_processor'\n/usr/local/lib/ruby/gems/2.4.0/gems/sprockets-3.7.1/lib/sprockets/processor_utils.rb:57:in `block in call_processors'\n/usr/local/lib/ruby/gems/2.4.0/gems/sprockets-3.7.1/lib/sprockets/processor_utils.rb:56:in `reverse_each'\n/usr/local/lib/ruby/gems/2.4.0/gems/sprockets-3.7.1/lib/sprockets/processor_utils.rb:56:in `call_processors'\n/usr/local/lib/ruby/gems/2.4.0/gems/sprockets-3.7.1/lib/sprockets/loader.rb:134:in `load_from_unloaded'\n/usr/local/lib/ruby/gems/2.4.0/gems/sprockets-3.7.1/lib/sprockets/loader.rb:60:in `block in load'\n/usr/local/lib/ruby/gems/2.4.0/gems/sprockets-3.7.1/lib/sprockets/loader.rb:317:in `fetch_asset_from_dependency_cache'\n/usr/local/lib/ruby/gems/2.4.0/gems/sprockets-3.7.1/lib/sprockets/loader.rb:44:in `load'\n/usr/local/lib/ruby/gems/2.4.0/gems/sprockets-3.7.1/lib/sprockets/cached_environment.rb:20:in `block in initialize'\n/usr/local/lib/ruby/gems/2.4.0/gems/sprockets-3.7.1/lib/sprockets/cached_environment.rb:47:in `load'\n/usr/local/lib/ruby/gems/2.4.0/gems/sprockets-3.7.1/lib/sprockets/base.rb:66:in `find_asset'\n/usr/local/lib/ruby/gems/2.4.0/gems/sprockets-3.7.1/lib/sprockets/base.rb:73:in `find_all_linked_assets'\n/usr/local/lib/ruby/gems/2.4.0/gems/sprockets-3.7.1/lib/sprockets/manifest.rb:142:in `block in find'\n/usr/local/lib/ruby/gems/2.4.0/gems/sprockets-3.7.1/lib/sprockets/legacy.rb:114:in `block (2 levels) in logical_paths'\n/usr/local/lib/ruby/gems/2.4.0/gems/sprockets-3.7.1/lib/sprockets/path_utils.rb:228:in `block in stat_tree'\n/usr/local/lib/ruby/gems/2.4.0/gems/sprockets-3.7.1/lib/sprockets/path_utils.rb:212:in `block in stat_directory'\n/usr/local/lib/ruby/gems/2.4.0/gems/sprockets-3.7.1/lib/sprockets/path_utils.rb:209:in `each'\n/usr/local/lib/ruby/gems/2.4.0/gems/sprockets-3.7.1/lib/sprockets/path_utils.rb:209:in `stat_directory'\n/usr/local/lib/ruby/gems/2.4.0/gems/sprockets-3.7.1/lib/sprockets/path_utils.rb:227:in `stat_tree'\n/usr/local/lib/ruby/gems/2.4.0/gems/sprockets-3.7.1/lib/sprockets/legacy.rb:105:in `each'\n/usr/local/lib/ruby/gems/2.4.0/gems/sprockets-3.7.1/lib/sprockets/legacy.rb:105:in `block in logical_paths'\n/usr/local/lib/ruby/gems/2.4.0/gems/sprockets-3.7.1/lib/sprockets/legacy.rb:104:in `each'\n/usr/local/lib/ruby/gems/2.4.0/gems/sprockets-3.7.1/lib/sprockets/legacy.rb:104:in `logical_paths'\n/usr/local/lib/ruby/gems/2.4.0/gems/sprockets-3.7.1/lib/sprockets/manifest.rb:140:in `find'\n/usr/local/lib/ruby/gems/2.4.0/gems/sprockets-3.7.1/lib/sprockets/manifest.rb:185:in `compile'\n/usr/local/lib/ruby/gems/2.4.0/gems/sprockets-rails-3.2.0/lib/sprockets/rails/task.rb:68:in `block (3 levels) in define'\n/usr/local/lib/ruby/gems/2.4.0/gems/sprockets-3.7.1/lib/rake/sprocketstask.rb:147:in `with_logger'\n/usr/local/lib/ruby/gems/2.4.0/gems/sprockets-rails-3.2.0/lib/sprockets/rails/task.rb:67:in `block (2 levels) in define'\n/usr/local/lib/ruby/gems/2.4.0/gems/rake-12.0.0/exe/rake:27:in `&lt;top (required)&gt;'\nTasks: TOP =&gt; assets:precompile\n(See full trace by running task with --trace)\n</code></pre>\n\n<p>So I went back and looked at other solutions using the answer to <a href=\"https://stackoverflow.com/questions/39810489/execjsruntimeerror-syntaxerror-unexpected-token-operator-line-22342\">THIS question</a>, which basically told me it was an ES6 error issue that wasn't compatible with coffeescript, so I added a gem to my gemfile from the latest version of sprockets to solve the problem but it didn't work... I've run bundle install and restarted my app to see if anything would help and so far I'm at a loss. I've just started with Ruby and I'm not really sure what to do now. </p>\n\n<p>To give you an idea of what I was doing, I was trying to add the elevateZoom jquery with the normal file which is what started all of this (jquery.elevateZoom-3.0.8.min.js) from their github repository. </p>\n\n<p>If you want to look at my github code, it's all here. I'd super super appreciate anyone's help!\n<a href=\"https://github.com/ggricius/TestApp\" rel=\"nofollow noreferrer\">https://github.com/ggricius/TestApp</a></p>\n"}, {"tags": ["json", "ruby", "fluentd"], "comments": [{"owner": {"reputation": 2446, "user_id": 5682933, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/29d72b97ce20902d21488878741621f3?s=128&d=identicon&r=PG&f=1", "display_name": "Haoyuan Ge", "link": "https://stackoverflow.com/users/5682933/haoyuan-ge"}, "reply_to_user": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "edited": false, "score": 0, "creation_date": 1491989146, "post_id": 43365429, "comment_id": 73792648, "body": "@EricDuminil I have updated"}, {"owner": {"reputation": 14827, "user_id": 645886, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2abb0123e9484284a9cb2d36aa9854b3?s=128&d=identicon&r=PG&f=1", "display_name": "Surya", "link": "https://stackoverflow.com/users/645886/surya"}, "edited": false, "score": 0, "creation_date": 1491989174, "post_id": 43365429, "comment_id": 73792671, "body": "@Pao : What&#39;s the result that you get from your code?"}], "answers": [{"tags": [], "owner": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "is_accepted": true, "score": 1, "last_activity_date": 1491989260, "creation_date": 1491989260, "answer_id": 43365566, "question_id": 43365429, "link": "https://stackoverflow.com/questions/43365429/how-to-parse-string-that-are-not-standardized-json-in-ruby/43365566#43365566", "title": "How to parse string that are not standardized JSON in ruby?", "body": "<p>You could use <a href=\"https://ruby-doc.org/core-2.2.0/String.html#method-i-scan\" rel=\"nofollow noreferrer\"><code>scan</code></a> with a regex:</p>\n\n<pre><code>data = %q(\n{ date=\"2017-04-01 10:22:18.306\", message=\"This is a trace Message!\" }\n{ date=\"2017-04-01 10:22:18.306\", message=\"This is a debug message\" }\n)\n\npattern = /date=\"([^\"]+)\", message=\"([^\"]+)\"/\n\nmessages = data.scan(pattern).map{ |date, message|\n  {date: date, message: message}\n} \n\np messages\n# [{:date=&gt;\"2017-04-01 10:22:18.306\", :message=&gt;\"This is a trace Message!\"}, {:date=&gt;\"2017-04-01 10:22:18.306\", :message=&gt;\"This is a debug message\"}]\n</code></pre>\n"}], "owner": {"reputation": 2446, "user_id": 5682933, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/29d72b97ce20902d21488878741621f3?s=128&d=identicon&r=PG&f=1", "display_name": "Haoyuan Ge", "link": "https://stackoverflow.com/users/5682933/haoyuan-ge"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 82, "favorite_count": 0, "accepted_answer_id": 43365566, "answer_count": 1, "score": 1, "last_activity_date": 1491989304, "creation_date": 1491988926, "last_edit_date": 1491989304, "question_id": 43365429, "link": "https://stackoverflow.com/questions/43365429/how-to-parse-string-that-are-not-standardized-json-in-ruby", "title": "How to parse string that are not standardized JSON in ruby?", "body": "<p>I am using fluentd to parse logs, which looks like:</p>\n\n<pre><code>{ date=\"2017-04-01 10:22:18.306\", message=\"This is a trace Message!\" }\n{ date=\"2017-04-01 10:22:18.306\", message=\"This is a debug message\" }\n</code></pre>\n\n<p>While standardized JSON version is supposed to be: </p>\n\n<pre><code>{ \"date\":\"2017-04-01 10:22:18.306\", \"message\":\"This is a trace Message!\" }\n</code></pre>\n\n<p>I have tried </p>\n\n<pre><code>str='{ date=\"2017-04-01 10:22:18.306\", message=\"This is a trace Message!\" }'\nYajl::Parser.parse(str)\n</code></pre>\n\n<p>And it does not work:</p>\n\n<pre><code>Yajl::ParseError: lexical error: invalid char in json text.\n                                     { date=\"2017-04-01 10:22:18.306\",\n                     (right here) ------^\n\n    from /var/lib/gems/2.3.0/gems/yajl-ruby-1.2.1/lib/yajl.rb:37:in `parse'\n    from /var/lib/gems/2.3.0/gems/yajl-ruby-1.2.1/lib/yajl.rb:37:in `parse'\n    from (irb):45\n    from /usr/bin/irb:11:in `&lt;main&gt;'\n</code></pre>\n"}, {"tags": ["sql-server", "ruby", "sql-update", "tiny-tds"], "comments": [{"owner": {"reputation": 2861, "user_id": 7147981, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dbe8dd5dcc8febb7aa022adc3edb7b17?s=128&d=identicon&r=PG&f=1", "display_name": "Mikhail Lobanov", "link": "https://stackoverflow.com/users/7147981/mikhail-lobanov"}, "edited": false, "score": 0, "creation_date": 1491989733, "post_id": 43365349, "comment_id": 73793109, "body": "Is login same in both cases?"}, {"owner": {"reputation": 7994, "user_id": 1625339, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/b8ba46f911517c8b2ccc39e0be9050c0?s=128&d=identicon&r=PG", "display_name": "Aetherus", "link": "https://stackoverflow.com/users/1625339/aetherus"}, "edited": false, "score": 0, "creation_date": 1491990877, "post_id": 43365349, "comment_id": 73794040, "body": "Are there any error messages / stack traces?"}, {"owner": {"reputation": 1, "user_id": 7855463, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/183d5526e59f9efc732c0ed07a1c1d5f?s=128&d=identicon&r=PG&f=1", "display_name": "Steve Lake", "link": "https://stackoverflow.com/users/7855463/steve-lake"}, "edited": false, "score": 0, "creation_date": 1491992371, "post_id": 43365349, "comment_id": 73795126, "body": "Yes; the login is the same in both cases. There&#39;s no error message or stack trace as far as I can see. I did try to capture the return_code, but just got nil"}, {"owner": {"reputation": 8287, "user_id": 3611669, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/f87a44fc3ba9cfb0975908cba210dc30?s=128&d=identicon&r=PG&f=1", "display_name": "GuidoG", "link": "https://stackoverflow.com/users/3611669/guidog"}, "edited": false, "score": 0, "creation_date": 1491993133, "post_id": 43365349, "comment_id": 73795722, "body": "have you captured the query using the profiler to see what exactly the application is sending to sql server ?"}, {"owner": {"reputation": 1, "user_id": 7855463, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/183d5526e59f9efc732c0ed07a1c1d5f?s=128&d=identicon&r=PG&f=1", "display_name": "Steve Lake", "link": "https://stackoverflow.com/users/7855463/steve-lake"}, "edited": false, "score": 0, "creation_date": 1492011328, "post_id": 43365349, "comment_id": 73810099, "body": "Yes; I captured and ran the same query manually in SQL Server Management Studio (using the same login credentials) and the update worked fine. Or am I misunderstanding the question here? What do you mean by &#39;the profiler&#39;?"}, {"owner": {"reputation": 7894, "user_id": 981616, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/92513702d30405c7e2ca056bdc72aa9f?s=128&d=identicon&r=PG", "display_name": "uday", "link": "https://stackoverflow.com/users/981616/uday"}, "edited": false, "score": 0, "creation_date": 1492015095, "post_id": 43365349, "comment_id": 73812564, "body": "what are you doing to update using the tiny_tds code?"}, {"owner": {"reputation": 1, "user_id": 7855463, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/183d5526e59f9efc732c0ed07a1c1d5f?s=128&d=identicon&r=PG&f=1", "display_name": "Steve Lake", "link": "https://stackoverflow.com/users/7855463/steve-lake"}, "edited": false, "score": 0, "creation_date": 1492070356, "post_id": 43365349, "comment_id": 73834616, "body": "I&#39;m creating a client connection to the database nad then executing an SQL query. This is the same approach I use to successfully run SELECT queries against the same table in the same database. However, when I run an UPDATE the data remains unchanged on the table. I&#39;ve run this in debug mode and copied the query which is submitted; when run manually this has the desired effect of updating the data in the table. I&#39;m getting a nil return code from TinyTDS but no error or exception that I know of."}], "owner": {"reputation": 1, "user_id": 7855463, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/183d5526e59f9efc732c0ed07a1c1d5f?s=128&d=identicon&r=PG&f=1", "display_name": "Steve Lake", "link": "https://stackoverflow.com/users/7855463/steve-lake"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 62, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1491988728, "creation_date": 1491988728, "question_id": 43365349, "link": "https://stackoverflow.com/questions/43365349/how-to-update-a-column-in-sqlserver", "title": "How to update a column in sqlserver", "body": "<p>I'm trying to update a column in an SQL Server d/b in my ruby code using TinyTds - without success. When I take a copy of the query and run it manually using SQL Server Management Studio the update works fine, so I guess the syntax must be OK. I have no problem connecting to the d/b to run queries. Are there any particular options I need to set when creating the connection to enable updates? </p>\n"}, {"tags": ["ruby", "byebug"], "comments": [{"owner": {"reputation": 558, "user_id": 5423827, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/l9wEa.jpg?s=128&g=1", "display_name": "suhao399", "link": "https://stackoverflow.com/users/5423827/suhao399"}, "edited": false, "score": 0, "creation_date": 1492497454, "post_id": 43364159, "comment_id": 73985801, "body": "Hi, not sure of your code. You can try to raise an exception it will print out call stack."}], "answers": [{"tags": [], "owner": {"reputation": 1487, "user_id": 2879613, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/9d15495a9fc9602f04d0124d4989b6ab?s=128&d=identicon&r=PG&f=1", "display_name": "ggoha", "link": "https://stackoverflow.com/users/2879613/ggoha"}, "is_accepted": true, "score": 2, "last_activity_date": 1501078726, "creation_date": 1501078726, "answer_id": 45329643, "question_id": 43364159, "link": "https://stackoverflow.com/questions/43364159/call-stack-around-ruby-code/45329643#45329643", "title": "Call stack &quot;around&quot; ruby code", "body": "<p>It's not exactly like that, but it's very similar.</p>\n\n<p>You can use method <code>method</code>. For example </p>\n\n<pre><code>2.method(:hours)\n=&gt; #&lt;Method: Fixnum(Numeric)#hours&gt;\n</code></pre>\n\n<p>or probably more detail</p>\n\n<pre><code>2.method(:hours).source_location\n=&gt; [\"~/.rvm/gems/ruby-2.3.3/gems/activesupport-4.2.7.1/lib/active_support/core_ext/numeric/time.rb\", 29]\n</code></pre>\n\n<p>and after that you can use debuger(if posible) or go deeper</p>\n\n<p>Another detail in this answer <a href=\"https://stackoverflow.com/questions/175655/how-to-find-where-a-method-is-defined-at-runtime\">How to find where a method is defined at runtime?</a></p>\n"}], "owner": {"reputation": 1487, "user_id": 2879613, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/9d15495a9fc9602f04d0124d4989b6ab?s=128&d=identicon&r=PG&f=1", "display_name": "ggoha", "link": "https://stackoverflow.com/users/2879613/ggoha"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 256, "favorite_count": 0, "accepted_answer_id": 45329643, "answer_count": 1, "score": 2, "last_activity_date": 1501078726, "creation_date": 1491985477, "last_edit_date": 1491999371, "question_id": 43364159, "link": "https://stackoverflow.com/questions/43364159/call-stack-around-ruby-code", "title": "Call stack &quot;around&quot; ruby code", "body": "<p>I have a line of Ruby-code with overloading methods. I want to show the call stack of the line.\nI don't know the place for <code>caller</code> or <code>byebug</code>. I want to show the current call stack for the line after execution and find the place for debugging. How can I do it?</p>\n\n<p>Approximately like <code>caller Test.method</code>, and after that:</p>\n\n<pre><code>    from /var/lib/gems/2.3.0/gems/railties-4.2.3/lib/rails/commands/console.rb:110:in `start'\n    from /var/lib/gems/2.3.0/gems/railties-4.2.3/lib/rails/commands/console.rb:9:in `start'\n    from /var/lib/gems/2.3.0/gems/railties-4.2.3/lib/rails/commands/commands_tasks.rb:68:in `console'\n    from /var/lib/gems/2.3.0/gems/railties-4.2.3/lib/rails/commands/commands_tasks.rb:39:in `run_command!'\n    from /var/lib/gems/2.3.0/gems/railties-4.2.3/lib/rails/commands.rb:17:in `&lt;top (required)&gt;'\n</code></pre>\n"}, {"tags": ["ruby", "nokogiri", "mechanize"], "comments": [{"owner": {"reputation": 33085, "user_id": 2423164, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Nxbnp.jpg?s=128&g=1", "display_name": "ndnenkov", "link": "https://stackoverflow.com/users/2423164/ndnenkov"}, "edited": false, "score": 0, "creation_date": 1491985610, "post_id": 43364048, "comment_id": 73789994, "body": "It should be <code>&#39;input[name=&quot;IW_SessionID_&quot;]&#39;</code> and not <code>&#39;form[name=&quot;IW_SessionID_&quot;]&#39;</code>."}, {"owner": {"reputation": 5139, "user_id": 3293148, "user_type": "registered", "accept_rate": 99, "profile_image": "https://www.gravatar.com/avatar/a5b0a16cfd67f7e3944d886fd1bebde5?s=128&d=identicon&r=PG", "display_name": "Jasmine Lognnes", "link": "https://stackoverflow.com/users/3293148/jasmine-lognnes"}, "reply_to_user": {"reputation": 33085, "user_id": 2423164, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Nxbnp.jpg?s=128&g=1", "display_name": "ndnenkov", "link": "https://stackoverflow.com/users/2423164/ndnenkov"}, "edited": false, "score": 0, "creation_date": 1491985845, "post_id": 43364048, "comment_id": 73790153, "body": "Then it doesn&#39;t return anything..."}, {"owner": {"reputation": 33085, "user_id": 2423164, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Nxbnp.jpg?s=128&g=1", "display_name": "ndnenkov", "link": "https://stackoverflow.com/users/2423164/ndnenkov"}, "edited": false, "score": 1, "creation_date": 1491986035, "post_id": 43364048, "comment_id": 73790285, "body": "<code>&#39;input[name=\\&quot;IW_SessionID_\\&quot;]&#39;</code>."}, {"owner": {"reputation": 5139, "user_id": 3293148, "user_type": "registered", "accept_rate": 99, "profile_image": "https://www.gravatar.com/avatar/a5b0a16cfd67f7e3944d886fd1bebde5?s=128&d=identicon&r=PG", "display_name": "Jasmine Lognnes", "link": "https://stackoverflow.com/users/3293148/jasmine-lognnes"}, "reply_to_user": {"reputation": 33085, "user_id": 2423164, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Nxbnp.jpg?s=128&g=1", "display_name": "ndnenkov", "link": "https://stackoverflow.com/users/2423164/ndnenkov"}, "edited": false, "score": 0, "creation_date": 1491986247, "post_id": 43364048, "comment_id": 73790429, "body": "Cool. Now I get <code>&lt;input type=&quot;hidden&quot; name=&#39;\\&quot;IW_SessionID_\\&quot;&#39; value=&#39;\\&quot;1wqzj1f0vec57r1apfqg51wzs88c\\&quot;&#39;&gt;</code>. How can I limit it to just the value?"}, {"owner": {"reputation": 33085, "user_id": 2423164, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Nxbnp.jpg?s=128&g=1", "display_name": "ndnenkov", "link": "https://stackoverflow.com/users/2423164/ndnenkov"}, "edited": false, "score": 1, "creation_date": 1491986768, "post_id": 43364048, "comment_id": 73790798, "body": "<code>page.css(&#39;input[name=\\&quot;IW_SessionID_\\&quot;]&#39;).first[&#39;value&#39;]</code>"}, {"owner": {"reputation": 5139, "user_id": 3293148, "user_type": "registered", "accept_rate": 99, "profile_image": "https://www.gravatar.com/avatar/a5b0a16cfd67f7e3944d886fd1bebde5?s=128&d=identicon&r=PG", "display_name": "Jasmine Lognnes", "link": "https://stackoverflow.com/users/3293148/jasmine-lognnes"}, "reply_to_user": {"reputation": 33085, "user_id": 2423164, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Nxbnp.jpg?s=128&g=1", "display_name": "ndnenkov", "link": "https://stackoverflow.com/users/2423164/ndnenkov"}, "edited": false, "score": 1, "creation_date": 1491986886, "post_id": 43364048, "comment_id": 73790879, "body": "Awesome! That worked =)"}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1581651750, "post_id": 43364048, "comment_id": 106516551, "body": "When asking it&#39;s important to strip the input data to the bare minimum necessary to demonstrate the problem. Anything beyond that wastes our time as we work toward a solution. &quot;<a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">MCVE</a>&quot; and &quot;<a href=\"https://ericlippert.com/2014/03/05/how-to-debug-small-programs/\" rel=\"nofollow noreferrer\">How to debug small programs</a>&quot; explain how to do this."}], "answers": [{"comments": [{"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1581651897, "post_id": 43371930, "comment_id": 106516578, "body": "<code>css(...).first</code> is the same as <code>at_css(...)</code>."}], "tags": [], "owner": {"reputation": 5093, "user_id": 302005, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/eDmEQ.png?s=128&g=1", "display_name": "Pioz", "link": "https://stackoverflow.com/users/302005/pioz"}, "is_accepted": true, "score": 0, "last_activity_date": 1492038097, "last_edit_date": 1492038097, "creation_date": 1492006073, "answer_id": 43371930, "question_id": 43364048, "link": "https://stackoverflow.com/questions/43364048/how-to-parse-forms-with-mechanize-or-nokogiri-from-a-string/43371930#43371930", "title": "How to parse forms with Mechanize or Nokogiri from a string", "body": "<p>You have to unescape your example HTML string, then search the <strong>input</strong> with the name <code>IW_SessionID_</code>.</p>\n\n<p>This sample code works for me:</p>\n\n<pre><code>#!/usr/bin/ruby\n\nrequire 'pp'\nrequire 'nokogiri'\nrequire 'mechanize'\n\nr = '&lt;HTML&gt;&lt;HEAD&gt;&lt;TITLE&gt;&lt;/TITLE&gt;&lt;meta http-equiv=\"cache-control\" content=\"no-cache\"&gt;\\r\\n&lt;meta http-equiv=\"pragma\" content=\"no-cache\"&gt;\\r\\n&lt;NOSCRIPT&gt;&lt;HTML&gt;&lt;BODY&gt;Your browser does not seem to support JavaScript. Please make sure it is supported and activated&lt;/BODY&gt;&lt;/HTML&gt;&lt;/NOSCRIPT&gt;\\r\\n&lt;SCRIPT&gt;\\r\\nvar ie4 = (document.all)? true:false;\\r\\nvar ns6 = (document.getElementById)? true &amp;&amp; !ie4:false;\\r\\nfunction Initialize() {\\r\\nvar lWidth;\\r\\nvar lHeight;\\r\\nif (ns6) {\\r\\n  lWidth = window.innerWidth - 30;\\r\\n  lHeight = window.innerHeight - 30;\\r\\n} else {\\r\\n   lWidth = document.body.clientWidth;\\r\\n   lHeight = document.body.clientHeight;\\r\\n   if (lWidth == 0) { lWidth = undefined;}\\r\\n   if (lHeight == 0) { lHeight = undefined;}\\r\\n}\\r\\ndocument.forms[0].elements[\"IW_width\"].value = lWidth;\\r\\ndocument.forms[0].elements[\"IW_height\"].value = lHeight;\\r\\ndocument.forms[0].submit();\\r\\n}&lt;/SCRIPT&gt;&lt;/HEAD&gt;&lt;BODY onload=\"Initialize()\"&gt;\\r\\n&lt;form method=post action=\"/bwtem\"&gt;\\r\\n&lt;input type=hidden name=\"IW_width\"&gt;\\r\\n&lt;input type=hidden name=\"IW_height\"&gt;\\r\\n&lt;input type=hidden name=\"IW_SessionID_\" value=\"1wqzj1f0vec57r1apfqg51wzs88c\"&gt;\\r\\n&lt;input type=hidden name=\"IW_TrackID_\" value=\"0\"&gt;\\r\\n&lt;/form&gt;&lt;/BODY&gt;&lt;/HTML&gt;'\n\npage = Nokogiri::HTML r\ninput = page.css('input[name=\"IW_SessionID_\"]').first\nputs input[:value]\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1581651833, "post_id": 43381121, "comment_id": 106516568, "body": "&quot;<a href=\"https://stackoverflow.com/q/43594656/128421\">How to avoid joining all text from Nodes when scraping</a>&quot;"}], "tags": [], "owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "is_accepted": false, "score": 0, "last_activity_date": 1492039105, "creation_date": 1492039105, "answer_id": 43381121, "question_id": 43364048, "link": "https://stackoverflow.com/questions/43364048/how-to-parse-forms-with-mechanize-or-nokogiri-from-a-string/43381121#43381121", "title": "How to parse forms with Mechanize or Nokogiri from a string", "body": "<p>It's easy to do once you are familiar with the tools:</p>\n\n<pre><code>require 'nokogiri'\n\ndoc = Nokogiri::HTML(DATA.read)\n\ndoc.at('input[name=\"IW_SessionID_\"]')['value']\n# =&gt; \"1wqzj1f0vec57r1apfqg51wzs88c\"\n\n__END__\n&lt;HTML&gt;\n  &lt;BODY&gt;\n    &lt;form method=post action=\"/bwtem\"&gt;\n      &lt;input type=hidden name=\"IW_height\"&gt;\n      &lt;input type=hidden name=\"IW_SessionID_\" value=\"1wqzj1f0vec57r1apfqg51wzs88c\"&gt;\n      &lt;input type=hidden name=\"IW_TrackID_\" value=\"0\"&gt;\n    &lt;/form&gt;\n  &lt;/BODY&gt;\n&lt;/HTML&gt;\n</code></pre>\n\n<p>Don't do things like:</p>\n\n<pre><code>page.css('form[name=\"IW_SessionID_\"]')\n</code></pre>\n\n<p><code>css</code> is used to search for multiple elements that match the selector. It's highly unlikely a form would have multiple hidden inputs with the same name, so <code>at</code> would be more sensible. <code>css</code> returns a NodeSet, which is like an Array of Nodes, and, as a result doesn't act like a Node:</p>\n\n<pre><code>require 'nokogiri'\n\ndoc = Nokogiri::HTML(&lt;&lt;EOT)\n&lt;html&gt;\n  &lt;body&gt;\n    &lt;p&gt;foo&lt;/p&gt;\n    &lt;p&gt;bar&lt;/p&gt;\n  &lt;/body&gt;\n&lt;/html&gt;\nEOT\n\ndoc.search('p').class # =&gt; Nokogiri::XML::NodeSet\ndoc.at('p').class # =&gt; Nokogiri::XML::Element\n</code></pre>\n\n<p><code>text</code> will concatenate the text elements in the NodeSet resulting in a mess:</p>\n\n<pre><code>doc.search('p').text # =&gt; \"foobar\"\n</code></pre>\n\n<p>whereas using <code>map(&amp;:text)</code> will iterate over the nodes returning their text:</p>\n\n<pre><code>doc.search('p').map(&amp;:text) # =&gt; [\"foo\", \"bar\"]\n</code></pre>\n\n<p>Also note that <code>css(...).first</code> or <code>search(...).first</code> is the same as <code>at</code> or one of its <code>at_*</code> siblings:</p>\n\n<pre><code>doc.search('p').first.to_html # =&gt; \"&lt;p&gt;foo&lt;/p&gt;\"\ndoc.at('p').to_html # =&gt; \"&lt;p&gt;foo&lt;/p&gt;\"\n</code></pre>\n\n<p>So use <code>at</code> instead of <code>search(...).first</code> for clarity.</p>\n\n<p>Finally, strip your HTML sample to the bare minimum necessary to demonstrate the problem you're asking about. Anything beyond that wastes space and our time as we're trying to understand the problem.</p>\n"}], "owner": {"reputation": 5139, "user_id": 3293148, "user_type": "registered", "accept_rate": 99, "profile_image": "https://www.gravatar.com/avatar/a5b0a16cfd67f7e3944d886fd1bebde5?s=128&d=identicon&r=PG", "display_name": "Jasmine Lognnes", "link": "https://stackoverflow.com/users/3293148/jasmine-lognnes"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 937, "favorite_count": 0, "accepted_answer_id": 43371930, "answer_count": 2, "score": 2, "last_activity_date": 1492039105, "creation_date": 1491985184, "last_edit_date": 1492038035, "question_id": 43364048, "link": "https://stackoverflow.com/questions/43364048/how-to-parse-forms-with-mechanize-or-nokogiri-from-a-string", "title": "How to parse forms with Mechanize or Nokogiri from a string", "body": "<p>I need to parse the form to get the value of `IW_SessionID_from the HTML I get back, which I can't get to work.</p>\n\n<pre><code>#!/usr/bin/ruby\n\nrequire 'pp'\nrequire 'nokogiri'\nrequire 'mechanize'\n\nr = '&lt;HTML&gt;&lt;HEAD&gt;&lt;TITLE&gt;&lt;/TITLE&gt;&lt;meta http-equiv=\\\"cache-control\\\" content=\\\"no-cache\\\"&gt;\\r\\n&lt;meta http-equiv=\\\"pragma\\\" content=\\\"no-cache\\\"&gt;\\r\\n&lt;NOSCRIPT&gt;&lt;HTML&gt;&lt;BODY&gt;Your browser does not seem to support JavaScript. Please make sure it is supported and activated&lt;/BODY&gt;&lt;/HTML&gt;&lt;/NOSCRIPT&gt;\\r\\n&lt;SCRIPT&gt;\\r\\nvar ie4 = (document.all)? true:false;\\r\\nvar ns6 = (document.getElementById)? true &amp;&amp; !ie4:false;\\r\\nfunction Initialize() {\\r\\nvar lWidth;\\r\\nvar lHeight;\\r\\nif (ns6) {\\r\\n  lWidth = window.innerWidth - 30;\\r\\n  lHeight = window.innerHeight - 30;\\r\\n} else {\\r\\n   lWidth = document.body.clientWidth;\\r\\n   lHeight = document.body.clientHeight;\\r\\n   if (lWidth == 0) { lWidth = undefined;}\\r\\n   if (lHeight == 0) { lHeight = undefined;}\\r\\n}\\r\\ndocument.forms[0].elements[\\\"IW_width\\\"].value = lWidth;\\r\\ndocument.forms[0].elements[\\\"IW_height\\\"].value = lHeight;\\r\\ndocument.forms[0].submit();\\r\\n}&lt;/SCRIPT&gt;&lt;/HEAD&gt;&lt;BODY onload=\\\"Initialize()\\\"&gt;\\r\\n&lt;form method=post action=\\\"/bwtem\\\"&gt;\\r\\n&lt;input type=hidden name=\\\"IW_width\\\"&gt;\\r\\n&lt;input type=hidden name=\\\"IW_height\\\"&gt;\\r\\n&lt;input type=hidden name=\\\"IW_SessionID_\\\" value=\\\"1wqzj1f0vec57r1apfqg51wzs88c\\\"&gt;\\r\\n&lt;input type=hidden name=\\\"IW_TrackID_\\\" value=\\\"0\\\"&gt;\\r\\n&lt;/form&gt;&lt;/BODY&gt;&lt;/HTML&gt;'\n\npage = Nokogiri::HTML r\nputs page.css('form[name=\"IW_SessionID_\"]')\n\na = Mechanize.new\npage2 = Mechanize::Page.new(nil,{'content-type'=&gt;'text/html'},r,nil,a)\n\npp page2.form_with(:name =&gt; \"IW_SessionID_\")\n</code></pre>\n\n<p>The script just returns <code>nil</code>.</p>\n\n<p>Can anyone figure out how to get the value of <code>IW_SessionID_</code>?</p>\n"}, {"tags": ["ruby", "utf-8", "pack"], "comments": [{"owner": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "edited": false, "score": 0, "creation_date": 1491987343, "post_id": 43363184, "comment_id": 73791259, "body": "Do you have an example of <code>clean</code> array?"}, {"owner": {"reputation": 4075, "user_id": 2291357, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/dff442b2192921f04f324948d263e001?s=128&d=identicon&r=PG", "display_name": "Jerome", "link": "https://stackoverflow.com/users/2291357/jerome"}, "reply_to_user": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "edited": false, "score": 0, "creation_date": 1491988721, "post_id": 43363184, "comment_id": 73792342, "body": "question updated above"}, {"owner": {"reputation": 91121, "user_id": 179125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5594142dcc49a24b1902ec8059181f8d?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan Running", "link": "https://stackoverflow.com/users/179125/jordan-running"}, "edited": false, "score": 1, "creation_date": 1492015570, "post_id": 43363184, "comment_id": 73812842, "body": "&quot;High-ASCII,&quot; like &quot;extended ASCII,&quot; is an imprecise term that adds more confusion to your question than it does clarity. If you want to refer to characters that are represented by more than one byte in UTF-8, a good term to use is &quot;multi-byte UTF-8 character.&quot;"}], "answers": [{"tags": [], "owner": {"reputation": 74087, "user_id": 214790, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f878c8230342730990acd21f889301d4?s=128&d=identicon&r=PG", "display_name": "matt", "link": "https://stackoverflow.com/users/214790/matt"}, "is_accepted": false, "score": 1, "last_activity_date": 1492020124, "last_edit_date": 1492020124, "creation_date": 1492014880, "answer_id": 43375083, "question_id": 43363184, "link": "https://stackoverflow.com/questions/43363184/ruby-pack-and-latin-high-ascii-characters/43375083#43375083", "title": "Ruby pack and Latin (high-ASCII) characters", "body": "<p>It looks like you are trying to use <code>pack</code> to format strings to fixed width columns for display. That\u2019s not what it\u2019s for, it is generally used for packing data into fixed <em>byte</em> structures for things like network protocols.</p>\n\n<p>You probably want to use a format string instead, which is better suited for manipulating data for display.</p>\n\n<p>Have a look at <a href=\"http://ruby-doc.org/core-2.4.1/String.html#method-i-25\" rel=\"nofollow noreferrer\"><code>String#%</code></a> (i.e. the <code>%</code> method on string). Like <code>pack</code> it uses another little language which is defined in <a href=\"http://ruby-doc.org/core-2.4.1/Kernel.html#method-i-sprintf\" rel=\"nofollow noreferrer\"><code>Kernel#sprintf</code></a>.</p>\n\n<p>Taking a simplified example, with the two arrays:</p>\n\n<pre><code>plain = [\"Iseo\", \"Next field\"]\naccent = [\"Piet\u00e0\", \"Next field\"]\n</code></pre>\n\n<p>then using <code>pack</code> like this:</p>\n\n<pre><code>puts plain.pack(\"A10A10\")\nputs accent.pack(\"A10A10\")\n</code></pre>\n\n<p>will produce a result that looks like this, where \u201cNext field\u201d isn\u2019t aligned since <code>pack</code> is dealing with the <em>width in bytes</em>, not the <em>displayed width</em>:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>Iseo      Next field\nPiet\u00e0    Next field\n</code></pre>\n\n<p>Using a format string, like this:</p>\n\n<pre><code>puts \"%-10s%-10s\" % plain\nputs \"%-10s%-10s\" % accent\n</code></pre>\n\n<p>produces the desired result, since it is dealing with the displayable width:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>Iseo      Next field\nPiet\u00e0     Next field\n</code></pre>\n"}], "owner": {"reputation": 4075, "user_id": 2291357, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/dff442b2192921f04f324948d263e001?s=128&d=identicon&r=PG", "display_name": "Jerome", "link": "https://stackoverflow.com/users/2291357/jerome"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 68, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1492020124, "creation_date": 1491982509, "last_edit_date": 1491988685, "question_id": 43363184, "link": "https://stackoverflow.com/questions/43363184/ruby-pack-and-latin-high-ascii-characters", "title": "Ruby pack and Latin (high-ASCII) characters", "body": "<p>An action outputs a fixed-length string via Ruby's pack function</p>\n\n<pre><code>clean = [edc_unico,  sequenza_sede, cliente_id.to_s, nome, indirizzo, cap,  comune, provincia, persona, note, telefono,  email]\nstring  = clean.pack('A15A5A6A40A35A5A30A2A40A40A18A25')\n</code></pre>\n\n<p>However, the data is in UTF-8 as to allow latin/high-ascii characters.  The result of the pack action is logical. high-ascii characters take the space of 2 regular ascii characters. The resulting string is shortened by 1 space character, defeating the original purpose.</p>\n\n<p>What would be a concise ruby command to interpret high-ascii characters and thus add an extra space at the end of each variable for each high-ascii character, so that the length can be brought to its proper target?  (note: I am assuming there is no directive that addresses this specifically, and the whole lot of pack directives is mind-muddling)</p>\n\n<p><strong>update</strong>  an example where the second line shifts positions based on accented characters</p>\n\n<pre><code>CNFrigo                                         539                                     Via Privata Da Via Iseo 6C                                            20098San Giuliano Milanese         MI02 98282410                         02 98287686       12886480156     12886480156 Bo3                 Euro                Giuseppe Frigo Transport 349 2803433                                                                                                                                                                                                                                                                   M.Gianoli@Delanchy.Fr S.Galliard@Delanchy.Fr      \nCNIn's M                                        497                                     Via Istituto S.Maria della Piet\u00e0,                                    30173Venezia                       Ve041 8690111       340 6311408       0041 5136113      00115180283     02896940273 B60Fm               Euro                Per Documentazioni Tecniche Inviare Materiale A : Silvia_Scarpa@Insmercato.It Amministrazione : Michela_Bianco@Insmercato.It Silvia Scarpa Per Liberatorie 041/5136171 Sig.Ra Bianco Per Pagamento Fatture 041/5136111 (Solo Il Giovedi Pomeriggio Dalle 14 All                                        Beniservizi.Insmercato@Pec.Gruppopam.It           \n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "attachment", "mailgun", "wicked-pdf"], "comments": [{"owner": {"reputation": 17497, "user_id": 23915, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b5e935da7b67c03dd56f385b031f485c?s=128&d=identicon&r=PG", "display_name": "Unixmonkey", "link": "https://stackoverflow.com/users/23915/unixmonkey"}, "edited": false, "score": 0, "creation_date": 1494872408, "post_id": 43362991, "comment_id": 75001813, "body": "A PDF as a string will often contain a null byte. That tells me it&#39;s working. <a href=\"https://github.com/mailgun/mailgun-ruby/blob/master/docs/MessageBuilder.md\" rel=\"nofollow noreferrer\">The Mailgun MessageBuilder documentation</a> says <code>add_attachment</code> should be a path to the file on disk, not a string in memory. <a href=\"https://github.com/mailgun/mailgun-ruby/blob/master/lib/mailgun/messages/message_builder.rb#L398\" rel=\"nofollow noreferrer\">Here&#39;s the relevant line of code</a>"}, {"owner": {"reputation": 1726, "user_id": 4890595, "user_type": "registered", "accept_rate": 55, "profile_image": "https://lh3.googleusercontent.com/-9rPtty8_fOI/AAAAAAAAAAI/AAAAAAAAA0Y/wmx2PYqTMEQ/photo.jpg?sz=128", "display_name": "Code-MonKy", "link": "https://stackoverflow.com/users/4890595/code-monky"}, "reply_to_user": {"reputation": 17497, "user_id": 23915, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b5e935da7b67c03dd56f385b031f485c?s=128&d=identicon&r=PG", "display_name": "Unixmonkey", "link": "https://stackoverflow.com/users/23915/unixmonkey"}, "edited": false, "score": 0, "creation_date": 1495092407, "post_id": 43362991, "comment_id": 75108420, "body": "Thanks. Yes I figured having the files saved somewhere would be best, so all the invoices&#39; pdf&#39;s have to go to S3. Thing is, this would use somewhat the same mechanics. Anyway, I&#39;ll check the <code>add_attachment</code> by using an other random file that I actually do have saved. From wicked pdf to S3 is another one to solve."}], "owner": {"reputation": 1726, "user_id": 4890595, "user_type": "registered", "accept_rate": 55, "profile_image": "https://lh3.googleusercontent.com/-9rPtty8_fOI/AAAAAAAAAAI/AAAAAAAAA0Y/wmx2PYqTMEQ/photo.jpg?sz=128", "display_name": "Code-MonKy", "link": "https://stackoverflow.com/users/4890595/code-monky"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 185, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1495093154, "creation_date": 1491981927, "last_edit_date": 1495093154, "question_id": 43362991, "link": "https://stackoverflow.com/questions/43362991/in-rails-5-how-to-use-wicked-pdf-and-mailgun-together", "title": "In Rails 5 how to use wicked pdf and mailgun together?", "body": "<p>Using the mailgun API is slightly different from using ActionMailer. \nOften I see something like this:</p>\n\n<p><code>attachment['...'] = ...</code></p>\n\n<p>in the solutions I found.. </p>\n\n<p>but what I am trying to build with mailgun currently looks like this:</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>def print\n  @invoice = Invoice.find(params[:id])\n  @order = @invoice.order\n  @customer = @order.customer\n  pdf = render_to_string(:pdf       =&gt; 'file_name', \n                         :template  =&gt; 'invoices/invoice.pdf.erb', \n                         :layout    =&gt; 'invoice_pdf.html')\n\n\n\n  mg_client = Mailgun::Client.new 'key-xxxxxx'\n  mb_object = Mailgun::MessageBuilder.new\n\n  mb_object.add_attachment pdf\n  mg_client.send_message 'mg.mydomain.com', mb_object\nend\n</code></pre>\n\n<p>And when I press the \"print\" button in my application (the pdf is meant to be send to a printer), then I get:</p>\n\n<p><strong>string contains null byte</strong></p>\n\n<p>(highlight!) <code>mb_object.add_attachment pdf</code></p>\n\n<p>Apparently the <code>pdf</code> object is not really something. \nHow could this be?</p>\n\n<p><strong>EDIT 1</strong></p>\n\n<p>Maybe it's better to ask, since this also needs to be done: How do I save from wicked pdf to S3 (in as few steps as possible).</p>\n"}, {"tags": ["arrays", "ruby"], "answers": [{"comments": [{"owner": {"reputation": 33085, "user_id": 2423164, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Nxbnp.jpg?s=128&g=1", "display_name": "ndnenkov", "link": "https://stackoverflow.com/users/2423164/ndnenkov"}, "edited": false, "score": 4, "creation_date": 1491983395, "post_id": 43362919, "comment_id": 73788557, "body": "Note that this will fail if <code>a</code> contains <code>false</code>s."}, {"owner": {"reputation": 12629, "user_id": 4739257, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/MdhEs.jpg?s=128&g=1", "display_name": "Ilya", "link": "https://stackoverflow.com/users/4739257/ilya"}, "edited": false, "score": 1, "creation_date": 1491983449, "post_id": 43362919, "comment_id": 73788591, "body": "If you don&#39;t care about falses, <code>[a, b].transpose.map {|f, s| f || s}</code> works as well :)"}], "tags": [], "owner": {"reputation": 34664, "user_id": 390819, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ee2ef44de10f7791cca06df317246935?s=128&d=identicon&r=PG", "display_name": "Cristian Lupascu", "link": "https://stackoverflow.com/users/390819/cristian-lupascu"}, "is_accepted": true, "score": 6, "last_activity_date": 1491981696, "creation_date": 1491981696, "answer_id": 43362919, "question_id": 43362863, "link": "https://stackoverflow.com/questions/43362863/best-way-to-replace-nils-from-array-with-elements-of-another-array/43362919#43362919", "title": "Best way to replace nils from array with elements of another array", "body": "<p>You can use <code>zip</code> and the <code>||</code> operator to do it:</p>\n\n<pre><code>result = a.zip(b).map{ |x,y| x || y } \n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 12629, "user_id": 4739257, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/MdhEs.jpg?s=128&g=1", "display_name": "Ilya", "link": "https://stackoverflow.com/users/4739257/ilya"}, "is_accepted": false, "score": 5, "last_activity_date": 1491984032, "last_edit_date": 1491984032, "creation_date": 1491982810, "answer_id": 43363287, "question_id": 43362863, "link": "https://stackoverflow.com/questions/43362863/best-way-to-replace-nils-from-array-with-elements-of-another-array/43363287#43363287", "title": "Best way to replace nils from array with elements of another array", "body": "<p>If you want to replace exactly <code>nil</code>, but not <code>false</code> elements:</p>\n\n<pre><code>a.map.with_index { |e, i| e.nil? ? b[i] : e }\n# =&gt; [4, 1, 6]\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 12629, "user_id": 4739257, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/MdhEs.jpg?s=128&g=1", "display_name": "Ilya", "link": "https://stackoverflow.com/users/4739257/ilya"}, "edited": false, "score": 2, "creation_date": 1491984569, "post_id": 43363670, "comment_id": 73789290, "body": "<code>a.zip(b).map { |e| e.compact[0] }</code> 2 iterations instead of 3 :)"}], "tags": [], "owner": {"reputation": 9030, "user_id": 5101476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JCQrl.jpg?s=128&g=1", "display_name": "ice\u30c4", "link": "https://stackoverflow.com/users/5101476/ice%e3%83%84"}, "is_accepted": false, "score": 5, "last_activity_date": 1491984054, "creation_date": 1491984054, "answer_id": 43363670, "question_id": 43362863, "link": "https://stackoverflow.com/questions/43362863/best-way-to-replace-nils-from-array-with-elements-of-another-array/43363670#43363670", "title": "Best way to replace nils from array with elements of another array", "body": "<p>You can use </p>\n\n<pre><code>a.zip(b).map(&amp;:compact).map(&amp;:first) #=&gt; [4, 1, 6]\n</code></pre>\n\n<p>Steps:</p>\n\n<pre><code>a.zip(b)\n#=&gt; [[nil, 4], [1, 5], [nil, 6]]\na.zip(b).map(&amp;:compact)\n#=&gt; [[4], [1, 5], [6]]\na.zip(b).map(&amp;:compact).map(&amp;:first)\n#=&gt; [4, 1, 6]\n</code></pre>\n\n<p>By virtue of <a href=\"http://ruby-doc.org/core-2.4.1/Array.html#method-i-compact\" rel=\"noreferrer\"><code>Array#compact</code></a> this approach removes <code>nil</code> elements only from the zipped pairs i.e. <code>false</code> elements are not removed.</p>\n"}, {"comments": [{"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1491984445, "post_id": 43363756, "comment_id": 73789209, "body": "@ndn Yes, you are right. I was thinking about it too."}], "tags": [], "owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "is_accepted": false, "score": 0, "last_activity_date": 1491984380, "last_edit_date": 1491984380, "creation_date": 1491984312, "answer_id": 43363756, "question_id": 43362863, "link": "https://stackoverflow.com/questions/43362863/best-way-to-replace-nils-from-array-with-elements-of-another-array/43363756#43363756", "title": "Best way to replace nils from array with elements of another array", "body": "<p>Still another variant:</p>\n\n<pre><code>a.zip(b).map{|a, b| [*a, *b].first}\n# =&gt; [4, 1, 6]\n</code></pre>\n\n<p>This distinguishes <code>nil</code> from <code>false</code>, as expected. But note that you cannot use this with elements that are broken by <code>to_a</code>, such as hashes.</p>\n"}, {"tags": [], "owner": {"reputation": 14827, "user_id": 645886, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2abb0123e9484284a9cb2d36aa9854b3?s=128&d=identicon&r=PG&f=1", "display_name": "Surya", "link": "https://stackoverflow.com/users/645886/surya"}, "is_accepted": false, "score": 3, "last_activity_date": 1491986358, "creation_date": 1491986358, "answer_id": 43364457, "question_id": 43362863, "link": "https://stackoverflow.com/questions/43362863/best-way-to-replace-nils-from-array-with-elements-of-another-array/43364457#43364457", "title": "Best way to replace nils from array with elements of another array", "body": "<p>Another way is by using a block when <a href=\"http://ruby-doc.org/core-2.4.1/Array.html#class-Array-label-Creating+Arrays\" rel=\"nofollow noreferrer\">creating this new array</a> like so:</p>\n\n<pre><code>a = [nil, 1, nil]\nb = [4, 5, 6]\nArray.new(a.size) { |i| a[i].nil? ? b[i] : a[i] }\n#=&gt; [4, 1, 6]\n</code></pre>\n"}], "owner": {"reputation": 2450, "user_id": 1114667, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/c855f4e65f04cfbbe403fdb18e32fdfd?s=128&d=identicon&r=PG", "display_name": "Ilya Lavrov", "link": "https://stackoverflow.com/users/1114667/ilya-lavrov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 279, "favorite_count": 0, "accepted_answer_id": 43362919, "answer_count": 5, "score": 3, "last_activity_date": 1491986358, "creation_date": 1491981514, "question_id": 43362863, "link": "https://stackoverflow.com/questions/43362863/best-way-to-replace-nils-from-array-with-elements-of-another-array", "title": "Best way to replace nils from array with elements of another array", "body": "<p>I have two arrays:</p>\n\n<pre><code>a = [nil, 1, nil]\nb = [4, 5, 6]\n</code></pre>\n\n<p>And i want to replace nil elements from first array with related elements from second array:</p>\n\n<pre><code>[4, 1, 6]\n</code></pre>\n\n<p>What is the best way to do it?</p>\n"}, {"tags": ["arrays", "ruby"], "answers": [{"comments": [{"owner": {"reputation": 9030, "user_id": 5101476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JCQrl.jpg?s=128&g=1", "display_name": "ice\u30c4", "link": "https://stackoverflow.com/users/5101476/ice%e3%83%84"}, "reply_to_user": {"reputation": 47232, "user_id": 1772830, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Qtoqg.jpg?s=128&g=1", "display_name": "Andrey Deineko", "link": "https://stackoverflow.com/users/1772830/andrey-deineko"}, "edited": false, "score": 0, "creation_date": 1491982613, "post_id": 43362625, "comment_id": 73788105, "body": "@AndreyDeineko I think <a href=\"https://meta.stackexchange.com/questions/91922/how-was-this-answer-posted-after-this-question-was-closed\">this</a> answers your query.  Also as a side note, do you recommend I delete this answer?"}, {"owner": {"reputation": 47232, "user_id": 1772830, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Qtoqg.jpg?s=128&g=1", "display_name": "Andrey Deineko", "link": "https://stackoverflow.com/users/1772830/andrey-deineko"}, "edited": false, "score": 1, "creation_date": 1491982803, "post_id": 43362625, "comment_id": 73788229, "body": "Thx for the link to thread! You use <code>reject</code> and linked question uses <code>delete_if</code>, so I think it&#39;s something new and won&#39;t say you need to delete it :) But up to you, of course :)"}], "tags": [], "owner": {"reputation": 9030, "user_id": 5101476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JCQrl.jpg?s=128&g=1", "display_name": "ice\u30c4", "link": "https://stackoverflow.com/users/5101476/ice%e3%83%84"}, "is_accepted": false, "score": 5, "last_activity_date": 1530470949, "last_edit_date": 1530470949, "creation_date": 1491980796, "answer_id": 43362625, "question_id": 43362562, "link": "https://stackoverflow.com/questions/43362562/removing-multiple-elements-from-array-by-index-in-ruby/43362625#43362625", "title": "Removing multiple elements from array by index in Ruby", "body": "<p>You can use <code>reject</code> with <code>with_index</code>:</p>\n\n<pre><code>x.reject.with_index { |e, i| y.include? i } #=&gt; [2, 5]\n</code></pre>\n"}], "owner": {"reputation": 287, "user_id": 4235470, "user_type": "registered", "accept_rate": 75, "profile_image": "https://graph.facebook.com/590224531/picture?type=large", "display_name": "MikamiHero", "link": "https://stackoverflow.com/users/4235470/mikamihero"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 6253, "favorite_count": 1, "closed_date": 1491980634, "answer_count": 1, "score": 7, "last_activity_date": 1530470949, "creation_date": 1491980592, "last_edit_date": 1491980846, "question_id": 43362562, "link": "https://stackoverflow.com/questions/43362562/removing-multiple-elements-from-array-by-index-in-ruby", "closed_reason": "Duplicate", "title": "Removing multiple elements from array by index in Ruby", "body": "<p>I have an array. For example,</p>\n\n<pre><code>x = [1,2,3,4,5]\n</code></pre>\n\n<p>I know the command</p>\n\n<pre><code>x.delete_at(i)\n</code></pre>\n\n<p>will delete the element at index <em>i</em> from the array. But from what I've read, it can only handle one argument.</p>\n\n<p>Let's say I have a variable that stores the indexes I wish to remove from <em>x</em>. For example,</p>\n\n<pre><code>y = [0,2,3]\n</code></pre>\n\n<p>My question: <strong>Is it possible to remove multiple elements from an array using another array that stores in the indexes you wish to delete at?</strong></p>\n\n<p>In essence, something like</p>\n\n<pre><code>x.delete_at(y)\n</code></pre>\n\n<p>Thanks! :)</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-3"], "comments": [{"owner": {"reputation": 418, "user_id": 6331585, "user_type": "registered", "accept_rate": 60, "profile_image": "https://lh5.googleusercontent.com/--Spi1QdCgC0/AAAAAAAAAAI/AAAAAAAABnU/sJNL2oLTBHY/photo.jpg?sz=128", "display_name": "Vishwas Nahar", "link": "https://stackoverflow.com/users/6331585/vishwas-nahar"}, "edited": false, "score": 0, "creation_date": 1491979407, "post_id": 43362119, "comment_id": 73786105, "body": "try with - run bundle install"}, {"owner": {"reputation": 131, "user_id": 6995153, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/eb2926eafac27376d8d0abd4da4160ed?s=128&d=identicon&r=PG&f=1", "display_name": "RoR Developer", "link": "https://stackoverflow.com/users/6995153/ror-developer"}, "reply_to_user": {"reputation": 418, "user_id": 6331585, "user_type": "registered", "accept_rate": 60, "profile_image": "https://lh5.googleusercontent.com/--Spi1QdCgC0/AAAAAAAAAAI/AAAAAAAABnU/sJNL2oLTBHY/photo.jpg?sz=128", "display_name": "Vishwas Nahar", "link": "https://stackoverflow.com/users/6331585/vishwas-nahar"}, "edited": false, "score": 0, "creation_date": 1491979740, "post_id": 43362119, "comment_id": 73786325, "body": "@vishwasnahar Still not working. getting same error."}], "owner": {"reputation": 131, "user_id": 6995153, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/eb2926eafac27376d8d0abd4da4160ed?s=128&d=identicon&r=PG&f=1", "display_name": "RoR Developer", "link": "https://stackoverflow.com/users/6995153/ror-developer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 242, "favorite_count": 1, "answer_count": 0, "score": 0, "last_activity_date": 1491980062, "creation_date": 1491979186, "last_edit_date": 1491980062, "question_id": 43362119, "link": "https://stackoverflow.com/questions/43362119/no-such-file-or-directory-rake-project-folder-name-init-loaderror", "title": "No such file or directory -- rake [PROJECT-FOLDER-NAME] init ... (LoadError)", "body": "<p>I have rails 3.2.0 application and ruby is - 2.1.2.\nWhen I'm running below command</p>\n\n<pre><code>rake assets:precompile \n</code></pre>\n\n<p>I'm getting error like</p>\n\n<pre><code>.rvm/rubies/ruby-2.1.2/bin/ruby: No such file or directory -- rake [PROJECT-FOLDER-NAME] init ... (LoadError)\nrake aborted!\n</code></pre>\n\n<p>What's wrong with Precompile not getting so please Help me</p>\n"}, {"tags": ["ruby", "dictionary", "ruby-hash"], "comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 2, "creation_date": 1491978339, "post_id": 43361700, "comment_id": 73785541, "body": "Can you convert that input file to JSON or YAML or anything that&#39;s more conventional? Even CSV would be a step up."}, {"owner": {"reputation": 151, "user_id": 4425229, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/3Ltpc.jpg?s=128&g=1", "display_name": "TheMightyNight", "link": "https://stackoverflow.com/users/4425229/themightynight"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1491978999, "post_id": 43361700, "comment_id": 73785856, "body": "@tadman: Yes i can. Conversion from whichever file format will be helpful."}, {"owner": {"reputation": 16089, "user_id": 726239, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/l4w57.jpg?s=128&g=1", "display_name": "Shaunak", "link": "https://stackoverflow.com/users/726239/shaunak"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1491979248, "post_id": 43361700, "comment_id": 73786003, "body": "@tadman is exactly right. please check my answer that shows how to do this with a working example."}, {"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1491981136, "post_id": 43361700, "comment_id": 73787138, "body": "What have you tried? What is the code you are having trouble with? What is the problem with your code? Do you get an error? If yes, what is the precise error you are getting? Does the actual result differ from the expected result? If yes, what is the result you are expecting, why are you expecting that result, what is the actual result and how do they differ? Does the observed behavior of the code differ from the intended behavior? If yes, what is the intended behavior and why, what is the behavior you are seeing, and how do they differ? What is the specification for the intended behavior?"}], "answers": [{"tags": [], "owner": {"reputation": 16089, "user_id": 726239, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/l4w57.jpg?s=128&g=1", "display_name": "Shaunak", "link": "https://stackoverflow.com/users/726239/shaunak"}, "is_accepted": true, "score": 5, "last_activity_date": 1491979300, "last_edit_date": 1491979300, "creation_date": 1491978918, "answer_id": 43362036, "question_id": 43361700, "link": "https://stackoverflow.com/questions/43361700/ruby-parse-a-file-into-hash/43362036#43362036", "title": "Ruby - Parse a file into hash", "body": "<p>If like you say you have control over creating the original data file, then creating it in json format would make accessing it trivial. </p>\n\n<p>Here is a <a href=\"https://repl.it/HGZV/4\" rel=\"nofollow noreferrer\">repl.it of complete working example</a>. Just select the <code>main.rb</code> file and hit run!</p>\n\n<p>For example if you create json file like: </p>\n\n<blockquote>\n  <p>data.json</p>\n</blockquote>\n\n<pre><code>{\n  \"cefcFRUPowerOperStatus\": {\n    \"type\": \"PowerOperType\",\n    \"status\": {\n      \"1\": \"offEnvOther\",\n      \"2\": \"on\",\n      \"3\": \"offAdmin\",\n      \"4\": \"offDenied\",\n      \"5\": \"offEnvPower\",\n      \"6\": \"offEnvTemp\"\n    }\n  },\n  \"cefcModuleOperStatus\": {\n    \"type\": \"ModuleOperType\",\n    \"status\": {\n      \"1\": \"unknown\",\n      \"2\": \"ok\",\n      \"3\": \"disabled\",\n      \"4\": \"okButDiagFailed\",\n      \"5\": \"boot\",\n      \"6\": \"selfTest\"\n    }\n  }\n}\n</code></pre>\n\n<p>Then parsing it and accessing it in Ruby is as simple as : </p>\n\n<pre><code>require 'json'\nfile = File.read('data.json')\ndata = JSON.parse(file)\n\n#accessing this data is simple now:\n\nputs data[\"cefcModuleOperStatus\"][\"status\"][\"4\"]\n# &gt; okButDiagFailed\n</code></pre>\n\n<p><strong>Note:</strong> that this JSON format will work if your statuses are unique. If they are not, you can still use this way, but you will need to convert JSON to an array format. Let me know if this is the case and I can show you how to modify the json and ruby code for this.</p>\n\n<p>Hope that helps, let me know if you have further questions about how this works. </p>\n"}], "owner": {"reputation": 151, "user_id": 4425229, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/3Ltpc.jpg?s=128&g=1", "display_name": "TheMightyNight", "link": "https://stackoverflow.com/users/4425229/themightynight"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 671, "favorite_count": 0, "accepted_answer_id": 43362036, "answer_count": 1, "score": 1, "last_activity_date": 1494690823, "creation_date": 1491977843, "last_edit_date": 1494690823, "question_id": 43361700, "link": "https://stackoverflow.com/questions/43361700/ruby-parse-a-file-into-hash", "title": "Ruby - Parse a file into hash", "body": "<p>I've a file containing hundreds of object and value combination like below manner. I want to get input from user as object name &amp; numeric value and return that associated value.</p>\n\n<pre><code>Object  cefcFRUPowerOperStatus\nType    PowerOperType \n        1:offEnvOther\n        2:on\n        3:offAdmin\n        4:offDenied\n        5:offEnvPower\n        6:offEnvTemp\n\nObject  cefcModuleOperStatus\nType    ModuleOperType \n        1:unknown\n        2:ok\n        3:disabled\n        4:okButDiagFailed\n        5:boot\n        6:selfTest\n</code></pre>\n\n<p>E.g. - input - </p>\n\n<pre><code>           objectName = 'cefcModuleOperStatus'\n\n           TypeNumber = '4'\n</code></pre>\n\n<p>Return -       'okButDiagFailed'</p>\n\n<p>I am not aware of Ruby and get this done to help my peer. So please excuse if this is a novice question.</p>\n\n<p>Note:- I've to create the file so with any file format it would be a  great help.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-3", "railstutorial.org"], "comments": [{"owner": {"reputation": 23312, "user_id": 560215, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/bb365e8477053edcc55b40c3d27781d8?s=128&d=identicon&r=PG", "display_name": "sevenseacat", "link": "https://stackoverflow.com/users/560215/sevenseacat"}, "edited": false, "score": 0, "creation_date": 1491975213, "post_id": 43360963, "comment_id": 73784130, "body": "where are you removing the value of <code>cookies[:remember_token]</code>?"}, {"owner": {"reputation": 1180, "user_id": 6157949, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/YBymK.png?s=128&g=1", "display_name": "catch22", "link": "https://stackoverflow.com/users/6157949/catch22"}, "edited": false, "score": 0, "creation_date": 1491981153, "post_id": 43360963, "comment_id": 73787147, "body": "can you provide sessions_helper.rb code? which is line 53 in your users_login_test.rb ?"}, {"owner": {"reputation": 31, "user_id": 7628624, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/46c814d7b6d08402d5eec7a26fb2799d?s=128&d=identicon&r=PG&f=1", "display_name": "P. Joe", "link": "https://stackoverflow.com/users/7628624/p-joe"}, "edited": false, "score": 0, "creation_date": 1491981449, "post_id": 43360963, "comment_id": 73787343, "body": "Sure, has been added."}, {"owner": {"reputation": 1180, "user_id": 6157949, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/YBymK.png?s=128&g=1", "display_name": "catch22", "link": "https://stackoverflow.com/users/6157949/catch22"}, "edited": false, "score": 0, "creation_date": 1491982539, "post_id": 43360963, "comment_id": 73788051, "body": "seems alright.. What about the User model?"}, {"owner": {"reputation": 31, "user_id": 7628624, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/46c814d7b6d08402d5eec7a26fb2799d?s=128&d=identicon&r=PG&f=1", "display_name": "P. Joe", "link": "https://stackoverflow.com/users/7628624/p-joe"}, "edited": false, "score": 0, "creation_date": 1491986460, "post_id": 43360963, "comment_id": 73790595, "body": "Thanks for having a look. User model added"}, {"owner": {"reputation": 1180, "user_id": 6157949, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/YBymK.png?s=128&g=1", "display_name": "catch22", "link": "https://stackoverflow.com/users/6157949/catch22"}, "edited": false, "score": 0, "creation_date": 1491990199, "post_id": 43360963, "comment_id": 73793512, "body": "Uhm... try moving forward and complete Listing 9.27. You might be able to patch the issue. I can&#39;t identify it, sorry."}], "answers": [{"tags": [], "owner": {"reputation": 41, "user_id": 4276293, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4e334844a069729fdbaae963f7f04d61?s=128&d=identicon&r=PG", "display_name": "McCraigor", "link": "https://stackoverflow.com/users/4276293/mccraigor"}, "is_accepted": false, "score": 2, "last_activity_date": 1492560128, "creation_date": 1492560128, "answer_id": 43484102, "question_id": 43360963, "link": "https://stackoverflow.com/questions/43360963/expected-g-wwu6wmdhcr3vz3ynhglw-to-be-empty-ror-tutorial-chapter-9/43484102#43484102", "title": "Expected &quot;G-WWU6wMDhCr3VZ3YnHglw&quot; to be empty -&gt; RoR Tutorial Chapter 9", "body": "<p>Check out the <code>create</code> method in your <code>SessionsController</code>. With this line, you remember or forget the user depending on the <code>:remember_me</code> parameter:</p>\n\n<p><code>params[:session] [:remember_me] == '1' ? remember(user) : forget(user)</code></p>\n\n<p>Then with the very next line, you remember the user anyway:</p>\n\n<p><code>remember user</code></p>\n\n<p>Removing that second line fixes your test and application.</p>\n\n<p>Best of luck with the rest of the tutorial!</p>\n"}], "owner": {"reputation": 31, "user_id": 7628624, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/46c814d7b6d08402d5eec7a26fb2799d?s=128&d=identicon&r=PG&f=1", "display_name": "P. Joe", "link": "https://stackoverflow.com/users/7628624/p-joe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 398, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1492560128, "creation_date": 1491974856, "last_edit_date": 1491986421, "question_id": 43360963, "link": "https://stackoverflow.com/questions/43360963/expected-g-wwu6wmdhcr3vz3ynhglw-to-be-empty-ror-tutorial-chapter-9", "title": "Expected &quot;G-WWU6wMDhCr3VZ3YnHglw&quot; to be empty -&gt; RoR Tutorial Chapter 9", "body": "<p>currently working on chapter 9 (Listing 9.26) of Hartls RoR Tutorial I experiece the following error while testing:</p>\n\n<pre><code>Failure:\nUsersLoginTest#test_login_without_remembering [c:/Sites/workspace/sample_app/test/integration/users_login_test.rb:53]:\nExpected \"G-WWU6wMDhCr3VZ3YnHglw\" to be empty.\n</code></pre>\n\n<p>/users_login_test.rb</p>\n\n<pre><code>require 'test_helper'\n\nclass UsersLoginTest &lt; ActionDispatch::IntegrationTest\n\n  def setup\n    @user = users(:michael)\n  end\n\n\n\n    test \"login with invalid information\" do\n      get login_path\n      assert_template 'sessions/new'\n      post login_path, params: { session: { email: \"\", password: \"\" } }\n      assert_template 'sessions/new'\n      assert_not flash.empty?\n      get root_path\n      assert flash.empty?\n    end\n\n    test \"login with valid information followed by logout\" do\n      get login_path\n      post login_path, params: { session: { email:    @user.email,\n                                            password: 'password' } }\n      assert is_logged_in?\n      assert_redirected_to @user\n      follow_redirect!\n      assert_template 'users/show'\n      assert_select \"a[href=?]\", login_path, count: 0\n      assert_select \"a[href=?]\", logout_path\n      assert_select \"a[href=?]\", user_path(@user)\n      delete logout_path\n      assert_not is_logged_in?\n      assert_redirected_to root_url\n      # Simulate a user clicking logout in a second window.\n      delete logout_path\n      follow_redirect!\n      assert_select \"a[href=?]\", login_path\n      assert_select \"a[href=?]\", logout_path,      count: 0\n      assert_select \"a[href=?]\", user_path(@user), count: 0\n    end\n\n    test \"login with remembering\" do\n      log_in_as(@user, remember_me: '1')\n      assert_not_empty cookies['remember_token']\n    end\n\n    test \"login without remembering\" do\n      # Log in to set the cookie.\n      log_in_as(@user, remember_me: '1')\n      # Log in again and verify that the cookie is deleted.\n      log_in_as(@user, remember_me: '0')\n      assert_empty cookies['remember_token']\n    end\n  end\n</code></pre>\n\n<p>/test_helper.rb</p>\n\n<pre><code>ENV['RAILS_ENV'] ||= 'test'\nrequire File.expand_path('../../config/environment', __FILE__)\nrequire 'rails/test_help'\n\nclass ActiveSupport::TestCase\n  # Setup all fixtures in test/fixtures/*.yml for all tests in alphabetical order.\n  fixtures :all\n\n  #returns true if a test user is logged in\n  def is_logged_in?\n    !session[:user_id].nil?\n  end\n\n  # Log in as a particular user.\n  def log_in_as(user)\n    session[:user_id] = user.id\n  end\nend\n\nclass ActionDispatch::IntegrationTest\n\n  # Log in as a particular user.\n  def log_in_as(user, password: 'password', remember_me: '1')\n    post login_path, params: { session: { email: user.email,\n                                          password: password,\n                                          remember_me: remember_me } }\n  end\nend\n</code></pre>\n\n<p>/sessions_controller.rb</p>\n\n<pre><code>class SessionsController &lt; ApplicationController\n\n  def new\n  end\n\n  def create\n    user = User.find_by(email: params[:session][:email].downcase)\n    if user &amp;&amp; user.authenticate(params[:session][:password])\n      log_in user\n      params[:session] [:remember_me] == '1' ? remember(user) : forget(user)\n      remember user\n      redirect_to user\n    else\n      flash.now[:danger] = 'Invalid email/password combination'\n      render 'new'\n    end\n  end\n\n  def destroy\n    log_out if logged_in?\n    redirect_to root_url\n  end\nend\n</code></pre>\n\n<p>I'm confused, let me know if you need any other files.</p>\n\n<p>Thanks in advance!</p>\n\n<p>EDIT\n/sessions_helper.rb</p>\n\n<pre><code>module SessionsHelper\n\n  # Logs in the given user.\n  def log_in(user)\n    session[:user_id] = user.id\n  end\n\n  # Remembers a user in a persistent session.\n  def remember(user)\n    user.remember\n    cookies.permanent.signed[:user_id] = user.id\n    cookies.permanent[:remember_token] = user.remember_token\n  end\n\n  # Returns the user corresponding to the remember token cookie.\n  def current_user\n    if (user_id = session[:user_id])\n      @current_user ||= User.find_by(id: user_id)\n    elsif (user_id = cookies.signed[:user_id])\n      user = User.find_by(id: user_id)\n      if user &amp;&amp; user.authenticated?(cookies[:remember_token])\n        log_in user\n        @current_user = user\n      end\n    end\n  end\n\n  # Returns true if the user is logged in, false otherwise.\n  def logged_in?\n    !current_user.nil?\n  end\n\n  # Forgets a persistent session.\n  def forget(user)\n    user.forget\n    cookies.delete(:user_id)\n    cookies.delete(:remember_token)\n  end\n\n  # Logs out the current user.\n  def log_out\n    current_user &amp;&amp; forget(current_user)\n    session.delete(:user_id)\n    @current_user = nil\n  end\nend\n</code></pre>\n\n<p>EDIT2\n/user.rb</p>\n\n<pre><code>class User &lt; ApplicationRecord\n  attr_accessor :remember_token\n  before_save { self.email = email.downcase }\n  validates :name,  presence: true, length: { maximum: 50 }\n  VALID_EMAIL_REGEX = /\\A[\\w+\\-.]+@[a-z\\d\\-.]+\\.[a-z]+\\z/i\n  validates :email, presence: true, length: { maximum: 255 },\n                    format: { with: VALID_EMAIL_REGEX },\n                    uniqueness: { case_sensitive: false }\n  has_secure_password\n  validates :password, presence: true, length: { minimum: 6 }\n\n  # Returns the hash digest of the given string.\n  def User.digest(string)\n    cost = ActiveModel::SecurePassword.min_cost ? BCrypt::Engine::MIN_COST :\n                                                  BCrypt::Engine.cost\n    BCrypt::Password.create(string, cost: cost)\n  end\n\n  # Returns a random token.\n  def User.new_token\n    SecureRandom.urlsafe_base64\n  end\n\n  # Remembers a user in the database for use in persistent sessions.\n  def remember\n    self.remember_token = User.new_token\n    update_attribute(:remember_digest, User.digest(remember_token))\n  end\n\n  # Returns true if the given token matches the digest.\n  def authenticated?(remember_token)\n    return false if remember_digest.nil?\n    BCrypt::Password.new(remember_digest).is_password?(remember_token)\n  end\n\n  # Forgets a user.\n  def forget\n    update_attribute(:remember_digest, nil)\n  end\nend\n</code></pre>\n"}, {"tags": ["sql", "ruby-on-rails", "ruby", "ruby-on-rails-4", "activerecord"], "comments": [{"owner": {"reputation": 471, "user_id": 2395946, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gqI0l.png?s=128&g=1", "display_name": "hoangdd", "link": "https://stackoverflow.com/users/2395946/hoangdd"}, "edited": false, "score": 0, "creation_date": 1491969684, "post_id": 43359450, "comment_id": 73782372, "body": "I think you shoud add <code>total_value</code> column to <code>carts</code> table and <code>price</code> column to <code>line_items</code> table."}, {"owner": {"reputation": 1195, "user_id": 3417971, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/e6JLw.jpg?s=128&g=1", "display_name": "Ahmad Hamdi", "link": "https://stackoverflow.com/users/3417971/ahmad-hamdi"}, "reply_to_user": {"reputation": 471, "user_id": 2395946, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gqI0l.png?s=128&g=1", "display_name": "hoangdd", "link": "https://stackoverflow.com/users/2395946/hoangdd"}, "edited": false, "score": 0, "creation_date": 1491972083, "post_id": 43359450, "comment_id": 73783048, "body": "I would prefer to calculate them on the fly rather than to store them."}, {"owner": {"reputation": 300, "user_id": 5233084, "user_type": "registered", "accept_rate": 0, "profile_image": "https://lh3.googleusercontent.com/-9zNPlKb6dr4/AAAAAAAAAAI/AAAAAAAAABM/lC1pWMXlp_U/photo.jpg?sz=128", "display_name": "umishra", "link": "https://stackoverflow.com/users/5233084/umishra"}, "edited": false, "score": 0, "creation_date": 1491976397, "post_id": 43359450, "comment_id": 73784621, "body": "Why you are calculating Cart.all. I think you should calculate for current cart only."}, {"owner": {"reputation": 1047, "user_id": 1274147, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/91b27b6db2d10538468d2ed934096e96?s=128&d=identicon&r=PG", "display_name": "rockusbacchus", "link": "https://stackoverflow.com/users/1274147/rockusbacchus"}, "edited": false, "score": 1, "creation_date": 1492007753, "post_id": 43359450, "comment_id": 73807115, "body": "I like Andrey&#39;s answer below, but to address your comment on array manipulation, check out this blog post that I have come back to over and over when I need a refresher on ruby array manipulation: <a href=\"http://matthewcarriere.com/2008/06/23/using-select-reject-collect-inject-and-detect/\" rel=\"nofollow noreferrer\">matthewcarriere.com/2008/06/23/&hellip;</a>"}], "answers": [{"tags": [], "owner": {"reputation": 47232, "user_id": 1772830, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Qtoqg.jpg?s=128&g=1", "display_name": "Andrey Deineko", "link": "https://stackoverflow.com/users/1772830/andrey-deineko"}, "is_accepted": true, "score": 4, "last_activity_date": 1491979120, "last_edit_date": 1491979120, "creation_date": 1491974201, "answer_id": 43360824, "question_id": 43359450, "link": "https://stackoverflow.com/questions/43359450/is-there-a-better-way-to-calculate-the-total-value-of-this-invoice-model/43360824#43360824", "title": "Is there a better way to calculate the total value of this invoice model?", "body": "<blockquote>\n  <p>is there a more efficient way to perform the same calculation maybe\n  based on sql queries instead of array manipulation?</p>\n</blockquote>\n\n<p>Yes. SQL is so much faster than Ruby that it's hardly comparable:</p>\n\n<pre><code>  def self.total\n    Cart.joins(line_items: :product)\n        .sum('COALESCE(products.pharmacy_price * line_items.quantity, 0.0)')\n  end\n</code></pre>\n\n<p>But I think what you might need here is a <code>total</code> for a single <code>cart</code>, not all <code>carts</code> and it will be an <em>instance method</em>, not <em>class instance method</em>:</p>\n\n<pre><code>def total\n  self.class\n      .joins(cart: { line_items: :product })\n      .where(invoices: { id: id })\n      .sum('COALESCE(products.pharmacy_price * line_items.quantity, 0.0)')\nend\n</code></pre>\n\n<p>So the usage will be <code>Invoice.first.total</code>, not <code>Invoice.total</code>.</p>\n\n<p>As to <code>total_value</code> method - you could write it using calculations on ActiveRecord level, not Ruby, which is again, might be faster:</p>\n\n<pre><code>  def total_value\n    self.class\n        .joins(line_items: :product)\n        .where(line_items(cart_id: id))\n        .sum('COALESCE(products.pharmacy_price * line_items.quantity, 0.0)')\n  end\n</code></pre>\n\n<p>As to</p>\n\n<blockquote>\n  <p>I also know that my array manipulation is poor, so how can I also\n  achieve the same results in a more ruby way?</p>\n</blockquote>\n\n<p>You can use <a href=\"https://ruby-doc.org/core-2.4.1/Enumerable.html#method-i-inject\" rel=\"nofollow noreferrer\">Enumerable#<code>inject</code></a>:</p>\n\n<pre><code>  def total_value\n    line_items.inject(0.0) { |sum, l| sum + l.product.pharmacy_price * l.quantity }\n  end\n</code></pre>\n"}], "owner": {"reputation": 1195, "user_id": 3417971, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/e6JLw.jpg?s=128&g=1", "display_name": "Ahmad Hamdi", "link": "https://stackoverflow.com/users/3417971/ahmad-hamdi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 173, "favorite_count": 0, "accepted_answer_id": 43360824, "answer_count": 1, "score": 0, "last_activity_date": 1492005623, "creation_date": 1491965714, "last_edit_date": 1492005623, "question_id": 43359450, "link": "https://stackoverflow.com/questions/43359450/is-there-a-better-way-to-calculate-the-total-value-of-this-invoice-model", "title": "Is there a better way to calculate the total value of this invoice model?", "body": "<p>I have an Invoice model that has a has_one relationship to another Cart model,</p>\n\n<p>Cart has_many line_items and each line_item has a product with a price attribute.</p>\n\n<p>My approach is the following:</p>\n\n<pre><code>class Invoice &lt; ApplicationRecord\n  has_one :cart, dependent: :destroy\n  belongs_to :user\n\n  def self.total\n    sum = 0.0\n    Cart.all.each do |c|\n      sum += c.total_value\n    end\n    sum\n  end\nend\n</code></pre>\n\n<p>And the total_value method on the cart object look something like this:</p>\n\n<pre><code>class Cart &lt; ApplicationRecord\n  def total_value\n    sum = 0.0\n    line_items.each { |l| sum += l.product.price.present? ? l.product.price * l.quantity : 0.0 }\n    sum\n  end\nend\n</code></pre>\n\n<p><strong>So my question is, is there a more efficient way to perform the same calculation maybe based on sql queries instead of array manipulation?\nAnd how much efficient it will be?\nI also know that my array manipulation is poor, so how can I also achieve the same results in a more ruby way?</strong>    </p>\n"}, {"tags": ["ruby-on-rails", "ruby", "activerecord", "rails-activerecord"], "comments": [{"owner": {"reputation": 3785, "user_id": 839925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dfa54eccd89d7c0d2225e0ca279c1191?s=128&d=identicon&r=PG", "display_name": "Alexandre Angelim", "link": "https://stackoverflow.com/users/839925/alexandre-angelim"}, "edited": false, "score": 0, "creation_date": 1491970006, "post_id": 43359411, "comment_id": 73782453, "body": "Try <code>GoodsItem.reflections</code> - <a href=\"http://api.rubyonrails.org/classes/ActiveRecord/Reflection/ClassMethods.html\" rel=\"nofollow noreferrer\">api.rubyonrails.org/classes/ActiveRecord/Reflection/&hellip;</a>"}, {"owner": {"reputation": 1047, "user_id": 749774, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/ea77df648c95d481a68eec2e7ec703a4?s=128&d=identicon&r=PG", "display_name": "zw963", "link": "https://stackoverflow.com/users/749774/zw963"}, "reply_to_user": {"reputation": 3785, "user_id": 839925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dfa54eccd89d7c0d2225e0ca279c1191?s=128&d=identicon&r=PG", "display_name": "Alexandre Angelim", "link": "https://stackoverflow.com/users/839925/alexandre-angelim"}, "edited": false, "score": 0, "creation_date": 1491972534, "post_id": 43359411, "comment_id": 73783217, "body": "GoodsItem.reflections return <code>has_many</code> and <code>belongs_to</code>, what i want just <code>belongs_to</code> table names."}, {"owner": {"reputation": 3785, "user_id": 839925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dfa54eccd89d7c0d2225e0ca279c1191?s=128&d=identicon&r=PG", "display_name": "Alexandre Angelim", "link": "https://stackoverflow.com/users/839925/alexandre-angelim"}, "edited": false, "score": 0, "creation_date": 1492003203, "post_id": 43359411, "comment_id": 73803243, "body": "Did you take a look at that page? <code>GoodsItem.reflect_on_all_associations(:belongs_to)</code> will do it."}, {"owner": {"reputation": 1047, "user_id": 749774, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/ea77df648c95d481a68eec2e7ec703a4?s=128&d=identicon&r=PG", "display_name": "zw963", "link": "https://stackoverflow.com/users/749774/zw963"}, "reply_to_user": {"reputation": 3785, "user_id": 839925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dfa54eccd89d7c0d2225e0ca279c1191?s=128&d=identicon&r=PG", "display_name": "Alexandre Angelim", "link": "https://stackoverflow.com/users/839925/alexandre-angelim"}, "edited": false, "score": 0, "creation_date": 1492004200, "post_id": 43359411, "comment_id": 73804106, "body": "@AlexandreAngelim, Yeah, it worked. GoodsItem.reflect_on_all_associations(:belongs_to).map(&amp;:nam&zwnj;&#8203;e) get what i want, thanks"}], "answers": [{"tags": [], "owner": {"reputation": 1047, "user_id": 749774, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/ea77df648c95d481a68eec2e7ec703a4?s=128&d=identicon&r=PG", "display_name": "zw963", "link": "https://stackoverflow.com/users/749774/zw963"}, "is_accepted": false, "score": 0, "last_activity_date": 1491967069, "last_edit_date": 1491967069, "creation_date": 1491966339, "answer_id": 43359540, "question_id": 43359411, "link": "https://stackoverflow.com/questions/43359411/a-better-way-to-get-activerecord-tables-primary-tablesbelongs-to-tables-arra/43359540#43359540", "title": "A better way to get ActiveRecord table&#39;s primary tables(belongs_to&#39; tables) array", "body": "<p>A better answer:</p>\n\n<pre><code>GoodsItem.column_names.map {|x| x[/(.*)_id/, 1] }.compact\n</code></pre>\n\n<p>And more better answer:</p>\n\n<pre><code>GoodsItem.column_names.grep(/(.*)_id$/) { $1 }\n</code></pre>\n"}], "owner": {"reputation": 1047, "user_id": 749774, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/ea77df648c95d481a68eec2e7ec703a4?s=128&d=identicon&r=PG", "display_name": "zw963", "link": "https://stackoverflow.com/users/749774/zw963"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 39, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1491967069, "creation_date": 1491965458, "question_id": 43359411, "link": "https://stackoverflow.com/questions/43359411/a-better-way-to-get-activerecord-tables-primary-tablesbelongs-to-tables-arra", "title": "A better way to get ActiveRecord table&#39;s primary tables(belongs_to&#39; tables) array", "body": "<p>I have a table with many fields</p>\n\n<pre><code>[\n    [ 0] \"id\",\n    [ 1] \"type\",\n    [ 2] \"title\",\n    [ 3] \"delivery_fee\",\n    [ 4] \"price\",\n    [ 5] \"starting_price\",\n    [ 6] \"bid_increment\",\n    [ 7] \"bid_expired_at\",\n    [ 8] \"address\",\n    [ 9] \"lat\",\n    [10] \"lng\",\n    [11] \"comments_count\",\n    [12] \"clicks_count\",\n    [13] \"detected_labels\",\n    [14] \"deleted_at\",\n    [15] \"created_at\",\n    [16] \"updated_at\",\n    [17] \"user_id\",\n    [18] \"category_id\",\n    [19] \"area_id\",\n    [20] \"detected_labels_cn\",\n    [21] \"tsv\",\n    [22] \"tsv_full\",\n    [23] \"data\",\n    [24] \"stock_count\",\n    [25] \"location_is_visible\",\n    [26] \"make_offer_disabled_at\",\n    [27] \"favorites_count\",\n    [28] \"display_index\"\n]\n</code></pre>\n\n<p>What I want to do is:</p>\n\n<p>get this table belongs to table names.</p>\n\n<p>Followings is my solution:</p>\n\n<pre><code>GoodsItem.column_names.grep(/.*(_id)$/).map {|x| x[/(.*)_id/, 1] \n# Or\nGoodsItem.column_names.map {|x| x.dup.sub!(/_id/, '') }.compact\n\n\n\n[\n    [0] \"user\",\n    [1] \"category\",\n    [2] \"area\"\n]\n</code></pre>\n\n<p>This is not goods enough. because two almost same regexp match to get\nthis result or have to dup all string because I use <code>frozen String</code></p>\n\n<p>The question is:</p>\n\n<ol>\n<li>Rails offer any methods to get this <code>belongs_to</code> lists?</li>\n<li>If not, is there a better solution to resolve this than me?\nbasically, I want one <code>method</code> to satisfy two condition:\n\n<ul>\n<li>fields must get ending with a <code>_id</code></li>\n<li>get the content matched except the part <code>_id</code></li>\n</ul></li>\n</ol>\n\n<p>Thanks.</p>\n"}, {"tags": ["ruby-on-rails", "json", "ruby", "rubygems"], "comments": [{"owner": {"reputation": 11741, "user_id": 1934428, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/072774c5d4204a1c2385560e6114a887?s=128&d=identicon&r=PG", "display_name": "user1934428", "link": "https://stackoverflow.com/users/1934428/user1934428"}, "edited": false, "score": 1, "creation_date": 1491979561, "post_id": 43359331, "comment_id": 73786209, "body": "Just a guess: Since Ruby already has json built-in, I don&#39;t think the author of the game expects that only people using a very old Ruby version (1.7, maybe 1.8) to use the Gem, and the native C-interface doesn&#39;t work with newer Ruby versions. May I ask why you want to use the Gem, when you have json already in the Ruby standard library?"}, {"owner": {"reputation": 218, "user_id": 4098340, "user_type": "registered", "accept_rate": 60, "profile_image": "https://graph.facebook.com/100006048810784/picture?type=large", "display_name": "velua", "link": "https://stackoverflow.com/users/4098340/velua"}, "reply_to_user": {"reputation": 11741, "user_id": 1934428, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/072774c5d4204a1c2385560e6114a887?s=128&d=identicon&r=PG", "display_name": "user1934428", "link": "https://stackoverflow.com/users/1934428/user1934428"}, "edited": false, "score": 0, "creation_date": 1492058639, "post_id": 43359331, "comment_id": 73829062, "body": "I don&#39;t want to use the gem myself but it&#39;s a depencie in a gem I want to install and I can&#39;t find it in the gem file to remove it either :|"}], "answers": [{"comments": [{"owner": {"reputation": 630, "user_id": 2765703, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/644843c86298dc5886539a4f94607977?s=128&d=identicon&r=PG&f=1", "display_name": "Kallaste", "link": "https://stackoverflow.com/users/2765703/kallaste"}, "edited": false, "score": 0, "creation_date": 1534331700, "post_id": 43363585, "comment_id": 90667397, "body": "That is not correct. This error has occurred for me within the Rails project directory. It&#39;s a dependency resolution error. In my case it was resolved by using a newer version of rails which depended on a different version of json."}, {"owner": {"reputation": 484, "user_id": 10302775, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2845b94c2766a2c2e2bbd56c5bafbba6?s=128&d=identicon&r=PG&f=1", "display_name": "Biju", "link": "https://stackoverflow.com/users/10302775/biju"}, "reply_to_user": {"reputation": 630, "user_id": 2765703, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/644843c86298dc5886539a4f94607977?s=128&d=identicon&r=PG&f=1", "display_name": "Kallaste", "link": "https://stackoverflow.com/users/2765703/kallaste"}, "edited": false, "score": 0, "creation_date": 1542262282, "post_id": 43363585, "comment_id": 93507147, "body": "@Kallaste - I am using rails 5.0.7 but I still get this same error (it looks for json 1.8 and I get this error while installing json 1.8). Any ideas how to resolve this?"}, {"owner": {"reputation": 630, "user_id": 2765703, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/644843c86298dc5886539a4f94607977?s=128&d=identicon&r=PG&f=1", "display_name": "Kallaste", "link": "https://stackoverflow.com/users/2765703/kallaste"}, "reply_to_user": {"reputation": 484, "user_id": 10302775, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2845b94c2766a2c2e2bbd56c5bafbba6?s=128&d=identicon&r=PG&f=1", "display_name": "Biju", "link": "https://stackoverflow.com/users/10302775/biju"}, "edited": false, "score": 0, "creation_date": 1542745277, "post_id": 43363585, "comment_id": 93677024, "body": "@Biju - Please look at my answer below. Json 1.8 seems to be the problem. I would try using a different version of Rails that does not use json 1.8. I used 4.2.6 myself, so I know that works. You could use an older Rails in the meantime, submit a bug report, and upgrade to the current version when the issue is revolved."}], "tags": [], "owner": {"reputation": 1, "user_id": 7300484, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/256a5ca051b482aac4d7448037c23863?s=128&d=identicon&r=PG&f=1", "display_name": "Sonu Kumar", "link": "https://stackoverflow.com/users/7300484/sonu-kumar"}, "is_accepted": false, "score": 0, "last_activity_date": 1556544737, "last_edit_date": 1556544737, "creation_date": 1491983807, "answer_id": 43363585, "question_id": 43359331, "link": "https://stackoverflow.com/questions/43359331/error-installing-json-ruby-gem/43363585#43363585", "title": "Error installing json Ruby gem", "body": "<p>The issue is arise due to you are not in proper directory. Please go to your rails directory folder first then run this command like this:</p>\n\n<pre><code>rails@rails:~/rails_project/btc$ gem install json -v '1.8.1'\n</code></pre>\n\n<p>Then its work fine.</p>\n"}, {"tags": [], "owner": {"reputation": 630, "user_id": 2765703, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/644843c86298dc5886539a4f94607977?s=128&d=identicon&r=PG&f=1", "display_name": "Kallaste", "link": "https://stackoverflow.com/users/2765703/kallaste"}, "is_accepted": false, "score": 0, "last_activity_date": 1534332210, "creation_date": 1534332210, "answer_id": 51857761, "question_id": 43359331, "link": "https://stackoverflow.com/questions/43359331/error-installing-json-ruby-gem/51857761#51857761", "title": "Error installing json Ruby gem", "body": "<p>This seems to be a common issue with the json 1.8.1 gem. You can use a different version of json if you are declaring it explicitly, but in some cases, json 1.8.1 is a cascading dependency. For instance, you may see something like</p>\n\n<pre><code>In Gemfile:\n  rails was resolved to 4.1.5, which depends on\n    actionmailer was resolved to 4.1.5, which depends on\n      actionpack was resolved to 4.1.5, which depends on\n        actionview was resolved to 4.1.5, which depends on\n          activesupport was resolved to 4.1.5, which depends on\n            json\n</code></pre>\n\n<p>In this case, you just need to change the top level gem (in this case rails) to a different version. 4.2.6 works.</p>\n"}, {"tags": [], "owner": {"reputation": 36, "user_id": 1047894, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/075c54f1d0c446cd299907cafa699ec1?s=128&d=identicon&r=PG", "display_name": "blazerw", "link": "https://stackoverflow.com/users/1047894/blazerw"}, "is_accepted": false, "score": 0, "last_activity_date": 1597676374, "creation_date": 1597676374, "answer_id": 63453470, "question_id": 43359331, "link": "https://stackoverflow.com/questions/43359331/error-installing-json-ruby-gem/63453470#63453470", "title": "Error installing json Ruby gem", "body": "<p>Finding and updating the gem that is pulling in the JSON gem should work.  However, another thing that worked for me was to update the version of JSON being installed.</p>\n<pre><code>bundle update json\n</code></pre>\n<p>This worked because it updated JSON to version 1.8.6 which is compatible with newer Rubies.</p>\n"}], "owner": {"reputation": 218, "user_id": 4098340, "user_type": "registered", "accept_rate": 60, "profile_image": "https://graph.facebook.com/100006048810784/picture?type=large", "display_name": "velua", "link": "https://stackoverflow.com/users/4098340/velua"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1044, "favorite_count": 0, "answer_count": 3, "score": 3, "last_activity_date": 1597676374, "creation_date": 1491964920, "question_id": 43359331, "link": "https://stackoverflow.com/questions/43359331/error-installing-json-ruby-gem", "title": "Error installing json Ruby gem", "body": "<p>I'm running <code>gem install json -v '1.8.1'</code> however I get this error..</p>\n\n<pre><code>gem install json -v '1.8.1'\nBuilding native extensions.  This could take a while...\nERROR:  Error installing json:\n    ERROR: Failed to build gem native extension.\n\n    current directory: /Users/johnwilliamson/.rvm/gems/ruby-2.4.1/gems/json-1.8.1/ext/json/ext/generator\n/Users/johnwilliamson/.rvm/rubies/ruby-2.4.1/bin/ruby -r ./siteconf20170412-72871-wada1h.rb extconf.rb\ncreating Makefile\n\ncurrent directory: /Users/johnwilliamson/.rvm/gems/ruby-2.4.1/gems/json-1.8.1/ext/json/ext/generator\nmake \"DESTDIR=\" clean\n\ncurrent directory: /Users/johnwilliamson/.rvm/gems/ruby-2.4.1/gems/json-1.8.1/ext/json/ext/generator\nmake \"DESTDIR=\"\ncompiling generator.c\nIn file included from generator.c:1:\n./../fbuffer/fbuffer.h:175:47: error: too few arguments provided to function-like macro invocation\n    VALUE result = rb_str_new(FBUFFER_PAIR(fb));\n                                              ^\n/Users/johnwilliamson/.rvm/rubies/ruby-2.4.1/include/ruby-2.4.0/ruby/intern.h:795:9: note: macro 'rb_str_new' defined here\n#define rb_str_new(str, len) RB_GNUC_EXTENSION_BLOCK(   \\\n        ^\nIn file included from generator.c:1:\n./../fbuffer/fbuffer.h:175:11: warning: incompatible pointer to integer conversion initializing 'VALUE' (aka 'unsigned long') with an expression of type 'VALUE (const char *, long)' (aka 'unsigned long (const char *, long)') [-Wint-conversion]\n    VALUE result = rb_str_new(FBUFFER_PAIR(fb));\n          ^        ~~~~~~~~~~\ngenerator.c:840:25: error: use of undeclared identifier 'rb_cFixnum'\n    } else if (klass == rb_cFixnum) {\n                        ^\ngenerator.c:842:25: error: use of undeclared identifier 'rb_cBignum'\n    } else if (klass == rb_cBignum) {\n                        ^\n1 warning and 3 errors generated.\nmake: *** [generator.o] Error 1\n\nmake failed, exit code 2\n\nGem files will remain installed in /Users/johnwilliamson/.rvm/gems/ruby-2.4.1/gems/json-1.8.1 for inspection.\nResults logged to /Users/johnwilliamson/.rvm/gems/ruby-2.4.1/extensions/x86_64-darwin-16/2.4.0/json-1.8.1/gem_make.out\n</code></pre>\n\n<p>When I run just gem install json it installs fine taking me over version 2 however I'm trying to install this <a href=\"https://github.com/peatio/peatio\" rel=\"nofollow noreferrer\">https://github.com/peatio/peatio</a> and it wants that version specifically. </p>\n\n<p>Any other ideas?</p>\n"}, {"tags": ["ruby"], "answers": [{"tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": true, "score": 3, "last_activity_date": 1491967369, "last_edit_date": 1491967369, "creation_date": 1491966872, "answer_id": 43359625, "question_id": 43359271, "link": "https://stackoverflow.com/questions/43359271/it-says-comparison-of-fixnum-with-nil-failed-and-i-dont-know-why/43359625#43359625", "title": "it says &#39;comparison of Fixnum with nil failed&#39; and i dont know why", "body": "<p>When <code>i = 4</code> and <code>j = i + 1 #=&gt; 5</code>, you attempt to execute</p>\n\n<pre><code>A[j] &gt; A[j + 1]\n</code></pre>\n\n<p>which evaluates to</p>\n\n<pre><code>A[4] &gt; A[5]\n</code></pre>\n\n<p>then to</p>\n\n<pre><code>2 &gt; nil\n</code></pre>\n\n<p>This raises the exception, because <code>2.class #=&gt; Fixnum</code> and <a href=\"http://ruby-doc.org/core-2.3.0/Fixnum.html#method-i-3E\" rel=\"nofollow noreferrer\">Fixnum#></a> requires <code>&gt;</code>'s argument to be numeric. In Ruby v2.4+ <code>Fixnum</code> methods have been converted to <code>Integer</code> methods (e.g., <a href=\"http://ruby-doc.org/core-2.4.0/Integer.html#method-i-3E\" rel=\"nofollow noreferrer\">Integer#></a>).</p>\n"}], "owner": {"reputation": 42, "user_id": 7848729, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/74095cfcc7faa57a7e8f065809484b5f?s=128&d=identicon&r=PG&f=1", "display_name": "marcos", "link": "https://stackoverflow.com/users/7848729/marcos"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 221, "favorite_count": 0, "closed_date": 1491982344, "accepted_answer_id": 43359625, "answer_count": 1, "score": 0, "last_activity_date": 1491992391, "creation_date": 1491964559, "last_edit_date": 1491992391, "question_id": 43359271, "link": "https://stackoverflow.com/questions/43359271/it-says-comparison-of-fixnum-with-nil-failed-and-i-dont-know-why", "closed_reason": "Duplicate", "title": "it says &#39;comparison of Fixnum with nil failed&#39; and i dont know why", "body": "<pre><code>A = [5,3,1,4,2]\n\n4.downto(1) do |i|\n  0.upto(i) do |j|\n    #here i am making the actual buble sort\n\n    if A[j] &gt; A[j + 1]\n      tmp = A\n      A[j + 1] = A[j]\n      A[j] = tmp\n    end\n  end\nend\n\n#just printing the array\nA.each do |i|\n  print i\nend\n\ngets()\n</code></pre>\n\n<p>Does someone know why does it happen? I just don't know where is the <code>nil</code> element.</p>\n\n<p>I've tried everything, I know but I'm learning and I can't find the error. </p>\n\n<p>Thanks for your help, also there is another little problem, when I try to make the <code>for</code> loop it doesn't work, it's not a big deal because there are more than one way to make the same thing, but still...</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4", "enums"], "comments": [{"owner": {"reputation": 425, "user_id": 5222485, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/88b739ba4a7b38d50c51f5366dc89533?s=128&d=identicon&r=PG", "display_name": "Ray Wojciechowski", "link": "https://stackoverflow.com/users/5222485/ray-wojciechowski"}, "edited": false, "score": 1, "creation_date": 1491988772, "post_id": 43359251, "comment_id": 73792379, "body": "As @AndreyDeineko pointed out in his answer it doesn\u2019t matter in this case. Maybe you want to read <a href=\"http://stackoverflow.com/questions/16621073/when-to-use-symbols-instead-of-strings-in-ruby\">this question</a> for a better understanding of strings and symbols."}], "answers": [{"tags": [], "owner": {"reputation": 47232, "user_id": 1772830, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Qtoqg.jpg?s=128&g=1", "display_name": "Andrey Deineko", "link": "https://stackoverflow.com/users/1772830/andrey-deineko"}, "is_accepted": true, "score": 4, "last_activity_date": 1491975641, "creation_date": 1491975641, "answer_id": 43361122, "question_id": 43359251, "link": "https://stackoverflow.com/questions/43359251/rails-enum-symbol-vs-string/43361122#43361122", "title": "Rails enum symbol vs string", "body": "<p>It does not matter, since <a href=\"http://api.rubyonrails.org/classes/ActiveRecord/Enum.html\" rel=\"nofollow noreferrer\"><code>Enum</code></a> is an integer in database, and</p>\n\n<blockquote>\n  <p>The mappings are exposed through a class method with the pluralized\n  attribute name, which return the mapping in a\n  <code>HashWithIndifferentAccess</code></p>\n</blockquote>\n\n<p>so whether you used strings or symbols both of the following will work:</p>\n\n<pre><code>MyModel.event_types[:Tournament]\nMyModel.event_types['Tournament']\n</code></pre>\n"}], "owner": {"reputation": 108, "user_id": 5747349, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/45f3464925f67b9236b6c8bb748180ab?s=128&d=identicon&r=PG&f=1", "display_name": "Ahmad Saleem", "link": "https://stackoverflow.com/users/5747349/ahmad-saleem"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2106, "favorite_count": 0, "closed_date": 1491992023, "accepted_answer_id": 43361122, "answer_count": 1, "score": 2, "last_activity_date": 1492008919, "creation_date": 1491964442, "last_edit_date": 1492008919, "question_id": 43359251, "link": "https://stackoverflow.com/questions/43359251/rails-enum-symbol-vs-string", "closed_reason": "Opinion-based", "title": "Rails enum symbol vs string", "body": "<p>I have just started working on a new rails project, and I have noticed that the previous developer has used strings instead of symbols as keys for the enum. The example is as follows: </p>\n\n<pre><code>enum event_type: {\n  'Tournament'    =&gt; 1,\n  'Practice Game' =&gt; 2\n}\n</code></pre>\n\n<p>I am just curious about the possible advantages/disadvantages of  using strings instead of symbols.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "internationalization", "rails-i18n"], "owner": {"reputation": 81, "user_id": 6844054, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cdd1a8dcea70099c44e2ce02ab3f5321?s=128&d=identicon&r=PG&f=1", "display_name": "chijoy", "link": "https://stackoverflow.com/users/6844054/chijoy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 89, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1491962958, "creation_date": 1491962958, "question_id": 43359045, "link": "https://stackoverflow.com/questions/43359045/how-to-use-the-ruby-i18n-gem-to-translate-in-an-each-loop", "title": "How to use the Ruby I18n gem to translate in an each loop", "body": "<p>I'm creating a site in English and Spanish using the I18n Ruby gem in a Ruby on Rails application.</p>\n\n<pre><code>&lt;% @client.client_applications.each do |application| %&gt;\n  &lt;%= link_to \"#{application.class.to_s}\", \"/#{application.class.to_s.downcase}s/#{application.id}\", :class =&gt; \"btn btn-primary\" %&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>The applications are foreclosures, rentals, and homebuying. I know how to translate a regular link_to, but I can't figure out how to translate it when it's looping through the three applications. </p>\n"}, {"tags": ["ruby-on-rails", "ruby", "view-helpers"], "comments": [{"owner": {"reputation": 2116, "user_id": 6780663, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9207ba3b9163582570078b687f9b2792?s=128&d=identicon&r=PG&f=1", "display_name": "Alejandro Montilla", "link": "https://stackoverflow.com/users/6780663/alejandro-montilla"}, "edited": false, "score": 0, "creation_date": 1491958892, "post_id": 43358469, "comment_id": 73779726, "body": "How do you recover the disqus comments counter? Do you have a Model method?"}, {"owner": {"reputation": 75, "user_id": 7113430, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh4.googleusercontent.com/-2XN_Xu88CjQ/AAAAAAAAAAI/AAAAAAAAABI/KwN4y2M-oY0/photo.jpg?sz=128", "display_name": "Alien Java", "link": "https://stackoverflow.com/users/7113430/alien-java"}, "reply_to_user": {"reputation": 2116, "user_id": 6780663, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9207ba3b9163582570078b687f9b2792?s=128&d=identicon&r=PG&f=1", "display_name": "Alejandro Montilla", "link": "https://stackoverflow.com/users/6780663/alejandro-montilla"}, "edited": false, "score": 0, "creation_date": 1491959138, "post_id": 43358469, "comment_id": 73779787, "body": "i get them with this script in my applicacion.layout %script{id: &quot;dsq-count-scr&quot;, src: &quot;<a href=\"https://urlyoururl.disqus.com/count.js\" rel=\"nofollow noreferrer\">urlyoururl.disqus.com/count.js</a>&quot;, async: &quot;async&quot;}"}, {"owner": {"reputation": 2116, "user_id": 6780663, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9207ba3b9163582570078b687f9b2792?s=128&d=identicon&r=PG&f=1", "display_name": "Alejandro Montilla", "link": "https://stackoverflow.com/users/6780663/alejandro-montilla"}, "edited": false, "score": 0, "creation_date": 1491959355, "post_id": 43358469, "comment_id": 73779832, "body": "I dont recognize that code, please provide more details of that script (on the question)."}, {"owner": {"reputation": 75, "user_id": 7113430, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh4.googleusercontent.com/-2XN_Xu88CjQ/AAAAAAAAAAI/AAAAAAAAABI/KwN4y2M-oY0/photo.jpg?sz=128", "display_name": "Alien Java", "link": "https://stackoverflow.com/users/7113430/alien-java"}, "reply_to_user": {"reputation": 2116, "user_id": 6780663, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9207ba3b9163582570078b687f9b2792?s=128&d=identicon&r=PG&f=1", "display_name": "Alejandro Montilla", "link": "https://stackoverflow.com/users/6780663/alejandro-montilla"}, "edited": false, "score": 0, "creation_date": 1491959677, "post_id": 43358469, "comment_id": 73779906, "body": "i already updated the question Sr."}, {"owner": {"reputation": 2116, "user_id": 6780663, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9207ba3b9163582570078b687f9b2792?s=128&d=identicon&r=PG&f=1", "display_name": "Alejandro Montilla", "link": "https://stackoverflow.com/users/6780663/alejandro-montilla"}, "edited": false, "score": 0, "creation_date": 1491960424, "post_id": 43358469, "comment_id": 73780095, "body": "I dont see where you get the number, do you save that number in a variable?"}, {"owner": {"reputation": 75, "user_id": 7113430, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh4.googleusercontent.com/-2XN_Xu88CjQ/AAAAAAAAAAI/AAAAAAAAABI/KwN4y2M-oY0/photo.jpg?sz=128", "display_name": "Alien Java", "link": "https://stackoverflow.com/users/7113430/alien-java"}, "reply_to_user": {"reputation": 2116, "user_id": 6780663, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9207ba3b9163582570078b687f9b2792?s=128&d=identicon&r=PG&f=1", "display_name": "Alejandro Montilla", "link": "https://stackoverflow.com/users/6780663/alejandro-montilla"}, "edited": false, "score": 0, "creation_date": 1491960623, "post_id": 43358469, "comment_id": 73780141, "body": "i get the number from the link_to helper bro: documentation here <a href=\"https://help.disqus.com/customer/portal/articles/565624-adding-comment-count-links-to-your-home-page\" rel=\"nofollow noreferrer\">help.disqus.com/customer/portal/articles/&hellip;</a>"}, {"owner": {"reputation": 2116, "user_id": 6780663, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9207ba3b9163582570078b687f9b2792?s=128&d=identicon&r=PG&f=1", "display_name": "Alejandro Montilla", "link": "https://stackoverflow.com/users/6780663/alejandro-montilla"}, "edited": false, "score": 0, "creation_date": 1491998953, "post_id": 43358469, "comment_id": 73799936, "body": "Sorry @AlienJava, I dont really understand this tecnology."}, {"owner": {"reputation": 75, "user_id": 7113430, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh4.googleusercontent.com/-2XN_Xu88CjQ/AAAAAAAAAAI/AAAAAAAAABI/KwN4y2M-oY0/photo.jpg?sz=128", "display_name": "Alien Java", "link": "https://stackoverflow.com/users/7113430/alien-java"}, "reply_to_user": {"reputation": 2116, "user_id": 6780663, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9207ba3b9163582570078b687f9b2792?s=128&d=identicon&r=PG&f=1", "display_name": "Alejandro Montilla", "link": "https://stackoverflow.com/users/6780663/alejandro-montilla"}, "edited": false, "score": 0, "creation_date": 1492032639, "post_id": 43358469, "comment_id": 73822027, "body": "@AlejandroMontilla thanks anyways brother :D all the comunity here is fantastic"}], "answers": [{"tags": [], "owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "is_accepted": false, "score": 0, "last_activity_date": 1491960459, "creation_date": 1491960459, "answer_id": 43358733, "question_id": 43358469, "link": "https://stackoverflow.com/questions/43358469/how-to-show-a-link-to-helper-only-if-it-returns-0/43358733#43358733", "title": "How to show a link_to helper only if it returns &gt; 0", "body": "<p>You can't - at least not in the way you attempting.</p>\n\n<pre><code>link_to \"\", product_path(product, anchor: \"disqus_thread\"), data: { \"disqus-identifier\" =&gt; \"#{url_for([product, {only_path: false}])}\" }, class: \"no-underline bold grey-text text-darken-3 margin-left\"\n</code></pre>\n\n<p>This is evaluated on your Rails server before the page is sent to the browser.</p>\n\n<pre><code>&lt;script&gt;\n    var disqus_shortname = 'yourname';\n    var disqus_identifier = '&lt;%= url_for([product, {only_path: false}]) %&gt;';\n    var disqus_title = '&lt;%= product.name %&gt;';\n    var disqus_url = '&lt;%= url_for([product, {only_path: false}]) %&gt;';\n  (function() { // DON'T EDIT BELOW THIS LINE\n     var d = document, s = d.createElement('script');\n     s.src = 'https://url.disqus.com/embed.js';\n     s.setAttribute('data-timestamp', +new Date());\n     (d.head || d.body).appendChild(s);\n  })();\n&lt;/script&gt;\n</code></pre>\n\n<p>This javascript is run later in the client (the users browser) - at that point the page is already sent by the server. </p>\n\n<p>If you want to know when rendering on the server side if there are any comments you need to make a call to the <a href=\"https://disqus.com/api/docs/\" rel=\"nofollow noreferrer\">Disqus API</a> from the server.</p>\n"}, {"comments": [{"owner": {"reputation": 75, "user_id": 7113430, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh4.googleusercontent.com/-2XN_Xu88CjQ/AAAAAAAAAAI/AAAAAAAAABI/KwN4y2M-oY0/photo.jpg?sz=128", "display_name": "Alien Java", "link": "https://stackoverflow.com/users/7113430/alien-java"}, "edited": false, "score": 0, "creation_date": 1491966929, "post_id": 43359167, "comment_id": 73781670, "body": "i tried with your information brother but didnt work, i already updated my question, what route do i have to write?"}, {"owner": {"reputation": 16860, "user_id": 1536309, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/40f2ef2f2a528a76dbd3667acd154e5c?s=128&d=identicon&r=PG", "display_name": "Blair Anderson", "link": "https://stackoverflow.com/users/1536309/blair-anderson"}, "reply_to_user": {"reputation": 75, "user_id": 7113430, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh4.googleusercontent.com/-2XN_Xu88CjQ/AAAAAAAAAAI/AAAAAAAAABI/KwN4y2M-oY0/photo.jpg?sz=128", "display_name": "Alien Java", "link": "https://stackoverflow.com/users/7113430/alien-java"}, "edited": false, "score": 0, "creation_date": 1491970695, "post_id": 43359167, "comment_id": 73782638, "body": "You should run <code>rake routes</code> and find the one for updating a product. probably <code>products_path</code> with a <code>patch</code> Method."}, {"owner": {"reputation": 75, "user_id": 7113430, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh4.googleusercontent.com/-2XN_Xu88CjQ/AAAAAAAAAAI/AAAAAAAAABI/KwN4y2M-oY0/photo.jpg?sz=128", "display_name": "Alien Java", "link": "https://stackoverflow.com/users/7113430/alien-java"}, "edited": false, "score": 0, "creation_date": 1492031946, "post_id": 43359167, "comment_id": 73821750, "body": "brother, i did you told me but i get 401 Completed 401 Unauthorized in 391ms (ActiveRecord: 0.0ms). i already updated my question"}, {"owner": {"reputation": 16860, "user_id": 1536309, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/40f2ef2f2a528a76dbd3667acd154e5c?s=128&d=identicon&r=PG", "display_name": "Blair Anderson", "link": "https://stackoverflow.com/users/1536309/blair-anderson"}, "reply_to_user": {"reputation": 75, "user_id": 7113430, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh4.googleusercontent.com/-2XN_Xu88CjQ/AAAAAAAAAAI/AAAAAAAAABI/KwN4y2M-oY0/photo.jpg?sz=128", "display_name": "Alien Java", "link": "https://stackoverflow.com/users/7113430/alien-java"}, "edited": false, "score": 0, "creation_date": 1492133152, "post_id": 43359167, "comment_id": 73868479, "body": "i updated my answer. you should also install <a href=\"https://github.com/rweng/pry-rails#installation\" rel=\"nofollow noreferrer\">github.com/rweng/pry-rails#installation</a> to help you learn more about ruby."}, {"owner": {"reputation": 75, "user_id": 7113430, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh4.googleusercontent.com/-2XN_Xu88CjQ/AAAAAAAAAAI/AAAAAAAAABI/KwN4y2M-oY0/photo.jpg?sz=128", "display_name": "Alien Java", "link": "https://stackoverflow.com/users/7113430/alien-java"}, "edited": false, "score": 0, "creation_date": 1492200229, "post_id": 43359167, "comment_id": 73895938, "body": "hey guy i could updated the comment_count, but my question is this: in production it isn&#39;t a bad idea? because if i have for example 2000 current users same time, and they comment the products same time, for each comment the server updates the comment, it would make slow the platform is true? im not an expert. i hope your opinion teacher"}, {"owner": {"reputation": 75, "user_id": 7113430, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh4.googleusercontent.com/-2XN_Xu88CjQ/AAAAAAAAAAI/AAAAAAAAABI/KwN4y2M-oY0/photo.jpg?sz=128", "display_name": "Alien Java", "link": "https://stackoverflow.com/users/7113430/alien-java"}, "edited": false, "score": 0, "creation_date": 1492203203, "post_id": 43359167, "comment_id": 73897161, "body": "I marked your answer correct brother thanks a lot. im noob in stackover flow im sorry. well would you be so kind as to answer my question about this method in production. i wanna know if is efficent update a product for each comment. thanks teacher i hope your answer"}], "tags": [], "owner": {"reputation": 16860, "user_id": 1536309, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/40f2ef2f2a528a76dbd3667acd154e5c?s=128&d=identicon&r=PG", "display_name": "Blair Anderson", "link": "https://stackoverflow.com/users/1536309/blair-anderson"}, "is_accepted": true, "score": 1, "last_activity_date": 1492133125, "last_edit_date": 1492133125, "creation_date": 1491963945, "answer_id": 43359167, "question_id": 43358469, "link": "https://stackoverflow.com/questions/43358469/how-to-show-a-link-to-helper-only-if-it-returns-0/43359167#43359167", "title": "How to show a link_to helper only if it returns &gt; 0", "body": "<p>The best way I can think to solve this is to:</p>\n\n<ul>\n<li>add a <code>comment_count</code> attribute to your database</li>\n<li>add a disqus <code>onNewComment</code> callback to update the comment count on your record.</li>\n</ul>\n\n<p>With Javascript you can add a callback:</p>\n\n<pre><code>var disqus_config = function () {\n    this.callbacks.onNewComment = [\n      function() {\n        alert(comment.id);\n        alert(comment.text);\n        $.ajax({\n          method: \"PATCH\",\n          url: \"&lt;%= product_path(product) %&gt;\",\n          data: {increment: \"comment_count\"}\n        })\n      }\n    ];\n};\n</code></pre>\n\n<p>then you would know the comment count going forward. </p>\n\n<p>documentation: <a href=\"https://help.disqus.com/customer/portal/articles/466258-capturing-disqus-commenting-activity-via-callbacks\" rel=\"nofollow noreferrer\">https://help.disqus.com/customer/portal/articles/466258-capturing-disqus-commenting-activity-via-callbacks</a></p>\n\n<p>Change your Controller to:</p>\n\n<pre><code>def update    \n  product = Product.find(params[:id])\n  if params[:comment_count]\n    product.increment!(:comment_count)\n  else\n    product.update(update_product)\n  end\nend\n</code></pre>\n"}], "owner": {"reputation": 75, "user_id": 7113430, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh4.googleusercontent.com/-2XN_Xu88CjQ/AAAAAAAAAAI/AAAAAAAAABI/KwN4y2M-oY0/photo.jpg?sz=128", "display_name": "Alien Java", "link": "https://stackoverflow.com/users/7113430/alien-java"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 75, "favorite_count": 0, "accepted_answer_id": 43359167, "answer_count": 2, "score": 0, "last_activity_date": 1492133125, "creation_date": 1491958227, "last_edit_date": 1492037722, "question_id": 43358469, "link": "https://stackoverflow.com/questions/43358469/how-to-show-a-link-to-helper-only-if-it-returns-0", "title": "How to show a link_to helper only if it returns &gt; 0", "body": "<p>I have this helper link</p>\n\n<pre><code>link_to \"\", product_path(product, anchor: \"disqus_thread\"), data: { \"disqus-identifier\" =&gt; \"#{url_for([product, {only_path: false}])}\" }, class: \"no-underline bold grey-text text-darken-3 margin-left\"\n</code></pre>\n\n<p>layout: application.rb</p>\n\n<pre><code>%script{id: \"dsq-count-scr\", src: \"https://url.disqus.com/count.js\", async: \"async\"}\n</code></pre>\n\n<p>_disqus.html.erb</p>\n\n<pre><code>&lt;div class=\"col-lg-8 col-lg-offset-2 big-top-space margin-bottom\"&gt;\n  &lt;div id=\"disqus_thread\"&gt;&lt;/div&gt;\n  &lt;script&gt;\n    var disqus_shortname = 'yourname';\n    var disqus_identifier = '&lt;%= url_for([product, {only_path: false}]) %&gt;';\n    var disqus_title = '&lt;%= product.name %&gt;';\n    var disqus_url = '&lt;%= url_for([product, {only_path: false}]) %&gt;';\n  (function() { // DON'T EDIT BELOW THIS LINE\n     var d = document, s = d.createElement('script');\n     s.src = 'https://url.disqus.com/embed.js';\n     s.setAttribute('data-timestamp', +new Date());\n     (d.head || d.body).appendChild(s);\n  })();\n&lt;/script&gt;\n&lt;noscript&gt;Please enable JavaScript to view the &lt;a href=\"https://disqus.com/?ref_noscript\"&gt;comments powered by Disqus.&lt;/a&gt;&lt;/noscript&gt;\n\n&lt;/div&gt;\n</code></pre>\n\n<p>and all works fine I get a number, the number is the disqus comments counter of each post in my index view, but how show only the number if <strong>is greater than 0?</strong> if <strong>is equal to 0</strong> I dont wanna show it in the view. Someone know how to resolve this problem? Thanks a lot </p>\n\n<p>i tried with this:</p>\n\n<blockquote>\n  <p>add this column to products comment_count       :integer</p>\n</blockquote>\n\n<p>i changed my _disqus.html</p>\n\n<pre><code> &lt;div class=\"col-lg-8 col-lg-offset-2 big-top-space margin-bottom\"&gt;\n      &lt;div id=\"disqus_thread\"&gt;&lt;/div&gt;\n      &lt;script&gt;\n        var disqus_shortname = 'yourname';\n        var disqus_identifier = '&lt;%= url_for([product, {only_path: false}]) %&gt;';\n        var disqus_title = '&lt;%= product.name %&gt;';\n        var disqus_url = '&lt;%= url_for([product, {only_path: false}]) %&gt;';\n\n       var disqus_config = function () {\n    this.callbacks.onNewComment = [\n      function() {        \n        $.ajax({\n          method: \"PATCH\",\n          url: '&lt;%= product_path(product) %&gt;',\n          data: {increment: \"comment_count\"}\n        })\n      }\n    ];\n};\n      (function() { // DON'T EDIT BELOW THIS LINE\n         var d = document, s = d.createElement('script');\n         s.src = 'https://url.disqus.com/embed.js';\n         s.setAttribute('data-timestamp', +new Date());\n         (d.head || d.body).appendChild(s);\n      })();\n    &lt;/script&gt;\n    &lt;noscript&gt;Please enable JavaScript to view the &lt;a href=\"https://disqus.com/?ref_noscript\"&gt;comments powered by Disqus.&lt;/a&gt;&lt;/noscript&gt;\n\n    &lt;/div&gt;\n</code></pre>\n\n<p>Product_controller</p>\n\n<pre><code>def update    \n    product = Product.find(params[:id])\n    product.update(update_product)\n  end\ndef update_product\n  params.permit(:comment_count)\nend    \n</code></pre>\n\n<p>source: <a href=\"https://help.disqus.com/customer/portal/articles/466258-capturing-disqus-commenting-activity-via-callbacks\" rel=\"nofollow noreferrer\">https://help.disqus.com/customer/portal/articles/466258-capturing-disqus-commenting-activity-via-callbacks</a></p>\n\n<p>but i get this error </p>\n\n<pre><code>   Started PATCH \"/products/12\" for ::1 at 2017-04-12 17:44:38 -0500\nProcessing by ProductsController#update as */*\nParameters: {\"increment\"=&gt;\"comment_count\", \"id\"=&gt;\"12\"}\nShoppingCart Load (0.0ms) SELECT \"shopping_carts\".* FROM \"shopping_carts\" WH\nERE \"shopping_carts\".\"id\" = ? LIMIT 1 [[\"id\", 102]]\nProduct Load (0.0ms) SELECT \"products\".* FROM \"products\" WHERE \"products\".\"i\nd\" = ? LIMIT 1 [[\"id\", 12]]\nCACHE (0.0ms) SELECT \"products\".* FROM \"products\" WHERE \"products\".\"id\" = ?\nLIMIT 1 [[\"id\", \"12\"]]\nUnpermitted parameters: increment, id\n(0.0ms) begin transaction\nUser Load (0.0ms) SELECT \"users\".* FROM \"users\" WHERE \"users\".\"id\" = ? LIMIT\n1 [[\"id\", 1]]\n(0.0ms) commit transaction\nRendered products/update.haml within layouts/application (0.0ms)\n(0.0ms) SELECT COUNT(*) FROM \"products\" INNER JOIN \"in_shopping_carts\" ON \"p\nroducts\".\"id\" = \"in_shopping_carts\".\"product_id\" WHERE \"in_shopping_carts\".\"shop\nping_cart_id\" = ? [[\"shopping_cart_id\", 102]]\nRendered partials/_unlogged.haml (15.5ms)\nRendered partials/_nav.haml (765.8ms)\nCompleted 200 OK in 3476ms (Views: 3448.8ms | ActiveRecord: 0.0ms)\n</code></pre>\n\n<blockquote>\n  <p>Unpermitted parameters: increment, id</p>\n</blockquote>\n\n<p>in console</p>\n\n<blockquote>\n  <p>comment_count: nil</p>\n</blockquote>\n\n<p>someone can help me?</p>\n"}, {"tags": ["ruby", "regex", "split"], "answers": [{"tags": [], "owner": {"reputation": 126343, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "is_accepted": true, "score": 6, "last_activity_date": 1491958921, "creation_date": 1491958921, "answer_id": 43358550, "question_id": 43358452, "link": "https://stackoverflow.com/questions/43358452/ruby-split-string-made-up-of-emails-at-space-or-comma/43358550#43358550", "title": "Ruby - split string made up of emails at space or comma", "body": "<p>What you need is a <a href=\"http://www.regular-expressions.info/charclass.html\" rel=\"noreferrer\">character set</a>, denoted by <code>[]</code>.</p>\n\n<pre><code>@emails.split(/[,\\s]+/)\n</code></pre>\n\n<p>The <code>[]</code> say to match any character in that set. The <code>+</code> is there because you want to treat multiple spaces between emails as a single separator.</p>\n"}, {"comments": [{"owner": {"reputation": 21, "user_id": 5594269, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/285b935e62a023618ed2dd61f0590334?s=128&d=identicon&r=PG&f=1", "display_name": "Aditya", "link": "https://stackoverflow.com/users/5594269/aditya"}, "reply_to_user": {"reputation": 126343, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "edited": false, "score": 0, "creation_date": 1491959666, "post_id": 43358608, "comment_id": 73779903, "body": "if you want multiple spaces, @Schwern &#39;s solution works"}, {"owner": {"reputation": 126343, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "edited": false, "score": 0, "creation_date": 1491959700, "post_id": 43358608, "comment_id": 73779915, "body": "If you want multiple spaces, but a single comma, use <code>&#47;\\s+|,&#47;</code>."}, {"owner": {"reputation": 21, "user_id": 5594269, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/285b935e62a023618ed2dd61f0590334?s=128&d=identicon&r=PG&f=1", "display_name": "Aditya", "link": "https://stackoverflow.com/users/5594269/aditya"}, "reply_to_user": {"reputation": 126343, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "edited": false, "score": 0, "creation_date": 1491959706, "post_id": 43358608, "comment_id": 73779916, "body": "@Schwern ya sorry"}, {"owner": {"reputation": 3870, "user_id": 1769777, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/06763dd36a45c8966c7171ba3697847d?s=128&d=identicon&r=PG", "display_name": "Adam", "link": "https://stackoverflow.com/users/1769777/adam"}, "edited": false, "score": 0, "creation_date": 1492009577, "post_id": 43358608, "comment_id": 73808691, "body": "While this code snippet may be the solution, <a href=\"//meta.stackexchange.com/questions/114762/explaining-entirely-%E2%80%8C%E2%80%8Bcode-based-answers\">including an explanation</a> really helps to improve the quality of your post. Remember that you are answering the question for readers in the future, and those people might not know the reasons for your code suggestion."}], "tags": [], "owner": {"reputation": 21, "user_id": 5594269, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/285b935e62a023618ed2dd61f0590334?s=128&d=identicon&r=PG&f=1", "display_name": "Aditya", "link": "https://stackoverflow.com/users/5594269/aditya"}, "is_accepted": false, "score": 0, "last_activity_date": 1491959714, "last_edit_date": 1491959714, "creation_date": 1491959558, "answer_id": 43358608, "question_id": 43358452, "link": "https://stackoverflow.com/questions/43358452/ruby-split-string-made-up-of-emails-at-space-or-comma/43358608#43358608", "title": "Ruby - split string made up of emails at space or comma", "body": "<pre><code>@emails.split(/\\s|,/) will work // is for multiple and | is to say or\n</code></pre>\n"}], "owner": {"reputation": 41, "user_id": 5244092, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/85dc8164b8fbf6a6c99e4a0912af1799?s=128&d=identicon&r=PG&f=1", "display_name": "alexnewby", "link": "https://stackoverflow.com/users/5244092/alexnewby"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1430, "favorite_count": 0, "accepted_answer_id": 43358550, "answer_count": 2, "score": 1, "last_activity_date": 1491959714, "creation_date": 1491958050, "question_id": 43358452, "link": "https://stackoverflow.com/questions/43358452/ruby-split-string-made-up-of-emails-at-space-or-comma", "title": "Ruby - split string made up of emails at space or comma", "body": "<p>I'm working with an instance method inside a class that needs to take in a string of emails and separate them at either a comma OR a space. </p>\n\n<p>I keep getting one or the other to pass, but can't make it so that both the comma and space pass together. I'm trying with regex. </p>\n\n<p>Thanks for your help!</p>\n\n<pre><code>def parse\n  @emails.split(/,\\s/)\nend\n</code></pre>\n\n<p>example of emails list string: xyz@yahoo.com, blablabla@gmail.com luliluli@msn.com</p>\n"}, {"tags": ["ruby", "mongoid"], "answers": [{"tags": [], "owner": {"reputation": 880, "user_id": 5279080, "user_type": "registered", "accept_rate": 68, "profile_image": "https://lh5.googleusercontent.com/-LoDm6XYbQug/AAAAAAAAAAI/AAAAAAAAABE/t33anFH2T3I/photo.jpg?sz=128", "display_name": "alilland", "link": "https://stackoverflow.com/users/5279080/alilland"}, "is_accepted": false, "score": 0, "last_activity_date": 1491956088, "last_edit_date": 1495542896, "creation_date": 1491956088, "answer_id": 43358199, "question_id": 43358031, "link": "https://stackoverflow.com/questions/43358031/mongoid-where-query-for-nil-or/43358199#43358199", "title": "Mongoid &quot;where&quot; query for nil or &quot;&quot;", "body": "<p>solved, the answer was using <code>any_of</code> instead of <code>where</code></p>\n\n<pre><code>any_of({foreman: nil, status: 'Active'}, {foreman: '', status: 'Active'}).order_by(first_name: :asc)\n</code></pre>\n\n<p>more info was found here:\n<a href=\"https://stackoverflow.com/questions/12999368/mongoid-or-query-syntax\">Mongoid OR query syntax</a></p>\n"}], "owner": {"reputation": 880, "user_id": 5279080, "user_type": "registered", "accept_rate": 68, "profile_image": "https://lh5.googleusercontent.com/-LoDm6XYbQug/AAAAAAAAAAI/AAAAAAAAABE/t33anFH2T3I/photo.jpg?sz=128", "display_name": "alilland", "link": "https://stackoverflow.com/users/5279080/alilland"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 166, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1491956088, "creation_date": 1491954859, "last_edit_date": 1495535443, "question_id": 43358031, "link": "https://stackoverflow.com/questions/43358031/mongoid-where-query-for-nil-or", "title": "Mongoid &quot;where&quot; query for nil or &quot;&quot;", "body": "<p>I need to query my mongodb collection for anything that has a foreman equal to nil or \"\"</p>\n\n<p>this is what I have so far... but I dont know how to alter it to accept <code>nil</code> and <code>\"\"</code>, I found this, but its SUPER not clear and I havent been able to make it work </p>\n\n<p><a href=\"https://stackoverflow.com/questions/9641924/or-query-matching-nil-or-with-mongoid-still-matches\">OR query matching nil or &quot;&quot; with Mongoid still matches &quot;&quot;?</a></p>\n\n<pre><code>where(foreman: '', status: 'Active').order_by(first_name: :asc)\n</code></pre>\n"}, {"tags": ["ruby", "linux", "ubuntu", "rubygems"], "comments": [{"owner": {"reputation": 12661, "user_id": 5343387, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/15a14cec3014822297a08ed6dfae2563?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Schuchard", "link": "https://stackoverflow.com/users/5343387/matt-schuchard"}, "edited": false, "score": 0, "creation_date": 1491998225, "post_id": 43357985, "comment_id": 73799375, "body": "Ruby doesn&#39;t use Gemfile; Bundler does."}, {"owner": {"reputation": 7894, "user_id": 981616, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/92513702d30405c7e2ca056bdc72aa9f?s=128&d=identicon&r=PG", "display_name": "uday", "link": "https://stackoverflow.com/users/981616/uday"}, "edited": false, "score": 0, "creation_date": 1492015375, "post_id": 43357985, "comment_id": 73812729, "body": "what gems does your amazon linux box have? do <code>$ gem list child_gem</code> and show the output please"}, {"owner": {"reputation": 6448, "user_id": 2802626, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/1f9eb1e491f0d9cbf3d7b4723a78555a?s=128&d=identicon&r=PG", "display_name": "EmptyArsenal", "link": "https://stackoverflow.com/users/2802626/emptyarsenal"}, "reply_to_user": {"reputation": 7894, "user_id": 981616, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/92513702d30405c7e2ca056bdc72aa9f?s=128&d=identicon&r=PG", "display_name": "uday", "link": "https://stackoverflow.com/users/981616/uday"}, "edited": false, "score": 0, "creation_date": 1492017390, "post_id": 43357985, "comment_id": 73813884, "body": "@uDaY I added the output to the question."}, {"owner": {"reputation": 7894, "user_id": 981616, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/92513702d30405c7e2ca056bdc72aa9f?s=128&d=identicon&r=PG", "display_name": "uday", "link": "https://stackoverflow.com/users/981616/uday"}, "edited": false, "score": 0, "creation_date": 1492017590, "post_id": 43357985, "comment_id": 73813992, "body": "thanks!can you also do the same for the parent_gem and show if you&#39;re forcing the child_gem to particular version in Gemfile."}], "owner": {"reputation": 6448, "user_id": 2802626, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/1f9eb1e491f0d9cbf3d7b4723a78555a?s=128&d=identicon&r=PG", "display_name": "EmptyArsenal", "link": "https://stackoverflow.com/users/2802626/emptyarsenal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 79, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1492017883, "creation_date": 1491954529, "last_edit_date": 1492017883, "question_id": 43357985, "link": "https://stackoverflow.com/questions/43357985/ruby-gem-conflicts-between-local-gem-and-system-installed-gem", "title": "Ruby Gem conflicts between local gem and system installed gem", "body": "<p>I have a Gemfile that looks something like this:</p>\n\n<p>source '<a href=\"http://rubygems.org\" rel=\"nofollow noreferrer\">http://rubygems.org</a>'</p>\n\n<pre><code>gemspec\ngem \"parent_gem\", \"0.1.3\", :path =&gt; \"#{File.expand_path(__FILE__)}/../vendor/gems/parent_gem-0.1.3\"\n</code></pre>\n\n<p><code>parent_gem</code> depends on <code>child_gem-1.4.1</code>, which we have packaged in the <code>/vender/gems</code> folder in the package. If a user installs <code>child_gem-1.6.0</code> on their host on Ubuntu, they will get a <code>Gem::ConflictError</code> because it will try to use 1.6 and log <code>child_gem-1.6.0 conflicts with child_gem (~&gt; 1.4.1).</code> However, if a user runs it on Amazon Linux, it works fine and uses the packaged child gem.</p>\n\n<p>If I run <code>gem list child_gem</code>, I get the following output on both systems:</p>\n\n<pre><code>*** LOCAL GEMS ***\n\nchild_gem (1.6.1)\n</code></pre>\n\n<p><code>gem list parent_gem</code> returns nothing because it's not installed separated and only exists in the package's <code>vendor</code> directory.</p>\n\n<p>In the files that initiates the script, there is this line:</p>\n\n<pre><code>Gem.use_paths(nil, Gem.path &lt;&lt; \"/opt/my-app/vendor\")\n</code></pre>\n\n<p>And the <code>/opt/my-app/vendor</code> directory includes <code>child_gem-1.4.1</code>.</p>\n\n<p>Ultimately, I know that setting up the package properly with Bundler should resolve the issue, but I'm trying to understand why this is an issue.</p>\n\n<p>How does Ruby decide where to look for a gem on a system? And where do I look to understand why it works on Amazon Linux but not Ubuntu?</p>\n"}, {"tags": ["ruby", "web", "amazon-ec2", "sinatra", "em-websocket"], "comments": [{"owner": {"reputation": 16402, "user_id": 4025095, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/blJ4L.jpg?s=128&g=1", "display_name": "Myst", "link": "https://stackoverflow.com/users/4025095/myst"}, "edited": false, "score": 0, "creation_date": 1492226324, "post_id": 43357720, "comment_id": 73902477, "body": "I&#39;m not sure which servers you&#39;re using... what are the differences between your development server and the EC2 instance? ... what is the routing stack (before the app server) ? ... also ... I suspect that even if you used Ruby with a native C Websocket server (such as the <code>iodine</code> gem)... you would still experience slowdowns that relate to your application logic and the amount of processing it requires for routing, concurrent loads, etc&#39;."}, {"owner": {"reputation": 1, "user_id": 7853445, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1cb48f23ad90ce656fe07904af1add50?s=128&d=identicon&r=PG&f=1", "display_name": "Mark", "link": "https://stackoverflow.com/users/7853445/mark"}, "reply_to_user": {"reputation": 16402, "user_id": 4025095, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/blJ4L.jpg?s=128&g=1", "display_name": "Myst", "link": "https://stackoverflow.com/users/4025095/myst"}, "edited": false, "score": 0, "creation_date": 1492245438, "post_id": 43357720, "comment_id": 73906396, "body": "My development server is local. So, the speed is not a surprise since network latency doesn&#39;t exist.  As far as my application logic goes, this isolated case simply does the following: client -&gt; sends ~400kb 64base encoded img to server -&gt; thin server receives the image -&gt; server sends it right back without any processing."}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 7853445, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1cb48f23ad90ce656fe07904af1add50?s=128&d=identicon&r=PG&f=1", "display_name": "Mark", "link": "https://stackoverflow.com/users/7853445/mark"}, "edited": false, "score": 0, "creation_date": 1492537327, "post_id": 43431189, "comment_id": 74013074, "body": "Hey Myst, I&#39;ll definitely check Plezi out and test your code. If you&#39;re interested in replicating my issue, you can create an AWS-EC2 (free tier) and clone my <a href=\"https://github.com/markediez/ecs193ab\" rel=\"nofollow noreferrer\">repo</a>."}, {"owner": {"reputation": 16402, "user_id": 4025095, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/blJ4L.jpg?s=128&g=1", "display_name": "Myst", "link": "https://stackoverflow.com/users/4025095/myst"}, "reply_to_user": {"reputation": 1, "user_id": 7853445, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1cb48f23ad90ce656fe07904af1add50?s=128&d=identicon&r=PG&f=1", "display_name": "Mark", "link": "https://stackoverflow.com/users/7853445/mark"}, "edited": false, "score": 0, "creation_date": 1492572339, "post_id": 43431189, "comment_id": 74026918, "body": "@Mark , I noticed the code in the repo parses and re-formats the JSON object. I edited my answer to offer JSON parsing as part of the flow. It slows things down by ~20ms on my machine."}], "tags": [], "owner": {"reputation": 16402, "user_id": 4025095, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/blJ4L.jpg?s=128&g=1", "display_name": "Myst", "link": "https://stackoverflow.com/users/4025095/myst"}, "is_accepted": false, "score": 0, "last_activity_date": 1492572700, "last_edit_date": 1492572700, "creation_date": 1492289654, "answer_id": 43431189, "question_id": 43357720, "link": "https://stackoverflow.com/questions/43357720/how-do-we-speed-up-transmission-between-client-and-server-using-websockets/43431189#43431189", "title": "How do we speed up transmission between client and server using websockets?", "body": "<p>This is more or a testing helper than an answer, since the question doesn't provide enough details to narrow the issue down.</p>\n\n<hr>\n\n<p>I wrote a simple test application using <a href=\"http://www.plezi.io\" rel=\"nofollow noreferrer\">Plezi</a>. Since I'm plezi's author it was easier for me than to learn your stack.</p>\n\n<p>It works perfectly on my computer, 79ms for a ~3Mb file.</p>\n\n<p>The ~3Mb roundtrip to Heroku took my system 3 seconds and went down to ~2.5 seconds after the TCP/IP warmup was complete...</p>\n\n<p>...but my internet speeds are probably effecting the test (my reception is low at the moment, so I might be slow).</p>\n\n<p>I'm not sure I can replicate the issue, but you can use the code in this answer to test your server.</p>\n\n<p>If the roundtrip still takes longer than 10 seconds, it might be the EC2 stack. I don't think 10 seconds would be reasonable for ~500Kb.</p>\n\n<p>On the other hand, if it's a shorter roundtrip, it might be either the way you tested your application or your Ruby stack... in which case, maybe the solution is to switch to plezi (or the <a href=\"https://github.com/boazsegev/iodine/blob/master/SPEC-Websocket-Draft.md\" rel=\"nofollow noreferrer\">iodine native websocket design</a>).</p>\n\n<p>You can paste the following code into <code>config.ru</code> (remember you'll also need a gem file with the <code>plezi</code> gem and possibly a <code>Gemfile.lock</code>):</p>\n\n<pre><code># The roundtrip html client\nROUNDTRIP_CLIENT = &lt;&lt;CLIENT_EFO\n&lt;html&gt;\n  &lt;head&gt;\n    &lt;script src = '/client.js'&gt;&lt;/script&gt;\n  &lt;/head&gt;\n  &lt;body&gt;\n  &lt;input type='file' id='test_f' lable='file to upload'&gt;&lt;/input&gt;\n  &lt;button id='test_b'&gt;run test&lt;/button&gt;\n  &lt;div id='output'&gt;&lt;/div&gt;\n  &lt;script&gt;\n  var client;\n  window.onload = function (e) {\n    client = new PleziClient();\n    client.autoreconnect = true;\n    client.roundtrip = (e) =&gt; {\n      var d = new Date();\n      e.completed_at = d.getTime();\n      console.log(e);\n      document.getElementById('output').innerHTML += \"&lt;p&gt;Test for \" +\n        \"&lt;a href='\" + e.data + \"' target='_blank'&gt;\" + Math.round(e.data.length / 1024)+ \"Kb encoded file&lt;/a&gt;\" +\n        \" completed in \" + (e.completed_at - e.time) + \"ms&lt;/p&gt;\";\n    }\n    client.onopen = (e) =&gt; console.log(\"Websocket client open\", e);\n  }\n\n  function run_test(e) {\n    console.log(\"File submitted.\");\n    reader = new FileReader();\n    reader.onloadend = function(e)\n    {\n      console.log(\"File loaded, \" + e.target.result.length + \"bytes... starting test.\")\n      var d = new Date();\n      client.emit({event: \"roundtrip\", data: e.target.result, time: d.getTime() });\n    }\n    reader.readAsDataURL(document.getElementById('test_f').files[0]);\n    return false;\n  }\n  document.getElementById('test_b').onclick = run_test;\n  &lt;/script&gt;\n  &lt;/body&gt;\n&lt;/html&gt;\nCLIENT_EFO\n\n# require plezi\nrequire 'plezi'\n# For security, Iodine limists websocket messages.\n# We update the default limit from ~250Kb to ~4Mb.\n# This replaces the commandline option: iodine -v -maxms 4194304\nIodine::Rack.max_msg_size = 4194304\n\n# the roundtrip controller... quite simple.\nclass RoundTrip\n  # return the roundtrip client.\n  def index\n    ROUNDTRIP_CLIENT\n  end\n  # echo back the websocket message - we're just testing the round trip.\n  def on_message data\n    write data\n  end\nend\n# Set the plezi root route to the RoundTrip controller\nPlezi.route '/', RoundTrip\n# Set the client javascript route - I'm using it as a heler.\nPlezi.route '/client.js', :client\n# Set Rack to run the Plezi application\nrun Plezi.app\n</code></pre>\n\n<p>To run the code from the terminal, use the <code>iodine</code> command (it will start the <code>iodine</code> server, which Plezi requires.</p>\n\n<hr>\n\n<p><strong>EDIT</strong></p>\n\n<p>From the link to the git-repo (in the comments), I realized that the JSON is parsed by the server and then it is re-emitted.</p>\n\n<p>To emulate this, I updated the example code.</p>\n\n<p>This should be similar to what the code in the repo seems to do and it adds some time to the roundtrip, since the JSON parsing and re-formatting create copies of the data, which requires memory allocation as well as CPU time.</p>\n\n<p>The only change in the code is in the <code>RoundTrip</code> controller class, but I'm pasting the whole thing for your copy+paste convenience.</p>\n\n<p>Place the following code in your <code>app.rb</code> file (remember to edit <code>install.sh</code> to install the <code>plezi</code> gem):</p>\n\n<pre><code># The roundtrip html client\nROUNDTRIP_CLIENT = &lt;&lt;CLIENT_EFO\n&lt;html&gt;\n  &lt;head&gt;\n    &lt;script src = '/client.js'&gt;&lt;/script&gt;\n  &lt;/head&gt;\n  &lt;body&gt;\n  &lt;input type='file' id='test_f' lable='file to upload'&gt;&lt;/input&gt;\n  &lt;button id='test_b'&gt;run test&lt;/button&gt;\n  &lt;div id='output'&gt;&lt;/div&gt;\n  &lt;script&gt;\n  var client;\n  window.onload = function (e) {\n    client = new PleziClient();\n    client.autoreconnect = true;\n    client.roundtrip = (e) =&gt; {\n      var d = new Date();\n      e.completed_at = d.getTime();\n      console.log(e);\n      document.getElementById('output').innerHTML += \"&lt;p&gt;Test for \" +\n        \"&lt;a href='\" + e.data + \"' target='_blank'&gt;\" + Math.round(e.data.length / 1024)+ \"Kb encoded file&lt;/a&gt;\" +\n        \" completed in \" + (e.completed_at - e.time) + \"ms&lt;/p&gt;\";\n    }\n    client.onopen = (e) =&gt; console.log(\"Websocket client open\", e);\n  }\n\n  function run_test(e) {\n    console.log(\"File submitted.\");\n    reader = new FileReader();\n    reader.onloadend = function(e)\n    {\n      console.log(\"File loaded, \" + e.target.result.length + \"bytes... starting test.\")\n      var d = new Date();\n      client.emit({event: \"roundtrip\", data: e.target.result, time: d.getTime() });\n    }\n    reader.readAsDataURL(document.getElementById('test_f').files[0]);\n    return false;\n  }\n  document.getElementById('test_b').onclick = run_test;\n  &lt;/script&gt;\n  &lt;/body&gt;\n&lt;/html&gt;\nCLIENT_EFO\n\n# require plezi\nrequire 'plezi'\n# For security, Iodine limists websocket messages.\n# We update the default limit from ~250Kb to ~4Mb.\n# This replaces the commandline option: iodine -v -maxms 4194304\nIodine::Rack.max_msg_size = 4194304\n\n# the roundtirp controller... quite simple.\nclass RoundTrip\n  @auto_dispatch = true\n  # return the roundtrip client.\n  def index\n    ROUNDTRIP_CLIENT\n  end\n  # Using Auto-Dispatch, the JSON is parsed and this event is invoked.\n  def roundtrip msg\n    # Hash results are automatically converted into JSON and emitted\n    msg\n  end\nend\n# Set the plezi root route to the RoundTrip controller\nPlezi.route '/', RoundTrip\n# Set the client javascript route - I'm using it as a heler.\nPlezi.route '/client.js', :client\n# Plezi will start automatically when the script exits\n</code></pre>\n\n<p>To run the code from the terminal, use the <code>ruby app.rb</code> command, same as your repo does for the existing app.</p>\n\n<p>While the old code simply offered and \"echo\" response, the new code (which looks almost the same) has a few more steps:</p>\n\n<ul>\n<li><p>Using Auto-Dispatch, the Plezi framework now automatically parses the JSON and routes the event (\"roundtrip\") the the controller's method (<code>roundtrip</code>).</p></li>\n<li><p>The method receives a Hash with the parsed data and returns that Hash back to Plezi.</p></li>\n<li><p>The framework collects the Hash, formats a JSON object and emits back the result (non String or Hash results are ignored)...</p></li>\n</ul>\n\n<p>... this is similar to the repo's behavior.</p>\n"}], "owner": {"reputation": 1, "user_id": 7853445, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1cb48f23ad90ce656fe07904af1add50?s=128&d=identicon&r=PG&f=1", "display_name": "Mark", "link": "https://stackoverflow.com/users/7853445/mark"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 283, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1492572700, "creation_date": 1491952615, "last_edit_date": 1492537560, "question_id": 43357720, "link": "https://stackoverflow.com/questions/43357720/how-do-we-speed-up-transmission-between-client-and-server-using-websockets", "title": "How do we speed up transmission between client and server using websockets?", "body": "<p>Currently, I am using websockets to send an image to my server, process it, and then send it back. Specifically, I am using Ruby with Sinatra and sinatra-websocket.</p>\n\n<p>On my development server, it takes ~2 seconds to send an image to the server and retrieving the exact image without processing.</p>\n\n<p>On an AWS-EC2 instance, this takes ~15 seconds. The image file I am sending is ~500kb. My upload and download speeds are well above that.</p>\n\n<p>How can I speed up this process? Is this a naive way of sending images back and forth?</p>\n\n<p>Edit: To replicate my issue, you can clone and run my <a href=\"https://github.com/markediez/ecs193ab\" rel=\"nofollow noreferrer\">repo</a> in an AWS-EC2 free tier instance.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "web-services", "api"], "comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1491966075, "post_id": 43357121, "comment_id": 73781485, "body": "HaCos, I trust my edit did not change your question. If it did please accept my apology and either edit my edit or roll-back to your original question. (Click &quot;edited&quot; to bring up the rollback option.)"}], "answers": [{"tags": [], "owner": {"reputation": 1302, "user_id": 1368977, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c79672007d59af69a05f2b5f6929b53f?s=128&d=identicon&r=PG", "display_name": "Marc Rohloff", "link": "https://stackoverflow.com/users/1368977/marc-rohloff"}, "is_accepted": false, "score": 3, "last_activity_date": 1491950194, "creation_date": 1491950194, "answer_id": 43357321, "question_id": 43357121, "link": "https://stackoverflow.com/questions/43357121/handling-a-webservice-responce-with-ror/43357321#43357321", "title": "handling a webservice responce with ror", "body": "<p>Each row is a hash so you need to access its elements by name not by index (as you would with an array). The following should work:</p>\n\n<pre><code>def format_response(response)   \n  formatted_response = response['rows'].map do |row|\n    { id: row['ID'],\n      code: row['CODE'],\n      code1: row['CODE_1'],\n      balance: row['balance'] }   \n  end\n  formatted_response.uniq { |x| x[:code1] }\nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "is_accepted": true, "score": 3, "last_activity_date": 1491950672, "last_edit_date": 1491950672, "creation_date": 1491950372, "answer_id": 43357352, "question_id": 43357121, "link": "https://stackoverflow.com/questions/43357121/handling-a-webservice-responce-with-ror/43357352#43357352", "title": "handling a webservice responce with ror", "body": "<p><code>response['rows']</code> contains an array of hashes. Hashes in ruby are not associative arrays so you cannot get the first key by <code>hash[0]</code>.</p>\n\n<pre><code>def format_response(response)   \n  response['rows'].map do |row|\n    {   \n      id: row[\"ID\"],\n      code: row[\"CODE\"],\n      code_1: row[\"CODE_1\"],\n      balance: row[\"BALANCE\"] \n    }   \n  end.uniq { |x| x[:code1] }\nend\n</code></pre>\n"}], "owner": {"reputation": 125, "user_id": 1225602, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/60ec3dcc9dc05734a801cc4374f9d6e5?s=128&d=identicon&r=PG", "display_name": "HaCos", "link": "https://stackoverflow.com/users/1225602/hacos"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 51, "favorite_count": 0, "accepted_answer_id": 43357352, "answer_count": 2, "score": 2, "last_activity_date": 1491966346, "creation_date": 1491949106, "last_edit_date": 1491966346, "question_id": 43357121, "link": "https://stackoverflow.com/questions/43357121/handling-a-webservice-responce-with-ror", "title": "handling a webservice responce with ror", "body": "<p>I am collecting a response from a web service in a Rails' app with</p>\n\n<pre><code>response = #api.sql_data    \n</code></pre>\n\n<p>This causes <code>response</code> to equal the following.</p>\n\n<pre><code>response\n  #=&gt; { \"success\"=&gt;true, \"totalcount\"=&gt;10, \"rows\"=&gt;[\n  #     { \"ID\"=&gt;\"0001\", \"CODE\"=&gt;\"0000001\", \"CODE_1\"=&gt;\"Alpha\",\n  #       \"NAME\"=&gt;\"Alpha\", \"Balance\"=&gt;\"0\" },\n  #     { \"ID\"=&gt;\"0002\", \"CODE\"=&gt;\"0000002\", \"CODE_1\"=&gt;\"Beta\",\n  #       \"NAME\"=&gt;\"Beta\", \"Balance\"=&gt;\"0\" },\n  #     { \"ID\"=&gt;\"0003\", \"CODE\"=&gt;\"0000003\", \"CODE_1\"=&gt;\"Charlie\",\n  #       \"NAME\"=&gt;\"Charlie\", \"Balance\"=&gt;\"0\"},\n  #     ...\n  #     ]\n  #   }\n</code></pre>\n\n<p>I have created the following method:</p>\n\n<pre><code>def format_response(response)   \n  response['rows'].map do |row|\n    { id: row[0],\n      code: row[1],\n      code1: row[2],\n      balance: row[4] }   \n  end.uniq { |x| x[:code1] }\nend\n</code></pre>\n\n<p>When I execute this method for the above value of <code>response</code>, I obtain the following.</p>\n\n<pre><code>format_response(response)\n  #=&gt; [{:id=&gt;nil, :code=&gt;nil, :code1=&gt;nil, :balance=&gt;nil}] \n</code></pre>\n\n<p>This is incorrect. I would like this expression to return the following.</p>\n\n<pre><code>{\"ID\"=&gt;\"0001\", \"CODE\"=&gt;\"0000001\", \"CODE_1\"=&gt;\"Alpha\", \"NAME\"=&gt;\"Alpha\", \"Balance\"=&gt;\"0\"}\n</code></pre>\n\n<p>What is my mistake?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "unicorn"], "answers": [{"tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user5923919"}, "is_accepted": true, "score": 0, "last_activity_date": 1497961936, "creation_date": 1497961936, "answer_id": 44653182, "question_id": 43356990, "link": "https://stackoverflow.com/questions/43356990/how-to-add-exception-rule-for-unicorn/44653182#44653182", "title": "How to add exception rule for unicorn?", "body": "<p>You must make a upload in Background. Please see gem <a href=\"https://github.com/brandonhilkert/sucker_punch\" rel=\"nofollow noreferrer\">sucker_punch</a></p>\n"}], "owner": {"reputation": 583, "user_id": 6532309, "user_type": "registered", "accept_rate": 67, "profile_image": "https://lh6.googleusercontent.com/-i_I-gCdbAyM/AAAAAAAAAAI/AAAAAAAAAIk/_RwOEctiQ_s/photo.jpg?sz=128", "display_name": "Andy", "link": "https://stackoverflow.com/users/6532309/andy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 52, "favorite_count": 0, "accepted_answer_id": 44653182, "answer_count": 1, "score": 1, "last_activity_date": 1497961936, "creation_date": 1491948359, "question_id": 43356990, "link": "https://stackoverflow.com/questions/43356990/how-to-add-exception-rule-for-unicorn", "title": "How to add exception rule for unicorn?", "body": "<p>I'am use <code>unicorn</code> on server. I have a problem, when upload large csv file occurs timeout. Can add to <code>Unicorn</code> exception rule for url where the timeout will not work?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-5", "best-in-place"], "comments": [{"owner": {"reputation": 3320, "user_id": 4950680, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/C8cEh.jpg?s=128&g=1", "display_name": "Martin Zinovsky", "link": "https://stackoverflow.com/users/4950680/martin-zinovsky"}, "edited": false, "score": 0, "creation_date": 1491949239, "post_id": 43356773, "comment_id": 73777286, "body": "So you are saying that you clearly have a record in test db before calling action but when <code>correct_user</code> gets called there is nothing? You check it right?"}, {"owner": {"reputation": 95, "user_id": 7487254, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/6da5d6fae9985faa39c1ae77fa335e57?s=128&d=identicon&r=PG&f=1", "display_name": "ruby_rhod_on_rails", "link": "https://stackoverflow.com/users/7487254/ruby-rhod-on-rails"}, "reply_to_user": {"reputation": 3320, "user_id": 4950680, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/C8cEh.jpg?s=128&g=1", "display_name": "Martin Zinovsky", "link": "https://stackoverflow.com/users/4950680/martin-zinovsky"}, "edited": false, "score": 0, "creation_date": 1491950723, "post_id": 43356773, "comment_id": 73777731, "body": "yup, record is fine."}, {"owner": {"reputation": 3320, "user_id": 4950680, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/C8cEh.jpg?s=128&g=1", "display_name": "Martin Zinovsky", "link": "https://stackoverflow.com/users/4950680/martin-zinovsky"}, "edited": false, "score": 0, "creation_date": 1491950861, "post_id": 43356773, "comment_id": 73777762, "body": "Can you show us a test?"}, {"owner": {"reputation": 95, "user_id": 7487254, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/6da5d6fae9985faa39c1ae77fa335e57?s=128&d=identicon&r=PG&f=1", "display_name": "ruby_rhod_on_rails", "link": "https://stackoverflow.com/users/7487254/ruby-rhod-on-rails"}, "reply_to_user": {"reputation": 3320, "user_id": 4950680, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/C8cEh.jpg?s=128&g=1", "display_name": "Martin Zinovsky", "link": "https://stackoverflow.com/users/4950680/martin-zinovsky"}, "edited": false, "score": 0, "creation_date": 1491951715, "post_id": 43356773, "comment_id": 73777961, "body": "I updated the question with the test and fixtures used in the test. Let me know if I should post anything else."}, {"owner": {"reputation": 3320, "user_id": 4950680, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/C8cEh.jpg?s=128&g=1", "display_name": "Martin Zinovsky", "link": "https://stackoverflow.com/users/4950680/martin-zinovsky"}, "edited": false, "score": 0, "creation_date": 1491953083, "post_id": 43356773, "comment_id": 73778322, "body": "Have you tried to create offer record directly via ActiveRecord?  <code>@offer = Offer.create!(...)</code> Also you can put in before action call just to make sure"}], "owner": {"reputation": 95, "user_id": 7487254, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/6da5d6fae9985faa39c1ae77fa335e57?s=128&d=identicon&r=PG&f=1", "display_name": "ruby_rhod_on_rails", "link": "https://stackoverflow.com/users/7487254/ruby-rhod-on-rails"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 158, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1491951666, "creation_date": 1491947400, "last_edit_date": 1491951666, "question_id": 43356773, "link": "https://stackoverflow.com/questions/43356773/rails-5-test-errors-from-find-paramsid-in-before-filter", "title": "Rails 5 test errors from find params[:id] in before filter", "body": "<p>I'm writing an app in Rails 5 with the gem 'best-in-place' being used for the update action view. Even though the app works fine and updates the right parameters of the right offer, the test suite throws up this error:</p>\n\n<pre><code>ActiveRecord::RecordNotFound: Couldn't find Offer with 'id'=\napp/controllers/offers_controller.rb:71:in `correct_user'\n</code></pre>\n\n<p>Here is the offending code. It is a before filter for the update action:</p>\n\n<pre><code>70: def correct_user\n71:     @offer = Offer.find params[:id]\n72:     @user = @offer.user\n73:     redirect_to(root_url) unless current_user?(@user)\n    end\n</code></pre>\n\n<p>but the PUT clearly has the id paramater defined as id = '109':</p>\n\n<pre><code>Started PUT \"/offers/109\" for 127.0.0.1 at 2017-04-11 17:21:33 -0400\nProcessing by OffersController#update as JSON\nParameters: {\"offer\"=&gt;{\"category\"=&gt;\"d\"},     \"authenticity_token\"=&gt;\"9Y94wYzCrCvyygNk5GJXRe488JPd51YCSWQLe6Lpo3MgglfK1SrI1NcEj334T9HaAkAazlS212i4FZ+akDyelg==\", \"id\"=&gt;\"109\"}\n</code></pre>\n\n<p>This is the offer fixture I use in the test:</p>\n\n<pre><code>one:\n   category: MyText\n   plan_name: MyString\n   price: $109\n   rate: Month\n   plan_customer_satisfaction: 1\n   user_id: users(:michael).id\n</code></pre>\n\n<p>And the user fixture:</p>\n\n<pre><code>michael:\n  name: Michael Example\n  email: michael@example.com\n  username: mexample\n  password_digest: &lt;%= User.digest('password') %&gt;\n  admin: true\n  activated: true\n  activated_at: Time.zone.now\n</code></pre>\n\n<p>This is the test:</p>\n\n<pre><code>def setup\n   @user = users(:michael)\n   @offer = offers(:one)\nend\n\ntest \"should update when logged in\" do\n   log_in_as(@user)\n   patch offers_update_path(@offer), params: { offer: { category: 'Heating',\n                                           plan_name: 'Synergy',\n                                           price: '$120',\n                                           rate: 'Month' } }\n   assert_response :success\nend\n</code></pre>\n\n<p>If you need more information, please let me know. Any help is appreciated. Thanks.</p>\n"}, {"tags": ["ruby", "date", "time", "strptime"], "comments": [{"owner": {"reputation": 5134, "user_id": 1672197, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/i8HkV.png?s=128&g=1", "display_name": "orde", "link": "https://stackoverflow.com/users/1672197/orde"}, "edited": false, "score": 1, "creation_date": 1491947625, "post_id": 43356736, "comment_id": 73776746, "body": "Might take a look at <a href=\"https://ruby-doc.org/stdlib-2.4.0/libdoc/date/rdoc/Date.html#method-c-valid_date-3F\" rel=\"nofollow noreferrer\"><code>Date::valid_date?</code></a>."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "reply_to_user": {"reputation": 5134, "user_id": 1672197, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/i8HkV.png?s=128&g=1", "display_name": "orde", "link": "https://stackoverflow.com/users/1672197/orde"}, "edited": false, "score": 2, "creation_date": 1491950363, "post_id": 43356736, "comment_id": 73777632, "body": "The easiest way is to rescue the exception. An in-line rescue would be <code>require &#39;date&#39;; birth_date = Date.strptime(date, &#39;%m&#47;%d&#47;%Y&#39;) rescue nil</code>, which sets <code>birth_date</code> to <code>nil</code> if <code>date</code> does not represent a valid date. You could use <code>Date::valid_date?</code>, as @orde suggested, but to do so you need to parse out the year, month and day: <code>month, day, year = &quot;11&#47;35&#47;2000&quot;.scan(&#47;\\d+(?=\\&#47;|\\z)&#47;).map(&amp;:to_i) #=&gt; [4, 35, 2000]; Date.valid_date?(year, month, day) #=&gt; false</code>. (In the regex, <code>(?=\\&#47;|\\z)</code> is a positive lookahead. It may be sufficient for the regex to be simply <code>&#47;\\d+&#47;</code>.)"}, {"owner": {"reputation": 1440, "user_id": 4282529, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/dW8oZ.jpg?s=128&g=1", "display_name": "kdweber89", "link": "https://stackoverflow.com/users/4282529/kdweber89"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1492006469, "post_id": 43356736, "comment_id": 73806018, "body": "Hey Thanks @CarySwoveland very helpful and easy way to work around the issue."}], "answers": [{"comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1492013181, "post_id": 43370043, "comment_id": 73811407, "body": "I like how you use <code>ex</code>. Can we be confident that, in future, <code>&#39;invalid date&#39;</code> won&#39;t be changed to some other wording? More generally, do you know if Ruby guarantees that the string descriptions returned with argument classes will not change? I have always thought of the string as merely being helpful to coders, and have not seen it used in code, but using it as you have makes perfect sense."}, {"owner": {"reputation": 89146, "user_id": 211563, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d32a10a2f047dec1e5582e74cba6b3ec?s=128&d=identicon&r=PG", "display_name": "Andrew Marshall", "link": "https://stackoverflow.com/users/211563/andrew-marshall"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 1, "creation_date": 1492013260, "post_id": 43370043, "comment_id": 73811468, "body": "@CarySwoveland No, which is why one should write tests to assert it behaves as expected. If then a future Ruby version changes the message, the test will fail and the code may be adjusted as needed."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1492017773, "post_id": 43370043, "comment_id": 73814083, "body": "Good point, and even before testing, the <code>ArgumentError</code> exception will be raised, which also covers the possibility that the tests have missed this potential problem.  An alternative view is that an <code>ArgumentError</code> exception could only be raised when the string does not represent a valid date, in which case <code>rescue ArgumentError</code> would be sufficient, and one would not have to be concerned about <code>&quot;invalid date&#39;</code> changing.  Considering that this only involves a single, simple line of code, is that reasonable?"}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1492017931, "post_id": 43370043, "comment_id": 73814148, "body": "I&#39;ve wondered why <code>strptime</code> (and other date/time methods) doesn&#39;t just return <code>nil</code> when the string does not represent a valid date. Do you or anyone else know why the Ruby monks decided it should instead raise an exception?"}, {"owner": {"reputation": 89146, "user_id": 211563, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d32a10a2f047dec1e5582e74cba6b3ec?s=128&d=identicon&r=PG", "display_name": "Andrew Marshall", "link": "https://stackoverflow.com/users/211563/andrew-marshall"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1492055554, "post_id": 43370043, "comment_id": 73828250, "body": "@CarySwoveland No idea (though some would say exceptions are better than copious <code>nil</code>s everywhere)."}], "tags": [], "owner": {"reputation": 89146, "user_id": 211563, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d32a10a2f047dec1e5582e74cba6b3ec?s=128&d=identicon&r=PG", "display_name": "Andrew Marshall", "link": "https://stackoverflow.com/users/211563/andrew-marshall"}, "is_accepted": true, "score": 1, "last_activity_date": 1492001387, "creation_date": 1492001387, "answer_id": 43370043, "question_id": 43356736, "link": "https://stackoverflow.com/questions/43356736/argumenterror-invalid-strptime-format-m-d-y-work-around/43370043#43370043", "title": "ArgumentError: invalid strptime format - `%m/%d/%y&#39; work around", "body": "<p>If you want to use <code>strptime</code> your only option really is to rescue the error:</p>\n\n<pre><code>begin\n  birth_date = Date.strptime(date, '%m/%d/%Y')\nrescue ArgumentError =&gt; ex\n  raise ex unless ex.message == 'invalid date'\n  # handle invalid date\nend\n</code></pre>\n\n<p>You could set <code>date</code> to, e.g., <code>:invalid</code> there and then have <code>date == :invalid</code> in your conditional if you want to keep all the logic there instead of in the <code>rescue</code> itself.</p>\n"}], "owner": {"reputation": 1440, "user_id": 4282529, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/dW8oZ.jpg?s=128&g=1", "display_name": "kdweber89", "link": "https://stackoverflow.com/users/4282529/kdweber89"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3035, "favorite_count": 0, "accepted_answer_id": 43370043, "answer_count": 1, "score": 0, "last_activity_date": 1492001387, "creation_date": 1491947237, "last_edit_date": 1492000827, "question_id": 43356736, "link": "https://stackoverflow.com/questions/43356736/argumenterror-invalid-strptime-format-m-d-y-work-around", "title": "ArgumentError: invalid strptime format - `%m/%d/%y&#39; work around", "body": "<p>I am in the process of working with an sftp import bug in which I'm trying to flag any dates that are imported that are incorrect. There are two types of dates that could be off. The first is when the year is in the future, or way in the past; the second is when the actual months and days are too high. (Example, 13/20/1995, or 11/35/2000)</p>\n\n<p>I'm using <code>strptime</code> and for dates that are off, flagging them and displaying them as a specific message.  The problem I'm running into is that with the <code>strptime</code> format that I'm using, the errors happen right before I sub in the error message. </p>\n\n<pre><code>table_birth_dates = self.class.connection.execute(\"SELECT birth_date FROM #{temp_table_name}\").values.flatten\n\ntable_birth_dates.map! do |date|\n  birth_date = Date.strptime(date, '%m/%d/%Y')\n\n  if birth_date.nil?\n    month_day_error_message = 'Invalid Month/Day'\n  elsif birth_date &gt; Time.zone.today\n    future_error_message = 'Year in Future'\n  elsif birth_date.year &lt; 1900\n    past_error_message = 'Year too old'\n  else\n    birth_date\n  end\nend\n</code></pre>\n\n<p>The error is happening at the <code>birth_date = Date.strptime(date, '%m/%d/%Y')</code>\nFor a date such as  <code>10/3/1891,</code> it displays them as <code>Sat, 03 Oct 1891.</code>\nHowever, for the messed up dates such as <code>33/33/2000</code> it shows me an error (which makes sense) however I was hoping to fix this error in my conditional. </p>\n\n<p>Would anyone know what I could do?</p>\n"}, {"tags": ["ruby", "class", "oop", "global", "symbols"], "answers": [{"comments": [{"owner": {"reputation": 6391, "user_id": 2909897, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/LMSiW.jpg?s=128&g=1", "display_name": "mbigras", "link": "https://stackoverflow.com/users/2909897/mbigras"}, "edited": false, "score": 0, "creation_date": 1491947564, "post_id": 43356727, "comment_id": 73776721, "body": "So should the above be rewritten as <code>which means that class methods are _akin to_ global symbols</code>? I&#39;m still confused what makes a class vs instance method different from the perspective of symbols. It makes sense to me that a class name is in the global <i>namespace</i> and so it can&#39;t be reused, but I&#39;m not sure about how that relates to the concept of <i>symbols</i>"}, {"owner": {"reputation": 67463, "user_id": 203130, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/1RE8c.jpg?s=128&g=1", "display_name": "coreyward", "link": "https://stackoverflow.com/users/203130/coreyward"}, "reply_to_user": {"reputation": 6391, "user_id": 2909897, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/LMSiW.jpg?s=128&g=1", "display_name": "mbigras", "link": "https://stackoverflow.com/users/2909897/mbigras"}, "edited": false, "score": 0, "creation_date": 1492010546, "post_id": 43356727, "comment_id": 73809499, "body": "@mbigras It doesn&#39;t relate to the concept of symbols except that Ruby creates symbols for constants. See this question for more info: <a href=\"http://stackoverflow.com/questions/5358727/ruby-koan-constants-become-symbols\" title=\"ruby koan constants become symbols\">stackoverflow.com/questions/5358727/&hellip;</a>"}, {"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "reply_to_user": {"reputation": 6391, "user_id": 2909897, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/LMSiW.jpg?s=128&g=1", "display_name": "mbigras", "link": "https://stackoverflow.com/users/2909897/mbigras"}, "edited": false, "score": 0, "creation_date": 1492074624, "post_id": 43356727, "comment_id": 73837217, "body": "@mbigras: &quot;Symbol&quot; is a perfectly normal English word. Its usage in the article has nothing whatsoever to do with the <code>Symbol</code> class in Ruby."}], "tags": [], "owner": {"reputation": 67463, "user_id": 203130, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/1RE8c.jpg?s=128&g=1", "display_name": "coreyward", "link": "https://stackoverflow.com/users/203130/coreyward"}, "is_accepted": false, "score": 1, "last_activity_date": 1491947181, "creation_date": 1491947181, "answer_id": 43356727, "question_id": 43356638, "link": "https://stackoverflow.com/questions/43356638/class-versus-instance-methods-in-the-context-of-global-symbols/43356727#43356727", "title": "Class versus instance methods in the context of global symbols", "body": "<p>I think Dave was a little unclear in the way he phrased that, but he explains the impact in the paragraphs following your excerpt: </p>\n\n<blockquote>\n  <p>A great example of where a service-as-a-global-symbol is problematic is Resque. All Resque methods are available via Resque, which means that any Ruby VM has exactly one resque it can use.</p>\n  \n  <p>[\u2026]</p>\n  \n  <p>If, on the other hand, Resque was implemented as an object, instead of a global, any code that needed to access a different Resque instance would not have to change\u2014it would just be given a different object.</p>\n</blockquote>\n\n<p>The difference is in the interface: with Resque, users of the tool \u201cdepend on\u201d and interface with specific classes \u2014 they're objects, but they're objects relegated to treatment as globals. This is in opposition to interfacing with instance methods on an object, wherein any other object can be subbed in without the dependence on the class of the object. </p>\n\n<p>Thus using class-methods on a global (like an unscoped class definition) is, Dave argues, akin to using global methods, a la PHP.</p>\n"}, {"comments": [{"owner": {"reputation": 6391, "user_id": 2909897, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/LMSiW.jpg?s=128&g=1", "display_name": "mbigras", "link": "https://stackoverflow.com/users/2909897/mbigras"}, "edited": false, "score": 0, "creation_date": 1491951572, "post_id": 43357479, "comment_id": 73777927, "body": "Is the concept of &quot;static state&quot; related to the concept of &quot;stateless&quot;? Because you&#39;re saying he&#39;s arguing against &quot;static state&quot; but it seems like he&#39;s arguing for &quot;stateless&quot; objects; but &quot;static state&quot; seems like it&#39;s similar to &quot;stateless&quot;. Also, there is no mention of &quot;static state&quot; in the article (I think your point is it should be?) so I&#39;m confused by what you mean by &quot;static state&quot;."}, {"owner": {"reputation": 67463, "user_id": 203130, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/1RE8c.jpg?s=128&g=1", "display_name": "coreyward", "link": "https://stackoverflow.com/users/203130/coreyward"}, "reply_to_user": {"reputation": 6391, "user_id": 2909897, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/LMSiW.jpg?s=128&g=1", "display_name": "mbigras", "link": "https://stackoverflow.com/users/2909897/mbigras"}, "edited": false, "score": 0, "creation_date": 1492010801, "post_id": 43357479, "comment_id": 73809694, "body": "@mbigras What Ruby (and some others) refer to as a \u201cclass method\u201d is also known as a static method by other languages. Statelessness isn&#39;t related to J&#246;rg&#39;s answer as far as I can tell."}, {"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "reply_to_user": {"reputation": 6391, "user_id": 2909897, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/LMSiW.jpg?s=128&g=1", "display_name": "mbigras", "link": "https://stackoverflow.com/users/2909897/mbigras"}, "edited": false, "score": 0, "creation_date": 1492074757, "post_id": 43357479, "comment_id": 73837302, "body": "@mbigras: Stateless is more aggressive than just no static state. I mean, if you have no state at all, then you obviously also have no static state, but the OP is not arguing that you should have no state at all, he is only arguing that state should not be static. I guess an even more fitting characterization would be that state should not be <i>ambient</i>. The problem with static (or ambient) state is that there is only one of them, there is only one ambient environment, there is only one static name, therefore you cannot have multiple instances of <code>Resque</code> (in this example), and that is bad."}, {"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "reply_to_user": {"reputation": 6391, "user_id": 2909897, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/LMSiW.jpg?s=128&g=1", "display_name": "mbigras", "link": "https://stackoverflow.com/users/2909897/mbigras"}, "edited": false, "score": 0, "creation_date": 1492074909, "post_id": 43357479, "comment_id": 73837426, "body": "@mbigras: Gilad Bracha, the designer of the mentioned Newspeak programming language (and co-author of the Java Language Specification and Java Virtual Machine Specification) wrote a <a href=\"https://gbracha.blogspot.de/2008/02/cutting-out-static.html\" rel=\"nofollow noreferrer\">short blog post about static state</a>. Somewhere down in the comments, he says something interesting, namely that static state is so deeply ingrained in mainstream programming languages (and thus mainstream programmers) that they are simply unable to a) see anything wrong with it, and b) see how you could ever survive without it. But, languages like Self,"}, {"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1492075007, "post_id": 43357479, "comment_id": 73837500, "body": "\u2026 Newspeak, E, and Scala prove that it is possible, and specifically E and Newspeak show the advantages (in E, getting rid of static state also gets rid of ambient authority, and makes the language capability-safe, in Newspeak, getting rid of static state gives you a powerful module system for free)."}, {"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "reply_to_user": {"reputation": 67463, "user_id": 203130, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/1RE8c.jpg?s=128&g=1", "display_name": "coreyward", "link": "https://stackoverflow.com/users/203130/coreyward"}, "edited": false, "score": 0, "creation_date": 1492075216, "post_id": 43357479, "comment_id": 73837665, "body": "@coreyward: static methods and class methods are different. In particular, static methods are called &quot;static methods&quot; because they are dispatched statically, not dynamically. In Ruby, there is no such thing as a &quot;class method&quot;, all methods are dynamically dispatched instance methods. In languages which <i>do</i> have class methods, they are not necessarily static. What Ruby <i>does</i> have, though, are static <i>constants</i>, and <i>that&#39;s</i> what I believe the author is arguing against, except he doesn&#39;t express it in the blog post."}, {"owner": {"reputation": 67463, "user_id": 203130, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/1RE8c.jpg?s=128&g=1", "display_name": "coreyward", "link": "https://stackoverflow.com/users/203130/coreyward"}, "edited": false, "score": 0, "creation_date": 1492098539, "post_id": 43357479, "comment_id": 73854221, "body": "@J&#246;rgWMittag This is kind of missing the forest for the trees. OP had a \u201cdo these two things connect\u201d moment that doesn&#39;t really require a 350 word essay response."}], "tags": [], "owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "is_accepted": false, "score": 1, "last_activity_date": 1491951100, "creation_date": 1491951100, "answer_id": 43357479, "question_id": 43356638, "link": "https://stackoverflow.com/questions/43356638/class-versus-instance-methods-in-the-context-of-global-symbols/43357479#43357479", "title": "Class versus instance methods in the context of global symbols", "body": "<p>I see several problems with that article:</p>\n\n<p>First off, the use of the word \"<a href=\"https://wikipedia.org/wiki/Symbol\" rel=\"nofollow noreferrer\">symbol</a>\" may be confusing. While the word does, in fact, perfectly describe what the author means, some readers may confuse it with the <a href=\"http://ruby-doc.org/core/Symbol.html\" rel=\"nofollow noreferrer\"><code>Symbol</code></a> datatype in Ruby. So, while not <em>wrong</em>, the choice of words is unfortunate in the context of Ruby. \"Name\" might have been a better choice.</p>\n\n<p>Secondly, he makes an artificial distinction between class and instance methods, but <em>there is no such thing as a class method</em> in Ruby. Ruby only has exactly one kind of methods: instance methods. What we call \"singleton methods\" are actually just regular instance methods of the singleton class, and what we call \"class methods\" are actually just regular instance methods of the singleton class of an object that happens to be an instance of the <a href=\"http://ruby-doc.org/core/Class.html\" rel=\"nofollow noreferrer\"><code>Class</code></a> class.</p>\n\n<p>Thirdly, he makes an artificial distinction between classes and objects, but <em>classes are objects</em> in Ruby.</p>\n\n<p>It seems that we he is <em>really</em> arguing against, are constants (because they are global names), singletons (which classes usually are), and static state. And while it is certainly true that all of those are bad, he should say so, if that's what he means. (It's also not exactly a new discovery; entire programming languages have been designed based on the avoidance of static state, e.g. <a href=\"http://NewspeakLanguage.Org/\" rel=\"nofollow noreferrer\">Newspeak</a>.)</p>\n\n<p><strong>tl;dr summary</strong>: The article argues against global names, singletons, and static state, but is badly presented and phrased.</p>\n"}, {"tags": [], "owner": {"reputation": 174, "user_id": 4996615, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a9f2d1a33af3282a81eb8fbf4c1405d3?s=128&d=identicon&r=PG", "display_name": "lilole", "link": "https://stackoverflow.com/users/4996615/lilole"}, "is_accepted": false, "score": 1, "last_activity_date": 1491957687, "creation_date": 1491957687, "answer_id": 43358413, "question_id": 43356638, "link": "https://stackoverflow.com/questions/43356638/class-versus-instance-methods-in-the-context-of-global-symbols/43358413#43358413", "title": "Class versus instance methods in the context of global symbols", "body": "<h2>Question 1</h2>\n\n<p>The <code>:some_instance_method</code> and <code>:some_class_method</code> symbols merely exist in Ruby's symbol table. They are <em>not</em> different in the context of symbols. The <code>Symbol.all_symbols</code> result doesn't declare anything about the objects being referenced. If you had:</p>\n\n<pre><code>class Aaa\n  def kick_it\n    logger.debug { \"You kicked an Aaa object\" }\n  end\nend\nmodule Bbb\n  def self.kick_it\n    logger.debug { \"You kicked Bbb\" }\n  end\nend\n</code></pre>\n\n<p>You would see only 1 <code>:kick_it</code> reported by <code>Symbol.all_symbols</code>, even though one of them is a module-level method and the other is an instance method.</p>\n\n<h2>Question 2</h2>\n\n<p>The use of the word \"symbol\" in the article probably made it confusing. A \"global symbol\" here probably means a name for a member of the set <code>Object.constants</code>, or any other constant accessible in the defined constants subtree.</p>\n\n<p>So <code>Symbol.all_symbols</code> is not the same as \"global symbols\" in this case. However all names in the in-memory constants tree would be a subset of <code>Symbol.all_symbols</code>, keeping in mind that all scoping information is lost there.</p>\n\n<h2>Question 3</h2>\n\n<p>I think the <strong>Question 1</strong> answer above also explains why both symbols are shown in the <code>Symbol.all_symbols</code> result.</p>\n"}], "owner": {"reputation": 6391, "user_id": 2909897, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/LMSiW.jpg?s=128&g=1", "display_name": "mbigras", "link": "https://stackoverflow.com/users/2909897/mbigras"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 402, "favorite_count": 2, "answer_count": 3, "score": 1, "last_activity_date": 1491957687, "creation_date": 1491946775, "question_id": 43356638, "link": "https://stackoverflow.com/questions/43356638/class-versus-instance-methods-in-the-context-of-global-symbols", "title": "Class versus instance methods in the context of global symbols", "body": "<p>I was reading a blog post about <a href=\"http://multithreaded.stitchfix.com/blog/2015/06/02/anatomy-of-service-objects-in-rails/\" rel=\"nofollow noreferrer\">Service Objects</a> by <a href=\"https://github.com/davetron5000/\" rel=\"nofollow noreferrer\">Dave Copeland</a> and came across the following line:</p>\n\n<blockquote>\n  <p>A class in Ruby is a global symbol, which means that class methods are global symbols. Coding to globals is why we don\u2019t use PHP anymore.</p>\n</blockquote>\n\n<p>I'd like to understand this statement a little more and have some questions.</p>\n\n<ul>\n<li>How are class methods and instance methods different in the context of symbols?</li>\n</ul>\n\n<p>For example, take the following irb session:</p>\n\n<pre><code>irb(main):001:0&gt; Symbol.all_symbols.grep /Foo/\n=&gt; []\nirb(main):002:0&gt; Symbol.all_symbols.grep /some.*method/\n=&gt; []\nirb(main):003:0&gt; class Foo\nirb(main):004:1&gt; def some_instance_method; end\nirb(main):005:1&gt; def self.some_class_method; end\nirb(main):006:1&gt; end\n=&gt; :some_class_method\nirb(main):007:0&gt; Symbol.all_symbols.grep /Foo/\n=&gt; [:Foo]\nirb(main):008:0&gt; Symbol.all_symbols.grep /some.*method/\n=&gt; [:some_instance_method, :some_class_method]\n</code></pre>\n\n<ul>\n<li>How are <code>#some_instance_method</code> and <code>::some_class_method</code> different in the context of symbols?</li>\n<li>What am I doing when I check <code>Symbol.all_symbols</code> is this the same thing as viewing the \"global symbols\"?</li>\n<li><p>Why are both <code>#some_instance_method</code> and <code>::some_class_method</code> shown? After reading the above quote I would have expected the result of <code>008</code> to be:</p>\n\n<p>irb(main):008:0> Symbol.all_symbols.grep /some.*method/\n=> [:some_instance_method]</p></li>\n</ul>\n"}, {"tags": ["ruby-on-rails", "ruby", "devise", "acts-as-audited"], "comments": [{"owner": {"reputation": 1349, "user_id": 6163262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7f3655350c57cb94195d64808b7ba61?s=128&d=identicon&r=PG&f=1", "display_name": "whodini9", "link": "https://stackoverflow.com/users/6163262/whodini9"}, "edited": false, "score": 1, "creation_date": 1491944575, "post_id": 43356105, "comment_id": 73775474, "body": "Do you have <code>protect_from_forgery with: :exception</code> in application_controller?"}, {"owner": {"reputation": 483, "user_id": 5890031, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5abbf9af677404a4b6032a8f73ffdc89?s=128&d=identicon&r=PG&f=1", "display_name": "aldefouw", "link": "https://stackoverflow.com/users/5890031/aldefouw"}, "reply_to_user": {"reputation": 1349, "user_id": 6163262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7f3655350c57cb94195d64808b7ba61?s=128&d=identicon&r=PG&f=1", "display_name": "whodini9", "link": "https://stackoverflow.com/users/6163262/whodini9"}, "edited": false, "score": 2, "creation_date": 1491944789, "post_id": 43356105, "comment_id": 73775580, "body": "@whodini9 - Bingo.  That was the cause of the error.  I changed it to this:      <code>protect_from_forgery prepend: true</code>    And then things were happy.  Thanks for the help."}], "answers": [{"comments": [{"owner": {"reputation": 2034, "user_id": 1980165, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/0e1a38e5deca1c31b3bfa86d531864b2?s=128&d=identicon&r=PG", "display_name": "Steve", "link": "https://stackoverflow.com/users/1980165/steve"}, "edited": false, "score": 0, "creation_date": 1493995287, "post_id": 43356164, "comment_id": 74654567, "body": "Worked for me, strangely enough, if you were still logged in, the problem doesn&#39;t appear, so it seemed intermittent."}, {"owner": {"reputation": 483, "user_id": 5890031, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5abbf9af677404a4b6032a8f73ffdc89?s=128&d=identicon&r=PG&f=1", "display_name": "aldefouw", "link": "https://stackoverflow.com/users/5890031/aldefouw"}, "reply_to_user": {"reputation": 2034, "user_id": 1980165, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/0e1a38e5deca1c31b3bfa86d531864b2?s=128&d=identicon&r=PG", "display_name": "Steve", "link": "https://stackoverflow.com/users/1980165/steve"}, "edited": false, "score": 1, "creation_date": 1496162894, "post_id": 43356164, "comment_id": 75543635, "body": "@JohnLinux - I experienced the same thing.  I don&#39;t think it is intermittent though.  I think that Devise is sending you through a different call stack when you are logged in."}, {"owner": {"reputation": 789, "user_id": 5030271, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/94768f7cf8157dc056a26b95991e2b3d?s=128&d=identicon&r=PG&f=1", "display_name": "DNorthrup", "link": "https://stackoverflow.com/users/5030271/dnorthrup"}, "edited": false, "score": 2, "creation_date": 1500346371, "post_id": 43356164, "comment_id": 77282120, "body": "This was causing me a lot of confusion and frustration. Multiple other posts mention &#39;moving&#39; it, but non specific the prepend. Thanks."}, {"owner": {"reputation": 1816, "user_id": 155303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a3d82f3e8986b126bae4e4efb62b68ee?s=128&d=identicon&r=PG", "display_name": "jewilmeer", "link": "https://stackoverflow.com/users/155303/jewilmeer"}, "edited": false, "score": 0, "creation_date": 1537541766, "post_id": 43356164, "comment_id": 91835482, "body": "The proposed change is actually changing more. You probably want <code>protect_from_forgery with: :exception, prepend: true</code>, but you end up with <code>protect_from_forgery with: :null_session, prepend: true</code>  as :null_session is the default value of <code>with:</code>"}], "tags": [], "owner": {"reputation": 483, "user_id": 5890031, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5abbf9af677404a4b6032a8f73ffdc89?s=128&d=identicon&r=PG&f=1", "display_name": "aldefouw", "link": "https://stackoverflow.com/users/5890031/aldefouw"}, "is_accepted": true, "score": 30, "last_activity_date": 1532941531, "last_edit_date": 1532941531, "creation_date": 1491944636, "answer_id": 43356164, "question_id": 43356105, "link": "https://stackoverflow.com/questions/43356105/actioncontrollerinvalidauthenticitytoken-rails-5-devise-audited-papertra/43356164#43356164", "title": "ActionController::InvalidAuthenticityToken Rails 5 / Devise / Audited / PaperTrail gem", "body": "<p>As it turns out, <a href=\"https://github.com/plataformatec/devise#controller-filters-and-helpers\" rel=\"noreferrer\">Devise documentation</a> is quite revealing with regard to this error:</p>\n\n<blockquote>\n  <p>For <strong>Rails 5</strong>, note that protect_from_forgery is no longer prepended to\n  the <strong>before_action</strong> chain, so if you have set authenticate_user before\n  <strong>protect_from_forgery</strong>, your request will result in \"<strong>Can't verify CSRF\n  token authenticity.</strong>\" <strong>To resolve this, either change the order in which\n  you call them, or use protect_from_forgery prepend:   true</strong>.</p>\n</blockquote>\n\n<p>The fix was to change code in my application controller from this:</p>\n\n<pre><code> protect_from_forgery with: :exception\n</code></pre>\n\n<p>To this:</p>\n\n<pre><code> protect_from_forgery prepend: true\n</code></pre>\n\n<p>This issue did not manifest itself until I attempted adding Audited or Paper Trail gems.</p>\n"}, {"comments": [{"owner": {"reputation": 4031, "user_id": 7640269, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/szGUJ.png?s=128&g=1", "display_name": "danglingpointer", "link": "https://stackoverflow.com/users/7640269/danglingpointer"}, "edited": false, "score": 1, "creation_date": 1496086443, "post_id": 44249119, "comment_id": 75506998, "body": "This doesn&#39;t seems to be an answer to the OP question?"}, {"owner": {"reputation": 401, "user_id": 3210714, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6ef795cebd48be2e173eb22fc9c943a8?s=128&d=identicon&r=PG", "display_name": "msfreire", "link": "https://stackoverflow.com/users/3210714/msfreire"}, "reply_to_user": {"reputation": 4031, "user_id": 7640269, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/szGUJ.png?s=128&g=1", "display_name": "danglingpointer", "link": "https://stackoverflow.com/users/7640269/danglingpointer"}, "edited": false, "score": 1, "creation_date": 1496087233, "post_id": 44249119, "comment_id": 75507303, "body": "@LethalProgrammer, sorry I don&#39;t understand the OP question. My answer is to work without edit <i>protect_from_forgery</i>, because my project using a before_action callback to validate something before session create in devise. Sorry if is not clear in my answer."}, {"owner": {"reputation": 483, "user_id": 5890031, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5abbf9af677404a4b6032a8f73ffdc89?s=128&d=identicon&r=PG&f=1", "display_name": "aldefouw", "link": "https://stackoverflow.com/users/5890031/aldefouw"}, "edited": false, "score": 0, "creation_date": 1496162815, "post_id": 44249119, "comment_id": 75543596, "body": "@msfreire - are you suggesting that you can use    <code>protect_from_forgery with: :exception</code> in your application controller if you use the github branch that you posted?"}, {"owner": {"reputation": 401, "user_id": 3210714, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6ef795cebd48be2e173eb22fc9c943a8?s=128&d=identicon&r=PG", "display_name": "msfreire", "link": "https://stackoverflow.com/users/3210714/msfreire"}, "reply_to_user": {"reputation": 483, "user_id": 5890031, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5abbf9af677404a4b6032a8f73ffdc89?s=128&d=identicon&r=PG&f=1", "display_name": "aldefouw", "link": "https://stackoverflow.com/users/5890031/aldefouw"}, "edited": false, "score": 1, "creation_date": 1496193350, "post_id": 44249119, "comment_id": 75555934, "body": "@aldefouw Yes. I dont need to change to <code>protect_from_forgery prepend: true</code> if you put the branch in gem file. I`m using rails 5.0.1, try that if you using rails 5+"}], "tags": [], "owner": {"reputation": 401, "user_id": 3210714, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6ef795cebd48be2e173eb22fc9c943a8?s=128&d=identicon&r=PG", "display_name": "msfreire", "link": "https://stackoverflow.com/users/3210714/msfreire"}, "is_accepted": false, "score": 0, "last_activity_date": 1496085071, "creation_date": 1496085071, "answer_id": 44249119, "question_id": 43356105, "link": "https://stackoverflow.com/questions/43356105/actioncontrollerinvalidauthenticitytoken-rails-5-devise-audited-papertra/44249119#44249119", "title": "ActionController::InvalidAuthenticityToken Rails 5 / Devise / Audited / PaperTrail gem", "body": "<p>In my project we have that problem and we can't to override <i>protect_from_forgery</i>. \nThe solution founded is indicate the github of audited and worked for me.</p>\n\n<p>Put this in gemfile:</p>\n\n<pre><code>gem \"audited\", github: \"collectiveidea/audited\"\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1014, "user_id": 8623417, "user_type": "registered", "accept_rate": 17, "profile_image": "https://i.stack.imgur.com/uXnCJ.jpg?s=128&g=1", "display_name": "Yashu Mittal", "link": "https://stackoverflow.com/users/8623417/yashu-mittal"}, "is_accepted": false, "score": 0, "last_activity_date": 1546038650, "last_edit_date": 1546038650, "creation_date": 1505676550, "answer_id": 46268057, "question_id": 43356105, "link": "https://stackoverflow.com/questions/43356105/actioncontrollerinvalidauthenticitytoken-rails-5-devise-audited-papertra/46268057#46268057", "title": "ActionController::InvalidAuthenticityToken Rails 5 / Devise / Audited / PaperTrail gem", "body": "<p>As mentioned in the <a href=\"https://github.com/plataformatec/devise#controller-filters-and-helpers\" rel=\"nofollow noreferrer\"> documentation</a>.</p>\n\n<blockquote>\n  <p>For Rails 5, note that <code>protect_from_forgery</code> is no longer prepended\n  to the before_action chain, so if you have set authenticate_user\n  before protect_from_forgery, your request will result in \"Can't verify\n  CSRF token authenticity.\" To resolve this, either change the order in\n  which you call them, or use protect_from_forgery prepend: true.</p>\n</blockquote>\n\n<p>I have used something like this and it works for me.</p>\n\n<pre><code>class WelcomeController &lt; ::Base\n    protect_from_forgery with: :exception\n    before_action :authenticate_model!\nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 146, "user_id": 7132678, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/242a3d87151d5fb29155bc900c604c9e?s=128&d=identicon&r=PG&f=1", "display_name": "jethro", "link": "https://stackoverflow.com/users/7132678/jethro"}, "is_accepted": false, "score": 0, "last_activity_date": 1564437339, "creation_date": 1564437339, "answer_id": 57261864, "question_id": 43356105, "link": "https://stackoverflow.com/questions/43356105/actioncontrollerinvalidauthenticitytoken-rails-5-devise-audited-papertra/57261864#57261864", "title": "ActionController::InvalidAuthenticityToken Rails 5 / Devise / Audited / PaperTrail gem", "body": "<p>The solution for me was to manually go to my browser's settings and delete the cache.</p>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 3260541, "user_type": "registered", "profile_image": "https://graph.facebook.com/100001033006184/picture?type=large", "display_name": "user3260541", "link": "https://stackoverflow.com/users/3260541/user3260541"}, "is_accepted": false, "score": 0, "last_activity_date": 1589529940, "creation_date": 1589529940, "answer_id": 61814596, "question_id": 43356105, "link": "https://stackoverflow.com/questions/43356105/actioncontrollerinvalidauthenticitytoken-rails-5-devise-audited-papertra/61814596#61814596", "title": "ActionController::InvalidAuthenticityToken Rails 5 / Devise / Audited / PaperTrail gem", "body": "<p>This happened to me on my development machine. Turns out I was setting </p>\n\n<blockquote>\n  <p>Rails.application.config.session_store</p>\n</blockquote>\n\n<p>for security purpose in production. And somehow in this code gets run on development mode. And I have to comment out this line and it works fine now.</p>\n\n<pre><code>Rails.application.config.session_store :cookie_store, key: '_my_session', secure: true, same_site: :strict\n</code></pre>\n"}], "owner": {"reputation": 483, "user_id": 5890031, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5abbf9af677404a4b6032a8f73ffdc89?s=128&d=identicon&r=PG&f=1", "display_name": "aldefouw", "link": "https://stackoverflow.com/users/5890031/aldefouw"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 10230, "favorite_count": 3, "accepted_answer_id": 43356164, "answer_count": 5, "score": 11, "last_activity_date": 1589529940, "creation_date": 1491944409, "question_id": 43356105, "link": "https://stackoverflow.com/questions/43356105/actioncontrollerinvalidauthenticitytoken-rails-5-devise-audited-papertra", "title": "ActionController::InvalidAuthenticityToken Rails 5 / Devise / Audited / PaperTrail gem", "body": "<p><strong>Background Details</strong></p>\n\n<p>I am using <strong>Devise</strong> for authentication to login to a <strong>Rails 5</strong> application.  </p>\n\n<p>Whenever I bundle either the <strong>Audited</strong> or <strong>Paper Trail</strong> gem, when I attempt to #create a new session (via the sign in form - /users/sign_in), I receive the following error:</p>\n\n<pre><code>ActionController::InvalidAuthenticityToken\n</code></pre>\n\n<p><strong>Environment Details</strong></p>\n\n<p><strong>Ruby 2.3.1</strong></p>\n\n<p><strong>Gems:</strong></p>\n\n<ul>\n<li><strong>rails</strong> 5.0.2</li>\n<li><strong>devise</strong> => 4.2.1</li>\n<li><strong>paper_trail</strong> => 7.0.1</li>\n</ul>\n\n<p><strong>Steps to Reproduce:</strong></p>\n\n<ol>\n<li>Create Rails 5 application</li>\n<li>Add Devise gem</li>\n<li>Add Audited or Paper Trail gem</li>\n<li>Attempt to login</li>\n</ol>\n"}, {"tags": ["ruby-on-rails", "ruby"], "answers": [{"comments": [{"owner": {"reputation": 75, "user_id": 7113430, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh4.googleusercontent.com/-2XN_Xu88CjQ/AAAAAAAAAAI/AAAAAAAAABI/KwN4y2M-oY0/photo.jpg?sz=128", "display_name": "Alien Java", "link": "https://stackoverflow.com/users/7113430/alien-java"}, "edited": false, "score": 0, "creation_date": 1491945123, "post_id": 43356117, "comment_id": 73775730, "body": "didnt work brother :( my code:  &lt;%- if devise_mapping.omniauthable? %&gt;        &lt;%- resource_class.omniauth_providers.each do |provider| %&gt;           &lt;% provider = &quot;Google&quot; if provider == &quot;GoogleOauth2&quot; %&gt;                     &lt;%= link_to &quot;#{OmniAuth::Utils.camelize(provider)},&quot;, omniauth_authorize_path(resource_name, provider), class: &quot;#{provider} bold&quot; %&gt;          &lt;% end -%&gt;     &lt;% end -%&gt;"}, {"owner": {"reputation": 2116, "user_id": 6780663, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9207ba3b9163582570078b687f9b2792?s=128&d=identicon&r=PG&f=1", "display_name": "Alejandro Montilla", "link": "https://stackoverflow.com/users/6780663/alejandro-montilla"}, "reply_to_user": {"reputation": 75, "user_id": 7113430, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh4.googleusercontent.com/-2XN_Xu88CjQ/AAAAAAAAAAI/AAAAAAAAABI/KwN4y2M-oY0/photo.jpg?sz=128", "display_name": "Alien Java", "link": "https://stackoverflow.com/users/7113430/alien-java"}, "edited": false, "score": 0, "creation_date": 1491945225, "post_id": 43356117, "comment_id": 73775783, "body": "Update the question with that code (Is hard read code in a comment)."}, {"owner": {"reputation": 2116, "user_id": 6780663, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9207ba3b9163582570078b687f9b2792?s=128&d=identicon&r=PG&f=1", "display_name": "Alejandro Montilla", "link": "https://stackoverflow.com/users/6780663/alejandro-montilla"}, "reply_to_user": {"reputation": 75, "user_id": 7113430, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh4.googleusercontent.com/-2XN_Xu88CjQ/AAAAAAAAAAI/AAAAAAAAABI/KwN4y2M-oY0/photo.jpg?sz=128", "display_name": "Alien Java", "link": "https://stackoverflow.com/users/7113430/alien-java"}, "edited": false, "score": 0, "creation_date": 1491945828, "post_id": 43356117, "comment_id": 73776039, "body": "Are you sure you have a <code>provider == GoogleOauth2</code>? no, wait I think I go it. you need another variable."}, {"owner": {"reputation": 75, "user_id": 7113430, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh4.googleusercontent.com/-2XN_Xu88CjQ/AAAAAAAAAAI/AAAAAAAAABI/KwN4y2M-oY0/photo.jpg?sz=128", "display_name": "Alien Java", "link": "https://stackoverflow.com/users/7113430/alien-java"}, "edited": false, "score": 0, "creation_date": 1491955348, "post_id": 43356117, "comment_id": 73778897, "body": "Sr im a little noob in stackover can you tell me how?"}, {"owner": {"reputation": 2116, "user_id": 6780663, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9207ba3b9163582570078b687f9b2792?s=128&d=identicon&r=PG&f=1", "display_name": "Alejandro Montilla", "link": "https://stackoverflow.com/users/6780663/alejandro-montilla"}, "reply_to_user": {"reputation": 75, "user_id": 7113430, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh4.googleusercontent.com/-2XN_Xu88CjQ/AAAAAAAAAAI/AAAAAAAAABI/KwN4y2M-oY0/photo.jpg?sz=128", "display_name": "Alien Java", "link": "https://stackoverflow.com/users/7113430/alien-java"}, "edited": false, "score": 0, "creation_date": 1491955703, "post_id": 43356117, "comment_id": 73778975, "body": "Sure @AlienJava, check this link: <a href=\"https://meta.stackexchange.com/a/5235\">meta.stackexchange.com/a/5235</a>"}, {"owner": {"reputation": 75, "user_id": 7113430, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh4.googleusercontent.com/-2XN_Xu88CjQ/AAAAAAAAAAI/AAAAAAAAABI/KwN4y2M-oY0/photo.jpg?sz=128", "display_name": "Alien Java", "link": "https://stackoverflow.com/users/7113430/alien-java"}, "edited": false, "score": 0, "creation_date": 1491958318, "post_id": 43356117, "comment_id": 73779584, "body": "thanks a lot Sr. i already do it. can you help me with this issue? <a href=\"http://stackoverflow.com/questions/43358469/how-to-show-a-link-to-helper-only-if-it-returns-0\" title=\"how to show a link to helper only if it returns 0\">stackoverflow.com/questions/43358469/&hellip;</a> THANKS A LOT"}, {"owner": {"reputation": 123, "user_id": 614091, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/faab22cf0c6261bf1ca222accb4d5ac9?s=128&d=identicon&r=PG", "display_name": "Gaurav Ragtah", "link": "https://stackoverflow.com/users/614091/gaurav-ragtah"}, "edited": false, "score": 0, "creation_date": 1574119250, "post_id": 43356117, "comment_id": 104110261, "body": "This is what actually worked for me <code>&lt;%= pretty_provider = provider == :google_oauth2 ? :Google : provider %&gt; &lt;%= link_to &quot;#{OmniAuth::Utils.camelize(pretty_provider)},&quot;, omniauth_authorize_path(resource_name, provider), class: &quot;#{pretty_provider} bold&quot; %&gt;   </code>"}], "tags": [], "owner": {"reputation": 2116, "user_id": 6780663, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9207ba3b9163582570078b687f9b2792?s=128&d=identicon&r=PG&f=1", "display_name": "Alejandro Montilla", "link": "https://stackoverflow.com/users/6780663/alejandro-montilla"}, "is_accepted": true, "score": 1, "last_activity_date": 1491955723, "last_edit_date": 1491955723, "creation_date": 1491944452, "answer_id": 43356117, "question_id": 43355919, "link": "https://stackoverflow.com/questions/43355919/how-to-change-the-providers-name/43356117#43356117", "title": "how to change the provider&#39;s name", "body": "<pre><code>&lt;% provider = \"Google\" if provider == \"GoogleOauth2\" %&gt;\n</code></pre>\n\n<p>This will only modify the value of <code>provider</code> if it is <code>GoogleOauth2</code></p>\n\n<p><strong>Edit:</strong></p>\n\n<p>Based on comments, what you need is another variable to <strong><em>\"prettyfy\"</em></strong> the text shown, but keep the original value to the the <code>link_to</code> helper, so this is what I would do:</p>\n\n<pre><code>&lt;%= pretty_provider = provider == 'GoogleOauth2' ? \"Google\": provider %&gt; \n&lt;%= link_to \"#{OmniAuth::Utils.camelize(pretty_provider)},\", omniauth_authorize_path(resource_name, provider), class: \"#{pretty_provider} bold\" %&gt;  \n</code></pre>\n"}], "owner": {"reputation": 75, "user_id": 7113430, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh4.googleusercontent.com/-2XN_Xu88CjQ/AAAAAAAAAAI/AAAAAAAAABI/KwN4y2M-oY0/photo.jpg?sz=128", "display_name": "Alien Java", "link": "https://stackoverflow.com/users/7113430/alien-java"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 214, "favorite_count": 0, "accepted_answer_id": 43356117, "answer_count": 1, "score": 0, "last_activity_date": 1491955723, "creation_date": 1491943609, "last_edit_date": 1491946006, "question_id": 43355919, "link": "https://stackoverflow.com/questions/43355919/how-to-change-the-providers-name", "title": "how to change the provider&#39;s name", "body": "<p>Well i have a website with Omniauth im using devise gem and all works fine but in the Sign_in view i show the providers </p>\n\n<pre><code>&lt;%- if devise_mapping.omniauthable? %&gt;\n       &lt;%- resource_class.omniauth_providers.each do |provider| %&gt;          \n          &lt;%= link_to \"#{OmniAuth::Utils.camelize(provider)},\", omniauth_authorize_path(resource_name, provider), class: \"#{provider} bold\" %&gt;  \n       &lt;% end -%&gt;\n    &lt;% end -%&gt;\n</code></pre>\n\n<p>The problem is because the view Shows: </p>\n\n<blockquote>\n  <p>Facebook,Twitter,GoogleOauth2</p>\n</blockquote>\n\n<p>GoogleOauth2 looks very awful, so how can i change the name GoogleOauth2 to \"Google\" i tried with this but didnt work</p>\n\n<pre><code>&lt;%- if devise_mapping.omniauthable? %&gt;\n   &lt;%- resource_class.omniauth_providers.each do |provider| %&gt;\n      &lt;% provider = \"Google\" if provider == \"GoogleOauth2\" %&gt;          \n      &lt;%= link_to \"#{OmniAuth::Utils.camelize(provider)},\", omniauth_authorize_path(resource_name, provider), class: \"#{provider} bold\" %&gt;  \n   &lt;% end -%&gt;\n&lt;% end -%&gt;\n</code></pre>\n\n<p>providers:</p>\n\n<blockquote>\n  <p>devise :omniauthable, omniauth_providers: [:facebook,:twitter,:google_oauth2]</p>\n</blockquote>\n\n<p>i also tried with this \"google_oauth2\":</p>\n\n<pre><code>&lt;%- if devise_mapping.omniauthable? %&gt;\n       &lt;%- resource_class.omniauth_providers.each do |provider| %&gt;\n          &lt;% provider = \"Google\" if provider == \"google_oauth2\" %&gt;          \n          &lt;%= link_to \"#{OmniAuth::Utils.camelize(provider)},\", omniauth_authorize_path(resource_name, provider), class: \"#{provider} bold\" %&gt;  \n       &lt;% end -%&gt;\n    &lt;% end -%&gt;\n</code></pre>\n"}, {"tags": ["ruby", "mailgun"], "answers": [{"tags": [], "owner": {"reputation": 73209, "user_id": 290394, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d7908f05c89e965f6bc5308ad6f41256?s=128&d=identicon&r=PG", "display_name": "steenslag", "link": "https://stackoverflow.com/users/290394/steenslag"}, "is_accepted": true, "score": 2, "last_activity_date": 1491944449, "creation_date": 1491944449, "answer_id": 43356115, "question_id": 43355652, "link": "https://stackoverflow.com/questions/43355652/unable-to-send-multiline-plaintext-email-with-mailgun-using-ruby/43356115#43356115", "title": "Unable To Send Multiline Plaintext Email With Mailgun using Ruby", "body": "<p>If you run the code with <code>ruby -w</code>, that is: with warnings enabled, it warns:  <code>warning: possibly useless use of + in void context</code>, with the according line number, pointing to: </p>\n\n<pre><code>$message = \"Line One Text.\"\n+ \"\\n\" + \"\\n\" + \"And Line Two Text!\" \n</code></pre>\n\n<p>Which is a polite way of Ruby saying: \"well, it's not a syntax error, but it does not make sense to me.\"\nTry it with</p>\n\n<pre><code>$message = \"Line One Text.\n\nAnd Line Two Text!\" # or: \"Line One Text.\\n\\nAnd Line Two Text!\" \n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1157, "user_id": 2653567, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/RNYoa.png?s=128&g=1", "display_name": "HMLDude", "link": "https://stackoverflow.com/users/2653567/hmldude"}, "is_accepted": false, "score": 0, "last_activity_date": 1491947361, "creation_date": 1491947361, "answer_id": 43356766, "question_id": 43355652, "link": "https://stackoverflow.com/questions/43355652/unable-to-send-multiline-plaintext-email-with-mailgun-using-ruby/43356766#43356766", "title": "Unable To Send Multiline Plaintext Email With Mailgun using Ruby", "body": "<p>So I got it working by putting everything on a single line.</p>\n\n<pre><code>$message = \"Line One Text!\" + \"\\n\" + \"\\n\" + \"Line Two Text!\"\n</code></pre>\n"}], "owner": {"reputation": 1157, "user_id": 2653567, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/RNYoa.png?s=128&g=1", "display_name": "HMLDude", "link": "https://stackoverflow.com/users/2653567/hmldude"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 253, "favorite_count": 0, "accepted_answer_id": 43356115, "answer_count": 2, "score": 0, "last_activity_date": 1491947361, "creation_date": 1491942559, "question_id": 43355652, "link": "https://stackoverflow.com/questions/43355652/unable-to-send-multiline-plaintext-email-with-mailgun-using-ruby", "title": "Unable To Send Multiline Plaintext Email With Mailgun using Ruby", "body": "<p>I am using two files to send messages with Mailgun. They are:</p>\n\n<pre><code>email_sender.rb\nmessage_text.rb\n</code></pre>\n\n<p>The code for the first one is:</p>\n\n<pre><code>require './message_text.rb'\n\nfromLabel = \"Email Guy\"\nfromAddress = \"digital@mail.*****.com\"\ntoAddress = \"info@*****.net\"\nsubject = \"An Invitation\"\n\ncmd = \"curl -s --user 'api:key-*****' https://api.mailgun.net/v3/mail.*****.com/messages -F from='\" + fromLabel + \" &lt;\" + fromAddress + \"&gt;' -F to='\" +toAddress + \"' -F subject='\" + subject + \"' -F text='\" + $message + \"'\"\n\nwasGood = system (cmd)\n</code></pre>\n\n<p>The code for the second file is:</p>\n\n<pre><code>$message = \"Line One Text.\"\n+ \"\\n\" + \"\\n\" + \"And Line Two Text!\"\n</code></pre>\n\n<p>When I test sending an email, the message that arrives in my test account inbox is as follows.</p>\n\n<pre><code>Line One Text.\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1494389140, "post_id": 43355582, "comment_id": 74801298, "body": "<code>init</code>? Or do you mean <code>initialize</code>?"}, {"owner": {"reputation": 6076, "user_id": 4044009, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/42e57031eb7d02c47c9afaecfc878638?s=128&d=identicon&r=PG&f=1", "display_name": "Neil", "link": "https://stackoverflow.com/users/4044009/neil"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1494389251, "post_id": 43355582, "comment_id": 74801329, "body": "@tadman no I literally ment the the method <code>init</code>.  I answered my own question below, so you can see what the class would look like."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1494389326, "post_id": 43355582, "comment_id": 74801347, "body": "Having <code>init</code> and <code>initialize</code> is asking for confusion, especially as in other languages <code>init</code> is what the initializer method is called."}], "answers": [{"comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 1, "creation_date": 1494389401, "post_id": 43355975, "comment_id": 74801371, "body": "It&#39;s pretty dirty to self-post an answer and not even acknowledge what Sergio did with a simple upvote. He&#39;s also right, a presenter is what you&#39;re talking about. What you&#39;re doing here is highly irregular and not recommended."}, {"owner": {"reputation": 6076, "user_id": 4044009, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/42e57031eb7d02c47c9afaecfc878638?s=128&d=identicon&r=PG&f=1", "display_name": "Neil", "link": "https://stackoverflow.com/users/4044009/neil"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1494389504, "post_id": 43355975, "comment_id": 74801404, "body": "his method has the limitation of not knowing the domain.  Espcially if using passenger, the url will be wrong. Also: prior to updating my answer: I did post a comment to him and he did not respond back. &quot;Dirty&quot; is putting it pretty strong."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1494389571, "post_id": 43355975, "comment_id": 74801424, "body": "I think you&#39;re misunderstanding his code. There&#39;s a reason this sort of stuff doesn&#39;t leak out. If you want that sort of functionality, define helpers. This is exactly what they&#39;re for."}], "tags": [], "owner": {"reputation": 6076, "user_id": 4044009, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/42e57031eb7d02c47c9afaecfc878638?s=128&d=identicon&r=PG&f=1", "display_name": "Neil", "link": "https://stackoverflow.com/users/4044009/neil"}, "is_accepted": false, "score": 0, "last_activity_date": 1494389466, "last_edit_date": 1494389466, "creation_date": 1491943851, "answer_id": 43355975, "question_id": 43355582, "link": "https://stackoverflow.com/questions/43355582/rails-make-route-helper-methods-available-to-poro/43355975#43355975", "title": "Rails: Make Route Helper Methods Available to PORO", "body": "<p>The issue is that actionview-related methods are not available to POROs.  </p>\n\n<p>In order to get all the great stuff from actionview: you need to utilize the <code>view_context</code> keyword.  Then: you can simply call upon actionview-related methods from your <code>view_context</code>: </p>\n\n<pre><code>class BuildLink\n  attr_accessor :blog, :view_context\n\n  def initialize(blog, view_context)\n    @blog = blog\n    @view_context = view_context\n  end\n\n  def some_method\n    content_tag(:li, link_to(\u201cShow Blog\u201c, view_context.blog_path(blog)))\n  end\nend\n</code></pre>\n\n<p>So for example: from your controller you would call upon this PORO like so:</p>\n\n<pre><code>BuildLink.new(@blog, view_context).some_method\n</code></pre>\n\n<p>For more information, see below references:</p>\n\n<ul>\n<li><a href=\"http://api.rubyonrails.org/classes/ActionView/Rendering.html#method-i-view_context\" rel=\"nofollow noreferrer\">Rails doc on view_context</a></li>\n<li>Utilization of <code>view_context</code> via presenter pattern, shown in <a href=\"http://nithinbekal.com/posts/rails-presenters/\" rel=\"nofollow noreferrer\">this article</a></li>\n<li><a href=\"https://www.youtube.com/watch?v=QHsq6aFlP0U\" rel=\"nofollow noreferrer\">Railscast</a> which talks through utilizing <code>view_context</code> via presenter pattern</li>\n</ul>\n"}, {"comments": [{"owner": {"reputation": 6076, "user_id": 4044009, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/42e57031eb7d02c47c9afaecfc878638?s=128&d=identicon&r=PG&f=1", "display_name": "Neil", "link": "https://stackoverflow.com/users/4044009/neil"}, "edited": false, "score": 0, "creation_date": 1492835447, "post_id": 43356167, "comment_id": 74162347, "body": "see my updated answer.  Let me know if you know of how to do this becuase it appears as though it just isn&#39;t possible inside a PORO object."}, {"owner": {"reputation": 6076, "user_id": 4044009, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/42e57031eb7d02c47c9afaecfc878638?s=128&d=identicon&r=PG&f=1", "display_name": "Neil", "link": "https://stackoverflow.com/users/4044009/neil"}, "edited": false, "score": 0, "creation_date": 1494390217, "post_id": 43356167, "comment_id": 74801599, "body": "I updated my answer yet again. See above.  Also, I believe your answer will not &quot;always&quot; build the paths right via <code>Rails.application.routes.url_helpers</code>.  I ran into issues while using passenger, as it didn&#39;t know the domain."}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "reply_to_user": {"reputation": 6076, "user_id": 4044009, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/42e57031eb7d02c47c9afaecfc878638?s=128&d=identicon&r=PG&f=1", "display_name": "Neil", "link": "https://stackoverflow.com/users/4044009/neil"}, "edited": false, "score": 0, "creation_date": 1494399789, "post_id": 43356167, "comment_id": 74805384, "body": "Yeah, in these situations, you should specify the host explicitly. Or set it <a href=\"http://stackoverflow.com/a/5725343/125816\">like this</a>."}], "tags": [], "owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "is_accepted": true, "score": 5, "last_activity_date": 1494408220, "last_edit_date": 1495535474, "creation_date": 1491944640, "answer_id": 43356167, "question_id": 43355582, "link": "https://stackoverflow.com/questions/43355582/rails-make-route-helper-methods-available-to-poro/43356167#43356167", "title": "Rails: Make Route Helper Methods Available to PORO", "body": "<p>You either have to do what you describe in your self-answer (link to <a href=\"https://stackoverflow.com/revisions/8f0d8cfe-17e8-4443-b2fb-b7fc1fec90c3/view-source\">revision I refer to</a>), or inject some context into your POROs. Where context is something which knows all those methods. Something like this:</p>\n\n<pre><code>class ProjectsController\n  def update\n    project = Project.find(params[:id])\n    presenter = Presenters::Project.new(project, context: view_context) # your PORO\n    # do something with presenter\n  end\nend\n</code></pre>\n\n<p>And your PORO would look like this:</p>\n\n<pre><code>module Presenters\n  class Project\n    attr_reader :presentable, :context\n    def initialize(presentable, context:)\n      @presentable = presentable\n      @context = context\n    end\n\n    def special_link\n      context.somewhere_path(presentable)\n    end\n  end\nend\n</code></pre>\n\n<p>Me, I like neither of them. But sometimes we have to choose a lesser evil. </p>\n\n<blockquote>\n  <p>If anyone happens to know of a current way to get access to all of these methods with one include statement then let me know.</p>\n</blockquote>\n\n<p>Why, yes. There is a way.</p>\n\n<pre><code>module MyViewCompatibilityPack\n  include ActionView::Helpers::TagHelper\n  include ActionView::Helpers::UrlHelper\n\n  def url_helpers\n    Rails.application.routes.url_helpers\n  end\nend\n\nclass MyPoro\n  include MyViewCompatibilityPack\n\n  ...\nend\n</code></pre>\n"}], "owner": {"reputation": 6076, "user_id": 4044009, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/42e57031eb7d02c47c9afaecfc878638?s=128&d=identicon&r=PG&f=1", "display_name": "Neil", "link": "https://stackoverflow.com/users/4044009/neil"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1637, "favorite_count": 0, "accepted_answer_id": 43356167, "answer_count": 2, "score": 1, "last_activity_date": 1494408220, "creation_date": 1491942317, "last_edit_date": 1494389407, "question_id": 43355582, "link": "https://stackoverflow.com/questions/43355582/rails-make-route-helper-methods-available-to-poro", "title": "Rails: Make Route Helper Methods Available to PORO", "body": "<p>Within a Plain Old Ruby Object (PORO) in my rails app: I have the following method:</p>\n\n<pre><code>def some_method\n  content_tag(:li, link_to(\"Do something\", somewhere_path(object.id)))\nend\n</code></pre>\n\n<p>First: the object didn't understand the method <code>content_tag</code>, so I added the following which made the object understand that method:</p>\n\n<pre><code>include ActionView::Helpers::TagHelper\n</code></pre>\n\n<p>Then the object didn't understand <code>link_to</code> so I added the following which made the object understand that method:</p>\n\n<pre><code>include ActionView::Helpers::UrlHelper\n</code></pre>\n\n<p>Now, it doesn't understand my route: <code>somewhere_path(object.id)</code>.  </p>\n\n<p><strong>Question:</strong> How can I make the PORO in my rails app understand the helpers which generate routes?</p>\n\n<p><strong>Followup Question</strong>: Is there an easier way to include all of this functionality into my PORO object?  Perhaps there is a way to only <code>include</code> one major module and get all of this functionality (as opposed to perhaps needing to require 3 different modules).</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "google-contacts-api"], "answers": [{"comments": [{"owner": {"reputation": 1331, "user_id": 4189633, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/VG5Vp.jpg?s=128&g=1", "display_name": "Vishal G", "link": "https://stackoverflow.com/users/4189633/vishal-g"}, "edited": false, "score": 0, "creation_date": 1491943918, "post_id": 43355706, "comment_id": 73775119, "body": "@liole If user have 4000 contacts and I have to process on my side then it will take time, I am looking for google&#39;s support to solve this purpose"}, {"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 1, "creation_date": 1491944501, "post_id": 43355706, "comment_id": 73775430, "body": "<code>sort_by!(&amp;:name)</code> would be more idiomatic for ascending sort"}, {"owner": {"reputation": 1331, "user_id": 4189633, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/VG5Vp.jpg?s=128&g=1", "display_name": "Vishal G", "link": "https://stackoverflow.com/users/4189633/vishal-g"}, "edited": false, "score": 0, "creation_date": 1491945501, "post_id": 43355706, "comment_id": 73775888, "body": "I have already achieved this on ROR side using sort_by, But I am looking for better approach........Right now I am getting thousands&#39; of contacts and sorting it on my end and displaying .....Now I want to have pagination But every time I have to fetch these thousands of  records again and again  Then send paginated records only"}, {"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1491956337, "post_id": 43355706, "comment_id": 73779114, "body": "as a secondary note for ascending <code>sort_by! { |a| [a.zip, a.name]}</code> will handle that too and more naturally."}], "tags": [], "owner": {"reputation": 174, "user_id": 4996615, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a9f2d1a33af3282a81eb8fbf4c1405d3?s=128&d=identicon&r=PG", "display_name": "lilole", "link": "https://stackoverflow.com/users/4996615/lilole"}, "is_accepted": false, "score": 3, "last_activity_date": 1491949497, "last_edit_date": 1495542340, "creation_date": 1491942781, "answer_id": 43355706, "question_id": 43355420, "link": "https://stackoverflow.com/questions/43355420/google-contacts-api-how-to-get-contacts-in-sorted-order-by-their-name/43355706#43355706", "title": "Google contacts API : How to get contacts in sorted order by their name", "body": "<p>It seems that this Google API does not support sorting by name, which means pagination becomes a challenge.</p>\n\n<p>If I was stuck on this, I would probably grab the full contacts list, and persist it in either<br/>\n(a) a disk file, or<br/>\n(b) Memcached or Redis, or<br/>\n(c) a database table.<br/>Of course other issues arise when persisting objects, the main one being defining good parameters for your code to know when to re-sync the list, or to simply throw it away.</p>\n\n<p>If you choose (c), then your sorting and paging can be done the typical ways.</p>\n\n<p>But if you choose (a) or (b), then you can sort at the time you save the list.</p>\n\n<p>Ruby makes it easy to sort an array loaded into memory. If it's a big array, you can even sort it in place to avoid duplicating it. I'm not sure what your <code>response</code> object looks like, but here is some code assuming it's an array of objects with your <code>name</code> attribute.</p>\n\n<pre><code>my_objects = response # ...or whatever extracts the array of objects\n# Modifies array in place...\nmy_objects.sort! { |a, b| a.name &lt;=&gt; b.name }\n# To sort descending...\nmy_objects.sort! { |a, b| b.name &lt;=&gt; a.name }\n# To sort by zip first (assuming a `zip` attr) then by `name`...\nmy_objects.sort! { |a, b| 2 * (a.zip &lt;=&gt; b.zip) + (a.name &lt;=&gt; b.name) }\n# To sort by zip first (assuming a `zip` attr) then by `name` DESCENDING...\nmy_objects.sort! { |a, b| 2 * (a.zip &lt;=&gt; b.zip) + (b.name &lt;=&gt; a.name) }\n</code></pre>\n\n<p>This all works because of the <em>signum</em> or <em>spaceship</em> operator, <code>&lt;=&gt;</code>. You can learn more about it here:<br/>\n<a href=\"https://stackoverflow.com/questions/827649/what-is-the-ruby-spaceship-operator\">What is the Ruby &lt;=&gt; (spaceship) operator?</a><br/>\n<a href=\"https://en.wikipedia.org/wiki/Sign_function\" rel=\"nofollow noreferrer\">https://en.wikipedia.org/wiki/Sign_function</a></p>\n"}, {"comments": [{"owner": {"reputation": 1331, "user_id": 4189633, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/VG5Vp.jpg?s=128&g=1", "display_name": "Vishal G", "link": "https://stackoverflow.com/users/4189633/vishal-g"}, "edited": false, "score": 0, "creation_date": 1491945714, "post_id": 43355736, "comment_id": 73775984, "body": "I have not considered people API because of <code>http:&#47;&#47;stackoverflow.com&#47;questions&#47;36386957&#47;google-contacts-&zwnj;&#8203;api-vs-people-api</code>, Is there any solid reason that I should use people API for this purpose??  I want to sort records on their name"}], "tags": [], "owner": {"reputation": 1759, "user_id": 2467544, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XP1mx.png?s=128&g=1", "display_name": "Blake O&#39;Hare", "link": "https://stackoverflow.com/users/2467544/blake-ohare"}, "is_accepted": false, "score": 2, "last_activity_date": 1491942910, "creation_date": 1491942910, "answer_id": 43355736, "question_id": 43355420, "link": "https://stackoverflow.com/questions/43355420/google-contacts-api-how-to-get-contacts-in-sorted-order-by-their-name/43355736#43355736", "title": "Google contacts API : How to get contacts in sorted order by their name", "body": "<p>The Contacts API has no direct support for this. </p>\n\n<p>The <code>orderby</code> param has only two options: \"lastmodified\" and just leaving it blank (which incidentally performs a deterministic-but-arbitrary order by using the contact ID's). </p>\n\n<p>The reason for this is that generally the list action is only intended for sync purposes where the client/app will keep its own local copy that it periodically updates (as opposed to calling the API every time a user opens the app or changes views a different page of contacts). Furthermore, there are dozens of way you can sort a name (first name or last name as primary key? What about title? FileAs value? CJK considerations?)</p>\n\n<p>Have you considered using the People API? It returns sort keys with the contacts for this purpose. </p>\n"}], "owner": {"reputation": 1331, "user_id": 4189633, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/VG5Vp.jpg?s=128&g=1", "display_name": "Vishal G", "link": "https://stackoverflow.com/users/4189633/vishal-g"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 383, "favorite_count": 1, "answer_count": 2, "score": 2, "last_activity_date": 1491949497, "creation_date": 1491941720, "last_edit_date": 1491945835, "question_id": 43355420, "link": "https://stackoverflow.com/questions/43355420/google-contacts-api-how-to-get-contacts-in-sorted-order-by-their-name", "title": "Google contacts API : How to get contacts in sorted order by their name", "body": "<pre><code>response = RestClient.get 'https://www.google.com/m8/feeds/contacts/default/full', {params: {'max-results': 10000, 'access_token' =&gt; access_token, 'alt' =&gt; 'json', 'sortorder' =&gt; 'ascending'}}\n</code></pre>\n\n<p>I am using google API to get contacts they have given <code>sortorder</code> in their documentation which can be <code>ascending</code> or <code>descending</code>, But I am not able to figure out they are sorting on which attribute, I would like to do that on name</p>\n\n<p>Reference: <a href=\"https://developers.google.com/google-apps/contacts/v3/reference\" rel=\"nofollow noreferrer\">https://developers.google.com/google-apps/contacts/v3/reference</a></p>\n\n<p><a href=\"https://i.stack.imgur.com/iYoML.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/iYoML.png\" alt=\"enter image description here\"></a></p>\n\n<p>Any help??</p>\n\n<p>Edit:\nAlso, I want to have pagination on contacts, If I handle this sorting on ROR side then I have to fetch thousand's of contacts every time and sort  them and then paginate, which is slow</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "get", "mechanize", "eoferror"], "owner": {"reputation": 11, "user_id": 7852868, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-ToEsu42O-K8/AAAAAAAAAAI/AAAAAAAAAAo/ebA5i6As8UI/photo.jpg?sz=128", "display_name": "Genesis Gonzalez", "link": "https://stackoverflow.com/users/7852868/genesis-gonzalez"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 348, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1491940678, "creation_date": 1491940678, "question_id": 43355139, "link": "https://stackoverflow.com/questions/43355139/mechanize-get-page-conn-close-because-of-error-end-of-file-reached", "title": "Mechanize get page - Conn close because of error end of file reached", "body": "<p>I have this problem with an simple request with mechanize in my production code, in local works ok, but in production environment not, can you help me? thanks.</p>\n\n<pre><code>agent = Mechanize.new\n\nagent.log = Logger.new $stderr\n\nagent.agent.http.debug_output = $stderr\n\npage = agent.get \"THE_URL_EXAMPLE\"\n</code></pre>\n\n<p>I get this error:</p>\n\n<blockquote>\n  <p>too many connection resets (due to end of file reached - EOFError) after 0 requests on 54261840, last used 1491919097.3684318 seconds ago\n  I am working with ruby 2.0.0 and mechanize 2.7.5</p>\n</blockquote>\n\n<p>I try change the keep_alive to false, add an idle_timeout, this code: <a href=\"http://scottwb.com/blog/2013/11/09/defeating-the-infamous-mechanize-too-many-connection-resets-bug/\" rel=\"nofollow noreferrer\">http://scottwb.com/blog/2013/11/09/defeating-the-infamous-mechanize-too-many-connection-resets-bug/</a> but nothing work.</p>\n\n<pre><code>2.0.0 :119 &gt; page = agent.get uri\nNet::HTTP::Get: MY_ACTION_EXAMPLE\nrequest-header: accept-encoding =&gt; gzip,deflate,identity\nrequest-header: accept =&gt; /\nrequest-header: user-agent =&gt; Mechanize/2.7.5 Ruby/2.0.0p451 (http://github.com/sparklemotion/mechanize/)\nrequest-header: connection =&gt; close\nrequest-header: accept-charset =&gt; ISO-8859-1,utf-8;q=0.7,*;q=0.7\nrequest-header: accept-language =&gt; en-us,en;q=0.5\nrequest-header: host =&gt; MY_HOST_EXAMPLE\nrequest-header: x-requested-with =&gt; XMLHttpRequest\nopening connection to MY_HOST_EXAMPLE:80...\nopened\n&lt;- \"GET MY_ACTION_EXAMPLE HTTP/1.1\\r\\nAccept-Encoding: gzip,deflate,identity\\r\\nAccept: /\\r\\nUser-Agent: Mechanize/2.7.5 Ruby/2.0.0p451 (http://github.com/sparklemotion/mechanize/)\\r\\nConnection: close\\r\\nAccept-Charset: ISO-8859-1,utf-8;q=0.7,*;q=0.7\\r\\nAccept-Language: en-us,en;q=0.5\\r\\nHost: MY_HOST_EXAMPLE\\r\\nX-Requested-With: XMLHttpRequest\\r\\n\\r\\n\"\nConn close because of error end of file reached, and retry\nopening connection to MY_HOST_EXAMPLE:80...\nopened\n&lt;- \"GET MY_ACTION_EXAMPLE HTTP/1.1\\r\\nAccept-Encoding: gzip,deflate,identity\\r\\nAccept: /\\r\\nUser-Agent: Mechanize/2.7.5 Ruby/2.0.0p451 (http://github.com/sparklemotion/mechanize/)\\r\\nConnection: close\\r\\nAccept-Charset: ISO-8859-1,utf-8;q=0.7,*;q=0.7\\r\\nAccept-Language: en-us,en;q=0.5\\r\\nHost: MY_HOST_EXAMPLE\\r\\nX-Requested-With: XMLHttpRequest\\r\\n\\r\\n\"\nConn close because of error end of file reached\nConn close because of error end of file reached\nNet::HTTP::Persistent::Error: too many connection resets (due to end of file reached - EOFError) after 0 requests on 67857800, last used 1491937635.2713494 seconds ago\n    from /usr/local/rvm/rubies/ruby-2.0.0-p451/lib/ruby/2.0.0/net/protocol.rb:153:in `read_nonblock'\n    from /usr/local/rvm/rubies/ruby-2.0.0-p451/lib/ruby/2.0.0/net/protocol.rb:153:in `rbuf_fill'\n    from /usr/local/rvm/rubies/ruby-2.0.0-p451/lib/ruby/2.0.0/net/protocol.rb:134:in `readuntil'\n    from /usr/local/rvm/rubies/ruby-2.0.0-p451/lib/ruby/2.0.0/net/protocol.rb:144:in `readline'\n    from /usr/local/rvm/rubies/ruby-2.0.0-p451/lib/ruby/2.0.0/net/http/response.rb:39:in `read_status_line'\n    from /usr/local/rvm/rubies/ruby-2.0.0-p451/lib/ruby/2.0.0/net/http/response.rb:28:in `read_new'\n    from /usr/local/rvm/rubies/ruby-2.0.0-p451/lib/ruby/2.0.0/net/http.rb:1406:in `block in transport_request'\n    from /usr/local/rvm/rubies/ruby-2.0.0-p451/lib/ruby/2.0.0/net/http.rb:1403:in `catch'\n    from /usr/local/rvm/rubies/ruby-2.0.0-p451/lib/ruby/2.0.0/net/http.rb:1403:in `transport_request'\n    from /usr/local/rvm/rubies/ruby-2.0.0-p451/lib/ruby/2.0.0/net/http.rb:1376:in `request'\n    from /home/deploy/www/shared/bundle/ruby/2.0.0/gems/net-http-persistent-2.9.4/lib/net/http/persistent.rb:999:in `request'\n    from /home/deploy/www/shared/bundle/ruby/2.0.0/gems/mechanize-2.7.5/lib/mechanize/http/agent.rb:274:in `fetch'\n    from /home/deploy/www/shared/bundle/ruby/2.0.0/gems/mechanize-2.7.5/lib/mechanize.rb:464:in `get'\n    from (irb):119\n    from /home/deploy/www/shared/bundle/ruby/2.0.0/gems/railties-3.2.13/lib/rails/commands/console.rb:47:in `start'\n    from /home/deploy/www/shared/bundle/ruby/2.0.0/gems/railties-3.2.13/lib/rails/commands/console.rb:8:in `start'\n    from /home/deploy/www/shared/bundle/ruby/2.0.0/gems/railties-3.2.13/lib/rails/commands.rb:41:in `&lt;top (required)&gt;'\n    from script/rails:6:in `require'\n    from script/rails:6:in `&lt;main&gt;'2.0.0 :120 &gt;\n</code></pre>\n\n<p>And it is only that url that is the strangest yet..</p>\n\n<p>Please help me. Thanks.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "image"], "comments": [{"owner": {"reputation": 277, "user_id": 6770601, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d83c06b3b12c1782276623ef08355495?s=128&d=identicon&r=PG&f=1", "display_name": "Kamil", "link": "https://stackoverflow.com/users/6770601/kamil"}, "edited": false, "score": 0, "creation_date": 1491938925, "post_id": 43354467, "comment_id": 73772391, "body": "Do you run it locally or on test/production env?"}, {"owner": {"reputation": 49, "user_id": 7851812, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/2be7c8eeada09f944ad13ee4605abe1d?s=128&d=identicon&r=PG&f=1", "display_name": "Xenedra", "link": "https://stackoverflow.com/users/7851812/xenedra"}, "reply_to_user": {"reputation": 277, "user_id": 6770601, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d83c06b3b12c1782276623ef08355495?s=128&d=identicon&r=PG&f=1", "display_name": "Kamil", "link": "https://stackoverflow.com/users/6770601/kamil"}, "edited": false, "score": 0, "creation_date": 1491938987, "post_id": 43354467, "comment_id": 73772432, "body": "It&#39;s in the development environment."}, {"owner": {"reputation": 277, "user_id": 6770601, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d83c06b3b12c1782276623ef08355495?s=128&d=identicon&r=PG&f=1", "display_name": "Kamil", "link": "https://stackoverflow.com/users/6770601/kamil"}, "edited": false, "score": 0, "creation_date": 1491939267, "post_id": 43354467, "comment_id": 73772601, "body": "Start rails console (<code>rails c</code>) and get value of: Rails.application.config.assets.precompile"}], "answers": [{"comments": [{"owner": {"reputation": 499, "user_id": 5636930, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-L0BF3IxhZYw/AAAAAAAAAAI/AAAAAAAAAPM/RAOVvQpPSEA/photo.jpg?sz=128", "display_name": "amrrbakry", "link": "https://stackoverflow.com/users/5636930/amrrbakry"}, "reply_to_user": {"reputation": 49, "user_id": 7851812, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/2be7c8eeada09f944ad13ee4605abe1d?s=128&d=identicon&r=PG&f=1", "display_name": "Xenedra", "link": "https://stackoverflow.com/users/7851812/xenedra"}, "edited": false, "score": 0, "creation_date": 1491938867, "post_id": 43354558, "comment_id": 73772347, "body": "@Jessica did you also remove the space from the file name in the images folder?"}, {"owner": {"reputation": 49, "user_id": 7851812, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/2be7c8eeada09f944ad13ee4605abe1d?s=128&d=identicon&r=PG&f=1", "display_name": "Xenedra", "link": "https://stackoverflow.com/users/7851812/xenedra"}, "edited": false, "score": 0, "creation_date": 1491938929, "post_id": 43354558, "comment_id": 73772393, "body": "Yes I did.  I replaced them with an underscore."}, {"owner": {"reputation": 1180, "user_id": 6157949, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/YBymK.png?s=128&g=1", "display_name": "catch22", "link": "https://stackoverflow.com/users/6157949/catch22"}, "edited": false, "score": 0, "creation_date": 1491939183, "post_id": 43354558, "comment_id": 73772551, "body": "did you remove the space between image_tag and the parenthesis as well? check the code example."}, {"owner": {"reputation": 1180, "user_id": 6157949, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/YBymK.png?s=128&g=1", "display_name": "catch22", "link": "https://stackoverflow.com/users/6157949/catch22"}, "edited": false, "score": 0, "creation_date": 1491943468, "post_id": 43354558, "comment_id": 73774895, "body": "Try placing your image in this folder: /app/assets/yourimagehere.png and don&#39;t change the image_tag code, leave it like &lt;%= image_tag(&quot;wholesale_analysis.png&quot;) %&gt; . Rails documentation mentions that Rails will look into assets folder for the image: image_tag(&quot;rails.png&quot;) # =&gt; &lt;img alt=&quot;Rails&quot; src=&quot;/assets/rails.png&quot; /&gt;. It should work anyway if it&#39;s inside images folder, but try placing it in assets to check it out. Also, have you checked if a different image works?"}], "tags": [], "owner": {"reputation": 1180, "user_id": 6157949, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/YBymK.png?s=128&g=1", "display_name": "catch22", "link": "https://stackoverflow.com/users/6157949/catch22"}, "is_accepted": false, "score": 0, "last_activity_date": 1491939117, "last_edit_date": 1491939117, "creation_date": 1491938582, "answer_id": 43354558, "question_id": 43354467, "link": "https://stackoverflow.com/questions/43354467/ror-image-tag-not-finding-image/43354558#43354558", "title": "RoR image tag not finding image", "body": "<p>Remove the space of the filename between \"wholesale\" and \"analysis.png\", as in: wholesale_analysis.png or wholesaleanalysis.png\nand change your image tag as well:</p>\n\n<pre><code>&lt;%= image_tag(\"wholesale_analysis.png\") %&gt;\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 49, "user_id": 7851812, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/2be7c8eeada09f944ad13ee4605abe1d?s=128&d=identicon&r=PG&f=1", "display_name": "Xenedra", "link": "https://stackoverflow.com/users/7851812/xenedra"}, "edited": false, "score": 0, "creation_date": 1491940196, "post_id": 43354869, "comment_id": 73773118, "body": "I tried both suggestions...putting the image in the public directory and changing the image tag to include &quot;/assets/&quot;.  Neither worked."}], "tags": [], "owner": {"reputation": 277, "user_id": 6770601, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d83c06b3b12c1782276623ef08355495?s=128&d=identicon&r=PG&f=1", "display_name": "Kamil", "link": "https://stackoverflow.com/users/6770601/kamil"}, "is_accepted": false, "score": 0, "last_activity_date": 1491939771, "creation_date": 1491939771, "answer_id": 43354869, "question_id": 43354467, "link": "https://stackoverflow.com/questions/43354467/ror-image-tag-not-finding-image/43354869#43354869", "title": "RoR image tag not finding image", "body": "<p>I would advise to put images in your /public direcotry as they should not be precompiled like css and js files. \nIf you really want to have them in your assets, you should try: <code>&lt;%= image_tag(\"/assets/wholesale_analysis.png\") %&gt;</code></p>\n"}, {"comments": [{"owner": {"reputation": 21, "user_id": 5594269, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/285b935e62a023618ed2dd61f0590334?s=128&d=identicon&r=PG&f=1", "display_name": "Aditya", "link": "https://stackoverflow.com/users/5594269/aditya"}, "reply_to_user": {"reputation": 49, "user_id": 7851812, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/2be7c8eeada09f944ad13ee4605abe1d?s=128&d=identicon&r=PG&f=1", "display_name": "Xenedra", "link": "https://stackoverflow.com/users/7851812/xenedra"}, "edited": false, "score": 0, "creation_date": 1492468797, "post_id": 43358858, "comment_id": 73977426, "body": "try to precompile the assets using rake assets:precompile, jus give a try"}], "tags": [], "owner": {"reputation": 21, "user_id": 5594269, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/285b935e62a023618ed2dd61f0590334?s=128&d=identicon&r=PG&f=1", "display_name": "Aditya", "link": "https://stackoverflow.com/users/5594269/aditya"}, "is_accepted": false, "score": 0, "last_activity_date": 1491961511, "creation_date": 1491961511, "answer_id": 43358858, "question_id": 43354467, "link": "https://stackoverflow.com/questions/43354467/ror-image-tag-not-finding-image/43358858#43358858", "title": "RoR image tag not finding image", "body": "<p>@Xenedra place the image in assets/ folder and let the tag be </p>\n\n<pre><code>&lt;%= image_tag(\"wholesale_analysis.png\") %&gt;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 49, "user_id": 7851812, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/2be7c8eeada09f944ad13ee4605abe1d?s=128&d=identicon&r=PG&f=1", "display_name": "Xenedra", "link": "https://stackoverflow.com/users/7851812/xenedra"}, "is_accepted": true, "score": 0, "last_activity_date": 1492517792, "creation_date": 1492517792, "answer_id": 43471887, "question_id": 43354467, "link": "https://stackoverflow.com/questions/43354467/ror-image-tag-not-finding-image/43471887#43471887", "title": "RoR image tag not finding image", "body": "<p>I fixed my problem...my file was just named .html instead of .html.erb.  Everything works now! Thank you for all of your suggestions.</p>\n"}], "owner": {"reputation": 49, "user_id": 7851812, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/2be7c8eeada09f944ad13ee4605abe1d?s=128&d=identicon&r=PG&f=1", "display_name": "Xenedra", "link": "https://stackoverflow.com/users/7851812/xenedra"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 106, "favorite_count": 0, "accepted_answer_id": 43471887, "answer_count": 4, "score": 0, "last_activity_date": 1492517792, "creation_date": 1491938257, "last_edit_date": 1491940845, "question_id": 43354467, "link": "https://stackoverflow.com/questions/43354467/ror-image-tag-not-finding-image", "title": "RoR image tag not finding image", "body": "<p>I have an image in the asset pipeline like this: \"app/assets/images/wholesale_analysis.png\".  In my template, I have this tag <code>&lt;%= image_tag(\"wholesale_analysis.png\") %&gt;</code>, however it is not finding the image.  It returns the text for the image tag instead of the image even if I provide an 'alt:' in the image tag.  The image tag works in the layout, but not in the template.  What is going on?</p>\n\n<p>@Kamil  Results of rails console...</p>\n\n<pre><code>`C:/Users/CMMC/Documents/Sites/cmmc/config/environments/development.rb:50:in \n\nblock in &lt;top (required)&gt;': undefined method `config' for #&lt;Rack::Sendfile:0x5321250&gt; (NoMethodError)\n        from C:/Ruby23/lib/ruby/gems/2.3.0/gems/railties-5.0.2/lib/rails/railtie.rb:209:in `instance_eval'\n        from C:/Ruby23/lib/ruby/gems/2.3.0/gems/railties-5.0.2/lib/rails/railtie.rb:209:in `configure'\n        from C:/Users/CMMC/Documents/Sites/cmmc/config/environments/development.rb:1:in `&lt;top (required)&gt;'\n        from C:/Ruby23/lib/ruby/gems/2.3.0/gems/activesupport-5.0.2/lib/active_support/dependencies.rb:293:in `require'\n        from C:/Ruby23/lib/ruby/gems/2.3.0/gems/activesupport-5.0.2/lib/active_support/dependencies.rb:293:in `block in require'\n        from C:/Ruby23/lib/ruby/gems/2.3.0/gems/activesupport-5.0.2/lib/active_support/dependencies.rb:259:in `load_dependency'\n        from C:/Ruby23/lib/ruby/gems/2.3.0/gems/activesupport-5.0.2/lib/active_support/dependencies.rb:293:in `require'\n        from C:/Ruby23/lib/ruby/gems/2.3.0/gems/railties-5.0.2/lib/rails/engine.rb:600:in `block (2 levels) in &lt;class:Engine&gt;'\n        from C:/Ruby23/lib/ruby/gems/2.3.0/gems/railties-5.0.2/lib/rails/engine.rb:599:in `each'\n        from C:/Ruby23/lib/ruby/gems/2.3.0/gems/railties-5.0.2/lib/rails/engine.rb:599:in `block in &lt;class:Engine&gt;'\n        from C:/Ruby23/lib/ruby/gems/2.3.0/gems/railties-5.0.2/lib/rails/initializable.rb:30:in `instance_exec'\n        from C:/Ruby23/lib/ruby/gems/2.3.0/gems/railties-5.0.2/lib/rails/initializable.rb:30:in `run'\n        from C:/Ruby23/lib/ruby/gems/2.3.0/gems/railties-5.0.2/lib/rails/initializable.rb:55:in `block in run_initializers'\n        from C:/Ruby23/lib/ruby/2.3.0/tsort.rb:228:in `block in tsort_each'\n        from C:/Ruby23/lib/ruby/2.3.0/tsort.rb:350:in `block (2 levels) in each_strongly_connected_component'\n        from C:/Ruby23/lib/ruby/2.3.0/tsort.rb:422:in `block (2 levels) in each_strongly_connected_component_from'\n        from C:/Ruby23/lib/ruby/2.3.0/tsort.rb:431:in `each_strongly_connected_component_from'\n        from C:/Ruby23/lib/ruby/2.3.0/tsort.rb:421:in `block in each_strongly_connected_component_from'\n        from C:/Ruby23/lib/ruby/gems/2.3.0/gems/railties-5.0.2/lib/rails/initializable.rb:44:in `each'\n        from C:/Ruby23/lib/ruby/gems/2.3.0/gems/railties-5.0.2/lib/rails/initializable.rb:44:in `tsort_each_child'\n        from C:/Ruby23/lib/ruby/2.3.0/tsort.rb:415:in `call'\n        from C:/Ruby23/lib/ruby/2.3.0/tsort.rb:415:in `each_strongly_connected_component_from'\n        from C:/Ruby23/lib/ruby/2.3.0/tsort.rb:349:in `block in each_strongly_connected_component'\n        from C:/Ruby23/lib/ruby/2.3.0/tsort.rb:347:in `each'\n        from C:/Ruby23/lib/ruby/2.3.0/tsort.rb:347:in `call'\n        from C:/Ruby23/lib/ruby/2.3.0/tsort.rb:347:in `each_strongly_connected_component'\n        from C:/Ruby23/lib/ruby/2.3.0/tsort.rb:226:in `tsort_each'\n        from C:/Ruby23/lib/ruby/2.3.0/tsort.rb:205:in `tsort_each'\n        from C:/Ruby23/lib/ruby/gems/2.3.0/gems/railties-5.0.2/lib/rails/initializable.rb:54:in `run_initializers'\n        from C:/Ruby23/lib/ruby/gems/2.3.0/gems/railties-5.0.2/lib/rails/application.rb:352:in `initialize!'\n        from C:/Users/CMMC/Documents/Sites/cmmc/config/environment.rb:5:in `&lt;top (required)&gt;'\n        from C:/Ruby23/lib/ruby/gems/2.3.0/gems/railties-5.0.2/lib/rails/application.rb:328:in `require'\n        from C:/Ruby23/lib/ruby/gems/2.3.0/gems/railties-5.0.2/lib/rails/application.rb:328:in `require_environment!'\n        from C:/Ruby23/lib/ruby/gems/2.3.0/gems/railties-5.0.2/lib/rails/commands/commands_tasks.rb:157:in `require_application_and_environment!'\n        from C:/Ruby23/lib/ruby/gems/2.3.0/gems/railties-5.0.2/lib/rails/commands/commands_tasks.rb:77:in `console'\n        from C:/Ruby23/lib/ruby/gems/2.3.0/gems/railties-5.0.2/lib/rails/commands/commands_tasks.rb:49:in `run_command!'\n        from C:/Ruby23/lib/ruby/gems/2.3.0/gems/railties-5.0.2/lib/rails/commands.rb:18:in `&lt;top (required)&gt;'\n        from bin/rails:4:in `require'\n        from bin/rails:4:in `&lt;main&gt;'\n</code></pre>\n"}, {"tags": ["ruby"], "answers": [{"comments": [{"owner": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "edited": false, "score": 0, "creation_date": 1491985185, "post_id": 43354359, "comment_id": 73789719, "body": "You&#39;re welcome. Finally, note that <code>delete_if</code> mutates <code>B</code>."}], "tags": [], "owner": {"reputation": 12629, "user_id": 4739257, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/MdhEs.jpg?s=128&g=1", "display_name": "Ilya", "link": "https://stackoverflow.com/users/4739257/ilya"}, "is_accepted": true, "score": 4, "last_activity_date": 1491983547, "last_edit_date": 1491983547, "creation_date": 1491937823, "answer_id": 43354359, "question_id": 43354295, "link": "https://stackoverflow.com/questions/43354295/from-two-hashes-obtain-another-with-keys-non-repeated-in-ruby/43354359#43354359", "title": "From two hashes obtain another with keys non repeated in ruby", "body": "<p>You can use <a href=\"https://ruby-doc.org/core/Hash.html#method-i-select\" rel=\"nofollow noreferrer\"><code>Hash#select</code></a> or <a href=\"https://ruby-doc.org/core-2.4.1/Hash.html#method-i-reject\" rel=\"nofollow noreferrer\"><code>Hash#reject</code></a> without the bang:</p>\n\n<pre><code>C = B.select { |k, _| !A[k] }\n#=&gt; {\"name4\"=&gt;444}\nB.reject { |k, _| A[k] }\n#=&gt; {\"name4\"=&gt;444}\n</code></pre>\n\n<p>If your hash contains boolean values, use <code>nil?</code> method (<code>A[k].nil?</code>) or <code>Hash#has_key?</code> (<code>A.has_key?</code>).</p>\n\n<p>Also you can use  <a href=\"https://ruby-doc.org/core/Hash.html#method-i-delete_if\" rel=\"nofollow noreferrer\"><code>Hash#delete_if</code></a> method:</p>\n\n<pre><code>C = B.delete_if { |k, v| A.has_key?(k) }\n#=&gt; {\"name4\"=&gt;444}\n</code></pre>\n"}], "owner": {"reputation": 23, "user_id": 2668530, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f9982b86d7b50851ca5060276c223759?s=128&d=identicon&r=PG", "display_name": "user2668530", "link": "https://stackoverflow.com/users/2668530/user2668530"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 54, "favorite_count": 0, "accepted_answer_id": 43354359, "answer_count": 1, "score": 2, "last_activity_date": 1491983547, "creation_date": 1491937603, "question_id": 43354295, "link": "https://stackoverflow.com/questions/43354295/from-two-hashes-obtain-another-with-keys-non-repeated-in-ruby", "title": "From two hashes obtain another with keys non repeated in ruby", "body": "<p>I have two hashes in ruby and I want compare both and then create another with the keys and values of non repeated keys.</p>\n\n<pre><code>A = {\"name1\" =&gt; 123, \"name2\" =&gt; 321, \"name3\" =&gt; 412 }\nB = {\"name1\" =&gt; 412, \"name2\" =&gt; 412, \"name4\" =&gt; 444}\n</code></pre>\n\n<p>I want compare B with A, and obtain a new hash with the keys and values of the keys that are not present in A.</p>\n\n<pre><code>C = {\"name4\" =&gt; 444}\n</code></pre>\n\n<p>Could you help me please? \nThanks\nRegards</p>\n"}, {"tags": ["ruby", "git", "jenkins", "rally"], "answers": [{"tags": [], "owner": {"reputation": 78, "user_id": 7559664, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh4.googleusercontent.com/-BladEsV525g/AAAAAAAAAAI/AAAAAAAAQ8k/Mz-KO6GZVro/photo.jpg?sz=128", "display_name": "Cookra", "link": "https://stackoverflow.com/users/7559664/cookra"}, "is_accepted": true, "score": 0, "last_activity_date": 1492904119, "creation_date": 1492904119, "answer_id": 43565778, "question_id": 43354040, "link": "https://stackoverflow.com/questions/43354040/jenkins-build-execute-shell-error/43565778#43565778", "title": "Jenkins Build, Execute Shell Error", "body": "<p>This is fixed was ruby version on HBrew</p>\n"}], "owner": {"reputation": 78, "user_id": 7559664, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh4.googleusercontent.com/-BladEsV525g/AAAAAAAAAAI/AAAAAAAAQ8k/Mz-KO6GZVro/photo.jpg?sz=128", "display_name": "Cookra", "link": "https://stackoverflow.com/users/7559664/cookra"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 338, "favorite_count": 0, "accepted_answer_id": 43565778, "answer_count": 1, "score": 0, "last_activity_date": 1492904119, "creation_date": 1491936726, "question_id": 43354040, "link": "https://stackoverflow.com/questions/43354040/jenkins-build-execute-shell-error", "title": "Jenkins Build, Execute Shell Error", "body": "<p>I'm trying to trigger a shell command via Jenkins 2.54 on Build. I've had this running in the past but decided to rebuild my mac 'clean' without TimeMachine.. </p>\n\n<p>In the background, i'm using a node.js app for building applications in Agile Central (Rally) - All of this works fine and even the shell command I use runs in the Shell (Fish to be precise).</p>\n\n<p>As far as I can tell I have all the dependancies installed as this works when running from cmd line..</p>\n\n<p>The command I'm using:</p>\n\n<blockquote>\n  <p>ruby /g2ca/git2ca_agile_central.rb devOps</p>\n</blockquote>\n\n<p><a href=\"https://i.stack.imgur.com/pvnYF.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/pvnYF.png\" alt=\"enter image description here\"></a></p>\n\n<p>As mentioned in the shell directly this does everything I need, takes a commit with an artefact ID such as a user story US01 and adds the expected outcome to the user stories Change Set:</p>\n\n<p><a href=\"https://i.stack.imgur.com/DibMj.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/DibMj.jpg\" alt=\"enter image description here\"></a></p>\n\n<p>BUT.. Jenkins throws a fit in it's console:</p>\n\n<blockquote>\n  <p>+ ruby /g2ca/git2ca_agile_central.rb devOps /Library/Ruby/Site/2.0.0/rubygems/core_ext/kernel_require.rb:55:in\n  <code>require': cannot load such file -- vcseif (LoadError)    from\n  /Library/Ruby/Site/2.0.0/rubygems/core_ext/kernel_require.rb:55:in\n  </code>require'     from /g2ca/git2ca_agile_central.rb:35:in `' Build\n  step 'Execute shell' marked build as failure</p>\n</blockquote>\n\n<p>I'm no professional coder by any stretch!!! So go easy here as I could be way out of my depth, but this is baffling me..</p>\n\n<p>I'm using Brew also, if it helps here is the output from </p>\n\n<blockquote>\n  <p>Brew Config</p>\n</blockquote>\n\n<p>HOMEBREW_VERSION: 1.1.12</p>\n\n<p>ORIGIN: <a href=\"https://github.com/Homebrew/brew.git\" rel=\"nofollow noreferrer\">https://github.com/Homebrew/brew.git</a></p>\n\n<p>HEAD: 8ea778f7c7ea790694485030d105a92a9416ef33</p>\n\n<p>Last commit: 9 days ago</p>\n\n<p>Core tap ORIGIN: <a href=\"https://github.com/Homebrew/homebrew-core\" rel=\"nofollow noreferrer\">https://github.com/Homebrew/homebrew-core</a></p>\n\n<p>Core tap HEAD: 55a35bb74627e9eee9537dc726ac07c3dbc59444</p>\n\n<p>Core tap last commit: 7 hours ago</p>\n\n<p>HOMEBREW_PREFIX: /usr/local</p>\n\n<p>HOMEBREW_REPOSITORY: /usr/local/Homebrew</p>\n\n<p>HOMEBREW_CELLAR: /usr/local/Cellar</p>\n\n<p>HOMEBREW_BOTTLE_DOMAIN: <a href=\"https://homebrew.bintray.com\" rel=\"nofollow noreferrer\">https://homebrew.bintray.com</a></p>\n\n<p>CPU: octa-core 64-bit haswell</p>\n\n<p>Homebrew Ruby: 2.0.0-p648</p>\n\n<p>Clang: 8.1 build 802</p>\n\n<p>Git: 2.11.0 => /Applications/Xcode.app/Contents/Developer/usr/bin/git</p>\n\n<p>Perl: /usr/bin/perl</p>\n\n<p>Python: /usr/local/bin/python => /usr/local/Cellar/python/2.7.11/Frameworks/Python.framework/Versions/2.7/bin/python2.7</p>\n\n<p>Ruby: /usr/local/bin/ruby => /usr/local/Cellar/ruby/2.4.1_1/bin/ruby</p>\n\n<p>Java: 1.8.0_121</p>\n\n<p>macOS: 10.12.4-x86_64</p>\n\n<p>Xcode: 8.3.1</p>\n\n<p>CLT: N/A</p>\n\n<p>X11: N/A</p>\n\n<p>Do I have a ruby missmatch between my shell and Jenkins??</p>\n\n<p>Here's what i'm using:\nRallyConnectorForGit-3.7_3\nNode 5.4.1\nrally_api 1.2.1\nhttpclient 2.8.3\nvcseif 1.2.0\nJenkins 2.54</p>\n\n<p>I'm lost... Anything else you need please shout!</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "devise"], "comments": [{"owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "edited": false, "score": 0, "creation_date": 1491937016, "post_id": 43353961, "comment_id": 73771303, "body": "You would need to modify the sessions controller to store logins on a separate table and identify them by something like the IP or MAC address and also store the user id. You can then get the &quot;logins&quot; by querying the table."}, {"owner": {"reputation": 510, "user_id": 6412088, "user_type": "registered", "accept_rate": 65, "profile_image": "https://graph.facebook.com/1770376769864611/picture?type=large", "display_name": "Andrey Drozdov", "link": "https://stackoverflow.com/users/6412088/andrey-drozdov"}, "reply_to_user": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "edited": false, "score": 0, "creation_date": 1491937740, "post_id": 43353961, "comment_id": 73771688, "body": "html request don&#39;t have Mac address (so you can&#39;t get it from user_agent)"}, {"owner": {"reputation": 510, "user_id": 6412088, "user_type": "registered", "accept_rate": 65, "profile_image": "https://graph.facebook.com/1770376769864611/picture?type=large", "display_name": "Andrey Drozdov", "link": "https://stackoverflow.com/users/6412088/andrey-drozdov"}, "reply_to_user": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "edited": false, "score": 1, "creation_date": 1491938411, "post_id": 43353961, "comment_id": 73772087, "body": "And ip can be changed, if user is log in from cafe, work or home (or mobile phone). So this method will return more bugs than, it will have use"}, {"owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "edited": false, "score": 0, "creation_date": 1491939053, "post_id": 43353961, "comment_id": 73772478, "body": "Dude, I&#39;m just saying that you need to use some sort of identifier and link it to a user. You&#39;ll have to figure out the details. You can use the <code>session.id</code> since the cookie is unique per device."}, {"owner": {"reputation": 277, "user_id": 6770601, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d83c06b3b12c1782276623ef08355495?s=128&d=identicon&r=PG&f=1", "display_name": "Kamil", "link": "https://stackoverflow.com/users/6770601/kamil"}, "edited": false, "score": 0, "creation_date": 1491941867, "post_id": 43353961, "comment_id": 73774031, "body": "You need to detect what sessions ids are currently used by the user. If there are more than one active (you recieive requests with them alternately)."}], "answers": [{"comments": [{"owner": {"reputation": 510, "user_id": 6412088, "user_type": "registered", "accept_rate": 65, "profile_image": "https://graph.facebook.com/1770376769864611/picture?type=large", "display_name": "Andrey Drozdov", "link": "https://stackoverflow.com/users/6412088/andrey-drozdov"}, "edited": false, "score": 0, "creation_date": 1492007003, "post_id": 43358163, "comment_id": 73806454, "body": "We store our sessions on server side. The purpose, is to detect two log in from one account is same time and send email, if user logged in twice or more from same account."}, {"owner": {"reputation": 584, "user_id": 1198440, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f12368bc9ab95a09cfbfd708a04591e6?s=128&d=identicon&r=PG", "display_name": "Frank Joseph Mattia", "link": "https://stackoverflow.com/users/1198440/frank-joseph-mattia"}, "reply_to_user": {"reputation": 510, "user_id": 6412088, "user_type": "registered", "accept_rate": 65, "profile_image": "https://graph.facebook.com/1770376769864611/picture?type=large", "display_name": "Andrey Drozdov", "link": "https://stackoverflow.com/users/6412088/andrey-drozdov"}, "edited": false, "score": 0, "creation_date": 1492007485, "post_id": 43358163, "comment_id": 73806879, "body": "What is the current session store? A db store or a cache store like redis?"}, {"owner": {"reputation": 584, "user_id": 1198440, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f12368bc9ab95a09cfbfd708a04591e6?s=128&d=identicon&r=PG", "display_name": "Frank Joseph Mattia", "link": "https://stackoverflow.com/users/1198440/frank-joseph-mattia"}, "reply_to_user": {"reputation": 510, "user_id": 6412088, "user_type": "registered", "accept_rate": 65, "profile_image": "https://graph.facebook.com/1770376769864611/picture?type=large", "display_name": "Andrey Drozdov", "link": "https://stackoverflow.com/users/6412088/andrey-drozdov"}, "edited": false, "score": 0, "creation_date": 1492008358, "post_id": 43358163, "comment_id": 73807646, "body": "Also, what is preferred to happen if a user clears their cookies or closes their browser without logging out? Should they still get the same email?"}, {"owner": {"reputation": 510, "user_id": 6412088, "user_type": "registered", "accept_rate": 65, "profile_image": "https://graph.facebook.com/1770376769864611/picture?type=large", "display_name": "Andrey Drozdov", "link": "https://stackoverflow.com/users/6412088/andrey-drozdov"}, "edited": false, "score": 0, "creation_date": 1492121181, "post_id": 43358163, "comment_id": 73865400, "body": "1. We store session in DB 2. I thought about it, ofc no, user should not receive email, but I don&#39;t think it&#39;s possible to control (only if we send cookies to user, and my device count method must check if there is this cookie or delete device record)"}], "tags": [], "owner": {"reputation": 584, "user_id": 1198440, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f12368bc9ab95a09cfbfd708a04591e6?s=128&d=identicon&r=PG", "display_name": "Frank Joseph Mattia", "link": "https://stackoverflow.com/users/1198440/frank-joseph-mattia"}, "is_accepted": false, "score": 0, "last_activity_date": 1492042583, "last_edit_date": 1492042583, "creation_date": 1491955847, "answer_id": 43358163, "question_id": 43353961, "link": "https://stackoverflow.com/questions/43353961/rails-detect-if-user-is-login-from-multiple-devises/43358163#43358163", "title": "Rails detect if user is login from multiple devises", "body": "<p>You could detect the device with <a href=\"https://github.com/Valve/fingerprintjs2\" rel=\"nofollow noreferrer\">fingerprintjs2</a>. When the user logs, store the fingerprint in the session and query the session store if the user is on a new device or not.</p>\n"}], "owner": {"reputation": 510, "user_id": 6412088, "user_type": "registered", "accept_rate": 65, "profile_image": "https://graph.facebook.com/1770376769864611/picture?type=large", "display_name": "Andrey Drozdov", "link": "https://stackoverflow.com/users/6412088/andrey-drozdov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 953, "favorite_count": 1, "answer_count": 1, "score": 0, "last_activity_date": 1492042583, "creation_date": 1491936472, "question_id": 43353961, "link": "https://stackoverflow.com/questions/43353961/rails-detect-if-user-is-login-from-multiple-devises", "title": "Rails detect if user is login from multiple devises", "body": "<p>I use Devise, and I want to detect if user login from other device. (I don't want to restrict second session, so devise secure extension won't work). </p>\n\n<p>So the question is - how to detect if user login from multiple devices in same time. </p>\n"}, {"tags": ["ruby"], "answers": [{"comments": [{"owner": {"reputation": 7936, "user_id": 759991, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/LFxFQ.jpg?s=128&g=1", "display_name": "Red Cricket", "link": "https://stackoverflow.com/users/759991/red-cricket"}, "edited": false, "score": 0, "creation_date": 1491941755, "post_id": 43354442, "comment_id": 73773962, "body": "Thanks for your answer. I still do not understand what the &#39;=&gt;&#39; means in the parameter declaration in the newproperty subroutine. :)"}, {"owner": {"reputation": 109, "user_id": 7147835, "user_type": "registered", "profile_image": "https://graph.facebook.com/10210530390319057/picture?type=large", "display_name": "Russell Kranz", "link": "https://stackoverflow.com/users/7147835/russell-kranz"}, "reply_to_user": {"reputation": 7936, "user_id": 759991, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/LFxFQ.jpg?s=128&g=1", "display_name": "Red Cricket", "link": "https://stackoverflow.com/users/759991/red-cricket"}, "edited": false, "score": 0, "creation_date": 1491942556, "post_id": 43354442, "comment_id": 73774393, "body": "I wasn&#39;t entirely sure so I searched for it and found this identical resource. It looks like it&#39;s a unique property to puppet called &#39;namevar&#39;. <a href=\"http://garylarizza.com/blog/2013/11/25/fun-with-providers/\" rel=\"nofollow noreferrer\">garylarizza.com/blog/2013/11/25/fun-with-providers</a> cntrl f to the section &#39;Namevars are unique little snowflakes&#39;"}], "tags": [], "owner": {"reputation": 109, "user_id": 7147835, "user_type": "registered", "profile_image": "https://graph.facebook.com/10210530390319057/picture?type=large", "display_name": "Russell Kranz", "link": "https://stackoverflow.com/users/7147835/russell-kranz"}, "is_accepted": true, "score": 1, "last_activity_date": 1491938137, "creation_date": 1491938137, "answer_id": 43354442, "question_id": 43353756, "link": "https://stackoverflow.com/questions/43353756/understanding-ruby-code-from-puppet-module-openstack-nova/43354442#43354442", "title": "Understanding Ruby code from Puppet module openstack/nova", "body": "<p>I'll try to make assumptions and answer this as best I can from the info provided.</p>\n\n<ol>\n<li><p>You probably have a function <code>newproperty(x, y)</code> &lt;- accepts 2 arguments, somewhere in the associated model or helper. It's taking those inputs from some user interaction that assigns the <code>:value</code> and the <code>:array_matching =&gt; :all</code> is based on that <code>:value</code>.</p></li>\n<li><p><code>desc</code> is not a native Ruby function. It must be defined somewhere. For instance, this code would run:</p></li>\n</ol>\n\n<p><code>def desc(x)\n  puts x\nend</code></p>\n\n<p><code>desc 'The value of the setting to be defined.'</code></p>\n\n<p>It's a little unconventional but it would work.</p>\n\n<ol start=\"3\">\n<li>The ? in <code>def insync?(is)</code> is part of the function name. Ruby is intended to be a very English-like language and since many functions evaluate to true or false, it's easier to read sometimes when you just make your function a question in itself.</li>\n</ol>\n"}], "owner": {"reputation": 7936, "user_id": 759991, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/LFxFQ.jpg?s=128&g=1", "display_name": "Red Cricket", "link": "https://stackoverflow.com/users/759991/red-cricket"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 27, "favorite_count": 0, "accepted_answer_id": 43354442, "answer_count": 1, "score": 0, "last_activity_date": 1491938137, "creation_date": 1491935727, "question_id": 43353756, "link": "https://stackoverflow.com/questions/43353756/understanding-ruby-code-from-puppet-module-openstack-nova", "title": "Understanding Ruby code from Puppet module openstack/nova", "body": "<p>I do not know Ruby very well and was hoping someone could help me understand some of what this bit of code is doing.</p>\n\n<pre><code>newproperty(:value, :array_matching =&gt; :all) do\n    desc 'The value of the setting to be defined.'\n    def insync?(is)\n      return true if @should.empty?\n      return false unless is.is_a? Array\n      return false unless is.length == @should.length\n      return (\n        is &amp; @should == is or\n        is &amp; @should.map(&amp;:to_s) == is\n      )\nend\n</code></pre>\n\n<p>I am not sure at all what this line ...</p>\n\n<pre><code>newproperty(:value, :array_matching =&gt; :all) do\n</code></pre>\n\n<p>... is doing. Is defining a function that accepts two parameters: <em>value</em> and <em>array_matching</em>? It is a loop? And I do not understand what the <em>:array_matching => :all</em> is all about.</p>\n\n<p>Next is ...</p>\n\n<pre><code>    desc 'The value of the setting to be defined.'\n</code></pre>\n\n<p>... Is this some sort of built in documentation? Next is this bit:</p>\n\n<pre><code>    def insync?(is)\n      return true if @should.empty?\n      return false unless is.is_a? Array\n      return false unless is.length == @should.length\n      return (\n        is &amp; @should == is or\n        is &amp; @should.map(&amp;:to_s) == is\n      )\n</code></pre>\n\n<p>I guess that a function called \"insync\" is being defined. Not sure what the '?' means.  Also I guess @should is some global variable declared in the parent scope.</p>\n\n<p>Thanks</p>\n"}, {"tags": ["arrays", "ruby", "hashmap", "ruby-hash"], "comments": [{"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1491935595, "post_id": 43353514, "comment_id": 73770530, "body": "Please read &quot;<a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a>&quot; including the linked pages, &quot;<a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>&quot; and &quot;<a href=\"http://meta.stackoverflow.com/questions/261592\">How much research effort is expected of Stack Overflow users?</a>&quot;. We&#39;d like to see evidence of your effort. What did you try? Did you search and not find anything? Did you find stuff but it didn&#39;t help? Did you try writing code? If not, why? If so, what is the smallest code example that shows what you tried and why didn&#39;t it work? Without that it looks like you didn&#39;t try and want us to write it for you."}], "answers": [{"comments": [{"owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "edited": false, "score": 1, "creation_date": 1491935752, "post_id": 43353709, "comment_id": 73770618, "body": "Note that since you are using JSON notation on a Ruby hash the keys are automatically cast to symbols. You should use hashrockets (<code>=&gt;</code>) instead to get the right output."}, {"owner": {"reputation": 91121, "user_id": 179125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5594142dcc49a24b1902ec8059181f8d?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan Running", "link": "https://stackoverflow.com/users/179125/jordan-running"}, "edited": false, "score": 1, "creation_date": 1491936642, "post_id": 43353709, "comment_id": 73771085, "body": "The body of your block seems both overly clever and needlessly verbose. Why not <code>d,v = h.first; { &quot;date&quot; =&gt; d, &quot;value&quot; =&gt; v }</code>? <a href=\"https://repl.it/HFdC\" rel=\"nofollow noreferrer\">repl.it/HFdC</a>"}], "tags": [], "owner": {"reputation": 711, "user_id": 1516373, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ot7S1.jpg?s=128&g=1", "display_name": "David S.", "link": "https://stackoverflow.com/users/1516373/david-s"}, "is_accepted": false, "score": 0, "last_activity_date": 1491935962, "last_edit_date": 1491935962, "creation_date": 1491935565, "answer_id": 43353709, "question_id": 43353514, "link": "https://stackoverflow.com/questions/43353514/map-key-and-value-in-a-hash-into-2-new-value-with-static-keys/43353709#43353709", "title": "Map key and Value in a hash into 2 new value with static keys", "body": "<p>Just use <code>#map</code> and make a new hash for each element. Map operations are useful when you want to present data that exists in your collection in a different way (as you do in your question).</p>\n\n<pre><code>original = [\n  {\n    \"2017-04-01 00:00:00 UTC\" =&gt; 100.992226272734\n  },\n  {\n    \"2017-03-01 00:00:00 UTC\" =&gt; 3.0594465818934964\n  },\n]\n\nmapped = original.map do |h|\n  Hash[%w(date value).zip(h.keys + h.values)]\nend\n</code></pre>\n\n<p><code>mapped</code> looks like this:</p>\n\n<pre><code>[\n    {\"date\" =&gt; \"2017-04-01 00:00:00 UTC\", \"value\"=&gt;100.992226272734}, \n    {\"date\" =&gt; \"2017-03-01 00:00:00 UTC\", \"value\"=&gt;3.0594465818934964}\n]\n</code></pre>\n\n<p>You should look through the <a href=\"https://ruby-doc.org/core-2.4.1/Enumerable.html\" rel=\"nofollow noreferrer\">Enumerable API</a> to see what other operations you can perform on collections when tasked with similar problems. </p>\n"}, {"comments": [{"owner": {"reputation": 91121, "user_id": 179125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5594142dcc49a24b1902ec8059181f8d?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan Running", "link": "https://stackoverflow.com/users/179125/jordan-running"}, "edited": false, "score": 0, "creation_date": 1491936892, "post_id": 43353947, "comment_id": 73771222, "body": "OP says their data is in JSON format, so probably <code>to_s</code> isn&#39;t necessary."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "reply_to_user": {"reputation": 91121, "user_id": 179125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5594142dcc49a24b1902ec8059181f8d?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan Running", "link": "https://stackoverflow.com/users/179125/jordan-running"}, "edited": false, "score": 0, "creation_date": 1491937508, "post_id": 43353947, "comment_id": 73771562, "body": "@Jordan, what does &quot;JSON&quot; format mean? If the object shown by the OP is an array, I would think the fact that it was obtained by parsing a JSON string is irrelevant. If it&#39;s a string why is it not enclosed in single quotes?  If you suspect I don&#39;t know much about JSON you are correct."}, {"owner": {"reputation": 91121, "user_id": 179125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5594142dcc49a24b1902ec8059181f8d?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan Running", "link": "https://stackoverflow.com/users/179125/jordan-running"}, "edited": false, "score": 1, "creation_date": 1491937922, "post_id": 43353947, "comment_id": 73771803, "body": "OP indicating &quot;json format&quot; led me to guess that the subsequent code block contains JSON-serialized data (a JSON array containing JSON objects, to be specific), not Ruby code. I could be wrong. But if I&#39;m not, and it is JSON and not Ruby code, then calling <code>JSON.parse(text)</code> where <code>text</code> is a String containing that JSON will yield a Ruby Array containing Hashes with String keys and not Symbol keys. But, again, I could be wrong."}], "tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": false, "score": 1, "last_activity_date": 1491982242, "last_edit_date": 1491982242, "creation_date": 1491936437, "answer_id": 43353947, "question_id": 43353514, "link": "https://stackoverflow.com/questions/43353514/map-key-and-value-in-a-hash-into-2-new-value-with-static-keys/43353947#43353947", "title": "Map key and Value in a hash into 2 new value with static keys", "body": "<pre><code>require 'json'\n</code></pre>\n\n<p>Assuming</p>\n\n<pre><code>arr = [{ \"2017-04-01 00:00:00 UTC\": 100.992226272734 },\n       { \"2017-03-01 00:00:00 UTC\": 3.0594465818934964 }]\n</code></pre>\n\n<p>the JSON object (string) is</p>\n\n<pre><code>json = arr.to_json\n  #=&gt; \"[{\\\"2017-04-01 00:00:00 UTC\\\":100.992226272734},\\\n  #     {\\\"2017-03-01 00:00:00 UTC\\\":3.0594465818934964}]\" \n</code></pre>\n\n<p>which we can convert to the desired array of hashes thusly:</p>\n\n<pre><code>JSON.parse(json).map do |g|\n  k, v = g.first\n  { \"date\"=&gt; k, \"value\"=&gt;v }\nend\n  #=&gt; [{\"date\"=&gt;\"2017-04-01 00:00:00 UTC\", \"value\"=&gt;100.992226272734}, \n  #    {\"date\"=&gt;\"2017-03-01 00:00:00 UTC\", \"value\"=&gt;3.0594465818934964}] \n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 1, "creation_date": 1491981844, "post_id": 43356660, "comment_id": 73787632, "body": "To eliminate the requirement of unique dates, consider making the values arrays of floats."}, {"owner": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1491982900, "post_id": 43356660, "comment_id": 73788287, "body": "Good idea, will do!"}], "tags": [], "owner": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "is_accepted": false, "score": 1, "last_activity_date": 1491946849, "last_edit_date": 1495542368, "creation_date": 1491946849, "answer_id": 43356660, "question_id": 43353514, "link": "https://stackoverflow.com/questions/43353514/map-key-and-value-in-a-hash-into-2-new-value-with-static-keys/43356660#43356660", "title": "Map key and Value in a hash into 2 new value with static keys", "body": "<p>If you want to do exactly what you described, I'd say that <a href=\"https://stackoverflow.com/a/43353947/6419007\">@Cary's answer</a> works just fine.</p>\n\n<p>I just would like to add that a slightly different format might be easier and faster to work with (provided <code>date</code> fields are unique). You could just merge every hash together:</p>\n\n<pre><code>require 'json'\n\njson_data = %q([\n  {\n    \"2017-04-01 00:00:00 UTC\": 100.992226272734\n  },\n  {\n    \"2017-03-01 00:00:00 UTC\": 3.0594465818934964\n  }\n])\n\nhashes = JSON.parse(json_data)\ndate_and_values = hashes.inject(&amp;:merge)\n# {\"2017-04-01 00:00:00 UTC\"=&gt;100.992226272734, \"2017-03-01 00:00:00 UTC\"=&gt;3.0594465818934964}\n</code></pre>\n\n<p>All the information is still here, but it's much easier to access :</p>\n\n<pre><code>date_and_values.keys\n# [\"2017-04-01 00:00:00 UTC\", \"2017-03-01 00:00:00 UTC\"]\ndate_and_values.values\n# [100.992226272734, 3.0594465818934964]\ndate_and_values[\"2017-04-01 00:00:00 UTC\"]\n# 100.992226272734\n</code></pre>\n"}], "owner": {"reputation": 31, "user_id": 7840994, "user_type": "registered", "profile_image": "https://graph.facebook.com/1865289370355089/picture?type=large", "display_name": "Ade Anlika Damayanti", "link": "https://stackoverflow.com/users/7840994/ade-anlika-damayanti"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 531, "favorite_count": 0, "answer_count": 3, "score": -1, "last_activity_date": 1494690928, "creation_date": 1491934928, "last_edit_date": 1494690928, "question_id": 43353514, "link": "https://stackoverflow.com/questions/43353514/map-key-and-value-in-a-hash-into-2-new-value-with-static-keys", "title": "Map key and Value in a hash into 2 new value with static keys", "body": "<p>so I  have an array of hashes (json format) that look like this </p>\n\n<pre><code>[\n  {\n    \"2017-04-01 00:00:00 UTC\": 100.992226272734\n  },\n  {\n    \"2017-03-01 00:00:00 UTC\": 3.0594465818934964\n  },\n]\n</code></pre>\n\n<p>now i want to map each key into new value with a static key date:, its came a same way with value, each value has new static key value: , what i mean is those hash now look like :</p>\n\n<pre><code>[\n{\n  \"date\": \"2017-04-01 00:00:00 UTC\",\n  \"value\": 100.992226272734\n},\n{\n \"date\": \"2017-03-01 00:00:00 UTC\",\n  \"value\": 3.0594465818934964\n}\n]\n</code></pre>\n\n<p>can anyone help me show the best way to do that ?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "erb"], "answers": [{"comments": [{"owner": {"reputation": 1740, "user_id": 6749371, "user_type": "registered", "accept_rate": 32, "profile_image": "https://www.gravatar.com/avatar/1fb6335a13491c2ead854c6c24a81771?s=128&d=identicon&r=PG&f=1", "display_name": "J Seabolt", "link": "https://stackoverflow.com/users/6749371/j-seabolt"}, "edited": false, "score": 0, "creation_date": 1491934695, "post_id": 43353350, "comment_id": 73770031, "body": "That&#39;s the answer. I didn&#39;t know that. Thank you!"}], "tags": [], "owner": {"reputation": 147, "user_id": 4614806, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/54d2835d5b68415a048f5899bd0cab57?s=128&d=identicon&r=PG&f=1", "display_name": "Billy Barry", "link": "https://stackoverflow.com/users/4614806/billy-barry"}, "is_accepted": true, "score": 2, "last_activity_date": 1491934363, "creation_date": 1491934363, "answer_id": 43353350, "question_id": 43353243, "link": "https://stackoverflow.com/questions/43353243/routes-on-rails-buttons-dont-work-but-they-do/43353350#43353350", "title": "Routes on Rails buttons don&#39;t work... But they do?", "body": "<p>button_to uses the HTTP POST method by default <a href=\"https://cardoni.net/rails-button-to-vs-link-to-url-helpers/\" rel=\"nofollow noreferrer\">https://cardoni.net/rails-button-to-vs-link-to-url-helpers/</a></p>\n\n<p>What you want is to make your button_to fire a GET request to your route. You do this by specifying a method like so </p>\n\n<pre><code>    &lt;% @beginner.each do |p| %&gt; \n        &lt;%= button_to p.title, post_path(p), method: :get, class: 'sidebar_lesson' %&gt;\n    &lt;% end %&gt;\n</code></pre>\n"}], "owner": {"reputation": 1740, "user_id": 6749371, "user_type": "registered", "accept_rate": 32, "profile_image": "https://www.gravatar.com/avatar/1fb6335a13491c2ead854c6c24a81771?s=128&d=identicon&r=PG&f=1", "display_name": "J Seabolt", "link": "https://stackoverflow.com/users/6749371/j-seabolt"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 40, "favorite_count": 0, "accepted_answer_id": 43353350, "answer_count": 1, "score": 0, "last_activity_date": 1491934363, "creation_date": 1491934035, "last_edit_date": 1491934067, "question_id": 43353243, "link": "https://stackoverflow.com/questions/43353243/routes-on-rails-buttons-dont-work-but-they-do", "title": "Routes on Rails buttons don&#39;t work... But they do?", "body": "<p>I have a very strange problem. I have an accordion menu inside a Rails app. I have a set of links inside the menu that go to respective \"posts.\" This works fine, except I need the area AROUND the link to be clickable, not just the text. So I switched them to buttons. Not rocket science. Everything works except for a strange issue. When I click on the button, I get the routing error page. It says: </p>\n\n<pre><code>No route matches [POST] \"/posts/14\"\n</code></pre>\n\n<p>For the route in the URL: </p>\n\n<pre><code>http://localhost:3000/posts/14\n</code></pre>\n\n<p>Now, what is very, very strange is if I try to resend the URL request... the page loads. It only gets stopped when I use the button. But if I reload the page from the routing error page, I get the post. What??? </p>\n\n<p>Here is a section of my dropdown menu. The first section, \"Beginner,\" is an example of my new button layout. It does not work unless I reload the error page. The second section, \"Strumming\" is the old link layout. It works the way it should: </p>\n\n<pre><code>&lt;button class=\"accordion\"&gt;Beginner&lt;/button&gt; \n&lt;div class=\"panel\"&gt;\n    &lt;% if @beginner.empty? %&gt; \n        &lt;p class=\"sidebar_lesson\"&gt;&lt;i&gt;No lessons available&lt;/i&gt;&lt;/p&gt;\n    &lt;% else %&gt; \n        &lt;% @beginner.each do |p| %&gt; \n            &lt;%= button_to p.title, post_path(p), class: 'sidebar_lesson' %&gt;\n        &lt;% end %&gt;\n    &lt;% end %&gt; \n&lt;/div&gt;\n&lt;button class=\"accordion\"&gt;Strumming&lt;/button&gt;\n    &lt;div class=\"panel\"&gt;\n        &lt;% if @strumming.empty? %&gt; \n            &lt;p class=\"sidebar_lesson\"&gt;&lt;i&gt;No lessons available&lt;/i&gt;&lt;/p&gt;\n        &lt;% else %&gt;\n            &lt;% @strumming.each do |p| %&gt; \n                &lt;p class='sidebar_lesson'&gt;&lt;%= link_to p.title, post_path(p) %&gt;&lt;/p&gt;\n            &lt;% end %&gt;\n        &lt;% end %&gt; \n    &lt;/div&gt;\n</code></pre>\n\n<p>Here are my routes, which include the route I am requesting: </p>\n\n<pre><code>       new_user_session GET    /users/sign_in(.:format)       users/sessions#new\n        user_session POST   /users/sign_in(.:format)       users/sessions#create\ndestroy_user_session DELETE /users/sign_out(.:format)      users/sessions#destroy\n   new_user_password GET    /users/password/new(.:format)  devise/passwords#new\n  edit_user_password GET    /users/password/edit(.:format) devise/passwords#edit\n       user_password PATCH  /users/password(.:format)      devise/passwords#update\n                     PUT    /users/password(.:format)      devise/passwords#update\n                     POST   /users/password(.:format)      devise/passwords#create\ncancel_user_registration GET    /users/cancel(.:format)        devise/registrations#cancel\nnew_user_registration GET    /users/sign_up(.:format)       devise/registrations#new\nedit_user_registration GET    /users/edit(.:format)          devise/registrations#edit\n   user_registration PATCH  /users(.:format)               devise/registrations#update\n                     PUT    /users(.:format)               devise/registrations#update\n                     DELETE /users(.:format)               devise/registrations#destroy\n                     POST   /users(.:format)               devise/registrations#create\n               posts GET    /posts(.:format)               posts#index\n                     POST   /posts(.:format)               posts#create\n            new_post GET    /posts/new(.:format)           posts#new\n           edit_post GET    /posts/:id/edit(.:format)      posts#edit\n                post GET    /posts/:id(.:format)           posts#show\n                     PATCH  /posts/:id(.:format)           posts#update\n                     PUT    /posts/:id(.:format)           posts#update\n                     DELETE /posts/:id(.:format)           posts#destroy\n                root GET    /                              posts#index\n</code></pre>\n\n<p>Can someone let me know what is going on here? I am very confused. </p>\n"}, {"tags": ["json", "ruby", "parsing", "geocode"], "comments": [{"owner": {"reputation": 174, "user_id": 4996615, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a9f2d1a33af3282a81eb8fbf4c1405d3?s=128&d=identicon&r=PG", "display_name": "lilole", "link": "https://stackoverflow.com/users/4996615/lilole"}, "edited": false, "score": 0, "creation_date": 1491938040, "post_id": 43353125, "comment_id": 73771871, "body": "Your code looks ok, but it&#39;s impossible to figure out what is blowing up the <code>JSON.parse</code> without seeing the actual JSON. What does the <code>add</code> variable contain?"}, {"owner": {"reputation": 174, "user_id": 4996615, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a9f2d1a33af3282a81eb8fbf4c1405d3?s=128&d=identicon&r=PG", "display_name": "lilole", "link": "https://stackoverflow.com/users/4996615/lilole"}, "edited": false, "score": 0, "creation_date": 1491938154, "post_id": 43353125, "comment_id": 73771939, "body": "You probably should remove your API key from the code sample.  :)"}, {"owner": {"reputation": 1485, "user_id": 5388516, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/96fff619864c3ebb7654eb98bd945b43?s=128&d=identicon&r=PG&f=1", "display_name": "13aal", "link": "https://stackoverflow.com/users/5388516/13aal"}, "edited": false, "score": 0, "creation_date": 1491938521, "post_id": 43353125, "comment_id": 73772157, "body": "You could use the GeoIPCountry CSV file, instead <a href=\"https://raw.githubusercontent.com/WhitewidowScanner/whitewidow/master/lib/lists/GeoIPCountry.csv\" rel=\"nofollow noreferrer\">here</a>"}, {"owner": {"reputation": 174, "user_id": 4996615, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a9f2d1a33af3282a81eb8fbf4c1405d3?s=128&d=identicon&r=PG", "display_name": "lilole", "link": "https://stackoverflow.com/users/4996615/lilole"}, "edited": false, "score": 0, "creation_date": 1491940358, "post_id": 43353125, "comment_id": 73773203, "body": "Be sure that the <code>add</code> variable is a <code>String</code>, if it&#39;s meant to be parsable JSON. If <code>add</code> is a <code>Hash</code> that won&#39;t parse as JSON."}], "owner": {"reputation": 1, "user_id": 960105, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/29031bc90fc01e3b09cdc1fdc404bc80?s=128&d=identicon&r=PG", "display_name": "Bryan Wilber", "link": "https://stackoverflow.com/users/960105/bryan-wilber"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 93, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1491938989, "creation_date": 1491933587, "last_edit_date": 1491938989, "question_id": 43353125, "link": "https://stackoverflow.com/questions/43353125/parse-geocodioaddress", "title": "Parse Geocodio::Address", "body": "<p>I'm using ruby and the geocodio gem to do some reverse geocoding.  The reverse geocoder returns an object of type  Geocodio::Address which per their website is JSON.  I'm trying to use ruby JSON:parse to convert to a hash that I can them map as needed.</p>\n\n<p>JSON parse returns this error...</p>\n\n<p>C:/Ruby23-x64/lib/ruby/2.3.0/json/common.rb:156:in <code>parse': 784: unexpected token at '\"Saipan, MP 96950\"' (J\n        from C:/Ruby23-x64/lib/ruby/2.3.0/json/common.rb:156:in</code>parse'</p>\n\n<p>Here's my whole script</p>\n\n<pre><code>        require 'geocodio'\n    require 'CSV'\n    require 'json'\n\n    filename = './for_fips.csv'\n    #fipslist = []\n    geocodio = Geocodio::Client.new('not real...d5a1557e2175d8ce265')\n    i = 1\n    CSV.foreach(filename) do |row|\n      lat = row[1]\n      long = row[2]\n      coord = lat + \",\" + long\n      #puts coord\n      add = geocodio.reverse_geocode([lat + \",\" + long],fields: %w[cd stateleg school timezone]).best\n      add_parsed = JSON.parse(add)\n      pp add_parsed\n      #puts add.each { |k,v| \"#{k}=#{v}\"}.join('~~')\n      i +=1\n      if i &gt; 2 then break end\n      #fipslist &lt;&lt; fcc.district_fips\n    end\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "git", "heroku"], "comments": [{"owner": {"reputation": 3521, "user_id": 2521680, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/6D935.jpg?s=128&g=1", "display_name": "Rockwell Rice", "link": "https://stackoverflow.com/users/2521680/rockwell-rice"}, "edited": false, "score": 0, "creation_date": 1491933630, "post_id": 43353123, "comment_id": 73769392, "body": "Do you have the env variables set in heroku?  I get this behavior when I try to push before the env variables are set up in heroku."}, {"owner": {"reputation": 3307, "user_id": 2266827, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/Frcc8.png?s=128&g=1", "display_name": "jeffdill2", "link": "https://stackoverflow.com/users/2266827/jeffdill2"}, "edited": false, "score": 0, "creation_date": 1491933715, "post_id": 43353123, "comment_id": 73769441, "body": "Fails how? What error is occurring?"}, {"owner": {"reputation": 75, "user_id": 7766852, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/712d28f9e15cfce0a107f30f696892c3?s=128&d=identicon&r=PG&f=1", "display_name": "Owen", "link": "https://stackoverflow.com/users/7766852/owen"}, "reply_to_user": {"reputation": 3307, "user_id": 2266827, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/Frcc8.png?s=128&g=1", "display_name": "jeffdill2", "link": "https://stackoverflow.com/users/2266827/jeffdill2"}, "edited": false, "score": 0, "creation_date": 1491934189, "post_id": 43353123, "comment_id": 73769717, "body": "@jeffdill2. The error says &quot;build failed&quot;"}, {"owner": {"reputation": 3307, "user_id": 2266827, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/Frcc8.png?s=128&g=1", "display_name": "jeffdill2", "link": "https://stackoverflow.com/users/2266827/jeffdill2"}, "edited": false, "score": 0, "creation_date": 1491934254, "post_id": 43353123, "comment_id": 73769757, "body": "@Owen that&#39;s it? There&#39;s no backtrace? Your command line just says &quot;build failed&quot;?"}, {"owner": {"reputation": 75, "user_id": 7766852, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/712d28f9e15cfce0a107f30f696892c3?s=128&d=identicon&r=PG&f=1", "display_name": "Owen", "link": "https://stackoverflow.com/users/7766852/owen"}, "reply_to_user": {"reputation": 3521, "user_id": 2521680, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/6D935.jpg?s=128&g=1", "display_name": "Rockwell Rice", "link": "https://stackoverflow.com/users/2521680/rockwell-rice"}, "edited": false, "score": 0, "creation_date": 1491934278, "post_id": 43353123, "comment_id": 73769771, "body": "@Rockwell Rice.  what are env variables and how do i set them? i have not had to do this before. the error seems to be related to this specific code that i added."}, {"owner": {"reputation": 75, "user_id": 7766852, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/712d28f9e15cfce0a107f30f696892c3?s=128&d=identicon&r=PG&f=1", "display_name": "Owen", "link": "https://stackoverflow.com/users/7766852/owen"}, "reply_to_user": {"reputation": 3307, "user_id": 2266827, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/Frcc8.png?s=128&g=1", "display_name": "jeffdill2", "link": "https://stackoverflow.com/users/2266827/jeffdill2"}, "edited": false, "score": 0, "creation_date": 1491934387, "post_id": 43353123, "comment_id": 73769833, "body": "@jeffdill2. yes just says &quot;build failed&quot; on th eheroku website. i will add the build log."}, {"owner": {"reputation": 3307, "user_id": 2266827, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/Frcc8.png?s=128&g=1", "display_name": "jeffdill2", "link": "https://stackoverflow.com/users/2266827/jeffdill2"}, "edited": false, "score": 0, "creation_date": 1491934410, "post_id": 43353123, "comment_id": 73769846, "body": "@Owen :thumbsup: \u2013 the build log is what we&#39;re looking for."}, {"owner": {"reputation": 3521, "user_id": 2521680, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/6D935.jpg?s=128&g=1", "display_name": "Rockwell Rice", "link": "https://stackoverflow.com/users/2521680/rockwell-rice"}, "edited": false, "score": 0, "creation_date": 1491934425, "post_id": 43353123, "comment_id": 73769859, "body": "you can do it in your heroku dashboard or the terminal.  To do it from dashboard go to you heroku.com account, click on the application, click on &quot;settings&quot;, click the button that says &quot;reveal config vars&quot; and then enter in the env variables, so &quot;SENDGRID_USERNAME&quot; and &quot;SENDGRID_PASSWORD&quot; with the values entered into the field after them."}, {"owner": {"reputation": 3521, "user_id": 2521680, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/6D935.jpg?s=128&g=1", "display_name": "Rockwell Rice", "link": "https://stackoverflow.com/users/2521680/rockwell-rice"}, "edited": false, "score": 0, "creation_date": 1491934488, "post_id": 43353123, "comment_id": 73769899, "body": "Looks like your app is failing because you have a syntax error in that file as well."}, {"owner": {"reputation": 3307, "user_id": 2266827, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/Frcc8.png?s=128&g=1", "display_name": "jeffdill2", "link": "https://stackoverflow.com/users/2266827/jeffdill2"}, "edited": false, "score": 0, "creation_date": 1491934562, "post_id": 43353123, "comment_id": 73769949, "body": "@Owen that backtrace tells you where you&#39;re having an issue \u2013 <code>SyntaxError: &#47;tmp&#47;build_5cbe4a41cfc117d8718d04c4287ffbda&#47;config&#47;environme&zwnj;&#8203;nts&#47;production.rb:10&zwnj;&#8203;0: syntax error, unexpected end-of-input, expecting keyword_end</code>. Line 100 of your <code>production.rb</code> file."}, {"owner": {"reputation": 75, "user_id": 7766852, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/712d28f9e15cfce0a107f30f696892c3?s=128&d=identicon&r=PG&f=1", "display_name": "Owen", "link": "https://stackoverflow.com/users/7766852/owen"}, "reply_to_user": {"reputation": 3521, "user_id": 2521680, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/6D935.jpg?s=128&g=1", "display_name": "Rockwell Rice", "link": "https://stackoverflow.com/users/2521680/rockwell-rice"}, "edited": false, "score": 0, "creation_date": 1491934589, "post_id": 43353123, "comment_id": 73769966, "body": "@Rockwell Rice.  &quot;SENDGRID_USERNAME&quot; and &quot;SENDGRID_PASSWORD&quot; already exist in the config vars."}, {"owner": {"reputation": 3521, "user_id": 2521680, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/6D935.jpg?s=128&g=1", "display_name": "Rockwell Rice", "link": "https://stackoverflow.com/users/2521680/rockwell-rice"}, "reply_to_user": {"reputation": 3307, "user_id": 2266827, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/Frcc8.png?s=128&g=1", "display_name": "jeffdill2", "link": "https://stackoverflow.com/users/2266827/jeffdill2"}, "edited": false, "score": 0, "creation_date": 1491934641, "post_id": 43353123, "comment_id": 73769991, "body": "Should be good to go then, look at @jeffdill2 &#39;s comment."}, {"owner": {"reputation": 75, "user_id": 7766852, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/712d28f9e15cfce0a107f30f696892c3?s=128&d=identicon&r=PG&f=1", "display_name": "Owen", "link": "https://stackoverflow.com/users/7766852/owen"}, "reply_to_user": {"reputation": 3307, "user_id": 2266827, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/Frcc8.png?s=128&g=1", "display_name": "jeffdill2", "link": "https://stackoverflow.com/users/2266827/jeffdill2"}, "edited": false, "score": 0, "creation_date": 1491934705, "post_id": 43353123, "comment_id": 73770036, "body": "@jeffdill2. my production.rb file only goes up to line 99.  the last line of the production.rb file is &quot;config.active_record.dump_schema_after_migration = false&quot;.  I didnt write this line it was there by default."}, {"owner": {"reputation": 3307, "user_id": 2266827, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/Frcc8.png?s=128&g=1", "display_name": "jeffdill2", "link": "https://stackoverflow.com/users/2266827/jeffdill2"}, "edited": false, "score": 1, "creation_date": 1491934770, "post_id": 43353123, "comment_id": 73770080, "body": "@Owen if <code>config.active_record.dump_schema_after_migration = false</code> is the last line of your <code>production.rb</code> file, then you&#39;re missing an <code>end</code>. i.e. line 100 should be <code>end</code>."}, {"owner": {"reputation": 75, "user_id": 7766852, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/712d28f9e15cfce0a107f30f696892c3?s=128&d=identicon&r=PG&f=1", "display_name": "Owen", "link": "https://stackoverflow.com/users/7766852/owen"}, "edited": false, "score": 0, "creation_date": 1491935647, "post_id": 43353123, "comment_id": 73770556, "body": "I added the &quot;end&quot; at the end. i am still getting the same error. any ideas?"}, {"owner": {"reputation": 499, "user_id": 5636930, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-L0BF3IxhZYw/AAAAAAAAAAI/AAAAAAAAAPM/RAOVvQpPSEA/photo.jpg?sz=128", "display_name": "amrrbakry", "link": "https://stackoverflow.com/users/5636930/amrrbakry"}, "edited": false, "score": 0, "creation_date": 1491936182, "post_id": 43353123, "comment_id": 73770867, "body": "@Owen make sure you commit your changes (adding the missing <code>end</code>) before pushing to heroku."}], "answers": [{"comments": [{"owner": {"reputation": 75, "user_id": 7766852, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/712d28f9e15cfce0a107f30f696892c3?s=128&d=identicon&r=PG&f=1", "display_name": "Owen", "link": "https://stackoverflow.com/users/7766852/owen"}, "edited": false, "score": 0, "creation_date": 1491936538, "post_id": 43353837, "comment_id": 73771035, "body": "i tried this and the error is still the same. except it says line 98"}, {"owner": {"reputation": 499, "user_id": 5636930, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-L0BF3IxhZYw/AAAAAAAAAAI/AAAAAAAAAPM/RAOVvQpPSEA/photo.jpg?sz=128", "display_name": "amrrbakry", "link": "https://stackoverflow.com/users/5636930/amrrbakry"}, "reply_to_user": {"reputation": 75, "user_id": 7766852, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/712d28f9e15cfce0a107f30f696892c3?s=128&d=identicon&r=PG&f=1", "display_name": "Owen", "link": "https://stackoverflow.com/users/7766852/owen"}, "edited": false, "score": 0, "creation_date": 1491937180, "post_id": 43353837, "comment_id": 73771391, "body": "I think you have to remove the <code>end</code> on line 12 (after SendGrid config {}) because it&#39;s not supposed to be there then commit and push."}, {"owner": {"reputation": 75, "user_id": 7766852, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/712d28f9e15cfce0a107f30f696892c3?s=128&d=identicon&r=PG&f=1", "display_name": "Owen", "link": "https://stackoverflow.com/users/7766852/owen"}, "edited": false, "score": 0, "creation_date": 1491937484, "post_id": 43353837, "comment_id": 73771548, "body": "i removed the end from line 12 and still get the same error"}, {"owner": {"reputation": 499, "user_id": 5636930, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-L0BF3IxhZYw/AAAAAAAAAAI/AAAAAAAAAPM/RAOVvQpPSEA/photo.jpg?sz=128", "display_name": "amrrbakry", "link": "https://stackoverflow.com/users/5636930/amrrbakry"}, "reply_to_user": {"reputation": 75, "user_id": 7766852, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/712d28f9e15cfce0a107f30f696892c3?s=128&d=identicon&r=PG&f=1", "display_name": "Owen", "link": "https://stackoverflow.com/users/7766852/owen"}, "edited": false, "score": 0, "creation_date": 1491937726, "post_id": 43353837, "comment_id": 73771681, "body": "did you stage and commit all changes? if so, please add how your <code>production.rb</code> looks right now"}, {"owner": {"reputation": 75, "user_id": 7766852, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/712d28f9e15cfce0a107f30f696892c3?s=128&d=identicon&r=PG&f=1", "display_name": "Owen", "link": "https://stackoverflow.com/users/7766852/owen"}, "edited": false, "score": 0, "creation_date": 1491939366, "post_id": 43353837, "comment_id": 73772667, "body": "see production.rb in edited post. yes i did git add . then git push orgin master then git push heroku master"}, {"owner": {"reputation": 499, "user_id": 5636930, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-L0BF3IxhZYw/AAAAAAAAAAI/AAAAAAAAAPM/RAOVvQpPSEA/photo.jpg?sz=128", "display_name": "amrrbakry", "link": "https://stackoverflow.com/users/5636930/amrrbakry"}, "reply_to_user": {"reputation": 75, "user_id": 7766852, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/712d28f9e15cfce0a107f30f696892c3?s=128&d=identicon&r=PG&f=1", "display_name": "Owen", "link": "https://stackoverflow.com/users/7766852/owen"}, "edited": false, "score": 0, "creation_date": 1491939997, "post_id": 43353837, "comment_id": 73773005, "body": "<code>production.rb</code> looks good. you&#39;re still getting the same error (missing keyword end)? maybe you should set up sengrid env variables in heroku as @Rockwell Rice suggested"}, {"owner": {"reputation": 7414, "user_id": 680847, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/BxPxN.jpg?s=128&g=1", "display_name": "stephen.hanson", "link": "https://stackoverflow.com/users/680847/stephen-hanson"}, "reply_to_user": {"reputation": 75, "user_id": 7766852, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/712d28f9e15cfce0a107f30f696892c3?s=128&d=identicon&r=PG&f=1", "display_name": "Owen", "link": "https://stackoverflow.com/users/7766852/owen"}, "edited": false, "score": 1, "creation_date": 1491940512, "post_id": 43353837, "comment_id": 73773272, "body": "@Owen you need to commit after running <code>git add .</code>. Eg. <code>git commit -m &quot;Fix production.rb&quot;</code>. Then run <code>git push heroku master</code>."}, {"owner": {"reputation": 75, "user_id": 7766852, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/712d28f9e15cfce0a107f30f696892c3?s=128&d=identicon&r=PG&f=1", "display_name": "Owen", "link": "https://stackoverflow.com/users/7766852/owen"}, "edited": false, "score": 0, "creation_date": 1491945178, "post_id": 43353837, "comment_id": 73775760, "body": "i did add then commit then push"}, {"owner": {"reputation": 75, "user_id": 7766852, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/712d28f9e15cfce0a107f30f696892c3?s=128&d=identicon&r=PG&f=1", "display_name": "Owen", "link": "https://stackoverflow.com/users/7766852/owen"}, "edited": false, "score": 0, "creation_date": 1491986847, "post_id": 43353837, "comment_id": 73790853, "body": "@why is it still telling me to put &quot;2nd&quot; in line 98?  what is the end for? i see no need for another &quot;end&quot;."}, {"owner": {"reputation": 499, "user_id": 5636930, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-L0BF3IxhZYw/AAAAAAAAAAI/AAAAAAAAAPM/RAOVvQpPSEA/photo.jpg?sz=128", "display_name": "amrrbakry", "link": "https://stackoverflow.com/users/5636930/amrrbakry"}, "edited": false, "score": 0, "creation_date": 1492001862, "post_id": 43353837, "comment_id": 73802160, "body": "Do you have your code in a GitHub repo? I want to take a look at the changes"}], "tags": [], "owner": {"reputation": 499, "user_id": 5636930, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-L0BF3IxhZYw/AAAAAAAAAAI/AAAAAAAAAPM/RAOVvQpPSEA/photo.jpg?sz=128", "display_name": "amrrbakry", "link": "https://stackoverflow.com/users/5636930/amrrbakry"}, "is_accepted": false, "score": 0, "last_activity_date": 1491936003, "creation_date": 1491936003, "answer_id": 43353837, "question_id": 43353123, "link": "https://stackoverflow.com/questions/43353123/why-is-my-rails-site-failing-to-push-to-heroku/43353837#43353837", "title": "Why is my Rails site failing to push to Heroku?", "body": "<blockquote>\n  <p>Running: rake assets:precompile</p>\n  \n  <p>rake aborted!</p>\n  \n  <p>SyntaxError:\n  /tmp/build_5cbe4a41cfc117d8718d04c4287ffbda/config/environments/production.rb:100:\n  syntax error, unexpected end-of-input, expecting keyword_end</p>\n</blockquote>\n\n<p>The error message states that there's a missing <code>end</code> keyword on line 100 in your <code>production.rb</code> file. Add that, commit changes, then push again.</p>\n"}], "owner": {"reputation": 75, "user_id": 7766852, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/712d28f9e15cfce0a107f30f696892c3?s=128&d=identicon&r=PG&f=1", "display_name": "Owen", "link": "https://stackoverflow.com/users/7766852/owen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 72, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1491939218, "creation_date": 1491933580, "last_edit_date": 1491939218, "question_id": 43353123, "link": "https://stackoverflow.com/questions/43353123/why-is-my-rails-site-failing-to-push-to-heroku", "title": "Why is my Rails site failing to push to Heroku?", "body": "<p>I have a Rails site which previously deployed without a problem to Heroku.  It worked fine until I added the following code to the <code>production.rb</code> file in order to make SendGrid work correctly.</p>\n\n<pre><code>Rails.application.configure do\n  ActionMailer::Base.smtp_settings = {\n    :address        =&gt; 'smtp.sendgrid.net',\n    :port           =&gt; '587',\n    :authentication =&gt; :plain,\n    :user_name      =&gt; ENV['SENDGRID_USERNAME'],\n    :password       =&gt; ENV['SENDGRID_PASSWORD'],\n    :domain         =&gt; 'heroku.com',\n    :enable_starttls_auto =&gt; true\n  }\nend\n</code></pre>\n\n<p>When I add this code the <code>git push heroku master</code> fails to push to Heroku.<br>\nHowever, the <code>git push origin master</code> works fine.  What could possibly be going wrong?</p>\n\n<hr>\n\n<p>Here is the build log from Heroku:</p>\n\n<pre><code>  Rails.application.configure do\n\n    ActionMailer::Base.smtp_settings = {\n      :address        =&gt; 'smtp.sendgrid.net',\n      :port           =&gt; '587',\n      :authentication =&gt; :plain,\n      :user_name      =&gt; ENV['SENDGRID_USERNAME'],\n      :password       =&gt; ENV['SENDGRID_PASSWORD'],\n      :domain         =&gt; 'heroku.com',\n      :enable_starttls_auto =&gt; true\n      }\n    end\n      # more code here\n\n  # Settings specified here will take precedence over those in config/application.rb.\n\n  # Code is not reloaded between requests.\n  config.cache_classes = true\n\n  # Eager load code on boot. This eager loads most of Rails and\n  # your application in memory, allowing both threaded web servers\n  # and those relying on copy on write to perform better.\n  # Rake tasks automatically ignore this option for performance.\n  config.eager_load = true\n\n  # Full error reports are disabled and caching is turned on.\n  config.consider_all_requests_local       = false\n  config.action_controller.perform_caching = true\n\n  # Disable serving static files from the `/public` folder by default since\n  # Apache or NGINX already handles this.\n  config.public_file_server.enabled = ENV['RAILS_SERVE_STATIC_FILES'].present?\n\n  # Compress JavaScripts and CSS.\n  config.assets.js_compressor = :uglifier\n  # config.assets.css_compressor = :sass\n\n  # Do not fallback to assets pipeline if a precompiled asset is missed.\n  config.assets.compile = false\n\n  # `config.assets.precompile` and `config.assets.version` have moved to config/initializers/assets.rb\n\n  # Enable serving of images, stylesheets, and JavaScripts from an asset server.\n  # config.action_controller.asset_host = 'http://assets.example.com'\n\n  # Specifies the header that your server uses for sending files.\n  # config.action_dispatch.x_sendfile_header = 'X-Sendfile' # for Apache\n  # config.action_dispatch.x_sendfile_header = 'X-Accel-Redirect' # for NGINX\n\n  # Mount Action Cable outside main process or domain\n  # config.action_cable.mount_path = nil\n  # config.action_cable.url = 'wss://example.com/cable'\n  # config.action_cable.allowed_request_origins = [ 'http://example.com', /http:\\/\\/example.*/ ]\n\n  # Force all access to the app over SSL, use Strict-Transport-Security, and use secure cookies.\n  # config.force_ssl = true\n\n  # Use the lowest log level to ensure availability of diagnostic information\n  # when problems arise.\n  config.log_level = :debug\n\n  # Prepend all log lines with the following tags.\n  config.log_tags = [ :request_id ]\n\n  # Use a different cache store in production.\n  # config.cache_store = :mem_cache_store\n\n  # Use a real queuing backend for Active Job (and separate queues per environment)\n  # config.active_job.queue_adapter     = :resque\n  # config.active_job.queue_name_prefix = \"AcuSimonv_#{Rails.env}\"\n  config.action_mailer.perform_caching = false\n\n  # Ignore bad email addresses and do not raise email delivery errors.\n  # Set this to true and configure the email server for immediate delivery to raise delivery errors.\n  # config.action_mailer.raise_delivery_errors = false\n\n  # Enable locale fallbacks for I18n (makes lookups for any locale fall back to\n  # the I18n.default_locale when a translation cannot be found).\n  config.i18n.fallbacks = true\n\n  # Send deprecation notices to registered listeners.\n  config.active_support.deprecation = :notify\n\n  # Use default logging formatter so that PID and timestamp are not suppressed.\n  config.log_formatter = ::Logger::Formatter.new\n\n  # Use a different logger for distributed setups.\n  # require 'syslog/logger'\n  # config.logger = ActiveSupport::TaggedLogging.new(Syslog::Logger.new 'app-name')\n\n  if ENV[\"RAILS_LOG_TO_STDOUT\"].present?\n    logger           = ActiveSupport::Logger.new(STDOUT)\n    logger.formatter = config.log_formatter\n    config.logger = ActiveSupport::TaggedLogging.new(logger)\n  end\n\n  # Do not dump schema after migrations.\n  config.active_record.dump_schema_after_migration = false\nend\n\n\n\nEDIT: production.rb file below\n\n\n    Rails.application.configure do\n\n    ActionMailer::Base.smtp_settings = {\n      :address        =&gt; 'smtp.sendgrid.net',\n      :port           =&gt; '587',\n      :authentication =&gt; :plain,\n      :user_name      =&gt; ENV['SENDGRID_USERNAME'],\n      :password       =&gt; ENV['SENDGRID_PASSWORD'],\n      :domain         =&gt; 'heroku.com',\n      :enable_starttls_auto =&gt; true\n      }\n\n\n\n  # Settings specified here will take precedence over those in config/application.rb.\n\n  # Code is not reloaded between requests.\n  config.cache_classes = true\n\n  # Eager load code on boot. This eager loads most of Rails and\n  # your application in memory, allowing both threaded web servers\n  # and those relying on copy on write to perform better.\n  # Rake tasks automatically ignore this option for performance.\n  config.eager_load = true\n\n  # Full error reports are disabled and caching is turned on.\n  config.consider_all_requests_local       = false\n  config.action_controller.perform_caching = true\n\n  # Disable serving static files from the `/public` folder by default since\n  # Apache or NGINX already handles this.\n  config.public_file_server.enabled = ENV['RAILS_SERVE_STATIC_FILES'].present?\n\n  # Compress JavaScripts and CSS.\n  config.assets.js_compressor = :uglifier\n  # config.assets.css_compressor = :sass\n\n  # Do not fallback to assets pipeline if a precompiled asset is missed.\n  config.assets.compile = false\n\n  # `config.assets.precompile` and `config.assets.version` have moved to config/initializers/assets.rb\n\n  # Enable serving of images, stylesheets, and JavaScripts from an asset server.\n  # config.action_controller.asset_host = 'http://assets.example.com'\n\n  # Specifies the header that your server uses for sending files.\n  # config.action_dispatch.x_sendfile_header = 'X-Sendfile' # for Apache\n  # config.action_dispatch.x_sendfile_header = 'X-Accel-Redirect' # for NGINX\n\n  # Mount Action Cable outside main process or domain\n  # config.action_cable.mount_path = nil\n  # config.action_cable.url = 'wss://example.com/cable'\n  # config.action_cable.allowed_request_origins = [ 'http://example.com', /http:\\/\\/example.*/ ]\n\n  # Force all access to the app over SSL, use Strict-Transport-Security, and use secure cookies.\n  # config.force_ssl = true\n\n  # Use the lowest log level to ensure availability of diagnostic information\n  # when problems arise.\n  config.log_level = :debug\n\n  # Prepend all log lines with the following tags.\n  config.log_tags = [ :request_id ]\n\n  # Use a different cache store in production.\n  # config.cache_store = :mem_cache_store\n\n  # Use a real queuing backend for Active Job (and separate queues per environment)\n  # config.active_job.queue_adapter     = :resque\n  # config.active_job.queue_name_prefix = \"AcuSimonv_#{Rails.env}\"\n  config.action_mailer.perform_caching = false\n\n  # Ignore bad email addresses and do not raise email delivery errors.\n  # Set this to true and configure the email server for immediate delivery to     raise delivery errors.\n  # config.action_mailer.raise_delivery_errors = false\n\n  # Enable locale fallbacks for I18n (makes lookups for any locale fall back to\n  # the I18n.default_locale when a translation cannot be found).\n  config.i18n.fallbacks = true\n\n  # Send deprecation notices to registered listeners.\n  config.active_support.deprecation = :notify\n\n  # Use default logging formatter so that PID and timestamp are not suppressed.\n  config.log_formatter = ::Logger::Formatter.new\n\n  # Use a different logger for distributed setups.\n  # require 'syslog/logger'\n  # config.logger = ActiveSupport::TaggedLogging.new(Syslog::Logger.new 'app-name')\n\n  if ENV[\"RAILS_LOG_TO_STDOUT\"].present?\n    logger           = ActiveSupport::Logger.new(STDOUT)\n    logger.formatter = config.log_formatter\n    config.logger = ActiveSupport::TaggedLogging.new(logger)\n  end\n\n  # Do not dump schema after migrations.\n  config.active_record.dump_schema_after_migration = false\n    end\n</code></pre>\n"}, {"tags": ["ruby", "sinatra"], "comments": [{"owner": {"reputation": 16402, "user_id": 4025095, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/blJ4L.jpg?s=128&g=1", "display_name": "Myst", "link": "https://stackoverflow.com/users/4025095/myst"}, "edited": false, "score": 1, "creation_date": 1493348302, "post_id": 43352910, "comment_id": 74388907, "body": "I would consider the size of the uploads, server limitations and application responsiveness... for example, multiple small uploads can probably use <code>XMLHttpRequest </code> and it&#39;s <code>progress</code> event to indicate upload state, while you might consider a web socket solution to handle very large uploads, allowing uploads to resume after connection interruptions (without restarting the upload). Also, your server has a limited amount of memory and CPU... some Ruby servers might cause DoS or resource starvation when large files are uploaded while others (i.e. <code>iodine</code>) offer preemptive upload size limits."}, {"owner": {"reputation": 35, "user_id": 6718452, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4dc2fa2cf3f3d9e349930d69f0cfd1c4?s=128&d=identicon&r=PG&f=1", "display_name": "Mary P.", "link": "https://stackoverflow.com/users/6718452/mary-p"}, "reply_to_user": {"reputation": 16402, "user_id": 4025095, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/blJ4L.jpg?s=128&g=1", "display_name": "Myst", "link": "https://stackoverflow.com/users/4025095/myst"}, "edited": false, "score": 0, "creation_date": 1493676664, "post_id": 43352910, "comment_id": 74498250, "body": "@Myst Thanks for the suggestion, I&#39;m adding code on client side and server side to restrict files to 10 MB or less, the files being uploaded need to be emailed as well."}, {"owner": {"reputation": 16402, "user_id": 4025095, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/blJ4L.jpg?s=128&g=1", "display_name": "Myst", "link": "https://stackoverflow.com/users/4025095/myst"}, "edited": false, "score": 0, "creation_date": 1493680842, "post_id": 43352910, "comment_id": 74499510, "body": "Sure, you&#39;re welcome. Good luck :-) ... as a last note, I would consider that by the time the HTTP parser is done and Rack already holds the request data, the question of checking the upload file limits might be a bit too late. On the server side I would consider implementing the limit using the proxy layer (i.e. <code>nginx</code>/<code>apache</code> settings), or by using server settings where supported - <a href=\"http://stackoverflow.com/questions/2200188/rails-file-upload-size-limit\">see here</a>."}, {"owner": {"reputation": 35, "user_id": 6718452, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4dc2fa2cf3f3d9e349930d69f0cfd1c4?s=128&d=identicon&r=PG&f=1", "display_name": "Mary P.", "link": "https://stackoverflow.com/users/6718452/mary-p"}, "reply_to_user": {"reputation": 16402, "user_id": 4025095, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/blJ4L.jpg?s=128&g=1", "display_name": "Myst", "link": "https://stackoverflow.com/users/4025095/myst"}, "edited": false, "score": 0, "creation_date": 1493820608, "post_id": 43352910, "comment_id": 74566143, "body": "@Myst Appreciate all of your suggestions! I&#39;m working on implementing as many client side restrictions as I can to keep users from uploading files over 10MB as well as restricting file type. No matter the file, as soon as it&#39;s emailed I&#39;m removing the file from the server as well. I&#39;m using nginx and I&#39;m setting the client_max_body_size in my conf files."}], "answers": [{"tags": [], "owner": {"reputation": 154, "user_id": 7887886, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/fef2abd4b1a921dd0e1ebbac5ee36dda?s=128&d=identicon&r=PG&f=1", "display_name": "zzero", "link": "https://stackoverflow.com/users/7887886/zzero"}, "is_accepted": true, "score": 2, "last_activity_date": 1510230023, "last_edit_date": 1510230023, "creation_date": 1493346364, "answer_id": 43670961, "question_id": 43352910, "link": "https://stackoverflow.com/questions/43352910/multiple-file-upload-with-ruby-sinatra/43670961#43670961", "title": "Multiple file upload with ruby &amp; sinatra", "body": "<p>this is my solution</p>\n\n<pre><code>puts params['images'].map{ |f| f[:filename] }.join(\";\")\nk = params['images'].map{ |f| f[:filename] }.join(\";\")\n$param = k.chomp.split(\";\")\narray_length = $param.length       # or $param.size\narray_lengthx = array_length - 1\nputs \"length of $param is : #{array_length}\"\n\ni = 0\ni = i - 1\nputs array_lengthx\nputs i\nwhile i.to_i &lt; array_lengthx do\n  i =i+1\n  puts i\n  @filename = params[:images][i][:filename]\n  file = params[:images][i][:tempfile]\n  path = \"/home/user/Descargas/sinatra_ajax-master/#{@filename}\"\n  File.open(\"/home/user/Descargas/sinatra_ajax-master/#{@filename}\", 'wb') do |f|\n    f.write file.read\n  end\nend\n</code></pre>\n\n<p>this is html code:</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>&lt;form action=\"/upload2\" method=\"post\" enctype=\"multipart/form-data\"&gt;\r\n  &lt;input type=\"file\" name=\"images[]\" multiple /&gt;\r\n  &lt;input type=\"submit\" /&gt;\r\n&lt;/form&gt;</code></pre>\r\n</div>\r\n</div>\r\n</p>\n"}], "owner": {"reputation": 35, "user_id": 6718452, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4dc2fa2cf3f3d9e349930d69f0cfd1c4?s=128&d=identicon&r=PG&f=1", "display_name": "Mary P.", "link": "https://stackoverflow.com/users/6718452/mary-p"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 796, "favorite_count": 1, "accepted_answer_id": 43670961, "answer_count": 1, "score": 2, "last_activity_date": 1510230023, "creation_date": 1491932817, "question_id": 43352910, "link": "https://stackoverflow.com/questions/43352910/multiple-file-upload-with-ruby-sinatra", "title": "Multiple file upload with ruby &amp; sinatra", "body": "<p>I'm using the following code to upload a single file through a form:</p>\n\n<p>app.rb</p>\n\n<pre><code>@filename = params[:file][:filename]\nfile = params[:file][:tempfile]\n\nFile.open(\"./public/#{@filename}\", 'wb') do |f|\n f.write(file.read)\nend\n</code></pre>\n\n<p>string_file.erb:</p>\n\n<pre><code>&lt;input type='file' class='form-control' id='&lt;%= array['id'] %&gt;'name='file[]' value='&lt;%= default_value %&gt;' &lt;%= constraints %&gt; style=\"display: none;\" multiple&gt;\n</code></pre>\n\n<p>How do I loop through to write multiple files to the filesystem?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "macos", "openssl"], "comments": [{"owner": {"reputation": 4243, "user_id": 4638378, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/pGqPN.png?s=128&g=1", "display_name": "Brian", "link": "https://stackoverflow.com/users/4638378/brian"}, "edited": false, "score": 0, "creation_date": 1491933597, "post_id": 43352788, "comment_id": 73769373, "body": "A quick search of the interwebs suggests a fix: <a href=\"https://gist.github.com/kendagriff/adec3713b4dfe6a1abdf\" rel=\"nofollow noreferrer\">gist.github.com/kendagriff/adec3713b4dfe6a1abdf</a>"}, {"owner": {"reputation": 1033, "user_id": 1775716, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/7d7cfafc64f5bda01194708412fc5f97?s=128&d=identicon&r=PG&f=1", "display_name": "Michael P.", "link": "https://stackoverflow.com/users/1775716/michael-p"}, "reply_to_user": {"reputation": 4243, "user_id": 4638378, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/pGqPN.png?s=128&g=1", "display_name": "Brian", "link": "https://stackoverflow.com/users/4638378/brian"}, "edited": false, "score": 0, "creation_date": 1492023428, "post_id": 43352788, "comment_id": 73817157, "body": "Thank you. I&#39;ve tried this and it fails because the keystore password I enter is incorrect. Not sure of how to address that"}], "owner": {"reputation": 1033, "user_id": 1775716, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/7d7cfafc64f5bda01194708412fc5f97?s=128&d=identicon&r=PG&f=1", "display_name": "Michael P.", "link": "https://stackoverflow.com/users/1775716/michael-p"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 86, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1491932401, "creation_date": 1491932401, "question_id": 43352788, "link": "https://stackoverflow.com/questions/43352788/jruby-openssl-error-when-attempting-to-start-rails-server", "title": "JRuby / OpenSSL error when attempting to start Rails server:", "body": "<p>When I attempt to start my Rails server, I receive an error that reads:</p>\n\n<p><code>OpenSSL::X509::StoreError: setting default path failed: Invalid keystore format\n</code></p>\n\n<p>I suspect that my machine's keystore has somehow become corrupted. Does anyone know how I might go about resolving this issue?</p>\n"}, {"tags": ["ruby"], "answers": [{"comments": [{"owner": {"reputation": 394580, "user_id": 479863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ArUCE.jpg?s=128&g=1", "display_name": "mu is too short", "link": "https://stackoverflow.com/users/479863/mu-is-too-short"}, "edited": false, "score": 1, "creation_date": 1491934510, "post_id": 43353011, "comment_id": 73769910, "body": "Um, the <code>&quot;hello&quot;\\n.length</code> one is perfectly valid. <code>irb</code> doesn&#39;t have quite the same parsing rules as Ruby itself does. Try it in a script of its own rather than in <code>irb</code> and you&#39;ll see."}, {"owner": {"reputation": 13442, "user_id": 3982562, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2a3c7aae1d762372cda697833c602ec8?s=128&d=identicon&r=PG", "display_name": "3limin4t0r", "link": "https://stackoverflow.com/users/3982562/3limin4t0r"}, "reply_to_user": {"reputation": 394580, "user_id": 479863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ArUCE.jpg?s=128&g=1", "display_name": "mu is too short", "link": "https://stackoverflow.com/users/479863/mu-is-too-short"}, "edited": false, "score": 0, "creation_date": 1491935983, "post_id": 43353011, "comment_id": 73770744, "body": "You are correct. I mixed it up with the operators. <code>true || false</code> is valid, but <code>true \\n || false</code> is not valid. While <code>true || \\n false</code> is also valid. My bad."}, {"owner": {"reputation": 13442, "user_id": 3982562, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2a3c7aae1d762372cda697833c602ec8?s=128&d=identicon&r=PG", "display_name": "3limin4t0r", "link": "https://stackoverflow.com/users/3982562/3limin4t0r"}, "reply_to_user": {"reputation": 394580, "user_id": 479863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ArUCE.jpg?s=128&g=1", "display_name": "mu is too short", "link": "https://stackoverflow.com/users/479863/mu-is-too-short"}, "edited": false, "score": 0, "creation_date": 1491936353, "post_id": 43353011, "comment_id": 73770951, "body": "What to do with the answer since half the answer is not valid. Delete it?"}, {"owner": {"reputation": 394580, "user_id": 479863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ArUCE.jpg?s=128&g=1", "display_name": "mu is too short", "link": "https://stackoverflow.com/users/479863/mu-is-too-short"}, "edited": false, "score": 0, "creation_date": 1491940161, "post_id": 43353011, "comment_id": 73773099, "body": "AFAIK the <code>.</code> handling w.r.t. newlines is a special case. You&#39;re free to edit your answer to correct/clarify things. No need to throw out a mostly-good answer over one little nit."}], "tags": [], "owner": {"reputation": 13442, "user_id": 3982562, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2a3c7aae1d762372cda697833c602ec8?s=128&d=identicon&r=PG", "display_name": "3limin4t0r", "link": "https://stackoverflow.com/users/3982562/3limin4t0r"}, "is_accepted": false, "score": 6, "last_activity_date": 1491984577, "last_edit_date": 1491984577, "creation_date": 1491933131, "answer_id": 43353011, "question_id": 43352737, "link": "https://stackoverflow.com/questions/43352737/what-is-the-difference-between-hello-length-and-hello-length/43353011#43353011", "title": "What is the difference between &quot;hello&quot;.length and &quot;hello&quot; .length?", "body": "<p>You can put spaces wherever you want, the interpreter looks for the end of the line. For example:</p>\n\n<p>Valid</p>\n\n<pre><code>\"hello\".\n  length\n</code></pre>\n\n<p>Invalid</p>\n\n<pre><code>\"hello\"\n  .length\n</code></pre>\n\n<p>The interpreter sees the dot at the end of the line and knows something has to follow it up. While in the second case it thinks the line is finished. The same goes for the amount of spaces in one line. Does it matter how the interpreter removes the spaces? What matters is that you know the behavior.</p>\n\n<p>If you want you can even</p>\n\n<pre><code>\"hello\"   .      length\n</code></pre>\n\n<p>and it will still work.</p>\n\n<p>I know this is not an answer to you question, but does the \"how\" matter?</p>\n\n<p>EDIT: I was corrected in the comments below. The examples with multiple lines given above are both valid when run in a script instead of IRB. I was mixed them up with the operators. Where the following also applies when running a script:</p>\n\n<p>Valid</p>\n\n<pre><code>result = true || false\n</code></pre>\n\n<p>Valid</p>\n\n<pre><code>result = true ||\n  false\n</code></pre>\n\n<p>Invalid</p>\n\n<pre><code>result = true\n  || false\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 1, "creation_date": 1491934202, "post_id": 43353016, "comment_id": 73769723, "body": "Sometimes white space can introduce ambiguity, like <code>example(arg)</code> and <code>example (arg)</code> may be interpreted differently depending on context. It&#39;s generally best to avoid putting in unnecessary spaces."}, {"owner": {"reputation": 30418, "user_id": 823617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DmWH1.png?s=128&g=1", "display_name": "Casper", "link": "https://stackoverflow.com/users/823617/casper"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1491934474, "post_id": 43353016, "comment_id": 73769884, "body": "Yes @tadman. Good point. This has to do with the compiler being unable to disambiguate (fancy word for &quot;unable to read the programmer&#39;s mind&quot;) between two or more possible solutions to the programming statement."}, {"owner": {"reputation": 394580, "user_id": 479863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ArUCE.jpg?s=128&g=1", "display_name": "mu is too short", "link": "https://stackoverflow.com/users/479863/mu-is-too-short"}, "edited": false, "score": 1, "creation_date": 1491934669, "post_id": 43353016, "comment_id": 73770011, "body": "This actually does have a bit to do with the console. <code>irb</code> interprets whitespace differently than Ruby itself does. Dumping <code>y = &#39;pancakes&#39;\\n.length</code> into <code>irb</code> will cause problems but that&#39;s perfectly fine in Ruby."}, {"owner": {"reputation": 30418, "user_id": 823617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DmWH1.png?s=128&g=1", "display_name": "Casper", "link": "https://stackoverflow.com/users/823617/casper"}, "reply_to_user": {"reputation": 394580, "user_id": 479863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ArUCE.jpg?s=128&g=1", "display_name": "mu is too short", "link": "https://stackoverflow.com/users/479863/mu-is-too-short"}, "edited": false, "score": 1, "creation_date": 1491937275, "post_id": 43353016, "comment_id": 73771447, "body": "@muistooshort Ok you nitpickers ;) Can&#39;t get away with anything here today :-/ You win."}], "tags": [], "owner": {"reputation": 30418, "user_id": 823617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DmWH1.png?s=128&g=1", "display_name": "Casper", "link": "https://stackoverflow.com/users/823617/casper"}, "is_accepted": false, "score": 4, "last_activity_date": 1491937151, "last_edit_date": 1491937151, "creation_date": 1491933140, "answer_id": 43353016, "question_id": 43352737, "link": "https://stackoverflow.com/questions/43352737/what-is-the-difference-between-hello-length-and-hello-length/43353016#43353016", "title": "What is the difference between &quot;hello&quot;.length and &quot;hello&quot; .length?", "body": "<p>This doesn't have as much to do with the console as it has to do with how the language itself is parsed by the compiler.</p>\n\n<p>Most languages are parsed in such a way that items to be parsed are first grouped into TOKENS. Then the compiler is defined to expect a certain SEQUENCE of tokens in order to interpret each programming statement.</p>\n\n<p>Because the compiler is only looking for a TOKEN SEQUENCE, it doesn't matter if there is space in between or not.</p>\n\n<p>In this case the compiler is looking for:</p>\n\n<pre><code>STRING DOT METHOD_NAME\n</code></pre>\n\n<p>So it won't matter if you write <code>\"hello\".length</code>, or even <code>\"hello\"  .  length</code>. The same sequence of tokens are present in both, and that is all that matters to the compiler.</p>\n\n<p>If you are curious how these token sequences are defined in the Ruby source code, you can look at <code>parse.y</code> starting around line 1042:</p>\n\n<p><a href=\"https://github.com/ruby/ruby/blob/trunk/parse.y#L1042\" rel=\"nofollow noreferrer\">https://github.com/ruby/ruby/blob/trunk/parse.y#L1042</a></p>\n\n<p>This is a file that is written using the <a href=\"https://en.wikipedia.org/wiki/Yacc\" rel=\"nofollow noreferrer\">YACC language</a>, which is a language used to define parsers with. </p>\n\n<p>Even without knowing anything about YACC, you should already be able to get some clues on how it works by just looking around the file a bit.</p>\n"}], "owner": {"reputation": 55, "user_id": 3190299, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/yWsmk.png?s=128&g=1", "display_name": "Shekhar", "link": "https://stackoverflow.com/users/3190299/shekhar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 283, "favorite_count": 1, "answer_count": 2, "score": 1, "last_activity_date": 1491984577, "creation_date": 1491932224, "last_edit_date": 1491940149, "question_id": 43352737, "link": "https://stackoverflow.com/questions/43352737/what-is-the-difference-between-hello-length-and-hello-length", "title": "What is the difference between &quot;hello&quot;.length and &quot;hello&quot; .length?", "body": "<p>I am surprised when I run the following examples in ruby console. They both produce the same output.</p>\n\n<pre><code>\"hello\".length\n</code></pre>\n\n<p>and</p>\n\n<pre><code>\"hello\"                     .length\n</code></pre>\n\n<p>How does the ruby console remove the space and provide the right output?</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1491933635, "post_id": 43352531, "comment_id": 73769394, "body": "This sounds like a good case for memoizing."}, {"owner": {"reputation": 56328, "user_id": 4265352, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-lzAUc5pYb24/AAAAAAAAAAI/AAAAAAAAAGQ/q3h7bZUnqrs/photo.jpg?sz=128", "display_name": "axiac", "link": "https://stackoverflow.com/users/4265352/axiac"}, "edited": false, "score": 0, "creation_date": 1491934916, "post_id": 43352531, "comment_id": 73770157, "body": "The method <code>Symbol#to_i</code> was removed in Ruby 1.9.1. I think you can use <a href=\"https://ruby-doc.org/core-2.0.0/Object.html#method-i-object_id\" rel=\"nofollow noreferrer\"><code>Object#object_id</code></a> instead."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1491936144, "post_id": 43352531, "comment_id": 73770846, "body": "What about using <a href=\"https://github.com/matthewrudy/memoist\" rel=\"nofollow noreferrer\">Memoist</a>?"}], "answers": [{"tags": [], "owner": {"reputation": 1352, "user_id": 2460416, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/VjqNv.jpg?s=128&g=1", "display_name": "mpospelov", "link": "https://stackoverflow.com/users/2460416/mpospelov"}, "is_accepted": false, "score": 1, "last_activity_date": 1491942207, "creation_date": 1491942207, "answer_id": 43355553, "question_id": 43352531, "link": "https://stackoverflow.com/questions/43352531/ruby-once-method-no-longer-works-after-upgrade-to-ruby-2-0-0p648/43355553#43355553", "title": "Ruby &quot;once&quot; method no longer works after upgrade to Ruby 2.0.0p648", "body": "<p>First thing to note that since ruby 2.0 <code>def method_name; end</code> returns <code>:method_name</code> symbol so you can write in such a way</p>\n\n<pre><code>once def method_name\n  ...\nend\n</code></pre>\n\n<p>Here is the working snippet of the same working in ruby 2.3.3</p>\n\n<pre><code>module Once\n  # modify a method to run only once\n  def once(*method_names) # :nodoc:\n    method_names.each do |method_name|\n      module_eval &lt;&lt;~RUBY\n        alias_method :__#{method_name.to_s}__, :#{method_name.to_s}\n\n        private :__#{method_name.to_s}__\n\n        def #{method_name.to_s}(*args, &amp;block)\n          (@__#{method_name.to_s}__ ||= [__#{method_name.to_s}__(*args, &amp;block)])[0]\n        end\n      RUBY\n    end\n  end\nend\n\nclass FooBar\n  extend Once\n\n  once def test\n    puts 'FooBar'\n  end\nend\n\nfoo_bar = FooBar.new\n100.times do\n  foo_bar.test\nend\n</code></pre>\n\n<p><strong>P. S.</strong></p>\n\n<p>Also there is a nice gem which is created for same purposes <a href=\"https://github.com/wegowise/memoizer\" rel=\"nofollow noreferrer\">memoizer</a>, maybe you find it usefull</p>\n"}], "owner": {"reputation": 41, "user_id": 7331926, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-gMYr4U0X1j0/AAAAAAAAAAI/AAAAAAAAAE0/r-Sr2i4tS3U/photo.jpg?sz=128", "display_name": "millnik", "link": "https://stackoverflow.com/users/7331926/millnik"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 43, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1491942207, "creation_date": 1491931534, "last_edit_date": 1491933395, "question_id": 43352531, "link": "https://stackoverflow.com/questions/43352531/ruby-once-method-no-longer-works-after-upgrade-to-ruby-2-0-0p648", "title": "Ruby &quot;once&quot; method no longer works after upgrade to Ruby 2.0.0p648", "body": "<p>I have some expensive subs that, if called multiple times, can cause the process running to take an eternity to complete.</p>\n\n<p>To stop them from being called repeatedly a <code>Once</code> module was created similar to the one in date.rb:</p>\n\n<pre><code>module Once\n  # modify a method to run only once\n  def once(*ids) # :nodoc:\n    ids.each do |id|\n      module_eval &lt;&lt;-\"end;\"\n                alias_method :__#{id.to_i}__, :#{id.to_s}\n                private :__#{id.to_i}__\n                def #{id.to_s}(*args, &amp;block)\n                    (@__#{id.to_i}__ ||= [__#{id.to_i}__(*args, &amp;block)])[0]\n                end\n      end;\n    end\n  end\n\nend\n</code></pre>\n\n<p>Which was used like this:</p>\n\n<pre><code>def expensive_function\n    blah, blah\nend\nonce :expensive_function\n</code></pre>\n\n<p>This worked fine in Ruby 1.8.6 but now, after I upgraded to Ruby 2.0.0p648, I get the following error:</p>\n\n<pre><code>:in `block in once': undefined method `to_i' for :log_level_from_env:Symbol (NoMethodError)\n</code></pre>\n\n<p>This error is referencing the line number containing <code>alias_method</code>.</p>\n\n<p>What modifications are needed to correct this module so it will work as needed with my current Ruby version?</p>\n"}, {"tags": ["ruby", "rack", "faye"], "comments": [{"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 1, "creation_date": 1491933918, "post_id": 43352338, "comment_id": 73769563, "body": "Please read &quot;<a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a>&quot; and &quot;<a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>&quot; and &quot;<a href=\"http://meta.stackoverflow.com/questions/261592\">How much research effort is expected of Stack Overflow users?</a>&quot;. Your question isn&#39;t a good fit for Stack Overflow. You need to research and try things, and then ask a specific question about a particular problem with the code. Asking us for alternative methods results in broad answers, instead of detailed and specific ones."}, {"owner": {"reputation": 967, "user_id": 1832746, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/5b33e3e1d45f119c592d7517fc98c6bd?s=128&d=identicon&r=PG", "display_name": "XAnguera", "link": "https://stackoverflow.com/users/1832746/xanguera"}, "reply_to_user": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1491934643, "post_id": 43352338, "comment_id": 73769992, "body": "@theTinMan hmmm... I am not sure I understand your comment. I have seen many many questions without code in them and a much scarcer description of the problem. In my question I am clearly stating my problem and listing two ways I tried to implement. Please let me know what exactly I could do differently and I will modify my question accordingly. Thanks."}, {"owner": {"reputation": 16402, "user_id": 4025095, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/blJ4L.jpg?s=128&g=1", "display_name": "Myst", "link": "https://stackoverflow.com/users/4025095/myst"}, "edited": false, "score": 0, "creation_date": 1492226987, "post_id": 43352338, "comment_id": 73902578, "body": "@XAnguera , the question is too broad without knowing what your code is doing, what you tried and where you&#39;re stuck. Your question lacks some information. For example, is the audio data processing performed by the server process or a worker process (perhaps on a different machine)...?  Are you using background processing? Are you using a pub/sub service? ... If the server doubles as the audio processing unit, it will naturally have more information about the progress and the client and it could divide it&#39;s work into chunks, increasing responsiveness - but it will have load balancing issues..."}], "owner": {"reputation": 967, "user_id": 1832746, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/5b33e3e1d45f119c592d7517fc98c6bd?s=128&d=identicon&r=PG", "display_name": "XAnguera", "link": "https://stackoverflow.com/users/1832746/xanguera"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 157, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1491930921, "creation_date": 1491930921, "question_id": 43352338, "link": "https://stackoverflow.com/questions/43352338/asynchronous-message-from-server-through-faye-websocket", "title": "asynchronous message from server through Faye websocket", "body": "<p>I have successfully implemented a server using Faye websocket library on top of Rack, with a puma webserver, as described <a href=\"http://pythonhackers.com/p/faye/faye-websocket-ruby\" rel=\"nofollow noreferrer\">here</a>.</p>\n\n<p>In my application the client first sends audio data to be processed to the server and then iteratively asks the server whether the data has been finished processing. Once the server gets the data it stores it into a queue for processing. Every time the app asks the server, the server checks the queue and either returns null or returns the processed result.</p>\n\n<p>I would like to reimplement this so that the server would asynchronously send a message to the client whenever it finished processing without the client having to iteratively ask all the time. </p>\n\n<p>I have seen possible solutions like sleeping and iteratively checking the status until it is ready, but I am worried this would block the server and would make this not scalable. Another alternative would be using the ping/pong capability of Faye websockets, but I can see this as doing exactly the same I do now.</p>\n\n<p>Any other ideas on how I could implement it? </p>\n"}, {"tags": ["ruby-on-rails", "ruby", "forms", "nested", "models"], "comments": [{"owner": {"reputation": 3997, "user_id": 3998420, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/55ea542584d3fd2a430c3d409bdafc95?s=128&d=identicon&r=PG&f=1", "display_name": "bkunzi01", "link": "https://stackoverflow.com/users/3998420/bkunzi01"}, "edited": false, "score": 0, "creation_date": 1491929660, "post_id": 43351790, "comment_id": 73767013, "body": "You&#39;re delving into the realm of javascript (client-side) luckily you don&#39;t need to leave ruby behind for lots of it!  Anytime you&#39;re looking to run code based on a user&#39;s actions before they submit a form etc. you&#39;ll want to use javascript (more importantly Jquery)."}], "answers": [{"comments": [{"owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "edited": false, "score": 0, "creation_date": 1491930849, "post_id": 43352250, "comment_id": 73767700, "body": "There are a few other issues with your app. Always use <code>snake_case</code> to name methods and columns. You&#39;re missing a foreign key constraint on <code>todos.projects_id</code>. Use the <code>belongs_to</code> macro when creating columns for belongs_to associations. You can fix it after the fact by creating a migration with <code>add_foreign_key :todos, :projects</code>."}, {"owner": {"reputation": 77, "user_id": 7802501, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/4874272e8bba778b1452bdb1e8a7c625?s=128&d=identicon&r=PG&f=1", "display_name": "NanoBreaker", "link": "https://stackoverflow.com/users/7802501/nanobreaker"}, "edited": false, "score": 0, "creation_date": 1491931317, "post_id": 43352250, "comment_id": 73767963, "body": "got you bro! Thanks for the answer, gonna make everything work right now."}, {"owner": {"reputation": 77, "user_id": 7802501, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/4874272e8bba778b1452bdb1e8a7c625?s=128&d=identicon&r=PG&f=1", "display_name": "NanoBreaker", "link": "https://stackoverflow.com/users/7802501/nanobreaker"}, "edited": false, "score": 0, "creation_date": 1491933783, "post_id": 43352250, "comment_id": 73769480, "body": "There are some misspells in your form as I understand, there should be &#39;tf<code>instead &#39;t</code> and such method like <code>check_box_field</code>, so I used <code>check_box</code>. But this is form for just a single @project which is already defined, but how can I use for @projects? And one more question about migration, can I just add that string <code>add_foreign_key :todos, :projects</code> to my projects migration file?"}, {"owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "reply_to_user": {"reputation": 77, "user_id": 7802501, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/4874272e8bba778b1452bdb1e8a7c625?s=128&d=identicon&r=PG&f=1", "display_name": "NanoBreaker", "link": "https://stackoverflow.com/users/7802501/nanobreaker"}, "edited": false, "score": 0, "creation_date": 1491934578, "post_id": 43352250, "comment_id": 73769957, "body": "You need a form for each project."}, {"owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "reply_to_user": {"reputation": 77, "user_id": 7802501, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/4874272e8bba778b1452bdb1e8a7c625?s=128&d=identicon&r=PG&f=1", "display_name": "NanoBreaker", "link": "https://stackoverflow.com/users/7802501/nanobreaker"}, "edited": false, "score": 0, "creation_date": 1491934743, "post_id": 43352250, "comment_id": 73770062, "body": "And one more question about migration, can I just add that string <code>add_foreign_key :todos, :projects</code> to my projects migration file? - Not really. That would require you to rollback the migration and re-run it which would be destructive. Once you have pushed a migration it should not be altered. Instead run <code>rails g migration AddProjectsIdForeignKeyToTodos</code>. Of course you can cheat with this if you are just creating an app for the sake of learning and have not set a production environment."}, {"owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "reply_to_user": {"reputation": 77, "user_id": 7802501, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/4874272e8bba778b1452bdb1e8a7c625?s=128&d=identicon&r=PG&f=1", "display_name": "NanoBreaker", "link": "https://stackoverflow.com/users/7802501/nanobreaker"}, "edited": false, "score": 0, "creation_date": 1491934864, "post_id": 43352250, "comment_id": 73770133, "body": "I fixed the typos in form as well."}, {"owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "reply_to_user": {"reputation": 77, "user_id": 7802501, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/4874272e8bba778b1452bdb1e8a7c625?s=128&d=identicon&r=PG&f=1", "display_name": "NanoBreaker", "link": "https://stackoverflow.com/users/7802501/nanobreaker"}, "edited": false, "score": 0, "creation_date": 1491935314, "post_id": 43352250, "comment_id": 73770391, "body": "I added a bit explaining how you would use partials to create forms for each project."}, {"owner": {"reputation": 77, "user_id": 7802501, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/4874272e8bba778b1452bdb1e8a7c625?s=128&d=identicon&r=PG&f=1", "display_name": "NanoBreaker", "link": "https://stackoverflow.com/users/7802501/nanobreaker"}, "edited": false, "score": 0, "creation_date": 1491947167, "post_id": 43352250, "comment_id": 73776586, "body": "That&#39;s really cool dude, thanks for such a nice explanation! But I got few more questions, I hope you don&#39;t mind ^^  1. Code from <code>_form.html.erb</code> doesn&#39;t work  independently, it says <code>First argument in form cannot contain nil or be empty</code>. So I just putted it into the cycle in <code>index.html.erb</code> instead <code>&lt;%= render partial: . . . %&gt;</code>. Controllers are fine.  2. Probably a silly question, but really what is the problem, <code>&lt;%= f.text_field :title %&gt;</code> this works inside my <code>form_for</code>, but why <code>&lt;%= f.label :title %&gt;</code> doesn&#39;t give me a project title? Also can&#39;t find a way to get todo.text. `"}, {"owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "reply_to_user": {"reputation": 77, "user_id": 7802501, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/4874272e8bba778b1452bdb1e8a7c625?s=128&d=identicon&r=PG&f=1", "display_name": "NanoBreaker", "link": "https://stackoverflow.com/users/7802501/nanobreaker"}, "edited": false, "score": 0, "creation_date": 1491948194, "post_id": 43352250, "comment_id": 73776932, "body": "<code>&lt;%= f.label :title %&gt;</code> gives you a <code>&lt;label&gt;</code>element that describes the input. If you want to print the title you would use <code>&lt;%= f.object.title %&gt;</code>"}, {"owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "reply_to_user": {"reputation": 77, "user_id": 7802501, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/4874272e8bba778b1452bdb1e8a7c625?s=128&d=identicon&r=PG&f=1", "display_name": "NanoBreaker", "link": "https://stackoverflow.com/users/7802501/nanobreaker"}, "edited": false, "score": 0, "creation_date": 1491948388, "post_id": 43352250, "comment_id": 73776994, "body": "And yes the partial does work - you&#39;re doing something else wrong. But you may want to ask a new question as we are far beyond the scope of your original question."}], "tags": [], "owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "is_accepted": true, "score": 1, "last_activity_date": 1491935275, "last_edit_date": 1491935275, "creation_date": 1491930563, "answer_id": 43352250, "question_id": 43351790, "link": "https://stackoverflow.com/questions/43351790/ruby-on-rails-how-to-make-a-form-for-associated-models-nested/43352250#43352250", "title": "Ruby on Rails: how to make a form for associated models (nested)", "body": "<p>Lets start with the models:</p>\n\n<pre><code>class Project &lt; ApplicationRecord\n  has_many :todos\n  accepts_nested_attributes_for :todos\nend\n\nclass Todo &lt; ApplicationRecord\n  belongs_to :project\nend\n</code></pre>\n\n<p><a href=\"http://api.rubyonrails.org/classes/ActiveRecord/NestedAttributes/ClassMethods.html\" rel=\"nofollow noreferrer\"><code>accepts_nested_attributes_for</code></a> lets you create or modify several nested <code>Todo</code> records at once when creating or updating a Project. </p>\n\n<pre><code># will update 2 todos at once\n@project.update(\n todos_attributes: [ { id: 1, isComplete: true }, { id: 2, isComplete: false }]\n)\n</code></pre>\n\n<p>We can use <a href=\"http://api.rubyonrails.org/classes/ActionView/Helpers/FormHelper.html\" rel=\"nofollow noreferrer\"><code>fields_for</code></a> to create nested inputs for todos:</p>\n\n<pre><code>&lt;%= f.form_for(@project) do |f| %&gt;\n  &lt;%= f.fields_for(:todos) do |tf| %&gt;\n    &lt;%= tf.check_box :isCompleted %&gt;\n  &lt;% end %&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>This generates fields for todos nested under the key <code>todos_attributes</code>. We can whitelist them by using a hash key containing a array of permitted attributes.</p>\n\n<pre><code>class ProjectsController &lt; ApplicationController\n  before_action :set_project, only: [:show, :edit, :update, :destroy]\n\n  def new\n    @project = Project.new\n    # this seeds the project with 3 empty tasks\n    # otherwise we don't have any inputs.\n    3.times { @project.todos.new }\n  end\n\n  def create\n    @project = Project.new(project_params)\n    if @project.save\n      # ...\n    else\n      # ...\n    end\n  end\n\n  def update\n    if @project.update(project_params)\n      # ...\n    else\n      # ...\n    end\n  end\n\n  private \n\n  def set_project\n    @project = Project.find(params[:id])\n  end\n\n  def project_params\n    params.require(:project)\n      .permit(:foo, :bar, \n        todos_attributes: [:isCompleted, :text]\n      )\n  end\nend\n</code></pre>\n\n<p>You can create a form for each project by creating <a href=\"http://guides.rubyonrails.org/layouts_and_rendering.html#using-partials\" rel=\"nofollow noreferrer\">a partial</a> which uses a <a href=\"http://guides.rubyonrails.org/layouts_and_rendering.html#passing-local-variables\" rel=\"nofollow noreferrer\">local</a> instead of an instance variable:</p>\n\n<pre><code># app/views/projects/_form.html.erb\n&lt;%= f.form_for(local_assigns[:project] || @project) do |f| %&gt;\n  &lt;%= f.fields_for(:todos) do |tf| %&gt;\n    &lt;%= tf.check_box :isCompleted %&gt;\n  &lt;% end %&gt;\n&lt;% end %&gt;\n\n# app/views/projects/index.html.erb\n&lt;% @projects.each do |project| %&gt;\n  &lt;%= render partial: 'projects/form', project: project %&gt; \n&lt;% end %&gt;\n</code></pre>\n\n<p>You can reuse the same partial for the other views as well:</p>\n\n<pre><code># app/views/projects/new.html.erb\n&lt;%= render partial: 'projects/form' %&gt; \n\n# app/views/projects/edit.html.erb\n&lt;%= render partial: 'projects/form' %&gt; \n</code></pre>\n"}], "owner": {"reputation": 77, "user_id": 7802501, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/4874272e8bba778b1452bdb1e8a7c625?s=128&d=identicon&r=PG&f=1", "display_name": "NanoBreaker", "link": "https://stackoverflow.com/users/7802501/nanobreaker"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1158, "favorite_count": 1, "accepted_answer_id": 43352250, "answer_count": 1, "score": 1, "last_activity_date": 1491935275, "creation_date": 1491929107, "question_id": 43351790, "link": "https://stackoverflow.com/questions/43351790/ruby-on-rails-how-to-make-a-form-for-associated-models-nested", "title": "Ruby on Rails: how to make a form for associated models (nested)", "body": "<p>First of all I have this:</p>\n\n<p><a href=\"https://polar-scrubland-30279.herokuapp.com/\" rel=\"nofollow noreferrer\">https://polar-scrubland-30279.herokuapp.com/</a> - my project which is deployed on heroku (Captain Obvious)</p>\n\n<p>I've got projects and todos inside them.\nFor this moment I show all projects using this way:</p>\n\n<pre><code>------index.html.erb------\n\n&lt;%= render @projects %&gt;\n\n------_project.html.erb-----\n\n&lt;div class=\"project\"&gt;\n  &lt;div class=\"project-header\"&gt;\n    &lt;h2&gt;&lt;%= project.title %&gt;&lt;/h2&gt;\n  &lt;/div&gt;\n  &lt;div class=\"project-todos\"&gt;\n    &lt;% project.todos.all.each do |todo| %&gt;\n      &lt;p&gt;&lt;%= check_box('tag', todo.__id__, {class: 'icheckbox_square-blue', checked: todo.isCompleted}) %&gt; &lt;%= content_tag :todotext, todo.text %&gt;&lt;/p&gt;\n    &lt;% end %&gt;\n  &lt;/div&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p>And as you understand it doesn't allow me to change my todo's status when checkbox is checked. So that's why I need a form that will allow me to track all the checkboxes. Also I wanna make <code>text-decoration: line-through</code> when checkbox is pressed, but don't get how to. </p>\n\n<p>Is there a way to creat a form which will satisfy my needs? Please can you help me, Any information will be appreciated.</p>\n\n<p><strong>ADDITIONAL INFORAMTION:</strong></p>\n\n<p>GitHub - <a href=\"https://github.com/NanoBreaker/taskmanager\" rel=\"nofollow noreferrer\">https://github.com/NanoBreaker/taskmanager</a></p>\n\n<p>project.rb</p>\n\n<pre><code>class Project &lt; ActiveRecord::Base\n  has_many :todos\nend\n</code></pre>\n\n<p>todo.rb</p>\n\n<pre><code>class Todo &lt; ActiveRecord::Base\n  belongs_to :project\nend\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "postgresql", "activerecord", "callback"], "answers": [{"tags": [], "owner": {"reputation": 1402, "user_id": 609489, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/fef05b31d37c679848a1958c21e5c9a1?s=128&d=identicon&r=PG", "display_name": "lightsaber", "link": "https://stackoverflow.com/users/609489/lightsaber"}, "is_accepted": false, "score": 0, "last_activity_date": 1491998023, "last_edit_date": 1491998023, "creation_date": 1491997712, "answer_id": 43368703, "question_id": 43350822, "link": "https://stackoverflow.com/questions/43350822/exception-reentered-when-saving-polymorphic-association/43368703#43368703", "title": "Exception reentered: When saving polymorphic association", "body": "<p>I've solved this issue, I did following things and I'm not sure which one of these solved it.</p>\n\n<ul>\n<li>I was using postgres 9.2 and Updated it to latest 9.6. I don't think solved this issue, I should do it and I did it anyway, because heroku runs 9.5 so I thought It's time to upgrade. I don't recommend you doing it though. </li>\n</ul>\n\n<p>Bellow are steps which I believe solved this issue.</p>\n\n<ul>\n<li><p>Updated Rails 4.2.7.1 to Rails 4.2.8. I don't think this solved this issue though.</p></li>\n<li><p>I'm running elasticseach using Searchkick gem, I <strong>reindexed</strong> my model data after making changes.</p></li>\n<li>Updated <strong>OJ</strong> gem to latest (2.16.1) and Downgraded <strong>enumerize</strong> to a minor version(2.0.1) and updated <strong>Friendly_id</strong> gem to latest version(5.2.1). I think this solved this issue.</li>\n</ul>\n\n<p>Thanks,</p>\n"}], "owner": {"reputation": 1402, "user_id": 609489, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/fef05b31d37c679848a1958c21e5c9a1?s=128&d=identicon&r=PG", "display_name": "lightsaber", "link": "https://stackoverflow.com/users/609489/lightsaber"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 216, "favorite_count": 0, "answer_count": 1, "score": 3, "last_activity_date": 1491998023, "creation_date": 1491926068, "last_edit_date": 1491945767, "question_id": 43350822, "link": "https://stackoverflow.com/questions/43350822/exception-reentered-when-saving-polymorphic-association", "title": "Exception reentered: When saving polymorphic association", "body": "<p>In my <strong>Rails 4.2.7</strong>, <strong>ruby 2.3.3</strong> App, when I save a particular polymorphic association by saving a nested form it gives stack level too deep error and <em>rails_admin</em> stops responding. And when I save from Rails console it gives following error, <strong>fatal: exception reentered</strong> error.</p>\n\n<pre><code>2.3.3 :001 &gt; Post.last.links\n  Post Load (10.3ms)  SELECT  \"posts\".* FROM \"posts\"  ORDER BY \"posts\".\"id\" DESC LIMIT 1\n  Link Load (0.8ms)  SELECT \"links\".* FROM \"links\" WHERE \"links\".\"linked_item_id\" = $1 AND \"links\".\"linked_item_type\" = $2  [[\"linked_item_id\", 112], [\"linked_item_type\", \"Post\"]]\n =&gt; #&lt;ActiveRecord::Associations::CollectionProxy []&gt;\n2.3.3 :002 &gt; Post.last.links.create(name: 'see details', link: 'http://www.google.com/')\n  Post Load (3.7ms)  SELECT  \"posts\".* FROM \"posts\"  ORDER BY \"posts\".\"id\" DESC LIMIT 1\n   (1.2ms)  BEGIN\n  SQL (4.1ms)  INSERT INTO \"links\" (\"name\", \"link\", \"linked_item_id\", \"linked_item_type\", \"target\", \"created_at\", \"updated_at\") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING \"id\"  [[\"name\", \"see details\"], [\"link\", \"http://www.google.com/\"], [\"linked_item_id\", 112], [\"linked_item_type\", \"Post\"], [\"target\", \"_blank\"], [\"created_at\", \"2017-04-11 15:34:25.320118\"], [\"updated_at\", \"2017-04-11 15:34:25.320118\"]]\n   (0.3ms)  ROLLBACK\nfatal: exception reentered\n    from /Users/starwar/.rvm/gems/ruby-2.3.3@rails420/gems/activerecord-4.2.7.1/lib/active_record/connection_adapters/abstract/transaction.rb:187:in `rescue in within_new_transaction'\n    from /Users/starwar/.rvm/gems/ruby-2.3.3@rails420/gems/activerecord-4.2.7.1/lib/active_record/connection_adapters/abstract/transaction.rb:201:in `within_new_transaction'\n    from /Users/starwar/.rvm/gems/ruby-2.3.3@rails420/gems/activerecord-4.2.7.1/lib/active_record/connection_adapters/abstract/database_statements.rb:213:in `transaction'\n    from /Users/starwar/.rvm/gems/ruby-2.3.3@rails420/gems/activerecord-4.2.7.1/lib/active_record/transactions.rb:220:in `transaction'\n    from /Users/starwar/.rvm/gems/ruby-2.3.3@rails420/gems/activerecord-4.2.7.1/lib/active_record/associations/collection_association.rb:182:in `transaction'\n    from /Users/starwar/.rvm/gems/ruby-2.3.3@rails420/gems/activerecord-4.2.7.1/lib/active_record/associations/collection_association.rb:492:in `_create_record'\n    from /Users/starwar/.rvm/gems/ruby-2.3.3@rails420/gems/activerecord-4.2.7.1/lib/active_record/associations/has_many_association.rb:187:in `_create_record'\n    from /Users/starwar/.rvm/gems/ruby-2.3.3@rails420/gems/activerecord-4.2.7.1/lib/active_record/associations/collection_association.rb:153:in `create'\n    from /Users/starwar/.rvm/gems/ruby-2.3.3@rails420/gems/activerecord-4.2.7.1/lib/active_record/associations/collection_proxy.rb:290:in `create'\n    from (irb):2\n    from /Users/starwar/.rvm/gems/ruby-2.3.3@rails420/gems/railties-4.2.7.1/lib/rails/commands/console.rb:110:in `start'\n    from /Users/starwar/.rvm/gems/ruby-2.3.3@rails420/gems/railties-4.2.7.1/lib/rails/commands/console.rb:9:in `start'\n    from /Users/starwar/.rvm/gems/ruby-2.3.3@rails420/gems/railties-4.2.7.1/lib/rails/commands/commands_tasks.rb:68:in `console'\n    from /Users/starwar/.rvm/gems/ruby-2.3.3@rails420/gems/railties-4.2.7.1/lib/rails/commands/commands_tasks.rb:39:in `run_command!'\n    from /Users/starwar/.rvm/gems/ruby-2.3.3@rails420/gems/railties-4.2.7.1/lib/rails/commands.rb:17:in `&lt;top (required)&gt;'\n    from bin/rails:4:in `require'\n    from bin/rails:4:in `&lt;main&gt;'\n</code></pre>\n\n<p>Here is relevant part of my Post model</p>\n\n<pre><code>class Post &lt; ActiveRecord::Base\n  has_many :links, -&gt; { order(created_at: :asc) }, as: :linked_item, dependent: :destroy\n  accepts_nested_attributes_for :links, allow_destroy: true\n</code></pre>\n\n<p>And my Link model</p>\n\n<pre><code>class Link &lt; ActiveRecord::Base\n  extend Enumerize\n  enumerize :target, in: [:_blank, :_self, :_top, :_parent], default: :_blank\n  # Associations\n  belongs_to :linked_item, polymorphic: true, touch: true\n\n  # Validations\n\n  validates_presence_of :link\n  validates_presence_of :name\n  validates :link, :url =&gt; { allow_nil: false }\n\n  # Scopes\n  scope :sorted, -&gt; { order(created_at: :asc) }\nend\n</code></pre>\n\n<p>This exact same code is deployed on Heroku and It works fine but on my Local Machine, It's not working.\nAnd When rails server stops responding then I have to kill the process and it says</p>\n\n<pre><code>[NOTE]\nYou may have encountered a bug in the Ruby interpreter or extension libraries.\nBug reports are welcome.\nFor details: http://www.ruby-lang.org/bugreport.html\n</code></pre>\n\n<p>And Surprisingly my tests are passing but I'm not able to add anything via Rails console or rails_admin panel to the model which has polymorphic association by filling the nested form.</p>\n\n<p>Thanks,</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "windows"], "comments": [{"owner": {"reputation": 15583, "user_id": 177489, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/sv6zK.jpg?s=128&g=1", "display_name": "Mark Swardstrom", "link": "https://stackoverflow.com/users/177489/mark-swardstrom"}, "edited": false, "score": 0, "creation_date": 1491930251, "post_id": 43350809, "comment_id": 73767338, "body": "As JP mentions below, use :show, instead of details. And, link_to will work instead of button_to - <code>link_to &quot;Add to Cart&quot;, @product, :class =&gt; &#39;...&#39;</code>"}], "answers": [{"comments": [{"owner": {"reputation": 779, "user_id": 6858228, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/39c09fdb3f434d643a86d64033e5d5c5?s=128&d=identicon&r=PG&f=1", "display_name": "Angel", "link": "https://stackoverflow.com/users/6858228/angel"}, "edited": false, "score": 0, "creation_date": 1491926624, "post_id": 43350960, "comment_id": 73765154, "body": "May I know what is the difference of the two? member and collection? and what is the proper way to declare a custom routes?"}, {"owner": {"reputation": 19261, "user_id": 4758119, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/F4dJY.jpg?s=128&g=1", "display_name": "Deepak Mahakale", "link": "https://stackoverflow.com/users/4758119/deepak-mahakale"}, "reply_to_user": {"reputation": 779, "user_id": 6858228, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/39c09fdb3f434d643a86d64033e5d5c5?s=128&d=identicon&r=PG&f=1", "display_name": "Angel", "link": "https://stackoverflow.com/users/6858228/angel"}, "edited": false, "score": 0, "creation_date": 1491926683, "post_id": 43350960, "comment_id": 73765188, "body": "Member route is where you need to do some action on object like <code>edit</code>, <code>update</code>, <code>delete</code>"}, {"owner": {"reputation": 19261, "user_id": 4758119, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/F4dJY.jpg?s=128&g=1", "display_name": "Deepak Mahakale", "link": "https://stackoverflow.com/users/4758119/deepak-mahakale"}, "reply_to_user": {"reputation": 779, "user_id": 6858228, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/39c09fdb3f434d643a86d64033e5d5c5?s=128&d=identicon&r=PG&f=1", "display_name": "Angel", "link": "https://stackoverflow.com/users/6858228/angel"}, "edited": false, "score": 0, "creation_date": 1491926715, "post_id": 43350960, "comment_id": 73765209, "body": "Collection route are routes where you do some action on class like <code>index</code>"}, {"owner": {"reputation": 779, "user_id": 6858228, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/39c09fdb3f434d643a86d64033e5d5c5?s=128&d=identicon&r=PG&f=1", "display_name": "Angel", "link": "https://stackoverflow.com/users/6858228/angel"}, "edited": false, "score": 0, "creation_date": 1491926959, "post_id": 43350960, "comment_id": 73765383, "body": "Ooohh last more question sir, is this natural or not? When I clicked the add to cart it will become like this <a href=\"http://localhost:3000/products/1/details\" rel=\"nofollow noreferrer\">localhost:3000/products/1/details</a>?.. but it getting all the details of that product"}, {"owner": {"reputation": 19261, "user_id": 4758119, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/F4dJY.jpg?s=128&g=1", "display_name": "Deepak Mahakale", "link": "https://stackoverflow.com/users/4758119/deepak-mahakale"}, "reply_to_user": {"reputation": 779, "user_id": 6858228, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/39c09fdb3f434d643a86d64033e5d5c5?s=128&d=identicon&r=PG&f=1", "display_name": "Angel", "link": "https://stackoverflow.com/users/6858228/angel"}, "edited": false, "score": 0, "creation_date": 1491927629, "post_id": 43350960, "comment_id": 73765822, "body": "sorry didn&#39;t get your question. refer this link for more details <a href=\"http://guides.rubyonrails.org/routing.html#adding-more-restful-actions\" rel=\"nofollow noreferrer\">guides.rubyonrails.org/routing.html#adding-more-restful-acti&zwnj;&#8203;ons</a>"}], "tags": [], "owner": {"reputation": 19261, "user_id": 4758119, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/F4dJY.jpg?s=128&g=1", "display_name": "Deepak Mahakale", "link": "https://stackoverflow.com/users/4758119/deepak-mahakale"}, "is_accepted": true, "score": 4, "last_activity_date": 1491927664, "last_edit_date": 1491927664, "creation_date": 1491926469, "answer_id": 43350960, "question_id": 43350809, "link": "https://stackoverflow.com/questions/43350809/how-should-i-pass-the-id-into-collection-routes/43350960#43350960", "title": "How should I pass the ID into collection routes?", "body": "<p>If you need <code>product_id</code> in the url, you need to define it as a member route not collection</p>\n\n<pre><code>resources :products do\n  member do\n    get :details\n  end\nend\n</code></pre>\n\n<p>Now you will get</p>\n\n<pre><code> GET /products/:id/details(.:format) products#details\n</code></pre>\n\n<p>Refer this for more details <a href=\"http://guides.rubyonrails.org/routing.html#adding-more-restful-actions\" rel=\"nofollow noreferrer\">adding-more-restful-actions</a></p>\n"}, {"tags": [], "owner": {"reputation": 1211, "user_id": 4483213, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4GN3P.jpg?s=128&g=1", "display_name": "JP Duffy", "link": "https://stackoverflow.com/users/4483213/jp-duffy"}, "is_accepted": false, "score": 1, "last_activity_date": 1491926592, "creation_date": 1491926592, "answer_id": 43350997, "question_id": 43350809, "link": "https://stackoverflow.com/questions/43350809/how-should-i-pass-the-id-into-collection-routes/43350997#43350997", "title": "How should I pass the ID into collection routes?", "body": "<p>Unless you're using :show for something else, that would be the normal place for such a page.  ;)</p>\n"}], "owner": {"reputation": 779, "user_id": 6858228, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/39c09fdb3f434d643a86d64033e5d5c5?s=128&d=identicon&r=PG&f=1", "display_name": "Angel", "link": "https://stackoverflow.com/users/6858228/angel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 964, "favorite_count": 0, "accepted_answer_id": 43350960, "answer_count": 2, "score": 1, "last_activity_date": 1491927664, "creation_date": 1491926034, "last_edit_date": 1491926564, "question_id": 43350809, "link": "https://stackoverflow.com/questions/43350809/how-should-i-pass-the-id-into-collection-routes", "title": "How should I pass the ID into collection routes?", "body": "<p>I am new in ruby on rails.. When the user click the buy button to the specific product, it will get the id of the product then it will redirect to another page where it will display all the details of the product(name,description,price,image etc)..</p>\n\n<p>I created a custom routes which is this one below:</p>\n\n<p><strong>Routes</strong></p>\n\n<pre><code>resources :products do // products is my name of the controller\n    collection do\n        get :details\n    end\n  end\n</code></pre>\n\n<p><strong>View</strong></p>\n\n<pre><code>&lt;%= button_to 'Add to Cart',details_products_path, class: 'btn btn-primary', method: :get %&gt;\n</code></pre>\n\n<p><strong>Controller</strong></p>\n\n<pre><code>class ProductsController &lt; ApplicationController\n  def index\n    @products = Product.all()\n  end\n  def details\n    @product = Product.find(params[:id])\n  end\n\nend\n</code></pre>\n\n<p>NOTE: I also check my rake routes, the path it shows </p>\n\n<pre><code>details_products_path   GET /products/details(.:format) products#details\n</code></pre>\n\n<p>I notice that there's no id(like this /products/details/:id) </p>\n\n<p>I also tried this one </p>\n\n<pre><code>&lt;%= button_to 'Add to Cart',details_products_path(@products), class: 'btn btn-primary', method: :get %&gt; \n</code></pre>\n\n<p>but im getting error </p>\n\n<blockquote>\n  <p>\"ActiveRecord::RecordNotFound in ProductsController#details\" Couldn't find Product with 'id'= in</p>\n</blockquote>\n\n<pre><code>def details\n  @product = Product.find(params[:id])\nend\n</code></pre>\n\n<p>Question: How do I pass the ID into my details method that is located at my products controller</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 107760, "user_id": 451475, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a632afa4c11779c0cabd7df04eb26ba6?s=128&d=identicon&r=PG", "display_name": "zaph", "link": "https://stackoverflow.com/users/451475/zaph"}, "edited": false, "score": 1, "creation_date": 1491928439, "post_id": 43350357, "comment_id": 73766303, "body": "Time to learn string encoding, the time spent will be well worth it."}, {"owner": {"reputation": 35276, "user_id": 182590, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/134ea397777886d6f0aa992672a50eaa?s=128&d=identicon&r=PG", "display_name": "Mark Thomas", "link": "https://stackoverflow.com/users/182590/mark-thomas"}, "edited": false, "score": 0, "creation_date": 1491931651, "post_id": 43350357, "comment_id": 73768184, "body": "Step through it in a debugger, or print the values of <code>numbers</code> and <code>coded</code> every step. You&#39;ll see what&#39;s happening. Then it&#39;s just a matter of looking up any methods that you don&#39;t understand."}], "answers": [{"comments": [{"owner": {"reputation": 51, "user_id": 7851624, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/91ff8a7ce52b36b402a68e3c917a15a9?s=128&d=identicon&r=PG&f=1", "display_name": "mwstreit", "link": "https://stackoverflow.com/users/7851624/mwstreit"}, "edited": false, "score": 0, "creation_date": 1492008860, "post_id": 43350498, "comment_id": 73808069, "body": "Thank you for your answer!"}], "tags": [], "owner": {"reputation": 13091, "user_id": 483266, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a88664c5c8cd526ac9c0638e59db2c0f?s=128&d=identicon&r=PG", "display_name": "Arie Xiao", "link": "https://stackoverflow.com/users/483266/arie-xiao"}, "is_accepted": true, "score": 7, "last_activity_date": 1491925139, "creation_date": 1491925139, "answer_id": 43350498, "question_id": 43350357, "link": "https://stackoverflow.com/questions/43350357/ruby-why-does-this-work/43350498#43350498", "title": "(Ruby) Why does this work?", "body": "<p><a href=\"http://ruby-doc.org/core-2.4.1/String.html#method-i-3C-3C\" rel=\"noreferrer\">Doc for <code>String#&lt;&lt;</code></a></p>\n\n<blockquote>\n  <p>Append---Concatenates the given object to str. If the object is an Integer, it is considered as a codepoint, and is converted to a character before concatenation. Concat can take multiple arguments. All the arguments are concatenated in order.</p>\n</blockquote>\n\n<p>The chars in the original String is converted to the ordinal integer, added with the offset and then fed to the <code>String#&lt;&lt;</code> method.</p>\n"}], "owner": {"reputation": 51, "user_id": 7851624, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/91ff8a7ce52b36b402a68e3c917a15a9?s=128&d=identicon&r=PG&f=1", "display_name": "mwstreit", "link": "https://stackoverflow.com/users/7851624/mwstreit"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 74, "favorite_count": 1, "accepted_answer_id": 43350498, "answer_count": 1, "score": 3, "last_activity_date": 1491927393, "creation_date": 1491924795, "last_edit_date": 1491927393, "question_id": 43350357, "link": "https://stackoverflow.com/questions/43350357/ruby-why-does-this-work", "title": "(Ruby) Why does this work?", "body": "<p>I recently started learning ruby and am building a simple 'encryption' method.  I'm getting the desired result, but I'm not sure why.</p>\n\n<pre><code>string = \"This is a test\"\noffset = 5\n\ndef encode(string, offset)\n    coded = \"\"\n    string.scan(/./) do |char|\n        numbers = char.ord\n        if numbers == 32\n            numbers = numbers\n        else\n            numbers = numbers + offset\n        end\n        coded &lt;&lt; numbers\n    end\n    return coded\nend\n\nputs encode(string, offset)\n</code></pre>\n\n<p>I am getting the desired encoded output: \"Ymnx nx f yjxy\", but I don't know why.  I was expecting a string of numbers since I never specified that the letters be turned back into letters.  Could someone please explain what is happening?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "rubygems", "nokogiri"], "comments": [{"owner": {"reputation": 333, "user_id": 857184, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yKQBD.jpg?s=128&g=1", "display_name": "David Stanley", "link": "https://stackoverflow.com/users/857184/david-stanley"}, "edited": false, "score": 1, "creation_date": 1491931080, "post_id": 43350132, "comment_id": 73767815, "body": "A *.so file is a Unix library file.  So something about your Ruby installation is messed up because its looking for Unix libraries, which of course it can&#39;t find on a Windows machine."}], "answers": [{"tags": [], "owner": {"reputation": 196, "user_id": 3753556, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9d6d6f0885840b1c5bdc043358dbc1fc?s=128&d=identicon&r=PG&f=1", "display_name": "SickLickWill", "link": "https://stackoverflow.com/users/3753556/sicklickwill"}, "is_accepted": false, "score": 1, "last_activity_date": 1491925733, "creation_date": 1491925733, "answer_id": 43350700, "question_id": 43350132, "link": "https://stackoverflow.com/questions/43350132/how-to-fix-permissions-error-when-installing-rails-on-windows/43350700#43350700", "title": "How to fix permissions error when installing Rails on Windows", "body": "<p>Have you tried executing: </p>\n\n<pre><code>gem install nokogiri -v '1.7.1'\n</code></pre>\n\n<p>In your command line?\nIf you are still getting an error, post the error message.  </p>\n"}, {"tags": [], "owner": {"reputation": 333, "user_id": 857184, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yKQBD.jpg?s=128&g=1", "display_name": "David Stanley", "link": "https://stackoverflow.com/users/857184/david-stanley"}, "is_accepted": false, "score": 1, "last_activity_date": 1491935541, "last_edit_date": 1491935541, "creation_date": 1491931539, "answer_id": 43352533, "question_id": 43350132, "link": "https://stackoverflow.com/questions/43350132/how-to-fix-permissions-error-when-installing-rails-on-windows/43352533#43352533", "title": "How to fix permissions error when installing Rails on Windows", "body": "<p>If you go to the <a href=\"http://www.nokogiri.org/tutorials/installing_nokogiri.html#windows\" rel=\"nofollow noreferrer\">Nokogiri website</a>, you'll find special instructions for  installing it on Windows. </p>\n\n<p>A number of Ruby libraries are called native libraries, meaning they're written in C for Unix, and so require Unix build tools to make.  </p>\n"}], "owner": {"reputation": 1, "user_id": 4520626, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f4f77738bc0e46e9fbafd9729ddd2db8?s=128&d=identicon&r=PG&f=1", "display_name": "gwarek", "link": "https://stackoverflow.com/users/4520626/gwarek"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 396, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1491935541, "creation_date": 1491924255, "last_edit_date": 1491935492, "question_id": 43350132, "link": "https://stackoverflow.com/questions/43350132/how-to-fix-permissions-error-when-installing-rails-on-windows", "title": "How to fix permissions error when installing Rails on Windows", "body": "<p>I have Ruby 2.2.6 and Rails 5.0 installed succesfully, however I don't seem to be able to install gems. Here's the error I get:</p>\n\n<pre><code>Errno::EACCES: Permission denied @ rb_sysopen -\nC:/RailsInstaller/Ruby2.3.0/lib/ruby/gems/2.3.0/gems/nokogiri-1.7.1-x86-    mingw32/lib/nokogiri/2.3/nokogiri.so\nAn error occurred while installing nokogiri (1.7.1), and Bundler cannot\ncontinue.\nMake sure that `gem install nokogiri -v '1.7.1'` succeeds before bundling.\n</code></pre>\n\n<p>I searched for solutions but all the suggestions are for Unix commands. </p>\n\n<p>I'm on Windows so I'm not sure how to enable permissions in order for this install to pass succesfully.</p>\n\n<p>Any (ELI5 level) suggestions for me?</p>\n"}, {"tags": ["ruby", "parsing", "text-files"], "answers": [{"tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": true, "score": 3, "last_activity_date": 1491945590, "last_edit_date": 1491945590, "creation_date": 1491933722, "answer_id": 43353163, "question_id": 43349217, "link": "https://stackoverflow.com/questions/43349217/fast-parsing-simple-large-files/43353163#43353163", "title": "Fast parsing simple large files", "body": "<p><strong>Code</strong></p>\n\n<pre><code>require 'set'\n\ndef save_blocks(fname_in, fname_out, *blocks)\n  sblocks = blocks.to_set\n  save = false\n  File.open(fname_out, 'w') do |f|\n    File.foreach(fname_in) do |line|\n      lc = line.chomp\n      save = sblocks.include?(lc) if lc =~ /\\A\\d+test\\z/\n      f.write(line) if save\n    end\n  end\nend\n</code></pre>\n\n<p><strong>Example</strong></p>\n\n<p>Let's first create a test file where <code>str</code> is the example string given in the question.</p>\n\n<pre><code>FNameIn  = \"test.in\"\nFNameOut = \"test.out\"\nFile.write(FNameIn, str)\n  #=&gt; 135\n</code></pre>\n\n<p>We can check that.</p>\n\n<pre><code>puts File.read(FNameIn)\n1test\n1111\n2222\n...\n3test\n0000\n4test\n...\n11test\n1111\n</code></pre>\n\n<p>Now we execute the method.</p>\n\n<pre><code>save_blocks(FNameIn, FNameOut, \"1test\", \"3test\", \"5test\")\n</code></pre>\n\n<p>We can confirm the output file was written correctly.</p>\n\n<pre><code>puts File.read(FNameOut)\n1test\n1111\n2222\n3333\n4444\n1test\n5555\n6666\n3test\n0000\n5test\n3333\n3333\n</code></pre>\n\n<p>I converted <code>blocks</code> to a set merely to speed the operation of <code>include?</code>. There is no need to explicitly close either file, as they are closed when their respective blocks return.</p>\n"}], "owner": {"reputation": 63, "user_id": 7160598, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/436456193df6d6abf5e7becc05a94c42?s=128&d=identicon&r=PG&f=1", "display_name": "Misha1991", "link": "https://stackoverflow.com/users/7160598/misha1991"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 89, "favorite_count": 0, "accepted_answer_id": 43353163, "answer_count": 1, "score": 0, "last_activity_date": 1491945590, "creation_date": 1491921868, "last_edit_date": 1491921998, "question_id": 43349217, "link": "https://stackoverflow.com/questions/43349217/fast-parsing-simple-large-files", "title": "Fast parsing simple large files", "body": "<p>I perform simple parsing of large files.\nI'm trying to select blocks from a large text file and write these blocks into a new text file. My current method works very slowly because parsing files include more 3 million strings.\nFor example:\nfile for parsing:</p>\n\n<pre><code>1test\n1111\n2222\n3333\n4444\n1test\n5555\n6666\n2test\n5555\n4444\n3test\n0000\n4test\n9999\n0000\n5test\n3333\n3333\n8test\n2222\n9test\n6666\n11test\n1111\n</code></pre>\n\n<p>I want et next data in new file:</p>\n\n<pre><code>1test\n1111\n2222\n3333\n4444\n1test\n5555\n6666\n2test\n5555\n4444\n3test\n0000\n4test\n9999\n0000\n5test\n3333\n3333\n</code></pre>\n\n<p>In shortly, I'm trying to select specific blocks from the source file.</p>\n\n<p>My Code:</p>\n\n<pre><code>arr = []\n\ndata = File.read(\"/path/to/file\")\n\nblocks = ['1test','2test','3test','4test','5test']\nblocks.each do |block|\n\nwant = data.match(/#{block}(.*)#{block}/m)[0]\nwant.each_line do |line|\n  arr &lt;&lt; line\n  File.open(\"/path/to/result/file\", 'w') { |file| file.write(\"#{res.join}\") }\nend\n\nend\n</code></pre>\n\n<p>I think that my problem is that I read the data \"want\" many times. \nIs there a way to write to the result file in one pass of the \"want\" data?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "mongodb", "mongoid"], "answers": [{"tags": [], "owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "is_accepted": true, "score": 2, "last_activity_date": 1491932472, "last_edit_date": 1491932472, "creation_date": 1491920789, "answer_id": 43348787, "question_id": 43348088, "link": "https://stackoverflow.com/questions/43348088/nomethoderror-undefined-method-for-embedded-object/43348787#43348787", "title": "NoMethodError (undefined method) for embedded object", "body": "<pre><code>@block = Block.where(:name =&gt; block_params[:name])  \n</code></pre>\n\n<p><code>.where</code> does not give you a single record - instead it gives you a criteria (somewhat like an <code>ActiveRecord::Relation</code>) which is a lazy loading object that may contain several or even no records at all. </p>\n\n<p>Instead you need to use <code>.find_by</code> to select a single record:</p>\n\n<pre><code>@block = Block.find_by(name: block_params[:name])  \n</code></pre>\n\n<p>This will also raise a <code>Mongoid::Errors::DocumentNotFound</code> if the Block cannot be found - which is a good thing. If the block cant be found trying to create a nested record would be pointless.</p>\n\n<p>There is also a much better way to create nested records - by using  <a href=\"https://github.com/rsl/stringex\" rel=\"nofollow noreferrer\"><code>accepts_nested_attributes_for</code></a>. This is also useful if you want to edit a document and its children in a single action.</p>\n\n<p>But what you are probably looking for in the first place is to make replies a nested resource:</p>\n\n<pre><code># config/routes.rb\nresources :blocks do\n  resources :replies, only: [:new, :create]\nend\n</code></pre>\n\n<hr>\n\n<pre><code>class RepliesController\n\n  before_action :set_block\n\n  # GET /blocks/:id/replies/new\n  def new\n    @reply = @block.replies.new\n  end\n\n  # POST /blocks/:id/replies\n  def create\n    @reply = @block.replies.new(reply_params)\n    if @reply.save\n      redirect_to @block, success: 'Thank you for your reply'\n    else\n      render :new, error: 'Your reply could not be saved'\n    end\n  end\n\n  private\n  def set_block\n    @block = Block.find(params[:id])\n  end\n\n  def reply_params\n    params.require(:reply).permit(:title, :payload)\n  end\nend\n</code></pre>\n\n<hr>\n\n<pre><code>&lt;%= form_for([@block, @reply || @block.replies.new]) do |f| %&gt;\n  &lt;div class=\"row\"&gt;\n    &lt;%= f.label :title %&gt;\n    &lt;%= f.text_field :title %&gt;\n  &lt;/div&gt;\n  &lt;div class=\"row\"&gt;\n    &lt;%= f.label :payload %&gt;\n    &lt;%= f.text_field :payload %&gt;\n  &lt;/div&gt;\n  &lt;%= f.submit %&gt;\n&lt;% end %&gt;\n</code></pre>\n"}], "owner": {"reputation": 313, "user_id": 3978088, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e49bad172d89541e3e48e5ca12917a57?s=128&d=identicon&r=PG&f=1", "display_name": "Mehmet Kemal Bayer", "link": "https://stackoverflow.com/users/3978088/mehmet-kemal-bayer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 421, "favorite_count": 0, "accepted_answer_id": 43348787, "answer_count": 1, "score": 0, "last_activity_date": 1491932472, "creation_date": 1491919037, "question_id": 43348088, "link": "https://stackoverflow.com/questions/43348088/nomethoderror-undefined-method-for-embedded-object", "title": "NoMethodError (undefined method) for embedded object", "body": "<p>I'm trying to save a Mongo::Document which embeds another one. My classes:</p>\n\n<pre><code>class Block \n  include Mongoid::Document    \n  field :name, type: String\n  field :text, type: String\n  embeds_many :replies         \nend\n</code></pre>\n\n<p>Other class: </p>\n\n<pre><code>class Reply\n    include Mongoid::Document    \n    field :content_type, type: String\n    field :title, type: String\n    field :payload, type: String\n    embedded_in :block\nend\n</code></pre>\n\n<p>And create method in controller:</p>\n\n<pre><code>def create\n        @block = Block.where(:name =&gt; block_params[:name])        \n        @quick_reply = Reply.new(title: params[:block][:quick_replies][:title], payload: params[:block][:quick_replies][:payload] )\n        @block.replies.push(@quick_reply)          \n        @block.name = params[:block][:name]\n        @block.text = params[:block][:text]      \n        if (@block.save)\n            respond_to do |format|\n                format.html {render :template =&gt; \"block/text/edit\"}\n            end            \n        end        \n    end\n</code></pre>\n\n<p>I'm getting this error: </p>\n\n<pre><code>undefined method `replies' for #&lt;Mongoid::Criteria:0x71cf550&gt;\n</code></pre>\n\n<p>I want to learn why and how can I solve the issue. Thanks.</p>\n"}]