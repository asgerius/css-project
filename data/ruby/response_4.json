[{"tags": ["ruby", "rvm", "homebrew", "osx-yosemite"], "owner": {"reputation": 39041, "user_id": 27358, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/fed1635f89478c88eda07e87de452bcf?s=128&d=identicon&r=PG", "display_name": "David Moles", "link": "https://stackoverflow.com/users/27358/david-moles"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 167, "favorite_count": 1, "answer_count": 0, "score": 1, "last_activity_date": 1423094100, "creation_date": 1423094100, "question_id": 28333832, "link": "https://stackoverflow.com/questions/28333832/configure-error-installing-ruby-1-9-3-on-mac-os-10-10-with-rvm-and-homebrew", "title": "Configure error installing Ruby 1.9.3 on Mac OS 10.10 with rvm and Homebrew", "body": "<p><em>Note for those thinking of marking this duplicate: yes, my XCode tools are installed and up to date.</em></p>\n\n<hr>\n\n<p>I started this morning with a system having neither rvm or Homebrew, and was able to install rvm and Ruby 1.9.3 successfully after overriding the default Homebrew installation directory, changing it from <code>/usr/local</code> to <code>/opt/brew</code>.</p>\n\n<p>This afternoon, though, after seeing various warnings about possible weird behavior for some Homebrew recipes if installed anywhere other than <code>/usr/local</code>, I decided to blow all that away and reinstall with Homebrew in the default location.</p>\n\n<p>Now, what worked this morning doesn't work: I get the error below (from <code>configure.log</code>):</p>\n\n<p><code>\n[2015-02-04 15:39:24] ./configure\ncurrent path: /Users/dmoles/.rvm/src/ruby-1.9.3-p551\nPATH=/usr/local/opt/gcc48/bin:/usr/local/opt/pkg-config/bin:/usr/local/opt/libtool/bin:/usr/local/opt/automake/bin:/usr/local/opt/autoconf/bin:/Users/dmoles/bin:/usr/local/bin:/usr/bin:/bin:/usr/sbin:/sbin:/opt/ImageMagick/bin:/opt/bin:/opt/apache-ant-1.9/bin:/opt/apache-maven-3/bin:/opt/apache-tomcat-8.0.15/bin:/Users/dmoles/.rvm/bin:/usr/local/bin\ncommand(7): ./configure --prefix=/Users/dmoles/.rvm/rubies/ruby-1.9.3-p551 --with-opt-dir=/usr/local/opt/libyaml:/usr/local/opt/readline:/usr/local/opt/libksba:/usr/local/opt/openssl --without-tcl --without-tk --disable-install-doc --enable-shared\nconfigure: WARNING: unrecognized options: --without-tcl, --without-tk\nchecking build system type... x86_64-apple-darwin14.1.0\nchecking host system type... x86_64-apple-darwin14.1.0\nchecking target system type... x86_64-apple-darwin14.1.0\nchecking whether the C compiler works... yes\nchecking for C compiler default output file name... a.out\nchecking for suffix of executables... \nchecking whether we are cross compiling... configure: error: in `/Users/dmoles/.rvm/src/ruby-1.9.3-p551':\nconfigure: error: cannot run C compiled programs.\nIf you meant to cross compile, use `--host'.\n</code></p>\n\n<p>My guess is that this morning it was using the XCode toolchain, and this afternoon it's using Homebrew's, which for some reason isn't working. But it's not clear to me just how that would happen, since I can see above that <code>rvm</code> is playing various games with <code>$PATH</code>. (My usual <code>$PATH</code>: <code>/Users/dmoles/bin:/usr/local/bin:/usr/bin:/bin:/usr/sbin:/sbin:/opt/ImageMagick/bin:/opt/bin:/opt/apache-ant-1.9/bin:/opt/apache-maven-3/bin:/opt/apache-tomcat-8.0.15/bin:/Users/dmoles/.rvm/bin</code> -- without all the <code>/usr/local/opt</code> at the beginning or the extra <code>/usr/local/bin</code> at the end.)</p>\n\n<p>My <code>rvm</code> version is 1.26.10; <code>gcc-48</code> is Homebrew gcc48 4.8.4.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "gem", "rubygems"], "answers": [{"comments": [{"owner": {"reputation": 9074, "user_id": 323578, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/i6YAT.png?s=128&g=1", "display_name": "josephmisiti", "link": "https://stackoverflow.com/users/323578/josephmisiti"}, "edited": false, "score": 0, "creation_date": 1423094412, "post_id": 28333819, "comment_id": 45014533, "body": "sorry for the confusion - The comment on the pull request was useless. but that line worked! that is what i was looking for - I didn&#39;t know that path parameter existed"}, {"owner": {"reputation": 9074, "user_id": 323578, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/i6YAT.png?s=128&g=1", "display_name": "josephmisiti", "link": "https://stackoverflow.com/users/323578/josephmisiti"}, "edited": false, "score": 0, "creation_date": 1423094553, "post_id": 28333819, "comment_id": 45014569, "body": "one other question, if I want to use the forked version on github, after I push my fixes (because they havnt been merged it) - how to I specify that?"}, {"owner": {"reputation": 19590, "user_id": 1218080, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/46fbeb5e597661c317c3645b3f0109ec?s=128&d=identicon&r=PG", "display_name": "holographic-principle", "link": "https://stackoverflow.com/users/1218080/holographic-principle"}, "reply_to_user": {"reputation": 9074, "user_id": 323578, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/i6YAT.png?s=128&g=1", "display_name": "josephmisiti", "link": "https://stackoverflow.com/users/323578/josephmisiti"}, "edited": false, "score": 0, "creation_date": 1423094685, "post_id": 28333819, "comment_id": 45014607, "body": "@josephmisiti <code>gem &quot;swagger-docs&quot;, :git =&gt; &quot;https:&#47;&#47;github.com&#47;your_username&#47;swagger-docs.git&quot;</code>"}, {"owner": {"reputation": 14010, "user_id": 3109182, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/a4b305f0077055b4fdcf715067775d5a?s=128&d=identicon&r=PG", "display_name": "Anthony", "link": "https://stackoverflow.com/users/3109182/anthony"}, "reply_to_user": {"reputation": 9074, "user_id": 323578, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/i6YAT.png?s=128&g=1", "display_name": "josephmisiti", "link": "https://stackoverflow.com/users/323578/josephmisiti"}, "edited": false, "score": 0, "creation_date": 1423094801, "post_id": 28333819, "comment_id": 45014641, "body": "updated my answer @josephmisiti - but finishingmove is right, you have the option to specify a branch if you want"}], "tags": [], "owner": {"reputation": 14010, "user_id": 3109182, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/a4b305f0077055b4fdcf715067775d5a?s=128&d=identicon&r=PG", "display_name": "Anthony", "link": "https://stackoverflow.com/users/3109182/anthony"}, "is_accepted": true, "score": 1, "last_activity_date": 1423095860, "last_edit_date": 1423095860, "creation_date": 1423094039, "answer_id": 28333819, "question_id": 28333800, "link": "https://stackoverflow.com/questions/28333800/install-a-gem-locally-for-development/28333819#28333819", "title": "Install a gem locally for development", "body": "<p>If you want your Gemfile to use a local gem, use path like this:</p>\n\n<pre><code>gem \"swagger-docs\", :path =&gt; \"/Users/name/my_swagger_fork\"\n</code></pre>\n\n<p>If you want to use a git remote, you can do this:</p>\n\n<pre><code>gem \"swagger-docs\", :git =&gt; \"git://github.com/user/swagger.git\", :branch =&gt; \"my-awesome-branch\"\n</code></pre>\n"}], "owner": {"reputation": 9074, "user_id": 323578, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/i6YAT.png?s=128&g=1", "display_name": "josephmisiti", "link": "https://stackoverflow.com/users/323578/josephmisiti"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 99, "favorite_count": 0, "accepted_answer_id": 28333819, "answer_count": 1, "score": 0, "last_activity_date": 1423182729, "creation_date": 1423093929, "last_edit_date": 1423182729, "question_id": 28333800, "link": "https://stackoverflow.com/questions/28333800/install-a-gem-locally-for-development", "title": "Install a gem locally for development", "body": "<p>I'm new to ruby (many years of Python experience) and want to install this <a href=\"https://github.com/richhollis/swagger-docs\" rel=\"nofollow\">gem</a> locally to replace the existing one which I installed using <code>gem install swagger-docs</code>. I have tried everything but cannot get rails to pick up my local version.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "post", "input", "blogs"], "answers": [{"tags": [], "owner": {"reputation": 613, "user_id": 1128785, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/d48a15623e46723e19ff0f6d6f218106?s=128&d=identicon&r=PG", "display_name": "kengo", "link": "https://stackoverflow.com/users/1128785/kengo"}, "is_accepted": false, "score": 0, "last_activity_date": 1423105465, "creation_date": 1423105465, "answer_id": 28335492, "question_id": 28333761, "link": "https://stackoverflow.com/questions/28333761/filter-paginated-posts-by-date-introduced-by-user-rails/28335492#28335492", "title": "Filter paginated posts by date introduced by user (Rails)", "body": "<p>You can search records in index method like below.</p>\n\n<pre><code>date_to_search = Date.parse('2015/1/1')\nPost.where(\n  'created_at&gt;=? and created_at&lt;=?', \n  date_to_search.beginning_of_day\n)\n</code></pre>\n\n<p>created_at is saved as UTC in rails, so you need to specify datetime. Not only date, to get correct data in your local time.</p>\n"}], "owner": {"reputation": 17, "user_id": 3552119, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/abd4b98bf794d6820c45c3898b726caa?s=128&d=identicon&r=PG", "display_name": "ank3r", "link": "https://stackoverflow.com/users/3552119/ank3r"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 69, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1423105465, "creation_date": 1423093666, "question_id": 28333761, "link": "https://stackoverflow.com/questions/28333761/filter-paginated-posts-by-date-introduced-by-user-rails", "title": "Filter paginated posts by date introduced by user (Rails)", "body": "<p>I have the post_controller with index method like this:</p>\n\n<pre><code>def index\n    @posts = Post.paginate(:page =&gt; params[:page], :per_page =&gt; 3)\nend\n</code></pre>\n\n<p>and in app / views / posts / index.html.erb i have:</p>\n\n<pre><code>.\n.\n.\n&lt;table&gt;\n  &lt;tr&gt;\n    &lt;th&gt;User&lt;/th&gt;\n    &lt;th&gt;Post&lt;/th&gt;\n    &lt;th&gt;Date&lt;/th&gt;\n    &lt;th colspan=\"3\"&gt;&lt;/th&gt;\n  &lt;/tr&gt;\n\n  &lt;% @posts.each do |post| %&gt;\n    &lt;tr&gt;\n      &lt;td&gt;&lt;%= post.user.id %&gt;&lt;/td&gt;\n      &lt;td&gt;&lt;%= post.text %&gt;&lt;/td&gt;\n      &lt;td&gt;&lt;%= post.created_at %&gt;&lt;/td&gt;\n      &lt;td&gt;&lt;%= link_to 'Show', post_path(post) %&gt;&lt;/td&gt;\n      &lt;% if can? :update, post %&gt;\n        &lt;td&gt;&lt;%= link_to 'Edit', edit_post_path(post) %&gt;&lt;/td&gt;\n      &lt;% end %&gt;\n\n      &lt;% if can? :destroy, post %&gt;\n        &lt;td&gt;&lt;%= link_to 'Destroy', post_path(post),\n              method: :delete,\n              data: { confirm: 'Are you sure?' } %&gt;&lt;/td&gt;\n      &lt;% end %&gt;\n    &lt;/tr&gt;\n\n  &lt;% end %&gt;\n  &lt;%= will_paginate @posts %&gt;\n&lt;/table&gt;\n</code></pre>\n\n<p>So i want a field in this view, where an user can input a date and the view shows all posts wich were created on that date onwards. (Posts date > date_by_user). I tried with \"where\" method but i couldnt. I dont want to use any gem. So, what is the best and simple way to do that?</p>\n"}, {"tags": ["ruby", "sorting", "hash"], "comments": [{"owner": {"reputation": 15950, "user_id": 324978, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/9a271d8f6946301fa1f0c0fc4c7b9f14?s=128&d=identicon&r=PG", "display_name": "robbrit", "link": "https://stackoverflow.com/users/324978/robbrit"}, "edited": false, "score": 0, "creation_date": 1423091732, "post_id": 28333390, "comment_id": 45013674, "body": "What is the value of <code>b</code>?"}, {"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 1, "creation_date": 1423091764, "post_id": 28333390, "comment_id": 45013685, "body": "What I can immediately say is that your hash is unusually complex. That is already a sign that you are doing something wrong. It is also difficult to give you advice on what to do because of the complexity. Reconsider the structure of the data."}, {"owner": {"reputation": 7544, "user_id": 1085998, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/459252fca62e56c1131babdba2b1babe?s=128&d=identicon&r=PG", "display_name": "daremkd", "link": "https://stackoverflow.com/users/1085998/daremkd"}, "edited": false, "score": 1, "creation_date": 1423092118, "post_id": 28333390, "comment_id": 45013828, "body": "Hashes DO have order starting from Ruby 1.9.3."}, {"owner": {"reputation": 13, "user_id": 4215177, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-rOGiZHl3Y_E/AAAAAAAAAAI/AAAAAAAAAAA/U1aNK7udu0I/photo.jpg?sz=128", "display_name": "Simon", "link": "https://stackoverflow.com/users/4215177/simon"}, "edited": false, "score": 0, "creation_date": 1423092661, "post_id": 28333390, "comment_id": 45014006, "body": "b is the hash above.  Yes, it&#39;s a complex hash because I am comparing trains heading in one direction with all the possible train each one can connect with that are  heading in the other direction. I&#39;ve already thought about changing the hash but since I have everything else working bar the sort I thought I&#39;d ask the experts here first"}, {"owner": {"reputation": 32543, "user_id": 528726, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/6307569a99dd77fff0463032051d7e39?s=128&d=identicon&r=PG", "display_name": "joelparkerhenderson", "link": "https://stackoverflow.com/users/528726/joelparkerhenderson"}, "edited": false, "score": 0, "creation_date": 1423092688, "post_id": 28333390, "comment_id": 45014010, "body": "Your code runs fine on my system. I edited your code in your question to clarify what the hash is, and remove the &quot;b&quot; variable name -- please see if I got your intent correct."}, {"owner": {"reputation": 32543, "user_id": 528726, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/6307569a99dd77fff0463032051d7e39?s=128&d=identicon&r=PG", "display_name": "joelparkerhenderson", "link": "https://stackoverflow.com/users/528726/joelparkerhenderson"}, "edited": false, "score": 0, "creation_date": 1425614476, "post_id": 28333390, "comment_id": 46044988, "body": "Simon, did my answer help you? If so, could you do me a favor and upvote it and/or accept it? (Otherwise I&#39;d prefer to delete it if it didn&#39;t help)"}], "owner": {"reputation": 13, "user_id": 4215177, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-rOGiZHl3Y_E/AAAAAAAAAAI/AAAAAAAAAAA/U1aNK7udu0I/photo.jpg?sz=128", "display_name": "Simon", "link": "https://stackoverflow.com/users/4215177/simon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 890, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1423094709, "creation_date": 1423091585, "last_edit_date": 1423092573, "question_id": 28333390, "link": "https://stackoverflow.com/questions/28333390/ruby-sort-by-not-working-and-sometimes-throwing-argumenterror-comparison-of-has", "title": "Ruby sort_by not working and sometimes throwing ArgumentError: comparison of Hash with Hash failed", "body": "<p>I understand that a hash is not supposed to have any order and what I am trying to do is gather data from a number of different APIs and then sort the results. My hash looks like this</p>\n\n<pre><code>hash = \\ \n{{:train_id=&gt;[\"DALY\", \"1\"]}=&gt;\n  {0=&gt;\n    [{:train_no=&gt;0,\n      :arrival_station=&gt;\"MONT\",\n      :destination_departure_time=&gt;\"8\",\n      :destination=&gt;\"Pittsburg/Bay Point\"}],\n   1=&gt;\n    [{:train_no=&gt;1,\n      :arrival_station=&gt;\"MONT\",\n      :destination_departure_time=&gt;\"23\",\n      :destination=&gt;\"Pittsburg/Bay Point\"}],\n   2=&gt;\n    [{:train_no=&gt;2,\n      :arrival_station=&gt;\"MONT\",\n      :destination_departure_time=&gt;\"37\",\n      :destination=&gt;\"Pittsburg/Bay Point\"}],\n   3=&gt;\n    [{:train_no=&gt;0,\n      :arrival_station=&gt;\"POWL\",\n      :destination_departure_time=&gt;\"7\",\n      :destination=&gt;\"Pittsburg/Bay Point\"}],\n   4=&gt;\n    [{:train_no=&gt;1,\n      :arrival_station=&gt;\"POWL\",\n      :destination_departure_time=&gt;\"21\",\n      :destination=&gt;\"Pittsburg/Bay Point\"}],\n   5=&gt;\n    [{:train_no=&gt;2,\n      :arrival_station=&gt;\"POWL\",\n      :destination_departure_time=&gt;\"36\",\n      :destination=&gt;\"Pittsburg/Bay Point\"}],\n   6=&gt;\n    [{:train_no=&gt;0,\n      :arrival_station=&gt;\"CIVC\",\n      :destination_departure_time=&gt;\"5\",\n      :destination=&gt;\"Pittsburg/Bay Point\"}],\n   7=&gt;\n    [{:train_no=&gt;1,\n      :arrival_station=&gt;\"CIVC\",\n      :destination_departure_time=&gt;\"19\",\n      :destination=&gt;\"Pittsburg/Bay Point\"}],\n   8=&gt;\n    [{:train_no=&gt;2,\n      :arrival_station=&gt;\"CIVC\",\n      :destination_departure_time=&gt;\"34\",\n      :destination=&gt;\"Pittsburg/Bay Point\"}],\n   9=&gt;\n    [{:train_no=&gt;0,\n      :arrival_station=&gt;\"16TH\",\n      :destination_departure_time=&gt;\"17\",\n      :destination=&gt;\"Pittsburg/Bay Point\"}],\n   10=&gt;\n    [{:train_no=&gt;1,\n      :arrival_station=&gt;\"16TH\",\n      :destination_departure_time=&gt;\"32\",\n      :destination=&gt;\"Pittsburg/Bay Point\"}]},\n\n {:train_id=&gt;[\"DALY\", \"5\"]}=&gt;{}\n}\n</code></pre>\n\n<p>I need to sort by :train_no and when I use </p>\n\n<pre><code>sorted = hash.sort_by{|k,v| v[:train_no] } \n</code></pre>\n\n<p>I sometimes get the error </p>\n\n<pre><code>ArgumentError: comparison of Hash with Hash failed\n</code></pre>\n\n<p>which is possibly because one of the values is null, and if it doesn't fail it just returns the same unsorted sorted results.</p>\n\n<p>Any guidance on what I am doing wrong (other than using a hash to store something I want to sort)?</p>\n"}, {"tags": ["ruby", "database", "cassandra"], "comments": [{"owner": {"reputation": 14010, "user_id": 3109182, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/a4b305f0077055b4fdcf715067775d5a?s=128&d=identicon&r=PG", "display_name": "Anthony", "link": "https://stackoverflow.com/users/3109182/anthony"}, "edited": false, "score": 0, "creation_date": 1423093756, "post_id": 28333292, "comment_id": 45014333, "body": "ActiveRecord is an ORM, it sounds like you just need a database driver like this for <a href=\"https://github.com/cassandra-rb/cassandra\" rel=\"nofollow noreferrer\">Cassandra</a>"}, {"owner": {"reputation": 46, "user_id": 652624, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GMN1D.jpg?s=128&g=1", "display_name": "mhakeem", "link": "https://stackoverflow.com/users/652624/mhakeem"}, "reply_to_user": {"reputation": 14010, "user_id": 3109182, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/a4b305f0077055b4fdcf715067775d5a?s=128&d=identicon&r=PG", "display_name": "Anthony", "link": "https://stackoverflow.com/users/3109182/anthony"}, "edited": false, "score": 0, "creation_date": 1423094157, "post_id": 28333292, "comment_id": 45014459, "body": "I am using a driver. The team doesn&#39;t want deal with driver&#39;s API. Sorry for not being clear."}, {"owner": {"reputation": 14010, "user_id": 3109182, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/a4b305f0077055b4fdcf715067775d5a?s=128&d=identicon&r=PG", "display_name": "Anthony", "link": "https://stackoverflow.com/users/3109182/anthony"}, "edited": false, "score": 0, "creation_date": 1423094242, "post_id": 28333292, "comment_id": 45014483, "body": "so then you want an ORM like this? <a href=\"https://github.com/cequel/cequel/\" rel=\"nofollow noreferrer\">github.com/cequel/cequel</a>"}, {"owner": {"reputation": 46, "user_id": 652624, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GMN1D.jpg?s=128&g=1", "display_name": "mhakeem", "link": "https://stackoverflow.com/users/652624/mhakeem"}, "reply_to_user": {"reputation": 14010, "user_id": 3109182, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/a4b305f0077055b4fdcf715067775d5a?s=128&d=identicon&r=PG", "display_name": "Anthony", "link": "https://stackoverflow.com/users/3109182/anthony"}, "edited": false, "score": 0, "creation_date": 1423094713, "post_id": 28333292, "comment_id": 45014615, "body": "Not really. I have seen that one before. We&#39;re working on old Cassandra where it relies on thrift. I just want a general abstract example to connect and disconnect automatically."}], "owner": {"reputation": 46, "user_id": 652624, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GMN1D.jpg?s=128&g=1", "display_name": "mhakeem", "link": "https://stackoverflow.com/users/652624/mhakeem"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 43, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1423094487, "creation_date": 1423091150, "last_edit_date": 1423094487, "question_id": 28333292, "link": "https://stackoverflow.com/questions/28333292/ruby-implicit-db-connection-like-activerecord", "title": "Ruby Implicit DB Connection like ActiveRecord", "body": "<p>I'm wondering if there is a way to connect and disconnect to a DB implicitly using Ruby like <code>ActiveRecord</code>. I'm working on connecting with Cassandra and the team doesn't want to write the connection lines manually. They just want to give the table name (a.k.a. Column Family) to the class I want to build and move on from there.</p>\n\n<p>I also want to assure that I don't connect and disconnect every time when performing parallel insertions to a table (but disconnect after the whole insertions are finished) since the reconnection process is very expensive and slows down the task.</p>\n\n<p>I couldn't find any solution, and the version that my ex-coworker wrote connects and disconnects after each task like the select statement, and the parallel insert. Any suggestions? A code example of any kind of DB would be very appreciated. Thanks.</p>\n\n<p><strong>NOTE:</strong>\nTo clarify, I am using a Cassandra driver. I'm not making an ActiveRecord like ORM for Cassandra, but want to expose APIs where the devs don't have to remember writing connecting and disconnecting lines.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "redirect", "ruby-on-rails-4", "url-redirection"], "comments": [{"owner": {"reputation": 859, "user_id": 3304070, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cbcdb5bbf368ac5733bdad5c9568f81f?s=128&d=identicon&r=PG&f=1", "display_name": "Loenvpy", "link": "https://stackoverflow.com/users/3304070/loenvpy"}, "reply_to_user": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1423090749, "post_id": 28333172, "comment_id": 45013292, "body": "Why I&#39;m redirecting to <a href=\"http://localhost:3000/1/profile\" rel=\"nofollow noreferrer\">localhost:3000/1/profile</a> instead of <a href=\"http://localhost:3000/profile\" rel=\"nofollow noreferrer\">localhost:3000/profile</a>, You have vote down the question even before to read it thank you"}, {"owner": {"reputation": 427, "user_id": 1837211, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f77c0f99b2f00ea852ce3e4c5f9c337b?s=128&d=identicon&r=PG", "display_name": "vpsz", "link": "https://stackoverflow.com/users/1837211/vpsz"}, "edited": false, "score": 0, "creation_date": 1423091116, "post_id": 28333172, "comment_id": 45013459, "body": "Please post your routes.rb and snippets of the relevant models."}, {"owner": {"reputation": 859, "user_id": 3304070, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cbcdb5bbf368ac5733bdad5c9568f81f?s=128&d=identicon&r=PG&f=1", "display_name": "Loenvpy", "link": "https://stackoverflow.com/users/3304070/loenvpy"}, "edited": false, "score": 0, "creation_date": 1423091247, "post_id": 28333172, "comment_id": 45013501, "body": "my route for profile is  resource :profile  and the profile model is belongs_to :user \t \tacts_as_taggable_on :skills \t \thas_many :profile_languages  accepts_nested_attributes_for :profile_languages  ......"}, {"owner": {"reputation": 427, "user_id": 1837211, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f77c0f99b2f00ea852ce3e4c5f9c337b?s=128&d=identicon&r=PG", "display_name": "vpsz", "link": "https://stackoverflow.com/users/1837211/vpsz"}, "edited": false, "score": 0, "creation_date": 1423093174, "post_id": 28333172, "comment_id": 45014161, "body": "Why does the route for profiles#show (line 4 of the snippet) show up under &#39;edit_profile&#39;? Shouldn&#39;t it be on line 1 or 2 under just the &#39;profile&#39; helper? I think your routes file is more complex and you&#39;re not showing us enough of it."}, {"owner": {"reputation": 859, "user_id": 3304070, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cbcdb5bbf368ac5733bdad5c9568f81f?s=128&d=identicon&r=PG&f=1", "display_name": "Loenvpy", "link": "https://stackoverflow.com/users/3304070/loenvpy"}, "edited": false, "score": 0, "creation_date": 1423093510, "post_id": 28333172, "comment_id": 45014235, "body": "So because the profiles#show is in the 4 line you think that my routes is complex? all my routes are like this and I&#39;m showing the entire route i could show you the routes file but it would be unnecessary i think but if this can help i will show it"}], "answers": [{"comments": [{"owner": {"reputation": 859, "user_id": 3304070, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cbcdb5bbf368ac5733bdad5c9568f81f?s=128&d=identicon&r=PG&f=1", "display_name": "Loenvpy", "link": "https://stackoverflow.com/users/3304070/loenvpy"}, "edited": false, "score": 0, "creation_date": 1423091708, "post_id": 28333360, "comment_id": 45013669, "body": "so are suggesting to use profile_path  instead because i have try it and it give the same result"}, {"owner": {"reputation": 1531, "user_id": 976035, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/913e70d8b28f4ea2bd30a735e23d25b2?s=128&d=identicon&r=PG", "display_name": "Finks", "link": "https://stackoverflow.com/users/976035/finks"}, "reply_to_user": {"reputation": 859, "user_id": 3304070, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cbcdb5bbf368ac5733bdad5c9568f81f?s=128&d=identicon&r=PG&f=1", "display_name": "Loenvpy", "link": "https://stackoverflow.com/users/3304070/loenvpy"}, "edited": false, "score": 0, "creation_date": 1423091945, "post_id": 28333360, "comment_id": 45013760, "body": "how about posting the result of your routes. Run this in your command line <code>rake routes</code>"}, {"owner": {"reputation": 1531, "user_id": 976035, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/913e70d8b28f4ea2bd30a735e23d25b2?s=128&d=identicon&r=PG", "display_name": "Finks", "link": "https://stackoverflow.com/users/976035/finks"}, "reply_to_user": {"reputation": 859, "user_id": 3304070, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cbcdb5bbf368ac5733bdad5c9568f81f?s=128&d=identicon&r=PG&f=1", "display_name": "Loenvpy", "link": "https://stackoverflow.com/users/3304070/loenvpy"}, "edited": false, "score": 0, "creation_date": 1423092118, "post_id": 28333360, "comment_id": 45013829, "body": "Just to be sure, if we&#39;re on the same page, your problem is, when you try and <i>save</i> your edits, you are redirected to <code>&#47;profile&#47;1</code> right?"}, {"owner": {"reputation": 859, "user_id": 3304070, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cbcdb5bbf368ac5733bdad5c9568f81f?s=128&d=identicon&r=PG&f=1", "display_name": "Loenvpy", "link": "https://stackoverflow.com/users/3304070/loenvpy"}, "edited": false, "score": 0, "creation_date": 1423092201, "post_id": 28333360, "comment_id": 45013855, "body": "No I&#39;m redirected to /1/profile/ and not /profile/1 but what I want is to be redirected to /profile"}], "tags": [], "owner": {"reputation": 1531, "user_id": 976035, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/913e70d8b28f4ea2bd30a735e23d25b2?s=128&d=identicon&r=PG", "display_name": "Finks", "link": "https://stackoverflow.com/users/976035/finks"}, "is_accepted": false, "score": 0, "last_activity_date": 1423091457, "creation_date": 1423091457, "answer_id": 28333360, "question_id": 28333172, "link": "https://stackoverflow.com/questions/28333172/rails-redirecting-after-an-action/28333360#28333360", "title": "Rails: Redirecting after an action", "body": "<p>Because you're doing a <code>redirect_to @profile</code> in your update action. This is one of <em>Rails Magic</em> that you will encounter. The convention is, whenever you use an object in a <code>redirect_to</code>, it will automatically redirect you to the objects <code>show</code> page.</p>\n"}, {"comments": [{"owner": {"reputation": 859, "user_id": 3304070, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cbcdb5bbf368ac5733bdad5c9568f81f?s=128&d=identicon&r=PG&f=1", "display_name": "Loenvpy", "link": "https://stackoverflow.com/users/3304070/loenvpy"}, "edited": false, "score": 0, "creation_date": 1423091668, "post_id": 28333378, "comment_id": 45013657, "body": "even if I use profile_path I&#39;m redirecting to the same route"}, {"owner": {"reputation": 427, "user_id": 1837211, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f77c0f99b2f00ea852ce3e4c5f9c337b?s=128&d=identicon&r=PG", "display_name": "vpsz", "link": "https://stackoverflow.com/users/1837211/vpsz"}, "reply_to_user": {"reputation": 859, "user_id": 3304070, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cbcdb5bbf368ac5733bdad5c9568f81f?s=128&d=identicon&r=PG&f=1", "display_name": "Loenvpy", "link": "https://stackoverflow.com/users/3304070/loenvpy"}, "edited": false, "score": 0, "creation_date": 1423091934, "post_id": 28333378, "comment_id": 45013751, "body": "idk, works for me with my home page: resource :home, only: [:show], controller: &#39;home&#39;. Produces helper home_path that generates /home and gets routed to HomeController#show."}, {"owner": {"reputation": 859, "user_id": 3304070, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cbcdb5bbf368ac5733bdad5c9568f81f?s=128&d=identicon&r=PG&f=1", "display_name": "Loenvpy", "link": "https://stackoverflow.com/users/3304070/loenvpy"}, "edited": false, "score": 0, "creation_date": 1423092381, "post_id": 28333378, "comment_id": 45013911, "body": "the problem is when editing the profile I&#39;m not redirected to the show page but what you describe already work for me"}], "tags": [], "owner": {"reputation": 427, "user_id": 1837211, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f77c0f99b2f00ea852ce3e4c5f9c337b?s=128&d=identicon&r=PG", "display_name": "vpsz", "link": "https://stackoverflow.com/users/1837211/vpsz"}, "is_accepted": false, "score": 0, "last_activity_date": 1423091529, "creation_date": 1423091529, "answer_id": 28333378, "question_id": 28333172, "link": "https://stackoverflow.com/questions/28333172/rails-redirecting-after-an-action/28333378#28333378", "title": "Rails: Redirecting after an action", "body": "<p>You don't want to redirect to the @profile object, but rather just profile_path (which is one of your singular resource routes). The action in ProfileController will handle looking up the profile object for the current_user.</p>\n"}], "owner": {"reputation": 859, "user_id": 3304070, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cbcdb5bbf368ac5733bdad5c9568f81f?s=128&d=identicon&r=PG&f=1", "display_name": "Loenvpy", "link": "https://stackoverflow.com/users/3304070/loenvpy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 168, "favorite_count": 0, "answer_count": 2, "score": -4, "last_activity_date": 1423247251, "creation_date": 1423090617, "last_edit_date": 1423247251, "question_id": 28333172, "link": "https://stackoverflow.com/questions/28333172/rails-redirecting-after-an-action", "title": "Rails: Redirecting after an action", "body": "<p>I have an profile model that belong to a user actually when i want to edit my profile i'm redirecting to <code>http://localhost:3000/1/profile</code> instead of <code>http://localhost:3000/profile</code> why? this is my route for profile <code>resource :profile</code></p>\n\n<p>and this is my profile controller</p>\n\n<pre><code>  before_filter :authenticate_user!\n\n  def show\n    @user = current_user \n    @profile  = @user.profile\n  end\n\n  def update\n\n    @user = current_user\n    @profile = @user.profile\n\n    respond_to do |format|\n      if @profile.update(profile_params)\n        flash[:notice] = \"profile \u00e0 \u00e9t\u00e9 mis \u00e0 jour!\"\n        format.html { redirect_to @profile }\n      else\n        format.html { render action: 'edit' }\n      end\n    end\n  end\n</code></pre>\n\n<p>Update</p>\n\n<p>this are the profile routes</p>\n\n<pre><code> profile POST                  (/:locale)/profile(.:format)                                profiles#create {:locale=&gt;/en|fr/}\n                 new_profile GET                   (/:locale)/profile/new(.:format)                            profiles#new {:locale=&gt;/en|fr/}\n                edit_profile GET                   (/:locale)/profile/edit(.:format)                           profiles#edit {:locale=&gt;/en|fr/}\n                             GET                   (/:locale)/profile(.:format)                                profiles#show {:locale=&gt;/en|fr/}\n                             PATCH                 (/:locale)/profile(.:format)                                profiles#update {:locale=&gt;/en|fr/}\n                             PUT                   (/:locale)/profile(.:format)                                profiles#update {:locale=&gt;/en|fr/}\n                             DELETE                (/:locale)/profile(.:format)                                profiles#destroy {:locale=&gt;/en|fr/}\n</code></pre>\n"}, {"tags": ["ruby", "refactoring"], "comments": [{"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1423090606, "post_id": 28333156, "comment_id": 45013219, "body": "It is not clear what you want. Give an expected output."}, {"owner": {"reputation": 1755, "user_id": 3247496, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/nDtef.png?s=128&g=1", "display_name": "Ahmad Al-kheat", "link": "https://stackoverflow.com/users/3247496/ahmad-al-kheat"}, "reply_to_user": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1423091024, "post_id": 28333156, "comment_id": 45013421, "body": "Max answered me, looks like it&#39; clear what I am asking to some people."}], "answers": [{"comments": [{"owner": {"reputation": 1755, "user_id": 3247496, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/nDtef.png?s=128&g=1", "display_name": "Ahmad Al-kheat", "link": "https://stackoverflow.com/users/3247496/ahmad-al-kheat"}, "edited": false, "score": 0, "creation_date": 1423090992, "post_id": 28333225, "comment_id": 45013410, "body": "Thank you very much Max, this is what I am looking for. Will accept once I can"}], "tags": [], "owner": {"reputation": 18079, "user_id": 503402, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/873ad707fb34aac8fbdfbfec676e02e9?s=128&d=identicon&r=PG", "display_name": "Max", "link": "https://stackoverflow.com/users/503402/max"}, "is_accepted": true, "score": 2, "last_activity_date": 1423091156, "last_edit_date": 1423091156, "creation_date": 1423090849, "answer_id": 28333225, "question_id": 28333156, "link": "https://stackoverflow.com/questions/28333156/ruby-refactoring-issue/28333225#28333225", "title": "Ruby refactoring issue", "body": "<p>The terminology for that is a <em>permutation</em>. Ruby has a <a href=\"http://ruby-doc.org/core-2.2.0/Array.html#method-i-permutation\" rel=\"nofollow\">built-in</a> method for doing so:</p>\n\n<pre><code>@array.permutation(3) do |first, second, third|\n  # do something\nend\n</code></pre>\n"}], "owner": {"reputation": 1755, "user_id": 3247496, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/nDtef.png?s=128&g=1", "display_name": "Ahmad Al-kheat", "link": "https://stackoverflow.com/users/3247496/ahmad-al-kheat"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 30, "favorite_count": 0, "accepted_answer_id": 28333225, "answer_count": 1, "score": 0, "last_activity_date": 1423091281, "creation_date": 1423090541, "last_edit_date": 1423091281, "question_id": 28333156, "link": "https://stackoverflow.com/questions/28333156/ruby-refactoring-issue", "title": "Ruby refactoring issue", "body": "<p>Let's say I have an <code>@array = [1 ,2 ,3]</code>\nI want to create three blocks of each number of the array with the rest like this : </p>\n\n<pre><code>@array.each do |first|\n  (@array - [first]).each do |second|\n    (@array - [first] - [second]) do |third|\n      #do something\n</code></pre>\n\n<p>So each block iterates through the entire array except the element that's being used by the preceding block. But this is kind of smelly and repetitive, because for each block I need to delete the preceding elements , what is the best way to refactor these blocks? </p>\n\n<p>Thanks</p>\n"}, {"tags": ["ruby", "inheritance", "metaprogramming"], "comments": [{"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 1, "creation_date": 1423090557, "post_id": 28332934, "comment_id": 45013194, "body": "Since you have singleton methods, inheritance is irrelevant."}, {"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1423091017, "post_id": 28332934, "comment_id": 45013420, "body": "What you are attempting is a design flaw. <code>SubClass#do_something</code> calls <code>SubClass#do_something</code>. You can call <code>SuperClass#do_something</code> from within it, but not the other way around."}], "answers": [{"comments": [{"owner": {"reputation": 2080, "user_id": 670433, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/6dabedc47915bc771055f848ef07fc11?s=128&d=identicon&r=PG", "display_name": "s2t2", "link": "https://stackoverflow.com/users/670433/s2t2"}, "edited": false, "score": 0, "creation_date": 1423090587, "post_id": 28333047, "comment_id": 45013209, "body": "yes, the goal is to avoid using any code (including <code>super</code>) in the subclass."}, {"owner": {"reputation": 41246, "user_id": 129655, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/aa81588f4aa842d08c9539f9313df4cc?s=128&d=identicon&r=PG", "display_name": "Platinum Azure", "link": "https://stackoverflow.com/users/129655/platinum-azure"}, "reply_to_user": {"reputation": 2080, "user_id": 670433, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/6dabedc47915bc771055f848ef07fc11?s=128&d=identicon&r=PG", "display_name": "s2t2", "link": "https://stackoverflow.com/users/670433/s2t2"}, "edited": false, "score": 2, "creation_date": 1423090768, "post_id": 28333047, "comment_id": 45013303, "body": "If you want no code in the subclass, how do you expect to have any meaningful difference in behavior in the first place?"}, {"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1423090809, "post_id": 28333047, "comment_id": 45013320, "body": "Note that the OP changed the question."}], "tags": [], "owner": {"reputation": 41246, "user_id": 129655, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/aa81588f4aa842d08c9539f9313df4cc?s=128&d=identicon&r=PG", "display_name": "Platinum Azure", "link": "https://stackoverflow.com/users/129655/platinum-azure"}, "is_accepted": false, "score": 6, "last_activity_date": 1423091494, "last_edit_date": 1423091494, "creation_date": 1423090020, "answer_id": 28333047, "question_id": 28332934, "link": "https://stackoverflow.com/questions/28332934/ruby-yield-to-subclass-method-from-superclass-method/28333047#28333047", "title": "Ruby Yield to Subclass Method from Superclass Method", "body": "<p>If you're really not open to using <code>super</code>, this is pretty much impossible.</p>\n\n<p>With <code>super</code>, it's pretty simple:</p>\n\n<pre><code>class SuperClass\n  def do_something\n    puts \"getting ready...\"\n    yield\n    puts \"done.\"\n  end\nend\n\nclass SubClass &lt; SuperClass\n  def do_something\n    super.do_something do\n      puts \"doing something...\"\n    end\n  end\nend\n</code></pre>\n\n<p>On the other hand, without using <code>super</code>, this becomes simpler if you are open to multiple methods:</p>\n\n<pre><code>class SuperClass\n  def do_something\n    puts \"getting ready...\"\n    self.actually_do_the_thing\n    puts \"done.\"\n  end\n  def actually_do_the_thing\n    raise NotImplementedError\n  end\nend\n\nclass SubClass &lt; SuperClass\n  def actually_do_the_thing\n    puts \"doing something...\"\n  end\nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 7544, "user_id": 1085998, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/459252fca62e56c1131babdba2b1babe?s=128&d=identicon&r=PG", "display_name": "daremkd", "link": "https://stackoverflow.com/users/1085998/daremkd"}, "is_accepted": true, "score": 6, "last_activity_date": 1423091383, "creation_date": 1423091383, "answer_id": 28333344, "question_id": 28332934, "link": "https://stackoverflow.com/questions/28332934/ruby-yield-to-subclass-method-from-superclass-method/28333344#28333344", "title": "Ruby Yield to Subclass Method from Superclass Method", "body": "<p>In <a href=\"https://rads.stackoverflow.com/amzn/click/com/0321721330\" rel=\"noreferrer\" rel=\"nofollow noreferrer\">Practical Object-Oriented Design in Ruby</a>, what Sandi Metz recommend you do to overcome calling super is to define a \"hook\" method in the super-class, which only job would be to get over-written by the child methods. In your case, you could do something like this:</p>\n\n<pre><code>class SuperClass\n  def self.do_something\n    puts \"getting ready...\"\n    do_something_child\n    puts \"done.\"\n  end\n\n  def self.do_something_child; end\nend\n\nclass SubClass &lt; SuperClass\n  def self.do_something_child\n    puts \"doing something ...\"\n  end\nend\n\nSubClass.do_something\n</code></pre>\n"}], "owner": {"reputation": 2080, "user_id": 670433, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/6dabedc47915bc771055f848ef07fc11?s=128&d=identicon&r=PG", "display_name": "s2t2", "link": "https://stackoverflow.com/users/670433/s2t2"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1989, "favorite_count": 1, "accepted_answer_id": 28333344, "answer_count": 2, "score": 2, "last_activity_date": 1423091694, "creation_date": 1423089615, "last_edit_date": 1423091694, "question_id": 28332934, "link": "https://stackoverflow.com/questions/28332934/ruby-yield-to-subclass-method-from-superclass-method", "title": "Ruby Yield to Subclass Method from Superclass Method", "body": "<p>In Ruby, is it possible to yield to a subclass method from a superclass method without affecting code in the subclass? I'm trying to avoid calling <code>super</code> in the subclass.</p>\n\n<pre><code>class SuperClass\n  def do_something\n    puts \"getting ready...\"\n    # how to then yield back to the subclass do_something method?\n    puts \"done.\"\n  end\nend\n\nclass SubClass &lt; SuperClass\n  def do_something\n    # how to first execute the superclass do_something method?\n    puts \"doing something ...\"\n  end\nend\n</code></pre>\n\n<p>Desired functionality is to specifically call <code>SubClass.do_something</code> and receive the following output:</p>\n\n<p>\"getting ready...\"</p>\n\n<p>\"doing something...\"</p>\n\n<p>\"done.\"</p>\n\n<hr>\n\n<p>EDIT:</p>\n\n<p>Maybe the real question is: How to DRY-up the code below, removing calls to <code>self.get_ready</code> and <code>self.finish_up</code> from all subclasses, using any ruby meta-programming technique that keeps those classes DRY:</p>\n\n<pre><code>class SuperClass\n  def self.get_ready\n    puts \"getting ready ...\"\n  end\n\n  def self.finish_up\n    puts \"done.\"\n  end\nend\n\nclass SubClassA &lt; SuperClass\n  def self.do_something\n    self.get_ready\n    puts \"doing something ...\"\n    self.finish_up\n  end\nend\n\nclass SubClassB &lt; SuperClass\n  def self.do_something\n    self.get_ready\n    puts \"doing something else, a little differently...\"\n    self.finish_up\n  end\nend\n\nclass SubClassC &lt; SuperClass\n  def self.do_something\n    self.get_ready\n    puts \"doing something crazy...\"\n    self.finish_up\n  end\nend\n</code></pre>\n"}, {"tags": ["ruby", "gem", "versioning"], "comments": [{"owner": {"reputation": 45322, "user_id": 421705, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/581b1760881c962648f99d6040d41829?s=128&d=identicon&r=PG", "display_name": "Holger Just", "link": "https://stackoverflow.com/users/421705/holger-just"}, "edited": false, "score": 0, "creation_date": 1423090197, "post_id": 28332750, "comment_id": 45013027, "body": "Well, it looks a bit like a twiddly hash rocket (and thus kinda like an assignment), doesn&#39;t it?"}, {"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "reply_to_user": {"reputation": 45322, "user_id": 421705, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/581b1760881c962648f99d6040d41829?s=128&d=identicon&r=PG", "display_name": "Holger Just", "link": "https://stackoverflow.com/users/421705/holger-just"}, "edited": false, "score": 0, "creation_date": 1423090358, "post_id": 28332750, "comment_id": 45013103, "body": "@HolgerJust It does, but why assignment? It is a condition."}], "answers": [{"comments": [{"owner": {"reputation": 10611, "user_id": 973810, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/fc35612d4cb8ba65f31a6d028bcf138e?s=128&d=identicon&r=PG", "display_name": "Darth Egregious", "link": "https://stackoverflow.com/users/973810/darth-egregious"}, "edited": false, "score": 2, "creation_date": 1450456604, "post_id": 28789907, "comment_id": 56461960, "body": "This is a super great answer. I love your citing sources and giving a justification for the symbol. 10/10."}], "tags": [], "owner": {"reputation": 126, "user_id": 4366852, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5087f20f93d975670c1e7f44e3147fc8?s=128&d=identicon&r=PG", "display_name": "Eugene Kenny", "link": "https://stackoverflow.com/users/4366852/eugene-kenny"}, "is_accepted": true, "score": 11, "last_activity_date": 1425182015, "creation_date": 1425182015, "answer_id": 28789907, "question_id": 28332750, "link": "https://stackoverflow.com/questions/28332750/why-is-twiddle-wakka-designed-like-this/28789907#28789907", "title": "Why is twiddle wakka designed like this?", "body": "<p>Jim Weirich originally added the pessimistic operator to RubyGems as <code>&gt;*</code> <a href=\"https://github.com/rubygems/rubygems/commit/eacba214b5d815e82d0ab0c09a7ac378e004898e\" rel=\"noreferrer\">in this commit</a>. He then changed it to <code>~&gt;</code> <a href=\"https://github.com/rubygems/rubygems/commit/b9d09b19571b6b884fba3384c98f41acd4c5e755\" rel=\"noreferrer\">a few weeks later</a> - the commit message includes an explanation:</p>\n\n<blockquote>\n  <p>Changed the pessimistic operator to \"~>\" (think approximately greater than).</p>\n</blockquote>\n\n<p>Personally, I like that <code>~&gt;</code> is visually distinct from <code>&gt;=</code>; if the operator was <code>&gt;~</code> instead, I think it would be easier to misread as <code>&gt;=</code> when glancing at a Gemfile.</p>\n"}], "owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 803, "favorite_count": 0, "accepted_answer_id": 28789907, "answer_count": 1, "score": 1, "last_activity_date": 1425182015, "creation_date": 1423088863, "last_edit_date": 1423090309, "question_id": 28332750, "link": "https://stackoverflow.com/questions/28332750/why-is-twiddle-wakka-designed-like-this", "title": "Why is twiddle wakka designed like this?", "body": "<p>In the twiddle wakka <code>~&gt;</code> (aka pessimistic operator), why is it designed so that the tidle comes before the inequality? Since it includes the meaning <code>&gt;=</code>, it is more consistent if it were <code>&gt;~</code>. The <code>~&gt;</code> order makes it difficult to remember, and I often mistype it <code>&gt;~</code>. It also makes me feel incorrectly that <code>~&gt; 3.2</code> does not allow exactly <code>3.2</code>. Is there a precursor to this symbol, or was it made up by a gem developer? Can someone come up with a way to make sense of this (even if that is not the original intention)?</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 31885, "user_id": 1008938, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/EOZbS.png?s=128&g=1", "display_name": "Linuxios", "link": "https://stackoverflow.com/users/1008938/linuxios"}, "edited": false, "score": 1, "creation_date": 1423088840, "post_id": 28332715, "comment_id": 45012414, "body": "I don&#39;t think this is possible."}], "answers": [{"comments": [{"owner": {"reputation": 394580, "user_id": 479863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ArUCE.jpg?s=128&g=1", "display_name": "mu is too short", "link": "https://stackoverflow.com/users/479863/mu-is-too-short"}, "edited": false, "score": 0, "creation_date": 1423092049, "post_id": 28332882, "comment_id": 45013802, "body": "How do you propose to copy the file when all you have is the <code>IO</code> object and you don&#39;t know if it is readable or even seekable?"}], "tags": [], "owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "is_accepted": false, "score": 0, "last_activity_date": 1423089993, "last_edit_date": 1423089993, "creation_date": 1423089403, "answer_id": 28332882, "question_id": 28332715, "link": "https://stackoverflow.com/questions/28332715/ruby-find-out-what-mode-file-is-opened-in/28332882#28332882", "title": "Ruby find out what mode file is opened in", "body": "<p>I am not going to write the full script for you, but will give you a hint.</p>\n\n<p>Suppose you have an IO opened:</p>\n\n<pre><code>io = File.open(\"/tmp/foo\", \"r\")\n</code></pre>\n\n<p>Assuming that <code>io</code> was created successfully, you can tell whether it is opened for writing by attempting <code>write</code>:</p>\n\n<pre><code>begin\n  io.write(\"\")\nrescue IOError =&gt; e\n  puts e.message\nend\n#=&gt; not opened for writing\n</code></pre>\n\n<p>Make sure to copy the file before attempting this in order not to lose the file in case the mode was <code>\"w\"</code> or <code>\"w+\"</code>.</p>\n\n<p>Do along the same line for distinguishing other modes.</p>\n"}, {"comments": [{"owner": {"reputation": 50397, "user_id": 1318694, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/JPEVC.png?s=128&g=1", "display_name": "Matt", "link": "https://stackoverflow.com/users/1318694/matt"}, "edited": false, "score": 0, "creation_date": 1423093782, "post_id": 28333503, "comment_id": 45014342, "body": "Although this is the right way... this isn&#39;t working for me. It always passes through to <code>nil</code>.  Does <code>case</code> work that way? Those values are effectively integers so it&#39;s like saying. <code>case 1231321 when 1 when 2 </code>. Where is the bitwise AND implied?"}, {"owner": {"reputation": 50397, "user_id": 1318694, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/JPEVC.png?s=128&g=1", "display_name": "Matt", "link": "https://stackoverflow.com/users/1318694/matt"}, "edited": false, "score": 0, "creation_date": 1423093939, "post_id": 28333503, "comment_id": 45014392, "body": "Also, this is only for POSIX platforms."}, {"owner": {"reputation": 50397, "user_id": 1318694, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/JPEVC.png?s=128&g=1", "display_name": "Matt", "link": "https://stackoverflow.com/users/1318694/matt"}, "edited": false, "score": 0, "creation_date": 1423135113, "post_id": 28333503, "comment_id": 45029570, "body": "@Stefan nice! You could differentiate between <code>r+</code> and <code>w+</code> with something like <code>O_TRUNC</code> too.  <code>if flags | Fcntl::O_TRUNC | Fcntl::O_APPEND == flags then &#39;w+&#39; elsif flags | Fcntl::O_APPEND == flags then &#39;a+&#39; else &#39;r+&#39; end</code>"}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "reply_to_user": {"reputation": 50397, "user_id": 1318694, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/JPEVC.png?s=128&g=1", "display_name": "Matt", "link": "https://stackoverflow.com/users/1318694/matt"}, "edited": false, "score": 0, "creation_date": 1423136757, "post_id": 28333503, "comment_id": 45030635, "body": "@Matt does that work on your system? The <code>O_TRUNC</code> flag is never set on my system."}, {"owner": {"reputation": 50397, "user_id": 1318694, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/JPEVC.png?s=128&g=1", "display_name": "Matt", "link": "https://stackoverflow.com/users/1318694/matt"}, "edited": false, "score": 0, "creation_date": 1423142303, "post_id": 28333503, "comment_id": 45034164, "body": "It did on cygwin but you&#39;re right, not on others.  I think that&#39;s the first time I&#39;ve ever seen cygwin do something useful over normal Ruby!"}], "tags": [], "owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "is_accepted": false, "score": 5, "last_activity_date": 1423134068, "last_edit_date": 1423134068, "creation_date": 1423092231, "answer_id": 28333503, "question_id": 28332715, "link": "https://stackoverflow.com/questions/28332715/ruby-find-out-what-mode-file-is-opened-in/28333503#28333503", "title": "Ruby find out what mode file is opened in", "body": "<p>On POSIX platforms, you can call <a href=\"http://www.ruby-doc.org/core-2.2.0/IO.html#method-i-fcntl\" rel=\"nofollow\"><code>IO#fcntl</code></a> with F_GETFL to get the file status flags:</p>\n\n<pre><code>require 'fcntl'\n\ndef filemode(io)\n  flags = io.fcntl(Fcntl::F_GETFL)\n  case flags &amp; Fcntl::O_ACCMODE\n  when Fcntl::O_RDONLY\n    'r'\n  when Fcntl::O_WRONLY\n    (flags &amp; Fcntl::O_APPEND).zero? ? 'w' : 'a'\n  when Fcntl::O_RDWR\n    (flags &amp; Fcntl::O_APPEND).zero? ? 'r+ / w+' : 'a+'\n  end\nend\n\nFile.open('test.txt', 'r') { |f| puts filemode(f) }   #=&gt; r\nFile.open('test.txt', 'w') { |f| puts filemode(f) }   #=&gt; w\nFile.open('test.txt', 'a+') { |f| puts filemode(f) }  #=&gt; a+\n</code></pre>\n\n<p><code>fcntl</code>'s return value is a bitwise OR of the individual <code>O_*</code> flags:</p>\n\n<pre><code>Fcntl::O_RDONLY   # 0\nFcntl::O_WRONLY   # 1\nFcntl::O_RDWR     # 2\nFcntl::O_APPEND   # 4\nFcntl::O_NONBLOCK # 8\n</code></pre>\n\n<p><code>Fcntl::O_ACCMODE</code> can be used to mask the file access modes.</p>\n\n<p>Further information:</p>\n\n<ul>\n<li><a href=\"http://man7.org/linux/man-pages/man2/fcntl.2.html\" rel=\"nofollow\">http://man7.org/linux/man-pages/man2/fcntl.2.html</a></li>\n<li><a href=\"http://www.gnu.org/software/libc/manual/html_node/File-Status-Flags.html\" rel=\"nofollow\">http://www.gnu.org/software/libc/manual/html_node/File-Status-Flags.html</a></li>\n<li><a href=\"http://ruby-doc.org/stdlib/libdoc/fcntl/rdoc/Fcntl.html\" rel=\"nofollow\">http://ruby-doc.org/stdlib/libdoc/fcntl/rdoc/Fcntl.html</a></li>\n</ul>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user1235720"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 114, "favorite_count": 0, "answer_count": 2, "score": 2, "last_activity_date": 1423134068, "creation_date": 1423088715, "question_id": 28332715, "link": "https://stackoverflow.com/questions/28332715/ruby-find-out-what-mode-file-is-opened-in", "title": "Ruby find out what mode file is opened in", "body": "<p>I need to check what method a file object is opened in. E.g. is it r, r+, w, a etc.</p>\n\n<pre><code>thefile = File.open(filename, method)\n</code></pre>\n\n<p>It must be using the object thefile and not just the filename.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4"], "answers": [{"tags": [], "owner": {"reputation": 4905, "user_id": 69836, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/71ae352527d409c830fc7843d0e016e3?s=128&d=identicon&r=PG", "display_name": "locriani", "link": "https://stackoverflow.com/users/69836/locriani"}, "is_accepted": false, "score": 2, "last_activity_date": 1423090705, "creation_date": 1423090705, "answer_id": 28333184, "question_id": 28332630, "link": "https://stackoverflow.com/questions/28332630/rails-render-view-from-outside-controller/28333184#28333184", "title": "Rails: Render view from outside controller", "body": "<p>Technically, <code>ActionMailer</code> is a subclass implementation of <code>AbstractController::Base</code>. If you want to implement this functionality on your own, you'll likely want to inherit from <code>AbstractController::Base</code> as well.</p>\n\n<p>There is a good blog post here: <a href=\"https://www.amberbit.com/blog/2011/12/27/render-views-and-partials-outside-controllers-in-rails-3/\" rel=\"nofollow\">https://www.amberbit.com/blog/2011/12/27/render-views-and-partials-outside-controllers-in-rails-3/</a> that explains the steps required.</p>\n"}, {"comments": [{"owner": {"reputation": 2350, "user_id": 1089494, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/UHEMI.png?s=128&g=1", "display_name": "Don Giulio", "link": "https://stackoverflow.com/users/1089494/don-giulio"}, "edited": false, "score": 0, "creation_date": 1591350255, "post_id": 28333624, "comment_id": 110028138, "body": "I&#39;m doing this, but there seems to be a problem with using the helpers in my erb file, how would you go about that? <a href=\"https://stackoverflow.com/questions/62211842/rails-how-to-use-helpers-with-erb-new-in-service?noredirect=1#comment110027118_62211842\" title=\"rails how to use helpers with erb new in service\">stackoverflow.com/questions/62211842/&hellip;</a>"}], "tags": [], "owner": {"reputation": 427, "user_id": 1837211, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f77c0f99b2f00ea852ce3e4c5f9c337b?s=128&d=identicon&r=PG", "display_name": "vpsz", "link": "https://stackoverflow.com/users/1837211/vpsz"}, "is_accepted": false, "score": 2, "last_activity_date": 1423092821, "creation_date": 1423092821, "answer_id": 28333624, "question_id": 28332630, "link": "https://stackoverflow.com/questions/28332630/rails-render-view-from-outside-controller/28333624#28333624", "title": "Rails: Render view from outside controller", "body": "<p>\"I'm trying to create an HTML string using a view.\" -- If you mean you're in the context of a view template, then just use a helper method or render a partial.</p>\n\n<p>If you're in some other \"Plain Old Ruby Object\", then keep in mind you're free to use the ERB module directly:</p>\n\n<pre><code>erb = ERB.new(\"path/to/template\")\nresult = erb.result(binding)\n</code></pre>\n\n<p>The trick is getting that 'binding' object that gives the context for the code in the template. ActionController and other Rails classes expose it for free, but I couldn't find a reference that explains where it comes from.</p>\n\n<p><a href=\"http://www.ruby-doc.org/stdlib-2.2.0/libdoc/erb/rdoc/ERB.html#method-i-result\" rel=\"nofollow\">http://www.ruby-doc.org/stdlib-2.2.0/libdoc/erb/rdoc/ERB.html#method-i-result</a></p>\n"}, {"comments": [{"owner": {"reputation": 67463, "user_id": 203130, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/1RE8c.jpg?s=128&g=1", "display_name": "coreyward", "link": "https://stackoverflow.com/users/203130/coreyward"}, "edited": false, "score": 4, "creation_date": 1508096155, "post_id": 28723544, "comment_id": 80463698, "body": "The referenced library hasn&#39;t been updated since 2015 and is incompatible with Rails 4 and 5."}], "tags": [], "owner": {"reputation": 638, "user_id": 1464892, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/437699b3e917fb8869599cadaf397e3b?s=128&d=identicon&r=PG&f=1", "display_name": "prajo", "link": "https://stackoverflow.com/users/1464892/prajo"}, "is_accepted": false, "score": 0, "last_activity_date": 1424879694, "creation_date": 1424879694, "answer_id": 28723544, "question_id": 28332630, "link": "https://stackoverflow.com/questions/28332630/rails-render-view-from-outside-controller/28723544#28723544", "title": "Rails: Render view from outside controller", "body": "<p>For future reference, I ended up finding\nthis handy gem that makes this a breeze:</p>\n\n<p><a href=\"https://github.com/yappbox/render_anywhere\" rel=\"nofollow\">https://github.com/yappbox/render_anywhere</a></p>\n"}, {"comments": [{"owner": {"reputation": 30744, "user_id": 1768232, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/P6XgG.png?s=128&g=1", "display_name": "durron597", "link": "https://stackoverflow.com/users/1768232/durron597"}, "edited": false, "score": 0, "creation_date": 1442541540, "post_id": 32642669, "comment_id": 53133608, "body": "Please don&#39;t post identical answers to multiple questions. Post one good answer, then vote/flag to close the other questions as duplicates. If the question is not a duplicate, <i>tailor your answers to the question.</i>"}], "tags": [], "owner": {"reputation": 3797, "user_id": 145684, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/f90947872162ab16e9a76085569a46f8?s=128&d=identicon&r=PG", "display_name": "steven_noble", "link": "https://stackoverflow.com/users/145684/steven-noble"}, "is_accepted": false, "score": 0, "last_activity_date": 1451876662, "last_edit_date": 1451876662, "creation_date": 1442541469, "answer_id": 32642669, "question_id": 28332630, "link": "https://stackoverflow.com/questions/28332630/rails-render-view-from-outside-controller/32642669#32642669", "title": "Rails: Render view from outside controller", "body": "<p>Best to render the view using a controller, as that's what they're for, and <em>then</em> convert it to a string, as that is your ultimate goal.</p>\n\n<pre><code>require 'open-uri'\nhtml = open(url, &amp;:read)\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 2084, "user_id": 3141240, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/bc520eb2dcd6c23a18369425666faae8?s=128&d=identicon&r=PG&f=1", "display_name": "Ravenstine", "link": "https://stackoverflow.com/users/3141240/ravenstine"}, "edited": false, "score": 1, "creation_date": 1454629809, "post_id": 33349408, "comment_id": 58143130, "body": "Using ActionView::Base is the best answer, IMO.  I&#39;d probably go a small step further and subclass it for convenience, but that&#39;s just me.  I&#39;ve never gotten AbstractController to work the way that others describe, but maybe my version of Rails is too recent.  Either way, this way feels less dirty."}, {"owner": {"reputation": 10377, "user_id": 2832282, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/ZJ4WG.jpg?s=128&g=1", "display_name": "Cyril Duchon-Doris", "link": "https://stackoverflow.com/users/2832282/cyril-duchon-doris"}, "edited": false, "score": 1, "creation_date": 1484937060, "post_id": 33349408, "comment_id": 70731773, "body": "What about nested layouts ?"}, {"owner": {"reputation": 1361, "user_id": 1167483, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a3dfdf6909fd400a8151a45df64730fa?s=128&d=identicon&r=PG", "display_name": "LuizSignorelli", "link": "https://stackoverflow.com/users/1167483/luizsignorelli"}, "edited": false, "score": 0, "creation_date": 1529411159, "post_id": 33349408, "comment_id": 88855591, "body": "To render with layout: <code>view.render(file: &#39;template.html.erb&#39;, layout: &#39;layouts&#47;layout.html.erb&#39;)</code>"}], "tags": [], "owner": {"reputation": 10271, "user_id": 37966, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/0cf30f974ad2a3c27773addf19fa2689?s=128&d=identicon&r=PG", "display_name": "cweston", "link": "https://stackoverflow.com/users/37966/cweston"}, "is_accepted": false, "score": 43, "last_activity_date": 1447433118, "last_edit_date": 1447433118, "creation_date": 1445873002, "answer_id": 33349408, "question_id": 28332630, "link": "https://stackoverflow.com/questions/28332630/rails-render-view-from-outside-controller/33349408#33349408", "title": "Rails: Render view from outside controller", "body": "<p>You can use <a href=\"http://apidock.com/rails/ActionView/Base/new/class\">ActionView::Base</a> to achieve this.</p>\n\n<pre><code>view = ActionView::Base.new(ActionController::Base.view_paths, {})\nview.render(file: 'template.html.erb')\n</code></pre>\n\n<p>The <a href=\"http://apidock.com/rails/ActionView/Base/new/class\">ActionView::Base</a> initialize takes:</p>\n\n<ol>\n<li>A context, representing the template search paths</li>\n<li>An <code>assigns</code> hash, providing the variables for the template</li>\n</ol>\n\n<p>If you would like to include helpers, you can use class_eval to include them:</p>\n\n<pre><code>view.class_eval do\n  include ApplicationHelper\n  # any other custom helpers can be included here\nend\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1444, "user_id": 188870, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/f1945436277d2a4ae7ba54e77cdeb853?s=128&d=identicon&r=PG", "display_name": "unflores", "link": "https://stackoverflow.com/users/188870/unflores"}, "edited": false, "score": 2, "creation_date": 1491487095, "post_id": 33817018, "comment_id": 73583317, "body": "This is good unless you depend on helpers like <code>link_to</code> etc."}], "tags": [], "owner": {"reputation": 398, "user_id": 1778030, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/46627e687359a65f271bbb0e6e7f928a?s=128&d=identicon&r=PG", "display_name": "Jesse", "link": "https://stackoverflow.com/users/1778030/jesse"}, "is_accepted": false, "score": 5, "last_activity_date": 1447979818, "creation_date": 1447979818, "answer_id": 33817018, "question_id": 28332630, "link": "https://stackoverflow.com/questions/28332630/rails-render-view-from-outside-controller/33817018#33817018", "title": "Rails: Render view from outside controller", "body": "<p>There is no need to over bloat your app with too many gems. As we know ERB is already included in your Rails app.</p>\n\n<pre><code>@jdf = JDF.new\n@job = ERB.new(File.read(Rails.root + \"app/views/entries/job.xml.erb\"))\nresult =  @job.result(binding)\n</code></pre>\n\n<p>Above there is snippet of code of an app I'm working on. </p>\n\n<ul>\n<li><code>@jdf</code> is a object to be evaluated in the <code>erb</code> view. </li>\n<li>In my case I needed to render <code>xml</code>.</li>\n<li><code>result</code> is a string to be saved or sent anywhere you like.</li>\n</ul>\n"}, {"comments": [{"owner": {"reputation": 4871, "user_id": 2040729, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/Vsxsu.jpg?s=128&g=1", "display_name": "Eduardo Santana", "link": "https://stackoverflow.com/users/2040729/eduardo-santana"}, "edited": false, "score": 0, "creation_date": 1512310878, "post_id": 39987313, "comment_id": 82196625, "body": "If any one would like to generate text without the controller, look for: <a href=\"http://ruby-doc.org/stdlib-2.4.2/libdoc/erb/rdoc/ERB.html#method-c-new\" rel=\"nofollow noreferrer\">ruby-doc.org/stdlib-2.4.2/libdoc/erb/rdoc/ERB.html#method-c-&zwnj;&#8203;new</a> with this, you don&#39;t have to create the logic inside the <code>views</code> directory."}, {"owner": {"reputation": 67463, "user_id": 203130, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/1RE8c.jpg?s=128&g=1", "display_name": "coreyward", "link": "https://stackoverflow.com/users/203130/coreyward"}, "reply_to_user": {"reputation": 4871, "user_id": 2040729, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/Vsxsu.jpg?s=128&g=1", "display_name": "Eduardo Santana", "link": "https://stackoverflow.com/users/2040729/eduardo-santana"}, "edited": false, "score": 1, "creation_date": 1512317753, "post_id": 39987313, "comment_id": 82198644, "body": "@EduardoSantana That&#39;s great if you have a plain ERB template you want to render, but it won&#39;t render ActionView views. I.e., you don&#39;t get instance variables, partial rendering, helper methods, etc."}, {"owner": {"reputation": 676, "user_id": 1611925, "user_type": "registered", "accept_rate": 15, "profile_image": "https://i.stack.imgur.com/VVlis.jpg?s=128&g=1", "display_name": "Julien Lamarche", "link": "https://stackoverflow.com/users/1611925/julien-lamarche"}, "edited": false, "score": 2, "creation_date": 1533745402, "post_id": 39987313, "comment_id": 90462620, "body": "Using controller classes trigged warden and authentication issues.   This worked for me:      <code>ActionView::Base.new(&#39;app&#47;views&#39;).render(file: &#39;invoices&#47;show&#39;, locals: {invoiceObjIn: inv}, layout: &#39;layouts&#47;invoice&#39;)</code>"}, {"owner": {"reputation": 849, "user_id": 5533071, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YoaaY.jpg?s=128&g=1", "display_name": "alagaesia", "link": "https://stackoverflow.com/users/5533071/alagaesia"}, "edited": false, "score": 1, "creation_date": 1536061371, "post_id": 39987313, "comment_id": 91280507, "body": "I have this error: <code>Devise could not find the &#39;Warden::Proxy&#39; instance on your request environment.</code>. How do you solve this?"}, {"owner": {"reputation": 67463, "user_id": 203130, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/1RE8c.jpg?s=128&g=1", "display_name": "coreyward", "link": "https://stackoverflow.com/users/203130/coreyward"}, "reply_to_user": {"reputation": 849, "user_id": 5533071, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YoaaY.jpg?s=128&g=1", "display_name": "alagaesia", "link": "https://stackoverflow.com/users/5533071/alagaesia"}, "edited": false, "score": 1, "creation_date": 1536951338, "post_id": 39987313, "comment_id": 91622870, "body": "@alagaesia Please open a new question instead of commenting when you have a problem so that others can jump in and help."}, {"owner": {"reputation": 153, "user_id": 1563631, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d0371c95f70c66545f21be5e5dc95204?s=128&d=identicon&r=PG", "display_name": "joe", "link": "https://stackoverflow.com/users/1563631/joe"}, "edited": false, "score": 0, "creation_date": 1548877695, "post_id": 39987313, "comment_id": 95705755, "body": "Awesome, thank you!  In my case the templates are using local variables instead of instance variables, so substituting <code>locals</code> for <code>assigns</code> worked for me."}], "tags": [], "owner": {"reputation": 67463, "user_id": 203130, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/1RE8c.jpg?s=128&g=1", "display_name": "coreyward", "link": "https://stackoverflow.com/users/203130/coreyward"}, "is_accepted": true, "score": 47, "last_activity_date": 1476222535, "creation_date": 1476222535, "answer_id": 39987313, "question_id": 28332630, "link": "https://stackoverflow.com/questions/28332630/rails-render-view-from-outside-controller/39987313#39987313", "title": "Rails: Render view from outside controller", "body": "<p>Rails 5 now supports this in a much more convenient manner that handles creating a request and whatnot behind the scenes:</p>\n\n<pre><code>rendered_string = ApplicationController.render(\n  template: 'users/show',\n  assigns: { user: @user }\n)\n</code></pre>\n\n<p>This renders <code>app/views/users/show.html.erb</code> and sets the <code>@user</code> instance variable so you don't need to make any changes to your template. It automatically uses the layout specified in <code>ApplicationController</code> (<code>application.html.erb</code> by default). </p>\n\n<p><a href=\"https://github.com/brainopia/rails/blob/action_view_render/actionpack/test/controller/renderer_test.rb\" rel=\"noreferrer\">The test shows a handful of additional options and approaches.</a></p>\n"}, {"tags": [], "owner": {"reputation": 696, "user_id": 3980206, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/100001191098031/picture?type=large", "display_name": "Syed Shibli", "link": "https://stackoverflow.com/users/3980206/syed-shibli"}, "is_accepted": false, "score": 2, "last_activity_date": 1567960182, "creation_date": 1567960182, "answer_id": 57843741, "question_id": 28332630, "link": "https://stackoverflow.com/questions/28332630/rails-render-view-from-outside-controller/57843741#57843741", "title": "Rails: Render view from outside controller", "body": "<p>Calling directly render method on ApplicationController may raise error</p>\n\n<pre><code> Helper Devise: could not find the `Warden::Proxy` instance on request environment\n</code></pre>\n\n<p>Instead we can use ApplicationController.renderer.render like </p>\n\n<pre><code> rendered_string = ApplicationController.renderer.render(\n     partial: 'users/show',\n     locals: { user: user }\n)\n</code></pre>\n"}], "owner": {"reputation": 638, "user_id": 1464892, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/437699b3e917fb8869599cadaf397e3b?s=128&d=identicon&r=PG&f=1", "display_name": "prajo", "link": "https://stackoverflow.com/users/1464892/prajo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 17592, "favorite_count": 5, "accepted_answer_id": 39987313, "answer_count": 8, "score": 31, "last_activity_date": 1567960182, "creation_date": 1423088454, "last_edit_date": 1423089729, "question_id": 28332630, "link": "https://stackoverflow.com/questions/28332630/rails-render-view-from-outside-controller", "title": "Rails: Render view from outside controller", "body": "<p>I'm trying to create an HTML string using a view.  I would like to render this from a class that is not a controller.  How can I use the rails rendering engine outside a controller? Similar to how ActionMailer does?</p>\n\n<p>Thanks!</p>\n"}, {"tags": ["asp.net", "ruby", "authentication", "cookies", "single-sign-on"], "owner": {"reputation": 11, "user_id": 4530496, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-D2ks74APYuU/AAAAAAAAAAI/AAAAAAAAA-U/W53xRPu2GMg/photo.jpg?sz=128", "display_name": "Roy Shen", "link": "https://stackoverflow.com/users/4530496/roy-shen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 20, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1423086055, "creation_date": 1423086055, "question_id": 28331999, "link": "https://stackoverflow.com/questions/28331999/share-login-between-different-technolog-stack-within-subdomains", "title": "Share Login between different technolog stack within subdomains", "body": "<p>I have a main site implemented with ASP.NET MVC4, let's say it is deployed at:</p>\n\n<p><a href=\"http://www.example.com\" rel=\"nofollow\">http://www.example.com</a></p>\n\n<p>There is another application (Q&amp;A site) which I would like to deploy which is implemented with Ruby(external code), let's say it will be deployed at:</p>\n\n<p><a href=\"http://questions.example.com\" rel=\"nofollow\">http://questions.example.com</a></p>\n\n<p>At this stage, user login authentication is done at main site(ASP.NET), and I would like to carry this login to the new Q&amp;A site so that user doesn't need to login again.</p>\n\n<p>In a nutshell, how to share login/cookie between different technology stacks within sub-domains?</p>\n"}, {"tags": ["ruby", "puppet"], "answers": [{"tags": [], "owner": {"reputation": 7810, "user_id": 2671317, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f13862b290e178f5a6c40b8d8dfc4f05?s=128&d=identicon&r=PG", "display_name": "ptierno", "link": "https://stackoverflow.com/users/2671317/ptierno"}, "is_accepted": false, "score": 2, "last_activity_date": 1423157786, "creation_date": 1423157786, "answer_id": 28350481, "question_id": 28331805, "link": "https://stackoverflow.com/questions/28331805/puppet-create-link-with-timestamp-only-after-exec/28350481#28350481", "title": "Puppet create link with timestamp only after Exec", "body": "<p>Instead of <code>require</code> use <code>subscribe</code>:</p>\n\n<pre><code>exec { \"untar ${targz}\":\n  command =&gt; \"/bin/mkdir -p $rel_dir/$dir/; /bin/tar xzvf /tmp/$targz -C $rel_dir/$dir\",\n  refreshonly =&gt; true,\n  subscribe =&gt; File[\"/tmp/${targz}\"],\n  notify =&gt; File[\"/data/agrod/current\"]\n}\n</code></pre>\n\n<p>The <code>subscribe</code> parameter will assume <code>require</code> automatically and will ensure the exec is only executed if the <code>File[\"/tmp/${targz}\"]</code> resource changes.</p>\n\n<p>Hope this helps</p>\n"}], "owner": {"reputation": 1280, "user_id": 1380358, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/8318269ab680379184db791706d1e1f5?s=128&d=identicon&r=PG", "display_name": "maths", "link": "https://stackoverflow.com/users/1380358/maths"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 840, "favorite_count": 1, "answer_count": 1, "score": 0, "last_activity_date": 1423157786, "creation_date": 1423085360, "question_id": 28331805, "link": "https://stackoverflow.com/questions/28331805/puppet-create-link-with-timestamp-only-after-exec", "title": "Puppet create link with timestamp only after Exec", "body": "<p>I am working on a module to deploy tar file into directories on client. So whenever the tar file changes it deploys in to a new directory with datetime stamp like '20150204130312' . It works fine till this point. I am generating that date time stamp for directory in module. </p>\n\n<p>Whenever the module runs the date and time are generated every time but the directory is only created if tar file updates which is fine. After this i want to create a link to that folder in which tar was extracted. I want that link to be created only if the tar file is extracted. But right now whenever puppet runs since the date and time stamp changes everytime the link is updated even if the tar was not extracted.</p>\n\n<p>I tried using notify in exec and require on file resource but that doesnt work.\n$dir have the timestamp generated on module using </p>\n\n<pre><code>$rel_dir= \"/data/agrod/releases\";\n$dir= generate('/bin/date', '+%Y%m%d%H%M%S')\nexec { \"untar $targz\":\n    command =&gt; \"/bin/mkdir -p $rel_dir/$dir/; /bin/tar xzvf /tmp/$targz -C $rel_dir/$dir\",\n    refreshonly =&gt; true,\n    require =&gt; File[\"/tmp/$targz\"],\n   notify =&gt; File[\"/data/agrod/current\"],    }\n\nfile { \"/data/agrod/current\":\n ensure =&gt; 'link',\n target =&gt; \"/data/agrod/$dir\",\n require =&gt; Exec[\"untar $targz\"], \n}\n</code></pre>\n\n<p>How should i create the dependency so that link only gets created when tar file is extracted in exec. I dont want to use exec for creating links. I don't know if this is possible.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "regex"], "comments": [{"owner": {"reputation": 32547, "user_id": 276959, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/mSp5G.jpg?s=128&g=1", "display_name": "Mohamad", "link": "https://stackoverflow.com/users/276959/mohamad"}, "edited": false, "score": 0, "creation_date": 1423085500, "post_id": 28331799, "comment_id": 45010744, "body": "Not sure, but I believe the &#39;media?&#39; value to if should be a symbol!! Maybe not related, though."}, {"owner": {"reputation": 13886, "user_id": 1150534, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/043af7a7ebf89595bebc3364f933d648?s=128&d=identicon&r=PG", "display_name": "Richlewis", "link": "https://stackoverflow.com/users/1150534/richlewis"}, "reply_to_user": {"reputation": 32547, "user_id": 276959, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/mSp5G.jpg?s=128&g=1", "display_name": "Mohamad", "link": "https://stackoverflow.com/users/276959/mohamad"}, "edited": false, "score": 0, "creation_date": 1423085562, "post_id": 28331799, "comment_id": 45010782, "body": "well I think its ok, works on other validations that i have set using &#39;media?&#39; its from the docs..besides have tried symbol and same behaviour"}, {"owner": {"reputation": 52685, "user_id": 980550, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/8emhY.jpg?s=128&g=1", "display_name": "lurker", "link": "https://stackoverflow.com/users/980550/lurker"}, "edited": false, "score": 0, "creation_date": 1423085591, "post_id": 28331799, "comment_id": 45010797, "body": "You need to escape the period. Otherwise it matches any character. I would use, <code>! filename.match(&#47;\\.(png|jpg|jpeg|mp4|docx|pdf)$&#47;i)</code>"}, {"owner": {"reputation": 32547, "user_id": 276959, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/mSp5G.jpg?s=128&g=1", "display_name": "Mohamad", "link": "https://stackoverflow.com/users/276959/mohamad"}, "edited": false, "score": 0, "creation_date": 1423085657, "post_id": 28331799, "comment_id": 45010841, "body": "It&#39;s more idiomatic to use symbols. I know it has nothing to do with your issue, but just pointing it out."}, {"owner": {"reputation": 13886, "user_id": 1150534, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/043af7a7ebf89595bebc3364f933d648?s=128&d=identicon&r=PG", "display_name": "Richlewis", "link": "https://stackoverflow.com/users/1150534/richlewis"}, "reply_to_user": {"reputation": 52685, "user_id": 980550, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/8emhY.jpg?s=128&g=1", "display_name": "lurker", "link": "https://stackoverflow.com/users/980550/lurker"}, "edited": false, "score": 0, "creation_date": 1423085733, "post_id": 28331799, "comment_id": 45010880, "body": "@lurker so how would i say if filename doesnt match?"}, {"owner": {"reputation": 52685, "user_id": 980550, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/8emhY.jpg?s=128&g=1", "display_name": "lurker", "link": "https://stackoverflow.com/users/980550/lurker"}, "edited": false, "score": 0, "creation_date": 1423085750, "post_id": 28331799, "comment_id": 45010889, "body": "See the <code>!</code> in front of my expression. :)"}, {"owner": {"reputation": 13886, "user_id": 1150534, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/043af7a7ebf89595bebc3364f933d648?s=128&d=identicon&r=PG", "display_name": "Richlewis", "link": "https://stackoverflow.com/users/1150534/richlewis"}, "edited": false, "score": 0, "creation_date": 1423085790, "post_id": 28331799, "comment_id": 45010911, "body": "haha, sorry, missed that for some reason :-)"}], "answers": [{"comments": [{"owner": {"reputation": 13886, "user_id": 1150534, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/043af7a7ebf89595bebc3364f933d648?s=128&d=identicon&r=PG", "display_name": "Richlewis", "link": "https://stackoverflow.com/users/1150534/richlewis"}, "edited": false, "score": 0, "creation_date": 1423086236, "post_id": 28331891, "comment_id": 45011147, "body": "thanks, i have just found out why the page is hanging..if a document saves it is supposed to redirect, but as im using the gem &#39;remotipart&#39; its causing all uploads to process as js, so im getting no redirects at the moment..bit stumped now"}], "tags": [], "owner": {"reputation": 20735, "user_id": 307106, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/6a13e655e637138f8d571cec3f9cea76?s=128&d=identicon&r=PG", "display_name": "jrochkind", "link": "https://stackoverflow.com/users/307106/jrochkind"}, "is_accepted": false, "score": 1, "last_activity_date": 1423085659, "creation_date": 1423085659, "answer_id": 28331891, "question_id": 28331799, "link": "https://stackoverflow.com/questions/28331799/validating-file-extension-in-rails-4/28331891#28331891", "title": "Validating file extension in Rails 4", "body": "<p>Sure, <code>//i</code> is case-insensitive regex. </p>\n\n<p>I'd also put a \\Z at the end of your regex, otherwise you're matching files with eg \"PNG\" anywhere in them, not just at the end. </p>\n\n<p>Also, you need to escape the <code>.</code>, or it means \"any character\", not a period. </p>\n\n<pre><code>/\\.(png|PNG|jpg|JPG|jpeg|JPEG|mp4|MP4|docx|DOCX|pdf|PDF)\\Z/\n</code></pre>\n\n<p>Also, are you sure you want to validate based on filename, and not on MIME type, or both? </p>\n\n<p>I think your problem with hanging is probably not due to your validation, but due to other aspects of the carrierwave integration. But there's an easy way to find out, turn off the validation and see if the hanging problem is still there. </p>\n"}, {"comments": [{"owner": {"reputation": 13886, "user_id": 1150534, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/043af7a7ebf89595bebc3364f933d648?s=128&d=identicon&r=PG", "display_name": "Richlewis", "link": "https://stackoverflow.com/users/1150534/richlewis"}, "edited": false, "score": 0, "creation_date": 1423086928, "post_id": 28332051, "comment_id": 45011509, "body": "thanks, well i do have <code>extension_white_list</code> in my uploader class.. how could i show error messages then just using that?"}, {"owner": {"reputation": 461, "user_id": 3991313, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/38aec25ea1473b027ee229cfcedfb2c3?s=128&d=identicon&r=PG", "display_name": "slushie", "link": "https://stackoverflow.com/users/3991313/slushie"}, "reply_to_user": {"reputation": 13886, "user_id": 1150534, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/043af7a7ebf89595bebc3364f933d648?s=128&d=identicon&r=PG", "display_name": "Richlewis", "link": "https://stackoverflow.com/users/1150534/richlewis"}, "edited": false, "score": 0, "creation_date": 1423087395, "post_id": 28332051, "comment_id": 45011744, "body": "@Richlewis CarrierWave will automatically mark your model as invalid if it doesn&#39;t match the <code>extension_white_list</code>.  <code>model.document = File.new(&quot;invalid.extension&quot;); model.valid? #=&gt; false</code>"}, {"owner": {"reputation": 461, "user_id": 3991313, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/38aec25ea1473b027ee229cfcedfb2c3?s=128&d=identicon&r=PG", "display_name": "slushie", "link": "https://stackoverflow.com/users/3991313/slushie"}, "reply_to_user": {"reputation": 13886, "user_id": 1150534, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/043af7a7ebf89595bebc3364f933d648?s=128&d=identicon&r=PG", "display_name": "Richlewis", "link": "https://stackoverflow.com/users/1150534/richlewis"}, "edited": false, "score": 0, "creation_date": 1423088389, "post_id": 28332051, "comment_id": 45012217, "body": "@Richlewis The same way you are validating your model using <code>validates :file_format</code> now. In other words, you can just check the return value of <code>model.save</code> to see if the validation has passed. The error message will be applied to the CarrierWave attribute, just like normal validations."}, {"owner": {"reputation": 13886, "user_id": 1150534, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/043af7a7ebf89595bebc3364f933d648?s=128&d=identicon&r=PG", "display_name": "Richlewis", "link": "https://stackoverflow.com/users/1150534/richlewis"}, "edited": false, "score": 1, "creation_date": 1423088663, "post_id": 28332051, "comment_id": 45012360, "body": "ok thanks for the info...One more thing sorry.. I have tried to upload a.html file, the upload does not go ahead, but there is no error message shown...any ideas?"}, {"owner": {"reputation": 461, "user_id": 3991313, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/38aec25ea1473b027ee229cfcedfb2c3?s=128&d=identicon&r=PG", "display_name": "slushie", "link": "https://stackoverflow.com/users/3991313/slushie"}, "reply_to_user": {"reputation": 13886, "user_id": 1150534, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/043af7a7ebf89595bebc3364f933d648?s=128&d=identicon&r=PG", "display_name": "Richlewis", "link": "https://stackoverflow.com/users/1150534/richlewis"}, "edited": false, "score": 0, "creation_date": 1423092737, "post_id": 28332051, "comment_id": 45014030, "body": "@Richlewis You can get the error from the <code>errors</code> object. You should try something like <code>&lt;%= @model.errors.full_messages.join(&quot;&lt;br&#47;&gt;&quot;) %&gt;</code> from within your view. Check out <a href=\"http://guides.rubyonrails.org/active_record_validations.html#displaying-validation-errors-in-views\" rel=\"nofollow noreferrer\">the rails validation guide</a> for more in-depth coverage of validations."}, {"owner": {"reputation": 358, "user_id": 3594412, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/07oSo.jpg?s=128&g=1", "display_name": "Leandro Castro", "link": "https://stackoverflow.com/users/3594412/leandro-castro"}, "edited": false, "score": 0, "creation_date": 1597759112, "post_id": 28332051, "comment_id": 112234620, "body": "A small consideration: <code>%w(.jpg .jpeg .png .pdf .docx .doc).include? ext.downcase</code> It is necessary <code>.</code> before extensions"}], "tags": [], "owner": {"reputation": 461, "user_id": 3991313, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/38aec25ea1473b027ee229cfcedfb2c3?s=128&d=identicon&r=PG", "display_name": "slushie", "link": "https://stackoverflow.com/users/3991313/slushie"}, "is_accepted": false, "score": 5, "last_activity_date": 1423086227, "creation_date": 1423086227, "answer_id": 28332051, "question_id": 28331799, "link": "https://stackoverflow.com/questions/28331799/validating-file-extension-in-rails-4/28332051#28332051", "title": "Validating file extension in Rails 4", "body": "<p>You can handle validating filename extensions right from your CarrierWave <code>Uploader</code> class.</p>\n\n<pre><code>class MyUploader &lt; CarrierWave::Uploader::Base\n  def extension_white_list\n    %w( jpg jpeg png pdf mp4 docx doc )\n  end\nend\n</code></pre>\n\n<p>If you're determined to do this validation from within the containing model, why even use a regex? </p>\n\n<pre><code>class MyModel &lt; ActiveRecord::Base\n  validates :file_format, if: :media?\n\n  def file_format\n    unless valid_extension? self.media.filename\n      errors[:document] &lt;&lt; \"Invalid file format.\"\n    end\n  end\n\n  def valid_extension?(filename)\n    ext = File.extname(filename)\n    %w( jpg jpeg png pdf mp4 docx doc ).include? ext.downcase\n  end\nend\n</code></pre>\n\n<p>That is much simpler and reads easier, especially since you aren't using any other regex features.</p>\n"}, {"tags": [], "owner": {"reputation": 608, "user_id": 5494094, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f1f985d5edbd8b9c2e3df83318329338?s=128&d=identicon&r=PG&f=1", "display_name": "Ibrahim.H", "link": "https://stackoverflow.com/users/5494094/ibrahim-h"}, "is_accepted": false, "score": 0, "last_activity_date": 1603969012, "creation_date": 1603969012, "answer_id": 64589712, "question_id": 28331799, "link": "https://stackoverflow.com/questions/28331799/validating-file-extension-in-rails-4/64589712#64589712", "title": "Validating file extension in Rails 4", "body": "<p>It's been a while for this question, so here is a working example for Rails v4 to create a custom validator (<code>app/validators/file_validator.rb</code>):</p>\n<pre><code>class FileValidator &lt; ActiveModel::EachValidator\n\n  def validate_each(record, attribute, value)\n    if value\n      if value.respond_to? :path\n        unless options[:ext].include? File.extname(value.original_filename).delete('.').to_sym\n          record.errors[attribute] &lt;&lt; &quot; is not a valid file (#{options[:ext].join(',')})&quot;\n        end\n      else\n        record.errors[attribute] &lt;&lt; (options[:message] || 'is not a file')\n      end\n    end\n  end\n\nend\n</code></pre>\n<p>example of usage (user model):</p>\n<pre><code>class User &lt; ActiveRecord::Base\n\n  attr_accessor :avatar_file\n\n  # other validators ...\n  \n  # Avatar validation\n  validates :avatar_file, file: {ext: [:jpg, :png]}\n\n  # logic...\n\nend\n</code></pre>\n<p>This simple validator check for image extensions (jpg, png).</p>\n"}], "owner": {"reputation": 13886, "user_id": 1150534, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/043af7a7ebf89595bebc3364f933d648?s=128&d=identicon&r=PG", "display_name": "Richlewis", "link": "https://stackoverflow.com/users/1150534/richlewis"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 7148, "favorite_count": 1, "answer_count": 3, "score": 1, "last_activity_date": 1603969012, "creation_date": 1423085321, "last_edit_date": 1551614502, "question_id": 28331799, "link": "https://stackoverflow.com/questions/28331799/validating-file-extension-in-rails-4", "title": "Validating file extension in Rails 4", "body": "<p>I have written a custom validation to check filename extensions, using carrierwave (I know this wouldn\u2019t stop a file being faked) but for know it will suffice.</p>\n\n<p>However I don\u2019t think I have quite got it though, or at least I think this could be optimized</p>\n\n<pre><code>class Document &lt; ActiveRecord::Base\nvalidate :file_format, :if =&gt; 'media?'\n  def file_format\n    filename = self.media.filename\n      if filename !~ /.(png|PNG|jpg|JPG|jpeg|JPEG|mp4|MP4|docx|DOCX|pdf|PDF)/\n       errors[:document] &lt;&lt; \"File format not supported\"\n      end\n  end\nend\n</code></pre>\n\n<p>Could the regular expression take into account for case insensitive (using <code>i</code> I believe)?</p>\n\n<p>When I upload a file now the request just hangs, though when I reload the page the file is there. I think there is an issue with my validation method.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4.2"], "answers": [{"tags": [], "owner": {"reputation": 27405, "user_id": 2112633, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/c9bf1e5beda923bfc9abb2271c5838e5?s=128&d=identicon&r=PG", "display_name": "usha", "link": "https://stackoverflow.com/users/2112633/usha"}, "is_accepted": false, "score": 1, "last_activity_date": 1423084913, "creation_date": 1423084913, "answer_id": 28331712, "question_id": 28331656, "link": "https://stackoverflow.com/questions/28331656/ruby-on-rails-hello-app-failure/28331712#28331712", "title": "ruby on rails hello_app failure", "body": "<p>You need to install <code>nodejs</code></p>\n\n<pre><code>yum -y install nodejs\n</code></pre>\n\n<p>On ubuntu</p>\n\n<pre><code>apt-get install nodejs\n</code></pre>\n"}], "owner": {"reputation": 985, "user_id": 3779941, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/45eb0270df1ce970602cd3636fa87d81?s=128&d=identicon&r=PG&f=1", "display_name": "AixNPanes", "link": "https://stackoverflow.com/users/3779941/aixnpanes"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 555, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1423085116, "creation_date": 1423084704, "last_edit_date": 1423085116, "question_id": 28331656, "link": "https://stackoverflow.com/questions/28331656/ruby-on-rails-hello-app-failure", "title": "ruby on rails hello_app failure", "body": "<p>I have installed ruby, etc. on RHEL7. I then did a \"rails new hello_app\". When I run \"rails server\", I get </p>\n\n<pre><code>Warning: You're using Rubygems 2.0.14 with Spring. Upgrade to at least Rubygems 2.1.0 and run `gem pristine --all` for better startup performance.\n/usr/local/share/gems/gems/abrt-0.1.0/lib/abrt.rb:6:in `require': cannot load such file -- abrt/handler (LoadError)\n    from /usr/local/share/gems/gems/abrt-0.1.0/lib/abrt.rb:6:in `block in &lt;top (required)&gt;'\n/usr/local/share/gems/gems/execjs-2.3.0/lib/execjs/runtimes.rb:45:in `autodetect': Could not find a JavaScript runtime. See https://github.com/sstephenson/execjs for a list of available runtimes. (ExecJS::RuntimeUnavailable)\n    from /usr/local/share/gems/gems/execjs-2.3.0/lib/execjs.rb:5:in `&lt;module:ExecJS&gt;'\n</code></pre>\n\n<p>The github reference to execjs isn't very helpful. I have the RHEL7 js-1.8.5-17.el7.x86_64 installed as well as execjs (2.3.0). What is missing?</p>\n"}, {"tags": ["sql", "ruby-on-rails", "ruby", "activerecord"], "answers": [{"tags": [], "owner": {"reputation": 163714, "user_id": 123527, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/99e0b39c091e10d9c7d4452a34ca52dc?s=128&d=identicon&r=PG", "display_name": "Simone Carletti", "link": "https://stackoverflow.com/users/123527/simone-carletti"}, "is_accepted": true, "score": 3, "last_activity_date": 1423083519, "creation_date": 1423083519, "answer_id": 28331306, "question_id": 28331112, "link": "https://stackoverflow.com/questions/28331112/which-activerecord-query-is-faster/28331306#28331306", "title": "Which ActiveRecord query is faster?", "body": "<p>There is no single answer: it depends on whether you have indexes on the field, and the number of records. You can append <code>.explain</code> at the end of the query to get the result of the <a href=\"http://www.postgresql.org/docs/9.4/static/sql-explain.html\" rel=\"nofollow\">Query Plan for the query</a>.</p>\n\n<pre><code>puts IssueStatus.where.not(name: \"Closed\").explain\n</code></pre>\n\n<p>That will help you to understand, at database level, which one is the faster. From a database POV, the first and the third query are actually the same.</p>\n\n<p>The third chains one more methods call, therefore it involves some additional object allocation at Ruby level (without mentioning that <code>\"Closed\"</code> causes the creation of a new string, whereas using <code>IssueStatus::CLOSED</code> does not).</p>\n\n<p>At first glance, I would probably suggest to use the first version. But as I said, the query plan will give you more details about the query execution.</p>\n"}], "owner": {"reputation": 4279, "user_id": 3920143, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/1b47dd912eaeb6cd72a15ec2932f6751?s=128&d=identicon&r=PG&f=1", "display_name": "Joel", "link": "https://stackoverflow.com/users/3920143/joel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 191, "favorite_count": 0, "accepted_answer_id": 28331306, "answer_count": 1, "score": 2, "last_activity_date": 1424787010, "creation_date": 1423082839, "last_edit_date": 1424787010, "question_id": 28331112, "link": "https://stackoverflow.com/questions/28331112/which-activerecord-query-is-faster", "title": "Which ActiveRecord query is faster?", "body": "<p>These three queries return the same result. How can i find out which one is faster?</p>\n\n<pre><code>IssueStatus.where 'issue_statuses.name != ?', IssueStatus::CLOSED\n\nIssueStatus.where({name: [\"Open\", \"Ice Box\", \"Submitted for merge\", \"In Progress\"]})\n\nIssueStatus.where.not(name: \"Closed\")\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "ransack"], "comments": [{"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 1, "creation_date": 1423083131, "post_id": 28330934, "comment_id": 45009541, "body": "Have you tried using some of the form helpers like <code>f.search_field :city_eq</code>. Also do you have an implmentation of <code>self.ransackable_attributes</code> in your <code>Space</code> model? (If not this is fine but if so please post as this can cause ransack to ignore search parameters."}, {"owner": {"reputation": 89, "user_id": 1864693, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0fd33cb9e4404861447dd29746f51448?s=128&d=identicon&r=PG", "display_name": "Doddlin", "link": "https://stackoverflow.com/users/1864693/doddlin"}, "reply_to_user": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1423084105, "post_id": 28330934, "comment_id": 45010045, "body": "Actually, that is exactly what it was! _cont or similiar has to be added to the  search_field, otherwise it will not take it. Thanks a bunch! :) @engineersmnky"}], "answers": [{"tags": [], "owner": {"reputation": 2994, "user_id": 629797, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/c09d29972467a5c468ff9fb7c5782c16?s=128&d=identicon&r=PG", "display_name": "thanikkal", "link": "https://stackoverflow.com/users/629797/thanikkal"}, "is_accepted": false, "score": 1, "last_activity_date": 1502520373, "creation_date": 1502520373, "answer_id": 45647368, "question_id": 28330934, "link": "https://stackoverflow.com/questions/28330934/ransack-does-not-take-params-into-consideration/45647368#45647368", "title": "Ransack does not take params into consideration", "body": "<p>Anyone else looking at this:\nMake sure that predicates are passed in as keys for the query hash, even if you have model.ransackable_attributes defined.</p>\n\n<p>like so (first_name_cont is the predicate here):</p>\n\n<pre><code>&gt;&gt; User.ransack(first_name_cont: 'Rya').result.to_sql\n=&gt; SELECT \"users\".* FROM \"users\"  WHERE (\"users\".\"first_name\" LIKE '%Rya%')\n</code></pre>\n"}], "owner": {"reputation": 89, "user_id": 1864693, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0fd33cb9e4404861447dd29746f51448?s=128&d=identicon&r=PG", "display_name": "Doddlin", "link": "https://stackoverflow.com/users/1864693/doddlin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 453, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1502520373, "creation_date": 1423082143, "last_edit_date": 1423090504, "question_id": 28330934, "link": "https://stackoverflow.com/questions/28330934/ransack-does-not-take-params-into-consideration", "title": "Ransack does not take params into consideration", "body": "<p>I'm trying to create a search form for an object called <code>Space</code>. I have tried using a lot of <code>if</code> and <code>elsif</code>'s and I realized that it would not work so I started checking out Ransack. Seems great, if one could just get it to work.</p>\n\n<p>The thing is, I have my form on my first page, <code>home#index</code>. In all tutorials the form is on the same page as the results will be shown at, I want to go to <code>spaces#index</code> instead, so here is my code...</p>\n\n<p>Home (index.html.erb)</p>\n\n<pre><code>&lt;div class=\"col-md-12 text-center\"&gt;\n    &lt;%= search_form_for @q, class: \"form-inline\" do |f| %&gt;\n        &lt;div class=\"input-append\"&gt;\n            &lt;%= f.label :city %&gt;\n            &lt;%= f.search_field :city %&gt;\n    &lt;div class=\"row\"&gt;\n        &lt;button class=\"btn\" type=\"submit\"&gt;&lt;i class=\"fa fa-search\"&gt;&lt;/i&gt;&lt;/button&gt;\n    &lt;/div&gt;\n    &lt;/div&gt;\n&lt;% end %&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p>HomeController.rb</p>\n\n<pre><code>class HomeController &lt; ApplicationController\n  def index\n  @q = Space.search(params[:q])\n  @spaces = Space.all\n  @spaceimages = Spaceimage.all\n  @spacetypes = @spaces.select(:spacetype).distinct\n  end\nend\n</code></pre>\n\n<p>SpacesController.rb</p>\n\n<pre><code>def index\n  @q = Space.search(params[:q])\n  @spaces = @q.result\nend\n</code></pre>\n\n<p>And this is what the server gets:</p>\n\n<pre><code>Started GET \"/spaces?utf8=%E2%9C%93&amp;q%5Bcity%5D=Gothenburg\" for 127.0.0.1 at 2015-02-04 21:32:44 +0100\nProcessing by SpacesController#index as HTML\n  Parameters: {\"utf8\"=&gt;\"\u2713\", \"q\"=&gt;{\"city\"=&gt;\"Gothenburg\"}}\n  Space Load (0.2ms)  SELECT `spaces`.* FROM `spaces`\n  Rendered spaces/index.html.erb within layouts/application (1.2ms)\n  User Load (0.2ms)  SELECT `users`.* FROM `users` WHERE `users`.`id` = 1 ORDER BY `users`.`id` ASC LIMIT 1\nCompleted 200 OK in 52ms (Views: 50.7ms | ActiveRecord: 0.4ms)\n</code></pre>\n\n<p>So the params are there but <code>@spaces.search</code> (or <code>.ransack</code>) does not do anything with the query. Why?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "redirect", "url-redirection"], "comments": [{"owner": {"reputation": 2805, "user_id": 1107638, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/iM9Ji.jpg?s=128&g=1", "display_name": "Mox Shah", "link": "https://stackoverflow.com/users/1107638/mox-shah"}, "edited": false, "score": 0, "creation_date": 1423226004, "post_id": 28330658, "comment_id": 45072843, "body": "Please provide your issue in detail, so others can understand exactly what are you looking for. Please mention, what are you trying to achieve, what is the problem are you facing, what have you done till now, and if possible provide sample code. Don&#39;t forget to tag related technologies, so that your question reaches to the right people."}], "answers": [{"comments": [{"owner": {"reputation": 859, "user_id": 3304070, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cbcdb5bbf368ac5733bdad5c9568f81f?s=128&d=identicon&r=PG&f=1", "display_name": "Loenvpy", "link": "https://stackoverflow.com/users/3304070/loenvpy"}, "edited": false, "score": 0, "creation_date": 1423085491, "post_id": 28331697, "comment_id": 45010742, "body": "This raise this error Couldn&#39;t find Profile without an ID for   def find_profile   @profile = Profile.find(params[:id]) end"}, {"owner": {"reputation": 163714, "user_id": 123527, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/99e0b39c091e10d9c7d4452a34ca52dc?s=128&d=identicon&r=PG", "display_name": "Simone Carletti", "link": "https://stackoverflow.com/users/123527/simone-carletti"}, "reply_to_user": {"reputation": 859, "user_id": 3304070, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cbcdb5bbf368ac5733bdad5c9568f81f?s=128&d=identicon&r=PG&f=1", "display_name": "Loenvpy", "link": "https://stackoverflow.com/users/3304070/loenvpy"}, "edited": false, "score": 0, "creation_date": 1423085627, "post_id": 28331697, "comment_id": 45010821, "body": "If you use the <code>resource</code>, you don&#39;t have any id. You need to adapt your code accordingly. I assume if you have the user, you already know his profile id."}, {"owner": {"reputation": 859, "user_id": 3304070, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cbcdb5bbf368ac5733bdad5c9568f81f?s=128&d=identicon&r=PG&f=1", "display_name": "Loenvpy", "link": "https://stackoverflow.com/users/3304070/loenvpy"}, "edited": false, "score": 0, "creation_date": 1423085835, "post_id": 28331697, "comment_id": 45010934, "body": "I&#39;m just using what you have suggested to me in my profile controller but I&#39;m getting this error Couldn&#39;t find Profile without an ID for def find_profile @profile = Profile.find(params[:id]) end   my route for controller is resource :profile"}, {"owner": {"reputation": 859, "user_id": 3304070, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cbcdb5bbf368ac5733bdad5c9568f81f?s=128&d=identicon&r=PG&f=1", "display_name": "Loenvpy", "link": "https://stackoverflow.com/users/3304070/loenvpy"}, "edited": false, "score": 0, "creation_date": 1423085923, "post_id": 28331697, "comment_id": 45010976, "body": "maybe i just don&#39;t need to use before_action :find_profile"}, {"owner": {"reputation": 859, "user_id": 3304070, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cbcdb5bbf368ac5733bdad5c9568f81f?s=128&d=identicon&r=PG&f=1", "display_name": "Loenvpy", "link": "https://stackoverflow.com/users/3304070/loenvpy"}, "edited": false, "score": 0, "creation_date": 1423089818, "post_id": 28331697, "comment_id": 45012847, "body": "sorry but could you tell me why I&#39;m redirecting to <a href=\"http://localhost:3000/1/profile\" rel=\"nofollow noreferrer\">localhost:3000/1/profile</a>  after editing my profile?? my update action is      @profile = current_user.profile      respond_to do |format|       if @profile.update(profile_params)         flash[:notice] = &quot;Emplois &#224; &#233;t&#233; mis &#224; jour!&quot;         format.html { redirect_to profile_path }       else         format.html { render action: &#39;edit&#39; }       end     end"}], "tags": [], "owner": {"reputation": 163714, "user_id": 123527, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/99e0b39c091e10d9c7d4452a34ca52dc?s=128&d=identicon&r=PG", "display_name": "Simone Carletti", "link": "https://stackoverflow.com/users/123527/simone-carletti"}, "is_accepted": false, "score": 2, "last_activity_date": 1423084834, "creation_date": 1423084834, "answer_id": 28331697, "question_id": 28330658, "link": "https://stackoverflow.com/questions/28330658/redirecting-users-in-rails/28331697#28331697", "title": "Redirecting Users in rails", "body": "<p>You should probably move the logic to a <code>before_action</code>.</p>\n\n<pre><code>before_action :find_profile, :enforce_current_profile\n\ndef show\nend\n\nprotected\n\ndef find_profile\n  @profile = Profile.find(params[:id])\nend\n\ndef enforce_current_profile\n  unless @profile &amp;&amp; @profile.user == current_user\n    redirect_to(profile_path)\n  end\nend\n</code></pre>\n\n<p>However, what you really want to do, is to convert the profile controller to a <code>resource</code> rather than a <code>resources</code> in your route file.</p>\n\n<pre><code>resource :profile\n</code></pre>\n\n<p>In this way, Rails will generate</p>\n\n<pre><code>GET /profile\n</code></pre>\n\n<p>rather than </p>\n\n<pre><code>GET /profile/2\n</code></pre>\n\n<p>and you will not need any control. Just set</p>\n\n<pre><code>def show\n  @user = current_user\n  @profile = @user.profile\nend\n</code></pre>\n\n<p>Using a <code>resource</code> instead of a <code>resources</code> will not provide the <code>index</code> action, but I doubt you need it.</p>\n"}], "owner": {"reputation": 859, "user_id": 3304070, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cbcdb5bbf368ac5733bdad5c9568f81f?s=128&d=identicon&r=PG&f=1", "display_name": "Loenvpy", "link": "https://stackoverflow.com/users/3304070/loenvpy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 127, "favorite_count": 0, "answer_count": 1, "score": -3, "last_activity_date": 1423247269, "creation_date": 1423081112, "last_edit_date": 1423247269, "question_id": 28330658, "link": "https://stackoverflow.com/questions/28330658/redirecting-users-in-rails", "title": "Redirecting Users in rails", "body": "<p>I have a profiles controller where user are allowed to access their own profile, but not others users profile.</p>\n\n<p>When I accessing an url like : <code>http://localhost:3000/en/profiles/2</code>. I want my user to be redirected to their own profile if the URL correspond to disown profile.  How I can handle this ?</p>\n\n<p>My actual show action in my profiles controller looks like :</p>\n\n<pre><code>  def show\n    @profile = Profile.find(params[:id])\n    @user = current_user \n    @profile  = @user.profile\n  end\n</code></pre>\n\n<p>I have already try this method but doesn't work</p>\n\n<pre><code>  def correct_user\n    redirect_to(profile_path) unless current_user == (@profile.user if @profile) \n  end\n</code></pre>\n"}, {"tags": ["ruby", "middleman"], "answers": [{"tags": [], "owner": {"reputation": 20838, "user_id": 901944, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/d40e419b14bfe393b07206602ae0271a?s=128&d=identicon&r=PG", "display_name": "Andrey Mikhaylov - lolmaus", "link": "https://stackoverflow.com/users/901944/andrey-mikhaylov-lolmaus"}, "is_accepted": true, "score": 1, "last_activity_date": 1423134071, "creation_date": 1423134071, "answer_id": 28342238, "question_id": 28330335, "link": "https://stackoverflow.com/questions/28330335/how-do-i-install-sprockets-in-middleman/28342238#28342238", "title": "How do I install sprockets in middleman?", "body": "<p><code>activate :sprockets</code> goes into your <code>config.rb</code>.</p>\n\n<p>But Middleman comes with Sprockets out of the box, so you don't have to do anything.</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user2643810"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 64, "favorite_count": 0, "accepted_answer_id": 28342238, "answer_count": 1, "score": 0, "last_activity_date": 1423134071, "creation_date": 1423079993, "question_id": 28330335, "link": "https://stackoverflow.com/questions/28330335/how-do-i-install-sprockets-in-middleman", "title": "How do I install sprockets in middleman?", "body": "<p>Im reading the middloeman-sprockets githud guide, and in configuration, they dont say exactly what to do, they dont say where or how i should run that code...</p>\n\n<p>All they have is this here: <a href=\"https://github.com/middleman/middleman-sprockets\" rel=\"nofollow\">https://github.com/middleman/middleman-sprockets</a></p>\n\n<pre><code>Configuration\n\nactivate :sprockets\n</code></pre>\n\n<p>here do i add that in the gem file? in the console, where else ? </p>\n\n<p>i tried it in the console but it says: </p>\n\n<pre><code>command not found\n</code></pre>\n\n<p>can anyone exaplain ?</p>\n\n<p>thanks.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4", "haml", "actionmailer"], "comments": [{"owner": {"reputation": 8378, "user_id": 2076787, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2bfe965ab5ef94a0568bc61c36b46d4c?s=128&d=identicon&r=PG", "display_name": "D-side", "link": "https://stackoverflow.com/users/2076787/d-side"}, "edited": false, "score": 0, "creation_date": 1423081170, "post_id": 28330088, "comment_id": 45008495, "body": "I happened to answer the same question a while ago: <a href=\"http://stackoverflow.com/questions/25573000/rails-3-2-link-to-in-email-with-method-put-still-producing-get-request\">Rails 3.2 `link_to` (in email) with `method: :put` still producing GET request</a>"}], "answers": [{"tags": [], "owner": {"reputation": 2859, "user_id": 3945932, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a1794745acd9e572c24558b78b48d597?s=128&d=identicon&r=PG", "display_name": "ptd", "link": "https://stackoverflow.com/users/3945932/ptd"}, "is_accepted": true, "score": 4, "last_activity_date": 1423079452, "creation_date": 1423079452, "answer_id": 28330173, "question_id": 28330088, "link": "https://stackoverflow.com/questions/28330088/link-works-fine-in-rails-view-but-not-in-email/28330173#28330173", "title": "Link works fine in rails view, but not in email", "body": "<p>The link is being created correctly, but rails unobtrusive javascript handles actually making the link do a <code>put</code> request. Since this javascript doesn't exist in the email, the link will only be able to make a <code>get</code> request. </p>\n\n<p>This email link would more usually link to the <code>edit</code> action (with a <code>get</code>), not actually perform a change directly.</p>\n"}], "owner": {"reputation": 21, "user_id": 4530162, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a1365be3269cb651e5987a749a6de1a8?s=128&d=identicon&r=PG&f=1", "display_name": "tilin", "link": "https://stackoverflow.com/users/4530162/tilin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 35, "favorite_count": 0, "closed_date": 1423303584, "accepted_answer_id": 28330173, "answer_count": 1, "score": 0, "last_activity_date": 1423081000, "creation_date": 1423079146, "last_edit_date": 1423081000, "question_id": 28330088, "link": "https://stackoverflow.com/questions/28330088/link-works-fine-in-rails-view-but-not-in-email", "closed_reason": "Duplicate", "title": "Link works fine in rails view, but not in email", "body": "<p>I am using Rails and ActionMailer to send emails</p>\n\n<pre><code>= link_to \"Change\", update_url(\nid: @model.id, value1: \"data1\", :value2 =&gt; \"data2\"), \n:action =&gt; 'update', :method =&gt; :put\n</code></pre>\n\n<p>The above link works fine when in Rails view and it goes to the right place => update, but it goes to \"new\" when I integrate it into mail/email.</p>\n\n<p>Any tips on why please? </p>\n"}, {"tags": ["ruby", "web-applications", "docker", "unix-socket", "microservices"], "answers": [{"comments": [{"owner": {"reputation": 117, "user_id": 645654, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/04a587ab4f65e57fa18abd2e1c727b8d?s=128&d=identicon&r=PG", "display_name": "marcelocbf", "link": "https://stackoverflow.com/users/645654/marcelocbf"}, "edited": false, "score": 0, "creation_date": 1423184107, "post_id": 28350490, "comment_id": 45057039, "body": "Thanks Abdullah, I really needed someone to reaffirm that for me. I&#39;m checking now Swarm and Compose, I&#39;ll definitely need them as I was already thinking about doing everything on own, bit with Swarm if I really need I can just build a custom scheduler on top of that. Definitely, checking out Nginx. Thanks again for pitching in! :-)"}], "tags": [], "owner": {"reputation": 47142, "user_id": 47110, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/80c06a160eab494c0706b0ffd10d44e7?s=128&d=identicon&r=PG", "display_name": "Abdullah Jibaly", "link": "https://stackoverflow.com/users/47110/abdullah-jibaly"}, "is_accepted": true, "score": 1, "last_activity_date": 1423157807, "creation_date": 1423157807, "answer_id": 28350490, "question_id": 28329738, "link": "https://stackoverflow.com/questions/28329738/design-approach-for-hosting-multiple-microservices-on-the-same-host/28350490#28350490", "title": "Design approach for hosting multiple microservices on the same host", "body": "<p>Looks like you may want to look into <a href=\"http://blog.docker.com/2014/12/announcing-docker-machine-swarm-and-compose-for-orchestrating-distributed-apps/\" rel=\"nofollow\">docker swarm</a>, they're actively working on these use cases. I wouldn't recommend building your own communication channel, stick with http or maybe use spdy if you're really concerned about performance. Anything you introduce will make using these upcoming solutions more difficult. Also keep in mind you don't need a heavy-duty web server in most cases, you can always introduce a layer above one or more of your services using nginx or haproxy for example.</p>\n"}], "owner": {"reputation": 117, "user_id": 645654, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/04a587ab4f65e57fa18abd2e1c727b8d?s=128&d=identicon&r=PG", "display_name": "marcelocbf", "link": "https://stackoverflow.com/users/645654/marcelocbf"}, "delete_vote_count": 1, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 800, "favorite_count": 0, "closed_date": 1423516109, "accepted_answer_id": 28350490, "answer_count": 1, "score": 1, "last_activity_date": 1423157807, "creation_date": 1423078080, "last_edit_date": 1423111424, "question_id": 28329738, "link": "https://stackoverflow.com/questions/28329738/design-approach-for-hosting-multiple-microservices-on-the-same-host", "closed_reason": "Opinion-based", "title": "Design approach for hosting multiple microservices on the same host", "body": "<p>I'm working on a Web application that I decoupled it in multiple containerized microservices. I have now around 20 services, but the whole system will definitely need more than 300. Most of the services now and some in the future will not need an entire machine so I'll deploy multiple services on a same host. I'm wondering how others deal with interservice communication. My preferred way was to go with a REST based communication but...</p>\n\n<p>Isn't it too heavy to have multiple web servers running on the same machine? I'm developing in Ruby, but even a lightweight web server like Puma can consume a good amount of memory</p>\n\n<p>I started writing a custom communication channel using UNIX sockets. So, I'd start one web server and  my \"router\" app would communicate with the currently running services on that host through UNIX sockets.  But I don't know if it's worth the effort and on top of that, all services have to be written and customized to use this kind of communication. I believe it would be hard to use any framework like Ruby-on-Rails or others, even different languages which is the whole appeal with microservices architecture. I feel like I'm trying to reinventing the wheel.</p>\n\n<p>So, can someone suggest a better approach or vote for one of my current ones?</p>\n\n<p>I appreciate any help,</p>\n\n<p>Thanks,</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "sorting", "activerecord", "filtering"], "answers": [{"tags": [], "owner": {"reputation": 541, "user_id": 2999771, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6676ab5fcb7877779087df12a5fc28b6?s=128&d=identicon&r=PG&f=1", "display_name": "femmestem", "link": "https://stackoverflow.com/users/2999771/femmestem"}, "is_accepted": false, "score": 1, "last_activity_date": 1423145174, "last_edit_date": 1423145174, "creation_date": 1423144512, "answer_id": 28345769, "question_id": 28329479, "link": "https://stackoverflow.com/questions/28329479/retrieving-only-unique-records-with-multiple-requests/28345769#28345769", "title": "Retrieving only unique records with multiple requests", "body": "<p>I think seeking an \"elegant\" solution is going to yield many diverse opinions, so I'll offer one approach and my reasoning. In my design decision, I feel that in this case it's optimal and elegant to enforce uniqueness on query intersections by filtering the returned record objects instead of trying to restrict the query to only yield unique results. As for getting contiguous results for pagination, on the other hand, I would store offsets from each query and use it as the starting point for the next query using instance variables or sessions, depending on how the data needs to be persisted.</p>\n\n<p>Here's a <code>gist</code> to my refactored version of your code with a solution implemented and comments explaining why I chose to use certain logic or data structures: <a href=\"https://gist.github.com/femmestem/2b539abe92e9813c02da\" rel=\"nofollow\">https://gist.github.com/femmestem/2b539abe92e9813c02da</a></p>\n\n<p><code>#filter_tracks</code> holds a hash map <code>@tracks_offset</code> which the other methods can access and update; each of the query methods holds the responsibility of adding its own offset key to <code>@tracks_offset</code>.</p>\n\n<p><code>#filter_tracks</code> also holds a collection of track id's for tracks that already appear in the results.</p>\n\n<p>If you need persistence, make <code>@tracks_offset</code> and <code>@track_ids</code> sessions/cookies instead of instance variables. The logic should be the same. If you use sessions to store the offsets and id's from results, remember to clear them when your user is done interacting with this feature.</p>\n\n<p>See below. Note, I refactored your <code>#filter_tracks</code> method to separate the responsibilities into 9 different methods: <code>#filter_tracks</code>, <code>#heavy_rotation</code>, <code>#order_by_params</code>, <code>#heavy_rotation?</code>, <code>#validate_and_return_top_results</code>, and <code>#tracks_top_licensed</code>... <code>#tracks_top_&lt;whatever&gt;</code>. This will make my notes easier to follow and your code more maintainable.</p>\n\n<pre><code>def filter_tracks\n  # Does this need to be so high when JavaScript limits display to 14?\n  @limit ||= 50\n\n  @tracks_offset ||= {}\n  @tracks_offset[:default] ||= 0\n  @result_track_ids ||= []\n\n  @order ||= params[:order] || 'heavy_rotation'\n\n  tracks = Track.ready.with_artist\n  tracks = parse_params(params[:q], tracks)\n  @result_count = tracks.count\n\n  # Checks for heavy_rotation filter flag\n  if heavy_rotation? @order\n    @tracks = heavy_rotation\n  else\n    @tracks = order_by_params\n  end\n\n  render partial: \"shared/results\"\nend\n</code></pre>\n\n<p>All <code>#heavy_rotation</code> does is call the various query methods. This makes it easy to add, modify, or delete any one of the query methods as criteria changes without affecting any other method.</p>\n\n<pre><code>def heavy_rotation\n  week_ago = Time.now - 7.days\n  two_weeks_ago = Time.now - 14.days\n  three_months_ago = Time.now - 3.months\n\n  tracks_top_licensed(date_range: three_months_ago, max_results: 5) +\n  tracks_top_listens(date_range: two_weeks_ago, max_results: 3) +\n  tracks_top_downloaded(date_range: two_weeks_ago, max_results: 2) +\n  tracks_staff_picks(date_range: three_months_ago, max_results: 4)\nend\n</code></pre>\n\n<p>Here's what one of the query methods looks like. They're all basically the same, but with custom SQL/ORM queries. You'll notice that I'm not setting the <code>:limit</code> parameter to the number of results that I want the query method to return. This would create a problem if one of the records returned is duplicated by another query method, like if the same track was returned by <code>staff_picks</code> and <code>top_downloaded</code>. Then I would have to make an additional query to get another record. That's not a wrong decision, just one I didn't decide to do.</p>\n\n<pre><code>def tracks_top_licensed(args = {})\n  args = @default.merge args\n  max = args[:max_results]\n  date_range = args[:date_range]\n\n  # Adds own offset key to #filter_tracks hash map =&gt; @tracks_offset\n  @tracks_offset[:top_licensed] ||= 0\n\n  unfiltered_results = Track.top_licensed\n    .where(\"tracks.updated_at &gt;= :date_range\", date_range: date_range)\n    .limit(@limit)\n    .offset(@tracks_offset[:top_licensed])\n\n  top_tracks = validate_and_return_top_results(unfiltered_results, max)\n\n  # Add offset of your most recent query to the cumulative offset\n  # so triggering 'view more'/pagination returns contiguous results\n  @tracks_offset[:top_licensed] += top_tracks[:offset]\n\n  top_tracks[:top_results]\nend\n</code></pre>\n\n<p>In each query method, I'm cleaning the record objects through a custom method <code>#validate_and_return_top_results</code>. My validator checks through the record objects for duplicates against the <code>@track_ids</code> collection in its ancestor method <code>#filter_tracks</code>. It then returns the number of records specified by its caller.</p>\n\n<pre><code>def validate_and_return_top_results(collection, max = 1)\n  top_results = []\n  i = 0 # offset incrementer\n\n  until top_results.count &gt;= max do\n    # Checks if track has already appeared in the results\n    unless @result_track_ids.include? collection[i].id\n\n      # this will be returned to the caller\n      top_results &lt;&lt; collection[i]\n\n      # this is the point of reference to validate your query method results\n      @result_track_ids &lt;&lt; collection[i].id\n    end\n    i += 1\n  end\n  { top_results: top_results, offset: i }\nend\n</code></pre>\n"}], "owner": {"reputation": 1158, "user_id": 2267992, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/wsP3m.jpg?s=128&g=1", "display_name": "Ryan Rebo", "link": "https://stackoverflow.com/users/2267992/ryan-rebo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 88, "favorite_count": 1, "answer_count": 1, "score": 1, "last_activity_date": 1423145174, "creation_date": 1423077114, "question_id": 28329479, "link": "https://stackoverflow.com/questions/28329479/retrieving-only-unique-records-with-multiple-requests", "title": "Retrieving only unique records with multiple requests", "body": "<p>I have this \"heavy_rotation\" filter I'm working on. Basically it grabs tracks from our database based on certain parameters (a mixture of listens_count, staff_pick, purchase_count, to name a few)</p>\n\n<p>An xhr request is made to the filter_tracks controller action. In there I have a flag to check if it's \"heavy_rotation\". I will likely move this to the model (cos this controller is getting fat)... Anyway, how can I ensure (in a efficient way) to not have it pull the same records? I've considered an offset, but than I have to keep track of the offset for every query. Or maybe store track.id's to compare against for each query? Any ideas? I'm having trouble thinking of an elegant way to do this.</p>\n\n<p>Maybe it should be noted that a limit of 14 is set via Javascript, and when a user hits \"view more\" to paginate, it sends another request to filter_tracks.</p>\n\n<p>Any help appreciated! Thanks!</p>\n\n<pre><code>def filter_tracks\n\n    params[:limit] ||= 50\n    params[:offset] ||= 0\n    params[:order] ||= 'heavy_rotation'\n\n    # heavy rotation filter flag\n    heavy_rotation ||= (params[:order] == 'heavy_rotation')\n\n    @result_offset = params[:offset]\n    @tracks = Track.ready.with_artist\n\n    params[:order] = \"tracks.#{params[:order]}\" unless heavy_rotation\n\n    if params[:order]\n      order = params[:order]\n      order.match(/artist.*/){|m|\n        params[:order] = params[:order].sub /tracks\\./, ''\n      }\n      order.match(/title.*/){|m|\n        params[:order] = params[:order].sub /tracks.(title)(.*)/i, 'LOWER(\\1)\\2'\n      }\n    end\n\n    searched = params[:q] &amp;&amp; params[:q][:search].present?\n\n    @tracks = parse_params(params[:q], @tracks)\n\n    @tracks = @tracks.offset(params[:offset])\n\n    @result_count = @tracks.count\n\n    @tracks = @tracks.order(params[:order], 'tracks.updated_at DESC').limit(params[:limit]) unless heavy_rotation\n\n    # structure heavy rotation results\n    if heavy_rotation\n\n      puts \"*\" * 300\n\n      week_ago = Time.now - 7.days\n      two_weeks_ago = Time.now - 14.days\n      three_months_ago = Time.now - 3.months\n\n\n      # mix in top licensed tracks within last 3 months\n      t = Track.top_licensed\n      tracks_top_licensed = t.where(\n        \"tracks.updated_at &gt;= :top\", \n        top: three_months_ago).limit(5)\n\n\n      # mix top listened to tracks within last two weeks\n      tracks_top_listens = @tracks.order('tracks.listens_count DESC').where(\n        \"tracks.updated_at &gt;= :top\",\n        top: two_weeks_ago)\n        .limit(3)  \n\n\n      # mix top downloaded tracks within last two weeks\n      tracks_top_downloaded = @tracks.order(\"tracks.downloads_count DESC\").where(\n        \"tracks.updated_at &gt;= :top\",\n        top: two_weeks_ago)\n        .limit(2)\n\n\n      # mix in 25% of staff picks added within 3 months\n      tracks_staff_picks = Track.ready.staff_picks.\n        includes(:artist).order(\"tracks.created_at DESC\").where(\n        \"tracks.updated_at &gt;= :top\", \n        top: three_months_ago)\n        .limit(4)\n\n      @tracks = tracks_top_licensed + tracks_top_listens + tracks_top_downloaded + tracks_staff_picks\n\n\n    end\n\n    render partial: \"shared/results\"\n  end\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4"], "comments": [{"owner": {"reputation": 14662, "user_id": 3092298, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/70530902b2446a5eccb717b2d21506fb?s=128&d=identicon&r=PG&f=1", "display_name": "Greg Burghardt", "link": "https://stackoverflow.com/users/3092298/greg-burghardt"}, "edited": false, "score": 0, "creation_date": 1423076967, "post_id": 28329118, "comment_id": 45006198, "body": "Is the <code>name_cont</code> method supposed to be a member of the <code>User</code> class then?"}], "answers": [{"comments": [{"owner": {"reputation": 1829, "user_id": 1442966, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/2347a5fea07665538a73887817f30b85?s=128&d=identicon&r=PG", "display_name": "Edward", "link": "https://stackoverflow.com/users/1442966/edward"}, "reply_to_user": {"reputation": 105, "user_id": 3192784, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/5eba1e6692c55f2102c22e206e3a23be?s=128&d=identicon&r=PG", "display_name": "Raz", "link": "https://stackoverflow.com/users/3192784/raz"}, "edited": false, "score": 0, "creation_date": 1423077255, "post_id": 28329310, "comment_id": 45006352, "body": "are you getting the same error though after using <code>search_form_for</code>?"}, {"owner": {"reputation": 201, "user_id": 7666165, "user_type": "registered", "accept_rate": 31, "profile_image": "https://i.stack.imgur.com/SakmP.jpg?s=128&g=1", "display_name": "Cliff_Cleet", "link": "https://stackoverflow.com/users/7666165/cliff-cleet"}, "edited": false, "score": 0, "creation_date": 1511774850, "post_id": 28329310, "comment_id": 81970772, "body": "I am also having a similar issue . undefied method for &#39;title_cont&#39;."}], "tags": [], "owner": {"reputation": 1829, "user_id": 1442966, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/2347a5fea07665538a73887817f30b85?s=128&d=identicon&r=PG", "display_name": "Edward", "link": "https://stackoverflow.com/users/1442966/edward"}, "is_accepted": false, "score": 0, "last_activity_date": 1423077542, "last_edit_date": 1423077542, "creation_date": 1423076505, "answer_id": 28329310, "question_id": 28329118, "link": "https://stackoverflow.com/questions/28329118/undefined-method-name-cont-for-ransacksearch/28329310#28329310", "title": "undefined method `name_cont&#39; for Ransack::Search", "body": "<p>you need to use ransack's helper to create the form too. My best guess is that you used <code>form_for</code> instead of <code>search_form_for</code> and thus getting the undefined error.</p>\n\n<p>Another possibility is that your <code>User</code> model does not have an attribute <code>name</code>.\nTry adding <code>name</code> to your model so that ransack knows what to search for.</p>\n"}], "owner": {"reputation": 105, "user_id": 3192784, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/5eba1e6692c55f2102c22e206e3a23be?s=128&d=identicon&r=PG", "display_name": "Raz", "link": "https://stackoverflow.com/users/3192784/raz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1374, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1423077542, "creation_date": 1423075890, "question_id": 28329118, "link": "https://stackoverflow.com/questions/28329118/undefined-method-name-cont-for-ransacksearch", "title": "undefined method `name_cont&#39; for Ransack::Search", "body": "<p>I was trying to use the ransank gem. But for some reason I get</p>\n\n<blockquote>\n  <p>undefined method `name_cont' for Ransack::Search>:Ransack::Search</p>\n</blockquote>\n\n<p><strong>users_controller.rb</strong></p>\n\n<pre><code>def index\n\n    @q = User.ransack(params[:q])\n    @users = @q.result\n    @users = User.order(:id).includes(:employers)\n    @users = User.order('last_name  ASC').page(params[:page]).per_page(2)\n    #Adding CSV export\n    respond_to do |format|\n      format.html\n      format.csv { send_data @users.to_csv }\n    end\n  end\n</code></pre>\n\n<p>My index.html.erb</p>\n\n<blockquote>\n  \n\n<pre><code>&lt;%= f.label :name_cont %&gt;\n&lt;%= f.search_field :name_cont %&gt;\n\n&lt;%= f.submit %&gt; &lt;% end %&gt;\n</code></pre>\n</blockquote>\n"}, {"tags": ["ruby", "sidekiq"], "comments": [{"owner": {"reputation": 17782, "user_id": 1494519, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/af54a0871600db7fbdbb5c558a6e29a3?s=128&d=identicon&r=PG", "display_name": "Mike Perham", "link": "https://stackoverflow.com/users/1494519/mike-perham"}, "edited": false, "score": 0, "creation_date": 1423076904, "post_id": 28328530, "comment_id": 45006172, "body": "Are you on the latest JRuby?  I&#39;ve never seen that problem."}, {"owner": {"reputation": 17782, "user_id": 1494519, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/af54a0871600db7fbdbb5c558a6e29a3?s=128&d=identicon&r=PG", "display_name": "Mike Perham", "link": "https://stackoverflow.com/users/1494519/mike-perham"}, "edited": false, "score": 0, "creation_date": 1423082880, "post_id": 28328530, "comment_id": 45009406, "body": "Hmm, pretty current.  1.7.19 is out (<a href=\"http://jruby.org/2015/01/30/jruby-1-7-19.html\" rel=\"nofollow noreferrer\">jruby.org/2015/01/30/jruby-1-7-19.html</a>) but I don&#39;t see any relevant fixes.  Can you include your application_controller code around line 53?"}, {"owner": {"reputation": 21271, "user_id": 168143, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/75fb60cc633a994debfe8b3a19eb91cb?s=128&d=identicon&r=PG", "display_name": "John Bachir", "link": "https://stackoverflow.com/users/168143/john-bachir"}, "reply_to_user": {"reputation": 17782, "user_id": 1494519, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/af54a0871600db7fbdbb5c558a6e29a3?s=128&d=identicon&r=PG", "display_name": "Mike Perham", "link": "https://stackoverflow.com/users/1494519/mike-perham"}, "edited": false, "score": 0, "creation_date": 1423100111, "post_id": 28328530, "comment_id": 45016001, "body": "Added to the end of the question above"}, {"owner": {"reputation": 17782, "user_id": 1494519, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/af54a0871600db7fbdbb5c558a6e29a3?s=128&d=identicon&r=PG", "display_name": "Mike Perham", "link": "https://stackoverflow.com/users/1494519/mike-perham"}, "edited": false, "score": 0, "creation_date": 1423155682, "post_id": 28328530, "comment_id": 45043350, "body": "No idea.  Pro tip though: don&#39;t delay instance methods.  It&#39;s likely just as fast to execute that update_column synchronously."}], "owner": {"reputation": 21271, "user_id": 168143, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/75fb60cc633a994debfe8b3a19eb91cb?s=128&d=identicon&r=PG", "display_name": "John Bachir", "link": "https://stackoverflow.com/users/168143/john-bachir"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 354, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1423100071, "creation_date": 1423073904, "last_edit_date": 1423100071, "question_id": 28328530, "link": "https://stackoverflow.com/questions/28328530/undefined-method-sidekiq-options-hash-for-sidekiqextensionsdelayedmodelcl", "title": "undefined method `sidekiq_options_hash&#39; for Sidekiq::Extensions::DelayedModel:Class", "body": "<p>I get this error sometimes:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>undefined method `sidekiq_options_hash' for Sidekiq::Extensions::DelayedModel:Class\n</code></pre>\n\n<p>It happens seemingly randomly in various parts of the code which usually don't have problems in other identical situations. I'm not able to reproduce it. Based on this, my suspicion is that it is some sort of concurrency issue. I don't have guesses beyond that.</p>\n\n<p>I'm on JRuby 1.7.18, perhaps that is relevant.</p>\n\n<p>Here's the beginning of an example backtrace:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>NoMethodError: undefined method `sidekiq_options_hash' for Sidekiq::Extensions::DelayedModel:Class\n  File \"/app/vendor/bundle/jruby/1.9/gems/sidekiq-3.3.0/lib/sidekiq/worker.rb\", line 80, in get_sidekiq_options\n  File \"/app/vendor/bundle/jruby/1.9/gems/sidekiq-3.3.0/lib/sidekiq/worker.rb\", line 84, in client_push\n  File \"/app/vendor/bundle/jruby/1.9/gems/sidekiq-3.3.0/lib/sidekiq/extensions/generic_proxy.rb\", line 19, in method_missing\n  File \"/app/app/controllers/application_controller.rb\", line 53, in update_foo\n</code></pre>\n\n<p>application_controller line 53 is:</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>current_user.delay.update_column(:foo, bar) # bar is an instance of Time\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "arrays"], "comments": [{"owner": {"reputation": 9139, "user_id": 773228, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/baaecdda322cf4462a0dd018d7959b1e?s=128&d=identicon&r=PG&f=1", "display_name": "Justin Wood", "link": "https://stackoverflow.com/users/773228/justin-wood"}, "edited": false, "score": 6, "creation_date": 1423071913, "post_id": 28327881, "comment_id": 45003457, "body": "It would really be better if you were able to pin point the issue you are having and only paste that bit of code, instead of pasting your entire application. This is usually called a Minimum Working Example."}, {"owner": {"reputation": 39050, "user_id": 2336231, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/d7kOQ.jpg?s=128&g=1", "display_name": "BroiSatse", "link": "https://stackoverflow.com/users/2336231/broisatse"}, "edited": false, "score": 0, "creation_date": 1423072379, "post_id": 28327881, "comment_id": 45003738, "body": "Regarding the code itself, I&#39;ll paraphrase  one sentence which changed the way I code: &#39;everytime you have to put a comment in your code, it is because you fail to write it correctly&#39;"}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1423082681, "post_id": 28327881, "comment_id": 45009295, "body": "Another luminary once said, &quot;every time you have to put a comment in your code, it is because there is no other way to make your code clear without mucking it up or wasting the day away.&quot;"}], "answers": [{"tags": [], "owner": {"reputation": 11, "user_id": 2116444, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/609c09e50144e8be8db70745ec94f315?s=128&d=identicon&r=PG", "display_name": "philcrissman", "link": "https://stackoverflow.com/users/2116444/philcrissman"}, "is_accepted": false, "score": 0, "last_activity_date": 1423073684, "last_edit_date": 1423073684, "creation_date": 1423073195, "answer_id": 28328302, "question_id": 28327881, "link": "https://stackoverflow.com/questions/28327881/not-deleting-from-array-in-ruby/28328302#28328302", "title": "Not deleting from array in Ruby", "body": "<p>It looks to me like your detect block is only going to return the first value of the first duplicated item; if you have more than one duplicate, the other duplicates won't be removed.</p>\n\n<p>Eg:</p>\n\n<pre><code>a = [1,2,2,3,4,5,5,5,6]\ndups = a.detect{|e| a.rindex(e) != a.index(e)} # =&gt; returns 2, but not 5\n</code></pre>\n\n<p>I don't know how you've modeled your cards, but you could possibly just uniq the array if you're concerned that duplicates exist:</p>\n\n<pre><code>@pc_cards.uniq! # deletes non-uniq elements from the array.\n</code></pre>\n\n<p>Update: I re-read your question, I see you're asking about the computers cards, which I assume are kept in @cards? Ultimately, I need to agree with the comments above: you have too much code here, and you aren't clearly saying <em>which</em> part is failing.</p>\n\n<p>I would look into either debugger or pry to inspect your code as it runs, or simply put some <code>puts</code> statements into your code so you can see exactly what is really happening at each point.</p>\n"}, {"tags": [], "owner": {"reputation": 64, "user_id": 4478673, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-g_YLhbKZXe8/AAAAAAAAAAI/AAAAAAAAAIg/ZdFlOJ3Kq1Y/photo.jpg?sz=128", "display_name": "Manu Gambino", "link": "https://stackoverflow.com/users/4478673/manu-gambino"}, "is_accepted": false, "score": 0, "last_activity_date": 1423083066, "creation_date": 1423083066, "answer_id": 28331179, "question_id": 28327881, "link": "https://stackoverflow.com/questions/28327881/not-deleting-from-array-in-ruby/28331179#28331179", "title": "Not deleting from array in Ruby", "body": "<p>Try using delete! Instead of delete.</p>\n"}], "owner": {"reputation": 2168, "user_id": 4386626, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/f2c9512ee4dac8ccbbf45fc2cf1a8046?s=128&d=identicon&r=PG&f=1", "display_name": "ToddT", "link": "https://stackoverflow.com/users/4386626/toddt"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 65, "favorite_count": 0, "answer_count": 2, "score": -1, "last_activity_date": 1423083066, "creation_date": 1423071759, "last_edit_date": 1423072217, "question_id": 28327881, "link": "https://stackoverflow.com/questions/28327881/not-deleting-from-array-in-ruby", "title": "Not deleting from array in Ruby", "body": "<p>This is my first attempt at learning Ruby, and I'm almost there.. this is working except for one piece.. in the function pc_draw the script asks the user if they have a card. If they do then they should be removed from both the \"computer's\" hand as well as the users hand.. But some reason its not.. Any idea why?</p>\n\n<p>Love to hear some feedback on the code in general as well, any tips or ways to write more concisely or efficiently??</p>\n\n<p>Thanks! and here is the code (edited to just include the relevant code..</p>\n\n<pre><code>def pc_draw # this is the PC playing, id dups, if none then draw, if some then delete and draw..\n    #first I have to identify the duplicates..\n    dup = @pc_cards.detect {|e| @pc_cards.rindex(e) != @pc_cards.index(e) }\n\n    if dup == nil # if no dups exist then PC has to ask for a card..\n        @ask_card = rand(@pc_cards.length) # assigns a random number limited to the length of the array\n        puts \"#{@name} do you have a #{@pc_cards[@ask_card]}? Yes or No? \" # ask for a random card in the array.. \n        @user_answer = $stdin.gets.chomp\n        pc_gofish(@user_answer, @ask_card)\n\n    else #if there are dups then take them out of the array.\n        @pc_cards.delete(dup)\n        @ask_card = rand(@pc_cards.length) # assigns a random number limited to the length of the array\n        puts \"#{@name} do you have a #{@pc_cards[@ask_card]}? Yes or No? \" # ask for a random card in the array.. \n        @user_answer = $stdin.gets.chomp\n        pc_gofish(@user_answer, @ask_card)\n    end\n\nend\n\ndef pc_gofish(take, card_delete) #this will deal with the PC asking the user for cards\n    if take == \"yes\" # if the user enters in that their is a match we delete it from pc &amp; user array\n        @pc_cards.delete(card_delete)\n        @kates_cards.delete(card_delete)\n        puts \"The computer has #{@pc_cards.length} cards left!\" #lets user know how many cards the PC has left\n\n            if @pc_cards.length == 0 # if the array is empty then the pc won!\n                puts \"The computer won!! Sorry!\"\n            else @pc_cards.length != 0 # if the array isn't empty, turn reverts back to user.\n                draw\n            end\n\n    else #this is when there is no match.. so PC has to take a card.. \n        pc_random = rand(@cards.length) # this assigns a random number constrained to the length of the cards remaining\n        @pc_cards &lt;&lt; pc_random # this inserts that random card into the users ask\n        @cards.delete(pc_random) # this takes the card from the deck of cards..\n        puts \"The computer has #{@pc_cards.length} cards left!\" #lets user know how many cards the PC has left\n        draw\n\n    end\n\n\nend\n</code></pre>\n"}, {"tags": ["ruby", "url"], "comments": [{"owner": {"reputation": 4155, "user_id": 646198, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/88f69587acb952d935a98d3bfeda5d5f?s=128&d=identicon&r=PG", "display_name": "R Milushev", "link": "https://stackoverflow.com/users/646198/r-milushev"}, "edited": false, "score": 0, "creation_date": 1423071899, "post_id": 28327770, "comment_id": 45003451, "body": "Have you tried interpolation? like this: <code>uri = URI.parse(&quot;http:&#47;&#47;localhost:15672&#47;api&#47;users&#47;#{username}&quot;)</code> . Notice the quotes are double."}, {"owner": {"reputation": 45, "user_id": 4512718, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3b9f3564b17fc7c7e84119af630be33a?s=128&d=identicon&r=PG&f=1", "display_name": "Karthik", "link": "https://stackoverflow.com/users/4512718/karthik"}, "reply_to_user": {"reputation": 4155, "user_id": 646198, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/88f69587acb952d935a98d3bfeda5d5f?s=128&d=identicon&r=PG", "display_name": "R Milushev", "link": "https://stackoverflow.com/users/646198/r-milushev"}, "edited": false, "score": 0, "creation_date": 1423075124, "post_id": 28327770, "comment_id": 45005250, "body": "That works! Thank you very much!"}, {"owner": {"reputation": 4155, "user_id": 646198, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/88f69587acb952d935a98d3bfeda5d5f?s=128&d=identicon&r=PG", "display_name": "R Milushev", "link": "https://stackoverflow.com/users/646198/r-milushev"}, "edited": false, "score": 0, "creation_date": 1423076140, "post_id": 28327770, "comment_id": 45005771, "body": "I&#39;m happy when I can help you."}], "answers": [{"tags": [], "owner": {"reputation": 4155, "user_id": 646198, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/88f69587acb952d935a98d3bfeda5d5f?s=128&d=identicon&r=PG", "display_name": "R Milushev", "link": "https://stackoverflow.com/users/646198/r-milushev"}, "is_accepted": true, "score": 1, "last_activity_date": 1423076107, "creation_date": 1423076107, "answer_id": 28329182, "question_id": 28327770, "link": "https://stackoverflow.com/questions/28327770/pass-a-resource-in-uri-as-a-parameter-ruby-api/28329182#28329182", "title": "Pass a resource in URI as a parameter Ruby API", "body": "<p>It could be done by interpolation of <code>username</code>, like this:</p>\n\n<pre><code>uri = URI.parse(\"http://localhost:15672/api/users/#{username}\")\n</code></pre>\n"}], "owner": {"reputation": 45, "user_id": 4512718, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3b9f3564b17fc7c7e84119af630be33a?s=128&d=identicon&r=PG&f=1", "display_name": "Karthik", "link": "https://stackoverflow.com/users/4512718/karthik"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 111, "favorite_count": 0, "accepted_answer_id": 28329182, "answer_count": 1, "score": 1, "last_activity_date": 1423076107, "creation_date": 1423071360, "question_id": 28327770, "link": "https://stackoverflow.com/questions/28327770/pass-a-resource-in-uri-as-a-parameter-ruby-api", "title": "Pass a resource in URI as a parameter Ruby API", "body": "<p>I hope this is not a question dealing with passing a parameter in a URL.</p>\n\n<p>I have a Put request. The following code adds a user named \"Johndoe\" in the server. It is NOT like name ?= 'JohnDoe' (not passed as a parameter)</p>\n\n<pre><code>uri = URI.parse('http://localhost:15672/api/users/JohnDoe/')\n</code></pre>\n\n<p>I would like to have the JohnDoe or any name passed from a function like,</p>\n\n<pre><code>def test_add_user(username,password)\nuri = URI.parse('http://localhost:15672/api/users/**username**/') \n</code></pre>\n\n<p>The username in the URL is the username getting added as a user in the server. I suppose the username is not a URI parameter since the 'name' part looks like a resource to me. I tried the following code but in vain</p>\n\n<pre><code>uri.join('http://localhost:15672/api/users/',username)\n</code></pre>\n\n<p>Also I tried this</p>\n\n<pre><code>username = 'john/'\nuri.join('http://localhost:15672/api/users/',username)\n</code></pre>\n\n<p>Any fixes or any alternative ideas as to how I can pass the name?</p>\n\n<p>Regards</p>\n\n<p>Karthik</p>\n"}, {"tags": ["ruby", "dynamic", "methods", "eval"], "comments": [{"owner": {"reputation": 152277, "user_id": 438992, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/QouOz.jpg?s=128&g=1", "display_name": "Dave Newton", "link": "https://stackoverflow.com/users/438992/dave-newton"}, "edited": false, "score": 0, "creation_date": 1423072978, "post_id": 28327729, "comment_id": 45004091, "body": "There&#39;s missing information. So far I&#39;m not sure why you wouldn&#39;t just call a method that handles the same code and takes an argument. Or create a utility class that does that for you, and allows either subclassing or method dispatching based on (most likely) a type somehow. So far I don&#39;t see a need for anything over-dynamic, which tends to complicate things quite a bit."}, {"owner": {"reputation": 39282, "user_id": 336920, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/6e2dbeb23d3fc6552a6e26800ed63289?s=128&d=identicon&r=PG", "display_name": "B Seven", "link": "https://stackoverflow.com/users/336920/b-seven"}, "edited": false, "score": 0, "creation_date": 1423076224, "post_id": 28327729, "comment_id": 45005822, "body": "Yes, without supplying <code>#code that stays the same across my_method_1, 2, 3, 4, etc. #code that varies across my_method_1, 2, 3, 4, etc.</code> it is not clear how to clean it up."}, {"owner": {"reputation": 39282, "user_id": 336920, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/6e2dbeb23d3fc6552a6e26800ed63289?s=128&d=identicon&r=PG", "display_name": "B Seven", "link": "https://stackoverflow.com/users/336920/b-seven"}, "edited": false, "score": 0, "creation_date": 1423076375, "post_id": 28327729, "comment_id": 45005909, "body": "I would not use <code>eval</code> or <code>method_missing</code>. I would be very cautious about using any metaprogramming because it tends to make the code much less readable. There should be some other Ruby structures you can use."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1423081961, "post_id": 28327729, "comment_id": 45008882, "body": "I don&#39;t understand the question. For example, for <code>params[:user_id]</code> is <code>#code that stays the same across my_method_1, 2, 3, 4, etc.</code> something that could be put in a method that would be called by each of the methods 1...4?  I suggest you provide a complete example, which I don&#39;t think would have be especially verbose."}], "answers": [{"comments": [{"owner": {"reputation": 18079, "user_id": 503402, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/873ad707fb34aac8fbdfbfec676e02e9?s=128&d=identicon&r=PG", "display_name": "Max", "link": "https://stackoverflow.com/users/503402/max"}, "edited": false, "score": 1, "creation_date": 1423078835, "post_id": 28328086, "comment_id": 45007210, "body": "I don&#39;t think this is an appropriate use of <code>method_missing</code>, since all possible cases are known. There&#39;s no need for a dynamic runtime hook."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1423081151, "post_id": 28328086, "comment_id": 45008481, "body": "...not to mention that <code>method_missing</code> can be a pain to debug."}], "tags": [], "owner": {"reputation": 1299, "user_id": 1904975, "user_type": "registered", "accept_rate": 28, "profile_image": "https://www.gravatar.com/avatar/114173eaaa88ef2c47f62965b3d92ed3?s=128&d=identicon&r=PG", "display_name": "Israel Barba", "link": "https://stackoverflow.com/users/1904975/israel-barba"}, "is_accepted": false, "score": 0, "last_activity_date": 1423072446, "creation_date": 1423072446, "answer_id": 28328086, "question_id": 28327729, "link": "https://stackoverflow.com/questions/28327729/dynamically-generating-code/28328086#28328086", "title": "Dynamically Generating Code", "body": "<p>You need to use dynamic methods:</p>\n\n<pre><code>def method_missing(method_name)\n    if method_name.to_s =~ /context_(.*)/\n       #Some code here that you want\n       # ...\n    end\nend\n\ndef respond_to_missing?(method_name, include_private = false)\n   method_name.to_s.start_with?('context_') || super\nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 18079, "user_id": 503402, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/873ad707fb34aac8fbdfbfec676e02e9?s=128&d=identicon&r=PG", "display_name": "Max", "link": "https://stackoverflow.com/users/503402/max"}, "is_accepted": false, "score": 1, "last_activity_date": 1423078586, "creation_date": 1423078586, "answer_id": 28329909, "question_id": 28327729, "link": "https://stackoverflow.com/questions/28327729/dynamically-generating-code/28329909#28329909", "title": "Dynamically Generating Code", "body": "<p>You can improve this by using <code>instance_eval</code>, which simply changes <code>self</code> inside the block you pass it (also <code>String#to_sym</code> avoids the eval for the hash key). You can also make the helper method define the method itself, which is a little shorter to use.</p>\n\n<pre><code>def self.define_structured_method(name, hash)\n  define_method(name) do\n    hash.each do |context, block|\n      if params[\"#{context}_id\".to_sym]\n        #code that stays the same\n        instance_eval &amp;block\n        return\n      end\n    end\n    instance_eval &amp;hash[:none]\n  end\nend\n\ndefine_structured_method(:my_method_1,\n    user:   proc { puts \"user code\" },\n    tag:    proc { puts \"tag code\"  },\n    none:   proc { puts \"else code\" }\n)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 14662, "user_id": 3092298, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/70530902b2446a5eccb717b2d21506fb?s=128&d=identicon&r=PG&f=1", "display_name": "Greg Burghardt", "link": "https://stackoverflow.com/users/3092298/greg-burghardt"}, "is_accepted": true, "score": 1, "last_activity_date": 1423079826, "creation_date": 1423079826, "answer_id": 28330286, "question_id": 28327729, "link": "https://stackoverflow.com/questions/28327729/dynamically-generating-code/28330286#28330286", "title": "Dynamically Generating Code", "body": "<p>The repetitive branches in your code tell me your class could use a little refactoring to remove the need for multiple if-statements. It sounds like your class needs to delegate to another class for specific functionality. While I don't know that your class looks like, or it's intent, the following is an example that you could apply to your code so that you <em>don't</em> need to generate dynamic methods at all.</p>\n\n<h2>The hypothetical <code>Order</code> class with repetitive if-statements</h2>\n\n<p>Consider this <code>Order</code> class with multiple, similar looking if-statements:</p>\n\n<pre><code>class Order\n  attr_accessor :order_type\n\n  def discount_amount\n    if order_type == 1\n      .2\n    elsif order_type == 2\n      .5\n    else\n      0\n    end\n  end\n\n  def discount_end_date\n    if order_type == 1\n      DateTime.new(2014, 12, 31)\n    elsif order_type == 2\n      DateTime.new(2014, 3, 31)\n    else\n      # Always expires 100 years from now\n      DateTime.new(DateTime.now.year + 100, 1, 1)\n    end\n  end\nend\n</code></pre>\n\n<p>We have three discounts: 20% off that expires end of 2014; 50% which expires end of March, 2014. Finally the default discount of 0% always expires 100 years in the future. Let's clean this up to remove the if-statments, and instead delegate to a <code>Discount</code> class for these calculations.</p>\n\n<h2>Refactor the <code>Order</code> class to utilize delegate methods</h2>\n\n<p>First up, let's clean up the <code>Order</code> class, then we will implement a <code>Discount</code> class:</p>\n\n<pre><code>class Order\n  attr_accessor :order_type\n\n  def discount\n    @discount ||=\n      if order_type == 1\n        Discount.twenty_percent_off\n      elsif order_type == 2\n        Discount.half_off\n      else\n        Discount.default_discount\n      end\n  end\n\n  def discount_amount\n    discount.amount\n  end\n\n  def discount_end_date\n    discount.end_date\n  end\nend\n</code></pre>\n\n<p>Nice and clean. An <code>Order</code> object needs a <code>Discount</code> object to get the discount amount and end date. The <code>Order</code> class is now virtually infinitely extensible since the logic for calculating discounts is off-loaded to another class entirely. The <code>Order#order_type</code> value determines the discount. Now, let's define our <code>Discount</code> class.</p>\n\n<h2>Implementing the <code>Discount</code> class</h2>\n\n<p>According to our (fake) business rules, only three discounts exist:</p>\n\n<ol>\n<li>20%-off, expiring end of 2014</li>\n<li>50%-off, expiring end of March, 2014</li>\n<li>0%-off (no discount) which always expires 100 years from today, essentially meaning it never expires</li>\n</ol>\n\n<p>We don't want people to create arbitrary discounts, so let's limit our <code>Discount</code> instances to only those that we define by using a private constructor, then declaring static methods for each kind of discount:</p>\n\n<pre><code>class Discount\n  private_class_method :new\n\n  def self.default_discount\n    @@default_discount ||= new(0)\n  end\n\n  def self.half_off\n    @@half_off_discount ||= new(.5, DateTime.new(2014, 3, 31))\n  end\n\n  def self.twenty_percent_off\n    @@twenty_percent_off ||= new(.2, DateTime.new(2014, 12, 31))\n  end\n\n  def initialize(amount, end_date = nil)\n    @amount = amount\n    @end_date = end_date\n  end\n\n  def amount\n    @amount\n  end\n\n  def end_date\n    @end_date ||= DateTime.new(DateTime.now.year + 100, 1, 1)\n  end\nend\n</code></pre>\n\n<p>Trying to run <code>Discount.new(...)</code> should throw an error. We only have three Discount instances available:</p>\n\n<pre><code>Discount.half_off\nDiscount.twenty_percent_off\nDiscount.default_discount\n</code></pre>\n\n<p>Given that the <code>Order#order_type</code> is used to determine the discount, we emulate this with <code>Order#discount</code> returning the proper <code>Discount</code> instance based on the <code>Order#order_type</code>. Furthermore, we prevent people from gaming the system by defining their own discounts and the logic for all the discounts is in one class.</p>\n\n<pre><code>order = Order.new\norder.order_type = 1\nputs order.discount_amount # -&gt; .2\n\norder = Order.new\norder.order_type = 2\nputs order.discount_amount # -&gt; .5\n</code></pre>\n\n<p>You can use sub classing to create even more specific business logic, for instance a \"random\" discount:</p>\n\n<pre><code>class Discount\n  protected_class_method :new\n\n  ...\n\n  def self.random\n    @random_discount ||= RandomDiscount.new(nil)\n  end\n\n  class RandomDiscount &lt; Discount\n    def amount\n      rand / 2\n    end\n  end\nend\n</code></pre>\n\n<p>Now <code>Discount.random.amount</code> outputs a different discount every time. The possibilities become endless.</p>\n\n<h2>How this applies to your question</h2>\n\n<p>The existence of repetitive if-statements means your class is doing too much. It should be delegating to another class that specializes in one of those branches of code. You shouldn't have to manipulate methods in Ruby at runtime to achieve this. It's too much \"magic\" and is confusing to new developers. With the approach I outlined above, you get a strongly typed definition of what these discounts are, and you keep each class focused on one task (and no, \"strongly typed\" is not a four letter word in Ruby when properly used). You get well defined relationships between objects, code that is easier to test and you get strong enforcement of business rules. All with no \"magic.\"</p>\n"}], "owner": {"reputation": 25, "user_id": 4178282, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-_1hMkZJK_Tw/AAAAAAAAAAI/AAAAAAAAABE/igtYV4bs4lY/photo.jpg?sz=128", "display_name": "Daniel", "link": "https://stackoverflow.com/users/4178282/daniel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 194, "favorite_count": 0, "accepted_answer_id": 28330286, "answer_count": 3, "score": 2, "last_activity_date": 1423079826, "creation_date": 1423071224, "last_edit_date": 1423072836, "question_id": 28327729, "link": "https://stackoverflow.com/questions/28327729/dynamically-generating-code", "title": "Dynamically Generating Code", "body": "<p>I have a whole bunch of similarly-structured methods, each of which look something like this:</p>\n\n<pre><code>def my_method_1\n  if params[:user_id]\n    #code that stays the same across my_method_1, 2, 3, 4, etc.\n    #code that varies across my_method_1, 2, 3, 4, etc.\n  elsif params[:tag_id]\n    #code that stays the same across my_method_1, 2, 3, 4, etc.\n    #code that varies across my_method_1, 2, 3, 4, etc.\n  else\n    #code that stays the same across my_method_1, 2, 3, 4, etc.\n    #code that varies across my_method_1, 2, 3, 4, etc.\n  end\nend\n</code></pre>\n\n<p>I have my_method_2, 3, 4, etc.  What I'm trying to do is avoid typing out all of this for every method I have, since most of the code is repetitive. I only want to type out the bit of code that actually varies across the methods 1, 2, 3, 4, etc.</p>\n\n<p>My attempt at this uses eval(), which works, and certainly dries up all my individual methods, but makes me uncomfortable.  Basically, I have a helper method that takes in key-value pairs, the key being the \"context\", and the value being a \"statement\" specified as a string:</p>\n\n<pre><code>def helper_method\n  hash.each do |context, statement|\n    if params[eval(\":#{context}_id\")]\n      #code that stays the same\n      eval(statement)\n      return\n    end\n  end\n  eval(hash[:none])\nend\n</code></pre>\n\n<p>Now my individual methods can be super dry, just calling the helper methods and passing in the strings of code:</p>\n\n<pre><code>def my_method_1\n  helper_method(\n    user:   '#code that varies',\n    tag:    '#code that varies',\n    none:   '#code that varies'\n  )\nend\n</code></pre>\n\n<p>Again, typing out chunks of code inside strings makes me uncomfortable. Any help in going about this another way would be much appreciated!  </p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "answers": [{"comments": [{"owner": {"reputation": 197, "user_id": 3706202, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/e5dd1d8b7eff3ed78ba06d595fe6f5e8?s=128&d=identicon&r=PG&f=1", "display_name": "user3706202", "link": "https://stackoverflow.com/users/3706202/user3706202"}, "edited": false, "score": 0, "creation_date": 1423074050, "post_id": 28327906, "comment_id": 45004672, "body": "But then this should work in rails c right? So if i do u = User.order(&#39;RAND()&#39;).first it should work? Now i get an error...."}, {"owner": {"reputation": 3976, "user_id": 1210165, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4f674db9036f7245292bb87295431e31?s=128&d=identicon&r=PG", "display_name": "evanbikes", "link": "https://stackoverflow.com/users/1210165/evanbikes"}, "reply_to_user": {"reputation": 197, "user_id": 3706202, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/e5dd1d8b7eff3ed78ba06d595fe6f5e8?s=128&d=identicon&r=PG&f=1", "display_name": "user3706202", "link": "https://stackoverflow.com/users/3706202/user3706202"}, "edited": false, "score": 0, "creation_date": 1423078213, "post_id": 28327906, "comment_id": 45006882, "body": "What database are you using?"}, {"owner": {"reputation": 3976, "user_id": 1210165, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4f674db9036f7245292bb87295431e31?s=128&d=identicon&r=PG", "display_name": "evanbikes", "link": "https://stackoverflow.com/users/1210165/evanbikes"}, "reply_to_user": {"reputation": 197, "user_id": 3706202, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/e5dd1d8b7eff3ed78ba06d595fe6f5e8?s=128&d=identicon&r=PG&f=1", "display_name": "user3706202", "link": "https://stackoverflow.com/users/3706202/user3706202"}, "edited": false, "score": 0, "creation_date": 1423078283, "post_id": 28327906, "comment_id": 45006928, "body": "That is, <code>RAND()</code> I think is MySQL. For postgres, you have to do <code>User.order(&#39;random()&#39;).first</code>"}], "tags": [], "owner": {"reputation": 3976, "user_id": 1210165, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4f674db9036f7245292bb87295431e31?s=128&d=identicon&r=PG", "display_name": "evanbikes", "link": "https://stackoverflow.com/users/1210165/evanbikes"}, "is_accepted": false, "score": 0, "last_activity_date": 1423071820, "creation_date": 1423071820, "answer_id": 28327906, "question_id": 28327687, "link": "https://stackoverflow.com/questions/28327687/rake-function-does-not-work-with-random-user/28327906#28327906", "title": "Rake function does not work with random user", "body": "<p>This looks like old Rails. </p>\n\n<p>Try:</p>\n\n<pre><code>User.order('RAND()').first\n</code></pre>\n"}], "owner": {"reputation": 197, "user_id": 3706202, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/e5dd1d8b7eff3ed78ba06d595fe6f5e8?s=128&d=identicon&r=PG&f=1", "display_name": "user3706202", "link": "https://stackoverflow.com/users/3706202/user3706202"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 62, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1423071820, "creation_date": 1423071068, "question_id": 28327687, "link": "https://stackoverflow.com/questions/28327687/rake-function-does-not-work-with-random-user", "title": "Rake function does not work with random user", "body": "<p>Im want to create a simple rake function which provides me with the option to draw a random user.</p>\n\n<pre><code>task :pick_winner =&gt; :environment do\n user = User.find(:first, :order =&gt; 'RAND()')\n puts \"Winner #{user.name}\"\nend\n</code></pre>\n\n<p>When i run code above I get the following error however</p>\n\n<pre><code>ActiveRecord::RecordNotFound: Couldn't find all Users with 'id': (first, {:order=&gt;\"RAND()\"}) (found 0 results, but was looking for 2)\n</code></pre>\n\n<p>What goes wrong?</p>\n"}, {"tags": ["ruby", "rake", "sublimetext", "sublimetext3"], "answers": [{"tags": [], "owner": {"reputation": 39030, "user_id": 87796, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/b2028885d939a335af8333da70d06310?s=128&d=identicon&r=PG", "display_name": "P.Brian.Mackey", "link": "https://stackoverflow.com/users/87796/p-brian-mackey"}, "is_accepted": true, "score": 0, "last_activity_date": 1423499510, "last_edit_date": 1423499510, "creation_date": 1423082993, "answer_id": 28331160, "question_id": 28327565, "link": "https://stackoverflow.com/questions/28327565/can-i-extend-go-to-definition-to-go-to-the-ruby-web-api-or-code-definition/28331160#28331160", "title": "Can I extend Go To Definition to go to the ruby web API or code definition?", "body": "<p>Rubymine is the best tool I've tried:  <a href=\"https://www.jetbrains.com/ruby/\" rel=\"nofollow\">https://www.jetbrains.com/ruby/</a>  ...Unless you are a student or a successful open source developer, the product is not free.</p>\n\n<p>I tried <a href=\"https://github.com/SublimeCodeIntel/SublimeCodeIntel\" rel=\"nofollow\">SublimeCodeIntel</a>, but it was not powerful enough for my needs.</p>\n"}], "owner": {"reputation": 39030, "user_id": 87796, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/b2028885d939a335af8333da70d06310?s=128&d=identicon&r=PG", "display_name": "P.Brian.Mackey", "link": "https://stackoverflow.com/users/87796/p-brian-mackey"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 153, "favorite_count": 0, "accepted_answer_id": 28331160, "answer_count": 1, "score": 0, "last_activity_date": 1423499510, "creation_date": 1423070595, "last_edit_date": 1423083100, "question_id": 28327565, "link": "https://stackoverflow.com/questions/28327565/can-i-extend-go-to-definition-to-go-to-the-ruby-web-api-or-code-definition", "title": "Can I extend Go To Definition to go to the ruby web API or code definition?", "body": "<p>I am running into problems where I cannot tell if the code I'm reading is standard ruby, some gem or in house code.  To resolve this I would like to extend the capabilities of Go To Definition.  Can I configure or add an extension to sublime that will allow Go To Definition to be more intelligent for ruby?  </p>\n\n<p>I added Sublime Text > Preferences > Settings - User:</p>\n\n<p><code>\"word_separators\": \"./\\\\()\\\"'-:,.;&lt;&gt;~@#$%^&amp;*|+=[]{}</code>~\"`</p>\n\n<p>Then I tried to go to definition on this line in my *.rb file:</p>\n\n<p><code>@project = ENV['project']</code></p>\n\n<p>Go to definition did nothing for both variables. In visual studio, programming.NET, I can hit F1 and go to MSDN.  Or, go to definition and it pulls up the code file or metadata.  </p>\n\n<p>I am willing to try tools other than Sublime Text.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "web-deployment", "webfaction"], "answers": [{"tags": [], "owner": {"reputation": 3044, "user_id": 897279, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/B20n2.jpg?s=128&g=1", "display_name": "Matt Stein", "link": "https://stackoverflow.com/users/897279/matt-stein"}, "is_accepted": true, "score": 1, "last_activity_date": 1423123291, "creation_date": 1423123291, "answer_id": 28338910, "question_id": 28327434, "link": "https://stackoverflow.com/questions/28327434/why-wont-huginn-agents-act-on-webfaction/28338910#28338910", "title": "Why won&#39;t Huginn agents act on Webfaction?", "body": "<p>Thanks to help from John at Webfaction, it boiled down to setting a custom temp directory that could be written to with my account...</p>\n\n<pre><code>mkdir -p $HOME/tmp\nexport TEMP=$HOME/tmp\n</code></pre>\n\n<p>Sure enough, running <code>ruby2.1 bin/bundle exec foreman start</code> worked just fine and the Agents sprang to life.</p>\n\n<p>Then I promptly hit the wall of my 512MB memory limit, so it's on to other issues.</p>\n"}], "owner": {"reputation": 3044, "user_id": 897279, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/B20n2.jpg?s=128&g=1", "display_name": "Matt Stein", "link": "https://stackoverflow.com/users/897279/matt-stein"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 341, "favorite_count": 1, "accepted_answer_id": 28338910, "answer_count": 1, "score": 1, "last_activity_date": 1423123291, "creation_date": 1423070135, "last_edit_date": 1423075414, "question_id": 28327434, "link": "https://stackoverflow.com/questions/28327434/why-wont-huginn-agents-act-on-webfaction", "title": "Why won&#39;t Huginn agents act on Webfaction?", "body": "<p>I could spool up a VPS or deploy to a PaaS, but I'm determined to get <a href=\"https://github.com/cantino/huginn\" rel=\"nofollow noreferrer\">Huginn</a> working on my <a href=\"https://www.webfaction.com/?aid=52204\" rel=\"nofollow noreferrer\">Webfaction</a> account because I'm pretty sure it's possible and I just don't get rails deployments.</p>\n\n<p>After hours of hacking away, I ended up with a running app <a href=\"https://github.com/cantino/huginn/issues/332\" rel=\"nofollow noreferrer\">whose Agents do nothing</a>. I can't manage to run <code>foreman start</code>, the magical command that should solve the problem, so I'm not sure what else to do.</p>\n\n<p><img src=\"https://i.stack.imgur.com/bIrey.png\" alt=\"Background jobs that never get executed.\"></p>\n\n<p><img src=\"https://i.stack.imgur.com/kHgDU.png\" alt=\"Choosing &#39;Run event propagation&#39; confirms a queue of 0 events on 0 agents. &#39;Working&#39; is always &#39;no&#39;.]\"></p>\n\n<h2>How I got here</h2>\n\n<p>I'm used to PHP and these deployments are foreign to me, so I'm certain the problem's between the chair and the keyboard...</p>\n\n<ol>\n<li>Created a new Webfaction Application called <code>huginn</code> with Rails 4.1.8 (nginx 1.6.2/Passenger 4.0.53/Ruby 2.1.2).</li>\n<li>Cloned <a href=\"https://github.com/cantino/huginn\" rel=\"nofollow noreferrer\">huginn</a> into its own folder next to the <code>hello_world</code> example app that Webfaction initializes. (<code>~/webapps/huginn/huginn/</code>)</li>\n<li>Edited <code>~/webapps/nginx/conf/nginx.conf</code> (which came from Webfaction's init script) to point to my cloned <code>huginn</code> folder instead of <code>hello_world</code>. Changed <code>GEM_HOME</code> to <code>/home/foo/webapps/huginn/huginn/gems</code> instead of <code>/home/foo/webapps/huginn/gems</code>, <code>root</code> to <code>/home/foo/webapps/huginn/huginn/public</code>, and <code>rails_env</code> to <code>production</code>.</li>\n<li>Edited <code>~/webapps/huginn/bin/start</code> to adjust paths (see below).</li>\n<li>Copied and configured Huginn's <code>.env</code> properly, pointing to a fresh MySQL database with valid credentials. Added a randomly-generated <code>APP_SECRET_TOKEN</code>, set host name and email configuration.</li>\n<li>Added app bin, path, and gems to PATH using <a href=\"http://docs.webfaction.com/software/rails.html\" rel=\"nofollow noreferrer\">Webfaction's instructions</a>.</li>\n<li>From <code>~/webapps/huginn/huginn</code>, ran <code>gem2.1 install bundle</code>, <code>ruby2.1 bin/bundle</code>, <code>ruby2.1 bin/bundle exec rake db:migrate</code>, <code>ruby2.1 bin/bundle exec rake db:seed</code> and all goes well; dependencies installed to huginn's directories, database populated, etc.</li>\n<li>Ran <code>ruby2.1 bin/bundle exec foreman start</code> and failed:</li>\n</ol>\n\n<blockquote>\n  <p>16:50:03 web.1  | started with pid 7115<br>\n     16:50:03 jobs.1 | started with pid 7116<br>\n     16:50:06 jobs.1 | /home/foo/webapps/huginn/huginn/gems/gems/spring-1.1.3/lib/spring/server.rb:22:in `initialize': Permission denied @ rb_sysopen - /tmp/spring/e89e6bd5b6863aeed0fbb5c861b1fc2d.pid (Errno::EACCES)</p>\n</blockquote>\n\n<ol start=\"8\">\n<li>Go back and run <code>~/webapps/huginn/bin/stop</code>, <code>~/webapps/huginn/bin/start</code>, and the app miraculously starts working in my browser. Except for the Agents, which do nothing on schedule or an attempt to manually run them.</li>\n</ol>\n\n<p>I suspect that I'm missing something when it comes to environment variables and ruby versions. Various ruby versions are available, but <code>ruby --version</code> outputs <code>ruby 1.8.7 (2013-06-27 patchlevel 374) [x86_64-linux]</code>. Even I figured out that there are symlinks to different versions, so <code>ruby2.1 --version</code> gets me <code>ruby 2.1.2p95 (2014-05-08 revision 45877) [x86_64-linux]</code>. My guess is that the app's using Ruby 1.8.7, and I ran with this trying to <a href=\"https://community.webfaction.com/questions/6846/ruby-192\" rel=\"nofollow noreferrer\">install rvm to select a different ruby version</a>\u2014I didn't make it through <code>rvm install X.X.X</code> because I'm not a sudoer and <code>libyaml-devel</code> couldn't be installed.</p>\n\n<p>I was briefly excited to learn that I could run <code>ruby2.1 bin/rails s --port=22766 --environment=production</code> from the deployed app directory and have the app once again running in the browser\u2014but with the exact same issue of non-responsive agents.</p>\n\n<p>It seems like I'm really close, but that I'm missing something that's consistently leaving Huginn's agents crippled. <strong>What am I missing?</strong></p>\n\n<hr>\n\n<p><strong>nginx.conf</strong></p>\n\n<pre><code>env               GEM_HOME=/home/foo/webapps/huginn/huginn/gems;\nworker_processes  1;\n\nevents {\n    worker_connections  1024;\n}\n\nhttp {\n    access_log  /home/foo/logs/user/access_huginn.log  combined;\n    error_log   /home/foo/logs/user/error_huginn.log   crit;\n\n    include         mime.types;\n    passenger_root  /home/foo/webapps/huginn/gems/gems/passenger-4.0.53;\n    passenger_ruby  /home/foo/webapps/huginn/bin/ruby;\n    sendfile        on;\n\n    passenger_max_instances_per_app  1;\n    rails_spawn_method               conservative;\n    passenger_max_pool_size 2;\n\n    server {\n        listen             22766;\n        passenger_enabled  on;\n        root               /home/foo/webapps/huginn/huginn/public;\n        server_name        localhost;\n        rails_env          production;\n    }\n}\n</code></pre>\n\n<p><strong>~/webapps/huginn/bin/start</strong></p>\n\n<pre><code>#!/bin/bash\n\nPATH=/usr/local/bin:/bin:/usr/bin:/usr/local/sbin:/usr/sbin:/sbin:/home/foo/bin RUBYLIB=/home/foo/webapps/huginn/huginn/lib:$RUBYLIB TMPDIR=/home/foo/webapps/huginn/tmp PASSENGER_TMPDIR=/home/foo/webapps/huginn/tmp GEM_HOME=/home/foo/webapps/huginn/huginn/gems /home/foo/webapps/huginn/nginx/sbin/nginx -p /home/foo/webapps/huginn/nginx/\n</code></pre>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 7633, "user_id": 1520714, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/b6725a3582042901598451ee700116ce?s=128&d=identicon&r=PG&f=1", "display_name": "Mike Campbell", "link": "https://stackoverflow.com/users/1520714/mike-campbell"}, "edited": false, "score": 0, "creation_date": 1423070738, "post_id": 28327062, "comment_id": 45002768, "body": "can you provide an example of <code>test_week_days_array</code>?"}, {"owner": {"reputation": 270444, "user_id": 405017, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/2024054e404233ed97b7d9287aff103d?s=128&d=identicon&r=PG", "display_name": "Phrogz", "link": "https://stackoverflow.com/users/405017/phrogz"}, "edited": false, "score": 0, "creation_date": 1423072346, "post_id": 28327062, "comment_id": 45003718, "body": "What about <code>%w[sunday monday]</code> or <code>%w[friday monday]</code> or <code>%w[thursday friday monday]</code>?"}, {"owner": {"reputation": 7544, "user_id": 1085998, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/459252fca62e56c1131babdba2b1babe?s=128&d=identicon&r=PG", "display_name": "daremkd", "link": "https://stackoverflow.com/users/1085998/daremkd"}, "edited": false, "score": 0, "creation_date": 1423072753, "post_id": 28327062, "comment_id": 45003970, "body": "You should use Array#order if you want the most straightforward way, see my answer."}], "answers": [{"tags": [], "owner": {"reputation": 2691, "user_id": 3324630, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/P6gEL.jpg?s=128&g=1", "display_name": "Grych", "link": "https://stackoverflow.com/users/3324630/grych"}, "is_accepted": false, "score": 2, "last_activity_date": 1423071384, "creation_date": 1423071384, "answer_id": 28327776, "question_id": 28327062, "link": "https://stackoverflow.com/questions/28327062/test-if-array-of-week-day-names-is-sorted-correctly/28327776#28327776", "title": "Test if array of week day names is sorted correctly?", "body": "<p>What about some functional approach? Consider the code below (please note it could be written in more compact way, I left the big <code>if-than-else</code> for readability):</p>\n\n<pre><code>DAYS = [:monday, :tuesday, :wednesday, :thursday, :friday, :saturday, :sunday]\n\ndef days_sorted_ok?(weekdays)\n  if weekdays.empty? || weekdays.count == 1\n    # only one day, so it is sorted well\n    return true\n  else\n    # true, if the next day (weekdays[1]) is the next on the DAYS list\n    if weekdays[1] == DAYS[(DAYS.index(weekdays[0]) + 1) % DAYS.count]\n      if weekdays.count == 2 \n        # only two days in the table, so the whole thing is sorted well\n        return true\n      else\n        # check if the tail of the array is sorted well\n        days_sorted_ok?(weekdays[1..-1])\n      end\n    else\n      # second element is not a next weekday\n      return false\n    end\n  end\nend\n</code></pre>\n\n<p>This is a recurring method. First, it checks if the array is empty or contains only one element. In this case it treats it as sorted in a good way. In the other case, it checks if the second element of the list is the next of the <code>DAYS</code> list (with modulo, to cycle the weekdays). If it is true, and the list contains only 2 elements, it means that it is sorted well. In the other case it will search <strong>recursively</strong> in the rest of the list.</p>\n\n<p>Couple of tests are below:</p>\n\n<pre><code>days_sorted_ok? DAYS\n#=&gt; true\ndays_sorted_ok? [:tuesday, :wednesday, :thursday]\n#=&gt; true\ndays_sorted_ok? [:monday, :tuesday, :wednesday, :thursday, :friday, :sunday, :sunday]\n#=&gt; false\ndays_sorted_ok? [:monday, :tuesday, :wednesday, :thursday, :friday, :saturday, :sunday, :monday, :sunday]\n#=&gt; false\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 208794, "user_id": 229044, "user_type": "moderator", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/591426cbbacd4025d920467bad356911?s=128&d=identicon&r=PG&f=1", "display_name": "meagar", "link": "https://stackoverflow.com/users/229044/meagar"}, "is_accepted": true, "score": 4, "last_activity_date": 1423072598, "last_edit_date": 1423072598, "creation_date": 1423071787, "answer_id": 28327888, "question_id": 28327062, "link": "https://stackoverflow.com/questions/28327062/test-if-array-of-week-day-names-is-sorted-correctly/28327888#28327888", "title": "Test if array of week day names is sorted correctly?", "body": "<p>A dead simple, two-line algorithm that (optionally) works for inputs containing fewer than seven days.</p>\n\n<p>Take the days:</p>\n\n<pre><code>days = %w(monday tuesday wednesday thursday friday saturday sunday)\n# =&gt; [\"monday\", \"tuesday\", \"wednesday\", \"thursday\", \"friday\", \"saturday\", \"sunday\"]\n</code></pre>\n\n<p>Double the array, so that it contains every possible valid sub-array:</p>\n\n<pre><code>days *= 2\n# =&gt; [\"monday\", \"tuesday\", \"wednesday\", \"thursday\", \"friday\", \"saturday\", \"sunday\", \"monday\", \"tuesday\", \"wednesday\", \"thursday\", \"friday\", \"saturday\", \"sunday\"]\n</code></pre>\n\n<p>Given your input cases...</p>\n\n<pre><code>case1 = %w(monday tuesday wednesday thursday friday saturday sunday)\ncase2 = %w(thursday friday saturday sunday monday tuesday wednesday)\ncase3 = %w(monday thursday tuesday wednesday sunday friday saturday)\ncase4 = %w(wednesday thursday friday saturday sunday monday tuesday)\n</code></pre>\n\n<p>For each input case, see if there is any <a href=\"http://ruby-doc.org/core-2.2.0/Enumerable.html#method-i-each_cons\" rel=\"nofollow\">slice of consecutive elements</a> in the <code>days</code> array that matches your input:</p>\n\n<pre><code>days.each_cons(case1.length).include?(case1) # true\ndays.each_cons(case2.length).include?(case2) # true\ndays.each_cons(case3.length).include?(case3) # false\ndays.each_cons(case4.length).include?(case4) # true\n</code></pre>\n\n<p>All in all this is a two line solution:</p>\n\n<pre><code>def days_in_order?(days)\n  search_list = %w(monday tuesday wednesday thursday friday saturday sunday) * 2\n  search_list.each_cons(days.length).include?(days)\nend\n</code></pre>\n\n<p>You'll need to handle the case where the input's capitalization doesn't match (<code>'monday'</code> vs <code>'Monday'</code>), but that's a trivial extension. If you want this to only accept input array which are seven days long, change <code>each_cons(days.length)</code> to <code>each_cons(7)</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 208794, "user_id": 229044, "user_type": "moderator", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/591426cbbacd4025d920467bad356911?s=128&d=identicon&r=PG&f=1", "display_name": "meagar", "link": "https://stackoverflow.com/users/229044/meagar"}, "edited": false, "score": 0, "creation_date": 1423072928, "post_id": 28328158, "comment_id": 45004069, "body": "I considered and rejected rotation because it cannot work if the array lengths do not match. However, if the array lengths must match, this is a good algorithm. I would simply suggest that you replace the guts with the simpler: <code>def same_order?(arr1, arr2); 0.upto(arr1.length).any? { |r| arr1.rotate(r) == arr2 }; end</code>"}, {"owner": {"reputation": 7544, "user_id": 1085998, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/459252fca62e56c1131babdba2b1babe?s=128&d=identicon&r=PG", "display_name": "daremkd", "link": "https://stackoverflow.com/users/1085998/daremkd"}, "reply_to_user": {"reputation": 208794, "user_id": 229044, "user_type": "moderator", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/591426cbbacd4025d920467bad356911?s=128&d=identicon&r=PG&f=1", "display_name": "meagar", "link": "https://stackoverflow.com/users/229044/meagar"}, "edited": false, "score": 0, "creation_date": 1423074262, "post_id": 28328158, "comment_id": 45004787, "body": "Thus the check at the beginning if they&#39;re the same. From his test cases it seems they&#39;re basically the same content."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1423101402, "post_id": 28328158, "comment_id": 45016256, "body": "I agree that <code>rotate</code> is a good choice.  Note you could use <code>(arr1-arr2).empty? &amp;&amp; (arr2-arr1).empty?</code> rather than comparing sorted arrays.  That might be more efficient if there were millions of days per week. :-)"}], "tags": [], "owner": {"reputation": 7544, "user_id": 1085998, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/459252fca62e56c1131babdba2b1babe?s=128&d=identicon&r=PG", "display_name": "daremkd", "link": "https://stackoverflow.com/users/1085998/daremkd"}, "is_accepted": false, "score": 1, "last_activity_date": 1423072694, "creation_date": 1423072694, "answer_id": 28328158, "question_id": 28327062, "link": "https://stackoverflow.com/questions/28327062/test-if-array-of-week-day-names-is-sorted-correctly/28328158#28328158", "title": "Test if array of week day names is sorted correctly?", "body": "<pre><code>def same_order?(arr1, arr2)\n  raise 'Not same array' unless arr1.sort == arr2.sort\n\n  arr1.length.times do\n    arr1 = arr1.rotate\n    return true if arr1 == arr2\n  end\n\n  return false\nend\n\n\ncorrect_order = ['monday', 'tuesday', 'wednesday', 'thursday', 'friday', 'saturday', 'sunday']\na = ['wednesday', 'thursday', 'friday', 'saturday', 'sunday', 'monday', 'tuesday']\nb = ['monday', 'thursday', 'tuesday', 'wednesday', 'sunday', 'friday', 'saturday']\np same_order?(correct_order, a) #=&gt; true\np same_order?(correct_order, b) #=&gt; false\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 3612, "user_id": 2865270, "user_type": "registered", "accept_rate": 29, "profile_image": "https://graph.facebook.com/1198391393/picture?type=large", "display_name": "Fred Willmore", "link": "https://stackoverflow.com/users/2865270/fred-willmore"}, "is_accepted": false, "score": 0, "last_activity_date": 1423078883, "creation_date": 1423078883, "answer_id": 28329992, "question_id": 28327062, "link": "https://stackoverflow.com/questions/28327062/test-if-array-of-week-day-names-is-sorted-correctly/28329992#28329992", "title": "Test if array of week day names is sorted correctly?", "body": "<p>My solution reorders the array under test and compares with a properly ordered array (along with a little data housekeeping)</p>\n\n<pre><code>def test a\n  # deal with an array of symbols or strings\n  a = a.map do |day| day.downcase.to_sym end\n  # make sure we at least have a monday in the array so we don't get stuck\n  if a.include? :monday\n    # reorder array so that monday is the first element\n    while a.first != :monday\n      a &lt;&lt; a.shift\n    end \n  end \n  # does it match an ideal ordered array?\n  a == [:monday, :tuesday, :wednesday, :thursday, :friday, :saturday, :sunday]\nend\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1423091245, "post_id": 28333245, "comment_id": 45013500, "body": "I see @daremkd also used <code>Array#rotate</code>, but in a somewhat different way, so I will leave my answer."}], "tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": false, "score": 0, "last_activity_date": 1423090965, "creation_date": 1423090965, "answer_id": 28333245, "question_id": 28327062, "link": "https://stackoverflow.com/questions/28327062/test-if-array-of-week-day-names-is-sorted-correctly/28333245#28333245", "title": "Test if array of week day names is sorted correctly?", "body": "<p>Another way of doing this is to make use of the method <a href=\"http://www.ruby-doc.org/core-2.2.0/Array.html#method-i-rotate-21\" rel=\"nofollow\">Array#rotate!</a> (or <code>rotate</code>).</p>\n\n<p>I've assumed the array to be tested contains the names of the seven days of the week, capitalized, and nothing else. We are merely to check if the order is correct.</p>\n\n<p>First, if the reader is not familiar with the construction of an array of strings using <code>%w</code>, here's an example:</p>\n\n<pre><code>%w{ Monday Tuesday Wednesday Thursday Friday Saturday Sunday }\n  #=&gt; [\"Monday\", \"Tuesday\", \"Wednesday\", \"Thursday\",\n       \"Friday\", \"Saturday\", \"Sunday\"] \n</code></pre>\n\n<p><strong>Code</strong></p>\n\n<pre><code>def dow_sorted?(arr)\n  %w{ Monday Tuesday Wednesday Thursday Friday Saturday Sunday }\n    .rotate!(-arr.index('Monday')) == arr\nend\n</code></pre>\n\n<p><strong>Examples</strong></p>\n\n<pre><code>dow_sorted? %w{ Monday Tuesday Wednesday Thursday Friday Saturday Sunday }\n  #=&gt; true\ndow_sorted? %w{ Thursday Friday Saturday Sunday Monday Tuesday Wednesday }\n  #=&gt; true\ndow_sorted? %w{ Monday Thursday Tuesday Wednesday Sunday Friday Saturday }\n  #=&gt; false\ndow_sorted? %w{ Friday Saturday Sunday Monday Wednesday Tuesday Thursday }\n  #=&gt; false\n</code></pre>\n\n<p><strong>Explanation</strong></p>\n\n<p>For the last example:</p>\n\n<pre><code>arr = %w{ Friday Saturday Sunday Monday Wednesday Tuesday Thursday }\n  #=&gt; [\"Friday\", \"Saturday\", \"Sunday\", \"Monday\",\n  #    \"Wednesday\", \"Tuesday\", \"Thursday\"] \n\nord = %w{ Monday Tuesday Wednesday Thursday Friday Saturday Sunday }\n  #=&gt; [\"Monday\", \"Tuesday\", \"Wednesday\", \"Thursday\",\n  #    \"Friday\", \"Saturday\", \"Sunday\"] \n\nn = arr.index('Monday')\n  #=&gt; 3\n\na = ord.rotate(-3)\n  #=&gt; [\"Friday\", \"Saturday\", \"Sunday\", \"Monday\",\n  #    \"Tuesday\", \"Wednesday\", \"Thursday\"] \n\na == arr\n  #=&gt; false\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2578, "user_id": 1478058, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7fdc2fbe6012548e09c652be112f9a1b?s=128&d=identicon&r=PG", "display_name": "trushkevich", "link": "https://stackoverflow.com/users/1478058/trushkevich"}, "is_accepted": false, "score": 0, "last_activity_date": 1423127009, "last_edit_date": 1423127009, "creation_date": 1423125622, "answer_id": 28339508, "question_id": 28327062, "link": "https://stackoverflow.com/questions/28327062/test-if-array-of-week-day-names-is-sorted-correctly/28339508#28339508", "title": "Test if array of week day names is sorted correctly?", "body": "<p>Here is another solution just to have more algorithms collected together. In short - you find a position of monday and move it and all consecutive elements to the beginning of an array (in fact it's something like using <code>rotate</code>, but without <code>rotate</code>) and then compare with the correctly ordered list. </p>\n\n<pre><code>days = %w(monday tuesday wednesday thursday friday saturday sunday)\n\ncase1 = %w(monday tuesday wednesday thursday friday saturday sunday)\ncase2 = %w(thursday friday saturday sunday monday tuesday wednesday)\ncase3 = %w(monday thursday tuesday wednesday sunday friday saturday)\ncase4 = %w(wednesday thursday friday saturday sunday monday tuesday)\n\ndef days_in_order?(days)\n  monday_index = days.index('monday')\n  search_list = %w(monday tuesday wednesday thursday friday saturday sunday)\n  search_list == days.slice(monday_index, days.size) | days[0...monday_index]\nend\n\ndays_in_order?(case1) # true\ndays_in_order?(case2) # true\ndays_in_order?(case3) # false\ndays_in_order?(case4) # true\n</code></pre>\n\n<p>FYI, this algorithm is faster (~4s vs ~6s on my machine on 1000000 iterations for case3) than the one of @meagar, however his solution is easier to read and I think performance is not the goal in this case :-)</p>\n\n<p>ps. I wrote <code>days.size</code> in <code>days.slice(monday_index, days.size)</code> instead of <code>days.size - monday_index</code> because it's not needed in fact as the goal is just to reach or exceed an array's size.</p>\n"}], "owner": {"reputation": 1477, "user_id": 394811, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/b99d0af556b3596f2a257c310c164fe5?s=128&d=identicon&r=PG", "display_name": "Kylee", "link": "https://stackoverflow.com/users/394811/kylee"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 890, "favorite_count": 0, "accepted_answer_id": 28327888, "answer_count": 6, "score": 2, "last_activity_date": 1423127009, "creation_date": 1423069054, "last_edit_date": 1423071227, "question_id": 28327062, "link": "https://stackoverflow.com/questions/28327062/test-if-array-of-week-day-names-is-sorted-correctly", "title": "Test if array of week day names is sorted correctly?", "body": "<p>So I'm trying to test if an array of week day names is sorted correctly regardless of where it starts so</p>\n\n<pre><code>[Monday, Tuesday, Wednesday, Thursday, Friday, Saturday, Sunday] =&gt; true\n[Thursday, Friday, Saturday, Sunday, Monday, Tuesday, Wednesday] =&gt; true\n[Monday, Thursday, Tuesday, Wednesday, Sunday, Friday, Saturday] =&gt; false\n</code></pre>\n\n<p>Here is what I have so far:</p>\n\n<pre><code>module Enumerable\n  def sorted_by?\n    each_cons(2).all? { |a, b| ((yield a) &lt;=&gt; (yield b)) &lt;= 0 }\n  end\nend\n</code></pre>\n\n<p>and</p>\n\n<pre><code>correct_week_days = {\n  :monday =&gt; 0,\n  :tuesday =&gt; 1,\n  :wednesday =&gt; 2,\n  :thursday =&gt; 3,\n  :friday =&gt; 4,\n  :saturday =&gt; 5,\n  :sunday =&gt; 6\n}\n\ntest_week_days_array.sorted_by? { |k, v| correct_week_days[k.to_sym] }\n</code></pre>\n\n<p>This returns true on an array of unsorted weekday strings. I know this approach is flawed as it won't account for looping back around.</p>\n\n<ol>\n<li>Is there a way to do this?</li>\n<li>Why does it return true?</li>\n</ol>\n\n<p><strong>Edit</strong></p>\n\n<p>I should have provided an actual example for the data I'm testing</p>\n\n<pre><code>['monday', 'thursday', 'tuesday', 'wednesday', 'sunday', 'friday', 'saturday']\n</code></pre>\n\n<p>This would be an example that should fail.</p>\n\n<pre><code>['wednesday', 'thursday', 'friday', 'saturday', 'sunday', 'monday', 'tuesday']\n</code></pre>\n\n<p>This would pass.</p>\n"}, {"tags": ["mysql", "ruby", "ruby-on-rails-4", "acts-as-taggable-on"], "answers": [{"tags": [], "owner": {"reputation": 4416, "user_id": 2552259, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e6d74162f339b5acd772d3f5dadaa8ea?s=128&d=identicon&r=PG", "display_name": "Jorge de los Santos", "link": "https://stackoverflow.com/users/2552259/jorge-de-los-santos"}, "is_accepted": true, "score": 0, "last_activity_date": 1423074059, "creation_date": 1423074059, "answer_id": 28328567, "question_id": 28326284, "link": "https://stackoverflow.com/questions/28326284/acts-as-taggable-on-taggable-id-incrementing-so-fast/28328567#28328567", "title": "Acts As Taggable On taggable_id incrementing so fast", "body": "<p>The issue was related to the <code>taggable_id</code> being an hexadecimal string instead of an integer. When the rails parsed the number to integer it becomes a <code>bigint</code>.</p>\n\n<p><code>ActsAsTaggableOn</code> is not accepting (at this moment) strings as a foreign taggable_ids.</p>\n"}], "owner": {"reputation": 4416, "user_id": 2552259, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e6d74162f339b5acd772d3f5dadaa8ea?s=128&d=identicon&r=PG", "display_name": "Jorge de los Santos", "link": "https://stackoverflow.com/users/2552259/jorge-de-los-santos"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 90, "favorite_count": 0, "accepted_answer_id": 28328567, "answer_count": 1, "score": 0, "last_activity_date": 1423074059, "creation_date": 1423066903, "question_id": 28326284, "link": "https://stackoverflow.com/questions/28326284/acts-as-taggable-on-taggable-id-incrementing-so-fast", "title": "Acts As Taggable On taggable_id incrementing so fast", "body": "<p>I retrieved 54 items from my database:</p>\n\n<pre><code>items = Item.where(condition)\nitems.count == 54\nand then:\nitems.each {|i| i.tag_list.add(\"tag\")}\n</code></pre>\n\n<p>But:</p>\n\n<pre><code>ActsAsTaggableOn::Tagging.pluck(:taggable_id)\n</code></pre>\n\n<p>Returns this array of <code>taggable_id</code>:</p>\n\n<pre><code>[0, 0, 1, 1, 2, 2, 4, 4, 5, 5, 6, 6, 7, 7, 9, 9, 15, 15, 18, 18, 24, 25, 25, 32, 32, 38, 38, 49, 49, 74, 74, 93, 93, 96, 96, 99, 99, 363, 363, 583, 583, 854, 926, 926, 939, 939, 5276, 5276, 22118, 22118, 48474, 48474, 80172, 624486, 624486, 28184633, 28184633]\n</code></pre>\n\n<p>When te item count is > 100 the taggable_id goes out of range and raises an exception. As it's trying to insert a 12 digits integer.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "sitemap-generator-gem"], "answers": [{"tags": [], "owner": {"reputation": 617, "user_id": 1296037, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/84586c65d07972921a61492c5e0803ca?s=128&d=identicon&r=PG", "display_name": "MikeV", "link": "https://stackoverflow.com/users/1296037/mikev"}, "is_accepted": true, "score": 1, "last_activity_date": 1426771241, "creation_date": 1426771241, "answer_id": 29145720, "question_id": 28326200, "link": "https://stackoverflow.com/questions/28326200/how-to-speed-up-sitemap-generator-with-parallel-gem/29145720#29145720", "title": "How to speed up sitemap_generator with parallel gem", "body": "<p>I got this working and posted the solution on github <a href=\"https://github.com/kjvarga/sitemap_generator/issues/191\" rel=\"nofollow\">here</a></p>\n\n<p>Here is the code incase the url gets broken.</p>\n\n<pre><code>SitemapGenerator::Sitemap.create(:compress =&gt; false, :create_index =&gt; false) do\n  group1 = lambda {\n    group = sitemap.group(:filename =&gt; :group1, :sitemaps_path =&gt; 'sitemaps/group1') do\n      Record.find_each do |record|\n        add '/record/path'\n      end\n    end\n    group.sitemap.write unless group.sitemap.written?  #write if not full\n  }\n\n  # group2 like above...\n\n  Parallel.each([group1, group2], :in_processes =&gt; 8) do |group|\n    group.call\n  end\nend\n\n#regenerate the index sitemap xml file because I couldn't figure out how to track it with multiple processes\nSitemapGenerator::Sitemap.create(:compress =&gt; false) do\n  Dir.chdir(sitemap.public_path.to_s)\n  xml_files      = File.join(\"**\", \"sitemaps\", \"**\", \"*.xml\")\n  xml_file_paths = Dir.glob(xml_files)\n\n  xml_file_paths.each do |file|\n    add file\n  end\nend\n</code></pre>\n"}], "owner": {"reputation": 617, "user_id": 1296037, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/84586c65d07972921a61492c5e0803ca?s=128&d=identicon&r=PG", "display_name": "MikeV", "link": "https://stackoverflow.com/users/1296037/mikev"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 296, "favorite_count": 0, "accepted_answer_id": 29145720, "answer_count": 1, "score": 0, "last_activity_date": 1426771241, "creation_date": 1423066682, "question_id": 28326200, "link": "https://stackoverflow.com/questions/28326200/how-to-speed-up-sitemap-generator-with-parallel-gem", "title": "How to speed up sitemap_generator with parallel gem", "body": "<p>I am trying to speed up <a href=\"https://github.com/kjvarga/sitemap_generator\" rel=\"nofollow\">sitemap_generator</a> by adding parallelization via the <a href=\"https://github.com/grosser/parallel\" rel=\"nofollow\">parallel</a> gem.  I have the following code but my groups aren't getting written to the public/sitemaps directory. I am thinking it's due to lambdas getting executed in a different space in parallel.  Any feedback would be helpful. Thanks!</p>\n\n<pre><code>#!/usr/bin/env ruby\n\nrequire 'rubygems'\nrequire 'sitemap_generator'\nrequire 'benchmark'\nrequire 'parallel'\nrequire 'random-word'\n\n\nSitemapGenerator::Sitemap.default_host = \"http://localhost\"\n\na = lambda {\n  SitemapGenerator::Sitemap.group(:filename =&gt; :biz, :sitemaps_path =&gt; 'sitemaps/biz/') do\n    (1..1000).each do |index|\n      url = \"/#{RandomWord.adjs.next}/#{RandomWord.nouns.next}\"\n      add url, :priority =&gt; 0.8 \n    end\n  end\n}\n\nb = lambda {\n  SitemapGenerator::Sitemap.group(:filename =&gt; :wedding_ugc, :sitemaps_path =&gt; 'sitemaps/ugc') do\n    (1..1000).each do |index|\n      url = \"/#{RandomWord.adjs.next}/#{RandomWord.nouns.next}\"\n      add url, :priority =&gt; 0.8 \n    end\n  end\n}\n\n#working example\n# SitemapGenerator::Sitemap.default_host = \"http://localhost\"\n# SitemapGenerator::Sitemap.create(:compress =&gt; false) do\n#   group(:filename =&gt; :biz, :sitemaps_path =&gt; 'sitemaps/biz/') do\n#     (1..1000).each do |index|\n#       url = \"/#{RandomWord.adjs.next}/#{RandomWord.nouns.next}\"\n#       add url, :priority =&gt; 0.8 \n#     end\n#   end\n# end\n\n\nputs Time.now\nParallel.each([a,b]){|job| job.call()}\nputs Time.now\n</code></pre>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 44000, "user_id": 535275, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/Ft2Mw.jpg?s=128&g=1", "display_name": "Scott Hunter", "link": "https://stackoverflow.com/users/535275/scott-hunter"}, "edited": false, "score": 0, "creation_date": 1423066577, "post_id": 28326053, "comment_id": 44999826, "body": "What inputs are you providing, what is it printing, and what did you expect instead?"}, {"owner": {"reputation": 18308, "user_id": 1375209, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/dweAo.png?s=128&g=1", "display_name": "toro2k", "link": "https://stackoverflow.com/users/1375209/toro2k"}, "edited": false, "score": 2, "creation_date": 1423066638, "post_id": 28326053, "comment_id": 44999868, "body": "Just remove the <code>=</code> after the last three <code>puts</code>..."}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1423068548, "post_id": 28326053, "comment_id": 45001296, "body": "BTW, <code>chomp</code> is superfluous when calling <code>to_f</code> or  <code>to_i</code>"}], "answers": [{"tags": [], "owner": {"reputation": 2691, "user_id": 3324630, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/P6gEL.jpg?s=128&g=1", "display_name": "Grych", "link": "https://stackoverflow.com/users/3324630/grych"}, "is_accepted": false, "score": 1, "last_activity_date": 1423066602, "creation_date": 1423066602, "answer_id": 28326170, "question_id": 28326053, "link": "https://stackoverflow.com/questions/28326053/why-isnt-my-slope-calculator-working/28326170#28326170", "title": "Why isn&#39;t my slope calculator working?", "body": "<p><code>puts</code> is a method and with <code>puts = something</code> you create a variable and override the name of the method. Three last lines should look like:</p>\n\n<pre><code>puts \"Comeon that is the easiest slope to find... It is 5!!!!!!!\"\nputs \"JK the slope is #{Slope}\"\nputs \"Have a good day\"\n</code></pre>\n\n<p>Also, you are using constants where you probably want to put variables. Uppercase names, like <code>A, B, Slope</code> are constants in Ruby.</p>\n"}, {"comments": [{"owner": {"reputation": 2789, "user_id": 5350328, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/7d81b878ab7662258906d27f2877327b?s=128&d=identicon&r=PG&f=1", "display_name": "phoenix", "link": "https://stackoverflow.com/users/5350328/phoenix"}, "edited": false, "score": 0, "creation_date": 1450713857, "post_id": 34399546, "comment_id": 56540820, "body": "This is not an answer. If you have a new question, please ask it by clicking the Ask Question button. Include a link to this question if it helps provide context. - From Review"}, {"owner": {"reputation": 43, "user_id": 5704039, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dKd1z.jpg?s=128&g=1", "display_name": "David", "link": "https://stackoverflow.com/users/5704039/david"}, "reply_to_user": {"reputation": 2789, "user_id": 5350328, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/7d81b878ab7662258906d27f2877327b?s=128&d=identicon&r=PG&f=1", "display_name": "phoenix", "link": "https://stackoverflow.com/users/5350328/phoenix"}, "edited": false, "score": 0, "creation_date": 1450713997, "post_id": 34399546, "comment_id": 56540906, "body": "I added my comment because I too was working on coding a slope calculator. My methodology was a little longer, but now that I&#39;ve found a solution for the division by 0 issue I felt that I should share."}, {"owner": {"reputation": 4987, "user_id": 3100515, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/dZSlO.jpg?s=128&g=1", "display_name": "Ajean", "link": "https://stackoverflow.com/users/3100515/ajean"}, "edited": false, "score": 0, "creation_date": 1450714215, "post_id": 34399546, "comment_id": 56541031, "body": "It still doesn&#39;t answer what the OP was asking."}, {"owner": {"reputation": 43, "user_id": 5704039, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dKd1z.jpg?s=128&g=1", "display_name": "David", "link": "https://stackoverflow.com/users/5704039/david"}, "edited": false, "score": 0, "creation_date": 1450730988, "post_id": 34399546, "comment_id": 56549911, "body": "But it is relevant to a functional slope calculator...I was only trying to add to the conversation by shedding light on an issue that the program still has.   The previous answer covered the basics tenants of why the program wasn&#39;t working. This covers the possibility of 0 division, which will result in an error."}], "tags": [], "owner": {"reputation": 43, "user_id": 5704039, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dKd1z.jpg?s=128&g=1", "display_name": "David", "link": "https://stackoverflow.com/users/5704039/david"}, "is_accepted": false, "score": 0, "last_activity_date": 1450713863, "last_edit_date": 1450713863, "creation_date": 1450713150, "answer_id": 34399546, "question_id": 28326053, "link": "https://stackoverflow.com/questions/28326053/why-isnt-my-slope-calculator-working/34399546#34399546", "title": "Why isn&#39;t my slope calculator working?", "body": "<p>Also this code would probably fail if the points A and C are the same. Need to code in some sort of response when attempting to divide by 0.</p>\n\n<p>An easy way to do this is to alter the existing code as shown below.</p>\n\n<p>Slope = ((D - B)/(C - A).to_f) rescue \"Cannot divide by 0\"</p>\n\n<p>What this will do is provide the statement \"Cannot divide by 0\" when the program eventually attempts to divide by 0. Instead of getting an error, there will be a nice print out!</p>\n"}], "owner": {"reputation": 11, "user_id": 4526761, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/52998b1026ad39b84c157cfb773e1dd5?s=128&d=identicon&r=PG&f=1", "display_name": "wickedwes", "link": "https://stackoverflow.com/users/4526761/wickedwes"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 147, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1576161448, "creation_date": 1423066299, "question_id": 28326053, "link": "https://stackoverflow.com/questions/28326053/why-isnt-my-slope-calculator-working", "title": "Why isn&#39;t my slope calculator working?", "body": "<pre><code>puts \"This is the Amazing Slope Calculator!!!!!\"\nputs \"give me Two points (X1,Y1) and (X2,Y2)\"\nputs \"What is X1?????\"\nA = gets.chomp.to_f\nputs \"What is Y1?\"\nB = gets.chomp.to_f\nputs \"What is X2?\"\nC = gets.chomp.to_f\nputs \"What is Y2?\"\nD = gets.chomp.to_f\nSlope = (D - B)/(C - A).to_f\nputs = \"Comeon that is the easiest slope to find... It is 5!!!!!!!\"\nputs = \"JK the slope is #{Slope}\"\nputs = \"Have a good day\"\n</code></pre>\n\n<p>It seems to take the inputs but never actually gives an output. I can't find any problems.</p>\n"}, {"tags": ["ruby", "recursion", "tree", "net-sftp"], "answers": [{"tags": [], "owner": {"reputation": 169, "user_id": 600851, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c804dbb298a4a8dc2921a212b2ee3420?s=128&d=identicon&r=PG", "display_name": "Jamie Little", "link": "https://stackoverflow.com/users/600851/jamie-little"}, "is_accepted": false, "score": 3, "last_activity_date": 1523320008, "last_edit_date": 1523320008, "creation_date": 1472315181, "answer_id": 39183295, "question_id": 28326041, "link": "https://stackoverflow.com/questions/28326041/how-can-i-create-a-file-directory-tree-from-net-sftp-results/39183295#39183295", "title": "How can I create a file/directory tree from Net-SFTP results?", "body": "<p>I was able to generate a tree with the following code:</p>\n\n<pre><code>def self.get_tree(host, username, password, path, name=nil)\n\n  data = {:text =&gt;(name || path)}\n  data[:children] = children = []\n\n  Net::SFTP.start(host, username, :password =&gt; password) do |sftp|\n\n    sftp.dir.foreach(path) do |entry|\n      next if (entry.name == '..' || entry.name == '.')\n\n      if entry.longname.start_with?('d')\n        children &lt;&lt; self.get_tree(host,username,password, path + entry.name + '/')\n      end\n\n      if !entry.longname.start_with?('d')\n        children &lt;&lt; entry.name\n      end\n    end\n  end\nend\n</code></pre>\n\n<p>It's a recursive function that will create a full tree when given a directory path using Net::SFTP.</p>\n"}], "owner": {"reputation": 169, "user_id": 600851, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c804dbb298a4a8dc2921a212b2ee3420?s=128&d=identicon&r=PG", "display_name": "Jamie Little", "link": "https://stackoverflow.com/users/600851/jamie-little"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 623, "favorite_count": 0, "answer_count": 1, "score": 6, "last_activity_date": 1523320008, "creation_date": 1423066240, "question_id": 28326041, "link": "https://stackoverflow.com/questions/28326041/how-can-i-create-a-file-directory-tree-from-net-sftp-results", "title": "How can I create a file/directory tree from Net-SFTP results?", "body": "<p>I'm trying to create a tree of files and directories using the net-sftp library. </p>\n\n<p>I can get a recursive listing of files by using the .glob method and can determine if one of the results is a directory by using the .opendir method. </p>\n\n<p>I've been able to create a hash that has files and another hash that has directories, but I'd like to be able to create a tree. </p>\n\n<pre><code> files = []\n directories = []\n\n sftp.dir.glob(\"/home/**/**\") do |entry|\n      fullpath = \"/home/\" + entry.name\n      file = Hash.new\n      file[:path] = fullpath\n\n        sftp.opendir(fullpath) do |response|\n          unless response.ok?\n            files.push(file)\n          else\n            directories.push(file)         \n          end\n        end\n\n    else\n    end\n\n  end\n</code></pre>\n\n<p>Is creating such a tree possible from the results that net-sftp returns? </p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4", "heroku", "faye"], "comments": [{"owner": {"reputation": 1597, "user_id": 717626, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/303d9f5c2135f14f277775052bcb131b?s=128&d=identicon&r=PG", "display_name": "Aaron Breckenridge", "link": "https://stackoverflow.com/users/717626/aaron-breckenridge"}, "edited": false, "score": 0, "creation_date": 1423071614, "post_id": 28325454, "comment_id": 45003288, "body": "Is <code>messages&#47;create.js</code> the actual filename? Looks like you got some erb there, which i think requires you name it <code>messages&#47;create.js.erb</code>. Also, what&#39;s your Message model look like?"}, {"owner": {"reputation": 954, "user_id": 3170288, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/Qwp3V.jpg?s=128&g=1", "display_name": "Sourabh Upadhyay", "link": "https://stackoverflow.com/users/3170288/sourabh-upadhyay"}, "reply_to_user": {"reputation": 1597, "user_id": 717626, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/303d9f5c2135f14f277775052bcb131b?s=128&d=identicon&r=PG", "display_name": "Aaron Breckenridge", "link": "https://stackoverflow.com/users/717626/aaron-breckenridge"}, "edited": false, "score": 0, "creation_date": 1423074230, "post_id": 28325454, "comment_id": 45004772, "body": "yes, I pasted wrong. Edited."}, {"owner": {"reputation": 954, "user_id": 3170288, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/Qwp3V.jpg?s=128&g=1", "display_name": "Sourabh Upadhyay", "link": "https://stackoverflow.com/users/3170288/sourabh-upadhyay"}, "reply_to_user": {"reputation": 1597, "user_id": 717626, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/303d9f5c2135f14f277775052bcb131b?s=128&d=identicon&r=PG", "display_name": "Aaron Breckenridge", "link": "https://stackoverflow.com/users/717626/aaron-breckenridge"}, "edited": false, "score": 0, "creation_date": 1423130179, "post_id": 28325454, "comment_id": 45026705, "body": "I have also deployed <code>openshift</code>, could anyone have any idea about <code>openshift</code> regarding same?"}], "owner": {"reputation": 954, "user_id": 3170288, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/Qwp3V.jpg?s=128&g=1", "display_name": "Sourabh Upadhyay", "link": "https://stackoverflow.com/users/3170288/sourabh-upadhyay"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 372, "favorite_count": 1, "answer_count": 0, "score": 2, "last_activity_date": 1423074184, "creation_date": 1423064616, "last_edit_date": 1495540304, "question_id": 28325454, "link": "https://stackoverflow.com/questions/28325454/running-faye-on-heroku-using-rails-4-not-working", "title": "Running faye on heroku using Rails 4 not working", "body": "<p>I am trying to implement a chat feature in my rails app deployed on heroku . For this I have created two rails apps one my original app and the other to acts as faye server.\nI have given the faye app url in my original app to create faye server object.</p>\n\n<p>Following is what I have added in my original app:</p>\n\n<p><strong>Ruby version:</strong> 2.0.0</p>\n\n<p><strong>gemfile</strong></p>\n\n<pre><code>gem 'thin'\n\ngem 'faye'\n\ngem 'rails', '4.1.5'\n</code></pre>\n\n<p><strong>Application.rb</strong></p>\n\n<pre><code> &lt;%= javascript_include_tag 'http://xxx.herokuapp.com/faye.js' %&gt;\n</code></pre>\n\n<p><strong>Application.js</strong></p>\n\n<pre><code>$(function(){\n    $(document).foundation();\n  var faye = new Faye.Client('http://xxx.herokuapp.com/faye');\n  faye.subscribe(\"/messages/new\", function(data) {\n    eval(data);\n  });\n});\n</code></pre>\n\n<p><strong>Message Helper</strong></p>\n\n<pre><code>def broadcast(channel, &amp;block)\n   message = {:channel =&gt; channel, :data =&gt; capture(&amp;block)}\n   uri = URI.parse(\"http://xxx.herokuapp.com/faye\")\n   Net::HTTP.post_form(uri, :message =&gt; message.to_json)\nend\n</code></pre>\n\n<p><strong>Message Controller</strong></p>\n\n<pre><code>class MessagesController &lt; ApplicationController\n\n  def index\n    @messages = Message.all\n  end\n\n  def create\n    @message = Message.create!(message_params)\n  end\n\n  private\n    def message_params\n      params.require(:message).permit(:content)\n    end\nend\n</code></pre>\n\n<p><strong>My View:</strong></p>\n\n<p><strong>messages/create.js.erb</strong></p>\n\n<pre><code>&lt;% broadcast \"/messages/new\" do %&gt;\n    $(\"#chat\").append(\"&lt;%= escape_javascript render(@message) %&gt;\");\n&lt;% end %&gt;\n$(\"#new_message\")[0].reset();\n</code></pre>\n\n<p><strong>/messages/index.html.erb</strong></p>\n\n<pre><code>&lt;ul id=\"chat\"&gt;\n   &lt;%= render @messages %&gt;\n&lt;/ul&gt;\n\n&lt;%= form_for Message.new, :remote =&gt; true do |f| %&gt;\n   &lt;%= f.text_field :content %&gt;\n   &lt;%= f.submit \"Send\" %&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>Follwing is what I added in my faye server app:</p>\n\n<p><strong>faye.ru</strong></p>\n\n<pre><code>require 'faye'\n\nFaye::WebSocket.load_adapter('thin')\napp = Faye::RackAdapter.new(:mount =&gt; '/faye', :timeout =&gt; 25)\n\nrun app\n</code></pre>\n\n<p><strong>Procfile</strong></p>\n\n<pre><code>web:  bundle exec thin -p $PORT -e $RACK_ENV -R faye.ru start\n</code></pre>\n\n<p>I am getting a <code>500 internal sever</code> error whenever I try to send a message. The code is working fine on local. Also I am getting <code>Error during WebSocket handshake: Unexpected response code: 404</code> in chrome.   I tried enabling cors but that did not helped either.</p>\n\n<p><strong>Note:</strong> Below are some reference links which are not working for me</p>\n\n<ol>\n<li><p><a href=\"https://stackoverflow.com/questions/26823859/using-rails-sync-gem-with-faye-and-thin-in-production-mode-on-heroku\">Using rails sync gem with Faye and Thin in production mode on Heroku</a></p></li>\n<li><p><a href=\"https://blog.heroku.com/archives/2013/10/8/websockets-public-beta\" rel=\"nofollow noreferrer\">https://blog.heroku.com/archives/2013/10/8/websockets-public-beta</a></p>\n\n<p>This is not working <code>heroku labs:enable websockets</code></p></li>\n</ol>\n\n<p><strong>I am new for <code>heroku</code> and <code>faye</code>.</strong></p>\n"}, {"tags": ["python", "ruby", "sublimetext2", "adobe-brackets"], "answers": [{"comments": [{"owner": {"reputation": 942, "user_id": 530589, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/c3280c834193280631746182821565d9?s=128&d=identicon&r=PG", "display_name": "CEO at Apartico", "link": "https://stackoverflow.com/users/530589/ceo-at-apartico"}, "edited": false, "score": 0, "creation_date": 1543906880, "post_id": 29093716, "comment_id": 94076227, "body": "Bracket Builder didn&#39;t work, little fix to make it working: <a href=\"https://github.com/nuriyevn/brackets-builder\" rel=\"nofollow noreferrer\">github.com/nuriyevn/brackets-builder</a>"}], "tags": [], "owner": {"reputation": 4384, "user_id": 1172352, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/348452b680ac216f453245b276b5ac7a?s=128&d=identicon&r=PG", "display_name": "peterflynn", "link": "https://stackoverflow.com/users/1172352/peterflynn"}, "is_accepted": true, "score": 3, "last_activity_date": 1426578300, "creation_date": 1426578300, "answer_id": 29093716, "question_id": 28325291, "link": "https://stackoverflow.com/questions/28325291/adobe-brackets-and-running-ruby-python-programs/29093716#29093716", "title": "Adobe Brackets and running Ruby/Python programs", "body": "<p>You might want to try a generic extension for running command line tools, such as one of these:</p>\n\n<ul>\n<li><a href=\"https://github.com/antivanov/Brackets-Command-Line-Shortcuts\" rel=\"nofollow\">Command Line Shortcuts</a></li>\n<li><a href=\"https://github.com/aymanizz/Brackets-Build-Systems\" rel=\"nofollow\">Brackets Build System</a></li>\n<li><a href=\"https://github.com/tarcisiojr/brackets-command-runner\" rel=\"nofollow\">Command Runner</a></li>\n<li><a href=\"https://github.com/johnhidey/hdy.brackets-shell/\" rel=\"nofollow\">Brackets Shell access</a></li>\n<li><a href=\"https://github.com/artoale/brackets-terminal\" rel=\"nofollow\">Brackets Terminal</a></li>\n<li>The <a href=\"https://github.com/Vhornets/brackets-builder\" rel=\"nofollow\">Brackets Builder</a> you mentioned above - looks like you choose <em>Edit > Edit Builder</em> to configure the commands you want, and then you can press Ctrl-Alt-B to run them.</li>\n</ul>\n"}, {"tags": [], "owner": {"reputation": 2531, "user_id": 996205, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/9b96fb72e053d2b561e56be76286f549?s=128&d=identicon&r=PG", "display_name": "Thom Ives", "link": "https://stackoverflow.com/users/996205/thom-ives"}, "is_accepted": false, "score": 1, "last_activity_date": 1498070525, "creation_date": 1498070525, "answer_id": 44683866, "question_id": 28325291, "link": "https://stackoverflow.com/questions/28325291/adobe-brackets-and-running-ruby-python-programs/44683866#44683866", "title": "Adobe Brackets and running Ruby/Python programs", "body": "<p><a href=\"https://github.com/Vhornets/brackets-builder\" rel=\"nofollow noreferrer\">Brackets Builder</a> has worked best for me \"<em>right out of the box</em>\". However, I run into the same problem as you (when wanting to perform console inputs) in both Brackets AND Sublime, but NOT in <a href=\"http://www.scintilla.org/SciTEDownload.html\" rel=\"nofollow noreferrer\">SciTE</a>. </p>\n\n<p>A good clean work around inside Brackets, for when you need to test programs with console inputs, is to load the extension \"<a href=\"https://github.com/ranjandatta/brackets-open-in-linux-terminal\" rel=\"nofollow noreferrer\">Open project in terminal</a>\", which will allow you to open a terminal right from your current project folder and run your python script. This allowed me to run your case from Brackets with very little hassle, and of course, it works great in a real terminal. </p>\n\n<p>To make this approach even easier, I've asked the developers on GitHub, thru a raised <a href=\"https://github.com/ranjandatta/brackets-open-in-linux-terminal/issues/4\" rel=\"nofollow noreferrer\"><strong>issue</strong></a>, if they can add support for more terminal programs in Windows, such as ConEmu, and if they could allow intial command line arguments to be loaded, which would make this type of work that you want to do even more seamless and fast. I'll update my post once I see any improvements or alternatives to all the above points. </p>\n"}], "owner": {"reputation": 5422, "user_id": 3123109, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/95c33442a31305c50683b2db05d49106?s=128&d=identicon&r=PG&f=1", "display_name": "cjones", "link": "https://stackoverflow.com/users/3123109/cjones"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 29808, "favorite_count": 2, "accepted_answer_id": 29093716, "answer_count": 2, "score": 3, "last_activity_date": 1498070525, "creation_date": 1423064187, "question_id": 28325291, "link": "https://stackoverflow.com/questions/28325291/adobe-brackets-and-running-ruby-python-programs", "title": "Adobe Brackets and running Ruby/Python programs", "body": "<p>so I have been trying out various text editors and IDE's recently to see what I like. I really like the web developer side of Brackets, which is what I think it was designed for, but was also messing around with some of the extensions for building and running Python/Ruby programs.</p>\n\n<p>I have tried this, which honestly doesn't seem to do anything from what I can tell:\n<a href=\"https://github.com/vhornets/brackets-builder\" rel=\"nofollow\">https://github.com/vhornets/brackets-builder</a></p>\n\n<p>And this, which adds a run button to Brackets for running the program:\n<a href=\"https://github.com/jadbox/brackets-integrated-development\" rel=\"nofollow\">https://github.com/jadbox/brackets-integrated-development</a></p>\n\n<p>The latter seems to work alright... until you make a small program that asks for user input then the program never runs, the program disappears, and then you have to restart Brackets to get it back. The code I have used is the following:</p>\n\n<pre><code>puts\"Please enter your name: \"\nn = gets. chomp\n</code></pre>\n\n<p>Or</p>\n\n<pre><code>n = input(\"Please enter your name: \")\n</code></pre>\n\n<p>Any idea what might be causing this? I asked the developer, but haven't heard back. I'd probably use Brackets exclusively if it wasn't for that issue.</p>\n\n<p>Tried Sublime Text 3 for a little while, but didn't like the lack of a Brackets like live preview plugin. However, it looks like it runs Python/Ruby (in addition to Java and C/C++) code without issue. </p>\n"}, {"tags": ["ruby-on-rails", "ruby", "json", "ruby-on-rails-4"], "answers": [{"comments": [{"owner": {"reputation": 9006, "user_id": 2257664, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/d9f0c8cfc4646b1ad1e7030785967ea7?s=128&d=identicon&r=PG", "display_name": "A.L", "link": "https://stackoverflow.com/users/2257664/a-l"}, "edited": false, "score": 1, "creation_date": 1423073864, "post_id": 28325305, "comment_id": 45004564, "body": "Is this excerpt sufficient to help another user? Can you please post more code in order to provide a context?"}], "tags": [], "owner": {"reputation": 3798, "user_id": 1012952, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/572a69029f51ac0b75b5195c53495fc9?s=128&d=identicon&r=PG", "display_name": "Killerpixler", "link": "https://stackoverflow.com/users/1012952/killerpixler"}, "is_accepted": false, "score": -2, "last_activity_date": 1423064212, "creation_date": 1423064212, "answer_id": 28325305, "question_id": 28325242, "link": "https://stackoverflow.com/questions/28325242/rails-force-format-in-specific-methods/28325305#28325305", "title": "Rails force format in specific methods", "body": "<p>this <code>, :defaults =&gt; {:format =&gt; 'json'}</code> after the <code>get 'xxx'</code> in the <code>collection do</code> block does it</p>\n"}], "owner": {"reputation": 3798, "user_id": 1012952, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/572a69029f51ac0b75b5195c53495fc9?s=128&d=identicon&r=PG", "display_name": "Killerpixler", "link": "https://stackoverflow.com/users/1012952/killerpixler"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 310, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1423064212, "creation_date": 1423064065, "question_id": 28325242, "link": "https://stackoverflow.com/questions/28325242/rails-force-format-in-specific-methods", "title": "Rails force format in specific methods", "body": "<p>I have a jbuilder file to make a special json output for an object. </p>\n\n<p>My routes has the resource added in as a collection block and going to the URL with .json at the end works fine. How do I force the json format in that method only? I know you can set <code>respond_to :json</code> in the controller overall but not for a single method. How do i do that?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "security", "ruby-on-rails-4", "url-for"], "comments": [{"owner": {"reputation": 8871, "user_id": 2295964, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/c00fadf5a477a8f770e91fdd7b356e76?s=128&d=identicon&r=PG", "display_name": "Yan Foto", "link": "https://stackoverflow.com/users/2295964/yan-foto"}, "edited": false, "score": 0, "creation_date": 1423064397, "post_id": 28324563, "comment_id": 44998300, "body": "What do you mean with &quot;sure&quot;?"}, {"owner": {"reputation": 16441, "user_id": 824806, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e2ba601f52c82370f266a1d7f2f0b6ef?s=128&d=identicon&r=PG", "display_name": "Backo", "link": "https://stackoverflow.com/users/824806/backo"}, "reply_to_user": {"reputation": 8871, "user_id": 2295964, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/c00fadf5a477a8f770e91fdd7b356e76?s=128&d=identicon&r=PG", "display_name": "Yan Foto", "link": "https://stackoverflow.com/users/2295964/yan-foto"}, "edited": false, "score": 0, "creation_date": 1423064619, "post_id": 28324563, "comment_id": 44998456, "body": "@Yan Foto - With &quot;sure&quot; I mean that no attacker can break things in the application (phishing, for security reasons, any other unknown to me pitfall)."}, {"owner": {"reputation": 24853, "user_id": 446681, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/cBjgR.jpg?s=128&g=1", "display_name": "Hector Correa", "link": "https://stackoverflow.com/users/446681/hector-correa"}, "edited": false, "score": 0, "creation_date": 1423064672, "post_id": 28324563, "comment_id": 44998500, "body": "I assume you meant to ask if it is &quot;safe to accept URL parameters for...&quot;. It is common to accept the URL to redirect to as a parameter in the URL, but you must validate the parameter on the server side (like you would any other data provided by the user.)"}, {"owner": {"reputation": 8871, "user_id": 2295964, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/c00fadf5a477a8f770e91fdd7b356e76?s=128&d=identicon&r=PG", "display_name": "Yan Foto", "link": "https://stackoverflow.com/users/2295964/yan-foto"}, "edited": false, "score": 0, "creation_date": 1423064740, "post_id": 28324563, "comment_id": 44998539, "body": "I get it! I think secure would be more suitable"}, {"owner": {"reputation": 16441, "user_id": 824806, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e2ba601f52c82370f266a1d7f2f0b6ef?s=128&d=identicon&r=PG", "display_name": "Backo", "link": "https://stackoverflow.com/users/824806/backo"}, "reply_to_user": {"reputation": 24853, "user_id": 446681, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/cBjgR.jpg?s=128&g=1", "display_name": "Hector Correa", "link": "https://stackoverflow.com/users/446681/hector-correa"}, "edited": false, "score": 0, "creation_date": 1423065116, "post_id": 28324563, "comment_id": 44998800, "body": "@Hector Correa - You are right: the word is &quot;safe&quot; not &quot;sure&quot; (I updated the question). Are <code>params</code> internally validated for correctness by the <code>url_for</code> method? What could happen with &quot;malicious&quot; <code>params</code>?"}], "answers": [{"comments": [{"owner": {"reputation": 16441, "user_id": 824806, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e2ba601f52c82370f266a1d7f2f0b6ef?s=128&d=identicon&r=PG", "display_name": "Backo", "link": "https://stackoverflow.com/users/824806/backo"}, "edited": false, "score": 0, "creation_date": 1423065770, "post_id": 28325732, "comment_id": 44999245, "body": "I will use <code>url_for(params[:redirect_to].merge(:only_path =&gt; true))</code> just for GET requests so it should not be a not good idea, as you said. But, other than that, what could be pitfalls with &quot;malicious&quot; <code>params</code>?"}, {"owner": {"reputation": 8871, "user_id": 2295964, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/c00fadf5a477a8f770e91fdd7b356e76?s=128&d=identicon&r=PG", "display_name": "Yan Foto", "link": "https://stackoverflow.com/users/2295964/yan-foto"}, "reply_to_user": {"reputation": 16441, "user_id": 824806, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e2ba601f52c82370f266a1d7f2f0b6ef?s=128&d=identicon&r=PG", "display_name": "Backo", "link": "https://stackoverflow.com/users/824806/backo"}, "edited": false, "score": 0, "creation_date": 1423065847, "post_id": 28325732, "comment_id": 44999300, "body": "The problem is your server side. You pass the variables per <code>GET</code> but you don&#39;t check them on your server side. What if someone decides to give <code>redirect_to[action]=delete</code>?"}, {"owner": {"reputation": 16441, "user_id": 824806, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e2ba601f52c82370f266a1d7f2f0b6ef?s=128&d=identicon&r=PG", "display_name": "Backo", "link": "https://stackoverflow.com/users/824806/backo"}, "edited": false, "score": 0, "creation_date": 1423066085, "post_id": 28325732, "comment_id": 44999477, "body": "The malicious attacker that sends <code>redirect_to[action]=delete</code> should trim a HTTP request with the DELETE verb in order to really delete the record. I just use <code>url_for</code> the above way for GET requests so any problem should not arise."}, {"owner": {"reputation": 8871, "user_id": 2295964, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/c00fadf5a477a8f770e91fdd7b356e76?s=128&d=identicon&r=PG", "display_name": "Yan Foto", "link": "https://stackoverflow.com/users/2295964/yan-foto"}, "reply_to_user": {"reputation": 16441, "user_id": 824806, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e2ba601f52c82370f266a1d7f2f0b6ef?s=128&d=identicon&r=PG", "display_name": "Backo", "link": "https://stackoverflow.com/users/824806/backo"}, "edited": false, "score": 0, "creation_date": 1423067227, "post_id": 28325732, "comment_id": 45000305, "body": "That is true. I just checked it. <code>redirect_to</code> redirects the browser and the browser only uses <code>GET</code>. I will update the answer."}, {"owner": {"reputation": 16441, "user_id": 824806, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e2ba601f52c82370f266a1d7f2f0b6ef?s=128&d=identicon&r=PG", "display_name": "Backo", "link": "https://stackoverflow.com/users/824806/backo"}, "edited": false, "score": 0, "creation_date": 1423067982, "post_id": 28325732, "comment_id": 45000882, "body": "Thanks for your answer. Can you confirm that <i>The only problem would be if someone gains access to methods such as <code>create</code> and <code>destroy</code></i>, so that no problems arises for any input parameter? I am interested more on the security of <code>params</code> to be passed to the <code>url_for</code> method."}, {"owner": {"reputation": 8871, "user_id": 2295964, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/c00fadf5a477a8f770e91fdd7b356e76?s=128&d=identicon&r=PG", "display_name": "Yan Foto", "link": "https://stackoverflow.com/users/2295964/yan-foto"}, "reply_to_user": {"reputation": 16441, "user_id": 824806, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e2ba601f52c82370f266a1d7f2f0b6ef?s=128&d=identicon&r=PG", "display_name": "Backo", "link": "https://stackoverflow.com/users/824806/backo"}, "edited": false, "score": 0, "creation_date": 1423068018, "post_id": 28325732, "comment_id": 45000912, "body": "I will rephrase I think I have too much nested sentences."}, {"owner": {"reputation": 8871, "user_id": 2295964, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/c00fadf5a477a8f770e91fdd7b356e76?s=128&d=identicon&r=PG", "display_name": "Yan Foto", "link": "https://stackoverflow.com/users/2295964/yan-foto"}, "reply_to_user": {"reputation": 16441, "user_id": 824806, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e2ba601f52c82370f266a1d7f2f0b6ef?s=128&d=identicon&r=PG", "display_name": "Backo", "link": "https://stackoverflow.com/users/824806/backo"}, "edited": false, "score": 0, "creation_date": 1423068301, "post_id": 28325732, "comment_id": 45001121, "body": "Let us <a href=\"http://chat.stackoverflow.com/rooms/70242/discussion-between-yan-foto-and-backo\">continue this discussion in chat</a>."}, {"owner": {"reputation": 16441, "user_id": 824806, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e2ba601f52c82370f266a1d7f2f0b6ef?s=128&d=identicon&r=PG", "display_name": "Backo", "link": "https://stackoverflow.com/users/824806/backo"}, "edited": false, "score": 0, "creation_date": 1423099041, "post_id": 28325732, "comment_id": 45015745, "body": "... you mentioned <i>Another danger</i> in your answer... what is the first danger?"}, {"owner": {"reputation": 8871, "user_id": 2295964, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/c00fadf5a477a8f770e91fdd7b356e76?s=128&d=identicon&r=PG", "display_name": "Yan Foto", "link": "https://stackoverflow.com/users/2295964/yan-foto"}, "reply_to_user": {"reputation": 16441, "user_id": 824806, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e2ba601f52c82370f266a1d7f2f0b6ef?s=128&d=identicon&r=PG", "display_name": "Backo", "link": "https://stackoverflow.com/users/824806/backo"}, "edited": false, "score": 0, "creation_date": 1423122490, "post_id": 28325732, "comment_id": 45022680, "body": "The paragraph before. But that really shouldnt happen"}], "tags": [], "owner": {"reputation": 8871, "user_id": 2295964, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/c00fadf5a477a8f770e91fdd7b356e76?s=128&d=identicon&r=PG", "display_name": "Yan Foto", "link": "https://stackoverflow.com/users/2295964/yan-foto"}, "is_accepted": false, "score": 0, "last_activity_date": 1423068292, "last_edit_date": 1423068292, "creation_date": 1423065350, "answer_id": 28325732, "question_id": 28324563, "link": "https://stackoverflow.com/questions/28324563/is-it-safe-to-accept-url-parameters-for-populating-the-url-for-method/28325732#28325732", "title": "Is it safe to accept URL parameters for populating the `url_for` method?", "body": "<p>Rails <a href=\"http://api.rubyonrails.org/classes/ActionController/Redirecting.html#method-i-redirect_to\" rel=\"nofollow\"><code>redirect_to</code></a> sets the HTTP status code to <a href=\"https://en.wikipedia.org/wiki/HTTP_302\" rel=\"nofollow\"><code>302 Found</code></a> which tells the browser to <a href=\"https://en.wikipedia.org/wiki/Hypertext_Transfer_Protocol#Request_methods\" rel=\"nofollow\"><code>GET</code></a> the new path as you defined it by <code>url_for</code>. <code>GET</code> is a considered a <a href=\"https://en.wikipedia.org/wiki/Hypertext_Transfer_Protocol#Safe_methods\" rel=\"nofollow\">safe method</a> in contrast to</p>\n\n<blockquote>\n  <p>... methods such as POST, PUT, DELETE and PATCH [which] are intended for\n  actions that may cause side effects either on the server, or external\n  side effects ...</p>\n</blockquote>\n\n<p>The only problem <em>would have been</em> if someone could gain access to methods such as <code>create</code> and <code>destroy</code>. Since these methods use HTTP methods other than <code>GET</code> (respectively <code>POST</code> and <code>DELETE</code>) it should be no problem.</p>\n\n<p>Another danger here is if you go beyond CRUD methods of REST and have a custom method which responses to <code>GET</code> <em>and</em> changes the database state:</p>\n\n<p><strong>routes.rb</strong></p>\n\n<pre><code>resources something do\n  member do\n    get :my_action\n  end\nend\n</code></pre>\n\n<p><strong>SomethingController</strong></p>\n\n<pre><code>def my_action\n  # delte some records\nend\n</code></pre>\n\n<p><strong>For future ref:</strong></p>\n\n<p>Rails has a number of <a href=\"http://guides.rubyonrails.org/security.html\" rel=\"nofollow\">security measurements</a> which may also interest you.</p>\n"}, {"comments": [{"owner": {"reputation": 16441, "user_id": 824806, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e2ba601f52c82370f266a1d7f2f0b6ef?s=128&d=identicon&r=PG", "display_name": "Backo", "link": "https://stackoverflow.com/users/824806/backo"}, "edited": false, "score": 0, "creation_date": 1423155443, "post_id": 28341332, "comment_id": 45043153, "body": "Thanks for your answer. However I have a concerning doubt: is it good to give users control of controllers, actions and parameters?"}, {"owner": {"reputation": 28574, "user_id": 413180, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/0cdd5f87ab5befb4da47ebf6d77854e0?s=128&d=identicon&r=PG", "display_name": "SilverlightFox", "link": "https://stackoverflow.com/users/413180/silverlightfox"}, "reply_to_user": {"reputation": 16441, "user_id": 824806, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e2ba601f52c82370f266a1d7f2f0b6ef?s=128&d=identicon&r=PG", "display_name": "Backo", "link": "https://stackoverflow.com/users/824806/backo"}, "edited": false, "score": 0, "creation_date": 1423155587, "post_id": 28341332, "comment_id": 45043279, "body": "@Backo: They already have &quot;control&quot; with their browser. They can type <i>anything they want</i> after <code>https:&#47;&#47;www.example.com</code>."}], "tags": [], "owner": {"reputation": 28574, "user_id": 413180, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/0cdd5f87ab5befb4da47ebf6d77854e0?s=128&d=identicon&r=PG", "display_name": "SilverlightFox", "link": "https://stackoverflow.com/users/413180/silverlightfox"}, "is_accepted": true, "score": 2, "last_activity_date": 1463735395, "last_edit_date": 1463735395, "creation_date": 1423131417, "answer_id": 28341332, "question_id": 28324563, "link": "https://stackoverflow.com/questions/28324563/is-it-safe-to-accept-url-parameters-for-populating-the-url-for-method/28341332#28341332", "title": "Is it safe to accept URL parameters for populating the `url_for` method?", "body": "<p>This it is safe internally as Ruby On Rails will only be issuing a <a href=\"http://en.wikipedia.org/wiki/URL_redirection#HTTP_status_codes_3xx\" rel=\"nofollow\">HTTP redirect response</a>.</p>\n\n<p>As you are using <code>only_path</code> this will protect you from an <a href=\"https://www.owasp.org/index.php/Open_redirect\" rel=\"nofollow\">Open redirect</a> vulnerability. This is where an email is sent by an attacker containing a link in the following format (say your site is <code>example.com</code>).</p>\n\n<pre><code>https://example.com?foo=bar&amp;bar=foo&amp;redirect=http://evil.com\n</code></pre>\n\n<p>As the user checks the URL and sees it is on the <code>example.com</code> domain they beleive it is safe so click the link. However, if there's an open redirect then the user ends up on <code>evil.com</code> which could ask for their <code>example.com</code> password without the user noticing.</p>\n\n<p>Redirecting to a relative path only on your site fixes any vulnerability.</p>\n\n<p>In your case you are giving users control of your controller, action and parameters. As long as your GET methods are <a href=\"https://tools.ietf.org/html/rfc7231#page-22\" rel=\"nofollow\">safe</a> (i.e. no side-effects), an attacker could not use this by creating a crafted link that the user opens.</p>\n\n<p>In summary, from the information provided I don't see any risk from phishing URLs to your application.</p>\n"}, {"comments": [{"owner": {"reputation": 6588, "user_id": 381285, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/ad093366b20e7b11217b02fc268be786?s=128&d=identicon&r=PG", "display_name": "maletor", "link": "https://stackoverflow.com/users/381285/maletor"}, "edited": false, "score": 1, "creation_date": 1484333332, "post_id": 30138052, "comment_id": 70482806, "body": "Yes, it threatens things. Don&#39;t do this without a whitelist or <code>only_path: true</code>."}], "tags": [], "owner": {"reputation": 13563, "user_id": 2790174, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/78ecc89e845b86c885f53f24981fea44?s=128&d=identicon&r=PG&f=1", "display_name": "NoDisplayName", "link": "https://stackoverflow.com/users/2790174/nodisplayname"}, "is_accepted": false, "score": 0, "last_activity_date": 1431162129, "creation_date": 1431162129, "answer_id": 30138052, "question_id": 28324563, "link": "https://stackoverflow.com/questions/28324563/is-it-safe-to-accept-url-parameters-for-populating-the-url-for-method/30138052#30138052", "title": "Is it safe to accept URL parameters for populating the `url_for` method?", "body": "<p>It's not exactly an answer, just wanted to point out that you shouldn't use something like</p>\n\n<pre><code>url_for(params)\n</code></pre>\n\n<p>because one could pass <code>host</code> and <code>port</code> as params and thus the url could lead to another site and it can get worse if it gets cached or something.</p>\n\n<p>Don't know if it threatens anything, but hey, it's worth pointing out</p>\n"}], "owner": {"reputation": 16441, "user_id": 824806, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e2ba601f52c82370f266a1d7f2f0b6ef?s=128&d=identicon&r=PG", "display_name": "Backo", "link": "https://stackoverflow.com/users/824806/backo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1002, "favorite_count": 0, "accepted_answer_id": 28341332, "answer_count": 3, "score": 4, "last_activity_date": 1463735395, "creation_date": 1423062271, "last_edit_date": 1423064944, "question_id": 28324563, "link": "https://stackoverflow.com/questions/28324563/is-it-safe-to-accept-url-parameters-for-populating-the-url-for-method", "title": "Is it safe to accept URL parameters for populating the `url_for` method?", "body": "<p>I am using Ruby on Rails 4.1.1 and I am thinking to accept parameters (through URL query strings) that are passed directly to the <code>url_for</code> method, this way:</p>\n\n<pre><code># URL in the browser\nhttp://www.myapp.com?redirect_to[controller]=users&amp;redirect_to[action]=show&amp;redirect_to[id]=1\n\n# Controller\n...\nredirect_to url_for(params[:redirect_to].merge(:only_path =&gt; true))\n</code></pre>\n\n<p>Adopting the above approach users can be redirected after performing an action. However, I think people can enter arbitrary<code>params</code> that can lead to security issues...</p>\n\n<p>Is it safe to accept URL parameters for populating the <code>url_for</code> method? What are pitfalls? What can happen in the worst case?</p>\n\n<hr>\n\n<p>By logging <code>params</code> during requests to my application I noted Rails adds <em>always</em> <code>:controller</code> and <code>action</code> parameters. Maybe that confirms <code>url_for</code> can be used the above way since it is protected internally and works as-like Rails is intended to.</p>\n"}, {"tags": ["ruby"], "answers": [{"tags": [], "owner": {"reputation": 2691, "user_id": 3324630, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/P6gEL.jpg?s=128&g=1", "display_name": "Grych", "link": "https://stackoverflow.com/users/3324630/grych"}, "is_accepted": false, "score": 3, "last_activity_date": 1423062815, "creation_date": 1423062815, "answer_id": 28324777, "question_id": 28324375, "link": "https://stackoverflow.com/questions/28324375/open3-and-stopped-process/28324777#28324777", "title": "Open3 and stopped process", "body": "<p><code>popen3</code> returns an array, which fourth element is a thread object:</p>\n\n<pre><code>prc = Open3.popen3('sleep 10')\n=&gt; [#&lt;IO:fd 10&gt;, #&lt;IO:fd 12&gt;, #&lt;IO:fd 14&gt;, #&lt;Thread:0x007f84b49c8480 sleep&gt;]\n</code></pre>\n\n<p>As you can see the Thread itself shows the status, after 10 seconds it will be:</p>\n\n<pre><code>=&gt; [#&lt;IO:fd 16&gt;, #&lt;IO:fd 18&gt;, #&lt;IO:fd 20&gt;, #&lt;Thread:0x007f84b437d120 dead&gt;]\n</code></pre>\n\n<p>So to check the process status, you need to investigate <code>thread.status</code>, which is <code>run</code> or <code>sleep</code> if the process is running, and <code>false</code> or <code>nil</code> if the process finished (false) or died (nil):</p>\n\n<pre><code>prc = Open3.popen3('sleep 10')\n=&gt; [#&lt;IO:fd 10&gt;, #&lt;IO:fd 12&gt;, #&lt;IO:fd 14&gt;, #&lt;Thread:0x007f84b49c8480 sleep&gt;]\nprc[3].status\n=&gt; \"sleep\"\n</code></pre>\n\n<p>after few seconds:</p>\n\n<pre><code>prc[3].status\n=&gt; false\n</code></pre>\n"}], "owner": {"reputation": 5123, "user_id": 483876, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/88d57f046c89c6aa6be483a768f4c3a1?s=128&d=identicon&r=PG", "display_name": "synapse", "link": "https://stackoverflow.com/users/483876/synapse"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 88, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1423091521, "creation_date": 1423061743, "last_edit_date": 1423091521, "question_id": 28324375, "link": "https://stackoverflow.com/questions/28324375/open3-and-stopped-process", "title": "Open3 and stopped process", "body": "<p>What's the proper way to check if the process opened with <code>Open3::popen3</code> has stopped? I'm piping a huge file that has an error to a process and need to stop as soon as possible preferably with minimal consumption of resources per loop iteration. The programs are essentially something like this</p>\n\n<pre><code># launcher.rb\nrequire 'open3'\n\nOpen3.popen3('ruby', 'consumer.rb') do |i, o, e, w|\n  5.times do |n|\n    i.puts(n)\n    puts \"line #{n}\"\n  end\n  puts \"Errors: #{e.read}\"\nend \n\n# consumer.rb\ni = 0\nARGF.each_line do |line|\n  if i == 2\n    $stderr.write('error')\n    exit(1)\n  end\n  i+=1\nend\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4"], "answers": [{"tags": [], "owner": {"reputation": 8871, "user_id": 2295964, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/c00fadf5a477a8f770e91fdd7b356e76?s=128&d=identicon&r=PG", "display_name": "Yan Foto", "link": "https://stackoverflow.com/users/2295964/yan-foto"}, "is_accepted": false, "score": 1, "last_activity_date": 1423064595, "creation_date": 1423064595, "answer_id": 28325444, "question_id": 28324046, "link": "https://stackoverflow.com/questions/28324046/rails-how-to-pass-data-from-class-variables-to-instance-variable/28325444#28325444", "title": "rails: how to pass data from class variables to instance variable", "body": "<p>If you want to use class attributes <em>with</em> instance accessors you can just use Active Support's <a href=\"http://guides.rubyonrails.org/active_support_core_extensions.html#class-attributes\" rel=\"nofollow\"><code>class_attribute</code></a>.</p>\n\n<p>An example from the Rails guide:</p>\n\n<pre><code>class A\n  class_attribute :x\nend\n\nclass B &lt; A; end\n\nclass C &lt; B; end\n\nA.x = :a\nB.x # =&gt; :a\nC.x # =&gt; :a\n\nB.x = :b\nA.x # =&gt; :a\nC.x # =&gt; :b\n\nC.x = :c\nA.x # =&gt; :a\nB.x # =&gt; :b\n\nA.x = 1\n\na1 = A.new\na2 = A.new\na2.x = 2\n\na1.x # =&gt; 1, comes from A\na2.x # =&gt; 2, overridden in a2\n</code></pre>\n"}], "owner": {"reputation": 1223, "user_id": 1544396, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/29aba683fba748d515a3e1d4b02082e2?s=128&d=identicon&r=PG&f=1", "display_name": "bymannan", "link": "https://stackoverflow.com/users/1544396/bymannan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 260, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1423064595, "creation_date": 1423060756, "question_id": 28324046, "link": "https://stackoverflow.com/questions/28324046/rails-how-to-pass-data-from-class-variables-to-instance-variable", "title": "rails: how to pass data from class variables to instance variable", "body": "<p>Let's say I have this concern.</p>\n\n<pre><code>module Fields\n  extend ActiveSupport::Concern\n\n  module ClassMethods\n    def add_field(name)\n       define_method(name) do\n          self.data[name]\n        end      \n    end\n  end\nend\n</code></pre>\n\n<p>And to use it I will do this:</p>\n\n<pre><code>class Content &lt; ActiveRecord::Base\n   include Fields\n   add_field :title\n   add_field :body\nend\n</code></pre>\n\n<p>So far so good. Now I want to populate a default data to the new created field. I would need to do this:</p>\n\n<pre><code>module Fields\n  extend ActiveSupport::Concern\n\n  included do\n    after_initialize :default_data \n    class_attribute :fields\n  end\n\n  def default_data\n    self.fields.each do |field|\n       self.data[field.to_sym] = \"hello\"\n    end\n  end\n\n  module ClassMethods\n    def add_field(name)\n       define_method(name) do\n          self.data[name]\n        end\n       fields ||= [] \n       fields &lt;&lt; name     \n    end\n  end\nend\n</code></pre>\n\n<p>However, this does not work. self.fields is nil. It seems that I can not pass data from class methods attributes to the instance method. </p>\n\n<p>What I would like to do it define a constant variable or data during the definition of add_field and use that data on the instance.</p>\n\n<p>Any ideas?</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 48413, "user_id": 1279683, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1veuT.jpg?s=128&g=1", "display_name": "Marek Lipka", "link": "https://stackoverflow.com/users/1279683/marek-lipka"}, "edited": false, "score": 4, "creation_date": 1423060439, "post_id": 28323806, "comment_id": 44995622, "body": "I posted an answer before reading through your question carefully (I didn&#39;t notice that you want to compare <code>object.attribute</code> at first). The answer is: No, there&#39;s not similar syntax in your case."}, {"owner": {"reputation": 9993, "user_id": 2128691, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/YV6xv.jpg?s=128&g=1", "display_name": "dax", "link": "https://stackoverflow.com/users/2128691/dax"}, "reply_to_user": {"reputation": 48413, "user_id": 1279683, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1veuT.jpg?s=128&g=1", "display_name": "Marek Lipka", "link": "https://stackoverflow.com/users/1279683/marek-lipka"}, "edited": false, "score": 0, "creation_date": 1423061092, "post_id": 28323806, "comment_id": 44996080, "body": "well...it&#39;s a shame, but what can be done. thanks for your input!"}, {"owner": {"reputation": 7544, "user_id": 1085998, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/459252fca62e56c1131babdba2b1babe?s=128&d=identicon&r=PG", "display_name": "daremkd", "link": "https://stackoverflow.com/users/1085998/daremkd"}, "edited": false, "score": 0, "creation_date": 1423061654, "post_id": 28323806, "comment_id": 44996464, "body": "Is it a specific attribute you have in mind or you&#39;ll set the attribute you want to match against as an argument?"}], "answers": [{"comments": [{"owner": {"reputation": 9993, "user_id": 2128691, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/YV6xv.jpg?s=128&g=1", "display_name": "dax", "link": "https://stackoverflow.com/users/2128691/dax"}, "edited": false, "score": 0, "creation_date": 1423061034, "post_id": 28324073, "comment_id": 44996032, "body": "I think maybe you misunderstood what I was asking - although it seems like there is no shortcut according to Marek Lipka"}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1423061093, "post_id": 28324073, "comment_id": 44996083, "body": "I think the OP is looking for an attribute (or method) with a specific value, e.g. find the first object in <code>[&#39;a&#39;, &#39;bb&#39;, &#39;ccc&#39;]</code> with <code>object.length == 2</code>"}], "tags": [], "owner": {"reputation": 7544, "user_id": 1085998, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/459252fca62e56c1131babdba2b1babe?s=128&d=identicon&r=PG", "display_name": "daremkd", "link": "https://stackoverflow.com/users/1085998/daremkd"}, "is_accepted": false, "score": 2, "last_activity_date": 1423065556, "last_edit_date": 1423065556, "creation_date": 1423060825, "answer_id": 28324073, "question_id": 28323806, "link": "https://stackoverflow.com/questions/28323806/shortcut-for-object-attr-x-in-ruby/28324073#28324073", "title": "Shortcut for object.attr == x in ruby?", "body": "<p>Actually there is a way by defining to_proc in Array, check this out:</p>\n\n<pre><code>a = ['a', 'b', 'c']\n\nclass Array\n  def to_proc\n    proc { |receiver| receiver.send(self[0]) == self[1] }\n  end\nend\n\np a.detect(&amp;[:capitalize, 'B']) #=&gt; 'b'\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 18079, "user_id": 503402, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/873ad707fb34aac8fbdfbfec676e02e9?s=128&d=identicon&r=PG", "display_name": "Max", "link": "https://stackoverflow.com/users/503402/max"}, "is_accepted": true, "score": 1, "last_activity_date": 1423080018, "creation_date": 1423080018, "answer_id": 28330343, "question_id": 28323806, "link": "https://stackoverflow.com/questions/28323806/shortcut-for-object-attr-x-in-ruby/28330343#28330343", "title": "Shortcut for object.attr == x in ruby?", "body": "<p>This shortcut</p>\n\n<pre><code>objects.map(&amp;:attribute)\n</code></pre>\n\n<p>works because <code>&amp;</code> calls <code>to_proc</code> on its argument and <code>Symbol#to_proc</code> looks something like this:</p>\n\n<pre><code>def to_proc\n  proc { |x| x.send(self) }\nend\n</code></pre>\n\n<p>so it's equivalent to</p>\n\n<pre><code>objects.map(&amp;proc { |x| x.send(:attribute) }) # which is the same as\nobjects.map { |x| x.attribute }\n</code></pre>\n\n<p>So if you want to simplify the following code</p>\n\n<pre><code>objects.detect { |object| object.attribute == x }\n</code></pre>\n\n<p>You need some kind of object where <code>to_proc</code> would give you</p>\n\n<pre><code>proc { |x| x.send(attr) == val }\n</code></pre>\n\n<p>Unfortunately there is no such <code>to_proc</code> method built into Ruby, but you are free to define your own as daremkd points out.</p>\n"}], "owner": {"reputation": 9993, "user_id": 2128691, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/YV6xv.jpg?s=128&g=1", "display_name": "dax", "link": "https://stackoverflow.com/users/2128691/dax"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 75, "favorite_count": 0, "accepted_answer_id": 28330343, "answer_count": 2, "score": 1, "last_activity_date": 1423080018, "creation_date": 1423060003, "question_id": 28323806, "link": "https://stackoverflow.com/questions/28323806/shortcut-for-object-attr-x-in-ruby", "title": "Shortcut for object.attr == x in ruby?", "body": "<p>In ruby I can use the following short cut to map object attributes:  </p>\n\n<pre><code>objects.map(&amp;:attribute)\n</code></pre>\n\n<p>is the same as:</p>\n\n<pre><code>objects.map { |object| object.attribute }\n</code></pre>\n\n<p>is there a similar shortcut for this, where I find the first object where attribute equals <code>x</code>?</p>\n\n<pre><code>def find_first_with_matching_attribute(x)\n  objects.detect { |object| object.attribute == x }\nend\n</code></pre>\n"}, {"tags": ["ruby", "regex"], "comments": [{"owner": {"reputation": 2691, "user_id": 3324630, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/P6gEL.jpg?s=128&g=1", "display_name": "Grych", "link": "https://stackoverflow.com/users/3324630/grych"}, "edited": false, "score": 0, "creation_date": 1423055646, "post_id": 28322306, "comment_id": 44992439, "body": "Why to use regex? Isn&#39;t better (for performance and readability)  to check if <code>string[0] == &#39;@&#39;</code>?"}, {"owner": {"reputation": 5714, "user_id": 2389501, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/23f6a708c04c660111117c4613592689?s=128&d=identicon&r=PG", "display_name": "Mateusz Urba\u0144ski", "link": "https://stackoverflow.com/users/2389501/mateusz-urba%c5%84ski"}, "reply_to_user": {"reputation": 2691, "user_id": 3324630, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/P6gEL.jpg?s=128&g=1", "display_name": "Grych", "link": "https://stackoverflow.com/users/3324630/grych"}, "edited": false, "score": 0, "creation_date": 1423056128, "post_id": 28322306, "comment_id": 44992762, "body": "I must use regex beacause I will it use in my validator in Ruby on Rails application,"}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 1, "creation_date": 1423056994, "post_id": 28322306, "comment_id": 44993370, "body": "@MateuszUrba\u0144ski the Rails Guides contain a <a href=\"http://guides.rubyonrails.org/active_record_validations.html#custom-validators\" rel=\"nofollow noreferrer\">Custom Validators</a> section with a validator that checks if a string starts with <code>&quot;X&quot;</code>."}], "answers": [{"tags": [], "owner": {"reputation": 159902, "user_id": 3297613, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/KHhzd.jpg?s=128&g=1", "display_name": "Avinash Raj", "link": "https://stackoverflow.com/users/3297613/avinash-raj"}, "is_accepted": false, "score": 2, "last_activity_date": 1423055529, "creation_date": 1423055529, "answer_id": 28322324, "question_id": 28322306, "link": "https://stackoverflow.com/questions/28322306/regex-that-check-if-text-has-the-first-character-equal-to/28322324#28322324", "title": "Regex that check if text has the first character equal to @", "body": "<p>You need to use the starting anchor <code>^</code>. This matches the start of  a line.</p>\n\n<pre><code>^@.*\n</code></pre>\n\n<p>OR</p>\n\n<pre><code>^@[\\w-]+\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 3334, "user_id": 4473327, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hP14q.jpg?s=128&g=1", "display_name": "neuhaus", "link": "https://stackoverflow.com/users/4473327/neuhaus"}, "is_accepted": false, "score": 1, "last_activity_date": 1423055575, "creation_date": 1423055575, "answer_id": 28322340, "question_id": 28322306, "link": "https://stackoverflow.com/questions/28322306/regex-that-check-if-text-has-the-first-character-equal-to/28322340#28322340", "title": "Regex that check if text has the first character equal to @", "body": "<p><code>/^@/</code> is the regex that will only match a string that starts with a @</p>\n\n<p>If you want to capture the string (something that wasn't part of your question), you need to add the brackets:</p>\n\n<p><code>/^(^@.*)/</code></p>\n"}, {"tags": [], "owner": {"reputation": 18308, "user_id": 1375209, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/dweAo.png?s=128&g=1", "display_name": "toro2k", "link": "https://stackoverflow.com/users/1375209/toro2k"}, "is_accepted": true, "score": 7, "last_activity_date": 1423056390, "last_edit_date": 1423056390, "creation_date": 1423055673, "answer_id": 28322373, "question_id": 28322306, "link": "https://stackoverflow.com/questions/28322306/regex-that-check-if-text-has-the-first-character-equal-to/28322373#28322373", "title": "Regex that check if text has the first character equal to @", "body": "<p>Better than a regexp, you can use for the purpose the <code>String#start_with?</code> method:</p>\n\n<pre><code>'@test'.start_with?('@') # =&gt; true\n'test@test'.start_with?('@') # =&gt; false\n</code></pre>\n\n<p>But if you really need to use a regexp you have to match the beginning of the string using the the <a href=\"http://ruby-doc.org/core/doc/regexp_rdoc.html#label-Anchors\" rel=\"nofollow\"><code>\\A</code> anchor</a>:</p>\n\n<pre><code>'@test' =~ /\\A@/ # =&gt; 0\n'test@test' =~ /\\A@/ # =&gt; nil\n</code></pre>\n\n<p>Pay attention to the difference between <code>\\A</code> and <code>^</code>, the former matches the beginning of a string, the latter matches the beginning of a line, so:</p>\n\n<pre><code>\"test\\n@test\" =~ /\\A@/ # =&gt; nil\n\"test\\n@test\" =~ /^@/ # =&gt; 5\n</code></pre>\n\n<p>This may be the behaviour you want or not.</p>\n"}, {"comments": [{"owner": {"reputation": 18308, "user_id": 1375209, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/dweAo.png?s=128&g=1", "display_name": "toro2k", "link": "https://stackoverflow.com/users/1375209/toro2k"}, "edited": false, "score": 1, "creation_date": 1423056575, "post_id": 28322380, "comment_id": 44993080, "body": "This regexp matches, for example, the string <code>test  @test</code>, that doesn&#39;t begin with <code>@</code>."}, {"owner": {"reputation": 14469, "user_id": 2191105, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/tPiCW.png?s=128&g=1", "display_name": "David Hoelzer", "link": "https://stackoverflow.com/users/2191105/david-hoelzer"}, "reply_to_user": {"reputation": 18308, "user_id": 1375209, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/dweAo.png?s=128&g=1", "display_name": "toro2k", "link": "https://stackoverflow.com/users/1375209/toro2k"}, "edited": false, "score": 0, "creation_date": 1423058894, "post_id": 28322380, "comment_id": 44994610, "body": "Actually, it matches the substring @test within the string that you described.  If you read it again, I&#39;m pointing out that it is possible to match words that start with an @ rather than just strings that start with an @."}], "tags": [], "owner": {"reputation": 14469, "user_id": 2191105, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/tPiCW.png?s=128&g=1", "display_name": "David Hoelzer", "link": "https://stackoverflow.com/users/2191105/david-hoelzer"}, "is_accepted": false, "score": 0, "last_activity_date": 1423055717, "creation_date": 1423055717, "answer_id": 28322380, "question_id": 28322306, "link": "https://stackoverflow.com/questions/28322306/regex-that-check-if-text-has-the-first-character-equal-to/28322380#28322380", "title": "Regex that check if text has the first character equal to @", "body": "<p>If you'd like to find words starting with an @ rather than lines (as the other answer do) you might want:</p>\n\n<pre><code>/\\s+@\\w+/\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 354, "user_id": 2289501, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/647f15f7859430b4537a3350d074434b?s=128&d=identicon&r=PG&f=1", "display_name": "reguilon", "link": "https://stackoverflow.com/users/2289501/reguilon"}, "is_accepted": false, "score": 1, "last_activity_date": 1423056827, "creation_date": 1423056827, "answer_id": 28322753, "question_id": 28322306, "link": "https://stackoverflow.com/questions/28322306/regex-that-check-if-text-has-the-first-character-equal-to/28322753#28322753", "title": "Regex that check if text has the first character equal to @", "body": "<p>I advice you to use the <code>\\A</code> instead of <code>^</code>. <code>^</code> checks the beginning of each lines in your string. Instead <code>\\A</code> checks the beginning of the whole string.</p>\n\n<p>this REGEX will do the job: <code>/\\A@[\\w]*/</code> </p>\n\n<p>You can use this online tool to construct your future REGEX: <a href=\"http://rubular.com/\" rel=\"nofollow\">http://rubular.com/</a></p>\n"}], "owner": {"reputation": 5714, "user_id": 2389501, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/23f6a708c04c660111117c4613592689?s=128&d=identicon&r=PG", "display_name": "Mateusz Urba\u0144ski", "link": "https://stackoverflow.com/users/2389501/mateusz-urba%c5%84ski"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2511, "favorite_count": 0, "accepted_answer_id": 28322373, "answer_count": 5, "score": 1, "last_activity_date": 1423056827, "creation_date": 1423055487, "last_edit_date": 1592644375, "question_id": 28322306, "link": "https://stackoverflow.com/questions/28322306/regex-that-check-if-text-has-the-first-character-equal-to", "title": "Regex that check if text has the first character equal to @", "body": "<p>I'm trying to write a regular expression that will check if text first character is equal to @. So for example:</p>\n<ul>\n<li><p>@test - this should match</p>\n</li>\n<li><p>test@test - this should not match</p>\n<p>I writed something like this: <code>/(@[\\w-]+)/i</code> but with this regex also second example match but it shouldn't...</p>\n</li>\n</ul>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 53706, "user_id": 3001736, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/j4wN2.jpg?s=128&g=1", "display_name": "Amit Joki", "link": "https://stackoverflow.com/users/3001736/amit-joki"}, "edited": false, "score": 3, "creation_date": 1423055320, "post_id": 28322152, "comment_id": 44992227, "body": "and what&#39;s the question?"}, {"owner": {"reputation": 14469, "user_id": 2191105, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/tPiCW.png?s=128&g=1", "display_name": "David Hoelzer", "link": "https://stackoverflow.com/users/2191105/david-hoelzer"}, "edited": false, "score": 1, "creation_date": 1423055467, "post_id": 28322152, "comment_id": 44992324, "body": "I can&#39;t see how what you appear to be asking relates to the code fragment."}, {"owner": {"reputation": 39050, "user_id": 2336231, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/d7kOQ.jpg?s=128&g=1", "display_name": "BroiSatse", "link": "https://stackoverflow.com/users/2336231/broisatse"}, "reply_to_user": {"reputation": 14469, "user_id": 2191105, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/tPiCW.png?s=128&g=1", "display_name": "David Hoelzer", "link": "https://stackoverflow.com/users/2191105/david-hoelzer"}, "edited": false, "score": 1, "creation_date": 1423055628, "post_id": 28322152, "comment_id": 44992426, "body": "@DavidHoelzer - Most likely it is <code>&lt;div class=&quot;&lt;%= @example.completed? ? &#39; Incomplete&#39; : &#39; Complete&#39; %&gt;&quot;&gt;</code>, Still it is unclear what is the question."}, {"owner": {"reputation": 14469, "user_id": 2191105, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/tPiCW.png?s=128&g=1", "display_name": "David Hoelzer", "link": "https://stackoverflow.com/users/2191105/david-hoelzer"}, "edited": false, "score": 0, "creation_date": 1423055776, "post_id": 28322152, "comment_id": 44992527, "body": "Ah, I see what he might be asking.  Let&#39;s take a stab at an answer. :)"}, {"owner": {"reputation": 48413, "user_id": 1279683, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1veuT.jpg?s=128&g=1", "display_name": "Marek Lipka", "link": "https://stackoverflow.com/users/1279683/marek-lipka"}, "edited": false, "score": 1, "creation_date": 1423055987, "post_id": 28322152, "comment_id": 44992669, "body": "It will be much more readable if you don&#39;t do this in one line."}], "answers": [{"tags": [], "owner": {"reputation": 14469, "user_id": 2191105, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/tPiCW.png?s=128&g=1", "display_name": "David Hoelzer", "link": "https://stackoverflow.com/users/2191105/david-hoelzer"}, "is_accepted": false, "score": 0, "last_activity_date": 1423055842, "creation_date": 1423055842, "answer_id": 28322413, "question_id": 28322152, "link": "https://stackoverflow.com/questions/28322152/add-a-class-or-id-to-a-one-line-ruby-if-else-statement-in-rails/28322413#28322413", "title": "Add a class or id to a one line Ruby &#39;if else&#39; statement in Rails?", "body": "<p>Assuming you're trying to set the CSS class ID with a ternary operator:</p>\n\n<pre><code>&lt;div class='glyphicon&lt;%= @example.ok? \"-ok\" : \"\" %&gt;'&gt;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 163714, "user_id": 123527, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/99e0b39c091e10d9c7d4452a34ca52dc?s=128&d=identicon&r=PG", "display_name": "Simone Carletti", "link": "https://stackoverflow.com/users/123527/simone-carletti"}, "is_accepted": true, "score": 3, "last_activity_date": 1423056275, "creation_date": 1423056275, "answer_id": 28322565, "question_id": 28322152, "link": "https://stackoverflow.com/questions/28322152/add-a-class-or-id-to-a-one-line-ruby-if-else-statement-in-rails/28322565#28322565", "title": "Add a class or id to a one line Ruby &#39;if else&#39; statement in Rails?", "body": "<p>Just inline your example.</p>\n\n<pre><code>&lt;div&gt;\n   &lt;p class=\"blue\"&gt;&lt;%= idea.count == 0 ? 'Hello' : 'Text here' %&gt;&lt;/p&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p>Please note that your code also was setting a different class. That would force you to write</p>\n\n<pre><code>&lt;div&gt;\n   &lt;p class=\"&lt;%= idea.count == 0 ? 'red' : 'blue' %&gt;\"&gt;&lt;%= idea.count == 0 ? 'Hello' : 'Text here' %&gt;&lt;/p&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p>Which is a very convoluted code. In the case of the example, the standard if-condition is the cleanest approach.</p>\n"}, {"tags": [], "owner": {"reputation": 39050, "user_id": 2336231, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/d7kOQ.jpg?s=128&g=1", "display_name": "BroiSatse", "link": "https://stackoverflow.com/users/2336231/broisatse"}, "is_accepted": false, "score": 2, "last_activity_date": 1423056858, "creation_date": 1423056858, "answer_id": 28322762, "question_id": 28322152, "link": "https://stackoverflow.com/questions/28322152/add-a-class-or-id-to-a-one-line-ruby-if-else-statement-in-rails/28322762#28322762", "title": "Add a class or id to a one line Ruby &#39;if else&#39; statement in Rails?", "body": "<p>Probably the cleanest way is not to use pure html in your template:</p>\n\n<pre><code>&lt;%= content_tag :div, class: @example.completed? ? ' Incomplete' : ' Complete' do %&gt;\n  // inner content\n&lt;% end %&gt;\n</code></pre>\n"}], "owner": {"reputation": 1223, "user_id": 3016477, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/zqvoO.png?s=128&g=1", "display_name": "userden", "link": "https://stackoverflow.com/users/3016477/userden"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1345, "favorite_count": 0, "accepted_answer_id": 28322565, "answer_count": 3, "score": 2, "last_activity_date": 1423056858, "creation_date": 1423055103, "last_edit_date": 1423055945, "question_id": 28322152, "link": "https://stackoverflow.com/questions/28322152/add-a-class-or-id-to-a-one-line-ruby-if-else-statement-in-rails", "title": "Add a class or id to a one line Ruby &#39;if else&#39; statement in Rails?", "body": "<p>I was wondering that can I add a class of id to a one line Ruby 'if else' statement? </p>\n\n<p>For example adding class:\"glyphicon glyphicon-ok\" to this:</p>\n\n<pre><code>&lt;%= @example.completed? ? ' Incomplete' : ' Complete' %&gt;\n</code></pre>\n\n<p>EDIT: Sorry for being unclear. </p>\n\n<p>I know how I can add a class to an if statement in Rails, like:</p>\n\n<pre><code>&lt;div&gt;\n  &lt;% if @example.count == 0 %&gt;\n       &lt;p class=\"red\"&gt;Hello&lt;/p&gt;\n  &lt;% else %&gt;\n       &lt;p class=\"blue\"&gt;Text here&lt;/p&gt;\n  &lt;% end %&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p>But if I make it in one line, it's something like the following? But how do I add a class to that line? Just trying to learn.</p>\n\n<pre><code>&lt;%= (idea.count == 0) ? 'Hello' : 'Text here' %&gt;\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "devise"], "answers": [{"tags": [], "owner": {"reputation": 48413, "user_id": 1279683, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1veuT.jpg?s=128&g=1", "display_name": "Marek Lipka", "link": "https://stackoverflow.com/users/1279683/marek-lipka"}, "is_accepted": true, "score": 0, "last_activity_date": 1423053906, "creation_date": 1423053906, "answer_id": 28321771, "question_id": 28321524, "link": "https://stackoverflow.com/questions/28321524/rails-devise-if-user-signed-in-create-with-user-id-else-without/28321771#28321771", "title": "Rails, Devise: If user signed in create with user id, else without", "body": "<p>It's quite simple, you can use <code>user_signed_in?</code> helper:</p>\n\n<pre><code>if user_signed_in?\n  @stream = current_user.streams.build(params[:name])\nelse\n  @stream = Stream.new(params[:name])\nend\n</code></pre>\n\n<p>BTW make sure you pass valid params while building object.</p>\n"}, {"comments": [{"owner": {"reputation": 48413, "user_id": 1279683, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1veuT.jpg?s=128&g=1", "display_name": "Marek Lipka", "link": "https://stackoverflow.com/users/1279683/marek-lipka"}, "edited": false, "score": 0, "creation_date": 1423053984, "post_id": 28321788, "comment_id": 44991371, "body": "You forgot <code>@stream =</code> in <code>else</code> clause."}, {"owner": {"reputation": 2755, "user_id": 1543985, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/h2xDy.jpg?s=128&g=1", "display_name": "RichardAE", "link": "https://stackoverflow.com/users/1543985/richardae"}, "reply_to_user": {"reputation": 48413, "user_id": 1279683, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1veuT.jpg?s=128&g=1", "display_name": "Marek Lipka", "link": "https://stackoverflow.com/users/1279683/marek-lipka"}, "edited": false, "score": 0, "creation_date": 1423056428, "post_id": 28321788, "comment_id": 44992963, "body": "So I did, thanks. That&#39;s what you get rushing at work :)"}], "tags": [], "owner": {"reputation": 2755, "user_id": 1543985, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/h2xDy.jpg?s=128&g=1", "display_name": "RichardAE", "link": "https://stackoverflow.com/users/1543985/richardae"}, "is_accepted": false, "score": 0, "last_activity_date": 1423056432, "last_edit_date": 1423056432, "creation_date": 1423053946, "answer_id": 28321788, "question_id": 28321524, "link": "https://stackoverflow.com/questions/28321524/rails-devise-if-user-signed-in-create-with-user-id-else-without/28321788#28321788", "title": "Rails, Devise: If user signed in create with user id, else without", "body": "<p>Devise has a user_signed_in? method. So you could do this:</p>\n\n<pre><code>if user_signed_in?\n  @stream = current_user.streams.build(params[:name])\nelse\n  @stream = Stream.new(params[:name])\nend  \n</code></pre>\n"}], "owner": {"reputation": 49, "user_id": 4406747, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/7b1052e39e99569d4dd97e096faa7ee6?s=128&d=identicon&r=PG&f=1", "display_name": "Owlet", "link": "https://stackoverflow.com/users/4406747/owlet"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 350, "favorite_count": 0, "accepted_answer_id": 28321771, "answer_count": 2, "score": 0, "last_activity_date": 1423056432, "creation_date": 1423053188, "question_id": 28321524, "link": "https://stackoverflow.com/questions/28321524/rails-devise-if-user-signed-in-create-with-user-id-else-without", "title": "Rails, Devise: If user signed in create with user id, else without", "body": "<p>I have a streams controller and I am using Devise. Users can create streams either with (than the stream will have the id of the user in the db) or without account(than its a guest stream so to say). Currently I have the following create method:</p>\n\n<pre><code>def create\n  @stream = current_user.streams.build(params[:name])\n  if @stream.valid?\n    @stream.save\n    redirect_to c_path(@stream.name)\n    flash[:notice] = \"blabla\"\n  else\n    redirect_to root_path\n  end\nend\n</code></pre>\n\n<p>But that doesnt work for guests, since I use the current_user. Now my plan was to create a if else (if signed in use the current_user, else not). </p>\n\n<p>How would I do that?</p>\n\n<p>Thanks!</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 2395, "user_id": 1626261, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/v6cN0.jpg?s=128&g=1", "display_name": "Sonalkumar sute", "link": "https://stackoverflow.com/users/1626261/sonalkumar-sute"}, "edited": false, "score": 0, "creation_date": 1423052985, "post_id": 28321340, "comment_id": 44990819, "body": "refer to this it may help [<a href=\"https://github.com/plataformatec/simple_form/wiki/Adding-custom-input-components\" rel=\"nofollow noreferrer\">github.com/plataformatec/simple_form/wiki/&hellip;</a>"}], "answers": [{"comments": [{"owner": {"reputation": 2618, "user_id": 413027, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c152e76c1b53f0181f4464d9a9365465?s=128&d=identicon&r=PG", "display_name": "Eraden", "link": "https://stackoverflow.com/users/413027/eraden"}, "edited": false, "score": 0, "creation_date": 1423055785, "post_id": 28321697, "comment_id": 44992533, "body": "I honestly advise to not use dragonfly. This gem is just pain in the a%%."}], "tags": [], "owner": {"reputation": 365, "user_id": 4519092, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-ErtNqDUxxag/AAAAAAAAAAI/AAAAAAAAABs/A2oiRZfUUs0/photo.jpg?sz=128", "display_name": "GeekRiky", "link": "https://stackoverflow.com/users/4519092/geekriky"}, "is_accepted": false, "score": 0, "last_activity_date": 1423053722, "creation_date": 1423053722, "answer_id": 28321697, "question_id": 28321340, "link": "https://stackoverflow.com/questions/28321340/ruby-on-rails-how-would-i-add-a-image-uploader-to-the-simple-form-gem/28321697#28321697", "title": "Ruby on Rails - How would I add a image uploader to the simple_form Gem", "body": "<p>For image upload you can use<a href=\"https://github.com/markevans/dragonfly\" rel=\"nofollow\">paperclip</a></p>\n\n<p><a href=\"https://github.com/markevans/dragonfly\" rel=\"nofollow\">1</a>: <a href=\"https://github.com/thoughtbot/paperclip\" rel=\"nofollow\">https://github.com/thoughtbot/paperclip</a> or <a href=\"https://github.com/markevans/dragonfly\" rel=\"nofollow\">dragonfly</a></p>\n"}, {"comments": [{"owner": {"reputation": 1400, "user_id": 2498890, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/222e90c365eee848543847010fa5454a?s=128&d=identicon&r=PG", "display_name": "user2498890", "link": "https://stackoverflow.com/users/2498890/user2498890"}, "edited": false, "score": 0, "creation_date": 1423068685, "post_id": 28322287, "comment_id": 45001385, "body": "Thank you, I&#39;ve added the form.input and that works however its not displaying the image yet, I&#39;ve added the Paperclip gem to my site but I&#39;m not sure how to implement it."}, {"owner": {"reputation": 46, "user_id": 4528639, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/uQvAw.jpg?s=128&g=1", "display_name": "Michael Novi", "link": "https://stackoverflow.com/users/4528639/michael-novi"}, "reply_to_user": {"reputation": 1400, "user_id": 2498890, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/222e90c365eee848543847010fa5454a?s=128&d=identicon&r=PG", "display_name": "user2498890", "link": "https://stackoverflow.com/users/2498890/user2498890"}, "edited": false, "score": 0, "creation_date": 1423088371, "post_id": 28322287, "comment_id": 45012212, "body": "Are you trying to display the image in the browser/client prior to upload? If so, the most common way to handle that would be a JavaScript solution (<a href=\"https://stackoverflow.com/questions/4459379/preview-an-image-before-it-is-uploaded\" title=\"preview an image before it is uploaded\">stackoverflow.com/questions/4459379/&hellip;</a>). The Paperclip Github repo has some good documentation and a decent wiki for server side receipt and processing of files."}], "tags": [], "owner": {"reputation": 46, "user_id": 4528639, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/uQvAw.jpg?s=128&g=1", "display_name": "Michael Novi", "link": "https://stackoverflow.com/users/4528639/michael-novi"}, "is_accepted": false, "score": 2, "last_activity_date": 1423055435, "creation_date": 1423055435, "answer_id": 28322287, "question_id": 28321340, "link": "https://stackoverflow.com/questions/28321340/ruby-on-rails-how-would-i-add-a-image-uploader-to-the-simple-form-gem/28322287#28322287", "title": "Ruby on Rails - How would I add a image uploader to the simple_form Gem", "body": "<p>You should be able to change:</p>\n\n<pre><code>&lt;%= form.input :image, label: \"Image of house\" %&gt;\n</code></pre>\n\n<p>to</p>\n\n<pre><code>&lt;%= form.input :image, as: :file, label: \"Image of house\" %&gt;\n</code></pre>\n\n<p>This will create a standard HTML file input field which allows your users to select local files for upload. There are information about this and other field types available <a href=\"https://github.com/plataformatec/simple_form#available-input-types-and-defaults-for-each-column-type\" rel=\"nofollow\">Simple Form input field types</a>.</p>\n\n<p>Additionally, you will want to consider a gem such as <a href=\"https://github.com/thoughtbot/paperclip\" rel=\"nofollow\">Paperclip</a> or Carrierwave to handle receiving files on the server (in the model).</p>\n\n<p>And if you really want a custom input type in simple_form, you can read about how to implement that in the simple_form github repo under \"Custom Inputs\" -- this would NOT be necessary for uploading an image. It would be syntactic sugar for your code.</p>\n"}], "owner": {"reputation": 1400, "user_id": 2498890, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/222e90c365eee848543847010fa5454a?s=128&d=identicon&r=PG", "display_name": "user2498890", "link": "https://stackoverflow.com/users/2498890/user2498890"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1575, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1423055435, "creation_date": 1423052713, "question_id": 28321340, "link": "https://stackoverflow.com/questions/28321340/ruby-on-rails-how-would-i-add-a-image-uploader-to-the-simple-form-gem", "title": "Ruby on Rails - How would I add a image uploader to the simple_form Gem", "body": "<p>I'm creating a basic house listing page to get to grips with Rails and I'm trying to work out how I would add a image file uploader to a simple_form gem on Ruby on Rails.</p>\n\n<p>Currently, I have a basic form which asks for a title, price and description, whilst I was creating the form I added an input field for image but instead of an input field, I would like to allow a user to add an image file which would be added to the listing with house.image</p>\n\n<p>My code is as follows: </p>\n\n<p>index.html.erb - </p>\n\n<pre><code>&lt;p&gt;&lt;%= link_to \"Add a House\", new_house_path %&gt;&lt;/p&gt;\n\n&lt;% @houses.each do |house| %&gt;\n\n  &lt;div class=\"house\"&gt;\n    &lt;p&gt;&lt;%= house.image %&gt;&lt;/p&gt;\n    &lt;h2&gt;&lt;%= house.title %&gt;&lt;/h2&gt;\n    &lt;h2&gt;&lt;%= house.price %&gt;&lt;/h2&gt;\n    &lt;p&gt;&lt;%= house.description %&gt;&lt;/p&gt;\n  &lt;/div&gt;\n&lt;% end %&gt;\n\n&lt;p&gt;&lt;%= paginate @houses %&gt;&lt;/p&gt;\n</code></pre>\n\n<p>house.rb - </p>\n\n<pre><code>class House &lt; ActiveRecord::Base\n    validates :title, presence: true\n    validates :price, presence: true\n    validates :description, presence: true\n    validates :image, presence: true\nend\n</code></pre>\n\n<p>houses_controller.rb - </p>\n\n<pre><code>class HousesController &lt; ApplicationController\n  def index\n    @houses = House.page(params[:page]).per(20).order(created_at: :desc)\n  end\n\n  def new\n    @house = House.new\n  end\n\n  def create\n    @house = House.new(params.require(:house).permit(:title, :price, :description, :image))\n  if @house.save\n    redirect_to root_path\n  else\n    render \"new\"\n  end\n  end\n\nend\n</code></pre>\n\n<p>new.html.erb - </p>\n\n<pre><code>&lt;%= simple_form_for @house do |form| %&gt;\n &lt;%= form.input :title, label: \"House title\" %&gt;\n &lt;%= form.input :price, label: \"House price\" %&gt;\n &lt;%= form.input :description, label: \"Describe your house\" %&gt;\n &lt;%= form.input :image, label: \"Image of house\" %&gt;\n &lt;%= form.button :submit %&gt;\n&lt;% end %&gt;\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4", "heroku", "railstutorial.org"], "comments": [{"owner": {"reputation": 9878, "user_id": 3315785, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/YsMo6.jpg?s=128&g=1", "display_name": "j-dexx", "link": "https://stackoverflow.com/users/3315785/j-dexx"}, "edited": false, "score": 2, "creation_date": 1423052044, "post_id": 28321052, "comment_id": 44990342, "body": "<code>ActionView::Template::Error (undefined method </code>phone&#39; for #&lt;User:0x007f3de7f76508&gt;):`  Does your user have a phone attribute?"}, {"owner": {"reputation": 2594, "user_id": 2628223, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/dbHga.jpg?s=128&g=1", "display_name": "BigRon", "link": "https://stackoverflow.com/users/2628223/bigron"}, "edited": false, "score": 2, "creation_date": 1423052166, "post_id": 28321052, "comment_id": 44990400, "body": "If it works locally, but not on Heroku, did you forget to run any migrations on Heroku? run <code>$ heroku run rake db:migrate</code>"}, {"owner": {"reputation": 1106, "user_id": 2805144, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/45e65bf377dfc11fed59d677f86a8288?s=128&d=identicon&r=PG&f=1", "display_name": "Virge Assault", "link": "https://stackoverflow.com/users/2805144/virge-assault"}, "reply_to_user": {"reputation": 9878, "user_id": 3315785, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/YsMo6.jpg?s=128&g=1", "display_name": "j-dexx", "link": "https://stackoverflow.com/users/3315785/j-dexx"}, "edited": false, "score": 0, "creation_date": 1423052485, "post_id": 28321052, "comment_id": 44990548, "body": "@japed I believe so.  I followed the same steps I used to add email as I did to add phone.  I put my user.rb model above, if there is somewhere else to check I&#39;ll look.  If that was the problem I thought I&#39;d get an error after trying to submit a sign-up, not before loading the page."}, {"owner": {"reputation": 1106, "user_id": 2805144, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/45e65bf377dfc11fed59d677f86a8288?s=128&d=identicon&r=PG&f=1", "display_name": "Virge Assault", "link": "https://stackoverflow.com/users/2805144/virge-assault"}, "reply_to_user": {"reputation": 2594, "user_id": 2628223, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/dbHga.jpg?s=128&g=1", "display_name": "BigRon", "link": "https://stackoverflow.com/users/2628223/bigron"}, "edited": false, "score": 0, "creation_date": 1423052522, "post_id": 28321052, "comment_id": 44990568, "body": "@BigRon I thought the same, have run it several times but it hasn&#39;t worked.  I did rollback two migrations in development to change phone_number to phone, then migrated in development and heroku. Didn&#39;t rollback anything in Heroku just migrated, could that hurt it? Thought migrating would take care of it."}, {"owner": {"reputation": 1106, "user_id": 2805144, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/45e65bf377dfc11fed59d677f86a8288?s=128&d=identicon&r=PG&f=1", "display_name": "Virge Assault", "link": "https://stackoverflow.com/users/2805144/virge-assault"}, "reply_to_user": {"reputation": 9878, "user_id": 3315785, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/YsMo6.jpg?s=128&g=1", "display_name": "j-dexx", "link": "https://stackoverflow.com/users/3315785/j-dexx"}, "edited": false, "score": 0, "creation_date": 1423052899, "post_id": 28321052, "comment_id": 44990766, "body": "@japed I added my production schema above, i think it is correct and has a phone attribute."}, {"owner": {"reputation": 1527, "user_id": 1107878, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rLi3w.png?s=128&g=1", "display_name": "basiam", "link": "https://stackoverflow.com/users/1107878/basiam"}, "edited": false, "score": 0, "creation_date": 1423055248, "post_id": 28321052, "comment_id": 44992179, "body": "did you try rolling back this migration on heroku (<code>heroku run rake db:migrate:down VERSION=xxx</code>), running it up again and restarting heroku?"}, {"owner": {"reputation": 64, "user_id": 4478673, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-g_YLhbKZXe8/AAAAAAAAAAI/AAAAAAAAAIg/ZdFlOJ3Kq1Y/photo.jpg?sz=128", "display_name": "Manu Gambino", "link": "https://stackoverflow.com/users/4478673/manu-gambino"}, "edited": false, "score": 0, "creation_date": 1423055400, "post_id": 28321052, "comment_id": 44992276, "body": "Try running a rails console and check the user attr, check if the migration where you add the phone is correct. If the migration is correct and you can erase all the data un the db try doing a <code>rake db:reset</code>"}], "answers": [{"comments": [{"owner": {"reputation": 1527, "user_id": 1107878, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rLi3w.png?s=128&g=1", "display_name": "basiam", "link": "https://stackoverflow.com/users/1107878/basiam"}, "edited": false, "score": 0, "creation_date": 1423057691, "post_id": 28322696, "comment_id": 44993849, "body": "There is <code>phone_field</code> in Rails <a href=\"http://apidock.com/rails/ActionView/Helpers/FormHelper/phone_field\" rel=\"nofollow noreferrer\">apidock.com/rails/ActionView/Helpers/FormHelper/phone_field</a>"}, {"owner": {"reputation": 1527, "user_id": 1107878, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rLi3w.png?s=128&g=1", "display_name": "basiam", "link": "https://stackoverflow.com/users/1107878/basiam"}, "edited": false, "score": 0, "creation_date": 1423060793, "post_id": 28322696, "comment_id": 44995880, "body": "yeah, aliased with &#39;phone_field&#39;"}, {"owner": {"reputation": 1106, "user_id": 2805144, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/45e65bf377dfc11fed59d677f86a8288?s=128&d=identicon&r=PG&f=1", "display_name": "Virge Assault", "link": "https://stackoverflow.com/users/2805144/virge-assault"}, "edited": false, "score": 0, "creation_date": 1423079260, "post_id": 28322696, "comment_id": 45007403, "body": "@HardikHardiya no, like basia said phone_field works fine.  Changed to telephone_field to test and both worked excatly the same, still have undefined method `phone&#39; like in the logs above.  Guessing its for :phone but I&#39;m not sure what the issue is."}, {"owner": {"reputation": 1527, "user_id": 1107878, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rLi3w.png?s=128&g=1", "display_name": "basiam", "link": "https://stackoverflow.com/users/1107878/basiam"}, "reply_to_user": {"reputation": 1106, "user_id": 2805144, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/45e65bf377dfc11fed59d677f86a8288?s=128&d=identicon&r=PG&f=1", "display_name": "Virge Assault", "link": "https://stackoverflow.com/users/2805144/virge-assault"}, "edited": false, "score": 0, "creation_date": 1423079878, "post_id": 28322696, "comment_id": 45007730, "body": "@VirgeAssault  I&#39;m 99% sure you messed something with migrations. Have you tried running the migration down and up as I suggested in comment above?"}, {"owner": {"reputation": 1106, "user_id": 2805144, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/45e65bf377dfc11fed59d677f86a8288?s=128&d=identicon&r=PG&f=1", "display_name": "Virge Assault", "link": "https://stackoverflow.com/users/2805144/virge-assault"}, "reply_to_user": {"reputation": 1527, "user_id": 1107878, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rLi3w.png?s=128&g=1", "display_name": "basiam", "link": "https://stackoverflow.com/users/1107878/basiam"}, "edited": false, "score": 0, "creation_date": 1423082834, "post_id": 28322696, "comment_id": 45009377, "body": "@basia I edited the question to include my migration folder on Heroku.  I&#39;m not sure what version to rollback to, or what exactly to put in the VERSION=xxx part.  If I roll back to the first version and then run db:migrate on heroku, would that work if thats the problem? And what would I put as the version in the rollback?"}, {"owner": {"reputation": 1106, "user_id": 2805144, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/45e65bf377dfc11fed59d677f86a8288?s=128&d=identicon&r=PG&f=1", "display_name": "Virge Assault", "link": "https://stackoverflow.com/users/2805144/virge-assault"}, "reply_to_user": {"reputation": 1527, "user_id": 1107878, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rLi3w.png?s=128&g=1", "display_name": "basiam", "link": "https://stackoverflow.com/users/1107878/basiam"}, "edited": false, "score": 0, "creation_date": 1423084384, "post_id": 28322696, "comment_id": 45010192, "body": "@basia I ran <code>heroku run rake db:migrate:down VERSION=20150204094519</code> and <code>heroku run rake db:migrate:down VERSION=20150204093042</code> to rollback the two migrations that had to do with :phone, then <code>heroku run rake db:migrate</code> and it still doesn&#39;t work, is that what you meant for me to do?"}, {"owner": {"reputation": 1527, "user_id": 1107878, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rLi3w.png?s=128&g=1", "display_name": "basiam", "link": "https://stackoverflow.com/users/1107878/basiam"}, "edited": false, "score": 0, "creation_date": 1423133819, "post_id": 28322696, "comment_id": 45028805, "body": ":( yeah, exactly that, followed by <code>heroku restart</code> just to be sure. If this didn&#39;t work the I have no idea for now, since your code looks all good."}], "tags": [], "owner": {"reputation": 777, "user_id": 3692176, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5OpSk.jpg?s=128&g=1", "display_name": "Hardik Hardiya", "link": "https://stackoverflow.com/users/3692176/hardik-hardiya"}, "is_accepted": true, "score": 1, "last_activity_date": 1423057958, "last_edit_date": 1423057958, "creation_date": 1423056667, "answer_id": 28322696, "question_id": 28321052, "link": "https://stackoverflow.com/questions/28321052/actionviewtemplateerror-undefined-method-phone-for-user0x007f35612a544/28322696#28322696", "title": "ActionView::Template::Error (undefined method `phone&#39; for #&lt;User:0x007f35612a5448&gt;):", "body": "<p>Their is no such phone_field in rails, change it to text_field or number_field or telephone_field.</p>\n\n<pre><code>&lt;%= f.phone_field :phone, class: 'form-control' %&gt;\n</code></pre>\n\n<p>to</p>\n\n<pre><code>&lt;%= f.text_field :phone, class: 'form-control' %&gt;\n</code></pre>\n\n<p>or</p>\n\n<pre><code>&lt;%= f.telephone_field :phone, class: 'form-control' %&gt;\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 2248, "user_id": 1558132, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/8b8f159143056627925a4ed59ff724bb?s=128&d=identicon&r=PG", "display_name": "mack", "link": "https://stackoverflow.com/users/1558132/mack"}, "edited": false, "score": 0, "creation_date": 1443186398, "post_id": 28430321, "comment_id": 53404395, "body": "Thanks, I had a similar problem and had to drop my database and re-run the migrations."}], "tags": [], "owner": {"reputation": 1106, "user_id": 2805144, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/45e65bf377dfc11fed59d677f86a8288?s=128&d=identicon&r=PG&f=1", "display_name": "Virge Assault", "link": "https://stackoverflow.com/users/2805144/virge-assault"}, "is_accepted": false, "score": 1, "last_activity_date": 1476438943, "last_edit_date": 1476438943, "creation_date": 1423567063, "answer_id": 28430321, "question_id": 28321052, "link": "https://stackoverflow.com/questions/28321052/actionviewtemplateerror-undefined-method-phone-for-user0x007f35612a544/28430321#28430321", "title": "ActionView::Template::Error (undefined method `phone&#39; for #&lt;User:0x007f35612a5448&gt;):", "body": "<p>My problem was with migrations. I still don't understand why the migrations would not work correctly, but I was able to fix the issue in 5 minutes by deleting the heroku app and starting a new one like this:</p>\n\n<pre><code>heroku apps:destroy -a appname\nheroku create appname\ngit push heroku master\nheroku run rake db:migrate\n</code></pre>\n\n<p>For anyone doing the Hartl tutorial or new to rails in general I would highly recommend trying this if you think migrations are your problem and you can't fix your current heroku app. It's unlikely you have anything in your current app that pushing to heroku and migrating again won't replicate. </p>\n"}], "owner": {"reputation": 1106, "user_id": 2805144, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/45e65bf377dfc11fed59d677f86a8288?s=128&d=identicon&r=PG&f=1", "display_name": "Virge Assault", "link": "https://stackoverflow.com/users/2805144/virge-assault"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 903, "favorite_count": 0, "accepted_answer_id": 28322696, "answer_count": 2, "score": 0, "last_activity_date": 1476438943, "creation_date": 1423051854, "last_edit_date": 1423082709, "question_id": 28321052, "link": "https://stackoverflow.com/questions/28321052/actionviewtemplateerror-undefined-method-phone-for-user0x007f35612a544", "title": "ActionView::Template::Error (undefined method `phone&#39; for #&lt;User:0x007f35612a5448&gt;):", "body": "<p>I finished creating user sign-up for my new rails app and everything worked fine in development on my local machine. But on heroku the deployed app will show the homepage and most other pages except the signup_path which renders \"new.html.erb\". Clicking this path gives me an error telling me to check my logs.</p>\n\n<p>I've checked the logs and have tried several things but don't know what to do now.  Here are the logs: <a href=\"http://pastebin.com/v1fVqLbL\" rel=\"nofollow\">http://pastebin.com/v1fVqLbL</a></p>\n\n<p>Here's the home page which works fine, but the path attached to \"sign in\" doesn't</p>\n\n<p><strong>home.html.erb</strong></p>\n\n<pre><code>&lt;% provide(:title, \"Home\") %&gt;\n\n&lt;div class=\"center jumbotron\"&gt;\n  &lt;h1&gt;sample app&lt;/h1&gt;\n\n  &lt;%= link_to \"Sign up now!\", signup_path, class: \"btn btn-lg btn-primary\" %&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p><strong>routes.rb</strong></p>\n\n<pre><code>Rails.application.routes.draw do\n\n  get 'users/new'\n\n  root             'static_pages#home'\n  get 'help'    =&gt; 'static_pages#help'\n  get 'about'   =&gt; 'static_pages#about'\n  get 'contact' =&gt; 'static_pages#contact'\n  get 'signup'  =&gt; 'users#new'\n  resources :users\nend\n</code></pre>\n\n<p>And my sign up page that is supposed to load:</p>\n\n<p><strong>new.html.erb</strong></p>\n\n<pre><code>    &lt;% provide(:title, 'Sign up') %&gt;\n    &lt;h1&gt;Sign up&lt;/h1&gt;\n\n    &lt;div class=\"row\"&gt;\n      &lt;div class=\"col-md-6 col-md-offset-3\"&gt;\n        &lt;%= form_for(@user) do |f| %&gt;\n          &lt;%= render 'shared/error_messages' %&gt;\n\n          &lt;%= f.label :name %&gt;\n          &lt;%= f.text_field :name, class: 'form-control' %&gt;\n\n          &lt;%= f.label :email %&gt;\n          &lt;%= f.email_field :email, class: 'form-control' %&gt;\n\n          &lt;%= f.label :phone, \"Phone Number\" %&gt;\n          &lt;%= f.phone_field :phone, class: 'form-control' %&gt;\n\n          &lt;%= f.label :password %&gt;\n          &lt;%= f.password_field :password, class: 'form-control' %&gt;\n\n          &lt;%= f.label :password_confirmation, \"Confirm Your Password\" %&gt;\n          &lt;%= f.password_field :password_confirmation, class: 'form-control' %&gt;\n\n          &lt;%= f.submit \"Create my account\", class: \"btn btn-primary\" %&gt;\n        &lt;% end %&gt;\n      &lt;/div&gt;\n    &lt;/div&gt;\n</code></pre>\n\n<p><strong>Application.html.erb</strong></p>\n\n<pre><code> &lt;!DOCTYPE html&gt;\n    &lt;html&gt;\n      &lt;head&gt;\n        &lt;title&gt;&lt;%= full_title(yield(:title)) %&gt;&lt;/title&gt;\n        &lt;%= stylesheet_link_tag \"application\", media: \"all\",\n                                               \"data-turbolinks-track\" =&gt; true %&gt;\n        &lt;%= javascript_include_tag \"application\", \"data-turbolinks-track\" =&gt; true %&gt;\n        &lt;%= csrf_meta_tags %&gt;\n        &lt;%= render 'layouts/shim' %&gt;\n      &lt;/head&gt;\n      &lt;body&gt;\n        &lt;%= render 'layouts/header' %&gt;\n        &lt;div class=\"container\"&gt;\n          &lt;% flash.each do |message_type, message| %&gt;\n            &lt;div class=\"alert alert-&lt;%= message_type %&gt;\"&gt;&lt;%= message %&gt;&lt;/div&gt;\n          &lt;% end %&gt;\n          &lt;%= yield %&gt;\n          &lt;%= render 'layouts/footer' %&gt;\n          &lt;%= debug(params) if Rails.env.development? %&gt;\n        &lt;/div&gt;\n      &lt;/body&gt;\n    &lt;/html&gt;\n</code></pre>\n\n<p><strong>user.rb</strong></p>\n\n<pre><code>class User &lt; ActiveRecord::Base\n  before_save { self.email = email.downcase }\n  validates :name, presence: true, length: { maximum: 50 }\n  VALID_EMAIL_REGEX = /\\A[\\w+\\-.]+@[a-z\\d\\-.]+\\.[a-z]+\\z/i\n  validates :email, presence: true, length: { maximum: 255 },\n                    format: { with: VALID_EMAIL_REGEX },\n                    uniqueness: { case_sensitive: false }\n  VALID_PHONE_REGEX = /\\A(\\+\\d{1,2}\\s)?\\(?\\d{3}\\)?[\\s.-]?\\d{3}[\\s.-]?\\d{4}\\z/\n  validates :phone, presence: true, length: {maximum: 15},\n                   format: { with: VALID_PHONE_REGEX },\n                    uniqueness: true\n  has_secure_password\n  validates :password, length: { minimum: 6 }\nend\n</code></pre>\n\n<p>My production schema, where I believe phone is defined:</p>\n\n<pre><code>ActiveRecord::Schema.define(version: 20150204094519) do\n\n  create_table \"users\", force: :cascade do |t|\n    t.string   \"name\"\n    t.string   \"email\"\n    t.datetime \"created_at\",      null: false\n    t.datetime \"updated_at\",      null: false\n    t.string   \"password_digest\"\n    t.string   \"phone\"\n  end\n\n  add_index \"users\", [\"email\"], name: \"index_users_on_email\", unique: true\n  add_index \"users\", [\"phone\"], name: \"index_users_on_phone\", unique: true\n\nend\n</code></pre>\n\n<p><strong>Heroku Migrations:</strong></p>\n\n<pre><code>20150204074511_create_users.rb                  20150204093042_add_phone_number_to_users.rb\n20150204081616_add_index_to_users_email.rb      20150204094519_add_index_to_users_phone_number.rb\n20150204081750_add_password_digest_to_users.rb\n</code></pre>\n\n<p>Happy to add any other files if necessary.  I'm running the final gemfile from Hartl's newest tutorial. Don't know what else to do.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "wsdl", "uri", "savon"], "answers": [{"tags": [], "owner": {"reputation": 1435, "user_id": 1628353, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/46519d561d5714a2cebbe5097b4b70be?s=128&d=identicon&r=PG", "display_name": "chirag7jain", "link": "https://stackoverflow.com/users/1628353/chirag7jain"}, "is_accepted": true, "score": 0, "last_activity_date": 1423053314, "creation_date": 1423053314, "answer_id": 28321569, "question_id": 28321009, "link": "https://stackoverflow.com/questions/28321009/unable-to-resolve-uri-issue-ruby-uri/28321569#28321569", "title": "Unable to resolve URI Issue Ruby URI", "body": "<p>Fix - <a href=\"https://github.com/savonrb/savon/issues/488\" rel=\"nofollow\">https://github.com/savonrb/savon/issues/488</a></p>\n\n<p>just install gem httpclient </p>\n"}, {"tags": [], "owner": {"reputation": 369, "user_id": 893329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3d0279e2488a72d7cac1310a19c57056?s=128&d=identicon&r=PG", "display_name": "ajahongir", "link": "https://stackoverflow.com/users/893329/ajahongir"}, "is_accepted": false, "score": 0, "last_activity_date": 1423814256, "creation_date": 1423814256, "answer_id": 28494910, "question_id": 28321009, "link": "https://stackoverflow.com/questions/28321009/unable-to-resolve-uri-issue-ruby-uri/28494910#28494910", "title": "Unable to resolve URI Issue Ruby URI", "body": "<p>I guess your wsdl service is not works well. something wrong with your service scheme.\nI have tried to connect your service and get possable operations and I am getting an empty result:</p>\n\n<pre><code>client = Savon.client(:wsdl =&gt; 'you service path')\nclient.operations #=&gt; []\n</code></pre>\n\n<p>Also you can check you service with this <a href=\"http://wsdlbrowser.com/\" rel=\"nofollow\">online</a> tool. when I tries to read you service schema got error:</p>\n\n<pre><code>SOAP-ERROR: Parsing WSDL: Couldn't find &lt;definitions&gt; in 'https://ws.aramex.net/shippingapi/shipping/service_1_0.svc?wsdl'\n</code></pre>\n\n<p>Try to fix you service first.</p>\n"}], "owner": {"reputation": 1435, "user_id": 1628353, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/46519d561d5714a2cebbe5097b4b70be?s=128&d=identicon&r=PG", "display_name": "chirag7jain", "link": "https://stackoverflow.com/users/1628353/chirag7jain"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 376, "favorite_count": 0, "accepted_answer_id": 28321569, "answer_count": 2, "score": 1, "last_activity_date": 1423814256, "creation_date": 1423051717, "question_id": 28321009, "link": "https://stackoverflow.com/questions/28321009/unable-to-resolve-uri-issue-ruby-uri", "title": "Unable to resolve URI Issue Ruby URI", "body": "<pre><code>client = Savon.client(:wsdl =&gt; 'LOCATION OF FILE CODE OF WHICH I HAVE POSTED BELOW'\n\nSavon.call(:create_shipments, :message =&gt; some_hash)\n</code></pre>\n\n<p>I am getting URI::InvalidURIError: bad URI(is not URI?)</p>\n\n<p>I did a puts in URI Library for the url</p>\n\n<p>the URL was - <a href=\"https://ws.aramex.net/shippingapi/shipping/service_1_0.svc\" rel=\"nofollow\">https://ws.aramex.net/shippingapi/shipping/service_1_0.svc</a></p>\n\n<p>tried to URI.parse on the same url its not giving me any error</p>\n\n<p>WSDL File - Removed Unwanted Content - link to original \n<a href=\"http://www.aramex.com/content/uploads/109/232/42194/shipping-services-api-wsdl.zip\" rel=\"nofollow\">http://www.aramex.com/content/uploads/109/232/42194/shipping-services-api-wsdl.zip</a></p>\n\n<pre><code>    &lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;wsdl:definitions xmlns:wsam=\"http://www.w3.org/2007/05/addressing/metadata\" xmlns:wsx=\"http://schemas.xmlsoap.org/ws/2004/09/mex\" xmlns:wsa10=\"http://www.w3.org/2005/08/addressing\" xmlns:msc=\"http://schemas.microsoft.com/ws/2005/12/wsdl/contract\" xmlns:wsaw=\"http://www.w3.org/2006/05/addressing/wsdl\" xmlns:wsap=\"http://schemas.xmlsoap.org/ws/2004/08/addressing/policy\" xmlns:wsp=\"http://schemas.xmlsoap.org/ws/2004/09/policy\" xmlns:wsa=\"http://schemas.xmlsoap.org/ws/2004/08/addressing\" xmlns:tns=\"http://ws.aramex.net/ShippingAPI/v1/\" xmlns:soap12=\"http://schemas.xmlsoap.org/wsdl/soap12/\" xmlns:xsd=\"http://www.w3.org/2001/XMLSchema\" xmlns:wsu=\"http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd\" xmlns:soapenc=\"http://schemas.xmlsoap.org/soap/encoding/\" xmlns:soap=\"http://schemas.xmlsoap.org/wsdl/soap/\" xmlns:wsdl=\"http://schemas.xmlsoap.org/wsdl/\" targetNamespace=\"http://ws.aramex.net/ShippingAPI/v1/\" name=\"Service_1_0\"&gt;\n  &lt;wsdl:types&gt;\n    &lt;xsd:schema targetNamespace=\"http://ws.aramex.net/ShippingAPI/v1/\" xmlns:ser=\"http://schemas.microsoft.com/2003/10/Serialization/\" elementFormDefault=\"qualified\"&gt;\n      &lt;xsd:element name=\"ShipmentCreationRequest\"&gt;\n    &lt;xs:schema xmlns:tns=\"http://schemas.microsoft.com/2003/10/Serialization/\" targetNamespace=\"http://schemas.microsoft.com/2003/10/Serialization/\" elementFormDefault=\"qualified\" xmlns:xs=\"http://www.w3.org/2001/XMLSchema\" attributeFormDefault=\"qualified\"&gt;\n      &lt;xs:element type=\"xs:anyType\" name=\"anyType\" nillable=\"true\"/&gt;\n      &lt;xs:element type=\"xs:anyURI\" name=\"anyURI\" nillable=\"true\"/&gt;\n      &lt;xs:element type=\"xs:base64Binary\" name=\"base64Binary\" nillable=\"true\"/&gt;\n      &lt;xs:element type=\"xs:boolean\" name=\"boolean\" nillable=\"true\"/&gt;\n      &lt;xs:element type=\"xs:byte\" name=\"byte\" nillable=\"true\"/&gt;\n      &lt;xs:element type=\"xs:dateTime\" name=\"dateTime\" nillable=\"true\"/&gt;\n      &lt;xs:element type=\"xs:decimal\" name=\"decimal\" nillable=\"true\"/&gt;\n      &lt;xs:element type=\"xs:double\" name=\"double\" nillable=\"true\"/&gt;\n      &lt;xs:element type=\"xs:float\" name=\"float\" nillable=\"true\"/&gt;\n      &lt;xs:element type=\"xs:int\" name=\"int\" nillable=\"true\"/&gt;\n      &lt;xs:element type=\"xs:long\" name=\"long\" nillable=\"true\"/&gt;\n      &lt;xs:element type=\"xs:QName\" name=\"QName\" nillable=\"true\"/&gt;\n      &lt;xs:element type=\"xs:short\" name=\"short\" nillable=\"true\"/&gt;\n      &lt;xs:element type=\"xs:string\" name=\"string\" nillable=\"true\"/&gt;\n      &lt;xs:element type=\"xs:unsignedByte\" name=\"unsignedByte\" nillable=\"true\"/&gt;\n      &lt;xs:element type=\"xs:unsignedInt\" name=\"unsignedInt\" nillable=\"true\"/&gt;\n      &lt;xs:element type=\"xs:unsignedLong\" name=\"unsignedLong\" nillable=\"true\"/&gt;\n      &lt;xs:element type=\"xs:unsignedShort\" name=\"unsignedShort\" nillable=\"true\"/&gt;\n      &lt;xs:element type=\"tns:char\" name=\"char\" nillable=\"true\"/&gt;\n      &lt;xs:simpleType name=\"char\"&gt;\n        &lt;xs:restriction base=\"xs:int\"/&gt;\n      &lt;/xs:simpleType&gt;\n      &lt;xs:element type=\"tns:duration\" name=\"duration\" nillable=\"true\"/&gt;\n      &lt;xs:simpleType name=\"duration\"&gt;\n        &lt;xs:restriction base=\"xs:duration\"&gt;\n          &lt;xs:pattern value=\"\\-?P(\\d*D)?(T(\\d*H)?(\\d*M)?(\\d*(\\.\\d*)?S)?)?\"/&gt;\n          &lt;xs:minInclusive value=\"-P10675199DT2H48M5.4775808S\"/&gt;\n          &lt;xs:maxInclusive value=\"P10675199DT2H48M5.4775807S\"/&gt;\n        &lt;/xs:restriction&gt;\n      &lt;/xs:simpleType&gt;\n      &lt;xs:element type=\"tns:guid\" name=\"guid\" nillable=\"true\"/&gt;\n      &lt;xs:simpleType name=\"guid\"&gt;\n        &lt;xs:restriction base=\"xs:string\"&gt;\n          &lt;xs:pattern value=\"[\\da-fA-F]{8}-[\\da-fA-F]{4}-[\\da-fA-F]{4}-[\\da-fA-F]{4}-[\\da-fA-F]{12}\"/&gt;\n        &lt;/xs:restriction&gt;\n      &lt;/xs:simpleType&gt;\n      &lt;xs:attribute type=\"xs:QName\" name=\"FactoryType\"/&gt;\n      &lt;xs:attribute type=\"xs:ID\" name=\"Id\"/&gt;\n      &lt;xs:attribute type=\"xs:IDREF\" name=\"Ref\"/&gt;\n    &lt;/xs:schema&gt;\n  &lt;/wsdl:types&gt;\n  &lt;wsdl:message name=\"ShipmentCreationRequest\"&gt;\n    &lt;wsdl:part name=\"parameters\" element=\"tns:ShipmentCreationRequest\"/&gt;\n  &lt;/wsdl:message&gt;\n  &lt;wsdl:message name=\"ShipmentCreationResponse\"&gt;\n    &lt;wsdl:part name=\"parameters\" element=\"tns:ShipmentCreationResponse\"/&gt;\n  &lt;/wsdl:message&gt;\n  &lt;wsdl:portType name=\"Service_1_0\"&gt;\n    &lt;wsdl:operation name=\"CreateShipments\"&gt;\n      &lt;wsdl:input name=\"ShipmentCreationRequest\" message=\"tns:ShipmentCreationRequest\" wsaw:Action=\"http://ws.aramex.net/ShippingAPI/v1/Service_1_0/CreateShipments\"/&gt;\n      &lt;wsdl:output name=\"ShipmentCreationResponse\" message=\"tns:ShipmentCreationResponse\" wsaw:Action=\"http://ws.aramex.net/ShippingAPI/v1/Service_1_0/CreateShipmentsResponse\"/&gt;\n    &lt;/wsdl:operation&gt;\n  &lt;/wsdl:portType&gt;\n  &lt;wsdl:binding type=\"tns:Service_1_0\" name=\"Service_1_0\"&gt;\n    &lt;soap:binding transport=\"http://schemas.xmlsoap.org/soap/http\"/&gt;\n    &lt;wsdl:operation name=\"CreateShipments\"&gt;\n      &lt;soap:operation style=\"document\" soapAction=\"http://ws.aramex.net/ShippingAPI/v1/Service_1_0/CreateShipments\"/&gt;\n      &lt;wsdl:input name=\"ShipmentCreationRequest\"&gt;\n        &lt;soap:body use=\"literal\"/&gt;\n      &lt;/wsdl:input&gt;\n      &lt;wsdl:output name=\"ShipmentCreationResponse\"&gt;\n        &lt;soap:body use=\"literal\"/&gt;\n      &lt;/wsdl:output&gt;\n    &lt;/wsdl:operation&gt;\n  &lt;/wsdl:binding&gt;\n  &lt;wsdl:service name=\"Service_1_0\"&gt;\n    &lt;wsdl:port name=\"Service_1_0\" binding=\"tns:Service_1_0\"&gt;\n      &lt;soap:address location=\"https://ws.aramex.net/shippingapi/shipping/service_1_0.svc\"/&gt;\n    &lt;/wsdl:port&gt;\n  &lt;/wsdl:service&gt;\n&lt;/wsdl:definitions&gt;\n</code></pre>\n"}, {"tags": ["ruby", "directory", "require"], "comments": [{"owner": {"reputation": 1531, "user_id": 976035, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/913e70d8b28f4ea2bd30a735e23d25b2?s=128&d=identicon&r=PG", "display_name": "Finks", "link": "https://stackoverflow.com/users/976035/finks"}, "edited": false, "score": 2, "creation_date": 1423054035, "post_id": 28320901, "comment_id": 44991398, "body": "how about separating the files you need to require in a folder? Then you can do <code>Dir[&quot;.&#47;methods&#47;*.rb&quot;].each(&amp;method(:require_relative))</code>"}, {"owner": {"reputation": 14979, "user_id": 291700, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/39e784d62dbda680c5c2ac6d9b9738aa?s=128&d=identicon&r=PG", "display_name": "Charles Caldwell", "link": "https://stackoverflow.com/users/291700/charles-caldwell"}, "edited": false, "score": 1, "creation_date": 1423056263, "post_id": 28320901, "comment_id": 44992846, "body": "Typically you&#39;ll want to put your supporting files in a <code>lib</code> folder as opposed to keeping everything in the same folder. I do this even for projects with a few supporting files. I suggest finding a gem or two that you like and look at the source code paying close attention to the folder structure."}, {"owner": {"reputation": 1066, "user_id": 3215470, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/rclPe.jpg?s=128&g=1", "display_name": "Andy Jones", "link": "https://stackoverflow.com/users/3215470/andy-jones"}, "edited": false, "score": 0, "creation_date": 1423069981, "post_id": 28320901, "comment_id": 45002257, "body": "I&#39;m moving away from this sort of thing -- I actually LIKE the idea of naming all those files separately, for clarity and safety.  I guess you could go with <code>Dir[&quot;.&#47;*.rb&quot;].reject{|x| x == &quot;.&#47;main.rb&quot;}.each{|y| require_relative y}</code>, which is a bit more expressive, at least."}, {"owner": {"reputation": 590, "user_id": 1902428, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/Kxrgr.png?s=128&g=1", "display_name": "Jonathan_W", "link": "https://stackoverflow.com/users/1902428/jonathan-w"}, "reply_to_user": {"reputation": 1531, "user_id": 976035, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/913e70d8b28f4ea2bd30a735e23d25b2?s=128&d=identicon&r=PG", "display_name": "Finks", "link": "https://stackoverflow.com/users/976035/finks"}, "edited": false, "score": 0, "creation_date": 1423112737, "post_id": 28320901, "comment_id": 45019164, "body": "@Finks +1 for the neat one-liner."}, {"owner": {"reputation": 590, "user_id": 1902428, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/Kxrgr.png?s=128&g=1", "display_name": "Jonathan_W", "link": "https://stackoverflow.com/users/1902428/jonathan-w"}, "reply_to_user": {"reputation": 14979, "user_id": 291700, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/39e784d62dbda680c5c2ac6d9b9738aa?s=128&d=identicon&r=PG", "display_name": "Charles Caldwell", "link": "https://stackoverflow.com/users/291700/charles-caldwell"}, "edited": false, "score": 0, "creation_date": 1423112894, "post_id": 28320901, "comment_id": 45019206, "body": "@CharlesCaldwell so far my methods are dealing with videos, directories, downloads and string-matching. Should I be putting them in separate modules or mixins or something else, or is just putting all methods together in a lib folder just as good ? Am keen to start coding the &#39;Ruby way&#39; as much as possible."}], "owner": {"reputation": 590, "user_id": 1902428, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/Kxrgr.png?s=128&g=1", "display_name": "Jonathan_W", "link": "https://stackoverflow.com/users/1902428/jonathan-w"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 217, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1423053878, "creation_date": 1423051382, "last_edit_date": 1423053878, "question_id": 28320901, "link": "https://stackoverflow.com/questions/28320901/how-to-stop-require-relative-requiring-itself", "title": "How to stop &#39;require_relative&#39; requiring itself?", "body": "<p>In my Ruby without Rails application, I have a bunch of methods saved in various files, like methods.rb, other_methods.rb etc, that I want to access from my main file, main.rb.</p>\n\n<p>Rather than spell out each 'require_relative' individually, my main.rb file currently reads:</p>\n\n<pre><code>main.rb\n\nDir[\"./*.rb\"].each {|file| require_relative file }\nputs \"executing\"\n</code></pre>\n\n<p>The only problem is this outputs: </p>\n\n<pre><code> \"executing\"\n \"executing\"\n</code></pre>\n\n<p>My current hacky approach is:</p>\n\n<pre><code>Dir[\"./*.rb\"].each {|file| next if file == \"./main.rb\"; require file }\n</code></pre>\n\n<p>Is there a better way?</p>\n\n<p>Should I be wrapping my methods in a Module, or a Mixin instead and then using 'include'?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "rails-activerecord"], "comments": [{"owner": {"reputation": 1875, "user_id": 994964, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/462a604c832b4180e593d9b5661bbdf3?s=128&d=identicon&r=PG", "display_name": "jbmyid", "link": "https://stackoverflow.com/users/994964/jbmyid"}, "edited": false, "score": 0, "creation_date": 1423051238, "post_id": 28320826, "comment_id": 44989887, "body": "use <code>House.order(&quot;created_at DESC&quot;)</code>"}], "answers": [{"comments": [{"owner": {"reputation": 1400, "user_id": 2498890, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/222e90c365eee848543847010fa5454a?s=128&d=identicon&r=PG", "display_name": "user2498890", "link": "https://stackoverflow.com/users/2498890/user2498890"}, "edited": false, "score": 0, "creation_date": 1423051753, "post_id": 28320864, "comment_id": 44990166, "body": "Planning on getting a book, have been following a couple of really good tutorials in the meantime."}, {"owner": {"reputation": 362, "user_id": 7720957, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jeSm9.jpg?s=128&g=1", "display_name": "Travis Le", "link": "https://stackoverflow.com/users/7720957/travis-le"}, "edited": false, "score": 0, "creation_date": 1545382177, "post_id": 28320864, "comment_id": 94609941, "body": "I did it! I did it!"}], "tags": [], "owner": {"reputation": 163714, "user_id": 123527, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/99e0b39c091e10d9c7d4452a34ca52dc?s=128&d=identicon&r=PG", "display_name": "Simone Carletti", "link": "https://stackoverflow.com/users/123527/simone-carletti"}, "is_accepted": true, "score": 8, "last_activity_date": 1423051245, "creation_date": 1423051245, "answer_id": 28320864, "question_id": 28320826, "link": "https://stackoverflow.com/questions/28320826/ruby-on-rails-how-would-i-change-the-order-of-posts-displayed-to-newest-at-the/28320864#28320864", "title": "Ruby on Rails - how would I change the order of posts displayed to newest at the top of page?", "body": "<p>Add the <code>order</code> to the query.</p>\n\n<pre><code>@houses = House.page(params[:page]).per(20).order(created_at: :desc)\n</code></pre>\n\n<p>Even better, you should avoid to chain multiple scopes directly in the controller. This approach is very hard to test. Create a custom method.</p>\n\n<pre><code>class House &lt; ActiveRecord::Base\n  # ...\n\n  def self.listing(page)\n    order(created_at: :desc).page(params[:page]).per(20)\n  end\nend\n</code></pre>\n\n<p>and call it in your controller</p>\n\n<pre><code>@houses = House.listing(params[:page])\n</code></pre>\n\n<p>In this way, you can test both <code>listing</code> and the controller separately with unit tests.</p>\n\n<p>As a side note, even if you are a beginner, you should not skip the good habit of reading a basic book before writing code, and the official documentation. ;)</p>\n"}], "owner": {"reputation": 1400, "user_id": 2498890, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/222e90c365eee848543847010fa5454a?s=128&d=identicon&r=PG", "display_name": "user2498890", "link": "https://stackoverflow.com/users/2498890/user2498890"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2774, "favorite_count": 0, "accepted_answer_id": 28320864, "answer_count": 1, "score": 4, "last_activity_date": 1423051505, "creation_date": 1423051116, "last_edit_date": 1423051505, "question_id": 28320826, "link": "https://stackoverflow.com/questions/28320826/ruby-on-rails-how-would-i-change-the-order-of-posts-displayed-to-newest-at-the", "title": "Ruby on Rails - how would I change the order of posts displayed to newest at the top of page?", "body": "<p>I'm creating a simple house listing page to get to grips with Rails and I currently have an add post page set up which posts to the index page however the newest post is displaying at the bottom of the page. How could I reverse the order of my posts to display newest posts at the top?</p>\n\n<p>Not sure which code snippets I should provide but below is my code:</p>\n\n<p>houses_controller.rb -</p>\n\n<pre><code>class HousesController &lt; ApplicationController\n  def index\n    @houses = House.page(params[:page]).per(20)\n  end\n\n  def new\n    @house = House.new\n  end\n\n  def create\n    @house = House.new(params.require(:house).permit(:title, :price, :description, :image))\n  if @house.save\n    redirect_to root_path\n  else\n    render \"new\"\n  end\n  end\n\nend\n</code></pre>\n\n<p>index.html.erb -</p>\n\n<pre><code>&lt;% @houses.each do |house| %&gt;\n\n  &lt;div class=\"house\"&gt;\n    &lt;p&gt;&lt;%= house.image %&gt;&lt;/p&gt;\n    &lt;h2&gt;&lt;%= house.title %&gt;&lt;/h2&gt;\n    &lt;h2&gt;&lt;%= house.price %&gt;&lt;/h2&gt;\n    &lt;p&gt;&lt;%= house.description %&gt;&lt;/p&gt;\n  &lt;/div&gt;\n&lt;% end %&gt;\n\n&lt;p&gt;&lt;%= paginate @houses %&gt;&lt;/p&gt;\n</code></pre>\n\n<p>house.rb - </p>\n\n<pre><code>class House &lt; ActiveRecord::Base\n    validates :title, presence: true\n    validates :price, presence: true\n    validates :description, presence: true\n    validates :image, presence: true\nend\n</code></pre>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 8378, "user_id": 2076787, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2bfe965ab5ef94a0568bc61c36b46d4c?s=128&d=identicon&r=PG", "display_name": "D-side", "link": "https://stackoverflow.com/users/2076787/d-side"}, "edited": false, "score": 0, "creation_date": 1423051301, "post_id": 28320786, "comment_id": 44989916, "body": "Interesting. What is the system load (CPU, disk) in both cases?"}, {"owner": {"reputation": 21, "user_id": 3779340, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0abfa745cbc1c4bc5226e6bcab3b71df?s=128&d=identicon&r=PG&f=1", "display_name": "user3779340", "link": "https://stackoverflow.com/users/3779340/user3779340"}, "reply_to_user": {"reputation": 8378, "user_id": 2076787, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2bfe965ab5ef94a0568bc61c36b46d4c?s=128&d=identicon&r=PG", "display_name": "D-side", "link": "https://stackoverflow.com/users/2076787/d-side"}, "edited": false, "score": 0, "creation_date": 1423115999, "post_id": 28320786, "comment_id": 45020127, "body": "CPU load 50% and disk load 38%"}, {"owner": {"reputation": 8378, "user_id": 2076787, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2bfe965ab5ef94a0568bc61c36b46d4c?s=128&d=identicon&r=PG", "display_name": "D-side", "link": "https://stackoverflow.com/users/2076787/d-side"}, "edited": false, "score": 0, "creation_date": 1423124958, "post_id": 28320786, "comment_id": 45023819, "body": "Is that in both cases? I meant to find out whether the load is equal or differs substantially. The latter could mean that Windows Scheduler executes the task with minimum amount of resources so that the impact on the system is not noticeable."}, {"owner": {"reputation": 21, "user_id": 3779340, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0abfa745cbc1c4bc5226e6bcab3b71df?s=128&d=identicon&r=PG&f=1", "display_name": "user3779340", "link": "https://stackoverflow.com/users/3779340/user3779340"}, "reply_to_user": {"reputation": 8378, "user_id": 2076787, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2bfe965ab5ef94a0568bc61c36b46d4c?s=128&d=identicon&r=PG", "display_name": "D-side", "link": "https://stackoverflow.com/users/2076787/d-side"}, "edited": false, "score": 0, "creation_date": 1423814457, "post_id": 28320786, "comment_id": 45309779, "body": "in both cases CPU and Memory load is same. But it is taking time differently in both cases."}], "owner": {"reputation": 21, "user_id": 3779340, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0abfa745cbc1c4bc5226e6bcab3b71df?s=128&d=identicon&r=PG&f=1", "display_name": "user3779340", "link": "https://stackoverflow.com/users/3779340/user3779340"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 50, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1423051151, "creation_date": 1423050989, "last_edit_date": 1423051151, "question_id": 28320786, "link": "https://stackoverflow.com/questions/28320786/archive-tar-minitar-issue-in-ruby", "title": "archive tar minitar issue in ruby", "body": "<p>I am using ruby 1.9 on windows server. I'm using archive/tar/minitar to\nuntar .tar file of size 45MB.</p>\n\n<p>following code:</p>\n\n<pre><code>Minitar.unpack(\"../Data/#{@circle_name}/#{@process_date}/#{@process_time}/#{ip_Dir}/#{enb_tar_file_name}\",\"../Data/#{@circle_name}/#{@process_date}/#{@process_time}/#{ip_Dir}\")\n</code></pre>\n\n<p>when code is called from command prompt it is working file,takes few\nseconds.\nbut from windows scheduler it is taking more than 10 minutes some times\n1 hour to untar the same file.</p>\n\n<p>Anybody has idea of the problem?</p>\n"}, {"tags": ["ruby", "ruby-on-rails-4"], "answers": [{"comments": [{"owner": {"reputation": 13886, "user_id": 1150534, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/043af7a7ebf89595bebc3364f933d648?s=128&d=identicon&r=PG", "display_name": "Richlewis", "link": "https://stackoverflow.com/users/1150534/richlewis"}, "edited": false, "score": 0, "creation_date": 1423051190, "post_id": 28320780, "comment_id": 44989857, "body": "he hasn&#39;t got a rating of 50 to place a comment.. so @ManuGambino please refrain from using the answer button as a comment loader"}, {"owner": {"reputation": 64, "user_id": 4478673, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-g_YLhbKZXe8/AAAAAAAAAAI/AAAAAAAAAIg/ZdFlOJ3Kq1Y/photo.jpg?sz=128", "display_name": "Manu Gambino", "link": "https://stackoverflow.com/users/4478673/manu-gambino"}, "edited": false, "score": 0, "creation_date": 1423051231, "post_id": 28320780, "comment_id": 44989881, "body": "I know :(. I dont have the rep yet"}], "tags": [], "owner": {"reputation": 64, "user_id": 4478673, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-g_YLhbKZXe8/AAAAAAAAAAI/AAAAAAAAAIg/ZdFlOJ3Kq1Y/photo.jpg?sz=128", "display_name": "Manu Gambino", "link": "https://stackoverflow.com/users/4478673/manu-gambino"}, "is_accepted": true, "score": 1, "last_activity_date": 1423051799, "last_edit_date": 1423051799, "creation_date": 1423050982, "answer_id": 28320780, "question_id": 28320663, "link": "https://stackoverflow.com/questions/28320663/constructing-a-query-in-a-class-method/28320780#28320780", "title": "Constructing a query in a class method", "body": "<p>Please update question with model rb files and an example of when it fails the validation, I dont understand what you are trying to do yet</p>\n\n<p><strong>Update</strong></p>\n\n<p>Replace self with Document</p>\n\n<pre><code>Document.where(skill_id: skill_id).count\n</code></pre>\n\n<p>In that context self is not the clase but a Document object </p>\n"}], "owner": {"reputation": 13886, "user_id": 1150534, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/043af7a7ebf89595bebc3364f933d648?s=128&d=identicon&r=PG", "display_name": "Richlewis", "link": "https://stackoverflow.com/users/1150534/richlewis"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 19, "favorite_count": 0, "accepted_answer_id": 28320780, "answer_count": 1, "score": 0, "last_activity_date": 1423051799, "creation_date": 1423050587, "last_edit_date": 1423051663, "question_id": 28320663, "link": "https://stackoverflow.com/questions/28320663/constructing-a-query-in-a-class-method", "title": "Constructing a query in a class method", "body": "<p>I am looking to perform a query on a model of mine (postgresql) as a validation.</p>\n\n<p>I want to count the number of times a paticular skill_id occurs in the model, and if it is <code>&gt;=</code> 3 for example then validation fails</p>\n\n<p>so far I have</p>\n\n<pre><code>class Document &lt; ActiveRecord::Base\n mount_uploader :media, MediaUploader\n belongs_to :user\n belongs_to :skill\n\n validate :num_of_images\n\n def num_of_images\n   skill_id = self.skill_id\n   number = self.count(skill_id: skill_id)\n end\nend\n</code></pre>\n\n<p>but i get </p>\n\n<pre><code>(undefined method `count' for 1:Fixnum):\n</code></pre>\n\n<p>What method/query do i need to use to count the records</p>\n\n<p>Thanks </p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4", "rbenv", "multiple-versions"], "comments": [{"owner": {"reputation": 14010, "user_id": 3109182, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/a4b305f0077055b4fdcf715067775d5a?s=128&d=identicon&r=PG", "display_name": "Anthony", "link": "https://stackoverflow.com/users/3109182/anthony"}, "edited": false, "score": 2, "creation_date": 1423056582, "post_id": 28320419, "comment_id": 44993084, "body": "in your application folder if you type <code>which ruby</code> do you get the rbenv ruby or the system ruby?"}, {"owner": {"reputation": 1764, "user_id": 970673, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/94b2447e847a20d32c93c5e77e66b041?s=128&d=identicon&r=PG", "display_name": "Jordan Morris", "link": "https://stackoverflow.com/users/970673/jordan-morris"}, "reply_to_user": {"reputation": 14010, "user_id": 3109182, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/a4b305f0077055b4fdcf715067775d5a?s=128&d=identicon&r=PG", "display_name": "Anthony", "link": "https://stackoverflow.com/users/3109182/anthony"}, "edited": false, "score": 0, "creation_date": 1423166865, "post_id": 28320419, "comment_id": 45049856, "body": "@Anthony <code>which ruby</code> gives <code>&#47;home&#47;jordanmorris&#47;.rbenv&#47;shims&#47;ruby</code>"}, {"owner": {"reputation": 81552, "user_id": 562459, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/V3UR9.png?s=128&g=1", "display_name": "Mike Sherrill &#39;Cat Recall&#39;", "link": "https://stackoverflow.com/users/562459/mike-sherrill-cat-recall"}, "edited": false, "score": 0, "creation_date": 1423180874, "post_id": 28320419, "comment_id": 45056083, "body": "For testing, can you add the line <code>ruby &#39;2.1.2&#39;</code> to your Gemfile, run <code>rails server</code>, and check the application&#39;s environment again?"}, {"owner": {"reputation": 81552, "user_id": 562459, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/V3UR9.png?s=128&g=1", "display_name": "Mike Sherrill &#39;Cat Recall&#39;", "link": "https://stackoverflow.com/users/562459/mike-sherrill-cat-recall"}, "edited": false, "score": 0, "creation_date": 1423181064, "post_id": 28320419, "comment_id": 45056135, "body": "Is <code>~&#47;.rbenv&#47;shims</code> the <a href=\"https://github.com/sstephenson/rbenv#understanding-path\" rel=\"nofollow noreferrer\">first directory in your path</a>?"}, {"owner": {"reputation": 1764, "user_id": 970673, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/94b2447e847a20d32c93c5e77e66b041?s=128&d=identicon&r=PG", "display_name": "Jordan Morris", "link": "https://stackoverflow.com/users/970673/jordan-morris"}, "reply_to_user": {"reputation": 81552, "user_id": 562459, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/V3UR9.png?s=128&g=1", "display_name": "Mike Sherrill &#39;Cat Recall&#39;", "link": "https://stackoverflow.com/users/562459/mike-sherrill-cat-recall"}, "edited": false, "score": 0, "creation_date": 1423192116, "post_id": 28320419, "comment_id": 45059061, "body": "@MikeSherrill&#39;CatRecall&#39; The shims path is at the start of my $PATH. Interesting - when I add <code>ruby&#39;2.1.2&#39;</code> to my Gemfile, <code>rails server</code> fails with <code>Your Ruby version is 1.9.3, but your Gemfile specified 2.1.2</code>"}, {"owner": {"reputation": 1764, "user_id": 970673, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/94b2447e847a20d32c93c5e77e66b041?s=128&d=identicon&r=PG", "display_name": "Jordan Morris", "link": "https://stackoverflow.com/users/970673/jordan-morris"}, "edited": false, "score": 0, "creation_date": 1423192416, "post_id": 28320419, "comment_id": 45059145, "body": "I created another fresh application with <code>rails new</code>, and I found this file in a file called <code>rails</code> in <code>[application_folder]&#47;bin&#47;</code>. It contains the following:    <code>#!&#47;usr&#47;bin&#47;env ruby1.9.1</code>   <code>begin</code>   <code>load File.expand_path(&quot;..&#47;spring&quot;, __FILE__)</code>   <code>rescue LoadError</code>   <code>end</code>   <code>APP_PATH = File.expand_path(&#39;..&#47;..&#47;config&#47;application&#39;,  __FILE__)</code>   <code>require_relative &#39;..&#47;config&#47;boot&#39;</code>   <code>require &#39;rails&#47;commands&#39;</code>"}, {"owner": {"reputation": 81552, "user_id": 562459, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/V3UR9.png?s=128&g=1", "display_name": "Mike Sherrill &#39;Cat Recall&#39;", "link": "https://stackoverflow.com/users/562459/mike-sherrill-cat-recall"}, "edited": false, "score": 0, "creation_date": 1423194416, "post_id": 28320419, "comment_id": 45059661, "body": "Check all the sources at <a href=\"https://github.com/sstephenson/rbenv#choosing-the-ruby-version\" rel=\"nofollow noreferrer\">&quot;Choosing the Ruby version&quot;</a>. What do you have?"}, {"owner": {"reputation": 1764, "user_id": 970673, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/94b2447e847a20d32c93c5e77e66b041?s=128&d=identicon&r=PG", "display_name": "Jordan Morris", "link": "https://stackoverflow.com/users/970673/jordan-morris"}, "reply_to_user": {"reputation": 81552, "user_id": 562459, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/V3UR9.png?s=128&g=1", "display_name": "Mike Sherrill &#39;Cat Recall&#39;", "link": "https://stackoverflow.com/users/562459/mike-sherrill-cat-recall"}, "edited": false, "score": 0, "creation_date": 1423207828, "post_id": 28320419, "comment_id": 45063797, "body": "Let us <a href=\"http://chat.stackoverflow.com/rooms/70367/discussion-between-jordan-morris-and-mike-sherrill-cat-recall\">continue this discussion in chat</a>."}], "answers": [{"tags": [], "owner": {"reputation": 1764, "user_id": 970673, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/94b2447e847a20d32c93c5e77e66b041?s=128&d=identicon&r=PG", "display_name": "Jordan Morris", "link": "https://stackoverflow.com/users/970673/jordan-morris"}, "is_accepted": true, "score": 0, "last_activity_date": 1423209124, "last_edit_date": 1495542511, "creation_date": 1423209124, "answer_id": 28360971, "question_id": 28320419, "link": "https://stackoverflow.com/questions/28320419/why-does-rails-server-welcome-aboard-site-report-a-different-ruby-version-to-rbe/28360971#28360971", "title": "Why does rails server Welcome Aboard site report a different ruby version to rbenv?", "body": "<p><a href=\"https://stackoverflow.com/a/21142991/970673\">This</a> answer helped me.</p>\n\n<p>The problem was that I installed rails using <code>sudo</code>.</p>\n\n<p>rbenv operates on a per-user basis. So, <code>rbenv install</code> installed ruby 2.1.2 for jordanmorris, whereas <code>sudo gem install rails</code> installed rails using the only version of ruby/gem installed for root (1.9.3).</p>\n\n<p>Afterwards, every time I ran <code>rbenv</code> or <code>ruby</code>, they used the expected rails version determined by rbenv, but every time I ran <code>rails new</code> or <code>rails server</code>, it would use the rails installed on top of ruby 1.9.3, that being the only instance of rails existing.</p>\n\n<p>I followed these steps to fix it:</p>\n\n<ol>\n<li>Uninstall rails and it's dependencies (just because I like to keep a tidy house).</li>\n<li>Install rails and it's dependencies WITHOUT using <code>sudo</code>.</li>\n<li>Run <code>rbenv rehash</code>.</li>\n<li>Regenerate a new application (<code>rails new</code>).</li>\n</ol>\n\n<p>The correct version now displays in the Welcome aboard -> About your application\u2019s environment page.</p>\n\n<p>Also note, the <code>rails new</code> command will create an application which uses spring. Consider installing <a href=\"https://github.com/ianheggie/rbenv-binstubs\" rel=\"nofollow noreferrer\">rbenv-binstubs</a> to avoid stub clashes with rbenv.</p>\n"}], "owner": {"reputation": 1764, "user_id": 970673, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/94b2447e847a20d32c93c5e77e66b041?s=128&d=identicon&r=PG", "display_name": "Jordan Morris", "link": "https://stackoverflow.com/users/970673/jordan-morris"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 70, "favorite_count": 0, "accepted_answer_id": 28360971, "answer_count": 1, "score": 2, "last_activity_date": 1423209124, "creation_date": 1423049873, "last_edit_date": 1423166903, "question_id": 28320419, "link": "https://stackoverflow.com/questions/28320419/why-does-rails-server-welcome-aboard-site-report-a-different-ruby-version-to-rbe", "title": "Why does rails server Welcome Aboard site report a different ruby version to rbenv?", "body": "<p>I am using rbenv on Debian. Debian came pre-installed with ruby 1.9.3. I installed rbenv and used it to install ruby 2.1.2. I then used <code>rails new</code> to make a fresh rails application.</p>\n\n<p><code>rbenv versions</code>  </p>\n\n<p>gives  </p>\n\n<pre><code>system\n* 2.1.2 (set by /home/jordanmorris/code/TestRail/.ruby-version)\n</code></pre>\n\n<p><code>rbenv global</code> gives <code>2.1.2</code><br>\n<code>rbenv local</code> (in the new application folder) gives <code>2.1.2</code><br>\n<code>ruby -v</code> gives <code>2.1.2</code><br>\n<code>which ruby</code> gives <code>/home/jordanmorris/.rbenv/shims/ruby</code></p>\n\n<p>However, when I use <code>rails server</code> (node.js), view the 'Welcome aboard site' and click \"About your application\u2019s environment\", it reports:<br>\n<code>Ruby version</code>  <code>1.9.3-p484 (x86_64-linux)</code></p>\n\n<p><strong>Why is this not displaying the version set with rbenv as expected, and is this a cause for concern?</strong></p>\n\n<p>I only have one version of rails installed, afaik, and it reports correctly (4.1.4).</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "edited": false, "score": 0, "creation_date": 1423049798, "post_id": 28319759, "comment_id": 44989122, "body": "You might want to have a look at the source of <a href=\"https://www.omniref.com/ruby/gems/activesupport/4.2.0/symbols/DateAndTime::Calculations\" rel=\"nofollow noreferrer\">ActiveSupport&#39;s DateAndTime::Calculations</a>. That module supports all the calculations you need."}], "answers": [{"tags": [], "owner": {"reputation": 271, "user_id": 4494123, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/pntxX.png?s=128&g=1", "display_name": "Andrius Buivydas", "link": "https://stackoverflow.com/users/4494123/andrius-buivydas"}, "is_accepted": false, "score": 0, "last_activity_date": 1423049643, "creation_date": 1423049643, "answer_id": 28320354, "question_id": 28319759, "link": "https://stackoverflow.com/questions/28319759/how-get-the-last-week-start-date-and-end-date-based-on-date-in-current-week-ruby/28320354#28320354", "title": "how get the last week start date and end date based on date in current week ruby", "body": "<p>Use Date#wday that tells with day of the week is for a given Date and then subtract accordinglly:</p>\n\n<pre><code>require 'date'\n\ndate = Date.parse(\"15-02-04\")\nmonday = date - (date.wday + 6) # 2015-01-26\nsunday = date - date.wday # 2015-02-01\n\ndate = Date.parse(\"15-02-27\")\nmonday = date - (date.wday + 6) # 2015-02-16\nsunday = date - date.wday # 2015-02-22\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1077, "user_id": 4269239, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/jTw9F.jpg?s=128&g=1", "display_name": "Sachin Gevariya", "link": "https://stackoverflow.com/users/4269239/sachin-gevariya"}, "is_accepted": true, "score": 3, "last_activity_date": 1423050045, "last_edit_date": 1423050045, "creation_date": 1423049667, "answer_id": 28320361, "question_id": 28319759, "link": "https://stackoverflow.com/questions/28319759/how-get-the-last-week-start-date-and-end-date-based-on-date-in-current-week-ruby/28320361#28320361", "title": "how get the last week start date and end date based on date in current week ruby", "body": "<p>You can try this way:</p>\n\n<pre><code>require 'date'\n=&gt; true\n\ndate = Date.today\n=&gt; #&lt;Date: 2015-02-04 ((2457058j,0s,0n),+0s,2299161j)&gt;\n\n# date.wday return week day\nend_date = date-date.wday\n=&gt; #&lt;Date: 2015-02-01 ((2457055j,0s,0n),+0s,2299161j)&gt;\n\nstart_date = date-date.wday-6\n=&gt; #&lt;Date: 2015-01-26 ((2457049j,0s,0n),+0s,2299161j)&gt;\n</code></pre>\n\n<p>For more operations you can refer this link <a href=\"http://ruby-doc.org/stdlib-2.2.0/libdoc/date/rdoc/Date.html\" rel=\"nofollow\">Ruby Doc.</a></p>\n"}, {"comments": [{"owner": {"reputation": 1077, "user_id": 4269239, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/jTw9F.jpg?s=128&g=1", "display_name": "Sachin Gevariya", "link": "https://stackoverflow.com/users/4269239/sachin-gevariya"}, "edited": false, "score": 0, "creation_date": 1423053952, "post_id": 28320827, "comment_id": 44991353, "body": "beginning_of_week is not working in <code>irb</code>. It will work with rails active support"}], "tags": [], "owner": {"reputation": 1262, "user_id": 3898284, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/RG11s.jpg?s=128&g=1", "display_name": "Mani David", "link": "https://stackoverflow.com/users/3898284/mani-david"}, "is_accepted": false, "score": 0, "last_activity_date": 1423060616, "last_edit_date": 1423060616, "creation_date": 1423051118, "answer_id": 28320827, "question_id": 28319759, "link": "https://stackoverflow.com/questions/28319759/how-get-the-last-week-start-date-and-end-date-based-on-date-in-current-week-ruby/28320827#28320827", "title": "how get the last week start date and end date based on date in current week ruby", "body": "<p>i have tried the below code, working fine.</p>\n\n<pre><code>monday = (Date.today.beginning_of_week - 7) # 2015-01-26\nsunday = (Date.today.end_of_week - 7) # 2015-02-01\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 29, "user_id": 8153850, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-x0c0p5dSPM4/AAAAAAAAAAI/AAAAAAAADck/gu5BjsCFYo4/photo.jpg?sz=128", "display_name": "Shivkant Dohaliya", "link": "https://stackoverflow.com/users/8153850/shivkant-dohaliya"}, "is_accepted": false, "score": 2, "last_activity_date": 1536823540, "creation_date": 1536823540, "answer_id": 52308579, "question_id": 28319759, "link": "https://stackoverflow.com/questions/28319759/how-get-the-last-week-start-date-and-end-date-based-on-date-in-current-week-ruby/52308579#52308579", "title": "how get the last week start date and end date based on date in current week ruby", "body": "<p><strong>You can try this way</strong></p>\n\n<pre><code>monday = (Date.today.beginning_of_week.last_week)\n\nsunday = (Date.today.beginning_of_week.last_week + 7)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 429, "user_id": 860048, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Veirg.jpg?s=128&g=1", "display_name": "Bhaveshkumar", "link": "https://stackoverflow.com/users/860048/bhaveshkumar"}, "is_accepted": false, "score": 1, "last_activity_date": 1603099871, "last_edit_date": 1603099871, "creation_date": 1603090016, "answer_id": 64422362, "question_id": 28319759, "link": "https://stackoverflow.com/questions/28319759/how-get-the-last-week-start-date-and-end-date-based-on-date-in-current-week-ruby/64422362#64422362", "title": "how get the last week start date and end date based on date in current week ruby", "body": "<ul>\n<li><p>First date of last week</p>\n<pre><code> Date.today.last_week.beginning_of_week\n</code></pre>\n</li>\n<li><p>Last date of last week</p>\n<pre><code> Date.today.last_week.at_end_of_week\n</code></pre>\n</li>\n</ul>\n"}], "owner": {"reputation": 1262, "user_id": 3898284, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/RG11s.jpg?s=128&g=1", "display_name": "Mani David", "link": "https://stackoverflow.com/users/3898284/mani-david"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2811, "favorite_count": 0, "accepted_answer_id": 28320361, "answer_count": 5, "score": 1, "last_activity_date": 1603099871, "creation_date": 1423047951, "question_id": 28319759, "link": "https://stackoverflow.com/questions/28319759/how-get-the-last-week-start-date-and-end-date-based-on-date-in-current-week-ruby", "title": "how get the last week start date and end date based on date in current week ruby", "body": "<p>how to get the last week start date and end date based on date in current week ruby (Monday - Sunday)</p>\n\n<p>Example: if date is 04-feb-15, then result should be start_date = Monday(26-jan-1015) end_date =  Sunday(1-feb-15)</p>\n\n<p>if date is 27-feb-15, , then result should be start_date = Monday(16-feb-1015) end_date = (22-feb-15)</p>\n"}, {"tags": ["ruby", "telnet"], "comments": [{"owner": {"reputation": 367, "user_id": 758028, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/048fcc2e639a056686bfa519e12886ae?s=128&d=identicon&r=PG", "display_name": "James", "link": "https://stackoverflow.com/users/758028/james"}, "edited": false, "score": 0, "creation_date": 1423048454, "post_id": 28319563, "comment_id": 44988391, "body": "Does the response always come back in the same structure or can the data shift?"}, {"owner": {"reputation": 3, "user_id": 1860082, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a2f02d9c50382fcf84b038999de1aaae?s=128&d=identicon&r=PG", "display_name": "aksarc", "link": "https://stackoverflow.com/users/1860082/aksarc"}, "reply_to_user": {"reputation": 367, "user_id": 758028, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/048fcc2e639a056686bfa519e12886ae?s=128&d=identicon&r=PG", "display_name": "James", "link": "https://stackoverflow.com/users/758028/james"}, "edited": false, "score": 0, "creation_date": 1423209854, "post_id": 28319563, "comment_id": 45064571, "body": "same structure is intended. I receive in same structure only, easy for comparing preset values."}], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 1860082, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a2f02d9c50382fcf84b038999de1aaae?s=128&d=identicon&r=PG", "display_name": "aksarc", "link": "https://stackoverflow.com/users/1860082/aksarc"}, "edited": false, "score": 0, "creation_date": 1423048845, "post_id": 28319961, "comment_id": 44988583, "body": "Thank you. it worked perfectly .split(&quot;\\n&quot;) gave me my required response"}, {"owner": {"reputation": 27685, "user_id": 610979, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/ku5ga.png?s=128&g=1", "display_name": "Frank Schmitt", "link": "https://stackoverflow.com/users/610979/frank-schmitt"}, "reply_to_user": {"reputation": 3, "user_id": 1860082, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a2f02d9c50382fcf84b038999de1aaae?s=128&d=identicon&r=PG", "display_name": "aksarc", "link": "https://stackoverflow.com/users/1860082/aksarc"}, "edited": false, "score": 0, "creation_date": 1423051484, "post_id": 28319961, "comment_id": 44990010, "body": "You&#39;re welcome. I&#39;ve added the argument value &quot;\\n&quot; to my answer (since it is necessary if the response contains spaces) - thanks for mentioning that."}, {"owner": {"reputation": 3, "user_id": 1860082, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a2f02d9c50382fcf84b038999de1aaae?s=128&d=identicon&r=PG", "display_name": "aksarc", "link": "https://stackoverflow.com/users/1860082/aksarc"}, "edited": false, "score": 0, "creation_date": 1423201855, "post_id": 28319961, "comment_id": 45061557, "body": "I have another question here. what data type will the array elements be of? I tried to compare each element with the matching string, it always fails."}, {"owner": {"reputation": 133, "user_id": 9224171, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/696dddca4ead8cdca1f07a75646c03bd?s=128&d=identicon&r=PG&f=1", "display_name": "Peter Core", "link": "https://stackoverflow.com/users/9224171/peter-core"}, "edited": false, "score": 0, "creation_date": 1530804700, "post_id": 28319961, "comment_id": 89371836, "body": "nearly what i need, but i dont want the trying 10.10.10.1 and connected to 10.10.10.1 in my logfile, just the response <i>after</i> the login"}, {"owner": {"reputation": 27685, "user_id": 610979, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/ku5ga.png?s=128&g=1", "display_name": "Frank Schmitt", "link": "https://stackoverflow.com/users/610979/frank-schmitt"}, "reply_to_user": {"reputation": 133, "user_id": 9224171, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/696dddca4ead8cdca1f07a75646c03bd?s=128&d=identicon&r=PG&f=1", "display_name": "Peter Core", "link": "https://stackoverflow.com/users/9224171/peter-core"}, "edited": false, "score": 0, "creation_date": 1530856949, "post_id": 28319961, "comment_id": 89388809, "body": "@PeterCore Please ask a separate question on StackOverflow for this."}], "tags": [], "owner": {"reputation": 27685, "user_id": 610979, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/ku5ga.png?s=128&g=1", "display_name": "Frank Schmitt", "link": "https://stackoverflow.com/users/610979/frank-schmitt"}, "is_accepted": true, "score": 1, "last_activity_date": 1423051395, "last_edit_date": 1423051395, "creation_date": 1423048440, "answer_id": 28319961, "question_id": 28319563, "link": "https://stackoverflow.com/questions/28319563/processing-response-from-telnet-command/28319961#28319961", "title": "Processing response from telnet command", "body": "<p>According to the <a href=\"http://www.ruby-doc.org/stdlib-2.0/libdoc/net/telnet/rdoc/Net/Telnet.html#method-i-cmd\" rel=\"nofollow\">documentation</a>, <code>cmd</code> returns a string containing the complete output. </p>\n\n<p>So you should be able to use <code>split</code> to get it as an array containing one string per line:</p>\n\n<pre><code>result = i.cmd(\"String\" =&gt; \"status\", \"Match\" =&gt; /a#/).split(\"\\n\")\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 1860082, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a2f02d9c50382fcf84b038999de1aaae?s=128&d=identicon&r=PG", "display_name": "aksarc", "link": "https://stackoverflow.com/users/1860082/aksarc"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 724, "favorite_count": 0, "accepted_answer_id": 28319961, "answer_count": 1, "score": 0, "last_activity_date": 1423051395, "creation_date": 1423047277, "last_edit_date": 1423048097, "question_id": 28319563, "link": "https://stackoverflow.com/questions/28319563/processing-response-from-telnet-command", "title": "Processing response from telnet command", "body": "<p>I telnet into my test device, and after logging in, issue a command which gives me ten lines of response. I want to assign these ten lines to an array or any data structures to validate the response. E.g., my response looks like below. I want to check bits and pieces within the list of lines. I might want to check <code>192</code>, <code>brown</code> and <code>0903</code>.</p>\n\n<blockquote>\n  <p>I have a 192 blocks of sand , which are <br> green brown<br> yellow is\n  a color of grain <br> 11 0909 0903<br></p>\n</blockquote>\n\n<p>Following is my sample code. If I assign the result as array, all data are assigned as first element.</p>\n\n<pre><code>require 'net/telnet'\n\ni = Net::Telnet::new(\"Host\" =&gt; '192.111.214.16',\n  \"Port\" =&gt; 23,\n  \"Output_log\" =&gt; \"output.log\", # default: nil (no output)\n  \"Dump_log\"   =&gt; \"dump.log\",   # default: nil (no output)\n  \"Prompt\"     =&gt; /[#&gt;]/ , # default: /[$%#&gt;] \\z/n\n  \"Telnetmode\" =&gt; true,         # default: true\n  \"Timeout\"    =&gt; 100,           # default: 10\n)\n\ni.login(\"admin\", \"pass\") { |c| print c }\nresult = i.cmd(\"String\" =&gt; \"status\", \"Match\" =&gt; /a#/)\nprint result\n</code></pre>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "edited": false, "score": 0, "creation_date": 1423047114, "post_id": 28319423, "comment_id": 44987624, "body": "Because it is much easier to read?"}], "answers": [{"tags": [], "owner": {"reputation": 23477, "user_id": 660921, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/3d53595cb2a89131fb3be7b55b3a9ef0?s=128&d=identicon&r=PG", "display_name": "Martin Tournoij", "link": "https://stackoverflow.com/users/660921/martin-tournoij"}, "is_accepted": true, "score": 1, "last_activity_date": 1423047156, "creation_date": 1423047156, "answer_id": 28319509, "question_id": 28319423, "link": "https://stackoverflow.com/questions/28319423/difference-between-11-223-and-11223/28319509#28319509", "title": "Difference between 11_223 and 11223?", "body": "<p>When you write 1 million in numbers, you would usually do:</p>\n\n<p>1,000,000</p>\n\n<p>and not:</p>\n\n<p>1000000</p>\n\n<p>To make it more readable.</p>\n\n<p>You can do the same thing in Ruby with an underscore:</p>\n\n<p>1_000_000</p>\n\n<p>Ruby can't use the <code>,</code>, because that's already used in other things (like function arguments), so the \"strange\" underscore character is used.</p>\n"}], "owner": {"reputation": 4243, "user_id": 320104, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/afc20be40eeba70286e8de0d49ba3260?s=128&d=identicon&r=PG", "display_name": "WBAR", "link": "https://stackoverflow.com/users/320104/wbar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 54, "favorite_count": 0, "closed_date": 1423047205, "accepted_answer_id": 28319509, "answer_count": 1, "score": -1, "last_activity_date": 1423047788, "creation_date": 1423046892, "last_edit_date": 1423047788, "question_id": 28319423, "link": "https://stackoverflow.com/questions/28319423/difference-between-11-223-and-11223", "closed_reason": "Duplicate", "title": "Difference between 11_223 and 11223?", "body": "<p>What is difference and why did someone write number with underscore?</p>\n\n<pre><code>irb(main):001:0&gt; a = 11_223\n=&gt; 11223\nirb(main):002:0&gt; b = 11223\n=&gt; 11223\nirb(main):003:0&gt; a == b\n=&gt; true\nirb(main):004:0&gt; a === b\n=&gt; true\nirb(main):005:0&gt; 11_223 === 11223\n=&gt; true\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby"], "answers": [{"comments": [{"owner": {"reputation": 231, "user_id": 3668616, "user_type": "registered", "accept_rate": 54, "profile_image": "https://i.stack.imgur.com/ux9hS.jpg?s=128&g=1", "display_name": "RubyMax", "link": "https://stackoverflow.com/users/3668616/rubymax"}, "edited": false, "score": 0, "creation_date": 1423046339, "post_id": 28319141, "comment_id": 44987147, "body": "A developer I&#39;m working with has put it together, but I just want to add some tweaks. So I won&#39;t be using the Simple Form much, I&#39;m hoping to sort 1. and 2. today and then spend a bit of time going forward building my foundations with forms. Thanks for the input Lukasz."}], "tags": [], "owner": {"reputation": 2707, "user_id": 1540290, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/02f9d39d23f7ce35ec2cc4332ac1dafc?s=128&d=identicon&r=PG", "display_name": "Lukasz Muzyka", "link": "https://stackoverflow.com/users/1540290/lukasz-muzyka"}, "is_accepted": false, "score": 0, "last_activity_date": 1423046076, "last_edit_date": 1495542037, "creation_date": 1423046076, "answer_id": 28319141, "question_id": 28319045, "link": "https://stackoverflow.com/questions/28319045/rails-form-helpers-password-confirmation/28319141#28319141", "title": "Rails Form Helpers, Password Confirmation", "body": "<p>My first advise would be not to use Simple Form if you're not familiar with form builder. It's a simplification of something that you haven't mastered and it will give you more trouble than benefit - hence 1,2</p>\n\n<p>Re:3 check this out: <a href=\"https://stackoverflow.com/questions/16875392/add-twitter-bootstrap-icon-to-input-box\">Add Twitter Bootstrap icon to Input box</a></p>\n"}], "owner": {"reputation": 231, "user_id": 3668616, "user_type": "registered", "accept_rate": 54, "profile_image": "https://i.stack.imgur.com/ux9hS.jpg?s=128&g=1", "display_name": "RubyMax", "link": "https://stackoverflow.com/users/3668616/rubymax"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 457, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1423046076, "creation_date": 1423045746, "question_id": 28319045, "link": "https://stackoverflow.com/questions/28319045/rails-form-helpers-password-confirmation", "title": "Rails Form Helpers, Password Confirmation", "body": "<p>I'm currently working on a Ruby on Rails project and I'm working with a Form Helper, which I'm currently struggling with. </p>\n\n<ol>\n<li>I'm looking to learn the best method to input a password confirmation into a signup form using Rails 4.</li>\n<li>Upon running the View's code from below there are labels for each field. How do I remove these and just leave the input fields?</li>\n<li><p>How do you input icons for fields inside the &lt;%= %> tags?</p>\n\n<pre><code>                &lt;div class=\"col-md-6\" id=\"signup_form\"&gt; &lt;%= simple_form_for(resource, :as =&gt; resource_name, :url =&gt; registration_path(resource_name), :format =&gt; :js, :remote =&gt; true) do |f| %&gt;\n                    &lt;%= f.error_notification %&gt;\n                    &lt;%= f.input :name, :placeholder =&gt; \"Name\" %&gt;\n                    &lt;%= f.input :email, :placeholder =&gt; \"Email Address\" %&gt;\n                    &lt;%= f.input :password, :placeholder =&gt; \"Password\" %&gt;\n                    &lt;%= f.input :password_confirm, :placeholder=&gt; \"Confirm Password\" %&gt;\n\n                    &lt;div class=\"form-actions\" style=\"margin-bottom: 15px\"&gt;\n                        &lt;%= f.button :submit, \"Create Account\", :class =&gt; \"btn btn-primary btn-custom-red\" %&gt;\n\n                    &lt;/div&gt;\n                &lt;% end %&gt;\n            &lt;/div&gt;\n</code></pre></li>\n</ol>\n\n<p>Thanks for your time.</p>\n"}, {"tags": ["ruby", "web-scraping", "nokogiri", "net-http", "open-uri"], "comments": [{"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 1, "creation_date": 1423161310, "post_id": 28318926, "comment_id": 45046659, "body": "Welcome to Stack Overflow. It looks like you need help asking questions. When you ask a question like this, we need to see a minimal example of your code because that is worth a whole lot more than a description alone. Also, your title says you&#39;re using Net::HTTP, but the text says you&#39;re using OpenURI to &quot;scrape&quot; the page. Neither Net::HTTP or OpenURI do scraping but they do allow you to get a page. Clearly and consistently explaining what you are doing and showing an example will help you get good answers and up votes. Not doing that will get you down votes or your question closed."}], "answers": [{"comments": [{"owner": {"reputation": 353, "user_id": 1313079, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/1239965e99e05ed3d976bdcabc78f417?s=128&d=identicon&r=PG", "display_name": "leonidus", "link": "https://stackoverflow.com/users/1313079/leonidus"}, "edited": false, "score": 0, "creation_date": 1423049688, "post_id": 28319722, "comment_id": 44989063, "body": "How can I use it with Net::Http.get() request. I&#39;m using nokogiri to parse the html and net/http to bring it."}, {"owner": {"reputation": 353, "user_id": 1313079, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/1239965e99e05ed3d976bdcabc78f417?s=128&d=identicon&r=PG", "display_name": "leonidus", "link": "https://stackoverflow.com/users/1313079/leonidus"}, "edited": false, "score": 0, "creation_date": 1423050085, "post_id": 28319722, "comment_id": 44989242, "body": "Never mind, I got it, I had to use post method to use headers."}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "reply_to_user": {"reputation": 353, "user_id": 1313079, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/1239965e99e05ed3d976bdcabc78f417?s=128&d=identicon&r=PG", "display_name": "leonidus", "link": "https://stackoverflow.com/users/1313079/leonidus"}, "edited": false, "score": 2, "creation_date": 1423050163, "post_id": 28319722, "comment_id": 44989282, "body": "You said in your question that you&#39;re <i>&quot;using open-uri&quot;</i>. However, the documentation for <code>Net:HTTP</code> contains a section <a href=\"http://ruby-doc.org/stdlib-2.2.0/libdoc/net/http/rdoc/Net/HTTP.html#class-Net::HTTP-label-Setting+Headers\" rel=\"nofollow noreferrer\">Setting Headers</a>, you&#39;ve probably overlooked it."}], "tags": [], "owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "is_accepted": true, "score": 3, "last_activity_date": 1423048485, "last_edit_date": 1423048485, "creation_date": 1423047808, "answer_id": 28319722, "question_id": 28318926, "link": "https://stackoverflow.com/questions/28318926/net-http-automatically-redirects-webpage-to-another-language/28319722#28319722", "title": "net/http automatically redirects webpage to another language", "body": "<p>This is called <a href=\"http://en.wikipedia.org/wiki/Content_negotiation\" rel=\"nofollow\">content negotiation</a> - the web server redirects based on your request. <code>pt</code> (Portuguese) seems to be the default: (at least from my location)</p>\n\n<pre class=\"lang-bash prettyprint-override\"><code>$ curl -I https://www.zomato.com/grande-lisboa/fu-hao-massam%C3%A1\nHTTP/1.1 301 Moved Permanently\nSet-Cookie: zl=pt; ...\nLocation: https://www.zomato.com/pt/grande-lisboa/fu-hao-massam%C3%A1\n</code></pre>\n\n<p>You can request another language by sending an <code>Accept-Language</code> header. Here's the answer for <code>Accept-Language: es</code> (Spanish):</p>\n\n<pre class=\"lang-bash prettyprint-override\"><code>$ curl -I https://www.zomato.com/grande-lisboa/fu-hao-massam%C3%A1 -H \"Accept-Language: es\"\nHTTP/1.1 301 Moved Permanently\nSet-Cookie: zl=es_cl; ...\nLocation: https://www.zomato.com/es/grande-lisboa/fu-hao-massam%C3%A1\n</code></pre>\n\n<p>And here's the answer for <code>Accept-Language: en</code> (English):</p>\n\n<pre class=\"lang-bash prettyprint-override\"><code>$ curl -I https://www.zomato.com/grande-lisboa/fu-hao-massam%C3%A1 -H \"Accept-Language: en\"\nHTTP/1.1 200 OK\nSet-Cookie: zl=en; ...\n</code></pre>\n\n<p>This seems to be the resource you've been looking for.</p>\n\n<p>In Ruby you'd use:</p>\n\n<pre><code>require 'nokogiri'\nrequire 'open-uri'\n\nurl = 'https://www.zomato.com/grande-lisboa/fu-hao-massam%C3%A1'\nheaders = {'Accept-Language' =&gt; 'en'}\n\ndoc = Nokogiri::HTML(open(url, headers))\ndoc.at('html')[:lang]\n#=&gt; \"en\"\n</code></pre>\n"}], "owner": {"reputation": 353, "user_id": 1313079, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/1239965e99e05ed3d976bdcabc78f417?s=128&d=identicon&r=PG", "display_name": "leonidus", "link": "https://stackoverflow.com/users/1313079/leonidus"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 165, "favorite_count": 0, "accepted_answer_id": 28319722, "answer_count": 1, "score": 0, "last_activity_date": 1449064354, "creation_date": 1423045415, "last_edit_date": 1449064354, "question_id": 28318926, "link": "https://stackoverflow.com/questions/28318926/net-http-automatically-redirects-webpage-to-another-language", "title": "net/http automatically redirects webpage to another language", "body": "<p>I'm trying to use <code>open-uri</code> to scrape the data from: </p>\n\n<pre><code>https://www.zomato.com/grande-lisboa/fu-hao-massam\u00e1\n</code></pre>\n\n<p>But, the website is automatically redirecting to:</p>\n\n<pre><code>https://www.zomato.com/pt/grande-lisboa/fu-hao-massam\u00e1\n</code></pre>\n\n<p>I don't want the spanish version. I want the english one. How do I tell ruby to stop doing that?</p>\n"}, {"tags": ["ruby", "rspec"], "owner": {"reputation": 8597, "user_id": 326543, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/f882e1ef33bcbefabf8c2f9463fb1f7f?s=128&d=identicon&r=PG", "display_name": "Srikanth Venugopalan", "link": "https://stackoverflow.com/users/326543/srikanth-venugopalan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 61, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1423045743, "creation_date": 1423045213, "question_id": 28318844, "link": "https://stackoverflow.com/questions/28318844/rspec-expectations-on-block", "title": "rspec expectations on block", "body": "<p>I have the below code under test:</p>\n\n<pre><code>class MethodCache\n    @@methods=Hash.new\n\n    def self.add_method(name, &amp;block)\n        @@methods[name]=block\n    end\n\n    def self.get_method(name)\n        @@methods[name]\n    end\nend\n</code></pre>\n\n<p>Now my spec looks like this:</p>\n\n<pre><code>describe MethodCache do\n    subject {MethodCache}\n    foo_block = -&gt;{ puts \"foo\"}\n    it \".get_method\" do\n        subject.add_method \"foo\", &amp;foo_block\n        # does not work\n        # expect(subject.get_method(\"foo\").to be &amp;foo_block \n\n        # should syntax works\n        subject.get_method(\"foo\").should be foo_block\n\n    end\nend\n</code></pre>\n\n<p>I am trying to stay away from <code>should</code> syntax and use the <code>expect</code> syntax of RSpec. However it does not work in this case.</p>\n\n<p><code>expect(subject.get_method(\"foo\").to be &amp;foo_block</code> fails saying <code>wrong number of arguments</code>. I guess this is because the expectation block is treated as a block argument.</p>\n\n<p><code>expect(subject.get_method(\"foo\").to be foo_block</code> (without the '&amp;') does not work either. It says, the matcher expects a value and not argument.</p>\n\n<p>What am I missing here?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "regex", "railstutorial.org"], "answers": [{"comments": [{"owner": {"reputation": 1106, "user_id": 2805144, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/45e65bf377dfc11fed59d677f86a8288?s=128&d=identicon&r=PG&f=1", "display_name": "Virge Assault", "link": "https://stackoverflow.com/users/2805144/virge-assault"}, "edited": false, "score": 0, "creation_date": 1423045635, "post_id": 28318825, "comment_id": 44986731, "body": "This worked, thank you.  I will look into normalizing the input in future iterations.  I would like to eventually have the form have 3 separate input spaces for the phone number so I don&#39;t have to worry about - or . characters, just not sure how to do that in rails right now."}], "tags": [], "owner": {"reputation": 163714, "user_id": 123527, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/99e0b39c091e10d9c7d4452a34ca52dc?s=128&d=identicon&r=PG", "display_name": "Simone Carletti", "link": "https://stackoverflow.com/users/123527/simone-carletti"}, "is_accepted": true, "score": 6, "last_activity_date": 1423045169, "creation_date": 1423045169, "answer_id": 28318825, "question_id": 28318736, "link": "https://stackoverflow.com/questions/28318736/phone-number-regex-in-ruby-anchor-error-with/28318825#28318825", "title": "Phone Number Regex in Ruby -- Anchor error with ^$", "body": "<p>The issue is at this line</p>\n\n<pre><code>VALID_PHONE_NUMBER_REGEX = /^(\\+\\d{1,2}\\s)?\\(?\\d{3}\\)?[\\s.-]?\\d{3}[\\s.-]?\\d{4}$/\n</code></pre>\n\n<p>it should be changed to</p>\n\n<pre><code>VALID_PHONE_NUMBER_REGEX = /\\A(\\+\\d{1,2}\\s)?\\(?\\d{3}\\)?[\\s.-]?\\d{3}[\\s.-]?\\d{4}\\z/\n</code></pre>\n\n<p>Personally, I would suggest to avoid trying to use a single regex to validate all those formats. Either group similar formats, and use different regexps, or normalize the input and validate a few formats.</p>\n\n<p>You may also want to <a href=\"https://github.com/floere/phony\" rel=\"noreferrer\">have a look at Phony</a>.</p>\n"}], "owner": {"reputation": 1106, "user_id": 2805144, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/45e65bf377dfc11fed59d677f86a8288?s=128&d=identicon&r=PG&f=1", "display_name": "Virge Assault", "link": "https://stackoverflow.com/users/2805144/virge-assault"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 7087, "favorite_count": 1, "accepted_answer_id": 28318825, "answer_count": 1, "score": 1, "last_activity_date": 1423045169, "creation_date": 1423044855, "question_id": 28318736, "link": "https://stackoverflow.com/questions/28318736/phone-number-regex-in-ruby-anchor-error-with", "title": "Phone Number Regex in Ruby -- Anchor error with ^$", "body": "<p>I'm trying to validate user phone numbers in Ruby with the following format:</p>\n\n<pre><code>123-456-7890\n(123) 456-7890\n123 456 7890\n123.456.7890\n+91 (123) 456-7890  \n</code></pre>\n\n<p>I used the following regex:</p>\n\n<pre><code>/^(\\+\\d{1,2}\\s)?\\(?\\d{3}\\)?[\\s.-]?\\d{3}[\\s.-]?\\d{4}$/\n</code></pre>\n\n<p>And got this error when trying to create a user in the rails console:</p>\n\n<p><strong>ArgumentError: The provided regular expression is using multiline anchors (^ or $), which may present a security risk. Did you mean to use \\A and \\z, or forgot to add the :multiline => true option?</strong></p>\n\n<p>I know there are gems for this but I would like to create the user model myself, making the phone number validation similar to the email:</p>\n\n<p><strong>User.rb</strong></p>\n\n<pre><code>class User &lt; ActiveRecord::Base\n  before_save { self.email = email.downcase }\n  validates :name, presence: true, length: { maximum: 50 }\n  VALID_EMAIL_REGEX = /\\A[\\w+\\-.]+@[a-z\\d\\-.]+\\.[a-z]+\\z/i\n  validates :email, presence: true, length: { maximum: 255 },\n                    format: { with: VALID_EMAIL_REGEX },\n                    uniqueness: { case_sensitive: false }\n  VALID_PHONE_NUMBER_REGEX = /^(\\+\\d{1,2}\\s)?\\(?\\d{3}\\)?[\\s.-]?\\d{3}[\\s.-]?\\d{4}$/\n  validates :phone_number, presence: true, length: {maximum: 15},\n                    format: { with: VALID_PHONE_NUMBER_REGEX }\n  has_secure_password\n  validates :password, length: { minimum: 6 }\nend\n</code></pre>\n\n<p>I've tried switching the anchors to \\A and \\z because that's what it seems to want me to do, but I cannot get the regex to accept the range of phone number inputs I want.  How can I fix the regex?</p>\n"}, {"tags": ["ruby", "twitter-bootstrap", "sass", "compass"], "answers": [{"comments": [{"owner": {"reputation": 3301, "user_id": 3466235, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/NXA6S.jpg?s=128&g=1", "display_name": "Tanasos", "link": "https://stackoverflow.com/users/3466235/tanasos"}, "edited": false, "score": 0, "creation_date": 1423051405, "post_id": 28318224, "comment_id": 44989969, "body": "Yes, but I don&#39;t have the _bootsrap.scss file, which includes the Core variables,resets and core css that you listed above. Do I have to manually create it?"}, {"owner": {"reputation": 3301, "user_id": 3466235, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/NXA6S.jpg?s=128&g=1", "display_name": "Tanasos", "link": "https://stackoverflow.com/users/3466235/tanasos"}, "edited": false, "score": 0, "creation_date": 1423051821, "post_id": 28318224, "comment_id": 44990217, "body": "I downloaded the zipped assets from bootstraps website. They seem to include the missing files that compass does not create. So the way to do this is to create a compass project with bootstrap properties and then include the other files from the original Assets from the Bootstrap port?"}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "reply_to_user": {"reputation": 3301, "user_id": 3466235, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/NXA6S.jpg?s=128&g=1", "display_name": "Tanasos", "link": "https://stackoverflow.com/users/3466235/tanasos"}, "edited": false, "score": 0, "creation_date": 1423051984, "post_id": 28318224, "comment_id": 44990303, "body": "@user3466235 the files comes with the <a href=\"https://github.com/twbs/bootstrap-sass\" rel=\"nofollow noreferrer\">bootstrap-sass</a> gem and the gem is required from within <code>config.rb</code>. Do you get any error messages because of missing files?"}, {"owner": {"reputation": 3301, "user_id": 3466235, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/NXA6S.jpg?s=128&g=1", "display_name": "Tanasos", "link": "https://stackoverflow.com/users/3466235/tanasos"}, "edited": false, "score": 0, "creation_date": 1423059582, "post_id": 28318224, "comment_id": 44995046, "body": "No, but all of the bootstrap content that I mentioned above is missing when I simply create the project with CMD line. I added the _bootstrap.scss and the other files manually"}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "reply_to_user": {"reputation": 3301, "user_id": 3466235, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/NXA6S.jpg?s=128&g=1", "display_name": "Tanasos", "link": "https://stackoverflow.com/users/3466235/tanasos"}, "edited": false, "score": 1, "creation_date": 1423060628, "post_id": 28318224, "comment_id": 44995756, "body": "Not sure if I understand your question. The bootstrap-sass gem is a library containing all files from Bootstrap so you <i>don&#39;t</i> have to include them manually in every single project. You simply <code>require &quot;bootstrap-sass&quot;</code> and <code>@import &quot;bootstrap&quot;</code>, that&#39;s all."}, {"owner": {"reputation": 3301, "user_id": 3466235, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/NXA6S.jpg?s=128&g=1", "display_name": "Tanasos", "link": "https://stackoverflow.com/users/3466235/tanasos"}, "edited": false, "score": 0, "creation_date": 1423073998, "post_id": 28318224, "comment_id": 45004644, "body": "So, You mean that, even if the _bootstrap.scss file and the other files are not present in my folder, Ruby includes them while compiling the sass into css?"}], "tags": [], "owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "is_accepted": true, "score": 2, "last_activity_date": 1423043307, "creation_date": 1423043307, "answer_id": 28318224, "question_id": 28317357, "link": "https://stackoverflow.com/questions/28317357/compass-css-framework-using-bootstrap-with-sass/28318224#28318224", "title": "Compass CSS framework - using Bootstrap with SASS", "body": "<p><em>(I'm using <code>.sass</code> files in my answer, but it should apply to <code>.scss</code> files, too)</em></p>\n\n<blockquote>\n  <p>Isn't there a bootstrap.scss file that has all the mixins and everything else?</p>\n</blockquote>\n\n<p>Yes, there is. Here's the generated <a href=\"https://github.com/twbs/bootstrap-sass/blob/master/templates/project/styles.sass\" rel=\"nofollow\"><code>styles.sass</code></a> file:</p>\n\n<pre class=\"lang-sass prettyprint-override\"><code>// Import Bootstrap Compass integration\n@import \"bootstrap-compass\"\n// Import custom Bootstrap variables\n@import \"bootstrap-variables\"\n// Import Bootstrap for Sass\n@import \"bootstrap\"\n</code></pre>\n\n<p><code>bootstap_variables</code> refers to the generated <a href=\"https://github.com/twbs/bootstrap-sass/blob/master/templates/project/_bootstrap-variables.sass\" rel=\"nofollow\"><code>_bootstrap-variables.sass</code></a> file in your project tree, whereas <code>bootstrap-compass</code> and <code>bootstrap</code> are imported from the gem's <a href=\"https://github.com/twbs/bootstrap-sass/tree/master/assets/stylesheets\" rel=\"nofollow\">stylesheets</a> directory.</p>\n\n<p><a href=\"https://github.com/twbs/bootstrap-sass/blob/master/assets/stylesheets/_bootstrap.scss\" rel=\"nofollow\">The latter</a> imports all other Bootstrap files, including the grid:</p>\n\n<pre class=\"lang-sass prettyprint-override\"><code>// Core variables and mixins\n@import \"bootstrap/variables\";\n@import \"bootstrap/mixins\";\n\n// Reset and dependencies\n@import \"bootstrap/normalize\";\n@import \"bootstrap/print\";\n@import \"bootstrap/glyphicons\";\n\n// Core CSS\n@import \"bootstrap/scaffolding\";\n@import \"bootstrap/type\";\n@import \"bootstrap/code\";\n@import \"bootstrap/grid\";        # &lt;-- here it is\n...\n</code></pre>\n"}], "owner": {"reputation": 3301, "user_id": 3466235, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/NXA6S.jpg?s=128&g=1", "display_name": "Tanasos", "link": "https://stackoverflow.com/users/3466235/tanasos"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 902, "favorite_count": 0, "accepted_answer_id": 28318224, "answer_count": 1, "score": 0, "last_activity_date": 1449780902, "creation_date": 1423040719, "last_edit_date": 1449780902, "question_id": 28317357, "link": "https://stackoverflow.com/questions/28317357/compass-css-framework-using-bootstrap-with-sass", "title": "Compass CSS framework - using Bootstrap with SASS", "body": "<p>I want to use Bootstrap with SASS, but I can't find any tutorials or explanation how one can use Bootstrap with SASS. The only thing I find is installatio trough a ruby gem:</p>\n\n<p>compass create my-new-project -r bootstrap-sass --using bootstrap </p>\n\n<p>Which creates the following tree in my folder:</p>\n\n<p><img src=\"https://i.stack.imgur.com/BtdHe.png\" alt=\"enter image description here\"></p>\n\n<p>Is this enough for Bootstrap to use its own Grid, because I don't see the bootstrap.scss file, neither any Grid related files. However, I find the grid classes and all in a styles.css file. Isn't there a bootstrap.scss file that has all the mixins and everything else? And where can I find a more extended use of SASS's Bootstrap mixins, which are described here briefly:</p>\n\n<p><a href=\"http://www.hongkiat.com/blog/bootstrap-and-sass/\" rel=\"nofollow noreferrer\">http://www.hongkiat.com/blog/bootstrap-and-sass/</a></p>\n\n<p>Thank You all in advance! I really can't find nothing on my problem.</p>\n"}, {"tags": ["javascript", "ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 1527, "user_id": 1107878, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rLi3w.png?s=128&g=1", "display_name": "basiam", "link": "https://stackoverflow.com/users/1107878/basiam"}, "edited": false, "score": 1, "creation_date": 1423056305, "post_id": 28316650, "comment_id": 44992876, "body": "Did you try running <code>bundle exec rake assets:precompile</code> locally? Are you getting any errors? And can you post <code>application.js</code> ?   BTW, any reason why <code>div</code> is a global variable?"}, {"owner": {"reputation": 988, "user_id": 4310762, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/CUJkH.jpg?s=128&g=1", "display_name": "EggSix", "link": "https://stackoverflow.com/users/4310762/eggsix"}, "reply_to_user": {"reputation": 1527, "user_id": 1107878, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rLi3w.png?s=128&g=1", "display_name": "basiam", "link": "https://stackoverflow.com/users/1107878/basiam"}, "edited": false, "score": 0, "creation_date": 1423081244, "post_id": 28316650, "comment_id": 45008534, "body": "ahah I actually fixed it. I put an image in the wrong assets folder, I guess I was supposed to put in in /public/assets? and the image was being compiled? I&#39;m not sure if that&#39;s right but it worked. Thanks for the help anyway."}], "answers": [{"tags": [], "owner": {"reputation": 2313, "user_id": 2906559, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/dcfc0f9353431d8a74b4792d9e6cc6c5?s=128&d=identicon&r=PG", "display_name": "errakeshpd", "link": "https://stackoverflow.com/users/2906559/errakeshpd"}, "is_accepted": false, "score": 1, "last_activity_date": 1475954017, "creation_date": 1475954017, "answer_id": 39936360, "question_id": 28316650, "link": "https://stackoverflow.com/questions/28316650/execjsprogramerror-unexpected-character/39936360#39936360", "title": "ExecJS::ProgramError: Unexpected character &#39;#&#39;", "body": "<p>remove the comment line which is start with \"#\" from any of your .js file</p>\n"}], "owner": {"reputation": 988, "user_id": 4310762, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/CUJkH.jpg?s=128&g=1", "display_name": "EggSix", "link": "https://stackoverflow.com/users/4310762/eggsix"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1200, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1475954017, "creation_date": 1423038166, "last_edit_date": 1423038859, "question_id": 28316650, "link": "https://stackoverflow.com/questions/28316650/execjsprogramerror-unexpected-character", "title": "ExecJS::ProgramError: Unexpected character &#39;#&#39;", "body": "<p>I'm trying to deploy to Heroku and I am met with this error. I've done some research and tried uninstalling and reinstalling some gems after looking at relevant posts but I'm not really sure what's wrong here as I am not familiar with what the actual problem is. Please help! What should I do? So far I'm thinking it has something to do with the jquery.</p>\n\n<pre><code>ExecJS::ProgramError: Unexpected character '#' (line: 13912, col: 0, pos: 394110)\nremote:        Error\nremote:        at new JS_Parse_Error (/tmp/execjs20150204-1143-zrnj29js:2359:10623)\nremote:        at js_error (/tmp/execjs20150204-1143-zrnj29js:2359:10842)\nremote:        at parse_error (/tmp/execjs20150204-1143-zrnj29js:2359:12560)\nremote:        at Object.next_token [as input] (/tmp/execjs20150204-1143-zrnj29js:2359:17582)\nremote:        at next (/tmp/execjs20150204-1143-zrnj29js:2359:18900)\nremote:        at semicolon (/tmp/execjs20150204-1143-zrnj29js:2359:19745)\nremote:        at simple_statement (/tmp/execjs20150204-1143-zrnj29js:2359:22580)\nremote:        at /tmp/execjs20150204-1143-zrnj29js:2359:20708\nremote:        at /tmp/execjs20150204-1143-zrnj29js:2359:19957\nremote:        at /tmp/execjs20150204-1143-zrnj29js:2359:31968\nremote:        at Object.parse (/tmp/execjs20150204-1143-zrnj29js:2360:152)\nremote:        (in /tmp/build_eb6f5cb07cab440eb52a1d47cb70ca23/app/assets/javascripts/application.js)/tmp/build_eb6f5cb07cab440eb52a1d47cb70ca23/vendor/bundle/ruby/2.0.0/gems/execjs-2.2.2/lib/execjs/external_runtime.rb:64:in `extract_result'\nremote:        /tmp/build_eb6f5cb07cab440eb52a1d47cb70ca23/vendor/bundle/ruby/2.0.0/gems/execjs-2.2.2/lib/execjs/external_runtime.rb:29:in `exec'\nremote:        /tmp/build_eb6f5cb07cab440eb52a1d47cb70ca23/vendor/bundle/ruby/2.0.0/gems/uglifier-2.7.0/lib/uglifier.rb:200:in `run_uglifyjs'\nremote:        /tmp/build_eb6f5cb07cab440eb52a1d47cb70ca23/vendor/bundle/ruby/2.0.0/gems/uglifier-2.7.0/lib/uglifier.rb:178:in `compile'\nremote:        /tmp/build_eb6f5cb07cab440eb52a1d47cb70ca23/vendor/bundle/ruby/2.0.0/gems/sprockets-2.12.3/lib/sprockets/uglifier_compressor.rb:25:in `evaluate'\nremote:        /tmp/build_eb6f5cb07cab440eb52a1d47cb70ca23/vendor/bundle/ruby/2.0.0/gems/tilt-1.4.1/lib/tilt/template.rb:103:in `render'\nremote:        /tmp/build_eb6f5cb07cab440eb52a1d47cb70ca23/vendor/bundle/ruby/2.0.0/gems/sprockets-2.12.3/lib/sprockets/context.rb:197:in `block in evaluate'\nremote:        /tmp/build_eb6f5cb07cab440eb52a1d47cb70ca23/vendor/bundle/ruby/2.0.0/gems/sprockets-2.12.3/lib/sprockets/context.rb:194:in `each'\nremote:        /tmp/build_eb6f5cb07cab440eb52a1d47cb70ca23/vendor/bundle/ruby/2.0.0/gems/sprockets-2.12.3/lib/sprockets/context.rb:194:in `evaluate'\nremote:        /tmp/build_eb6f5cb07cab440eb52a1d47cb70ca23/vendor/bundle/ruby/2.0.0/gems/sprockets-2.12.3/lib/sprockets/bundled_asset.rb:25:in `initialize'\nremote:        /tmp/build_eb6f5cb07cab440eb52a1d47cb70ca23/vendor/bundle/ruby/2.0.0/gems/sprockets-2.12.3/lib/sprockets/base.rb:377:in `new'\nremote:        /tmp/build_eb6f5cb07cab440eb52a1d47cb70ca23/vendor/bundle/ruby/2.0.0/gems/sprockets-2.12.3/lib/sprockets/base.rb:377:in `build_asset'\nremote:        /tmp/build_eb6f5cb07cab440eb52a1d47cb70ca23/vendor/bundle/ruby/2.0.0/gems/sprockets-2.12.3/lib/sprockets/index.rb:94:in `block in build_asset'\nremote:        /tmp/build_eb6f5cb07cab440eb52a1d47cb70ca23/vendor/bundle/ruby/2.0.0/gems/sprockets-2.12.3/lib/sprockets/caching.rb:58:in `cache_asset'\nremote:        /tmp/build_eb6f5cb07cab440eb52a1d47cb70ca23/vendor/bundle/ruby/2.0.0/gems/sprockets-2.12.3/lib/sprockets/index.rb:93:in `build_asset'\nremote:        /tmp/build_eb6f5cb07cab440eb52a1d47cb70ca23/vendor/bundle/ruby/2.0.0/gems/sprockets-2.12.3/lib/sprockets/base.rb:287:in `find_asset'\nremote:        /tmp/build_eb6f5cb07cab440eb52a1d47cb70ca23/vendor/bundle/ruby/2.0.0/gems/sprockets-2.12.3/lib/sprockets/index.rb:61:in `find_asset'\nremote:        /tmp/build_eb6f5cb07cab440eb52a1d47cb70ca23/vendor/bundle/ruby/2.0.0/gems/sprockets-2.12.3/lib/sprockets/manifest.rb:211:in `block in find_asset'\nremote:        /tmp/build_eb6f5cb07cab440eb52a1d47cb70ca23/vendor/bundle/ruby/2.0.0/gems/sprockets-2.12.3/lib/sprockets/manifest.rb:257:in `benchmark'\nremote:        /tmp/build_eb6f5cb07cab440eb52a1d47cb70ca23/vendor/bundle/ruby/2.0.0/gems/sprockets-2.12.3/lib/sprockets/manifest.rb:210:in `find_asset'\nremote:        /tmp/build_eb6f5cb07cab440eb52a1d47cb70ca23/vendor/bundle/ruby/2.0.0/gems/sprockets-2.12.3/lib/sprockets/manifest.rb:119:in `block in compile'\nremote:        /tmp/build_eb6f5cb07cab440eb52a1d47cb70ca23/vendor/bundle/ruby/2.0.0/gems/sprockets-2.12.3/lib/sprockets/manifest.rb:118:in `each'\nremote:        /tmp/build_eb6f5cb07cab440eb52a1d47cb70ca23/vendor/bundle/ruby/2.0.0/gems/sprockets-2.12.3/lib/sprockets/manifest.rb:118:in `compile'\nremote:        /tmp/build_eb6f5cb07cab440eb52a1d47cb70ca23/vendor/bundle/ruby/2.0.0/gems/sprockets-rails-2.2.2/lib/sprockets/rails/task.rb:70:in `block (3 levels) in define'\nremote:        /tmp/build_eb6f5cb07cab440eb52a1d47cb70ca23/vendor/bundle/ruby/2.0.0/gems/sprockets-2.12.3/lib/rake/sprocketstask.rb:146:in `with_logger'\nremote:        /tmp/build_eb6f5cb07cab440eb52a1d47cb70ca23/vendor/bundle/ruby/2.0.0/gems/sprockets-rails-2.2.2/lib/sprockets/rails/task.rb:69:in `block (2 levels) in define'\nremote:        Tasks: TOP =&gt; assets:precompile\nremote:        (See full trace by running task with --trace)\n</code></pre>\n\n<p>gem file\n    source '<a href=\"https://rubygems.org\" rel=\"nofollow\">https://rubygems.org</a>'\n    ruby '2.0.0'</p>\n\n<pre><code>gem 'rails', '4.2.0'\ngem 'sass-rails', '~&gt; 5.0'\ngem 'uglifier', '&gt;= 1.3.0'\ngem 'coffee-rails', '~&gt; 4.1.0'\ngem 'jquery-rails'\ngem 'turbolinks'\ngem 'jbuilder', '~&gt; 2.0'\ngem 'bootstrap-sass', '~&gt; 3.3.3' \ngem 'autoprefixer-rails'\n\ngroup :development, :test do\n gem 'byebug'\n gem 'web-console', '~&gt; 2.0'\n gem 'spring'\n gem 'sqlite3'\nend\n\ngroup :production do\n    gem 'pg'\n    gem 'rails_12factor'\nend\n\ngroup :doc do\n    gem 'sdoc', '~&gt; 0.4.0', require: false\nend\n</code></pre>\n\n<p>/welcome.js</p>\n\n<pre><code>(function($) {\n        var $container = $(\".parallax\");\n        var $divs = $container.find(\"div.parallax-background\");\n        var thingBeingScrolled = document.body;\n        var liHeight = $divs.eq(0).closest(\"li\").height();\n        var diffHeight = $divs.eq(0).height() - liHeight;\n\n    var i,len,li,offset,scroll,top;\n\n    var render = function() {\n        top = thingBeingScrolled.scrollTop;\n        //loop through divs \n        for(i=0,len=$divs.length;i&lt;len;i++) {\n                //get one div\n                div = $divs[i];\n\n                //get the parent LI\n                li = div.parentNode;\n                //calculate the offsetTOP of the div\n                offset = $(div).offset().top\n                //calculate the amount to scroll\n                scroll = Math.round(((top - offset)/liHeight) * diffHeight);\n                //apply scroll amount\n                div.style.webkitTransform = \"translate3d(0px,\"+scroll+\"px,0px)\";\n        }\n    };\n\n    (function loop(){\n            requestAnimationFrame(loop);\n            render();\n        })();\n\n})(jQuery);\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 48413, "user_id": 1279683, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1veuT.jpg?s=128&g=1", "display_name": "Marek Lipka", "link": "https://stackoverflow.com/users/1279683/marek-lipka"}, "edited": false, "score": 0, "creation_date": 1423036384, "post_id": 28316075, "comment_id": 44981397, "body": "It isn&#39;t your model for <code>pin</code>, it&#39;s only your db schema for <code>pins</code> table. The model is probably located in <code>app&#47;models&#47;pin.rb</code> file."}, {"owner": {"reputation": 33, "user_id": 4491796, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/MwpEs.jpg?s=128&g=1", "display_name": "MWL", "link": "https://stackoverflow.com/users/4491796/mwl"}, "reply_to_user": {"reputation": 48413, "user_id": 1279683, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1veuT.jpg?s=128&g=1", "display_name": "Marek Lipka", "link": "https://stackoverflow.com/users/1279683/marek-lipka"}, "edited": false, "score": 0, "creation_date": 1423036475, "post_id": 28316075, "comment_id": 44981443, "body": "Thanks. I know that. I will edit my post."}], "answers": [{"comments": [{"owner": {"reputation": 33, "user_id": 4491796, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/MwpEs.jpg?s=128&g=1", "display_name": "MWL", "link": "https://stackoverflow.com/users/4491796/mwl"}, "edited": false, "score": 0, "creation_date": 1423036654, "post_id": 28316136, "comment_id": 44981520, "body": "My pin model does not have image? method."}, {"owner": {"reputation": 48413, "user_id": 1279683, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1veuT.jpg?s=128&g=1", "display_name": "Marek Lipka", "link": "https://stackoverflow.com/users/1279683/marek-lipka"}, "reply_to_user": {"reputation": 33, "user_id": 4491796, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/MwpEs.jpg?s=128&g=1", "display_name": "MWL", "link": "https://stackoverflow.com/users/4491796/mwl"}, "edited": false, "score": 1, "creation_date": 1423036796, "post_id": 28316136, "comment_id": 44981577, "body": "@MWL yes, it does. It&#39;s generated automatically by <code>ActiveRecord</code> on the basis of your db schema. Since <code>pins</code> table has <code>image</code> column, <code>image</code>, <code>image=</code> and <code>image?</code> methods are generated automatically, at least in Rails 4.1.6 (I think in Rails 3 generation of <code>?</code> method was limited to boolean columns, but I&#39;m not sure)."}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1423041086, "post_id": 28316136, "comment_id": 44983866, "body": "<code>@pin.image?</code> is a shortcut for <code>@pin.attribute_present?(:image)</code>. According to the <a href=\"http://api.rubyonrails.org/classes/ActiveRecord/AttributeMethods.html#method-i-attribute_present-3F\" rel=\"nofollow noreferrer\">documentation</a>, it returns <code>true</code> if the attribute is neither <code>nil</code> nor <code>empty?</code>."}, {"owner": {"reputation": 48413, "user_id": 1279683, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1veuT.jpg?s=128&g=1", "display_name": "Marek Lipka", "link": "https://stackoverflow.com/users/1279683/marek-lipka"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1423041296, "post_id": 28316136, "comment_id": 44983998, "body": "@Stefan thanks. I was wondering if <code>@pin.image?</code> is an equivalent to <code>!!@pin.image</code> or to <code>@pin.image.present?</code>."}], "tags": [], "owner": {"reputation": 48413, "user_id": 1279683, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1veuT.jpg?s=128&g=1", "display_name": "Marek Lipka", "link": "https://stackoverflow.com/users/1279683/marek-lipka"}, "is_accepted": true, "score": 2, "last_activity_date": 1423036637, "last_edit_date": 1423036637, "creation_date": 1423036220, "answer_id": 28316136, "question_id": 28316075, "link": "https://stackoverflow.com/questions/28316075/question-mark-after-variable-object-name-in-rails/28316136#28316136", "title": "question mark after variable/object name in rails", "body": "<blockquote>\n  <p>There is not image? method in my controller.</p>\n</blockquote>\n\n<p>You don't call this method on your controller, but on your object assigned to <code>@pin</code> variable, which is probably your <code>Pin</code> model. And your model does have <code>image?</code> method. </p>\n\n<blockquote>\n  <p>What is f ?</p>\n</blockquote>\n\n<p>It's the <a href=\"http://api.rubyonrails.org/classes/ActionView/Helpers/FormBuilder.html\" rel=\"nofollow\">form builder object</a>, passed into <code>form_for</code> block.</p>\n"}], "owner": {"reputation": 33, "user_id": 4491796, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/MwpEs.jpg?s=128&g=1", "display_name": "MWL", "link": "https://stackoverflow.com/users/4491796/mwl"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1411, "favorite_count": 2, "accepted_answer_id": 28316136, "answer_count": 1, "score": 1, "last_activity_date": 1423041824, "creation_date": 1423036000, "last_edit_date": 1423041824, "question_id": 28316075, "link": "https://stackoverflow.com/questions/28316075/question-mark-after-variable-object-name-in-rails", "title": "question mark after variable/object name in rails", "body": "<p>I'm very new to ruby on rails. Thanks for your patience in advance. </p>\n\n<pre><code>&lt;div class=\"field\"&gt;\n    &lt;%= @pin.image_url if @pin.image? %&gt;\n    &lt;%= f.file_field :image %&gt;\n    &lt;%= f.hidden_field :image_cache %&gt;\n&lt;/div&gt;\n</code></pre>\n\n<ol>\n<li><p>What does <code>@pin.image?</code>  do?\nThere is not image? method in my controller. I'm guessing it's one of the helper functions provided by rails for every controller? Is that right? </p></li>\n<li><p>What is f ?  </p></li>\n</ol>\n\n<p>here is my model for pin </p>\n\n<pre><code>class Pin &lt; ActiveRecord::Base\n    extend FriendlyId\n    friendly_id :name, use: :slugged    \n    belongs_to :board\nend\n</code></pre>\n\n<p>and its schema </p>\n\n<pre><code>class CreatePins &lt; ActiveRecord::Migration\n  def change\n    create_table :pins do |t|\n      t.string :name\n      t.string :image\n      t.integer :board_id\n\n      t.timestamps null: false\n    end\n  end\nend\n\nclass AddImageToPins &lt; ActiveRecord::Migration\n  def change\n    add_column :pins, :image, :string\n  end\nend\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4", "activerecord"], "answers": [{"tags": [], "owner": {"reputation": 414, "user_id": 1111452, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/7DvXp.jpg?s=128&g=1", "display_name": "kunnu", "link": "https://stackoverflow.com/users/1111452/kunnu"}, "is_accepted": false, "score": 1, "last_activity_date": 1423033494, "creation_date": 1423033494, "answer_id": 28315390, "question_id": 28315251, "link": "https://stackoverflow.com/questions/28315251/skip-a-rails-activerecord-validation-while-saving-a-record/28315390#28315390", "title": "Skip a rails ActiveRecord validation while saving a record", "body": "<p>Hope this will help You</p>\n\n<pre><code>class Profile &lt; ActiveRecord::Base\n\n  validate :method_1\n  validate :method_2, :if =&gt; :do_validate?\n\n  def do_validate?\n    #return true or false based on scenerio\n  end\n\nend\n</code></pre>\n\n<p>You can have conditional validation.</p>\n"}, {"tags": [], "owner": {"reputation": 2395, "user_id": 1626261, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/v6cN0.jpg?s=128&g=1", "display_name": "Sonalkumar sute", "link": "https://stackoverflow.com/users/1626261/sonalkumar-sute"}, "is_accepted": false, "score": 0, "last_activity_date": 1423033566, "creation_date": 1423033566, "answer_id": 28315416, "question_id": 28315251, "link": "https://stackoverflow.com/questions/28315251/skip-a-rails-activerecord-validation-while-saving-a-record/28315416#28315416", "title": "Skip a rails ActiveRecord validation while saving a record", "body": "<p>Which validation u want to skip, if suppose u want to skip <code>validates_presence_of</code> for create method, then allow only update method to check that validation </p>\n\n<p><code>validates_presence_of :on =&gt; :update</code> </p>\n\n<p>hope this helps</p>\n"}], "owner": {"reputation": 31, "user_id": 4328395, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/afb1df325b4d53a35cbfcd528d489eb6?s=128&d=identicon&r=PG&f=1", "display_name": "MBee", "link": "https://stackoverflow.com/users/4328395/mbee"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 913, "favorite_count": 0, "closed_date": 1423041864, "answer_count": 2, "score": 0, "last_activity_date": 1423033566, "creation_date": 1423032942, "question_id": 28315251, "link": "https://stackoverflow.com/questions/28315251/skip-a-rails-activerecord-validation-while-saving-a-record", "closed_reason": "Duplicate", "title": "Skip a rails ActiveRecord validation while saving a record", "body": "<p>I have a function in my rails project where I am handling the situation where a record is not saved due to validation failure.</p>\n\n<pre><code>begin\n  raise unless profile.save\n  rescue ActiveRecord::ActiveRecordError =&gt; e\n    e.message = \"Warning: Some validations failed. Force Saving\"\n    profile.save(:validate =&gt; false)\n    puts e.message\n  end \nend\n</code></pre>\n\n<p>Here, to force save the <code>profile</code>, I have to skip all validations. Is there a way to skip just the particular validation that is failing here?</p>\n"}, {"tags": ["ruby", "math", "primes"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user4527355"}, "edited": false, "score": 0, "creation_date": 1423035072, "post_id": 28315150, "comment_id": 44980832, "body": "i think its time for me to upgrade to 2.2"}, {"owner": {"reputation": 21073, "user_id": 3088138, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/114f33fdece969de35d41038fb0eeb46?s=128&d=identicon&r=PG&f=1", "display_name": "Lutz Lehmann", "link": "https://stackoverflow.com/users/3088138/lutz-lehmann"}, "edited": false, "score": 0, "creation_date": 1423056627, "post_id": 28315150, "comment_id": 44993112, "body": "If you want to get still a little faster use a number wheel as discussed in <a href=\"http://stackoverflow.com/questions/17892313/sieve-of-eratosthenes-with-wheel-factorization\" title=\"sieve of eratosthenes with wheel factorization\">stackoverflow.com/questions/17892313/&hellip;</a>."}], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user4527355"}, "edited": false, "score": 0, "creation_date": 1423034365, "post_id": 28315503, "comment_id": 44980552, "body": "yes, thanks for catching that. i updated it. but still same problem"}], "tags": [], "owner": {"reputation": 110733, "user_id": 1009479, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/wlrC5.jpg?s=128&g=1", "display_name": "Yu Hao", "link": "https://stackoverflow.com/users/1009479/yu-hao"}, "is_accepted": false, "score": 2, "last_activity_date": 1423033903, "creation_date": 1423033903, "answer_id": 28315503, "question_id": 28315150, "link": "https://stackoverflow.com/questions/28315150/why-is-the-stdlib-implementation-for-primes-so-slow/28315503#28315503", "title": "Why is the stdlib implementation for primes so slow?", "body": "<p>The <code>prime</code> library <code>Prime.each(1_000_000).to_a</code> generates all prime numbers below <code>1_000_000</code>.</p>\n\n<p>Your method actually only generate all prime number below the square root of <code>1_000_000</code>, i.e, <code>1000</code>.</p>\n"}, {"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user4527355"}, "edited": false, "score": 0, "creation_date": 1423034901, "post_id": 28315759, "comment_id": 44980755, "body": "what version of ruby you are using?"}], "tags": [], "owner": {"reputation": 167912, "user_id": 240443, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/495d675e3bc42ed1dee469e2ce701f1b?s=128&d=identicon&r=PG", "display_name": "Amadan", "link": "https://stackoverflow.com/users/240443/amadan"}, "is_accepted": false, "score": 0, "last_activity_date": 1423034812, "creation_date": 1423034812, "answer_id": 28315759, "question_id": 28315150, "link": "https://stackoverflow.com/questions/28315150/why-is-the-stdlib-implementation-for-primes-so-slow/28315759#28315759", "title": "Why is the stdlib implementation for primes so slow?", "body": "<p>a) On my computer, library executes in 0.230s, your implementation in 0.270s on the average. EDIT: I executed on MRI 2.2.0 though, not 1.9.3.</p>\n\n<p>b) More importantly, the library implementation for MRI is also <a href=\"http://rxr.whitequark.org/mri/source/lib/prime.rb\" rel=\"nofollow\">in Ruby</a>, not in C. Not all functions in Ruby library are written in native code.</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user4527355"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 92, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1423034964, "creation_date": 1423032600, "last_edit_date": 1423034964, "question_id": 28315150, "link": "https://stackoverflow.com/questions/28315150/why-is-the-stdlib-implementation-for-primes-so-slow", "title": "Why is the stdlib implementation for primes so slow?", "body": "<p>I decided to code the sieve of eratosthenes in ruby for fun.  Only for fun because I knew there was a library function.  Also, I thought it would be fast. But I found that it is not, at least in my ruby 1.9.3,  mine is several times faster on my netbook and it's not even in c.  why is that so.</p>\n\n<p>library implementation:</p>\n\n<pre><code>require 'prime'\nprimes = Prime.each(1_000_000).to_a\nprint primes.size\nputs\n</code></pre>\n\n<p>mine in ruby:</p>\n\n<pre><code>sieve = Array.new(1_000_000, true)\nsieve[0..1] = [false, false]\nfor number in 2...Math.sqrt(sieve.size)\n  if sieve[number]\n    for multiple in (number ** 2...sieve.size).step(number)\n      sieve[multiple] = false\n    end\n  end\nend\n\nprimes = []\nfor number in 2...1_000_000\n  if sieve[number]\n    primes &lt;&lt; number\n  end\nend\nprint primes.size\nputs\n</code></pre>\n\n<p>The library is very slow.</p>\n"}, {"tags": ["ruby", "ruby-on-rails-3", "url"], "comments": [{"owner": {"reputation": 2174, "user_id": 3448554, "user_type": "registered", "accept_rate": 44, "profile_image": "https://i.stack.imgur.com/j7RcG.jpg?s=128&g=1", "display_name": "Kelsey Hannan", "link": "https://stackoverflow.com/users/3448554/kelsey-hannan"}, "edited": false, "score": 0, "creation_date": 1423125157, "post_id": 28315077, "comment_id": 45023918, "body": "you&#39;ll need to post a little more information I&#39;m afraid.  A common linking mistake is to reference a URL as HTTP or HTTPS, in cases where it only accepts one or the other."}, {"owner": {"reputation": 2174, "user_id": 3448554, "user_type": "registered", "accept_rate": 44, "profile_image": "https://i.stack.imgur.com/j7RcG.jpg?s=128&g=1", "display_name": "Kelsey Hannan", "link": "https://stackoverflow.com/users/3448554/kelsey-hannan"}, "edited": false, "score": 0, "creation_date": 1423185228, "post_id": 28315077, "comment_id": 45057337, "body": "I notice your URL is <a href=\"http://54.165.121.59:9999\" rel=\"nofollow noreferrer\">54.165.121.59:9999</a>, which is a pretty nonstandard URL, so it&#39;s possible this is not a format the URL parser on these sites supports.  To be safe I would convert this into a standard domain name.  Also when I input your URL into a browser like TOR, I get this error:   <code>Not Found  Rails.root: &#47;mnt&#47;circles_portal&#47;dittov2&#47;web_portal</code> Application Trace | Framework Trace | Full Trace  <code>app&#47;helpers&#47;application_helper.rb:238:in `route_not_found&#39; app&#47;controllers&#47;media_controller.rb:1273:in `rescue in details&#39; app&#47;controllers&#47;media_controller.rb:1187:in `details&#39; </code>"}, {"owner": {"reputation": 3176, "user_id": 1968826, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/TgXPA.jpg?s=128&g=1", "display_name": "Can Can", "link": "https://stackoverflow.com/users/1968826/can-can"}, "reply_to_user": {"reputation": 2174, "user_id": 3448554, "user_type": "registered", "accept_rate": 44, "profile_image": "https://i.stack.imgur.com/j7RcG.jpg?s=128&g=1", "display_name": "Kelsey Hannan", "link": "https://stackoverflow.com/users/3448554/kelsey-hannan"}, "edited": false, "score": 0, "creation_date": 1423199932, "post_id": 28315077, "comment_id": 45061004, "body": "@Kelseydh how did u get this error? Please help to reproduce that error."}, {"owner": {"reputation": 2174, "user_id": 3448554, "user_type": "registered", "accept_rate": 44, "profile_image": "https://i.stack.imgur.com/j7RcG.jpg?s=128&g=1", "display_name": "Kelsey Hannan", "link": "https://stackoverflow.com/users/3448554/kelsey-hannan"}, "edited": false, "score": 0, "creation_date": 1423527792, "post_id": 28315077, "comment_id": 45177055, "body": "Sorry... I am no longer getting that error for your site on TOR, possibly because your site or server has changed since I did that.  Please ignore it.  [To explain again what I did:  I used the URL you provided with the TOR browser (look it up if you don&#39;t know what it is), which can be a crude way to test how a website loads from an ISP or IP that isn&#39;t your own.]  Anyways, as for your original problem:  Again I would again try to use a URL with a standard domain or DNS.  It&#39;s possible the non-standard URL you&#39;re using conflicts with how those websites parse URL&#39;s.  (Contacting them may help)"}, {"owner": {"reputation": 3176, "user_id": 1968826, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/TgXPA.jpg?s=128&g=1", "display_name": "Can Can", "link": "https://stackoverflow.com/users/1968826/can-can"}, "reply_to_user": {"reputation": 2174, "user_id": 3448554, "user_type": "registered", "accept_rate": 44, "profile_image": "https://i.stack.imgur.com/j7RcG.jpg?s=128&g=1", "display_name": "Kelsey Hannan", "link": "https://stackoverflow.com/users/3448554/kelsey-hannan"}, "edited": false, "score": 0, "creation_date": 1424176867, "post_id": 28315077, "comment_id": 45434260, "body": "@Kelseydh I fixed the issue. The actual issue was i have begin rescue blocks. While running the code in application it&#39;s executing the code which is in rescue block. But while pasting the url in facebook it&#39;s validation the code which is in begin block."}], "owner": {"reputation": 3176, "user_id": 1968826, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/TgXPA.jpg?s=128&g=1", "display_name": "Can Can", "link": "https://stackoverflow.com/users/1968826/can-can"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 54, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1423032791, "creation_date": 1423032342, "last_edit_date": 1423032791, "question_id": 28315077, "link": "https://stackoverflow.com/questions/28315077/url-is-working-but-its-giving-page-not-found-error-when-i-check-that-in-website", "title": "Url is working but it&#39;s giving page not found error when i check that in websiteoptimization", "body": "<p>while validating my application urls in <a href=\"http://analyze.websiteoptimization.com\" rel=\"nofollow\">websiteoptimization</a> or <a href=\"https://developers.facebook.com/tools/debug/og/object/\" rel=\"nofollow\">facebook</a>, some urls are giving 404 page not found error. But while trying that url in browsers it's working fine. </p>\n\n<p>Url which is causing this problem <a href=\"http://54.165.121.59:9999/livetv/bbc-world-news-world-business-report-2015-02-04-08-45-00\" rel=\"nofollow\">url</a> . Please let me know what could be the actual problem with this url.</p>\n"}, {"tags": ["ruby", "jekyll", "octopress"], "answers": [{"tags": [], "owner": {"reputation": 709, "user_id": 3893181, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/1a96cca177e6475025e05183cd60bc45?s=128&d=identicon&r=PG", "display_name": "w1n78", "link": "https://stackoverflow.com/users/3893181/w1n78"}, "is_accepted": false, "score": 0, "last_activity_date": 1424993644, "creation_date": 1424993644, "answer_id": 28754894, "question_id": 28314801, "link": "https://stackoverflow.com/questions/28314801/octopress-issue-categories-with-spaces-in-them/28754894#28754894", "title": "Octopress Issue - Categories with spaces in them", "body": "<p>how is it automatically generating the categories page? you can use slugify <a href=\"http://jekyllrb.com/docs/templates/\" rel=\"nofollow\">http://jekyllrb.com/docs/templates/</a></p>\n\n<pre><code>{{ page.categories | slugify }}\n</code></pre>\n"}], "owner": {"reputation": 428, "user_id": 2544101, "user_type": "registered", "accept_rate": 24, "profile_image": "https://www.gravatar.com/avatar/a7180a4230409a842d8617c3c2da9bc7?s=128&d=identicon&r=PG", "display_name": "Frank P.", "link": "https://stackoverflow.com/users/2544101/frank-p"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 40, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1424993644, "creation_date": 1423031184, "last_edit_date": 1423079293, "question_id": 28314801, "link": "https://stackoverflow.com/questions/28314801/octopress-issue-categories-with-spaces-in-them", "title": "Octopress Issue - Categories with spaces in them", "body": "<p>I have categories with spaces in them. I add them in a post as follows:</p>\n\n<pre><code>layout: post\ntitle: \"Visualizing the Magnitude of Earthquakes in New Zealand\"\ndate: 2012-11-06 19:19:41 -0800\ncategories: [Data Visualization with R]\ncomments: true\n</code></pre>\n\n<p>Octopress correctly generates the path <code>data-visualization-with-r</code> and when I go to mysite.com/categories/data-visualization-with-r all is well.</p>\n\n<p>However, on the automatically generated 'categories' page the link is to: </p>\n\n<p>mysite.com/categories/data%20visualization%20with%20r/ </p>\n\n<p>which is empty.</p>\n\n<p>Does anybody have experience in categories with spaces in them?</p>\n\n<p>Edit: I will add that the link to the category from the main <code>blog</code> page is also correct. The only place where it has spaces and is wrong/different is on the /categories page.</p>\n"}, {"tags": ["ruby", "loops", "refactoring", "case-statement"], "comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1423033844, "post_id": 28314730, "comment_id": 44980312, "body": "I assume that this is working code. If so, it&#39;s not suitable for SO. For advice on how to improve working code you should post it at SO&#39;s sister-site, <a href=\"http://codereview.stackexchange.com/questions/tagged/ruby\">Code Review</a>. If you look over some of the Q&amp;A&#39;s at CR I think you will be impressed by the quality of the answers that are given there."}, {"owner": {"reputation": 33, "user_id": 4368732, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6247841b4f0305f82c03f256f488e0bb?s=128&d=identicon&r=PG&f=1", "display_name": "moshiachman", "link": "https://stackoverflow.com/users/4368732/moshiachman"}, "reply_to_user": {"reputation": 110733, "user_id": 1009479, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/wlrC5.jpg?s=128&g=1", "display_name": "Yu Hao", "link": "https://stackoverflow.com/users/1009479/yu-hao"}, "edited": false, "score": 0, "creation_date": 1423062788, "post_id": 28314730, "comment_id": 44997201, "body": "Thank you @YuHao for cleaning the oversights in the text."}, {"owner": {"reputation": 33, "user_id": 4368732, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6247841b4f0305f82c03f256f488e0bb?s=128&d=identicon&r=PG&f=1", "display_name": "moshiachman", "link": "https://stackoverflow.com/users/4368732/moshiachman"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1423063246, "post_id": 28314730, "comment_id": 44997519, "body": "@CarySwoveland The presented code may work independently of the core question yet a working solution for the requested help was not readily apparent. Thank you for your concern &amp; I&#39;ll certainly check CR for future research."}], "answers": [{"comments": [{"owner": {"reputation": 33, "user_id": 4368732, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6247841b4f0305f82c03f256f488e0bb?s=128&d=identicon&r=PG&f=1", "display_name": "moshiachman", "link": "https://stackoverflow.com/users/4368732/moshiachman"}, "edited": false, "score": 0, "creation_date": 1423063491, "post_id": 28314901, "comment_id": 44997685, "body": "Thank you for your immediate response! I appreciate your correct solution to the question."}], "tags": [], "owner": {"reputation": 1573, "user_id": 4330484, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/OP6ki.png?s=128&g=1", "display_name": "ganbustein", "link": "https://stackoverflow.com/users/4330484/ganbustein"}, "is_accepted": false, "score": 1, "last_activity_date": 1423031550, "creation_date": 1423031550, "answer_id": 28314901, "question_id": 28314730, "link": "https://stackoverflow.com/questions/28314730/how-to-restart-or-reuse-a-case-statement-in-ruby/28314901#28314901", "title": "How to restart or reuse a case statement in Ruby?", "body": "<p>Put a loop around it.</p>\n\n<pre><code>loop do\n    choice = input\n\n    case choice\n        .\n        .\n        .\n        when \"exit\", \"quit\"\n            break\n        else\n            puts \"Invalid choice\"\n    end\nend\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 33, "user_id": 4368732, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6247841b4f0305f82c03f256f488e0bb?s=128&d=identicon&r=PG&f=1", "display_name": "moshiachman", "link": "https://stackoverflow.com/users/4368732/moshiachman"}, "edited": false, "score": 1, "creation_date": 1423062621, "post_id": 28314979, "comment_id": 44997087, "body": "Thank you for the thorough response. The first answer <code>loop...do</code> satisfies the core question while the second expands my options for further research. Thank you for touching upon the &quot;refactoring&quot; part. I&#39;d appreciate if the second option would be explained step-by-step if possible."}, {"owner": {"reputation": 461, "user_id": 3991313, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/38aec25ea1473b027ee229cfcedfb2c3?s=128&d=identicon&r=PG", "display_name": "slushie", "link": "https://stackoverflow.com/users/3991313/slushie"}, "reply_to_user": {"reputation": 33, "user_id": 4368732, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6247841b4f0305f82c03f256f488e0bb?s=128&d=identicon&r=PG&f=1", "display_name": "moshiachman", "link": "https://stackoverflow.com/users/4368732/moshiachman"}, "edited": false, "score": 0, "creation_date": 1423074280, "post_id": 28314979, "comment_id": 45004801, "body": "@moshiachman I&#39;ve edited my answer to include much more comments. Hope it helps!"}], "tags": [], "owner": {"reputation": 461, "user_id": 3991313, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/38aec25ea1473b027ee229cfcedfb2c3?s=128&d=identicon&r=PG", "display_name": "slushie", "link": "https://stackoverflow.com/users/3991313/slushie"}, "is_accepted": true, "score": 1, "last_activity_date": 1423070902, "last_edit_date": 1423070902, "creation_date": 1423031874, "answer_id": 28314979, "question_id": 28314730, "link": "https://stackoverflow.com/questions/28314730/how-to-restart-or-reuse-a-case-statement-in-ruby/28314979#28314979", "title": "How to restart or reuse a case statement in Ruby?", "body": "<p>Well, you can put the entire <code>case</code> statement inside of a loop. Something like:</p>\n\n<pre><code>loop do\n\n  puts \"To exit please type 'Quit' or 'Exit'\"\n  puts 'Please type \"add\", \"display\", \"update\" or \"delete\".'\n  choice = input\n\n  case choice\n    # ...\n    when 'exit', 'quit'\n      break\n  end\nend\n</code></pre>\n\n<p>However, large case statements like this are not idiomatic Ruby. You might consider more dynamic options, such as using <code>object.send(method_name, args...)</code>.</p>\n\n<p>Additionally, its also best to place your code inside of a <code>class</code> or <code>module</code>. This makes it easier to understand and keeps things organized. This is called <a href=\"http://en.wikipedia.org/wiki/Encapsulation_%28object-oriented_programming%29\" rel=\"nofollow\">encapsulation</a>.</p>\n\n<p>In the example below, you can see that a single method is responsible for a single piece of functionality, and the class as a whole is responsible for managing the delegation of its tasks. This is called <a href=\"http://en.wikipedia.org/wiki/Single_responsibility_principle\" rel=\"nofollow\">the single responsibility principle</a>. </p>\n\n<pre><code>class MyCode\n  # store the current state for this object in an accessor.\n  # `attr_accessor` defines a read-write property.\n  attr_accessor :running\n\n  def add_choice\n    # your \"add\" code here\n  end\n\n  def update_choice\n    # \"update\" code\n  end\n\n  def exit_choice\n    # change the state of this class by marking `running` as false\n    self.running = false\n  end\n\n  # `alias_method` defines a method called `quit_choice` that\n  # runs the same code as `exit_choice`.\n  alias_method :quit_choice, :exit_choice\n\n  # reads a single input from the user and returns it,\n  # in a normalized form. \n  # \"Add\" -&gt; \"add\", \"Do Something\" -&gt; \"do_something\"\n  def read_choice\n    STDIN.gets.chomp.downcase.strip.gsub(/\\s+/, '_')\n  end\n\n  # Process a single command from the user.\n  def process_choice\n    choice = read_choice\n\n    # the methods that correspond to user input are named\n    # following the same pattern. \"add\" -&gt; \"add_choice\"\n    method_name = [choice, 'choice'].join('_').to_sym\n\n    # check if the method actually exists.\n    if self.respond_to? method_name\n      # call the method named by `method_name`\n      self.send(method_name)\n\n    else\n      # the method doesn't exist. \n      # that means the input was unrecognized.\n      puts \"Invalid choice #{choice}\"\n    end\n  end\n\n  # this method acts as a \"run loop\" that continues execution\n  # until the `running` state changes.\n  def choose\n    # define the initial state.\n    self.running = true\n    # process a single input as long as the state hasn't changed.\n    process_choice while self.running\n  end\nend\n</code></pre>\n"}], "owner": {"reputation": 33, "user_id": 4368732, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6247841b4f0305f82c03f256f488e0bb?s=128&d=identicon&r=PG&f=1", "display_name": "moshiachman", "link": "https://stackoverflow.com/users/4368732/moshiachman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1375, "favorite_count": 0, "accepted_answer_id": 28314979, "answer_count": 2, "score": 3, "last_activity_date": 1423070902, "creation_date": 1423030867, "last_edit_date": 1423031111, "question_id": 28314730, "link": "https://stackoverflow.com/questions/28314730/how-to-restart-or-reuse-a-case-statement-in-ruby", "title": "How to restart or reuse a case statement in Ruby?", "body": "<p>After going through the <a href=\"http://www.codecademy.com/courses/ruby-beginner-en-0i8v1/0/1?curriculum_id=5059f8619189a5000201fbcb\" rel=\"nofollow\">codecademy</a> ruby section \"A Night at the Movies\", I wanted to extend the case-statement to allow input again. By the end my code was:</p>\n\n<pre><code>movies = {\n  living_torah: 5,\n  ushpizin: 5\n}\n\ndef input #method for gets.chomp\n    gets.chomp.downcase\nend\n\nputs \"To exit please type 'Quit' or 'Exit'\"\nputs 'Please type \"add\", \"display\", \"update\" or \"delete\".'\nchoice = input\n\ncase choice\n    when \"add\"\n        puts \"Movie Title please:\"\n        title = input.to_sym\n        puts \"How would you rate it?\"\n        rating = input.to_i\n        if movies[title].nil?\n            movies[title] = rating\n            puts \"Movie: '#{title.to_s.capitalize}' added with a Rating of # {rating}.\"\n        else\n            puts \"That Movie already exists. Try updating it.\"\n        end\n    when \"update\"\n        puts \"Movie Title please:\"\n        title = input.to_sym\n        if movies[title].nil?\n            puts \"That Title doesn't exist. Please 'add' it.\"\n        else\n            puts \"Your Movie was found. How would you rate it?\"\n            rating = input.to_i\n            movies[title] = rating\n            puts \"Movie: '#{title.to_s.capitalize}' updated with a Rating of #{rating}.\"\n        end\n    when \"display\"\n        movies.each { |movie, rating| puts \"#{movie}: #{rating}\" }\n    when \"delete\"\n        puts \"Which Movie would you like to delete?\"\n        title = input.to_sym\n        if movies[title].nil?\n            puts \"That Title doesn't exist. Please 'add' it.\"\n        else\n            movies.delete(title)\n            puts \"The Movie '#{title.to_s.capitalize}' has been deleted.\"\n        end\n    when \"exit\", \"quit\"\n        exit\n    else\n        puts \"Invalid choice.\"\nend\n</code></pre>\n\n<p>I added the \"exit\" case independently of the exercise hoping to C.R.U.D. until explicitly exiting the program. How would I change the code to be able to restart/reuse the case-statement indefinitely?\n(Also, is there a simpler/shorter way to produce the same results as this case-statement?)</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 1294, "user_id": 1574508, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/JFCdr.jpg?s=128&g=1", "display_name": "trueinViso", "link": "https://stackoverflow.com/users/1574508/trueinviso"}, "edited": false, "score": 0, "creation_date": 1423029661, "post_id": 28314436, "comment_id": 44978665, "body": "The table doesn&#39;t exist, you need to run rake db:create, rake db:migrate etc"}], "answers": [{"tags": [], "owner": {"reputation": 5440, "user_id": 3808414, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/6f9882891a8f249b632abcc63f589f4f?s=128&d=identicon&r=PG", "display_name": "JeffD23", "link": "https://stackoverflow.com/users/3808414/jeffd23"}, "is_accepted": false, "score": 0, "last_activity_date": 1423029760, "creation_date": 1423029760, "answer_id": 28314499, "question_id": 28314436, "link": "https://stackoverflow.com/questions/28314436/why-am-i-receiving-a-activerecordstatementinvalid-in-connectionsindex-error/28314499#28314499", "title": "Why am I receiving a ActiveRecord::StatementInvalid in Connections#index error?", "body": "<p>The SQLite error message is saying that no connections table exists. </p>\n\n<p>You probably need to run <code>rake db:migrate</code> in the terminal window to create the necessary table. After you restart the server, the action should work fine. </p>\n"}], "owner": {"reputation": 953, "user_id": 4339618, "user_type": "registered", "accept_rate": 47, "profile_image": "https://lh5.googleusercontent.com/-iGmkryzHyEE/AAAAAAAAAAI/AAAAAAAAAF8/Dx24YmizdTQ/photo.jpg?sz=128", "display_name": "AB10", "link": "https://stackoverflow.com/users/4339618/ab10"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 265, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1423029760, "creation_date": 1423029396, "question_id": 28314436, "link": "https://stackoverflow.com/questions/28314436/why-am-i-receiving-a-activerecordstatementinvalid-in-connectionsindex-error", "title": "Why am I receiving a ActiveRecord::StatementInvalid in Connections#index error?", "body": "<p>I'm trying to call localhost:3000/connections so I can see if I have set up connections correctly in my app.</p>\n\n<p>When I do, I receive an error message saying:</p>\n\n<pre><code>ActiveRecord::StatementInvalid in Connections#index\nShowing c:/Users/Doesha/desktop/connections/app/views/connections/index.html.erb where line #14 raised:\n\nSQLite3::SQLException: no such table: connections: SELECT \"connections\".* FROM \"connections\"\n</code></pre>\n\n<p>Here's my index.html.erb</p>\n\n<pre><code>&lt;p id=\"notice\"&gt;&lt;%= notice %&gt;&lt;/p&gt;\n\n&lt;h1&gt;Listing Connections&lt;/h1&gt;\n\n&lt;table&gt;\n  &lt;thead&gt;\n    &lt;tr&gt;\n      &lt;th&gt;Description&lt;/th&gt;\n      &lt;th colspan=\"3\"&gt;&lt;/th&gt;\n    &lt;/tr&gt;\n  &lt;/thead&gt;\n\n  &lt;tbody&gt;\n    &lt;% @connections.each do |connection| %&gt;\n      &lt;tr&gt;\n        &lt;td&gt;&lt;%= connection.description %&gt;&lt;/td&gt;\n        &lt;td&gt;&lt;%= link_to 'Show', connection %&gt;&lt;/td&gt;\n        &lt;td&gt;&lt;%= link_to 'Edit', edit_connection_path(connection) %&gt;&lt;/td&gt;\n        &lt;td&gt;&lt;%= link_to 'Destroy', connection, method: :delete, data: { confirm: 'Are you sure?' } %&gt;&lt;/td&gt;\n      &lt;/tr&gt;\n    &lt;% end %&gt;\n  &lt;/tbody&gt;\n&lt;/table&gt;\n\n&lt;br&gt;\n\n&lt;%= link_to 'New Connection', new_connection_path %&gt;\n</code></pre>\n\n<p>Here's my connections_controller.rb:</p>\n\n<pre><code>class ConnectionsController &lt; ApplicationController\n  before_action :set_connection, only: [:show, :edit, :update, :destroy]\n\n  def index\n    @connections = Connection.all\n  end\n\n  def show\n  end\n\n  def new\n    @connection = Connect.new\n  end\n\n  def edit\n  end\n\n  def create\n    @connection = Connection.new(connection_params)\n\n      if @connection.save\n        redirect_to @connection, notice: 'Connection was successfully created.' \n      else\n        render action :new\n      end\n    end\n\n\n  def update\n      if @connection.update(connection_params)\n        redirect_to @connection, notice: 'Connection was successfully updated.' \n      else\n        render action :edit \n      end\n    end\n\n  def destroy\n    @connection.destroy\n      redirect_to connections_url, notice: 'Connection was successfully destroyed.' \n  end\n\n  private\n    # Use callbacks to share common setup or constraints between actions.\n    def set_connection\n      @connection = Connection.find(params[:id])\n    end\n\n    # Never trust parameters from the scary internet, only allow the white list through.\n    def connection_params\n      params.require(:connection).permit(:description)\n    end\nend\n</code></pre>\n\n<p>Anyone know what the problem might be?  Thanks!</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4"], "answers": [{"comments": [{"owner": {"reputation": 11845, "user_id": 1536527, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/Sgr8O.png?s=128&g=1", "display_name": "ironsand", "link": "https://stackoverflow.com/users/1536527/ironsand"}, "edited": false, "score": 0, "creation_date": 1423042429, "post_id": 28316017, "comment_id": 44984703, "body": "Thanks for reply, but I got a error when I restart rails server. <code>undefined method `titleize&#39; for #&lt;ActiveSupport::Inflector::Inflections:0x007fbd239da020&gt; (NoMethodError)</code>"}, {"owner": {"reputation": 49, "user_id": 1161880, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ac5bc3c6d787394e0bff11bdaa6b4a78?s=128&d=identicon&r=PG", "display_name": "bgreg", "link": "https://stackoverflow.com/users/1161880/bgreg"}, "reply_to_user": {"reputation": 11845, "user_id": 1536527, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/Sgr8O.png?s=128&g=1", "display_name": "ironsand", "link": "https://stackoverflow.com/users/1536527/ironsand"}, "edited": false, "score": 0, "creation_date": 1423896448, "post_id": 28316017, "comment_id": 45344649, "body": "Did you get this one fixed?"}, {"owner": {"reputation": 11845, "user_id": 1536527, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/Sgr8O.png?s=128&g=1", "display_name": "ironsand", "link": "https://stackoverflow.com/users/1536527/ironsand"}, "edited": false, "score": 0, "creation_date": 1423900280, "post_id": 28316017, "comment_id": 45345291, "body": "No, I gave up to use acronym&#39;s helper method."}, {"owner": {"reputation": 11569, "user_id": 326984, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/bfebccc59723611143fb10ade1d361e8?s=128&d=identicon&r=PG", "display_name": "Mario Uher", "link": "https://stackoverflow.com/users/326984/mario-uher"}, "edited": false, "score": 0, "creation_date": 1536560117, "post_id": 28316017, "comment_id": 91451419, "body": "This was never part of the API, at least from Rails 4+"}], "tags": [], "owner": {"reputation": 49, "user_id": 1161880, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ac5bc3c6d787394e0bff11bdaa6b4a78?s=128&d=identicon&r=PG", "display_name": "bgreg", "link": "https://stackoverflow.com/users/1161880/bgreg"}, "is_accepted": false, "score": -2, "last_activity_date": 1423035813, "creation_date": 1423035813, "answer_id": 28316017, "question_id": 28314125, "link": "https://stackoverflow.com/questions/28314125/how-to-use-acronym-for-helper-module-name-in-rails/28316017#28316017", "title": "How to use acronym for helper module name in rails", "body": "<p><a href=\"http://api.rubyonrails.org/classes/ActiveSupport/Inflector/Inflections.html#method-i-acronym\" rel=\"nofollow\">http://api.rubyonrails.org/classes/ActiveSupport/Inflector/Inflections.html#method-i-acronym</a></p>\n\n<p>It looks like you may need to specify the other forms of this word.  </p>\n\n<pre><code>ActiveSupport::Inflector.inflections(:en) do |inflect|\n  inflect.acronym    'GNU'\n  inflect.titleize   'GNU'     \n  inflect.camelize   'GNU'     \n  inflect.underscore 'GNU' \nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 448, "user_id": 6674328, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CkhuR.jpg?s=128&g=1", "display_name": "crogers", "link": "https://stackoverflow.com/users/6674328/crogers"}, "is_accepted": false, "score": 2, "last_activity_date": 1527271986, "last_edit_date": 1527271986, "creation_date": 1527271292, "answer_id": 50534650, "question_id": 28314125, "link": "https://stackoverflow.com/questions/28314125/how-to-use-acronym-for-helper-module-name-in-rails/50534650#50534650", "title": "How to use acronym for helper module name in rails", "body": "<p>For anyone still wondering about this.  Simply define the acronym and its plural version, like this:</p>\n\n<pre><code>ActiveSupport::Inflector.inflections(:en) do |inflect|\n  inflect.acronym 'GNU'\n  inflect.acronym 'GNUs'\nend\n</code></pre>\n\n<p>In this case, ActiveSupport is reading GNUsHelper as 2 separate words delimited by camelcase (\"GNUs\" and \"Helper\").  You'll have to also define \"GNUs\" as an acronym for this to work.</p>\n\n<p>Also, there's no need to call <code>inflect.titleize</code>, <code>inflect.camelize</code>, or <code>inflect.underscore</code> within the <code>ActiveSupport.inflections</code> block.  (everything inside the block defines inflection rules for your entire application and titlelize is not a rule)</p>\n\n<p>The documentation suggests defining pluralized versions of acronyms to avoid problems like this one.</p>\n\n<p><strong><em>From the docs</em></strong></p>\n\n<p><a href=\"http://api.rubyonrails.org/classes/ActiveSupport/Inflector/Inflections.html#method-i-acronym\" rel=\"nofollow noreferrer\">http://api.rubyonrails.org/classes/ActiveSupport/Inflector/Inflections.html#method-i-acronym</a></p>\n\n<p>Note: Acronyms that are passed to pluralize will no longer be recognized, since the acronym will not occur as a delimited unit in the pluralized result. To work around this, you must specify the pluralized form as an acronym as well:</p>\n\n<pre><code>acronym 'API'\ncamelize(pluralize('api')) #=&gt; 'Apis'\n\nacronym 'APIs'\ncamelize(pluralize('api')) #=&gt; 'APIs'\n</code></pre>\n"}], "owner": {"reputation": 11845, "user_id": 1536527, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/Sgr8O.png?s=128&g=1", "display_name": "ironsand", "link": "https://stackoverflow.com/users/1536527/ironsand"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 903, "favorite_count": 0, "answer_count": 2, "score": 3, "last_activity_date": 1527271986, "creation_date": 1423027786, "question_id": 28314125, "link": "https://stackoverflow.com/questions/28314125/how-to-use-acronym-for-helper-module-name-in-rails", "title": "How to use acronym for helper module name in rails", "body": "<p>I have a model which name is acronym, so I configured like:</p>\n\n<h3>config/initializers/inflections.rb</h3>\n\n<pre><code>ActiveSupport::Inflector.inflections(:en) do |inflect|\n    inflect.acronym 'GNU'\nend\n</code></pre>\n\n<p>And I created helper module for that model.</p>\n\n<h3>app/helpers/gnus/gnus_helper.rb</h3>\n\n<pre><code>module GNUsHelper\nend\n</code></pre>\n\n<p>Then I got error <code>Circular dependency detected while autoloading constant GnusHelper</code>.</p>\n\n<p>It seems Rails are looking for camel case module.</p>\n\n<p>How can I use acronym helper module in Rails?</p>\n"}, {"tags": ["ruby", "gem"], "comments": [{"owner": {"reputation": 79161, "user_id": 1064226, "user_type": "registered", "profile_image": "https://graph.facebook.com/36912842/picture?type=large", "display_name": "Frederick Cheung", "link": "https://stackoverflow.com/users/1064226/frederick-cheung"}, "edited": false, "score": 1, "creation_date": 1423641749, "post_id": 28313531, "comment_id": 45226619, "body": "What filesystem type exactly (the output of mount should include this)?"}], "answers": [{"comments": [{"owner": {"reputation": 679, "user_id": 3624381, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/f32f44e789d6de3a61c8385f0476b36b?s=128&d=identicon&r=PG&f=1", "display_name": "Sandy", "link": "https://stackoverflow.com/users/3624381/sandy"}, "edited": false, "score": 0, "creation_date": 1423620723, "post_id": 28313963, "comment_id": 45220235, "body": "Running the code you suggest: <code>test.rb:4:in `flock&#39;: No locks available @ rb_file_flock - &#47;home&#47;abod&#47;.gem&#47;specs&#47;api.rubygems.org%443&#47;quick&#47;Marshal.4.8&zwnj;&#8203;&#47;bundler-1.7.12.gems&zwnj;&#8203;pec (Errno::ENOLCK) \tfrom test.rb:4:in `block in &lt;main&gt;&#39; \tfrom test.rb:3:in `open&#39; \tfrom test.rb:3:in `&lt;main&gt;&#39;</code>"}, {"owner": {"reputation": 679, "user_id": 3624381, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/f32f44e789d6de3a61c8385f0476b36b?s=128&d=identicon&r=PG&f=1", "display_name": "Sandy", "link": "https://stackoverflow.com/users/3624381/sandy"}, "edited": false, "score": 0, "creation_date": 1424711530, "post_id": 28313963, "comment_id": 45651671, "body": "Just to clarify, when you say a &#39;similar system&#39; ...the cluster I&#39;m trying to install gems on runs fedora 19, so if I ran bundler on a virtual machine running fedora 19 on my local machine (mac osx 10.6.8) and then moved that onto the cluster...is that the gist of what you&#39;re suggesting?"}], "tags": [], "owner": {"reputation": 32543, "user_id": 528726, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/6307569a99dd77fff0463032051d7e39?s=128&d=identicon&r=PG", "display_name": "joelparkerhenderson", "link": "https://stackoverflow.com/users/528726/joelparkerhenderson"}, "is_accepted": false, "score": 3, "last_activity_date": 1424712190, "last_edit_date": 1424712190, "creation_date": 1423026831, "answer_id": 28313963, "question_id": 28313531, "link": "https://stackoverflow.com/questions/28313531/gem-install-errnoenolck-when-installing-gem/28313963#28313963", "title": "gem install Errno::ENOLCK when installing gem", "body": "<p>Note: I'm offering a bounty to help the OP, because we need more expert help.</p>\n\n<p>Here are some general ideas to get you started... </p>\n\n<ul>\n<li><p>Is it possible that you're out of system resources, such as disk space? </p></li>\n<li><p>Or your system is limiting the resources you can use?</p></li>\n<li><p>Or trying to write to a volume where you don't have permissions or a lock daemon?</p></li>\n</ul>\n\n<p>If no one has a better answer for you, by the time you read this, can you try running these commands then post the output in your question?</p>\n\n<pre><code>$ df\n\n$ ulimit -a\n\n$ uname -a\n\n$ stat /home/abod/.gem/specs/api.rubygems.org%443/quick/Marshal.4.8/bundler-1.7.12.gemspec\n\n$ fuser -m /home/abod/.gem/specs/api.rubygems.org%443/quick/Marshal.4.8/bundler-1.7.12.gemspec\n</code></pre>\n\n<p>If you want to kill any process accessing that file, that may be holding locks:</p>\n\n<pre><code>$ fuser --kill /home/abod/.gem/specs/api.rubygems.org%443/quick/Marshal.4.8/bundler-1.7.12.gemspec\n</code></pre>\n\n<p>You can discover if the issue is with Ruby vs. gem by running this:</p>\n\n<pre><code>path = \"/home/abod/.gem/specs/api.rubygems.org%443/quick/Marshal.4.8/bundler-1.7.12.gemspec\"\nf = File.open(path, File::RDWR|File::CREAT, 0644){|f|\n  f.flock(File::LOCK_EX)\n  f.flock(File::LOCK_UN)\n}\n</code></pre>\n\n<p>If the above code fails, then the most likely explanation is that you're using a filesystem that doesn't support file locking. This would be consistent with your home directory being mounted to some other filesystem, such as using NFS without a lock daemon.</p>\n\n<p>Edit: OP writes:</p>\n\n<blockquote>\n  <p>Running the code you suggest: test.rb:4:in <code>flock': No locks available @ rb_file_flock - /home/abod/.gem/specs/api.rubygems.org%443/quick/Marshal.4.8/bundler-1.7.12.gems\u200c\u200bpec (Errno::ENOLCK) from test.rb:4:in</code>block in ' from test.rb:3:in <code>open' from test.rb:3:in</code>' </p>\n</blockquote>\n\n<p>That looks to me like your filesystem doesn't provide locking.</p>\n\n<p>I have two suggestions and I'm also adding a bounty to your question to help attract expert attention.</p>\n\n<ul>\n<li><p>If you have any filesystem space on that computer that isn't a mounted compute cluster, try installing a gem there. You can set the  <code>GEM_HOME</code> environment variable like this:</p>\n\n<pre><code>GEM_HOME=/foo/bar gem install &lt;name&gt;\n</code></pre></li>\n<li><p>If you can use a similar system, such as the same OS on VirtualBox or VMWare, then you can use the <code>bundler</code> gem, a <code>Gemfile</code>, and the command <code>bundle pack</code>. This creates a directory full of the gems listed in the Gemfile. You can then copy this directory anywhere you want, for example by using rsync, or scp, or sftp, etc. (This doesn't help much though with native gems, such as <code>pg</code> for PostgreSQL - you would need to be sure to install all the PostgresSQL dependencies and headers on your own).</p></li>\n</ul>\n"}, {"comments": [{"owner": {"reputation": 359, "user_id": 3109926, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/r7ymx.png?s=128&g=1", "display_name": "Lencho Reyes", "link": "https://stackoverflow.com/users/3109926/lencho-reyes"}, "edited": false, "score": 0, "creation_date": 1424234405, "post_id": 28575666, "comment_id": 45461407, "body": "This suggestion is worth trying. I believe some types of remote mounts don&#39;t even support locking. Please post the output from <code>mount</code>."}], "tags": [], "owner": {"reputation": 1979, "user_id": 133354, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/97504fe1f25180891364fb4a010be56e?s=128&d=identicon&r=PG", "display_name": "vijucat", "link": "https://stackoverflow.com/users/133354/vijucat"}, "is_accepted": false, "score": 1, "last_activity_date": 1424242165, "last_edit_date": 1424242165, "creation_date": 1424231535, "answer_id": 28575666, "question_id": 28313531, "link": "https://stackoverflow.com/questions/28313531/gem-install-errnoenolck-when-installing-gem/28575666#28575666", "title": "gem install Errno::ENOLCK when installing gem", "body": "<p>Ask your Sys Admin to unmount and mount the partition; the NFS Lock Daemon messes up at times and this will reset it.</p>\n\n<p>(Not exactly an elegant or long-term solution, I know).</p>\n"}], "owner": {"reputation": 679, "user_id": 3624381, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/f32f44e789d6de3a61c8385f0476b36b?s=128&d=identicon&r=PG&f=1", "display_name": "Sandy", "link": "https://stackoverflow.com/users/3624381/sandy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1122, "favorite_count": 0, "answer_count": 2, "score": 4, "last_activity_date": 1425002343, "creation_date": 1423024227, "last_edit_date": 1425002343, "question_id": 28313531, "link": "https://stackoverflow.com/questions/28313531/gem-install-errnoenolck-when-installing-gem", "title": "gem install Errno::ENOLCK when installing gem", "body": "<p>Whenever I try to install a gem with <code>gem install [gem-name]</code>, I keep getting this error:</p>\n\n<pre><code>ERROR:  While executing gem ... (Errno::ENOLCK)\n    No locks available @ rb_file_flock - /home/abod/.gem/specs/api.rubygems.org%443/quick/Marshal.4.8/bundler-1.7.12.gemspec\n</code></pre>\n\n<p>I did <code>gem install bundler</code> just for illustration, but the Errno::ENOLCK will occur regardless of the gem I'm trying to install. I've searched around and can't seem to find anything about this error. </p>\n\n<p>Here is the out put from <code>gem env</code>, in case that helps.</p>\n\n<pre><code>RubyGems Environment:\n  - RUBYGEMS VERSION: 2.4.5\n  - RUBY VERSION: 2.2.0 (2014-12-25 patchlevel 0) [x86_64-linux]\n  - INSTALLATION DIRECTORY: /home/abod/.rvm/gems/ruby-2.2.0@global\n  - RUBY EXECUTABLE: /home/abod/.rvm/rubies/ruby-2.2.0/bin/ruby\n  - EXECUTABLE DIRECTORY: /home/abod/.rvm/gems/ruby-2.2.0@global/bin\n  - SPEC CACHE DIRECTORY: /home/abod/.gem/specs\n  - SYSTEM CONFIGURATION DIRECTORY: /home/abod/.rvm/rubies/ruby-2.2.0/etc\n  - RUBYGEMS PLATFORMS:\n    - ruby\n    - x86_64-linux\n  - GEM PATHS:\n     - /home/abod/.rvm/gems/ruby-2.2.0@global\n  - GEM CONFIGURATION:\n     - :update_sources =&gt; true\n     - :verbose =&gt; true\n     - :backtrace =&gt; false\n     - :bulk_threshold =&gt; 1000\n  - REMOTE SOURCES:\n     - https://rubygems.org/\n  - SHELL PATH:\n     - /home/abod/.rvm/gems/ruby-2.2.0@global/bin\n     - /home/abod/.rvm/rubies/ruby-2.2.0/bin\n     - /usr/local/bin\n     - /usr/bin\n     - /usr/local/sbin\n     - /usr/sbin\n     - /home/abod/.rvm/bin\n     - /home/abod/.rvm/bin\n</code></pre>\n\n<p>At the suggestion of @joelparkerhenderson, here are the output of some commands that may be helpful.</p>\n\n<pre><code>$ ulimit -a\ncore file size          (blocks, -c) 0\ndata seg size           (kbytes, -d) unlimited\nscheduling priority             (-e) 0\nfile size               (blocks, -f) unlimited\npending signals                 (-i) 2063389\nmax locked memory       (kbytes, -l) 64\nmax memory size         (kbytes, -m) unlimited\nopen files                      (-n) 32768\npipe size            (512 bytes, -p) 8\nPOSIX message queues     (bytes, -q) 819200\nreal-time priority              (-r) 0\nstack size              (kbytes, -s) 8192\ncpu time               (seconds, -t) unlimited\nmax user processes              (-u) 2063389\nvirtual memory          (kbytes, -v) unlimited\nfile locks                      (-x) unlimited\n\n\n$ uname -a\nLinux biohen36 3.14.23-100.fc19.x86_64 #1 SMP Thu Oct 30 18:36:00 UTC 2014 x86_64 x86_64 x86_64 GNU/Linux\n\n$ stat /home/abod/.gem/specs/api.rubygems.org%443/quick/Marshal.4.8/bundler-1.7.12.gemspec\n  File: \u2018/home/abod/.gem/specs/api.rubygems.org%443/quick/Marshal.4.8/bundler-1.7.12.gemspec\u2019\n  Size: 1025        Blocks: 8          IO Block: 1048576 regular file\nDevice: 2fh/47d Inode: 2285894     Links: 1\nAccess: (0644/-rw-r--r--)  Uid: (  730/    abod)   Gid: ( 1013/ wommack)\nAccess: 2015-02-03 01:12:35.573192019 -0500\nModify: 2015-02-02 13:53:41.227813208 -0500\nChange: 2015-02-02 13:53:41.227813208 -0500\n Birth: -\n\n$ fuser -m /home/abod/.gem/specs/api.rubygems.org%443/quick/Marshal.4.8/bundler-1.7.12.gemspec\n/home/abod/.gem/specs/api.rubygems.org%443/quick/Marshal.4.8/bundler-1.7.12.gemspec: 57788c\n</code></pre>\n\n<p>There were more processes accessing the file, but I killed them and tried to install again, but I still got the lock error. I'm not out of disk space either.</p>\n\n<p>Here is some more info:\nThis is on a compute cluster. The home directory <code>/home/abod</code> is symlinked somewhere on /mnt which mounts to some other machine on the network.</p>\n\n<p>The output from mount has been requested by a few commenters. Here are the lines regarding the home directory: </p>\n\n<pre><code>fileserver:/homes on /home type nfs (rw,noatime,nodiratime,vers=3,rsize=1048576,wsize=1048576,namlen=255,soft,nocto,noacl,proto=tcp,timeo=600,retrans=2,sec=sys,mountaddr=128.175.xxx.xxx,mountvers=3,mountport=20048,mountproto=udp,local_lock=none,addr=128.175.xxx.xxx)\n-hosts on /net/fileserver/homes type autofs (rw,relatime,fd=13,pgrp=1368,timeout=300,minproto=5,maxproto=5,offset)\nfileserver:/homes on /net/fileserver/homes type nfs (rw,nosuid,nodev,relatime,vers=3,rsize=1048576,wsize=1048576,namlen=255,hard,proto=tcp,timeo=600,retrans=2,sec=sys,mountaddr=128.175.xxx.xxx,mountvers=3,mountport=20048,mountproto=udp,local_lock=none,addr=128.175.xxx.xxx)\n</code></pre>\n\n<p><strong>Edit</strong>\nI found this ticket on the rubygems github page that is related to my issue: <a href=\"https://github.com/rubygems/rubygems/issues/1176\" rel=\"nofollow\">https://github.com/rubygems/rubygems/issues/1176</a></p>\n"}, {"tags": ["ruby"], "answers": [{"comments": [{"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 1, "creation_date": 1423023679, "post_id": 28313418, "comment_id": 44976922, "body": "To complement the answer,  because of the space pointed out,  <code>[:session]</code> is interpreted as an array literal, and <code>[:password]</code> is interpreted as <code>Array#[]</code> method call, which expects an integer argument, but the OP is passing a symbol <code>:password</code>."}, {"owner": {"reputation": 41246, "user_id": 129655, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/aa81588f4aa842d08c9539f9313df4cc?s=128&d=identicon&r=PG", "display_name": "Platinum Azure", "link": "https://stackoverflow.com/users/129655/platinum-azure"}, "edited": false, "score": 0, "creation_date": 1423023804, "post_id": 28313418, "comment_id": 44976951, "body": "Presumably because it interprets this as a method call with a single argument of a list literal (<code>[:session]</code>) indexed by a symbol (<code>[:password]</code>)?"}, {"owner": {"reputation": 9, "user_id": 4526936, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Sx8o_iL6gjI/AAAAAAAAAAI/AAAAAAAAAEw/LizZh38ex2s/photo.jpg?sz=128", "display_name": "Doc torly", "link": "https://stackoverflow.com/users/4526936/doc-torly"}, "edited": false, "score": 0, "creation_date": 1423023950, "post_id": 28313418, "comment_id": 44976992, "body": "sorry, commented before your post showed up."}, {"owner": {"reputation": 9, "user_id": 4526936, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Sx8o_iL6gjI/AAAAAAAAAAI/AAAAAAAAAEw/LizZh38ex2s/photo.jpg?sz=128", "display_name": "Doc torly", "link": "https://stackoverflow.com/users/4526936/doc-torly"}, "edited": false, "score": 0, "creation_date": 1423024106, "post_id": 28313418, "comment_id": 44977039, "body": "I guess I really don&#39;t know enough yet to know exactly why this happens in the array. Even though you explained it I still don&#39;t really understand. I&#39;m in chapter 8 of Rails Tutorial and that is most of my exposure so far."}], "tags": [], "owner": {"reputation": 13534, "user_id": 644810, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/ADwSQ.png?s=128&g=1", "display_name": "Rustam A. Gasanov", "link": "https://stackoverflow.com/users/644810/rustam-a-gasanov"}, "is_accepted": true, "score": 2, "last_activity_date": 1423023495, "creation_date": 1423023495, "answer_id": 28313418, "question_id": 28313362, "link": "https://stackoverflow.com/questions/28313362/no-implicit-conversion-of-symbol-into-integer/28313418#28313418", "title": "no implicit conversion of Symbol into Integer?", "body": "<p>You have a space here:</p>\n\n<pre><code>if user &amp;&amp; user.authenticate(params [:session][:password])\n# see?\nparams [:session][:password]\n</code></pre>\n\n<p>Fix it to <code>params[:session][:password]</code> and re-try</p>\n"}], "owner": {"reputation": 9, "user_id": 4526936, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Sx8o_iL6gjI/AAAAAAAAAAI/AAAAAAAAAEw/LizZh38ex2s/photo.jpg?sz=128", "display_name": "Doc torly", "link": "https://stackoverflow.com/users/4526936/doc-torly"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2049, "favorite_count": 0, "closed_date": 1423648038, "accepted_answer_id": 28313418, "answer_count": 1, "score": -1, "last_activity_date": 1423023829, "creation_date": 1423023157, "last_edit_date": 1423023829, "question_id": 28313362, "link": "https://stackoverflow.com/questions/28313362/no-implicit-conversion-of-symbol-into-integer", "closed_reason": "Not suitable for this site", "title": "no implicit conversion of Symbol into Integer?", "body": "<p>I can't seem to find what is causing this bug. The server is saying that it is line #8 in this code:</p>\n\n<pre><code>  class SessionsController &lt; ApplicationController\n\n  def new\n  end\n\n  def create \n    user = User.find_by(email: params[:session][:email].downcase)\n    if user &amp;&amp; user.authenticate(params [:session][:password])\n       log_in user\n       redirect_to user     \n    else\n        flash.now[:danger] = 'Invalid email/password combination'\n        render 'new'\n    end\n  end\n\n  def destroy\n  end\n\nend\n</code></pre>\n\n<p>Any help would be appreciated.</p>\n"}, {"tags": ["ruby", "authentication", "oauth", "sinatra", "jwt"], "comments": [{"owner": {"reputation": 1602, "user_id": 2378567, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/58a7b7fa4936dd6c66590607d9247237?s=128&d=identicon&r=PG", "display_name": "Hugo", "link": "https://stackoverflow.com/users/2378567/hugo"}, "reply_to_user": {"reputation": 32543, "user_id": 528726, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/6307569a99dd77fff0463032051d7e39?s=128&d=identicon&r=PG", "display_name": "joelparkerhenderson", "link": "https://stackoverflow.com/users/528726/joelparkerhenderson"}, "edited": false, "score": 0, "creation_date": 1423452232, "post_id": 28313203, "comment_id": 45139840, "body": "@joelparkerhenderson I commented on your answer but I never got an answer to that. It helped me though yes. I&#39;ll mark it but please answer."}, {"owner": {"reputation": 1602, "user_id": 2378567, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/58a7b7fa4936dd6c66590607d9247237?s=128&d=identicon&r=PG", "display_name": "Hugo", "link": "https://stackoverflow.com/users/2378567/hugo"}, "reply_to_user": {"reputation": 32543, "user_id": 528726, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/6307569a99dd77fff0463032051d7e39?s=128&d=identicon&r=PG", "display_name": "joelparkerhenderson", "link": "https://stackoverflow.com/users/528726/joelparkerhenderson"}, "edited": false, "score": 0, "creation_date": 1423452293, "post_id": 28313203, "comment_id": 45139856, "body": "@joelparkerhenderson I had up voted the answer but not accepted it."}, {"owner": {"reputation": 1602, "user_id": 2378567, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/58a7b7fa4936dd6c66590607d9247237?s=128&d=identicon&r=PG", "display_name": "Hugo", "link": "https://stackoverflow.com/users/2378567/hugo"}, "reply_to_user": {"reputation": 32543, "user_id": 528726, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/6307569a99dd77fff0463032051d7e39?s=128&d=identicon&r=PG", "display_name": "joelparkerhenderson", "link": "https://stackoverflow.com/users/528726/joelparkerhenderson"}, "edited": false, "score": 0, "creation_date": 1423459374, "post_id": 28313203, "comment_id": 45141562, "body": "@joelparkerhenderson I just saw it now thanks. It&#39;s a good answer. I couldn&#39;t find anything online about what a good approach would be for this and it&#39;s really quite simple."}], "answers": [{"comments": [{"owner": {"reputation": 1602, "user_id": 2378567, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/58a7b7fa4936dd6c66590607d9247237?s=128&d=identicon&r=PG", "display_name": "Hugo", "link": "https://stackoverflow.com/users/2378567/hugo"}, "edited": false, "score": 0, "creation_date": 1423063364, "post_id": 28315795, "comment_id": 44997587, "body": "Okay but what should I use to generate the actual key? I&#39;m thinking something like <code>Base64.encode64(SecureRandom.random_bytes(128))</code>. Is that okay? Should it be longer or different?"}], "tags": [], "owner": {"reputation": 32543, "user_id": 528726, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/6307569a99dd77fff0463032051d7e39?s=128&d=identicon&r=PG", "display_name": "joelparkerhenderson", "link": "https://stackoverflow.com/users/528726/joelparkerhenderson"}, "is_accepted": true, "score": 3, "last_activity_date": 1423452409, "last_edit_date": 1423452409, "creation_date": 1423034940, "answer_id": 28315795, "question_id": 28313203, "link": "https://stackoverflow.com/questions/28313203/how-to-sign-jwt/28315795#28315795", "title": "How to sign JWT?", "body": "<p>Use any kind of application secret key, not a user's bcrypt password digest.</p>\n\n<p>For example, use the dot env gem and a .env file, with an entry such as:</p>\n\n<pre><code>JWT_KEY=YOURSIGNINGKEYGOESHERE\n</code></pre>\n\n<p>I personally generate a key by using a simple random hex string:</p>\n\n<pre><code>SecureRandom.hex(64)\n</code></pre>\n\n<p>The hex string contains just 0-9 and a-f, so the string is URL safe.</p>\n"}, {"tags": [], "owner": {"reputation": 163, "user_id": 5555492, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jzhQj.jpg?s=128&g=1", "display_name": "Control Complex", "link": "https://stackoverflow.com/users/5555492/control-complex"}, "is_accepted": false, "score": 1, "last_activity_date": 1447351634, "last_edit_date": 1495540739, "creation_date": 1447351634, "answer_id": 33678317, "question_id": 28313203, "link": "https://stackoverflow.com/questions/28313203/how-to-sign-jwt/33678317#33678317", "title": "How to sign JWT?", "body": "<p>According to <a href=\"https://en.wikipedia.org/wiki/Key_(cryptography)\" rel=\"nofollow noreferrer\">wikipedia</a>, a secret key used in cryptography is basically just that, a key to open the lock. The key should be consistent and reliable, but not easy to duplicate, just like a key you would use on your home.</p>\n\n<p>As stated in <a href=\"https://stackoverflow.com/a/28841267/5555492\">this answer</a>, secret keys should be randomly-generated. However, you still want the key to be retained for use across the application. By using the password digest from bcrypt, you are actually using a hashed key that was derived from a base secret key (the password). Because the hash is random, this is not a reliable secret key to use, as you stated.</p>\n\n<p>The previous answer using <code>SecureRandom.hex(64)</code> is a great way to create an initial base application key. However, in a production system, you should be taking this in as a configuration variable and storing it for consistent use across multiple runs of your application (for example following a server reboot, you should not invalidate all of your user's JWTs) or across multiple distributed servers. <a href=\"http://daniel.fone.net.nz/blog/2013/05/20/a-better-way-to-manage-the-rails-secret-token/\" rel=\"nofollow noreferrer\">This article</a> gives an example of pulling in the secret key from an environment variable for rails.</p>\n"}, {"tags": [], "owner": {"reputation": 1123, "user_id": 7964557, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-9W8nHaY7V4Y/AAAAAAAAAAI/AAAAAAAAAGA/aoLc6RbiiRc/photo.jpg?sz=128", "display_name": "Marcelo Fonseca", "link": "https://stackoverflow.com/users/7964557/marcelo-fonseca"}, "is_accepted": false, "score": 2, "last_activity_date": 1600431005, "last_edit_date": 1600431005, "creation_date": 1548974693, "answer_id": 54470333, "question_id": 28313203, "link": "https://stackoverflow.com/questions/28313203/how-to-sign-jwt/54470333#54470333", "title": "How to sign JWT?", "body": "<p>For RS256 public and private key strategy you can use Ruby OpenSSL lib:</p>\n<p>Generating keys:</p>\n<pre><code>key = OpenSSL::PKey::RSA.new 2048\n\nopen 'private_key.pem', 'w' do |io| io.write key.to_pem end\nopen 'public_key.pem', 'w' do |io| io.write key.public_key.to_pem end\n</code></pre>\n<p>Load key from .pem file to sign token:</p>\n<pre><code>priv_key = OpenSSL::PKey::RSA.new File.read 'private_key.pem'\ntoken = JWT.encode payload, priv_key, 'RS256'\n</code></pre>\n<p>Load key from .pem file to Verify token(Create a middleware for this):</p>\n<pre><code>      begin\n        # env.fetch gets http header\n        bearer = env.fetch('HTTP_AUTHORIZATION').slice(7..-1)\n        pub_key = OpenSSL::PKey::RSA.new File.read 'public_key.pem'\n        payload = JWT.decode bearer, pub_key, true, { algorithm: 'RS256'}\n        \n        # access your payload here\n  \n        @app.call env\n\n      rescue JWT::ExpiredSignature\n        [403, { 'Content-Type' =&gt; 'text/plain' }, ['The token has expired.']]\n      rescue JWT::DecodeError\n        [401, { 'Content-Type' =&gt; 'text/plain' }, ['A token must be passed.']]\n      rescue JWT::InvalidIssuerError\n        [403, { 'Content-Type' =&gt; 'text/plain' }, ['The token does not have a valid issuer.']]\n      rescue JWT::InvalidIatError\n        [403, { 'Content-Type' =&gt; 'text/plain' }, ['The token does not have a valid &quot;issued at&quot; time.']]\n      end\n</code></pre>\n<p>To use RSA key in your <code>.env</code> instead of loading a file, you will need to use <code>gem 'dotenv'</code> and import the key as a single line variable with the use of newline <code>'\\n'</code>. check this <a href=\"https://stackoverflow.com/questions/49457787/how-to-export-a-multi-line-environment-variable-in-bash-terminal-e-g-rsa-privat/61978397#61978397\">question</a> on how to do it. example:</p>\n<pre><code>PUBLIC_KEY=&quot;-----BEGIN PUBLIC KEY-----\\nmineminemineminemine\\nmineminemineminemine\\nmineminemine...\\n-----END PUBLIC KEY-----\\n&quot;\n</code></pre>\n<p>as an <code>.env</code> <code>PUBLIC_KEY</code> variable, loading the key will change to this:</p>\n<pre><code>key = OpenSSL::PKey::RSA.new ENV['PUBLIC_KEY']\n</code></pre>\n"}], "owner": {"reputation": 1602, "user_id": 2378567, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/58a7b7fa4936dd6c66590607d9247237?s=128&d=identicon&r=PG", "display_name": "Hugo", "link": "https://stackoverflow.com/users/2378567/hugo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1234, "favorite_count": 1, "accepted_answer_id": 28315795, "answer_count": 3, "score": 5, "last_activity_date": 1600431005, "creation_date": 1423021969, "question_id": 28313203, "link": "https://stackoverflow.com/questions/28313203/how-to-sign-jwt", "title": "How to sign JWT?", "body": "<p>I'm trying to secure a Sinatra API.</p>\n\n<p>I'm using <code>ruby-jwt</code> to create the JWT, but I don't know exactly what to sign it with.</p>\n\n<p>I'm trying to use the user's BCrypt <code>password_digest</code>, but every time <code>password_digest</code> is called it changes, making the signature invalid when I go to verify it.</p>\n"}, {"tags": ["ruby", "json", "serialization"], "answers": [{"comments": [{"owner": {"reputation": 355, "user_id": 911052, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8f906b67ce2079404e773aceb2eaf31b?s=128&d=identicon&r=PG", "display_name": "Adam Spindler", "link": "https://stackoverflow.com/users/911052/adam-spindler"}, "edited": false, "score": 1, "creation_date": 1423025638, "post_id": 28313500, "comment_id": 44977380, "body": "Thanks that worked perfectly. I would just like to note for anyone reading this in the future that the to_h method was added in ruby 2.0, so if you&#39;re using 1.9.3 like I was you&#39;ll have to upgrade."}], "tags": [], "owner": {"reputation": 4905, "user_id": 69836, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/71ae352527d409c830fc7843d0e016e3?s=128&d=identicon&r=PG", "display_name": "locriani", "link": "https://stackoverflow.com/users/69836/locriani"}, "is_accepted": true, "score": 18, "last_activity_date": 1423024040, "creation_date": 1423024040, "answer_id": 28313500, "question_id": 28313102, "link": "https://stackoverflow.com/questions/28313102/ruby-serialize-struct-with-json/28313500#28313500", "title": "Ruby serialize struct with JSON", "body": "<p>In this case, <code>person.to_json</code> is not doing what you expect.</p>\n\n<p>When you <code>require 'json'</code>, the JSON library inserts a <code>#to_json</code> method on <code>Object</code> that is a fallback if there's no specialized <code>#to_json</code> method provided elsewhere. <a href=\"http://ruby-doc.org/stdlib-2.1.3/libdoc/json/rdoc/JSON/Ext/Generator/GeneratorMethods/Object.html\">This inserted method</a> is basically the same as calling <code>#to_s#to_json</code> on an object.</p>\n\n<p>In the case of your <code>Person</code> class here, <code>#to_s</code> outputs the <a href=\"http://ruby-doc.org/core-2.2.0/Object.html#method-i-to_s\">standard <code>Object#to_s</code></a>, which, by default, doesn't provide a string parseable by the JSON library.</p>\n\n<p>However, <code>Struct</code> <em>does</em> provide a <code>#to_h</code> method that can be used to convert that struct to a <code>Hash</code>, and <code>Hash</code> is (upon requiring the JSON library) aware of how to generate a JSON parseable output.</p>\n\n<p>So simply changing:</p>\n\n<pre><code>json = Person.new('Adam', 19).to_json\nputs json\n</code></pre>\n\n<p>to:</p>\n\n<pre><code>person = Person.new('Adam', 19)\nputs person.to_h.to_json\n</code></pre>\n\n<p>will do what you expect.</p>\n\n<p>(An aside, I would actually recommend implementing <code>#to_json</code> on the <code>Person</code> class directly as calling <code>#to_h#to_json</code> violates the <a href=\"http://en.wikipedia.org/wiki/Law_of_Demeter\">Law of Demeter</a>.)</p>\n"}, {"tags": [], "owner": {"reputation": 3582, "user_id": 615397, "user_type": "registered", "accept_rate": 54, "profile_image": "https://i.stack.imgur.com/tcKp2.jpg?s=128&g=1", "display_name": "Lex", "link": "https://stackoverflow.com/users/615397/lex"}, "is_accepted": false, "score": 2, "last_activity_date": 1605048933, "last_edit_date": 1605048933, "creation_date": 1533787305, "answer_id": 51758640, "question_id": 28313102, "link": "https://stackoverflow.com/questions/28313102/ruby-serialize-struct-with-json/51758640#51758640", "title": "Ruby serialize struct with JSON", "body": "<p>You can also define a struct with a <code>to_json</code> method. Depends if you're happy with calling <code>to_h.to_json</code>. If it's only called once internally in a class, it may be tolerable and ignore this. But if the struct is used throughout a system below is a convient helper method on the struct.</p>\n<pre><code>require 'struct'\nrequire 'json'\n\nMyStruct = Struct.new(:foo, :bar) do\n  def to_json\n    to_h.to_json\n  end\nend\n\nsimple_struct = MyStruct.new(&quot;hello&quot;, &quot;world&quot;)\nsimple_struct.to_json\n\n# =&gt; &quot;{\\&quot;foo\\&quot;:\\&quot;hello\\&quot;,\\&quot;bar\\&quot;:\\&quot;world\\&quot;}&quot;\n</code></pre>\n"}], "owner": {"reputation": 355, "user_id": 911052, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8f906b67ce2079404e773aceb2eaf31b?s=128&d=identicon&r=PG", "display_name": "Adam Spindler", "link": "https://stackoverflow.com/users/911052/adam-spindler"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 5890, "favorite_count": 1, "accepted_answer_id": 28313500, "answer_count": 2, "score": 10, "last_activity_date": 1605048933, "creation_date": 1423021192, "question_id": 28313102, "link": "https://stackoverflow.com/questions/28313102/ruby-serialize-struct-with-json", "title": "Ruby serialize struct with JSON", "body": "<p>I am trying to serialize a simple struct to JSON which works fine, but I can't get it to create an instance of that struct from the JSON. Here is how I am trying to do it.</p>\n\n<pre><code>require 'rubygems'\nrequire 'json'\n\nPerson = Struct.new(:name, :age)\n\njson = Person.new('Adam', 19).to_json\nputs json\n\nme = JSON.load(json)\nputs me.name\n</code></pre>\n\n<p>And I get the following output:</p>\n\n<pre><code>\"#&lt;struct Person name=\\\"Adam\\\", age=19&gt;\"\n/usr/lib/ruby/1.9.1/json/common.rb:148:in `parse': 746: unexpected token at '\"#&lt;struct Person name=\\\"Adam\\\", age=19&gt;\"' (JSON::ParserError)\n    from /usr/lib/ruby/1.9.1/json/common.rb:148:in `parse'\n    from /usr/lib/ruby/1.9.1/json/common.rb:309:in `load'\n    from why.rb:9:in `&lt;main&gt;'\n</code></pre>\n"}, {"tags": ["ruby", "registry"], "answers": [{"comments": [{"owner": {"reputation": 7374, "user_id": 1634753, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/aa962e4482e6eb20f3985622a039f0fe?s=128&d=identicon&r=PG", "display_name": "Rilcon42", "link": "https://stackoverflow.com/users/1634753/rilcon42"}, "edited": false, "score": 0, "creation_date": 1423070946, "post_id": 28325354, "comment_id": 45002906, "body": "Yep, I had two problems, the hive (Software\\Psychsoft) had to be replaced with one that actually existed (Software\\Microsoft) then I needed to remove the extra slash which meant I needed to change the quotes to single."}], "tags": [], "owner": {"reputation": 40236, "user_id": 923315, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/j6lLI.jpg?s=128&g=1", "display_name": "peter", "link": "https://stackoverflow.com/users/923315/peter"}, "is_accepted": true, "score": 0, "last_activity_date": 1423064350, "creation_date": 1423064350, "answer_id": 28325354, "question_id": 28312708, "link": "https://stackoverflow.com/questions/28312708/create-and-edit-reg-key-in-ruby/28325354#28325354", "title": "Create and Edit reg key in Ruby", "body": "<p>I suppose your registry path needs to be enclosed in single '\nYour code works like this</p>\n\n<pre><code>profiles_key = 'Software\\Microsoft'\n\nputs setKeyStringValue(Win32::Registry::HKEY_CURRENT_USER, profiles_key, \"foo\", \"woo\")\n\nputs getKeyValue(Win32::Registry::HKEY_CURRENT_USER, profiles_key, \"foo\")\n</code></pre>\n\n<p>Which gives </p>\n\n<pre><code>opened key\ntrue\nwoo\n</code></pre>\n"}], "owner": {"reputation": 7374, "user_id": 1634753, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/aa962e4482e6eb20f3985622a039f0fe?s=128&d=identicon&r=PG", "display_name": "Rilcon42", "link": "https://stackoverflow.com/users/1634753/rilcon42"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1223, "favorite_count": 0, "accepted_answer_id": 28325354, "answer_count": 1, "score": 1, "last_activity_date": 1423064350, "creation_date": 1423018211, "question_id": 28312708, "link": "https://stackoverflow.com/questions/28312708/create-and-edit-reg-key-in-ruby", "title": "Create and Edit reg key in Ruby", "body": "<p>I am trying to create and edit a reg key in ruby but keep getting the following error:</p>\n\n<pre><code>setKeyStringValue error:\nfalse\nerror in 'open' system cannot find file specified\n</code></pre>\n\n<p>My code:</p>\n\n<pre><code>require 'win32/registry' \n\n$hkey_local_machine=Win32::Registry::HKEY_LOCAL_MACHINE \n$hkey_current_user=Win32::Registry::HKEY_CURRENT_USER  \n\n# Returns the Microsoft Registry path to the Microsoft software information \ndef getKeyValue(hive, key_path, key_name) \n  reg_obj=hive.open(key_path, Win32::Registry::KEY_READ) \n  begin \n          reg_typ, reg_val = reg_obj.read(key_name) \n   rescue Win32::Registry::Error \n          puts \"key not found : #{key_name}\" \n    end \n    return reg_val \nend \n\n#used to set a String value for a key \ndef setKeyStringValue(hive,key_path, key_name, key_value) \nbegin\n    reg_key=hive.open(key_path, Win32::Registry::KEY_WRITE) \n    puts \"opened key\"\n    reg_key.write(key_name,Win32::Registry::REG_SZ,key_value) \nrescue Win32::Registry::Error \n    puts \"setKeyStringValue error:\"\n    return false\nend \nreturn true\nend \n\nputs setKeyStringValue(Win32::Registry::HKEY_CURRENT_USER,\"SOFTWARE\\\\PsychSoft\",\"foo\",\"woo\")\n\nputs getKeyValue(Win32::Registry::HKEY_CURRENT_USER,\"SOFTWARE\\\\PsychSoft\",\"foo\")\n</code></pre>\n\n<p>Can someone explain why this code doesnt work? </p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 6058, "user_id": 662425, "user_type": "registered", "accept_rate": 57, "profile_image": "https://lh6.googleusercontent.com/-JXe9IA2rZYM/AAAAAAAAAAI/AAAAAAAAGEg/RlIJwUwmP90/photo.jpg?sz=128", "display_name": "AnkitG", "link": "https://stackoverflow.com/users/662425/ankitg"}, "edited": false, "score": 0, "creation_date": 1423017755, "post_id": 28312635, "comment_id": 44975519, "body": "Update the question with error"}, {"owner": {"reputation": 10736, "user_id": 2498956, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/9eb217f1dbc6265004df4c2d4fb2f3e9?s=128&d=identicon&r=PG", "display_name": "August", "link": "https://stackoverflow.com/users/2498956/august"}, "edited": false, "score": 0, "creation_date": 1423017775, "post_id": 28312635, "comment_id": 44975528, "body": "What isn&#39;t working as expected?"}, {"owner": {"reputation": 3558, "user_id": 3150426, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/NiXVs.jpg?s=128&g=1", "display_name": "loan.burger", "link": "https://stackoverflow.com/users/3150426/loan-burger"}, "edited": false, "score": 0, "creation_date": 1423017863, "post_id": 28312635, "comment_id": 44975560, "body": "Please be more specific as to the error your getting.  Make sure gets.chomp has a value"}], "answers": [{"tags": [], "owner": {"reputation": 14010, "user_id": 3109182, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/a4b305f0077055b4fdcf715067775d5a?s=128&d=identicon&r=PG", "display_name": "Anthony", "link": "https://stackoverflow.com/users/3109182/anthony"}, "is_accepted": false, "score": 1, "last_activity_date": 1423056613, "last_edit_date": 1423056613, "creation_date": 1423017780, "answer_id": 28312652, "question_id": 28312635, "link": "https://stackoverflow.com/questions/28312635/why-doesnt-my-sales-tax-calculator-work/28312652#28312652", "title": "Why doesn&#39;t my sales tax calculator work?", "body": "<p>When you enter in a value from your prompt, it will come in as a String.  You'll want to convert it to a float using <a href=\"http://ruby-doc.org/core-2.2.0/String.html#method-i-to_f\" rel=\"nofollow\"><code>String#to_f</code></a>.</p>\n\n<p>For instance:</p>\n\n<pre><code>price = gets.to_f\n</code></pre>\n\n<p>If you gave the prompt 10.0 it would convert it like this:</p>\n\n<pre><code>[16] pry(main)&gt; \"10.0\\n\".to_f\n=&gt; 10.0\n</code></pre>\n\n<p>chomp doesn't appear necessary for this, simply calling <code>to_f</code> is removing the newline character which is something I just learned!</p>\n"}], "owner": {"reputation": 11, "user_id": 4526761, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/52998b1026ad39b84c157cfb773e1dd5?s=128&d=identicon&r=PG&f=1", "display_name": "wickedwes", "link": "https://stackoverflow.com/users/4526761/wickedwes"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 312, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1423056613, "creation_date": 1423017658, "question_id": 28312635, "link": "https://stackoverflow.com/questions/28312635/why-doesnt-my-sales-tax-calculator-work", "title": "Why doesn&#39;t my sales tax calculator work?", "body": "<pre><code>puts \"Hello, welcome to the sales tax calculator\"\nputs \"What is your total price?\"\nprice = gets.chomp\ntax = 0.0635 * price\ntotal = tax + price\nputs \"#{total} is your price including sales tax\"\n</code></pre>\n\n<p>It should take the price and add the sales tax. Sorry, Ruby noob.</p>\n"}, {"tags": ["ruby", "gem", "bundler"], "answers": [{"tags": [], "owner": {"reputation": 5921, "user_id": 29470, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/926224cbb63e5b617300e99c89051ce7?s=128&d=identicon&r=PG", "display_name": "Tim Moore", "link": "https://stackoverflow.com/users/29470/tim-moore"}, "is_accepted": true, "score": 3, "last_activity_date": 1423274817, "creation_date": 1423274817, "answer_id": 28377771, "question_id": 28312531, "link": "https://stackoverflow.com/questions/28312531/ruby-gem-bundler-caching-my-local-gem-files/28377771#28377771", "title": "Ruby/Gem/Bundler Caching my local gem files", "body": "<p>Have you tried running <code>spring stop</code> and restarting your server (assuming this is a Rails app)?</p>\n\n<p>If it's referencing the file in the right place but executing the wrong code, that indicates that the old code is still loaded into memory. Often, this is because of the Spring pre-loader, which is used by default with Rails 4.1+.</p>\n"}], "owner": {"reputation": 1168, "user_id": 190159, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/85410d5f0c5941869d487ece6e9d6c89?s=128&d=identicon&r=PG", "display_name": "Daniel", "link": "https://stackoverflow.com/users/190159/daniel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 241, "favorite_count": 0, "accepted_answer_id": 28377771, "answer_count": 1, "score": 1, "last_activity_date": 1548928117, "creation_date": 1423017009, "question_id": 28312531, "link": "https://stackoverflow.com/questions/28312531/ruby-gem-bundler-caching-my-local-gem-files", "title": "Ruby/Gem/Bundler Caching my local gem files", "body": "<p>I'm working on a gem locally, referenced it using bundle config local.GEMNAME (this is confirmed by the printout of bundle install).  However, unless I bump the version on the gem, I can't use the most up-to-date code.  When errors occur in the old code, it references the file in the right place, where I have fixed the error.  I temporarily had bundler-cache-all switched on, but have turned that to false (and deleted .bundle/config).</p>\n\n<p>Where is this cache living (I'm on OSX, using RBenv and ruby 2.1.2), and how can I turn it off?</p>\n"}, {"tags": ["ruby", "string"], "comments": [{"owner": {"reputation": 13757, "user_id": 1270003, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/d5ed9123b92a6e4dffa75f9f6dd9e382?s=128&d=identicon&r=PG&f=1", "display_name": "texasbruce", "link": "https://stackoverflow.com/users/1270003/texasbruce"}, "edited": false, "score": 4, "creation_date": 1423016229, "post_id": 28312387, "comment_id": 44975098, "body": "Have no idea what you are asking"}, {"owner": {"reputation": 14010, "user_id": 3109182, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/a4b305f0077055b4fdcf715067775d5a?s=128&d=identicon&r=PG", "display_name": "Anthony", "link": "https://stackoverflow.com/users/3109182/anthony"}, "edited": false, "score": 0, "creation_date": 1423016251, "post_id": 28312387, "comment_id": 44975101, "body": "you just want the last 2 characters of any string?"}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1423040079, "post_id": 28312387, "comment_id": 44983277, "body": "I suggest you edit your question to clarify. If <code>text = &quot;Nap...&quot;</code>, you should write it that way. If <code>clearnum</code> equals <code>2</code>, write <code>clearnum = 2</code>. I suggest you say what you want the array <code>textdata</code> to contain and merely ask  how you can do that. Yes, regular expressions can be used, but there are other ways that use only methods of the <code>String</code> class. You&#39;ll learn how to do it both ways if you focus on your end objective rather than limiting answers to the use of regexes."}], "answers": [{"comments": [{"owner": {"reputation": 105, "user_id": 3571412, "user_type": "registered", "accept_rate": 84, "profile_image": "https://graph.facebook.com/100002649951057/picture?type=large", "display_name": "user3571412", "link": "https://stackoverflow.com/users/3571412/user3571412"}, "edited": false, "score": 0, "creation_date": 1423017145, "post_id": 28312517, "comment_id": 44975351, "body": "Yeah, but I receive three values: textdata[0] = &quot;&quot;Nao ha nada novo porque somos preguicos&quot; textdata[1] = s and textdata[2] = ."}, {"owner": {"reputation": 47898, "user_id": 966023, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/917fcb4327159076f752c0c3c3fddfbb?s=128&d=identicon&r=PG", "display_name": "pguardiario", "link": "https://stackoverflow.com/users/966023/pguardiario"}, "reply_to_user": {"reputation": 105, "user_id": 3571412, "user_type": "registered", "accept_rate": 84, "profile_image": "https://graph.facebook.com/100002649951057/picture?type=large", "display_name": "user3571412", "link": "https://stackoverflow.com/users/3571412/user3571412"}, "edited": false, "score": 0, "creation_date": 1423051808, "post_id": 28312517, "comment_id": 44990206, "body": "Then you&#39;re doing something weird or using a strange ruby."}], "tags": [], "owner": {"reputation": 47898, "user_id": 966023, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/917fcb4327159076f752c0c3c3fddfbb?s=128&d=identicon&r=PG", "display_name": "pguardiario", "link": "https://stackoverflow.com/users/966023/pguardiario"}, "is_accepted": false, "score": 0, "last_activity_date": 1423016892, "creation_date": 1423016892, "answer_id": 28312517, "question_id": 28312387, "link": "https://stackoverflow.com/questions/28312387/split-string-in-fixed-length-number/28312517#28312517", "title": "Split string in fixed length number", "body": "<p>It sounds like you want:</p>\n\n<pre><code>text = \"Nao ha nada novo porque somos preguicosos.\"\nclearnum = 2\ntextdata = text.scan(/.{1,#{text.length - clearnum }}/)\n#=&gt; [\"Nao ha nada novo porque somos preguicoso\", \"s.\"]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 10247, "user_id": 386188, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/IX45D.jpg?s=128&g=1", "display_name": "Toan Nguyen", "link": "https://stackoverflow.com/users/386188/toan-nguyen"}, "is_accepted": true, "score": 0, "last_activity_date": 1423018381, "creation_date": 1423018381, "answer_id": 28312736, "question_id": 28312387, "link": "https://stackoverflow.com/questions/28312387/split-string-in-fixed-length-number/28312736#28312736", "title": "Split string in fixed length number", "body": "<p>you can do something like this</p>\n\n<pre><code>clearnum = 2\ntext0 = text[0, text.length -clearnum]\ntext1 = text[-clearnum,clearnum]\n</code></pre>\n"}], "owner": {"reputation": 105, "user_id": 3571412, "user_type": "registered", "accept_rate": 84, "profile_image": "https://graph.facebook.com/100002649951057/picture?type=large", "display_name": "user3571412", "link": "https://stackoverflow.com/users/3571412/user3571412"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 181, "favorite_count": 0, "accepted_answer_id": 28312736, "answer_count": 2, "score": -3, "last_activity_date": 1423150126, "creation_date": 1423016096, "last_edit_date": 1423150126, "question_id": 28312387, "link": "https://stackoverflow.com/questions/28312387/split-string-in-fixed-length-number", "title": "Split string in fixed length number", "body": "<p>I have a problem using <code>scan</code> with strings. My string is: (text variable)</p>\n\n<pre><code>\"Nao ha nada novo porque somos preguicosos.\"\n</code></pre>\n\n<p>I use:</p>\n\n<pre><code>textdata = text.scan(/.{#{text.length - clearnum }}/)\n</code></pre>\n\n<p><code>textdata[0]</code> is:</p>\n\n<pre><code>\"Nao ha nada novo porque somos preguicoso\"\n</code></pre>\n\n<p>and <code>textdata[1]</code> is nothing. I need <code>textdata[1]</code> to be <code>\"s.\"</code>. Does anyone have a solution?</p>\n"}, {"tags": ["ruby", "shoes"], "comments": [{"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1423016904, "post_id": 28312179, "comment_id": 44975274, "body": "What is your question?"}, {"owner": {"reputation": 7374, "user_id": 1634753, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/aa962e4482e6eb20f3985622a039f0fe?s=128&d=identicon&r=PG", "display_name": "Rilcon42", "link": "https://stackoverflow.com/users/1634753/rilcon42"}, "reply_to_user": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1423018480, "post_id": 28312179, "comment_id": 44975745, "body": "thanks for the tip, I made my question more obvious."}], "owner": {"reputation": 7374, "user_id": 1634753, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/aa962e4482e6eb20f3985622a039f0fe?s=128&d=identicon&r=PG", "display_name": "Rilcon42", "link": "https://stackoverflow.com/users/1634753/rilcon42"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 92, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1425269767, "creation_date": 1423014697, "last_edit_date": 1425269767, "question_id": 28312179, "link": "https://stackoverflow.com/questions/28312179/flow-text-alignment-issue", "title": "Flow text alignment issue", "body": "<p>When I run my code it crashes with the error: undefined method para for nil:class. All I am trying to do is make the text appear to the right of the button that is declared. Anybody know how to fix this?</p>\n\n<p>My code (using ruby version 2.0.0, latest green_shoes version):</p>\n\n<pre><code>require 'green_shoes'\n\nShoes.app do            \nfl=flow(margin: 12) do\n    openBtn=button \"Btn Here\"\n    begin\n        fl.para \"text should appear to right of button\"\n        lc=edit_line()  #should be on its own line\n    rescue Exception=&gt;ex\n        puts \"error in application: \\ntype: #{ex.class}\\nmessage: #{ex.message}\"\n    end     \nend \nend\n</code></pre>\n"}, {"tags": ["ruby", "chef-infra", "recipe"], "answers": [{"tags": [], "owner": {"reputation": 15030, "user_id": 3627607, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bd5fd623c0fdd0c93a2535cf6293ec5d?s=128&d=identicon&r=PG", "display_name": "Tensibai", "link": "https://stackoverflow.com/users/3627607/tensibai"}, "is_accepted": false, "score": 0, "last_activity_date": 1423036975, "creation_date": 1423036975, "answer_id": 28316324, "question_id": 28311850, "link": "https://stackoverflow.com/questions/28311850/chef-recipe-node-hash-doesnt-have-the-same-data-as-in-chef-server-node-data/28316324#28316324", "title": "Chef recipe node hash doesn&#39;t have the same data as in chef server node data", "body": "<p>The node etc key is created by ohai (and is under a automatic key) and rewritten at each run, trying to set thoose attributes in node object won't work.</p>\n\n<p>You can't override automatic attributes.</p>\n\n<p>You can have more details on what is done on a chef run <a href=\"http://docs.chef.io/chef_client.html#the-chef-client-title-run\" rel=\"nofollow\">here</a> and details about attributes <a href=\"http://docs.chef.io/ohai.html\" rel=\"nofollow\">here</a></p>\n\n<p>What you can do here is creating the group in your recipe with the <code>group</code> resource and reload ohai data before entering the loop.</p>\n\n<p>Exemple (heavily inspired from <a href=\"http://docs.chef.io/ohai.html#id3\" rel=\"nofollow\">the doc</a> ):</p>\n\n<pre><code>ohai \"reload_passwd\" do\n  action :nothing\n  plugin \"etc\"\nend\ngroup 'somegroup' do\n  gid 12345\n  notifies :reload, \"ohai[reload_passwd]\", :immediately\nend\n\nruby_block \"your code\" do # in a ruby block to be run at converge time and not at compile time.\n  if node[:etc][:group].has_key?('someuser') and node[:etc][:group][:someuser][:gid] == 12345\n    # do something...\n  else\n    # do something else...\n  end\nend\n</code></pre>\n\n<p>But the group creation could be in your else block, and next chef run will enter the if block as the group will exist.</p>\n"}], "owner": {"reputation": 1660, "user_id": 2162144, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/1a1addc9bc5b27c5d5e747e97c63fce4?s=128&d=identicon&r=PG", "display_name": "tytk", "link": "https://stackoverflow.com/users/2162144/tytk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 170, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1423036975, "creation_date": 1423012699, "question_id": 28311850, "link": "https://stackoverflow.com/questions/28311850/chef-recipe-node-hash-doesnt-have-the-same-data-as-in-chef-server-node-data", "title": "Chef recipe node hash doesn&#39;t have the same data as in chef server node data", "body": "<p>I have a conditional in a recipe that checks for some node data:</p>\n\n<pre><code>if node[:etc][:group].has_key?('someuser') and node[:etc][:group][:someuser][:gid] == 12345\n    # do something...\nelse\n    # do something else...\nend\n</code></pre>\n\n<p>And I used <code>knife node edit hostname.mydomain.com</code> to add this data to my node object, as shown by </p>\n\n<pre><code>$ knife node show hostname.mydomain.com -m\nNode Name:   hostname.mydomain.com\nEnvironment: ...\nFQDN:        hostname.mydomain.com\nIP:          ...\nRun List:    ...\nRoles:       ...\nRecipes:     ...\nPlatform:    ...\nTags:        ...\nAttributes:..\netc:\n  group:\n    someuser:\n      gid:     12345\n      members:\n\ntags:        ...\n</code></pre>\n\n<p>However, the <code>else</code> clause is being executed instead of the <code>if</code> clause. I checked that this is the version of the recipe that is being run on the node (looked at the recipe that was downloaded to the node). I thought I had set up my node correctly to execute the <code>if</code> clause so why is the <code>else</code> clause executing? Thanks.</p>\n"}, {"tags": ["ruby"], "answers": [{"tags": [], "owner": {"reputation": 10247, "user_id": 386188, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/IX45D.jpg?s=128&g=1", "display_name": "Toan Nguyen", "link": "https://stackoverflow.com/users/386188/toan-nguyen"}, "is_accepted": false, "score": 0, "last_activity_date": 1423092191, "last_edit_date": 1423092191, "creation_date": 1423011764, "answer_id": 28311712, "question_id": 28311634, "link": "https://stackoverflow.com/questions/28311634/how-to-accept-only-two-keys-before-user-submit/28311712#28311712", "title": "How to Accept ONLY Two Keys Before User :Submit?", "body": "<p>You can use a select tag to limit users' options like this</p>\n\n<pre><code>&lt;%= select_tag(:missed , options_for_select([['/', '/'], ['X', 'X']])) %&gt;\n</code></pre>\n"}], "owner": {"reputation": 2578, "user_id": 4383667, "user_type": "registered", "accept_rate": 86, "profile_image": "https://lh3.googleusercontent.com/-0D7SldkahZc/AAAAAAAAAAI/AAAAAAAAAFk/V8nUZfLVtyk/photo.jpg?sz=128", "display_name": "AnthonyGalli.com", "link": "https://stackoverflow.com/users/4383667/anthonygalli-com"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 19, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1423092191, "creation_date": 1423011300, "question_id": 28311634, "link": "https://stackoverflow.com/questions/28311634/how-to-accept-only-two-keys-before-user-submit", "title": "How to Accept ONLY Two Keys Before User :Submit?", "body": "<p>I want people to be able to challenge their habits. If they miss a day they may put \"/\" if they miss two days in a row they must put \"X\". Three X's means they failed the challenge.</p>\n\n<p>How can I force the User to only be able to submit X's and /'s as valid keys in the <code>:missed</code> input field?</p>\n\n<p><strong>_form excerpt</strong>\n<div class=\"snippet\" data-lang=\"js\" data-hide=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>&lt;%= simple_form_for(@habit) do |f| %&gt;\r\n  &lt;%= f.error_notification %&gt;\r\n\r\n  &lt;div class=\"form-inputs\"&gt;\r\n    &lt;%= f.input :missed %&gt;\r\n      \r\n  &lt;div class=\"form-actions\"&gt;\r\n    &lt;%= f.button :submit %&gt;\r\n  &lt;/div&gt;\r\n&lt;% end %&gt;</code></pre>\r\n</div>\r\n</div>\r\n</p>\n\n<p><strong>Github</strong>: <a href=\"https://github.com/RallyWithGalli/ruletoday\" rel=\"nofollow\">https://github.com/RallyWithGalli/ruletoday</a></p>\n\n<p>Thanks in advance for your help. You rock!</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4", "heroku", "devise"], "comments": [{"owner": {"reputation": 76, "user_id": 3222820, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e3f9f89222aac172ef460b99b4d6f018?s=128&d=identicon&r=PG&f=1", "display_name": "Abhishek Bose", "link": "https://stackoverflow.com/users/3222820/abhishek-bose"}, "edited": false, "score": 0, "creation_date": 1423017586, "post_id": 28311573, "comment_id": 44975470, "body": "In your config, are you using mandrill login credentials for <code>:user_name =&gt;      ENV[&#39;EXAMPLE@heroku.com&#39;],   :password =&gt;       ENV[&#39;EXAMPLE&#39;],</code>"}], "answers": [{"comments": [{"owner": {"reputation": 1477, "user_id": 1862552, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/5acc147ac966fd7c75d34d9ed8aae0cd?s=128&d=identicon&r=PG", "display_name": "Rudi", "link": "https://stackoverflow.com/users/1862552/rudi"}, "edited": false, "score": 0, "creation_date": 1487971389, "post_id": 28330204, "comment_id": 72040695, "body": "switching to sendgrid is not a solution for the problem."}], "tags": [], "owner": {"reputation": 5385, "user_id": 1863692, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/047956b4fb1bf3839b4e651b2cdce88e?s=128&d=identicon&r=PG", "display_name": "Andrew Hendrie", "link": "https://stackoverflow.com/users/1863692/andrew-hendrie"}, "is_accepted": true, "score": -1, "last_activity_date": 1423079570, "creation_date": 1423079570, "answer_id": 28330204, "question_id": 28311573, "link": "https://stackoverflow.com/questions/28311573/sending-devise-confirmation-mailer-with-mandrill-through-my-rails-app-on-heroku/28330204#28330204", "title": "Sending Devise Confirmation Mailer with Mandrill through My Rails App on Heroku", "body": "<p>I ended up switching to SendGrid as a Heroku AddOn and it solved my problem.</p>\n\n<p>Here's the code that ended up working for me in config/environments/production.rb:</p>\n\n<pre><code>  config.action_mailer.default_url_options = { :host =&gt; \"http://www.EXAMPLE.com\" }\n\n  config.action_mailer.smtp_settings = {\n    :user_name =&gt; 'EXAMPLE',\n    :password =&gt; 'EXAMPLE',\n    :domain =&gt; 'EXAMPLE.com',\n    :address =&gt; 'smtp.sendgrid.net',\n    :port =&gt; 587,\n    :authentication =&gt; :plain,\n    :enable_starttls_auto =&gt; true\n  }\n</code></pre>\n"}], "owner": {"reputation": 5385, "user_id": 1863692, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/047956b4fb1bf3839b4e651b2cdce88e?s=128&d=identicon&r=PG", "display_name": "Andrew Hendrie", "link": "https://stackoverflow.com/users/1863692/andrew-hendrie"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1126, "favorite_count": 0, "accepted_answer_id": 28330204, "answer_count": 1, "score": 0, "last_activity_date": 1423079570, "creation_date": 1423010912, "question_id": 28311573, "link": "https://stackoverflow.com/questions/28311573/sending-devise-confirmation-mailer-with-mandrill-through-my-rails-app-on-heroku", "title": "Sending Devise Confirmation Mailer with Mandrill through My Rails App on Heroku", "body": "<p>I've got a Ruby on Rails app hosted with Heroku. </p>\n\n<p>I'm using Devise for User Authentication. Trying to get Mandrill to send the Devise confirmation email.</p>\n\n<p>I'm getting the following error in my heroku logs</p>\n\n<pre><code>Sent mail to EXAMPLE@gmail.com (23.4ms)\n2015-02-04T00:38:02.334898+00:00 app[web.1]: Completed 500 Internal Server Error in 335ms\n</code></pre>\n\n<p>Note: the email is not being received by EXAMPLE@gmail.com.</p>\n\n<p>Here's the code for Mandrill in my config/environments/production.rb</p>\n\n<pre><code>config.action_mailer.default_url_options = { :host =&gt; \"example.herokuapp.com\" }\n\nconfig.action_mailer.smtp_settings = {\n  :port =&gt;           '587',\n  :address =&gt;        'smtp.mandrillapp.com',\n  :enable_starttls_auto =&gt; true,\n  :user_name =&gt;      ENV['EXAMPLE@heroku.com'],\n  :password =&gt;       ENV['EXAMPLE'],\n  :authentication =&gt; 'login',\n  :domain =&gt; 'example.herokuapp.com'\n}\n</code></pre>\n\n<p>EXAMPLE in the code above is actually replaced by my account information.</p>\n\n<p>What am I missing? </p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1423010129, "post_id": 28311421, "comment_id": 44973578, "body": "You want it to work with a single key press without Return/Enter Key following it?"}, {"owner": {"reputation": 175, "user_id": 1130969, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/67d6c3b7b613122b0a6264a8289261cd?s=128&d=identicon&r=PG", "display_name": "Michael", "link": "https://stackoverflow.com/users/1130969/michael"}, "reply_to_user": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1423010390, "post_id": 28311421, "comment_id": 44973654, "body": "Yes. That&#39;s exactly what I want."}], "answers": [{"tags": [], "owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "is_accepted": false, "score": 0, "last_activity_date": 1423011402, "creation_date": 1423011402, "answer_id": 28311652, "question_id": 28311421, "link": "https://stackoverflow.com/questions/28311421/how-can-i-check-for-keyboard-input-without-stopping-execution/28311652#28311652", "title": "How can I check for keyboard input without stopping execution?", "body": "<p>You cannot do that with a simple method. The most common way to do that is to use the <a href=\"https://github.com/ruby/curses\" rel=\"nofollow\"><code>curses</code> gem</a>.</p>\n"}, {"comments": [{"owner": {"reputation": 175, "user_id": 1130969, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/67d6c3b7b613122b0a6264a8289261cd?s=128&d=identicon&r=PG", "display_name": "Michael", "link": "https://stackoverflow.com/users/1130969/michael"}, "edited": false, "score": 0, "creation_date": 1423603561, "post_id": 28311904, "comment_id": 45213805, "body": "Thank You.  This works for all the alphanumeric and punctuation keys.  It does not display the arrow keys, backspace, or the enter key.  The most important thing is you have sent me down the right path and given me the tools I need to adapt my idea if necessary."}], "tags": [], "owner": {"reputation": 725, "user_id": 3613829, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PhaFN.jpg?s=128&g=1", "display_name": "Alexis Andersen", "link": "https://stackoverflow.com/users/3613829/alexis-andersen"}, "is_accepted": true, "score": 1, "last_activity_date": 1423012988, "last_edit_date": 1495542762, "creation_date": 1423012988, "answer_id": 28311904, "question_id": 28311421, "link": "https://stackoverflow.com/questions/28311421/how-can-i-check-for-keyboard-input-without-stopping-execution/28311904#28311904", "title": "How can I check for keyboard input without stopping execution?", "body": "<p>From <a href=\"https://stackoverflow.com/questions/174933/how-to-get-a-single-character-without-pressing-enter\">what I could find</a> and some hacking around, I managed to put together something that will immediately echo the keys you press when running in command line.</p>\n\n<pre><code>require 'io/console'\nloop do\n  p STDIN.getch\nend\n</code></pre>\n\n<p>But as the referenced answer mentions, you'll want to capture SIGTERMs so you don't get trapped in the program: <code>Signal.trap(\"INT\") { exit }</code></p>\n\n<p>So the meat of your program and all of its processing lives in that main loop, and each go around of that loop it will grab a character from the STDIN.</p>\n"}], "owner": {"reputation": 175, "user_id": 1130969, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/67d6c3b7b613122b0a6264a8289261cd?s=128&d=identicon&r=PG", "display_name": "Michael", "link": "https://stackoverflow.com/users/1130969/michael"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 651, "favorite_count": 0, "accepted_answer_id": 28311904, "answer_count": 2, "score": 1, "last_activity_date": 1423012988, "creation_date": 1423009911, "last_edit_date": 1423010552, "question_id": 28311421, "link": "https://stackoverflow.com/questions/28311421/how-can-i-check-for-keyboard-input-without-stopping-execution", "title": "How can I check for keyboard input without stopping execution?", "body": "<p>What command/keyword is used to check for keyboard input without stopping execution? I want to build a loop that will run continuously, and at every iteration of the loop, I want to check for keyboard input. If the user presses the right key, my program will act on it; if not, it will continue to run.</p>\n\n<p>EDIT\nI want it to work with out pressing the enter key.  Like when a game runs it checks if the user presses the arrow key then acts on the key press or continues if nothing is pressed.</p>\n"}, {"tags": ["ruby", "regex"], "comments": [{"owner": {"reputation": 10247, "user_id": 386188, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/IX45D.jpg?s=128&g=1", "display_name": "Toan Nguyen", "link": "https://stackoverflow.com/users/386188/toan-nguyen"}, "edited": false, "score": 0, "creation_date": 1423012215, "post_id": 28311319, "comment_id": 44974144, "body": "This logic elsif (remark =~ numbers) &amp;&amp; (remark =~ upcase) &amp;&amp; !(remark =~ downcase)  will never be true. and I think it is better to define regex as constants rather than methods"}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "reply_to_user": {"reputation": 10247, "user_id": 386188, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/IX45D.jpg?s=128&g=1", "display_name": "Toan Nguyen", "link": "https://stackoverflow.com/users/386188/toan-nguyen"}, "edited": false, "score": 0, "creation_date": 1423026070, "post_id": 28311319, "comment_id": 44977496, "body": "@ToanNguyen, suppose <code>remark = 7UP</code>?"}, {"owner": {"reputation": 16538, "user_id": 2602869, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/PkMYa.jpg?s=128&g=1", "display_name": "Jikku Jose", "link": "https://stackoverflow.com/users/2602869/jikku-jose"}, "edited": false, "score": 1, "creation_date": 1423125291, "post_id": 28311319, "comment_id": 45023988, "body": "This question was refactored in the talk - &quot;Overkill&quot; by Katrina Owen. Its quite interesting to see how she improves the readability, Do review it, you may find it interesting. Perhaps have a look at how I solved it after listening to the talk: <a href=\"http://exercism.io/submissions/736312a54538483ea43cefdb07592e8d\" rel=\"nofollow noreferrer\">exercism.io/submissions/736312a54538483ea43cefdb07592e8d</a>"}], "answers": [{"tags": [], "owner": {"reputation": 10247, "user_id": 386188, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/IX45D.jpg?s=128&g=1", "display_name": "Toan Nguyen", "link": "https://stackoverflow.com/users/386188/toan-nguyen"}, "is_accepted": false, "score": 0, "last_activity_date": 1423012421, "creation_date": 1423012421, "answer_id": 28311812, "question_id": 28311319, "link": "https://stackoverflow.com/questions/28311319/better-way-to-check-for-multiple-regex-conditions-in-ruby/28311812#28311812", "title": "Better way to check for multiple regex conditions in Ruby?", "body": "<p>You code can be rewritten like this</p>\n\n<pre><code>def hey(remark)\n    if remark =~  /[A-Z]+/\n      'Whoa, chill out!'\n    elsif remark =~  /[\\?]$/\n      'Sure.'\n    else\n      'Whatever.'\n    end \n  end\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1423123726, "post_id": 28312614, "comment_id": 45023262, "body": "I&#39;m with you on the use of <code>case statements</code>. I find I very rarely use <code>if...end</code> anymore, even when it results in a naked <code>case</code> with no <code>elsif</code>. I just find <code>case statements</code> easier to read and aesthetically more pleasing to the eye. About the only time I use <code>if</code> is <code>do something if...</code>."}], "tags": [], "owner": {"reputation": 47898, "user_id": 966023, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/917fcb4327159076f752c0c3c3fddfbb?s=128&d=identicon&r=PG", "display_name": "pguardiario", "link": "https://stackoverflow.com/users/966023/pguardiario"}, "is_accepted": false, "score": 1, "last_activity_date": 1423017533, "creation_date": 1423017533, "answer_id": 28312614, "question_id": 28311319, "link": "https://stackoverflow.com/questions/28311319/better-way-to-check-for-multiple-regex-conditions-in-ruby/28312614#28312614", "title": "Better way to check for multiple regex conditions in Ruby?", "body": "<p>I think in general more than 2 <code>else</code>s should be a <code>case</code>:</p>\n\n<pre><code>def hey remark\n  case\n    when remark =~ upcase &amp;&amp; !(remark =~ downcase) &amp;&amp; !(remark =~ numbers) then 'Whoa, chill out!'\n    when remark =~ ends_with_questionmark then 'Sure.'\n    when (remark =~ numbers) &amp;&amp; (remark =~ upcase) &amp;&amp; !(remark =~ downcase) then 'Whoa, chill out!'\n    else 'Whatever.'\n  end\nend\n</code></pre>\n\n<p>But I also think those regexes need work, they probably don't do what you think.</p>\n\n<p>Also you can change <code>!(str =~ /re/)</code> to <code>str !~ /re/</code></p>\n"}, {"tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": true, "score": 3, "last_activity_date": 1423072271, "last_edit_date": 1423072271, "creation_date": 1423030791, "answer_id": 28314718, "question_id": 28311319, "link": "https://stackoverflow.com/questions/28311319/better-way-to-check-for-multiple-regex-conditions-in-ruby/28314718#28314718", "title": "Better way to check for multiple regex conditions in Ruby?", "body": "<p>I find it difficult to comprehend what <code>Bob#hey</code> is doing. One possibility is to define some appropriately-named helper methods in the <code>String</code> class:</p>\n\n<pre><code>class String\n  def contains_a_digit?()            !!(self =~ /\\d/)        end\n  def contains_no_digits?()          !self.contains_a_digit? end\n  def contains_an_uppercase_char?()  !!(self =~ /[A-Z]/)     end\n  def contains_no_lowercase_chars?() self !~ /[a-z]/         end\n  def ends_with_questionmark?()      !!(self =~ /[\\?]$/)     end\nend\n</code></pre>\n\n<p>Note that (for example) <code>self =~ /\\d+/</code> and <code>self =~ /\\d/</code> are here interchangeable; both return a truthy value if and only if <code>self</code> contains at least one digit. Incidentally, the receiver, <code>self</code>, must be explicit here.</p>\n\n<p>Aside to readers unfamiliar with <code>!!</code>: if <code>truthy</code> is a variable holding any  value other than <code>false</code> or <code>nil</code>, <code>!!(truthy) =&gt; true</code>, <code>!!(nil) =&gt; false</code> and <code>!!(false) =&gt; false</code>. In other words, <code>!!</code> is a trick to convert truthy values to <code>true</code> and falsy values to <code>false</code> (which I've used merely to improve readability).</p>\n\n<p>Let's try these methods:</p>\n\n<pre><code>str = 'U2d?'                     #=&gt; \"U2d?\" \nstr.contains_a_digit?            #=&gt; true \nstr.contains_no_digits?          #=&gt; false \nstr.contains_an_uppercase_char?  #=&gt; true \nstr.contains_no_lowercase_chars? #=&gt; false \nstr.ends_with_questionmark?      #=&gt; true \n</code></pre>\n\n<p>With Ruby 2.1+, if one is disinclined to monkey-patch the <code>String</code> class, one can use <a href=\"http://www.ruby-doc.org/core-2.1.2/doc/syntax/refinements_rdoc.html\" rel=\"nofollow\">Refinements</a>.</p>\n\n<p>Now the method <code>Bob#hey</code> can be defined in natural way:</p>\n\n<pre><code>class Bob\n  def hey(remark)\n    case\n    when remark.contains_no_digits? &amp;&amp;\n         remark.contains_an_uppercase_char? &amp;&amp;\n         remark.contains_no_lowercase_chars?\n      'Whoa, chill out! (1st)'\n    when remark.ends_with_questionmark?\n      'Sure.'\n    when remark.contains_a_digit? &amp;&amp;\n         remark.contains_an_uppercase_char? &amp;&amp;\n         remark.contains_no_lowercase_chars?\n      'Whoa, chill out! (2nd)'\n    else\n      'Whatever.'\n    end\n  end\nend\n</code></pre>\n\n<p>Let's try it.</p>\n\n<pre><code>bob = Bob.new\nbob.hey(\"I PAID IN $US!\")   #=&gt; \"Whoa, chill out! (1st)\" \nbob.hey(\"What's that?\")     #=&gt; \"Sure.\" \nbob.hey(\"I FLEW ON A 777!\") #=&gt; \"Whoa, chill out! (2nd)\" \nbob.hey(\"I give up.\")       #=&gt; \"Whatever.\" \n</code></pre>\n"}], "owner": {"reputation": 1042, "user_id": 655635, "user_type": "registered", "accept_rate": 90, "profile_image": "https://graph.facebook.com/1654714824/picture?type=large", "display_name": "Randomtheories", "link": "https://stackoverflow.com/users/655635/randomtheories"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 729, "favorite_count": 1, "accepted_answer_id": 28314718, "answer_count": 3, "score": 1, "last_activity_date": 1426100648, "creation_date": 1423009195, "last_edit_date": 1426100648, "question_id": 28311319, "link": "https://stackoverflow.com/questions/28311319/better-way-to-check-for-multiple-regex-conditions-in-ruby", "title": "Better way to check for multiple regex conditions in Ruby?", "body": "<p>I'm looking for a better way to check, if a string matches multiple regex patterns (or not).\nThis is my approach so far:</p>\n\n<pre><code>class Bob\n  def hey(remark)\n    if remark =~ upcase &amp;&amp; !(remark =~ downcase) &amp;&amp; !(remark =~ numbers)\n      'Whoa, chill out!'\n    elsif remark =~ ends_with_questionmark\n      'Sure.'\n    elsif (remark =~ numbers) &amp;&amp; (remark =~ upcase) &amp;&amp; !(remark =~ downcase)\n      'Whoa, chill out!'\n    else\n      'Whatever.'\n    end \n  end\n  def numbers\n    /[\\d]+/\n  end\n  def downcase\n    /[a-z]+/\n  end\n  def upcase\n    /[A-Z]+/\n  end\n  def ends_with_questionmark\n    /[\\?]$/\n  end\nend\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4", "prawn"], "comments": [{"owner": {"reputation": 5134, "user_id": 1672197, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/i8HkV.png?s=128&g=1", "display_name": "orde", "link": "https://stackoverflow.com/users/1672197/orde"}, "edited": false, "score": 0, "creation_date": 1423008747, "post_id": 28311218, "comment_id": 44973231, "body": "It&#39;s probably the curly quotes here: <code>\u201capplication&#47;pdf\u201d</code>.  Perhaps <code>&quot;application&#47;pdf&quot;</code> instead?"}, {"owner": {"reputation": 466, "user_id": 2886057, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/f1c65bb3931b7c509992277b9afc30e1?s=128&d=identicon&r=PG&f=1", "display_name": "user2886057", "link": "https://stackoverflow.com/users/2886057/user2886057"}, "reply_to_user": {"reputation": 5134, "user_id": 1672197, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/i8HkV.png?s=128&g=1", "display_name": "orde", "link": "https://stackoverflow.com/users/1672197/orde"}, "edited": false, "score": 0, "creation_date": 1423009033, "post_id": 28311218, "comment_id": 44973321, "body": "yep, thanks!!, how to give you points?"}, {"owner": {"reputation": 5134, "user_id": 1672197, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/i8HkV.png?s=128&g=1", "display_name": "orde", "link": "https://stackoverflow.com/users/1672197/orde"}, "edited": false, "score": 0, "creation_date": 1423010523, "post_id": 28311218, "comment_id": 44973694, "body": "I posted it as an answer."}], "answers": [{"comments": [{"owner": {"reputation": 383, "user_id": 3603565, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d3a3de9afee88e3d03ef95f3970aa6c5?s=128&d=identicon&r=PG", "display_name": "Ratinahirana", "link": "https://stackoverflow.com/users/3603565/ratinahirana"}, "edited": false, "score": 0, "creation_date": 1452543369, "post_id": 28311518, "comment_id": 57206685, "body": "Worked for me. Thanks for sharing."}], "tags": [], "owner": {"reputation": 5134, "user_id": 1672197, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/i8HkV.png?s=128&g=1", "display_name": "orde", "link": "https://stackoverflow.com/users/1672197/orde"}, "is_accepted": true, "score": 1, "last_activity_date": 1423010479, "creation_date": 1423010479, "answer_id": 28311518, "question_id": 28311218, "link": "https://stackoverflow.com/questions/28311218/setting-up-mime-types-rb-in-rails/28311518#28311518", "title": "Setting up mime_types.rb in rails", "body": "<p>Replace the curly quotes in <code>\u201capplication/pdf\u201d</code> with straight quotes (i.e. <code>\"application/pdf\"</code>)</p>\n"}], "owner": {"reputation": 466, "user_id": 2886057, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/f1c65bb3931b7c509992277b9afc30e1?s=128&d=identicon&r=PG&f=1", "display_name": "user2886057", "link": "https://stackoverflow.com/users/2886057/user2886057"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 413, "favorite_count": 0, "accepted_answer_id": 28311518, "answer_count": 1, "score": 1, "last_activity_date": 1423010479, "creation_date": 1423008559, "question_id": 28311218, "link": "https://stackoverflow.com/questions/28311218/setting-up-mime-types-rb-in-rails", "title": "Setting up mime_types.rb in rails", "body": "<p>I am trying to use Prawn in RoR 4.2.0. I am trying to add the following to my mime_types file:</p>\n\n<pre><code>Mime::Type.register \u201capplication/pdf\u201d , :pdf\n</code></pre>\n\n<p>However, the server does not start with the following error:</p>\n\n<pre><code>/Users/Bob/Development/appname/config/initializers/mime_types.rb:7:in `&lt;top (required)&gt;': undefined local variable or method `\u201capplication' for main:Object (NameError)\n</code></pre>\n\n<p>Any thoughts?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "json"], "comments": [{"owner": {"reputation": 14469, "user_id": 2191105, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/tPiCW.png?s=128&g=1", "display_name": "David Hoelzer", "link": "https://stackoverflow.com/users/2191105/david-hoelzer"}, "edited": false, "score": 0, "creation_date": 1423008554, "post_id": 28311153, "comment_id": 44973164, "body": "You don&#39;t say where you are getting it as an empty array.  I&#39;m just going to take a guess... :)  If what you have posted is what is showing up in your log but choices is empty when you check your database, is your model configured to allow you to update the choices attribute?"}, {"owner": {"reputation": 11, "user_id": 4504114, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-JQrXvwD6rHo/AAAAAAAAAAI/AAAAAAAAAFo/EJT9Ru5mkE4/photo.jpg?sz=128", "display_name": "Fakhr El Din Abd El Khalik", "link": "https://stackoverflow.com/users/4504114/fakhr-el-din-abd-el-khalik"}, "reply_to_user": {"reputation": 14469, "user_id": 2191105, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/tPiCW.png?s=128&g=1", "display_name": "David Hoelzer", "link": "https://stackoverflow.com/users/2191105/david-hoelzer"}, "edited": false, "score": 0, "creation_date": 1423008684, "post_id": 28311153, "comment_id": 44973212, "body": "I have create method and I am testing it I&#39;ll update the question with the method ,the test and the model @David Hoelzer"}, {"owner": {"reputation": 11, "user_id": 4504114, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-JQrXvwD6rHo/AAAAAAAAAAI/AAAAAAAAAFo/EJT9Ru5mkE4/photo.jpg?sz=128", "display_name": "Fakhr El Din Abd El Khalik", "link": "https://stackoverflow.com/users/4504114/fakhr-el-din-abd-el-khalik"}, "reply_to_user": {"reputation": 14469, "user_id": 2191105, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/tPiCW.png?s=128&g=1", "display_name": "David Hoelzer", "link": "https://stackoverflow.com/users/2191105/david-hoelzer"}, "edited": false, "score": 0, "creation_date": 1423009276, "post_id": 28311153, "comment_id": 44973383, "body": "@DavidHoelzer You can  take a look now"}], "answers": [{"tags": [], "owner": {"reputation": 11, "user_id": 4504114, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-JQrXvwD6rHo/AAAAAAAAAAI/AAAAAAAAAFo/EJT9Ru5mkE4/photo.jpg?sz=128", "display_name": "Fakhr El Din Abd El Khalik", "link": "https://stackoverflow.com/users/4504114/fakhr-el-din-abd-el-khalik"}, "is_accepted": true, "score": 0, "last_activity_date": 1423013940, "creation_date": 1423013940, "answer_id": 28312050, "question_id": 28311153, "link": "https://stackoverflow.com/questions/28311153/dealing-with-array-while-using-to-json/28312050#28312050", "title": "Dealing with array while using to_json", "body": "<p>Just we need to change </p>\n\n<pre><code>def question_params\n            params.require(:question).permit(:text, :mark, :choice, :right_answer)\n        end\nto\ndef question_params\n            params.require(:question).permit(:text, :mark, :right_answer, :choice =&gt; [])\n        end\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 4504114, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-JQrXvwD6rHo/AAAAAAAAAAI/AAAAAAAAAFo/EJT9Ru5mkE4/photo.jpg?sz=128", "display_name": "Fakhr El Din Abd El Khalik", "link": "https://stackoverflow.com/users/4504114/fakhr-el-din-abd-el-khalik"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 36, "favorite_count": 0, "accepted_answer_id": 28312050, "answer_count": 1, "score": 0, "last_activity_date": 1423013940, "creation_date": 1423008174, "last_edit_date": 1423009221, "question_id": 28311153, "link": "https://stackoverflow.com/questions/28311153/dealing-with-array-while-using-to-json", "title": "Dealing with array while using to_json", "body": "<p>I have just started learning ruby on rails and I was using this code to get the json representation of the question model</p>\n\n<pre><code>post \"api/quizzes/addquestion/#{@quiz.id}\",\n        { question: \n        { text: \"Question Text Example\", mark: 2, choices:[\"a\",\"b\",\"c\",\"d\"], right_answer: \"a\" }    \n        }.to_json\n</code></pre>\n\n<p>I got :\nchoices: [] , empty array \nI don't know the reason for this as all other attributes are sent succesfully. What is the solution for such problem</p>\n\n<p>I am using this while testing the following method:</p>\n\n<pre><code>def add_question\n            question = Question.new(question_params)\n            quiz = Quiz.find(params[:quiz_id])\n            if question.save\n                quiz.questions &lt;&lt; question\n                render json: { success: true, data:{:question =&gt; question}, info:{} }, status: 201\n            else\n                render json: { success: false, data:{}, :info =&gt; question.errors }, status: 422\n            end\n        end\ndef question_params\n            params.require(:question).permit(:text, :mark, :choice, :right_answer)\n        end\n</code></pre>\n\n<p>the test :</p>\n\n<pre><code>class AddingQuestionsTest &lt; ActionDispatch::IntegrationTest \n    setup {@quiz = Quiz.create(name: 'Quiz1', subject: 'physics', duration: 10, no_of_MCQ: 5, no_of_rearrangeQ: 5)}\n    setup {@question = Question.create(text: \"Question Text Example\", mark: 2, choices:[\"a\",\"b\",\"c\",\"d\"], right_answer: \"a\")}   \n\n    test 'successes to add question to a quiz' do       \n        post \"api/quizzes/addquestion/#{@quiz.id}\",\n        { question: \n        { text: \"Question Text Example\", mark: 2, choices:[\"a\",\"b\",\"c\",\"d\"], right_answer: \"a\" }    \n        }.to_json,\n        { 'Accept' =&gt; Mime::JSON, 'Content-Type' =&gt; Mime::JSON.to_s }       \n        question_response = json(response.body)\n        assert_equal 201, response.status   \n        assert_equal @quiz.questions.first, @question\n        assert_equal publish_response[:success], true\n    end         \nend\n</code></pre>\n\n<p>and this is the question model:\n    class Question &lt; ActiveRecord::Base\n        serialize :choices,Array\n        belongs_to :quiz\n    end\nWhen I run the test I get failure in:assert_equal @quiz.questions.first, @question\nchoices: [] \nchoices: [\"a\", \"b\", \"c\", \"d\"]</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "security", "ruby-on-rails-4", "owasp"], "comments": [{"owner": {"reputation": 1416, "user_id": 194084, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d72dabc6f2c7a9e3c7aba1a224158c89?s=128&d=identicon&r=PG", "display_name": "Justin", "link": "https://stackoverflow.com/users/194084/justin"}, "edited": false, "score": 0, "creation_date": 1423532401, "post_id": 28311117, "comment_id": 45178334, "body": "The OWASP page is actually wrong. Please read <a href=\"http://brakemanscanner.org/docs/warning_types/redirect/\" rel=\"nofollow noreferrer\">brakemanscanner.org/docs/warning_types/redirect</a> for updated suggestions (or use Frank&#39;s other code)."}], "answers": [{"comments": [{"owner": {"reputation": 16441, "user_id": 824806, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e2ba601f52c82370f266a1d7f2f0b6ef?s=128&d=identicon&r=PG", "display_name": "Backo", "link": "https://stackoverflow.com/users/824806/backo"}, "edited": false, "score": 0, "creation_date": 1423048156, "post_id": 28315546, "comment_id": 44988225, "body": "Can you provide some example code on how you&#39;d handle the issue by adopting solution #1 and #2?"}, {"owner": {"reputation": 1030, "user_id": 303083, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0256f4863b3a08d20a382766f842e63c?s=128&d=identicon&r=PG", "display_name": "Franck Verrot", "link": "https://stackoverflow.com/users/303083/franck-verrot"}, "reply_to_user": {"reputation": 16441, "user_id": 824806, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e2ba601f52c82370f266a1d7f2f0b6ef?s=128&d=identicon&r=PG", "display_name": "Backo", "link": "https://stackoverflow.com/users/824806/backo"}, "edited": false, "score": 0, "creation_date": 1423080321, "post_id": 28315546, "comment_id": 45007992, "body": "1. <code>redirect_to your_options_hash.merge(only_path: true)</code>  2. <code>redirect_to URI.parse(some_url).path</code>  Was this what you expected?"}, {"owner": {"reputation": 16441, "user_id": 824806, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e2ba601f52c82370f266a1d7f2f0b6ef?s=128&d=identicon&r=PG", "display_name": "Backo", "link": "https://stackoverflow.com/users/824806/backo"}, "edited": false, "score": 0, "creation_date": 1423098494, "post_id": 28315546, "comment_id": 45015597, "body": "I am asking for! Example: 1. <a href=\"http://stackoverflow.com/questions/28324563/is-it-safe-to-accept-url-parameters-for-populating-the-url-for-method\">Is it safe to accept URL parameters for populating the <code>url_for</code> method?</a>;  2. <a href=\"http://stackoverflow.com/questions/27859332/how-to-validate-uris-by-checking-if-those-refer-to-a-given-domain-name\">How to validate URIs by checking if those refer to a given domain name?</a>."}, {"owner": {"reputation": 1030, "user_id": 303083, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0256f4863b3a08d20a382766f842e63c?s=128&d=identicon&r=PG", "display_name": "Franck Verrot", "link": "https://stackoverflow.com/users/303083/franck-verrot"}, "reply_to_user": {"reputation": 16441, "user_id": 824806, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e2ba601f52c82370f266a1d7f2f0b6ef?s=128&d=identicon&r=PG", "display_name": "Backo", "link": "https://stackoverflow.com/users/824806/backo"}, "edited": false, "score": 0, "creation_date": 1423181521, "post_id": 28315546, "comment_id": 45056273, "body": "Ok. So for 1/ my understanding is that is is safe as long as you ensure you&#39;re only passing paths (or trusted URLs). As for 2/ that&#39;s an issue I would like to adress in ActiveValidatord (<a href=\"https://github.com/franckverrot/activevalidators/issues/59\" rel=\"nofollow noreferrer\">github.com/franckverrot/activevalidators/issues/59</a>), once it&#39;s resolved in AV, it would be easy to wrap this up in a class an use only that class for redirects."}], "tags": [], "owner": {"reputation": 1030, "user_id": 303083, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0256f4863b3a08d20a382766f842e63c?s=128&d=identicon&r=PG", "display_name": "Franck Verrot", "link": "https://stackoverflow.com/users/303083/franck-verrot"}, "is_accepted": true, "score": 0, "last_activity_date": 1423034075, "creation_date": 1423034075, "answer_id": 28315546, "question_id": 28311117, "link": "https://stackoverflow.com/questions/28311117/clarifications-about-owasp-documentation-for-user-redirection-by-using-parameter/28315546#28315546", "title": "Clarifications about OWASP documentation for user redirection by using parameters", "body": "<p><a href=\"http://brakemanscanner.org/docs/warning_types/redirect/\" rel=\"nofollow\">Brakeman</a> suggests two strategies to mitigate the risks:</p>\n\n<ol>\n<li>Using <code>only_path</code> as you did;</li>\n<li>Parsing the redirect URL to extract the path manually <code>URI.parse(some_url).path</code></li>\n</ol>\n\n<p>In past projects I've rewrote that helper to be sure nobody would accidentally forget the extra param of #1. </p>\n"}], "owner": {"reputation": 16441, "user_id": 824806, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e2ba601f52c82370f266a1d7f2f0b6ef?s=128&d=identicon&r=PG", "display_name": "Backo", "link": "https://stackoverflow.com/users/824806/backo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 47, "favorite_count": 0, "accepted_answer_id": 28315546, "answer_count": 1, "score": 1, "last_activity_date": 1423034075, "creation_date": 1423007949, "last_edit_date": 1423008289, "question_id": 28311117, "link": "https://stackoverflow.com/questions/28311117/clarifications-about-owasp-documentation-for-user-redirection-by-using-parameter", "title": "Clarifications about OWASP documentation for user redirection by using parameters", "body": "<p>I am using Ruby on Rails 4.1.1 and I would like to accept a <code>redirect_path</code> parameter in order to redirect users after they have performed an action. I read the <a href=\"https://www.owasp.org/index.php/Ruby_on_Rails_Cheatsheet#Redirects_and_Forwards\" rel=\"nofollow\">OWASP documentation</a> about related concerns (phishing attacks) but I did not understand something. The documentation states:</p>\n\n<blockquote>\n  <p>The most basic, but restrictive protection is to use the :only_path\n  option. Setting this to true will essentially strip out any host\n  information.</p>\n</blockquote>\n\n<pre><code>redirect_to params[:url], :only_path =&gt; true\n</code></pre>\n\n<p>Is the <code>redirect_to params[:url], :only_path =&gt; true</code> enough in order to avoid phishing attacks? There may be other pitfalls?</p>\n"}, {"tags": ["ruby", "ruby-on-rails-4", "scope", "tags", "activeadmin"], "answers": [{"comments": [{"owner": {"reputation": 2140, "user_id": 1450389, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/VYNKp.jpg?s=128&g=1", "display_name": "Serge Pedroza", "link": "https://stackoverflow.com/users/1450389/serge-pedroza"}, "edited": false, "score": 0, "creation_date": 1423173586, "post_id": 28331779, "comment_id": 45053320, "body": "I had to add a &quot;)&quot; but everything works great. Thank you so much :)"}], "tags": [], "owner": {"reputation": 814, "user_id": 4474211, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9cf24f2226878c4c08d709a6efd3355f?s=128&d=identicon&r=PG", "display_name": "tmichel", "link": "https://stackoverflow.com/users/4474211/tmichel"}, "is_accepted": true, "score": 1, "last_activity_date": 1423173852, "last_edit_date": 1423173852, "creation_date": 1423085209, "answer_id": 28331779, "question_id": 28311057, "link": "https://stackoverflow.com/questions/28311057/custom-activeadmin-scope-to-display-books-without-a-tag/28331779#28331779", "title": "Custom ActiveAdmin Scope to display books without a tag", "body": "<p>It is undefined because scopes are class level. The <code>book</code> argument is actually an <code>ActiveRecord::Relation</code>. You can refine it in the block. You could use scopes or even class methods.</p>\n\n<p>You could do something along the lines:</p>\n\n<pre><code>class Book &lt; AR::Base\n  scope :without_tags, -&gt; { where.not(id: BookMapping.distinct.pluck(:book_id)) }\nend\n\nActiveAdmin.register Book do\n  scope :all, default: true\n  scope :without_tags\nend\n</code></pre>\n"}], "owner": {"reputation": 2140, "user_id": 1450389, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/VYNKp.jpg?s=128&g=1", "display_name": "Serge Pedroza", "link": "https://stackoverflow.com/users/1450389/serge-pedroza"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 120, "favorite_count": 1, "accepted_answer_id": 28331779, "answer_count": 1, "score": 0, "last_activity_date": 1423173852, "creation_date": 1423007679, "question_id": 28311057, "link": "https://stackoverflow.com/questions/28311057/custom-activeadmin-scope-to-display-books-without-a-tag", "title": "Custom ActiveAdmin Scope to display books without a tag", "body": "<p>I am using ActiveAdmin in my rails app. Everything works great, but now I am trying to create a scope that will display books without a tag. </p>\n\n<p>I have created a method in my Book model to help me do this, but I cannot use it inside my ActiveAdmin scope.</p>\n\n<pre><code>I keep getting \nundefined method `book_tags?'\n</code></pre>\n\n<p><strong>How can I create a scope that will only show books without a tag?</strong></p>\n\n<p><strong>Model</strong></p>\n\n<pre><code>class Book &lt; ActiveRecord::Base\n  has_many :book_mappings, dependent: :destroy\n  has_many :tags, through: :book_mappings\n\n  ###Find books without a tag\n  def book_tags?\n    tags.any?\n  end\n\nend\n\nclass BookMapping &lt; ActiveRecord::Base\n  belongs_to :book\n  belongs_to :tag\n\nend\n\nclass Tag &lt; ActiveRecord::Base\n  has_many :book_mappings, dependent: :destroy\n  has_many :books, through: :book_mappings\n\nend\n</code></pre>\n\n<p>ActiveAdmin</p>\n\n<pre><code>ActiveAdmin.register Book do\n\n  ###Scope to shows all Books          \n  scope :all, :default =&gt; true\n\n  ###book_tags? does now work, I keep getting undefined method `book_tags?'\n  scope :books_without_tags do |book|\n    book.book_tags?\n  end\n\nend\n</code></pre>\n"}, {"tags": ["ruby", "mongoid"], "answers": [{"tags": [], "owner": {"reputation": 56502, "user_id": 271475, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9b00f41e5f2a69734051f2a78f4f3785?s=128&d=identicon&r=PG", "display_name": "Chris Heald", "link": "https://stackoverflow.com/users/271475/chris-heald"}, "is_accepted": true, "score": 2, "last_activity_date": 1423008821, "creation_date": 1423008821, "answer_id": 28311256, "question_id": 28310991, "link": "https://stackoverflow.com/questions/28310991/what-is-a-good-way-to-update-a-cache-whenever-a-mongoid-model-is-saved/28311256#28311256", "title": "What is a good way to update a cache whenever a Mongoid model is saved?", "body": "<p>The typical answer to this is <a href=\"https://github.com/chamnap/mongoid-observers\" rel=\"nofollow\">mongoid-observers</a>. An observer is a class that receives callbacks for instances of the observed class, and can execute things like cache clears and whatnot on them.</p>\n\n<p>Using it is fairly straightforward - you simply define which models you want to observe, and then implement callbacks. For example:</p>\n\n<pre><code>class PostObserver &lt; Mongoid::Observer\n  observe :post, :gallery\n\n  def after_update(record)\n    clear_cache_for record\n  end\n\n  def after_destroy(record)\n    clear_cache_for record\n  end\n\n  private\n\n  def clear_cache_for(record)\n    Rails.cache.clear record.cache_key\n  end\nend\n</code></pre>\n"}], "owner": {"reputation": 39282, "user_id": 336920, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/6e2dbeb23d3fc6552a6e26800ed63289?s=128&d=identicon&r=PG", "display_name": "B Seven", "link": "https://stackoverflow.com/users/336920/b-seven"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 26, "favorite_count": 0, "accepted_answer_id": 28311256, "answer_count": 1, "score": 0, "last_activity_date": 1423008821, "creation_date": 1423007274, "last_edit_date": 1423008300, "question_id": 28310991, "link": "https://stackoverflow.com/questions/28310991/what-is-a-good-way-to-update-a-cache-whenever-a-mongoid-model-is-saved", "title": "What is a good way to update a cache whenever a Mongoid model is saved?", "body": "<p>One approach would be to add an <code>after_save</code> callback to each model. But there are 7 models, so it would be better to put this functionality in one place.</p>\n\n<p>Is there a better approach? Perhaps by re-opening the Mongoid::Document module?</p>\n\n<p>Actually I don't think <code>after_save</code> would work by itself. Probably need to include <code>after_update</code> and <code>after_destroy</code> also...?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "xpath", "rspec"], "answers": [{"comments": [{"owner": {"reputation": 167, "user_id": 4526283, "user_type": "registered", "accept_rate": 23, "profile_image": "https://graph.facebook.com/10152583334865887/picture?type=large", "display_name": "Alex", "link": "https://stackoverflow.com/users/4526283/alex"}, "edited": false, "score": 0, "creation_date": 1423028848, "post_id": 28314063, "comment_id": 44978388, "body": "The gem install works but no luck after the rerun of bundle install."}, {"owner": {"reputation": 10076, "user_id": 4010391, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/NgRol.jpg?s=128&g=1", "display_name": "Travis", "link": "https://stackoverflow.com/users/4010391/travis"}, "reply_to_user": {"reputation": 167, "user_id": 4526283, "user_type": "registered", "accept_rate": 23, "profile_image": "https://graph.facebook.com/10152583334865887/picture?type=large", "display_name": "Alex", "link": "https://stackoverflow.com/users/4526283/alex"}, "edited": false, "score": 0, "creation_date": 1423030001, "post_id": 28314063, "comment_id": 44978772, "body": "What do you get when you run:  <code>which gem</code> and <code>which bundle</code>"}, {"owner": {"reputation": 167, "user_id": 4526283, "user_type": "registered", "accept_rate": 23, "profile_image": "https://graph.facebook.com/10152583334865887/picture?type=large", "display_name": "Alex", "link": "https://stackoverflow.com/users/4526283/alex"}, "edited": false, "score": 0, "creation_date": 1423068853, "post_id": 28314063, "comment_id": 45001509, "body": "I added it to the end of the post. Also Im sure this is part of the problem is that when I do a gem install its giving me the following error:  ERROR:  While executing gem ... (Gem::FilePermissionError)     You don&#39;t have write permissions for the /Library/Ruby/Gems/2.0.0 directory.  I use sudo to get around it but I don&#39;t think you should need to do sudo for any gem install."}], "tags": [], "owner": {"reputation": 10076, "user_id": 4010391, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/NgRol.jpg?s=128&g=1", "display_name": "Travis", "link": "https://stackoverflow.com/users/4010391/travis"}, "is_accepted": false, "score": 2, "last_activity_date": 1437505780, "last_edit_date": 1437505780, "creation_date": 1423027422, "answer_id": 28314063, "question_id": 28310734, "link": "https://stackoverflow.com/questions/28310734/ruby-on-rails-could-not-find-xpath-2-0-0-in-any-of-the-sources/28314063#28314063", "title": "Ruby on Rails - Could not find xpath-2.0.0 in any of the sources", "body": "<p>Not sure what the hang up would be as it's listed as a dependency of Capybara, but have you tried:</p>\n\n<p><code>gem install xpath -v '2.0.0'</code></p>\n\n<p>If that succeeds, rerun your bundle install.</p>\n\n<p>Edit:</p>\n\n<p>It looks like you're trying to use RBENV, but your gems are installing to your system version of Ruby. First, you should never have to use <code>sudo</code> on a <code>gem install</code> using RVM or RBENV.</p>\n\n<p>Taken from the RBENV install documentation: <a href=\"https://github.com/sstephenson/rbenv\" rel=\"nofollow\">https://github.com/sstephenson/rbenv</a></p>\n\n<p>It looks like step 3 might have been skipped, so verify by running from step 4:</p>\n\n<pre><code>type rbenv\n#=&gt; \"rbenv is a function\"\n</code></pre>\n\n<p>If this fails, you'll need to add <code>eval \"$(rbenv init -)\"</code> to your shell (.bash_profile, .bashrc or .zshrc depending on what OS and shell you're running).</p>\n\n<p>Make sure to restart your terminal for any shell changes to take effect.</p>\n\n<p>Run <code>rbenv rehash</code> then you should get something like this when you run which gem again:</p>\n\n<pre><code>which gem\n#=&gt; /Users/your-user-name/.rbenv/shims/gem\n</code></pre>\n\n<p>If this works, run <code>gem install bundle</code>, cd into your project directory and <code>bundle install</code> should work.</p>\n"}, {"tags": [], "owner": {"reputation": 167, "user_id": 4526283, "user_type": "registered", "accept_rate": 23, "profile_image": "https://graph.facebook.com/10152583334865887/picture?type=large", "display_name": "Alex", "link": "https://stackoverflow.com/users/4526283/alex"}, "is_accepted": true, "score": 0, "last_activity_date": 1423075598, "creation_date": 1423075598, "answer_id": 28329037, "question_id": 28310734, "link": "https://stackoverflow.com/questions/28310734/ruby-on-rails-could-not-find-xpath-2-0-0-in-any-of-the-sources/28329037#28329037", "title": "Ruby on Rails - Could not find xpath-2.0.0 in any of the sources", "body": "<p>It looks like I had a bad install of rbenv. After a reinstall it fixed the issue.</p>\n"}, {"tags": [], "owner": {"reputation": 121, "user_id": 2653937, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/RFlYW.jpg?s=128&g=1", "display_name": "Riko", "link": "https://stackoverflow.com/users/2653937/riko"}, "is_accepted": false, "score": 1, "last_activity_date": 1429816743, "creation_date": 1429816743, "answer_id": 29832474, "question_id": 28310734, "link": "https://stackoverflow.com/questions/28310734/ruby-on-rails-could-not-find-xpath-2-0-0-in-any-of-the-sources/29832474#29832474", "title": "Ruby on Rails - Could not find xpath-2.0.0 in any of the sources", "body": "<p>Yes, new version of RudyOnRails has some conflicts with Spring. Just try type in console <code>spring stop</code> and rerun <code>rails generate rspec:install</code></p>\n\n<p>Find out more info in <a href=\"https://github.com/rspec/rspec-rails/issues/996\" rel=\"nofollow\">https://github.com/rspec/rspec-rails/issues/996</a></p>\n"}], "owner": {"reputation": 167, "user_id": 4526283, "user_type": "registered", "accept_rate": 23, "profile_image": "https://graph.facebook.com/10152583334865887/picture?type=large", "display_name": "Alex", "link": "https://stackoverflow.com/users/4526283/alex"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3409, "favorite_count": 1, "accepted_answer_id": 28329037, "answer_count": 3, "score": 2, "last_activity_date": 1437505780, "creation_date": 1423006006, "last_edit_date": 1495542587, "question_id": 28310734, "link": "https://stackoverflow.com/questions/28310734/ruby-on-rails-could-not-find-xpath-2-0-0-in-any-of-the-sources", "title": "Ruby on Rails - Could not find xpath-2.0.0 in any of the sources", "body": "<p>Trying to run 'rails g rspec:install' and keep running into error:</p>\n\n<pre><code>Could not find xpath-2.0.0 in any of the sources\nRun `bundle install` to install missing gems.\n</code></pre>\n\n<p>I am running \nruby 2.2.0p0\nrails 4.2.0</p>\n\n<p>I have tried looking around for answers, but as I am relatively new to ruby and rails I couldn't find an answer. I have tried some of the following suggestions from other threads to no avail:</p>\n\n<blockquote>\n  <p>sometimes we doesn\u2019t get response from <a href=\"http://rubygems.org/\" rel=\"nofollow noreferrer\">http://rubygems.org/</a> so it will shows error again try gem install rake to install latest version (10.0.4) of rake, and next bundle update rake to update the Gemfile.lock</p>\n  \n  <p>(<a href=\"https://stackoverflow.com/questions/16189338/could-not-find-rake-10-0-4-in-any-of-the-sources-bundlergemnotfound\">Could not find rake-10.0.4 in any of the sources (Bundler::GemNotFound)</a>)</p>\n</blockquote>\n\n<p>and </p>\n\n<blockquote>\n  <p>Try to delete Gemfile.lock and bundle install</p>\n  \n  <p>(<a href=\"https://stackoverflow.com/questions/16189338/could-not-find-rake-10-0-4-in-any-of-the-sources-bundlergemnotfound\">Could not find rake-10.0.4 in any of the sources (Bundler::GemNotFound)</a>)</p>\n</blockquote>\n\n<p>no luck with any of those options.</p>\n\n<p>GemFile:</p>\n\n<pre><code>source 'https://rubygems.org'\n\ngem 'rails', '4.2.0'\ngem 'sqlite3'\ngem 'sass-rails', '~&gt; 5.0'\ngem 'uglifier', '&gt;= 1.3.0'\ngem 'coffee-rails', '~&gt; 4.1.0'\ngem 'jquery-rails'\ngem 'turbolinks'\ngem 'jbuilder', '~&gt; 2.0'\ngem 'sdoc', '~&gt; 0.4.0', group: :doc\n\ngroup :development, :test do\n  gem 'byebug'\n  gem 'web-console', '~&gt; 2.0'\n  gem 'spring'\n  gem 'rspec-rails', '~&gt; 2.0'\nend\n\ngroup :test do\n    gem 'capybara', '~&gt;2.1.0'\nend\n</code></pre>\n\n<p>Gemfile.lock</p>\n\n<pre><code> GEM\n  remote: https://rubygems.org/\n  specs:\n    actionmailer (4.2.0)\n      actionpack (= 4.2.0)\n      actionview (= 4.2.0)\n      activejob (= 4.2.0)\n      mail (~&gt; 2.5, &gt;= 2.5.4)\n      rails-dom-testing (~&gt; 1.0, &gt;= 1.0.5)\n    actionpack (4.2.0)\n      actionview (= 4.2.0)\n      activesupport (= 4.2.0)\n      rack (~&gt; 1.6.0)\n      rack-test (~&gt; 0.6.2)\n      rails-dom-testing (~&gt; 1.0, &gt;= 1.0.5)\n      rails-html-sanitizer (~&gt; 1.0, &gt;= 1.0.1)\n    actionview (4.2.0)\n      activesupport (= 4.2.0)\n      builder (~&gt; 3.1)\n      erubis (~&gt; 2.7.0)\n      rails-dom-testing (~&gt; 1.0, &gt;= 1.0.5)\n      rails-html-sanitizer (~&gt; 1.0, &gt;= 1.0.1)\n    activejob (4.2.0)\n      activesupport (= 4.2.0)\n      globalid (&gt;= 0.3.0)\n    activemodel (4.2.0)\n      activesupport (= 4.2.0)\n      builder (~&gt; 3.1)\n    activerecord (4.2.0)\n      activemodel (= 4.2.0)\n      activesupport (= 4.2.0)\n      arel (~&gt; 6.0)\n    activesupport (4.2.0)\n      i18n (~&gt; 0.7)\n      json (~&gt; 1.7, &gt;= 1.7.7)\n      minitest (~&gt; 5.1)\n      thread_safe (~&gt; 0.3, &gt;= 0.3.4)\n      tzinfo (~&gt; 1.1)\n    arel (6.0.0)\n    binding_of_caller (0.7.2)\n      debug_inspector (&gt;= 0.0.1)\n    builder (3.2.2)\n    byebug (3.5.1)\n      columnize (~&gt; 0.8)\n      debugger-linecache (~&gt; 1.2)\n      slop (~&gt; 3.6)\n    capybara (2.1.0)\n      mime-types (&gt;= 1.16)\n      nokogiri (&gt;= 1.3.3)\n      rack (&gt;= 1.0.0)\n      rack-test (&gt;= 0.5.4)\n      xpath (~&gt; 2.0)\n    coffee-rails (4.1.0)\n      coffee-script (&gt;= 2.2.0)\n      railties (&gt;= 4.0.0, &lt; 5.0)\n    coffee-script (2.3.0)\n      coffee-script-source\n      execjs\n    coffee-script-source (1.9.0)\n    columnize (0.9.0)\n    debug_inspector (0.0.2)\n    debugger-linecache (1.2.0)\n    diff-lcs (1.2.5)\n    erubis (2.7.0)\n    execjs (2.3.0)\n    globalid (0.3.0)\n      activesupport (&gt;= 4.1.0)\n    hike (1.2.3)\n    i18n (0.7.0)\n    jbuilder (2.2.6)\n      activesupport (&gt;= 3.0.0, &lt; 5)\n      multi_json (~&gt; 1.2)\n    jquery-rails (4.0.3)\n      rails-dom-testing (~&gt; 1.0)\n      railties (&gt;= 4.2.0)\n      thor (&gt;= 0.14, &lt; 2.0)\n    json (1.8.2)\n    loofah (2.0.1)\n      nokogiri (&gt;= 1.5.9)\n    mail (2.6.3)\n      mime-types (&gt;= 1.16, &lt; 3)\n    mime-types (2.4.3)\n    mini_portile (0.6.2)\n    minitest (5.5.1)\n    multi_json (1.10.1)\n    nokogiri (1.6.6.2)\n      mini_portile (~&gt; 0.6.0)\n    rack (1.6.0)\n    rack-test (0.6.3)\n      rack (&gt;= 1.0)\n    rails (4.2.0)\n      actionmailer (= 4.2.0)\n      actionpack (= 4.2.0)\n      actionview (= 4.2.0)\n      activejob (= 4.2.0)\n      activemodel (= 4.2.0)\n      activerecord (= 4.2.0)\n      activesupport (= 4.2.0)\n      bundler (&gt;= 1.3.0, &lt; 2.0)\n      railties (= 4.2.0)\n      sprockets-rails\n    rails-deprecated_sanitizer (1.0.3)\n      activesupport (&gt;= 4.2.0.alpha)\n    rails-dom-testing (1.0.5)\n      activesupport (&gt;= 4.2.0.beta, &lt; 5.0)\n      nokogiri (~&gt; 1.6.0)\n      rails-deprecated_sanitizer (&gt;= 1.0.1)\n    rails-html-sanitizer (1.0.1)\n      loofah (~&gt; 2.0)\n    railties (4.2.0)\n      actionpack (= 4.2.0)\n      activesupport (= 4.2.0)\n      rake (&gt;= 0.8.7)\n      thor (&gt;= 0.18.1, &lt; 2.0)\n    rake (10.4.2)\n    rdoc (4.2.0)\n      json (~&gt; 1.4)\n    rspec-collection_matchers (1.1.2)\n      rspec-expectations (&gt;= 2.99.0.beta1)\n    rspec-core (2.99.2)\n    rspec-expectations (2.99.2)\n      diff-lcs (&gt;= 1.1.3, &lt; 2.0)\n    rspec-mocks (2.99.3)\n    rspec-rails (2.99.0)\n      actionpack (&gt;= 3.0)\n      activemodel (&gt;= 3.0)\n      activesupport (&gt;= 3.0)\n      railties (&gt;= 3.0)\n      rspec-collection_matchers\n      rspec-core (~&gt; 2.99.0)\n      rspec-expectations (~&gt; 2.99.0)\n      rspec-mocks (~&gt; 2.99.0)\n    sass (3.4.11)\n    sass-rails (5.0.1)\n      railties (&gt;= 4.0.0, &lt; 5.0)\n      sass (~&gt; 3.1)\n      sprockets (&gt;= 2.8, &lt; 4.0)\n      sprockets-rails (&gt;= 2.0, &lt; 4.0)\n      tilt (~&gt; 1.1)\n    sdoc (0.4.1)\n      json (~&gt; 1.7, &gt;= 1.7.7)\n      rdoc (~&gt; 4.0)\n    slop (3.6.0)\n    spring (1.2.0)\n    sprockets (2.12.3)\n      hike (~&gt; 1.2)\n      multi_json (~&gt; 1.0)\n      rack (~&gt; 1.0)\n      tilt (~&gt; 1.1, != 1.3.0)\n    sprockets-rails (2.2.4)\n      actionpack (&gt;= 3.0)\n      activesupport (&gt;= 3.0)\n      sprockets (&gt;= 2.8, &lt; 4.0)\n    sqlite3 (1.3.10)\n    thor (0.19.1)\n    thread_safe (0.3.4)\n    tilt (1.4.1)\n    turbolinks (2.5.3)\n      coffee-rails\n    tzinfo (1.2.2)\n      thread_safe (~&gt; 0.1)\n    uglifier (2.7.0)\n      execjs (&gt;= 0.3.0)\n      json (&gt;= 1.8.0)\n    web-console (2.0.0)\n      activemodel (~&gt; 4.0)\n      binding_of_caller (&gt;= 0.7.2)\n      railties (~&gt; 4.0)\n      sprockets-rails (&gt;= 2.0, &lt; 4.0)\n    xpath (2.0.0)\n      nokogiri (~&gt; 1.3)\n\nPLATFORMS\n  ruby\n\nDEPENDENCIES\n  byebug\n  capybara (~&gt; 2.1.0)\n  coffee-rails (~&gt; 4.1.0)\n  jbuilder (~&gt; 2.0)\n  jquery-rails\n  rails (= 4.2.0)\n  rspec-rails (~&gt; 2.0)\n  sass-rails (~&gt; 5.0)\n  sdoc (~&gt; 0.4.0)\n  spring\n  sqlite3\n  turbolinks\n  uglifier (&gt;= 1.3.0)\n  web-console (~&gt; 2.0)\n</code></pre>\n\n<p>RubyGems Environment:</p>\n\n<pre><code>  - RUBYGEMS VERSION: 2.4.5\n  - RUBY VERSION: 2.0.0 (2014-05-08 patchlevel 481) [universal.x86_64-darwin14]\n  - INSTALLATION DIRECTORY: /Library/Ruby/Gems/2.0.0\n  - RUBY EXECUTABLE: /System/Library/Frameworks/Ruby.framework/Versions/2.0/usr/bin/ruby\n  - EXECUTABLE DIRECTORY: /usr/bin\n  - SPEC CACHE DIRECTORY: /volumes/ALEX/.gem/specs\n  - SYSTEM CONFIGURATION DIRECTORY: /Library/Ruby/Site\n  - RUBYGEMS PLATFORMS:\n    - ruby\n    - universal-darwin-14\n  - GEM PATHS:\n     - /Library/Ruby/Gems/2.0.0\n     - /volumes/ALEX/.gem/ruby/2.0.0\n     - /System/Library/Frameworks/Ruby.framework/Versions/2.0/usr/lib/ruby/gems/2.0.0\n  - GEM CONFIGURATION:\n     - :update_sources =&gt; true\n     - :verbose =&gt; true\n     - :backtrace =&gt; false\n     - :bulk_threshold =&gt; 1000\n  - REMOTE SOURCES:\n     - https://rubygems.org/\n  - SHELL PATH:\n     - /usr/local/bin\n     - /usr/bin\n     - /bin\n     - /usr/sbin\n     - /sbin\n     - /Users/alexmattson/.rbenv/versions/2.2.0/bin/\n</code></pre>\n\n<p>which gem</p>\n\n<pre><code>/usr/bin/gem\n</code></pre>\n\n<p>which bundle</p>\n\n<pre><code>/usr/bin/bundle\n</code></pre>\n"}, {"tags": ["ruby", "mongoid"], "comments": [{"owner": {"reputation": 2708, "user_id": 1757338, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/c5ddddc8fdccc5c2bd49dc74c02a60b7?s=128&d=identicon&r=PG", "display_name": "yeyo", "link": "https://stackoverflow.com/users/1757338/yeyo"}, "edited": false, "score": 0, "creation_date": 1423006434, "post_id": 28310715, "comment_id": 44972465, "body": "As far as I know, there&#39;s not such thing like a table in MongoDB. There is however, <code>collections</code> which might be seen as the inverse of a table in a RDBMS."}, {"owner": {"reputation": 39282, "user_id": 336920, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/6e2dbeb23d3fc6552a6e26800ed63289?s=128&d=identicon&r=PG", "display_name": "B Seven", "link": "https://stackoverflow.com/users/336920/b-seven"}, "reply_to_user": {"reputation": 2708, "user_id": 1757338, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/c5ddddc8fdccc5c2bd49dc74c02a60b7?s=128&d=identicon&r=PG", "display_name": "yeyo", "link": "https://stackoverflow.com/users/1757338/yeyo"}, "edited": false, "score": 0, "creation_date": 1423006493, "post_id": 28310715, "comment_id": 44972495, "body": "Yes, I meant collections."}], "answers": [{"tags": [], "owner": {"reputation": 2708, "user_id": 1757338, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/c5ddddc8fdccc5c2bd49dc74c02a60b7?s=128&d=identicon&r=PG", "display_name": "yeyo", "link": "https://stackoverflow.com/users/1757338/yeyo"}, "is_accepted": true, "score": 1, "last_activity_date": 1423007224, "creation_date": 1423007224, "answer_id": 28310983, "question_id": 28310715, "link": "https://stackoverflow.com/questions/28310715/how-to-quickly-query-multiple-collections-in-mongoid/28310983#28310983", "title": "How to quickly query multiple collections in Mongoid?", "body": "<p>I don't know a way of querying several collections at the time, and I believe that if one try to do that will defeat the purpose of using a NONSQL DB like MongoDB.</p>\n\n<p>However, there is one way of archiving this behaviour in MongoDB. Using embedded documents. For example:</p>\n\n<pre><code>class Everything\n    include Mongoid::Document\n    include Mongoid::Timestamps\n\n    embeds_many :foos, class_name: 'Foo',  inverse_of: :everything\n    embeds_many :bars, class_name: 'Bar',  inverse_of: :everything\n    embeds_many :bazs, class_name: 'Bazs', inverse_of: :everything\n\nend\n\nclass Foo\n    include Mongoid::Document\n\n    field :foo, type: String\n\n    embedded_in :everything, class_name: 'Everything', inverse_of: :foos\nend\n\nclass Bar\n    include Mongoid::Document\n\n    field :bar, type: String\n\n    embedded_in :everything, class_name: 'Everything', inverse_of: :bars\nend\n\nclass Bazs\n    include Mongoid::Document\n\n    field :baz, type: String\n\n    embedded_in :everything, class_name: 'Everything', inverse_of: :bazs\nend\n</code></pre>\n\n<p>Doing <code>Everything.all</code> will retrieve all documents in <code>Everything</code> along with all the embedded documents in one call.</p>\n"}], "owner": {"reputation": 39282, "user_id": 336920, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/6e2dbeb23d3fc6552a6e26800ed63289?s=128&d=identicon&r=PG", "display_name": "B Seven", "link": "https://stackoverflow.com/users/336920/b-seven"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 222, "favorite_count": 0, "accepted_answer_id": 28310983, "answer_count": 1, "score": -1, "last_activity_date": 1423007224, "creation_date": 1423005901, "last_edit_date": 1423006507, "question_id": 28310715, "link": "https://stackoverflow.com/questions/28310715/how-to-quickly-query-multiple-collections-in-mongoid", "title": "How to quickly query multiple collections in Mongoid?", "body": "<p>Foo, Bar and Baz are all Mongoid collection models. There are the only collections in the DB.</p>\n\n<p>Is there a more efficient way to get all the data in the DB?</p>\n\n<pre><code>Foo.all + Bar.all + Baz.all\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4"], "comments": [{"owner": {"reputation": 19398, "user_id": 435471, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/WvUmQ.jpg?s=128&g=1", "display_name": "Kyle Decot", "link": "https://stackoverflow.com/users/435471/kyle-decot"}, "edited": false, "score": 0, "creation_date": 1423005959, "post_id": 28310696, "comment_id": 44972281, "body": "This doesn&#39;t answer your question but you can say <code>10.minutes.ago</code> instead of <code>Time.zone.now - 10.minutes</code>. Please show use your <code>Micropost</code> model and how a <code>Vote</code> relates to it."}, {"owner": {"reputation": 23, "user_id": 2899208, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/889b25b8d44c9a6f777e70efec60aade?s=128&d=identicon&r=PG&f=1", "display_name": "Haisong Huang", "link": "https://stackoverflow.com/users/2899208/haisong-huang"}, "reply_to_user": {"reputation": 19398, "user_id": 435471, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/WvUmQ.jpg?s=128&g=1", "display_name": "Kyle Decot", "link": "https://stackoverflow.com/users/435471/kyle-decot"}, "edited": false, "score": 0, "creation_date": 1423006850, "post_id": 28310696, "comment_id": 44972635, "body": "@KyleDecot ty for ur comments, updated \uff1a\uff09"}], "answers": [{"comments": [{"owner": {"reputation": 23, "user_id": 2899208, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/889b25b8d44c9a6f777e70efec60aade?s=128&d=identicon&r=PG&f=1", "display_name": "Haisong Huang", "link": "https://stackoverflow.com/users/2899208/haisong-huang"}, "edited": false, "score": 0, "creation_date": 1423006816, "post_id": 28310793, "comment_id": 44972619, "body": "hi, ty for ur answer, but since i make this vote model as voteable, rails shows error &quot;no such column: votes:&quot;"}, {"owner": {"reputation": 14469, "user_id": 2191105, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/tPiCW.png?s=128&g=1", "display_name": "David Hoelzer", "link": "https://stackoverflow.com/users/2191105/david-hoelzer"}, "reply_to_user": {"reputation": 23, "user_id": 2899208, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/889b25b8d44c9a6f777e70efec60aade?s=128&d=identicon&r=PG&f=1", "display_name": "Haisong Huang", "link": "https://stackoverflow.com/users/2899208/haisong-huang"}, "edited": false, "score": 0, "creation_date": 1423007227, "post_id": 28310793, "comment_id": 44972756, "body": "Which gem are you using to add voteable?  You can likely obtain a list of micro posts and then filter that with a map call."}], "tags": [], "owner": {"reputation": 14469, "user_id": 2191105, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/tPiCW.png?s=128&g=1", "display_name": "David Hoelzer", "link": "https://stackoverflow.com/users/2191105/david-hoelzer"}, "is_accepted": true, "score": 1, "last_activity_date": 1423008277, "last_edit_date": 1423008277, "creation_date": 1423006252, "answer_id": 28310793, "question_id": 28310696, "link": "https://stackoverflow.com/questions/28310696/how-to-show-posts-have-more-than-5-votes-and-be-posted-in-1hour/28310793#28310793", "title": "How to show posts have more than 5 votes and be posted in 1hour?", "body": "<p>I don't like this solution since it requires multiple hits against your database but with small numbers (hundreds or even thousands) of items it should work just fine.</p>\n\n<pre><code>def feed\n  posts = Micropost.where(\"votes&gt;=5 and created_at &gt;= ?\", 1.hour.ago)\n  return posts.select { |post| post.total_votes &gt; 5 }\nend\n</code></pre>\n"}], "owner": {"reputation": 23, "user_id": 2899208, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/889b25b8d44c9a6f777e70efec60aade?s=128&d=identicon&r=PG&f=1", "display_name": "Haisong Huang", "link": "https://stackoverflow.com/users/2899208/haisong-huang"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 30, "favorite_count": 1, "accepted_answer_id": 28310793, "answer_count": 1, "score": 0, "last_activity_date": 1423465819, "creation_date": 1423005772, "last_edit_date": 1495535123, "question_id": 28310696, "link": "https://stackoverflow.com/questions/28310696/how-to-show-posts-have-more-than-5-votes-and-be-posted-in-1hour", "title": "How to show posts have more than 5 votes and be posted in 1hour?", "body": "<p>this is what I write, which is working well with show only the post has been posted in 1 hour,</p>\n\n<pre><code>def feed\n  Micropost.where(\"created_at &gt;= ?\", Time.zone.now - 10.minutes)\nend\n</code></pre>\n\n<p>my micropost model:</p>\n\n<pre><code>class Micropost &lt; ActiveRecord::Base\n\n    has_many :votes, as: :voteable\n    ...\n\n  def total_votes\n    self.up_votes - self.down_votes\n  end\n\n  def up_votes\n    self.votes.where(vote: true).size\n  end\n\n  def down_votes\n    self.votes.where(vote: false).size\n  end\nend\n</code></pre>\n\n<p>my vote model</p>\n\n<pre><code>class Vote &lt; ActiveRecord::Base\n  belongs_to :user\n  belongs_to :voteable, polymorphic: true\n  validates_uniqueness_of :user, scope: [:voteable_id, :voteable_type]\nend\n</code></pre>\n\n<p>Related Link:<a href=\"https://stackoverflow.com/questions/28403479/render-posts-both-by-time-desc-and-total-votes\">Render posts both by time desc and total_votes</a></p>\n"}, {"tags": ["ruby", "amazon-web-services", "cdn", "fog"], "answers": [{"tags": [], "owner": {"reputation": 117, "user_id": 3511857, "user_type": "registered", "accept_rate": 56, "profile_image": "https://graph.facebook.com/8812702/picture?type=large", "display_name": "E.Z.", "link": "https://stackoverflow.com/users/3511857/e-z"}, "is_accepted": true, "score": 1, "last_activity_date": 1423156618, "last_edit_date": 1423156618, "creation_date": 1423003567, "answer_id": 28310219, "question_id": 28309537, "link": "https://stackoverflow.com/questions/28309537/how-to-use-fog-library-to-create-cdn-in-aws/28310219#28310219", "title": "How to use Fog Library to create CDN in AWS", "body": "<p>I found this <a href=\"https://gist.github.com/morten/3139f3ca80571f441f13\" rel=\"nofollow\">gist</a> that explains the context.</p>\n\n<p>So, the RubyDoc.info link (in question) said that the Enabled Boolean was an Option. But, in AWS it is not (or so it seems based on the error I got).</p>\n\n<p>But, to resolve this, the :Enabled => true has to be OUTSIDE of the cdn.distribution block.</p>\n\n<p>Hope this helps anyone who is looking for this in the future! </p>\n\n<p>Also, this might be a BUG because the Fog library says that this feature is OPTIONAL but it seems mandatory by AWS.</p>\n"}], "owner": {"reputation": 117, "user_id": 3511857, "user_type": "registered", "accept_rate": 56, "profile_image": "https://graph.facebook.com/8812702/picture?type=large", "display_name": "E.Z.", "link": "https://stackoverflow.com/users/3511857/e-z"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 94, "favorite_count": 0, "accepted_answer_id": 28310219, "answer_count": 1, "score": 0, "last_activity_date": 1423156618, "creation_date": 1423000648, "last_edit_date": 1423003411, "question_id": 28309537, "link": "https://stackoverflow.com/questions/28309537/how-to-use-fog-library-to-create-cdn-in-aws", "title": "How to use Fog Library to create CDN in AWS", "body": "<p>I am new in the DevOps world and my company uses Fog library to deploy EC2 instances for our Dev Environment. One of my company's products needs a CDN and I am trying to figure out how I can automate CDN using the same Fog Library.</p>\n\n<p>I found info at fog.io and here is the code I put in makeCDN.rb (with a .sh wrapper to deploy it).</p>\n\n<pre><code>#!/usr/bin/ruby\nrequire 'fog'\n\n# create a connection to the service\ncdn = Fog::CDN.new({\n\n :provider               =&gt; 'AWS',\n :aws_access_key_id      =&gt; 'fake_key_id',\n :aws_secret_access_key  =&gt; '2345fake_access_key6789'\n})\n\ncdn.post_distribution({\n  'CustomOrigin' =&gt; {\n    'DNSName'               =&gt; 'hostname.domain.org', #example name\n    'HTTPPort'              =&gt; '80',\n    'OriginProtocolPolicy'  =&gt; 'match-viewer',\n    'DefaultRootObject'     =&gt; '/',\n    'Enabled'               =&gt; 'true',\n  }\n\n})\n</code></pre>\n\n<p>So, I am unsure what I am doing wrong but the error I am getting is:</p>\n\n<pre><code>/home/eztheog/.rvm/gems/ruby-1.9.3-p547@fogDev/gems/excon-0.38.0/lib/excon/middlewares/expects.rb:10:in \n`response_call': Expected(201) &lt;=&gt; Actual(400 Bad Request) (Excon::Errors::BadRequest)\nresponse =&gt; #&lt;Excon::Response:0x00000001d73b78 @data={:body=&gt;\"&lt;?xml version=\\\"1.0\\\"?&gt;\\n&lt;ErrorResponse \nxmlns=\\\"http://cloudfront.amazonaws.com/doc/2010-11-01/\\\"&gt;&lt;Error&gt;\n&lt;Type&gt;Sender&lt;/Type&gt;&lt;Code&gt;MalformedXML&lt;/Code&gt;&lt;Message&gt;1 validation error\n detected: Value null at 'distributionConfig.enabled' failed to satisfy\n constraint: Member must not be null&lt;/Message&gt;&lt;/Error&gt;\n&lt;RequestId&gt;c2b33cda-abee-11e4-8115-b584e1255c70&lt;/RequestId&gt;\n&lt;/ErrorResponse&gt;\", :headers=&gt;{\"x-amzn-RequestId\"=&gt;\"c2b33cda-abee-11e4-8115-b584e1255c70\",\n \"Content-Type\"=&gt;\"text/xml\", \"Content-Length\"=&gt;\"371\", \"Date\"=&gt;\"Tue, 03\n Feb 2015 21:51:07 GMT\"}, :status=&gt;400, :remote_ip=&gt;\"205.251.242.229\",\n :local_port=&gt;39733, :local_address=&gt;\"10.100.6.203\"}, @body=\"&lt;?xml \nversion=\\\"1.0\\\"?&gt;\\n&lt;ErrorResponse \nxmlns=\\\"http://cloudfront.amazonaws.com/doc/2010-11-01/\\\"&gt;&lt;Error&gt;\n&lt;Type&gt;Sender&lt;/Type&gt;&lt;Code&gt;MalformedXML&lt;/Code&gt;&lt;Message&gt;1 validation error \ndetected: Value null at 'distributionConfig.enabled' failed to satisfy\n constraint: Member must not be null&lt;/Message&gt;&lt;/Error&gt;\n&lt;RequestId&gt;c2b33cda-abee-11e4-8115-b584e1255c70&lt;/RequestId&gt;\n&lt;/ErrorResponse&gt;\", @headers={\"x-amzn-RequestId\"=&gt;\"c2b33cda-abee-11e4-\n8115-b584e1255c70\", \"Content-Type\"=&gt;\"text/xml\", \"Content-Length\"=&gt;\"371\",\n \"Date\"=&gt;\"Tue, 03 Feb 2015 21:51:07 GMT\"}, @status=400, \n@remote_ip=\"205.251.242.229\", @local_port=39733, \n@local_address=\"10.100.6.203\"&gt;\n</code></pre>\n\n<p>I have found information <a href=\"http://www.rubydoc.info/gems/fog/1.3.1/Fog/CDN/AWS/Real#post_distribution-instance_method\" rel=\"nofollow\" title=\"Fog CDN RubyDoc.info\">here</a> but am unsure how to parse the info into the ruby file.</p>\n\n<p>There seems to be little blog stuff that I can find to figure out how to do this.</p>\n\n<p>Can anyone point me the right direction?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "activerecord", "twilio"], "answers": [{"comments": [{"owner": {"reputation": 53136, "user_id": 28376, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/8ec1383b240b5ba15ffb9743fceb3c0e?s=128&d=identicon&r=PG", "display_name": "philnash", "link": "https://stackoverflow.com/users/28376/philnash"}, "edited": false, "score": 0, "creation_date": 1423003952, "post_id": 28309494, "comment_id": 44971523, "body": "Hey, I&#39;m a developer evangelist for Twilio. You&#39;ve hit the nail on the head here, there is no <code>Twilio::Rest</code> module, it is capitalised as <code>Twilio::REST</code>. Thanks for jumping in and answering!"}, {"owner": {"reputation": 279, "user_id": 4279189, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/3Gy5u.jpg?s=128&g=1", "display_name": "Colton Seal", "link": "https://stackoverflow.com/users/4279189/colton-seal"}, "edited": false, "score": 0, "creation_date": 1423016950, "post_id": 28309494, "comment_id": 44975283, "body": "I wrote this first in a script, and then transferred over into rails.  Cant believe I missed the Twilio::REST.  Thanks guys"}], "tags": [], "owner": {"reputation": 675, "user_id": 1703484, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/eVqSQ.jpg?s=128&g=1", "display_name": "johnnyutah", "link": "https://stackoverflow.com/users/1703484/johnnyutah"}, "is_accepted": true, "score": 3, "last_activity_date": 1423000469, "creation_date": 1423000469, "answer_id": 28309494, "question_id": 28309431, "link": "https://stackoverflow.com/questions/28309431/uninitialized-constant-twiliorest-rails/28309494#28309494", "title": "uninitialized constant Twilio::Rest Rails", "body": "<p>Could be the first :: throwing it off. Try:</p>\n\n<pre><code>@client = Twilio::REST::Client.new account_sid, account_auth_token\n</code></pre>\n\n<p>instead of</p>\n\n<pre><code>@client = ::Twilio::Rest::Client.new account_sid, account_auth_token\n</code></pre>\n\n<p>Examples: <a href=\"https://github.com/twilio/twilio-ruby/blob/master/examples/examples.rb\" rel=\"nofollow\">https://github.com/twilio/twilio-ruby/blob/master/examples/examples.rb</a></p>\n\n<p>Also see <a href=\"https://github.com/twilio/twilio-ruby/blob/master/lib/twilio-ruby/rest/client.rb\" rel=\"nofollow\">https://github.com/twilio/twilio-ruby/blob/master/lib/twilio-ruby/rest/client.rb</a>  - looks like REST should be capitalized.</p>\n"}], "owner": {"reputation": 279, "user_id": 4279189, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/3Gy5u.jpg?s=128&g=1", "display_name": "Colton Seal", "link": "https://stackoverflow.com/users/4279189/colton-seal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1394, "favorite_count": 0, "accepted_answer_id": 28309494, "answer_count": 1, "score": 1, "last_activity_date": 1423000469, "creation_date": 1423000215, "question_id": 28309431, "link": "https://stackoverflow.com/questions/28309431/uninitialized-constant-twiliorest-rails", "title": "uninitialized constant Twilio::Rest Rails", "body": "<p>I keep getting an <code>uninitialized constant Twilio::Rest</code> error, cannot figure out what I have done wrong.  My code is below.</p>\n\n<p>dial Model</p>\n\n<pre><code>require 'twilio-ruby'\nclass Dial &lt; ActiveRecord::Base\n    before_create :send_call\n\n    private\n\n    def send_call\n        #begin\n            account_sid        = 'sid'\n            account_auth_token = 'auth'\n            caller = '+14693514939'\n            numbers = Number.find_by_sql('select phone from numbers')\n\n            @client = ::Twilio::Rest::Client.new account_sid, account_auth_token\n\n            numbers.each do |dial|\n\n                @client.account.calls.create(\n                        :from =&gt; caller,\n                        :to =&gt; dial,\n                        :url =&gt; 'http://twimlets.com/echo?Twiml=hello%20this%20is%20a%20test%20call%20please%20hang%20up&amp;')\n            end\n        #rescue\n            #false\n        #end\n    end\nend\n</code></pre>\n\n<p>My dial view</p>\n\n<pre><code>&lt;%= button_to \"Call\", action: \"create\" %&gt;\n</code></pre>\n\n<p>any ideas?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "postgresql"], "comments": [{"owner": {"reputation": 725, "user_id": 3613829, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PhaFN.jpg?s=128&g=1", "display_name": "Alexis Andersen", "link": "https://stackoverflow.com/users/3613829/alexis-andersen"}, "edited": false, "score": 0, "creation_date": 1423006937, "post_id": 28309116, "comment_id": 44972664, "body": "It&#39;s been a while since my postgres days, but if you could outer join against a table of dates, couldn&#39;t you select the minimum date where date_assignment_id is null and date &gt; today?  Obviously this requires access to some table of dates which I&#39;m not sure if there&#39;s a more idiomatic sql way of doing that."}], "answers": [{"comments": [{"owner": {"reputation": 306, "user_id": 2272439, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/09fc3f0a0fec024750865851d8c3bf02?s=128&d=identicon&r=PG", "display_name": "dfaulken", "link": "https://stackoverflow.com/users/2272439/dfaulken"}, "edited": false, "score": 0, "creation_date": 1423000009, "post_id": 28309268, "comment_id": 44969756, "body": "It&#39;s a definite improvement on speed, just by moving the DB call up the stack. Since find and detect are functionally identical here, I would write this as <code>(Date.today..1.year.since.to_date).find{|date| results.find{|instance| instance.date == date}.nil?}</code>. However I still benchmark this at around 0.1 s. I&#39;d like a PostgresQL solution if possible."}], "tags": [], "owner": {"reputation": 3049, "user_id": 47603, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/dcGAA.jpg?s=128&g=1", "display_name": "Vince V.", "link": "https://stackoverflow.com/users/47603/vince-v"}, "is_accepted": false, "score": 0, "last_activity_date": 1422999518, "creation_date": 1422999518, "answer_id": 28309268, "question_id": 28309116, "link": "https://stackoverflow.com/questions/28309116/earliest-date-after-current-date-without-associated-record/28309268#28309268", "title": "Earliest date after current date without associated record", "body": "<p>What I propose is to do 1 select query between dates, then loop your results and compare them with your selected results.</p>\n\n<pre><code># select all dailyassignments\nresults = DailyAssignment.where(\"date &gt;= from_date AND date &lt;= to_date\")\n\nnot_found_dates = []\n\n(Date.today..1.year.since).find do |date|\n  found_assignment = results.detect {|instance| instance.date == date }\n  not_found_dates &lt;&lt; date if found_assignment.nil?\nend\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 306, "user_id": 2272439, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/09fc3f0a0fec024750865851d8c3bf02?s=128&d=identicon&r=PG", "display_name": "dfaulken", "link": "https://stackoverflow.com/users/2272439/dfaulken"}, "edited": false, "score": 0, "creation_date": 1423003012, "post_id": 28309504, "comment_id": 44971124, "body": "A similar strategy, but still does the actual processing in Ruby. I&#39;ll take a look at your link."}, {"owner": {"reputation": 306, "user_id": 2272439, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/09fc3f0a0fec024750865851d8c3bf02?s=128&d=identicon&r=PG", "display_name": "dfaulken", "link": "https://stackoverflow.com/users/2272439/dfaulken"}, "edited": false, "score": 0, "creation_date": 1423003998, "post_id": 28309504, "comment_id": 44971549, "body": "This takes several seconds for a large enough collection of dates. Also, the penultimate line is missing a <code>)</code> and the first line needs an <code>order(:date)</code> on the end."}, {"owner": {"reputation": 2388, "user_id": 3655580, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/58695ea14f641ae7e2f15b34434fd6a0?s=128&d=identicon&r=PG&f=1", "display_name": "edariedl", "link": "https://stackoverflow.com/users/3655580/edariedl"}, "reply_to_user": {"reputation": 306, "user_id": 2272439, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/09fc3f0a0fec024750865851d8c3bf02?s=128&d=identicon&r=PG", "display_name": "dfaulken", "link": "https://stackoverflow.com/users/2272439/dfaulken"}, "edited": false, "score": 0, "creation_date": 1423037457, "post_id": 28309504, "comment_id": 44981858, "body": "Yes it, can take several seconds for a large enough collection of dates. As I said, I didn&#39;t test it, but there is no problem with end date. I absolutely agree the database solution would be much better. This solution is only to show other way, how you can think about it :)"}, {"owner": {"reputation": 2388, "user_id": 3655580, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/58695ea14f641ae7e2f15b34434fd6a0?s=128&d=identicon&r=PG&f=1", "display_name": "edariedl", "link": "https://stackoverflow.com/users/3655580/edariedl"}, "reply_to_user": {"reputation": 306, "user_id": 2272439, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/09fc3f0a0fec024750865851d8c3bf02?s=128&d=identicon&r=PG", "display_name": "dfaulken", "link": "https://stackoverflow.com/users/2272439/dfaulken"}, "edited": false, "score": 0, "creation_date": 1423037528, "post_id": 28309504, "comment_id": 44981891, "body": "Just for information: What is a large enough collection?"}], "tags": [], "owner": {"reputation": 2388, "user_id": 3655580, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/58695ea14f641ae7e2f15b34434fd6a0?s=128&d=identicon&r=PG&f=1", "display_name": "edariedl", "link": "https://stackoverflow.com/users/3655580/edariedl"}, "is_accepted": false, "score": 0, "last_activity_date": 1423001037, "last_edit_date": 1423001037, "creation_date": 1423000514, "answer_id": 28309504, "question_id": 28309116, "link": "https://stackoverflow.com/questions/28309116/earliest-date-after-current-date-without-associated-record/28309504#28309504", "title": "Earliest date after current date without associated record", "body": "<p>You can try it this way:</p>\n\n<pre><code>def first_date_without_assignment\n  assignments = DailyAssignment.select('date').where('date &gt; ?', Date.today)\n  return Date.tomorrow if assignments.empty?\n\n  assignment_dates = assignments.map(&amp;:date)\n  date_range = (Date.tomorrow..(assignment_dates.last.advance(days: 1)).to_a\n\n  (date_range - assignment_dates).first\nend\n</code></pre>\n\n<p>I didn't test it so I could mistype something, but it could work. I also find this, it should work on postgres <a href=\"http://www.postgresql.org/message-id/4F96EC90.6070600@encs.concordia.ca\" rel=\"nofollow\">http://www.postgresql.org/message-id/4F96EC90.6070600@encs.concordia.ca</a> but it could be quite hard to write in rails or at least bad looking. </p>\n"}, {"comments": [{"owner": {"reputation": 306, "user_id": 2272439, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/09fc3f0a0fec024750865851d8c3bf02?s=128&d=identicon&r=PG", "display_name": "dfaulken", "link": "https://stackoverflow.com/users/2272439/dfaulken"}, "edited": false, "score": 0, "creation_date": 1423060699, "post_id": 28320447, "comment_id": 44995808, "body": "Thank you. This is exactly what I am looking for. Rails can execute arbitrary SQL as an argument of <code>ActiveRecord::Base.connection.execute</code>, so this is perfect."}, {"owner": {"reputation": 28971, "user_id": 1499698, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ad28bf1565b1191c0591bf90d46299a7?s=128&d=identicon&r=PG", "display_name": "pozs", "link": "https://stackoverflow.com/users/1499698/pozs"}, "reply_to_user": {"reputation": 306, "user_id": 2272439, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/09fc3f0a0fec024750865851d8c3bf02?s=128&d=identicon&r=PG", "display_name": "dfaulken", "link": "https://stackoverflow.com/users/2272439/dfaulken"}, "edited": false, "score": 0, "creation_date": 1423061789, "post_id": 28320447, "comment_id": 44996559, "body": "@user2272439 i left out the <code>order by</code> clause from my unbound (second) query, see the updated -- you may not need the outer select in the second  one, it only makes sure you always get the next free date, but you can simulate it in ruby easily: if you get no results from the inner query, that means <i>tomorrow</i> is the next free date."}], "tags": [], "owner": {"reputation": 28971, "user_id": 1499698, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ad28bf1565b1191c0591bf90d46299a7?s=128&d=identicon&r=PG", "display_name": "pozs", "link": "https://stackoverflow.com/users/1499698/pozs"}, "is_accepted": true, "score": 1, "last_activity_date": 1423061627, "last_edit_date": 1423061627, "creation_date": 1423049951, "answer_id": 28320447, "question_id": 28309116, "link": "https://stackoverflow.com/questions/28309116/earliest-date-after-current-date-without-associated-record/28320447#28320447", "title": "Earliest date after current date without associated record", "body": "<p>If you can, you should use a custom query to search through your database (these kind of searches are a lot faster within the DB).</p>\n\n<p>If you search for a date within a time range, you can use the<br>\n<a href=\"http://www.postgresql.org/docs/current/static/functions-srf.html\" rel=\"nofollow\"><code>generate_series(timestamp, timestamp, interval)</code></a> function:</p>\n\n<pre><code>select    s\nfrom      generate_series(?, ? + interval '1 year'), interval '1 day') s\nleft join daily_assignment on s = \"date\"\nwhere     \"date\" is null\nlimit     1\n</code></pre>\n\n<p>If you have no real upper bound, you can use a self-join to get the next <em>free</em> date:</p>\n\n<pre><code>select coalesce(\n  (select    c.\"date\" + interval '1 day'\n   from      daily_assignment c\n   left join daily_assignment n on n.\"date\" = c.\"date\" + interval '1 day'\n   where     c.\"date\" &gt; ? - interval '1 day'\n   and       n.\"date\" is null\n   order by  c.\"date\"\n   limit     1),\n  ? + interval '1 day'\n)\n</code></pre>\n\n<p><strong>?</strong> marks mean the parameter of today (you <em>may</em> need casts, depending on your input); you could use <code>now()</code> instead, if you prefer.</p>\n\n<p><strong>P.S.</strong>: please, do not use <code>date</code> as a column name, it is a reserved word in SQL, and tells nothing about the column itself. Instead, you can use names like <code>created_at</code>, <code>updated_at</code>, <code>happens_at</code>, etc. or even <code>at_date</code>.</p>\n"}], "owner": {"reputation": 306, "user_id": 2272439, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/09fc3f0a0fec024750865851d8c3bf02?s=128&d=identicon&r=PG", "display_name": "dfaulken", "link": "https://stackoverflow.com/users/2272439/dfaulken"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 328, "favorite_count": 0, "accepted_answer_id": 28320447, "answer_count": 3, "score": 1, "last_activity_date": 1423061627, "creation_date": 1422998931, "last_edit_date": 1423004680, "question_id": 28309116, "link": "https://stackoverflow.com/questions/28309116/earliest-date-after-current-date-without-associated-record", "title": "Earliest date after current date without associated record", "body": "<p>I have a Rails model <code>DailyAssignment</code> with a date column, and would like to find the first date after today which does not have a <code>DailyAssignment</code> associated with it.</p>\n\n<p>For instance, if I have an instance today, no instance tomorrow, and an instance the day after tomorrow, this method should return tomorrow.</p>\n\n<p>If I were to do this in Ruby, it would be something like:</p>\n\n<pre><code>(Date.today..1.year.since.to_date).find do |date|\n  DailyAssignment.where(date: date).empty?\nend\n</code></pre>\n\n<p>This is medium okay since it will terminate the iteration once it finds a record, but has two issues:</p>\n\n<ol>\n<li>Iterating through a collection in Ruby is slow.</li>\n<li>Barring some sort of <code>while</code> construct, I need to specify an 'end' date.</li>\n</ol>\n\n<p>Is there a nice, efficient way to do this in PostgreSQL?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4", "formwizard", "wicked-gem"], "comments": [{"owner": {"reputation": 61, "user_id": 10745169, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/09365e021973a73a64f821a3d39c4013?s=128&d=identicon&r=PG&f=1", "display_name": "Ricky", "link": "https://stackoverflow.com/users/10745169/ricky"}, "edited": false, "score": 0, "creation_date": 1599060287, "post_id": 28308703, "comment_id": 112658136, "body": "I would really have liked to know how to do this as I am having the same issue, wicked does not seem to be set up to work with ajax js.erb remote true very well."}, {"owner": {"reputation": 61, "user_id": 10745169, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/09365e021973a73a64f821a3d39c4013?s=128&d=identicon&r=PG&f=1", "display_name": "Ricky", "link": "https://stackoverflow.com/users/10745169/ricky"}, "edited": false, "score": 0, "creation_date": 1599070335, "post_id": 28308703, "comment_id": 112662687, "body": "I found a solution that worked for me. In the <code>form_with</code> that I am rendering I just specify the step like this <code>url: wicked_step(:my_step)</code> that way when the form gets reloaded by the js.erb file the partial can tell the form what step to submit to and then the controller just uses that step."}], "answers": [{"tags": [], "owner": {"reputation": 147, "user_id": 2193335, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1b827b7a5145c2f012ee51d4e9e267e4?s=128&d=identicon&r=PG", "display_name": "Kevin Bende", "link": "https://stackoverflow.com/users/2193335/kevin-bende"}, "is_accepted": false, "score": -1, "last_activity_date": 1423075909, "creation_date": 1423075909, "answer_id": 28329124, "question_id": 28308703, "link": "https://stackoverflow.com/questions/28308703/with-wicked-gem-i-cant-manually-move-to-the-next-step/28329124#28329124", "title": "With wicked gem, I can&#39;t manually move to the next step", "body": "<p>Use a .js.erb view to respond to the AJAX command and then in the view, run the render_wizard in there:</p>\n\n<pre><code>$('#content').html('&lt;%= j render_wizard @object %&gt;');\n</code></pre>\n"}], "owner": {"reputation": 4159, "user_id": 1959050, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/421de4eb68c9e4a007b0c90f05c15999?s=128&d=identicon&r=PG", "display_name": "Philip7899", "link": "https://stackoverflow.com/users/1959050/philip7899"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 353, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1423075909, "creation_date": 1422997439, "question_id": 28308703, "link": "https://stackoverflow.com/questions/28308703/with-wicked-gem-i-cant-manually-move-to-the-next-step", "title": "With wicked gem, I can&#39;t manually move to the next step", "body": "<p>I am using the Wicked gem for multi-step forms and i plan on implementing a custom ajax method, so I will not be able to use the render_wizard method.  Right now I am just trying to manually move to the next step.  The following does not work:</p>\n\n<pre><code>def update\n    jump_to next_step\n    render step\nend\n</code></pre>\n\n<p>I've also tried:</p>\n\n<pre><code>def update\n    render next_step\nend\n</code></pre>\n\n<p>but the step never actually changes.  So just putting \"render next_step\" keeps on calling the same step because \"step\" never changes</p>\n\n<p>How do i manually move to the next step?</p>\n"}, {"tags": ["ruby", "watir", "watir-webdriver"], "comments": [{"owner": {"reputation": 9797, "user_id": 397898, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/391cef23716880f703e93efe2ae5149c?s=128&d=identicon&r=PG", "display_name": "Sebastian Wramba", "link": "https://stackoverflow.com/users/397898/sebastian-wramba"}, "edited": false, "score": 3, "creation_date": 1422997204, "post_id": 28308436, "comment_id": 44968154, "body": "So, is there anything you tried?"}], "answers": [{"tags": [], "owner": {"reputation": 5134, "user_id": 1672197, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/i8HkV.png?s=128&g=1", "display_name": "orde", "link": "https://stackoverflow.com/users/1672197/orde"}, "is_accepted": false, "score": 0, "last_activity_date": 1423003615, "creation_date": 1423003615, "answer_id": 28310230, "question_id": 28308436, "link": "https://stackoverflow.com/questions/28308436/find-text-in-unordered-list-and-click-on-link-within-that-list-item/28310230#28310230", "title": "Find text in unordered list and click on link within that list item", "body": "<p>Based on your HTML, you can use the <code>find</code> method on a lists collection to locate the element with the specified text and then click on the link within the list element:</p>\n\n<pre><code>li = lists.find { |el| el.text.include? \"Apple\"}\nli.a.click\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1113, "user_id": 1250190, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/42209a6704f712d1eadbc28a4f024c9e?s=128&d=identicon&r=PG", "display_name": "pjd", "link": "https://stackoverflow.com/users/1250190/pjd"}, "is_accepted": true, "score": 2, "last_activity_date": 1423090752, "last_edit_date": 1423090752, "creation_date": 1423068614, "answer_id": 28326910, "question_id": 28308436, "link": "https://stackoverflow.com/questions/28308436/find-text-in-unordered-list-and-click-on-link-within-that-list-item/28326910#28326910", "title": "Find text in unordered list and click on link within that list item", "body": "<p>I guess you are saying that you don't know the link href ahead of time?</p>\n\n<p>Assuming you have opened the page in question using a <code>Watir::Browser</code> variable called <code>browser</code>:</p>\n\n<p>Working off the unique text in the list item (Apple),</p>\n\n<pre><code>browser.li(:text, /Apple/).link(:text, 'Login to this account').click\n</code></pre>\n\n<p>should click the desired link.</p>\n\n<p>Or if you do know the link href ahead of time, it is easier to use that:</p>\n\n<pre><code>browser.link(:href, 'http://samplegrocerystore.com/tehnc34').click\n</code></pre>\n\n<p>Either one should work, though if your web page is fairly complicated using a regex to find the word Apple might be slowish.</p>\n"}, {"tags": [], "owner": {"reputation": 249, "user_id": 1875875, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/0e2857453f07b99086c9d3fb4981f16a?s=128&d=identicon&r=PG", "display_name": "SysTest RJR", "link": "https://stackoverflow.com/users/1875875/systest-rjr"}, "is_accepted": false, "score": 0, "last_activity_date": 1423147511, "creation_date": 1423147511, "answer_id": 28346863, "question_id": 28308436, "link": "https://stackoverflow.com/questions/28308436/find-text-in-unordered-list-and-click-on-link-within-that-list-item/28346863#28346863", "title": "Find text in unordered list and click on link within that list item", "body": "<p>try the following in irb:</p>\n\n<pre><code>browser.h4(:text =&gt; /Apple/).links.count\nbrowser.h4(:text =&gt; /Apple/).parent.links.count\nbrowser.h4(:text =&gt; /Apple/).parent.parent.links.count\n</code></pre>\n\n<p>until you find your answer with just 1 link, then that's your immediate link following the 'Apple' text.  Then just call it like below:</p>\n\n<pre><code>browser.h4(:text =&gt; /Apple/).parent.link.click\n</code></pre>\n"}], "owner": {"reputation": 15, "user_id": 4525920, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8xx8Y.jpg?s=128&g=1", "display_name": "Harrisj99", "link": "https://stackoverflow.com/users/4525920/harrisj99"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1208, "favorite_count": 0, "accepted_answer_id": 28326910, "answer_count": 3, "score": 0, "last_activity_date": 1423147511, "creation_date": 1422996438, "last_edit_date": 1422997191, "question_id": 28308436, "link": "https://stackoverflow.com/questions/28308436/find-text-in-unordered-list-and-click-on-link-within-that-list-item", "title": "Find text in unordered list and click on link within that list item", "body": "<p>In a ruby script that uses watir, I'm trying to find text within an list item within an unordered list, then click on the link within that list item. In the sample below, I want to find \"Apple\" and have it click on the link that takes you to <a href=\"http://samplegrocerystore.com/tehnc34\" rel=\"nofollow\">http://samplegrocerystore.com/tehnc34</a>.</p>\n\n<pre><code>&lt;div class=\"col-login\"&gt;\n&lt;img class=\"logo\" src=\"/images/hello.png\" /&gt;\n&lt;h1 style=\"margin-top:15px;\"&gt;Select Account&lt;/h1&gt;\nYou have multiple accounts -- please select the one you would like to log in with.\n&lt;ul&gt;\n&lt;li&gt;&lt;h3&gt;The Grocery Store&lt;/h3&gt;&lt;h4&gt;Chapter: Apple (#01)&lt;/h4&gt;\n&lt;br/&gt;&lt;strong&gt;&lt;a href=\"http://samplegrocerystore.com/tehnc34\"&gt;Login to this account&lt;/a&gt;&lt;/strong&gt;\n&lt;/li&gt;&lt;li&gt;\n&lt;h3&gt;The Grocery Store&lt;/h3&gt;&lt;h4&gt;Chapter: Banana (#02)&lt;/h4&gt;\n&lt;br/&gt;&lt;strong&gt;&lt;a href=\"http://samplegrocerystore.com/896ghv\"&gt;Login to this account&lt;/a&gt;&lt;/strong&gt;\n&lt;/li&gt;\n&lt;/ul&gt;\n&lt;/div&gt;\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "spree"], "comments": [{"owner": {"reputation": 1911, "user_id": 3163663, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/dfc7587fd73f2efa19d6f1f9611b70ba?s=128&d=identicon&r=PG", "display_name": "Jason FB", "link": "https://stackoverflow.com/users/3163663/jason-fb"}, "edited": false, "score": 0, "creation_date": 1426876702, "post_id": 28308414, "comment_id": 46565052, "body": "Tell me which model do you want to delete and I will tell you if it&#39;s a good idea or not. Generally, it&#39;s not a good idea, but I could see some special cases for doing it. You probably want to build your own models &amp; relationships and leave the Spree ones in place."}, {"owner": {"reputation": 1834, "user_id": 3263969, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/26777f2a7b799fb0d9d4fa002b6c7ead?s=128&d=identicon&r=PG", "display_name": "maxhungry", "link": "https://stackoverflow.com/users/3263969/maxhungry"}, "reply_to_user": {"reputation": 1911, "user_id": 3163663, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/dfc7587fd73f2efa19d6f1f9611b70ba?s=128&d=identicon&r=PG", "display_name": "Jason FB", "link": "https://stackoverflow.com/users/3163663/jason-fb"}, "edited": false, "score": 0, "creation_date": 1427230733, "post_id": 28308414, "comment_id": 46691501, "body": "@JasonFB I have a <code>ZonePrice</code> model which has many <code>Spree::Price</code> and <code>Spree::Variant</code>. I would like to delete the association between <code>Spree::Variant</code> and <code>Spree::Price</code>, does that make sense?"}], "answers": [{"tags": [], "owner": {"reputation": 1911, "user_id": 3163663, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/dfc7587fd73f2efa19d6f1f9611b70ba?s=128&d=identicon&r=PG", "display_name": "Jason FB", "link": "https://stackoverflow.com/users/3163663/jason-fb"}, "is_accepted": false, "score": 0, "last_activity_date": 1426876718, "creation_date": 1426876718, "answer_id": 29173613, "question_id": 28308414, "link": "https://stackoverflow.com/questions/28308414/rails-reopen-class-and-delete-association/29173613#29173613", "title": "Rails reopen class and delete association", "body": "<p>You probably want to build your own models &amp; relationships and leave the Spree ones in place</p>\n"}], "owner": {"reputation": 1834, "user_id": 3263969, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/26777f2a7b799fb0d9d4fa002b6c7ead?s=128&d=identicon&r=PG", "display_name": "maxhungry", "link": "https://stackoverflow.com/users/3263969/maxhungry"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 121, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1426876718, "creation_date": 1422996355, "question_id": 28308414, "link": "https://stackoverflow.com/questions/28308414/rails-reopen-class-and-delete-association", "title": "Rails reopen class and delete association", "body": "<p>Working with a gem (spree), I'd like to reopen a class in the gem and add an association to it and delete one of the existing association, how do I go about delete an association with class_eval? or is it not a good idea to touch the existing model, should I just roll my own model instead?</p>\n\n<pre><code>Spree::SomeClass.class_eval do\n  # Add a new association\n  has_many :foo\n\n  # I want to delete the `has_many :bar` in Spree::SomeClass\n  # ???\nend\n</code></pre>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 2859, "user_id": 3945932, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a1794745acd9e572c24558b78b48d597?s=128&d=identicon&r=PG", "display_name": "ptd", "link": "https://stackoverflow.com/users/3945932/ptd"}, "edited": false, "score": 0, "creation_date": 1422996513, "post_id": 28308363, "comment_id": 44967739, "body": "<a href=\"https://github.com/ruby/ruby/blob/v2_2_0/NEWS\" rel=\"nofollow noreferrer\">Here</a> is the list of changes. I don&#39;t see it listed."}], "answers": [{"tags": [], "owner": {"reputation": 79161, "user_id": 1064226, "user_type": "registered", "profile_image": "https://graph.facebook.com/36912842/picture?type=large", "display_name": "Frederick Cheung", "link": "https://stackoverflow.com/users/1064226/frederick-cheung"}, "is_accepted": true, "score": 8, "last_activity_date": 1422996673, "creation_date": 1422996673, "answer_id": 28308494, "question_id": 28308363, "link": "https://stackoverflow.com/questions/28308363/has-the-global-interpreter-lock-gil-been-removed-from-ruby-in-version-2-2/28308494#28308494", "title": "Has the Global Interpreter Lock (GIL) been removed from Ruby in version 2.2?", "body": "<p>It hasn't. Proving a negative can be tricky, although this would be a pretty massive change to not be mentioned in the release notes. It's also easy enough to see that the GIL related apis (rb_thread_blocking_function etc are still present)</p>\n\n<p>In addition a <a href=\"http://blade.nagaokaut.ac.jp/cgi-bin/scat.rb/ruby/ruby-core/67516\" rel=\"noreferrer\">post to ruby-core</a> recently asked what progress had been made on a GIL free ruby and the answer was \"none\"</p>\n"}, {"tags": [], "owner": {"reputation": 26448, "user_id": 10322, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa46a3814b72439b1d2efa8f7c9162c2?s=128&d=identicon&r=PG", "display_name": "ctcherry", "link": "https://stackoverflow.com/users/10322/ctcherry"}, "is_accepted": false, "score": 4, "last_activity_date": 1422996689, "creation_date": 1422996689, "answer_id": 28308501, "question_id": 28308363, "link": "https://stackoverflow.com/questions/28308363/has-the-global-interpreter-lock-gil-been-removed-from-ruby-in-version-2-2/28308501#28308501", "title": "Has the Global Interpreter Lock (GIL) been removed from Ruby in version 2.2?", "body": "<p>The GIL is still in place, perhaps you were thinking of the changes to garbage collection. Here are the changes since 2.1:</p>\n\n<blockquote>\n  <ul>\n  <li>Incremental GC (presentation at RubyConf 2014: \u201cIncremental GC for    Ruby interpreter\u201d)</li>\n  <li>Symbol GC (presentation at RubyKaigi 2014)   </li>\n  <li>configure \u2013with-jemalloc Feature #9113 core libraries: Support   </li>\n  <li>Unicode 7.0 #9092 New methods: Enumerable#slice_after #9071,   </li>\n  <li>Enumerable#slice_when #9826 Float#next_float, Float#prev_float #9834  </li>\n  <li>File.birthtime, File#birthtime #9647 String#unicode_normalize #10084  </li>\n  <li>bundled libraries:\n  <ul>\n  <li>Update Psych 2.0.8</li>\n  <li>Update Rake 10.4.2</li>\n  <li>Update RDoc 4.2.0</li>\n  <li>Update RubyGems 2.4.5</li>\n  <li>Update test-unit 3.0.8 (removed from repository but bundled in tarball)             </li>\n  <li>Update minitest 5.4.3 (removed from repository but bundled in tarball)</li>\n  <li>Deprecate mathn</li>\n  </ul></li>\n  <li>C API\n  <ul>\n  <li>Remove deprecated APIs</li>\n  </ul></li>\n  </ul>\n</blockquote>\n\n<p><a href=\"https://www.ruby-lang.org/en/news/2014/12/25/ruby-2-2-0-released/\" rel=\"nofollow\">https://www.ruby-lang.org/en/news/2014/12/25/ruby-2-2-0-released/</a></p>\n"}], "owner": {"reputation": 8165, "user_id": 62653, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/6b6d607c73fccfe066ec6adb37b17621?s=128&d=identicon&r=PG", "display_name": "andy", "link": "https://stackoverflow.com/users/62653/andy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1203, "favorite_count": 0, "accepted_answer_id": 28308494, "answer_count": 2, "score": 3, "last_activity_date": 1422996689, "creation_date": 1422996217, "question_id": 28308363, "link": "https://stackoverflow.com/questions/28308363/has-the-global-interpreter-lock-gil-been-removed-from-ruby-in-version-2-2", "title": "Has the Global Interpreter Lock (GIL) been removed from Ruby in version 2.2?", "body": "<p>Someone mentioned it had (been removed), but I haven't been able to find any reference to it either way on the web.</p>\n\n<p>Can anyone point to some reliable documentation either way?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4", "routing"], "comments": [{"owner": {"reputation": 2859, "user_id": 3945932, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a1794745acd9e572c24558b78b48d597?s=128&d=identicon&r=PG", "display_name": "ptd", "link": "https://stackoverflow.com/users/3945932/ptd"}, "edited": false, "score": 0, "creation_date": 1422994627, "post_id": 28307544, "comment_id": 44966713, "body": "What params are actually posted (from your server logs)? Right now, the discussion key is missing."}, {"owner": {"reputation": 229, "user_id": 4466048, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/fcd759a73e5df253b85f5d95e152b00a?s=128&d=identicon&r=PG&f=1", "display_name": "roguerat", "link": "https://stackoverflow.com/users/4466048/roguerat"}, "reply_to_user": {"reputation": 2859, "user_id": 3945932, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a1794745acd9e572c24558b78b48d597?s=128&d=identicon&r=PG", "display_name": "ptd", "link": "https://stackoverflow.com/users/3945932/ptd"}, "edited": false, "score": 0, "creation_date": 1422995403, "post_id": 28307544, "comment_id": 44967101, "body": "Hm, when I click edit I get this message in the terminal. <code>ActionController::ParameterMissing (param is missing or the value is empty: discussion):   app&#47;controllers&#47;discussions_controller.rb:38:in &#39;discussion_params&#39;   app&#47;controllers&#47;discussions_controller.rb:17:in &#39;edit&#39;</code>"}, {"owner": {"reputation": 3049, "user_id": 47603, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/dcGAA.jpg?s=128&g=1", "display_name": "Vince V.", "link": "https://stackoverflow.com/users/47603/vince-v"}, "edited": false, "score": 0, "creation_date": 1422998436, "post_id": 28307544, "comment_id": 44968934, "body": "can you install the pry debugger gem and put a binding.pry before the params.require ?"}, {"owner": {"reputation": 32131, "user_id": 2346461, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/i3xAf.jpg?s=128&g=1", "display_name": "Pavan", "link": "https://stackoverflow.com/users/2346461/pavan"}, "edited": false, "score": 0, "creation_date": 1435759338, "post_id": 28307544, "comment_id": 50335513, "body": "I&#39;ve updated my answer. Please check."}], "answers": [{"tags": [], "owner": {"reputation": 32131, "user_id": 2346461, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/i3xAf.jpg?s=128&g=1", "display_name": "Pavan", "link": "https://stackoverflow.com/users/2346461/pavan"}, "is_accepted": false, "score": 0, "last_activity_date": 1435759320, "last_edit_date": 1435759320, "creation_date": 1423026512, "answer_id": 28313903, "question_id": 28307544, "link": "https://stackoverflow.com/questions/28307544/rails-param-is-missing-or-the-value-is-empty-discussion/28313903#28313903", "title": "Rails: Param is missing or the value is empty: discussion", "body": "<blockquote>\n  <p>when I click edit I get this message in the terminal.\n  ActionController::ParameterMissing (param is missing or the value is\n  empty: discussion): app/controllers/discussions_controller.rb:38:in\n  'discussion_params' app/controllers/discussions_controller.rb:17:in\n  'edit'</p>\n</blockquote>\n\n<p>The reason behind the error is in your <code>edit</code> method of your <code>discussions_controller.rb</code> you have this line</p>\n\n<pre><code>@discussions = @project.discussions.find(discussion_params)\n</code></pre>\n\n<p>you need to change it to</p>\n\n<pre><code>@discussion = Discussion.find(params[:id])\n</code></pre>\n\n<p>And also change your update action to the below.</p>\n\n<pre><code>def update\n  @discussion = Discussion.find(params[:id])\n   if @discussion.update_attributes(discussion_params)\n     redirect_to new_project_discussion_path\n   else\n     render \"edit\"\n   end\nend\n</code></pre>\n"}], "owner": {"reputation": 229, "user_id": 4466048, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/fcd759a73e5df253b85f5d95e152b00a?s=128&d=identicon&r=PG&f=1", "display_name": "roguerat", "link": "https://stackoverflow.com/users/4466048/roguerat"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 745, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1435759320, "creation_date": 1422993214, "question_id": 28307544, "link": "https://stackoverflow.com/questions/28307544/rails-param-is-missing-or-the-value-is-empty-discussion", "title": "Rails: Param is missing or the value is empty: discussion", "body": "<p>Discussion belong to project. When I try and edit a discussion I get the following error. <code>param is missing or the value is empty: discussion</code> on the following piece of code in the discussions_controller:</p>\n\n<pre><code>def discussion_params\n    params.require(:discussion).permit(:title, :description)\nend \n</code></pre>\n\n<p>I can't see what is wrong with that though. Is there something wrong with my routing or am I missing something?</p>\n\n<p>discussions_controller.rb</p>\n\n<pre><code>class DiscussionsController &lt; ApplicationController\n\n  before_action :find_project, expect: [:destroy]\n\n  def new\n    @discussion = Discussion.new\n  end\n\n  def create\n    @discussion = @project.discussions.build(discussion_params)\n    if @discussion.save\n      redirect_to new_project_discussion_path(@project)\n    end\n  end\n\n  def edit\n    @discussions = @project.discussions.find(discussion_params)\n  end\n\n  def update\n\n    if @discussions.update_attributes(discussion_params)\n      redirect_to new_project_discussion_path\n    else\n      render \"edit\"\n    end\n  end\n\n  def destroy\n    @discussions.destroy\n    redirect_to new_project_discussion_path\n  end\n\n\n  private\n\n  def discussion_params\n    params.require(:discussion).permit(:title, :description)\n  end\n\n  def find_project\n    @project = Project.find(params[:project_id])\n  end\n\nend\n</code></pre>\n\n<p>projects_controller.rb</p>\n\n<pre><code>class ProjectsController &lt; ApplicationController\n\n  def index\n    @projects = Project.all\n  end\n\n  def show\n\n\n  end\n\n  def new\n    @projects = Project.new\n\n  end\n\n  def create #no view\n    @projects = Project.new(project_params)\n    if @projects.save\n      redirect_to projects_path, :notice =&gt; \"Your project was sent!\"\n    else \n      render \"new\"\n    end\n  end\n\n  def edit\n    @projects = Project.find(params[:id])\n  end\n\n  def update #no view\n    @projects = Project.find(params[:id])\n\n    if @projects.update_attributes(project_params)\n      redirect_to projects_path, :notice =&gt; \"Your project has been updated.\"\n    else\n      render \"edit\"\n    end\n  end\n\n  def destroy #no view\n    @projects = Project.find(params[:id])\n    @projects.destroy\n    redirect_to projects_path, :notice =&gt; \"Your project has been deleted.\"\n  end\n\n  private\n  def project_params\n    params.require(:project).permit(:title, :description)\n  end\n\n\nend\n</code></pre>\n\n<p>(discussions) _form.html.erb</p>\n\n<pre><code>&lt;%= form_for [@project, @discussion] do |f| %&gt;\n  &lt;div class=\"container\"&gt;\n\n    Project: &lt;%= @project.title %&gt; &lt;%= link_to \"Go back?\", projects_path %&gt; \n    &lt;hr&gt;\n    &lt;div class=\"form-group\"&gt;\n      &lt;%= f.label :title %&gt;\n      &lt;%= f.text_field :title, class: \"form-control\" %&gt;\n    &lt;/div&gt;\n\n    &lt;div class=\"form-group\"&gt;\n      &lt;%= f.label :description %&gt;\n      &lt;%= f.text_area :description, class: \"form-control\" %&gt;\n    &lt;/div&gt;\n\n    &lt;div class=\"form-group\"&gt;\n      &lt;%= f.submit \"Submit discussion\", class: \"btn btn-primary\" %&gt;\n    &lt;/div&gt;\n  &lt;/div&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>(discussions) edit.html.erb</p>\n\n<pre><code>&lt;%= render \"form\" %&gt;\n</code></pre>\n\n<p>(discussions) new.html.erb</p>\n\n<pre><code>&lt;div class=\"container\"&gt;\n  &lt;div class=\"page-header\"&gt;\n    &lt;h1&gt;Discussions&lt;small&gt; Discuss the project.&lt;/small&gt;&lt;/h1&gt;\n  &lt;/div&gt;\n&lt;/div&gt;\n\n\n&lt;%= render \"form\" %&gt;\n\n\n&lt;% if !@project.discussions.blank? %&gt;\n  &lt;% for item in @project.discussions %&gt;\n  &lt;div class=\"container\"&gt;\n  &lt;div class=\"panel panel-default\"&gt;\n  &lt;div class=\"panel-heading\"&gt;\n    &lt;%= item.title %&gt;\n  &lt;/div&gt;\n  &lt;/div&gt;\n  &lt;div class=\"panel-body\"&gt;\n  &lt;p&gt;\n    &lt;%= item.description %&gt; &lt;br&gt;\n    &lt;%= link_to \"Comment\", new_discussion_comment_path(item) %&gt;\n    &lt;%= link_to \"Delete\", item, :method =&gt; :delete %&gt; \n    &lt;%= link_to \"Edit\", edit_project_discussion_path(@project, item) %&gt; |\n  &lt;/p&gt;\n  &lt;/div&gt;\n  &lt;/div&gt;\n  &lt;% end %&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>And here are my routes for both discussions and projects. </p>\n\n<pre><code>project_discussions GET    /projects/:project_id/discussions(.:format)             discussions#index\n                         POST   /projects/:project_id/discussions(.:format)             discussions#create\n  new_project_discussion GET    /projects/:project_id/discussions/new(.:format)         discussions#new\n edit_project_discussion GET    /projects/:project_id/discussions/:id/edit(.:format)    discussions#edit\n      project_discussion GET    /projects/:project_id/discussions/:id(.:format)         discussions#show\n                         PATCH  /projects/:project_id/discussions/:id(.:format)         discussions#update\n                         PUT    /projects/:project_id/discussions/:id(.:format)         discussions#update\n                         DELETE /projects/:project_id/discussions/:id(.:format)         discussions#destroy\n                projects GET    /projects(.:format)                                     projects#index\n                         POST   /projects(.:format)                                     projects#create\n             new_project GET    /projects/new(.:format)                                 projects#new\n            edit_project GET    /projects/:id/edit(.:format)                            projects#edit\n                 project GET    /projects/:id(.:format)                                 projects#show\n                         PATCH  /projects/:id(.:format)                                 projects#update\n                         PUT    /projects/:id(.:format)                                 projects#update\n                         DELETE /projects/:id(.:format)                                 projects#destroy\n</code></pre>\n"}]