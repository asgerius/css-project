[{"tags": ["ruby-on-rails", "ruby"], "answers": [{"comments": [{"owner": {"reputation": 33, "user_id": 7754069, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/070393d213e283349ab70fd85f8e8c83?s=128&d=identicon&r=PG&f=1", "display_name": "user7754069", "link": "https://stackoverflow.com/users/7754069/user7754069"}, "edited": false, "score": 0, "creation_date": 1490232710, "post_id": 42965321, "comment_id": 73025308, "body": "Thank you for help, i made a mistake in example where i showed sum as result instead of average."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "reply_to_user": {"reputation": 33, "user_id": 7754069, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/070393d213e283349ab70fd85f8e8c83?s=128&d=identicon&r=PG&f=1", "display_name": "user7754069", "link": "https://stackoverflow.com/users/7754069/user7754069"}, "edited": false, "score": 0, "creation_date": 1490239862, "post_id": 42965321, "comment_id": 73027200, "body": "I added the calculation of the averages."}], "tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": false, "score": 0, "last_activity_date": 1490239845, "last_edit_date": 1490239845, "creation_date": 1490230421, "answer_id": 42965321, "question_id": 42964831, "link": "https://stackoverflow.com/questions/42964831/group-array-of-hashes-by-multiple-keys-to-find-average-in-ruby/42965321#42965321", "title": "Group array of hashes by multiple keys to find average in Ruby", "body": "<p>I suggest that a <em>counting hash</em> be used to obtain the subtotals for the key <code>:value</code> and then construct the required of array of hashes from that hash. This uses the form of <a href=\"http://ruby-doc.org/core-2.4.0/Hash.html#method-c-new\" rel=\"nofollow noreferrer\">Hash#new</a> that takes an argument that is the hash's default value. That means that if a hash <code>h</code> does not have a key <code>k</code>, <code>h[k]</code> returns the default value.</p>\n\n<p><strong>Computing totals</strong></p>\n\n<pre><code>a.each_with_object(Hash.new(0)) {|g,h| h[[g[:subject_id], g[:element_id]]] += g[:value]}.\n  map {|(sub, el), tot| { subject_id: sub, element_id: el, value: tot}}\n  #=&gt; [{:subject_id=&gt;1, :element_id=&gt;2, :value=&gt;95},\n  #    {:subject_id=&gt;1, :element_id=&gt;4, :value=&gt;38},\n  #    {:subject_id=&gt;2, :element_id=&gt;2, :value=&gt;8},\n  #    {:subject_id=&gt;2, :element_id=&gt;4, :value=&gt;9}]\n</code></pre>\n\n<p>Ruby, as a first step, unpacks the expression</p>\n\n<pre><code>h[[g[:subject_id], g[:element_id]]] += g[:value]\n</code></pre>\n\n<p>changing it to</p>\n\n<pre><code>h[[g[:subject_id], g[:element_id]]] = h[[g[:subject_id], g[:element_id]]] + g[:value]\n</code></pre>\n\n<p>If <code>h</code> does not have a key <code>[g[:subject_id], g[:element_id]]</code>, <code>h[[g[:subject_id], g[:element_id]]]</code> on the right side of the equality returns the default value, <code>0</code>.</p>\n\n<p>Note that</p>\n\n<pre><code>a.each_with_object(Hash.new(0)) {|g,h| h[[g[:subject_id], g[:element_id]]] += g[:value]}\n  #=&gt; {[1, 2]=&gt;95, [1, 4]=&gt;38, [2, 2]=&gt;8, [2, 4]=&gt;9}\n</code></pre>\n\n<p><strong>Computing averages</strong></p>\n\n<p>Only a small change is needed to compute averages.</p>\n\n<pre><code>a.each_with_object({}) do |g,h|\n  pair = [g[:element_id], g[:subject_id]] \n  h[pair] = {tot: 0, count: 0} unless h.key?(pair)\n  h[pair] = {tot: h[pair][:tot] + g[:value], count: h[pair][:count]+1}\nend.map {|(sub, el),h| {subject_id: sub, element_id: el,\n                        average: (h[:tot].to_f/h[:count]).round(1)}} \n  #=&gt; [{:subject_id=&gt;2, :element_id=&gt;1, :average=&gt;31.7},\n  #    {:subject_id=&gt;4, :element_id=&gt;1, :average=&gt;12.7},\n  #    {:subject_id=&gt;2, :element_id=&gt;2, :average=&gt;4.0},\n  #    {:subject_id=&gt;4, :element_id=&gt;2, :average=&gt;9.0}] \n</code></pre>\n\n<p>Note</p>\n\n<pre><code>a.each_with_object({}) do |g,h|\n  pair = [g[:element_id], g[:subject_id]] \n  h[pair] = {tot: 0, count: 0} unless h.key?(pair)\n  h[pair] = {tot: h[pair][:tot] + g[:value], count: h[pair][:count]+1}\nend\n  #=&gt; {[2, 1]=&gt;{:tot=&gt;95, :count=&gt;3}, [4, 1]=&gt;{:tot=&gt;38, :count=&gt;3},\n  #    [2, 2]=&gt;{:tot=&gt; 8, :count=&gt;2}, [4, 2]=&gt;{:tot=&gt; 9, :count=&gt;1}}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 812, "user_id": 2394842, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9089757e5553d83415a6c3add8a3c2e9?s=128&d=identicon&r=PG", "display_name": "MaicolBen", "link": "https://stackoverflow.com/users/2394842/maicolben"}, "is_accepted": true, "score": 0, "last_activity_date": 1490232188, "creation_date": 1490232188, "answer_id": 42965577, "question_id": 42964831, "link": "https://stackoverflow.com/questions/42964831/group-array-of-hashes-by-multiple-keys-to-find-average-in-ruby/42965577#42965577", "title": "Group array of hashes by multiple keys to find average in Ruby", "body": "<p>The result shown in the question isn't the average, it's the sum, so the result will be different:</p>\n\n<pre><code>  def groupByAndAverage(a)\n    b = []\n\n    a.each_with_index do |element, key|\n      index = b.index do |x| \n        x != element &amp;&amp; \n          x[:subject_id] == element[:subject_id] &amp;&amp; \n            x[:element_id] == element[:element_id] \n      end\n      if index\n        b[index][:value] += element[:value]\n        b[index][:amount] += 1\n      else\n        b.push a[key].merge(amount: 1)\n      end\n\n      true\n    end\n    b.map do |element| \n      element[:value] = element[:value] / element[:amount]\n      element.delete(:amount)\n      element\n    end\n    b\n  end\n</code></pre>\n\n<p>And the result from this is:</p>\n\n<pre><code>  [{:subject_id=&gt;1, :element_id=&gt;2, :value=&gt;31}, \n    {:subject_id=&gt;1, :element_id=&gt;4, :value=&gt;12}, \n    {:subject_id=&gt;2, :element_id=&gt;2, :value=&gt;4}, \n    {:subject_id=&gt;2, :element_id=&gt;4, :value=&gt;9}]\n</code></pre>\n"}], "owner": {"reputation": 33, "user_id": 7754069, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/070393d213e283349ab70fd85f8e8c83?s=128&d=identicon&r=PG&f=1", "display_name": "user7754069", "link": "https://stackoverflow.com/users/7754069/user7754069"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 691, "favorite_count": 0, "accepted_answer_id": 42965577, "answer_count": 2, "score": 0, "last_activity_date": 1490239845, "creation_date": 1490227007, "last_edit_date": 1495540447, "question_id": 42964831, "link": "https://stackoverflow.com/questions/42964831/group-array-of-hashes-by-multiple-keys-to-find-average-in-ruby", "title": "Group array of hashes by multiple keys to find average in Ruby", "body": "<p>I have found solution for my problem done in JS but i need it done in Ruby (RoR). Here is link to problem and solution: <a href=\"https://stackoverflow.com/questions/34967609/find-average-value-for-array-of-hashes-using-multiple-group-by\">Find average value for array of hashes using multiple group by</a></p>\n\n<p>So i have array of hashes that needs to be grouped by keys (first <code>subject_id</code> then <code>element_id</code>) and then find average values for them. Number of hashes in array is not fixed.</p>\n\n<p>Below is input array:</p>\n\n<pre><code>a=[\n{:subject_id=&gt;1, :element_id=&gt;2, :value=&gt;55},\n{:subject_id=&gt;1, :element_id=&gt;4, :value=&gt;33},\n{:subject_id=&gt;1, :element_id=&gt;2, :value=&gt;33},\n{:subject_id=&gt;1, :element_id=&gt;4, :value=&gt;1},\n{:subject_id=&gt;1, :element_id=&gt;2, :value=&gt;7},\n{:subject_id=&gt;1, :element_id=&gt;4, :value=&gt;4},\n{:subject_id=&gt;2, :element_id=&gt;2, :value=&gt;3},\n{:subject_id=&gt;2, :element_id=&gt;2, :value=&gt;5},\n{:subject_id=&gt;2, :element_id=&gt;4, :value=&gt;9}\n]\n</code></pre>\n\n<p>Result:</p>\n\n<pre><code>b=[\n{:subject_id=&gt;1, :element_id=&gt;2, :value=&gt;95},\n{:subject_id=&gt;1, :element_id=&gt;4, :value=&gt;38},\n{:subject_id=&gt;2, :element_id=&gt;2, :value=&gt;8},\n{:subject_id=&gt;2, :element_id=&gt;4, :value=&gt;9}\n]\n</code></pre>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 2, "creation_date": 1490224035, "post_id": 42964285, "comment_id": 73022673, "body": "<code>3.875.round(1) #=&gt; 3.9</code> \u2013 did you read the <a href=\"http://ruby-doc.org/core-2.4.0/Float.html#method-i-round\" rel=\"nofollow noreferrer\">documentation</a>? ;-)"}, {"owner": {"reputation": 3, "user_id": 7684977, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-daZ1TGM7u20/AAAAAAAAAAI/AAAAAAAAAEM/qRBamzqemp8/photo.jpg?sz=128", "display_name": "Alexander Sarene", "link": "https://stackoverflow.com/users/7684977/alexander-sarene"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1490224375, "post_id": 42964285, "comment_id": 73022822, "body": "Wow. No, I am using codecademy as well with searching questions I have on google. Thank you for showing me this though, I will make sure to use it."}], "answers": [{"tags": [], "owner": {"reputation": 2242, "user_id": 261540, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/nCNMb.jpg?s=128&g=1", "display_name": "James", "link": "https://stackoverflow.com/users/261540/james"}, "is_accepted": true, "score": 1, "last_activity_date": 1490224228, "creation_date": 1490224228, "answer_id": 42964352, "question_id": 42964285, "link": "https://stackoverflow.com/questions/42964285/rounding-numbers-in-ruby/42964352#42964352", "title": "Rounding numbers in ruby", "body": "<p>Use the <a href=\"http://ruby-doc.org/core-2.4.0/Float.html#method-i-round\" rel=\"nofollow noreferrer\">round method.</a>  It takes an integer parameter specifying the number of decimals you want to round to.</p>\n\n<pre><code>NUMBER_OF_DECIMAL_PLACES_TO_ROUND_TO = 1    \nrounded_mean = your_calculated_mean.round(NUMBER_OF_DECIMAL_PLACES_TO_ROUND_TO)\n</code></pre>\n\n<p>Check out <a href=\"https://richonrails.com/articles/rounding-numbers-in-ruby\" rel=\"nofollow noreferrer\">this article on Rounding Numbers in Ruby</a></p>\n"}], "owner": {"reputation": 3, "user_id": 7684977, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-daZ1TGM7u20/AAAAAAAAAAI/AAAAAAAAAEM/qRBamzqemp8/photo.jpg?sz=128", "display_name": "Alexander Sarene", "link": "https://stackoverflow.com/users/7684977/alexander-sarene"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 52, "favorite_count": 0, "accepted_answer_id": 42964352, "answer_count": 1, "score": 0, "last_activity_date": 1490240223, "creation_date": 1490223905, "last_edit_date": 1490240223, "question_id": 42964285, "link": "https://stackoverflow.com/questions/42964285/rounding-numbers-in-ruby", "title": "Rounding numbers in ruby", "body": "<p>I take 8 variables and find the average. I did it using <code>to_f</code> to make them numbers that can have decimals. I need it to be rounded to the nearest tenth. For example, the number can be 3.875, and I need it to be rounded to 3.9. Is there a way to do so?</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 8273, "user_id": 1334695, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/431ae6e9f7610b9d6a6a6cdebd0244d5?s=128&d=identicon&r=PG", "display_name": "stevieb", "link": "https://stackoverflow.com/users/1334695/stevieb"}, "edited": false, "score": 0, "creation_date": 1490223825, "post_id": 42964215, "comment_id": 73022598, "body": "...and you&#39;ve tried? ..."}, {"owner": {"reputation": 16237, "user_id": 2166798, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/417356917295f5176d2a3e7c21d8f9e8?s=128&d=identicon&r=PG", "display_name": "pjs", "link": "https://stackoverflow.com/users/2166798/pjs"}, "edited": false, "score": 0, "creation_date": 1490223872, "post_id": 42964215, "comment_id": 73022620, "body": "The best thing you can do is fire up <code>irb</code>, the interactive ruby environment, and <b><i>play</i></b>.  You might consider what happens if you type <code>&#39;*&#39; * 3</code>, for instance."}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1490224429, "post_id": 42964215, "comment_id": 73022839, "body": "BTW, the interpolation is superfluous \u2013 <code>puts &quot;#{&quot;*&quot;}&quot;</code> is equivalent to <code>puts &quot;*&quot;</code>"}], "answers": [{"comments": [{"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 1, "creation_date": 1490224513, "post_id": 42964294, "comment_id": 73022871, "body": "You might want to add a link to the documentation for <code>String#*</code>"}], "tags": [], "owner": {"reputation": 424, "user_id": 6150184, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/26aa5396de57080c2084de1b8a5aeaa5?s=128&d=identicon&r=PG&f=1", "display_name": "DiodonHystrix", "link": "https://stackoverflow.com/users/6150184/diodonhystrix"}, "is_accepted": false, "score": 2, "last_activity_date": 1490224673, "last_edit_date": 1490224673, "creation_date": 1490223944, "answer_id": 42964294, "question_id": 42964215, "link": "https://stackoverflow.com/questions/42964215/print-amount-of-something-in-ruby/42964294#42964294", "title": "Print amount of something in Ruby", "body": "<blockquote>\n  <p>Write a method that takes a number as an argument</p>\n</blockquote>\n\n<p>Firstly, you have written a method, but at the moment it takes no argument, you need to fix it.</p>\n\n<p>Other thing you need to know is that class String contains method <a href=\"https://ruby-doc.org/core-2.4.0/String.html#method-i-2A\" rel=\"nofollow noreferrer\"><code>#*</code></a>, where <code>#</code> means instance method. That means you can create multiples of any string you want.\nEntering <code>'a' * 5</code> would return <code>'aaaaa'</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 9030, "user_id": 5101476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JCQrl.jpg?s=128&g=1", "display_name": "ice\u30c4", "link": "https://stackoverflow.com/users/5101476/ice%e3%83%84"}, "is_accepted": false, "score": 1, "last_activity_date": 1490225859, "creation_date": 1490225859, "answer_id": 42964646, "question_id": 42964215, "link": "https://stackoverflow.com/questions/42964215/print-amount-of-something-in-ruby/42964646#42964646", "title": "Print amount of something in Ruby", "body": "<h3>Examples</h3>\n\n<p>Sometimes it's easier to learn by examples:</p>\n\n<pre><code>puts 'a' * 2 #=&gt; aa\nputs 'b' * 3 #=&gt; bbb\nputs 'c' * 5 #=&gt; ccccc\n</code></pre>\n\n<p>So if you want <code>*</code>s printed, you write:</p>\n\n<pre><code>puts '*' * 7 #=&gt; *******\n</code></pre>\n\n<h3>Define a Method</h3>\n\n<p>To define a method that takes one argument:</p>\n\n<pre><code>def stars(n)\n  puts n\nend  \n</code></pre>\n\n<p>To call this method:</p>\n\n<pre><code>stars(5)  #=&gt; 5\nstars(66) #=&gt; 66\n</code></pre>\n\n<p>This should be enough knowledge for you to be able to construct your method as required. Also note, in Ruby we usually use two spaces for indentation.</p>\n"}], "owner": {"reputation": 1, "user_id": 7737234, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3372cad826d60d89fb9726dd8b3088e2?s=128&d=identicon&r=PG&f=1", "display_name": "Nathaniel Richardson", "link": "https://stackoverflow.com/users/7737234/nathaniel-richardson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 61, "favorite_count": 0, "answer_count": 2, "score": -3, "last_activity_date": 1490229443, "creation_date": 1490223590, "last_edit_date": 1490229443, "question_id": 42964215, "link": "https://stackoverflow.com/questions/42964215/print-amount-of-something-in-ruby", "title": "Print amount of something in Ruby", "body": "<p>I need to write a method that takes a number as an argument  and returns that number of stars on a single line  For example, an input of 5 returns: should return \"*****\" ALL ON THE SAME LINE</p>\n\n<p>So far all I have is......</p>\n\n<pre><code>def stars()\n   puts \"#{\"*\"}\"\nend  \nstars()\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 3465, "user_id": 5946118, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/CbjEl.jpg?s=128&g=1", "display_name": "Rajkaran Mishra", "link": "https://stackoverflow.com/users/5946118/rajkaran-mishra"}, "edited": false, "score": 0, "creation_date": 1572620570, "post_id": 42963717, "comment_id": 103625943, "body": "Does this answer your question? <a href=\"https://stackoverflow.com/questions/5267998/rails-3-field-with-errors-wrapper-changes-the-page-appearance-how-to-avoid-t\">Rails 3: &quot;field-with-errors&quot; wrapper changes the page appearance. How to avoid this?</a>"}], "answers": [{"tags": [], "owner": {"reputation": 6462, "user_id": 3784008, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/55ou4.jpg?s=128&g=1", "display_name": "anothermh", "link": "https://stackoverflow.com/users/3784008/anothermh"}, "is_accepted": true, "score": 2, "last_activity_date": 1490997365, "creation_date": 1490997365, "answer_id": 43150263, "question_id": 42963717, "link": "https://stackoverflow.com/questions/42963717/how-field-with-errors-div-gets-added-in-a-form-when-validations-fail-within-fiel/43150263#43150263", "title": "How field_with_errors div Gets Added in a Form When Validations Fail Within fields_for", "body": "<p>The objects are passed through the <code>field_error_proc</code> one by one, so each is <code>UserEmail</code> is evaluated separately. The default proc specification is defined here:  <a href=\"https://github.com/rails/rails/blob/7da8d76206271bdf200ea201f7e5a49afb9bc9e7/actionview/lib/action_view/base.rb#L144\" rel=\"nofollow noreferrer\">https://github.com/rails/rails/blob/7da8d76206271bdf200ea201f7e5a49afb9bc9e7/actionview/lib/action_view/base.rb#L144</a> as:</p>\n\n<pre><code>@@field_error_proc = Proc.new { |html_tag, instance| \"&lt;div class=\\\"field_with_errors\\\"&gt;#{html_tag}&lt;/div&gt;\".html_safe }\n</code></pre>\n\n<p>This is called by <code>ActiveModelInstanceTag</code>: <a href=\"https://github.com/rails/rails/blob/92703a9ea5d8b96f30e0b706b801c9185ef14f0e/actionview/lib/action_view/helpers/active_model_helper.rb#L28\" rel=\"nofollow noreferrer\">https://github.com/rails/rails/blob/92703a9ea5d8b96f30e0b706b801c9185ef14f0e/actionview/lib/action_view/helpers/active_model_helper.rb#L28</a> with:</p>\n\n<pre><code>Base.field_error_proc.call(html_tag, self)\n</code></pre>\n\n<p>Note that <code>self</code> here refers to an individual <code>UserEmail</code> object being evaluated. More information on this proc is available at <a href=\"https://github.com/rails/rails/blob/09436fb6d6d188739b40ef120b4344106d81caf9/guides/source/configuring.md#configuring-action-view\" rel=\"nofollow noreferrer\">https://github.com/rails/rails/blob/09436fb6d6d188739b40ef120b4344106d81caf9/guides/source/configuring.md#configuring-action-view</a> and at <a href=\"https://github.com/rails/rails/blob/7c3a99eeca07f602bb1e5659656e8eab0a4eacfe/guides/source/active_support_core_extensions.md#cattr_reader-cattr_writer-and-cattr_accessor\" rel=\"nofollow noreferrer\">https://github.com/rails/rails/blob/7c3a99eeca07f602bb1e5659656e8eab0a4eacfe/guides/source/active_support_core_extensions.md#cattr_reader-cattr_writer-and-cattr_accessor</a>.</p>\n\n<p>There's no magic at work; it evaluates all the models.</p>\n"}], "owner": {"reputation": 6076, "user_id": 4044009, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/42e57031eb7d02c47c9afaecfc878638?s=128&d=identicon&r=PG&f=1", "display_name": "Neil", "link": "https://stackoverflow.com/users/4044009/neil"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 233, "favorite_count": 1, "accepted_answer_id": 43150263, "answer_count": 1, "score": 0, "last_activity_date": 1490997365, "creation_date": 1490221230, "last_edit_date": 1490881755, "question_id": 42963717, "link": "https://stackoverflow.com/questions/42963717/how-field-with-errors-div-gets-added-in-a-form-when-validations-fail-within-fiel", "title": "How field_with_errors div Gets Added in a Form When Validations Fail Within fields_for", "body": "<p>It is clear to me that when a validation fails in a form: what happens is the <code>errors</code> hash associated to your object gains a new key which is magically mapped to that object's invalid <code>attribute</code>.  That key's <code>value</code> is the relevant error message for that invalidation.</p>\n\n<p>The above is all explained nicely in the <a href=\"http://guides.rubyonrails.org/active_record_validations.html#working-with-validation-errors\" rel=\"nofollow noreferrer\">Working with Validation Errors Rails Guide</a></p>\n\n<p>This next part is what does not make sense to me.  Magically: rails appears to somehow look at the keys in your errors hash, map those to the appropriate form labels and inputs, and then wraps those invalid form labels and inputs with a <code>&lt;div class=\"field_with_errors\"&gt; ... &lt;/div&gt;</code>.  </p>\n\n<p>I am trying to figure out how that magic works.</p>\n\n<p>To be more specific: I am wondering how rails is able to map the <code>field_with_errors</code> appropriately when there are <code>fields_for</code> present in a form for a <code>has_many</code> association.  </p>\n\n<p>Example: Say I have the following associations:</p>\n\n<pre><code># models/user.rb\nclass User &lt; ApplicationRecord\n  has_many :user_emails\nend\n\n# models/user_email.rb\nclass UserEmail &lt; ApplicationRecord\n  belongs_to :user\n  validates_presence_of :email_text\nend\n</code></pre>\n\n<p>I then have a <code>user</code>form that has <code>fields_for</code> for <strong>5</strong> different nested <code>user_email</code> records.  Let us say two of those <code>user_emails</code> are invalid:  </p>\n\n<ul>\n<li>The form will re-render, and magically the <code>fields_with_errors</code> div <em>only gets applied</em> to those two invalid <code>user_email</code> records as opposed to <em>ALL</em> of the <code>user_email</code> records in the form.  </li>\n</ul>\n\n<p>How does rails do this?  I cannot find the documentation on this, or find any resources online in regards to the magic that is going on behind the scenes.</p>\n"}, {"tags": ["mysql", "ruby-on-rails", "ruby", "ruby-on-rails-3", "ruby-on-rails-4"], "comments": [{"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1490221786, "post_id": 42963474, "comment_id": 73021703, "body": "Welcome to Stack Overflow. SO is like an online reference site where grammar and spelling are important. Please use a grammar checker and/or spelling checker before posting."}], "answers": [{"comments": [{"owner": {"reputation": 63, "user_id": 7696718, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/2019c6b1f20a273b8ffd442f6025244e?s=128&d=identicon&r=PG&f=1", "display_name": "nakapaka1", "link": "https://stackoverflow.com/users/7696718/nakapaka1"}, "edited": false, "score": 0, "creation_date": 1490221873, "post_id": 42963620, "comment_id": 73021742, "body": "thank you Nick. @product being set you mean on controller home or in feedback method?"}, {"owner": {"reputation": 871, "user_id": 6201238, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-zMpu7vvqEZ8/AAAAAAAAAAI/AAAAAAAAADY/1ZO9GQx3_XA/photo.jpg?sz=128", "display_name": "Nick Davies", "link": "https://stackoverflow.com/users/6201238/nick-davies"}, "reply_to_user": {"reputation": 63, "user_id": 7696718, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/2019c6b1f20a273b8ffd442f6025244e?s=128&d=identicon&r=PG&f=1", "display_name": "nakapaka1", "link": "https://stackoverflow.com/users/7696718/nakapaka1"}, "edited": false, "score": 0, "creation_date": 1490366389, "post_id": 42963620, "comment_id": 73093921, "body": "@product shows up in the controller code and in the view code, so I&#39;d expect it to be set in the controller, so that it would be available in both."}], "tags": [], "owner": {"reputation": 871, "user_id": 6201238, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-zMpu7vvqEZ8/AAAAAAAAAAI/AAAAAAAAADY/1ZO9GQx3_XA/photo.jpg?sz=128", "display_name": "Nick Davies", "link": "https://stackoverflow.com/users/6201238/nick-davies"}, "is_accepted": false, "score": 0, "last_activity_date": 1490220688, "creation_date": 1490220688, "answer_id": 42963620, "question_id": 42963474, "link": "https://stackoverflow.com/questions/42963474/rails-how-iterate-has-one-though/42963620#42963620", "title": "Rails how iterate has_one though?", "body": "<p>On your Product model, try:</p>\n\n<p><code>has_many :feedbacks, through: :orders</code></p>\n\n<p>For the \"Undefined method id\" error, it would help if you could include a bit more of your stack trace. </p>\n\n<p>Just based on the example code, I think it would have to be happening in the controller. @product.id is being referenced, but I don't see @product being set.</p>\n"}], "owner": {"reputation": 63, "user_id": 7696718, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/2019c6b1f20a273b8ffd442f6025244e?s=128&d=identicon&r=PG&f=1", "display_name": "nakapaka1", "link": "https://stackoverflow.com/users/7696718/nakapaka1"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 56, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1490220688, "creation_date": 1490220110, "question_id": 42963474, "link": "https://stackoverflow.com/questions/42963474/rails-how-iterate-has-one-though", "title": "Rails how iterate has_one though?", "body": "<p>This is the scenario:</p>\n\n<p>so, the product did not have any relation with feedback, but the order has\nand i would like to show the feedbacks as belongs to products</p>\n\n<pre><code>model FEEDBACK\n\n has_one :order\n has_one :product, through: :order \n\nmodel ORDER\n\n  belongs_to :product, touch: true\n  belongs_to :feedback\n\nmodel PRODUCT\n\n\n  has_many :feedbacks\n  has_many :orders\n</code></pre>\n\n<p>i'm would like to get the feedbacks of the product on a loop</p>\n\n<p>for exemple</p>\n\n<pre><code>controller HOME\n\n\n    @total_feedbacks = Feedback.joins(:product).where('products.id = ?', @product.id).where('buyer_feedback_date is not null').count\n\n\n    @average_rating_from_buyers = Feedback.joins(:product).where('products.id = ?', @product.id).where('buyer_feedback_date is not null').rated(Feedback::FROM_BUYERS).average(:buyer_rating)\n\n\n\n\n\n\nview HOME\n\n\n\n  &lt;table id=\"posts\" class=\"product_table\"&gt;\n        &lt;tbody class=\"page\"&gt;\n          &lt;tr&gt;\n            &lt;% @products.last(22).each do |product|%&gt;\n\n              &lt;td&gt;\n                &lt;%=link_to product_path(product.id), :class=&gt;\"product\" do %&gt;\n\n                  &lt;span class=\"productName\"&gt;\n                    &lt;%=product.name %&gt;&lt;/span&gt;\n                  &lt;span class=\"price\"&gt;&lt;%=number_to_currency(product.price, :unit=&gt; \"R$\") %&gt;&lt;/span&gt;\n\n\n              &lt;% if product.vitrine.feedbacks.present? %&gt;\n                    &lt;div class=\"productFeeback\"&gt;\n                      &lt;div&gt;&lt;%= @average_rating_from_buyers %&gt;\"&gt;&lt;/div&gt;\n                      &lt;%=@total_feedbacks %&gt;\n                    &lt;/div&gt;\n                  &lt;% end %&gt;\n\n                &lt;% end %&gt;\n              &lt;/td&gt;\n            &lt;% end %&gt;\n          &lt;/tr&gt;\n\n\n\n        &lt;/tbody&gt;\n      &lt;/table&gt;\n</code></pre>\n\n<p>with this code i'm getting </p>\n\n<blockquote>\n  <p>undefined method `id' for nil:NilClass</p>\n</blockquote>\n\n<p>someone have a hint to spare? thank's</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1490221368, "post_id": 42962589, "comment_id": 73021512, "body": "Please read &quot;<a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a>&quot; including the linked pages; &quot;Pretend you&#39;re talking to a busy colleague&quot; applies to the body, not just the title. I&#39;d recommend stripping your question to be very concise and to the point. There is a lot of text that isn&#39;t important to the question. Clarity is very important and asking people to read non-essential information discourages potential answerers or those in the future who are searching for similar information."}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1490222531, "post_id": 42962589, "comment_id": 73022063, "body": "Probably related: <a href=\"http://stackoverflow.com/q/18855178/477037\">stackoverflow.com/q/18855178/477037</a>. From the <a href=\"http://railsoopbook.com/\" rel=\"nofollow noreferrer\">book</a>, Sergio Tulentsev is <a href=\"http://stackoverflow.com/questions/18855178/how-are-rails-instance-variables-passed-to-views#comment27821398_18855178\">mentioning</a> in the comments: <i>&quot;the role that instance variables play in a Rails controller has absolutely nothing to do with being an instance variable&quot;</i>"}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 7692639, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6ec3e8e9ecab8d448555ba609e017a1e?s=128&d=identicon&r=PG&f=1", "display_name": "clickwork", "link": "https://stackoverflow.com/users/7692639/clickwork"}, "edited": false, "score": 0, "creation_date": 1490218424, "post_id": 42962843, "comment_id": 73020246, "body": "Thanks for this - it helps. I think my confusion emanates from instance variables being used for both specifying attributes and for, as per your definition, &#39;operating as a container for all the attributes of a class.&#39;  The above examples appear to use instance variables as a container for attributes, whereas other examples I&#39;ve read use instance variables to store attribute values.   An example from earlier in the book:  def initialize(attributes = {}) [at]name = attributes[:name] [at]email = attributes[:email] end  I guess it&#39;s both?"}, {"owner": {"reputation": 3288, "user_id": 5781737, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/86ad144d764093a50390bb9c6fe95b86?s=128&d=identicon&r=PG&f=1", "display_name": "Mark", "link": "https://stackoverflow.com/users/5781737/mark"}, "reply_to_user": {"reputation": 1, "user_id": 7692639, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6ec3e8e9ecab8d448555ba609e017a1e?s=128&d=identicon&r=PG&f=1", "display_name": "clickwork", "link": "https://stackoverflow.com/users/7692639/clickwork"}, "edited": false, "score": 0, "creation_date": 1490218666, "post_id": 42962843, "comment_id": 73020349, "body": "Yes, instance variable do store attribute values, and that&#39;s why I said they are a container for the attributes of their class. If <code>email</code> is an attribute of the <code>User</code> model (class), and if <code>@user</code> is an instance variable of <code>User</code>, then <code>@user.email = &quot;myemail@example.com</code> stores an email in the <code>email</code> attribute of the instance variable. In that sense, instance variables are containers for the attributes of the parent class."}, {"owner": {"reputation": 1, "user_id": 7692639, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6ec3e8e9ecab8d448555ba609e017a1e?s=128&d=identicon&r=PG&f=1", "display_name": "clickwork", "link": "https://stackoverflow.com/users/7692639/clickwork"}, "edited": false, "score": 0, "creation_date": 1490221394, "post_id": 42962843, "comment_id": 73021525, "body": "Thanks, Mark. Appreciate the time you put into the answer. I understand the initialize method and your answer helps clarify what I suspected to be the case about the user instance variable.   Part of my confusion was just the author conflating instance variables with &#39;attributes&#39; of an instance of the class and then using an instance variable to refer to the instance of the class (the object) as well as attributes of the instance of the class without much in the way of explanation.   As a newb, it can be difficult to determine what context to use them in."}, {"owner": {"reputation": 3288, "user_id": 5781737, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/86ad144d764093a50390bb9c6fe95b86?s=128&d=identicon&r=PG&f=1", "display_name": "Mark", "link": "https://stackoverflow.com/users/5781737/mark"}, "reply_to_user": {"reputation": 1, "user_id": 7692639, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6ec3e8e9ecab8d448555ba609e017a1e?s=128&d=identicon&r=PG&f=1", "display_name": "clickwork", "link": "https://stackoverflow.com/users/7692639/clickwork"}, "edited": false, "score": 0, "creation_date": 1490221457, "post_id": 42962843, "comment_id": 73021555, "body": "@clickwork yeah I totally understand. I didn&#39;t get what you meant at first, but now I do and can definitely see why it&#39;s confusing. Good luck as you keep learning rails! :)"}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1490221619, "post_id": 42962843, "comment_id": 73021620, "body": "Please don&#39;t use &quot;edit&quot; or &quot;update&quot; tags in the text. Instead incorporate the change into the text as if it was there from the beginning. We can see what changed and when if it&#39;s necessary as SO maintains revision history of questions and answers."}, {"owner": {"reputation": 3288, "user_id": 5781737, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/86ad144d764093a50390bb9c6fe95b86?s=128&d=identicon&r=PG&f=1", "display_name": "Mark", "link": "https://stackoverflow.com/users/5781737/mark"}, "reply_to_user": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1490221828, "post_id": 42962843, "comment_id": 73021721, "body": "@theTinMan I know there&#39;s a revision history, but I usually feel that it&#39;s easier for the OP to visually see where the edit starts when the edit tag is there. Thanks for your input though :)"}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1490222484, "post_id": 42962843, "comment_id": 73022033, "body": "I&#39;d recommend reading: &quot;<a href=\"https://meta.stackoverflow.com/questions/255644/\">Should &#39;Edit:&#39; in edits be discouraged?</a>&quot; along with the related posts."}], "tags": [], "owner": {"reputation": 3288, "user_id": 5781737, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/86ad144d764093a50390bb9c6fe95b86?s=128&d=identicon&r=PG&f=1", "display_name": "Mark", "link": "https://stackoverflow.com/users/5781737/mark"}, "is_accepted": false, "score": 0, "last_activity_date": 1490219915, "last_edit_date": 1495540834, "creation_date": 1490217559, "answer_id": 42962843, "question_id": 42962589, "link": "https://stackoverflow.com/questions/42962589/is-an-instance-variable-referring-to-an-instance-of-the-class/42962843#42962843", "title": "Is an instance variable referring to an instance of the class?", "body": "<p>From <a href=\"http://www.rubyist.net/~slagell/ruby/instancevars.html\" rel=\"nofollow noreferrer\">rubyist.net</a>:</p>\n\n<blockquote>\n  <p>An instance variable has a name beginning with @, and its scope is confined to whatever object self refers to. Two different objects, even if they belong to the same class, are allowed to have different values for their instance variables.</p>\n</blockquote>\n\n<p>So to answer your question: Yes, an instance variable is referring to an instance of a class and is not the same thing as an attribute of a class. More accurately, an instance variable is simply a container for all the attributes of a class (in this case the User class). Whenever you use the <code>@user</code> syntax, you're saying that you want to create your own instance of a user, with separate values for the user's attributes than say, another instance variable. </p>\n\n<p>I could create two instance variables like this:</p>\n\n<pre><code>@user1 = User.new\n@user2 = User.new\n</code></pre>\n\n<p>Now, I can assign attributes to the users separately like this:</p>\n\n<pre><code>@user1.email = \"test@exmample.com\"\n@user2.email = \"anotheremail@example.com\"\n</code></pre>\n\n<p>Each instance of this user is unique, and that is the core concept behind instance variables.</p>\n\n<p>For rails, however, any instance variables you declare in your controller will be accessible in the corresponding view, which is why you can access the <code>@user</code> variable in, say, your <code>new.html.erb</code> file.</p>\n\n<h2>EDIT</h2>\n\n<p>Here's the code you updated your post with:</p>\n\n<pre><code>def initialize(attributes = {})\n  @name = attributes[:name]\n  @email = attributes[:email]\nend\n</code></pre>\n\n<p>The <code>initialize</code> method is actually the method that gets called when you create a new object. For example if I created a new user object, I'd do it like this:</p>\n\n<pre><code>@user = User.new\n</code></pre>\n\n<p>By default, the <code>initialize</code> method for the <code>User</code> class will get called when I do this. Also, you'll notice that the <code>initialize</code> method takes one parameter called <code>attributes</code>. The parameter is defined like this:</p>\n\n<pre><code>def initialize(attributes = {})\n</code></pre>\n\n<p>This means that if you pass in any arguments to the <code>new</code> method, those arguments will be passed into the <code>attributes</code> parameter. the <code>= {}</code> simply means that if you don't pass in any arguments to the new method method, the <code>attributes</code> parameter will default to a blank hash.</p>\n\n<p>For example, I could initialize a user object like this:</p>\n\n<pre><code>@user = User.new(name: \"mark\", email: \"test@example.com\")\n</code></pre>\n\n<p>the <code>name</code> and <code>email</code> parameters would be passed into the <code>initialized</code> method via the <code>attributes</code> hash. then, your code suddenly makes more sense. This line:</p>\n\n<pre><code>@name = attributes[:name]\n</code></pre>\n\n<p>simply assigns the name you passed into the <code>new</code> method to be the value of <code>@user.name</code>. So in this sense, the above line is confusing because it appears to be assigning an attribute to an instance variable, but it's really just assigning the value of the <code>name</code> attribute on the <code>@user</code> instance variable. </p>\n\n<p>Therefore, once the <code>initialize</code> method returns, the <code>@user</code> variable would have access to the attributes you assigned in the <code>initialize</code> method. </p>\n\n<p>More reading:</p>\n\n<ul>\n<li><a href=\"https://stackoverflow.com/questions/12763016/how-to-cleanly-initialize-attributes-in-ruby-with-new\">good stack overflow question</a></li>\n<li><a href=\"http://www.rubyist.net/~slagell/ruby/objinitialization.html\" rel=\"nofollow noreferrer\">object initialization in ruby</a></li>\n</ul>\n"}], "owner": {"reputation": 1, "user_id": 7692639, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6ec3e8e9ecab8d448555ba609e017a1e?s=128&d=identicon&r=PG&f=1", "display_name": "clickwork", "link": "https://stackoverflow.com/users/7692639/clickwork"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 92, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1490219915, "creation_date": 1490216501, "last_edit_date": 1490218581, "question_id": 42962589, "link": "https://stackoverflow.com/questions/42962589/is-an-instance-variable-referring-to-an-instance-of-the-class", "title": "Is an instance variable referring to an instance of the class?", "body": "<p>I'm fairly confused and would appreciate some help. </p>\n\n<p>I'm going through the Michael Hartl tutorial and the most complicated aspect (for me) is simply understanding what I perceive to be inconsistencies in syntax (I know I'm wrong in this regard and it's just my perception). </p>\n\n<p>I'm currently on chapter 8, however a simple example from earlier on: </p>\n\n<pre><code>def show\n  @user = User.find(params[:id])\nend\n</code></pre>\n\n<p>And another: </p>\n\n<pre><code> def create\n  @user = User.new(user_params)\n  if @user.save\n    log_in @user\n    flash[:success] = \"Welcome to the Sample App!\"\n    redirect_to @user\n  else\n    render 'new'\n  end\nend\n</code></pre>\n\n<p>As far as I understand instance variables, they are supposed to be attributes of the object or instance of the class, eg, :name, :email, :password_digest, etc. </p>\n\n<p>In these examples, we haven't written an initialize method for the class as we simply generated a migration with 4/5 columns (which correspond with the attributes specified); the columns in this migration are, as I understand, interpreted by Rails as attributes or instance variables of the instance of the class (the object?)</p>\n\n<p>What then is @user or rather why is an instance variable used in this context? It isn't an attribute (eg, :name) of an instance of the class, but rather appears to be a reference, placeholder or representation of an instance of the class? </p>\n\n<p>n.b. I understand (well, as far as beginners understand) what the code above does, ie, queries the User model - which is also called User - to retrieve a record, however I don't understand why this is being assigned to an instance variable or in what contexts to use instance variables, ie, I thought they were for specifying attributes for an instance of the class, not for operating as a placeholder or referencing an instance of the class (including its attributes). </p>\n\n<p><strong>EDIT:</strong> I think my confusion emanates from instance variables being used for both specifying attributes and for, as per Mark's definition below, 'operating as a container for all the attributes of a class.'</p>\n\n<p>The above examples appear to use instance variables as a 'container for attributes', whereas other examples I've read use instance variables to store attribute values. </p>\n\n<p>An example from earlier in the book:</p>\n\n<pre><code>def initialize(attributes = {})\n@name = attributes[:name]\n@email = attributes[:email]\nend\n</code></pre>\n\n<p>I guess it's both?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "travis-ci"], "answers": [{"comments": [{"owner": {"reputation": 2770, "user_id": 1198291, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/d82e5a799d05375969c7fa6fce0f2783?s=128&d=identicon&r=PG", "display_name": "dariush", "link": "https://stackoverflow.com/users/1198291/dariush"}, "edited": false, "score": 0, "creation_date": 1490222692, "post_id": 42963144, "comment_id": 73022132, "body": "It is blank! but not for the newly installed MySQL 5.7."}], "tags": [], "owner": {"reputation": 331, "user_id": 5028816, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-XhXi57-YBBc/AAAAAAAAAAI/AAAAAAAAB5s/8qeW6IUKiKA/photo.jpg?sz=128", "display_name": "Tim Lawrenz", "link": "https://stackoverflow.com/users/5028816/tim-lawrenz"}, "is_accepted": false, "score": 0, "last_activity_date": 1490218784, "creation_date": 1490218784, "answer_id": 42963144, "question_id": 42962541, "link": "https://stackoverflow.com/questions/42962541/travis-persists-on-mysql2error-access-denied-for-user-rootlocalhost/42963144#42963144", "title": "Travis persists on `Mysql2::Error: Access denied for user &#39;root&#39;@&#39;localhost&#39;`", "body": "<p>What's root's password for mysql?</p>\n\n<p>Add that to</p>\n\n<pre><code>test:\n  &lt;&lt;: *default\n  database: site_test\n  password: ROOT_PASSWORD_GOES_HERE\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2770, "user_id": 1198291, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/d82e5a799d05375969c7fa6fce0f2783?s=128&d=identicon&r=PG", "display_name": "dariush", "link": "https://stackoverflow.com/users/1198291/dariush"}, "is_accepted": true, "score": 1, "last_activity_date": 1490222637, "creation_date": 1490222637, "answer_id": 42964024, "question_id": 42962541, "link": "https://stackoverflow.com/questions/42962541/travis-persists-on-mysql2error-access-denied-for-user-rootlocalhost/42964024#42964024", "title": "Travis persists on `Mysql2::Error: Access denied for user &#39;root&#39;@&#39;localhost&#39;`", "body": "<p>For what it worth, I forgot to reset the newly installed MySQL 5.7's username &amp; password, noticed from <a href=\"https://medium.com/@mtparet/install-mysql-server-5-7-on-travis-96f2ebc0f339#.bsjosi8z2\" rel=\"nofollow noreferrer\">here</a>.</p>\n"}], "owner": {"reputation": 2770, "user_id": 1198291, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/d82e5a799d05375969c7fa6fce0f2783?s=128&d=identicon&r=PG", "display_name": "dariush", "link": "https://stackoverflow.com/users/1198291/dariush"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 578, "favorite_count": 0, "accepted_answer_id": 42964024, "answer_count": 2, "score": 0, "last_activity_date": 1490222637, "creation_date": 1490216298, "question_id": 42962541, "link": "https://stackoverflow.com/questions/42962541/travis-persists-on-mysql2error-access-denied-for-user-rootlocalhost", "title": "Travis persists on `Mysql2::Error: Access denied for user &#39;root&#39;@&#39;localhost&#39;`", "body": "<p>I am trying to set up a Travis configuration for my RoR app, but I cannot get passed from the the access point for the MySQL database. here is my <code>.travis</code> contents:</p>\n\n<pre><code>language: ruby\n\nrvm:\n  - 2.4.0\n\ncache: bundler\n\nsudo: required\n\nenv:\n  - RAILS_ENV=test\n\nmatrix:\n  fast_finish: true\n\nservices:\n  - mysql\n\naddons:\n  apt:\n    packages:\n      - imagemagick libmagickwand-dev\n\nbefore_install:\n  - bash .travis.install-mysql-5.7\n  - gem update --system 2.6.11\n  - gem update bundler\n\nbefore_script:\n  - cp .travis.database.yml config/database.yml\n\nscript:\n  - RAILS_ENV=test bundle exec rake db:create\n  - RAILS_ENV=test bundle exec rake db:migrate\n</code></pre>\n\n<p>And in my <code>.travis.database.yml</code> I've have done everything by <a href=\"https://docs.travis-ci.com/user/database-setup/\" rel=\"nofollow noreferrer\">the book</a>:</p>\n\n<pre><code>default: &amp;default\n  adapter: mysql2\n  encoding: utf8\n  username: root\n\ndevelopment:\n  &lt;&lt;: *default\n  database: site_development\n\ntest:\n  &lt;&lt;: *default\n  database: site_test\n\nproduction:\n  &lt;&lt;: *default\n  database: site_production\n  username: site\n  password: &lt;%= ENV['SITE_DATABASE_PASSWORD'] %&gt;\n</code></pre>\n\n<p>Here is the Travis' output:</p>\n\n<pre><code>$ cp .travis.database.yml config/database.yml\n\n$ RAILS_ENV=test bundle exec rake db:create\n#&lt;Mysql2::Error: Access denied for user 'root'@'localhost'&gt;\nCouldn't create database for {\"adapter\"=&gt;\"mysql2\", \"encoding\"=&gt;\"utf8\", \"username\"=&gt;\"root\", \"database\"=&gt;\"site_test\"}, {:charset=&gt;\"utf8\"}\n(If you set the charset manually, make sure you have a matching collation)\nCreated database 'site_test'\n\nThe command \"RAILS_ENV=test bundle exec rake db:create\" exited with 0.\n$ RAILS_ENV=test bundle exec rake db:migrate\nrake aborted!\nMysql2::Error: Access denied for user 'root'@'localhost'\n</code></pre>\n\n<h3>Question:</h3>\n\n<ol>\n<li>What the bloody is wrong with travis or my configuration? </li>\n</ol>\n"}, {"tags": ["ruby-on-rails", "ruby", "activerecord"], "answers": [{"comments": [{"owner": {"reputation": 277, "user_id": 4774554, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/d72ff795ced575525d4f5cf033d65520?s=128&d=identicon&r=PG&f=1", "display_name": "VegaStudios", "link": "https://stackoverflow.com/users/4774554/vegastudios"}, "edited": false, "score": 0, "creation_date": 1490218140, "post_id": 42962730, "comment_id": 73020102, "body": "Thanks Ehren...while this works and shows the flash message, the ArchivedUser isn&#39;t actually created in the ArchivedUser table which is odd."}, {"owner": {"reputation": 396, "user_id": 7470815, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-2dkYqnfFeao/AAAAAAAAAAI/AAAAAAAAAG0/XKVwtqt15Ec/photo.jpg?sz=128", "display_name": "Ehren Murdick", "link": "https://stackoverflow.com/users/7470815/ehren-murdick"}, "reply_to_user": {"reputation": 277, "user_id": 4774554, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/d72ff795ced575525d4f5cf033d65520?s=128&d=identicon&r=PG&f=1", "display_name": "VegaStudios", "link": "https://stackoverflow.com/users/4774554/vegastudios"}, "edited": false, "score": 0, "creation_date": 1490219498, "post_id": 42962730, "comment_id": 73020719, "body": "@VegaStudios Ok, that&#39;s probably because of validation. Try using <code>create!</code> instead of <code>create</code> to get an exception with the validation messages."}, {"owner": {"reputation": 277, "user_id": 4774554, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/d72ff795ced575525d4f5cf033d65520?s=128&d=identicon&r=PG&f=1", "display_name": "VegaStudios", "link": "https://stackoverflow.com/users/4774554/vegastudios"}, "edited": false, "score": 0, "creation_date": 1490219818, "post_id": 42962730, "comment_id": 73020860, "body": "Hmph, that threw an error of Validation failed: User can&#39;t be blank. I&#39;m going to have to do some digging..."}, {"owner": {"reputation": 396, "user_id": 7470815, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-2dkYqnfFeao/AAAAAAAAAAI/AAAAAAAAAG0/XKVwtqt15Ec/photo.jpg?sz=128", "display_name": "Ehren Murdick", "link": "https://stackoverflow.com/users/7470815/ehren-murdick"}, "reply_to_user": {"reputation": 277, "user_id": 4774554, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/d72ff795ced575525d4f5cf033d65520?s=128&d=identicon&r=PG&f=1", "display_name": "VegaStudios", "link": "https://stackoverflow.com/users/4774554/vegastudios"}, "edited": false, "score": 0, "creation_date": 1490220110, "post_id": 42962730, "comment_id": 73021003, "body": "Yep! Ah, your ArchivedUser probably has a user field, which the regular user wouldn&#39;t have. You just need another line to set that after the slice line. Just <code>archived_user = ArchivedUser.new(&lt;snip&gt;); archived_user.user = self; archived_user.save!</code>"}, {"owner": {"reputation": 277, "user_id": 4774554, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/d72ff795ced575525d4f5cf033d65520?s=128&d=identicon&r=PG&f=1", "display_name": "VegaStudios", "link": "https://stackoverflow.com/users/4774554/vegastudios"}, "edited": false, "score": 0, "creation_date": 1490220430, "post_id": 42962730, "comment_id": 73021127, "body": "Ah! I&#39;m cumulatively learning :D Thanks for walking me through that."}, {"owner": {"reputation": 277, "user_id": 4774554, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/d72ff795ced575525d4f5cf033d65520?s=128&d=identicon&r=PG&f=1", "display_name": "VegaStudios", "link": "https://stackoverflow.com/users/4774554/vegastudios"}, "edited": false, "score": 0, "creation_date": 1490293441, "post_id": 42962730, "comment_id": 73060096, "body": "Unfortunately, setting the user field that way returned a syntax error, moreover, it returned an error for &lt;snip&gt;. I managed to set the user field with merge, <code>ArchivedUser.create!(self.attributes.slice (ArchivedUser.attribute_names).merge(user_id: self.id))</code>"}, {"owner": {"reputation": 396, "user_id": 7470815, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-2dkYqnfFeao/AAAAAAAAAAI/AAAAAAAAAG0/XKVwtqt15Ec/photo.jpg?sz=128", "display_name": "Ehren Murdick", "link": "https://stackoverflow.com/users/7470815/ehren-murdick"}, "reply_to_user": {"reputation": 277, "user_id": 4774554, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/d72ff795ced575525d4f5cf033d65520?s=128&d=identicon&r=PG&f=1", "display_name": "VegaStudios", "link": "https://stackoverflow.com/users/4774554/vegastudios"}, "edited": false, "score": 0, "creation_date": 1490293528, "post_id": 42962730, "comment_id": 73060158, "body": "Ah yes, by &lt;snip&gt; I meant &quot;the other code from before&quot;, I just didn&#39;t want to type it all in the comment. The real line would be <code>ArchivedUser.new(self.attributes.slice(ArchivedUser.attribut&zwnj;&#8203;e_names)) ; archived_user.user = self; archived_user.save! </code>"}, {"owner": {"reputation": 277, "user_id": 4774554, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/d72ff795ced575525d4f5cf033d65520?s=128&d=identicon&r=PG&f=1", "display_name": "VegaStudios", "link": "https://stackoverflow.com/users/4774554/vegastudios"}, "reply_to_user": {"reputation": 396, "user_id": 7470815, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-2dkYqnfFeao/AAAAAAAAAAI/AAAAAAAAAG0/XKVwtqt15Ec/photo.jpg?sz=128", "display_name": "Ehren Murdick", "link": "https://stackoverflow.com/users/7470815/ehren-murdick"}, "edited": false, "score": 0, "creation_date": 1490293808, "post_id": 42962730, "comment_id": 73060322, "body": "Let us <a href=\"http://chat.stackoverflow.com/rooms/138861/discussion-between-vegastudios-and-ehren-murdick\">continue this discussion in chat</a>."}], "tags": [], "owner": {"reputation": 396, "user_id": 7470815, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-2dkYqnfFeao/AAAAAAAAAAI/AAAAAAAAAG0/XKVwtqt15Ec/photo.jpg?sz=128", "display_name": "Ehren Murdick", "link": "https://stackoverflow.com/users/7470815/ehren-murdick"}, "is_accepted": true, "score": 1, "last_activity_date": 1490217090, "creation_date": 1490217090, "answer_id": 42962730, "question_id": 42962473, "link": "https://stackoverflow.com/questions/42962473/rails-copying-attributes-from-user-object-to-new-object/42962730#42962730", "title": "Rails Copying attributes from User object to new object", "body": "<p>You were on the right track with the first implementation. You just have to use self instead of user.</p>\n\n<pre><code>ArchivedUser.create(self.attributes.slice(ArchivedUser.attribute_names))\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 149, "user_id": 3537071, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/hjb9a.jpg?s=128&g=1", "display_name": "chrisgeeq", "link": "https://stackoverflow.com/users/3537071/chrisgeeq"}, "is_accepted": false, "score": 0, "last_activity_date": 1590659967, "creation_date": 1590659967, "answer_id": 62061944, "question_id": 42962473, "link": "https://stackoverflow.com/questions/42962473/rails-copying-attributes-from-user-object-to-new-object/62061944#62061944", "title": "Rails Copying attributes from User object to new object", "body": "<p>If you just want to have a copy of the user that is being archived, I think an elegant way would be to do</p>\n\n<p><code>archived_user = user_to_be_archived.dup</code></p>\n\n<p>or you can take a look at the amoeba gem, this will do all the heavy lifting including associations if you want.\n<a href=\"https://github.com/amoeba-rb/amoeba\" rel=\"nofollow noreferrer\">https://github.com/amoeba-rb/amoeba</a></p>\n"}], "owner": {"reputation": 277, "user_id": 4774554, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/d72ff795ced575525d4f5cf033d65520?s=128&d=identicon&r=PG&f=1", "display_name": "VegaStudios", "link": "https://stackoverflow.com/users/4774554/vegastudios"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 811, "favorite_count": 0, "accepted_answer_id": 42962730, "answer_count": 2, "score": 1, "last_activity_date": 1590659967, "creation_date": 1490216053, "last_edit_date": 1490293769, "question_id": 42962473, "link": "https://stackoverflow.com/questions/42962473/rails-copying-attributes-from-user-object-to-new-object", "title": "Rails Copying attributes from User object to new object", "body": "<p>In the User model I have an archive! method that is called when a User is destroyed. This action creates a new ArchivedUser in separate table.</p>\n\n<p>The ArchivedUser is successfully created, but the way I am manually setting each value is pretty dirty; if a new column is added to the User table it must be added here as well.</p>\n\n<p>I tried to <code>select</code> and <code>slice</code> the attributes, but got <code>undefined local variable or method</code>user'`</p>\n\n<pre><code>ArchivedUser.create(user.attributes.select{ |key, _| ArchivedUser.attribute_names.include? key })\n\nArchivedUser.create(user.attributes.slice(ArchivedUser.attribute_names))\n</code></pre>\n\n<p>How can I iterate through each attribute in the User table when creating an ArchivedUser with self? </p>\n\n<pre><code>def archive!\n    if ArchivedUser.create(\n        user_id: self.id,\n        company_id: self.company_id,\n        first_name: self.first_name,\n        last_name: self.last_name,\n        email: self.email,\n        encrypted_password: self.encrypted_password,\n        password_salt: self.password_salt,\n        session_token: self.session_token,\n        perishable_token: self.perishable_token,\n        role: self.role,\n        score: self.score,\n        created_at: self.created_at,\n        updated_at: self.updated_at,\n        api_key: self.api_key,\n        device_id: self.device_id,\n        time_zone: self.time_zone,\n        device_type: self.device_type,\n        verified_at: self.verified_at,\n        verification_key: self.verification_key,\n        uninstalled: self.uninstalled,\n        device_details: self.device_details,\n        is_archived: self.is_archived,\n        registered_at: self.registered_at,\n        logged_in_at: self.logged_in_at,\n        state: self.state,\n        creation_state: self.creation_state,\n        language_id: self.language_id,\n        offer_count: self.offer_count,\n        expired_device_id: self.expired_device_id,\n        unique_id: self.unique_id,\n        best_language_code: self.best_language_code,\n        offer_id: self.offer_id,\n        vetted_state: self.vetted_state,\n        photo_path: self.photo_path\n      )\n\n      self.is_archived = true\n\n      self.email = \"#{self.email}.archived#{Time.now.to_i}\"\n      self.encrypted_password = nil\n      self.password_salt      = nil\n      self.session_token      = nil\n      self.perishable_token   = nil\n      self.device_id          = nil\n      self.verification_key   = nil\n      self.save!\n\n      self.update_column(:api_key, nil)\n      UserGroup.delete_all(:user_id =&gt; self.id)\n    else\n      # handle the ArchivedUser not being created properly\n    end\n  end\n</code></pre>\n\n<p>Thanks for viewing :)</p>\n\n<p>Update:</p>\n\n<p>We were able to figure out the reasons why <code>ArchivedUser.create(self.attributes.slice!(ArchivedUser.attribute_names)</code> wasn't working. The first reason is the <code>create</code> method requires \"bang\" to write the object. The second reason was that ArchivedUser has a user_id field, that User doesn't receive until after create. We have to set the user_id: manually with <code>merge(user_id: self.id)</code></p>\n\n<p>The final output looks like \n<code>ArchivedUser.create!(self.attributes.slice!(ArchivedUser.attribute_names).merge(user_id: self.id))</code></p>\n"}, {"tags": ["arrays", "ruby", "lis"], "answers": [{"tags": [], "owner": {"reputation": 4150, "user_id": 7470620, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/49f3026fe13841e41d1805178eed9a3c?s=128&d=identicon&r=PG", "display_name": "eiko", "link": "https://stackoverflow.com/users/7470620/eiko"}, "is_accepted": false, "score": 1, "last_activity_date": 1490276894, "last_edit_date": 1490276894, "creation_date": 1490215595, "answer_id": 42962355, "question_id": 42961945, "link": "https://stackoverflow.com/questions/42961945/why-is-false-returned-before-the-triggering-variable-equals-the-triggering-value/42962355#42962355", "title": "Why is false returned before the triggering variable equals the triggering value in Ruby? almostIncreasingSequence Codefights", "body": "<p>It looks like wrong is only being added once because your <code>puts</code> comes after the <code>return</code> so it's never being called. Moving it before the return reveals that wrong is in fact being incremented twice.</p>\n\n<p>The core of your problem is that when you increment wrong, your <code>prev</code> value stays set to <code>99</code> which makes every subsequent value wrong. You do need to set <code>prev</code> to <code>sequence[num - 1]</code> to prevent this from happening, but like you said, this causes errors. That's because when you remove a bad number from an array (ie <code>[1, 2, 1, 2] -&gt; [1, 1, 2]</code> you need to check again to see if the two now-consecutive numbers work together, which in this case they do not.</p>\n\n<p>You could fix that, but then you'd hit another error with situations like [10, 1, 2, 3, 4, 5]<code>where your starting</code>prev` value isn't actually your first value.</p>\n\n<p>Ultimately you're going to hit a lot of bugs because the logic behind your solution is complex and unintuitive for a human to follow. You <em>could</em> eventually reach your answer following this method, but you might want to revisit the problem and redesign your code from scratch.</p>\n"}], "owner": {"reputation": 311, "user_id": 2718180, "user_type": "registered", "accept_rate": 45, "profile_image": "https://i.stack.imgur.com/HYXB3.png?s=128&g=1", "display_name": "Lenocam", "link": "https://stackoverflow.com/users/2718180/lenocam"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 148, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1490276894, "creation_date": 1490214263, "question_id": 42961945, "link": "https://stackoverflow.com/questions/42961945/why-is-false-returned-before-the-triggering-variable-equals-the-triggering-value", "title": "Why is false returned before the triggering variable equals the triggering value in Ruby? almostIncreasingSequence Codefights", "body": "<p>One of the tools I'm using to improve coding is <a href=\"https://codefights.com/\" rel=\"nofollow noreferrer\">Codefights</a>. I've been stuck on the same problem for several days now and could use some help figuring it out. Can anyone tell me what I'm doing wrong here?</p>\n\n<p>Here are the instructions from CodeFights:</p>\n\n<blockquote>\n  <p>Given a sequence of integers as an array, determine whether it is\n  possible to obtain a strictly increasing sequence by removing no more\n  than one element from the array.</p>\n  \n  <p>Example</p>\n  \n  <p>For sequence = [1, 3, 2, 1], the output should be\n  almostIncreasingSequence(sequence) = false;</p>\n  \n  <p>There is no one element in this array that can be removed in order to\n  get a strictly increasing sequence.</p>\n  \n  <p>For sequence = [1, 3, 2], the output should be\n  almostIncreasingSequence(sequence) = true.</p>\n  \n  <p>You can remove 3 from the array to get the strictly increasing\n  sequence [1, 2]. Alternately, you can remove 2 to get the strictly\n  increasing sequence [1, 3].</p>\n  \n  <p>Input/Output</p>\n  \n  <p>[time limit] 4000ms (rb) [input] array.integer sequence</p>\n  \n  <p>Constraints: 2 \u2264 sequence.length \u2264 105,\n  -105 \u2264 sequence[i] \u2264 105.</p>\n  \n  <p>[output] boolean</p>\n  \n  <p>Return true if it is possible to remove one element from the array in\n  order to get a strictly increasing sequence, otherwise return false.</p>\n</blockquote>\n\n<p>Below is the code I'm trying. I dropped in <code>puts \"#{prev}\"</code> a few times to see what <code>prev</code> is set to originally, after a <code>1</code> is added to <code>wrong</code> and at the very end, so the last <code>prev</code> recorded.</p>\n\n<pre><code>def almostIncreasingSequence(sequence)\n  prev = [sequence[0], sequence[1]].min\n  puts \"#{prev}\"\n  wrong = 0\n  (sequence.length - 1).times do |num|\n    if prev &lt; sequence[num + 1]\n      prev = sequence[num + 1]\n    else\n      wrong += 1\n      return false if wrong == 2\n      puts \"#{prev}\"\n    end\n  end\n  puts \"#{prev}\"\n  true\nend\n</code></pre>\n\n<p>This is the only test that won't pass right now:</p>\n\n<pre><code>(almostIncreasingSequence([1, 2, 3, 4, 99, 5, 6]) \n</code></pre>\n\n<p>This should be <em>true</em> because <code>99</code> can be pulled out and the increasing sequence can continue. But <code>false</code> is being returned seemingly after <code>wrong</code> is only added to once.</p>\n\n<p>The code should return <code>false</code> if <code>wrong == 2</code> From the <code>puts \"#{prev}\"</code> output, I can see that <code>prev</code> originates at <code>1</code> and a <code>wrong</code> is triggered when <code>99</code> is more than <code>5</code> and since <code>wrong</code> should only be at <code>1</code> I don't understand why it returns <code>false</code> immediately. I can get this test to pass if I set <code>prev = sequence[num - 1]</code> after a <code>wrong</code> is added to the first time, but then a lot of other tests won't pass. Here is a list of the other tests I'm trying. Most are the tests that Codefights requires you to pass before you can move to the next practice code.</p>\n\n<pre><code>(almostIncreasingSequence([1, 3, 2])) #true\n(almostIncreasingSequence([1, 2, 1, 2])) #false\n(almostIncreasingSequence([10, 1, 2, 3, 4, 5])) #true\n(almostIncreasingSequence([0, -2, 5, 6]) )#true\n(almostIncreasingSequence([1, 2, 3, 4, 5, 3, 5, 6])) #false\n(almostIncreasingSequence([40, 50, 60, 10, 20, 30])) #false\n(almostIncreasingSequence([1, 2, 3, 4, 3, 6])) #true\n(almostIncreasingSequence([100, 200, 300, 400, 99, 500, 600])) #true\n(almostIncreasingSequence([1, 3, 2, 1])) #false\n(almostIncreasingSequence([1, 4, 10, 4, 2])) #false\n(almostIncreasingSequence( [1, 1, 1, 2, 3])) #false\n(almostIncreasingSequence([1, 1])) #true\n(almostIncreasingSequence([10, 1, 2, 3, 4, 5, 6, 1])) #false\n</code></pre>\n\n<p>Thanks in advance for any light you can shed on this problem.</p>\n"}, {"tags": ["arrays", "ruby", "regex", "interpolation"], "answers": [{"comments": [{"owner": {"reputation": 33085, "user_id": 2423164, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Nxbnp.jpg?s=128&g=1", "display_name": "ndnenkov", "link": "https://stackoverflow.com/users/2423164/ndnenkov"}, "edited": false, "score": 2, "creation_date": 1490215825, "post_id": 42961821, "comment_id": 73018903, "body": "To expand further, interpolating (inside strings or regexes) just calls <code>#to_s</code> on the object being interpolated and uses that. Yes, this is the correct answer."}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1490287464, "post_id": 42961821, "comment_id": 73056325, "body": "You found it but you didn&#39;t find the fix to it. Answers are not only supposed to point to the problem, they&#39;re also supposed to provide the fix and explain it."}], "tags": [], "owner": {"reputation": 508, "user_id": 308016, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/HW9lH.jpg?s=128&g=1", "display_name": "pmneve", "link": "https://stackoverflow.com/users/308016/pmneve"}, "is_accepted": false, "score": 0, "last_activity_date": 1490213814, "creation_date": 1490213814, "answer_id": 42961821, "question_id": 42961710, "link": "https://stackoverflow.com/questions/42961710/why-does-an-interpolated-array-in-a-regexp-return-a-position-instead-of-nil/42961821#42961821", "title": "Why does an interpolated array in a regexp return a position instead of nil?", "body": "<p>I think I found it:</p>\n\n<pre><code>irb(main):008:0&gt; /#{oops}/\n=&gt; /[\"oops\"]/\n</code></pre>\n\n<p>The regex evaluates to a pattern that is going to look for one of the characters in the brackets and match on the first one it runs into, i.e., the 'o' in the second position in 'Lorem ipsum . . .'</p>\n\n<p>Have I found it?</p>\n"}, {"tags": [], "owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "is_accepted": true, "score": 1, "last_activity_date": 1490288496, "last_edit_date": 1490288496, "creation_date": 1490226515, "answer_id": 42964742, "question_id": 42961710, "link": "https://stackoverflow.com/questions/42961710/why-does-an-interpolated-array-in-a-regexp-return-a-position-instead-of-nil/42964742#42964742", "title": "Why does an interpolated array in a regexp return a position instead of nil?", "body": "<p>Embedding an array in a regular expression is possible, however you can't directly use interpolation. As you found out, directly interpolating it results in a <a href=\"https://ruby-doc.org/core-2.4.0/Regexp.html#class-Regexp-label-Character+Classes\" rel=\"nofollow noreferrer\">character class</a> that will match all characters in the elements plus double-quotes and commas.</p>\n\n<p>Instead use:</p>\n\n<pre><code>ary = ['a']\nregex = Regexp.union(ary) # =&gt; /a/\n/#{regex.source}/ # =&gt; /a/\n\nary = ['a', 'b']\nregex = Regexp.union(ary) # =&gt; /a|b/\n/#{regex.source}/ # =&gt; /a|b/\n</code></pre>\n\n<p>You can read more about <a href=\"https://ruby-doc.org/core-2.4.0/Regexp.html#method-c-union\" rel=\"nofollow noreferrer\"><code>Regexp.union</code></a> and <a href=\"https://ruby-doc.org/core-2.4.0/Regexp.html#method-i-source\" rel=\"nofollow noreferrer\"><code>source</code></a> in the documentation.</p>\n\n<p>But wait! There's more!</p>\n\n<p>Normally you want to group that sub-expression to avoid suddenly generating substring false-positive hits:</p>\n\n<pre><code>/foo#{regex.source}/ # =&gt; /fooa|b/\n</code></pre>\n\n<p>which, because regex engines are greedy, would match <code>fooa</code> or <code>b</code>:</p>\n\n<pre><code>'fooa'[/foo#{regex.source}/] # =&gt; \"fooa\"\n'foob'[/foo#{regex.source}/] # =&gt; \"b\"\n</code></pre>\n\n<p>Instead this'll help:</p>\n\n<pre><code>/foo(?:#{regex.source})/ # =&gt; /foo(?:a|b)/\n\n'fooa'[/foo(?:#{regex.source})/] # =&gt; \"fooa\"\n'foob'[/foo(?:#{regex.source})/] # =&gt; \"foob\"\n</code></pre>\n\n<p>But there's even more!</p>\n\n<p>The embedded regular expression maintains its own set of <a href=\"https://ruby-doc.org/core-2.4.0/Regexp.html#class-Regexp-label-Options\" rel=\"nofollow noreferrer\">options</a> that are preserved when interpolated, resulting in hard to debug problems if you aren't paying attention:</p>\n\n<pre><code>regex = Regexp.union(ary) # =&gt; /a|b/\n/#{regex}/ # =&gt; /(?-mix:a|b)/\n</code></pre>\n\n<p>From the documentation:</p>\n\n<blockquote>\n  <p><code>i</code>, <code>m</code>, and <code>x</code> can also be applied on the subexpression level with the <em>(?on-off)</em> construct, which enables options <em>on</em>, and disables options <em>off</em> for the expression enclosed by the parentheses.</p>\n</blockquote>\n\n<p>If the outer pattern uses a different option, say, for case-insensitive matches then something like this could happen:</p>\n\n<pre><code>regex = /FOO/\n'foo'[/#{regex}/i] # =&gt; nil\n</code></pre>\n\n<p>You'd think that the <code>i</code> option on the outer expression would fix things but here's what's happening:</p>\n\n<pre><code>/#{regex}/i # =&gt; /(?-mix:FOO)/i\n</code></pre>\n\n<p>The simple fix is to use the <code>source</code> method like in the above examples which returns the text of the expression but not the settings of the options:</p>\n\n<pre><code>/#{regex.source}/i # =&gt; /FOO/i\n'foo'[/#{regex.source}/i] # =&gt; \"foo\"\n</code></pre>\n\n<p>Using <code>source</code> isn't always the correct thing to do, but it helps a lot until you're sure there's a case where you deliberately want to use an embedded expressions <em>with</em> a different set of options. If you do get to that point be sure to comment the code well at that point so your future you, or anyone else inheriting the code, will understand what's happening. Otherwise it can take days to figure out what's happening. </p>\n"}], "owner": {"reputation": 508, "user_id": 308016, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/HW9lH.jpg?s=128&g=1", "display_name": "pmneve", "link": "https://stackoverflow.com/users/308016/pmneve"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 82, "favorite_count": 0, "accepted_answer_id": 42964742, "answer_count": 2, "score": 0, "last_activity_date": 1490288496, "creation_date": 1490213400, "last_edit_date": 1490287578, "question_id": 42961710, "link": "https://stackoverflow.com/questions/42961710/why-does-an-interpolated-array-in-a-regexp-return-a-position-instead-of-nil", "title": "Why does an interpolated array in a regexp return a position instead of nil?", "body": "<p>Here's what I tried</p>\n\n<pre><code>lorem = 'Lorem ipsum dolor sit amet, co'\n# =&gt; \"Lorem ipsum dolor sit amet, co\"\noops  = ['oops']\n# =&gt; [\"oops\"]\n</code></pre>\n\n<p>Here is what I got:</p>\n\n<pre><code>lorem =~ /#{oops}/\n# =&gt; 1\n</code></pre>\n\n<p>I would have expected nil or an exception.</p>\n\n<p>Apparently it is taking the first item in the string array for oops and matching that. 'o' is the second character in 'Lorem ipsum...'</p>\n\n<p>I'm using Ruby 2.3.3 in Windows 7.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "validation", "model", "ruby-on-rails-5"], "answers": [{"tags": [], "owner": {"reputation": 1843, "user_id": 4067720, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a52c645614505bcaeb65a6c5199158c1?s=128&d=identicon&r=PG", "display_name": "Glyoko", "link": "https://stackoverflow.com/users/4067720/glyoko"}, "is_accepted": true, "score": 0, "last_activity_date": 1490213255, "creation_date": 1490213255, "answer_id": 42961668, "question_id": 42961537, "link": "https://stackoverflow.com/questions/42961537/in-rails-how-do-i-write-a-validation-rule-to-validate-that-both-fields-should-b/42961668#42961668", "title": "In Rails, how do I write a validation rule to validate that both fields should be present or neither be?", "body": "<p>There are two options here. You can either use a conditional validation or write a custom validation to do this check.</p>\n\n<p>With a conditional validation:</p>\n\n<pre><code>validates :first_name, presence: true, if: -&gt; {last_name.present?}\n</code></pre>\n\n<p>With a custom validation:</p>\n\n<pre><code>validate :both_or_neither_present\n# ...\ndef both_or_neither_present\n  # if only one of the fields is present\n  if (first_name.present? ^ last_name.present?)\n    errors.add(:name, \"Only part of the name was given\")\n  end\nend\n</code></pre>\n\n<p>With the second one you can write a custom error message. With the first, the error will always be on the :first_name attribute.</p>\n"}, {"tags": [], "owner": {"reputation": 424, "user_id": 6150184, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/26aa5396de57080c2084de1b8a5aeaa5?s=128&d=identicon&r=PG&f=1", "display_name": "DiodonHystrix", "link": "https://stackoverflow.com/users/6150184/diodonhystrix"}, "is_accepted": false, "score": 0, "last_activity_date": 1490213781, "creation_date": 1490213781, "answer_id": 42961812, "question_id": 42961537, "link": "https://stackoverflow.com/questions/42961537/in-rails-how-do-i-write-a-validation-rule-to-validate-that-both-fields-should-b/42961812#42961812", "title": "In Rails, how do I write a validation rule to validate that both fields should be present or neither be?", "body": "<p>To add to Glyoko's post:</p>\n\n<pre><code>validates :first_name, presence: { 'Last name is missing' }, if: -&gt; {last_name.present?}\nvalidates :last_name, presence: { 'First name is missing' }, if: -&gt; {first_name.present?}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 58, "user_id": 5424261, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/58e67135f5fb8597ed27c02beac1285f?s=128&d=identicon&r=PG&f=1", "display_name": "Daniel Pe&#241;aloza", "link": "https://stackoverflow.com/users/5424261/daniel-pe%c3%b1aloza"}, "is_accepted": false, "score": 0, "last_activity_date": 1490214986, "last_edit_date": 1490214986, "creation_date": 1490213791, "answer_id": 42961815, "question_id": 42961537, "link": "https://stackoverflow.com/questions/42961537/in-rails-how-do-i-write-a-validation-rule-to-validate-that-both-fields-should-b/42961815#42961815", "title": "In Rails, how do I write a validation rule to validate that both fields should be present or neither be?", "body": "<p>This can be usefull</p>\n\n<pre><code>validates_presence_of :last_name, :if =&gt; :first_name? (or vice versa)\n</code></pre>\n\n<p>then you need to make a first_name method that returns a boolean, something like:</p>\n\n<pre><code>def first_name?\n  first_name.present?\n  #If the user have a first_name Validates that the specified attributes is not blank\nend\n</code></pre>\n\n<p>Check <a href=\"http://apidock.com/rails/ActiveRecord/Validations/ClassMethods/validates_presence_of\" rel=\"nofollow noreferrer\">this</a> for reference.</p>\n"}], "owner": {"reputation": 16802, "user_id": 1235929, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/9f460ae7deb6fa19034c810a53b9fbac?s=128&d=identicon&r=PG", "display_name": "Dave", "link": "https://stackoverflow.com/users/1235929/dave"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 163, "favorite_count": 0, "accepted_answer_id": 42961668, "answer_count": 3, "score": 0, "last_activity_date": 1490214986, "creation_date": 1490212809, "question_id": 42961537, "link": "https://stackoverflow.com/questions/42961537/in-rails-how-do-i-write-a-validation-rule-to-validate-that-both-fields-should-b", "title": "In Rails, how do I write a validation rule to validate that both fields should be present or neither be?", "body": "<p>I'm using Ruby on Rails 5.  I have a model with a couple of fields</p>\n\n<pre><code>first_name\nlast_name\n</code></pre>\n\n<p>How do I write a validation rule to specify that if one is present, then the other one must be as well?  It is fine if they are both blank but basically they must either be present or neither be present.  How do I write a rule for that?</p>\n"}, {"tags": ["ruby", "macos", "rvm"], "answers": [{"comments": [{"owner": {"reputation": 1665, "user_id": 7747184, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/cbUSD.png?s=128&g=1", "display_name": "Leon Xiong", "link": "https://stackoverflow.com/users/7747184/leon-xiong"}, "edited": false, "score": 0, "creation_date": 1490213247, "post_id": 42961528, "comment_id": 73017524, "body": "Really appreciate your help! It confused me for a long time.  Then <code>rvm use default</code> could change back to the rvm Rubies."}], "tags": [], "owner": {"reputation": 1843, "user_id": 4067720, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a52c645614505bcaeb65a6c5199158c1?s=128&d=identicon&r=PG", "display_name": "Glyoko", "link": "https://stackoverflow.com/users/4067720/glyoko"}, "is_accepted": false, "score": 2, "last_activity_date": 1490212783, "creation_date": 1490212783, "answer_id": 42961528, "question_id": 42961483, "link": "https://stackoverflow.com/questions/42961483/ruby-2-0-0-on-mac-os-disappeared-after-installing-ruby-2-4-0-by-rvm/42961528#42961528", "title": "Ruby 2.0.0 on Mac OS disappeared after Installing Ruby 2.4.0 by rvm", "body": "<p><code>rvm list</code> shows you the list of rubies you've installed through rvm, but doesn't say anything about your system ruby. If you want to use your system ruby, try <code>rvm use system</code>, and then <code>which ruby</code> to confirm that you're using /usr/bin/ruby.</p>\n"}, {"comments": [{"owner": {"reputation": 1665, "user_id": 7747184, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/cbUSD.png?s=128&g=1", "display_name": "Leon Xiong", "link": "https://stackoverflow.com/users/7747184/leon-xiong"}, "edited": false, "score": 0, "creation_date": 1490213290, "post_id": 42961540, "comment_id": 73017543, "body": "Really appreciate your help! It confused me for a long time. Then <code>rvm use default</code> could change back to the rvm Rubies."}], "tags": [], "owner": {"reputation": 290, "user_id": 5753640, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/pgFc3.jpg?s=128&g=1", "display_name": "Cameron Roe", "link": "https://stackoverflow.com/users/5753640/cameron-roe"}, "is_accepted": false, "score": 1, "last_activity_date": 1490212817, "creation_date": 1490212817, "answer_id": 42961540, "question_id": 42961483, "link": "https://stackoverflow.com/questions/42961483/ruby-2-0-0-on-mac-os-disappeared-after-installing-ruby-2-4-0-by-rvm/42961540#42961540", "title": "Ruby 2.0.0 on Mac OS disappeared after Installing Ruby 2.4.0 by rvm", "body": "<p><code>rvm list</code> does not display the system Ruby version in the list. That command only displays the Ruby versions that were installed through RVM. If you want to switch back to the system version of Ruby, run the command <code>rvm use system</code>. After running that command, <code>ruby -v</code> should display that it is version 2.0.0.</p>\n"}], "owner": {"reputation": 1665, "user_id": 7747184, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/cbUSD.png?s=128&g=1", "display_name": "Leon Xiong", "link": "https://stackoverflow.com/users/7747184/leon-xiong"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 104, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1490213718, "creation_date": 1490212635, "last_edit_date": 1490213718, "question_id": 42961483, "link": "https://stackoverflow.com/questions/42961483/ruby-2-0-0-on-mac-os-disappeared-after-installing-ruby-2-4-0-by-rvm", "title": "Ruby 2.0.0 on Mac OS disappeared after Installing Ruby 2.4.0 by rvm", "body": "<p>I'm using mac, and Ruby 2.0.0 had been built in within Mac OS.</p>\n\n<p>I used rvm to install new version of Ruby, because I had heart that rvm could keep different versions of Ruby in computers and could well manage them. </p>\n\n<p>I used the command to install Ruby 2.4.0:</p>\n\n<pre><code>$ rvm install 2.4.0 --disable-binary\n</code></pre>\n\n<p>Then check the Ruby versions kept by rvm :</p>\n\n<pre><code>$ rvm list\n\nrvm rubies\n\n=* ruby-2.4.0 [ x86_64 ]\n\n# =&gt; - current\n# =* - current &amp;&amp; default\n#  * - default\n</code></pre>\n\n<p>There was only one version listed. Only Ruby 2.4.0.</p>\n\n<p>The Ruby 2.0.0 was not displayed. <strong>Why\uff1f</strong></p>\n\n<hr>\n\n<p><strong>The Ruby 2.4.0 can be found by <code>which ruby</code>: <code>~/.rvm/rubies/ruby-2.4.0/bin/ruby</code></strong></p>\n\n<p><strong>But I can find that the /library/Ruby contain the Ruby 2.0.0, it exists in my computer.</strong></p>\n\n<p><strong>Why Ruby 2.0.0 is not displayed by rvm?</strong></p>\n"}, {"tags": ["ruby", "datetime"], "comments": [{"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1490212609, "post_id": 42961441, "comment_id": 73017177, "body": "Welcome to Stack Overflow. Please read &quot;<a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a>&quot; and &quot;<a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>&quot;. Your question isn&#39;t a good fit for Stack Overflow. Where did you search, and what did you find and why didn&#39;t that help? Did you write code? If not, why? If so, where is the minimum code that demonstrates a specific problem you encountered?"}, {"owner": {"reputation": 1349, "user_id": 6163262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7f3655350c57cb94195d64808b7ba61?s=128&d=identicon&r=PG&f=1", "display_name": "whodini9", "link": "https://stackoverflow.com/users/6163262/whodini9"}, "edited": false, "score": 1, "creation_date": 1490213543, "post_id": 42961441, "comment_id": 73017678, "body": "I think you mean <code>0..23</code> ;)"}], "answers": [{"comments": [{"owner": {"reputation": 73209, "user_id": 290394, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d7908f05c89e965f6bc5308ad6f41256?s=128&d=identicon&r=PG", "display_name": "steenslag", "link": "https://stackoverflow.com/users/290394/steenslag"}, "edited": false, "score": 4, "creation_date": 1490220169, "post_id": 42962546, "comment_id": 73021026, "body": "Could not resist golfing: <code>&quot;%02d%02d&quot; % rand(1440).divmod(60)</code>"}], "tags": [], "owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "is_accepted": false, "score": 1, "last_activity_date": 1490216305, "creation_date": 1490216305, "answer_id": 42962546, "question_id": 42961441, "link": "https://stackoverflow.com/questions/42961441/simplest-way-to-get-a-random-military-time-in-ruby/42962546#42962546", "title": "Simplest way to get a random military time in ruby?", "body": "<p>I would start with something like this:</p>\n\n<pre><code>minutes = rand(1440)\n[minutes / 60, minutes % 60].map { |part| part.to_s.ljust(2, '0') }.join\n#=&gt; 0957\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1018, "user_id": 5163063, "user_type": "registered", "accept_rate": 59, "profile_image": "https://lh6.googleusercontent.com/-zT-tk41cKas/AAAAAAAAAAI/AAAAAAAAABM/LnD3dq1CvjY/photo.jpg?sz=128", "display_name": "David Kennell", "link": "https://stackoverflow.com/users/5163063/david-kennell"}, "is_accepted": false, "score": 0, "last_activity_date": 1490316234, "creation_date": 1490316234, "answer_id": 42989489, "question_id": 42961441, "link": "https://stackoverflow.com/questions/42961441/simplest-way-to-get-a-random-military-time-in-ruby/42989489#42989489", "title": "Simplest way to get a random military time in ruby?", "body": "<p>A datetime object can't be formatted in any sort of way; if you want it to look a particular way, you have to convert it to a string. I ended up just using the Faker gem:</p>\n\n<p><code>Faker::Time.between(1.days.ago, Date.today, :all).strftime(\"%H:%M\")</code></p>\n"}], "owner": {"reputation": 1018, "user_id": 5163063, "user_type": "registered", "accept_rate": 59, "profile_image": "https://lh6.googleusercontent.com/-zT-tk41cKas/AAAAAAAAAAI/AAAAAAAAABM/LnD3dq1CvjY/photo.jpg?sz=128", "display_name": "David Kennell", "link": "https://stackoverflow.com/users/5163063/david-kennell"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 70, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1490316234, "creation_date": 1490212475, "question_id": 42961441, "link": "https://stackoverflow.com/questions/42961441/simplest-way-to-get-a-random-military-time-in-ruby", "title": "Simplest way to get a random military time in ruby?", "body": "<p>I'm looking for something like<br>\n    <code>Time.sample</code><br>\n    <code>=&gt; 21:06</code>  </p>\n\n<p>Is there a way to get this without defining a custom method?</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1490212710, "post_id": 42961322, "comment_id": 73017222, "body": "Welcome to Stack Overflow. Please read &quot;<a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a>&quot; and &quot;<a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>&quot;. Your question isn&#39;t a good fit for Stack Overflow. Where did you search, and what did you find and why didn&#39;t that help? Did you write code? If not, why? If so, where is the minimum code that demonstrates a specific problem you encountered?"}], "answers": [{"comments": [{"owner": {"reputation": 12629, "user_id": 4739257, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/MdhEs.jpg?s=128&g=1", "display_name": "Ilya", "link": "https://stackoverflow.com/users/4739257/ilya"}, "edited": false, "score": 0, "creation_date": 1490212792, "post_id": 42961382, "comment_id": 73017268, "body": "So, the answer is NO :)"}, {"owner": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "reply_to_user": {"reputation": 12629, "user_id": 4739257, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/MdhEs.jpg?s=128&g=1", "display_name": "Ilya", "link": "https://stackoverflow.com/users/4739257/ilya"}, "edited": false, "score": 0, "creation_date": 1490213078, "post_id": 42961382, "comment_id": 73017424, "body": "@Ilya The answer is &quot;YES, BUT&quot;."}, {"owner": {"reputation": 12629, "user_id": 4739257, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/MdhEs.jpg?s=128&g=1", "display_name": "Ilya", "link": "https://stackoverflow.com/users/4739257/ilya"}, "edited": false, "score": 1, "creation_date": 1490213179, "post_id": 42961382, "comment_id": 73017487, "body": "I think the question is about converting a string to float with double zero in the end."}], "tags": [], "owner": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "is_accepted": true, "score": 3, "last_activity_date": 1490212826, "last_edit_date": 1490212826, "creation_date": 1490212273, "answer_id": 42961382, "question_id": 42961322, "link": "https://stackoverflow.com/questions/42961322/ruby-convert-2-decimal-string-into-a-number-and-keep-the-two-decimals/42961382#42961382", "title": "Ruby convert 2 decimal string into a number and keep the two decimals", "body": "<h1>Float</h1>\n\n<p>You can convert \"5565.80\" to a float :</p>\n\n<pre><code>value = \"5565.80\".to_f\n# 5565.8\n</code></pre>\n\n<p>And then display the value with two decimals :</p>\n\n<pre><code>'%.2f' % value\n# \"5565.80\"\n</code></pre>\n\n<p>A float has double-precision in Ruby, so your value will actually be :</p>\n\n<pre><code>5565.800000000000181898940354...\n</code></pre>\n\n<p>As a float, you cannot save exactly <code>5565.80</code>.</p>\n\n<h1>Exact values</h1>\n\n<h2>Integer</h2>\n\n<p>If you want exact values (e.g. for currency), you could use integers for cents :</p>\n\n<pre><code>\"5565.80\".delete('.').to_i\n# 556580\n</code></pre>\n\n<p>When you need the corresponding float, you could divide it by <code>100.0</code>.</p>\n\n<h2>Decimal</h2>\n\n<p>If you're working with a database, you could use <code>decimal(20,2)</code> or something equivalent.</p>\n\n<h2>BigDecimal</h2>\n\n<p>You could also use <a href=\"https://ruby-doc.org/stdlib-2.3.0/libdoc/bigdecimal/rdoc/BigDecimal.html\" rel=\"nofollow noreferrer\"><code>BigDecimal</code></a> :</p>\n\n<pre><code>require 'bigdecimal'\nBigDecimal.new(\"5565.80\")\n</code></pre>\n\n<p>It will save the exact value but will be much slower than int or float.</p>\n"}, {"tags": [], "owner": {"reputation": 1843, "user_id": 4067720, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a52c645614505bcaeb65a6c5199158c1?s=128&d=identicon&r=PG", "display_name": "Glyoko", "link": "https://stackoverflow.com/users/4067720/glyoko"}, "is_accepted": false, "score": 0, "last_activity_date": 1490212528, "creation_date": 1490212528, "answer_id": 42961460, "question_id": 42961322, "link": "https://stackoverflow.com/questions/42961322/ruby-convert-2-decimal-string-into-a-number-and-keep-the-two-decimals/42961460#42961460", "title": "Ruby convert 2 decimal string into a number and keep the two decimals", "body": "<p>You can use <a href=\"https://ruby-doc.org/core-2.1.2/Float.html#method-i-round\" rel=\"nofollow noreferrer\"><code>#round</code></a>.</p>\n\n<p>The argument to round is how many decimals you want to round to. Some examples:</p>\n\n<pre><code>5565.80.round(2) # =&gt; 5565.8 # omits trailing 0's\n5565.00.round(2) # =&gt; 5565.0 # only keeps the decimal to show that this is a float\n5565.79.round(2) # =&gt; 5565.79 # rounds to two digits\n5565.123.round(3) # =&gt; 5565.123 # rounds to three decimal places, so nothing is lost\n5565.123.round(2) # =&gt; 5565.12 # drops the 3\n5565.129.round(2) # =&gt; 5565.13 # drops the 9 and rounds up\n</code></pre>\n"}], "owner": {"reputation": 8818, "user_id": 2714301, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/23c7ba1f14e71e14f65b7b95516b0f19?s=128&d=identicon&r=PG", "display_name": "Jwan622", "link": "https://stackoverflow.com/users/2714301/jwan622"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2039, "favorite_count": 0, "accepted_answer_id": 42961382, "answer_count": 2, "score": 0, "last_activity_date": 1490216221, "creation_date": 1490212049, "last_edit_date": 1490216221, "question_id": 42961322, "link": "https://stackoverflow.com/questions/42961322/ruby-convert-2-decimal-string-into-a-number-and-keep-the-two-decimals", "title": "Ruby convert 2 decimal string into a number and keep the two decimals", "body": "<p>I want to convert \"5565.80\" to 5565.80 and \"5565.00\" to 5565.00. The issue with <code>to_f</code> is that it removes the last 0 when the 2 decimals are <code>.00</code>. Is there a single way to do both?</p>\n"}, {"tags": ["ruby", "regex"], "comments": [{"owner": {"reputation": 481662, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 0, "creation_date": 1490211718, "post_id": 42961158, "comment_id": 73016612, "body": "If you consider some chars as word boundaries add them as alternatives - <code>&#47;(?&lt;=#|\\b)#{string}(?=#|\\b)&#47;</code>"}, {"owner": {"reputation": 1175, "user_id": 1487006, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/dbe9ed99a12fd3fa2f8dcd33e303eda0?s=128&d=identicon&r=PG", "display_name": "baarkerlounger", "link": "https://stackoverflow.com/users/1487006/baarkerlounger"}, "reply_to_user": {"reputation": 481662, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 0, "creation_date": 1490211799, "post_id": 42961158, "comment_id": 73016674, "body": "WiktorStribi\u017cew it&#39;s not so much that I consider some chars as word boundaries, as I said the # could be any other word boundary including for example -, I&#39;ll update the question."}, {"owner": {"reputation": 481662, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 0, "creation_date": 1490212053, "post_id": 42961158, "comment_id": 73016832, "body": "Remove <code>\\b</code> then, why do you need them?"}, {"owner": {"reputation": 1175, "user_id": 1487006, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/dbe9ed99a12fd3fa2f8dcd33e303eda0?s=128&d=identicon&r=PG", "display_name": "baarkerlounger", "link": "https://stackoverflow.com/users/1487006/baarkerlounger"}, "reply_to_user": {"reputation": 481662, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 0, "creation_date": 1490212212, "post_id": 42961158, "comment_id": 73016921, "body": "Well, look at my test cases - I want to match a string surrounded by word boundary characters so I need the <code>\\b</code> - my problem only comes when my interpolated string itself already contains a <code>\\b</code> character."}, {"owner": {"reputation": 1175, "user_id": 1487006, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/dbe9ed99a12fd3fa2f8dcd33e303eda0?s=128&d=identicon&r=PG", "display_name": "baarkerlounger", "link": "https://stackoverflow.com/users/1487006/baarkerlounger"}, "reply_to_user": {"reputation": 481662, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 0, "creation_date": 1490212351, "post_id": 42961158, "comment_id": 73017008, "body": "Sorry my comment didn&#39;t make clear, I don&#39;t want to match the interpolated string if it&#39;s just contained within another word, I want there to be at least 1 <code>\\b</code> character after it."}, {"owner": {"reputation": 481662, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 0, "creation_date": 1490212379, "post_id": 42961158, "comment_id": 73017024, "body": "Ok, maybe <code>&#47;(?&lt;!\\w)#{string}(?!\\w)&#47;</code> will work?"}, {"owner": {"reputation": 43580, "user_id": 1020526, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/Scjj8.jpg?s=128&g=1", "display_name": "revo", "link": "https://stackoverflow.com/users/1020526/revo"}, "edited": false, "score": 0, "creation_date": 1490212566, "post_id": 42961158, "comment_id": 73017139, "body": "<code>\\b</code> doesn&#39;t match a position where two non-word characters see each other. In this case <code>-</code> and <code>#</code>. So normally <code>test-\\b</code> fails."}, {"owner": {"reputation": 1175, "user_id": 1487006, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/dbe9ed99a12fd3fa2f8dcd33e303eda0?s=128&d=identicon&r=PG", "display_name": "baarkerlounger", "link": "https://stackoverflow.com/users/1487006/baarkerlounger"}, "reply_to_user": {"reputation": 481662, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 0, "creation_date": 1490214563, "post_id": 42961158, "comment_id": 73018185, "body": "@WiktorStribi\u017cew thanks that solves my problem. If you want to post it as an answer I&#39;ll close this."}], "answers": [{"tags": [], "owner": {"reputation": 481662, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "is_accepted": true, "score": 3, "last_activity_date": 1506269213, "last_edit_date": 1506269213, "creation_date": 1490214850, "answer_id": 42962140, "question_id": 42961158, "link": "https://stackoverflow.com/questions/42961158/ruby-regex-matching-a-string-surrounded-by-word-boundary-chars-when-the-string-i/42962140#42962140", "title": "Ruby regex matching a string surrounded by word boundary chars when the string itself ends in a word boundary", "body": "<p>Since <code>\\b</code> meaning is context-dependent, you need to use lookaround-based boundaries in your regex. As you want to match your keywords in between non-word chars, or start/end of string positions, you may use</p>\n\n<pre><code>/(?&lt;!\\w)#{Regexp.escape(string)}(?!\\w)/\n</code></pre>\n\n<p>See a <a href=\"http://ideone.com/hRYL88\" rel=\"nofollow noreferrer\">Ruby demo</a></p>\n\n<p><strong>Details</strong></p>\n\n<ul>\n<li><code>(?&lt;!\\w)</code> - there must not be a word char right before the search string</li>\n<li><code>#{Regexp.escape(string)}</code>  - the search string must be escaped so that all special chars inside were treated as literal chars</li>\n<li><code>(?!\\w)</code> - there must be no word char right after the search word.</li>\n</ul>\n"}], "owner": {"reputation": 1175, "user_id": 1487006, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/dbe9ed99a12fd3fa2f8dcd33e303eda0?s=128&d=identicon&r=PG", "display_name": "baarkerlounger", "link": "https://stackoverflow.com/users/1487006/baarkerlounger"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1200, "favorite_count": 0, "accepted_answer_id": 42962140, "answer_count": 1, "score": 1, "last_activity_date": 1506269213, "creation_date": 1490211502, "last_edit_date": 1490212160, "question_id": 42961158, "link": "https://stackoverflow.com/questions/42961158/ruby-regex-matching-a-string-surrounded-by-word-boundary-chars-when-the-string-i", "title": "Ruby regex matching a string surrounded by word boundary chars when the string itself ends in a word boundary", "body": "<p>My regex: <code>/\\b+#{string}\\b+/</code> where string = 'test-'</p>\n\n<p>My test case: <code>#test-#1</code></p>\n\n<p>I want the regex to match <code>test-</code>. If my test string doesn't end in a word boundary character this works fine but if it does it breaks.</p>\n\n<p>The # chars could be any other word boundary characters also, so another example would be:</p>\n\n<p><code>-test--1</code> where I would still only want to match <code>test-</code></p>\n\n<p>Counter example case that works:</p>\n\n<p>regex: <code>/\\b+#{string}\\b+/</code> where string = 'test'</p>\n\n<p>test case: <code>#test#1</code></p>\n"}, {"tags": ["ruby", "forms", "web-crawler", "mechanize"], "comments": [{"owner": {"reputation": 47898, "user_id": 966023, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/917fcb4327159076f752c0c3c3fddfbb?s=128&d=identicon&r=PG", "display_name": "pguardiario", "link": "https://stackoverflow.com/users/966023/pguardiario"}, "edited": false, "score": 0, "creation_date": 1490248795, "post_id": 42960977, "comment_id": 73029846, "body": "If you look at the action of that form it&#39;s a javascript function (which isn&#39;t really valid)."}, {"owner": {"reputation": 3, "user_id": 6527434, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/36d37cfd5bf4eb5005de3ba33a49c2e7?s=128&d=identicon&r=PG&f=1", "display_name": "Aleksey Redkin", "link": "https://stackoverflow.com/users/6527434/aleksey-redkin"}, "reply_to_user": {"reputation": 47898, "user_id": 966023, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/917fcb4327159076f752c0c3c3fddfbb?s=128&d=identicon&r=PG", "display_name": "pguardiario", "link": "https://stackoverflow.com/users/966023/pguardiario"}, "edited": false, "score": 0, "creation_date": 1490339760, "post_id": 42960977, "comment_id": 73077580, "body": "Oh, I see. Is there anything I could do with it or it&#39;s something like defence from web crawlers?"}, {"owner": {"reputation": 47898, "user_id": 966023, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/917fcb4327159076f752c0c3c3fddfbb?s=128&d=identicon&r=PG", "display_name": "pguardiario", "link": "https://stackoverflow.com/users/966023/pguardiario"}, "edited": false, "score": 0, "creation_date": 1490346625, "post_id": 42960977, "comment_id": 73081000, "body": "No, it&#39;s an inexperienced web developer trying to do something tricky."}], "owner": {"reputation": 3, "user_id": 6527434, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/36d37cfd5bf4eb5005de3ba33a49c2e7?s=128&d=identicon&r=PG&f=1", "display_name": "Aleksey Redkin", "link": "https://stackoverflow.com/users/6527434/aleksey-redkin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 213, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1490210952, "creation_date": 1490210952, "question_id": 42960977, "link": "https://stackoverflow.com/questions/42960977/mechanize-unsupported-scheme-after-form-submit", "title": "Mechanize Unsupported Scheme after form submit", "body": "<p>I follow the <a href=\"http://mechanize.rubyforge.org/GUIDE_rdoc.html\" rel=\"nofollow noreferrer\">Mechanize guide</a>, but can't submit form.\nMy idea is to get invoice by a query through Telegram bot. Since there is a captcha I thought that I could read captcha image src with Mechanize to send that image through Telegram. Than, I would input digits that I can see on image and send in back to Mechanize to fill second input field. \nCode:</p>\n\n<pre><code>require 'mechanize'\n\nagent = Mechanize.new\n\nagent.user_agent_alias = 'Windows Chrome'\n\npage = agent.get('https://ercdmd.ru/?gpay')\n\nform = page.forms.first\n\nform.gpay_abon = '04-0000000000'\n\ncaptcha_url = \"https://ercdmd.ru/captcha.php?time=#{Time.now.to_i}000\"\n\np captcha_url\n\ncaptcha = gets.chomp\n\nform.captcha = captcha\n\npage = agent.submit(form, form.buttons.first)\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>/home/vagrant/.rvm/gems/ruby-2.1.0/gems/mechanize-2.7.5/lib/mechanize/http/agent.rb:177:in `block (2 levels) in initialize': Mechanize::UnsupportedSchemeError (Mechanize::UnsupportedSchemeError) from /home/vagrant/.rvm/gems/ruby-2.1.0/gems/mechanize-2.7.5/lib/mechanize/http/agent.rb:645:in `call' from /home/vagrant/.rvm/gems/ruby-2.1.0/gems/mechanize-2.7.5/lib/mechanize/http/agent.rb:645:in `resolve' from /home/vagrant/.rvm/gems/ruby-2.1.0/gems/mechanize-2.7.5/lib/mechanize/http/agent.rb:234:in `fetch' from /home/vagrant/.rvm/gems/ruby-2.1.0/gems/mechanize-2.7.5/lib/mechanize.rb:1323:in `post_form' from /home/vagrant/.rvm/gems/ruby-2.1.0/gems/mechanize-2.7.5/lib/mechanize.rb:584:in `submit' from parser.rb:26:in `&lt;main&gt;'\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "model-view-controller"], "comments": [{"owner": {"reputation": 2116, "user_id": 6780663, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9207ba3b9163582570078b687f9b2792?s=128&d=identicon&r=PG&f=1", "display_name": "Alejandro Montilla", "link": "https://stackoverflow.com/users/6780663/alejandro-montilla"}, "edited": false, "score": 0, "creation_date": 1490210591, "post_id": 42960775, "comment_id": 73015981, "body": "What shows <code>rake routes</code>?"}, {"owner": {"reputation": 334, "user_id": 6865687, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/9Ps84.jpg?s=128&g=1", "display_name": "Cesar", "link": "https://stackoverflow.com/users/6865687/cesar"}, "reply_to_user": {"reputation": 2116, "user_id": 6780663, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9207ba3b9163582570078b687f9b2792?s=128&d=identicon&r=PG&f=1", "display_name": "Alejandro Montilla", "link": "https://stackoverflow.com/users/6780663/alejandro-montilla"}, "edited": false, "score": 0, "creation_date": 1490210662, "post_id": 42960775, "comment_id": 73016010, "body": "Updated with rake routes command"}, {"owner": {"reputation": 2116, "user_id": 6780663, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9207ba3b9163582570078b687f9b2792?s=128&d=identicon&r=PG&f=1", "display_name": "Alejandro Montilla", "link": "https://stackoverflow.com/users/6780663/alejandro-montilla"}, "edited": false, "score": 0, "creation_date": 1490210874, "post_id": 42960775, "comment_id": 73016132, "body": "It migth be the <code>training_bookings_path(@training)</code> that requieres a <code>:training_id</code>"}, {"owner": {"reputation": 334, "user_id": 6865687, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/9Ps84.jpg?s=128&g=1", "display_name": "Cesar", "link": "https://stackoverflow.com/users/6865687/cesar"}, "reply_to_user": {"reputation": 2116, "user_id": 6780663, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9207ba3b9163582570078b687f9b2792?s=128&d=identicon&r=PG&f=1", "display_name": "Alejandro Montilla", "link": "https://stackoverflow.com/users/6780663/alejandro-montilla"}, "edited": false, "score": 0, "creation_date": 1490211224, "post_id": 42960775, "comment_id": 73016336, "body": "how should i implemente that? training_bookings_path(@training, :training_id) ?"}, {"owner": {"reputation": 2116, "user_id": 6780663, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9207ba3b9163582570078b687f9b2792?s=128&d=identicon&r=PG&f=1", "display_name": "Alejandro Montilla", "link": "https://stackoverflow.com/users/6780663/alejandro-montilla"}, "edited": false, "score": 0, "creation_date": 1490211473, "post_id": 42960775, "comment_id": 73016493, "body": "You need a @booking instance, do you have one?"}, {"owner": {"reputation": 334, "user_id": 6865687, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/9Ps84.jpg?s=128&g=1", "display_name": "Cesar", "link": "https://stackoverflow.com/users/6865687/cesar"}, "reply_to_user": {"reputation": 2116, "user_id": 6780663, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9207ba3b9163582570078b687f9b2792?s=128&d=identicon&r=PG&f=1", "display_name": "Alejandro Montilla", "link": "https://stackoverflow.com/users/6780663/alejandro-montilla"}, "edited": false, "score": 0, "creation_date": 1490219115, "post_id": 42960775, "comment_id": 73020543, "body": "where do i have to instace @booking? i did not understand you :-("}], "answers": [{"tags": [], "owner": {"reputation": 812, "user_id": 2394842, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9089757e5553d83415a6c3add8a3c2e9?s=128&d=identicon&r=PG", "display_name": "MaicolBen", "link": "https://stackoverflow.com/users/2394842/maicolben"}, "is_accepted": false, "score": 0, "last_activity_date": 1490227667, "creation_date": 1490227667, "answer_id": 42964925, "question_id": 42960775, "link": "https://stackoverflow.com/questions/42960775/showing-a-general-list-of-booked-users/42964925#42964925", "title": "Showing a general list of booked users", "body": "<p>In <code>_general_list.html.erb</code> you should change <code>@training</code> for <code>training</code> </p>\n"}], "owner": {"reputation": 334, "user_id": 6865687, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/9Ps84.jpg?s=128&g=1", "display_name": "Cesar", "link": "https://stackoverflow.com/users/6865687/cesar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 76, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1490227667, "creation_date": 1490210248, "last_edit_date": 1592644375, "question_id": 42960775, "link": "https://stackoverflow.com/questions/42960775/showing-a-general-list-of-booked-users", "title": "Showing a general list of booked users", "body": "<p>I created an application where users can book a hour of training. I want to give to admin users the option to see a general list of booked users in every training hour.</p>\n<p>Im trying to create this index, but it gives me the following error:</p>\n<blockquote>\n<p>ActionController::UrlGenerationError in Trainings#index</p>\n<p>No route\nmatches {:action=&gt;&quot;index&quot;, :controller=&gt;&quot;bookings&quot;, :training_id=&gt;nil}\nmissing required keys: [:training_id]</p>\n</blockquote>\n<p>Im trying to create this button at index of training, like this:</p>\n<p>training index.html.erb view:</p>\n<pre><code>&lt;h1&gt;Hours&lt;/h1&gt;\n\n&lt;ul class=&quot;trainings&quot;&gt;\n  &lt;% @trainings.each do |training| %&gt;\n  &lt;li&gt;\n    &lt;%= link_to training.hour, training_path(training) %&gt;\n  &lt;/li&gt;\n  &lt;% end %&gt;\n&lt;/ul&gt;\n\n&lt;%= render 'bookings/general_list' if logged_in? %&gt;\n</code></pre>\n<p>_general_list.html.erb view:</p>\n<pre><code>&lt;ul class=&quot;bookings&quot;&gt;\n&lt;% @trainings.each do |training| %&gt;\n&lt;%= link_to &quot;General list&quot;, training_bookings_path(@training), class: &quot;btn btn-primary&quot;  %&gt;    \n&lt;% end %&gt;\n&lt;/ul&gt;\n</code></pre>\n<p>I would like to now how i can get this done, i think my idea is not working.</p>\n<p>my routes.rb:</p>\n<pre><code>Rails.application.routes.draw do\n\n  root 'static_pages#home'\n  get    '/signup',               to: 'users#new'\n  get    '/contact',              to: 'static_pages#contact'\n  get    '/about',                to: 'static_pages#about'\n  get    '/login',                to: 'sessions#new'\n  post   '/login',                to: 'sessions#create'\n  delete '/logout',               to: 'sessions#destroy'\n\n\n  resources :account_activations, only: [:edit]\n  resources :password_resets,     only: [:new, :create, :edit, :update]\n  resources :users\n  resources :trainings do\n    resources :bookings\n  end\nend\n</code></pre>\n<p>rake routes command:</p>\n<pre><code>                 Prefix Verb   URI Pattern                                         Controller#Action\n                   root GET    /                                                   static_pages#home\n                 signup GET    /signup(.:format)                                   users#new\n                contact GET    /contact(.:format)                                  static_pages#contact\n                  about GET    /about(.:format)                                    static_pages#about\n                  login GET    /login(.:format)                                    sessions#new\n                        POST   /login(.:format)                                    sessions#create\n                 logout DELETE /logout(.:format)                                   sessions#destroy\nedit_account_activation GET    /account_activations/:id/edit(.:format)             account_activations#edit\n        password_resets POST   /password_resets(.:format)                          password_resets#create\n     new_password_reset GET    /password_resets/new(.:format)                      password_resets#new\n    edit_password_reset GET    /password_resets/:id/edit(.:format)                 password_resets#edit\n         password_reset PATCH  /password_resets/:id(.:format)                      password_resets#update\n                        PUT    /password_resets/:id(.:format)                      password_resets#update\n                  users GET    /users(.:format)                                    users#index\n                        POST   /users(.:format)                                    users#create\n               new_user GET    /users/new(.:format)                                users#new\n              edit_user GET    /users/:id/edit(.:format)                           users#edit\n                   user GET    /users/:id(.:format)                                users#show\n                        PATCH  /users/:id(.:format)                                users#update\n                        PUT    /users/:id(.:format)                                users#update\n                        DELETE /users/:id(.:format)                                users#destroy\n      training_bookings GET    /trainings/:training_id/bookings(.:format)          bookings#index\n                        POST   /trainings/:training_id/bookings(.:format)          bookings#create\n   new_training_booking GET    /trainings/:training_id/bookings/new(.:format)      bookings#new\n  edit_training_booking GET    /trainings/:training_id/bookings/:id/edit(.:format) bookings#edit\n       training_booking GET    /trainings/:training_id/bookings/:id(.:format)      bookings#show\n                        PATCH  /trainings/:training_id/bookings/:id(.:format)      bookings#update\n                        PUT    /trainings/:training_id/bookings/:id(.:format)      bookings#update\n                        DELETE /trainings/:training_id/bookings/:id(.:format)      bookings#destroy\n              trainings GET    /trainings(.:format)                                trainings#index\n                        POST   /trainings(.:format)                                trainings#create\n           new_training GET    /trainings/new(.:format)                            trainings#new\n          edit_training GET    /trainings/:id/edit(.:format)                       trainings#edit\n               training GET    /trainings/:id(.:format)                            trainings#show\n                        PATCH  /trainings/:id(.:format)                            trainings#update\n                        PUT    /trainings/:id(.:format)                            trainings#update\n                        DELETE /trainings/:id(.:format)                            trainings#destroy\n</code></pre>\n<p>Thanks.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "activerecord"], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 7696311, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/73b9905e51a2e3b780671507a484ae04?s=128&d=identicon&r=PG&f=1", "display_name": "Akash Ghosh", "link": "https://stackoverflow.com/users/7696311/akash-ghosh"}, "edited": false, "score": 0, "creation_date": 1490211323, "post_id": 42960687, "comment_id": 73016403, "body": "yes.. I have got that but how to fetch balance of two user and perform subtraction and addition that i m not able to figure out."}, {"owner": {"reputation": 2116, "user_id": 6780663, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9207ba3b9163582570078b687f9b2792?s=128&d=identicon&r=PG&f=1", "display_name": "Alejandro Montilla", "link": "https://stackoverflow.com/users/6780663/alejandro-montilla"}, "reply_to_user": {"reputation": 13, "user_id": 7696311, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/73b9905e51a2e3b780671507a484ae04?s=128&d=identicon&r=PG&f=1", "display_name": "Akash Ghosh", "link": "https://stackoverflow.com/users/7696311/akash-ghosh"}, "edited": false, "score": 0, "creation_date": 1490212339, "post_id": 42960687, "comment_id": 73017000, "body": "That is more related with business logic, maybe you need to post another question with the rule that you want to implement in you <code>before_save</code> method.. so we can help you with that. If this answer is satisfactory please accept it (Click the checkmark under this post)"}], "tags": [], "owner": {"reputation": 2116, "user_id": 6780663, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9207ba3b9163582570078b687f9b2792?s=128&d=identicon&r=PG&f=1", "display_name": "Alejandro Montilla", "link": "https://stackoverflow.com/users/6780663/alejandro-montilla"}, "is_accepted": false, "score": 2, "last_activity_date": 1490209932, "creation_date": 1490209932, "answer_id": 42960687, "question_id": 42960479, "link": "https://stackoverflow.com/questions/42960479/how-can-i-update-another-models-data-before-save-of-one-model/42960687#42960687", "title": "How can i update another model&#39;s data before save of one model", "body": "<p>You can use <code>before_save</code> callback:</p>\n\n<pre><code>class User &lt; ApplicationRecord\n\n  before_save :do_something_transaction\n\n  def do_something_transaction\n    #here you update your transanction\n  end\n\nend\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 13, "user_id": 7696311, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/73b9905e51a2e3b780671507a484ae04?s=128&d=identicon&r=PG&f=1", "display_name": "Akash Ghosh", "link": "https://stackoverflow.com/users/7696311/akash-ghosh"}, "edited": false, "score": 0, "creation_date": 1490371138, "post_id": 42964209, "comment_id": 73097356, "body": "i am getting and error in this code.    syntax error, unexpected tIVAR, expecting &#39;:&#39;  @receiver.update(balance: balance + amount)"}, {"owner": {"reputation": 499, "user_id": 5636930, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-L0BF3IxhZYw/AAAAAAAAAAI/AAAAAAAAAPM/RAOVvQpPSEA/photo.jpg?sz=128", "display_name": "amrrbakry", "link": "https://stackoverflow.com/users/5636930/amrrbakry"}, "reply_to_user": {"reputation": 13, "user_id": 7696311, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/73b9905e51a2e3b780671507a484ae04?s=128&d=identicon&r=PG&f=1", "display_name": "Akash Ghosh", "link": "https://stackoverflow.com/users/7696311/akash-ghosh"}, "edited": false, "score": 0, "creation_date": 1490380612, "post_id": 42964209, "comment_id": 73103140, "body": "@KaushikDas try this: <code>@sender.update(balance: @sender.balance - amount)</code> and <code>@receiver.update(balance: @receiver.balance + amount)</code>"}, {"owner": {"reputation": 13, "user_id": 7696311, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/73b9905e51a2e3b780671507a484ae04?s=128&d=identicon&r=PG&f=1", "display_name": "Akash Ghosh", "link": "https://stackoverflow.com/users/7696311/akash-ghosh"}, "edited": false, "score": 0, "creation_date": 1490387404, "post_id": 42964209, "comment_id": 73106744, "body": "Yes i did the same in different way... Figured it out... :)"}], "tags": [], "owner": {"reputation": 499, "user_id": 5636930, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-L0BF3IxhZYw/AAAAAAAAAAI/AAAAAAAAAPM/RAOVvQpPSEA/photo.jpg?sz=128", "display_name": "amrrbakry", "link": "https://stackoverflow.com/users/5636930/amrrbakry"}, "is_accepted": false, "score": 0, "last_activity_date": 1490381365, "last_edit_date": 1490381365, "creation_date": 1490223555, "answer_id": 42964209, "question_id": 42960479, "link": "https://stackoverflow.com/questions/42960479/how-can-i-update-another-models-data-before-save-of-one-model/42964209#42964209", "title": "How can i update another model&#39;s data before save of one model", "body": "<p>Fetch balances of both sender and receiver like so:</p>\n\n<pre><code>@sender = User.find_by(id: user_id)\n@receiver = User.find_by(email: user_email)\n</code></pre>\n\n<p>And to change balances use ActiveRecord <code>update</code>:</p>\n\n<pre><code>if @sender.has_sufficient_balance?(amount) # make sure sender has sufficient balance first!\n  @sender.update(balance: @sender.balance - amount)\n  @receiver.update(balance: @receiver.balance + amount)\nend\n</code></pre>\n\n<p>You can use a <code>before_save</code> callback as Alejandro Montilla suggested to do this.</p>\n\n<p>Also, use <code>decimal</code> data type for <code>amount</code> and <code>balance</code> instead of <code>integer</code></p>\n"}, {"tags": [], "owner": {"reputation": 639, "user_id": 7046734, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RQ62P.jpg?s=128&g=1", "display_name": "Mayank", "link": "https://stackoverflow.com/users/7046734/mayank"}, "is_accepted": true, "score": 2, "last_activity_date": 1490247785, "creation_date": 1490247785, "answer_id": 42968112, "question_id": 42960479, "link": "https://stackoverflow.com/questions/42960479/how-can-i-update-another-models-data-before-save-of-one-model/42968112#42968112", "title": "How can i update another model&#39;s data before save of one model", "body": "<p>You can try this code. For creating transaction from user call </p>\n\n<pre><code>current_user.transaction.new(transaction_params)\n</code></pre>\n\n<p>Now in model transaction.rb file </p>\n\n<pre><code>class Transaction &lt; ApplicationRecord\n  belongs_to :user\n  before_save :check_and_update_balance\n\n  def check_and_update_balance\n    ## since user or sender is already there no need of sender\n    receiver = User.find_by(email: user_email)\n    if user.has_sufficient_balance?(amount) and receiver.present?\n       user.update_attributes(balance: balance - amount)\n       receiver.update_attributes(balance: balance + amount)    \n    end\n  end\nend\n</code></pre>\n\n<p>HOPE this Helps !!</p>\n"}], "owner": {"reputation": 13, "user_id": 7696311, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/73b9905e51a2e3b780671507a484ae04?s=128&d=identicon&r=PG&f=1", "display_name": "Akash Ghosh", "link": "https://stackoverflow.com/users/7696311/akash-ghosh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1916, "favorite_count": 2, "accepted_answer_id": 42968112, "answer_count": 3, "score": 1, "last_activity_date": 1490381365, "creation_date": 1490209228, "last_edit_date": 1490219109, "question_id": 42960479, "link": "https://stackoverflow.com/questions/42960479/how-can-i-update-another-models-data-before-save-of-one-model", "title": "How can i update another model&#39;s data before save of one model", "body": "<p>I am making a wallet application in rails. I don't know how can i update balance field in user model before insertion of a new record in transaction.\nWhen user is sending money <code>user_id</code> is taken from hidden field and email has to be entered of receiver and <code>user_id</code>,<code>user_email</code>,<code>amount</code> is stored in transaction table.\nHow to deduct money from one record and add to another. Can i use sql update to do that? </p>\n\n<p>This is user model</p>\n\n<pre><code>class User &lt; ApplicationRecord\n\n     devise :database_authenticatable, :registerable,\n     :recoverable, :rememberable, :trackable, :validatable\n\n     has_many :transactions\nend\n</code></pre>\n\n<p><strong>This is user table balance in included in this field.</strong></p>\n\n<pre><code>create_table \"users\", force: :cascade do |t|\n t.string   \"email\"    \n t.string   \"encrypted_password\"   \n t.string   \"reset_password_token\"\n t.datetime \"reset_password_sent_at\"\n t.datetime \"remember_created_at\"\n t.integer  \"sign_in_count\"        \n t.datetime \"current_sign_in_at\"\n t.datetime \"last_sign_in_at\"\n t.string   \"current_sign_in_ip\"\n t.string   \"last_sign_in_ip\"\n t.datetime \"created_at\"                         \n t.datetime \"updated_at\"                      \n t.string   \"Firstname\"            \n t.string   \"Lastname\"               \n t.date     \"Dob\"\nt.integer  \"Balance\"\n</code></pre>\n\n<p>end</p>\n\n<pre><code>class Transaction &lt; ApplicationRecord\n\n     belongs_to :user\nend\n</code></pre>\n\n<p><strong>This is Transaction table. User_id is for sender and user_email is for receiver</strong></p>\n\n<pre><code>create_table \"transactions\", force: :cascade do |t|\n  t.integer  \"user_id\"\n  t.string   \"user_email\"\n  t.integer  \"amount\"\n  t.datetime \"created_at\"\n  t.datetime \"updated_at\"\nend\n</code></pre>\n"}, {"tags": ["ruby", "testing", "rspec", "automated-tests"], "answers": [{"tags": [], "owner": {"reputation": 45322, "user_id": 421705, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/581b1760881c962648f99d6040d41829?s=128&d=identicon&r=PG", "display_name": "Holger Just", "link": "https://stackoverflow.com/users/421705/holger-just"}, "is_accepted": true, "score": 2, "last_activity_date": 1490209399, "creation_date": 1490209399, "answer_id": 42960537, "question_id": 42960394, "link": "https://stackoverflow.com/questions/42960394/why-do-rspec-filter-hooks-only-work-with-arrow-syntax/42960537#42960537", "title": "Why do rspec filter hooks only work with arrow syntax?", "body": "<p>Your first example</p>\n\n<pre><code>{'broken' =&gt; true}\n# =&gt; {\"broken\" =&gt; true}\n</code></pre>\n\n<p>creates a Hash with a String as the key. When you use the colon syntax however, the hash will have a Symbol key:</p>\n\n<pre><code>{'broken': true} # This is only valid syntax since Ruby 2.2\n# =&gt; {:broken =&gt; true}\n\n{broken: true}\n# =&gt; {:broken =&gt; true}\n</code></pre>\n\n<p>Since you are specifically excluding specs marked with a String key, the symbol won't match.</p>\n\n<p>You can either change your rspec config to</p>\n\n<pre><code>RSpec.configure do |c|\n  c.filter_run_excluding(:broken)\nend\n</code></pre>\n\n<p>or continue to use String keys in your specs.</p>\n\n<p><em>As a tiny post scriptum: the colon-syntax with a quoted string you used in your first spec example is only valid since Ruby 2.2. Older Ruby versions produce the syntax error you quote in your (edited) question.</em></p>\n"}], "owner": {"reputation": 1893, "user_id": 1787434, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/85f5a5c15e84e4a9aec84dc8be822010?s=128&d=identicon&r=PG", "display_name": "the_storyteller", "link": "https://stackoverflow.com/users/1787434/the-storyteller"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 71, "favorite_count": 0, "accepted_answer_id": 42960537, "answer_count": 1, "score": 1, "last_activity_date": 1490209399, "creation_date": 1490208935, "question_id": 42960394, "link": "https://stackoverflow.com/questions/42960394/why-do-rspec-filter-hooks-only-work-with-arrow-syntax", "title": "Why do rspec filter hooks only work with arrow syntax?", "body": "<p>In RSpec tests, I'm using hooks/flags to run subsets of tests, similar to what is shown in the <a href=\"https://www.relishapp.com/rspec/rspec-core/v/3-0/docs/filtering/exclusion-filters\" rel=\"nofollow noreferrer\">examples</a></p>\n\n<pre><code># spec_helper.rb\nRSpec.configure do |c|\n  c.filter_run_excluding('broken')\nend\n</code></pre>\n\n<p>This syntax works</p>\n\n<pre><code># my_spec.rb\ndescribe 'broken test', 'broken' =&gt; true do\n  ...\nend\n</code></pre>\n\n<p>This syntax fails with error <code>syntax error, unexpected ':', expecting end-of-input</code></p>\n\n<pre><code># my_spec.rb\ndescribe 'broken test', 'broken': true do\n  ...\nend\n</code></pre>\n\n<p>What is the difference between them which causes one to work and the other to fail?</p>\n"}, {"tags": ["ruby", "excel", "cucumber"], "comments": [{"owner": {"reputation": 7644, "user_id": 3648361, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Y1aeF.jpg?s=128&g=1", "display_name": "Vasily Ryabov", "link": "https://stackoverflow.com/users/3648361/vasily-ryabov"}, "edited": false, "score": 0, "creation_date": 1491033937, "post_id": 42960361, "comment_id": 73384879, "body": "RAutomation should support MS UI Automation (&quot;ms_uia&quot; adapter), so it can automate ribbon controls. But if you consider other languages <a href=\"http://pywinauto.github.io/\" rel=\"nofollow noreferrer\">pywinauto</a> also can do that. See <a href=\"https://github.com/pywinauto/pywinauto/blob/master/examples/mspaint.py\" rel=\"nofollow noreferrer\">MS Paint automation example</a>. The core concept is described in <a href=\"https://pywinauto.readthedocs.io/en/latest/getting_started.html\" rel=\"nofollow noreferrer\">the docs</a>."}, {"owner": {"reputation": 7644, "user_id": 3648361, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Y1aeF.jpg?s=128&g=1", "display_name": "Vasily Ryabov", "link": "https://stackoverflow.com/users/3648361/vasily-ryabov"}, "edited": false, "score": 0, "creation_date": 1491034044, "post_id": 42960361, "comment_id": 73384901, "body": "As far as I know RAutomation is not so tolerant to different Ruby versions, and tech support is not so friendly (my student reported a bug but it was closed without fixing)."}, {"owner": {"reputation": 7644, "user_id": 3648361, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Y1aeF.jpg?s=128&g=1", "display_name": "Vasily Ryabov", "link": "https://stackoverflow.com/users/3648361/vasily-ryabov"}, "edited": false, "score": 0, "creation_date": 1491034191, "post_id": 42960361, "comment_id": 73384930, "body": "There are not so many desktop GUI automation tools in the open source field. I believe all of them are listed <a href=\"https://github.com/pywinauto/pywinauto/wiki/UI-Automation-tools-ratings\" rel=\"nofollow noreferrer\">in this rating</a> and only six of them support MS UI Automation and therefore can automate Excel GUI."}, {"owner": {"reputation": 11, "user_id": 7753039, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cfb7460e24a6f19a92759064a20d8d22?s=128&d=identicon&r=PG&f=1", "display_name": "app", "link": "https://stackoverflow.com/users/7753039/app"}, "reply_to_user": {"reputation": 7644, "user_id": 3648361, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Y1aeF.jpg?s=128&g=1", "display_name": "Vasily Ryabov", "link": "https://stackoverflow.com/users/3648361/vasily-ryabov"}, "edited": false, "score": 0, "creation_date": 1492396068, "post_id": 42960361, "comment_id": 73945238, "body": "ToolbarWindow32 class having three buttons , i need click on second button , not able to click on it.In Excel , i got below info from Auto IT  Control &lt;&lt;&lt;&lt; Class: ToolbarWindow32 Instance: 1 ClassnameNN: ToolbarWindow321 Name: Advanced (Class): [CLASS:ToolbarWindow32; INSTANCE:1] ID: Text: Position: 304, 79 Size: 615, 28 ControlClick Coords: 45, 14 Style: 0x52001101 ExStyle: 0x00000000 Handle: 0x0003047A"}, {"owner": {"reputation": 7644, "user_id": 3648361, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Y1aeF.jpg?s=128&g=1", "display_name": "Vasily Ryabov", "link": "https://stackoverflow.com/users/3648361/vasily-ryabov"}, "edited": false, "score": 0, "creation_date": 1492421273, "post_id": 42960361, "comment_id": 73953086, "body": "AutoIt doesn&#39;t support MS UI Automation out of the box (Excel controls shouldn&#39;t be visible to AutoIt Spy tool or Spy++). You need <code>Inspect.exe</code> as a Spy tool. See &quot;GUI Objects Inspection&quot; in <a href=\"https://pywinauto.readthedocs.io/en/latest/getting_started.html\" rel=\"nofollow noreferrer\">pywinauto&#39;s Getting Started Guide</a>."}, {"owner": {"reputation": 11, "user_id": 7753039, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cfb7460e24a6f19a92759064a20d8d22?s=128&d=identicon&r=PG&f=1", "display_name": "app", "link": "https://stackoverflow.com/users/7753039/app"}, "reply_to_user": {"reputation": 7644, "user_id": 3648361, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Y1aeF.jpg?s=128&g=1", "display_name": "Vasily Ryabov", "link": "https://stackoverflow.com/users/3648361/vasily-ryabov"}, "edited": false, "score": 0, "creation_date": 1493825655, "post_id": 42960361, "comment_id": 74570127, "body": "Am automating excel using win32ole and RAutomation gems here am trying achieve one functionality am using RAutomation adapter to find the element but am able to focus on that using win32adapter but not able to click on that and when I use msuia adapter target element cannot receive focus. here am attaching Auto It v3 Window Info Window &lt;&lt;&lt;&lt; Title: Book1 - Excel, Class:XLMAIN,Position:-9, -9,Size:1938,1050, Style:0x17CF0000,ExStyle:0x00010110 Handle: 0x000908D4&gt;&gt;&gt;&gt; Control &lt;&lt;&lt;&gt;,Position:1656, 975,Size:248, 20,ControlClick Coords:30, 12,Style:0x56010000,ExStyle:0x00000000, Handle: 0x000C065C"}], "owner": {"reputation": 11, "user_id": 7753039, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cfb7460e24a6f19a92759064a20d8d22?s=128&d=identicon&r=PG&f=1", "display_name": "app", "link": "https://stackoverflow.com/users/7753039/app"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 150, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1490208845, "creation_date": 1490208845, "question_id": 42960361, "link": "https://stackoverflow.com/questions/42960361/automate-drop-down-menu-in-excel", "title": "Automate Drop Down Menu in Excel", "body": "<p>Here am using Ruby/Cucumber framework to automate Excel. Here I need to automate Drop down menu for Excel. Am using win32ole and RAutomation gems for (ribbon,click the button etc.).But I need gem which can automate drop down menu  Does anyone knows of any ruby gem (or combination of gems)  or any method to automate this kind of functionality.</p>\n\n<p>Any and all help is much appreciated.</p>\n\n<p>Thank you</p>\n"}, {"tags": ["ruby", "regex", "gsub"], "comments": [{"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1490233055, "post_id": 42960256, "comment_id": 73025397, "body": "It might help if you could explain what <i>exactly</i> in the documentation is unclear to you, so that the Ruby maintainers can improve it for future readers."}], "answers": [{"comments": [{"owner": {"reputation": 80989, "user_id": 466862, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d873f397779db38cd510d9ee5416fd43?s=128&d=identicon&r=PG", "display_name": "Mark Rotteveel", "link": "https://stackoverflow.com/users/466862/mark-rotteveel"}, "edited": false, "score": 0, "creation_date": 1490216464, "post_id": 42960377, "comment_id": 73019274, "body": "Outright copying of the linked information is a form of plagiarizing. You need to phrase your own answer, optionally supported by quotes from the linked documentation."}], "tags": [], "owner": {"reputation": 424, "user_id": 6150184, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/26aa5396de57080c2084de1b8a5aeaa5?s=128&d=identicon&r=PG&f=1", "display_name": "DiodonHystrix", "link": "https://stackoverflow.com/users/6150184/diodonhystrix"}, "is_accepted": false, "score": 0, "last_activity_date": 1490211724, "last_edit_date": 1490211724, "creation_date": 1490208889, "answer_id": 42960377, "question_id": 42960256, "link": "https://stackoverflow.com/questions/42960256/when-using-gsub-with-a-za-z-in-ruby/42960377#42960377", "title": "When using gsub with [a-zA-Z] in ruby", "body": "<blockquote>\n  <p>A character class is delimited with square brackets ([, ]) and lists characters that may appear at that point in the match. /[ab]/ means a or b, as opposed to /ab/ which means a followed by b.</p>\n</blockquote>\n\n<pre><code>/W[aeiou]rd/.match(\"Word\") #=&gt; #&lt;MatchData \"Word\"&gt;\n</code></pre>\n\n<blockquote>\n  <p>Within a character class the hyphen (-) is a metacharacter denoting an\n  inclusive range of characters. [abcd] is equivalent to [a-d]. A range\n  can be followed by another range, so [abcdwxyz] is equivalent to\n  [a-dw-z]. The order in which ranges or individual characters appear\n  inside a character class is irrelevant.</p>\n</blockquote>\n\n<pre><code>/[0-9a-f]/.match('9f') #=&gt; #&lt;MatchData \"9\"&gt;\n/[9f]/.match('9f')     #=&gt; #&lt;MatchData \"9\"&gt;\n</code></pre>\n\n<p><a href=\"https://ruby-doc.org/core-2.4.0/Regexp.html#class-Regexp-label-Character+Classes\" rel=\"nofollow noreferrer\">Worth looking into ruby's doc for more details.</a></p>\n"}, {"tags": [], "owner": {"reputation": 1349, "user_id": 6163262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7f3655350c57cb94195d64808b7ba61?s=128&d=identicon&r=PG&f=1", "display_name": "whodini9", "link": "https://stackoverflow.com/users/6163262/whodini9"}, "is_accepted": false, "score": 0, "last_activity_date": 1490210603, "creation_date": 1490210603, "answer_id": 42960879, "question_id": 42960256, "link": "https://stackoverflow.com/questions/42960256/when-using-gsub-with-a-za-z-in-ruby/42960879#42960879", "title": "When using gsub with [a-zA-Z] in ruby", "body": "<p>I frequently use <a href=\"http://rubular.com/\" rel=\"nofollow noreferrer\">http://rubular.com/</a> as a reference</p>\n\n<blockquote>\n  <p>[a-zA-Z] Any single character in the range a-z or A-Z</p>\n</blockquote>\n"}, {"tags": [], "owner": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "is_accepted": false, "score": 1, "last_activity_date": 1490211763, "creation_date": 1490211763, "answer_id": 42961242, "question_id": 42960256, "link": "https://stackoverflow.com/questions/42960256/when-using-gsub-with-a-za-z-in-ruby/42961242#42961242", "title": "When using gsub with [a-zA-Z] in ruby", "body": "<p>Inside a <a href=\"http://www.regular-expressions.info/charclass.html\" rel=\"nofollow noreferrer\">character class</a> (the <code>[]</code> inside the regex), you can list all the characters you want :</p>\n\n<pre><code>/[abcdefg]/\n</code></pre>\n\n<p>to gain some space, you can define a range with an hyphen (<code>-</code>) and a letter on each side of the <code>-</code> :</p>\n\n<pre><code>/[a-g]/\n</code></pre>\n\n<p>Since it's clear that this range is from <code>a</code> to <code>g</code>, you could write another character directly after :</p>\n\n<pre><code>/[a-gm]/\n</code></pre>\n\n<p>You could also define another range :</p>\n\n<pre><code>/[a-gm-z]/\n</code></pre>\n\n<p>From the <a href=\"https://ruby-doc.org/core-2.4.0/Regexp.html#class-Regexp-label-Character+Classes\" rel=\"nofollow noreferrer\">documentation</a> : </p>\n\n<blockquote>\n  <p>A range can be followed by another range, so [abcdwxyz] is equivalent\n  to [a-dw-z]</p>\n</blockquote>\n\n<p>Note that for your example, you could also use a case insensitive regex :</p>\n\n<pre><code>string.gsub(/[a-z]/i,\"-\")\n</code></pre>\n\n<p>Finally, you can use ranges with <a href=\"https://www.w3schools.com/charsets/ref_utf_arrows.asp\" rel=\"nofollow noreferrer\">unicode characters</a> :</p>\n\n<pre><code>arrows = /[\\u2190-\\u21FF]/\n\"a\u21f8b\u21d9c\u21bad\u21a3e\u219df\".scan(arrows)\n# =&gt; [\"\u21f8\", \"\u21d9\", \"\u21ba\", \"\u21a3\", \"\u219d\"]\n</code></pre>\n"}], "owner": {"reputation": 3926, "user_id": 7670029, "user_type": "registered", "accept_rate": 0, "profile_image": "https://lh6.googleusercontent.com/-t_lCvokGK20/AAAAAAAAAAI/AAAAAAAAABg/1N-KWdThYzg/photo.jpg?sz=128", "display_name": "jeancode", "link": "https://stackoverflow.com/users/7670029/jeancode"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1354, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1490211763, "creation_date": 1490208521, "last_edit_date": 1490209508, "question_id": 42960256, "link": "https://stackoverflow.com/questions/42960256/when-using-gsub-with-a-za-z-in-ruby", "title": "When using gsub with [a-zA-Z] in ruby", "body": "<p>I've seen this  [a-zA-Z] for the gsub method:</p>\n\n<p><code>string.gsub(/[a-zA-Z]/,\"-\")</code></p>\n\n<p>where it will find any lower case letters a-z and or uppercase letters A-Z.</p>\n\n<p>My question is why does this a-z work back to back with A-Z :  a-zA-Z ?</p>\n\n<p>Where might I find more info on using [a-zA-Z] in ruby?</p>\n"}, {"tags": ["ruby", "automation", "cucumber", "desktop-application"], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 7753039, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cfb7460e24a6f19a92759064a20d8d22?s=128&d=identicon&r=PG&f=1", "display_name": "app", "link": "https://stackoverflow.com/users/7753039/app"}, "edited": false, "score": 0, "creation_date": 1491510248, "post_id": 43115259, "comment_id": 73598701, "body": "Yes I can use &quot;roo&quot; gem for excelsheet not for excel interactive (GUI) operations like switch to ribbon ,click on button etc."}], "tags": [], "owner": {"reputation": 36, "user_id": 2575150, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c24099408e807535301e9f9870b3a94a?s=128&d=identicon&r=PG", "display_name": "kapil chothe", "link": "https://stackoverflow.com/users/2575150/kapil-chothe"}, "is_accepted": false, "score": 0, "last_activity_date": 1490869902, "creation_date": 1490869902, "answer_id": 43115259, "question_id": 42960016, "link": "https://stackoverflow.com/questions/42960016/need-a-ruby-gem-for-cucumber-test-automation-for-manipulation-of-the-excel-guir/43115259#43115259", "title": "Need a Ruby gem for Cucumber test automation for manipulation of the Excel GUI(ribon,side menus,etc)", "body": "<p>You can use \"roo\" gem to handle excelsheet. refer link :-\n<a href=\"https://github.com/roo-rb/roo\" rel=\"nofollow noreferrer\">https://github.com/roo-rb/roo</a></p>\n\n<p>Thanks,\nKapil Chothe</p>\n"}], "owner": {"reputation": 11, "user_id": 7753039, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cfb7460e24a6f19a92759064a20d8d22?s=128&d=identicon&r=PG&f=1", "display_name": "app", "link": "https://stackoverflow.com/users/7753039/app"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 73, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1491509490, "creation_date": 1490207634, "question_id": 42960016, "link": "https://stackoverflow.com/questions/42960016/need-a-ruby-gem-for-cucumber-test-automation-for-manipulation-of-the-excel-guir", "title": "Need a Ruby gem for Cucumber test automation for manipulation of the Excel GUI(ribon,side menus,etc)", "body": "<p>Am attempting to automate excel , involves manipulation of the Excel GUI(ribbon,side menus,clicking buttons,drop down,etc) to achieve this functionality is one of the more complicated features of the windows desktop application to be automated. Here implementing with Ruby/Cucumber test automation framework.Does anyone know of any ruby gem (or combination of gems) that integrates well with windows desktop applications?</p>\n\n<p>Any and all help is much appreciated.</p>\n\n<p>Thank you </p>\n"}, {"tags": ["ruby", "grape"], "comments": [{"owner": {"reputation": 14400, "user_id": 2580302, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/db72295390541fa9df9cf434bd92937d?s=128&d=identicon&r=PG", "display_name": "zetacu", "link": "https://stackoverflow.com/users/2580302/zetacu"}, "edited": false, "score": 0, "creation_date": 1490220166, "post_id": 42959506, "comment_id": 73021023, "body": "isn&#39;t <code>employees</code> a <code>Hash</code>?"}], "answers": [{"tags": [], "owner": {"reputation": 14400, "user_id": 2580302, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/db72295390541fa9df9cf434bd92937d?s=128&d=identicon&r=PG", "display_name": "zetacu", "link": "https://stackoverflow.com/users/2580302/zetacu"}, "is_accepted": false, "score": 1, "last_activity_date": 1490234891, "creation_date": 1490234891, "answer_id": 42965983, "question_id": 42959506, "link": "https://stackoverflow.com/questions/42959506/grape-inject-parameter-dynamically/42965983#42965983", "title": "grape: inject parameter dynamically", "body": "<p>If I understood correctly, you want to have under <code>params[:company_data]</code> the result of sending the <code>params[:company_data]</code> to the <code>company_data</code> method in your model. For that you can use the <code>coerce_with:</code> option for grape:</p>\n\n<pre><code>params do\n  requires :employees, type: Array do\n    requires :name, type: String\n    requires :surname, type: String\n    requires :company_data, coerce_with: -&gt;(data) { object.company_data(data) } do \n    # ...\n  end\nend\n</code></pre>\n\n<p>Doing this will assign to company_data the result <code>object.company_data(data)</code> and after will attempt to validate, therefore if inside the do block you expect the <code>company_id</code> you can now add it to the validation inside the block:</p>\n\n<pre><code>params do\n  requires :employees, type: Array do\n    requires :name, type: String\n    requires :surname, type: String\n    requires :company_data, coerce_with: -&gt;(data) { object.company_data(data) } do \n      requires :company_id, type: Integer\n    # ...\n  end\nend\n</code></pre>\n"}], "owner": {"reputation": 2041, "user_id": 2071800, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/e1f877eccccc9e714b4d4fe03917f2a7?s=128&d=identicon&r=PG", "display_name": "Joe Half Face", "link": "https://stackoverflow.com/users/2071800/joe-half-face"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 403, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1490234891, "creation_date": 1490205987, "question_id": 42959506, "link": "https://stackoverflow.com/questions/42959506/grape-inject-parameter-dynamically", "title": "grape: inject parameter dynamically", "body": "<p>If I have this params defined:</p>\n\n<pre><code>  params do\n    requires :employees, type: Array do\n      requires :name, type: String\n      requires :surname, type: String\n      requires :company_data do \n      # ...\n      end\n  end\n</code></pre>\n\n<p>And <code>company_data</code> is defined in model like this:</p>\n\n<pre><code>def company_data=(args)\n...\nend\n</code></pre>\n\n<p>Basically it something like <code>accepts_nested_attributes_for</code>, but with some custom logic.</p>\n\n<p><code>:company_id</code> is defined in namespace, and I want to auto assign this param in <code>company_data</code> with other values, so that I don't have to iterate through array after params are captured.</p>\n\n<pre><code>#company_id: {current_company_id}\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "excel", "charts", "axlsx"], "comments": [{"owner": {"reputation": 1036, "user_id": 5078051, "user_type": "registered", "accept_rate": 67, "profile_image": "https://graph.facebook.com/10203328378168774/picture?type=large", "display_name": "Hsiu Chuan Tsao", "link": "https://stackoverflow.com/users/5078051/hsiu-chuan-tsao"}, "edited": false, "score": 0, "creation_date": 1490205456, "post_id": 42959156, "comment_id": 73012960, "body": "what&#39;s your error message?"}, {"owner": {"reputation": 11, "user_id": 7138369, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-JvPMIk4sSzY/AAAAAAAAAAI/AAAAAAAAB1E/mC3750EmO4c/photo.jpg?sz=128", "display_name": "lawrencetchin", "link": "https://stackoverflow.com/users/7138369/lawrencetchin"}, "reply_to_user": {"reputation": 1036, "user_id": 5078051, "user_type": "registered", "accept_rate": 67, "profile_image": "https://graph.facebook.com/10203328378168774/picture?type=large", "display_name": "Hsiu Chuan Tsao", "link": "https://stackoverflow.com/users/5078051/hsiu-chuan-tsao"}, "edited": false, "score": 0, "creation_date": 1490205816, "post_id": 42959156, "comment_id": 73013176, "body": "The error message I get is    <code>NoMethodError: undefined method &#39;row&#39; for nil:NilClass</code>"}], "answers": [{"tags": [], "owner": {"reputation": 11, "user_id": 7138369, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-JvPMIk4sSzY/AAAAAAAAAAI/AAAAAAAAB1E/mC3750EmO4c/photo.jpg?sz=128", "display_name": "lawrencetchin", "link": "https://stackoverflow.com/users/7138369/lawrencetchin"}, "is_accepted": true, "score": 0, "last_activity_date": 1490292554, "creation_date": 1490292554, "answer_id": 42983788, "question_id": 42959156, "link": "https://stackoverflow.com/questions/42959156/using-axlsx-gem-to-create-a-bar-chart-that-references-another-sheet/42983788#42983788", "title": "Using Axlsx gem to create a bar chart that references another sheet", "body": "<p>Haven't been able to find a solution. In the meantime a workaround would just to be to call the data you need onto the current sheet and create the chart using those values. So instead I did:</p>\n\n<pre><code>15.times do |count|\n   sheet.add_row [\"='Weightsteps Month over Month'!B#{count}\",\n                  \"='Weightsteps Month over Month'!C#{count}\"]\nend\n\nsheet.add_chart(Axlsx::Bar3DChart, \n   :start_at =&gt; \"D5\", \n   :end_at =&gt; \"I20\", \n   :title=&gt; \"Top Weight Step (0.5-15) Volume Month over Month\", \n   :barDir =&gt; :col) do |bars|\n\n   bars.add_series \n   :data =&gt; sheet[\"A1:A15\"], \n   :labels =&gt; sheet[\"B1:B15\"]\nend \n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 7138369, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-JvPMIk4sSzY/AAAAAAAAAAI/AAAAAAAAB1E/mC3750EmO4c/photo.jpg?sz=128", "display_name": "lawrencetchin", "link": "https://stackoverflow.com/users/7138369/lawrencetchin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 532, "favorite_count": 0, "accepted_answer_id": 42983788, "answer_count": 1, "score": 0, "last_activity_date": 1490292554, "creation_date": 1490204945, "question_id": 42959156, "link": "https://stackoverflow.com/questions/42959156/using-axlsx-gem-to-create-a-bar-chart-that-references-another-sheet", "title": "Using Axlsx gem to create a bar chart that references another sheet", "body": "<p>I'm currently using the Axlsx gem to create bar charts in excel. However, I'm trying to create a bar chart on one sheet that references values on another sheet but am running into errors.</p>\n\n<p>Here's my code:</p>\n\n<pre><code>sheet.add_chart(Axlsx::Bar3DChart, :start_at =&gt; \"B5\", :end_at =&gt; \"I25\", :title=&gt; \"Top Weight Step (0.5-15) Volume Month over Month\", :barDir =&gt; :col) do |bars|\n   bars.add_series :data =&gt; sheet[\"'Weightsteps Month over Month'!F10:F25\"],\n    :labels =&gt; sheet[\"'Weightsteps Month over Month'!B10:B25\"], \n    :title =&gt; sheet[\"'Weightsteps Month over Month'!F9\"]\n   bars.valAxis.gridlines = false\n   bars.catAxis.gridlines = false\nend\n</code></pre>\n"}, {"tags": ["ruby", "selenium", "firefox", "dialog"], "comments": [{"owner": {"reputation": 1036, "user_id": 5078051, "user_type": "registered", "accept_rate": 67, "profile_image": "https://graph.facebook.com/10203328378168774/picture?type=large", "display_name": "Hsiu Chuan Tsao", "link": "https://stackoverflow.com/users/5078051/hsiu-chuan-tsao"}, "edited": false, "score": 0, "creation_date": 1490205692, "post_id": 42958611, "comment_id": 73013102, "body": "I don&#39;t know what do you want, any more detail?"}, {"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1490207169, "post_id": 42958611, "comment_id": 73014089, "body": "Possible duplicate of <a href=\"http://stackoverflow.com/questions/1176348/access-to-file-download-dialog-in-firefox\">Access to file download dialog in Firefox</a>"}, {"owner": {"reputation": 1, "user_id": 7004614, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8a9fc65e8d74191678091ae45ab7a78d?s=128&d=identicon&r=PG", "display_name": "Doug M", "link": "https://stackoverflow.com/users/7004614/doug-m"}, "edited": false, "score": 0, "creation_date": 1490210650, "post_id": 42958611, "comment_id": 73016002, "body": "I looked at the one link above but it is hard for me to parse through lots of answers (some of which aren&#39;t relevant).   I want to know what ruby code I need to add to the statements above such that when the dialog box comes up, I can choose whether to open the pdf in the browser with a plug-in or to save the file away."}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 7004614, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8a9fc65e8d74191678091ae45ab7a78d?s=128&d=identicon&r=PG", "display_name": "Doug M", "link": "https://stackoverflow.com/users/7004614/doug-m"}, "edited": false, "score": 0, "creation_date": 1491601746, "post_id": 43166268, "comment_id": 73643288, "body": "It still gives me a dialog box when trying to open a PDF file.   Capybara.default_driver = :selenium  Capybara.register_driver :selenium do |app|     profile = Selenium::WebDriver::Firefox::Profile.new       profile[&#39;browser.download.dir&#39;] = &quot;~/Downloads&quot;     profile[&#39;browser.helperApps.neverAsk.saveToDisk&#39;] = &quot;application/doc, application/pdf, application/octet-stream&quot;     Capybara::Selenium::Driver.new app, :profile =&gt; profile   end"}, {"owner": {"reputation": 1, "user_id": 7004614, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8a9fc65e8d74191678091ae45ab7a78d?s=128&d=identicon&r=PG", "display_name": "Doug M", "link": "https://stackoverflow.com/users/7004614/doug-m"}, "edited": false, "score": 0, "creation_date": 1491601789, "post_id": 43166268, "comment_id": 73643314, "body": "Any good reference to the man pages for the command above in your answer would be great too as well as a description of a browser profile would be appreciated.  Thank you."}], "tags": [], "owner": {"reputation": 42014, "user_id": 2709090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/238c2b7cde2c817fc9a5a2b8eaa2ffad?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas Walpole", "link": "https://stackoverflow.com/users/2709090/thomas-walpole"}, "is_accepted": false, "score": 0, "last_activity_date": 1491121918, "creation_date": 1491121918, "answer_id": 43166268, "question_id": 42958611, "link": "https://stackoverflow.com/questions/42958611/ruby-interacting-with-selenium-to-control-firefox-open-save-dialog/43166268#43166268", "title": "Ruby interacting with Selenium to control Firefox open/save dialog", "body": "<p>You can't interact with the Open/Save dialog box using selenium-webdriver with firefox.  However, you can set preferences in your driver to make the dialog box never appear and a default behavior to just happen.  Something like</p>\n\n<pre><code>Capybara.register_driver :session do |app|\n  profile = Selenium::WebDriver::Firefox::Profile.new\n  profile['browser.download.dir'] = \"~/Downloads\"\n  # Adjust below to match the type of file reported\n  profile['browser.helperApps.neverAsk.saveToDisk'] = \"application/pdf, application/octet-stream\" \n  Capybara::Selenium::Driver.new app, :profile =&gt; profile\nend\n</code></pre>\n\n<p>should cause it to always download the files without prompting.  You can similarly set the 'browser.helperApps.neverAsk.openFile' profile setting to have specific types of files always be opened.</p>\n"}], "owner": {"reputation": 1, "user_id": 7004614, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8a9fc65e8d74191678091ae45ab7a78d?s=128&d=identicon&r=PG", "display_name": "Doug M", "link": "https://stackoverflow.com/users/7004614/doug-m"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 472, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1491121918, "creation_date": 1490203303, "last_edit_date": 1490210799, "question_id": 42958611, "link": "https://stackoverflow.com/questions/42958611/ruby-interacting-with-selenium-to-control-firefox-open-save-dialog", "title": "Ruby interacting with Selenium to control Firefox open/save dialog", "body": "<p><code>Capybara.register_driver :session do |app|\n        profile = Selenium::WebDriver::Firefox::Profile.new\n        Capybara::Selenium::Driver.new app, :profile =&gt; profile\n      end</code></p>\n\n<p>What do I add here to get my ruby scripts to tell Selenium (I am running on a MAC OS El Capitan) to interact with the Firefox Open/Save dialog box such that it opens a PDF or DOC file automatically instead of prompting me with the dialog box which requires manual intervention?</p>\n"}, {"tags": ["ruby", "class", "prepend"], "comments": [{"owner": {"reputation": 47232, "user_id": 1772830, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Qtoqg.jpg?s=128&g=1", "display_name": "Andrey Deineko", "link": "https://stackoverflow.com/users/1772830/andrey-deineko"}, "edited": false, "score": 0, "creation_date": 1490439233, "post_id": 42958597, "comment_id": 73119484, "body": "did you get it solved?"}, {"owner": {"reputation": 13, "user_id": 5577843, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d1c3510c2547678808fdaf7cff773af0?s=128&d=identicon&r=PG&f=1", "display_name": "jbor", "link": "https://stackoverflow.com/users/5577843/jbor"}, "reply_to_user": {"reputation": 47232, "user_id": 1772830, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Qtoqg.jpg?s=128&g=1", "display_name": "Andrey Deineko", "link": "https://stackoverflow.com/users/1772830/andrey-deineko"}, "edited": false, "score": 0, "creation_date": 1490607422, "post_id": 42958597, "comment_id": 73169998, "body": "Yes, thank you very much! Can&#39;t do a upvote by now"}, {"owner": {"reputation": 47232, "user_id": 1772830, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Qtoqg.jpg?s=128&g=1", "display_name": "Andrey Deineko", "link": "https://stackoverflow.com/users/1772830/andrey-deineko"}, "edited": false, "score": 0, "creation_date": 1490607472, "post_id": 42958597, "comment_id": 73170032, "body": "If my answer worked for you you can accept it (look for a checkmark under the answer&#39;s score)"}], "answers": [{"tags": [], "owner": {"reputation": 47232, "user_id": 1772830, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Qtoqg.jpg?s=128&g=1", "display_name": "Andrey Deineko", "link": "https://stackoverflow.com/users/1772830/andrey-deineko"}, "is_accepted": true, "score": 1, "last_activity_date": 1490204086, "creation_date": 1490204086, "answer_id": 42958868, "question_id": 42958597, "link": "https://stackoverflow.com/questions/42958597/how-to-call-original-method-after-it-got-prepend-from-outside/42958868#42958868", "title": "How to call original method after it got prepend from outside", "body": "<p><a href=\"https://ruby-doc.org/core-2.4.0/Method.html#method-i-super_method\" rel=\"nofollow noreferrer\">Method#<code>super_method</code></a>:</p>\n\n<pre><code>a.method(:log).super_method.call\n#=&gt; Log\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 5577843, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d1c3510c2547678808fdaf7cff773af0?s=128&d=identicon&r=PG&f=1", "display_name": "jbor", "link": "https://stackoverflow.com/users/5577843/jbor"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 431, "favorite_count": 1, "accepted_answer_id": 42958868, "answer_count": 1, "score": 1, "last_activity_date": 1490607594, "creation_date": 1490203274, "last_edit_date": 1490607594, "question_id": 42958597, "link": "https://stackoverflow.com/questions/42958597/how-to-call-original-method-after-it-got-prepend-from-outside", "title": "How to call original method after it got prepend from outside", "body": "<p>I'm refactoring some old code to fit to Ruby > 2. And there is some <code>alias_method_chain</code> which I want to remove.</p>\n\n<p>But there is some part where the without method get called. Inside the method I have to <code>super</code> for sure but from outside?</p>\n\n<p>Following is given:</p>\n\n<pre><code>module ExtraLog\n  def log\n    puts \"ExtraLog\"\n    super\n  end\nend\n\nclass Klass\n  prepend ExtraLog\n  def log\n    puts \"Log\"\n  end\nend\n\na = Klass.new\na.log \n#=&gt; \"ExtraLog\"\n#=&gt; \"Log\"\n</code></pre>\n\n<p>How can i call the original log method now without that the prepended method get called? Something like <code>a.original_log</code>?</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "answers": [{"tags": [], "owner": {"reputation": 112, "user_id": 1109171, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7fe129bbbd392d145df6e686b6feeca1?s=128&d=identicon&r=PG", "display_name": "johnnadeau", "link": "https://stackoverflow.com/users/1109171/johnnadeau"}, "is_accepted": true, "score": 3, "last_activity_date": 1490203704, "last_edit_date": 1490203704, "creation_date": 1490203307, "answer_id": 42958614, "question_id": 42958466, "link": "https://stackoverflow.com/questions/42958466/rails-application-not-able-to-detect-the-route/42958614#42958614", "title": "Rails application not able to detect the route", "body": "<p><code>root 'pages#home'</code> only sets up the root route. This will match only <code>localhost:3000/</code> and not <code>localhost:3000/pages</code></p>\n\n<p>You want to add something like </p>\n\n<p><code>get 'pages', to: 'pages#home'</code> to allow <code>/pages</code> to work correctly.</p>\n\n<p>Check out <a href=\"http://edgeguides.rubyonrails.org/routing.html\" rel=\"nofollow noreferrer\">http://edgeguides.rubyonrails.org/routing.html</a> to learn more about routing and your <code>routes.rb</code> file.</p>\n"}], "owner": {"reputation": 4694, "user_id": 2325154, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/8edaf24cd3712f7484ebf0edec77ca7c?s=128&d=identicon&r=PG", "display_name": "Nital", "link": "https://stackoverflow.com/users/2325154/nital"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 33, "favorite_count": 0, "accepted_answer_id": 42958614, "answer_count": 1, "score": 0, "last_activity_date": 1490203704, "creation_date": 1490202924, "question_id": 42958466, "link": "https://stackoverflow.com/questions/42958466/rails-application-not-able-to-detect-the-route", "title": "Rails application not able to detect the route", "body": "<p>Even after specifying the route in <code>routes.rb</code> my <code>Rails</code> application gives me following error when I hit <code>http://localhost:3000/pages</code> in the browser.</p>\n\n<p><strong>Ruby Version:</strong> 2.2</p>\n\n<p><strong>Rails Version:</strong> 5.0</p>\n\n<p><strong>Error:</strong></p>\n\n<pre><code>No route matches [GET] \"/pages\"\n</code></pre>\n\n<p><strong>routes.rb</strong></p>\n\n<pre><code>Rails.application.routes.draw do\n  root 'pages#home'\nend\n</code></pre>\n\n<p><strong>pages_controller.rb</strong></p>\n\n<pre><code>class PagesController &lt; ApplicationController\n  def home\n  end\nend\n</code></pre>\n\n<p><strong>home.html.erb</strong></p>\n\n<pre><code>&lt;h2&gt;Welcome Home&lt;/h2&gt;\n&lt;p&gt;After your long journey through rocky mountains and dry dust bowls you have finally neared the end.&lt;/p&gt;\n</code></pre>\n"}, {"tags": ["ruby", "amazon-web-services", "logging"], "answers": [{"tags": [], "owner": {"reputation": 7429, "user_id": 197302, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/cb3f8a2021f4528c6e96896f6b217e82?s=128&d=identicon&r=PG", "display_name": "Toby", "link": "https://stackoverflow.com/users/197302/toby"}, "is_accepted": true, "score": 0, "last_activity_date": 1490263103, "creation_date": 1490263103, "answer_id": 42972687, "question_id": 42958009, "link": "https://stackoverflow.com/questions/42958009/logging-to-an-external-service-with-aws-flow/42972687#42972687", "title": "Logging to an external service with aws-flow", "body": "<p>So it turns out aws-flow <a href=\"https://github.com/aws/aws-flow-ruby/blob/master/aws-flow/lib/aws/runner.rb#L184\" rel=\"nofollow noreferrer\">doesn't support logging</a>.</p>\n\n<p>There is some chat about it in issues and there is a <a href=\"https://github.com/aws/aws-flow-ruby/pull/111/files\" rel=\"nofollow noreferrer\">PR</a> which appears to fix things.</p>\n\n<p>For my needs I just forked the project (which at the time of writing hasn't been updated in 2 years) and made the relevant changes for me.</p>\n"}], "owner": {"reputation": 7429, "user_id": 197302, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/cb3f8a2021f4528c6e96896f6b217e82?s=128&d=identicon&r=PG", "display_name": "Toby", "link": "https://stackoverflow.com/users/197302/toby"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 28, "favorite_count": 0, "accepted_answer_id": 42972687, "answer_count": 1, "score": 0, "last_activity_date": 1490263103, "creation_date": 1490201512, "last_edit_date": 1495540507, "question_id": 42958009, "link": "https://stackoverflow.com/questions/42958009/logging-to-an-external-service-with-aws-flow", "title": "Logging to an external service with aws-flow", "body": "<p>I'm using aws-flow to interact with Amazon's Simple Workflow Server and I want to get logging set up to go to an external source (PaperTrail).</p>\n\n<p>I've set my <code>$logger</code> to use PaperTrail and I pass this into the client I use to start the execution;</p>\n\n<pre><code>client = Aws::SWF::Client.new(region: 'eu-west-1', logger: $logger)\nclient.start_workflow_execution({\n    domain: domain,\n    workflow_id: ...,\n    workflow_type: {\n      name: \"...\",\n      version: ...\n    },\n    task_list: {\n      name: \"...\"\n    }\n  })\n</code></pre>\n\n<p>This successfully logs that the client has started, but no action from inside a Workflow or Activity gets logged.</p>\n\n<p>From reading the documentation and <a href=\"https://stackoverflow.com/questions/26475739/aws-swf-api-call-logging-for-ruby-flow-framework\">this SO answer</a> it seems like you need to specify a logger when creating new Activities, but I can't see how to do that.</p>\n\n<p>The main workflow uses <code>activity_client</code> to select the Activitiy it needs, and the activity being called looks like;</p>\n\n<pre><code>class MyActivity\n  extend AWS::Flow::Activities\n  activity :my_activity do {\n   default_task_list: '...',\n   version: ...,\n   default_task_schedule_to_start_timeout: 60,\n   default_task_start_to_close_timeout: 60,\n   exponential_retry: { maximum_attempts: 2 }\n}\n</code></pre>\n\n<p>I can't see anywhere with this setup that you can add a logger to.</p>\n\n<p>Any help would be greatly appreciated</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "answers": [{"tags": [], "owner": {"reputation": 3867, "user_id": 3906189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/432b41df14bd9197f1b8601cabf49386?s=128&d=identicon&r=PG", "display_name": "siegy22", "link": "https://stackoverflow.com/users/3906189/siegy22"}, "is_accepted": true, "score": 1, "last_activity_date": 1490202455, "creation_date": 1490202455, "answer_id": 42958299, "question_id": 42957953, "link": "https://stackoverflow.com/questions/42957953/timeout-module-in-ruby-getting-timer-value/42958299#42958299", "title": "Timeout Module in Ruby - Getting Timer Value", "body": "<p>Timeout only yields the total seconds so here's an example on how to get that:</p>\n\n<pre><code>Timeout::timeout 5 do |sec|\n  puts sec # =&gt; prints 5\n  sleep 2\n  puts sec # =&gt; prints 5\nend\n</code></pre>\n\n<p>So to achieve the \"overall\" value (time wasted since the beginning) I think you'd have to do something like this:</p>\n\n<pre><code>Timeout::timeout 5 do |sec|\n  start = Time.now\n  puts (Time.now - start).round # =&gt; prints 0\n  sleep 2\n  puts (Time.now - start).round # =&gt; prints 2\nend\n</code></pre>\n\n<p>I don't know if there's a better way to do this, but this works.</p>\n"}], "owner": {"reputation": 654, "user_id": 4901528, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/gDVbN.png?s=128&g=1", "display_name": "Wes", "link": "https://stackoverflow.com/users/4901528/wes"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 69, "favorite_count": 0, "accepted_answer_id": 42958299, "answer_count": 1, "score": 1, "last_activity_date": 1490202455, "creation_date": 1490201371, "last_edit_date": 1490201738, "question_id": 42957953, "link": "https://stackoverflow.com/questions/42957953/timeout-module-in-ruby-getting-timer-value", "title": "Timeout Module in Ruby - Getting Timer Value", "body": "<p>Is there a way to get the \"timer\" value when running the Timeout Module in Ruby?  Say I have this code:</p>\n\n<pre><code>require 'timeout'\nbegin\n  status = Timeout::timeout(180) {\n    sleep(10) until some action\n  }\nrescue Timeout::Error\n  puts 'That took too long, exiting...'\nend\n</code></pre>\n\n<p>So what I want is the overall value of total time that I've waited after each iteration.  So after the first 10 seconds, I've waited 10 total seconds, after the 2nd iteration of 10 seconds, I've waited 20 total seconds, and so on.</p>\n\n<p>How can I get that overall value?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "windows", "bash", "visual-studio-code"], "comments": [{"owner": {"reputation": 113, "user_id": 861894, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d429a00b7c974ff6c446f7f468c0db5b?s=128&d=identicon&r=PG", "display_name": "hobbsenigma", "link": "https://stackoverflow.com/users/861894/hobbsenigma"}, "edited": false, "score": 0, "creation_date": 1525197940, "post_id": 42956983, "comment_id": 87270526, "body": "I don&#39;t think running VSCode on WSL works yet unless you&#39;re using a recent (as of this posting) Windows Insider build. <a href=\"https://github.com/Microsoft/WSL/issues/2760\" rel=\"nofollow noreferrer\">github.com/Microsoft/WSL/issues/2760</a> There looks to be some (very) recent work on it from the VSCode side: <a href=\"https://github.com/rubyide/vscode-ruby/issues/336\" rel=\"nofollow noreferrer\">github.com/rubyide/vscode-ruby/issues/336</a>"}], "answers": [{"comments": [{"owner": {"reputation": 1224, "user_id": 1003153, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/MOGNo.jpg?s=128&g=1", "display_name": "marianosz", "link": "https://stackoverflow.com/users/1003153/marianosz"}, "edited": false, "score": 0, "creation_date": 1527167499, "post_id": 44587763, "comment_id": 88032770, "body": "Can you share your launch,json? Thanks!"}], "tags": [], "owner": {"reputation": 191, "user_id": 5970009, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/69a3d2947d3e2ca1c9ed579d1422cf35?s=128&d=identicon&r=PG", "display_name": "su_li", "link": "https://stackoverflow.com/users/5970009/su-li"}, "is_accepted": false, "score": 0, "last_activity_date": 1497611263, "creation_date": 1497611263, "answer_id": 44587763, "question_id": 42956983, "link": "https://stackoverflow.com/questions/42956983/vscode-change-debug-shell-to-bash-on-windows/44587763#44587763", "title": "VSCode change debug shell to bash on windows", "body": "<p>That Ruby extension of Visual Studio Code is only able to use cmd to launch the debugger. Therefore you need a .cmd wrapper to call rdebug-ide.</p>\n\n<p>Installing the RubyDevKit for Windows should provide the necessary wrappers, but you can also use the lines below.\nIt basically looks like this:</p>\n\n<pre><code>@ECHO OFF\nIF NOT \"%~f0\" == \"~f0\" GOTO :WinNT\nECHO.This version of Ruby has not been built with support for Windows 95/98/Me.\nGOTO :EOF\n:WinNT\n@ruby.exe \"%~dpn0\" %*\n</code></pre>\n\n<p>(This will use the ruby.exe in your PATH to execute the script named like the .bat file, but without the extension.)</p>\n\n<p>Put this in the same location as rdebug-ide and call it <em>rdebug-ide.bat</em>.\nAdjust your launch.json so that <em>pathToRDebugIDE</em> points to this .bat file (use the full Windows path), and make sure ruby is in your PATH.</p>\n\n<p>I'm currently using this setup with a cygwin installation of ruby, rdebug-ide, rails etc.</p>\n"}], "owner": {"reputation": 95, "user_id": 6841024, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/4zeml.png?s=128&g=1", "display_name": "HEYIMFUZZ", "link": "https://stackoverflow.com/users/6841024/heyimfuzz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1629, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1525205452, "creation_date": 1490198624, "last_edit_date": 1525205452, "question_id": 42956983, "link": "https://stackoverflow.com/questions/42956983/vscode-change-debug-shell-to-bash-on-windows", "title": "VSCode change debug shell to bash on windows", "body": "<p><strong>Context:</strong> I recently switched from Sublime Text to Visual Studio Code to test the debugging functionalities of the Microsoft text editor. The main problem here is that my Ruby on Rails environment is set on bash in Ubuntu on Windows.</p>\n\n<p>I changed the integrated terminal shell to bash, so, I can use the integrated terminal to launch/debug my application. But when using the integrated debug tool using the Ruby extension ( <a href=\"https://github.com/rubyide/vscode-ruby\" rel=\"nofollow noreferrer\">https://github.com/rubyide/vscode-ruby</a> ), it seems to launch the windows cmd to execute the configuration:</p>\n\n<blockquote>\n  <p>Debugger terminal error: Process failed: spawn rdebug-ide.bat ENOENT</p>\n</blockquote>\n\n<p><strong>Question:</strong> Is my problem caused by <code>vscode</code> trying to use the windows cmd instead of the specified bash shell? If so, is there a way to tell <code>vscode</code> to use it instead of the windows cmd?</p>\n\n<p>Here's my <code>launch.json</code> config for the task I want to execute :</p>\n\n<pre><code>{\n  \"version\": \"0.2.0\",\n  \"configurations\": [\n    {\n      \"name\": \"Rails server\",\n      \"type\": \"Ruby\",\n      \"request\": \"launch\",\n      \"cwd\": \"/mnt/c/Repos/&lt;project_name&gt;\",\n      \"program\": \"rails\",\n      \"pathToRDebugIDE\": \n\"~/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/ruby-debug-ide-0.6.0/bin/rdebug-ide\",\n      \"args\": [\"server\"]\n    }\n}\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "activerecord"], "answers": [{"comments": [{"owner": {"reputation": 277, "user_id": 4774554, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/d72ff795ced575525d4f5cf033d65520?s=128&d=identicon&r=PG&f=1", "display_name": "VegaStudios", "link": "https://stackoverflow.com/users/4774554/vegastudios"}, "edited": false, "score": 0, "creation_date": 1490202552, "post_id": 42957958, "comment_id": 73011108, "body": "I was thinking of looping through UserGroup where the user_id was equal to self.id...not sure why I didn&#39;t try this sooner. Thanks a lot for your description; do you have any recommended readings that I should check out that would cover something similar to this?"}, {"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "reply_to_user": {"reputation": 277, "user_id": 4774554, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/d72ff795ced575525d4f5cf033d65520?s=128&d=identicon&r=PG&f=1", "display_name": "VegaStudios", "link": "https://stackoverflow.com/users/4774554/vegastudios"}, "edited": false, "score": 0, "creation_date": 1490216435, "post_id": 42957958, "comment_id": 73019255, "body": "@VegaStudios The Rails guide on ActiveRecord is a start."}], "tags": [], "owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "is_accepted": true, "score": 1, "last_activity_date": 1490201381, "creation_date": 1490201381, "answer_id": 42957958, "question_id": 42956915, "link": "https://stackoverflow.com/questions/42956915/rails-fetching-group-id-from-another-table/42957958#42957958", "title": "Rails Fetching group_id From Another Table", "body": "<p>Since there are many UserGroup records for each user and an ArchivedUserGroup has the same attributes as a regular UserGroup (user_id, group_id), I think you should be created an ArchivedUserGroup for each of the users UserGroup records and not just one. You're trying to pass a set (like an array) to the group_id column. Although you haven't shown your schema, probably group_id is an integer since it's a foreign key, so there's a data type mismatch. Instead you could do this:</p>\n\n<pre><code>UserGroup.where(user_id: self.id).each do |user_group|\n  ArchivedUserGroup.create(\n    user_id: self.id,\n    group_id: user_group.group_id\n  )\nend\n</code></pre>\n\n<p>In case some users have a large number of user groups, this may be slow because there's a DB call (create) happening in an iteration. This is known as an N+1 query and the way around it in this case would be to use a bulk insert, either via raw SQL or something like the <code>bulk_insert</code> gem.</p>\n"}], "owner": {"reputation": 277, "user_id": 4774554, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/d72ff795ced575525d4f5cf033d65520?s=128&d=identicon&r=PG&f=1", "display_name": "VegaStudios", "link": "https://stackoverflow.com/users/4774554/vegastudios"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 22, "favorite_count": 0, "accepted_answer_id": 42957958, "answer_count": 1, "score": 0, "last_activity_date": 1490203327, "creation_date": 1490198439, "last_edit_date": 1490203327, "question_id": 42956915, "link": "https://stackoverflow.com/questions/42956915/rails-fetching-group-id-from-another-table", "title": "Rails Fetching group_id From Another Table", "body": "<p>In the User model, I have an archive! method that is called when a User is destroyed. </p>\n\n<p>A User has many User Groups which should be stored in a new ArchivedUserGroup table when a User is destroyed. </p>\n\n<p>The ArchivedUser is successfully created, but I am having trouble fetching the Users' <code>group_id</code> from the UserGroup table.</p>\n\n<pre><code>      ArchivedUserGroup.create(\n        user_id: self.id, \n        group_id: UserGroup.where(:user_id =&gt; self.id).pluck(:group_id).to_set\n      )\n</code></pre>\n\n<p>Thanks for anyone that has helped me, I am just getting started with Rails and working with a rather complex codebase.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "forms", "ruby-on-rails-5"], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 7660044, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dbfaf4494d40fc78d5b3865ad3493a44?s=128&d=identicon&r=PG&f=1", "display_name": "Stack", "link": "https://stackoverflow.com/users/7660044/stack"}, "edited": false, "score": 0, "creation_date": 1490268782, "post_id": 42959634, "comment_id": 73041627, "body": "Thank you. Any ideas on how I can create that end_time in the controller properly? The following code doesn&#39;t work for the reasons stated in above comment. <code>booking_params[:end] = Time.at(booking_params[:start].to_i + Service.find(booking_params[:service_id]).duration)</code>"}], "tags": [], "owner": {"reputation": 1036, "user_id": 5078051, "user_type": "registered", "accept_rate": 67, "profile_image": "https://graph.facebook.com/10203328378168774/picture?type=large", "display_name": "Hsiu Chuan Tsao", "link": "https://stackoverflow.com/users/5078051/hsiu-chuan-tsao"}, "is_accepted": false, "score": 0, "last_activity_date": 1490206380, "creation_date": 1490206380, "answer_id": 42959634, "question_id": 42956441, "link": "https://stackoverflow.com/questions/42956441/set-both-end-and-start-time-in-form-with-datetime-select/42959634#42959634", "title": "Set both end_ and start_time in form with datetime_select", "body": "<p>[:start] is just return an Array contain symbol, and you can not get anything.</p>\n\n<p>You should create end_time in controller or model when you got the start_time, or other way is using the javascript code get end_time when type start_time in the form </p>\n"}, {"comments": [{"owner": {"reputation": 13, "user_id": 7660044, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dbfaf4494d40fc78d5b3865ad3493a44?s=128&d=identicon&r=PG&f=1", "display_name": "Stack", "link": "https://stackoverflow.com/users/7660044/stack"}, "edited": false, "score": 0, "creation_date": 1490268490, "post_id": 42959734, "comment_id": 73041451, "body": "Thanks a lot, this totally makes sense. Since I get back a bunch of select tags, do you have an idea on how to solve this problem in the controller? The following code obviously doesn&#39;t work  <code>booking_params[:end] = Time.at(booking_params[:start].to_i + Service.find(booking_params[:service_id]).duration)</code>  Then after that calling the create  <code>@booking = current_user.bookings.create(booking_params)</code>"}], "tags": [], "owner": {"reputation": 424, "user_id": 6150184, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/26aa5396de57080c2084de1b8a5aeaa5?s=128&d=identicon&r=PG&f=1", "display_name": "DiodonHystrix", "link": "https://stackoverflow.com/users/6150184/diodonhystrix"}, "is_accepted": false, "score": 0, "last_activity_date": 1490206659, "creation_date": 1490206659, "answer_id": 42959734, "question_id": 42956441, "link": "https://stackoverflow.com/questions/42956441/set-both-end-and-start-time-in-form-with-datetime-select/42959734#42959734", "title": "Set both end_ and start_time in form with datetime_select", "body": "<p>Consider not doing business logic in a view. Send these params and set the end variable in model or controller.</p>\n\n<p>Why does your code not work?\n<code>datetime_select</code> <a href=\"http://api.rubyonrails.org/classes/ActionView/Helpers/DateHelper.html#method-i-datetime_select\" rel=\"nofollow noreferrer\">returns a set of select tags (one for year, month, day, hour, and minute).</a></p>\n"}], "owner": {"reputation": 13, "user_id": 7660044, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dbfaf4494d40fc78d5b3865ad3493a44?s=128&d=identicon&r=PG&f=1", "display_name": "Stack", "link": "https://stackoverflow.com/users/7660044/stack"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 131, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1490206659, "creation_date": 1490197410, "question_id": 42956441, "link": "https://stackoverflow.com/questions/42956441/set-both-end-and-start-time-in-form-with-datetime-select", "title": "Set both end_ and start_time in form with datetime_select", "body": "<p>Im trying to set up a bookings form where people can book services. Within the Service model there is a duration set and I want to use this to automatically populate the end_time. For example, if I book a 60 minute service at 2017-03-22 1PM I want the end time to be set at the same day but one hour later. Is it possible to send this in with a form?</p>\n\n<pre><code>&lt;%= form_for([service, service.bookings.new]) do |f| %&gt;\n  &lt;div class=\"row\"&gt;\n    &lt;div class=\"col-sm-12\"&gt;\n      &lt;%= hidden_field_tag \"recipients\", @user.id %&gt;\n      &lt;div class=\"form-group\"&gt;\n        &lt;%= label_tag 'Available times' %&gt;\n        &lt;%= f.datetime_select :start %&gt;\n        &lt;%= f.hidden_field :end, value: Time.at([:start].to_i + service.duration) %&gt;\n        &lt;%= f.hidden_field :service_id, value: service.id %&gt;\n        &lt;%= f.hidden_field :price, value: service.price %&gt;\n      &lt;/div&gt;\n      &lt;%= submit_tag 'Book', class: 'btn btn-complete btn-lg btn-large btn-block' %&gt;\n    &lt;/div&gt;\n  &lt;/div&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>I've tried with above but get </p>\n\n<blockquote>\n  <p>undefined method `to_i' for [:start]:Array</p>\n</blockquote>\n\n<p>which I guess is because :start is not yet saved and renders nil.</p>\n\n<p>Any ideas on how to solve this?</p>\n\n<p>Thanks a lot</p>\n"}, {"tags": ["ruby", "xml", "nokogiri"], "comments": [{"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1490209465, "post_id": 42955933, "comment_id": 73015343, "body": "What is <code>session_node</code>? Please read &quot;<a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>&quot;. Your code needs to demonstrate the problem you&#39;re asking about."}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1490211479, "post_id": 42955933, "comment_id": 73016495, "body": "Please reduce your XML sample to the <i>bare minimum</i> necessary to demonstrate what you want. Anything beyond that is distracting to the question. Also, based on that, show an example of what your output should be. Stack Overflow is an online reference and your question is to help others in the future solve this problem so clear and complete questions are important."}, {"owner": {"reputation": 35, "user_id": 7605604, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d673fefe7fad394035a9e815076b6e37?s=128&d=identicon&r=PG&f=1", "display_name": "muski", "link": "https://stackoverflow.com/users/7605604/muski"}, "reply_to_user": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1490277998, "post_id": 42955933, "comment_id": 73048662, "body": "@theTinMan : corrected the code"}], "answers": [{"comments": [{"owner": {"reputation": 35, "user_id": 7605604, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d673fefe7fad394035a9e815076b6e37?s=128&d=identicon&r=PG&f=1", "display_name": "muski", "link": "https://stackoverflow.com/users/7605604/muski"}, "edited": false, "score": 0, "creation_date": 1490201605, "post_id": 42957027, "comment_id": 73010529, "body": "Thanks.I will give it  a try"}], "tags": [], "owner": {"reputation": 424, "user_id": 6150184, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/26aa5396de57080c2084de1b8a5aeaa5?s=128&d=identicon&r=PG&f=1", "display_name": "DiodonHystrix", "link": "https://stackoverflow.com/users/6150184/diodonhystrix"}, "is_accepted": false, "score": 1, "last_activity_date": 1490209526, "last_edit_date": 1490209526, "creation_date": 1490198742, "answer_id": 42957027, "question_id": 42955933, "link": "https://stackoverflow.com/questions/42955933/how-to-update-a-nodeset/42957027#42957027", "title": "How to update a NodeSet", "body": "<p>Change </p>\n\n<pre><code>doc2=doc.xpath(\"//EventRouters/EventRouter\")\n</code></pre>\n\n<p>To</p>\n\n<pre><code>doc2 = doc.at_xpath(\"//EventRouters\")\n</code></pre>\n\n<p><code>xpath</code> returns an Array. You can use <code>at_xpath</code> to get the first element. Also  get rid of <code>/EventRouter</code>, because I guess you wanted to append another 'EventRouter' item to EventRouters</p>\n"}, {"tags": [], "owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "is_accepted": true, "score": 0, "last_activity_date": 1490211512, "last_edit_date": 1490211512, "creation_date": 1490207215, "answer_id": 42959900, "question_id": 42955933, "link": "https://stackoverflow.com/questions/42955933/how-to-update-a-nodeset/42959900#42959900", "title": "How to update a NodeSet", "body": "<p>Adding new nodes is simple. The basic idea is similar to parsing XML or HTML:</p>\n\n<ol>\n<li>Find the node where you want to add new content.</li>\n<li>Use the appropriate method to append the content, either at the start of the children of the node, or as a sibling or a parent wrapping the node. Those methods are in <a href=\"http://www.rubydoc.info/github/sparklemotion/nokogiri/Nokogiri/XML/Node\" rel=\"nofollow noreferrer\">the Node documentation</a>.</li>\n<li>You're done.</li>\n</ol>\n\n<p>Nokogiri makes it easy to add a node using a string, which it will parse and convert to a Node:</p>\n\n<pre><code>require 'nokogiri'\ndoc = Nokogiri::XML('&lt;xml&gt;&lt;node/&gt;&lt;/xml&gt;')\n\nnode = doc.at('node')\nnode.add_child('&lt;foo&gt;bar&lt;/foo&gt;')\ndoc.to_xml # =&gt; \"&lt;?xml version=\\\"1.0\\\"?&gt;\\n&lt;xml&gt;\\n  &lt;node&gt;\\n    &lt;foo&gt;bar&lt;/foo&gt;\\n  &lt;/node&gt;\\n&lt;/xml&gt;\\n\"\n</code></pre>\n\n<p>You can go the longer route of creating a new Node but I find building a string easier.</p>\n\n<p>Using your code for the basis, here's how I'd have written it:</p>\n\n<pre><code>require 'nokogiri'\n\ndata = DATA.read\n\ndoc = Nokogiri::XML.parse data\ndoc.xpath(\"//EventRouters/EventRouter\").each do |event_router|\n  event_router.add_next_sibling(\"&lt;EventRouter id='some'&gt;&lt;Parameters&gt;some content&lt;/Parameters&gt;&lt;/EventRouter&gt;\")\nend\n\nputs doc.to_xml\n\n__END__\n&lt;EventRouters&gt;\n  &lt;EventRouter&gt;original1&lt;/EventRouter&gt;\n  &lt;EventRouter&gt;original2&lt;/EventRouter&gt;\n&lt;/EventRouters&gt;\n</code></pre>\n\n<p>Running that results in:</p>\n\n<pre><code>&lt;?xml version=\"1.0\"?&gt;\n&lt;EventRouters&gt;\n  &lt;EventRouter&gt;original1&lt;/EventRouter&gt;&lt;EventRouter id=\"some\"&gt;&lt;Parameters&gt;some content&lt;/Parameters&gt;&lt;/EventRouter&gt;\n  &lt;EventRouter&gt;original2&lt;/EventRouter&gt;&lt;EventRouter id=\"some\"&gt;&lt;Parameters&gt;some content&lt;/Parameters&gt;&lt;/EventRouter&gt;\n&lt;/EventRouters&gt;\n</code></pre>\n\n<p>You're trying to use <code>&lt;&lt;</code> to append to a NodeSet, which isn't going to do what you think it will:</p>\n\n<pre><code>doc = Nokogiri::XML.parse data\ners = doc.search('EventRouter') \ners &lt;&lt; Nokogiri::XML::Node.new('&lt;foo/&gt;', doc)\n</code></pre>\n\n<p>Appending to <code>ers</code>, which is a NodeSet, won't apply the new Node to all the elements in the set:</p>\n\n<pre><code>doc.to_xml # =&gt; \"&lt;?xml version=\\\"1.0\\\"?&gt;\\n&lt;EventRouters&gt;\\n  &lt;EventRouter&gt;original1&lt;/EventRouter&gt;\\n  &lt;EventRouter&gt;original2&lt;/EventRouter&gt;\\n&lt;/EventRouters&gt;\\n\"\n</code></pre>\n\n<p>Instead it appends it to the end of the set:</p>\n\n<pre><code>ers.to_xml # =&gt; \"&lt;EventRouter&gt;original1&lt;/EventRouter&gt;&lt;EventRouter&gt;original2&lt;/EventRouter&gt;&lt;&lt;foo/&gt;/&gt;\"\n</code></pre>\n"}], "owner": {"reputation": 35, "user_id": 7605604, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d673fefe7fad394035a9e815076b6e37?s=128&d=identicon&r=PG&f=1", "display_name": "muski", "link": "https://stackoverflow.com/users/7605604/muski"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 209, "favorite_count": 0, "accepted_answer_id": 42959900, "answer_count": 2, "score": 2, "last_activity_date": 1490277978, "creation_date": 1490196179, "last_edit_date": 1490277978, "question_id": 42955933, "link": "https://stackoverflow.com/questions/42955933/how-to-update-a-nodeset", "title": "How to update a NodeSet", "body": "<p>I am trying to add one more <code>&lt;EventRouter&gt;</code> element in the following XML:</p>\n\n<pre><code>&lt;EventRouters&gt;\n        &lt;EventRouter id=\"Important Events to Log File\" class=\"com.cyclonecommerce.events2.router.LogFileRouter\" active=\"true\"&gt;\n            &lt;Parameters file=\"../logs/%nodeName%_events.log\"\n                        rollOnStart=\"false\" autoFlush=\"true\"\n                        maxFileSize=\"2M\" maxBackupFiles=\"5\"/&gt;\n            &lt;MetadataProcessorListRef ref=\"Messaging\"/&gt;\n            &lt;EventFilterRef ref=\"Important\"/&gt;\n        &lt;/EventRouter&gt;\n        &lt;EventRouter id=\"Message Detail to Log File\"   class=\"com.cyclonecommerce.events2.router.LogFileRouter\" active=\"false\"&gt;\n            &lt;Parameters file=\"../logs/%nodeName%_message_detail.log\"\n                        rollOnStart=\"true\" autoFlush=\"true\"\n                        maxFileSize=\"2M\" maxBackupFiles=\"5\"/&gt;\n            &lt;MetadataProcessorListRef ref=\"Messaging\"/&gt;\n            &lt;EventFilterRef ref=\"Message Detail\"/&gt;\n        &lt;/EventRouter&gt;\n\n&lt;/EventRouters&gt;\n</code></pre>\n\n<p>I am able to append a node to a nodeset but after saving the XML I am not getting the updated XML I want:</p>\n\n<pre><code>require 'nokogiri'\n\nif File.exist?('a.xml')\n  data = File.read(\"a.xml\")\n\nend\ndoc = Nokogiri::XML.parse data\ndoc2=doc.xpath(\"//EventRouters/EventRouter\")\n\nevent_router = Nokogiri::XML::Node.new(\"EventRouter\",doc)\nevent_router['id'] = \"some\"\nparam_node = Nokogiri::XML::Node.new(\"Parameters\",doc)\nparam_node.content = \"some content\"\nevent_router &lt;&lt; param_node\ndoc2&lt;&lt;  event_router\n\nFile.open('test.xml', 'w') do |file|\n  file.print doc.to_xml\nend\n</code></pre>\n"}, {"tags": ["ruby", "openstack", "fluentd"], "comments": [{"owner": {"reputation": 627, "user_id": 2210760, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/6875586d2adce49055ffe89f205c0bd8?s=128&d=identicon&r=PG", "display_name": "Deepak", "link": "https://stackoverflow.com/users/2210760/deepak"}, "edited": false, "score": 1, "creation_date": 1490195978, "post_id": 42955733, "comment_id": 73006287, "body": "Did you try installing the plugin with &quot;fluent-gem&quot; ?"}, {"owner": {"reputation": 88, "user_id": 7750452, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/55f32191b516cd4f68422e2b574493ee?s=128&d=identicon&r=PG&f=1", "display_name": "source", "link": "https://stackoverflow.com/users/7750452/source"}, "reply_to_user": {"reputation": 627, "user_id": 2210760, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/6875586d2adce49055ffe89f205c0bd8?s=128&d=identicon&r=PG", "display_name": "Deepak", "link": "https://stackoverflow.com/users/2210760/deepak"}, "edited": false, "score": 0, "creation_date": 1490196121, "post_id": 42955733, "comment_id": 73006415, "body": "yes, I tried it previously and I had the same response with it... :/"}, {"owner": {"reputation": 627, "user_id": 2210760, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/6875586d2adce49055ffe89f205c0bd8?s=128&d=identicon&r=PG", "display_name": "Deepak", "link": "https://stackoverflow.com/users/2210760/deepak"}, "edited": false, "score": 1, "creation_date": 1490196342, "post_id": 42955733, "comment_id": 73006604, "body": "is it possible for you to share the directory structure of the plugin, the plugin name mentioned while the plugin gets registered and the name of file should in format <code>&lt;type&gt;_&lt;plugin_name&gt;.rb</code>"}, {"owner": {"reputation": 88, "user_id": 7750452, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/55f32191b516cd4f68422e2b574493ee?s=128&d=identicon&r=PG&f=1", "display_name": "source", "link": "https://stackoverflow.com/users/7750452/source"}, "reply_to_user": {"reputation": 627, "user_id": 2210760, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/6875586d2adce49055ffe89f205c0bd8?s=128&d=identicon&r=PG", "display_name": "Deepak", "link": "https://stackoverflow.com/users/2210760/deepak"}, "edited": false, "score": 2, "creation_date": 1490196549, "post_id": 42955733, "comment_id": 73006774, "body": "good point, but I am aware of the name convention, I did check it, the file is present in <code>**&lt;base_dir&gt;&#47;lib&#47;fluent&#47;plugin&#47;**</code> and the file name is <code>out_swift.rb</code> and inside the file the registration is: <code>Fluent::Plugin.register_output(&#39;swift&#39;, self)</code>"}, {"owner": {"reputation": 627, "user_id": 2210760, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/6875586d2adce49055ffe89f205c0bd8?s=128&d=identicon&r=PG", "display_name": "Deepak", "link": "https://stackoverflow.com/users/2210760/deepak"}, "edited": false, "score": 0, "creation_date": 1490196618, "post_id": 42955733, "comment_id": 73006837, "body": "okay, I am not sure what is wrong then, but add this info in the question"}, {"owner": {"reputation": 88, "user_id": 7750452, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/55f32191b516cd4f68422e2b574493ee?s=128&d=identicon&r=PG&f=1", "display_name": "source", "link": "https://stackoverflow.com/users/7750452/source"}, "reply_to_user": {"reputation": 627, "user_id": 2210760, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/6875586d2adce49055ffe89f205c0bd8?s=128&d=identicon&r=PG", "display_name": "Deepak", "link": "https://stackoverflow.com/users/2210760/deepak"}, "edited": false, "score": 0, "creation_date": 1490197435, "post_id": 42955733, "comment_id": 73007490, "body": "@Deepak is there any way, I can check the list of registered plugins, and the name it uses to get registered to fluend?"}, {"owner": {"reputation": 627, "user_id": 2210760, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/6875586d2adce49055ffe89f205c0bd8?s=128&d=identicon&r=PG", "display_name": "Deepak", "link": "https://stackoverflow.com/users/2210760/deepak"}, "edited": false, "score": 0, "creation_date": 1490197585, "post_id": 42955733, "comment_id": 73007595, "body": "I am not sure, but you can try this: <a href=\"http://docs.fluentd.org/v0.12/articles/monitoring\" rel=\"nofollow noreferrer\">docs.fluentd.org/v0.12/articles/monitoring</a>"}], "answers": [{"comments": [{"owner": {"reputation": 88, "user_id": 7750452, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/55f32191b516cd4f68422e2b574493ee?s=128&d=identicon&r=PG&f=1", "display_name": "source", "link": "https://stackoverflow.com/users/7750452/source"}, "edited": false, "score": 0, "creation_date": 1490266200, "post_id": 42973810, "comment_id": 73039862, "body": "Worked like charm, I need to look into the installation part"}], "tags": [], "owner": {"reputation": 627, "user_id": 2210760, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/6875586d2adce49055ffe89f205c0bd8?s=128&d=identicon&r=PG", "display_name": "Deepak", "link": "https://stackoverflow.com/users/2210760/deepak"}, "is_accepted": true, "score": 4, "last_activity_date": 1490265995, "creation_date": 1490265995, "answer_id": 42973810, "question_id": 42955733, "link": "https://stackoverflow.com/questions/42955733/fluent-custom-plugin-registration-throws-unknown-output-plugin/42973810#42973810", "title": "fluent custom plugin registration throws &quot;Unknown output plugin&quot;", "body": "<p>The problem could be with the installation path, Please check the following, :</p>\n\n<p>Type <strong><code>gem environment</code></strong></p>\n\n<p>You will get to see the <strong>INSTALLATION DIRECTORY</strong> like:</p>\n\n<pre><code>RubyGems Environment:\n  - RUBYGEMS VERSION: 2.6.8\n  - RUBY VERSION: 2.4.0 (2016-12-24 patchlevel 0) [x86_64-linux]\n  - INSTALLATION DIRECTORY: /usr/local/lib/ruby/gems/2.4.0\n  - USER INSTALLATION DIRECTORY: /root/.gem/ruby/2.4.0\n  - RUBY EXECUTABLE: /usr/local/bin/ruby\n  - EXECUTABLE DIRECTORY: /usr/local/bin\n  - SPEC CACHE DIRECTORY: /root/.gem/specs\n  - SYSTEM CONFIGURATION DIRECTORY: /usr/local/etc\n  - RUBYGEMS PLATFORMS:\n    - ruby\n    - x86_64-linux\n</code></pre>\n\n<p>Go inside the <strong>INSTALLATION DIRECTORY</strong> directory, now do</p>\n\n<pre><code>cd gem/&lt;ur_custom_plugin&gt;\n</code></pre>\n\n<p>Now check whether, your files are there or not.\nIf not, you got your answer.</p>\n\n<p><strong>SOLUTION:</strong>\nSimply copy your files to this directory and start fluentd</p>\n"}, {"tags": [], "owner": {"reputation": 1549, "user_id": 877513, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/38282c8b8fdb50843eae36bbc3a284fc?s=128&d=identicon&r=PG", "display_name": "zhihong", "link": "https://stackoverflow.com/users/877513/zhihong"}, "is_accepted": false, "score": 0, "last_activity_date": 1612306778, "creation_date": 1612306778, "answer_id": 66018829, "question_id": 42955733, "link": "https://stackoverflow.com/questions/42955733/fluent-custom-plugin-registration-throws-unknown-output-plugin/66018829#66018829", "title": "fluent custom plugin registration throws &quot;Unknown output plugin&quot;", "body": "<p>As the above mentioned, this may related to which gem you used to install the plugin, for my case in CentOS7, the td-agent-gem as below works:</p>\n<pre><code>td-agent-gem install &lt;pluginname&gt;\n</code></pre>\n"}], "owner": {"reputation": 88, "user_id": 7750452, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/55f32191b516cd4f68422e2b574493ee?s=128&d=identicon&r=PG&f=1", "display_name": "source", "link": "https://stackoverflow.com/users/7750452/source"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1938, "favorite_count": 0, "accepted_answer_id": 42973810, "answer_count": 2, "score": 4, "last_activity_date": 1612306778, "creation_date": 1490195749, "last_edit_date": 1490197339, "question_id": 42955733, "link": "https://stackoverflow.com/questions/42955733/fluent-custom-plugin-registration-throws-unknown-output-plugin", "title": "fluent custom plugin registration throws &quot;Unknown output plugin&quot;", "body": "<p>I am trying to modify an existing Fluentd plugin and use it with my customization. So I :</p>\n\n<ol>\n<li>git cloned the plugin repo from github. <code>git clone &lt;url&gt;</code></li>\n<li>Edited my changes</li>\n<li><strong><code>gem build plugin.gemspec</code></strong></li>\n<li><strong><code>gem install plugin.gem</code></strong></li>\n<li>Created a config mentioning the type of plugin</li>\n<li>Ran <strong><code>fluentd -c &lt;fluend_conf.conf&gt; -vv</code></strong></li>\n</ol>\n\n<p>And I ended up getting this in fluentd log(<strong>fluent-plugin-swift</strong> is the plugin I edited and the type of the plugin is <strong>'swift'</strong>):</p>\n\n<pre><code>2017-03-22 15:00:27 +0000 [info]: fluent/engine.rb:126:block in configure: \ngem 'fluent-plugin-swift' version '0.0.1'\n\n2017-03-22 15:00:27 +0000 [error]: fluent/supervisor.rb:369:rescue in\nmain_process: config error file=\"fluend_conf.conf\" error=\"Unknown output plugin \n'swift'. Run 'gem search -rd fluent-plugin' to find plugins\" \n</code></pre>\n\n<p><strong>EDIT-1: For clarifications</strong>\nI have also checked the naming convention of the plugin that is to be registered.\nThe plugin is present in <code>&lt;base_dir&gt;/lib/fluent/plugin/</code>. \nAlso the name of file is <code>out_swift.rb</code>. And finally\n inside the file, the plugin gets registered as:</p>\n\n<pre><code>Fluent::Plugin.register_output('swift', self)\n</code></pre>\n\n<p>Also is there any way, I can check the list of registered plugins, and the name it uses to get registered to fluend?</p>\n\n<p><strong>NOTE:</strong>\n  The same had previously worked for me, I had to re-do this as someone had formatted the machine I had my changes.</p>\n\n<p>Please let me what is wrong in my approach?</p>\n"}, {"tags": ["ruby", "routes", "sinatra"], "comments": [{"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1490313341, "post_id": 42955637, "comment_id": 73069711, "body": "Please read &quot;<a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a>&quot; including the linked pages, &quot;<a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>&quot; and &quot;<a href=\"http://meta.stackoverflow.com/questions/261592\">How much research effort is expected of Stack Overflow users?</a>&quot;. We&#39;d like to see evidence of your effort. What did you try? Did you search and not find anything? Did you find stuff but it didn&#39;t help? Did you try writing code? If not, why? If so, what is the smallest code example that shows what you tried and why didn&#39;t it work? Without that it looks like you didn&#39;t try and want us to write it for you."}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 1, "creation_date": 1490313615, "post_id": 42955637, "comment_id": 73069783, "body": "Read <a href=\"http://www.sinatrarb.com/intro.html#Triggering%20Another%20Route\" rel=\"nofollow noreferrer\">sinatrarb.com/intro.html#Triggering%20Another%20Route</a>."}], "owner": {"reputation": 21, "user_id": 5602979, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/044c9af0796071e6ebe72ac4348920f6?s=128&d=identicon&r=PG&f=1", "display_name": "aaa", "link": "https://stackoverflow.com/users/5602979/aaa"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 24, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1490313299, "creation_date": 1490195466, "last_edit_date": 1490313299, "question_id": 42955637, "link": "https://stackoverflow.com/questions/42955637/use-sinatras-action-as-method", "title": "Use Sinatra&#39;s action as method", "body": "<p>I want to call a Sinatra action as a method. For example, I have defined</p>\n\n<pre><code>get '/' do\n  puts \"hi\"\nend\n</code></pre>\n\n<p>I want to call the above as a method but not as an action. How to achieve this? </p>\n"}, {"tags": ["mysql", "ruby-on-rails", "ruby", "activerecord"], "comments": [{"owner": {"reputation": 30756, "user_id": 5389997, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4d227900a17ca5c34bad6d2b27122c7f?s=128&d=identicon&r=PG&f=1", "display_name": "Shadow", "link": "https://stackoverflow.com/users/5389997/shadow"}, "edited": false, "score": 0, "creation_date": 1490195860, "post_id": 42955188, "comment_id": 73006202, "body": "Possible duplicate of <a href=\"http://stackoverflow.com/questions/1556289/select-group-and-sum-results-from-database\">Select, group and sum results from database</a>"}, {"owner": {"reputation": 30756, "user_id": 5389997, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4d227900a17ca5c34bad6d2b27122c7f?s=128&d=identicon&r=PG&f=1", "display_name": "Shadow", "link": "https://stackoverflow.com/users/5389997/shadow"}, "edited": false, "score": 0, "creation_date": 1490195917, "post_id": 42955188, "comment_id": 73006238, "body": "You need to use sql&#39;s <code>group by</code> clause. How to use this in rails is described in the duplicate topic I linked."}], "answers": [{"comments": [{"owner": {"reputation": 178, "user_id": 7691010, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/eebf967a647150dd15891230e464abd1?s=128&d=identicon&r=PG&f=1", "display_name": "Krawalla", "link": "https://stackoverflow.com/users/7691010/krawalla"}, "edited": false, "score": 0, "creation_date": 1490197589, "post_id": 42955739, "comment_id": 73007598, "body": "this actually works as you described. I only want to display the &quot;count&quot; of the current user. Each user can either be an agent or a client. So user_id is not necessarily = agent_id. Anyway, each agent shall only see his own count.."}, {"owner": {"reputation": 2116, "user_id": 6780663, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9207ba3b9163582570078b687f9b2792?s=128&d=identicon&r=PG&f=1", "display_name": "Alejandro Montilla", "link": "https://stackoverflow.com/users/6780663/alejandro-montilla"}, "reply_to_user": {"reputation": 178, "user_id": 7691010, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/eebf967a647150dd15891230e464abd1?s=128&d=identicon&r=PG&f=1", "display_name": "Krawalla", "link": "https://stackoverflow.com/users/7691010/krawalla"}, "edited": false, "score": 0, "creation_date": 1490197983, "post_id": 42955739, "comment_id": 73007900, "body": "So what you need is, to find the number of entries by the currect user? If so, where do you have your currect user?"}, {"owner": {"reputation": 178, "user_id": 7691010, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/eebf967a647150dd15891230e464abd1?s=128&d=identicon&r=PG&f=1", "display_name": "Krawalla", "link": "https://stackoverflow.com/users/7691010/krawalla"}, "edited": false, "score": 0, "creation_date": 1490198188, "post_id": 42955739, "comment_id": 73008044, "body": "do you mean my sessions_helper?  <code>def current_user     @current_user ||= User.find_by(id: session[:user_id])   end</code>"}, {"owner": {"reputation": 178, "user_id": 7691010, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/eebf967a647150dd15891230e464abd1?s=128&d=identicon&r=PG&f=1", "display_name": "Krawalla", "link": "https://stackoverflow.com/users/7691010/krawalla"}, "edited": false, "score": 0, "creation_date": 1490199696, "post_id": 42955739, "comment_id": 73009151, "body": "Strange as it is, this returns &quot;0&quot; for any agent that i tried."}, {"owner": {"reputation": 178, "user_id": 7691010, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/eebf967a647150dd15891230e464abd1?s=128&d=identicon&r=PG&f=1", "display_name": "Krawalla", "link": "https://stackoverflow.com/users/7691010/krawalla"}, "edited": false, "score": 0, "creation_date": 1490200001, "post_id": 42955739, "comment_id": 73009367, "body": "updated the original table, maybe this is because of the actual entries in the &quot;order&quot; column??"}, {"owner": {"reputation": 2116, "user_id": 6780663, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9207ba3b9163582570078b687f9b2792?s=128&d=identicon&r=PG&f=1", "display_name": "Alejandro Montilla", "link": "https://stackoverflow.com/users/6780663/alejandro-montilla"}, "reply_to_user": {"reputation": 178, "user_id": 7691010, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/eebf967a647150dd15891230e464abd1?s=128&d=identicon&r=PG&f=1", "display_name": "Krawalla", "link": "https://stackoverflow.com/users/7691010/krawalla"}, "edited": false, "score": 0, "creation_date": 1490200180, "post_id": 42955739, "comment_id": 73009491, "body": "That must be because your <code>@current_user</code> variable stores a user without entries, can you check the value of that varaible just before the call of you <code>.count</code>?"}, {"owner": {"reputation": 178, "user_id": 7691010, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/eebf967a647150dd15891230e464abd1?s=128&d=identicon&r=PG&f=1", "display_name": "Krawalla", "link": "https://stackoverflow.com/users/7691010/krawalla"}, "edited": false, "score": 0, "creation_date": 1490200515, "post_id": 42955739, "comment_id": 73009723, "body": "<code>CACHE (0.0ms)  SELECT  &quot;users&quot;.* FROM &quot;users&quot; WHERE &quot;users&quot;.&quot;id&quot; = ? LIMIT 1  [[&quot;id&quot;, &quot;4&quot;]]    (0.2ms)  SELECT COUNT(*) FROM &quot;orders&quot; WHERE &quot;oreders&quot;.&quot;agent_id&quot; IS NULL</code>"}, {"owner": {"reputation": 2116, "user_id": 6780663, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9207ba3b9163582570078b687f9b2792?s=128&d=identicon&r=PG&f=1", "display_name": "Alejandro Montilla", "link": "https://stackoverflow.com/users/6780663/alejandro-montilla"}, "reply_to_user": {"reputation": 178, "user_id": 7691010, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/eebf967a647150dd15891230e464abd1?s=128&d=identicon&r=PG&f=1", "display_name": "Krawalla", "link": "https://stackoverflow.com/users/7691010/krawalla"}, "edited": false, "score": 0, "creation_date": 1490200687, "post_id": 42955739, "comment_id": 73009858, "body": "Ok, lets try this, do you have your <code>.count</code> method call in a controller??"}, {"owner": {"reputation": 2116, "user_id": 6780663, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9207ba3b9163582570078b687f9b2792?s=128&d=identicon&r=PG&f=1", "display_name": "Alejandro Montilla", "link": "https://stackoverflow.com/users/6780663/alejandro-montilla"}, "reply_to_user": {"reputation": 178, "user_id": 7691010, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/eebf967a647150dd15891230e464abd1?s=128&d=identicon&r=PG&f=1", "display_name": "Krawalla", "link": "https://stackoverflow.com/users/7691010/krawalla"}, "edited": false, "score": 0, "creation_date": 1490201292, "post_id": 42955739, "comment_id": 73010284, "body": "Let us <a href=\"http://chat.stackoverflow.com/rooms/138752/discussion-between-alejandro-montilla-and-krawalla\">continue this discussion in chat</a>."}], "tags": [], "owner": {"reputation": 2116, "user_id": 6780663, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9207ba3b9163582570078b687f9b2792?s=128&d=identicon&r=PG&f=1", "display_name": "Alejandro Montilla", "link": "https://stackoverflow.com/users/6780663/alejandro-montilla"}, "is_accepted": true, "score": 2, "last_activity_date": 1490198686, "last_edit_date": 1592644375, "creation_date": 1490195762, "answer_id": 42955739, "question_id": 42955188, "link": "https://stackoverflow.com/questions/42955188/sum-up-amount-of-entries-in-a-table-in-ruby-on-rails/42955739#42955739", "title": "sum up amount of entries in a table in Ruby on Rails", "body": "<p>If I understood correctly, what you need is the amount of entries by <code>:agent_id</code>, this should work:</p>\n<pre><code>Order.group(:agent_id).count\n</code></pre>\n<p>And the result is</p>\n<blockquote>\n<p>=&gt; {1=&gt;4, 2=&gt;2, 3=&gt;3}</p>\n</blockquote>\n<h3>Edit:</h3>\n<p>If what you need is the count of the <em><strong>current_user</strong></em>:</p>\n<pre><code>Order.where(agent_id: @current_user).count\n</code></pre>\n<p>So if <em><strong>current_user</strong></em> is '1', you get:</p>\n<blockquote>\n<p>=&gt; 4</p>\n</blockquote>\n"}, {"comments": [{"owner": {"reputation": 178, "user_id": 7691010, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/eebf967a647150dd15891230e464abd1?s=128&d=identicon&r=PG&f=1", "display_name": "Krawalla", "link": "https://stackoverflow.com/users/7691010/krawalla"}, "edited": false, "score": 0, "creation_date": 1490197476, "post_id": 42955804, "comment_id": 73007522, "body": "well this sounds pretty reasonable... however, this error occurs: <code>undefined local variable or method &#39;params&#39; for #&lt;User:0x007ff180140f18&gt;</code>"}, {"owner": {"reputation": 670, "user_id": 5119800, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/56905a0cf92d1acb655373d393569923?s=128&d=identicon&r=PG&f=1", "display_name": "JayJay", "link": "https://stackoverflow.com/users/5119800/jayjay"}, "reply_to_user": {"reputation": 178, "user_id": 7691010, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/eebf967a647150dd15891230e464abd1?s=128&d=identicon&r=PG&f=1", "display_name": "Krawalla", "link": "https://stackoverflow.com/users/7691010/krawalla"}, "edited": false, "score": 0, "creation_date": 1490261944, "post_id": 42955804, "comment_id": 73036692, "body": "This is psudo code, you&#39;ll need to pass in the agent_id somehow, this could either be via the request parameters (params) from the controller, or from a variable derived by some other means:  agent = 123 Order.where(agent_id: agent).count"}], "tags": [], "owner": {"reputation": 670, "user_id": 5119800, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/56905a0cf92d1acb655373d393569923?s=128&d=identicon&r=PG&f=1", "display_name": "JayJay", "link": "https://stackoverflow.com/users/5119800/jayjay"}, "is_accepted": false, "score": 1, "last_activity_date": 1490195926, "creation_date": 1490195926, "answer_id": 42955804, "question_id": 42955188, "link": "https://stackoverflow.com/questions/42955188/sum-up-amount-of-entries-in-a-table-in-ruby-on-rails/42955804#42955804", "title": "sum up amount of entries in a table in Ruby on Rails", "body": "<p>Assuming by 'certain', you're sending some sort of request to the controller, specifying the agent you want to query...</p>\n\n<pre><code>Order.where(agent_id: params[:agent_id]).count\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 178, "user_id": 7691010, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/eebf967a647150dd15891230e464abd1?s=128&d=identicon&r=PG&f=1", "display_name": "Krawalla", "link": "https://stackoverflow.com/users/7691010/krawalla"}, "edited": false, "score": 0, "creation_date": 1490197573, "post_id": 42955811, "comment_id": 73007585, "body": "this actually works as you described. I only want to display the &quot;count&quot; of the current user. Each user can either be an agent or a client. So user_id is not necessarily = agent_id. Anyway, each agent shall only see his own count..."}], "tags": [], "owner": {"reputation": 1434, "user_id": 5010370, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/5ef5c21eb66b79ab4fa94df6b40be5b4?s=128&d=identicon&r=PG&f=1", "display_name": "Lasse Sviland", "link": "https://stackoverflow.com/users/5010370/lasse-sviland"}, "is_accepted": false, "score": 1, "last_activity_date": 1490195935, "creation_date": 1490195935, "answer_id": 42955811, "question_id": 42955188, "link": "https://stackoverflow.com/questions/42955188/sum-up-amount-of-entries-in-a-table-in-ruby-on-rails/42955811#42955811", "title": "sum up amount of entries in a table in Ruby on Rails", "body": "<p>With activerecord you can use the <code>count</code> method for counting the results.</p>\n\n<pre><code>Order.count # =&gt; 9\n</code></pre>\n\n<p>With the <code>group</code> method you can group the results by another column.</p>\n\n<pre><code>Order.group(:agent_id) # =&gt; #&lt;ActiveRecord::Relation [ ... ] &gt; \n</code></pre>\n\n<p>Together you can get the results you want:</p>\n\n<pre><code>Order.group(:agent_id).count # =&gt; {1: 4, 2: 2, 3: 3}\n</code></pre>\n"}], "owner": {"reputation": 178, "user_id": 7691010, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/eebf967a647150dd15891230e464abd1?s=128&d=identicon&r=PG&f=1", "display_name": "Krawalla", "link": "https://stackoverflow.com/users/7691010/krawalla"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 89, "favorite_count": 0, "accepted_answer_id": 42955739, "answer_count": 3, "score": 2, "last_activity_date": 1490199976, "creation_date": 1490194424, "last_edit_date": 1490199976, "question_id": 42955188, "link": "https://stackoverflow.com/questions/42955188/sum-up-amount-of-entries-in-a-table-in-ruby-on-rails", "title": "sum up amount of entries in a table in Ruby on Rails", "body": "<p>I've got a table that looks like this</p>\n\n<p><a href=\"https://i.stack.imgur.com/A1Yiq.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/A1Yiq.png\" alt=\"enter image description here\"></a></p>\n\n<p>I want to display the amount of entries by a certain agent. I know I can use e.g.</p>\n\n<pre><code>orders.sum(:demand)\n</code></pre>\n\n<p>to sum up the demand. (table is called orders) However, there has to be a way to sum up the entries right? E.g. for agent 1, this would be 4, for agent 2 it would be 1 and for agent 3 it would be 4 entries (as can be seen in the screenshot).</p>\n\n<p>Any ideas?</p>\n"}, {"tags": ["ruby", "mongodb", "text", "cucumber"], "answers": [{"tags": [], "owner": {"reputation": 1036, "user_id": 5078051, "user_type": "registered", "accept_rate": 67, "profile_image": "https://graph.facebook.com/10203328378168774/picture?type=large", "display_name": "Hsiu Chuan Tsao", "link": "https://stackoverflow.com/users/5078051/hsiu-chuan-tsao"}, "is_accepted": false, "score": 0, "last_activity_date": 1490205350, "last_edit_date": 1495541843, "creation_date": 1490205350, "answer_id": 42959298, "question_id": 42954931, "link": "https://stackoverflow.com/questions/42954931/how-can-i-copy-the-complete-huge-text-file-data-to-mongo-db-using-ruby-at-a-time/42959298#42959298", "title": "How can i copy the complete huge text file data to Mongo DB using Ruby at a time?", "body": "<p>Maybe you can use <code>insert()</code> or <code>insertMany()</code> function</p>\n\n<p><a href=\"https://stackoverflow.com/questions/36792649/whats-the-difference-between-insert-insertone-and-insertmany-method\">What&#39;s the difference between insert(), insertOne() and insertMany() method?</a></p>\n"}], "owner": {"reputation": 9, "user_id": 7471458, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a6f819f42050c3d2e96182c61ea7d765?s=128&d=identicon&r=PG&f=1", "display_name": "vardhan", "link": "https://stackoverflow.com/users/7471458/vardhan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 67, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1490205350, "creation_date": 1490193825, "last_edit_date": 1490193875, "question_id": 42954931, "link": "https://stackoverflow.com/questions/42954931/how-can-i-copy-the-complete-huge-text-file-data-to-mongo-db-using-ruby-at-a-time", "title": "How can i copy the complete huge text file data to Mongo DB using Ruby at a time?", "body": "<pre><code>accountInsert = @collection.insert_one({\"Acctnum\" =&gt;   })\n</code></pre>\n\n<p>using this i am able push the record from text file to mongo one by one but it is taking huge time. Is there any way to push the complete file at a time ???</p>\n"}, {"tags": ["ruby", "xml", "nokogiri"], "owner": {"reputation": 21, "user_id": 4957393, "user_type": "registered", "profile_image": "https://graph.facebook.com/1334534185/picture?type=large", "display_name": "Archangel", "link": "https://stackoverflow.com/users/4957393/archangel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 94, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1490193609, "creation_date": 1490193609, "question_id": 42954828, "link": "https://stackoverflow.com/questions/42954828/how-do-xml-processors-handle-unparsed-entities", "title": "How do XML processors handle unparsed entities?", "body": "<p>Based on the research I've performed thus far, external unparsed XML entities are used to reference data that isn't necessarily XML. This provides a means of transferring non-XML data. As such, unparsed entities are dereferenced only in entity attributes since the dereferenced value will not conform to the structure of an XML document.</p>\n\n<p>This all makes sense but I'm lost as to when/what dereferences the targeted file declared in the entity definition. Does the XML parser itself access the targeted file, extract the data, and then place it into the XML document? Or does the client, i.e. consumer of the XML document, access the data and act on it accordingly?</p>\n\n<p>Admittedly, the issue could be that I have the XML processor I'm using (<code>Nokogiri::Version #=&gt; \"1.6.8.1\"</code>) configured improperly but parsed external entities are successfully dereferenced.</p>\n\n<p>Below is a bit of code to support my question:</p>\n\n<p><em>External DTD file hosted @ <a href=\"http://127.0.0.1:81/some.dtd:_\" rel=\"nofollow noreferrer\">http://127.0.0.1:81/some.dtd:</em></a></p>\n\n<pre><code>&lt;!ELEMENT rootsies ANY&gt;\n&lt;!ELEMENT arbitrary ANY&gt;\n&lt;!ELEMENT viewer EMPTY&gt;\n&lt;!ATTLIST viewer source ENTITY #REQUIRED&gt;\n&lt;!ENTITY gif_source SYSTEM \"file:///var/www/html/some.gif\" NDATA gif&gt;\n&lt;!NOTATION gif SYSTEM \"text viewer\"&gt;\n&lt;!ENTITY arbitrary_text \"some text\"&gt;\n</code></pre>\n\n<p><em>XML File</em></p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"no\"?&gt;\n&lt;!DOCTYPE rootsies SYSTEM \"http://127.0.0.1:81/some.dtd\"&gt;\n&lt;rootsies&gt;\n    &lt;viewer source=\"gif_source\"/&gt;\n    &lt;arbitrary&gt;&amp;arbitrary_text;&lt;/arbitrary&gt;\n&lt;/rootsies&gt;\n</code></pre>\n\n<p><em>Nokogiri Output</em></p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"no\"?&gt;\n&lt;!DOCTYPE rootsies SYSTEM \"http://127.0.0.1:81/some.dtd\"&gt;\n&lt;rootsies&gt;\n    &lt;viewer source=\"gif_source\"/&gt;\n    &lt;arbitrary&gt;some text&lt;/arbitrary&gt;\n&lt;/rootsies&gt;\n</code></pre>\n\n<p>I figure I might as well post my rough harness at this point:</p>\n\n<p><em>Ruby Code</em></p>\n\n<pre><code>#!/usr/bin/ruby\n\nrequire 'nokogiri'\n\ndef print_errors(doc)\n\n    if doc.errors != []\n\n        ban = \"Warning: Parse errors detected\"\n\n        puts\n        puts \"-\" * ban.bytesize\n        puts ban\n        puts \"-\" * ban.bytesize\n        puts doc.errors\n        puts \"-\" * ban.bytesize\n        puts\n\n    end\n\nend\n\n# XML Parser Options (Nokogiri Options)\noptions = Nokogiri::XML::ParseOptions.new()\noptions.recover\noptions.dtdload\noptions.noent\noptions.noblanks\noptions.dtdvalid # Uncomment to enforce DTD validation\n\n# External DTD Example\next_dtd = %`&lt;?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"no\"?&gt;\n&lt;!DOCTYPE rootsies SYSTEM \"http://127.0.0.1:81/some.dtd\"&gt;\n&lt;rootsies&gt;\n    &lt;viewer source=\"gif_source\"/&gt;\n    &lt;arbitrary&gt;&amp;arbitrary_text;&lt;/arbitrary&gt;\n&lt;/rootsies&gt;`\n\ndoc = Nokogiri::XML(ext_dtd, nil, nil, options)\n\nprint_errors(doc)\n\nputs doc\n\nprint_errors(doc)\n</code></pre>\n"}, {"tags": ["ruby", "activerecord", "rails-activerecord"], "answers": [{"comments": [{"owner": {"reputation": 396, "user_id": 7470815, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-2dkYqnfFeao/AAAAAAAAAAI/AAAAAAAAAG0/XKVwtqt15Ec/photo.jpg?sz=128", "display_name": "Ehren Murdick", "link": "https://stackoverflow.com/users/7470815/ehren-murdick"}, "edited": false, "score": 0, "creation_date": 1490222415, "post_id": 42963967, "comment_id": 73022001, "body": "You would need to be using JRuby to use JDBC, and it&#39;s not 100% compatible with MRI ruby so you can&#39;t just switch to it usually."}, {"owner": {"reputation": 3069, "user_id": 1394981, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/8bc6f5d86a2a8d7ed90dea48ca7c67e2?s=128&d=identicon&r=PG", "display_name": "Matt Westlake", "link": "https://stackoverflow.com/users/1394981/matt-westlake"}, "edited": false, "score": 0, "creation_date": 1490361866, "post_id": 42963967, "comment_id": 73090814, "body": "ok.  I wasn&#39;t sure if I had a JRE installed if there was a way for it to work."}], "tags": [], "owner": {"reputation": 396, "user_id": 7470815, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-2dkYqnfFeao/AAAAAAAAAAI/AAAAAAAAAG0/XKVwtqt15Ec/photo.jpg?sz=128", "display_name": "Ehren Murdick", "link": "https://stackoverflow.com/users/7470815/ehren-murdick"}, "is_accepted": false, "score": 1, "last_activity_date": 1490222357, "creation_date": 1490222357, "answer_id": 42963967, "question_id": 42954632, "link": "https://stackoverflow.com/questions/42954632/can-you-use-the-jdbc-adapter-on-mri-ruby/42963967#42963967", "title": "Can you use the JDBC adapter on MRI ruby", "body": "<p>Nope. JDBC will only work on the JRE, and MRI Ruby has nothing to do with the JRE.</p>\n"}], "owner": {"reputation": 3069, "user_id": 1394981, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/8bc6f5d86a2a8d7ed90dea48ca7c67e2?s=128&d=identicon&r=PG", "display_name": "Matt Westlake", "link": "https://stackoverflow.com/users/1394981/matt-westlake"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 82, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1490222357, "creation_date": 1490193149, "question_id": 42954632, "link": "https://stackoverflow.com/questions/42954632/can-you-use-the-jdbc-adapter-on-mri-ruby", "title": "Can you use the JDBC adapter on MRI ruby", "body": "<p>We're dealing with OCI issues with MRI Ruby and would like to use the gem <code>activerecord-jdbc-adapter</code> to simplify the process.  Is it possible to use JDBC with MRI Ruby?  I've started down the rabbit hole of <code>oracle-enhanced</code> and <code>activerecord-jdbc-adapter</code> but it looks like there's no straight forward way.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "haml", "favicon"], "comments": [{"owner": {"reputation": 19261, "user_id": 4758119, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/F4dJY.jpg?s=128&g=1", "display_name": "Deepak Mahakale", "link": "https://stackoverflow.com/users/4758119/deepak-mahakale"}, "edited": false, "score": 0, "creation_date": 1490192822, "post_id": 42954366, "comment_id": 73003641, "body": "you have a typo <code>favicon_link_tog</code> instead of <code>favicon_link_tag</code>"}, {"owner": {"reputation": 3867, "user_id": 3906189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/432b41df14bd9197f1b8601cabf49386?s=128&d=identicon&r=PG", "display_name": "siegy22", "link": "https://stackoverflow.com/users/3906189/siegy22"}, "edited": false, "score": 0, "creation_date": 1490193964, "post_id": 42954366, "comment_id": 73004637, "body": "I think you want this to be in the public folder."}, {"owner": {"reputation": 3815, "user_id": 8522, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/c66647afc15f19c1656585a261b71cfc?s=128&d=identicon&r=PG", "display_name": "memius", "link": "https://stackoverflow.com/users/8522/memius"}, "reply_to_user": {"reputation": 19261, "user_id": 4758119, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/F4dJY.jpg?s=128&g=1", "display_name": "Deepak Mahakale", "link": "https://stackoverflow.com/users/4758119/deepak-mahakale"}, "edited": false, "score": 0, "creation_date": 1490194462, "post_id": 42954366, "comment_id": 73005075, "body": "@DeepakMahakale: thanks! edited."}, {"owner": {"reputation": 3815, "user_id": 8522, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/c66647afc15f19c1656585a261b71cfc?s=128&d=identicon&r=PG", "display_name": "memius", "link": "https://stackoverflow.com/users/8522/memius"}, "reply_to_user": {"reputation": 3867, "user_id": 3906189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/432b41df14bd9197f1b8601cabf49386?s=128&d=identicon&r=PG", "display_name": "siegy22", "link": "https://stackoverflow.com/users/3906189/siegy22"}, "edited": false, "score": 0, "creation_date": 1490194577, "post_id": 42954366, "comment_id": 73005170, "body": "@siegy22: as I mentioned, I have tried that too, although putting it in the public folder is for when you are <i>not</i> using the asset pipeline."}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1490197876, "post_id": 42954366, "comment_id": 73007823, "body": "None of the syntaxes you&#39;ve tried produces any HTML output?"}, {"owner": {"reputation": 3867, "user_id": 3906189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/432b41df14bd9197f1b8601cabf49386?s=128&d=identicon&r=PG", "display_name": "siegy22", "link": "https://stackoverflow.com/users/3906189/siegy22"}, "edited": false, "score": 0, "creation_date": 1490202579, "post_id": 42954366, "comment_id": 73011127, "body": "@memius I don&#39;t think that this is a good idea, I don&#39;t know if browsers will notify that this is the favicon if it has a cache key in it.."}, {"owner": {"reputation": 3815, "user_id": 8522, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/c66647afc15f19c1656585a261b71cfc?s=128&d=identicon&r=PG", "display_name": "memius", "link": "https://stackoverflow.com/users/8522/memius"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1490282527, "post_id": 42954366, "comment_id": 73052441, "body": "@Stefan: no, weirdly, I see no HTML output no matter what I&#39;ve tried. I&#39;ve tried with a couple of different .ico-files, in case there was something wrong with the file itself, but no luck."}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1490348288, "post_id": 42954366, "comment_id": 73081953, "body": "If <code>%link</code> doesn&#39;t create a <code>&lt;link&gt;</code> tag, something is seriously broken and it is not caused by a missing favicon."}, {"owner": {"reputation": 3815, "user_id": 8522, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/c66647afc15f19c1656585a261b71cfc?s=128&d=identicon&r=PG", "display_name": "memius", "link": "https://stackoverflow.com/users/8522/memius"}, "reply_to_user": {"reputation": 3867, "user_id": 3906189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/432b41df14bd9197f1b8601cabf49386?s=128&d=identicon&r=PG", "display_name": "siegy22", "link": "https://stackoverflow.com/users/3906189/siegy22"}, "edited": false, "score": 0, "creation_date": 1490947526, "post_id": 42954366, "comment_id": 73348565, "body": "@siegy22: now that I got it working, the HTML for my page shows that the generated, fingerprinted favicon file from my asset pipeline is indeed being used. The original, unfingerprinted <code>favicon.ico</code> is in <code>app&#47;assets&#47;images</code>, to make it available for the asset pipeline."}], "answers": [{"tags": [], "owner": {"reputation": 3815, "user_id": 8522, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/c66647afc15f19c1656585a261b71cfc?s=128&d=identicon&r=PG", "display_name": "memius", "link": "https://stackoverflow.com/users/8522/memius"}, "is_accepted": false, "score": 0, "last_activity_date": 1490947641, "last_edit_date": 1490947641, "creation_date": 1490946399, "answer_id": 43135295, "question_id": 42954366, "link": "https://stackoverflow.com/questions/42954366/favicon-ico-wont-show-up-in-rails-4/43135295#43135295", "title": "favicon.ico won&#39;t show up in Rails 4", "body": "<p>It turned out the people who were working on this rails app before me had added <code>landing.html.haml</code>, where I needed to put the <code>favicon_link_tag</code>. It had no effect in <code>application.html.haml</code>.</p>\n\n<p>I also had to run</p>\n\n<blockquote>\n  <p>rake assets:clobber</p>\n</blockquote>\n\n<p>in order for the rails cache to be flushed, and the favicon.ico to get noticed.</p>\n\n<p>I had been running</p>\n\n<blockquote>\n  <p>rake assets:clean</p>\n</blockquote>\n\n<p>which is for Rails 3, and doesn't do what I expect it to in Rails 4.</p>\n"}], "owner": {"reputation": 3815, "user_id": 8522, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/c66647afc15f19c1656585a261b71cfc?s=128&d=identicon&r=PG", "display_name": "memius", "link": "https://stackoverflow.com/users/8522/memius"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 307, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1490947641, "creation_date": 1490192517, "last_edit_date": 1490946814, "question_id": 42954366, "link": "https://stackoverflow.com/questions/42954366/favicon-ico-wont-show-up-in-rails-4", "title": "favicon.ico won&#39;t show up in Rails 4", "body": "<p>I have a 16x16 favicon.ico in app/assets/images. When I run</p>\n\n<blockquote>\n  <p>rake assets:clean</p>\n</blockquote>\n\n<p>and then </p>\n\n<blockquote>\n  <p>rake assets:precompile</p>\n</blockquote>\n\n<p>I can see that two fingerprinted files; <code>favicon.ico</code> and <code>favicon.ico.gz</code>, are generated in <code>public/assets</code>, as they should, because I am using the asset pipeline.</p>\n\n<p>My <code>application.html.haml</code> contains this line, in the <code>%head</code> section:</p>\n\n<pre><code>= favicon_link_tag\n</code></pre>\n\n<p>However, no GET requests for <code>favicon.ico</code> appear in the terminal where</p>\n\n<blockquote>\n  <p>rails server</p>\n</blockquote>\n\n<p>is running. Also, no html for favicon appears on my page when I type 'Ctrl U' to view the page source.</p>\n\n<p>I have tried to put <code>favicon.ico</code> in <code>public/img</code>, and to have it in both locations. I have tried various syntaxes for the line in <code>application.html.haml</code>, such as:</p>\n\n<pre><code>= favicon_link_tag \"favicon.ico\"\n\n= favicon_link_tag \"app/assets/images/favicon.ico\"\n\n%link{:href =&gt; \"favicon.ico\", :type =&gt; \"image/x-icon\"}\n</code></pre>\n\n<p>and so on. Flushing the browser cache is not relevant, since no GET request is made. I have deleted all favicons from the codebase, and put in new ones in various locations. What am I missing?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "caching", "sprockets"], "answers": [{"tags": [], "owner": {"reputation": 2224, "user_id": 685084, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/171a5c25daa169a55db77447d6b0dd66?s=128&d=identicon&r=PG", "display_name": "Jamsi", "link": "https://stackoverflow.com/users/685084/jamsi"}, "is_accepted": true, "score": 2, "last_activity_date": 1513813194, "creation_date": 1513813194, "answer_id": 47915866, "question_id": 42954065, "link": "https://stackoverflow.com/questions/42954065/i-am-not-able-to-disable-the-sprockets-assets-caching-in-rails/47915866#47915866", "title": "I am not able to disable the sprockets assets caching in rails", "body": "<p>As per the <a href=\"http://guides.rubyonrails.org/asset_pipeline.html#assets-cache-store\" rel=\"nofollow noreferrer\">Rails docs</a>, add the following code block to your environments/development.rb</p>\n\n<pre><code>config.assets.configure do |env|\n  env.cache = ActiveSupport::Cache.lookup_store(:null_store)\nend\n</code></pre>\n"}], "owner": {"reputation": 512, "user_id": 6950578, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/2d06a05f48e9f4b810136e8a4348c014?s=128&d=identicon&r=PG&f=1", "display_name": "john", "link": "https://stackoverflow.com/users/6950578/john"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 241, "favorite_count": 1, "accepted_answer_id": 47915866, "answer_count": 1, "score": 0, "last_activity_date": 1513813194, "creation_date": 1490191771, "question_id": 42954065, "link": "https://stackoverflow.com/questions/42954065/i-am-not-able-to-disable-the-sprockets-assets-caching-in-rails", "title": "I am not able to disable the sprockets assets caching in rails", "body": "<p>I have tried a lot to disable sprockets asset cache in rails but no vain. I have tried to configure development.rb but it is not working at at all.\nI am using this code to disable cache generation</p>\n\n<pre><code>config.assets.cache_store = :null_store  # Disables the Asset cache\nconfig.sass.cache = false  # Disable the SASS compiler cache\n</code></pre>\n\n<p>ruby version=2.3.3\nrails version=5.0.1\nthanks in advance.</p>\n"}, {"tags": ["ruby", "docker", "rubygems", "bundler"], "answers": [{"comments": [{"owner": {"reputation": 16900, "user_id": 597992, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/d265520bc3ae286b9b3e05e35812cc97?s=128&d=identicon&r=PG", "display_name": "jpw", "link": "https://stackoverflow.com/users/597992/jpw"}, "edited": false, "score": 0, "creation_date": 1582351681, "post_id": 43023690, "comment_id": 106756136, "body": "very happy you posted this I was getting the same error message and switching to CMD from ENTRYPOINT made <code>docker-compose run web bundle install</code> work"}], "tags": [], "owner": {"reputation": 689, "user_id": 4409186, "user_type": "registered", "accept_rate": 38, "profile_image": "https://lh3.googleusercontent.com/-M_x58hCBTVU/AAAAAAAAAAI/AAAAAAAAqJw/sdHmd03mFwc/photo.jpg?sz=128", "display_name": "erikdstock", "link": "https://stackoverflow.com/users/4409186/erikdstock"}, "is_accepted": true, "score": 3, "last_activity_date": 1490489164, "creation_date": 1490489164, "answer_id": 43023690, "question_id": 42953740, "link": "https://stackoverflow.com/questions/42953740/bundler-locks-in-docker-cant-install-gems-solved-docker-cmd-vs-entrypoint/43023690#43023690", "title": "Bundler locks in docker + can&#39;t install gems (Solved- docker CMD vs ENTRYPOINT)", "body": "<p>Wow, I figured it out. The problem was coming from my ENTRYPOINT dockerfile command, as explained at the end of <a href=\"https://www.ctl.io/developers/blog/post/dockerfile-entrypoint-vs-cmd\" rel=\"nofollow noreferrer\">this article on CMD vs ENTRYPOINT</a>.</p>\n\n<p>I believe the result of <code>ENTRYPOINT [\"bundle\", \"exec\"]</code> with <code>CMD [\"./script/start.sh\"]</code> OR <code>docker-compose run app bash</code> was to run a command like <code>bundle exec 'bash'</code>. I confirmed this by removing the entrypoint from the dockerfile, entering the shell as above and manually running <code>bundle exec 'bash'</code> and sure enough i landed in a subshell where I couldn't run any bundle or gem commands- had to <code>exit</code> twice to leave.</p>\n"}], "owner": {"reputation": 689, "user_id": 4409186, "user_type": "registered", "accept_rate": 38, "profile_image": "https://lh3.googleusercontent.com/-M_x58hCBTVU/AAAAAAAAAAI/AAAAAAAAqJw/sdHmd03mFwc/photo.jpg?sz=128", "display_name": "erikdstock", "link": "https://stackoverflow.com/users/4409186/erikdstock"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2214, "favorite_count": 0, "accepted_answer_id": 43023690, "answer_count": 1, "score": 1, "last_activity_date": 1490822334, "creation_date": 1490191007, "last_edit_date": 1490822334, "question_id": 42953740, "link": "https://stackoverflow.com/questions/42953740/bundler-locks-in-docker-cant-install-gems-solved-docker-cmd-vs-entrypoint", "title": "Bundler locks in docker + can&#39;t install gems (Solved- docker CMD vs ENTRYPOINT)", "body": "<p>Update: I've narrowed the [or a?] problem down to the line <code>- groupy-gemcache:/usr/local/bundle</code> in my <code>services: app: volumes</code> dictionary. If I remove it, the container runs fine [i think] but presumably i lose my local gem cacheing.</p>\n\n<p>tldr: After running docker-compose build, things seem ok, but I cannot run <strong>any</strong> <code>gem</code> or <code>bundle</code> inside my running docker container if I add something to my gemfile. for example, after <code>docker-compose build &amp;&amp; docker-compose run app bash</code>:</p>\n\n<pre><code>root@2ea58aff612e:/src# bundle check\nThe Gemfile's dependencies are satisfied\nroot@2ea58aff612e:/src# echo 'gem \"hello-world\"' &gt;&gt; Gemfile\nroot@2ea58aff612e:/src# bundle\nCould not find gem 'hello-world' in any of the gem sources listed in your Gemfile.\nRun `bundle install` to install missing gems.\nroot@2ea58aff612e:/src# bundle install\nCould not find gem 'hello-world' in any of the gem sources listed in your Gemfile.\nRun `bundle install` to install missing gems.\nroot@2ea58aff612e:/src# gem\nCould not find gem 'hello-world' in any of the gem sources listed in your Gemfile.\nRun `bundle install` to install missing gems.\nroot@2ea58aff612e:/src# gem env\nCould not find gem 'hello-world' in any of the gem sources listed in your Gemfile.\nRun `bundle install` to install missing gems.\n</code></pre>\n\n<p>I'm still pretty novice with docker, but i've been trying to configure a perfect dockerfile that can build, cache gems and update while still committing its Gemfile.lock to git [maybe this isn't actually perfect and I'm open to suggestions there]. In my use case, I'm using a docker compose file with images for a rails app and sidekiq worker as well as postgres and redis images- very simliar to the setups described <a href=\"https://semaphoreci.com/community/tutorials/dockerizing-a-ruby-on-rails-application\" rel=\"nofollow noreferrer\">here</a> and <a href=\"https://runnable.com/docker/rails/dockerize-your-ruby-on-rails-application\" rel=\"nofollow noreferrer\">here</a>.</p>\n\n<p>My Dockerfile [some things commented out that I cobbled from the tutorials above:</p>\n\n<pre><code>    FROM ruby:2.3\n    ENTRYPOINT [\"bundle\", \"exec\"]\n    ARG bundle_path\n    # throw errors if Gemfile has been modified since Gemfile.lock\n    # RUN bundle config --global frozen 1\n    ENV INSTALL_PATH /src\n    RUN mkdir -p $INSTALL_PATH\n    WORKDIR $INSTALL_PATH\n\n\n\n    # Install dependencies:\n    # - build-essential: To ensure certain gems can be compiled\n    # - nodejs: Compile assets\n    # - npm: Install node modules\n    # - libpq-dev: Communicate with postgres through the postgres gem\n    # - postgresql-client-9.4: In case you want to talk directly to postgres\n    RUN apt-get update &amp;&amp; apt-get install -qq -y build-essential nodejs npm libpq-dev postgresql-client-9.4 --fix-missing --no-install-recommends &amp;&amp; \\\n    rm -rf /var/lib/apt/lists/*\n\n    COPY app/Gemfile app/Gemfile.lock ./\n\n    # Bundle and then save the updated Gemfile.lock in our volume since it will be clobbered in the next step\n    RUN echo $bundle_path &amp;&amp; bundle install --path=$bundle_path &amp;&amp; \\\n    cp Gemfile.lock $bundle_path\n\n    # ./app contains the rails app on host\n    COPY app .\n\n    # Unclobber the updated gemfile.lock\n    RUN mv $bundle_path/Gemfile.lock ./\n\n    CMD [\"./script/start.sh\"]\n</code></pre>\n\n<p>docker-compose.yml:</p>\n\n<pre><code>version: '2'\nvolumes:\n  groupy-redis:\n  groupy-postgres:\n  groupy-gemcache:\n\nservices:\n  app:\n    build: \n      args:\n        bundle_path: /usr/local/bundle\n      context: .\n      dockerfile: Dockerfile\n    command: \"./script/start.sh\"\n    links:\n      - postgres\n      - redis\n    volumes:\n      - ./app:/src\n      - groupy-gemcache:/usr/local/bundle\n    ports:\n      - '3000:3000'\n    env_file:\n      - .docker.env\n    stdin_open: true\n    tty: true\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 1, "creation_date": 1490189008, "post_id": 42952807, "comment_id": 73000624, "body": "I don&#39;t see a <code>get_attrs</code> method defined here at all but you could just use <code>attr_accessor *get_custom_attr</code> which will create virtual attributes for the keys defined (since you said in the post you want to set the values and you code suggests retrieval."}, {"owner": {"reputation": 724, "user_id": 1839938, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/9a8781909b1029b3cd9c15a32961920f?s=128&d=identicon&r=PG", "display_name": "abpetkov", "link": "https://stackoverflow.com/users/1839938/abpetkov"}, "reply_to_user": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1490189446, "post_id": 42952807, "comment_id": 73000936, "body": "It&#39;s a typo. Fixed it, it should be <code>get_custom_attrs</code>."}], "answers": [{"comments": [{"owner": {"reputation": 724, "user_id": 1839938, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/9a8781909b1029b3cd9c15a32961920f?s=128&d=identicon&r=PG", "display_name": "abpetkov", "link": "https://stackoverflow.com/users/1839938/abpetkov"}, "edited": false, "score": 0, "creation_date": 1490189673, "post_id": 42953101, "comment_id": 73001094, "body": "How can I preserve the original idea of making the <code>get_custom_attrs</code> method private?"}, {"owner": {"reputation": 724, "user_id": 1839938, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/9a8781909b1029b3cd9c15a32961920f?s=128&d=identicon&r=PG", "display_name": "abpetkov", "link": "https://stackoverflow.com/users/1839938/abpetkov"}, "edited": false, "score": 0, "creation_date": 1490190659, "post_id": 42953101, "comment_id": 73001897, "body": "What if I want to use that on the class level and instance level? I need to use that within another method and it won&#39;t work."}, {"owner": {"reputation": 1278, "user_id": 2581168, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/9b270277ab230e839d39ac0c67de6244?s=128&d=identicon&r=PG", "display_name": "ymbirtt", "link": "https://stackoverflow.com/users/2581168/ymbirtt"}, "reply_to_user": {"reputation": 724, "user_id": 1839938, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/9a8781909b1029b3cd9c15a32961920f?s=128&d=identicon&r=PG", "display_name": "abpetkov", "link": "https://stackoverflow.com/users/1839938/abpetkov"}, "edited": false, "score": 0, "creation_date": 1490191067, "post_id": 42953101, "comment_id": 73002236, "body": "@abpetkov, usually for things like this I have something like <code>def the_method; self.class.the_method; end</code>, but the definition of a private method in Ruby is that it cannot be called with a receiver, so that&#39;ll throw an exception. In this case, either <code>get_custom_attrs</code> isn&#39;t actually a private method, or you&#39;re absolutely sure that it is but still want to work around that by using send, so you&#39;d write something like <code>def the_method; self.class.send(:the_method); end</code>"}, {"owner": {"reputation": 724, "user_id": 1839938, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/9a8781909b1029b3cd9c15a32961920f?s=128&d=identicon&r=PG", "display_name": "abpetkov", "link": "https://stackoverflow.com/users/1839938/abpetkov"}, "edited": false, "score": 0, "creation_date": 1490199276, "post_id": 42953101, "comment_id": 73008855, "body": "@ymbirrt there&#39;s something else though, the OuterConcern:: FIELDS that contains an array of symbols will not work for some reason. Hardcoding the array as you mentioned will work, but that&#39;s not what I want to do."}, {"owner": {"reputation": 1278, "user_id": 2581168, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/9b270277ab230e839d39ac0c67de6244?s=128&d=identicon&r=PG", "display_name": "ymbirtt", "link": "https://stackoverflow.com/users/2581168/ymbirtt"}, "reply_to_user": {"reputation": 724, "user_id": 1839938, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/9a8781909b1029b3cd9c15a32961920f?s=128&d=identicon&r=PG", "display_name": "abpetkov", "link": "https://stackoverflow.com/users/1839938/abpetkov"}, "edited": false, "score": 0, "creation_date": 1490200062, "post_id": 42953101, "comment_id": 73009410, "body": "@abpetkov, <code>[:a1, :a2, :a3]</code>  can be replaced with any arbitrary code, the snipped in my answer is just an example. Note that it&#39;ll be executed when the class is defined and never again afterwards. As for <code>OuterConcern::FIELDS</code> not working for some reason, I&#39;m afraid I can&#39;t investigate that, and it sounds like a separate question."}], "tags": [], "owner": {"reputation": 1278, "user_id": 2581168, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/9b270277ab230e839d39ac0c67de6244?s=128&d=identicon&r=PG", "display_name": "ymbirtt", "link": "https://stackoverflow.com/users/2581168/ymbirtt"}, "is_accepted": true, "score": 0, "last_activity_date": 1490189791, "last_edit_date": 1490189791, "creation_date": 1490189403, "answer_id": 42953101, "question_id": 42952807, "link": "https://stackoverflow.com/questions/42952807/define-multiple-setter-methods-in-concern-with-custom-names/42953101#42953101", "title": "Define multiple setter methods in concern with custom names", "body": "<p><code>get_custom_attrs</code> is being executed at the class level, whilst <code>def get_custom_attrs</code> defines the method at the instance level. You need <code>get_custom_attrs</code> to exist as a class method, so you want something like</p>\n\n<pre><code>class MyAwesomeClass\n  class &lt;&lt; self\n    private\n    def get_custom_attrs\n      [:a1,:a2,:a3] # or whatever\n    end\n  end\n  get_custom_attrs.each do |attr|\n    # Some stuff happens here\n  end\nend\n</code></pre>\n"}], "owner": {"reputation": 724, "user_id": 1839938, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/9a8781909b1029b3cd9c15a32961920f?s=128&d=identicon&r=PG", "display_name": "abpetkov", "link": "https://stackoverflow.com/users/1839938/abpetkov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 204, "favorite_count": 0, "accepted_answer_id": 42953101, "answer_count": 1, "score": 0, "last_activity_date": 1490189791, "creation_date": 1490188689, "last_edit_date": 1490189099, "question_id": 42952807, "link": "https://stackoverflow.com/questions/42952807/define-multiple-setter-methods-in-concern-with-custom-names", "title": "Define multiple setter methods in concern with custom names", "body": "<p>I want to define multiple custom methods to set values for custom user fields in the UserConcern, that are not stored in the DB, but are fetched from outer source. I tried the code below, which results in ``': undefined local variable or method <code>get_custom_attrs' for UserConcern:Module (NameError)</code></p>\n\n<pre><code>get_custom_attrs.each do |key|\n  define_method(key) do\n    // returning the value for this key\n  end\nend\n\nprivate\n\ndef get_custom_attrs\n  OuterConcern::FIELDS - User.attribute_names\nend\n</code></pre>\n\n<p>I obviously can't use this method on the top level. If I switch to using a constant variable within the concern, such as <code>CUSTOM_FIELDS = [:custom1, custom2, ...]</code> that will work, but it's not dynamic and I'll have to change it every time a field is changed, added or deleted.</p>\n"}, {"tags": ["ruby", "minitest"], "answers": [{"comments": [{"owner": {"reputation": 211, "user_id": 4207625, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6b672c1aaa6bf9e222e114ec0d1384da?s=128&d=identicon&r=PG&f=1", "display_name": "V&#225;clav Pruner", "link": "https://stackoverflow.com/users/4207625/v%c3%a1clav-pruner"}, "edited": false, "score": 0, "creation_date": 1490191635, "post_id": 42953588, "comment_id": 73002686, "body": "That is precisely what i was looking for. Now what if bar called foo two times and I wanted the stub to return different values on every call? E.g. stub it, so it returns 5 on the first call of foo and 7 on its second call?"}, {"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "reply_to_user": {"reputation": 211, "user_id": 4207625, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6b672c1aaa6bf9e222e114ec0d1384da?s=128&d=identicon&r=PG&f=1", "display_name": "V&#225;clav Pruner", "link": "https://stackoverflow.com/users/4207625/v%c3%a1clav-pruner"}, "edited": false, "score": 1, "creation_date": 1490368519, "post_id": 42953588, "comment_id": 73095425, "body": "@V&#225;clavPruner see update. You just need a callable object to return the expected values. In this case I used a <code>lambda</code> and <code>Enumerator#next</code> to handle the request"}], "tags": [], "owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "is_accepted": true, "score": 1, "last_activity_date": 1490368497, "last_edit_date": 1490368497, "creation_date": 1490190613, "answer_id": 42953588, "question_id": 42952789, "link": "https://stackoverflow.com/questions/42952789/stubbing-a-method-of-tested-class-with-minitest/42953588#42953588", "title": "Stubbing a method of tested class with Minitest", "body": "<p>I think if I understand correctly you are looking for <a href=\"http://www.rubydoc.info/gems/minitest/4.2.0/Object:stub\" rel=\"nofollow noreferrer\">MiniTest::Object#stub</a></p>\n\n<pre><code>def test_bar\n    a = A.new\n    # use stubbed_foo in a instead of foo\n    a.stub :foo, 5 do \n      result = a.bar \n      # some assert\n    end\nend\n</code></pre>\n\n<p>Here is a full example:</p>\n\n<pre><code>require 'minitest/autorun'\n\nclass A \n    def bar\n        foo + 1\n    end\n    def foo \n        3\n    end\nend\n\nclass TestA &lt; MiniTest::Unit::TestCase\n\n    def test_bar\n        a = A.new\n        a.stub :foo, 5 do \n            result = a.bar\n            assert_equal(6,result)\n        end\n    end\n\n  def test_actual_bar\n    a = A.new\n    result = a.bar\n    assert_equal(4,result)\n  end\nend\n</code></pre>\n\n<p><strong>Update: Based on Comment how to return multiple values</strong></p>\n\n<pre><code>class A \n  def bar\n    foo + 1\n  end\n  def foo \n    3\n  end\nend\n\nclass TestA &lt; MiniTest::Unit::TestCase\n\n  def test_bar\n    a = A.new\n    stubbed_foo = [5,7].to_enum\n    a.stub :foo, -&gt;{stubbed_foo.next} do  \n      assert_equal(6,a.bar)\n      assert_equal(8,a.bar)\n    end\n  end\n\n  def test_actual_bar\n    a = A.new\n    assert_equal(4,a.bar)\n  end\nend\n</code></pre>\n"}], "owner": {"reputation": 211, "user_id": 4207625, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6b672c1aaa6bf9e222e114ec0d1384da?s=128&d=identicon&r=PG&f=1", "display_name": "V&#225;clav Pruner", "link": "https://stackoverflow.com/users/4207625/v%c3%a1clav-pruner"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 161, "favorite_count": 0, "accepted_answer_id": 42953588, "answer_count": 1, "score": 1, "last_activity_date": 1490368497, "creation_date": 1490188649, "question_id": 42952789, "link": "https://stackoverflow.com/questions/42952789/stubbing-a-method-of-tested-class-with-minitest", "title": "Stubbing a method of tested class with Minitest", "body": "<p>I am writing a part of larger framework and I have problems with stubbing. Here is what I have </p>\n\n<pre><code>class A\n    def bar\n        # some code\n        foo\n        # some code\n    end\n    def foo\n        # method dependent on other parts of the framework\n    end\nend\n</code></pre>\n\n<p>Now I want to test the method bar, but it depends on foo and foo calls other parts of the framework (which is more a matter of integration testing). What I would like to do is to stub foo in my test, something like:</p>\n\n<pre><code>class TestA &lt; Minitest::Test\n    def stubbed_foo\n        return 5\n    end\n    def test_bar\n        a = A.new\n        # use stubbed_foo in a instead of foo\n        result = a.bar \n        # some assert\n    end\nend\n</code></pre>\n\n<p>But I don't know how to do it.</p>\n"}, {"tags": ["ruby", "metaprogramming"], "answers": [{"tags": [], "owner": {"reputation": 333, "user_id": 857184, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yKQBD.jpg?s=128&g=1", "display_name": "David Stanley", "link": "https://stackoverflow.com/users/857184/david-stanley"}, "is_accepted": false, "score": 1, "last_activity_date": 1490193149, "creation_date": 1490193149, "answer_id": 42954631, "question_id": 42952705, "link": "https://stackoverflow.com/questions/42952705/use-metaprogramming-to-surround-methods-in-a-class/42954631#42954631", "title": "use metaprogramming to surround methods in a class", "body": "<p>You could use an around alias.  Alias the original method, and then redefine it with the extra code:</p>\n\n<pre><code>alias_method :bare_methodname1, :methodname1\n\ndef methodname1(*args)\n  @logger.debug(\"&gt;&gt;#{callee}\")\n  result = bare_methodname1(*args)\n  @logger.debug(\"&lt;&lt;#{callee}\")\n  result\nend\n</code></pre>\n\n<p>This isn't much different from what you've got now, but when you combine it with an array of method names, you get more of what you want:</p>\n\n<pre><code>method_names_ary.each do |name|\n  alias_method \"bare_\" + name, name\n  define_method(name) do |*args|\n    @logger.debug(\"&gt;&gt;#{callee}\")\n    result = send(\"bare_\" + name, *args)\n    @logger.debug(\"&lt;&lt;#{callee}\")\n    result\n  end\nend\n</code></pre>\n\n<p>Put this in the target class outside of any method and it should redefine all the methods in your array to have the extra code you want.  </p>\n"}, {"comments": [{"owner": {"reputation": 706, "user_id": 2347, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bdb00def3c2d91d03289da26ce8c798e?s=128&d=identicon&r=PG", "display_name": "Jonathan Branam", "link": "https://stackoverflow.com/users/2347/jonathan-branam"}, "edited": false, "score": 0, "creation_date": 1556041013, "post_id": 42955861, "comment_id": 98299908, "body": "I believe the line <code>self.class.send(:define_method, method) do |#{params}|</code> should be <code>self.class.send(:define_method, &#39;#{method}&#39;) do |#{params}|</code>"}], "tags": [], "owner": {"reputation": 455, "user_id": 7637917, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-mqDP9mBqkV0/AAAAAAAAAAI/AAAAAAAAACo/tB5bCodsHxw/photo.jpg?sz=128", "display_name": "Dmitry Cat", "link": "https://stackoverflow.com/users/7637917/dmitry-cat"}, "is_accepted": true, "score": 1, "last_activity_date": 1490196035, "creation_date": 1490196035, "answer_id": 42955861, "question_id": 42952705, "link": "https://stackoverflow.com/questions/42952705/use-metaprogramming-to-surround-methods-in-a-class/42955861#42955861", "title": "use metaprogramming to surround methods in a class", "body": "<p>i guess this solution should help:</p>\n\n<pre><code>class Foo\n    def initialize\n        (self.methods - Object.methods).each do |method|\n            # we need to make alias for method\n            self.class.send(:alias_method, \"#{method}_without_callback\", method)\n            # save method params, and destroy old method\n            params = self.method(method).parameters.map(&amp;:last).join(',')\n            self.class.send(:undef_method,  method) \n            # creating new method with old name, and pass params to this\n            eval(\"\n            self.class.send(:define_method, method) do |#{params}|\n                puts 'Call_before'\n                self.send('#{method}_without_callback', #{params})\n                puts 'Call_after'\n            end\n            \")\n        end\n    end\n    def say_without_param\n        puts \"Hello!\"\n    end\n    def say_hi(par1)\n        puts \"Hi, #{par1}\"\n    end\n\n    def say_good_bye(par1, par2)\n        puts \"Good bye, #{par1} #{par2}\"\n    end\nend\n</code></pre>\n\n<p>So when we create an object, after initialization there will be created alias methods, destroyed old methods, and new methods with call_backs will be created;</p>\n\n<p>Usage example:</p>\n\n<pre><code>obj = Foo.new\n\nobj.say_without_param # =&gt; Call_before\n                           Hello!\n                           Call_after\n\nobj.say_hi('Johny') # =&gt;   Call_before\n                           Hi, Johny\n                           Call_after\n\nobj.say_good_bye('mr.', 'Smith') =&gt; Call_before\n                                    Good bye, mr. Smith\n                                    Call_after\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": false, "score": 2, "last_activity_date": 1490537303, "last_edit_date": 1490537303, "creation_date": 1490217560, "answer_id": 42962844, "question_id": 42952705, "link": "https://stackoverflow.com/questions/42952705/use-metaprogramming-to-surround-methods-in-a-class/42962844#42962844", "title": "use metaprogramming to surround methods in a class", "body": "<p>I would be inclined to prepend to the class a dynamically-created anonymous module whose instance methods use <code>super</code> to call an instance method of the class of the same name, after printing a method-entry message and before printing a method-exit message. </p>\n\n<p>Let's begin by creating a class with two instance methods, one passed a block when involked.</p>\n\n<pre><code>class C\n  def mouse(nbr_mice, impairment)\n    puts \"%d %s mice\" % [nbr_mice, impairment]\n  end\n  def hubbard(*args)\n    puts yield args\n  end\nend\n\nC.ancestors\n  #=&gt; [C, Object, Kernel, BasicObject]\nc = C.new\nc.mouse(3, 'blind')\n  # 3 blind mice\nc.hubbard('old', 'mother', 'hubbard') { |a| a.map(&amp;:upcase).join(' ') }\n  # OLD MOTHER HUBBARD\n</code></pre>\n\n<p>Now we construct a method that creates the anonymous module and prepends it to the class.</p>\n\n<pre><code>def loggem(klass, *methods_to_log)\n  log_mod = Module.new do\n    code = methods_to_log.each_with_object('') { |m,str| str &lt;&lt;\n      \"def #{m}(*args); puts \\\"entering #{m}\\\"; super; puts \\\"leaving #{m}\\\"; end\\n\" }\n    class_eval code\n  end\n  klass.prepend(log_mod)\nend\n</code></pre>\n\n<p>We are now ready to invoke this method with the arguments equal to the class to which the module is to be prepended and the instance methods of that class that are to be logged.</p>\n\n<pre><code>loggem(C, :mouse, :hubbard)\n\nC.ancestors\n  #=&gt; [#&lt;Module:0x007fedab9ccf48&gt;, C, Object, Kernel, BasicObject] \n\nc = C.new\nc.method(:mouse).owner\n  #=&gt; #&lt;Module:0x007fedab9ccf48&gt; \nc.method(:mouse).super_method\n  #=&gt; #&lt;Method: Object(C)#mouse&gt; \nc.method(:hubbard).owner\n  #=&gt; #&lt;Module:0x007fedab9ccf48&gt; \nc.method(:hubbard).super_method\n  #=&gt; #&lt;Method: Object(C)#hubbard&gt; \n\nc.mouse(3, 'blind')\n  # entering mouse\n  # 3 blind mice\n  # leaving mouse\nc.hubbard('old', 'mother', 'hubbard') { |a| a.map(&amp;:upcase).join(' ') }\n  # entering hubbard\n  # OLD MOTHER HUBBARD\n  #leaving hubbard\n</code></pre>\n\n<p>See <a href=\"https://ruby-doc.org/core-2.2.0/Module.html#method-c-new\" rel=\"nofollow noreferrer\">Module::new</a> and <a href=\"http://ruby-doc.org/core-2.4.0/Module.html#method-i-prepend\" rel=\"nofollow noreferrer\">Module#prepend</a>. </p>\n"}, {"tags": [], "owner": {"reputation": 1843, "user_id": 4067720, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a52c645614505bcaeb65a6c5199158c1?s=128&d=identicon&r=PG", "display_name": "Glyoko", "link": "https://stackoverflow.com/users/4067720/glyoko"}, "is_accepted": false, "score": 1, "last_activity_date": 1490220156, "creation_date": 1490220156, "answer_id": 42963490, "question_id": 42952705, "link": "https://stackoverflow.com/questions/42952705/use-metaprogramming-to-surround-methods-in-a-class/42963490#42963490", "title": "use metaprogramming to surround methods in a class", "body": "<p>You could create a class method analogous to <code>def</code> that adds the watchers for you. This would change the method definition syntax a bit but might make for more readable code.</p>\n\n<p>ie</p>\n\n<pre><code>module MethodLogging\n  def log_def(method_name, &amp;definition)\n    define_method(method_name) do |*args|\n      @logger.debug(\"&gt;&gt;#{__callee__}\")\n      definition.call(*args)\n      @logger.debug(\"&lt;&lt;#{__callee__}\")\n    end\n  end\nend\n\nclass MyClass\n  extend MethodLogging\n\n  def initialize\n    # make sure class has @logger defined, or else include it in some way in the MethodLogging module\n    @logger = Logger.new(STDOUT)\n  end\n\n  def regular_method(x)\n    puts x\n  end\n\n  log_def :logged_method do |x|\n    puts x\n  end\nend\n\ninstance = MyClass.new\ninstance.regular_method(3)\n# hello\ninstance.logged_method(3)\n# D, [2017-03-22T14:59:18.889285 #58206] DEBUG -- : &gt;&gt;logged_method\n# world\n# D, [2017-03-22T14:59:18.889440 #58206] DEBUG -- : &lt;&lt;logged_method\n</code></pre>\n\n<p>Aside from the new method definition syntax, there's a minor downside where you get weird behavior if you don't respect the method's arity. Neither <code>instance.logged_method()</code> and <code>instance.logged_method('hello', 'world')</code> will throw an error with this method.</p>\n"}], "owner": {"reputation": 2176, "user_id": 323303, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/1443a67b8c1b8ffd44cddad350ae6e2a?s=128&d=identicon&r=PG", "display_name": "amadain", "link": "https://stackoverflow.com/users/323303/amadain"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 334, "favorite_count": 2, "accepted_answer_id": 42955861, "answer_count": 4, "score": 3, "last_activity_date": 1490537303, "creation_date": 1490188391, "question_id": 42952705, "link": "https://stackoverflow.com/questions/42952705/use-metaprogramming-to-surround-methods-in-a-class", "title": "use metaprogramming to surround methods in a class", "body": "<p>I have classes with methods that log when a method is entered and exited like so:\n<code><br>\n   def methodName1(args)\n     @logger.debug(\">>#{<strong>callee</strong>}\")\n     ...\n     @logger.debug(\"&lt;&lt;#{<strong>callee</strong>}\")\n   end</p>\n\n<p>def methodName2(args)\n     @logger.debug(\">>#{<strong>callee</strong>}\")\n     ...\n     @logger.debug(\"&lt;&lt;#{<strong>callee</strong>}\")\n   end\n</code></p>\n\n<p>I was wondering if there was a metaprogramming way to surround the methods with the logger calls?\nIt would involve identifying all the methods in a class that I want surrounded first and then surrounding them.</p>\n\n<p>A</p>\n"}, {"tags": ["ruby", "scope", "sinatra"], "answers": [{"comments": [{"owner": {"reputation": 2035, "user_id": 3052484, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/pNGYL.jpg?s=128&g=1", "display_name": "Christian Juth", "link": "https://stackoverflow.com/users/3052484/christian-juth"}, "edited": false, "score": 0, "creation_date": 1490191430, "post_id": 42953734, "comment_id": 73002523, "body": "So basically, for some reason, Ruby assumes I am looking in this class and not in the global scope. It would be nice if when I get an undefined error it would check the global scope automatically, kinda how local variables overwrite global in Javascript, but you can still access the global scope."}], "tags": [], "owner": {"reputation": 211, "user_id": 4207625, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6b672c1aaa6bf9e222e114ec0d1384da?s=128&d=identicon&r=PG&f=1", "display_name": "V&#225;clav Pruner", "link": "https://stackoverflow.com/users/4207625/v%c3%a1clav-pruner"}, "is_accepted": true, "score": 1, "last_activity_date": 1490190990, "creation_date": 1490190990, "answer_id": 42953734, "question_id": 42952226, "link": "https://stackoverflow.com/questions/42952226/how-does-module-change-the-scope/42953734#42953734", "title": "How does Module change the scope?", "body": "<p>I am not sure if I get all the technicalities right, but when you have class Sinatra and you use Sinatra::Something inside the class block, ruby interprets it as \"he wants to access the constant Something in this class\".\nIf you change the class name to something other than Sinatra, you should be fine. Or you can use the double colon as a prefix, like this</p>\n\n<pre><code># create CoreController\nmodule Apollo\n  class Sinatra &lt; ::Sinatra::Base\n    configure :development do\n      register ::Sinatra::Reloader\n      also_reload \"app/**/*.rb\"\n      dont_reload \"lib/**/*.rb\"\n    end\n\n    include CoreHelpers\n    include Helpers\n\n    # ----- Config ------\n    configure do\n      set :public_folder, Apollo.config[:sinatra][:public]\n      set :views, Apollo.config[:sinatra][:views]\n      set :static_cache_control, [:public, {:max_age =&gt; 600}]\n      enable :sessions\n      # Set the session secret\n      set :session_secret, \"secret\"\n    end\n  end\nend\n</code></pre>\n\n<p>It basically says ruby to look outside of the class Sinatra for another Sinatras.</p>\n"}], "owner": {"reputation": 2035, "user_id": 3052484, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/pNGYL.jpg?s=128&g=1", "display_name": "Christian Juth", "link": "https://stackoverflow.com/users/3052484/christian-juth"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 54, "favorite_count": 0, "accepted_answer_id": 42953734, "answer_count": 1, "score": 1, "last_activity_date": 1490190990, "creation_date": 1490187215, "question_id": 42952226, "link": "https://stackoverflow.com/questions/42952226/how-does-module-change-the-scope", "title": "How does Module change the scope?", "body": "<h3>My understanding of scope</h3>\n\n<p>I have been a Javascript developer for a long time and I am used to this...</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>var globalVar = \"some value\";\r\n\r\ngetGlobalVar = function(){\r\n  alert(globalVar);\r\n}\r\ngetGlobalVar();</code></pre>\r\n</div>\r\n</div>\r\n</p>\n\n<p>In Javascript everything defined outside of a function is attached to the window object and becomes part of the global scope. Anything that is part of the global scope is accessible within any function - at least as far as I'm aware. I am trying to do something similar in Ruby, but I am getting an error.</p>\n\n<h3>The problem</h3>\n\n<p>Here is how I have the code working:</p>\n\n<pre><code># create CoreController\nSINATRA = Sinatra\nmodule Apollo\n  class Sinatra &lt; SINATRA::Base\n    configure :development do\n      register SINATRA::Reloader\n      also_reload \"app/**/*.rb\"\n      dont_reload \"lib/**/*.rb\"\n    end\n\n    include CoreHelpers\n    include Helpers\n\n    # ----- Config ------\n    configure do\n      set :public_folder, Apollo.config[:sinatra][:public]\n      set :views, Apollo.config[:sinatra][:views]\n      set :static_cache_control, [:public, {:max_age =&gt; 600}]\n      enable :sessions\n      # Set the session secret\n      set :session_secret, \"secret\"\n    end\n  end\nend\n</code></pre>\n\n<p>I added <code>SINATRA = Sinatra</code> as a hack, because I could not access <code>Sinatra::Reloader</code> inside of <code>class Sinatra &lt; SINATRA::Base</code>.</p>\n\n<p>This is what I would like the code to look like:</p>\n\n<pre><code># create CoreController\nmodule Apollo\n  class Sinatra &lt; Sinatra::Base\n    configure :development do\n      register Sinatra::Reloader\n      also_reload \"app/**/*.rb\"\n      dont_reload \"lib/**/*.rb\"\n    end\n\n    include CoreHelpers\n    include Helpers\n\n    # ----- Config ------\n    configure do\n      set :public_folder, Apollo.config[:sinatra][:public]\n      set :views, Apollo.config[:sinatra][:views]\n      set :static_cache_control, [:public, {:max_age =&gt; 600}]\n      enable :sessions\n      # Set the session secret\n      set :session_secret, \"secret\"\n    end\n  end\nend\n</code></pre>\n\n<p>Here is the error I'm getting:</p>\n\n<p><a href=\"https://i.stack.imgur.com/scYyM.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/scYyM.png\" alt=\"enter image description here\"></a></p>\n\n<p>How does putting this code inside of a class change the scope? Shouldn't global variables be accessible anywhere? Any and all help is appreciated.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "actionmailer"], "answers": [{"comments": [{"owner": {"reputation": 79, "user_id": 4880320, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/536d1254af69587aa300d6aafa98eb3a?s=128&d=identicon&r=PG&f=1", "display_name": "ssandoy", "link": "https://stackoverflow.com/users/4880320/ssandoy"}, "edited": false, "score": 0, "creation_date": 1490187624, "post_id": 42952290, "comment_id": 72999619, "body": "Hi. I originally had it as deliver_now, and it still didn&#39;t work. @matov"}, {"owner": {"reputation": 2165, "user_id": 1811752, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/sSedp.png?s=128&g=1", "display_name": "M&#225;t&#233;", "link": "https://stackoverflow.com/users/1811752/m%c3%a1t%c3%a9"}, "reply_to_user": {"reputation": 79, "user_id": 4880320, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/536d1254af69587aa300d6aafa98eb3a?s=128&d=identicon&r=PG&f=1", "display_name": "ssandoy", "link": "https://stackoverflow.com/users/4880320/ssandoy"}, "edited": false, "score": 0, "creation_date": 1490187784, "post_id": 42952290, "comment_id": 72999721, "body": "OK got it. Have you tried the bang method <code>deliver!</code>?"}, {"owner": {"reputation": 79, "user_id": 4880320, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/536d1254af69587aa300d6aafa98eb3a?s=128&d=identicon&r=PG&f=1", "display_name": "ssandoy", "link": "https://stackoverflow.com/users/4880320/ssandoy"}, "edited": false, "score": 0, "creation_date": 1490187957, "post_id": 42952290, "comment_id": 72999839, "body": "This actually worked in some way. I now got a Net::SMTPAuthenticationError. Which means that Google is blocking access to the application?"}, {"owner": {"reputation": 2165, "user_id": 1811752, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/sSedp.png?s=128&g=1", "display_name": "M&#225;t&#233;", "link": "https://stackoverflow.com/users/1811752/m%c3%a1t%c3%a9"}, "reply_to_user": {"reputation": 79, "user_id": 4880320, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/536d1254af69587aa300d6aafa98eb3a?s=128&d=identicon&r=PG&f=1", "display_name": "ssandoy", "link": "https://stackoverflow.com/users/4880320/ssandoy"}, "edited": false, "score": 0, "creation_date": 1490188049, "post_id": 42952290, "comment_id": 72999899, "body": "@ssandoy that means your credentials might be wrong. Check your ENV vars, make sure they have the correct details in them."}, {"owner": {"reputation": 79, "user_id": 4880320, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/536d1254af69587aa300d6aafa98eb3a?s=128&d=identicon&r=PG&f=1", "display_name": "ssandoy", "link": "https://stackoverflow.com/users/4880320/ssandoy"}, "edited": false, "score": 0, "creation_date": 1490188175, "post_id": 42952290, "comment_id": 72999984, "body": "They look to be correct. I have declared them in /config/secrets.yml. Is it then correct to call ENV[&quot;name_of_variable&quot;]? @matov"}, {"owner": {"reputation": 2165, "user_id": 1811752, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/sSedp.png?s=128&g=1", "display_name": "M&#225;t&#233;", "link": "https://stackoverflow.com/users/1811752/m%c3%a1t%c3%a9"}, "reply_to_user": {"reputation": 79, "user_id": 4880320, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/536d1254af69587aa300d6aafa98eb3a?s=128&d=identicon&r=PG&f=1", "display_name": "ssandoy", "link": "https://stackoverflow.com/users/4880320/ssandoy"}, "edited": false, "score": 0, "creation_date": 1490188431, "post_id": 42952290, "comment_id": 73000187, "body": "No, if you use secrets.yml, you need to access them through <code>Rails.application.secrets.gmail_username</code> (reference: <a href=\"http://guides.rubyonrails.org/4_1_release_notes.html#config-secrets-yml\" rel=\"nofollow noreferrer\">guides.rubyonrails.org/&hellip;</a>). To use them through <code>ENV</code> you need to declare them in the environment through bash (i.e. <code>export gmail_username=USERNAME</code>) or use a gem like dotenv <a href=\"https://github.com/bkeepers/dotenv\" rel=\"nofollow noreferrer\">github.com/bkeepers/dotenv</a>"}, {"owner": {"reputation": 79, "user_id": 4880320, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/536d1254af69587aa300d6aafa98eb3a?s=128&d=identicon&r=PG&f=1", "display_name": "ssandoy", "link": "https://stackoverflow.com/users/4880320/ssandoy"}, "edited": false, "score": 0, "creation_date": 1490188587, "post_id": 42952290, "comment_id": 73000302, "body": "Alright, changed that now. Still got the AuthenticationError, though... Even tried to give access to less secure apps in my gmail-account. @matov"}, {"owner": {"reputation": 2165, "user_id": 1811752, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/sSedp.png?s=128&g=1", "display_name": "M&#225;t&#233;", "link": "https://stackoverflow.com/users/1811752/m%c3%a1t%c3%a9"}, "reply_to_user": {"reputation": 79, "user_id": 4880320, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/536d1254af69587aa300d6aafa98eb3a?s=128&d=identicon&r=PG&f=1", "display_name": "ssandoy", "link": "https://stackoverflow.com/users/4880320/ssandoy"}, "edited": false, "score": 1, "creation_date": 1490188917, "post_id": 42952290, "comment_id": 73000560, "body": "Ok, the only last thing I can see that&#39;s different from an app I have is the port is a string in your settings, and not a number. Could you try to change it to <code>port: 587</code>?"}, {"owner": {"reputation": 79, "user_id": 4880320, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/536d1254af69587aa300d6aafa98eb3a?s=128&d=identicon&r=PG&f=1", "display_name": "ssandoy", "link": "https://stackoverflow.com/users/4880320/ssandoy"}, "edited": false, "score": 1, "creation_date": 1490189226, "post_id": 42952290, "comment_id": 73000776, "body": "It worked now! Greatly appreciated. Thanks :) Could you change your top-answer to deliver!, and I&#39;ll set it to answered. @matov."}], "tags": [], "owner": {"reputation": 2165, "user_id": 1811752, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/sSedp.png?s=128&g=1", "display_name": "M&#225;t&#233;", "link": "https://stackoverflow.com/users/1811752/m%c3%a1t%c3%a9"}, "is_accepted": true, "score": 6, "last_activity_date": 1490193226, "last_edit_date": 1490193226, "creation_date": 1490187403, "answer_id": 42952290, "question_id": 42952193, "link": "https://stackoverflow.com/questions/42952193/actionmailer-not-sending-mail-in-development-rails-5/42952290#42952290", "title": "ActionMailer not sending mail in development Rails 5", "body": "<p>You need to use <a href=\"http://api.rubyonrails.org/classes/ActionMailer/Base.html#class-ActionMailer::Base-label-Sending+mail\" rel=\"noreferrer\">deliver!</a> to send out the mail immediately.</p>\n\n<p>Just update the code to</p>\n\n<pre><code>JobMailer.send_accept_job_mail(@app_user, @job.id).deliver!\n</code></pre>\n\n<p>-- edited to use <code>deliver!</code> method, per comments.</p>\n"}], "owner": {"reputation": 79, "user_id": 4880320, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/536d1254af69587aa300d6aafa98eb3a?s=128&d=identicon&r=PG&f=1", "display_name": "ssandoy", "link": "https://stackoverflow.com/users/4880320/ssandoy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4584, "favorite_count": 0, "accepted_answer_id": 42952290, "answer_count": 1, "score": 3, "last_activity_date": 1490193226, "creation_date": 1490187143, "question_id": 42952193, "link": "https://stackoverflow.com/questions/42952193/actionmailer-not-sending-mail-in-development-rails-5", "title": "ActionMailer not sending mail in development Rails 5", "body": "<p>I am having some problem with sending email in my web-application. When I am running development the email is not sent even though it is showing as sent in the Console. </p>\n\n<p>This is my settings in config/environments/development.rb</p>\n\n<pre><code># Email\nconfig.action_mailer.delivery_method = :smtp\nconfig.action_mailer.perform_deliveries = true\nconfig.action_mailer.raise_delivery_errors = true\nconfig.action_mailer.smtp_settings = {\naddress: 'smtp.gmail.com',\nport: '587',\nenable_starttls_auto: true,\nuser_name: ENV[\"gmail_username\"],\npassword:  ENV[\"gmail_password\"],\nauthentication: :plain,\ndomain: 'gmail.com'\n}\n</code></pre>\n\n<p>In my controller I am sending mail using this call: </p>\n\n<pre><code> JobMailer.send_accept_job_mail(@app_user, @job.id).deliver\n</code></pre>\n\n<p>The mail is showing as \"sent\" in the Console, but it is not sent to the specified mail. </p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 208794, "user_id": 229044, "user_type": "moderator", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/591426cbbacd4025d920467bad356911?s=128&d=identicon&r=PG&f=1", "display_name": "meagar", "link": "https://stackoverflow.com/users/229044/meagar"}, "edited": false, "score": 0, "creation_date": 1490187171, "post_id": 42951826, "comment_id": 72999276, "body": "Your code doesn&#39;t indicate how you&#39;re trying to turn a <code>Category</code> into a URL. Without seeing how your actually building a URL, we can&#39;t tell you what is going wrong."}, {"owner": {"reputation": 1059, "user_id": 3576036, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/f1fb048a732909f50ff2e2a267119640?s=128&d=identicon&r=PG&f=1", "display_name": "user3576036", "link": "https://stackoverflow.com/users/3576036/user3576036"}, "reply_to_user": {"reputation": 208794, "user_id": 229044, "user_type": "moderator", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/591426cbbacd4025d920467bad356911?s=128&d=identicon&r=PG&f=1", "display_name": "meagar", "link": "https://stackoverflow.com/users/229044/meagar"}, "edited": false, "score": 0, "creation_date": 1490187595, "post_id": 42951826, "comment_id": 72999603, "body": "<code>&lt;%= search_equipments_path(:category_id =&gt; category.id ) %&gt;</code> @meagar Is this what you want?"}, {"owner": {"reputation": 208794, "user_id": 229044, "user_type": "moderator", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/591426cbbacd4025d920467bad356911?s=128&d=identicon&r=PG&f=1", "display_name": "meagar", "link": "https://stackoverflow.com/users/229044/meagar"}, "edited": false, "score": 0, "creation_date": 1490187626, "post_id": 42951826, "comment_id": 72999624, "body": "Yes, please edit it into the question."}, {"owner": {"reputation": 1059, "user_id": 3576036, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/f1fb048a732909f50ff2e2a267119640?s=128&d=identicon&r=PG&f=1", "display_name": "user3576036", "link": "https://stackoverflow.com/users/3576036/user3576036"}, "reply_to_user": {"reputation": 208794, "user_id": 229044, "user_type": "moderator", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/591426cbbacd4025d920467bad356911?s=128&d=identicon&r=PG&f=1", "display_name": "meagar", "link": "https://stackoverflow.com/users/229044/meagar"}, "edited": false, "score": 0, "creation_date": 1490187925, "post_id": 42951826, "comment_id": 72999819, "body": "Edited @meagar now please undo the hold."}], "answers": [{"comments": [{"owner": {"reputation": 1059, "user_id": 3576036, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/f1fb048a732909f50ff2e2a267119640?s=128&d=identicon&r=PG&f=1", "display_name": "user3576036", "link": "https://stackoverflow.com/users/3576036/user3576036"}, "edited": false, "score": 0, "creation_date": 1490188402, "post_id": 42952538, "comment_id": 73000164, "body": "Now it is landing on <code>localhost:3000</code>"}], "tags": [], "owner": {"reputation": 208794, "user_id": 229044, "user_type": "moderator", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/591426cbbacd4025d920467bad356911?s=128&d=identicon&r=PG&f=1", "display_name": "meagar", "link": "https://stackoverflow.com/users/229044/meagar"}, "is_accepted": false, "score": 1, "last_activity_date": 1490188006, "creation_date": 1490188006, "answer_id": 42952538, "question_id": 42951826, "link": "https://stackoverflow.com/questions/42951826/rails-to-param-is-not-working/42952538#42952538", "title": "rails to_param is not working", "body": "<p>You are generating URLs in such a way as to ignore your <code>to_param</code> method. You're explicitly passing a value of <strong>only the ID</strong> to be used as the <code>:category_id</code> segment of your URLs. If you want to use your <code>to_param</code>-generated ID, then you need to just pass the model to the path helper:</p>\n\n<pre><code>&lt;%= search_equipments_path(category) %&gt;\n</code></pre>\n"}], "owner": {"reputation": 1059, "user_id": 3576036, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/f1fb048a732909f50ff2e2a267119640?s=128&d=identicon&r=PG&f=1", "display_name": "user3576036", "link": "https://stackoverflow.com/users/3576036/user3576036"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 685, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1490188006, "creation_date": 1490186176, "last_edit_date": 1490187723, "question_id": 42951826, "link": "https://stackoverflow.com/questions/42951826/rails-to-param-is-not-working", "title": "rails to_param is not working", "body": "<p>I am following Ryan Bates railscasts video of friendly url. I am trying to implement that on my <strong>Category</strong> model by overriding the <code>to_param</code>method.\nSeems like it's not working, or I am missing something.\nBelow is my url before overriding:</p>\n\n<pre><code>localhost:3000/search?category_id=1 \n</code></pre>\n\n<p>After overriding the <code>to_param</code> the url remained same.</p>\n\n<p>Following is my code:</p>\n\n<p><strong>Category model</strong></p>\n\n<pre><code>class Category &lt; ActiveRecord::Base\n  enum status: { inactive: 0, active: 1}\n  acts_as_nested_set\n\n  has_many :equipments, dependent: :destroy\n  has_many :subs_equipments, :foreign_key =&gt; \"sub_category_id\", :class_name =&gt; \"Equipment\"\n  has_many :wanted_equipments, dependent: :destroy\n  has_many :services, dependent: :destroy\n\n  validates :name, presence: true\n  validates_uniqueness_of  :name,message: \"Category with this name already exists\", scope: :parent_id\n  scope :active, -&gt; { where(status: 1) }\n\n  def sub_categories\n    Category.where(:parent_id=&gt;self.id)\n  end\n\n  def to_param\n    \"#{id} #{name}\".parameterize\n  end\n\nend\n</code></pre>\n\n<p><strong>Controller</strong></p>\n\n<pre><code>def search_equipments\n    begin\n      if (params.keys &amp; ['category_id', 'sub_category', 'manufacturer', 'country', 'state', 'keyword']).present?\n        if params[:category_id].present?\n          @category = Category.active.find params[:category_id]\n        else\n          @category = Category.active.find params[:sub_category] if params[:sub_category].present?\n        end\n        @root_categories = Category.active.roots\n        @sub_categories = @category.children.active if params[:category_id].present?\n        @sub_categories ||= {}\n       Equipment.active.filter(params.slice(:manufacturer, :country, :state, :category_id, :sub_category, :keyword)).order(\"#{sort_column} #{sort_direction}, created_at desc\").page(params[:page]).per(per_page_items)\n      else\n        redirect_to root_path\n      end\n    rescue Exception =&gt; e\n      redirect_to root_path, :notice =&gt; \"Something went wrong!\"\n    end\n  end\n</code></pre>\n\n<p><strong>route.rb</strong></p>\n\n<pre><code>  get \"/search\" =&gt; 'welcome#search_equipments', as: :search_equipments\n</code></pre>\n\n<p><strong>index.html.erb</strong></p>\n\n<p>The line which is generating the url</p>\n\n<pre><code>&lt;%= search_equipments_path(:category_id =&gt; category.id ) %&gt;\n</code></pre>\n"}, {"tags": ["ruby", "nokogiri"], "answers": [{"tags": [], "owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "is_accepted": false, "score": 2, "last_activity_date": 1490212127, "creation_date": 1490212127, "answer_id": 42961348, "question_id": 42951749, "link": "https://stackoverflow.com/questions/42951749/how-to-get-nokogiri-to-report-or-raise-error-on-invalid-html-fragmenti/42961348#42961348", "title": "How to get Nokogiri to report or raise error on invalid Html fragment?I", "body": "<p>Typically I use <a href=\"http://www.rubydoc.info/github/sparklemotion/nokogiri/Nokogiri/XML/Document#errors-instance_method\" rel=\"nofollow noreferrer\"><code>errors</code></a> to find out what's wrong:</p>\n\n<pre><code>require 'nokogiri'\ndoc = Nokogiri::HTML('&lt;ul id=\"Test\"&gt;&lt;li&gt;&lt;/ul&gt;&lt;/li&gt;')\ndoc.errors # =&gt; [#&lt;Nokogiri::XML::SyntaxError: Unexpected end tag : li&gt;]\n</code></pre>\n\n<p>You'll see the same when parsing as a DocumentFragment:</p>\n\n<pre><code>doc = Nokogiri::HTML::DocumentFragment.parse('&lt;ul id=\"Test\"&gt;&lt;li&gt;&lt;/ul&gt;&lt;/li&gt;')\ndoc.errors # =&gt; [#&lt;Nokogiri::XML::SyntaxError: Unexpected end tag : li&gt;]\n</code></pre>\n\n<p>It returns the same for:</p>\n\n<pre><code>parsed = Nokogiri::HTML('&lt;ul id=\"Test\"&gt;&lt;li&gt;&lt;/ul&gt;&lt;/li&gt;') do |config|\n  config.strict\nend\nparsed.errors # =&gt; [#&lt;Nokogiri::XML::SyntaxError: Unexpected end tag : li&gt;]\n</code></pre>\n"}], "owner": {"reputation": 1464, "user_id": 5712410, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/2be8636271ba5bf194537f8119d752b1?s=128&d=identicon&r=PG&f=1", "display_name": "Marko Avlija\u0161", "link": "https://stackoverflow.com/users/5712410/marko-avlija%c5%a1"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 597, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1490212127, "creation_date": 1490185949, "last_edit_date": 1495542346, "question_id": 42951749, "link": "https://stackoverflow.com/questions/42951749/how-to-get-nokogiri-to-report-or-raise-error-on-invalid-html-fragmenti", "title": "How to get Nokogiri to report or raise error on invalid Html fragment?I", "body": "<p>It seems Nokogiri doesn't honor it's strict option.</p>\n\n<pre><code>html = %Q{&lt;ul id=\"Test\"&gt;&lt;li&gt;&lt;/ul&gt;&lt;/li&gt;}\nparsed = Nokogiri::HTML(html) do |config|\n  config.strict\nend\n</code></pre>\n\n<p>This should raise an error according to documentation:<br>\n<a href=\"http://www.nokogiri.org/tutorials/parsing_an_html_xml_document.html\" rel=\"nofollow noreferrer\">http://www.nokogiri.org/tutorials/parsing_an_html_xml_document.html</a></p>\n\n<pre><code>STRICT - Strict parsing; raise an error when parsing malformed documents\n</code></pre>\n\n<p>Code they are using to turn on options is this:</p>\n\n<pre><code>doc = Nokogiri::XML(File.open(\"blossom.xml\")) do |config|\n  config.strict.noblanks\nend\n</code></pre>\n\n<p>There was a similar question before, but no answer:\n<a href=\"https://stackoverflow.com/questions/11661517/how-can-i-detect-errors-in-an-html-document-fragment-with-ruby\">How can I detect errors in an HTML document fragment with Ruby?</a></p>\n"}, {"tags": ["ruby", "chef-infra", "test-kitchen"], "answers": [{"comments": [{"owner": {"reputation": 799, "user_id": 4694090, "user_type": "registered", "accept_rate": 59, "profile_image": "https://graph.facebook.com/438412356318586/picture?type=large", "display_name": "Leonardo Cavani", "link": "https://stackoverflow.com/users/4694090/leonardo-cavani"}, "edited": false, "score": 0, "creation_date": 1490265122, "post_id": 42957524, "comment_id": 73039073, "body": "I neither could with that method, but I find something easier: puts node[&#39;platform_family&#39;]  To find problems its ok."}, {"owner": {"reputation": 944, "user_id": 3963970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WC8zU.jpg?s=128&g=1", "display_name": "Mrigesh Priyadarshi", "link": "https://stackoverflow.com/users/3963970/mrigesh-priyadarshi"}, "reply_to_user": {"reputation": 799, "user_id": 4694090, "user_type": "registered", "accept_rate": 59, "profile_image": "https://graph.facebook.com/438412356318586/picture?type=large", "display_name": "Leonardo Cavani", "link": "https://stackoverflow.com/users/4694090/leonardo-cavani"}, "edited": false, "score": 0, "creation_date": 1490274573, "post_id": 42957524, "comment_id": 73045908, "body": "Chef Logging call make the log as part of chef run, but a simple puts will print out at compile time itself. Both are good. Can you help to explain what you are running.  You may also want to refer: - <a href=\"http://stackoverflow.com/questions/38984083/how-do-i-get-log-output-in-test-kitchen\" title=\"how do i get log output in test kitchen\">stackoverflow.com/questions/38984083/&hellip;</a>"}], "tags": [], "owner": {"reputation": 944, "user_id": 3963970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WC8zU.jpg?s=128&g=1", "display_name": "Mrigesh Priyadarshi", "link": "https://stackoverflow.com/users/3963970/mrigesh-priyadarshi"}, "is_accepted": false, "score": 2, "last_activity_date": 1490200139, "creation_date": 1490200139, "answer_id": 42957524, "question_id": 42951323, "link": "https://stackoverflow.com/questions/42951323/print-vars-with-test-kitchen-chef/42957524#42957524", "title": "Print vars with Test Kitchen - Chef", "body": "<p>Its a case of ruby string interpolation, please use it as:-</p>\n\n<pre><code>Chef::Log.info(\"PERSONAL-LOG, #{node['platform_family']}\")\n</code></pre>\n\n<p><a href=\"http://ruby-for-beginners.rubymonstas.org/bonus/string_interpolation.html\" rel=\"nofollow noreferrer\">http://ruby-for-beginners.rubymonstas.org/bonus/string_interpolation.html</a></p>\n"}], "owner": {"reputation": 799, "user_id": 4694090, "user_type": "registered", "accept_rate": 59, "profile_image": "https://graph.facebook.com/438412356318586/picture?type=large", "display_name": "Leonardo Cavani", "link": "https://stackoverflow.com/users/4694090/leonardo-cavani"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 728, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1490200139, "creation_date": 1490184778, "question_id": 42951323, "link": "https://stackoverflow.com/questions/42951323/print-vars-with-test-kitchen-chef", "title": "Print vars with Test Kitchen - Chef", "body": "<p>I'm working with Chef and Test Kitchen, I have some problems installing Apache 2.2 and I was reading the cookbook with my recipe (<a href=\"https://github.com/sous-chefs/apache2/blob/master/recipes/default.rb\" rel=\"nofollow noreferrer\">https://github.com/sous-chefs/apache2/blob/master/recipes/default.rb</a>), I would like to know how this recipe is working when installed Apache and I want print some variables when I launch my recipe: </p>\n\n<pre><code>node['platform_family']\nnode['platform_version']\n</code></pre>\n\n<p>An example from Chef official doc:</p>\n\n<pre><code>Chef::Log.fatal('You did not accept the license (set node[\"splunk\"][\"accept_license\"] to true)')\n</code></pre>\n\n<p>But I write in my recipe: </p>\n\n<pre><code>Chef::Log.info('PERSONAL-LOG,node[\"platform_family\"]')\n</code></pre>\n\n<p>I get the log, but exactly with the same text I write, I cant concatenate or call the var directly. </p>\n\n<p>Can someone help me?</p>\n"}, {"tags": ["ruby", "regex"], "comments": [{"owner": {"reputation": 481662, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 0, "creation_date": 1490183916, "post_id": 42950955, "comment_id": 72996908, "body": "Just match the numbers with the minus and zeros, and as a post-process, use <code>s.sub(&#47;\\A(-?)0+&#47;, &#39;\\1&#39;)</code>"}], "answers": [{"tags": [], "owner": {"reputation": 481662, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "is_accepted": false, "score": 1, "last_activity_date": 1490184418, "creation_date": 1490184418, "answer_id": 42951191, "question_id": 42950955, "link": "https://stackoverflow.com/questions/42950955/include-in-match-if-pattern-exist/42951191#42951191", "title": "Include in match if pattern exist", "body": "<p>Since it is not possible to match and put non-adjoining texts into 1 single capture, you may use a work-around: match the numbers and then remove the leading zeros as a post-processing step:</p>\n\n<pre><code>s = '-0015.22   012   -5  0150-12'\nres = s.scan(/-?0*\\d+(?:\\.\\d*)?/).map { |item|\n    item.sub(/\\A(-?)0+/, '\\1')\n}\n# res = [\"-0015.22\", \"012\", \"-5\", \"0150\", \"-12\"]\n</code></pre>\n\n<p>See the <a href=\"https://ideone.com/WIm14q\" rel=\"nofollow noreferrer\">online Ruby demo</a>.</p>\n\n<p>Here, <code>.sub(/\\A(-?)0+/, '\\1')</code> will remove all 1+ zeros at the beginning of a string (<code>\\A</code>) while preserving the optional <code>-</code> that is captured 1 or 0 times (with <code>(-?)</code>) and then inserted into the result using a backreference <code>\\1</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 116, "user_id": 1129980, "user_type": "registered", "profile_image": "https://graph.facebook.com/602452008/picture?type=large", "display_name": "jc1arke", "link": "https://stackoverflow.com/users/1129980/jc1arke"}, "is_accepted": true, "score": 1, "last_activity_date": 1490185802, "creation_date": 1490185802, "answer_id": 42951686, "question_id": 42950955, "link": "https://stackoverflow.com/questions/42950955/include-in-match-if-pattern-exist/42951686#42951686", "title": "Include in match if pattern exist", "body": "<p>There will have to be some post-processing, but a simpler approach (well, at least for me that is) would be something like the following using the regex of <code>(-?)0*(\\d\\.?\\d*)</code>:</p>\n\n<pre><code>regex = /(-?)0*(\\d\\.?\\d*)/\n\nresults = []\n[\n    \"-0015.22\",\n    \"012\",\n    \"-5\",\n    \"0150-12\"\n].each { |s|\n    result = s.scan( regex )\n    result.each { |r|\n        results &lt;&lt; r.join(\"\")\n    }\n}\n\nputs \"results: #{results}\"\n</code></pre>\n\n<p>Can see the live sample <a href=\"http://ideone.com/DzMPZS\" rel=\"nofollow noreferrer\">here</a></p>\n"}], "owner": {"reputation": 25, "user_id": 7659522, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/af125a7d251e09275d8aeb6c042c63d8?s=128&d=identicon&r=PG&f=1", "display_name": "binbin", "link": "https://stackoverflow.com/users/7659522/binbin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 50, "favorite_count": 0, "accepted_answer_id": 42951686, "answer_count": 2, "score": 1, "last_activity_date": 1490185802, "creation_date": 1490183790, "question_id": 42950955, "link": "https://stackoverflow.com/questions/42950955/include-in-match-if-pattern-exist", "title": "Include in match if pattern exist", "body": "<p>I want to match numbers like this:</p>\n\n<pre><code>-0015.22  =&gt; -15.22\n 012      =&gt;  12\n-5        =&gt; -5\n 0150-12  =&gt;  150, -12\n</code></pre>\n\n<p>I currently have:</p>\n\n<pre><code>-?0*(\\d+\\.?\\d*)\n</code></pre>\n\n<p>Which works for all cases, the issue is that when there is a \"-\" in the beginning it is not included in the capture (obviously, since it is not enclosed).</p>\n\n<p>How do i include the \"-?\" in the capture group to the right, while still ignoring the 0's?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4", "model"], "comments": [{"owner": {"reputation": 4930, "user_id": 5276188, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/N2sAW.jpg?s=128&g=1", "display_name": "Doktor OSwaldo", "link": "https://stackoverflow.com/users/5276188/doktor-oswaldo"}, "edited": false, "score": 0, "creation_date": 1490183991, "post_id": 42950307, "comment_id": 72996956, "body": "have a look here: <a href=\"http://stackoverflow.com/questions/4463561/weighted-random-selection-from-array\" title=\"weighted random selection from array\">stackoverflow.com/questions/4463561/&hellip;</a> There are multiple solution, depending of performance needs"}], "answers": [{"tags": [], "owner": {"reputation": 667, "user_id": 6589814, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/FzUlF.png?s=128&g=1", "display_name": "Rubioli", "link": "https://stackoverflow.com/users/6589814/rubioli"}, "is_accepted": true, "score": 0, "last_activity_date": 1490190565, "last_edit_date": 1490190565, "creation_date": 1490186810, "answer_id": 42952056, "question_id": 42950307, "link": "https://stackoverflow.com/questions/42950307/how-to-distribute-visitors-based-on-weight/42952056#42952056", "title": "How to distribute visitors based on weight", "body": "<p>I used this <code>gem</code>: <a href=\"https://github.com/jonathanswenson/weighted_distribution\" rel=\"nofollow noreferrer\">weighted_distribution</a>. I ran some tests and it works very good.</p>\n\n<p>Only important thing is that you <code>array</code>, has to look like, which is a <code>hash</code>:</p>\n\n<pre><code>{'object-1' =&gt; weight, 'object-2' =&gt; weight, 'object-3' =&gt; weight, 'object-4' =&gt; weight}\n</code></pre>\n\n<p><em>My code:</em></p>\n\n<pre><code>suits = @post.images.pluck(:id, :weight).to_h\n</code></pre>\n"}], "owner": {"reputation": 667, "user_id": 6589814, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/FzUlF.png?s=128&g=1", "display_name": "Rubioli", "link": "https://stackoverflow.com/users/6589814/rubioli"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 31, "favorite_count": 0, "accepted_answer_id": 42952056, "answer_count": 1, "score": 1, "last_activity_date": 1558638452, "creation_date": 1490181959, "last_edit_date": 1558638452, "question_id": 42950307, "link": "https://stackoverflow.com/questions/42950307/how-to-distribute-visitors-based-on-weight", "title": "How to distribute visitors based on weight", "body": "<p>In my application I have models <code>Post</code> &amp; <code>Image</code> &amp; I use <code>nested_attributes</code> for <code>Image</code>.</p>\n\n<pre><code>class Post &lt; ActiveRecord::Base\n  has_many :images\n  accepts_nested_attributes_for :images, reject_if: :all_blank, allow_destroy: true\n\nclass Image &lt; ActiveRecord::Base\n  belongs_to :post, :counter_cache =&gt; true\n</code></pre>\n\n<p>The purpose of my application is, on each <em>visit/visitor</em>, I only <strong>show</strong> <strong>ONE</strong> of the <code>images</code> on that post to user. Currently I just pick a <code>random</code> image.</p>\n\n<pre><code>rnd = @post.images.sample\n</code></pre>\n\n<p>This works fine, but what I'm looking for is to <strong>Distribute</strong> visitors based on <code>weight</code> I add to each <strong>image</strong>.</p>\n\n<p>Default <code>weight</code> can be <strong>10</strong>. For instance, I have 6 <em>images</em> on that post &amp; <code>weights</code> are:</p>\n\n<pre><code>Image 1 =&gt; weight 10\nImage 2 =&gt; weight 20\nImage 3 =&gt; weight 50\nImage 4 =&gt; weight 30\nImage 5 =&gt; weight 60\nImage 6 =&gt; weight 10\n</code></pre>\n\n<p>What I want to achieve is to distribute visitors to each image based on <code>image weights</code>, so <code>Image 5</code> would get most of the visitors but we still send visitors to <code>Image 1</code> &amp; other images.</p>\n\n<p>I haven't yet added <code>weight</code> to <code>images</code> so it can be changed to whatever needed.</p>\n"}, {"tags": ["mysql", "ruby-on-rails", "ruby", "heroku"], "answers": [{"tags": [], "owner": {"reputation": 782, "user_id": 2265937, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6a62134961838eb9d27490b10cc11bd7?s=128&d=identicon&r=PG", "display_name": "Dias", "link": "https://stackoverflow.com/users/2265937/dias"}, "is_accepted": false, "score": 0, "last_activity_date": 1490181280, "creation_date": 1490181280, "answer_id": 42950058, "question_id": 42949946, "link": "https://stackoverflow.com/questions/42949946/rails-app-deployment-on-heroku-getting-error/42950058#42950058", "title": "Rails app deployment on Heroku getting error", "body": "<p>Heroku supports postgres dbs and not mysql</p>\n\n<p><a href=\"https://devcenter.heroku.com/articles/getting-started-with-rails5#database\" rel=\"nofollow noreferrer\">https://devcenter.heroku.com/articles/getting-started-with-rails5#database</a></p>\n"}, {"tags": [], "owner": {"reputation": 1364, "user_id": 5737512, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/nfjfF.jpg?s=128&g=1", "display_name": "Kaushlendra Tomar", "link": "https://stackoverflow.com/users/5737512/kaushlendra-tomar"}, "is_accepted": false, "score": 1, "last_activity_date": 1490181307, "creation_date": 1490181307, "answer_id": 42950075, "question_id": 42949946, "link": "https://stackoverflow.com/questions/42949946/rails-app-deployment-on-heroku-getting-error/42950075#42950075", "title": "Rails app deployment on Heroku getting error", "body": "<p>Heroku natively uses postgres. Life will be easier for you if you use that locally.</p>\n"}, {"tags": [], "owner": {"reputation": 459, "user_id": 6859623, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/4d763ef30fff1f0bedf896dd1c0ce71a?s=128&d=identicon&r=PG&f=1", "display_name": "angkiki", "link": "https://stackoverflow.com/users/6859623/angkiki"}, "is_accepted": false, "score": 0, "last_activity_date": 1490181538, "creation_date": 1490181538, "answer_id": 42950145, "question_id": 42949946, "link": "https://stackoverflow.com/questions/42949946/rails-app-deployment-on-heroku-getting-error/42950145#42950145", "title": "Rails app deployment on Heroku getting error", "body": "<p>In your gemfile include </p>\n\n<pre><code>group :production do\n  gem \"pg\"\n  gem \"rails_12factor\"\nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 4527, "user_id": 5497690, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/577c8ad14fffb59cd619e43634c51dad?s=128&d=identicon&r=PG&f=1", "display_name": "puneet18", "link": "https://stackoverflow.com/users/5497690/puneet18"}, "is_accepted": false, "score": 0, "last_activity_date": 1490182366, "last_edit_date": 1592644375, "creation_date": 1490182366, "answer_id": 42950447, "question_id": 42949946, "link": "https://stackoverflow.com/questions/42949946/rails-app-deployment-on-heroku-getting-error/42950447#42950447", "title": "Rails app deployment on Heroku getting error", "body": "<p>On heroku, only pg database is available, so add following code in gmfile</p>\n<h1>Gemfile</h1>\n<pre><code>group :production do\n  gem &quot;pg&quot;\nend\n</code></pre>\n<p>then run</p>\n<pre><code>bundle install\n</code></pre>\n"}], "owner": {"reputation": 31, "user_id": 7544904, "user_type": "registered", "accept_rate": 0, "profile_image": "https://lh5.googleusercontent.com/-VHfeFZUgMN8/AAAAAAAAAAI/AAAAAAAAABU/heDs8q9tkyQ/photo.jpg?sz=128", "display_name": "Raja", "link": "https://stackoverflow.com/users/7544904/raja"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 80, "favorite_count": 0, "answer_count": 4, "score": -1, "last_activity_date": 1490189255, "creation_date": 1490180985, "last_edit_date": 1490189255, "question_id": 42949946, "link": "https://stackoverflow.com/questions/42949946/rails-app-deployment-on-heroku-getting-error", "title": "Rails app deployment on Heroku getting error", "body": "<p>I deployed my rails app on heroku with mysql as db.It is saying like We're sorry, but something went wrong.\nHere I am adding my heroku logs plz some one help me.</p>\n\n<pre><code>2017-03-22T10:43:48.752701+00:00 app[web.1]:    bin/rails:9:in `&lt;main&gt;'\n2017-03-22T10:43:48.752807+00:00 app[web.1]: [2017-03-22 10:43:48] INFO  WEBrick::HTTPServer#start done.\n2017-03-22T10:43:48.790015+00:00 app[web.1]: =&gt; Booting WEBrick\n2017-03-22T10:43:48.752761+00:00 app[web.1]: [2017-03-22 10:43:48] INFO  going to shutdown ...\n2017-03-22T10:43:48.790019+00:00 app[web.1]: =&gt; Rails 4.2.6 application starting in production on http://0.0.0.0:14662\n2017-03-22T10:43:48.790024+00:00 app[web.1]: Exiting\n2017-03-22T10:43:48.790020+00:00 app[web.1]: =&gt; Run `rails server -h` for more startup options\n2017-03-22T10:43:48.790020+00:00 app[web.1]: =&gt; Ctrl-C to shutdown server\n2017-03-22T10:43:48.890675+00:00 heroku[web.1]: Process exited with status 143\n2017-03-22T10:43:51.674432+00:00 heroku[web.1]: Starting process with command `bin/rails server -p 52776 -e production`\n2017-03-22T10:43:56.654276+00:00 app[web.1]: [2017-03-22 10:43:56] INFO  WEBrick 1.3.1\n2017-03-22T10:43:56.657326+00:00 app[web.1]: [2017-03-22 10:43:56] INFO  ruby 2.2.6 (2016-11-15) [x86_64-linux]\n2017-03-22T10:43:56.657804+00:00 app[web.1]: [2017-03-22 10:43:56] INFO  WEBrick::HTTPServer#start: pid=4 port=52776\n2017-03-22T10:43:56.776993+00:00 heroku[web.1]: State changed from starting to up\n2017-03-22T10:44:10.744223+00:00 heroku[router]: at=info method=GET path=\"/\" host=tranquil-ridge-41580.herokuapp.com request_id=e39fe9d2-3d4d-4d70-a130-cb81b3b17d47 fwd=\"183.82.43.238\" dyno=web.1 connect=0ms service=10ms status=500 bytes=1754 protocol=https\n</code></pre>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "edited": false, "score": 0, "creation_date": 1490180455, "post_id": 42949590, "comment_id": 72994492, "body": "I think the log is pretty clear : <code>undefined local variable or method &#39;v&#39;</code>. <code>v</code> isn&#39;t defined, there&#39;s no need to investigate metasploit code."}, {"owner": {"reputation": 377, "user_id": 4402812, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/fc6cee133285adf5186bb5d0f2b25824?s=128&d=identicon&r=PG&f=1", "display_name": "Tabish Imran", "link": "https://stackoverflow.com/users/4402812/tabish-imran"}, "reply_to_user": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "edited": false, "score": 0, "creation_date": 1490180551, "post_id": 42949590, "comment_id": 72994552, "body": "@EricDuminil, Yeah that&#39;s correct, although i wish to handle this better, to just print out the error instead of the entire stack trace"}, {"owner": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "edited": false, "score": 0, "creation_date": 1490180629, "post_id": 42949590, "comment_id": 72994621, "body": "Why? If you want to solve the problem : define <code>v</code>. If you don&#39;t care about <code>v</code>, don&#39;t try to display it in IRB when it&#39;s not defined."}, {"owner": {"reputation": 377, "user_id": 4402812, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/fc6cee133285adf5186bb5d0f2b25824?s=128&d=identicon&r=PG&f=1", "display_name": "Tabish Imran", "link": "https://stackoverflow.com/users/4402812/tabish-imran"}, "reply_to_user": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "edited": false, "score": 0, "creation_date": 1490180848, "post_id": 42949590, "comment_id": 72994750, "body": "@EricDuminil, I understand, just trying to understand why what I tried didn&#39;t work. Because from what I know, the rescue statement should work. Right?"}, {"owner": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "edited": false, "score": 0, "creation_date": 1490181044, "post_id": 42949590, "comment_id": 72994907, "body": "<code>puts(e)</code> displays the error. So yes, the error is still displayed. If you don&#39;t want to see the error, don&#39;t display it inside the <code>rescue</code> block."}, {"owner": {"reputation": 377, "user_id": 4402812, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/fc6cee133285adf5186bb5d0f2b25824?s=128&d=identicon&r=PG&f=1", "display_name": "Tabish Imran", "link": "https://stackoverflow.com/users/4402812/tabish-imran"}, "reply_to_user": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "edited": false, "score": 0, "creation_date": 1490181123, "post_id": 42949590, "comment_id": 72994963, "body": "@EricDuminil puts(e) should display just the error right? Not the stack trace? Because I see both."}, {"owner": {"reputation": 377, "user_id": 4402812, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/fc6cee133285adf5186bb5d0f2b25824?s=128&d=identicon&r=PG&f=1", "display_name": "Tabish Imran", "link": "https://stackoverflow.com/users/4402812/tabish-imran"}, "reply_to_user": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "edited": false, "score": 0, "creation_date": 1490181427, "post_id": 42949590, "comment_id": 72995168, "body": "Let us <a href=\"http://chat.stackoverflow.com/rooms/138727/discussion-between-tabish-imran-and-eric-duminil\">continue this discussion in chat</a>."}], "owner": {"reputation": 377, "user_id": 4402812, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/fc6cee133285adf5186bb5d0f2b25824?s=128&d=identicon&r=PG&f=1", "display_name": "Tabish Imran", "link": "https://stackoverflow.com/users/4402812/tabish-imran"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 245, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1490180654, "creation_date": 1490180172, "last_edit_date": 1490180654, "question_id": 42949590, "link": "https://stackoverflow.com/questions/42949590/how-to-correctly-rescue-this-nameerror", "title": "How to correctly rescue this NameError", "body": "<p>I encountered this NameError </p>\n\n<pre><code>&gt;&gt; v\nNameError: undefined local variable or method `v' for #&lt;Rex::Post::Meterpreter::Ui::Console::CommandDispatcher::Core:0x00000002871728&gt;\n    from (irb):1:in `cmd_irb'\n    from /home/txjoe/git/metasploit-framework/lib/rex/ui/text/irb_shell.rb:54:in `block in run'\n    from /home/txjoe/git/metasploit-framework/lib/rex/ui/text/irb_shell.rb:53:in `catch'\n    from /home/txjoe/git/metasploit-framework/lib/rex/ui/text/irb_shell.rb:53:in `run'\n    from /home/txjoe/git/metasploit-framework/lib/rex/post/meterpreter/ui/console/command_dispatcher/core.rb:390:in `cmd_irb'\n    from /home/txjoe/git/metasploit-framework/lib/rex/ui/text/dispatcher_shell.rb:430:in `run_command'\n    from /home/txjoe/git/metasploit-framework/lib/rex/post/meterpreter/ui/console.rb:105:in `run_command'\n</code></pre>\n\n<p>I opened the file <code>metasploit-framework/lib/rex/ui/text/irb_shell.rb</code> at line 54, which supposedly causes the error:</p>\n\n<pre><code>catch(:IRB_EXIT) do\n  irb.eval_input\nend\n</code></pre>\n\n<p>Given that it was a name error, I added the statements </p>\n\n<pre><code>catch(:IRB_EXIT) do\n  begin\n    irb.eval_input\n  rescue NameError =&gt; e\n    puts(e)\n  end\nend\n</code></pre>\n\n<p>but I still get the error. Am I using the rescue at a wrong place? </p>\n\n<p>This happens while using the irb shell from a meterpreter session in metasploit.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "session"], "comments": [{"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1490182043, "post_id": 42949502, "comment_id": 72995573, "body": "why not store everything in the same place?"}, {"owner": {"reputation": 1047, "user_id": 2936733, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/eaecbfee79e2b901ccfc23d4d77ac50e?s=128&d=identicon&r=PG&f=1", "display_name": "\u5b59\u609f\u7a7a", "link": "https://stackoverflow.com/users/2936733/%e5%ad%99%e6%82%9f%e7%a9%ba"}, "reply_to_user": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1490182543, "post_id": 42949502, "comment_id": 72995934, "body": "@SergioTulentsev I just want to know if it&#39;s possible or not ?"}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 2, "creation_date": 1490182609, "post_id": 42949502, "comment_id": 72995982, "body": "Nope, not possible. Not in stock rails, anyway."}, {"owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "edited": false, "score": 0, "creation_date": 1490189583, "post_id": 42949502, "comment_id": 73001025, "body": "Its not possible out of the box but you can easily use the cookie store and store something in memcached with the session id as a key (or store an arbitrary memcached key in the cookie store). But it does require a bit more work and thought from your part. Note that this does not mean that it will automatically unpack into the <code>session</code> hash. You would need to do that manually."}, {"owner": {"reputation": 1047, "user_id": 2936733, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/eaecbfee79e2b901ccfc23d4d77ac50e?s=128&d=identicon&r=PG&f=1", "display_name": "\u5b59\u609f\u7a7a", "link": "https://stackoverflow.com/users/2936733/%e5%ad%99%e6%82%9f%e7%a9%ba"}, "reply_to_user": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "edited": false, "score": 0, "creation_date": 1490200911, "post_id": 42949502, "comment_id": 73010004, "body": "@max thank you for your answer meaningful. Acturely if I should write code, I will keep my sessions in cache."}], "answers": [{"comments": [{"owner": {"reputation": 1047, "user_id": 2936733, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/eaecbfee79e2b901ccfc23d4d77ac50e?s=128&d=identicon&r=PG&f=1", "display_name": "\u5b59\u609f\u7a7a", "link": "https://stackoverflow.com/users/2936733/%e5%ad%99%e6%82%9f%e7%a9%ba"}, "edited": false, "score": 0, "creation_date": 1491468178, "post_id": 42967205, "comment_id": 73569110, "body": "Thank you for your <code>thoughtful answer </code>, In fact, I don&#39;t want to spend time to the dev. I locate juste a simple config native in Rails. Finally Its not possible."}], "tags": [], "owner": {"reputation": 1302, "user_id": 1368977, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c79672007d59af69a05f2b5f6929b53f?s=128&d=identicon&r=PG", "display_name": "Marc Rohloff", "link": "https://stackoverflow.com/users/1368977/marc-rohloff"}, "is_accepted": false, "score": 0, "last_activity_date": 1490242921, "creation_date": 1490242921, "answer_id": 42967205, "question_id": 42949502, "link": "https://stackoverflow.com/questions/42949502/rails-store-session/42967205#42967205", "title": "Rails store session", "body": "<p>You would need to create a custom sub-class of <code>ActionDispatch::Session::AbstractStore</code>,  implement the required methods and register it as your session store. I suggest that you look at the source code for some existing stores: <a href=\"https://github.com/rails/rails/blob/595c798c1763d7d2ee6939c5cf196ac31aef33da/actionpack/lib/action_dispatch/middleware/session/cookie_store.rb\" rel=\"nofollow noreferrer\">https://github.com/rails/rails/blob/595c798c1763d7d2ee6939c5cf196ac31aef33da/actionpack/lib/action_dispatch/middleware/session/cookie_store.rb</a></p>\n\n<p>If I understand correctly, your class would need to create an instance of <code>MemCacheStore</code> and <code>CookieStore</code> and delegate to them appropriately.</p>\n"}], "owner": {"reputation": 1047, "user_id": 2936733, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/eaecbfee79e2b901ccfc23d4d77ac50e?s=128&d=identicon&r=PG&f=1", "display_name": "\u5b59\u609f\u7a7a", "link": "https://stackoverflow.com/users/2936733/%e5%ad%99%e6%82%9f%e7%a9%ba"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 147, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1490242921, "creation_date": 1490179955, "last_edit_date": 1490181865, "question_id": 42949502, "link": "https://stackoverflow.com/questions/42949502/rails-store-session", "title": "Rails store session", "body": "<p>As I know, we can config how to store session in a Rails app.  I want to know if it's possible we store session in two modes at same time ? which means one part in browser and other part in cache like memcached ?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "performance", "nested", "self-referencing-table"], "comments": [{"owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "edited": false, "score": 0, "creation_date": 1490189736, "post_id": 42949474, "comment_id": 73001154, "body": "<code>has_many :children</code> - <i>children</i> is the proper plural of child - not <code>childrens</code>. While this is not the root of your problem using the wrong inflection can mess things up down the road."}, {"owner": {"reputation": 2060, "user_id": 1965817, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/1t9U1.jpg?s=128&g=1", "display_name": "lkartono", "link": "https://stackoverflow.com/users/1965817/lkartono"}, "reply_to_user": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "edited": false, "score": 0, "creation_date": 1490191498, "post_id": 42949474, "comment_id": 73002586, "body": "@max Thanks for the heads up and sorry for this typo (I&#39;m french). child =&gt; children ;)"}], "owner": {"reputation": 2060, "user_id": 1965817, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/1t9U1.jpg?s=128&g=1", "display_name": "lkartono", "link": "https://stackoverflow.com/users/1965817/lkartono"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 293, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1490179888, "creation_date": 1490179888, "question_id": 42949474, "link": "https://stackoverflow.com/questions/42949474/ruby-rails-efficient-way-to-build-a-nested-array-of-object", "title": "Ruby/Rails: Efficient way to build a nested array of object", "body": "<p>I'm developing an API that deals with localities. I have a table that has been build as a self-referential and contains a <code>parent_id</code> column. I have so far 144 records in that table.</p>\n\n<p>Our client app needs to receive nested localities. Since I'm using Rails, I was trying at first to use the power of serializers to do it for me:</p>\n\n<pre><code>class LocalitySerializer &lt; ActiveModel::Serializer\n  attributes :id, :name, :postcode, :kind, :latitude, :longitude, :parent_id\n\n  has_many :childrens\nend\n</code></pre>\n\n<p>While it does works, it does not seems to be efficient. First, the log shows massive SQL queries to the database. Of course I've tried to eager load data using something like <code>Locality.includes(:childrens).all</code> but it did not works and has no effect (maybe I did something wrong?)</p>\n\n<p>I ended up writing a recursive function that takes the full list of localities (<code>Locality.all</code>) and check each element's parent_id to nest them. So I removed the association in LocalitySerializer:</p>\n\n<pre><code>class LocalitySerializer &lt; ActiveModel::Serializer\n  attributes :id, :name, :postcode, :kind, :latitude, :longitude, :parent_id\nend\n</code></pre>\n\n<p>and build it separately within it's own serializer:</p>\n\n<pre><code>class DictionarySerializer &lt; ActiveModel::Serializer\n  def attributes\n    hash = super\n    hash[:localities] = localities\n    hash\n  end\n\n  private\n\n  def localities\n    Rails.cache.fetch('localities.json', expires_in: 7.days) do\n      localities = ActiveModel::ArraySerializer.new(Locality.all, each_serializer: LocalitySerializer).as_json\n      build_hierarchy(localities, [], nil)\n    end\n  end\n\n  def build_hierarchy(source, target_array, n)\n    source.select { |h| h[:parent_id] == n }.each do |h|\n      h.except!(:parent_id)\n      target_array &lt;&lt; h.clone.merge(childrens: build_hierarchy(source, [], h[:id]))\n    end\n\n    target_array\n  end\nend\n</code></pre>\n\n<p>While this is a bit faster, it is still very slow IMHO. Note that I set a low-level cache here to make it faster on subsequent request. I haven't actually made any benchmark (just base my word as end user perception), but I'll be happy to do it if it could help anyone to figure out a faster way to generate it.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-3"], "answers": [{"tags": [], "owner": {"reputation": 2562, "user_id": 4344085, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/ilSIn.jpg?s=128&g=1", "display_name": "Khanh Pham", "link": "https://stackoverflow.com/users/4344085/khanh-pham"}, "is_accepted": true, "score": 1, "last_activity_date": 1490180399, "creation_date": 1490180399, "answer_id": 42949686, "question_id": 42949420, "link": "https://stackoverflow.com/questions/42949420/ruby-on-rails-server-not-starting-bundler-1-14-6-require-cannot-load-such-fi/42949686#42949686", "title": "Ruby on rails server not starting: bundler-1.14.6 `require&#39;: cannot load such file", "body": "<p>I think that you can fix your problem as:</p>\n\n<pre><code>gem 'rubyzip',  \"~&gt; 1.1\", require: 'zip'\n</code></pre>\n"}], "owner": {"reputation": 229, "user_id": 3702325, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/70da5f164e52b32851242fbab0837f20?s=128&d=identicon&r=PG&f=1", "display_name": "Prade Mismo", "link": "https://stackoverflow.com/users/3702325/prade-mismo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 71, "favorite_count": 0, "accepted_answer_id": 42949686, "answer_count": 1, "score": 1, "last_activity_date": 1490180399, "creation_date": 1490179753, "question_id": 42949420, "link": "https://stackoverflow.com/questions/42949420/ruby-on-rails-server-not-starting-bundler-1-14-6-require-cannot-load-such-fi", "title": "Ruby on rails server not starting: bundler-1.14.6 `require&#39;: cannot load such file", "body": "<p>Upgrading and old Ruby on rails app from ruby 1.9.3-p545 to ruby 2.3.1. on development server.\nRails 3.2.8 will be upgraded to 4.2.8 (not done yet).</p>\n\n<p>RVM and ruby version upgraded to 2.3.1, bundle installed successfully.</p>\n\n<p>The following error occurs when running development server:</p>\n\n<pre><code>/home/javier/.rvm/gems/ruby-2.3.1/gems/activesupport-3.2.8/lib/active_support/values/time_zone.rb:270: warning: circular argument reference - now\n/home/javier/.rvm/gems/ruby-2.3.1/gems/bundler-1.14.6/lib/bundler/runtime.rb:91:in `require': cannot load such file -- zip/zip (LoadError)\n    from /home/javier/.rvm/gems/ruby-2.3.1/gems/bundler-1.14.6/lib/bundler/runtime.rb:91:in `block (2 levels) in require'\n    from /home/javier/.rvm/gems/ruby-2.3.1/gems/bundler-1.14.6/lib/bundler/runtime.rb:86:in `each'\n    from /home/javier/.rvm/gems/ruby-2.3.1/gems/bundler-1.14.6/lib/bundler/runtime.rb:86:in `block in require'\n    from /home/javier/.rvm/gems/ruby-2.3.1/gems/bundler-1.14.6/lib/bundler/runtime.rb:75:in `each'\n    from /home/javier/.rvm/gems/ruby-2.3.1/gems/bundler-1.14.6/lib/bundler/runtime.rb:75:in `require'\n    from /home/javier/.rvm/gems/ruby-2.3.1/gems/bundler-1.14.6/lib/bundler.rb:107:in `require'\n    from /home/javier/Workspace/e-nrg/config/application.rb:7:in `&lt;top (required)&gt;'\n    from /home/javier/.rvm/gems/ruby-2.3.1/gems/railties-3.2.8/lib/rails/commands.rb:53:in `require'\n    from /home/javier/.rvm/gems/ruby-2.3.1/gems/railties-3.2.8/lib/rails/commands.rb:53:in `block in &lt;top (required)&gt;'\n    from /home/javier/.rvm/gems/ruby-2.3.1/gems/railties-3.2.8/lib/rails/commands.rb:50:in `tap'\n    from /home/javier/.rvm/gems/ruby-2.3.1/gems/railties-3.2.8/lib/rails/commands.rb:50:in `&lt;top (required)&gt;'\n    from script/rails:6:in `require'\n    from script/rails:6:in `&lt;main&gt;'\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby"], "answers": [{"comments": [{"owner": {"reputation": 143, "user_id": 3735111, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/74b032e716748a976d93e75ddf7af512?s=128&d=identicon&r=PG&f=1", "display_name": "user3735111", "link": "https://stackoverflow.com/users/3735111/user3735111"}, "edited": false, "score": 0, "creation_date": 1490183699, "post_id": 42949425, "comment_id": 72996749, "body": "Not sure how to use this. Do I add this to one of .html.erb files in view or somewhere else?"}, {"owner": {"reputation": 143, "user_id": 3735111, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/74b032e716748a976d93e75ddf7af512?s=128&d=identicon&r=PG&f=1", "display_name": "user3735111", "link": "https://stackoverflow.com/users/3735111/user3735111"}, "edited": false, "score": 0, "creation_date": 1490184215, "post_id": 42949425, "comment_id": 72997115, "body": "Currently my project is fairly simple: it consists of sqlite db, 1 controller and a bunch of view files. It essentially begun with tutorial on guides.rubyonrails.org and from there I kept adding and changing stuff. I&#39;m still only figuring out what goes where, so I&#39;m a little lost every now and then."}, {"owner": {"reputation": 143, "user_id": 3735111, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/74b032e716748a976d93e75ddf7af512?s=128&d=identicon&r=PG&f=1", "display_name": "user3735111", "link": "https://stackoverflow.com/users/3735111/user3735111"}, "edited": false, "score": 0, "creation_date": 1490191090, "post_id": 42949425, "comment_id": 73002248, "body": "It worked, thanks! Used &lt;%= link_to URI(@article.src_url).host, @article.src_url %&gt;"}], "tags": [], "owner": {"reputation": 12629, "user_id": 4739257, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/MdhEs.jpg?s=128&g=1", "display_name": "Ilya", "link": "https://stackoverflow.com/users/4739257/ilya"}, "is_accepted": true, "score": 1, "last_activity_date": 1490180276, "last_edit_date": 1490180276, "creation_date": 1490179762, "answer_id": 42949425, "question_id": 42949392, "link": "https://stackoverflow.com/questions/42949392/ruby-on-rails-using-string-for-link-to-and-formatting-it-for-hyperlink-name/42949425#42949425", "title": "ruby on rails - using string for link_to and formatting it for hyperlink name", "body": "<p>You can use the <a href=\"http://apidock.com/ruby/URI\" rel=\"nofollow noreferrer\"><code>URI</code></a> module:</p>\n\n<pre><code>uri = URI(@article.src_url)\nuri.host\n#=&gt; \"example.com\"\n</code></pre>\n\n<p>This module is already included in Rails, so you should not include it manually.</p>\n"}], "owner": {"reputation": 143, "user_id": 3735111, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/74b032e716748a976d93e75ddf7af512?s=128&d=identicon&r=PG&f=1", "display_name": "user3735111", "link": "https://stackoverflow.com/users/3735111/user3735111"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 37, "favorite_count": 0, "accepted_answer_id": 42949425, "answer_count": 1, "score": 1, "last_activity_date": 1490180276, "creation_date": 1490179644, "question_id": 42949392, "link": "https://stackoverflow.com/questions/42949392/ruby-on-rails-using-string-for-link-to-and-formatting-it-for-hyperlink-name", "title": "ruby on rails - using string for link_to and formatting it for hyperlink name", "body": "<p>I have a db that has a column src_url, that contains full urls to web resources.\nCurrently I use</p>\n\n<pre><code>&lt;%= link_to \"source\", @article.src_url %&gt;\n</code></pre>\n\n<p>to display it.</p>\n\n<p>What I want to do is to display first 2 or 3 domain levels instead of \"Source\" (so for example \"www.example.com\" or \"example.org\").</p>\n\n<p>I'm fairly new to ruby on rails, so having to figure out about everything on the go, this one I was stuck on for a while.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "regex", "gsub"], "answers": [{"comments": [{"owner": {"reputation": 481662, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "reply_to_user": {"reputation": 1323, "user_id": 4038282, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/ZvYBF.jpg?s=128&g=1", "display_name": "y.bregey", "link": "https://stackoverflow.com/users/4038282/y-bregey"}, "edited": false, "score": 0, "creation_date": 1490179688, "post_id": 42949292, "comment_id": 72993938, "body": "BTW, it is also possible to use <code>\\b[[:upper:]]{2,}\\b</code> to match words with 2 or more uppercase  letters since <code>I</code> is already OK. I updated the answer."}], "tags": [], "owner": {"reputation": 481662, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "is_accepted": true, "score": 1, "last_activity_date": 1490179746, "last_edit_date": 1490179746, "creation_date": 1490179431, "answer_id": 42949292, "question_id": 42949216, "link": "https://stackoverflow.com/questions/42949216/ruby-regex-to-convert-uppercased-words-and-keep-titleized-ones/42949292#42949292", "title": "Ruby regex to convert uppercased words and keep titleized ones", "body": "<p>You may use <a href=\"https://ruby-doc.org/core-2.2.0/String.html#method-i-capitalize\" rel=\"nofollow noreferrer\"><code>capitalize</code></a> with <code>/\\b[[:upper:]]{2,}\\b/</code> regex:</p>\n\n<pre><code>s.gsub(/\\b[[:upper:]]{2,}\\b/){$&amp;.capitalize}\n# =&gt; Lorem Ipsum dolor Sit amet\n</code></pre>\n\n<p>See the <a href=\"https://ideone.com/7l687k\" rel=\"nofollow noreferrer\">online Ruby demo</a>.</p>\n\n<p>Note that the <code>\\b[[:upper:]]{2,}\\b</code> pattern will match whole words (as <code>\\b</code> are word boundaries) that only consist of 2 or more uppercase letters (there seems no need to match words like <code>I</code> that are already OK).</p>\n"}], "owner": {"reputation": 1323, "user_id": 4038282, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/ZvYBF.jpg?s=128&g=1", "display_name": "y.bregey", "link": "https://stackoverflow.com/users/4038282/y-bregey"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 101, "favorite_count": 0, "accepted_answer_id": 42949292, "answer_count": 1, "score": 1, "last_activity_date": 1492602697, "creation_date": 1490179215, "last_edit_date": 1492602697, "question_id": 42949216, "link": "https://stackoverflow.com/questions/42949216/ruby-regex-to-convert-uppercased-words-and-keep-titleized-ones", "title": "Ruby regex to convert uppercased words and keep titleized ones", "body": "<p>Given string \"Lorem IPSUM dolor Sit amet\". Capital letters in \"Lorem\" and \"Sit\" should be kept, uppercased ones like \"IPSUM\" should be converted to \"Ipsum\"</p>\n\n<p>How to make \"Lorem Ipsum dolor Sit amet\" from given string using gsub?\nNOT working example: <code>s.gsub(/[[:upper:]]/){$&amp;.downcase}</code></p>\n"}, {"tags": ["ruby-on-rails", "ruby", "jwt", "microservices"], "answers": [{"tags": [], "owner": {"reputation": 6196, "user_id": 640404, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/98c758a177fe69af777012335714cb0e?s=128&d=identicon&r=PG", "display_name": "Wes", "link": "https://stackoverflow.com/users/640404/wes"}, "is_accepted": false, "score": 0, "last_activity_date": 1499724785, "creation_date": 1499724785, "answer_id": 45022463, "question_id": 42949138, "link": "https://stackoverflow.com/questions/42949138/rails-microservice-architecture-with-dedicated-authorization-service-and-app-se/45022463#45022463", "title": "Rails: Microservice architecture with dedicated authorization service and app services using Knock (JWT)", "body": "<p>I have been playing around with this problem and there are not any good documented solutions out there.  What I would do is build a service which managers the Users and your Access Control List (ACL).  </p>\n\n<ol>\n<li>Identity Service - This is where the client will authorize itself for access to the other services in the API.  </li>\n</ol>\n\n<p><code>login [POST]\nemail\npassword</code></p>\n\n<p>This will return a JWT token that in the payload section will have the following information:</p>\n\n<ol>\n<li>User Id</li>\n<li>ACL</li>\n</ol>\n\n<p>The ACL could be an array of the allowed roles they have.  This way when the client makes a request to the API the service responding to the request can introspect on the User ID (Knock - current_user) and then you can get the ACL from the payload.  Very easy I think to then add a <code>before_action</code> to verify the appropriate role.</p>\n"}], "owner": {"reputation": 141, "user_id": 5353059, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/f279ef3ff1107b4fd9e93edce10bd4bc?s=128&d=identicon&r=PG", "display_name": "Alex T.", "link": "https://stackoverflow.com/users/5353059/alex-t"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 985, "favorite_count": 0, "answer_count": 1, "score": 3, "last_activity_date": 1499724785, "creation_date": 1490179041, "last_edit_date": 1490182455, "question_id": 42949138, "link": "https://stackoverflow.com/questions/42949138/rails-microservice-architecture-with-dedicated-authorization-service-and-app-se", "title": "Rails: Microservice architecture with dedicated authorization service and app services using Knock (JWT)", "body": "<p>I'm now trying to separate monolithic application into microservices (dedicated rails app's) and wanted to know - is there a solution to move authorization service from each service?</p>\n\n<p>For example, I have 6 different Rails API services with 'knock' gem that have user model for authentication purpose.\nAll those services sharing one user database.</p>\n\n<p>I want to implement dedicated service with user model, but how other services will verify users with given tokens?</p>\n\n<p>Also I want to able to control what services user can and can't use. So there should be AccessRole service?</p>\n\n<p>Draft case:</p>\n\n<ol>\n<li>User go to 'articles' (frontend UI client)</li>\n<li>auth_service is validating token from client</li>\n<li>access_service got message from auth_service somehow and validating user's role to access 'articles' resource.</li>\n<li>articles_service send response to client with json data.</li>\n</ol>\n\n<p>Here some more questions:</p>\n\n<ol>\n<li>How access_service will communicate with auth_service? Should they use one user database to verify user's credentials and role?</li>\n<li>articles_service and so on - should they become private services without access to public and act as black boxes to user?</li>\n</ol>\n"}, {"tags": ["ruby", "string"], "answers": [{"comments": [{"owner": {"reputation": 510, "user_id": 3784251, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/4f490b78a846134b6208771388db3304?s=128&d=identicon&r=PG&f=1", "display_name": "user3784251", "link": "https://stackoverflow.com/users/3784251/user3784251"}, "edited": false, "score": 0, "creation_date": 1490180615, "post_id": 42949552, "comment_id": 72994608, "body": "No way to get rid of that &#39;\\&#39;? :("}], "tags": [], "owner": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "is_accepted": false, "score": 0, "last_activity_date": 1490180848, "last_edit_date": 1490180848, "creation_date": 1490180108, "answer_id": 42949552, "question_id": 42949120, "link": "https://stackoverflow.com/questions/42949120/ruby-how-to-get-rid-of-escape-character-and-n-while-converting-string-to-ha/42949552#42949552", "title": "Ruby - How to get rid of escape character and &quot;\\n&quot; while converting string to hash value?", "body": "<h1>Note</h1>\n\n<pre><code>{:keyex=&gt;\"example \\\"test\\\" line 1\\n  line 2 \\\"test2\\\"\"}\n</code></pre>\n\n<p>is just the way Ruby represents the hash. It is 100% the same object as :</p>\n\n<pre><code>{ keyex: 'example \"test\" line 1\n  line 2 \"test2\"'}\n</code></pre>\n\n<p>even though it might look different.</p>\n\n<h1>Code</h1>\n\n<p>You could replace <code>\"\\\\n\"</code> from <code>inspect</code> with newlines, <code>\\\"</code> with <code>\"</code> and <code>\"</code> with <code>'</code> :</p>\n\n<pre><code>hashex = { keyex: 'example \"test\" line 1\n     line 2 \"test2\"'}\n\nputs hashex.inspect.gsub(\"\\\\n\", \"\\n\").gsub('\"', \"'\").gsub(\"\\\\'\",'\"')\n# {:keyex=&gt;'example \"test\" line 1\n#      line 2 \"test2\"'}\n</code></pre>\n"}], "owner": {"reputation": 510, "user_id": 3784251, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/4f490b78a846134b6208771388db3304?s=128&d=identicon&r=PG&f=1", "display_name": "user3784251", "link": "https://stackoverflow.com/users/3784251/user3784251"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 44, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1490180881, "creation_date": 1490179005, "last_edit_date": 1490180881, "question_id": 42949120, "link": "https://stackoverflow.com/questions/42949120/ruby-how-to-get-rid-of-escape-character-and-n-while-converting-string-to-ha", "title": "Ruby - How to get rid of escape character and &quot;\\n&quot; while converting string to hash value?", "body": "<p>In Ruby, i'm trying to convert a string to a hash value. It shows up with escapse character and \"\\n\" in the string.</p>\n\n<p>Eg:</p>\n\n<pre><code>hashex = { keyex: 'example \"test\" line 1\n  line 2 \"test2\"'}\nputs hashex\n</code></pre>\n\n<p>It is printing the result as </p>\n\n<pre><code>{:keyex=&gt;\"example \\\"test\\\" line 1\\n  line 2 \\\"test2\\\"\"}\n</code></pre>\n\n<p>I need to get the result as</p>\n\n<pre><code>{ keyex: 'example \"test\" line 1\n      line 2 \"test2\"'}\n</code></pre>\n\n<p>preserving the newline (not '\\n') and the \"\". Kindly help.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "routes"], "answers": [{"comments": [{"owner": {"reputation": 7605, "user_id": 584552, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/dc70f4a04726fada8b9db8a18ff40412?s=128&d=identicon&r=PG", "display_name": "mdesantis", "link": "https://stackoverflow.com/users/584552/mdesantis"}, "edited": false, "score": 0, "creation_date": 1490226348, "post_id": 42949846, "comment_id": 73023479, "body": "Hi, nice solution! Thank you"}], "tags": [], "owner": {"reputation": 8645, "user_id": 368167, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c9596f533dcd61ecf75f150b0d9997b3?s=128&d=identicon&r=PG", "display_name": "Tamer Shlash", "link": "https://stackoverflow.com/users/368167/tamer-shlash"}, "is_accepted": true, "score": 1, "last_activity_date": 1490181422, "last_edit_date": 1490181422, "creation_date": 1490180761, "answer_id": 42949846, "question_id": 42948872, "link": "https://stackoverflow.com/questions/42948872/how-to-have-different-routes-ids-on-different-routes-for-the-same-resources/42949846#42949846", "title": "How to have different routes ids on different routes for the same resources?", "body": "<p>Usually, you would change the route to:</p>\n\n<pre><code>resources :contents, param: :slug\n</code></pre>\n\n<p>and then you override <code>to_param</code> method to become:</p>\n\n<pre><code>class Content &lt; ApplicationRecord\n  def to_param\n    slug\n  end\nend\n</code></pre>\n\n<p>And finally in your controller, you replace <code>Content.find(params[:id]</code> with <code>Content.find_by(slug: params[:slug])</code>.</p>\n\n<p>That will give you URLs like <code>/contents/foo-bar</code> when you call <code>content_path(content)</code>.</p>\n\n<p>In your case, you can additionally create a subclass that overrides the <code>to_param</code> method:</p>\n\n<pre><code>module Admin\n  class Content &lt; ::Content\n    def to_param\n      id &amp;&amp; id.to_s # This is the default for ActiveRecord\n    end\n  end\nend\n</code></pre>\n\n<p>Since your <code>admin/contents_controller.rb</code> is namespaced under <code>Admin</code> (e.g <code>Admin::ContentsController</code>), it will by default use the <code>Admin::Content</code> class instead of the normal <code>Content</code> class, and thus the object itself and all routes should be as you like them to be, including forms.</p>\n"}, {"comments": [{"owner": {"reputation": 7605, "user_id": 584552, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/dc70f4a04726fada8b9db8a18ff40412?s=128&d=identicon&r=PG", "display_name": "mdesantis", "link": "https://stackoverflow.com/users/584552/mdesantis"}, "edited": false, "score": 0, "creation_date": 1490226236, "post_id": 42950688, "comment_id": 73023444, "body": "I would like to avoid defining helper methods for every route"}], "tags": [], "owner": {"reputation": 10576, "user_id": 323384, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/8458ed8e78b2660f8b839f052e20f65f?s=128&d=identicon&r=PG", "display_name": "Nicolas Blanco", "link": "https://stackoverflow.com/users/323384/nicolas-blanco"}, "is_accepted": false, "score": 1, "last_activity_date": 1490183040, "creation_date": 1490183040, "answer_id": 42950688, "question_id": 42948872, "link": "https://stackoverflow.com/questions/42948872/how-to-have-different-routes-ids-on-different-routes-for-the-same-resources/42950688#42950688", "title": "How to have different routes ids on different routes for the same resources?", "body": "<p>I would say that's two different problems : URL generation for your resources on the user front-end side (using slugs) and URL generation for your admin forms.</p>\n\n<p>Obviously in your admin, you will never be able to just write <code>form_for @resource</code> because your admin is namespaced, so the minimum would at least be <code>form_for [:admin, @resource]</code>.</p>\n\n<p>Let's say you have <code>to_param</code> on some of your models to return a slug, you may create your own customised helpers on your admin back-office to always return a path namespaced to <code>/admin/</code> and using the <code>id</code> of the record.</p>\n\n<p>One generic way to do that is adding this kind of code in your <code>Admin</code> root controller.</p>\n\n<pre><code>class Admin::AdminController &lt; ApplicationController\n\n  helper_method :admin_resource_path, :edit_admin_resource_path\n\n  def admin_resource_path(resource)\n    if resource.new_record?\n      polymorphic_path([:admin, ActiveModel::Naming.route_key(resource)])\n    else\n      polymorphic_path([:admin, ActiveModel::Naming.singular_route_key(resource)], id: resource.id)\n    end\n  end\n\n  def edit_admin_resource_path(resource)\n    polymorphic_path([:edit, :admin, ActiveModel::Naming.singular_route_key(resource)], id: resource.id)\n  end\nend\n</code></pre>\n\n<p>Then in your form you can use <code>form_for(@user, url: admin_resource_path(@user)</code>. It will work on both user creation and user edition.\nYou will be able to use those helpers also in your controllers to redirect...</p>\n"}, {"tags": [], "owner": {"reputation": 7605, "user_id": 584552, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/dc70f4a04726fada8b9db8a18ff40412?s=128&d=identicon&r=PG", "display_name": "mdesantis", "link": "https://stackoverflow.com/users/584552/mdesantis"}, "is_accepted": false, "score": 0, "last_activity_date": 1490226456, "creation_date": 1490226456, "answer_id": 42964731, "question_id": 42948872, "link": "https://stackoverflow.com/questions/42948872/how-to-have-different-routes-ids-on-different-routes-for-the-same-resources/42964731#42964731", "title": "How to have different routes ids on different routes for the same resources?", "body": "<p>Well, I found a nice solution, but only on Rails >= 5.1 (which is in rc1 at the moment), using the brand new <a href=\"http://edgeapi.rubyonrails.org/classes/ActionDispatch/Routing/Mapper/CustomUrls.html#method-i-direct\" rel=\"nofollow noreferrer\"><code>direct</code> method</a>:</p>\n\n<pre><code>namespace :admin do\n  resources :contents\nend\n\n# Maps admin content paths in order to use model.id instead of model.to_param\n{ admin_content: :show, edit_admin_content: :edit }.each do |direct_name, action|\n  direct direct_name do |model, options|\n    options.merge(controller: 'admin/contents', action: action, id: model.id)\n  end\nend\n</code></pre>\n"}], "owner": {"reputation": 7605, "user_id": 584552, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/dc70f4a04726fada8b9db8a18ff40412?s=128&d=identicon&r=PG", "display_name": "mdesantis", "link": "https://stackoverflow.com/users/584552/mdesantis"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 120, "favorite_count": 1, "accepted_answer_id": 42949846, "answer_count": 3, "score": 0, "last_activity_date": 1490226456, "creation_date": 1490178399, "last_edit_date": 1490226297, "question_id": 42948872, "link": "https://stackoverflow.com/questions/42948872/how-to-have-different-routes-ids-on-different-routes-for-the-same-resources", "title": "How to have different routes ids on different routes for the same resources?", "body": "<p>I have never found a good solution for this problem. I have the following routes structure:</p>\n\n<pre><code>resources :contents\n\nnamespace :admin do\n  resources :contents\nend\n</code></pre>\n\n<p>When I call <code>content_path(content)</code> I want the id to be the slug of the content, while when I call <code>admin_content_path(content)</code> I want the id to be the id of the content. I just want the id not to be related to the model (actually the id is the returning value of the <code>to_param</code> method of the model), but to the route.</p>\n\n<p>I would like to avoid defining helper methods for every route, it's a weak solution in my opinion.</p>\n\n<p>I know I can write <code>admin_content_path(id: content.id)</code> or <code>content_path(id: content.slug)</code>, but this is just an hack actually. Also, this is especially annoying in <code>form_for</code>, since I can't write</p>\n\n<pre><code>form_for @content\n</code></pre>\n\n<p>but I'm forced to use</p>\n\n<pre><code>form_for @content, url: @content.new_record? ? admin_contents_path : admin_contents_path(id: @content.id)\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby"], "answers": [{"comments": [{"owner": {"reputation": 19261, "user_id": 4758119, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/F4dJY.jpg?s=128&g=1", "display_name": "Deepak Mahakale", "link": "https://stackoverflow.com/users/4758119/deepak-mahakale"}, "reply_to_user": {"reputation": 178, "user_id": 7691010, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/eebf967a647150dd15891230e464abd1?s=128&d=identicon&r=PG&f=1", "display_name": "Krawalla", "link": "https://stackoverflow.com/users/7691010/krawalla"}, "edited": false, "score": 1, "creation_date": 1490177713, "post_id": 42948520, "comment_id": 72992501, "body": "<b>Great!</b>.. can you tell me what is the location of <code>job_amount(user)</code> method?"}, {"owner": {"reputation": 178, "user_id": 7691010, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/eebf967a647150dd15891230e464abd1?s=128&d=identicon&r=PG&f=1", "display_name": "Krawalla", "link": "https://stackoverflow.com/users/7691010/krawalla"}, "edited": false, "score": 0, "creation_date": 1490177811, "post_id": 42948520, "comment_id": 72992570, "body": "its in my /models/user.rb - why?"}, {"owner": {"reputation": 19261, "user_id": 4758119, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/F4dJY.jpg?s=128&g=1", "display_name": "Deepak Mahakale", "link": "https://stackoverflow.com/users/4758119/deepak-mahakale"}, "reply_to_user": {"reputation": 178, "user_id": 7691010, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/eebf967a647150dd15891230e464abd1?s=128&d=identicon&r=PG&f=1", "display_name": "Krawalla", "link": "https://stackoverflow.com/users/7691010/krawalla"}, "edited": false, "score": 1, "creation_date": 1490177874, "post_id": 42948520, "comment_id": 72992617, "body": "In that case you don&#39;t need to pass @user as argument"}], "tags": [], "owner": {"reputation": 19261, "user_id": 4758119, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/F4dJY.jpg?s=128&g=1", "display_name": "Deepak Mahakale", "link": "https://stackoverflow.com/users/4758119/deepak-mahakale"}, "is_accepted": true, "score": 1, "last_activity_date": 1490177932, "last_edit_date": 1490177932, "creation_date": 1490177470, "answer_id": 42948520, "question_id": 42948493, "link": "https://stackoverflow.com/questions/42948493/wrong-number-of-arguments-given-0-expected-1-ruby/42948520#42948520", "title": "wrong number of arguments (given 0, expected 1) - Ruby", "body": "<blockquote>\n  <p>wrong number of arguments (given 0, expected 1)</p>\n</blockquote>\n\n<p>This means the method expect one argument but you are passing zero</p>\n\n<pre><code>&lt;%= @user.job_amount(@user).to_s %&gt;\n</code></pre>\n\n<p>Although, this is very bad</p>\n\n<p>if <code>job_amount</code> is an instance method in <code>User</code> model you don't need to send <code>@user</code> as param you can make use of <code>self</code></p>\n\n<p><strong>Question:</strong> what is the location of <code>job_amount(user)</code> method?</p>\n\n<p><strong>EDIT</strong></p>\n\n<p>Changing method to this will also fix the issue</p>\n\n<pre><code>def job_amount\n  parent = Parent.where(parents: {firstname: firstname, name: name})\n  demands = Demand.where(parent_id: parent.pluck(:id))\n  demands.sum(:quantity)\nend\n</code></pre>\n\n<p>and</p>\n\n<pre><code>&lt;%= @user.job_amount.to_s %&gt;\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 12629, "user_id": 4739257, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/MdhEs.jpg?s=128&g=1", "display_name": "Ilya", "link": "https://stackoverflow.com/users/4739257/ilya"}, "edited": false, "score": 0, "creation_date": 1490178722, "post_id": 42948627, "comment_id": 72993219, "body": "I think this option is better. Also, <code>.sum(:quantity) </code>is redundant: just <code>sum</code> in enough."}, {"owner": {"reputation": 27144, "user_id": 3857758, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/58c4295826435f049b7fc32b98c240f9?s=128&d=identicon&r=PG&f=1", "display_name": "Ursus", "link": "https://stackoverflow.com/users/3857758/ursus"}, "reply_to_user": {"reputation": 12629, "user_id": 4739257, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/MdhEs.jpg?s=128&g=1", "display_name": "Ilya", "link": "https://stackoverflow.com/users/4739257/ilya"}, "edited": false, "score": 0, "creation_date": 1490178881, "post_id": 42948627, "comment_id": 72993340, "body": "The other option became like mine finally :P"}], "tags": [], "owner": {"reputation": 27144, "user_id": 3857758, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/58c4295826435f049b7fc32b98c240f9?s=128&d=identicon&r=PG&f=1", "display_name": "Ursus", "link": "https://stackoverflow.com/users/3857758/ursus"}, "is_accepted": false, "score": 2, "last_activity_date": 1490177736, "creation_date": 1490177736, "answer_id": 42948627, "question_id": 42948493, "link": "https://stackoverflow.com/questions/42948493/wrong-number-of-arguments-given-0-expected-1-ruby/42948627#42948627", "title": "wrong number of arguments (given 0, expected 1) - Ruby", "body": "<p>This is better</p>\n\n<pre><code>def job_amount\n  parent = Parent.where(parents: {firstname: firstname, name: name})\n  demands = Demand.where(parent_id: parent.pluck(:id))\n  demands.sum(:quantity)\nend\n</code></pre>\n"}], "owner": {"reputation": 178, "user_id": 7691010, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/eebf967a647150dd15891230e464abd1?s=128&d=identicon&r=PG&f=1", "display_name": "Krawalla", "link": "https://stackoverflow.com/users/7691010/krawalla"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1496, "favorite_count": 0, "accepted_answer_id": 42948520, "answer_count": 2, "score": -2, "last_activity_date": 1490178705, "creation_date": 1490177422, "last_edit_date": 1490178137, "question_id": 42948493, "link": "https://stackoverflow.com/questions/42948493/wrong-number-of-arguments-given-0-expected-1-ruby", "title": "wrong number of arguments (given 0, expected 1) - Ruby", "body": "<p>In my user model i've got this code:</p>\n\n<pre><code>def job_amount(user)\n  parent = Parent.where(parents: {firstname: user.firstname, name: user.name})\n  demands = Demand.where(parent_id: parent.pluck(:id))\n  demands.sum(:quantity)\nend\n</code></pre>\n\n<p>calling this:</p>\n\n<pre><code>&lt;%= @user.job_amount.to_s %&gt;\n</code></pre>\n\n<p>raises the following error:</p>\n\n<pre><code>wrong number of arguments (given 0, expected 1)\n</code></pre>\n\n<p>any ideas why?</p>\n"}, {"tags": ["mysql", "sql", "ruby", "ruby-on-rails-5"], "comments": [{"owner": {"reputation": 47232, "user_id": 1772830, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Qtoqg.jpg?s=128&g=1", "display_name": "Andrey Deineko", "link": "https://stackoverflow.com/users/1772830/andrey-deineko"}, "edited": false, "score": 1, "creation_date": 1490176874, "post_id": 42948130, "comment_id": 72991883, "body": "<a href=\"http://stackoverflow.com/questions/10301400/datetime-arithmetic-in-an-activerecord-query-postgresql\" title=\"datetime arithmetic in an activerecord query postgresql\">stackoverflow.com/questions/10301400/&hellip;</a>"}, {"owner": {"reputation": 12629, "user_id": 4739257, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/MdhEs.jpg?s=128&g=1", "display_name": "Ilya", "link": "https://stackoverflow.com/users/4739257/ilya"}, "edited": false, "score": 1, "creation_date": 1490177319, "post_id": 42948130, "comment_id": 72992229, "body": "Do you want records with date difference more or equal 2 weeks? In title you want <code>more</code>, in question you write <code>==</code>..."}, {"owner": {"reputation": 21, "user_id": 5448718, "user_type": "registered", "profile_image": "https://graph.facebook.com/10204397650678268/picture?type=large", "display_name": "Choki1708", "link": "https://stackoverflow.com/users/5448718/choki1708"}, "reply_to_user": {"reputation": 47232, "user_id": 1772830, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Qtoqg.jpg?s=128&g=1", "display_name": "Andrey Deineko", "link": "https://stackoverflow.com/users/1772830/andrey-deineko"}, "edited": false, "score": 0, "creation_date": 1490222117, "post_id": 42948130, "comment_id": 73021855, "body": "I tried with interval but I didn&#39;t manage to make it work. Thought mysql maybe doesn&#39;t have same syntax or support as in that post that @AndreyDeineko linked. I need == 2 weeks."}, {"owner": {"reputation": 21, "user_id": 5448718, "user_type": "registered", "profile_image": "https://graph.facebook.com/10204397650678268/picture?type=large", "display_name": "Choki1708", "link": "https://stackoverflow.com/users/5448718/choki1708"}, "edited": false, "score": 0, "creation_date": 1490222926, "post_id": 42948130, "comment_id": 73022234, "body": "I did exactly this: <code>where(%q{date_to - date_from &lt; interval &#39;13 years&#39;})</code> And it is giving me error: &quot;You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near &#39;)&#39; at line 1&quot; which I totally don&#39;t understand."}], "answers": [{"comments": [{"owner": {"reputation": 12629, "user_id": 4739257, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/MdhEs.jpg?s=128&g=1", "display_name": "Ilya", "link": "https://stackoverflow.com/users/4739257/ilya"}, "edited": false, "score": 0, "creation_date": 1490177069, "post_id": 42948238, "comment_id": 72992042, "body": "just <code>DATEDIFF(date_to, date_from) &lt; 13</code> should work"}, {"owner": {"reputation": 27144, "user_id": 3857758, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/58c4295826435f049b7fc32b98c240f9?s=128&d=identicon&r=PG&f=1", "display_name": "Ursus", "link": "https://stackoverflow.com/users/3857758/ursus"}, "reply_to_user": {"reputation": 12629, "user_id": 4739257, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/MdhEs.jpg?s=128&g=1", "display_name": "Ilya", "link": "https://stackoverflow.com/users/4739257/ilya"}, "edited": false, "score": 0, "creation_date": 1490177151, "post_id": 42948238, "comment_id": 72992110, "body": "Yeah, I know. It&#39;s just for clarity."}, {"owner": {"reputation": 21, "user_id": 5448718, "user_type": "registered", "profile_image": "https://graph.facebook.com/10204397650678268/picture?type=large", "display_name": "Choki1708", "link": "https://stackoverflow.com/users/5448718/choki1708"}, "edited": false, "score": 0, "creation_date": 1490223210, "post_id": 42948238, "comment_id": 73022336, "body": "Thank you so much. I think this is the answer, have to test it thoroughly but its giving results which seem valid."}, {"owner": {"reputation": 27144, "user_id": 3857758, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/58c4295826435f049b7fc32b98c240f9?s=128&d=identicon&r=PG&f=1", "display_name": "Ursus", "link": "https://stackoverflow.com/users/3857758/ursus"}, "edited": false, "score": 0, "creation_date": 1490231660, "post_id": 42948238, "comment_id": 73024992, "body": "My pleasure Sir :)"}, {"owner": {"reputation": 21, "user_id": 5448718, "user_type": "registered", "profile_image": "https://graph.facebook.com/10204397650678268/picture?type=large", "display_name": "Choki1708", "link": "https://stackoverflow.com/users/5448718/choki1708"}, "edited": false, "score": 0, "creation_date": 1490259756, "post_id": 42948238, "comment_id": 73035103, "body": "Btw @Ursus is the &quot;1 + ...&quot; here for some reason or did you just put it for funsies?"}, {"owner": {"reputation": 27144, "user_id": 3857758, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/58c4295826435f049b7fc32b98c240f9?s=128&d=identicon&r=PG&f=1", "display_name": "Ursus", "link": "https://stackoverflow.com/users/3857758/ursus"}, "edited": false, "score": 0, "creation_date": 1490260059, "post_id": 42948238, "comment_id": 73035327, "body": "Because if you pass the same date twice to DATEDIFF the result is 0. When I use it I always want 1 in such case."}], "tags": [], "owner": {"reputation": 27144, "user_id": 3857758, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/58c4295826435f049b7fc32b98c240f9?s=128&d=identicon&r=PG&f=1", "display_name": "Ursus", "link": "https://stackoverflow.com/users/3857758/ursus"}, "is_accepted": true, "score": 0, "last_activity_date": 1490178000, "last_edit_date": 1490178000, "creation_date": 1490176782, "answer_id": 42948238, "question_id": 42948130, "link": "https://stackoverflow.com/questions/42948130/rails-sql-query-difference-between-two-dates-more-then-2-weeks/42948238#42948238", "title": "Rails sql query difference between two dates more then 2 weeks", "body": "<p>This should work, for mysql at least</p>\n\n<pre><code>User.where('1 + DATEDIFF(date_to, date_from) &gt;= 14')\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 21, "user_id": 5448718, "user_type": "registered", "profile_image": "https://graph.facebook.com/10204397650678268/picture?type=large", "display_name": "Choki1708", "link": "https://stackoverflow.com/users/5448718/choki1708"}, "edited": false, "score": 0, "creation_date": 1490223088, "post_id": 42948541, "comment_id": 73022297, "body": "I don&#39;t have date_from variable, query must be without any params given to it."}, {"owner": {"reputation": 5952, "user_id": 2923108, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/21c18155bcd49e1e461a0eed925af039?s=128&d=identicon&r=PG&f=1", "display_name": "Marco Prins", "link": "https://stackoverflow.com/users/2923108/marco-prins"}, "reply_to_user": {"reputation": 21, "user_id": 5448718, "user_type": "registered", "profile_image": "https://graph.facebook.com/10204397650678268/picture?type=large", "display_name": "Choki1708", "link": "https://stackoverflow.com/users/5448718/choki1708"}, "edited": false, "score": 0, "creation_date": 1490258921, "post_id": 42948541, "comment_id": 73034561, "body": "@Choki1708 is <code>date_from</code> not an attribute on user? If it is, then it should be callable as demonstrated in my example. If not, then it&#39;s impossible to run your query without passing it in"}, {"owner": {"reputation": 21, "user_id": 5448718, "user_type": "registered", "profile_image": "https://graph.facebook.com/10204397650678268/picture?type=large", "display_name": "Choki1708", "link": "https://stackoverflow.com/users/5448718/choki1708"}, "edited": false, "score": 0, "creation_date": 1490259536, "post_id": 42948541, "comment_id": 73034933, "body": "But this way date_from is a variable. This is like doing this: <code>user_id = 1 User.where(id: user_id)</code> and I needed something like @Ursus. Or did I misunderstood something?"}, {"owner": {"reputation": 5952, "user_id": 2923108, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/21c18155bcd49e1e461a0eed925af039?s=128&d=identicon&r=PG&f=1", "display_name": "Marco Prins", "link": "https://stackoverflow.com/users/2923108/marco-prins"}, "reply_to_user": {"reputation": 21, "user_id": 5448718, "user_type": "registered", "profile_image": "https://graph.facebook.com/10204397650678268/picture?type=large", "display_name": "Choki1708", "link": "https://stackoverflow.com/users/5448718/choki1708"}, "edited": false, "score": 0, "creation_date": 1490353297, "post_id": 42948541, "comment_id": 73085233, "body": "@Choki1708, when you call this query, all you need to type is <code>User.two_weeks</code> - nothing else. You don&#39;t have to declare any variables. As long as you put the method on your user model"}], "tags": [], "owner": {"reputation": 5952, "user_id": 2923108, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/21c18155bcd49e1e461a0eed925af039?s=128&d=identicon&r=PG&f=1", "display_name": "Marco Prins", "link": "https://stackoverflow.com/users/2923108/marco-prins"}, "is_accepted": false, "score": 1, "last_activity_date": 1490177903, "last_edit_date": 1490177903, "creation_date": 1490177529, "answer_id": 42948541, "question_id": 42948130, "link": "https://stackoverflow.com/questions/42948130/rails-sql-query-difference-between-two-dates-more-then-2-weeks/42948541#42948541", "title": "Rails sql query difference between two dates more then 2 weeks", "body": "<p>Define this on user:</p>\n\n<pre><code>def self.two_weeks\n   where(date_to: date_from + 2.weeks)\nend\n</code></pre>\n\n<p>Then you can just call <code>User.two_weeks</code></p>\n\n<p>Can also be done as a scope, if you prefer:</p>\n\n<pre><code>scope :two_weeks, -&gt; { where(date_to: date_from + 2.weeks) }\n</code></pre>\n\n<p>It's good to keep these kinds of things on the model anyway, so that you can change them in one place if they need to be tweaked</p>\n"}], "owner": {"reputation": 21, "user_id": 5448718, "user_type": "registered", "profile_image": "https://graph.facebook.com/10204397650678268/picture?type=large", "display_name": "Choki1708", "link": "https://stackoverflow.com/users/5448718/choki1708"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 930, "favorite_count": 1, "accepted_answer_id": 42948238, "answer_count": 2, "score": 0, "last_activity_date": 1490178001, "creation_date": 1490176521, "last_edit_date": 1490178001, "question_id": 42948130, "link": "https://stackoverflow.com/questions/42948130/rails-sql-query-difference-between-two-dates-more-then-2-weeks", "title": "Rails sql query difference between two dates more then 2 weeks", "body": "<p>I have a table that has 2 columns \"date_from\" and \"date_to\". I have to make a query which should return results where \"date_to\" - \"date_from\" == \"2 weeks\".</p>\n\n<p>Something like this:</p>\n\n<blockquote>\n  <p><code>User.where('date_to - date_from == 2.weeks').</code></p>\n</blockquote>\n"}, {"tags": ["ruby-on-rails", "ruby", "paperclip"], "answers": [{"comments": [{"owner": {"reputation": 618, "user_id": 4217243, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/6a4yK.jpg?s=128&g=1", "display_name": "jithya", "link": "https://stackoverflow.com/users/4217243/jithya"}, "edited": false, "score": 0, "creation_date": 1490177439, "post_id": 42948447, "comment_id": 72992306, "body": "but it wont be always images. any type of files can be uploaded"}], "tags": [], "owner": {"reputation": 999, "user_id": 2039718, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4URjU.jpg?s=128&g=1", "display_name": "Dnyanarth lonkar", "link": "https://stackoverflow.com/users/2039718/dnyanarth-lonkar"}, "is_accepted": false, "score": 0, "last_activity_date": 1490177676, "last_edit_date": 1490177676, "creation_date": 1490177319, "answer_id": 42948447, "question_id": 42948055, "link": "https://stackoverflow.com/questions/42948055/viewing-of-paperclip-attachment-not-working/42948447#42948447", "title": "viewing of paperclip attachment not working", "body": "<p>for displaying image you need to use image tag below is the syntax:</p>\n\n<pre><code>&lt;%= link_to root_path do %&gt;\n    &lt;%= image_tag \"image_path\", class: \"some css class here\" %&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>or </p>\n\n<pre><code>&lt;%= link_to( image_tag(@job.job_offer.url), jobs_path, :class=&gt;\"abc\") %&gt;\n</code></pre>\n"}], "owner": {"reputation": 618, "user_id": 4217243, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/6a4yK.jpg?s=128&g=1", "display_name": "jithya", "link": "https://stackoverflow.com/users/4217243/jithya"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 134, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1490177676, "creation_date": 1490176341, "last_edit_date": 1490177552, "question_id": 42948055, "link": "https://stackoverflow.com/questions/42948055/viewing-of-paperclip-attachment-not-working", "title": "viewing of paperclip attachment not working", "body": "<p>I have uploaded a file images.jpeg using the code\n<code>&lt;%= s.file_field :job_offer %&gt;</code> . uploading was fine but when tries to view the uploaded file using code <code>link_to \"View\" , @job.job_offer.url</code>, it throws error. There is nothing in log files. Also all other places which have same kind of code works fine. </p>\n\n<p>When I checked network errors, it shows <code>Failed to load resource: the server responded with a status of 500 (Internal Server Error)</code>. in response header , type is <code>Content-Type:text/html</code>. if this would be the problem, how to fix this? </p>\n\n<p>I've tried giving type = 'image/jpeg' in link, but still the same. is there any other way to give type ?</p>\n\n<p>model.rb</p>\n\n<pre><code>  has_attached_file :job_offer,\n                :url =&gt; \"/uploads/:class/:id/:attachment/:attachment_fullname?:timestamp\",\n                :path =&gt; \"uploads/:class/:attachment/:id_partition/:style/:basename.:extension\"\n</code></pre>\n\n<p>and in schema, </p>\n\n<pre><code>t.string   \"job_offer_file_name\"\nt.string   \"job_offer_content_type\"\nt.integer  \"job_offer_file_size\"\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-5", "polymorphic-associations"], "comments": [{"owner": {"reputation": 7420, "user_id": 1081668, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/DdH12.png?s=128&g=1", "display_name": "Thanh", "link": "https://stackoverflow.com/users/1081668/thanh"}, "edited": false, "score": 1, "creation_date": 1490174372, "post_id": 42947034, "comment_id": 72990102, "body": "can you try <code>validates : estimated_delivery_date, presence: true, if: Proc.new { |c| c.commandable_type == &#39;Cover&#39; }</code> ?"}], "answers": [{"tags": [], "owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "is_accepted": true, "score": 1, "last_activity_date": 1490174437, "creation_date": 1490174437, "answer_id": 42947269, "question_id": 42947034, "link": "https://stackoverflow.com/questions/42947034/how-can-i-specify-validation-only-for-one-model-with-polymorphic-association/42947269#42947269", "title": "How can I specify validation only for one model with polymorphic association?", "body": "<p>You could do something like this:</p>\n\n<pre><code>validates :estimated_delivery_date, presence: true, if: :date_required?\n\nprivate\ndef date_required?\n  commandable.is_a?(Cover)\nend\n</code></pre>\n"}], "owner": {"reputation": 814, "user_id": 5479076, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/ebf84ecaf15f684b53f18b9313cd1325?s=128&d=identicon&r=PG&f=1", "display_name": "Orsay", "link": "https://stackoverflow.com/users/5479076/orsay"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 40, "favorite_count": 0, "accepted_answer_id": 42947269, "answer_count": 1, "score": 0, "last_activity_date": 1490174437, "creation_date": 1490173819, "question_id": 42947034, "link": "https://stackoverflow.com/questions/42947034/how-can-i-specify-validation-only-for-one-model-with-polymorphic-association", "title": "How can I specify validation only for one model with polymorphic association?", "body": "<p>I have a polymorphic model <code>command</code> who can be associated to a <code>cover</code> or to an <code>additional_return</code>.\nThose are the field in <code>command</code> :</p>\n\n<pre><code>  create_table \"commands\", force: :cascade do |t|\n    t.date     \"placement_date\"\n    t.date     \"estimated_delivery_date\"\n    t.string   \"commandable_type\"\n    t.integer  \"commandable_id\"\n    ...\n  end\n</code></pre>\n\n<p>The thing is : for <code>cover</code> I would like to validate the <code>estimated_delivery_date</code> but not for the model <code>additional_return</code>. How can I specify a validation only for one model ?</p>\n\n<pre><code> class Command &lt; ApplicationRecord\n   belongs_to :user, dependent: :destroy\n   belongs_to :commandable, polymorphic: true\n   validates_presence_of :commandable_type,\n                         :commandable_id\n end\n</code></pre>\n"}, {"tags": ["ruby", "string", "readline"], "comments": [{"owner": {"reputation": 481662, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 0, "creation_date": 1490173261, "post_id": 42946822, "comment_id": 72989402, "body": "Contain or start with? Try <code>if  lines.include? &quot;#&quot;</code>"}, {"owner": {"reputation": 147, "user_id": 5599359, "user_type": "registered", "accept_rate": 69, "profile_image": "https://lh4.googleusercontent.com/-Oop_rRof7Kc/AAAAAAAAAAI/AAAAAAAAAUI/OEL251FD5zo/photo.jpg?sz=128", "display_name": "Ender phan", "link": "https://stackoverflow.com/users/5599359/ender-phan"}, "reply_to_user": {"reputation": 481662, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 0, "creation_date": 1490173356, "post_id": 42946822, "comment_id": 72989457, "body": "Edited, thank you. it starts with @WiktorStribi\u017cew"}, {"owner": {"reputation": 147, "user_id": 5599359, "user_type": "registered", "accept_rate": 69, "profile_image": "https://lh4.googleusercontent.com/-Oop_rRof7Kc/AAAAAAAAAAI/AAAAAAAAAUI/OEL251FD5zo/photo.jpg?sz=128", "display_name": "Ender phan", "link": "https://stackoverflow.com/users/5599359/ender-phan"}, "reply_to_user": {"reputation": 481662, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 0, "creation_date": 1490173394, "post_id": 42946822, "comment_id": 72989480, "body": "@WiktorStribi\u017cew I prefer to do with the starting one :)"}], "answers": [{"comments": [{"owner": {"reputation": 147, "user_id": 5599359, "user_type": "registered", "accept_rate": 69, "profile_image": "https://lh4.googleusercontent.com/-Oop_rRof7Kc/AAAAAAAAAAI/AAAAAAAAAUI/OEL251FD5zo/photo.jpg?sz=128", "display_name": "Ender phan", "link": "https://stackoverflow.com/users/5599359/ender-phan"}, "edited": false, "score": 0, "creation_date": 1490186093, "post_id": 42946922, "comment_id": 72998493, "body": "Thank you so much, but I have another question. How can i take the first line of the line does not start with &quot;#&quot;?. I&#39;m using array now, but it&#39;s not a decent way to to. Can you give me a hint?"}, {"owner": {"reputation": 147, "user_id": 5599359, "user_type": "registered", "accept_rate": 69, "profile_image": "https://lh4.googleusercontent.com/-Oop_rRof7Kc/AAAAAAAAAAI/AAAAAAAAAUI/OEL251FD5zo/photo.jpg?sz=128", "display_name": "Ender phan", "link": "https://stackoverflow.com/users/5599359/ender-phan"}, "edited": false, "score": 0, "creation_date": 1490186556, "post_id": 42946922, "comment_id": 72998836, "body": "I just wanna take this line only &quot;2d75cc1bf8e57872781f9cd04a529256&quot;. it&#39;s the first line of the output."}], "tags": [], "owner": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "is_accepted": true, "score": 2, "last_activity_date": 1490187434, "last_edit_date": 1490187434, "creation_date": 1490173398, "answer_id": 42946922, "question_id": 42946822, "link": "https://stackoverflow.com/questions/42946822/return-the-lines-which-have-no-given-symbol-in-ruby/42946922#42946922", "title": "Return the lines which have no given symbol in Ruby", "body": "<p>You could just use a mix of <code>reject</code> and <code>start_with?</code> :</p>\n\n<pre><code>require 'net/http'\ndef open(url)\n  Net::HTTP.get(URI.parse(url))\nend\n\npage_content = open('https://virusshare.com/hashes/VirusShare_00000.md5')\n\nputs page_content.each_line.reject{ |line| line.start_with?('#') }\n</code></pre>\n\n<p>It outputs :</p>\n\n<pre><code>2d75cc1bf8e57872781f9cd04a529256\n00f538c3d410822e241486ca061a57ee\n3f066dd1f1da052248aed5abc4a0c6a1\n781770fda3bd3236d0ab8274577dddde\n86b6c59aa48a69e16d3313d982791398\n42914d6d213a20a2684064be5c80ffa9\n10699ac57f1cf851ae144ebce42fa587\n248338632580f9c018c4d8f8d9c6c408\n999eb1840c209aa70a84c5cf64909e5f\n12c4201fe1db96a1a1711790b52a3cf9\n................................\n</code></pre>\n\n<p>If you just want the first line :</p>\n\n<pre><code>page_content.each_line.find{ |line| !line.start_with?('#') }\n</code></pre>\n\n<h1>Notes</h1>\n\n<pre><code>page_content.each_line do |lines|\n</code></pre>\n\n<p><code>lines</code> should be called <code>line</code>. It is just one line.</p>\n\n<p>When you call </p>\n\n<pre><code>lines.each_line do |line|\n</code></pre>\n\n<p>You iterate over \"each\" line of just one line, so the loop isn't needed at all.</p>\n\n<p>Your code could be :</p>\n\n<pre><code>require 'net/http'\n\ndef open(url)\n  Net::HTTP.get(URI.parse(url))\nend\n\npage_content = open('https://virusshare.com/hashes/VirusShare_00000.md5')\n\npage_content.each_line do |line|\n  puts line if line[0] != \"#\"\nend\n</code></pre>\n"}], "owner": {"reputation": 147, "user_id": 5599359, "user_type": "registered", "accept_rate": 69, "profile_image": "https://lh4.googleusercontent.com/-Oop_rRof7Kc/AAAAAAAAAAI/AAAAAAAAAUI/OEL251FD5zo/photo.jpg?sz=128", "display_name": "Ender phan", "link": "https://stackoverflow.com/users/5599359/ender-phan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 47, "favorite_count": 0, "accepted_answer_id": 42946922, "answer_count": 1, "score": 0, "last_activity_date": 1490188126, "creation_date": 1490173122, "last_edit_date": 1490188126, "question_id": 42946822, "link": "https://stackoverflow.com/questions/42946822/return-the-lines-which-have-no-given-symbol-in-ruby", "title": "Return the lines which have no given symbol in Ruby", "body": "<p>I want to print the lines from a website's content page which do not start with the symbol <code>\"#\"</code>.</p>\n\n<pre><code>def open(url)\n  Net::HTTP.get(URI.parse(url))\nend\n\npage_content = open('https://virusshare.com/hashes/VirusShare_00000.md5')\n\nline_num=0\npage_content.each_line do |lines|\n  line_num += 1\n  if lines[0] == \"#\"\n    lines.each_line do |line|\n      if (line_num==1)\n        puts line\n      end\n    end\n  end\nend\n</code></pre>\n\n<p>Expected result:</p>\n\n<pre><code>2d75cc1bf8e57872781f9cd04a529256\n00f538c3d410822e241486ca061a57ee\n3f066dd1f1da052248aed5abc4a0c6a1\n781770fda3bd3236d0ab8274577dddde\n................................\n</code></pre>\n\n<p>It works when I try to print the lines that start with <code>\"#\"</code>:</p>\n\n<pre><code>lines[0] != \"#\"\n</code></pre>\n\n<p>But it does not work in the opposite way.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "date", "datetime"], "comments": [{"owner": {"reputation": 33085, "user_id": 2423164, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Nxbnp.jpg?s=128&g=1", "display_name": "ndnenkov", "link": "https://stackoverflow.com/users/2423164/ndnenkov"}, "edited": false, "score": 4, "creation_date": 1490172431, "post_id": 42946378, "comment_id": 72988911, "body": "<code>DateTime.now != DateTime.now</code>, but <code>Date.today == Date.today</code>, unless you manage to hit the exact moment the day changes."}], "answers": [{"tags": [], "owner": {"reputation": 19261, "user_id": 4758119, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/F4dJY.jpg?s=128&g=1", "display_name": "Deepak Mahakale", "link": "https://stackoverflow.com/users/4758119/deepak-mahakale"}, "is_accepted": false, "score": 1, "last_activity_date": 1490172379, "creation_date": 1490172379, "answer_id": 42946596, "question_id": 42946378, "link": "https://stackoverflow.com/questions/42946378/why-does-between-work-differently-for-date-and-datetime-in-ruby/42946596#42946596", "title": "Why does between? work differently for Date and DateTime in ruby?", "body": "<p>Well it seems like its issue of few milliseconds</p>\n\n<pre><code>DateTime.now.between?(DateTime.now, DateTime.now+1)\n^ executing first     ^ executing after few milliseconds or nanoseconds\n</code></pre>\n\n<p>The value of <code>DateTime</code> with what you are comparing is old than the <code></code>DateTime<code>value in</code>between?`</p>\n\n<p>But if you save it in variable</p>\n\n<pre><code>now = DateTime.now\nnow.between?(now,now+1)\n#=&gt; true\n</code></pre>\n\n<p>Also, as @ndn commented </p>\n\n<pre><code>DateTime.now ==  DateTime.now\n#=&gt; false\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 61, "user_id": 3121672, "user_type": "registered", "profile_image": "https://graph.facebook.com/1198340642/picture?type=large", "display_name": "kgunbin", "link": "https://stackoverflow.com/users/3121672/kgunbin"}, "is_accepted": false, "score": 2, "last_activity_date": 1490172411, "creation_date": 1490172411, "answer_id": 42946607, "question_id": 42946378, "link": "https://stackoverflow.com/questions/42946378/why-does-between-work-differently-for-date-and-datetime-in-ruby/42946607#42946607", "title": "Why does between? work differently for Date and DateTime in ruby?", "body": "<p>That is because times goes by.\nYour first DateTime.now, which you check against, is a couple of milliseconds before your second DateTime.now, in brackets.</p>\n"}, {"comments": [{"owner": {"reputation": 14640, "user_id": 380607, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/0475394dd283efd42d1ae51379c9ed00?s=128&d=identicon&r=PG", "display_name": "Magne", "link": "https://stackoverflow.com/users/380607/magne"}, "edited": false, "score": 0, "creation_date": 1490173002, "post_id": 42946661, "comment_id": 72989243, "body": "Thanks, this also explains why the max part always returns true, which was still a conundrum after reading the other answers."}], "tags": [], "owner": {"reputation": 455, "user_id": 7637917, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-mqDP9mBqkV0/AAAAAAAAAAI/AAAAAAAAACo/tB5bCodsHxw/photo.jpg?sz=128", "display_name": "Dmitry Cat", "link": "https://stackoverflow.com/users/7637917/dmitry-cat"}, "is_accepted": true, "score": 5, "last_activity_date": 1490173876, "last_edit_date": 1490173876, "creation_date": 1490172604, "answer_id": 42946661, "question_id": 42946378, "link": "https://stackoverflow.com/questions/42946378/why-does-between-work-differently-for-date-and-datetime-in-ruby/42946661#42946661", "title": "Why does between? work differently for Date and DateTime in ruby?", "body": "<p>Lets launch irb and run those code:</p>\n\n<pre><code>\"#{DateTime.now.inspect} \\n #{DateTime.now.inspect}\"\n</code></pre>\n\n<p>Result'll be something like this:</p>\n\n<pre><code>#&lt;DateTime: 2017-03-22T11:42:28+03:00 ((2457835j,31348s,373353553n),+10800s,2299161j)&gt;\n#&lt;DateTime: 2017-03-22T11:42:28+03:00 ((2457835j,31348s,373449152n),+10800s,2299161j)&gt;\n</code></pre>\n\n<p>As you can see, there is difference in nanoseconds (373353553n &lt; 373449152n)</p>\n\n<p><strong>Lets imagine that difference is equal to 'x', and DateTime.now is equal to 'Now', then:</strong></p>\n\n<blockquote>\n  <p>1) DateTime.now.between?(DateTime.now, DateTime.now+1.second)</p>\n  \n  <p>Now.between?(Now+x, Now+x+x+1.second) => false</p>\n  \n  <p>2) DateTime.now.between?(DateTime.now-1, DateTime.now)</p>\n  \n  <p>Now.between?(Now+x-1.second, Now+x+x) => true</p>\n</blockquote>\n"}, {"tags": [], "owner": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "is_accepted": false, "score": 2, "last_activity_date": 1490173121, "creation_date": 1490173121, "answer_id": 42946821, "question_id": 42946378, "link": "https://stackoverflow.com/questions/42946378/why-does-between-work-differently-for-date-and-datetime-in-ruby/42946821#42946821", "title": "Why does between? work differently for Date and DateTime in ruby?", "body": "<p>As others have mentioned :</p>\n\n<pre><code>a.between?(b,c)\n</code></pre>\n\n<p><code>a</code> is interpreted a few milliseconds before <code>b</code> and <code>c</code>.</p>\n\n<p>The shortest way to get the desired result would be :</p>\n\n<pre><code>(now=DateTime.now).between?(now, now+1)\n#=&gt; true\n</code></pre>\n\n<p>You could also reverse the order in which the <code>DateTime</code> objects are initialized :</p>\n\n<pre><code>(DateTime.now..DateTime.now+1).cover? DateTime.now\n#=&gt; true\n</code></pre>\n"}], "owner": {"reputation": 14640, "user_id": 380607, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/0475394dd283efd42d1ae51379c9ed00?s=128&d=identicon&r=PG", "display_name": "Magne", "link": "https://stackoverflow.com/users/380607/magne"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 58, "favorite_count": 0, "accepted_answer_id": 42946661, "answer_count": 4, "score": 3, "last_activity_date": 1490173876, "creation_date": 1490171661, "question_id": 42946378, "link": "https://stackoverflow.com/questions/42946378/why-does-between-work-differently-for-date-and-datetime-in-ruby", "title": "Why does between? work differently for Date and DateTime in ruby?", "body": "<p>The <a href=\"http://apidock.com/rails/ActiveSupport/TimeWithZone/between%3F\" rel=\"nofollow noreferrer\">doc</a> says:</p>\n\n<blockquote>\n  <p>between?(min, max) public</p>\n  \n  <p>Returns true if the current object\u2019s time is within the specified min\n  and max time.</p>\n</blockquote>\n\n<p>In Ruby:</p>\n\n<pre><code>&gt;&gt; DateTime.now.between?(DateTime.now, DateTime.now+1)\n=&gt; false\n&gt;&gt; Date.today.between?(Date.today, Date.today+1)\n=&gt; true\n</code></pre>\n\n<p>By using <code>.current</code> in Rails the discrepancy becomes even clearer, since you'd especially assume this method would have similar behavior on <code>DateTime</code> and <code>Date</code>:</p>\n\n<pre><code>&gt;&gt; DateTime.current.between?(DateTime.current, DateTime.current+1)\n=&gt; false\n&gt;&gt; Date.current.between?(Date.current, Date.current+1)\n=&gt; true\n</code></pre>\n\n<p>Is this intentional behavior? If so, why? It seems fairly odd that the behavior when dealing with the <code>min</code> edge of the interval is not idiosyncratic. Especially when considering that the <code>max</code> part is idiosyncratic:</p>\n\n<pre><code>&gt;&gt; DateTime.now.between?(DateTime.now-1, DateTime.now)\n=&gt; true\n&gt;&gt; Date.today.between?(Date.today-1, Date.today)\n=&gt; true\n</code></pre>\n"}, {"tags": ["ruby"], "answers": [{"comments": [{"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 1, "creation_date": 1490180123, "post_id": 42948407, "comment_id": 72994261, "body": "One <i>can</i> do this, but shouldn&#39;t. :)"}, {"owner": {"reputation": 3914, "user_id": 4057366, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/uZ3e5.jpg?s=128&g=1", "display_name": "Alex Holubenko", "link": "https://stackoverflow.com/users/4057366/alex-holubenko"}, "reply_to_user": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 2, "creation_date": 1490180213, "post_id": 42948407, "comment_id": 72994327, "body": "@SergioTulentsev It&#39;s another question ;)"}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1490181032, "post_id": 42948407, "comment_id": 72994899, "body": "Yes, it definitely is :)"}, {"owner": {"reputation": 33085, "user_id": 2423164, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Nxbnp.jpg?s=128&g=1", "display_name": "ndnenkov", "link": "https://stackoverflow.com/users/2423164/ndnenkov"}, "edited": false, "score": 1, "creation_date": 1490181151, "post_id": 42948407, "comment_id": 72994986, "body": "<code>Cat.constants # =&gt; []</code>"}, {"owner": {"reputation": 3914, "user_id": 4057366, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/uZ3e5.jpg?s=128&g=1", "display_name": "Alex Holubenko", "link": "https://stackoverflow.com/users/4057366/alex-holubenko"}, "reply_to_user": {"reputation": 33085, "user_id": 2423164, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Nxbnp.jpg?s=128&g=1", "display_name": "ndnenkov", "link": "https://stackoverflow.com/users/2423164/ndnenkov"}, "edited": false, "score": 0, "creation_date": 1490181667, "post_id": 42948407, "comment_id": 72995323, "body": "@ndn I edit it, now <code>Cat.constants</code> will return constant"}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1490181676, "post_id": 42948407, "comment_id": 72995331, "body": "Also the <code>const_missing</code> approach doesn&#39;t call <code>super</code> which may totally break rails&#39; autoloading."}, {"owner": {"reputation": 3914, "user_id": 4057366, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/uZ3e5.jpg?s=128&g=1", "display_name": "Alex Holubenko", "link": "https://stackoverflow.com/users/4057366/alex-holubenko"}, "edited": false, "score": 0, "creation_date": 1490181788, "post_id": 42948407, "comment_id": 72995405, "body": "yeah, my mistake :("}], "tags": [], "owner": {"reputation": 3914, "user_id": 4057366, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/uZ3e5.jpg?s=128&g=1", "display_name": "Alex Holubenko", "link": "https://stackoverflow.com/users/4057366/alex-holubenko"}, "is_accepted": false, "score": 1, "last_activity_date": 1490181767, "last_edit_date": 1490181767, "creation_date": 1490177227, "answer_id": 42948407, "question_id": 42946306, "link": "https://stackoverflow.com/questions/42946306/use-current-class-in-constant-declaration/42948407#42948407", "title": "Use current class in constant declaration", "body": "<p>I think, you can use this trick:</p>\n\n<pre><code>class Cat\n  def self.const_missing(name)\n    [Cat.new('John'), Cat.new('Alfred')] if name == :SUPERSTARS\n  end\n\n  attr_accessor :name\n\n  def initialize(name)\n    @name = name\n  end\nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 33085, "user_id": 2423164, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Nxbnp.jpg?s=128&g=1", "display_name": "ndnenkov", "link": "https://stackoverflow.com/users/2423164/ndnenkov"}, "is_accepted": false, "score": 0, "last_activity_date": 1490181495, "last_edit_date": 1490181495, "creation_date": 1490180045, "answer_id": 42949525, "question_id": 42946306, "link": "https://stackoverflow.com/questions/42946306/use-current-class-in-constant-declaration/42949525#42949525", "title": "Use current class in constant declaration", "body": "<p>The problem is that class definitions are just code that gets executed when the definition is reached. It's like asking if you can access the value of a local variable that you have not yet defined.</p>\n\n<p>A possible workaround is to delay the evaluation of the constant until the class body is executed. Note that it's not really worth it and it shows a working solution that shouldn't be used in practice:</p>\n\n<pre><code># BasicObject for minimal amount of methods\nclass Retarded &lt; BasicObject\n  def initialize(&amp;value)\n    @value = value\n  end\n\n  # Make sure we remove as many methods as we can to\n  #  make the proxy more transparent.\n  (instance_methods - %i(__id__ __send__ __binding__)).each do |name|\n    undef_method name\n  end\n\n  def method_missing(*args, &amp;block)\n    # Get the actual value\n    value = @value.call\n    # Suppress warnings while we traverse constants\n    warn_level, $VERBOSE = $VERBOSE, nil\n\n    traversed_modules = []\n    constant_finder = -&gt; (root) do\n      constant_name = root.constants.find do |constant|\n        # We undefed ==, so we need a different way to compare.\n        # Given that this class should be used for constant values in place,\n        #  comparing object ids does the job.\n        root.const_get(constant).__id__ == __id__\n      end\n\n      if constant_name\n        # Just set the constant to the actual value\n        root.const_set(constant_name, value)\n      else\n        # Recursively search for the containing module of the constant\n        root.constants.each do |child_name|\n          child_constant = root.const_get(child_name)\n          if child_constant.is_a?(::Module) &amp;&amp;\n               !traversed_modules.include?(child_constant)\n            # Handle circular references\n            traversed_modules.push child_constant\n            constant_finder.(child_constant) \n          end\n        end\n      end\n    end\n\n    # ::Object is the root module where constants are contained\n    constant_finder.(::Object)\n\n    # Bring back warnings\n    $VERBOSE = warn_level\n\n    # We have already found the constant and set its value to whatever was\n    #  passed in the constructor. However, this method_missing was called\n    #  in an attempt to call a method on the value. We now should make that\n    #  invocation.\n    value.public_send(*args, &amp;block)\n  end\nend\n\n# I know, the example is mononic.\nclass EdwardKing\n  DEAD = Retarded.new { [new('I'), new('II'), new('III')] }\n\n  def initialize(number)\n    @number = number\n  end\n\n  def whoami\n    \"Edward #{@number} of England\"\n  end\nend\n\np EdwardKing::DEAD\n  # [#&lt;EdwardKing:0x007f90fc26fd10 @number=\"I\"&gt;, #&lt;EdwardKing:0x007f90fc26fc70 @number=\"II\"&gt;, #&lt;EdwardKing:0x007f90fc26fc20 @number=\"III\"&gt;\np EdwardKing::DEAD.map(&amp;:whoami)\n  # [\"Edward I of England\", \"Edward II of England\", \"Edward III of England\"]\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 3914, "user_id": 4057366, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/uZ3e5.jpg?s=128&g=1", "display_name": "Alex Holubenko", "link": "https://stackoverflow.com/users/4057366/alex-holubenko"}, "edited": false, "score": 0, "creation_date": 1490181313, "post_id": 42949706, "comment_id": 72995098, "body": "also you can use less popular caller <code>::</code> and it would be like: <code>Cat::superstars</code> :)))"}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "reply_to_user": {"reputation": 3914, "user_id": 4057366, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/uZ3e5.jpg?s=128&g=1", "display_name": "Alex Holubenko", "link": "https://stackoverflow.com/users/4057366/alex-holubenko"}, "edited": false, "score": 0, "creation_date": 1490181555, "post_id": 42949706, "comment_id": 72995263, "body": "@AlexGolubenko: yes, I wouldn&#39;t use this syntax for the same reason: uniformness of code."}, {"owner": {"reputation": 3914, "user_id": 4057366, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/uZ3e5.jpg?s=128&g=1", "display_name": "Alex Holubenko", "link": "https://stackoverflow.com/users/4057366/alex-holubenko"}, "edited": false, "score": 0, "creation_date": 1490181705, "post_id": 42949706, "comment_id": 72995350, "body": "sure, it&#39;s just a joke)"}], "tags": [], "owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "is_accepted": false, "score": 0, "last_activity_date": 1490180426, "creation_date": 1490180426, "answer_id": 42949706, "question_id": 42946306, "link": "https://stackoverflow.com/questions/42946306/use-current-class-in-constant-declaration/42949706#42949706", "title": "Use current class in constant declaration", "body": "<p>Avdi Grimm in his free episode of rubytapas called <a href=\"http://www.virtuouscode.com/2012/10/01/barewords/\" rel=\"nofollow noreferrer\">\"Barewords\"</a> recommends that you don't use constants directly. Instead, wrap them in a method. And when you have a method, you don't even need the constant (which in ruby is not really <em>constant</em> anyway).</p>\n\n<p>So, you can do something like this:</p>\n\n<pre><code>class Cat\n  def self.superstars\n    @superstars ||= [Cat.new('John'), Cat.new('Alfred')]\n  end\n\n  attr_accessor :name\n\n  def initialize(name)\n    @name = name\n  end\nend\n</code></pre>\n\n<p>The only difference is that you now call it <code>Cat.superstars</code> instead of <code>Cat::SUPERSTARS</code>. Your code now works and looks better too! I call it a win-win. :)</p>\n"}], "owner": {"reputation": 582, "user_id": 739439, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b42455bfc95acdd878757bea8bd09555?s=128&d=identicon&r=PG", "display_name": "barbacan", "link": "https://stackoverflow.com/users/739439/barbacan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 100, "favorite_count": 1, "answer_count": 3, "score": 2, "last_activity_date": 1490181767, "creation_date": 1490171453, "last_edit_date": 1490180164, "question_id": 42946306, "link": "https://stackoverflow.com/questions/42946306/use-current-class-in-constant-declaration", "title": "Use current class in constant declaration", "body": "<pre><code>class Cat\n  SUPERSTARS = [Cat.new('John'), Cat.new('Alfred')]\n\n  attr_accessor :name\n\n  def initialize(name)\n    @name = name\n  end\nend\n</code></pre>\n\n<p>I get an error</p>\n\n<blockquote>\n  <p>ArgumentError: wrong number of arguments(1 for 0)</p>\n</blockquote>\n\n<p>because <code>initialize</code> is not again defined.</p>\n\n<p>If I put the definition on the end:</p>\n\n<pre><code>class Cat      \n  attr_accessor :name\n\n  def initialize(name)\n    @name = name\n  end\n\n  SUPERSTARS = [Cat.new('John'), Cat.new('Alfred')]\nend\n</code></pre>\n\n<p>it works.</p>\n\n<p>Is it possible to keep constant declaration on the top of the file?</p>\n"}, {"tags": ["javascript", "ruby-on-rails", "angularjs", "ruby"], "comments": [{"owner": {"reputation": 127321, "user_id": 2435473, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/8hKGc.jpg?s=128&g=1", "display_name": "Pankaj Parkar", "link": "https://stackoverflow.com/users/2435473/pankaj-parkar"}, "edited": false, "score": 1, "creation_date": 1490170141, "post_id": 42945777, "comment_id": 72987635, "body": "why you want to render <code>100k</code> element on a page, browser will die in that case because the <code>ng-repeat</code> works, use paging or loading records lazily on scroll down would work"}, {"owner": {"user_type": "does_not_exist", "display_name": "user7749772"}, "reply_to_user": {"reputation": 127321, "user_id": 2435473, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/8hKGc.jpg?s=128&g=1", "display_name": "Pankaj Parkar", "link": "https://stackoverflow.com/users/2435473/pankaj-parkar"}, "edited": false, "score": 0, "creation_date": 1490176829, "post_id": 42945777, "comment_id": 72991846, "body": "This is not an issue I will manage to reduce the data. I have taken 100000 in demo app because in my live app I have to use this percentage response     with large no of records."}], "answers": [{"comments": [{"owner": {"reputation": 345, "user_id": 2104151, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/7e88a12dbc9b3585a29281dff376a615?s=128&d=identicon&r=PG&f=1", "display_name": "techprat", "link": "https://stackoverflow.com/users/2104151/techprat"}, "edited": false, "score": 0, "creation_date": 1490174271, "post_id": 42946005, "comment_id": 72990020, "body": "This one is good, already using it. but it will only show a loading bar but not percentage."}, {"owner": {"reputation": 131, "user_id": 4715098, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0LwEE.jpg?s=128&g=1", "display_name": "Huey Zhang", "link": "https://stackoverflow.com/users/4715098/huey-zhang"}, "reply_to_user": {"reputation": 345, "user_id": 2104151, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/7e88a12dbc9b3585a29281dff376a615?s=128&d=identicon&r=PG&f=1", "display_name": "techprat", "link": "https://stackoverflow.com/users/2104151/techprat"}, "edited": false, "score": 0, "creation_date": 1490174535, "post_id": 42946005, "comment_id": 72990195, "body": "@techprat The percentage is unpredictable"}, {"owner": {"user_type": "does_not_exist", "display_name": "user7749772"}, "edited": false, "score": 0, "creation_date": 1490176508, "post_id": 42946005, "comment_id": 72991594, "body": "@hooks zhang, I need to show percentage. I have integrated the angular-loading-bar. working fine. But now the need to show the percentage like 1 %, 10 % then 100% when complete."}, {"owner": {"user_type": "does_not_exist", "display_name": "user7749772"}, "edited": false, "score": 0, "creation_date": 1490177617, "post_id": 42946005, "comment_id": 72992431, "body": "Urgent ! Can you please help me to avalible resource for percentage response in angular-loading-bar  Many Thanks in Advance"}, {"owner": {"reputation": 131, "user_id": 4715098, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0LwEE.jpg?s=128&g=1", "display_name": "Huey Zhang", "link": "https://stackoverflow.com/users/4715098/huey-zhang"}, "edited": false, "score": 0, "creation_date": 1490248983, "post_id": 42946005, "comment_id": 73029914, "body": "@RubyZero RailsZero A key problem -- Nobody know load it spent much time, so percentage is unpredictable."}], "tags": [], "owner": {"reputation": 131, "user_id": 4715098, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0LwEE.jpg?s=128&g=1", "display_name": "Huey Zhang", "link": "https://stackoverflow.com/users/4715098/huey-zhang"}, "is_accepted": false, "score": 0, "last_activity_date": 1490170279, "creation_date": 1490170279, "answer_id": 42946005, "question_id": 42945777, "link": "https://stackoverflow.com/questions/42945777/percentage-loading-time-in-angular-js-with-http-request/42946005#42946005", "title": "Percentage Loading Time in angular js with $http request", "body": "<p><a href=\"https://github.com/chieffancypants/angular-loading-bar\" rel=\"nofollow noreferrer\">angular-loading-bar</a> is a good plugs to help you implement it.</p>\n"}, {"comments": [{"owner": {"reputation": 345, "user_id": 2104151, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/7e88a12dbc9b3585a29281dff376a615?s=128&d=identicon&r=PG&f=1", "display_name": "techprat", "link": "https://stackoverflow.com/users/2104151/techprat"}, "edited": false, "score": 0, "creation_date": 1490174191, "post_id": 42946075, "comment_id": 72989976, "body": "This is not what Ruby is looking for."}], "tags": [], "owner": {"reputation": 97, "user_id": 1624137, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f9c0767e2b3903428cf395a3e2c48cac?s=128&d=identicon&r=PG", "display_name": "rakesh kumar", "link": "https://stackoverflow.com/users/1624137/rakesh-kumar"}, "is_accepted": false, "score": 0, "last_activity_date": 1490170572, "creation_date": 1490170572, "answer_id": 42946075, "question_id": 42945777, "link": "https://stackoverflow.com/questions/42945777/percentage-loading-time-in-angular-js-with-http-request/42946075#42946075", "title": "Percentage Loading Time in angular js with $http request", "body": "<p>you can use this lib for  here is best example for you.</p>\n\n<p><a href=\"http://nervgh.github.io/pages/angular-file-upload/examples/image-preview/\" rel=\"nofollow noreferrer\">http://nervgh.github.io/pages/angular-file-upload/examples/image-preview/</a>           </p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user7749772"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 870, "favorite_count": 1, "answer_count": 2, "score": 3, "last_activity_date": 1502740034, "creation_date": 1490169494, "last_edit_date": 1502740034, "question_id": 42945777, "link": "https://stackoverflow.com/questions/42945777/percentage-loading-time-in-angular-js-with-http-request", "title": "Percentage Loading Time in angular js with $http request", "body": "<p>I am using angular with rails application</p>\n\n<p>I have a demo app. I need to show response time required to load a response in angular</p>\n\n<p>As an example.</p>\n\n<p>I am loading a response of array of 100 k elements. I want to show percentage start from 0% and increment as response load. When full response loaded then it completes response time 100%</p>\n\n<p>Details of using files</p>\n\n<p>/app/views/layouts/application.html.erb</p>\n\n<pre><code>&lt;!DOCTYPE html&gt;\n&lt;html&gt;\n&lt;head&gt;\n&lt;title&gt;Anguler&lt;/title&gt;\n&lt;%= stylesheet_link_tag    'application', media: 'all', 'data-turbolinks-track' =&gt; true %&gt;\n&lt;%= javascript_include_tag 'application', 'data-turbolinks-track' =&gt; true %&gt;\n&lt;%= csrf_meta_tags %&gt;\n&lt;/head&gt;\n&lt;body&gt;\n    &lt;%= yield %&gt;\n&lt;/body&gt;\n&lt;/html&gt;\n</code></pre>\n\n<p>/app/views/pages/index.html.erb</p>\n\n<pre><code>&lt;div ng-app=\"myApp\" ng-controller=\"customersCtrl\"&gt;\n    &lt;ul&gt;\n        &lt;li ng-repeat=\"x in myData\"&gt;\n            {{ x }}\n        &lt;/li&gt;\n    &lt;/ul&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p>/app/controllers/pages_controller.rb</p>\n\n<pre><code>class PagesController &lt; ApplicationController\n   def index\n       @arr = []\n       for n in 1..100000\n           @arr.push(n)\n       end\n       return render json: @arr\n   end\nend\n</code></pre>\n\n<p>/app/controllers/application_controller.rb</p>\n\n<pre><code>class ApplicationController &lt; ActionController::Base\n    # Prevent CSRF attacks by raising an exception.\n    # For APIs, you may want to use :null_session instead.\n    protect_from_forgery with: :exception\nend\n</code></pre>\n\n<p>/assets/javascripts/application.js</p>\n\n<pre><code>//= require jquery\n//= require jquery_ujs\n//= require turbolinks\n//= require angular.min\n//= require custom.min\n</code></pre>\n\n<p>/assets/javascripts/custom.js</p>\n\n<pre><code>var app = angular.module('myApp');\napp.controller('customersCtrl', function($scope, $http) {\n    $http.get(\"/\").then(function (response) {\n        $scope.myData = response.data.records;\n    }\n});\n</code></pre>\n\n<p>Let me know how it could be possible to showing loading percentage time in percentage</p>\n\n<p>Many Thanks in advance</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "devise"], "comments": [{"owner": {"reputation": 948, "user_id": 3106770, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/z2ddT.jpg?s=128&g=1", "display_name": "Divyang Hirpara", "link": "https://stackoverflow.com/users/3106770/divyang-hirpara"}, "edited": false, "score": 0, "creation_date": 1490168710, "post_id": 42945400, "comment_id": 72986892, "body": "you will get answer from <a href=\"http://stackoverflow.com/questions/21478006/how-to-add-username-field-to-devise-gem/21478201#21478201\" title=\"how to add username field to devise gem\">stackoverflow.com/questions/21478006/&hellip;</a>"}], "answers": [{"tags": [], "owner": {"reputation": 9369, "user_id": 3724716, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/db6186238a22752875cea1841a19d769?s=128&d=identicon&r=PG", "display_name": "Arun Kumar Mohan", "link": "https://stackoverflow.com/users/3724716/arun-kumar-mohan"}, "is_accepted": false, "score": 1, "last_activity_date": 1490168537, "creation_date": 1490168537, "answer_id": 42945501, "question_id": 42945400, "link": "https://stackoverflow.com/questions/42945400/need-help-in-rails-devise-registration/42945501#42945501", "title": "Need help in rails devise registration", "body": "<p>Add the following code in your <code>ApplicationController</code> to let Devise permit parameters other than <code>email</code> and <code>password</code>.</p>\n\n<pre><code>class ApplicationController &lt; ActionController::Base\n  before_action :configure_permitted_parameters, if: :devise_controller?\n\n  protected\n\n  def configure_permitted_parameters\n    permitted_params = %i(name city address country postal) # returns [:name, :city, :address, :country, :postal]\n\n    devise_parameter_sanitizer.permit(:sign_up, keys: permitted_params)\n    devise_parameter_sanitizer.permit(:account_update, keys: permitted_params)\n  end\nend\n</code></pre>\n\n<p>This way, you're configuring devise to permit the additional fields on both new account registration and profile updation.</p>\n\n<p>For more, read <a href=\"https://github.com/plataformatec/devise#strong-parameters\" rel=\"nofollow noreferrer\">https://github.com/plataformatec/devise#strong-parameters</a></p>\n"}], "owner": {"reputation": 1, "user_id": 7615186, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/8580e075969971d4f0e0055514cc30f1?s=128&d=identicon&r=PG&f=1", "display_name": "Bobby Verma", "link": "https://stackoverflow.com/users/7615186/bobby-verma"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 30, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1490169327, "creation_date": 1490168143, "question_id": 42945400, "link": "https://stackoverflow.com/questions/42945400/need-help-in-rails-devise-registration", "title": "Need help in rails devise registration", "body": "<p>hey guys i want to register a new user with the help of devise but the view containes only 2 fields which are email and the password</p>\n\n<p>i wish to save name, address, city, etc which are in my users table as well. In the view of registration/new.html.erb</p>\n\n<p>after i added them in the view and i clicked sign up the following errors showed up</p>\n\n<p>5 errors prohibited this user from being saved:</p>\n\n<pre><code>Name can't be blank\nCity can't be blank\nAddress can't be blank\nCountry can't be blank\nPostal code can't be blank\n</code></pre>\n\n<p>so can someone please tell me what do i have to do to make devise accept these additional atrributes aside from email and password and save them in my users table</p>\n"}, {"tags": ["ruby", "hash", "metaprogramming", "class-eval"], "comments": [{"owner": {"reputation": 9297, "user_id": 764546, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/OfNpk.jpg?s=128&g=1", "display_name": "MikDiet", "link": "https://stackoverflow.com/users/764546/mikdiet"}, "edited": false, "score": 1, "creation_date": 1490169339, "post_id": 42945041, "comment_id": 72987217, "body": "Local variable <code>history_hash</code> and instance variable <code>@history_hash</code> are different variables."}, {"owner": {"reputation": 41846, "user_id": 926143, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/3396173c3d22988be1a0732d184902aa?s=128&d=identicon&r=PG", "display_name": "7stud", "link": "https://stackoverflow.com/users/926143/7stud"}, "edited": false, "score": 0, "creation_date": 1490172193, "post_id": 42945041, "comment_id": 72988759, "body": "In other words, when the method <code>attr_accessor_with_history()</code> finishes executing after this line: <code>attr_accessor_with_history :bar</code>, the local variable <code>history_hash</code> is destroyed, which causes the error: <code>undefined local variable or method &#39;history_hash&#39;</code> when you try to access <code>history_hash</code> in the <code>bar=()</code> setter in this line: <code>f.bar = 3</code>.  <i>I wanted to use a hash to store different histories for different attributes</i>--Storing data that you want to persist in a local variable is never going to work."}], "answers": [{"comments": [{"owner": {"reputation": 85, "user_id": 5050789, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh6.googleusercontent.com/-Pbo7Fd6Lhpw/AAAAAAAAAAI/AAAAAAAAACY/q9YwBTTJafk/photo.jpg?sz=128", "display_name": "Xcelleratr", "link": "https://stackoverflow.com/users/5050789/xcelleratr"}, "edited": false, "score": 0, "creation_date": 1490200886, "post_id": 42945726, "comment_id": 73009984, "body": "The reason I had the hash there was because the f.history(:bar) thing was there, and I couldn&#39;t figure out another way to store the history of different attributes. I expected that some of my code would have been unnecessary, as I tried several different things. Thank you though, this is very helpful."}], "tags": [], "owner": {"reputation": 167912, "user_id": 240443, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/495d675e3bc42ed1dee469e2ce701f1b?s=128&d=identicon&r=PG", "display_name": "Amadan", "link": "https://stackoverflow.com/users/240443/amadan"}, "is_accepted": true, "score": 1, "last_activity_date": 1490169320, "creation_date": 1490169320, "answer_id": 42945726, "question_id": 42945041, "link": "https://stackoverflow.com/questions/42945041/how-to-use-a-hash-in-a-class-eval-statement-in-ruby/42945726#42945726", "title": "How to use a hash in a class_eval statement in Ruby", "body": "<blockquote>\n  <p>or a NameError occurs because it sees 'history_hash' as an undefined local variable or method</p>\n</blockquote>\n\n<p>I'd say you can't, because it <em>is</em> a local variable, one that is inaccessible in the context you want it. However, why do you even need it? I'm reasonably sure it's in the \"some code I added in an attempt to complete the assignment\", and not the original assignment code (which, I assume, expects you to store the history of <code>@bar</code> in <code>@bar_history</code> - or else what is <code>attr_hist_name</code> all about?)</p>\n\n<p>I'm also uncomfortable about string evals; it's generally not necessary, and Ruby can do better, with its powerful metaprogramming facilities. Here's how I'd do it:</p>\n\n<pre><code>class Class\n  def attr_accessor_with_history(attr_name)\n    attr_setter_name = :\"#{attr_name}=\"\n    attr_getter_name = :\"#{attr_name}\"\n    attr_hist_name = :\"@#{attr_name}_history\"\n    attr_name = :\"@#{attr_name}\"\n\n    self.class_eval do\n      define_method(attr_getter_name) do\n        instance_variable_get(attr_name)\n      end\n\n      define_method(attr_setter_name) do |val|\n        instance_variable_set(attr_name, val)\n        history = instance_variable_get(attr_hist_name)\n        instance_variable_set(attr_hist_name, history = []) unless history\n        history &lt;&lt; val\n      end\n    end\n  end\nend\n\nclass Object\n  def history(attr_name)\n    attr_hist_name = :\"@#{attr_name}_history\"\n    instance_variable_get(attr_hist_name)\n  end\nend\n</code></pre>\n\n<p>Finally, as it's monkey-patching base classes, I'd rather use refinements to add it where needed, but that's probably an overkill for an assignment.</p>\n"}], "owner": {"reputation": 85, "user_id": 5050789, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh6.googleusercontent.com/-Pbo7Fd6Lhpw/AAAAAAAAAAI/AAAAAAAAACY/q9YwBTTJafk/photo.jpg?sz=128", "display_name": "Xcelleratr", "link": "https://stackoverflow.com/users/5050789/xcelleratr"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 158, "favorite_count": 0, "accepted_answer_id": 42945726, "answer_count": 1, "score": 1, "last_activity_date": 1490169320, "creation_date": 1490166901, "question_id": 42945041, "link": "https://stackoverflow.com/questions/42945041/how-to-use-a-hash-in-a-class-eval-statement-in-ruby", "title": "How to use a hash in a class_eval statement in Ruby", "body": "<p>I was working on a homework assignment when I ran into a frustrating issue. The assignment is an exercise in Ruby metaprogramming and the goal is to define an 'attr_accessor_with_history' that does all the same things as 'attr_accessor', but also provides a history of all values that an attribute has ever been. Here is the provided code from the assignment along with some code I added in an attempt to complete the assignment:</p>\n\n<pre><code>    class Class\n\n  def attr_accessor_with_history(attr_name)\n    attr_name = attr_name.to_s\n    attr_hist_name = attr_name+'_history'\n    history_hash = {attr_name =&gt; []}\n\n    #getter\n    self.class_eval(\"def #{attr_name} ; @#{attr_name} ; end\")\n    #setter\n    self.class_eval %Q{\n      def #{attr_name}=(val)\n        # add to history\n        @#{attr_hist_name} = [nil] if @#{attr_hist_name}.nil?\n        @#{attr_hist_name} &lt;&lt; val\n        history_hash[@#{attr_name}] = @#{attr_hist_name}\n\n        # set the value itself\n        @#{attr_name} = val\n      end\n\n      def history(attr) ; @history_hash[attr.to_s] ; end\n    }\n  end\nend\n\nclass Foo\n  attr_accessor_with_history :bar\n  attr_accessor_with_history :crud\nend\nf = Foo.new     # =&gt; #&lt;Foo:0x127e678&gt;\nf.bar = 3       # =&gt; 3\nf.bar = :wowzo  # =&gt; :wowzo\nf.bar = 'boo!'  # =&gt; 'boo!'\nputs f.history(:bar) # =&gt; [3, :wowzo, 'boo!']\nf.crud = 42\nf.crud = \"Hello World!\"\nputs f.history(:crud)\n</code></pre>\n\n<p>I wanted to use a hash to store different histories for different attributes but I cannot access that hash in the class_eval statement for the setter. No matter how I try to set it up I always either seem to get a NoMethodError for the []= method because 'history_hash' somehow becomes type NilClass, or a NameError occurs because it sees 'history_hash' as an undefined local variable or method. How do I use the hash in the class_eval statements?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "protocol-buffers", "grpc", "proto3"], "answers": [{"tags": [], "owner": {"reputation": 96, "user_id": 5511606, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/74f6ded64f3be372a26d22a97dfb97f4?s=128&d=identicon&r=PG&f=1", "display_name": "apolcyn", "link": "https://stackoverflow.com/users/5511606/apolcyn"}, "is_accepted": false, "score": 0, "last_activity_date": 1491348564, "creation_date": 1491348564, "answer_id": 43219424, "question_id": 42944960, "link": "https://stackoverflow.com/questions/42944960/how-to-define-a-protobuf-message-to-pass-an-active-record-protobuf-message-direc/43219424#43219424", "title": "How to define a protobuf message to pass an active record protobuf message directly as an input parameter into a ruby grpc code by compiling protomsg?", "body": "<p>I think you would like to convert this AppPreferenceMessage object to a protobuf message, and then pass that to an rpc method which has been created from a separate proto file? Also I'm unfamiliar with what AppPreferenceMessage.to_proto returns, is it serialized bytes?</p>\n\n<p>I'm not sure that I'm completely clear, but it sounds like you might not want to use the grpc-protobuf stub and service code generators, as these are designed with passing of ruby protobuf objects in mind. </p>\n\n<p>There are some examples in <a href=\"https://github.com/grpc/grpc/tree/master/examples/ruby/without_protobuf\" rel=\"nofollow noreferrer\">https://github.com/grpc/grpc/tree/master/examples/ruby/without_protobuf</a> that might be useful if skipping the grpc-protobuf code gen is what you need.</p>\n"}], "owner": {"reputation": 36, "user_id": 6528438, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yLhBN.jpg?s=128&g=1", "display_name": "susheel", "link": "https://stackoverflow.com/users/6528438/susheel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 574, "favorite_count": 1, "answer_count": 1, "score": 0, "last_activity_date": 1491348564, "creation_date": 1490166650, "last_edit_date": 1490167300, "question_id": 42944960, "link": "https://stackoverflow.com/questions/42944960/how-to-define-a-protobuf-message-to-pass-an-active-record-protobuf-message-direc", "title": "How to define a protobuf message to pass an active record protobuf message directly as an input parameter into a ruby grpc code by compiling protomsg?", "body": "<p>We are creating a grpc server using proto3. and compiling it into a ruby function.We have converted the Active Record Message into a protobuf-message (got by calling the \"activerecord\".to_proto method) using ActiveRecord-Protobuf gem. However while creating the protobuf message to create the ruby server we are not able to pass the \"activerecord\".to_proto message as while defining the type of the input value we have no other go but to define it as a message in proto3 and hence it only accepts a hash value. inorder for which we have to convert our .to_proto object to \"activerecord\".to_proto.to_hash. This is futile and reduces the optimality of grpc. Ironically we are shifting to grpc for its optimality. Could you suggest how to define the protobuf message (using proto3) to ensure the \"activerecord\".to_proto message is compatible with the proto3 input value definition.</p>\n\n<p>This is the active record object.</p>\n\n<pre><code>class AppPreferenceMessage &lt; ::Protobuf::Message\noptional ::Protobuf::Field::Int64Field, :id, 1\noptional ::Protobuf::Field::StringField, :preference_key, 2\noptional ::Protobuf::Field::StringField, :value, 3\noptional ::Protobuf::Field::StringField, :value_type, 4\noptional ::Protobuf::Field::Int64Field, :vaccount_id, 5  \nend\n</code></pre>\n\n<p>This is converted to AppPreference.last.to_proto which is a protobuf message by class.</p>\n\n<p>my protobuf definition of the ruby input parameters is as follows.</p>\n\n<pre><code>syntax=\"proto3\";\nservice App_Preferences{\nrpc Index(Empty) returns (Index_Output){}\n}\nmessage Index_Output{\nint64 id=1;\nstring preference_key=2;\nstring value=3;\nstring value_type=4;\nint64 vaccount_id = 5;  \n}\n</code></pre>\n\n<p>This parameter \"Index_Output\" only accepts AppPreference.last.to_proto.to_hash but however I want it to accept AppPreference.last.to_proto as an input. How do i change my protobuf code. </p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4", "rspec", "rspec-rails"], "answers": [{"tags": [], "owner": {"reputation": 7975, "user_id": 1577357, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/9db0054df76cc4b80888ff713527a652?s=128&d=identicon&r=PG", "display_name": "Zulhilmi Zainudin", "link": "https://stackoverflow.com/users/1577357/zulhilmi-zainudin"}, "is_accepted": false, "score": 0, "last_activity_date": 1490170920, "creation_date": 1490170920, "answer_id": 42946156, "question_id": 42944773, "link": "https://stackoverflow.com/questions/42944773/what-does-failure-message-when-negated-mean-in-rspec-matchers/42946156#42946156", "title": "What does &#39;failure_message_when_negated&#39; mean in RSpec Matchers?", "body": "<p>I think I get it.</p>\n\n<pre><code># if the Model has `attr_accessor` named `:promotion_type`\n# `it { should_not have_attr_accessor :promotion_type }` test\n# will return failure (call this `failure_message_when_negated`)\n# because the Model is clearly has `:promotion_type`\nfailure_message_when_negated do |object_instance|\n    \"expected attr_accessor for #{field} not to be defined on #{object_instance}\"\nend\n</code></pre>\n\n<p>Example failure message:</p>\n\n<pre><code>1) Promotion should not assert there is an attr_accessor of the given name on the supplied object\n     Failure/Error: it { should_not have_attr_accessor :promotion_type }\n       expected attr_accessor for promotion_type not to be defined on #&lt;Promotion:0x007fd939c840c8&gt;\n</code></pre>\n"}], "owner": {"reputation": 7975, "user_id": 1577357, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/9db0054df76cc4b80888ff713527a652?s=128&d=identicon&r=PG", "display_name": "Zulhilmi Zainudin", "link": "https://stackoverflow.com/users/1577357/zulhilmi-zainudin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 126, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1490170920, "creation_date": 1490166058, "last_edit_date": 1495541839, "question_id": 42944773, "link": "https://stackoverflow.com/questions/42944773/what-does-failure-message-when-negated-mean-in-rspec-matchers", "title": "What does &#39;failure_message_when_negated&#39; mean in RSpec Matchers?", "body": "<p>I look at <a href=\"https://stackoverflow.com/a/28705325/1577357\">this answer</a> and I didn't understand the <code>failure_message_when_negated</code> part.</p>\n\n<pre><code>RSpec::Matchers.define :have_attr_accessor do |field|\n  match do |object_instance|\n    object_instance.respond_to?(field) &amp;&amp;\n      object_instance.respond_to?(\"#{field}=\")\n  end\n\n  failure_message do |object_instance|\n    \"expected attr_accessor for #{field} on #{object_instance}\"\n  end\n\n  failure_message_when_negated do |object_instance|\n    \"expected attr_accessor for #{field} not to be defined on #{object_instance}\"\n  end\n\n  description do\n    \"assert there is an attr_accessor of the given name on the supplied object\"\n  end\nend\n</code></pre>\n\n<p>What does it mean in simple words? I really appreciate clear and not-foo-bar explanation.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "security", "ruby-on-rails-5", "sanitization"], "answers": [{"tags": [], "owner": {"reputation": 3073, "user_id": 87972, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/91e9e297b26a2e81e18af01ff84338e8?s=128&d=identicon&r=PG", "display_name": "Hoa", "link": "https://stackoverflow.com/users/87972/hoa"}, "is_accepted": true, "score": 0, "last_activity_date": 1490176718, "creation_date": 1490176718, "answer_id": 42948209, "question_id": 42944100, "link": "https://stackoverflow.com/questions/42944100/argument-error-whitelist-and-sanitize-passed-parameters-to-be-secure/42948209#42948209", "title": "Argument Error - Whitelist and sanitize passed parameters to be secure", "body": "<p>You can sanitize <code>params</code> as follows</p>\n\n<pre><code>&lt;%= link_to \"Title\",\n  params.merge(\n    :utf8 =&gt; params[:utf8],\n    :search =&gt; params[:search],\n    :x =&gt; \"5\",\n    :y =&gt; \"\").permit(:utf8, :search, :x, :y),\n  title:\"Alphabetical\" %&gt;\n</code></pre>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user4539335"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 451, "favorite_count": 1, "accepted_answer_id": 42948209, "answer_count": 1, "score": 1, "last_activity_date": 1490176718, "creation_date": 1490163566, "question_id": 42944100, "link": "https://stackoverflow.com/questions/42944100/argument-error-whitelist-and-sanitize-passed-parameters-to-be-secure", "title": "Argument Error - Whitelist and sanitize passed parameters to be secure", "body": "<p>I just upgraded to Rails 5.0.1, and I'm running into a security warning:</p>\n\n<pre><code>ArgumentError in Categories#show\nShowing /home/user/website/app/views/categories/show.html.erb where line #127 raised:\n\nAttempting to generate a URL from non-sanitized request parameters! An attacker \ncan inject malicious data into the generated URL, such as changing the host. \nWhitelist and sanitize passed parameters to be secure.\n</code></pre>\n\n<p>This is the offending code:</p>\n\n<pre><code>&lt;%= link_to \"Title\", params.merge(:utf8 =&gt; params[:utf8], :search =&gt; params[:search], :x =&gt; \"5\", :y =&gt; \"\"), title:\"Alphabetical\" %&gt;\n</code></pre>\n\n<p>I searched for this error and found a few similar problems, but they were either solved my running <code>permit!</code> instead of just <code>permit</code> (which is inapplicable in my situation) or the problem was a bug, which I hope isn't the case. I tried adding <code>html_safe</code> to my parameters but it didn't help.</p>\n\n<p>Anyone know how I can sanitize my parameters to abide by Rails 5 security measures?</p>\n"}, {"tags": ["json", "ruby", "thor"], "answers": [{"tags": [], "owner": {"reputation": 1302, "user_id": 1368977, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c79672007d59af69a05f2b5f6929b53f?s=128&d=identicon&r=PG", "display_name": "Marc Rohloff", "link": "https://stackoverflow.com/users/1368977/marc-rohloff"}, "is_accepted": true, "score": 3, "last_activity_date": 1490161234, "creation_date": 1490161234, "answer_id": 42943595, "question_id": 42943401, "link": "https://stackoverflow.com/questions/42943401/ruby-calling-method-within-another-methods-conditional-statement/42943595#42943595", "title": "Ruby: calling method within another method&#39;s conditional statement", "body": "<p>This</p>\n\n<pre><code>if options[:api_key]\n  if re.match(options[:api_key]) ? print_json : puts \"Invalid API Key, operation abort...\"\nend\n</code></pre>\n\n<p>Should just be</p>\n\n<pre><code>if options[:api_key]\n  re.match(options[:api_key]) ? print_json : puts \"Invalid API Key, operation abort...\"\nend\n</code></pre>\n\n<p>Though I would prefer:</p>\n\n<pre><code>if options[:api_key]\n  if re.match(options[:api_key]) \n    print_json\n  else\n    puts \"Invalid API Key, operation abort...\"\n  end\nend\n</code></pre>\n\n<p>Or if you must put it on one line:</p>\n\n<pre><code>if options[:api_key]\n  if re.match(options[:api_key]) then print_json else puts \"Invalid API Key, operation abort...\" end\nend\n</code></pre>\n"}], "owner": {"reputation": 105, "user_id": 7291482, "user_type": "registered", "accept_rate": 27, "profile_image": "https://www.gravatar.com/avatar/7e95fa3cbcbe679e44dde223e6860017?s=128&d=identicon&r=PG&f=1", "display_name": "xeno7", "link": "https://stackoverflow.com/users/7291482/xeno7"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 189, "favorite_count": 0, "accepted_answer_id": 42943595, "answer_count": 1, "score": -1, "last_activity_date": 1490161234, "creation_date": 1490160290, "question_id": 42943401, "link": "https://stackoverflow.com/questions/42943401/ruby-calling-method-within-another-methods-conditional-statement", "title": "Ruby: calling method within another method&#39;s conditional statement", "body": "<p>I'm trying to call the method <strong>print_json</strong> within a conditional statement that is contained in another method named <strong>list_trends</strong>. I did this becauese my code was starting to look too nested. However I get an error when I run that says:</p>\n\n<pre><code>syntax error, unexpected tSTRING_BEG, expecting keyword_do or '{' or '('\n...i_key]) ? print_trends : puts \"Invalid API Key, operation ab...\n</code></pre>\n\n<p>Here is my code:</p>\n\n<pre><code>#!/usr/bin/ruby\n\nrequire 'thor'\nrequire 'json'\n\nclass ListTrends &lt; Thor\n  desc \"list trends\", \"list out trends from JSON file\"\n\n  option :api_key, :aliases =&gt; \"--api-key\", :type =&gt; :string, :required =&gt; true\n\n  def print_json\n    json = File.read('trends_available.json')\n    trends_hash = JSON.parse(json)\n\n    trends_hash.each do |key|\n      key.each do |k,v|\n        puts \"Trend #{k}: #{v}\"\n      end\n      puts \"\"\n    end\n  end\n\n  def list_trends\n    re = /^(?=.*[a-zA-Z])(?=.*[0-9]).{8,}$/\n    if options[:api_key]\n      if re.match(options[:api_key]) ? print_json : puts \"Invalid API Key, operation abort...\"\n    end\n  end\nend\n\nListTrends.start(ARGV)\n</code></pre>\n"}, {"tags": ["ruby", "linux", "ubuntu-14.04"], "answers": [{"comments": [{"owner": {"reputation": 91, "user_id": 6714406, "user_type": "registered", "profile_image": "https://graph.facebook.com/885424771590276/picture?type=large", "display_name": "Shrey Ratna", "link": "https://stackoverflow.com/users/6714406/shrey-ratna"}, "edited": false, "score": 0, "creation_date": 1490158127, "post_id": 42942891, "comment_id": 72982296, "body": "Typo, mate, chmod, it is, sorry to point out a mistake outta there, wouldn&#39;t root work?"}, {"owner": {"reputation": 91, "user_id": 6714406, "user_type": "registered", "profile_image": "https://graph.facebook.com/885424771590276/picture?type=large", "display_name": "Shrey Ratna", "link": "https://stackoverflow.com/users/6714406/shrey-ratna"}, "edited": false, "score": 0, "creation_date": 1490158358, "post_id": 42942891, "comment_id": 72982360, "body": "I get again a error, fixed about the permissions, but <code>techonepl@instance-1:&#47;opt&#47;wpscan$ ruby2.4 wpscan.rb --update Could not find gem &#39;typhoeus (&gt;= 1.1.2)&#39; in any of the gem sources listed in your Gemfile. Run </code>bundle install` to install missing gems.`"}, {"owner": {"reputation": 1036, "user_id": 5078051, "user_type": "registered", "accept_rate": 67, "profile_image": "https://graph.facebook.com/10203328378168774/picture?type=large", "display_name": "Hsiu Chuan Tsao", "link": "https://stackoverflow.com/users/5078051/hsiu-chuan-tsao"}, "reply_to_user": {"reputation": 91, "user_id": 6714406, "user_type": "registered", "profile_image": "https://graph.facebook.com/885424771590276/picture?type=large", "display_name": "Shrey Ratna", "link": "https://stackoverflow.com/users/6714406/shrey-ratna"}, "edited": false, "score": 0, "creation_date": 1490158493, "post_id": 42942891, "comment_id": 72982417, "body": "you need other dependent gem, run <code>bundle install</code> in your project"}, {"owner": {"reputation": 91, "user_id": 6714406, "user_type": "registered", "profile_image": "https://graph.facebook.com/885424771590276/picture?type=large", "display_name": "Shrey Ratna", "link": "https://stackoverflow.com/users/6714406/shrey-ratna"}, "edited": false, "score": 0, "creation_date": 1490159278, "post_id": 42942891, "comment_id": 72982707, "body": "Again <code>techonepl@instance-1:&#47;opt&#47;wpscan$ gem install ffi -v &#39;1.9.18&#39; Building native extensions.  This could take a while... Successfully installed ffi-1.9.18 1 gem installed techonepl@instance-1:&#47;opt&#47;wpscan$ ruby2.4 wpscan.rb --update Could not find ffi-1.9.18 in any of the sources Run </code>bundle install` to install missing gems.` Its installed even"}], "tags": [], "owner": {"reputation": 1036, "user_id": 5078051, "user_type": "registered", "accept_rate": 67, "profile_image": "https://graph.facebook.com/10203328378168774/picture?type=large", "display_name": "Hsiu Chuan Tsao", "link": "https://stackoverflow.com/users/5078051/hsiu-chuan-tsao"}, "is_accepted": false, "score": 1, "last_activity_date": 1490168813, "last_edit_date": 1490168813, "creation_date": 1490157703, "answer_id": 42942891, "question_id": 42942545, "link": "https://stackoverflow.com/questions/42942545/there-was-an-error-while-trying-to-write-to-opt-wpscan-bundle-config-it-is/42942891#42942891", "title": "There was an error while trying to write to `/opt/wpscan/.bundle/config`. It is likely that you need to grant write permissions for that path", "body": "<pre><code>sudo chmod -R 777 /opt/wpscan/.bundle\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 91, "user_id": 6714406, "user_type": "registered", "profile_image": "https://graph.facebook.com/885424771590276/picture?type=large", "display_name": "Shrey Ratna", "link": "https://stackoverflow.com/users/6714406/shrey-ratna"}, "is_accepted": true, "score": 7, "last_activity_date": 1584033101, "last_edit_date": 1584033101, "creation_date": 1490159154, "answer_id": 42943163, "question_id": 42942545, "link": "https://stackoverflow.com/questions/42942545/there-was-an-error-while-trying-to-write-to-opt-wpscan-bundle-config-it-is/42943163#42943163", "title": "There was an error while trying to write to `/opt/wpscan/.bundle/config`. It is likely that you need to grant write permissions for that path", "body": "<p>Fixed it by\n<code>curl -sSL https://get.rvm.io | bash -s stable\nsource ~/.rvm/scripts/rvm\necho \"source ~/.rvm/scripts/rvm\" &gt;&gt; ~/.bashrc\nrvm install 2.2.3\nrvm use 2.2.3 --default\necho \"gem: --no-ri --no-rdoc\" &gt; ~/.gemrc\ngem install bundler</code></p>\n\n<p>And <code>sudo chmod -R 777 /opt/wpscan/.bundle</code></p>\n\n<p>Works fine, thanks.</p>\n"}], "owner": {"reputation": 91, "user_id": 6714406, "user_type": "registered", "profile_image": "https://graph.facebook.com/885424771590276/picture?type=large", "display_name": "Shrey Ratna", "link": "https://stackoverflow.com/users/6714406/shrey-ratna"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 8924, "favorite_count": 1, "accepted_answer_id": 42943163, "answer_count": 2, "score": 2, "last_activity_date": 1584033101, "creation_date": 1490155395, "question_id": 42942545, "link": "https://stackoverflow.com/questions/42942545/there-was-an-error-while-trying-to-write-to-opt-wpscan-bundle-config-it-is", "title": "There was an error while trying to write to `/opt/wpscan/.bundle/config`. It is likely that you need to grant write permissions for that path", "body": "<p>Hello I use a google cloud instance to run my codes,\n<code>techonepl@instance-1:/opt/wpscan$ sudo gem install bundler &amp;&amp; bundle install --without test\nFetching: bundler-1.14.6.gem (100%)\nSuccessfully installed bundler-1.14.6\nParsing documentation for bundler-1.14.6\nInstalling ri documentation for bundler-1.14.6\nDone installing documentation for bundler after 7 seconds\n1 gem installed\nThere was an error while trying to write to</code>/opt/wpscan/.bundle/config<code>. It is likely that you need to grant write permissions for that path.</code>\nEven if I am running it using sudo, what else I need to grant?\nSystem info: Ubuntu 14.04 Trusty\n2GB Ram\nRuns on Google Cloud.\nI was trying to install \"wpscan\"</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 28612, "user_id": 5025116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7WdYi.jpg?s=128&g=1", "display_name": "Sebastian Palma", "link": "https://stackoverflow.com/users/5025116/sebastian-palma"}, "edited": false, "score": 0, "creation_date": 1490154473, "post_id": 42942188, "comment_id": 72981244, "body": "Do the hash for the failureCase have the <code>:status</code> key? and/or any <code>error</code>value?"}, {"owner": {"reputation": 2300, "user_id": 2874507, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh4.googleusercontent.com/-bTf3QWEeXi0/AAAAAAAAAAI/AAAAAAAAAvA/G7Uh0JZWsOk/photo.jpg?sz=128", "display_name": "Abhilash", "link": "https://stackoverflow.com/users/2874507/abhilash"}, "reply_to_user": {"reputation": 28612, "user_id": 5025116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7WdYi.jpg?s=128&g=1", "display_name": "Sebastian Palma", "link": "https://stackoverflow.com/users/5025116/sebastian-palma"}, "edited": false, "score": 0, "creation_date": 1490154499, "post_id": 42942188, "comment_id": 72981251, "body": "@Sebasti&#225;nPalma no.."}, {"owner": {"reputation": 28612, "user_id": 5025116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7WdYi.jpg?s=128&g=1", "display_name": "Sebastian Palma", "link": "https://stackoverflow.com/users/5025116/sebastian-palma"}, "edited": false, "score": 0, "creation_date": 1490154751, "post_id": 42942188, "comment_id": 72981323, "body": "Do you know the Ruby and Rails versions?"}, {"owner": {"reputation": 2300, "user_id": 2874507, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh4.googleusercontent.com/-bTf3QWEeXi0/AAAAAAAAAAI/AAAAAAAAAvA/G7Uh0JZWsOk/photo.jpg?sz=128", "display_name": "Abhilash", "link": "https://stackoverflow.com/users/2874507/abhilash"}, "reply_to_user": {"reputation": 28612, "user_id": 5025116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7WdYi.jpg?s=128&g=1", "display_name": "Sebastian Palma", "link": "https://stackoverflow.com/users/5025116/sebastian-palma"}, "edited": false, "score": 0, "creation_date": 1490154830, "post_id": 42942188, "comment_id": 72981343, "body": "<code>ruby 2.3.1p112 (2016-04-26 revision 54768) [x86_64-linux]</code> &amp; <code>Rails 5.0.1</code>"}, {"owner": {"reputation": 63078, "user_id": 220147, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b3881a28fe402dd2d1de44717486cae8?s=128&d=identicon&r=PG", "display_name": "Michael Kohl", "link": "https://stackoverflow.com/users/220147/michael-kohl"}, "edited": false, "score": 2, "creation_date": 1490155275, "post_id": 42942188, "comment_id": 72981484, "body": "This error happens frequently when what you believe to be a hash somehow ends up wrapped in an array. <code>[:status]</code> will then complain that <code>:status</code> can not be converted from Symbol to Integer, the only allowed argument type for <code>Array#[]</code>."}, {"owner": {"reputation": 2300, "user_id": 2874507, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh4.googleusercontent.com/-bTf3QWEeXi0/AAAAAAAAAAI/AAAAAAAAAvA/G7Uh0JZWsOk/photo.jpg?sz=128", "display_name": "Abhilash", "link": "https://stackoverflow.com/users/2874507/abhilash"}, "reply_to_user": {"reputation": 63078, "user_id": 220147, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b3881a28fe402dd2d1de44717486cae8?s=128&d=identicon&r=PG", "display_name": "Michael Kohl", "link": "https://stackoverflow.com/users/220147/michael-kohl"}, "edited": false, "score": 0, "creation_date": 1490155406, "post_id": 42942188, "comment_id": 72981517, "body": "@MichaelKohl should be the case.. Any suggestions on how to deal with this.. Now what I think to do is catch <code>TypeError</code> and do everything there for failure case"}, {"owner": {"reputation": 63078, "user_id": 220147, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b3881a28fe402dd2d1de44717486cae8?s=128&d=identicon&r=PG", "display_name": "Michael Kohl", "link": "https://stackoverflow.com/users/220147/michael-kohl"}, "edited": false, "score": 0, "creation_date": 1490167637, "post_id": 42942188, "comment_id": 72986274, "body": "Well either change your code to return what you expect or deal with getting an array. Using an exception for this seems unnecessary at best."}, {"owner": {"reputation": 2300, "user_id": 2874507, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh4.googleusercontent.com/-bTf3QWEeXi0/AAAAAAAAAAI/AAAAAAAAAvA/G7Uh0JZWsOk/photo.jpg?sz=128", "display_name": "Abhilash", "link": "https://stackoverflow.com/users/2874507/abhilash"}, "reply_to_user": {"reputation": 63078, "user_id": 220147, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b3881a28fe402dd2d1de44717486cae8?s=128&d=identicon&r=PG", "display_name": "Michael Kohl", "link": "https://stackoverflow.com/users/220147/michael-kohl"}, "edited": false, "score": 0, "creation_date": 1490348848, "post_id": 42942188, "comment_id": 73082275, "body": "@MichaelKohl the request is from a 3rd party service so have no control over it. Their documententation is also bit vague.. I am doing this inside a background job and dont want it to keep it retrying during unexpected cases as I cant predict what format the response comes in... So i think exception is the way to go here.."}], "answers": [{"comments": [{"owner": {"reputation": 2300, "user_id": 2874507, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh4.googleusercontent.com/-bTf3QWEeXi0/AAAAAAAAAAI/AAAAAAAAAvA/G7Uh0JZWsOk/photo.jpg?sz=128", "display_name": "Abhilash", "link": "https://stackoverflow.com/users/2874507/abhilash"}, "edited": false, "score": 0, "creation_date": 1490348919, "post_id": 42943309, "comment_id": 73082306, "body": "Thank you for the answer. But this is not the case. I use symbolize during parsing to prevent this. So <code>response[:status]</code> works.. But i think the issue is @MichaelKohl  mentioned in the comment."}], "tags": [], "owner": {"reputation": 3624, "user_id": 5615038, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/wW8mP.jpg?s=128&g=1", "display_name": "fangxing", "link": "https://stackoverflow.com/users/5615038/fangxing"}, "is_accepted": false, "score": 0, "last_activity_date": 1490160772, "last_edit_date": 1490160772, "creation_date": 1490159883, "answer_id": 42943309, "question_id": 42942188, "link": "https://stackoverflow.com/questions/42942188/typeerror-no-implicit-conversion-of-symbol-into-integer-when-handling-multiple/42943309#42943309", "title": "TypeError: no implicit conversion of Symbol into Integer when handling multiple kind of hashes", "body": "<p>I have came across similar issue, you may try call <code>response.stringify_keys</code> after get response, and then use <code>response[\"status\"] == 'success'</code> instead of <code>response[:status] == 'success'</code></p>\n\n<p>If you can touch the code in your external service. Before response result the you can call <code>to_json</code>, this will convert symbol key to string key. </p>\n\n<pre><code># in rails console\n&gt; response = {status: 'success', sellerid: 2200}\n=&gt; {:status=&gt;\"success\", :sellerid=&gt;2200} #symbol key\n&gt; response = {\"status\" =&gt; 'success', \"sellerid\" =&gt; 2200}\n=&gt; {\"status\"=&gt;\"success\", \"sellerid\"=&gt;2200}          \n&gt; response.to_json\n=&gt; \"{\\\"status\\\":\\\"success\\\",\\\"sellerid\\\":2200}\"\n</code></pre>\n\n<p>After that just call <code>response[\"status\"] == 'success'</code> in your side.</p>\n"}], "owner": {"reputation": 2300, "user_id": 2874507, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh4.googleusercontent.com/-bTf3QWEeXi0/AAAAAAAAAAI/AAAAAAAAAvA/G7Uh0JZWsOk/photo.jpg?sz=128", "display_name": "Abhilash", "link": "https://stackoverflow.com/users/2874507/abhilash"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 978, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1490160772, "creation_date": 1490153149, "last_edit_date": 1490155023, "question_id": 42942188, "link": "https://stackoverflow.com/questions/42942188/typeerror-no-implicit-conversion-of-symbol-into-integer-when-handling-multiple", "title": "TypeError: no implicit conversion of Symbol into Integer when handling multiple kind of hashes", "body": "<p>I am recieving either of these formats from an external service.</p>\n\n<p><strong>#successCase:</strong> if success/error this will be thrown with proper status code</p>\n\n<pre><code>{:sellerid=&gt;2200, :status=&gt;\"success\"}\n</code></pre>\n\n<p><strong>#failureCase:</strong> for unexpected errors am recieving this kind of hash and this is causing errors</p>\n\n<pre><code>{:property=&gt;\"instance.seller_mobile\", :message=&gt;\"does not meet maximum length of 10\", :schema=&gt;{:type=&gt;\"string\", :required=&gt;true, :minLength=&gt;1, :maxLength=&gt;10}, :instance=&gt;\"01234ssss56789\", :stack=&gt;\"instance.seller_mobile does not meet maximum length of 10\"}\n</code></pre>\n\n<p>This is what I do with the response and here is where error happens(I think)</p>\n\n<pre><code>`if response[:status] == 'success'` \n#doing something\nelsif response[:status] == 'error'\n#doing something\nend\n</code></pre>\n\n<p>If its <strong>#successCase:</strong> response this works fine. But if its <strong>#failureCase:</strong> am getting error   </p>\n\n<blockquote>\n  <p>TypeError:\n         no implicit conversion of Symbol into Integer</p>\n</blockquote>\n\n<p>I can see that its raising error here   <code>Failure/Error: if parsed_response[:status] == 'success'</code></p>\n\n<p>Could someone tell me how to fix this?</p>\n\n<blockquote>\n  <p>PS: \"I tried in console and it seems to be working right but rails throws error\"</p>\n</blockquote>\n"}, {"tags": ["ruby", "ruby-on-rails-4", "devise"], "answers": [{"tags": [], "owner": {"reputation": 1036, "user_id": 5078051, "user_type": "registered", "accept_rate": 67, "profile_image": "https://graph.facebook.com/10203328378168774/picture?type=large", "display_name": "Hsiu Chuan Tsao", "link": "https://stackoverflow.com/users/5078051/hsiu-chuan-tsao"}, "is_accepted": false, "score": 0, "last_activity_date": 1490159186, "creation_date": 1490159186, "answer_id": 42943168, "question_id": 42941999, "link": "https://stackoverflow.com/questions/42941999/how-to-implement-security-questions-with-devise/42943168#42943168", "title": "How to implement security questions with Devise?", "body": "<p>The document write :</p>\n\n<p>Add the captcha in the generated devise views for each controller you have activated</p>\n\n<pre><code>&lt;p&gt;&lt;%= captcha_tag %&gt;&lt;/p&gt;\n&lt;p&gt;&lt;%= text_field_tag :captcha %&gt;&lt;/p&gt;\n</code></pre>\n"}], "owner": {"reputation": 1221, "user_id": 1907273, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/0ebbd5fd61bb650dabfcfa44e2ce7022?s=128&d=identicon&r=PG", "display_name": "evanx", "link": "https://stackoverflow.com/users/1907273/evanx"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 295, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1490159186, "creation_date": 1490152017, "last_edit_date": 1495541416, "question_id": 42941999, "link": "https://stackoverflow.com/questions/42941999/how-to-implement-security-questions-with-devise", "title": "How to implement security questions with Devise?", "body": "<p>I want to implement some security questions to allow the user to reset his password.</p>\n\n<p>I'm using the <strong>devise_security_extension</strong> and following the <a href=\"https://github.com/phatworx/devise_security_extension\" rel=\"nofollow noreferrer\">instructions</a> however I am a bit lost on how to implement the view so the user can input the answers.</p>\n\n<p>I read the following post: <a href=\"https://stackoverflow.com/questions/20467729/implementing-security-questions\">Implementing Security questions</a> but it left me more confused.</p>\n\n<p><strong>Should I create a nested form or there is some sort of generator?</strong></p>\n\n<p><strong>Models</strong></p>\n\n<pre><code>class SecurityQuestion &lt; ActiveRecord::Base\n  validates :name, presence: true, uniqueness: true\nend\n\nclass TheResource &lt; ActiveRecord::Base\n  belongs_to :security_questions\nend\n</code></pre>\n"}, {"tags": ["ruby", "shortest-path"], "answers": [{"tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": false, "score": 1, "last_activity_date": 1490159996, "last_edit_date": 1490159996, "creation_date": 1490157240, "answer_id": 42942804, "question_id": 42941687, "link": "https://stackoverflow.com/questions/42941687/how-to-conver-adjacency-matrix-to-graph-ruby/42942804#42942804", "title": "How to conver adjacency matrix to graph ruby?", "body": "<p>Your input is contained in an array, which I assume is as follows.</p>\n\n<pre><code>arr = [[nil,   3,   10,  7,   8, nil, nil, nil, nil, nil],\n       [  3, nil, nil, nil,   6, nil,   9,   5, nil, nil],\n       [ 10, nil, nil,   5, nil, nil, nil, nil, nil, nil],\n       [  7, nil, nil, nil,   4,   5, nil, nil, nil, nil],\n       [  8,   6, nil,   4, nil,   3,   4, nil, nil,   5],\n       [nil, nil, nil,   5,   3, nil, nil, nil, nil,   7],\n       [nil,   9, nil, nil,   4, nil, nil,   6,   8,   6],\n       [nil,   5, nil, nil, nil, nil,   6, nil,  11, nil],\n       [nil, nil, nil, nil, nil, nil,   8,  11, nil,   3],\n       [nil, nil, nil, nil,   5,   7,   6, nil,   3, nil]]\n</code></pre>\n\n<p>You could then write</p>\n\n<pre><code>arr.each_with_index.with_object([]) { |(row, i), a| row.each_with_index { |v, j|\n  a &lt;&lt; [i, j, v] unless v.nil? } }\n    #=&gt; [[0, 1, 3], [0, 2, 10], [0, 3, 7], [0, 4, 8], [1, 0, 3], [1, 4, 6],\n    #    [1, 6, 9], [1, 7, 5], [2, 0, 10], [2, 3, 5], [3, 0, 7], [3, 4, 4],\n    #   ...\n    #    [8, 7, 11], [8, 9, 3], [9, 4, 5], [9, 5, 7], [9, 6, 6], [9, 8, 3]] \n</code></pre>\n\n<p>I've assumed the cells that do not correspond to links equal <code>nil</code>. You could use <code>Float::INFINITY</code> (in which case we'd write <code>a &lt;&lt; [i, j, v] if v &lt; Float::INFINITY</code>), but <code>nil</code> is more convenient.</p>\n\n<p>See <a href=\"http://ruby-doc.org/core-2.4.0/Enumerable.html#method-i-each_with_index\" rel=\"nofollow noreferrer\">Enumerable#each_with_index</a>, <a href=\"http://ruby-doc.org/core-2.4.0/Enumerator.html#method-i-with_object\" rel=\"nofollow noreferrer\">Enumerator#with_object</a>. The block variables in <code>|(row, i), a|</code> are as follows:</p>\n\n<ul>\n<li><code>row</code> is an element of <code>arr</code>, a 10-element array. </li>\n<li><code>i</code> is the row index (<code>0</code>-<code>9</code>).</li>\n<li><code>a</code> is an initially-empty array (<code>each_with_object([])</code>) that will be build and returned by the block.</li>\n</ul>\n"}], "owner": {"reputation": 71, "user_id": 2520276, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/f89c41e5888ba44fed4c935b1bfc7ebb?s=128&d=identicon&r=PG", "display_name": "Cramel Ang", "link": "https://stackoverflow.com/users/2520276/cramel-ang"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 303, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1490159996, "creation_date": 1490150108, "question_id": 42941687, "link": "https://stackoverflow.com/questions/42941687/how-to-conver-adjacency-matrix-to-graph-ruby", "title": "How to conver adjacency matrix to graph ruby?", "body": "<p>I want to find the shortest path of Node x to Node y in Ruby</p>\n\n<p>So i have some code which i got from <a href=\"https://rosettacode.org/wiki/Dijkstra%27s_algorithm#Ruby\" rel=\"nofollow noreferrer\">https://rosettacode.org/wiki/Dijkstra%27s_algorithm#Ruby</a>\nbut i will need the following format of my Graph to work:\n<a href=\"https://i.stack.imgur.com/HE4bZ.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/HE4bZ.jpg\" alt=\"enter image description here\"></a> </p>\n\n<p>What's the way to do it?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-3", "rubygems", "bundler"], "answers": [{"tags": [], "owner": {"reputation": 315, "user_id": 2880800, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/6b6cd92cd46ba9de46836eb1f61ee467?s=128&d=identicon&r=PG&f=1", "display_name": "Falk", "link": "https://stackoverflow.com/users/2880800/falk"}, "is_accepted": false, "score": 2, "last_activity_date": 1490153742, "last_edit_date": 1495535397, "creation_date": 1490153742, "answer_id": 42942284, "question_id": 42941537, "link": "https://stackoverflow.com/questions/42941537/ruby-gems-not-found-despite-bundle-install/42942284#42942284", "title": "Ruby Gems not found despite bundle install", "body": "<p>I was able to solve this problem by following the steps outlined here:\n<a href=\"https://stackoverflow.com/questions/33439130/bundle-uses-wrong-ruby-version\">bundle uses wrong ruby version</a></p>\n"}, {"tags": [], "owner": {"reputation": 36, "user_id": 6528438, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yLhBN.jpg?s=128&g=1", "display_name": "susheel", "link": "https://stackoverflow.com/users/6528438/susheel"}, "is_accepted": false, "score": 1, "last_activity_date": 1490168579, "creation_date": 1490168579, "answer_id": 42945519, "question_id": 42941537, "link": "https://stackoverflow.com/questions/42941537/ruby-gems-not-found-despite-bundle-install/42945519#42945519", "title": "Ruby Gems not found despite bundle install", "body": "<p>Go to the service/repository that you are trying to run, and go to bin/bundle file. open the file and you will find a code snippet like this :</p>\n\n<pre><code>ENV['BUNDLE_GEMFILE'] ||= File.expand_path('../../Gemfile', __FILE__)\nload Gem.bin_path('bundler', 'bundle')\n</code></pre>\n\n<p>Change the path to your gemfile as is mentioned here, after which in your service/repository you will find your gemfile. By checking its source provide the right directory path. After which include all your gems into the gem file, like this:</p>\n\n<pre><code>gem 'protobuf'\ngem 'grpc'\ngem 'protobuf-activerecord'\n</code></pre>\n\n<p>Finally use </p>\n\n<blockquote>\n  <p>bundle list</p>\n</blockquote>\n\n<p>to check if the bundler has all the gems initialised in it.</p>\n"}], "owner": {"reputation": 315, "user_id": 2880800, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/6b6cd92cd46ba9de46836eb1f61ee467?s=128&d=identicon&r=PG&f=1", "display_name": "Falk", "link": "https://stackoverflow.com/users/2880800/falk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4027, "favorite_count": 0, "answer_count": 2, "score": 2, "last_activity_date": 1490168579, "creation_date": 1490148979, "question_id": 42941537, "link": "https://stackoverflow.com/questions/42941537/ruby-gems-not-found-despite-bundle-install", "title": "Ruby Gems not found despite bundle install", "body": "<p>I have a Rails app. My collaborator updated the app's Ruby version and added Gems. I had to update my local version of Ruby to 2.3.1.</p>\n\n<p>Now it seems that rails s looks for gems in a different location than where bundle install puts them. What do I have to do to get both to put and look for gems in the same place?</p>\n\n<p>Concretely, when I try to start the Rails server with </p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>rails s</code></pre>\r\n</div>\r\n</div>\r\n</p>\n\n<p>I get the message </p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>/Users/Falk/.rbenv/versions/2.3.1/lib/ruby/2.3.0/rubygems/dependency.rb:319:in `to_specs': Could not find 'railties' (&gt;= 0) among 5 total gem(s) (Gem::LoadError)\r\nChecked in 'GEM_PATH=/Users/Falk/.gem/ruby/2.3.0:/Users/Falk/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0', execute `gem env` for more information\r\n\tfrom /Users/Falk/.rbenv/versions/2.3.1/lib/ruby/2.3.0/rubygems/dependency.rb:328:in `to_spec'\r\n\tfrom /Users/Falk/.rbenv/versions/2.3.1/lib/ruby/2.3.0/rubygems/core_ext/kernel_gem.rb:65:in `gem'\r\n\tfrom /usr/local/bin/rails:22:in `&lt;main&gt;'</code></pre>\r\n</div>\r\n</div>\r\n</p>\n\n<p>This happens even though I have already run </p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>bundle install</code></pre>\r\n</div>\r\n</div>\r\n</p>\n\n<p>and all the required gems are included in the gem file. I was able to make progress by manually uninstalling and reinstalling individual gems through</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>gem uninstall &lt;gem_name&gt;\r\ngem install &lt;gem_name&gt;</code></pre>\r\n</div>\r\n</div>\r\n</p>\n\n<p>but it kept on complaining about one missing gem after another. Then I uninstalled all gems using</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>for x in `gem list --no-versions`; do gem uninstall $x -a -x -I; done</code></pre>\r\n</div>\r\n</div>\r\n</p>\n\n<p>After that, bundle install still acts as if all gems were already installed. But rails s still does not work and complains about missing gems.  What should I do now?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "rspec", "dry"], "comments": [{"owner": {"reputation": 1036, "user_id": 5078051, "user_type": "registered", "accept_rate": 67, "profile_image": "https://graph.facebook.com/10203328378168774/picture?type=large", "display_name": "Hsiu Chuan Tsao", "link": "https://stackoverflow.com/users/5078051/hsiu-chuan-tsao"}, "edited": false, "score": 0, "creation_date": 1490157428, "post_id": 42941102, "comment_id": 72982095, "body": "It&#39;s a good question, but it looks difficult, I didn&#39;t research any solution, maybe you should create new solution to a ruby wrapper by yourself"}], "answers": [{"tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user1895144"}, "is_accepted": false, "score": 0, "last_activity_date": 1490162473, "creation_date": 1490162473, "answer_id": 42943855, "question_id": 42941102, "link": "https://stackoverflow.com/questions/42941102/how-to-share-rspec-examples-across-multiple-apps/42943855#42943855", "title": "How to share rspec examples across multiple apps?", "body": "<p>IMHO, I don't think RSpec supports that. But this could be approached like a problem of sharing code across projects. So if you already do that in your organisation, I'd stick to that solution, to be consistent. Otherwise, you could try:</p>\n\n<ol>\n<li>Creating a gem (e.g. <code>shared_specs</code>) with the specs. Require the spec files in the gem's <code>lib/shared_spec.rb</code> then, in each application's <code>Gemfile</code>, add <code>gem 'shared_specs', require: false</code> and <code>require 'shared_specs'</code> in <code>spec/shared_specs.rb</code>. However, you'd want to publish the gem on your <a href=\"https://github.com/geminabox/geminabox\" rel=\"nofollow noreferrer\">own gem server</a>.</li>\n<li>Use SCM (<a href=\"https://git-scm.com/docs/git-submodule\" rel=\"nofollow noreferrer\">git</a>, <a href=\"http://svnbook.red-bean.com/en/1.5/svn.advanced.externals.html\" rel=\"nofollow noreferrer\">svn</a>, <a href=\"https://www.mercurial-scm.org/wiki/Subrepository\" rel=\"nofollow noreferrer\">hg</a>) submodules to pull the specs from a separate repository into the main one's <code>spec</code> directory. This requires familiarity with the SCM and the process can <a href=\"https://www.mercurial-scm.org/wiki/FeaturesOfLastResort#But_I_need_to_have_managed_subprojects.21\" rel=\"nofollow noreferrer\">be</a> <a href=\"https://codingkilledthecat.wordpress.com/2012/04/28/why-your-company-shouldnt-use-git-submodules/\" rel=\"nofollow noreferrer\">cumbersome</a>.</li>\n<li>The solutions above reduce duplication, but create additional maintenance overhead - they require extra infrastructure and update in the specs means updating every application. Depending on the context (distributed teams with a different pace, applications with basically similar, but slightly different spec requirements, small number of apps, infrequent spec changes), a simple copy &amp; paste of the file with specs might work as well.</li>\n</ol>\n\n<p>(Each option makes certain assumptions, but, my SO points are too low to ask clarifying questions via comments).</p>\n"}, {"tags": [], "owner": {"reputation": 14400, "user_id": 2580302, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/db72295390541fa9df9cf434bd92937d?s=128&d=identicon&r=PG", "display_name": "zetacu", "link": "https://stackoverflow.com/users/2580302/zetacu"}, "is_accepted": false, "score": 1, "last_activity_date": 1490164964, "last_edit_date": 1490164964, "creation_date": 1490163878, "answer_id": 42944177, "question_id": 42941102, "link": "https://stackoverflow.com/questions/42941102/how-to-share-rspec-examples-across-multiple-apps/42944177#42944177", "title": "How to share rspec examples across multiple apps?", "body": "<p>You need to require the shared files using the <strong>full_path</strong> (you can set this path using an ENV variable):</p>\n\n<pre><code>require '/home/USERNAME/shared_examples/my_shared_specs.rb'\n</code></pre>\n\n<p>or</p>\n\n<pre><code>require ENV['SHARED_EXAMPLE_FILE_PATH']\n</code></pre>\n\n<p>Add that in your spec file and you should be able to call it.</p>\n\n<p>If you want to load more than one file, make sure to require all the files in your rspec <code>rails_helper.rb</code> (<code>spec_helper.rb</code> if you have an old version) also make sure you load them before the files that use them (<a href=\"https://www.relishapp.com/rspec/rspec-core/v/3-5/docs/example-groups/shared-examples\" rel=\"nofollow noreferrer\">documentation</a>).</p>\n\n<p><code>rails_helper.rb</code></p>\n\n<pre><code>...\nDir['/home/USERNAME/shared_examples/*.rb'].each { |file| require file }\n...\n</code></pre>\n\n<p>or</p>\n\n<pre><code>...\nDir[\"#{ ENV['SHARED_EXAMPLES_PATH'] }*.rb\"].each { |file| require file }\n...\n</code></pre>\n\n<p>Just make sure you replace the path I used to the one you have.</p>\n\n<p>Other one a bit more complex will be to create a gem with just the shared examples, and again in your <code>rails_helper.rb</code> require the files:</p>\n\n<pre><code>...\nDir[\"#{Bundler.load.specs.find{|s| s.name == &lt;gem_name&gt; }.full_gem_path}/shared_examples_path/*.rb\"].each { |file| require file }\n...\n</code></pre>\n\n<p>This could be a method in the gem.</p>\n"}], "owner": {"reputation": 1788, "user_id": 1625487, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/92a851513e2283733ad969efae735863?s=128&d=identicon&r=PG", "display_name": "Abs", "link": "https://stackoverflow.com/users/1625487/abs"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 291, "favorite_count": 2, "answer_count": 2, "score": 4, "last_activity_date": 1490164964, "creation_date": 1490145711, "question_id": 42941102, "link": "https://stackoverflow.com/questions/42941102/how-to-share-rspec-examples-across-multiple-apps", "title": "How to share rspec examples across multiple apps?", "body": "<p>I have a bunch of Rails applications that need to run the same rspec examples. These specs are about enforcing consistent conventions across the organization. I'm familiar with Rspec's shared_example, but AFAIK, they can only be shared within the same application. </p>\n\n<p>Is there a way to share rspec across multiple applications. If it helps, all the applications share a Rails engine.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "c9.io", "xmpp4r"], "answers": [{"tags": [], "owner": {"reputation": 424, "user_id": 6150184, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/26aa5396de57080c2084de1b8a5aeaa5?s=128&d=identicon&r=PG&f=1", "display_name": "DiodonHystrix", "link": "https://stackoverflow.com/users/6150184/diodonhystrix"}, "is_accepted": true, "score": 1, "last_activity_date": 1490208697, "creation_date": 1490208697, "answer_id": 42960317, "question_id": 42940912, "link": "https://stackoverflow.com/questions/42940912/on-message-and-on-private-message/42960317#42960317", "title": "on_message and on_private_message", "body": "<p>As I understand the purpose is to DRY your code. It might be worth creating a Proc object and sending it to both functions.</p>\n\n<pre><code>proc = Proc.new { |time, nick, text|\ncase text\n    when /regex/i\n        #Same Command on both on_message and on_private_message\n    end\n end  \n}\nconference.on_message(&amp;proc)\nconference.on_private_message(&amp;proc)\n</code></pre>\n\n<p>You could also try using #send method.</p>\n\n<pre><code>[:on_message, :on_private_message].each { |m| conference.send(m, &amp;proc) }\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 7748619, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/312627c2374de51fba7f2235b399c7d1?s=128&d=identicon&r=PG&f=1", "display_name": "User1999", "link": "https://stackoverflow.com/users/7748619/user1999"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 40, "favorite_count": 1, "accepted_answer_id": 42960317, "answer_count": 1, "score": 0, "last_activity_date": 1490208697, "creation_date": 1490144462, "last_edit_date": 1490145776, "question_id": 42940912, "link": "https://stackoverflow.com/questions/42940912/on-message-and-on-private-message", "title": "on_message and on_private_message", "body": "<p>I am currently using XMPP4R on <a href=\"https://c9.io\" rel=\"nofollow noreferrer\">Cloud9</a>.</p>\n\n<pre><code>conference.on_message {|time, nick, text|\n     case text\n        when /regex/i\n            #Same Command as on_private_message\n        end\n     end\n}\n\nconference.on_private_message {|time,nick, text|\n     case text\n        when /regex/i\n            #Same Command as on_message\n        end\n     end\n}\n</code></pre>\n\n<p><code>conference.on_message</code> is the conference's message from a chat, and <code>conference.on_private_message</code> is the conference's private message chat. </p>\n\n<p>I want to make both on_message and on_private_message to function as 1 instead of 2 shown above.</p>\n\n<p>I tried something like this (below), but it worked only <code>conference.on_private_message</code>. How can I make it possible?</p>\n\n<pre><code>(conference.on_message || conference.on_private_message) { |time, nick, text|\n    case text\n        when /regex/i\n            #Same Command on both on_message and on_private_message\n        end\n     end  \n}\n</code></pre>\n"}, {"tags": ["arrays", "ruby"], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 7745814, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ce55982392153db4638cfa061f289e58?s=128&d=identicon&r=PG&f=1", "display_name": "ichi_the_killer", "link": "https://stackoverflow.com/users/7745814/ichi-the-killer"}, "edited": false, "score": 0, "creation_date": 1490285792, "post_id": 42941101, "comment_id": 73055167, "body": "This seems to be the simplest answer thanks. I ended up using SYoung82&#39;s answer only because i already had a block with &quot;if&quot; statements and just added it on. Is that not smart? I&#39;m pretty new to ruby."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "reply_to_user": {"reputation": 1, "user_id": 7745814, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ce55982392153db4638cfa061f289e58?s=128&d=identicon&r=PG&f=1", "display_name": "ichi_the_killer", "link": "https://stackoverflow.com/users/7745814/ichi-the-killer"}, "edited": false, "score": 0, "creation_date": 1490292800, "post_id": 42941101, "comment_id": 73059710, "body": "I can&#39;t say if that&#39;s smart or not. Some Rubiests will make minimal changes to get their code working; others, if they think of a better way of doing something, will rip out all their old code. It may also depend on time pressures."}], "tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": false, "score": 2, "last_activity_date": 1490151166, "last_edit_date": 1490151166, "creation_date": 1490145691, "answer_id": 42941101, "question_id": 42940898, "link": "https://stackoverflow.com/questions/42940898/is-there-an-array-method-in-ruby-for-must-include-at-least-one-of-these-but-can/42941101#42941101", "title": "Is there an array method in Ruby for &quot;must include at least one of these but can&#39;t include anything else&quot;?", "body": "<p>I don't think there's a built-in method you could use. If <code>arr</code> is your array, you could do the following.</p>\n\n<pre><code>directions = ['n', 's', 'e', 'w']\n\narr.any? &amp;&amp; (arr-directions).empty?\n</code></pre>\n\n<p>Some examples:</p>\n\n<pre><code>arr = ['n', 's', 'n']\narr.any? &amp;&amp; (arr-directions).empty?\n  #=&gt; true\n\narr = ['n', 's', 'f']\narr.any? &amp;&amp; (arr-directions).empty?\n    #=&gt; false\n\narr = ['f', 'g']\narr.any? &amp;&amp; (arr-directions).empty?\n  #=&gt; false\n\narr = []\narr.any? &amp;&amp; (arr-directions).empty?\n  #=&gt; false\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 9030, "user_id": 5101476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JCQrl.jpg?s=128&g=1", "display_name": "ice\u30c4", "link": "https://stackoverflow.com/users/5101476/ice%e3%83%84"}, "reply_to_user": {"reputation": 1, "user_id": 7745814, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ce55982392153db4638cfa061f289e58?s=128&d=identicon&r=PG&f=1", "display_name": "ichi_the_killer", "link": "https://stackoverflow.com/users/7745814/ichi-the-killer"}, "edited": false, "score": 0, "creation_date": 1490303411, "post_id": 42941698, "comment_id": 73065687, "body": "@ichi_the_killer bear in mind that as it stands, this solution returns <code>true</code> for an empty array <code>[]</code>."}], "tags": [], "owner": {"reputation": 33, "user_id": 7259392, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b05b4f5f681c19e6c0d6670524ff8e96?s=128&d=identicon&r=PG&f=1", "display_name": "SYoung82", "link": "https://stackoverflow.com/users/7259392/syoung82"}, "is_accepted": false, "score": 0, "last_activity_date": 1587053929, "last_edit_date": 1587053929, "creation_date": 1490150157, "answer_id": 42941698, "question_id": 42940898, "link": "https://stackoverflow.com/questions/42940898/is-there-an-array-method-in-ruby-for-must-include-at-least-one-of-these-but-can/42941698#42941698", "title": "Is there an array method in Ruby for &quot;must include at least one of these but can&#39;t include anything else&quot;?", "body": "<p>There isn't any built-in function as far as I'm aware. You could do something like below or try the <a href=\"http://apidock.com/ruby/Array/include%3F\" rel=\"nofollow noreferrer\"><code>include?</code></a> method on your array.</p>\n\n<pre><code>array.each do |element|\n  if element != 'n' &amp;&amp; element != 's' &amp;&amp; element != 'e' &amp;&amp; element != 'w'\n    return false\n  end\nend\n\nreturn true\n</code></pre>\n\n<p>This should go through each element of the array and compare each element to 'n','s','e', and 'w'. If it finds something that doesn't match, it returns false. If it makes it all the way through without finding anything out of the ordinary, it returns true. You may want to check for an empty string at the beginning also.</p>\n"}, {"comments": [{"owner": {"reputation": 1, "user_id": 7745814, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ce55982392153db4638cfa061f289e58?s=128&d=identicon&r=PG&f=1", "display_name": "ichi_the_killer", "link": "https://stackoverflow.com/users/7745814/ichi-the-killer"}, "edited": false, "score": 0, "creation_date": 1490285992, "post_id": 42942388, "comment_id": 73055329, "body": "I&#39;ve never used grep or grep_v I&#39;ll have to remember them thanks"}], "tags": [], "owner": {"reputation": 9030, "user_id": 5101476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JCQrl.jpg?s=128&g=1", "display_name": "ice\u30c4", "link": "https://stackoverflow.com/users/5101476/ice%e3%83%84"}, "is_accepted": false, "score": 0, "last_activity_date": 1490155948, "last_edit_date": 1490155948, "creation_date": 1490154547, "answer_id": 42942388, "question_id": 42940898, "link": "https://stackoverflow.com/questions/42940898/is-there-an-array-method-in-ruby-for-must-include-at-least-one-of-these-but-can/42942388#42942388", "title": "Is there an array method in Ruby for &quot;must include at least one of these but can&#39;t include anything else&quot;?", "body": "<p>You can use <a href=\"http://ruby-doc.org/core-2.4.0/Enumerable.html#method-i-grep\" rel=\"nofollow noreferrer\">grep</a> and <a href=\"http://ruby-doc.org/core-2.4.0/Enumerable.html#method-i-grep_v\" rel=\"nofollow noreferrer\">grep_v</a> with regex:</p>\n\n<pre><code>def news? arr\n  r = /[news]/\n  !arr.grep(r).empty? &amp;&amp; arr.grep_v(r).empty?\nend\n</code></pre>\n\n<p>Using Cary's tests (albeit slightly modified):</p>\n\n<pre><code>news? ['n', 's', 'n'] #=&gt; true\nnews? ['n', 's', 'f'] #=&gt; false\nnews? ['f', 'g', 'h'] #=&gt; false\nnews? []              #=&gt; false\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 7745814, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ce55982392153db4638cfa061f289e58?s=128&d=identicon&r=PG&f=1", "display_name": "ichi_the_killer", "link": "https://stackoverflow.com/users/7745814/ichi-the-killer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 225, "favorite_count": 0, "answer_count": 3, "score": -2, "last_activity_date": 1587053929, "creation_date": 1490144395, "last_edit_date": 1587053631, "question_id": 42940898, "link": "https://stackoverflow.com/questions/42940898/is-there-an-array-method-in-ruby-for-must-include-at-least-one-of-these-but-can", "title": "Is there an array method in Ruby for &quot;must include at least one of these but can&#39;t include anything else&quot;?", "body": "<p>I'm doing an exercise where the input is an array. I need a way to return <code>false</code> if the array contains anything other than the strings 'n', 's', 'e' and 'w' or if the array does not contain any of the strings 'n', 's', 'e' and 'w'. Is there a pre-defined method for this?</p>\n\n<p>If not, how can this be done?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "heroku", "rubygems"], "answers": [{"comments": [{"owner": {"reputation": 321, "user_id": 7631261, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/34c3f5c01682697bbf4c010f477c47f1?s=128&d=identicon&r=PG&f=1", "display_name": "Owen", "link": "https://stackoverflow.com/users/7631261/owen"}, "edited": false, "score": 0, "creation_date": 1490142693, "post_id": 42940639, "comment_id": 72977991, "body": "yes you,re right. also second development should have been :production. thanks"}], "tags": [], "owner": {"reputation": 20407, "user_id": 1017941, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/yocPw.jpg?s=128&g=1", "display_name": "Hauleth", "link": "https://stackoverflow.com/users/1017941/hauleth"}, "is_accepted": false, "score": 1, "last_activity_date": 1490142500, "creation_date": 1490142500, "answer_id": 42940639, "question_id": 42940610, "link": "https://stackoverflow.com/questions/42940610/how-do-i-solve-my-gemfile-error/42940639#42940639", "title": "how do i solve my gemfile error?", "body": "<p>You have forgot <code>:</code> (colon) in front of your group name. Instead you are trying to fetch value of variable/call function named <code>development</code>.</p>\n\n<p>So your <code>Gemfile</code> should look like this:</p>\n\n<pre><code>group :development do\n  gem 'sqlite3'\nend\n\ngroup :development do\n  gem 'pg'\n  gem 'rails_12factor'\nend\n</code></pre>\n"}], "owner": {"reputation": 321, "user_id": 7631261, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/34c3f5c01682697bbf4c010f477c47f1?s=128&d=identicon&r=PG&f=1", "display_name": "Owen", "link": "https://stackoverflow.com/users/7631261/owen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 538, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1490142515, "creation_date": 1490142349, "last_edit_date": 1490142515, "question_id": 42940610, "link": "https://stackoverflow.com/questions/42940610/how-do-i-solve-my-gemfile-error", "title": "how do i solve my gemfile error?", "body": "<p>I am updating my gemfile in order to deploy an app on heroku. this is the gemfile:</p>\n\n<pre><code>group development do\n  gem 'sqlite3'\nend\n\ngroup development do\n  gem 'pg'\n  gem 'rails_12factor'\nend\n</code></pre>\n\n<p>and this is the error:</p>\n\n<p>There was an error parsing <code>Gemfile</code>: Undefined local variable or method `development' for Gemfile. Bundler cannot continue.</p>\n\n<p>how can I solve this?</p>\n"}, {"tags": ["ruby", "multithreading", "sockets", "tcp"], "comments": [{"owner": {"reputation": 38170, "user_id": 57135, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/S9roh.jpg?s=128&g=1", "display_name": "Joe", "link": "https://stackoverflow.com/users/57135/joe"}, "edited": false, "score": 0, "creation_date": 1490142151, "post_id": 42940565, "comment_id": 72977866, "body": "What do you expect your <code>mutex</code> to do in this code?  Is this your code, and what did you try?"}, {"owner": {"reputation": 53, "user_id": 2941215, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/MUQVa.jpg?s=128&g=1", "display_name": "Hampkade", "link": "https://stackoverflow.com/users/2941215/hampkade"}, "reply_to_user": {"reputation": 38170, "user_id": 57135, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/S9roh.jpg?s=128&g=1", "display_name": "Joe", "link": "https://stackoverflow.com/users/57135/joe"}, "edited": false, "score": 0, "creation_date": 1490142222, "post_id": 42940565, "comment_id": 72977890, "body": "Mutex holds the Thread until I enter a command, then it lets the thread continue, problem is that only one of the client threads actually continue."}, {"owner": {"reputation": 38170, "user_id": 57135, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/S9roh.jpg?s=128&g=1", "display_name": "Joe", "link": "https://stackoverflow.com/users/57135/joe"}, "edited": false, "score": 0, "creation_date": 1490143072, "post_id": 42940565, "comment_id": 72978106, "body": "<code>ConditionVariable.wait</code> does not do that -- when you call <code>.signal</code> it wakes up just one thread; the idea of <code>ConditionVariable</code> is to protect a resource that can only be accessed exclusively."}, {"owner": {"reputation": 53, "user_id": 2941215, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/MUQVa.jpg?s=128&g=1", "display_name": "Hampkade", "link": "https://stackoverflow.com/users/2941215/hampkade"}, "reply_to_user": {"reputation": 38170, "user_id": 57135, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/S9roh.jpg?s=128&g=1", "display_name": "Joe", "link": "https://stackoverflow.com/users/57135/joe"}, "edited": false, "score": 0, "creation_date": 1490143395, "post_id": 42940565, "comment_id": 72978226, "body": "What other variable could I use in the place of the condition variable to run all threads? Or is this not a possibility with Ruby"}, {"owner": {"reputation": 38170, "user_id": 57135, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/S9roh.jpg?s=128&g=1", "display_name": "Joe", "link": "https://stackoverflow.com/users/57135/joe"}, "edited": false, "score": 0, "creation_date": 1490144349, "post_id": 42940565, "comment_id": 72978473, "body": "Ok, I was half right and half wrong.  <code>.signal</code> only wakes up one thread on a conditionVariable.  But look at <code>.broadcast</code> on ConditionVariable, which I think does what you want."}], "answers": [{"tags": [], "owner": {"reputation": 38170, "user_id": 57135, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/S9roh.jpg?s=128&g=1", "display_name": "Joe", "link": "https://stackoverflow.com/users/57135/joe"}, "is_accepted": true, "score": 1, "last_activity_date": 1490144628, "creation_date": 1490144628, "answer_id": 42940930, "question_id": 42940565, "link": "https://stackoverflow.com/questions/42940565/ruby-multithreading-tcp-messages/42940930#42940930", "title": "Ruby - MultiThreading TCP Messages", "body": "<p>Using <code>.signal</code> on ConditionVariable only wakes up one thread, but <code>.broadcast</code> will go and wake up all that are waiting to be signaled.</p>\n"}], "owner": {"reputation": 53, "user_id": 2941215, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/MUQVa.jpg?s=128&g=1", "display_name": "Hampkade", "link": "https://stackoverflow.com/users/2941215/hampkade"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 505, "favorite_count": 0, "accepted_answer_id": 42940930, "answer_count": 1, "score": 1, "last_activity_date": 1490144628, "creation_date": 1490142027, "last_edit_date": 1490142396, "question_id": 42940565, "link": "https://stackoverflow.com/questions/42940565/ruby-multithreading-tcp-messages", "title": "Ruby - MultiThreading TCP Messages", "body": "<p>I am having an issue with a ruby server I am writing.</p>\n\n<p>The server functions fine until you have more than one client attached, then it sends out the messages in a round-robin like way, when I want all clients to get the message at the same time.</p>\n\n<p>The server is supposed to grab any clients that connects, but then wait till I issue a command. The problem is only one client is getting the command, when I enter a command again another client gets it and so on</p>\n\n<p><strong>SERVER</strong></p>\n\n<pre><code>require 'socket'\nmutex = Mutex.new\ncv = ConditionVariable.new\nserver = TCPServer.open(2000)\n@Comm=\"test\"\nThread.new{\nloop {  \n    Thread.start(server.accept) do |client|\n        client.puts(\"Client accepted\")\n        mutex.synchronize {\n        cv.wait(mutex)\n        client.puts(\"#@Comm\")\n        client.close\n        }\n    end\n    }\n}\n\nloop {\nsystem \"clear\" or system \"cls\"\nprint(\"Enter Command\\n\")\n@Comm = gets()\nmutex.synchronize {\ncv.signal\n   }\n}\n</code></pre>\n\n<p><strong>CLIENT</strong></p>\n\n<pre><code>require 'socket'      # Sockets are in standard library\n\nhostname = 'localhost'\nport = 2000\n\nloop {\nbegin\ns = TCPSocket.open(hostname, port)\nsystem \"clear\" or system \"cls\"\nwhile line = s.gets   # Read lines from the socket\n  puts line.chop      # And print with platform line terminator\nend\ns.close\nrescue\nnext\nend\nsleep(0.5)\n}\n</code></pre>\n"}, {"tags": ["ruby", "amazon-web-services", "ruby-on-rails-4", "amazon-s3", "carrierwave"], "comments": [{"owner": {"reputation": 1776, "user_id": 786709, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/f952e6f74eb714c052e4b4bb322225b7?s=128&d=identicon&r=PG", "display_name": "damienbrz", "link": "https://stackoverflow.com/users/786709/damienbrz"}, "edited": false, "score": 0, "creation_date": 1502070262, "post_id": 42939179, "comment_id": 78036710, "body": "Having the same issue. Have you found a solution?"}], "owner": {"reputation": 808, "user_id": 1464479, "user_type": "registered", "accept_rate": 14, "profile_image": "https://i.stack.imgur.com/EguZg.jpg?s=128&g=1", "display_name": "Parthiv", "link": "https://stackoverflow.com/users/1464479/parthiv"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 390, "favorite_count": 0, "answer_count": 0, "score": 3, "last_activity_date": 1490134599, "creation_date": 1490134599, "question_id": 42939179, "link": "https://stackoverflow.com/questions/42939179/amazon-s3-server-responded-with-0-code", "title": "Amazon S3 - Server responded with 0 code", "body": "<p>I am trying to upload multiple files (50 files - 9.4 MB size for each file) at a time (using dropzone) on the amazon s3 bucket. After few minutes, getting error \"Server responded with 0 code\". See below screenshot.<a href=\"https://i.stack.imgur.com/N7mjE.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/N7mjE.png\" alt=\"enter image description here\"></a> My ruby version is 2.2.2, rails 4.2 and carrier wave gem, servers are Nginx and Unicorn. </p>\n\n<p>When I select 50 files (9.4 MB for each file) after few minutes some files are uploaded successfully but some files not uploading and getting this error.</p>\n\n<p>So, what is the reason behind this? what is the solution to fix this issue? Are there any plans which I need to upgrade for upload the big size files S3 bucket? because I need to upload 500 Mb to 1 GB files - 100 files at a time.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "heroku"], "comments": [{"owner": {"reputation": 856, "user_id": 6018313, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/krXMH.jpg?s=128&g=1", "display_name": "Kevin Etore", "link": "https://stackoverflow.com/users/6018313/kevin-etore"}, "edited": false, "score": 0, "creation_date": 1490134385, "post_id": 42938985, "comment_id": 72975207, "body": "I think you don&#39;t have <code>gem &#39;pg&#39;</code> in your Gemfile. Check out <a href=\"https://devcenter.heroku.com/articles/getting-started-with-rails4#heroku-gems\" rel=\"nofollow noreferrer\">devcenter.heroku.com/articles/&hellip;</a>"}, {"owner": {"reputation": 19, "user_id": 4551805, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/daf8cc989d5132eac4796029ee0eb7aa?s=128&d=identicon&r=PG&f=1", "display_name": "Jen V.", "link": "https://stackoverflow.com/users/4551805/jen-v"}, "reply_to_user": {"reputation": 856, "user_id": 6018313, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/krXMH.jpg?s=128&g=1", "display_name": "Kevin Etore", "link": "https://stackoverflow.com/users/6018313/kevin-etore"}, "edited": false, "score": 0, "creation_date": 1490135637, "post_id": 42938985, "comment_id": 72975756, "body": "@KevinEtore yes i have it. ` group :development, :test do   gem &#39;sqlite3&#39; end group :production do   gem &#39;pg&#39;, &#39;0.15.1&#39;   gem &#39;rails_12factor&#39; end `"}, {"owner": {"reputation": 19, "user_id": 4551805, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/daf8cc989d5132eac4796029ee0eb7aa?s=128&d=identicon&r=PG&f=1", "display_name": "Jen V.", "link": "https://stackoverflow.com/users/4551805/jen-v"}, "reply_to_user": {"reputation": 856, "user_id": 6018313, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/krXMH.jpg?s=128&g=1", "display_name": "Kevin Etore", "link": "https://stackoverflow.com/users/6018313/kevin-etore"}, "edited": false, "score": 0, "creation_date": 1490137445, "post_id": 42938985, "comment_id": 72976438, "body": "I managed to fix the problem now. Thanks for your suggestion :)"}], "answers": [{"tags": [], "owner": {"reputation": 69, "user_id": 6372236, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/261fdb5de921c0cfbdfe475c6b436501?s=128&d=identicon&r=PG&f=1", "display_name": "Sit", "link": "https://stackoverflow.com/users/6372236/sit"}, "is_accepted": false, "score": 0, "last_activity_date": 1490134679, "last_edit_date": 1495539978, "creation_date": 1490134679, "answer_id": 42939197, "question_id": 42938985, "link": "https://stackoverflow.com/questions/42938985/error-deploying-rails-app-to-heroku/42939197#42939197", "title": "Error deploying Rails app to heroku", "body": "<p>Try to restart dynos. </p>\n\n<p><code>heroku ps:restart</code></p>\n\n<p>or try simply <code>heroku restart</code></p>\n\n<p>Description: <a href=\"https://devcenter.heroku.com/articles/error-codes\" rel=\"nofollow noreferrer\">Devcenter Heroku</a></p>\n\n<p>This also can by helpful\n<a href=\"https://stackoverflow.com/questions/13496827/heroku-deployment-error-h10-app-crashed\">Heroku deployment error H10 (App crashed)</a></p>\n"}, {"tags": [], "owner": {"reputation": 1853, "user_id": 2501082, "user_type": "registered", "accept_rate": 20, "profile_image": "https://i.stack.imgur.com/qdJBQ.jpg?s=128&g=1", "display_name": "David Gross", "link": "https://stackoverflow.com/users/2501082/david-gross"}, "is_accepted": false, "score": 0, "last_activity_date": 1490159893, "creation_date": 1490159893, "answer_id": 42943315, "question_id": 42938985, "link": "https://stackoverflow.com/questions/42938985/error-deploying-rails-app-to-heroku/42943315#42943315", "title": "Error deploying Rails app to heroku", "body": "<p>You need to update your logs in the question so they are a bit more readable. You need to add pg to your Gemfile as you are using Postgresql. </p>\n\n<pre><code>The gem is not loaded. Add `gem 'pg'` to your Gemfile (and ensure its version is at the minimum required by ActiveRecord).(Gem::LoadError)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1329, "user_id": 4341902, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/GA0Ju.jpg?s=128&g=1", "display_name": "Billy Ferguson", "link": "https://stackoverflow.com/users/4341902/billy-ferguson"}, "is_accepted": false, "score": 1, "last_activity_date": 1490211511, "creation_date": 1490211511, "answer_id": 42961162, "question_id": 42938985, "link": "https://stackoverflow.com/questions/42938985/error-deploying-rails-app-to-heroku/42961162#42961162", "title": "Error deploying Rails app to heroku", "body": "<p>You must not have pg in your Gemfile which makes me think that you might be missing deployment specific stuff from your gemfile. Find the <code>sqlite3</code> or equivalent development database gem and restructure it like this in your gemfile, which is typically how its done. Heroku automagically looks for that :production environment and loads the applicable configs for that.</p>\n\n<pre><code>group :development do\n  # Access an IRB console on exception pages or by using &lt;%= console %&gt; anywhere in the code.\n  gem 'web-console', '&gt;= 3.3.0'\n  gem 'sqlite3'\nend\n\ngroup :production do\n  gem 'pg'\n  gem 'rails_12factor'\n  gem 'letsencrypt-rails-heroku'\nend\n</code></pre>\n\n<p>You also sometimes get that error when you forget to migrate the database when your schema changes. You can do that with <code>heroku run rake db:migrate</code>.</p>\n"}], "owner": {"reputation": 19, "user_id": 4551805, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/daf8cc989d5132eac4796029ee0eb7aa?s=128&d=identicon&r=PG&f=1", "display_name": "Jen V.", "link": "https://stackoverflow.com/users/4551805/jen-v"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 177, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1490211511, "creation_date": 1490133834, "last_edit_date": 1490134205, "question_id": 42938985, "link": "https://stackoverflow.com/questions/42938985/error-deploying-rails-app-to-heroku", "title": "Error deploying Rails app to heroku", "body": "<p>I get the following error when trying to access my app on heroku. The app was deployed successfully but I could not access it. When I tried to access the app, the page said \"Application error\nAn error occurred in the application and your page could not be served. If you are the application owner, check your logs for details.\" Here is the heroku logs:</p>\n\n<pre><code> heroku logs\n2017-03-21T20:28:21.577989+00:00 app[web.1]:    from /app/config.ru:in `&lt;main&gt;'\n2017-03-21T20:28:21.578004+00:00 app[web.1]:    from /app/vendor/bundle/ruby/2.2                                                                                                                .0/gems/rack-2.0.1/lib/rack/builder.rb:49:in `eval'\n2017-03-21T20:28:21.578005+00:00 app[web.1]:    from /app/vendor/bundle/ruby/2.2                                                                                                                .0/gems/rack-2.0.1/lib/rack/builder.rb:49:in `new_from_string'\n2017-03-21T20:28:21.578007+00:00 app[web.1]:    from /app/vendor/bundle/ruby/2.2                                                                                                                .0/gems/rack-2.0.1/lib/rack/builder.rb:40:in `parse_file'\n2017-03-21T20:28:21.578008+00:00 app[web.1]:    from /app/vendor/bundle/ruby/2.2                                                                                                                .0/gems/rack-2.0.1/lib/rack/server.rb:318:in `build_app_and_options_from_config'\n2017-03-21T20:28:21.578010+00:00 app[web.1]:    from /app/vendor/bundle/ruby/2.2                                                                                                                .0/gems/rack-2.0.1/lib/rack/server.rb:218:in `app'\n2017-03-21T20:28:21.749663+00:00 heroku[web.1]: Process exited with status 1\n2017-03-21T20:28:21.578012+00:00 app[web.1]:    from /app/vendor/bundle/ruby/2.2                                                                                                                .0/gems/railties-5.0.2/lib/rails/commands/server.rb:59:in `app'\n2017-03-21T20:28:21.578026+00:00 app[web.1]:    from /app/vendor/bundle/ruby/2.2                                                                                                                .0/gems/rack-2.0.1/lib/rack/server.rb:353:in `wrapped_app'\n2017-03-21T20:28:21.578029+00:00 app[web.1]:    from /app/vendor/bundle/ruby/2.2                                                                                                                .0/gems/rack-2.0.1/lib/rack/server.rb:282:in `start'\n2017-03-21T20:28:21.578030+00:00 app[web.1]:    from /app/vendor/bundle/ruby/2.2                                                                                                                .0/gems/railties-5.0.2/lib/rails/commands/server.rb:79:in `start'\n2017-03-21T20:28:21.578032+00:00 app[web.1]:    from /app/vendor/bundle/ruby/2.2                                                                                                                .0/gems/railties-5.0.2/lib/rails/commands/commands_tasks.rb:90:in `block in serv                                                                                                                er'\n2017-03-21T20:28:21.578033+00:00 app[web.1]:    from /app/vendor/bundle/ruby/2.2                                                                                                                .0/gems/railties-5.0.2/lib/rails/commands/commands_tasks.rb:85:in `tap'\n2017-03-21T20:28:21.578035+00:00 app[web.1]:    from /app/vendor/bundle/ruby/2.2                                                                                                                .0/gems/railties-5.0.2/lib/rails/commands/commands_tasks.rb:85:in `server'\n2017-03-21T20:28:21.578037+00:00 app[web.1]:    from /app/vendor/bundle/ruby/2.2                                                                                                                .0/gems/railties-5.0.2/lib/rails/commands/commands_tasks.rb:49:in `run_command!'\n2017-03-21T20:28:21.578052+00:00 app[web.1]:    from /app/vendor/bundle/ruby/2.2                                                                                                                .0/gems/railties-5.0.2/lib/rails/commands.rb:18:in `&lt;top (required)&gt;'\n2017-03-21T20:28:21.578078+00:00 app[web.1]:    from bin/rails:4:in `require'\n2017-03-21T20:28:21.578079+00:00 app[web.1]:    from bin/rails:4:in `&lt;main&gt;'\n2017-03-21T20:28:21.768673+00:00 heroku[web.1]: State changed from starting to c                                                                                                                rashed\n2017-03-21T20:28:23.139347+00:00 heroku[router]: at=error code=H10 desc=\"App cra                                                                                                                shed\" method=GET path=\"/recipes\" host=weather-consult.herokuapp.com request_id=9                                                                                                                801a23f-72b9-4477-8e90-93fba979e78f fwd=\"83.138.193.223\" dyno= connect= service=                                                                                                                 status=503 bytes= protocol=https\n2017-03-21T20:28:23.718785+00:00 heroku[router]: at=error code=H10 desc=\"App cra                                                                                                                shed\" method=GET path=\"/favicon.ico\" host=weather-consult.herokuapp.com request_                                                                                                                id=100c960d-b3a1-4374-ae56-52e60b785710 fwd=\"83.138.193.223\" dyno= connect= serv                                                                                                                ice= status=503 bytes= protocol=https\n2017-03-21T20:28:40.702732+00:00 heroku[web.1]: State changed from crashed to st                                                                                                                arting\n2017-03-21T20:28:43.480189+00:00 heroku[web.1]: Starting process with command `b                                                                                                                in/rails server -p 41364 -e production`\n2017-03-21T20:28:48.023383+00:00 app[web.1]: =&gt; Rails 5.0.2 application starting                                                                                                                 in production on http://0.0.0.0:41364\n2017-03-21T20:28:48.023384+00:00 app[web.1]: =&gt; Run `rails server -h` for more s                                                                                                                tartup options\n2017-03-21T20:28:48.023369+00:00 app[web.1]: =&gt; Booting Puma\n2017-03-21T20:28:48.023384+00:00 app[web.1]: Exiting\n2017-03-21T20:28:48.023457+00:00 app[web.1]: /app/vendor/bundle/ruby/2.2.0/gems/                                                                                                                activerecord-5.0.2/lib/active_record/connection_adapters/connection_specificatio                                                                                                                n.rb:176:in `rescue in spec': Specified 'postgresql' for database adapter, but t                                                                                                                he gem is not loaded. Add `gem 'pg'` to your Gemfile (and ensure its version is                                                                                                                 at the minimum required by ActiveRecord). (Gem::LoadError)\n2017-03-21T20:28:48.023485+00:00 app[web.1]:    from /app/vendor/bundle/ruby/2.2                                                                                                                .0/gems/activerecord-5.0.2/lib/active_record/connection_adapters/connection_spec                                                                                                                ification.rb:173:in `spec'\n2017-03-21T20:28:48.023486+00:00 app[web.1]:    from /app/vendor/bundle/ruby/2.2                                                                                                                .0/gems/activerecord-5.0.2/lib/active_record/connection_handling.rb:53:in `estab                                                                                                                lish_connection'\n2017-03-21T20:28:48.023487+00:00 app[web.1]:    from /app/vendor/bundle/ruby/2.2                                                                                                                .0/gems/activerecord-5.0.2/lib/active_record/railtie.rb:125:in `block (2 levels)                                                                                                                 in &lt;class:Railtie&gt;'\n2017-03-21T20:28:48.023531+00:00 app[web.1]:    from /app/vendor/bundle/ruby/2.2                                                                                                                .0/gems/activesupport-5.0.2/lib/active_support/lazy_load_hooks.rb:49:in `each'\n2017-03-21T20:28:48.023532+00:00 app[web.1]:    from /app/vendor/bundle/ruby/2.2                                                                                                                .0/gems/activesupport-5.0.2/lib/active_support/lazy_load_hooks.rb:49:in `run_loa                                                                                                                d_hooks'\n2017-03-21T20:28:48.023526+00:00 app[web.1]:    from /app/vendor/bundle/ruby/2.2                                                                                                                .0/gems/activesupport-5.0.2/lib/active_support/lazy_load_hooks.rb:43:in `instanc                                                                                                                e_eval'\n2017-03-21T20:28:48.023527+00:00 app[web.1]:    from /app/vendor/bundle/ruby/2.2                                                                                                                .0/gems/activesupport-5.0.2/lib/active_support/lazy_load_hooks.rb:43:in `execute                                                                                                                _hook'\n2017-03-21T20:28:48.023534+00:00 app[web.1]:    from /app/vendor/bundle/ruby/2.2                                                                                                                .0/gems/activerecord-5.0.2/lib/active_record/base.rb:324:in `&lt;module:ActiveRecor                                                                                                                d&gt;'\n2017-03-21T20:28:48.023528+00:00 app[web.1]:    from /app/vendor/bundle/ruby/2.2                                                                                                                .0/gems/activesupport-5.0.2/lib/active_support/lazy_load_hooks.rb:50:in `block i                                                                                                                n run_load_hooks'\n2017-03-21T20:28:48.023535+00:00 app[web.1]:    from /app/vendor/bundle/ruby/2.2                                                                                                                .0/gems/activerecord-5.0.2/lib/active_record/base.rb:24:in `&lt;top (required)&gt;'\n2017-03-21T20:28:48.023537+00:00 app[web.1]:    from /app/app/models/application                                                                                                                _record.rb:1:in `&lt;top (required)&gt;'\n2017-03-21T20:28:48.023539+00:00 app[web.1]:    from /app/vendor/bundle/ruby/2.2                                                                                                                .0/gems/activesupport-5.0.2/lib/active_support/dependencies.rb:293:in `require'\n2017-03-21T20:28:48.023569+00:00 app[web.1]:    from /app/vendor/bundle/ruby/2.2                                                                                                                .0/gems/activesupport-5.0.2/lib/active_support/dependencies.rb:37:in `block in l                                                                                                                oad_interlock'\n2017-03-21T20:28:48.023564+00:00 app[web.1]:    from /app/vendor/bundle/ruby/2.2                                                                                                                .0/gems/activesupport-5.0.2/lib/active_support/dependencies.rb:293:in `block in                                                                                                                 require'\n2017-03-21T20:28:48.023590+00:00 app[web.1]:    from /app/vendor/bundle/ruby/2.2                                                                                                                .0/gems/activesupport-5.0.2/lib/active_support/dependencies/interlock.rb:12:in `                                                                                                                block in loading'\n2017-03-21T20:28:48.023565+00:00 app[web.1]:    from /app/vendor/bundle/ruby/2.2                                                                                                                .0/gems/activesupport-5.0.2/lib/active_support/dependencies.rb:259:in `load_depe                                                                                                                ndency'\n2017-03-21T20:28:48.023590+00:00 app[web.1]:    from /app/vendor/bundle/ruby/2.2                                                                                                                .0/gems/activesupport-5.0.2/lib/active_support/concurrency/share_lock.rb:150:in                                                                                                                 `exclusive'\n2017-03-21T20:28:48.023566+00:00 app[web.1]:    from /app/vendor/bundle/ruby/2.2                                                                                                                .0/gems/activesupport-5.0.2/lib/active_support/dependencies.rb:293:in `require'\n2017-03-21T20:28:48.023568+00:00 app[web.1]:    from /app/vendor/bundle/ruby/2.2                                                                                                                .0/gems/activesupport-5.0.2/lib/active_support/dependencies.rb:380:in `block in                                                                                                                 require_or_load'\n2017-03-21T20:28:48.023591+00:00 app[web.1]:    from /app/vendor/bundle/ruby/2.2                                                                                                                .0/gems/activesupport-5.0.2/lib/active_support/dependencies/interlock.rb:11:in `                                                                                                                loading'\n2017-03-21T20:28:48.023592+00:00 app[web.1]:    from /app/vendor/bundle/ruby/2.2                                                                                                                .0/gems/activesupport-5.0.2/lib/active_support/dependencies.rb:37:in `load_inter                                                                                                                lock'\n2017-03-21T20:28:48.023593+00:00 app[web.1]:    from /app/vendor/bundle/ruby/2.2                                                                                                                .0/gems/activesupport-5.0.2/lib/active_support/dependencies.rb:358:in `require_o                                                                                                                r_load'\n2017-03-21T20:28:48.023599+00:00 app[web.1]:    from /app/vendor/bundle/ruby/2.2                                                                                                                .0/gems/railties-5.0.2/lib/rails/engine.rb:473:in `each'\n2017-03-21T20:28:48.023598+00:00 app[web.1]:    from /app/vendor/bundle/ruby/2.2                                                                                                                .0/gems/railties-5.0.2/lib/rails/engine.rb:475:in `block in eager_load!'\n2017-03-21T20:28:48.023600+00:00 app[web.1]:    from /app/vendor/bundle/ruby/2.2                                                                                                                .0/gems/railties-5.0.2/lib/rails/engine.rb:473:in `eager_load!'\n2017-03-21T20:28:48.023594+00:00 app[web.1]:    from /app/vendor/bundle/ruby/2.2                                                                                                                .0/gems/activesupport-5.0.2/lib/active_support/dependencies.rb:336:in `depend_on                                                                                                                '\n2017-03-21T20:28:48.023594+00:00 app[web.1]:    from /app/vendor/bundle/ruby/2.2                                                                                                                .0/gems/activesupport-5.0.2/lib/active_support/dependencies.rb:252:in `require_d                                                                                                                ependency'\n2017-03-21T20:28:48.023597+00:00 app[web.1]:    from /app/vendor/bundle/ruby/2.2                                                                                                                .0/gems/railties-5.0.2/lib/rails/engine.rb:475:in `each'\n2017-03-21T20:28:48.023595+00:00 app[web.1]:    from /app/vendor/bundle/ruby/2.2                                                                                                                .0/gems/railties-5.0.2/lib/rails/engine.rb:476:in `block (2 levels) in eager_loa                                                                                                                d!'\n2017-03-21T20:28:48.023602+00:00 app[web.1]:    from /app/vendor/bundle/ruby/2.2                                                                                                                .0/gems/railties-5.0.2/lib/rails/engine.rb:354:in `eager_load!'\n2017-03-21T20:28:48.023603+00:00 app[web.1]:    from /app/vendor/bundle/ruby/2.2                                                                                                                .0/gems/railties-5.0.2/lib/rails/application/finisher.rb:59:in `each'\n2017-03-21T20:28:48.023605+00:00 app[web.1]:    from /app/vendor/bundle/ruby/2.2                                                                                                                .0/gems/railties-5.0.2/lib/rails/application/finisher.rb:59:in `block in &lt;module                                                                                                                :Finisher&gt;'\n2017-03-21T20:28:48.023606+00:00 app[web.1]:    from /app/vendor/bundle/ruby/2.2                                                                                                                .0/gems/railties-5.0.2/lib/rails/initializable.rb:30:in `instance_exec'\n2017-03-21T20:28:48.023626+00:00 app[web.1]:    from /app/vendor/ruby-2.2.6/lib/                                                                                                                ruby/2.2.0/tsort.rb:348:in `block (2 levels) in each_strongly_connected_componen                                                                                                                t'\n2017-03-21T20:28:48.023608+00:00 app[web.1]:    from /app/vendor/bundle/ruby/2.2                                                                                                                .0/gems/railties-5.0.2/lib/rails/initializable.rb:30:in `run'\n2017-03-21T20:28:48.023628+00:00 app[web.1]:    from /app/vendor/ruby-2.2.6/lib/                                                                                                                ruby/2.2.0/tsort.rb:429:in `each_strongly_connected_component_from'\n2017-03-21T20:28:48.023639+00:00 app[web.1]:    from /app/vendor/ruby-2.2.6/lib/                                                                                                                ruby/2.2.0/tsort.rb:347:in `block in each_strongly_connected_component'\n2017-03-21T20:28:48.023610+00:00 app[web.1]:    from /app/vendor/bundle/ruby/2.2                                                                                                                .0/gems/railties-5.0.2/lib/rails/initializable.rb:55:in `block in run_initialize                                                                                                                rs'\n2017-03-21T20:28:48.023612+00:00 app[web.1]:    from /app/vendor/ruby-2.2.6/lib/                                                                                                                ruby/2.2.0/tsort.rb:226:in `block in tsort_each'\n2017-03-21T20:28:48.023641+00:00 app[web.1]:    from /app/vendor/ruby-2.2.6/lib/                                                                                                                ruby/2.2.0/tsort.rb:345:in `each'\n2017-03-21T20:28:48.023643+00:00 app[web.1]:    from /app/vendor/ruby-2.2.6/lib/                                                                                                                ruby/2.2.0/tsort.rb:345:in `call'\n2017-03-21T20:28:48.023649+00:00 app[web.1]:    from /app/vendor/ruby-2.2.6/lib/                                                                                                                ruby/2.2.0/tsort.rb:345:in `each_strongly_connected_component'\n2017-03-21T20:28:48.023663+00:00 app[web.1]:    from /app/config/environment.rb:                                                                                                                5:in `&lt;top (required)&gt;'\n2017-03-21T20:28:48.023651+00:00 app[web.1]:    from /app/vendor/ruby-2.2.6/lib/                                                                                                                ruby/2.2.0/tsort.rb:224:in `tsort_each'\n2017-03-21T20:28:48.023653+00:00 app[web.1]:    from /app/vendor/ruby-2.2.6/lib/                                                                                                                ruby/2.2.0/tsort.rb:203:in `tsort_each'\n2017-03-21T20:28:48.023665+00:00 app[web.1]:    from /app/config.ru:3:in `requir                                                                                                                e_relative'\n2017-03-21T20:28:48.023655+00:00 app[web.1]:    from /app/vendor/bundle/ruby/2.2                                                                                                                .0/gems/railties-5.0.2/lib/rails/initializable.rb:54:in `run_initializers'\n2017-03-21T20:28:48.023671+00:00 app[web.1]:    from /app/config.ru:3:in `block                                                                                                                 in &lt;main&gt;'\n2017-03-21T20:28:48.023661+00:00 app[web.1]:    from /app/vendor/bundle/ruby/2.2                                                                                                                .0/gems/railties-5.0.2/lib/rails/application.rb:352:in `initialize!'\n2017-03-21T20:28:48.023673+00:00 app[web.1]:    from /app/vendor/bundle/ruby/2.2                                                                                                                .0/gems/rack-2.0.1/lib/rack/builder.rb:55:in `instance_eval'\n2017-03-21T20:28:48.023675+00:00 app[web.1]:    from /app/vendor/bundle/ruby/2.2                                                                                                                .0/gems/rack-2.0.1/lib/rack/builder.rb:55:in `initialize'\n2017-03-21T20:28:48.023678+00:00 app[web.1]:    from /app/config.ru:in `new'\n2017-03-21T20:28:48.023683+00:00 app[web.1]:    from /app/config.ru:in `&lt;main&gt;'\n2017-03-21T20:28:48.023696+00:00 app[web.1]:    from /app/vendor/bundle/ruby/2.2                                                                                                                .0/gems/rack-2.0.1/lib/rack/server.rb:318:in `build_app_and_options_from_config'\n2017-03-21T20:28:48.023697+00:00 app[web.1]:    from /app/vendor/bundle/ruby/2.2                                                                                                                .0/gems/rack-2.0.1/lib/rack/server.rb:218:in `app'\n2017-03-21T20:28:48.023685+00:00 app[web.1]:    from /app/vendor/bundle/ruby/2.2                                                                                                                .0/gems/rack-2.0.1/lib/rack/builder.rb:49:in `eval'\n2017-03-21T20:28:48.023700+00:00 app[web.1]:    from /app/vendor/bundle/ruby/2.2                                                                                                                .0/gems/railties-5.0.2/lib/rails/commands/server.rb:59:in `app'\n2017-03-21T20:28:48.023687+00:00 app[web.1]:    from /app/vendor/bundle/ruby/2.2                                                                                                                .0/gems/rack-2.0.1/lib/rack/builder.rb:49:in `new_from_string'\n2017-03-21T20:28:48.023690+00:00 app[web.1]:    from /app/vendor/bundle/ruby/2.2                                                                                                                .0/gems/rack-2.0.1/lib/rack/builder.rb:40:in `parse_file'\n2017-03-21T20:28:48.023702+00:00 app[web.1]:    from /app/vendor/bundle/ruby/2.2                                                                                                                .0/gems/rack-2.0.1/lib/rack/server.rb:353:in `wrapped_app'\n2017-03-21T20:28:48.023704+00:00 app[web.1]:    from /app/vendor/bundle/ruby/2.2                                                                                                                .0/gems/rack-2.0.1/lib/rack/server.rb:282:in `start'\n2017-03-21T20:28:48.023710+00:00 app[web.1]:    from /app/vendor/bundle/ruby/2.2                                                                                                                .0/gems/railties-5.0.2/lib/rails/commands/server.rb:79:in `start'\n2017-03-21T20:28:48.023712+00:00 app[web.1]:    from /app/vendor/bundle/ruby/2.2                                                                                                                .0/gems/railties-5.0.2/lib/rails/commands/commands_tasks.rb:90:in `block in serv                                                                                                                er'\n2017-03-21T20:28:48.023714+00:00 app[web.1]:    from /app/vendor/bundle/ruby/2.2                                                                                                                .0/gems/railties-5.0.2/lib/rails/commands/commands_tasks.rb:85:in `tap'\n2017-03-21T20:28:48.023715+00:00 app[web.1]:    from /app/vendor/bundle/ruby/2.2                                                                                                                .0/gems/railties-5.0.2/lib/rails/commands/commands_tasks.rb:85:in `server'\n2017-03-21T20:28:48.023724+00:00 app[web.1]:    from /app/vendor/bundle/ruby/2.2                                                                                                                .0/gems/railties-5.0.2/lib/rails/commands.rb:18:in `&lt;top (required)&gt;'\n2017-03-21T20:28:48.023718+00:00 app[web.1]:    from /app/vendor/bundle/ruby/2.2                                                                                                                .0/gems/railties-5.0.2/lib/rails/commands/commands_tasks.rb:49:in `run_command!'\n2017-03-21T20:28:48.023726+00:00 app[web.1]:    from bin/rails:4:in `require'\n2017-03-21T20:28:48.023732+00:00 app[web.1]:    from bin/rails:4:in `&lt;main&gt;'\n2017-03-21T20:28:48.114357+00:00 heroku[web.1]: Process exited with status 1\n2017-03-21T20:28:48.128920+00:00 heroku[web.1]: State changed from starting to c                                                                                                                rashed\n2017-03-21T20:28:49.680428+00:00 heroku[router]: at=error code=H10 desc=\"App cra                                                                                                                shed\" method=GET path=\"/recipes\" host=weather-consult.herokuapp.com request_id=a                                                                                                                42f1683-8c92-412e-bc36-35bee47fd044 fwd=\"83.138.193.223\" dyno= connect= service=                                                                                                                 status=503 bytes= protocol=https\n2017-03-21T20:28:50.139167+00:00 heroku[router]: at=error code=H10 desc=\"App cra                                                                                                                shed\" method=GET path=\"/favicon.ico\" host=weather-consult.herokuapp.com request_                                                                                                                id=70b71bcf-af11-489f-bdee-f3325249f7fe fwd=\"83.138.193.223\" dyno= connect= serv                                                                                                                ice= status=503 bytes= protocol=https\n</code></pre>\n"}, {"tags": ["ruby"], "answers": [{"comments": [{"owner": {"reputation": 394580, "user_id": 479863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ArUCE.jpg?s=128&g=1", "display_name": "mu is too short", "link": "https://stackoverflow.com/users/479863/mu-is-too-short"}, "edited": false, "score": 0, "creation_date": 1490132837, "post_id": 42938484, "comment_id": 72974502, "body": "What does <code>mask(&#39;x&#39;)</code> do?"}, {"owner": {"reputation": 27144, "user_id": 3857758, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/58c4295826435f049b7fc32b98c240f9?s=128&d=identicon&r=PG&f=1", "display_name": "Ursus", "link": "https://stackoverflow.com/users/3857758/ursus"}, "reply_to_user": {"reputation": 394580, "user_id": 479863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ArUCE.jpg?s=128&g=1", "display_name": "mu is too short", "link": "https://stackoverflow.com/users/479863/mu-is-too-short"}, "edited": false, "score": 0, "creation_date": 1490133297, "post_id": 42938484, "comment_id": 72974714, "body": "That explodes deliberately :D"}, {"owner": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "edited": false, "score": 1, "creation_date": 1490133990, "post_id": 42938484, "comment_id": 72975026, "body": "What does <code>mask(&#39;xx&#39;)</code> do? What does <code>mask(&#39;xxx&#39;)</code> do? :)"}, {"owner": {"reputation": 27144, "user_id": 3857758, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/58c4295826435f049b7fc32b98c240f9?s=128&d=identicon&r=PG&f=1", "display_name": "Ursus", "link": "https://stackoverflow.com/users/3857758/ursus"}, "edited": false, "score": 0, "creation_date": 1490134251, "post_id": 42938484, "comment_id": 72975136, "body": "Those too, obviously :P"}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1490135710, "post_id": 42938484, "comment_id": 72975789, "body": "That&#39;s very close to what I&#39;d have used. Nice and simple."}, {"owner": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "edited": false, "score": 0, "creation_date": 1490136145, "post_id": 42938484, "comment_id": 72975960, "body": "<code>string[0..-5] = &#39;#&#39; * [(string.length - 4), 0].max</code> or <code>string[0..-5] = &#39;#&#39; * string[0..-5].length</code>. You still mutate the string, though."}], "tags": [], "owner": {"reputation": 27144, "user_id": 3857758, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/58c4295826435f049b7fc32b98c240f9?s=128&d=identicon&r=PG&f=1", "display_name": "Ursus", "link": "https://stackoverflow.com/users/3857758/ursus"}, "is_accepted": false, "score": 2, "last_activity_date": 1490131942, "creation_date": 1490131942, "answer_id": 42938484, "question_id": 42938422, "link": "https://stackoverflow.com/questions/42938422/how-to-mask-all-but-last-four-characters-in-a-string/42938484#42938484", "title": "How to mask all but last four characters in a string", "body": "<p>Try this one</p>\n\n<pre><code>def mask(string)\n  string[0..-5] = '#' * (string.length - 4)\n  string\nend\n\nmask(\"12345678\")\n =&gt; \"####5678\" \n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 1, "creation_date": 1490135797, "post_id": 42938511, "comment_id": 72975819, "body": "Of course <code>char</code> should default to <code>&#39;*&#39;</code> since it is <code>asteriskify</code>."}, {"owner": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "edited": false, "score": 2, "creation_date": 1490135872, "post_id": 42938511, "comment_id": 72975855, "body": "<code>asteriskify_or_hashify_or_somethingify(tail, char)</code>"}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1490136033, "post_id": 42938511, "comment_id": 72975911, "body": "<code>any_char_acter_ify(tail, char)</code>"}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1490142652, "post_id": 42938511, "comment_id": 72977982, "body": "All good points. <code>hashificate</code> or <code>stomp</code> might also work here!"}, {"owner": {"reputation": 89, "user_id": 7748052, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/b9d41f5566a41e87d5920d707ee431f5?s=128&d=identicon&r=PG&f=1", "display_name": "user211309", "link": "https://stackoverflow.com/users/7748052/user211309"}, "edited": false, "score": 0, "creation_date": 1490142903, "post_id": 42938511, "comment_id": 72978049, "body": "That&#39;s really neat, thanks. What is the reasoning behind putting   self[-tail, tail]  ? I don&#39;t quite get how to read that expression."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "reply_to_user": {"reputation": 89, "user_id": 7748052, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/b9d41f5566a41e87d5920d707ee431f5?s=128&d=identicon&r=PG&f=1", "display_name": "user211309", "link": "https://stackoverflow.com/users/7748052/user211309"}, "edited": false, "score": 0, "creation_date": 1490142975, "post_id": 42938511, "comment_id": 72978075, "body": "@user211309 That&#39;s how you capture the last <i>N</i> characters in a string. <code>&quot;football&quot;[-4,4]</code> is <code>&quot;ball&quot;</code>. It&#39;s <code>[position, length]</code> where negative positions are taken to mean &quot;from end of string&quot;."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1490143360, "post_id": 42938511, "comment_id": 72978213, "body": "Absolutely. Don&#39;t be afraid to try things in <code>irb</code> as well, you can quickly find solutions by trying different operations or combinations of things without a whole lot of fuss. The Ruby core documentation is also worth at least skimming to get a taste for what&#39;s there as there&#39;s a ton of tools at your disposal, a much richer environment than most programming languages offer."}], "tags": [], "owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "is_accepted": false, "score": 3, "last_activity_date": 1490132048, "creation_date": 1490132048, "answer_id": 42938511, "question_id": 42938422, "link": "https://stackoverflow.com/questions/42938422/how-to-mask-all-but-last-four-characters-in-a-string/42938511#42938511", "title": "How to mask all but last four characters in a string", "body": "<p>Ruby makes this sort of thing pretty trivial:</p>\n\n<pre><code>class String\n  def asteriskify(tail = 4, char = '#')\n    if (length &lt;= tail)\n      self\n    else\n      char * (length - tail) + self[-tail, tail]\n    end\n  end\nend\n</code></pre>\n\n<p>Then you can apply it like this:</p>\n\n<pre><code>\"moo\".asteriskify\n# =&gt; \"moo\"\n\"testing\".asteriskify\n# =&gt; \"###ting\"\n\"password\".asteriskify(5, '*')\n# =&gt; \"***sword\"\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 394580, "user_id": 479863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ArUCE.jpg?s=128&g=1", "display_name": "mu is too short", "link": "https://stackoverflow.com/users/479863/mu-is-too-short"}, "edited": false, "score": 0, "creation_date": 1490132886, "post_id": 42938583, "comment_id": 72974524, "body": "What does <code>mask(&#39;x&#39;)</code> do?"}], "tags": [], "owner": {"reputation": 455, "user_id": 7637917, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-mqDP9mBqkV0/AAAAAAAAAAI/AAAAAAAAACo/tB5bCodsHxw/photo.jpg?sz=128", "display_name": "Dmitry Cat", "link": "https://stackoverflow.com/users/7637917/dmitry-cat"}, "is_accepted": false, "score": 1, "last_activity_date": 1490133354, "last_edit_date": 1490133354, "creation_date": 1490132298, "answer_id": 42938583, "question_id": 42938422, "link": "https://stackoverflow.com/questions/42938422/how-to-mask-all-but-last-four-characters-in-a-string/42938583#42938583", "title": "How to mask all but last four characters in a string", "body": "<p>I will add my solution to this topic too :)</p>\n\n<pre><code>def mask(str)\n  str.match(/(.*)(.{4})/)  \n  '#' * ($1 || '').size + ($2 || str)  \nend  \n\nmask('abcdef') # =&gt; \"##cdef\"\nmask('x') # =&gt; \"x\"\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1490135874, "post_id": 42938900, "comment_id": 72975858, "body": "While it works, I&#39;d counter that it isn&#39;t as easily maintained as non-regex solutions."}, {"owner": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "reply_to_user": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1490136258, "post_id": 42938900, "comment_id": 72976012, "body": "@theTinMan: What would you maintain? It works fine and it&#39;s much shorter than any other solution. If it ain&#39;t broken, don&#39;t fix it ;)"}, {"owner": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "reply_to_user": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1490136671, "post_id": 42938900, "comment_id": 72976173, "body": "@theTinMan: Also, you complimented an incorrect non-regex solution. It might have looked easy to maintain but wasn&#39;t."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1490138299, "post_id": 42938900, "comment_id": 72976744, "body": "I wish I had thought of that"}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1490142704, "post_id": 42938900, "comment_id": 72977993, "body": "What if <code>string</code> is a <code>Duck</code> that has a <code>to_s</code> method?"}, {"owner": {"reputation": 89, "user_id": 7748052, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/b9d41f5566a41e87d5920d707ee431f5?s=128&d=identicon&r=PG&f=1", "display_name": "user211309", "link": "https://stackoverflow.com/users/7748052/user211309"}, "edited": false, "score": 0, "creation_date": 1490142757, "post_id": 42938900, "comment_id": 72978004, "body": "Thanks, that looks like a neat solution. I don&#39;t quite follow the syntax of this line:   string.gsub(/.(?=.{#{all_but}})/, char)  How should one parse this?"}, {"owner": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "reply_to_user": {"reputation": 89, "user_id": 7748052, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/b9d41f5566a41e87d5920d707ee431f5?s=128&d=identicon&r=PG&f=1", "display_name": "user211309", "link": "https://stackoverflow.com/users/7748052/user211309"}, "edited": false, "score": 0, "creation_date": 1490182172, "post_id": 42938900, "comment_id": 72995658, "body": "@user211309: I updated the answer. It should be clearer now."}], "tags": [], "owner": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "is_accepted": true, "score": 9, "last_activity_date": 1490182156, "last_edit_date": 1495535455, "creation_date": 1490133504, "answer_id": 42938900, "question_id": 42938422, "link": "https://stackoverflow.com/questions/42938422/how-to-mask-all-but-last-four-characters-in-a-string/42938900#42938900", "title": "How to mask all but last four characters in a string", "body": "<h1>positive lookahead</h1>\n\n<p>A <a href=\"http://www.regular-expressions.info/lookaround.html\" rel=\"noreferrer\">positive lookahead</a> makes it pretty easy. If any character is followed by  at least 4 characters, it gets replaced :</p>\n\n<pre><code>\"654321\".gsub(/.(?=.{4})/,'#')\n# \"##4321\"\n</code></pre>\n\n<p>Here's a description of the regex :</p>\n\n<pre><code>r = /\n     .        # Just one character\n     (?=      # which must be followed by\n        .{4}  # 4 characters\n     )        #\n    /x        # free-spacing mode, allows comments inside regex\n</code></pre>\n\n<p>Note that the regex only matches one character at a time, even though it needs to check up to 5 characters for each match :</p>\n\n<pre><code>\"654321\".scan(r)\n# =&gt; [\"6\", \"5\"]\n</code></pre>\n\n<p><code>/(.)..../</code> wouldn't work, because it would consume 5 characters for each iteration :</p>\n\n<pre><code>\"654321\".scan(/(.)..../)\n# =&gt; [[\"6\"]]\n\"abcdefghij\".scan(/(.)..../)\n# =&gt; [[\"a\"], [\"f\"]]\n</code></pre>\n\n<p>If you want to parametrize the length of the unmasked string, you can use <a href=\"https://stackoverflow.com/questions/6722145/how-can-i-interpolate-a-variable-in-a-ruby-regex\">variable interpolation</a> :</p>\n\n<pre><code>all_but = 4\n/.(?=.{#{all_but}})/\n# =&gt; /.(?=.{4})/\n</code></pre>\n\n<h1>Code</h1>\n\n<p>Packing it into a method, it becomes :</p>\n\n<pre><code>def mask(string, all_but = 4, char = '#')\n  string.gsub(/.(?=.{#{all_but}})/, char)\nend\n\np mask('testabcdef')\n# '######cdef'\np mask('1234')\n# '1234'\np mask('123')\n# '123'\np mask('x')\n# 'x'\n</code></pre>\n\n<p>You could also adapt it for sentences :</p>\n\n<pre><code>def mask(string, all_but = 4, char = '#')\n  string.gsub(/\\w(?=\\w{#{all_but}})/, char)\nend\n\np mask('It even works for multiple words')\n# \"It even #orks for ####iple #ords\"\n</code></pre>\n\n<h1>Some notes about your code</h1>\n\n<h2>string.to_s</h2>\n\n<p>Naming things is very important in programming, especially in dynamic languages.</p>\n\n<pre><code>string.to_s\n</code></pre>\n\n<p>If <code>string</code> is indeed a string, there shouldn't be any reason to call <code>to_s</code>.</p>\n\n<p>If <code>string</code> isn't a string, you should indeed call <code>to_s</code> before <code>gsub</code> but should also rename <code>string</code> to a better description :</p>\n\n<pre><code>object.to_s\narray.to_s\nwhatever.to_s\n</code></pre>\n\n<h2>join</h2>\n\n<pre><code>puts array.join(\", \").delete(\", \").inspect\n</code></pre>\n\n<p>What do you want to do exactly? You could probably just use <code>join</code> :</p>\n\n<pre><code>[1,2,[3,4]].join(\", \").delete(\", \")\n# \"1234\"\n[1,2,[3,4]].join\n# \"1234\"\n</code></pre>\n\n<h2>delete</h2>\n\n<p>Note that <code>.delete(\", \")</code> deletes every comma and every whitespace, in any order. It doesn't only delete <code>\", \"</code> substrings :</p>\n\n<pre><code>\",a b,,,   cc\".delete(', ')\n# \"abcc\"\n[\"1,2\", \"3,4\"].join(', ').delete(', ')\n# \"1234\"\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": false, "score": 2, "last_activity_date": 1490148293, "last_edit_date": 1490148293, "creation_date": 1490136320, "answer_id": 42939585, "question_id": 42938422, "link": "https://stackoverflow.com/questions/42938422/how-to-mask-all-but-last-four-characters-in-a-string/42939585#42939585", "title": "How to mask all but last four characters in a string", "body": "<p>I offer this solution mainly to remind readers that <a href=\"http://ruby-doc.org/core-2.4.0/String.html#method-i-gsub\" rel=\"nofollow noreferrer\">String#gsub</a> without a block returns an enumerator.</p>\n\n<pre><code>def mask(str, nbr_unmasked, mask_char)\n  str.gsub(/./).with_index { |s,i| i &lt; str.size-nbr_unmasked ? mask_char : s }\nend\n\nmask(\"abcdef\", 4, '#')\n  #=&gt; \"##cdef\" \nmask(\"abcdef\", 99, '#')\n  #=&gt; \"######\" \n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 467, "user_id": 6003939, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-9fP_gxi1pEA/AAAAAAAAAAI/AAAAAAAAAC4/L9NDDYQE22s/photo.jpg?sz=128", "display_name": "Vivek Singh", "link": "https://stackoverflow.com/users/6003939/vivek-singh"}, "is_accepted": false, "score": 0, "last_activity_date": 1575091765, "creation_date": 1575091765, "answer_id": 59113470, "question_id": 42938422, "link": "https://stackoverflow.com/questions/42938422/how-to-mask-all-but-last-four-characters-in-a-string/59113470#59113470", "title": "How to mask all but last four characters in a string", "body": "<p>Try using <code>tap</code></p>\n\n<pre><code>def mask_string(str)\n  str.tap { |p| p[0...-4] = '#' * (p[0...-4].length) } if str.length &gt; 4\n  str\nend\n\nmask_string('ABCDEF') # =&gt; ##CDEF\nmask_string('AA') # =&gt; AA\nmask_string('S') # =&gt; 'S'\n</code></pre>\n"}], "owner": {"reputation": 89, "user_id": 7748052, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/b9d41f5566a41e87d5920d707ee431f5?s=128&d=identicon&r=PG&f=1", "display_name": "user211309", "link": "https://stackoverflow.com/users/7748052/user211309"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3737, "favorite_count": 0, "accepted_answer_id": 42938900, "answer_count": 6, "score": 3, "last_activity_date": 1575091765, "creation_date": 1490131691, "last_edit_date": 1490135969, "question_id": 42938422, "link": "https://stackoverflow.com/questions/42938422/how-to-mask-all-but-last-four-characters-in-a-string", "title": "How to mask all but last four characters in a string", "body": "<p>I've been attempting a coding exercise to mask all but the last four digits or characters of any input. </p>\n\n<p>I think my solution works but it seems a bit clumsy. Does anyone have ideas about how to refactor it?</p>\n\n<p>Here's my code:</p>\n\n<pre><code>def mask(string)\n  z = string.to_s.length\n\n  if z &lt;= 4\n    return string\n  elsif z &gt; 4\n    array = []\n    string1 = string.to_s.chars\n\n    string1[0..((z-1)-4)].each do |s|\n      array &lt;&lt; \"#\"\n    end\n\n    array &lt;&lt; string1[(z-4)..(z-1)]\n\n    puts array.join(\", \").delete(\", \").inspect     \n  end\nend\n</code></pre>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1490136123, "post_id": 42937859, "comment_id": 72975950, "body": "We&#39;d like to see what you&#39;ve tried. Without evidence of your effort it looks like you didn&#39;t do research or tried things, which are required. Please read &quot;<a href=\"http://meta.stackoverflow.com/questions/261592\">How much research effort is expected of Stack Overflow users?</a>&quot;."}], "answers": [{"comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 6, "creation_date": 1490129809, "post_id": 42937876, "comment_id": 72972956, "body": "Or more generally: <code>flat_map { |i| [ i ] * n }</code> for <code>n</code> repetitions."}], "tags": [], "owner": {"reputation": 27144, "user_id": 3857758, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/58c4295826435f049b7fc32b98c240f9?s=128&d=identicon&r=PG&f=1", "display_name": "Ursus", "link": "https://stackoverflow.com/users/3857758/ursus"}, "is_accepted": false, "score": 7, "last_activity_date": 1490129355, "creation_date": 1490129355, "answer_id": 42937876, "question_id": 42937859, "link": "https://stackoverflow.com/questions/42937859/duplicate-elements-of-array-in-ruby/42937876#42937876", "title": "Duplicate elements of array in ruby", "body": "<p>Try this one</p>\n\n<pre><code>[1, 2, 3].flat_map { |i| [i, i] }\n =&gt; [1, 1, 2, 2, 3, 3] \n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 9030, "user_id": 5101476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JCQrl.jpg?s=128&g=1", "display_name": "ice\u30c4", "link": "https://stackoverflow.com/users/5101476/ice%e3%83%84"}, "edited": false, "score": 0, "creation_date": 1490130246, "post_id": 42937951, "comment_id": 72973190, "body": "A slight variation <code>a.each_with_object([]) { |e,o| 2.times {o.push e} }</code>"}, {"owner": {"reputation": 12629, "user_id": 4739257, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/MdhEs.jpg?s=128&g=1", "display_name": "Ilya", "link": "https://stackoverflow.com/users/4739257/ilya"}, "reply_to_user": {"reputation": 9030, "user_id": 5101476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JCQrl.jpg?s=128&g=1", "display_name": "ice\u30c4", "link": "https://stackoverflow.com/users/5101476/ice%e3%83%84"}, "edited": false, "score": 0, "creation_date": 1490130596, "post_id": 42937951, "comment_id": 72973389, "body": "@sagarpandya82, thanks for the variation. There are too many possible variants, I prefer mine, it seems more readable :)"}, {"owner": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "edited": false, "score": 0, "creation_date": 1490132332, "post_id": 42937951, "comment_id": 72974257, "body": "How would you modify the methods to accept an arbitrary number of repetitions?"}, {"owner": {"reputation": 12629, "user_id": 4739257, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/MdhEs.jpg?s=128&g=1", "display_name": "Ilya", "link": "https://stackoverflow.com/users/4739257/ilya"}, "reply_to_user": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "edited": false, "score": 0, "creation_date": 1490166142, "post_id": 42937951, "comment_id": 72985497, "body": "@Eric, I added some comments. For the first example it&#39;s possible  ( <code>zip</code> n times) but looks ugly and slow, let me know if you are still need this :)"}], "tags": [], "owner": {"reputation": 12629, "user_id": 4739257, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/MdhEs.jpg?s=128&g=1", "display_name": "Ilya", "link": "https://stackoverflow.com/users/4739257/ilya"}, "is_accepted": false, "score": 3, "last_activity_date": 1490165983, "last_edit_date": 1490165983, "creation_date": 1490129686, "answer_id": 42937951, "question_id": 42937859, "link": "https://stackoverflow.com/questions/42937859/duplicate-elements-of-array-in-ruby/42937951#42937951", "title": "Duplicate elements of array in ruby", "body": "<p>@Ursus answer is the most clean, there are possible solutions: </p>\n\n<pre><code>a = [1, 2, 3]\na.zip(a).flatten\n#=&gt; [1, 1, 2, 2, 3, 3]\n</code></pre>\n\n<p>Or</p>\n\n<pre><code>a.inject([]) {|a, e| a &lt;&lt; e &lt;&lt; e} #  a.inject([]) {|a, e| n.times {a &lt;&lt; e}; a}\n=&gt; [1, 1, 2, 2, 3, 3]\n</code></pre>\n\n<p>Or </p>\n\n<pre><code>[a, a].transpose.flatten # ([a] * n).transpose.flatten\n=&gt; [1, 1, 2, 2, 3, 3]\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1670, "user_id": 6388521, "user_type": "registered", "accept_rate": 69, "profile_image": "https://lh4.googleusercontent.com/-VdFWPJVSpRc/AAAAAAAAAAI/AAAAAAAAAFo/vCc8QOz6v9Y/photo.jpg?sz=128", "display_name": "Ruslan", "link": "https://stackoverflow.com/users/6388521/ruslan"}, "edited": false, "score": 0, "creation_date": 1490131010, "post_id": 42938114, "comment_id": 72973591, "body": "This is by far the most clean version"}, {"owner": {"reputation": 394580, "user_id": 479863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ArUCE.jpg?s=128&g=1", "display_name": "mu is too short", "link": "https://stackoverflow.com/users/479863/mu-is-too-short"}, "edited": false, "score": 4, "creation_date": 1490131345, "post_id": 42938114, "comment_id": 72973743, "body": "You&#39;re making some assumptions here. What happens if the array is <code>[11, 6, 42, 23]</code>?"}, {"owner": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "reply_to_user": {"reputation": 1670, "user_id": 6388521, "user_type": "registered", "accept_rate": 69, "profile_image": "https://lh4.googleusercontent.com/-VdFWPJVSpRc/AAAAAAAAAAI/AAAAAAAAAFo/vCc8QOz6v9Y/photo.jpg?sz=128", "display_name": "Ruslan", "link": "https://stackoverflow.com/users/6388521/ruslan"}, "edited": false, "score": 1, "creation_date": 1490131397, "post_id": 42938114, "comment_id": 72973776, "body": "@Ruslan: Nope. This answer might look clean, but it&#39;s wrong. What about <code>[2,1]</code> or <code>[1,&#39;2&#39;]</code> ?"}, {"owner": {"reputation": 1670, "user_id": 6388521, "user_type": "registered", "accept_rate": 69, "profile_image": "https://lh4.googleusercontent.com/-VdFWPJVSpRc/AAAAAAAAAAI/AAAAAAAAAFo/vCc8QOz6v9Y/photo.jpg?sz=128", "display_name": "Ruslan", "link": "https://stackoverflow.com/users/6388521/ruslan"}, "edited": false, "score": 0, "creation_date": 1490131517, "post_id": 42938114, "comment_id": 72973821, "body": "One way around the sorting: <code>([1, &#39;2&#39;] * 2).sort {|x, y| x.to_s &lt;=&gt; y.to_s}</code>"}, {"owner": {"reputation": 5730, "user_id": 667987, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8c00249587cb5aa0ceb5765dc811faa7?s=128&d=identicon&r=PG", "display_name": "seph", "link": "https://stackoverflow.com/users/667987/seph"}, "reply_to_user": {"reputation": 394580, "user_id": 479863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ArUCE.jpg?s=128&g=1", "display_name": "mu is too short", "link": "https://stackoverflow.com/users/479863/mu-is-too-short"}, "edited": false, "score": 0, "creation_date": 1490226879, "post_id": 42938114, "comment_id": 73023618, "body": "@muistooshort - Maybe you are the one making assumptions. Yes, there is a dearth of information in the question. But making stuff up and saying that is what they have in mind is definitely wrong. Continuing the conversation with Roberto would be good."}], "tags": [], "owner": {"reputation": 5730, "user_id": 667987, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8c00249587cb5aa0ceb5765dc811faa7?s=128&d=identicon&r=PG", "display_name": "seph", "link": "https://stackoverflow.com/users/667987/seph"}, "is_accepted": false, "score": -2, "last_activity_date": 1490130665, "last_edit_date": 1490130665, "creation_date": 1490130348, "answer_id": 42938114, "question_id": 42937859, "link": "https://stackoverflow.com/questions/42937859/duplicate-elements-of-array-in-ruby/42938114#42938114", "title": "Duplicate elements of array in ruby", "body": "<p>Try this:</p>\n\n<pre><code>[1, 2, 3] * 2\n\n =&gt; [1, 2, 3, 1, 2, 3] \n</code></pre>\n\n<p>You might want it sorted:</p>\n\n<pre><code>([1, 2, 3] * 2).sort\n\n =&gt; [1, 1, 2, 2, 3, 3] \n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "is_accepted": false, "score": 4, "last_activity_date": 1490132568, "last_edit_date": 1490132568, "creation_date": 1490131689, "answer_id": 42938420, "question_id": 42937859, "link": "https://stackoverflow.com/questions/42937859/duplicate-elements-of-array-in-ruby/42938420#42938420", "title": "Duplicate elements of array in ruby", "body": "<p>Here's yet another way, creating the array directly with <a href=\"https://ruby-doc.org/core-2.4.0/Array.html#method-c-new\" rel=\"nofollow noreferrer\"><code>Array#new</code></a> :</p>\n\n<pre><code>array = [1, 2, 3]\nrepetitions = 2\n\np Array.new(array.size * repetitions) { |i| array[i / repetitions] }\n# [1, 1, 2, 2, 3, 3]\n</code></pre>\n\n<p>According to <a href=\"https://github.com/marcandre/fruity\" rel=\"nofollow noreferrer\"><code>fruity</code></a>, @ursus's answer, @ilya's first two answers and mine have comparable performance. <code>transpose.flatten</code> is slower than any of the others.</p>\n"}], "owner": {"reputation": 2120, "user_id": 978151, "user_type": "registered", "accept_rate": 35, "profile_image": "https://graph.facebook.com/1197256483/picture?type=large", "display_name": "Roberto Pezzali", "link": "https://stackoverflow.com/users/978151/roberto-pezzali"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 486, "favorite_count": 0, "answer_count": 4, "score": 2, "last_activity_date": 1490165983, "creation_date": 1490129266, "question_id": 42937859, "link": "https://stackoverflow.com/questions/42937859/duplicate-elements-of-array-in-ruby", "title": "Duplicate elements of array in ruby", "body": "<p>I find a lot of reference about removing duplicates in ruby but I cannot find how to create duplicate.</p>\n\n<p>If I have an array like <code>[1,2,3]</code> how can I map it to an array with dubbed items? <code>[1,1,2,2,3,3]</code></p>\n\n<p>Is there a method?</p>\n"}, {"tags": ["ruby", "cucumber", "hook", "gherkin", "scenarios"], "answers": [{"tags": [], "owner": {"reputation": 371, "user_id": 7573223, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIuXz.jpg?s=128&g=1", "display_name": "SMAG", "link": "https://stackoverflow.com/users/7573223/smag"}, "is_accepted": false, "score": 1, "last_activity_date": 1497339160, "creation_date": 1497339160, "answer_id": 44515024, "question_id": 42937754, "link": "https://stackoverflow.com/questions/42937754/grab-scenario-information-in-before-and-after-hooks/44515024#44515024", "title": "Grab scenario information in Before and After hooks?", "body": "<pre><code>Before do |scenario|\n  all_sources = scenario.outline? ? scenario.scenario_outline.all_source : scenario.all_source\nend\n</code></pre>\n\n<p>From the all_source variable you will have access to several objects from ::Ast</p>\n\n<p>Scenario Outline:</p>\n\n<ul>\n<li><p>Cucumber::Core::Ast::Feature</p></li>\n<li><p>Cucumber::Core::Ast::ScenarioOutline </p></li>\n<li><p>Cucumber::Core::Ast::Examples </p></li>\n<li><p>Cucumber::Core::Ast::ExamplesTable::Row: </p></li>\n<li><p>Cucumber::Core::Ast::ExpandedOutlineStep</p></li>\n</ul>\n\n<p>Scenario:</p>\n\n<ul>\n<li><p>Cucumber::Core::Ast::Feature</p></li>\n<li><p>Cucumber::Core::Ast::Scenario</p></li>\n<li><p>Cucumber::Core::Ast::Step</p></li>\n</ul>\n\n<p>From these you should be able to get data about file path, descriptions, comments, tags, hooks, line numbers and so on.</p>\n"}], "owner": {"reputation": 51, "user_id": 7680874, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/37bc395c641a28a760f17f1266fb9335?s=128&d=identicon&r=PG&f=1", "display_name": "Tyler", "link": "https://stackoverflow.com/users/7680874/tyler"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 611, "favorite_count": 1, "answer_count": 1, "score": 1, "last_activity_date": 1497339160, "creation_date": 1490128915, "question_id": 42937754, "link": "https://stackoverflow.com/questions/42937754/grab-scenario-information-in-before-and-after-hooks", "title": "Grab scenario information in Before and After hooks?", "body": "<p>Right now I am trying to grab the information from the current scenario (description, file path, name, etc.). I try to get the scenario information in the before hook like this</p>\n\n<pre><code>Before do |scenario|\n    puts scenario.name\n    puts scenario.description\n    #etc.\nend\n</code></pre>\n\n<p>however things like scenario.description are not available for use. This is because when running in both Before and After hook, scenario is being called as <code>Cucumber::RunningTestCase::Scenario</code> instead part of the core AST module, like feature. I want to be able to access the scenario from <code>Cucumber::Core::Ast::Scenario</code> and <code>Cucumber::Core::Ast::OutlineTable::ExampleRow</code>, where values like current scenario description is available. Is it possible to get access to <code>Cucumber::Core::Ast::Scenario</code> in before and after hooks instead of <code>Cucumber::RunningTestCase::Scenario</code>, or another way to grab information like scenario name, description, file path, etc.? This is using the latest version of the cucumber and cucumber core gems (2.4 and 1.5). In addition, I am also no longer to able to access information about the current step, and step count.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "class", "module"], "answers": [{"comments": [{"owner": {"reputation": 98, "user_id": 6946388, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh6.googleusercontent.com/-kjfIRaKSW2E/AAAAAAAAAAI/AAAAAAAAACc/AlHPKy8zAPg/photo.jpg?sz=128", "display_name": "Oleg Borodko", "link": "https://stackoverflow.com/users/6946388/oleg-borodko"}, "edited": false, "score": 0, "creation_date": 1490131207, "post_id": 42937968, "comment_id": 72973674, "body": "Can you tell me. How I can add module which contains class?"}, {"owner": {"reputation": 685, "user_id": 5706543, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-dR9ZqD3zFxs/AAAAAAAAAAI/AAAAAAAAAPg/aMzyNnYcIyI/photo.jpg?sz=128", "display_name": "Gennady Grishkovtsov", "link": "https://stackoverflow.com/users/5706543/gennady-grishkovtsov"}, "reply_to_user": {"reputation": 98, "user_id": 6946388, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh6.googleusercontent.com/-kjfIRaKSW2E/AAAAAAAAAAI/AAAAAAAAACc/AlHPKy8zAPg/photo.jpg?sz=128", "display_name": "Oleg Borodko", "link": "https://stackoverflow.com/users/6946388/oleg-borodko"}, "edited": false, "score": 0, "creation_date": 1490131702, "post_id": 42937968, "comment_id": 72973927, "body": "You can use <b>require</b> or RoR can do it without you."}], "tags": [], "owner": {"reputation": 685, "user_id": 5706543, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-dR9ZqD3zFxs/AAAAAAAAAAI/AAAAAAAAAPg/aMzyNnYcIyI/photo.jpg?sz=128", "display_name": "Gennady Grishkovtsov", "link": "https://stackoverflow.com/users/5706543/gennady-grishkovtsov"}, "is_accepted": true, "score": 1, "last_activity_date": 1490129774, "creation_date": 1490129774, "answer_id": 42937968, "question_id": 42937649, "link": "https://stackoverflow.com/questions/42937649/how-can-i-include-the-module-with-class-to-another-class/42937968#42937968", "title": "How can I include the module with class to another class?", "body": "<p>You can't use <strong>include</strong> for including a class, because it uses for including methods from modules in classes.\nIf you want to use a class, try to pass an instance of class or create class's method.</p>\n\n<pre><code>class Foo\n  def self.bar\n    puts 'class method'\n  end\n\n  def baz\n    puts 'instance method'\n  end\nend\n\nFoo.bar # =&gt; \"class method\"\nFoo.baz # =&gt; NoMethodError: undefined method \u2018baz\u2019 for Foo:Class\n\nFoo.new.baz # =&gt; instance method\nFoo.new.bar # =&gt; NoMethodError: undefined method \u2018bar\u2019 for #&lt;Foo:0x1e120&gt;\n</code></pre>\n\n<p><a href=\"http://www.railstips.org/blog/archives/2009/05/11/class-and-instance-methods-in-ruby/\" rel=\"nofollow noreferrer\">Example</a></p>\n"}, {"tags": [], "owner": {"reputation": 98, "user_id": 6946388, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh6.googleusercontent.com/-kjfIRaKSW2E/AAAAAAAAAAI/AAAAAAAAACc/AlHPKy8zAPg/photo.jpg?sz=128", "display_name": "Oleg Borodko", "link": "https://stackoverflow.com/users/6946388/oleg-borodko"}, "is_accepted": false, "score": 0, "last_activity_date": 1490132294, "creation_date": 1490132294, "answer_id": 42938578, "question_id": 42937649, "link": "https://stackoverflow.com/questions/42937649/how-can-i-include-the-module-with-class-to-another-class/42938578#42938578", "title": "How can I include the module with class to another class?", "body": "<p>I can put</p>\n\n<pre><code>def some_method(x, y)\n  My2::Circle.new.some_method(x, y)\nend\n</code></pre>\n"}], "owner": {"reputation": 98, "user_id": 6946388, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh6.googleusercontent.com/-kjfIRaKSW2E/AAAAAAAAAAI/AAAAAAAAACc/AlHPKy8zAPg/photo.jpg?sz=128", "display_name": "Oleg Borodko", "link": "https://stackoverflow.com/users/6946388/oleg-borodko"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 750, "favorite_count": 0, "accepted_answer_id": 42937968, "answer_count": 2, "score": 0, "last_activity_date": 1490132294, "creation_date": 1490128532, "last_edit_date": 1490131422, "question_id": 42937649, "link": "https://stackoverflow.com/questions/42937649/how-can-i-include-the-module-with-class-to-another-class", "title": "How can I include the module with class to another class?", "body": "<p>I have module with class</p>\n\n<pre><code>module My &lt; Grape::API\n  prefix 'api'\n  format :json\n\n  class Users\n    helpers do\n      include My2 #I want put here method 'some_method'\n    end\n  end\n\nend\n</code></pre>\n\n<p>I have another module</p>\n\n<pre><code>module My2\n  class Circle\n    def some_method\n      \"Hello\"\n    end\n  end\nend\n</code></pre>\n\n<p>I can do this, but I wonder how to do with the class</p>\n\n<pre><code>module My2\n    def some_method\n      \"Hello\"\n    end\nend\n</code></pre>\n\n<p>I don't understand logical .. Thank you<br>\nHow can I do it another way?</p>\n"}, {"tags": ["ruby", "selenium", "capybara"], "comments": [{"owner": {"reputation": 783, "user_id": 3730224, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JBuu4.gif?s=128&g=1", "display_name": "mutt", "link": "https://stackoverflow.com/users/3730224/mutt"}, "edited": false, "score": 0, "creation_date": 1490132754, "post_id": 42937592, "comment_id": 72974463, "body": "Please provide more information about the action that pulls up the unreadable page as well as what is on the page.  In general standard browser functionality should never result in a page you can&#39;t read (with the exception of IE sometimes).  I&#39;m thinking that the page is being rendered in an unusual manner than a standard browser window."}, {"owner": {"reputation": 42014, "user_id": 2709090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/238c2b7cde2c817fc9a5a2b8eaa2ffad?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas Walpole", "link": "https://stackoverflow.com/users/2709090/thomas-walpole"}, "edited": false, "score": 0, "creation_date": 1490133913, "post_id": 42937592, "comment_id": 72974994, "body": "You should never get a Net::ReadTimeout - that would tend to imply that whatever you&#39;ve done has hung the browser/geckodriver/chromedriver/etc depending on what browser you&#39;re using.  What exactly does clicking the button do ?  Also, using <code>page.driver.browser.switch_to</code> is a bad smell, just use the Capybara provided window management methods."}, {"owner": {"reputation": 551, "user_id": 844645, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/95e55b1155026924f3f1263595e53ef8?s=128&d=identicon&r=PG", "display_name": "TangibleDream", "link": "https://stackoverflow.com/users/844645/tangibledream"}, "edited": false, "score": 0, "creation_date": 1490134468, "post_id": 42937592, "comment_id": 72975233, "body": "I&#39;m using Firefox. I select an item to purchase. A preview modal appears.  I approve the item for purchase. Then the purchase page loads, which I cannot access."}, {"owner": {"reputation": 957, "user_id": 604131, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/acde3f47ffe10bf9d823951fe5e8b284?s=128&d=identicon&r=PG", "display_name": "Mark Lapierre", "link": "https://stackoverflow.com/users/604131/mark-lapierre"}, "edited": false, "score": 1, "creation_date": 1490136430, "post_id": 42937592, "comment_id": 72976081, "body": "Does the purchase page load in an iframe? Can you share the html?"}, {"owner": {"reputation": 18005, "user_id": 2386774, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dea7da142cb7e85d5d5a8576e2625431?s=128&d=identicon&r=PG", "display_name": "JeffC", "link": "https://stackoverflow.com/users/2386774/jeffc"}, "edited": false, "score": 0, "creation_date": 1490152103, "post_id": 42937592, "comment_id": 72980599, "body": "Most payment pages contain an iframe that contains the section of the payment page where the credit card or other payment information goes. Do some googling on &quot;ruby selenium iframe&quot; and you&#39;ll find some solutions you can try."}, {"owner": {"reputation": 42014, "user_id": 2709090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/238c2b7cde2c817fc9a5a2b8eaa2ffad?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas Walpole", "link": "https://stackoverflow.com/users/2709090/thomas-walpole"}, "edited": false, "score": 0, "creation_date": 1490205855, "post_id": 42937592, "comment_id": 73013202, "body": "@TangibleDream When you say the &quot;purchase page loads&quot;, does it load in the current tab? does it open a new tab? It&#39;s unclear from your description why you&#39;re attempting to switch to multiple windows (and by doing that using driver specific methods Capybara can&#39;t track what you&#39;re doing, so it is very likely to cause consistency errors).  Maybe adding the full test code for what you&#39;re trying to do would provide us with more info."}, {"owner": {"reputation": 551, "user_id": 844645, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/95e55b1155026924f3f1263595e53ef8?s=128&d=identicon&r=PG", "display_name": "TangibleDream", "link": "https://stackoverflow.com/users/844645/tangibledream"}, "reply_to_user": {"reputation": 42014, "user_id": 2709090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/238c2b7cde2c817fc9a5a2b8eaa2ffad?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas Walpole", "link": "https://stackoverflow.com/users/2709090/thomas-walpole"}, "edited": false, "score": 0, "creation_date": 1490302570, "post_id": 42937592, "comment_id": 73065228, "body": "@ThomasWalpole I have isolated this by going to the purchase page directly from login.  An aspnetform loads an empty box, then a call goes to the database, this returns the items for purchase.   I updated my script/question for simplicity removing the switch.to.window commands."}, {"owner": {"reputation": 551, "user_id": 844645, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/95e55b1155026924f3f1263595e53ef8?s=128&d=identicon&r=PG", "display_name": "TangibleDream", "link": "https://stackoverflow.com/users/844645/tangibledream"}, "reply_to_user": {"reputation": 18005, "user_id": 2386774, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dea7da142cb7e85d5d5a8576e2625431?s=128&d=identicon&r=PG", "display_name": "JeffC", "link": "https://stackoverflow.com/users/2386774/jeffc"}, "edited": false, "score": 0, "creation_date": 1490303572, "post_id": 42937592, "comment_id": 73065771, "body": "@JeffC no iframe, an aspnetform though"}, {"owner": {"reputation": 42014, "user_id": 2709090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/238c2b7cde2c817fc9a5a2b8eaa2ffad?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas Walpole", "link": "https://stackoverflow.com/users/2709090/thomas-walpole"}, "edited": false, "score": 0, "creation_date": 1490306960, "post_id": 42937592, "comment_id": 73067455, "body": "@TangibleDream What is the stacktrace on the error, is the error being raised in the find or click method?  What does the browser show when this is happening?  What version of selenium and browser are you using? It should never return a Net::ReadTimeout unless the browser or geckodriver is crashing for some reason, or potentially if you are doing an <code>execute_script</code> that is opening a system modal."}, {"owner": {"reputation": 551, "user_id": 844645, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/95e55b1155026924f3f1263595e53ef8?s=128&d=identicon&r=PG", "display_name": "TangibleDream", "link": "https://stackoverflow.com/users/844645/tangibledream"}, "reply_to_user": {"reputation": 42014, "user_id": 2709090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/238c2b7cde2c817fc9a5a2b8eaa2ffad?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas Walpole", "link": "https://stackoverflow.com/users/2709090/thomas-walpole"}, "edited": false, "score": 0, "creation_date": 1490362830, "post_id": 42937592, "comment_id": 73091508, "body": "@ThomasWalpole it&#39;s happening at the find, I&#39;m just running what I pasted, all the monkey business is happening behind the scenes on the page itself.  I&#39;d love to find an abstract like before."}, {"owner": {"reputation": 551, "user_id": 844645, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/95e55b1155026924f3f1263595e53ef8?s=128&d=identicon&r=PG", "display_name": "TangibleDream", "link": "https://stackoverflow.com/users/844645/tangibledream"}, "reply_to_user": {"reputation": 42014, "user_id": 2709090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/238c2b7cde2c817fc9a5a2b8eaa2ffad?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas Walpole", "link": "https://stackoverflow.com/users/2709090/thomas-walpole"}, "edited": false, "score": 0, "creation_date": 1490362989, "post_id": 42937592, "comment_id": 73091619, "body": "@ThomasWalpole  <code>And I open the shopping thingy                  # features&#47;step_d efinitions&#47;test_1_sd.rb:1       Net::ReadTimeout (Net::ReadTimeout)       .&#47;features&#47;step_definitions&#47;test_1_sd.rb:6:in `&#47;^I ope n the shopping thingy$&#47;&#39;       features&#47;tools&#47;Tool06_direct_access_to_shopping_thingy.featu&zwnj;&#8203;re:5:in `And I o pen the shopping thingy&#39;</code>"}, {"owner": {"reputation": 551, "user_id": 844645, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/95e55b1155026924f3f1263595e53ef8?s=128&d=identicon&r=PG", "display_name": "TangibleDream", "link": "https://stackoverflow.com/users/844645/tangibledream"}, "edited": false, "score": 0, "creation_date": 1490363879, "post_id": 42937592, "comment_id": 73092210, "body": "So I found this dated entry about aspnetform <a href=\"http://stackoverflow.com/questions/4336867/asp-net-form-the-form-name-id-changes-to-aspnetform\" title=\"asp net form the form name id changes to aspnetform\">stackoverflow.com/questions/4336867/&hellip;</a>"}, {"owner": {"reputation": 42014, "user_id": 2709090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/238c2b7cde2c817fc9a5a2b8eaa2ffad?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas Walpole", "link": "https://stackoverflow.com/users/2709090/thomas-walpole"}, "edited": false, "score": 0, "creation_date": 1490373786, "post_id": 42937592, "comment_id": 73099139, "body": "@TangibleDream thats the cucumber error summary which shows which step the error occurred in, further back in the log I would hope there is an actual stacktrace that shows where the error was actually raised in the gem code.  Also you can output <code>page.html</code> to see what is actually on the page."}], "answers": [{"comments": [{"owner": {"reputation": 551, "user_id": 844645, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/95e55b1155026924f3f1263595e53ef8?s=128&d=identicon&r=PG", "display_name": "TangibleDream", "link": "https://stackoverflow.com/users/844645/tangibledream"}, "edited": false, "score": 0, "creation_date": 1490195910, "post_id": 42943508, "comment_id": 73006232, "body": "after adding the lauchy gem, it comes back with <code>Your Firefox profile cannot be loaded. It may be missing or inaccessible.</code> I still timeout.  What if I try to visit the page I&#39;m trying access?"}, {"owner": {"reputation": 1853, "user_id": 2501082, "user_type": "registered", "accept_rate": 20, "profile_image": "https://i.stack.imgur.com/qdJBQ.jpg?s=128&g=1", "display_name": "David Gross", "link": "https://stackoverflow.com/users/2501082/david-gross"}, "reply_to_user": {"reputation": 551, "user_id": 844645, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/95e55b1155026924f3f1263595e53ef8?s=128&d=identicon&r=PG", "display_name": "TangibleDream", "link": "https://stackoverflow.com/users/844645/tangibledream"}, "edited": false, "score": 0, "creation_date": 1490197629, "post_id": 42943508, "comment_id": 73007639, "body": "Hey @TangibleDream I just updated the answer with what I think would fix that error. You might get another error but it should run now."}], "tags": [], "owner": {"reputation": 1853, "user_id": 2501082, "user_type": "registered", "accept_rate": 20, "profile_image": "https://i.stack.imgur.com/qdJBQ.jpg?s=128&g=1", "display_name": "David Gross", "link": "https://stackoverflow.com/users/2501082/david-gross"}, "is_accepted": false, "score": 0, "last_activity_date": 1490197574, "last_edit_date": 1490197574, "creation_date": 1490160822, "answer_id": 42943508, "question_id": 42937592, "link": "https://stackoverflow.com/questions/42937592/how-do-i-resolve-a-readtimeout-when-it-is-the-happy-path/42943508#42943508", "title": "How do I resolve a readtimeout when it is the happy path?", "body": "<p>One way I would debug this is by putting save_and_open_page before and after xpath. My guess is that it can't find the xpath to click on and its timing out. </p>\n\n<pre><code>page.driver.browser.switch_to.window(page.driver.browser.window_handles.last)\npage.driver.browser.switch_to.window(page.driver.browser.window_handles.first)\nsave_and_open_page \nfind(:xpath, './/div[@class=\"blah active\"]/div/div/button[@class=\"btn btn-primary\"]').click\nsave_and_open_page \n</code></pre>\n\n<p>If this is not the case you can try and set the timeout to 90 seconds to see if it helps. </p>\n\n<pre><code># https://github.com/teamcapybara/capybara/issues/1305\nCapybara.register_driver :selenium do |app|\n  profile = Selenium::WebDriver::Firefox::Profile.new\n  client = Selenium::WebDriver::Remote::Http::Default.new\n  client.timeout = 90 # instead of the default 60\n  Capybara::Selenium::Driver.new(app, browser: :firefox, profile: profile, http_client: client)\nend\n</code></pre>\n\n<h1>Based off your Firefox error</h1>\n\n<ol>\n<li>visit <a href=\"https://ftp.mozilla.org/pub/utilities/profilemanager/1.0/\" rel=\"nofollow noreferrer\">https://ftp.mozilla.org/pub/utilities/profilemanager/1.0/</a>.</li>\n<li>download profilemanager.mac.dmg </li>\n<li>open up profile manager  </li>\n<li>select default or create a new profile manager  </li>\n<li>click on start firefox</li>\n<li>Error should be fixed now</li>\n</ol>\n"}], "owner": {"reputation": 551, "user_id": 844645, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/95e55b1155026924f3f1263595e53ef8?s=128&d=identicon&r=PG", "display_name": "TangibleDream", "link": "https://stackoverflow.com/users/844645/tangibledream"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 448, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1490301970, "creation_date": 1490128335, "last_edit_date": 1490301970, "question_id": 42937592, "link": "https://stackoverflow.com/questions/42937592/how-do-i-resolve-a-readtimeout-when-it-is-the-happy-path", "title": "How do I resolve a readtimeout when it is the happy path?", "body": "<p>Without a modal or alert popup. Pressing a button takes me to a page in such a way that selenium can no longer see the controls.</p>\n\n<p>I have tired do reacquire the page without success.</p>\n\n<pre><code>visit([purchase page])\nlogin\nsleep(10)\nfind(:xpath, './/div[@class=\"tab-pane active\"]/div/div/button[@class=\"btn btn-primary\"]').click\n\nNet::ReadTimeout (Net::ReadTimeout)\n</code></pre>\n\n<p>What I am fairly certain of is that is not not finding my element because I didn't generate a</p>\n\n<pre><code>ElementNotFound\n</code></pre>\n\n<p>My question is, what are the tools I want to try to get selenium to see the page I wish to manipulate?</p>\n"}, {"tags": ["ruby", "regex", "match"], "comments": [{"owner": {"reputation": 481662, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 0, "creation_date": 1490128363, "post_id": 42937576, "comment_id": 72972157, "body": "Do you expect end of string after the second <code>\\d</code> (<code>&#47;\\d:\\d\\z&#47;</code>)? Or match the entire string like <code>&#47;\\A\\d:\\d\\z&#47;</code>?"}, {"owner": {"reputation": 9030, "user_id": 5101476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JCQrl.jpg?s=128&g=1", "display_name": "ice\u30c4", "link": "https://stackoverflow.com/users/5101476/ice%e3%83%84"}, "edited": false, "score": 1, "creation_date": 1490128444, "post_id": 42937576, "comment_id": 72972205, "body": "Please proof-read your questions before posting and remove any irb-prompts."}, {"owner": {"user_type": "does_not_exist", "display_name": "user557597"}, "edited": false, "score": 0, "creation_date": 1490128678, "post_id": 42937576, "comment_id": 72972340, "body": "<code>but anything else following a number should not match</code> If you&#39;re trying to exclude strings with anything <i>other</i> than what is matched in a regex, it has to have anchors <code>^</code> &lt;your regex&gt; <code>$</code>. Otherwise, you have to define your problem better."}, {"owner": {"reputation": 16802, "user_id": 1235929, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/9f460ae7deb6fa19034c810a53b9fbac?s=128&d=identicon&r=PG", "display_name": "Dave", "link": "https://stackoverflow.com/users/1235929/dave"}, "reply_to_user": {"reputation": 481662, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 0, "creation_date": 1490129276, "post_id": 42937576, "comment_id": 72972682, "body": "Hey @Wiktor, It doesn&#39;t have to be the end of the string after the second number.  I would expect this pattern to match as well, &quot;1:23:4556&quot; since every instance of a number is followed by either anoterh number or the &quot;:&quot;."}, {"owner": {"reputation": 481662, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 0, "creation_date": 1490129319, "post_id": 42937576, "comment_id": 72972707, "body": "Does it mean you want to match a string that only consists of series of colon-separated digits? Like <code>&#47;\\A\\d+(?::\\d+)*\\z&#47;</code>? Or do you want to negate the <code>-</code> + <code>digit</code> after the <code>\\d:\\d</code> pattern like <code>&#47;\\d:\\d(?!-\\d)&#47;</code>? Sorry, your question is very unclear."}, {"owner": {"reputation": 16802, "user_id": 1235929, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/9f460ae7deb6fa19034c810a53b9fbac?s=128&d=identicon&r=PG", "display_name": "Dave", "link": "https://stackoverflow.com/users/1235929/dave"}, "edited": false, "score": 0, "creation_date": 1490129866, "post_id": 42937576, "comment_id": 72972994, "body": "It would be the first one, /\\A\\d+(?::\\d+)*\\z/, with the exception of the fact that the string can contain other characters, so &quot;CR2:45&quot; is legal by my (vague) definition, its just that if anything follows a number, it better be another number or the &quot;:&quot; (end of line is acceptable as well)."}, {"owner": {"reputation": 481662, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 0, "creation_date": 1490130538, "post_id": 42937576, "comment_id": 72973358, "body": "Just an idea - what about <code>&#47;\\A(?!.*\\d[^\\d:])&#47;m</code>? Or just <code>&#47;\\d[^\\d:]&#47;</code> to test if there is a digit followed with any char but digit or <code>:</code> (if no match, it is OK, else, not OK)?"}, {"owner": {"reputation": 16802, "user_id": 1235929, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/9f460ae7deb6fa19034c810a53b9fbac?s=128&d=identicon&r=PG", "display_name": "Dave", "link": "https://stackoverflow.com/users/1235929/dave"}, "edited": false, "score": 0, "creation_date": 1490131682, "post_id": 42937576, "comment_id": 72973905, "body": "That last one is looking pretty good.  It seems to match things that are all letters (e.g. &quot;NA&quot;), but I think I can easily get around that by just checking if the string contains numbers and then applying teh regexp."}, {"owner": {"reputation": 481662, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 0, "creation_date": 1490131884, "post_id": 42937576, "comment_id": 72974020, "body": "Could you please explain the requirements in plain English? I do not know how to answer your question. Btw, I removed the previous comment with <code>&#47;\\A[[:alnum:]]+(?::[[:alnum:]]+)*\\z&#47;</code>, I guess you meant that one in the above comment. To make sure there is at least 1 digit, you may use a lookahead: <code>&#47;\\A(?=\\D*\\d)[[:alnum:]]+(?::[[:alnum:]]+)*\\z&#47;</code>. Please check <a href=\"http://rubular.com/r/dxHglkGMSm\" rel=\"nofollow noreferrer\">this regex demo</a> and let know if I can post it as an answer."}, {"owner": {"reputation": 481662, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 0, "creation_date": 1490132084, "post_id": 42937576, "comment_id": 72974116, "body": "Please check <a href=\"http://rubular.com/r/dxHglkGMSm\" rel=\"nofollow noreferrer\">rubular.com/r/dxHglkGMSm</a> and let know if I can post it as an answer."}, {"owner": {"reputation": 481662, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "reply_to_user": {"reputation": 16802, "user_id": 1235929, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/9f460ae7deb6fa19034c810a53b9fbac?s=128&d=identicon&r=PG", "display_name": "Dave", "link": "https://stackoverflow.com/users/1235929/dave"}, "edited": false, "score": 0, "creation_date": 1490133175, "post_id": 42937576, "comment_id": 72974663, "body": "Let us <a href=\"http://chat.stackoverflow.com/rooms/138680/discussion-between-wiktor-stribizew-and-dave\">continue this discussion in chat</a>."}, {"owner": {"reputation": 16802, "user_id": 1235929, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/9f460ae7deb6fa19034c810a53b9fbac?s=128&d=identicon&r=PG", "display_name": "Dave", "link": "https://stackoverflow.com/users/1235929/dave"}, "edited": false, "score": 0, "creation_date": 1490133246, "post_id": 42937576, "comment_id": 72974689, "body": "Hey that rubular link you posted is a winner."}], "answers": [{"tags": [], "owner": {"reputation": 481662, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "is_accepted": true, "score": 0, "last_activity_date": 1506269449, "last_edit_date": 1506269449, "creation_date": 1490133547, "answer_id": 42938913, "question_id": 42937576, "link": "https://stackoverflow.com/questions/42937576/how-to-match-a-specific-character-following-a-number-in-a-string/42938913#42938913", "title": "How to match a specific character following a number in a string", "body": "<p>It appears you need to match a string that presents a colon-separated alphanumeric strings that must contain at leat one digit.</p>\n\n<p>You need to use</p>\n\n<pre><code>/\\A(?=\\D*\\d)[[:alnum:]]+(?::[[:alnum:]]+)*\\z/\n</code></pre>\n\n<p>See the <a href=\"http://rubular.com/r/dxHglkGMSm\" rel=\"nofollow noreferrer\">Rubular demo</a> (adapted for a multiline test string)</p>\n\n<p><strong>Details</strong>:</p>\n\n<ul>\n<li><code>\\A</code> - start of  a string anchor</li>\n<li><code>(?=\\D*\\d)</code> - a positive lookahead (<code>(?=...)</code>) requiring a digit (<code>\\d</code>) after 0+ chars other than a digit (<code>\\D*</code>)</li>\n<li><code>[[:alnum:]]+</code> - 1 or more letters or digits</li>\n<li><code>(?::[[:alnum:]]+)*</code> -  zero or more sequences of: \n\n<ul>\n<li><code>:</code> - a colon</li>\n<li><code>[[:alnum:]]+</code> - 1 or more letters/digits</li>\n</ul></li>\n<li><code>\\z</code> - end of string.</li>\n</ul>\n"}], "owner": {"reputation": 16802, "user_id": 1235929, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/9f460ae7deb6fa19034c810a53b9fbac?s=128&d=identicon&r=PG", "display_name": "Dave", "link": "https://stackoverflow.com/users/1235929/dave"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 241, "favorite_count": 0, "accepted_answer_id": 42938913, "answer_count": 1, "score": -1, "last_activity_date": 1506269449, "creation_date": 1490128255, "last_edit_date": 1490136550, "question_id": 42937576, "link": "https://stackoverflow.com/questions/42937576/how-to-match-a-specific-character-following-a-number-in-a-string", "title": "How to match a specific character following a number in a string", "body": "<p>I'm using Ruby 2.4.  How, in a regular expression, do I specify that I only want to match a string in which a number is followed by a specific character (or another number), but anything else following a number should not match?  That is, if my special character is a \":\", this should match:</p>\n\n<pre><code>\"1:9\"\n</code></pre>\n\n<p>but this should not:</p>\n\n<pre><code>\"1:9-2\"\n</code></pre>\n\n<p>Because in the string above, there is an instance of a \"-\" that follows the number \"9\".  I thought I had the right regexp, but this is returning true for the above two cases:</p>\n\n<pre><code>2.4.0 :001 &gt; ab = \"1:3\"\n =&gt; \"1:3\"\n2.4.0 :002 &gt; ab =~ /\\d:\\d/\n =&gt; 0\n2.4.0 :003 &gt; ab = \"1:3-4\"\n =&gt; \"1:3-4\"\n2.4.0 :004 &gt; ab =~ /\\d:\\d/\n =&gt; 0\n</code></pre>\n"}, {"tags": ["javascript", "ruby", "selenium-webdriver", "watir-webdriver", "browser-automation"], "answers": [{"tags": [], "owner": {"reputation": 3480, "user_id": 4072371, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/112e615d8c60908294e30848d9556186?s=128&d=identicon&r=PG", "display_name": "titusfortner", "link": "https://stackoverflow.com/users/4072371/titusfortner"}, "is_accepted": false, "score": 0, "last_activity_date": 1490134825, "creation_date": 1490134825, "answer_id": 42939240, "question_id": 42937503, "link": "https://stackoverflow.com/questions/42937503/automated-test-cannot-set-input-due-to-javascript/42939240#42939240", "title": "Automated test cannot set input due to Javascript", "body": "<p>When necessary, fight JavaScript with JavaScript:</p>\n\n<p><code>browser.execute_script(\"document.getElementById('rate').setAttribute('value', '12345')\")</code></p>\n"}], "owner": {"reputation": 31, "user_id": 3224193, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9d6d8f4e1ee8374ce572e49d177924c6?s=128&d=identicon&r=PG&f=1", "display_name": "user3224193", "link": "https://stackoverflow.com/users/3224193/user3224193"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 56, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1490134825, "creation_date": 1490127983, "question_id": 42937503, "link": "https://stackoverflow.com/questions/42937503/automated-test-cannot-set-input-due-to-javascript", "title": "Automated test cannot set input due to Javascript", "body": "<p>I am writing automation using Ruby built on a framework of Selenium, Watir and Cucumber.  Most recently, one of my tests began to fail due to a change in a text field, specifically, a Javascript call occurs upon interaction with that field that limits the inputs to numeric KeyCodes, with some allowances for decimals, and pasting.  When this change went into effect, inputs that I attempted to enter were no longer accepted with the exception of \".\".  I have attempted converting to numerical inputs (to_i and to_f), as well as alternate means of setting the value (see the following):</p>\n\n<pre><code>browser.text_field(:id, \"rate\").set(val)\n</code></pre>\n\n<p>or</p>\n\n<pre><code>browser.text_field(:id, \"rate\").value=(val)\n</code></pre>\n\n<p>or</p>\n\n<pre><code>browser.text_field(:id, \"rate\").send_keys :numpad1\n</code></pre>\n\n<p>In all these cases, nothing appears in the input box except the decimal.  I cannot figure out how to deal with this Javascript.  My question is 1)  Has anyone run across and fixed something similar to this, and barring that 2)  How can I temporarily turn off Javascript programmatically to enter values, then turn it back on so as to be able to retain the integrity of the rest of the environment?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "activeadmin"], "comments": [{"owner": {"reputation": 1853, "user_id": 2501082, "user_type": "registered", "accept_rate": 20, "profile_image": "https://i.stack.imgur.com/qdJBQ.jpg?s=128&g=1", "display_name": "David Gross", "link": "https://stackoverflow.com/users/2501082/david-gross"}, "edited": false, "score": 0, "creation_date": 1490161828, "post_id": 42937004, "comment_id": 72983612, "body": "The code looks ok. I&#39;m not sure I have seen a panel nested inside a column before but I don&#39;t think that&#39;s an issue. How many records is it rendering is it more than 20?"}, {"owner": {"reputation": 41, "user_id": 4858541, "user_type": "registered", "accept_rate": 0, "profile_image": "https://lh5.googleusercontent.com/-DdrD7f1CGjk/AAAAAAAAAAI/AAAAAAAAAPM/fcVaDasZicA/photo.jpg?sz=128", "display_name": "Bradley Farquhar", "link": "https://stackoverflow.com/users/4858541/bradley-farquhar"}, "reply_to_user": {"reputation": 1853, "user_id": 2501082, "user_type": "registered", "accept_rate": 20, "profile_image": "https://i.stack.imgur.com/qdJBQ.jpg?s=128&g=1", "display_name": "David Gross", "link": "https://stackoverflow.com/users/2501082/david-gross"}, "edited": false, "score": 0, "creation_date": 1490188491, "post_id": 42937004, "comment_id": 73000227, "body": "Yes, the code works and gives me all the events. However, I want only future events to be shown. So if the event date was yesterday or in the past, I don&#39;t want it to show."}], "answers": [{"comments": [{"owner": {"reputation": 41, "user_id": 4858541, "user_type": "registered", "accept_rate": 0, "profile_image": "https://lh5.googleusercontent.com/-DdrD7f1CGjk/AAAAAAAAAAI/AAAAAAAAAPM/fcVaDasZicA/photo.jpg?sz=128", "display_name": "Bradley Farquhar", "link": "https://stackoverflow.com/users/4858541/bradley-farquhar"}, "edited": false, "score": 0, "creation_date": 1490207160, "post_id": 42953294, "comment_id": 73014082, "body": "Not sure hope to implement that code. I put it under ActiveAdmin.register_page &quot;Dashboard&quot; do however I can&#39;t seem to get it to work."}, {"owner": {"reputation": 1853, "user_id": 2501082, "user_type": "registered", "accept_rate": 20, "profile_image": "https://i.stack.imgur.com/qdJBQ.jpg?s=128&g=1", "display_name": "David Gross", "link": "https://stackoverflow.com/users/2501082/david-gross"}, "reply_to_user": {"reputation": 41, "user_id": 4858541, "user_type": "registered", "accept_rate": 0, "profile_image": "https://lh5.googleusercontent.com/-DdrD7f1CGjk/AAAAAAAAAAI/AAAAAAAAAPM/fcVaDasZicA/photo.jpg?sz=128", "display_name": "Bradley Farquhar", "link": "https://stackoverflow.com/users/4858541/bradley-farquhar"}, "edited": false, "score": 0, "creation_date": 1490211104, "post_id": 42953294, "comment_id": 73016255, "body": "scope :future should be in the EventDate model."}], "tags": [], "owner": {"reputation": 1853, "user_id": 2501082, "user_type": "registered", "accept_rate": 20, "profile_image": "https://i.stack.imgur.com/qdJBQ.jpg?s=128&g=1", "display_name": "David Gross", "link": "https://stackoverflow.com/users/2501082/david-gross"}, "is_accepted": false, "score": 1, "last_activity_date": 1490210985, "last_edit_date": 1490210985, "creation_date": 1490189880, "answer_id": 42953294, "question_id": 42937004, "link": "https://stackoverflow.com/questions/42937004/on-activeadmin-dashboard-trying-to-show-only-events-in-the-future/42953294#42953294", "title": "On activeadmin dashboard, trying to show only events in the future", "body": "<p>You can use arel_table to get a greater than or eq to Time.zone.now query. </p>\n\n<pre><code>class EventDate &gt; ActiveRecord::Base\n  scope :future, -&gt; { where(arel_table[:event_date].gteq(Time.zone.now)) }\n  # another way of doing it  \n  scope :future, -&gt; { where(\"event_date &gt;= ?\", Time.zone.now) } \nend \n\n# active admin \n\ntable_for EventDate.future.limit(20), sortable: true do\n  column :event_date\n\n  column \"Event Name\" do |event_date|\n    event_date.event_location.event.name\n  end   \n\n  column \"Agency Id\" do |event_date|\n    event_date.event_location.event.agency_id\n  end             \nend\n\n\n# Should give this query \nEventDate Load (0.7ms)  SELECT \"event_dates\".* FROM \"event_dates\" WHERE \"event_dates\".\"event_date\" &gt;= '2017-03-22 13:39:38.427240'\n</code></pre>\n"}], "owner": {"reputation": 41, "user_id": 4858541, "user_type": "registered", "accept_rate": 0, "profile_image": "https://lh5.googleusercontent.com/-DdrD7f1CGjk/AAAAAAAAAAI/AAAAAAAAAPM/fcVaDasZicA/photo.jpg?sz=128", "display_name": "Bradley Farquhar", "link": "https://stackoverflow.com/users/4858541/bradley-farquhar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 118, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1490210985, "creation_date": 1490126219, "question_id": 42937004, "link": "https://stackoverflow.com/questions/42937004/on-activeadmin-dashboard-trying-to-show-only-events-in-the-future", "title": "On activeadmin dashboard, trying to show only events in the future", "body": "<p>On Activeadmin I have an events_date table. On the dashboard I am trying to show only upcoming event dates. I am having trouble figuring out how to do this. This is the code I have so far: </p>\n\n<pre><code>     column do\n       panel \"Upcoming Events\" do\n         table_for EventDate.order(\"event_date asc\").limit(20), sortable: true do\n           column :event_date\n\n           column \"Event Name\" do |event_date|\n                     event_date.event_location.event.name\n                   end   \n           column \"Agency Id\" do |event_date|\n                     event_date.event_location.event.agency_id\n                   end             \n           end\n         end\n       end\n     end\n</code></pre>\n\n<p>As you would guess this gives me all my event dates. How can I get it to only show me dates in the future from today?</p>\n"}, {"tags": ["arrays", "ruby"], "comments": [{"owner": {"reputation": 7245, "user_id": 877581, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/49b8be0967d53a076e6e76a5ee0533ab?s=128&d=identicon&r=PG&f=1", "display_name": "mkk", "link": "https://stackoverflow.com/users/877581/mkk"}, "edited": false, "score": 0, "creation_date": 1490124813, "post_id": 42936362, "comment_id": 72970043, "body": "@DaveNewton I&#39;ve updated the question to explicitly state what I expect"}, {"owner": {"reputation": 152277, "user_id": 438992, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/QouOz.jpg?s=128&g=1", "display_name": "Dave Newton", "link": "https://stackoverflow.com/users/438992/dave-newton"}, "edited": false, "score": 1, "creation_date": 1490124888, "post_id": 42936362, "comment_id": 72970094, "body": "For hashes it would explicitly <i>not</i> be consistent since there&#39;s well-defined behavior on receiving a hash. I disagree with your <code>nil</code> &quot;consistency&quot; argument, but that&#39;s little more than opinion."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1490127167, "post_id": 42936362, "comment_id": 72971435, "body": "<code>Array([])</code> and <code>Array({})</code> exhibit the same behaviour. They&#39;re both array-esque containers."}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1490136814, "post_id": 42936362, "comment_id": 72976215, "body": "Be very careful assuming you found a bug in a core class in any language. <a href=\"http://catb.org/esr/faqs/smart-questions.html#idm46227256017920\" rel=\"nofollow noreferrer\">catb.org/esr/faqs/smart-questions.html#idm46227256017920</a> will help you."}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 1, "creation_date": 1490137086, "post_id": 42936362, "comment_id": 72976302, "body": "I don&#39;t think &quot;inconsequential&quot; means what you think it does."}], "answers": [{"comments": [{"owner": {"reputation": 20407, "user_id": 1017941, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/yocPw.jpg?s=128&g=1", "display_name": "Hauleth", "link": "https://stackoverflow.com/users/1017941/hauleth"}, "edited": false, "score": 0, "creation_date": 1490142778, "post_id": 42936570, "comment_id": 72978013, "body": "It would be worth to mention how to achieve what OP wanted, and it can be done by clever usage of splat operator <code>[*value]</code> will always return array containing <code>value</code> or <code>value</code> if it is already an array."}], "tags": [], "owner": {"reputation": 152277, "user_id": 438992, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/QouOz.jpg?s=128&g=1", "display_name": "Dave Newton", "link": "https://stackoverflow.com/users/438992/dave-newton"}, "is_accepted": false, "score": 5, "last_activity_date": 1490125246, "last_edit_date": 1490125246, "creation_date": 1490124793, "answer_id": 42936570, "question_id": 42936362, "link": "https://stackoverflow.com/questions/42936362/array-method-inconsistent-behaviour/42936570#42936570", "title": "Array method inconsistent behaviour", "body": "<p>For hashes the behavior is well-defined: the hash is broken up into key/value pairs, each pair in a \"sub\"-array. An empty hash has no key/value pairs, so it's an empty array. Little else makes sense; special-casing for an empty object would break the principle of least surprise.</p>\n\n<p>For <code>nil</code> you could argue either way. Since <code>nil</code> isn't anything IMO an empty array makes sense. </p>\n\n<p>Ultimately the answer is because that's what <code>.to_ary</code> and <code>.to_a</code> return. For <code>nil</code> I'd find an empty array more <code>nil</code>-y than an array with a single <code>nil</code> in it. For hashes I think it must be consistent with how non-empty hashes are converted to arrays.</p>\n"}, {"tags": [], "owner": {"reputation": 4150, "user_id": 7470620, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/49f3026fe13841e41d1805178eed9a3c?s=128&d=identicon&r=PG", "display_name": "eiko", "link": "https://stackoverflow.com/users/7470620/eiko"}, "is_accepted": false, "score": 2, "last_activity_date": 1490126849, "creation_date": 1490126849, "answer_id": 42937170, "question_id": 42936362, "link": "https://stackoverflow.com/questions/42936362/array-method-inconsistent-behaviour/42937170#42937170", "title": "Array method inconsistent behaviour", "body": "<p>The function Array(x) tries to convert x to an array using the following logic:</p>\n\n<ol>\n<li>Try to convert it implicitly using x.to_ary</li>\n<li>Try to convert it explicitly using x.to_a</li>\n<li>Convert it by wrapping it in an array, ie [x]</li>\n</ol>\n\n<p>So individual objects dictate the logic for how they are converted to arrays. The reason <code>Array('')</code> is <code>['']</code> instead of <code>[]</code> is that strings have no <code>to_ary</code> or <code>to_a</code> method, as of ruby 1.9. I believe this change was made because there is no canonical way to convert a string to an array. Do you want it split up by line, by characters? etc.</p>\n"}], "owner": {"reputation": 7245, "user_id": 877581, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/49b8be0967d53a076e6e76a5ee0533ab?s=128&d=identicon&r=PG&f=1", "display_name": "mkk", "link": "https://stackoverflow.com/users/877581/mkk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 52, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1490306379, "creation_date": 1490124166, "last_edit_date": 1490306379, "question_id": 42936362, "link": "https://stackoverflow.com/questions/42936362/array-method-inconsistent-behaviour", "title": "Array method inconsistent behaviour", "body": "<p>I encountered weird behaviour of the Array method and I wonder if there is any reason for it? It looks like a bug in Ruby to me:</p>\n\n<pre><code>Array(1)\n[1]\nArray('')\n[\"\"]\nArray({})\n[] # ???\nArray(nil)\n[] # ???\n</code></pre>\n\n<p>when I passed <code>nil</code> or <code>{}</code> to Array, I expected to get an array with one element,  instead, I got an empty Array. Note that when I passed an empty string, it correctly (in my opinion) returns an array with one element. Could anyone explain the logic behind this behaviour? </p>\n\n<p>I expect:</p>\n\n<pre><code>Array(nil) # =&gt; [nil]\nArray({})  # =&gt; [{}]\n</code></pre>\n\n<p>which would be consistent with:</p>\n\n<pre><code>Array('')  # =&gt; ['']\n</code></pre>\n\n<p>Or another reasonable behaviour would be:</p>\n\n<pre><code>Array('')  # =&gt; []\n</code></pre>\n\n<p>which would be 'consistent' with:</p>\n\n<pre><code>Array(nil) # =&gt; []\nArray({})  # =&gt; []\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 411, "user_id": 3957549, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4d1d87d87a41cff69490149274755452?s=128&d=identicon&r=PG", "display_name": "Sebastian Muszy\u0144ski", "link": "https://stackoverflow.com/users/3957549/sebastian-muszy%c5%84ski"}, "edited": false, "score": 0, "creation_date": 1490122174, "post_id": 42935682, "comment_id": 72968464, "body": "It looks like you are missing <code>@</code> in front of <code>current_cart</code> when trying to save: <code>current_cart.save</code>"}, {"owner": {"reputation": 685, "user_id": 7458849, "user_type": "registered", "accept_rate": 45, "profile_image": "https://i.stack.imgur.com/89kDb.jpg?s=128&g=1", "display_name": "Theopap", "link": "https://stackoverflow.com/users/7458849/theopap"}, "reply_to_user": {"reputation": 411, "user_id": 3957549, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4d1d87d87a41cff69490149274755452?s=128&d=identicon&r=PG", "display_name": "Sebastian Muszy\u0144ski", "link": "https://stackoverflow.com/users/3957549/sebastian-muszy%c5%84ski"}, "edited": false, "score": 0, "creation_date": 1490122284, "post_id": 42935682, "comment_id": 72968548, "body": "Thanks for the reply @ Sebastian Muszy\u0144ski! I tried this previously but whithout any result."}, {"owner": {"reputation": 411, "user_id": 3957549, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4d1d87d87a41cff69490149274755452?s=128&d=identicon&r=PG", "display_name": "Sebastian Muszy\u0144ski", "link": "https://stackoverflow.com/users/3957549/sebastian-muszy%c5%84ski"}, "edited": false, "score": 0, "creation_date": 1490122359, "post_id": 42935682, "comment_id": 72968595, "body": "Fix it also in the previous line: <code>current_cart.amount</code>"}], "answers": [{"comments": [{"owner": {"reputation": 685, "user_id": 7458849, "user_type": "registered", "accept_rate": 45, "profile_image": "https://i.stack.imgur.com/89kDb.jpg?s=128&g=1", "display_name": "Theopap", "link": "https://stackoverflow.com/users/7458849/theopap"}, "edited": false, "score": 0, "creation_date": 1490122540, "post_id": 42935772, "comment_id": 72968715, "body": "The original code has the @. I must have deleted it by mistake when copy and paste here. Thus, I already tried this previously but whithout any result."}], "tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user121489"}, "is_accepted": false, "score": 0, "last_activity_date": 1490122214, "creation_date": 1490122214, "answer_id": 42935772, "question_id": 42935682, "link": "https://stackoverflow.com/questions/42935682/update-and-save-value-in-rails/42935772#42935772", "title": "Update and save value in rails", "body": "<p>Update your else clause to access the current_cart in a consistent manner.</p>\n\n<pre><code>else \n    @current_cart = Cart.find(current_cart.id)\n    @current_cart.amount = @current_cart.amount - @coupon.amount\n    @current_cart.save\n    redirect_to :back\n    flash[:notice] = \"Coupon is Valid!\"\nend\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 685, "user_id": 7458849, "user_type": "registered", "accept_rate": 45, "profile_image": "https://i.stack.imgur.com/89kDb.jpg?s=128&g=1", "display_name": "Theopap", "link": "https://stackoverflow.com/users/7458849/theopap"}, "edited": false, "score": 0, "creation_date": 1490122520, "post_id": 42935782, "comment_id": 72968702, "body": "The original code has the @. I must have deleted it by mistake when copy and paste here. Thus, I already tried this previously but whithout any result."}, {"owner": {"reputation": 2116, "user_id": 6780663, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9207ba3b9163582570078b687f9b2792?s=128&d=identicon&r=PG&f=1", "display_name": "Alejandro Montilla", "link": "https://stackoverflow.com/users/6780663/alejandro-montilla"}, "reply_to_user": {"reputation": 685, "user_id": 7458849, "user_type": "registered", "accept_rate": 45, "profile_image": "https://i.stack.imgur.com/89kDb.jpg?s=128&g=1", "display_name": "Theopap", "link": "https://stackoverflow.com/users/7458849/theopap"}, "edited": false, "score": 0, "creation_date": 1490122692, "post_id": 42935782, "comment_id": 72968791, "body": "<code>Cart.find(current_cart.id)</code> brings the correct value??"}, {"owner": {"reputation": 2116, "user_id": 6780663, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9207ba3b9163582570078b687f9b2792?s=128&d=identicon&r=PG&f=1", "display_name": "Alejandro Montilla", "link": "https://stackoverflow.com/users/6780663/alejandro-montilla"}, "reply_to_user": {"reputation": 685, "user_id": 7458849, "user_type": "registered", "accept_rate": 45, "profile_image": "https://i.stack.imgur.com/89kDb.jpg?s=128&g=1", "display_name": "Theopap", "link": "https://stackoverflow.com/users/7458849/theopap"}, "edited": false, "score": 0, "creation_date": 1490123174, "post_id": 42935782, "comment_id": 72969107, "body": "could you use <code>byebug</code>? just before the <code>.save</code>??"}], "tags": [], "owner": {"reputation": 2116, "user_id": 6780663, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9207ba3b9163582570078b687f9b2792?s=128&d=identicon&r=PG&f=1", "display_name": "Alejandro Montilla", "link": "https://stackoverflow.com/users/6780663/alejandro-montilla"}, "is_accepted": false, "score": 0, "last_activity_date": 1490122243, "creation_date": 1490122243, "answer_id": 42935782, "question_id": 42935682, "link": "https://stackoverflow.com/questions/42935682/update-and-save-value-in-rails/42935782#42935782", "title": "Update and save value in rails", "body": "<p>It looks like</p>\n\n<pre><code>@current_cart.amount = current_cart.amount - @coupon.amount\ncurrent_cart.save\n</code></pre>\n\n<p>Is missing the <code>@</code>.</p>\n\n<p>Try with:</p>\n\n<pre><code>@current_cart.amount = @current_cart.amount - @coupon.amount\n@current_cart.save\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 4150, "user_id": 7470620, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/49f3026fe13841e41d1805178eed9a3c?s=128&d=identicon&r=PG", "display_name": "eiko", "link": "https://stackoverflow.com/users/7470620/eiko"}, "reply_to_user": {"reputation": 685, "user_id": 7458849, "user_type": "registered", "accept_rate": 45, "profile_image": "https://i.stack.imgur.com/89kDb.jpg?s=128&g=1", "display_name": "Theopap", "link": "https://stackoverflow.com/users/7458849/theopap"}, "edited": false, "score": 0, "creation_date": 1490124208, "post_id": 42935979, "comment_id": 72969709, "body": "@Theopap glad to hear it! i also updated my answer with a suggestion on how to handle itemized tax rates."}], "tags": [], "owner": {"reputation": 4150, "user_id": 7470620, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/49f3026fe13841e41d1805178eed9a3c?s=128&d=identicon&r=PG", "display_name": "eiko", "link": "https://stackoverflow.com/users/7470620/eiko"}, "is_accepted": true, "score": 1, "last_activity_date": 1490124162, "last_edit_date": 1490124162, "creation_date": 1490122823, "answer_id": 42935979, "question_id": 42935682, "link": "https://stackoverflow.com/questions/42935682/update-and-save-value-in-rails/42935979#42935979", "title": "Update and save value in rails", "body": "<p>As you can see here:</p>\n\n<pre><code>def amount\n  line_items.to_a.sum { |item| item.total_price } + tax_rate + fee\nend\n</code></pre>\n\n<p><code>amount</code> is not a variable, but a method which adds together the prices of each item in the cart. You cannot change <code>amount</code>. The most straight-forward solution would be to add a new <code>discount</code> row to your Cart table:</p>\n\n<pre><code>class AddDiscountToCarts &lt; ActiveRecord::Migration\n  def change\n    add_column :carts, :discount, :decimal, default: 0\n  end\nend\n</code></pre>\n\n<p>Then add it to your <code>amount</code> method:</p>\n\n<pre><code>def amount\n  line_items.to_a.sum { |item| item.total_price } + tax_rate + fee - discount\nend\n</code></pre>\n\n<p>And in your controller:</p>\n\n<pre><code>def redeem\n  @coupon = Coupon.find_by_discount_code(params[:discount_code])\n  if @coupon.blank?\n    redirect_to :back\n    flash[:notice] = \"Coupon is Invalid!\"\n  else \n    @current_cart = Cart.find(current_cart.id)\n    @current_cart.discount = @coupon.amount\n    @current_cart.save\n    redirect_to :back\n    flash[:notice] = \"Coupon is Valid!\"\n  end\nend\n</code></pre>\n\n<p><strong>Be warned:</strong> this code will still add full tax to your cart, even if the discount brings it down to 0. This is because your tax_rate method recalculates the amount using line items. You should never calculate your price multiple times because it'll introduce bugs and cost you extra work. Generally, tax rates are determined by location and applied to the total purchase after discounts. For some reason, you have itemized tax rates, which complicates things. But you could theoretically calculate a weighted average tax rate:</p>\n\n<pre><code>def tax_rate\n  total_cost = line_items.inject(0) { |cost, item| cost += item.total_price } \n  weighted_rate = line_items.inject(0) do |rate, item|\n    rate += (item.total_price * item.product.tax_rate.rate) / total_cost\n  end\n  return weighted_rate\nend  \n</code></pre>\n\n<p>And then use it in your <code>amount</code> function this way:</p>\n\n<pre><code>def amount\n  (line_items.to_a.sum { |item| item.total_price } - discount + fee) * tax_rate\nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 17065, "user_id": 175981, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/b357ab54946a2be4d19c8a9aab2a09d6?s=128&d=identicon&r=PG", "display_name": "Chris Peters", "link": "https://stackoverflow.com/users/175981/chris-peters"}, "is_accepted": false, "score": 1, "last_activity_date": 1490123503, "last_edit_date": 1490123503, "creation_date": 1490123021, "answer_id": 42936048, "question_id": 42935682, "link": "https://stackoverflow.com/questions/42935682/update-and-save-value-in-rails/42936048#42936048", "title": "Update and save value in rails", "body": "<p>Your problem likely lies in these two lines:</p>\n\n<pre><code>@current_cart.amount = @current_cart.amount - @coupon.amount\n@current_cart.save\n</code></pre>\n\n<p>Because you're not responding to the result of <code>#save</code> in any way, that can silently fail without giving any feedback to the user.</p>\n\n<p>You have two options.</p>\n\n<p>1) Cause it to raise an exception on fail:</p>\n\n<pre><code>@current_cart.save!\n</code></pre>\n\n<p>2) Add another layer of feedback if <code>#save</code> fails.</p>\n\n<pre><code>@current_cart.amount = @current_cart.amount - @coupon.amount\n\nflash[:notice] =\n  if @current_cart.save\n    \"Coupon is Valid!\"\n  else\n    \"Something went wrong.\"\n  end\n\nredirect_to :back\n</code></pre>\n\n<p>If you need to debug what's wrong further, a simple thing to do is log any errors from <code>#save</code> to the console:</p>\n\n<pre><code>if @current_cart.save\n  \"Coupon is Valid!\"\nelse\n  puts @current_cart.errors.to_json\n  \"Something went wrong.\"\nend\n</code></pre>\n\n<p>Bonus tip: I'm trying to make sense of why you have a <code>current_cart</code> method and are doing the same work that it does to set a <code>@current_cart</code> instance variable. You should just be accessing that object via the <code>current_cart</code> method.</p>\n\n<p>Because it's defined as a <code>helper_method</code>, you should be able to access that in the view without needing to set an instance variable as well.</p>\n\n<p>If you cache the result of <code>current_cart</code> in an instance variable, then you can call it as many times as you want within the controller and view without any performance penalty:</p>\n\n<pre><code>def current_cart \n  @current_cart ||= Cart.find(session[:cart_id])\nrescue ActiveRecord::RecordNotFound \n  @current_cart = Cart.create! # You probably want this to throw an exception if it fails\n  session[:cart_id] = cart.id\n  @current_cart\nend\n\nhelper_method :current_cart\n</code></pre>\n"}], "owner": {"reputation": 685, "user_id": 7458849, "user_type": "registered", "accept_rate": 45, "profile_image": "https://i.stack.imgur.com/89kDb.jpg?s=128&g=1", "display_name": "Theopap", "link": "https://stackoverflow.com/users/7458849/theopap"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 333, "favorite_count": 0, "accepted_answer_id": 42935979, "answer_count": 4, "score": 1, "last_activity_date": 1490124162, "creation_date": 1490121864, "last_edit_date": 1490122579, "question_id": 42935682, "link": "https://stackoverflow.com/questions/42935682/update-and-save-value-in-rails", "title": "Update and save value in rails", "body": "<p>The following method checks if a coupon is valid or not. I would like to update the total amount in the current_cart when coupon is valid. The validation process works fine but for some reason it won\u2019t update the amount in here cart/show.html.erb <code>&lt;%= number_to_currency current_cart.amount %&gt;</code></p>\n\n<p>coupons_controller.rb</p>\n\n<pre><code>def redeem\n    @coupon = Coupon.find_by_discount_code(params[:discount_code])\n if @coupon.blank?\n    redirect_to :back\n    flash[:notice] = \"Coupon is Invalid!\"\n else \n    @current_cart = Cart.find(current_cart.id)\n    @current_cart.amount = @current_cart.amount - @coupon.amount\n    @current_cart.save\n    redirect_to :back\n    flash[:notice] = \"Coupon is Valid!\"\n end\nend\n</code></pre>\n\n<p>application_controller.rb</p>\n\n<pre><code>def current_cart \n  Cart.find(session[:cart_id])\nrescue ActiveRecord::RecordNotFound \n  cart = Cart.create \n  session[:cart_id] = cart.id\n  cart\nend\n\n  helper_method :current_cart\nend\n\nclass Cart &lt; ApplicationRecord\n has_many :line_items, dependent: :destroy\n\n  def add_product(product_id)\n    current_item = line_items.find_by_product_id(product_id) \n    if current_item\n    current_item.quantity += 1\n    else\n    current_item = line_items.build(product_id: product_id)\n    end\n    current_item\n  end\n\n\n def total_price\n    line_items.to_a.sum { |item| item.total_price }\n end\n\n def tax_rate\n   tax_amount = 0 \n   line_items.each do |item|\n   tax_amount += (item.product.price * item.quantity) *      item.product.tax_rate.rate\n   end\n   tax_amount\n end    \n\n def amount\n   line_items.to_a.sum { |item| item.total_price } + tax_rate + fee\n end\n\n def fee\n   shipment_amount = 0 \n   line_items.each do |item|\n    if item.quantity &lt;= 1\n    shipment_amount = item.product.shipment.fee\n    else\n    shipment_amount = item.product.multiple_shipment.fee\n    end\n  end\n  shipment_amount\n end\nend\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "openssl", "digest", "sha2"], "answers": [{"tags": [], "owner": {"reputation": 1284, "user_id": 1628387, "user_type": "registered", "accept_rate": 28, "profile_image": "https://www.gravatar.com/avatar/c482161f077c79df5e62590110b465e9?s=128&d=identicon&r=PG", "display_name": "Alex C", "link": "https://stackoverflow.com/users/1628387/alex-c"}, "is_accepted": false, "score": 1, "last_activity_date": 1490121587, "creation_date": 1490121587, "answer_id": 42935604, "question_id": 42935042, "link": "https://stackoverflow.com/questions/42935042/bundle-update-broke-digest-library-trouble-upgrading-to-openssl/42935604#42935604", "title": "bundle update broke Digest library. Trouble upgrading to OpenSSL", "body": "<p>I am answering my own question as I solved the problem. The main source of confusion is that sha2 is not a specific algorithm. However sha256 will do the job. So the following code seems to work just fine:</p>\n\n<pre><code>def signature(str)\n  key = EnvHelpers.google_oauth2_hmac_key\n  OpenSSL::HMAC.hexdigest(OpenSSL::Digest::SHA256.new, key, str)\nend\n</code></pre>\n"}], "owner": {"reputation": 1284, "user_id": 1628387, "user_type": "registered", "accept_rate": 28, "profile_image": "https://www.gravatar.com/avatar/c482161f077c79df5e62590110b465e9?s=128&d=identicon&r=PG", "display_name": "Alex C", "link": "https://stackoverflow.com/users/1628387/alex-c"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 143, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1490121587, "creation_date": 1490119856, "question_id": 42935042, "link": "https://stackoverflow.com/questions/42935042/bundle-update-broke-digest-library-trouble-upgrading-to-openssl", "title": "bundle update broke Digest library. Trouble upgrading to OpenSSL", "body": "<p>We did a bundle update recently that went wrong. As we understood, the support for 'digest/hmac' dropped, so I wanted to use OpenSSL instead:</p>\n\n<p>OLD [WORKING] CODE:</p>\n\n<pre><code> def signature(str)\n    key = EnvHelpers.google_oauth2_hmac_key\n    Digest::HMAC.hexdigest(str, key, Digest::SHA2)\n end\n</code></pre>\n\n<p>NEW CODE: </p>\n\n<pre><code>def signature(str)\n  key = EnvHelpers.google_oauth2_hmac_key\n  OpenSSL::HMAC.hexdigest(OpenSSL::Digest.new(\"sha2\"), key, str)\nend\n</code></pre>\n\n<p>When we run rspec:</p>\n\n<pre><code>Failure/Error: OpenSSL::HMAC.hexdigest(OpenSSL::Digest.new(\"sha2\"), key, str)\n\n RuntimeError:\n   Unsupported digest algorithm (sha2).: first num too large\n</code></pre>\n\n<p>Relevant parts of the Gemfile:</p>\n\n<pre><code>ruby \"2.3.3\"\ngem \"openssl\", require: true # Gemfile.lock says I am at (2.0.3)\n</code></pre>\n\n<p>We are opened to any suggestion to resolve the problem. This part of the code is mostly used for our Google and Facebook connection flow. </p>\n"}, {"tags": ["ruby-on-rails", "ruby", "post", "twitter", "bots"], "answers": [{"tags": [], "owner": {"reputation": 27, "user_id": 6829618, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/179c93901521b645de0cbacab8047f18?s=128&d=identicon&r=PG&f=1", "display_name": "ETSchmidt", "link": "https://stackoverflow.com/users/6829618/etschmidt"}, "is_accepted": true, "score": 0, "last_activity_date": 1490564876, "creation_date": 1490564876, "answer_id": 43034963, "question_id": 42934972, "link": "https://stackoverflow.com/questions/42934972/rails-twitter-bot-double-post/43034963#43034963", "title": "Rails Twitter bot double post", "body": "<p>I asked Heroku what's up; they said that every time you push to their server, it reloads every file, so it was running my script. </p>\n\n<p>The solution was just to make a rake file and run that command instead of \"rails r\"</p>\n"}], "owner": {"reputation": 27, "user_id": 6829618, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/179c93901521b645de0cbacab8047f18?s=128&d=identicon&r=PG&f=1", "display_name": "ETSchmidt", "link": "https://stackoverflow.com/users/6829618/etschmidt"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 51, "favorite_count": 0, "accepted_answer_id": 43034963, "answer_count": 1, "score": 0, "last_activity_date": 1490564876, "creation_date": 1490119620, "question_id": 42934972, "link": "https://stackoverflow.com/questions/42934972/rails-twitter-bot-double-post", "title": "Rails Twitter bot double post", "body": "<p>I made a great Twitter bot that makes CrossFit workouts using this tutorial:\n<a href=\"http://www.katelyndinkgrave.com/ruby/2016/01/31/civ-game-generator-twitterbot.html\" rel=\"nofollow noreferrer\">http://www.katelyndinkgrave.com/ruby/2016/01/31/civ-game-generator-twitterbot.html</a></p>\n\n<p>however, keeps double posting; how do I make it only post once each time the script is run?</p>\n\n<p>the Model is:</p>\n\n<pre><code>class Wod &lt; ApplicationRecord\n\n  def initialize\n    @wod_type = WOD_TYPES.sample\n    @time = time\n    @rounds = rounds\n    ...\n  end\n\nI've omitted code not relevant to the post...\n\n  def print_wod\n        if @wod_type == \"EMOM\"      \n        \"#{@wod_type} #{@time}:\\n\\n\" +\n        \"#{@sets}\\n\\n\" +\n      \"#{bbweight}\" +\n      \"#{kbweight}\" +\n      \"#{height}\" +\n      \"#{slamweight}\" +\n      \"#{wallweight}\" +\n      \"\\nFind more at: https://GymBull.com\\n\"\n    else\n        \"#{@rounds}#{@wod_type}#{@time}:\\n\\n\" +\n      \"#{@sets}\\n\\n\" +\n      \"#{bbweight}\" +\n      \"#{kbweight}\" +\n      \"#{height}\" +\n      \"#{slamweight}\" +\n      \"#{wallweight}\" +\n      \"\\nFind more at: https://GymBull.com\\n\"\n    end\n  end\n\nend\n</code></pre>\n\n<p>and the bot script run with (    rails r app/models/bot.rb ):</p>\n\n<pre><code>require 'twitter'\n\nclient = Twitter::REST::Client.new do |config|\n  config.consumer_key        = ENV[\"CONSUMER_KEY\"]\n  config.consumer_secret     = ENV[\"CONSUMER_SECRET\"]\n  config.access_token        = ENV[\"ACCESS_TOKEN\"]\n  config.access_token_secret = ENV[\"ACCESS_TOKEN_SECRET\"]\nend\n\nwod = Wod.new\nclient.update(wod.print_wod)\n</code></pre>\n\n<p>thank you in advance</p>\n"}]