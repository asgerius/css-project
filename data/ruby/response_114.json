[{"tags": ["jquery", "html", "css", "ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 1073, "user_id": 4167438, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BWAG2.jpg?s=128&g=1", "display_name": "Jack Koppa", "link": "https://stackoverflow.com/users/4167438/jack-koppa"}, "edited": false, "score": 2, "creation_date": 1489620210, "post_id": 42822548, "comment_id": 72756726, "body": "Could we get the CSS that you&#39;re currently applying? Bonus if we can also get some of the HTML that&#39;s actually output to the browser, so that we can replicate the styles here."}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 7717995, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aa24b9290f45fafd6413896899e9a861?s=128&d=identicon&r=PG&f=1", "display_name": "bendikno", "link": "https://stackoverflow.com/users/7717995/bendikno"}, "edited": false, "score": 0, "creation_date": 1490268582, "post_id": 42822797, "comment_id": 73041508, "body": "Doesn&#39;t work, it just collapses. That&#39;s why it&#39;s there"}], "tags": [], "owner": {"reputation": 67463, "user_id": 203130, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/1RE8c.jpg?s=128&g=1", "display_name": "coreyward", "link": "https://stackoverflow.com/users/203130/coreyward"}, "is_accepted": false, "score": 0, "last_activity_date": 1489621384, "creation_date": 1489621384, "answer_id": 42822797, "question_id": 42822548, "link": "https://stackoverflow.com/questions/42822548/how-to-expand-div-height-to-content-with-ruby-each-loop-in-rails/42822797#42822797", "title": "How to expand div height to content with ruby each-loop in rails?", "body": "<p>Delete this from <code>#grid-container-fullwidth</code>: <code>style=\"height:1270px\"</code></p>\n"}], "owner": {"reputation": 1, "user_id": 7717995, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aa24b9290f45fafd6413896899e9a861?s=128&d=identicon&r=PG&f=1", "display_name": "bendikno", "link": "https://stackoverflow.com/users/7717995/bendikno"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 169, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1489621384, "creation_date": 1489620042, "question_id": 42822548, "link": "https://stackoverflow.com/questions/42822548/how-to-expand-div-height-to-content-with-ruby-each-loop-in-rails", "title": "How to expand div height to content with ruby each-loop in rails?", "body": "<p>I'm having trouble expanding the height of this div. When I shrink the window height or look at the same page from a mobile device, half of the content is cut out. I have tried height: 100% and min-height: 100% and used vh and overflow: auto, nothing works. </p>\n\n<pre><code>&lt;div class=\"col-md-9 c-center\"&gt;\n      &lt;div id=\"grid-container-fullwidth\" class=\"cbp cbp-caption-active cbp-ready processed cbp-caption-zoom cbp-cols-3 c-left\" style=\"height:1270px\"&gt;\n        &lt;div class=\"cbp-wrapper-outer\"&gt;&lt;div class=\"cbp-wrapper\"&gt;\n          &lt;div style=\"height: 100%\"&gt;\n\n            &lt;% @companies.each do |company| %&gt;\n\n                &lt;div class=\"cbp-item identity web-design\" style=\"padding: 10px; width: 207px; position: relative;\"&gt;&lt;div class=\"cbp-item-wrapper\"&gt;\n                  &lt;div class=\"cbp-caption\"&gt;\n                    &lt;div class=\"cbp-caption-defaultWrap\"&gt;\n                      &lt;img src=\"&lt;%= company.get_logo(:thumb) %&gt;\" alt=\"\"&gt;&lt;/div&gt;\n                    &lt;div class=\"cbp-caption-activeWrap\"&gt;\n                      &lt;div class=\"c-masonry-border\"&gt;&lt;/div&gt;\n                      &lt;div class=\"cbp-l-caption-alignCenter\"&gt;\n                        &lt;div class=\"cbp-l-caption-body\"&gt;\n                          &lt;%= link_to company, :method=&gt;:get do %&gt;\n                              &lt;p class=\"cbp-singlePage cbp-l-caption-buttonLeft btn c-btn-square c-btn-border-1x c-btn-white c-btn-bold c-btn-uppercase c-btn-block\"&gt;Les mer&lt;/p&gt;\n                          &lt;% end %&gt;\n                        &lt;/div&gt;\n                      &lt;/div&gt;\n                    &lt;/div&gt;\n                  &lt;/div&gt;\n                  &lt;p class=\"cbp-singlePage cbp-l-grid-masonry-projects-title\"&gt;&lt;%=link_to company.name, company%&gt;&lt;/p&gt;\n                &lt;/div&gt;&lt;/div&gt;\n\n            &lt;% end %&gt;\n\n          &lt;/div&gt;\n        &lt;/div&gt;\n        &lt;/div&gt;\n      &lt;/div&gt;\n      &lt;div class=\"c-center\"&gt;\n        &lt;%= will_paginate @companies, page_links: false, renderer: BootstrapPagination::Rails %&gt;\n      &lt;/div&gt;\n    &lt;/div&gt;\n</code></pre>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1489620059, "post_id": 42822518, "comment_id": 72756670, "body": "It&#39;s odd you have a duplicated <code>get</code> directive in there. Normally if you generate a controller you should do <code>resources :users</code>."}], "answers": [{"tags": [], "owner": {"reputation": 24213, "user_id": 390897, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/bb90a39b77596fcffbab96de88f0ee34?s=128&d=identicon&r=PG", "display_name": "fny", "link": "https://stackoverflow.com/users/390897/fny"}, "is_accepted": false, "score": 1, "last_activity_date": 1489621165, "creation_date": 1489621165, "answer_id": 42822763, "question_id": 42822518, "link": "https://stackoverflow.com/questions/42822518/undefined-method-published/42822763#42822763", "title": "Undefined Method &#39;Published&#39;", "body": "<p>The error you're seeing is because of the following line:</p>\n\n<p>get 'controller_name/[actions]'</p>\n\n<p>Say you want to route <code>GET localhost:3000/welcome</code> to <code>PagesController#welcome</code>. You'd need specify both the path and the controller#action in your routes:</p>\n\n<pre><code>get '/welcome', controller: 'pages#index'\n</code></pre>\n\n<p>I'd really recommend you read up on routing! <a href=\"http://guides.rubyonrails.org/routing.html\" rel=\"nofollow noreferrer\">Rails has a great guide on routing.</a>.</p>\n\n<p>Aside from that, you have a few other errors in your code. Here's an annotated version:</p>\n\n<pre><code>Rails.application.routes.draw do\n  # These two routes are invalid\n  get 'controller_name/[actions]'\n  get 'controller_name/[options]'\n\n  # This routes the root of your site (localhost:3000/) \n  # to ArticlesController#index\n  # \n  # This should be moved to the top of the file\n  root :to =&gt; \"articles#index\"\n  resources :articles\n\n  # You can't have two root routes!\n  root :to =&gt; 'users#show'\nend\n</code></pre>\n\n<p>Good luck, and welcome to Rails!</p>\n"}], "owner": {"reputation": 41, "user_id": 2675803, "user_type": "registered", "profile_image": "https://graph.facebook.com/100004988735412/picture?type=large", "display_name": "Ashenafi Abera", "link": "https://stackoverflow.com/users/2675803/ashenafi-abera"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 107, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1489621165, "creation_date": 1489619896, "last_edit_date": 1489620017, "question_id": 42822518, "link": "https://stackoverflow.com/questions/42822518/undefined-method-published", "title": "Undefined Method &#39;Published&#39;", "body": "<p>I just started learning Ruby on Rails and got stamped on Chapter 7 of Beginning Rails 4 Third Edition Page 151.</p>\n\n<p>I generated controller as follows;\n$rails generate controller ControllerName [actions] [options]. This one worked OK but when I tried to generate a controller for the Users\n$rails generate controller Users. I got the following error message.</p>\n\n<blockquote>\n  <p>/routing/mapper.rb:328:in check_part : Missing :controller key on routes definition, please check your routes.  (ArgumentErroe).</p>\n</blockquote>\n\n<p>This is what my routes look like</p>\n\n<pre><code>Rails.application.routes.draw do\n  get 'controller_name/[actions]'\n\n  get 'controller_name/[options]'\n\n  root :to =&gt; \"articles#index\"\n  resources :articles\n  root :to =&gt; 'users#show'\n\nend\n</code></pre>\n\n<p>I added the last route (root :to => 'users#show'</p>\n\n<p>Stackoverflow community is great.  I have been getting a lot of help from the archives.</p>\n"}, {"tags": ["ruby", "regex"], "comments": [{"owner": {"reputation": 126343, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "edited": false, "score": 0, "creation_date": 1489618764, "post_id": 42822194, "comment_id": 72756202, "body": "A module already exists to parse street addresses, <a href=\"https://github.com/geocommons/geocoder\" rel=\"nofollow noreferrer\">Geocoder</a>."}, {"owner": {"reputation": 5850, "user_id": 4501354, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/1230cfcc7f68488ad19d0022cf7b1a93?s=128&d=identicon&r=PG&f=1", "display_name": "Donato", "link": "https://stackoverflow.com/users/4501354/donato"}, "reply_to_user": {"reputation": 126343, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "edited": false, "score": 0, "creation_date": 1489618833, "post_id": 42822194, "comment_id": 72756232, "body": "@Schwern ok but what is wrong with the regex?"}, {"owner": {"reputation": 5850, "user_id": 4501354, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/1230cfcc7f68488ad19d0022cf7b1a93?s=128&d=identicon&r=PG&f=1", "display_name": "Donato", "link": "https://stackoverflow.com/users/4501354/donato"}, "reply_to_user": {"reputation": 126343, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "edited": false, "score": 0, "creation_date": 1489618870, "post_id": 42822194, "comment_id": 72756249, "body": "I tried \\\\\\\\n, I tried \\\\\\n and I tried \\n"}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1489619895, "post_id": 42822194, "comment_id": 72756619, "body": "<code>&quot;\\n&quot;</code> is a newline. <code>\\\\n</code> is a literal backslash and an <code>n</code>. Is that literally what your string has in it?"}, {"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1489619948, "post_id": 42822194, "comment_id": 72756631, "body": "&quot;I tried \\\\\\\\n, I tried \\\\\\n and I tried \\n&quot; \u2013 Hint: there is one try missing in between."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1489619997, "post_id": 42822194, "comment_id": 72756650, "body": "Are you sure it&#39;s not <code>address = &quot;6761 SW 19 St\\nPark City, PA 19020&quot;</code>, in which case <code>puts address</code> prints <code>&quot;6761 SW 19 St&quot;</code>on one line and <code>&quot;Park City, PA 19020&quot;</code> on the following line?"}, {"owner": {"reputation": 5850, "user_id": 4501354, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/1230cfcc7f68488ad19d0022cf7b1a93?s=128&d=identicon&r=PG&f=1", "display_name": "Donato", "link": "https://stackoverflow.com/users/4501354/donato"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1489620322, "post_id": 42822194, "comment_id": 72756768, "body": "@CarySwoveland this is a json response"}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1489621222, "post_id": 42822194, "comment_id": 72757068, "body": "@Donato, ah, thanks."}], "answers": [{"comments": [{"owner": {"reputation": 5850, "user_id": 4501354, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/1230cfcc7f68488ad19d0022cf7b1a93?s=128&d=identicon&r=PG&f=1", "display_name": "Donato", "link": "https://stackoverflow.com/users/4501354/donato"}, "edited": false, "score": 0, "creation_date": 1489620768, "post_id": 42822569, "comment_id": 72756930, "body": "This is the regex that ultimately worked: /(.+)\\\\n([\\w\\s]+),\\s(\\w{2})\\s(\\d+)/"}, {"owner": {"reputation": 126343, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "reply_to_user": {"reputation": 5850, "user_id": 4501354, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/1230cfcc7f68488ad19d0022cf7b1a93?s=128&d=identicon&r=PG&f=1", "display_name": "Donato", "link": "https://stackoverflow.com/users/4501354/donato"}, "edited": false, "score": 0, "creation_date": 1489621915, "post_id": 42822569, "comment_id": 72757304, "body": "@Donato That &quot;worked&quot; only because the address is incorrect. Again, <code>\\\\n</code> is a literal backslash followed by an n which is nonsense. It should be <code>\\\\\\n</code> which is a literal backslash followed by a newline. You changed the regex to match that mistake in the address rather than fixing the mistake. <b><i>Print the address</i></b> and you&#39;ll see."}, {"owner": {"reputation": 5850, "user_id": 4501354, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/1230cfcc7f68488ad19d0022cf7b1a93?s=128&d=identicon&r=PG&f=1", "display_name": "Donato", "link": "https://stackoverflow.com/users/4501354/donato"}, "edited": false, "score": 0, "creation_date": 1511831340, "post_id": 42822569, "comment_id": 82001173, "body": "<a href=\"https://stackoverflow.com/questions/648156/backslashes-in-single-quoted-strings-vs-double-quoted-strings\" title=\"backslashes in single quoted strings vs double quoted strings\">stackoverflow.com/questions/648156/&hellip;</a>"}], "tags": [], "owner": {"reputation": 126343, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "is_accepted": true, "score": 3, "last_activity_date": 1489620132, "creation_date": 1489620132, "answer_id": 42822569, "question_id": 42822194, "link": "https://stackoverflow.com/questions/42822194/regex-returns-no-results-even-after-escaping-special-characters/42822569#42822569", "title": "Regex returns no results even after escaping special characters", "body": "<p>Parsing addresses is very tricky, and it's very easy to either write an overly simplistic regex that doesn't catch all the many, many special cases, or to fall down the rabbit hole of trying to catch all those special cases.</p>\n\n<p>Fortunately there's already two very well developed modules for this: <a href=\"https://github.com/geocommons/geocoder\" rel=\"nofollow noreferrer\">Geocoder</a> and <a href=\"https://github.com/derrek/street-address\" rel=\"nofollow noreferrer\">StreetAddress</a>. I personally worked on improving StreetAddress.</p>\n\n<p>StreetAddress just parses addresses as best it can.</p>\n\n<pre><code>2.3.3 :001 &gt; address = \"6761 SW 19 St\\\\\\nPark City, PA 19020\"\n =&gt; \"6761 SW 19 St\\\\\\nPark City, PA 19020\" \n2.3.3 :002 &gt; require 'street_address'\n =&gt; true \n2.3.3 :005 &gt; StreetAddress::US.parse(address)\n =&gt; #&lt;StreetAddress::US::Address:0x007fcc62a88ca8 @number=\"6761\", @street=\"19 St\\\\\", @street_type=\"Park\", @unit=nil, @unit_prefix=nil, @suffix=nil, @prefix=\"SW\", @city=\"City\", @state=\"PA\", @postal_code=\"19020\", @postal_code_ext=nil&gt; \n</code></pre>\n\n<p>Note that it kept the backslash as part of the street name. A backslash in an address is quite abnormal. You can correct for this with an override to <code>StreetAddress::US.parse</code> which first strips trailing backslashes.</p>\n\n<p>Geocoder takes a different approach to make a fuzzy match against US Census data. It's a bit more difficult to setup, but it can do a better job parsing real street addresses.</p>\n\n<p>Use one of them, don't write your own. I'll go over the problems in your code only as an exercise.</p>\n\n<hr>\n\n<p>There's multiple problems, and any one of them will cause the match to fail. This can't be fixed by just throwing more backslashes around until it happens to work.</p>\n\n<p>First is in the address itself.</p>\n\n<pre><code>address = \"6761 SW 19 St\\\\nPark City, PA 19020\"\n                        ^\n</code></pre>\n\n<p><code>\\\\n</code> is a literal backslash followed by the letter n.</p>\n\n<pre><code>&gt; address = \"6761 SW 19 St\\\\nPark City, PA 19020\"\n =&gt; \"6761 SW 19 St\\\\nPark City, PA 19020\" \n&gt; puts address\n6761 SW 19 St\\nPark City, PA 19020\n</code></pre>\n\n<p>I expect you meant <code>\\\\\\n</code> which is a literal backslash followed by the letter n.</p>\n\n<p>Then your regex has multiple problems. First, again, too many backslashes.</p>\n\n<pre><code>/(.+)\\\\\\\\n(\\w+),\\s(\\w{2})\\s(\\d+)/\n     ^^^^^\n</code></pre>\n\n<p>That is two literal backslashes followed by the letter n. You need <code>\\\\\\n</code>.</p>\n\n<p>The next problem is trying to match \"Park City,\" with <code>\\w</code>.</p>\n\n<pre><code>/(.+)\\\\\\n(\\w+),\\s(\\w{2})\\s(\\d+)/\n         ^^^^^^\n</code></pre>\n\n<p><code>\\w</code> is letters and numbers and underscore only, no spaces. You'd need <code>[\\w\\s]+</code> instead.</p>\n\n<p>Now that \"works\" for that particular address, but it's pretty brittle and will probably fail on many others.</p>\n\n<hr>\n\n<p>But using <code>address =~ regex</code> with <code>$1</code> and such is not the best way to do matches in Ruby. Instead, use <code>regex.match(address)</code> which returns a <a href=\"http://ruby-doc.org/core-2.3.3/MatchData.html\" rel=\"nofollow noreferrer\">MatchData</a> object. You can then use that as an array. <code>match[0]</code> is everything which matched. <code>match[1]</code> is <code>$1</code> (ie. the first capture) and so on.</p>\n\n<pre><code>2.3.3 :034 &gt; match[0]\n =&gt; \"6761 SW 19 St\\\\\\nPark City, PA 19020\" \n2.3.3 :035 &gt; match[1]\n =&gt; \"6761 SW 19 St\" \n2.3.3 :036 &gt; match[2]\n =&gt; \"Park City\" \n2.3.3 :037 &gt; match[3]\n =&gt; \"PA\" \n2.3.3 :038 &gt; match[4]\n =&gt; \"19020\" \n</code></pre>\n\n<p>This avoids using variables that might be blown over by other regexes and allows you to pass the MatchData object around as a single unit.</p>\n"}, {"tags": [], "owner": {"reputation": 896, "user_id": 520843, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/711a181409e23c300b82404544166deb?s=128&d=identicon&r=PG", "display_name": "grail", "link": "https://stackoverflow.com/users/520843/grail"}, "is_accepted": false, "score": 0, "last_activity_date": 1489624162, "creation_date": 1489624162, "answer_id": 42823235, "question_id": 42822194, "link": "https://stackoverflow.com/questions/42822194/regex-returns-no-results-even-after-escaping-special-characters/42823235#42823235", "title": "Regex returns no results even after escaping special characters", "body": "<p>Another quick alternate regex:</p>\n\n<pre><code>regex = /(.+)\\\\n([^,]+),\\s(\\w{2})\\s(\\d+)/\n</code></pre>\n\n<p>Here we use the not character class to get the suburb</p>\n"}], "owner": {"reputation": 5850, "user_id": 4501354, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/1230cfcc7f68488ad19d0022cf7b1a93?s=128&d=identicon&r=PG&f=1", "display_name": "Donato", "link": "https://stackoverflow.com/users/4501354/donato"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 47, "favorite_count": 0, "accepted_answer_id": 42822569, "answer_count": 2, "score": 0, "last_activity_date": 1489624162, "creation_date": 1489618240, "last_edit_date": 1489619848, "question_id": 42822194, "link": "https://stackoverflow.com/questions/42822194/regex-returns-no-results-even-after-escaping-special-characters", "title": "Regex returns no results even after escaping special characters", "body": "<p>My regex is not returning a match even though the pattern appears to match the string:                   </p>\n\n<pre><code>regex = /(.+)\\\\\\\\n(\\w+),\\s(\\w{2})\\s(\\d+)/\naddress = \"6761 SW 19 St\\\\nPark City, PA 19020\"\naddress =~ regex\n =&gt; nil \n</code></pre>\n\n<p>I am expecting a 0 result so I can use $1,$2,$3 in order to extract the data I want.</p>\n\n<p>The only thing I can imagine that is wrong here is the escape sequences. But am I right to escape like I did above?</p>\n"}, {"tags": ["ruby", "linux", "command-line-interface"], "comments": [{"owner": {"reputation": 179940, "user_id": 20713, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/09b9758a4a83cc25547eb93891f19df7?s=128&d=identicon&r=PG", "display_name": "ephemient", "link": "https://stackoverflow.com/users/20713/ephemient"}, "edited": false, "score": 1, "creation_date": 1489616014, "post_id": 42821531, "comment_id": 72755056, "body": "Works for me. I suspect you have some wrapper around <code>ruby</code> which is causing issues?"}, {"owner": {"reputation": 73209, "user_id": 290394, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d7908f05c89e965f6bc5308ad6f41256?s=128&d=identicon&r=PG", "display_name": "steenslag", "link": "https://stackoverflow.com/users/290394/steenslag"}, "edited": false, "score": 1, "creation_date": 1489616237, "post_id": 42821531, "comment_id": 72755154, "body": "All three work for me on linux"}, {"owner": {"reputation": 1240, "user_id": 403748, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/7a544ef278faa9055b82e00cd1bbc76c?s=128&d=identicon&r=PG", "display_name": "davej", "link": "https://stackoverflow.com/users/403748/davej"}, "edited": false, "score": 0, "creation_date": 1489616952, "post_id": 42821531, "comment_id": 72755451, "body": "All 3 work for me, ubuntu 16.04/ruby 2.3.3p222, and windows 7/ruby 2.2.3p173"}, {"owner": {"reputation": 498, "user_id": 64273, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/e2af7fa369f4d06fc77a89c18ed4cf68?s=128&d=identicon&r=PG", "display_name": "Oso", "link": "https://stackoverflow.com/users/64273/oso"}, "edited": false, "score": 0, "creation_date": 1489617484, "post_id": 42821531, "comment_id": 72755659, "body": "They work perfectly fine for me running irb, but as soon as I try to use them from the command line, they just give me this behavior. I have no idea where to start looking for the root-cause."}, {"owner": {"reputation": 498, "user_id": 64273, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/e2af7fa369f4d06fc77a89c18ed4cf68?s=128&d=identicon&r=PG", "display_name": "Oso", "link": "https://stackoverflow.com/users/64273/oso"}, "edited": false, "score": 0, "creation_date": 1489617724, "post_id": 42821531, "comment_id": 72755761, "body": "I find it unfair to be down-voted when I&#39;m making a question about: &quot;this is the behaviour that I&#39;m seeing, What should I look for?&quot;"}, {"owner": {"reputation": 896, "user_id": 520843, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/711a181409e23c300b82404544166deb?s=128&d=identicon&r=PG", "display_name": "grail", "link": "https://stackoverflow.com/users/520843/grail"}, "edited": false, "score": 0, "creation_date": 1489623461, "post_id": 42821531, "comment_id": 72757690, "body": "Have you checked for any aliases for ruby? Do other commands like awk have a similar issue?  Why double quotes around script and not single? You can also use -r switch to include a library."}, {"owner": {"reputation": 498, "user_id": 64273, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/e2af7fa369f4d06fc77a89c18ed4cf68?s=128&d=identicon&r=PG", "display_name": "Oso", "link": "https://stackoverflow.com/users/64273/oso"}, "edited": false, "score": 0, "creation_date": 1489626015, "post_id": 42821531, "comment_id": 72758348, "body": "<code>which ruby</code> points me to my binary. Changed the quotes to all double (escaped), and also switched them both with the same results. Tested with awk and it does behave as expected (whitespaces not an issue). I&#39;m doing an strace at this point but I&#39;m not finding anything valuable."}, {"owner": {"reputation": 498, "user_id": 64273, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/e2af7fa369f4d06fc77a89c18ed4cf68?s=128&d=identicon&r=PG", "display_name": "Oso", "link": "https://stackoverflow.com/users/64273/oso"}, "edited": false, "score": 0, "creation_date": 1489626243, "post_id": 42821531, "comment_id": 72758406, "body": "<code>strace</code> is telling me that it&#39;s actually using a wrapper. I think I know now where to look next. I appreciate your help."}], "owner": {"reputation": 498, "user_id": 64273, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/e2af7fa369f4d06fc77a89c18ed4cf68?s=128&d=identicon&r=PG", "display_name": "Oso", "link": "https://stackoverflow.com/users/64273/oso"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 35, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1489636026, "creation_date": 1489615405, "last_edit_date": 1489636026, "question_id": 42821531, "link": "https://stackoverflow.com/questions/42821531/ruby-e-fails-handling-white-spaces", "title": "ruby -e fails handling white spaces", "body": "<p>I'm trying to run ruby from the command line but I'm finding that it struggles with the white spaces:</p>\n\n<p>This code will print both entries:</p>\n\n<pre><code>$ ruby -e \"puts('something');puts('again')\"\nsomething\nagain\n</code></pre>\n\n<p>This code will only print one:</p>\n\n<pre><code>$ ruby -e \"puts('something'); puts('again')\"\nsomething\n</code></pre>\n\n<p>The reason why I'm using parenthesis is because it won't accept parameters without them:</p>\n\n<pre><code>$ ruby -e \"require 'json'\"\n/...some-path.../lib/ruby/2.1.0/rubygems/core_ext/kernel_require.rb:38:in `require': wrong number of arguments (0 for 1) (ArgumentError)\n    from -e:1:in `&lt;main&gt;'\n</code></pre>\n\n<p>This error persist regardless of the version of ruby that I'm using (2.1, 2.3), so I'm guessing it's a config entry common to both, but I don't know where to start looking at.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "activerecord", "rails-activerecord", "active-record-query"], "answers": [{"comments": [{"owner": {"reputation": 1843, "user_id": 4067720, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a52c645614505bcaeb65a6c5199158c1?s=128&d=identicon&r=PG", "display_name": "Glyoko", "link": "https://stackoverflow.com/users/4067720/glyoko"}, "edited": false, "score": 0, "creation_date": 1489615744, "post_id": 42821516, "comment_id": 72754929, "body": "What&#39;s more, if this is a scope on <code>Record</code>, then you can basically remove all the references to &quot;Record&quot; in your answer. That reduces it to the very terse:  <code>conditions.inject(all) { |scope, condition| scope.or(where(condition)) }</code>"}, {"owner": {"reputation": 208794, "user_id": 229044, "user_type": "moderator", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/591426cbbacd4025d920467bad356911?s=128&d=identicon&r=PG&f=1", "display_name": "meagar", "link": "https://stackoverflow.com/users/229044/meagar"}, "reply_to_user": {"reputation": 1843, "user_id": 4067720, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a52c645614505bcaeb65a6c5199158c1?s=128&d=identicon&r=PG", "display_name": "Glyoko", "link": "https://stackoverflow.com/users/4067720/glyoko"}, "edited": false, "score": 0, "creation_date": 1489615814, "post_id": 42821516, "comment_id": 72754963, "body": "@Glyoko You shouldn&#39;t do that. If you&#39;re providing a class-level scope, you must return <code>conditions.inject(self) { ...  }</code>. Don&#39;t discard whatever conditions have already been applied to the scope by using <code>all</code>."}, {"owner": {"reputation": 1843, "user_id": 4067720, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a52c645614505bcaeb65a6c5199158c1?s=128&d=identicon&r=PG", "display_name": "Glyoko", "link": "https://stackoverflow.com/users/4067720/glyoko"}, "edited": false, "score": 0, "creation_date": 1489616346, "post_id": 42821516, "comment_id": 72755195, "body": "Whoops, you&#39;re right, that should be <code>self</code>. Thanks @meagar."}], "tags": [], "owner": {"reputation": 208794, "user_id": 229044, "user_type": "moderator", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/591426cbbacd4025d920467bad356911?s=128&d=identicon&r=PG&f=1", "display_name": "meagar", "link": "https://stackoverflow.com/users/229044/meagar"}, "is_accepted": true, "score": 3, "last_activity_date": 1489615642, "last_edit_date": 1489615642, "creation_date": 1489615339, "answer_id": 42821516, "question_id": 42821418, "link": "https://stackoverflow.com/questions/42821418/rails-query-active-record-by-pairs-ored/42821516#42821516", "title": "Rails Query Active Record By Pairs OR&#39;ed", "body": "<p>You can use <a href=\"http://api.rubyonrails.org/classes/ActiveRecord/QueryMethods.html#method-i-or\" rel=\"nofollow noreferrer\"><code>or</code></a> to chain together multiple <code>where</code> clauses with <code>OR</code>s:</p>\n\n<pre><code>Record.where(a: 'b').or(Record.where(c: 'd')).to_sql\n# =&gt; select * from records where (a = 'b' OR c = 'd')\n</code></pre>\n\n<p>Using this and your array of conditions, you can provide a starting \"seed\" of <code>Record.all</code> to a <code>reduce</code> call and chain multiple successive conditions by <code>or</code>ing them onto the scope:</p>\n\n<pre><code>conditions = [{ foo: 1, bar: 'a' }, { foo: 2, bar: 'b' }]\n\nrecords = conditions.inject(Record.all) do |scope, condition|\n            scope.or(Record.where(condition))\n          end\n</code></pre>\n"}], "owner": {"reputation": 595, "user_id": 1154843, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/Mjhv5.jpg?s=128&g=1", "display_name": "Lane", "link": "https://stackoverflow.com/users/1154843/lane"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 319, "favorite_count": 0, "accepted_answer_id": 42821516, "answer_count": 1, "score": 1, "last_activity_date": 1489615694, "creation_date": 1489614894, "last_edit_date": 1489615694, "question_id": 42821418, "link": "https://stackoverflow.com/questions/42821418/rails-query-active-record-by-pairs-ored", "title": "Rails Query Active Record By Pairs OR&#39;ed", "body": "<p>I have an API that looks like...</p>\n\n<pre><code>get(not_unique_id:, pairs: [])\n</code></pre>\n\n<p>...where pairs can look like <code>[{ foo: 1, bar: 'a' }, { foo: 2, bar: 'b' }]</code> and I want to write a query that will find all entries for the given non unique id, filtered by the pairs, i.e. ...</p>\n\n<pre><code>Thing.where(not_unique_id: not_unique_id)\n# need help here -&gt; .where(\"(foo = #{pairs.first[:foo]} AND bar = #{pairs.first[:bar]}) OR (foo = #{pairs.second[:foo]} AND bar = #{pairs.second[:bar]}) OR ...\")\n.map # or whatever else I want to do\n</code></pre>\n\n<p>I need a way to perform this <code>foo</code> AND <code>bar</code> comparison for each entry in my input pairs, OR'ed together to return all results that are have the not unique ID AND one of the pairs' values.</p>\n"}, {"tags": ["ios", "ruby", "xcode", "xcodeproj"], "answers": [{"comments": [{"owner": {"reputation": 271, "user_id": 2260304, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e8ef30979b7c8f0512d04712d38135ce?s=128&d=identicon&r=PG", "display_name": "user2260304", "link": "https://stackoverflow.com/users/2260304/user2260304"}, "edited": false, "score": 0, "creation_date": 1522085752, "post_id": 42842642, "comment_id": 85998656, "body": "Thanks. This helped"}], "tags": [], "owner": {"reputation": 1066, "user_id": 1655378, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/91eb3b496ff6bf9be206ed2326f6b8ca?s=128&d=identicon&r=PG&f=1", "display_name": "Xeaza", "link": "https://stackoverflow.com/users/1655378/xeaza"}, "is_accepted": true, "score": 5, "last_activity_date": 1489690582, "creation_date": 1489690582, "answer_id": 42842642, "question_id": 42821388, "link": "https://stackoverflow.com/questions/42821388/create-file-reference-to-image-in-images-xcassets-using-xcodeproj/42842642#42842642", "title": "Create file reference to image in Images.xcassets using xcodeproj", "body": "<p>It turns out Xcode handles the image references for you if you add an <code>.xcassets</code> file to your project. </p>\n\n<p>Another thing I learned is that the <code>.xcassets</code> folder should be added to your target(s) as a resource with <code>xcodeproj</code> instead of a file reference. That way it will correctly show up under <code>Project -&gt; Target -&gt; Build Phases -&gt; Copy Bundle Resources</code>.</p>\n\n<p>e.g. <code>target.add_resources([file_reference_to_xcassets])</code>\ninstead of <code>target.add_file_references([file_reference_to_xcassets])</code></p>\n\n<p>Hopefully, this helps someone down the road :) </p>\n"}], "owner": {"reputation": 1066, "user_id": 1655378, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/91eb3b496ff6bf9be206ed2326f6b8ca?s=128&d=identicon&r=PG&f=1", "display_name": "Xeaza", "link": "https://stackoverflow.com/users/1655378/xeaza"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 695, "favorite_count": 0, "accepted_answer_id": 42842642, "answer_count": 1, "score": 0, "last_activity_date": 1489690582, "creation_date": 1489614778, "question_id": 42821388, "link": "https://stackoverflow.com/questions/42821388/create-file-reference-to-image-in-images-xcassets-using-xcodeproj", "title": "Create file reference to image in Images.xcassets using xcodeproj", "body": "<p>I'm writing a script with <a href=\"https://github.com/CocoaPods/Xcodeproj\" rel=\"nofollow noreferrer\">Xcodeproj</a> and I would like to create references to image files inside <code>.xcassets.</code> Finder treats <code>.xcassets</code> &amp; <code>.imageset</code> as Folders but I don't want to create a group in xcode for each of those folders. </p>\n\n<p>I'm able to create a reference when I know the containing groups in Xcode. i.e. <code>project.main_group['Src'].new_reference(pathToProject/Src/fileName.m)</code></p>\n\n<p>I'd like to iterate through the sub-directories and files of <code>.xcassets</code> and create a reference for each image. But I don't want to create a group in Xcode that matches each <code>imageset</code> in Finder because Xcode deals with the <code>.xcassets</code> folder in its own way. </p>\n\n<p>I would like to be able to do something like this:  </p>\n\n<p><code>project.main_group['Src']['Images.xcassets']['image_name.imageset']\n.new_reference(pathToProject/Src/Images.xcassets/image_name.imageset/image_name.png)</code>\nThe above line doesn't work using <code>Xcodeproj</code> because it can't find any Groups named <code>Images.xcassets</code> or <code>image_name.imageset.</code></p>\n\n<p>Can anyone point me in the right direction or give an example of how I would create a reference to an image file stored inside <code>Images.xcassets</code>? </p>\n\n<p>Thanks for your time! </p>\n"}, {"tags": ["c++", "ruby"], "comments": [{"owner": {"reputation": 811, "user_id": 4445768, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/Jzeh6.jpg?s=128&g=1", "display_name": "Bango", "link": "https://stackoverflow.com/users/4445768/bango"}, "edited": false, "score": 1, "creation_date": 1489614342, "post_id": 42821224, "comment_id": 72754271, "body": "I really like #2.  Put it in some sort of globals.json file, include the json lib in C++ (or roll out your own solution).  I don&#39;t know of an easier way, let alone a way to share vectors and matrices as full types."}, {"owner": {"reputation": 13077, "user_id": 618068, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/7bcc37850bde70904ddb82f17c46d49c?s=128&d=identicon&r=PG", "display_name": "aardvarkk", "link": "https://stackoverflow.com/users/618068/aardvarkk"}, "reply_to_user": {"reputation": 811, "user_id": 4445768, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/Jzeh6.jpg?s=128&g=1", "display_name": "Bango", "link": "https://stackoverflow.com/users/4445768/bango"}, "edited": false, "score": 0, "creation_date": 1489614419, "post_id": 42821224, "comment_id": 72754306, "body": "@Bango Yeah, I&#39;m definitely leaning towards #2. Just wasn&#39;t sure if I was being crazy and there was something obvious I could do without too much &quot;glue code&quot;."}, {"owner": {"reputation": 8847, "user_id": 3484570, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/r5BRZ.png?s=128&g=1", "display_name": "nwp", "link": "https://stackoverflow.com/users/3484570/nwp"}, "edited": false, "score": 0, "creation_date": 1489614443, "post_id": 42821224, "comment_id": 72754320, "body": "Search for &quot;ruby c++ bindings&quot;"}, {"owner": {"reputation": 13077, "user_id": 618068, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/7bcc37850bde70904ddb82f17c46d49c?s=128&d=identicon&r=PG", "display_name": "aardvarkk", "link": "https://stackoverflow.com/users/618068/aardvarkk"}, "reply_to_user": {"reputation": 8847, "user_id": 3484570, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/r5BRZ.png?s=128&g=1", "display_name": "nwp", "link": "https://stackoverflow.com/users/3484570/nwp"}, "edited": false, "score": 0, "creation_date": 1489614492, "post_id": 42821224, "comment_id": 72754347, "body": "@nwp Isn&#39;t that option #1?"}, {"owner": {"reputation": 8847, "user_id": 3484570, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/r5BRZ.png?s=128&g=1", "display_name": "nwp", "link": "https://stackoverflow.com/users/3484570/nwp"}, "edited": false, "score": 0, "creation_date": 1489614688, "post_id": 42821224, "comment_id": 72754433, "body": "@aardvarkk Maybe. A library is supposed to minimize the boiler plate though, so you might want to pick a different library if your complaint is the boiler plate."}, {"owner": {"reputation": 811, "user_id": 4445768, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/Jzeh6.jpg?s=128&g=1", "display_name": "Bango", "link": "https://stackoverflow.com/users/4445768/bango"}, "edited": false, "score": 0, "creation_date": 1489615435, "post_id": 42821224, "comment_id": 72754782, "body": "Library is supposed to create the glue for you, minimizing how sticky your hands have to get.  JSON in this case is a light glue for storing string objects, but you have to get your fingers a little sticky if you want them to become C++ types, which is also coincidentally the minimal stickiness of any option I can think of."}, {"owner": {"reputation": 1848, "user_id": 5505741, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-K0RGKJuJSu4/AAAAAAAAAAI/AAAAAAAAAFw/aodTCStN3gc/photo.jpg?sz=128", "display_name": "Michael Nastenko", "link": "https://stackoverflow.com/users/5505741/michael-nastenko"}, "edited": false, "score": 1, "creation_date": 1489646620, "post_id": 42821224, "comment_id": 72764455, "body": "IMHO, this problem better to solve with a code generator."}, {"owner": {"reputation": 13077, "user_id": 618068, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/7bcc37850bde70904ddb82f17c46d49c?s=128&d=identicon&r=PG", "display_name": "aardvarkk", "link": "https://stackoverflow.com/users/618068/aardvarkk"}, "edited": false, "score": 0, "creation_date": 1489675112, "post_id": 42821224, "comment_id": 72783275, "body": "Yeah. After spending some time trying to get a map and vector type working, I ended up writing a shell script to generate both a C++ header file and a Ruby file instead. Although my first solution was fun and quirky, the second is probably more realistic. I will add another answer showing that shell script."}], "answers": [{"comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 2, "creation_date": 1489622433, "post_id": 42822579, "comment_id": 72757452, "body": "While this works, it&#39;s proably too clever by half. Since C++ often involves a build process involving something akin to a <code>Makefile</code>, and since you&#39;re using Ruby, it&#39;d make more sense for your Ruby code to consume some kind of config file, JSON perhaps, and emit a <code>.h</code> or <code>.cpp</code> file that handles the definitions. That way one change to your JSON impacts both code-bases properly, no need to do any fancy <code>#ifdef</code> junk."}, {"owner": {"reputation": 13077, "user_id": 618068, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/7bcc37850bde70904ddb82f17c46d49c?s=128&d=identicon&r=PG", "display_name": "aardvarkk", "link": "https://stackoverflow.com/users/618068/aardvarkk"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 2, "creation_date": 1489675176, "post_id": 42822579, "comment_id": 72783320, "body": "@tadman Per your suggestion I ended up writing a shell script to generate a C++ header file and a Ruby script containing the constants. That way it was much easier to make it work with arbitrary types. I&#39;ll paste the contents of that script as another answer."}], "tags": [], "owner": {"reputation": 13077, "user_id": 618068, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/7bcc37850bde70904ddb82f17c46d49c?s=128&d=identicon&r=PG", "display_name": "aardvarkk", "link": "https://stackoverflow.com/users/618068/aardvarkk"}, "is_accepted": false, "score": 0, "last_activity_date": 1489622172, "last_edit_date": 1489622172, "creation_date": 1489620173, "answer_id": 42822579, "question_id": 42821224, "link": "https://stackoverflow.com/questions/42821224/easy-way-to-share-c-c-data-with-ruby/42822579#42822579", "title": "Easy way to share C/C++ data with Ruby?", "body": "<p>OK -- after a lot of experimentation I came up with the following hack! And a pretty epic hack, if you ask me!</p>\n\n<p>It will allow me to define enum types and integers in a <strong>single common file</strong> shared by both Ruby and C++. SharedTypes.h is both valid Ruby and C++!</p>\n\n<p><strong>SharedTypes.h</strong></p>\n\n<pre><code>#if 0\n%q|\n#else\nenum MyEnum {\n#endif\n#if 0\n|\n#else\n#endif\n\nFOO = 0,\nBAR = 1\n\n#if 0\n%q|\n#else\n};\n#endif\n#if 0\n|\n#else\n#endif\n</code></pre>\n\n<p>So... how does it work? <code>#</code> denotes a line comment in Ruby, so Ruby sees the following:</p>\n\n<pre><code>%q|\n#else\nenum MyEnum {\n#endif\n#if 0\n|\n\nFOO = 0,\nBAR = 1\n\n%q|\n#else\n};\n#endif\n#if 0\n|\n</code></pre>\n\n<p>The <code>%q</code> operator defines a multi-line string in Ruby using a custom delimiter of <code>|</code>. It doesn't have to be <code>|</code>, but I chose something I wasn't going to use in the C++ code. The <code>#</code> symbols inside the string are treated as a part of the string, so they're effectively ignored. </p>\n\n<p>We do nothing with these strings, so really all Ruby sees is: <code>FOO = 0, BAR = 1</code>, which gives us access to the constants. A Ruby script that wants access to the values can just be like this:</p>\n\n<p><strong>test.rb</strong></p>\n\n<pre><code>load 'SharedTypes.h'\nputs FOO\n</code></pre>\n\n<p>From the C++ side, the <code>#if</code>, <code>#else</code> and <code>#end</code> are preprocessor directives. Since we say <code>#if 0</code>, C++ ignores everything between that point and the <code>#else</code>. Inside the <code>#else</code>, we have code that will only be \"seen\" by the C++ side. So we can define our <code>enum</code> type there. The second block just adds the final <code>};</code> to finish the enum. So the C++ perspective is like this after preprocessing stage:</p>\n\n<pre><code>enum MyEnum {\n  FOO = 0,\n  BAR = 1\n};\n</code></pre>\n\n<p>Now on the C++ side, we just have:</p>\n\n<p><strong>test.cpp</strong></p>\n\n<pre><code>#include \"SharedTypes.h\"\nMyEnum test = FOO;\n</code></pre>\n\n<p>Magic.</p>\n\n<p>Hack the planet!</p>\n\n<p><strong>Note:</strong> I haven't been able to make it work with <code>std::map</code> and a Ruby hash yet, but I'd love for somebody to get something like that going! Or <code>std::vector</code> and a Ruby array!</p>\n"}, {"tags": [], "owner": {"reputation": 13077, "user_id": 618068, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/7bcc37850bde70904ddb82f17c46d49c?s=128&d=identicon&r=PG", "display_name": "aardvarkk", "link": "https://stackoverflow.com/users/618068/aardvarkk"}, "is_accepted": true, "score": 0, "last_activity_date": 1494437977, "creation_date": 1494437977, "answer_id": 43899353, "question_id": 42821224, "link": "https://stackoverflow.com/questions/42821224/easy-way-to-share-c-c-data-with-ruby/43899353#43899353", "title": "Easy way to share C/C++ data with Ruby?", "body": "<p>My final approach was to create a <code>zsh</code> shell script that generated code for Ruby and C++ separately. It contained all shared values and was triggered on a code build to ensure that no inconsistencies appeared between the C++ and Ruby code. If anybody's interested in the code, let me know!</p>\n"}], "owner": {"reputation": 13077, "user_id": 618068, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/7bcc37850bde70904ddb82f17c46d49c?s=128&d=identicon&r=PG", "display_name": "aardvarkk", "link": "https://stackoverflow.com/users/618068/aardvarkk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 74, "favorite_count": 0, "accepted_answer_id": 43899353, "answer_count": 2, "score": 0, "last_activity_date": 1494437977, "creation_date": 1489614094, "question_id": 42821224, "link": "https://stackoverflow.com/questions/42821224/easy-way-to-share-c-c-data-with-ruby", "title": "Easy way to share C/C++ data with Ruby?", "body": "<p>I have a C++ project from which I'd like to share some basic read-only constants with Ruby. I'd like to define the values in <em>one place</em>, such that if the values change they'd be reflected in both Ruby and C++ (after a recompile).</p>\n\n<p>Ideally it would support various basic data types (<code>std::vector&lt;int&gt;, std::map&lt;int&gt;</code>, but I think I could get by with just sharing integer values (<code>const int mysharedval = 1;</code>)</p>\n\n<p>I've thought of three approaches approaches, but all of them seem a bit too heavy for what I'd like:</p>\n\n<ol>\n<li>Wrap a C++ library with Ruby using <code>extconf.rb</code>. This seems to require a fairly high amount of boilerplate on both C++ and Ruby sides to get them working together.</li>\n<li>Storing values in a JSON file that's read from both C++ and Ruby. This adds a dependency on JSON to the C++ and would require code to translate the JSON values into C++ data types.</li>\n<li>Placing special comments inside C++ header files and manually parsing the file with Ruby to find the values. This is pretty ugly as it would require me to write some kind of basic parser, but once written it would probably be reasonably re-usable.</li>\n</ol>\n\n<p>Is there a simpler option I'm overlooking outside of the above that might be appropriate?</p>\n"}, {"tags": ["ruby", "macos", "https", "openssl", "rvm"], "comments": [{"owner": {"reputation": 82953, "user_id": 608639, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/aPIhh.jpg?s=128&g=1", "display_name": "jww", "link": "https://stackoverflow.com/users/608639/jww"}, "edited": false, "score": 0, "creation_date": 1489614166, "post_id": 42820834, "comment_id": 72754194, "body": "Also see <a href=\"http://stackoverflow.com/q/38670295\">Homebrew refusing to link OpenSSL</a>, <a href=\"http://stackoverflow.com/q/15185661\">Update OpenSSL on OS X with Homebrew</a>, <a href=\"http://stackoverflow.com/q/35129977\">How to install latest version of openssl Mac OS X El Capitan</a>, <a href=\"http://apple.stackexchange.com/q/126830\">How to upgrade OpenSSL in OS X?</a>, <a href=\"http://superuser.com/q/486389\">Openssl installation using HomeBrew fails</a>, etc."}, {"owner": {"reputation": 2109, "user_id": 5508633, "user_type": "registered", "accept_rate": 33, "profile_image": "https://graph.facebook.com/10204865704992930/picture?type=large", "display_name": "Mike Fleming", "link": "https://stackoverflow.com/users/5508633/mike-fleming"}, "reply_to_user": {"reputation": 82953, "user_id": 608639, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/aPIhh.jpg?s=128&g=1", "display_name": "jww", "link": "https://stackoverflow.com/users/608639/jww"}, "edited": false, "score": 0, "creation_date": 1489615482, "post_id": 42820834, "comment_id": 72754804, "body": "@jww I&#39;ve tried what most of them recommend, but can&#39;t seem to get past attempting to link openssl. Did I miss something?"}, {"owner": {"reputation": 82953, "user_id": 608639, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/aPIhh.jpg?s=128&g=1", "display_name": "jww", "link": "https://stackoverflow.com/users/608639/jww"}, "edited": false, "score": 0, "creation_date": 1489663427, "post_id": 42820834, "comment_id": 72774763, "body": "Please post the URL you are using to connect to the server, and post the output of <code>openssl s_client -connect &lt;hostname&gt;:&lt;port&gt; -tls1 -servername &lt;hostname&gt; | openssl x509 -text -noout</code>. Do so by adding it to your question by clicking <i>Edit</i> (and don&#39;t post it as a comment). Otherwise, we can&#39;t reproduce it and there&#39;s not enough information to help troubleshoot it."}, {"owner": {"reputation": 82953, "user_id": 608639, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/aPIhh.jpg?s=128&g=1", "display_name": "jww", "link": "https://stackoverflow.com/users/608639/jww"}, "edited": false, "score": 0, "creation_date": 1489663460, "post_id": 42820834, "comment_id": 72774787, "body": "I don&#39;t know how you created your certificate, but <b><i><code>CN=example.com</code></i></b> is probably wrong. Hostnames always go in the <i>SAN</i>. If its present in the <i>CN</i>, then it must be present in the <i>SAN</i> too (you have to list it twice in this case). For more rules and reasons, see <a href=\"http://stackoverflow.com/a/21340898/608639\">How do you sign Certificate Signing Request with your Certification Authority</a> and <a href=\"http://stackoverflow.com/q/10175812/608639\">How to create a self-signed certificate with openssl?</a>"}], "answers": [{"comments": [{"owner": {"reputation": 2109, "user_id": 5508633, "user_type": "registered", "accept_rate": 33, "profile_image": "https://graph.facebook.com/10204865704992930/picture?type=large", "display_name": "Mike Fleming", "link": "https://stackoverflow.com/users/5508633/mike-fleming"}, "edited": false, "score": 0, "creation_date": 1489614923, "post_id": 42821029, "comment_id": 72754539, "body": "That last command generates the following error:  <code>Warning: Refusing to link: openssl Linking keg-only openssl means you may end up linking against the insecure, deprecated system OpenSSL while using the headers from Homebrew&#39;s openssl. Instead, pass the full include&#47;library paths to your compiler e.g.:   -I&#47;usr&#47;local&#47;opt&#47;openssl&#47;include -L&#47;usr&#47;local&#47;opt&#47;openssl&#47;lib</code>  Which I can&#39;t seem to get past."}], "tags": [], "owner": {"reputation": 1853, "user_id": 2501082, "user_type": "registered", "accept_rate": 20, "profile_image": "https://i.stack.imgur.com/qdJBQ.jpg?s=128&g=1", "display_name": "David Gross", "link": "https://stackoverflow.com/users/2501082/david-gross"}, "is_accepted": false, "score": 0, "last_activity_date": 1489613341, "creation_date": 1489613341, "answer_id": 42821029, "question_id": 42820834, "link": "https://stackoverflow.com/questions/42820834/ruby-ssl-error-read-server-certificate-b-certificate-verify-failed/42821029#42821029", "title": "Ruby SSL Error, read server &quot;certificate B: certificate verify failed&quot;", "body": "<p>Try running</p>\n\n<pre><code>gem update --system\n</code></pre>\n\n<p>Also make sure your openssl is linked </p>\n\n<pre><code> brew link openssl\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2109, "user_id": 5508633, "user_type": "registered", "accept_rate": 33, "profile_image": "https://graph.facebook.com/10204865704992930/picture?type=large", "display_name": "Mike Fleming", "link": "https://stackoverflow.com/users/5508633/mike-fleming"}, "is_accepted": false, "score": 0, "last_activity_date": 1490198799, "creation_date": 1490198799, "answer_id": 42957040, "question_id": 42820834, "link": "https://stackoverflow.com/questions/42820834/ruby-ssl-error-read-server-certificate-b-certificate-verify-failed/42957040#42957040", "title": "Ruby SSL Error, read server &quot;certificate B: certificate verify failed&quot;", "body": "<p>I was able to resolve my issue with what I consider to be a bit of a hack, but it may work for you. I just disabled SSL verification in the controller that throws the error with the following line of code:</p>\n\n<p><code>OpenSSL::SSL::VERIFY_PEER = OpenSSL::SSL::VERIFY_NONE</code></p>\n\n<p>From what I can tell, there's an issue with what certs Ruby and RVM use and it differs between versions. Every fix I tried involved downloading new certs and manually placing them in the Ruby or OpenSSL directories but that didn't work. Here are some of the resources I consulted during this adventure:</p>\n\n<ul>\n<li><a href=\"https://coderwall.com/p/ubl6iw/fix-ssl_connect-returned-1-errno-0-state-sslv3-read-server-certificate-b-certificate-verify-failed-openssl-ssl-sslerror\" rel=\"nofollow noreferrer\">Coderwall</a></li>\n<li><a href=\"https://toadle.me/2015/04/16/fixing-failing-ssl-verification-with-rvm.html\" rel=\"nofollow noreferrer\">Toadle.me</a></li>\n<li><a href=\"http://mislav.net/2013/07/ruby-openssl/\" rel=\"nofollow noreferrer\">Mislav</a></li>\n</ul>\n"}], "owner": {"reputation": 2109, "user_id": 5508633, "user_type": "registered", "accept_rate": 33, "profile_image": "https://graph.facebook.com/10204865704992930/picture?type=large", "display_name": "Mike Fleming", "link": "https://stackoverflow.com/users/5508633/mike-fleming"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 497, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1490198799, "creation_date": 1489612622, "last_edit_date": 1489614119, "question_id": 42820834, "link": "https://stackoverflow.com/questions/42820834/ruby-ssl-error-read-server-certificate-b-certificate-verify-failed", "title": "Ruby SSL Error, read server &quot;certificate B: certificate verify failed&quot;", "body": "<p>I'm attempting to save something to my DB but the default flow requires a successful call to geocode lat/lng before saving, which is when this error is thrown. </p>\n\n<p>The error I get is: </p>\n\n<p><code>SSL_connect returned=1 errno=0 state=SSLv3 read server certificate B: certificate verify failed</code></p>\n\n<p>I googled it and found what seemed to be a similar issue with <a href=\"http://guides.rubygems.org/ssl-certificate-update/#manual-solution-to-ssl-issue\" rel=\"nofollow noreferrer\">RubyGems</a>. I followed the instructions to manually change the ssl by downloading a new one and copying it into the ssl_certs directory to no avail. </p>\n\n<p>My environment:</p>\n\n<pre><code>OpenSSL 0.9.8zh 14 Jan 2016\nRVM 1.29.1\nRuby 2.2.2p95\nRails 4.2.7\n</code></pre>\n"}, {"tags": ["ruby", "sinatra", "eventmachine"], "answers": [{"comments": [{"owner": {"reputation": 2041, "user_id": 2071800, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/e1f877eccccc9e714b4d4fe03917f2a7?s=128&d=identicon&r=PG", "display_name": "Joe Half Face", "link": "https://stackoverflow.com/users/2071800/joe-half-face"}, "edited": false, "score": 0, "creation_date": 1489666260, "post_id": 42831371, "comment_id": 72776657, "body": "I need to test some EM logic inside response blocks"}], "tags": [], "owner": {"reputation": 11572, "user_id": 462015, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/e98ec4b9f3be7294da5328857b07de49?s=128&d=identicon&r=PG", "display_name": "Arturo Herrero", "link": "https://stackoverflow.com/users/462015/arturo-herrero"}, "is_accepted": false, "score": 0, "last_activity_date": 1489660070, "creation_date": 1489660070, "answer_id": 42831371, "question_id": 42820789, "link": "https://stackoverflow.com/questions/42820789/how-to-stop-event-machine-in-setup-like-this/42831371#42831371", "title": "How to stop Event Machine in setup like this?", "body": "<p>I think, in any case, you can use <code>Rack::Test</code> to test your Sinatra app. In order to run the specs, you don't need to run the server from the terminal.</p>\n\n<p>Take a look at the documentation, you can find different examples:\n<a href=\"http://www.sinatrarb.com/testing.html\" rel=\"nofollow noreferrer\">http://www.sinatrarb.com/testing.html</a></p>\n"}], "owner": {"reputation": 2041, "user_id": 2071800, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/e1f877eccccc9e714b4d4fe03917f2a7?s=128&d=identicon&r=PG", "display_name": "Joe Half Face", "link": "https://stackoverflow.com/users/2071800/joe-half-face"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 45, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1489660070, "creation_date": 1489612375, "question_id": 42820789, "link": "https://stackoverflow.com/questions/42820789/how-to-stop-event-machine-in-setup-like-this", "title": "How to stop Event Machine in setup like this?", "body": "<p>I have a Sinatra app, overall configured like described here <a href=\"http://recipes.sinatrarb.com/p/embed/event-machine\" rel=\"nofollow noreferrer\">sinatra docs</a>.</p>\n\n<p>It basically starts an event machine loop.</p>\n\n<p>Now, If I want to write a RSpec test, how do I start server like this and shutdown it after? </p>\n\n<p>I can do this from console by <code>ruby server.rb</code>, I may execute this command from spec file in test suit setup (however, I'm not sure if it is right). But then, even if I do so, how I stop it after? (and do I need or it will be stopped after test is finished?)</p>\n"}, {"tags": ["ruby-on-rails", "arrays", "ruby", "hash"], "comments": [{"owner": {"reputation": 9015, "user_id": 155826, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/55RCe.jpg?s=128&g=1", "display_name": "Ryan Crispin Heneise", "link": "https://stackoverflow.com/users/155826/ryan-crispin-heneise"}, "edited": false, "score": 0, "creation_date": 1489608583, "post_id": 42819647, "comment_id": 72751177, "body": "Can you please edit your answer and insert your code sample as text instead of as an image?"}, {"owner": {"reputation": 1041, "user_id": 6403303, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/f95b19e307dd58f82eb71f7698e2ff7a?s=128&d=identicon&r=PG&f=1", "display_name": "Oliver", "link": "https://stackoverflow.com/users/6403303/oliver"}, "reply_to_user": {"reputation": 9015, "user_id": 155826, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/55RCe.jpg?s=128&g=1", "display_name": "Ryan Crispin Heneise", "link": "https://stackoverflow.com/users/155826/ryan-crispin-heneise"}, "edited": false, "score": 0, "creation_date": 1489608720, "post_id": 42819647, "comment_id": 72751243, "body": "ok  i updated my question with code."}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1489609427, "post_id": 42819647, "comment_id": 72751619, "body": "Please read &quot;<a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>&quot;. We need the minimum code that will duplicate the problem. <code>@month_ends</code>, <code>@current_reporting_date</code> and <code>@reports_at_reporting_dates</code> are not defined so we can&#39;t run and test to help you."}, {"owner": {"reputation": 1041, "user_id": 6403303, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/f95b19e307dd58f82eb71f7698e2ff7a?s=128&d=identicon&r=PG&f=1", "display_name": "Oliver", "link": "https://stackoverflow.com/users/6403303/oliver"}, "edited": false, "score": 0, "creation_date": 1489609787, "post_id": 42819647, "comment_id": 72751840, "body": "ok i added all missing variables. i know my code is not pretty but it works for now (i will refactor at a later stage in my project)"}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1489611947, "post_id": 42819647, "comment_id": 72753089, "body": "I reformatted your code so that readers wouldn&#39;t have to scroll horizontally to read it. I trust you don&#39;t mind. Your questions concerns the manipulation of the values of <code>@reporting_dates</code> and <code>@revenue_green</code>. How you obtained those values is not relevant. &quot;This is my array&quot; to (but not including ) &quot;I want to create a hash...&quot; should be removed. I don&#39;t understand why you added the &quot;edit&quot; section, as it does not reference the two instance variables referenced above or <code>@new_hash</code>. I don&#39;t see that any (much less all) variables need to be instance variables (rather than local variables)."}], "answers": [{"comments": [{"owner": {"reputation": 1041, "user_id": 6403303, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/f95b19e307dd58f82eb71f7698e2ff7a?s=128&d=identicon&r=PG&f=1", "display_name": "Oliver", "link": "https://stackoverflow.com/users/6403303/oliver"}, "edited": false, "score": 0, "creation_date": 1489611245, "post_id": 42820207, "comment_id": 72752702, "body": "ok with this solution i get a new hash, however all values are 0"}, {"owner": {"reputation": 1240, "user_id": 403748, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/7a544ef278faa9055b82e00cd1bbc76c?s=128&d=identicon&r=PG", "display_name": "davej", "link": "https://stackoverflow.com/users/403748/davej"}, "reply_to_user": {"reputation": 1041, "user_id": 6403303, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/f95b19e307dd58f82eb71f7698e2ff7a?s=128&d=identicon&r=PG&f=1", "display_name": "Oliver", "link": "https://stackoverflow.com/users/6403303/oliver"}, "edited": false, "score": 0, "creation_date": 1489611784, "post_id": 42820207, "comment_id": 72752999, "body": "I ran all the code that I posted, in ruby 2.2.3, and got the @new_hash I posted, both versions."}, {"owner": {"reputation": 1240, "user_id": 403748, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/7a544ef278faa9055b82e00cd1bbc76c?s=128&d=identicon&r=PG", "display_name": "davej", "link": "https://stackoverflow.com/users/403748/davej"}, "reply_to_user": {"reputation": 1041, "user_id": 6403303, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/f95b19e307dd58f82eb71f7698e2ff7a?s=128&d=identicon&r=PG&f=1", "display_name": "Oliver", "link": "https://stackoverflow.com/users/6403303/oliver"}, "edited": false, "score": 0, "creation_date": 1489611863, "post_id": 42820207, "comment_id": 72753035, "body": "Just changed &quot;@reporting_dates: ...&quot; to &quot;@reporting_dates = ...&quot; to make code easier to copy and paste."}, {"owner": {"reputation": 1041, "user_id": 6403303, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/f95b19e307dd58f82eb71f7698e2ff7a?s=128&d=identicon&r=PG&f=1", "display_name": "Oliver", "link": "https://stackoverflow.com/users/6403303/oliver"}, "edited": false, "score": 0, "creation_date": 1489612238, "post_id": 42820207, "comment_id": 72753222, "body": "I made it work!! I had to change @revenue_green[d] to @revenue_green[d.to_date]. If you update your solution I click to accept the answer. Thanks!"}, {"owner": {"reputation": 1240, "user_id": 403748, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/7a544ef278faa9055b82e00cd1bbc76c?s=128&d=identicon&r=PG", "display_name": "davej", "link": "https://stackoverflow.com/users/403748/davej"}, "reply_to_user": {"reputation": 1041, "user_id": 6403303, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/f95b19e307dd58f82eb71f7698e2ff7a?s=128&d=identicon&r=PG&f=1", "display_name": "Oliver", "link": "https://stackoverflow.com/users/6403303/oliver"}, "edited": false, "score": 0, "creation_date": 1489613444, "post_id": 42820207, "comment_id": 72753862, "body": "@Oliver, you&#39;re evidently using rails, because to_date isn&#39;t a String method in pure Ruby.  But I can&#39;t in good conscience change my answer, because it works fine as is (i.e., without the &quot;.to_date&quot;) with the original parameters you  supplied, in both irb and rails console (arguably better in rails console, because you don&#39;t need &quot;require &#39;date&#39;&quot;). <a href=\"https://repl.it/GX3u/0\" rel=\"nofollow noreferrer\">repl.it/GX3u/0</a>  Follow your heart."}], "tags": [], "owner": {"reputation": 1240, "user_id": 403748, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/7a544ef278faa9055b82e00cd1bbc76c?s=128&d=identicon&r=PG", "display_name": "davej", "link": "https://stackoverflow.com/users/403748/davej"}, "is_accepted": true, "score": 1, "last_activity_date": 1489611843, "last_edit_date": 1489611843, "creation_date": 1489610188, "answer_id": 42820207, "question_id": 42819647, "link": "https://stackoverflow.com/questions/42819647/how-to-combine-array-and-hash-by-date/42820207#42820207", "title": "How to combine array and hash by date", "body": "<p>Assuming your starting objects are</p>\n\n<pre><code>@reporting_dates = [\"2017-01-27\", \"2017-02-24\", \"Fri, 10 Mar 2017\"]\n@revenue_green = {\"Fri, 10 Mar 2017\"=&gt;7.0}\n</code></pre>\n\n<p>(i.e., quotes around \"Fri, 10 Mar 2017\"), then this should work:</p>\n\n<pre><code>require 'date'\n@new_hash = Hash.new\n@reporting_dates.each {|d| @new_hash[Date.parse(d)] = @revenue_green[d] || 0}\n\n@new_hash =&gt; {#&lt;Date: 2017-01-27 ((2457781j,0s,0n),+0s,2299161j)&gt;=&gt;0, #&lt;Date: 2017-02-24 ((2457809j,0s,0n),+0s,2299161j)&gt;=&gt;0, #&lt;Date: 2017-03-10 ((2457823j,0s,0n),+0s,2299161j)&gt;=&gt;7.0}\n</code></pre>\n\n<p>or, if you want the keys in the new hash to be strings,</p>\n\n<pre><code>@reporting_dates.each {|d| @new_hash[Date.parse(d).strftime(\"%Y-%m-%d\")] = @revenue_green[d] || 0}\n\n@new_hash =&gt; {\"2017-01-27\"=&gt;0, \"2017-02-24\"=&gt;0, \"2017-03-10\"=&gt;7.0}\n</code></pre>\n"}], "owner": {"reputation": 1041, "user_id": 6403303, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/f95b19e307dd58f82eb71f7698e2ff7a?s=128&d=identicon&r=PG&f=1", "display_name": "Oliver", "link": "https://stackoverflow.com/users/6403303/oliver"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 76, "favorite_count": 0, "accepted_answer_id": 42820207, "answer_count": 1, "score": 0, "last_activity_date": 1489611843, "creation_date": 1489608286, "last_edit_date": 1489611450, "question_id": 42819647, "link": "https://stackoverflow.com/questions/42819647/how-to-combine-array-and-hash-by-date", "title": "How to combine array and hash by date", "body": "<p>I have an array and a hash. The array contains dates and the hash contains a date as key and a float as value (revenue_green).</p>\n\n<p>This is my array:</p>\n\n<pre><code>@reporting_dates = @month_ends.find_all {|e| e &lt; @current_reporting_date.to_s } &lt;&lt;\n  @current_reporting_date\n</code></pre>\n\n<p>And my hash:</p>\n\n<pre><code>@revenue_green = @reports_at_reporting_dates.sum('revenue_green')\n</code></pre>\n\n<p>Which gives me the following output:</p>\n\n<pre><code>@reporting_dates: [\"2017-01-27\", \"2017-02-24\", Fri, 10 Mar 2017]\n@revenue_green: {Fri, 10 Mar 2017=&gt;7.0}\n</code></pre>\n\n<p>For two dates of <code>@reporting_dates</code> (2017-01-27 and 2017-02-24) <code>@revenue_green</code> does not have any values.</p>\n\n<p>I want to create a hash that gives me the following output:</p>\n\n<pre><code>@new_hash: {2017-01-27 =&gt; 0, 2017-02-24 =&gt; 0, 2017-03-10 =&gt; 7.0}\n</code></pre>\n\n<p>so for all dates where no <code>revenue_green</code> exists it should put a 0.</p>\n\n<p>How can I do that?</p>\n\n<p><strong>UPDATE</strong></p>\n\n<pre><code>@month_ends = [\"2017-01-27\", \"2017-02-24\", \"2017-03-31\", \"2017-04-28\",\n               \"2017-05-26\", \"2017-06-30\", \"2017-07-28\", \"2017-08-25\",\n               \"2017-09-29\", \"2017-10-27\", \"2017-11-24\", \"2017-12-29\"]\n\n@all_dates = (Date.new(@reporting_year).\n  beginning_of_year..1.month.from_now).\n  to_a.reverse.select { |day| day.wday == 5 }\n\n@current_reporting_date = @all_dates.select { |d| d &lt;= Date.today }.first\n\n@all_reports = Report.all\n\n@reports_at_reporting_dates = @all_reports.where(:day =&gt; @reporting_dates).order(:day)\n</code></pre>\n"}, {"tags": ["ruby", "twitter", "rubygems"], "comments": [{"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1489609644, "post_id": 42819636, "comment_id": 72751749, "body": "Please read &quot;<a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>&quot;. We need just enough code necessary to <i>run</i> and test to duplicate the problem. We also need the minimum supporting data that helps demonstrate it. Without that it wastes our time. SO isn&#39;t a &quot;help me&quot; site, as you mentioned, but in order to help others, we need certain things."}, {"owner": {"reputation": 15, "user_id": 7273776, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/838fad5228cc42ca406043ada0207ca8?s=128&d=identicon&r=PG&f=1", "display_name": "P3rzival", "link": "https://stackoverflow.com/users/7273776/p3rzival"}, "reply_to_user": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1489610458, "post_id": 42819636, "comment_id": 72752266, "body": "In order to duplicate the problem you would need to have the twitter secret keys, which I&#39;m obviously not going to publish here. I was just wondering if someone that has more expertise on ruby than the little knowledge that I have could see a big syntax error that could be the problem. Anyway, you are right in the sense that I didn&#39;t specified the problem itself. Thank you for telling me, I&#39;ll edit the post ;)"}], "answers": [{"comments": [{"owner": {"reputation": 15, "user_id": 7273776, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/838fad5228cc42ca406043ada0207ca8?s=128&d=identicon&r=PG&f=1", "display_name": "P3rzival", "link": "https://stackoverflow.com/users/7273776/p3rzival"}, "edited": false, "score": 0, "creation_date": 1489611885, "post_id": 42820393, "comment_id": 72753053, "body": "True! Thank you very much! I guess I just need to read the errors better... haha"}], "tags": [], "owner": {"reputation": 1853, "user_id": 2501082, "user_type": "registered", "accept_rate": 20, "profile_image": "https://i.stack.imgur.com/qdJBQ.jpg?s=128&g=1", "display_name": "David Gross", "link": "https://stackoverflow.com/users/2501082/david-gross"}, "is_accepted": false, "score": 0, "last_activity_date": 1489701791, "last_edit_date": 1489701791, "creation_date": 1489610861, "answer_id": 42820393, "question_id": 42819636, "link": "https://stackoverflow.com/questions/42819636/how-to-filter-twitter-api-mentions/42820393#42820393", "title": "How to filter Twitter API mentions", "body": "<p>You're not closing your each block:</p>\n\n<pre><code>'order.rb:30: syntax error, unexpected end-of-input, expecting keyword_end'\n</code></pre>\n\n<p>Read the error message and it will tell you where to fix it. </p>\n\n<pre><code>   @tweets.each do |tweet|\n     if (tweet.text.include? \"order\" &amp;&amp; tweet.text.include? \"collect\")\n      @collect_tweets.push(tweet)\n     elsif (tweet.text.include? \"order\" &amp;&amp; tweet.text.include? \"delivery\")\n      @delivery_tweets.push(tweet)\n     end\n   end\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 15, "user_id": 7273776, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/838fad5228cc42ca406043ada0207ca8?s=128&d=identicon&r=PG&f=1", "display_name": "P3rzival", "link": "https://stackoverflow.com/users/7273776/p3rzival"}, "edited": false, "score": 0, "creation_date": 1489611979, "post_id": 42820588, "comment_id": 72753109, "body": "True, I figured it out after reading the other guys comment and just when I came here to close this I saw your answer. Thank you very much anyway. Appreciate that you took your time answering as good as you did \ud83d\udc4c\ud83c\udffc\ud83d\ude0a"}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1489702268, "post_id": 42820588, "comment_id": 72799883, "body": "Be careful calling them &quot;brackets&quot; (<code>[...]</code>). They&#39;re parenthesis (<code>(...)</code>). You <i>could</i> call them &quot;square brackets&quot; vs. &quot;round brackets&quot; but commonly they&#39;re known as brackets and parenthesis and are not interchangeable for this use. Also, those are methods, not functions."}], "tags": [], "owner": {"reputation": 1434, "user_id": 5010370, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/5ef5c21eb66b79ab4fa94df6b40be5b4?s=128&d=identicon&r=PG&f=1", "display_name": "Lasse Sviland", "link": "https://stackoverflow.com/users/5010370/lasse-sviland"}, "is_accepted": true, "score": 0, "last_activity_date": 1489701894, "last_edit_date": 1489701894, "creation_date": 1489611629, "answer_id": 42820588, "question_id": 42819636, "link": "https://stackoverflow.com/questions/42819636/how-to-filter-twitter-api-mentions/42820588#42820588", "title": "How to filter Twitter API mentions", "body": "<p>You have a few errors in your code.</p>\n\n<p>The first on line 23 and 25 in your code, is that you need parenthesis for the parameter for the <code>include?</code> method. You need that when you are listing multiple methods like you are. You can change that to this:</p>\n\n<pre><code>if (tweet.text.include?(\"order\") &amp;&amp; tweet.text.include?(\"collect\"))\n</code></pre>\n\n<p>The other error on line 30 is that you are missing an <code>end</code> for your each loop.</p>\n\n<p>The <code>each</code> loop should look something like this:</p>\n\n<pre><code>@tweets.each do |tweet|\n    if (tweet.text.include?(\"order\") &amp;&amp; tweet.text.include?(\"collect\"))\n        @collect_tweets.push(tweet)\n    elsif (tweet.text.include?(\"order\") &amp;&amp; tweet.text.include?(\"delivery\"))\n        @delivery_tweets.push(tweet)\n    end\nend\n</code></pre>\n"}], "owner": {"reputation": 15, "user_id": 7273776, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/838fad5228cc42ca406043ada0207ca8?s=128&d=identicon&r=PG&f=1", "display_name": "P3rzival", "link": "https://stackoverflow.com/users/7273776/p3rzival"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 119, "favorite_count": 0, "accepted_answer_id": 42820588, "answer_count": 2, "score": 0, "last_activity_date": 1489701894, "creation_date": 1489608245, "last_edit_date": 1489701409, "question_id": 42819636, "link": "https://stackoverflow.com/questions/42819636/how-to-filter-twitter-api-mentions", "title": "How to filter Twitter API mentions", "body": "<p>I'm creating a project using the Twitter gem and need to filter the tweets that I receive from <code>mentions_timeline</code>.</p>\n\n<p>I thought about filtering through a couple of <code>if</code> statements reading the text of the tweet:</p>\n\n<pre><code>require 'sinatra'\nrequire 'twitter'\nrequire 'sinatra/reloader'\n\ninclude ERB::Util\n\nbefore do\n  config = {\n      :consumer_key =&gt; 'xxx',\n      :consumer_secret =&gt; 'xxx',\n      :access_token =&gt; 'xxx',\n      :access_token_secret =&gt; 'xxx'\n  }\n    @client = Twitter::REST::Client.new(config)\nend\n\nget '/order' do\n  @tweets = @client.mentions_timeline\n  @collect_tweets = Array.new\n  @delivery_tweets = Array.new\n\n  @tweets.each do |tweet|\n    if (tweet.text.include? \"order\" &amp;&amp; tweet.text.include? \"collect\")\n      @collect_tweets.push(tweet)\n    elsif (tweet.text.include? \"order\" &amp;&amp; tweet.text.include? \"delivery\")\n      @delivery_tweets.push(tweet)\n    end\n\n  erb :order\nend\n</code></pre>\n\n<p>But it won't work.</p>\n\n<p>I'm receiving this error:</p>\n\n<pre><code>/Users/me/Projects/team-13/order.rb:23: syntax error, unexpected tSTRING_BEG, expecting ')' rder\" &amp;&amp; tweet.text.include? \"collect\") ^ /Users/me/Projects/team-13/order.rb:25: syntax error, unexpected tSTRING_BEG, expecting ')' rder\" &amp;&amp; tweet.text.include? \"delivery\") ^ /Users/me/Projects/team-13/order.rb:30: syntax error, unexpected end-of-input, expecting keyword_end\n</code></pre>\n"}, {"tags": ["ruby", "mongodb", "mongoid"], "owner": {"reputation": 39282, "user_id": 336920, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/6e2dbeb23d3fc6552a6e26800ed63289?s=128&d=identicon&r=PG", "display_name": "B Seven", "link": "https://stackoverflow.com/users/336920/b-seven"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 46, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1489607496, "creation_date": 1489607496, "question_id": 42819412, "link": "https://stackoverflow.com/questions/42819412/what-is-a-good-way-to-do-an-atomic-insert-or-prevent-a-race-condition-on-create", "title": "What is a good way to do an atomic insert or prevent a race condition on create with Mongoid?", "body": "<pre><code>class User\n  include Mongoid::Document\n\n  field :email, type: String\n\n  validates_uniqueness_of email\nend\n</code></pre>\n\n<p>Although Mongoid supports <a href=\"https://docs.mongodb.com/ruby-driver/v2.2/tutorials/6.0.0/mongoid-persistence/#atomic\" rel=\"nofollow noreferrer\">atomic operations</a>, I do not see one for insert.</p>\n\n<p>Since <code>User.create</code> is not atomic, it seems that 2 Users could be created with the same email address simultaneously.</p>\n\n<p>So, what is a good way to ensure that 2 users do not register the same email address simultaneously?</p>\n\n<p>I can see one solution is to use a unique DB index, but are there any other good ways of doing this?</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 5535, "user_id": 7295772, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ZhWhR.jpg?s=128&g=1", "display_name": "Fabrizio Bertoglio", "link": "https://stackoverflow.com/users/7295772/fabrizio-bertoglio"}, "edited": false, "score": 0, "creation_date": 1489606653, "post_id": 42818976, "comment_id": 72750055, "body": "please share your strong params declaration for <code>{url: result[:url], content: result[:content], filename: result[:filename]}</code> from your controller. Usually the DB performs a roll back if some mandatory fields are missing. If you are not declaring strong params and permitting those fields, then they will be empty, like it show in your console create action. All the fields are empty. <code>#&lt;Plag id: nil, created_at: nil, updated_at: nil, url: &quot;http:&#47;&#47;watabelabs.com&quot;, content: &quot;How can we help?&quot;, filename: &quot;watabelabs_com.txt&quot;, user_id: nil, doc_id: nil&gt;</code>"}, {"owner": {"reputation": 27, "user_id": 7302402, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/EdRp6.jpg?s=128&g=1", "display_name": "James Mureithi", "link": "https://stackoverflow.com/users/7302402/james-mureithi"}, "reply_to_user": {"reputation": 5535, "user_id": 7295772, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ZhWhR.jpg?s=128&g=1", "display_name": "Fabrizio Bertoglio", "link": "https://stackoverflow.com/users/7295772/fabrizio-bertoglio"}, "edited": false, "score": 0, "creation_date": 1489607934, "post_id": 42818976, "comment_id": 72750827, "body": "<code>2.3.3 :001 &gt; Plag.crawl_and_scrap(&quot;http:&#47;&#47;watabelabs.com&quot;) crawling the web... scrapping http:&#47;&#47;watabelabs.com for data...    (0.1ms)  begin transaction    (0.1ms)  rollback transaction ActiveRecord::RecordInvalid: Validation failed: Doc must exist, User must exist </code>"}, {"owner": {"reputation": 27, "user_id": 7302402, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/EdRp6.jpg?s=128&g=1", "display_name": "James Mureithi", "link": "https://stackoverflow.com/users/7302402/james-mureithi"}, "reply_to_user": {"reputation": 5535, "user_id": 7295772, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ZhWhR.jpg?s=128&g=1", "display_name": "Fabrizio Bertoglio", "link": "https://stackoverflow.com/users/7295772/fabrizio-bertoglio"}, "edited": false, "score": 0, "creation_date": 1489608109, "post_id": 42818976, "comment_id": 72750915, "body": "This is the error when i use  ` create!  ` instead .There is a relationship between Plag model and User  and Doc model...immediately the scrap is over it saves automatically to the db...Don&#39;t know anyway to add the user id and doc id to the db alongside or before hand"}, {"owner": {"reputation": 27, "user_id": 7302402, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/EdRp6.jpg?s=128&g=1", "display_name": "James Mureithi", "link": "https://stackoverflow.com/users/7302402/james-mureithi"}, "reply_to_user": {"reputation": 5535, "user_id": 7295772, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ZhWhR.jpg?s=128&g=1", "display_name": "Fabrizio Bertoglio", "link": "https://stackoverflow.com/users/7295772/fabrizio-bertoglio"}, "edited": false, "score": 0, "creation_date": 1489608210, "post_id": 42818976, "comment_id": 72750962, "body": "Im doing this from the rails console directly ... i don&#39;t have anything in my controller yet as i am still testing the code."}, {"owner": {"reputation": 5535, "user_id": 7295772, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ZhWhR.jpg?s=128&g=1", "display_name": "Fabrizio Bertoglio", "link": "https://stackoverflow.com/users/7295772/fabrizio-bertoglio"}, "edited": false, "score": 0, "creation_date": 1489608232, "post_id": 42818976, "comment_id": 72750978, "body": "Is that the error message? Do you think we could have more details with <code>plag = Plag.craw..</code> etc and <code>plag.erros.full_messages</code>? As I wrote in my message. Rollback is connected to missing parameters, usually parameters that are foreign keys are mandatory like <code>Doc_id</code> and <code>user_id</code>. You call <code>self.scrap(url)</code> and from <code>url</code> they obtain all the parameters. Are you sure that you do not need to define them as <code>strong_params</code>. If not, could you tell us more about those parameters? Thanks"}, {"owner": {"reputation": 5535, "user_id": 7295772, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ZhWhR.jpg?s=128&g=1", "display_name": "Fabrizio Bertoglio", "link": "https://stackoverflow.com/users/7295772/fabrizio-bertoglio"}, "edited": false, "score": 0, "creation_date": 1489608344, "post_id": 42818976, "comment_id": 72751044, "body": "You can create Strong Params in your console. <code>params = ActiveController::Parameters.new()</code> between () you need to include the parameters, then you need to call .permit to permit those parameters. You can read detailed informations in the following API <a href=\"http://api.rubyonrails.org/classes/ActionController/Parameters.html\" rel=\"nofollow noreferrer\">api.rubyonrails.org/classes/ActionController/Parameters.html</a>"}, {"owner": {"reputation": 5535, "user_id": 7295772, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ZhWhR.jpg?s=128&g=1", "display_name": "Fabrizio Bertoglio", "link": "https://stackoverflow.com/users/7295772/fabrizio-bertoglio"}, "edited": false, "score": 0, "creation_date": 1489608377, "post_id": 42818976, "comment_id": 72751058, "body": "Search for Doc_id and user_id in the github documentation"}, {"owner": {"reputation": 27, "user_id": 7302402, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/EdRp6.jpg?s=128&g=1", "display_name": "James Mureithi", "link": "https://stackoverflow.com/users/7302402/james-mureithi"}, "reply_to_user": {"reputation": 5535, "user_id": 7295772, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ZhWhR.jpg?s=128&g=1", "display_name": "Fabrizio Bertoglio", "link": "https://stackoverflow.com/users/7295772/fabrizio-bertoglio"}, "edited": false, "score": 0, "creation_date": 1489610118, "post_id": 42818976, "comment_id": 72752047, "body": "<code>2.3.3 :001 &gt; params = ActionController::Parameters.new(user_id: 1 ,doc_id: 1)  =&gt; &lt;ActionController::Parameters {&quot;user_id&quot;=&gt;1, &quot;doc_id&quot;=&gt;1} permitted: false&gt;  2.3.3 :002 &gt; params.permit  =&gt; &lt;ActionController::Parameters {} permitted: true&gt;  2.3.3 :003 &gt;</code> done this but still need to make the user_id and the doc_id save into the db when i do <code>Plag.crawl_and_scrap(&quot;http:&#47;&#47;watabelabs.com&quot;)</code>"}, {"owner": {"reputation": 27, "user_id": 7302402, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/EdRp6.jpg?s=128&g=1", "display_name": "James Mureithi", "link": "https://stackoverflow.com/users/7302402/james-mureithi"}, "reply_to_user": {"reputation": 5535, "user_id": 7295772, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ZhWhR.jpg?s=128&g=1", "display_name": "Fabrizio Bertoglio", "link": "https://stackoverflow.com/users/7295772/fabrizio-bertoglio"}, "edited": false, "score": 0, "creation_date": 1489610300, "post_id": 42818976, "comment_id": 72752160, "body": "a user and a documents with those ids already exist in their respective tables"}, {"owner": {"reputation": 5535, "user_id": 7295772, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ZhWhR.jpg?s=128&g=1", "display_name": "Fabrizio Bertoglio", "link": "https://stackoverflow.com/users/7295772/fabrizio-bertoglio"}, "edited": false, "score": 0, "creation_date": 1489612566, "post_id": 42818976, "comment_id": 72753408, "body": "So this is third party code? is there documentation somewhere that I can read? What is the name and the website? Is this a gem?"}, {"owner": {"reputation": 5535, "user_id": 7295772, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ZhWhR.jpg?s=128&g=1", "display_name": "Fabrizio Bertoglio", "link": "https://stackoverflow.com/users/7295772/fabrizio-bertoglio"}, "edited": false, "score": 0, "creation_date": 1489614139, "post_id": 42818976, "comment_id": 72754185, "body": "<a href=\"http://anemone.rubyforge.org/information-and-examples.html\" rel=\"nofollow noreferrer\">anemone.rubyforge.org/information-and-examples.html</a>"}], "answers": [{"tags": [], "owner": {"reputation": 16234, "user_id": 2202702, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/lTGWe.jpg?s=128&g=1", "display_name": "Arslan Ali", "link": "https://stackoverflow.com/users/2202702/arslan-ali"}, "is_accepted": true, "score": 1, "last_activity_date": 1489606732, "creation_date": 1489606732, "answer_id": 42819206, "question_id": 42818976, "link": "https://stackoverflow.com/questions/42818976/create-function-inside-my-model-method-not-working-for-my-rails-5-application/42819206#42819206", "title": "create function inside my model method not working for my rails 5 application", "body": "<p>Since it says: <strong>rollback transaction</strong>, it definitely means that the model isn't valid that you are going to create.</p>\n\n<p>There are multiple ways to solve this problem: You can use <a href=\"https://github.com/deivid-rodriguez/byebug\" rel=\"nofollow noreferrer\">byebug</a> to debug the code, and check for <code>plag.errors.full_messages</code> where <code>plag</code> being the instance.</p>\n\n<p>You may also use <code>create!</code> instead of <code>create</code>, as the method <code>create!</code> will throw an exception if the model values aren't the valid ones.</p>\n"}, {"comments": [{"owner": {"reputation": 27, "user_id": 7302402, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/EdRp6.jpg?s=128&g=1", "display_name": "James Mureithi", "link": "https://stackoverflow.com/users/7302402/james-mureithi"}, "edited": false, "score": 0, "creation_date": 1490123580, "post_id": 42821205, "comment_id": 72969346, "body": "Thanks...This took a while but reading the anemone documentation really helped..Most appreciated Fabrizio."}], "tags": [], "owner": {"reputation": 5535, "user_id": 7295772, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ZhWhR.jpg?s=128&g=1", "display_name": "Fabrizio Bertoglio", "link": "https://stackoverflow.com/users/7295772/fabrizio-bertoglio"}, "is_accepted": false, "score": 0, "last_activity_date": 1489647358, "last_edit_date": 1489647358, "creation_date": 1489613986, "answer_id": 42821205, "question_id": 42818976, "link": "https://stackoverflow.com/questions/42818976/create-function-inside-my-model-method-not-working-for-my-rails-5-application/42821205#42821205", "title": "create function inside my model method not working for my rails 5 application", "body": "<p>This is the code from your console.\nIf you notice, when you call the method in the console, it performs a query to create an object and try to save it to the database. As we discussed in the chat the two last fields <code>user_id</code> and <code>doc_id</code> are empty.</p>\n\n<pre><code>&lt;Plag id: nil, created_at: nil, updated_at: nil, url: \"http://watabelabs.com\", content: \"How can we help?\", filename: \"watabelabs_com.txt\", user_id: nil, doc_id: nil&gt; \n</code></pre>\n\n<p>This is the method. The method saves the <code>result</code> of the <code>.scrap()</code> method and uses the <code>result</code> variable as input for <code>Plag.create()</code>.\nIf you watch at your <code>Plag.create()</code> it misses two parameters <code>result[:user_id]</code> and <code>result[:doc_id]</code>. I say this because it uses the same parameters for the <code>result[:url]</code> with url, <code>result[:content]</code> with content ... etc..</p>\n\n<p>You need to set a breakpoint as shown below and inspect the result variant, so that you can correctly feed the <code>Plag.create</code>.</p>\n\n<pre><code>def self.scrap(url)\n  result = @anemon.scrap(url)\n  binding.pry # inspect the result variant\n  Plag.create({url: result[:url], content: result[:content], filename: result[:filename]}) if result\nend\n</code></pre>\n\n<p>I am quoting the documentation</p>\n\n<blockquote>\n  <p>Interacting with Pages</p>\n  \n  <p>Any URL that Anemone finds in an  tag's HREF attribute is considered a page, and represented by an instance of the Page class. A page might not be an HTML document; it could be an RSS feed, an image, etc.</p>\n  \n  <p>Each Page object stores several pieces of information:</p>\n</blockquote>\n\n<pre><code>url - The URL of the page\naliases - Other URLs that redirected to this page, or the Page that this one redirects to\nheaders - The full HTTP response headers\ncode - The HTTP response code (e.g. 200, 301, 404)\nbody - The raw HTTP response body\ndoc - A Nokogiri::HTML::Document of the page body (if applicable)\nlinks - An Array of all the URLs found on the page that point to the same domain\n</code></pre>\n\n<blockquote>\n  <p>For your convenience, each Page also has a data attribute, which is an OpenStruct for storing any data you wish to associate with a Page, such as title, meta-description, etc.</p>\n  \n  <p>Here is an example of using Anemone to print a sorted list of all page titles on a site:</p>\n</blockquote>\n\n<pre><code>Anemone.crawl(\"http://www.example.com/\") do |anemone|\n  titles = []\n  anemone.on_every_page { |page| titles.push page.doc.at('title').inner_html rescue nil }\n  anemone.after_crawl { puts titles.compact.sort }\nend\n</code></pre>\n"}], "owner": {"reputation": 27, "user_id": 7302402, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/EdRp6.jpg?s=128&g=1", "display_name": "James Mureithi", "link": "https://stackoverflow.com/users/7302402/james-mureithi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 299, "favorite_count": 1, "accepted_answer_id": 42819206, "answer_count": 2, "score": 0, "last_activity_date": 1489647358, "creation_date": 1489606059, "last_edit_date": 1489606758, "question_id": 42818976, "link": "https://stackoverflow.com/questions/42818976/create-function-inside-my-model-method-not-working-for-my-rails-5-application", "title": "create function inside my model method not working for my rails 5 application", "body": "<p>I have an app that uses that party code that i wrote and is located in my lib directory of my rails application.The code generates data that is supposed to generate data that is supposed to be saved to the db but when the create function is triggered it triggers nil results... the error from the code when the code is run from the rails console is as shown below:  </p>\n\n<pre><code>2.3.3 :004 &gt; Plag.scrap('http://watabelabs.com')\nscrapping http://watabelabs.com for data...\ncrawling the web...\n   (0.1ms)  begin transaction\n   (0.1ms)  rollback transaction\n =&gt; #&lt;Plag id: nil, created_at: nil, updated_at: nil, url: \"http://watabelabs.com\", content: \"How can we help?\", filename: \"watabelabs_com.txt\", user_id: nil, doc_id: nil&gt; \n2.3.3 :005 &gt; Plag.all\n  Plag Load (0.3ms)  SELECT \"plags\".* FROM \"plags\"\n =&gt; #&lt;ActiveRecord::Relation []&gt; \n2.3.3 :006 &gt; Plag.count\n   (0.2ms)  SELECT COUNT(*) FROM \"plags\"\n =&gt; 0\n</code></pre>\n\n<p>The code in my model is this:</p>\n\n<pre><code>def self.scrap(url)\n  result = @anemon.scrap(url)\n  Plag.create({url: result[:url], content: result[:content], filename: result[:filename]}) if result\nend\n</code></pre>\n\n<p>The code in my lib directory that generates the data to be stored in the db is this:\n` def crawl_and_scrap(url)</p>\n\n<pre><code>  filename = url.gsub(\"http://\", \"\").split(\".\").join(\"_\").strip + \".txt\"\n\n  #crawl the web to get information out web pages\n      puts \"crawling the web...\"\n\n      Anemone.crawl(url) do |anemone|\n        anemone.on_every_page do |page|\n          @urls = []\n          @urls &lt;&lt; page.url\n\n        end\n      end\n  #feed in the urls obtained from the crawl to start scrapping  \n      puts \"scrapping #{url} for data...\"\n\n      data = []\n\n      @urls.each do |urli|\n        html_data = open(urli).read\n        nokogiri_object = Nokogiri::HTML(html_data)\n        elements = nokogiri_object.xpath(\"//p\",\"//h1\",\"//h2\",\"//h3\",\"//h4\",\"//h5\",\"//h6\")\n\n        elements.each do |element|\n          data &lt;&lt; element.text\n        end\n      end\n    write_to_file(url, data)\n    #store_visited_link(url)\n    # in ruby the last statement in a method is always the returned value\n    # of the particular method\n    {:url =&gt; url, :content =&gt; data , :filename =&gt; filename}\n\n\nend `\n</code></pre>\n\n<p>What could I be doing wrong?</p>\n"}, {"tags": ["ruby", "regex", "ruby-on-rails-4", "gsub"], "comments": [{"owner": {"reputation": 91121, "user_id": 179125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5594142dcc49a24b1902ec8059181f8d?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan Running", "link": "https://stackoverflow.com/users/179125/jordan-running"}, "edited": false, "score": 0, "creation_date": 1489605506, "post_id": 42818425, "comment_id": 72749403, "body": "As an aside, don&#39;t do <code>MuscleGroup.where(...).map {|n| n[:name] }</code> in Rails if you can do this instead: <code>MuscleGroup.where(...).pluck(:name)</code>"}], "answers": [{"comments": [{"owner": {"reputation": 366, "user_id": 4368437, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/1c9d1ba391d6d3ef3336421958d6c714?s=128&d=identicon&r=PG&f=1", "display_name": "codeinspired", "link": "https://stackoverflow.com/users/4368437/codeinspired"}, "edited": false, "score": 0, "creation_date": 1489605376, "post_id": 42818519, "comment_id": 72749323, "body": "Thanks.  These are all good answers. I awarded points to other answers."}, {"owner": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "reply_to_user": {"reputation": 366, "user_id": 4368437, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/1c9d1ba391d6d3ef3336421958d6c714?s=128&d=identicon&r=PG&f=1", "display_name": "codeinspired", "link": "https://stackoverflow.com/users/4368437/codeinspired"}, "edited": false, "score": 1, "creation_date": 1489605461, "post_id": 42818519, "comment_id": 72749375, "body": "@codeinspired: If anything, lassvi should get the accepted answer. He was the first one to notice that you&#39;re treating the problem backwards, and proposed a cleaner solution."}], "tags": [], "owner": {"reputation": 80721, "user_id": 797049, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/5f4f7a23e3d0134123a66015bdc4edd1?s=128&d=identicon&r=PG", "display_name": "Mark Reed", "link": "https://stackoverflow.com/users/797049/mark-reed"}, "is_accepted": true, "score": 2, "last_activity_date": 1489605379, "last_edit_date": 1489605379, "creation_date": 1489604423, "answer_id": 42818519, "question_id": 42818425, "link": "https://stackoverflow.com/questions/42818425/writing-a-regexp-as-argument-to-gsub-method-stumped/42818519#42818519", "title": "Writing a regexp as argument to gsub! method -- stumped?", "body": "<p>Like this?</p>\n\n<pre><code>irb(main):001:0&gt; s=\"Chest - pectoralis, Quads - quadriceps, Hamstrings - biceps femoris\"\nirb(main):002:0&gt; s.gsub(/(\\w+)\\s+-\\s+[^,]*/, '\\1')\n=&gt; \"Chest, Quads, Hamstrings\"\n</code></pre>\n\n<p>That searches for any number (<code>+</code>) of \"word\" characters (<code>\\w)</code>, which it remembers because they're in parentheses, followed by space (<code>\\s+</code>), a hyphen, more space, and anything that's not a comma (<code>[^,]*</code>). It replaces all of that with just the word characters that it remembered (<code>\\1</code>).</p>\n\n<p>The pattern is pretty specific and would need to be modified if, for example, the common name might be more than one word.</p>\n\n<p>Also, I just did <code>gsub</code> above to return (and display, in <code>irb</code>) the result; to modify the string in place you would use <code>gsub!</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "is_accepted": false, "score": 2, "last_activity_date": 1489605309, "last_edit_date": 1489605309, "creation_date": 1489604648, "answer_id": 42818582, "question_id": 42818425, "link": "https://stackoverflow.com/questions/42818425/writing-a-regexp-as-argument-to-gsub-method-stumped/42818582#42818582", "title": "Writing a regexp as argument to gsub! method -- stumped?", "body": "<h1>MuscleGroup#common_name</h1>\n\n<p>The easiest way would be to define a new method inside <code>MuscleGroup</code> model :</p>\n\n<pre><code>def common_name\n  name.split(' - ').first\nend\n</code></pre>\n\n<p>Your code becomes :</p>\n\n<pre><code>@muscle_group_names = MuscleGroup.where(id: @muscle_group_ids).map { |muscle_group|\n  muscle_group.common_name }.join(', ')\n</code></pre>\n\n<h1>Double split</h1>\n\n<p>If for some reason, you already have a complete string, a double split might be more robust and easier to read than a big regexp.</p>\n\n<p>You can split around <code>', '</code> to get an array of <code>\"common muscle name - technical muscle name\"</code>. You can then split each one of those strings around <code>' - '</code> and keep the first part :</p>\n\n<pre><code>\"Chest - pectoralis, Quads - quadriceps, Hamstrings - biceps femoris\".\n  split(', ').map{|s| s.split(' - ').first}\n# [\"Chest\", \"Quads\", \"Hamstrings\"]\n</code></pre>\n\n<p>Once you have the array, you can join back to a string :</p>\n\n<pre><code>\"Chest - pectoralis, Quads - quadriceps, Hamstrings - biceps femoris\".\n  split(', ').map{|s| s.split(' - ').first}.join(', ')\n#  \"Chest, Quads, Hamstrings\"\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1434, "user_id": 5010370, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/5ef5c21eb66b79ab4fa94df6b40be5b4?s=128&d=identicon&r=PG&f=1", "display_name": "Lasse Sviland", "link": "https://stackoverflow.com/users/5010370/lasse-sviland"}, "is_accepted": false, "score": 5, "last_activity_date": 1489604934, "creation_date": 1489604934, "answer_id": 42818667, "question_id": 42818425, "link": "https://stackoverflow.com/questions/42818425/writing-a-regexp-as-argument-to-gsub-method-stumped/42818667#42818667", "title": "Writing a regexp as argument to gsub! method -- stumped?", "body": "<p>You could just split the name on <code>\" -\"</code> in your map function, and only return the first part like this:</p>\n\n<pre><code>if @muscle_group_ids == [1, 13, 14]\n    @muscle_group_names = MuscleGroup.where(id: @muscle_group_ids).map { |n|   \n        n = n[:name].split(\" -\")[0] \n    }.join(', ')\nend\n=&gt; \"Chest, Quads, Hamstrings\"\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "edited": false, "score": 0, "creation_date": 1489605368, "post_id": 42818700, "comment_id": 72749318, "body": "What if the common name has two words?"}], "tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": false, "score": 2, "last_activity_date": 1489637061, "last_edit_date": 1489637061, "creation_date": 1489605045, "answer_id": 42818700, "question_id": 42818425, "link": "https://stackoverflow.com/questions/42818425/writing-a-regexp-as-argument-to-gsub-method-stumped/42818700#42818700", "title": "Writing a regexp as argument to gsub! method -- stumped?", "body": "<pre><code> r = /[[:alpha:]]+     # match one or more letters\n      [\\s+[:alpha:]+]* # match one or more spaces followed by one or more letters,\n                       # zero or more times, to match any words after the first\n      (?=\\s+-\\s+)      # match a hyphen surrounded by whitespace in a positive lookahead\n     /x                # free-spacing regex definition mode\n\n\"Chest - pectoralis, Quads - quadriceps, Achilles heel - Achilles tendon\".scan(r)\n  #=&gt; [\"Chest\", \"Quads\", \"Achilles heel\"]\n</code></pre>\n"}], "owner": {"reputation": 366, "user_id": 4368437, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/1c9d1ba391d6d3ef3336421958d6c714?s=128&d=identicon&r=PG&f=1", "display_name": "codeinspired", "link": "https://stackoverflow.com/users/4368437/codeinspired"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 116, "favorite_count": 0, "accepted_answer_id": 42818519, "answer_count": 4, "score": 2, "last_activity_date": 1489637061, "creation_date": 1489604166, "question_id": 42818425, "link": "https://stackoverflow.com/questions/42818425/writing-a-regexp-as-argument-to-gsub-method-stumped", "title": "Writing a regexp as argument to gsub! method -- stumped?", "body": "<p>In my Rails 4.2.6 / Ruby 2.2.4 app, I have a db query method that generates a string; for example:</p>\n\n<pre><code>\"Chest - pectoralis, Quads - quadriceps, Hamstrings - biceps femoris\"\n</code></pre>\n\n<p>However, the result I want is:</p>\n\n<pre><code>\"Chest, Quads, Hamstrings\"\n</code></pre>\n\n<p>The domain tracks 21 muscle groups, which means the generated string can have a lot of different combinations. However, the string will always have the same pattern, that is: \"common muscle name - technical muscle name\".</p>\n\n<p>With conditional logic, I can get the result I want by passing \"string\" arguments to the gsub method, like this:</p>\n\n<pre><code> if @muscle_group_ids == [1, 13, 14]\n    @muscle_group_names = MuscleGroup.where(id: @muscle_group_ids).map { |n|   n[:name]\n   }.join(', ').gsub!(\"Chest - pectoralis\", \"Chest\").gsub!(\"Quads -    quadriceps\", \"Quads\").gsub!(\"Hamstrings - biceps femoris\", \"Hamstrings\")\nend\n=&gt; \"Chest, Quads, Hamstrings\"\n</code></pre>\n\n<p>That approach isn't viable; it's tedious and brittle. There must be a better way to remove dashes and technical names from the generated strings. I'm stumped on how to best accomplish this.  Is it possible to write a regexp to achieve the desired result, and how?  Is there an easier, better, cleaner approach to achieve what I'm trying to do? Thanks!</p>\n"}, {"tags": ["ruby-on-rails", "arrays", "ruby", "memory-leaks", "fibonacci"], "comments": [{"owner": {"reputation": 924, "user_id": 4745239, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f7f1542c1ebee087c5961a012bfd95cf?s=128&d=identicon&r=PG", "display_name": "pulsejet", "link": "https://stackoverflow.com/users/4745239/pulsejet"}, "edited": false, "score": 1, "creation_date": 1489604760, "post_id": 42818344, "comment_id": 72748953, "body": "Overflow, most likely. You can&#39;t just have huge numbers in variables in most languages."}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "reply_to_user": {"reputation": 924, "user_id": 4745239, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f7f1542c1ebee087c5961a012bfd95cf?s=128&d=identicon&r=PG", "display_name": "pulsejet", "link": "https://stackoverflow.com/users/4745239/pulsejet"}, "edited": false, "score": 1, "creation_date": 1489604813, "post_id": 42818344, "comment_id": 72748987, "body": "@RadialApps: in ruby you can. No problems whatsoever."}, {"owner": {"reputation": 924, "user_id": 4745239, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f7f1542c1ebee087c5961a012bfd95cf?s=128&d=identicon&r=PG", "display_name": "pulsejet", "link": "https://stackoverflow.com/users/4745239/pulsejet"}, "reply_to_user": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1489605118, "post_id": 42818344, "comment_id": 72749163, "body": "@SergioTulentsev, you&#39;re right I guess (just looked it up). My second guess then would be insufficient memory for allocation for a bigger data type when it gets big enough."}, {"owner": {"reputation": 14010, "user_id": 3109182, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/a4b305f0077055b4fdcf715067775d5a?s=128&d=identicon&r=PG", "display_name": "Anthony", "link": "https://stackoverflow.com/users/3109182/anthony"}, "edited": false, "score": 2, "creation_date": 1489605129, "post_id": 42818344, "comment_id": 72749170, "body": "Huge numbers are expensive to store in memory, run your program and open another tab and run <code>top -o mem</code>."}, {"owner": {"reputation": 14010, "user_id": 3109182, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/a4b305f0077055b4fdcf715067775d5a?s=128&d=identicon&r=PG", "display_name": "Anthony", "link": "https://stackoverflow.com/users/3109182/anthony"}, "edited": false, "score": 0, "creation_date": 1489607074, "post_id": 42818344, "comment_id": 72750309, "body": "I&#39;m seeing really strange results where strings of the same bytesize as it&#39;s Numeric equivalent are keeping memory overhead at 1/40th the size..."}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 1, "creation_date": 1489610532, "post_id": 42818344, "comment_id": 72752307, "body": "The code should handle 1000 correctly. BTW, <code>50_00_000</code> is 5,000,000 and should be written <code>5_000_000</code> if you&#39;re going to use that notation. The details are important when programming."}], "answers": [{"comments": [{"owner": {"reputation": 1843, "user_id": 4067720, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a52c645614505bcaeb65a6c5199158c1?s=128&d=identicon&r=PG", "display_name": "Glyoko", "link": "https://stackoverflow.com/users/4067720/glyoko"}, "edited": false, "score": 0, "creation_date": 1489606107, "post_id": 42818913, "comment_id": 72749703, "body": "How do you calculate 1-2 TB? Not saying you&#39;re wrong, but what&#39;s the math behind that figure?"}, {"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "reply_to_user": {"reputation": 1843, "user_id": 4067720, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a52c645614505bcaeb65a6c5199158c1?s=128&d=identicon&r=PG", "display_name": "Glyoko", "link": "https://stackoverflow.com/users/4067720/glyoko"}, "edited": false, "score": 0, "creation_date": 1489607551, "post_id": 42818913, "comment_id": 72750595, "body": "@Glyoko: the length of a number representation in base <code>b</code> is roughly <code>log_b(n)</code>. The conversion factor between decimal and binary is roughly 3 to 10 (10^3 == 1000, 2^10 == 1024). fib(5000000) is roughly 7*10^1044000, so over a million decimal digits, which translates to roughly 3.47 million bits, or 423 KiByte. Not sure where the 1 TiByte number comes from. I think Marc refers to the size of the whole array. I&#39;m just in the process of crunching the numbers myself."}, {"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1489614715, "post_id": 42818913, "comment_id": 72754442, "body": "I think you are confusing Ruby&#39;s <code>BigDecimal</code> which is an arbitrary precision <b>decimal</b> type with Ruby&#39;s <code>Integer</code> which is an arbitrary size <b>binary</b> integer type. <code>Integer</code> uses exactly 8 (binary) digits per byte, or about 2.5 decimal digits. However, like you wrote yourself, that doesn&#39;t have a big influence on your argument, though."}, {"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1489616047, "post_id": 42818913, "comment_id": 72755075, "body": "Another fun fact: displaying the array on the terminal will take about one month on my machine (late 2011 MacBook Pro with the standard macOS Terminal.app)."}, {"owner": {"reputation": 1302, "user_id": 1368977, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c79672007d59af69a05f2b5f6929b53f?s=128&d=identicon&r=PG", "display_name": "Marc Rohloff", "link": "https://stackoverflow.com/users/1368977/marc-rohloff"}, "edited": false, "score": 0, "creation_date": 1489627929, "post_id": 42818913, "comment_id": 72758797, "body": "J&#246;rg, no I meant <code>Bignum</code>, even though Ruby 2.4 removed it the implementation is still there behind the scenes. You are right though it is implemented as a bitstring."}], "tags": [], "owner": {"reputation": 1302, "user_id": 1368977, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c79672007d59af69a05f2b5f6929b53f?s=128&d=identicon&r=PG", "display_name": "Marc Rohloff", "link": "https://stackoverflow.com/users/1368977/marc-rohloff"}, "is_accepted": false, "score": 0, "last_activity_date": 1489612499, "last_edit_date": 1489612499, "creation_date": 1489605822, "answer_id": 42818913, "question_id": 42818344, "link": "https://stackoverflow.com/questions/42818344/how-to-fix-aborting-fibonacci-sequence-code/42818913#42818913", "title": "How to fix aborting Fibonacci sequence code", "body": "<p>That is probably better than the alternative. The 5 millionth fibonacci number would have about a million digits. Ignoring the time to calculate it, storing all of those would take a terabyte of memory and at least another 2 terabytes of memory or storage for the output. </p>\n\n<p>The bottom line, if you want to do this you cannot do it on your average desktop machine, nor should you do it in Ruby.</p>\n\n<p>For those who asked how I got the number:</p>\n\n<p>According to Wikipedia <a href=\"https://en.wikipedia.org/wiki/Fibonacci_number#Magnitude\" rel=\"nofollow noreferrer\">https://en.wikipedia.org/wiki/Fibonacci_number#Magnitude</a> the number of digits is approximately 0.2090 times n, so for 5 the millionth number that would be about a million digits. I haven't looked closely at Ruby's BigNumber implementation but I assumed 2 digits per byte which is the simplest representation for decimal arithmetic. You could pack a few more bits in (3 digits in 10 bits instead of 2 digits in 8) but it does not change the results that much here.</p>\n\n<p>For the whole array I just used the standard formula for the sum of an arithmetic series. <code>(n/2)*(a0 + an)</code>: 5,000,000 / 2 * 1,000,000 or 2.5e12 digits. At 2 digits per byte, that would be about a terabyte of internal memory (Not counting the overhead that Ruby is adding with its internal structure and indirection).</p>\n\n<p>If you print it out or store it, you can count on 1 digit per byte (in UTF-8) so that would take 2.5 terabytes, not counting the 4,999,999 commas.</p>\n"}, {"tags": [], "owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "is_accepted": true, "score": 2, "last_activity_date": 1489612465, "last_edit_date": 1495540824, "creation_date": 1489606591, "answer_id": 42819158, "question_id": 42818344, "link": "https://stackoverflow.com/questions/42818344/how-to-fix-aborting-fibonacci-sequence-code/42819158#42819158", "title": "How to fix aborting Fibonacci sequence code", "body": "<p>The problem with this program is likely the memory constraints. But do you <em>really</em> need all those numbers? If yes, then you better get more hardware. </p>\n\n<p>Otherwise, if you need <em>just</em> the five millionth number in the sequence, you could greatly speed up your program by storing just the two last numbers.</p>\n\n<p>The final step of improvement: calculating an arbitrary member of fibonacci sequence in <strong>constant</strong> time! - \n\"<a href=\"https://stackoverflow.com/questions/33338333/find-the-millionth-fibonacci-in-java\">Find The Millionth Fibonacci in Java</a>\".</p>\n"}, {"tags": [], "owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "is_accepted": false, "score": 1, "last_activity_date": 1489613734, "last_edit_date": 1489613734, "creation_date": 1489613388, "answer_id": 42821042, "question_id": 42818344, "link": "https://stackoverflow.com/questions/42818344/how-to-fix-aborting-fibonacci-sequence-code/42821042#42821042", "title": "How to fix aborting Fibonacci sequence code", "body": "<p>Generating a Fibonacci sequence of 5M is one problem because of the memory and time involved.</p>\n\n<p>After generating it the next question becomes reusing those results so you don't have to do it twice. Even if it'd fit, storing the sequence in memory is silly since the code or machine crashing will force regenerating the values, and if you need 5,000,000 you could wait a long time before the application is ready to do something useful, so put them on disk, either in a flat file, or into a database where you can retrieve just the specific value you need relatively quickly.</p>\n\n<p>Here's simple code to generate a flat file that I tested up to 25,000 before I got bored and stopped it. It seemed to do fine for that test but I imagine it'll slow down as Ruby shuffles things around. What the upper limit is I don't know and lack the patience to find out.</p>\n\n<pre><code>limit = ARGV.shift.to_i\n\nputs \"#{limit} iterations\"\n\nFile.open('fibonacci.out', 'w') do |fo|\n  ary = [0, 1]\n  fo.puts ary\n  break if limit &lt; 2\n\n  (limit - ary.length).times do |i|\n    next_nbr = ary[-1] + ary[-2]\n    ary.shift\n    ary.push(next_nbr) \n\n    fo.puts next_nbr\n    print 2 + i, \"\\r\"\n  end\n\n  puts\nend\n</code></pre>\n\n<p>You might gain a little speed by getting rid of <code>ary</code>.</p>\n\n<p>Running that with</p>\n\n<pre><code>ruby test.rb 5\n</code></pre>\n\n<p>resulted in \"fibonacci.out\" containing:</p>\n\n<pre><code>0\n1\n1\n2\n3\n</code></pre>\n\n<p>which seems about right.</p>\n\n<p>There are Fibonacci generators for databases but if they're recursive you'll take out your DBM eventually as it tries to generate big numbers so using a simple generator then storing the values into a table seems more reasonable.</p>\n"}, {"tags": [], "owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "is_accepted": false, "score": 4, "last_activity_date": 1489616000, "creation_date": 1489616000, "answer_id": 42821688, "question_id": 42818344, "link": "https://stackoverflow.com/questions/42818344/how-to-fix-aborting-fibonacci-sequence-code/42821688#42821688", "title": "How to fix aborting Fibonacci sequence code", "body": "<p>Storing the first 5000000 Fibonacci numbers using YARV's implementation of <code>Integer</code> uses exactly 1084762047712 bytes (assuming 8 bits per byte) on a 64 bit platform. That's close to one TiByte (0.9865853351 TiByte, to be precise). And that's just the space for the numbers themselves, there's also the overhead for the array (a couple of bytes) and the pointers inside the array (a little bit less than 5000000 times 8, or a little over 38 MiByte).</p>\n\n<p>Computing those 5000000 numbers even <em>without</em> storing them (only remembering the last 2 to avoid re-computation), took a little over 20 minutes on my late 2011 model MacBook Pro. Computing them while at the same time allocating 1 TiByte of RAM is going to be much slower. If you don't have 1 TiByte of RAM, and the OS starts swapping out to disk, it is going to be orders of magnitude slower, even if you have a blazing RAID of SSDs connected via FibreChannel.</p>\n\n<p>In order to print the array, it needs to be represented as a string first. Even just the commas and spaces <em>without</em> the numbers are already 4999999*2 characters, which need close to 10 MiByte of RAM (assuming a single-byte character set). If you tried to print out just the commas and spaces, you would need about 2500 pages of DIN A4 paper, or 1250 sheets if you print double-sided. Office paper is typically sold in stacks of 500 sheets which are roughly 5 cm high, so you have 2.5 stacks about 12.5 cm high <em>just for the commas and spaces</em>.</p>\n\n<p>The total number of digits, and thus characters (and bytes) for the 5000000 numbers, is roughly 2.7 trillion digits, that's about 2.5 TiByte of RAM for the final string to be printed. Printing that out on DIN A4 double-sided would result in a stack of paper 33 km high, 4 times the height of Mt. Everest.</p>\n\n<p>All in all, at the point that you are calling <code>print</code>, your program needs about 3.5 TiByte of RAM.</p>\n\n<p>Printing to the console is actually surprisingly slow, on my standard macOS Terminal.app, I get about 1 MiByte/s, which means that not only will calculating the 5000000 numbers take at least tens of minutes without even counting the time for allocating all those objects and all that RAM, not only will your program use 3.5 TiByte of RAM, just the act of displaying the final array on the terminal will take about <em>one month</em>.</p>\n\n<p><strong>tl;dr summary</strong>: 5000000 Fibonacci numbers are <strong>big</strong>.</p>\n"}], "owner": {"reputation": 312, "user_id": 2617208, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/295465a92b18ba44201e6f2dc492d521?s=128&d=identicon&r=PG", "display_name": "Santosh Mohanty", "link": "https://stackoverflow.com/users/2617208/santosh-mohanty"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 240, "favorite_count": 0, "accepted_answer_id": 42819158, "answer_count": 4, "score": 3, "last_activity_date": 1489655741, "creation_date": 1489603899, "last_edit_date": 1489655741, "question_id": 42818344, "link": "https://stackoverflow.com/questions/42818344/how-to-fix-aborting-fibonacci-sequence-code", "title": "How to fix aborting Fibonacci sequence code", "body": "<p>I am trying to get a Fibonacci sequence of 5 million elements.</p>\n\n<p>This code aborts abnormally, when I pass 1000 as a parameter. </p>\n\n<pre><code>def self.fibo_seq(limit)\n  result_array = [0,1]\n  return result_array if limit &lt; 2\n   while result_array.length &lt;= limit\n     result_array &lt;&lt; result_array[-1] + result_array[-2]\n   end\n  return result_array\nend\nres= Multiple.fibo_seq(5_000_000)\nprint res\n\nError: [1]    22382 killed     ruby fibo.rb\n</code></pre>\n\n<p>Example output:</p>\n\n<pre><code># &gt;&gt; [0, 1, 1, 2, 3, 5, 8, 13, 21, 34, , 1...] upto 5 Million elements\n</code></pre>\n"}, {"tags": ["html", "ruby", "embedding"], "answers": [{"tags": [], "owner": {"reputation": 1434, "user_id": 5010370, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/5ef5c21eb66b79ab4fa94df6b40be5b4?s=128&d=identicon&r=PG&f=1", "display_name": "Lasse Sviland", "link": "https://stackoverflow.com/users/5010370/lasse-sviland"}, "is_accepted": true, "score": 1, "last_activity_date": 1489604236, "creation_date": 1489604236, "answer_id": 42818448, "question_id": 42818233, "link": "https://stackoverflow.com/questions/42818233/manipulating-variables-in-html-embedded-ruby/42818448#42818448", "title": "Manipulating Variables in HTML-Embedded Ruby", "body": "<p>You can use the clone or dup functions for this.</p>\n\n<p>In your case where food is a string, they will both work.</p>\n\n<pre><code>newfood = food.dup\nnewfood = food.clone\n</code></pre>\n\n<p>The functions work a bit different, this is what ruby-doc says:</p>\n\n<blockquote>\n  <p>In general, clone and dup may have different semantics in descendant classes. While clone is used to duplicate an object, including its internal state, dup typically uses the class of the descendant object to create the new instance.\n  <a href=\"http://ruby-doc.org/core-2.4.0/Object.html#method-i-dup-label-on+dup+vs+clone\" rel=\"nofollow noreferrer\">http://ruby-doc.org/core-2.4.0/Object.html#method-i-dup-label-on+dup+vs+clone</a></p>\n</blockquote>\n"}], "owner": {"reputation": 93, "user_id": 7518095, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/6fee4d52fec344078f254379ae90f2dc?s=128&d=identicon&r=PG&f=1", "display_name": "user7518095", "link": "https://stackoverflow.com/users/7518095/user7518095"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 50, "favorite_count": 0, "accepted_answer_id": 42818448, "answer_count": 1, "score": 0, "last_activity_date": 1489604236, "creation_date": 1489603579, "question_id": 42818233, "link": "https://stackoverflow.com/questions/42818233/manipulating-variables-in-html-embedded-ruby", "title": "Manipulating Variables in HTML-Embedded Ruby", "body": "<p>I'm using embedded Ruby in HTML and am trying to create a new variable; however, this seems to be modifying the HTML formatting over the code even though I am just trying to create a new variable and modify it. It seems like when I manipulate newfood, I am also changing the value stored in \"food\" (almost in a pass-by-reference way). How can I pass it by value (if possible)?   </p>\n\n<pre><code>&lt;% newfood = food%&gt;\n\n&lt;% newfood.gsub!('a','b')%&gt;\n</code></pre>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 28612, "user_id": 5025116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7WdYi.jpg?s=128&g=1", "display_name": "Sebastian Palma", "link": "https://stackoverflow.com/users/5025116/sebastian-palma"}, "edited": false, "score": 0, "creation_date": 1499974977, "post_id": 42817991, "comment_id": 77151768, "body": "You had enough attention to your question, appreciate the given time."}], "answers": [{"tags": [], "owner": {"reputation": 4150, "user_id": 7470620, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/49f3026fe13841e41d1805178eed9a3c?s=128&d=identicon&r=PG", "display_name": "eiko", "link": "https://stackoverflow.com/users/7470620/eiko"}, "is_accepted": false, "score": 1, "last_activity_date": 1489606087, "last_edit_date": 1489606087, "creation_date": 1489605610, "answer_id": 42818857, "question_id": 42817991, "link": "https://stackoverflow.com/questions/42817991/ruby-looping-through-a-string-deleting-groups-of-characters-until-a-desired-out/42818857#42818857", "title": "Ruby, looping through a string deleting groups of characters until a desired output is achieved", "body": "<p>I could be wrong (this is ruby, after all) but I don't think you'll find a one-liner for this because ruby's utility functions generally aren't recursive. But you can use regex to simplify your logic, at the very least:</p>\n\n<pre><code>def remove(s)\n  while s =~ /(?&lt;!\\!)\\!([\\!]{2})+(?!\\!)/ || s =~ /(?&lt;!\\?)\\?([\\?]{2})+(?!\\?)/\n    s.gsub! /(?&lt;!\\!)\\!([\\!]{2})+(?!\\!)/, \"\"  # remove odd !\n    s.gsub! /(?&lt;!\\?)\\?([\\?]{2})+(?!\\?)/, \"\"  # remove odd ?\n  end\n  return s\nend\n</code></pre>\n\n<p>To make the regex less mind-boggling, it helps to look at them with 'a' instead of '?' and '!':</p>\n\n<pre><code>/(?&lt;!a)a([a]{2})+(?!a)/ #regex for 'a'\n\n(?&lt;!a) #negative lookbehind: the match cannot start with an 'a'\n\na([a]{2})+ #the match should be an 'a' followed by 1 or more pairs\n\n(?!a) #negative lookahead: the match cannot end with an 'a'\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 52334, "user_id": 702638, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/892f65bc0a8a0949ab88598de7d83cab?s=128&d=identicon&r=PG", "display_name": "Hunter McMillen", "link": "https://stackoverflow.com/users/702638/hunter-mcmillen"}, "is_accepted": false, "score": 1, "last_activity_date": 1489606008, "creation_date": 1489606008, "answer_id": 42818962, "question_id": 42817991, "link": "https://stackoverflow.com/questions/42817991/ruby-looping-through-a-string-deleting-groups-of-characters-until-a-desired-out/42818962#42818962", "title": "Ruby, looping through a string deleting groups of characters until a desired output is achieved", "body": "<p>I don't know the exact Ruby syntax for this, but you could simplify your solution by using regular expressions: </p>\n\n<ol>\n<li>Gather all matches of consecutive characters\n\n<ul>\n<li>if all matches are of even length or 1 exit</li>\n</ul></li>\n<li>Test if matches are an odd length\n\n<ul>\n<li>if an odd length, replace with the empty string</li>\n<li>else do nothing </li>\n</ul></li>\n<li>Goto step 1</li>\n</ol>\n\n<p>A solution in Perl would be: </p>\n\n<pre><code>#!perl\n\nuse strict;\nuse warnings;\n\nuse feature qw(say);\n\nmy $string = '!????!!!?';\nsub reduce {\n  my ($s) = @_;\n  while ( my @matches = $s =~ m/((.)\\2+)/g ) {\n    last if ! grep { length($_) &gt; 1 &amp;&amp; length($_) % 2 == 1 } @matches;\n    foreach my $match ( @matches ) {\n      $s =~ s/\\Q$match// if length($match) &gt; 1 &amp;&amp; length($match) % 2 == 1;\n    }\n  }\n\n  return $s;\n}\n\nsay reduce($string);\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1302, "user_id": 1368977, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c79672007d59af69a05f2b5f6929b53f?s=128&d=identicon&r=PG", "display_name": "Marc Rohloff", "link": "https://stackoverflow.com/users/1368977/marc-rohloff"}, "is_accepted": false, "score": 1, "last_activity_date": 1489608053, "creation_date": 1489608053, "answer_id": 42819586, "question_id": 42817991, "link": "https://stackoverflow.com/questions/42817991/ruby-looping-through-a-string-deleting-groups-of-characters-until-a-desired-out/42819586#42819586", "title": "Ruby, looping through a string deleting groups of characters until a desired output is achieved", "body": "<p>It should be simple enough with a regular expression replacement</p>\n\n<pre><code>def remove(string)\n  begin\n    original = string\n    string.gsub!(/(\\!{3,})|(\\?{3,})/) { |s| s.length.even? ? s : '' } \n  end until original == string\n  string\nend\n\nputs remove(\"!????!!!?\").inspect # answer == \"!\"\nputs remove(\"!???!!\").inspect    # answer == \"\"\nputs remove(\"!????!!\").inspect   # answer == \"!????!!\"\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": true, "score": 1, "last_activity_date": 1489649740, "last_edit_date": 1489649740, "creation_date": 1489647847, "answer_id": 42827351, "question_id": 42817991, "link": "https://stackoverflow.com/questions/42817991/ruby-looping-through-a-string-deleting-groups-of-characters-until-a-desired-out/42827351#42827351", "title": "Ruby, looping through a string deleting groups of characters until a desired output is achieved", "body": "<p>Suppose</p>\n\n<pre><code>str = \"???!!!???!\"\n</code></pre>\n\n<p>If we first remove the two groups <code>\"???\"</code> we are left with <code>\"!!!!\"</code>, which cannot be reduced further.</p>\n\n<p>If we first remove the group <code>\"!!!\"</code> we are left with <code>\"??????!\"</code>, which cannot be reduced further.</p>\n\n<p>If we are permitted to remove all odd groups of either character without reference to the effect that either has on the other, we obtain <code>!</code>, which cannot be reduced further.</p>\n\n<p>It's not clear what rule is to be used. Here are three possibilities and code to implement each.</p>\n\n<p>I will use the following two regular expressions, and in the first two cases a helper method.</p>\n\n<pre><code>Rq = /\n     (?&lt;!\\?)  # do not match a question mark, negative lookbehind\n     \\?       # match a question mark\n     (\\?{2})+ # match two question marks one or more times\n     (?!\\?)   # do not match a question mark, negative lookahead\n     /x       # free-spacing regex definition mode \n</code></pre>\n\n<p>which is commonly written <code>/(?&lt;!\\?)\\?(\\?{2})+(?!\\?)/</code>.</p>\n\n<p>Similarly,</p>\n\n<pre><code>Rx = /(?&lt;!!)!(!{2})+(?!!)/\n\ndef sequential(str, first_regex, second_regex)\n  s = str.dup\n  loop do\n    size = s.size\n    s = s.gsub(first_regex,'').gsub(second_regex,'')\n    return s if s.size == size\n  end\nend\n</code></pre>\n\n<p>I apply each of the three methods below to two example strings:</p>\n\n<pre><code>str1 = \"???!!!???!\"\nstr2 = 50.times.map { ['?', '!'].sample }.join\n  #=&gt; \"?!!!?!!!?!??????!!!?!!??!!???!?!????!?!!!?!?!???!?\"\n</code></pre>\n\n<p><strong>Replace all odd groups of <code>\"?\"</code> then odd groups of <code>\"!\"</code> then repeat until no further removals are possible</strong></p>\n\n<pre><code>def question_before_exclamation(str)\n  sequential(str, Rq, Rx)\nend\n\nquestion_before_exclamation str1 #=&gt; \"!!!!\"\nquestion_before_exclamation str2 #=&gt; \"??!??!?!!?!?!!?\" \n</code></pre>\n\n<p><strong>Replace all odd groups of <code>\"!\"</code> then odd groups of <code>\"?\"</code> then repeat until no further removals are possible</strong></p>\n\n<pre><code>def exclamation_before_question(str)\n  sequential(str, Rx, Rq)\nend\n\nexclamation_before_question str1 #=&gt; \"??????!\"\nexclamation_before_question str2 #=&gt; \"??!????!!?!?!!?!?!!?\" \n</code></pre>\n\n<p><strong>Replace all odd groups of both <code>\"?\"</code> and <code>\"!\"</code> then repeat until no further removals are possible</strong></p>\n\n<pre><code>Rqx = /#{Rq}|#{Rx}/\n  #=&gt; /(?-mix:(?&lt;!\\?)\\?(\\?{2})+(?!\\?))|(?-mix:(?&lt;!!)!(!{2})+(?!!))/\n\ndef question_and_explanation(str)\n  s = str.dup\n  loop do\n    size = s.size\n    s = s.gsub(Rqx,'')\n    return s if s.size == size\n  end\nend\n\nquestion_and_explanation str1 #=&gt; \"!\"\nquestion_and_explanation str2 #=&gt; \"??!?!!?!?!!?!?!!?\"\n</code></pre>\n"}], "owner": {"reputation": 1090, "user_id": 7113209, "user_type": "registered", "accept_rate": 63, "profile_image": "https://graph.facebook.com/10154091942466794/picture?type=large", "display_name": "hancho", "link": "https://stackoverflow.com/users/7113209/hancho"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 133, "favorite_count": 0, "accepted_answer_id": 42827351, "answer_count": 4, "score": 1, "last_activity_date": 1499975106, "creation_date": 1489602752, "last_edit_date": 1499975106, "question_id": 42817991, "link": "https://stackoverflow.com/questions/42817991/ruby-looping-through-a-string-deleting-groups-of-characters-until-a-desired-out", "title": "Ruby, looping through a string deleting groups of characters until a desired output is achieved", "body": "<p>I have a coding problem I solved and want to refactor. I know there has to be a cleaner way of doing what I did.</p>\n\n<p>The goal is to write a method that takes a string of <code>\"!\"</code> and <code>\"?\"</code> and reduces the string by eliminating all odd groupings of each symbol. </p>\n\n<p>Example - a string <code>\"????!!!\"</code> would have an odd grouping of <code>\"!!!\"</code> because there are three in a row. These would be deleted from the string. </p>\n\n<p>If there is only one <code>\"!\"</code> or <code>\"?\"</code> its left because it is not in a group. </p>\n\n<p>Ex -</p>\n\n<pre><code>remove(\"!????!!!?\") answer == \"!\"    \n#\u00a0=&gt; (\"!????!!!?\" --&gt; \"!?????\" --&gt; \"!\")\n</code></pre>\n\n<p>In the first string, the only odd grouping is <code>\"!!!\"</code>, once removed, it leaves a new string with an odd grouping <code>\"?????\"</code>. You remove the next odd grouping so you're left with <code>\"!\"</code>. This fits the desired output. </p>\n\n<p>Another example </p>\n\n<pre><code>remove(\"!???!!\") == \"\"\n# =&gt; (\"!???!!\" --&gt; \"!!!\" --&gt; \"\")\n</code></pre>\n\n<p>Current code:</p>\n\n<pre><code>def remove(s)\n  arr = [s]\n  i = 0\n\n  until i == arr[0].length\n    s = s.chars.chunk{|c|c}.map{ |n,a| a.join }.select{|x| x if x.length.even? || x.length &lt;= 1}.join\n    arr &lt;&lt; s\n    i += 1\n  end \n\n  return arr[-1]\nend\n</code></pre>\n\n<p>My code solves this problem and all test cases. I have a suspicion that my until loop can be removed/refactored so that I could solve this problem in one line and have spent hours trying to figure it out with no luck.  </p>\n"}, {"tags": ["ruby", "ruby-on-rails-4"], "comments": [{"owner": {"reputation": 47232, "user_id": 1772830, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Qtoqg.jpg?s=128&g=1", "display_name": "Andrey Deineko", "link": "https://stackoverflow.com/users/1772830/andrey-deineko"}, "edited": false, "score": 0, "creation_date": 1489602470, "post_id": 42817758, "comment_id": 72747542, "body": "<code>class Myclass   def mymethod(a, b, c, d = &#39;e&#39;)     b = f     StoredProcedure::Test.exec!(         a, b ,c ,d)   end end</code>"}], "answers": [{"tags": [], "owner": {"reputation": 4150, "user_id": 7470620, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/49f3026fe13841e41d1805178eed9a3c?s=128&d=identicon&r=PG", "display_name": "eiko", "link": "https://stackoverflow.com/users/7470620/eiko"}, "is_accepted": false, "score": 0, "last_activity_date": 1489602538, "creation_date": 1489602538, "answer_id": 42817907, "question_id": 42817758, "link": "https://stackoverflow.com/questions/42817758/assign-model-attribute-value-to-instance-method-parameter/42817907#42817907", "title": "assign model attribute value to instance method parameter", "body": "<p>I think your best bet is to set b to nil, then assign it in the method if the user hasn't specified a parameter:</p>\n\n<pre><code>class myclass\n  def mymethod(a, c, b = nil, d = 'e')\n    b ||= f\n    StoredProcedure::Test.exec!(a, b, c, d)\n  end\nend\n</code></pre>\n\n<p>Also note that I re-ordered the parameters. Optional parameters must come after required parameters.</p>\n\n<p>Of course, if you want b to be f all the time and don't expect users to override it, you should just get rid of it entirely:</p>\n\n<pre><code>class myclass\n  def mymethod(a, c, d = 'e')\n    StoredProcedure::Test.exec!(a, f, c, d)\n  end\nend\n</code></pre>\n"}], "owner": {"reputation": 1695, "user_id": 427354, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/8b1da0d743d87175b7cc0ef93c8fcad7?s=128&d=identicon&r=PG", "display_name": "User7354632781", "link": "https://stackoverflow.com/users/427354/user7354632781"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 22, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1489602538, "creation_date": 1489602125, "question_id": 42817758, "link": "https://stackoverflow.com/questions/42817758/assign-model-attribute-value-to-instance-method-parameter", "title": "assign model attribute value to instance method parameter", "body": "<p>I have following model</p>\n\n<pre><code>class myclass\n  def mymethod(a, b, c, d = 'e')\n    StoredProcedure::Test.exec!(\n        a, b ,c ,d)\n  end\nend\n</code></pre>\n\n<p>I have attribute f's value available in model but don't know how can i assign it to parameter b. \nI tried doing <code>def baz(a, b = f, c, d = 'e')</code> but not working. \nHow do i assign f's value to param b in model?</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "answers": [{"tags": [], "owner": {"reputation": 2925, "user_id": 7362128, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6c182f15f6440b325d21ef726ccbda66?s=128&d=identicon&r=PG", "display_name": "Slava.K", "link": "https://stackoverflow.com/users/7362128/slava-k"}, "is_accepted": true, "score": 3, "last_activity_date": 1489602422, "creation_date": 1489602422, "answer_id": 42817852, "question_id": 42817688, "link": "https://stackoverflow.com/questions/42817688/rails-form-preview-page/42817852#42817852", "title": "Rails form preview page", "body": "<p>Your code is almost correct. Pass <code>id</code> as an url param for <code>preview_path</code>:</p>\n\n<pre><code>if @job.save\n  format.html {redirect_to preview_path(id: @job.id), notice: 'Job was successfully created.' }\n  # ...\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 584, "user_id": 7159326, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c3bce136965a79ceb3a45f93bdbac3c?s=128&d=identicon&r=PG&f=1", "display_name": "Othmane El Kesri", "link": "https://stackoverflow.com/users/7159326/othmane-el-kesri"}, "is_accepted": false, "score": 1, "last_activity_date": 1489602522, "creation_date": 1489602522, "answer_id": 42817894, "question_id": 42817688, "link": "https://stackoverflow.com/questions/42817688/rails-form-preview-page/42817894#42817894", "title": "Rails form preview page", "body": "<p>You didn't pass the @job object with the redirect:</p>\n\n<pre><code> redirect_to preview_path(@job)\n</code></pre>\n"}], "owner": {"reputation": 326, "user_id": 4954795, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/9d5a6a4729a786805054a118296d8bc5?s=128&d=identicon&r=PG&f=1", "display_name": "teresa", "link": "https://stackoverflow.com/users/4954795/teresa"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 542, "favorite_count": 0, "accepted_answer_id": 42817852, "answer_count": 2, "score": 2, "last_activity_date": 1489602522, "creation_date": 1489601899, "question_id": 42817688, "link": "https://stackoverflow.com/questions/42817688/rails-form-preview-page", "title": "Rails form preview page", "body": "<p>I want to save the Job data in the database, and redirect to a preview page (instead of the <code>show</code> page) which displays all the information from the Job form just submitted (essentially a duplicate of the <code>show.html.erb</code> page). </p>\n\n<p>Currently, when the user submits the form (without errors), the Job is created with status 'Paused'. And the user is redirected to the <code>preview</code> page. But I am having trouble displaying the Job information, I get a <code>Couldn't find Job without an ID</code> error. </p>\n\n<p>I have also tried passing in the <code>@job.id</code> using <code>&lt;%= f.hidden_field :job_id, value: @job.id %&gt;</code> in <code>jobs/_form.html.erb</code> but I get this error: <code>Can't mass-assign protected attributes for Job: job_id</code></p>\n\n<p>controllers/jobs_controller.rb</p>\n\n<pre><code>def create\n  userprofile = current_user.userprofile\n\n  @job = userprofile.jobs.build(params[:job])\n  @job.status = 'Paused'\n  @job.audit_status = 'Approved'\n\n  respond_to do |format|\n    if @job.save\n      format.html {redirect_to preview_path, notice: 'Job was successfully created.' }\n      format.json { render json: @job, status: :created, location: @job }\n    else\n      format.html { render action: \"new\" }\n      format.json { render json: @job.errors, status: :unprocessable_entity }\n    end\n  end\nend\n\n\ndef preview \n  @job = Job.find(params[:id])\nend \n</code></pre>\n"}, {"tags": ["ruby", "rvm", "shebang"], "answers": [{"comments": [{"owner": {"reputation": 1267, "user_id": 1718633, "user_type": "registered", "accept_rate": 31, "profile_image": "https://www.gravatar.com/avatar/fabe1e6b28afc64cdbd3c071621a7565?s=128&d=identicon&r=PG", "display_name": "Rich_F", "link": "https://stackoverflow.com/users/1718633/rich-f"}, "edited": false, "score": 0, "creation_date": 1489980491, "post_id": 42817636, "comment_id": 72891541, "body": "RVM is creating a huge issue.  I&#39;m calling a script in the RVM ruby, but the <code>require &#39;clipboard&#39;</code>isn&#39;t loading gems installed.  But thanks for your guidance.  The working solution was to point to the RVM default: <code>#!&#47;Users&#47;rich&#47;.rvm&#47;rubies&#47;default&#47;bin&#47;ruby</code>"}], "tags": [], "owner": {"reputation": 12542, "user_id": 156746, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/8TsPx.jpg?s=128&g=1", "display_name": "DiegoSalazar", "link": "https://stackoverflow.com/users/156746/diegosalazar"}, "is_accepted": true, "score": 2, "last_activity_date": 1489602112, "last_edit_date": 1489602112, "creation_date": 1489601756, "answer_id": 42817636, "question_id": 42817199, "link": "https://stackoverflow.com/questions/42817199/how-to-make-a-persistent-call-to-the-current-rvm-ruby-by-alias/42817636#42817636", "title": "How to make a persistent call to the current RVM Ruby by Alias", "body": "<p>Use:</p>\n\n<pre><code>#!/usr/bin/env ruby\n</code></pre>\n\n<p>This tells the shell to look up the Ruby in the <code>$PATH</code> which will be the correct one managed by RVM in most cases if you use RVM.</p>\n"}], "owner": {"reputation": 1267, "user_id": 1718633, "user_type": "registered", "accept_rate": 31, "profile_image": "https://www.gravatar.com/avatar/fabe1e6b28afc64cdbd3c071621a7565?s=128&d=identicon&r=PG", "display_name": "Rich_F", "link": "https://stackoverflow.com/users/1718633/rich-f"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 88, "favorite_count": 0, "accepted_answer_id": 42817636, "answer_count": 1, "score": 3, "last_activity_date": 1489602112, "creation_date": 1489600381, "question_id": 42817199, "link": "https://stackoverflow.com/questions/42817199/how-to-make-a-persistent-call-to-the-current-rvm-ruby-by-alias", "title": "How to make a persistent call to the current RVM Ruby by Alias", "body": "<p>The ruby shebang in several of my scripts is the usual system (MacOS) <code>/usr/bin/ruby</code>.  I use RVM for my rubies, so it's often different than the system install of ruby.  </p>\n\n<p>Is there a way for a shebang to contain a reference or alias of some sort, so that it always points to the current RVM chosen installation?</p>\n"}, {"tags": ["ruby", "binding", "eval"], "comments": [{"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 1, "creation_date": 1489599780, "post_id": 42816822, "comment_id": 72745990, "body": "The first question is why do you want to change a local variable inside a method from outside it? Perhaps you don&#39;t understand the difference between local, instance, class, and global variables? This sounds like an &quot;<a href=\"https://meta.stackexchange.com/q/66377/153968\">XY Problem</a>&quot; where you&#39;re asking about one thing but really should be asking about another. Explain the goal, why you want to be able to do this in the scope of your program."}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1489600304, "post_id": 42816822, "comment_id": 72746288, "body": "This doesn&#39;t make any sense. A local variable is used to hold values inside the method that don&#39;t need any persistence outside the method. They&#39;re destroyed as soon as the method exits. Where would you propose to have that change take place inside a method? At initialization of the local? Mid-stream in some random or arbitrary spot? I&#39;d recommend showing us a code snippet showing how you envision using such functionality."}, {"owner": {"reputation": 917, "user_id": 7411621, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/a37fcd6d889200d8721cf58a491e4ee5?s=128&d=identicon&r=PG&f=1", "display_name": "taras", "link": "https://stackoverflow.com/users/7411621/taras"}, "reply_to_user": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1489600399, "post_id": 42816822, "comment_id": 72746347, "body": "@theTinMan, I was reading about this <a href=\"https://ruby-doc.org/core-2.2.0/Binding.html#local_variable_set-method\" rel=\"nofollow noreferrer\">here</a> and tried similar example in irb. I just want to understand it."}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1489600785, "post_id": 42816822, "comment_id": 72746581, "body": "Did you notice that the use of <code>local_variable_set</code> and <code>local_variable_get</code> occurs <i>inside</i> the method, not outside it? <code>b.local_variable_set(:a, 2)</code> is a long-winded way of saying <code>a = 2</code>. Using those methods makes it possible to have Ruby execute code dynamically, on the fly, without there being any source code for it."}, {"owner": {"reputation": 917, "user_id": 7411621, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/a37fcd6d889200d8721cf58a491e4ee5?s=128&d=identicon&r=PG&f=1", "display_name": "taras", "link": "https://stackoverflow.com/users/7411621/taras"}, "reply_to_user": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1489601225, "post_id": 42816822, "comment_id": 72746804, "body": "@theTinMan, yes, of course. But when I add method from those example to irb and after that tried to call it, it caused an error &quot;NoMethodError: undefined method local_variable_get for 3:Fixnum&quot;, so I suppose there is mistake with variable <code>b</code>. Then I was trying to manipulate with variables outside of method and found out that I can&#39;t do it."}], "answers": [{"tags": [], "owner": {"reputation": 3969, "user_id": 187261, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/994de0373c6a35a5f7108b274d0b1cb9?s=128&d=identicon&r=PG", "display_name": "Nazarii Bardiuk", "link": "https://stackoverflow.com/users/187261/nazarii-bardiuk"}, "is_accepted": true, "score": 1, "last_activity_date": 1489602261, "creation_date": 1489602261, "answer_id": 42817799, "question_id": 42816822, "link": "https://stackoverflow.com/questions/42816822/ruby-changing-the-variable-outside-the-method/42817799#42817799", "title": "Ruby: Changing the variable outside the method", "body": "<p>In your example you always create new binding (context) by calling <code>foo</code>. That is why changes are lost.</p>\n\n<p>It should work if you call the same binding</p>\n\n<pre><code>b = foo\nb.local_variable_get(:a) # =&gt; 1\n\neval(\"a = 2\", b)\nb.local_variable_get(:a) # =&gt; 2\n\nb.local_variable_set(:a, 3)\nb.local_variable_get(:a) # =&gt; 3\n</code></pre>\n"}], "owner": {"reputation": 917, "user_id": 7411621, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/a37fcd6d889200d8721cf58a491e4ee5?s=128&d=identicon&r=PG&f=1", "display_name": "taras", "link": "https://stackoverflow.com/users/7411621/taras"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 528, "favorite_count": 0, "accepted_answer_id": 42817799, "answer_count": 1, "score": -2, "last_activity_date": 1489602261, "creation_date": 1489599185, "question_id": 42816822, "link": "https://stackoverflow.com/questions/42816822/ruby-changing-the-variable-outside-the-method", "title": "Ruby: Changing the variable outside the method", "body": "<p>I don't understand how to change variable value from the outside of the method using <code>binding</code> and <code>eval</code>.\nExample method:</p>\n\n<pre><code>def foo\n  a = 1\n  binding\nend\n</code></pre>\n\n<p>I can get variable <code>a</code> by two ways:</p>\n\n<pre><code>foo.local_variable_get(:a) #=&gt; 1\n# or\nfoo.eval(\"a\") #=&gt; 1\n</code></pre>\n\n<p>But I can't set new value</p>\n\n<pre><code>foo.local_variable_set(:a, 2)\nfoo.local_variable_get(:a) #=&gt; still 1\nfoo.eval(\"a = 2\")\nfoo.local_variable_get(:a) #=&gt; still 1\n</code></pre>\n\n<p>However, I can do it if Binding object was created in global scope, outside of any method:</p>\n\n<pre><code>bar = 123\nbinding # Binding object with global scope\nbinding.eval(\"bar\") #=&gt; 123\nbinding.eval(\"bar = 456\")\nbinding.eval(\"bar\") #=&gt; 456\n</code></pre>\n\n<p>How can I set new value to method local variable outside the method? Thank you.</p>\n"}, {"tags": ["mysql", "ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 1270, "user_id": 749409, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/c7d5b3aad74c71de1c05003662938227?s=128&d=identicon&r=PG", "display_name": "Brandon Cordell", "link": "https://stackoverflow.com/users/749409/brandon-cordell"}, "edited": false, "score": 2, "creation_date": 1489596129, "post_id": 42815760, "comment_id": 72743784, "body": "You don&#39;t need the <code>dummysmoker</code> column. You can create a form field, either a select or radio button, that will input 1 or 0 based on the response."}, {"owner": {"reputation": 178, "user_id": 7691010, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/eebf967a647150dd15891230e464abd1?s=128&d=identicon&r=PG&f=1", "display_name": "Krawalla", "link": "https://stackoverflow.com/users/7691010/krawalla"}, "reply_to_user": {"reputation": 1270, "user_id": 749409, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/c7d5b3aad74c71de1c05003662938227?s=128&d=identicon&r=PG", "display_name": "Brandon Cordell", "link": "https://stackoverflow.com/users/749409/brandon-cordell"}, "edited": false, "score": 0, "creation_date": 1489596882, "post_id": 42815760, "comment_id": 72744246, "body": "@BrandonCordell uhm... care to evaluate? I thought my idea was genius :D"}, {"owner": {"reputation": 1270, "user_id": 749409, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/c7d5b3aad74c71de1c05003662938227?s=128&d=identicon&r=PG", "display_name": "Brandon Cordell", "link": "https://stackoverflow.com/users/749409/brandon-cordell"}, "edited": false, "score": 2, "creation_date": 1489598413, "post_id": 42815760, "comment_id": 72745170, "body": "See @uDaY&#39;s answer below."}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 1, "creation_date": 1489601265, "post_id": 42815760, "comment_id": 72746829, "body": "For UI, two radio buttons or a two-line pop-up can be replaced by a checkbox, which is cleaner but has some implications. See <a href=\"https://www.nngroup.com/articles/checkboxes-vs-radio-buttons/\" rel=\"nofollow noreferrer\">nngroup.com/articles/checkboxes-vs-radio-buttons</a> for more information, and things to consider when designing the UI."}], "answers": [{"comments": [{"owner": {"reputation": 1894, "user_id": 481023, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/59CR5.png?s=128&g=1", "display_name": "elc", "link": "https://stackoverflow.com/users/481023/elc"}, "edited": false, "score": 2, "creation_date": 1489597628, "post_id": 42816216, "comment_id": 72744686, "body": "Your radio_button values should be 1 and 0, not yes and no."}, {"owner": {"reputation": 7894, "user_id": 981616, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/92513702d30405c7e2ca056bdc72aa9f?s=128&d=identicon&r=PG", "display_name": "uday", "link": "https://stackoverflow.com/users/981616/uday"}, "reply_to_user": {"reputation": 1894, "user_id": 481023, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/59CR5.png?s=128&g=1", "display_name": "elc", "link": "https://stackoverflow.com/users/481023/elc"}, "edited": false, "score": 0, "creation_date": 1489597898, "post_id": 42816216, "comment_id": 72744859, "body": "Oops! That&#39;s what happens when I have no coffee..Thanks! made the change"}, {"owner": {"reputation": 178, "user_id": 7691010, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/eebf967a647150dd15891230e464abd1?s=128&d=identicon&r=PG&f=1", "display_name": "Krawalla", "link": "https://stackoverflow.com/users/7691010/krawalla"}, "edited": false, "score": 0, "creation_date": 1489602919, "post_id": 42816216, "comment_id": 72747808, "body": "using radio buttons works just fine. i just tried the dropdown option. unfortunately, it doesn&#39;t actually generate any database entries. i can&#39;t seem to figure out why. suggestions?"}, {"owner": {"reputation": 7894, "user_id": 981616, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/92513702d30405c7e2ca056bdc72aa9f?s=128&d=identicon&r=PG", "display_name": "uday", "link": "https://stackoverflow.com/users/981616/uday"}, "edited": false, "score": 0, "creation_date": 1489604962, "post_id": 42816216, "comment_id": 72749067, "body": "can you show the html output source? if you are doing same like I showed?"}, {"owner": {"reputation": 178, "user_id": 7691010, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/eebf967a647150dd15891230e464abd1?s=128&d=identicon&r=PG&f=1", "display_name": "Krawalla", "link": "https://stackoverflow.com/users/7691010/krawalla"}, "edited": false, "score": 0, "creation_date": 1489605999, "post_id": 42816216, "comment_id": 72749653, "body": "<code>&lt;%= nann_form.label &quot;Do you have a driver&#39;s license?&quot; %&gt;&lt;br&gt;         &lt;%= select_tag(:dln, options_for_select([[&#39;Yes&#39;, 1], [&#39;No&#39;, 0]])) %&gt;&lt;br&gt;&lt;br&gt;</code>  so obviously I&#39;m asking for a driver&#39;s license ;)"}, {"owner": {"reputation": 7894, "user_id": 981616, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/92513702d30405c7e2ca056bdc72aa9f?s=128&d=identicon&r=PG", "display_name": "uday", "link": "https://stackoverflow.com/users/981616/uday"}, "edited": false, "score": 1, "creation_date": 1489606574, "post_id": 42816216, "comment_id": 72749990, "body": "In that case you would be using a <code>select</code> instead of select_tag e.g.,  <code>&lt;%= nann_form.select(:dln, [[&#39;Yes&#39;, 1], [&#39;No&#39;, 0]]) %&gt;</code>"}], "tags": [], "owner": {"reputation": 7894, "user_id": 981616, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/92513702d30405c7e2ca056bdc72aa9f?s=128&d=identicon&r=PG", "display_name": "uday", "link": "https://stackoverflow.com/users/981616/uday"}, "is_accepted": true, "score": 2, "last_activity_date": 1489601197, "last_edit_date": 1489601197, "creation_date": 1489597283, "answer_id": 42816216, "question_id": 42815760, "link": "https://stackoverflow.com/questions/42815760/how-to-reject-wrong-inputs-in-a-from-in-ruby-on-rails/42816216#42816216", "title": "How to reject &quot;wrong&quot; inputs in a from in Ruby on Rails", "body": "<p>There are couple of ways to achieve what you want:</p>\n\n<ol>\n<li>You can use radio button or </li>\n<li>Dropdown select </li>\n</ol>\n\n<p>Using a radio button:</p>\n\n<pre><code>&lt;% form_for(@myform) do |f| %&gt;\n  &lt;%= f.radio_button :smoker, '1' %&gt; \n  &lt;%= f.label :smoker, 'Yes', :value =&gt; '1' %&gt;\n  &lt;%= f.radio_button :smoker, '0' %&gt;\n  &lt;%= f.label :smoker, 'No', :value =&gt; '0' %&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>Using dropdown:</p>\n\n<pre><code>&lt;%= select_tag(:smoker, options_for_select([['Yes', 1], ['No', 0]])) %&gt;\n</code></pre>\n"}], "owner": {"reputation": 178, "user_id": 7691010, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/eebf967a647150dd15891230e464abd1?s=128&d=identicon&r=PG&f=1", "display_name": "Krawalla", "link": "https://stackoverflow.com/users/7691010/krawalla"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 87, "favorite_count": 0, "accepted_answer_id": 42816216, "answer_count": 1, "score": 0, "last_activity_date": 1489601533, "creation_date": 1489595972, "last_edit_date": 1489601533, "question_id": 42815760, "link": "https://stackoverflow.com/questions/42815760/how-to-reject-wrong-inputs-in-a-from-in-ruby-on-rails", "title": "How to reject &quot;wrong&quot; inputs in a from in Ruby on Rails", "body": "<p>I have a form linked to a table. One column of the table is \"smoker\".  I need either a \"1\" or a \"0\" in that column. To do this, I created another cloumn as a dummy called \"dummysmoker\". </p>\n\n<p>The dummysmoker column will be filled in by a user and it's set to assign the corresponding \"smoker\" column a \"1\" if a user answers \"yes\" (and puts yes in the dummysmoker column). </p>\n\n<p>While a \"1\" is only generated if the user puts \"yes\" in the dummy column, a \"0\" is generated in any other case (e.g. \"no\", \"not\", \"hell, no!\", ...).</p>\n\n<p>However, I would like to limit the user to only being able to select \"yes\" or \"no\" (maybe through a radio button tag?). </p>\n\n<p>The problem is, I don't know how to include suggested data entries in a radio button tag, I only figured a way to link them to existing table entries. </p>\n\n<p>Does anyone have suggestions?</p>\n"}, {"tags": ["ruby", "splat", "double-splat"], "comments": [{"owner": {"reputation": 9297, "user_id": 764546, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/OfNpk.jpg?s=128&g=1", "display_name": "MikDiet", "link": "https://stackoverflow.com/users/764546/mikdiet"}, "edited": false, "score": 3, "creation_date": 1489595817, "post_id": 42815580, "comment_id": 72743574, "body": "<code>my_method</code> code?"}, {"owner": {"reputation": 739, "user_id": 3351906, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/91ad339685279a5727ba0a7a91b14b9c?s=128&d=identicon&r=PG", "display_name": "rafaels88", "link": "https://stackoverflow.com/users/3351906/rafaels88"}, "reply_to_user": {"reputation": 9297, "user_id": 764546, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/OfNpk.jpg?s=128&g=1", "display_name": "MikDiet", "link": "https://stackoverflow.com/users/764546/mikdiet"}, "edited": false, "score": 0, "creation_date": 1489597439, "post_id": 42815580, "comment_id": 72744563, "body": "Ops, I forgot it! Updating now..."}], "answers": [{"comments": [{"owner": {"reputation": 739, "user_id": 3351906, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/91ad339685279a5727ba0a7a91b14b9c?s=128&d=identicon&r=PG", "display_name": "rafaels88", "link": "https://stackoverflow.com/users/3351906/rafaels88"}, "edited": false, "score": 0, "creation_date": 1489599609, "post_id": 42815862, "comment_id": 72745895, "body": "I updated my question. I forgot to put the implementation of the method. Could you try again but without receiving any parameters in <code>foo</code>?"}, {"owner": {"reputation": 9297, "user_id": 764546, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/OfNpk.jpg?s=128&g=1", "display_name": "MikDiet", "link": "https://stackoverflow.com/users/764546/mikdiet"}, "reply_to_user": {"reputation": 739, "user_id": 3351906, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/91ad339685279a5727ba0a7a91b14b9c?s=128&d=identicon&r=PG", "display_name": "rafaels88", "link": "https://stackoverflow.com/users/3351906/rafaels88"}, "edited": false, "score": 1, "creation_date": 1489650678, "post_id": 42815862, "comment_id": 72766372, "body": "I understand you had no parameters in your method. In my answer I shown why you received <code>ArgumentError Exception</code> - because double splat on variable passes empty hash as first argument into the method. @rafaels88"}, {"owner": {"reputation": 739, "user_id": 3351906, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/91ad339685279a5727ba0a7a91b14b9c?s=128&d=identicon&r=PG", "display_name": "rafaels88", "link": "https://stackoverflow.com/users/3351906/rafaels88"}, "edited": false, "score": 0, "creation_date": 1489671098, "post_id": 42815862, "comment_id": 72780177, "body": "Yes, you are right... I made some tests right now following you line of thinking, and if you pass <code>foo(**{a: 1})</code> and then <code>h = {a: 1}; foo(**h)</code>, the behavior is different than passing empty hash as you passed in your example. It seems like a bug. Thank you very much for the diagnosis!"}], "tags": [], "owner": {"reputation": 9297, "user_id": 764546, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/OfNpk.jpg?s=128&g=1", "display_name": "MikDiet", "link": "https://stackoverflow.com/users/764546/mikdiet"}, "is_accepted": true, "score": 1, "last_activity_date": 1489596268, "creation_date": 1489596268, "answer_id": 42815862, "question_id": 42815580, "link": "https://stackoverflow.com/questions/42815580/expanding-empty-hash-in-variable-with-double-splat-in-ruby/42815862#42815862", "title": "Expanding empty hash in variable with double splat in Ruby", "body": "<p>Yes, it very looks like a bug</p>\n\n<pre><code>def foo(*args)\n  args\nend\n\nfoo(**{})\n# =&gt; []\n\nh = {}\n\nfoo(**h)\n# =&gt; [{}]\n</code></pre>\n\n<p>It passes empty hash as first argument in case of double splat of variable.</p>\n\n<p>My version is <code>ruby 2.3.1p112 (2016-04-26 revision 54768) [x86_64-darwin16]</code></p>\n"}], "owner": {"reputation": 739, "user_id": 3351906, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/91ad339685279a5727ba0a7a91b14b9c?s=128&d=identicon&r=PG", "display_name": "rafaels88", "link": "https://stackoverflow.com/users/3351906/rafaels88"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 426, "favorite_count": 0, "accepted_answer_id": 42815862, "answer_count": 1, "score": 1, "last_activity_date": 1489597491, "creation_date": 1489595458, "last_edit_date": 1489597491, "question_id": 42815580, "link": "https://stackoverflow.com/questions/42815580/expanding-empty-hash-in-variable-with-double-splat-in-ruby", "title": "Expanding empty hash in variable with double splat in Ruby", "body": "<p>I got this strange behavior trying to expand the hash variable using double splat. Do not know why this is happening.</p>\n\n<p><strong>My ruby version</strong></p>\n\n<p><code>ruby 2.2.6p396 (2016-11-15 revision 56800)</code></p>\n\n<p><strong>Scenario</strong></p>\n\n<pre><code>class MyClass\n  def my_method; end\nend\n\nMyClass.new.my_method(*[]) # returns nil\n\nMyClass.new.my_method(**{}) # returns nil\n\nMyClass.new.my_method(*[], **{}) # returns nil\n\n\n# Using variables\n\nvalues = []\nk_values = {}\n\nMyClass.new.my_method(*values) # returns nil\n\nMyClass.new.my_method(**k_values) # *** ArgumentError Exception: Wrong number of arguments. Expected 0, got 1.\n\nMyClass.new.my_method(*values, **k_values) # *** ArgumentError Exception: Wrong number of arguments. Expected 0, got 1.\n\n\n# In summary\n\nMyClass.new.my_method(**{}) # returns nil\n\nMyClass.new.my_method(**k_values) # *** ArgumentError Exception: Wrong number of arguments. Expected 0, got 1.\n</code></pre>\n\n<p>Does any one knows why this is happening? Is this a bug?</p>\n"}, {"tags": ["ruby", "http", "http-headers", "case-sensitive", "custom-headers"], "comments": [{"owner": {"reputation": 38092, "user_id": 18706, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/cabf735ce7b8b4471ef46ea54f71832d?s=128&d=identicon&r=PG", "display_name": "mahemoff", "link": "https://stackoverflow.com/users/18706/mahemoff"}, "edited": false, "score": 0, "creation_date": 1489598762, "post_id": 42815249, "comment_id": 72745357, "body": "&quot;custom header is being receiving as Hmacversion.&quot; You mean Hmacsignature I guess."}], "answers": [{"tags": [], "owner": {"reputation": 38092, "user_id": 18706, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/cabf735ce7b8b4471ef46ea54f71832d?s=128&d=identicon&r=PG", "display_name": "mahemoff", "link": "https://stackoverflow.com/users/18706/mahemoff"}, "is_accepted": true, "score": 2, "last_activity_date": 1489675433, "last_edit_date": 1489675433, "creation_date": 1489599078, "answer_id": 42816788, "question_id": 42815249, "link": "https://stackoverflow.com/questions/42815249/how-to-preserve-custom-headers-case-in-ruby/42816788#42816788", "title": "How to preserve custom headers case in ruby", "body": "<p>If at all possible, I would try to change the server, which is violating HTTP standards by treating request header keys as case-sensitive - <a href=\"https://www.w3.org/Protocols/rfc2616/rfc2616-sec4.html\" rel=\"nofollow noreferrer\">\"Field names are case-insensitive\"</a>. That error will mess with browsers, caches and so on.</p>\n\n<p>If you can't fix it, I would probably try <a href=\"https://www.ruby-toolbox.com/categories/http_clients\" rel=\"nofollow noreferrer\">another HTTP client library</a> that preserves case, not Net::HTTP. Just make sure that library doesn't use Net::HTTP behind the scenes. You could try Excon for example (I'm not sure if it preserves case but it has a lot of low-level control).</p>\n"}, {"tags": [], "owner": {"reputation": 344, "user_id": 979995, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/70048b54c86ac3657cc2405e2d584bda?s=128&d=identicon&r=PG", "display_name": "Kaplan Ilya", "link": "https://stackoverflow.com/users/979995/kaplan-ilya"}, "is_accepted": false, "score": 0, "last_activity_date": 1508247307, "creation_date": 1508247307, "answer_id": 46791517, "question_id": 42815249, "link": "https://stackoverflow.com/questions/42815249/how-to-preserve-custom-headers-case-in-ruby/46791517#46791517", "title": "How to preserve custom headers case in ruby", "body": "<p>Use following code to force case sensitive headers.</p>\n\n<pre><code>class CaseSensitivePost &lt; Net::HTTP::Post\n  def initialize_http_header(headers)\n    @header = {}\n    headers.each{|k,v| @header[k.to_s] = [v] }\n  end\n\n  def [](name)\n    @header[name.to_s]\n  end\n\n  def []=(name, val)\n    if val\n      @header[name.to_s] = [val]\n    else\n      @header.delete(name.to_s)\n    end\n  end\n\n  def capitalize(name)\n    name\n  end\nend\n</code></pre>\n\n<p>Usage example:</p>\n\n<pre><code>post = CaseSensitivePost.new(url, {myCasedHeader: '1'})\npost.body = body\nhttp = Net::HTTP.new(host, port)\nhttp.request(post)\n</code></pre>\n\n<p>Others suggested creating custom string class, that won't get downcased or capitalized.\n<a href=\"https://stackoverflow.com/a/42121370/979995\">https://stackoverflow.com/a/42121370/979995</a></p>\n"}], "owner": {"reputation": 193, "user_id": 5018308, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/ab0d61fd452e7900b365f48e800c621b?s=128&d=identicon&r=PG&f=1", "display_name": "Srinivas M", "link": "https://stackoverflow.com/users/5018308/srinivas-m"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 970, "favorite_count": 0, "accepted_answer_id": 42816788, "answer_count": 2, "score": 2, "last_activity_date": 1508247307, "creation_date": 1489594553, "last_edit_date": 1495535394, "question_id": 42815249, "link": "https://stackoverflow.com/questions/42815249/how-to-preserve-custom-headers-case-in-ruby", "title": "How to preserve custom headers case in ruby", "body": "<p>On a note HTTP spec says that headers are case insensitive, we have a need to call a service which is having the case sensitive headers.</p>\n\n<p>Below is my code </p>\n\n<pre><code>require 'uri'\nrequire 'net/http'\nrequire 'openssl'\n\nurl = URI(\"Service URL\")\n\nhttp = Net::HTTP::Proxy('127.0.0.1', '8888').new(url.host, url.port)\nhttp.use_ssl = true\nhttp.verify_mode = OpenSSL::SSL::VERIFY_NONE\n\nrequest = Net::HTTP::Post.new(url)\nrequest[\"content-type\"] = 'text/xml'\nrequest[\"charset\"] = 'utf-8'\nrequest[\"accept\"] = 'text/xml'\nrequest[\"host\"] = 'abc.com'\nrequest[\"HMACSignature\"] = 'dsfsdfsdf'\n\nresponse = http.request(request)\nputs response.read_body\n</code></pre>\n\n<p>the custom header is being receiving as Hmacversion.</p>\n\n<p>I have also tried <a href=\"https://stackoverflow.com/questions/2710373/preserving-case-in-http-headers-with-rubys-nethttp\">this</a> but it is not working.</p>\n\n<p>Is there any work around for this</p>\n"}, {"tags": ["html", "ruby-on-rails", "ruby", "string"], "answers": [{"tags": [], "owner": {"reputation": 1528, "user_id": 7573791, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0e5e5cf864fb33229ca56750a51d6674?s=128&d=identicon&r=PG&f=1", "display_name": "Sajin", "link": "https://stackoverflow.com/users/7573791/sajin"}, "is_accepted": true, "score": 1, "last_activity_date": 1489595278, "creation_date": 1489595278, "answer_id": 42815510, "question_id": 42815204, "link": "https://stackoverflow.com/questions/42815204/string-manipulation-in-embedded-ruby/42815510#42815510", "title": "String Manipulation in Embedded Ruby", "body": "<pre><code>&lt;% newfood = food %&gt;\n&lt;% newfood.gsub!('&amp;','') %&gt;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2116, "user_id": 6780663, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9207ba3b9163582570078b687f9b2792?s=128&d=identicon&r=PG&f=1", "display_name": "Alejandro Montilla", "link": "https://stackoverflow.com/users/6780663/alejandro-montilla"}, "is_accepted": false, "score": 0, "last_activity_date": 1489597293, "creation_date": 1489597293, "answer_id": 42816220, "question_id": 42815204, "link": "https://stackoverflow.com/questions/42815204/string-manipulation-in-embedded-ruby/42816220#42816220", "title": "String Manipulation in Embedded Ruby", "body": "<p>Try with <a href=\"http://ruby-doc.org/core-2.0.0/String.html#method-i-delete\" rel=\"nofollow noreferrer\">delete</a> method </p>\n\n<pre><code>&lt;%= newfood = food.delete('&amp;') %&gt;\n</code></pre>\n"}], "owner": {"reputation": 93, "user_id": 7518095, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/6fee4d52fec344078f254379ae90f2dc?s=128&d=identicon&r=PG&f=1", "display_name": "user7518095", "link": "https://stackoverflow.com/users/7518095/user7518095"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 76, "favorite_count": 0, "accepted_answer_id": 42815510, "answer_count": 2, "score": 1, "last_activity_date": 1489597293, "creation_date": 1489594449, "last_edit_date": 1489597125, "question_id": 42815204, "link": "https://stackoverflow.com/questions/42815204/string-manipulation-in-embedded-ruby", "title": "String Manipulation in Embedded Ruby", "body": "<p>So I have embedded Ruby in HTML, and I need to declare a new variable which will be a manipulated version of the old variable. For instance, in   </p>\n\n<pre><code>&lt;%= newfood = food%&gt;\n</code></pre>\n\n<p>if food = \"AB&amp;CSoup\", I'd want the string to become \"ABCSoup\". After declaring the new variable in embedded ruby brackets, how can I remove the ampersand? </p>\n"}, {"tags": ["ios", "ruby", "cucumber", "calabash", "calabash-ios"], "comments": [{"owner": {"reputation": 2510, "user_id": 247081, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/434b46abf1e562f7f3d7fec037c00a11?s=128&d=identicon&r=PG", "display_name": "Ben", "link": "https://stackoverflow.com/users/247081/ben"}, "edited": false, "score": 0, "creation_date": 1507889336, "post_id": 42814915, "comment_id": 80400893, "body": "Did you find a solution? I have the same problem. Any help highly appreciated"}, {"owner": {"reputation": 1036, "user_id": 2360269, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/cEMXG.jpg?s=128&g=1", "display_name": "Luk&#225;\u0161 \u0160&#225;lek", "link": "https://stackoverflow.com/users/2360269/luk%c3%a1%c5%a1-%c5%a0%c3%a1lek"}, "reply_to_user": {"reputation": 2510, "user_id": 247081, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/434b46abf1e562f7f3d7fec037c00a11?s=128&d=identicon&r=PG", "display_name": "Ben", "link": "https://stackoverflow.com/users/247081/ben"}, "edited": false, "score": 0, "creation_date": 1507912329, "post_id": 42814915, "comment_id": 80415163, "body": "Out testers fix it but i didn&#39;t see how... sorry"}], "answers": [{"tags": [], "owner": {"reputation": 1145, "user_id": 1165581, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e79a078e06a93f25eaba903217bd388f?s=128&d=identicon&r=PG", "display_name": "Lasse", "link": "https://stackoverflow.com/users/1165581/lasse"}, "is_accepted": false, "score": 0, "last_activity_date": 1490016045, "last_edit_date": 1592644375, "creation_date": 1489989334, "answer_id": 42896691, "question_id": 42814915, "link": "https://stackoverflow.com/questions/42814915/cucumber-cannot-find-simulator/42896691#42896691", "title": "Cucumber cannot find simulator", "body": "<p>I don't know about using line breaks in the cucumber.yml file.\nMine looks more like this</p>\n<blockquote>\n<p>ios: APP_BUNDLE_PATH=iphone/build/Applications/myapp.app PLATFORM=ios\nDEVICE_TARGET='iPhone 6 (9.1)' RESET_BETWEEN_SCENARIOS=1 -r\nfeatures/support -r features/ios/support -r features/ios/helpers -r\nfeatures/step_definitions -r features/ios/pages features/login.feature</p>\n</blockquote>\n<p>And then when running it you add information about what profile to use</p>\n<blockquote>\n<p>-p ios</p>\n</blockquote>\n<p>About the simulator in iOS you can use the name the simulator has instead of an id. But the one you use has to be installed on your setup of cause.</p>\n<p>I have a few different profiles for testing different devices and the list of devices for me looks like these</p>\n<blockquote>\n<p>DEVICE_TARGET='iPhone 6 (9.1)'</p>\n<p>DEVICE_TARGET='iPhone 5 (9.1)'</p>\n</blockquote>\n<p>And to me the first error you got looks like it's just related to you not having that simulator installed.</p>\n"}], "owner": {"reputation": 1036, "user_id": 2360269, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/cEMXG.jpg?s=128&g=1", "display_name": "Luk&#225;\u0161 \u0160&#225;lek", "link": "https://stackoverflow.com/users/2360269/luk%c3%a1%c5%a1-%c5%a0%c3%a1lek"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 370, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1507292623, "creation_date": 1489593706, "last_edit_date": 1489611180, "question_id": 42814915, "link": "https://stackoverflow.com/questions/42814915/cucumber-cannot-find-simulator", "title": "Cucumber cannot find simulator", "body": "<p>We are writing some automated tests using Cucumber and Calabash for tests. I use Calabash for x-platform because the application is written in react-native. And I need the same tests for Android and iOS. For Android everything is fine but on iOS have a problem finding a simulator. \nMy implementation is similar as <a href=\"https://github.com/calabash/x-platform-example\" rel=\"nofollow noreferrer\">https://github.com/calabash/x-platform-example</a> but simpler.</p>\n\n<p>I used the same <code>run.rb</code> as x-platform-example:</p>\n\n<pre><code>#!/usr/bin/env ruby\ntarget = ARGV.shift\n\nunless system(\"bundle version\")\n  puts \"Can't find bundler. Check your ruby environment.\"\n  puts \"If your using ~/.calabash then run:\"\n  puts &lt;&lt;EOF\n\nexport GEM_HOME=~/.calabash\nexport GEM_PATH=~/.calabash\nexport PATH=\"$PATH:$HOME/.calabash/bin\"\nEOF\n  exit(false)\nend\n\nif target == 'android'\n  exec(\"export APP=../android/app/build/outputs/apk/app-debug.apk &amp;&amp; bundle exec calabash-android run $APP -p android #{ARGV.join(' ')}\")\nelsif target == 'ios'\n  exec(\"export APP=/Users/salek/Library/Developer/Xcode/DerivedData/myapp-bgunorhzqeoiyxaxiijyjvgvdavf/Build/Products/Debug-iphonesimulator/myapp.app &amp;&amp; export APP_BUNDLE_PATH=$APP &amp;&amp; bundle exec cucumber -p ios #{ARGV.join(' ')}\")\nelse\n  puts \"Invalid target #{target}\"\nend\n</code></pre>\n\n<p>And this is my <code>cucumber.yml</code> config:</p>\n\n<pre><code># config/cucumber.yml\n##YAML Template\n---\nandroid:\n  PLATFORM=android\n  -r features/support\n  -r features/android\n  -r features/step_definitions\n  -r features/android/pages\n\n\nios:\n  PLATFORM=ios\n\n  APP_BUNDLE_PATH=/Users/salek/Library/Developer/Xcode/DerivedData/myapp-bgunorhzqeoiyxaxiijyjvgvdavf/Build/Products/Debug-iphonesimulator/myapp.app\n  -r features/support\n  -r features/ios/support\n  -r features/ios/helpers\n  -r features/step_definitions\n  -r features/ios/pages\n</code></pre>\n\n<p>When I ran <code>cucumber ./run ios</code> I got:</p>\n\n<pre><code>Bundler version 1.14.6\nUsing the ios profile...\nFeature: Initial experience\n  This is basic description about this feature...\n\n  @info @reinstall\n  Scenario: I can describe everything what i want.                   # features/HomeScreenTestScenario.feature:5\n    This scenario is my first and i would like to test some buttons.\n    I am going to use 'when' and 'then' block:\n Could not find a simulator that matches 'iPhone 5s (8.3 Simulator)' (RuntimeError)\n /Users/salek/.rvm/gems/ruby-2.2.4/gems/calabash-cucumber-0.12.2/lib/calabash-cucumber/launcher.rb:289:in `reset_app_sandbox'\n /Users/salek/.rvm/gems/ruby-2.2.4/gems/calabash-cucumber-0.12.2/lib/calabash-cucumber/launcher.rb:200:in `reset_app_jail'\n /Users/salek/Documents/work/cngroup.dk/MRDM/HemoNed/hemonedskeleton/cucumber/features/ios/support/01_launch.rb:24:in `Before'\n    Given I am on Home Screen                                        # features/step_definitions/home_screen.rb:2\n\nFailing Scenarios:\ncucumber -p ios features/HomeScreenTestScenario.feature:5 # Scenario: I can describe everything what i want.\nThis scenario is my first and i would like to test some buttons.\nI am going to use 'when' and 'then' block:\n\n1 scenario (1 failed)\n1 step (1 skipped)\n0m0.374s\n</code></pre>\n\n<p>I have not defined simulator <code>Could not find a simulator that matches 'iPhone 5s (8.3 Simulator)' (RuntimeError)</code>\nI added this to my <code>cucumber.yml</code> config:</p>\n\n<pre><code>...\nios:\n  PLATFORM=ios\n  DEVICE_TARGET=\"063C3296-0770-47FB-8BC4-7074CDE59845\"\n...\n</code></pre>\n\n<p>Now the log changed to:</p>\n\n<pre><code>bundler version 1.14.6\nUsing the ios profile...\nFeature: Initial experience\n  This is basic description about this feature...\n\n  @info @reinstall\n  Scenario: I can describe everything what i want.                   # features/HomeScreenTestScenario.feature:5\n    This scenario is my first and i would like to test some buttons.\n    I am going to use 'when' and 'then' block:\n\nWARN: calling 'reset_app_sandbox' when targeting a device.\n undefined method `split' for nil:NilClass (NoMethodError)\n /Users/salek/.rvm/gems/ruby-2.2.4/gems/run_loop-1.2.9/lib/run_loop/sim_control.rb:867:in `block in sim_details'\n /Users/salek/.rvm/gems/ruby-2.2.4/gems/run_loop-1.2.9/lib/run_loop/sim_control.rb:864:in `each'\n /Users/salek/.rvm/gems/ruby-2.2.4/gems/run_loop-1.2.9/lib/run_loop/sim_control.rb:864:in `sim_details'\n /Users/salek/.rvm/gems/ruby-2.2.4/gems/run_loop-1.2.9/lib/run_loop/sim_control.rb:290:in `enable_accessibility_on_sims'\n /Users/salek/.rvm/gems/ruby-2.2.4/gems/run_loop-1.2.9/lib/run_loop/core.rb:201:in `run_with_options'\n /Users/salek/.rvm/gems/ruby-2.2.4/gems/run_loop-1.2.9/lib/run_loop.rb:77:in `run'\n /Users/salek/.rvm/gems/ruby-2.2.4/gems/calabash-cucumber-0.12.2/lib/calabash-cucumber/launcher.rb:755:in `block in new_run_loop'\n /Users/salek/.rvm/gems/ruby-2.2.4/gems/calabash-cucumber-0.12.2/lib/calabash-cucumber/launcher.rb:753:in `times'\n /Users/salek/.rvm/gems/ruby-2.2.4/gems/calabash-cucumber-0.12.2/lib/calabash-cucumber/launcher.rb:753:in `new_run_loop'\n /Users/salek/.rvm/gems/ruby-2.2.4/gems/calabash-cucumber-0.12.2/lib/calabash-cucumber/launcher.rb:624:in `relaunch'\n /Users/salek/Documents/work/myapp/cucumber/features/ios/support/01_launch.rb:27:in `Before'\n    Given I am on Home Screen                                        # features/step_definitions/home_screen.rb:2\n\nFailing Scenarios:\ncucumber -p ios features/HomeScreenTestScenario.feature:5 # Scenario: I can describe everything what i want.\nThis scenario is my first and I would like to test some buttons.\nI am going to use 'when' and 'then' block:\n\n1 scenario (1 failed)\n1 step (1 skipped)\n0m1.899s\n</code></pre>\n\n<p>The application still can not run in the simulator \nbut I think this is the problem: </p>\n\n<pre><code>WARN: calling 'reset_app_sandbox' when targeting a device.\n undefined method `split' for nil:NilClass (NoMethodError)\n</code></pre>\n\n<p>But I don't use <code>split</code> in the code.</p>\n"}, {"tags": ["arrays", "ruby", "hash"], "comments": [{"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1489601592, "post_id": 42814338, "comment_id": 72747012, "body": "Please read &quot;<a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a>&quot; including the linked pages, &quot;<a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>&quot; and &quot;<a href=\"http://meta.stackoverflow.com/questions/261592\">How much research effort is expected of Stack Overflow users?</a>&quot;. We&#39;d like to see evidence of your effort. What did you try? Did you search and not find anything? Did you find stuff but it didn&#39;t help? Did you try writing code? If not, why? If so, what is the smallest code example that shows what you tried and why didn&#39;t it work? Without that it looks like you didn&#39;t try and want us to write it for you."}], "answers": [{"tags": [], "owner": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "is_accepted": false, "score": 3, "last_activity_date": 1489592553, "creation_date": 1489592553, "answer_id": 42814458, "question_id": 42814338, "link": "https://stackoverflow.com/questions/42814338/ruby-using-an-array-of-hashes-to-select-values-from-another-array-of-hashes/42814458#42814458", "title": "Ruby: using an array of hashes to select values from another array of hashes", "body": "<p>You could save all the <code>array_1</code> names in a set in order to select hashes from <code>array_2</code> :</p>\n\n<pre><code>require 'set'\n\narray_1 = [{ name: 'Dale Cooper', role: 'author' },\n           { name: 'Lucy Moran', role: 'author' },\n           { name: 'Harry Truman', role: 'author' }]\n\narray_2 = [{ author: 'Lucy Moran', title: 'Lorem' },\n           { author: 'Bobby Briggs', title: 'Ipsum' },\n           { author: 'Harry Truman', title: 'Dolor' }]\n\nauthors = Set.new(array_1.map{ |h| h[:name] })\n\narray_3 = array_2.select{ |h| authors.include?(h[:author]) }\n# [{:author=&gt;\"Lucy Moran\", :title=&gt;\"Lorem\"},\n#  {:author=&gt;\"Harry Truman\", :title=&gt;\"Dolor\"}]\n</code></pre>\n"}], "owner": {"reputation": 263, "user_id": 1372396, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/f5f8e059ded4c310b52b001e78bbf200?s=128&d=identicon&r=PG", "display_name": "Ack", "link": "https://stackoverflow.com/users/1372396/ack"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 421, "favorite_count": 0, "answer_count": 1, "score": -3, "last_activity_date": 1489592553, "creation_date": 1489592279, "question_id": 42814338, "link": "https://stackoverflow.com/questions/42814338/ruby-using-an-array-of-hashes-to-select-values-from-another-array-of-hashes", "title": "Ruby: using an array of hashes to select values from another array of hashes", "body": "<p>Say I have two arrays of hashes:</p>\n\n<pre><code>array_1 = [{name: \"Dale Cooper\", role: \"author\"}, \n           {name: \"Lucy Moran\", role: \"author\"}, \n           {name: \"Harry Truman\", role: \"author\"}]\n\narray_2 = [{author: \"Lucy Moran\", title: \"Lorem\"}, \n           {author: \"Bobby Briggs\", title: \"Ipsum\"}, \n           {author: \"Harry Truman\", title: \"Dolor\"}]\n</code></pre>\n\n<p>How would I go about selecting from <code>array_2</code> just the hashes from authors that are in <code>array_1</code>? Preferably, the result would be this:</p>\n\n<pre><code>array_3 = [{author: \"Lucy Moran\", title: \"Lorem\"}, \n           {author: \"Harry Truman\", title: \"Dolor\"}]\n</code></pre>\n"}, {"tags": ["ruby", "xml", "xpath", "rexml"], "answers": [{"comments": [{"owner": {"reputation": 1667, "user_id": 581582, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/a393d0639e9c313bcee804a12303b9e5?s=128&d=identicon&r=PG", "display_name": "bethesdaboys", "link": "https://stackoverflow.com/users/581582/bethesdaboys"}, "edited": false, "score": 0, "creation_date": 1489593400, "post_id": 42814373, "comment_id": 72741801, "body": "thanks!  i made an edit to the question, with a clarification, this is the core matter i was trying to resolve."}], "tags": [], "owner": {"reputation": 88945, "user_id": 290085, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/306077a2fb7af6587f470214a1b337ff?s=128&d=identicon&r=PG", "display_name": "kjhughes", "link": "https://stackoverflow.com/users/290085/kjhughes"}, "is_accepted": true, "score": 2, "last_activity_date": 1489596078, "last_edit_date": 1489596078, "creation_date": 1489592364, "answer_id": 42814373, "question_id": 42814018, "link": "https://stackoverflow.com/questions/42814018/in-rexml-xpath-match-function-what-do-multiple-namespaces-do-in-the-namespace-m/42814373#42814373", "title": "In REXML XPATH match function, what do multiple namespaces do in the namespace mapping?", "body": "<p>The response being queried via XPath uses two different namespaces,</p>\n\n<ul>\n<li>The namespace bound to the <code>p</code> namespace prefix is for <a href=\"https://docs.oasis-open.org/security/saml/v2.0/saml-metadata-2.0-os.pdf\" rel=\"nofollow noreferrer\">SAML\nCore</a> (<code>urn:oasis:names:tc:SAML:2.0:protocol</code>).</li>\n<li>The namespace bound to <code>ds</code> is for <a href=\"https://www.w3.org/TR/xmldsig-core2/\" rel=\"nofollow noreferrer\">XML Signature</a>\n(<code>http://www.w3.org/2000/09/xmldsig#</code>).</li>\n</ul>\n\n<p>and both are declared to the XPath processor via the argument to <code>REXML::XPath.match</code> on the cited line in the code:</p>\n\n<pre><code>      { \"p\" =&gt; PROTOCOL, \"ds\" =&gt; DSIG },\n</code></pre>\n\n<hr>\n\n<h2>Update per question update</h2>\n\n<p>The <strong><em>namespace prefix</em></strong> (<code>p</code>) is arbitrary and need not match the one used in the document.  The <strong><em>namespace</em></strong> (<code>urn:oasis:names:tc:SAML:2.0:protocol</code>) is what's important and must match the one used in the document.  Both are case-sensitive.</p>\n"}], "owner": {"reputation": 1667, "user_id": 581582, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/a393d0639e9c313bcee804a12303b9e5?s=128&d=identicon&r=PG", "display_name": "bethesdaboys", "link": "https://stackoverflow.com/users/581582/bethesdaboys"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 106, "favorite_count": 0, "accepted_answer_id": 42814373, "answer_count": 1, "score": 0, "last_activity_date": 1489596078, "creation_date": 1489591518, "last_edit_date": 1489593362, "question_id": 42814018, "link": "https://stackoverflow.com/questions/42814018/in-rexml-xpath-match-function-what-do-multiple-namespaces-do-in-the-namespace-m", "title": "In REXML XPATH match function, what do multiple namespaces do in the namespace mapping?", "body": "<p>I'm trying to understand exactly what line 785 does here:</p>\n\n<p><a href=\"https://github.com/onelogin/ruby-saml/blob/15fb4789f8cd119fdbd722d58c659129d23a256d/lib/onelogin/ruby-saml/response.rb#L777\" rel=\"nofollow noreferrer\">https://github.com/onelogin/ruby-saml/blob/15fb4789f8cd119fdbd722d58c659129d23a256d/lib/onelogin/ruby-saml/response.rb#L777</a></p>\n\n<p>however I can find no clear explanation of this in the docs e.g. here:</p>\n\n<p><a href=\"https://contest-server.cs.uchicago.edu/ref/ruby_1_9_3_stdlib/libdoc/rexml/rdoc/REXML/XPath.html#method-c-match\" rel=\"nofollow noreferrer\">https://contest-server.cs.uchicago.edu/ref/ruby_1_9_3_stdlib/libdoc/rexml/rdoc/REXML/XPath.html#method-c-match</a></p>\n\n<p>I.e. I can understand what targeting a single namespace (\"ps\") does, but what does the addition of the second namespace (\"d\") do?  </p>\n\n<p>Edit: follow up clarification:  would a document starting with this be successfully parsed, given that the 'protocol' namespace is lower-case in the document but upper case in the code?</p>\n\n<pre><code>&lt;samlp:Response xmlns:samlp=\"urn:oasis:names:tc:SAML:2.0:protocol\" Version=\"2.0\" &gt;\n</code></pre>\n"}, {"tags": ["ruby", "selenium", "selenium-webdriver", "watir", "geckodriver"], "answers": [{"comments": [{"owner": {"reputation": 628, "user_id": 2100717, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/373465e9b480009f58e4bb187e3abd2a?s=128&d=identicon&r=PG&f=1", "display_name": "Bob Shannon", "link": "https://stackoverflow.com/users/2100717/bob-shannon"}, "edited": false, "score": 0, "creation_date": 1489593507, "post_id": 42814108, "comment_id": 72741897, "body": "I receive the following error when trying this:  &#39;&lt;main&gt;&#39;: undefined method &#39;accept_untrusted_certificates=&#39; for #&lt;Selenium::WebDriver::Firefox::Profile:0x007fd10494b088&gt; (NoMethodError)"}, {"owner": {"reputation": 1837, "user_id": 6469477, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Iyc7T.jpg?s=128&g=1", "display_name": "Moe Ghafari", "link": "https://stackoverflow.com/users/6469477/moe-ghafari"}, "reply_to_user": {"reputation": 628, "user_id": 2100717, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/373465e9b480009f58e4bb187e3abd2a?s=128&d=identicon&r=PG&f=1", "display_name": "Bob Shannon", "link": "https://stackoverflow.com/users/2100717/bob-shannon"}, "edited": false, "score": 0, "creation_date": 1489595315, "post_id": 42814108, "comment_id": 72743195, "body": "can you try:     webdriver_accept_untrusted_certs  = true     webdriver_assume_untrusted_issuer  = true"}, {"owner": {"reputation": 628, "user_id": 2100717, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/373465e9b480009f58e4bb187e3abd2a?s=128&d=identicon&r=PG&f=1", "display_name": "Bob Shannon", "link": "https://stackoverflow.com/users/2100717/bob-shannon"}, "edited": false, "score": 0, "creation_date": 1489597944, "post_id": 42814108, "comment_id": 72744885, "body": "Unfortunately, no luck with that either. Do you have any other ideas as to what the issue might be? It seems like it should trust self signed certificates by default based on what I&#39;m reading in the docs?"}, {"owner": {"reputation": 1837, "user_id": 6469477, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Iyc7T.jpg?s=128&g=1", "display_name": "Moe Ghafari", "link": "https://stackoverflow.com/users/6469477/moe-ghafari"}, "reply_to_user": {"reputation": 628, "user_id": 2100717, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/373465e9b480009f58e4bb187e3abd2a?s=128&d=identicon&r=PG&f=1", "display_name": "Bob Shannon", "link": "https://stackoverflow.com/users/2100717/bob-shannon"}, "edited": false, "score": 0, "creation_date": 1489598025, "post_id": 42814108, "comment_id": 72744943, "body": "The only other suggestion i have is to set the marionette capability to true"}, {"owner": {"reputation": 286, "user_id": 6349403, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/ce09db1dc600f8c20326e791aa8e0e6c?s=128&d=identicon&r=PG&f=1", "display_name": "Gopal", "link": "https://stackoverflow.com/users/6349403/gopal"}, "edited": false, "score": 0, "creation_date": 1489598994, "post_id": 42814108, "comment_id": 72745477, "body": "Don&#39;t use Geckodriver, it has so many problems so downgrade your Firefox to 47.0.2 and use legacy firebox driver, everything works fine."}, {"owner": {"reputation": 628, "user_id": 2100717, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/373465e9b480009f58e4bb187e3abd2a?s=128&d=identicon&r=PG&f=1", "display_name": "Bob Shannon", "link": "https://stackoverflow.com/users/2100717/bob-shannon"}, "reply_to_user": {"reputation": 286, "user_id": 6349403, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/ce09db1dc600f8c20326e791aa8e0e6c?s=128&d=identicon&r=PG&f=1", "display_name": "Gopal", "link": "https://stackoverflow.com/users/6349403/gopal"}, "edited": false, "score": 0, "creation_date": 1489599604, "post_id": 42814108, "comment_id": 72745891, "body": "@Gopal Yeah, it does look like downgrading like you&#39;ve suggested is the  path of least resistance at this time."}, {"owner": {"reputation": 286, "user_id": 6349403, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/ce09db1dc600f8c20326e791aa8e0e6c?s=128&d=identicon&r=PG&f=1", "display_name": "Gopal", "link": "https://stackoverflow.com/users/6349403/gopal"}, "reply_to_user": {"reputation": 628, "user_id": 2100717, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/373465e9b480009f58e4bb187e3abd2a?s=128&d=identicon&r=PG&f=1", "display_name": "Bob Shannon", "link": "https://stackoverflow.com/users/2100717/bob-shannon"}, "edited": false, "score": 0, "creation_date": 1489599860, "post_id": 42814108, "comment_id": 72746031, "body": "@Bob Yes, In my case it&#39;s not even selecting select list and also it releases the controls after the click immediately,it doesn&#39;t hold the control like legacy Firefox driver does for page refreshing ,navigation."}], "tags": [], "owner": {"reputation": 1837, "user_id": 6469477, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Iyc7T.jpg?s=128&g=1", "display_name": "Moe Ghafari", "link": "https://stackoverflow.com/users/6469477/moe-ghafari"}, "is_accepted": false, "score": 1, "last_activity_date": 1489591721, "creation_date": 1489591721, "answer_id": 42814108, "question_id": 42813799, "link": "https://stackoverflow.com/questions/42813799/unable-to-bypass-insecure-certificate-warning-with-firefox-using-watir/42814108#42814108", "title": "Unable to bypass insecure certificate warning with Firefox using Watir", "body": "<p>Try this:</p>\n\n<pre><code>profile.accept_untrusted_certificates = true\nprofile.assume_untrusted_certificate_issuer = true\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 2183, "user_id": 1869007, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a5485a7313b368471cfe092e95fd7bea?s=128&d=identicon&r=PG", "display_name": "Lucas Tierney", "link": "https://stackoverflow.com/users/1869007/lucas-tierney"}, "edited": false, "score": 1, "creation_date": 1489716200, "post_id": 42816701, "comment_id": 72803987, "body": "The capability is defined in the w3c spec <a href=\"https://w3c.github.io/webdriver/webdriver-spec.html#capabilities\" rel=\"nofollow noreferrer\">w3c.github.io/webdriver/webdriver-spec.html#capabilities</a> and in the geckodriver readme <a href=\"https://github.com/mozilla/geckodriver\" rel=\"nofollow noreferrer\">github.com/mozilla/geckodriver</a>. Capabilities in ruby are just snake_case versions of the json camelCase capabilities"}, {"owner": {"reputation": 2183, "user_id": 1869007, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a5485a7313b368471cfe092e95fd7bea?s=128&d=identicon&r=PG", "display_name": "Lucas Tierney", "link": "https://stackoverflow.com/users/1869007/lucas-tierney"}, "edited": false, "score": 1, "creation_date": 1489716256, "post_id": 42816701, "comment_id": 72804005, "body": "Also, when using geckodriver, you should try and use <code>Selenium::WebDriver::Remote::W3CCapabilities</code> instead. This will change in the future but that is how it is now"}], "tags": [], "owner": {"reputation": 5134, "user_id": 1672197, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/i8HkV.png?s=128&g=1", "display_name": "orde", "link": "https://stackoverflow.com/users/1672197/orde"}, "is_accepted": true, "score": 5, "last_activity_date": 1497043379, "last_edit_date": 1497043379, "creation_date": 1489598832, "answer_id": 42816701, "question_id": 42813799, "link": "https://stackoverflow.com/questions/42813799/unable-to-bypass-insecure-certificate-warning-with-firefox-using-watir/42816701#42816701", "title": "Unable to bypass insecure certificate warning with Firefox using Watir", "body": "<p>You can do this via <a href=\"https://github.com/SeleniumHQ/selenium/wiki/DesiredCapabilities\" rel=\"nofollow noreferrer\">desired capabilities</a>.  There's additional documentation at <a href=\"https://github.com/SeleniumHQ/selenium/wiki/Ruby-Bindings#ssl-certificates\" rel=\"nofollow noreferrer\">https://github.com/SeleniumHQ/selenium/wiki/Ruby-Bindings#ssl-certificates</a>.</p>\n\n<pre><code>require 'watir'\ncapabilities = Selenium::WebDriver::Remote::Capabilities.firefox(accept_insecure_certs: true)\n\nbrowser = Watir::Browser.new(:firefox, :desired_capabilities =&gt; capabilities)\nbrowser.goto 'https://self-signed.badssl.com/'\nputs browser.url                               #=&gt; https://self-signed.badssl.com/\nbrowser.close\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 322, "user_id": 709569, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4608d0b4b5b5865aca6621cc94881cc9?s=128&d=identicon&r=PG", "display_name": "ChrisW", "link": "https://stackoverflow.com/users/709569/chrisw"}, "is_accepted": false, "score": 0, "last_activity_date": 1579532474, "creation_date": 1579532474, "answer_id": 59825935, "question_id": 42813799, "link": "https://stackoverflow.com/questions/42813799/unable-to-bypass-insecure-certificate-warning-with-firefox-using-watir/59825935#59825935", "title": "Unable to bypass insecure certificate warning with Firefox using Watir", "body": "<p>If you are using Chrome instead, then you need to do this instead:</p>\n\n<pre><code>Watir::Browser.new(:chrome, switches: ['--ignore-certificate-errors'])\n</code></pre>\n"}], "owner": {"reputation": 628, "user_id": 2100717, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/373465e9b480009f58e4bb187e3abd2a?s=128&d=identicon&r=PG&f=1", "display_name": "Bob Shannon", "link": "https://stackoverflow.com/users/2100717/bob-shannon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2921, "favorite_count": 1, "accepted_answer_id": 42816701, "answer_count": 3, "score": 2, "last_activity_date": 1579532474, "creation_date": 1489590996, "last_edit_date": 1489599368, "question_id": 42813799, "link": "https://stackoverflow.com/questions/42813799/unable-to-bypass-insecure-certificate-warning-with-firefox-using-watir", "title": "Unable to bypass insecure certificate warning with Firefox using Watir", "body": "<p>I don't seem to be able to ignore any certificate warnings using the Firefox driver with Watir 6.2.0. Is this unexpected behavior, or am I just not using the API properly?</p>\n\n<p><strong>Example code</strong>:</p>\n\n<pre><code>require 'watir'\n\nprofile = Selenium::WebDriver::Firefox::Profile.new\nprofile.assume_untrusted_certificate_issuer = false\n\nbrowser = Watir::Browser.new(:firefox, :profile =&gt; profile)\n\nbrowser.goto 'https://self-signed.badssl.com/\n</code></pre>\n\n<p><strong>Unexpected result</strong>:</p>\n\n<pre><code>/Users/bshannon/.rvm/gems/ruby-2.4.0/gems/selenium-webdriver-3.3.0/lib/selenium/webdriver/remote/response.rb:69:in `assert_ok': Selenium::WebDriver::Error::UnknownError\n    from /Users/bshannon/.rvm/gems/ruby-2.4.0/gems/selenium-webdriver-3.3.0/lib/selenium/webdriver/remote/response.rb:32:in `initialize'\n    from /Users/bshannon/.rvm/gems/ruby-2.4.0/gems/selenium-webdriver-3.3.0/lib/selenium/webdriver/remote/http/common.rb:83:in `new'\n    from /Users/bshannon/.rvm/gems/ruby-2.4.0/gems/selenium-webdriver-3.3.0/lib/selenium/webdriver/remote/http/common.rb:83:in `create_response'\n    from /Users/bshannon/.rvm/gems/ruby-2.4.0/gems/selenium-webdriver-3.3.0/lib/selenium/webdriver/remote/http/default.rb:107:in `request'\n    from /Users/bshannon/.rvm/gems/ruby-2.4.0/gems/selenium-webdriver-3.3.0/lib/selenium/webdriver/remote/http/common.rb:61:in `call'\n    from /Users/bshannon/.rvm/gems/ruby-2.4.0/gems/selenium-webdriver-3.3.0/lib/selenium/webdriver/remote/w3c_bridge.rb:620:in `execute'\n    from /Users/bshannon/.rvm/gems/ruby-2.4.0/gems/selenium-webdriver-3.3.0/lib/selenium/webdriver/remote/w3c_bridge.rb:126:in `get'\n    from /Users/bshannon/.rvm/gems/ruby-2.4.0/gems/selenium-webdriver-3.3.0/lib/selenium/webdriver/common/navigation.rb:32:in `to'\n    from /Users/bshannon/.rvm/gems/ruby-2.4.0/gems/watir-6.2.0/lib/watir/browser.rb:78:in `goto'\n    from /Users/bshannon/Desktop/test.rb:8:in `&lt;main&gt;'\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/U5BAM.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/U5BAM.png\" alt=\"enter image description here\"></a></p>\n\n<p><strong>Environment:</strong></p>\n\n<pre><code>Watir 6.2.0\nSelenium Webdriver 3.3.0\nGeckodriver 0.15\nFirefox 52.0\nMac OSX\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "devise", "upgrade", "rails-4-upgrade"], "comments": [{"owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "edited": false, "score": 0, "creation_date": 1489591124, "post_id": 42813398, "comment_id": 72739862, "body": "Do you have any <code>default_scope</code> defined? Do you use polymorphic associations?"}, {"owner": {"reputation": 3665, "user_id": 4330954, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/340ffba5552ac48227741a8695a255ff?s=128&d=identicon&r=PG", "display_name": "x6iae", "link": "https://stackoverflow.com/users/4330954/x6iae"}, "reply_to_user": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "edited": false, "score": 0, "creation_date": 1489591409, "post_id": 42813398, "comment_id": 72740124, "body": "Yes I do have <code>default_scope</code>s and polymorphic associations @spickermann"}, {"owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "edited": false, "score": 1, "creation_date": 1489591425, "post_id": 42813398, "comment_id": 72740140, "body": "This discussion might be of interest: <a href=\"https://github.com/rails/rails/issues/19409\" rel=\"nofollow noreferrer\">github.com/rails/rails/issues/19409</a>"}, {"owner": {"reputation": 3665, "user_id": 4330954, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/340ffba5552ac48227741a8695a255ff?s=128&d=identicon&r=PG", "display_name": "x6iae", "link": "https://stackoverflow.com/users/4330954/x6iae"}, "reply_to_user": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "edited": false, "score": 0, "creation_date": 1489593327, "post_id": 42813398, "comment_id": 72741742, "body": "@spickermann I&#39;ve tried commenting out the <code>self.default_scope</code> just to be certain. I also made a mistake in the previous error-trace I posted, updated that now."}, {"owner": {"reputation": 100, "user_id": 2425565, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8cc6f8733d6c5a8b795a5e3fb0a9f7df?s=128&d=identicon&r=PG", "display_name": "Omkar", "link": "https://stackoverflow.com/users/2425565/omkar"}, "edited": false, "score": 0, "creation_date": 1489660920, "post_id": 42813398, "comment_id": 72772982, "body": "Check for infinite loop."}, {"owner": {"reputation": 3665, "user_id": 4330954, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/340ffba5552ac48227741a8695a255ff?s=128&d=identicon&r=PG", "display_name": "x6iae", "link": "https://stackoverflow.com/users/4330954/x6iae"}, "edited": false, "score": 0, "creation_date": 1489691334, "post_id": 42813398, "comment_id": 72794575, "body": "Error seems to be caused by devise... I updated post with findings."}], "answers": [{"tags": [], "owner": {"reputation": 3665, "user_id": 4330954, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/340ffba5552ac48227741a8695a255ff?s=128&d=identicon&r=PG", "display_name": "x6iae", "link": "https://stackoverflow.com/users/4330954/x6iae"}, "is_accepted": true, "score": 0, "last_activity_date": 1489693224, "last_edit_date": 1495540956, "creation_date": 1489693224, "answer_id": 42843405, "question_id": 42813398, "link": "https://stackoverflow.com/questions/42813398/rails-upgrade-to-4-2-stack-too-deep-error-from-arel/42843405#42843405", "title": "Rails upgrade to 4.2 Stack too deep error from arel", "body": "<p>I found it...</p>\n\n<p>So, because I was trying to avoid <a href=\"https://github.com/plataformatec/devise/issues/3159\" rel=\"nofollow noreferrer\">this issue</a> which also has <a href=\"https://stackoverflow.com/a/27612295/4330954\">a stackoverflow post here</a>, it looks like I went too high with my devise version. </p>\n\n<p>I was previously running devise <code>3.2.1</code>, and I took it up to <code>3.5.1</code>. I would have noticed this if I had only updated a single gem at a time...</p>\n\n<p>However, version <code>3.4.1</code> works very well for me here now. </p>\n\n<p>I should probably also mention that my <code>pg</code> gem version is <code>0.17.0</code>.</p>\n"}], "owner": {"reputation": 3665, "user_id": 4330954, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/340ffba5552ac48227741a8695a255ff?s=128&d=identicon&r=PG", "display_name": "x6iae", "link": "https://stackoverflow.com/users/4330954/x6iae"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 254, "favorite_count": 0, "accepted_answer_id": 42843405, "answer_count": 1, "score": 0, "last_activity_date": 1489693224, "creation_date": 1489589965, "last_edit_date": 1489691268, "question_id": 42813398, "link": "https://stackoverflow.com/questions/42813398/rails-upgrade-to-4-2-stack-too-deep-error-from-arel", "title": "Rails upgrade to 4.2 Stack too deep error from arel", "body": "<p>I'm doing a rails upgrade and have been able to successfully get it to <code>4.1.16</code></p>\n\n<p>Now to make the jump to <code>4.2</code>... been able to successfully run <code>bundle update</code> but when I tried to run my specs, I'm getting a scanty <code>SystemStackError</code> as follow:</p>\n\n<pre><code>//home/vagrant/.rvm/gems/ruby-2.2.3/gems/arel-6.0.4/lib/arel/visitors/reduce.rb:14:in `rescue in visit': stack level too deep (SystemStackError)\nfrom /home/vagrant/.rvm/gems/ruby-2.2.3/gems/arel-6.0.4/lib/arel/visitors/reduce.rb:13:in `visit'\nfrom /home/vagrant/.rvm/gems/ruby-2.2.3/gems/arel-6.0.4/lib/arel/visitors/to_sql.rb:241:in `block in visit_Arel_Nodes_SelectCore'\nfrom /home/vagrant/.rvm/gems/ruby-2.2.3/gems/arel-6.0.4/lib/arel/visitors/to_sql.rb:240:in `each'\nfrom /home/vagrant/.rvm/gems/ruby-2.2.3/gems/arel-6.0.4/lib/arel/visitors/to_sql.rb:240:in `each_with_index'\nfrom /home/vagrant/.rvm/gems/ruby-2.2.3/gems/arel-6.0.4/lib/arel/visitors/to_sql.rb:240:in `visit_Arel_Nodes_SelectCore'\nfrom /home/vagrant/.rvm/gems/ruby-2.2.3/gems/arel-6.0.4/lib/arel/visitors/to_sql.rb:210:in `block in visit_Arel_Nodes_SelectStatement'\nfrom /home/vagrant/.rvm/gems/ruby-2.2.3/gems/arel-6.0.4/lib/arel/visitors/to_sql.rb:209:in `each'\nfrom /home/vagrant/.rvm/gems/ruby-2.2.3/gems/arel-6.0.4/lib/arel/visitors/to_sql.rb:209:in `inject'\n ... 9265 levels...\nfrom /home/vagrant/.rvm/gems/ruby-2.2.3/bin/rspec:23:in `load'\nfrom /home/vagrant/.rvm/gems/ruby-2.2.3/bin/rspec:23:in `&lt;main&gt;'\nfrom /home/vagrant/.rvm/gems/ruby-2.2.3/bin/ruby_executable_hooks:15:in `eval'\nfrom /home/vagrant/.rvm/gems/ruby-2.2.3/bin/ruby_executable_hooks:15:in `&lt;main&gt;'\n</code></pre>\n\n<p>I'm trying to figure out what's needed to be changed/updated here, thanks.</p>\n\n<p>P.S: Ruby version is 2.2.3</p>\n\n<p><strong>#Update:</strong>\nI made a mistake in the previous stack-trace, was the wrong one, I've updated that now.</p>\n\n<p><strong>#Update ( 03/16 ):</strong>\nThis seems to be caused by devise...\nI've managed to trace the error down to the following line in <code>config/initializers/devise.rb</code>:</p>\n\n<pre><code>require 'devise/orm/active_record'\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "activerecord"], "comments": [{"owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "edited": false, "score": 0, "creation_date": 1489590774, "post_id": 42813311, "comment_id": 72739580, "body": "Have you tried looking at the SQL generated?"}, {"owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "edited": false, "score": 1, "creation_date": 1489591336, "post_id": 42813311, "comment_id": 72740049, "body": "Add <code>to_sql</code> to the queries, output the generated SQL and compare it."}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 6729980, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d854a6f883351fa2528f095073ab2f5c?s=128&d=identicon&r=PG&f=1", "display_name": "Swiftda01", "link": "https://stackoverflow.com/users/6729980/swiftda01"}, "edited": false, "score": 1, "creation_date": 1489659275, "post_id": 42814517, "comment_id": 72771806, "body": "Thanks for the reply. The problem actually went away by itself and unfortunately I can&#39;t seem to recreate it, but I&#39;ll certainly bear your solution in mind if it occurs again. Thank you"}], "tags": [], "owner": {"reputation": 2925, "user_id": 7362128, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6c182f15f6440b325d21ef726ccbda66?s=128&d=identicon&r=PG", "display_name": "Slava.K", "link": "https://stackoverflow.com/users/7362128/slava-k"}, "is_accepted": false, "score": 0, "last_activity_date": 1489592689, "creation_date": 1489592689, "answer_id": 42814517, "question_id": 42813311, "link": "https://stackoverflow.com/questions/42813311/activerecord-find-by-query-returning-nil/42814517#42814517", "title": "ActiveRecord find_by query returning nil", "body": "<p>Looks like ActiveRecord has cached result for <code>TenancyTenant.find_by(tenant_id: 1, tenancy_id: 1)</code>. Try to perform the same query in an <code>uncached</code> block:</p>\n\n<pre><code>TenancyTenant.uncached do\n  TenancyTenant.find_by(tenant_id: 1, tenancy_id: 1)\nend\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 6729980, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d854a6f883351fa2528f095073ab2f5c?s=128&d=identicon&r=PG&f=1", "display_name": "Swiftda01", "link": "https://stackoverflow.com/users/6729980/swiftda01"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 739, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1489592689, "creation_date": 1489589733, "question_id": 42813311, "link": "https://stackoverflow.com/questions/42813311/activerecord-find-by-query-returning-nil", "title": "ActiveRecord find_by query returning nil", "body": "<p>I have the following object stored in my database:</p>\n\n<pre><code>&lt;TenancyTenant id: 11, tenancy_id: 1, tenant_id: 1, created_at: \"2017-03-15 14:30:44\", updated_at: \"2017-03-15 14:30:44\"&gt;\n</code></pre>\n\n<p>When I use the following queries then the object is returned:</p>\n\n<pre><code>TenancyTenant.find_by(tenancy_id: 1)\nTenancyTenant.find_by(tenant_id: 1)\nTenancyTenant.find_by(id: 11)\nTenancyTenant.find_by(id: 11, tenancy_id: 1)\nTenancyTenant.where(tenancy_id: 1, tenant_id: 1)\n</code></pre>\n\n<p>However, when I use:</p>\n\n<pre><code>TenancyTenant.find_by(tenant_id: 1, tenancy_id: 1)\n</code></pre>\n\n<p>then it returns nil.</p>\n\n<p>Please can anyone advise me as to why this behaviour may be occurring?</p>\n"}, {"tags": ["javascript", "html", "ruby", "audio"], "comments": [{"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 2, "creation_date": 1489591162, "post_id": 42813081, "comment_id": 72739899, "body": "What does this have to do with <a href=\"https://stackoverflow.com/questions/tagged/ruby\">ruby</a>? From what I can see, your code is entirely <a href=\"https://stackoverflow.com/questions/tagged/ecmascript\">ecmascript</a> and <a href=\"https://stackoverflow.com/questions/tagged/html\">html</a>."}], "answers": [{"comments": [{"owner": {"reputation": 1962, "user_id": 370532, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/nc6yi.jpg?s=128&g=1", "display_name": "DeezCashews", "link": "https://stackoverflow.com/users/370532/deezcashews"}, "edited": false, "score": 0, "creation_date": 1489591831, "post_id": 42813357, "comment_id": 72740484, "body": "I don&#39;t think this will work @eiko.  Image tags can&#39;t contain elements as far as I know.  HTML allows <code>&lt;img&gt;</code> without closing brackets whereas XHTML would force you to use <code>&lt;img&#47;&gt;</code> but that doesn&#39;t mean the element below it is nested inside."}, {"owner": {"reputation": 4150, "user_id": 7470620, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/49f3026fe13841e41d1805178eed9a3c?s=128&d=identicon&r=PG", "display_name": "eiko", "link": "https://stackoverflow.com/users/7470620/eiko"}, "reply_to_user": {"reputation": 1962, "user_id": 370532, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/nc6yi.jpg?s=128&g=1", "display_name": "DeezCashews", "link": "https://stackoverflow.com/users/370532/deezcashews"}, "edited": false, "score": 0, "creation_date": 1489598886, "post_id": 42813357, "comment_id": 72745417, "body": "@DeezCashews you&#39;re absolutely right, thanks! i modified my code (and tested it this time) so that it will run properly. same idea, but i moved the onclick to the parent div."}], "tags": [], "owner": {"reputation": 4150, "user_id": 7470620, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/49f3026fe13841e41d1805178eed9a3c?s=128&d=identicon&r=PG", "display_name": "eiko", "link": "https://stackoverflow.com/users/7470620/eiko"}, "is_accepted": true, "score": 1, "last_activity_date": 1489598828, "last_edit_date": 1489598828, "creation_date": 1489589864, "answer_id": 42813357, "question_id": 42813081, "link": "https://stackoverflow.com/questions/42813081/ruby-each-time-an-image-is-clicked-how-to-play-a-different-audio-clip/42813357#42813357", "title": "Ruby: Each time an image is clicked, how to play a different audio clip?", "body": "<p>Try this:</p>\n\n<pre><code>&lt;script&gt;\n  function play(emt){\n    var audio = emt.getElementsByTagName(\"audio\")[0];\n    audio.play();\n  }\n&lt;/script&gt;\n\n&lt;div onclick=\"play(this)\"&gt;\n  &lt;img src=\"https://metrouk2.files.wordpress.com/2016/04/red-horse-dot-m_2778460a.jpg\" value=\"PLAY\"&gt;\n  &lt;audio src=\"audios/track1.mp3\" &gt;&lt;/audio&gt;\n&lt;/div&gt;\n\n&lt;div onclick=\"play(this)\"&gt;\n  &lt;img src=\"http://www.clker.com/cliparts/O/3/O/G/7/D/green-circle-hi.png\" value=\"PLAY\"&gt;\n  &lt;audio src=\"audios/track2.mp3\" &gt;&lt;/audio&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p>I changed your code so that when <code>onclick</code> calls <code>play</code>, it passes the <code>&lt;div&gt;</code> which was clicked as a parameter. Then <code>play</code> looks for the audio element attached to the image. </p>\n\n<p>As a rule of thumb, you should never have two elements with the same id on the same page. </p>\n"}, {"tags": [], "owner": {"reputation": 1962, "user_id": 370532, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/nc6yi.jpg?s=128&g=1", "display_name": "DeezCashews", "link": "https://stackoverflow.com/users/370532/deezcashews"}, "is_accepted": false, "score": 1, "last_activity_date": 1489591395, "creation_date": 1489591395, "answer_id": 42813959, "question_id": 42813081, "link": "https://stackoverflow.com/questions/42813081/ruby-each-time-an-image-is-clicked-how-to-play-a-different-audio-clip/42813959#42813959", "title": "Ruby: Each time an image is clicked, how to play a different audio clip?", "body": "<p>Your <code>getElementById</code> query is returning more than one element since both ids are 'audio'.  Give them unique ids and pass what you want played into the function like so:</p>\n\n<pre><code>&lt;script&gt;\n  function play(id){\n    var audio = document.getElementById(id);\n    audio.play();\n  }\n&lt;/script&gt;\n\n&lt;div&gt;\n  &lt;img src=\"https://metrouk2.files.wordpress.com/2016/04/red-horse-dot-m_2778460a.jpg\" value=\"PLAY\"  onclick=\"play('audio1')\"&gt;\n      &lt;audio id=\"audio1\" src=\"audios/track1.mp3\" &gt;&lt;/audio&gt;\n&lt;/div&gt;\n&lt;div&gt;\n  &lt;img src=\"http://www.clker.com/cliparts/O/3/O/G/7/D/green-circle-hi.png\" value=\"PLAY\"  onclick=\"play('audio2')\"&gt;\n  &lt;audio id=\"audio2\" src=\"audios/track2.mp3\" &gt;&lt;/audio&gt;\n&lt;/div&gt;\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 7715724, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/410831f12288ac5e99eb76429a9ba3f5?s=128&d=identicon&r=PG&f=1", "display_name": "buster49", "link": "https://stackoverflow.com/users/7715724/buster49"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 43, "favorite_count": 1, "accepted_answer_id": 42813357, "answer_count": 2, "score": 1, "last_activity_date": 1489598828, "creation_date": 1489589247, "last_edit_date": 1489596463, "question_id": 42813081, "link": "https://stackoverflow.com/questions/42813081/ruby-each-time-an-image-is-clicked-how-to-play-a-different-audio-clip", "title": "Ruby: Each time an image is clicked, how to play a different audio clip?", "body": "<p>I am working on a project in Ruby and each time an image is clicked (there will be multiple images on the page), I want an audio clip specific to that image played. Based on what I have so far, only the first audio clip will play each time any image is clicked. Please see my code below:</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>function play() {\r\n  var audio = document.getElementById(\"audio\");\r\n  audio.play();\r\n}</code></pre>\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>&lt;div&gt;\r\n  &lt;img src=\"https://metrouk2.files.wordpress.com/2016/04/red-horse-dot-m_2778460a.jpg\" value=\"PLAY\" onclick=\"play()\"&gt;\r\n  &lt;audio id=\"audio\" src=\"audios/track1.mp3\"&gt;&lt;/audio&gt;\r\n&lt;/div&gt;\r\n&lt;div&gt;\r\n  &lt;img src=\"http://www.clker.com/cliparts/O/3/O/G/7/D/green-circle-hi.png\" value=\"PLAY\" onclick=\"play()\"&gt;\r\n  &lt;audio id=\"audio\" src=\"audios/track2.mp3\"&gt;&lt;/audio&gt;\r\n&lt;/div&gt;</code></pre>\r\n</div>\r\n</div>\r\n</p>\n\n<p>How can I make this work?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "rubygems", "rails-admin"], "comments": [{"owner": {"reputation": 1270, "user_id": 749409, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/c7d5b3aad74c71de1c05003662938227?s=128&d=identicon&r=PG", "display_name": "Brandon Cordell", "link": "https://stackoverflow.com/users/749409/brandon-cordell"}, "edited": false, "score": 0, "creation_date": 1489589425, "post_id": 42812905, "comment_id": 72738467, "body": "You can fix the <code>nokogiri</code> gem issue by upgrading to Ruby v2.1.0 or above."}, {"owner": {"reputation": 604, "user_id": 7488889, "user_type": "registered", "accept_rate": 77, "profile_image": "https://graph.facebook.com/10206671885452124/picture?type=large", "display_name": "Antonin Mrchd", "link": "https://stackoverflow.com/users/7488889/antonin-mrchd"}, "reply_to_user": {"reputation": 1270, "user_id": 749409, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/c7d5b3aad74c71de1c05003662938227?s=128&d=identicon&r=PG", "display_name": "Brandon Cordell", "link": "https://stackoverflow.com/users/749409/brandon-cordell"}, "edited": false, "score": 0, "creation_date": 1489590205, "post_id": 42812905, "comment_id": 72739103, "body": "@BrandonCordell thank you for your answer, what If I can&#39;t upgrade my ruby version ? I have to stay in v2.0.0"}, {"owner": {"reputation": 3312, "user_id": 412528, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/7a781dab51284428bf9a44f3e0c85b6a?s=128&d=identicon&r=PG", "display_name": "Guillermo Siliceo Trueba", "link": "https://stackoverflow.com/users/412528/guillermo-siliceo-trueba"}, "edited": false, "score": 0, "creation_date": 1539875626, "post_id": 42812905, "comment_id": 92667959, "body": "You can use gem dependency -r rails_admin to see all gems rails admin depends on directly or indirectly"}], "owner": {"reputation": 604, "user_id": 7488889, "user_type": "registered", "accept_rate": 77, "profile_image": "https://graph.facebook.com/10206671885452124/picture?type=large", "display_name": "Antonin Mrchd", "link": "https://stackoverflow.com/users/7488889/antonin-mrchd"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 62, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1489588840, "creation_date": 1489588840, "question_id": 42812905, "link": "https://stackoverflow.com/questions/42812905/ruby-on-rails-rails-admin-fieldset-behavior", "title": "ruby on rails, rails admin fieldset behavior", "body": "<p>I working as intern for a webapp, they are using ruby on rails v4.2 and ruby v2.0.0, and rails admin v0.6.8. </p>\n\n<p>There is a problem in rails admin that arrived since Friday, after a commit, do I look on github each diff in each commit, and the problem seems to come from the gemfile and gemfile.lock where thos changes happened :</p>\n\n<p><a href=\"https://i.stack.imgur.com/XG4qC.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/XG4qC.png\" alt=\"enter image description here\"></a></p>\n\n<p><a href=\"https://i.stack.imgur.com/KrtP9.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/KrtP9.png\" alt=\"enter image description here\"></a></p>\n\n<p>And here is an image of the problem in the admin (I have to scroll on the right to see the field)</p>\n\n<p><a href=\"https://i.stack.imgur.com/pE3Qz.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/pE3Qz.png\" alt=\"enter image description here\"></a></p>\n\n<p><a href=\"https://i.stack.imgur.com/btfh8.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/btfh8.png\" alt=\"enter image description here\"></a></p>\n\n<p>I try to update my gemfile after come back to <code>gem 'tinymce-rails', \"~&gt; 4.5.3\"</code> instead of <code>gem 'tinymce-rails', \"~&gt; 4.5.5\"</code></p>\n\n<p>But I have this error : </p>\n\n<pre><code>    Gem::InstallError: nokogiri requires Ruby version &gt;= 2.1.0.\nAn error occurred while installing nokogiri (1.7.0.1), and Bundler cannot continue.\nMake sure that `gem install nokogiri -v '1.7.0.1'` succeeds before bundling.\n</code></pre>\n\n<p>Does anyone know which gem interact with rails admin ? and how could I fix the issue with nokogiri and tinymce-rails ?</p>\n\n<p>Thank you !</p>\n"}, {"tags": ["ruby", "web-scraping", "nokogiri", "ruby-on-rails-5", "activemodel"], "comments": [{"owner": {"reputation": 7638, "user_id": 1014251, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/1c4500c91af486c885af8bb84eefd063?s=128&d=identicon&r=PG", "display_name": "ReggieB", "link": "https://stackoverflow.com/users/1014251/reggieb"}, "edited": false, "score": 0, "creation_date": 1489588745, "post_id": 42812424, "comment_id": 72737905, "body": "After you run <code>s.scrape_new_movie</code>, what does <code>s.failure</code> return?"}, {"owner": {"reputation": 7638, "user_id": 1014251, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/1c4500c91af486c885af8bb84eefd063?s=128&d=identicon&r=PG", "display_name": "ReggieB", "link": "https://stackoverflow.com/users/1014251/reggieb"}, "edited": false, "score": 0, "creation_date": 1489588785, "post_id": 42812424, "comment_id": 72737945, "body": "Try removing the <code>begin&#47;rescue&#47;end</code> and see what errors occur."}, {"owner": {"reputation": 66, "user_id": 6095056, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jqTzW.jpg?s=128&g=1", "display_name": "Kamil Kiedrzyn", "link": "https://stackoverflow.com/users/6095056/kamil-kiedrzyn"}, "reply_to_user": {"reputation": 7638, "user_id": 1014251, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/1c4500c91af486c885af8bb84eefd063?s=128&d=identicon&r=PG", "display_name": "ReggieB", "link": "https://stackoverflow.com/users/1014251/reggieb"}, "edited": false, "score": 0, "creation_date": 1489590450, "post_id": 42812424, "comment_id": 72739305, "body": "When i removed it, value is still nil. How I can check what <code>s.failure</code> return ?"}, {"owner": {"reputation": 7638, "user_id": 1014251, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/1c4500c91af486c885af8bb84eefd063?s=128&d=identicon&r=PG", "display_name": "ReggieB", "link": "https://stackoverflow.com/users/1014251/reggieb"}, "edited": false, "score": 0, "creation_date": 1489590803, "post_id": 42812424, "comment_id": 72739597, "body": "In the same console instance where you ran <code>s.scrape_new_movie</code>, enter  <code>s.failure</code>"}, {"owner": {"reputation": 66, "user_id": 6095056, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jqTzW.jpg?s=128&g=1", "display_name": "Kamil Kiedrzyn", "link": "https://stackoverflow.com/users/6095056/kamil-kiedrzyn"}, "reply_to_user": {"reputation": 7638, "user_id": 1014251, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/1c4500c91af486c885af8bb84eefd063?s=128&d=identicon&r=PG", "display_name": "ReggieB", "link": "https://stackoverflow.com/users/1014251/reggieb"}, "edited": false, "score": 0, "creation_date": 1489591117, "post_id": 42812424, "comment_id": 72739853, "body": "Ok so it returns now <code>NoMethodError: undefined method </code>failure&#39; for #&lt;Scrape:0x007f92e69f37f8&gt;` when I type <code>s.failure</code>."}], "answers": [{"comments": [{"owner": {"reputation": 66, "user_id": 6095056, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jqTzW.jpg?s=128&g=1", "display_name": "Kamil Kiedrzyn", "link": "https://stackoverflow.com/users/6095056/kamil-kiedrzyn"}, "edited": false, "score": 0, "creation_date": 1489592112, "post_id": 42813987, "comment_id": 72740719, "body": "Ok, but when I replaced method like you it still gets nil and I don&#39;t have any idea how I can debug it."}, {"owner": {"reputation": 7638, "user_id": 1014251, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/1c4500c91af486c885af8bb84eefd063?s=128&d=identicon&r=PG", "display_name": "ReggieB", "link": "https://stackoverflow.com/users/1014251/reggieb"}, "reply_to_user": {"reputation": 66, "user_id": 6095056, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jqTzW.jpg?s=128&g=1", "display_name": "Kamil Kiedrzyn", "link": "https://stackoverflow.com/users/6095056/kamil-kiedrzyn"}, "edited": false, "score": 0, "creation_date": 1489601047, "post_id": 42813987, "comment_id": 72746724, "body": "Do you have any other <code>rescue</code> clauses in the code?"}], "tags": [], "owner": {"reputation": 7638, "user_id": 1014251, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/1c4500c91af486c885af8bb84eefd063?s=128&d=identicon&r=PG", "display_name": "ReggieB", "link": "https://stackoverflow.com/users/1014251/reggieb"}, "is_accepted": false, "score": 0, "last_activity_date": 1489591890, "last_edit_date": 1495542734, "creation_date": 1489591457, "answer_id": 42813987, "question_id": 42812424, "link": "https://stackoverflow.com/questions/42812424/rails-5-model-with-nokogri-gem-return-nil/42813987#42813987", "title": "Rails 5 model with Nokogri gem return nil", "body": "<p>Replace the method:</p>\n\n<pre><code>  def scrape_new_movie\n    begin\n      doc = Nokogiri::HTML(open(\"https://zalukaj.com/zalukaj-film/26280/barbie_w_wiecie_gier_barbie_video_game_hero_2017_.html\").read, nil, 'utf-8')\n      doc.css('script').remove\n      self.title = doc.css('#pw_title.about_movie_title').text\n      v = doc.css('#success_vote').text\n      self.vote = v.slice(2...5)\n      self.image_url = doc.css('.about_movie img').attr('src').text\n      self.description = doc.css('#pw_description.e_s3k').text\n      return true\n      rescue Exception =&gt; e\n      self.failure = \"Something went wrong with the scrape\"\n    end\n  end\n</code></pre>\n\n<p>With </p>\n\n<pre><code>  def scrape_new_movie\n    doc = Nokogiri::HTML(open(\"https://zalukaj.com/zalukaj-film/26280/barbie_w_wiecie_gier_barbie_video_game_hero_2017_.html\").read, nil, 'utf-8')\n    doc.css('script').remove\n    self.title = doc.css('#pw_title.about_movie_title').text\n    v = doc.css('#success_vote').text\n    self.vote = v.slice(2...5)\n    self.image_url = doc.css('.about_movie img').attr('src').text\n    self.description = doc.css('#pw_description.e_s3k').text\n    return true\n  end\n</code></pre>\n\n<p>Then any errors that occur will bubble up and be displayed in a way that allows you to debug what the problem is.</p>\n\n<p>This is a good example of why you should never do <code>rescue Exception</code> as that always makes it harder to debug a problem. See: <a href=\"https://stackoverflow.com/questions/10048173/why-is-it-a-bad-style-to-rescue-exception-e-in-ruby\">Why is it a bad style to `rescue Exception =&gt; e` in Ruby?</a></p>\n"}, {"tags": [], "owner": {"reputation": 1853, "user_id": 2501082, "user_type": "registered", "accept_rate": 20, "profile_image": "https://i.stack.imgur.com/qdJBQ.jpg?s=128&g=1", "display_name": "David Gross", "link": "https://stackoverflow.com/users/2501082/david-gross"}, "is_accepted": false, "score": 0, "last_activity_date": 1489593662, "last_edit_date": 1489593662, "creation_date": 1489592216, "answer_id": 42814311, "question_id": 42812424, "link": "https://stackoverflow.com/questions/42812424/rails-5-model-with-nokogri-gem-return-nil/42814311#42814311", "title": "Rails 5 model with Nokogri gem return nil", "body": "<p>With how you set it up there is no need to call the literal name of the class. Just add self. to the methods and don't call new. There is also quite a bit of bugs in this script if you want to debug this I would also raise the exception message. You should also change self.title = to @title = or if you want to keep self.title you need to add class to inherit from self and put attr_accessor inside that class. </p>\n\n<pre><code>class Scrape\n  class &lt;&lt; self\n    attr_accessor :title, :vote, :image_url, :description, failure\n  end \n\n  def self.scrape_new_movie\n    begin\n      doc = Nokogiri::HTML(open(\"https://zalukaj.com/zalukaj-film/26280/barbie_w_wiecie_gier_barbie_video_game_hero_2017_.html\").read, nil, 'utf-8')\n      doc.css('script').remove\n      self.title = doc.css('#pw_title.about_movie_title').text\n      v = doc.css('#success_vote').text\n      self.vote = v.slice(2...5)\n      self.image_url = doc.css('.about_movie img').attr('src').text\n      self.description = doc.css('#pw_description.e_s3k').text\n      return true\n      rescue Exception =&gt; e\n        raise e \n      end\n    end\n\n    def self.save_movie\n      movie = Movie.new(\n        title: self.title,\n        vote: self.vote,\n        image_url: self.image_url,\n        description: self.description\n      )\n      movie.save\n    end\n end      \n Scrape.scrape_new_movie\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 66, "user_id": 6095056, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jqTzW.jpg?s=128&g=1", "display_name": "Kamil Kiedrzyn", "link": "https://stackoverflow.com/users/6095056/kamil-kiedrzyn"}, "edited": false, "score": 0, "creation_date": 1490046674, "post_id": 42846131, "comment_id": 72928419, "body": "Yes it works now! Thank you very much for the prompt."}], "tags": [], "owner": {"reputation": 1434, "user_id": 5010370, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/5ef5c21eb66b79ab4fa94df6b40be5b4?s=128&d=identicon&r=PG&f=1", "display_name": "Lasse Sviland", "link": "https://stackoverflow.com/users/5010370/lasse-sviland"}, "is_accepted": true, "score": 0, "last_activity_date": 1490085991, "last_edit_date": 1490085991, "creation_date": 1489704308, "answer_id": 42846131, "question_id": 42812424, "link": "https://stackoverflow.com/questions/42812424/rails-5-model-with-nokogri-gem-return-nil/42846131#42846131", "title": "Rails 5 model with Nokogri gem return nil", "body": "<p>The reason it is returning <code>nil</code>, is because you end your <code>attr_accessor</code> with a comma. The variable <code>failure</code> is also undefined, so I assume you want an attr_accessor for that as well.</p>\n\n<p>You should change</p>\n\n<pre><code>  attr_accessor :title, :vote, :image_url, :description,\n</code></pre>\n\n<p>to</p>\n\n<pre><code>  attr_accessor :title, :vote, :image_url, :description, :failure\n</code></pre>\n"}], "owner": {"reputation": 66, "user_id": 6095056, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jqTzW.jpg?s=128&g=1", "display_name": "Kamil Kiedrzyn", "link": "https://stackoverflow.com/users/6095056/kamil-kiedrzyn"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 95, "favorite_count": 0, "accepted_answer_id": 42846131, "answer_count": 3, "score": -1, "last_activity_date": 1490085991, "creation_date": 1489587576, "last_edit_date": 1489602870, "question_id": 42812424, "link": "https://stackoverflow.com/questions/42812424/rails-5-model-with-nokogri-gem-return-nil", "title": "Rails 5 model with Nokogri gem return nil", "body": "<p>I have problem with my app in Rails 5. I create class <code>scrape.rb</code> which\nscraping HTML via Nokogiri gem and can save this data in another model, but when I create new object in rails console this return nil and don't scrap any value: </p>\n\n<pre><code>2.3.0 :018 &gt; s = Scrape.new\n =&gt; #&lt;Scrape:0x007fba68b79e98&gt;\n2.3.0 :019 &gt; s.scrape_new_movie\n =&gt; nil\n2.3.0 :020 &gt;\n</code></pre>\n\n<p>Here is <code>scrape.rb</code> model</p>\n\n<pre><code> class Scrape\n  attr_accessor :title, :vote, :image_url, :description,\n\n  def scrape_new_movie\n    begin\n      doc = Nokogiri::HTML(open(\"https://zalukaj.com/zalukaj-film/26280/barbie_w_wiecie_gier_barbie_video_game_hero_2017_.html\").read, nil, 'utf-8')\n      doc.css('script').remove\n      self.title = doc.css('#pw_title.about_movie_title').text\n      v = doc.css('#success_vote').text\n      self.vote = v.slice(2...5)\n      self.image_url = doc.css('.about_movie img').attr('src').text\n      self.description = doc.css('#pw_description.e_s3k').text\n      return true\n      rescue Exception =&gt; e\n      self.failure = \"Something went wrong with the scrape\"\n    end\n  end\n\n  def save_movie\n    movie = Movie.new(\n      title: self.title,\n      vote: self.vote,\n      image_url: self.image_url,\n      description: self.description\n    )\n    movie.save\n  end\nend\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "twitter-bootstrap", "datepicker"], "answers": [{"tags": [], "owner": {"reputation": 9106, "user_id": 3898339, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/k2GV8.png?s=128&g=1", "display_name": "Deep 3015", "link": "https://stackoverflow.com/users/3898339/deep-3015"}, "is_accepted": false, "score": 0, "last_activity_date": 1489857556, "creation_date": 1489857556, "answer_id": 42877462, "question_id": 42812143, "link": "https://stackoverflow.com/questions/42812143/bootstrap-datepicker-rails-set-default-century-view-to-20th-century/42877462#42877462", "title": "bootstrap-datepicker-rails set default century view to 20th century", "body": "<p>Using options from <a href=\"https://uxsolutions.github.io/bootstrap-datepicker/?#sandbox\" rel=\"nofollow noreferrer\">bootstrap-datepicker sandbox</a></p>\n\n<p>A defined in <a href=\"https://github.com/Nerian/bootstrap-datepicker-rails/#using-bootstrap-datepicker-rails\" rel=\"nofollow noreferrer\">Using bootstrap-datepicker-rails</a> you can use this configuration </p>\n\n<p>this demo is on js and html </p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>$(document).ready(function(){\r\n$('.datepicker').datepicker({\r\n    startDate: \"01/01/1900\",\r\n    endDate: \"12/31/1999\",// you may omit\r\n    startView: 3,\r\n    maxViewMode: 3\r\n});\r\n})</code></pre>\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>&lt;script src=\"https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js\"&gt;&lt;/script&gt;\r\n&lt;link href=\"https://netdna.bootstrapcdn.com/bootstrap/3.0.3/css/bootstrap.min.css\" rel=\"stylesheet\"&gt;\r\n &lt;link  href=\"https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.6.4/css/bootstrap-datepicker.css\" rel=\"stylesheet\"&gt;\r\n \r\n &lt;script src=\"https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.6.4/js/bootstrap-datepicker.js\"&gt;&lt;/script&gt;\r\n\r\n\r\n&lt;input type=\"text\" class='datepicker' &gt;</code></pre>\r\n</div>\r\n</div>\r\n</p>\n"}, {"comments": [{"owner": {"reputation": 4600, "user_id": 5961578, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/df7cbfdd2a92a7926af3bbb8648318aa?s=128&d=identicon&r=PG", "display_name": "moveson", "link": "https://stackoverflow.com/users/5961578/moveson"}, "edited": false, "score": 1, "creation_date": 1501795991, "post_id": 42877746, "comment_id": 77951300, "body": "I was not able to get <code>date_default_view_date</code> to work as described here, but I was able to get it working using <code>date_default_view_date: {year: 1900, month: 0, day: 1}</code>."}, {"owner": {"reputation": 39660, "user_id": 3880585, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/8pfp3.png?s=128&g=1", "display_name": "gaetanoM", "link": "https://stackoverflow.com/users/3880585/gaetanom"}, "reply_to_user": {"reputation": 4600, "user_id": 5961578, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/df7cbfdd2a92a7926af3bbb8648318aa?s=128&d=identicon&r=PG", "display_name": "moveson", "link": "https://stackoverflow.com/users/5961578/moveson"}, "edited": false, "score": 0, "creation_date": 1501855437, "post_id": 42877746, "comment_id": 77978642, "body": "@moveson Thanks for the comment. As you can see by yourself defaultViewDate as <a href=\"https://bootstrap-datepicker.readthedocs.io/en/latest/options.html#defaultviewdate\" rel=\"nofollow noreferrer\">An object with keys year, month and day (can\u2019t be set from a data attribute)</a>. A way to apply the object data is: <b>$(&#39;[data-provide=&quot;datepicker&quot;]&#39;).datepicker({defaultViewDate&zwnj;&#8203;: {year: 1900, month: 0, day: 1}});</b> In any case, thanks so much"}], "tags": [], "owner": {"reputation": 39660, "user_id": 3880585, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/8pfp3.png?s=128&g=1", "display_name": "gaetanoM", "link": "https://stackoverflow.com/users/3880585/gaetanom"}, "is_accepted": true, "score": 1, "last_activity_date": 1489868188, "last_edit_date": 1592644375, "creation_date": 1489859083, "answer_id": 42877746, "question_id": 42812143, "link": "https://stackoverflow.com/questions/42812143/bootstrap-datepicker-rails-set-default-century-view-to-20th-century/42877746#42877746", "title": "bootstrap-datepicker-rails set default century view to 20th century", "body": "<p>In order to show the last century decades you may consider <a href=\"https://bootstrap-datepicker.readthedocs.io/en/latest/options.html#defaultviewdate\" rel=\"nofollow noreferrer\">the following option reported in the documentation</a>:</p>\n<blockquote>\n<p><em><strong>defaultViewDate</strong></em></p>\n<p>Date to view when initially opening the calendar. The internal value of the date remains today as default, but when the datepicker is first opened the calendar will open to defaultViewDate rather than today. If this option is not used, \u201ctoday\u201d remains the default view date.</p>\n</blockquote>\n<p>Therefore, you must change the <em><strong>defaultViewDate</strong></em> from today to a date belonging to the last century.</p>\n<p>That means you must change the following section reported in your code :</p>\n<pre><code>data: {provide: 'datepicker', date_start_view: 'decades'}\n</code></pre>\n<p>to:</p>\n<pre><code>data: {provide=&quot;datepicker&quot;, date_default_view_date=&quot;01/01/1900&quot;, date_start_view=&quot;decades&quot;}\n</code></pre>\n<p>In the following an example:</p>\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>&lt;link rel=\"stylesheet\" href=\"https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css\"&gt;\n&lt;script src=\"https://code.jquery.com/jquery-2.1.1.min.js\"&gt;&lt;/script&gt;\n&lt;script src=\"https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js\"&gt;&lt;/script&gt;\n&lt;link rel=\"stylesheet\" href=\"https://rawgit.com/uxsolutions/bootstrap-datepicker/master/dist/css/bootstrap-datepicker.min.css\"&gt;\n&lt;script src=\"https://rawgit.com/uxsolutions/bootstrap-datepicker/master/dist/js/bootstrap-datepicker.min.js\"&gt;&lt;/script&gt;\n\n\n&lt;div class=\"input-group date\" data-provide=\"datepicker\" data-date-default-view-date=\"01/01/1900\" data-date-start-view=\"decades\"&gt;\n    &lt;input type=\"text\" class=\"form-control\"&gt;\n    &lt;div class=\"input-group-addon\"&gt;\n        &lt;span class=\"glyphicon glyphicon-th\"&gt;&lt;/span&gt;\n    &lt;/div&gt;\n&lt;/div&gt;</code></pre>\r\n</div>\r\n</div>\r\n</p>\n"}], "owner": {"reputation": 6076, "user_id": 4044009, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/42e57031eb7d02c47c9afaecfc878638?s=128&d=identicon&r=PG&f=1", "display_name": "Neil", "link": "https://stackoverflow.com/users/4044009/neil"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1097, "favorite_count": 1, "accepted_answer_id": 42877746, "answer_count": 2, "score": 1, "last_activity_date": 1489868188, "creation_date": 1489586860, "question_id": 42812143, "link": "https://stackoverflow.com/questions/42812143/bootstrap-datepicker-rails-set-default-century-view-to-20th-century", "title": "bootstrap-datepicker-rails set default century view to 20th century", "body": "<p>I am using the <a href=\"https://rubygems.org/gems/bootstrap-datepicker-rails\" rel=\"nofollow noreferrer\">bootstrap-datepicker-rails gem</a> and have the following code to show the date picker in my rails app:</p>\n\n<pre><code>&lt;%= text_field_tag :birth_date, params[:birth_date], size: 9, data: {provide: 'datepicker', date_start_view: 'decades'}, class: 'form-control' %&gt;\n</code></pre>\n\n<p>Here is what it shows when the user clicks on the date picker:</p>\n\n<p><a href=\"https://rubygems.org/gems/bootstrap-datepicker-rails\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/TR3so.png\" alt=\"First View from Datepicker\"></a></p>\n\n<p>As one can see: by setting the option of <code>data: {date_start_view: 'decades'}</code>: the date picker defaults to the 21st century (2000 - 2100).  I want it to default to the 20th century because this date picker is for a birthdate.</p>\n\n<p>I did look through the <a href=\"https://bootstrap-datepicker.readthedocs.io/en/latest/\" rel=\"nofollow noreferrer\">bootstrap-datepicker documentation</a> but it was unclear to me how to set this behavior. </p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 4458, "user_id": 130453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e9510a3b34bd894d94d4a670ea05662e?s=128&d=identicon&r=PG", "display_name": "corn3lius", "link": "https://stackoverflow.com/users/130453/corn3lius"}, "edited": false, "score": 1, "creation_date": 1489586938, "post_id": 42812100, "comment_id": 72736418, "body": "SO users are lazy, we aren&#39;t likely to go to a link to look at code. Paste it here."}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1489587352, "post_id": 42812100, "comment_id": 72736736, "body": "<code>.times</code> is used as intended here. &quot;Run this loop as many times as there are chars in this string, and also pass current iteration index to the block&quot;. And then the block can do something with the passed index. In this case, it&#39;s doing the caesar cipher thing (change current char, <code>string[i]</code>, based on some logic)"}, {"owner": {"reputation": 57, "user_id": 7588336, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/58dab16baa91c299f9428862fc57fc46?s=128&d=identicon&r=PG&f=1", "display_name": "roppo", "link": "https://stackoverflow.com/users/7588336/roppo"}, "reply_to_user": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1489587486, "post_id": 42812100, "comment_id": 72736855, "body": "@SergioTulentsev Hi what does string[i] mean? in line 3"}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1489587516, "post_id": 42812100, "comment_id": 72736884, "body": "@roppo: current char"}], "answers": [{"comments": [{"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1489587493, "post_id": 42812353, "comment_id": 72736862, "body": "<code>.times</code> and index is used to <i>mutate</i> the string. Could use <code>map</code> + <code>join</code> instead, or a number of other ways."}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1489587552, "post_id": 42812353, "comment_id": 72736926, "body": "<code>.collect {|c| puts c}</code> - I don&#39;t think so :)"}, {"owner": {"reputation": 7638, "user_id": 1014251, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/1c4500c91af486c885af8bb84eefd063?s=128&d=identicon&r=PG", "display_name": "ReggieB", "link": "https://stackoverflow.com/users/1014251/reggieb"}, "reply_to_user": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1489587553, "post_id": 42812353, "comment_id": 72736929, "body": "We think alike - I&#39;d just updated my answer with <code>collect</code> and <code>join</code>"}, {"owner": {"reputation": 7638, "user_id": 1014251, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/1c4500c91af486c885af8bb84eefd063?s=128&d=identicon&r=PG", "display_name": "ReggieB", "link": "https://stackoverflow.com/users/1014251/reggieb"}, "reply_to_user": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1489587628, "post_id": 42812353, "comment_id": 72736997, "body": "Ah yes - forgot that <code>puts</code> would not return the item being printed out."}, {"owner": {"reputation": 57, "user_id": 7588336, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/58dab16baa91c299f9428862fc57fc46?s=128&d=identicon&r=PG&f=1", "display_name": "roppo", "link": "https://stackoverflow.com/users/7588336/roppo"}, "edited": false, "score": 0, "creation_date": 1489587722, "post_id": 42812353, "comment_id": 72737075, "body": "Thanks this helps"}], "tags": [], "owner": {"reputation": 7638, "user_id": 1014251, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/1c4500c91af486c885af8bb84eefd063?s=128&d=identicon&r=PG", "display_name": "ReggieB", "link": "https://stackoverflow.com/users/1014251/reggieb"}, "is_accepted": false, "score": 0, "last_activity_date": 1489588374, "last_edit_date": 1489588374, "creation_date": 1489587375, "answer_id": 42812353, "question_id": 42812100, "link": "https://stackoverflow.com/questions/42812100/could-someone-explain-line-2-to-line-9-of-this-ruby-code/42812353#42812353", "title": "Could someone explain line 2 to line 9 of this Ruby code?", "body": "<p>Perhaps this will explain it:</p>\n\n<pre><code>string = 'foo'\nstring.length.times {|i| puts string[i]}\n</code></pre>\n\n<p>Its a way of iterating through each letter in the string. They could probably do the same thing via:</p>\n\n<pre><code>string.chars.collect{|character| p(character)}.join\n</code></pre>\n\n<p>and have cleaner code as a result (where <code>p(character)</code> would be replaced by the required manipulation of the current character)</p>\n\n<p>For example this code:</p>\n\n<pre><code>'foo'.chars.collect{|c| (c.ord + 1).chr}.join\n</code></pre>\n\n<p>Iterates through the string and returns a new string with each character replaced with the next one in the alphabet. That is: <code>\"gpp\"</code></p>\n"}, {"comments": [{"owner": {"reputation": 57, "user_id": 7588336, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/58dab16baa91c299f9428862fc57fc46?s=128&d=identicon&r=PG&f=1", "display_name": "roppo", "link": "https://stackoverflow.com/users/7588336/roppo"}, "edited": false, "score": 0, "creation_date": 1489763992, "post_id": 42812620, "comment_id": 72828527, "body": "actually why do string[i] accesses the i-th character in the string? this is not really intuitive to me, is there a reasoning or it is just like that."}], "tags": [], "owner": {"reputation": 4150, "user_id": 7470620, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/49f3026fe13841e41d1805178eed9a3c?s=128&d=identicon&r=PG", "display_name": "eiko", "link": "https://stackoverflow.com/users/7470620/eiko"}, "is_accepted": false, "score": 0, "last_activity_date": 1489588113, "creation_date": 1489588113, "answer_id": 42812620, "question_id": 42812100, "link": "https://stackoverflow.com/questions/42812100/could-someone-explain-line-2-to-line-9-of-this-ruby-code/42812620#42812620", "title": "Could someone explain line 2 to line 9 of this Ruby code?", "body": "<p><code>.times do</code> means \"execute this code a certain number of times\" as you said.</p>\n\n<p><code>.times do |i|</code> loops a certain number of times and counts each time in <code>i</code></p>\n\n<p><code>string.length</code> gets the number of characters in the string.</p>\n\n<p><code>string.length.times</code> executes a block of code a number of times equal to the number of characters in the string.</p>\n\n<p><code>string[i]</code> accesses the i-th character in the string.</p>\n\n<p>Putting it all together:</p>\n\n<pre><code>string.length.times do |i|\n    do_stuff_with string[i]\nend\n</code></pre>\n\n<p>you have code which iterates through each character in the string and does something to it. in this case, the code shifts each character according to caesar cipher.</p>\n\n<p>When you use iterators like <code>string.each_char</code> in ruby or <code>foreach(item in items)</code> in other languages, you're not generally allowed to modify the collection while you iterate. Using <code>.times</code> and <code>string[i]</code> lets the code modify the string while it iterates. because the loop doesn't keep track of string, it just knows that it needs to execute some number of times.</p>\n\n<p>As others have pointed out, there are more elegant, more ruby-like ways to do what this code does, but the writer of the code chose <code>.times</code> because it acts just like a for-loop, which is a common programming paradigm. </p>\n"}, {"tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": false, "score": 1, "last_activity_date": 1489604540, "creation_date": 1489604540, "answer_id": 42818549, "question_id": 42812100, "link": "https://stackoverflow.com/questions/42812100/could-someone-explain-line-2-to-line-9-of-this-ruby-code/42818549#42818549", "title": "Could someone explain line 2 to line 9 of this Ruby code?", "body": "<p>This is an extended comment which does not answer the question (so no upvotes please).</p>\n\n<p>That piece of code is ugly and arcane, not at all Ruby-like. Here's a another way that makes better use of Ruby's tools and is effectively self-documenting.</p>\n\n<p><strong>Code</strong></p>\n\n<pre><code>def caesar_cipher_encrypt(string, shift_size)\n  mapping = Hash.new { |h,k| k }.\n                 merge(make_map('a', shift_size)).\n                 merge(make_map('A', shift_size))\n  string.gsub(/./, mapping)\nend\n\ndef make_map(first_char, shift_size)\n  base = first_char.ord\n  26.times.with_object({}) { |i,h| h[(base+i).chr] = (base+((i+shift_size) % 26)).chr } \nend\n</code></pre>\n\n<p><strong>Example</strong></p>\n\n<pre><code>shift_size = 2\nencrypted_str = caesar_cipher_encrypt(\"Mary said to Bob, 'Get lost!'.\", shift_size)\n  #=&gt; \"Octa uckf vq Dqd, 'Igv nquv!'.\"\n</code></pre>\n\n<p><strong>Explanation</strong></p>\n\n<p>The first step is to create a hash that maps letters into their shifted counterparts. We begin with</p>\n\n<pre><code>h = Hash.new { |h,k| k }\n  #= {}\n</code></pre>\n\n<p>This creates an empty hash with a default value given by the block. That means that if <code>h</code> does not have a key <code>k</code>, <code>h[k]</code> returns <code>k</code>. Since all keys of 'h' will be letters, this means the value of a digit, space, punctuation mark or any other non-letter will be itself. See <a href=\"http://ruby-doc.org/core-2.4.0/Hash.html#method-c-new\" rel=\"nofollow noreferrer\">Hash::new</a>.</p>\n\n<p>We then have</p>\n\n<pre><code>f = make_map('a',2)\n  #=&gt; {\"a\"=&gt;\"c\", \"b\"=&gt;\"d\", \"c\"=&gt;\"e\",..., \"x\"=&gt;\"z\", \"y\"=&gt;\"a\", \"z\"=&gt;\"b\"}\ng = h.merge(f)\n  #=&gt; {\"a\"=&gt;\"c\", \"b\"=&gt;\"d\", \"c\"=&gt;\"e\",..., \"y\"=&gt;\"a\", \"z\"=&gt;\"b\"} \nf = make_map('A',2)\n  #=&gt; {\"A\"=&gt;\"C\", \"B\"=&gt;\"D\", \"C\"=&gt;\"E\",..., \"X\"=&gt;\"Z\", \"Y\"=&gt;\"A\", \"Z\"=&gt;\"B\"} \nmapping = g.merge(f)\n  #=&gt; {\"a\"=&gt;\"c\", \"b\"=&gt;\"d\", \"c\"=&gt;\"e\",..., \"y\"=&gt;\"a\", \"z\"=&gt;\"b\",\n  #    \"A\"=&gt;\"C\", \"B\"=&gt;\"D\", \"C\"=&gt;\"E\",..., \"Y\"=&gt;\"A\", \"Z\"=&gt;\"B\"} \nmapping['!']\n  #=&gt; \"!\"\n</code></pre>\n\n<p>We may now simply use the form of <a href=\"http://ruby-doc.org/core-2.4.0/String.html#method-i-gsub\" rel=\"nofollow noreferrer\">String#gsub</a> that uses a hash to perform substitutions.</p>\n\n<pre><code>\"Mary said to Bob, 'Get lost!'.\".gsub(/./, mapping)\n  #=&gt; \"Octa uckf vq Dqd, 'Igv nquv!'.\" \n</code></pre>\n\n<p><strong>Decrypting</strong></p>\n\n<p>The receiver of an encrypted message can decrypt it as follows.</p>\n\n<pre><code>def caesar_cipher_decrypt(string, shift_size)\n  caesar_cipher_encrypt(string, -shift_size)\nend\n\ncaesar_cipher_decrypt(encrypted_str, shift_size)\n  #=&gt; \"Mary said to Bob, 'Get lost!'.\"\n</code></pre>\n"}], "owner": {"reputation": 57, "user_id": 7588336, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/58dab16baa91c299f9428862fc57fc46?s=128&d=identicon&r=PG&f=1", "display_name": "roppo", "link": "https://stackoverflow.com/users/7588336/roppo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 60, "favorite_count": 0, "answer_count": 3, "score": 1, "last_activity_date": 1490020035, "creation_date": 1489586773, "last_edit_date": 1490020035, "question_id": 42812100, "link": "https://stackoverflow.com/questions/42812100/could-someone-explain-line-2-to-line-9-of-this-ruby-code", "title": "Could someone explain line 2 to line 9 of this Ruby code?", "body": "<pre><code>def caesar_cipher(string, shift_factor)\n  string.length.times do |i|\n    if string[i].ord &gt;= 97 &amp;&amp; (string[i].ord + shift_factor) &lt;= 122 || string[i].ord &gt;= 65 &amp;&amp; (string[i].ord + shift_factor) &lt;= 90\n      string[i] = (string[i].ord + shift_factor).chr\n    elsif string[i].ord &gt;= 97 &amp;&amp; string[i].ord &lt;= 122 || string[i].ord &gt;= 65 &amp;&amp; string[i].ord &lt;= 90\n      string[i] = (string[i].ord + shift_factor - 122 + 96).chr\n    end\n  end\n  string\nend\nputs \"Enter a string:\"\nstring_input = gets.chomp\nputs \"Enter shift factor:\"\nshift_factor_input = gets.chomp.to_i\nresult_string = caesar_cipher(string_input, shift_factor_input)\nputs result_string\n</code></pre>\n\n<p><a href=\"https://github.com/OlehSliusar/caesar_cipher\" rel=\"nofollow noreferrer\">https://github.com/OlehSliusar/caesar_cipher</a></p>\n\n<p>A command line Caesar Cipher that takes in a string and the shift factor and then outputs the modified string.</p>\n\n<p>I am unable to understand code line 2 to line 9. I am confused on how the .<strong>times</strong> method is used in this context. Could someone explain to me what is he doing from line 2 to line 9? How I understand <strong>.times</strong> method is that it act as a iterator as iterate based on the number time stated.</p>\n\n<p>So say <code>5.times { puts \"Dog\" }</code> = > will result in putting \"Dog\" five time. Hence my understanding on the method <strong>.times</strong> is very different from the way the author used it.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "content-management-system", "ruby-on-rails-5"], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 4994791, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/50c76742a375babb248ecb5c5551b61c?s=128&d=identicon&r=PG&f=1", "display_name": "zouis", "link": "https://stackoverflow.com/users/4994791/zouis"}, "is_accepted": false, "score": 0, "last_activity_date": 1489588904, "creation_date": 1489588904, "answer_id": 42812925, "question_id": 42811851, "link": "https://stackoverflow.com/questions/42811851/how-to-make-content-editable-in-rails-without-using-a-cms/42812925#42812925", "title": "How to make content editable in Rails without using a CMS?", "body": "<p>Give a try to ckeditor :\ngem 'ckeditor', github: 'galetahub/ckeditor'</p>\n"}, {"tags": [], "owner": {"reputation": 143, "user_id": 2855831, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/29dec7ccaaff52ec670d33a5861bec15?s=128&d=identicon&r=PG&f=1", "display_name": "thisischuck", "link": "https://stackoverflow.com/users/2855831/thisischuck"}, "is_accepted": false, "score": 0, "last_activity_date": 1489594360, "creation_date": 1489594360, "answer_id": 42815172, "question_id": 42811851, "link": "https://stackoverflow.com/questions/42811851/how-to-make-content-editable-in-rails-without-using-a-cms/42815172#42815172", "title": "How to make content editable in Rails without using a CMS?", "body": "<p>This type of implementation sounds like more of a JavaScript question.  You'll need to look into the rails API and may need to disable turbolinks.</p>\n\n<p>You can even use the rails generator for scaffolding to build out your models and controllers.  I'd recommend nesting two models.</p>\n\n<pre><code>rails generate scaffold Article title:string author:string\nrails generate scaffold Paragraph content:text article:references\n</code></pre>\n\n<p>At this point you will need to wire up your javascript editor to your update method in the controller.</p>\n"}], "owner": {"reputation": 221, "user_id": 7385236, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/355f6109123c477f9fb3bea15c20a84b?s=128&d=identicon&r=PG&f=1", "display_name": "CodeTooNarrow", "link": "https://stackoverflow.com/users/7385236/codetoonarrow"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 153, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1489594360, "creation_date": 1489586136, "last_edit_date": 1489588477, "question_id": 42811851, "link": "https://stackoverflow.com/questions/42811851/how-to-make-content-editable-in-rails-without-using-a-cms", "title": "How to make content editable in Rails without using a CMS?", "body": "<p>I'm building a dynamic web app that each paragraph could be editable with one click. Just wondering if anyone has any recommendation's how I could go about that without using a CMS.</p>\n"}, {"tags": ["ruby", "fluentd"], "answers": [{"tags": [], "owner": {"reputation": 232, "user_id": 2492958, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/51571dce89b820edaee0747ebd17bb42?s=128&d=identicon&r=PG", "display_name": "ADPK", "link": "https://stackoverflow.com/users/2492958/adpk"}, "is_accepted": true, "score": 2, "last_activity_date": 1490013496, "creation_date": 1490013496, "answer_id": 42903827, "question_id": 42811837, "link": "https://stackoverflow.com/questions/42811837/fluentdhow-to-unzip-files-in-fluentd/42903827#42903827", "title": "[Fluentd]How to Unzip files in fluentd", "body": "<p>Looking at your requirement, you can still achieve it by using <strong>in_exec</strong> module,\nWhat you have to do is, to simply create a shell script which accepts path to look for .gz files and the wildcard pattern to match file names. And inside the shell script you can unzip files inside the folder_path that was passed with the given wildcard pattern. Basically your shell execution should look like:</p>\n\n<p><strong><code>sh unzip.sh &lt;folder_path_to_monitor&gt; &lt;wildcard_to_files&gt;</code></strong></p>\n\n<p>And use the above command in <strong>in_exec</strong> tag in your config. And your config will look like:</p>\n\n<pre><code>&lt;source&gt;\n  @type exec\n  format json\n  tag unzip.sh\n  command sh unzip.sh &lt;folder_path_to_monitor&gt; &lt;wildcard_to_files&gt;\n  run_interval 10s\n&lt;/source&gt;\n</code></pre>\n"}], "owner": {"reputation": 627, "user_id": 2210760, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/6875586d2adce49055ffe89f205c0bd8?s=128&d=identicon&r=PG", "display_name": "Deepak", "link": "https://stackoverflow.com/users/2210760/deepak"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 588, "favorite_count": 0, "accepted_answer_id": 42903827, "answer_count": 1, "score": 3, "last_activity_date": 1490013496, "creation_date": 1489586109, "question_id": 42811837, "link": "https://stackoverflow.com/questions/42811837/fluentdhow-to-unzip-files-in-fluentd", "title": "[Fluentd]How to Unzip files in fluentd", "body": "<p>I am trying to process log files with .gz extension in fluentd using cat_sweep plugin, and failed in my attempt. As shown in the below config, I am trying to process all files under <strong>/opt/logfiles/*</strong> location. However when the file format is .gz, cat_sweep is unable to process the file, and starts deleting the file, but if I unzip the file manually inside the  <strong>/opt/logfiles/</strong> location, cat_sweep is able to process, the file. </p>\n\n<pre><code>&lt;source&gt;\n   @type cat_sweep\n   file_path_with_glob /opt/logfiles/*\n   format none\n   tag raw.log\n   waiting_seconds 0\n   remove_after_processing true\n   processing_file_suffix .processing\n   error_file_suffix .error\n   run_interval 5\n&lt;/source&gt;\n</code></pre>\n\n<p>So now I need some plugin that can unzip a given file. I tried searching for plugins that can unzip a zipped file. I came close when I found about the plugin, which acts like a terminal, where I can use something like <strong>gzip -d file_path</strong></p>\n\n<p><strong>Link to the plugin:</strong></p>\n\n<p><a href=\"http://docs.fluentd.org/v0.12/articles/in_exec\" rel=\"nofollow noreferrer\">http://docs.fluentd.org/v0.12/articles/in_exec</a></p>\n\n<p>But the problem I see here, is that I cannot send the path of the file to be unzipped at run-time.</p>\n\n<p>Can someone help me with some pointers?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "rspec", "capybara"], "comments": [{"owner": {"reputation": 17065, "user_id": 175981, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/b357ab54946a2be4d19c8a9aab2a09d6?s=128&d=identicon&r=PG", "display_name": "Chris Peters", "link": "https://stackoverflow.com/users/175981/chris-peters"}, "edited": false, "score": 0, "creation_date": 1489585251, "post_id": 42811351, "comment_id": 72734999, "body": "Why is there a subfolder (<code>semead</code>) in front of <code>&#47;assets</code> in the URL that it&#39;s trying to hit?"}, {"owner": {"reputation": 23, "user_id": 5592605, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xMZ8M.jpg?s=128&g=1", "display_name": "Jalerson Lima", "link": "https://stackoverflow.com/users/5592605/jalerson-lima"}, "reply_to_user": {"reputation": 17065, "user_id": 175981, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/b357ab54946a2be4d19c8a9aab2a09d6?s=128&d=identicon&r=PG", "display_name": "Chris Peters", "link": "https://stackoverflow.com/users/175981/chris-peters"}, "edited": false, "score": 0, "creation_date": 1489585484, "post_id": 42811351, "comment_id": 72735166, "body": "Hi @ChrisPeters, thanks for your comment! The subfolder <code>&#47;semead</code> is needed because I need to run this app into <code>http:&#47;&#47;eventos.ifrn.edu.br&#47;semead</code>"}, {"owner": {"reputation": 42014, "user_id": 2709090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/238c2b7cde2c817fc9a5a2b8eaa2ffad?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas Walpole", "link": "https://stackoverflow.com/users/2709090/thomas-walpole"}, "edited": false, "score": 0, "creation_date": 1489588753, "post_id": 42811351, "comment_id": 72737912, "body": "Show your routes.rb and whether or how you&#39;ve told your app to mount at /semead"}, {"owner": {"reputation": 23, "user_id": 5592605, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xMZ8M.jpg?s=128&g=1", "display_name": "Jalerson Lima", "link": "https://stackoverflow.com/users/5592605/jalerson-lima"}, "reply_to_user": {"reputation": 42014, "user_id": 2709090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/238c2b7cde2c817fc9a5a2b8eaa2ffad?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas Walpole", "link": "https://stackoverflow.com/users/2709090/thomas-walpole"}, "edited": false, "score": 0, "creation_date": 1489591578, "post_id": 42811351, "comment_id": 72740286, "body": "Thanks for your comment @ThomasWalpole! I just updated the description."}], "answers": [{"comments": [{"owner": {"reputation": 23, "user_id": 5592605, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xMZ8M.jpg?s=128&g=1", "display_name": "Jalerson Lima", "link": "https://stackoverflow.com/users/5592605/jalerson-lima"}, "edited": false, "score": 0, "creation_date": 1489620323, "post_id": 42815595, "comment_id": 72756769, "body": "Yes, apparently that&#39;s the problem. I moved the <code>config.relative_url_root</code> to the <code>environments&#47;test.rb</code>, and the problem with the reference to the assets was solved. Thanks!"}, {"owner": {"reputation": 42014, "user_id": 2709090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/238c2b7cde2c817fc9a5a2b8eaa2ffad?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas Walpole", "link": "https://stackoverflow.com/users/2709090/thomas-walpole"}, "reply_to_user": {"reputation": 23, "user_id": 5592605, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xMZ8M.jpg?s=128&g=1", "display_name": "Jalerson Lima", "link": "https://stackoverflow.com/users/5592605/jalerson-lima"}, "edited": false, "score": 0, "creation_date": 1489620459, "post_id": 42815595, "comment_id": 72756813, "body": "@JalersonLima You&#39;re welcome, don&#39;t forget to accept the answer (the checkmark) so the question gets marked as answered"}], "tags": [], "owner": {"reputation": 42014, "user_id": 2709090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/238c2b7cde2c817fc9a5a2b8eaa2ffad?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas Walpole", "link": "https://stackoverflow.com/users/2709090/thomas-walpole"}, "is_accepted": true, "score": 0, "last_activity_date": 1489595502, "creation_date": 1489595502, "answer_id": 42815595, "question_id": 42811351, "link": "https://stackoverflow.com/questions/42811351/teno-route-matches-error-when-trying-to-use-rspec-and-capybara/42815595#42815595", "title": "TE:No route matches error when trying to use RSpec and Capybara", "body": "<p>I have not confirmed this, but as an educated guess - I believe <code>config.relative_url_root</code> only affects route generation but not route processing.  When testing, Capybara mounts the app under test at '/' - <a href=\"https://github.com/teamcapybara/capybara/blob/master/lib/capybara/rails.rb\" rel=\"nofollow noreferrer\">https://github.com/teamcapybara/capybara/blob/master/lib/capybara/rails.rb</a>, which would mean the requests to /semead/... won't get routed correctly.  The easiest solution to this is probably to se <code>config.relative_url_root</code> to '/' in config/environments/test.rb </p>\n\n<p>Note that just redefining Capybara.app to mount the app at /semead probably won't work because Capybara installs middleware with a couple of actions it needs to work.</p>\n"}], "owner": {"reputation": 23, "user_id": 5592605, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xMZ8M.jpg?s=128&g=1", "display_name": "Jalerson Lima", "link": "https://stackoverflow.com/users/5592605/jalerson-lima"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1046, "favorite_count": 0, "accepted_answer_id": 42815595, "answer_count": 1, "score": 2, "last_activity_date": 1489595502, "creation_date": 1489584863, "last_edit_date": 1489591507, "question_id": 42811351, "link": "https://stackoverflow.com/questions/42811351/teno-route-matches-error-when-trying-to-use-rspec-and-capybara", "title": "TE:No route matches error when trying to use RSpec and Capybara", "body": "<p>I'm trying to write a test using RSpec and Capybara, however, I'm always getting the following error:</p>\n\n<pre><code>No route matches [GET] \"/semead/assets/application-7a2cf02623b8feb6b939ae72b917f262a79b289d0bf90f0a932f8eb031fe5ef6.js\"\n</code></pre>\n\n<p>In some cases the same error occurs with the <code>application.css</code> asset. I tried to use capybara-webkit and selenium-webdriver, but the outcome it's the same.</p>\n\n<p><strong>spec/rails_helper.rb</strong></p>\n\n<pre><code># This file is copied to spec/ when you run 'rails generate rspec:install'\nENV['RAILS_ENV'] ||= 'test'\nrequire File.expand_path('../../config/environment', __FILE__)\n# Prevent database truncation if the environment is production\nabort(\"The Rails environment is running in production mode!\") if Rails.env.production?\nrequire 'spec_helper'\nrequire 'rspec/rails'\nrequire 'support/factory_girl'\n...\n</code></pre>\n\n<p><strong>specs/spec_helper.rb</strong></p>\n\n<pre><code>ENV[\"RAILS_ENV\"] ||= 'test'\nrequire File.expand_path(\"../../config/environment\", __FILE__)\nrequire 'support/factory_girl'\nrequire 'capybara/rspec'\n...\n</code></pre>\n\n<p><strong>spec/features/user_spec.rb</strong></p>\n\n<pre><code>require 'rails_helper'    \nRSpec.feature \"Registering a new user\", js: true do\n  scenario \"fill the registration form\" do\n    visit \"/participantes/new\"\n    @user = build(:user)\n...\n</code></pre>\n\n<p><strong>UPDATE 1:</strong></p>\n\n<p>Here is the full error message:</p>\n\n<pre><code>Failures:\n\n  1) Registering a new user filling the registration form\n     Failure/Error: raise ActionController::RoutingError, \"No route matches [#{env['REQUEST_METHOD']}] #{env['PATH_INFO'].inspect}\"\n\n     ActionController::RoutingError:\n       No route matches [GET] \"/semead/assets/application-f01fee28086ae8e064a7eda175e05dd4423d0429269ec94c142dc12b2eb6768d.css\"\n     # /home/jalerson/.rvm/gems/ruby-2.2.3/gems/railties-4.2.6/lib/rails/rack/logger.rb:38:in `call_app'\n     # /home/jalerson/.rvm/gems/ruby-2.2.3/gems/railties-4.2.6/lib/rails/rack/logger.rb:20:in `block in call'\n     # /home/jalerson/.rvm/gems/ruby-2.2.3/gems/railties-4.2.6/lib/rails/rack/logger.rb:20:in `call'\n     # /home/jalerson/.rvm/gems/ruby-2.2.3/gems/rack-1.6.4/lib/rack/methodoverride.rb:22:in `call'\n     # /home/jalerson/.rvm/gems/ruby-2.2.3/gems/rack-1.6.4/lib/rack/runtime.rb:18:in `call'\n     # /home/jalerson/.rvm/gems/ruby-2.2.3/gems/rack-1.6.4/lib/rack/lock.rb:17:in `call'\n     # /home/jalerson/.rvm/gems/ruby-2.2.3/gems/rack-1.6.4/lib/rack/sendfile.rb:113:in `call'\n     # /home/jalerson/.rvm/gems/ruby-2.2.3/gems/railties-4.2.6/lib/rails/engine.rb:518:in `call'\n     # /home/jalerson/.rvm/gems/ruby-2.2.3/gems/railties-4.2.6/lib/rails/application.rb:165:in `call'\n     # /home/jalerson/.rvm/gems/ruby-2.2.3/gems/rack-1.6.4/lib/rack/urlmap.rb:66:in `block in call'\n     # /home/jalerson/.rvm/gems/ruby-2.2.3/gems/rack-1.6.4/lib/rack/urlmap.rb:50:in `each'\n     # /home/jalerson/.rvm/gems/ruby-2.2.3/gems/rack-1.6.4/lib/rack/urlmap.rb:50:in `call'\n     # /home/jalerson/.rvm/gems/ruby-2.2.3/gems/capybara-2.11.0/lib/capybara/server.rb:43:in `call'\n     # /home/jalerson/.rvm/gems/ruby-2.2.3/gems/rack-1.6.4/lib/rack/handler/webrick.rb:88:in `service'\n     # ------------------\n     # --- Caused by: ---\n     # Capybara::ElementNotFound:\n     #   Unable to find css \".select2-container\"\n     #   /home/jalerson/.rvm/gems/ruby-2.2.3/gems/capybara-2.11.0/lib/capybara/node/finders.rb:44:in `block in find'\n</code></pre>\n\n<p><strong>UPDATE 2:</strong></p>\n\n<p>Here is my <code>config/application.rb</code>, which I set <code>config.relative_url_root = '/semead'</code></p>\n\n<p><strong>config/application.rb</strong></p>\n\n<pre><code>require File.expand_path('../boot', __FILE__)\n\nrequire 'rails/all'\n\nBundler.require(*Rails.groups)\n\nmodule Semead\n  class Application &lt; Rails::Application\n    config.relative_url_root = '/semead'\n    config.i18n.default_locale = 'pt-BR'\n    config.active_record.raise_in_transactional_callbacks = true\n  end\nend\n</code></pre>\n\n<p><strong>config/routes.rb</strong></p>\n\n<pre><code>Rails.application.routes.draw do\n  resources :trabalhos do\n    get 'prazo_encerrado', on: :collection\n  end\n  resources :minicursos do\n    resources :inscricoes\n  end\n  namespace :admin do\n    resources :participantes do\n      get 'aprovar_nota_empenho'\n    end\n    resources :organizadores\n    resources :trabalhos do\n      get 'avaliar'\n      resources :avaliacoes, controller: 'avaliacoes_trabalhos'\n    end\n    resources :minicursos do\n      resources :avaliacoes, controller: 'avaliacoes_minicursos'\n    end\n  end\n\n  resources :sessions\n  resources :participantes do\n    get 'pagar'\n  end\n  # The priority is based upon order of creation: first created -&gt; highest priority.\n  # See how all your routes lay out with \"rake routes\".\n\n  # You can have the root of your site routed with \"root\"\n  root 'participantes#new'\n...\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "rails-activerecord"], "comments": [{"owner": {"reputation": 873, "user_id": 2320239, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/daef5b7116143c14162b242bf0b1a35a?s=128&d=identicon&r=PG", "display_name": "user2320239", "link": "https://stackoverflow.com/users/2320239/user2320239"}, "reply_to_user": {"reputation": 47232, "user_id": 1772830, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Qtoqg.jpg?s=128&g=1", "display_name": "Andrey Deineko", "link": "https://stackoverflow.com/users/1772830/andrey-deineko"}, "edited": false, "score": 0, "creation_date": 1489584701, "post_id": 42811198, "comment_id": 72734559, "body": "Yup, I&#39;m sure. UserSettings returns <code>UserSettings(id: integer, status: string, user_id: integer, created_at: datetime, updated_at: datetime)</code>"}, {"owner": {"reputation": 27144, "user_id": 3857758, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/58c4295826435f049b7fc32b98c240f9?s=128&d=identicon&r=PG&f=1", "display_name": "Ursus", "link": "https://stackoverflow.com/users/3857758/ursus"}, "edited": false, "score": 1, "creation_date": 1489584776, "post_id": 42811198, "comment_id": 72734631, "body": "<code>Users</code> shouldn&#39;t be <code>User</code>? Typo? And, so, in user.rb you have <code>has_one :user_settings</code>? Plural?"}, {"owner": {"reputation": 208794, "user_id": 229044, "user_type": "moderator", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/591426cbbacd4025d920467bad356911?s=128&d=identicon&r=PG&f=1", "display_name": "meagar", "link": "https://stackoverflow.com/users/229044/meagar"}, "edited": false, "score": 1, "creation_date": 1489584857, "post_id": 42811198, "comment_id": 72734700, "body": "You&#39;re naming your models incorrectly. A <code>users</code> table should be managed by a <code>User</code> model, not a <code>Users</code> model, and <code>user_settings</code> should map to a <code>UserSetting</code> model, not a <code>UserSettings</code> model. Model names need to be <i>singular</i> for Rails to automatically pick the right table, not plural. Fix those problems, and see if that helps."}, {"owner": {"reputation": 873, "user_id": 2320239, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/daef5b7116143c14162b242bf0b1a35a?s=128&d=identicon&r=PG", "display_name": "user2320239", "link": "https://stackoverflow.com/users/2320239/user2320239"}, "edited": false, "score": 0, "creation_date": 1489585074, "post_id": 42811198, "comment_id": 72734866, "body": "Sorry that is how it is, I just mistyped, User has one UserSetting and UserSetting belongs to User."}, {"owner": {"reputation": 208794, "user_id": 229044, "user_type": "moderator", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/591426cbbacd4025d920467bad356911?s=128&d=identicon&r=PG&f=1", "display_name": "meagar", "link": "https://stackoverflow.com/users/229044/meagar"}, "edited": false, "score": 1, "creation_date": 1489585111, "post_id": 42811198, "comment_id": 72734895, "body": "@user2320239 Then please fix your question to reflect your actual code."}], "answers": [{"comments": [{"owner": {"reputation": 873, "user_id": 2320239, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/daef5b7116143c14162b242bf0b1a35a?s=128&d=identicon&r=PG", "display_name": "user2320239", "link": "https://stackoverflow.com/users/2320239/user2320239"}, "edited": false, "score": 1, "creation_date": 1489585325, "post_id": 42811513, "comment_id": 72735050, "body": "Thank you, I&#39;ll accept your answer when I&#39;m allowed."}, {"owner": {"reputation": 51013, "user_id": 976775, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/30bd66ad1795804aebe249d8bcb14409?s=128&d=identicon&r=PG", "display_name": "MrYoshiji", "link": "https://stackoverflow.com/users/976775/mryoshiji"}, "edited": false, "score": 0, "creation_date": 1489586093, "post_id": 42811513, "comment_id": 72735647, "body": "I don&#39;t know about Rails 5, but in previous versions, using AR&#39;s <code>joins</code> method would use a SQL <code>INNER JOIN</code>, which makes duplicates in the AR::Relation afterwards. Use <code>includes</code> &amp; <code>references</code> instead to get rid of duplicates"}, {"owner": {"reputation": 47232, "user_id": 1772830, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Qtoqg.jpg?s=128&g=1", "display_name": "Andrey Deineko", "link": "https://stackoverflow.com/users/1772830/andrey-deineko"}, "reply_to_user": {"reputation": 51013, "user_id": 976775, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/30bd66ad1795804aebe249d8bcb14409?s=128&d=identicon&r=PG", "display_name": "MrYoshiji", "link": "https://stackoverflow.com/users/976775/mryoshiji"}, "edited": false, "score": 0, "creation_date": 1489586166, "post_id": 42811513, "comment_id": 72735715, "body": "@MrYoshiji yep, joins still produces duplicates in Rails 5 AFAICT. I personally use <code>includes</code> or <code>joins</code> + <code>group(&#39;users.id&#39;)</code>"}, {"owner": {"reputation": 51013, "user_id": 976775, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/30bd66ad1795804aebe249d8bcb14409?s=128&d=identicon&r=PG", "display_name": "MrYoshiji", "link": "https://stackoverflow.com/users/976775/mryoshiji"}, "edited": false, "score": 0, "creation_date": 1489586258, "post_id": 42811513, "comment_id": 72735812, "body": "I think you should include that in your answer, in case someone in the future come to see this Q/A and does not know about the possible duplicates."}], "tags": [], "owner": {"reputation": 47232, "user_id": 1772830, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Qtoqg.jpg?s=128&g=1", "display_name": "Andrey Deineko", "link": "https://stackoverflow.com/users/1772830/andrey-deineko"}, "is_accepted": true, "score": 1, "last_activity_date": 1489586414, "last_edit_date": 1592644375, "creation_date": 1489585227, "answer_id": 42811513, "question_id": 42811198, "link": "https://stackoverflow.com/questions/42811198/get-records-based-on-associations-attributes/42811513#42811513", "title": "Get records based on associations attributes", "body": "<pre><code>User.joins(:user_setting).where(user_settings: { status: 'active' })\n</code></pre>\n<p>In <code>joins</code> you should use the <em>association name</em>, whereas in the <code>where</code> clause you should use the database <em>table name</em> (which is <code>user_settings</code>, not <code>user_setting</code>).</p>\n<h1>edit</h1>\n<p>To not receive duplicate entries in the resulting collection you could use <code>GROUP BY</code> clause:</p>\n<pre><code>User.joins(:user_setting)\n    .where(user_settings: { status: 'active' })\n    .group('users.id')\n</code></pre>\n<p>Another option would be using <code>includes</code> instead of <code>joins</code>:</p>\n<pre><code>User.includes(:user_setting)\n    .where.not(user_settings: { id: nil })\n    .where(user_settings: { status: 'active' })\n</code></pre>\n"}], "owner": {"reputation": 873, "user_id": 2320239, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/daef5b7116143c14162b242bf0b1a35a?s=128&d=identicon&r=PG", "display_name": "user2320239", "link": "https://stackoverflow.com/users/2320239/user2320239"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 37, "favorite_count": 0, "accepted_answer_id": 42811513, "answer_count": 1, "score": 0, "last_activity_date": 1489586414, "creation_date": 1489584474, "last_edit_date": 1489585351, "question_id": 42811198, "link": "https://stackoverflow.com/questions/42811198/get-records-based-on-associations-attributes", "title": "Get records based on associations attributes", "body": "<p>I'm working on a project where I have a User, a user has one UserSetting. I want to get the users where User.user_setting.status == 'active'. I have at the moment:</p>\n\n<pre><code>User.joins(:user_setting).where(:user_setting =&gt; {:status =&gt; 'active'})\n</code></pre>\n\n<p>but it doesn't seem to work, I get the error</p>\n\n<pre><code>Unknown column 'user_setting.status' in 'where clause'\n</code></pre>\n\n<p>If anyone could help me with where I'm going wrong that would be greatly appreciated.</p>\n"}, {"tags": ["c++", "ruby", "qt", "embedded-ruby"], "comments": [{"owner": {"reputation": 30418, "user_id": 823617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DmWH1.png?s=128&g=1", "display_name": "Casper", "link": "https://stackoverflow.com/users/823617/casper"}, "edited": false, "score": 2, "creation_date": 1489585231, "post_id": 42810223, "comment_id": 72734981, "body": "Add <code>-ldl</code> to linker arguments?"}, {"owner": {"reputation": 394, "user_id": 5540104, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-c1voaqr9Rxo/AAAAAAAAAAI/AAAAAAAAAQE/LhZv_Ya8g_U/photo.jpg?sz=128", "display_name": "Gabriel Martins", "link": "https://stackoverflow.com/users/5540104/gabriel-martins"}, "reply_to_user": {"reputation": 30418, "user_id": 823617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DmWH1.png?s=128&g=1", "display_name": "Casper", "link": "https://stackoverflow.com/users/823617/casper"}, "edited": false, "score": 0, "creation_date": 1489589136, "post_id": 42810223, "comment_id": 72738245, "body": "@Casper Do you mean add a line <code>LIBS += -ldl</code> on .pro file ?  I&#39;m not sure if was that but i did it and now it started to return this errors: &lt;br/&gt; <b>/home/gabriel/dev/ruby-exps/embed-ruby-first-tries/3rdparty/&zwnj;&#8203;ruby-1.8.7-p374/stri&zwnj;&#8203;ng.c:4513: error: undefined reference to `crypt&#39;</b> &lt;br/&gt; <b>:-1: error: collect2: error: ld returned 1 exit status</b>"}, {"owner": {"reputation": 394, "user_id": 5540104, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-c1voaqr9Rxo/AAAAAAAAAAI/AAAAAAAAAQE/LhZv_Ya8g_U/photo.jpg?sz=128", "display_name": "Gabriel Martins", "link": "https://stackoverflow.com/users/5540104/gabriel-martins"}, "reply_to_user": {"reputation": 30418, "user_id": 823617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DmWH1.png?s=128&g=1", "display_name": "Casper", "link": "https://stackoverflow.com/users/823617/casper"}, "edited": false, "score": 0, "creation_date": 1489590070, "post_id": 42810223, "comment_id": 72739001, "body": "That I solved with <code>LIBS += -lcrypt</code>, thank you man, it&#39;s finally working, you should post this as the answer so I can mark it as resolved"}], "answers": [{"tags": [], "owner": {"reputation": 30418, "user_id": 823617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DmWH1.png?s=128&g=1", "display_name": "Casper", "link": "https://stackoverflow.com/users/823617/casper"}, "is_accepted": true, "score": 1, "last_activity_date": 1489655456, "last_edit_date": 1489655456, "creation_date": 1489603993, "answer_id": 42818378, "question_id": 42810223, "link": "https://stackoverflow.com/questions/42810223/error-on-embedding-ruby-source-on-c-program/42818378#42818378", "title": "Error on embedding ruby source on c++ program", "body": "<blockquote>\n  <p>DSO missing from command line</p>\n</blockquote>\n\n<p>This is usually a sign that you are missing some library from the linking phase. The error message is not very descriptive though.</p>\n\n<p>In this case <code>undefined reference to symbol 'dlclose'</code> gives a hint of which library is missing. In this case <code>dlclose</code> happens to be in <code>libdl</code>. So adding:</p>\n\n<pre><code>-ldl\n</code></pre>\n\n<p>...to linker options (<code>LIBS +=</code>) should get you closer to the solution.</p>\n"}], "owner": {"reputation": 394, "user_id": 5540104, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-c1voaqr9Rxo/AAAAAAAAAAI/AAAAAAAAAQE/LhZv_Ya8g_U/photo.jpg?sz=128", "display_name": "Gabriel Martins", "link": "https://stackoverflow.com/users/5540104/gabriel-martins"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 123, "favorite_count": 0, "accepted_answer_id": 42818378, "answer_count": 1, "score": 1, "last_activity_date": 1489655456, "creation_date": 1489582049, "last_edit_date": 1489584146, "question_id": 42810223, "link": "https://stackoverflow.com/questions/42810223/error-on-embedding-ruby-source-on-c-program", "title": "Error on embedding ruby source on c++ program", "body": "<p>I'm not very experienced in C ++ yet but I'm trying to embed the ruby 1.8 in a qt application, and what I did until it was to download the ruby source code and put it in a project subfolder called '3rdparty' and run <code>./configure</code> inside that folder and after <code>make</code> and now I'm getting the followings errors:</p>\n\n<blockquote>\n  <p>:-1: error: /home/gabriel/dev/ruby-exps/embed-ruby-first-tries/3rdparty/ruby-1.8.7-p374//libruby-static.a(dln.o): undefined reference to symbol 'dlclose@@GLIBC_2.2.5'</p>\n  \n  <p>/lib/x86_64-linux-gnu/libdl.so.2:-1: error: error adding symbols: DSO\n  missing from command line</p>\n  \n  <p>:-1: error: collect2: error: ld returned 1 exit status</p>\n</blockquote>\n\n<p>My .pro file is like this:</p>\n\n<pre><code>QT += core\nQT -= gui\n\nCONFIG += c++11\n\nTARGET = embed-ruby-first-tries\nCONFIG += console\nCONFIG -= app_bundle\n\nTEMPLATE = app\n\nSOURCES += main.cpp\n\nwin32:CONFIG(release, debug|release): LIBS += -L$$PWD/3rdparty/ruby-1.8.7-p374/release/ -lruby-static\nelse:win32:CONFIG(debug, debug|release): LIBS += -L$$PWD/3rdparty/ruby-1.8.7-p374/debug/ -lruby-static\nelse:unix: LIBS += -L$$PWD/3rdparty/ruby-1.8.7-p374/ -lruby-static\n\nINCLUDEPATH += 3rdparty/ruby-1.8.7-p374\nDEPENDPATH += 3rdparty/ruby-1.8.7-p374\n\nwin32-g++:CONFIG(release, debug|release): PRE_TARGETDEPS += $$PWD/3rdparty/ruby-1.8.7-p374/release/libruby-static.a\nelse:win32-g++:CONFIG(debug, debug|release): PRE_TARGETDEPS += $$PWD/3rdparty/ruby-1.8.7-p374/debug/libruby-static.a\nelse:win32:!win32-g++:CONFIG(release, debug|release): PRE_TARGETDEPS += $$PWD/3rdparty/ruby-1.8.7-p374/release/ruby-static.lib\nelse:win32:!win32-g++:CONFIG(debug, debug|release): PRE_TARGETDEPS += $$PWD/3rdparty/ruby-1.8.7-p374/debug/ruby-static.lib\nelse:unix: PRE_TARGETDEPS += $$PWD/3rdparty/ruby-1.8.7-p374/libruby-static.a\n</code></pre>\n\n<p>And my main.cpp file is like this:</p>\n\n<pre><code>#include &lt;QDebug&gt;\n#include &lt;ruby.h&gt;\n\n\nint main(int argc, char *argv[])\n{\n   ruby_init();\n\n   return ruby_cleanup(0);\n}\n</code></pre>\n\n<p>I'm using qt 5.6 and ruby 1.8.7-p374 source, it'll be great if anyone tell me how I do to embed the ruby on a cpp program or at least help me understand what's going on.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "namespaces", "ruby-on-rails-5"], "comments": [{"owner": {"reputation": 14010, "user_id": 3109182, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/a4b305f0077055b4fdcf715067775d5a?s=128&d=identicon&r=PG", "display_name": "Anthony", "link": "https://stackoverflow.com/users/3109182/anthony"}, "edited": false, "score": 0, "creation_date": 1489582295, "post_id": 42809936, "comment_id": 72732694, "body": "There is a lot of magic on how <a href=\"http://guides.rubyonrails.org/autoloading_and_reloading_constants.html\" rel=\"nofollow noreferrer\">rails loads constants</a>.  In almost every other language, you explicitly import/require classes as you need them.  Rails decided to do that for you and with it comes a lot of complexity."}, {"owner": {"reputation": 51013, "user_id": 976775, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/30bd66ad1795804aebe249d8bcb14409?s=128&d=identicon&r=PG", "display_name": "MrYoshiji", "link": "https://stackoverflow.com/users/976775/mryoshiji"}, "edited": false, "score": 0, "creation_date": 1489586626, "post_id": 42809936, "comment_id": 72736129, "body": "This might be related: <a href=\"http://stackoverflow.com/questions/17695557/rails-organizing-models-in-subfolders-having-warning-toplevel-constant-a-refer\" title=\"rails organizing models in subfolders having warning toplevel constant a refer\">stackoverflow.com/questions/17695557/&hellip;</a>"}, {"owner": {"reputation": 10377, "user_id": 2832282, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/ZJ4WG.jpg?s=128&g=1", "display_name": "Cyril Duchon-Doris", "link": "https://stackoverflow.com/users/2832282/cyril-duchon-doris"}, "reply_to_user": {"reputation": 51013, "user_id": 976775, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/30bd66ad1795804aebe249d8bcb14409?s=128&d=identicon&r=PG", "display_name": "MrYoshiji", "link": "https://stackoverflow.com/users/976775/mryoshiji"}, "edited": false, "score": 0, "creation_date": 1489588881, "post_id": 42809936, "comment_id": 72738035, "body": "Hey @MrYoshiji this is likely related to Rails Autoloading magic&#39;n&#39;pitfalls but the question you linked deals with a different problem for a constant that already exists. In my case not only the constant is still not resolved, but rails is actually making up a constant that never existed anywhere by combining adding an irrelevant namespace to a class."}, {"owner": {"reputation": 51013, "user_id": 976775, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/30bd66ad1795804aebe249d8bcb14409?s=128&d=identicon&r=PG", "display_name": "MrYoshiji", "link": "https://stackoverflow.com/users/976775/mryoshiji"}, "edited": false, "score": 0, "creation_date": 1489590412, "post_id": 42809936, "comment_id": 72739272, "body": "The request.rb:93 seems to call <code>constantize</code>, which (I think) does not prepend the string to constantize with <code>::</code>"}, {"owner": {"reputation": 10377, "user_id": 2832282, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/ZJ4WG.jpg?s=128&g=1", "display_name": "Cyril Duchon-Doris", "link": "https://stackoverflow.com/users/2832282/cyril-duchon-doris"}, "edited": false, "score": 0, "creation_date": 1489592366, "post_id": 42809936, "comment_id": 72740909, "body": "So somewhere there&#39;s dynamic code calling for a &#39;profiles_controller&#39; that would get a weird namespace from somewhere... I suppose it could come from the <code>routes.rb</code> file ? Still don&#39;t understand why I would get a free bad namespace that doesn&#39;t even exist in the routes..."}], "owner": {"reputation": 10377, "user_id": 2832282, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/ZJ4WG.jpg?s=128&g=1", "display_name": "Cyril Duchon-Doris", "link": "https://stackoverflow.com/users/2832282/cyril-duchon-doris"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 203, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1489581357, "creation_date": 1489581357, "question_id": 42809936, "link": "https://stackoverflow.com/questions/42809936/rails-uninitialized-constant-because-of-bad-namespace-coming-out-of-nowhere", "title": "Rails uninitialized constant because of bad namespace coming out of nowhere", "body": "<p>I randomly run into errors where my framework complains about a missing class because of a bad namespace.</p>\n\n<p>For some reasons Rails will try to look for class name namespaced from a different gem :</p>\n\n<p>Suppose I have a <code>::ProfilesController</code> in my root namespace, I sometimes get errors of</p>\n\n<blockquote>\n  <p>uninitialized constant Mongoid::Token::Collisions::ProfilesController</p>\n</blockquote>\n\n<p>Where <code>Mongoid::Token::Collisions</code> (an example) is a module <a href=\"https://github.com/Startouf/mongoid_token/blob/master/lib/mongoid/token/collisions.rb\" rel=\"nofollow noreferrer\">from a different gem</a> used in models. I have several profiles controller declared the following way</p>\n\n<pre><code>class ::ProfilesController &lt; Devise::RegistrationsController\nclass Registrations::ProfilesController &lt; Devise::RegistrationsController\nclass Foo::ProfilesController &lt; FooController\nclass Bar::ProfilesController &lt; BarController\nclass Baz::Foo::ProfilesController &lt; BazController\n</code></pre>\n\n<p>I don't understand how it's even possible to resolve <code>ProfileController</code> with the <code>Mongoid::Token::Collisions</code> namespace since I never write in my code <code>ProfilesController</code> as is without any namespace or the <code>::</code> prefix</p>\n\n<p>I actually had similar errors with different components. Usually the problem would go away when restarting the server. I'm wondering what may cause this behavior, which became more frequent. I'm not sure providing code would be of any help, the stack trace doesn't even start from my application code. Any idea where this may come from ?</p>\n\n<pre><code>ActionController::RoutingError (uninitialized constant Mongoid::Token::Collisions::ProfilesController):\n\nactivesupport (5.0.0.1) lib/active_support/inflector/methods.rb:283:in `const_get'\nactivesupport (5.0.0.1) lib/active_support/inflector/methods.rb:283:in `block in constantize'\nactivesupport (5.0.0.1) lib/active_support/inflector/methods.rb:266:in `each'\nactivesupport (5.0.0.1) lib/active_support/inflector/methods.rb:266:in `inject'\nactivesupport (5.0.0.1) lib/active_support/inflector/methods.rb:266:in `constantize'\nactionpack (5.0.0.1) lib/action_dispatch/http/request.rb:93:in `controller_class'\nactionpack (5.0.0.1) lib/action_dispatch/routing/route_set.rb:44:in `controller'\nactionpack (5.0.0.1) lib/action_dispatch/routing/route_set.rb:30:in `serve'\nactionpack (5.0.0.1) lib/action_dispatch/journey/router.rb:39:in `block in serve'\nactionpack (5.0.0.1) lib/action_dispatch/journey/router.rb:26:in `each'\nactionpack (5.0.0.1) lib/action_dispatch/journey/router.rb:26:in `serve'\nactionpack (5.0.0.1) lib/action_dispatch/routing/route_set.rb:725:in `call'\nrack-attack (5.0.1) lib/rack/attack.rb:147:in `call'\nomniauth (1.3.2) lib/omniauth/strategy.rb:186:in `call!'\nomniauth (1.3.2) lib/omniauth/strategy.rb:164:in `call'\nomniauth (1.3.2) lib/omniauth/strategy.rb:186:in `call!'\nomniauth (1.3.2) lib/omniauth/strategy.rb:164:in `call'\nrack-tracker (1.1.0) lib/rack/tracker.rb:34:in `call'\nrack-utm (0.0.2) lib/rack-utm.rb:59:in `call'\nwarden (1.2.6) lib/warden/manager.rb:35:in `block in call'\nwarden (1.2.6) lib/warden/manager.rb:34:in `catch'\nwarden (1.2.6) lib/warden/manager.rb:34:in `call'\nrack (2.0.1) lib/rack/etag.rb:25:in `call'\nrack (2.0.1) lib/rack/conditional_get.rb:25:in `call'\nrack (2.0.1) lib/rack/head.rb:12:in `call'\nrack (2.0.1) lib/rack/session/abstract/id.rb:222:in `context'\nrack (2.0.1) lib/rack/session/abstract/id.rb:216:in `call'\nactionpack (5.0.0.1) lib/action_dispatch/middleware/cookies.rb:613:in `call'\nactionpack (5.0.0.1) lib/action_dispatch/middleware/callbacks.rb:38:in `block in call'\nactivesupport (5.0.0.1) lib/active_support/callbacks.rb:97:in `__run_callbacks__'\nactivesupport (5.0.0.1) lib/active_support/callbacks.rb:750:in `_run_call_callbacks'\nactivesupport (5.0.0.1) lib/active_support/callbacks.rb:90:in `run_callbacks'\nactionpack (5.0.0.1) lib/action_dispatch/middleware/callbacks.rb:36:in `call'\nactionpack (5.0.0.1) lib/action_dispatch/middleware/executor.rb:12:in `call'\nactionpack (5.0.0.1) lib/action_dispatch/middleware/remote_ip.rb:79:in `call'\nactionpack (5.0.0.1) lib/action_dispatch/middleware/debug_exceptions.rb:49:in `call'\nweb-console (3.3.1) lib/web_console/middleware.rb:131:in `call_app'\nweb-console (3.3.1) lib/web_console/middleware.rb:28:in `block in call'\nweb-console (3.3.1) lib/web_console/middleware.rb:18:in `catch'\nweb-console (3.3.1) lib/web_console/middleware.rb:18:in `call'\nactionpack (5.0.0.1) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'\nrailties (5.0.0.1) lib/rails/rack/logger.rb:36:in `call_app'\nrailties (5.0.0.1) lib/rails/rack/logger.rb:24:in `block in call'\nactivesupport (5.0.0.1) lib/active_support/tagged_logging.rb:70:in `block in tagged'\nactivesupport (5.0.0.1) lib/active_support/tagged_logging.rb:26:in `tagged'\nactivesupport (5.0.0.1) lib/active_support/tagged_logging.rb:70:in `tagged'\nrailties (5.0.0.1) lib/rails/rack/logger.rb:24:in `call'\nahoy_matey (1.5.2) lib/ahoy/engine.rb:22:in `call_with_quiet_ahoy'\nrequest_store (1.3.1) lib/request_store/middleware.rb:9:in `call'\nactionpack (5.0.0.1) lib/action_dispatch/middleware/request_id.rb:24:in `call'\nrack (2.0.1) lib/rack/method_override.rb:22:in `call'\nrack (2.0.1) lib/rack/runtime.rb:22:in `call'\nactivesupport (5.0.0.1) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'\nactionpack (5.0.0.1) lib/action_dispatch/middleware/executor.rb:12:in `call'\nactionpack (5.0.0.1) lib/action_dispatch/middleware/static.rb:136:in `call'\nrack (2.0.1) lib/rack/sendfile.rb:111:in `call'\nrack-cors (0.4.0) lib/rack/cors.rb:80:in `call'\nrailties (5.0.0.1) lib/rails/engine.rb:522:in `call'\npuma (3.6.0) lib/puma/configuration.rb:225:in `call'\npuma (3.6.0) lib/puma/server.rb:578:in `handle_request'\npuma (3.6.0) lib/puma/server.rb:415:in `process_client'\npuma (3.6.0) lib/puma/server.rb:275:in `block in run'\npuma (3.6.0) lib/puma/thread_pool.rb:116:in `block in spawn_thread'\n</code></pre>\n"}, {"tags": ["jquery", "ruby-on-rails", "ruby", "twitter-bootstrap", "ruby-on-rails-3"], "comments": [{"owner": {"reputation": 28612, "user_id": 5025116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7WdYi.jpg?s=128&g=1", "display_name": "Sebastian Palma", "link": "https://stackoverflow.com/users/5025116/sebastian-palma"}, "edited": false, "score": 1, "creation_date": 1489581745, "post_id": 42809429, "comment_id": 72732275, "body": "What does your task_controller says?, better, what&#39;s in your task_controller?"}, {"owner": {"reputation": 4527, "user_id": 5497690, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/577c8ad14fffb59cd619e43634c51dad?s=128&d=identicon&r=PG&f=1", "display_name": "puneet18", "link": "https://stackoverflow.com/users/5497690/puneet18"}, "edited": false, "score": 1, "creation_date": 1489582786, "post_id": 42809429, "comment_id": 72733078, "body": "you need to add @task = Task.new in index action as well."}, {"owner": {"reputation": 28612, "user_id": 5025116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7WdYi.jpg?s=128&g=1", "display_name": "Sebastian Palma", "link": "https://stackoverflow.com/users/5025116/sebastian-palma"}, "edited": false, "score": 1, "creation_date": 1489583056, "post_id": 42809429, "comment_id": 72733286, "body": "You&#39;re trying to access to your new task form within your index file, so the @task = Task.new must be on your index method."}], "answers": [{"comments": [{"owner": {"reputation": 1180, "user_id": 3484533, "user_type": "registered", "accept_rate": 49, "profile_image": "https://i.stack.imgur.com/hRYYM.jpg?s=128&g=1", "display_name": "Gleb", "link": "https://stackoverflow.com/users/3484533/gleb"}, "edited": false, "score": 0, "creation_date": 1489582454, "post_id": 42810098, "comment_id": 72732816, "body": "Yeap, my method now is \t def new   @task=Task.new end"}, {"owner": {"reputation": 28612, "user_id": 5025116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7WdYi.jpg?s=128&g=1", "display_name": "Sebastian Palma", "link": "https://stackoverflow.com/users/5025116/sebastian-palma"}, "reply_to_user": {"reputation": 1180, "user_id": 3484533, "user_type": "registered", "accept_rate": 49, "profile_image": "https://i.stack.imgur.com/hRYYM.jpg?s=128&g=1", "display_name": "Gleb", "link": "https://stackoverflow.com/users/3484533/gleb"}, "edited": false, "score": 0, "creation_date": 1489582623, "post_id": 42810098, "comment_id": 72732944, "body": "So, add the files involved in the problem to the question in order to have more info."}], "tags": [], "owner": {"reputation": 28612, "user_id": 5025116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7WdYi.jpg?s=128&g=1", "display_name": "Sebastian Palma", "link": "https://stackoverflow.com/users/5025116/sebastian-palma"}, "is_accepted": true, "score": 1, "last_activity_date": 1489666476, "last_edit_date": 1489666476, "creation_date": 1489581724, "answer_id": 42810098, "question_id": 42809429, "link": "https://stackoverflow.com/questions/42809429/rails-add-new-and-edit-form-in-bootstrap-modal/42810098#42810098", "title": "Rails add new and edit form in bootstrap modal", "body": "<p>The <code>@task</code> variable in your <code>form_for</code> can't be <code>nil</code> nor <code>[]</code>.</p>\n\n<p>You could \"hack\" the Rails behavior and explictly declare your form like this:</p>\n\n<pre><code>&lt;%= form_for Task.new, :html =&gt; {class:\"form-horizontal\"} do |f| %&gt;\n...\n</code></pre>\n\n<p>But it wouldn't be the \"correct\" way to use <code>form_for</code>, nor to use Rails, because you wouldn't be following the MVC patterns, so, instance variables from controllers to the views, no directly in the view.</p>\n\n<p>As I can't see what's in your method in the <code>tasks_controller</code>, maybe you've forgot to set the <code>Task.new</code> value to your <code>@task</code> variable, try setting it as:</p>\n\n<pre><code>class Task &lt; ApplicationController\n\n  def index\n    @task = Task.new\n    ...\n  end\nend\n</code></pre>\n\n<p>Hope it helps.</p>\n\n<p>EDIT: You're trying to access to your new task form within your index file, so the <code>@task = Task.new</code> must be on your index method.</p>\n"}, {"tags": [], "owner": {"reputation": 4527, "user_id": 5497690, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/577c8ad14fffb59cd619e43634c51dad?s=128&d=identicon&r=PG&f=1", "display_name": "puneet18", "link": "https://stackoverflow.com/users/5497690/puneet18"}, "is_accepted": false, "score": 1, "last_activity_date": 1489582442, "creation_date": 1489582442, "answer_id": 42810402, "question_id": 42809429, "link": "https://stackoverflow.com/questions/42809429/rails-add-new-and-edit-form-in-bootstrap-modal/42810402#42810402", "title": "Rails add new and edit form in bootstrap modal", "body": "<p>Error message specify that first argument ie @task is nil.</p>\n\n<p>So change your controller code </p>\n\n<pre><code>def index\n  @task = Task.new\n  @tasks = Task.all\nend\n\ndef edit\n  @task = Task.find(params[:id])\nend\n</code></pre>\n"}], "owner": {"reputation": 1180, "user_id": 3484533, "user_type": "registered", "accept_rate": 49, "profile_image": "https://i.stack.imgur.com/hRYYM.jpg?s=128&g=1", "display_name": "Gleb", "link": "https://stackoverflow.com/users/3484533/gleb"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1639, "favorite_count": 0, "accepted_answer_id": 42810098, "answer_count": 2, "score": 1, "last_activity_date": 1489666476, "creation_date": 1489579882, "last_edit_date": 1489582499, "question_id": 42809429, "link": "https://stackoverflow.com/questions/42809429/rails-add-new-and-edit-form-in-bootstrap-modal", "title": "Rails add new and edit form in bootstrap modal", "body": "<p>I'm new with Ruby on Rails. Now I'm trying to make a simple ToDo List app with bootstrap. </p>\n\n<p>Everything works but I tried to render my New task form to a modal window and it's crashed. Here is my _form partial code:</p>\n\n<pre><code>  &lt;div id=\"myModal\" class=\"modal fade\" role=\"dialog\"&gt;\n    &lt;div class=\"modal-dialog\"&gt;\n      &lt;!-- Modal content--&gt;\n      &lt;div class=\"modal-content\"&gt;\n        &lt;div class=\"modal-header\"&gt;\n          &lt;button type=\"button\" class=\"close\" data-dismiss=\"modal\"&gt;&amp;times;&lt;/button&gt;\n          &lt;h4 class=\"modal-title\"&gt;Modal Header&lt;/h4&gt;\n        &lt;/div&gt;      \n      &lt;/div&gt;\n        &lt;div class=\"modal-body\"&gt;\n          &lt;h1&gt;New Task&lt;/h1&gt;\n          &lt;%= form_for @task, :html =&gt; {class:\"form-horizontal\"} do |f|%&gt;\n             &lt;!-- Here is form code --&gt;\n          &lt;% end %&gt;\n          &lt;%= link_to 'Back', tasks_path %&gt;\n        &lt;/div&gt;\n        &lt;div class=\"modal-footer\"&gt;\n          &lt;button type=\"button\" class=\"btn btn-default\" data-dismiss=\"modal\"&gt;Close&lt;/button&gt;\n        &lt;/div&gt;\n      &lt;/div&gt;\n    &lt;/div&gt;\n</code></pre>\n\n<p>And here is my Index.html.erb:</p>\n\n<pre><code>&lt;div class=\"container-fluid\"&gt;\n    &lt;div class=\"row\"&gt;\n        &lt;h1 class=\"text-left\"&gt;Task List&lt;/h1&gt;\n        &lt;%= button_to 'New Task', new_task_path, :class =&gt;\"btn btn-success pull-right\", :method =&gt; \"get\", data: {'data-toggle' =&gt; \"modal\", 'data-targe' =&gt; \"#myModal\"} %&gt;\n    &lt;/div&gt;\n    &lt;div class=\"row button-margin \"&gt;\n    &lt;% @tasks.each do |task| %&gt;\n            &lt;div class=\"panel &lt;%= task_status(task) %&gt;\"&gt;\n                &lt;div class=\"panel-heading\"&gt;\n                    &lt;%= task.title %&gt;\n                    &lt;p class=\"pull-right\"&gt;&lt;%= task.dueDate %&gt;&lt;/p&gt;\n                &lt;/div&gt;\n                &lt;div class=\"panel-body\"&gt;    \n                    &lt;h3&gt;&lt;%= task.body %&gt;&lt;/h3&gt;\n                &lt;/div&gt;\n            &lt;/div&gt;\n        &lt;% end %&gt;\n    &lt;/div&gt;\n\n    &lt;%= render \"tasks/form\" %&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p>So when trying to start my index page I get an error <code>First argument in form cannot contain nil or be empty</code>.</p>\n\n<p>Whats wrong with my code? And how can I pass an existing task to the form for Edit action?</p>\n\n<p><strong>UPD:</strong></p>\n\n<p>Method for new task in task controller is:</p>\n\n<pre><code>class TasksController &lt; ApplicationController\n    def index\n        @tasks=Task.all\n    end\n\n    def new\n        @task=Task.new\n    end\n\n    def show\n        @task=Task.find(params[:id])\n    end\n\n    def create\n        @task=Task.new(task_params)\n        if @task.save\n            redirect_to @task\n        else\n            render 'new'\n        end\n    end\n\n    private\n        def task_params\n            params.require(:task).permit(:title, :body, :creationDate, :dueDate)\n        end\nend\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "xml", "post", "soap"], "answers": [{"tags": [], "owner": {"reputation": 1270, "user_id": 749409, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/c7d5b3aad74c71de1c05003662938227?s=128&d=identicon&r=PG", "display_name": "Brandon Cordell", "link": "https://stackoverflow.com/users/749409/brandon-cordell"}, "is_accepted": false, "score": 0, "last_activity_date": 1489589308, "creation_date": 1489589308, "answer_id": 42813105, "question_id": 42809047, "link": "https://stackoverflow.com/questions/42809047/how-to-handle-a-soap-request-and-send-response-in-ruby-on-rails/42813105#42813105", "title": "How to handle a SOAP request and send response in Ruby on Rails", "body": "<p>If you absolutely cannot avoid requiring soap requests coming into your application (in lieu of say, json) check out the <a href=\"https://github.com/inossidabile/wash_out\" rel=\"nofollow noreferrer\">wash_out</a> gem.</p>\n"}], "owner": {"reputation": 163, "user_id": 1204887, "user_type": "registered", "accept_rate": 10, "profile_image": "https://www.gravatar.com/avatar/e39855bf69e447bd20d707d1b9206458?s=128&d=identicon&r=PG", "display_name": "Subrahmanyam Konduri", "link": "https://stackoverflow.com/users/1204887/subrahmanyam-konduri"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 544, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1489589308, "creation_date": 1489578935, "question_id": 42809047, "link": "https://stackoverflow.com/questions/42809047/how-to-handle-a-soap-request-and-send-response-in-ruby-on-rails", "title": "How to handle a SOAP request and send response in Ruby on Rails", "body": "<p>I am having a Rails Application, where I will receive a SOAP request using POST method to it.\nI need to handle that request, parse the corresponding XML, and need to respond to that request accordingly.\nBut, Ruby on Rails by default allows only REST request.</p>\n\n<p>Can anyone please let me know how to handle that in Ruby on Rails?</p>\n\n<p>Thanks in advance.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "kubernetes", "google-cloud-platform", "kubectl"], "comments": [{"owner": {"reputation": 2679, "user_id": 1812322, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/ab68ec41682314f87def370d3ddbac1f?s=128&d=identicon&r=PG", "display_name": "Bonifacio2", "link": "https://stackoverflow.com/users/1812322/bonifacio2"}, "edited": false, "score": 1, "creation_date": 1489581712, "post_id": 42809007, "comment_id": 72732252, "body": "What happens when you run <code>kt get services</code>?"}, {"owner": {"reputation": 3063, "user_id": 1682038, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/90c9c92c135240a02e9bcd1c886bcae8?s=128&d=identicon&r=PG", "display_name": "rony36", "link": "https://stackoverflow.com/users/1682038/rony36"}, "reply_to_user": {"reputation": 2679, "user_id": 1812322, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/ab68ec41682314f87def370d3ddbac1f?s=128&d=identicon&r=PG", "display_name": "Bonifacio2", "link": "https://stackoverflow.com/users/1812322/bonifacio2"}, "edited": false, "score": 0, "creation_date": 1489581942, "post_id": 42809007, "comment_id": 72732430, "body": "like this  <code>NAME         CLUSTER-IP     EXTERNAL-IP      PORT(S)        AGE kubernetes   10.39.240.1    &lt;none&gt;           443&#47;TCP        6h sso          10.39.245.40   104.154.62.129   80:30816&#47;TCP   36m </code>"}, {"owner": {"reputation": 2679, "user_id": 1812322, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/ab68ec41682314f87def370d3ddbac1f?s=128&d=identicon&r=PG", "display_name": "Bonifacio2", "link": "https://stackoverflow.com/users/1812322/bonifacio2"}, "edited": false, "score": 0, "creation_date": 1489582726, "post_id": 42809007, "comment_id": 72733030, "body": "Weird. Your app should be available through this external IP."}, {"owner": {"reputation": 3063, "user_id": 1682038, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/90c9c92c135240a02e9bcd1c886bcae8?s=128&d=identicon&r=PG", "display_name": "rony36", "link": "https://stackoverflow.com/users/1682038/rony36"}, "reply_to_user": {"reputation": 2679, "user_id": 1812322, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/ab68ec41682314f87def370d3ddbac1f?s=128&d=identicon&r=PG", "display_name": "Bonifacio2", "link": "https://stackoverflow.com/users/1812322/bonifacio2"}, "edited": false, "score": 0, "creation_date": 1489582811, "post_id": 42809007, "comment_id": 72733103, "body": "is it some kind of firewall issue? @Bonifacio2"}], "owner": {"reputation": 3063, "user_id": 1682038, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/90c9c92c135240a02e9bcd1c886bcae8?s=128&d=identicon&r=PG", "display_name": "rony36", "link": "https://stackoverflow.com/users/1682038/rony36"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 192, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1489581926, "creation_date": 1489578828, "last_edit_date": 1489581926, "question_id": 42809007, "link": "https://stackoverflow.com/questions/42809007/ruby-on-rails-kubernetes-deployment-in-google-cloud", "title": "Ruby on rails Kubernetes deployment in Google Cloud", "body": "<p>Here is my kubernetes service desription look like on Google Cloud Platform:</p>\n\n<h1><code>kubectl describe service sso</code></h1>\n\n<pre><code>Name:                   sso\nNamespace:              default\nLabels:                 app=sso\nSelector:               app=sso\nType:                   LoadBalancer\nIP:                     10.39.254.125\nLoadBalancer Ingress:   35.184.96.95\nPort:                   &lt;unset&gt; 80/TCP\nNodePort:               &lt;unset&gt; 31260/TCP\nEndpoints:              10.36.1.12:8080,10.36.1.13:8080,10.36.2.8:8080\nSession Affinity:       None\nEvents:\n  FirstSeen     LastSeen        Count   From                    SubObjectPath   Type            Reason                  Message\n  ---------     --------        -----   ----                    -------------   --------        ------                  -------\n  8m            8m              1       {service-controller }                   Normal          CreatingLoadBalancer    Creating load balancer\n  7m            7m              1       {service-controller }                   Normal          CreatedLoadBalancer     Created load balancer\n</code></pre>\n\n<h1><code>kubectl get pods</code></h1>\n\n<pre><code>NAME                  READY     STATUS    RESTARTS   AGE\nsso-868819325-8g8g7   1/1       Running   0          14m\nsso-868819325-sbtz7   1/1       Running   0          14m\nsso-868819325-zd3vk   1/1       Running   0          14m\n</code></pre>\n\n<p>Isn't it on ip <code>35.184.96.95</code> my rails application will be available?\nI couldn't found any error. But on <code>35.184.96.95</code> nothing shows up.</p>\n\n<p>Please help!</p>\n\n<h1>Updated</h1>\n\n<h1><code>kt get services</code></h1>\n\n<pre><code>NAME         CLUSTER-IP     EXTERNAL-IP      PORT(S)        AGE\nkubernetes   10.39.240.1    &lt;none&gt;           443/TCP        6h\nsso          10.39.245.40   104.154.62.129   80:30816/TCP   36m\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "rails-activerecord"], "comments": [{"owner": {"reputation": 689, "user_id": 2875377, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/4a9d994f85c436f7bf13c592e6b8989e?s=128&d=identicon&r=PG&f=1", "display_name": "praga2050", "link": "https://stackoverflow.com/users/2875377/praga2050"}, "edited": false, "score": 0, "creation_date": 1490025528, "post_id": 42808941, "comment_id": 72915992, "body": "did you use accept_nested_attributes for License in Client model  <a href=\"http://api.rubyonrails.org/classes/ActiveRecord/NestedAttributes/ClassMethods.html\" rel=\"nofollow noreferrer\">api.rubyonrails.org/classes/ActiveRecord/NestedAttributes/&hellip;</a>"}, {"owner": {"reputation": 1327, "user_id": 3326982, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/C3YzT.jpg?s=128&g=1", "display_name": "Florian Koch", "link": "https://stackoverflow.com/users/3326982/florian-koch"}, "reply_to_user": {"reputation": 689, "user_id": 2875377, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/4a9d994f85c436f7bf13c592e6b8989e?s=128&d=identicon&r=PG&f=1", "display_name": "praga2050", "link": "https://stackoverflow.com/users/2875377/praga2050"}, "edited": false, "score": 0, "creation_date": 1490026444, "post_id": 42808941, "comment_id": 72916616, "body": "@praga2050 no, I didn&#39;t... I&#39;ll try that"}, {"owner": {"reputation": 1327, "user_id": 3326982, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/C3YzT.jpg?s=128&g=1", "display_name": "Florian Koch", "link": "https://stackoverflow.com/users/3326982/florian-koch"}, "reply_to_user": {"reputation": 689, "user_id": 2875377, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/4a9d994f85c436f7bf13c592e6b8989e?s=128&d=identicon&r=PG&f=1", "display_name": "praga2050", "link": "https://stackoverflow.com/users/2875377/praga2050"}, "edited": false, "score": 0, "creation_date": 1490027020, "post_id": 42808941, "comment_id": 72917025, "body": "@praga2050 oh well... that should have been obvious... *facepalm* would you make that an answer so I can accept this? Thanks for your help"}, {"owner": {"reputation": 689, "user_id": 2875377, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/4a9d994f85c436f7bf13c592e6b8989e?s=128&d=identicon&r=PG&f=1", "display_name": "praga2050", "link": "https://stackoverflow.com/users/2875377/praga2050"}, "edited": false, "score": 0, "creation_date": 1490028534, "post_id": 42808941, "comment_id": 72918014, "body": "done i have added as answer"}], "answers": [{"tags": [], "owner": {"reputation": 689, "user_id": 2875377, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/4a9d994f85c436f7bf13c592e6b8989e?s=128&d=identicon&r=PG&f=1", "display_name": "praga2050", "link": "https://stackoverflow.com/users/2875377/praga2050"}, "is_accepted": true, "score": 2, "last_activity_date": 1490028374, "creation_date": 1490028374, "answer_id": 42909320, "question_id": 42808941, "link": "https://stackoverflow.com/questions/42808941/activerecord-save-all-changes-to-has-many-childs-on-parent-save/42909320#42909320", "title": "ActiveRecord save all changes to has_many childs on parent save", "body": "<p>I think you need to add </p>\n\n<pre><code>accepts_nested_attributes_for :licenses\n</code></pre>\n\n<p>in Client model. This would help you to save the child objects </p>\n\n<p>as mentioned in comment. Please refer this link</p>\n\n<p><a href=\"http://api.rubyonrails.org/classes/ActiveRecord/NestedAttributes/ClassMethods.html\" rel=\"nofollow noreferrer\">http://api.rubyonrails.org/classes/ActiveRecord/NestedAttributes/ClassMethods.html</a></p>\n"}], "owner": {"reputation": 1327, "user_id": 3326982, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/C3YzT.jpg?s=128&g=1", "display_name": "Florian Koch", "link": "https://stackoverflow.com/users/3326982/florian-koch"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 280, "favorite_count": 1, "accepted_answer_id": 42909320, "answer_count": 1, "score": 1, "last_activity_date": 1490028374, "creation_date": 1489578652, "last_edit_date": 1495539980, "question_id": 42808941, "link": "https://stackoverflow.com/questions/42808941/activerecord-save-all-changes-to-has-many-childs-on-parent-save", "title": "ActiveRecord save all changes to has_many childs on parent save", "body": "<p>I'm trying to update a parent object (<code>Client</code>) and associated child objects (<code>License</code>). It is possible that either of these objects is new, that's why I have to check for existing objects to update and if there aren't any I have to create them.</p>\n\n<p>My code currently looks like this:</p>\n\n<pre><code>return nil unless params.has_key?('client_uid')\nclient = Client.find_by_uid(params['client_uid'])\nif client.nil?\n  client = Client.new(uid: params['client_uid'])\nend\nclient.app = params['application']\nclient.app_version = params['application_version']\n...\n\nlicenses = params['licenses']\nlicenses.each do |licenseInfo|\n  next unless licenseInfo.has_key?('application')\n  license = client.licenses.find_by_application(licenseInfo['application'])\n  if license.nil?\n    license = License.new\n    # add license without instantly saving\n    client.association(:licenses).add_to_target(license)\n    license.application = licenseInfo['application']\n  end\n  license.options = licenseInfo['options']\n  ...\nend\nclient.last_seen = Time.zone.now\nclient.save\n</code></pre>\n\n<p>This is able to create new clients and update existing ones from the values in the <code>params</code>, as well as adding new licenses for the client (I will implement deleting old licenses later). The problem is that changes to <em>existing licenses</em> aren't saved when I call <code>client.save</code>. </p>\n\n<p>I'm not sure if I'm doing something wrong, or if ActiveRecord really isn't able to handle a situation like this. I already searched for this problem and tried to explicitly specify <code>autosave: true</code> for the <code>License</code> class' <code>belongs_to</code> as recommended <a href=\"https://stackoverflow.com/a/10308972/3326982\">here</a>, but this didn't have any effect.</p>\n\n<p>In conclusion, my question is: What do I have to change to be able to save my <code>Client</code> together with all changes (new, changed, deleted) to his <code>licenses</code>?</p>\n\n<p>EDIT:\nI tried manually saving all licenses and putting this together in a transaction:</p>\n\n<pre><code>Client.transaction do\n  client.save\n  client.licenses.each do |license|\n    license.save\n  end\nend\n</code></pre>\n\n<p>But this didn't work, either. Now I'm confused....</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "devise", "activeadmin"], "comments": [{"owner": {"reputation": 1698, "user_id": 4587148, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/VjBAv.jpg?s=128&g=1", "display_name": "Sajan", "link": "https://stackoverflow.com/users/4587148/sajan"}, "edited": false, "score": 0, "creation_date": 1489577688, "post_id": 42808425, "comment_id": 72729434, "body": "What is your problem ? What do you want ?"}, {"owner": {"reputation": 5144, "user_id": 5411461, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/RyJfN.jpg?s=128&g=1", "display_name": "Haseeb Ahmad", "link": "https://stackoverflow.com/users/5411461/haseeb-ahmad"}, "reply_to_user": {"reputation": 1698, "user_id": 4587148, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/VjBAv.jpg?s=128&g=1", "display_name": "Sajan", "link": "https://stackoverflow.com/users/4587148/sajan"}, "edited": false, "score": 0, "creation_date": 1489577795, "post_id": 42808425, "comment_id": 72729504, "body": "I want it should follow its default behaviour meanz redirect towrards admin login path"}, {"owner": {"reputation": 1698, "user_id": 4587148, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/VjBAv.jpg?s=128&g=1", "display_name": "Sajan", "link": "https://stackoverflow.com/users/4587148/sajan"}, "edited": false, "score": 0, "creation_date": 1489577901, "post_id": 42808425, "comment_id": 72729579, "body": "Which path it redirects to ? It should be in console log, right after the lines, you posted here."}, {"owner": {"reputation": 5144, "user_id": 5411461, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/RyJfN.jpg?s=128&g=1", "display_name": "Haseeb Ahmad", "link": "https://stackoverflow.com/users/5411461/haseeb-ahmad"}, "reply_to_user": {"reputation": 1698, "user_id": 4587148, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/VjBAv.jpg?s=128&g=1", "display_name": "Sajan", "link": "https://stackoverflow.com/users/4587148/sajan"}, "edited": false, "score": 0, "creation_date": 1489578698, "post_id": 42808425, "comment_id": 72730117, "body": "/users/login...."}, {"owner": {"reputation": 1698, "user_id": 4587148, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/VjBAv.jpg?s=128&g=1", "display_name": "Sajan", "link": "https://stackoverflow.com/users/4587148/sajan"}, "edited": false, "score": 0, "creation_date": 1489579567, "post_id": 42808425, "comment_id": 72730762, "body": "Did you made any other changes while integrating AA ? Like any customization to initializer or custom controller ?"}], "owner": {"reputation": 5144, "user_id": 5411461, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/RyJfN.jpg?s=128&g=1", "display_name": "Haseeb Ahmad", "link": "https://stackoverflow.com/users/5411461/haseeb-ahmad"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 396, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1489577152, "creation_date": 1489577152, "question_id": 42808425, "link": "https://stackoverflow.com/questions/42808425/activeadmin-login-redirect-towards-devise-login-page", "title": "Activeadmin login redirect towards devise login page", "body": "<p>My activeadmin login page redirects towards devise login if it not login and also logout if devise user logout</p>\n\n<p>Meanz it depends on devise login</p>\n\n<p>config/routes.rb</p>\n\n<pre><code>devise_for :admin_users, ActiveAdmin::Devise.config\nActiveAdmin.routes(self)\n</code></pre>\n\n<p>In console this happens</p>\n\n<pre><code>Started GET \"/admin\" for 127.0.0.1 at 2017-03-15 16:24:19 +0500\nProcessing by Admin::DashboardController#index as HTML\nCompleted 401 Unauthorized in 6ms (ActiveRecord: 0.0ms)\n</code></pre>\n"}, {"tags": ["ruby", "xml", "tsung", "tsung-recorder"], "comments": [{"owner": {"reputation": 47, "user_id": 4337217, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/i2cRr.png?s=128&g=1", "display_name": "Progi1990", "link": "https://stackoverflow.com/users/4337217/progi1990"}, "edited": false, "score": 0, "creation_date": 1489681148, "post_id": 42807953, "comment_id": 72788137, "body": "can anybody help me here?"}], "answers": [{"comments": [{"owner": {"reputation": 47, "user_id": 4337217, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/i2cRr.png?s=128&g=1", "display_name": "Progi1990", "link": "https://stackoverflow.com/users/4337217/progi1990"}, "edited": false, "score": 0, "creation_date": 1490008875, "post_id": 42896026, "comment_id": 72904038, "body": "yes, I have tried without .com but it dumps following in tsug.dump file  NewClient:1490008761.822118:1 load:1 NewClient:1490008762.759179:1 load:2"}], "tags": [], "owner": {"reputation": 246, "user_id": 6786528, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/H31SE.jpg?s=128&g=1", "display_name": "s s", "link": "https://stackoverflow.com/users/6786528/s-s"}, "is_accepted": false, "score": 1, "last_activity_date": 1489985199, "last_edit_date": 1495540442, "creation_date": 1489985199, "answer_id": 42896026, "question_id": 42807953, "link": "https://stackoverflow.com/questions/42807953/http-request-gives-302/42896026#42896026", "title": "HTTP request gives 302", "body": "<p>Try with the ip or just the hostname here not .com.</p>\n\n<pre><code>&lt;servers&gt;\n    &lt;server host=\"HOSTNAME_HERE\" port=\"443\" type=\"ssl\"&gt;&lt;/server&gt;\n&lt;/servers&gt; \n</code></pre>\n\n<p>Refer the <a href=\"https://stackoverflow.com/questions/14809554/can-anyone-post-an-example-of-how-to-enable-ssl-in-tsung\">this</a></p>\n"}], "owner": {"reputation": 47, "user_id": 4337217, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/i2cRr.png?s=128&g=1", "display_name": "Progi1990", "link": "https://stackoverflow.com/users/4337217/progi1990"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 108, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1489985199, "creation_date": 1489575897, "question_id": 42807953, "link": "https://stackoverflow.com/questions/42807953/http-request-gives-302", "title": "HTTP request gives 302", "body": "<p>I have setup xml file, I think there ssl certificate issue while I am hitting http request in tsung.</p>\n\n<pre><code>&lt;?xml version=\"1.0\"?&gt;\n&lt;!DOCTYPE tsung SYSTEM \"/usr/share/tsung/tsung-1.0.dtd\"&gt;\n&lt;tsung loglevel=\"debug\" dumptraffic=\"true\" version=\"1.0\"&gt;\n\n  &lt;clients&gt;\n    &lt;client host=\"localhost\" maxusers=\"1\" use_controller_vm=\"true\"/&gt;\n  &lt;/clients&gt;\n\n  &lt;servers&gt;\n    &lt;server host=\"hostname.com\" port=\"443\" type=\"ssl\"&gt;&lt;/server&gt;\n  &lt;/servers&gt;\n\n\n  &lt;load&gt;\n    &lt;arrivalphase phase=\"1\" duration=\"1\" unit=\"minute\"&gt;\n      &lt;users arrivalrate=\"1\" unit=\"second\"/&gt;\n    &lt;/arrivalphase&gt;\n  &lt;/load&gt;\n\n &lt;sessions&gt;\n  &lt;session name=\"http_test_1\" probability=\"100\" type=\"ts_http\"&gt;\n\n      &lt;request subst=\"true\"&gt;\n        &lt;dyn_variable name=\"redirect\" re=\"Location: (http://.*)\\r\"/&gt;\n        &lt;http url=\"/users/sign_in\" contents='{&amp;quot;user&amp;quot;: {&amp;quot;email&amp;quot;: &amp;quot;vishal.jagtap+51@zibtek.com&amp;quot;,&amp;quot;password&amp;quot;: &amp;quot;tudip123&amp;quot;}}' content_type='application/json' method=\"POST\" version=\"1.1\"&gt;\n        &lt;/http&gt;\n      &lt;/request&gt;\n\n    &lt;thinktime random='true' value='27'/&gt;\n\n    &lt;repeat name=\"redirect_loop\" max_repeat=\"5\"&gt;\n      &lt;request subst=\"true\"&gt;\n        &lt;dyn_variable name=\"redirect\" re=\"Location: (http://.*)\\r\"/&gt;\n        &lt;http url=\"%%_redirect%%\" method=\"GET\"&gt;&lt;/http&gt;\n      &lt;/request&gt;\n      &lt;until var=\"redirect\" eq=\"\"/&gt;\n    &lt;/repeat&gt;\n\n    &lt;request&gt;\n      &lt;http url=\"/users/edit\" method=\"GET\" version=\"1.1\"&gt;\n        &lt;/http&gt;\n    &lt;/request&gt;\n\n  &lt;/session&gt;\n &lt;/sessions&gt;\n\n&lt;/tsung&gt;\n</code></pre>\n\n<p>in tsung.dump I get 302, how can I hit https request is there any way or any configuration in xml?</p>\n\n<p>please please please help me here! I am stuck from 3 days :(</p>\n"}, {"tags": ["ruby", "rexml"], "comments": [{"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1489575581, "post_id": 42807782, "comment_id": 72728034, "body": "Show your attempt, please."}], "answers": [{"comments": [{"owner": {"reputation": 265, "user_id": 6186808, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/2b81f29cc97dd1819f87a8683b118eb7?s=128&d=identicon&r=PG&f=1", "display_name": "Mike", "link": "https://stackoverflow.com/users/6186808/mike"}, "edited": false, "score": 0, "creation_date": 1489629334, "post_id": 42808175, "comment_id": 72759177, "body": "Is there a way to keep the origin rather than modify it? Assume I am parsing an xml file, it is not applicable to inspect all nodes, right?"}], "tags": [], "owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "is_accepted": false, "score": 1, "last_activity_date": 1489576504, "creation_date": 1489576504, "answer_id": 42808175, "question_id": 42807782, "link": "https://stackoverflow.com/questions/42807782/rexml-how-to-print-empty-node-with-close-tag/42808175#42808175", "title": "rexml - How to print empty node with close tag", "body": "<p>Since it\u2019s an XML, the elements got collapsed unless there is a [possibly emply] node nested:</p>\n\n<pre><code>el.root.add_text ''\nel.to_s\n#\u21d2\u00a0\"&lt;a&gt;&lt;/a&gt;\"\n</code></pre>\n"}], "owner": {"reputation": 265, "user_id": 6186808, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/2b81f29cc97dd1819f87a8683b118eb7?s=128&d=identicon&r=PG&f=1", "display_name": "Mike", "link": "https://stackoverflow.com/users/6186808/mike"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 105, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1489632188, "creation_date": 1489575456, "last_edit_date": 1489632188, "question_id": 42807782, "link": "https://stackoverflow.com/questions/42807782/rexml-how-to-print-empty-node-with-close-tag", "title": "rexml - How to print empty node with close tag", "body": "<pre><code>require 'rexml/document'\nstr = File.readlines('myxml.xml').join # '&lt;a&gt;&lt;/a&gt;'\nel = REXML::Document.new str\np el.to_s # \"&lt;a/&gt;\"\n</code></pre>\n\n<p>I want <code>&lt;a&gt;&lt;/a&gt;</code> instead of <code>&lt;a /&gt;</code>.\nHow can I get this with rexml in ruby?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-5"], "comments": [{"owner": {"reputation": 654, "user_id": 1319545, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6d925d70e121e9b8e1a7dd44155e2497?s=128&d=identicon&r=PG", "display_name": "thaleshcv", "link": "https://stackoverflow.com/users/1319545/thaleshcv"}, "edited": false, "score": 0, "creation_date": 1489575532, "post_id": 42807523, "comment_id": 72727990, "body": "what gem are you using?"}, {"owner": {"reputation": 1082, "user_id": 1298155, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/9c5f83a0c9aa0b544bd56b004e18218c?s=128&d=identicon&r=PG", "display_name": "Crimbo", "link": "https://stackoverflow.com/users/1298155/crimbo"}, "reply_to_user": {"reputation": 654, "user_id": 1319545, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6d925d70e121e9b8e1a7dd44155e2497?s=128&d=identicon&r=PG", "display_name": "thaleshcv", "link": "https://stackoverflow.com/users/1319545/thaleshcv"}, "edited": false, "score": 0, "creation_date": 1489575711, "post_id": 42807523, "comment_id": 72728116, "body": "@thaleshcv &#39;mailchimp_api_v3&#39;"}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1489576032, "post_id": 42807523, "comment_id": 72728328, "body": "Yeah, it&#39;s really an oversight on mailchimp&#39;s part. I see no possible reason <i>not</i> to have a common error class for your gem. Probably, your best bet is to do what @mudasobwa is suggesting."}, {"owner": {"reputation": 1082, "user_id": 1298155, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/9c5f83a0c9aa0b544bd56b004e18218c?s=128&d=identicon&r=PG", "display_name": "Crimbo", "link": "https://stackoverflow.com/users/1298155/crimbo"}, "reply_to_user": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1489577302, "post_id": 42807523, "comment_id": 72729191, "body": "@SergioTulentsev Ar okay. So am I right in saying that the gem author could just use one class, rather than have multiple classes as declared on <a href=\"https://github.com/dominicsayers/mailchimp_api_v3/blob/develop/lib/mailchimp_api_v3/exception.rb\" rel=\"nofollow noreferrer\">this page</a>?"}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 1, "creation_date": 1489577464, "post_id": 42807523, "comment_id": 72729298, "body": "Maybe there <i>was</i> a reason for this, I have no idea. Note that <i>most</i> of them inherit from DataException. So you can rescue that one and the few rogues."}, {"owner": {"reputation": 1082, "user_id": 1298155, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/9c5f83a0c9aa0b544bd56b004e18218c?s=128&d=identicon&r=PG", "display_name": "Crimbo", "link": "https://stackoverflow.com/users/1298155/crimbo"}, "edited": false, "score": 0, "creation_date": 1489578385, "post_id": 42807523, "comment_id": 72729887, "body": "Yeah, good spot! And also &#39;RuntimeError&#39; would be one other I imagine?"}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 1, "creation_date": 1489580332, "post_id": 42807523, "comment_id": 72731271, "body": "Now, <code>RuntimeError</code> is one of the system classes and is too generic. Don&#39;t rescue <i>that</i> one."}, {"owner": {"reputation": 1082, "user_id": 1298155, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/9c5f83a0c9aa0b544bd56b004e18218c?s=128&d=identicon&r=PG", "display_name": "Crimbo", "link": "https://stackoverflow.com/users/1298155/crimbo"}, "edited": false, "score": 0, "creation_date": 1489581215, "post_id": 42807523, "comment_id": 72731883, "body": "Ar okay, thank you"}], "answers": [{"comments": [{"owner": {"reputation": 1082, "user_id": 1298155, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/9c5f83a0c9aa0b544bd56b004e18218c?s=128&d=identicon&r=PG", "display_name": "Crimbo", "link": "https://stackoverflow.com/users/1298155/crimbo"}, "edited": false, "score": 0, "creation_date": 1489576822, "post_id": 42807735, "comment_id": 72728899, "body": "I&#39;m afraid that doesn&#39;t work - It doesn&#39;t rescue the exception. I seem to remember trying that before, as I also read that line in the README.md"}], "tags": [], "owner": {"reputation": 654, "user_id": 1319545, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6d925d70e121e9b8e1a7dd44155e2497?s=128&d=identicon&r=PG", "display_name": "thaleshcv", "link": "https://stackoverflow.com/users/1319545/thaleshcv"}, "is_accepted": false, "score": 1, "last_activity_date": 1489576250, "last_edit_date": 1489576250, "creation_date": 1489575348, "answer_id": 42807735, "question_id": 42807523, "link": "https://stackoverflow.com/questions/42807523/how-would-one-make-multiple-exception-classes-inherit-from-one-parent-class/42807735#42807735", "title": "How would one make multiple exception classes inherit from one parent class?", "body": "<p>Take a look at <a href=\"https://github.com/dominicsayers/mailchimp_api_v3#exception-handling\" rel=\"nofollow noreferrer\">https://github.com/dominicsayers/mailchimp_api_v3#exception-handling</a></p>\n\n<p>It says: </p>\n\n<blockquote>\n  <p>All exceptions will be subclasses of Mailchimp::Exception</p>\n</blockquote>\n\n<p>try <code>rescue_from Mailchimp::Exception, with: :error</code></p>\n"}, {"comments": [{"owner": {"reputation": 1082, "user_id": 1298155, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/9c5f83a0c9aa0b544bd56b004e18218c?s=128&d=identicon&r=PG", "display_name": "Crimbo", "link": "https://stackoverflow.com/users/1298155/crimbo"}, "edited": false, "score": 0, "creation_date": 1489577933, "post_id": 42807954, "comment_id": 72729593, "body": "Real tidy! Like it! Though the latter didn&#39;t work, I think because of an error on this <a href=\"https://github.com/dominicsayers/mailchimp_api_v3/blob/develop/lib/mailchimp_api_v3/exception.rb\" rel=\"nofollow noreferrer\">gem page</a> <code>ArgumentError ({&quot;RestClient::ResourceNotFound&quot;=&gt;Mailchimp::Exception::NotF&zwnj;&#8203;ound, &quot;RestClient::Unauthorized&quot;=&gt;Mailchimp::Exception::APIKeyErro&zwnj;&#8203;r} must be an Exception class or a String referencing an Exception class):</code>"}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "reply_to_user": {"reputation": 1082, "user_id": 1298155, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/9c5f83a0c9aa0b544bd56b004e18218c?s=128&d=identicon&r=PG", "display_name": "Crimbo", "link": "https://stackoverflow.com/users/1298155/crimbo"}, "edited": false, "score": 0, "creation_date": 1489584014, "post_id": 42807954, "comment_id": 72734032, "body": "Simply filter out everything that is not an exception. I have the answer updated."}, {"owner": {"reputation": 1082, "user_id": 1298155, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/9c5f83a0c9aa0b544bd56b004e18218c?s=128&d=identicon&r=PG", "display_name": "Crimbo", "link": "https://stackoverflow.com/users/1298155/crimbo"}, "edited": false, "score": 0, "creation_date": 1489586469, "post_id": 42807954, "comment_id": 72736012, "body": "That doesn&#39;t pick up anything - In other words, it produced an empty array"}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "reply_to_user": {"reputation": 1082, "user_id": 1298155, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/9c5f83a0c9aa0b544bd56b004e18218c?s=128&d=identicon&r=PG", "display_name": "Crimbo", "link": "https://stackoverflow.com/users/1298155/crimbo"}, "edited": false, "score": 0, "creation_date": 1489586596, "post_id": 42807954, "comment_id": 72736103, "body": "Oh, indeed. <code>e</code> is a class there, not instance, please see an update."}, {"owner": {"reputation": 1082, "user_id": 1298155, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/9c5f83a0c9aa0b544bd56b004e18218c?s=128&d=identicon&r=PG", "display_name": "Crimbo", "link": "https://stackoverflow.com/users/1298155/crimbo"}, "edited": false, "score": 0, "creation_date": 1489592574, "post_id": 42807954, "comment_id": 72741084, "body": "Now <code>TypeError (no implicit conversion of Class into Hash):</code>. Maybe the Class name needs to be grabbed as a string?"}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "reply_to_user": {"reputation": 1082, "user_id": 1298155, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/9c5f83a0c9aa0b544bd56b004e18218c?s=128&d=identicon&r=PG", "display_name": "Crimbo", "link": "https://stackoverflow.com/users/1298155/crimbo"}, "edited": false, "score": 0, "creation_date": 1489592833, "post_id": 42807954, "comment_id": 72741314, "body": "I blindly try to guess how mailchimp constants look like, while you have it on hand. OK, not I am sure it will work as expected."}, {"owner": {"reputation": 1082, "user_id": 1298155, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/9c5f83a0c9aa0b544bd56b004e18218c?s=128&d=identicon&r=PG", "display_name": "Crimbo", "link": "https://stackoverflow.com/users/1298155/crimbo"}, "edited": false, "score": 0, "creation_date": 1489593719, "post_id": 42807954, "comment_id": 72742048, "body": "I think what you are after is instances, not constants. <a href=\"https://github.com/dominicsayers/mailchimp_api_v3/blob/develop/lib/mailchimp_api_v3/exception.rb\" rel=\"nofollow noreferrer\">This the class in which you are looking in</a>"}], "tags": [], "owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "is_accepted": false, "score": 2, "last_activity_date": 1489592789, "last_edit_date": 1489592789, "creation_date": 1489575900, "answer_id": 42807954, "question_id": 42807523, "link": "https://stackoverflow.com/questions/42807523/how-would-one-make-multiple-exception-classes-inherit-from-one-parent-class/42807954#42807954", "title": "How would one make multiple exception classes inherit from one parent class?", "body": "<p>I have no idea about mailchimp itself, but I can generally suggest how to make it DRY properly:</p>\n\n<pre><code>EXCEPTIONS = %w|\n  DataException\n  APIKeyError\n  NotFound\n  Duplicate\n  MissingField\n  BadRequest\n  UnknownAttribute\n  MissingId|.map { |e| Mailchimp::Exception.const_get(e) }\n\nrescue_from *EXCEPTIONS, with: :error\n</code></pre>\n\n<p>Or, to <code>rescue_from</code> <strong>all exceptions</strong>, defined in <code>Mailchimp::Exception</code> at once:</p>\n\n<pre><code>EXCEPTIONS = Mailchimp::Exception.constants.map do |e|\n  Mailchimp::Exception.const_get(e)\nend.select { |e| e.is_a?(Class) &amp;&amp; e &lt; Exception }\n</code></pre>\n"}], "owner": {"reputation": 1082, "user_id": 1298155, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/9c5f83a0c9aa0b544bd56b004e18218c?s=128&d=identicon&r=PG", "display_name": "Crimbo", "link": "https://stackoverflow.com/users/1298155/crimbo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 350, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1489592789, "creation_date": 1489574839, "last_edit_date": 1495541366, "question_id": 42807523, "link": "https://stackoverflow.com/questions/42807523/how-would-one-make-multiple-exception-classes-inherit-from-one-parent-class", "title": "How would one make multiple exception classes inherit from one parent class?", "body": "<p>So far I have this...</p>\n\n<pre><code>class MembersController &lt; ApplicationController\n\n  rescue_from Mailchimp::Exception::DataException,\n    Mailchimp::Exception::APIKeyError,\n    Mailchimp::Exception::NotFound,\n    Mailchimp::Exception::Duplicate,\n    Mailchimp::Exception::MissingField,\n    Mailchimp::Exception::BadRequest,\n    Mailchimp::Exception::UnknownAttribute,\n    Mailchimp::Exception::MissingId,\n    with: :error\n\n  def error(e)\n\n    puts 'Message: ' + e.message\n    puts 'Type: ' + e.type\n    puts 'Title: ' + e.title\n\n    e.errors.each do |error|\n      puts 'Field: ' + error['field']\n      puts 'Message: ' + error['message']\n    end if e.errors\n\n    # Respond to the HTTP POST request by passing the errors\n    return render_with(500, e.message, e.errors)\n\n  end\n\n  private\n\n  def render_with(status_code, message, errors='none')\n\n    if errors == 'none'\n      status = 'success'\n      success = true\n    else\n      status = 'error'\n      success = false\n    end\n\n    render json: {\n      :status =&gt; status,\n      :success =&gt; success,\n      :message =&gt; message,\n      :errors =&gt; errors,\n      :params =&gt; params.as_json\n    },\n    status: status_code\n\n  end\n\nend\n</code></pre>\n\n<p>In an attempt to make it DRY, I have done this...</p>\n\n<pre><code>class MembersController &lt; ApplicationController\n\n  mailchimpExceptions = [\n    'DataException',\n    'APIKeyError',\n    'NotFound',\n    'Duplicate',\n    'MissingField',\n    'BadRequest',\n    'UnknownAttribute',\n    'MissingId'\n  ]\n\n  exceptions = Array.new\n\n  mailchimpExceptions.each do |exception|\n    exceptions &lt;&lt; \"Mailchimp::Exception::#{exception}\"\n  end\n\n  rescue_from *exceptions, with: :error\n\n  def error(e)\n\n    puts 'Message: ' + e.message\n    puts 'Type: ' + e.type\n    puts 'Title: ' + e.title\n\n    e.errors.each do |error|\n      puts 'Field: ' + error['field']\n      puts 'Message: ' + error['message']\n    end if e.errors\n\n    # Respond to the HTTP POST request by passing the errors\n    return render_with(500, e.message, e.errors)\n\n  end\n\n  private\n\n  def render_with(status_code, message, errors='none')\n\n    if errors == 'none'\n      status = 'success'\n      success = true\n    else\n      status = 'error'\n      success = false\n    end\n\n    render json: {\n      :status =&gt; status,\n      :success =&gt; success,\n      :message =&gt; message,\n      :errors =&gt; errors,\n      :params =&gt; params.as_json\n    },\n    status: status_code\n\n  end\n\nend\n</code></pre>\n\n<p>I am wondering if all the exceptions could by under one class, so that only one class is called like <code>rescue_from MailchimpExceptions, with: :error</code>. <a href=\"https://stackoverflow.com/a/30835861/1298155\">This answer by mgolubitsky</a> suggests it is possible, but I have no idea how to go about it.</p>\n\n<p>I am using gem 'mailchimp_api_v3'.</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "answers": [{"tags": [], "owner": {"reputation": 5535, "user_id": 7295772, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ZhWhR.jpg?s=128&g=1", "display_name": "Fabrizio Bertoglio", "link": "https://stackoverflow.com/users/7295772/fabrizio-bertoglio"}, "is_accepted": true, "score": 2, "last_activity_date": 1489574170, "last_edit_date": 1495541864, "creation_date": 1489573866, "answer_id": 42807119, "question_id": 42807037, "link": "https://stackoverflow.com/questions/42807037/rails-undefined-method-truncate-for-mainobject/42807119#42807119", "title": "Rails: Undefined method `truncate&#39; for main:Object", "body": "<p>I found the answer at the following discussion <a href=\"https://stackoverflow.com/questions/29055618/undefined-method-truncate-in-model#29055796\">Undefined method `truncate' in model</a></p>\n\n<p>I should have included the ActionView::Helpers::TextHelper in my rails console with the following command</p>\n\n<pre><code>include ActionView::Helpers::TextHelper \n</code></pre>\n\n<p>Then I could call the truncate method.</p>\n\n<pre><code>truncate(string, length: 17, separator: ' ')\n=&gt; \"this is a tesf...\"\n</code></pre>\n\n<p>My understanding now is that with the <code>include</code> command, the methods from <code>ActionView::Helpers::TextHelper</code> are now available in the console. <code>truncate</code> method can be executed on <code>text</code>. </p>\n"}, {"comments": [{"owner": {"reputation": 5535, "user_id": 7295772, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ZhWhR.jpg?s=128&g=1", "display_name": "Fabrizio Bertoglio", "link": "https://stackoverflow.com/users/7295772/fabrizio-bertoglio"}, "edited": false, "score": 0, "creation_date": 1489574647, "post_id": 42807388, "comment_id": 72727312, "body": "Thanks for the reply. I would be happy to accept your answer if you are willing to give me an explanation by editing your post of what is this <code>ActionView::Helpers::TextHelper</code> and what effectively happens when I include it in my rails console"}], "tags": [], "owner": {"reputation": 4527, "user_id": 5497690, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/577c8ad14fffb59cd619e43634c51dad?s=128&d=identicon&r=PG&f=1", "display_name": "puneet18", "link": "https://stackoverflow.com/users/5497690/puneet18"}, "is_accepted": false, "score": 0, "last_activity_date": 1489574888, "last_edit_date": 1489574888, "creation_date": 1489574491, "answer_id": 42807388, "question_id": 42807037, "link": "https://stackoverflow.com/questions/42807037/rails-undefined-method-truncate-for-mainobject/42807388#42807388", "title": "Rails: Undefined method `truncate&#39; for main:Object", "body": "<p>Follow below steps in rails console:</p>\n\n<pre><code>include ActionView::Helpers::TextHelper\ntruncate(string, length: 25, omission: '... (continued)')\n=&gt; \"Once upon ... (continued)\"\n</code></pre>\n\n<p>Here \"ActionView::Helpers::TextHelper\" is module provides a set of methods for formatting and transforming strings. </p>\n\n<p>Truncate method is in TextHelper Module so you have to include it in console.</p>\n"}, {"tags": [], "owner": {"reputation": 611, "user_id": 5609392, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/NrRx6.jpg?s=128&g=1", "display_name": "Ahsan", "link": "https://stackoverflow.com/users/5609392/ahsan"}, "is_accepted": false, "score": 3, "last_activity_date": 1574621366, "creation_date": 1574621366, "answer_id": 59021199, "question_id": 42807037, "link": "https://stackoverflow.com/questions/42807037/rails-undefined-method-truncate-for-mainobject/59021199#59021199", "title": "Rails: Undefined method `truncate&#39; for main:Object", "body": "<p>For rails 6 and ruby 2.6.*, there might have some problems and at-least I faced an error of undefined error in doing truncate of rich-text. So, ActionText and Truncate, I have found the solution, it might be useful =></p>\n\n<pre><code>&lt;%= truncate(strip_tags(blog.body.to_s), length: 450) %&gt;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 7944, "user_id": 10907864, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tGpcY.jpg?s=128&g=1", "display_name": "Promise Preston", "link": "https://stackoverflow.com/users/10907864/promise-preston"}, "is_accepted": false, "score": 1, "last_activity_date": 1598955719, "creation_date": 1598955719, "answer_id": 63685796, "question_id": 42807037, "link": "https://stackoverflow.com/questions/42807037/rails-undefined-method-truncate-for-mainobject/63685796#63685796", "title": "Rails: Undefined method `truncate&#39; for main:Object", "body": "<p>To add to <a href=\"https://stackoverflow.com/a/59021199/10907864\">Ahsan's answer</a></p>\n<p>When working on a <strong>Rails 6</strong> application, I tried adding calling the <code>truncate</code> method on a view that has an ActionText attribute.</p>\n<p>This is it, I had a Model called <strong>About</strong> with an attribute of <code>title</code> and an ActionText attribute of <code>body</code>.</p>\n<p>So when I try to call the <code>truncate</code> method on the ActionText attribute of <code>body</code> in my views using this:</p>\n<pre><code>&lt;%= about.body.truncate(30) %&gt;\n</code></pre>\n<p>I get the error:</p>\n<pre><code>undefined method `truncate' for #&lt;ActionText::RichText:0x00007fe5c4828488&gt;\n</code></pre>\n<p><strong>Here's how I fixed it</strong>:</p>\n<p>Following <a href=\"https://stackoverflow.com/a/59021199/10907864\">Ahsan's answer</a>, I simply modified the line of code to this:</p>\n<pre><code>&lt;%= truncate(strip_tags(about.body.to_s), length: 30) %&gt;\n</code></pre>\n<p>and it worked like charm.</p>\n<p>You can read up more on the truncate method in the Official Rails documentation: <a href=\"https://api.rubyonrails.org/classes/ActionView/Helpers/TextHelper.html#method-i-truncate\" rel=\"nofollow noreferrer\">ActionView Truncate</a></p>\n<p>That's all.</p>\n<p><strong>I hope this helps</strong></p>\n"}], "owner": {"reputation": 5535, "user_id": 7295772, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ZhWhR.jpg?s=128&g=1", "display_name": "Fabrizio Bertoglio", "link": "https://stackoverflow.com/users/7295772/fabrizio-bertoglio"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1338, "favorite_count": 0, "accepted_answer_id": 42807119, "answer_count": 4, "score": 2, "last_activity_date": 1598955719, "creation_date": 1489573706, "last_edit_date": 1598954862, "question_id": 42807037, "link": "https://stackoverflow.com/questions/42807037/rails-undefined-method-truncate-for-mainobject", "title": "Rails: Undefined method `truncate&#39; for main:Object", "body": "<p>I need to perform this in the rails console, following the instructions at <a href=\"http://api.rubyonrails.org/classes/ActionView/Helpers/TextHelper.html#method-i-truncate\" rel=\"nofollow noreferrer\">Rails API ActionView::Helpers::TextHelper</a>\nI already found a solution of my problem at the following <a href=\"https://stackoverflow.com/questions/29055618/undefined-method-truncate-in-model#29055796\">Stackoverflow Discussion</a>, but I though the question could be useful to be posted.\nIf you want me to delete it, just tell me. </p>\n\n<ol>\n<li><p>I wanted to create an <code>ActionView::Helpers::TextHelper</code> in my rails console</p>\n\n<pre><code>texthelper = ActionView::Helpers::TextHelper\n=&gt; ActionView::Helpers::TextHelper\n</code></pre></li>\n<li><p>I create a string</p>\n\n<pre><code>string = \"I want to call the truncate method\"\n=&gt; \"I want to call the truncate method\"\n</code></pre></li>\n<li><p>I want to call the truncate method, in my console on this string.</p>\n\n<pre><code>truncate(string, length: 25, omission: '... (continued)')\n=&gt; \"And they f... (continued)\"\n</code></pre></li>\n</ol>\n\n<p>When I input in the console:</p>\n\n<pre><code>truncate(\"Once upon a time in a world far far away\", length: 17, separator: ' ')\n</code></pre>\n\n<p>I receive </p>\n\n<pre><code>undefined method `truncate' for main:Object\n</code></pre>\n\n<p>The whole idea come from this post..\n<a href=\"https://stackoverflow.com/questions/29055618/undefined-method-truncate-in-model#29055796\">Undefined method `truncate&#39; in model</a></p>\n"}, {"tags": ["ruby-on-rails", "ruby", "paperclip"], "answers": [{"comments": [{"owner": {"reputation": 814, "user_id": 5479076, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/ebf84ecaf15f684b53f18b9313cd1325?s=128&d=identicon&r=PG&f=1", "display_name": "Orsay", "link": "https://stackoverflow.com/users/5479076/orsay"}, "edited": false, "score": 0, "creation_date": 1489574838, "post_id": 42807081, "comment_id": 72727437, "body": "Thank you for your answer. I tried it, see my main post edit"}, {"owner": {"reputation": 38307, "user_id": 2057388, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ceef8c04f66cd0e2bd360ef6abc14a81?s=128&d=identicon&r=PG", "display_name": "\u0417\u0435\u043b\u0451\u043d\u044b\u0439", "link": "https://stackoverflow.com/users/2057388/%d0%97%d0%b5%d0%bb%d1%91%d0%bd%d1%8b%d0%b9"}, "reply_to_user": {"reputation": 814, "user_id": 5479076, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/ebf84ecaf15f684b53f18b9313cd1325?s=128&d=identicon&r=PG&f=1", "display_name": "Orsay", "link": "https://stackoverflow.com/users/5479076/orsay"}, "edited": false, "score": 0, "creation_date": 1489575246, "post_id": 42807081, "comment_id": 72727742, "body": "@Orsay that&#39;s an another question, is it? Stackoverflow isn&#39;t your debugging tool, please try to understand the <i>problem</i>, google is your friend. Happy coding!"}], "tags": [], "owner": {"reputation": 38307, "user_id": 2057388, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ceef8c04f66cd0e2bd360ef6abc14a81?s=128&d=identicon&r=PG", "display_name": "\u0417\u0435\u043b\u0451\u043d\u044b\u0439", "link": "https://stackoverflow.com/users/2057388/%d0%97%d0%b5%d0%bb%d1%91%d0%bd%d1%8b%d0%b9"}, "is_accepted": true, "score": 0, "last_activity_date": 1489573793, "last_edit_date": 1495540825, "creation_date": 1489573793, "answer_id": 42807081, "question_id": 42806666, "link": "https://stackoverflow.com/questions/42806666/unpermitted-parameters-on-paperclip-rails-5/42807081#42807081", "title": "Unpermitted parameters on paperclip - Rails 5", "body": "<p>Check your logs: </p>\n\n<pre><code>\"design_files\"=&gt;[#&lt;ActionDispatch::...&gt;]\n</code></pre>\n\n<p><code>design_files</code> is an array(because <code>multiple</code> option is set to <code>true</code>). You should permit an array:</p>\n\n<pre><code> def cover_params\n   params.require(:cover).permit(design_files: [])                                                       \n end\n</code></pre>\n\n<p><a href=\"https://stackoverflow.com/questions/16549382/how-to-permit-an-array-with-strong-parameters\"><code>How to permit an array?</code></a></p>\n"}], "owner": {"reputation": 814, "user_id": 5479076, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/ebf84ecaf15f684b53f18b9313cd1325?s=128&d=identicon&r=PG&f=1", "display_name": "Orsay", "link": "https://stackoverflow.com/users/5479076/orsay"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 324, "favorite_count": 0, "accepted_answer_id": 42807081, "answer_count": 1, "score": 0, "last_activity_date": 1489575427, "creation_date": 1489572731, "last_edit_date": 1489575427, "question_id": 42806666, "link": "https://stackoverflow.com/questions/42806666/unpermitted-parameters-on-paperclip-rails-5", "title": "Unpermitted parameters on paperclip - Rails 5", "body": "<p>I tried to save uploaded images but my log send me :</p>\n\n<blockquote>\n  <blockquote>\n    <p>Unpermitted parameter: design_files</p>\n  </blockquote>\n</blockquote>\n\n<p>However this is the hash parameters my controller is sending back to me : </p>\n\n<pre><code>\"design_files\"=&gt;[#&lt;ActionDispatch::Http::UploadedFile:0x007fce350cbcb8 @tempfile=#&lt;Tempfile:/var/folders/0w/pznf2h6j0q9gqcbcthg1kgm40000gn/T/RackMultipart20170315-5734-26bwb.png&gt;, @original_filename=\"ebf84ecaf15f684b53f18b9313cd1325.png\", @content_type=\"image/png\", @headers=\"Content-Disposition: form-data; name=\\\"cover[design_files][]\\\"; filename=\\\"ebf84ecaf15f684b53f18b9313cd1325.png\\\"\\r\\nContent-Type: image/png\\r\\n\"&gt;]\n</code></pre>\n\n<p>So the params <code>design_files</code> does exist, but the results is an array, may be the problem come from there.</p>\n\n<p>I let you see the rest of my code :</p>\n\n<p><strong>covers_controller.rb</strong></p>\n\n<pre><code>class CoversController &lt; ApplicationController\n  before_action :set_cover, only: [:show, :edit, :update, :destroy]\n\n  def new\n    @book = set_book\n    @cover = @book.build_cover\n  end\n\n  def create\n    @book = set_book\n    @cover = @book.build_cover(cover_params)\n    if @cover.save!\n      redirect_to new_command_path(commandable_id: @cover, commandable_type: @cover.class)\n    else\n      render :new\n    end\n  end\n\n  ....\n\n   private\n  ...\n\n  def cover_params\n    params.require(:cover).permit(:design_files) \n                                   # according to other solutions find on stack I tried : design_files_attributes: {:design_files}, also tried {design_files: :preview}                                \n  end\nend\n</code></pre>\n\n<p><strong>cover.rb</strong></p>\n\n<pre><code>class Cover &lt; ApplicationRecord\n  validates_presence_of :design_files\n  has_attached_file :design_files\n  do_not_validate_attachment_file_type :design_files\nend\n</code></pre>\n\n<p><strong>covers/_form</strong></p>\n\n<pre><code>= form_for cover, html: { multipart: true } do |f|\n  - if cover.errors.any?\n    #error_explanation\n      h2\n        = pluralize(cover.errors.count, \"error\")\n        |  prohibited this cover from being saved:\n      ul\n        - cover.errors.full_messages.each do |message|\n          li\n            = message\n\n  = f.label :design_files\n  = f.file_field :design_files, multiple: true\n\n  .actions\n    = f.submit\n</code></pre>\n"}, {"tags": ["json", "ruby", "rest", "api"], "comments": [{"owner": {"reputation": 16757, "user_id": 5654404, "user_type": "registered", "accept_rate": 23, "profile_image": "https://www.gravatar.com/avatar/746f3e19ba3d2c092e951129a114391a?s=128&d=identicon&r=PG&f=1", "display_name": "Sravan", "link": "https://stackoverflow.com/users/5654404/sravan"}, "edited": false, "score": 1, "creation_date": 1489573500, "post_id": 42806558, "comment_id": 72726501, "body": "try content type <code>application&#47;json</code>,  <code>req = Net::HTTP::Post.new(uri.path, &#39;Content-Type&#39; =&gt; &#39;application&#47;json&#39;)</code>"}, {"owner": {"reputation": 4544, "user_id": 1010832, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/uoonx.png?s=128&g=1", "display_name": "salman khalid", "link": "https://stackoverflow.com/users/1010832/salman-khalid"}, "reply_to_user": {"reputation": 16757, "user_id": 5654404, "user_type": "registered", "accept_rate": 23, "profile_image": "https://www.gravatar.com/avatar/746f3e19ba3d2c092e951129a114391a?s=128&d=identicon&r=PG&f=1", "display_name": "Sravan", "link": "https://stackoverflow.com/users/5654404/sravan"}, "edited": false, "score": 1, "creation_date": 1489576929, "post_id": 42806558, "comment_id": 72728971, "body": "I did but same result."}, {"owner": {"reputation": 2504, "user_id": 3729369, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/FYV4M.png?s=128&g=1", "display_name": "simonwo", "link": "https://stackoverflow.com/users/3729369/simonwo"}, "edited": false, "score": 0, "creation_date": 1489656872, "post_id": 42806558, "comment_id": 72770081, "body": "It must be a headers issue. Post the headers from both requests."}], "owner": {"reputation": 4544, "user_id": 1010832, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/uoonx.png?s=128&g=1", "display_name": "salman khalid", "link": "https://stackoverflow.com/users/1010832/salman-khalid"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 911, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1489572886, "creation_date": 1489572440, "last_edit_date": 1489572886, "question_id": 42806558, "link": "https://stackoverflow.com/questions/42806558/getting-html-response-instead-of-json-while-calling-rest-api-via-ruby", "title": "Getting HTML response instead of Json while calling rest API via Ruby", "body": "<p>I am calling API via Ruby but it give me HTML response instead of JSON. When I call the same api via POSTMAN it give correct json response. My code and postman screen shoot has attached. </p>\n\n<pre><code>require 'net/https'\nrequire 'json'\n\nuri = URI('https://www.mobifinplus.com/api.php')\nhttp = Net::HTTP.new(uri.host, uri.port)\nhttp.use_ssl = true\nhttp.verify_mode = OpenSSL::SSL::VERIFY_NONE\nreq = Net::HTTP::Post.new(uri.path, 'Content-Type' =&gt; 'text/json')\nreq.body = '\n{\"request_type\" : \"registration\", \"first_name\" : \"test\", \"last_name\" : \"test\", \"country_code_mobile\" : \"+254\", \"mobile_no\" : \"1234567\", \"id_number\" : \"1234\", \"username\" : \"weratest\", \"password\" : \"test\", \"gender\" : \"male\", \"pinnumber\" : \"1234\"}'\n\n  res = http.request(req)\n    puts \"response #{res.message}\"\n    puts \"response #{res.body}\"\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/jHrRb.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/jHrRb.png\" alt=\"enter image description here\"></a></p>\n"}, {"tags": ["ruby-on-rails", "ruby", "rest", "api", "wicked-pdf"], "comments": [{"owner": {"reputation": 1528, "user_id": 7573791, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0e5e5cf864fb33229ca56750a51d6674?s=128&d=identicon&r=PG&f=1", "display_name": "Sajin", "link": "https://stackoverflow.com/users/7573791/sajin"}, "edited": false, "score": 0, "creation_date": 1489574871, "post_id": 42806043, "comment_id": 72727465, "body": "Do you want to force download the pdf when that get request is called?"}, {"owner": {"reputation": 1528, "user_id": 7573791, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0e5e5cf864fb33229ca56750a51d6674?s=128&d=identicon&r=PG&f=1", "display_name": "Sajin", "link": "https://stackoverflow.com/users/7573791/sajin"}, "edited": false, "score": 0, "creation_date": 1489575164, "post_id": 42806043, "comment_id": 72727673, "body": "take a look at send_data - <a href=\"http://apidock.com/rails/ActionController/Streaming/send_data\" rel=\"nofollow noreferrer\">apidock.com/rails/ActionController/Streaming/send_data</a>. Is this what you are looking for?"}], "answers": [{"comments": [{"owner": {"reputation": 251, "user_id": 3572906, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/9fb3e8ac9d7719005c164beccfcba216?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew_tainton", "link": "https://stackoverflow.com/users/3572906/andrew-tainton"}, "edited": false, "score": 0, "creation_date": 1489580964, "post_id": 42806523, "comment_id": 72731700, "body": "This is the easiest but we don&#39;t want to save it rather generate when called"}, {"owner": {"reputation": 4527, "user_id": 5497690, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/577c8ad14fffb59cd619e43634c51dad?s=128&d=identicon&r=PG&f=1", "display_name": "puneet18", "link": "https://stackoverflow.com/users/5497690/puneet18"}, "reply_to_user": {"reputation": 251, "user_id": 3572906, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/9fb3e8ac9d7719005c164beccfcba216?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew_tainton", "link": "https://stackoverflow.com/users/3572906/andrew-tainton"}, "edited": false, "score": 0, "creation_date": 1489581762, "post_id": 42806523, "comment_id": 72732292, "body": "create route, call controller action and generate pdf using wickedpdf and pass that url or route in api."}], "tags": [], "owner": {"reputation": 4527, "user_id": 5497690, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/577c8ad14fffb59cd619e43634c51dad?s=128&d=identicon&r=PG&f=1", "display_name": "puneet18", "link": "https://stackoverflow.com/users/5497690/puneet18"}, "is_accepted": false, "score": 0, "last_activity_date": 1489572366, "creation_date": 1489572366, "answer_id": 42806523, "question_id": 42806043, "link": "https://stackoverflow.com/questions/42806043/how-to-return-a-pdf-file-from-a-rest-api/42806523#42806523", "title": "How to return a pdf file from a rest api?", "body": "<p>Upload pdf to Amazon s3 and generate link then get pdf link in apis.</p>\n"}, {"tags": [], "owner": {"reputation": 764, "user_id": 3941583, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e8491782c07722842e31ab6fd3c68c12?s=128&d=identicon&r=PG", "display_name": "Peter Toth - Toma", "link": "https://stackoverflow.com/users/3941583/peter-toth-toma"}, "is_accepted": false, "score": 4, "last_activity_date": 1489582283, "creation_date": 1489582283, "answer_id": 42810337, "question_id": 42806043, "link": "https://stackoverflow.com/questions/42806043/how-to-return-a-pdf-file-from-a-rest-api/42810337#42810337", "title": "How to return a pdf file from a rest api?", "body": "<p>One way is to create a PDF file in memory and stream it to the client. I prefer this way, maybe later you will have to send PDF files via email, or just save them to some backup disk etc...</p>\n\n<pre><code>def get_pdf\n  pdf = WickedPdf.new.pdf_from_string('&lt;h1&gt;Hello There!&lt;/h1&gt;')\n  send_data pdf, filename: 'file_name.pdf'\nend\n</code></pre>\n\n<p>You can put the PDF generation to a different service and just call it in the controller. This provides isolation and you can test it separately.</p>\n\n<p>Also you can debug the endpoint response with <a href=\"https://httpie.org/\" rel=\"nofollow noreferrer\">HTTPie</a> <code>http get http://localhost:3000/invoices/1/get_pdf</code></p>\n\n<p>Rails will set all the necessary HTTP response headers:</p>\n\n<pre><code>Content-Disposition: attachment; filename=\"file_name.pdf\"\nContent-Length: 5995\nContent-Transfer-Encoding: binary\nContent-Type: application/pdf\n</code></pre>\n\n<p>So when the user clicks on a link that points to the endpoint, most probably the download dialog will pop up because of the <code>Content-Disposition: attachment;</code> header</p>\n\n<p>Other solution is to render the get_pdf.html as PDF and send back to the client:</p>\n\n<pre><code>def get_pdf\n  render pdf: \"file_name\"\nend\n</code></pre>\n\n<p>But in this case the <code>Content-Disposition</code> header will be <code>inline</code>, which means the browser will open the pdf (if it can read PDF format) instead of offering to download it.</p>\n"}, {"tags": [], "owner": {"reputation": 866, "user_id": 7487946, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e24d811f4b42037c0a5e6d00f84b9f74?s=128&d=identicon&r=PG&f=1", "display_name": "Gustavo Topete", "link": "https://stackoverflow.com/users/7487946/gustavo-topete"}, "is_accepted": false, "score": 0, "last_activity_date": 1495137252, "creation_date": 1495137252, "answer_id": 44056706, "question_id": 42806043, "link": "https://stackoverflow.com/questions/42806043/how-to-return-a-pdf-file-from-a-rest-api/44056706#44056706", "title": "How to return a pdf file from a rest api?", "body": "<p>I don't know if you still need this, but for anyone in the future I found a nice solution:</p>\n\n<pre><code>pdf = WickedPdf.new.pdf_from_string(render_to_string \"entradas/entradaspdf.pdf.erb\")\nsend_data pdf, filename: \"bergha.pdf\", disposition: \"inline\"\n</code></pre>\n\n<p>I'm loading my pdf-html-view based template through \"render_to_string\" ruby method which returns the view contents in string. Then WickedPdf converts it to a pdf binary, and finally save that to \"pdf\" var.</p>\n\n<p>Finally instead of \"render\" I use the \"send_data\" method, where first parameter is the output data (my pdf var), second is the filename of the output data, and third (optional) is to change Content-Disposition header to tell browser whether to load the file (inline) or just download it (attachment).<br>\nHope it works, it does just fine for me</p>\n"}], "owner": {"reputation": 251, "user_id": 3572906, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/9fb3e8ac9d7719005c164beccfcba216?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew_tainton", "link": "https://stackoverflow.com/users/3572906/andrew-tainton"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 13174, "favorite_count": 1, "answer_count": 3, "score": 5, "last_activity_date": 1495137252, "creation_date": 1489571055, "last_edit_date": 1489581387, "question_id": 42806043, "link": "https://stackoverflow.com/questions/42806043/how-to-return-a-pdf-file-from-a-rest-api", "title": "How to return a pdf file from a rest api?", "body": "<p>I have setup a rest API inside a ruby on rails application, I now have a requirement to generate a PDF and return this PDF from a get request. I am looking for some advice on how to implement this feature. </p>\n\n<p>Some of the requirements that I have are as follows: I can't save the file and give the end user a link to the file because the data in the file can be updated at any time. I am using the application as microservice so there isn't a front end that I can use to display the file. </p>\n\n<p>So here is my thinking I would love some advice on how to implement this feature.</p>\n\n<p>I would like to make a get request to a specific endpoint in the application. I expect a PDF file to be returned which I can then display to the end user. </p>\n\n<p>I am currently using WickedPdf gem to generate a temporary PDF file, but I am really struggling with how the response should look. </p>\n\n<p>Any advice would be much appreciated.</p>\n"}, {"tags": ["mysql", "ruby-on-rails", "ruby", "elasticsearch", "searchkick"], "answers": [{"tags": [], "owner": {"reputation": 2294, "user_id": 2245697, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/931e42fa59a041551b7f63e703ea909a?s=128&d=identicon&r=PG&f=1", "display_name": "Tan", "link": "https://stackoverflow.com/users/2245697/tan"}, "is_accepted": false, "score": 0, "last_activity_date": 1489586607, "creation_date": 1489586607, "answer_id": 42812045, "question_id": 42806027, "link": "https://stackoverflow.com/questions/42806027/searchkick-what-is-the-syntax-to-query-with-datetime/42812045#42812045", "title": "Searchkick what is the syntax to query with DateTime", "body": "<p>The <code>distribution_ended_at</code> might equal to <code>nil</code>. Try:</p>\n\n<pre><code>search_conditions = {\n  created_at: { lt: params[:distribution_ended_at] }\n}\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 7713801, "user_type": "registered", "profile_image": "https://graph.facebook.com/10154071023100834/picture?type=large", "display_name": "clemldy", "link": "https://stackoverflow.com/users/7713801/clemldy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 349, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1489586607, "creation_date": 1489570992, "last_edit_date": 1592644375, "question_id": 42806027, "link": "https://stackoverflow.com/questions/42806027/searchkick-what-is-the-syntax-to-query-with-datetime", "title": "Searchkick what is the syntax to query with DateTime", "body": "<p>I'm using the <a href=\"https://github.com/ankane/searchkick\" rel=\"nofollow noreferrer\">gem searchkick</a> and I would like to do a query like this: <code>Product.where(&quot;products.created_at  &lt; products.distribution_ended_at&quot;)</code> in the search method of searchkick</p>\n<p>Here is my model Product</p>\n<pre><code>class Product &lt; ActiveRecord::Base\n\nsearchkick word_start: [:name]\n\ndef search_data\n    {\n            name:           name,\n            content:        content,\n            amount:         amount,\n            created_at:     created_at,\n            distribution_ended_at: distribution_ended_at\n    }\n\n\n  end\n\n\nend\n</code></pre>\n<p>Here is my products controller</p>\n<pre><code>    class ProductsController &lt; ApplicationController\n    \n        def index\n    \n            @products = Product.all\n    \n            search_conditions = {\n                created_at: {lt: distribution_ended_at}\n              }\n    \n            sort_conditions =[]\n    \n        aggregations = {}\n    \n        @product  = Product.new\n        @products = Product.search(&quot;*&quot;, aggs: aggregations, where: search_conditions,\n          page: params[:page], per_page: 20, match: :word_start, order: sort_conditions)\n\n        end\nend\n</code></pre>\n<p>But the thing is, that doesn't find <code>distribution_ended_at</code></p>\n<p>Anyone has an idea how to write this query in the search conditions of Searchkick?</p>\n<p>Thanks</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "action", "activeadmin", "custom-pages"], "answers": [{"comments": [{"owner": {"reputation": 141, "user_id": 7539043, "user_type": "registered", "accept_rate": 55, "profile_image": "https://lh5.googleusercontent.com/-nJMOzH1h8sg/AAAAAAAAAAI/AAAAAAAAAWI/5O0YCdDrEmE/photo.jpg?sz=128", "display_name": "bjkpriyanka", "link": "https://stackoverflow.com/users/7539043/bjkpriyanka"}, "edited": false, "score": 0, "creation_date": 1489569442, "post_id": 42805342, "comment_id": 72723624, "body": "thank you. how to create the custom page and also uploading an xls sheet. If you can give some example it will be very helpful. I want to know how to do the whole scenario as i am new to ROR"}, {"owner": {"reputation": 141, "user_id": 7539043, "user_type": "registered", "accept_rate": 55, "profile_image": "https://lh5.googleusercontent.com/-nJMOzH1h8sg/AAAAAAAAAAI/AAAAAAAAAWI/5O0YCdDrEmE/photo.jpg?sz=128", "display_name": "bjkpriyanka", "link": "https://stackoverflow.com/users/7539043/bjkpriyanka"}, "edited": false, "score": 0, "creation_date": 1489654467, "post_id": 42805342, "comment_id": 72768479, "body": "i helped me to open a new page"}], "tags": [], "owner": {"reputation": 364, "user_id": 7414029, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/5HNys.jpg?s=128&g=1", "display_name": "Mihir Kumar Thakur", "link": "https://stackoverflow.com/users/7414029/mihir-kumar-thakur"}, "is_accepted": true, "score": 1, "last_activity_date": 1489569022, "creation_date": 1489569022, "answer_id": 42805342, "question_id": 42805089, "link": "https://stackoverflow.com/questions/42805089/active-admin-open-a-custom-page-after-clicking-on-an-action-item-link/42805342#42805342", "title": "active admin: open a custom page after clicking on an action_item link", "body": "<pre><code>action_item only: :edit do\n  link_to 'Upload Scores', upload_score_path(id: section)\nend\n</code></pre>\n\n<p>change <code>upload_score_path</code> with your routes</p>\n"}], "owner": {"reputation": 141, "user_id": 7539043, "user_type": "registered", "accept_rate": 55, "profile_image": "https://lh5.googleusercontent.com/-nJMOzH1h8sg/AAAAAAAAAAI/AAAAAAAAAWI/5O0YCdDrEmE/photo.jpg?sz=128", "display_name": "bjkpriyanka", "link": "https://stackoverflow.com/users/7539043/bjkpriyanka"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 526, "favorite_count": 0, "accepted_answer_id": 42805342, "answer_count": 1, "score": 0, "last_activity_date": 1489569022, "creation_date": 1489568327, "question_id": 42805089, "link": "https://stackoverflow.com/questions/42805089/active-admin-open-a-custom-page-after-clicking-on-an-action-item-link", "title": "active admin: open a custom page after clicking on an action_item link", "body": "<p>I have resource called \"section\".In edit page of section i have a action item called \"upload scores\".On click on \"upload scores\" i want to open a new page which should get the section id as parameter. </p>\n\n<pre><code>action_item only: :edit do\n  link_to 'Upload Scores' {:id =&gt; section }\nend\n</code></pre>\n\n<p>This page should contain a form with a \"upload xls sheet\" button and submit button.On click on \"upload xls sheet\" button I should be able to upload the sheet.on \"submit\" i should read it and update the database.</p>\n\n<p>Thanks in Advance</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4", "authorization", "pundit"], "comments": [{"owner": {"reputation": 2068, "user_id": 680764, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/8f6321deeff5716935b3badbbba2aca9?s=128&d=identicon&r=PG", "display_name": "Scott", "link": "https://stackoverflow.com/users/680764/scott"}, "edited": false, "score": 0, "creation_date": 1492784534, "post_id": 42804491, "comment_id": 74142287, "body": "What do your associations/tables look like? Can a team have multiple admin users or just one?"}, {"owner": {"reputation": 610, "user_id": 4057576, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/e5qu0.jpg?s=128&g=1", "display_name": "Charles Skariah", "link": "https://stackoverflow.com/users/4057576/charles-skariah"}, "reply_to_user": {"reputation": 2068, "user_id": 680764, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/8f6321deeff5716935b3badbbba2aca9?s=128&d=identicon&r=PG", "display_name": "Scott", "link": "https://stackoverflow.com/users/680764/scott"}, "edited": false, "score": 0, "creation_date": 1492870367, "post_id": 42804491, "comment_id": 74171415, "body": "Thanks for reaching out.I somehow solved the problem."}], "answers": [{"comments": [{"owner": {"reputation": 610, "user_id": 4057576, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/e5qu0.jpg?s=128&g=1", "display_name": "Charles Skariah", "link": "https://stackoverflow.com/users/4057576/charles-skariah"}, "edited": false, "score": 0, "creation_date": 1489576288, "post_id": 42806563, "comment_id": 72728533, "body": "In my case I have mutiple teams and i want to authorize whether the current_user is admin of that team.Admin here refers to specific team.Not a general role.I hope you understand"}], "tags": [], "owner": {"reputation": 782, "user_id": 2265937, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6a62134961838eb9d27490b10cc11bd7?s=128&d=identicon&r=PG", "display_name": "Dias", "link": "https://stackoverflow.com/users/2265937/dias"}, "is_accepted": false, "score": 0, "last_activity_date": 1489572453, "creation_date": 1489572453, "answer_id": 42806563, "question_id": 42804491, "link": "https://stackoverflow.com/questions/42804491/mutiple-objects-authorization-using-pundit-in-one-action/42806563#42806563", "title": "Mutiple Objects authorization using pundit in one action", "body": "<p>In the policy class you wrote add method to implement the logic</p>\n\n<p>eg: </p>\n\n<pre><code>class PostPolicy\n  -------\n    other methods and declaration\n  -------\n\n  def initialize(current_user, user)\n    @current_user = current_user\n    @user = user\n  end\n\n  def remove_user?\n    @current_user.admin? and @current_user != @user\n  end\nend\n</code></pre>\n"}], "owner": {"reputation": 610, "user_id": 4057576, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/e5qu0.jpg?s=128&g=1", "display_name": "Charles Skariah", "link": "https://stackoverflow.com/users/4057576/charles-skariah"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 411, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1489572453, "creation_date": 1489566454, "question_id": 42804491, "link": "https://stackoverflow.com/questions/42804491/mutiple-objects-authorization-using-pundit-in-one-action", "title": "Mutiple Objects authorization using pundit in one action", "body": "<p>In the code below i want authorize team and user.</p>\n\n<ol>\n<li>By authorizing the team , i want to make sure the current_user is the admin of team</li>\n<li>Second authorize is to make sure that the user being removed is not the admin(user) of team.</li>\n</ol>\n\n<p>I assume you have basic knowledge of Pundit, a rails gem.\nIs there a better way for doing the same.?How this code can be improved?</p>\n\n<p><code>def remove_user\n   team = Team.find(params[:id])\n   user = User.find(params[:user_id])\n   authorize team\n   authorize user\n   ....\n end</code></p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4", "eager-loading"], "answers": [{"tags": [], "owner": {"reputation": 27144, "user_id": 3857758, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/58c4295826435f049b7fc32b98c240f9?s=128&d=identicon&r=PG&f=1", "display_name": "Ursus", "link": "https://stackoverflow.com/users/3857758/ursus"}, "is_accepted": true, "score": 2, "last_activity_date": 1489568187, "creation_date": 1489568187, "answer_id": 42805046, "question_id": 42804195, "link": "https://stackoverflow.com/questions/42804195/how-to-dry-up-associations-in-includes/42805046#42805046", "title": "How to DRY up associations in includes?", "body": "<p>I Never tried to make that DRY. Anyway, I'll try.</p>\n\n<pre><code>def appointments_for_includes\n  Hash[appointments: [:customer, templates: :page]]\nend\n\ndef associations_for_includes\n  Hash[user: :contact, bundles: appointments_for_includes].merge(appointments_for_includes)\nend\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1508, "user_id": 1468122, "user_type": "registered", "accept_rate": 41, "profile_image": "https://i.stack.imgur.com/QKC1Z.jpg?s=128&g=1", "display_name": "Ahmad hamza", "link": "https://stackoverflow.com/users/1468122/ahmad-hamza"}, "edited": false, "score": 0, "creation_date": 1489570946, "post_id": 42805456, "comment_id": 72724648, "body": "Yes but in case if i want to use <code>appointments: [:customer, templates: :page]</code> for some other scopes then it would be necessary to dry it up."}, {"owner": {"reputation": 7638, "user_id": 1014251, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/1c4500c91af486c885af8bb84eefd063?s=128&d=identicon&r=PG", "display_name": "ReggieB", "link": "https://stackoverflow.com/users/1014251/reggieb"}, "reply_to_user": {"reputation": 1508, "user_id": 1468122, "user_type": "registered", "accept_rate": 41, "profile_image": "https://i.stack.imgur.com/QKC1Z.jpg?s=128&g=1", "display_name": "Ahmad hamza", "link": "https://stackoverflow.com/users/1468122/ahmad-hamza"}, "edited": false, "score": 0, "creation_date": 1489577071, "post_id": 42805456, "comment_id": 72729051, "body": "Yes - that&#39;s true - but not given in your example."}], "tags": [], "owner": {"reputation": 7638, "user_id": 1014251, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/1c4500c91af486c885af8bb84eefd063?s=128&d=identicon&r=PG", "display_name": "ReggieB", "link": "https://stackoverflow.com/users/1014251/reggieb"}, "is_accepted": false, "score": 0, "last_activity_date": 1489569410, "creation_date": 1489569410, "answer_id": 42805456, "question_id": 42804195, "link": "https://stackoverflow.com/questions/42804195/how-to-dry-up-associations-in-includes/42805456#42805456", "title": "How to DRY up associations in includes?", "body": "<p>I think in DRYing that - you'll make it less clear. For the sake of the repetition of <code>appointments: [:customer, templates: :page]</code>, the cost of DRYing this is outweighed by the clarity of the original</p>\n"}], "owner": {"reputation": 1508, "user_id": 1468122, "user_type": "registered", "accept_rate": 41, "profile_image": "https://i.stack.imgur.com/QKC1Z.jpg?s=128&g=1", "display_name": "Ahmad hamza", "link": "https://stackoverflow.com/users/1468122/ahmad-hamza"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 85, "favorite_count": 2, "accepted_answer_id": 42805046, "answer_count": 2, "score": 0, "last_activity_date": 1489569410, "creation_date": 1489565421, "question_id": 42804195, "link": "https://stackoverflow.com/questions/42804195/how-to-dry-up-associations-in-includes", "title": "How to DRY up associations in includes?", "body": "<p>I have a <code>scope</code> method in which i'm using <code>includes</code> to eager load all the necessary associations. But i'm not sure how to DRY up the associations used in the <code>includes</code>?</p>\n\n<p>Here is the <code>scope</code> defined in the model:</p>\n\n<pre><code>scope :with_associates, (lambda do\n    includes(user: :contact,\n             appointments: [:customer, templates: :page],\n             bundles: appointments: [:customer, templates: :page]])\n  end)\n</code></pre>\n\n<p>How to DRY up this scope?</p>\n"}, {"tags": ["ruby", "oracle", "sequel"], "answers": [{"tags": [], "owner": {"reputation": 11331, "user_id": 132053, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f183bcc4176b308c9edabe79299e448f?s=128&d=identicon&r=PG", "display_name": "Jeremy Evans", "link": "https://stackoverflow.com/users/132053/jeremy-evans"}, "is_accepted": true, "score": 0, "last_activity_date": 1489595342, "creation_date": 1489595342, "answer_id": 42815538, "question_id": 42804123, "link": "https://stackoverflow.com/questions/42804123/issue-regarding-the-connection-between-ruby-and-oracle-database-using-sequel-gem/42815538#42815538", "title": "Issue regarding the connection between ruby and oracle database using sequel gem", "body": "<p>The LoadError indicates you don't have the oci8 gem installed.  You can probably fix it using: <code>gem install oci8</code></p>\n"}], "owner": {"reputation": 273, "user_id": 6165160, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/0f16ac1aabf77b83e85e72ecaf6a2805?s=128&d=identicon&r=PG&f=1", "display_name": "Abhradip", "link": "https://stackoverflow.com/users/6165160/abhradip"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 317, "favorite_count": 0, "accepted_answer_id": 42815538, "answer_count": 1, "score": 0, "last_activity_date": 1489595342, "creation_date": 1489565200, "last_edit_date": 1489569814, "question_id": 42804123, "link": "https://stackoverflow.com/questions/42804123/issue-regarding-the-connection-between-ruby-and-oracle-database-using-sequel-gem", "title": "Issue regarding the connection between ruby and oracle database using sequel gem", "body": "<p>I am using sequel gem to connect and access my oracle database using a ruby program.</p>\n\n<p>I have installed sequel gem and oracle instant client both. I have also installed ruby-oci8 gem. But still getting this error as follows:-</p>\n\n<p>Loaderror: cannot load such file -- oci8 (Sequel::AdapterNotFound)</p>\n\n<p>My code is :-</p>\n\n<pre><code>require 'sequel'\nDB = Sequel.connect('oracle://localhost/XE', :user=&gt;'SYSTEM', :password=&gt;'tiger')\n\nDB['select  NAME from EMPLOYEE'].each do |row|\n  puts row\nend\n</code></pre>\n\n<p>Please help me to fix this. I don't even know that what would be the right form of this line </p>\n\n<pre><code>Sequel.connect('oracle://localhost/XE', :user=&gt;'SYSTEM', :password=&gt;'tiger')\n</code></pre>\n\n<p>My database name is XE, user is SYSTEM and password is tiger.</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 1528, "user_id": 7573791, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0e5e5cf864fb33229ca56750a51d6674?s=128&d=identicon&r=PG&f=1", "display_name": "Sajin", "link": "https://stackoverflow.com/users/7573791/sajin"}, "edited": false, "score": 1, "creation_date": 1489564978, "post_id": 42803846, "comment_id": 72721042, "body": "Can you share the relationships between your models"}, {"owner": {"reputation": 147, "user_id": 3116492, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/ddPIz.png?s=128&g=1", "display_name": "Sameer A.", "link": "https://stackoverflow.com/users/3116492/sameer-a"}, "reply_to_user": {"reputation": 1528, "user_id": 7573791, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0e5e5cf864fb33229ca56750a51d6674?s=128&d=identicon&r=PG&f=1", "display_name": "Sajin", "link": "https://stackoverflow.com/users/7573791/sajin"}, "edited": false, "score": 0, "creation_date": 1489566386, "post_id": 42803846, "comment_id": 72721812, "body": "User has many Revisions and Procedures Procedure has many Revisions, Procedure belongs to User and Revision belongs to User"}], "answers": [{"comments": [{"owner": {"reputation": 147, "user_id": 3116492, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/ddPIz.png?s=128&g=1", "display_name": "Sameer A.", "link": "https://stackoverflow.com/users/3116492/sameer-a"}, "edited": false, "score": 0, "creation_date": 1489566518, "post_id": 42804063, "comment_id": 72721881, "body": "So you are suggesting that I create a new Revision in the controller instead of my current approach?"}, {"owner": {"reputation": 364, "user_id": 7414029, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/5HNys.jpg?s=128&g=1", "display_name": "Mihir Kumar Thakur", "link": "https://stackoverflow.com/users/7414029/mihir-kumar-thakur"}, "reply_to_user": {"reputation": 147, "user_id": 3116492, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/ddPIz.png?s=128&g=1", "display_name": "Sameer A.", "link": "https://stackoverflow.com/users/3116492/sameer-a"}, "edited": false, "score": 0, "creation_date": 1489566790, "post_id": 42804063, "comment_id": 72722053, "body": "Nope, I am just adding a attribute &#39;revision_number` in procedure object then you can access <code>revision_number</code> in <code>after_create</code>  block in model. Use debugger in <code>after_create</code> block and see if you are getting <code>revision_number</code> . Just like attribute setter method"}, {"owner": {"reputation": 147, "user_id": 3116492, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/ddPIz.png?s=128&g=1", "display_name": "Sameer A.", "link": "https://stackoverflow.com/users/3116492/sameer-a"}, "edited": false, "score": 0, "creation_date": 1489566877, "post_id": 42804063, "comment_id": 72722109, "body": "You said I am violating the MVC architecture. So, do you suggest that I create a new Revision in the controller instead of my current approach?"}, {"owner": {"reputation": 364, "user_id": 7414029, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/5HNys.jpg?s=128&g=1", "display_name": "Mihir Kumar Thakur", "link": "https://stackoverflow.com/users/7414029/mihir-kumar-thakur"}, "reply_to_user": {"reputation": 147, "user_id": 3116492, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/ddPIz.png?s=128&g=1", "display_name": "Sameer A.", "link": "https://stackoverflow.com/users/3116492/sameer-a"}, "edited": false, "score": 0, "creation_date": 1489566978, "post_id": 42804063, "comment_id": 72722172, "body": "May be .. It is not advisable to pass parameter from controller to model"}], "tags": [], "owner": {"reputation": 364, "user_id": 7414029, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/5HNys.jpg?s=128&g=1", "display_name": "Mihir Kumar Thakur", "link": "https://stackoverflow.com/users/7414029/mihir-kumar-thakur"}, "is_accepted": false, "score": 1, "last_activity_date": 1489566015, "last_edit_date": 1489566015, "creation_date": 1489565028, "answer_id": 42804063, "question_id": 42803846, "link": "https://stackoverflow.com/questions/42803846/ruby-on-rails-pass-request-params-in-controller-to-models-after-create-event/42804063#42804063", "title": "Ruby on Rails: Pass request params in controller to model&#39;s after_create event", "body": "<p>you are trying to violate  <code>MVC architecture</code> and <code>Single Responsiblity Principle</code>. <code>Controller</code> is responsible for <code>handling HTTP request</code> and <code>Model</code> is responsible for <code>interacting with database.</code></p>\n\n<p>In any case you commited to violate rules :-</p>\n\n<pre><code>class Procedure &lt; ActiveRecord::Base\n  def add_revision_number(number)\n    self.revision_number = number\n  end\nend\n\nclass ProceduresController &lt; ApplicationController\n  def create\n    ...\n    @procedure.add_revision_number(params[:revision_number])\n    ...\n  end\nend\n</code></pre>\n\n<p>now access <code>revision_number</code> in model</p>\n\n<p>I prefer not to pass controller <code>request</code> object directly. It Isolates model from current request.</p>\n"}, {"tags": [], "owner": {"reputation": 4527, "user_id": 5497690, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/577c8ad14fffb59cd619e43634c51dad?s=128&d=identicon&r=PG&f=1", "display_name": "puneet18", "link": "https://stackoverflow.com/users/5497690/puneet18"}, "is_accepted": false, "score": 1, "last_activity_date": 1489573486, "creation_date": 1489573486, "answer_id": 42806953, "question_id": 42803846, "link": "https://stackoverflow.com/questions/42803846/ruby-on-rails-pass-request-params-in-controller-to-models-after-create-event/42806953#42806953", "title": "Ruby on Rails: Pass request params in controller to model&#39;s after_create event", "body": "<h1>app/models/procedure.rb</h1>\n\n<pre><code>attr_accessor :revision_no\n\nafter_create do |procedure|\n    procedure.revisions.create(revision_number: self.revision_no)\nend\n</code></pre>\n\n<p>Now you can pass value in revision_no.</p>\n"}], "owner": {"reputation": 147, "user_id": 3116492, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/ddPIz.png?s=128&g=1", "display_name": "Sameer A.", "link": "https://stackoverflow.com/users/3116492/sameer-a"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1350, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1489573486, "creation_date": 1489564241, "last_edit_date": 1489564894, "question_id": 42803846, "link": "https://stackoverflow.com/questions/42803846/ruby-on-rails-pass-request-params-in-controller-to-models-after-create-event", "title": "Ruby on Rails: Pass request params in controller to model&#39;s after_create event", "body": "<p>I have two models:</p>\n\n<pre><code>1) Procedure\n     title\n     document_number\n\n2) Revision\n     revision_number\n</code></pre>\n\n<p>In my procedure model, I defined a method after_create to automatically create a Revision with revision_number set to 0.1.</p>\n\n<pre><code># app/models/procedure.rb\n\n# How do I get revision_number from the request params in this method?\nafter_create do |procedure|\n    procedure.revisions.create(revision_number: 0.1)\nend\n</code></pre>\n\n<p>That works well, however, I do not want to always default to 0.1 - For example, if I want to specify a revision number from parameters sent in the form request to the controller, I am a bit lost there. I looked throughout the guides and I wasn't able to find a way to pass data into the create event. This is my method in my controller:</p>\n\n<pre><code># app/controllers/procedures_controller.rb\n\ndef create\n    @procedure = current_user.procedures.build(procedure_params)\n\n    if @procedure.save\n        render json: @procedure, status: :created, location: @procedure\n    else\n        render json: @procedure.errors, status: :unprocessable_entity\n    end\nend\n\ndef procedure_params\n    params.require(:procedure).permit(:title, :document_number, :revision_number)\nend\n</code></pre>\n\n<p>The only way I can think of accomplishing this is by adding a column 'revision_number' to my procedure model, and then checking whether it is set in my 'after_create' method. </p>\n\n<p>I would appreciate any other suggestions for how I might be able to tackle this problem. Or if there is already a way and I missed it in the guides, I would appreciate a reference to that section. Thanks!</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 12965, "user_id": 2463570, "user_type": "registered", "accept_rate": 55, "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Rajarshi Das", "link": "https://stackoverflow.com/users/2463570/rajarshi-das"}, "edited": false, "score": 0, "creation_date": 1489562422, "post_id": 42803138, "comment_id": 72719778, "body": "is the server has ruby installed in  system or do you use rbenv, rvm, anything?"}, {"owner": {"reputation": 12965, "user_id": 2463570, "user_type": "registered", "accept_rate": 55, "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Rajarshi Das", "link": "https://stackoverflow.com/users/2463570/rajarshi-das"}, "edited": false, "score": 0, "creation_date": 1489562509, "post_id": 42803138, "comment_id": 72719830, "body": "Please follow <a href=\"http://stackoverflow.com/questions/15535140/installing-ruby-2-0-and-rails-4-0-0beta-on-aws-ec2\" title=\"installing ruby 2 0 and rails 4 0 0beta on aws ec2\">stackoverflow.com/questions/15535140/&hellip;</a>"}, {"owner": {"reputation": 11, "user_id": 6107997, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2e6b4c4d681dc3040a37a9eae5465532?s=128&d=identicon&r=PG&f=1", "display_name": "foa", "link": "https://stackoverflow.com/users/6107997/foa"}, "reply_to_user": {"reputation": 12965, "user_id": 2463570, "user_type": "registered", "accept_rate": 55, "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Rajarshi Das", "link": "https://stackoverflow.com/users/2463570/rajarshi-das"}, "edited": false, "score": 0, "creation_date": 1489652540, "post_id": 42803138, "comment_id": 72767356, "body": "@RajarshiDas I used rvm"}], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 6107997, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2e6b4c4d681dc3040a37a9eae5465532?s=128&d=identicon&r=PG&f=1", "display_name": "foa", "link": "https://stackoverflow.com/users/6107997/foa"}, "edited": false, "score": 0, "creation_date": 1490835590, "post_id": 43076505, "comment_id": 73294545, "body": "Thanks. It is great to known the reason."}], "tags": [], "owner": {"reputation": 480, "user_id": 1611947, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c19cb025eb639d52a0a0c86b7e6d4efd?s=128&d=identicon&r=PG", "display_name": "remo", "link": "https://stackoverflow.com/users/1611947/remo"}, "is_accepted": false, "score": 2, "last_activity_date": 1490729878, "last_edit_date": 1490729878, "creation_date": 1490723308, "answer_id": 43076505, "question_id": 42803138, "link": "https://stackoverflow.com/questions/42803138/why-rails-app-need-to-require-net-http-after-deploy-to-a-new-server/43076505#43076505", "title": "why rails app need to require &#39;net/http&#39; after deploy to a new server", "body": "<p>I ran into the same issue as you describe above, both on CentOS and on MacOS. I was able to resolve this by reinstalling an older version of bundler: (I tried this on both Ruby 2.4.0 and 2.4.1)</p>\n\n<p>Here's what my testing showed, starting in your Rails project directory.</p>\n\n<p><code>rails c</code></p>\n\n<pre><code>Loading development environment (Rails 5.0.2)\n2.4.1 :001 &gt; Bundler::VERSION\n =&gt; \"1.14.6\" \n2.4.1 :002 &gt; url = URI.parse('https://www.google.com')\n =&gt; #&lt;URI::HTTPS https://www.google.com&gt; \n2.4.1 :003 &gt; http = Net::HTTP.new(url.host, url.port)\nNameError: uninitialized constant Net::HTTP\n  from (irb):3\n  from /usr/local/rvm/gems/ruby-2.4.1/gems/railties-5.0.2/lib/rails/commands/console.rb:65:in `start'\n  from /usr/local/rvm/gems/ruby-2.4.1/gems/railties-5.0.2/lib/rails/commands/console_helper.rb:9:in `start'\n  from /usr/local/rvm/gems/ruby-2.4.1/gems/railties-5.0.2/lib/rails/commands/commands_tasks.rb:78:in `console'\n  from /usr/local/rvm/gems/ruby-2.4.1/gems/railties-5.0.2/lib/rails/commands/commands_tasks.rb:49:in `run_command!'\n  from /usr/local/rvm/gems/ruby-2.4.1/gems/railties-5.0.2/lib/rails/commands.rb:18:in `&lt;top (required)&gt;'\n  from bin/rails:4:in `require'\n  from bin/rails:4:in `&lt;main&gt;'\n2.4.1 :004 &gt; exit\n</code></pre>\n\n<p>I then uninstall all versions of bundler:</p>\n\n<p><code>gem uninstall bundler</code></p>\n\n<p>And reinstalled the older version of bundler:</p>\n\n<p><code>gem install bundler --no-document -v=1.14.3</code></p>\n\n<p><code>rails c</code></p>\n\n<pre><code>Loading development environment (Rails 5.0.2)\n2.4.1 :001 &gt; Bundler::VERSION\n =&gt; \"1.14.3\" \n2.4.1 :002 &gt; url = URI.parse('https://www.google.com')\n =&gt; #&lt;URI::HTTPS https://www.google.com&gt; \n2.4.1 :003 &gt; http = Net::HTTP.new(url.host, url.port)\n =&gt; #&lt;Net::HTTP www.google.com:443 open=false&gt; \n2.4.1 :004 &gt; exit\n</code></pre>\n\n<p>It looks like there's an issue with bundler 1.14.6 that is fixed by downgrading to 1.14.3.</p>\n\n<p>Hope that helps!</p>\n\n<p>edit: I also posted an issue for this in the <a href=\"https://github.com/bundler/bundler/issues/5540\" rel=\"nofollow noreferrer\">Bundler GitHub Issues</a></p>\n\n<p>edit2: Looks like this <a href=\"https://github.com/bundler/bundler/issues/5540#issuecomment-289867707\" rel=\"nofollow noreferrer\">change is intentional</a> and your application should include <code>require 'net/http'</code> itself.</p>\n"}], "owner": {"reputation": 11, "user_id": 6107997, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2e6b4c4d681dc3040a37a9eae5465532?s=128&d=identicon&r=PG&f=1", "display_name": "foa", "link": "https://stackoverflow.com/users/6107997/foa"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 995, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1490729878, "creation_date": 1489561575, "last_edit_date": 1489652474, "question_id": 42803138, "link": "https://stackoverflow.com/questions/42803138/why-rails-app-need-to-require-net-http-after-deploy-to-a-new-server", "title": "why rails app need to require &#39;net/http&#39; after deploy to a new server", "body": "<ol>\n<li>AWS centos7</li>\n<li>rvm install ruby 2.3.3/2.4.0</li>\n<li>rails 5.0.1/5.0.2</li>\n</ol>\n\n<p>It needs to call net/http in model, and it works well on AWS centos7, ruby 2.3.3, rails 5.0.1. But after deploy the environment as above, it raise a error </p>\n\n<blockquote>\n  <p>NameError (uninitialized constant Net::HTTP)</p>\n</blockquote>\n\n<p>so I need to </p>\n\n<pre><code>require 'net/http'\n</code></pre>\n\n<p>in the model</p>\n\n<p>Why? What's change caused it?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "activerecord", "unique"], "answers": [{"comments": [{"owner": {"reputation": 81, "user_id": 5943389, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7e7c0071d15e3242989afe9770db269e?s=128&d=identicon&r=PG&f=1", "display_name": "jake", "link": "https://stackoverflow.com/users/5943389/jake"}, "edited": false, "score": 0, "creation_date": 1489625523, "post_id": 42803054, "comment_id": 72758241, "body": "This causes issues for my &#39;grouped = hospitals.group_by(&amp;:state)&#39; line that follows. The error given is -- <code>Mysql2::Error: Expression #1 of SELECT list is not in GROUP BY clause and contains nonaggregated column &#39;dev.hospitals.id&#39; which is not functionally dependent on columns in GROUP BY clause; this is incompatible with sql_mode=only_full_group_by: SELECT </code>hospitals<code>.* FROM </code>hospitals` GROUP BY <code>hospitals</code>.<code>name</code> ORDER BY <code>hospitals</code>.<code>name</code> ASC`"}], "tags": [], "owner": {"reputation": 1528, "user_id": 7573791, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0e5e5cf864fb33229ca56750a51d6674?s=128&d=identicon&r=PG&f=1", "display_name": "Sajin", "link": "https://stackoverflow.com/users/7573791/sajin"}, "is_accepted": false, "score": 0, "last_activity_date": 1489561290, "creation_date": 1489561290, "answer_id": 42803054, "question_id": 42802725, "link": "https://stackoverflow.com/questions/42802725/activerecord-rails-get-records-where-a-field-is-unique-distinct/42803054#42803054", "title": "ActiveRecord Rails: Get records where a field is unique/distinct", "body": "<p>I guess this will help you</p>\n\n<pre><code>hospitals = order(:name).group(:name)\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 81, "user_id": 5943389, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7e7c0071d15e3242989afe9770db269e?s=128&d=identicon&r=PG&f=1", "display_name": "jake", "link": "https://stackoverflow.com/users/5943389/jake"}, "edited": false, "score": 0, "creation_date": 1489625020, "post_id": 42803059, "comment_id": 72758112, "body": "that just gives me an invalid MySQL error <code>Mysql2::Error: You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near &#39;on(name) * FROM </code>hospitals<code>&#39; at line 1: SELECT distinct on(name) * FROM </code>hospitals``"}], "tags": [], "owner": {"reputation": 599, "user_id": 7705063, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/37860e53fcef10930532ba0e8c0a2188?s=128&d=identicon&r=PG", "display_name": "Ricky Brown", "link": "https://stackoverflow.com/users/7705063/ricky-brown"}, "is_accepted": false, "score": 1, "last_activity_date": 1489561302, "creation_date": 1489561302, "answer_id": 42803059, "question_id": 42802725, "link": "https://stackoverflow.com/questions/42802725/activerecord-rails-get-records-where-a-field-is-unique-distinct/42803059#42803059", "title": "ActiveRecord Rails: Get records where a field is unique/distinct", "body": "<p>Here's one way to get all objects by a unique attribute:</p>\n\n<pre><code>Hospital.select('distinct on (name) *')\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 81, "user_id": 5943389, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7e7c0071d15e3242989afe9770db269e?s=128&d=identicon&r=PG&f=1", "display_name": "jake", "link": "https://stackoverflow.com/users/5943389/jake"}, "edited": false, "score": 0, "creation_date": 1489626549, "post_id": 42803625, "comment_id": 72758482, "body": "Thank you for your answer but it is not giving me what I need. The first produces the following SQL <code>SELECT DISTINCT </code>hospitals<code>.* FROM </code>hospitals` ORDER BY <code>hospitals</code>.<code>name</code> ASC` and the second produces <code>SELECT DISTINCT </code>hospitals<code>.* FROM </code>hospitals` GROUP BY <code>hospitals</code>.<code>id</code>, <code>hospitals</code>.<code>state</code> ORDER BY <code>hospitals</code>.<code>name</code> ASC`  But neither of these actually give me distinct hospitals based on &#39;name&#39;."}], "tags": [], "owner": {"reputation": 12965, "user_id": 2463570, "user_type": "registered", "accept_rate": 55, "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Rajarshi Das", "link": "https://stackoverflow.com/users/2463570/rajarshi-das"}, "is_accepted": false, "score": 0, "last_activity_date": 1489563874, "last_edit_date": 1489563874, "creation_date": 1489563443, "answer_id": 42803625, "question_id": 42802725, "link": "https://stackoverflow.com/questions/42802725/activerecord-rails-get-records-where-a-field-is-unique-distinct/42803625#42803625", "title": "ActiveRecord Rails: Get records where a field is unique/distinct", "body": "<p>You can try <a href=\"http://apidock.com/rails/ActiveRecord/QueryMethods/distinct\" rel=\"nofollow noreferrer\">distinct</a></p>\n\n<pre><code>distinct.order(name: :desc)\n</code></pre>\n\n<p>If you want group by then you can also try <a href=\"http://apidock.com/rails/v4.0.2/ActiveRecord/QueryMethods/group\" rel=\"nofollow noreferrer\">group</a></p>\n\n<pre><code> distinct.group(:id, :state).order(name: :desc)\n</code></pre>\n\n<p>will give you instead of <code>hospitals.group_by(&amp;:state)</code></p>\n\n<p>The query will return something like below</p>\n\n<pre><code>SELECT DISTINCT \"hospitals\".* FROM \"hospitals\" GROUP BY \"hospitals\".\"id\", \"hospitals\".\"state\"  ORDER BY \"hospitals\".\"name\" DESC\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 81, "user_id": 5943389, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7e7c0071d15e3242989afe9770db269e?s=128&d=identicon&r=PG&f=1", "display_name": "jake", "link": "https://stackoverflow.com/users/5943389/jake"}, "edited": false, "score": 0, "creation_date": 1489644751, "post_id": 42823889, "comment_id": 72763659, "body": "Hi Jo&#227;o, For some reason this didn&#39;t have an effect for me and &#39;hospitals&#39; and &#39;unique&#39; were the same. But it did give me the idea to use uniq further down the path on the array that is passed to my drop down list (see my answer below), so thank you very much for the inspiration."}], "tags": [], "owner": {"reputation": 3292, "user_id": 4668975, "user_type": "registered", "accept_rate": 46, "profile_image": "https://lh4.googleusercontent.com/-CI_A3iBXjSY/AAAAAAAAAAI/AAAAAAAAAQc/adILxpm9VvU/photo.jpg?sz=128", "display_name": "Jo&#227;o Souza", "link": "https://stackoverflow.com/users/4668975/jo%c3%a3o-souza"}, "is_accepted": false, "score": 3, "last_activity_date": 1489628792, "creation_date": 1489628792, "answer_id": 42823889, "question_id": 42802725, "link": "https://stackoverflow.com/questions/42802725/activerecord-rails-get-records-where-a-field-is-unique-distinct/42823889#42823889", "title": "ActiveRecord Rails: Get records where a field is unique/distinct", "body": "<p>I don't know how you can do it with SQL but it's possible with the <a href=\"https://ruby-doc.org/core-2.2.0/Array.html#method-i-uniq\" rel=\"nofollow noreferrer\">method <code>uniq</code> of Array</a>:</p>\n\n<pre><code>def self.get_hospitals\n  hospitals = order(:name).all\n  unique = hospitals.uniq(&amp;:name)\n  grouped = unique.group_by(&amp;:state)\nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 81, "user_id": 5943389, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7e7c0071d15e3242989afe9770db269e?s=128&d=identicon&r=PG&f=1", "display_name": "jake", "link": "https://stackoverflow.com/users/5943389/jake"}, "is_accepted": false, "score": 0, "last_activity_date": 1489645067, "creation_date": 1489645067, "answer_id": 42826601, "question_id": 42802725, "link": "https://stackoverflow.com/questions/42802725/activerecord-rails-get-records-where-a-field-is-unique-distinct/42826601#42826601", "title": "ActiveRecord Rails: Get records where a field is unique/distinct", "body": "<p>I couldn't get it working at the SQL level so I implemented a '.uniq' solution on the Array that I pass to my drop down list.</p>\n\n<pre><code>def self.get_hospitals\n    hospitals = order(:name).all\n    grouped = hospitals.group_by(&amp;:state)\n\n    output = grouped.collect { |state, hospitals| [state, hospitals.collect { |h| [h.name, h.id] }] }\n\n    output.each do |key, value|\n      value.uniq!\n    end\n    output.sort { |a, b| a[0] &lt;=&gt; b[0] }\n  end\n</code></pre>\n"}], "owner": {"reputation": 81, "user_id": 5943389, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7e7c0071d15e3242989afe9770db269e?s=128&d=identicon&r=PG&f=1", "display_name": "jake", "link": "https://stackoverflow.com/users/5943389/jake"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1720, "favorite_count": 0, "answer_count": 5, "score": 2, "last_activity_date": 1489645067, "creation_date": 1489560091, "question_id": 42802725, "link": "https://stackoverflow.com/questions/42802725/activerecord-rails-get-records-where-a-field-is-unique-distinct", "title": "ActiveRecord Rails: Get records where a field is unique/distinct", "body": "<p>I have a project Ruby 2.4.0 and Rails 5.0.1 and a model with the following:</p>\n\n<pre><code>class Hospital &lt; ApplicationRecord\n\n  validates_presence_of :name\n  validates_presence_of :state\n  validates_presence_of :unit\n  validates_presence_of :site\n\n  def self.get_hospitals\n    hospitals = order(:name).all \n    grouped = hospitals.group_by(&amp;:state)\n  end  \nend\n</code></pre>\n\n<p>I then use that \"grouped\" hash to populate a drop down box in which I display <code>h.name + ' (' + h.unit.to_s + ')'</code>.</p>\n\n<p>My issue is that there can be duplicates in that list and if there is then I only want one of them. </p>\n\n<p>How do I query the records and get returned the whole records (not pluck or select where only a single field is returned) whereby name is unique?</p>\n\n<p>Something like:</p>\n\n<pre><code>hospitals = order(:name).distinct\n</code></pre>\n"}, {"tags": ["ruby"], "answers": [{"tags": [], "owner": {"reputation": 7994, "user_id": 1625339, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/b8ba46f911517c8b2ccc39e0be9050c0?s=128&d=identicon&r=PG", "display_name": "Aetherus", "link": "https://stackoverflow.com/users/1625339/aetherus"}, "is_accepted": false, "score": 0, "last_activity_date": 1489561340, "creation_date": 1489561340, "answer_id": 42803071, "question_id": 42802678, "link": "https://stackoverflow.com/questions/42802678/log-partial-exception-stack-trace-in-ruby/42803071#42803071", "title": "log partial exception stack trace in Ruby", "body": "<ol>\n<li><p>Instead of <code>log(error_message: e.message, backtrace: e.backtrace)</code>, just <code>logger.error(e)</code></p></li>\n<li><p>If that's still too long, take a look at <code>config/initializers/backtrace_silencers.rb</code>. It's well documented.</p></li>\n</ol>\n"}, {"tags": [], "owner": {"reputation": 4538, "user_id": 809830, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bdd9801d2717096282258b192edc7793?s=128&d=identicon&r=PG", "display_name": "Alex Kojin", "link": "https://stackoverflow.com/users/809830/alex-kojin"}, "is_accepted": true, "score": 3, "last_activity_date": 1489561434, "creation_date": 1489561434, "answer_id": 42803102, "question_id": 42802678, "link": "https://stackoverflow.com/questions/42802678/log-partial-exception-stack-trace-in-ruby/42803102#42803102", "title": "log partial exception stack trace in Ruby", "body": "<p><code>e.backtrace</code> is just array and you can get only last N numbers of backtrace's lines:</p>\n\n<pre><code># get last 10 lines    \ne.backtrace[0, 10].join(\"\\n\\t\")\n</code></pre>\n"}], "owner": {"reputation": 323, "user_id": 930858, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/751cece3c34ebb1f19f414305b9f35d3?s=128&d=identicon&r=PG", "display_name": "dancypants", "link": "https://stackoverflow.com/users/930858/dancypants"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 172, "favorite_count": 0, "accepted_answer_id": 42803102, "answer_count": 2, "score": 2, "last_activity_date": 1489561434, "creation_date": 1489559917, "last_edit_date": 1489560224, "question_id": 42802678, "link": "https://stackoverflow.com/questions/42802678/log-partial-exception-stack-trace-in-ruby", "title": "log partial exception stack trace in Ruby", "body": "<p>To debug possible issues with some new method, I'd like to log the stack trace upon encountering a StandardError.</p>\n\n<p>In my case the stack traces are extremely long and only the last few calls are of importance to me (to debug a possible issue, I need to know who was the caller).</p>\n\n<p>Is there a way to log a truncated version of the stack trace association with the exception?</p>\n\n<p>E.g.</p>\n\n<p><code>def some_unreliable_method\n  begin\n    # do unreliable things\n  rescue =&gt; e\n    log(\n      error_message: e.message,\n      backtrace: e.backtrace # the full stack trace is too long\n    )\n    # recover from exception\n  end\nend\n</code></p>\n"}, {"tags": ["ruby", "loops", "nokogiri"], "comments": [{"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 1, "creation_date": 1489602279, "post_id": 42802299, "comment_id": 72747414, "body": "Please read &quot;<a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a>&quot; including the linked pages, and &quot;<a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>&quot;. When asking about this sort of question, we need the minimal input data (HTML) necessary to demonstrate the problem, along with the expected output. Without that we have to try to figure out what the input should look like, which wastes our time and yours, and if the input turns out to be wrong and we can&#39;t check the output against yours, then the answer is wrong. Also, please read the help for formatting your text. Properly formatted text makes it much easier for us to understand what you&#39;re saying."}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 4926577, "user_type": "registered", "profile_image": "https://graph.facebook.com/10100935475152117/picture?type=large", "display_name": "Rajas Pargaonkar", "link": "https://stackoverflow.com/users/4926577/rajas-pargaonkar"}, "edited": false, "score": 0, "creation_date": 1489592026, "post_id": 42813787, "comment_id": 72740649, "body": "Hey Diodon. Thanks for the response! I tried that, but I get a undefined method text for nil:NilClass. You&#39;re right. I should be able to take just the mapped rows, and assign a position, but no dice."}, {"owner": {"reputation": 1, "user_id": 4926577, "user_type": "registered", "profile_image": "https://graph.facebook.com/10100935475152117/picture?type=large", "display_name": "Rajas Pargaonkar", "link": "https://stackoverflow.com/users/4926577/rajas-pargaonkar"}, "edited": false, "score": 0, "creation_date": 1489596660, "post_id": 42813787, "comment_id": 72744114, "body": "Hey. I&#39;ll check it out, but I checked the rows and they all have tds. I&#39;ll update you."}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1489602471, "post_id": 42813787, "comment_id": 72747543, "body": "The question and answer are missing context which would help make them both usable for others. It&#39;s important to understand that SO isn&#39;t a &quot;help <i>me</i>&quot; site, it&#39;s a &quot;here&#39;s a question other&#39;s will have, along with me, and here is the solution or solutions that fix it&quot; site. So the context (input HTML) is extremely important. Inside knowledge of the problem short-circuits the usefulness for others unless you show the whole situation."}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1489602804, "post_id": 42813787, "comment_id": 72747741, "body": "<code>row.css(&#39;td&#39;)[0]</code> is better written <code>row.at(&#39;td&#39;)</code>. Using an <code>if</code> inside a <code>map</code> forces you to use <code>compact</code> afterwards because it&#39;ll generate nil elements. Instead use a more comprehensive <code>table.css(&#39;tr&#39;)</code> statement, probably with a <code>reject</code> or <code>select</code> to find the <code>td</code> elements you want. Then you can remove the <code>if</code> clause along with <code>compact</code>. Filter it first correctly and you won&#39;t have to clean up the mess later."}], "tags": [], "owner": {"reputation": 424, "user_id": 6150184, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/26aa5396de57080c2084de1b8a5aeaa5?s=128&d=identicon&r=PG&f=1", "display_name": "DiodonHystrix", "link": "https://stackoverflow.com/users/6150184/diodonhystrix"}, "is_accepted": false, "score": -1, "last_activity_date": 1489595655, "last_edit_date": 1489595655, "creation_date": 1489590943, "answer_id": 42813787, "question_id": 42802299, "link": "https://stackoverflow.com/questions/42802299/8-copies-of-td-item-while-looping-while-using-nokogiri/42813787#42813787", "title": "8 copies of td item while looping while using Nokogiri", "body": "<pre><code>result = []\ntable.css('tr').each do |row|\n  result &lt;&lt; row.css('td')[0].text if row.css('td')[0]\nend\n</code></pre>\n\n<p>The problem was very simple, some rows may not have td at all. That's why you want to check if there is any td, before you call #text. </p>\n\n<p>If you prefer using #map:</p>\n\n<pre><code>result = table.css('tr').map do |row| # map returns array of results\n  row.css('td')[0].text if row.css('td')[0]\nend.compact # compact deletes all the nil elements from array\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 4926577, "user_type": "registered", "profile_image": "https://graph.facebook.com/10100935475152117/picture?type=large", "display_name": "Rajas Pargaonkar", "link": "https://stackoverflow.com/users/4926577/rajas-pargaonkar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 35, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1489602036, "creation_date": 1489558433, "last_edit_date": 1489602036, "question_id": 42802299, "link": "https://stackoverflow.com/questions/42802299/8-copies-of-td-item-while-looping-while-using-nokogiri", "title": "8 copies of td item while looping while using Nokogiri", "body": "<p>I can't for the life of me see why I get 8 of the particular value (td[0]) every time it loops. I checked against what I saw online, but obviously I'm wrong. </p>\n\n<p>Assume 'table' is related to some Nokogiri html path. I'm trying to get the contents of the first td (position 0, so td[0]) inside a tr.</p>\n\n<pre><code>result = []\ntable.search('tr').map do |row|\n  row.search('td').each do |td|\n\n    result.push(row.search('td')[0].text.to_s)\n\n end\nend\n\nputs result\n</code></pre>\n\n<p>I just want the data at position[0] from each tr once. Instead, I'm getting 8 copies of td[0] for each tr. I'm missing something obvious I think, but what?</p>\n"}, {"tags": ["ruby", "integer", "operator-keyword"], "comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1489557054, "post_id": 42801058, "comment_id": 72717485, "body": "Ruby, like C++, uses the <code>&lt;&lt;</code> operator for a lot of things other than what it was originally intended for. Maybe that&#39;s the influence of things like the Bash shell where <code>&gt;</code> and <code>&lt;</code> take on particular meanings."}], "answers": [{"comments": [{"owner": {"reputation": 23, "user_id": 7587626, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/626a97570d2a21e3bf7361ef691e4347?s=128&d=identicon&r=PG&f=1", "display_name": "ZenMaster21", "link": "https://stackoverflow.com/users/7587626/zenmaster21"}, "edited": false, "score": 0, "creation_date": 1489559202, "post_id": 42801194, "comment_id": 72718286, "body": "Cool, thanks for the extra resources"}], "tags": [], "owner": {"reputation": 9015, "user_id": 155826, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/55RCe.jpg?s=128&g=1", "display_name": "Ryan Crispin Heneise", "link": "https://stackoverflow.com/users/155826/ryan-crispin-heneise"}, "is_accepted": false, "score": 1, "last_activity_date": 1489552766, "last_edit_date": 1495540440, "creation_date": 1489552766, "answer_id": 42801194, "question_id": 42801058, "link": "https://stackoverflow.com/questions/42801058/in-ruby-how-does-the-shovel-operator-work-on-two-integers/42801194#42801194", "title": "In Ruby, how does the shovel operator (&lt;&lt;) work on two integers?", "body": "<p>Depending on your Ruby version, integer may inherit <code>&lt;&lt;</code> from <a href=\"https://ruby-doc.org/core-2.2.0/Fixnum.html#method-i-3C-3C\" rel=\"nofollow noreferrer\">Fixnum</a>, or <a href=\"https://ruby-doc.org/core-2.4.0/Integer.html#method-i-3C-3C\" rel=\"nofollow noreferrer\">Integer</a></p>\n\n<p>Either way the operation is the same: the integers assigned to <code>a</code> and <code>b</code> are interpreting <code>&lt;&lt;</code> as a bitwise left shift operator. You can see what's going on behind the scenes here: <a href=\"https://ruby-doc.org/core-2.4.0/Integer.html#method-i-3C-3C\" rel=\"nofollow noreferrer\">https://ruby-doc.org/core-2.4.0/Integer.html#method-i-3C-3C</a></p>\n\n<p>There's an interesting discussion of this operator here: <a href=\"https://stackoverflow.com/questions/9730303/clarification-on-the-ruby-operator\">Clarification on the Ruby &lt;&lt; Operator</a></p>\n"}, {"comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1489556979, "post_id": 42801389, "comment_id": 72717455, "body": "Put another way: <code>5 &lt;&lt; 2</code> is the same as <code>5 * 2 ** 2</code> or in general form <code>x &lt;&lt; y</code> is <code>x * 2 ** y</code>."}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1489557309, "post_id": 42801389, "comment_id": 72717585, "body": "@tadman I believe it is exactly the same as what I put in the last snippet: m &lt;&lt; n \u2261 m &#215; 2\u207f, isn\u2019t it?"}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1489558114, "post_id": 42801389, "comment_id": 72717866, "body": "Exactly the same. I just thought Ruby notation might be educational as well."}, {"owner": {"reputation": 23, "user_id": 7587626, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/626a97570d2a21e3bf7361ef691e4347?s=128&d=identicon&r=PG&f=1", "display_name": "ZenMaster21", "link": "https://stackoverflow.com/users/7587626/zenmaster21"}, "edited": false, "score": 0, "creation_date": 1489558989, "post_id": 42801389, "comment_id": 72718206, "body": "Sweet! This makes sense. Thanks for your reply. The only thing now is this is leading me towards needing to learn more about 64 bit and how it affects the bitwise left shift operator."}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1489559223, "post_id": 42801389, "comment_id": 72718296, "body": "64bits (here it states for the hardware platform architecture) does not affect the bitwise shift anyhow, it affects the amount of zeroes and ones in the binary representation."}, {"owner": {"reputation": 960, "user_id": 4109592, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/7Sip6.jpg?s=128&g=1", "display_name": "Nick Schwaderer", "link": "https://stackoverflow.com/users/4109592/nick-schwaderer"}, "edited": false, "score": 0, "creation_date": 1528035332, "post_id": 42801389, "comment_id": 88344504, "body": "That&#39;s amazing. Can&#39;t believe I&#39;ve only discovered this today, however many years in to ruby. Thanks for this very helpful answer!"}], "tags": [], "owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "is_accepted": true, "score": 7, "last_activity_date": 1489554284, "last_edit_date": 1489554284, "creation_date": 1489553796, "answer_id": 42801389, "question_id": 42801058, "link": "https://stackoverflow.com/questions/42801058/in-ruby-how-does-the-shovel-operator-work-on-two-integers/42801389#42801389", "title": "In Ruby, how does the shovel operator (&lt;&lt;) work on two integers?", "body": "<p>The operation is called \u201cbitwise left shift\u201d and is easily googlable by this term.</p>\n\n<p>In short, it takes the binary representation of the LHO and shifts it to the left by count, specified as RHO.</p>\n\n<p>Consider you have <code>5 &lt;&lt; 2</code>. <code>5</code> is represented by (64bits):</p>\n\n<pre><code>0000 0000 0000 0101\n</code></pre>\n\n<p>Left shift by <code>2</code> would be:</p>\n\n<pre><code>00 0000 0000 0101 00 # = 0000 0000 0001 0100\n</code></pre>\n\n<p>or, in turn, <code>20</code>. Let\u2019s check:</p>\n\n<pre><code>5 &lt;&lt; 2\n#\u21d2\u00a020\n</code></pre>\n\n<p>Due to the nature of binary numeral base system, left shift is equivalent to multiplying by the respective power of <code>2</code>. That said, </p>\n\n<pre><code>m &lt;&lt; n \u2261 m \u00d7 2\u207f\n\n5 &lt;&lt; 4 #\u21d2 5 \u00d7 2\u2074 \u2261 80\n#\u21d2\u00a080\n</code></pre>\n"}], "owner": {"reputation": 23, "user_id": 7587626, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/626a97570d2a21e3bf7361ef691e4347?s=128&d=identicon&r=PG&f=1", "display_name": "ZenMaster21", "link": "https://stackoverflow.com/users/7587626/zenmaster21"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 614, "favorite_count": 1, "closed_date": 1489562321, "accepted_answer_id": 42801389, "answer_count": 2, "score": 2, "last_activity_date": 1489596717, "creation_date": 1489551734, "last_edit_date": 1489596717, "question_id": 42801058, "link": "https://stackoverflow.com/questions/42801058/in-ruby-how-does-the-shovel-operator-work-on-two-integers", "closed_reason": "Duplicate", "title": "In Ruby, how does the shovel operator (&lt;&lt;) work on two integers?", "body": "<p>I'm a beginner/intermediate Ruby learner and I ran something I didn't understand. I looked around <strong>stackoverflow</strong> but couldn't find a clear, concise answer so that's why I'm creating a new question.</p>\n\n<p>If given a number a and b, what is the result r, when r equals:</p>\n\n<pre><code>a &lt;&lt; b \n</code></pre>\n\n<p>In particular, I'm looking for a universal equation that denotes the relationship between the three variables. Also, insight into how Ruby works under the hood is welcomed but secondary.</p>\n\n<p>FYI, I'm using repl.it at \"<a href=\"https://repl.it/languages/ruby\" rel=\"nofollow noreferrer\">https://repl.it/languages/ruby</a>\" if it helps.</p>\n\n<p>Thanks in advance!</p>\n\n<p>EDIT: &lt;&lt; is more commonly referred to as the binary or bitwise left shift operator.\nEDIT2 as per Andrey Deineko: This question is different than the other post listed at the top because in the other post, there was no clear, concise answer to how it works. It simply stated that it was a bitwise left shift operator and showed a few examples of outputs with that method. In particular, I was looking for how it works on integers or fixnums only. It seems the other post was about the general use of the operator. To reiterate, this question is different because it applies specifically to how it works on integers and as such, the answer below goes a bit more into detail as to how it works on a binary level.</p>\n"}, {"tags": ["mysql", "ruby-on-rails", "sql-server", "ruby", "ruby-on-rails-4"], "comments": [{"owner": {"reputation": 36449, "user_id": 2453699, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a0b0a49d160baf7d95b81d798ea0cb65?s=128&d=identicon&r=PG", "display_name": "vee", "link": "https://stackoverflow.com/users/2453699/vee"}, "edited": false, "score": 0, "creation_date": 1489552833, "post_id": 42800876, "comment_id": 72716155, "body": "When you execute an db insert statement like that then really there is nothing Rails can do about it! Rails, in your case ActiveRecord can only write proper date if you use it in the way it wants you to... not when you use an insert statement like that. Can you add more to your question, probably more about the <code>Order</code> model? There should be a way to come up with a desired solution!"}, {"owner": {"reputation": 4377, "user_id": 1154018, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/b815b5d6f9f344aad0c020e6782fb919?s=128&d=identicon&r=PG", "display_name": "jimcgh", "link": "https://stackoverflow.com/users/1154018/jimcgh"}, "reply_to_user": {"reputation": 36449, "user_id": 2453699, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a0b0a49d160baf7d95b81d798ea0cb65?s=128&d=identicon&r=PG", "display_name": "vee", "link": "https://stackoverflow.com/users/2453699/vee"}, "edited": false, "score": 0, "creation_date": 1489553067, "post_id": 42800876, "comment_id": 72716221, "body": "Sorry for confusion. We have models for the tables in MySQL but not for the tables in the SQL Server database. We are using <a href=\"https://github.com/rails-sqlserver/tiny_tds\" rel=\"nofollow noreferrer\">github.com/rails-sqlserver/tiny_tds</a> to interface with SQL Server using raw sql queries."}, {"owner": {"reputation": 36449, "user_id": 2453699, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a0b0a49d160baf7d95b81d798ea0cb65?s=128&d=identicon&r=PG", "display_name": "vee", "link": "https://stackoverflow.com/users/2453699/vee"}, "edited": false, "score": 0, "creation_date": 1489553619, "post_id": 42800876, "comment_id": 72716389, "body": "Well if you&#39;re really after executing the query as such surround your values with quotes, as: <code>INSERT INTO ORDER &#39;(%s)&#39; VALUES &#39;(%s)&#39;;...</code>"}], "owner": {"reputation": 4377, "user_id": 1154018, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/b815b5d6f9f344aad0c020e6782fb919?s=128&d=identicon&r=PG", "display_name": "jimcgh", "link": "https://stackoverflow.com/users/1154018/jimcgh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 124, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1489554527, "creation_date": 1489550513, "last_edit_date": 1489554527, "question_id": 42800876, "link": "https://stackoverflow.com/questions/42800876/storing-timestamp-field-in-mysql-as-datetime-in-sql-server-using-ruby", "title": "Storing TIMESTAMP field in MySQL as datetime in SQL Server using Ruby", "body": "<p>Im writing a job in my Rails application to migrate some data from a MySQL database to Microsoft SQL Server. In my orders table in MySQL the billing_date field is a TIMESTAMP, whereas the same field in SQL Server is of type datetime.\nI have the following code:</p>\n\n<pre><code>def order_columns\n  %w{INVOICE_NUMBER BILLING_DATE}\nend\n\ninvoice_number = @order.invoice_number\nbilling_date   = @order.billing_date\nvalues = [invoice_number, billing_date]\n@query += \"INSERT INTO ORDER (%s) VALUES (%s);\" % [order_columns.join(\",\"),values.join(\",\")]\n</code></pre>\n\n<p>The billing_date value in MySQL is <code>2016-09-02 08:43:10</code> . When the query gets executed i get the following error <code>Incorrect syntax near '08'</code>.</p>\n\n<p>Is the query formulation correct ? If yes, what is the correct way of storing the billing_date of type TIMESTAMP to a datetime field in SQL Server ?</p>\n"}, {"tags": ["javascript", "html", "ruby"], "comments": [{"owner": {"reputation": 5134, "user_id": 1672197, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/i8HkV.png?s=128&g=1", "display_name": "orde", "link": "https://stackoverflow.com/users/1672197/orde"}, "edited": false, "score": 1, "creation_date": 1489548558, "post_id": 42800583, "comment_id": 72715192, "body": "Expression tags: <a href=\"https://en.wikipedia.org/wiki/ERuby\" rel=\"nofollow noreferrer\">en.wikipedia.org/wiki/ERuby</a>"}, {"owner": {"reputation": 13595, "user_id": 668501, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/3f15b157200c05100d6baeb0ede510f0?s=128&d=identicon&r=PG", "display_name": "Soren", "link": "https://stackoverflow.com/users/668501/soren"}, "edited": false, "score": 0, "creation_date": 1489548591, "post_id": 42800583, "comment_id": 72715199, "body": "It means nothing to HTML, but probably a lot more to the Ruby Rails server you are using .. it is a template directive in Ruby"}, {"owner": {"reputation": 93, "user_id": 7518095, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/6fee4d52fec344078f254379ae90f2dc?s=128&d=identicon&r=PG&f=1", "display_name": "user7518095", "link": "https://stackoverflow.com/users/7518095/user7518095"}, "edited": false, "score": 0, "creation_date": 1489548714, "post_id": 42800583, "comment_id": 72715228, "body": "Great, thank you! What about removing the white space since this is embedded ruby?"}], "answers": [{"tags": [], "owner": {"reputation": 78, "user_id": 1467877, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7a771b0231393cc20a0e61d19d889b0?s=128&d=identicon&r=PG", "display_name": "Konda", "link": "https://stackoverflow.com/users/1467877/konda"}, "is_accepted": false, "score": 0, "last_activity_date": 1489548990, "creation_date": 1489548990, "answer_id": 42800660, "question_id": 42800583, "link": "https://stackoverflow.com/questions/42800583/what-does-mean-in-html-updated-and-removing-white-space-from-embed/42800660#42800660", "title": "What does &quot;&lt;%=...%&gt;&quot; mean in HTML? (Updated) And removing white space from embedded Ruby", "body": "<p>It's probably best to write like this -</p>\n\n<pre><code>&lt;span class=\"food\" data-category=\"fruit\" id=\"apple\"&gt;&lt;/span&gt;\n</code></pre>\n\n<p>this improves readability. This approach would mean that you can avoid having to deal with spaces etc. Just focus on defining the span using data tags. </p>\n\n<p>Also your question about the &lt;%= %>, they are expression tags pointed out by @orde, they will be stripped out when the code is compiled and the value of the \"category\" variable will be injected into the id tag. </p>\n\n<p>Hope this helps! :) good luck!</p>\n"}, {"tags": [], "owner": {"reputation": 75, "user_id": 4677365, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-YGlKyhm7XXI/AAAAAAAAAAI/AAAAAAAAAw4/tW5ZMpLoU9I/photo.jpg?sz=128", "display_name": "Teresa", "link": "https://stackoverflow.com/users/4677365/teresa"}, "is_accepted": true, "score": 0, "last_activity_date": 1489550209, "last_edit_date": 1489550209, "creation_date": 1489549799, "answer_id": 42800781, "question_id": 42800583, "link": "https://stackoverflow.com/questions/42800583/what-does-mean-in-html-updated-and-removing-white-space-from-embed/42800781#42800781", "title": "What does &quot;&lt;%=...%&gt;&quot; mean in HTML? (Updated) And removing white space from embedded Ruby", "body": "<p>&lt;%= %> tells the erb file to render/print the result, not just execute it.</p>\n\n<p>&lt;% %> just executes the ruby in line and does not print the result. Examples might be setting a variable or creating a loop.</p>\n\n<p>Here are some docs: <a href=\"http://apidock.com/ruby/ERB\" rel=\"nofollow noreferrer\">http://apidock.com/ruby/ERB</a></p>\n\n<p>There are many methods you can use to manipulate a string in ruby, gsub or delete would work well for this since the whitespace will be throughout the string:</p>\n\n<p><a href=\"https://ruby-doc.org/core-2.3.1/String.html#method-i-delete\" rel=\"nofollow noreferrer\">https://ruby-doc.org/core-2.3.1/String.html#method-i-delete</a></p>\n\n<p>It is best to finish manipulating your data prior to passing it to the view. You may want to consider removing the spaces in a view helper if you are using Rails.</p>\n"}, {"comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1489551616, "post_id": 42800924, "comment_id": 72715837, "body": "Don&#39;t forget code formatting on the code there. The <code>{}</code> button usually fixes selected chunks in a single click."}], "tags": [], "owner": {"reputation": 1528, "user_id": 7573791, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0e5e5cf864fb33229ca56750a51d6674?s=128&d=identicon&r=PG&f=1", "display_name": "Sajin", "link": "https://stackoverflow.com/users/7573791/sajin"}, "is_accepted": false, "score": 0, "last_activity_date": 1489553075, "last_edit_date": 1489553075, "creation_date": 1489550752, "answer_id": 42800924, "question_id": 42800583, "link": "https://stackoverflow.com/questions/42800583/what-does-mean-in-html-updated-and-removing-white-space-from-embed/42800924#42800924", "title": "What does &quot;&lt;%=...%&gt;&quot; mean in HTML? (Updated) And removing white space from embedded Ruby", "body": "<pre><code>category = 'Fruit or Vegetable'\n\ncategory.gsub(' ','') #=&gt; 'FruitsorVegetables'\n\ncategory.titleize.gsub(' ','') #=&gt; 'FruitsOrVegetables'\n</code></pre>\n\n<p>So this may do the trick</p>\n\n<pre><code>&lt;span class=\"foodtype\" id=\"food&lt;%=category.gsub(' ','')%&gt;\"&gt;\n</code></pre>\n\n<p>or</p>\n\n<pre><code>&lt;span class=\"foodtype\" id=\"food&lt;%=category.titleize.gsub(' ','')%&gt;\"&gt;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 4527, "user_id": 5497690, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/577c8ad14fffb59cd619e43634c51dad?s=128&d=identicon&r=PG&f=1", "display_name": "puneet18", "link": "https://stackoverflow.com/users/5497690/puneet18"}, "is_accepted": false, "score": 0, "last_activity_date": 1489557668, "creation_date": 1489557668, "answer_id": 42802127, "question_id": 42800583, "link": "https://stackoverflow.com/questions/42800583/what-does-mean-in-html-updated-and-removing-white-space-from-embed/42802127#42802127", "title": "What does &quot;&lt;%=...%&gt;&quot; mean in HTML? (Updated) And removing white space from embedded Ruby", "body": "<p>&lt;%= %> in html.erb file is used to print ruby code in html file.</p>\n\n<pre><code>&lt;span class=\"foodtype\" id=\"food&lt;%=category.gsub(' ','')%&gt;\"&gt;\n</code></pre>\n"}], "owner": {"reputation": 93, "user_id": 7518095, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/6fee4d52fec344078f254379ae90f2dc?s=128&d=identicon&r=PG&f=1", "display_name": "user7518095", "link": "https://stackoverflow.com/users/7518095/user7518095"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 74, "favorite_count": 0, "closed_date": 1489562365, "accepted_answer_id": 42800781, "answer_count": 4, "score": 0, "last_activity_date": 1489557668, "creation_date": 1489548468, "last_edit_date": 1489548643, "question_id": 42800583, "link": "https://stackoverflow.com/questions/42800583/what-does-mean-in-html-updated-and-removing-white-space-from-embed", "closed_reason": "Duplicate", "title": "What does &quot;&lt;%=...%&gt;&quot; mean in HTML? (Updated) And removing white space from embedded Ruby", "body": "<p>Let's say I have a span division such as</p>\n\n<pre><code>&lt;span class=\"foodtype\" id=\"food&lt;%=category%&gt;\"&gt;\n</code></pre>\n\n<p>and I want to, in the HTML, remove white space from the category (e.g Fruit or Vegetable --> FruitOrVegetable) so that the ID doesn't contain spaces. How can I do this?</p>\n\n<p>Also, could someone explain what the &lt;%= %> refers to?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "nginx", "puma"], "comments": [{"owner": {"reputation": 5358, "user_id": 2399861, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/5fbe887e0a643cd477ba3f14fa528f84?s=128&d=identicon&r=PG", "display_name": "Ruby Racer", "link": "https://stackoverflow.com/users/2399861/ruby-racer"}, "edited": false, "score": 0, "creation_date": 1489650293, "post_id": 42800381, "comment_id": 72766184, "body": "I know my answer was off, but can you look at my update answer? Maybe your solution lies there, if you have not already found it."}], "answers": [{"tags": [], "owner": {"reputation": 5358, "user_id": 2399861, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/5fbe887e0a643cd477ba3f14fa528f84?s=128&d=identicon&r=PG", "display_name": "Ruby Racer", "link": "https://stackoverflow.com/users/2399861/ruby-racer"}, "is_accepted": true, "score": 1, "last_activity_date": 1489650264, "last_edit_date": 1489650264, "creation_date": 1489547837, "answer_id": 42800505, "question_id": 42800381, "link": "https://stackoverflow.com/questions/42800381/two-rails-apps-using-puma-and-nginx/42800505#42800505", "title": "Two rails apps using puma and nginx", "body": "<p>I thing the main reason is that you are giving both virtual servers the same root directive.</p>\n\n<p>Change orange to, I guess:</p>\n\n<pre><code>root /home/username/potato/site/public;\n</code></pre>\n\n<p>But maybe it's a typo for the example only.</p>\n\n<p>Secondly, using upstream events, you are then calling <code>@app</code>. You should really call <code>@events</code> .... Like so:</p>\n\n<pre><code>try_files $uri/index.html $uri @events;\n\nlocation @events {\n    proxy_pass http://events;\n    proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;\n    proxy_set_header Host $http_host;\n    proxy_redirect off;\n}\n</code></pre>\n"}], "owner": {"reputation": 33, "user_id": 7502684, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3ec10d3a2c677f3c0711fcef945ff15d?s=128&d=identicon&r=PG&f=1", "display_name": "Juan", "link": "https://stackoverflow.com/users/7502684/juan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 766, "favorite_count": 1, "accepted_answer_id": 42800505, "answer_count": 1, "score": 2, "last_activity_date": 1489650264, "creation_date": 1489546935, "last_edit_date": 1489600650, "question_id": 42800381, "link": "https://stackoverflow.com/questions/42800381/two-rails-apps-using-puma-and-nginx", "title": "Two rails apps using puma and nginx", "body": "<p>I developed two ruby on rails apps. I own to domains potato.domain.com and orange.domain.com both pointing to the same IP address of my linux server.</p>\n\n<p>I want to deploy one rails application to each domain. \nTo do this i used Puma and Nginx and followed <a href=\"https://www.digitalocean.com/community/tutorials/how-to-deploy-a-rails-app-with-puma-and-nginx-on-ubuntu-14-04\" rel=\"nofollow noreferrer\">this tutorial</a>  and succesfully deployed one of the sites (lets call it potato.domain.com).</p>\n\n<p>Now, when i try to deploy the other domain, i follow the exact same steps i followed for potato.domain.com(replacing references to the potato app with de orange app) but once im finished if i try to access orange.domain.com i end up always in potato.domain.com.</p>\n\n<p>Here is the puma.rb file that i'm using for both apps:</p>\n\n<pre><code># Change to match your CPU core count\nworkers 1\n\n# Min and Max threads per worker\nthreads 1, 6\n\napp_dir = File.expand_path(\"../..\", __FILE__)\nshared_dir = \"#{app_dir}/shared\"\n\n# Default to production\nrails_env = ENV['RAILS_ENV'] || \"production\"\nenvironment rails_env\n\n# Set up socket location\nbind \"unix://#{shared_dir}/sockets/puma.sock\"\n# Logging\nstdout_redirect \"#{shared_dir}/log/puma.stdout.log\", \"#{shared_dir}/log/puma.stderr.log\", true\n\n# Set master PID and state locations\npidfile \"#{shared_dir}/pids/puma.pid\"\nstate_path \"#{shared_dir}/pids/puma.state\"\nactivate_control_app\n\non_worker_boot do\n  require \"active_record\"\n  ActiveRecord::Base.connection.disconnect! rescue ActiveRecord::ConnectionNotEstablished\n  ActiveRecord::Base.establish_connection(YAML.load_file(\"#{app_dir}/config/database.yml\")[rails_env])\nend\n</code></pre>\n\n<p>And here are the files under nginx/sites-available (and both are mapped to sites-enabled automatically):</p>\n\n<p>Default file (potato.domain.com):</p>\n\n<pre><code>upstream app {\n    # Path to Puma SOCK file, as defined previously\n    server unix:/home/username/potato/site/shared/sockets/puma.sock fail_timeout=0;\n}\n\nserver {\n    listen 80;\n    server_name potato.domain.com;\n\n    root /home/username/potato/site/public;\n\n    try_files $uri/index.html $uri @app;\n\n    location @app {\n        proxy_pass http://app;\n        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;\n        proxy_set_header Host $http_host;\n        proxy_redirect off;\n    }\n\n    error_page 500 502 503 504 /500.html;\n    client_max_body_size 4G;\n    keepalive_timeout 10;\n}\n</code></pre>\n\n<p>And orange file (orange.domain.com):</p>\n\n<pre><code>upstream events {\n    # Path to Puma SOCK file, as defined previously\n    server unix:/home/username/orange/site/shared/sockets/puma.sock fail_timeout=0;\n}\n\nserver {\n    listen 80;\n    server_name orange.domain.com;\n\n    root /home/username/potato/site/public;\n\n    try_files $uri/index.html $uri @app;\n\n    location @app {\n        proxy_pass http://app;\n        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;\n        proxy_set_header Host $http_host;\n        proxy_redirect off;\n    }\n\n    error_page 500 502 503 504 /500.html;\n    client_max_body_size 4G;\n    keepalive_timeout 10;\n}\n</code></pre>\n\n<p>Does anyone notice something wrong in any file? or know any good tutorial to do this?</p>\n\n<p>Sorry for the long post and thanks!</p>\n\n<p><strong>UPDATE:</strong></p>\n\n<p>I merged the two files in nginx/sites-enabled and by looking at the logs it seems to be routing OK.</p>\n\n<p>The problem now is that the puma.sock file is not being created for one of the apps, log error:</p>\n\n<pre><code>17:45:05 [crit] 2444#0: *16 connect() to unix:/home/username/orange/site/shared/sockets/orange-puma.sock failed (2: No such file or directory) while connecting to upstream, client: IP, server: orange.domain.com, request: \"GET / HTTP/1.1\", upstream: \"http://unix:/home/username/orange/site/shared/sockets/orange-puma.sock:/\", host: \"orange.domain.com\", referrer: \"http://orange.domain.com/\"\n</code></pre>\n\n<p>The puma.rb for orange looks like this now:</p>\n\n<pre><code># Change to match your CPU core count\nworkers 1\n\n# Min and Max threads per worker\nthreads 1, 6\n\napp_dir = File.expand_path(\"../..\", __FILE__)\nshared_dir = \"#{app_dir}/shared\"\n\n# Default to production\nrails_env = \"production\"\nenvironment rails_env\n\n# Set up socket location\nbind \"unix://#{shared_dir}/sockets/events-puma.sock\"\n\n# Logging\nstdout_redirect \"#{shared_dir}/log/puma.stdout.log\", \"#{shared_dir}/log/puma.stderr.log\", true\n\n# Set master PID and state locations\npidfile \"#{shared_dir}/pids/events-puma.pid\"\nstate_path \"#{shared_dir}/pids/events-puma.state\"\nactivate_control_app\n\non_worker_boot do\n  require \"active_record\"\n  ActiveRecord::Base.connection.disconnect! rescue ActiveRecord::ConnectionNotEstablished\n  ActiveRecord::Base.establish_connection(YAML.load_file(\"#{app_dir}/config/database.yml\")[rails_env])\nend\n</code></pre>\n\n<p>I seem to have something missconfigures with puma somewhere, any help?\nThanks</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1489543138, "post_id": 42799664, "comment_id": 72713879, "body": "<code>Dir.glob</code> is unlikely to return something that doesn&#39;t exist unless in that very short period of time someone else deleted that file or directory. How would it find something if it didn&#39;t exist?"}, {"owner": {"reputation": 51, "user_id": 7048290, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/00289d14236128100c1464c3f4918425?s=128&d=identicon&r=PG&f=1", "display_name": "simplytrue", "link": "https://stackoverflow.com/users/7048290/simplytrue"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1489627260, "post_id": 42799664, "comment_id": 72758653, "body": "Thank you.  I can see what i was trying to do was wrong."}], "answers": [{"comments": [{"owner": {"reputation": 51, "user_id": 7048290, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/00289d14236128100c1464c3f4918425?s=128&d=identicon&r=PG&f=1", "display_name": "simplytrue", "link": "https://stackoverflow.com/users/7048290/simplytrue"}, "edited": false, "score": 0, "creation_date": 1489689351, "post_id": 42799864, "comment_id": 72793434, "body": "I added an edit to this - not sure if it was approved but I could not get it to work until I removed the &quot;return&quot; before &quot;puts &quot;the file #{search_file_name} can&#39;t be found&quot; if file.empty?&quot; line."}], "tags": [], "owner": {"reputation": 1853, "user_id": 2501082, "user_type": "registered", "accept_rate": 20, "profile_image": "https://i.stack.imgur.com/qdJBQ.jpg?s=128&g=1", "display_name": "David Gross", "link": "https://stackoverflow.com/users/2501082/david-gross"}, "is_accepted": true, "score": 4, "last_activity_date": 1489690051, "last_edit_date": 1489690051, "creation_date": 1489543383, "answer_id": 42799864, "question_id": 42799664, "link": "https://stackoverflow.com/questions/42799664/how-do-i-get-this-if-else-command-when-using-dir-glob-to-let-me-know-when-the/42799864#42799864", "title": "How do I get this if - else command, when using Dir.glob to let me know when the file does not exists", "body": "<p>You can't iterate through an empty Array. There is no need to set a conditional with File.exist?. Dir.glob will return [] if the file can not be found. </p>\n\n<pre><code>def find_files(folder, search_file_name)\n  file = Dir.glob(\"#{folder}/**/#{search_file_name}\")\n  puts \"the file #{search_file_name} can't be found\" if file.empty?\n  file.each do |f|\n    puts \"the file name #{f} is found\"\n    puts \"now I am working on #{f}\" \n  end\nend\n</code></pre>\n"}], "owner": {"reputation": 51, "user_id": 7048290, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/00289d14236128100c1464c3f4918425?s=128&d=identicon&r=PG&f=1", "display_name": "simplytrue", "link": "https://stackoverflow.com/users/7048290/simplytrue"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 82, "favorite_count": 0, "accepted_answer_id": 42799864, "answer_count": 1, "score": 1, "last_activity_date": 1489690051, "creation_date": 1489541715, "question_id": 42799664, "link": "https://stackoverflow.com/questions/42799664/how-do-i-get-this-if-else-command-when-using-dir-glob-to-let-me-know-when-the", "title": "How do I get this if - else command, when using Dir.glob to let me know when the file does not exists", "body": "<p>I have successfully build a file finder with Dir.glob but now am wanting to know if the file is not found as well - dealing with 1000's of files so I need to know if one is not found.   </p>\n\n<p>The code I have is this:</p>\n\n<pre><code> # code above gets a file name from a list of in a file then I search the computer for the file:\n\n Dir.glob(\"#{folder}/**/#{search_file_name}\")  do |f|  \n\n if File.exists?(f)\n     puts \"the file name #{f} is found\"\n     puts \"now I am working on #{f}\"  \n else\n     puts \"the file #{f} cannot be found\"\n\n     end\n\n    #the rest of the code moves the file to a another directory if found.\n</code></pre>\n\n<p>This works well for files that exists.  But if the file does not exists I do not get a message in the terminal to that effect.       I am missing something obvious.  Perhaps my Dir.glob only holds the files it finds so that |f| never passes a file to the if statement if it does not exists.   </p>\n"}, {"tags": ["ruby", "parameters", "initialization"], "answers": [{"comments": [{"owner": {"reputation": 1267, "user_id": 1718633, "user_type": "registered", "accept_rate": 31, "profile_image": "https://www.gravatar.com/avatar/fabe1e6b28afc64cdbd3c071621a7565?s=128&d=identicon&r=PG", "display_name": "Rich_F", "link": "https://stackoverflow.com/users/1718633/rich-f"}, "edited": false, "score": 0, "creation_date": 1489567699, "post_id": 42799699, "comment_id": 72722570, "body": "That last one seems the most legit due to how direct it is, if I have defaults."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "reply_to_user": {"reputation": 1267, "user_id": 1718633, "user_type": "registered", "accept_rate": 31, "profile_image": "https://www.gravatar.com/avatar/fabe1e6b28afc64cdbd3c071621a7565?s=128&d=identicon&r=PG", "display_name": "Rich_F", "link": "https://stackoverflow.com/users/1718633/rich-f"}, "edited": false, "score": 0, "creation_date": 1489568083, "post_id": 42799699, "comment_id": 72722788, "body": "@Rich_F It&#39;s the way I&#39;d suggest going about it if you&#39;re not concerned about any sort of Ruby 1.9 compatibility. As that&#39;s been end-of-lifed, you should be good."}, {"owner": {"reputation": 1267, "user_id": 1718633, "user_type": "registered", "accept_rate": 31, "profile_image": "https://www.gravatar.com/avatar/fabe1e6b28afc64cdbd3c071621a7565?s=128&d=identicon&r=PG", "display_name": "Rich_F", "link": "https://stackoverflow.com/users/1718633/rich-f"}, "edited": false, "score": 0, "creation_date": 1489568271, "post_id": 42799699, "comment_id": 72722896, "body": "More concerned about abstract applications, or general approach to tossing new properties at the object at instantiation instead of using the attr_accessor.  One step onCreate better than two."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "reply_to_user": {"reputation": 1267, "user_id": 1718633, "user_type": "registered", "accept_rate": 31, "profile_image": "https://www.gravatar.com/avatar/fabe1e6b28afc64cdbd3c071621a7565?s=128&d=identicon&r=PG", "display_name": "Rich_F", "link": "https://stackoverflow.com/users/1718633/rich-f"}, "edited": false, "score": 0, "creation_date": 1489569226, "post_id": 42799699, "comment_id": 72723486, "body": "Try it out. This is something introduced in Ruby 2.0 that hasn&#39;t been used nearly as much as it should."}], "tags": [], "owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "is_accepted": true, "score": 5, "last_activity_date": 1489542001, "creation_date": 1489542001, "answer_id": 42799699, "question_id": 42799519, "link": "https://stackoverflow.com/questions/42799519/ruby-object-initialize-with-optional-arguments/42799699#42799699", "title": "Ruby Object Initialize with Optional Arguments", "body": "<p>If you're going to do that you need to accept not an array of arguments (<em>varargs</em> style) like you've specified, but either an options hash or the new <em>keyword-args</em> style option.</p>\n\n<p>The classic approach:</p>\n\n<pre><code>def initialize(attributes = nil)\n  attributes and attributes.each do |k,v|\n    instance_variable_set(\"@#{k}\", v) unless v.nil?\n  end\nend\n</code></pre>\n\n<p>The new keyword-arguments approach:</p>\n\n<pre><code>def initialize(**options)\n  attributes.each do |k,v|\n    instance_variable_set(\"@#{k}\", v) unless v.nil?\n  end\nend\n</code></pre>\n\n<p>You can also subclass <a href=\"https://docs.ruby-lang.org/en/2.4.0/OpenStruct.html\" rel=\"noreferrer\">OpenStruct</a> to get behaviour like this for free.</p>\n\n<p>Keep in mind there's a new option style that might be a good mix of both these approaches:</p>\n\n<pre><code>def initialize(sid: '123', token: '...', ...)\n  @sid = sid\n  @token = token\n  # ...\nend\n</code></pre>\n\n<p>You can specify defaults for the named keyword arguments.</p>\n"}], "owner": {"reputation": 1267, "user_id": 1718633, "user_type": "registered", "accept_rate": 31, "profile_image": "https://www.gravatar.com/avatar/fabe1e6b28afc64cdbd3c071621a7565?s=128&d=identicon&r=PG", "display_name": "Rich_F", "link": "https://stackoverflow.com/users/1718633/rich-f"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 5219, "favorite_count": 1, "accepted_answer_id": 42799699, "answer_count": 1, "score": 2, "last_activity_date": 1489542001, "creation_date": 1489540698, "question_id": 42799519, "link": "https://stackoverflow.com/questions/42799519/ruby-object-initialize-with-optional-arguments", "title": "Ruby Object Initialize with Optional Arguments", "body": "<p>How can I code an initalizer() method to form instance variables (empty or otherwise), then iterate through a set of args to set instance variables?</p>\n\n<p>This is what I am thinking:</p>\n\n<pre><code>def initialize(*p)\n  @sid                      = \"123asdf654\"\n  @token                    = \"abc123\"\n  @bert                     = \"1192875119\"\n  @me                       = \"4165551212\"\n  @media_url                = \"\"\n  @message                  = \"\"\n\n  args.each do |k,v|\n    instance_variable_set(\"@#{k}\", v) unless v.nil?\n  end\nend\n</code></pre>\n\n<p>I want to have the ability to set known instance variables (shown here), then iterate through args and either update the values of chosen instance variables, or create new ones.  </p>\n"}, {"tags": ["ruby-on-rails", "ruby", "routing", "ruby-on-rails-5"], "comments": [{"owner": {"reputation": 799, "user_id": 2559093, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/eOwPf.jpg?s=128&g=1", "display_name": "OneNeptune", "link": "https://stackoverflow.com/users/2559093/oneneptune"}, "edited": false, "score": 0, "creation_date": 1489545040, "post_id": 42799472, "comment_id": 72714347, "body": "What&#39;s the file name? Rails requires file name to match the class name."}, {"owner": {"reputation": 105, "user_id": 7291482, "user_type": "registered", "accept_rate": 27, "profile_image": "https://www.gravatar.com/avatar/7e95fa3cbcbe679e44dde223e6860017?s=128&d=identicon&r=PG&f=1", "display_name": "xeno7", "link": "https://stackoverflow.com/users/7291482/xeno7"}, "reply_to_user": {"reputation": 799, "user_id": 2559093, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/eOwPf.jpg?s=128&g=1", "display_name": "OneNeptune", "link": "https://stackoverflow.com/users/2559093/oneneptune"}, "edited": false, "score": 0, "creation_date": 1489549349, "post_id": 42799472, "comment_id": 72715379, "body": "File name is people_controller.rb, and the model is person.rb."}, {"owner": {"reputation": 9015, "user_id": 155826, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/55RCe.jpg?s=128&g=1", "display_name": "Ryan Crispin Heneise", "link": "https://stackoverflow.com/users/155826/ryan-crispin-heneise"}, "edited": false, "score": 3, "creation_date": 1489550995, "post_id": 42799472, "comment_id": 72715681, "body": "Please post an excerpt from your logfile containing this routing error."}, {"owner": {"reputation": 4527, "user_id": 5497690, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/577c8ad14fffb59cd619e43634c51dad?s=128&d=identicon&r=PG&f=1", "display_name": "puneet18", "link": "https://stackoverflow.com/users/5497690/puneet18"}, "edited": false, "score": 1, "creation_date": 1489558301, "post_id": 42799472, "comment_id": 72717941, "body": "Is it working locally?"}], "answers": [{"tags": [], "owner": {"reputation": 4527, "user_id": 5497690, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/577c8ad14fffb59cd619e43634c51dad?s=128&d=identicon&r=PG&f=1", "display_name": "puneet18", "link": "https://stackoverflow.com/users/5497690/puneet18"}, "is_accepted": false, "score": 0, "last_activity_date": 1489558611, "creation_date": 1489558611, "answer_id": 42802345, "question_id": 42799472, "link": "https://stackoverflow.com/questions/42799472/rails-5-actioncontrollerroutingerror-uninitialized-constant-peoplecontrolle/42802345#42802345", "title": "Rails 5 - ActionController::RoutingError (uninitialized constant PeopleController)", "body": "<p>Run command:</p>\n\n<pre><code>bundle exec rake routes\n</code></pre>\n\n<p>and check routes for people.</p>\n"}, {"comments": [{"owner": {"reputation": 105, "user_id": 7291482, "user_type": "registered", "accept_rate": 27, "profile_image": "https://www.gravatar.com/avatar/7e95fa3cbcbe679e44dde223e6860017?s=128&d=identicon&r=PG&f=1", "display_name": "xeno7", "link": "https://stackoverflow.com/users/7291482/xeno7"}, "edited": false, "score": 0, "creation_date": 1489731962, "post_id": 42809118, "comment_id": 72808614, "body": "It was working locally but not on Heroku. I realised that git hadn&#39;t added a bunch of files. I used git commit -am command but it only seems to work when I do git add -A and then git push -m seperately. Seems like a silly mistake in retrospect."}, {"owner": {"reputation": 15, "user_id": 7680962, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-F73nmOAlQQQ/AAAAAAAAAAI/AAAAAAAAAF8/glQcqW7dhrE/photo.jpg?sz=128", "display_name": "Louis Amon", "link": "https://stackoverflow.com/users/7680962/louis-amon"}, "reply_to_user": {"reputation": 105, "user_id": 7291482, "user_type": "registered", "accept_rate": 27, "profile_image": "https://www.gravatar.com/avatar/7e95fa3cbcbe679e44dde223e6860017?s=128&d=identicon&r=PG&f=1", "display_name": "xeno7", "link": "https://stackoverflow.com/users/7291482/xeno7"}, "edited": false, "score": 0, "creation_date": 1489809891, "post_id": 42809118, "comment_id": 72846429, "body": "So you have it sorted now?"}], "tags": [], "owner": {"reputation": 15, "user_id": 7680962, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-F73nmOAlQQQ/AAAAAAAAAAI/AAAAAAAAAF8/glQcqW7dhrE/photo.jpg?sz=128", "display_name": "Louis Amon", "link": "https://stackoverflow.com/users/7680962/louis-amon"}, "is_accepted": false, "score": 0, "last_activity_date": 1489579088, "creation_date": 1489579088, "answer_id": 42809118, "question_id": 42799472, "link": "https://stackoverflow.com/questions/42799472/rails-5-actioncontrollerroutingerror-uninitialized-constant-peoplecontrolle/42809118#42809118", "title": "Rails 5 - ActionController::RoutingError (uninitialized constant PeopleController)", "body": "<p>I have tried exactly the same thing you did on my environment and it works perfectly. I could not find anything wrong with the code. </p>\n\n<p>Apart from looking at your file structure on your server. (could be files are in the wrong folder).</p>\n\n<p>I am with @puneet18, does it work locally for you?</p>\n"}, {"tags": [], "owner": {"reputation": 18763, "user_id": 472495, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/4rtxd.png?s=128&g=1", "display_name": "halfer", "link": "https://stackoverflow.com/users/472495/halfer"}, "is_accepted": false, "score": 0, "last_activity_date": 1489858103, "creation_date": 1489858103, "answer_id": 42877554, "question_id": 42799472, "link": "https://stackoverflow.com/questions/42799472/rails-5-actioncontrollerroutingerror-uninitialized-constant-peoplecontrolle/42877554#42877554", "title": "Rails 5 - ActionController::RoutingError (uninitialized constant PeopleController)", "body": "<p><em>(Posted on behalf of the OP)</em>.</p>\n\n<p>I hadn't staged my files in Git properly so it wasn't pushing all my changes to Heroku. Whoops! \u00af\\_(\u30c4)_/\u00af</p>\n"}], "owner": {"reputation": 105, "user_id": 7291482, "user_type": "registered", "accept_rate": 27, "profile_image": "https://www.gravatar.com/avatar/7e95fa3cbcbe679e44dde223e6860017?s=128&d=identicon&r=PG&f=1", "display_name": "xeno7", "link": "https://stackoverflow.com/users/7291482/xeno7"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 606, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1489858103, "creation_date": 1489540419, "last_edit_date": 1489858055, "question_id": 42799472, "link": "https://stackoverflow.com/questions/42799472/rails-5-actioncontrollerroutingerror-uninitialized-constant-peoplecontrolle", "title": "Rails 5 - ActionController::RoutingError (uninitialized constant PeopleController)", "body": "<p>I am getting this routing error in my Heroku logs and I am unsure how to fix it. I followed the instructions <a href=\"https://richonrails.com/articles/mongodb-and-rails\" rel=\"nofollow noreferrer\">seen here</a>.</p>\n\n<p>Here is my routes.rb file:</p>\n\n<pre><code>Rails.application.routes.draw do\n  resources :people, except: [:show]\n\n  root to: \"people#index\"\nend\n</code></pre>\n\n<p>The controller people_controller.rb:</p>\n\n<pre><code>class PeopleController &lt; ApplicationController\n  def index\n    @people = Person.all\n  end\n\n  def new\n    @person = Person.new\n  end\n\n  def create\n    @person = Person.new(person_params)\n\n    if @person.save\n      redirect_to people_path, notice: \"The person has been created!\" and return\n    end\n    render 'new'\n  end\n\n  def edit\n    @person = Person.find(params[:id])\n  end\n\n  def update\n    @person = Person.find(params[:id])\n\n    if @person.update_attributes(person_params)\n      redirect_to people_path, notice: \"#{@person.first_name} #{@person.last_name} has been updated!\" and return\n    end\n\n    render 'edit'\n  end\n\n  def destroy\n    @person = Person.find(params[:id])\n    @person.destroy\n\n    redirect_to people_path, notice: \"#{@person.first_name} #{@person.last_name} has been deleted!\" and return\n  end\nprivate\n  def person_params\n    params.require(:person).permit(:first_name, :last_name, :email, :notes)\n  end\nend\n</code></pre>\n\n<p>In case it's needed, here's person.rb model:</p>\n\n<pre><code>class Person\n  include Mongoid::Document\n  field :first_name, type: String\n  field :last_name, type: String\n  field :email, type: String\n  field :notes, type: String\nend\n</code></pre>\n"}, {"tags": ["ruby", "optionparser"], "answers": [{"tags": [], "owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "is_accepted": false, "score": 0, "last_activity_date": 1489537067, "creation_date": 1489537067, "answer_id": 42798953, "question_id": 42798465, "link": "https://stackoverflow.com/questions/42798465/ruby-options-parser-with-list-of-input-values/42798953#42798953", "title": "Ruby Options Parser with list of input values", "body": "<p>If you start with <a href=\"http://ruby-doc.org/stdlib-2.4.0/libdoc/optparse/rdoc/OptionParser.html\" rel=\"nofollow noreferrer\">OptionParser</a> then you end up with a list of arguments, and from that you can presume the first is a command.</p>\n\n<p>To validate it you typically do this:</p>\n\n<pre><code>case (command)\nwhen 'action'\n  do_action\nwhen 'other'\n  do_other\nelse\n  $stderr.puts \"#{command.inspect} is not a valid command.\"\n  exit(-1)\nend\n</code></pre>\n"}], "owner": {"reputation": 107, "user_id": 4534111, "user_type": "registered", "accept_rate": 67, "profile_image": "https://lh3.googleusercontent.com/-iOFg5EceE1w/AAAAAAAAAAI/AAAAAAAAACg/wouaDbyAWYM/photo.jpg?sz=128", "display_name": "Bo Yuan", "link": "https://stackoverflow.com/users/4534111/bo-yuan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 182, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1489537067, "creation_date": 1489534321, "question_id": 42798465, "link": "https://stackoverflow.com/questions/42798465/ruby-options-parser-with-list-of-input-values", "title": "Ruby Options Parser with list of input values", "body": "<p>I am new to ruby and working on a script with command line options.</p>\n\n<p>I need to specify a list of valid input values(String) for a field. </p>\n\n<p>Is there a concise way to do this.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-5"], "answers": [{"tags": [], "owner": {"reputation": 27144, "user_id": 3857758, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/58c4295826435f049b7fc32b98c240f9?s=128&d=identicon&r=PG&f=1", "display_name": "Ursus", "link": "https://stackoverflow.com/users/3857758/ursus"}, "is_accepted": true, "score": 2, "last_activity_date": 1489534322, "creation_date": 1489534322, "answer_id": 42798466, "question_id": 42798333, "link": "https://stackoverflow.com/questions/42798333/ruby-assign-variable-and-return-if-found-in-db/42798466#42798466", "title": "Ruby - Assign variable and return if found in DB", "body": "<p>There is not a best approach I think. It's a matter of taste. I usually do something like your latter way in a Rails 5 API. Something like</p>\n\n<pre><code>def show\n  @book = Book.find(params[:id])\nrescue ActiveRecord::RecordNotFound\n  render json: { error: \"Book not found\" }\nend\n</code></pre>\n\n<p>And if everything goes fine I have a view for the happy path</p>\n"}, {"comments": [{"owner": {"reputation": 761, "user_id": 4884692, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/118303f1846a2bdfa10163cf0a3492b5?s=128&d=identicon&r=PG&f=1", "display_name": "pronoob", "link": "https://stackoverflow.com/users/4884692/pronoob"}, "edited": false, "score": 0, "creation_date": 1489541545, "post_id": 42798981, "comment_id": 72713501, "body": "Only concern is that Rubocop will complain about use of single = in an if statement"}], "tags": [], "owner": {"reputation": 18856, "user_id": 1359650, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/dffc4318ac93e728a26c8e8b51b4eb37?s=128&d=identicon&r=PG", "display_name": "jvillian", "link": "https://stackoverflow.com/users/1359650/jvillian"}, "is_accepted": false, "score": 1, "last_activity_date": 1489537291, "creation_date": 1489537291, "answer_id": 42798981, "question_id": 42798333, "link": "https://stackoverflow.com/questions/42798333/ruby-assign-variable-and-return-if-found-in-db/42798981#42798981", "title": "Ruby - Assign variable and return if found in DB", "body": "<p><a href=\"http://mensfeld.pl/2015/03/exceptions-should-not-be-expected-stop-using-them-for-control-flow-or-any-other-logic-handling-in-ruby/\" rel=\"nofollow noreferrer\">Some</a> consider it an anti-pattern to use exceptions for flow control. Personally, I tend to agree. But, I suppose it is a matter of style and preference.</p>\n\n<p>How about something like:</p>\n\n<pre><code>  def foo_before_action\n    unless @plan = Plan.find_by(id: params[:id])\n      redirect_to plan_path, warning: \"Invalid plan selected!\"\n    end\n  end\n</code></pre>\n\n<p>Or perhaps as a one-liner:</p>\n\n<pre><code>  def foo_before_action\n    redirect_to plan_path, warning: \"Invalid plan selected!\" unless @plan = Plan.find_by(id: params[:id])\n  end\n</code></pre>\n\n<p>The former is, perhaps, a bit more readable.</p>\n"}], "owner": {"reputation": 761, "user_id": 4884692, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/118303f1846a2bdfa10163cf0a3492b5?s=128&d=identicon&r=PG&f=1", "display_name": "pronoob", "link": "https://stackoverflow.com/users/4884692/pronoob"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 82, "favorite_count": 0, "accepted_answer_id": 42798466, "answer_count": 2, "score": 1, "last_activity_date": 1489537291, "creation_date": 1489533622, "question_id": 42798333, "link": "https://stackoverflow.com/questions/42798333/ruby-assign-variable-and-return-if-found-in-db", "title": "Ruby - Assign variable and return if found in DB", "body": "<p>I'm looking for a neater way to assign a variable and return if the value is found in the DB in a controller before_action method that does not require multiple DB calls:</p>\n\n<pre><code>if Plan.exists?(plan)\n  @plan = Plan.find(plan)\n  return\nend\nlogger.error \"User selected invalid plan.\"\nredirect_to plan_path, warning: \"Invalid plan selected!\"\n</code></pre>\n\n<p>Would this be an appropriate place to use a rescue? E.g:</p>\n\n<pre><code>begin\n  @plan = Plan.find(plan)\nrescue\n  logger.error \"User selected invalid plan.\"\n  redirect_to plan_path, warning: \"Invalid plan selected!\"\nend\n</code></pre>\n\n<p>It feels wrong... what is the best approach?</p>\n"}, {"tags": ["sql", "ruby-on-rails", "ruby", "postgresql", "memory"], "answers": [{"comments": [{"owner": {"reputation": 339, "user_id": 5678403, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/JB4YW.jpg?s=128&g=1", "display_name": "Ohad Dahan", "link": "https://stackoverflow.com/users/5678403/ohad-dahan"}, "edited": false, "score": 0, "creation_date": 1489565181, "post_id": 42799437, "comment_id": 72721148, "body": "Thanks, will do. I&#39;ll implement my own dependent on destroy callback as suggested here."}], "tags": [], "owner": {"reputation": 1302, "user_id": 1368977, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c79672007d59af69a05f2b5f6929b53f?s=128&d=identicon&r=PG", "display_name": "Marc Rohloff", "link": "https://stackoverflow.com/users/1368977/marc-rohloff"}, "is_accepted": true, "score": 1, "last_activity_date": 1489540178, "creation_date": 1489540178, "answer_id": 42799437, "question_id": 42798040, "link": "https://stackoverflow.com/questions/42798040/low-memory-destroy-operations/42799437#42799437", "title": "Low memory destroy operations", "body": "<p>I would suggest that you replace <code>destroy_all</code> with <code>delete_all</code>. <code>delete_all</code> will delete the objects (records) directly from the database without loading them into memory or reading them at all. </p>\n\n<p>One caveat is that no ActiveRecord callbacks will be run so you need to deal with that yourself if necessary.</p>\n"}, {"comments": [{"owner": {"reputation": 339, "user_id": 5678403, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/JB4YW.jpg?s=128&g=1", "display_name": "Ohad Dahan", "link": "https://stackoverflow.com/users/5678403/ohad-dahan"}, "edited": false, "score": 0, "creation_date": 1489565130, "post_id": 42801016, "comment_id": 72721119, "body": "Yeah I guess I&#39;ll have. delete_all with the relevant foreign key inputs and that&#39;s it: I recently started understanding that clinging to Rails too hard is bad and I should implement more native/semi-native SQL/HTML/JS instead of doing flips just so it will be &quot;the Rails way&quot;"}], "tags": [], "owner": {"reputation": 9015, "user_id": 155826, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/55RCe.jpg?s=128&g=1", "display_name": "Ryan Crispin Heneise", "link": "https://stackoverflow.com/users/155826/ryan-crispin-heneise"}, "is_accepted": false, "score": 1, "last_activity_date": 1489551420, "creation_date": 1489551420, "answer_id": 42801016, "question_id": 42798040, "link": "https://stackoverflow.com/questions/42798040/low-memory-destroy-operations/42801016#42801016", "title": "Low memory destroy operations", "body": "<p>Using <code>destroy_all</code> actually instantiates each object into memory and then runs each item's callbacks before destroying just that one row from the database. Very inefficient. </p>\n\n<p>Instead, as suggested by Marc, you should use <code>delete_all</code> in this order: </p>\n\n<pre><code>SubItem.where(conditions).delete_all\nItem.where(conditions).delete_all\nSearch.where(conditions).delete_all\n</code></pre>\n\n<p>This will run a SQL statement like <code>DELETE FROM sub_items WHERE conditions...</code>. Three SQL statements instead of (potentially) hundreds or thousands. Should be a lot faster. </p>\n"}], "owner": {"reputation": 339, "user_id": 5678403, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/JB4YW.jpg?s=128&g=1", "display_name": "Ohad Dahan", "link": "https://stackoverflow.com/users/5678403/ohad-dahan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 111, "favorite_count": 0, "accepted_answer_id": 42799437, "answer_count": 2, "score": 0, "last_activity_date": 1489551420, "creation_date": 1489531923, "question_id": 42798040, "link": "https://stackoverflow.com/questions/42798040/low-memory-destroy-operations", "title": "Low memory destroy operations", "body": "<p>I have the following relational DB:</p>\n\n<pre><code>class Search\n  has_many :items , dependent: :destroy\nend\nclass Item\n  has_many :sub_items   , dependent: :destroy\nend\nclass SubItem\nend\n</code></pre>\n\n<p>Items can range from 100 to 10,000.\nSumItems is around 100 on average.</p>\n\n<p>Trying to keep my memory low I used the following:</p>\n\n<p><strong>class Search</strong></p>\n\n<pre><code>before_destroy  :destroy_items_in_batches\n    def destroy_items_in_batches\n    self.try(:items).try(:in_batches, { of: 300 } ).try(:destroy_all)\n  end\n</code></pre>\n\n<p><strong>class Item</strong></p>\n\n<pre><code>before_destroy  :destroy_transactions_in_batches\n  def destroy_transactions_in_batches\n    self.try(:sub_items).try(:in_batches, { of: 100 } ).try(:destroy_all)\n  end\n</code></pre>\n\n<p>It still wasn't enough , so I added a <code>select</code> into the query to reduce the memory loaded since I'm destroy it anyway so all I care about is the ID I need to remove from the database.</p>\n\n<pre><code>self.try(:items).try(:select,:id).try(:in_batches, { of: 300 } ).try(:destroy_all)\nself.try(:sub_items).try(:select,:id).try(:in_batches, { of: 100 } ).try(:destroy_all)\n</code></pre>\n\n<p>Anything else I can do to remove the memory usage?\n(besides the obvious solution of decreasing the batches size)</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "web-scraping", "nokogiri", "watir"], "comments": [{"owner": {"reputation": 16229, "user_id": 525478, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/3b6c0b47a0c430a0b141baee7ea845be?s=128&d=identicon&r=PG", "display_name": "Brad Werth", "link": "https://stackoverflow.com/users/525478/brad-werth"}, "edited": false, "score": 0, "creation_date": 1489532085, "post_id": 42797887, "comment_id": 72710801, "body": "is the element present?"}, {"owner": {"reputation": 15, "user_id": 3945953, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KBmVS.jpg?s=128&g=1", "display_name": "KSan", "link": "https://stackoverflow.com/users/3945953/ksan"}, "reply_to_user": {"reputation": 16229, "user_id": 525478, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/3b6c0b47a0c430a0b141baee7ea845be?s=128&d=identicon&r=PG", "display_name": "Brad Werth", "link": "https://stackoverflow.com/users/525478/brad-werth"}, "edited": false, "score": 0, "creation_date": 1489534676, "post_id": 42797887, "comment_id": 72711675, "body": "I get a true when i do this: puts browser.input(name: &#39;rt_leaveday&#39;).exists?"}], "answers": [{"comments": [{"owner": {"reputation": 15, "user_id": 3945953, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KBmVS.jpg?s=128&g=1", "display_name": "KSan", "link": "https://stackoverflow.com/users/3945953/ksan"}, "edited": false, "score": 0, "creation_date": 1489540731, "post_id": 42799341, "comment_id": 72713301, "body": "At first I was thinking that it was something up with tripadvisor, so i was trying something on kayak and was running into the same problem. That&#39;s when I realize that they both were using jquery datepicker. I was then trying to search how to get Watir to work with datepicker. Thanks man, you got me pointed towards the right way in solving my problem"}, {"owner": {"reputation": 1853, "user_id": 2501082, "user_type": "registered", "accept_rate": 20, "profile_image": "https://i.stack.imgur.com/qdJBQ.jpg?s=128&g=1", "display_name": "David Gross", "link": "https://stackoverflow.com/users/2501082/david-gross"}, "reply_to_user": {"reputation": 15, "user_id": 3945953, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KBmVS.jpg?s=128&g=1", "display_name": "KSan", "link": "https://stackoverflow.com/users/3945953/ksan"}, "edited": false, "score": 0, "creation_date": 1489540832, "post_id": 42799341, "comment_id": 72713333, "body": "No worries it was a fun problem to fix :)"}, {"owner": {"reputation": 15, "user_id": 3945953, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KBmVS.jpg?s=128&g=1", "display_name": "KSan", "link": "https://stackoverflow.com/users/3945953/ksan"}, "edited": false, "score": 0, "creation_date": 1489576993, "post_id": 42799341, "comment_id": 72729018, "body": "Hey another quick question. I&#39;m playing around with the script again this morning and I&#39;m just not realizing I&#39;m getting a different results for the puts browser.url. Mine is spitting out: <a href=\"https://www.tripadvisor.com/CheapFlightsHome\" rel=\"nofollow noreferrer\">tripadvisor.com/CheapFlightsHome</a>"}], "tags": [], "owner": {"reputation": 1853, "user_id": 2501082, "user_type": "registered", "accept_rate": 20, "profile_image": "https://i.stack.imgur.com/qdJBQ.jpg?s=128&g=1", "display_name": "David Gross", "link": "https://stackoverflow.com/users/2501082/david-gross"}, "is_accepted": true, "score": 2, "last_activity_date": 1489603001, "last_edit_date": 1489603001, "creation_date": 1489539518, "answer_id": 42799341, "question_id": 42797887, "link": "https://stackoverflow.com/questions/42797887/ruby-watir-gem-timing-out-on-form-input/42799341#42799341", "title": "Ruby Watir Gem, Timing Out on Form Input", "body": "<p>It can't set value on the <code>rt_leaveday</code> or <code>rt_leavemonth</code> because they are hidden inputs. But you can execute a script to click on <code>dateselector</code>: </p>\n\n<pre><code>require 'watir'\n\nbrowser = Watir::Browser.new\n\nbrowser.goto('https://tripadvisor.com/CheapFlightsHome')\nbrowser.text_field(name: 'orig').set('Boston, MA - Logan International Airport (BOS)')\nbrowser.text_field(name: 'dest').set('Milan, Italy - All Airports (MIL)')\nbrowser.execute_script('document.querySelector(\".in_date\").click()')\nbrowser.execute_script('document.querySelector(\".day_28\").click()')\nbrowser.execute_script('document.querySelector(\".out_date\").click()')\nbrowser.execute_script('document.querySelector(\".day_2\").click()')\nbrowser.span(id: \"CHECK_FARES_BUTTON\").fire_event :click\nputs browser.url\nbrowser.quit\n=&gt; https://www.tripadvisor.com/CheapFlightsSearchResults-g187849-a_airport0.BOS-a_airport1.MIL-a_cos.0-a_date0.20170328-a_date1.20170402-a_nearby0.no-a_nearby1.no-a_nonstop.no-a_pax0.a-a_travelers.1-Milan_Lombardy.html\n</code></pre>\n"}], "owner": {"reputation": 15, "user_id": 3945953, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KBmVS.jpg?s=128&g=1", "display_name": "KSan", "link": "https://stackoverflow.com/users/3945953/ksan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 494, "favorite_count": 0, "accepted_answer_id": 42799341, "answer_count": 1, "score": 0, "last_activity_date": 1489603120, "creation_date": 1489531157, "last_edit_date": 1489603120, "question_id": 42797887, "link": "https://stackoverflow.com/questions/42797887/ruby-watir-gem-timing-out-on-form-input", "title": "Ruby Watir Gem, Timing Out on Form Input", "body": "<p>I'm practicing webscraping using Watir, Mechanize and Nokigiri gems. </p>\n\n<p>I'm running into an issue with my Watir script. My plan is to get a list of prices from flights via <a href=\"http://tripadvisor.com/\" rel=\"nofollow noreferrer\">http://tripadvisor.com/</a>. When I run the script, the Chrome browser opens as it should, the script proceeds to fill out the first parts of the form, origin and destination and then it halts. Here is the error message I'm getting:</p>\n\n<pre><code>This code has slept for the duration of the default timeout waiting for an Element to be present. If the test is still passing, consider using Element#exists? instead of rescuing UnknownObjectException\n/home/jaffejoe/.rbenv/versions/2.4.0/lib/ruby/gems/2.4.0/gems/watir-6.2.0/lib/watir/elements/element.rb:515:in `rescue in wait_for_present': element located, but timed out after 30 seconds, waiting for true condition on #&lt;Watir::Input: located: true; {:name=&gt;\"rt_leaveday\", :tag_name=&gt;\"input\"}&gt; (Watir::Exception::UnknownObjectException)\n    from /home/jaffejoe/.rbenv/versions/2.4.0/lib/ruby/gems/2.4.0/gems/watir-6.2.0/lib/watir/elements/element.rb:505:in `wait_for_present'\n    from /home/jaffejoe/.rbenv/versions/2.4.0/lib/ruby/gems/2.4.0/gems/watir-6.2.0/lib/watir/elements/element.rb:522:in `wait_for_enabled'\n    from /home/jaffejoe/.rbenv/versions/2.4.0/lib/ruby/gems/2.4.0/gems/watir-6.2.0/lib/watir/elements/element.rb:534:in `wait_for_writable'\n    from /home/jaffejoe/.rbenv/versions/2.4.0/lib/ruby/gems/2.4.0/gems/watir-6.2.0/lib/watir/elements/element.rb:639:in `element_call'\n    from /home/jaffejoe/.rbenv/versions/2.4.0/lib/ruby/gems/2.4.0/gems/watir-6.2.0/lib/watir/elements/element.rb:303:in `send_keys'\n    from watir_test.rb:8:in `&lt;main&gt;' &lt;/\n</code></pre>\n\n<p>Here is my code:</p>\n\n<pre><code>require 'watir'\n\nbrowser = Watir::Browser.new\n\nbrowser.goto('https://tripadvisor.com/CheapFlightsHome')\nbrowser.input(name: 'orig').send_keys('Boston, MA - Logan International Airport (BOS)')\nbrowser.input(name: 'dest').send_keys('Milan, Italy - All Airports (MIL)')\nbrowser.input(name: 'rt_leaveday').send_keys('1')\nbrowser.input(name: 'rt_leavemonth').send_keys('06/2017')\nbrowser.input(name: 'retday').send_keys('30')\nbrowser.input(name: 'leavemonth').send_keys('06/2017')\nbrowser.input(value: 'Search Flights').click\nputs browser.url\nbrowser.quit\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "controller", "radio-button"], "comments": [{"owner": {"reputation": 12440, "user_id": 308731, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/eQxFn.jpg?s=128&g=1", "display_name": "Eyeslandic", "link": "https://stackoverflow.com/users/308731/eyeslandic"}, "edited": false, "score": 0, "creation_date": 1489529874, "post_id": 42797430, "comment_id": 72709850, "body": "Look at the generated html and you will see why it&#39;s not working"}], "answers": [{"comments": [{"owner": {"reputation": 190, "user_id": 5399309, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/10201131262441304/picture?type=large", "display_name": "Jo&#235;l Abrahams", "link": "https://stackoverflow.com/users/5399309/jo%c3%abl-abrahams"}, "edited": false, "score": 0, "creation_date": 1489586316, "post_id": 42797690, "comment_id": 72735863, "body": "Thanks, though it still doesn&#39;t work, <code>&#39;answer&#39;</code> is still not present in the <code>params</code> map. So perhaps the problem is elsewhere?"}, {"owner": {"reputation": 12440, "user_id": 308731, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/eQxFn.jpg?s=128&g=1", "display_name": "Eyeslandic", "link": "https://stackoverflow.com/users/308731/eyeslandic"}, "reply_to_user": {"reputation": 190, "user_id": 5399309, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/10201131262441304/picture?type=large", "display_name": "Jo&#235;l Abrahams", "link": "https://stackoverflow.com/users/5399309/jo%c3%abl-abrahams"}, "edited": false, "score": 0, "creation_date": 1489599347, "post_id": 42797690, "comment_id": 72745703, "body": "I tried it and this code works. What is the output of your <code>params</code>?"}, {"owner": {"reputation": 190, "user_id": 5399309, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/10201131262441304/picture?type=large", "display_name": "Jo&#235;l Abrahams", "link": "https://stackoverflow.com/users/5399309/jo%c3%abl-abrahams"}, "edited": false, "score": 0, "creation_date": 1489602002, "post_id": 42797690, "comment_id": 72747255, "body": "If I put <code>params</code> to console I get: <code>{&quot;action&quot;=&gt;&quot;question&quot;, &quot;controller&quot;=&gt;&quot;question&quot;}</code>"}, {"owner": {"reputation": 12440, "user_id": 308731, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/eQxFn.jpg?s=128&g=1", "display_name": "Eyeslandic", "link": "https://stackoverflow.com/users/308731/eyeslandic"}, "reply_to_user": {"reputation": 190, "user_id": 5399309, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/10201131262441304/picture?type=large", "display_name": "Jo&#235;l Abrahams", "link": "https://stackoverflow.com/users/5399309/jo%c3%abl-abrahams"}, "edited": false, "score": 0, "creation_date": 1489607240, "post_id": 42797690, "comment_id": 72750407, "body": "After you&#39;ve submitted the form? Then you&#39;re doing something wrong in the controller."}, {"owner": {"reputation": 12440, "user_id": 308731, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/eQxFn.jpg?s=128&g=1", "display_name": "Eyeslandic", "link": "https://stackoverflow.com/users/308731/eyeslandic"}, "reply_to_user": {"reputation": 190, "user_id": 5399309, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/10201131262441304/picture?type=large", "display_name": "Jo&#235;l Abrahams", "link": "https://stackoverflow.com/users/5399309/jo%c3%abl-abrahams"}, "edited": false, "score": 0, "creation_date": 1489607297, "post_id": 42797690, "comment_id": 72750451, "body": "or the form is wrong and doesn&#39;t even include the radio buttons. You can update the question with your whole form."}, {"owner": {"reputation": 190, "user_id": 5399309, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/10201131262441304/picture?type=large", "display_name": "Jo&#235;l Abrahams", "link": "https://stackoverflow.com/users/5399309/jo%c3%abl-abrahams"}, "edited": false, "score": 0, "creation_date": 1489608631, "post_id": 42797690, "comment_id": 72751204, "body": "What exactly do you mean by submitting the form? I assumed that the button does this: <code>&lt;%= link_to &quot;Next&quot;, question_path, class: &quot;btn btn-large btn-primary&quot; %&gt;</code>."}, {"owner": {"reputation": 12440, "user_id": 308731, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/eQxFn.jpg?s=128&g=1", "display_name": "Eyeslandic", "link": "https://stackoverflow.com/users/308731/eyeslandic"}, "reply_to_user": {"reputation": 190, "user_id": 5399309, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/10201131262441304/picture?type=large", "display_name": "Jo&#235;l Abrahams", "link": "https://stackoverflow.com/users/5399309/jo%c3%abl-abrahams"}, "edited": false, "score": 0, "creation_date": 1489609051, "post_id": 42797690, "comment_id": 72751419, "body": "No, the <code>link_to</code> doesn&#39;t submit the form. It&#39;s only a link."}, {"owner": {"reputation": 190, "user_id": 5399309, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/10201131262441304/picture?type=large", "display_name": "Jo&#235;l Abrahams", "link": "https://stackoverflow.com/users/5399309/jo%c3%abl-abrahams"}, "edited": false, "score": 0, "creation_date": 1489610393, "post_id": 42797690, "comment_id": 72752217, "body": "That does make sense, though I&#39;m not sure what the best way is too fix it now. How do I make sure that when I submit, it links to <code>question</code>?"}, {"owner": {"reputation": 12440, "user_id": 308731, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/eQxFn.jpg?s=128&g=1", "display_name": "Eyeslandic", "link": "https://stackoverflow.com/users/308731/eyeslandic"}, "reply_to_user": {"reputation": 190, "user_id": 5399309, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/10201131262441304/picture?type=large", "display_name": "Jo&#235;l Abrahams", "link": "https://stackoverflow.com/users/5399309/jo%c3%abl-abrahams"}, "edited": false, "score": 0, "creation_date": 1489610671, "post_id": 42797690, "comment_id": 72752396, "body": "Here is a very good overview dealing with forms <a href=\"http://guides.rubyonrails.org/form_helpers.html\" rel=\"nofollow noreferrer\">guides.rubyonrails.org/form_helpers.html</a>"}, {"owner": {"reputation": 190, "user_id": 5399309, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/10201131262441304/picture?type=large", "display_name": "Jo&#235;l Abrahams", "link": "https://stackoverflow.com/users/5399309/jo%c3%abl-abrahams"}, "edited": false, "score": 1, "creation_date": 1489661116, "post_id": 42797690, "comment_id": 72773087, "body": "After some digging around I found the solution: I made it a form, used <code>submit_tag</code> for the button, added the <code>question</code> action as <code>action</code> parameter to the form and added a <code>post</code> to <code>routes.rb</code>. (Hopefully not too cryptic an explenation)."}, {"owner": {"reputation": 12440, "user_id": 308731, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/eQxFn.jpg?s=128&g=1", "display_name": "Eyeslandic", "link": "https://stackoverflow.com/users/308731/eyeslandic"}, "reply_to_user": {"reputation": 190, "user_id": 5399309, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/10201131262441304/picture?type=large", "display_name": "Jo&#235;l Abrahams", "link": "https://stackoverflow.com/users/5399309/jo%c3%abl-abrahams"}, "edited": false, "score": 0, "creation_date": 1489661368, "post_id": 42797690, "comment_id": 72773262, "body": "No no, there are plenty of ways to do this, as long as its working for you it&#39;s all good I guess."}], "tags": [], "owner": {"reputation": 12440, "user_id": 308731, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/eQxFn.jpg?s=128&g=1", "display_name": "Eyeslandic", "link": "https://stackoverflow.com/users/308731/eyeslandic"}, "is_accepted": true, "score": 2, "last_activity_date": 1489530988, "last_edit_date": 1489530988, "creation_date": 1489530212, "answer_id": 42797690, "question_id": 42797430, "link": "https://stackoverflow.com/questions/42797430/radio-button-value-not-in-params-hash/42797690#42797690", "title": "Radio Button value not in params hash", "body": "<p>You must use the right syntax for this method. I added labels for good measure too.</p>\n\n<pre><code>&lt;% = radio_button_tag :answer, 'answer_1', checked: true %&gt;\n&lt;% = label :answer, 'Answer 1' %&gt;\n\n&lt;% = radio_button_tag :answer, 'answer_2', checked: true %&gt;\n&lt;% = label :answer, 'Answer 2' %&gt;\n</code></pre>\n\n<blockquote>\n  <p>radio_button_tag(name, value, checked = false, options = {})</p>\n</blockquote>\n\n<p><a href=\"http://api.rubyonrails.org/classes/ActionView/Helpers/FormTagHelper.html#method-i-radio_button_tag\" rel=\"nofollow noreferrer\">http://api.rubyonrails.org/classes/ActionView/Helpers/FormTagHelper.html#method-i-radio_button_tag</a></p>\n"}], "owner": {"reputation": 190, "user_id": 5399309, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/10201131262441304/picture?type=large", "display_name": "Jo&#235;l Abrahams", "link": "https://stackoverflow.com/users/5399309/jo%c3%abl-abrahams"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 880, "favorite_count": 0, "accepted_answer_id": 42797690, "answer_count": 1, "score": 1, "last_activity_date": 1489591667, "creation_date": 1489529063, "last_edit_date": 1489591667, "question_id": 42797430, "link": "https://stackoverflow.com/questions/42797430/radio-button-value-not-in-params-hash", "title": "Radio Button value not in params hash", "body": "<p>I have a problem with the params. Mainly, a value that I expect to be there, isn't there. I have a layout with some radio buttons. The idea is that when I select one of the radio buttons, the value should be present in <code>params[:answer]</code>. However, this value is <code>NIL</code>, so it is never updated and I'm not sure why. Here is my code (modified slightly to remove the non-relevant parts).</p>\n\n<p>In a view <code>question/sub_view.html.erb</code>, I have the following radio buttons:</p>\n\n<pre><code>&lt;div id=\"radio_buttons\"&gt;\n  &lt;%= radio_button_tag :submit, name: 'answer', value: 'answer_1' %&gt;Answer 1&lt;br&gt;\n  &lt;%= radio_button_tag :submit, name: 'answer', value: 'answer_2' %&gt;Answer 2&lt;br&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p>And I have a view <code>question/question.html.erb</code>:</p>\n\n<pre><code>&lt;h1&gt;Question&lt;/h1&gt;\n&lt;div align=\"center\"&gt;\n  &lt;%= render partial: \"question/sub_view\" %&gt;\n&lt;/div&gt;\n\n&lt;div class=\"buttons\"&gt;\n  &lt;%= link_to \"Next\", question_path, class: \"btn btn-large btn-primary\" %&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p>And in <code>routes.rb</code>:</p>\n\n<pre><code>get 'question' =&gt; 'question#question'\n</code></pre>\n\n<p>Now the important bit, in the <code>QuestionController.rb</code>, I have the following:</p>\n\n<pre><code>class QuestionController &lt; ApplicationController\n\n  def question\n    puts params # print to console to check the parameters\n\n    # stuff omitted that is not relevant\n  end\nend\n</code></pre>\n\n<p>I would expect that <code>params</code> contains the value <code>'answer'</code> (for instance, <code>'answer'=&gt;'answer_1'</code>). Why is this the case?</p>\n"}, {"tags": ["ruby-on-rails", "json", "ruby", "rspec"], "answers": [{"tags": [], "owner": {"reputation": 1843, "user_id": 4067720, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a52c645614505bcaeb65a6c5199158c1?s=128&d=identicon&r=PG", "display_name": "Glyoko", "link": "https://stackoverflow.com/users/4067720/glyoko"}, "is_accepted": false, "score": 2, "last_activity_date": 1489530208, "creation_date": 1489530208, "answer_id": 42797689, "question_id": 42797391, "link": "https://stackoverflow.com/questions/42797391/rspec-test-not-hitting-view-with-render-view/42797689#42797689", "title": "RSpec test not hitting view with render_view", "body": "<p>You're not correctly stubbing out the authentication in your spec. You say</p>\n\n<pre><code>expect_any_instance_of(subject).to receive(:set_user_by_token).and_return(user)\n</code></pre>\n\n<p>but you should say</p>\n\n<pre><code>allow_any_instance_of(subject).to receive(:set_user_by_token).and_return(user)\n</code></pre>\n\n<p>As a general rule, <code>*_any_instance_of</code> methods should be avoided if possible because <a href=\"https://relishapp.com/rspec/rspec-mocks/docs/working-with-legacy-code/any-instance\" rel=\"nofollow noreferrer\">they can be ambiguous</a> in more nuanced situations. In controller specs, you can use <code>controller</code> to access the instance of the controller being tested. e.g.</p>\n\n<pre><code>allow(controller).to receive(:set_user_by_token).and_return(user)\n</code></pre>\n"}], "owner": {"reputation": 21, "user_id": 5304984, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-6yFo-Jbz4BM/AAAAAAAAAAI/AAAAAAAABeQ/JiacJHzQ-Pc/photo.jpg?sz=128", "display_name": "psswf", "link": "https://stackoverflow.com/users/5304984/psswf"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 426, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1489530208, "creation_date": 1489528885, "question_id": 42797391, "link": "https://stackoverflow.com/questions/42797391/rspec-test-not-hitting-view-with-render-view", "title": "RSpec test not hitting view with render_view", "body": "<p>I am getting this error when using RSpec to test an index action and response in a Rails controller:\n    <code>JSON::ParserError:\n       A JSON text must at least contain two octets!</code></p>\n\n<p>The most common fix -- including <code>render_views</code> -- is not working and <code>nil</code> is not being passed in. The test is not hitting the view. When I insert <code>render json: {test: 'hello world'}, status: 200 and return</code> in the index action of the controller, and a pry in the view (<code>index.json.jbuilder</code>) and after the <code>get :index</code> in the test, I can see there is a response body. If I amend the test expectation to <code>expect(response).to render_template '[]'</code> I can see the empty array that should be in the response body. Why is render_views failing and how to I get it working again?</p>\n\n<p>Here is the index_spec.rb:</p>\n\n<pre><code>require 'rails_helper'\n\nRSpec.describe ThingsController, type: :controller do\n  render_views\n  let(:json_response) { JSON.parse(response.body) }\n  let(:status) { response.status }\n  let(:user) { create(:user_with_associations) }\n  subject{ ThingsController }\n\n  describe \"GET #index\" do\n    context \"(success cases)\" do\n      before(:each) do\n        expect_any_instance_of(subject).to receive(:set_user_by_token).and_return(user)\n      end\n\n    context \"and when there are no things\" do\n      before(:each) do\n        get :index\n      end\n\n      it \"returns a 200 status\" do\n        expect(status).to eq 200\n      end\n\n      it \"returns a top level key of data with an empty array\" do\n        expect(json_response[\"data\"]).to eq []          \n      end\n    end\n  end\nend\n</code></pre>\n\n<p>Here is the rails_helper.rb:</p>\n\n<pre><code>ENV[\"RAILS_ENV\"] ||= 'test'\nrequire_relative 'spec_helper'\nrequire File.expand_path(\"../../config/environment\", __FILE__)\nrequire 'rspec/rails'\n\nActiveRecord::Migration.maintain_test_schema!\n\nRSpec.configure do |config|\n  config.fixture_path = \"#{::Rails.root}/spec/fixtures\"\n\n  config.use_transactional_fixtures = true\n\n  config.before(:suite) do\n    DatabaseCleaner.strategy = :transaction\n    DatabaseCleaner.clean_with(:truncation)\n  end\n\n  config.before(:each) do\n    DatabaseCleaner.start\n  end\n\n  config.after(:each) do\n    DatabaseCleaner.clean\n  end\n\n  config.infer_spec_type_from_file_location!\nend\n</code></pre>\n\n<p>And here is the spec_helper.rb</p>\n\n<pre><code>ENV[\"RAILS_ENV\"] ||= 'test'\n\nrequire 'factory_girl_rails'\nrequire 'faker'\n\ninclude ActionDispatch::TestProcess\n\nRSpec.configure do |config|\n  config.expect_with :rspec do |expectations|\n    expectations.include_chain_clauses_in_custom_matcher_descriptions = true\n  end\n\n  config.mock_with :rspec do |mocks|\n    mocks.verify_partial_doubles = true\n  end\n\n  config.include FactoryGirl::Syntax::Methods\n\n  config.before do\n    FactoryGirl.factories.clear\n    FactoryGirl.find_definitions\n  end\nend\n</code></pre>\n\n<p>And here's the controller action under test things_controller.rb:</p>\n\n<pre><code>class ThingsController &lt; ApplicationController\n\n  before_action :authenticate_user!, only: [ :index ]\n  before_action -&gt; {check_last_updated(\"Thing\")}, only: [ :index ]\n\n  def index\n    @things = @current_user.things.in_last_three_months.approved_and_unapproved.order(start_time: :asc)\n  end\nend\n</code></pre>\n\n<p>Rails 4.2.0\nRuby 2.1.2\nRSpec 3.5.4</p>\n\n<p>This is my first question here, so let me know if there is other information that should be included. </p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-3", "ruby-on-rails-4"], "answers": [{"comments": [{"owner": {"reputation": 2229, "user_id": 4659576, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/0e9de370ae3de65b3b65097b0f55e708?s=128&d=identicon&r=PG&f=1", "display_name": "Bogdan Daniel", "link": "https://stackoverflow.com/users/4659576/bogdan-daniel"}, "edited": false, "score": 0, "creation_date": 1489527923, "post_id": 42796956, "comment_id": 72708900, "body": "Thanks for answering. In which folder should I put that file?"}, {"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "reply_to_user": {"reputation": 2229, "user_id": 4659576, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/0e9de370ae3de65b3b65097b0f55e708?s=128&d=identicon&r=PG&f=1", "display_name": "Bogdan Daniel", "link": "https://stackoverflow.com/users/4659576/bogdan-daniel"}, "edited": false, "score": 0, "creation_date": 1489536719, "post_id": 42796956, "comment_id": 72712249, "body": "It doesn&#39;t matter since constants like classes are shared between files. Just make sure to add it before you call the Imdb query."}, {"owner": {"reputation": 342, "user_id": 3140731, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/07ca18022121ba4c9d33cab116e15bbb?s=128&d=identicon&r=PG", "display_name": "jbarr", "link": "https://stackoverflow.com/users/3140731/jbarr"}, "edited": false, "score": 0, "creation_date": 1489587804, "post_id": 42796956, "comment_id": 72737151, "body": "I would put it in a new file in <code>config&#47;initializers</code>."}, {"owner": {"reputation": 2229, "user_id": 4659576, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/0e9de370ae3de65b3b65097b0f55e708?s=128&d=identicon&r=PG&f=1", "display_name": "Bogdan Daniel", "link": "https://stackoverflow.com/users/4659576/bogdan-daniel"}, "edited": false, "score": 0, "creation_date": 1489606197, "post_id": 42796956, "comment_id": 72749759, "body": "@maxple I put it inside the tv shows controller. I will put another one for the movies controller."}, {"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "reply_to_user": {"reputation": 2229, "user_id": 4659576, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/0e9de370ae3de65b3b65097b0f55e708?s=128&d=identicon&r=PG&f=1", "display_name": "Bogdan Daniel", "link": "https://stackoverflow.com/users/4659576/bogdan-daniel"}, "edited": false, "score": 0, "creation_date": 1489609147, "post_id": 42796956, "comment_id": 72751472, "body": "@BogdanDaniel that won&#39;t work. You cannot define the same method in multiple places and have them both be called <i>unless</i> you put <code>super</code> in there. Why not patch it one time (somewhere in <code>config&#47;initializers&#47;</code> as jbarr recommends) but alter it so it takes an additional argument (the url)?"}, {"owner": {"reputation": 2229, "user_id": 4659576, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/0e9de370ae3de65b3b65097b0f55e708?s=128&d=identicon&r=PG&f=1", "display_name": "Bogdan Daniel", "link": "https://stackoverflow.com/users/4659576/bogdan-daniel"}, "edited": false, "score": 0, "creation_date": 1489611556, "post_id": 42796956, "comment_id": 72752863, "body": "That&#39;s what I ended up doing, but for some reason I get an extra null movie object for each actual title. I can t find where to look to solve that."}, {"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1489611674, "post_id": 42796956, "comment_id": 72752940, "body": "you should use <code>byebug</code> and put a debugger call in there."}, {"owner": {"reputation": 2229, "user_id": 4659576, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/0e9de370ae3de65b3b65097b0f55e708?s=128&d=identicon&r=PG&f=1", "display_name": "Bogdan Daniel", "link": "https://stackoverflow.com/users/4659576/bogdan-daniel"}, "edited": false, "score": 0, "creation_date": 1489611966, "post_id": 42796956, "comment_id": 72753101, "body": "I think it s just a matter of html sytnax. I&#39;m inspecting both pages now."}, {"owner": {"reputation": 2229, "user_id": 4659576, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/0e9de370ae3de65b3b65097b0f55e708?s=128&d=identicon&r=PG&f=1", "display_name": "Bogdan Daniel", "link": "https://stackoverflow.com/users/4659576/bogdan-daniel"}, "edited": false, "score": 0, "creation_date": 1489612233, "post_id": 42796956, "comment_id": 72753217, "body": "Yeah, they are so much different. I will just write one myself and parse html only for the elements that I need."}], "tags": [], "owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "is_accepted": true, "score": 1, "last_activity_date": 1489527228, "creation_date": 1489527228, "answer_id": 42796956, "question_id": 42796904, "link": "https://stackoverflow.com/questions/42796904/override-gem-method-in-rails/42796956#42796956", "title": "Override gem method in rails", "body": "<p>You can re-open the class to override the method:</p>\n\n<pre><code>class Imdb::Search\n  def self.query(query)\n    # your custom logic here\n  end\nend\n</code></pre>\n\n<p>Note that you can call <code>super(query)</code> in your version to get the result of the original. </p>\n"}, {"tags": [], "owner": {"reputation": 1853, "user_id": 2501082, "user_type": "registered", "accept_rate": 20, "profile_image": "https://i.stack.imgur.com/qdJBQ.jpg?s=128&g=1", "display_name": "David Gross", "link": "https://stackoverflow.com/users/2501082/david-gross"}, "is_accepted": false, "score": 2, "last_activity_date": 1489528677, "creation_date": 1489528677, "answer_id": 42797326, "question_id": 42796904, "link": "https://stackoverflow.com/questions/42796904/override-gem-method-in-rails/42797326#42797326", "title": "Override gem method in rails", "body": "<p>You can use class_eval and put it in a decorators folder</p>\n\n<pre><code>app/decorators/imdb/search_decorator.rb\n\nclass Imdb::Search.class_eval do\n  def self.query(query)\n  end\nend\n</code></pre>\n"}], "owner": {"reputation": 2229, "user_id": 4659576, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/0e9de370ae3de65b3b65097b0f55e708?s=128&d=identicon&r=PG&f=1", "display_name": "Bogdan Daniel", "link": "https://stackoverflow.com/users/4659576/bogdan-daniel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1844, "favorite_count": 0, "accepted_answer_id": 42796956, "answer_count": 2, "score": 0, "last_activity_date": 1489528677, "creation_date": 1489527046, "question_id": 42796904, "link": "https://stackoverflow.com/questions/42796904/override-gem-method-in-rails", "title": "Override gem method in rails", "body": "<p>I want to let users add interests -TV shows in this case-, and to make sure they type a correct tv show, I'm going to search imdb first and let them select one of the returning titles. </p>\n\n<p>I found this gem <a href=\"https://github.com/ariejan/imdb\" rel=\"nofollow noreferrer\">https://github.com/ariejan/imdb</a> which is doing almost what I need. If I search for \"The vampire diaries\", it will return it and 200 extra matches. </p>\n\n<p>I went through the gem and I found that he does the querying part here <a href=\"https://github.com/ariejan/imdb/blob/master/lib/imdb/search.rb\" rel=\"nofollow noreferrer\">https://github.com/ariejan/imdb/blob/master/lib/imdb/search.rb</a>. </p>\n\n<pre><code>   def self.query(query)\n      open(\"http://akas.imdb.com/find?q=#{CGI.escape(query)};s=tt\")\n   end\n</code></pre>\n\n<p>That query basically uses this link <a href=\"http://akas.imdb.com/find?q=\" rel=\"nofollow noreferrer\">http://akas.imdb.com/find?q=</a> and returns everything that can find given the input - movies, tv shows, episodes. Now I found a more advanced query which uses <code>type</code> and some other params. So I could actually return only 4 results in that case instead of 250. All I have to do is to replace that query with <a href=\"http://www.imdb.com/search/title?title=The%20Vampire%20Diaries&amp;title_type=tv_series\" rel=\"nofollow noreferrer\">http://www.imdb.com/search/title?title=The%20Vampire%20Diaries&amp;title_type=tv_series</a>. </p>\n\n<p>How do I override that search method? </p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 1, "creation_date": 1489526000, "post_id": 42796406, "comment_id": 72707939, "body": "That comments below suggest that readers do not understand what you want. That could be cleared up by providing an example with <code>strings</code> and <code>line</code> that includes your desired result. Also explain what you want returned when there is no match.  When you give an example (generally a good thing) assign a variable to each input object (e.g, <code>line = &quot;...&quot;; strings = [&quot;...&quot;, &quot;...&quot;,...]</code>) so that readers can refer to those variables without having to define them."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1489526168, "post_id": 42796406, "comment_id": 72708036, "body": "The way you&#39;ve changed the question is equivalent to both answers so far that use <code>detect</code> (aka <code>find</code>). That is, <code>detect</code> returns the first <code>string</code> for which <code>line.include?(string)</code> is <code>true</code>, or <code>nil</code> if no <code>string</code> satisfies that requirement."}, {"owner": {"reputation": 1075, "user_id": 6561814, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/AiS9a.png?s=128&g=1", "display_name": "jonhue", "link": "https://stackoverflow.com/users/6561814/jonhue"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1489526395, "post_id": 42796406, "comment_id": 72708142, "body": "@CarySwoveland the point is that <code>detect</code> is returning the first match <b>or</b> <code>nil</code>. That is not what I want. I want to iterate until I either find a match, or iterated through the entire <code>lines</code> array."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 1, "creation_date": 1489526631, "post_id": 42796406, "comment_id": 72708262, "body": "I think most readers assumed <code>line</code> was a string, not an array, mainly because <code>line</code> is a good name for a string but a misleading name for an array. If you had said <code>line</code> was an array, named it something like <code>lines</code> or given your example initially (or best, given it a good name and provide an example) you wouldn&#39;t have had this misunderstanding.  You still haven&#39;t shown the desired result for the example."}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1489526723, "post_id": 42796406, "comment_id": 72708311, "body": "Do you want every matching occurrence or only the first?"}, {"owner": {"reputation": 1075, "user_id": 6561814, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/AiS9a.png?s=128&g=1", "display_name": "jonhue", "link": "https://stackoverflow.com/users/6561814/jonhue"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1489526855, "post_id": 42796406, "comment_id": 72708396, "body": "@CarySwoveland <code>line:String</code>, <code>lines:Array</code>"}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1489526916, "post_id": 42796406, "comment_id": 72708425, "body": "Please include that information by editing your question. Not all readers read all comments."}, {"owner": {"reputation": 1075, "user_id": 6561814, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/AiS9a.png?s=128&g=1", "display_name": "jonhue", "link": "https://stackoverflow.com/users/6561814/jonhue"}, "reply_to_user": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1489527008, "post_id": 42796406, "comment_id": 72708468, "body": "@theTinMan how could I get all?"}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 1, "creation_date": 1489527612, "post_id": 42796406, "comment_id": 72708771, "body": "Start by reading &quot;<a href=\"http://meta.stackoverflow.com/questions/261592\">How much research effort is expected of Stack Overflow users?</a>&quot;, then when you&#39;ve accomplished those steps ask a specific question about that code. This question isn&#39;t well asked as evidenced by the repeated changes and multiple comments."}], "answers": [{"comments": [{"owner": {"reputation": 1075, "user_id": 6561814, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/AiS9a.png?s=128&g=1", "display_name": "jonhue", "link": "https://stackoverflow.com/users/6561814/jonhue"}, "edited": false, "score": 0, "creation_date": 1489525755, "post_id": 42796462, "comment_id": 72707812, "body": "With that I could use something like this: <code>if strings.any? { |string| line.include?(string) }                             string = strings.detect { |string| line.include?(string) }                             return string                         end</code> but that feels quite double doubled ..."}], "tags": [], "owner": {"reputation": 67463, "user_id": 203130, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/1RE8c.jpg?s=128&g=1", "display_name": "coreyward", "link": "https://stackoverflow.com/users/203130/coreyward"}, "is_accepted": false, "score": 1, "last_activity_date": 1489525278, "creation_date": 1489525278, "answer_id": 42796462, "question_id": 42796406, "link": "https://stackoverflow.com/questions/42796406/how-to-use-variable-of-condition-inside-the-block/42796462#42796462", "title": "How to use variable of condition inside the block", "body": "<p>If you want the first match:</p>\n\n<pre><code>strings.detect { |string| line.include?(string) }\n</code></pre>\n\n<p>If you want all matches (in an array):</p>\n\n<pre><code>strings.select { |string| line.include?(string) }\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1075, "user_id": 6561814, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/AiS9a.png?s=128&g=1", "display_name": "jonhue", "link": "https://stackoverflow.com/users/6561814/jonhue"}, "edited": false, "score": 0, "creation_date": 1489525683, "post_id": 42796468, "comment_id": 72707783, "body": "problem is that this will return nil without a match. I want to return the first match, therefore the if statement."}, {"owner": {"reputation": 1075, "user_id": 6561814, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/AiS9a.png?s=128&g=1", "display_name": "jonhue", "link": "https://stackoverflow.com/users/6561814/jonhue"}, "edited": false, "score": 0, "creation_date": 1489525852, "post_id": 42796468, "comment_id": 72707862, "body": "Then I return nil"}, {"owner": {"reputation": 1548, "user_id": 1246279, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e2533d5a4299cad329268e552c47fa8d?s=128&d=identicon&r=PG", "display_name": "philomory", "link": "https://stackoverflow.com/users/1246279/philomory"}, "reply_to_user": {"reputation": 1075, "user_id": 6561814, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/AiS9a.png?s=128&g=1", "display_name": "jonhue", "link": "https://stackoverflow.com/users/6561814/jonhue"}, "edited": false, "score": 1, "creation_date": 1489525916, "post_id": 42796468, "comment_id": 72707890, "body": "@jonhue if you want to return nil when there isn&#39;t a match, that&#39;s exactly what <code>detect</code> already does."}, {"owner": {"reputation": 1075, "user_id": 6561814, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/AiS9a.png?s=128&g=1", "display_name": "jonhue", "link": "https://stackoverflow.com/users/6561814/jonhue"}, "edited": false, "score": 0, "creation_date": 1489526169, "post_id": 42796468, "comment_id": 72708039, "body": "I am iterating through a lot of lines and want to check each of them if they include a string inside the array named <code>strings</code> -&gt; until I either find a match, or finished iterating :)"}, {"owner": {"reputation": 1075, "user_id": 6561814, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/AiS9a.png?s=128&g=1", "display_name": "jonhue", "link": "https://stackoverflow.com/users/6561814/jonhue"}, "edited": false, "score": 0, "creation_date": 1489526727, "post_id": 42796468, "comment_id": 72708315, "body": "It is a very simple task so it got to be fine"}], "tags": [], "owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "is_accepted": true, "score": 2, "last_activity_date": 1489526681, "last_edit_date": 1489526681, "creation_date": 1489525300, "answer_id": 42796468, "question_id": 42796406, "link": "https://stackoverflow.com/questions/42796406/how-to-use-variable-of-condition-inside-the-block/42796468#42796468", "title": "How to use variable of condition inside the block", "body": "<p>You could use <a href=\"https://ruby-doc.org/core-2.4.0/Enumerable.html#method-i-detect\" rel=\"nofollow noreferrer\"><code>detect</code></a>:</p>\n\n<pre><code>return strings.detect { |string| lines.any? { |line| line.include?(string) } }\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "is_accepted": false, "score": 0, "last_activity_date": 1489526885, "creation_date": 1489526885, "answer_id": 42796869, "question_id": 42796406, "link": "https://stackoverflow.com/questions/42796406/how-to-use-variable-of-condition-inside-the-block/42796869#42796869", "title": "How to use variable of condition inside the block", "body": "<p>You can do this pretty easily if you compile the list of strings to match into a compact regular expression:</p>\n\n<pre><code>string_rx = Regexp.union(strings)\n</code></pre>\n\n<p>Then all you have to do is filter out the lines that match and pull off the first one:</p>\n\n<pre><code>lines.grep(string_rx).first\n# =&gt; \"abcdefg\"\n</code></pre>\n\n<p>If you don't want to have to process the entire array and optimize this for performance:</p>\n\n<pre><code>lines.lazy.grep(string_rx).first\n# =&gt; \"abcdefg\"\n</code></pre>\n\n<p>The <code>lazy</code> designator makes each entry flow through the chain to completion rather than each stage buffering up before passing to the next.</p>\n"}, {"tags": [], "owner": {"reputation": 1853, "user_id": 2501082, "user_type": "registered", "accept_rate": 20, "profile_image": "https://i.stack.imgur.com/qdJBQ.jpg?s=128&g=1", "display_name": "David Gross", "link": "https://stackoverflow.com/users/2501082/david-gross"}, "is_accepted": false, "score": 2, "last_activity_date": 1489528318, "last_edit_date": 1489528318, "creation_date": 1489528000, "answer_id": 42797153, "question_id": 42796406, "link": "https://stackoverflow.com/questions/42796406/how-to-use-variable-of-condition-inside-the-block/42797153#42797153", "title": "How to use variable of condition inside the block", "body": "<p>You could use .find with some regex to bring back the first match </p>\n\n<pre><code>strings.find {|word| lines.find {|line| line =~ /#{word}/ } }\n=&gt; \"abc\"\n\n\n# if you want all matches \nstrings.select {|word| lines.find {|line| line =~ /#{word}/  } }\n=&gt; [\"abc\"]\n</code></pre>\n"}], "owner": {"reputation": 1075, "user_id": 6561814, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/AiS9a.png?s=128&g=1", "display_name": "jonhue", "link": "https://stackoverflow.com/users/6561814/jonhue"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 69, "favorite_count": 0, "accepted_answer_id": 42796468, "answer_count": 4, "score": -1, "last_activity_date": 1489528318, "creation_date": 1489525078, "last_edit_date": 1489526935, "question_id": 42796406, "link": "https://stackoverflow.com/questions/42796406/how-to-use-variable-of-condition-inside-the-block", "title": "How to use variable of condition inside the block", "body": "<p>How can I use the var <code>string</code> of the condition in the return value?</p>\n\n<pre><code>lines = [\"dyf\u00f6gifu\u00f6dxfghif\", \"xdgh\u00f6dfx\", \"abcdefg\"]\nstrings = [\"abc\", \"zzzzzzzzz\"]\nlines.each do |line|\n    if strings.any? { |string| line.include?(string) }\n        return string\n    end\nend\nreturn nil\n</code></pre>\n\n<p>Datatypes:</p>\n\n<pre><code>lines:Array, line:String, strings:Array, string:String\n</code></pre>\n\n<p>Desired result:</p>\n\n<pre><code>=&gt; \"abc\"\n</code></pre>\n\n<p>I am iterating through a lot of lines and want to check each of them if they include a string inside the array named <code>strings</code> -> until I either find a match, or finished iterating.</p>\n\n<p><em>This snippet <strong>does</strong> work, but it does the same thing <strong>twice</strong>:</em></p>\n\n<pre><code>lines.each do |line|\n    if strings.any? { |string| line.include?(string) }\n        return strings.detect { |string| line.include?(string) }\n    end\nend\nreturn nil\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "amazon-web-services", "amazon-s3"], "comments": [{"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1489522557, "post_id": 42795714, "comment_id": 72705960, "body": "Are you using carrierwave or some other uploader?"}, {"owner": {"reputation": 2116, "user_id": 6780663, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9207ba3b9163582570078b687f9b2792?s=128&d=identicon&r=PG&f=1", "display_name": "Alejandro Montilla", "link": "https://stackoverflow.com/users/6780663/alejandro-montilla"}, "edited": false, "score": 0, "creation_date": 1489522902, "post_id": 42795714, "comment_id": 72706173, "body": "Are you absolutely sure that the file path is correct?"}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "reply_to_user": {"reputation": 2116, "user_id": 6780663, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9207ba3b9163582570078b687f9b2792?s=128&d=identicon&r=PG&f=1", "display_name": "Alejandro Montilla", "link": "https://stackoverflow.com/users/6780663/alejandro-montilla"}, "edited": false, "score": 7, "creation_date": 1489523091, "post_id": 42795714, "comment_id": 72706300, "body": "@AlejandroMontilla: i&#39;m pretty sure that <code>File.exist?</code> doesn&#39;t work for <i>remote</i> files. :)"}, {"owner": {"reputation": 35, "user_id": 7234128, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Q7Ds7.jpg?s=128&g=1", "display_name": "DawgOnKing", "link": "https://stackoverflow.com/users/7234128/dawgonking"}, "reply_to_user": {"reputation": 2116, "user_id": 6780663, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9207ba3b9163582570078b687f9b2792?s=128&d=identicon&r=PG&f=1", "display_name": "Alejandro Montilla", "link": "https://stackoverflow.com/users/6780663/alejandro-montilla"}, "edited": false, "score": 0, "creation_date": 1489523600, "post_id": 42795714, "comment_id": 72706577, "body": "@AlejandroMontilla - yes, the file path is correct. A simple cut/paste in new tab renders the image.   I can check the object with AWS-SDK gem but just wanted to see if there&#39;s a Ruby convention that I should know of. Thanks!"}, {"owner": {"reputation": 35, "user_id": 7234128, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Q7Ds7.jpg?s=128&g=1", "display_name": "DawgOnKing", "link": "https://stackoverflow.com/users/7234128/dawgonking"}, "reply_to_user": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1489523614, "post_id": 42795714, "comment_id": 72706585, "body": "PS @SergioTulentsev - if that&#39;s the case, I will note it as such and carry on. Thanks!"}, {"owner": {"reputation": 2116, "user_id": 6780663, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9207ba3b9163582570078b687f9b2792?s=128&d=identicon&r=PG&f=1", "display_name": "Alejandro Montilla", "link": "https://stackoverflow.com/users/6780663/alejandro-montilla"}, "reply_to_user": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 1, "creation_date": 1489523732, "post_id": 42795714, "comment_id": 72706662, "body": "@SergioTulentsev is right, woks only on local files."}], "owner": {"reputation": 35, "user_id": 7234128, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Q7Ds7.jpg?s=128&g=1", "display_name": "DawgOnKing", "link": "https://stackoverflow.com/users/7234128/dawgonking"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 80, "favorite_count": 0, "closed_date": 1489524560, "answer_count": 0, "score": 0, "last_activity_date": 1489524512, "creation_date": 1489522520, "question_id": 42795714, "link": "https://stackoverflow.com/questions/42795714/ruby-file-exist-filetest-exist-on-s3-object", "closed_reason": "Duplicate", "title": "Ruby (File.exist? - FileTest.exist?) on S3 object?", "body": "<p>Can someone help me with recommending convention to call File.exist? or FileTest.exist? on an AWS S3 object in Ruby/Rails?</p>\n\n<p>I'm storing the object in a string ie:</p>\n\n<pre><code>aws_photo = \"https://s3.us-east-2.amazonaws.com/examplesite/photo.JPG\"\n</code></pre>\n\n<p>Calling the above methods on the string all yield a FALSE return by Ruby.</p>\n\n<pre><code>File.exist?(aws_photo) =&gt; false\n</code></pre>\n\n<p>I've also tried:</p>\n\n<pre><code>FileTest.exist? and File.exist?(aws_photo.url) - (aws_photo.path)\n</code></pre>\n\n<p>to no avail...</p>\n\n<p>Thanks!</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 1, "creation_date": 1489522862, "post_id": 42795528, "comment_id": 72706161, "body": "huh? Why are you <i>iterating</i>? Just fetch the value directly. <code>hash[:eligibility_settings][&#39;min_age&#39;]</code> (based on what you said your hash looks like)"}, {"owner": {"reputation": 1440, "user_id": 4282529, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/dW8oZ.jpg?s=128&g=1", "display_name": "kdweber89", "link": "https://stackoverflow.com/users/4282529/kdweber89"}, "reply_to_user": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1489523307, "post_id": 42795528, "comment_id": 72706415, "body": "omg I feel like I waaay over thought that one, you are absolutely right. Thank you so much!"}], "answers": [{"tags": [], "owner": {"reputation": 221, "user_id": 5420504, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/174979efbe4f8e8e9f1579ac1c551f82?s=128&d=identicon&r=PG&f=1", "display_name": "kparekh01", "link": "https://stackoverflow.com/users/5420504/kparekh01"}, "is_accepted": true, "score": 0, "last_activity_date": 1489528661, "creation_date": 1489528661, "answer_id": 42797320, "question_id": 42795528, "link": "https://stackoverflow.com/questions/42795528/isolating-and-displaying-a-specific-element-within-a-hash/42797320#42797320", "title": "Isolating and displaying a specific element within a hash", "body": "<p>Although @SergioTulentsev gave the proper response, in the future if you are going to be looping through hashes, below is one way to iterate through the keys and grab the value you want.</p>\n\n<pre><code> hash = {\n                :name =&gt; \"player1\",\n               :label =&gt; \"redTeam_1_1\",\n               :group =&gt; \"adult\",\n                :teamId =&gt; 7,\n  :eligibility_settings =&gt; {\n                      \"min_age\" =&gt; 18,\n                \"player_gender\" =&gt; \"female\",\n          \"union_players_only\"  =&gt; true\n   }\n}\n\nhash.map do |settings, value|\n p hash[:eligibility_settings]['min_age'] if settings == :eligibility_settings\nend # output 18\n</code></pre>\n"}], "owner": {"reputation": 1440, "user_id": 4282529, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/dW8oZ.jpg?s=128&g=1", "display_name": "kdweber89", "link": "https://stackoverflow.com/users/4282529/kdweber89"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 28, "favorite_count": 0, "accepted_answer_id": 42797320, "answer_count": 1, "score": 0, "last_activity_date": 1489528661, "creation_date": 1489521827, "last_edit_date": 1489522311, "question_id": 42795528, "link": "https://stackoverflow.com/questions/42795528/isolating-and-displaying-a-specific-element-within-a-hash", "title": "Isolating and displaying a specific element within a hash", "body": "<p>I am currently having trouble writing a test that addresses the <code>eligibility_settings</code> of a record I have. I am having trouble pulling out one of the specific elements from this hash. </p>\n\n<p>Specifically I want to test that by making a change elsewhere in a different function that changes the min age of a specific player, and so what I am really trying to test is the <code>eligibility_settings.min_age</code>.  But i'm having trouble within my test isolating that out. </p>\n\n<p>My hash looks like this</p>\n\n<pre><code>{\n                    :name =&gt; \"player1\",\n                   :label =&gt; \"redTeam_1_1\",\n                   :group =&gt; \"adult\",\n                    :teamId =&gt; 7,\n    :eligibility_settings =&gt; {\n                          \"min_age\" =&gt; 18,\n                    \"player_gender\" =&gt; \"female\",\n              \"union_players_only\"  =&gt; true\n    }\n}\n</code></pre>\n\n<p>However when I try looping through this hash, I am having trouble isolating that one element. </p>\n\n<p>i've tried something like </p>\n\n<pre><code>team.get_players.first.map do |settings, value|\n  value.tap do |x, y|\n    y[3]\n  end\nend\n</code></pre>\n\n<p>However It seems like what i've been trying, and my approach has not been working quite right.  </p>\n\n<p>Would anyone have any idea what I could do with this?</p>\n"}, {"tags": ["ruby", "activerecord"], "answers": [{"tags": [], "owner": {"reputation": 5654, "user_id": 1026898, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/de8006bc117d96525c475036dcfb7fbf?s=128&d=identicon&r=PG", "display_name": "Ecnalyr", "link": "https://stackoverflow.com/users/1026898/ecnalyr"}, "is_accepted": false, "score": 0, "last_activity_date": 1489611488, "last_edit_date": 1489611488, "creation_date": 1489528246, "answer_id": 42797217, "question_id": 42795496, "link": "https://stackoverflow.com/questions/42795496/ruby-rake-activerecord-migrate/42797217#42797217", "title": "Ruby Rake ActiveRecord Migrate", "body": "<p>1) Add this to your <code>Rakefile</code> after the <code>require</code>s:</p>\n\n<pre><code>DatabaseTasks.database_configuration = YAML.load(File.read(File.join(root, 'config/database.yml')))\n</code></pre>\n\n<p>2) Remove <code>set :database_file, 'config/database.yml'</code> from your <code>app.rb</code> file (I think <code>set</code> is a <code>sinatra/activerecord</code> method).</p>\n\n<p>Running <code>rake db:create</code> may give you an error on your project now,because you're using <code>json</code> instead of <code>JSON</code> in your <code>app.rb</code> file (depending on your local versions), so. . .</p>\n\n<p>3)  Change <code>puts json Resource.select('id', 'name').all</code> to <code>puts JSON Resource.select('id', 'name').all</code> in your <code>app.rb</code> file.</p>\n\n<p>Now <code>rake db:create</code> will throw a database error, but that's an error related to your specific database configuration, make an appropriate adjustment to that (this is off-topic from the original question, so I won't address it further) and your app should run as you desire.</p>\n\n<hr>\n\n<p><strong>More info:</strong> </p>\n\n<p>This <a href=\"https://gist.github.com/drogus/6087979\" rel=\"nofollow noreferrer\">gist shows</a> example contents of a Rakefile that you could use to run Active Record tasks without using Rails or Sinatra.</p>\n"}], "owner": {"reputation": 3522, "user_id": 544864, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/2146b632c41a02a62279aed5b4ab57d7?s=128&d=identicon&r=PG", "display_name": "Ken J", "link": "https://stackoverflow.com/users/544864/ken-j"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 65, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1489611488, "creation_date": 1489521739, "question_id": 42795496, "link": "https://stackoverflow.com/questions/42795496/ruby-rake-activerecord-migrate", "title": "Ruby Rake ActiveRecord Migrate", "body": "<p>I'm trying to build a simple ruby script that connects to a database and runs some basic queries. </p>\n\n<p>The code is here: <a href=\"https://github.com/mastermindg/rack-activrecord-example\" rel=\"nofollow noreferrer\">https://github.com/mastermindg/rack-activrecord-example</a></p>\n\n<p>It's not a service - only a script that is run manually to do batch jobs. My problem is that I need to populate the database for testing purposes. I know how to do this in Sinatra and Rails but it's failing as-is:</p>\n\n<pre><code>NoMethodError: undefined method `set' for main:Object\nDid you mean?  send\n/usr/src/app/app.rb:7:in `&lt;top (required)&gt;'\n/usr/src/app/Rakefile:2:in `&lt;top (required)&gt;'\n</code></pre>\n\n<p>I've got the database.yml but I can't tell how to load it since set is failing.</p>\n\n<p><strong>How do I connect to and query a database using ActiveRecord with basic Rack?</strong></p>\n"}, {"tags": ["ruby", "loops"], "comments": [{"owner": {"reputation": 1349, "user_id": 6163262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7f3655350c57cb94195d64808b7ba61?s=128&d=identicon&r=PG&f=1", "display_name": "whodini9", "link": "https://stackoverflow.com/users/6163262/whodini9"}, "edited": false, "score": 0, "creation_date": 1489521296, "post_id": 42795266, "comment_id": 72705242, "body": "This is answered exactly here: <a href=\"http://stackoverflow.com/a/42403470/6163262\">stackoverflow.com/a/42403470/6163262</a>"}], "answers": [{"tags": [], "owner": {"reputation": 448, "user_id": 2499645, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/Tbsis.gif?s=128&g=1", "display_name": "Peter", "link": "https://stackoverflow.com/users/2499645/peter"}, "is_accepted": false, "score": 1, "last_activity_date": 1489521279, "creation_date": 1489521279, "answer_id": 42795358, "question_id": 42795266, "link": "https://stackoverflow.com/questions/42795266/breaking-a-loop-when-a-user-types-a-certain-input/42795358#42795358", "title": "Breaking a loop when a user types a certain input", "body": "<p>Try an <code>if-else</code> statement</p>\n\n<pre><code>def allergies\n\n    puts \"Please enter all your allergies. When you are finished, type 'done'.\"\n    allergy = gets.chomp.downcase!\n\n    while allergy != \"done\"\n        if allergy == \"nuts\"\n            puts \"Beware! The food item contains peanuts!\"\n            break\n        else\n            survey\n        end\n\n        allergy = gets.chomp.downcase\n    end\nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 44, "user_id": 7705498, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-tRI6kXzIFnE/AAAAAAAAAAI/AAAAAAAAAl4/FCO-xnjqpmk/photo.jpg?sz=128", "display_name": "Brad H", "link": "https://stackoverflow.com/users/7705498/brad-h"}, "is_accepted": true, "score": 1, "last_activity_date": 1489523621, "creation_date": 1489523621, "answer_id": 42796043, "question_id": 42795266, "link": "https://stackoverflow.com/questions/42795266/breaking-a-loop-when-a-user-types-a-certain-input/42796043#42796043", "title": "Breaking a loop when a user types a certain input", "body": "<pre><code>def survey\n    puts \"For how many years have you had these allergies?\"\n    name = gets.chomp.to_i\n\n    puts \"When was your last allergy reaction?\"\n    reaction = gets.chomp.to_i\nend\n\ndef allergies\n\n    puts \"Please enter all your allergies. When you are finished, type 'done'.\"\n    allergy = gets.chomp.downcase!\n\n    while allergy != \"done\"\n\n        # Format the loop so that when the user types 'done'\n        # The loop breaks and we go to the 'survey' method\n\n        allergy = gets.chomp.downcase\n        if allergy == \"nuts\"\n            puts \"Beware! The food item contains peanuts!\"\n            break\n        elsif allergy == \"done\"\n          survey\n        end\n    end\nend\n\nallergies\n</code></pre>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user6495201"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 82, "favorite_count": 0, "accepted_answer_id": 42796043, "answer_count": 2, "score": 1, "last_activity_date": 1489523621, "creation_date": 1489520961, "question_id": 42795266, "link": "https://stackoverflow.com/questions/42795266/breaking-a-loop-when-a-user-types-a-certain-input", "title": "Breaking a loop when a user types a certain input", "body": "<p>So I'm trying to break a loop when a user type <code>done</code> and from there jump into another method called \"survey\" that asks a few leftover questions.</p>\n\n<p>This is what I have a the moment:</p>\n\n<pre><code>def survey\n    puts \"For how many years have you had these allergies?\"\n    name = gets.chomp.to_i\n\n    puts \"When was your last allergy reaction?\"\n    reaction = gets.chomp.to_i\nend\n\ndef allergies\n\n    puts \"Please enter all your allergies. When you are finished, type 'done'.\"\n    allergy = gets.chomp.downcase!\n\n    while allergy != \"done\"\n\n        # Format the loop so that when the user types 'done'\n        # The loop breaks and we go to the 'survey' method\n\n        allergy = gets.chomp.downcase\n        survey\n        if allergy == \"nuts\"\n            puts \"Beware! The food item contains peanuts!\"\n            break\n        end\n    end\nend\n\nallergies\n</code></pre>\n\n<p>At the moment it just lets me type in one allergy and thenk skips right into the survey method. How can I change this so I can keep inputting allergies until I either type \"nuts\" or \"done\"?</p>\n"}, {"tags": ["arrays", "ruby", "hash"], "comments": [{"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1489529766, "post_id": 42794631, "comment_id": 72709807, "body": "Please read &quot;<a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a>&quot;, the linked pages, and &quot;<a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>&quot;. You&#39;ve given us input and showed us your desired output but forgot to show us your attempt to solve the problem. We need the minimum code necessary to demonstrate the problem you&#39;re having. Without that it looks like you&#39;re asking us to write the code for you, which isn&#39;t what SO is for."}], "answers": [{"tags": [], "owner": {"reputation": 4446, "user_id": 6079412, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3e5e6c2756113d7289e80bed137251db?s=128&d=identicon&r=PG&f=1", "display_name": "larz", "link": "https://stackoverflow.com/users/6079412/larz"}, "is_accepted": true, "score": 1, "last_activity_date": 1489519156, "creation_date": 1489519156, "answer_id": 42794742, "question_id": 42794631, "link": "https://stackoverflow.com/questions/42794631/how-to-place-things-into-an-array-of-hashes-based-on-property-value/42794742#42794742", "title": "How to place things into an array of hashes based on property value?", "body": "<pre><code>tools.each do |tool|\n  group = groups.find { |item| item[:group] == tool[:group] }\n  group[:tools] &lt;&lt; tool\nend\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1489528155, "post_id": 42794937, "comment_id": 72709008, "body": "This obviously won&#39;t work if <code>groups</code> has keys other than <code>:group</code> and <code>:tools</code>. The OP did not ask for that, but why not provide the generality in case the spec changes in the future, particularly when it is so easy to accommodate?"}], "tags": [], "owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "is_accepted": false, "score": 0, "last_activity_date": 1489519897, "creation_date": 1489519897, "answer_id": 42794937, "question_id": 42794631, "link": "https://stackoverflow.com/questions/42794631/how-to-place-things-into-an-array-of-hashes-based-on-property-value/42794937#42794937", "title": "How to place things into an array of hashes based on property value?", "body": "<pre><code>result = groups.map do |group|\n  {\n    group: group[:group],\n    tools: tools.select do |tool|\n      tool[:group] == group[:group]\n    end\n  }\nend\nputs result\n</code></pre>\n\n<p>Which prints:</p>\n\n<pre><code>{:group=&gt;\"Business Training\", :tools=&gt;[{:name=&gt;\"Baz\", :group=&gt;\"Business Training\", :id=&gt;3}]}\n{:group=&gt;\"Human Resources\", :tools=&gt;[]}\n{:group=&gt;\"Clean\", :tools=&gt;[{:name=&gt;\"Foo\", :group=&gt;\"Clean\", :id=&gt;1}, {:name=&gt;\"Bar\", :group=&gt;\"Clean\", :id=&gt;2}]}\n{:group=&gt;\"Example\", :tools=&gt;[]}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 3914, "user_id": 4057366, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/uZ3e5.jpg?s=128&g=1", "display_name": "Alex Holubenko", "link": "https://stackoverflow.com/users/4057366/alex-holubenko"}, "is_accepted": false, "score": 0, "last_activity_date": 1489524750, "creation_date": 1489524750, "answer_id": 42796322, "question_id": 42794631, "link": "https://stackoverflow.com/questions/42794631/how-to-place-things-into-an-array-of-hashes-based-on-property-value/42796322#42796322", "title": "How to place things into an array of hashes based on property value?", "body": "<p>One more solution:</p>\n\n<pre><code>groups.each do |group|\n   group[:tools] = \n      tools.select { |tool| tool[:group] == group[:group] }\nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": false, "score": 0, "last_activity_date": 1489529959, "last_edit_date": 1489529959, "creation_date": 1489529061, "answer_id": 42797429, "question_id": 42794631, "link": "https://stackoverflow.com/questions/42794631/how-to-place-things-into-an-array-of-hashes-based-on-property-value/42797429#42797429", "title": "How to place things into an array of hashes based on property value?", "body": "<pre><code>h = tools.each_with_object({}) { |g,h| h[g[:group]] = g }\n  #=&gt; { \"Clean\"            =&gt;{:name=&gt;\"Bar\", :group=&gt;\"Clean\", :id=&gt;2},\n  #     \"Business Training\"=&gt;{:name=&gt;\"Baz\", :group=&gt;\"Business Training\", :id=&gt;3}} \ngroups.map { |g| g.update(tools: h[g[:group]]) }\n  #=&gt; [{:group=&gt;\"Business Training\",\n  #     :tools=&gt;{:name=&gt;\"Baz\", :group=&gt;\"Business Training\", :id=&gt;3}},\n  #    {:group=&gt;\"Human Resources\",\n  #     :tools=&gt;nil},\n  #    {:group=&gt;\"Clean\",\n  #     :tools=&gt;{:name=&gt;\"Bar\", :group=&gt;\"Clean\", :id=&gt;2}},\n  #    {:group=&gt;\"Example\",\n  #     :tools=&gt;nil}] \n</code></pre>\n\n<p>Constructing the hash <code>h</code> requires only a single pass through <code>tools</code>. For each element of <code>groups</code> this permits a simple hash value replacement, which is faster than methods that search though <code>tools</code> for each element of <code>groups</code> or vice-versa.</p>\n\n<p>Notice that, as well as mutating <code>groups</code>, this returns the updated value. If you do not wish to modify <code>groups</code> replace <a href=\"http://ruby-doc.org/core-2.4.0/Hash.html#method-i-update\" rel=\"nofollow noreferrer\">Hash#update</a> (aka <code>merge!</code>) with <a href=\"http://ruby-doc.org/core-2.4.0/Hash.html#method-i-merge\" rel=\"nofollow noreferrer\">Hash#merge</a>.</p>\n"}], "owner": {"reputation": 6671, "user_id": 5129131, "user_type": "registered", "accept_rate": 44, "profile_image": "https://i.stack.imgur.com/j5HkF.jpg?s=128&g=1", "display_name": "Sergio Tapia", "link": "https://stackoverflow.com/users/5129131/sergio-tapia"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 38, "favorite_count": 0, "accepted_answer_id": 42794742, "answer_count": 4, "score": 1, "last_activity_date": 1489529959, "creation_date": 1489518709, "question_id": 42794631, "link": "https://stackoverflow.com/questions/42794631/how-to-place-things-into-an-array-of-hashes-based-on-property-value", "title": "How to place things into an array of hashes based on property value?", "body": "<p>I'm trying to place these <code>tools</code> into the right group hash object in this array. I'm not sure how to do this with Ruby.</p>\n\n<pre><code>groups = [\n  { group: 'Business Training', tools: [] },\n  { group: 'Human Resources', tools: [] },\n  { group: 'Clean', tools: [] },\n  { group: 'Example', tools: [] }\n]\n\ntools = [\n  { name: \"Foo\", group: \"Clean\", id: 1 },\n  { name: \"Bar\", group: \"Clean\", id: 2 },\n  { name: \"Baz\", group: \"Business Training\", id: 3 },\n]\n</code></pre>\n\n<hr>\n\n<p>I want to end up with a structure like this:</p>\n\n<pre><code>groups = [\n  { \n    group: 'Business Training', \n    tools: [\n      { name: \"Baz\", group: \"Business Training\", id: 3 },\n    ] \n  },\n  { group: 'Human Resources', tools: [] },\n  { \n    group: 'Clean', \n    tools: [\n      { name: \"Foo\", group: \"Clean\", id: 1 },\n      { name: \"Bar\", group: \"Clean\", id: 2 },\n    ] \n  },\n  { group: 'Example', tools: [] }\n]\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "git", "heroku"], "comments": [{"owner": {"reputation": 4150, "user_id": 7470620, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/49f3026fe13841e41d1805178eed9a3c?s=128&d=identicon&r=PG", "display_name": "eiko", "link": "https://stackoverflow.com/users/7470620/eiko"}, "edited": false, "score": 0, "creation_date": 1489519345, "post_id": 42794527, "comment_id": 72704130, "body": "do you get an actual error? these are warnings and theoretically would not stop your app from running."}, {"owner": {"reputation": 19, "user_id": 7091609, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/02ff7f51f8cbfbf97484f6fde19aa863?s=128&d=identicon&r=PG&f=1", "display_name": "Lottie", "link": "https://stackoverflow.com/users/7091609/lottie"}, "reply_to_user": {"reputation": 4150, "user_id": 7470620, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/49f3026fe13841e41d1805178eed9a3c?s=128&d=identicon&r=PG", "display_name": "eiko", "link": "https://stackoverflow.com/users/7470620/eiko"}, "edited": false, "score": 0, "creation_date": 1489519610, "post_id": 42794527, "comment_id": 72704270, "body": "do you mean running the app like it migrating to Heroku? The database changes have not migrated to the app on heroku"}, {"owner": {"reputation": 4150, "user_id": 7470620, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/49f3026fe13841e41d1805178eed9a3c?s=128&d=identicon&r=PG", "display_name": "eiko", "link": "https://stackoverflow.com/users/7470620/eiko"}, "edited": false, "score": 1, "creation_date": 1489520038, "post_id": 42794527, "comment_id": 72704511, "body": "i mean running the app on heroku. so it&#39;s a database issue? because once you push to heroku, you need to run your migrations again: <code>heroku run rake db:migrate</code>"}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1489530177, "post_id": 42794527, "comment_id": 72709985, "body": "Please read &quot;<a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a>&quot; and &quot;<a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>&quot;. Don&#39;t use links to images to convey information essential to the problem. Copy and paste the <i>relevant and significant</i> parts into the question. This lets us reuse the text without typing it in, and search engines can index the information and help others find the answers given. SO is about the future searchers and you&#39;re helping write an article how to solve this problem."}], "answers": [{"tags": [], "owner": {"reputation": 18856, "user_id": 1359650, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/dffc4318ac93e728a26c8e8b51b4eb37?s=128&d=identicon&r=PG", "display_name": "jvillian", "link": "https://stackoverflow.com/users/1359650/jvillian"}, "is_accepted": false, "score": 0, "last_activity_date": 1489521849, "creation_date": 1489521849, "answer_id": 42795536, "question_id": 42794527, "link": "https://stackoverflow.com/questions/42794527/how-to-push-my-rails-app-to-heroku/42795536#42795536", "title": "How to push my Rails app to Heroku", "body": "<p>On your bundler error, you should be able to safely ignore it (since you're getting a warning and not a true error). See the <a href=\"https://devcenter.heroku.com/articles/bundler-version\" rel=\"nofollow noreferrer\">Heroku article</a>.</p>\n\n<p>On your procfile error, visit the article referenced or read about <a href=\"https://devcenter.heroku.com/articles/procfile\" rel=\"nofollow noreferrer\">Process Types and the Procfile</a>. Again, you can safely ignore this warning and Heroku will boot up using the default web server (Webrick, I believe). </p>\n"}, {"comments": [{"owner": {"reputation": 5535, "user_id": 7295772, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ZhWhR.jpg?s=128&g=1", "display_name": "Fabrizio Bertoglio", "link": "https://stackoverflow.com/users/7295772/fabrizio-bertoglio"}, "edited": false, "score": 0, "creation_date": 1494416716, "post_id": 42795949, "comment_id": 74816946, "body": "NIce. But should I set a version of bundler in my Gemfile to avoid having two different bundler gem versions between development and production? thanks"}, {"owner": {"reputation": 35, "user_id": 7234128, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Q7Ds7.jpg?s=128&g=1", "display_name": "DawgOnKing", "link": "https://stackoverflow.com/users/7234128/dawgonking"}, "reply_to_user": {"reputation": 5535, "user_id": 7295772, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ZhWhR.jpg?s=128&g=1", "display_name": "Fabrizio Bertoglio", "link": "https://stackoverflow.com/users/7295772/fabrizio-bertoglio"}, "edited": false, "score": 0, "creation_date": 1495227464, "post_id": 42795949, "comment_id": 75181746, "body": "You can, depending on platform and preference. I&#39;ve had no issues, however."}], "tags": [], "owner": {"reputation": 35, "user_id": 7234128, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Q7Ds7.jpg?s=128&g=1", "display_name": "DawgOnKing", "link": "https://stackoverflow.com/users/7234128/dawgonking"}, "is_accepted": false, "score": 2, "last_activity_date": 1489523260, "creation_date": 1489523260, "answer_id": 42795949, "question_id": 42794527, "link": "https://stackoverflow.com/questions/42794527/how-to-push-my-rails-app-to-heroku/42795949#42795949", "title": "How to push my Rails app to Heroku", "body": "<p>Heroku restricts the version of Bundler that your app can use in production. Even if your version is newer - it will generate the above message. </p>\n\n<p>See <a href=\"https://devcenter.heroku.com/articles/bundler-version\" rel=\"nofollow noreferrer\">https://devcenter.heroku.com/articles/bundler-version</a></p>\n\n<p>As for Procfile message - that's generated because your attempting to install a server gem (most likely Puma) that requires the file to run on Heroku instead of Webrick. Webrick is generally considered unsuitable for production use because it can't accept a large volume of incoming requests at once.</p>\n\n<p>Follow instructions at <a href=\"https://devcenter.heroku.com/articles/deploying-rails-applications-with-the-puma-web-server\" rel=\"nofollow noreferrer\">https://devcenter.heroku.com/articles/deploying-rails-applications-with-the-puma-web-server</a> if you're attempting to run Puma.</p>\n"}], "owner": {"reputation": 19, "user_id": 7091609, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/02ff7f51f8cbfbf97484f6fde19aa863?s=128&d=identicon&r=PG&f=1", "display_name": "Lottie", "link": "https://stackoverflow.com/users/7091609/lottie"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 172, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1489530002, "creation_date": 1489518377, "last_edit_date": 1489530002, "question_id": 42794527, "link": "https://stackoverflow.com/questions/42794527/how-to-push-my-rails-app-to-heroku", "title": "How to push my Rails app to Heroku", "body": "<p>I have made changes to the database I need to migrate.</p>\n\n<p>After commiting my changes to github with no problem, when I attempt to push my app to Heroku using</p>\n\n<pre><code>push heroku master\n</code></pre>\n\n<p>I receive several error messages on the command line.</p>\n\n<pre><code>Running: bundle install --without development:test --path vendor/bundle --binstubs vendor/bundle/bin -j4 --deployment\nremote:        Warning: the running version of Bundler (1.13.7) is older than the version that created the lockfile (1.14.6). We suggest you upgrade to the latest version of Bundler by running `gem install bundler`.\n</code></pre>\n\n<p>As the error bedug instructs, I ran</p>\n\n<pre><code>gem install bundler\n</code></pre>\n\n<p>and then it gave me a second error:</p>\n\n<pre><code>WARNING:\nremote: No Procfile detected, using the default web server.\nremote: We recommend explicitly declaring how to boot your server process via a Procfile\ndevcenter.heroku.com/articles/ruby-default-web-server\n</code></pre>\n\n<p>I followed the instructions on the website in the link attached, but didn't resolve the problem.</p>\n\n<p>Can anyone tell me if I'm missing something in the bigger picture?</p>\n\n<p>Background/more info: I migrated my database to Heroku in the past with no problem, added a method to products and then got so many errors.</p>\n\n<p><a href=\"https://i.stack.imgur.com/bWqYp.png\" rel=\"nofollow noreferrer\">enter image description here</a></p>\n"}, {"tags": ["ruby", "ssl", "iis", "chef-infra"], "answers": [{"tags": [], "owner": {"reputation": 43208, "user_id": 78722, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf611565f0b79abd0b3dc200ad867661?s=128&d=identicon&r=PG", "display_name": "coderanger", "link": "https://stackoverflow.com/users/78722/coderanger"}, "is_accepted": false, "score": 0, "last_activity_date": 1489520024, "creation_date": 1489520024, "answer_id": 42794976, "question_id": 42794322, "link": "https://stackoverflow.com/questions/42794322/ssl-certificate-conditional-check-using-chef/42794976#42794976", "title": "SSL certificate conditional check using chef", "body": "<p>What you want is to use notifications:</p>\n\n<pre><code># Import certificates to local machine personal store\nwindows_certificate 'cert.pfx' do  \n    pfx_password    '@password'\n    notifies :config, 'iis_site[Default Web Site]'\nend\n\n#Setup a HTTPS port on IIS\niis_site 'Default Web Site' do  \n  action :nothing  \n  bindings 'http/*:80:,https/*:443:'  \nend\n</code></pre>\n\n<p>Or something like that. Every resource will send out the configured notification actions if and only if it is \"updated\" (where updated means different things for different resources).</p>\n"}], "owner": {"reputation": 11, "user_id": 7342159, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ab3819d6a451ef096d6edd3174458899?s=128&d=identicon&r=PG&f=1", "display_name": "Pavan", "link": "https://stackoverflow.com/users/7342159/pavan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 97, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1489520024, "creation_date": 1489517780, "question_id": 42794322, "link": "https://stackoverflow.com/questions/42794322/ssl-certificate-conditional-check-using-chef", "title": "SSL certificate conditional check using chef", "body": "<p>I am working on a chef code that imports the certificate to the personal store using the pfx file, and add the https binding in the IIS and add the ssl certificate. I am successful with the code, and the code looks like below.</p>\n\n<p>However i would like to put a conditional check before i run these steps, i.e if the ssl certificate is already available on the https binding on  IIS, i do not want to run any of the below script.</p>\n\n<p>Could you help me with that first line of 'IF' statement on how to see if the SSL is already installed?</p>\n\n<pre><code># Import certificates to local machine personal store\nwindows_certificate 'cert.pfx' do  \n    pfx_password    '@password'  \nend\n\n#Setup a HTTPS port on IIS\niis_site 'Default Web Site' do  \n  action :config  \n  bindings 'http/*:80:,https/*:443:'  \nend\n\n#Add the certificate to the IIS \nwindows_certificate_binding 'ssl certificate name' do  \n  address '0.0.0.0'  \nend\n</code></pre>\n"}, {"tags": ["jquery", "ruby-on-rails", "ruby", "ajax"], "comments": [{"owner": {"reputation": 17065, "user_id": 175981, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/b357ab54946a2be4d19c8a9aab2a09d6?s=128&d=identicon&r=PG", "display_name": "Chris Peters", "link": "https://stackoverflow.com/users/175981/chris-peters"}, "edited": false, "score": 0, "creation_date": 1489516718, "post_id": 42793916, "comment_id": 72702528, "body": "Is it because you commented out <code>@role.update</code>?"}, {"owner": {"reputation": 699, "user_id": 6873497, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/7e17e7b7f298bbf51382bd565add516a?s=128&d=identicon&r=PG&f=1", "display_name": "matiss", "link": "https://stackoverflow.com/users/6873497/matiss"}, "reply_to_user": {"reputation": 17065, "user_id": 175981, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/b357ab54946a2be4d19c8a9aab2a09d6?s=128&d=identicon&r=PG", "display_name": "Chris Peters", "link": "https://stackoverflow.com/users/175981/chris-peters"}, "edited": false, "score": 0, "creation_date": 1489516861, "post_id": 42793916, "comment_id": 72702611, "body": "@ChrisPeters Sorry, It&#39;s not about that - I deleted that line + added user_params"}, {"owner": {"reputation": 1843, "user_id": 4067720, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a52c645614505bcaeb65a6c5199158c1?s=128&d=identicon&r=PG", "display_name": "Glyoko", "link": "https://stackoverflow.com/users/4067720/glyoko"}, "edited": false, "score": 0, "creation_date": 1489517127, "post_id": 42793916, "comment_id": 72702769, "body": "Is the roles&#39; relation to users a has_one or a has_many?"}, {"owner": {"reputation": 699, "user_id": 6873497, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/7e17e7b7f298bbf51382bd565add516a?s=128&d=identicon&r=PG&f=1", "display_name": "matiss", "link": "https://stackoverflow.com/users/6873497/matiss"}, "reply_to_user": {"reputation": 1843, "user_id": 4067720, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a52c645614505bcaeb65a6c5199158c1?s=128&d=identicon&r=PG", "display_name": "Glyoko", "link": "https://stackoverflow.com/users/4067720/glyoko"}, "edited": false, "score": 0, "creation_date": 1489517214, "post_id": 42793916, "comment_id": 72702823, "body": "@Glyoko It&#39;s <code>has_many :roles</code> and <code>accepts_nested_attributes_for :roles, reject_if: proc { |attributes| attributes[:name].blank? }</code> in User model"}, {"owner": {"reputation": 17065, "user_id": 175981, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/b357ab54946a2be4d19c8a9aab2a09d6?s=128&d=identicon&r=PG", "display_name": "Chris Peters", "link": "https://stackoverflow.com/users/175981/chris-peters"}, "edited": false, "score": 0, "creation_date": 1489517259, "post_id": 42793916, "comment_id": 72702852, "body": "Also, it helps others if you indent your code properly. Take a minute to save a minute for everyone who is trying to help you."}, {"owner": {"reputation": 699, "user_id": 6873497, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/7e17e7b7f298bbf51382bd565add516a?s=128&d=identicon&r=PG&f=1", "display_name": "matiss", "link": "https://stackoverflow.com/users/6873497/matiss"}, "reply_to_user": {"reputation": 17065, "user_id": 175981, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/b357ab54946a2be4d19c8a9aab2a09d6?s=128&d=identicon&r=PG", "display_name": "Chris Peters", "link": "https://stackoverflow.com/users/175981/chris-peters"}, "edited": false, "score": 0, "creation_date": 1489517482, "post_id": 42793916, "comment_id": 72702980, "body": "@ChrisPeters True, I should be more accurate. I forgot I got that line &amp; forgot I should have added <code>user_params</code> as that really matters in my case. It seems that there could be something wrong how I&#39;m passing params. So far I tried to do it like in <a href=\"http://stackoverflow.com/a/39046713\">this answer</a>"}], "owner": {"reputation": 699, "user_id": 6873497, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/7e17e7b7f298bbf51382bd565add516a?s=128&d=identicon&r=PG&f=1", "display_name": "matiss", "link": "https://stackoverflow.com/users/6873497/matiss"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 130, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1489609230, "creation_date": 1489516464, "last_edit_date": 1489609230, "question_id": 42793916, "link": "https://stackoverflow.com/questions/42793916/rails-5-nested-form-not-saving-on-update-with-ajax", "title": "Rails 5: nested form not saving on Update with AJAX", "body": "<p>I'm a bit stuck as with modal window where there are nested form (User Roles below) and which is not working on Update action.</p>\n\n<p>In <em>/controllers/users_controller.rb</em> I have this code:</p>\n\n<pre><code>def update\n  @user = User.find(params[:id])\n  @role = Role.where(user_id: @user)\n  respond_to do |format|\n  if @user.update(user_params)\n  format.json { head :no_content }\n  format.js\n  else\n  format.json { render json: @user.errors.full_messages,\n                         status: :unprocessable_entity }\n  end\n  end\nend\n\nprivate\n\n  def user_params\n  params.require(:user).permit(:name, :email, :password, :password_confirmation, :locale, :psw_change,\n  roles_attributes: [:id, :general, :dashboard, :reports, :rights] )\n  end\n</code></pre>\n\n<p>Then there is partial where forms are generated - <em>/views/users/_form.html.erb</em></p>\n\n<pre><code>&lt;div class=\"panel-heading\"&gt;\n  &lt;div class=\"panel-options\"&gt;\n    &lt;ul class=\"nav nav-tabs\"&gt;\n      &lt;li class=\"active\"&gt;&lt;a href=\"#profile\" data-toggle=\"tab\"&gt;Profile&lt;/a&gt;&lt;/li&gt;\n      &lt;li class=\"\"&gt;&lt;a href=\"#roles\" data-toggle=\"tab\"&gt;Roles&lt;/a&gt;&lt;/li&gt;\n    &lt;/ul&gt;\n  &lt;/div&gt;\n&lt;/div&gt;\n&lt;%= form_for(@user, remote: true, html: { role: \"form\" }) do |f| %&gt;\n&lt;div class=\"panel-body\"&gt;\n&lt;form method=\"get\" class=\"form-horizontal\"&gt;\n&lt;!-- Here we render User profile tab --&gt;\n&lt;div class=\"tab-content\"&gt;\n  &lt;div class=\"tab-pane active\" id=\"profile\"&gt;\n    &lt;div id=\"error_explanation\" class=\"bg-danger text-danger\"&gt;&lt;/div&gt;\n      &lt;div class=\"form-group\"&gt;\n        &lt;%= f.text_field :name, class: 'form-control', placeholder: \"Name\"%&gt;\n      &lt;/div&gt;\n      &lt;div class=\"form-group\"&gt;\n        &lt;%= f.email_field :email, class: 'form-control', placeholder: \"E-mail\"%&gt;\n      &lt;/div&gt;\n      &lt;div class=\"form-group\"&gt;\n        &lt;%= f.password_field :password, class: 'form-control', placeholder: \"Password\"%&gt;\n      &lt;/div&gt;\n      &lt;div class=\"form-group\"&gt;\n        &lt;%= f.password_field :password_confirmation, class: 'form-control', placeholder: \"Password confirmation\"%&gt;\n      &lt;/div&gt;\n    &lt;/div&gt;\n&lt;!-- Here we render User roles tab --&gt;\n  &lt;div class=\"tab-pane\" id=\"roles\"&gt;\n    &lt;%= f.fields_for :roles, @role do |role| %&gt;\n      &lt;%= render 'common/roles/general', f: role %&gt;\n    &lt;% end %&gt;\n    &lt;div class='row'&gt;&lt;/div&gt;\n  &lt;/div&gt;\n&lt;/div&gt;\n&lt;div class=\"form-group\"&gt;\n  &lt;div class=\"modal-footer\"&gt;\n    &lt;button type=\"button\" class=\"btn btn-white\" data-dismiss=\"modal\"&gt;Close&lt;/button&gt;\n    &lt;%= f.submit  @user.new_record? ? \"Create User\" : \"Update User\", class: \"btn btn-primary\" %&gt;\n  &lt;/div&gt;\n&lt;/div&gt;\n&lt;/form&gt;\n&lt;/div&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>On Update action in console I see this:</p>\n\n<pre><code>Started PATCH \"/lv/users/1\" for 10.0.2.2 at 2017-03-14 18:13:21 +0000\nProcessing by UsersController#update as JS\n  Parameters: {\"utf8\"=&gt;\"\u2713\", \"user\"=&gt;{\"name\"=&gt;\"Name 123\", \"email\"=&gt;\"some_name@some_mail.com\", \"password\"=&gt;\"[FILTERED]\", \"password_confirmation\"=&gt;\"[FILTERED]\", \"locale\"=&gt;\"lv\", \"psw_change\"=&gt;\"90\", \"roles_attributes\"=&gt;{\"0\"=&gt;{\"general\"=&gt;\"seller_buyer\", \"dashboard\"=&gt;\"deleter\", \"reports\"=&gt;\"deleter\", \"rights\"=&gt;\"deleter\", \"id\"=&gt;\"1\"}}}, \"commit\"=&gt;\"Update User\", \"locale\"=&gt;\"lv\", \"id\"=&gt;\"1\"}\n  User Load (2.1ms)  SELECT  \"users\".* FROM \"users\" WHERE \"users\".\"id\" = $1 LIMIT $2  [[\"id\", 1], [\"LIMIT\", 1]]\n  User Load (1.1ms)  SELECT  \"users\".* FROM \"users\" WHERE \"users\".\"id\" = $1 LIMIT $2  [[\"id\", 1], [\"LIMIT\", 1]]\n  Role Load (1.8ms)  SELECT \"roles\".* FROM \"roles\" WHERE \"roles\".\"user_id\" = $1  [[\"user_id\", 1]]\n   (0.6ms)  BEGIN\n  Role Load (1.2ms)  SELECT \"roles\".* FROM \"roles\" WHERE \"roles\".\"user_id\" = $1 AND \"roles\".\"id\" = 1  [[\"user_id\", 1]]\n  User Exists (1.5ms)  SELECT  1 AS one FROM \"users\" WHERE LOWER(\"users\".\"email\") = LOWER($1) AND (\"users\".\"id\" != $2) LIMIT $3  [[\"email\", \"some_name@some_mail.com\"], [\"id\", 1], [\"LIMIT\", 1]]\n   (0.7ms)  COMMIT\n  Rendering users/update.js.erb\n  Rendered users/_user.html.erb (2.6ms) [cache miss]\n  Rendered layouts/_userprofile.html.erb (0.7ms) [cache miss]\n  Rendered users/update.js.erb (173.7ms)\nCompleted 200 OK in 1821ms (Views: 376.4ms | ActiveRecord: 599.1ms)\n</code></pre>\n\n<p>Strange thing is <strong>it does not save User Role updated values, however it would save User Profile updated values if there is such update needed</strong>. Obviously I'm missing here something, but I don't see what exactly. I would be happy for any help. Thank you!</p>\n\n<p><strong>The solution</strong></p>\n\n<p>If anyone needs, here is what was wrong in my form. Basically the view part of <em>_form.html.erb</em> was not correct, so values were not updating. It has to be like this:</p>\n\n<pre><code>&lt;!-- Here we render User roles tab --&gt;\n  &lt;div class=\"tab-pane\" id=\"roles\"&gt;\n    &lt;%= f.fields_for :roles, @role do |role| %&gt;\n      &lt;%= render 'common/roles/general', f: role %&gt;\n    &lt;% end %&gt;\n  &lt;/div&gt;\n&lt;/div&gt;\n&lt;/div&gt;\n\n  &lt;div class=\"modal-footer\"&gt;\n    &lt;button type=\"button\" class=\"btn btn-white\" data-dismiss=\"modal\"&gt;Close&lt;/button&gt;\n    &lt;%= f.submit  @user.new_record? ? \"Create User\" : \"Update User\", class: \"btn btn-primary\" %&gt;\n    &lt;% end %&gt;\n  &lt;/div&gt;\n&lt;/form&gt;\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "benchmarking"], "comments": [{"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 5, "creation_date": 1489512248, "post_id": 42792588, "comment_id": 72699723, "body": "I assume you have the benchmark results ready and will post shortly? :)"}, {"owner": {"reputation": 19261, "user_id": 4758119, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/F4dJY.jpg?s=128&g=1", "display_name": "Deepak Mahakale", "link": "https://stackoverflow.com/users/4758119/deepak-mahakale"}, "edited": false, "score": 0, "creation_date": 1489512588, "post_id": 42792588, "comment_id": 72699957, "body": "Let me help you with that <a href=\"https://coderwall.com/p/ac5j9g/or-concat-what-is-faster-for-appending-string-in-ruby\" rel=\"nofollow noreferrer\">coderwall.com/p/ac5j9g/&hellip;</a>"}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "reply_to_user": {"reputation": 19261, "user_id": 4758119, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/F4dJY.jpg?s=128&g=1", "display_name": "Deepak Mahakale", "link": "https://stackoverflow.com/users/4758119/deepak-mahakale"}, "edited": false, "score": 0, "creation_date": 1489512636, "post_id": 42792588, "comment_id": 72699994, "body": "@DeepakMahakale <code>.concat</code> mutates the left string, though."}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1489512672, "post_id": 42792588, "comment_id": 72700008, "body": "&quot;Assuming we don&#39;t want to change either string&quot; - but your first two examples do change the first string."}, {"owner": {"reputation": 19261, "user_id": 4758119, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/F4dJY.jpg?s=128&g=1", "display_name": "Deepak Mahakale", "link": "https://stackoverflow.com/users/4758119/deepak-mahakale"}, "edited": false, "score": 0, "creation_date": 1489512683, "post_id": 42792588, "comment_id": 72700017, "body": "yes, In that case option 3 and 4 are the only one&#39;s left"}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1489512934, "post_id": 42792588, "comment_id": 72700194, "body": "The assumption is the strings are fixed, not being reused. I&#39;ll add that. <code>&#39;a&#39;.concat(&#39;b&#39;)</code> doesn&#39;t change the value of <code>&#39;a&#39;</code>. It&#39;d only change if it was a variable. Got a better way to phrase it?"}, {"owner": {"reputation": 79498, "user_id": 298624, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/5b84ccc2f7709bbb7105baeb40e0961b?s=128&d=identicon&r=PG", "display_name": "fl00r", "link": "https://stackoverflow.com/users/298624/fl00r"}, "edited": false, "score": 0, "creation_date": 1489514150, "post_id": 42792588, "comment_id": 72700988, "body": "It is mutation with or without additional variable :) So the benchmark is biased. Mutation usually faster than copying ;). I&#39;d separate the benchmark into mutable and immutable string concatenation."}], "answers": [{"comments": [{"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1489513798, "post_id": 42792818, "comment_id": 72700761, "body": "It&#39;s a wiki so if you know what you&#39;re doing and want to improve it feel free. If you don&#39;t know and you change it expect it to be rolled back."}, {"owner": {"reputation": 79498, "user_id": 298624, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/5b84ccc2f7709bbb7105baeb40e0961b?s=128&d=identicon&r=PG", "display_name": "fl00r", "link": "https://stackoverflow.com/users/298624/fl00r"}, "edited": false, "score": 2, "creation_date": 1489513976, "post_id": 42792818, "comment_id": 72700869, "body": "Your <code>interpolate</code> is not real interpolate because <code>&quot;z #{&quot;z&quot;}&quot;</code> will be compiled into <code>&quot;z z&quot;</code>. To do real benchmark here you have to introduce additional variable <code>interpolate { z = &#39;z&#39;; &quot;a #{z}&quot; }</code>"}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1580496859, "post_id": 42792818, "comment_id": 106129756, "body": "You may want to add <code>&quot;a&quot; &quot;z&quot; #=&gt; &quot;az&quot;</code> to your benchmark. (Weird, eh?)"}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1580682259, "post_id": 42792818, "comment_id": 106167233, "body": "I added some more tests; the situation is the same as the previous comment, along with the last comments in the answer. Ruby will recognize that the two strings are adjacent and concatenate them together prior to running."}], "tags": [], "owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "is_accepted": false, "score": 9, "last_activity_date": 1580682150, "last_edit_date": 1580682150, "creation_date": 1489512847, "answer_id": 42792818, "question_id": 42792588, "link": "https://stackoverflow.com/questions/42792588/how-to-quickly-join-two-strings-in-ruby/42792818#42792818", "title": "How to quickly join two strings in Ruby", "body": "<p>Starting with short strings:</p>\n\n<pre><code>z = 'z'\n'a ' &lt;&lt; z      # =&gt; \"a z\"\n'a '.concat(z) # =&gt; \"a z\"\n'a ' + z       # =&gt; \"a z\"\n\"a #{z}\"       # =&gt; \"a z\"\n\nrequire 'fruity'\ncompare do\n  append      { 'a ' &lt;&lt; z}\n  concat      { 'a '.concat(z)}\n  plus        { 'a ' + z}\n  interpolate { \"a #{z}\" }\nend\n\n# &gt;&gt; Running each test 65536 times. Test will take about 2 seconds.\n# &gt;&gt; interpolate is similar to append\n# &gt;&gt; append is similar to plus\n# &gt;&gt; plus is faster than concat by 2x \u00b1 0.1\n</code></pre>\n\n<p>Increasing the \"left\" string to 11 characters:</p>\n\n<pre><code>require 'fruity'\ncompare do\n  append      { 'abcdefghij ' &lt;&lt; z}\n  concat      { 'abcdefghij '.concat(z)}\n  plus        { 'abcdefghij ' + z}\n  interpolate { \"abcdefghij #{z}\" }\nend\n\n# &gt;&gt; Running each test 65536 times. Test will take about 2 seconds.\n# &gt;&gt; interpolate is similar to append\n# &gt;&gt; append is similar to plus\n# &gt;&gt; plus is faster than concat by 2x \u00b1 1.0\n</code></pre>\n\n<p>51 characters:</p>\n\n<pre><code>compare do\n  append      { 'abcdefghijabcdefghijabcdefghijabcdefghijabcdefghij ' &lt;&lt; z}\n  concat      { 'abcdefghijabcdefghijabcdefghijabcdefghijabcdefghij '.concat(z)}\n  plus        { 'abcdefghijabcdefghijabcdefghijabcdefghijabcdefghij ' + z}\n  interpolate { \"abcdefghijabcdefghijabcdefghijabcdefghijabcdefghij #{z}\" }\nend\n\n# &gt;&gt; Running each test 32768 times. Test will take about 2 seconds.\n# &gt;&gt; plus is faster than append by 2x \u00b1 1.0\n# &gt;&gt; append is similar to interpolate\n# &gt;&gt; interpolate is similar to concat\n</code></pre>\n\n<p>101:</p>\n\n<pre><code>compare do\n  append      { 'abcdefghijabcdefghijabcdefghijabcdefghijabcdefghijabcdefghijabcdefghijabcdefghijabcdefghijabcdefghij ' &lt;&lt; z}\n  concat      { 'abcdefghijabcdefghijabcdefghijabcdefghijabcdefghijabcdefghijabcdefghijabcdefghijabcdefghijabcdefghij '.concat(z)}\n  plus        { 'abcdefghijabcdefghijabcdefghijabcdefghijabcdefghijabcdefghijabcdefghijabcdefghijabcdefghijabcdefghij ' + z}\n  interpolate { \"abcdefghijabcdefghijabcdefghijabcdefghijabcdefghijabcdefghijabcdefghijabcdefghijabcdefghijabcdefghij #{z}\" }\nend\n\n# &gt;&gt; Running each test 32768 times. Test will take about 2 seconds.\n# &gt;&gt; plus is faster than interpolate by 2x \u00b1 0.1\n# &gt;&gt; interpolate is similar to append\n# &gt;&gt; append is similar to concat\n</code></pre>\n\n<p>501:</p>\n\n<pre><code>compare do\n  append      { 'abcdefghijabcdefghijabcdefghijabcdefghijabcdefghijabcdefghijabcdefghijabcdefghijabcdefghijabcdefghijabcdefghijabcdefghijabcdefghijabcdefghijabcdefghijabcdefghijabcdefghijabcdefghijabcdefghijabcdefghijabcdefghijabcdefghijabcdefghijabcdefghijabcdefghijabcdefghijabcdefghijabcdefghijabcdefghijabcdefghijabcdefghijabcdefghijabcdefghijabcdefghijabcdefghijabcdefghijabcdefghijabcdefghijabcdefghijabcdefghijabcdefghijabcdefghijabcdefghijabcdefghijabcdefghijabcdefghijabcdefghijabcdefghijabcdefghijabcdefghij ' &lt;&lt; z}\n  concat      { 'abcdefghijabcdefghijabcdefghijabcdefghijabcdefghijabcdefghijabcdefghijabcdefghijabcdefghijabcdefghijabcdefghijabcdefghijabcdefghijabcdefghijabcdefghijabcdefghijabcdefghijabcdefghijabcdefghijabcdefghijabcdefghijabcdefghijabcdefghijabcdefghijabcdefghijabcdefghijabcdefghijabcdefghijabcdefghijabcdefghijabcdefghijabcdefghijabcdefghijabcdefghijabcdefghijabcdefghijabcdefghijabcdefghijabcdefghijabcdefghijabcdefghijabcdefghijabcdefghijabcdefghijabcdefghijabcdefghijabcdefghijabcdefghijabcdefghijabcdefghij '.concat(z)}\n  plus        { 'abcdefghijabcdefghijabcdefghijabcdefghijabcdefghijabcdefghijabcdefghijabcdefghijabcdefghijabcdefghijabcdefghijabcdefghijabcdefghijabcdefghijabcdefghijabcdefghijabcdefghijabcdefghijabcdefghijabcdefghijabcdefghijabcdefghijabcdefghijabcdefghijabcdefghijabcdefghijabcdefghijabcdefghijabcdefghijabcdefghijabcdefghijabcdefghijabcdefghijabcdefghijabcdefghijabcdefghijabcdefghijabcdefghijabcdefghijabcdefghijabcdefghijabcdefghijabcdefghijabcdefghijabcdefghijabcdefghijabcdefghijabcdefghijabcdefghijabcdefghij ' + z}\n  interpolate { \"abcdefghijabcdefghijabcdefghijabcdefghijabcdefghijabcdefghijabcdefghijabcdefghijabcdefghijabcdefghijabcdefghijabcdefghijabcdefghijabcdefghijabcdefghijabcdefghijabcdefghijabcdefghijabcdefghijabcdefghijabcdefghijabcdefghijabcdefghijabcdefghijabcdefghijabcdefghijabcdefghijabcdefghijabcdefghijabcdefghijabcdefghijabcdefghijabcdefghijabcdefghijabcdefghijabcdefghijabcdefghijabcdefghijabcdefghijabcdefghijabcdefghijabcdefghijabcdefghijabcdefghijabcdefghijabcdefghijabcdefghijabcdefghijabcdefghijabcdefghij #{z}\" }\nend\n\n# &gt;&gt; Running each test 16384 times. Test will take about 1 second.\n# &gt;&gt; plus is faster than append by 2x \u00b1 0.1\n# &gt;&gt; append is similar to interpolate\n# &gt;&gt; interpolate is similar to concat\n</code></pre>\n\n<p>Once the strings got past 50 characters <code>+</code> consistently outperformed the others.</p>\n\n<p>In the comments there are mention of some of these mutating the string on the left. Here's what would happen if it was a variable on the left, not a literal string:</p>\n\n<pre><code>a = 'a'\nz = 'z'\n\na &lt;&lt; z # =&gt; \"az\"\na # =&gt; \"az\"\n\na = 'a'\na.concat(z) # =&gt; \"az\"\na # =&gt; \"az\"\n</code></pre>\n\n<p>compared to:</p>\n\n<pre><code>a + z # =&gt; \"az\"\na     # =&gt; \"a\"\n\n\"#{a} #{z}\" # =&gt; \"a z\"\na           # =&gt; \"a\"\n</code></pre>\n\n<p>Note: The initial version of answer had a bad test using:</p>\n\n<pre><code>\"a #{'z'}\"\n</code></pre>\n\n<p>The problem with that is Ruby is smart enough to recognize that <code>'z'</code> is another literal and converts the string into:</p>\n\n<pre><code>\"a z\"\n</code></pre>\n\n<p>with the end result that the test would be unfairly faster than the others.</p>\n\n<hr>\n\n<p>It's been a while and Ruby's smarter and faster. I added a couple additional tests:</p>\n\n<pre><code>puts \"Running Ruby v%s\" % RUBY_VERSION\n\nrequire 'fruity'\n\nz_ = 'z'\ncompare do\n  append       { 'abcdefghij ' &lt;&lt; 'z'      }\n  concat       { 'abcdefghij '.concat('z') }\n  plus         { 'abcdefghij ' + 'z'       }\n  interpolate1 { \"abcdefghij #{'z'}\"       }\n  interpolate2 { \"abcdefghij #{z_}\"        }\n  adjacent     { 'abcdefghij' ' z'         }\nend\n\n# &gt;&gt; Running Ruby v2.7.0\n# &gt;&gt; Running each test 65536 times. Test will take about 3 seconds.\n# &gt;&gt; adjacent is similar to interpolate1\n# &gt;&gt; interpolate1 is faster than interpolate2 by 2x \u00b1 1.0\n# &gt;&gt; interpolate2 is similar to append\n# &gt;&gt; append is similar to concat\n# &gt;&gt; concat is similar to plus\n</code></pre>\n\n<p><code>interpolate1</code> and <code>adjacent</code> are basically the same as far as the interpreter is concerned and will be concatenated prior to running. <code>interpolate2</code> forces Ruby to do it at run-time so it's a little slower.</p>\n"}], "owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 7145, "favorite_count": 3, "answer_count": 1, "score": 8, "last_activity_date": 1580682150, "creation_date": 1489512141, "last_edit_date": 1489513711, "question_id": 42792588, "link": "https://stackoverflow.com/questions/42792588/how-to-quickly-join-two-strings-in-ruby", "title": "How to quickly join two strings in Ruby", "body": "<p>It's common to need to join strings, and in Ruby we have common ways of doing it: appending, concatenating and interpolating one into the other, or using the built-in <code>concat</code> method in String. (We have multiple ways of doing it for flexibility and to ease the transition from other languages to Ruby.)</p>\n\n<p>Starting with:</p>\n\n<pre><code>'a ' &lt;&lt; 'z'      # =&gt; \"a z\"\n'a '.concat('z') # =&gt; \"a z\"\n'a ' + 'z'       # =&gt; \"a z\"\n\"a #{'z'}\"       # =&gt; \"a z\"\n</code></pre>\n\n<p>Assuming we don't want to change either string and that the strings won't be assigned to variables, what is the fastest way to join them, and does the fastest way change as the size of the \"left\" string grows?</p>\n\n<p>For those who can't figure out why we'd post questions like this, it's to help educate and show the most efficient way to do a particular task. Newcomers to a language, Ruby in this case, often drag old ways of doing something with them, and inadvertently write code that runs more slowly than necessary. A simple change to their coding style can result in faster code.</p>\n"}, {"tags": ["ruby", "selenium-webdriver", "selenium-chromedriver", "watir-webdriver"], "owner": {"reputation": 11, "user_id": 7710276, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8f032ebd18df036d18e72575c149e976?s=128&d=identicon&r=PG&f=1", "display_name": "FJRRulz", "link": "https://stackoverflow.com/users/7710276/fjrrulz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 345, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1489524374, "creation_date": 1489512056, "last_edit_date": 1489524374, "question_id": 42792557, "link": "https://stackoverflow.com/questions/42792557/selenium-webdriver-is-unable-to-connect-to-chromedriver-unless-debug-true-in-ru", "title": "Selenium Webdriver is unable to connect to chromedriver unless $DEBUG=true in Ruby", "body": "<p>I am using Watir webdriver to launch Chrome with the following:</p>\n\n<p><code>Watir::Browser.new(:chrome, desired_capabilities: WatirConfig.CHROME_PROFILE, :switches =&gt; %w[--disable-cache --ignore-certificate-errors])</code></p>\n\n<p>This successfully launches the browser only when <code>$DEBUG = true</code>. However, if I set $DEBUG to false, I get the following error:</p>\n\n<p><code>Selenium::WebDriver::Error::WebDriverError: unable to connect to chromedriver 127.0.0.1:9515</code></p>\n\n<p>For reference, this is the chrome profile:</p>\n\n<pre><code>`preferences = {\n        'download.directory_upgrade' =&gt; true,\n        'download.prompt_for_download' =&gt; false,\n        'download.default_directory' =&gt; download_directory,\n        'enable_do_not_track' =&gt; true\n    }\n    @CHROME_PROFILE = Selenium::WebDriver::Remote::Capabilities.chrome('chromeOptions' =&gt; {'prefs' =&gt; preferences})`\n</code></pre>\n\n<p>Any ideas on why I need to be in debug mode to launch the browser?</p>\n\n<p>More Info:\nRunning on Mac Sierra 10.12.3<br>\nSelenium-Webdriver: 3.0.5<br>\nWatir-Webdriver: 0.9.9<br>\nChromedriver: 2.28<br>\nChrome: 57.0.2987.98 (64-bit)</p>\n"}, {"tags": ["ruby", "pdf", "hyperlink", "prawn"], "comments": [{"owner": {"reputation": 16402, "user_id": 4025095, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/blJ4L.jpg?s=128&g=1", "display_name": "Myst", "link": "https://stackoverflow.com/users/4025095/myst"}, "edited": false, "score": 0, "creation_date": 1489522188, "post_id": 42792368, "comment_id": 72705726, "body": "Which CombinePDF version did you try? As the author, I know that <a href=\"https://github.com/boazsegev/combine_pdf/blob/master/CHANGELOG.md#change-log-v0234\" rel=\"nofollow noreferrer\">version 0.2.24 (link to <code>Changelog</code>)</a> was updated to include a fix that relates to this."}, {"owner": {"reputation": 103, "user_id": 7511344, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1WpxU.png?s=128&g=1", "display_name": "Felyppe Rodrigues", "link": "https://stackoverflow.com/users/7511344/felyppe-rodrigues"}, "reply_to_user": {"reputation": 16402, "user_id": 4025095, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/blJ4L.jpg?s=128&g=1", "display_name": "Myst", "link": "https://stackoverflow.com/users/4025095/myst"}, "edited": false, "score": 0, "creation_date": 1489524255, "post_id": 42792368, "comment_id": 72706993, "body": "Thanks for your reply @Myst. I&#39;m using the latest one (0.2.34), but I&#39;m still not able do add links. Do you have any link to this topic in the documentation?"}, {"owner": {"reputation": 16402, "user_id": 4025095, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/blJ4L.jpg?s=128&g=1", "display_name": "Myst", "link": "https://stackoverflow.com/users/4025095/myst"}, "edited": false, "score": 0, "creation_date": 1489524875, "post_id": 42792368, "comment_id": 72707359, "body": "It&#39;s undocumented since it isn&#39;t user adjustable... the only comment about PDF URLs, links etc&#39; is <a href=\"https://github.com/boazsegev/combine_pdf#known-limitations\" rel=\"nofollow noreferrer\">in the known limitations sections</a>, which describes how single page &quot;ripping&quot; and &quot;merging&quot; will probably cause links to break."}, {"owner": {"reputation": 103, "user_id": 7511344, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1WpxU.png?s=128&g=1", "display_name": "Felyppe Rodrigues", "link": "https://stackoverflow.com/users/7511344/felyppe-rodrigues"}, "reply_to_user": {"reputation": 16402, "user_id": 4025095, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/blJ4L.jpg?s=128&g=1", "display_name": "Myst", "link": "https://stackoverflow.com/users/4025095/myst"}, "edited": false, "score": 0, "creation_date": 1489525759, "post_id": 42792368, "comment_id": 72707815, "body": "But my point is not to create external links. I want to merge a folder of PDFs into a single PDF file and add a TOC containing the name of each merged file and a link to the page where the respective file begins."}, {"owner": {"reputation": 16402, "user_id": 4025095, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/blJ4L.jpg?s=128&g=1", "display_name": "Myst", "link": "https://stackoverflow.com/users/4025095/myst"}, "edited": false, "score": 0, "creation_date": 1489526096, "post_id": 42792368, "comment_id": 72707994, "body": "I&#39;m sorry if I weren&#39;t clear. I was also referring to internal links between pages, such as when implementing a TOC. All this data is contained in the PDF &quot;Catalog&quot; at the root of the PDF and it will be lost when merging pages (vs. merging whole PDF objects)."}, {"owner": {"reputation": 103, "user_id": 7511344, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1WpxU.png?s=128&g=1", "display_name": "Felyppe Rodrigues", "link": "https://stackoverflow.com/users/7511344/felyppe-rodrigues"}, "reply_to_user": {"reputation": 16402, "user_id": 4025095, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/blJ4L.jpg?s=128&g=1", "display_name": "Myst", "link": "https://stackoverflow.com/users/4025095/myst"}, "edited": false, "score": 0, "creation_date": 1489526239, "post_id": 42792368, "comment_id": 72708070, "body": "Actually, when I merge my files, the internal links between pages keep intact. The issue is to generate new link between the recently created Index and the first page of each merged file."}, {"owner": {"reputation": 16402, "user_id": 4025095, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/blJ4L.jpg?s=128&g=1", "display_name": "Myst", "link": "https://stackoverflow.com/users/4025095/myst"}, "edited": false, "score": 0, "creation_date": 1489528626, "post_id": 42792368, "comment_id": 72709259, "body": "But, I&#39;m assuming, the links created using <code>prawn</code> break...? If so, it might be caused by CombinePDF translating the absolute links (page numbers) to references (page objects), as it anticipates structural changes that might move pages around... I think I understand the issue better now... though I&#39;m not sure I can offer a solution just yet."}, {"owner": {"reputation": 103, "user_id": 7511344, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1WpxU.png?s=128&g=1", "display_name": "Felyppe Rodrigues", "link": "https://stackoverflow.com/users/7511344/felyppe-rodrigues"}, "reply_to_user": {"reputation": 16402, "user_id": 4025095, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/blJ4L.jpg?s=128&g=1", "display_name": "Myst", "link": "https://stackoverflow.com/users/4025095/myst"}, "edited": false, "score": 0, "creation_date": 1489583471, "post_id": 42792368, "comment_id": 72733642, "body": "Does CombinePDF offer support for creating new absolute links?"}, {"owner": {"reputation": 16402, "user_id": 4025095, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/blJ4L.jpg?s=128&g=1", "display_name": "Myst", "link": "https://stackoverflow.com/users/4025095/myst"}, "edited": false, "score": 0, "creation_date": 1489603424, "post_id": 42792368, "comment_id": 72748109, "body": "CombinePDF is a hacking tool more than an authoring tool. There isn&#39;t an easily supported method for adding links (of any kind), but CombinePDF does converts the PDF into Ruby objects, so technically you can add PDF objects and edit stuff to your heart&#39;s content... adding this feature isn&#39;t a bad idea. But it&#39;s midterms right now at my school and I&#39;m swamped."}, {"owner": {"reputation": 103, "user_id": 7511344, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1WpxU.png?s=128&g=1", "display_name": "Felyppe Rodrigues", "link": "https://stackoverflow.com/users/7511344/felyppe-rodrigues"}, "reply_to_user": {"reputation": 16402, "user_id": 4025095, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/blJ4L.jpg?s=128&g=1", "display_name": "Myst", "link": "https://stackoverflow.com/users/4025095/myst"}, "edited": false, "score": 0, "creation_date": 1489754439, "post_id": 42792368, "comment_id": 72821645, "body": "I see. I improvised using prawn outlines, it is not what I wanted, but it will do the jobs, thanks for your attention! =)"}], "owner": {"reputation": 103, "user_id": 7511344, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1WpxU.png?s=128&g=1", "display_name": "Felyppe Rodrigues", "link": "https://stackoverflow.com/users/7511344/felyppe-rodrigues"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 388, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1489511459, "creation_date": 1489511459, "question_id": 42792368, "link": "https://stackoverflow.com/questions/42792368/merge-pdf-files-with-references-using-ruby", "title": "Merge PDF Files with References using Ruby", "body": "<p>I have a list of PDF Files which I have to merge into a single PDF file using Ruby. <a href=\"https://github.com/boazsegev/combine_pdf\" rel=\"nofollow noreferrer\">Combine PDF</a> was able to do a fine job until now. The issue is that now I have to create an index indicating the pages in which each merged file is located and with links to each page. I was able to do so with <a href=\"http://prawnpdf.org/api-docs/2.0/\" rel=\"nofollow noreferrer\">Prawn</a>, however this procedure does not allow me to create references between the index and the pages, even though I can know beforehand in which page each file will start. Prawn has this option, but it does not allow me to insert external PDF files in the process (the template feature was deactivated long ago).</p>\n\n<p>Does anyone have a tool recommendation for merging those pdfs including an index with links?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "twitter-bootstrap"], "comments": [{"owner": {"reputation": 3736, "user_id": 1031061, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/8IZUV.jpg?s=128&g=1", "display_name": "Pardeep Dhingra", "link": "https://stackoverflow.com/users/1031061/pardeep-dhingra"}, "edited": false, "score": 0, "creation_date": 1489510352, "post_id": 42791924, "comment_id": 72698427, "body": "each_slice of 3 will give you array of 3 elements in entry."}, {"owner": {"reputation": 3736, "user_id": 1031061, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/8IZUV.jpg?s=128&g=1", "display_name": "Pardeep Dhingra", "link": "https://stackoverflow.com/users/1031061/pardeep-dhingra"}, "edited": false, "score": 0, "creation_date": 1489510605, "post_id": 42791924, "comment_id": 72698608, "body": "You don&#39;t need to loop it thrice. just use the css mentioned at bottom of the link you shared for number of column you want and your old code is good. <a href=\"https://v4-alpha.getbootstrap.com/components/card/#card-decks\" rel=\"nofollow noreferrer\">v4-alpha.getbootstrap.com/components/card/#card-decks</a>"}, {"owner": {"reputation": 1428, "user_id": 2730725, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/1a694df4d71660fc4d84ccbb92469e38?s=128&d=identicon&r=PG&f=1", "display_name": "user273072545345", "link": "https://stackoverflow.com/users/2730725/user273072545345"}, "reply_to_user": {"reputation": 3736, "user_id": 1031061, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/8IZUV.jpg?s=128&g=1", "display_name": "Pardeep Dhingra", "link": "https://stackoverflow.com/users/1031061/pardeep-dhingra"}, "edited": false, "score": 0, "creation_date": 1489510773, "post_id": 42791924, "comment_id": 72698729, "body": "@PardeepDhingra, would you mind making that an answer so I can see what you&#39;re talking about?"}, {"owner": {"reputation": 1428, "user_id": 2730725, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/1a694df4d71660fc4d84ccbb92469e38?s=128&d=identicon&r=PG&f=1", "display_name": "user273072545345", "link": "https://stackoverflow.com/users/2730725/user273072545345"}, "reply_to_user": {"reputation": 3736, "user_id": 1031061, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/8IZUV.jpg?s=128&g=1", "display_name": "Pardeep Dhingra", "link": "https://stackoverflow.com/users/1031061/pardeep-dhingra"}, "edited": false, "score": 0, "creation_date": 1489511649, "post_id": 42791924, "comment_id": 72699324, "body": "@PardeepDhingra, thank you ... just realized I missed your mention of css code at the bottom of the link ..."}, {"owner": {"reputation": 7972, "user_id": 1297435, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/a9a1330f0e323fabed39f561f1b0d94c?s=128&d=identicon&r=PG", "display_name": "rails_id", "link": "https://stackoverflow.com/users/1297435/rails-id"}, "edited": false, "score": 0, "creation_date": 1489512605, "post_id": 42791924, "comment_id": 72699969, "body": "You need understand about <code>each_slice</code>, and grouping statements in your element is wrong. <code>end</code> need to move after <code>div</code>"}, {"owner": {"reputation": 1428, "user_id": 2730725, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/1a694df4d71660fc4d84ccbb92469e38?s=128&d=identicon&r=PG&f=1", "display_name": "user273072545345", "link": "https://stackoverflow.com/users/2730725/user273072545345"}, "reply_to_user": {"reputation": 7972, "user_id": 1297435, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/a9a1330f0e323fabed39f561f1b0d94c?s=128&d=identicon&r=PG", "display_name": "rails_id", "link": "https://stackoverflow.com/users/1297435/rails-id"}, "edited": false, "score": 0, "creation_date": 1489513871, "post_id": 42791924, "comment_id": 72700814, "body": "@rails_id, you&#39;re right. moved <code>end</code> and displayed one group ... and it worked fine."}], "answers": [{"comments": [{"owner": {"reputation": 1428, "user_id": 2730725, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/1a694df4d71660fc4d84ccbb92469e38?s=128&d=identicon&r=PG&f=1", "display_name": "user273072545345", "link": "https://stackoverflow.com/users/2730725/user273072545345"}, "edited": false, "score": 0, "creation_date": 1489510507, "post_id": 42791994, "comment_id": 72698539, "body": "so I need to use <code>each_with_index</code> to fix this?"}, {"owner": {"reputation": 2212, "user_id": 4803039, "user_type": "registered", "accept_rate": 96, "profile_image": "https://lh3.googleusercontent.com/-MmbDSCFLpd8/AAAAAAAAAAI/AAAAAAAAADg/2jruEOH8FM0/photo.jpg?sz=128", "display_name": "philip yoo", "link": "https://stackoverflow.com/users/4803039/philip-yoo"}, "reply_to_user": {"reputation": 1428, "user_id": 2730725, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/1a694df4d71660fc4d84ccbb92469e38?s=128&d=identicon&r=PG&f=1", "display_name": "user273072545345", "link": "https://stackoverflow.com/users/2730725/user273072545345"}, "edited": false, "score": 0, "creation_date": 1489510674, "post_id": 42791994, "comment_id": 72698661, "body": "@user273072545345 You can either grab the data by index, or depending on what <code>@entries</code> is, if its an array of all the elements you want, you can loop over this with an <code>each</code> loop and possibly access <code>title</code> and <code>link</code>. What does <code>@entries</code> look like?"}, {"owner": {"reputation": 1428, "user_id": 2730725, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/1a694df4d71660fc4d84ccbb92469e38?s=128&d=identicon&r=PG&f=1", "display_name": "user273072545345", "link": "https://stackoverflow.com/users/2730725/user273072545345"}, "edited": false, "score": 0, "creation_date": 1489510838, "post_id": 42791994, "comment_id": 72698782, "body": "um ... I&#39;m still figuring out ruby, so, not sure how to grab data by index easily anyway ... not sure what you mean by <code>@entries</code>?"}, {"owner": {"reputation": 1428, "user_id": 2730725, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/1a694df4d71660fc4d84ccbb92469e38?s=128&d=identicon&r=PG&f=1", "display_name": "user273072545345", "link": "https://stackoverflow.com/users/2730725/user273072545345"}, "edited": false, "score": 0, "creation_date": 1489510875, "post_id": 42791994, "comment_id": 72698814, "body": "<code>@entries</code> is scrapped data if that helps?"}, {"owner": {"reputation": 2212, "user_id": 4803039, "user_type": "registered", "accept_rate": 96, "profile_image": "https://lh3.googleusercontent.com/-MmbDSCFLpd8/AAAAAAAAAAI/AAAAAAAAADg/2jruEOH8FM0/photo.jpg?sz=128", "display_name": "philip yoo", "link": "https://stackoverflow.com/users/4803039/philip-yoo"}, "reply_to_user": {"reputation": 1428, "user_id": 2730725, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/1a694df4d71660fc4d84ccbb92469e38?s=128&d=identicon&r=PG&f=1", "display_name": "user273072545345", "link": "https://stackoverflow.com/users/2730725/user273072545345"}, "edited": false, "score": 0, "creation_date": 1489511599, "post_id": 42791994, "comment_id": 72699288, "body": "You can access data via index, i.e.) <code>entry[0]</code> using your current code, or, I believe <code>@entries</code> is an array of elements. If you try looping over it like <code>@entries.each do |entry|</code>, you can try to see if this works: <code>&lt;%= entry.title %&gt;</code>. This is speculation because I don&#39;t know what <code>@entries</code> looks like"}, {"owner": {"reputation": 1428, "user_id": 2730725, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/1a694df4d71660fc4d84ccbb92469e38?s=128&d=identicon&r=PG&f=1", "display_name": "user273072545345", "link": "https://stackoverflow.com/users/2730725/user273072545345"}, "edited": false, "score": 0, "creation_date": 1489512111, "post_id": 42791994, "comment_id": 72699627, "body": "hm ... I just tried your code, and the layout comes out all weird ... it doesn&#39;t display horizontally, and in three columns which is what I had been seeking for ... I do appreciate your help though! Thank you!"}, {"owner": {"reputation": 1428, "user_id": 2730725, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/1a694df4d71660fc4d84ccbb92469e38?s=128&d=identicon&r=PG&f=1", "display_name": "user273072545345", "link": "https://stackoverflow.com/users/2730725/user273072545345"}, "edited": false, "score": 0, "creation_date": 1489513921, "post_id": 42791994, "comment_id": 72700840, "body": "your code was right ... based on rails_id comment, I moved <code>end</code>, and your code worked fine. just wanted to let you know that. =)"}], "tags": [], "owner": {"reputation": 2212, "user_id": 4803039, "user_type": "registered", "accept_rate": 96, "profile_image": "https://lh3.googleusercontent.com/-MmbDSCFLpd8/AAAAAAAAAAI/AAAAAAAAADg/2jruEOH8FM0/photo.jpg?sz=128", "display_name": "philip yoo", "link": "https://stackoverflow.com/users/4803039/philip-yoo"}, "is_accepted": false, "score": 0, "last_activity_date": 1489510404, "creation_date": 1489510404, "answer_id": 42791994, "question_id": 42791924, "link": "https://stackoverflow.com/questions/42791924/trouble-with-displaying-information-with-bootstrap-cards-decks/42791994#42791994", "title": "Trouble with displaying information with Bootstrap Cards (Decks)", "body": "<p><a href=\"https://ruby-doc.org/core-2.2.0/Enumerable.html#method-i-each_slice\" rel=\"nofollow noreferrer\">each_slice</a> returns an array, and trying to access <code>title</code> or <code>link</code> on an array will return this error. To access the data, you would have to grab by index in the sliced arrays.</p>\n"}, {"comments": [{"owner": {"reputation": 1428, "user_id": 2730725, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/1a694df4d71660fc4d84ccbb92469e38?s=128&d=identicon&r=PG&f=1", "display_name": "user273072545345", "link": "https://stackoverflow.com/users/2730725/user273072545345"}, "edited": false, "score": 0, "creation_date": 1489512044, "post_id": 42792182, "comment_id": 72699577, "body": "thank you! I keep comparing your code to the bootstrap&#39;s one since it&#39;s slightly different ... but it works, and it achieves what I had been trying to figure out."}], "tags": [], "owner": {"reputation": 3736, "user_id": 1031061, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/8IZUV.jpg?s=128&g=1", "display_name": "Pardeep Dhingra", "link": "https://stackoverflow.com/users/1031061/pardeep-dhingra"}, "is_accepted": true, "score": 0, "last_activity_date": 1489510932, "creation_date": 1489510932, "answer_id": 42792182, "question_id": 42791924, "link": "https://stackoverflow.com/questions/42791924/trouble-with-displaying-information-with-bootstrap-cards-decks/42792182#42792182", "title": "Trouble with displaying information with Bootstrap Cards (Decks)", "body": "<pre><code>&lt;div class=\"card-columns\"&gt;\n   &lt;% @entries.reverse.each do |entry| %&gt;\n     &lt;div class=\"card\"&gt;\n       &lt;div class=\"card-block\"&gt;\n        &lt;p class=\"card-title\"&gt;&lt;b&gt;&lt;%= entry.title %&gt;&lt;/b&gt;&lt;/p&gt;\n        &lt;p class=\"card-text\"&gt;&lt;%= entry.link %&gt;&lt;/p&gt;\n       &lt;/div&gt;\n     &lt;/div&gt;\n   &lt;% end %&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p>Scss:</p>\n\n<pre><code>.card-columns {\n  @include media-breakpoint-only(lg) {\n    column-count: 3;\n  }\n  @include media-breakpoint-only(xl) {\n    column-count: 3;\n  }\n}\n</code></pre>\n"}], "owner": {"reputation": 1428, "user_id": 2730725, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/1a694df4d71660fc4d84ccbb92469e38?s=128&d=identicon&r=PG&f=1", "display_name": "user273072545345", "link": "https://stackoverflow.com/users/2730725/user273072545345"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 518, "favorite_count": 0, "accepted_answer_id": 42792182, "answer_count": 2, "score": 0, "last_activity_date": 1489511708, "creation_date": 1489510207, "last_edit_date": 1489511708, "question_id": 42791924, "link": "https://stackoverflow.com/questions/42791924/trouble-with-displaying-information-with-bootstrap-cards-decks", "title": "Trouble with displaying information with Bootstrap Cards (Decks)", "body": "<p>Currently, I have my data displayed like this (and it works fine) </p>\n\n<pre><code>&lt;div class=\"container-fluid\"&gt;\n   &lt;% @entries.reverse.each do |entry| %&gt;\n     &lt;div class=\"card\"&gt;\n       &lt;div class=\"card-block\"&gt;\n        &lt;p class=\"card-title\"&gt;&lt;b&gt;&lt;%= entry.title %&gt;&lt;/b&gt;&lt;/p&gt;\n        &lt;p class=\"card-text\"&gt;&lt;%= entry.link %&gt;&lt;/p&gt;\n       &lt;/div&gt;\n     &lt;/div&gt;\n   &lt;% end %&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p>Trying to change the layout to display the data in series of three cards like here: <a href=\"https://v4-alpha.getbootstrap.com/components/card/#card-decks\" rel=\"nofollow noreferrer\">https://v4-alpha.getbootstrap.com/components/card/#card-decks</a> </p>\n\n<p>This is how I rewrote it: </p>\n\n<pre><code>&lt;div class=\"card-deck\"&gt;\n  &lt;% @entries.each_slice(3) do |entry| %&gt;\n  &lt;div class=\"card\"&gt;\n    &lt;img class=\"card-img-top\" src=\"...\" alt=\"Card image cap\"&gt;\n    &lt;div class=\"card-block\"&gt;\n      &lt;h4 class=\"card-title\"&gt;&lt;%= entry.title %&gt;&lt;/h4&gt;\n      &lt;p class=\"card-text\"&gt;&lt;%= entry.link %&gt;&lt;/p&gt;\n    &lt;/div&gt;\n    &lt;div class=\"card-footer\"&gt;\n      &lt;small class=\"text-muted\"&gt;Last updated 3 mins ago&lt;/small&gt;\n    &lt;/div&gt;\n    &lt;% end %&gt;\n  &lt;/div&gt;\n\n  &lt;% @entries.each_slice(3) do |entry| %&gt;\n  &lt;div class=\"card\"&gt;\n    &lt;img class=\"card-img-top\" src=\"...\" alt=\"Card image cap\"&gt;\n    &lt;div class=\"card-block\"&gt;\n      &lt;h4 class=\"card-title\"&gt;&lt;%= entry.title %&gt;&lt;/h4&gt;\n      &lt;p class=\"card-text\"&gt;&lt;%= entry.link %&gt;&lt;/p&gt;\n    &lt;/div&gt;\n    &lt;div class=\"card-footer\"&gt;\n      &lt;small class=\"text-muted\"&gt;Last updated 3 mins ago&lt;/small&gt;\n    &lt;/div&gt;\n    &lt;% end %&gt;\n  &lt;/div&gt;\n\n  &lt;% @entries.each_slice(3) do |entry| %&gt;\n  &lt;div class=\"card\"&gt;\n    &lt;img class=\"card-img-top\" src=\"...\" alt=\"Card image cap\"&gt;\n    &lt;div class=\"card-block\"&gt;\n      &lt;h4 class=\"card-title\"&gt;&lt;%= entry.title %&gt;&lt;/h4&gt;\n      &lt;p class=\"card-text\"&gt;&lt;%= entry.link %&gt;&lt;/p&gt;\n    &lt;/div&gt;\n    &lt;div class=\"card-footer\"&gt;\n      &lt;small class=\"text-muted\"&gt;Last updated 3 mins ago&lt;/small&gt;\n    &lt;/div&gt;\n    &lt;% end %&gt;\n  &lt;/div&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p>This is the error I receive when I try to display the page now: </p>\n\n<pre><code>NoMethodError in Entries#index\n\n\nundefined method `title' for #&lt;Array:0x007fa6dab11a10&gt;\n</code></pre>\n\n<p>Why am I receiving this error? </p>\n\n<p>Thank you for your help. Please let me know if this question needs further clarification and/or more information. </p>\n\n<p>Further information: </p>\n\n<pre><code>require 'open-uri'\n\nmodule RedditScrapper\n  def self.scrape\n    doc = Nokogiri::HTML(open(\"https://www.reddit.com/\"))\n\n    entries = doc.css('.entry')\n    entries.each do |entry|\n      title = entry.css('p.title &gt; a').text\n      link = entry.css('p.title &gt; a')[0]['href']\n      category = entry.css('p.tagline &gt; a')[0]['href']\n      Entry.create!(title: title, link: link, category: category )\n    end\n  end\nend\n</code></pre>\n"}, {"tags": ["ruby", "rspec", "cucumber"], "comments": [{"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1489510074, "post_id": 42791615, "comment_id": 72698220, "body": "Possible duplicate of <a href=\"http://stackoverflow.com/questions/3064078/how-do-you-mark-a-cucumber-scenario-as-pending\">How do you mark a Cucumber Scenario as Pending</a>"}, {"owner": {"reputation": 1978, "user_id": 1222355, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/44e0773345e9065b2e012b434370dbbb?s=128&d=identicon&r=PG", "display_name": "David West", "link": "https://stackoverflow.com/users/1222355/david-west"}, "reply_to_user": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1489596022, "post_id": 42791615, "comment_id": 72743708, "body": "@maxple I&#39;ve explained why this is different. See the note at the end of my post."}], "owner": {"reputation": 1978, "user_id": 1222355, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/44e0773345e9065b2e012b434370dbbb?s=128&d=identicon&r=PG", "display_name": "David West", "link": "https://stackoverflow.com/users/1222355/david-west"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 115, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1489595994, "creation_date": 1489509310, "last_edit_date": 1489595994, "question_id": 42791615, "link": "https://stackoverflow.com/questions/42791615/ruby-cucumber-making-certain-exceptions-return-pending-instead-of-fail-end-to", "title": "Ruby Cucumber: Making certain exceptions return pending instead of fail. End-to-end Smoke Suite suitable for CI", "body": "<p>Generally when I use Cucumber and other tools to drive a browser and do end-to-end tests I consider noise in the suite (which we'll loosely define as failing tests that may not actually point to problems in app code programming) to be normal, and the suites are triaged by our team with the help of a custom tool we've made and maintain for that purpose.</p>\n\n<p>I want to consider a new type of suite that we run, that passes if one important final assertion is met per test and marks a result as inconclusive (or pending is fine) if environmental issues or problems with the test code itself make it so that a test fails. Failures in the test suite should only occur if a test makes it to the final assertion (the point of each smoke test) and fails to meet expectations.</p>\n\n<p>This effort, which is different than what our team normally does, prompts us also to consider that we should log 'warnings' along the way, things we would normally assert with Rspec expectations and have fail, with the key difference of now not throwing an exception, and instead having a log that inspires and informs exploratory testing.</p>\n\n<p>So, a set of bullet pointed questions for the impatient:</p>\n\n<ul>\n<li><p>How can I make sure certain exceptions are turned into pending results instead? My idea is something similar to this in the hooks</p>\n\n<pre><code>Around('@end_to_end_ci') do |scenario, block|\n  begin\n    block.call\n  rescue Watir::Exception, PageObject::Exception =&gt; e #will this rescue all Watir and pageobject exceptions? Add more as needed...\n    pending(\"Test results inconclusive, non-buildbreaking error caught.\\nStack trace: #{e}\")\n  end\nend\n</code></pre></li>\n</ul>\n\n<p>Thanks!</p>\n\n<hr>\n\n<p>Please note that I am not simply asking how to make a cucumber scenario return pending. I am speaking to a more general need to only fail in build-breaking situations and have the ability to choose what assertions and exceptions are counted as failures and which ones are counted as warnings.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-3", "activerecord"], "comments": [{"owner": {"reputation": 2799, "user_id": 3772982, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/91362482c60ebfba88fbdbde79c5fac6?s=128&d=identicon&r=PG&f=1", "display_name": "margo", "link": "https://stackoverflow.com/users/3772982/margo"}, "edited": false, "score": 1, "creation_date": 1489509407, "post_id": 42791004, "comment_id": 72697734, "body": "You ask for help and pasted all that code that you want someone to take the time to read through and you can&#39;t even take the time to format it properly? Think again about how you ask for help."}], "answers": [{"tags": [], "owner": {"reputation": 1853, "user_id": 2501082, "user_type": "registered", "accept_rate": 20, "profile_image": "https://i.stack.imgur.com/qdJBQ.jpg?s=128&g=1", "display_name": "David Gross", "link": "https://stackoverflow.com/users/2501082/david-gross"}, "is_accepted": false, "score": 2, "last_activity_date": 1489511725, "creation_date": 1489511725, "answer_id": 42792454, "question_id": 42791004, "link": "https://stackoverflow.com/questions/42791004/api-hit-error-in-ror-gives-completed-500-internal-server-error-typeerror-no/42792454#42792454", "title": "API hit error in ror gives - Completed 500 Internal Server Error , TypeError (no implicit conversion of nil into String)", "body": "<p>With the logs you have given it looks like it's failing on main_controller.rb </p>\n\n<pre><code>http_basic_authenticate_with name: ENV[\"API_USERNAME\"], password: ENV[\"API_PASSWORD\"]\n</code></pre>\n\n<p>One way to debug this is going into your rails console and check if your environment variables are set. </p>\n\n<pre><code>rails console\n\nENV['API_USERNAME']\n  =&gt; 'api_username'\n\nENV['API_PASSWORD']\n  =&gt; 'hash1234090909'\n</code></pre>\n"}], "owner": {"reputation": 133, "user_id": 4716314, "user_type": "registered", "accept_rate": 14, "profile_image": "https://graph.facebook.com/914603558560275/picture?type=large", "display_name": "Satyam Agrawal", "link": "https://stackoverflow.com/users/4716314/satyam-agrawal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1131, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1489511725, "creation_date": 1489507750, "last_edit_date": 1489509291, "question_id": 42791004, "link": "https://stackoverflow.com/questions/42791004/api-hit-error-in-ror-gives-completed-500-internal-server-error-typeerror-no", "title": "API hit error in ror gives - Completed 500 Internal Server Error , TypeError (no implicit conversion of nil into String)", "body": "<p>My routes.rb -</p>\n\n<pre><code>Rails.application.routes.draw do\n  root 'welcome#index'\n\n  namespace :api, defaults: { format: :json } do\n    namespace :v1 do\n      get \"/users/:cv_id\" =&gt; \"engine#users_get\"\n      post \"/users\" =&gt; \"engine#users_add\"\n    end\n  end\n</code></pre>\n\n<p>and my main controller is --</p>\n\n<pre><code>class Api::V1::MainController &lt; ApplicationController\n\n  http_basic_authenticate_with name: ENV[\"API_USERNAME\"], password: ENV[\"API_PASSWORD\"]\n\n  API_CMDS_LIST = {\n    \"Engine\"  =&gt; [:users_add, :users_update],\n  }\n\n  include Api::V1::ErrorMessage\n  skip_before_filter :verify_authenticity_token\n  protect_from_forgery with: :null_session\n\n  def resulting_json(resp)\n    if resp[:result] == \"error\" &amp;&amp; !resp[:code]\n      resp[:code] = Api::V1::ErrorMessage::CODES[resp[:message]] || Api::V1::ErrorMessage::DEFAULT_CODE\n    end\n\n    render json: resp\n  end\n\n  def authenticate\n    #authenticate_or_request_with_http_basic do |user, password|\n\n      #File.write('test.txt', \"USER: #{user}. PASS: #{password}\")\n      #@user &amp;&amp; password == @user.secret_token #&amp;&amp;  @user.belongs_to_active_brand?\n      true\n    #end\n  end\n\n  def validate_request\n    action = params[:action]\n    klass = API_CMDS_LIST.select{ |klass, methods| methods.include?(action.to_sym) }.keys[0]\n\n    @req = \"Api::V1::#{klass}\".constantize.new(send(\"# {action}_params\").merge( {user: @user} ), request)\n\n    if !@req.valid?\n      err_msg = @req.errors.full_messages.first\n      code = Api::V1::ErrorMessage::CODES[err_msg] || Api::V1::ErrorMessage::DEFAULT_CODE\n      render json: { result: \"error\", msg: err_msg, code: code } and   return\n    end\n  end\n\nend\n</code></pre>\n\n<p>and engine controller code is  -</p>\n\n<pre><code>class Api::V1::EngineController &lt; Api::V1::MainController\n  include Api::V1::ErrorMessage\n  before_filter :validate_request\n\n  API_CMDS_LIST[\"Engine\"].each do |method|\n\n    define_method(method) do\n      response = @req.send(method)\n      resulting_json(response)\n    end\n  end\n\n  def users_add_params\n    params.permit(:first_name, :last_name) \n  end\nend\n</code></pre>\n\n<p>but when i try to hit the endpoint \"/users\" with params {first_name : \"satyam\",last_name:\"agrawal\"} it gives me this error ---</p>\n\n<p>Processing by Api::V1::EngineController#users_add as JSON\n  Parameters: {\"first_name\"=>\"satyam\", \"last_name\"=>\"agrawal\"}\nCompleted 500 Internal Server Error in 1ms (ActiveRecord: 0.0ms)</p>\n\n<p>TypeError (no implicit conversion of nil into String):</p>\n\n<p>activesupport (5.0.1) lib/active_support/security_utils.rb:23:in <code>digest'\nactivesupport (5.0.1) lib/active_support/security_utils.rb:23:in</code>hexdigest'\nactivesupport (5.0.1) lib/active_support/security_utils.rb:23:in <code>variable_size_secure_compare'\nactionpack (5.0.1) lib/action_controller/metal/http_authentication.rb:75:in</code>block (2 levels) in http_basic_authenticate_with'\nactionpack (5.0.1) lib/action_controller/metal/http_authentication.rb:97:in <code>call'\nactionpack (5.0.1) lib/action_controller/metal/http_authentication.rb:97:in</code>authenticate'\nactionpack (5.0.1) lib/action_controller/metal/http_authentication.rb:87:in <code>authenticate_with_http_basic'\nactionpack (5.0.1) lib/action_controller/metal/http_authentication.rb:83:in</code>authenticate_or_request_with_http_basic'\nactionpack (5.0.1) lib/action_controller/metal/http_authentication.rb:71:in <code>block in http_basic_authenticate_with'\nactivesupport (5.0.1) lib/active_support/callbacks.rb:396:in</code>instance_exec'\nactivesupport (5.0.1) lib/active_support/callbacks.rb:396:in <code>block in make_lambda'\nactivesupport (5.0.1) lib/active_support/callbacks.rb:169:in</code>call'\nactivesupport (5.0.1) lib/active_support/callbacks.rb:169:in <code>block (2 levels) in halting'\nactionpack (5.0.1) lib/abstract_controller/callbacks.rb:12:in</code>call'\nactionpack (5.0.1) lib/abstract_controller/callbacks.rb:12:in <code>block (2 levels) in &lt;module:Callbacks&gt;'\nactivesupport (5.0.1) lib/active_support/callbacks.rb:170:in</code>call'\nactivesupport (5.0.1) lib/active_support/callbacks.rb:170:in <code>block in halting'\nactivesupport (5.0.1) lib/active_support/callbacks.rb:454:in</code>call'\nactivesupport (5.0.1) lib/active_support/callbacks.rb:454:in <code>block in call'\nactivesupport (5.0.1) lib/active_support/callbacks.rb:454:in</code>each'\nactivesupport (5.0.1) lib/active_support/callbacks.rb:454:in <code>call'\nactivesupport (5.0.1) lib/active_support/callbacks.rb:101:in</code><strong>run_callbacks</strong>'\nactivesupport (5.0.1) lib/active_support/callbacks.rb:750:in <code>_run_process_action_callbacks'\nactivesupport (5.0.1) lib/active_support/callbacks.rb:90:in</code>run_callbacks'\nactionpack (5.0.1) lib/abstract_controller/callbacks.rb:19:in <code>process_action'\nactionpack (5.0.1) lib/action_controller/metal/rescue.rb:20:in</code>process_action'\nactionpack (5.0.1) lib/action_controller/metal/instrumentation.rb:32:in <code>block in process_action'\nactivesupport (5.0.1) lib/active_support/notifications.rb:164:in</code>block in instrument'\nactivesupport (5.0.1) lib/active_support/notifications/instrumenter.rb:21:in <code>instrument'\nactivesupport (5.0.1) lib/active_support/notifications.rb:164:in</code>instrument'\nactionpack (5.0.1) lib/action_controller/metal/instrumentation.rb:30:in <code>process_action'\nactionpack (5.0.1) lib/action_controller/metal/params_wrapper.rb:248:in</code>process_action'\nactiverecord (5.0.1) lib/active_record/railties/controller_runtime.rb:18:in <code>process_action'\nactionpack (5.0.1) lib/abstract_controller/base.rb:126:in</code>process'\nactionview (5.0.1) lib/action_view/rendering.rb:30:in <code>process'\nactionpack (5.0.1) lib/action_controller/metal.rb:190:in</code>dispatch'\nactionpack (5.0.1) lib/action_controller/metal.rb:262:in <code>dispatch'\nactionpack (5.0.1) lib/action_dispatch/routing/route_set.rb:50:in</code>dispatch'\nactionpack (5.0.1) lib/action_dispatch/routing/route_set.rb:32:in <code>serve'\nactionpack (5.0.1) lib/action_dispatch/journey/router.rb:39:in</code>block in serve'\nactionpack (5.0.1) lib/action_dispatch/journey/router.rb:26:in <code>each'\nactionpack (5.0.1) lib/action_dispatch/journey/router.rb:26:in</code>serve'\nactionpack (5.0.1) lib/action_dispatch/routing/route_set.rb:725:in <code>call'\nrack (2.0.1) lib/rack/etag.rb:25:in</code>call'\nrack (2.0.1) lib/rack/conditional_get.rb:38:in <code>call'\nrack (2.0.1) lib/rack/head.rb:12:in</code>call'\nrack (2.0.1) lib/rack/session/abstract/id.rb:222:in <code>context'\nrack (2.0.1) lib/rack/session/abstract/id.rb:216:in</code>call'\nactionpack (5.0.1) lib/action_dispatch/middleware/cookies.rb:613:in <code>call'\nactiverecord (5.0.1) lib/active_record/migration.rb:553:in</code>call'\nactionpack (5.0.1) lib/action_dispatch/middleware/callbacks.rb:38:in <code>block in call'\nactivesupport (5.0.1) lib/active_support/callbacks.rb:97:in</code><strong>run_callbacks</strong>'\nactivesupport (5.0.1) lib/active_support/callbacks.rb:750:in <code>_run_call_callbacks'\nactivesupport (5.0.1) lib/active_support/callbacks.rb:90:in</code>run_callbacks'\nactionpack (5.0.1) lib/action_dispatch/middleware/callbacks.rb:36:in <code>call'\nactionpack (5.0.1) lib/action_dispatch/middleware/executor.rb:12:in</code>call'\nactionpack (5.0.1) lib/action_dispatch/middleware/remote_ip.rb:79:in <code>call'\nactionpack (5.0.1) lib/action_dispatch/middleware/debug_exceptions.rb:49:in</code>call'\nweb-console (3.4.0) lib/web_console/middleware.rb:135:in <code>call_app'\nweb-console (3.4.0) lib/web_console/middleware.rb:28:in</code>block in call'\nweb-console (3.4.0) lib/web_console/middleware.rb:18:in <code>catch'\nweb-console (3.4.0) lib/web_console/middleware.rb:18:in</code>call'\nactionpack (5.0.1) lib/action_dispatch/middleware/show_exceptions.rb:31:in <code>call'\nrailties (5.0.1) lib/rails/rack/logger.rb:36:in</code>call_app'\nrailties (5.0.1) lib/rails/rack/logger.rb:24:in <code>block in call'\nactivesupport (5.0.1) lib/active_support/tagged_logging.rb:69:in</code>block in tagged'\nactivesupport (5.0.1) lib/active_support/tagged_logging.rb:26:in <code>tagged'\nactivesupport (5.0.1) lib/active_support/tagged_logging.rb:69:in</code>tagged'\nrailties (5.0.1) lib/rails/rack/logger.rb:24:in <code>call'\nsprockets-rails (3.2.0) lib/sprockets/rails/quiet_assets.rb:13:in</code>call'\nactionpack (5.0.1) lib/action_dispatch/middleware/request_id.rb:24:in <code>call'\nrack (2.0.1) lib/rack/method_override.rb:22:in</code>call'\nrack (2.0.1) lib/rack/runtime.rb:22:in <code>call'\nactivesupport (5.0.1) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in</code>call'\nactionpack (5.0.1) lib/action_dispatch/middleware/executor.rb:12:in <code>call'\nactionpack (5.0.1) lib/action_dispatch/middleware/static.rb:136:in</code>call'\nrack (2.0.1) lib/rack/sendfile.rb:111:in <code>call'\nrailties (5.0.1) lib/rails/engine.rb:522:in</code>call'\npuma (3.7.1) lib/puma/configuration.rb:232:in <code>call'\npuma (3.7.1) lib/puma/server.rb:578:in</code>handle_request'\npuma (3.7.1) lib/puma/server.rb:415:in <code>process_client'\npuma (3.7.1) lib/puma/server.rb:275:in</code>block in run'\npuma (3.7.1) lib/puma/thread_pool.rb:120:in <code>call'\npuma (3.7.1) lib/puma/thread_pool.rb:120:in</code>block in spawn_thread'</p>\n\n<p>please help me to sort it out</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "openssl", "activesupport"], "comments": [{"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1489506948, "post_id": 42790598, "comment_id": 72695779, "body": "If you have the trace put as plain text (as clearly stated in this site\u2019s rules,) I would be able to answer this question. Also, please share your <code>BudgetController#index</code> method."}, {"owner": {"reputation": 129, "user_id": 6586613, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7rqbx.jpg?s=128&g=1", "display_name": "Hugo Barthelemy", "link": "https://stackoverflow.com/users/6586613/hugo-barthelemy"}, "reply_to_user": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1489507855, "post_id": 42790598, "comment_id": 72696548, "body": "Sorry for this error. I have added <code>BudgetController#index</code> &amp; all trace"}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1489509710, "post_id": 42790598, "comment_id": 72697941, "body": "You likely need to cleanup all the cookies and retry."}, {"owner": {"reputation": 129, "user_id": 6586613, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7rqbx.jpg?s=128&g=1", "display_name": "Hugo Barthelemy", "link": "https://stackoverflow.com/users/6586613/hugo-barthelemy"}, "reply_to_user": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1489510547, "post_id": 42790598, "comment_id": 72698568, "body": "I have already make it with chrome consol but don&#39;t work. Do you have an other method for cleanup all local cookies ?"}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1489511465, "post_id": 42790598, "comment_id": 72699209, "body": "<a href=\"https://chrome.google.com/webstore/detail/editthiscookie/fngmhnnpilhplaeedifhccceomclgfbg\" rel=\"nofollow noreferrer\">chrome.google.com/webstore/detail/editthiscookie/&hellip;</a> (or just launch another browser, e.g. firefox that has no cookies at all to make sure that is the reason.)"}, {"owner": {"reputation": 129, "user_id": 6586613, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7rqbx.jpg?s=128&g=1", "display_name": "Hugo Barthelemy", "link": "https://stackoverflow.com/users/6586613/hugo-barthelemy"}, "reply_to_user": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1489569308, "post_id": 42790598, "comment_id": 72723546, "body": "Your solution works. Thank you very much !"}, {"owner": {"reputation": 129, "user_id": 6586613, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7rqbx.jpg?s=128&g=1", "display_name": "Hugo Barthelemy", "link": "https://stackoverflow.com/users/6586613/hugo-barthelemy"}, "reply_to_user": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1489756338, "post_id": 42790598, "comment_id": 72822958, "body": "Unfortunately, your solution does not work every time. :("}, {"owner": {"reputation": 129, "user_id": 6586613, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7rqbx.jpg?s=128&g=1", "display_name": "Hugo Barthelemy", "link": "https://stackoverflow.com/users/6586613/hugo-barthelemy"}, "reply_to_user": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1490617464, "post_id": 42790598, "comment_id": 73176780, "body": "I found my error. I don&#39;t destroy all session before created a new one."}], "owner": {"reputation": 129, "user_id": 6586613, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7rqbx.jpg?s=128&g=1", "display_name": "Hugo Barthelemy", "link": "https://stackoverflow.com/users/6586613/hugo-barthelemy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1741, "favorite_count": 2, "answer_count": 0, "score": 2, "last_activity_date": 1489507691, "creation_date": 1489506611, "last_edit_date": 1489507691, "question_id": 42790598, "link": "https://stackoverflow.com/questions/42790598/activesupport-error-because-key-must-be-32-bytes-for-cipher-key-secret", "title": "activesupport error because key must be 32 bytes for &#39;cipher.key&#39; = @secret", "body": "<p>I work on Consul app and I have added on <a href=\"https://github.com/hugobarthelemy/consul_RIVP/tree/add_sso3_rivp\" rel=\"nofollow noreferrer\">this branche</a> a SSO module to connect from an other website with an encrypted URL create with gem Openssl and class AesEncryptDecrypt</p>\n\n<pre><code>  class AesEncryptDecrypt\n  SSOKEY = '12345678901234567890123456789012'\n  CIPHER_METHOD = 'AES-256-CBC'\n\n  def self.ssoencrypt(str)\n    cipher = OpenSSL::Cipher.new(CIPHER_METHOD)\n    cipher.encrypt\n    cipher.key = SSOKEY\n    data = cipher.update(str) + cipher.final\n    return Base64.urlsafe_encode64(data)\n  end\n  def self.ssodecrypt(str)\n    data = Base64.urlsafe_decode64(str)\n    cipher = OpenSSL::Cipher.new(CIPHER_METHOD)\n    cipher.decrypt\n    cipher.key = SSOKEY\n    return cipher.update(data) + cipher.final\n  end\nend\n</code></pre>\n\n<p>Since my added this module I can't have access to my app because I have an error in activesupport because key must be 32 bytes for 'cipher.key' = @secret </p>\n\n<p>That's trace in local consol :</p>\n\n<pre><code>    Started GET \"/\" for ::1 at 2017-03-14 16:27:45 +0100\nProcessing by BudgetsController#index as HTML\n   (7.1ms)  SELECT \"settings\".\"value\" FROM \"settings\" WHERE \"settings\".\"key\" = $1  ORDER BY \"settings\".\"id\" ASC  [[\"key\", \"feature.budgets\"]]\n  Budget Load (11.8ms)  SELECT  \"budgets\".* FROM \"budgets\" WHERE \"budgets\".\"id\" = $1 LIMIT 1  [[\"id\", 1]]\n  CACHE (0.0ms)  SELECT  \"budgets\".* FROM \"budgets\" WHERE \"budgets\".\"id\" = $1 LIMIT 1  [[\"id\", 1]]\n  Budget::Heading Load (0.9ms)  SELECT \"budget_headings\".* FROM \"budget_headings\" INNER JOIN \"budget_groups\" ON \"budget_headings\".\"group_id\" = \"budget_groups\".\"id\" WHERE \"budget_groups\".\"budget_id\" = $1  [[\"budget_id\", 1]]\n  Budget::Ballot Load (6.3ms)  SELECT  \"budget_ballots\".* FROM \"budget_ballots\" WHERE \"budget_ballots\".\"user_id\" IS NULL AND \"budget_ballots\".\"budget_id\" = 1  ORDER BY \"budget_ballots\".\"id\" ASC LIMIT 1\n  CACHE (0.0ms)  SELECT  \"budget_ballots\".* FROM \"budget_ballots\" WHERE \"budget_ballots\".\"user_id\" IS NULL AND \"budget_ballots\".\"budget_id\" = 1  ORDER BY \"budget_ballots\".\"id\" ASC LIMIT 1\n  CACHE (0.0ms)  SELECT  \"budget_ballots\".* FROM \"budget_ballots\" WHERE \"budget_ballots\".\"user_id\" IS NULL AND \"budget_ballots\".\"budget_id\" = 1  ORDER BY \"budget_ballots\".\"id\" ASC LIMIT 1\n  CACHE (0.0ms)  SELECT  \"budget_ballots\".* FROM \"budget_ballots\" WHERE \"budget_ballots\".\"user_id\" IS NULL AND \"budget_ballots\".\"budget_id\" = 1  ORDER BY \"budget_ballots\".\"id\" ASC LIMIT 1\n  CACHE (0.0ms)  SELECT  \"budget_ballots\".* FROM \"budget_ballots\" WHERE \"budget_ballots\".\"user_id\" IS NULL AND \"budget_ballots\".\"budget_id\" = 1  ORDER BY \"budget_ballots\".\"id\" ASC LIMIT 1\n  CACHE (0.0ms)  SELECT  \"budget_ballots\".* FROM \"budget_ballots\" WHERE \"budget_ballots\".\"user_id\" IS NULL AND \"budget_ballots\".\"budget_id\" = 1  ORDER BY \"budget_ballots\".\"id\" ASC LIMIT 1\n  CACHE (0.0ms)  SELECT  \"budget_ballots\".* FROM \"budget_ballots\" WHERE \"budget_ballots\".\"user_id\" IS NULL AND \"budget_ballots\".\"budget_id\" = 1  ORDER BY \"budget_ballots\".\"id\" ASC LIMIT 1\n  CACHE (0.0ms)  SELECT  \"budget_ballots\".* FROM \"budget_ballots\" WHERE \"budget_ballots\".\"user_id\" IS NULL AND \"budget_ballots\".\"budget_id\" = 1  ORDER BY \"budget_ballots\".\"id\" ASC LIMIT 1\n  CACHE (0.0ms)  SELECT  \"budget_ballots\".* FROM \"budget_ballots\" WHERE \"budget_ballots\".\"user_id\" IS NULL AND \"budget_ballots\".\"budget_id\" = 1  ORDER BY \"budget_ballots\".\"id\" ASC LIMIT 1\n  Rendered budgets/investments/_home_rivp.html.erb (72.2ms)\n  Budget Load (2.3ms)  SELECT \"budgets\".* FROM \"budgets\" WHERE ('t'='t')  ORDER BY \"budgets\".\"created_at\" ASC\n  Rendered budgets/index.html.erb within layouts/application (84.6ms)\n  Rendered layouts/_tracking_data.html.erb (0.7ms)\n  Setting Load (1.3ms)  SELECT \"settings\".* FROM \"settings\"  ORDER BY \"settings\".\"id\" ASC\n  Rendered layouts/_meta_tags.html.erb (10.5ms)\n  Rendered shared/_locale_switcher.html.erb (1.3ms)\n  Rendered shared/_top_links.html.erb (4.3ms)\n  Rendered shared/_admin_login_items.html.erb (0.6ms)\n  Rendered devise/menu/_login_items.html.erb (1.0ms)\n  Rendered shared/_subnavigation.html.erb (1.2ms)\n  Rendered shared/_subnavigation.html.erb (0.7ms)\n  Rendered layouts/_header.html.erb (19.5ms)\n  Rendered layouts/_flash.html.erb (1.6ms)\n  Rendered layouts/_footer.html.erb (1.4ms)\nCompleted 200 OK in 607ms (Views: 502.6ms | ActiveRecord: 29.9ms)\n/usr/local/opt/rbenv/versions/2.3.2/lib/ruby/gems/2.3.0/gems/activesupport-4.2.7.1/lib/active_support/message_encryptor.rb:100: warning: constant OpenSSL::Cipher::Cipher is deprecated\n\nArgumentError (key must be 32 bytes):\n  activesupport (4.2.7.1) lib/active_support/message_encryptor.rb:72:in `key='\n  activesupport (4.2.7.1) lib/active_support/message_encryptor.rb:72:in `_encrypt'\n  activesupport (4.2.7.1) lib/active_support/message_encryptor.rb:58:in `encrypt_and_sign'\n  actionpack (4.2.7.1) lib/action_dispatch/middleware/cookies.rb:527:in `[]='\n  actionpack (4.2.7.1) lib/action_dispatch/middleware/session/cookie_store.rb:110:in `set_cookie'\n  rack (1.6.5) lib/rack/session/abstract/id.rb:351:in `commit_session'\n  rack (1.6.5) lib/rack/session/abstract/id.rb:226:in `context'\n  rack (1.6.5) lib/rack/session/abstract/id.rb:220:in `call'\n  newrelic_rpm (3.17.2.327) lib/new_relic/agent/instrumentation/middleware_tracing.rb:96:in `call'\n  actionpack (4.2.7.1) lib/action_dispatch/middleware/cookies.rb:560:in `call'\n  newrelic_rpm (3.17.2.327) lib/new_relic/agent/instrumentation/middleware_tracing.rb:96:in `call'\n  activerecord (4.2.7.1) lib/active_record/query_cache.rb:36:in `call'\n  newrelic_rpm (3.17.2.327) lib/new_relic/agent/instrumentation/middleware_tracing.rb:96:in `call'\n  activerecord (4.2.7.1) lib/active_record/connection_adapters/abstract/connection_pool.rb:653:in `call'\n  newrelic_rpm (3.17.2.327) lib/new_relic/agent/instrumentation/middleware_tracing.rb:96:in `call'\n  activerecord (4.2.7.1) lib/active_record/migration.rb:377:in `call'\n  newrelic_rpm (3.17.2.327) lib/new_relic/agent/instrumentation/middleware_tracing.rb:96:in `call'\n  actionpack (4.2.7.1) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'\n  activesupport (4.2.7.1) lib/active_support/callbacks.rb:88:in `__run_callbacks__'\n  activesupport (4.2.7.1) lib/active_support/callbacks.rb:778:in `_run_call_callbacks'\n  activesupport (4.2.7.1) lib/active_support/callbacks.rb:81:in `run_callbacks'\n  actionpack (4.2.7.1) lib/action_dispatch/middleware/callbacks.rb:27:in `call'\n  newrelic_rpm (3.17.2.327) lib/new_relic/agent/instrumentation/middleware_tracing.rb:96:in `call'\n  actionpack (4.2.7.1) lib/action_dispatch/middleware/reloader.rb:73:in `call'\n  newrelic_rpm (3.17.2.327) lib/new_relic/agent/instrumentation/middleware_tracing.rb:96:in `call'\n  actionpack (4.2.7.1) lib/action_dispatch/middleware/remote_ip.rb:78:in `call'\n  newrelic_rpm (3.17.2.327) lib/new_relic/agent/instrumentation/middleware_tracing.rb:96:in `call'\n  rollbar (2.14.0) lib/rollbar/middleware/rails/rollbar.rb:24:in `block in call'\n  rollbar (2.14.0) lib/rollbar.rb:145:in `scoped'\n  rollbar (2.14.0) lib/rollbar/middleware/rails/rollbar.rb:22:in `call'\n  newrelic_rpm (3.17.2.327) lib/new_relic/agent/instrumentation/middleware_tracing.rb:96:in `call'\n  actionpack (4.2.7.1) lib/action_dispatch/middleware/debug_exceptions.rb:17:in `call'\n  rollbar (2.14.0) lib/rollbar/middleware/rails/show_exceptions.rb:22:in `call_with_rollbar'\n  newrelic_rpm (3.17.2.327) lib/new_relic/agent/instrumentation/middleware_tracing.rb:96:in `call'\n  web-console (3.3.0) lib/web_console/middleware.rb:131:in `call_app'\n  web-console (3.3.0) lib/web_console/middleware.rb:28:in `block in call'\n  web-console (3.3.0) lib/web_console/middleware.rb:18:in `catch'\n  web-console (3.3.0) lib/web_console/middleware.rb:18:in `call'\n  newrelic_rpm (3.17.2.327) lib/new_relic/agent/instrumentation/middleware_tracing.rb:96:in `call'\n  actionpack (4.2.7.1) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'\n  newrelic_rpm (3.17.2.327) lib/new_relic/agent/instrumentation/middleware_tracing.rb:96:in `call'\n  railties (4.2.7.1) lib/rails/rack/logger.rb:38:in `call_app'\n  railties (4.2.7.1) lib/rails/rack/logger.rb:20:in `block in call'\n  activesupport (4.2.7.1) lib/active_support/tagged_logging.rb:68:in `block in tagged'\n  activesupport (4.2.7.1) lib/active_support/tagged_logging.rb:26:in `tagged'\n  activesupport (4.2.7.1) lib/active_support/tagged_logging.rb:68:in `tagged'\n  railties (4.2.7.1) lib/rails/rack/logger.rb:20:in `call'\n  ahoy_matey (1.5.3) lib/ahoy/engine.rb:22:in `call_with_quiet_ahoy'\n  quiet_assets (1.1.0) lib/quiet_assets.rb:27:in `call_with_quiet_assets'\n  newrelic_rpm (3.17.2.327) lib/new_relic/agent/instrumentation/middleware_tracing.rb:96:in `call'\n  request_store (1.3.1) lib/request_store/middleware.rb:9:in `call'\n  newrelic_rpm (3.17.2.327) lib/new_relic/agent/instrumentation/middleware_tracing.rb:96:in `call'\n  actionpack (4.2.7.1) lib/action_dispatch/middleware/request_id.rb:21:in `call'\n  newrelic_rpm (3.17.2.327) lib/new_relic/agent/instrumentation/middleware_tracing.rb:96:in `call'\n  rack (1.6.5) lib/rack/methodoverride.rb:22:in `call'\n  newrelic_rpm (3.17.2.327) lib/new_relic/agent/instrumentation/middleware_tracing.rb:96:in `call'\n  rack (1.6.5) lib/rack/runtime.rb:18:in `call'\n  newrelic_rpm (3.17.2.327) lib/new_relic/agent/instrumentation/middleware_tracing.rb:96:in `call'\n  activesupport (4.2.7.1) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'\n  newrelic_rpm (3.17.2.327) lib/new_relic/agent/instrumentation/middleware_tracing.rb:96:in `call'\n  rack (1.6.5) lib/rack/lock.rb:17:in `call'\n  newrelic_rpm (3.17.2.327) lib/new_relic/agent/instrumentation/middleware_tracing.rb:96:in `call'\n  actionpack (4.2.7.1) lib/action_dispatch/middleware/static.rb:120:in `call'\n  newrelic_rpm (3.17.2.327) lib/new_relic/agent/instrumentation/middleware_tracing.rb:96:in `call'\n  rack (1.6.5) lib/rack/sendfile.rb:113:in `call'\n  newrelic_rpm (3.17.2.327) lib/new_relic/agent/instrumentation/middleware_tracing.rb:96:in `call'\n  railties (4.2.7.1) lib/rails/engine.rb:518:in `call'\n  railties (4.2.7.1) lib/rails/application.rb:165:in `call'\n  newrelic_rpm (3.17.2.327) lib/new_relic/agent/instrumentation/middleware_tracing.rb:96:in `call'\n  rack (1.6.5) lib/rack/lock.rb:17:in `call'\n  rack (1.6.5) lib/rack/content_length.rb:15:in `call'\n  rack (1.6.5) lib/rack/handler/webrick.rb:88:in `service'\n  /usr/local/opt/rbenv/versions/2.3.2/lib/ruby/2.3.0/webrick/httpserver.rb:140:in `service'\n  /usr/local/opt/rbenv/versions/2.3.2/lib/ruby/2.3.0/webrick/httpserver.rb:96:in `run'\n  /usr/local/opt/rbenv/versions/2.3.2/lib/ruby/2.3.0/webrick/server.rb:296:in `block in start_thread'\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/zmO2S.png\" rel=\"nofollow noreferrer\">Picture of trace</a></p>\n\n<p>And my BudgetController is :</p>\n\n<pre><code>class BudgetsController &lt; ApplicationController\n  include FeatureFlags\n  feature_flag :budgets\n\n  load_and_authorize_resource\n  respond_to :html, :js\n\n  def show\n  end\n\n  def index\n    @budgets = @budgets.order(:created_at)\n  end\n\nend\n</code></pre>\n\n<p>Do you have an idea to help me please?</p>\n\n<p>My environnement is :\nRuby 2.3.2 / Rails 4.2.7.1 / OpenSSL 0.9.8zh 14 Jan 2016 / activesupport 4.2.7.1</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "postgresql"], "answers": [{"comments": [{"owner": {"reputation": 5535, "user_id": 7295772, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ZhWhR.jpg?s=128&g=1", "display_name": "Fabrizio Bertoglio", "link": "https://stackoverflow.com/users/7295772/fabrizio-bertoglio"}, "edited": false, "score": 0, "creation_date": 1489512165, "post_id": 42790024, "comment_id": 72699660, "body": "Amazing, It is a very good answer. Thanks a lot. Do you want me to edit the title by including the &quot;gem act-as-taggable-on&quot; or should I leave the question as It is? Fabrizio"}, {"owner": {"reputation": 7605, "user_id": 584552, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/dc70f4a04726fada8b9db8a18ff40412?s=128&d=identicon&r=PG", "display_name": "mdesantis", "link": "https://stackoverflow.com/users/584552/mdesantis"}, "reply_to_user": {"reputation": 5535, "user_id": 7295772, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ZhWhR.jpg?s=128&g=1", "display_name": "Fabrizio Bertoglio", "link": "https://stackoverflow.com/users/7295772/fabrizio-bertoglio"}, "edited": false, "score": 1, "creation_date": 1489528219, "post_id": 42790024, "comment_id": 72709038, "body": "Figurati ;-) mmh dunno, I would title the question <i>How to retrieve act-as-taggable-on tags on multiple levels of associations</i> or something like that I guess"}, {"owner": {"reputation": 5535, "user_id": 7295772, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ZhWhR.jpg?s=128&g=1", "display_name": "Fabrizio Bertoglio", "link": "https://stackoverflow.com/users/7295772/fabrizio-bertoglio"}, "edited": false, "score": 1, "creation_date": 1489566877, "post_id": 42790024, "comment_id": 72722110, "body": "Grazie molte! Ciao"}], "tags": [], "owner": {"reputation": 7605, "user_id": 584552, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/dc70f4a04726fada8b9db8a18ff40412?s=128&d=identicon&r=PG", "display_name": "mdesantis", "link": "https://stackoverflow.com/users/584552/mdesantis"}, "is_accepted": true, "score": 3, "last_activity_date": 1489505124, "creation_date": 1489505124, "answer_id": 42790024, "question_id": 42789090, "link": "https://stackoverflow.com/questions/42789090/rails-how-to-retrieve-act-as-taggable-on-tags-on-multiple-levels-of-associations/42790024#42790024", "title": "Rails How to retrieve act-as-taggable-on tags on multiple levels of associations", "body": "<p>What about</p>\n\n<pre><code>class Host\n  has_many :ads, through: :locations\n  has_many :skills, through: :ads\nend\n\nhost = Host.first\nskills = host.skills.pluck(:name)\n@developers = Developer.tagged_with(skills, any: :true)\n</code></pre>\n"}], "owner": {"reputation": 5535, "user_id": 7295772, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ZhWhR.jpg?s=128&g=1", "display_name": "Fabrizio Bertoglio", "link": "https://stackoverflow.com/users/7295772/fabrizio-bertoglio"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 304, "favorite_count": 0, "accepted_answer_id": 42790024, "answer_count": 1, "score": 1, "last_activity_date": 1489566925, "creation_date": 1489502700, "last_edit_date": 1592644375, "question_id": 42789090, "link": "https://stackoverflow.com/questions/42789090/rails-how-to-retrieve-act-as-taggable-on-tags-on-multiple-levels-of-associations", "title": "Rails How to retrieve act-as-taggable-on tags on multiple levels of associations", "body": "<h2>Summary</h2>\n<p>I have <code>acts_as_taggable_on :skills</code> in my <code>Ad.rb</code> Model.\nI have the following relationships:</p>\n<p>Host Model <code>has_many :locations</code></p>\n<p>Location <code>has_many :ads</code></p>\n<p>Ad <code>acts_as_taggable_on :skills</code></p>\n<p>I need the Host list of skills. For every host I need to retrieve the list of skills that he has through his ads.<br />\n<a href=\"https://i.stack.imgur.com/8PnWd.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/8PnWd.png\" alt=\"enter image description here\" /></a></p>\n<p>I would need to query them and I don't know how to do it with the <code>ActsAsTaggableOn</code> object.</p>\n<h2>What I know</h2>\n<p>I can easily retrieve all the skills of a <code>Location</code> (number 2). Every host can have multiple locations.</p>\n<pre><code>Location.ads.tag_counts_on(:skills)\n</code></pre>\n<p>This query return an object containing, for each <code>Location</code> his <code>Skills</code>, this is the result:</p>\n<pre><code>=&gt; [#&lt;ActsAsTaggableOn::Tag:0x0000000943b878 id: 6, name: &quot;javascript&quot;, taggings_count: 4&gt;,\n #&lt;ActsAsTaggableOn::Tag:0x0000000943b738 id: 4, name: &quot;css&quot;, taggings_count: 6&gt;,\n #&lt;ActsAsTaggableOn::Tag:0x0000000943b5f8 id: 8, name: &quot;rubyonrails&quot;, taggings_count: 2&gt;]\n</code></pre>\n<p>This is the class of this object:</p>\n<pre><code>=&gt; ActsAsTaggableOn::Tag::ActiveRecord_Relation\n</code></pre>\n<p>On this class I can call methods like <code>.find()</code>, but If i copy this data in an Array then I can not perform the <code>.find()</code> query, to check if I am adding a duplicate.</p>\n<p>I just need possibly an array of this skills like:</p>\n<pre><code>skills = [&quot;css&quot;,&quot;html&quot;,&quot;javascript&quot;]\n</code></pre>\n<p>So that I can perform this query:</p>\n<pre><code>@developers = Developer.tagged_with(skills, :any =&gt; :true)\n</code></pre>\n<p>The last query works, I just need to find out what is the best way to retrieve the skills.</p>\n<p>This is acs-as-taggable-on gem github page\n<a href=\"https://github.com/mbleigh/acts-as-taggable-on\" rel=\"nofollow noreferrer\">https://github.com/mbleigh/acts-as-taggable-on</a></p>\n<p>I also add the <strong>git</strong> of this project\n<a href=\"https://github.com/fabriziobertoglio1987/SocialNetwork\" rel=\"nofollow noreferrer\">https://github.com/fabriziobertoglio1987/SocialNetwork</a></p>\n<p>Thanks a lot\nFabrizio</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1489503137, "post_id": 42788826, "comment_id": 72692797, "body": "What is wrong with my answer? Also, never do explicit comparison of classes, use <code>var.is_a?(String)</code> instead."}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1489503340, "post_id": 42788826, "comment_id": 72692991, "body": "Of course empty string <code>&quot;&quot;</code> <b>is indeed replaced</b> with my code."}, {"owner": {"reputation": 40236, "user_id": 923315, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/j6lLI.jpg?s=128&g=1", "display_name": "peter", "link": "https://stackoverflow.com/users/923315/peter"}, "reply_to_user": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1489504182, "post_id": 42788826, "comment_id": 72693654, "body": "now it does, and it is better again so removed the edit"}], "answers": [{"comments": [{"owner": {"reputation": 40236, "user_id": 923315, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/j6lLI.jpg?s=128&g=1", "display_name": "peter", "link": "https://stackoverflow.com/users/923315/peter"}, "edited": false, "score": 0, "creation_date": 1489502998, "post_id": 42788970, "comment_id": 72692670, "body": "That was quick ! Thanks"}], "tags": [], "owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "is_accepted": true, "score": 3, "last_activity_date": 1489502393, "creation_date": 1489502393, "answer_id": 42788970, "question_id": 42788826, "link": "https://stackoverflow.com/questions/42788826/ruby-struct-replace-nil-value-with-space/42788970#42788970", "title": "Ruby Struct: replace nil value with space", "body": "<pre><code>r.members.each do |m|\n  r.public_send(\"#{m}=\", \" \") if r.public_send(m).to_s.empty?\nend\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 40236, "user_id": 923315, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/j6lLI.jpg?s=128&g=1", "display_name": "peter", "link": "https://stackoverflow.com/users/923315/peter"}, "edited": false, "score": 0, "creation_date": 1489503640, "post_id": 42789194, "comment_id": 72693240, "body": "Thanks Antony but the Struct in reality has +30 members, a bit cumbersome and  bloated.."}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1489504822, "post_id": 42789194, "comment_id": 72694184, "body": "This implementation has a glitch: <code>r.string1 &lt;&lt; &quot;!&quot;</code> fails, plus all <code>BLANK</code>s are the same shared frozen string. See my adoption for the correct implementation."}, {"owner": {"reputation": 14010, "user_id": 3109182, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/a4b305f0077055b4fdcf715067775d5a?s=128&d=identicon&r=PG", "display_name": "Anthony", "link": "https://stackoverflow.com/users/3109182/anthony"}, "edited": false, "score": 0, "creation_date": 1489505685, "post_id": 42789194, "comment_id": 72694822, "body": "The original question didn&#39;t mention anything about whether the values of the struct need to be mutable so I&#39;m not sure if the scenario you are proposing is real (for the author).  I don&#39;t understand you&#39;re point about <code>BLANK</code> either."}], "tags": [], "owner": {"reputation": 14010, "user_id": 3109182, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/a4b305f0077055b4fdcf715067775d5a?s=128&d=identicon&r=PG", "display_name": "Anthony", "link": "https://stackoverflow.com/users/3109182/anthony"}, "is_accepted": false, "score": 3, "last_activity_date": 1489502959, "creation_date": 1489502959, "answer_id": 42789194, "question_id": 42788826, "link": "https://stackoverflow.com/questions/42788826/ruby-struct-replace-nil-value-with-space/42789194#42789194", "title": "Ruby Struct: replace nil value with space", "body": "<p>You can use <code>Struct</code> with a block and override the reader's with default's:</p>\n\n<pre><code>s = Struct.new(:datum, :string1, :string2, :string3, :nummer) do\n  BLANK = \" \".freeze\n  def datum\n    return BLANK if nil_or_empty?(values[0])\n    values[0]\n  end\n\n  def string1\n    return BLANK if nil_or_empty?(values[1])\n    values[1]\n  end\n\n  def string2\n    return BLANK if nil_or_empty?(values[2])\n    values[2]\n  end\n\n  def string3\n    return BLANK if nil_or_empty?(values[3])\n    values[3]\n  end\n\n  def nummer\n    return BLANK if nil_or_empty?(values[4])\n    values[4]\n  end\n\n  def nil_or_empty?(val)\n    val.nil? || val.empty?\n  end\nend\n\n\n\nr = s.new(Time.now(), \"\", \"test\", nil, 0.0)\np r.string3\np r.string1\n</code></pre>\n\n<p>outputs:</p>\n\n<pre><code>\" \"\n\" \"\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 40236, "user_id": 923315, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/j6lLI.jpg?s=128&g=1", "display_name": "peter", "link": "https://stackoverflow.com/users/923315/peter"}, "edited": false, "score": 0, "creation_date": 1489505481, "post_id": 42789824, "comment_id": 72694682, "body": "tested this but I get a nil and an empty string, Ruby 1.9.3 the cause ?"}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "reply_to_user": {"reputation": 40236, "user_id": 923315, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/j6lLI.jpg?s=128&g=1", "display_name": "peter", "link": "https://stackoverflow.com/users/923315/peter"}, "edited": false, "score": 0, "creation_date": 1489505511, "post_id": 42789824, "comment_id": 72694703, "body": "I have just realized that <code>values</code> returns a copy of the real value. Fixed, please retest."}, {"owner": {"reputation": 40236, "user_id": 923315, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/j6lLI.jpg?s=128&g=1", "display_name": "peter", "link": "https://stackoverflow.com/users/923315/peter"}, "edited": false, "score": 0, "creation_date": 1489505648, "post_id": 42789824, "comment_id": 72694795, "body": "yep, works now, thanks again, only caveat is you see this only when you ask for the value like that, not when you use inspect to view the contents"}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "reply_to_user": {"reputation": 40236, "user_id": 923315, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/j6lLI.jpg?s=128&g=1", "display_name": "peter", "link": "https://stackoverflow.com/users/923315/peter"}, "edited": false, "score": 0, "creation_date": 1489505872, "post_id": 42789824, "comment_id": 72694937, "body": "That\u2019s the main reason I decided to publish this separately. The approach in my first answer is <i>explicit</i>. This one is <i>lazily implicit</i>. Unless it\u2019s needed, it\u2019s not touched."}], "tags": [], "owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "is_accepted": false, "score": 1, "last_activity_date": 1489505456, "last_edit_date": 1489505456, "creation_date": 1489504587, "answer_id": 42789824, "question_id": 42788826, "link": "https://stackoverflow.com/questions/42788826/ruby-struct-replace-nil-value-with-space/42789824#42789824", "title": "Ruby Struct: replace nil value with space", "body": "<p>Adapting the answer by @Anthony to be more robust:</p>\n\n<pre><code>s = Struct.new(:datum, :string1, :string2, :string3, :nummer) do\n  BLANK = \" \".freeze\n  members.each_with_index do |m, idx|\n    define_method m do\n      self.[]=(idx, BLANK.dup) if values[idx].to_s.empty?\n      values[idx]\n    end\n  end\nend\n\nr = s.new(Time.now(), \"\", \"test\", nil, 0.0)\np r.string3\n#\u21d2 \" \"\np r.string1\n#\u21d2 \" \"\n</code></pre>\n"}], "owner": {"reputation": 40236, "user_id": 923315, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/j6lLI.jpg?s=128&g=1", "display_name": "peter", "link": "https://stackoverflow.com/users/923315/peter"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 134, "favorite_count": 0, "accepted_answer_id": 42788970, "answer_count": 3, "score": 0, "last_activity_date": 1489505456, "creation_date": 1489502045, "last_edit_date": 1489504105, "question_id": 42788826, "link": "https://stackoverflow.com/questions/42788826/ruby-struct-replace-nil-value-with-space", "title": "Ruby Struct: replace nil value with space", "body": "<p>I need to ensure no nil or empty values are inside a Struct, when nil I would like to replace it with a space but the following doesn't work.</p>\n\n<p>Is this possible and how ? Thanks..</p>\n\n<pre><code>s = Struct.new(:datum, :string1, :string2, :string3, :nummer)\nr = s.new(Time.now(), \"\", \"test\", nil, 0.0)\n\np r\n\nr.each do |a|\n    a.replace(\" \") if a.class == String &amp;&amp; a.empty?\n    a = \" \" if a.nil?\nend\n\np r\n</code></pre>\n\n<p>before:</p>\n\n<pre><code>#&lt;struct datum=2017-03-14 15:28:40 +0100, string1=\"\", string2=\"test\", string3=nil, nummer=0.0&gt;\n</code></pre>\n\n<p>after:</p>\n\n<pre><code>#&lt;struct datum=2017-03-14 15:28:40 +0100, string1=\" \", string2=\"test\", string3=nil, nummer=0.0&gt;\n</code></pre>\n\n<p>wanted:</p>\n\n<pre><code>#&lt;struct datum=2017-03-14 15:28:40 +0100, string1=\" \", string2=\"test\", string3=\" \", nummer=0.0&gt;\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-5", "activesupport-concern"], "comments": [{"owner": {"reputation": 2116, "user_id": 6780663, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9207ba3b9163582570078b687f9b2792?s=128&d=identicon&r=PG&f=1", "display_name": "Alejandro Montilla", "link": "https://stackoverflow.com/users/6780663/alejandro-montilla"}, "edited": false, "score": 1, "creation_date": 1489503144, "post_id": 42788376, "comment_id": 72692806, "body": "I dont understand the down vote, is a valid question."}], "answers": [{"comments": [{"owner": {"reputation": 10377, "user_id": 2832282, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/ZJ4WG.jpg?s=128&g=1", "display_name": "Cyril Duchon-Doris", "link": "https://stackoverflow.com/users/2832282/cyril-duchon-doris"}, "edited": false, "score": 0, "creation_date": 1489511402, "post_id": 42792313, "comment_id": 72699167, "body": "Yes my question was about the <code>&#236;nclude Magic</code>either outside or inside the <code>included</code> block"}], "tags": [], "owner": {"reputation": 8117, "user_id": 1207687, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/cOUI4.jpg?s=128&g=1", "display_name": "Wes Foster", "link": "https://stackoverflow.com/users/1207687/wes-foster"}, "is_accepted": true, "score": 1, "last_activity_date": 1489511281, "creation_date": 1489511281, "answer_id": 42792313, "question_id": 42788376, "link": "https://stackoverflow.com/questions/42788376/activesupportconcern-code-placed-inside-the-included-block-or-in-the-module-bo/42792313#42792313", "title": "ActiveSupport::Concern code placed inside the included block or in the module body", "body": "<p>When the concern is included in a class, the <code>include</code> and <code>class_methods</code> allows for the receiving class to inherit those methods.</p>\n\n<p><code>included</code> adds instance methods while <code>class_methods</code> adds class methods.</p>\n\n<p>Source: <a href=\"http://api.rubyonrails.org/classes/ActiveSupport/Concern.html\" rel=\"nofollow noreferrer\">Rails Concerns Docs</a></p>\n\n<p>On the other hand, if your question is the difference between the placement of <code>include Magic</code>, there is no difference in how the class would function.</p>\n"}], "owner": {"reputation": 10377, "user_id": 2832282, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/ZJ4WG.jpg?s=128&g=1", "display_name": "Cyril Duchon-Doris", "link": "https://stackoverflow.com/users/2832282/cyril-duchon-doris"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1208, "favorite_count": 1, "accepted_answer_id": 42792313, "answer_count": 1, "score": 3, "last_activity_date": 1489511439, "creation_date": 1489500878, "last_edit_date": 1489511439, "question_id": 42788376, "link": "https://stackoverflow.com/questions/42788376/activesupportconcern-code-placed-inside-the-included-block-or-in-the-module-bo", "title": "ActiveSupport::Concern code placed inside the included block or in the module body", "body": "<p>Suppose I have the following namespace with a <code>Base</code> module that defines some methods that can be reused</p>\n\n<pre><code>module MyNameSpace\n  module Magic\n    extend ActiveSupport::Concern\n\n    class_methods do \n      def magic_field(field_name)\n        # Defines methods and attributes based on field name\n      end\n    end\n  end\nend\n</code></pre>\n\n<p>What is the difference (if there is any) between</p>\n\n<pre><code>module MyNameSpace\n  module Foo\n    extend ActiveSupport::Concern\n    include Magic\n\n    included do\n      magic_field(:foo)\n    end\n  end\nend\n</code></pre>\n\n<p>and</p>\n\n<pre><code>module MyNameSpace\n  module Foo\n    extend ActiveSupport::Concern\n\n    included do\n      include Magic\n      magic_field(:foo)\n    end\n  end\nend\n</code></pre>\n\n<p>(The question is about the difference of <code>include Magic</code> being either outside or inside the <code>included</code> block)</p>\n"}, {"tags": ["mysql", "ruby-on-rails", "ruby", "case-when", "tiny-tds"], "answers": [{"comments": [{"owner": {"reputation": 1515, "user_id": 7189767, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5c979c9b4f88620e8ddbf74fb6a83824?s=128&d=identicon&r=PG&f=1", "display_name": "Fallenhero", "link": "https://stackoverflow.com/users/7189767/fallenhero"}, "edited": false, "score": 1, "creation_date": 1489507830, "post_id": 42789841, "comment_id": 72696523, "body": "maybe setup connection outside the each-loop?"}], "tags": [], "owner": {"reputation": 63, "user_id": 7160598, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/436456193df6d6abf5e7becc05a94c42?s=128&d=identicon&r=PG&f=1", "display_name": "Misha1991", "link": "https://stackoverflow.com/users/7160598/misha1991"}, "is_accepted": false, "score": 0, "last_activity_date": 1489504621, "creation_date": 1489504621, "answer_id": 42789841, "question_id": 42788102, "link": "https://stackoverflow.com/questions/42788102/insert-into-mysql-database-data-of-parsing-text-file/42789841#42789841", "title": "Insert into mysql database data of parsing text file", "body": "<p>In fact, my version works, but I did not take into account the types of data in the database. If someone knows how to make my algorithm faster, then tell me</p>\n"}], "owner": {"reputation": 63, "user_id": 7160598, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/436456193df6d6abf5e7becc05a94c42?s=128&d=identicon&r=PG&f=1", "display_name": "Misha1991", "link": "https://stackoverflow.com/users/7160598/misha1991"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 144, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1489504621, "creation_date": 1489500191, "last_edit_date": 1495541841, "question_id": 42788102, "link": "https://stackoverflow.com/questions/42788102/insert-into-mysql-database-data-of-parsing-text-file", "title": "Insert into mysql database data of parsing text file", "body": "<p>In this question <a href=\"https://stackoverflow.com/questions/42513224/multi-level-parsing-text\">Multi-level parsing text</a> I asked how can I parse a file into a text file.\nI further complicated the conditions and decided to write the data to the mysql database.\nThe original data is the same.</p>\n\n<p>I had a text file with next contain:</p>\n\n<pre><code>Head 1\nSubhead 1\na 10\nb 14\nc 88\nSubhead 2\na 15\nb 16\nc 17\nd 88\nSubhead 3\na 55\nb 36\nc 87\nHead 4\nSubhead 1\nr 32\nt 55\ns 79\nr 22\nt 88\ny 53\no 78\np 90\nm 44\nHead 53\nSubtitle 1\ny 22\nb 33\nSubtitle 2\na 88\ng 43\nr 87\nHead 33\nSubhead 1 \nz 11\nd 66\nv 88\nb 69\nHead 32\nSubhead 1\nn 88\nm 89\nb 88\nSubhead 2\nb 88\nm 43\n</code></pre>\n\n<p>Now I need structure this text to next plane. I want to write this data to the mysql database.\nMy actions:</p>\n\n<pre><code>require 'tiny_tds'\ncurrent_head = \"\"\ncurrent_sub = \"\"\nres = []\n\n    @host  = 'server'\n    @user  = 'user'\n    @pass  = 'pass'\n\nlines.each do |line|\n  case line\n  when /Head \\d+/\n    current_head = line\n  when /Subhead/\n    current_sub = line\n  when /\\w{1} 88/\n  num = line\n    res &lt;&lt; \"#{current_head}, #{current_sub}, #{num}\"\n\n    conn = TinyTds::Client.new(:host =&gt; @host, :username =&gt; @user, :password =&gt; @pass)\n    insert_string = \"insert into table (head, sub, num) VALUES (#{res})\"\n    conn.execute(insert_string)\n\n  end\nend\n</code></pre>\n\n<p>As a result, I can insert only one line into the database. In addition, the process of insertion is very slow, how can I speed up the process?</p>\n\n<p>I need this result into database:</p>\n\n<pre><code>head   | Sub      | num  |\n_________________________\nHead 1 | Subhead 1| c 88 |\nHead 1 | Subhead 2| d 88 |\nHead 4 | Subhead 1| t 88 |\nHead 53| Subhead 2| a 88 |\nHead 33| Subhead 1| v 88 |\nHead 32| Subhead 1| n 88 |\nHead 32| Subhead 1| b 88 |\nHead 32| Subhead 2| b 88 |\n</code></pre>\n"}, {"tags": ["ruby", "refactoring"], "comments": [{"owner": {"reputation": 52685, "user_id": 980550, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/8emhY.jpg?s=128&g=1", "display_name": "lurker", "link": "https://stackoverflow.com/users/980550/lurker"}, "edited": false, "score": 2, "creation_date": 1489500130, "post_id": 42788058, "comment_id": 72690322, "body": "Create a <code>Dispatcher</code> class and have <code>XDispatcher</code> and <code>YDispatcher</code> be subclasses?"}, {"owner": {"reputation": 4611, "user_id": 3257186, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/1e036860583a98d1826052230afd931c?s=128&d=identicon&r=PG", "display_name": "Flip", "link": "https://stackoverflow.com/users/3257186/flip"}, "reply_to_user": {"reputation": 52685, "user_id": 980550, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/8emhY.jpg?s=128&g=1", "display_name": "lurker", "link": "https://stackoverflow.com/users/980550/lurker"}, "edited": false, "score": 0, "creation_date": 1489500492, "post_id": 42788058, "comment_id": 72690596, "body": "Damn, how on earth could I have missed that? Totally blended out inheritence and extension of classes. Let&#39;s spice the question up then: is it possible without inheritence/extension? With some metaprogramming maybe?"}, {"owner": {"reputation": 52685, "user_id": 980550, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/8emhY.jpg?s=128&g=1", "display_name": "lurker", "link": "https://stackoverflow.com/users/980550/lurker"}, "edited": false, "score": 0, "creation_date": 1489501382, "post_id": 42788058, "comment_id": 72691377, "body": "If these are that close (limited basically to what you&#39;re showing) then you could have a <code>Dispatcher</code> class and have the <code>initialize</code> handle the difference via an argument at creation and make a generic <code>Importer</code> that is configured depending."}], "answers": [{"comments": [{"owner": {"reputation": 7638, "user_id": 1014251, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/1c4500c91af486c885af8bb84eefd063?s=128&d=identicon&r=PG", "display_name": "ReggieB", "link": "https://stackoverflow.com/users/1014251/reggieb"}, "edited": false, "score": 1, "creation_date": 1489501139, "post_id": 42788439, "comment_id": 72691154, "body": "You don&#39;t have to do <code>self.class.const_get(:IMPORTER_CLASS).new</code> if <code>IMPORTER_CLASS</code> is holding the class itself"}], "tags": [], "owner": {"reputation": 2572, "user_id": 2862049, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffd65bc37e559c2c407f064f308828a4?s=128&d=identicon&r=PG&f=1", "display_name": "Lukas Baliak", "link": "https://stackoverflow.com/users/2862049/lukas-baliak"}, "is_accepted": false, "score": 2, "last_activity_date": 1489501505, "last_edit_date": 1489501505, "creation_date": 1489501028, "answer_id": 42788439, "question_id": 42788058, "link": "https://stackoverflow.com/questions/42788058/ruby-how-to-refactor-very-similar-classes/42788439#42788439", "title": "Ruby: How to refactor very similar classes?", "body": "<p>Maybe you can do something like this.</p>\n\n<pre><code>class Dispatcher\n  def initialize\n    path = Rails.root.join(self.class::RAILS_ROOT_PATH)\n  end\n\n  def run\n    # do stuff\n    importer = self.class::IMPORTER_CLASS.new\n    # process\n  end\nend\n\nclass XDispatcher &lt; Dispatcher\n  RAILS_ROOT_PATH = 'x_dispatcher/files'\n  IMPORTER_CLASS = XImporter\nend\n\nclass YDispatcher &lt; Dispatcher\n  RAILS_ROOT_PATH = 'y_dispatcher/files'\n  IMPORTER_CLASS = YImporter\nend\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 4611, "user_id": 3257186, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/1e036860583a98d1826052230afd931c?s=128&d=identicon&r=PG", "display_name": "Flip", "link": "https://stackoverflow.com/users/3257186/flip"}, "edited": false, "score": 0, "creation_date": 1489501611, "post_id": 42788592, "comment_id": 72691552, "body": "Yes, that&#39;s what I was aiming for."}, {"owner": {"reputation": 7638, "user_id": 1014251, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/1c4500c91af486c885af8bb84eefd063?s=128&d=identicon&r=PG", "display_name": "ReggieB", "link": "https://stackoverflow.com/users/1014251/reggieb"}, "edited": false, "score": 1, "creation_date": 1489502007, "post_id": 42788592, "comment_id": 72691833, "body": "<code>Dispatcher.new(&quot;X&quot;).run</code> will produce a path of <code>X_dispatcher&#47;files</code> which is different to <code>x_dispatcher&#47;files</code>. I think you should change the examples to <code>Dispatcher.new(&quot;x&quot;).run</code> and <code>Dispatcher.new(&quot;y&quot;).run</code>"}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1489516103, "post_id": 42788592, "comment_id": 72702189, "body": "You could buy some generality and neatness by passing a second argument to <code>initialize</code>, namely, <code>dispatcher_files</code>."}], "tags": [], "owner": {"reputation": 4150, "user_id": 7470620, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/49f3026fe13841e41d1805178eed9a3c?s=128&d=identicon&r=PG", "display_name": "eiko", "link": "https://stackoverflow.com/users/7470620/eiko"}, "is_accepted": true, "score": 3, "last_activity_date": 1489507391, "last_edit_date": 1489507391, "creation_date": 1489501408, "answer_id": 42788592, "question_id": 42788058, "link": "https://stackoverflow.com/questions/42788058/ruby-how-to-refactor-very-similar-classes/42788592#42788592", "title": "Ruby: How to refactor very similar classes?", "body": "<p>If the only difference is a name, you shouldn't even bother with inheritance. Just initialize your Dispatcher with a name and then pass it where you need it:</p>\n\n<pre><code>class Dispatcher\n  def initialize name\n    @name = name\n    path = Rails.root.join(\"#{@name}_dispatcher/files\")\n  end\n\n  def run\n    # do stuff\n    # importer = Importer.new(@name)\n  end\nend\n\nDispatcher.new(\"x\").run\nDispatcher.new(\"y\").run\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 7638, "user_id": 1014251, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/1c4500c91af486c885af8bb84eefd063?s=128&d=identicon&r=PG", "display_name": "ReggieB", "link": "https://stackoverflow.com/users/1014251/reggieb"}, "is_accepted": false, "score": 1, "last_activity_date": 1489501777, "creation_date": 1489501777, "answer_id": 42788740, "question_id": 42788058, "link": "https://stackoverflow.com/questions/42788058/ruby-how-to-refactor-very-similar-classes/42788740#42788740", "title": "Ruby: How to refactor very similar classes?", "body": "<p>I'd suggest:</p>\n\n<pre><code>class Dispatcher\n  class &lt;&lt; self\n     attr_accessor :file_path, importer_class\n  end\n\n  def path \n    @path ||= Rails.root.join(self.class.file_path)\n  end\n\n  def importer\n    @importer ||= self.class.importer_class.new\n  end\n\n  def run\n    # do stuff\n  end\nend\n\nclass XDispatcher &lt; Dispatcher\n  file_path = 'x_dispatcher/files'\n  importer_class = XImporter\nend\n\nclass YDispatcher &lt; Dispatcher\n  file_path = 'y_dispatcher/files'\n  importer_class = YImporter\nend\n</code></pre>\n\n<p>Two main reasons:</p>\n\n<ol>\n<li>It removes the reliance on constants - and particularly the issue of them not being present in the parent class - or if they are, them being overwritten in the child class</li>\n<li>It removes the reliance on the <code>initialize</code> method needing to have to do more than load initial data - which <a href=\"http://nicholshayes.co.uk/blog/?p=267\" rel=\"nofollow noreferrer\">in my opinion is bad practice</a></li>\n</ol>\n"}], "owner": {"reputation": 4611, "user_id": 3257186, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/1e036860583a98d1826052230afd931c?s=128&d=identicon&r=PG", "display_name": "Flip", "link": "https://stackoverflow.com/users/3257186/flip"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 72, "favorite_count": 0, "accepted_answer_id": 42788592, "answer_count": 3, "score": 0, "last_activity_date": 1489507391, "creation_date": 1489500051, "last_edit_date": 1489501854, "question_id": 42788058, "link": "https://stackoverflow.com/questions/42788058/ruby-how-to-refactor-very-similar-classes", "title": "Ruby: How to refactor very similar classes?", "body": "<p>I've got a bunch of classes that are very similar to each other. The only difference is in a part of the class name, some pathes, and other classes that call, that belong in the same group.</p>\n\n<p>So for example I have a XDispatcher which uses a XImporter, and a YDispatcher which uses a YImporter, where the Dispatchers and Importers are identical save for the names and any fragment using the name, such as pathes, calls to other classes of that grouping.</p>\n\n<pre><code>class XDispatcher\n  def initialize\n    path = Rails.root.join('x_dispatcher/files')\n  end\n\n  def run\n    # do stuff\n    # importer = XImporter.new()\n  end\nend\n\nclass YDispatcher\n  def initialize\n    path = Rails.root.join('y_dispatcher/files')\n  end\n\n  def run\n    # do stuff\n    importer = YImporter.new()\n  end\nend\n</code></pre>\n\n<p>EDIT:\nShame on me..I totally blended out inheritance and extension. In order to keep this question interesting, I would like to see some fancy stuff or experimental ways to solve this 'problem'. </p>\n"}, {"tags": ["ruby-on-rails", "ruby", "pundit"], "comments": [{"owner": {"reputation": 91121, "user_id": 179125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5594142dcc49a24b1902ec8059181f8d?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan Running", "link": "https://stackoverflow.com/users/179125/jordan-running"}, "edited": false, "score": 0, "creation_date": 1489503947, "post_id": 42787955, "comment_id": 72693471, "body": "What does your controller code look like?"}, {"owner": {"reputation": 3685, "user_id": 868273, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/5f15d325ebd0a236f9a4a2a5d2501c96?s=128&d=identicon&r=PG", "display_name": "okliv", "link": "https://stackoverflow.com/users/868273/okliv"}, "reply_to_user": {"reputation": 91121, "user_id": 179125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5594142dcc49a24b1902ec8059181f8d?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan Running", "link": "https://stackoverflow.com/users/179125/jordan-running"}, "edited": false, "score": 0, "creation_date": 1489513636, "post_id": 42787955, "comment_id": 72700671, "body": "Hi, @Jordan, i&#39;ve updated the question"}], "answers": [{"comments": [{"owner": {"reputation": 91121, "user_id": 179125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5594142dcc49a24b1902ec8059181f8d?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan Running", "link": "https://stackoverflow.com/users/179125/jordan-running"}, "edited": false, "score": 1, "creation_date": 1489503562, "post_id": 42789003, "comment_id": 72693169, "body": "The code shown is YAML, not Ruby. You&#39;ve misunderstood how the I18n module does interpolation\u2014it uses <a href=\"https://repl.it/GUhj/1\" rel=\"nofollow noreferrer\"><code>sprintf</code>-style placeholders</a>."}], "tags": [], "owner": {"reputation": 803, "user_id": 7654691, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/W8Gni.jpg?s=128&g=1", "display_name": "R. Sierra", "link": "https://stackoverflow.com/users/7654691/r-sierra"}, "is_accepted": false, "score": -1, "last_activity_date": 1489502480, "creation_date": 1489502480, "answer_id": 42789003, "question_id": 42787955, "link": "https://stackoverflow.com/questions/42787955/pundit-gem-is-there-way-to-show-records-specific-attribute-values-over-yml-fil/42789003#42789003", "title": "Pundit gem. Is there way to show record&#39;s specific attribute values over yml file?", "body": "<p>The problem is that single(') quotes don't allow string interpolation only double(\") quotes</p>\n\n<p>Taken from <a href=\"http://ruby-doc.com/docs/ProgrammingRuby/\" rel=\"nofollow noreferrer\">Programming Ruby</a></p>\n\n<blockquote>\n  <p>Double-quoted strings(...) can substitute the value of any Ruby expression into a string using the sequence #{ expr }. If the expression is just a global variable, a class variable, or an instance variable, you can omit the braces.</p>\n</blockquote>\n"}, {"tags": [], "owner": {"reputation": 91121, "user_id": 179125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5594142dcc49a24b1902ec8059181f8d?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan Running", "link": "https://stackoverflow.com/users/179125/jordan-running"}, "is_accepted": true, "score": 2, "last_activity_date": 1489518490, "last_edit_date": 1489518490, "creation_date": 1489514910, "answer_id": 42793470, "question_id": 42787955, "link": "https://stackoverflow.com/questions/42787955/pundit-gem-is-there-way-to-show-records-specific-attribute-values-over-yml-fil/42793470#42793470", "title": "Pundit gem. Is there way to show record&#39;s specific attribute values over yml file?", "body": "<p>The I18n module has no way of knowing that <code>post.title</code> refers to <code>@post.title</code>. Rails does some of that kind of magic with its form helpers, but that magic does not extend to Pundit.</p>\n\n<p>Here's how the Pundit docs <a href=\"https://github.com/elabs/pundit#creating-custom-error-messages\" rel=\"nofollow noreferrer\">suggest customizing your error messages</a>:</p>\n\n<blockquote>\n  <h3>Creating custom error messages</h3>\n  \n  <p><code>NotAuthorizedError</code>s provide information on what query (e.g.\n  <code>:create?</code>), what record (e.g. an instance of <code>Post</code>), and what policy\n  (e.g. an instance of <code>PostPolicy</code>) caused the error to be raised.</p>\n  \n  <p>One way to use these <code>query</code>, <code>record</code>, and <code>policy</code> properties is to\n  connect them with <code>I18n</code> to generate error messages. Here's how you\n  might go about doing that.</p>\n\n<pre><code>class ApplicationController &lt; ActionController::Base\n  rescue_from Pundit::NotAuthorizedError, with: :user_not_authorized\n\n  private\n\n  def user_not_authorized(exception)\n    policy_name = exception.policy.class.to_s.underscore\n\n    flash[:error] = t \"#{policy_name}.#{exception.query}\", scope: \"pundit\", default: :default\n    redirect_to(request.referrer || root_path)\n  end\nend\n</code></pre>\n  \n  <pre class=\"lang-yaml prettyprint-override\"><code>en:\n pundit:\n   default: 'You cannot perform this action.'\n   post_policy:\n     update?: 'You cannot edit this post!'\n     create?: 'You cannot create posts!'\n</code></pre>\n  \n  <p>Of course, this is just an example. Pundit is agnostic as to how you implement your error messaging.</p>\n</blockquote>\n\n<p>From that information we could extrapolate something like the following:</p>\n\n<pre><code>private\ndef user_not_authorized(exception)\n  policy_name = exception.policy.class.to_s.underscore\n  interpolations = exception.query == 'share?' ? { title: @post.title } : {}\n\n  flash[:error] = t \"#{policy_name}.#{exception.query}\", scope: \"pundit\", default: :default, **interpolations\n  redirect_to(request.referrer || root_path)\nend\n</code></pre>\n\n<p>And then, in your locales:</p>\n\n<pre class=\"lang-yaml prettyprint-override\"><code>en:\n  pundit:\n    default: You cannot perform this action.\n    post_policy:\n      share?: You cannot share post %{title}!\n</code></pre>\n\n<p>I don't have an app with Pundit in front of me so I can't test this; it's likely you'll need to finesse it a bit.</p>\n"}], "owner": {"reputation": 3685, "user_id": 868273, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/5f15d325ebd0a236f9a4a2a5d2501c96?s=128&d=identicon&r=PG", "display_name": "okliv", "link": "https://stackoverflow.com/users/868273/okliv"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 238, "favorite_count": 0, "accepted_answer_id": 42793470, "answer_count": 2, "score": 1, "last_activity_date": 1489518490, "creation_date": 1489499761, "last_edit_date": 1489513584, "question_id": 42787955, "link": "https://stackoverflow.com/questions/42787955/pundit-gem-is-there-way-to-show-records-specific-attribute-values-over-yml-fil", "title": "Pundit gem. Is there way to show record&#39;s specific attribute values over yml file?", "body": "<p>i'am playing with <a href=\"https://github.com/elabs/pundit\" rel=\"nofollow noreferrer\">pundit gem</a>. i need to show post's <code>title</code> in a flash message</p>\n\n<pre><code>#config/locales/pundit.en.yml\n\nen:\n  pundit:\n    default: 'You cannot perform this action.'\n    post_policy:\n      share?: 'You cannot share post %{post.title}!'\n</code></pre>\n\n<p>controller:</p>\n\n<pre><code>#posts_controller.rb\n\ndef share\n  @post = Post.find(params[:id])\n  authorize @post\n  @post.share\n  redirect_to @post\nend\n</code></pre>\n\n<p>all i receive is the exact the same string without any errors and substitutions</p>\n\n<pre><code>You cannot share post %{post.title}!\n</code></pre>\n\n<p>any suggestions? thanks</p>\n"}]