[{"tags": ["ruby", "rspec"], "comments": [{"owner": {"reputation": 8490, "user_id": 674064, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/5bf2cf5a797565e548088053644704e7?s=128&d=identicon&r=PG", "display_name": "das-g", "link": "https://stackoverflow.com/users/674064/das-g"}, "edited": false, "score": 1, "creation_date": 1487203269, "post_id": 42262271, "comment_id": 71682284, "body": "Your code looks consistent with <a href=\"http://www.rubydoc.info/gems/rspec-expectations/frames#Comparisons\" rel=\"nofollow noreferrer\">rubydoc.info/gems/rspec-expectations/frames#Comparisons</a> . What version of rspec-expectations are you using?"}, {"owner": {"reputation": 1843, "user_id": 4067720, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a52c645614505bcaeb65a6c5199158c1?s=128&d=identicon&r=PG", "display_name": "Glyoko", "link": "https://stackoverflow.com/users/4067720/glyoko"}, "edited": false, "score": 1, "creation_date": 1487203332, "post_id": 42262271, "comment_id": 71682307, "body": "That is the correct syntax. Could you post your whole spec? And what version of RSpec are you using?"}, {"owner": {"reputation": 551, "user_id": 844645, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/95e55b1155026924f3f1263595e53ef8?s=128&d=identicon&r=PG", "display_name": "TangibleDream", "link": "https://stackoverflow.com/users/844645/tangibledream"}, "edited": false, "score": 0, "creation_date": 1487203421, "post_id": 42262271, "comment_id": 71682338, "body": "<code>rspec-expectations (~&gt; 3.5.0)</code>"}, {"owner": {"reputation": 2009, "user_id": 20769, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/922e7e3c612566756735b2def78827d8?s=128&d=identicon&r=PG", "display_name": "Joshua", "link": "https://stackoverflow.com/users/20769/joshua"}, "edited": false, "score": 0, "creation_date": 1487217674, "post_id": 42262271, "comment_id": 71686308, "body": "Are you using another library to get the &#39;Then&#39; syntax? Maybe that is causing problems."}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "reply_to_user": {"reputation": 2009, "user_id": 20769, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/922e7e3c612566756735b2def78827d8?s=128&d=identicon&r=PG", "display_name": "Joshua", "link": "https://stackoverflow.com/users/20769/joshua"}, "edited": false, "score": 0, "creation_date": 1487237775, "post_id": 42262271, "comment_id": 71696194, "body": "@Joshua: that&#39;s cucumber."}], "answers": [{"tags": [], "owner": {"reputation": 562, "user_id": 622944, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Q8UP6.jpg?s=128&g=1", "display_name": "Axe", "link": "https://stackoverflow.com/users/622944/axe"}, "is_accepted": true, "score": 2, "last_activity_date": 1487237689, "creation_date": 1487237689, "answer_id": 42269982, "question_id": 42262271, "link": "https://stackoverflow.com/questions/42262271/how-do-i-use-expect-to-test-for-less-than/42269982#42269982", "title": "How do I use expect to test for less than", "body": "<p>Syntax looks good. I would first make a very small simple spec, independent of your code to see if your setup works. For example (it should fail btw ;):</p>\n\n<pre><code>describe 'test' do\n  it 'works' do\n    expect(2).to be &lt; 1\n  end\nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2009, "user_id": 20769, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/922e7e3c612566756735b2def78827d8?s=128&d=identicon&r=PG", "display_name": "Joshua", "link": "https://stackoverflow.com/users/20769/joshua"}, "is_accepted": false, "score": 1, "last_activity_date": 1487272688, "last_edit_date": 1487272688, "creation_date": 1487271719, "answer_id": 42282499, "question_id": 42262271, "link": "https://stackoverflow.com/questions/42262271/how-do-i-use-expect-to-test-for-less-than/42282499#42282499", "title": "How do I use expect to test for less than", "body": "<p>Looking at the source code for rspec-expectations it should return </p>\n\n<p>RSpec::Matchers::BuiltIn::Be not RSpec::Matchers::BuiltIn::BePredicate</p>\n\n<p>Is it possible you have be_ ? That returns a RSpec::Matchers::BuiltIn::BePredicate in the following dummy test</p>\n\n<pre><code>describe 'test' do\n  it 'works' do\n    puts \"be is a #{be.class}\"\n    puts \"be_ is a #{be_.class}\"\n\n    puts \"be is defined on #{method(:be)}\"\n    expect(2).to be_ &lt; 1\n  end\nend\n</code></pre>\n\n<p>outputs</p>\n\n<pre><code>be is a RSpec::Matchers::BuiltIn::Be \nbe_ is a RSpec::Matchers::BuiltIn::BePredicate \nbe is defined on #&lt;Method:RSpec::ExampleGroups::Test(RSpec::Matchers)#be&gt;\n</code></pre>\n\n<p>Alternatively maybe the be method has been redefined?</p>\n"}], "owner": {"reputation": 551, "user_id": 844645, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/95e55b1155026924f3f1263595e53ef8?s=128&d=identicon&r=PG", "display_name": "TangibleDream", "link": "https://stackoverflow.com/users/844645/tangibledream"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 808, "favorite_count": 0, "accepted_answer_id": 42269982, "answer_count": 2, "score": 3, "last_activity_date": 1487272688, "creation_date": 1487202483, "last_edit_date": 1487203651, "question_id": 42262271, "link": "https://stackoverflow.com/questions/42262271/how-do-i-use-expect-to-test-for-less-than", "title": "How do I use expect to test for less than", "body": "<p>Relish suggests the following...</p>\n\n<pre><code>expect(actual).to be &lt;  expected\n</code></pre>\n\n<p>However if I try...</p>\n\n<pre><code> x.rand(10)\n expect(x).to be &lt; 11 \n</code></pre>\n\n<p>full spec</p>\n\n<pre><code>Then(/^I find each world produces just up to (\\d+) fighters per turn and no higher$/) do |arg1|\n    test = Planet.new\n    test.production.each_index do |ndx|\n       expect(test.production[ndx]).to be &lt; 11\n    end\n  end\n</code></pre>\n\n<p>I'll get</p>\n\n<pre><code>undefined method `&lt;' for #&lt;RSpec::Matchers::BuiltIn::BePredicate:0x0000000268a3b0&gt; (NoMethodError)\n</code></pre>\n\n<p>What is the current proper syntax to use expect in a less than comparison?</p>\n"}, {"tags": ["ruby", "xcode", "ruby-on-rails-3", "xcode-server"], "answers": [{"tags": [], "owner": {"reputation": 149, "user_id": 2421658, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7919e23b60db82b77d97e0ae5fc44a50?s=128&d=identicon&r=PG", "display_name": "Preston", "link": "https://stackoverflow.com/users/2421658/preston"}, "is_accepted": false, "score": 0, "last_activity_date": 1487204555, "last_edit_date": 1487204555, "creation_date": 1487203995, "answer_id": 42262509, "question_id": 42262203, "link": "https://stackoverflow.com/questions/42262203/install-imagemagick-and-start-your-lane-again-error-when-applying-icon-overlay/42262509#42262509", "title": "Install ImageMagick and start your lane again error when applying icon overlay", "body": "<p>I'm no XCode master, but it sounds like you don't have your XCode server or bot configured correctly.</p>\n\n<pre><code>which convert \n</code></pre>\n\n<p>should return the path to the 'convert' binary and the same goes for </p>\n\n<pre><code>which gm\n</code></pre>\n\n<p>try running those commands on your XCode server and see what you get back.</p>\n\n<p>Just a guess, but you may need to add the path of those binaries to the bot's environment variables.</p>\n"}], "owner": {"reputation": 392, "user_id": 3124081, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/981606e1d42b4c3eae75a5a8873ca84c?s=128&d=identicon&r=PG&f=1", "display_name": "user3124081", "link": "https://stackoverflow.com/users/3124081/user3124081"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 508, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1487204555, "creation_date": 1487202057, "question_id": 42262203, "link": "https://stackoverflow.com/questions/42262203/install-imagemagick-and-start-your-lane-again-error-when-applying-icon-overlay", "title": "Install ImageMagick and start your lane again error when applying icon overlay", "body": "<p>To give some context, I am currently using a program called <a href=\"https://github.com/HazAT/badge\" rel=\"nofollow noreferrer\">badge</a> to apply an icon overlay to my app icons. Works great locally on my computer, however when I run the command badge inside an xcode bot before integration, I get the following error: </p>\n\n<pre><code>Install ImageMagick and start your lane again!\n</code></pre>\n\n<p>I have ran the <code>brew update &amp;&amp; brew install imagemagick</code> command numerous times on the _xcsbuildd (Xcode Server) user to install ImageMagick and I still get the error. Checking the <code>runner.rb</code> file under the <code>/Library/Ruby/Gems/2.0.0/gems/badge-0.7.1/lib/badge</code>directory, I found the code that throws the exception. I have unanswered questions that will hopefully give me the next debugging datapoint. </p>\n\n<p>1.) where does require <code>require 'fastimage' require 'timeout' require 'mini_magick'</code> point to in the file system? Is there any way to echo out the location when invoked so I can confirm it's in the correct directory? </p>\n\n<p>2.) Looks like the runner.rb has a method named <code>check_imagemagick!</code> to determine if imagemagick is installed if I were to make an educated guess.. Can someone plase explain what this logic is doing?  </p>\n\n<pre><code>return if `which convert`.include?('convert')\nreturn if `which gm`.include?('gm')\n</code></pre>\n\n<p>Here's the full code from the runner.rb file: </p>\n\n<pre><code>require 'fastimage'\nrequire 'timeout'\nrequire 'mini_magick'\n\nmodule Badge\n  class Runner\n    @@retry_count = Badge.shield_io_retries\n\n    def run(path, options)\n\n      check_imagemagick!\n      glob = \"/**/*.appiconset/*.{png,PNG}\"\n      glob = options[:glob] if options[:glob]\n\n      UI.message \"FP:\" + glob\n\n      UI.message \"P:\" + path\n\n      app_icons = Dir.glob(\"#{path}#{glob}\")\n      UI.verbose \"Verbose active...\".blue\n      UI.verbose \"Parameters: #{options.inspect}\".blue\n\n      alpha_channel = false\n      if options[:alpha_channel]\n        alpha_channel = true\n      end\n\n      if app_icons.count &gt; 0\n        UI.message \"Start adding badges...\".green\n\n        shield = nil\n        response_error = false\n        begin\n          timeout = Badge.shield_io_timeout\n          timeout = options[:shield_io_timeout] if options[:shield_io_timeout]\n          Timeout.timeout(timeout.to_i) do\n            shield = load_shield(options[:shield]) if options[:shield]\n          end\n        rescue Timeout::Error\n          UI.error \"Error loading image from shield.io timeout reached. Skipping Shield. Use --verbose for more info\".red\n        rescue OpenURI::HTTPError =&gt; error\n          response = error.io\n          UI.error \"Error loading image from shield.io response Error. Skipping Shield. Use --verbose for more info\".red\n          UI.error response.status if $verbose\n          response_error = true\n        end\n\n        if @@retry_count &lt;= 0\n          UI.error \"Cannot load image from shield.io skipping it...\".red\n        elsif response_error\n          UI.message \"Waiting for #{timeout.to_i}s and retry to load image from shield.io tries remaining: #{@@retry_count}\".red\n          sleep timeout.to_i\n          @@retry_count -= 1\n          return run(path, options)\n        end\n\n        icon_changed = false\n        app_icons.each do |full_path|\n          icon_path = Pathname.new(full_path)\n          icon = MiniMagick::Image.new(full_path)\n\n          result = MiniMagick::Image.new(full_path)\n\n          if !options[:no_badge]\n            result = add_badge(options[:custom], options[:dark], icon, options[:alpha], alpha_channel, options[:badge_gravity])\n            icon_changed = true\n          end\n          if shield\n            result = add_shield(icon, result, shield, alpha_channel, options[:shield_gravity], options[:shield_no_resize])\n            icon_changed = true\n          end\n\n          if icon_changed\n            result.format \"png\"\n            result.write full_path \n          end\n        end\n        if icon_changed\n          UI.message \"Badged \\\\o/!\".green\n        else\n          UI.message \"Did nothing... Enable --verbose for more info.\".red\n        end\n      else\n        UI.error \"Could not find any app icons...\".red\n      end\n    end\n\n    def add_shield(icon, result, shield, alpha_channel, shield_gravity, shield_no_resize)\n      UI.message \"'#{icon.path}'\"\n      UI.verbose \"Adding shield.io image ontop of icon\".blue\n\n      current_shield = MiniMagick::Image.open(shield.path)\n\n      if icon.width &gt; current_shield.width &amp;&amp; !shield_no_resize\n        current_shield.resize \"#{icon.width}x#{icon.height}&lt;\"\n      else\n        current_shield.resize \"#{icon.width}x#{icon.height}&gt;\"\n      end\n\n      result = composite(result, current_shield, alpha_channel, shield_gravity || \"north\")\n    end\n\n    def load_shield(shield_string)\n      url = Badge.shield_base_url + Badge.shield_path + shield_string + \".png\"\n      file_name = shield_string + \".png\"\n\n      UI.verbose \"Trying to load image from shield.io. Timeout: #{Badge.shield_io_timeout}s\".blue\n      UI.verbose \"URL: #{url}\".blue\n\n      shield = Tempfile.new(file_name).tap do |file|\n        file.binmode\n        file.write(open(url).read)\n        file.close\n      end\n    end\n\n    def check_imagemagick!\n        return if `which convert`.include?('convert')\n        return if `which gm`.include?('gm')\n\n        UI.error(\"You have to install ImageMagick or GraphicsMagick to use `badge`\")\n        UI.error(\"\")\n        UI.error(\"Install it using (ImageMagick):\")\n        UI.command(\"brew update &amp;&amp; brew install imagemagick\")\n        UI.error(\"\")\n        UI.error(\"Install it using (GraphicsMagick):\")\n        UI.command(\"brew update &amp;&amp; brew install graphicsmagick\")\n        UI.error(\"\")\n        UI.error(\"If you don't have homebrew, visit http://brew.sh\")\n\n        UI.user_error!(\"Install ImageMagick and start your lane again!\")\n    end\n\n    def add_badge(custom_badge, dark_badge, icon, alpha_badge, alpha_channel, badge_gravity)\n      UI.message \"'#{icon.path}'\"\n      UI.verbose \"Adding badge image ontop of icon\".blue\n      if custom_badge &amp;&amp; File.exist?(custom_badge) # check if custom image is provided\n        badge = MiniMagick::Image.open(custom_badge)\n      else\n        if alpha_badge\n          badge = MiniMagick::Image.open(dark_badge ? Badge.alpha_dark_badge : Badge.alpha_light_badge)\n        else\n          badge = MiniMagick::Image.open(dark_badge ? Badge.beta_dark_badge : Badge.beta_light_badge)\n        end\n      end\n\n      badge.resize \"#{icon.width}x#{icon.height}\"\n      result = composite(icon, badge, alpha_channel, badge_gravity || \"SouthEast\")\n    end\n\n    def composite(image, overlay, alpha_channel, gravity)\n      image.composite(overlay, 'png') do |c|\n        c.compose \"Over\"\n        c.alpha 'On' unless !alpha_channel\n        c.gravity gravity\n      end\n    end\n  end\nend\n</code></pre>\n\n<p>I appreciate any help. Hopefully I am clear. I'm going to brush up on Ruby basics in the meantime. </p>\n"}, {"tags": ["ruby", "hexdump"], "answers": [{"comments": [{"owner": {"reputation": 40236, "user_id": 923315, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/j6lLI.jpg?s=128&g=1", "display_name": "peter", "link": "https://stackoverflow.com/users/923315/peter"}, "edited": false, "score": 0, "creation_date": 1513124133, "post_id": 42262187, "comment_id": 82528621, "body": "or [my_hex_string].pack(&#39;H*&#39;)"}], "tags": [], "owner": {"reputation": 10230, "user_id": 2427222, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4h1qN.png?s=128&g=1", "display_name": "ymonad", "link": "https://stackoverflow.com/users/2427222/ymonad"}, "is_accepted": true, "score": 5, "last_activity_date": 1487206104, "last_edit_date": 1487206104, "creation_date": 1487202008, "answer_id": 42262187, "question_id": 42262046, "link": "https://stackoverflow.com/questions/42262046/hexadecimal-dump-to-binary-xxd-r-equivalent/42262187#42262187", "title": "hexadecimal dump to binary - xxd -r equivalent", "body": "<p>use <a href=\"https://ruby-doc.org/core-2.4.0/Array.html#method-i-pack\" rel=\"nofollow noreferrer\">Array#pack</a></p>\n\n<p><code>.scan(/../)</code> will split <code>\"8cd59e\"</code> into <code>[\"8c\",\"d5\",\"9e\"]</code></p>\n\n<p><code>.map(&amp;:hex)</code> will convert it to <code>[0x8c, 0xd5, 0x9e]</code></p>\n\n<p><code>.pack(\"c*\")</code> will pack it to <code>\"\\x8c\\xd5\\x9e\"</code></p>\n\n<pre><code>echo \"8cd59ef53c9aaa68311b73767e0975e7\" | \\\n  ruby -ne 'print $_.scan(/../).map(&amp;:hex).pack(\"c*\")' | \\\n  xxd -b\n</code></pre>\n\n<p>output:</p>\n\n<pre><code>00000000: 10001100 11010101 10011110 11110101 00111100 10011010  ....&lt;.\n00000006: 10101010 01101000 00110001 00011011 01110011 01110110  .h1.sv\n0000000c: 01111110 00001001 01110101 11100111                    ~.u.\n</code></pre>\n"}], "owner": {"reputation": 3647, "user_id": 3206440, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/9d136c2fa437c777757f77a7ebdb56b3?s=128&d=identicon&r=PG&f=1", "display_name": "user3206440", "link": "https://stackoverflow.com/users/3206440/user3206440"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3806, "favorite_count": 0, "accepted_answer_id": 42262187, "answer_count": 1, "score": 1, "last_activity_date": 1487206104, "creation_date": 1487201177, "last_edit_date": 1487201847, "question_id": 42262046, "link": "https://stackoverflow.com/questions/42262046/hexadecimal-dump-to-binary-xxd-r-equivalent", "title": "hexadecimal dump to binary - xxd -r equivalent", "body": "<p>In Linux bash shell, I use the following to convert a plain hexadecimal dump into binary</p>\n\n<pre><code>$ echo \"8cd59ef53c9aaa68311b73767e0975e7\" | xxd -r -p &gt; xxd_out.bin\n</code></pre>\n\n<p>when I open the file in text viewer it looks like <code>\u0152\u00d5\u017e\u00f5&lt;\u0161\u00aah1sv~ u\u00e7</code></p>\n\n<p>or in xxd </p>\n\n<pre><code>$ xxd -b xxd_out.bin\n00000000: 10001100 11010101 10011110 11110101 00111100 10011010  ....&lt;.\n00000006: 10101010 01101000 00110001 00011011 01110011 01110110  .h1.sv\n0000000c: 01111110 00001001 01110101 11100111                    ~.u.\n</code></pre>\n\n<p>or in Notepad++ Hex-Editor (plugin) view\n<a href=\"https://i.stack.imgur.com/LpdN9.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/LpdN9.jpg\" alt=\"enter image description here\"></a></p>\n\n<p>How can I get the same binary output in Ruby ? Is there any library available which does what <code>xxd -r -p</code> would do ?</p>\n"}, {"tags": ["ruby-on-rails", "arrays", "ruby", "r"], "comments": [{"owner": {"reputation": 1548, "user_id": 1246279, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e2533d5a4299cad329268e552c47fa8d?s=128&d=identicon&r=PG", "display_name": "philomory", "link": "https://stackoverflow.com/users/1246279/philomory"}, "edited": false, "score": 0, "creation_date": 1487215574, "post_id": 42262014, "comment_id": 71685661, "body": "This is because you&#39;re using CSV.generate_line, and in CSV individual bare elements are not allowed to contain commas. Thus, in order to accurately represent your input, it quotes the whole thing. Keep in mind that in CSV, without the quotes, you&#39;d have a list with four elements: <code>c(1</code>, <code>9)</code>, <code>&#39;M&#39;</code>, and <code>1</code>.  This leaves me the question of why you&#39;re using CSV in the first place. I&#39;m not familiar with R, but I think you&#39;re just making things harder on yourself by converting to an unrelated and inappropriate data format."}], "answers": [{"comments": [{"owner": {"reputation": 121, "user_id": 5817679, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a14bb542a0ad4c205a3cbd0881320c1?s=128&d=identicon&r=PG&f=1", "display_name": "erica", "link": "https://stackoverflow.com/users/5817679/erica"}, "edited": false, "score": 0, "creation_date": 1487264119, "post_id": 42264328, "comment_id": 71716796, "body": "Thanks for your response! The reason I&#39;m using CSV is because I need the values to be comma separated and to keep their type (eg: list(&#39;M&#39;, 1)).  If I join the values then it passes a string to the list: list(&quot;M, 1&quot;), which is not a valid argument for the R algorithm.  So, the CSV generation works at the list level, but when I try to use the CSV to convert from a ruby array to an R array (within the list) I have to use string interpolation and the whole thing gets passed as a string (eg &quot;c(1,9)&quot;).  If I use your approach I get: &quot;c(&#39;1,9&#39;)&quot; and what I want to get is c(1,9)."}, {"owner": {"reputation": 1548, "user_id": 1246279, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e2533d5a4299cad329268e552c47fa8d?s=128&d=identicon&r=PG", "display_name": "philomory", "link": "https://stackoverflow.com/users/1246279/philomory"}, "reply_to_user": {"reputation": 121, "user_id": 5817679, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a14bb542a0ad4c205a3cbd0881320c1?s=128&d=identicon&r=PG&f=1", "display_name": "erica", "link": "https://stackoverflow.com/users/5817679/erica"}, "edited": false, "score": 0, "creation_date": 1487278398, "post_id": 42264328, "comment_id": 71725471, "body": "Can you give an example of the return value of <code>converted_filter_values</code>, then?  I&#39;m expecting it to be <code>[[1,9], &quot;M&quot;, 1]</code>. If it is, then the return value of <code>mapped_filter_values_to_csv</code> is exactly <code>&quot;list(c(1,9),&#39;M&#39;,1)&quot;</code> in my test."}, {"owner": {"reputation": 1548, "user_id": 1246279, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e2533d5a4299cad329268e552c47fa8d?s=128&d=identicon&r=PG", "display_name": "philomory", "link": "https://stackoverflow.com/users/1246279/philomory"}, "reply_to_user": {"reputation": 121, "user_id": 5817679, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a14bb542a0ad4c205a3cbd0881320c1?s=128&d=identicon&r=PG&f=1", "display_name": "erica", "link": "https://stackoverflow.com/users/5817679/erica"}, "edited": false, "score": 1, "creation_date": 1487278836, "post_id": 42264328, "comment_id": 71725755, "body": "Also, in CSV everything is a string. Anything that appears to &quot;keep it&#39;s type&quot; does so by coincidence, because CSV doesn&#39;t know anything about either Ruby types or R types. Even the Ruby standard library&#39;s CSV generator doesn&#39;t know about Ruby types, it just calls &quot;to_s&quot; on everything it&#39;s going to put in to the CSV, then checks to see if the resulting string contains any reserved characters. If it doesn&#39;t, it puts it in as-is, and if it does, it puts it in surrounded by quotes (it does a bit more, but not much)."}, {"owner": {"reputation": 121, "user_id": 5817679, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a14bb542a0ad4c205a3cbd0881320c1?s=128&d=identicon&r=PG&f=1", "display_name": "erica", "link": "https://stackoverflow.com/users/5817679/erica"}, "edited": false, "score": 0, "creation_date": 1487284467, "post_id": 42264328, "comment_id": 71728596, "body": "Yes, you&#39;re exactly right, the return value of converted_filter_values is: [[1,9], &quot;M&quot;, 1].  I get the same thing as you in ruby: &quot;list(c(1,9),&#39;M&#39;,1)&quot; but when that&#39;s passed to R it turns into this: &quot;list(&#39;c(1,9)&#39;,&#39;M&#39;,1)&quot; :/.  It&#39;s confusing that it works for the mapped_filter_values_to_csv and not map_individual_value.  But based on what you said about how the CSV generation I guess I should feel lucky that at least one thing worked."}, {"owner": {"reputation": 1548, "user_id": 1246279, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e2533d5a4299cad329268e552c47fa8d?s=128&d=identicon&r=PG", "display_name": "philomory", "link": "https://stackoverflow.com/users/1246279/philomory"}, "reply_to_user": {"reputation": 121, "user_id": 5817679, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a14bb542a0ad4c205a3cbd0881320c1?s=128&d=identicon&r=PG&f=1", "display_name": "erica", "link": "https://stackoverflow.com/users/5817679/erica"}, "edited": false, "score": 1, "creation_date": 1487354483, "post_id": 42264328, "comment_id": 71763903, "body": "@erica In that case, I would recommend two things: First, try simplifying your code down to the bare minimum, with nothing dynamic at all, and make sure that <code>R.eval(%q{list &lt;- get_algorithm(list(c(1,9),&#39;M&#39;, 1), c(&quot;filter1&quot;, &quot;filter2&quot;, &quot;filter3&quot;))})</code> actually works. If not, then RinRuby is actively transforming your submitted source in ways I, not being an R user, am not going to be able to predict. You&#39;ll have to ask the RinRuby maintainers directly, or look at the source."}, {"owner": {"reputation": 1548, "user_id": 1246279, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e2533d5a4299cad329268e552c47fa8d?s=128&d=identicon&r=PG", "display_name": "philomory", "link": "https://stackoverflow.com/users/1246279/philomory"}, "reply_to_user": {"reputation": 121, "user_id": 5817679, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a14bb542a0ad4c205a3cbd0881320c1?s=128&d=identicon&r=PG&f=1", "display_name": "erica", "link": "https://stackoverflow.com/users/5817679/erica"}, "edited": false, "score": 1, "creation_date": 1487354665, "post_id": 42264328, "comment_id": 71764012, "body": "If <code>R.eval</code> <i>does</i> work when passed a string literal with the structure you&#39;re aiming for, try replacing your inline <code>R.eval &lt;&lt;-EOF ... EOF</code> with <code>src = &lt;&lt;-EOF ... EOF</code>, <code>puts src</code>, <code>R.eval src</code>, to make sure the final string getting passed to R.eval really has the structure you want. If <code>puts src</code> there shows <code>list(&#39;c(1,9)&#39;,&#39;M&#39;,1)</code>, then that&#39;s a problem we can fix in Ruby-land, which means it&#39;s one I can probably help with."}, {"owner": {"reputation": 121, "user_id": 5817679, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a14bb542a0ad4c205a3cbd0881320c1?s=128&d=identicon&r=PG&f=1", "display_name": "erica", "link": "https://stackoverflow.com/users/5817679/erica"}, "edited": false, "score": 0, "creation_date": 1487714921, "post_id": 42264328, "comment_id": 71907134, "body": "Thanks for all your help! I really appreciate it. I think it was something going on with RinRuby, so I threw in the towel and ended up just dealing with it on the R side.  I&#39;ll let you know if I find a better solution some day :)"}], "tags": [], "owner": {"reputation": 1548, "user_id": 1246279, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e2533d5a4299cad329268e552c47fa8d?s=128&d=identicon&r=PG", "display_name": "philomory", "link": "https://stackoverflow.com/users/1246279/philomory"}, "is_accepted": false, "score": 3, "last_activity_date": 1487216705, "last_edit_date": 1487216705, "creation_date": 1487215860, "answer_id": 42264328, "question_id": 42262014, "link": "https://stackoverflow.com/questions/42262014/convert-a-ruby-array-into-an-r-array-within-an-r-list-for-rinruby/42264328#42264328", "title": "convert a ruby array into an R array (within an R list) for RinRuby", "body": "<p>The problem is that CSV is its own data format and has very specific rules about where commas are allowed to go. It also doesn't understand parentheses. As far as CSV is concerned, without the quotes your original list would have had four elements: <code>c(1</code>, <code>9)</code>, <code>'M'</code>, and <code>1</code>. To avoid that, <code>c(1,9)</code> gets quoted, because that's how CSV works.</p>\n\n<p>Much easier to avoid CSV entirely and construct the string representation yourself using join and map:</p>\n\n<pre><code>def mapped_filter_values_to_csv\n  values = converted_filter_values.map{|filter_value| map_individual_value filter_value}\n  \"list(#{ values.join(',') })\"\nend\n\ndef map_individual_value filter_value\n  if filter_value.class == Array\n    values = filter_value.map {|v| map_individual_value(v) }\n    \"c(#{values.join(',')})\"\n  elsif filter_value.class == String\n    \"\\'#{filter_value}\\'\"\n  else\n    filter_value\n  end\nend\n</code></pre>\n"}], "owner": {"reputation": 121, "user_id": 5817679, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a14bb542a0ad4c205a3cbd0881320c1?s=128&d=identicon&r=PG&f=1", "display_name": "erica", "link": "https://stackoverflow.com/users/5817679/erica"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 128, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1487216705, "creation_date": 1487201018, "question_id": 42262014, "link": "https://stackoverflow.com/questions/42262014/convert-a-ruby-array-into-an-r-array-within-an-r-list-for-rinruby", "title": "convert a ruby array into an R array (within an R list) for RinRuby", "body": "<p>I've created a rails API that wraps an R algorithm in ruby using RinRuby.  </p>\n\n<p>The parameters required by the R algorithm are passed as an R list, which is comprised of strings, numbers and arrays.</p>\n\n<p>I'm able to pass the list into the R algorithm using RinRuby, if there are not arrays in the list, by generating a CSV.  But when there are arrays within the list, the arrays are converted into a string.  I can't figure out a way to convert a ruby array into an R array within the converted list.</p>\n\n<p>Here is the RinRuby code that calls the R algorithm:</p>\n\n<pre><code>def algorithm\n    R.eval &lt;&lt;-EOF\n        list &lt;- get_algorithm(#{mapped_filter_values_to_csv}, #{mapped_filter_names})\n        result = toJSON(list)\n    EOF\nend\n</code></pre>\n\n<p>Here is the method that creates the list:</p>\n\n<pre><code>def mapped_filter_values_to_csv\n    \"list(#{CSV.generate_line(converted_filter_values.map{|filter_value| map_individual_value filter_value}, :row_sep=&gt;\"\")})\"\nend\n</code></pre>\n\n<p>Here is the map_individual_value method (called by the previous method):</p>\n\n<pre><code>def map_individual_value filter_value\n    if filter_value.class == Array\n        \"c(#{CSV.generate_line(filter_value, :row_sep=&gt;\"\")})\"\n    elsif filter_value.class == String\n        \"\\'#{filter_value}\\'\"\n    else\n        filter_value\n    end\nend\n</code></pre>\n\n<p>Here is an example of what is happening currently, with \"c(1,9)\" as a string in R:</p>\n\n<pre><code>list &lt;- get_algorithm(list(\"c(1,9)\",'M', 1), c(\"filter1\", \"filter2\", \"filter3\"))\n</code></pre>\n\n<p>Here is what I need to happen, with c(1,9) as an R array:</p>\n\n<pre><code>list &lt;- get_algorithm(list(c(1,9),'M', 1), c(\"filter1\", \"filter2\", \"filter3\"))`enter code here`\n</code></pre>\n\n<p>Any ideas how to convert a ruby array into an R array?</p>\n\n<p>Thanks!</p>\n"}, {"tags": ["ruby", "bundler"], "comments": [{"owner": {"reputation": 15486, "user_id": 719547, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/51e61f099c7b1ac0588ecda69193f75c?s=128&d=identicon&r=PG", "display_name": "Jim Stewart", "link": "https://stackoverflow.com/users/719547/jim-stewart"}, "edited": false, "score": 0, "creation_date": 1487199576, "post_id": 42261681, "comment_id": 71681058, "body": "This isn&#39;t an answer, but there is never a good reason to <code>bundle exec</code>. Look into using RVM or rbenv and gemsets and your life will be much easier."}, {"owner": {"reputation": 67463, "user_id": 203130, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/1RE8c.jpg?s=128&g=1", "display_name": "coreyward", "link": "https://stackoverflow.com/users/203130/coreyward"}, "reply_to_user": {"reputation": 15486, "user_id": 719547, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/51e61f099c7b1ac0588ecda69193f75c?s=128&d=identicon&r=PG", "display_name": "Jim Stewart", "link": "https://stackoverflow.com/users/719547/jim-stewart"}, "edited": false, "score": 1, "creation_date": 1487200222, "post_id": 42261681, "comment_id": 71681276, "body": "@JimStewart If you enjoy swimming upstream, Ruby probably isn&#39;t for you. Even the ruby managers you recommend disagree with you."}, {"owner": {"reputation": 30419, "user_id": 300224, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/PFB2V.jpg?s=128&g=1", "display_name": "William Entriken", "link": "https://stackoverflow.com/users/300224/william-entriken"}, "reply_to_user": {"reputation": 15486, "user_id": 719547, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/51e61f099c7b1ac0588ecda69193f75c?s=128&d=identicon&r=PG", "display_name": "Jim Stewart", "link": "https://stackoverflow.com/users/719547/jim-stewart"}, "edited": false, "score": 0, "creation_date": 1487263726, "post_id": 42261681, "comment_id": 71716478, "body": "@JimStewart thanks for sharing the controversial thought. Could you point me to a good starting point to learn more about this?"}, {"owner": {"reputation": 30419, "user_id": 300224, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/PFB2V.jpg?s=128&g=1", "display_name": "William Entriken", "link": "https://stackoverflow.com/users/300224/william-entriken"}, "edited": false, "score": 0, "creation_date": 1489692164, "post_id": 42261681, "comment_id": 72795059, "body": "To be clear, I am interested in helping other people that run my project. So answers that change my workflow will not help people that want to run this project."}], "answers": [{"tags": [], "owner": {"reputation": 67463, "user_id": 203130, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/1RE8c.jpg?s=128&g=1", "display_name": "coreyward", "link": "https://stackoverflow.com/users/203130/coreyward"}, "is_accepted": false, "score": 1, "last_activity_date": 1487200039, "creation_date": 1487200039, "answer_id": 42261815, "question_id": 42261681, "link": "https://stackoverflow.com/questions/42261681/make-rake-test-invoke-bundle-exec-rake-test-automatically/42261815#42261815", "title": "Make `rake test` invoke `bundle exec rake test` automatically", "body": "<p>Use <a href=\"https://robots.thoughtbot.com/use-bundlers-binstubs\" rel=\"nofollow noreferrer\">binstubs</a>:</p>\n\n<ol>\n<li>Run <code>bundle binstubs rake</code> in the project root</li>\n<li>Use <code>bin/rake</code> instead of <code>rake</code></li>\n</ol>\n\n<p>You no longer need to worry about typing <code>bundle exec</code> before your command. Any setup needed can be done without invoking anything manually on your command line. You can easily modify the binstub file, and it's project-specific.</p>\n\n<p>Finally, if it's really too much to type <code>bin/rake</code>, you can alias something shorter, like <code>brake</code> or if you want to live on the edge, <code>alias rake='bin/rake'</code>. </p>\n"}, {"tags": [], "owner": {"reputation": 87, "user_id": 1653264, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5d64b0a734bdf139e7dbe76bc003413f?s=128&d=identicon&r=PG", "display_name": "kernelsmith", "link": "https://stackoverflow.com/users/1653264/kernelsmith"}, "is_accepted": false, "score": 0, "last_activity_date": 1487200393, "creation_date": 1487200393, "answer_id": 42261887, "question_id": 42261681, "link": "https://stackoverflow.com/questions/42261681/make-rake-test-invoke-bundle-exec-rake-test-automatically/42261887#42261887", "title": "Make `rake test` invoke `bundle exec rake test` automatically", "body": "<p>I think @coreyward has the answer, but if you get into a jam you could always <code>alias rake='bundle exec rake'</code> but that will probably get you into trouble another day.</p>\n"}], "owner": {"reputation": 30419, "user_id": 300224, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/PFB2V.jpg?s=128&g=1", "display_name": "William Entriken", "link": "https://stackoverflow.com/users/300224/william-entriken"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 100, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1487200393, "creation_date": 1487199432, "question_id": 42261681, "link": "https://stackoverflow.com/questions/42261681/make-rake-test-invoke-bundle-exec-rake-test-automatically", "title": "Make `rake test` invoke `bundle exec rake test` automatically", "body": "<p>My <code>Rakefile</code> requires certain dependencies that are installed with bundler. And therefore, the correct way to run my <code>Rakefile</code> is using <code>bundle exec rake</code>.</p>\n\n<p>However, I'm sure one day somebody will accidentally run it with <code>rake</code>. So we have added to the top:</p>\n\n<pre><code>abort('fatal: Please run this using `bundle exec rake`') unless ENV[\"BUNDLE_BIN_PATH\"]\n</code></pre>\n\n<p>However it would be a lot more helpful if the script instead reran itself as <code>bundle exec rake</code> with any additional command line arguments. How do I do this? Bonus points if it fails gracefully when <code>bundler</code> is not installed.</p>\n"}, {"tags": ["arrays", "ruby"], "comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 2, "creation_date": 1487198752, "post_id": 42261445, "comment_id": 71680716, "body": "You say shift value is 4, and yet you move them over two spots?"}], "answers": [{"tags": [], "owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "is_accepted": false, "score": 3, "last_activity_date": 1487199427, "creation_date": 1487199427, "answer_id": 42261680, "question_id": 42261445, "link": "https://stackoverflow.com/questions/42261445/ruby-shifting-arrays-in-an-array-and-creating-a-new-array-where-the-shifted-val/42261680#42261680", "title": "Ruby, Shifting arrays in an array and creating a new array where the shifted values are added?", "body": "<p>This seems to do what you want even though the shift value is off by a factor of two:</p>\n\n<pre><code>arrays = [ [1,2,3,4,5,6],[7,8,9,10,11,12],[13,14,15,16,17,18] ]\nshift = 2\n\narrays.map.with_index do |a, i|\n  # Zero pad the arrays to shift them over\n  [ 0 ] * i * shift + a\nend.reduce do |a, b|\n  # Zip to combine and derive sums\n  b.zip(a).map { |x,y| x + (y || 0) }\nend\n\n# =&gt; [1, 2, 10, 12, 27, 30, 26, 28, 17, 18]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": false, "score": 0, "last_activity_date": 1487202310, "last_edit_date": 1487202310, "creation_date": 1487201266, "answer_id": 42262059, "question_id": 42261445, "link": "https://stackoverflow.com/questions/42261445/ruby-shifting-arrays-in-an-array-and-creating-a-new-array-where-the-shifted-val/42262059#42262059", "title": "Ruby, Shifting arrays in an array and creating a new array where the shifted values are added?", "body": "<p>This solution employs recursion.</p>\n\n<pre><code>def shifty(arr, n)\n  return arr.first if arr.size == 1\n  first, *rest = arr\n  prepend = [0]*n\n  shifty(rest.map { |a| prepend + a }, n).map { |m| m + first.shift.to_i }\nend\n\narr = [[ 1,  2,  3,  4,  5,  6],\n               [ 7,  8,  9, 10, 11, 12],\n                       [13, 14, 15, 16, 17, 18]]\n\nshifty(arr, 2)\n  #=&gt;  [ 1,  2, 10, 12, 27, 30, 26, 28, 17, 18] \n</code></pre>\n\n<p>When <code>first.shift #=&gt; nil</code>, <code>first.shift.to_i #=&gt; 0</code>.</p>\n"}], "owner": {"reputation": 1090, "user_id": 7113209, "user_type": "registered", "accept_rate": 63, "profile_image": "https://graph.facebook.com/10154091942466794/picture?type=large", "display_name": "hancho", "link": "https://stackoverflow.com/users/7113209/hancho"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 99, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1487202310, "creation_date": 1487198363, "question_id": 42261445, "link": "https://stackoverflow.com/questions/42261445/ruby-shifting-arrays-in-an-array-and-creating-a-new-array-where-the-shifted-val", "title": "Ruby, Shifting arrays in an array and creating a new array where the shifted values are added?", "body": "<p>I need to create a method whose arguments are an array of subarrays that are of equal size and a shift value. The output needs to be a new array where the shifted values add up to each other. </p>\n\n<p>Example </p>\n\n<pre><code>array[[1,2,3,4,5,6],[7,8,9,10,11,12],[13,14,15,16,17,18]]\nshift_value = 4\n\n#shift explained below\n\n[1,2,3,4,5,6]\n    [7,8,9,10,11,12]\n        [13,14,15,16,17,18]\n\n#desired output\n[1,2,10,12,27,30,26,28,17,18]\n</code></pre>\n\n<p>Is there a method in ruby to do this? I spent some time making loops finding the index numbers that need to be added and forming a new array, but got lost.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "xml", "postgresql", "background-process"], "comments": [{"owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "edited": false, "score": 0, "creation_date": 1487196823, "post_id": 42260752, "comment_id": 71679797, "body": "Parsing the XML is going to be the bottleneck no matter how you schedule the job. If you want a less memory intensive approach then try to find something that does not involve parsing a 400mb XML file into memory."}, {"owner": {"reputation": 53, "user_id": 6913013, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/M55sb.jpg?s=128&g=1", "display_name": "rohank", "link": "https://stackoverflow.com/users/6913013/rohank"}, "reply_to_user": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "edited": false, "score": 0, "creation_date": 1487202944, "post_id": 42260752, "comment_id": 71682182, "body": "@max I am currently using Nokogiri xml reader which doesn&#39;t load the xml into memory, but read lines sequentially, parsing nodes. Is there a better solution? Maybe splitting the xml file?"}], "answers": [{"comments": [{"owner": {"reputation": 53, "user_id": 6913013, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/M55sb.jpg?s=128&g=1", "display_name": "rohank", "link": "https://stackoverflow.com/users/6913013/rohank"}, "edited": false, "score": 0, "creation_date": 1487203394, "post_id": 42262096, "comment_id": 71682328, "body": "But as the xml file is being parsed, it is updating the database with new records too. So, isn&#39;t that, I will have to boot rails (production env) anyways, if I use rake? How can I use rake with models available for updating?"}, {"owner": {"reputation": 921, "user_id": 3172183, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dscm0.png?s=128&g=1", "display_name": "amrdruid", "link": "https://stackoverflow.com/users/3172183/amrdruid"}, "reply_to_user": {"reputation": 53, "user_id": 6913013, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/M55sb.jpg?s=128&g=1", "display_name": "rohank", "link": "https://stackoverflow.com/users/6913013/rohank"}, "edited": false, "score": 0, "creation_date": 1487232254, "post_id": 42262096, "comment_id": 71692542, "body": "I don&#39;t know your exact usecase, you may need to boot up Rails, but you can also keep all these records that needs to be updated in a separate job (via delayed jobs or Sidekiq). So you the rake task only takes the time of parsing. and the job being queued the only time taken is for the parsing only"}], "tags": [], "owner": {"reputation": 921, "user_id": 3172183, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dscm0.png?s=128&g=1", "display_name": "amrdruid", "link": "https://stackoverflow.com/users/3172183/amrdruid"}, "is_accepted": false, "score": 2, "last_activity_date": 1487201449, "creation_date": 1487201449, "answer_id": 42262096, "question_id": 42260752, "link": "https://stackoverflow.com/questions/42260752/daemon-vs-runner-vs-rake-tasks-vs-active-job/42262096#42262096", "title": "Daemon vs Runner vs Rake Tasks vs Active Job", "body": "<p>. A rake task is just a bunch of code inside a namespace that is executed  via rake management tool</p>\n\n<p>. <code>runner</code> runs Ruby code in the context of Rails non-interactively</p>\n\n<p>. Daemon on the other hand is completely different thing than this two, you can check more about it here: <a href=\"http://daemons.rubyforge.org/\" rel=\"nofollow noreferrer\">http://daemons.rubyforge.org/</a></p>\n\n<p>For your case it's best to use rake because it doesn't boot rails \"unless you make it\" (runner have to boot rails). </p>\n\n<p>Another thing is rake is single threaded, so If you want to a single task to be done efficiently you can use rake, if you have multiple tasks you can make use of workers and tools like Sidekiq, Resque and Delayed jobs</p>\n"}], "owner": {"reputation": 53, "user_id": 6913013, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/M55sb.jpg?s=128&g=1", "display_name": "rohank", "link": "https://stackoverflow.com/users/6913013/rohank"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1385, "favorite_count": 0, "answer_count": 1, "score": 3, "last_activity_date": 1487201449, "creation_date": 1487195470, "question_id": 42260752, "link": "https://stackoverflow.com/questions/42260752/daemon-vs-runner-vs-rake-tasks-vs-active-job", "title": "Daemon vs Runner vs Rake Tasks vs Active Job", "body": "<p>I have a list of tasks that need to be performed in the background (Rails 5.0.1) in the following order-</p>\n\n<ol>\n<li>Download a zip file</li>\n<li>Extract the xml file from it (avg. size ~ 400 MB)</li>\n<li>Parse(Nokogiri XML::reader) the xml file for records that meet certain constraints and if found, add them to database (postgres)</li>\n<li>Retrieve some email addresses from database and send them email</li>\n</ol>\n\n<p>This needs to be done everyday without any human input. Right now, I am using Rails runner to do all of that and scheduling it using cron ('Whenever' gem). So, is using '<strong>runner</strong>' the <strong>right approach</strong>? Is there a <strong>less memory intensive</strong> approach I can use, given that the frontend (admin panel) won't be accessed much? How about active job, rake, daemons etc? </p>\n"}, {"tags": ["ruby", "loops", "input", "text-files", "infinite"], "comments": [{"owner": {"reputation": 1, "user_id": 4188080, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/890225a996cecffa6015f9aa92e79600?s=128&d=identicon&r=PG&f=1", "display_name": "MrTumble", "link": "https://stackoverflow.com/users/4188080/mrtumble"}, "edited": false, "score": 0, "creation_date": 1487195345, "post_id": 42260641, "comment_id": 71679077, "body": "Never mind. The code works very well my list should start at 49."}, {"owner": {"reputation": 87, "user_id": 1653264, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5d64b0a734bdf139e7dbe76bc003413f?s=128&d=identicon&r=PG", "display_name": "kernelsmith", "link": "https://stackoverflow.com/users/1653264/kernelsmith"}, "edited": false, "score": 0, "creation_date": 1487201006, "post_id": 42260641, "comment_id": 71681549, "body": "note that <code>var1 = [50]</code> does not create an array of length 50 in ruby, it creates an array with one item in it, and that item is the Fixnum 50.  As @tadman mentions, you only need to do <code>var1 = []</code> as <code>[]</code> is an alias for Array.new, but nobody uses that except when they want to pass args to .new.  You can specify a length when using .new but there&#39;s rarely a need to do so."}], "answers": [{"tags": [], "owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "is_accepted": false, "score": 0, "last_activity_date": 1487196031, "creation_date": 1487196031, "answer_id": 42260887, "question_id": 42260641, "link": "https://stackoverflow.com/questions/42260641/ruby-help-debugging-with-infinite-loop-from-input-of-text-file/42260887#42260887", "title": "ruby help debugging with infinite loop from input of text file", "body": "<p>Here's a more Ruby way of tackling this problem:</p>\n\n<pre><code>puts \"Hello, Ruby!\"\n\narray = [ ]\n\nwhile (array.length &lt; 50)\n  File.open(\"text.txt\", \"r\") do |f|\n    f.each_line do |line|\n      array &lt;&lt; line.chomp\n    end\n  end\nend\n\n# Trim to the first 50 lines\narray = array.first(50)\n</code></pre>\n\n<p>Note that <code>;</code> is not supposed to be used after statements. It's allowed if you need to separate things for the purposes of writing more minimal code, but even that is discouraged. Normally it's reserved for tiny one-liners, things like <code>class X; end</code> as an example.</p>\n"}], "owner": {"reputation": 1, "user_id": 4188080, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/890225a996cecffa6015f9aa92e79600?s=128&d=identicon&r=PG&f=1", "display_name": "MrTumble", "link": "https://stackoverflow.com/users/4188080/mrtumble"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 90, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1487196031, "creation_date": 1487195059, "question_id": 42260641, "link": "https://stackoverflow.com/questions/42260641/ruby-help-debugging-with-infinite-loop-from-input-of-text-file", "title": "ruby help debugging with infinite loop from input of text file", "body": "<p>So I don't understand why when I print var It prints the list of 50 items infinitely. I'm a Java guy so maybe I'm missing something. I'm trying to get a list of strings line by line and read them into the array. Want to sort them after but can't get past infinite loop of list items.</p>\n\n<pre><code>puts \"Hello, Ruby!\";\n    #Declare variable for list\n    var1 = [50]\n\n    #Read in words\n    #opening file\n    count = 0;\n\n    while count &lt; 50\n      File.open(\"text.txt\", \"r\") do |f|\n      f.each_line do |line|\n      var1[count] = line\n      count += 1\n      end\n\n    end\n    puts \"hey guys\"\n    puts var1\n\n    end\n</code></pre>\n"}, {"tags": ["ruby"], "answers": [{"comments": [{"owner": {"reputation": 2041, "user_id": 2071800, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/e1f877eccccc9e714b4d4fe03917f2a7?s=128&d=identicon&r=PG", "display_name": "Joe Half Face", "link": "https://stackoverflow.com/users/2071800/joe-half-face"}, "edited": false, "score": 0, "creation_date": 1487195344, "post_id": 42260462, "comment_id": 71679076, "body": "thanks, I basically wanted to read file by character, no to load it in memory at whole, it is tricky result"}], "tags": [], "owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "is_accepted": true, "score": 1, "last_activity_date": 1487195814, "last_edit_date": 1487195814, "creation_date": 1487194298, "answer_id": 42260462, "question_id": 42260398, "link": "https://stackoverflow.com/questions/42260398/text-file-is-read-incorrectly-partly/42260462#42260462", "title": "Text file is read incorrectly (partly)", "body": "<p>Calling <code>getc</code> twice attempts to fetch two characters. Maybe what you mean is:</p>\n\n<pre><code>while (char = $stdin.getc)\n  puts \"Char: %s\" % char\nend\n</code></pre>\n\n<p>Now any characters you've read are consumed, so you'll need to save them if you want to use those for later input.</p>\n"}], "owner": {"reputation": 2041, "user_id": 2071800, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/e1f877eccccc9e714b4d4fe03917f2a7?s=128&d=identicon&r=PG", "display_name": "Joe Half Face", "link": "https://stackoverflow.com/users/2071800/joe-half-face"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 27, "favorite_count": 0, "accepted_answer_id": 42260462, "answer_count": 1, "score": 0, "last_activity_date": 1487195814, "creation_date": 1487194088, "question_id": 42260398, "link": "https://stackoverflow.com/questions/42260398/text-file-is-read-incorrectly-partly", "title": "Text file is read incorrectly (partly)", "body": "<p>I have <code>myscr</code> file:</p>\n\n<pre><code>#!/usr/bin/env ruby\n\nwhile $stdin.getc\n  puts \"char \\n\"\n  puts $stdin.getc\nend\n\nputs $stdin.read.inspect\n</code></pre>\n\n<p>When I execute command:</p>\n\n<pre><code>cat foo.txt | ruby mysrc\n</code></pre>\n\n<p>I have following output:</p>\n\n<pre><code>char \no\nchar \n\nchar \na\nchar \n\nchar \na\nchar \n\n\"\"\n</code></pre>\n\n<p>So as you can see, it doesn't start with first character, also, for some reason the whole string of <code>.read</code> turns to be empty, as well as some characters from <code>.getc</code>, and some are correct</p>\n"}, {"tags": ["ruby", "algorithm"], "comments": [{"owner": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "edited": false, "score": 0, "creation_date": 1487195578, "post_id": 42260376, "comment_id": 71679182, "body": "What&#39;s your goal? Since you&#39;re working with combinations, it is expected that it will be slow. The number of keys grows exponentially."}, {"owner": {"reputation": 1780, "user_id": 7475314, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AA6yE.jpg?s=128&g=1", "display_name": "Tomasz Buba\u0142a", "link": "https://stackoverflow.com/users/7475314/tomasz-buba%c5%82a"}, "reply_to_user": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "edited": false, "score": 0, "creation_date": 1487195991, "post_id": 42260376, "comment_id": 71679387, "body": "I&#39;m making Scrabble word finder. For this reason i implemented a Trie in which words are stored like this: ex. word &quot;slow&quot; in my Trie would be &quot;4loswslow&quot; - in consists of word length, letters used in alphabetical order + word itself. When enter input = &quot;abcdefghijklmno&quot; - its generates keys and looks for their children in my Trie. It is very fast. Now i want to implement possibility of using blank Tile. hence the &quot;?&quot;. I though maybe my bad practices led to generating being so slow."}, {"owner": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "edited": false, "score": 0, "creation_date": 1487196402, "post_id": 42260376, "comment_id": 71679605, "body": "Thanks a lot for your comment. Your question should be what you wrote in this comment. With your current question, people might help you find a solution which might not be needed at all."}, {"owner": {"reputation": 1780, "user_id": 7475314, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AA6yE.jpg?s=128&g=1", "display_name": "Tomasz Buba\u0142a", "link": "https://stackoverflow.com/users/7475314/tomasz-buba%c5%82a"}, "reply_to_user": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "edited": false, "score": 0, "creation_date": 1487196616, "post_id": 42260376, "comment_id": 71679707, "body": "I guess it might seem too abstract and chaotic. I will repost it if noone answers."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 1, "creation_date": 1487196993, "post_id": 42260376, "comment_id": 71679894, "body": "It&#39;s difficult to get readers to devote the time needed to prepare answers for questions like this one. The main problem is that quite a bit of time is needed just to understand the question."}], "owner": {"reputation": 1780, "user_id": 7475314, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AA6yE.jpg?s=128&g=1", "display_name": "Tomasz Buba\u0142a", "link": "https://stackoverflow.com/users/7475314/tomasz-buba%c5%82a"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 44, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1487194019, "creation_date": 1487194019, "question_id": 42260376, "link": "https://stackoverflow.com/questions/42260376/algorithm-for-generating-abstract-keys-in-ruby", "title": "Algorithm for generating abstract keys in Ruby", "body": "<p>I have an array with each letter </p>\n\n<pre><code>    alphabet = [\"a\", \"b\", \"c\", \"d\", \"e\", \"f\", \"g\", \"h\", \"i\", \"j\", \"k\", \"l\", \"m\", \"n\", \"o\", \"p\", \"q\", \"r\", \"s\", \"t\", \"u\", \"v\", \"w\", \"x\", \"y\", \"z\"]\n\n    input =\"cg?\" \n</code></pre>\n\n<p>Then i'm creating sub-keys</p>\n\n<pre><code>    sub_keys = (2..letters.length).flat_map do |n|\n      letters.combination(n).map(&amp;:join).map{|n| n = n.length.to_s + n.chars.sort.join } \n    end.uniq\n</code></pre>\n\n<p>Which gives me</p>\n\n<pre><code>    sub_keys = [\"2?c, 2?g, 2cg, 3cg?\"]\n</code></pre>\n\n<p>Now i want to transform my sub_keys to get expected output which is</p>\n\n<pre><code>    keys = [2ac, 2bc, 2cc, 2c, 2ag, 2bg, 2cg, 2dg, 2eg, 2fg, 2gg, 2g, 3acg, 3bcg, 3ccg, 3cdg, 3ceg, 3cfg, 3cgg, 3cg]\n</code></pre>\n\n<p>As you can see some keys like: 2c, 2g, 3cg stand out from the rest. In my code 2c acts as 2cd, 2ce, 2cf etc.. This is the output i want and my code for it is here:</p>\n\n<pre><code>    keys_with_blanks = sub_keys.select{ |k| k.include? \"?\" }.map{ |k| k.gsub(\"?\",\"\") }\n    keys = keys_with_blanks.map do |k| \n      current_letters = choose_letters(all_letters, k)\n      k = current_letters.map{ |l| l.gsub(l,l+k) } \n    end.flatten.map{ |k| k.chars.sort.join }.uniq\n    keys += keys_with_blanks \n</code></pre>\n\n<p>For making less keys as the input grows, i decided to choose only the letters i need from the alphabet in each iteration instead of all of them, hence the line <code>current_letters = choose_letters(all_letters, k)</code>\nchoose_letters:</p>\n\n<pre><code>    def choose_letters(letters, key)\n      letters = letters.select{ |l| l &lt;= key.chars.last }\n    end\n</code></pre>\n\n<p>Let's say if i have a key <code>key = \"2c\"</code> then choose_letters will return <code>[\"a\",\"b\",\"c\"]</code></p>\n\n<p>This way i only make the keys i need. Up to about 13 character input its quite fast. The problem start when input is 14 or 15 characters long. Then it takes 3 or 4 seconds to make all the keys.</p>\n\n<p><strong>THIS IS THE SLOW PART</strong></p>\n\n<pre><code>     keys = keys_with_blanks.map do |k| \n       current_letters = choose_letters(all_letters, k)\n       k = current_letters.map{ |l| l.gsub(l,l+k) } \n     end.flatten.map{ |k| k.chars.sort.join }.uniq\n</code></pre>\n\n<p>It takes about 3-4 seconds for <code>input = \"abcdefghijklmn?\"</code></p>\n\n<p><strong>QUESTION</strong></p>\n\n<p>How can the code be refactored to generate keys faster? My latest upgrade was to impletent <code>choose_letters</code> method, so keys like \"2cd\", \"2ce\", \"2cf\" and so on wouldn't generate, because they work exactly like \"2c\". Now it generates only the keys i need, so it's a little faster, but still.. Can it be faster? </p>\n"}, {"tags": ["arrays", "ruby", "null", "unique"], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user7055375"}, "edited": false, "score": 0, "creation_date": 1487192849, "post_id": 42259957, "comment_id": 71677767, "body": "This does avoid the exception I was getting but it doesn&#39;t return an array of lower-cased unique elements.  I still see the elements in their original form."}, {"owner": {"reputation": 1843, "user_id": 4067720, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a52c645614505bcaeb65a6c5199158c1?s=128&d=identicon&r=PG", "display_name": "Glyoko", "link": "https://stackoverflow.com/users/4067720/glyoko"}, "edited": false, "score": 0, "creation_date": 1487192928, "post_id": 42259957, "comment_id": 71677815, "body": "Yes it does? What test data are you using? It&#39;s true that this doesn&#39;t remove nils though, did you want that too? If you wanted to remove nils, you could just add <code>.compact</code> to the whole thing"}, {"owner": {"reputation": 80721, "user_id": 797049, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/5f4f7a23e3d0134123a66015bdc4edd1?s=128&d=identicon&r=PG", "display_name": "Mark Reed", "link": "https://stackoverflow.com/users/797049/mark-reed"}, "edited": false, "score": 0, "creation_date": 1487193017, "post_id": 42259957, "comment_id": 71677855, "body": "No, this compares case-insensitively for the <code>uniq</code> process, but doesn&#39;t actually modify the elements.  <code>[ &#39;A&#39;, &#39;a&#39; ].uniq(&amp;:downcase)</code> may return <code>[&#39;A&#39;]</code> even though it turned that string into <code>&#39;a&#39;</code> for comparison purposes."}, {"owner": {"user_type": "does_not_exist", "display_name": "user7055375"}, "edited": false, "score": 0, "creation_date": 1487193129, "post_id": 42259957, "comment_id": 71677915, "body": "I used &quot;data = [nil, &quot;City&quot;, &quot;Country&quot;]&quot;.  Applying your function returns the same thing."}, {"owner": {"reputation": 80721, "user_id": 797049, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/5f4f7a23e3d0134123a66015bdc4edd1?s=128&d=identicon&r=PG", "display_name": "Mark Reed", "link": "https://stackoverflow.com/users/797049/mark-reed"}, "edited": false, "score": 0, "creation_date": 1487193255, "post_id": 42259957, "comment_id": 71677988, "body": "@natalia Why wouldn&#39;t it return the same thing?  Those are three distinct elements. A unique function won&#39;t change anything."}, {"owner": {"reputation": 1843, "user_id": 4067720, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a52c645614505bcaeb65a6c5199158c1?s=128&d=identicon&r=PG", "display_name": "Glyoko", "link": "https://stackoverflow.com/users/4067720/glyoko"}, "edited": false, "score": 0, "creation_date": 1487193296, "post_id": 42259957, "comment_id": 71678015, "body": "Oh, you didn&#39;t say you wanted the results to be downcased too. The way I read it I thought the case of the results didn&#39;t matter either. If that&#39;s the case then you do have to keep the map. <code>data.map { |datum| datum&amp;.downcase }.uniq</code>"}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 1, "creation_date": 1487197249, "post_id": 42259957, "comment_id": 71680033, "body": "There is no need to show how you have edited your question. I suggest you remove the strike-throughs, which are just a distraction."}], "tags": [], "owner": {"reputation": 1843, "user_id": 4067720, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a52c645614505bcaeb65a6c5199158c1?s=128&d=identicon&r=PG", "display_name": "Glyoko", "link": "https://stackoverflow.com/users/4067720/glyoko"}, "is_accepted": false, "score": 2, "last_activity_date": 1487198409, "last_edit_date": 1487198409, "creation_date": 1487192449, "answer_id": 42259957, "question_id": 42259890, "link": "https://stackoverflow.com/questions/42259890/how-do-i-get-unique-elements-in-a-case-insensitive-way-in-ruby-and-accounting/42259957#42259957", "title": "How do I get unique elements, in a case insensitive way in Ruby, and accounting for nil elements?", "body": "<p>To do it your way, you just need to change the <code>||</code> to an <code>&amp;&amp;</code>. The <code>||</code> isn't doing anything when the element is nil.</p>\n\n<p>Alternatively, you can use <code>&amp;.</code> to make it a bit prettier. Also, you can shorten the whole thing by passing a block to <code>uniq</code>.</p>\n\n<pre><code>data.uniq { |datum| datum&amp;.downcase }\n</code></pre>\n\n<p><em>Unless</em> the results must also be downcased, in which case you do still need the map:</p>\n\n<pre><code>data.map { |datum| datum&amp;.downcase }.uniq\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 80721, "user_id": 797049, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/5f4f7a23e3d0134123a66015bdc4edd1?s=128&d=identicon&r=PG", "display_name": "Mark Reed", "link": "https://stackoverflow.com/users/797049/mark-reed"}, "is_accepted": true, "score": 1, "last_activity_date": 1487196076, "last_edit_date": 1487196076, "creation_date": 1487193215, "answer_id": 42260171, "question_id": 42259890, "link": "https://stackoverflow.com/questions/42259890/how-do-i-get-unique-elements-in-a-case-insensitive-way-in-ruby-and-accounting/42260171#42260171", "title": "How do I get unique elements, in a case insensitive way in Ruby, and accounting for nil elements?", "body": "<p>Your question says you want unique elements in a case-insensitive way. @Glyoko's answer does that. </p>\n\n<p>If you want the elements all converted to lowercase (or uppercase) as well, that's different from what you asked. </p>\n\n<p><code>data.map(&amp;:downcase).uniq</code> will work if all the elements of <code>data</code> are <code>downcase</code>able.  Otherwise, you'll get <code>NoMethodError</code>s. </p>\n\n<p>You can eliminate the non-<code>downcase</code>able elements like this:</p>\n\n<pre><code>data.select{|item| item.respond_to? :downcase}.map(&amp;:downcase).uniq\n</code></pre>\n\n<p>although if the only non-<code>downcase</code>able elements are <code>nil</code>s, you can eliminate those by simply <code>compact</code>ing the array first:</p>\n\n<pre><code>data.compact.map(&amp;:downcase).uniq\n</code></pre>\n\n<p>Note that <code>ary.map(&amp;:foo)</code> is shorthand for <code>ary.map {|item| item.foo}</code>.</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user7055375"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 285, "favorite_count": 0, "accepted_answer_id": 42260171, "answer_count": 2, "score": 1, "last_activity_date": 1487198409, "creation_date": 1487192204, "question_id": 42259890, "link": "https://stackoverflow.com/questions/42259890/how-do-i-get-unique-elements-in-a-case-insensitive-way-in-ruby-and-accounting", "title": "How do I get unique elements, in a case insensitive way in Ruby, and accounting for nil elements?", "body": "<p>I'm using Ruby 2.4.  How do I get unique elements, in a case-insensitive way, from an array but accounting for nil elements?  I thougth this was the solution</p>\n\n<pre><code>data.map{|i| i || i.downcase}.uniq\n</code></pre>\n\n<p>but even after all my learning I'm still getting the error</p>\n\n<pre><code>NoMethodError: undefined method `downcase' for nil:NilClass\n</code></pre>\n\n<p>when one of the elements in teh array is nil.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "active-model-serializers"], "comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1487191664, "post_id": 42259660, "comment_id": 71677122, "body": "Is this for all <code>updated_at</code> fields or for a bunch of otherwise unrelated fields?"}, {"owner": {"reputation": 601, "user_id": 4257226, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/00e242d166545b1cadb4452890101b2b?s=128&d=identicon&r=PG", "display_name": "TiggerToo", "link": "https://stackoverflow.com/users/4257226/tiggertoo"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1487191773, "post_id": 42259660, "comment_id": 71677182, "body": "All fields that have a date in them. Currently, I have 5 on several different models.  As a bonus, the same thing in reverse for input. Currently, I&#39;m manually converting each one as it comes in."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1487191851, "post_id": 42259660, "comment_id": 71677218, "body": "You could subclass ActiveModel::Serializer and introduce your own <code>attributes</code> method that takes options like <code>:as_integer</code> or something."}], "answers": [{"comments": [{"owner": {"reputation": 1445, "user_id": 1576366, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/j3kOJ.jpg?s=128&g=1", "display_name": "raghul", "link": "https://stackoverflow.com/users/1576366/raghul"}, "edited": false, "score": 0, "creation_date": 1539865662, "post_id": 42260166, "comment_id": 92661406, "body": "really use-full one, save my day"}], "tags": [], "owner": {"reputation": 4450, "user_id": 837638, "user_type": "registered", "accept_rate": 11, "profile_image": "https://www.gravatar.com/avatar/32d80da41830a6e6c1bb3eb977537e3e?s=128&d=identicon&r=PG", "display_name": "coorasse", "link": "https://stackoverflow.com/users/837638/coorasse"}, "is_accepted": false, "score": 2, "last_activity_date": 1487193197, "creation_date": 1487193197, "answer_id": 42260166, "question_id": 42259660, "link": "https://stackoverflow.com/questions/42259660/active-model-serializer-transform-all-dates-to-seconds/42260166#42260166", "title": "Active Model Serializer transform all dates to seconds", "body": "<p>Add the following:</p>\n\n<p><code>app/config/initializers/time_with_zone.rb</code></p>\n\n<pre><code>class ActiveSupport::TimeWithZone\n  def as_json(options = {})\n    to_i\n  end\nend\n</code></pre>\n\n<p>this will override the default behaviour for all your timestamps when converted into json.</p>\n"}, {"comments": [{"owner": {"reputation": 601, "user_id": 4257226, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/00e242d166545b1cadb4452890101b2b?s=128&d=identicon&r=PG", "display_name": "TiggerToo", "link": "https://stackoverflow.com/users/4257226/tiggertoo"}, "edited": false, "score": 0, "creation_date": 1487266738, "post_id": 42263926, "comment_id": 71718581, "body": "Just to let you know, so you don&#39;t feel like you&#39;re hanging, I&#39;m going to try this out and see how it goes, but since it&#39;s currently functional in a way that doesn&#39;t scale, it won&#39;t be until after my next deadline in a week or so, so I won&#39;t be picking a best answer right away."}, {"owner": {"reputation": 3785, "user_id": 839925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dfa54eccd89d7c0d2225e0ca279c1191?s=128&d=identicon&r=PG", "display_name": "Alexandre Angelim", "link": "https://stackoverflow.com/users/839925/alexandre-angelim"}, "reply_to_user": {"reputation": 601, "user_id": 4257226, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/00e242d166545b1cadb4452890101b2b?s=128&d=identicon&r=PG", "display_name": "TiggerToo", "link": "https://stackoverflow.com/users/4257226/tiggertoo"}, "edited": false, "score": 0, "creation_date": 1487271905, "post_id": 42263926, "comment_id": 71721640, "body": "@TiggerToo  no problem at all"}], "tags": [], "owner": {"reputation": 3785, "user_id": 839925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dfa54eccd89d7c0d2225e0ca279c1191?s=128&d=identicon&r=PG", "display_name": "Alexandre Angelim", "link": "https://stackoverflow.com/users/839925/alexandre-angelim"}, "is_accepted": true, "score": 1, "last_activity_date": 1487213281, "creation_date": 1487213281, "answer_id": 42263926, "question_id": 42259660, "link": "https://stackoverflow.com/questions/42259660/active-model-serializer-transform-all-dates-to-seconds/42263926#42263926", "title": "Active Model Serializer transform all dates to seconds", "body": "<p>After seeing your comment regarding input conversion as well, I think you could override the getter and setter methods for those fields if you're not using them in any other form. Maybe something along these lines would help.</p>\n\n<p>It's important to note that this will affect not only the field's serialization. If you want to keep normal behaviour for those fields, I'd go with Tadman's advise.</p>\n\n<pre><code># with_unix_time.rb\nmodule WithUnixTime\n  # These methods lack error handling\n  def to_unix_time(*fields)\n    fields.each do |field|\n\n      # Override getter.\n      define_method field do\n        self[field].to_i\n      end\n\n      # Override setter\n      define_method \"#{field}=\" do |value|\n        self[field] = Time.at(value)\n      end\n\n      # Convenience method to retrieve the original DateTime type\n      define_method \"raw_#{field}\" do\n        self[field]\n      end\n    end\n  end\nend\n\n# chimichanga.rb\nclass Chimichanga &lt; ActiveRecord::Base\n  extend WithUnixTime\n  to_unix_time :time_to_kill, :time_for_joke\nend\n</code></pre>\n"}], "owner": {"reputation": 601, "user_id": 4257226, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/00e242d166545b1cadb4452890101b2b?s=128&d=identicon&r=PG", "display_name": "TiggerToo", "link": "https://stackoverflow.com/users/4257226/tiggertoo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1209, "favorite_count": 0, "accepted_answer_id": 42263926, "answer_count": 2, "score": 2, "last_activity_date": 1487213281, "creation_date": 1487191452, "question_id": 42259660, "link": "https://stackoverflow.com/questions/42259660/active-model-serializer-transform-all-dates-to-seconds", "title": "Active Model Serializer transform all dates to seconds", "body": "<p>I need to convert all dates that get returned by my api into Unix date format (seconds). Individually is easy enough...</p>\n\n<pre><code>class ChimichangaSerializer &lt; ActiveModel::Serializer\n  attributes :updated_at,\n\n  def updated_at\n    object.updated_at.to_i\n  end\nend\n</code></pre>\n\n<p>But since I have to do it for everything, that way lies errors and madness. How can I achieve this functionality for all of them?</p>\n"}, {"tags": ["ruby", "sequence"], "comments": [{"owner": {"reputation": 1843, "user_id": 4067720, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a52c645614505bcaeb65a6c5199158c1?s=128&d=identicon&r=PG", "display_name": "Glyoko", "link": "https://stackoverflow.com/users/4067720/glyoko"}, "edited": false, "score": 0, "creation_date": 1487191579, "post_id": 42259587, "comment_id": 71677069, "body": "Could you show us what <code>groups_data</code> looks like? It&#39;s a bit hard to follow without seeing its format. Also, could you explain what you&#39;re trying to accomplish/what the end result should be? There are a lot of shortcuts in ruby and there is probably a shorter and cleaner way of expressing this."}, {"owner": {"reputation": 193, "user_id": 6500563, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/79d8d08238533616559c33c5650255b1?s=128&d=identicon&r=PG&f=1", "display_name": "mila002", "link": "https://stackoverflow.com/users/6500563/mila002"}, "reply_to_user": {"reputation": 1843, "user_id": 4067720, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a52c645614505bcaeb65a6c5199158c1?s=128&d=identicon&r=PG", "display_name": "Glyoko", "link": "https://stackoverflow.com/users/4067720/glyoko"}, "edited": false, "score": 0, "creation_date": 1487191785, "post_id": 42259587, "comment_id": 71677188, "body": "groups_data array <code>groups_data = [[&quot;group1&quot;, &quot;user_1&quot;, &quot;user_2&quot;, &quot;user_3&quot;], [&quot;group3&quot;, &quot;user_1&quot;], [&quot;group4&quot;, &quot;user_2&quot;]]</code> I want to use that array in that form in the next part of code but I still get the new array with deleted item at 0 as is in the code above."}], "answers": [{"comments": [{"owner": {"reputation": 193, "user_id": 6500563, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/79d8d08238533616559c33c5650255b1?s=128&d=identicon&r=PG&f=1", "display_name": "mila002", "link": "https://stackoverflow.com/users/6500563/mila002"}, "edited": false, "score": 0, "creation_date": 1487193242, "post_id": 42259791, "comment_id": 71677983, "body": "Ok, that&#39;s work. So if I good understood operation like that temp_groups_data = groups_data.dup done before each iteration also produce the same array? What should I remember duplicating objects next time, I mean more complicated arrays or hashes?"}, {"owner": {"reputation": 1548, "user_id": 1246279, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e2533d5a4299cad329268e552c47fa8d?s=128&d=identicon&r=PG", "display_name": "philomory", "link": "https://stackoverflow.com/users/1246279/philomory"}, "reply_to_user": {"reputation": 193, "user_id": 6500563, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/79d8d08238533616559c33c5650255b1?s=128&d=identicon&r=PG&f=1", "display_name": "mila002", "link": "https://stackoverflow.com/users/6500563/mila002"}, "edited": false, "score": 0, "creation_date": 1487200936, "post_id": 42259791, "comment_id": 71681521, "body": "See <a href=\"http://stackoverflow.com/questions/38841444/using-self-dup-but-failing-rspec-test-to-not-modify-original-array\">this question</a> and <a href=\"http://stackoverflow.com/questions/38841444/using-self-dup-but-failing-rspec-test-to-not-modify-original-array/38841559#38841559\">my answer to it</a>, they might help explain things better than I can do in a comment."}], "tags": [], "owner": {"reputation": 1548, "user_id": 1246279, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e2533d5a4299cad329268e552c47fa8d?s=128&d=identicon&r=PG", "display_name": "philomory", "link": "https://stackoverflow.com/users/1246279/philomory"}, "is_accepted": true, "score": 1, "last_activity_date": 1487192380, "last_edit_date": 1487192380, "creation_date": 1487191883, "answer_id": 42259791, "question_id": 42259587, "link": "https://stackoverflow.com/questions/42259587/sequence-of-operations-in-ruby/42259791#42259791", "title": "Sequence of operations in Ruby", "body": "<p>The <code>arr</code> in <code>temp_group_data</code> and the <code>arr</code> you call <code>delete_at(0)</code> on are the <em>same</em> array. It's the same data being accessed in multiple different ways.</p>\n\n<p>Here's a simplified example of what's happening:</p>\n\n<pre><code>x = []\ny = [:a, :b]\nx &lt;&lt; y\np x #=&gt; [[:a, :b]]\ny.delete_at(0)\np x #=&gt; [[:b]]\n</code></pre>\n\n<p>The simplest change would just be to copy <code>arr</code> before putting it into temp_groups_data</p>\n\n<pre><code>temp = []\ntemp_groups_data = []\nsearch_text_user = %r{AD-|Domain}\ngroups_data.each do |arr|\n  temp_groups_data &lt;&lt; arr.dup # this right here\n  arr.delete_at(0)\n  arr.each do |el|\n    temp &lt;&lt; (el) unless el =~ search_text_user\n  end\nend\n</code></pre>\n"}], "owner": {"reputation": 193, "user_id": 6500563, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/79d8d08238533616559c33c5650255b1?s=128&d=identicon&r=PG&f=1", "display_name": "mila002", "link": "https://stackoverflow.com/users/6500563/mila002"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 95, "favorite_count": 0, "accepted_answer_id": 42259791, "answer_count": 1, "score": 0, "last_activity_date": 1487192380, "creation_date": 1487191174, "last_edit_date": 1487191319, "question_id": 42259587, "link": "https://stackoverflow.com/questions/42259587/sequence-of-operations-in-ruby", "title": "Sequence of operations in Ruby", "body": "<p>Doing my code I've encountered some difficulties that I quite don't understand (I'm quite new in Ruby). This is an example</p>\n\n<pre><code>temp = []\ntemp_groups_data = []\nsearch_text_user = %r{AD-|Domain}\ngroups_data.each do |arr|\n  temp_groups_data &lt;&lt; arr\n  arr.delete_at(0)\n  arr.each do |el|\n    temp &lt;&lt; (el) unless el =~ search_text_user\n  end\nend\n</code></pre>\n\n<p>When I'm trying to use temp_groups_data array in the next part of code I get an array with deleted value at 0. I don't understand why because this array is created before deteting item so that value shuold be in it, why is not? What the sequence of operations in Ruby is? How to duplicate that array and make it usefull in next part of code?</p>\n"}, {"tags": ["ruby", "datetime", "datetime-format"], "comments": [{"owner": {"reputation": 2127, "user_id": 923194, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/d48e182893f9d17460dd2404c4072828?s=128&d=identicon&r=PG", "display_name": "Imran Ali", "link": "https://stackoverflow.com/users/923194/imran-ali"}, "edited": false, "score": 2, "creation_date": 1487192276, "post_id": 42259580, "comment_id": 71677460, "body": "Instead of <code>DateTime.parse(date_str, form)</code> Try <code>DateTime.strptime(date_str, form)</code>"}, {"owner": {"reputation": 2127, "user_id": 923194, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/d48e182893f9d17460dd2404c4072828?s=128&d=identicon&r=PG", "display_name": "Imran Ali", "link": "https://stackoverflow.com/users/923194/imran-ali"}, "edited": false, "score": 1, "creation_date": 1487193095, "post_id": 42259580, "comment_id": 71677902, "body": "you also need to modify the logic in <code>format.each do ....</code> since one of the two <code>formats</code> will parse successfully for one <code>date_str</code>. Try to change the order of <code>formats</code> to see that <code>parse_string_date</code> indeed successfully parses the <code>date_str</code> if <code>%m%d%Y</code> is the first element"}, {"owner": {"reputation": 854, "user_id": 4696152, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/ce4a2a4814cedafd095f3516a9f9cfe4?s=128&d=identicon&r=PG&f=1", "display_name": "Zack Herbert", "link": "https://stackoverflow.com/users/4696152/zack-herbert"}, "reply_to_user": {"reputation": 2127, "user_id": 923194, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/d48e182893f9d17460dd2404c4072828?s=128&d=identicon&r=PG", "display_name": "Imran Ali", "link": "https://stackoverflow.com/users/923194/imran-ali"}, "edited": false, "score": 0, "creation_date": 1487193612, "post_id": 42259580, "comment_id": 71678198, "body": "@ImranAli Thanks for your help. It looks like this is going to work!"}], "answers": [{"tags": [], "owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "is_accepted": false, "score": 0, "last_activity_date": 1487194485, "creation_date": 1487194485, "answer_id": 42260513, "question_id": 42259580, "link": "https://stackoverflow.com/questions/42259580/parsing-different-formatted-date-strings/42260513#42260513", "title": "Parsing different formatted date strings", "body": "<p>Instead of randomly trying things, why not establish some patterns and templates:</p>\n\n<pre><code>FORMATS = {\n  /\\A(19|20)\\d{2}\\d{2}\\d{2}\\z/ =&gt; '%Y%m%d',\n  /\\A\\d{2}\\d{2}(19|20)\\d{2}\\z/ =&gt; '%m%d%Y'\n}\n</code></pre>\n\n<p>Then you can try decoding this way:</p>\n\n<pre><code>format = FORMATS.find do |rx, _|\n  rx.match(date_str)\nend\n\nformat and DateTime.parse(date_str, format[1])\n</code></pre>\n\n<p>You can add other formats to that, plus a \"whatever\" condition where you give up and return the string as-is.</p>\n"}], "owner": {"reputation": 854, "user_id": 4696152, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/ce4a2a4814cedafd095f3516a9f9cfe4?s=128&d=identicon&r=PG&f=1", "display_name": "Zack Herbert", "link": "https://stackoverflow.com/users/4696152/zack-herbert"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 193, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1487194485, "creation_date": 1487191152, "last_edit_date": 1487191875, "question_id": 42259580, "link": "https://stackoverflow.com/questions/42259580/parsing-different-formatted-date-strings", "title": "Parsing different formatted date strings", "body": "<p>I am working on writing a helper to parse some date strings that I have been given in a CSV. The problem is they are not consistent in the way that they are formatted. There are three different formats:</p>\n\n<ul>\n<li>\"01021992\" (<code>%m%d%Y</code>)</li>\n<li>\"19920201\" (<code>\"%Y%m%d\"</code>)</li>\n<li>\"PORSCHE\" (or some other random word)</li>\n</ul>\n\n<p>Below is the function that I have written to help me parse the dates.</p>\n\n<pre><code>class DateTimeParser\n  require \"date\"\n  require 'active_support/all'\n  require 'byebug'\n\n  class Object\n    def blank?\n      return self == nil || self == \"\"\n    end\n  end\n\n  def parse_string_date\n    date_str = \"01021992\"\n    formats = [\"%Y%m%d\", \"%m%d%Y\"]\n    date = nil\n\n    formats.each do |form|\n      begin\n        date =  DateTime.parse(date_str, form)\n        break\n      rescue =&gt; e\n        puts \"ERROR: #{e}\"\n        puts \"Failed for #{date_str} with format #{form}\"\n      end\n    end\n\n    #this should handle the case where the date is just a word (i.e. \"PORSCHE\")\n    if date.nil?\n      date = DateTime.parse(\"03141994\", \"%m%d%Y\")\n    end\n\n    date = date.change(:offset =&gt; \"+0500\")\n    puts \"Date : #{date}\"\n  end\n\n  DateTimeParser.new().parse_string_date\nend\n</code></pre>\n\n<p>Possible inputs were provided above if you want to run this and change the value of <code>date_str</code></p>\n\n<p><strong>OUTPUT:</strong></p>\n\n<pre><code>ERROR: invalid date\nFailed for 01021992 with format %Y%m%d\nERROR: invalid date\nFailed for 01021992 with format %m%d%Y\n</code></pre>\n\n<p>I guess my trouble is I can't seem to determine what the proper formats are that you can pass to <code>parse</code>.</p>\n"}, {"tags": ["ruby", "webmock"], "comments": [{"owner": {"reputation": 1843, "user_id": 4067720, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a52c645614505bcaeb65a6c5199158c1?s=128&d=identicon&r=PG", "display_name": "Glyoko", "link": "https://stackoverflow.com/users/4067720/glyoko"}, "edited": false, "score": 1, "creation_date": 1487190055, "post_id": 42259183, "comment_id": 71676265, "body": "That&#39;s very strange. I tried opening a console and running those commands, in that order, and I got the correct behavior... Are you positive the <code>disable_net_connect!</code> line is being run before the <code>open</code>?"}, {"owner": {"reputation": 32008, "user_id": 322020, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/dce43cb8158a14c3fed02bea797becd7?s=128&d=identicon&r=PG", "display_name": "Nakilon", "link": "https://stackoverflow.com/users/322020/nakilon"}, "reply_to_user": {"reputation": 1843, "user_id": 4067720, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a52c645614505bcaeb65a6c5199158c1?s=128&d=identicon&r=PG", "display_name": "Glyoko", "link": "https://stackoverflow.com/users/4067720/glyoko"}, "edited": false, "score": 1, "creation_date": 1487192781, "post_id": 42259183, "comment_id": 71677731, "body": "@Glyoko <a href=\"https://gist.github.com/Nakilon/d8a2f473d7675c590e69fc1b45dfaf44\" rel=\"nofollow noreferrer\">gist.github.com/Nakilon/d8a2f473d7675c590e69fc1b45dfaf44</a>"}, {"owner": {"reputation": 1843, "user_id": 4067720, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a52c645614505bcaeb65a6c5199158c1?s=128&d=identicon&r=PG", "display_name": "Glyoko", "link": "https://stackoverflow.com/users/4067720/glyoko"}, "edited": false, "score": 1, "creation_date": 1487193158, "post_id": 42259183, "comment_id": 71677933, "body": "Very strange... I&#39;m getting <code>OpenURI::HTTPError: 400 Bad Request</code> which is correct, since the access_token is fake. Sorry, I&#39;m at a loss."}], "answers": [{"tags": [], "owner": {"reputation": 4150, "user_id": 7470620, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/49f3026fe13841e41d1805178eed9a3c?s=128&d=identicon&r=PG", "display_name": "eiko", "link": "https://stackoverflow.com/users/7470620/eiko"}, "is_accepted": true, "score": 0, "last_activity_date": 1487193769, "creation_date": 1487193769, "answer_id": 42260316, "question_id": 42259183, "link": "https://stackoverflow.com/questions/42259183/how-do-i-allow-the-request-with-this-path-to-pass-the-webmock/42260316#42260316", "title": "How do I allow the request with this path to pass the webmock?", "body": "<p>Your version of Webmock (1.22.6) has a bug when using open-uri:</p>\n\n<p><a href=\"https://github.com/bblimke/webmock/issues/600\" rel=\"nofollow noreferrer\">https://github.com/bblimke/webmock/issues/600</a></p>\n\n<p>You can fix this bug by updating your webmock gem to the latest 1.x or 2.x</p>\n"}], "owner": {"reputation": 32008, "user_id": 322020, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/dce43cb8158a14c3fed02bea797becd7?s=128&d=identicon&r=PG", "display_name": "Nakilon", "link": "https://stackoverflow.com/users/322020/nakilon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1159, "favorite_count": 0, "accepted_answer_id": 42260316, "answer_count": 1, "score": 1, "last_activity_date": 1487193769, "creation_date": 1487189781, "question_id": 42259183, "link": "https://stackoverflow.com/questions/42259183/how-do-i-allow-the-request-with-this-path-to-pass-the-webmock", "title": "How do I allow the request with this path to pass the webmock?", "body": "<p>I want to mock NetHTTP requests but some should be allowed.</p>\n\n<pre><code>require \"open-uri\"    \nrequire \"webmock\"\nWebMock.enable!\n</code></pre>\n\n<p>When I declare an allowed request like this:</p>\n\n<pre><code>WebMock.disable_net_connect! allow: /\\Ahttps:\\/\\/graph\\.facebook\\.com\\/v2\\.8\\/debug_token\\?access_token=/\n</code></pre>\n\n<p>and call:</p>\n\n<pre><code>open(\"https://graph.facebook.com/v2.8/debug_token?access_token=qwerty\", &amp;:read)\n</code></pre>\n\n<p>I get this:</p>\n\n<blockquote>\n  <p>HTTP connections are disabled. Unregistered request: GET <a href=\"https://graph.facebook.com/v2.8/debug_token?access_token=qwerty\" rel=\"nofollow noreferrer\">https://graph.facebook.com/v2.8/debug_token?access_token=qwerty</a> with headers ...<br>\n  You can stub this request with the following snippet:<br>\n  <code>stub_request(:get, \"https://graph.facebook.com/v2.8/debug_token?access_token=qwerty\").</code><br>\n  ...</p>\n</blockquote>\n\n<p>It also fails with regex like this:</p>\n\n<pre><code>/\\Ahttps:\\/\\/graph\\.facebook\\.com\\//\n</code></pre>\n\n<p>but does not fail with this:</p>\n\n<pre><code>/\\Ahttps:\\/\\/graph\\.facebook\\.com/\n</code></pre>\n\n<hr>\n\n<p>How to allow the full regex that I initially wanted? Why even the <code>\\/</code> after hostname fails matching?</p>\n"}, {"tags": ["ruby", "ocra"], "comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 2, "creation_date": 1487189606, "post_id": 42259107, "comment_id": 71676012, "body": "I got dizzy looking at this question. Can you boil this down to a smaller question with actual code involved?"}, {"owner": {"reputation": 1, "user_id": 4451654, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xJHBCnWzbfY/AAAAAAAAAAI/AAAAAAAAAEo/tjLW-EdGx4I/photo.jpg?sz=128", "display_name": "logic error", "link": "https://stackoverflow.com/users/4451654/logic-error"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1487190101, "post_id": 42259107, "comment_id": 71676293, "body": "the code: ocra whateverscript.rb , there is my compile code, what do you want, a whole functional ruby tk script? I didn&#39;t think that would pertain as relevant to my question."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1487190538, "post_id": 42259107, "comment_id": 71676504, "body": "If you&#39;re asking on Stack Overflow then code is <i>always</i> relevant to your question or it wouldn&#39;t be an appropriate forum for your question in the first place."}, {"owner": {"reputation": 4150, "user_id": 7470620, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/49f3026fe13841e41d1805178eed9a3c?s=128&d=identicon&r=PG", "display_name": "eiko", "link": "https://stackoverflow.com/users/7470620/eiko"}, "edited": false, "score": 0, "creation_date": 1487190998, "post_id": 42259107, "comment_id": 71676753, "body": "the stackoverflow community prefers specific questions with objective solutions. for example, during your adventure when you got the application working with ocra and ruby 1.8.6 but not ruby 1.9.3, you could have come to stack overflow and asked a question specifically about getting ocra to work with 1.9.3  i&#39;m going to try answering this question. but if my answer does not work for you, i suggest you go back to ocra and try to figure out what went wrong. if you get stuck, ask about <i>that</i> on stackoverflow."}, {"owner": {"reputation": 1, "user_id": 4451654, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xJHBCnWzbfY/AAAAAAAAAAI/AAAAAAAAAEo/tjLW-EdGx4I/photo.jpg?sz=128", "display_name": "logic error", "link": "https://stackoverflow.com/users/4451654/logic-error"}, "edited": false, "score": 0, "creation_date": 1487201076, "post_id": 42259107, "comment_id": 71681574, "body": "Thank you for being paitent with my badly formatted question"}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 4451654, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xJHBCnWzbfY/AAAAAAAAAAI/AAAAAAAAAEo/tjLW-EdGx4I/photo.jpg?sz=128", "display_name": "logic error", "link": "https://stackoverflow.com/users/4451654/logic-error"}, "edited": false, "score": 0, "creation_date": 1487207187, "post_id": 42259687, "comment_id": 71683445, "body": "thank you all very much, I will back the libraries off the ruby-exe building machine, attempt some of these things, then let you all know how it turns out. again, many thanks."}, {"owner": {"reputation": 1, "user_id": 4451654, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xJHBCnWzbfY/AAAAAAAAAAI/AAAAAAAAAEo/tjLW-EdGx4I/photo.jpg?sz=128", "display_name": "logic error", "link": "https://stackoverflow.com/users/4451654/logic-error"}, "edited": false, "score": 0, "creation_date": 1487628675, "post_id": 42259687, "comment_id": 71860891, "body": "My apologies for late response, lost my RubyScript.exe creation enviornment. Now re-setup on Toshiba, 64-bit, Windows10 pro. Using Ruby: ruby 2.3.3p222 (2016-11-21 revision 56859) [i386-mingw32] I got this non-Tk console application script to build with ocra:"}], "tags": [], "owner": {"reputation": 4150, "user_id": 7470620, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/49f3026fe13841e41d1805178eed9a3c?s=128&d=identicon&r=PG", "display_name": "eiko", "link": "https://stackoverflow.com/users/7470620/eiko"}, "is_accepted": false, "score": 1, "last_activity_date": 1487191522, "creation_date": 1487191522, "answer_id": 42259687, "question_id": 42259107, "link": "https://stackoverflow.com/questions/42259107/run-rubyscript-without-ruby-installation/42259687#42259687", "title": "Run Rubyscript without Ruby Installation", "body": "<p>It sounds like your problems might be stemming from the fact that you're using multiple versions of ruby on the same system without a version manager. When multiple versions of ruby live on the same system, their gems and dependencies can get all criss-crossed and cause terrible problems.</p>\n\n<p>On Windows, I've had good luck with Uru: <a href=\"https://bitbucket.org/jonforums/uru\" rel=\"nofollow noreferrer\">https://bitbucket.org/jonforums/uru</a></p>\n\n<p>Also, you may want to consider installing gems using the bundle gem, which will keep them encapsulated to specific projects and specific ruby versions.</p>\n\n<p>That all being said, if you want to get your scripts to run as a self-contained executable but are having trouble with dependencies and ruby versions, check out traveling ruby:</p>\n\n<p><a href=\"http://phusion.github.io/traveling-ruby/\" rel=\"nofollow noreferrer\">http://phusion.github.io/traveling-ruby/</a></p>\n\n<p>It works very much like a starpack in that all your scripts are wrapped up with the proper version of ruby, so users needn't install anything and you needn't wrestle with compilation or installing ruby on your own system.</p>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 4451654, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xJHBCnWzbfY/AAAAAAAAAAI/AAAAAAAAAEo/tjLW-EdGx4I/photo.jpg?sz=128", "display_name": "logic error", "link": "https://stackoverflow.com/users/4451654/logic-error"}, "is_accepted": false, "score": 0, "last_activity_date": 1487629155, "creation_date": 1487629155, "answer_id": 42355245, "question_id": 42259107, "link": "https://stackoverflow.com/questions/42259107/run-rubyscript-without-ruby-installation/42355245#42355245", "title": "Run Rubyscript without Ruby Installation", "body": "<p>My apologies for late response, lost my RubyScript.exe creation enviornment.\nNow re-setup on Toshiba, 64-bit, Windows10 pro. Using Ruby:\nruby 2.3.3p222 (2016-11-21 revision 56859) [i386-mingw32]\nI got this non-Tk console application to build with ocra:</p>\n\n<pre><code>enter code here \nirb\n</code></pre>\n\n<p>using command:</p>\n\n<pre><code>enter code here \nocra throwRUBYconsole.rb\n</code></pre>\n\n<p>in the 'start'.bat form of a windows terminal, on the desktop, It of course does not work\non my non-ruby enviornment machine (same win 10 setup on a gateway). Reading ocra documentation,\nocra source. Reading traveling ruby, same. Have (lost my list will try to remember) Darb, rubyscript2exe,\nexerb to go thru, This will take a bit of time.</p>\n\n<p>Here is my Tk test application:</p>\n\n<pre><code>enter code here \nrequire 'tk'\nrequire 'tkextlib/tile'\n\nroot = TkRoot.new {title \"Lightyears to Parsecs\"}\ncontent = Tk::Tile::Frame.new(root) {padding \"3 3 12 12\"}.grid( :sticky =&gt;     'nsew')\nTkGrid.columnconfigure root, 0, :weight =&gt; 1; TkGrid.rowconfigure root, 0,   :weight =&gt; 1\n\n$lightyears = TkVariable.new; $parsecs = TkVariable.new\nf = Tk::Tile::Entry.new(content) {width 13; textvariable $lightyears}.grid(   :column =&gt; 2, :row =&gt; 1, :sticky =&gt; 'we' )\nTk::Tile::Label.new(content) {textvariable $parsecs}.grid( :column =&gt; 2,  :row =&gt; 2, :sticky =&gt; 'we');\nTk::Tile::Button.new(content) {text 'Calculate'; command {calculate}}.grid(  :column =&gt; 3, :row =&gt; 3, :sticky =&gt; 'w')\n\nTk::Tile::Label.new(content) {text 'lightyears'}.grid( :column =&gt; 3, :row =&gt;    1, :sticky =&gt; 'w')\nTk::Tile::Label.new(content) {text 'is equivalent to'}.grid( :column =&gt; 1, :row =&gt; 2, :sticky =&gt; 'e')\nTk::Tile::Label.new(content) {text 'parsecs'}.grid( :column =&gt; 3, :row =&gt; 2, :sticky =&gt; 'w')\n\nTkWinfo.children(content).each {|w| TkGrid.configure w, :padx =&gt; 5, :pady =&gt; 5}\nf.focus\nroot.bind(\"Return\") {calculate}\n\ndef calculate\n  begin\n     $parsecs.value = (0.30659458*$lightyears*10000.0).round()/10000.0\n  rescue\n     $parsecs.value = ''\n  end\nend\n\nTk.mainloop\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 4451654, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xJHBCnWzbfY/AAAAAAAAAAI/AAAAAAAAAEo/tjLW-EdGx4I/photo.jpg?sz=128", "display_name": "logic error", "link": "https://stackoverflow.com/users/4451654/logic-error"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 444, "favorite_count": 0, "answer_count": 2, "score": -3, "last_activity_date": 1487629155, "creation_date": 1487189534, "question_id": 42259107, "link": "https://stackoverflow.com/questions/42259107/run-rubyscript-without-ruby-installation", "title": "Run Rubyscript without Ruby Installation", "body": "<p>Not entirely new to ruby, but hardly proficient at it. My goal is to set up \na similar condition to ruby as I have with Tcl, running scripts that do not require\nthe language download and installation. This is done fairly well with the \nTool Command Language (Tcl) Via the Tcl3dsh-win32-0.5.0 starpack, running almost \nevery Tcl application very well, with out the need for prior Tcl installation on the \nlet's just call it windows10 I guess. Now why did I want the Ruby1.8.6, for the OpenGL\nand Glut library capabitities i believe it was, and perhaps referenced from some link\nsomewhere in regards to getting the 'rubyscript2exe' interpreter-bundler-compiler?\nto work. It's my understanding that rubyscript2exe is outdated for the newer ruby installs.\nI have never got it to create and executable bundled-thing whatever. \n So I tried the 'ocra', this I got to create just one and only one exe of: \n    puts 'Hello ocra ruby.'\n    sleep 4.5\nthat did create a nice little stand alone ruby executable-like application that did indeed\nrun when exported to the windows10 system devoid of any ruby installations.\nThats where it ended, at that time on the development machine where I was creating the ruby\nexecutable-like applications I had installed the version 'ruby193' VIA one-click installer executable\nselecting all the options and associations with the TK included checked.\nIt installed itself in my C: root in directory 'ruby193', where the batch files and other files referencing\nthe 'ocra' gem ( and the 'rubyscript2exe') now reside.\nOcra executable ruby applications, the one that did work and the others that did not were ran from the desktop\nvia a command-line console created with a 'start' command wrote in a .bat file, thats how I been doing my\ncommand-line stuff. The 'hello world' .rb did work but anything with the tk threw that:\n'Tk85.dll is missing not found error'. Fairly positive that was the error,\nhaven't been as scientific as I should be taking notes of every detail of the adventure.\n So tried the 'rubyscript2exe' gem no luck, referenced the 'use it with the ruby186 version' advice.\nI havent seen my OpenGL ruby applications running in awhile so what-the-hey. I downloaded the ruby186 on top\nof the existing ruby193 VIA the ruby186 one-click installer executable. It built itself in the root alongside \nthe 'ruby193' directory in a directory labled just 'ruby', noting during installation that it had no Tk installation\nassociations or bindings. Saying to myself well this isn't going to work either is it.\nI remember the 'rubyscript2exe' application having Tk specific compile instuctions, in the documentation, which I followed \n(which did not work for me). Just skimmed the Ocra documentation again, I don't see reference to Tk specific. Perhaps in the \nadding libraries and I am missing it, as I stated I am hardly proficient at all this, but really do try hard. </p>\n\n<p>my question: How shall I proceed with the aim of creating a ruby executable-like program that runs on a \nwindows-10-ish system capable of running the Tk GUI, (I will start with the Tk GUI, if i get that up and running\nI can then progress to attempting the OpenGL GLUT shader stuff next). Tk should be current, so I imagine \nmy focus would be getting the ocra gem to work with Tk, I did also do the compile-like command, in my start.bat\nconsole, as per ocra documentations instructions:  <a href=\"https://github.com/larsch/ocra\" rel=\"nofollow noreferrer\">https://github.com/larsch/ocra</a>  and\n<a href=\"http://ocra.rubyforge.org/\" rel=\"nofollow noreferrer\">http://ocra.rubyforge.org/</a>\nocra whateverscript.rb\nand with variants similar to how it was to be done when using the 'rubyscript2exe' + '-ocra--tk' I think,\nidda know what I did, got upset. Any thoughts?</p>\n\n<p>This is my first-ever question posted, please forgive my inexperience and the verbose nature of it in my attempt to be\nthorough.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "macos", "rvm"], "answers": [{"tags": [], "owner": {"reputation": 41846, "user_id": 926143, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/3396173c3d22988be1a0732d184902aa?s=128&d=identicon&r=PG", "display_name": "7stud", "link": "https://stackoverflow.com/users/926143/7stud"}, "is_accepted": false, "score": 0, "last_activity_date": 1487191060, "last_edit_date": 1495541360, "creation_date": 1487189985, "answer_id": 42259234, "question_id": 42258887, "link": "https://stackoverflow.com/questions/42258887/system-cant-see-rails-or-other-gems-says-rails-is-not-currently-installed-on-t/42259234#42259234", "title": "System can&#39;t see Rails or other gems says &quot;Rails is not currently installed on this system&quot;", "body": "<blockquote>\n  <p>Rails is not currently installed on this system. To get the latest\n  version, simply type:</p>\n\n<pre><code>$ sudo gem install rails\n</code></pre>\n  \n  <p>You can then rerun your \"rails\" command.</p>\n</blockquote>\n\n<hr>\n\n<blockquote>\n  <p>Well that's just silly. Rails was just here a moment ago.</p>\n</blockquote>\n\n<p>First a warning: NEVER use <code>sudo</code> with rvm.</p>\n\n<p>With rvm, there are two things that you need to pay attention to:</p>\n\n<ol>\n<li>The ruby version.</li>\n<li>The gemset.</li>\n</ol>\n\n<p>A gemset is like a self contained package with certain gems in it.  To <em>see</em> those gems, you have to be <em>using</em> that gemset.  If you are using a different gemset, then you will <em>see</em> different gems.</p>\n\n<p>In order to verify that a gem is contained in the gemset that is currently selected, you can do this:</p>\n\n<pre><code>$ gem list\n</code></pre>\n\n<p>For general instructions on how to use rvm wtih rails and various gemsets, see here:</p>\n\n<p><a href=\"https://stackoverflow.com/questions/18290080/change-rails-version-used-by-rvm/18290486\">Change rails version used by rvm</a></p>\n\n<blockquote>\n  <p>Interestingly enough, I am also unable to install the latest version\n  of Ruby (2.4.0).</p>\n</blockquote>\n\n<p>Your output shows that rvm is having trouble compiling <code>zlib</code>.  It appears that the rbenv crowd is also having some problems compiling zlib on OSX.  You might want to try their fix:</p>\n\n<p><a href=\"https://github.com/rbenv/ruby-build/issues/832\" rel=\"nofollow noreferrer\">https://github.com/rbenv/ruby-build/issues/832</a></p>\n"}, {"comments": [{"owner": {"reputation": 1334, "user_id": 5009528, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zuERK.png?s=128&g=1", "display_name": "richardsonae", "link": "https://stackoverflow.com/users/5009528/richardsonae"}, "edited": false, "score": 0, "creation_date": 1487260988, "post_id": 42259359, "comment_id": 71714237, "body": "Thanks for the heads up on gpg2! @Glyoko"}], "tags": [], "owner": {"reputation": 1843, "user_id": 4067720, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a52c645614505bcaeb65a6c5199158c1?s=128&d=identicon&r=PG", "display_name": "Glyoko", "link": "https://stackoverflow.com/users/4067720/glyoko"}, "is_accepted": false, "score": 0, "last_activity_date": 1487190410, "creation_date": 1487190410, "answer_id": 42259359, "question_id": 42258887, "link": "https://stackoverflow.com/questions/42258887/system-cant-see-rails-or-other-gems-says-rails-is-not-currently-installed-on-t/42259359#42259359", "title": "System can&#39;t see Rails or other gems says &quot;Rails is not currently installed on this system&quot;", "body": "<p>Rvm had <a href=\"https://github.com/rvm/rvm/issues/3748\" rel=\"nofollow noreferrer\">this issue</a> not too long ago. It predates ruby 2.4.0, but maybe you're getting the same problem here? I suspect you're running an older install if you're running OS X 10.9. The solution recommended on that issue is to simply update your rvm with</p>\n\n<pre><code>rvm get master\n</code></pre>\n\n<p>I would try running that and then retrying your rvm commands.</p>\n\n<p>Sidenote: pgp verification is now mandatory with rvm, so you may need to run</p>\n\n<pre><code>gpg2 --keyserver hkp://keys.gnupg.net --recv-keys 409B6B1796C275462A1703113804BB82D39DC0E3\n</code></pre>\n\n<p>first.</p>\n"}], "owner": {"reputation": 1334, "user_id": 5009528, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zuERK.png?s=128&g=1", "display_name": "richardsonae", "link": "https://stackoverflow.com/users/5009528/richardsonae"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 194, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1487271966, "creation_date": 1487188699, "last_edit_date": 1592644375, "question_id": 42258887, "link": "https://stackoverflow.com/questions/42258887/system-cant-see-rails-or-other-gems-says-rails-is-not-currently-installed-on-t", "title": "System can&#39;t see Rails or other gems says &quot;Rails is not currently installed on this system&quot;", "body": "<p>System: OSX 10.9.5, Rails 4.0.12</p>\n<p>After cloning a repo for a demo app (Ruby 2.1.5, Rails 4.1.0), I used rvm to install and then switch to an older version of Ruby, so I could run the demo app. I had some issues running the demo app, so I went back to my main project app (Ruby 2.2.4, Rails 4.0.12), tried to run <code>rails s</code> and got:</p>\n<pre><code>Rails is not currently installed on this system. To get the latest version, simply type:\n\n    $ sudo gem install rails\n\nYou can then rerun your &quot;rails&quot; command.\n</code></pre>\n<p>Well that's just silly. Rails was just here a moment ago. I tried switching gemsets within Ruby 2.2.4, even closing terminal in between, but still Rails was &quot;not installed&quot;. These are my gemsets:</p>\n<pre><code>gemsets for ruby-2.0.0-p481 (found in /Users/localflavor/.rvm/gems/ruby-2.0.0-p481)\n=&gt; (default)\n   global\n\ngemsets for ruby-2.1.5 (found in /Users/localflavor/.rvm/gems/ruby-2.1.5)\n=&gt; (default)\n   global\n\ngemsets for ruby-2.2.1 (found in /Users/localflavor/.rvm/gems/ruby-2.2.1)\n=&gt; (default)\n   global    \n\ngemsets for ruby-2.2.2 (found in /Users/localflavor/.rvm/gems/ruby-2.2.2)\n=&gt; (default)\n   global\n\ngemsets for ruby-2.2.4 (found in /Users/localflavor/.rvm/gems/ruby-2.2.4)\n=&gt; (default)\n   global\n\ngemsets for ruby-2.3.0 (found in /Users/localflavor/.rvm/gems/ruby-2.3.0)\n=&gt; (default)\n   global\n</code></pre>\n<p>The gems included in ruby2.2.4@default:</p>\n<pre><code>$ gem list\n*** LOCAL GEMS ***\nbigdecimal (default: 1.2.6)\ngem-wrappers (1.2.7)\nio-console (default: 0.4.3)\njson (default: 1.8.1)\nminitest (5.4.3)\npower_assert (0.2.2)\npsych (default: 2.0.8)\nrake (default: 10.4.2)\nrdoc (default: 4.2.0)\nrvm (1.11.3.9)\ntest-unit (3.0.8)\n</code></pre>\n<p>The gems included in ruby-2.2.4@global</p>\n<pre><code>$ gem list\n*** LOCAL GEMS ***\nbigdecimal (default: 1.2.6)\ngem-wrappers (1.2.7)\nio-console (default: 0.4.3)\njson (default: 1.8.1)\nminitest (5.4.3)\npower_assert (0.2.2)\npsych (default: 2.0.8)\nrake (default: 10.4.2)\nrdoc (default: 4.2.0)\nrvm (1.11.3.9)\ntest-unit (3.0.8)\n</code></pre>\n<p>Rails, where are you? I've tried <code>rvm get master</code>, reinstalling ruby 2.2.4, openssl, and bundler. I've tried every solution that seemed relevant from <a href=\"https://stackoverflow.com/questions/7788946/rails-keeps-telling-me-that-its-not-currently-installed\">this SO question</a>. All of this to no avail.</p>\n<p>Interestingly enough, I am also unable to install the latest version of Ruby (2.4.0).</p>\n<pre><code>$ rvm install ruby 2.4.0\nruby-2.4.0 - #removing src/ruby-2.4.0..\nSearching for binary rubies, this might take some time.\nNo binary rubies available for: osx/10.9/x86_64/ruby-2.4.0.\nContinuing with compilation. Please read 'rvm help mount' to get more information on binary rubies.\nChecking requirements for osx.\nCertificates in '/usr/local/etc/openssl/cert.pem' are already up to date.\nRequirements installation successful.\nInstalling Ruby from source to: /Users/localflavor/.rvm/rubies/ruby-2.4.0, this may take a while depending on your cpu(s)...\nruby-2.4.0 - #downloading ruby-2.4.0, this may take a while depending on your connection...\nruby-2.4.0 - #extracting ruby-2.4.0 to /Users/localflavor/.rvm/src/ruby-2.4.0....\nruby-2.4.0 - #configuring...................................................................\nruby-2.4.0 - #post-configuration.\nruby-2.4.0 - #compiling....................\nError running '__rvm_make -j 1',\nshowing last 15 lines of /Users/localflavor/.rvm/log/1487187741_ruby-2.4.0/make.log\nconfiguring pty\nconfiguring racc/cparse\nconfiguring rbconfig/sizeof\nconfiguring readline\nconfiguring ripper\nconfiguring rubyvm\nconfiguring sdbm\nconfiguring socket\nconfiguring stringio\nconfiguring strscan\nconfiguring syslog\nconfiguring zlib\nexts.mk:1471: *** commands commence before first target.  Stop.\nmake: *** [build-ext] Error 2\n++ return 2\nThere has been an error while running make. Halting the installation.\n \n</code></pre>\n<p>I'm assuming Rails is here, just not being seen. Just like bundler and openssl. Something is up and I don't know where else to look. How can I find it and get it back in action?</p>\n<hr />\n<h1><strong>UPDATE</strong></h1>\n<p>Though my SSL issues are still unresolved, I was able to do this workaround to get Rails up and running again (thanks <a href=\"https://stackoverflow.com/users/7576882/kevin-t\">Kevin-T</a>!)</p>\n<p>Since Rails was missing from both gemsets for ruby 2.2.4 (thanks <a href=\"https://stackoverflow.com/a/42259234/5009528\">7stud</a> for the gem list pointers), I needed to reinstall it. But I was getting this error when I ran <code>gem install rails -v 4.0.12</code></p>\n<pre><code>ERROR:  While executing gem ... (Gem::Exception)\n    Unable to require openssl, install OpenSSL and rebuild ruby (preferred) or use non-HTTPS sources\n</code></pre>\n<p>So I chose option 2: use a non-HTTPS source. In order to do that, I ran <code>gem source</code> to confirm that my source was <code>https</code>:</p>\n<pre><code>*** CURRENT SOURCES ***\n\nhttps://rubygems.org/\n</code></pre>\n<p>I added the new <code>http</code> version with <code>gem source --add http://rubygems.org</code> :</p>\n<pre><code>https://rubygems.org is recommended for security over http://rubygems.org\n\nDo you want to add this insecure source? [yn]  y  &lt;-- I said yes\nhttp://rubygems.org added to sources\n</code></pre>\n<p>I checked that it was added with <code>gem source</code>:</p>\n<pre><code>*** CURRENT SOURCES ***\n\nhttps://rubygems.org/\nhttp://rubygems.org &lt;-- the new one\n</code></pre>\n<p>Then removed the <code>https</code> one with <code>gem source --remove https://rubygems.org/</code>:</p>\n<pre><code>https://rubygems.org/ removed from sources\n</code></pre>\n<p>At this point, running <code>gem install rails -v 4.0.12</code> worked. Check out <a href=\"https://stackoverflow.com/questions/1381725/how-to-make-no-ri-no-rdoc-the-default-for-gem-install\">this post</a>  to install without the bulky documentation.</p>\n"}, {"tags": ["ruby", "unit-testing"], "comments": [{"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 1, "creation_date": 1487183058, "post_id": 42257190, "comment_id": 71672239, "body": "Well, I&#39;d start with learning how to compute binary representations of positive and negative numbers. Then implement your conversion. And test against ruby&#39;s logic. Simple as that."}, {"owner": {"reputation": 3236, "user_id": 456735, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/5f57871af762854c5d9883ffd393c38d?s=128&d=identicon&r=PG", "display_name": "Anand", "link": "https://stackoverflow.com/users/456735/anand"}, "reply_to_user": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1487183365, "post_id": 42257190, "comment_id": 71672421, "body": "@SergioTulentsev - I will clarify my question - I know how to compute binary representations of positive and negative numbers - the problem is specific to ruby, being dynamically typed, that it does not internally have a specific size (in bytes) for an integer. The size itself seems to grow with the integer (integers can be arbitrarily large, and ruby grows to support them limited only by memory). The way to compute the binary representation for various sizes <b>is</b> what I do in the function above. How do I now <i>verify</i> its accuracy?"}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 1, "creation_date": 1487184144, "post_id": 42257190, "comment_id": 71672932, "body": "Put the clarification into your question, inserting it where you would have if you&#39;d entered it initially. <i>Don&#39;t use &quot;updated&quot; or &quot;edited&quot; tags</i>. We can tell what was added if necessary. This way everyone will see the information without having to read every comment."}, {"owner": {"reputation": 3236, "user_id": 456735, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/5f57871af762854c5d9883ffd393c38d?s=128&d=identicon&r=PG", "display_name": "Anand", "link": "https://stackoverflow.com/users/456735/anand"}, "reply_to_user": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 1, "creation_date": 1487184701, "post_id": 42257190, "comment_id": 71673290, "body": "@theTinMan - I would like to do that too - I have done that in the past, but sometimes responders don&#39;t like that, since their older answers can get out of sync with the question - by having a &#39;revision history&#39; in the question, users can map responses over time better."}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 1, "creation_date": 1487268906, "post_id": 42257190, "comment_id": 71719905, "body": "All questions and answers have a built-in revision system that is automatically applied, which is why using &quot;edited&quot; and &quot;updated&quot; tags are NOT wanted. Access to that revision history is based on a users reputation. See <a href=\"http://stackoverflow.com/help/privileges\">stackoverflow.com/help/privileges</a>. Also read <a href=\"http://meta.stackexchange.com/a/127655/153968\">meta.stackexchange.com/a/127655/153968</a>"}], "answers": [{"comments": [{"owner": {"reputation": 3236, "user_id": 456735, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/5f57871af762854c5d9883ffd393c38d?s=128&d=identicon&r=PG", "display_name": "Anand", "link": "https://stackoverflow.com/users/456735/anand"}, "edited": false, "score": 0, "creation_date": 1487183896, "post_id": 42257412, "comment_id": 71672769, "body": "Yes, I agree - with specific inputs including edge cases, this would work. I prefer to use random values whenever possible, though. I think one trend in testing encourages random value testing, precisely because we cannot trust ourselves to anticipate the right set of cases (Netflix&#39;s chaos monkey is an example: <a href=\"http://techblog.netflix.com/2012/07/chaos-monkey-released-into-wild.html\" rel=\"nofollow noreferrer\">techblog.netflix.com/2012/07/&hellip;</a>)"}, {"owner": {"reputation": 208794, "user_id": 229044, "user_type": "moderator", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/591426cbbacd4025d920467bad356911?s=128&d=identicon&r=PG&f=1", "display_name": "meagar", "link": "https://stackoverflow.com/users/229044/meagar"}, "reply_to_user": {"reputation": 3236, "user_id": 456735, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/5f57871af762854c5d9883ffd393c38d?s=128&d=identicon&r=PG", "display_name": "Anand", "link": "https://stackoverflow.com/users/456735/anand"}, "edited": false, "score": 3, "creation_date": 1487184003, "post_id": 42257412, "comment_id": 71672831, "body": "@Anand Using random inputs and <i>computing</i> the expected outputs defeats the point of writing tests. Now, you have two implementations that you&#39;re testing against each other, instead of testing one implementation against known good values. Now, your tests need tests."}, {"owner": {"reputation": 208794, "user_id": 229044, "user_type": "moderator", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/591426cbbacd4025d920467bad356911?s=128&d=identicon&r=PG&f=1", "display_name": "meagar", "link": "https://stackoverflow.com/users/229044/meagar"}, "reply_to_user": {"reputation": 3236, "user_id": 456735, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/5f57871af762854c5d9883ffd393c38d?s=128&d=identicon&r=PG", "display_name": "Anand", "link": "https://stackoverflow.com/users/456735/anand"}, "edited": false, "score": 2, "creation_date": 1487184079, "post_id": 42257412, "comment_id": 71672889, "body": "@Anand That said, there is a time and place for randomized testing, and it isn&#39;t unit testing. Chaos Monkey operates <i>orders of magnitude</i> higher up the stack than simple unit tests. Randomized testing is a good way of insuring you <i>miss</i> the edge cases that are the most valuable cases to cover."}, {"owner": {"reputation": 3236, "user_id": 456735, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/5f57871af762854c5d9883ffd393c38d?s=128&d=identicon&r=PG", "display_name": "Anand", "link": "https://stackoverflow.com/users/456735/anand"}, "edited": false, "score": 0, "creation_date": 1487184559, "post_id": 42257412, "comment_id": 71673201, "body": "I hear you - and I would tend to agree, in most cases. But I still feel there are some scenarios in unit testing that could benefit from randomized testing. This example here seems right on the fence :-)"}, {"owner": {"reputation": 208794, "user_id": 229044, "user_type": "moderator", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/591426cbbacd4025d920467bad356911?s=128&d=identicon&r=PG&f=1", "display_name": "meagar", "link": "https://stackoverflow.com/users/229044/meagar"}, "reply_to_user": {"reputation": 3236, "user_id": 456735, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/5f57871af762854c5d9883ffd393c38d?s=128&d=identicon&r=PG", "display_name": "Anand", "link": "https://stackoverflow.com/users/456735/anand"}, "edited": false, "score": 2, "creation_date": 1487184987, "post_id": 42257412, "comment_id": 71673465, "body": "@Anand I completely disagree. There is generally no value to randomized inputs in unit testing, and <i>absolutely</i> no value in this case. You need about 12 cases to be completely confident in this method, and using randomized ones offers <i>no</i> additional confidence."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 2, "creation_date": 1487186757, "post_id": 42257412, "comment_id": 71674429, "body": "Edge cases are where testing lives or dies. Know your boundaries and test them aggressively. Examine the code to see where it branches and exercise every branch. Use a coverage tool if you need to if that helps ensure you don&#39;t miss things. Randomized testing (e.g. fuzzing) is an important part of testing, but it&#39;s not the first approach you should take. You <i>need</i> known-good outputs that exercise all of your boundary conditions."}, {"owner": {"reputation": 3236, "user_id": 456735, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/5f57871af762854c5d9883ffd393c38d?s=128&d=identicon&r=PG", "display_name": "Anand", "link": "https://stackoverflow.com/users/456735/anand"}, "edited": false, "score": 0, "creation_date": 1487186779, "post_id": 42257412, "comment_id": 71674444, "body": "@meagar There are several benefits I have personally experienced in using randomized inputs over only using static inputs in unit testing. Anyway, I don&#39;t want to debate here - maybe I&#39;ll summarize somewhere else and share a link at some time."}, {"owner": {"reputation": 3236, "user_id": 456735, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/5f57871af762854c5d9883ffd393c38d?s=128&d=identicon&r=PG", "display_name": "Anand", "link": "https://stackoverflow.com/users/456735/anand"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1487187035, "post_id": 42257412, "comment_id": 71674581, "body": "@tadman I agree - I am only suggesting randomized testing in addition to static testing including all conceivable edge cases (coverage is moot here as I am doing test first development) - my question was about <i>how</i> to do that (randomized testing) in this case, but somehow this has turned into a debate of whether or not we <i>should</i> do randomized testing :-)"}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1487187513, "post_id": 42257412, "comment_id": 71674811, "body": "Either you&#39;re talking about fuzzing, something done to shake out bugs by throwing in unexpected data, or you&#39;re talking about what meagar has already pointed out: Writing test code that re-implements the desired behaviour to verify the desired behaviour. You&#39;re comparing implementation A to implementation B which, while useful in some cases, is not how you test your first implementation."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "reply_to_user": {"reputation": 3236, "user_id": 456735, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/5f57871af762854c5d9883ffd393c38d?s=128&d=identicon&r=PG", "display_name": "Anand", "link": "https://stackoverflow.com/users/456735/anand"}, "edited": false, "score": 2, "creation_date": 1487187613, "post_id": 42257412, "comment_id": 71674861, "body": "@Anand Sometimes I do generate lots of random data, run it through a tested, working version of a method, and freeze the output (e.g. YAML or JSON structure). Then I build tests around that to avoid regressions when doing things like optimizing the code. This avoids double-implementing, you&#39;re just comparing your current implementation to your historical one on the basis that the historical one has already been proven correct."}, {"owner": {"reputation": 3236, "user_id": 456735, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/5f57871af762854c5d9883ffd393c38d?s=128&d=identicon&r=PG", "display_name": "Anand", "link": "https://stackoverflow.com/users/456735/anand"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1487187801, "post_id": 42257412, "comment_id": 71674971, "body": "@tadman I like that approach - and I agree with the point (and meagar&#39;s related point) about the risks of double-implementing or computing the expected result in the random case."}], "tags": [], "owner": {"reputation": 208794, "user_id": 229044, "user_type": "moderator", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/591426cbbacd4025d920467bad356911?s=128&d=identicon&r=PG&f=1", "display_name": "meagar", "link": "https://stackoverflow.com/users/229044/meagar"}, "is_accepted": false, "score": 6, "last_activity_date": 1487191367, "last_edit_date": 1487191367, "creation_date": 1487183518, "answer_id": 42257412, "question_id": 42257190, "link": "https://stackoverflow.com/questions/42257190/how-to-unit-test-binary-string-representations-of-signed-integers-with-various-l/42257412#42257412", "title": "How to unit test binary string representations of signed integers with various lengths in ruby?", "body": "<p>Don't test random arbitrary values in your unit tests. Pick a set of inputs to test against their known expected outputs. Include edge cases. Add additional test cases as they come up in production to insure you don't introduce regressions.</p>\n\n<p>In the simplest terms, build a hash of inputs to expected values, and then iterate over the hash and assert that the actual value equals the expected value.</p>\n"}], "owner": {"reputation": 3236, "user_id": 456735, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/5f57871af762854c5d9883ffd393c38d?s=128&d=identicon&r=PG", "display_name": "Anand", "link": "https://stackoverflow.com/users/456735/anand"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 70, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1487191367, "creation_date": 1487182780, "question_id": 42257190, "link": "https://stackoverflow.com/questions/42257190/how-to-unit-test-binary-string-representations-of-signed-integers-with-various-l", "title": "How to unit test binary string representations of signed integers with various lengths in ruby?", "body": "<p>I wanted to write a test to verify binary string representations of signed integers with various lengths. I do not know how to compute the expected values for random positive and negative integers represented as binary strings, with different binary lengths (8,16,32, 64). So far I have a test that just prints out the values for inspection. </p>\n\n<p>Below are the test (which just prints out the result, with no assertions) and the function:</p>\n\n<pre><code># test\n\ndef test_binary_string_with_length\n  10.times do \n    n = -rand(128)\n    puts \"n: #{n} -&gt; bin8: #{binary_string_with_length(n, 8)}\"\n\n    n = rand(256)\n    puts \"n: #{n} -&gt; bin8: #{binary_string_with_length(n, 8)}\"\n\n    n = -rand(2 ** 15) \n    puts \"n: #{n} -&gt; bin16: #{binary_string_with_length(n, 16)}\"\n\n    n = rand(2 ** 16) \n    puts \"n: #{n} -&gt; bin16: #{binary_string_with_length(n, 16)}\"\n\n    n = -rand(2 ** 31)\n    puts \"n: #{n} -&gt; bin32: #{binary_string_with_length(n, 32)}\"\n\n    n = rand(2 ** 32)\n    puts \"n: #{n} -&gt; bin32: #{binary_string_with_length(n, 32)}\"\n\n    n = -rand(2 ** 63)\n    puts \"n: #{n} -&gt; bin64: #{binary_string_with_length(n, 64)}\"\n\n    n = rand(2 ** 64)\n    puts \"n: #{n} -&gt; bin64: #{binary_string_with_length(n, 64)}\"\n  end\nend\n\n# function\n\ndef binary_string_with_length(n, int_length_in_bits)\n  pack = 'Q' # default is 64 bit\n  case int_length_in_bits\n  when 8\n    pack = 'C'\n  when 16\n    pack = 'S'\n  when 32\n    pack = 'L'\n  when 64\n    pack = 'Q'\n  end\n  sprintf('%b', [n].pack(pack).unpack(pack)[0])\nend\n</code></pre>\n\n<p>How do I write assertions to validate that each string representation is correct?</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 3, "creation_date": 1487180498, "post_id": 42256474, "comment_id": 71670667, "body": "What is <code>car_brands</code>?"}, {"owner": {"reputation": 483, "user_id": 7474561, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc0cb51bd61ff4715e3bec92f79f5f46?s=128&d=identicon&r=PG&f=1", "display_name": "KcUS_unico", "link": "https://stackoverflow.com/users/7474561/kcus-unico"}, "edited": false, "score": 0, "creation_date": 1487181003, "post_id": 42256474, "comment_id": 71671000, "body": "&amp;:HONDA should be a column name in your example. So with &amp;:something you map column name which I think in your case would be car_honda, really"}, {"owner": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "edited": false, "score": 1, "creation_date": 1487181040, "post_id": 42256474, "comment_id": 71671027, "body": "What do you want to achieve?"}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 2, "creation_date": 1487181146, "post_id": 42256474, "comment_id": 71671107, "body": "<code>&amp;:HONDA</code> or <code>c.HONDA</code> would work if <code>HONDA</code> is a method, but we don&#39;t name methods with a starting capital letter. <code>honda</code> would be appropriate. <code>&amp;:Car_honda</code> would not be appropriate either, for the same reason. As a result, it looks like you don&#39;t understand how we define variables, methods and constants in Ruby."}, {"owner": {"reputation": 208794, "user_id": 229044, "user_type": "moderator", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/591426cbbacd4025d920467bad356911?s=128&d=identicon&r=PG&f=1", "display_name": "meagar", "link": "https://stackoverflow.com/users/229044/meagar"}, "edited": false, "score": 2, "creation_date": 1487181166, "post_id": 42256474, "comment_id": 71671121, "body": "Unrelated to your problem, but you probably shouldn&#39;t have car brands defined as constants. Adding or removing brands should not involve changing your code. <code>Brand</code> should be a model, which maps to a table called <code>brands</code>."}, {"owner": {"reputation": 12022, "user_id": 419017, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/Y6Frk.jpg?s=128&g=1", "display_name": "Damien Roche", "link": "https://stackoverflow.com/users/419017/damien-roche"}, "edited": false, "score": 3, "creation_date": 1487181301, "post_id": 42256474, "comment_id": 71671192, "body": "Building on Tin Man&#39;s comment - go read a basic tutorial on Ruby and perhaps pick up a friendly book. There is most definitely a saner way to do what you are attempting to do."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1487189463, "post_id": 42256474, "comment_id": 71675932, "body": "Using a constant like <code>HONDA</code> is really broken design. <code>:honda</code> as a canonical representation of that brand is better. <code>BRANDS = [ :honda ]</code> and so on."}], "answers": [{"comments": [{"owner": {"reputation": 483, "user_id": 7474561, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc0cb51bd61ff4715e3bec92f79f5f46?s=128&d=identicon&r=PG&f=1", "display_name": "KcUS_unico", "link": "https://stackoverflow.com/users/7474561/kcus-unico"}, "edited": false, "score": 0, "creation_date": 1487180733, "post_id": 42256539, "comment_id": 71670826, "body": "Car.where(car_brands: &quot;HONDA&quot;).map(&amp;:id) gives you the ids of the cars where the brand is HONDA"}, {"owner": {"reputation": 483, "user_id": 7474561, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc0cb51bd61ff4715e3bec92f79f5f46?s=128&d=identicon&r=PG&f=1", "display_name": "KcUS_unico", "link": "https://stackoverflow.com/users/7474561/kcus-unico"}, "edited": false, "score": 0, "creation_date": 1487181138, "post_id": 42256539, "comment_id": 71671101, "body": "A sorry, it is not for sure. !!! ;-) This would only work if you have a column car_brands that has the value &quot;HONDA&quot;. Thanks! ;-)"}], "tags": [], "owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "is_accepted": false, "score": 0, "last_activity_date": 1487180606, "creation_date": 1487180606, "answer_id": 42256539, "question_id": 42256474, "link": "https://stackoverflow.com/questions/42256474/how-to-map-using-constants-in-ruby/42256539#42256539", "title": "How to map using constants in Ruby", "body": "<blockquote>\n  <p>Are you able to use constants with map?</p>\n</blockquote>\n\n<p>Nope. Not like this, anyhow.</p>\n\n<blockquote>\n  <p><code>car_brands.map { |c| c.HONDA }</code></p>\n</blockquote>\n\n<p>This means, for every thing in <code>car_brands</code> call <strong>method</strong> <code>HONDA</code> on it and return results of the invocations. So, unless you have method <code>HONDA</code> defined (which you absolutely shouldn't), this has no chance to work.</p>\n"}, {"comments": [{"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 1, "creation_date": 1487180846, "post_id": 42256606, "comment_id": 71670899, "body": "Do you think there is method <code>HONDA</code> defined?"}, {"owner": {"reputation": 12022, "user_id": 419017, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/Y6Frk.jpg?s=128&g=1", "display_name": "Damien Roche", "link": "https://stackoverflow.com/users/419017/damien-roche"}, "reply_to_user": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 1, "creation_date": 1487180997, "post_id": 42256606, "comment_id": 71670995, "body": "@SergioTulentsev <code>HONDA</code> is the constant that returns the string <code>Car_honda</code>, which does have a corresponding method. Also - *<code>public_send</code> is safer."}, {"owner": {"reputation": 2637, "user_id": 3223249, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Hri7E.jpg?s=128&g=1", "display_name": "Inpego", "link": "https://stackoverflow.com/users/3223249/inpego"}, "edited": false, "score": 0, "creation_date": 1487181014, "post_id": 42256606, "comment_id": 71671012, "body": "No. <code>c.send(HONDA)</code> calls method named <code>Car_honda</code> (value of <code>HONDA</code> constant): <code>HONDA = &quot;Car_honda&quot;; class Car; def Car_honda; puts &#39;Honda&#39; end end; Car.new.send(HONDA)</code>"}, {"owner": {"reputation": 3630, "user_id": 4799659, "user_type": "registered", "profile_image": "https://graph.facebook.com/10153200714295120/picture?type=large", "display_name": "fylooi", "link": "https://stackoverflow.com/users/4799659/fylooi"}, "edited": false, "score": 0, "creation_date": 1487181072, "post_id": 42256606, "comment_id": 71671057, "body": "This will only work if <code>HONDA</code> is defined in the current scope, which I doubt."}, {"owner": {"reputation": 12022, "user_id": 419017, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/Y6Frk.jpg?s=128&g=1", "display_name": "Damien Roche", "link": "https://stackoverflow.com/users/419017/damien-roche"}, "edited": false, "score": 0, "creation_date": 1487181097, "post_id": 42256606, "comment_id": 71671069, "body": "Why are we guessing where the constant is defined? Looks like this question has turned everyone into a maniac."}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 1, "creation_date": 1487181220, "post_id": 42256606, "comment_id": 71671151, "body": "@Inpego: ah, right, my bad. Still, this is terrible design. :)"}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1487184629, "post_id": 42256606, "comment_id": 71673247, "body": "The problem is, the OP doesn&#39;t show whether <code>&quot;Car_honda&quot;</code> is a method that was previously defined, or if it&#39;s only a String. If it&#39;s a method then <code>send</code> would help. If it&#39;s only a string with no method for Ruby to call then it won&#39;t work. The OP&#39;s question isn&#39;t well defined and doesn&#39;t tell us enough about the problem."}], "tags": [], "owner": {"reputation": 2637, "user_id": 3223249, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Hri7E.jpg?s=128&g=1", "display_name": "Inpego", "link": "https://stackoverflow.com/users/3223249/inpego"}, "is_accepted": true, "score": 4, "last_activity_date": 1487180812, "creation_date": 1487180812, "answer_id": 42256606, "question_id": 42256474, "link": "https://stackoverflow.com/questions/42256474/how-to-map-using-constants-in-ruby/42256606#42256606", "title": "How to map using constants in Ruby", "body": "<p>Just use <code>send</code>:</p>\n\n<pre><code>Car.where(brand: car_brands.map { |c| c.send(HONDA) })\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1487189385, "post_id": 42256662, "comment_id": 71675883, "body": "You really don&#39;t want to make it a habit of spiking in arbitrary constants on core Ruby classes with <code>const_set</code>."}, {"owner": {"reputation": 3630, "user_id": 4799659, "user_type": "registered", "profile_image": "https://graph.facebook.com/10153200714295120/picture?type=large", "display_name": "fylooi", "link": "https://stackoverflow.com/users/4799659/fylooi"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 1, "creation_date": 1487213263, "post_id": 42256662, "comment_id": 71685047, "body": "@tadman: I figured defining my own class for illustration would be overkill in this case =P. And yes, this would be a bad idea for an actual project."}], "tags": [], "owner": {"reputation": 3630, "user_id": 4799659, "user_type": "registered", "profile_image": "https://graph.facebook.com/10153200714295120/picture?type=large", "display_name": "fylooi", "link": "https://stackoverflow.com/users/4799659/fylooi"}, "is_accepted": false, "score": 0, "last_activity_date": 1487180998, "creation_date": 1487180998, "answer_id": 42256662, "question_id": 42256474, "link": "https://stackoverflow.com/questions/42256474/how-to-map-using-constants-in-ruby/42256662#42256662", "title": "How to map using constants in Ruby", "body": "<p>Constants are defined on the class, not on the object. You can invoke them through <code>.class</code>.</p>\n\n<pre><code>:005 &gt; Integer.const_set('ABC', 1)\n =&gt; 1\n:006 &gt; Integer::ABC\n =&gt; 1\n:007 &gt; [1,2,3].map {|i| i.class::ABC}\n =&gt; [1, 1, 1]\n</code></pre>\n\n<p>This will not work for your use case unless <code>car_brands</code> contains an array of different <code>Car</code> classes.</p>\n"}, {"comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1487189493, "post_id": 42259053, "comment_id": 71675945, "body": "Just because you can doesn&#39;t mean you should. This violates a lot of object-oriented design principles."}, {"owner": {"reputation": 1843, "user_id": 4067720, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a52c645614505bcaeb65a6c5199158c1?s=128&d=identicon&r=PG", "display_name": "Glyoko", "link": "https://stackoverflow.com/users/4067720/glyoko"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 1, "creation_date": 1487190523, "post_id": 42259053, "comment_id": 71676497, "body": "I very much agree. This is just how one might do it if one were set on using constants. This isn&#39;t the best way of doing things, but it&#39;s how you might do it if you were set on it. It&#39;s hard to say what the correct way of handling this is without seeing more of the app."}], "tags": [], "owner": {"reputation": 1843, "user_id": 4067720, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a52c645614505bcaeb65a6c5199158c1?s=128&d=identicon&r=PG", "display_name": "Glyoko", "link": "https://stackoverflow.com/users/4067720/glyoko"}, "is_accepted": false, "score": 0, "last_activity_date": 1487190865, "last_edit_date": 1487190865, "creation_date": 1487189370, "answer_id": 42259053, "question_id": 42256474, "link": "https://stackoverflow.com/questions/42256474/how-to-map-using-constants-in-ruby/42259053#42259053", "title": "How to map using constants in Ruby", "body": "<p>First off, you probably don't want to things this way. Perhaps it's the way your example is worded, but the only way it makes sense, as I'm reading it, is if <code>Car_brands</code> is an array of classes. And if that's the case, if doesn't make sense to have a constant called <code>HONDA</code>. If anything, you would have a constant called <code>BRAND</code> that might equal \"Honda\" for a given class. I strongly recommend you rethink your data structures before moving forward.</p>\n\n<p>All that said, you can use <code>const_get</code> to access constants using map. e.g.</p>\n\n<pre><code>class CarBrand1\n  BRAND = 'Honda'\nend\n\nclass CarBrand2\n  BRAND = 'Toyota'\nend\n\ncar_brands = [CarBrand1, CarBrand2]\n\ncar_brands.map{|car_brand| car_brand.const_get(\"BRAND\")}\ncar_brands.map{|car_brand| car_brand::BRAND} # Alternatively\n# =&gt; [\"Honda\", \"Toyota\"]\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 12022, "user_id": 419017, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/Y6Frk.jpg?s=128&g=1", "display_name": "Damien Roche", "link": "https://stackoverflow.com/users/419017/damien-roche"}, "edited": false, "score": 1, "creation_date": 1487527880, "post_id": 42259207, "comment_id": 71814345, "body": "Though it doesn&#39;t answer the question specifically, this is the cleanest and most efficient answer.. and definitely the right direction."}], "tags": [], "owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "is_accepted": false, "score": 1, "last_activity_date": 1487189907, "creation_date": 1487189907, "answer_id": 42259207, "question_id": 42256474, "link": "https://stackoverflow.com/questions/42256474/how-to-map-using-constants-in-ruby/42259207#42259207", "title": "How to map using constants in Ruby", "body": "<p>I'm not sure where you're going with this, or precisely where you're coming from, but here's an example that follows Rails conventions:</p>\n\n<pre><code>class Brand &lt; ActiveRecord::Base\n  has_many :cars\nend\n\nclass Car &lt; ActiveRecord::Base\n  belongs_to :brand\nend\n</code></pre>\n\n<p>Then you can find all cars associated with the \"Honda\" brand:</p>\n\n<pre><code>Brand.find_by(name: 'Honda').cars\n</code></pre>\n\n<p>Or find all cars matching one or more arbitrary brand names using a <code>JOIN</code> operation:</p>\n\n<pre><code>Car.joins(:brand).where(brand: { name: %w[ Honda Ford ] })\n</code></pre>\n\n<p>If you go with the flow in Rails things are a lot easier.</p>\n"}], "owner": {"reputation": 82, "user_id": 7407963, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/3e73972f9df8fd02cea426c6b6d582d8?s=128&d=identicon&r=PG&f=1", "display_name": "Ron Silson", "link": "https://stackoverflow.com/users/7407963/ron-silson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 815, "favorite_count": 0, "accepted_answer_id": 42256606, "answer_count": 5, "score": 1, "last_activity_date": 1487190865, "creation_date": 1487180403, "last_edit_date": 1487180662, "question_id": 42256474, "link": "https://stackoverflow.com/questions/42256474/how-to-map-using-constants-in-ruby", "title": "How to map using constants in Ruby", "body": "<p>I'm trying to map an array of custom values using a constant that's already defined. I'm running into some problems.</p>\n\n<p>This works perfectly:</p>\n\n<pre><code>Car.where(brand: car_brands.map(&amp;:Car_honda))\n</code></pre>\n\n<p>Although I have all the car brands already defined in my file, so I would prefer to use the constants over rewriting the names. For example:</p>\n\n<pre><code>HONDA = \"Car_honda\"\n</code></pre>\n\n<p>When I try and map this constant to the array it doesn't seem to work properly:</p>\n\n<pre><code>Car.where(brand: car_brands.map(&amp;:HONDA))\n</code></pre>\n\n<p>I tried to use a block with <code>map</code>, but I still got the same result: </p>\n\n<pre><code>Car.where(brand: car_brands.map {|c| c.HONDA}))\n</code></pre>\n\n<p>Are we able to use constants with <code>map</code>?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "background-process", "delayed-job"], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user6052428"}, "edited": false, "score": 0, "creation_date": 1487184435, "post_id": 42256413, "comment_id": 71673112, "body": "Can I access other instance methods? I could make class method that pass parameters (after timer gets to 0) to instant method and calls it. Does that make sense?"}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1487185144, "post_id": 42256413, "comment_id": 71673554, "body": "methods on which instance of what class, may I ask?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user6052428"}, "edited": false, "score": 0, "creation_date": 1487190274, "post_id": 42256413, "comment_id": 71676379, "body": "Call instance method inside class method. I&#39;ve read some things and seems like I can&#39;t do that."}, {"owner": {"user_type": "does_not_exist", "display_name": "user6052428"}, "edited": false, "score": 0, "creation_date": 1487190636, "post_id": 42256413, "comment_id": 71676549, "body": "But, now that I think of. Can I check in class method, if there is some particular record in database meeting some requirments, like date of creation within 15 minutes?"}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1487195618, "post_id": 42256413, "comment_id": 71679202, "body": "@Kappa: yep, that you can do."}], "tags": [], "owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "is_accepted": false, "score": 2, "last_activity_date": 1487180170, "creation_date": 1487180170, "answer_id": 42256413, "question_id": 42256300, "link": "https://stackoverflow.com/questions/42256300/delayed-job-passing-instance-methods-variables/42256413#42256413", "title": "delayed_job passing instance methods &amp; variables?", "body": "<blockquote>\n  <p>Any idea how to bypass that and let <code>session[:test_password]</code>...</p>\n</blockquote>\n\n<p>Nope, no way of doing that. <code>session</code> is not a simple instance methods. It gets data from cookies (by default). And cookies are inaccessible in a background worker context.</p>\n\n<p>Rule of thumb for background workers is: delayed method must receive all data it needs in its parameters.</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user6052428"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 354, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1487180170, "creation_date": 1487179796, "question_id": 42256300, "link": "https://stackoverflow.com/questions/42256300/delayed-job-passing-instance-methods-variables", "title": "delayed_job passing instance methods &amp; variables?", "body": "<p>I have a problem with getting application data from outside of self.method.</p>\n\n<p>To useModel.delay.method, the method has to be a class one.</p>\n\n<p>I really like that, it does all I need (like saving input parameters when calling method), but what I need to do is get variables from outside of method.</p>\n\n<p>For example:\nUser clicks button and starts the timer.</p>\n\n<pre><code>QuizzesController.delay(run_at: @quiz.time_limit.minutes.from_now).form_timeout(session[:user_id],session[:test_password])\n</code></pre>\n\n<p>Method form_timeout looks like this:</p>\n\n<pre><code>def self.form_timeout(id, test_password)\n  if test_password == session[:test_password]\n    Score.create(user_id: id, name: test_password, points: -1) \n    session.delete(:test_password)\n  end\nend\n</code></pre>\n\n<p>When I try to do that, I get an error \"undefined method session\" which means that I cannot reach that data when using self.method.</p>\n\n<p>Any idea how to bypass that and let <code>session[:test_password]</code> (session has to pass most up-to-date information, because I compare <code>session[:test_password]</code> from time when timer has started (old one) and from time when it ends(new one)) like i did in self.method?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "webmock"], "answers": [{"tags": [], "owner": {"reputation": 1021, "user_id": 717336, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/6d6f48e5cbaa886fb6427ecf95aa85e1?s=128&d=identicon&r=PG", "display_name": "arthur.borisow", "link": "https://stackoverflow.com/users/717336/arthur-borisow"}, "is_accepted": false, "score": 0, "last_activity_date": 1606921414, "creation_date": 1606921414, "answer_id": 65110623, "question_id": 42256225, "link": "https://stackoverflow.com/questions/42256225/mocking-certificate-using-webmock-rails/65110623#65110623", "title": "Mocking certificate using WebMock Rails", "body": "<p>I see that this is an old question but <a href=\"https://github.com/bblimke/webmock/issues/50#issuecomment-482894294\" rel=\"nofollow noreferrer\">this</a> might help</p>\n"}], "owner": {"reputation": 153, "user_id": 4481795, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d1f643dbf92a668bbd426331635c540f?s=128&d=identicon&r=PG&f=1", "display_name": "CSLser", "link": "https://stackoverflow.com/users/4481795/cslser"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 123, "favorite_count": 0, "answer_count": 1, "score": 6, "last_activity_date": 1612606689, "creation_date": 1487179560, "last_edit_date": 1612606689, "question_id": 42256225, "link": "https://stackoverflow.com/questions/42256225/mocking-certificate-using-webmock-rails", "title": "Mocking certificate using WebMock Rails", "body": "<p>I have a webscraper in ruby that analyses certificates by using this:</p>\n<pre><code>http = Net::HTTP.new(http_endpoint.host, http_endpoint.port)\nhttp.use_ssl = true\nhttp.verify_mode = OpenSSL::SSL::VERIFY_NONE\nhttp.start do |h|\n    @cert = h.peer_cert\nend\n</code></pre>\n<p>Is it possible to mock this request using webmock and give a fake certificate during testing?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "state-machine", "aasm"], "comments": [{"owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "edited": false, "score": 1, "creation_date": 1487440945, "post_id": 42255544, "comment_id": 71790800, "body": "Can you elaborate on what changes might happen to what objects and how they are connected to the state machine? An example might help to come up with a good solution. I am not sure if I agree on the <code>before_save</code>, but I agree that some kind of observer pattern is better than a cron like background job, because the observer can provide a <i>real time</i> experience, whereas a cron job will always be behind."}, {"owner": {"reputation": 287, "user_id": 5027985, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-seq7928FW9Q/AAAAAAAAAAI/AAAAAAAAAA8/TFq-VWixKiI/photo.jpg?sz=128", "display_name": "Pradeep Agrawal", "link": "https://stackoverflow.com/users/5027985/pradeep-agrawal"}, "edited": false, "score": 0, "creation_date": 1487485037, "post_id": 42255544, "comment_id": 71801614, "body": "Can you please explain a bit more about what exactly you want to do here. So that I can give you an useful answer."}, {"owner": {"reputation": 1281, "user_id": 2308531, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/DV29D.jpg?s=128&g=1", "display_name": "Maxim Fedotov", "link": "https://stackoverflow.com/users/2308531/maxim-fedotov"}, "reply_to_user": {"reputation": 287, "user_id": 5027985, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-seq7928FW9Q/AAAAAAAAAAI/AAAAAAAAAA8/TFq-VWixKiI/photo.jpg?sz=128", "display_name": "Pradeep Agrawal", "link": "https://stackoverflow.com/users/5027985/pradeep-agrawal"}, "edited": false, "score": 0, "creation_date": 1487603066, "post_id": 42255544, "comment_id": 71846905, "body": "I am just looking for a general opinion on a best practice. I&#39;ve added an example of a state machine @PradeepAgrawal"}, {"owner": {"reputation": 1281, "user_id": 2308531, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/DV29D.jpg?s=128&g=1", "display_name": "Maxim Fedotov", "link": "https://stackoverflow.com/users/2308531/maxim-fedotov"}, "reply_to_user": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "edited": false, "score": 0, "creation_date": 1487603095, "post_id": 42255544, "comment_id": 71846929, "body": "There are no dependencies, only thing would change is a state of the Model @spickermann"}, {"owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "edited": false, "score": 0, "creation_date": 1487603383, "post_id": 42255544, "comment_id": 71847102, "body": "If you do not want to call for example <code>start_onboarding</code> manually, how would you automatically decide or notice that the onboading process started or that is was completed?"}, {"owner": {"reputation": 1281, "user_id": 2308531, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/DV29D.jpg?s=128&g=1", "display_name": "Maxim Fedotov", "link": "https://stackoverflow.com/users/2308531/maxim-fedotov"}, "edited": false, "score": 0, "creation_date": 1487608256, "post_id": 42255544, "comment_id": 71850374, "body": "Well that&#39;s what I am asking? For example if <code>start_onboarding</code> is triggered by visiting some route, sure, we can call the event. But say it depends on a DB column, then we are back to my original question -&gt; Have a background job checking for column changes or a callback <code>after_commit</code> or something.  That applies to any event"}, {"owner": {"reputation": 2873, "user_id": 185870, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1196a9e29e60e7615c9f0939f8be0f28?s=128&d=identicon&r=PG", "display_name": "Teoulas", "link": "https://stackoverflow.com/users/185870/teoulas"}, "edited": false, "score": 0, "creation_date": 1487686302, "post_id": 42255544, "comment_id": 71888746, "body": "If it depends on a different attribute, the question is, would you change that attribute only when the event is triggered, or in other cases as well? In the first case, you may decide that you want the event to be the one driving both the state column change and the other attribute. You could use an after callback for that: <a href=\"https://github.com/aasm/aasm#callbacks\" rel=\"nofollow noreferrer\">github.com/aasm/aasm#callbacks</a>. In the second case, an <code>after_commit</code> with a guard would probably be better."}], "answers": [{"comments": [{"owner": {"reputation": 1281, "user_id": 2308531, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/DV29D.jpg?s=128&g=1", "display_name": "Maxim Fedotov", "link": "https://stackoverflow.com/users/2308531/maxim-fedotov"}, "edited": false, "score": 2, "creation_date": 1487693861, "post_id": 42370575, "comment_id": 71894631, "body": "Great, that&#39;s more along the lines what I am looking for. Could you go into more detail on what kind of performance degrade you saw with callbacks and live polling? Also is it just that or you think there are more downsides to using callbacks? My concern with callbacks in general, is lack of control of the execution sequence."}], "tags": [], "owner": {"reputation": 15106, "user_id": 1117851, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/9FMVK.jpg?s=128&g=1", "display_name": "itsnikolay", "link": "https://stackoverflow.com/users/1117851/itsnikolay"}, "is_accepted": true, "score": 3, "last_activity_date": 1487688609, "creation_date": 1487688609, "answer_id": 42370575, "question_id": 42255544, "link": "https://stackoverflow.com/questions/42255544/whats-the-best-way-to-automatically-change-state-in-aasm/42370575#42370575", "title": "What&#39;s the best way to automatically change state in AASM", "body": "<p>In the similar task:</p>\n\n<p>We got rid of:</p>\n\n<ul>\n<li>Callbacks to switch states because they bring performance degrade</li>\n<li>A live polling (with background jobs) because it also bring performance degrade</li>\n</ul>\n\n<p>We come to using:</p>\n\n<ul>\n<li><a href=\"https://blog.engineyard.com/2014/keeping-your-rails-controllers-dry-with-services\" rel=\"nofollow noreferrer\">Service objects</a> </li>\n<li><a href=\"https://github.com/mperham/sidekiq/wiki/Scheduled-Jobs\" rel=\"nofollow noreferrer\">Scheduled jobs</a></li>\n</ul>\n\n<p>And the code was looking something like this:</p>\n\n<pre><code>require 'active_record'\nrequire 'aasm'\nrequire 'sidekiq'\n\nclass Task &lt; ActiveRecord::Base\n  include AASM\n\n  establish_connection adapter: 'sqlite3', database: 'todo.db'\n\n  connection.create_table table_name, force: true do |t|\n    t.string   :name,       null: false\n    t.string   :aasm_state, null: false, index: true\n    t.datetime :expired_at, null: false\n  end\n\n  validates :name, :aasm_state, :expired_at, presence: true\n\n  aasm do\n    state :pending, initial: true\n    state :in_progress\n    state :completed\n    state :expired\n\n    event :run do\n      transitions to: :in_progress\n    end\n\n    event :complete do\n      transitions to: :completed\n    end\n\n    event :expire do\n      transitions to: :expired, unless: :completed?\n    end\n  end\nend\n\nclass Task::ExpireJob\n  include Sidekiq::Worker\n\n  def perform task\n    task.expire!\n  end\nend\n\nclass Task::CreationService\n  def self.create! params\n    task = Task.create! params\n    task.run!\n    Task::ExpireJob.perform_at task.expired_at, task\n    task\n  end\n\n  def self.complete! task\n    task.complete!\n    task\n  end\nend\n\ntask = Task::CreationService.create! \\\n  name:       'first',\n  expired_at: DateTime.now + 30.seconds\n\np task\np Task::CreationService.complete! task\n</code></pre>\n"}], "owner": {"reputation": 1281, "user_id": 2308531, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/DV29D.jpg?s=128&g=1", "display_name": "Maxim Fedotov", "link": "https://stackoverflow.com/users/2308531/maxim-fedotov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3299, "favorite_count": 0, "accepted_answer_id": 42370575, "answer_count": 1, "score": 3, "last_activity_date": 1487688609, "creation_date": 1487177737, "last_edit_date": 1487684985, "question_id": 42255544, "link": "https://stackoverflow.com/questions/42255544/whats-the-best-way-to-automatically-change-state-in-aasm", "title": "What&#39;s the best way to automatically change state in AASM", "body": "<p>I've been using <a href=\"https://github.com/aasm/aasm\" rel=\"nofollow noreferrer\">AASM</a> to make state machines in my current project and was wondering what's the best way to automatically call events and proceed to the next state?</p>\n\n<p>I am considering 2 ways of doing this:</p>\n\n<ol>\n<li><p>Setup a background job to periodically check if certain conditions are met, hence call the event to proceed to the next state.</p></li>\n<li><p>Have a <code>before_save</code> call a method that tries the next event in succession. With a guard on it, it won't succeed if conditions are met, otherwise, state changes and next time Model is updated, we check for a new event.</p></li>\n</ol>\n\n<p>I was leaning towards the second option as setting up a background_job queue just to transition events seems like an overkill. I couldn't find best practices regarding this, so I would love to know the best approach and why it is so?</p>\n\n<blockquote>\n  <p>Example</p>\n</blockquote>\n\n<p>For example we have <code>start_onboarding</code> and <code>complete_onboarding</code> events. I don't want to manually call these events, but I want to automatically transition between <strong>pending -> in_progress -> completed</strong> events.</p>\n\n<pre><code>  enum status: {\n    pending: 1,\n    in_progress: 2,\n    completed: 3\n  }\n\n  aasm column: :status, enum: true, whiny_transitions: false do\n    state :pending, initial: true\n    state :in_progress\n    state :completed\n\n    event :start_onboarding do\n      transitions from: :pending, to: :in_progress\n    end\n\n    event :complete_onboarding do\n      transitions from: :in_progress,\n                  to: :completed,\n                  if: :onboarding_completed?\n    end\n  end\n</code></pre>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 1, "creation_date": 1487177262, "post_id": 42255275, "comment_id": 71668374, "body": "There are some issues with your code, but what you have written works ... Can you please post exactly what you have currently, so we can <i>reproduce the error</i>?"}, {"owner": {"reputation": 836, "user_id": 129449, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6d16921ce498213f939e2383e63780ad?s=128&d=identicon&r=PG", "display_name": "lks128", "link": "https://stackoverflow.com/users/129449/lks128"}, "reply_to_user": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1487177466, "post_id": 42255275, "comment_id": 71668526, "body": "@SergioTulentsev, right, but he complains about NoMethodError, and I cannot reproduce it"}, {"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1487177476, "post_id": 42255275, "comment_id": 71668531, "body": "@SergioTulentsev This <i>might</i> be the issue... But that&#39;s not the error being described, and nor can is it what&#39;s happened in the above code example! Hence, the importance of giving a complete, reproducible example...."}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "reply_to_user": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1487177519, "post_id": 42255275, "comment_id": 71668566, "body": "@TomLord: I know, right? If only every question had a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>..."}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1487177606, "post_id": 42255275, "comment_id": 71668624, "body": "Still not enough info to reproduce the error. Make sure you see the error with <i>just</i> the code you posted in the question."}, {"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1487177710, "post_id": 42255275, "comment_id": 71668705, "body": "<code>s = Song.new(&#39;name&#39;, &#39;artist&#39;, &#39;genre&#39;); s.artists # =&gt; nil</code> ... No error, again. Please post a <b>complete</b> example, that <i>reproduces the error</i> :)"}], "answers": [{"tags": [], "owner": {"reputation": 21, "user_id": 5136798, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/efe2e0d4ab5205fe89eefa26ec6f4f6a?s=128&d=identicon&r=PG&f=1", "display_name": "rees", "link": "https://stackoverflow.com/users/5136798/rees"}, "is_accepted": false, "score": 1, "last_activity_date": 1487177451, "creation_date": 1487177451, "answer_id": 42255420, "question_id": 42255275, "link": "https://stackoverflow.com/questions/42255275/a-class-method-that-returns-a-unique-array-of-elements-no-duplicates-in-ruby/42255420#42255420", "title": "A class method that returns a unique array of elements (no duplicates) in Ruby", "body": "<p>With your exact code (ignoring classes briefly), running the command <code>random_things</code> I get no error and the result you desired. </p>\n\n<pre><code>@@things = [\"crayon\", \"pencil\", \"crayon\", \"pen\", \"marker\", \"marker\"]\n\ndef random_things\n  @@things.uniq!\nend\n\nrandom_things\n</code></pre>\n\n<p><code>=&gt; [\"crayon\", \"pencil\", \"pen\", \"marker\"]</code></p>\n\n<p>Are you trying to call the method on a class called artists? If so, could you provide the call and class?</p>\n"}, {"comments": [{"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1487177917, "post_id": 42255563, "comment_id": 71668884, "body": "You also never mentioned that you were calling <code>Song.artists</code> in the question. Please, in future, provide a <a href=\"http://stackoverflow.com/help/mcve\">complete</a> example - otherwise we can only guess what your issue might have been. (By the way, it is convention that <code>#artists</code> refers to an <i>instance</i> method - i.e. <code>Song.new.artists</code>. You should write class methods like <code>.artists</code> instead.)"}], "tags": [], "owner": {"reputation": 41, "user_id": 5244092, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/85dc8164b8fbf6a6c99e4a0912af1799?s=128&d=identicon&r=PG&f=1", "display_name": "alexnewby", "link": "https://stackoverflow.com/users/5244092/alexnewby"}, "is_accepted": false, "score": 0, "last_activity_date": 1487177768, "creation_date": 1487177768, "answer_id": 42255563, "question_id": 42255275, "link": "https://stackoverflow.com/questions/42255275/a-class-method-that-returns-a-unique-array-of-elements-no-duplicates-in-ruby/42255563#42255563", "title": "A class method that returns a unique array of elements (no duplicates) in Ruby", "body": "<p>I figured it out, I forgot to put self.artists in there. The Self was missing. Argh.. lol. Thanks guys, I'll be back. </p>\n"}], "owner": {"reputation": 41, "user_id": 5244092, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/85dc8164b8fbf6a6c99e4a0912af1799?s=128&d=identicon&r=PG&f=1", "display_name": "alexnewby", "link": "https://stackoverflow.com/users/5244092/alexnewby"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 192, "favorite_count": 0, "closed_date": 1487179836, "answer_count": 2, "score": -1, "last_activity_date": 1487177843, "creation_date": 1487177079, "last_edit_date": 1487177843, "question_id": 42255275, "link": "https://stackoverflow.com/questions/42255275/a-class-method-that-returns-a-unique-array-of-elements-no-duplicates-in-ruby", "closed_reason": "Not suitable for this site", "title": "A class method that returns a unique array of elements (no duplicates) in Ruby", "body": "<p>As the title states, I am attempting to make a class method that, when called upon, returns an array of unique elements.</p>\n\n<p>Ok, this is the full code, I was trying to paraphrase it, cause there is more there than concerns this question. In this case, we are looking at the #artists method. </p>\n\n<pre><code>class Song\n  attr_accessor :name, :artist, :genre\n  attr_writer :count\n\n  @@count = 0\n  @@genres = []\n  @@artists = []\n\n  def initialize(name, artist, genre)\n    @name = name\n    @artist = artist\n    @genre = genre\n    @@count += 1\n    @@genres &lt;&lt; genre\n    @@artists &lt;&lt; artist\n  end\n\n  def self.count\n    @@count\n  end\n\n  def genres\n    @@genres\n  end\n\n  def artists\n    @@artists.uniq!\n  end\n\n  def genre_count\n\n  end \n\n\n#end of class\nend\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "google-drive-api", "google-sheets-api"], "answers": [{"comments": [{"owner": {"reputation": 439, "user_id": 2829443, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/d40dfae83ff87b9576c0a4fbc7e8c66c?s=128&d=identicon&r=PG&f=1", "display_name": "Napmi", "link": "https://stackoverflow.com/users/2829443/napmi"}, "edited": false, "score": 0, "creation_date": 1487221505, "post_id": 42255469, "comment_id": 71687522, "body": "Oh, so I have to actually add in the gem in my gem file even if I installed it manually?  Damn! Will try in a bit"}, {"owner": {"reputation": 856, "user_id": 6018313, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/krXMH.jpg?s=128&g=1", "display_name": "Kevin Etore", "link": "https://stackoverflow.com/users/6018313/kevin-etore"}, "reply_to_user": {"reputation": 439, "user_id": 2829443, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/d40dfae83ff87b9576c0a4fbc7e8c66c?s=128&d=identicon&r=PG&f=1", "display_name": "Napmi", "link": "https://stackoverflow.com/users/2829443/napmi"}, "edited": false, "score": 0, "creation_date": 1487226836, "post_id": 42255469, "comment_id": 71689699, "body": "Yes, <code>rails c</code> will only load the gems that you specifically specified inside your Gemfile."}], "tags": [], "owner": {"reputation": 856, "user_id": 6018313, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/krXMH.jpg?s=128&g=1", "display_name": "Kevin Etore", "link": "https://stackoverflow.com/users/6018313/kevin-etore"}, "is_accepted": true, "score": 1, "last_activity_date": 1487177574, "creation_date": 1487177574, "answer_id": 42255469, "question_id": 42255271, "link": "https://stackoverflow.com/questions/42255271/google-drive-gem-not-working-loaderror-cannot-load-such-file-google-drive/42255469#42255469", "title": "google_drive gem not working &quot;LoadError: cannot load such file -- google_drive&quot;", "body": "<p>I manually installed the gem by calling <code>gem install 'google_drive'</code> and afterwards calling <code>require 'google_drive'</code> in an IRB session, that works fine.</p>\n\n<p>Does your Rails project's Gemfile include the gem (<code>gem 'google_drive'</code>)? Rails will only load the gems specified in that file.</p>\n"}], "owner": {"reputation": 439, "user_id": 2829443, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/d40dfae83ff87b9576c0a4fbc7e8c66c?s=128&d=identicon&r=PG&f=1", "display_name": "Napmi", "link": "https://stackoverflow.com/users/2829443/napmi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 901, "favorite_count": 0, "accepted_answer_id": 42255469, "answer_count": 1, "score": 1, "last_activity_date": 1487180411, "creation_date": 1487177074, "last_edit_date": 1487180411, "question_id": 42255271, "link": "https://stackoverflow.com/questions/42255271/google-drive-gem-not-working-loaderror-cannot-load-such-file-google-drive", "title": "google_drive gem not working &quot;LoadError: cannot load such file -- google_drive&quot;", "body": "<p>So this is my first time using a new API for rails. The particular gem I am trying to use today is this.\n<a href=\"https://github.com/gimite/google-drive-ruby/blob/master/README.md\" rel=\"nofollow noreferrer\">https://github.com/gimite/google-drive-ruby/blob/master/README.md</a></p>\n\n<p>so after installing it manually to one of my projects on rails, </p>\n\n<pre><code>$ gem install google_drive \n</code></pre>\n\n<p>I tried to test it out on Ruby console by just typing </p>\n\n<pre><code>require 'google_drive'\n</code></pre>\n\n<p>but the error that returned to me \"LoadError: cannot load such file -- google_drive.\"</p>\n\n<p>I also have tried installing this gem, which too didn't help</p>\n\n<pre><code>gem install google-api-client\n</code></pre>\n\n<p>I am trying to learn how to update my google sheets through one of my web page forms ... but this simple step has got me stuck. </p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4", "devise", "devise-confirmable"], "comments": [{"owner": {"reputation": 1670, "user_id": 6388521, "user_type": "registered", "accept_rate": 69, "profile_image": "https://lh4.googleusercontent.com/-VdFWPJVSpRc/AAAAAAAAAAI/AAAAAAAAAFo/vCc8QOz6v9Y/photo.jpg?sz=128", "display_name": "Ruslan", "link": "https://stackoverflow.com/users/6388521/ruslan"}, "edited": false, "score": 0, "creation_date": 1487176952, "post_id": 42255109, "comment_id": 71668134, "body": "You can use <code>where</code> caluse with both emails downcased/upcased"}, {"owner": {"reputation": 2401, "user_id": 2873548, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/b90a1fd45fc72bd55f8948b385d4626f?s=128&d=identicon&r=PG&f=1", "display_name": "anonn023432", "link": "https://stackoverflow.com/users/2873548/anonn023432"}, "reply_to_user": {"reputation": 1670, "user_id": 6388521, "user_type": "registered", "accept_rate": 69, "profile_image": "https://lh4.googleusercontent.com/-VdFWPJVSpRc/AAAAAAAAAAI/AAAAAAAAAFo/vCc8QOz6v9Y/photo.jpg?sz=128", "display_name": "Ruslan", "link": "https://stackoverflow.com/users/6388521/ruslan"}, "edited": false, "score": 0, "creation_date": 1487177086, "post_id": 42255109, "comment_id": 71668244, "body": "@Ruslan how exactly should I write the emails in the where clause? I tried <code>where</code> but maybe I didn&#39;t pass the attributes properly"}, {"owner": {"reputation": 1670, "user_id": 6388521, "user_type": "registered", "accept_rate": 69, "profile_image": "https://lh4.googleusercontent.com/-VdFWPJVSpRc/AAAAAAAAAAI/AAAAAAAAAFo/vCc8QOz6v9Y/photo.jpg?sz=128", "display_name": "Ruslan", "link": "https://stackoverflow.com/users/6388521/ruslan"}, "edited": false, "score": 0, "creation_date": 1487177694, "post_id": 42255109, "comment_id": 71668686, "body": "which database are you using?"}, {"owner": {"reputation": 2401, "user_id": 2873548, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/b90a1fd45fc72bd55f8948b385d4626f?s=128&d=identicon&r=PG&f=1", "display_name": "anonn023432", "link": "https://stackoverflow.com/users/2873548/anonn023432"}, "reply_to_user": {"reputation": 1670, "user_id": 6388521, "user_type": "registered", "accept_rate": 69, "profile_image": "https://lh4.googleusercontent.com/-VdFWPJVSpRc/AAAAAAAAAAI/AAAAAAAAAFo/vCc8QOz6v9Y/photo.jpg?sz=128", "display_name": "Ruslan", "link": "https://stackoverflow.com/users/6388521/ruslan"}, "edited": false, "score": 0, "creation_date": 1487177832, "post_id": 42255109, "comment_id": 71668806, "body": "@Ruslan PostgreSQL"}], "answers": [{"tags": [], "owner": {"reputation": 1670, "user_id": 6388521, "user_type": "registered", "accept_rate": 69, "profile_image": "https://lh4.googleusercontent.com/-VdFWPJVSpRc/AAAAAAAAAAI/AAAAAAAAAFo/vCc8QOz6v9Y/photo.jpg?sz=128", "display_name": "Ruslan", "link": "https://stackoverflow.com/users/6388521/ruslan"}, "is_accepted": false, "score": 1, "last_activity_date": 1487177945, "creation_date": 1487177945, "answer_id": 42255643, "question_id": 42255109, "link": "https://stackoverflow.com/questions/42255109/check-if-user-confirmed-during-login-using-devise/42255643#42255643", "title": "Check if user confirmed during login, using devise", "body": "<p>Try this. Will try to find the user by email, not case sensitive. </p>\n\n<p><code>user = User.where(\"upper(email) = '?'\", params[:user][:email].upcase).first</code></p>\n\n<p>then you can try <code>user.confirmed?</code> if <code>user</code> is not <code>nil</code></p>\n"}, {"comments": [{"owner": {"reputation": 1001, "user_id": 2945977, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/c76f28b6eccfe32b63a559aac74a9be5?s=128&d=identicon&r=PG&f=1", "display_name": "sonic", "link": "https://stackoverflow.com/users/2945977/sonic"}, "edited": false, "score": 0, "creation_date": 1534270177, "post_id": 42256464, "comment_id": 90648281, "body": "on <code>sign_in(resource_name, resource)</code> site is redirecting to <code>:new</code> after <code>401(unauthorized)</code>. so <code>yield resource if block_given?</code> is not yielded..."}], "tags": [], "owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "is_accepted": true, "score": 2, "last_activity_date": 1487180353, "creation_date": 1487180353, "answer_id": 42256464, "question_id": 42255109, "link": "https://stackoverflow.com/questions/42255109/check-if-user-confirmed-during-login-using-devise/42256464#42256464", "title": "Check if user confirmed during login, using devise", "body": "<p>If you look at <code>Devise::SessionsController</code> (or any of the devise controllers) you can see that it yields:</p>\n\n<pre><code>class Devise::SessionsController &lt; DeviseController\n  # POST /resource/sign_in\n  def create\n    self.resource = warden.authenticate!(auth_options)\n    set_flash_message!(:notice, :signed_in)\n    sign_in(resource_name, resource)\n    yield resource if block_given?\n    respond_with resource, location: after_sign_in_path_for(resource)\n  end\nend\n</code></pre>\n\n<p>This lets subclasses tap into the flow without overriding the entire method.</p>\n\n<pre><code>class MySessionsController &lt; DeviseController\n  def create\n    # taps into the yield right after the user is authenticated by warden\n    super do |user|\n      if user.banned?\n        # 500 is the wrong response code\n        # it means that the server is broken and cannot respond to the request\n        render json: { error: true, message: 'Your account has been suspended. Please contact us for more information.' }, \n          status: 401 and return\n      elsif user.requires_confirmation?\n        render json: { error: true, message: 'Please confirm your registered email to access your account.'}, \n          status: 401 and return\n      end\n    end\n  end\nend\n</code></pre>\n\n<p>Instead of using a code constant (are you really going to redeploy the application every time a user gets banned?) you should use a flag on the users table to denote if the user is banned. </p>\n\n<p>Likewise the business logic of determining when a user must be confirmed should be handled on the model layer:</p>\n\n<pre><code>class User &lt; ApplicationRecord\n  # ...\n  def requires_confirmation?\n    if user.confirmed? || user.created_at &lt; 3.days.ago\n      false\n    else\n      true\n    end\n  end\nend\n</code></pre>\n"}], "owner": {"reputation": 2401, "user_id": 2873548, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/b90a1fd45fc72bd55f8948b385d4626f?s=128&d=identicon&r=PG&f=1", "display_name": "anonn023432", "link": "https://stackoverflow.com/users/2873548/anonn023432"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 5262, "favorite_count": 0, "accepted_answer_id": 42256464, "answer_count": 2, "score": 2, "last_activity_date": 1487180353, "creation_date": 1487176639, "question_id": 42255109, "link": "https://stackoverflow.com/questions/42255109/check-if-user-confirmed-during-login-using-devise", "title": "Check if user confirmed during login, using devise", "body": "<p>I have a React+Rails app and I'm using devise for authentication. I'm trying to generate a custom error message for users who try to login after their confirmation period has expired. </p>\n\n<p>Currently, they are being blocked from logging in but it doesn't show a custom error message explaining why they have been blocked.</p>\n\n<p>My <code>session_controller.rb</code></p>\n\n<pre><code>def create\n\n  if BANNED_EMAILS.include?(params[\"user\"][\"email\"])\n    render :status =&gt; 500, :json =&gt; { error: true, message: 'Your account has been suspended. Please contact us for more information.' }\n\n//I get an error `ActiveRecord::RecordNotFound (Couldn't find User)` when I try this even though the user has already signed up and exists in the database\n\n  elsif User.find_by_email!(params[:user][:email]).confirmed? == true\n    render :json =&gt; { error: true, message: 'Please confirm your registered email to access your account.'}, :status =&gt; 500\n  else\n    self.resource = warden.authenticate!(auth_options)\n    sign_in(resource_name, resource)\n    render :status =&gt; 200, :json =&gt; resource.to_json    \nend\n</code></pre>\n\n<p>end</p>\n\n<p>Is there some other way to pull the information of the user trying to login or is there some other way to do show the same error?</p>\n"}, {"tags": ["ruby", "regex", "elasticsearch", "logstash", "deis"], "comments": [{"owner": {"reputation": 7181, "user_id": 1338588, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/j4Fva.jpg?s=128&g=1", "display_name": "Kulasangar", "link": "https://stackoverflow.com/users/1338588/kulasangar"}, "edited": false, "score": 0, "creation_date": 1487178204, "post_id": 42254930, "comment_id": 71669093, "body": "You mean extracting your <i>message</i> into four different <i>fields</i> (parts as you mentioned) ?  Have you done that already as I can see from the ES <b>output</b> above. So what&#39;s your question here? Regarding the approach?"}, {"owner": {"reputation": 1, "user_id": 7565843, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b7cd25cd39e78e801377316b8ad12b4a?s=128&d=identicon&r=PG&f=1", "display_name": "user7565843", "link": "https://stackoverflow.com/users/7565843/user7565843"}, "reply_to_user": {"reputation": 7181, "user_id": 1338588, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/j4Fva.jpg?s=128&g=1", "display_name": "Kulasangar", "link": "https://stackoverflow.com/users/1338588/kulasangar"}, "edited": false, "score": 0, "creation_date": 1487178675, "post_id": 42254930, "comment_id": 71669445, "body": "Sorry if that wasn&#39;t concise, I updated the question."}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 7565843, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b7cd25cd39e78e801377316b8ad12b4a?s=128&d=identicon&r=PG&f=1", "display_name": "user7565843", "link": "https://stackoverflow.com/users/7565843/user7565843"}, "edited": false, "score": 0, "creation_date": 1487611120, "post_id": 42262494, "comment_id": 71852146, "body": "Thanks for the advice. How would I configure a Grok filter to parse out the message?"}, {"owner": {"reputation": 1, "user_id": 7565843, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b7cd25cd39e78e801377316b8ad12b4a?s=128&d=identicon&r=PG&f=1", "display_name": "user7565843", "link": "https://stackoverflow.com/users/7565843/user7565843"}, "edited": false, "score": 0, "creation_date": 1487783798, "post_id": 42262494, "comment_id": 71943209, "body": "Thanks again Signus, I&#39;ve updated the above question for better context."}], "tags": [], "owner": {"reputation": 1046, "user_id": 1861357, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/AVQEB.png?s=128&g=1", "display_name": "Signus", "link": "https://stackoverflow.com/users/1861357/signus"}, "is_accepted": false, "score": 0, "last_activity_date": 1487808692, "last_edit_date": 1487808692, "creation_date": 1487203906, "answer_id": 42262494, "question_id": 42254930, "link": "https://stackoverflow.com/questions/42254930/logstash-filtering-and-parsing-dies-output/42262494#42262494", "title": "Logstash Filtering and Parsing Dies Output", "body": "<p>Unfortunately your assumptions about what you are trying to do is slightly off, but we can fix that!</p>\n\n<p>You created a regex for JSON, but you are not parsing JSON. You are simply parsing a log that is bastardized syslog (see syslogStreamer in the <a href=\"https://github.com/deis/deis/blob/master/logspout/logspout.go\" rel=\"nofollow noreferrer\">source</a>), but is not in fact syslog format (either RFC 5424 or 3164). Logstash afterwards provides JSON output.</p>\n\n<p>Let's break down the message, which becomes the source that you parse. The key is you have to parse the message front to back.</p>\n\n<p><strong>Message:</strong></p>\n\n<pre><code>2017-02-15T14:55:24UTC deis-logspout[1]: 2017/02/15 14:55:24 routing all to udp://x.x.x.x:xxxx\\n\n</code></pre>\n\n<ul>\n<li><code>2017-02-15T14:55:24UTC</code>: Timestamp is a common grok pattern. This mostly follows <strong>TIMESTAMP_ISO8601</strong> but not quite.</li>\n<li><code>deis-logspout[1]</code>: This would be your logsource, which you can name container. You can use the grok pattern <strong>URIHOST</strong>.</li>\n<li><code>routing all to udp://x.x.x.x:xxxx\\n</code>: Since the message for most logs is contained at the end of the message, you can just then use the grok pattern <strong>GREEDYDATA</strong> which is the equivalent of <code>.*</code> in a regular expression.</li>\n<li><code>2017/02/15 14:55:24</code>: Another timestamp (why?) that doesn't match common grok patterns.</li>\n</ul>\n\n<p>With grok filters, you can map a syntax (abstraction from regular expressions) to a semantic (name for the value that you extract). For example <code>%{URIHOST:container}</code></p>\n\n<p>You'll see I did some hacking together of the grok filters to make the formatting work. You have match parts of the text, even if you don't intend to capture the results. If you can't change the formatting of the timestamps to match standards, create a custom pattern.</p>\n\n<p><strong>Configuration:</strong></p>\n\n<pre><code>input {\n    tcp {\n        port =&gt; 5000\n        type =&gt; deis\n    }\n    udp {\n        port =&gt; 5000\n        type =&gt; deis\n    }\n}\n\nfilter {\n    grok {\n        match =&gt; { \"message\" =&gt; \"%{TIMESTAMP_ISO8601:timestamp}(UTC|CST|EST|PST) %{URIHOST:container}\\[%{NUMBER}\\]: %{YEAR}/%{MONTHNUM}/%{MONTHDAY} %{TIME} %{GREEDYDATA:msg}\" }\n    }\n}\n\noutput {\n    elasticsearch { hosts =&gt; [\"foo.somehost\"] }\n}\n</code></pre>\n\n<p><strong>Output:</strong></p>\n\n<pre><code>{\n    \"container\" =&gt; \"deis-logspout\",\n    \"msg\" =&gt; \"routing all to udp://x.x.x.x:xxxx\",\n    \"@timestamp\" =&gt; 2017-02-22T23:55:28.319Z,\n    \"port\" =&gt; 62886,\n    \"@version\" =&gt; \"1\",\n    \"host\" =&gt; \"10.0.2.2\",\n    \"message\" =&gt; \"2017-02-15T14:55:24UTC deis-logspout[1]: 2017/02/15 14:55:24 routing all to udp://x.x.x.x:xxxx\",\n    \"timestamp\" =&gt; \"2017-02-15T14:55:24\"\n    \"type\" =&gt; \"deis\"\n}\n</code></pre>\n\n<p>You can additionally mutate the item to drop @timestamp, @host, etc. as these are provided by Logstash by default. Another suggestion is to use the <a href=\"https://www.elastic.co/guide/en/logstash/5.1/plugins-filters-date.html\" rel=\"nofollow noreferrer\">date filter</a> to convert any timestamps found into usable formats (better for searching).</p>\n\n<p>Depending on the log formatting, you may have to slightly alter the pattern. I only had one example to go off of. This also maintains the original full message, because any field operations done in Logstash are destructive (they overwrite values with fields of the same name).</p>\n\n<p>Resources:</p>\n\n<ul>\n<li><a href=\"https://www.elastic.co/guide/en/logstash/current/plugins-filters-grok.html\" rel=\"nofollow noreferrer\">Grok</a></li>\n<li><a href=\"https://github.com/elastic/logstash/blob/v1.4.2/patterns/grok-patterns\" rel=\"nofollow noreferrer\">Grok Patterns</a></li>\n<li><a href=\"https://grokdebug.herokuapp.com/\" rel=\"nofollow noreferrer\">Grok Debugger</a></li>\n</ul>\n"}], "owner": {"reputation": 1, "user_id": 7565843, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b7cd25cd39e78e801377316b8ad12b4a?s=128&d=identicon&r=PG&f=1", "display_name": "user7565843", "link": "https://stackoverflow.com/users/7565843/user7565843"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 583, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1487809977, "creation_date": 1487176184, "last_edit_date": 1487809977, "question_id": 42254930, "link": "https://stackoverflow.com/questions/42254930/logstash-filtering-and-parsing-dies-output", "title": "Logstash Filtering and Parsing Dies Output", "body": "<p><strong>Environment</strong></p>\n\n<ul>\n<li>Ubuntu 16.04</li>\n<li>Logstash 5.2.1</li>\n<li>ElasticSearch 5.1</li>\n</ul>\n\n<p>I've configured our Deis platform to send logs to our Logstack node with no issues. However, I'm still new to Ruby and Regexes are not my strong suit. </p>\n\n<p><strong>Log Example</strong>:</p>\n\n<pre><code>2017-02-15T14:55:24UTC deis-logspout[1]: 2017/02/15 14:55:24 routing all to udp://x.x.x.x:xxxx\\n\n</code></pre>\n\n<p><strong>Logstash Configuration:</strong></p>\n\n<pre><code>input {\n    tcp {\n        port =&gt; 5000\n        type =&gt; syslog\n        codec =&gt; plain\n    }\n    udp {\n        port =&gt; 5000\n        type =&gt; syslog\n        codec =&gt; plain\n    }\n}\n\nfilter {\n    json {\n        source =&gt; \"syslog_message\"\n    }\n}\n\noutput {\n    elasticsearch { hosts =&gt; [\"foo.somehost\"] }\n}\n</code></pre>\n\n<p><strong>Elasticsearch output:</strong></p>\n\n<pre><code>\"@timestamp\" =&gt; 2017-02-15T14:55:24.408Z,\n\"@version\" =&gt; \"1\",\n\"host\" =&gt; \"x.x.x.x\",\n\"message\" =&gt; \"2017-02-15T14:55:24UTC deis-logspout[1]: 2017/02/15 14:55:24 routing all to udp://x.x.x.x:xxxx\\n\",\n\"type\" =&gt; \"json\"\n</code></pre>\n\n<p><strong>Desired outcome:</strong></p>\n\n<pre><code>\"@timestamp\" =&gt; 2017-02-15T14:55:24.408Z,\n\"@version\" =&gt; \"1\",\n\"host\" =&gt; \"x.x.x.x\",\n\"type\" =&gt; \"json\"\n\"container\" =&gt; \"deis-logspout\"\n\"severity level\" =&gt; \"Info\"\n\"message\" =&gt; \"routing all to udp://x.x.x.x:xxxx\\n\"\n</code></pre>\n\n<p>How can I extract the information out of the message into their individual fields?</p>\n"}, {"tags": ["javascript", "ruby-on-rails", "ruby", "ecmascript-6", "capistrano"], "answers": [{"tags": [], "owner": {"reputation": 1205, "user_id": 5192013, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/8jL3u.jpg?s=128&g=1", "display_name": "Jaswinder", "link": "https://stackoverflow.com/users/5192013/jaswinder"}, "is_accepted": false, "score": 0, "last_activity_date": 1501504295, "creation_date": 1501504295, "answer_id": 45416027, "question_id": 42254750, "link": "https://stackoverflow.com/questions/42254750/es6-in-rails-5-and-compiliing-assets-on-a-server/45416027#45416027", "title": "ES6 in Rails 5 and compiliing assets on a server", "body": "<p>I got a solution for the above error.Just replaced the above format with defining function in the argument itself as:</p>\n\n<pre><code>[2,3].reduce(function(a,b){ return a +b }, 0)\n</code></pre>\n"}], "owner": {"reputation": 111, "user_id": 7555540, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/aafc0920497b3bc9733b795bd03f4193?s=128&d=identicon&r=PG&f=1", "display_name": "Andrey", "link": "https://stackoverflow.com/users/7555540/andrey"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 374, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1501504295, "creation_date": 1487175734, "question_id": 42254750, "link": "https://stackoverflow.com/questions/42254750/es6-in-rails-5-and-compiliing-assets-on-a-server", "title": "ES6 in Rails 5 and compiliing assets on a server", "body": "<p>In my rails 5 application when I'm compiling assets I have exceptions <code>ExecJS::RuntimeError::SyntaxError .....</code> I'm using ES6: let, const, <code>() =&gt;</code> syntax. I've heard that it's not allowed to just start using it. Is that so? Then how to get it to work well?</p>\n\n<p>Note that locally it all works, only a server it fails when deploying.</p>\n"}, {"tags": ["ruby", "regex", "if-statement", "chef-infra"], "comments": [{"owner": {"reputation": 15030, "user_id": 3627607, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bd5fd623c0fdd0c93a2535cf6293ec5d?s=128&d=identicon&r=PG", "display_name": "Tensibai", "link": "https://stackoverflow.com/users/3627607/tensibai"}, "edited": false, "score": 3, "creation_date": 1487175778, "post_id": 42254567, "comment_id": 71667267, "body": "Any example of the <code>node[&quot;hostname&quot;]</code> value which match where they shouldn&#39;t ? You can add a <code>Chef::Log.warn &quot;Testing hostname: #{node[&#39;hostname&#39;]}&quot;</code> before your if to debug and see what it is testing. (your code seems ok to me)"}, {"owner": {"reputation": 15030, "user_id": 3627607, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bd5fd623c0fdd0c93a2535cf6293ec5d?s=128&d=identicon&r=PG", "display_name": "Tensibai", "link": "https://stackoverflow.com/users/3627607/tensibai"}, "edited": false, "score": 2, "creation_date": 1487175896, "post_id": 42254567, "comment_id": 71667364, "body": "And is this code the only one in your runlist ? maybe there&#39;s another place where the same service resource is defined. (in this case you should rewind it instead of redefining it, see <a href=\"https://docs.chef.io/dsl_recipe.html#edit-resource\" rel=\"nofollow noreferrer\">docs.chef.io/dsl_recipe.html#edit-resource</a>)"}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 3, "creation_date": 1487181736, "post_id": 42254567, "comment_id": 71671468, "body": "&quot;...determine whether the hostname does end in -1...&quot; Then use <code>node[&quot;hostname&quot;].end_with?(&quot;-1&quot;)</code>. It&#39;s MUCH faster and clearer than your regex. If you insist on using a regex then <code>&#47;-1$&#47;</code> is sufficient and much clearer. See <a href=\"http://rubular.com/r/E5trSWP2lf\" rel=\"nofollow noreferrer\">rubular.com/r/E5trSWP2lf</a> and <a href=\"http://rubular.com/r/jVOu4hD6Re\" rel=\"nofollow noreferrer\">rubular.com/r/jVOu4hD6Re</a> It appears your current pattern is correct so the problem is elsewhere."}, {"owner": {"reputation": 89316, "user_id": 238886, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/8ca29123b5669b26f9b6ca2c62d9d215?s=128&d=identicon&r=PG", "display_name": "Wayne Conrad", "link": "https://stackoverflow.com/users/238886/wayne-conrad"}, "reply_to_user": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1487186908, "post_id": 42254567, "comment_id": 71674503, "body": "@theTinMan Is String#ends_with? a Chef extension?  I don&#39;t think it&#39;s in base Ruby."}, {"owner": {"reputation": 43208, "user_id": 78722, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf611565f0b79abd0b3dc200ad867661?s=128&d=identicon&r=PG", "display_name": "coderanger", "link": "https://stackoverflow.com/users/78722/coderanger"}, "edited": false, "score": 3, "creation_date": 1487188053, "post_id": 42254567, "comment_id": 71675114, "body": "<code>String#end_with?</code> is standard Ruby."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "reply_to_user": {"reputation": 89316, "user_id": 238886, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/8ca29123b5669b26f9b6ca2c62d9d215?s=128&d=identicon&r=PG", "display_name": "Wayne Conrad", "link": "https://stackoverflow.com/users/238886/wayne-conrad"}, "edited": false, "score": 0, "creation_date": 1487188503, "post_id": 42254567, "comment_id": 71675356, "body": "@Wayne, <a href=\"http://ruby-doc.org/core-1.8.7/String.html#method-i-end_with-3F\" rel=\"nofollow noreferrer\">String#end_with?</a> was recently introduced in v1.8.7."}, {"owner": {"reputation": 89316, "user_id": 238886, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/8ca29123b5669b26f9b6ca2c62d9d215?s=128&d=identicon&r=PG", "display_name": "Wayne Conrad", "link": "https://stackoverflow.com/users/238886/wayne-conrad"}, "edited": false, "score": 0, "creation_date": 1487188634, "post_id": 42254567, "comment_id": 71675439, "body": "My mistake.  I was typing the incorrect plural <code>ends_with?</code>, not the correct singular <code>end_with?</code>"}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1487267685, "post_id": 42254567, "comment_id": 71719162, "body": "I always mistype it as <code>ends_with?</code> the first time too. I find <code>end_with?</code> awkward grammar."}], "answers": [{"comments": [{"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1487267782, "post_id": 42258730, "comment_id": 71719224, "body": "It&#39;s questionable practice to create answers based on the comments made an hour before."}, {"owner": {"reputation": 43208, "user_id": 78722, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf611565f0b79abd0b3dc200ad867661?s=128&d=identicon&r=PG", "display_name": "coderanger", "link": "https://stackoverflow.com/users/78722/coderanger"}, "reply_to_user": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1487270447, "post_id": 42258730, "comment_id": 71720792, "body": "The important bit was to use <code>machinename</code> instead of <code>hostname</code> which wasn&#39;t mentioned before."}], "tags": [], "owner": {"reputation": 43208, "user_id": 78722, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf611565f0b79abd0b3dc200ad867661?s=128&d=identicon&r=PG", "display_name": "coderanger", "link": "https://stackoverflow.com/users/78722/coderanger"}, "is_accepted": false, "score": 0, "last_activity_date": 1487188136, "creation_date": 1487188136, "answer_id": 42258730, "question_id": 42254567, "link": "https://stackoverflow.com/questions/42254567/if-statement-using-regex-in-ruby-chef-recipe/42258730#42258730", "title": "If statement using RegEx in Ruby (Chef recipe)", "body": "<p>There is a chance that the hostname isn't what you think it is. You probably want something like <code>if node['machinename'] =~ /-1$/</code> or <code>if node['machinename'].end_with?('-1')</code>. Otherwise that looks okay.</p>\n"}], "owner": {"reputation": 535, "user_id": 1058385, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/b59c82134d48e68f933d704bb11a019a?s=128&d=identicon&r=PG", "display_name": "Stephen Walsh", "link": "https://stackoverflow.com/users/1058385/stephen-walsh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 2149, "favorite_count": 1, "answer_count": 1, "score": 0, "last_activity_date": 1487188136, "creation_date": 1487175239, "last_edit_date": 1487181522, "question_id": 42254567, "link": "https://stackoverflow.com/questions/42254567/if-statement-using-regex-in-ruby-chef-recipe", "title": "If statement using RegEx in Ruby (Chef recipe)", "body": "<p>I have a Chef recipe in which I'm trying to say: </p>\n\n<blockquote>\n  <p>\"If the server's hostname ends in -1, then enable and start the newrelic-sysmond and newrelic-daemon services, else, disable those services\"</p>\n</blockquote>\n\n<p>using RegEx to determine whether the hostname does end in -1 or not. </p>\n\n<p>Using my attempt below, the services seem to enable and start regardless of whether the hostname ends in -1 or not. I'm quite new to Ruby and Chef so I wouldn't be surprise if my code is incorrect:</p>\n\n<pre><code>if node[\"hostname\"] =~ /^.*-1$/\n    service 'newrelic-sysmond' do\n        action [ :enable, :start ]\n    end\n    service 'newrelic-daemon' do\n        action [ :enable, :start ]\n    end\nelse\n    service 'newrelic-sysmond' do\n        action [ :disable ]\n    end\n    service 'newrelic-daemon' do\n        action [ :disable ]\n    end\nend\n</code></pre>\n"}, {"tags": ["ruby", "rubymine"], "comments": [{"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1487174390, "post_id": 42254133, "comment_id": 71666164, "body": "<i>&quot;...at first semicolon&quot;</i> \u2013 your code does not contain a semicolon."}, {"owner": {"reputation": 1117, "user_id": 2066608, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/56771e8ae8494e15f2794bb152ac54f5?s=128&d=identicon&r=PG", "display_name": "ppascualv", "link": "https://stackoverflow.com/users/2066608/ppascualv"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1487175773, "post_id": 42254133, "comment_id": 71667264, "body": "is not duplicated question, I&#39;m not working on a Mac and sorry @Stefan it&#39;s at first colon"}], "owner": {"reputation": 1117, "user_id": 2066608, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/56771e8ae8494e15f2794bb152ac54f5?s=128&d=identicon&r=PG", "display_name": "ppascualv", "link": "https://stackoverflow.com/users/2066608/ppascualv"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 108, "favorite_count": 0, "closed_date": 1487174830, "answer_count": 0, "score": 1, "last_activity_date": 1487175783, "creation_date": 1487174148, "last_edit_date": 1487175783, "question_id": 42254133, "link": "https://stackoverflow.com/questions/42254133/rubymine-and-ruby-namespaces-expected-or-end-of-line", "closed_reason": "Duplicate", "title": "Rubymine and Ruby namespaces, Expected: ; or end of line", "body": "<pre><code>RubyMine 2016.3.1\nBuild #RM-163.9166.34, built on December 15, 2016\n...\nJRE: 1.8.0_112-release-408-b6 amd64\nJVM: OpenJDK 64-Bit Server VM by JetBrains s.r.o\n</code></pre>\n\n<p>If I create this class:</p>\n\n<pre><code>class Account::User\nend\n</code></pre>\n\n<p>Rubymine lint an error <code>Expected: ; or end of line</code> at first colon.</p>\n\n<p>It's a rubymine bug?</p>\n"}, {"tags": ["ruby", "ruby-on-rails-4", "refactoring"], "comments": [{"owner": {"reputation": 19261, "user_id": 4758119, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/F4dJY.jpg?s=128&g=1", "display_name": "Deepak Mahakale", "link": "https://stackoverflow.com/users/4758119/deepak-mahakale"}, "edited": false, "score": 0, "creation_date": 1487173306, "post_id": 42253774, "comment_id": 71665272, "body": "Please add code snippets instead of image"}], "answers": [{"tags": [], "owner": {"reputation": 19261, "user_id": 4758119, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/F4dJY.jpg?s=128&g=1", "display_name": "Deepak Mahakale", "link": "https://stackoverflow.com/users/4758119/deepak-mahakale"}, "is_accepted": false, "score": 0, "last_activity_date": 1487173404, "creation_date": 1487173404, "answer_id": 42253842, "question_id": 42253774, "link": "https://stackoverflow.com/questions/42253774/refactoring-record-retrieval-in-rails-controller/42253842#42253842", "title": "Refactoring record retrieval in Rails controller", "body": "<p>Yes you can add it to <code>before_action</code> and remove from <code>new</code> and <code>create</code> actions </p>\n\n<p>Now <code>@product</code> will be assigned before <code>new</code> and <code>create</code> action</p>\n\n<pre><code>before_action :find_product, only: [:new, :create]\n\nprivate\n\ndef find_product\n  @product = Product.find(params[:product_id])\nend\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 3630, "user_id": 4799659, "user_type": "registered", "profile_image": "https://graph.facebook.com/10153200714295120/picture?type=large", "display_name": "fylooi", "link": "https://stackoverflow.com/users/4799659/fylooi"}, "edited": false, "score": 1, "creation_date": 1487181665, "post_id": 42254382, "comment_id": 71671428, "body": "Nice approach, although calling just <code>product</code> in <code>new</code> isn&#39;t very descriptive. I would consider adding <code>alias :set_product :product</code> below the definition of <code>product</code>"}], "tags": [], "owner": {"reputation": 2230, "user_id": 6337957, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c1177d893bf3115edf0119cf56e7220?s=128&d=identicon&r=PG", "display_name": "Greg Navis", "link": "https://stackoverflow.com/users/6337957/greg-navis"}, "is_accepted": false, "score": 1, "last_activity_date": 1487174703, "creation_date": 1487174703, "answer_id": 42254382, "question_id": 42253774, "link": "https://stackoverflow.com/questions/42253774/refactoring-record-retrieval-in-rails-controller/42254382#42254382", "title": "Refactoring record retrieval in Rails controller", "body": "<p>As Deepak mentioned, <code>before_action</code> is one idea. Personally, I prefer a lazy accessor. Its advantages are:</p>\n\n<ul>\n<li>The models are references directly in the action, not somewhere else in the file. It's easier to see which models are used by an action.</li>\n<li>The dependencies are figured out automatically. If you use <code>order</code> then <code>product</code> is loaded automatically without having to loading it manually.</li>\n</ul>\n\n<p>The code should look like:</p>\n\n<pre><code>def new\n  product\nend\n\ndef create\n  if order.save\n    redirect_to(products_path)\n  else\n    render(:new)\n  end\nend\n\nprivate\n\ndef product\n  @product ||= Product.find(params[:product_id])\nend\n\ndef order\n  @order ||= product.orders.build(order_params)\nend\n</code></pre>\n\n<p>Note that I  made two minor changes (that you may get rid of):</p>\n\n<ol>\n<li>I build an order (instead of creating it) and test whether <code>order.save</code> returns a truthy value.</li>\n<li>I don't pass errors in a flash. I assume they're rendered in the form rendered by <code>new.html.erb</code>.</li>\n</ol>\n\n<p>Feel free to discard these changes if they don't fit your application.</p>\n"}], "owner": {"reputation": 1119, "user_id": 2420203, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/515a4be8e1b7a484be4d67786137a636?s=128&d=identicon&r=PG", "display_name": "BC2", "link": "https://stackoverflow.com/users/2420203/bc2"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 30, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1487174703, "creation_date": 1487173238, "last_edit_date": 1487174012, "question_id": 42253774, "link": "https://stackoverflow.com/questions/42253774/refactoring-record-retrieval-in-rails-controller", "title": "Refactoring record retrieval in Rails controller", "body": "<p><a href=\"https://i.stack.imgur.com/o81RK.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/o81RK.png\" alt=\"enter image description here\"></a></p>\n\n<p>I have the code above and the following route's <code>resources</code> :</p>\n\n<pre><code>resources :products, only:[:index] do\n  resources :orders, :path =&gt; 'order', only:[:new, :create],\n    path_names: {new: \"\"}\nend\n</code></pre>\n\n<p>May I know if the code in #4 and #9 could be refactored since they're doing the same thing and I've read that programming in Ruby always encourage DRY code. Learning to be a better programmer here. Thanks for the tips and advice.</p>\n"}, {"tags": ["ruby", "shopify"], "answers": [{"comments": [{"owner": {"reputation": 2473, "user_id": 5481714, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/8258ffa13cee232e0da6c87f5d1bb32f?s=128&d=identicon&r=PG&f=1", "display_name": "kawnah", "link": "https://stackoverflow.com/users/5481714/kawnah"}, "edited": false, "score": 0, "creation_date": 1487286687, "post_id": 42285839, "comment_id": 71729477, "body": "This doesn&#39;t quite answer my question - I want to localize the <code>.reject({ message: String })</code> to a single product, but still apply the discount to other items in the cart where applicable. Is this possible?"}, {"owner": {"reputation": 655, "user_id": 1284913, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fef6eda38667a47d4ce6715ff18c3392?s=128&d=identicon&r=PG", "display_name": "Rick Davies", "link": "https://stackoverflow.com/users/1284913/rick-davies"}, "edited": false, "score": 0, "creation_date": 1614536143, "post_id": 42285839, "comment_id": 117409286, "body": "The one and only @DavidLazar everyone; here for your reading pleasure ;)"}, {"owner": {"reputation": 8203, "user_id": 210841, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/5adbe9e20522d6a177e76b223b6750ed?s=128&d=identicon&r=PG", "display_name": "David Lazar", "link": "https://stackoverflow.com/users/210841/david-lazar"}, "edited": false, "score": 0, "creation_date": 1614627130, "post_id": 42285839, "comment_id": 117437373, "body": "Guess you&#39;re suffering trying to write scripts now too."}], "tags": [], "owner": {"reputation": 8203, "user_id": 210841, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/5adbe9e20522d6a177e76b223b6750ed?s=128&d=identicon&r=PG", "display_name": "David Lazar", "link": "https://stackoverflow.com/users/210841/david-lazar"}, "is_accepted": false, "score": -1, "last_activity_date": 1487283825, "creation_date": 1487283825, "answer_id": 42285839, "question_id": 42253537, "link": "https://stackoverflow.com/questions/42253537/block-discount-on-certain-product-shopify-script/42285839#42285839", "title": "Block discount on certain product shopify script", "body": "<p>Discounts are easy. First... get the discount code from the cart. You know it applies to the whole cart. Now you have an amount, or percentage or whatever you gave the customer in the code. Now kicks in the beauty of the scripts. </p>\n\n<p>For each product, decide if it is discounted or not. If it is, apply the discount amount that you know from the discount code provided to the item. If it is a product not to be discounted, leave the price alone. </p>\n\n<p>You are paying big bucks for the scripting engine. If you cannot program it yourself, pay someone that can! You are way better off studying a working script to learn, that trying to outfox yourself. </p>\n\n<p>So you can in fact reject the discount code for the cart, but still discount products, some, not all, or others.</p>\n"}, {"tags": [], "owner": {"reputation": 2473, "user_id": 5481714, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/8258ffa13cee232e0da6c87f5d1bb32f?s=128&d=identicon&r=PG&f=1", "display_name": "kawnah", "link": "https://stackoverflow.com/users/5481714/kawnah"}, "is_accepted": true, "score": 0, "last_activity_date": 1495401014, "creation_date": 1495401014, "answer_id": 44101826, "question_id": 42253537, "link": "https://stackoverflow.com/questions/42253537/block-discount-on-certain-product-shopify-script/44101826#44101826", "title": "Block discount on certain product shopify script", "body": "<p>Old question but I found a resolution: basically, you can't \"localize\" a discount to a specific product. You have to block the entire cart from getting a discount. The approach I ended up taking is below:</p>\n\n<pre><code># ID of product you want to block\nproductId = 10199241991\n\n# Runs through a loop of items in your cart\nInput.cart.line_items.each do |line_item|\n  product = line_item.variant.product\n  puts product.id\n  next if product.gift_card?\n  next unless product.id == productId\n  case Input.cart.discount_code\n  when CartDiscount::Percentage\n    Input.cart.discount_code.reject({message: \"Cannot be used with this product\"})\n  end\nend\n\n\nOutput.cart = Input.cart\n</code></pre>\n"}], "owner": {"reputation": 2473, "user_id": 5481714, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/8258ffa13cee232e0da6c87f5d1bb32f?s=128&d=identicon&r=PG&f=1", "display_name": "kawnah", "link": "https://stackoverflow.com/users/5481714/kawnah"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1116, "favorite_count": 0, "accepted_answer_id": 44101826, "answer_count": 2, "score": 1, "last_activity_date": 1495401014, "creation_date": 1487172585, "question_id": 42253537, "link": "https://stackoverflow.com/questions/42253537/block-discount-on-certain-product-shopify-script", "title": "Block discount on certain product shopify script", "body": "<p>I want to write a script in Shopify that prevents discounts from rendering on certain products. I know this is wrong, but something like this:</p>\n\n<pre><code>Input.cart.line_items.each do |line_item|\n  product = line_item.variant.product\n\n  if product = 123456789\n     CartDiscount.remove(\"Discount does not apply\")\n  end\n\nend\n\nOutput.cart = Input.cart\n</code></pre>\n\n<p>I looked at the <a href=\"https://help.shopify.com/api/tutorials/shopify-scripts\" rel=\"nofollow noreferrer\">documentation</a> and saw the <code>.reject({ message: String })</code> method but it applies to the whole cart. Is there a way to localize this to one instance?</p>\n"}, {"tags": ["ruby", "stdin", "shoes"], "comments": [{"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 1, "creation_date": 1487172561, "post_id": 42253462, "comment_id": 71664689, "body": "Could you provide a runnable example?"}, {"owner": {"reputation": 5001, "user_id": 99502, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/6b6d582cf38e6bba12f6f57b423d50f1?s=128&d=identicon&r=PG", "display_name": "J.R.", "link": "https://stackoverflow.com/users/99502/j-r"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1487173105, "post_id": 42253462, "comment_id": 71665103, "body": "Yes. See edited question."}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1487181881, "post_id": 42253462, "comment_id": 71671544, "body": "Make sure there&#39;s a space after <code>do</code> and indent using two spaces."}], "answers": [{"tags": [], "owner": {"reputation": 5001, "user_id": 99502, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/6b6d582cf38e6bba12f6f57b423d50f1?s=128&d=identicon&r=PG", "display_name": "J.R.", "link": "https://stackoverflow.com/users/99502/j-r"}, "is_accepted": true, "score": 0, "last_activity_date": 1487266263, "creation_date": 1487266263, "answer_id": 42280927, "question_id": 42253462, "link": "https://stackoverflow.com/questions/42253462/getting-both-file-input-and-stdin-from-argf/42280927#42280927", "title": "Getting both File input AND STDIN from ARGF?", "body": "<p>I have had some success with the \"-\" special filename character, which apparently is a signal to switch to STDIN on the command line.</p>\n\n<p>Example of use:</p>\n\n<pre><code>shoes testargfshoes.rb -   &lt;aus_simple.txt\n</code></pre>\n\n<p>Don't pass the \"-\" without passing any standard In, makes it hang.</p>\n\n<p>Found the answer here: <a href=\"https://robots.thoughtbot.com/rubys-argf\" rel=\"nofollow noreferrer\">https://robots.thoughtbot.com/rubys-argf</a></p>\n"}], "owner": {"reputation": 5001, "user_id": 99502, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/6b6d582cf38e6bba12f6f57b423d50f1?s=128&d=identicon&r=PG", "display_name": "J.R.", "link": "https://stackoverflow.com/users/99502/j-r"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 174, "favorite_count": 0, "accepted_answer_id": 42280927, "answer_count": 1, "score": 0, "last_activity_date": 1487266345, "creation_date": 1487172373, "last_edit_date": 1487266345, "question_id": 42253462, "link": "https://stackoverflow.com/questions/42253462/getting-both-file-input-and-stdin-from-argf", "title": "Getting both File input AND STDIN from ARGF?", "body": "<p>I am using the shoes library to run a piece of ruby code and have discovered that it treats the ruby code it's running as File Input, and thus does not allow me to get STDIN anymore (since ARGF allows File Input OR STDIN but apparently not both).</p>\n\n<p>Is there anyway to override this?  I'm told perl, for example, allows you to read from STDIN once the IO buffer is empty.</p>\n\n<p>Edit:</p>\n\n<p>I have had some success with the \"-\" special filename character, which apparently is a signal to switch to STDIN on the command line.</p>\n\n<p><strong>Previous Form of Question:  Is Shoes ARGF Broken?</strong></p>\n\n<p>Using general Ruby, I can read either files or Standard In with ARGF.  With Shoes, I am only able to read files. Anything from standard in just gets ignored.  Is it eating standard in, or is there another way to access it?</p>\n\n<p>Example code lines:  Either stand alone in a ruby file, or inside a Shoes app in shoes. </p>\n\n<pre><code>#ruby testargf.rb aus.txt is the same as ruby testargf.rb&lt;aus.txt\n#but isn't in shoes. shoes only prints with the first input, not the second\nARGF.each do |line|  #readLine.each has same result\n  puts line\nend\n</code></pre>\n\n<p>Or in Shoes:</p>\n\n<pre><code>#shoes testargfshoes.rb aus.txt should be the same as &lt;aus.txt but isn't.\nShoes.app(title: \"File I/0 test\",width:800,height:650)  do\n    ARGF.each do |line|  #readLine.each has same result\n        puts line\n        para line\n    end\nend\n</code></pre>\n\n<p>In retrospect, I do also see a further difference between Shoes and Ruby:  Shoes ALSO prints out the source code of the program I am running, along with any files I pass along.  If I try to input a file to standard in, ONLY the source code is printed.</p>\n\n<p>I imagine this means that the shoes app is taking my program as an input, and then not sanitizing (or whatever the correct word would be) the input when it passes it along to my code. This seems to strengthen my \"Shoes eats Standard In\" hypothesis, since it is clearly USING standard In for something.  I guess it can take two files in a row, but not one file and THEN a reference to standard in. </p>\n\n<p>I can confirm that Ruby without Shoes provides identical behavior if I mix file input and STDIN with: </p>\n\n<pre><code>ruby testargf.rb  aus_simple.txt &lt; testargf.rb\n</code></pre>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 13234, "user_id": 409792, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5c9f1a530bb9d8cf91a889b4af5f80e9?s=128&d=identicon&r=PG", "display_name": "zwippie", "link": "https://stackoverflow.com/users/409792/zwippie"}, "edited": false, "score": 0, "creation_date": 1487171591, "post_id": 42253100, "comment_id": 71663873, "body": "See <a href=\"http://stackoverflow.com/a/2192010/409792\">this answer</a>"}, {"owner": {"reputation": 33085, "user_id": 2423164, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Nxbnp.jpg?s=128&g=1", "display_name": "ndnenkov", "link": "https://stackoverflow.com/users/2423164/ndnenkov"}, "edited": false, "score": 0, "creation_date": 1487171592, "post_id": 42253100, "comment_id": 71663875, "body": "You can use <code>retry</code>, but this will execute the entire body, not just the <code>things to execute</code>."}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1487175642, "post_id": 42253100, "comment_id": 71667162, "body": "Visual basic has it. It&#39;s called &quot;on error resume next&quot;. There must be a reason why no other language does this."}], "answers": [{"comments": [{"owner": {"reputation": 45, "user_id": 7499041, "user_type": "registered", "accept_rate": 60, "profile_image": "https://lh4.googleusercontent.com/-gLueZSFWHjc/AAAAAAAAAAI/AAAAAAAAFJc/8neg8JhuRFo/photo.jpg?sz=128", "display_name": "Ram Kumar", "link": "https://stackoverflow.com/users/7499041/ram-kumar"}, "edited": false, "score": 0, "creation_date": 1487173650, "post_id": 42253653, "comment_id": 71665529, "body": "Actually my <code>begin</code> will contain 20+ lines. If there is an error comes out from 5th line, it will go to <code>rescue</code> and <code>ensure</code>. But 5th line may not produce error..8 th line may produce or 10th ... even 19th line or no error..You cannot decide when the error occurs and from which line(intermittent error which may be thrown from any of the 20 lines or not).If I write only one rescue/ensure my code after the error won&#39;t execute.. Thats the problem here and I want to run whole starting from begin as whole as the lines before error already get executed before error happens"}, {"owner": {"reputation": 2628, "user_id": 825563, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9767bd2a811cab859b83635e3636e657?s=128&d=identicon&r=PG", "display_name": "Psylone", "link": "https://stackoverflow.com/users/825563/psylone"}, "reply_to_user": {"reputation": 45, "user_id": 7499041, "user_type": "registered", "accept_rate": 60, "profile_image": "https://lh4.googleusercontent.com/-gLueZSFWHjc/AAAAAAAAAAI/AAAAAAAAFJc/8neg8JhuRFo/photo.jpg?sz=128", "display_name": "Ram Kumar", "link": "https://stackoverflow.com/users/7499041/ram-kumar"}, "edited": false, "score": 0, "creation_date": 1487174024, "post_id": 42253653, "comment_id": 71665826, "body": "Got it. I think it&#39;s a more architectural than control flow kind of issue.  You can try to encapsulate every piece of logic from the <code>begin</code> section and also hold your <code>some_final_operations</code> inside the method."}, {"owner": {"reputation": 45, "user_id": 7499041, "user_type": "registered", "accept_rate": 60, "profile_image": "https://lh4.googleusercontent.com/-gLueZSFWHjc/AAAAAAAAAAI/AAAAAAAAFJc/8neg8JhuRFo/photo.jpg?sz=128", "display_name": "Ram Kumar", "link": "https://stackoverflow.com/users/7499041/ram-kumar"}, "edited": false, "score": 0, "creation_date": 1487174153, "post_id": 42253653, "comment_id": 71665936, "body": "So is there any possible way of solution to return to the begin block ??"}, {"owner": {"reputation": 45, "user_id": 7499041, "user_type": "registered", "accept_rate": 60, "profile_image": "https://lh4.googleusercontent.com/-gLueZSFWHjc/AAAAAAAAAAI/AAAAAAAAFJc/8neg8JhuRFo/photo.jpg?sz=128", "display_name": "Ram Kumar", "link": "https://stackoverflow.com/users/7499041/ram-kumar"}, "edited": false, "score": 0, "creation_date": 1487174561, "post_id": 42253653, "comment_id": 71666304, "body": "Can you explain some more detailed how to encapsulating those stuffs as the flow is not gonna be disturbed and let it have to flow like stream..Thanks in advance"}, {"owner": {"reputation": 2628, "user_id": 825563, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9767bd2a811cab859b83635e3636e657?s=128&d=identicon&r=PG", "display_name": "Psylone", "link": "https://stackoverflow.com/users/825563/psylone"}, "reply_to_user": {"reputation": 45, "user_id": 7499041, "user_type": "registered", "accept_rate": 60, "profile_image": "https://lh4.googleusercontent.com/-gLueZSFWHjc/AAAAAAAAAAI/AAAAAAAAFJc/8neg8JhuRFo/photo.jpg?sz=128", "display_name": "Ram Kumar", "link": "https://stackoverflow.com/users/7499041/ram-kumar"}, "edited": false, "score": 0, "creation_date": 1487174578, "post_id": 42253653, "comment_id": 71666320, "body": "There&#39;s no <code>goto</code>-like in Ruby. And you can&#39;t also use <code>catch-throw</code> construction because of <code>begin-rescue-end</code> block. Please see modified answer above with the possible solution."}, {"owner": {"reputation": 45, "user_id": 7499041, "user_type": "registered", "accept_rate": 60, "profile_image": "https://lh4.googleusercontent.com/-gLueZSFWHjc/AAAAAAAAAAI/AAAAAAAAFJc/8neg8JhuRFo/photo.jpg?sz=128", "display_name": "Ram Kumar", "link": "https://stackoverflow.com/users/7499041/ram-kumar"}, "edited": false, "score": 0, "creation_date": 1487174860, "post_id": 42253653, "comment_id": 71666543, "body": "Thanks Psylone for your interest and my <code>perform_finalization</code> may throw errors...I too can&#39;t find any solution for my problem as of now. Will try to remodel the structure if supports."}, {"owner": {"reputation": 2628, "user_id": 825563, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9767bd2a811cab859b83635e3636e657?s=128&d=identicon&r=PG", "display_name": "Psylone", "link": "https://stackoverflow.com/users/825563/psylone"}, "reply_to_user": {"reputation": 45, "user_id": 7499041, "user_type": "registered", "accept_rate": 60, "profile_image": "https://lh4.googleusercontent.com/-gLueZSFWHjc/AAAAAAAAAAI/AAAAAAAAFJc/8neg8JhuRFo/photo.jpg?sz=128", "display_name": "Ram Kumar", "link": "https://stackoverflow.com/users/7499041/ram-kumar"}, "edited": false, "score": 0, "creation_date": 1487175424, "post_id": 42253653, "comment_id": 71666997, "body": "You can add <code>rescue</code> inside the <code>perform_finalization</code> method. If you&#39;ll get an error say in <code>one</code> method, it will raise an error and call <code>perform_finalization</code>. If it also will raise an error, you can catch it and after that, your flow will return to the point of calling <code>one</code> method, so your execution flow will be continued.  Anyway, to remodel this flow looks like a good idea )"}], "tags": [], "owner": {"reputation": 2628, "user_id": 825563, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9767bd2a811cab859b83635e3636e657?s=128&d=identicon&r=PG", "display_name": "Psylone", "link": "https://stackoverflow.com/users/825563/psylone"}, "is_accepted": false, "score": 0, "last_activity_date": 1487176149, "last_edit_date": 1487176149, "creation_date": 1487172917, "answer_id": 42253653, "question_id": 42253100, "link": "https://stackoverflow.com/questions/42253100/regaining-control-to-line-after-rescue-block-if-begin-throws-error-in-ruby/42253653#42253653", "title": "Regaining control to line after rescue block if begin throws error in ruby", "body": "<p>There's no <code>goto</code>-like construction in Ruby (fortunately). And it's not possible to use <code>catch-throw</code> because of <code>begin-rescue-end</code> block. So you can try something like this:</p>\n\n<pre><code>def error_handler\n  # if this method will raise an error it's possible to catch it here\n  # with `rescue` or (and) `ensure`\n  p :finalize\nend\n\ndef one\n  1 / rand(0..3)\nrescue\n  error_handler\nend\n\ndef two\n  1 / rand(0..3)\nrescue\n  error_handler\nend\n\ndef three\n  1 / rand(0..3)\nrescue\n  error_handler\nend\n\nbegin\n  one\n  two\n  three\n  1 / rand(0..3)\nrescue =&gt; error\n  error_handler\nend\n</code></pre>\n"}], "owner": {"reputation": 45, "user_id": 7499041, "user_type": "registered", "accept_rate": 60, "profile_image": "https://lh4.googleusercontent.com/-gLueZSFWHjc/AAAAAAAAAAI/AAAAAAAAFJc/8neg8JhuRFo/photo.jpg?sz=128", "display_name": "Ram Kumar", "link": "https://stackoverflow.com/users/7499041/ram-kumar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 295, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1487176149, "creation_date": 1487171390, "question_id": 42253100, "link": "https://stackoverflow.com/questions/42253100/regaining-control-to-line-after-rescue-block-if-begin-throws-error-in-ruby", "title": "Regaining control to line after rescue block if begin throws error in ruby", "body": "<p>Is there any way to regain control to begin block after performing rescue block like</p>\n\n<pre><code>begin\n .....\n error(not intended but happening intermittently)\n things to execute\nrescue\n describe error\nend\n</code></pre>\n\n<p>Is there any way that my code will go to <code>things to execute</code> after <code>describe error</code></p>\n\n<p>Thanks in advance</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "csv"], "comments": [{"owner": {"reputation": 1349, "user_id": 6163262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7f3655350c57cb94195d64808b7ba61?s=128&d=identicon&r=PG&f=1", "display_name": "whodini9", "link": "https://stackoverflow.com/users/6163262/whodini9"}, "edited": false, "score": 0, "creation_date": 1487171161, "post_id": 42252919, "comment_id": 71663521, "body": "Have you defined <code>self.to_csv</code> on the <code>app&#47;models&#47;asset.rb</code> ? If so can you post the code for this?"}, {"owner": {"reputation": 426, "user_id": 4908755, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/VslE1.jpg?s=128&g=1", "display_name": "Neeraj Rana", "link": "https://stackoverflow.com/users/4908755/neeraj-rana"}, "reply_to_user": {"reputation": 1349, "user_id": 6163262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7f3655350c57cb94195d64808b7ba61?s=128&d=identicon&r=PG&f=1", "display_name": "whodini9", "link": "https://stackoverflow.com/users/6163262/whodini9"}, "edited": false, "score": 0, "creation_date": 1487171240, "post_id": 42252919, "comment_id": 71663593, "body": "Yes I have defined it properly. That is why I&#39;m able to download multiple records properly. Issue is coming when I&#39;m trying to download one record."}, {"owner": {"reputation": 1349, "user_id": 6163262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7f3655350c57cb94195d64808b7ba61?s=128&d=identicon&r=PG&f=1", "display_name": "whodini9", "link": "https://stackoverflow.com/users/6163262/whodini9"}, "edited": false, "score": 0, "creation_date": 1487171274, "post_id": 42252919, "comment_id": 71663619, "body": "Can you post the to_csv method from the model?"}], "answers": [{"comments": [{"owner": {"reputation": 1349, "user_id": 6163262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7f3655350c57cb94195d64808b7ba61?s=128&d=identicon&r=PG&f=1", "display_name": "whodini9", "link": "https://stackoverflow.com/users/6163262/whodini9"}, "edited": false, "score": 0, "creation_date": 1487171341, "post_id": 42253029, "comment_id": 71663662, "body": "Try this: <code>rails console</code> -&gt; <code>User.all.to_csv</code>... or <code>User.first.to_csv</code>. You have to define it."}, {"owner": {"reputation": 19261, "user_id": 4758119, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/F4dJY.jpg?s=128&g=1", "display_name": "Deepak Mahakale", "link": "https://stackoverflow.com/users/4758119/deepak-mahakale"}, "reply_to_user": {"reputation": 1349, "user_id": 6163262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7f3655350c57cb94195d64808b7ba61?s=128&d=identicon&r=PG&f=1", "display_name": "whodini9", "link": "https://stackoverflow.com/users/6163262/whodini9"}, "edited": false, "score": 0, "creation_date": 1487171491, "post_id": 42253029, "comment_id": 71663793, "body": "@whodini9 The issue is he&#39;s calling it on instance instead of collection"}, {"owner": {"reputation": 19261, "user_id": 4758119, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/F4dJY.jpg?s=128&g=1", "display_name": "Deepak Mahakale", "link": "https://stackoverflow.com/users/4758119/deepak-mahakale"}, "reply_to_user": {"reputation": 1349, "user_id": 6163262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7f3655350c57cb94195d64808b7ba61?s=128&d=identicon&r=PG&f=1", "display_name": "whodini9", "link": "https://stackoverflow.com/users/6163262/whodini9"}, "edited": false, "score": 0, "creation_date": 1487171517, "post_id": 42253029, "comment_id": 71663813, "body": "Instead of <code>User.first.to_csv</code> you have to call <code>User.first(1).to_csv</code>"}, {"owner": {"reputation": 19261, "user_id": 4758119, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/F4dJY.jpg?s=128&g=1", "display_name": "Deepak Mahakale", "link": "https://stackoverflow.com/users/4758119/deepak-mahakale"}, "reply_to_user": {"reputation": 1349, "user_id": 6163262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7f3655350c57cb94195d64808b7ba61?s=128&d=identicon&r=PG&f=1", "display_name": "whodini9", "link": "https://stackoverflow.com/users/6163262/whodini9"}, "edited": false, "score": 0, "creation_date": 1487171541, "post_id": 42253029, "comment_id": 71663828, "body": "<code>User.first(1).to_csv</code> will return you 1 record but in collection"}, {"owner": {"reputation": 426, "user_id": 4908755, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/VslE1.jpg?s=128&g=1", "display_name": "Neeraj Rana", "link": "https://stackoverflow.com/users/4908755/neeraj-rana"}, "edited": false, "score": 0, "creation_date": 1487171934, "post_id": 42253029, "comment_id": 71664170, "body": "I tried doing what you said but it is giving me empty CSV file. #&lt;Asset:0x007ff832ee4b70&gt; This is written inside it."}, {"owner": {"reputation": 1349, "user_id": 6163262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7f3655350c57cb94195d64808b7ba61?s=128&d=identicon&r=PG&f=1", "display_name": "whodini9", "link": "https://stackoverflow.com/users/6163262/whodini9"}, "edited": false, "score": 0, "creation_date": 1487172674, "post_id": 42253029, "comment_id": 71664775, "body": "<code>User.first(1).to_csv</code> returns: <code>NoMethodError: undefined method </code>to_csv&#39; for #&lt;Array:0x007fb241412850&gt;. <code>to_csv</code> is not defined for arrays in Rails. If you have an array you can do <code>CSV.generate_line(array)</code>"}, {"owner": {"reputation": 426, "user_id": 4908755, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/VslE1.jpg?s=128&g=1", "display_name": "Neeraj Rana", "link": "https://stackoverflow.com/users/4908755/neeraj-rana"}, "edited": false, "score": 0, "creation_date": 1487234165, "post_id": 42253029, "comment_id": 71693696, "body": "Thanks a lot @DeepakMahakale It is perfectly working with where clause."}], "tags": [], "owner": {"reputation": 19261, "user_id": 4758119, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/F4dJY.jpg?s=128&g=1", "display_name": "Deepak Mahakale", "link": "https://stackoverflow.com/users/4758119/deepak-mahakale"}, "is_accepted": true, "score": 2, "last_activity_date": 1487172778, "last_edit_date": 1487172778, "creation_date": 1487171178, "answer_id": 42253029, "question_id": 42252919, "link": "https://stackoverflow.com/questions/42252919/download-single-record-in-csv-in-rails/42253029#42253029", "title": "Download single record in CSV in Rails", "body": "<p>The problem here is <code>to_csv</code> method should be called on <code>ActiveRecord</code> collection instead of a single record.</p>\n\n<p>I beleive the error you are getting must be </p>\n\n<blockquote>\n  <p>NoMethodError: undefined method `to_csv' for #&lt; Asset:0x0000000xxxx></p>\n</blockquote>\n\n<p>Change </p>\n\n<pre><code>@assets = Asset.last\n</code></pre>\n\n<p>to</p>\n\n<pre><code>@assets = Asset.limit(1).order(id: :desc)\n</code></pre>\n\n<p>So you can tweak the code a bit to pass an collection to <code>to_csv</code> and it will work</p>\n\n<pre><code>@assets = Asset.limit(1).order(id: :desc)\nrespond_to do |f|\n  f.html\n  f.csv {\n    send_data @assets.to_csv\n  }\nend\n</code></pre>\n\n<p><strong>EDIT:</strong></p>\n\n<p>Well this is a workaround but it works</p>\n\n<pre><code># If you only want the last record\n@assets = Asset.limit(1).order(id: :desc)\n\n# If you know the id or a specific condition\n@assets = Asset.where(id: 1).limit(1)\n</code></pre>\n"}], "owner": {"reputation": 426, "user_id": 4908755, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/VslE1.jpg?s=128&g=1", "display_name": "Neeraj Rana", "link": "https://stackoverflow.com/users/4908755/neeraj-rana"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 366, "favorite_count": 0, "accepted_answer_id": 42253029, "answer_count": 1, "score": 2, "last_activity_date": 1487172778, "creation_date": 1487170890, "last_edit_date": 1487171505, "question_id": 42252919, "link": "https://stackoverflow.com/questions/42252919/download-single-record-in-csv-in-rails", "title": "Download single record in CSV in Rails", "body": "<p>I'm using ruby csv library. When I'm trying to download multiple records it is working fine and downloading all the records in CSV file.</p>\n\n<pre><code>@assets = Asset.all\nrespond_to do |f|\n  f.html\n  f.csv { send_data @assets.to_csv }\n  f.xls { send_data @assets.to_csv(col_sep: \"\\t\") }\nend\n</code></pre>\n\n<p>But when I'm trying to download single record. It is giving error </p>\n\n<blockquote>\n  <p>undefined method `to_csv'</p>\n</blockquote>\n\n<p>This is my code for a single record.</p>\n\n<pre><code>@assets = Asset.last\nrespond_to do |f|\n  f.html\n  f.csv {\n    send_data @assets.to_csv\n  }\nend\n</code></pre>\n\n<p>This is my to_csv code</p>\n\n<pre><code> def self.to_csv(options = {})\n    CSV.generate(options) do |f|\n      f &lt;&lt; column_names\n      all.each do |asset|\n        f &lt;&lt; asset.attributes.values_at(*column_names)\n      end\n    end\n  end\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "edited": false, "score": 1, "creation_date": 1487168431, "post_id": 42251882, "comment_id": 71661432, "body": "Create a helper method instead. Looping through each seems really wasteful to. Whatever it is you are trying to achieve you can probably do it by using a index or just better CSS."}, {"owner": {"reputation": 51, "user_id": 2282664, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/439162a722368fb47ab1c63119183d65?s=128&d=identicon&r=PG", "display_name": "Tracey Beauchat", "link": "https://stackoverflow.com/users/2282664/tracey-beauchat"}, "reply_to_user": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "edited": false, "score": 0, "creation_date": 1487169609, "post_id": 42251882, "comment_id": 71662318, "body": "Well the whole thing is actually a lot more complex than that.  I have a number of objects on screen that need to be redrawn based on user interactions.   Sometimes these variables are used in a js.erb to update the css of existing objects and sometimes these variables are used to configure a new object being added through an html.erb."}, {"owner": {"reputation": 539, "user_id": 3693398, "user_type": "registered", "accept_rate": 64, "profile_image": "https://graph.facebook.com/100000471452957/picture?type=large", "display_name": "teddybear", "link": "https://stackoverflow.com/users/3693398/teddybear"}, "edited": false, "score": 0, "creation_date": 1487172964, "post_id": 42251882, "comment_id": 71664997, "body": "When you declare a partial to render you can also set the local variables to send to it.   &lt;%= render &#39;shared/_multi_purpose_partial&#39;, locals: { generic_local_variable: @whatever_local_variable } %&gt;"}], "answers": [{"comments": [{"owner": {"reputation": 91121, "user_id": 179125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5594142dcc49a24b1902ec8059181f8d?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan Running", "link": "https://stackoverflow.com/users/179125/jordan-running"}, "edited": false, "score": 0, "creation_date": 1487174960, "post_id": 42254180, "comment_id": 71666637, "body": "s/variables/instance variables/"}], "tags": [], "owner": {"reputation": 614, "user_id": 1238090, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/0b03e6b87e4a79e43ea9a91f38ae25be?s=128&d=identicon&r=PG", "display_name": "whizzkid", "link": "https://stackoverflow.com/users/1238090/whizzkid"}, "is_accepted": false, "score": 0, "last_activity_date": 1487174249, "creation_date": 1487174249, "answer_id": 42254180, "question_id": 42251882, "link": "https://stackoverflow.com/questions/42251882/include-variable-definitions-in-multiple-views/42254180#42254180", "title": "Include variable definitions in multiple views", "body": "<p>Try avoiding logic in your views.</p>\n\n<p>You can define a <code>before_filter</code> in your controller and enabled it for multiple actions that you need them for.</p>\n\n<p>Those variables defined in your before filter will be available in those views and you keep your views clear at the same time. </p>\n"}], "owner": {"reputation": 51, "user_id": 2282664, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/439162a722368fb47ab1c63119183d65?s=128&d=identicon&r=PG", "display_name": "Tracey Beauchat", "link": "https://stackoverflow.com/users/2282664/tracey-beauchat"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 57, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1487174249, "creation_date": 1487168334, "question_id": 42251882, "link": "https://stackoverflow.com/questions/42251882/include-variable-definitions-in-multiple-views", "title": "Include variable definitions in multiple views", "body": "<p>In a number of views I have the following kind of code:</p>\n\n<pre><code>&lt;% compute a number of variables %&gt;\n\nDo something with those variables to layout and configure HTML elements.\n</code></pre>\n\n<p>I'm drying to dry up my views.  That first part where I compute the values for the variables is used in a number of different views.  I would like to be able to pull it out into another file and use it in each view that needs it so that I only have to change it in one place.  If I pull it into its own partial and then render that partial in another view, the variables are not defined in the view.  To be more specific:</p>\n\n<pre><code>&lt;% \ntop = 0\nlink.siblings_before.each do |sibling|\n   top = top + compute_top(sibling)\nend\n%&gt;\n\n&lt;div style=\"position:absolute;top:&lt;%= top %&gt;px\"&gt;&lt;%= link.name %&gt;&lt;/div&gt;\n</code></pre>\n\n<p>I want to be able to use the computation of top in more than one view without having to cut and paste the ruby code into each view.</p>\n"}, {"tags": ["ruby-on-rails", "arrays", "ruby", "kaminari"], "comments": [{"owner": {"reputation": 139, "user_id": 1908371, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8214e2a9a49506dce9bdced60464218?s=128&d=identicon&r=PG", "display_name": "Sebastian Iorga", "link": "https://stackoverflow.com/users/1908371/sebastian-iorga"}, "edited": false, "score": 0, "creation_date": 1487176997, "post_id": 42251811, "comment_id": 71668171, "body": "Do you also have will_paginate gem in your Gemfile.lock? It can cause various conflicts with Kaminari."}, {"owner": {"reputation": 3997, "user_id": 3998420, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/55ea542584d3fd2a430c3d409bdafc95?s=128&d=identicon&r=PG&f=1", "display_name": "bkunzi01", "link": "https://stackoverflow.com/users/3998420/bkunzi01"}, "edited": false, "score": 0, "creation_date": 1487178232, "post_id": 42251811, "comment_id": 71669120, "body": "Kaminari relies on an active record relation so you can&#39;t pass it an array.  If you do @machines= Machine.where(blah blah blah) it will work."}, {"owner": {"reputation": 23, "user_id": 6537615, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e43281c77ccad5dc2fe743a4dc8f4db6?s=128&d=identicon&r=PG&f=1", "display_name": "Kalyr", "link": "https://stackoverflow.com/users/6537615/kalyr"}, "edited": false, "score": 0, "creation_date": 1487178989, "post_id": 42251811, "comment_id": 71669664, "body": "but the paginate_array method is specifically made to pass in an array. This is supposed to return a &quot;paginable&quot; version of the array. I don&#39;t have will paginate Lark"}], "owner": {"reputation": 23, "user_id": 6537615, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e43281c77ccad5dc2fe743a4dc8f4db6?s=128&d=identicon&r=PG&f=1", "display_name": "Kalyr", "link": "https://stackoverflow.com/users/6537615/kalyr"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 486, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1487168150, "creation_date": 1487168150, "question_id": 42251811, "link": "https://stackoverflow.com/questions/42251811/undefined-method-total-pages-for-array", "title": "undefined method `total_pages&#39; for Array", "body": "<p>i'm trying to use kaminari to paginate my array. </p>\n\n<p>I use the paginate_array method in my controller which then pass the paginatable array to the view that uses a partial view to render.</p>\n\n<p>The rendering is fine but i get a \"undefined method total pages for Array\" in the server log and some errors in the browser console.</p>\n\n<p>controller : </p>\n\n<pre><code>@machines_available = @machines.to_a\n  @machines_pagin = Kaminari.paginate_array(@machines_available).page(params[:page]).per(4)\n</code></pre>\n\n<p>index view : </p>\n\n<pre><code>&lt;%= render \"recherche_results\", machineResults: @machines_pagin %&gt;\n</code></pre>\n\n<p>partial view : </p>\n\n<pre><code>&lt;%= paginate machineResults %&gt;\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "macos", "rvm", "ruby-2.2"], "answers": [{"tags": [], "owner": {"reputation": 1131, "user_id": 2571728, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/7efd811eaae740b866b38236ba7a372a?s=128&d=identicon&r=PG", "display_name": "mpartan", "link": "https://stackoverflow.com/users/2571728/mpartan"}, "is_accepted": true, "score": 3, "last_activity_date": 1487241143, "last_edit_date": 1495535391, "creation_date": 1487241143, "answer_id": 42271326, "question_id": 42251791, "link": "https://stackoverflow.com/questions/42251791/rvm-issue-with-macos-sierra-while-installing-ruby-2-2-6/42271326#42271326", "title": "RVM issue with macOS Sierra while installing Ruby 2.2.6", "body": "<p>I tried purging whole RVM and a clean reinstall, which didn't help. Using the answer by phq from <a href=\"https://stackoverflow.com/questions/15511943/troubles-with-rvm-and-openssl\">here</a> I managed to get it working.</p>\n\n<pre><code>rvm remove 2.2.6   \nrvm pkg install openssl\nrvm install 2.2.6 --with-openssl-dir=$HOME/.rvm/usr\ngem install bundler\nbundle\n</code></pre>\n\n<p>It's probably not the best solution as it manually loads openssl, but it seems to currently be the only solution that works for me.</p>\n"}, {"comments": [{"owner": {"reputation": 1131, "user_id": 2571728, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/7efd811eaae740b866b38236ba7a372a?s=128&d=identicon&r=PG", "display_name": "mpartan", "link": "https://stackoverflow.com/users/2571728/mpartan"}, "edited": false, "score": 0, "creation_date": 1488892345, "post_id": 42429396, "comment_id": 72424516, "body": "I&#39;m using Homebrew and had OpenSSL installed at the time. Also, I had autolibs enabled (by default), and there seemed to be some issue which caused that it didn&#39;t configure autossl properly (as can be seen from my answer)."}], "tags": [], "owner": {"reputation": 46, "user_id": 6206465, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HnAEy.jpg?s=128&g=1", "display_name": "neemiasvf", "link": "https://stackoverflow.com/users/6206465/neemiasvf"}, "is_accepted": false, "score": 1, "last_activity_date": 1487901122, "creation_date": 1487901122, "answer_id": 42429396, "question_id": 42251791, "link": "https://stackoverflow.com/questions/42251791/rvm-issue-with-macos-sierra-while-installing-ruby-2-2-6/42429396#42429396", "title": "RVM issue with macOS Sierra while installing Ruby 2.2.6", "body": "<p>If you still don't have <a href=\"https://brew.sh\" rel=\"nofollow noreferrer\">Homebrew</a> installed, you should go ahead and give it a try. As they say, \"Homebrew installs the stuff you need that Apple didn\u2019t,\" which in your case is openssl.</p>\n\n<ol>\n<li>Install Homebrew: <code>/usr/bin/ruby -e \"$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/master/install)\"</code></li>\n<li>Install openssl: <code>brew install openssl</code></li>\n<li>Try installing bundler again: <code>gem install bundler</code></li>\n</ol>\n\n<p>To avoid problems in the future, I suggest you take a look at <a href=\"https://rvm.io/rvm/autolibs\" rel=\"nofollow noreferrer\">RVM Autolibs</a>. It automatically installs any dependency you need using Homebrew or other manager. If you don't wanna read the documentation, just run: <code>rvm autolibs enable &amp;&amp; rvm autolibs packages &amp;&amp; rvm autolibs homebrew</code> and you'll be fine.</p>\n"}], "owner": {"reputation": 1131, "user_id": 2571728, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/7efd811eaae740b866b38236ba7a372a?s=128&d=identicon&r=PG", "display_name": "mpartan", "link": "https://stackoverflow.com/users/2571728/mpartan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1331, "favorite_count": 1, "accepted_answer_id": 42271326, "answer_count": 2, "score": 3, "last_activity_date": 1487901122, "creation_date": 1487168109, "question_id": 42251791, "link": "https://stackoverflow.com/questions/42251791/rvm-issue-with-macos-sierra-while-installing-ruby-2-2-6", "title": "RVM issue with macOS Sierra while installing Ruby 2.2.6", "body": "<p>I'm running OSX (10.12.3) and I have Ruby installed (2.2.2) which is working fine. I'm trying to upgrade to 2.2.6 using RVM. Install seems to go fine.</p>\n\n<pre><code>  - rvm install 2.2.6\nSearching for binary rubies, this might take some time.\nNo binary rubies available for: osx/10.12/x86_64/ruby-2.2.6.\nContinuing with compilation. Please read 'rvm help mount' to get more information on binary rubies.\nChecking requirements for osx.\nCertificates in '/usr/local/etc/openssl/cert.pem' are already up to date.\nRequirements installation successful.\nInstalling Ruby from source to: /location/.rvm/rubies/ruby-2.2.6, this may take a while depending on your cpu(s)...\nruby-2.2.6 - #downloading ruby-2.2.6, this may take a while depending on your connection...\nruby-2.2.6 - #extracting ruby-2.2.6 to /location/.rvm/src/ruby-2.2.6....\nruby-2.2.6 - #configuring..........................................................\nruby-2.2.6 - #post-configuration.\nruby-2.2.6 - #compiling...........................................................\nruby-2.2.6 - #installing..........\nruby-2.2.6 - #making binaries executable..\nruby-2.2.6 - #downloading rubygems-2.6.10\nruby-2.2.6 - #extracting rubygems-2.6.10.....\nruby-2.2.6 - #removing old rubygems.........\n$LANG was empty, setting up LANG=en_US, if it fails again try setting LANG to something sane and try again.\nruby-2.2.6 - #installing rubygems-2.6.10.....................\nruby-2.2.6 - #gemset created /location/.rvm/gems/ruby-2.2.6@global\nruby-2.2.6 - #importing gemset /location/.rvm/gemsets/global.gems................................................\nruby-2.2.6 - #generating global wrappers........\nruby-2.2.6 - #gemset created /location/.rvm/gems/ruby-2.2.6\nruby-2.2.6 - #importing gemsetfile /location/.rvm/gemsets/default.gems evaluated to empty gem list\nruby-2.2.6 - #generating default wrappers........\nruby-2.2.6 - #adjusting #shebangs for (gem irb erb ri rdoc testrb rake).\nInstall of ruby-2.2.6 - #complete\nRuby was built without documentation, to build it run: rvm docs generate-ri\n</code></pre>\n\n<p>But when I try following commands, I'll get some errors.</p>\n\n<pre><code>  - bundle\n-bash: bundle: command not found\n  - gem install bundler\nERROR:  While executing gem ... (Gem::Exception)\n    Unable to require openssl, install OpenSSL and rebuild ruby (preferred) or use non-HTTPS sources    \n</code></pre>\n\n<p>So while installation seems to go fine, it can't require openssl when trying to install any gem. What might be the issue here and how could I fix it? </p>\n"}, {"tags": ["mysql", "ruby-on-rails", "ruby", "ruby-on-rails-5"], "answers": [{"comments": [{"owner": {"reputation": 9743, "user_id": 2542215, "user_type": "registered", "accept_rate": 48, "profile_image": "https://i.stack.imgur.com/W5t9R.jpg?s=128&g=1", "display_name": "aelor", "link": "https://stackoverflow.com/users/2542215/aelor"}, "edited": false, "score": 0, "creation_date": 1487177958, "post_id": 42252505, "comment_id": 71668918, "body": "Thank you for your answer. But what I am trying to get is the sql equivalent of a <code>.save</code>. A string like <code>INSERT ... </code> OR <code>UPDATE ....</code>"}], "tags": [], "owner": {"reputation": 1454, "user_id": 6509507, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/IU0E8.jpg?s=128&g=1", "display_name": "Blackcoat77", "link": "https://stackoverflow.com/users/6509507/blackcoat77"}, "is_accepted": false, "score": 1, "last_activity_date": 1487256497, "last_edit_date": 1592644375, "creation_date": 1487169885, "answer_id": 42252505, "question_id": 42251546, "link": "https://stackoverflow.com/questions/42251546/convert-save-update-call-rails-to-sql/42252505#42252505", "title": "Convert save/update call rails to sql", "body": "<p>You can use sandbox mode from your terminal: <code>rails console --sandbox</code> Which allows you to play with models, using all methods like: <code>.create</code>, <code>.delete</code>, <code>.save</code>, <code>.update</code> without affecting the original DB. Any modifications you make will be rolled back on exit.</p>\n<p><strong>UPDATE</strong></p>\n<p>You can achieve this goal with <a href=\"https://github.com/rails/arel\" rel=\"nofollow noreferrer\">AREL</a> from your terminal:</p>\n<pre><code># Arel::InsertManager\ntable = Arel::Table.new(:users)\ninsert_manager = Arel::InsertManager.new\ninsert_manager.into(table)\ninsert_manager.insert([ [table[:first_name], 'Eddie'] ])\ninsert_manager.to_sql\n\n# Arel::UpdateManager\ntable = Arel::Table.new(:users)\nupdate_manager = Arel::UpdateManager.new\nupdate_manager.set([[table[:first_name], &quot;Vedder&quot;]]).where(table[:id].eq(1)).table(table)\nupdate_manager.to_sql\n</code></pre>\n<p><a href=\"https://github.com/rails/arel/tree/f50de54a6f0c59ab75526cfdb7896830130ffdf7/lib/arel\" rel=\"nofollow noreferrer\">Here</a> you can find all Arel managers, like <strong>delete_manager.rb</strong>, <strong>select_manager.rb</strong> and the others.</p>\n<p>Good read: <a href=\"http://jpospisil.com/2014/06/16/the-definitive-guide-to-arel-the-sql-manager-for-ruby.html\" rel=\"nofollow noreferrer\">http://jpospisil.com/2014/06/16/the-definitive-guide-to-arel-the-sql-manager-for-ruby.html</a></p>\n"}], "owner": {"reputation": 9743, "user_id": 2542215, "user_type": "registered", "accept_rate": 48, "profile_image": "https://i.stack.imgur.com/W5t9R.jpg?s=128&g=1", "display_name": "aelor", "link": "https://stackoverflow.com/users/2542215/aelor"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 767, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1487256497, "creation_date": 1487167465, "question_id": 42251546, "link": "https://stackoverflow.com/questions/42251546/convert-save-update-call-rails-to-sql", "title": "Convert save/update call rails to sql", "body": "<p>I want to get the sql generated on running </p>\n\n<p><code>.save</code></p>\n\n<p>when I run this command in console</p>\n\n<pre><code>irb(main):018:0&gt; a = User.last\nirb(main):018:0&gt; a.first_name\n=&gt; \"Mohan\"\nirb(main):019:0&gt; a.first_name = 'Sohan'\n=&gt; \"Sohan\"\nirb(main):020:0&gt; a.save\n   (2.0ms)  BEGIN\n  SQL (1.4ms)  UPDATE `users` SET `first_name` = 'Sohan', `updated_at` = '2017-02-15 14:00:10' WHERE `users`.`id` = 1\n   (31.3ms)  COMMIT\n=&gt; true\n</code></pre>\n\n<p>This actually updates the record. I want to know the sql query generated without updating the record.</p>\n\n<p>I tried using <a href=\"http://apidock.com/rails/ActiveRecord/Relation/to_sql\" rel=\"nofollow noreferrer\"><code>.to_sql</code></a> but that seems to work only for relations.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "reform"], "owner": {"reputation": 365, "user_id": 2387219, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2orIQ.jpg?s=128&g=1", "display_name": "Tiago", "link": "https://stackoverflow.com/users/2387219/tiago"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 432, "favorite_count": 1, "answer_count": 0, "score": 4, "last_activity_date": 1487167389, "creation_date": 1487167389, "question_id": 42251516, "link": "https://stackoverflow.com/questions/42251516/how-to-always-pre-populate-nested-form-attributes-with-the-reform-gem", "title": "How to always pre-populate nested form attributes with the Reform gem?", "body": "<p>I have a <code>Financing</code> model with <code>has_many: :professional_investments</code>.</p>\n\n<p>To edit the <code>Financing</code>, the main form has a nested form for the <code>professional_investments</code>. </p>\n\n<p>I decided to display a fixed list of 8 <code>professional_investments</code> for now, as the <code>Cocoon</code> gem does not play well with Trailblazer's <code>Reform</code>.</p>\n\n<p>I use two <code>Reform</code> form objects: a <code>FinancingForm</code>, and a nested <code>ProfessionalInvestmentForm</code>:</p>\n\n<pre><code>class FinancingForm &lt; Reform::Form\n  collection :professional_investments,\n    form: ProfessionalInvestmentForm,\n    prepopulator: :prepopulate_professional_investments,\n    populate_if_empty: :populate_professional_investments!,\n    skip_if: :professional_investment_blank?\n\n  def prepopulate_professional_investments(options)\n    [8 - professional_investments.size, 0].max.times do\n      professional_investments &lt;&lt; ProfessionalInvestment.new\n    end\n  end\n\n  def populate_professional_investments!(fragment:, **)\n    ProfessionalInvestment.new unless professional_investment_blank?(fragment: fragment)\n  end\n\n  def professional_investment_blank?(fragment:, **)\n    fragment['professional_investor_id'].blank? &amp;&amp; fragment['amount'].to_d.zero?\n  end\nend\n</code></pre>\n\n<p>In the controller, I create the form object, and pre-populate it:</p>\n\n<pre><code>class FinancingsController &lt; ApplicationController\n  def edit\n    @financing_form = FinancingForm.new(@financing)\n    @financing_form.prepopulate!\n  end\n\n  def update\n    @financing_form = FinancingForm.new(@financing)\n    @financing_form.prepopulate!\n    if @financing_form.validate(financing_params)\n      @financing_form.save\n    end\n  end\nend\n</code></pre>\n\n<p>It works, except that blank <code>ProfessionalInvestment</code> are saved as well in the collection, as if the <code>skip_if:</code> parameter had no effect.</p>\n\n<p>If I don't call <code>@financing_form.prepopulate!</code> in <code>update</code>, the blank records are not saved, as intended. But then, if there are validation errors, only the existing records are displayed, not the full pre-populated 8 items list.</p>\n\n<p>How to prevent these blank records from being saved, while still displaying the whole pre-populated nested list in the <code>update</code> action?</p>\n"}, {"tags": ["json", "ruby", "logstash"], "answers": [{"tags": [], "owner": {"reputation": 89, "user_id": 5634217, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/360En.png?s=128&g=1", "display_name": "Leicha", "link": "https://stackoverflow.com/users/5634217/leicha"}, "is_accepted": true, "score": 1, "last_activity_date": 1487168148, "creation_date": 1487168148, "answer_id": 42251810, "question_id": 42251229, "link": "https://stackoverflow.com/questions/42251229/loop-through-nested-json-in-logstash-with-ruby/42251810#42251810", "title": "Loop through nested json in logstash with ruby", "body": "<p>I found a solution to my question:</p>\n\n<pre><code>ruby { code =&gt; '\n  i = 0\n  sum = 0\n  while i &lt; event.get( \"[foo][bar][faz]\" ).length do\n   sum += event.get( \"[foo][bar][faz][\" + i.to_s + \"][[baz]]\" )\n   i += 1\n  end\n  event.set( \"sum\", sum ) \n '\n}\n</code></pre>\n"}], "owner": {"reputation": 89, "user_id": 5634217, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/360En.png?s=128&g=1", "display_name": "Leicha", "link": "https://stackoverflow.com/users/5634217/leicha"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1902, "favorite_count": 0, "accepted_answer_id": 42251810, "answer_count": 1, "score": 0, "last_activity_date": 1487168160, "creation_date": 1487166636, "last_edit_date": 1487168160, "question_id": 42251229, "link": "https://stackoverflow.com/questions/42251229/loop-through-nested-json-in-logstash-with-ruby", "title": "Loop through nested json in logstash with ruby", "body": "<p>My data is deeply nested JSON, and I need to index a sum of certain fields. As new to Ruby, I've tried the following (with some variations of <em>#i</em> ) but it only throws a _rubyexception:</p>\n\n<pre><code>ruby { code =&gt; '\n i = 0\n sum = 0\n while i &lt; event.get( \"[foo][bar][faz]\" ).length do\n  sum += event.get( \"[foo][bar][faz][#i][[baz]]\" )\n  i += 1\n end\n event.set( \"sum\", sum )\n'\n}\n</code></pre>\n\n<p>How should I properly loop through the nested fields to get the sum?</p>\n\n<p>e.g. This works:</p>\n\n<pre><code>ruby { code =&gt; '\n  event.set( \"sum\", event.get( \"[foo][bar][faz][0][[baz]]\" ) + event.get( \"[foo][bar][faz][1][[baz]]\" ) )\n '\n}\n</code></pre>\n\n<p>but the real amount of events vary.</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "answers": [{"comments": [{"owner": {"reputation": 528, "user_id": 6571468, "user_type": "registered", "accept_rate": 17, "profile_image": "https://i.stack.imgur.com/ldBvQ.png?s=128&g=1", "display_name": "bilge", "link": "https://stackoverflow.com/users/6571468/bilge"}, "edited": false, "score": 0, "creation_date": 1487174258, "post_id": 42253867, "comment_id": 71666038, "body": "What about ActiveJobs do you think? I don&#39;t know how it use. But according to <a href=\"http://guides.rubyonrails.org/v4.2/active_job_basics.html\" rel=\"nofollow noreferrer\">guides.rubyonrails.org/v4.2/active_job_basics.html</a> , it can run backend process; like as i want. However, i have no idea how use it, and i can&#39;t understand clearly :/"}, {"owner": {"reputation": 3330, "user_id": 679778, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HRBsS.png?s=128&g=1", "display_name": "glebtv", "link": "https://stackoverflow.com/users/679778/glebtv"}, "reply_to_user": {"reputation": 528, "user_id": 6571468, "user_type": "registered", "accept_rate": 17, "profile_image": "https://i.stack.imgur.com/ldBvQ.png?s=128&g=1", "display_name": "bilge", "link": "https://stackoverflow.com/users/6571468/bilge"}, "edited": false, "score": 0, "creation_date": 1487175801, "post_id": 42253867, "comment_id": 71667288, "body": "To use activejob you need to set up a job runner like sidekiq or resque (if you dont it just runs in your web app process in a thread)"}, {"owner": {"reputation": 528, "user_id": 6571468, "user_type": "registered", "accept_rate": 17, "profile_image": "https://i.stack.imgur.com/ldBvQ.png?s=128&g=1", "display_name": "bilge", "link": "https://stackoverflow.com/users/6571468/bilge"}, "edited": false, "score": 0, "creation_date": 1487176609, "post_id": 42253867, "comment_id": 71667864, "body": "Ok, friend. I&#39;ll try both of  your suggession and activejob, and return result. Thanks."}], "tags": [], "owner": {"reputation": 3330, "user_id": 679778, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HRBsS.png?s=128&g=1", "display_name": "glebtv", "link": "https://stackoverflow.com/users/679778/glebtv"}, "is_accepted": true, "score": 0, "last_activity_date": 1487173485, "creation_date": 1487173485, "answer_id": 42253867, "question_id": 42251135, "link": "https://stackoverflow.com/questions/42251135/how-ruby-on-rails-run-script-file-without-interact/42253867#42253867", "title": "How Ruby on Rails run script file without interact?", "body": "<p>Add <code>require './config/environment'</code> at the beginning of your script to load your rails app (and the models you need) in your script.</p>\n\n<p>You might want to make it into <a href=\"http://guides.rubyonrails.org/command_line.html#custom-rake-tasks\" rel=\"nofollow noreferrer\">rake</a> or <a href=\"https://github.com/erikhuda/thor/wiki/Getting-Started\" rel=\"nofollow noreferrer\">thor</a> task instead.</p>\n"}], "owner": {"reputation": 528, "user_id": 6571468, "user_type": "registered", "accept_rate": 17, "profile_image": "https://i.stack.imgur.com/ldBvQ.png?s=128&g=1", "display_name": "bilge", "link": "https://stackoverflow.com/users/6571468/bilge"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 52, "favorite_count": 0, "accepted_answer_id": 42253867, "answer_count": 1, "score": 0, "last_activity_date": 1487173485, "creation_date": 1487166369, "last_edit_date": 1487167156, "question_id": 42251135, "link": "https://stackoverflow.com/questions/42251135/how-ruby-on-rails-run-script-file-without-interact", "title": "How Ruby on Rails run script file without interact?", "body": "<p>I am trying to run script file, backyard of application. When server started, the script must be run; until server stop. \nI know <code>rails runner</code> command; but my script contain database process(insert), and return error named:</p>\n\n<pre><code>: uninitialized constant DataRecord (NameError)\n</code></pre>\n\n<p>script.rb :</p>\n\n<pre><code># \n# Some codes here\n#\n\nDataRecord.create(sensor_id: data[0].to_s, temperature: data[1].to_f, humudity: data[2].to_f)\n\n# \n# And some codes here..\n#\n\n-----------------------------------------------------------------\n</code></pre>\n\n<p>DataRecord is my model. It can run on 'application_controller', of course with interaction. Someone must enter the website. I don't want it. </p>\n\n<p>data_record.rb :</p>\n\n<pre><code>class DataRecord &lt; ApplicationRecord\nend\n</code></pre>\n\n<p>application_record.rb:</p>\n\n<pre><code>class ApplicationRecord &lt; ActiveRecord::Base\nself.abstract_class = true\nend\n</code></pre>\n\n<p>activerecord gem is installed.</p>\n\n<pre><code>~$ ruby -v\nruby 2.3.1p112\n\n~$ rails -v \nRails 5.0.1\n</code></pre>\n"}, {"tags": ["ruby", "debugging", "eval", "pry"], "owner": {"reputation": 31, "user_id": 7569085, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f3b6699019951a134f088845374e2604?s=128&d=identicon&r=PG&f=1", "display_name": "\u0410\u043b\u0435\u043a\u0441\u0435\u0439 \u0421\u0430\u0434\u043e\u0432\u043d\u0438\u043a\u043e\u0432", "link": "https://stackoverflow.com/users/7569085/%d0%90%d0%bb%d0%b5%d0%ba%d1%81%d0%b5%d0%b9-%d0%a1%d0%b0%d0%b4%d0%be%d0%b2%d0%bd%d0%b8%d0%ba%d0%be%d0%b2"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 484, "favorite_count": 0, "answer_count": 0, "score": 3, "last_activity_date": 1487166934, "creation_date": 1487165744, "last_edit_date": 1487166934, "question_id": 42250894, "link": "https://stackoverflow.com/questions/42250894/next-doesnt-work-when-call-binding-pry-from-eval", "title": "&quot;Next&quot; doesn&#39;t work when call binding.pry from eval(...)", "body": "<p>When i run script with binding.pry using eval() i see this error: </p>\n\n<blockquote>\n  <p>Error: Cannot find local context. Did you use <code>binding.pry</code>?</p>\n</blockquote>\n\n<p>test.rb:</p>\n\n<pre><code>require 'pry'\n\ndef a\n  binding.pry\n  puts 'Hello'\nend\n\na\n</code></pre>\n\n<p>runner.rb:</p>\n\n<pre><code>script = File.read('test.rb')\neval script\n</code></pre>\n\n<p>output:</p>\n\n<pre><code>$ ruby runner.rb   \n[1] pry(main)&gt; next \nError: Cannot find local context. Did you use `binding.pry`?\n[2] pry(main)&gt; continue \nError: Cannot find local context. Did you use `binding.pry`?\n[3] pry(main)&gt;\n</code></pre>\n\n<p>I need to call binding.pry from script, but I can't edit runner.rb</p>\n\n<pre><code>$ gem list\n...\npry (0.10.4)\npry-byebug (3.4.2)\n...\n\n$ ruby -v\nruby 2.3.1p112 (2016-04-26) [x86_64-linux-gnu]\n</code></pre>\n"}, {"tags": ["ruby", "sinatra", "database-migration", "sequel", "rake-task"], "answers": [{"comments": [{"owner": {"reputation": 671, "user_id": 4114896, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/67bfa1ead5b0ceda5fbb5b3ea772f359?s=128&d=identicon&r=PG", "display_name": "MatzFan", "link": "https://stackoverflow.com/users/4114896/matzfan"}, "edited": false, "score": 0, "creation_date": 1487254832, "post_id": 42256165, "comment_id": 71709236, "body": "Many thanks Jeremy, all fixed &amp; thanks for <code>Sequel</code> - best ORM out there"}], "tags": [], "owner": {"reputation": 11331, "user_id": 132053, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f183bcc4176b308c9edabe79299e448f?s=128&d=identicon&r=PG", "display_name": "Jeremy Evans", "link": "https://stackoverflow.com/users/132053/jeremy-evans"}, "is_accepted": true, "score": 2, "last_activity_date": 1487179364, "creation_date": 1487179364, "answer_id": 42256165, "question_id": 42250298, "link": "https://stackoverflow.com/questions/42250298/sequelerror-mismatched-number-of-keys-when-migration-run-from-rake/42256165#42256165", "title": "`Sequel::Error: mismatched number of keys` when migration run from rake", "body": "<p>You migrations should not require your application/model code, they should only require that <code>DB</code> is set correctly.  Modify your application code so that you can require a separate file that sets up <code>DB</code>, and then load only that file when running your migrations.</p>\n"}], "owner": {"reputation": 671, "user_id": 4114896, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/67bfa1ead5b0ceda5fbb5b3ea772f359?s=128&d=identicon&r=PG", "display_name": "MatzFan", "link": "https://stackoverflow.com/users/4114896/matzfan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 568, "favorite_count": 0, "accepted_answer_id": 42256165, "answer_count": 1, "score": 1, "last_activity_date": 1487185020, "creation_date": 1487164059, "last_edit_date": 1487185020, "question_id": 42250298, "link": "https://stackoverflow.com/questions/42250298/sequelerror-mismatched-number-of-keys-when-migration-run-from-rake", "title": "`Sequel::Error: mismatched number of keys` when migration run from rake", "body": "<p>I have a Sinatra app using Sequel and a rake task to perform migrations. When I run <code>rake db:migrate</code> I get the following error:</p>\n\n<pre><code>rake aborted!\nSequel::Error: mismatched number of keys: [:rows, :cols] vs [:id]\n&lt;path_to_project&gt;/models/grid_pattern.rb:4:in `&lt;class:GridPattern&gt;'\n</code></pre>\n\n<p>The workaround is to temporarily comment out this line requiring my models in my app file:</p>\n\n<pre><code>Dir.glob('./{models}/*.rb').each { |file| require file }\n</code></pre>\n\n<p>I know in Sequel I should not depend on models in migrations, but how can I avoid this, as my app needs the models and the rake task needs the app?</p>\n\n<p>My model looks like this:</p>\n\n<pre><code># grid pattern\nclass GridPattern &lt; Sequel::Model\n  unrestrict_primary_key\n  one_to_many :widgets, key: [:rows, :cols]\nend\n</code></pre>\n\n<p>Associated Widgets model:</p>\n\n<pre><code>class Widget &lt; Sequel::Model\n  many_to_one :grid_pattern, key: [:rows, :cols]\n...\n</code></pre>\n\n<p>Rakefile:</p>\n\n<pre><code>namespace :db do\n  desc 'Migrate DB [to version]'\n  task :migrate, [:version] do |_t, args|\n    ARGV.each { |a| task a.to_sym }\n    RACK_ENV = ARGV[1] if ARGV[1]\n    require_relative 'app' # DB now set as per RACK_ENV\n    db_name = URI(settings.database).path[1..-1]\n    if args[:version]\n      puts \"Migrating '#{db_name}' to version #{args[:version]}\"\n      Sequel::Migrator.run(DB, 'db/migrations', target: args[:version].to_i)\n    else\n      puts \"Migrating '#{db_name}' to latest\"\n      Sequel::Migrator.run(DB, 'db/migrations')\n    end\n  end\nend\n</code></pre>\n\n<p>Migration file:</p>\n\n<pre><code>...\ncreate_table :grid_patterns do\n  Integer :row\n  Integer :col\n  primary_key [:row, :col], name: :grids_pk\nend\n\ncreate_table :widgets do\n  primary_key :id\n  Integer :rows\n  Integer :cols\n  foreign_key [:rows, :cols], :grid_patterns, name: 'challenges_grid_fkey'\nend\n...\n</code></pre>\n\n<p>How can I fix this?</p>\n"}, {"tags": ["ruby", "rake"], "answers": [{"comments": [{"owner": {"reputation": 7004, "user_id": 1103606, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/0d93cc650b93939ea91066fcb5aefae0?s=128&d=identicon&r=PG", "display_name": "Peter Penzov", "link": "https://stackoverflow.com/users/1103606/peter-penzov"}, "edited": false, "score": 0, "creation_date": 1487164308, "post_id": 42250278, "comment_id": 71658531, "body": "I get <code>ArgumentError: wrong number of arguments (2 for 0)</code> Looks like this is not the solution."}, {"owner": {"reputation": 27144, "user_id": 3857758, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/58c4295826435f049b7fc32b98c240f9?s=128&d=identicon&r=PG&f=1", "display_name": "Ursus", "link": "https://stackoverflow.com/users/3857758/ursus"}, "reply_to_user": {"reputation": 7004, "user_id": 1103606, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/0d93cc650b93939ea91066fcb5aefae0?s=128&d=identicon&r=PG", "display_name": "Peter Penzov", "link": "https://stackoverflow.com/users/1103606/peter-penzov"}, "edited": false, "score": 0, "creation_date": 1487164674, "post_id": 42250278, "comment_id": 71658748, "body": "I think you messed up things a bit. I updated my answer."}], "tags": [], "owner": {"reputation": 27144, "user_id": 3857758, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/58c4295826435f049b7fc32b98c240f9?s=128&d=identicon&r=PG&f=1", "display_name": "Ursus", "link": "https://stackoverflow.com/users/3857758/ursus"}, "is_accepted": true, "score": 1, "last_activity_date": 1487164626, "last_edit_date": 1487164626, "creation_date": 1487164009, "answer_id": 42250278, "question_id": 42250237, "link": "https://stackoverflow.com/questions/42250237/nameerror-uninitialized-constant-factory-in-ruby/42250278#42250278", "title": "NameError: uninitialized constant Factory in ruby", "body": "<p>Shouldn't be <code>FactoryGirl</code>? Try this</p>\n\n<pre><code>FactoryGirl.define do\n  factory :fake_address, :class =&gt; 'Address' do |a|\n    a.first_name { Faker::Name.first_name }\n    a.last_name  { Faker::Name.last_name }\n  end\nend\n</code></pre>\n"}], "owner": {"reputation": 7004, "user_id": 1103606, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/0d93cc650b93939ea91066fcb5aefae0?s=128&d=identicon&r=PG", "display_name": "Peter Penzov", "link": "https://stackoverflow.com/users/1103606/peter-penzov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 313, "favorite_count": 0, "accepted_answer_id": 42250278, "answer_count": 1, "score": 0, "last_activity_date": 1487164626, "creation_date": 1487163928, "question_id": 42250237, "link": "https://stackoverflow.com/questions/42250237/nameerror-uninitialized-constant-factory-in-ruby", "title": "NameError: uninitialized constant Factory in ruby", "body": "<p>I get error when I run this code:</p>\n\n<pre><code>Factory.define :fake_address, :class =&gt; 'Address' do |a|\n  a.first_name { Faker::Name.first_name }\n  a.last_name  { Faker::Name.last_name }\nend\n\nNameError: uninitialized constant Factory\n</code></pre>\n\n<p>Do you know how I can solve this issue?</p>\n"}, {"tags": ["ruby", "rubygems"], "comments": [{"owner": {"reputation": 74087, "user_id": 214790, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f878c8230342730990acd21f889301d4?s=128&d=identicon&r=PG", "display_name": "matt", "link": "https://stackoverflow.com/users/214790/matt"}, "edited": false, "score": 0, "creation_date": 1487176056, "post_id": 42250066, "comment_id": 71667501, "body": "Can you add the results of the commands <code>gem contents mygem</code> (<code>gem contents diggy</code> in this case), and also <code>git status</code> (from within your gems development directory)."}], "answers": [{"tags": [], "owner": {"reputation": 18484, "user_id": 1160916, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/480fec4ec9bf207c739b4bd38ea98aec?s=128&d=identicon&r=PG", "display_name": "Ashitaka", "link": "https://stackoverflow.com/users/1160916/ashitaka"}, "is_accepted": false, "score": 0, "last_activity_date": 1487168199, "creation_date": 1487168199, "answer_id": 42251829, "question_id": 42250066, "link": "https://stackoverflow.com/questions/42250066/require-in-gem-dont-work/42251829#42251829", "title": "Require in gem don&#39;t work", "body": "<p>Assuming your main file is named <code>mygem.rb</code> and is inside the <code>lib</code> folder, you should be able to require the file <code>lib/mygem/client.rb</code> with:</p>\n\n<pre><code>require 'mygem/client'\n</code></pre>\n\n<p>Notice that I didn't use the <code>.rb</code> extension.</p>\n"}], "owner": {"reputation": 694, "user_id": 4939621, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/c7fdbae9cc6be97bb6140d64776266ab?s=128&d=identicon&r=PG&f=1", "display_name": "Mr. A", "link": "https://stackoverflow.com/users/4939621/mr-a"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 142, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1487168199, "creation_date": 1487163457, "question_id": 42250066, "link": "https://stackoverflow.com/questions/42250066/require-in-gem-dont-work", "title": "Require in gem don&#39;t work", "body": "<p>I created gem with bundler and puts all my ruby files into '/lib' as documentation suggested.\nBut I have a problem, after build the gem which \"rake build\" command and install (gem install pkg/gem) I can't use it because: </p>\n\n<blockquote>\n  <p>LoadError: cannot load such file -- mygem/client</p>\n</blockquote>\n\n<p>this is cause because in main file i try to require 'mygem/client.rb' which is in lib/mygem/client.rb\nand it is doesn't work :/ </p>\n\n<p>This is my gemspec:</p>\n\n<pre><code># coding: utf-8\nlib = File.expand_path('../lib', __FILE__)\n$LOAD_PATH.unshift(lib) unless $LOAD_PATH.include?(lib)\nrequire 'diggy/version'\n\nGem::Specification.new do |spec|\n  spec.name          = \"diggy\"\n  spec.version       = Diggy::VERSION\n  spec.authors       = [\"\"]\n  spec.email         = [\"\"]\n\n  spec.summary       = %q{: Write a short summary, because Rubygems requires one.}\n  spec.description   = %q{: Write a longer description or delete this line.}\n  spec.homepage      = \"\"\n\n  # Prevent pushing this gem to RubyGems.org. To allow pushes either set the 'allowed_push_host'\n  # to allow pushing to a single host or delete this section to allow pushing to any host.\n  if spec.respond_to?(:metadata)\n    spec.metadata['allowed_push_host'] = \"TODO: Set to 'http://mygemserver.com'\"\n  else\n    raise \"RubyGems 2.0 or newer is required to protect against \" \\\n      \"public gem pushes.\"\n  end\n\n  spec.files         = `git ls-files -z`.split(\"\\x0\")\n  spec.bindir        = \"exe\"\n  spec.executables   = spec.files.grep(%r{^exe/}) { |f| File.basename(f) }\n  spec.require_paths = [\"lib\"]\n\n  spec.add_development_dependency \"bundler\", \"~&gt; 1.14\"\n  spec.add_development_dependency \"rake\", \"~&gt; 10.0\"\nend\n</code></pre>\n"}, {"tags": ["arrays", "ruby", "compare"], "comments": [{"owner": {"reputation": 3273, "user_id": 5021963, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/t7Qsr.png?s=128&g=1", "display_name": "Ed de Almeida", "link": "https://stackoverflow.com/users/5021963/ed-de-almeida"}, "edited": false, "score": 0, "creation_date": 1487163584, "post_id": 42249726, "comment_id": 71658040, "body": "Do you really have to use this data structure? This would be much better represented by a hash object."}, {"owner": {"reputation": 193, "user_id": 6500563, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/79d8d08238533616559c33c5650255b1?s=128&d=identicon&r=PG&f=1", "display_name": "mila002", "link": "https://stackoverflow.com/users/6500563/mila002"}, "reply_to_user": {"reputation": 3273, "user_id": 5021963, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/t7Qsr.png?s=128&g=1", "display_name": "Ed de Almeida", "link": "https://stackoverflow.com/users/5021963/ed-de-almeida"}, "edited": false, "score": 0, "creation_date": 1487163776, "post_id": 42249726, "comment_id": 71658158, "body": "Unfortunately yes..."}, {"owner": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "edited": false, "score": 0, "creation_date": 1487164735, "post_id": 42249726, "comment_id": 71658790, "body": "What did you try?"}], "answers": [{"tags": [], "owner": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "is_accepted": false, "score": 1, "last_activity_date": 1487165201, "creation_date": 1487165201, "answer_id": 42250695, "question_id": 42249726, "link": "https://stackoverflow.com/questions/42249726/comparing-two-arrays-and-combining-them-ruby/42250695#42250695", "title": "Comparing two arrays and combining them Ruby", "body": "<p>You didn't provide any code, so I won't write a complete solution. As @EddeAlmeida commented, it would be much easier to work with an array of hashes. Here's a basic structure to convert your data forth and back :</p>\n\n<pre><code>require 'pp'\n\narr1 = [[[\"name\", \"Alex\"],[\"age\", \"4\"], [\"width\", \"55\"], [\"weight\", \"30\"], [\"species\", \"Alex\"], [\"female\", \"yes\"], [\"group\"]], [[\"name\", \"All\"],[\"age\", \"7\"], [\"width\", \"26\"], [\"weight\", \"3\"], [\"species\", \"cat\"], [\"female\", \"no\"], [\"group\"]]]\n\narr2 = [[\"A23\", \"All\", \"Katy\", \"Max\"], [\"B23\", \"Sisi\", \"Alex\"]]\n\ndata = arr1.map { |a| a.tap { |x| x.last[1] = '' }.to_h }\n\npp data\n# [{\"name\"=&gt;\"Alex\",\n#   \"age\"=&gt;\"4\",\n#   \"width\"=&gt;\"55\",\n#   \"weight\"=&gt;\"30\",\n#   \"species\"=&gt;\"Alex\",\n#   \"female\"=&gt;\"yes\",\n#   \"group\"=&gt;\"\"},\n#  {\"name\"=&gt;\"All\",\n#   \"age\"=&gt;\"7\",\n#   \"width\"=&gt;\"26\",\n#   \"weight\"=&gt;\"3\",\n#   \"species\"=&gt;\"cat\",\n#   \"female\"=&gt;\"no\",\n#   \"group\"=&gt;\"\"}]\n\narr2.each do |code, *names|\n  # add some logic here\nend\n\n# Coming back to (weird) nested arrays :\np data.map{|h| h.to_a}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 193, "user_id": 6500563, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/79d8d08238533616559c33c5650255b1?s=128&d=identicon&r=PG&f=1", "display_name": "mila002", "link": "https://stackoverflow.com/users/6500563/mila002"}, "is_accepted": false, "score": 0, "last_activity_date": 1487189717, "creation_date": 1487189717, "answer_id": 42259164, "question_id": 42249726, "link": "https://stackoverflow.com/questions/42249726/comparing-two-arrays-and-combining-them-ruby/42259164#42259164", "title": "Comparing two arrays and combining them Ruby", "body": "<p>I've done it like that:</p>\n\n<pre><code>arr1.each do |data|\n    a = data[0][1]\n    b = \"\"\n    arr2.each do |x|\n        if (x.include?(a)) then\n            b &lt;&lt; \"#{x[0]} \"\n        end\n    end\ndata[6].push(b)\n</code></pre>\n\n<p>end</p>\n"}, {"tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": false, "score": 0, "last_activity_date": 1487195797, "creation_date": 1487195797, "answer_id": 42260824, "question_id": 42249726, "link": "https://stackoverflow.com/questions/42249726/comparing-two-arrays-and-combining-them-ruby/42260824#42260824", "title": "Comparing two arrays and combining them Ruby", "body": "<pre><code>arr1 = [\n        [[\"name\", \"Alex\"],[\"age\", \"4\"], [\"width\", \"55\"], [\"weight\", \"30\"],\n         [\"species\", \"Alex\"], [\"female\", \"yes\"], [\"group\"]],\n        [[\"name\", \"All\"],[\"age\", \"7\"], [\"width\", \"26\"], [\"weight\", \"3\"],\n         [\"species\", \"cat\"], [\"female\", \"no\"], [\"group\"]]\n       ]\n\narr2 = [[\"A23\", \"All\", \"Katy\", \"Max\"], [\"B23\", \"Sisi\", \"Alex\"]]\n</code></pre>\n\n<p>Here is a way that allows the elements of each element of <code>arr1</code> to be in any order, and maintains that order after the element containing <code>\"group\"</code> is modified.</p>\n\n<pre><code>h2 = arr2.each_with_object({}) { |(first,*rest),h| rest.each { |s| h[s] = first } }\n  #=&gt; {\"All\"=&gt;\"A23\", \"Katy\"=&gt;\"A23\", \"Max\"=&gt;\"A23\", \"Sisi\"=&gt;\"B23\", \"Alex\"=&gt;\"B23\"}\n\narr1.map do |a|\n  h = a.each_with_object({}) { |(k,v),h| h[k]=v }\n  h[\"group\"] = h2[h[\"name\"]]\n  h.to_a\nend\n  #=&gt; [[[\"name\", \"Alex\"], [\"age\", \"4\"], [\"width\", \"55\"], [\"weight\", \"30\"],\n  #     [\"species\", \"Alex\"], [\"female\", \"yes\"], [\"group\", \"B23\"]],\n  #    [[\"name\", \"All\"], [\"age\", \"7\"], [\"width\", \"26\"], [\"weight\", \"3\"],\n  #     [\"species\", \"cat\"], [\"female\", \"no\"], [\"group\", \"A23\"]]] \n</code></pre>\n\n<p>Use <code>Array#map</code> if <code>arr1</code> is not to be mutated.</p>\n\n<p>The block calculation for the first of the two elements of <code>arr1</code> is as follows.</p>\n\n<pre><code>a = arr1.first\n  #=&gt; [[\"name\", \"Alex\"], [\"age\", \"4\"], [\"width\", \"55\"], [\"weight\", \"30\"],\n  #    [\"species\", \"Alex\"], [\"female\", \"yes\"], [\"group\"]]\nh = a.each_with_object({}) { |(k,v),h| h[k]=v }\n  #=&gt; {\"name\"=&gt;\"Alex\", \"age\"=&gt;\"4\", \"width\"=&gt;\"55\", \"weight\"=&gt;\"30\",\n  #    \"species\"=&gt;\"Alex\", \"female\"=&gt;\"yes\", \"group\"=&gt;nil}\nv = h[\"name\"]\n  #=&gt; \"Alex\"\nh[\"group\"] = h2[v]\n  #=&gt; h2[\"Alex\"] =&gt; \"B23\" \nh #=&gt; {\"name\"=&gt;\"Alex\", \"age\"=&gt;\"4\", \"width\"=&gt;\"55\", \"weight\"=&gt;\"30\",\n  #    \"species\"=&gt;\"Alex\", \"female\"=&gt;\"yes\", \"group\"=&gt;\"B23\"} \nh.to_a\n  #=&gt; [[\"name\", \"Alex\"], [\"age\", \"4\"], [\"width\", \"55\"], [\"weight\", \"30\"],\n  #    [\"species\", \"Alex\"], [\"female\", \"yes\"], [\"group\", \"B23\"]] \n</code></pre>\n\n<p>The calculation is similar for the second element of <code>arr1</code>.</p>\n"}], "owner": {"reputation": 193, "user_id": 6500563, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/79d8d08238533616559c33c5650255b1?s=128&d=identicon&r=PG&f=1", "display_name": "mila002", "link": "https://stackoverflow.com/users/6500563/mila002"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 45, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1487195797, "creation_date": 1487162479, "question_id": 42249726, "link": "https://stackoverflow.com/questions/42249726/comparing-two-arrays-and-combining-them-ruby", "title": "Comparing two arrays and combining them Ruby", "body": "<p>I have two arrays</p>\n\n<pre><code>arr1 = [[[\"name\", \"Alex\"],[\"age\", \"4\"], [\"width\", \"55\"], [\"weight\", \"30\"], [\"species\", \"Alex\"], [\"female\", \"yes\"], [\"group\"]], [[\"name\", \"All\"],[\"age\", \"7\"], [\"width\", \"26\"], [\"weight\", \"3\"], [\"species\", \"cat\"], [\"female\", \"no\"], [\"group\"]]]\n\narr2 = [[\"A23\", \"All\", \"Katy\", \"Max\"], [\"B23\", \"Sisi\", \"Alex\"]]\n</code></pre>\n\n<p>and if name eg. value Alex form the arr2 is like value Alex from the arr1, the value B23 from arr2 is pushed to subarray [\"group\"] to the first array. So I want to get </p>\n\n<pre><code>arr1 = [[[\"name\", \"Alex\"],[\"age\", \"4\"], [\"width\", \"55\"], [\"weight\", \"30\"], [\"species\", \"Alex\"], [\"female\", \"yes\"], [\"group\", \"B23\"]], [[\"name\", \"All\"],[\"age\", \"7\"], [\"width\", \"26\"], [\"weight\", \"3\"], [\"species\", \"cat\"], [\"female\", \"no\"], [\"group\", \"A23\"]]]\n</code></pre>\n\n<p>How to compare and combine those arrays?</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 1, "creation_date": 1487169578, "post_id": 42249606, "comment_id": 71662298, "body": "<i>&quot;I always get 1 back&quot;</i> \u2013 that&#39;s unusual, it should raise a <code>NoMethodError</code> because <code>Hash</code> doesn&#39;t respond to <code>policy</code>."}, {"owner": {"reputation": 24638, "user_id": 302533, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/6rsH5.jpg?s=128&g=1", "display_name": "Cameron", "link": "https://stackoverflow.com/users/302533/cameron"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1487170162, "post_id": 42249606, "comment_id": 71662755, "body": "@Stefan <code>search_results.count { |sr| sr.policy.isActive }</code> worked for me. I&#39;m using RubyMine and also new to Ruby, so I took a guess at how the search_results displayed in Evaluate Expression would look as just code to show on here. If it&#39;s not a hash and that syntax worked... what is it?"}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 1, "creation_date": 1487171099, "post_id": 42249606, "comment_id": 71663469, "body": "<code>search_results.first.class</code> should reveal its actual class."}, {"owner": {"reputation": 24638, "user_id": 302533, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/6rsH5.jpg?s=128&g=1", "display_name": "Cameron", "link": "https://stackoverflow.com/users/302533/cameron"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1487171284, "post_id": 42249606, "comment_id": 71663628, "body": "@Stefan Gives me <code>result = {class} SearchResult</code>."}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 1, "creation_date": 1487172613, "post_id": 42249606, "comment_id": 71664721, "body": "Seems like you have a custom class <code>SearchResult</code>, not a plain <code>Hash</code>"}], "answers": [{"tags": [], "owner": {"reputation": 47232, "user_id": 1772830, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Qtoqg.jpg?s=128&g=1", "display_name": "Andrey Deineko", "link": "https://stackoverflow.com/users/1772830/andrey-deineko"}, "is_accepted": true, "score": 1, "last_activity_date": 1487162566, "last_edit_date": 1487162566, "creation_date": 1487162177, "answer_id": 42249621, "question_id": 42249606, "link": "https://stackoverflow.com/questions/42249606/get-count-of-items-that-have-a-value-in-ruby/42249621#42249621", "title": "Get count of items that have a value in Ruby", "body": "<p>You access hash key-value pair with <code>[]</code>, not <code>.</code>.</p>\n\n<pre><code>search_results.count { |hash| hash[:policy][:isActive] }\n</code></pre>\n\n<p>If you're using newer Ruby version, you can make use of <a href=\"http://ruby-doc.org/core-2.4.0/Hash.html#method-i-dig\" rel=\"nofollow noreferrer\">Hash#<code>dig</code></a> (Ruby 2.3+) and <a href=\"http://ruby-doc.org/core-2.4.0/Enumerable.html#method-i-sum\" rel=\"nofollow noreferrer\">Enumerable#<code>sum</code></a> (Ruby 2.4+):</p>\n\n<pre><code>search_results.sum { |hash| hash.dig(:policy, :isActive) }\n</code></pre>\n"}], "owner": {"reputation": 24638, "user_id": 302533, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/6rsH5.jpg?s=128&g=1", "display_name": "Cameron", "link": "https://stackoverflow.com/users/302533/cameron"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 94, "favorite_count": 0, "accepted_answer_id": 42249621, "answer_count": 1, "score": 0, "last_activity_date": 1487162566, "creation_date": 1487162114, "last_edit_date": 1487162193, "question_id": 42249606, "link": "https://stackoverflow.com/questions/42249606/get-count-of-items-that-have-a-value-in-ruby", "title": "Get count of items that have a value in Ruby", "body": "<p>I have an Array like so:</p>\n\n<pre><code>search_results = [{policy: {isActive: true}}]\n</code></pre>\n\n<p>And I want to get the count of <code>search_result</code>s where <code>isActive</code> is true. In this case, the Array only contains 1 item whose <code>policy</code> <code>isActive</code> object is <code>true</code>.</p>\n\n<p>I tried with:</p>\n\n<pre><code>search_results.group_by { |x| x.policy.isActive }.count\n</code></pre>\n\n<p>However I always get <code>1</code> back. Regardless if <code>isActive</code> is true or false.</p>\n"}, {"tags": ["ruby", "ruby-on-rails-4", "activeadmin", "circular-dependency"], "comments": [{"owner": {"reputation": 11059, "user_id": 246544, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/Eiz7D.jpg?s=128&g=1", "display_name": "Fivell", "link": "https://stackoverflow.com/users/246544/fivell"}, "edited": false, "score": 0, "creation_date": 1487373494, "post_id": 42249562, "comment_id": 71772922, "body": "why you need <code>app&#47;admin&#47;user.rb</code> if you removed active_admin"}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 7215648, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7ec7efee2ad5a008d20e3a4f331c36e8?s=128&d=identicon&r=PG&f=1", "display_name": "Ums Kumar", "link": "https://stackoverflow.com/users/7215648/ums-kumar"}, "edited": false, "score": 0, "creation_date": 1487163984, "post_id": 42250090, "comment_id": 71658302, "body": "Yes, I have removed all the file but still getting this issue from production. No issue from local and staging.   Any idea..?"}, {"owner": {"reputation": 1, "user_id": 7215648, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7ec7efee2ad5a008d20e3a4f331c36e8?s=128&d=identicon&r=PG&f=1", "display_name": "Ums Kumar", "link": "https://stackoverflow.com/users/7215648/ums-kumar"}, "edited": false, "score": 0, "creation_date": 1487243595, "post_id": 42250090, "comment_id": 71700591, "body": "RuntimeErrorenvironment Circular dependency detected while autoloading constant User"}, {"owner": {"reputation": 1, "user_id": 7215648, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7ec7efee2ad5a008d20e3a4f331c36e8?s=128&d=identicon&r=PG&f=1", "display_name": "Ums Kumar", "link": "https://stackoverflow.com/users/7215648/ums-kumar"}, "edited": false, "score": 0, "creation_date": 1487247078, "post_id": 42250090, "comment_id": 71703200, "body": "I am getting this error when my scheduler run on production. Any idea what could be the reason behind this.?"}, {"owner": {"reputation": 2788, "user_id": 4152876, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0d538506cb7d350250906243645c28d4?s=128&d=identicon&r=PG", "display_name": "Timo Schilling", "link": "https://stackoverflow.com/users/4152876/timo-schilling"}, "reply_to_user": {"reputation": 1, "user_id": 7215648, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7ec7efee2ad5a008d20e3a4f331c36e8?s=128&d=identicon&r=PG&f=1", "display_name": "Ums Kumar", "link": "https://stackoverflow.com/users/7215648/ums-kumar"}, "edited": false, "score": 0, "creation_date": 1487250807, "post_id": 42250090, "comment_id": 71705957, "body": "Did you have restarted the scheduler? Did you really deleted the files in <code>app&#47;admin</code> even on the prod server?"}, {"owner": {"reputation": 1, "user_id": 7215648, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7ec7efee2ad5a008d20e3a4f331c36e8?s=128&d=identicon&r=PG&f=1", "display_name": "Ums Kumar", "link": "https://stackoverflow.com/users/7215648/ums-kumar"}, "edited": false, "score": 0, "creation_date": 1487252186, "post_id": 42250090, "comment_id": 71706978, "body": "Yes I restarted the sidekiq."}], "tags": [], "owner": {"reputation": 2788, "user_id": 4152876, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0d538506cb7d350250906243645c28d4?s=128&d=identicon&r=PG", "display_name": "Timo Schilling", "link": "https://stackoverflow.com/users/4152876/timo-schilling"}, "is_accepted": false, "score": 1, "last_activity_date": 1487163521, "creation_date": 1487163521, "answer_id": 42250090, "question_id": 42249562, "link": "https://stackoverflow.com/questions/42249562/runtimeerrorenvironment-circular-dependency-detected-while-autoloading-constant/42250090#42250090", "title": "RuntimeErrorenvironment Circular dependency detected while autoloading constant User + Rails", "body": "<p>If you remove the activeadmin gem, you need to delete all files from <code>app/admin</code> and one line from your routes.rb <code>ActiveAdmin.routes(self)</code></p>\n"}], "owner": {"reputation": 1, "user_id": 7215648, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7ec7efee2ad5a008d20e3a4f331c36e8?s=128&d=identicon&r=PG&f=1", "display_name": "Ums Kumar", "link": "https://stackoverflow.com/users/7215648/ums-kumar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 284, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1487244244, "creation_date": 1487162024, "last_edit_date": 1487244244, "question_id": 42249562, "link": "https://stackoverflow.com/questions/42249562/runtimeerrorenvironment-circular-dependency-detected-while-autoloading-constant", "title": "RuntimeErrorenvironment Circular dependency detected while autoloading constant User + Rails", "body": "<p>After removing active_admin i am getting this error from production. Please help me how do i solved this error.</p>\n\n<pre><code>app/admin/user.rb:1&lt;top (required)&gt;\n\n\nActiveAdmin.register User do\n# See permitted parameters documentation:\n# https://github.com/activeadmin/activeadmin/blob/master/docs/2-resource-customization.md#setting-up-strong-parameters\n#\n# permit_params :list, :of, :attributes, :on, :model\n</code></pre>\n"}, {"tags": ["ios", "ruby", "automated-tests", "appium", "selenium-grid2"], "comments": [{"owner": {"reputation": 2227, "user_id": 3942186, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/OnOyW.jpg?s=128&g=1", "display_name": "Emna Ayadi", "link": "https://stackoverflow.com/users/3942186/emna-ayadi"}, "edited": false, "score": 0, "creation_date": 1487168798, "post_id": 42249337, "comment_id": 71661685, "body": "WHAT ARE THE JARS FILES YOU ARE USING ?  I THINK YOU MISS SOME FILES"}, {"owner": {"reputation": 225, "user_id": 7368913, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0178b51dcccf8b3c230c986ec36f7dd6?s=128&d=identicon&r=PG&f=1", "display_name": "David Ep", "link": "https://stackoverflow.com/users/7368913/david-ep"}, "edited": false, "score": 0, "creation_date": 1487173230, "post_id": 42249337, "comment_id": 71665208, "body": "You are forgetting something crucial here.   It&#39;s impossible to run &gt;1 IOS simulators on your mac in the same time.  Fortunately Facebook came to aid:  <a href=\"https://github.com/facebook/FBSimulatorControl\" rel=\"nofollow noreferrer\">github.com/facebook/FBSimulatorControl</a>  only after you manage to run multiple simulators on your mac, then you can start thinking about the selenium grid configrations"}, {"owner": {"reputation": 103, "user_id": 7511344, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1WpxU.png?s=128&g=1", "display_name": "Felyppe Rodrigues", "link": "https://stackoverflow.com/users/7511344/felyppe-rodrigues"}, "edited": false, "score": 0, "creation_date": 1487174484, "post_id": 42249337, "comment_id": 71666244, "body": "Emma: I&#39;m using selenium-server-standalone-2.53.0.jar and appium_lib 8.0.2."}, {"owner": {"reputation": 103, "user_id": 7511344, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1WpxU.png?s=128&g=1", "display_name": "Felyppe Rodrigues", "link": "https://stackoverflow.com/users/7511344/felyppe-rodrigues"}, "edited": false, "score": 0, "creation_date": 1487174502, "post_id": 42249337, "comment_id": 71666261, "body": "David: I&#39;m using real mobile devices, not simulators. Also, In this problem I&#39;m trying to instantiate appium in just on device, so this is not a issue here."}, {"owner": {"reputation": 103, "user_id": 7511344, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1WpxU.png?s=128&g=1", "display_name": "Felyppe Rodrigues", "link": "https://stackoverflow.com/users/7511344/felyppe-rodrigues"}, "edited": false, "score": 0, "creation_date": 1487364709, "post_id": 42249337, "comment_id": 71769211, "body": "Still stucked with this issue, any news?"}], "answers": [{"comments": [{"owner": {"reputation": 103, "user_id": 7511344, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1WpxU.png?s=128&g=1", "display_name": "Felyppe Rodrigues", "link": "https://stackoverflow.com/users/7511344/felyppe-rodrigues"}, "edited": false, "score": 0, "creation_date": 1487614228, "post_id": 42342267, "comment_id": 71853962, "body": "the java-client is for java implementation, I&#39;m using ruby. I&#39;ve downloaded the appium_lib 8.0.2 for ruby and I&#39;m using it. The selenium server jar is used to create the selenium grid and nodes."}], "tags": [], "owner": {"reputation": 11, "user_id": 7568071, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e91ee6addf3ed1e0b93c59959230f571?s=128&d=identicon&r=PG&f=1", "display_name": "M Tofey", "link": "https://stackoverflow.com/users/7568071/m-tofey"}, "is_accepted": false, "score": -1, "last_activity_date": 1487586959, "creation_date": 1487586959, "answer_id": 42342267, "question_id": 42249337, "link": "https://stackoverflow.com/questions/42249337/failure-trying-to-start-appium-driver-with-selenium-grid/42342267#42342267", "title": "Failure trying to start appium driver with selenium grid", "body": "<p>You have to download the java-client for appium and use the client instead of the selenium server.</p>\n\n<p>Link to java-client jar file > <a href=\"https://mvnrepository.com/artifact/io.appium/java-client/5.0.0-BETA3\" rel=\"nofollow noreferrer\">https://mvnrepository.com/artifact/io.appium/java-client/5.0.0-BETA3</a></p>\n"}, {"tags": [], "owner": {"reputation": 103, "user_id": 7511344, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1WpxU.png?s=128&g=1", "display_name": "Felyppe Rodrigues", "link": "https://stackoverflow.com/users/7511344/felyppe-rodrigues"}, "is_accepted": true, "score": 0, "last_activity_date": 1487771010, "creation_date": 1487771010, "answer_id": 42393181, "question_id": 42249337, "link": "https://stackoverflow.com/questions/42249337/failure-trying-to-start-appium-driver-with-selenium-grid/42393181#42393181", "title": "Failure trying to start appium driver with selenium grid", "body": "<p>Problem solved, hope no ones gets stucked with this same issue, but if they do, here is what was wrong. In the capabilities described in ruby used to start appium I was giving the selenium node port instead of appium port.</p>\n"}], "owner": {"reputation": 103, "user_id": 7511344, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1WpxU.png?s=128&g=1", "display_name": "Felyppe Rodrigues", "link": "https://stackoverflow.com/users/7511344/felyppe-rodrigues"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 527, "favorite_count": 0, "accepted_answer_id": 42393181, "answer_count": 2, "score": 1, "last_activity_date": 1487771010, "creation_date": 1487161457, "question_id": 42249337, "link": "https://stackoverflow.com/questions/42249337/failure-trying-to-start-appium-driver-with-selenium-grid", "title": "Failure trying to start appium driver with selenium grid", "body": "<p>I'm trying to run tests in real iOS devices in parallel using Appium with Selenium Grid. Currently I'm able to create the Hub, instantiate the Nodes and make Appium connected to each respective Node (checked appium_log). My problem right now is that I can't start Appium driver properly. What concerns me the most is that when I start Appium outside Selenium Grid, it runs ok. It seems to be a mismatch between Appium and Selenium Grid Capabilities, but I can't figure out what it is exactly because the error suggests that Appium is trying to load Safari driver instead of iOS driver. Below follows the error and the used configs. Sorry if not all needed information is provided, I'm new in the community, if anything is missing, please let me know so I can edit the post. Thanks in advance.</p>\n\n<p><strong>Error returned</strong></p>\n\n<pre><code>Failure/Error: Unable to find [remote server]\norg.openqa.selenium.remote.server.DefaultDriverFactory(DefaultDriverFactory.java) to read failed line\nSelenium::WebDriver::Error::UnknownError:\nThe best matching driver provider org.openqa.selenium.safari.SafariDriver can't create a new driver instance for Capabilities [{app=APP_PATH, noReset=false, newCommandTimeout=60000, browserName=iPhone, deviceName=UDID, version=9.1, launchTimeout=60000, fullReset=false, platform=MAC, autoAcceptAlerts=false}]\nBuild info: version: '2.53.0', revision: '35ae25b', time: '2016-03-15 17:00:58'\nSystem info: host: 'MacBook.local', ip: '127.0.0.1', os.name: 'Mac OS X', os.arch: 'x86_64', os.version: '10.12.2', java.version: '1.8.0_121'\nDriver info: driver.version: unknown (org.openqa.selenium.WebDriverException)\n</code></pre>\n\n<p><strong>Commands executed before starting appium driver</strong></p>\n\n<pre><code>java -jar sel/selenium-server-standalone-2.53.0.jar -role hub\nappium --full-reset -U --tmp tmp-5700/ --nodeconfig sel/node.json &gt; tmp-5700/appium.log\n</code></pre>\n\n<p><strong>node.json</strong></p>\n\n<pre><code>{\n\"capabilities\":\n[{\n\"browserName\": \"iPhone\",\n\"version\":\"9.1\",\n\"maxInstances\": 1,\n\"platform\":\"mac\"\n}],\n\"configuration\":\n{\n\"cleanUpCycle\":2000,\n\"timeout\":30000,\n\"proxy\": \"org.openqa.grid.selenium.proxy.DefaultRemoteProxy\",\n\"url\":\"http://127.0.0.1:5700/wd/hub\",\n\"host\": \"127.0.0.1\",\n\"port\": 5700,\n\"maxSession\": 1,\n\"register\": true,\n\"registerCycle\": 5000,\n\"hubPort\": 4444,\n\"hubHost\": \"127.0.0.1\"\n}\n}\n</code></pre>\n\n<p><strong>Ruby code used to start Appium Driver (which works without Selenium Grid - just have to remove appium_lib content)</strong></p>\n\n<pre><code>require 'appium_lib'\nrequire 'selenium-webdriver'\n\nopts = {\ncaps: {\nplatformName: 'ios',\nbrowserName: 'iPhone',\ndeviceName: UDID,\nplatform: 'mac',\nversion: '9.1',\napp: APP_PATH,\nlaunchTimeout: 60000,\nnewCommandTimeout: 60000,\nautoAcceptAlerts: false,\nfullReset: false,\nnoReset: false\n},\nappium_lib: {\nport: 5700,\nserver_url: \"http://127.0.0.1:5700/wd/hub\",\nwait_timeout: 30\n}\n}\n\nAppium::Driver.new(opts).start_driver\n</code></pre>\n"}, {"tags": ["ruby", "metaprogramming"], "answers": [{"comments": [{"owner": {"reputation": 21, "user_id": 871422, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1SE7c.jpg?s=128&g=1", "display_name": "waferbaby", "link": "https://stackoverflow.com/users/871422/waferbaby"}, "edited": false, "score": 0, "creation_date": 1487161270, "post_id": 42249234, "comment_id": 71656431, "body": "How would you see that working if the gem only ever wants an <code>AwesomeClass</code>, and not my own?"}, {"owner": {"reputation": 208794, "user_id": 229044, "user_type": "moderator", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/591426cbbacd4025d920467bad356911?s=128&d=identicon&r=PG&f=1", "display_name": "meagar", "link": "https://stackoverflow.com/users/229044/meagar"}, "reply_to_user": {"reputation": 21, "user_id": 871422, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1SE7c.jpg?s=128&g=1", "display_name": "waferbaby", "link": "https://stackoverflow.com/users/871422/waferbaby"}, "edited": false, "score": 1, "creation_date": 1487161351, "post_id": 42249234, "comment_id": 71656496, "body": "@DanielBogan Then the Gem is built incorrectly, that isn&#39;t how Ruby&#39;s type system is meant to work. As long as your object supports the same method calls as an <code>AwesomeClass</code>, the gem shouldn&#39;t be able to reject it."}, {"owner": {"reputation": 21, "user_id": 871422, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1SE7c.jpg?s=128&g=1", "display_name": "waferbaby", "link": "https://stackoverflow.com/users/871422/waferbaby"}, "edited": false, "score": 0, "creation_date": 1487161400, "post_id": 42249234, "comment_id": 71656545, "body": "Yeah, that makes sense. Okay, rad, thank you!"}], "tags": [], "owner": {"reputation": 208794, "user_id": 229044, "user_type": "moderator", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/591426cbbacd4025d920467bad356911?s=128&d=identicon&r=PG&f=1", "display_name": "meagar", "link": "https://stackoverflow.com/users/229044/meagar"}, "is_accepted": false, "score": 1, "last_activity_date": 1487161166, "creation_date": 1487161166, "answer_id": 42249234, "question_id": 42249189, "link": "https://stackoverflow.com/questions/42249189/extending-a-class-defined-in-a-gem/42249234#42249234", "title": "Extending a class defined in a gem", "body": "<blockquote>\n  <p>Is alias my only real option?</p>\n</blockquote>\n\n<p>Yes, if you want to open and directly modify a class. However, the better option is <em>not</em> opening 3rd party classes and monkey-patching them. You should either use inheritance, or composition: Build your own class which wraps an instance of <code>AwesomeClass</code>, provides its own <code>cool_method</code> that invokes the <code>AwesomeClass</code> method plus whatever additional functionality you need.</p>\n"}], "owner": {"reputation": 21, "user_id": 871422, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1SE7c.jpg?s=128&g=1", "display_name": "waferbaby", "link": "https://stackoverflow.com/users/871422/waferbaby"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 457, "favorite_count": 0, "closed_date": 1487161787, "answer_count": 1, "score": 0, "last_activity_date": 1487161166, "creation_date": 1487161038, "question_id": 42249189, "link": "https://stackoverflow.com/questions/42249189/extending-a-class-defined-in-a-gem", "closed_reason": "Duplicate", "title": "Extending a class defined in a gem", "body": "<p>Let's say I have a hypothetical gem, <code>my_gem</code>, that defines the class <code>AwesomeClass</code>, and the gem includes a binary that will <em>only</em> work on <code>AwesomeClass</code>, but <em>will</em> load any code in my <code>lib/</code> directory, say. I want to cleanly extend some of the class' methods, sometimes calling the equivalent of <code>super</code>.</p>\n\n<p>Let's say it looks like this:</p>\n\n<pre><code>    class AwesomeClass\n      def cool_method\n       ...\n      end\n    end\n</code></pre>\n\n<p>And over here, in my library code, I want to do something like:</p>\n\n<pre><code>    AwesomeClass.class_eval\n      def cool_method\n       (call the original method here)\n       ...\n      end\n    end\n</code></pre>\n\n<p>How would you do that? Is <code>alias</code> my only real option? Is there some nicer way I'm missing? Something other than <code>class_eval</code>?</p>\n"}, {"tags": ["ruby", "cucumber", "capybara", "site-prism"], "comments": [{"owner": {"reputation": 1783, "user_id": 1155105, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/5b77026528b6e4cf1e73b7679a9c1fa1?s=128&d=identicon&r=PG", "display_name": "mickael", "link": "https://stackoverflow.com/users/1155105/mickael"}, "edited": false, "score": 0, "creation_date": 1487161467, "post_id": 42248992, "comment_id": 71656591, "body": "I included <code>include RSpec::Matchers </code> in the class and that seems to pass the <code>expect</code> error message. However, I then got another related one, any suggestion for fixing this error, or including the <code>expect</code> in a different way?      NoMethodError: undefined method `map&#39; for #&lt;RSpec::Matchers::BuiltIn::All:0x000000067a5ac0&gt; Did you mean?  tap"}], "answers": [{"comments": [{"owner": {"reputation": 1783, "user_id": 1155105, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/5b77026528b6e4cf1e73b7679a9c1fa1?s=128&d=identicon&r=PG", "display_name": "mickael", "link": "https://stackoverflow.com/users/1155105/mickael"}, "edited": false, "score": 0, "creation_date": 1487178584, "post_id": 42255733, "comment_id": 71669383, "body": "This is related to the other question you helped me with about SitePrism. <a href=\"http://stackoverflow.com/questions/42236583/is-it-possible-to-use-siteprism-variables-to-define-new-variables-when-defining/42237203#42237203\" title=\"is it possible to use siteprism variables to define new variables when defining\">stackoverflow.com/questions/42236583/&hellip;</a>  I was just invoking a siteprism method without calling Capybara myself. Do you know if that can be done in a different way to bypass this problem?"}, {"owner": {"reputation": 42014, "user_id": 2709090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/238c2b7cde2c817fc9a5a2b8eaa2ffad?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas Walpole", "link": "https://stackoverflow.com/users/2709090/thomas-walpole"}, "reply_to_user": {"reputation": 1783, "user_id": 1155105, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/5b77026528b6e4cf1e73b7679a9c1fa1?s=128&d=identicon&r=PG", "display_name": "mickael", "link": "https://stackoverflow.com/users/1155105/mickael"}, "edited": false, "score": 0, "creation_date": 1487178848, "post_id": 42255733, "comment_id": 71669556, "body": "@mickael <code>all</code> isn&#39;t a site_prism method, it&#39;s a Capybara method that site_prism includes into the page object class.  If you&#39;re saying that your code isn&#39;t calling <code>all</code> but somewhere in site_prism is, then you will need to run with the master branch of site_prism.  There was a fix merged end of last year that fixes it - <a href=\"https://github.com/natritmeyer/site_prism/pull/162\" rel=\"nofollow noreferrer\">github.com/natritmeyer/site_prism/pull/162</a>"}, {"owner": {"reputation": 1783, "user_id": 1155105, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/5b77026528b6e4cf1e73b7679a9c1fa1?s=128&d=identicon&r=PG", "display_name": "mickael", "link": "https://stackoverflow.com/users/1155105/mickael"}, "edited": false, "score": 0, "creation_date": 1487179164, "post_id": 42255733, "comment_id": 71669794, "body": "I see, yes, it seems that site_prism it&#39;s calling it when working with sections then. One more basic doubt though. I&#39;ve got the gem version 2.9 installed, and checking rubygems.org, it seems that&#39;s the latest. Do you have a link about how I could upgrade my version to master branch if it has not been officially released? (as I guess, I could overwrite some files locally, but the framework is used by other people in the team as well)?"}, {"owner": {"reputation": 42014, "user_id": 2709090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/238c2b7cde2c817fc9a5a2b8eaa2ffad?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas Walpole", "link": "https://stackoverflow.com/users/2709090/thomas-walpole"}, "reply_to_user": {"reputation": 1783, "user_id": 1155105, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/5b77026528b6e4cf1e73b7679a9c1fa1?s=128&d=identicon&r=PG", "display_name": "mickael", "link": "https://stackoverflow.com/users/1155105/mickael"}, "edited": false, "score": 0, "creation_date": 1487179369, "post_id": 42255733, "comment_id": 71669939, "body": "In your gemfile rather than version 2.9 you can specify , <code>gem &#39;site_prism&#39;, git: &#39;https:&#47;&#47;github.com&#47;natritmeyer&#47;site_prism.git&#39;</code> to tell it use the master branch from the github repo (you can pass a :branch option too if you ever need a branch other than master)"}, {"owner": {"reputation": 1783, "user_id": 1155105, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/5b77026528b6e4cf1e73b7679a9c1fa1?s=128&d=identicon&r=PG", "display_name": "mickael", "link": "https://stackoverflow.com/users/1155105/mickael"}, "edited": false, "score": 0, "creation_date": 1487180410, "post_id": 42255733, "comment_id": 71670618, "body": "Hmm... it didn&#39;t seem to work: * Using site_prism 2.9 from <a href=\"https://github.com/natritmeyer/site_prism.git\" rel=\"nofollow noreferrer\">github.com/natritmeyer/site_prism.git</a> (at master@307d19e) * Then I was using the following expectation in a method within my SitePrism page: expect(postcode).to eq(&quot;E1&quot;) * And got the same error: NoMethodError: undefined method `map&#39; for #&lt;RSpec::Matchers::BuiltIn::All:0x0000000563a5d8&gt;  Am I doing something wrong that you can see from your end?"}, {"owner": {"reputation": 42014, "user_id": 2709090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/238c2b7cde2c817fc9a5a2b8eaa2ffad?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas Walpole", "link": "https://stackoverflow.com/users/2709090/thomas-walpole"}, "reply_to_user": {"reputation": 1783, "user_id": 1155105, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/5b77026528b6e4cf1e73b7679a9c1fa1?s=128&d=identicon&r=PG", "display_name": "mickael", "link": "https://stackoverflow.com/users/1155105/mickael"}, "edited": false, "score": 0, "creation_date": 1487180526, "post_id": 42255733, "comment_id": 71670686, "body": "What did you end up defining postcode as ? and what does the stacktrace show as the location of the <code>all</code> call?"}, {"owner": {"reputation": 1783, "user_id": 1155105, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/5b77026528b6e4cf1e73b7679a9c1fa1?s=128&d=identicon&r=PG", "display_name": "mickael", "link": "https://stackoverflow.com/users/1155105/mickael"}, "edited": false, "score": 0, "creation_date": 1487180784, "post_id": 42255733, "comment_id": 71670855, "body": "def postcode()   user_container[2].address_module[1].house_number[3].text    end  And the error mentions: from C:/Ruby23-x64/lib/ruby/gems/2.3.0/gems/site_prism-2.9/lib/si&zwnj;&#8203;te_prism/element_con&zwnj;&#8203;tainer.rb:38:in `block (2 levels) in sections&#39;"}, {"owner": {"reputation": 1783, "user_id": 1155105, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/5b77026528b6e4cf1e73b7679a9c1fa1?s=128&d=identicon&r=PG", "display_name": "mickael", "link": "https://stackoverflow.com/users/1155105/mickael"}, "edited": false, "score": 0, "creation_date": 1487181151, "post_id": 42255733, "comment_id": 71671109, "body": "Sorry, forgot to mention. In the site_prism denition I used :elements (rather than :element). ie: sections :user_container, &quot;#user_container&quot; do    sections :address_module, &quot;#address&quot; do        elements :house_number, &quot;#house_number&quot;    end end"}, {"owner": {"reputation": 42014, "user_id": 2709090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/238c2b7cde2c817fc9a5a2b8eaa2ffad?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas Walpole", "link": "https://stackoverflow.com/users/2709090/thomas-walpole"}, "reply_to_user": {"reputation": 1783, "user_id": 1155105, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/5b77026528b6e4cf1e73b7679a9c1fa1?s=128&d=identicon&r=PG", "display_name": "mickael", "link": "https://stackoverflow.com/users/1155105/mickael"}, "edited": false, "score": 0, "creation_date": 1487181418, "post_id": 42255733, "comment_id": 71671266, "body": "Umm -- usually when using a gem from a github repo the directory name would be /site_prism-&lt;SHA&gt;/...  not the version number, so maybe you&#39;re not actually using the latest version - Did you restart spring (or any other app preloaders you&#39;re using)?"}, {"owner": {"reputation": 1783, "user_id": 1155105, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/5b77026528b6e4cf1e73b7679a9c1fa1?s=128&d=identicon&r=PG", "display_name": "mickael", "link": "https://stackoverflow.com/users/1155105/mickael"}, "edited": false, "score": 0, "creation_date": 1487181556, "post_id": 42255733, "comment_id": 71671341, "body": "Ah, I just installed it on top of the previous one. I&#39;ll uninstall it completely tomorrow, reinstall the new one and retry. I&#39;ll let you know how it goes. Many thanks!!!"}, {"owner": {"reputation": 1783, "user_id": 1155105, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/5b77026528b6e4cf1e73b7679a9c1fa1?s=128&d=identicon&r=PG", "display_name": "mickael", "link": "https://stackoverflow.com/users/1155105/mickael"}, "edited": false, "score": 0, "creation_date": 1487239358, "post_id": 42255733, "comment_id": 71697383, "body": "Using bundle install doesn&#39;t seem to install the site_prism gem from git. It says: <code>Using site_prism 2.9 from https:&#47;&#47;github.com&#47;natritmeyer&#47;site_prism.git (at master@307d19e)</code> but if I check with &#39;gem list&#39; it has not installed anything."}, {"owner": {"reputation": 1783, "user_id": 1155105, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/5b77026528b6e4cf1e73b7679a9c1fa1?s=128&d=identicon&r=PG", "display_name": "mickael", "link": "https://stackoverflow.com/users/1155105/mickael"}, "edited": false, "score": 0, "creation_date": 1487239361, "post_id": 42255733, "comment_id": 71697385, "body": "Trying to install it with: <code>gem install site_prism, git: &#39;http:&#47;&#47;github.com&#47;natritmeyer&#47;site_prism.git&#39;</code> but getting another error: <code>ERROR:  Could not find a valid gem &#39;site_prism,&#39; (&gt;= 0), here is why:           Unable to download data from https:&#47;&#47;rubygems.org&#47; - SSL_connect returned=1 errno=0 state=SSLv3 read server certificate B: certificate verify failed (https:&#47;&#47;api.rubygems.org&#47;specs.4.8.gz)</code>  I need to move to another project for a day or two, so I&#39;ll try to recheck those errors in the coming days to double check. Thank you."}, {"owner": {"reputation": 1783, "user_id": 1155105, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/5b77026528b6e4cf1e73b7679a9c1fa1?s=128&d=identicon&r=PG", "display_name": "mickael", "link": "https://stackoverflow.com/users/1155105/mickael"}, "edited": false, "score": 0, "creation_date": 1487601125, "post_id": 42255733, "comment_id": 71845631, "body": "Hey @Thomas, you were correct. It seems something changed in Site Prism and that issue with the .map error got fixed when using the master branch. Strange that a new version has not been released after almost 1 year, even when there are fixes and 10 commits to master though.  Marking this as clarified. Thanks for your help!"}], "tags": [], "owner": {"reputation": 42014, "user_id": 2709090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/238c2b7cde2c817fc9a5a2b8eaa2ffad?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas Walpole", "link": "https://stackoverflow.com/users/2709090/thomas-walpole"}, "is_accepted": true, "score": 2, "last_activity_date": 1487178113, "creation_date": 1487178113, "answer_id": 42255733, "question_id": 42248992, "link": "https://stackoverflow.com/questions/42248992/nomethoderror-undefined-method-expect-when-trying-to-use-it-within-a-sitepris/42255733#42255733", "title": "NoMethodError: undefined method `expect&#39; when trying to use it within a SitePrism class", "body": "<p>As you've discovered (from your comment) you can <code>include RSpec::Matchers</code> in your page object class to get <code>expect</code> along with RSpecs default matchers.  One of those matchers is named <code>all</code> which then shadows the Capybara::DSL <code>all</code> method that previously included into the object, and produces the error you're seeing.  The way to solve that is to call the Capybara version of <code>all</code> on the current_session object (<code>page</code>) or the alias 'find_all'.  So <code>all(...).map(...)</code> becomes</p>\n\n<pre><code>page.all(...).map(...) # Same as Capybara.current_session.all(...)...\n</code></pre>\n\n<p>or</p>\n\n<pre><code>find_all(...).map(...)  # or page.find_all ...\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 373, "user_id": 6800247, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3060495c5d90b4295387d6df3b959966?s=128&d=identicon&r=PG&f=1", "display_name": "Luke Hill", "link": "https://stackoverflow.com/users/6800247/luke-hill"}, "is_accepted": false, "score": 1, "last_activity_date": 1550844148, "creation_date": 1550844148, "answer_id": 54828770, "question_id": 42248992, "link": "https://stackoverflow.com/questions/42248992/nomethoderror-undefined-method-expect-when-trying-to-use-it-within-a-sitepris/54828770#54828770", "title": "NoMethodError: undefined method `expect&#39; when trying to use it within a SitePrism class", "body": "<p><em>Old question but providing answer</em></p>\n\n<p>It's worth pointing out as well that when following the README instructions. Cucumber will have the RSpec testing functions loaded into the cucumber world.</p>\n\n<p>Dependent on who you speak to and where; it is preferable (Arguably), to perform all RSpec based testing of your features inside the Cucumber World (i.e. in step_definitions).</p>\n\n<p>Furthermore, doing this avoids you needing to include these items anywhere, and you'll get clean steps such as <code>expect(my_page.header_message.text).to eq('This')</code></p>\n\n<p>You could also use any other one, include the auto-created capybara methods which would use implicit waiting or rspec auto-included ones created from methods on your class</p>\n"}], "owner": {"reputation": 1783, "user_id": 1155105, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/5b77026528b6e4cf1e73b7679a9c1fa1?s=128&d=identicon&r=PG", "display_name": "mickael", "link": "https://stackoverflow.com/users/1155105/mickael"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4817, "favorite_count": 0, "accepted_answer_id": 42255733, "answer_count": 2, "score": 2, "last_activity_date": 1550859471, "creation_date": 1487160513, "last_edit_date": 1550859471, "question_id": 42248992, "link": "https://stackoverflow.com/questions/42248992/nomethoderror-undefined-method-expect-when-trying-to-use-it-within-a-sitepris", "title": "NoMethodError: undefined method `expect&#39; when trying to use it within a SitePrism class", "body": "<p>I've got a cucumber,ruby,siteprism project where we're using the 'rspec' gem to check expectations. This is included in our env.rb and used successfully in the step definitions.</p>\n\n<p>I was now trying to make some assertions in a SitePrism class but I am getting an error. Do you know how I could use those expect() methods?\nI tried with <code>require 'rspec'</code> plus <code>include Rspec</code> in the .rb file which is defining the SitePrism class, but I got the same error still:</p>\n\n<pre><code>expect(local_value).to eq(@previous_value)\n=&gt; Error: NoMethodError: undefined method `expect' for #&lt;xxx_Object @loaded=false&gt;\n</code></pre>\n\n<p>Thank you!</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4", "model-view-controller"], "comments": [{"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1487159629, "post_id": 42248542, "comment_id": 71655358, "body": "Nope, simply rearranging render calls should not make the error appear (or go away). Something else is going on."}, {"owner": {"reputation": 738, "user_id": 3521315, "user_type": "registered", "accept_rate": 42, "profile_image": "https://i.stack.imgur.com/w55jb.jpg?s=128&g=1", "display_name": "Mike.Whitehead", "link": "https://stackoverflow.com/users/3521315/mike-whitehead"}, "reply_to_user": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1487159779, "post_id": 42248542, "comment_id": 71655464, "body": "So it is to do with the show action, then? I have an association between events &amp; comments so do I need a method in the events_controller?"}, {"owner": {"reputation": 3160, "user_id": 1266795, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7855792dbc5f3b4c365344314e2b1ad6?s=128&d=identicon&r=PG", "display_name": "AndyV", "link": "https://stackoverflow.com/users/1266795/andyv"}, "edited": false, "score": 2, "creation_date": 1487160388, "post_id": 42248542, "comment_id": 71655871, "body": "Any chance that your &#39;comments/form&#39; instantiates a new comment by doing something like @event.comments.build?  If so, you&#39;re adding a new comment to the collection that the &#39;render @event.comments&#39; collection is trying to display... and since that new comment has not been persisted, it&#39;s created_at is nil"}, {"owner": {"reputation": 738, "user_id": 3521315, "user_type": "registered", "accept_rate": 42, "profile_image": "https://i.stack.imgur.com/w55jb.jpg?s=128&g=1", "display_name": "Mike.Whitehead", "link": "https://stackoverflow.com/users/3521315/mike-whitehead"}, "edited": false, "score": 0, "creation_date": 1487162176, "post_id": 42248542, "comment_id": 71657092, "body": "So, this needs to go in the show action?"}, {"owner": {"reputation": 483, "user_id": 7474561, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc0cb51bd61ff4715e3bec92f79f5f46?s=128&d=identicon&r=PG&f=1", "display_name": "KcUS_unico", "link": "https://stackoverflow.com/users/7474561/kcus-unico"}, "edited": false, "score": 0, "creation_date": 1487162634, "post_id": 42248542, "comment_id": 71657419, "body": "Since you want the last comment to appear first, are you somewhere checking whether created_at is &gt; ? All records, even NIL should have created_at usually. Do you check something in your model or controller?"}], "answers": [{"comments": [{"owner": {"reputation": 738, "user_id": 3521315, "user_type": "registered", "accept_rate": 42, "profile_image": "https://i.stack.imgur.com/w55jb.jpg?s=128&g=1", "display_name": "Mike.Whitehead", "link": "https://stackoverflow.com/users/3521315/mike-whitehead"}, "edited": false, "score": 0, "creation_date": 1487166933, "post_id": 42249645, "comment_id": 71660370, "body": "I understand all of this logic - and its required - however, it hasn&#39;t solved the original error. I still need to render my comments form to sit above the comments made and when I try and amend the views I get the error again."}, {"owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "reply_to_user": {"reputation": 738, "user_id": 3521315, "user_type": "registered", "accept_rate": 42, "profile_image": "https://i.stack.imgur.com/w55jb.jpg?s=128&g=1", "display_name": "Mike.Whitehead", "link": "https://stackoverflow.com/users/3521315/mike-whitehead"}, "edited": false, "score": 0, "creation_date": 1487167354, "post_id": 42249645, "comment_id": 71660677, "body": "Try using <code>form_for([commentable, Comment.new])</code> instead of <code>commentable.comments.new</code>."}, {"owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "reply_to_user": {"reputation": 738, "user_id": 3521315, "user_type": "registered", "accept_rate": 42, "profile_image": "https://i.stack.imgur.com/w55jb.jpg?s=128&g=1", "display_name": "Mike.Whitehead", "link": "https://stackoverflow.com/users/3521315/mike-whitehead"}, "edited": false, "score": 0, "creation_date": 1487167528, "post_id": 42249645, "comment_id": 71660802, "body": "It should work since you are not actually adding the the comment to the collection."}, {"owner": {"reputation": 738, "user_id": 3521315, "user_type": "registered", "accept_rate": 42, "profile_image": "https://i.stack.imgur.com/w55jb.jpg?s=128&g=1", "display_name": "Mike.Whitehead", "link": "https://stackoverflow.com/users/3521315/mike-whitehead"}, "edited": false, "score": 0, "creation_date": 1487167700, "post_id": 42249645, "comment_id": 71660933, "body": "Thanks. Do I need to add a route for the delete button as that&#39;s not showing on the page?"}, {"owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "reply_to_user": {"reputation": 738, "user_id": 3521315, "user_type": "registered", "accept_rate": 42, "profile_image": "https://i.stack.imgur.com/w55jb.jpg?s=128&g=1", "display_name": "Mike.Whitehead", "link": "https://stackoverflow.com/users/3521315/mike-whitehead"}, "edited": false, "score": 0, "creation_date": 1487167908, "post_id": 42249645, "comment_id": 71661075, "body": "If you changed the routes like I suggested, than you should already have a delete route - <code>DELETE &#47;comments&#47;:id</code>. Run <code>bin&#47;rake routes</code> to see your routes. If the button is not showing then it is because you are not associating the comment with the user. See my edit."}, {"owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "reply_to_user": {"reputation": 738, "user_id": 3521315, "user_type": "registered", "accept_rate": 42, "profile_image": "https://i.stack.imgur.com/w55jb.jpg?s=128&g=1", "display_name": "Mike.Whitehead", "link": "https://stackoverflow.com/users/3521315/mike-whitehead"}, "edited": false, "score": 0, "creation_date": 1487168138, "post_id": 42249645, "comment_id": 71661240, "body": "The link helpers and button helper would raise a error if the route could not be found."}, {"owner": {"reputation": 738, "user_id": 3521315, "user_type": "registered", "accept_rate": 42, "profile_image": "https://i.stack.imgur.com/w55jb.jpg?s=128&g=1", "display_name": "Mike.Whitehead", "link": "https://stackoverflow.com/users/3521315/mike-whitehead"}, "edited": false, "score": 0, "creation_date": 1487168610, "post_id": 42249645, "comment_id": 71661559, "body": "Hmm, still nothing. You&#39;re right about the routes and no errors so I&#39;m not drawing it out correctly. In the form I&#39;ve ommitted the manual input of &#39;name&#39; and I&#39;ve tried comment.user in the html but still nothing showing. comment.current_user just brings a no method error."}, {"owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "reply_to_user": {"reputation": 738, "user_id": 3521315, "user_type": "registered", "accept_rate": 42, "profile_image": "https://i.stack.imgur.com/w55jb.jpg?s=128&g=1", "display_name": "Mike.Whitehead", "link": "https://stackoverflow.com/users/3521315/mike-whitehead"}, "edited": false, "score": 0, "creation_date": 1487168729, "post_id": 42249645, "comment_id": 71661640, "body": "Let us <a href=\"http://chat.stackoverflow.com/rooms/135776/discussion-between-max-and-mike-whitehead\">continue this discussion in chat</a>."}], "tags": [], "owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "is_accepted": false, "score": 0, "last_activity_date": 1487168076, "last_edit_date": 1487168076, "creation_date": 1487162241, "answer_id": 42249645, "question_id": 42248542, "link": "https://stackoverflow.com/questions/42248542/rails-nomethoderror-in-eventsshow-undefined-method-for-nilnilclass/42249645#42249645", "title": "Rails - NoMethodError in Events#show undefined method `&gt;&#39; for nil:NilClass", "body": "<p>First make sure you have a nested route to create comments and an un-nested route to destroy them: </p>\n\n<pre><code>resources :events do\n  resources :comments, shallow: true, only: [:create, :destroy]\nend\n</code></pre>\n\n<p>This is called <em>shallow nesting</em> and is desirable since it lets you route directly to resource for the member actions (show, edit, update, destroy) where a resource can be directly accessed through its unique id. </p>\n\n<p>Then setup the form partial:</p>\n\n<pre><code># comments/_form.html.erb\n&lt;%= form_for([commentable, Comment.new ]) do |f| %&gt;\n\n  # ... \n&lt;% end %&gt;\n</code></pre>\n\n<p>You then want to fix your <code>events/show</code> controller and view:</p>\n\n<pre><code>def show\n  @event = Event.eager_load(:comments).find(params[:id])\nend\n</code></pre>\n\n<p>Note that we are not building a comment instance in the controller. We will do it later in the form when needed. </p>\n\n<pre><code>&lt;div id=\"comments\"&gt;\n   &lt;% if @event.comments.any? %&gt;\n     &lt;h2&gt;&lt;%= @event.comments.size %&gt;&lt;/h2&gt;\n     &lt;%= render @event.comments %&gt;\n   &lt;% else %&gt;\n     &lt;h2&gt;There are no comments yet&lt;/h2&gt;\n   &lt;% end %&gt;\n   &lt;%= render 'comments/form', commentable: @event %&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p>Another big problem is that any signed in user can delete any comment. You can fix that by setting up an association:</p>\n\n<pre><code>class Comment &lt; ApplicationRecord\n  belongs_to :user\nend\n\nclass User &lt; ApplicationRecord\n  has_many :comments\nend\n</code></pre>\n\n<p>You then want to check that the user owns the comment:</p>\n\n<pre><code>&lt;div class=\"comment clearfix\"&gt;\n  &lt;div class=\"comment_content\"&gt;\n    &lt;p class=\"comment_name\"&gt;&lt;strong&gt;&lt;%= comment.name %&gt;&lt;/strong&gt;&lt;/p&gt;\n    &lt;p class=\"comment_body\"&gt;&lt;%= comment.body %&gt;&lt;/p&gt;\n    &lt;p class=\"comment_time\"&gt;&lt;%= time_ago_in_words(comment.created_at) %&gt; Ago&lt;/p&gt;\n  &lt;/div&gt;\n\n  &lt;% if user_signed_in? &amp;&amp; comment.user == current_user %&gt;\n    &lt;% button_to 'Delete', comment, \n       method: :delete, \n       class: \"button\", \n       data: { confirm: 'Are you sure?' } \n    %&gt;\n  &lt;% end %&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p>Since we de-nested the destroy route you don't need to pass the event id as a param. Normally you want to use a library like Pundit or CanCanCan rather than spreading the authorization logic all over your application like this.</p>\n\n<h2>Added</h2>\n\n<p>For the delete button to work you need to associate the user with the comment:</p>\n\n<pre><code>def create\n  @event = Event.find(params[:event_id])\n  @comment = @event.comments.new(event_params) do |c|\n    c.user = current_user\n  end\n  # ...\nend\n</code></pre>\n"}], "owner": {"reputation": 738, "user_id": 3521315, "user_type": "registered", "accept_rate": 42, "profile_image": "https://i.stack.imgur.com/w55jb.jpg?s=128&g=1", "display_name": "Mike.Whitehead", "link": "https://stackoverflow.com/users/3521315/mike-whitehead"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 450, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1487168076, "creation_date": 1487159277, "question_id": 42248542, "link": "https://stackoverflow.com/questions/42248542/rails-nomethoderror-in-eventsshow-undefined-method-for-nilnilclass", "title": "Rails - NoMethodError in Events#show undefined method `&gt;&#39; for nil:NilClass", "body": "<p>I'm building an Events app in Rails and getting this error which seems a little odd. </p>\n\n<p><a href=\"https://i.stack.imgur.com/0caBL.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/0caBL.png\" alt=\"Comments error\"></a></p>\n\n<p>It relates to the comments section at the foot of the show page. I'm simply attempting to move my comments form to the top of the section and have all recent comments below the form. This is my view code for the show page which results in the error code above - </p>\n\n<pre><code> &lt;div id=\"comments\"&gt;\n\n                        &lt;h3&gt;Add a comment:&lt;/h3&gt;\n                            &lt;%= render \"comments/form\" %&gt;   \n                            &lt;h2&gt;&lt;%= @event.comments.count %&gt;&lt;/h2&gt;\n                            &lt;%= render @event.comments %&gt;       \n                &lt;/div&gt;\n</code></pre>\n\n<p>The reason I say its odd is that when I present the code like this (so the comments all show above the comment form) - </p>\n\n<pre><code>  &lt;div id=\"comments\"&gt;\n                    &lt;h2&gt;&lt;%= @event.comments.count %&gt;&lt;/h2&gt;\n                            &lt;%= render @event.comments %&gt;       \n                        &lt;h3&gt;Add a comment:&lt;/h3&gt;\n                            &lt;%= render \"comments/form\" %&gt;   \n                &lt;/div&gt;\n</code></pre>\n\n<p>I don't get the error code. Why would this be?</p>\n\n<p>This is the code in my comments.html -</p>\n\n<pre><code> &lt;div class=\"comment clearfix\"&gt;\n&lt;div class=\"comment_content\"&gt;\n    &lt;p class=\"comment_name\"&gt;&lt;strong&gt;&lt;%= comment.name %&gt;&lt;/strong&gt;&lt;/p&gt;\n    &lt;p class=\"comment_body\"&gt;&lt;%= comment.body %&gt;&lt;/p&gt;\n    &lt;p class=\"comment_time\"&gt;&lt;%= time_ago_in_words(comment.created_at) %&gt; Ago&lt;/p&gt;\n&lt;/div&gt;\n\n&lt;% if user_signed_in? %&gt;\n&lt;p&gt;&lt;%= link_to 'Delete', [comment.event, comment],\n                              method: :delete,\n                              class: \"button\",\n                                data: { confirm: 'Are you sure?' } %&gt;&lt;/p&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p></p>\n\n<p>The error refers to my events show action - I don't have any methods in my show action. </p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1487165248, "post_id": 42247676, "comment_id": 71659166, "body": "Defining methods and instance variables in Ruby&#39;s top-level blurs the variable scope. It might be cleaner to wrap everything in a proper class."}], "answers": [{"comments": [{"owner": {"reputation": 33085, "user_id": 2423164, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Nxbnp.jpg?s=128&g=1", "display_name": "ndnenkov", "link": "https://stackoverflow.com/users/2423164/ndnenkov"}, "edited": false, "score": 0, "creation_date": 1487159147, "post_id": 42247957, "comment_id": 71655057, "body": "I do not think this is true. Replace the <code>binding.pry</code> invocation with a simple print and you will get an error."}, {"owner": {"reputation": 1592, "user_id": 7138517, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/40228125f914cf5ef1ae7df6b98c550d?s=128&d=identicon&r=PG&f=1", "display_name": "Coolness", "link": "https://stackoverflow.com/users/7138517/coolness"}, "reply_to_user": {"reputation": 33085, "user_id": 2423164, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Nxbnp.jpg?s=128&g=1", "display_name": "ndnenkov", "link": "https://stackoverflow.com/users/2423164/ndnenkov"}, "edited": false, "score": 0, "creation_date": 1487159642, "post_id": 42247957, "comment_id": 71655367, "body": "Maybe it&#39;s a feature of <code>pry</code>? I don&#39;t know, I didn&#39;t write the article in question - just something I found. Now that you mention it, it <i>does</i> seem weird that Ruby would have hoisting."}, {"owner": {"reputation": 1592, "user_id": 7138517, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/40228125f914cf5ef1ae7df6b98c550d?s=128&d=identicon&r=PG&f=1", "display_name": "Coolness", "link": "https://stackoverflow.com/users/7138517/coolness"}, "reply_to_user": {"reputation": 33085, "user_id": 2423164, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Nxbnp.jpg?s=128&g=1", "display_name": "ndnenkov", "link": "https://stackoverflow.com/users/2423164/ndnenkov"}, "edited": false, "score": 0, "creation_date": 1487159758, "post_id": 42247957, "comment_id": 71655451, "body": "Found another article that supports the presence of hoisting: <a href=\"http://ieftimov.com/variable-hoisting-ruby\" rel=\"nofollow noreferrer\">ieftimov.com/variable-hoisting-ruby</a>  &quot;Basically, when the parser runs over the if-clause (look in weird_3.rb example file) it first declares the variable, regardless of whether it will actually be executed.&quot;"}, {"owner": {"reputation": 33085, "user_id": 2423164, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Nxbnp.jpg?s=128&g=1", "display_name": "ndnenkov", "link": "https://stackoverflow.com/users/2423164/ndnenkov"}, "edited": false, "score": 2, "creation_date": 1487160952, "post_id": 42247957, "comment_id": 71656218, "body": "True, but I wouldn&#39;t call this hoisting (not in the JS sense). Firstly, this doesn&#39;t happen method wide. Secondly, you have to pass the code where the variable is declared (even if it didn&#39;t actually get executed) to have it assigned <code>nil</code>."}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1487165085, "post_id": 42247957, "comment_id": 71659033, "body": "A local variable (with an initial value of <code>nil</code>) is created once the parser encounters an assignment (anywhere in the current scope). But its name refers to the local variable only after the assignment. Prior to the assignment, it may refer to either a local variable or a method."}, {"owner": {"reputation": 1592, "user_id": 7138517, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/40228125f914cf5ef1ae7df6b98c550d?s=128&d=identicon&r=PG&f=1", "display_name": "Coolness", "link": "https://stackoverflow.com/users/7138517/coolness"}, "edited": false, "score": 0, "creation_date": 1487166340, "post_id": 42247957, "comment_id": 71659932, "body": "Edited the post to refer to the comments."}], "tags": [], "owner": {"reputation": 1592, "user_id": 7138517, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/40228125f914cf5ef1ae7df6b98c550d?s=128&d=identicon&r=PG&f=1", "display_name": "Coolness", "link": "https://stackoverflow.com/users/7138517/coolness"}, "is_accepted": false, "score": 3, "last_activity_date": 1487166297, "last_edit_date": 1487166297, "creation_date": 1487157804, "answer_id": 42247957, "question_id": 42247676, "link": "https://stackoverflow.com/questions/42247676/is-there-something-like-javascript-hoisting-in-ruby/42247957#42247957", "title": "Is there something like JavaScript hoisting in Ruby?", "body": "<p>Your example works just fine in Ruby.</p>\n\n<p>In JavaScript, hoisting means that Javascript moves your variable declarations to the top of the current scope. According to this <a href=\"https://til.hashrocket.com/posts/c0c0dd4ef8-variable-hoisting-in-ruby\" rel=\"nofollow noreferrer\">article</a>, Ruby also does some sort of hoisting. However, it's debatable if it's in the same sense as the Javascript counterpart (see comments).</p>\n\n<p>Another reason your example probably should work is that the variables <code>@w</code> and <code>@h</code> are <code>nil</code> unless not defined, and since you <em>have</em> defined them before calling <code>calcArea</code>, they have their actual values.</p>\n"}, {"comments": [{"owner": {"reputation": 3602, "user_id": 5135452, "user_type": "registered", "accept_rate": 70, "profile_image": "https://lh6.googleusercontent.com/-wsi48VO8G5Q/AAAAAAAAAAI/AAAAAAAAAMw/p-ArCNs4cOs/photo.jpg?sz=128", "display_name": "PJCHENder", "link": "https://stackoverflow.com/users/5135452/pjchender"}, "edited": false, "score": 1, "creation_date": 1487164197, "post_id": 42249832, "comment_id": 71658444, "body": "Thanks for your explanation in detail. This makes clarify my concept."}], "tags": [], "owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "is_accepted": true, "score": 12, "last_activity_date": 1487162769, "creation_date": 1487162769, "answer_id": 42249832, "question_id": 42247676, "link": "https://stackoverflow.com/questions/42247676/is-there-something-like-javascript-hoisting-in-ruby/42249832#42249832", "title": "Is there something like JavaScript hoisting in Ruby?", "body": "<blockquote>\n  <p>I am wondering if variables and methods can be used before declaration in Ruby.</p>\n</blockquote>\n\n<p>Variables don't need to be declared in Ruby, so that part of the question doesn't make sense. Variables come into existence when they are first assigned, or, in the case of local variables, when their first assignment is <em>parsed</em>.</p>\n\n<p>Methods are <em>defined</em>, not declared. A method definition is a piece of code just like any other piece of code. It needs to be executed to take effect. You cannot call a method that doesn't exist, and a method only exists after its definition has executed.</p>\n\n<blockquote>\n  <p>Is there something like hoisting in JavaScript?</p>\n</blockquote>\n\n<p>No.</p>\n\n<blockquote>\n<pre><code>def calcArea\n  getWidth * getHeight\nend\n\ndef getWidth\n  @w\nend\ndef getHeight\n  @h\nend\n@w = 10\n@h = 20\n\np calcArea\n</code></pre>\n</blockquote>\n\n<p>This works just fine, but it has nothing to do with hoisting. You only call <code>calcArea</code> after it has been defined, so that's perfectly okay. <code>calcArea</code> calls <code>getWidth</code> and <code>getHeight</code>, but only when <code>calcArea</code> itself gets called, which is after <em>all</em> methods have been defined, so that's okay. <code>getWidth</code> and <code>getHeight</code> access <code>@w</code> and <code>@h</code>, but again, at the point that <code>getWidth</code> and <code>getHeight</code> are called, <code>@w</code> and <code>@h</code> have already been assigned, so that's okay, too. (And even if they <em>hadn't</em> been assigned, accessing them is still not an error, accessing an non-existent instance variable just evaluates to <code>nil</code>; obviously, you would then get a <code>NoMethodError</code> for trying to call <code>*</code> on <code>nil</code>, but that's very different from getting a <code>NameError</code> for a non-existent variable.)</p>\n\n<p>Some notes on coding style:</p>\n\n<ul>\n<li>Ruby uses <code>snake_case</code> for methods, parameters, local variables, instance variables, class variables, and global variables.</li>\n<li>Ruby doesn't use a <code>get</code> prefix for getters.</li>\n<li>Trivial getters should be named the same as the instance variable.</li>\n<li>Also, <code>calcArea</code> is basically a getter for the area, so it, too, should be named without a prefix.</li>\n<li>There should be a blank line after a method definition.</li>\n</ul>\n\n<p>So, according to Ruby community style, your code should look like this:</p>\n\n<pre><code>def area\n  width * height\nend\n\ndef width\n  @width\nend\n\ndef height\n  @height\nend\n\n@width  = 10\n@height = 20\n\np area\n</code></pre>\n\n<p>If this were part of a module or class definition, then you could use <code>attr_reader</code> to auto-generate the getters, and <code>attr_writer</code> to generate setters:</p>\n\n<pre><code>class Rectangle\n  attr_reader :width, :height\n\n  def area\n    width * height\n  end\n\n  private\n\n  attr_writer :width, :height\n\n  def initialize(width, height)\n    self.width, self.height = width, height\n  end\nend\n\nrect = Rectangle.new(10, 20)\n\np rect.area\n</code></pre>\n"}], "owner": {"reputation": 3602, "user_id": 5135452, "user_type": "registered", "accept_rate": 70, "profile_image": "https://lh6.googleusercontent.com/-wsi48VO8G5Q/AAAAAAAAAAI/AAAAAAAAAMw/p-ArCNs4cOs/photo.jpg?sz=128", "display_name": "PJCHENder", "link": "https://stackoverflow.com/users/5135452/pjchender"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1142, "favorite_count": 0, "accepted_answer_id": 42249832, "answer_count": 2, "score": 4, "last_activity_date": 1487166297, "creation_date": 1487156970, "last_edit_date": 1487157245, "question_id": 42247676, "link": "https://stackoverflow.com/questions/42247676/is-there-something-like-javascript-hoisting-in-ruby", "title": "Is there something like JavaScript hoisting in Ruby?", "body": "<p>I am wondering if variables and methods can be used before declaration in Ruby. Is there something like hoisting in JavaScript?</p>\n\n<pre><code>def calcArea\n  getWidth * getHeight\nend\n\ndef getWidth\n  @w\nend\ndef getHeight\n  @h\nend\n@w = 10\n@h = 20\n\np calcArea\n</code></pre>\n"}, {"tags": ["ruby", "yaml", "amazon-elastic-beanstalk"], "comments": [{"owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "edited": false, "score": 2, "creation_date": 1487158479, "post_id": 42247535, "comment_id": 71654629, "body": "Although the <a href=\"http://www.yaml.org/spec/1.2/spec.html#id2777534\" rel=\"nofollow noreferrer\"><b>specs</b></a> tell that even an indentation by just one space is okay, I wouldn&#39;t be too surprised if tools would expect at least 2 space indentation."}], "answers": [{"comments": [{"owner": {"reputation": 2949, "user_id": 2892378, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/1DSyh.jpg?s=128&g=1", "display_name": "Bartosz", "link": "https://stackoverflow.com/users/2892378/bartosz"}, "edited": false, "score": 0, "creation_date": 1603351135, "post_id": 42248984, "comment_id": 114010851, "body": "Is it only my who has trouble defining whether a key is nested or not? Even the tiny example above requires me to look very closely to see if <code>f</code> is on <code>a</code> level or <code>b</code> level. I really dislike this syntax."}, {"owner": {"reputation": 23530, "user_id": 347964, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/bE90m.png?s=128&g=1", "display_name": "flyx", "link": "https://stackoverflow.com/users/347964/flyx"}, "reply_to_user": {"reputation": 2949, "user_id": 2892378, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/1DSyh.jpg?s=128&g=1", "display_name": "Bartosz", "link": "https://stackoverflow.com/users/2892378/bartosz"}, "edited": false, "score": 0, "creation_date": 1603356026, "post_id": 42248984, "comment_id": 114012995, "body": "@Bartosz Well nobody (I hope) uses one space for indentation, the example is merely academical. A proper code editor would give you indentation guide lines which is indeed necessary for larger files. If you dislike it, you can always use flow-style instead of indentation-based block style."}], "tags": [], "owner": {"reputation": 23530, "user_id": 347964, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/bE90m.png?s=128&g=1", "display_name": "flyx", "link": "https://stackoverflow.com/users/347964/flyx"}, "is_accepted": true, "score": 52, "last_activity_date": 1583197550, "last_edit_date": 1583197550, "creation_date": 1487160498, "answer_id": 42248984, "question_id": 42247535, "link": "https://stackoverflow.com/questions/42247535/yaml-how-many-spaces-per-indent/42248984#42248984", "title": "YAML How many spaces per indent?", "body": "<p>There is no requirement in YAML to indent any concrete number of spaces. There is also no requirement to be consistent. So for example, this is valid YAML:</p>\n\n<pre><code>a:\n b:\n     - c\n     -  d\n     - e\nf:\n    \"ghi\"\n</code></pre>\n\n<p>Some rules might be of interest:</p>\n\n<ul>\n<li>Flow content (i.e. everything that starts with <code>{</code> or <code>[</code>) can span multiple lines, but must be indented at least as many spaces as the surrounding current block level.</li>\n<li>Block list items <em>can</em> (but don't need to) have the same indentation as the surrounding block level because <code>-</code> is considered part of the indentation:</li>\n</ul>\n\n\n\n<pre><code>a:    # top-level key\n- b   # value of that key, which is a list\n- c\nc:    # next top-level key\n d    # non-list value which must be more indented\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 179, "user_id": 1974403, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/007f93bc74d0496fe85122f70632e71a?s=128&d=identicon&r=PG", "display_name": "sevenr", "link": "https://stackoverflow.com/users/1974403/sevenr"}, "is_accepted": false, "score": 8, "last_activity_date": 1581917275, "last_edit_date": 1592644375, "creation_date": 1581467073, "answer_id": 60179343, "question_id": 42247535, "link": "https://stackoverflow.com/questions/42247535/yaml-how-many-spaces-per-indent/60179343#60179343", "title": "YAML How many spaces per indent?", "body": "<p>The <a href=\"https://yaml.org/spec/1.2/spec.html#id2777534\" rel=\"nofollow noreferrer\">YAML spec for v 1.2</a> merely says that</p>\n<blockquote>\n<p>In YAML block styles, structure is determined by indentation. In general, indentation is defined as a zero or more space characters at the start of a line.</p>\n<p>To maintain portability, tab characters must not be used in indentation, since different systems treat tabs differently. Note that most modern editors may be configured so that pressing the tab key results in the insertion of an appropriate number of spaces.</p>\n<p>The amount of indentation is a presentation detail and must not be used to convey content information.</p>\n</blockquote>\n<p>So you can set the indent depth to your preference, as long as you use spaces and not tabs. Interestingly, IntelliJ uses 2 spaces by default.</p>\n"}, {"tags": [], "owner": {"reputation": 51, "user_id": 8910441, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/faac4ddf449d7ad4b15407a703260191?s=128&d=identicon&r=PG&f=1", "display_name": "Abyss", "link": "https://stackoverflow.com/users/8910441/abyss"}, "is_accepted": false, "score": 2, "last_activity_date": 1606285868, "creation_date": 1606285868, "answer_id": 64999517, "question_id": 42247535, "link": "https://stackoverflow.com/questions/42247535/yaml-how-many-spaces-per-indent/64999517#64999517", "title": "YAML How many spaces per indent?", "body": "<p>INDENTATION\nThe suggested syntax for YAML files is to use 2 spaces for indentation, but YAML will follow whatever indentation system that the individual file uses. Indentation of two spaces works very well for SLS files given the fact that the data is uniform and not deeply nested.</p>\n<p>NESTED DICTIONARIES\nWhen dictionaries are nested within other data structures (particularly lists), the indentation logic sometimes changes. Examples of where this might happen include context and default options from the file.managed state:</p>\n<pre><code>/etc/http/conf/http.conf:\nfile:\n  - managed\n  - source: salt://apache/http.conf\n  - user: root\n  - group: root\n  - mode: 644\n  - template: jinja\n  - context:\n      custom_var: &quot;override&quot;\n  - defaults:\n      custom_var: &quot;default value&quot;\n      other_var: 123\n</code></pre>\n<p>Notice that while the indentation is two spaces per level, for the values under the context and defaults options there is a four-space indent. If only two spaces are used to indent, then those keys will be considered part of the same dictionary that contains the context key, and so the data will not be loaded correctly. If using a double indent is not desirable, then a deeply-nested dict can be declared with curly braces:</p>\n<pre><code>/etc/http/conf/http.conf:\nfile:\n  - managed\n  - source: salt://apache/http.conf\n  - user: root\n  - group: root\n  - mode: 644\n  - template: jinja\n  - context: {\n    custom_var: &quot;override&quot; }\n  - defaults: {\n    custom_var: &quot;default value&quot;,\n    other_var: 123 }\n</code></pre>\n<p>you can read more from this <a href=\"https://docs.saltstack.com/en/3000/topics/troubleshooting/yaml_idiosyncrasies.html#:%7E:text=Indentation,uniform%20and%20not%20deeply%20nested.\" rel=\"nofollow noreferrer\">link</a></p>\n"}], "owner": {"reputation": 6330, "user_id": 850980, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/JMPLH.jpg?s=128&g=1", "display_name": "Anestis Kivranoglou", "link": "https://stackoverflow.com/users/850980/anestis-kivranoglou"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 43034, "favorite_count": 7, "accepted_answer_id": 42248984, "answer_count": 3, "score": 42, "last_activity_date": 1606285868, "creation_date": 1487156597, "question_id": 42247535, "link": "https://stackoverflow.com/questions/42247535/yaml-how-many-spaces-per-indent", "title": "YAML How many spaces per indent?", "body": "<p>Is there any difference if i use one space, two or four spaces per indent level in <strong>YAML</strong>?</p>\n\n<p>Are there any specific rules for space numbers per Structure type??</p>\n\n<p>For example <strong>4</strong> spaces for nesting <strong>maps</strong> , <strong>1</strong> space per <strong>list item</strong> etc??</p>\n\n<p>I am writing a yaml configuration file for elastic beanstalk .ebextensions and i am having really hard time constructing this correctly. Although i have valid yaml in <a href=\"http://www.yamllint.com/\" rel=\"noreferrer\">YAML Validator</a> elastic beanstalk seems to understand a different structure.</p>\n"}, {"tags": ["json", "ruby", "csv", "parsing", "fastercsv"], "comments": [{"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1487156192, "post_id": 42246815, "comment_id": 71652982, "body": "What happened with <code>&quot;Gender&quot;</code>?"}], "answers": [{"tags": [], "owner": {"reputation": 2572, "user_id": 2862049, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffd65bc37e559c2c407f064f308828a4?s=128&d=identicon&r=PG&f=1", "display_name": "Lukas Baliak", "link": "https://stackoverflow.com/users/2862049/lukas-baliak"}, "is_accepted": true, "score": 0, "last_activity_date": 1487155819, "creation_date": 1487155819, "answer_id": 42247232, "question_id": 42246815, "link": "https://stackoverflow.com/questions/42246815/json-array-to-csv-via-fastercsv/42247232#42247232", "title": "JSON Array to CSV via FasterCSV", "body": "<p>Your JSON format is invalid. Valid json format is:</p>\n\n<pre><code>[{\"Name\":\"Ann\",\"Gender\":\"Female\",\"Age\":\"20\"},{\"Name\":\"John\",\"Gender\":\"Male\",\"Age\":\"22\"}]\n</code></pre>\n\n<p>Try this:</p>\n\n<pre><code>require \"rubygems\"\nrequire 'fastercsv'\nrequire 'json'\n\ncsv_string = FasterCSV.generate({}) do |csv|\n  JSON.parse(File.open(\"test\").read).each do |hash|\n    csv &lt;&lt; [hash[\"Name\"], hash[\"Age\"]]\n  end\nend\n\nputs csv_string\n</code></pre>\n"}], "owner": {"reputation": 5041, "user_id": 1061331, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/w3Tbz.jpg?s=128&g=1", "display_name": "Chamara Keragala", "link": "https://stackoverflow.com/users/1061331/chamara-keragala"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 85, "favorite_count": 0, "accepted_answer_id": 42247232, "answer_count": 1, "score": -1, "last_activity_date": 1487156300, "creation_date": 1487154706, "last_edit_date": 1487156300, "question_id": 42246815, "link": "https://stackoverflow.com/questions/42246815/json-array-to-csv-via-fastercsv", "title": "JSON Array to CSV via FasterCSV", "body": "<p>I have a JSON array in the following format.</p>\n\n<pre><code>[{\"Name\":\"Ann\",\"Gender\":\"Female\",\"Age\":\"20\"},{\"Name\":\"John\",\"Gender\":\"Male\",\"Age\":\"22\"}]\n</code></pre>\n\n<p>I want to convert this into following CSV format without printing the \"Key\" and also i want it to print only the <code>Name</code> value and <code>Age</code> value.\nfor e.g.\nAnn,20\nJohn,22</p>\n\n<p>I have tried with following code.</p>\n\n<pre><code>#!//usr/bin/env ruby\nrequire \"rubygems\"\nrequire 'fastercsv'\nrequire 'json'\n\ncsv_string = FasterCSV.generate({}) do |csv|\n   JSON.parse(File.open(\"test\").read).each do |hash|\n    csv &lt;&lt; hash\n  end\nend\n\nputs csv_string\n</code></pre>\n\n<p><code>test</code> contains the json array which i'm try to parse.</p>\n"}, {"tags": ["ruby", "apache", "vagrant", "passenger", "rack"], "comments": [{"owner": {"reputation": 44774, "user_id": 4296747, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-muYS9LV5AoA/AAAAAAAAAAI/AAAAAAAACG4/KcTmlFyGWRI/photo.jpg?sz=128", "display_name": "Frederic Henri", "link": "https://stackoverflow.com/users/4296747/frederic-henri"}, "edited": false, "score": 0, "creation_date": 1487163312, "post_id": 42246466, "comment_id": 71657873, "body": "how do you run/start your app ? how do you access it ?"}, {"owner": {"reputation": 7, "user_id": 6422320, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/28cd320fd06787bae574cb374e100b23?s=128&d=identicon&r=PG&f=1", "display_name": "john_doe", "link": "https://stackoverflow.com/users/6422320/john-doe"}, "reply_to_user": {"reputation": 44774, "user_id": 4296747, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-muYS9LV5AoA/AAAAAAAAAAI/AAAAAAAACG4/KcTmlFyGWRI/photo.jpg?sz=128", "display_name": "Frederic Henri", "link": "https://stackoverflow.com/users/4296747/frederic-henri"}, "edited": false, "score": 0, "creation_date": 1487178850, "post_id": 42246466, "comment_id": 71669557, "body": "I only run &quot;vagrant up&quot; command and then I go to 127.0.0.1:8080, apache configuration is changed by shell script from vagrant provision"}], "answers": [{"tags": [], "owner": {"reputation": 7, "user_id": 6422320, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/28cd320fd06787bae574cb374e100b23?s=128&d=identicon&r=PG&f=1", "display_name": "john_doe", "link": "https://stackoverflow.com/users/6422320/john-doe"}, "is_accepted": true, "score": 0, "last_activity_date": 1487221010, "creation_date": 1487221010, "answer_id": 42265287, "question_id": 42246466, "link": "https://stackoverflow.com/questions/42246466/how-to-configure-vagrant-apache-passenger-with-rack-based-application/42265287#42265287", "title": "How to configure Vagrant + Apache + Passenger with Rack-based application?", "body": "<p>It turns out that the REQUEST_PATH variable has another name on Apache (REQUEST_URI), that is why router always gave back \"Nothing found\".\nSo I just changed this variable and everything work right now.  </p>\n"}], "owner": {"reputation": 7, "user_id": 6422320, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/28cd320fd06787bae574cb374e100b23?s=128&d=identicon&r=PG&f=1", "display_name": "john_doe", "link": "https://stackoverflow.com/users/6422320/john-doe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 110, "favorite_count": 0, "accepted_answer_id": 42265287, "answer_count": 1, "score": 0, "last_activity_date": 1487221010, "creation_date": 1487153818, "question_id": 42246466, "link": "https://stackoverflow.com/questions/42246466/how-to-configure-vagrant-apache-passenger-with-rack-based-application", "title": "How to configure Vagrant + Apache + Passenger with Rack-based application?", "body": "<p>I'm studying Ruby and trying to run <a href=\"https://github.com/IvanShamatov/rails-like-app\" rel=\"nofollow noreferrer\">this application</a> on Vagrant using Apache and Passenger. The application works fine if I run it on my local computer, but it only shows 404 \"nothing found\" page if I try to run it on Vagrant.\nI guess my problem is that I can't write all the configurations in Vagrantfile and Apache properly. I have the page 404 from my application, therefore it works. But it shows 404 on any URL I try to enter.\nVagrantFile includes:</p>\n\n<pre><code>  config.vm.box = \"ubuntu/trusty32\"\n  config.vm.network :forwarded_port, guest: 80, host: 8080\n  config.vm.synced_folder \"./html/\", \"/var/www/html\"\n</code></pre>\n\n<p>and also provision (installing apache2, Ruby 2.3.3, RVM and passenger)</p>\n\n<p>in  /etc/apache2/sites-available/000-default.conf</p>\n\n<pre><code>&lt;VirtualHost *:80&gt;\n    ServerAdmin webmaster@localhost\n    DocumentRoot /var/www/html/public\n    PassengerRuby /home/vagrant/.rvm/gems/ruby-2.3.3/wrappers/ruby\n\n&lt;Directory /var/www/html/public&gt;\n      PassengerEnabled on\n      Allow from all\n      Options -MultiViews\n      Require all granted\n&lt;/Directory&gt;\n    ErrorLog ${APACHE_LOG_DIR}/error.log\n    CustomLog ${APACHE_LOG_DIR}/access.log combined\n&lt;/VirtualHost&gt;\n</code></pre>\n\n<p>in html folder I also have required for apache folders (tmp and public)</p>\n"}, {"tags": ["ruby"], "answers": [{"tags": [], "owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "is_accepted": false, "score": 4, "last_activity_date": 1487152061, "last_edit_date": 1487152061, "creation_date": 1487151740, "answer_id": 42245691, "question_id": 42245589, "link": "https://stackoverflow.com/questions/42245589/confused-about-the-assignment-method-in-ruby-defined-method-with-equal-sign/42245691#42245691", "title": "Confused about the assignment method in Ruby (defined method with equal sign)", "body": "<blockquote>\n  <p>a = 123</p>\n</blockquote>\n\n<p>In principle, there is ambiguity here. Is it a setter invocation or a local variable assignment? Ruby resolves this by choosing local variable assignment. If you want the method, be explicit.</p>\n\n<pre><code>self.a = 123\n</code></pre>\n\n<p>In the other case, there's no ambiguity.</p>\n"}, {"tags": [], "owner": {"reputation": 2262, "user_id": 4101569, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/15c4c64e58bc5cdeec8e7ce067131a54?s=128&d=identicon&r=PG", "display_name": "katafrakt", "link": "https://stackoverflow.com/users/4101569/katafrakt"}, "is_accepted": false, "score": 4, "last_activity_date": 1487152154, "last_edit_date": 1487152154, "creation_date": 1487151902, "answer_id": 42245748, "question_id": 42245589, "link": "https://stackoverflow.com/questions/42245589/confused-about-the-assignment-method-in-ruby-defined-method-with-equal-sign/42245748#42245748", "title": "Confused about the assignment method in Ruby (defined method with equal sign)", "body": "<p>Seeing something like <code>a = 123</code>, the interpreter assumes that this is always an assignment operation. However, you can call <code>self.a = 123</code>- as this cannot be a proper assignment (variable name cannot include a dot); it will invoke a method you defined.</p>\n\n<p>Note that the same happens inside the class, so it is not a different behaviour:</p>\n\n<pre><code>class Foo\n  def foo=(x)\n    puts \"OK: x=#{x}\"\n  end\n\n  def bar\n    foo = 1\n  end\n\n  def baz\n    self.foo = 1\n  end\nend\n</code></pre>\n\n<p>Calling <code>bar</code> will not print your message, it will just perform an assignment. <code>baz</code> will execute your setter method.</p>\n"}], "owner": {"reputation": 3602, "user_id": 5135452, "user_type": "registered", "accept_rate": 70, "profile_image": "https://lh6.googleusercontent.com/-wsi48VO8G5Q/AAAAAAAAAAI/AAAAAAAAAMw/p-ArCNs4cOs/photo.jpg?sz=128", "display_name": "PJCHENder", "link": "https://stackoverflow.com/users/5135452/pjchender"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 274, "favorite_count": 0, "closed_date": 1487154495, "answer_count": 2, "score": 0, "last_activity_date": 1487152154, "creation_date": 1487151451, "last_edit_date": 1487151761, "question_id": 42245589, "link": "https://stackoverflow.com/questions/42245589/confused-about-the-assignment-method-in-ruby-defined-method-with-equal-sign", "closed_reason": "Duplicate", "title": "Confused about the assignment method in Ruby (defined method with equal sign)", "body": "<p>I am really confused about the assignment method in Ruby. In the documentation, it says:</p>\n\n<blockquote>\n  <p>Methods that end with an equals sign indicate an assignment method.\n  For assignment methods, the return value is ignored and the arguments\n  are returned instead.</p>\n</blockquote>\n\n<p>I know this can be use as setter method in Class. However, I still feel confused about the concept. In the code below:</p>\n\n<pre><code>class Foo\n  # setter method\n  def foo=(x)\n    puts \"OK: x=#{x}\"\n  end\nend\nf = Foo.new\nf.foo = 123 # OK: x=123\n\ndef a=(value)\n  puts \"value is #{value}\"\nend\na = 123     # why there is no output?\np a         # 123, why this only return the argument?\np a = 123   # 123, why this only return the argument?\n</code></pre>\n\n<p>Why the method with equal sign run differently in the Class and outside the class?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "rubygems", "tesseract"], "comments": [{"owner": {"reputation": 160, "user_id": 7771992, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YmU4F.jpg?s=128&g=1", "display_name": "Deep Mistry", "link": "https://stackoverflow.com/users/7771992/deep-mistry"}, "edited": false, "score": 0, "creation_date": 1500980771, "post_id": 42245473, "comment_id": 77564166, "body": "I have been facing the same issues with windows"}], "owner": {"reputation": 11, "user_id": 7567708, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4f16c129bdca9e254f627810bfd2a1d1?s=128&d=identicon&r=PG&f=1", "display_name": "abrakad_22", "link": "https://stackoverflow.com/users/7567708/abrakad-22"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 131, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1487164943, "creation_date": 1487151166, "last_edit_date": 1487164943, "question_id": 42245473, "link": "https://stackoverflow.com/questions/42245473/error-when-starting-the-server-setting-up-the-tesseract-ocr-gem-in-rails", "title": "Error when starting the server setting up the tesseract OCR gem in rails", "body": "<p>I've installed a tesseract-ocr (0.1.8) gem. Mac OS X El Capitan. </p>\n\n<p>When I do <code>rails s</code> an error appears:</p>\n\n<pre><code>/Users/tagandev/.rvm/gems/ruby-2.3.0@bshc_piv/gems/bundler-1.13.6/lib/bundler/runtime.rb:94:in `rescue in block (2 levels) in require': There was an error while trying to load the gem 'tesseract-ocr'. (Bundler::GemRequireError)\nGem Load Error is: compile error: see logs at /var/folders/z8/nsyvk31j6lj6zx7ybmws_sg80000gn/T/.ffi-inline-501/ff2ae5853d8e6c6000319eab14f6c8dc6127a842.log\n</code></pre>\n\n<p>The dependencies are installed:</p>\n\n<pre><code>tesseract 3.04.01\n\u00a0 leptonica-1.74.1\n\u00a0\u00a0 libjpeg 8d: libpng 1.6.28: libtiff 4.0.7: zlib 1.2.5\n</code></pre>\n\n<p>How can I solve this problem?</p>\n"}, {"tags": ["ruby", "regex", "gsub"], "comments": [{"owner": {"reputation": 481662, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 1, "creation_date": 1487150065, "post_id": 42245007, "comment_id": 71648345, "body": "Use <code>s.gsub(&#47;\\A(\\+)|\\D+&#47;, &#39;\\1&#39;)</code>"}, {"owner": {"reputation": 301, "user_id": 2805561, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Kjviz.png?s=128&g=1", "display_name": "jck", "link": "https://stackoverflow.com/users/2805561/jck"}, "edited": false, "score": 0, "creation_date": 1487150146, "post_id": 42245007, "comment_id": 71648401, "body": "Sorry, question was updated.. I want to have a solution to my <code>5</code> given example. Since I can&#39;t remove <code>+</code> signs anywhere without removing the first one."}, {"owner": {"reputation": 301, "user_id": 2805561, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Kjviz.png?s=128&g=1", "display_name": "jck", "link": "https://stackoverflow.com/users/2805561/jck"}, "reply_to_user": {"reputation": 481662, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 0, "creation_date": 1487150344, "post_id": 42245007, "comment_id": 71648531, "body": "@WiktorStribi\u017cew Brilliant answer.. Could you atleast post an answer so I can accept yours? Thank you for a quick reply."}, {"owner": {"reputation": 301, "user_id": 2805561, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Kjviz.png?s=128&g=1", "display_name": "jck", "link": "https://stackoverflow.com/users/2805561/jck"}, "reply_to_user": {"reputation": 267, "user_id": 2328827, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3836cfdf2aa2e725587722233a09621c?s=128&d=identicon&r=PG", "display_name": "Daniel Christiany", "link": "https://stackoverflow.com/users/2328827/daniel-christiany"}, "edited": false, "score": 0, "creation_date": 1487150398, "post_id": 42245007, "comment_id": 71648572, "body": "@DanielChristiany sorry for vague question. I was supposed to cut my question before <code>row[1] = row[1].gsub(&#39;(&#39;,&#39;&#39;).gsub(&#39;)&#39;,&#39;&#39;).gsub(&#39;-&#39;,&#39;&#39;).gsub(&#39; &#39;,&#39;&#39;)</code>"}, {"owner": {"reputation": 301, "user_id": 2805561, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Kjviz.png?s=128&g=1", "display_name": "jck", "link": "https://stackoverflow.com/users/2805561/jck"}, "reply_to_user": {"reputation": 481662, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 0, "creation_date": 1487646324, "post_id": 42245007, "comment_id": 71866585, "body": "@WiktorStribi\u017cew What if I want to add new search <code>(+</code> from (+65)92349577 and replace it by <code>&#39;\\1&#39;</code>, Output should be like: +6592348577 .. how would that be possible?  i tried <code>^(\\+)|^(\\(\\+)|[^\\d\\n]</code> on your regex demo but cannot replace it."}, {"owner": {"reputation": 481662, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 0, "creation_date": 1487663900, "post_id": 42245007, "comment_id": 71873386, "body": "If you want to protect a <code>(</code> before the initial <code>+</code> try <code>s.gsub(&#47;\\A(\\(?\\+)|\\D+&#47;, &#39;\\1&#39;)</code>."}, {"owner": {"reputation": 301, "user_id": 2805561, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Kjviz.png?s=128&g=1", "display_name": "jck", "link": "https://stackoverflow.com/users/2805561/jck"}, "reply_to_user": {"reputation": 481662, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 0, "creation_date": 1487664563, "post_id": 42245007, "comment_id": 71873745, "body": "@WiktorStribi\u017cew thank you for responding.. (+65)92349577 =&gt; +6592348577 this is what I want to achieve, I want get only the <code>+</code> sign and remove the <code>(</code> to get a working phone number. But it should be on the beginning."}, {"owner": {"reputation": 481662, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 1, "creation_date": 1487666975, "post_id": 42245007, "comment_id": 71875113, "body": "Then move the parenthesis outside the group - <code>s.gsub(&#47;\\A\\(?(\\+)|\\D+&#47;, &#39;\\1&#39;)</code>."}, {"owner": {"reputation": 301, "user_id": 2805561, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Kjviz.png?s=128&g=1", "display_name": "jck", "link": "https://stackoverflow.com/users/2805561/jck"}, "reply_to_user": {"reputation": 481662, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 0, "creation_date": 1487667367, "post_id": 42245007, "comment_id": 71875358, "body": "@WiktorStribi\u017cew works like charm! I really need to eat a lot to know more about regex! Thank you so much! I&#39;ll update the question to include this one."}], "answers": [{"comments": [{"owner": {"reputation": 25823, "user_id": 24468, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/PWl6C.png?s=128&g=1", "display_name": "akuhn", "link": "https://stackoverflow.com/users/24468/akuhn"}, "edited": false, "score": 0, "creation_date": 1487150574, "post_id": 42245205, "comment_id": 71648686, "body": "Why are the parens are the <code>+</code> sign required?"}, {"owner": {"reputation": 481662, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "reply_to_user": {"reputation": 25823, "user_id": 24468, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/PWl6C.png?s=128&g=1", "display_name": "akuhn", "link": "https://stackoverflow.com/users/24468/akuhn"}, "edited": false, "score": 0, "creation_date": 1487150770, "post_id": 42245205, "comment_id": 71648829, "body": "@akuhn: The first alternative branch value must be kept in the final result. To be able to put this text back into the replacement result, the value should be stored in some memory slot that is created with a capturing group. The <code>(...)</code> create the capture, and thus the <code>+</code> that is at the string start can be kept. We match and <i>capture</i> what we need to keep, and just match what we need to remove."}, {"owner": {"reputation": 301, "user_id": 2805561, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Kjviz.png?s=128&g=1", "display_name": "jck", "link": "https://stackoverflow.com/users/2805561/jck"}, "edited": false, "score": 0, "creation_date": 1487150828, "post_id": 42245205, "comment_id": 71648869, "body": "@WiktorStribi\u017cew Woah! Excellent answer with explanation. Thank you! I am still learning this regex thing, and I just have to deal with a current task needs to be done. Great! Thank you!"}, {"owner": {"reputation": 25823, "user_id": 24468, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/PWl6C.png?s=128&g=1", "display_name": "akuhn", "link": "https://stackoverflow.com/users/24468/akuhn"}, "edited": false, "score": 0, "creation_date": 1487150933, "post_id": 42245205, "comment_id": 71648936, "body": "Oh, and because the other alternative has no capture it gets replaced by nothing. Too smart, hahaha!"}, {"owner": {"reputation": 481662, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "reply_to_user": {"reputation": 25823, "user_id": 24468, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/PWl6C.png?s=128&g=1", "display_name": "akuhn", "link": "https://stackoverflow.com/users/24468/akuhn"}, "edited": false, "score": 0, "creation_date": 1487151142, "post_id": 42245205, "comment_id": 71649092, "body": "@akuhn: Yes, it is possible as the backreference value is set to an empty string if the capturing group is not participating in the match. It is not the case in Python <code>re</code> before Version 3.5, but has been working well in Onigmo and many other regex engines."}], "tags": [], "owner": {"reputation": 481662, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "is_accepted": true, "score": 3, "last_activity_date": 1487150432, "creation_date": 1487150432, "answer_id": 42245205, "question_id": 42245007, "link": "https://stackoverflow.com/questions/42245007/ruby-regex-gsub-any-other-characters-except-on-start-phone-number/42245205#42245205", "title": "Ruby regex gsub any other characters except + on start (phone number)", "body": "<p>The solution is to capture the first <code>+</code> and just match all other non-digit symbols:</p>\n\n<pre><code>s.gsub(/\\A(\\+)|\\D+/, '\\1')\n</code></pre>\n\n<p>See the <a href=\"https://regex101.com/r/MxT8g9/1\" rel=\"nofollow noreferrer\">regex demo</a></p>\n\n<p><strong>Pattern details</strong>:</p>\n\n<ul>\n<li><code>\\A(\\+)</code> - a <code>+</code> (that is captured into a capturing group #1 since it is wrapped with capturing parentheses) at the beginning of the string (<code>\\A</code>)</li>\n<li><code>|</code> - or</li>\n<li><code>\\D+</code> -  one or more characters other than a digit.</li>\n</ul>\n\n<p>The <code>\\1</code> in the replacement is a backreference to the contents stored in capturing group #1, it restores the initial <code>+</code> in the replacement result</p>\n"}], "owner": {"reputation": 301, "user_id": 2805561, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Kjviz.png?s=128&g=1", "display_name": "jck", "link": "https://stackoverflow.com/users/2805561/jck"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 422, "favorite_count": 0, "accepted_answer_id": 42245205, "answer_count": 1, "score": 1, "last_activity_date": 1487667732, "creation_date": 1487149859, "last_edit_date": 1487667732, "question_id": 42245007, "link": "https://stackoverflow.com/questions/42245007/ruby-regex-gsub-any-other-characters-except-on-start-phone-number", "title": "Ruby regex gsub any other characters except + on start (phone number)", "body": "<p>I am looking to remedy the following formats or invalid formats to a working phone number:</p>\n\n<pre><code>1 (639)-234-2323 =&gt; 6392342323\n2 (042)-982-2234 =&gt; 0429822234\n3 0974829-928  =&gt; 0974829928\n4 +83246-983-34 =&gt; +832459834\n5 +836(737)-898+78 =&gt; +83673789878\n</code></pre>\n\n<p>I am able to use this code and I can get my results right if a certain 1-4 are given, but if <code>5</code>, I am really going nuts. </p>\n\n<pre><code>row[1] = row[1].gsub('(','').gsub(')','').gsub('-','').gsub(' ','')\n</code></pre>\n\n<p>This sample is used in an import file. So you can't expect a prompt to a user.</p>\n\n<p>I am also open to possibly importing record with invalid format, but should just be formatted into an accepted phone number (given parentheses inside anywhere or any <code>+</code> signs anywhere).</p>\n\n<p><strong>EDIT</strong> I want to have a solution to my <code>5</code> given example. Since I can't remove <code>+</code> signs anywhere without removing the first one.</p>\n\n<p><strong>EDIT 2</strong> I asked again in the comment section that I need to include such phone format: </p>\n\n<pre><code>6 (+65)92349577 =&gt; +6592348577\n</code></pre>\n\n<p>@WiktorStribi\u017cew suggested the following regex: <code>s.gsub(/\\A\\(?(\\+)|\\D+/, '\\1')</code> from his original answer (the accepted one)</p>\n"}, {"tags": ["ruby", "hash"], "comments": [{"owner": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "edited": false, "score": 1, "creation_date": 1487150694, "post_id": 42244619, "comment_id": 71648770, "body": "There&#39;s no need to accept an answer right away. There might be better answers if you wait a bit."}], "answers": [{"comments": [{"owner": {"reputation": 154, "user_id": 3636388, "user_type": "registered", "accept_rate": 31, "profile_image": "https://www.gravatar.com/avatar/6466644a0ef8d77f6e2dfbb0ae0e8554?s=128&d=identicon&r=PG&f=1", "display_name": "user3636388", "link": "https://stackoverflow.com/users/3636388/user3636388"}, "edited": false, "score": 0, "creation_date": 1487150695, "post_id": 42245101, "comment_id": 71648772, "body": "Thanks! There is a little issue with this. In this case it returns, <code>&quot;STATUS&quot;=&gt;{nil=&gt;{&quot;dataName&quot;=&gt;&quot;Pt_FieldString&quot;, ....</code>"}, {"owner": {"reputation": 154, "user_id": 3636388, "user_type": "registered", "accept_rate": 31, "profile_image": "https://www.gravatar.com/avatar/6466644a0ef8d77f6e2dfbb0ae0e8554?s=128&d=identicon&r=PG&f=1", "display_name": "user3636388", "link": "https://stackoverflow.com/users/3636388/user3636388"}, "edited": false, "score": 0, "creation_date": 1487155625, "post_id": 42245101, "comment_id": 71652587, "body": "Thanks. This works. Please look at the edited request"}], "tags": [], "owner": {"reputation": 32451, "user_id": 2516474, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a2179a340c0e84edc285d432211145d?s=128&d=identicon&r=PG", "display_name": "SteveTurczyn", "link": "https://stackoverflow.com/users/2516474/steveturczyn"}, "is_accepted": false, "score": 1, "last_activity_date": 1487155299, "last_edit_date": 1487155299, "creation_date": 1487150168, "answer_id": 42245101, "question_id": 42244619, "link": "https://stackoverflow.com/questions/42244619/rearranging-ruby-hash-with-a-condition/42245101#42245101", "title": "Rearranging ruby hash with a condition", "body": "<p>Kind of wordy, but you can do...</p>\n\n<pre><code> output = {}\n\n pointer = nil\n\n fields.each do |field|\n  pointer = output\n  sections = field['Name'].split('.').each do |section|\n    pointer[section] ||= {}\n    pointer = pointer[section]\n  end\n  pointer.merge!(field)\n  pointer.delete('Name')\nend \noutput\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "is_accepted": false, "score": 2, "last_activity_date": 1487150646, "last_edit_date": 1487150646, "creation_date": 1487150340, "answer_id": 42245167, "question_id": 42244619, "link": "https://stackoverflow.com/questions/42244619/rearranging-ruby-hash-with-a-condition/42245167#42245167", "title": "Rearranging ruby hash with a condition", "body": "<p>What you want is similar to a <a href=\"https://en.wikipedia.org/wiki/Trie\" rel=\"nofollow noreferrer\">Trie</a>, so you could parse the name parts and create a nested hash with <a href=\"http://ruby-doc.org/core-2.4.0/Enumerable.html#method-i-each_with_object\" rel=\"nofollow noreferrer\"><code>each_with_object</code></a> and <a href=\"http://ruby-doc.org/core-2.4.0/Enumerable.html#method-i-inject\" rel=\"nofollow noreferrer\"><code>inject</code></a>. This should work with any nested depth :</p>\n\n<pre><code>fields = [{\"Name\"=&gt;\"CONTACT.MAILADDRESS.LATITUDE\", \"dataName\"=&gt;\"Pt_FieldDouble\", \"externalDataName\"=&gt;\"number\", \"isRequired\"=&gt;\"false\", \"isReadOnly\"=&gt;\"false\", \"maxLength\"=&gt;\"10\", \"DisplayLabel\"=&gt;\"Latitude\", \"Description\"=&gt;\"Latitude\", \"id\"=&gt;\"999505900000211\"},\n {\"Name\"=&gt;\"CONTACT.MAILADDRESS.LONGITUDE\", \"dataName\"=&gt;\"Pt_FieldDouble\", \"externalDataName\"=&gt;\"number\", \"isRequired\"=&gt;\"false\", \"isReadOnly\"=&gt;\"false\", \"maxLength\"=&gt;\"11\", \"DisplayLabel\"=&gt;\"Longitude\", \"Description\"=&gt;\"Longitude\", \"id\"=&gt;\"999505900000212\"},\n {\"Name\"=&gt;\"CONTACT.STATUS\", \"dataName\"=&gt;\"Pt_FieldString\", \"externalDataName\"=&gt;\"string\", \"isRequired\"=&gt;\"false\", \"isReadOnly\"=&gt;\"false\", \"maxLength\"=&gt;\"0\", \"DisplayLabel\"=&gt;\"Status\", \"Description\"=&gt;\"Active/Inactive\", \"id\"=&gt;\"999505900000166\"}]\n\ntree = fields.each_with_object({}) do |field, tree|\n  field = field.dup\n  names = field.delete(\"Name\").split('.')\n  node = names.inject(tree) do |node, name|\n    node[name] ||= {}\n  end\n  node.merge!(field)\nend\n\nrequire 'pp'\npp tree\n# {\"CONTACT\"=&gt;\n#   {\"MAILADDRESS\"=&gt;\n#     {\"LATITUDE\"=&gt;\n#       {\"dataName\"=&gt;\"Pt_FieldDouble\",\n#        \"externalDataName\"=&gt;\"number\",\n#        \"isRequired\"=&gt;\"false\",\n#        \"isReadOnly\"=&gt;\"false\",\n#        \"maxLength\"=&gt;\"10\",\n#        \"DisplayLabel\"=&gt;\"Latitude\",\n#        \"Description\"=&gt;\"Latitude\",\n#        \"id\"=&gt;\"999505900000211\"},\n#      \"LONGITUDE\"=&gt;\n#       {\"dataName\"=&gt;\"Pt_FieldDouble\",\n#        \"externalDataName\"=&gt;\"number\",\n#        \"isRequired\"=&gt;\"false\",\n#        \"isReadOnly\"=&gt;\"false\",\n#        \"maxLength\"=&gt;\"11\",\n#        \"DisplayLabel\"=&gt;\"Longitude\",\n#        \"Description\"=&gt;\"Longitude\",\n#        \"id\"=&gt;\"999505900000212\"}},\n#    \"STATUS\"=&gt;\n#     {\"dataName\"=&gt;\"Pt_FieldString\",\n#      \"externalDataName\"=&gt;\"string\",\n#      \"isRequired\"=&gt;\"false\",\n#      \"isReadOnly\"=&gt;\"false\",\n#      \"maxLength\"=&gt;\"0\",\n#      \"DisplayLabel\"=&gt;\"Status\",\n#      \"Description\"=&gt;\"Active/Inactive\",\n#      \"id\"=&gt;\"999505900000166\"}}}\n</code></pre>\n"}], "owner": {"reputation": 154, "user_id": 3636388, "user_type": "registered", "accept_rate": 31, "profile_image": "https://www.gravatar.com/avatar/6466644a0ef8d77f6e2dfbb0ae0e8554?s=128&d=identicon&r=PG&f=1", "display_name": "user3636388", "link": "https://stackoverflow.com/users/3636388/user3636388"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 57, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1487157710, "creation_date": 1487148779, "last_edit_date": 1487157710, "question_id": 42244619, "link": "https://stackoverflow.com/questions/42244619/rearranging-ruby-hash-with-a-condition", "title": "Rearranging ruby hash with a condition", "body": "<p>EDITED:\n How do we take the following forward</p>\n\n<pre><code>fields = [{\"Name\"=&gt;\"CONTACT.MAILADDRESS.LATITUDE\", \"dataName\"=&gt;\"Pt_FieldDouble\", \"externalDataName\"=&gt;\"number\", \"isRequired\"=&gt;\"false\", \"isReadOnly\"=&gt;\"false\", \"maxLength\"=&gt;\"10\", \"DisplayLabel\"=&gt;\"Latitude\", \"Description\"=&gt;\"Latitude\", \"id\"=&gt;\"999505900000211\"},\n {\"Name\"=&gt;\"CONTACT.MAILADDRESS.LONGITUDE\", \"dataName\"=&gt;\"Pt_FieldDouble\", \"externalDataName\"=&gt;\"number\", \"isRequired\"=&gt;\"false\", \"isReadOnly\"=&gt;\"false\", \"maxLength\"=&gt;\"11\", \"DisplayLabel\"=&gt;\"Longitude\", \"Description\"=&gt;\"Longitude\", \"id\"=&gt;\"999505900000212\"},\n {\"Name\"=&gt;\"CONTACT.STATE\", \"dataName\"=&gt;\"Pt_FieldString\", \"externalDataName\"=&gt;\"string\", \"isRequired\"=&gt;\"false\", \"isReadOnly\"=&gt;\"false\", \"maxLength\"=&gt;\"0\", \"DisplayLabel\"=&gt;\"Status\", \"Description\"=&gt;\"Active/Inactive\", \"id\"=&gt;\"999505900000166\"},\n {\"Name\"=&gt;\"XXSTATUS\", \"dataName\"=&gt;\"Pt_FieldString\", \"externalDataName\"=&gt;\"string\", \"isRequired\"=&gt;\"false\", \"isReadOnly\"=&gt;\"false\", \"maxLength\"=&gt;\"0\", \"DisplayLabel\"=&gt;\"XStatus\", \"Description\"=&gt;\"Active/Inactive\", \"id\"=&gt;\"99950591200166\"}] \n\noutput = \n     [{\"CONTACT\" =&gt;\n        { \"MAILADDRESS\" =&gt;\n           { \"Name\" =&gt; \"LATITUDE\", \"dataName\"=&gt;\"Pt_FieldDouble\", \"externalDataName\"=&gt;\"number\", \"isRequired\"=&gt;\"false\", \"isReadOnly\"=&gt;\"false\", \"maxLength\"=&gt;\"10\", \"DisplayLabel\"=&gt;\"Latitude\", \"Description\"=&gt;\"Latitude\", \"id\"=&gt;\"999505900000211\"},\n           { \"Name\" =&gt; \"LATITUDE\", \"dataName\"=&gt;\"Pt_FieldDouble\", \"externalDataName\"=&gt;\"number\", \"isRequired\"=&gt;\"false\", \"isReadOnly\"=&gt;\"false\", \"maxLength\"=&gt;\"11\", \"DisplayLabel\"=&gt;\"Longitude\", \"Description\"=&gt;\"Longitude\", \"id\"=&gt;\"999505900000212\"}},\n        { \"Name\" =&gt;\"STATE\", \"dataName\"=&gt;\"Pt_FieldString\", \"externalDataName\"=&gt;\"string\", \"isRequired\"=&gt;\"false\", \"isReadOnly\"=&gt;\"false\", \"maxLength\"=&gt;\"0\", \"DisplayLabel\"=&gt;\"Status\", \"Description\"=&gt;\"Active/Inactive\", \"id\"=&gt;\"999505900000166\"}},\n      { \"Name\" =&gt;\"XXSTATUS\", \"dataName\"=&gt;\"Pt_FieldString\", \"externalDataName\"=&gt;\"string\", \"isRequired\"=&gt;\"false\", \"isReadOnly\"=&gt;\"false\", \"maxLength\"=&gt;\"0\", \"DisplayLabel\"=&gt;\"XStatus\", \"Description\"=&gt;\"Active/Inactive\", \"id\"=&gt;\"99950591200166\"}] \n</code></pre>\n\n<p>I tried</p>\n\n<p>fields.map { |i| {i[\"Name\"] => i.except(\"Name\")}}</p>\n\n<pre><code>[{\"CONTACT.MAILADDRESS.LATITUDE\"=&gt;{\"dataName\"=&gt;\"Pt_FieldDouble\", \"externalDataName\"=&gt;\"number\", \"isRequired\"=&gt;\"false\", \"isReadOnly\"=&gt;\"false\", \"maxLength\"=&gt;\"10\", \"DisplayLabel\"=&gt;\"Latitude\", \"Description\"=&gt;\"Latitude\", \"id\"=&gt;\"999505900000211\"}},\n{\"CONTACT.MAILADDRESS.LONGITUDE\"=&gt;{\"dataName\"=&gt;\"Pt_FieldDouble\", \"externalDataName\"=&gt;\"number\", \"isRequired\"=&gt;\"false\", \"isReadOnly\"=&gt;\"false\", \"maxLength\"=&gt;\"11\", \"DisplayLabel\"=&gt;\"Longitude\", \"Description\"=&gt;\"Longitude\", \"id\"=&gt;\"999505900000212\"}},\n{\"CONTACT.STATUS\"=&gt;{\"dataName\"=&gt;\"Pt_FieldString\", \"externalDataName\"=&gt;\"string\", \"isRequired\"=&gt;\"false\", \"isReadOnly\"=&gt;\"false\", \"maxLength\"=&gt;\"0\", \"DisplayLabel\"=&gt;\"Status\", \"Description\"=&gt;\"Active/Inactive\", \"id\"=&gt;\"999505900000166\"}}]\n</code></pre>\n\n<p>Struck how to split the keys and put the values together</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "mongodb", "mongoid4", "mongoid5"], "comments": [{"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1487148440, "post_id": 42244407, "comment_id": 71647278, "body": "Just remove the option?"}, {"owner": {"reputation": 702, "user_id": 2813483, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/a806405fb6823e63f56544a44d1323b1?s=128&d=identicon&r=PG&f=1", "display_name": "tessie", "link": "https://stackoverflow.com/users/2813483/tessie"}, "reply_to_user": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1487148610, "post_id": 42244407, "comment_id": 71647380, "body": "No I was wondering How to enable this in Mongoid 5"}, {"owner": {"reputation": 702, "user_id": 2813483, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/a806405fb6823e63f56544a44d1323b1?s=128&d=identicon&r=PG&f=1", "display_name": "tessie", "link": "https://stackoverflow.com/users/2813483/tessie"}, "reply_to_user": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1487148870, "post_id": 42244407, "comment_id": 71647528, "body": "Yea.I think.      max_retries: 1 and retry_interval are Moped configurations which is removed in mongoid 5"}], "answers": [{"tags": [], "owner": {"reputation": 702, "user_id": 2813483, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/a806405fb6823e63f56544a44d1323b1?s=128&d=identicon&r=PG&f=1", "display_name": "tessie", "link": "https://stackoverflow.com/users/2813483/tessie"}, "is_accepted": false, "score": 0, "last_activity_date": 1487148816, "creation_date": 1487148816, "answer_id": 42244635, "question_id": 42244407, "link": "https://stackoverflow.com/questions/42244407/warning-on-updating-mongoid-gem-to-version-5-issue/42244635#42244635", "title": "Warning on updating Mongoid Gem to Version 5 Issue", "body": "<p>Okey.Seems that  max_retries and retry_interval are Moped configuration . Since Moped is taken away in Mogoid 5 This could be removed from configuration .Yml example</p>\n"}], "owner": {"reputation": 702, "user_id": 2813483, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/a806405fb6823e63f56544a44d1323b1?s=128&d=identicon&r=PG&f=1", "display_name": "tessie", "link": "https://stackoverflow.com/users/2813483/tessie"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 159, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1487148816, "creation_date": 1487148160, "question_id": 42244407, "link": "https://stackoverflow.com/questions/42244407/warning-on-updating-mongoid-gem-to-version-5-issue", "title": "Warning on updating Mongoid Gem to Version 5 Issue", "body": "<p>I have updated the mongoid gem to 5  from mongoid-4 on rails 4 application. I am facing the following warning on app restart</p>\n\n<pre><code>W, [2017-02-15T13:59:49.356541 #14483]  WARN -- : MONGODB Unsupported client option 'max_retries'. It will be ignored.\n\nW, [2017-02-15T13:59:49.356739 #14483]  WARN -- : MONGODB \nUnsupported client option 'retry_interval'. It will be ignored.\n\nW, [2017-02-15T13:59:49.356877 #14483]  WARN -- : MONGODB Unsupported client option 'username'. It will be ignored.\n</code></pre>\n\n<p>How to update Mongoid Yml to remove the warning?</p>\n\n<p>Also This is current YML file</p>\n\n<pre><code>staging:\n    clients:\n      default:\n         database: chillr_api\n         hosts:\n            - localhost:27017\n      options:\n        read:\n          mode: :nearest\n    # In the test environment we lower the retries and retry interval to\n    # low amounts for fast failures.\n          max_retries: 1\n          retry_interval: 0\n          username: 'username'\n          password: 'username'\n</code></pre>\n"}, {"tags": ["ruby", "qt", "frameworks"], "answers": [{"tags": [], "owner": {"reputation": 41846, "user_id": 926143, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/3396173c3d22988be1a0732d184902aa?s=128&d=identicon&r=PG", "display_name": "7stud", "link": "https://stackoverflow.com/users/926143/7stud"}, "is_accepted": true, "score": 3, "last_activity_date": 1487188424, "last_edit_date": 1487188424, "creation_date": 1487149370, "answer_id": 42244826, "question_id": 42244146, "link": "https://stackoverflow.com/questions/42244146/ruby-programming-in-qt-framework/42244826#42244826", "title": "Ruby programming in Qt Framework", "body": "<p>Sadly, support for GUI programming in ruby has waned over the years.  </p>\n\n<p><code>wxRuby</code>: Alex Fenton used to maintain wxRuby, but no more (wx was always my first choice of GUI flavors in whatever language I was using), and hackers trashed the wxRuby wiki. </p>\n\n<p><code>Shoes</code>: When its creator Why disappeared, it sort of languished for awhile, then it was resurrected in different colors: Red Shoes, Green shoes.  But, it's not a full featured GUI toolkit, and I've generally been disappointed with its appearance on OSX.  </p>\n\n<p><code>Tk/Tkinter</code>: It's part of the Ruby Standard Library.  The Tk docs also have examples in Ruby: <a href=\"http://www.tkdocs.com/tutorial/firstexample.html\" rel=\"nofollow noreferrer\">http://www.tkdocs.com/tutorial/firstexample.html</a></p>\n\n<p><code>Qt</code>: In the past, I've avoided Qt because of the restrictive licensing,  but I think the licensing has gotten more liberal over the years, and recently I had a play with it in python. As for Qt in ruby, I've used the Ruby Qt tutorial several times here: <a href=\"http://zetcode.com/gui/rubyqt/\" rel=\"nofollow noreferrer\">http://zetcode.com/gui/rubyqt/</a>, but that's pretty old.  I don't remember there being any other Qt resources in ruby.</p>\n\n<p>Also, beware: that <code>python Qt book</code> is also old. On amazon, it says the book was published in 2015, but amazon also says it's the 1st edition, and I know that book has been around a lot longer than that.  So, I looked it up, and the first edition was published in 2007.  I don't know why amazon is listing 2015 as the publication date. You can also check the dates on the amazon reviews, which go back to 2007.  I don\u2019t know if 2015 is the date of a reprint and it was out of print for awhile or what.  Ah, I think I know what's going on: the original was a hardback, and the 2015 version is paperback.  False advertising at its finest.</p>\n"}], "owner": {"reputation": 867, "user_id": 6155721, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/CCwkI.jpg?s=128&g=1", "display_name": "asimkon", "link": "https://stackoverflow.com/users/6155721/asimkon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1605, "favorite_count": 0, "accepted_answer_id": 42244826, "answer_count": 1, "score": 2, "last_activity_date": 1487188424, "creation_date": 1487147310, "question_id": 42244146, "link": "https://stackoverflow.com/questions/42244146/ruby-programming-in-qt-framework", "title": "Ruby programming in Qt Framework", "body": "<p>I need a GUI cross platform library to build a Ruby DB app via MySQL. In order to be more clear, i need something similar to <a href=\"http://doc.qt.io/qt-4.8/widgets-and-layouts.html\" rel=\"nofollow noreferrer\">this</a> (Qt Widgets) especially the Advanced Widget part such as QTableView. I know that this could be done (programming in Qt Framework via C++ or Python) and there are many books written on Amazon! (<a href=\"http://www.qtrac.eu/pyqtbook.html\" rel=\"nofollow noreferrer\">Rapid GUI Programming with Python and Qt and others</a>).</p>\n\n<p>Is there any similar support regarding Ruby in order to develop in Qt framework using Ruby instead of C++ or Python?</p>\n\n<p>Regards</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "rvm", "ruby-on-rails-5"], "comments": [{"owner": {"reputation": 30418, "user_id": 823617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DmWH1.png?s=128&g=1", "display_name": "Casper", "link": "https://stackoverflow.com/users/823617/casper"}, "edited": false, "score": 1, "creation_date": 1487142050, "post_id": 42242474, "comment_id": 71643786, "body": "Possible duplicate: <a href=\"http://stackoverflow.com/questions/41993527/fresh-install-of-rails-and-getting-openssl-errors-already-initialized-constant\" title=\"fresh install of rails and getting openssl errors already initialized constant\">stackoverflow.com/questions/41993527/&hellip;</a>"}], "answers": [{"tags": [], "owner": {"reputation": 969, "user_id": 2709544, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4d3301458cc3487b5434f6fa1b487367?s=128&d=identicon&r=PG", "display_name": "Mike", "link": "https://stackoverflow.com/users/2709544/mike"}, "is_accepted": false, "score": 1, "last_activity_date": 1487142235, "creation_date": 1487142235, "answer_id": 42242653, "question_id": 42242474, "link": "https://stackoverflow.com/questions/42242474/ruby-on-rails-setup-problems-already-initialized/42242653#42242653", "title": "ruby on rails setup problems: already initialized", "body": "<p>There's currently an <a href=\"https://github.com/ruby/openssl/issues/103\" rel=\"nofollow noreferrer\">issue open in OpenSSL</a> on this. Try specifying <code>gem 'openssl', '2.0.2'</code> in your Gemfile and see how it goes.</p>\n\n<p>Note: I'd recommend watching the issue and upgrading to the latest openssl once it's resolved, as it's certainly best to keep openssl up-to-date where possible!</p>\n"}], "owner": {"reputation": 11, "user_id": 5673359, "user_type": "registered", "profile_image": "https://graph.facebook.com/1718360028397074/picture?type=large", "display_name": "Qituo Ding", "link": "https://stackoverflow.com/users/5673359/qituo-ding"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 246, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1487142235, "creation_date": 1487141520, "last_edit_date": 1487141838, "question_id": 42242474, "link": "https://stackoverflow.com/questions/42242474/ruby-on-rails-setup-problems-already-initialized", "title": "ruby on rails setup problems: already initialized", "body": "<p>I'm trying to launch a rail project using rails server. But I received following error message:</p>\n\n<pre><code>/Users/dingqituo/.rvm/rubies/ruby-2.4.0/lib/ruby/2.4.0/x86_64-darwin15/openssl.bundle: warning: already initialized constant OpenSSL::VERSION\n/Users/dingqituo/.rvm/rubies/ruby-2.4.0/lib/ruby/2.4.0/x86_64-darwin15/openssl.bundle: warning: already initialized constant OpenSSL::OPENSSL_VERSION\n/Users/dingqituo/.rvm/rubies/ruby-2.4.0/lib/ruby/2.4.0/x86_64-darwin15/openssl.bundle: warning: already initialized constant OpenSSL::OPENSSL_LIBRARY_VERSION\n/Users/dingqituo/.rvm/rubies/ruby-2.4.0/lib/ruby/2.4.0/x86_64-darwin15/openssl.bundle: warning: already initialized constant OpenSSL::OPENSSL_VERSION_NUMBER\n/Users/dingqituo/.rvm/rubies/ruby-2.4.0/lib/ruby/2.4.0/x86_64-darwin15/openssl.bundle: warning: already initialized constant OpenSSL::OPENSSL_FIPS\n/Users/dingqituo/.rvm/rubies/ruby-2.4.0/lib/ruby/2.4.0/x86_64-darwin15/openssl.bundle: warning: already initialized constant OpenSSL::Config::DEFAULT_CONFIG_FILE\n/Users/dingqituo/.rvm/rubies/ruby-2.4.0/lib/ruby/2.4.0/x86_64-darwin15/openssl.bundle: warning: already initialized constant OpenSSL::PKCS7::Signer\n/Users/dingqituo/.rvm/rubies/ruby-2.4.0/lib/ruby/2.4.0/x86_64-darwin15/openssl.bundle: warning: already initialized constant OpenSSL::PKCS7::TEXT\n/Users/dingqituo/.rvm/rubies/ruby-2.4.0/lib/ruby/2.4.0/x86_64-darwin15/openssl.bundle: warning: already initialized constant OpenSSL::PKCS7::NOCERTS\n/Users/dingqituo/.rvm/rubies/ruby-2.4.0/lib/ruby/2.4.0/x86_64-darwin15/openssl.bundle: warning: already initialized constant OpenSSL::PKCS7::NOSIGS\n/Users/dingqituo/.rvm/rubies/ruby-2.4.0/lib/ruby/2.4.0/x86_64-darwin15/openssl.bundle: warning: already initialized constant OpenSSL::PKCS7::NOCHAIN\n/Users/dingqituo/.rvm/rubies/ruby-2.4.0/lib/ruby/2.4.0/x86_64-darwin15/openssl.bundle: warning: already initialized constant OpenSSL::PKCS7::NOINTERN\n/Users/dingqituo/.rvm/rubies/ruby-2.4.0/lib/ruby/2.4.0/x86_64-darwin15/openssl.bundle: warning: already initialized constant OpenSSL::SSL::OP_TLS_D5_BUG\n/Users/dingqituo/.rvm/rubies/ruby-2.4.0/lib/ruby/2.4.0/x86_64-darwin15/openssl.bundle: warning: already initialized constant OpenSSL::SSL::OP_TLS_BLOCK_PADDING_BUG\n/Users/dingqituo/.rvm/rubies/ruby-2.4.0/lib/ruby/2.4.0/x86_64-darwin15/openssl.bundle: warning: already initialized constant OpenSSL::SSL::OP_DONT_INSERT_EMPTY_FRAGMENTS\n/Users/dingqituo/.rvm/rubies/ruby-2.4.0/lib/ruby/2.4.0/x86_64-darwin15/openssl.bundle: warning: already initialized constant OpenSSL::SSL::OP_ALL\n/Users/dingqituo/.rvm/rubies/ruby-2.4.0/lib/ruby/2.4.0/x86_64-darwin15/openssl.bundle: warning: already initialized constant OpenSSL::SSL::OP_NO_SESSION_RESUMPTION_ON_RENEGOTIATION\n/Users/dingqituo/.rvm/rubies/ruby-2.4.0/lib/ruby/2.4.0/x86_64-darwin15/openssl.bundle: warning: already initialized constant OpenSSL::SSL::OP_SINGLE_ECDH_USE\n/Users/dingqituo/.rvm/rubies/ruby-2.4.0/lib/ruby/2.4.0/x86_64-darwin15/openssl.bundle: warning: already initialized constant OpenSSL::SSL::OP_SINGLE_DH_USE\n/Users/dingqituo/.rvm/rubies/ruby-2.4.0/lib/ruby/2.4.0/x86_64-darwin15/openssl.bundle: warning: already initialized constant OpenSSL::SSL::OP_EPHEMERAL_RSA\n/Users/dingqituo/.rvm/rubies/ruby-2.4.0/lib/ruby/2.4.0/x86_64-darwin15/openssl.bundle: warning: already initialized constant OpenSSL::SSL::OP_CIPHER_SERVER_PREFERENCE\n/Users/dingqituo/.rvm/rubies/ruby-2.4.0/lib/ruby/2.4.0/x86_64-darwin15/openssl.bundle: warning: already initialized constant OpenSSL::SSL::OP_TLS_ROLLBACK_BUG\n/Users/dingqituo/.rvm/rubies/ruby-2.4.0/lib/ruby/2.4.0/x86_64-darwin15/openssl.bundle: warning: already initialized constant OpenSSL::SSL::OP_NO_SSLv2\n/Users/dingqituo/.rvm/rubies/ruby-2.4.0/lib/ruby/2.4.0/x86_64-darwin15/openssl.bundle: warning: already initialized constant OpenSSL::SSL::OP_NO_SSLv3\n/Users/dingqituo/.rvm/rubies/ruby-2.4.0/lib/ruby/2.4.0/x86_64-darwin15/openssl.bundle: warning: already initialized constant OpenSSL::SSL::OP_NO_TLSv1\n/Users/dingqituo/.rvm/rubies/ruby-2.4.0/lib/ruby/2.4.0/x86_64-darwin15/openssl.bundle: warning: already initialized constant OpenSSL::SSL::OP_NO_TLSv1_1\n/Users/dingqituo/.rvm/rubies/ruby-2.4.0/lib/ruby/2.4.0/x86_64-darwin15/openssl.bundle: warning: already initialized constant OpenSSL::SSL::OP_NO_TLSv1_2\n/Users/dingqituo/.rvm/rubies/ruby-2.4.0/lib/ruby/2.4.0/x86_64-darwin15/openssl.bundle: warning: already initialized constant OpenSSL::SSL::OP_NO_TICKET\n/Users/dingqituo/.rvm/rubies/ruby-2.4.0/lib/ruby/2.4.0/x86_64-darwin15/openssl.bundle: warning: already initialized constant OpenSSL::X509::V_FLAG_CRL_CHECK_ALL\n/Users/dingqituo/.rvm/rubies/ruby-2.4.0/lib/ruby/2.4.0/x86_64-darwin15/openssl.bundle: warning: already initialized constant OpenSSL::X509::V_FLAG_IGNORE_CRITICAL\n/Users/dingqituo/.rvm/rubies/ruby-2.4.0/lib/ruby/2.4.0/x86_64-darwin15/openssl.bundle: warning: already initialized constant OpenSSL::X509::V_FLAG_X509_STRICT\n/Users/dingqituo/.rvm/rubies/ruby-2.4.0/lib/ruby/2.4.0/x86_64-darwin15/openssl.bundle: warning: already initialized constant OpenSSL::X509::V_FLAG_ALLOW_PROXY_CERTS\n/Users/dingqituo/.rvm/rubies/ruby-2.4.0/lib/ruby/2.4.0/x86_64-darwin15/openssl.bundle: warning: already initialized constant OpenSSL::X509::V_FLAG_POLICY_CHECK\n/Users/dingqituo/.rvm/rubies/ruby-2.4.0/lib/ruby/2.4.0/x86_64-darwin15/openssl.bundle: warning: already initialized constant OpenSSL::X509::V_FLAG_EXPLICIT_POLICY\n/Users/dingqituo/.rvm/rubies/ruby-2.4.0/lib/ruby/2.4.0/x86_64-darwin15/openssl.bundle: warning: already initialized constant OpenSSL::X509::V_FLAG_INHIBIT_ANY\n/Users/dingqituo/.rvm/rubies/ruby-2.4.0/lib/ruby/2.4.0/x86_64-darwin15/openssl.bundle: warning: already initialized constant OpenSSL::X509::V_FLAG_INHIBIT_MAP\n/Users/dingqituo/.rvm/rubies/ruby-2.4.0/lib/ruby/2.4.0/x86_64-darwin15/openssl.bundle: warning: already initialized constant OpenSSL::X509::V_FLAG_NOTIFY_POLICY\n/Users/dingqituo/.rvm/rubies/ruby-2.4.0/lib/ruby/2.4.0/x86_64-darwin15/openssl.bundle: warning: already initialized constant OpenSSL::X509::V_FLAG_EXTENDED_CRL_SUPPORT\n/Users/dingqituo/.rvm/rubies/ruby-2.4.0/lib/ruby/2.4.0/x86_64-darwin15/openssl.bundle: warning: already initialized constant OpenSSL::X509::V_FLAG_USE_DELTAS\n/Users/dingqituo/.rvm/rubies/ruby-2.4.0/lib/ruby/2.4.0/x86_64-darwin15/openssl.bundle: warning: already initialized constant OpenSSL::X509::V_FLAG_CHECK_SS_SIGNATURE\n/Users/dingqituo/.rvm/rubies/ruby-2.4.0/lib/ruby/2.4.0/x86_64-darwin15/openssl.bundle: warning: already initialized constant OpenSSL::X509::V_FLAG_TRUSTED_FIRST\n/Users/dingqituo/.rvm/rubies/ruby-2.4.0/lib/ruby/2.4.0/x86_64-darwin15/openssl.bundle: warning: already initialized constant OpenSSL::X509::V_FLAG_NO_ALT_CHAINS\n/Users/dingqituo/.rvm/rubies/ruby-2.4.0/lib/ruby/2.4.0/x86_64-darwin15/openssl.bundle: warning: already initialized constant OpenSSL::X509::PURPOSE_SSL_CLIENT\n/Users/dingqituo/.rvm/rubies/ruby-2.4.0/lib/ruby/2.4.0/x86_64-darwin15/openssl.bundle: warning: already initialized constant OpenSSL::X509::PURPOSE_SSL_SERVER\n/Users/dingqituo/.rvm/rubies/ruby-2.4.0/lib/ruby/2.4.0/x86_64-darwin15/openssl.bundle: warning: already initialized constant OpenSSL::X509::PURPOSE_NS_SSL_SERVER\n/Users/dingqituo/.rvm/rubies/ruby-2.4.0/lib/ruby/2.4.0/x86_64-darwin15/openssl.bundle: warning: already initialized constant OpenSSL::X509::PURPOSE_SMIME_SIGN\n/Users/dingqituo/.rvm/rubies/ruby-2.4.0/lib/ruby/2.4.0/x86_64-darwin15/openssl.bundle: warning: already initialized constant OpenSSL::X509::PURPOSE_SMIME_ENCRYPT\n/Users/dingqituo/.rvm/rubies/ruby-2.4.0/lib/ruby/2.4.0/x86_64-darwin15/openssl.bundle: warning: already initialized constant OpenSSL::X509::PURPOSE_CRL_SIGN\n/Users/dingqituo/.rvm/rubies/ruby-2.4.0/lib/ruby/2.4.0/x86_64-darwin15/openssl.bundle: warning: already initialized constant OpenSSL::X509::PURPOSE_ANY\n/Users/dingqituo/.rvm/rubies/ruby-2.4.0/lib/ruby/2.4.0/x86_64-darwin15/openssl.bundle: warning: already initialized constant OpenSSL::X509::PURPOSE_OCSP_HELPER\n/Users/dingqituo/.rvm/rubies/ruby-2.4.0/lib/ruby/2.4.0/x86_64-darwin15/openssl.bundle: warning: already initialized constant OpenSSL::X509::PURPOSE_TIMESTAMP_SIGN\n/Users/dingqituo/.rvm/rubies/ruby-2.4.0/lib/ruby/2.4.0/x86_64-darwin15/openssl.bundle: warning: already initialized constant OpenSSL::X509::TRUST_COMPAT\n/Users/dingqituo/.rvm/rubies/ruby-2.4.0/lib/ruby/2.4.0/x86_64-darwin15/openssl.bundle: warning: already initialized constant OpenSSL::X509::TRUST_SSL_CLIENT\n/Users/dingqituo/.rvm/rubies/ruby-2.4.0/lib/ruby/2.4.0/x86_64-darwin15/openssl.bundle: warning: already initialized constant OpenSSL::X509::TRUST_SSL_SERVER\n/Users/dingqituo/.rvm/rubies/ruby-2.4.0/lib/ruby/2.4.0/x86_64-darwin15/openssl.bundle: warning: already initialized constant OpenSSL::X509::TRUST_EMAIL\n/Users/dingqituo/.rvm/rubies/ruby-2.4.0/lib/ruby/2.4.0/x86_64-darwin15/openssl.bundle: warning: already initialized constant OpenSSL::X509::TRUST_OBJECT_SIGN\n/Users/dingqituo/.rvm/rubies/ruby-2.4.0/lib/ruby/2.4.0/x86_64-darwin15/openssl.bundle: warning: already initialized constant OpenSSL::X509::TRUST_OCSP_SIGN\n/Users/dingqituo/.rvm/rubies/ruby-2.4.0/lib/ruby/2.4.0/x86_64-darwin15/openssl.bundle: warning: already initialized constant OpenSSL::X509::TRUST_OCSP_REQUEST\n/Users/dingqituo/.rvm/rubies/ruby-2.4.0/lib/ruby/2.4.0/x86_64-darwin15/openssl.bundle: warning: already initialized constant OpenSSL::X509::TRUST_TSA\n/Users/dingqituo/.rvm/rubies/ruby-2.4.0/lib/ruby/2.4.0/x86_64-darwin15/openssl.bundle: warning: already initialized constant OpenSSL::X509::DEFAULT_CERT_AREA\n/Users/dingqituo/.rvm/rubies/ruby-2.4.0/lib/ruby/2.4.0/x86_64-darwin15/openssl.bundle: warning: already initialized constant OpenSSL::X509::DEFAULT_CERT_DIR\n/Users/dingqituo/.rvm/rubies/ruby-2.4.0/lib/ruby/2.4.0/x86_64-darwin15/openssl.bundle: warning: already initialized constant OpenSSL::X509::DEFAULT_CERT_FILE\n/Users/dingqituo/.rvm/rubies/ruby-2.4.0/lib/ruby/2.4.0/x86_64-darwin15/openssl.bundle: warning: already initialized constant OpenSSL::X509::DEFAULT_CERT_DIR_ENV\n/Users/dingqituo/.rvm/rubies/ruby-2.4.0/lib/ruby/2.4.0/x86_64-darwin15/openssl.bundle: warning: already initialized constant OpenSSL::X509::DEFAULT_CERT_FILE_ENV\n/Users/dingqituo/.rvm/rubies/ruby-2.4.0/lib/ruby/2.4.0/x86_64-darwin15/openssl.bundle: warning: already initialized constant OpenSSL::X509::DEFAULT_PRIVATE_DIR\n/Users/dingqituo/.rvm/rubies/ruby-2.4.0/lib/ruby/2.4.0/x86_64-darwin15/openssl.bundle: warning: already initialized constant OpenSSL::OCSP::RESPONSE_STATUS_INTERNALERROR\n/Users/dingqituo/.rvm/rubies/ruby-2.4.0/lib/ruby/2.4.0/x86_64-darwin15/openssl.bundle: warning: already initialized constant OpenSSL::OCSP::RESPONSE_STATUS_MALFORMEDREQUEST\n/Users/dingqituo/.rvm/rubies/ruby-2.4.0/lib/ruby/2.4.0/x86_64-darwin15/openssl.bundle: warning: already initialized constant OpenSSL::OCSP::REVOKED_STATUS_NOSTATUS\n/Users/dingqituo/.rvm/rubies/ruby-2.4.0/lib/ruby/2.4.0/x86_64-darwin15/openssl.bundle: warning: already initialized constant OpenSSL::OCSP::RESPONSE_STATUS_SIGREQUIRED\n/Users/dingqituo/.rvm/rubies/ruby-2.4.0/lib/ruby/2.4.0/x86_64-darwin15/openssl.bundle: warning: already initialized constant OpenSSL::OCSP::RESPONSE_STATUS_SUCCESSFUL\n/Users/dingqituo/.rvm/rubies/ruby-2.4.0/lib/ruby/2.4.0/x86_64-darwin15/openssl.bundle: warning: already initialized constant OpenSSL::OCSP::RESPONSE_STATUS_TRYLATER\n/Users/dingqituo/.rvm/rubies/ruby-2.4.0/lib/ruby/2.4.0/x86_64-darwin15/openssl.bundle: warning: already initialized constant OpenSSL::OCSP::REVOKED_STATUS_AFFILIATIONCHANGED\n/Users/dingqituo/.rvm/rubies/ruby-2.4.0/lib/ruby/2.4.0/x86_64-darwin15/openssl.bundle: warning: already initialized constant OpenSSL::OCSP::REVOKED_STATUS_CACOMPROMISE\n/Users/dingqituo/.rvm/rubies/ruby-2.4.0/lib/ruby/2.4.0/openssl/cipher.rb:18: warning: constant OpenSSL::Cipher::Cipher is deprecated\n/Users/dingqituo/.rvm/rubies/ruby-2.4.0/lib/ruby/2.4.0/openssl/cipher.rb:24: warning: already initialized constant OpenSSL::Cipher::RC2\n/Users/dingqituo/.rvm/gems/ruby-2.4.0/gems/openssl-2.0.3/lib/openssl/cipher.rb:24: warning: previous definition of RC2 was here\n/Users/dingqituo/.rvm/rubies/ruby-2.4.0/lib/ruby/2.4.0/openssl/cipher.rb:18: warning: constant OpenSSL::Cipher::Cipher is deprecated\n/Users/dingqituo/.rvm/rubies/ruby-2.4.0/lib/ruby/2.4.0/openssl/cipher.rb:24: warning: already initialized constant OpenSSL::Cipher::RC4\n/Users/dingqituo/.rvm/gems/ruby-2.4.0/gems/openssl-2.0.3/lib/openssl/cipher.rb:24: warning: previous definition of RC4 was here\n/Users/dingqituo/.rvm/rubies/ruby-2.4.0/lib/ruby/2.4.0/openssl/cipher.rb:18: warning: constant OpenSSL::Cipher::Cipher is deprecated\n/Users/dingqituo/.rvm/rubies/ruby-2.4.0/lib/ruby/2.4.0/openssl/cipher.rb:24: warning: already initialized constant OpenSSL::Cipher::RC5\n/Users/dingqituo/.rvm/gems/ruby-2.4.0/gems/openssl-2.0.3/lib/openssl/cipher.rb:24: warning: previous definition of RC5 was here\n/Users/dingqituo/.rvm/rubies/ruby-2.4.0/lib/ruby/2.4.0/openssl/cipher.rb:28: warning: constant OpenSSL::Cipher::Cipher is deprecated\n/Users/dingqituo/.rvm/rubies/ruby-2.4.0/lib/ruby/2.4.0/openssl/cipher.rb:33: warning: already initialized constant OpenSSL::Cipher::AES128\n/Users/dingqituo/.rvm/gems/ruby-2.4.0/gems/openssl-2.0.3/lib/openssl/cipher.rb:33: warning: previous definition of AES128 was here\n/Users/dingqituo/.rvm/rubies/ruby-2.4.0/lib/ruby/2.4.0/openssl/cipher.rb:28: warning: constant OpenSSL::Cipher::Cipher is deprecated\n/Users/dingqituo/.rvm/rubies/ruby-2.4.0/lib/ruby/2.4.0/openssl/cipher.rb:33: warning: already initialized constant OpenSSL::Cipher::AES192\n/Users/dingqituo/.rvm/gems/ruby-2.4.0/gems/openssl-2.0.3/lib/openssl/cipher.rb:33: warning: previous definition of AES192 was here\n/Users/dingqituo/.rvm/rubies/ruby-2.4.0/lib/ruby/2.4.0/openssl/cipher.rb:28: warning: constant OpenSSL::Cipher::Cipher is deprecated\n/Users/dingqituo/.rvm/rubies/ruby-2.4.0/lib/ruby/2.4.0/openssl/cipher.rb:33: warning: already initialized constant OpenSSL::Cipher::AES256\n/Users/dingqituo/.rvm/gems/ruby-2.4.0/gems/openssl-2.0.3/lib/openssl/cipher.rb:33: warning: previous definition of AES256 was here\n/Users/dingqituo/.rvm/rubies/ruby-2.4.0/lib/ruby/2.4.0/openssl/cipher.rb:64: warning: constant OpenSSL::Cipher::Cipher is deprecated\n/Users/dingqituo/.rvm/rubies/ruby-2.4.0/lib/ruby/2.4.0/openssl/cipher.rb:64: warning: constant OpenSSL::Cipher::Cipher is deprecated\n/Users/dingqituo/.rvm/rubies/ruby-2.4.0/lib/ruby/2.4.0/openssl/cipher.rb:64:in `&lt;class:Cipher&gt;': superclass mismatch for class Cipher (TypeError)\n    from /Users/dingqituo/.rvm/rubies/ruby-2.4.0/lib/ruby/2.4.0/openssl/cipher.rb:16:in `&lt;module:OpenSSL&gt;'\n    from /Users/dingqituo/.rvm/rubies/ruby-2.4.0/lib/ruby/2.4.0/openssl/cipher.rb:15:in `&lt;top (required)&gt;'\n    from /Users/dingqituo/.rvm/rubies/ruby-2.4.0/lib/ruby/2.4.0/openssl.rb:17:in `require'\n    from /Users/dingqituo/.rvm/rubies/ruby-2.4.0/lib/ruby/2.4.0/openssl.rb:17:in `&lt;top (required)&gt;'\n    from /Users/dingqituo/.rvm/gems/ruby-2.4.0@global/gems/activesupport-5.0.1/lib/active_support/key_generator.rb:2:in `require'\n    from /Users/dingqituo/.rvm/gems/ruby-2.4.0@global/gems/activesupport-5.0.1/lib/active_support/key_generator.rb:2:in `&lt;top (required)&gt;'\n    from /Users/dingqituo/.rvm/gems/ruby-2.4.0@global/gems/railties-5.0.1/lib/rails/application.rb:4:in `require'\n    from /Users/dingqituo/.rvm/gems/ruby-2.4.0@global/gems/railties-5.0.1/lib/rails/application.rb:4:in `&lt;top (required)&gt;'\n    from /Users/dingqituo/.rvm/gems/ruby-2.4.0@global/gems/railties-5.0.1/lib/rails.rb:11:in `require'\n    from /Users/dingqituo/.rvm/gems/ruby-2.4.0@global/gems/railties-5.0.1/lib/rails.rb:11:in `&lt;top (required)&gt;'\n    from /Users/dingqituo/.rvm/gems/ruby-2.4.0@global/gems/railties-5.0.1/lib/rails/commands/server.rb:4:in `require'\n    from /Users/dingqituo/.rvm/gems/ruby-2.4.0@global/gems/railties-5.0.1/lib/rails/commands/server.rb:4:in `&lt;top (required)&gt;'\n    from /Users/dingqituo/.rvm/gems/ruby-2.4.0@global/gems/railties-5.0.1/lib/rails/commands/commands_tasks.rb:138:in `require'\n    from /Users/dingqituo/.rvm/gems/ruby-2.4.0@global/gems/railties-5.0.1/lib/rails/commands/commands_tasks.rb:138:in `require_command!'\n    from /Users/dingqituo/.rvm/gems/ruby-2.4.0@global/gems/railties-5.0.1/lib/rails/commands/commands_tasks.rb:83:in `server'\n    from /Users/dingqituo/.rvm/gems/ruby-2.4.0@global/gems/railties-5.0.1/lib/rails/commands/commands_tasks.rb:49:in `run_command!'\n    from /Users/dingqituo/.rvm/gems/ruby-2.4.0@global/gems/railties-5.0.1/lib/rails/commands.rb:18:in `&lt;top (required)&gt;'\n    from /Users/dingqituo/summer_school/bin/rails:9:in `require'\n    from /Users/dingqituo/summer_school/bin/rails:9:in `&lt;top (required)&gt;'\n    from /Users/dingqituo/.rvm/gems/ruby-2.4.0/gems/spring-2.0.1/lib/spring/client/rails.rb:28:in `load'\n    from /Users/dingqituo/.rvm/gems/ruby-2.4.0/gems/spring-2.0.1/lib/spring/client/rails.rb:28:in `call'\n    from /Users/dingqituo/.rvm/gems/ruby-2.4.0/gems/spring-2.0.1/lib/spring/client/command.rb:7:in `call'\n    from /Users/dingqituo/.rvm/gems/ruby-2.4.0/gems/spring-2.0.1/lib/spring/client.rb:30:in `run'\n    from /Users/dingqituo/.rvm/gems/ruby-2.4.0/gems/spring-2.0.1/bin/spring:49:in `&lt;top (required)&gt;'\n    from /Users/dingqituo/.rvm/gems/ruby-2.4.0/gems/spring-2.0.1/lib/spring/binstub.rb:31:in `load'\n    from /Users/dingqituo/.rvm/gems/ruby-2.4.0/gems/spring-2.0.1/lib/spring/binstub.rb:31:in `&lt;top (required)&gt;'\n    from /Users/dingqituo/summer_school/bin/spring:15:in `require'\n    from /Users/dingqituo/summer_school/bin/spring:15:in `&lt;top (required)&gt;'\n    from bin/rails:3:in `load'\n    from bin/rails:3:in `&lt;main&gt;'\n</code></pre>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 167912, "user_id": 240443, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/495d675e3bc42ed1dee469e2ce701f1b?s=128&d=identicon&r=PG", "display_name": "Amadan", "link": "https://stackoverflow.com/users/240443/amadan"}, "edited": false, "score": 1, "creation_date": 1487141003, "post_id": 42242246, "comment_id": 71643241, "body": "Hello, and welcome to Stack Overflow. In the future, please use proper indentation: you will get more answers and faster if your code is correctly formatted; and please also explain the purpose of the program, and not expect the other users to run it or read it line by line to figure out what you are trying to do (potentially wrongly)."}, {"owner": {"reputation": 125, "user_id": 7566951, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/71d723b0b0ec1605ef2a71aa651463a1?s=128&d=identicon&r=PG&f=1", "display_name": "Vroryn", "link": "https://stackoverflow.com/users/7566951/vroryn"}, "reply_to_user": {"reputation": 167912, "user_id": 240443, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/495d675e3bc42ed1dee469e2ce701f1b?s=128&d=identicon&r=PG", "display_name": "Amadan", "link": "https://stackoverflow.com/users/240443/amadan"}, "edited": false, "score": 0, "creation_date": 1487142735, "post_id": 42242246, "comment_id": 71644148, "body": "Ok I will keep that in mind! Thank you"}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 1, "creation_date": 1487143101, "post_id": 42242246, "comment_id": 71644328, "body": "One thing to consider when writing Ruby is to avoid using <code>for</code>, although that is admittedly advice that sounds strange considering that&#39;s the backbone of most other languages. In Ruby <code>each</code> is the go-to iterator, and it has a number of variants, like <code>each_with_index</code> or <code>each_with_object</code> that make it quite flexible. <code>(1..num).each</code>  or <code>(1..x).each do |x|</code> is how these would normally be expressed. The <a href=\"http://ruby-doc.org/core-2.4.0/Enumerable.html\" rel=\"nofollow noreferrer\">Enumerable</a> library is the shining gem in the middle of Ruby, so if you&#39;re learning it, have a look at the toys and tools in there."}, {"owner": {"reputation": 125, "user_id": 7566951, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/71d723b0b0ec1605ef2a71aa651463a1?s=128&d=identicon&r=PG&f=1", "display_name": "Vroryn", "link": "https://stackoverflow.com/users/7566951/vroryn"}, "edited": false, "score": 0, "creation_date": 1487144350, "post_id": 42242246, "comment_id": 71644989, "body": "I am literally just learning it, first programming language too, but thank you for your suggestions! It is quite overwhelming though at the beginning haha."}], "answers": [{"comments": [{"owner": {"reputation": 125, "user_id": 7566951, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/71d723b0b0ec1605ef2a71aa651463a1?s=128&d=identicon&r=PG&f=1", "display_name": "Vroryn", "link": "https://stackoverflow.com/users/7566951/vroryn"}, "edited": false, "score": 0, "creation_date": 1487142611, "post_id": 42242316, "comment_id": 71644068, "body": "Thank you so much! Exactly what I was looking for!"}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1487142964, "post_id": 42242316, "comment_id": 71644264, "body": "Oh, I see <a href=\"http://blog.bigbinary.com/2016/11/02/ruby-2-4-introduces-enumerable-sum.html\" rel=\"nofollow noreferrer\"><code>sum</code></a> made it into Ruby from Rails in 2.4."}, {"owner": {"reputation": 12629, "user_id": 4739257, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/MdhEs.jpg?s=128&g=1", "display_name": "Ilya", "link": "https://stackoverflow.com/users/4739257/ilya"}, "reply_to_user": {"reputation": 125, "user_id": 7566951, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/71d723b0b0ec1605ef2a71aa651463a1?s=128&d=identicon&r=PG&f=1", "display_name": "Vroryn", "link": "https://stackoverflow.com/users/7566951/vroryn"}, "edited": false, "score": 0, "creation_date": 1487143705, "post_id": 42242316, "comment_id": 71644651, "body": "@Vroryn, please, don&#39;t forget to accept my answer if it solved your problem."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 2, "creation_date": 1487144648, "post_id": 42242316, "comment_id": 71645129, "body": "Considering that it&#39;s an arithmetic series, <code>puts n*(n+1)&#47;2</code> is sufficient."}, {"owner": {"reputation": 12629, "user_id": 4739257, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/MdhEs.jpg?s=128&g=1", "display_name": "Ilya", "link": "https://stackoverflow.com/users/4739257/ilya"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 1, "creation_date": 1487145100, "post_id": 42242316, "comment_id": 71645372, "body": "@CarySwoveland, complexity is the same. Please, check <a href=\"http://stackoverflow.com/questions/41449617/why-is-sum-so-much-faster-than-inject\">this</a> SO question and answer. In my answer, you should not care about implementation and I think <code>sum</code> is more readable."}, {"owner": {"reputation": 125, "user_id": 7566951, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/71d723b0b0ec1605ef2a71aa651463a1?s=128&d=identicon&r=PG&f=1", "display_name": "Vroryn", "link": "https://stackoverflow.com/users/7566951/vroryn"}, "edited": false, "score": 1, "creation_date": 1487148163, "post_id": 42242316, "comment_id": 71647096, "body": "Actually, I did encounter a problem that did not appear before. It states that there&#39;s a &quot;nomethoderror&quot; and that .sum is not defined. If it helps my version of ruby is 2.3"}, {"owner": {"reputation": 12629, "user_id": 4739257, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/MdhEs.jpg?s=128&g=1", "display_name": "Ilya", "link": "https://stackoverflow.com/users/4739257/ilya"}, "reply_to_user": {"reputation": 125, "user_id": 7566951, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/71d723b0b0ec1605ef2a71aa651463a1?s=128&d=identicon&r=PG&f=1", "display_name": "Vroryn", "link": "https://stackoverflow.com/users/7566951/vroryn"}, "edited": false, "score": 0, "creation_date": 1487149114, "post_id": 42242316, "comment_id": 71647684, "body": "@Vroryn, <code>sum</code> working from ruby v 2.4. You can use Carry&#39;s approach, or (since you&#39;re learning ruby) just upgrade ruby from 2.3 to 2.4"}, {"owner": {"reputation": 12629, "user_id": 4739257, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/MdhEs.jpg?s=128&g=1", "display_name": "Ilya", "link": "https://stackoverflow.com/users/4739257/ilya"}, "reply_to_user": {"reputation": 125, "user_id": 7566951, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/71d723b0b0ec1605ef2a71aa651463a1?s=128&d=identicon&r=PG&f=1", "display_name": "Vroryn", "link": "https://stackoverflow.com/users/7566951/vroryn"}, "edited": false, "score": 0, "creation_date": 1487149416, "post_id": 42242316, "comment_id": 71647880, "body": "@Vroryn, or use <code>(1..n).inject(:+)</code> (less efficient)"}, {"owner": {"reputation": 125, "user_id": 7566951, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/71d723b0b0ec1605ef2a71aa651463a1?s=128&d=identicon&r=PG&f=1", "display_name": "Vroryn", "link": "https://stackoverflow.com/users/7566951/vroryn"}, "edited": false, "score": 0, "creation_date": 1487152884, "post_id": 42242316, "comment_id": 71650422, "body": "Sorry, I probably wasted your time, but do you know a step where it would also show all the arithmetic series up to and including the number that the user put in? (basically edited my post for more clarity)"}, {"owner": {"reputation": 12629, "user_id": 4739257, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/MdhEs.jpg?s=128&g=1", "display_name": "Ilya", "link": "https://stackoverflow.com/users/4739257/ilya"}, "reply_to_user": {"reputation": 125, "user_id": 7566951, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/71d723b0b0ec1605ef2a71aa651463a1?s=128&d=identicon&r=PG&f=1", "display_name": "Vroryn", "link": "https://stackoverflow.com/users/7566951/vroryn"}, "edited": false, "score": 0, "creation_date": 1487155430, "post_id": 42242316, "comment_id": 71652455, "body": "@Vroryn, I&#39;ve answered on the edited question, but next time, please, create a new question instead of fundamental editing of existing one."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1487172165, "post_id": 42242316, "comment_id": 71664366, "body": "I don&#39;t understand what you mean by saying the complexity is the same. <code>n*(n+1)&#47;2</code> is O(1) whereas <code>(1..n).sum</code> is O(n). No?"}, {"owner": {"reputation": 12629, "user_id": 4739257, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/MdhEs.jpg?s=128&g=1", "display_name": "Ilya", "link": "https://stackoverflow.com/users/4739257/ilya"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1487172321, "post_id": 42242316, "comment_id": 71664500, "body": "@CarySwoveland, <code>sum</code> is optimized for Range objects. Complexity is O(1)"}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1487174073, "post_id": 42242316, "comment_id": 71665867, "body": "I didn&#39;t know that until I read the q&amp;a at the link you gave. It&#39;s curious that <a href=\"http://ruby-doc.org/core-2.4.0/Enumerable.html#method-i-sum\" rel=\"nofollow noreferrer\">Enumerable#sum</a> does that by checking the receiver rather than there being a method <code>Range#sum</code> (ala <code>Enumerable#select</code> vs <code>Hash#select</code>). Using the formula does make sense when compatibility with Ruby versions prior to 2.4 is required."}, {"owner": {"reputation": 12629, "user_id": 4739257, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/MdhEs.jpg?s=128&g=1", "display_name": "Ilya", "link": "https://stackoverflow.com/users/4739257/ilya"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1487176310, "post_id": 42242316, "comment_id": 71667681, "body": "@CarySwoveland, sure. Also, check <a href=\"http://stackoverflow.com/questions/41636558/why-is-rangesum-defined-in-enumerable-module\">this</a> question about defining <code>sum</code> method"}], "tags": [], "owner": {"reputation": 12629, "user_id": 4739257, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/MdhEs.jpg?s=128&g=1", "display_name": "Ilya", "link": "https://stackoverflow.com/users/4739257/ilya"}, "is_accepted": true, "score": 2, "last_activity_date": 1487155294, "last_edit_date": 1487155294, "creation_date": 1487140900, "answer_id": 42242316, "question_id": 42242246, "link": "https://stackoverflow.com/questions/42242246/how-to-get-rid-of-a-nested-loop-to-make-an-arithmetic-series-more-efficient/42242316#42242316", "title": "How to get rid of a nested loop to make an arithmetic series more efficient?", "body": "<p>Assuming that you want to calculate and puts a sum of numbers from 1 to the input number, I suggest following:</p>\n\n<pre><code>while entry != \"q\"\n   print \"enter a number: \"\n   num = gets.to_i\n   puts (1..num).sum\n\n   print \"press any key to continue (q to quit): \"\n   entry = gets.chomp\nend\n</code></pre>\n\n<p>For edited question solution could be:</p>\n\n<pre><code>while entry != \"q\"\n   print \"enter a number: \"\n   num = gets.to_i\n   (1..num).inject(0) do |res, e|\n     res += e\n     p res\n    end\n\n   print \"press any key to continue (q to quit): \"\n   entry = gets.chomp\nend\n</code></pre>\n"}], "owner": {"reputation": 125, "user_id": 7566951, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/71d723b0b0ec1605ef2a71aa651463a1?s=128&d=identicon&r=PG&f=1", "display_name": "Vroryn", "link": "https://stackoverflow.com/users/7566951/vroryn"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 152, "favorite_count": 0, "accepted_answer_id": 42242316, "answer_count": 1, "score": 2, "last_activity_date": 1487155294, "creation_date": 1487140593, "last_edit_date": 1487151715, "question_id": 42242246, "link": "https://stackoverflow.com/questions/42242246/how-to-get-rid-of-a-nested-loop-to-make-an-arithmetic-series-more-efficient", "title": "How to get rid of a nested loop to make an arithmetic series more efficient?", "body": "<p>I am pretty new to programming so bear with me, please.</p>\n\n<p>So this is the code I have right now, I would like to know how to combine the two loops in the middle without changing the function of the program.</p>\n\n<pre><code>entry = \" \"\n\nwhile entry != \"q\"\n   print \"enter a number: \"\n   num = gets.to_i\n\n    for x in 1..num \n      sum = 0\n    end\n\n    for y in 1..x\n      sum = sum + y\n      puts sum\n    end\n\n    print \"press any key to continue (q to quit): \"\n    entry = gets.chomp\nend\n</code></pre>\n\n<p>Any help would be greatly appreciated!</p>\n\n<p>Thank you!</p>\n\n<p>Edit: </p>\n\n<p>I guess I should clarify the function of this program; the user types in a number and then it calculates the value of each arithmetic series up to and including the number that the user put in.</p>\n\n<p>So it if I type in 3 the result should display like this: </p>\n\n<p>1</p>\n\n<p>3</p>\n\n<p>6</p>\n\n<p>Sorry for the confusion!</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 16229, "user_id": 525478, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/3b6c0b47a0c430a0b141baee7ea845be?s=128&d=identicon&r=PG", "display_name": "Brad Werth", "link": "https://stackoverflow.com/users/525478/brad-werth"}, "edited": false, "score": 1, "creation_date": 1487133902, "post_id": 42240890, "comment_id": 71640590, "body": "Possible duplicate of <a href=\"http://stackoverflow.com/questions/2699584/how-to-split-chunk-a-ruby-array-into-parts-of-x-elements\">How to split (chunk) a Ruby array into parts of X elements?</a>"}, {"owner": {"reputation": 3234, "user_id": 994581, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/5ff79a62688297a354a41d772f20a547?s=128&d=identicon&r=PG", "display_name": "yellowreign", "link": "https://stackoverflow.com/users/994581/yellowreign"}, "reply_to_user": {"reputation": 16229, "user_id": 525478, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/3b6c0b47a0c430a0b141baee7ea845be?s=128&d=identicon&r=PG", "display_name": "Brad Werth", "link": "https://stackoverflow.com/users/525478/brad-werth"}, "edited": false, "score": 0, "creation_date": 1487134120, "post_id": 42240890, "comment_id": 71640647, "body": "Thanks @BradWerth.  It sounds like I can use in_groups_of.  What I don&#39;t understand now, is how to assign those groups to dates."}, {"owner": {"reputation": 16229, "user_id": 525478, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/3b6c0b47a0c430a0b141baee7ea845be?s=128&d=identicon&r=PG", "display_name": "Brad Werth", "link": "https://stackoverflow.com/users/525478/brad-werth"}, "edited": false, "score": 0, "creation_date": 1487134314, "post_id": 42240890, "comment_id": 71640702, "body": "I&#39;m sorry, I picked the wrong one, you probably want <a href=\"http://stackoverflow.com/questions/3864139/need-to-split-arrays-to-sub-arrays-of-specified-size-in-ruby\" title=\"need to split arrays to sub arrays of specified size in ruby\">stackoverflow.com/questions/3864139/&hellip;</a>"}], "answers": [{"comments": [{"owner": {"reputation": 3234, "user_id": 994581, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/5ff79a62688297a354a41d772f20a547?s=128&d=identicon&r=PG", "display_name": "yellowreign", "link": "https://stackoverflow.com/users/994581/yellowreign"}, "edited": false, "score": 0, "creation_date": 1487135620, "post_id": 42241017, "comment_id": 71641077, "body": "Thanks!  Yes, <code>Questions</code> is an AR model and <code>publish_date</code> is an actual attribute.  I must&#39;ve did something wrong.  I did <code>@questions.shuffle</code>, <code>@questions.in_groups_of(3)</code> and then <code>@questions.map.with_index(1) do |question, i|   question.update(publish_date: Date.current + i) end</code> but all of the <code>questions</code> just ended up with Date.current + i (tomorrow) as the publish_date.  What did I do wrong?"}, {"owner": {"reputation": 3234, "user_id": 994581, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/5ff79a62688297a354a41d772f20a547?s=128&d=identicon&r=PG", "display_name": "yellowreign", "link": "https://stackoverflow.com/users/994581/yellowreign"}, "edited": false, "score": 0, "creation_date": 1487136676, "post_id": 42241017, "comment_id": 71641424, "body": "Sorry, I realized that I might need to change the number after <code>with_index</code> to <code>(7)</code>.  When I did that, the <code>publish_date</code> was different for the <code>questions</code>, but it seem to not take into consideration the groups.  I selected 9 <code>questions</code>, but instead of just assigning them to the next 7 days, it assigned to the next 9 days.  I must be missing something between @questions.in_groups_of(3) and your code, but I&#39;m unsure what."}, {"owner": {"reputation": 63078, "user_id": 220147, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b3881a28fe402dd2d1de44717486cae8?s=128&d=identicon&r=PG", "display_name": "Michael Kohl", "link": "https://stackoverflow.com/users/220147/michael-kohl"}, "reply_to_user": {"reputation": 3234, "user_id": 994581, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/5ff79a62688297a354a41d772f20a547?s=128&d=identicon&r=PG", "display_name": "yellowreign", "link": "https://stackoverflow.com/users/994581/yellowreign"}, "edited": false, "score": 0, "creation_date": 1487137975, "post_id": 42241017, "comment_id": 71641938, "body": "<code>@questions.in_groups_of(3)</code> gives you an array of 3 element arrays. So you need to iterate over the groups. I.e. something like <code>@questions.in_groups_of(3).each { |group| group.map.with_index... }</code>"}], "tags": [], "owner": {"reputation": 63078, "user_id": 220147, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b3881a28fe402dd2d1de44717486cae8?s=128&d=identicon&r=PG", "display_name": "Michael Kohl", "link": "https://stackoverflow.com/users/220147/michael-kohl"}, "is_accepted": true, "score": 0, "last_activity_date": 1487134494, "creation_date": 1487134494, "answer_id": 42241017, "question_id": 42240890, "link": "https://stackoverflow.com/questions/42240890/rails-dividing-array-and-assigning-to-value/42241017#42241017", "title": "Rails Dividing Array and Assigning to Value", "body": "<p>You already figured out how to get your groups. To set the publish date for the group elements, you can do something like this:</p>\n\n<pre><code>questions.map.with_index(1) do |question, i|\n  question.update(publish_date: Date.current + i\nend\n</code></pre>\n\n<p>This is assuming that <code>questions</code> are an AR model and <code>publish_date</code> is an actual attribute. </p>\n"}, {"tags": [], "owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "is_accepted": false, "score": 0, "last_activity_date": 1487139801, "creation_date": 1487139801, "answer_id": 42242057, "question_id": 42240890, "link": "https://stackoverflow.com/questions/42240890/rails-dividing-array-and-assigning-to-value/42242057#42242057", "title": "Rails Dividing Array and Assigning to Value", "body": "<p>Since you're shuffling the records you don't have to worry about which order they're in. Just deal them out until your stack of questions is exhausted:</p>\n\n<pre><code># Represent questions here as numbers\nquestions = (1..15).to_a\n\n# Create an array to collect answers for each day of the week\ndays = Array.new(7) { [ ] }\n\n# Deal out each of the questions to a day of the week\nquestions.each_with_index do |q, i|\n  days[i % 7] &lt;&lt; q\nend\n\n# Scramble things just to introduce a bit of variety\ndays.shuffle!\n\ndays\n# =&gt; [[3, 10], [4, 11], [2, 9], [1, 8, 15], [6, 13], [5, 12], [7, 14]]\n</code></pre>\n\n<p>This way you'll get a fairly even mix of questions across the given days but without them all being front-loaded on the beginning of the week if there's a non multiple of seven number of them.</p>\n\n<p>I don't think this is possible to do with things like <code>each_slice</code> since the number of questions each day will vary.</p>\n"}], "owner": {"reputation": 3234, "user_id": 994581, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/5ff79a62688297a354a41d772f20a547?s=128&d=identicon&r=PG", "display_name": "yellowreign", "link": "https://stackoverflow.com/users/994581/yellowreign"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 305, "favorite_count": 0, "accepted_answer_id": 42241017, "answer_count": 2, "score": 0, "last_activity_date": 1487139801, "creation_date": 1487133757, "last_edit_date": 1487134273, "question_id": 42240890, "link": "https://stackoverflow.com/questions/42240890/rails-dividing-array-and-assigning-to-value", "title": "Rails Dividing Array and Assigning to Value", "body": "<p>In my Rails 4 app, I have submitted <code>Questions</code>.  What I want to do is to shuffle the order of the <code>Questions</code>, divide the list into seven (for the next seven days), and then save these <code>Questions</code> with a publish_date.  </p>\n\n<p>The <code>publish_dates</code> would be the next 7 days (i.e. <code>Date.current+1</code>, <code>Date.current+2</code>, <code>Date.current+3</code>, <code>Date.current+4</code>, <code>Date.current+5</code>, <code>Date.current+6</code>, <code>Date.current+7</code>).</p>\n\n<p>I understand that I can shuffle the records with <code>@questions.shuffle</code>, but I don't know how to divide the results by seven (I know that since the number of <code>Questions</code> won't always be divisible by 7, some days may end up with one additional <code>Question</code>), and how to assign those to a <code>publish_date</code>.</p>\n\n<p>Thank you in advance for any help!</p>\n\n<hr>\n\n<p>UPDATE</p>\n\n<p>It sounds like I just need to use <code>in_groups_of</code> to divide the results.  What I don't understand now is how to assign the groups to the dates.</p>\n"}, {"tags": ["ruby", "algorithm", "binary-search", "schedule"], "comments": [{"owner": {"reputation": 14827, "user_id": 645886, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2abb0123e9484284a9cb2d36aa9854b3?s=128&d=identicon&r=PG&f=1", "display_name": "Surya", "link": "https://stackoverflow.com/users/645886/surya"}, "edited": false, "score": 1, "creation_date": 1487130895, "post_id": 42240219, "comment_id": 71639789, "body": "So from each band, a student must attend at least one or can attend all courses from <code>candidate_schedule</code>? Also, are these bands prerequisite of another? for example: to take f_band student must finish c_band and to take b_band student must finish d_band?"}, {"owner": {"reputation": 139, "user_id": 3716337, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/452dfd9aebd60ba9e012f2841641ef38?s=128&d=identicon&r=PG&f=1", "display_name": "zqe", "link": "https://stackoverflow.com/users/3716337/zqe"}, "reply_to_user": {"reputation": 14827, "user_id": 645886, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2abb0123e9484284a9cb2d36aa9854b3?s=128&d=identicon&r=PG&f=1", "display_name": "Surya", "link": "https://stackoverflow.com/users/645886/surya"}, "edited": false, "score": 0, "creation_date": 1487131622, "post_id": 42240219, "comment_id": 71639993, "body": "a band is an array listing all the courses that meet, for example, during the first class of the day.   Every student will need to have a class to attend in the first period, and each student requests the same number of courses as there are bands- therefore, the course_request array must map to the candidate_schedule such that a different one of each of the eight courses is available in each band of the day.  The course request array is for one student, the candidate_schedule is the courses available for the school. With an approach to this I would loop through all the students."}], "answers": [{"comments": [{"owner": {"reputation": 139, "user_id": 3716337, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/452dfd9aebd60ba9e012f2841641ef38?s=128&d=identicon&r=PG&f=1", "display_name": "zqe", "link": "https://stackoverflow.com/users/3716337/zqe"}, "edited": false, "score": 0, "creation_date": 1487158629, "post_id": 42243071, "comment_id": 71654716, "body": "Thank you! I was struggling to envision how to do the brute forcing accounting for creating those combinations, looks like I was overcomplicating things. This is perfect for my purposes, but I definitely want to go off and explore matching algorithms- thank you!"}], "tags": [], "owner": {"reputation": 4600, "user_id": 5961578, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/df7cbfdd2a92a7926af3bbb8648318aa?s=128&d=identicon&r=PG", "display_name": "moveson", "link": "https://stackoverflow.com/users/5961578/moveson"}, "is_accepted": true, "score": 1, "last_activity_date": 1487143659, "creation_date": 1487143659, "answer_id": 42243071, "question_id": 42240219, "link": "https://stackoverflow.com/questions/42240219/calculating-combinations-of-courses-for-scheduling-students/42243071#42243071", "title": "Calculating combinations of courses for scheduling students", "body": "<p>You can do this with a brute-force method.</p>\n\n<p>I'm not sure if your <code>candidate_schedule</code> variable is actually a hash, since the keys are not strings or symbols, but you really need just an array of arrays. If it's a hash, extract the values from the <code>candidate_schedule</code> hash:</p>\n\n<pre><code>&gt;&gt; schedule = candidate_schedule.values\n=&gt; [[:EEN41, :HGN22, :PPN41],\n [:SDN11T, :HUN11, :EEN41],\n [:TYN21T, :SLN11],\n [:PPN41, :TYN21T],\n [:ZLUNCH],\n [:EEN41, :SDN11T, :HUN11, :PPN41],\n [:AUN21T, :TYN21T, :PPN41],\n [:ZJPHN, :GAN42]]\n</code></pre>\n\n<p>Now, using Ruby's array methods, create a set of all possible permutations of the student's schedule, and select only those permutations for which all elements match one of the class schedule elements at the same index:</p>\n\n<pre><code>&gt;&gt; student_schedule_options = student_1_requests.permutation.select { |p| p.each_with_index.all? { |request, i| schedule[i].include?(request) } }\n=&gt; [[:EEN41, :SDN11T, :TYN21T, :PPN41, :ZLUNCH, :HUN11, :AUN21T, :ZJPHN],\n [:EEN41, :HUN11, :TYN21T, :PPN41, :ZLUNCH, :SDN11T, :AUN21T, :ZJPHN]]\n</code></pre>\n\n<p>If you are processing many schedules, you may want to explore more efficient matching algorithms, but this one is quick and dirty.</p>\n"}], "owner": {"reputation": 139, "user_id": 3716337, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/452dfd9aebd60ba9e012f2841641ef38?s=128&d=identicon&r=PG&f=1", "display_name": "zqe", "link": "https://stackoverflow.com/users/3716337/zqe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 350, "favorite_count": 0, "accepted_answer_id": 42243071, "answer_count": 1, "score": 1, "last_activity_date": 1487157159, "creation_date": 1487129581, "last_edit_date": 1487157159, "question_id": 42240219, "link": "https://stackoverflow.com/questions/42240219/calculating-combinations-of-courses-for-scheduling-students", "title": "Calculating combinations of courses for scheduling students", "body": "<p>I'm want to match high school students with classes. Students have a list of courses that they need to take:</p>\n\n<pre><code>student_1_requests = [:EEN41, :SDN11T, :HUN11, :PPN41, :AUN21T, :TYN21T, :ZJPHN, :ZLUNCH]\n</code></pre>\n\n<p>A candidate schedule is a hash whose value is an array of courses that are offered at the same time:</p>\n\n<pre><code>candidate_schedule = {\n  a_band =&gt; [:EEN41, :HGN22, :PPN41],\n  b_band =&gt; [:SDN11T, :HUN11, :EEN41],\n  c_band =&gt; [:TYN21T, :SLN11],\n  d_band =&gt; [:PPN41, :TYN21T],\n  l_band =&gt; [:ZLUNCH],\n  e_band =&gt; [:EEN41, :SDN11T, :HUN11, :PPN41],\n  f_band =&gt; [:AUN21T, :TYN21T, :PPN41],\n  g_band =&gt; [:ZJPHN, :GAN42]\n}\n</code></pre>\n\n<p>The student needs to have a class every period/band of the day. So, to be viable, a minimum of one of the courses in each band must appear in the student_requests, and for every band of the day the student must be able to be placed in a different one of their requests.</p>\n\n<p>I am testing students' requests against a candidate schedule to meet most students needs. I'm trying to answer:</p>\n\n<ol>\n<li><p>Will this <code>candidate_schedule</code> allow the student to be scheduled for all of their requests? Put another way, is there at least one combination of courses that would allow them to have all 8 of their courses, one different course in each band?</p></li>\n<li><p>In how many combinations/different ways can the student be placed into the candidate schedule while being scheduled for every course they requested, and what those combinations are, like this:</p>\n\n<pre><code>student_schedule_options = {\n  :option_1 =&gt; {a =&gt; :EEN41, b =&gt; :HUN11, c =&gt; :TYN21T, d =&gt; :PPN41, e =&gt; :SDN11T, f =&gt; :AUN21T, g =&gt; :ZJPHN},\n  :option_2 =&gt; ...\n}\n</code></pre></li>\n<li><p>It would be even more intriguing if it was possible to see cases where 7 out of 8 requests could be satisfied, and have it report the band and course/s that could not be matched, which would lend itself to making changes to the candidate schedule to improve it.</p></li>\n</ol>\n"}, {"tags": ["ruby", "capybara"], "comments": [{"owner": {"reputation": 42014, "user_id": 2709090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/238c2b7cde2c817fc9a5a2b8eaa2ffad?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas Walpole", "link": "https://stackoverflow.com/users/2709090/thomas-walpole"}, "edited": false, "score": 0, "creation_date": 1487131173, "post_id": 42240187, "comment_id": 71639863, "body": "Show the actual HTML instead of the template, and show the full backtrack for the error"}, {"owner": {"reputation": 11, "user_id": 7560806, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2b4deb433aa3b3638eaa16aca6d0298b?s=128&d=identicon&r=PG&f=1", "display_name": "A.B", "link": "https://stackoverflow.com/users/7560806/a-b"}, "reply_to_user": {"reputation": 42014, "user_id": 2709090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/238c2b7cde2c817fc9a5a2b8eaa2ffad?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas Walpole", "link": "https://stackoverflow.com/users/2709090/thomas-walpole"}, "edited": false, "score": 0, "creation_date": 1487132960, "post_id": 42240187, "comment_id": 71640369, "body": "@ThomasWalpole I edited my post, where you can find html and full backtrack for the error"}, {"owner": {"reputation": 42014, "user_id": 2709090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/238c2b7cde2c817fc9a5a2b8eaa2ffad?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas Walpole", "link": "https://stackoverflow.com/users/2709090/thomas-walpole"}, "edited": false, "score": 0, "creation_date": 1487133491, "post_id": 42240187, "comment_id": 71640497, "body": "Is there a form element that wraps the HTML shown, or is it JS only? Half of the inputs don&#39;t have <code>name</code> attributes so I&#39;m guessing its JS only?  The stacktrace shows that <code>update_resource</code> is being called, but no <code>id</code> parameter is being submitted - what does your <code>test.log</code> show?"}, {"owner": {"reputation": 11, "user_id": 7560806, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2b4deb433aa3b3638eaa16aca6d0298b?s=128&d=identicon&r=PG&f=1", "display_name": "A.B", "link": "https://stackoverflow.com/users/7560806/a-b"}, "reply_to_user": {"reputation": 42014, "user_id": 2709090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/238c2b7cde2c817fc9a5a2b8eaa2ffad?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas Walpole", "link": "https://stackoverflow.com/users/2709090/thomas-walpole"}, "edited": false, "score": 0, "creation_date": 1487134877, "post_id": 42240187, "comment_id": 71640839, "body": "It is JS. I am new in capybara testing, so I do not have any idea about test.log how to find it"}, {"owner": {"reputation": 42014, "user_id": 2709090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/238c2b7cde2c817fc9a5a2b8eaa2ffad?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas Walpole", "link": "https://stackoverflow.com/users/2709090/thomas-walpole"}, "edited": false, "score": 0, "creation_date": 1487135344, "post_id": 42240187, "comment_id": 71640980, "body": "It&#39;s not a capybara thing, it&#39;s a rails thing - it should be in the log directory in your apps root - Also add any before blocks that are creating the user, logging in to the app, and visiting the relevant page to the question"}, {"owner": {"reputation": 11, "user_id": 7560806, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2b4deb433aa3b3638eaa16aca6d0298b?s=128&d=identicon&r=PG&f=1", "display_name": "A.B", "link": "https://stackoverflow.com/users/7560806/a-b"}, "reply_to_user": {"reputation": 42014, "user_id": 2709090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/238c2b7cde2c817fc9a5a2b8eaa2ffad?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas Walpole", "link": "https://stackoverflow.com/users/2709090/thomas-walpole"}, "edited": false, "score": 0, "creation_date": 1487150387, "post_id": 42240187, "comment_id": 71648564, "body": "@ThomasWalpole could not find such file or directory named <code>log</code> and I added before blocks"}, {"owner": {"reputation": 42014, "user_id": 2709090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/238c2b7cde2c817fc9a5a2b8eaa2ffad?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas Walpole", "link": "https://stackoverflow.com/users/2709090/thomas-walpole"}, "edited": false, "score": 0, "creation_date": 1487179588, "post_id": 42240187, "comment_id": 71670093, "body": "I&#39;m completely lost now.  How you have managed to create a rails app (from your previous question on same general issue) that doesn&#39;t create logs in the <code>log</code> directory is beyond me.  Additionally, your use of <code>wait_for_ajax</code> is out of control,  you insist on using hardcoded paths rather than helpers, and I still don&#39;t see where you&#39;re actually creating the user you&#39;re editing (you&#39;ve mentioned factory_girl previously but maybe you&#39;re actually using fixtures?).  I don&#39;t know what tutorial you&#39;re following but you might want to find a newer one because none of what you&#39;re showing makes sense."}], "owner": {"reputation": 11, "user_id": 7560806, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2b4deb433aa3b3638eaa16aca6d0298b?s=128&d=identicon&r=PG&f=1", "display_name": "A.B", "link": "https://stackoverflow.com/users/7560806/a-b"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 39, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1487150293, "creation_date": 1487129401, "last_edit_date": 1487150293, "question_id": 42240187, "link": "https://stackoverflow.com/questions/42240187/capybara-testing-on-form-submission-returned-an-empty-data-to-the-server", "title": "Capybara testing: on form submission returned an empty data to the server", "body": "<p>I am writing test, where I should edit user data and click submit button. From screenshot of the page  it is clear that by function fill_in each field is filled properly. But when submit button clicked server gets an empty object and my testing results gives the following error:</p>\n\n<pre><code>Failure/Error: Unable to find matching line from backtrace\n     ActiveRecord::RecordNotFound:\n       Couldn't find User with 'id'=\n     # /var/lib/gems/2.3.0/gems/activerecord-4.2.5/lib/active_record/core.rb:155:in `find'\n     # ./app/controllers/user/registrations_controller.rb:9:in `update_resource'\n     # /var/lib/gems/2.3.0/gems/devise-4.2.0/app/controllers/devise/registrations_controller.rb:48:in `update'\n     # /var/lib/gems/2.3.0/gems/actionpack-4.2.5/lib/action_controller/metal/implicit_render.rb:4:in `send_action'\n     # /var/lib/gems/2.3.0/gems/actionpack-4.2.5/lib/abstract_controller/base.rb:198:in `process_action'\n     # /var/lib/gems/2.3.0/gems/actionpack-4.2.5/lib/action_controller/metal/rendering.rb:10:in `process_action'\n     # /var/lib/gems/2.3.0/gems/actionpack-4.2.5/lib/abstract_controller/callbacks.rb:20:in `block in process_action'\n     # /var/lib/gems/2.3.0/gems/activesupport-4.2.5/lib/active_support/callbacks.rb:117:in `call'\n     # /var/lib/gems/2.3.0/gems/activesupport-4.2.5/lib/active_support/callbacks.rb:555:in `block (2 levels) in compile'\n     # /var/lib/gems/2.3.0/gems/activesupport-4.2.5/lib/active_support/callbacks.rb:505:in `call'\n     # /var/lib/gems/2.3.0/gems/activesupport-4.2.5/lib/active_support/callbacks.rb:92:in `__run_callbacks__'\n     # /var/lib/gems/2.3.0/gems/activesupport-4.2.5/lib/active_support/callbacks.rb:778:in `_run_process_action_callbacks'\n     # /var/lib/gems/2.3.0/gems/activesupport-4.2.5/lib/active_support/callbacks.rb:81:in `run_callbacks'\n     # /var/lib/gems/2.3.0/gems/actionpack-4.2.5/lib/abstract_controller/callbacks.rb:19:in `process_action'\n     # /var/lib/gems/2.3.0/gems/actionpack-4.2.5/lib/action_controller/metal/rescue.rb:29:in `process_action'\n     # /var/lib/gems/2.3.0/gems/actionpack-4.2.5/lib/action_controller/metal/instrumentation.rb:32:in `block in process_action'\n     # /var/lib/gems/2.3.0/gems/activesupport-4.2.5/lib/active_support/notifications.rb:164:in `block in instrument'\n     # /var/lib/gems/2.3.0/gems/activesupport-4.2.5/lib/active_support/notifications/instrumenter.rb:20:in `instrument'\n     # /var/lib/gems/2.3.0/gems/activesupport-4.2.5/lib/active_support/notifications.rb:164:in `instrument'\n     # /var/lib/gems/2.3.0/gems/actionpack-4.2.5/lib/action_controller/metal/instrumentation.rb:30:in `process_action'\n     # /var/lib/gems/2.3.0/gems/actionpack-4.2.5/lib/action_controller/metal/params_wrapper.rb:250:in `process_action'\n     # /var/lib/gems/2.3.0/gems/activerecord-4.2.5/lib/active_record/railties/controller_runtime.rb:18:in `process_action'\n     # /var/lib/gems/2.3.0/gems/actionpack-4.2.5/lib/abstract_controller/base.rb:137:in `process'\n     # /var/lib/gems/2.3.0/gems/actionview-4.2.5/lib/action_view/rendering.rb:30:in `process'\n     # /var/lib/gems/2.3.0/gems/actionpack-4.2.5/lib/action_controller/metal.rb:196:in `dispatch'\n     # /var/lib/gems/2.3.0/gems/actionpack-4.2.5/lib/action_controller/metal/rack_delegation.rb:13:in `dispatch'\n     # /var/lib/gems/2.3.0/gems/actionpack-4.2.5/lib/action_controller/metal.rb:237:in `block in action'\n     # /var/lib/gems/2.3.0/gems/actionpack-4.2.5/lib/action_dispatch/routing/route_set.rb:76:in `dispatch'\n     # /var/lib/gems/2.3.0/gems/actionpack-4.2.5/lib/action_dispatch/routing/route_set.rb:45:in `serve'\n     # /var/lib/gems/2.3.0/gems/actionpack-4.2.5/lib/action_dispatch/routing/mapper.rb:49:in `serve'\n     # /var/lib/gems/2.3.0/gems/actionpack-4.2.5/lib/action_dispatch/journey/router.rb:43:in `block in serve'\n     # /var/lib/gems/2.3.0/gems/actionpack-4.2.5/lib/action_dispatch/journey/router.rb:30:in `each'\n     # /var/lib/gems/2.3.0/gems/actionpack-4.2.5/lib/action_dispatch/journey/router.rb:30:in `serve'\n     # /var/lib/gems/2.3.0/gems/actionpack-4.2.5/lib/action_dispatch/routing/route_set.rb:817:in `call'\n     # /var/lib/gems/2.3.0/gems/warden-1.2.7/lib/warden/manager.rb:36:in `block in call'\n     # /var/lib/gems/2.3.0/gems/warden-1.2.7/lib/warden/manager.rb:35:in `catch'\n     # /var/lib/gems/2.3.0/gems/warden-1.2.7/lib/warden/manager.rb:35:in `call'\n     # /var/lib/gems/2.3.0/gems/rack-1.6.5/lib/rack/etag.rb:24:in `call'\n     # /var/lib/gems/2.3.0/gems/rack-1.6.5/lib/rack/conditionalget.rb:38:in `call'\n     # /var/lib/gems/2.3.0/gems/rack-1.6.5/lib/rack/head.rb:13:in `call'\n     # /var/lib/gems/2.3.0/gems/actionpack-4.2.5/lib/action_dispatch/middleware/params_parser.rb:27:in `call'\n     # /var/lib/gems/2.3.0/gems/actionpack-4.2.5/lib/action_dispatch/middleware/flash.rb:260:in `call'\n     # /var/lib/gems/2.3.0/gems/rack-1.6.5/lib/rack/session/abstract/id.rb:225:in `context'\n     # /var/lib/gems/2.3.0/gems/rack-1.6.5/lib/rack/session/abstract/id.rb:220:in `call'\n     # /var/lib/gems/2.3.0/gems/actionpack-4.2.5/lib/action_dispatch/middleware/cookies.rb:560:in `call'\n     # /var/lib/gems/2.3.0/gems/activerecord-4.2.5/lib/active_record/query_cache.rb:36:in `call'\n     # /var/lib/gems/2.3.0/gems/activerecord-4.2.5/lib/active_record/connection_adapters/abstract/connection_pool.rb:653:in `call'\n     # /var/lib/gems/2.3.0/gems/actionpack-4.2.5/lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'\n     # /var/lib/gems/2.3.0/gems/activesupport-4.2.5/lib/active_support/callbacks.rb:88:in `__run_callbacks__'\n     # /var/lib/gems/2.3.0/gems/activesupport-4.2.5/lib/active_support/callbacks.rb:778:in `_run_call_callbacks'\n     # /var/lib/gems/2.3.0/gems/activesupport-4.2.5/lib/active_support/callbacks.rb:81:in `run_callbacks'\n     # /var/lib/gems/2.3.0/gems/actionpack-4.2.5/lib/action_dispatch/middleware/callbacks.rb:27:in `call'\n     # /var/lib/gems/2.3.0/gems/actionpack-4.2.5/lib/action_dispatch/middleware/remote_ip.rb:78:in `call'\n     # /var/lib/gems/2.3.0/gems/actionpack-4.2.5/lib/action_dispatch/middleware/debug_exceptions.rb:17:in `call'\n     # /var/lib/gems/2.3.0/gems/actionpack-4.2.5/lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'\n     # /var/lib/gems/2.3.0/gems/railties-4.2.5/lib/rails/rack/logger.rb:38:in `call_app'\n     # /var/lib/gems/2.3.0/gems/railties-4.2.5/lib/rails/rack/logger.rb:20:in `block in call'\n     # /var/lib/gems/2.3.0/gems/activesupport-4.2.5/lib/active_support/tagged_logging.rb:68:in `block in tagged'\n     # /var/lib/gems/2.3.0/gems/activesupport-4.2.5/lib/active_support/tagged_logging.rb:26:in `tagged'\n     # /var/lib/gems/2.3.0/gems/activesupport-4.2.5/lib/active_support/tagged_logging.rb:68:in `tagged'\n     # /var/lib/gems/2.3.0/gems/railties-4.2.5/lib/rails/rack/logger.rb:20:in `call'\n     # /var/lib/gems/2.3.0/gems/request_store-1.3.2/lib/request_store/middleware.rb:9:in `call'\n     # /var/lib/gems/2.3.0/gems/actionpack-4.2.5/lib/action_dispatch/middleware/request_id.rb:21:in `call'\n     # /var/lib/gems/2.3.0/gems/rack-1.6.5/lib/rack/methodoverride.rb:22:in `call'\n     # /var/lib/gems/2.3.0/gems/rack-1.6.5/lib/rack/runtime.rb:18:in `call'\n     # /var/lib/gems/2.3.0/gems/activesupport-4.2.5/lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'\n     # /var/lib/gems/2.3.0/gems/rack-1.6.5/lib/rack/lock.rb:17:in `call'\n     # /var/lib/gems/2.3.0/gems/actionpack-4.2.5/lib/action_dispatch/middleware/static.rb:116:in `call'\n     # /var/lib/gems/2.3.0/gems/rack-1.6.5/lib/rack/sendfile.rb:113:in `call'\n     # /var/lib/gems/2.3.0/gems/railties-4.2.5/lib/rails/engine.rb:518:in `call'\n     # /var/lib/gems/2.3.0/gems/railties-4.2.5/lib/rails/application.rb:165:in `call'\n     # /var/lib/gems/2.3.0/gems/rack-1.6.5/lib/rack/urlmap.rb:66:in `block in call'\n     # /var/lib/gems/2.3.0/gems/rack-1.6.5/lib/rack/urlmap.rb:50:in `each'\n     # /var/lib/gems/2.3.0/gems/rack-1.6.5/lib/rack/urlmap.rb:50:in `call'\n     # /var/lib/gems/2.3.0/gems/capybara-2.12.0/lib/capybara/server.rb:43:in `call'\n     # /var/lib/gems/2.3.0/gems/rack-1.6.5/lib/rack/handler/webrick.rb:88:in `service'\n</code></pre>\n\n<p>My test scenario is:</p>\n\n<pre><code>before  :each do\n      visit '/login'\n      wait_for_ajax\n      fill_in 'email', with: 'admin@hostel.com'\n      fill_in 'password', with: 'testtest'\n      click_button 'submit'\n      wait_for_ajax\n      wait_url '/dashboard'\n      visit '/users/1'\n      wait_for_ajax\n    end\n    scenario 'click on submit with edition' do\n                find('#name').set('EDIT')\n                fill_in 'email', with: 'testtest@hostel.com'\n                click_button '\u30d1\u30b9\u30ef\u30fc\u30c9\u3092\u5909\u66f4\u3059\u308b'\n                fill_in 'password', with: 'testtest'\n                fill_in 'password-confirmation', with: 'testtest'\n                click_button '\u4fdd\u5b58'\n                page.save_screenshot('po.png')\n                expect(page).to have_current_path('/users')\n    end\n</code></pre>\n\n<p>HTML=></p>\n\n<pre><code>&lt;div class=\"new_room_and_build\"&gt;\n      &lt;div name=\"form_user\" class=\"form-horizontal\"&gt;\n        &lt;div class=\"editing_user_form\"&gt;\n          &lt;!----&gt;\n          &lt;div class=\"form-group\"&gt;&lt;label for=\"name\" class=\"col-sm-2 control-label\"&gt;\u540d\u524d&lt;/label&gt;\n            &lt;div class=\"col-sm-3\"&gt;&lt;input id=\"name\" type=\"text\" class=\"form-control\"&gt;&lt;/div&gt;\n          &lt;/div&gt;\n          &lt;div class=\"form-group\"&gt;&lt;label for=\"email\" class=\"col-sm-2 control-label\"&gt;\u30e1\u30fc\u30eb&lt;/label&gt;\n            &lt;div class=\"col-sm-3\"&gt;&lt;input id=\"email\" type=\"text\" class=\"form-control\"&gt;&lt;/div&gt;\n          &lt;/div&gt;\n          &lt;!----&gt;\n          &lt;div class=\"col-sm-2\"&gt;&lt;/div&gt;\n          &lt;div class=\"col-sm-10\"&gt;&lt;button class=\"hvr-fade btn btn-link but_edit_pass\"&gt;\u30d1\u30b9\u30ef\u30fc\u30c9\u3092\u5909\u66f4\u3059\u308b&lt;/button&gt;&lt;/div&gt;\n          &lt;div class=\"edit-password\"&gt;\n            &lt;div class=\"form-group\"&gt;&lt;label for=\"password\" class=\"col-sm-2 control-label\"&gt;\u30d1\u30b9\u30ef\u30fc\u30c9&lt;/label&gt;\n              &lt;div class=\"col-sm-3\"&gt;&lt;input id=\"password\" name=\"password\" size=\"40\" type=\"password\" class=\"form-control\"&gt;&lt;/div&gt;\n            &lt;/div&gt;\n            &lt;div class=\"col-sm-2 control-label\"&gt;&lt;/div&gt;\n            &lt;div class=\"pass_hint col-sm-10\"&gt;\u30d1\u30b9\u30ef\u30fc\u30c9\u306e\u6587\u5b57\u6570\u306f6\u6587\u5b57\u4ee5\u4e0a\u306b\u3057\u3066\u304f\u3060\u3055\u3044&lt;/div&gt;\n            &lt;div class=\"form-group\"&gt;&lt;label for=\"password-confirmation\" class=\"col-sm-2 control-label\"&gt;\u30d1\u30b9\u30ef\u30fc\u30c9\u78ba\u8a8d&lt;/label&gt;\n              &lt;div class=\"col-sm-3\"&gt;&lt;input id=\"password-confirmation\" name=\"password-confirmation\" size=\"40\" type=\"password\" class=\"form-control\"&gt;&lt;/div&gt;\n            &lt;/div&gt;\n          &lt;/div&gt;\n        &lt;/div&gt;\n        &lt;div class=\"form-group float_right col-sm-4\"&gt;&lt;a href=\"/users\" class=\"router-link-active\"&gt;&lt;button id=\"cancel\" type=\"submit\" class=\"btn but_add hvr-fade float_right\"&gt;&lt;i aria-hidden=\"true\" class=\"fa fa-times\"&gt;&lt;/i&gt; \u30ad\u30e3\u30f3\u30bb\u30eb&lt;/button&gt;&lt;/a&gt;\n          &lt;button id=\"submit\" v=\"\" class=\"btn but_add hvr-fade float_right\"\n            disabled=\"\"&gt;&lt;i aria-hidden=\"true\" class=\"fa fa-check\"&gt;&lt;/i&gt; \u4fdd\u5b58&lt;/button&gt;\n        &lt;/div&gt;\n      &lt;/div&gt;\n    &lt;/div&gt;\n  &lt;/div&gt;\n</code></pre>\n\n<p>Server side method which should be called on submit click:</p>\n\n<pre><code>def update_resource(resource, params)\n      authorize! :update, User\n      puts params.inspect\n      resource = User.find(params[:id])\n      params[:role] = Role.find(params[:role])\n      if params.key? :password\n        params[:password_expiry] = Time.now.to_i + 86400\n        resource.update_attributes(params)\n        UserMailer.send_user_info(@current_user.name, resource.email, params[:password]).deliver_later\n      else\n        resource.update_without_password(params)\n      end\n    end\n</code></pre>\n\n<p>I would greatly appreciate any help or any advice</p>\n"}, {"tags": ["ruby", "ruby-on-rails-3", "rake-task"], "comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1487139094, "post_id": 42240007, "comment_id": 71642419, "body": "Do you mean you want to defer interpolation of <code>#{test}</code> until later? Sometimes it&#39;s easier to use a simple template system like <a href=\"https://github.com/cowboyd/handlebars.rb\" rel=\"nofollow noreferrer\">Handlebars</a> to represent that."}, {"owner": {"reputation": 370, "user_id": 4526617, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/3fc0643deb79dffedb7bf9dfdc9d9346?s=128&d=identicon&r=PG&f=1", "display_name": "Kavincat", "link": "https://stackoverflow.com/users/4526617/kavincat"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1487191131, "post_id": 42240007, "comment_id": 71676849, "body": "@tadman What I did is i used single quote to insert the data in the table. but i am struggling to do variable substitution later ?"}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1487191196, "post_id": 42240007, "comment_id": 71676892, "body": "Ah, now we have a question."}], "answers": [{"tags": [], "owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "is_accepted": true, "score": 1, "last_activity_date": 1487191510, "creation_date": 1487191510, "answer_id": 42259682, "question_id": 42240007, "link": "https://stackoverflow.com/questions/42240007/how-to-insert-data-in-the-table-without-substituting-the-variable/42259682#42259682", "title": "How to insert data in the table without substituting the variable?", "body": "<p>If you want to defer interpolation to a later time and still use the Ruby string interpolation notation, you can do this:</p>\n\n<pre><code>string = 'clean the item #{test} then pack and send to #{location}'\nvalues = {\n  test: \"paperclip\",\n  location: \"head office\"\n}\n\nstring.gsub(/\\#\\{([^}]+)\\}/) do\n  values[$1.to_sym]\nend\n\n# =&gt; \"clean the item paperclip then pack and send to head office\"\n</code></pre>\n\n<p>You can even wrap this up into a simple method:</p>\n\n<pre><code>def interpolate(string, values)\n  string.gsub(/\\#\\{([^}]+)\\}/) do\n    values[$1.to_sym]\n  end\nend\n</code></pre>\n\n<p>Which, if you wanted to be a bit bold, you could patch into String:</p>\n\n<pre><code>class String\n  def interpolate(values)\n    self.gsub(/\\#\\{([^}]+)\\}/) do\n      values[$1.to_sym]\n    end\n  end\nend\n</code></pre>\n\n<p>Note that this only does the most basic interpolation of things like <code>#{x}</code> and not <code>#{x.method_call}</code> or <code>#{x+1}</code> or even <code>#{x[y]}</code>. For that you may need to go with a more arbitrary code evaluation method, but that road is paved with danger.</p>\n"}], "owner": {"reputation": 370, "user_id": 4526617, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/3fc0643deb79dffedb7bf9dfdc9d9346?s=128&d=identicon&r=PG&f=1", "display_name": "Kavincat", "link": "https://stackoverflow.com/users/4526617/kavincat"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 60, "favorite_count": 0, "accepted_answer_id": 42259682, "answer_count": 1, "score": 1, "last_activity_date": 1487191510, "creation_date": 1487128114, "question_id": 42240007, "link": "https://stackoverflow.com/questions/42240007/how-to-insert-data-in-the-table-without-substituting-the-variable", "title": "How to insert data in the table without substituting the variable?", "body": "<p>I have a rake file that create a lot of items.</p>\n\n<pre><code>namespace :db do\n  namespace :seed do\n    desc \"items table\"\n      task :items=&gt; :environment do\n        Item.create(name: \"first_name\", process: \"clean the item #{test} then pack and send to #{location}\")\n        ................................................\n      end\n  end\nend\n</code></pre>\n\n<p>when i do <code>rake db:seed:items</code> I am not able to insert this data in the table without substituting the variable. Is there a way to insert this data without variable substitution so that i can substitute the variable later?</p>\n"}, {"tags": ["mysql", "ruby-on-rails", "ruby", "activerecord"], "comments": [{"owner": {"reputation": 6200, "user_id": 637094, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/fd50f61387b63900335c8556f86237be?s=128&d=identicon&r=PG", "display_name": "Leonel Gal&#225;n", "link": "https://stackoverflow.com/users/637094/leonel-gal%c3%a1n"}, "edited": false, "score": 1, "creation_date": 1487128075, "post_id": 42239969, "comment_id": 71639057, "body": "Simply <code>ArticleLike.where(:article_id: XXX)</code> shouldn&#39;t do the query you mention. Could you run <code>ArticleLike.where(:article_id: XXX).to_sql</code> and show us the result?"}, {"owner": {"reputation": 1, "user_id": 2636356, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/hhgsR.png?s=128&g=1", "display_name": "Magic", "link": "https://stackoverflow.com/users/2636356/magic"}, "reply_to_user": {"reputation": 6200, "user_id": 637094, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/fd50f61387b63900335c8556f86237be?s=128&d=identicon&r=PG", "display_name": "Leonel Gal&#225;n", "link": "https://stackoverflow.com/users/637094/leonel-gal%c3%a1n"}, "edited": false, "score": 0, "creation_date": 1487129042, "post_id": 42239969, "comment_id": 71639317, "body": "sorry. I found the query was sent because I new the model and save. If my Article table has lots of columns, is it possible to avoid to use SELECT * for foreign key check? I think it only need to use SELECT id FROM article to check the consistency. Thank you."}, {"owner": {"reputation": 6200, "user_id": 637094, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/fd50f61387b63900335c8556f86237be?s=128&d=identicon&r=PG", "display_name": "Leonel Gal&#225;n", "link": "https://stackoverflow.com/users/637094/leonel-gal%c3%a1n"}, "edited": false, "score": 0, "creation_date": 1487129295, "post_id": 42239969, "comment_id": 71639381, "body": "Do you have any validations that trigger this query? As it is in the question saving an ArticleLike shouldn&#39;t do the query. Please update your question to reflect the latest findings and question you have."}], "answers": [{"tags": [], "owner": {"reputation": 16, "user_id": 1395190, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/92475da1c9f71be583518ed35214ddcc?s=128&d=identicon&r=PG", "display_name": "Febry Ramadhan", "link": "https://stackoverflow.com/users/1395190/febry-ramadhan"}, "is_accepted": false, "score": -1, "last_activity_date": 1487132613, "creation_date": 1487132613, "answer_id": 42240730, "question_id": 42239969, "link": "https://stackoverflow.com/questions/42239969/belongs-to-on-activerecord-of-rails-creates-lots-of-queries/42240730#42240730", "title": "belongs_to on Activerecord of Rails creates lots of queries", "body": "<p>I think <a href=\"http://apidock.com/rails/ActiveRecord/Querying/find_by_sql\" rel=\"nofollow noreferrer\">find_by_sql</a> can solve what you're trying to get. </p>\n"}, {"tags": [], "owner": {"reputation": 26120, "user_id": 219883, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/c35b5b0f9e7cce48864f4f1545ead995?s=128&d=identicon&r=PG", "display_name": "Taryn East", "link": "https://stackoverflow.com/users/219883/taryn-east"}, "is_accepted": false, "score": 1, "last_activity_date": 1487132628, "creation_date": 1487132628, "answer_id": 42240732, "question_id": 42239969, "link": "https://stackoverflow.com/questions/42239969/belongs-to-on-activerecord-of-rails-creates-lots-of-queries/42240732#42240732", "title": "belongs_to on Activerecord of Rails creates lots of queries", "body": "<p>Yes, you can reduce the number of columns by using either <code>select</code> or <code>pluck</code> (depending on if you want multiple or only one column).</p>\n\n<p>eg:</p>\n\n<pre><code>ArticleLike.where(:article_id: XXX).pluck(:id)\n=&gt; ['123', '456']\nArticleLike.where(:article_id: XXX).pluck(:id).to_sql\n=&gt; \"SELECT id FROM article WHERE article_id = XXX\"\n\nArticleLike.where(:article_id: XXX).select(\"column_1, column_2\").to_sql\n=&gt; \"SELECT column_1, column_2 FROM article WHERE article_id = XXX\"\n</code></pre>\n\n<p>More detail on how to use Active Record query interface is here:\n<a href=\"http://guides.rubyonrails.org/active_record_querying.html\" rel=\"nofollow noreferrer\">http://guides.rubyonrails.org/active_record_querying.html</a></p>\n"}], "owner": {"reputation": 1, "user_id": 2636356, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/hhgsR.png?s=128&g=1", "display_name": "Magic", "link": "https://stackoverflow.com/users/2636356/magic"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 84, "favorite_count": 0, "answer_count": 2, "score": -1, "last_activity_date": 1487148561, "creation_date": 1487127885, "question_id": 42239969, "link": "https://stackoverflow.com/questions/42239969/belongs-to-on-activerecord-of-rails-creates-lots-of-queries", "title": "belongs_to on Activerecord of Rails creates lots of queries", "body": "<p>I have the Article model and ArticleLike model which records the user likes the article or not. </p>\n\n<p>The articleLike model belongs to Article and the definition is as the following</p>\n\n<pre><code>class ArticleLike &lt; ApplicationRecord\n  belongs_to :article\nend\n</code></pre>\n\n<p>If I use ArticleLike.where(:article_id: XXX), ActiveRecord will send a raw query like</p>\n\n<pre><code>SELECT * FROM article WHERE article_id = XXX\n</code></pre>\n\n<p>Is that possible to avoid ActiveRecord to send this raw query to my DB?\nSometimes, I only need to select some fields that don't need any join, but Activerecord always join(includes) the tables if I set belongs_to in the model.</p>\n\n<p>Many thanks.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "alert"], "comments": [{"owner": {"reputation": 6200, "user_id": 637094, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/fd50f61387b63900335c8556f86237be?s=128&d=identicon&r=PG", "display_name": "Leonel Gal&#225;n", "link": "https://stackoverflow.com/users/637094/leonel-gal%c3%a1n"}, "edited": false, "score": 0, "creation_date": 1487127910, "post_id": 42239878, "comment_id": 71639005, "body": "Tell us more, when what is satisfied you want the alert box to show? How are you getting to this controller action?"}], "answers": [{"comments": [{"owner": {"reputation": 159, "user_id": 7259824, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c0391d9fc39320ccfa8b4f9f29bf29f3?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew", "link": "https://stackoverflow.com/users/7259824/andrew"}, "edited": false, "score": 0, "creation_date": 1487127921, "post_id": 42239945, "comment_id": 71639011, "body": "Essentially a button is clicked (which links to a certain page) and I have a rule in the controller for this that if a certain amount of time has elapsed then this page cannot be accessed. If the time has elapsed I want something to tell the user why this page cannot be accessed (like the JavaScript alert) then redirect them to another page."}, {"owner": {"reputation": 6200, "user_id": 637094, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/fd50f61387b63900335c8556f86237be?s=128&d=identicon&r=PG", "display_name": "Leonel Gal&#225;n", "link": "https://stackoverflow.com/users/637094/leonel-gal%c3%a1n"}, "reply_to_user": {"reputation": 159, "user_id": 7259824, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c0391d9fc39320ccfa8b4f9f29bf29f3?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew", "link": "https://stackoverflow.com/users/7259824/andrew"}, "edited": false, "score": 0, "creation_date": 1487128495, "post_id": 42239945, "comment_id": 71639168, "body": "Like I said, that&#39;s outside of what Rails does. The controller simply gets a request and responds, it cannot do an alert and then respond. But you can redirect them the other page and tell them there, the reason they were redirected."}, {"owner": {"reputation": 159, "user_id": 7259824, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c0391d9fc39320ccfa8b4f9f29bf29f3?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew", "link": "https://stackoverflow.com/users/7259824/andrew"}, "edited": false, "score": 0, "creation_date": 1487128544, "post_id": 42239945, "comment_id": 71639182, "body": "Thanks, how do I do as you suggest?"}, {"owner": {"reputation": 6200, "user_id": 637094, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/fd50f61387b63900335c8556f86237be?s=128&d=identicon&r=PG", "display_name": "Leonel Gal&#225;n", "link": "https://stackoverflow.com/users/637094/leonel-gal%c3%a1n"}, "reply_to_user": {"reputation": 159, "user_id": 7259824, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c0391d9fc39320ccfa8b4f9f29bf29f3?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew", "link": "https://stackoverflow.com/users/7259824/andrew"}, "edited": false, "score": 0, "creation_date": 1487128913, "post_id": 42239945, "comment_id": 71639282, "body": "I&#39;ve updated my answer to include further details on how to take it from what you have to what I descried. I hope it helps."}], "tags": [], "owner": {"reputation": 6200, "user_id": 637094, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/fd50f61387b63900335c8556f86237be?s=128&d=identicon&r=PG", "display_name": "Leonel Gal&#225;n", "link": "https://stackoverflow.com/users/637094/leonel-gal%c3%a1n"}, "is_accepted": false, "score": 0, "last_activity_date": 1487128894, "last_edit_date": 1487128894, "creation_date": 1487127744, "answer_id": 42239945, "question_id": 42239878, "link": "https://stackoverflow.com/questions/42239878/in-ruby-2-2-on-rails-how-do-i-have-a-confirmation-box-pop-up-then-redirect-to/42239945#42239945", "title": "In Ruby (2.2) on Rails How Do I Have A Confirmation Box Pop Up Then Redirect To Another Page", "body": "<p>Rails is limited to the respond to HTTP request with HTML. And what you describe sounds more like a JavaScript <code>alert</code>. What you tried, if configured properly*, will simply show the flash alert when the check_in_path page is rendered.</p>\n\n<p>* Get familiar with how the flash works, <a href=\"http://guides.rubyonrails.org/action_controller_overview.html#the-flash\" rel=\"nofollow noreferrer\">Rails Guides</a></p>\n\n<p>You have your controller set up correctly. The only other part I meant by configured correctly is that in your views you should display said flash message:</p>\n\n<pre><code>&lt;% flash.each do |name, msg| -%&gt;\n  &lt;%= content_tag :div, msg, class: name %&gt;\n&lt;% end -%&gt;\n</code></pre>\n\n<p>It's common to use the name of the flash to style it to make to make it's intent clear; commonly red for failure, green for success.</p>\n"}, {"tags": [], "owner": {"reputation": 1820, "user_id": 5830835, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/29a99125813cee34a6ecfe0d0e432eb1?s=128&d=identicon&r=PG&f=1", "display_name": "Timmy Von Heiss ", "link": "https://stackoverflow.com/users/5830835/timmy-von-heiss"}, "is_accepted": true, "score": 0, "last_activity_date": 1487129309, "creation_date": 1487129309, "answer_id": 42240173, "question_id": 42239878, "link": "https://stackoverflow.com/questions/42239878/in-ruby-2-2-on-rails-how-do-i-have-a-confirmation-box-pop-up-then-redirect-to/42240173#42240173", "title": "In Ruby (2.2) on Rails How Do I Have A Confirmation Box Pop Up Then Redirect To Another Page", "body": "<p>You need to create a js.erb file. You can then use your existing rails code along with a js alert box. Js.erb files let you combine rails and JavaScript code in the same file. As mentioned flash[:alert] is not an alert box, alert is a css class. </p>\n"}, {"tags": [], "owner": {"reputation": 618, "user_id": 4217243, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/6a4yK.jpg?s=128&g=1", "display_name": "jithya", "link": "https://stackoverflow.com/users/4217243/jithya"}, "is_accepted": false, "score": 1, "last_activity_date": 1487138136, "creation_date": 1487138136, "answer_id": 42241693, "question_id": 42239878, "link": "https://stackoverflow.com/questions/42239878/in-ruby-2-2-on-rails-how-do-i-have-a-confirmation-box-pop-up-then-redirect-to/42241693#42241693", "title": "In Ruby (2.2) on Rails How Do I Have A Confirmation Box Pop Up Then Redirect To Another Page", "body": "<p>you can do it as follows</p>\n\n<pre><code>  render :update do |page|\n    page &lt;&lt; \"alert('Successfully checked in')\"\n    page.redirect_to check_in_path\n  end\n</code></pre>\n\n<p>but partial rendering in controller is most commonly used together with Ajax calls. so you may have to make an ajax call to your action from your view page. Hope this will help you</p>\n"}], "owner": {"reputation": 159, "user_id": 7259824, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c0391d9fc39320ccfa8b4f9f29bf29f3?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew", "link": "https://stackoverflow.com/users/7259824/andrew"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 111, "favorite_count": 0, "accepted_answer_id": 42240173, "answer_count": 3, "score": 0, "last_activity_date": 1487138136, "creation_date": 1487127298, "question_id": 42239878, "link": "https://stackoverflow.com/questions/42239878/in-ruby-2-2-on-rails-how-do-i-have-a-confirmation-box-pop-up-then-redirect-to", "title": "In Ruby (2.2) on Rails How Do I Have A Confirmation Box Pop Up Then Redirect To Another Page", "body": "<p>In my controller I have an if condition and I want an alert/confirmation box to pop up if it is satisfied, then when the user clicks \"ok\" to redirect to another page. </p>\n\n<p>I've tried </p>\n\n<pre><code>flash[:alert] = 'Successfully checked in'\nredirect_to check_in_path\n</code></pre>\n\n<p>However it just skips the alert part and goes straight to the redirect without an alert message.</p>\n\n<p>My Ruby version is ruby 2.2.6p396 and rails is 5.0.1</p>\n\n<p>Any help would be appreciated</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 1, "creation_date": 1487126889, "post_id": 42239816, "comment_id": 71638745, "body": "Indentation is important to understanding, especially at a glance. Do try and keep your code in questions as organized as possible to avoid ambiguity or confusion."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1487127077, "post_id": 42239816, "comment_id": 71638789, "body": "If you&#39;re having performance problems it might be best to <code>Dir.glob(&quot;**&#47;*&quot;)</code> once to fetch everything, then use <code>grep</code> to find files in that list."}, {"owner": {"reputation": 51, "user_id": 7048290, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/00289d14236128100c1464c3f4918425?s=128&d=identicon&r=PG&f=1", "display_name": "simplytrue", "link": "https://stackoverflow.com/users/7048290/simplytrue"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1487171076, "post_id": 42239816, "comment_id": 71663443, "body": "I will be more careful in the future.  Thanks."}], "answers": [{"comments": [{"owner": {"reputation": 51, "user_id": 7048290, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/00289d14236128100c1464c3f4918425?s=128&d=identicon&r=PG&f=1", "display_name": "simplytrue", "link": "https://stackoverflow.com/users/7048290/simplytrue"}, "edited": false, "score": 0, "creation_date": 1487171027, "post_id": 42252226, "comment_id": 71663397, "body": "thank you for the answer.  adding file_name.strip worked. Now onto the rest of the utility."}], "tags": [], "owner": {"reputation": 321, "user_id": 1752126, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/988a4b6566623ee33c9f1b271a13aa26?s=128&d=identicon&r=PG", "display_name": "vaek", "link": "https://stackoverflow.com/users/1752126/vaek"}, "is_accepted": true, "score": 1, "last_activity_date": 1487169218, "creation_date": 1487169218, "answer_id": 42252226, "question_id": 42239816, "link": "https://stackoverflow.com/questions/42239816/why-is-dir-glob-only-evaluate-the-last-file-in-loop/42252226#42252226", "title": "Why is Dir.glob only evaluate the last file in loop", "body": "<p>Aside the file name you are looking for, each line of the file you read also contains a newline, assumingly <code>\\n</code>. This gets included in the string you get from <code>each_line</code>.</p>\n\n<p>So the answer is:</p>\n\n<p>1) Use <code>file_name.strip</code> as search term so any extra whitespace that is not actually part of the desired file name gets trimmed out. Otherwise <code>Dir.glob</code> will fail as it will search for a file / pattern with newline character in the end.</p>\n\n<p>2) The last file in your test case is found, because you don't have a newline in the end of the file. If you add one (ie. the last line of the file is empty), the script will not find even the last actual file in the list.</p>\n"}], "owner": {"reputation": 51, "user_id": 7048290, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/00289d14236128100c1464c3f4918425?s=128&d=identicon&r=PG&f=1", "display_name": "simplytrue", "link": "https://stackoverflow.com/users/7048290/simplytrue"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 88, "favorite_count": 0, "accepted_answer_id": 42252226, "answer_count": 1, "score": 0, "last_activity_date": 1487169218, "creation_date": 1487126816, "last_edit_date": 1487129497, "question_id": 42239816, "link": "https://stackoverflow.com/questions/42239816/why-is-dir-glob-only-evaluate-the-last-file-in-loop", "title": "Why is Dir.glob only evaluate the last file in loop", "body": "<p>I am trying to write a file search utility in ruby that takes a list of file names found in a txt file and searches my whole computer for these files.  If one of these files is found then the file will be moved to a different directory (effectively deleting it from the directory it was found).  </p>\n\n<p>The search has to go through all the folders top down. Thus far I have the following code:</p>\n\n<pre class=\"lang-ruby prettyprint-override\"><code>File.open(\"sample-file-list.txt\") do |name|  # open file with \n    name.each_line do |file_name|\n        puts \"here is the file I want to look for: #{file_name}\"\n\n        folder = \"/Users/bob/code/find-file\"\n        Dir.glob(\"#{folder}/**/#{file_name}\") do |file|\n            puts \"now I am working on #{file}\"\n        end\n    end\nend\n</code></pre>\n\n<p>The sample-file-list.txt file has these entries:</p>\n\n<pre>\n0001.txt\n0002.txt\n</pre>\n\n<p>Inside the folder above I have the file named \"0001.txt\". I also have a subfolder in the folder called subdir which contains the file named \"0002.txt\".</p>\n\n<p>When I run the ruby file in terminal the results I get are:</p>\n\n<pre>\nhere is the file I want to look for: 0001.txt\nhere is the file I want to look for: 0002.txt\nnow I am working on /Users/bob/code/find-file/subdir/0002.txt\n</pre>\n\n<p>My code only finds puts the last file in the 0002.txt.  But its seems to skip the 0001.txt file for some reason.   </p>\n\n<p>As a side note I rather not use <code>Dir.glob</code> as it will be a lot of files but <code>Dir.each</code> does not go through subdirectories at least I cannot seem to get it to - but that is another issue.</p>\n\n<p>Any help will be appreciated. </p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 1136, "user_id": 5215927, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/w06Fv.jpg?s=128&g=1", "display_name": "mr_sudaca", "link": "https://stackoverflow.com/users/5215927/mr-sudaca"}, "edited": false, "score": 0, "creation_date": 1487126625, "post_id": 42239789, "comment_id": 71638682, "body": "you can try with <code>y the_object</code>"}], "answers": [{"comments": [{"owner": {"reputation": 3602, "user_id": 5135452, "user_type": "registered", "accept_rate": 70, "profile_image": "https://lh6.googleusercontent.com/-wsi48VO8G5Q/AAAAAAAAAAI/AAAAAAAAAMw/p-ArCNs4cOs/photo.jpg?sz=128", "display_name": "PJCHENder", "link": "https://stackoverflow.com/users/5135452/pjchender"}, "edited": false, "score": 0, "creation_date": 1487128058, "post_id": 42239817, "comment_id": 71639054, "body": "Thanks for your replying, I am new hand of Ruby. I only know to require, but forget to add the quotation mark on &#39;yaml&#39;"}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "reply_to_user": {"reputation": 3602, "user_id": 5135452, "user_type": "registered", "accept_rate": 70, "profile_image": "https://lh6.googleusercontent.com/-wsi48VO8G5Q/AAAAAAAAAAI/AAAAAAAAAMw/p-ArCNs4cOs/photo.jpg?sz=128", "display_name": "PJCHENder", "link": "https://stackoverflow.com/users/5135452/pjchender"}, "edited": false, "score": 0, "creation_date": 1487131239, "post_id": 42239817, "comment_id": 71639882, "body": "The syntax is pretty forgiving, but it&#39;s still important. Hope that worked. If so, accept it as a solution when you can. Good luck!"}], "tags": [], "owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "is_accepted": true, "score": 4, "last_activity_date": 1487126818, "creation_date": 1487126818, "answer_id": 42239817, "question_id": 42239789, "link": "https://stackoverflow.com/questions/42239789/why-i-get-nomethoderror-by-using-to-yaml-in-ruby/42239817#42239817", "title": "Why I get NoMethodError by using to_yaml in Ruby", "body": "<p>That method won't be defined until you load in the YAML library with:</p>\n\n<pre><code>require 'yaml'\n</code></pre>\n"}], "owner": {"reputation": 3602, "user_id": 5135452, "user_type": "registered", "accept_rate": 70, "profile_image": "https://lh6.googleusercontent.com/-wsi48VO8G5Q/AAAAAAAAAAI/AAAAAAAAAMw/p-ArCNs4cOs/photo.jpg?sz=128", "display_name": "PJCHENder", "link": "https://stackoverflow.com/users/5135452/pjchender"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 243, "favorite_count": 0, "accepted_answer_id": 42239817, "answer_count": 1, "score": 0, "last_activity_date": 1487127025, "creation_date": 1487126538, "last_edit_date": 1495542712, "question_id": 42239789, "link": "https://stackoverflow.com/questions/42239789/why-i-get-nomethoderror-by-using-to-yaml-in-ruby", "title": "Why I get NoMethodError by using to_yaml in Ruby", "body": "<p>I have seen the question about \"<a href=\"https://stackoverflow.com/questions/4829909/how-do-i-print-out-the-contents-of-an-object-in-rails-for-easy-debugging?answertab=active#tab-top\">How do I print out the contents of an object in Rails for easy debugging?</a>\", and the answer showed that I can use to_yaml to print out the contents of Object.\nHowever, why I run the same code created by @jerhinesmith but get an NoMethodError? </p>\n\n<pre><code>class User\n  attr_accessor :name, :age\nend\n\nuser = User.new\nuser.name = \"John Smith\"\nuser.age = 30\n\nputs user.inspect\n#=&gt; #&lt;User:0x423270c @name=\"John Smith\", @age=30&gt;\nputs user.to_yaml\n#=&gt; --- !ruby/object:User\n#=&gt; age: 30\n#=&gt; name: John Smith\n</code></pre>\n\n<blockquote>\n   main.rb:11:in <code>&lt;main&gt;': undefined method</code>to_yaml' for #\n  \n  <p>@name=\"John Smith\", @age=30> (NoMethodError) exited with non-zero\n  status</p>\n</blockquote>\n"}, {"tags": ["ruby-on-rails", "ruby", "data-structures", "rspec", "linked-list"], "answers": [{"comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 1, "creation_date": 1487126468, "post_id": 42239639, "comment_id": 71638661, "body": "Class-level instance variables are prefixed with <code>@@</code>, but using those can be problematic. It&#39;s better to use class instance variables, those defined in the class scope, if that&#39;s necessary."}, {"owner": {"reputation": 1228, "user_id": 4497621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d140bf5c97a7ee616b0f21189fa9373?s=128&d=identicon&r=PG&f=1", "display_name": "John Hayes-Reed", "link": "https://stackoverflow.com/users/4497621/john-hayes-reed"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1487127134, "post_id": 42239639, "comment_id": 71638808, "body": "indeed, hence I recommend the use of instance variables, but Class-level instance variables and class variables are different, Class variables are set with @@, Class-level instance variables are set with a single @, but defined through the meta-class with something like <code>class &lt;&lt; self; attr_accessor :current; end</code>, which split the variable for inherited classes, but instances of the same class will still be problematic. And instance variables with the stadard @. I know I am being a bit picky but, just wanted to make the point that Class, Class-leve instancel, and instance vars are different."}, {"owner": {"reputation": 1228, "user_id": 4497621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d140bf5c97a7ee616b0f21189fa9373?s=128&d=identicon&r=PG&f=1", "display_name": "John Hayes-Reed", "link": "https://stackoverflow.com/users/4497621/john-hayes-reed"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 1, "creation_date": 1487127154, "post_id": 42239639, "comment_id": 71638817, "body": "Explained quite well here: <a href=\"http://www.railstips.org/blog/archives/2006/11/18/class-and-instance-variables-in-ruby/\" rel=\"nofollow noreferrer\">railstips.org/blog/archives/2006/11/18/&hellip;</a>"}], "tags": [], "owner": {"reputation": 1228, "user_id": 4497621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d140bf5c97a7ee616b0f21189fa9373?s=128&d=identicon&r=PG&f=1", "display_name": "John Hayes-Reed", "link": "https://stackoverflow.com/users/4497621/john-hayes-reed"}, "is_accepted": false, "score": 2, "last_activity_date": 1487125882, "last_edit_date": 1487125882, "creation_date": 1487125385, "answer_id": 42239639, "question_id": 42239343, "link": "https://stackoverflow.com/questions/42239343/trying-to-remove-a-node-from-a-linked-list-not-understanding-the-error-message/42239639#42239639", "title": "Trying to remove a node from a linked list &amp; not understanding the error message", "body": "<p>you are defining current and bob in the class scope, however in ruby class scope variables are set with a double @@. But this will cause problems when using multiple linked lists so you don`t want to be using class variables in this case. So the best way forward would be to set an @current and @bob instance variable for your LinkedList instance. I would suggest to do the following:</p>\n\n<p>change current and bob to this:</p>\n\n<pre><code>attr_accessor :current\nattr_accessor :bob\n</code></pre>\n\n<p>what <code>attr_accessor</code> does, is creates the @current instance variable, and also defines two methods for you, a getter <code>current</code> and a setter <code>current=</code>.</p>\n\n<p>the next step to set them to nil and an array, is to use the initialize method, add this to your <code>LinkedList</code> class:</p>\n\n<pre><code>def initialize(*args)\n  @current = nil\n  @bob = []\nend\n</code></pre>\n\n<p>although once the <code>@current</code> instance is created, it will already be set to <code>nil</code>, so the first line in the initialize is actually redundant, I just added it for display purposes to make it easier to see what is happening compared with your current code.</p>\n"}], "owner": {"reputation": 111, "user_id": 6246328, "user_type": "registered", "accept_rate": 24, "profile_image": "https://www.gravatar.com/avatar/e05f278aae0408d3bfd1cdd4203576d4?s=128&d=identicon&r=PG&f=1", "display_name": "SinGar", "link": "https://stackoverflow.com/users/6246328/singar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 314, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1487126370, "creation_date": 1487122963, "last_edit_date": 1487126370, "question_id": 42239343, "link": "https://stackoverflow.com/questions/42239343/trying-to-remove-a-node-from-a-linked-list-not-understanding-the-error-message", "title": "Trying to remove a node from a linked list &amp; not understanding the error message", "body": "<p>I am trying to build a program that will build and manipulate a doubly linked list in Ruby.</p>\n\n<p>So far I have been able to satisfy the test that tell me i've built the list but am struggling to get my <code>delete</code> method working.</p>\n\n<p>right now my Rspec test keeps telling me:</p>\n\n<pre><code>Failure/Error: llist.delete(n3)\n          NameError:\n       undefined local variable or method `current' for #&lt;LinkedList:0x007f85a49ae9b8&gt;\n       Did you mean?  current\n</code></pre>\n\n<p>even though I'm pretty sure i am defining the method</p>\n\n<p>this is my <code>linkedlist.rb</code> file</p>\n\n<pre><code>require_relative 'node'\n\nclass LinkedList\n  attr_accessor :head\n  attr_accessor :tail\n  bob = []\n  current = nil \n  # This method creates a new `Node` using `data`, and inserts it at the end of the list.\n   def add_to_tail(node)\n    if(@next)\n       @tail.next = node\n    else\n      @tail= node\n    end\n  end\n# This method removes `node` from the list and must keep the rest of the list intact.\n  def delete(node)\n    current.next =@head\n    if current.node = node\n      @head =current.next\n    else\n      while (current.next != nil)&amp;&amp;(current.next.node != val)\n        current = current.next\n      end\n      unless current.next == nil\n        current.next =current.next.next\n      end\n    end\n\n  end\n</code></pre>\n\n<p>this is the companion file that sets the <code>Node</code> class </p>\n\n<pre><code>class Node\n  attr_accessor :next\n  attr_accessor :data\n\n  def initialize(data)\n    @data = data\n    #@next = nil\n  end\nend\n</code></pre>\n\n<p>and these are the Rspec tests I am trying to pass</p>\n\n<pre><code>include RSpec\n\nrequire_relative 'node'\nrequire_relative 'linked_list'\n\nRSpec.describe LinkedList, type: Class do\n  let(:n1) { Node.new(\"Rob\") }\n  let(:n2) { Node.new(\"Ben\") }\n  let(:n3) { Node.new(\"Mike\") }\n  let(:llist) { LinkedList.new }\n\n  describe \"#add_to_tail\" do\n    it \"adds a Node to the tail\" do\n      llist.add_to_tail(n1)\n      expect(llist.tail).to eq n1\n      llist.add_to_tail(n2)\n      expect(llist.tail).to eq n2\n    end\n  end\n  describe \"#delete\" do\n    before do\n      llist.add_to_tail(n1)\n      llist.add_to_tail(n2)\n      llist.add_to_tail(n3)\n\nit \"removes the correct node of a list properly\" do\n      llist.delete(n1)\n      expect(llist.head).to eq n2\n      llist.delete(n3)\n      expect(llist.tail).to eq n2\n    end\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "automation", "e-commerce"], "answers": [{"tags": [], "owner": {"reputation": 182, "user_id": 1920508, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/43740b9270a206c2d0a9061b4c906be3?s=128&d=identicon&r=PG", "display_name": "Traveler", "link": "https://stackoverflow.com/users/1920508/traveler"}, "is_accepted": false, "score": 0, "last_activity_date": 1487135120, "creation_date": 1487135120, "answer_id": 42241109, "question_id": 42239062, "link": "https://stackoverflow.com/questions/42239062/how-to-automatically-check-resource-creation-in-rails/42241109#42241109", "title": "How to Automatically Check Resource Creation in Rails?", "body": "<p>you have <code>after_create</code> callback <a href=\"http://api.rubyonrails.org/classes/ActiveRecord/Callbacks.html\" rel=\"nofollow noreferrer\">ActiveRecord</a> where you can increase the price. How to reduce price is more complex question, you need a job to run periodically and check for all Purchases.</p>\n\n<p>How to get all related resources Shannon described quite well.</p>\n"}], "owner": {"reputation": 23, "user_id": 6427869, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b6f647dca78a29616e1455c4fa8fc4d6?s=128&d=identicon&r=PG&f=1", "display_name": "Kevin M", "link": "https://stackoverflow.com/users/6427869/kevin-m"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 43, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1487135120, "creation_date": 1487120729, "question_id": 42239062, "link": "https://stackoverflow.com/questions/42239062/how-to-automatically-check-resource-creation-in-rails", "title": "How to Automatically Check Resource Creation in Rails?", "body": "<p>So I'm building an ecommerce project in Rails that uses dynamic pricing for the items - purchasing something increases the price, and when an item isn't purchased for a certain amount of time the price drops.</p>\n\n<p>I could do this manually at an arbitrary but consistent time, but I would really like to run at least the checking automatically. So far the only automation libraries/tools I've found for Rails have been test related, and because this relates directly to resources in Rails, I wasn't sure it made sense to search for a way to do this in Python.</p>\n\n<p>In my project, the resource is called a <code>Purchase</code> and has relationships to the <code>User</code> and <code>Item</code> objects. What I envision is being able to search through all <code>Purchase</code> objects created in the last 24 hours. Doing it the other way round (going through all <code>Items</code> and their associated transactions) seems like a runtime nightmare, so I assume that's not even an option.</p>\n\n<p>I'd be happy to post any code that would help. Thanks!</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "edit"], "answers": [{"comments": [{"owner": {"reputation": 159, "user_id": 7259824, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c0391d9fc39320ccfa8b4f9f29bf29f3?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew", "link": "https://stackoverflow.com/users/7259824/andrew"}, "edited": false, "score": 0, "creation_date": 1487199710, "post_id": 42244713, "comment_id": 71681104, "body": "Thanks, this is perfect :)"}, {"owner": {"reputation": 159, "user_id": 7259824, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c0391d9fc39320ccfa8b4f9f29bf29f3?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew", "link": "https://stackoverflow.com/users/7259824/andrew"}, "edited": false, "score": 0, "creation_date": 1487200080, "post_id": 42244713, "comment_id": 71681224, "body": "Actually I just tested this more deeply, I have a note which is 1 day old and if I change 3.days to 3.hours it will still let me edit. Do you know why this might not be working for me?"}, {"owner": {"reputation": 151, "user_id": 6827172, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PnSFO.png?s=128&g=1", "display_name": "Dmitriy Gusev", "link": "https://stackoverflow.com/users/6827172/dmitriy-gusev"}, "reply_to_user": {"reputation": 159, "user_id": 7259824, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c0391d9fc39320ccfa8b4f9f29bf29f3?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew", "link": "https://stackoverflow.com/users/7259824/andrew"}, "edited": false, "score": 0, "creation_date": 1487224317, "post_id": 42244713, "comment_id": 71688571, "body": "Andrew I can suggest you to wrap (@note.created_at + 3.days) in brakets and check, but any way best practice is use <code>byebug</code> and look how will change value"}], "tags": [], "owner": {"reputation": 151, "user_id": 6827172, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PnSFO.png?s=128&g=1", "display_name": "Dmitriy Gusev", "link": "https://stackoverflow.com/users/6827172/dmitriy-gusev"}, "is_accepted": true, "score": 1, "last_activity_date": 1491844050, "last_edit_date": 1491844050, "creation_date": 1487149066, "answer_id": 42244713, "question_id": 42238933, "link": "https://stackoverflow.com/questions/42238933/how-to-have-a-blog-where-users-can-only-edit-posts-for-a-limited-time-in-ruby-on/42244713#42244713", "title": "How To Have A Blog Where Users Can Only Edit Posts For A Limited Time in Ruby on Rails", "body": "<p>Perfect solution for that is <code>:before_filter</code></p>\n\n<pre><code>class NotesController &lt; ApplicationController\n    before_filter :check_time!, only: [:edit, :update]\n\n    def edit\n    end\n\n    def create\n    end\n\n    private\n\n    def check_time!\n      if Time.now() &gt; @note.created_at + 3.days\n        flash[:danger] = 'Out of 3 days'\n        redirect_to note_path(@note)\n      end\n    end\nend\n</code></pre>\n"}], "owner": {"reputation": 159, "user_id": 7259824, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c0391d9fc39320ccfa8b4f9f29bf29f3?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew", "link": "https://stackoverflow.com/users/7259824/andrew"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 50, "favorite_count": 0, "accepted_answer_id": 42244713, "answer_count": 1, "score": 1, "last_activity_date": 1491844050, "creation_date": 1487119867, "question_id": 42238933, "link": "https://stackoverflow.com/questions/42238933/how-to-have-a-blog-where-users-can-only-edit-posts-for-a-limited-time-in-ruby-on", "title": "How To Have A Blog Where Users Can Only Edit Posts For A Limited Time in Ruby on Rails", "body": "<p>I've made a very simple blog where users can Create, Edit and Delete posts however I want to add functionality where users can only Edit for a limited time (say 3 days). My understanding of Ruby is not strong enough to know how to do this so any help is appreciated.</p>\n\n<p>This is my Notes (my name for Posts) controller</p>\n\n<pre><code>class NotesController &lt; ApplicationController\nbefore_action :find_note, only: [:show, :edit, :update, :destroy]\n\n\ndef index\n    @notes = Note.where(user_id: current_user)\nend\n\ndef show\nend\n\ndef new\n    @note = current_user.notes.build\nend\n\ndef create\n    @note = current_user.notes.build(note_params)\n\n    if @note.save\n        redirect_to @note\n    else\n        render 'new'\n    end\nend\n\ndef edit\n\nend\n\ndef update\n    if @note.update(note_params)\n        redirect_to @note\n    else\n        render 'edit'\n    end\nend\n\ndef destroy\n    @note.destroy\n    redirect_to notes_path\nend\n\nprivate\n\ndef find_note\n    @note = Note.find(params[:id])\nend\n\ndef note_params\n    params.require(:note).permit(:title, :content)\nend\n\n\n\nend\n</code></pre>\n\n<p>I assume somewhere in the edit method I need to write a rule for restricting the ability to edit posts to only 3 days, using the created_at function somehow? I'm just at a loss as to exactly how to do this.</p>\n\n<p>Any help is appreciated.</p>\n"}, {"tags": ["ruby-on-rails", "json", "ruby", "parsing"], "comments": [{"owner": {"reputation": 460, "user_id": 3578404, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/4Oxj3.png?s=128&g=1", "display_name": "CynePhoba12", "link": "https://stackoverflow.com/users/3578404/cynephoba12"}, "edited": false, "score": 0, "creation_date": 1487119632, "post_id": 42238780, "comment_id": 71636846, "body": "Your code for parsing the JSON is correct. If you put the JSON in as a string, does it still throw the error? Check that it&#39;s saving correctly in the <i>file.json</i> file. Try removing the spacing from the json and see if that makes a difference too"}, {"owner": {"reputation": 955, "user_id": 3739453, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/ad500b31d2ce042c4f2c5b6e361a129b?s=128&d=identicon&r=PG&f=1", "display_name": "Joe Morano", "link": "https://stackoverflow.com/users/3739453/joe-morano"}, "reply_to_user": {"reputation": 460, "user_id": 3578404, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/4Oxj3.png?s=128&g=1", "display_name": "CynePhoba12", "link": "https://stackoverflow.com/users/3578404/cynephoba12"}, "edited": false, "score": 0, "creation_date": 1487119732, "post_id": 42238780, "comment_id": 71636874, "body": "@CynePhoba12 Wait, how would I put the JSON in as a string? Just put quotes around it? Also, by removing spacing, do you mean write the whole thing on one line?"}, {"owner": {"reputation": 460, "user_id": 3578404, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/4Oxj3.png?s=128&g=1", "display_name": "CynePhoba12", "link": "https://stackoverflow.com/users/3578404/cynephoba12"}, "edited": false, "score": 0, "creation_date": 1487119794, "post_id": 42238780, "comment_id": 71636893, "body": "Yeah. Try using a website such as <a href=\"http://www.httputility.net/json-minifier.aspx\" rel=\"nofollow noreferrer\">httputility.net/json-minifier.aspx</a> to remove the extra line breaks, and then wrap it in single quotes."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1487126590, "post_id": 42238780, "comment_id": 71638678, "body": "I&#39;m not sure why your parser is wrapped inside ERB tags. Also, short form: <code>JSON.parse(File.open(&#39;file.json&#39;))</code> works <i>if</i> the file has valid content."}, {"owner": {"reputation": 955, "user_id": 3739453, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/ad500b31d2ce042c4f2c5b6e361a129b?s=128&d=identicon&r=PG&f=1", "display_name": "Joe Morano", "link": "https://stackoverflow.com/users/3739453/joe-morano"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1487201121, "post_id": 42238780, "comment_id": 71681593, "body": "@tadman It&#39;s because I&#39;m working within an html.erb document."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1487201592, "post_id": 42238780, "comment_id": 71681748, "body": "Normally it&#39;s best to keep the code in your ERB files to a minimum and offload anything heavy to a helper method or by doing some preparation in the controller."}], "answers": [{"comments": [{"owner": {"reputation": 955, "user_id": 3739453, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/ad500b31d2ce042c4f2c5b6e361a129b?s=128&d=identicon&r=PG&f=1", "display_name": "Joe Morano", "link": "https://stackoverflow.com/users/3739453/joe-morano"}, "edited": false, "score": 0, "creation_date": 1487201052, "post_id": 42239803, "comment_id": 71681569, "body": "I added the full error message. I also printed the json without parsing, and to my eyes it printed exactly what it should have, with no special or unusual characters."}, {"owner": {"reputation": 41846, "user_id": 926143, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/3396173c3d22988be1a0732d184902aa?s=128&d=identicon&r=PG", "display_name": "7stud", "link": "https://stackoverflow.com/users/926143/7stud"}, "reply_to_user": {"reputation": 955, "user_id": 3739453, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/ad500b31d2ce042c4f2c5b6e361a129b?s=128&d=identicon&r=PG&f=1", "display_name": "Joe Morano", "link": "https://stackoverflow.com/users/3739453/joe-morano"}, "edited": false, "score": 0, "creation_date": 1487205226, "post_id": 42239803, "comment_id": 71682856, "body": "@JoeMorano,  The json that rails is seeing is invalid.  See the bottom of my answer."}, {"owner": {"reputation": 955, "user_id": 3739453, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/ad500b31d2ce042c4f2c5b6e361a129b?s=128&d=identicon&r=PG&f=1", "display_name": "Joe Morano", "link": "https://stackoverflow.com/users/3739453/joe-morano"}, "edited": false, "score": 0, "creation_date": 1487211022, "post_id": 42239803, "comment_id": 71684416, "body": "You&#39;re absolutely right that <code>{&quot;1&quot;:[</code> is the problem, but I can&#39;t imagine why it isn&#39;t being parsed -- I swear yesterday I had different JSON with this exact format that worked. Anyway, I added my full view. There is no associated controller action; the route points straight to the html.erb file."}, {"owner": {"reputation": 41846, "user_id": 926143, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/3396173c3d22988be1a0732d184902aa?s=128&d=identicon&r=PG", "display_name": "7stud", "link": "https://stackoverflow.com/users/926143/7stud"}, "reply_to_user": {"reputation": 955, "user_id": 3739453, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/ad500b31d2ce042c4f2c5b6e361a129b?s=128&d=identicon&r=PG&f=1", "display_name": "Joe Morano", "link": "https://stackoverflow.com/users/3739453/joe-morano"}, "edited": false, "score": 0, "creation_date": 1487229955, "post_id": 42239803, "comment_id": 71691290, "body": "@JoeMorano, After deleting all the whitespace in your json, then adding back the whitespace, your json renders fine for me.  See the bottom of my answer."}, {"owner": {"reputation": 41846, "user_id": 926143, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/3396173c3d22988be1a0732d184902aa?s=128&d=identicon&r=PG", "display_name": "7stud", "link": "https://stackoverflow.com/users/926143/7stud"}, "reply_to_user": {"reputation": 955, "user_id": 3739453, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/ad500b31d2ce042c4f2c5b6e361a129b?s=128&d=identicon&r=PG&f=1", "display_name": "Joe Morano", "link": "https://stackoverflow.com/users/3739453/joe-morano"}, "edited": false, "score": 0, "creation_date": 1487233868, "post_id": 42239803, "comment_id": 71693519, "body": "By the way, you don&#39;t <code>require json</code> in rails."}, {"owner": {"reputation": 955, "user_id": 3739453, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/ad500b31d2ce042c4f2c5b6e361a129b?s=128&d=identicon&r=PG&f=1", "display_name": "Joe Morano", "link": "https://stackoverflow.com/users/3739453/joe-morano"}, "edited": false, "score": 0, "creation_date": 1487269247, "post_id": 42239803, "comment_id": 71720088, "body": "Wow, that&#39;s crazy. Awesome job figuring that out!"}], "tags": [], "owner": {"reputation": 41846, "user_id": 926143, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/3396173c3d22988be1a0732d184902aa?s=128&d=identicon&r=PG", "display_name": "7stud", "link": "https://stackoverflow.com/users/926143/7stud"}, "is_accepted": true, "score": 2, "last_activity_date": 1487297648, "last_edit_date": 1487297648, "creation_date": 1487126690, "answer_id": 42239803, "question_id": 42238780, "link": "https://stackoverflow.com/questions/42238780/why-is-my-server-failing-to-parse-this-json-code/42239803#42239803", "title": "Why is my server failing to parse this JSON code?", "body": "<blockquote>\n  <p>Is jsonlint unreliable, or is something else going on?</p>\n</blockquote>\n\n<p>jsonlint is reliable, and ruby has no trouble parsing the json you posted:</p>\n\n<pre><code>require 'json'\nrequire 'pp' \n\njson = &lt;&lt;END_OF_JSON\n{  \n    \"1\": [\n      {\n        \"title\": \"TITLE1\",\n        \"capital\": \"Rome\",\n        \"length\": 2.7,\n        \"date\": \"2017-1-2\",\n        \"tags\": [\n          \"Culture\"\n        ]\n    }],\n    \"2\": [\n      {\n        \"title\": \"TITLE2\",\n        \"capital\": \"Paris\",\n        \"age\": 1.2,\n        \"date\": \"2017-2-1\",\n        \"tags\": [\n          \"Culture\"\n        ]\n    }]\n}\nEND_OF_JSON\n\nobj = JSON.parse(json)\npp obj\n\n--output:--\n\n{\"1\"=&gt;\n  [{\"title\"=&gt;\"TITLE1\",\n    \"capital\"=&gt;\"Rome\",\n    \"length\"=&gt;2.7,\n    \"date\"=&gt;\"2017-1-2\",\n    \"tags\"=&gt;[\"Culture\"]}],\n \"2\"=&gt;\n  [{\"title\"=&gt;\"TITLE2\",\n    \"capital\"=&gt;\"Paris\",\n    \"age\"=&gt;1.2,\n    \"date\"=&gt;\"2017-2-1\",\n    \"tags\"=&gt;[\"Culture\"]}]}\n</code></pre>\n\n<p>However, non-printing characters won't necessarily be visible if you look at a file or output a string:</p>\n\n<pre><code>test = \"\\001hello\"\nputs test\np test\n\n--output:--\nhello\n\"\\u0001hello\"\n</code></pre>\n\n<p>You'll get a parse error here:</p>\n\n<pre><code>require 'json'\nrequire 'pp' \n\njson = &lt;&lt;END_OF_JSON\n{\n    \\001\"1\": [1, 2, 3]\n}\nEND_OF_JSON\n\nobj = JSON.parse(json)\n</code></pre>\n\n<p>Even though the json looks fine when you output it:</p>\n\n<pre><code>require 'json'\nrequire 'pp' \n\njson = &lt;&lt;END_OF_JSON\n{\n    \\001\"1\": [1, 2, 3]\n}\nEND_OF_JSON\n\nputs json\nobj = JSON.parse(json)\n\n--output:--\n{\n    \"1\": [1, 2, 3]\n}\n\n/Users/7stud/.rvm/rubies/ruby-2.3.0/lib/ruby/2.3.0/json/common.rb:156:in `parse': 784: unexpected token at '{ (JSON::ParserError)\n    \"1\": [1, 2, 3]\n}\n'\n    from /Users/7stud/.rvm/rubies/ruby-2.3.0/lib/ruby/2.3.0/json/common.rb:156:in `parse'\n    from 1.rb:11:in `&lt;main&gt;'\n</code></pre>\n\n<p>So you may want to read in your json from the file, then use <code>p</code> to output the text, then examine the text for any strange characters.</p>\n\n<p>Also, please copy and paste your full error message--don't ever type out what you think an error message says, then claim that is what your program produced. I can sort of duplicate the error message you posted with this json:</p>\n\n<pre><code>json = &lt;&lt;END_OF_JSON\n(code) = {\n    \"1\": [\n      {\n        \"title\": \"TITLE1\",\n        \"capital\": \"Rome\",\n        \"length\": 2.7,\n        \"date\": \"2017-1-2\",\n        \"tags\": [\n          \"Culture\"\n        ]\n    }],\n    \"2\": [\n      {\n        \"title\": \"TITLE2\",\n        \"capital\": \"Paris\",\n        \"age\": 1.2,\n        \"date\": \"2017-2-1\",\n        \"tags\": [\n          \"Culture\"\n        ]\n    }]\n}\nEND_OF_JSON\n\nobj = JSON.parse(json)\n\n--output:--\n`parse': 784: unexpected token at '(code) = { (JSON::ParserError)\n    \"1\": [\n      {\n        \"title\": \"TITLE1\",\n        \"capital\": \"Rome\",\n        \"length\": 2.7,\n        \"date\": \"2017-1-2\",\n        \"tags\": [\n          \"Culture\"\n        ]\n    }],\n    \"2\": [\n      {\n        \"title\": \"TITLE2\",\n        \"capital\": \"Paris\",\n        \"age\": 1.2,\n        \"date\": \"2017-2-1\",\n        \"tags\": [\n          \"Culture\"\n        ]\n    }]\n}\n'\n    from /Users/7stud/.rvm/rubies/ruby-2.3.0/lib/ruby/2.3.0/json/common.rb:156:in `parse'\n    from 1.rb:29:in `&lt;main&gt;'\n</code></pre>\n\n<p><strong>Response to comment 1</strong>:</p>\n\n<p>The error message contains the json that rails is seeing, and here it is:</p>\n\n<pre><code>399: unexpected token at '\u2003 {   #&lt;===Opening brace, which starts a javascript object.\n    \u2003 \u2003 \"title\": \"TITLE1\",\n    \u2003 \u2003 \"capital\": \"Rome\",\n    \u2003 \u2003 \"length\": 2.7,\n    \u2003 \u2003 \"date\": \"2017-1-2\",\n    \u2003 \u2003 \"tags\": [\n    \u2003 \u2003 \u2003 \"Culture\"\n    \u2003 \u2003 ]\n    }],   #&lt;====First, a closing brace that ends the javascript object, followed by a closing bracket, ending what?\n    \"2\": [\n    \u2003 {\n    \u2003 \u2003 \"title\": \"TITLE2\",\n    \u2003 \u2003 \"capital\": \"Paris\",\n    \u2003 \u2003 \"age\": 1.2,\n    \u2003 \u2003 \"date\": \"2017-2-1\",\n    \u2003 \u2003 \"tags\": [\n    \u2003 \u2003 \u2003 \"Culture\"\n    \u2003 \u2003 ] \n    }]\n}\n</code></pre>\n\n<p>If I put that invalid json in a rails view:</p>\n\n<pre><code>&lt;%\njson = &lt;&lt;END_OF_JSON \n{\n    \u2003 \u2003 \"title\": \"TITLE1\",\n    \u2003 \u2003 \"capital\": \"Rome\",\n    \u2003 \u2003 \"length\": 2.7,\n    \u2003 \u2003 \"date\": \"2017-1-2\",\n    \u2003 \u2003 \"tags\": [\n    \u2003 \u2003 \u2003 \"Culture\"\n    \u2003 \u2003 ]\n    }],\n    \"2\": [\n    \u2003 {\n    \u2003 \u2003 \"title\": \"TITLE2\",\n    \u2003 \u2003 \"capital\": \"Paris\",\n    \u2003 \u2003 \"age\": 1.2,\n    \u2003 \u2003 \"date\": \"2017-2-1\",\n    \u2003 \u2003 \"tags\": [\n    \u2003 \u2003 \u2003 \"Culture\"\n    \u2003 \u2003 ]\n    }]\n}\nEND_OF_JSON\n\nobj = JSON.parse(json)\n%&gt;\n</code></pre>\n\n<p>...then enter the route in my browser that will display that view, here is the error message I get in my browser:</p>\n\n<pre><code>Showing /Users/7stud/rails_projects/test4/app/views/users/index.html.erb where line #27 raised:\n\n784: unexpected token at '{\n    \u2003 \u2003 \"title\": \"TITLE1\",\n    \u2003 \u2003 \"capital\": \"Rome\",\n    \u2003 \u2003 \"length\": 2.7,\n    \u2003 \u2003 \"date\": \"2017-1-2\",\n    \u2003 \u2003 \"tags\": [\n    \u2003 \u2003 \u2003 \"Culture\"\n    \u2003 \u2003 ]\n    }],\n    \"2\": [\n    \u2003 {\n    \u2003 \u2003 \"title\": \"TITLE2\",\n    \u2003 \u2003 \"capital\": \"Paris\",\n    \u2003 \u2003 \"age\": 1.2,\n    \u2003 \u2003 \"date\": \"2017-2-1\",\n    \u2003 \u2003 \"tags\": [\n    \u2003 \u2003 \u2003 \"Culture\"\n    \u2003 \u2003 ]\n    }]\n}\n'\n</code></pre>\n\n<p>Look familiar?  If instead you had an error elsewhere in your json, like here:</p>\n\n<pre><code>&lt;%\njson = &lt;&lt;END_OF_JSON\n{    \n  \"1\": [\n      {\n        \"title\": \"TITLE1\",\n        \"capital\": \"Rome\",\n        \"length\": 2.7,\n        \"date\": \"2017-1-2\",\n        \"tags\": [\n          \"Culture\"\n        ]\n      }\n  ],\n  \"2\":   #&lt;====Missing opening bracket\n    {\n        \"title\": \"TITLE2\",\n        \"capital\": \"Paris\",\n        \"age\": 1.2,\n        \"date\": \"2017-2-1\",\n        \"tags\": [\n          \"Culture\"\n        ]\n    }\n  ]\n}\nEND_OF_JSON\n\nobj = JSON.parse(json)\n%&gt;\n</code></pre>\n\n<p>Then you would see an error message like the following in your browser:</p>\n\n<pre><code>Showing /Users/7stud/rails_projects/test4/app/views/users/index.html.erb where line #32 raised:\n\n784: unexpected token at '{    \n  \"1\": [   #&lt;===Note the presence of \"1\": [, unlike in your error message.\n      {\n        \"title\": \"TITLE1\",\n        \"capital\": \"Rome\",\n        \"length\": 2.7,\n        \"date\": \"2017-1-2\",\n        \"tags\": [\n          \"Culture\"\n        ]\n      }\n  ],\n  \"2\":    \n    {\n        \"title\": \"TITLE2\",\n        \"capital\": \"Paris\",\n        \"age\": 1.2,\n        \"date\": \"2017-2-1\",\n        \"tags\": [\n          \"Culture\"\n        ]\n    }\n  ]\n}\n'\n</code></pre>\n\n<p>Therefore, the <code>\"1\": [</code> is not present in the json that rails sees.  If you need more help, you need to copy and paste the code for:</p>\n\n<ol>\n<li>Your controller and the action.</li>\n<li>The view for the action.</li>\n</ol>\n\n<p><strong>Response to comment 2</strong>:</p>\n\n<p>A rails view is able to render the following json without error (all whitespace removed):</p>\n\n<pre><code>&lt;!--testing4.html.erb--&gt;\n&lt;%\nrequire 'json'\nrequire 'pp'\n\njson = &lt;&lt;END_OF_JSON\n{\n  \"1\": [{\"title\": \"TITLE1\", \"capital\": \"Rome\", \"length\": 2.7, \"date\": \"2017-1-2\", \"tags\": [\"Culture\"]}],\n  \"2\": [{\"title\": \"TITLE2\", \"capital\": \"Paris\", \"age\": 1.2, \"date\": \"2017-2-1\", \"tags\": [\"Culture\"]}]\n}\nEND_OF_JSON\n\n%&gt;\n&lt;%= obj = JSON.parse(json) %&gt;\n</code></pre>\n\n<p>And, a rails view is able to render the following json without error (all whitespace added back in): </p>\n\n<pre><code>&lt;!--testing4.html.erb--&gt;\n&lt;%\nrequire 'json'\nrequire 'pp'\n\njson = &lt;&lt;END_OF_JSON\n{\n     \"1\": [\n       {\n         \"title\": \"TITLE1\", \n         \"capital\": \"Rome\", \n         \"length\": 2.7, \n         \"date\": \"2017-1-2\", \n         \"tags\": [\n           \"Culture\"\n         ]\n     }],\n     \"2\": [\n       {\n         \"title\": \"TITLE2\", \n         \"capital\": \"Paris\", \n         \"age\": 1.2, \"date\": \n         \"2017-2-1\", \n         \"tags\": [\n           \"Culture\"\n         ]\n     }]\n}\nEND_OF_JSON\n\n%&gt;\n&lt;%= obj = JSON.parse(json) %&gt;\n</code></pre>\n\n<p>However, for some reason a rails view cannot render your json:</p>\n\n<pre><code>&lt;!--testing4.html.erb--&gt;\n&lt;%\nrequire 'json'\nrequire 'pp'\n\njson = &lt;&lt;END_OF_JSON\n{\n    \"1\": [\n    \u2003 {\n    \u2003 \u2003 \"title\": \"TITLE1\",\n    \u2003 \u2003 \"capital\": \"Rome\",\n    \u2003 \u2003 \"length\": 2.7,\n    \u2003 \u2003 \"date\": \"2017-1-2\",\n    \u2003 \u2003 \"tags\": [\n    \u2003 \u2003 \u2003 \"Culture\"\n    \u2003 \u2003 ]\n    }],\n    \"2\": [\n    \u2003 {\n    \u2003 \u2003 \"title\": \"TITLE2\",\n    \u2003 \u2003 \"capital\": \"Paris\",\n    \u2003 \u2003 \"age\": 1.2,\n    \u2003 \u2003 \"date\": \"2017-2-1\",\n    \u2003 \u2003 \"tags\": [\n    \u2003 \u2003 \u2003 \"Culture\"\n    \u2003 \u2003 ]\n    }]\n}\nEND_OF_JSON\n\n\n%&gt;\n&lt;%= obj = JSON.parse(json) %&gt;\n</code></pre>\n\n<p>After some further investigation, your json has a mixture of ascii spaces (20 in hex notation) and a type of UTF-8 space character called an <code>EM SPACE</code> (<code>U+2003</code>, <code>e2 80 83</code> in UTF-8).  The first <code>EM SPACE</code> in your json occurs here:</p>\n\n<pre><code>{\n    \"1\": [\n    \u2003 {\n    ^\n    |\n Right there\n</code></pre>\n\n<p>...which coincidentally is where the rails error message is cutting off your json.  Immediately preceding that opening brace (<code>7b</code> in hex notation) is an ascii space(<code>20</code> in hex notation), and the character preceding the ascii space is a three byte UTF-8 character called an <code>EM SPACE</code>(U+2003, <code>e2 80 83</code> in UTF-8).  Characters encoded in the UTF-8 encoding are supposed to be legal json.  jsonlint accepts the <code>EM SPACE</code>, but rails chokes on it. </p>\n\n<p>As a short example of the problem, the following javascript array has an <code>EM SPACE</code> after each comma:</p>\n\n<pre><code>&lt;!--testing4.html.erb--&gt;\u2003\u2003\n&lt;%\njson = \"[1,\u20032,\u20033]\"\n%&gt;\n\n&lt;%= obj = JSON.parse(json) %&gt;\n</code></pre>\n\n<p>Here's the error in my browser:</p>\n\n<pre><code>419: unexpected token at '\u20032,\u20033]'\n</code></pre>\n\n<p>The rails error chops off the json up to the first <code>EM SPACE</code>.</p>\n\n<p>It turns out that while UTF-8 characters are allowed in json, there are only a few ascii white space characters that are allowed between json terms--not just any UTF-8 character.  See <a href=\"https://tools.ietf.org/html/rfc7159#section-2\" rel=\"nofollow noreferrer\">RFC 7159</a>.  Using an <code>EM SPACE</code> between json terms is conceptually equivalent to using, say, a <code>z</code> between terms.  As a result, the json containing the <code>EM SPACE</code> characters is illegal json.  It would be legal to use an <code>EM SPACE</code> inside a string, but not between json terms.</p>\n\n<p>The following jsonlinter reports that the json with the EM SPACE characters is invalid:</p>\n\n<p><a href=\"http://www.freeformatter.com/json-validator.html\" rel=\"nofollow noreferrer\">http://www.freeformatter.com/json-validator.html</a></p>\n\n<p>It appears that some jsonlinters are more reliable than others.</p>\n\n<p><strong>A solution:</strong></p>\n\n<p>You can use <code>gsub()</code> to replace all the <code>EM SPACE</code> characters with ascii spaces:</p>\n\n<pre><code>...\n...\nEND_OF_JSON\n\nclean_json = json.gsub(\"\\u2003\", ' ')\n\n%&gt;\n&lt;%= obj = JSON.parse(clean_json) %&gt;\n</code></pre>\n\n<p>If you got that json from a service somewhere, you should shoot them an email and let them know that the json they are sending out is illegal.</p>\n"}], "owner": {"reputation": 955, "user_id": 3739453, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/ad500b31d2ce042c4f2c5b6e361a129b?s=128&d=identicon&r=PG&f=1", "display_name": "Joe Morano", "link": "https://stackoverflow.com/users/3739453/joe-morano"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 595, "favorite_count": 0, "accepted_answer_id": 42239803, "answer_count": 1, "score": 0, "last_activity_date": 1487297648, "creation_date": 1487118871, "last_edit_date": 1487210790, "question_id": 42238780, "link": "https://stackoverflow.com/questions/42238780/why-is-my-server-failing-to-parse-this-json-code", "title": "Why is my server failing to parse this JSON code?", "body": "<p>I had some JSON code (since lost) that my server parsed successfully. I kept the structure and just added/altered some data entries. Now my code is returning the following error when I try to parse it:</p>\n\n<pre><code>JSON::ParserError in Static#testing4\nShowing /home/user/website/app/views/static/testing4.html.erb where line #44 raised:\n\n399: unexpected token at '\u2003 {\n    \u2003 \u2003 \"title\": \"TITLE1\",\n    \u2003 \u2003 \"capital\": \"Rome\",\n    \u2003 \u2003 \"length\": 2.7,\n    \u2003 \u2003 \"date\": \"2017-1-2\",\n    \u2003 \u2003 \"tags\": [\n    \u2003 \u2003 \u2003 \"Culture\"\n    \u2003 \u2003 ]\n    }],\n    \"2\": [\n    \u2003 {\n    \u2003 \u2003 \"title\": \"TITLE2\",\n    \u2003 \u2003 \"capital\": \"Paris\",\n    \u2003 \u2003 \"age\": 1.2,\n    \u2003 \u2003 \"date\": \"2017-2-1\",\n    \u2003 \u2003 \"tags\": [\n    \u2003 \u2003 \u2003 \"Culture\"\n    \u2003 \u2003 ]\n    }]\n}\n'\n</code></pre>\n\n<p>Here's my code. <strong>The problem is that the <code>{\"1\":[</code> at the beginning isn't being parsed for some reason.</strong> There is no associated controller action for this view.</p>\n\n<pre><code>&lt;!--testing4.html.erb--&gt;\n&lt;%\nrequire 'json'\nrequire 'pp'\n\njson = &lt;&lt;END_OF_JSON\n{\n    \"1\": [\n    \u2003 {\n    \u2003 \u2003 \"title\": \"TITLE1\",\n    \u2003 \u2003 \"capital\": \"Rome\",\n    \u2003 \u2003 \"length\": 2.7,\n    \u2003 \u2003 \"date\": \"2017-1-2\",\n    \u2003 \u2003 \"tags\": [\n    \u2003 \u2003 \u2003 \"Culture\"\n    \u2003 \u2003 ]\n    }],\n    \"2\": [\n    \u2003 {\n    \u2003 \u2003 \"title\": \"TITLE2\",\n    \u2003 \u2003 \"capital\": \"Paris\",\n    \u2003 \u2003 \"age\": 1.2,\n    \u2003 \u2003 \"date\": \"2017-2-1\",\n    \u2003 \u2003 \"tags\": [\n    \u2003 \u2003 \u2003 \"Culture\"\n    \u2003 \u2003 ]\n    }]\n}\nEND_OF_JSON\n\n\n%&gt;\n&lt;%= obj = JSON.parse(json) %&gt;\n</code></pre>\n\n<hr>\n\n<p><strong>Trying to output it without parsing it has the following result:</strong></p>\n\n<pre><code>&lt;%\nrequire 'json'\nrequire 'pp'\n\njson = &lt;&lt;END_OF_JSON\n{\n    \"1\": [\n    \u2003 {\n    \u2003 \u2003 \"title\": \"TITLE1\",\n    \u2003 \u2003 \"capital\": \"Rome\",\n    \u2003 \u2003 \"length\": 2.7,\n    \u2003 \u2003 \"date\": \"2017-1-2\",\n    \u2003 \u2003 \"tags\": [\n    \u2003 \u2003 \u2003 \"Culture\"\n    \u2003 \u2003 ]\n    }],\n    \"2\": [\n    \u2003 {\n    \u2003 \u2003 \"title\": \"TITLE2\",\n    \u2003 \u2003 \"capital\": \"Paris\",\n    \u2003 \u2003 \"age\": 1.2,\n    \u2003 \u2003 \"date\": \"2017-2-1\",\n    \u2003 \u2003 \"tags\": [\n    \u2003 \u2003 \u2003 \"Culture\"\n    \u2003 \u2003 ]\n    }]\n}\nEND_OF_JSON\n\n\n%&gt;\nPUTS: &lt;%= puts json %&gt;&lt;br&gt;\nPP: &lt;%= pp json %&gt;\n\n\n---output---\n\nPUTS: \nPP: { \"1\": [ \u2003 { \u2003 \u2003 \"title\": \"TITLE1\", \u2003 \u2003 \"capital\": \"Rome\", \u2003 \u2003 \"length\": 2.7, \u2003 \u2003 \"date\": \"2017-1-2\", \u2003 \u2003 \"tags\": [ \u2003 \u2003 \u2003 \"Culture\" \u2003 \u2003 ] }], \"2\": [ \u2003 { \u2003 \u2003 \"title\": \"TITLE2\", \u2003 \u2003 \"capital\": \"Paris\", \u2003 \u2003 \"age\": 1.2, \u2003 \u2003 \"date\": \"2017-2-1\", \u2003 \u2003 \"tags\": [ \u2003 \u2003 \u2003 \"Culture\" \u2003 \u2003 ] }] }\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 2, "creation_date": 1487116707, "post_id": 42238419, "comment_id": 71636003, "body": "It sounds like you need a state machine, and there&#39;s many gems that do this."}, {"owner": {"reputation": 283, "user_id": 7197373, "user_type": "registered", "accept_rate": 71, "profile_image": "https://lh3.googleusercontent.com/-8cxs3f-Mnnc/AAAAAAAAAAI/AAAAAAAAAFM/dixBEFMr-90/photo.jpg?sz=128", "display_name": "RamJet", "link": "https://stackoverflow.com/users/7197373/ramjet"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1487120370, "post_id": 42238419, "comment_id": 71637054, "body": "I did&#39;t know a state machine gem existed, Thanks @tadman. I shall investigate."}], "answers": [{"comments": [{"owner": {"reputation": 283, "user_id": 7197373, "user_type": "registered", "accept_rate": 71, "profile_image": "https://lh3.googleusercontent.com/-8cxs3f-Mnnc/AAAAAAAAAAI/AAAAAAAAAFM/dixBEFMr-90/photo.jpg?sz=128", "display_name": "RamJet", "link": "https://stackoverflow.com/users/7197373/ramjet"}, "edited": false, "score": 0, "creation_date": 1487122948, "post_id": 42238455, "comment_id": 71637828, "body": "These can only be used with active record - correct. My example is not using active record."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 3, "creation_date": 1487125751, "post_id": 42238455, "comment_id": 71638486, "body": "If you tag things as Rails it&#39;s natural people will point out ActiveRecord features. For a generic Ruby solution, if one is required, it&#39;s best to omit the Rails tag."}], "tags": [], "owner": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "is_accepted": false, "score": 1, "last_activity_date": 1487116698, "creation_date": 1487116698, "answer_id": 42238455, "question_id": 42238419, "link": "https://stackoverflow.com/questions/42238419/ruby-rails-equivalent-to-a-c-enum/42238455#42238455", "title": "Ruby/Rails equivalent to a C++ enum", "body": "<p>For enums in Rails, I suggest <a href=\"http://api.rubyonrails.org/classes/ActiveRecord/Enum.html\" rel=\"nofollow noreferrer\">Rails Enums</a> ;)</p>\n"}], "owner": {"reputation": 283, "user_id": 7197373, "user_type": "registered", "accept_rate": 71, "profile_image": "https://lh3.googleusercontent.com/-8cxs3f-Mnnc/AAAAAAAAAAI/AAAAAAAAAFM/dixBEFMr-90/photo.jpg?sz=128", "display_name": "RamJet", "link": "https://stackoverflow.com/users/7197373/ramjet"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 69, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1487116698, "creation_date": 1487116547, "question_id": 42238419, "link": "https://stackoverflow.com/questions/42238419/ruby-rails-equivalent-to-a-c-enum", "title": "Ruby/Rails equivalent to a C++ enum", "body": "<p>My rails app can make telephone calls. I want a set of constants that define how calls will be conducted. When a call starts, one of three things could happen, depending on a configuration constant. They are</p>\n\n<p>1) Ask the user to press a key to start the conversation</p>\n\n<p>2) Ask the user to say continue to start the conversation</p>\n\n<p>3) Start the conversation immediately when the phone is answered</p>\n\n<p>The operation modes are mutually exclusive. If you press a key to start a conversation, you can't say continue to start a conversation, etc etc. In C++ this would be an enum. What's the preferred ruby/rails way to do this. An example showing how to construct the constant and how to use it in code would be greatly appreciated.</p>\n"}, {"tags": ["ruby", "time"], "comments": [{"owner": {"reputation": 117699, "user_id": 62576, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/15264f7bf48e10ce32dfa4865a13763c?s=128&d=identicon&r=PG", "display_name": "Ken White", "link": "https://stackoverflow.com/users/62576/ken-white"}, "edited": false, "score": 0, "creation_date": 1487116296, "post_id": 42238353, "comment_id": 71635887, "body": "The while loop is calculating them. Is it the basic math you&#39;re having trouble with, or the ruby code?"}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1487116909, "post_id": 42238353, "comment_id": 71636058, "body": "This is some very flawed code. Where did you find it? <code>hours, minutes = minutes &#47; 60, minutes % 60</code> does the job just the same."}, {"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1487155036, "post_id": 42238353, "comment_id": 71652158, "body": "&quot;How does Ruby know how many hours there are?&quot; \u2013 It doesn&#39;t. That&#39;s what that code is computing."}, {"owner": {"reputation": 3, "user_id": 7565780, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-Az-B6xznVVA/AAAAAAAAAAI/AAAAAAAAAOs/UXAWXHJubKs/photo.jpg?sz=128", "display_name": "imperfectskillz", "link": "https://stackoverflow.com/users/7565780/imperfectskillz"}, "edited": false, "score": 0, "creation_date": 1487291618, "post_id": 42238353, "comment_id": 71731075, "body": "Not having trouble with the math but the code itself. I don&#39;t understand how Ruby knows there are 60 mins in an hour. There&#39;s no code that explicitly states 60 mins in an hour."}, {"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1487302331, "post_id": 42238353, "comment_id": 71734118, "body": "@imperfectskillz: Ruby doesn&#39;t know. It&#39;s in the code. Didn&#39;t you see the <code>60</code> in the code? Twice?"}], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 7565780, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-Az-B6xznVVA/AAAAAAAAAAI/AAAAAAAAAOs/UXAWXHJubKs/photo.jpg?sz=128", "display_name": "imperfectskillz", "link": "https://stackoverflow.com/users/7565780/imperfectskillz"}, "edited": false, "score": 0, "creation_date": 1487291672, "post_id": 42238396, "comment_id": 71731094, "body": "I just don&#39;t understand how ruby knows the correlation between minutes and hours. how does it know that there are 60 minutes in an hour?"}, {"owner": {"reputation": 1330, "user_id": 2671441, "user_type": "registered", "profile_image": "https://graph.facebook.com/802794209/picture?type=large", "display_name": "bejado", "link": "https://stackoverflow.com/users/2671441/bejado"}, "reply_to_user": {"reputation": 3, "user_id": 7565780, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-Az-B6xznVVA/AAAAAAAAAAI/AAAAAAAAAOs/UXAWXHJubKs/photo.jpg?sz=128", "display_name": "imperfectskillz", "link": "https://stackoverflow.com/users/7565780/imperfectskillz"}, "edited": false, "score": 0, "creation_date": 1487291716, "post_id": 42238396, "comment_id": 71731104, "body": "@imperfectskillz We told it so by writing 60."}, {"owner": {"reputation": 3, "user_id": 7565780, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-Az-B6xznVVA/AAAAAAAAAAI/AAAAAAAAAOs/UXAWXHJubKs/photo.jpg?sz=128", "display_name": "imperfectskillz", "link": "https://stackoverflow.com/users/7565780/imperfectskillz"}, "edited": false, "score": 0, "creation_date": 1487293431, "post_id": 42238396, "comment_id": 71731557, "body": "where does it say hours = 60 mins?"}, {"owner": {"reputation": 1330, "user_id": 2671441, "user_type": "registered", "profile_image": "https://graph.facebook.com/802794209/picture?type=large", "display_name": "bejado", "link": "https://stackoverflow.com/users/2671441/bejado"}, "reply_to_user": {"reputation": 3, "user_id": 7565780, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-Az-B6xznVVA/AAAAAAAAAAI/AAAAAAAAAOs/UXAWXHJubKs/photo.jpg?sz=128", "display_name": "imperfectskillz", "link": "https://stackoverflow.com/users/7565780/imperfectskillz"}, "edited": false, "score": 0, "creation_date": 1487293534, "post_id": 42238396, "comment_id": 71731594, "body": "It doesn&#39;t. Ruby doesn&#39;t &quot;know&quot; anything. Computers are simple machines that we write algorithms for to do useful work. This algorithm repeatedly subtracts 60 from the number of minutes because <i>we</i> know that there are 60 minutes in an hour. The computer doesn&#39;t know this, only blindly doing what we tell it to do."}], "tags": [], "owner": {"reputation": 1330, "user_id": 2671441, "user_type": "registered", "profile_image": "https://graph.facebook.com/802794209/picture?type=large", "display_name": "bejado", "link": "https://stackoverflow.com/users/2671441/bejado"}, "is_accepted": false, "score": 2, "last_activity_date": 1487117012, "last_edit_date": 1487117012, "creation_date": 1487116399, "answer_id": 42238396, "question_id": 42238353, "link": "https://stackoverflow.com/questions/42238353/explain-time-conversion-to-minutes-and-hours/42238396#42238396", "title": "Explain time Conversion to minutes and hours", "body": "<p>Well, walk through a few examples.</p>\n\n<p>If <code>minutes</code> is 125, how many hours should be returned?\n<code>125 - 60 - 60 = 5</code>. There's two 60's, so <strong>two</strong> hours.</p>\n\n<p>If <code>minutes</code> is 65, how many hours should be returned?\n<code>65 - 60 = 5</code>. There's only one 60, so <strong>one</strong> hour.</p>\n\n<p>The Ruby code does the same thing, counting how many times it can subtract 60 until it cannot subtract any more (i.e., subtracting another 60 would result in a negative number). It does this with a <code>while</code> loop.</p>\n\n<p>The two lines inside the <code>while</code> loop:</p>\n\n<pre><code>hours = hours + 1\nminutes = minutes - 60\n</code></pre>\n\n<p>update the <code>hours</code> and <code>minutes</code> variables just like we did in our examples. When <code>minutes</code> is less than 60, we stop and return how many total hours we counted.</p>\n"}, {"comments": [{"owner": {"reputation": 9602, "user_id": 3607136, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/NRFso.jpg?s=128&g=1", "display_name": "Gagan Gami", "link": "https://stackoverflow.com/users/3607136/gagan-gami"}, "reply_to_user": {"reputation": 3, "user_id": 7565780, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-Az-B6xznVVA/AAAAAAAAAAI/AAAAAAAAAOs/UXAWXHJubKs/photo.jpg?sz=128", "display_name": "imperfectskillz", "link": "https://stackoverflow.com/users/7565780/imperfectskillz"}, "edited": false, "score": 0, "creation_date": 1487317874, "post_id": 42242932, "comment_id": 71740022, "body": "@imperfectskillz : If this answer helpful to you to resolved your problem then you can mark(tick) it as answered"}], "tags": [], "owner": {"reputation": 9602, "user_id": 3607136, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/NRFso.jpg?s=128&g=1", "display_name": "Gagan Gami", "link": "https://stackoverflow.com/users/3607136/gagan-gami"}, "is_accepted": true, "score": 0, "last_activity_date": 1487143105, "creation_date": 1487143105, "answer_id": 42242932, "question_id": 42238353, "link": "https://stackoverflow.com/questions/42238353/explain-time-conversion-to-minutes-and-hours/42242932#42242932", "title": "Explain time Conversion to minutes and hours", "body": "<p>How about this simple way:</p>\n\n<pre><code>def time_conversion(minutes)\n  hours = (minutes/60 % 60)\n  return hours\nend\n\n&gt; time_conversion(125)\n#=&gt; 2 \n&gt; time_conversion(165)\n#=&gt; 2 \n</code></pre>\n\n<p>Now let's convert it to <strong><code>\"HH:MM\"</code></strong></p>\n\n<pre><code>def time_conversion(minutes)\n  hh_mm = [minutes / 60 % 60, minutes % 60].map { |t| t.to_s.rjust(2,'0') }.join(':')\n  return hh_mm\nend\n\n&gt;  time_conversion(125)\n#=&gt; \"02:05\" \n&gt;  time_conversion(165)\n#=&gt; \"02:45\"\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 7565780, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-Az-B6xznVVA/AAAAAAAAAAI/AAAAAAAAAOs/UXAWXHJubKs/photo.jpg?sz=128", "display_name": "imperfectskillz", "link": "https://stackoverflow.com/users/7565780/imperfectskillz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 75, "favorite_count": 1, "accepted_answer_id": 42242932, "answer_count": 2, "score": -3, "last_activity_date": 1487143105, "creation_date": 1487116166, "last_edit_date": 1487116887, "question_id": 42238353, "link": "https://stackoverflow.com/questions/42238353/explain-time-conversion-to-minutes-and-hours", "title": "Explain time Conversion to minutes and hours", "body": "<p>Can someone please explain to me how this works?</p>\n\n<pre><code>While minutes &gt;=60...\n</code></pre>\n\n<p>How does Ruby know how many hours there are???</p>\n\n<pre><code>def time_conversion(minutes)\n  hours = 0\n\n  while minutes &gt;= 60\n    hours = hours + 1\n    minutes = minutes - 60\n  end\n  return hours\nend\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "firebase", "firebase-authentication", "jwt"], "comments": [{"owner": {"reputation": 687, "user_id": 1986332, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/35c5ba057c859a7c36376a0213d8a062?s=128&d=identicon&r=PG", "display_name": "fschuindt", "link": "https://stackoverflow.com/users/1986332/fschuindt"}, "edited": false, "score": 0, "creation_date": 1505967985, "post_id": 42238246, "comment_id": 112003280, "body": "Please, take a look at my <a href=\"https://github.com/fschuindt/firebase_id_token\" rel=\"nofollow noreferrer\">firebase_id_token</a> gem. It does exactly what you want."}], "answers": [{"comments": [{"owner": {"reputation": 4703, "user_id": 2187976, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/GkiD1.jpg?s=128&g=1", "display_name": "Mohamed ALOUANE", "link": "https://stackoverflow.com/users/2187976/mohamed-alouane"}, "edited": false, "score": 1, "creation_date": 1496530733, "post_id": 42404708, "comment_id": 75700981, "body": "Hey, How were you able to verify it in rails ?"}, {"owner": {"reputation": 51, "user_id": 7411355, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e91f3c716f6383ee3831dfe7f236c756?s=128&d=identicon&r=PG&f=1", "display_name": "Porfirio Diaz", "link": "https://stackoverflow.com/users/7411355/porfirio-diaz"}, "reply_to_user": {"reputation": 4703, "user_id": 2187976, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/GkiD1.jpg?s=128&g=1", "display_name": "Mohamed ALOUANE", "link": "https://stackoverflow.com/users/2187976/mohamed-alouane"}, "edited": false, "score": 0, "creation_date": 1502828784, "post_id": 42404708, "comment_id": 78360291, "body": "@MohamedALOUANE i send the already logged in user token to my api then i decoded the token with my personal key then check wich user was by looking in the database"}], "tags": [], "owner": {"reputation": 51, "user_id": 7411355, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e91f3c716f6383ee3831dfe7f236c756?s=128&d=identicon&r=PG&f=1", "display_name": "Porfirio Diaz", "link": "https://stackoverflow.com/users/7411355/porfirio-diaz"}, "is_accepted": true, "score": 1, "last_activity_date": 1487808633, "creation_date": 1487808633, "answer_id": 42404708, "question_id": 42238246, "link": "https://stackoverflow.com/questions/42238246/firebase-authentication-with-custom-token/42404708#42404708", "title": "Firebase authentication with custom token", "body": "<p>I found a better way to authenticate, I'm just sending the token that firebase gives you and verifying it on rails with the information I need and that's it.</p>\n"}, {"tags": [], "owner": {"reputation": 75, "user_id": 7952086, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/R2KKR.png?s=128&g=1", "display_name": "jeanluc rotolo", "link": "https://stackoverflow.com/users/7952086/jeanluc-rotolo"}, "is_accepted": false, "score": 0, "last_activity_date": 1597039861, "creation_date": 1597039861, "answer_id": 63334986, "question_id": 42238246, "link": "https://stackoverflow.com/questions/42238246/firebase-authentication-with-custom-token/63334986#63334986", "title": "Firebase authentication with custom token", "body": "<p>Check if your secret key is wrapped in double quotes and not single as they contain '\\n' escape sequences. An auth/invalid-custom-token error is thrown if the secret key is not as specified in the documentation.</p>\n"}, {"comments": [{"owner": {"reputation": 714, "user_id": 1302400, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/792c87579c2bca1c7131f87f4b2c10ce?s=128&d=identicon&r=PG", "display_name": "wtr", "link": "https://stackoverflow.com/users/1302400/wtr"}, "edited": false, "score": 1, "creation_date": 1606178411, "post_id": 63553546, "comment_id": 114878495, "body": "Somehow I overlooked that &quot;exp&quot; is a <i>different time</i>, not a <i>difference</i> in time. I had &quot;exp: 3600&quot; until I saw: <code>now_seconds + 60*60</code>"}], "tags": [], "owner": {"reputation": 2269, "user_id": 1298553, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/bfed2f6a921d93feb957ebf05f8ca7fb?s=128&d=identicon&r=PG", "display_name": "cgenco", "link": "https://stackoverflow.com/users/1298553/cgenco"}, "is_accepted": false, "score": 2, "last_activity_date": 1598231914, "creation_date": 1598231914, "answer_id": 63553546, "question_id": 42238246, "link": "https://stackoverflow.com/questions/42238246/firebase-authentication-with-custom-token/63553546#63553546", "title": "Firebase authentication with custom token", "body": "<p>It looks like the accepted answer found a way to link authentication from Firebase to Rails, but the original question seems to be asking how to link Rails authentication to Firebase (which is what I was trying to do).</p>\n<p>To keep your authentication logic in Rails (ex: from Devise) and share it with Firebase, first get a Firebase server key as a <code>.json</code> file from your <a href=\"https://console.firebase.google.com/project/_/settings/serviceaccounts/adminsdk\" rel=\"nofollow noreferrer\">Service Accounts</a> page in your project's settings.</p>\n<p>You'll only need the <code>private_key</code> and <code>client_id</code> from this file, which I recommend storing as environment variables so they're not potentially leaked in source code.</p>\n<p>Next, make a Plain ol' Ruby object (PORO) that will take in a <code>User</code> and spit out a JSON Web Token (JWT) that Firebase can understand:</p>\n<pre class=\"lang-rb prettyprint-override\"><code>class FirebaseToken\n  def self.create_from_user(user)\n    service_account_email = ENV[&quot;FIREBASE_CLIENT_EMAIL&quot;]\n    private_key = OpenSSL::PKey::RSA.new ENV[&quot;FIREBASE_PRIVATE_KEY&quot;]\n\n    claims = {\n      isCool: &quot;oh yeah&quot;\n    }\n\n    now_seconds = Time.now.to_i\n    payload = {\n      iss: service_account_email,\n      sub: service_account_email,\n      aud: &quot;https://identitytoolkit.googleapis.com/google.identity.identitytoolkit.v1.IdentityToolkit&quot;,\n      iat: now_seconds,\n      exp: now_seconds + (60*60), # Maximum expiration time is one hour\n      uid: user.id,\n      # a hash to pass to the client as JSON\n      claims: claims\n    }\n    JWT.encode payload, private_key, &quot;RS256&quot;\n  end\nend\n\n</code></pre>\n<p>Now send this JWT to authenticated users through javascript in your application layout:</p>\n<pre class=\"lang-rb prettyprint-override\"><code>window.firebaseJWT = &quot;#{FirebaseToken.create_from_user(current_user)}&quot;;\n</code></pre>\n<p>In your frontend code, you can now use this token to authenticate users:</p>\n<pre class=\"lang-js prettyprint-override\"><code>firebase\n  .auth()\n  .signInWithCustomToken(window.firebaseJWT)\n  .catch(error =&gt; {\n    console.error(error);\n  });\n</code></pre>\n<p>Remember to sign them out of firebase when they sign out of your application:</p>\n<pre class=\"lang-js prettyprint-override\"><code>firebase\n  .auth()\n  .signOut()\n  .then(() =&gt; {\n    // Sign-out successful.\n  })\n  .catch(error =&gt; {\n    console.error(error);\n  });\n</code></pre>\n"}], "owner": {"reputation": 51, "user_id": 7411355, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e91f3c716f6383ee3831dfe7f236c756?s=128&d=identicon&r=PG&f=1", "display_name": "Porfirio Diaz", "link": "https://stackoverflow.com/users/7411355/porfirio-diaz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2133, "favorite_count": 1, "accepted_answer_id": 42404708, "answer_count": 3, "score": 4, "last_activity_date": 1598231914, "creation_date": 1487115552, "last_edit_date": 1487196884, "question_id": 42238246, "link": "https://stackoverflow.com/questions/42238246/firebase-authentication-with-custom-token", "title": "Firebase authentication with custom token", "body": "<p>I have a firebase project which Im trying to authenticate from my rails server creating a custom token with the library ruby-jwt as it says on the docs, but i keep getting the same error:</p>\n\n<blockquote>\n  <p>auth/invalid-custom-token, The custom token format is incorrect. Please check the documentation.</p>\n</blockquote>\n\n<p>The <code>credentials.json</code> is from the service account I made in google console, uid is sent from the front end to the api.</p>\n\n<pre><code>def generate_auth_token(uid)\n  now_seconds = Time.now.to_i\n  credentials = JSON.parse(File.read(\"credentials.json\"))\n  private_key = OpenSSL::PKey::RSA.new credentials[\"private_key\"]\n  payload = {\n      :iss =&gt; credentials[\"client_email\"],\n      :sub =&gt; credentials[\"client_email\"],\n      :aud =&gt; 'https://identitytoolkit.googleapis.com/google.identity.identitytoolkit.v1.IdentityToolkit',\n      :iat =&gt; now_seconds,\n      :exp =&gt; now_seconds+(60*60), # Maximum expiration time is one hour\n      :uid =&gt; uid.to_s,\n      :claims =&gt; {:premium_account =&gt; true}\n    }\n  JWT.encode(payload, private_key, 'RS256')\nend\n</code></pre>\n\n<p>it looks like this in jwt.io</p>\n\n<pre><code>{\n  \"iss\": \"defered@defered.iam.gserviceaccount.com\",\n  \"sub\": \"defered@defered.iam.gserviceaccount.com\",\n  \"aud\": \"https://identitytoolkit.googleapis.com/google.identity.identitytoolkit.v1.IdentityToolkit\",\n  \"iat\": 1486824545,\n  \"exp\": 1486828145,\n  \"uid\": \"4\",\n  \"claims\": {\n     \"premium_account\": true\n   }\n}\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "ajax"], "comments": [{"owner": {"reputation": 26120, "user_id": 219883, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/c35b5b0f9e7cce48864f4f1545ead995?s=128&d=identicon&r=PG", "display_name": "Taryn East", "link": "https://stackoverflow.com/users/219883/taryn-east"}, "edited": false, "score": 0, "creation_date": 1487113756, "post_id": 42237760, "comment_id": 71635137, "body": "Can you check your logs (terminal window or <code>log&#47;development.log</code>) so we get more detail of what error you are getting? search for the 500 and look at the error message, and also the stacktrace and show us? Cheers."}, {"owner": {"reputation": 179, "user_id": 6753997, "user_type": "registered", "accept_rate": 44, "profile_image": "https://i.stack.imgur.com/8KICN.png?s=128&g=1", "display_name": "jshaf", "link": "https://stackoverflow.com/users/6753997/jshaf"}, "reply_to_user": {"reputation": 26120, "user_id": 219883, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/c35b5b0f9e7cce48864f4f1545ead995?s=128&d=identicon&r=PG", "display_name": "Taryn East", "link": "https://stackoverflow.com/users/219883/taryn-east"}, "edited": false, "score": 0, "creation_date": 1487114574, "post_id": 42237760, "comment_id": 71635421, "body": "So running this in a docker container so seeing logs isn&#39;t as easy as that unfortunately."}, {"owner": {"reputation": 26120, "user_id": 219883, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/c35b5b0f9e7cce48864f4f1545ead995?s=128&d=identicon&r=PG", "display_name": "Taryn East", "link": "https://stackoverflow.com/users/219883/taryn-east"}, "edited": false, "score": 0, "creation_date": 1487118944, "post_id": 42237760, "comment_id": 71636631, "body": "Ah... that&#39;s annoying. :/ Can you test it locally on development and see the same issue happening?"}], "answers": [{"tags": [], "owner": {"reputation": 1009, "user_id": 2502605, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/7f3824de8433c834eecb229b79608412?s=128&d=identicon&r=PG&f=1", "display_name": "Roko", "link": "https://stackoverflow.com/users/2502605/roko"}, "is_accepted": false, "score": 0, "last_activity_date": 1487143720, "creation_date": 1487143720, "answer_id": 42243092, "question_id": 42237760, "link": "https://stackoverflow.com/questions/42237760/prepend-table-element-to-list-of-data-using-ajax-and-rails/42243092#42243092", "title": "Prepend table element to list of data using Ajax and Rails", "body": "<p>To see which error you get, without access to logs you can do this:</p>\n\n<pre><code>begin\n  $(\"#content\").prepend('&lt;%= j render @suggested_invite %&gt;');\nrescue Error =&gt; e\n  &lt;%= raw e.backtrace %&gt;\nend\n</code></pre>\n\n<p>Then check the server response when trying to create </p>\n"}], "owner": {"reputation": 179, "user_id": 6753997, "user_type": "registered", "accept_rate": 44, "profile_image": "https://i.stack.imgur.com/8KICN.png?s=128&g=1", "display_name": "jshaf", "link": "https://stackoverflow.com/users/6753997/jshaf"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 54, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1487143720, "creation_date": 1487112956, "question_id": 42237760, "link": "https://stackoverflow.com/questions/42237760/prepend-table-element-to-list-of-data-using-ajax-and-rails", "title": "Prepend table element to list of data using Ajax and Rails", "body": "<p>I am trying to prepend a recently created post to a list without having to refresh the browser. I am wondering how this can be done with table elements.</p>\n\n<h3>index.html.erb</h3>\n\n<pre><code>    &lt;table class=\"table table-hover\"&gt;\n      &lt;thead&gt;\n      &lt;tr&gt;\n        &lt;th&gt;Name&lt;/th&gt;\n        &lt;th&gt;Card image&lt;/th&gt;\n        &lt;th colspan=\"3\"&gt;&lt;/th&gt;\n      &lt;/tr&gt;\n      &lt;/thead&gt;\n      &lt;tbody id=\"content\"&gt;\n      &lt;%= render @suggested_invites %&gt;\n      &lt;/tbody&gt;\n    &lt;/table&gt;\n</code></pre>\n\n<h3>_suggested_invite.html.erb</h3>\n\n<pre><code>&lt;% @suggested_invites.each do |suggested_invite| %&gt;\n    &lt;tr style=\"background-color:&lt;%= suggested_invite.color %&gt;\"&gt;\n  &lt;td style=\"color:white\"&gt;&lt;%= suggested_invite.name %&gt;&lt;/td&gt;\n  &lt;td&gt;&lt;img src=\"&lt;%= suggested_invite.card_image %&gt;\" class=\"img-fluid\" id=\"card_image\" alt=\"Responsive image\"&gt;&lt;/td&gt;\n  &lt;td&gt;&lt;%= link_to 'Edit', edit_suggested_invite_path(suggested_invite), :class =&gt; 'action_buttons' %&gt;&lt;/td&gt;\n  &lt;td&gt;&lt;%= link_to 'De-Activate', suggested_invite, method: :delete, :class =&gt; 'action_buttons', data: { confirm: 'Are you sure?' } %&gt;&lt;/td&gt;\n&lt;/tr&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<h3>suggested_invites_controller.rb</h3>\n\n<pre><code>  def create\n    @suggested_invite = SuggestedInvite.new(suggested_invite_params)\n    respond_to do |format|\n      if @suggested_invite.save\n        format.html { redirect_to @suggested_invite, notice: 'Suggested invite was successfully created.' }\n        format.json { render :show, status: :created, location: @suggested_invite }\n        format.js\n      else\n        format.html { render :new }\n        format.json { render json: @suggested_invite.errors, status: :unprocessable_entity }\n        format.js\n      end\n    end\n  end\n</code></pre>\n\n<h3>create.js.erb</h3>\n\n<pre><code>$(\"#mynewsuggestedinvite\").modal('hide');\n$(\"#content\").prepend('&lt;%= j render @suggested_invite %&gt;');\n</code></pre>\n\n<p>When I run this code I get a 500 internal server error. I know that it breaks here:</p>\n\n<pre><code>$(\"#content\").prepend('&lt;%= j render @suggested_invite %&gt;');\n</code></pre>\n\n<p>I have been looking and haven't found any ways of doing this. Any help would be very much appreciated!</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "rake"], "answers": [{"tags": [], "owner": {"reputation": 18749, "user_id": 407213, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/c5T4C.jpg?s=128&g=1", "display_name": "Dorian", "link": "https://stackoverflow.com/users/407213/dorian"}, "is_accepted": false, "score": 0, "last_activity_date": 1487112428, "creation_date": 1487112428, "answer_id": 42237643, "question_id": 42237642, "link": "https://stackoverflow.com/questions/42237642/how-to-add-an-after-hook-to-a-rake-task-e-g-ordering-db-schema-rb-after-dbmig/42237643#42237643", "title": "How to add an after hook to a rake task (e.g. ordering db/schema.rb after db:migrate)", "body": "<pre><code>Rake::Task['db:migrate'].enhance do\n  load Rails.root.join('bin', 'your-script')\nend\n</code></pre>\n"}], "owner": {"reputation": 18749, "user_id": 407213, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/c5T4C.jpg?s=128&g=1", "display_name": "Dorian", "link": "https://stackoverflow.com/users/407213/dorian"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 153, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1487112428, "creation_date": 1487112428, "question_id": 42237642, "link": "https://stackoverflow.com/questions/42237642/how-to-add-an-after-hook-to-a-rake-task-e-g-ordering-db-schema-rb-after-dbmig", "title": "How to add an after hook to a rake task (e.g. ordering db/schema.rb after db:migrate)", "body": "<p>How to add an after hook to <code>rake db:migrate</code>?</p>\n\n<p>e.g. adding some post-ordering to <code>db/schema.rb</code>, normalize <code>db/schema.rb</code>, using rubocop to clean the syntax of <code>db/schema.rb</code>, etc. (just examples, but basically anything after db:migration)</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "regex", "regex-lookarounds"], "comments": [{"owner": {"reputation": 481662, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 0, "creation_date": 1487112389, "post_id": 42237515, "comment_id": 71634658, "body": "The reason your regex failed is that <code>\\&#47;</code> will match the first <code>&#47;</code> in the string, and <code>.*?</code> will match any 0+ chars up to the <code>&#47;keyword&#47;</code>, thus including any <code>&#47;</code> it finds on its way. A negated character class <code>[^&#47;]</code> is the easiest fix in this case."}], "answers": [{"tags": [], "owner": {"reputation": 200340, "user_id": 2680216, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/K877D.png?s=128&g=1", "display_name": "Josh Crozier", "link": "https://stackoverflow.com/users/2680216/josh-crozier"}, "is_accepted": false, "score": 2, "last_activity_date": 1487111974, "creation_date": 1487111974, "answer_id": 42237563, "question_id": 42237515, "link": "https://stackoverflow.com/questions/42237515/regex-find-word-between-slash-and-matching-keyword-in-url/42237563#42237563", "title": "Regex: find word between slash and matching keyword in url", "body": "<p>You can use a negated character class in combination with the positive lookahead:</p>\n\n<pre><code>[^\\/]+(?=\\/keyword)\n</code></pre>\n\n<p>Explanation:</p>\n\n<ul>\n<li><code>[^\\/]+</code> - Negated character set to match one or more <code>/</code> characters</li>\n<li><code>(?=\\/keyword)</code> - Positive lookahead to match the following <code>/keyword</code> string.</li>\n</ul>\n\n<p>Of course you could also just use a capturing group:</p>\n\n<pre><code>\\/([^\\/]+)\\/keyword\n</code></pre>\n\n<p>The string <code>target</code> would be in the first group.</p>\n"}, {"comments": [{"owner": {"reputation": 2009, "user_id": 20769, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/922e7e3c612566756735b2def78827d8?s=128&d=identicon&r=PG", "display_name": "Joshua", "link": "https://stackoverflow.com/users/20769/joshua"}, "edited": false, "score": 1, "creation_date": 1487112462, "post_id": 42237564, "comment_id": 71634684, "body": "You can use the %r literal to make it slightly more readable. %r{/([^/]+)/keyword/}"}], "tags": [], "owner": {"reputation": 481662, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "is_accepted": true, "score": 3, "last_activity_date": 1487112574, "last_edit_date": 1487112574, "creation_date": 1487111974, "answer_id": 42237564, "question_id": 42237515, "link": "https://stackoverflow.com/questions/42237515/regex-find-word-between-slash-and-matching-keyword-in-url/42237564#42237564", "title": "Regex: find word between slash and matching keyword in url", "body": "<p>You may use</p>\n\n<pre><code>%r{/([^/]+)/keyword/}\n</code></pre>\n\n<p>See the <a href=\"http://rubular.com/r/tIYCkOeWOZ\" rel=\"nofollow noreferrer\">Rubular demo</a> (note that if <code>keyword</code> may appear at the end of the string, you will need to add an alternation at the end - <code>%r{/([^/]+)/keyword(?:/|\\z)}</code>).</p>\n\n<p>The value you need is inside Group 1.</p>\n\n<p><a href=\"http://ideone.com/UhkPGv\" rel=\"nofollow noreferrer\">Ruby demo</a>:</p>\n\n<pre><code>lnk[%r{/([^/]+)/keyword/}, 1]\n</code></pre>\n\n<p><strong>Pattern description</strong>:</p>\n\n<ul>\n<li><code>/</code>  - a slash</li>\n<li><code>([^/]+)</code>  - Capturing group 1 matching one or more chars other than <code>/</code></li>\n<li><code>/keyword/</code> - a literal <code>/keyword/</code> substring.</li>\n</ul>\n"}], "owner": {"reputation": 931, "user_id": 2788619, "user_type": "registered", "accept_rate": 56, "profile_image": "https://graph.facebook.com/100006561616235/picture?type=large", "display_name": "L457", "link": "https://stackoverflow.com/users/2788619/l457"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 780, "favorite_count": 1, "accepted_answer_id": 42237564, "answer_count": 2, "score": 2, "last_activity_date": 1487112574, "creation_date": 1487111766, "question_id": 42237515, "link": "https://stackoverflow.com/questions/42237515/regex-find-word-between-slash-and-matching-keyword-in-url", "title": "Regex: find word between slash and matching keyword in url", "body": "<p>eg:</p>\n\n<pre><code>http://www.domain.com/junk/target/keyword/junk\n</code></pre>\n\n<p>I'm trying to pull the word 'target' from the above url.\nSo far I have the following expression:</p>\n\n<pre><code>(?=\\/).*?(?=\\/keyword\\/)\n</code></pre>\n\n<p>however this pulls everything from the first slash ('//www.domain.com/junk/target')</p>\n"}, {"tags": ["ruby-on-rails", "arrays", "ruby", "regex", "split"], "comments": [{"owner": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "edited": false, "score": 0, "creation_date": 1487110948, "post_id": 42237189, "comment_id": 71634078, "body": "Isn&#39;t it a <a href=\"http://stackoverflow.com/questions/41795017/how-do-i-apply-a-function-to-an-array-and-form-two-separate-arrays\">duplicate</a> from your own question a few weeks ago?"}], "answers": [{"comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1487123454, "post_id": 42237280, "comment_id": 71637951, "body": "Considering that you have the start of line anchor <code>^</code> I don&#39;t understand why you need the the second argument (<code>2</code>)."}, {"owner": {"reputation": 83048, "user_id": 2255089, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZNAsT.jpg?s=128&g=1", "display_name": "Casimir et Hippolyte", "link": "https://stackoverflow.com/users/2255089/casimir-et-hippolyte"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1487124202, "post_id": 42237280, "comment_id": 71638125, "body": "@CarySwoveland: the goal is only to stop the regex engine when the pattern succeeds, this way it doesn&#39;t try to find a second occurrence <i>(less work)</i>. Obviously it doesn&#39;t change the result if you remove the second parameter."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 1, "creation_date": 1487129856, "post_id": 42237280, "comment_id": 71639531, "body": "Ah, and I now see you said that in your answer. Note the following. <code>yourstring = &quot;A b\\nB c&quot;; yourstring.split(&#47;(?&lt;=^[ab])\\s+&#47;i) #=&gt; [&quot;A&quot;, &quot;b\\nB&quot;, &quot;c&quot;]; yourstring.split(&#47;(?&lt;=^[ab])\\s+&#47;i, 2) #=&gt; [&quot;A&quot;, &quot;b\\nB c&quot;]; yourstring.split(&#47;(?&lt;=\\A[ab])\\s+&#47;i)  #=&gt; [&quot;A&quot;, &quot;b\\nB c&quot;]</code>."}], "tags": [], "owner": {"reputation": 83048, "user_id": 2255089, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZNAsT.jpg?s=128&g=1", "display_name": "Casimir et Hippolyte", "link": "https://stackoverflow.com/users/2255089/casimir-et-hippolyte"}, "is_accepted": true, "score": 1, "last_activity_date": 1487112202, "last_edit_date": 1487112202, "creation_date": 1487110622, "answer_id": 42237280, "question_id": 42237189, "link": "https://stackoverflow.com/questions/42237189/having-trouble-splitting-on-a-regular-expression-and-putting-the-results-into-an/42237280#42237280", "title": "Having trouble splitting on a regular expression and putting the results into an array", "body": "<p>Use a lookbehind assertion (that means <em>preceded by</em>):</p>\n\n<pre><code>yourstring.split(/(?&lt;=^[ab])\\s+/i)\n</code></pre>\n\n<p>The main interest of lookaround assertions is that they are only tests, they don't consume characters and are not returned in the match result.</p>\n\n<p>Note that since you only need to split your string once, may be if you set the second parameter of the split method to 2, it will stop the search at the first occurrence (need to be confirmed):</p>\n\n<pre><code> yourstring.split(/(?&lt;=^[ab])\\s+/i, 2)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": false, "score": 0, "last_activity_date": 1487182925, "creation_date": 1487182925, "answer_id": 42257232, "question_id": 42237189, "link": "https://stackoverflow.com/questions/42237189/having-trouble-splitting-on-a-regular-expression-and-putting-the-results-into-an/42257232#42257232", "title": "Having trouble splitting on a regular expression and putting the results into an array", "body": "<p>Here's a method that does not employ a regular expression.</p>\n\n<pre><code>def doit(str)\n  (!str.empty? &amp;&amp; \"ABab\".include?(str[0]) &amp;&amp; str[1] == ' ') ?\n    [str[0], str[2..-1].lstrip] : [str]\nend\n\ndoit 'A lot of stuff'     #=&gt; [\"A\", \"lot of stuff\"] \ndoit 'B     lot of stuff' #=&gt; [\"B\", \"lot of stuff\"] \ndoit 'C lot of stuff'     #=&gt; [\"C lot of stuff\"] \ndoit 'Alot of stuff'      #=&gt; [\"Alot of stuff\"] \ndoit 'B '                 #=&gt; [\"B\", \"\"] \ndoit 'b'                  #=&gt; [\"b\"] \ndoit ''                   #=&gt; [\"\"] \n</code></pre>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user7055375"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 46, "favorite_count": 0, "accepted_answer_id": 42237280, "answer_count": 2, "score": 2, "last_activity_date": 1487182925, "creation_date": 1487110227, "question_id": 42237189, "link": "https://stackoverflow.com/questions/42237189/having-trouble-splitting-on-a-regular-expression-and-putting-the-results-into-an", "title": "Having trouble splitting on a regular expression and putting the results into an array", "body": "<p>I'm using Ruby 2.4.  I'm having trouble splitting on a regular expression and getting the results into an array.  If I have a string like</p>\n\n<pre><code>\"A other stuff\"\n</code></pre>\n\n<p>I want to split the first character from teh rest of the string, only if the first character is an \"A\" or a \"B\" and there is a space after it.  So by those rules, splitting the above would result in</p>\n\n<pre><code>[\"A\", \"other stuff\"]\n</code></pre>\n\n<p>but applying those rules to</p>\n\n<pre><code>\"Aother stuff\"\n</code></pre>\n\n<p>would result in </p>\n\n<pre><code>[\"Aother stuff\"]\n</code></pre>\n\n<p>(because there is no space after the \"A\").  I tried</p>\n\n<pre><code>2.4.0 :007 &gt; str = \"A more\"\n =&gt; \"A more\" \n2.4.0 :009 &gt; str.split(/^([ab])[[:space:]]+/i)\n =&gt; [\"\", \"A\", \"more\"]\n</code></pre>\n\n<p>but there is this annoying blank character at the beginning of my array, whcih I dont' want there. Thanks for the advice.</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 3540, "user_id": 131051, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/1b41d7397afdd0a922953945f1111e55?s=128&d=identicon&r=PG", "display_name": "GSP", "link": "https://stackoverflow.com/users/131051/gsp"}, "edited": false, "score": 0, "creation_date": 1487110483, "post_id": 42237162, "comment_id": 71633870, "body": "Because you have enabled WebMock in your tests <i>all</i> attempts to make a network connection cause the <code>WebMock::NetConnectNotAllowedError</code> From what you posted I would have assumed that the <code>NightLiaison::HttpConnection.open</code> is properly mocked but maybe it&#39;s not?"}, {"owner": {"reputation": 51, "user_id": 4955223, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/e7771f948780e193bf9ce77c77c54264?s=128&d=identicon&r=PG&f=1", "display_name": "NuLLByt3", "link": "https://stackoverflow.com/users/4955223/nullbyt3"}, "reply_to_user": {"reputation": 3540, "user_id": 131051, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/1b41d7397afdd0a922953945f1111e55?s=128&d=identicon&r=PG", "display_name": "GSP", "link": "https://stackoverflow.com/users/131051/gsp"}, "edited": false, "score": 0, "creation_date": 1487111552, "post_id": 42237162, "comment_id": 71634339, "body": "Your are right Nightliason::HttpConnection.open is not mock in spec. Do I need to create a webmock stub request?"}], "answers": [{"comments": [{"owner": {"reputation": 51, "user_id": 4955223, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/e7771f948780e193bf9ce77c77c54264?s=128&d=identicon&r=PG&f=1", "display_name": "NuLLByt3", "link": "https://stackoverflow.com/users/4955223/nullbyt3"}, "edited": false, "score": 0, "creation_date": 1487112636, "post_id": 42237445, "comment_id": 71634742, "body": "I appreciate help, I&#39;m getting different error at exception level &quot;but nothing was raised&quot;"}, {"owner": {"reputation": 26120, "user_id": 219883, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/c35b5b0f9e7cce48864f4f1545ead995?s=128&d=identicon&r=PG", "display_name": "Taryn East", "link": "https://stackoverflow.com/users/219883/taryn-east"}, "reply_to_user": {"reputation": 51, "user_id": 4955223, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/e7771f948780e193bf9ce77c77c54264?s=128&d=identicon&r=PG&f=1", "display_name": "NuLLByt3", "link": "https://stackoverflow.com/users/4955223/nullbyt3"}, "edited": false, "score": 0, "creation_date": 1487113429, "post_id": 42237445, "comment_id": 71635023, "body": "So now you need to figure out why your code is failing this test ;)"}, {"owner": {"reputation": 51, "user_id": 4955223, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/e7771f948780e193bf9ce77c77c54264?s=128&d=identicon&r=PG&f=1", "display_name": "NuLLByt3", "link": "https://stackoverflow.com/users/4955223/nullbyt3"}, "edited": false, "score": 1, "creation_date": 1487113874, "post_id": 42237445, "comment_id": 71635189, "body": "I have feeling code issue, I need to do further debugging :). Thank you!"}], "tags": [], "owner": {"reputation": 26120, "user_id": 219883, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/c35b5b0f9e7cce48864f4f1545ead995?s=128&d=identicon&r=PG", "display_name": "Taryn East", "link": "https://stackoverflow.com/users/219883/taryn-east"}, "is_accepted": false, "score": 1, "last_activity_date": 1487111459, "creation_date": 1487111459, "answer_id": 42237445, "question_id": 42237162, "link": "https://stackoverflow.com/questions/42237162/ruby-how-to-test-against-an-exception/42237445#42237445", "title": "Ruby: how to test against an exception", "body": "<p>Looks like it fails when it tries <code>open</code> - if you mock that too, it could work. Try something like:</p>\n\n<pre><code>it 'raises exception fetching auditables' do\n  open_mock = double\n  allow(open_mock).to receive(:get).and_raise(StandardError)\n  allow(NightLiaison::HttpConnection).to receive(:open).and_return(open_mock)\n  expect { described_class.fetch_auditables }.to raise_error('Fetching auditables raised an exception')\nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 363, "user_id": 2272145, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ebc232d2f2cf15b4b0481b8b8b8f66ba?s=128&d=identicon&r=PG", "display_name": "LucasM", "link": "https://stackoverflow.com/users/2272145/lucasm"}, "is_accepted": false, "score": 1, "last_activity_date": 1487111583, "creation_date": 1487111583, "answer_id": 42237470, "question_id": 42237162, "link": "https://stackoverflow.com/questions/42237162/ruby-how-to-test-against-an-exception/42237470#42237470", "title": "Ruby: how to test against an exception", "body": "<p>Try:</p>\n\n<pre><code>allow(NightLiaison::HttpConnection).to receive_message_chain(:open, :get) { raise StandardError }\n</code></pre>\n"}], "owner": {"reputation": 51, "user_id": 4955223, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/e7771f948780e193bf9ce77c77c54264?s=128&d=identicon&r=PG&f=1", "display_name": "NuLLByt3", "link": "https://stackoverflow.com/users/4955223/nullbyt3"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 380, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1487111583, "creation_date": 1487110102, "question_id": 42237162, "link": "https://stackoverflow.com/questions/42237162/ruby-how-to-test-against-an-exception", "title": "Ruby: how to test against an exception", "body": "<p>I'm new to Ruby, I would like to write a spec against logger expection using allow. Please help, thank you. </p>\n\n<p>Current spec</p>\n\n<pre><code>    it 'raises exception fetching auditables' do\n  allow(NightLiaison::HttpConnection.open).to receive(:get).and_raise(StandardError)\n  expect { described_class.fetch_auditables }.to raise_error('Fetching auditables raised an exception')\nend\n</code></pre>\n\n<p>end</p>\n\n<p>Method:</p>\n\n<pre><code>    def self.fetch_auditables\n    HttpConnection.open.get AppConfig.api.nightliaison.fetch_auditables\n     rescue =&gt; e\n        LOGGER.error('Fetching auditables raised an exception', exception: e)\n        Faraday::Response.new\n      end\n</code></pre>\n\n<p>Error Message:</p>\n\n<pre><code>got #&lt;WebMock::NetConnectNotAllowedError: Real HTTP connections are disabled. Unregistered request: GET h... =&gt; 200, :body =&gt; \"\", :headers =&gt; {})\n</code></pre>\n"}, {"tags": ["ruby", "gnu-make", "rbenv"], "comments": [{"owner": {"reputation": 30418, "user_id": 823617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DmWH1.png?s=128&g=1", "display_name": "Casper", "link": "https://stackoverflow.com/users/823617/casper"}, "edited": false, "score": 0, "creation_date": 1487111275, "post_id": 42236877, "comment_id": 71634232, "body": "I think you&#39;ve installed Ruby with Homebrew previously. But that installation (<code>&#47;usr&#47;local&#47;opt&#47;ruby</code>) seems broken. You need to uninstall the Homebrew version and try again. Someone had a similar issue here: <a href=\"https://github.com/rbenv/rbenv/issues/886\" rel=\"nofollow noreferrer\">github.com/rbenv/rbenv/issues/886</a>"}, {"owner": {"reputation": 30418, "user_id": 823617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DmWH1.png?s=128&g=1", "display_name": "Casper", "link": "https://stackoverflow.com/users/823617/casper"}, "edited": false, "score": 0, "creation_date": 1487111603, "post_id": 42236877, "comment_id": 71634352, "body": "Also see this in case you broke your system Ruby <a href=\"http://stackoverflow.com/a/8864749/823617\">stackoverflow.com/a/8864749/823617</a>"}, {"owner": {"reputation": 31, "user_id": 6197866, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1swiF.jpg?s=128&g=1", "display_name": "Michael Henry", "link": "https://stackoverflow.com/users/6197866/michael-henry"}, "reply_to_user": {"reputation": 30418, "user_id": 823617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DmWH1.png?s=128&g=1", "display_name": "Casper", "link": "https://stackoverflow.com/users/823617/casper"}, "edited": false, "score": 0, "creation_date": 1487181361, "post_id": 42236877, "comment_id": 71671228, "body": "Thanks for your input - I had already seen those two posts, and none of the suggestions worked. I even tried booting into the mac recovery partition and reinstalling Sierra - then I installed homebrew, rbenv, and the newest version of the Xcode command line tools. I STILL get the same error. Any thoughts?"}, {"owner": {"reputation": 31, "user_id": 6197866, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1swiF.jpg?s=128&g=1", "display_name": "Michael Henry", "link": "https://stackoverflow.com/users/6197866/michael-henry"}, "reply_to_user": {"reputation": 30418, "user_id": 823617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DmWH1.png?s=128&g=1", "display_name": "Casper", "link": "https://stackoverflow.com/users/823617/casper"}, "edited": false, "score": 0, "creation_date": 1487181636, "post_id": 42236877, "comment_id": 71671409, "body": "Also, this is the terminal output when I <code>echo $PATH</code>:  <code>&#47;Users&#47;michaelhenry&#47;.rbenv&#47;shims:&#47;Users&#47;michaelhenry&#47;.rbenv&#47;&zwnj;&#8203;bin:&#47;usr&#47;local&#47;bin:&#47;&zwnj;&#8203;Users&#47;michaelhenry&#47;.&zwnj;&#8203;rbenv&#47;shims:&#47;Users&#47;m&zwnj;&#8203;ichaelhenry&#47;.rbenv&#47;b&zwnj;&#8203;in:&#47;usr&#47;local&#47;Cellar&zwnj;&#8203;&#47;coreutils&#47;8.26&#47;libe&zwnj;&#8203;xec&#47;gnubin:&#47;usr&#47;loca&zwnj;&#8203;l&#47;bin:&#47;usr&#47;local&#47;bin&zwnj;&#8203;:&#47;usr&#47;local&#47;bin:&#47;usr&zwnj;&#8203;&#47;bin:&#47;bin:&#47;usr&#47;sbin:&zwnj;&#8203;&#47;sbin:&#47;Library&#47;Frame&zwnj;&#8203;works&#47;Mono.framework&zwnj;&#8203;&#47;Versions&#47;Current&#47;Co&zwnj;&#8203;mmands</code>"}, {"owner": {"reputation": 30418, "user_id": 823617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DmWH1.png?s=128&g=1", "display_name": "Casper", "link": "https://stackoverflow.com/users/823617/casper"}, "edited": false, "score": 0, "creation_date": 1487182540, "post_id": 42236877, "comment_id": 71671947, "body": "Ok in that case please append the results of the following commands to your question: <code>which ruby</code> and <code>head &#47;usr&#47;local&#47;bin&#47;make</code>."}, {"owner": {"reputation": 30418, "user_id": 823617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DmWH1.png?s=128&g=1", "display_name": "Casper", "link": "https://stackoverflow.com/users/823617/casper"}, "edited": false, "score": 0, "creation_date": 1487182734, "post_id": 42236877, "comment_id": 71672056, "body": "Why do you even have a <code>make</code> command in <code>&#47;usr&#47;local&#47;bin</code>. That doesn&#39;t usually belong there. How did it get there?"}, {"owner": {"reputation": 31, "user_id": 6197866, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1swiF.jpg?s=128&g=1", "display_name": "Michael Henry", "link": "https://stackoverflow.com/users/6197866/michael-henry"}, "reply_to_user": {"reputation": 30418, "user_id": 823617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DmWH1.png?s=128&g=1", "display_name": "Casper", "link": "https://stackoverflow.com/users/823617/casper"}, "edited": false, "score": 0, "creation_date": 1487183255, "post_id": 42236877, "comment_id": 71672352, "body": "I have <i>no idea</i> how <code>make</code> got into that directory. In my efforts to fix the problem, I am sure that I messed it up more... Anyway, here are the results of the commands:  <code>$ which ruby &#47;usr&#47;bin&#47;ruby</code>  <code>#!&#47;usr&#47;local&#47;opt&#47;ruby&#47;bin&#47;ruby  # This file was generated by RubyGems. # # The application &#39;make&#39; is installed as part of a gem, and # this file is here to facilitate running it. #  require &#39;rubygems&#39;</code>"}, {"owner": {"reputation": 31, "user_id": 6197866, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1swiF.jpg?s=128&g=1", "display_name": "Michael Henry", "link": "https://stackoverflow.com/users/6197866/michael-henry"}, "reply_to_user": {"reputation": 30418, "user_id": 823617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DmWH1.png?s=128&g=1", "display_name": "Casper", "link": "https://stackoverflow.com/users/823617/casper"}, "edited": false, "score": 0, "creation_date": 1487183506, "post_id": 42236877, "comment_id": 71672515, "body": "Also, how do I get rid of the duplicate entries in my <code>$PATH</code>? My <code>.bash_profile</code> does not have any duplicates, as far as I can tell, and my <code>.bashrc</code> file is empty."}, {"owner": {"reputation": 30418, "user_id": 823617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DmWH1.png?s=128&g=1", "display_name": "Casper", "link": "https://stackoverflow.com/users/823617/casper"}, "edited": false, "score": 0, "creation_date": 1487183551, "post_id": 42236877, "comment_id": 71672537, "body": "Put that text in the question..the formatting will be much better there and it complements the question, making it easier to understand. In any case let&#39;s move it out of the way for now: <code>sudo mv &#47;usr&#47;local&#47;bin&#47;make &#47;usr&#47;local&#47;bin&#47;make_old</code>. Then see if you can get everything to work."}, {"owner": {"reputation": 31, "user_id": 6197866, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1swiF.jpg?s=128&g=1", "display_name": "Michael Henry", "link": "https://stackoverflow.com/users/6197866/michael-henry"}, "reply_to_user": {"reputation": 30418, "user_id": 823617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DmWH1.png?s=128&g=1", "display_name": "Casper", "link": "https://stackoverflow.com/users/823617/casper"}, "edited": false, "score": 0, "creation_date": 1487184626, "post_id": 42236877, "comment_id": 71673243, "body": "Holy crap, that worked. I cannot thank you enough."}, {"owner": {"reputation": 30418, "user_id": 823617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DmWH1.png?s=128&g=1", "display_name": "Casper", "link": "https://stackoverflow.com/users/823617/casper"}, "edited": false, "score": 0, "creation_date": 1487185068, "post_id": 42236877, "comment_id": 71673514, "body": "Great :) Somehow you managed to install a ruby gem named &quot;make&quot; into <code>&#47;usr&#47;local&#47;bin</code>. Have no clue how it got there, but I suspect it should never be there ever. So you can just keep it named as <code>make_old</code>, or probably even remove it. As for the PATH, you have to research how the shell loads its PATH variable (there are files in <code>&#47;etc</code> also), but the problem could be coming from rbenv setup too. You&#39;ll figure it out eventually if you research a bit (or make a new SO question). Good luck."}, {"owner": {"reputation": 31, "user_id": 6197866, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1swiF.jpg?s=128&g=1", "display_name": "Michael Henry", "link": "https://stackoverflow.com/users/6197866/michael-henry"}, "reply_to_user": {"reputation": 30418, "user_id": 823617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DmWH1.png?s=128&g=1", "display_name": "Casper", "link": "https://stackoverflow.com/users/823617/casper"}, "edited": false, "score": 0, "creation_date": 1487185732, "post_id": 42236877, "comment_id": 71673874, "body": "Thanks, I really appreciate it  :)"}], "owner": {"reputation": 31, "user_id": 6197866, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1swiF.jpg?s=128&g=1", "display_name": "Michael Henry", "link": "https://stackoverflow.com/users/6197866/michael-henry"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 336, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1487183856, "creation_date": 1487108910, "last_edit_date": 1487183856, "question_id": 42236877, "link": "https://stackoverflow.com/questions/42236877/ruby-build-failed-with-rbenv-cannot-locate-make", "title": "Ruby build failed with rbenv - cannot locate make?", "body": "<p>I have just wasted 2 days of my life trying to figure this out, and I need some help please!</p>\n\n<p>I am a complete noob to ruby, and all I want to do is install octopress so that I can have a blog. I think I messed up my mac dev environment somehow - when I try to install ruby with rbenv, it fails and tells me that it cannot find make? How do I fix this? </p>\n\n<p>Thanks for your help in advance.</p>\n\n<p>Mike    </p>\n\n<pre><code>Installing ruby-2.4.0...\n\nBUILD FAILED (OS X 10.12.3 using ruby-build 20170201)\n\nInspect or clean up the working tree at /var/folders/d7/xhd01lr92rvglw0vw9hzkx1m0000gn/T/ruby-build.20170214143528.84918\nResults logged to /var/folders/d7/xhd01lr92rvglw0vw9hzkx1m0000gn/T/ruby-build.20170214143528.84918.log\n\nLast 10 log lines:\nchecking for sigsetjmp as a macro or function... yes\nchecking for setjmp type... _setjmp\nchecking for prefix of external symbols... _\nchecking pthread.h usability... yes\nchecking pthread.h presence... yes\nchecking for pthread.h... yes\nchecking if make is GNU make... ./configure: /usr/local/bin/make: /usr/local/opt/ruby/bin/ruby: bad interpreter: No such file or directory\nno\nchecking for safe null command for make... configure: error: no candidate for safe null command\n/usr/local/bin/ruby-build: /usr/local/bin/make: /usr/local/opt/ruby/bin/ruby: bad interpreter: No such file or directory\n</code></pre>\n\n<p>Here is the output of the following commands:</p>\n\n<pre><code>$ which ruby\n/usr/bin/ruby\n\nhead /usr/local/bin/make\n#!/usr/local/opt/ruby/bin/ruby\n#\n# This file was generated by RubyGems.\n#\n# The application 'make' is installed as part of a gem, and\n# this file is here to facilitate running it.\n#\n\nrequire 'rubygems'\n</code></pre>\n\n<p>And here is the output of <code>echo $PATH</code>:</p>\n\n<pre><code>/Users/michaelhenry/.rbenv/shims:/Users/michaelhenry/.rbenv/bin:/usr/local/bin:/Users/michaelhenry/.rbenv/shims:/Users/michaelhenry/.rbenv/bin:/usr/local/Cellar/coreutils/8.26/libexec/gnubin:/usr/local/bin:/usr/local/bin:/usr/local/bin:/usr/bin:/bin:/usr/sbin:/sbin:/Library/Frameworks/Mono.framework/Versions/Current/Commands\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-3", "ruby-on-rails-4"], "answers": [{"tags": [], "owner": {"reputation": 363, "user_id": 2272145, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ebc232d2f2cf15b4b0481b8b8b8f66ba?s=128&d=identicon&r=PG", "display_name": "LucasM", "link": "https://stackoverflow.com/users/2272145/lucasm"}, "is_accepted": true, "score": 0, "last_activity_date": 1487110726, "creation_date": 1487110726, "answer_id": 42237304, "question_id": 42236106, "link": "https://stackoverflow.com/questions/42236106/rails-how-to-build-on-iteration/42237304#42237304", "title": "Rails how to build on iteration", "body": "<p>Your question lacks information about models and relations.\nWith so little knowledge I am only guessing.\nTry this:</p>\n\n<pre><code>@product = current_vitrine.products.build(params[:product])\n\nif @product.save\n  if params[:images] &amp;&amp; params[:images][:ifoto]\n    params[:images][:ifoto].values.each do |ifoto|\n      @product.images.create(ifoto: ifoto)\n    end\n  end\nend\n\nformat.json { render :nothing =&gt; true }\n</code></pre>\n"}], "owner": {"reputation": 23, "user_id": 7565225, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/55c3cd0355f540d6b4e9df4d6923cfdf?s=128&d=identicon&r=PG&f=1", "display_name": "japalow", "link": "https://stackoverflow.com/users/7565225/japalow"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 78, "favorite_count": 0, "accepted_answer_id": 42237304, "answer_count": 1, "score": 1, "last_activity_date": 1487110726, "creation_date": 1487105983, "question_id": 42236106, "link": "https://stackoverflow.com/questions/42236106/rails-how-to-build-on-iteration", "title": "Rails how to build on iteration", "body": "<p>After trying to save a set of images with dropzone without iteration. i switch to iterating the images and try to save on the loop. but rails spitting </p>\n\n<blockquote>\n  <p>ActiveRecord::StatementInvalid at /products\n  =========================================== > SQLite3::ConstraintException: NOT NULL constraint failed:\n  images.product_id: INSERT INTO \"images\" (\"created_at\", \"ifoto\",\n  \"product_data_id\", \"product_id\", \"updated_at\") VALUES (?, ?, ?, ?, ?)\n  app/controllers/products_controller.rb, line 214\n  ------------------------------------------------ <code>ruby 209 210 if params[:images] &amp;&amp; params[:images][:ifoto] 211\n  params[:images][:ifoto].values.each do |ifoto| 212 213 @image.ifoto =\n  ifoto &gt; 214 @image.save 215 216 217 end 218 render :nothing =&gt; true\n  219</code> App backtrace ------------- -\n  app/controllers/products_controller.rb:214:in <code>block (3 levels) in\n  create' - app/controllers/products_controller.rb:211:in</code>block (2\n  levels) in create' - app/controllers/products_controller.rb:137:in\n  `create' Full backtrace --</p>\n</blockquote>\n\n<p>here is the dropzone code</p>\n\n<pre><code> format.json do\n     @product = current_vitrine.products.build(params[:product])\n        @image =  @product.images.build(params[:images])\n\n\n\nif params[:images] &amp;&amp; params[:images][:ifoto]\n       params[:images][:ifoto].values.each do |ifoto|\n\n@image.ifoto = ifoto\n  @image.save\n\n\n                    end\n    render :nothing =&gt; true\n\n    end\n  end\n</code></pre>\n\n<p>someone have a hint to this kind of problem?</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 3870, "user_id": 1769777, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/06763dd36a45c8966c7171ba3697847d?s=128&d=identicon&r=PG", "display_name": "Adam", "link": "https://stackoverflow.com/users/1769777/adam"}, "edited": false, "score": 1, "creation_date": 1487102969, "post_id": 42235212, "comment_id": 71629973, "body": "You&#39;re looking to turn your ruby program into a binary. Checkout something like this <a href=\"https://github.com/phusion/traveling-ruby\" rel=\"nofollow noreferrer\">github.com/phusion/traveling-ruby</a>"}, {"owner": {"reputation": 93, "user_id": 1953343, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/afe0060e31beeb361b2a3a7cda00d5e1?s=128&d=identicon&r=PG", "display_name": "Carlos Feliciano Barba", "link": "https://stackoverflow.com/users/1953343/carlos-feliciano-barba"}, "edited": false, "score": 0, "creation_date": 1487103008, "post_id": 42235212, "comment_id": 71629993, "body": "When you say ordinary app what do you mean exactly? Some app that you double-click and runs or a command line application?"}, {"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 1, "creation_date": 1487103213, "post_id": 42235212, "comment_id": 71630098, "body": "On most operating systems, scripts <i>are</i> ordinary apps. There is no difference. You need to clarify your question."}, {"owner": {"reputation": 77, "user_id": 5284966, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/8173e1cf5cd0bbe428a90f860039d257?s=128&d=identicon&r=PG", "display_name": "Luiz Marques", "link": "https://stackoverflow.com/users/5284966/luiz-marques"}, "reply_to_user": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1487171505, "post_id": 42235212, "comment_id": 71663802, "body": "@J&#246;rgWMittag, in that case, I wanted to distribute as a binary, not as a script."}, {"owner": {"reputation": 77, "user_id": 5284966, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/8173e1cf5cd0bbe428a90f860039d257?s=128&d=identicon&r=PG", "display_name": "Luiz Marques", "link": "https://stackoverflow.com/users/5284966/luiz-marques"}, "reply_to_user": {"reputation": 93, "user_id": 1953343, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/afe0060e31beeb361b2a3a7cda00d5e1?s=128&d=identicon&r=PG", "display_name": "Carlos Feliciano Barba", "link": "https://stackoverflow.com/users/1953343/carlos-feliciano-barba"}, "edited": false, "score": 0, "creation_date": 1487171520, "post_id": 42235212, "comment_id": 71663817, "body": "@CarlosFelicianoBarba exactly."}, {"owner": {"reputation": 77, "user_id": 5284966, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/8173e1cf5cd0bbe428a90f860039d257?s=128&d=identicon&r=PG", "display_name": "Luiz Marques", "link": "https://stackoverflow.com/users/5284966/luiz-marques"}, "reply_to_user": {"reputation": 3870, "user_id": 1769777, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/06763dd36a45c8966c7171ba3697847d?s=128&d=identicon&r=PG", "display_name": "Adam", "link": "https://stackoverflow.com/users/1769777/adam"}, "edited": false, "score": 1, "creation_date": 1487172025, "post_id": 42235212, "comment_id": 71664264, "body": "@Adam worked like a charm, thanks :)"}], "answers": [{"tags": [], "owner": {"reputation": 78, "user_id": 4405863, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/i723G.jpg?s=128&g=1", "display_name": "user1415926535897", "link": "https://stackoverflow.com/users/4405863/user1415926535897"}, "is_accepted": false, "score": 2, "last_activity_date": 1487103947, "last_edit_date": 1487103947, "creation_date": 1487103564, "answer_id": 42235445, "question_id": 42235212, "link": "https://stackoverflow.com/questions/42235212/how-to-create-an-executable-for-ruby-console-application/42235445#42235445", "title": "How to create an executable for Ruby console application", "body": "<p>Embedded Ruby (or better mruby) into C or C++</p>\n\n<p>Simple one file with script as text.</p>\n\n<p>Here is example for mruby <a href=\"https://github.com/mruby/mruby/wiki/Hello-World\" rel=\"nofollow noreferrer\">mruby</a>.</p>\n"}], "owner": {"reputation": 77, "user_id": 5284966, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/8173e1cf5cd0bbe428a90f860039d257?s=128&d=identicon&r=PG", "display_name": "Luiz Marques", "link": "https://stackoverflow.com/users/5284966/luiz-marques"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 163, "favorite_count": 0, "closed_date": 1487113956, "answer_count": 1, "score": -1, "last_activity_date": 1487248130, "creation_date": 1487102659, "last_edit_date": 1487248130, "question_id": 42235212, "link": "https://stackoverflow.com/questions/42235212/how-to-create-an-executable-for-ruby-console-application", "closed_reason": "Needs details or clarity", "title": "How to create an executable for Ruby console application", "body": "<p>I'm writing a simple console app, but instead of distributing it as a script (somefile.rb), I want it as a binary file, like an executable.</p>\n\n<p>Any idea?</p>\n"}, {"tags": ["arrays", "ruby", "hash", "hashmap"], "comments": [{"owner": {"reputation": 208794, "user_id": 229044, "user_type": "moderator", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/591426cbbacd4025d920467bad356911?s=128&d=identicon&r=PG&f=1", "display_name": "meagar", "link": "https://stackoverflow.com/users/229044/meagar"}, "edited": false, "score": 2, "creation_date": 1487101783, "post_id": 42234914, "comment_id": 71629339, "body": "What do you expect <code>hash[:name]</code> to return, in the hypothetical world where it were possible to have a key map to multiple values?"}], "answers": [{"tags": [], "owner": {"reputation": 208794, "user_id": 229044, "user_type": "moderator", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/591426cbbacd4025d920467bad356911?s=128&d=identicon&r=PG&f=1", "display_name": "meagar", "link": "https://stackoverflow.com/users/229044/meagar"}, "is_accepted": false, "score": 2, "last_activity_date": 1487101734, "creation_date": 1487101734, "answer_id": 42234952, "question_id": 42234914, "link": "https://stackoverflow.com/questions/42234914/creating-hash-from-an-array-of-values-in-ruby/42234952#42234952", "title": "Creating hash from an array of values in Ruby", "body": "<p>This is impossible. Keys in a hash cannot be duplicated. Each key may only exist once, and map to exactly one value.</p>\n"}], "owner": {"reputation": 1, "user_id": 7564938, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/47468d35a0e693881faf8a5d1bce6672?s=128&d=identicon&r=PG&f=1", "display_name": "erinc35", "link": "https://stackoverflow.com/users/7564938/erinc35"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 127, "favorite_count": 0, "closed_date": 1487101750, "answer_count": 1, "score": -1, "last_activity_date": 1487101734, "creation_date": 1487101585, "question_id": 42234914, "link": "https://stackoverflow.com/questions/42234914/creating-hash-from-an-array-of-values-in-ruby", "closed_reason": "Duplicate", "title": "Creating hash from an array of values in Ruby", "body": "<p>I want to use each item in the array as values in a hash with the same key \"name\".</p>\n\n<p><code>people = [\"Bob\", \"Mary\", \"Sarah\", \"Tim\", \"Maggie\"]</code></p>\n\n<p>I want to get:</p>\n\n<p><code>{ name: =&gt; \"Bob\", name: =&gt; \"Mary\", name: =&gt; \"Sarah\", name: =&gt; \"Tim\", name: =&gt; \"Maggie\"}</code></p>\n\n<p>When I do <code>Hash[people.map {|v| [\"name\", v]}]</code> or </p>\n\n<p><code>people.map{|v| hash['name'] = v}</code></p>\n\n<p>it zips only the last item so I get this as a result :</p>\n\n<pre><code>{\"name\"=&gt;\"Maggie\"}\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "rest-client"], "answers": [{"comments": [{"owner": {"reputation": 2266, "user_id": 6680253, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/7rPyV.png?s=128&g=1", "display_name": "leogoesger", "link": "https://stackoverflow.com/users/6680253/leogoesger"}, "edited": false, "score": 0, "creation_date": 1487105066, "post_id": 42234967, "comment_id": 71631136, "body": "thanks, but I did try that, and it throws out the same error. I just tried to use HTTParty, and it gives out the same error as well."}], "tags": [], "owner": {"reputation": 1843, "user_id": 4067720, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a52c645614505bcaeb65a6c5199158c1?s=128&d=identicon&r=PG", "display_name": "Glyoko", "link": "https://stackoverflow.com/users/4067720/glyoko"}, "is_accepted": true, "score": 2, "last_activity_date": 1487101797, "creation_date": 1487101797, "answer_id": 42234967, "question_id": 42234846, "link": "https://stackoverflow.com/questions/42234846/jsonparsererror-743-unexpected-token-in-ror/42234967#42234967", "title": "JSON::ParserError: 743: unexpected token in ROR", "body": "<p>In your second example, <code>r</code> is not JSON, it is a RestClient::Response object and cannot be parsed. You need to parse the <code>r.body</code> of the RestClient::Response, as you referenced it with <code>a.post.body</code> in your second example.</p>\n\n<pre><code>r = b.post         # =&gt; &lt;RestClient::Response 200 \"{\\n    \\\"auth...\"&gt;\nJSON.parse(r)      # =&gt; JSON::ParserError: ...\nr.body             # =&gt; \"Some valid JSON string\"\nJSON.parse(r.body) # =&gt; Parses \"Some valid JSON string\"\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2266, "user_id": 6680253, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/7rPyV.png?s=128&g=1", "display_name": "leogoesger", "link": "https://stackoverflow.com/users/6680253/leogoesger"}, "is_accepted": false, "score": 0, "last_activity_date": 1487107989, "creation_date": 1487107989, "answer_id": 42236644, "question_id": 42234846, "link": "https://stackoverflow.com/questions/42234846/jsonparsererror-743-unexpected-token-in-ror/42236644#42236644", "title": "JSON::ParserError: 743: unexpected token in ROR", "body": "<p>I am not sure every case of error 743 from JSON is the same, but in my case is caused by the API endpoint. It was slightly different than the one I suppose to use. </p>\n\n<p>So, I would check on your API endpoint URL first if you get this error, and make sure you are using the correct one.</p>\n\n<p>In this case, </p>\n\n<p>I should be using <a href=\"https://www.bloc.io/api/v1/sessions\" rel=\"nofollow noreferrer\">https://www.bloc.io/api/v1/sessions</a></p>\n"}], "owner": {"reputation": 2266, "user_id": 6680253, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/7rPyV.png?s=128&g=1", "display_name": "leogoesger", "link": "https://stackoverflow.com/users/6680253/leogoesger"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 7988, "favorite_count": 0, "accepted_answer_id": 42234967, "answer_count": 2, "score": 3, "last_activity_date": 1487107989, "creation_date": 1487101387, "last_edit_date": 1487104944, "question_id": 42234846, "link": "https://stackoverflow.com/questions/42234846/jsonparsererror-743-unexpected-token-in-ror", "title": "JSON::ParserError: 743: unexpected token in ROR", "body": "<p>I am getting this error when try to parse the response from rest_client. </p>\n\n<p>JSON::ParserError: 743: unexpected token at '{</p>\n\n<pre><code>require 'rest_client'\nrequire 'json'\n\nclass Kele\n    attr_accessor :data\n    def initialize(u,p)\n        #@values = {email: u, password: p}\n        @values = '{\"email\": \"antblessing@gmail.com\", \"password\": \"password\"}'\n        @headers = {:content_type =&gt; 'application/json'}\n        @data = self.post\n    end\n\n    def post\n        response = RestClient.post 'https://private-anon-8506c5665f-blocapi.apiary-mock.com/api/v1/sessions', @values, @headers\n    end\nend\n</code></pre>\n\n<p>In Ruby irb,</p>\n\n<pre><code> r = b.post\n=&gt; &lt;RestClient::Response 200 \"{\\n    \\\"auth...\"&gt;\n\n JSON.parse(r.body)\n=&gt; JSON::ParserError: 743: unexpected token at '{\n\na = Kele.new(1,2)\n=&gt; #&lt;Kele:0x000000042e2e18 @values=\"{\\\"email\\\": \\\"antblessing@gmail.com\\\", \\\"password\\\": \\\"password\\\"}\", @headers={:content_type=&gt;\"application/json\"}, @data=&lt;RestClient::Response 200 \"{\\n    \\\"auth...\"&gt;&gt;\n\n a.post.body\n =&gt; \"{\\n    \\\"auth_token\\\":\\\"eyJ0eXAiOiJKV1QiLCJhhGciOiJIUzI1NiJ9.eyJhcGlfa2V5IjoiYTc2MDZkNTBhYjA3NDE4ZWE4ZmU5NzliY2YxNTM1ZjAiLCJ1c2VyX2lkIjoyMzAzMTExLCJuYW1lIjoiQmVuIE5lZWx5In0.3VXD-FxOoxaGXHu6vmL8g191bl5F_oKe9qj8Khmp9F0\\\",\\n    \\\"user\\\":\\n        {\\n            \\\"id\\\":2307245,\\n            \\\"email:\\\"antblessing@gmail.com\\\",\\n            \\\"created_at\\\":\\\"2015-08-11T16:31:08.836-07:00\\\",\\n            \\\"updated_at\\\":\\\"2015-11-04T13:13:32.457-08:00\\\",\\n            \\\"facebook_id\\\":null,\\n            ...,\\n            \\\"gender\\\":null\\n        }\\n}\"\n</code></pre>\n\n<p>I tried this using HTTParty as well:</p>\n\n<pre><code>require 'HTTParty'\nclass Kele\n    include HTTParty\n    def initialize(email,password)\n        @options = {query: {email: email, password: password}}\n    end\n\n    def post\n        self.class.post('https://private-anon-8506c5665f-blocapi.apiary-mock.com/api/v1/sessions', @options)\n    end\nend\n</code></pre>\n\n<p>I still get this error:</p>\n\n<pre><code> JSON.parse(a.post.body)\n=&gt; JSON::ParserError: 743: unexpected token at '{\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4", "rspec", "ruby-on-rails-5"], "comments": [{"owner": {"reputation": 483, "user_id": 7474561, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc0cb51bd61ff4715e3bec92f79f5f46?s=128&d=identicon&r=PG&f=1", "display_name": "KcUS_unico", "link": "https://stackoverflow.com/users/7474561/kcus-unico"}, "edited": false, "score": 0, "creation_date": 1487101403, "post_id": 42234478, "comment_id": 71629136, "body": "shouldn&#39;t User.address_ids give you exactly that? If you already save the ids as an array you can retrieve the same like that, no?"}, {"owner": {"reputation": 208794, "user_id": 229044, "user_type": "moderator", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/591426cbbacd4025d920467bad356911?s=128&d=identicon&r=PG&f=1", "display_name": "meagar", "link": "https://stackoverflow.com/users/229044/meagar"}, "edited": false, "score": 0, "creation_date": 1487102138, "post_id": 42234478, "comment_id": 71629553, "body": "There&#39;s no built-in way of doing this. Just add the associations you&#39;re after manually, ie <code>user.attributes.tap { |a| a[:address_ids] = a.address_ids }</code>"}], "answers": [{"tags": [], "owner": {"reputation": 16, "user_id": 1751493, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d579dcf40657a9aafc6155e7288414e9?s=128&d=identicon&r=PG", "display_name": "kylegrantlucas", "link": "https://stackoverflow.com/users/1751493/kylegrantlucas"}, "is_accepted": true, "score": 0, "last_activity_date": 1487102422, "creation_date": 1487102422, "answer_id": 42235136, "question_id": 42234478, "link": "https://stackoverflow.com/questions/42234478/how-to-retrieve-a-models-record-attributes-including-has-many-ids-as-a-hash/42235136#42235136", "title": "How to retrieve a model&#39;s record attributes including has_many ids as a hash?", "body": "<p>Not sure if there is a Rails method but you could define it yourself.</p>\n\n<pre><code>def attributes_with_has_many_associations\n  attributes.merge(\n    self\n      .class\n      .reflect_on_all_associations(:has_many)\n      .map(&amp;:plural_name)\n      .map { |as| { as.to_sym =&gt; self.send(as) } }\n      .reduce(&amp;:merge)\n  )\nend\n</code></pre>\n"}], "owner": {"reputation": 2166, "user_id": 1329583, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/d5599fe622fe6b8430b56aba3d79d2c3?s=128&d=identicon&r=PG&f=1", "display_name": "Abdulaziz", "link": "https://stackoverflow.com/users/1329583/abdulaziz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 49, "favorite_count": 0, "accepted_answer_id": 42235136, "answer_count": 1, "score": 0, "last_activity_date": 1487102422, "creation_date": 1487100046, "question_id": 42234478, "link": "https://stackoverflow.com/questions/42234478/how-to-retrieve-a-models-record-attributes-including-has-many-ids-as-a-hash", "title": "How to retrieve a model&#39;s record attributes including has_many ids as a hash?", "body": "<p>Assume I have the following class:    </p>\n\n<pre><code>class User &lt; ActiveRecord::Base\n  has_many :addresses\nend\n</code></pre>\n\n<p>And I'm initializing the following record:<br>\n<code>user = User.new(first_name: \"John\", last_name: \"Doe\", address_ids: [1, 2, 3])\n</code><br>\nThere already exists a convenient method provided by Rails to retrieve the attributes of a model's record:<br>\n<code>user.attributes # =&gt; {first_name: \"John\", last_name: \"Doe\"}\n</code><br>\nHowever, I also need to get a hash that contains the <code>address_ids</code> as well, that is:  </p>\n\n<pre><code>user.attributes_with_has_many_associations \n# =&gt; {first_name: \"John\", last_name: \"Doe\", address_ids: [1, 2, 3]} \n</code></pre>\n\n<p>I'm looking for a <em>general</em> way to do this on any given record(i.e. does not involve reflecting the associations to pull the attributes and end up the polluting the model itself, after all I'm looking for a way to do this purely for testing purposes) or at least to have a method isolated in the test code.  </p>\n"}, {"tags": ["ruby", "rubygems", "sidekiq"], "comments": [{"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1487103092, "post_id": 42234293, "comment_id": 71630042, "body": "Are you sure the <code>pg</code> gem is installed on the machine?"}, {"owner": {"reputation": 3134, "user_id": 3884750, "user_type": "registered", "accept_rate": 62, "profile_image": "https://graph.facebook.com/100003183948251/picture?type=large", "display_name": "Oleg  Sobchuk", "link": "https://stackoverflow.com/users/3884750/oleg-sobchuk"}, "reply_to_user": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1487103700, "post_id": 42234293, "comment_id": 71630364, "body": "sure! I use it for set data, when I create job. And with my other Rails projects"}, {"owner": {"reputation": 3134, "user_id": 3884750, "user_type": "registered", "accept_rate": 62, "profile_image": "https://graph.facebook.com/100003183948251/picture?type=large", "display_name": "Oleg  Sobchuk", "link": "https://stackoverflow.com/users/3884750/oleg-sobchuk"}, "reply_to_user": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1487103757, "post_id": 42234293, "comment_id": 71630407, "body": "it works in ruby script, but not in sidekiq-server file"}], "answers": [{"comments": [{"owner": {"reputation": 3134, "user_id": 3884750, "user_type": "registered", "accept_rate": 62, "profile_image": "https://graph.facebook.com/100003183948251/picture?type=large", "display_name": "Oleg  Sobchuk", "link": "https://stackoverflow.com/users/3884750/oleg-sobchuk"}, "edited": false, "score": 0, "creation_date": 1487137771, "post_id": 42237523, "comment_id": 71641840, "body": "unfortunately, it didn&#39;t help."}], "tags": [], "owner": {"reputation": 17782, "user_id": 1494519, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/af54a0871600db7fbdbb5c558a6e29a3?s=128&d=identicon&r=PG", "display_name": "Mike Perham", "link": "https://stackoverflow.com/users/1494519/mike-perham"}, "is_accepted": false, "score": 2, "last_activity_date": 1487111790, "creation_date": 1487111790, "answer_id": 42237523, "question_id": 42234293, "link": "https://stackoverflow.com/questions/42234293/ruby-sidekiq-require-cannot-load-such-file-pg-loaderror/42237523#42237523", "title": "ruby sidekiq `require&#39;: cannot load such file -- pg (LoadError)", "body": "<p>Always use Bundler to make sure your gems are set up correctly: <code>bundle exec ruby script.rb</code> and <code>bundle exec sidekiq</code></p>\n"}, {"tags": [], "owner": {"reputation": 157, "user_id": 55878, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b11062017757be21a027b71bdbf656cf?s=128&d=identicon&r=PG", "display_name": "Michael Gee", "link": "https://stackoverflow.com/users/55878/michael-gee"}, "is_accepted": true, "score": 1, "last_activity_date": 1487201303, "creation_date": 1487201303, "answer_id": 42262066, "question_id": 42234293, "link": "https://stackoverflow.com/questions/42234293/ruby-sidekiq-require-cannot-load-such-file-pg-loaderror/42262066#42262066", "title": "ruby sidekiq `require&#39;: cannot load such file -- pg (LoadError)", "body": "<p>Try adding <code>gem 'pg'</code> to your <code>Gemfile</code>, and installing it with <code>bundle install</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 629, "user_id": 8122327, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b2a936a33692423f5560172fb1b4ae04?s=128&d=identicon&r=PG&f=1", "display_name": "gsumk", "link": "https://stackoverflow.com/users/8122327/gsumk"}, "is_accepted": false, "score": 0, "last_activity_date": 1543566808, "creation_date": 1543566808, "answer_id": 53553912, "question_id": 42234293, "link": "https://stackoverflow.com/questions/42234293/ruby-sidekiq-require-cannot-load-such-file-pg-loaderror/53553912#53553912", "title": "ruby sidekiq `require&#39;: cannot load such file -- pg (LoadError)", "body": "<p>Cannot load such file means, the specefic file is not available.\nSearch for path <code>bundle show pg</code>.</p>\n\n<p>Sometimes even the gem is not there it is shown because of the gemspec. So, remove the gemspec as well and do <code>bundle install</code>.</p>\n"}], "owner": {"reputation": 3134, "user_id": 3884750, "user_type": "registered", "accept_rate": 62, "profile_image": "https://graph.facebook.com/100003183948251/picture?type=large", "display_name": "Oleg  Sobchuk", "link": "https://stackoverflow.com/users/3884750/oleg-sobchuk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4800, "favorite_count": 0, "accepted_answer_id": 42262066, "answer_count": 3, "score": 0, "last_activity_date": 1543566808, "creation_date": 1487099252, "last_edit_date": 1487189653, "question_id": 42234293, "link": "https://stackoverflow.com/questions/42234293/ruby-sidekiq-require-cannot-load-such-file-pg-loaderror", "title": "ruby sidekiq `require&#39;: cannot load such file -- pg (LoadError)", "body": "<p>I try to build microservice on pure ruby with some additional feature. I use <a href=\"https://github.com/mperham/sidekiq\" rel=\"nofollow noreferrer\">sidekiq</a> for jobs and <a href=\"https://github.com/ged/ruby-pg\" rel=\"nofollow noreferrer\">pg</a> for DB connection.</p>\n\n<p>for start Sidekiq server I use default settings and code:</p>\n\n<pre><code># ./config/sidekiq.rb\n\nrequire 'sidekiq'\nrequire 'pg'  # This doesn't work with \"`require': cannot load such file -- pg (LoadError)\"\nrequire_relative '../jobs/location_jobs/collect_job' # here is my job locates\n\n# If your client is single-threaded, we just need a single connection in our Redis connection pool\nSidekiq.configure_client do |config|\n  config.redis = { url: 'redis://localhost:6379/0', namespace: 'analytic_serv', size: 5 }\nend\n\n# Sidekiq server is multi-threaded so our Redis connection pool size defaults to concurrency (-c)\nSidekiq.configure_server do |config|\n  config.redis = { url: 'redis://localhost:6379/0', namespace: 'analytic_serv' }\nend\n</code></pre>\n\n<p>As you can see I try <code>require</code> PG gem in <code>sidekiq.rb</code>. Actually I use it in another file and use it here only for example.</p>\n\n<p><strong>So, when I try to run my sidekiq-server it raise an exception</strong></p>\n\n<pre><code>bundle exec sidekiq -r ./config/sidekiq.rb -C ./config/sidekiq.yml\n</code></pre>\n\n<p><code>analytic_serv/config/sidekiq.rb:2:in</code>require': cannot load such file -- pg (LoadError)`</p>\n\n<p><strong>it works for simple ruby script what I use for create job, but it doesn't work when I run sidekiq-server.</strong></p>\n\n<p>Please, help. What am I doing wrong?\nHow can I include gem in this case?</p>\n\n<p>Thanks.</p>\n"}, {"tags": ["javascript", "ruby-on-rails", "arrays", "ruby", "google-maps-api-3"], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 7390246, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/382831c055d7c97cacd06b73d13a636f?s=128&d=identicon&r=PG&f=1", "display_name": "Michael Bekker", "link": "https://stackoverflow.com/users/7390246/michael-bekker"}, "edited": false, "score": 0, "creation_date": 1487164833, "post_id": 42234883, "comment_id": 71658852, "body": "Thank you for the reply, I&#39;m still new to both Rails, JS, JQuery and Google maps, and have been following tutorials on the subject. I tried your code, it throws no errors, but does not display the map or any markers. Using Chrome Developer Tools, it also does not throw out any errors, yet does not seem to want to work. I also tried to fiddle with the code a little bit, but to no avail. Could it be that I have to use a markers array for the marker, seeing as though there could be more than one store loaded at a time in the locations array? Thank you again for any help."}], "tags": [], "owner": {"reputation": 996, "user_id": 240952, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/Oz7Kp.png?s=128&g=1", "display_name": "Orlando", "link": "https://stackoverflow.com/users/240952/orlando"}, "is_accepted": false, "score": 1, "last_activity_date": 1487101493, "creation_date": 1487101493, "answer_id": 42234883, "question_id": 42234198, "link": "https://stackoverflow.com/questions/42234198/ruby-on-rails-geocoder-objects-as-google-map-marker-array/42234883#42234883", "title": "Ruby on Rails - Geocoder objects as google map marker array", "body": "<p>You're mixing your Javascript with your Ruby code in a way that doesn't make any sense. The reason it works with one is that when you execute it with a single object in the @locations array, it runs once and outputs that Javascript correctly. When it has > 1 object, it's basically duplicating the contents of your <code>initMap</code> Javascript method.</p>\n\n<p>Assuming you're using jQuery, here's a way that would work:</p>\n\n<pre><code>&lt;%- @locations.map {|store| \"&lt;div id='store_#{store.id}' class='store-object' data-latitude='#{store.latitude}' data-longitude='#{store.longitude}' data-name='#{store.name}' data-path='#{store_path(store)}'&gt;&lt;/div&gt;\".html_safe} %&gt;\n\nfunction initMap() {\n  var $stores = $(\".store-object\");\n  $stores.each(function() {\n    var lat = $(this).data(\"latitude\");\n    var lng = $(this).data(\"longitude\");\n    var mylatlng = {lat: lat, lng: lng}\n\n    var map = new google.maps.Map(document.getElementById('map'), {\n      zoom: 15,\n      center: mylatlng\n    }); \n\n    var marker = new google.maps.Marker({\n      position: mylatlng,\n      map: map,\n      animation: google.maps.Animation.DROP,\n    });\n\n    google.maps.event.addListener(marker, 'click', function () {\n      var c = confirm('Would you like to visit this store?')\n      if (c === true) {\n        window.location.href = $(this).data(\"path\");  \n      }\n      if (c === false) {\n        window.location.href = '&lt;%= dashboard_path %&gt;';   \n      }\n    });\n\n    var contentString = 'Please click on this Marker to visit' + ' ' + $(this).data(\"name\");   \n\n    var infowindow = new google.maps.InfoWindow({\n        content: contentString\n    });\n\n    google.maps.event.addListenerOnce(map, 'tilesloaded', function() {\n      infowindow.open(map, marker);\n    });  \n  });\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 11, "user_id": 7390246, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/382831c055d7c97cacd06b73d13a636f?s=128&d=identicon&r=PG&f=1", "display_name": "Michael Bekker", "link": "https://stackoverflow.com/users/7390246/michael-bekker"}, "is_accepted": false, "score": 0, "last_activity_date": 1487527724, "creation_date": 1487527724, "answer_id": 42330905, "question_id": 42234198, "link": "https://stackoverflow.com/questions/42234198/ruby-on-rails-geocoder-objects-as-google-map-marker-array/42330905#42330905", "title": "Ruby on Rails - Geocoder objects as google map marker array", "body": "<p>Thank you @Orlando for pointing me in the right direction. I managed to solve my problem by using JSON and a JS loop for the markers and infowindows. I did not changed anything in my controller and the revised code is shown below.</p>\n\n<pre><code>var map;\n\nfunction initMap () {\n    map = new google.maps.Map(document.getElementById('map'), {\n      center: {lat: &lt;%= params[:latitude] %&gt;, lng: &lt;%= params[:longitude] %&gt;},\n      zoom: 18,\n      scrollwheel: false,\n});\n\nvar json = &lt;%= raw @locations.map.to_json {|store|}.html_safe %&gt;;\n\nfor (var i = 0, length = json.length; i &lt; length; i++) {\nvar data = json[i],\n  LatLng = {lat: data.latitude, lng: data.longitude};\n\nvar marker = new google.maps.Marker({\nposition: LatLng,\nmap: map,\nanimation: google.maps.Animation.DROP\n});\n\ngoogle.maps.event.addListener(marker, 'click', function () {\n      var c = confirm('Would you like to visit this store?')\n      if (c === true) {\n      window.location.href = \"stores/\" + data.id;\n      }    \n      if (c === false) {\n      window.location.href = '&lt;%= dashboard_path %&gt;';   \n      }\n  });\n\n    var infowindow = new google.maps.InfoWindow();\n    infowindow.setContent('Click the Marker to visit' + ' ' + data.storename);\n    infowindow.open(map, marker);\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 7390246, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/382831c055d7c97cacd06b73d13a636f?s=128&d=identicon&r=PG&f=1", "display_name": "Michael Bekker", "link": "https://stackoverflow.com/users/7390246/michael-bekker"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 259, "favorite_count": 1, "answer_count": 2, "score": 1, "last_activity_date": 1487527724, "creation_date": 1487098948, "question_id": 42234198, "link": "https://stackoverflow.com/questions/42234198/ruby-on-rails-geocoder-objects-as-google-map-marker-array", "title": "Ruby on Rails - Geocoder objects as google map marker array", "body": "<p>I'm currently developing a sales rep tracking tool and am stuck at showing a Markers array for the geocoded objects in a map. I'm using geocoder's near function to find geocoded objects 0.5km's from my location passed via the url. My current code works as long as there is only one object within that radius and I know that I need to use an Array for showing more than one object, but I've been stuck at this for the past 2 weeks.</p>\n\n<pre><code>stores_controller.rb\ndef index\n    @latitude = params[:latitude].to_f\n    @longitude = params[:longitude].to_f\n    @stores = current_user.stores\n    @locations = @stores.near([@latitude, @longitude], 0.5)\nend\n</code></pre>\n\n<p>The map on my stores/index.html.erb</p>\n\n<pre><code>function initMap() {\n    &lt;% @locations.each do |store| %&gt;\n    var lat = &lt;%= store.latitude %&gt;\n    var lng = &lt;%= store.longitude %&gt;\n    var mylatlng = {lat: lat, lng: lng}\n\n    var map = new google.maps.Map(document.getElementById('map'), {\n      zoom: 15,\n      center: mylatlng\n    }); \n\n    var marker = new google.maps.Marker({\n      position: mylatlng,\n      map: map,\n      animation: google.maps.Animation.DROP,\n    });\n      google.maps.event.addListener(marker, 'click', function () {\n      var c = confirm('Would you like to visit this store?')\n      if (c === true) {\n      window.location.href = '&lt;%= store_path(store) %&gt;';  \n      }\n      if (c === false) {\n      window.location.href = '&lt;%= dashboard_path %&gt;';   \n      }\n\n    });\n\n    var contentString = 'Please click on this Marker to visit' + ' ' + '&lt;%= store.storename %&gt;';   \n\n    var infowindow = new google.maps.InfoWindow({\n        content: contentString\n    });\n    google.maps.event.addListenerOnce(map, 'tilesloaded', function() {\n    infowindow.open(map, marker);\n    });  \n    }\n    &lt;% end %&gt;\n</code></pre>\n\n<p>The way the app is set up there will be at most two or 3 objects at a time, and I know that json is an option, but I'm hopeful that there would be a way to avoid doing that. All of the resources I've read about map arrays involve manually passing the arrays parameter's, but I need to do it dynamically, seeing as though the object will vary from rep to rep.</p>\n\n<p>Thanks in advance for any assistance.</p>\n"}, {"tags": ["ruby", "utf-8", "facter"], "answers": [{"tags": [], "owner": {"reputation": 193, "user_id": 6500563, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/79d8d08238533616559c33c5650255b1?s=128&d=identicon&r=PG&f=1", "display_name": "mila002", "link": "https://stackoverflow.com/users/6500563/mila002"}, "is_accepted": false, "score": 0, "last_activity_date": 1487107801, "creation_date": 1487107801, "answer_id": 42236594, "question_id": 42234051, "link": "https://stackoverflow.com/questions/42234051/invalid-byte-sequence-in-utf-8-ruby-facter/42236594#42236594", "title": "Invalid byte sequence in UTF-8 Ruby facter", "body": "<p>I've figured it out so I answer to myself.</p>\n\n<pre><code>array.each do |item|\n    temp_data &lt;&lt; Facter::Core::Execution.exec(\"net user #{item} /DOMAIN\")\nend\nsearch_text = %r{comment|Local}\nusers_data = []\ntemp_data.each do |line|\n    line.encode!('UTF-16', 'UTF-8', :invalid =&gt; :replace, :replace =&gt; '')\n    line.encode!('UTF-8', 'UTF-16')\n    line.each_line do |num|\n    users_data &lt;&lt; (num) unless num =~ search_text\n    end\nend\n</code></pre>\n"}], "owner": {"reputation": 193, "user_id": 6500563, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/79d8d08238533616559c33c5650255b1?s=128&d=identicon&r=PG&f=1", "display_name": "mila002", "link": "https://stackoverflow.com/users/6500563/mila002"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 426, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1487107801, "creation_date": 1487098422, "question_id": 42234051, "link": "https://stackoverflow.com/questions/42234051/invalid-byte-sequence-in-utf-8-ruby-facter", "title": "Invalid byte sequence in UTF-8 Ruby facter", "body": "<p>I'm trying to write a fact for Puppet.</p>\n\n<p>I have an array with usernames <code>array = [\"user1\", \"user2\", \"user3\"]</code> and then a code</p>\n\n<pre><code>array.each do |item|\n    temp_data &lt;&lt; Facter::Core::Execution.exec(\"net user #{item} /DOMAIN\")\nend\nsearch_text = %r{comment|Local}\nusers_data = []\ntemp_data.each do |line|\n    line.each_line do |num|\n    users_data &lt;&lt; (num) unless num =~ search_text\n    end\nend\n</code></pre>\n\n<p>temp_data generates fine, but I get an error <strong>ERROR puppetlabs.facter - error while resolving custom fact \"winusers_domain\": invalid byte sequence in UTF-8</strong> but it doesn't show witch line the error is. Any suggestion?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "localization", "internationalization", "rubygems"], "answers": [{"comments": [{"owner": {"reputation": 1852, "user_id": 2095705, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/61376cbe256a0b1ba361a1773743e4b9?s=128&d=identicon&r=PG", "display_name": "Hank X", "link": "https://stackoverflow.com/users/2095705/hank-x"}, "edited": false, "score": 0, "creation_date": 1566271891, "post_id": 42254067, "comment_id": 101593861, "body": "this one is just for adding the translations that already extracted"}], "tags": [], "owner": {"reputation": 3330, "user_id": 679778, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HRBsS.png?s=128&g=1", "display_name": "glebtv", "link": "https://stackoverflow.com/users/679778/glebtv"}, "is_accepted": false, "score": 1, "last_activity_date": 1487173978, "creation_date": 1487173978, "answer_id": 42254067, "question_id": 42233781, "link": "https://stackoverflow.com/questions/42233781/ruby-on-rails-automatic-string-extraction-for-translation/42254067#42254067", "title": "Ruby on Rails automatic string extraction for translation", "body": "<p>Try <a href=\"https://github.com/glebm/i18n-tasks\" rel=\"nofollow noreferrer\">i18n-tasks</a> gem</p>\n\n<pre><code>$ i18n-tasks add-missing\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 17573, "user_id": 181228, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/729f685b8e8d7e9feed18c177c82e59b?s=128&d=identicon&r=PG", "display_name": "glebm", "link": "https://stackoverflow.com/users/181228/glebm"}, "is_accepted": false, "score": 4, "last_activity_date": 1516136372, "creation_date": 1516136372, "answer_id": 48289733, "question_id": 42233781, "link": "https://stackoverflow.com/questions/42233781/ruby-on-rails-automatic-string-extraction-for-translation/48289733#48289733", "title": "Ruby on Rails automatic string extraction for translation", "body": "<p>There is a number of gems that do this. One list of such gems is maintained on the <a href=\"https://github.com/glebm/i18n-tasks/wiki#extract-plain-strings-to-i18n-keys\" rel=\"nofollow noreferrer\">i18n-tasks wiki</a>:</p>\n\n<blockquote>\n  <ul>\n  <li><a href=\"https://github.com/phrase/slimkeyfy\" rel=\"nofollow noreferrer\">Slimkeyfy</a> extracts plain strings from Slim views and Rails Controllers.</li>\n  <li><a href=\"https://github.com/shaiguitar/haml-i18n-extractor\" rel=\"nofollow noreferrer\">haml-i18n-extractor</a>\n  automates string extraction from HAML.</li>\n  <li><a href=\"https://github.com/balinterdi/i15r\" rel=\"nofollow noreferrer\">i15r</a> for ERB and Haml.</li>\n  <li><a href=\"https://github.com/ProGM/i18n-html_extractor\" rel=\"nofollow noreferrer\">i18n-html_extractor</a> another extractor for ERB with an interactive mode.</li>\n  </ul>\n</blockquote>\n"}], "owner": {"reputation": 2453, "user_id": 800965, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/fMjbN.jpg?s=128&g=1", "display_name": "Aleksandar Pavi\u0107", "link": "https://stackoverflow.com/users/800965/aleksandar-pavi%c4%87"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 728, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1516136372, "creation_date": 1487097427, "last_edit_date": 1508920963, "question_id": 42233781, "link": "https://stackoverflow.com/questions/42233781/ruby-on-rails-automatic-string-extraction-for-translation", "title": "Ruby on Rails automatic string extraction for translation", "body": "<p>I am trying to automatically extract strings from ruby views <strong>.erb</strong> files to <strong>config/lang/</strong> files for example <strong>en.yml</strong> </p>\n\n<p>Is there some updated alternative to this?</p>\n\n<p><a href=\"http://zigzag.github.io/2009/12/17/get-your-local-rails-application-ready-for-i18n.html\" rel=\"nofollow noreferrer\">http://zigzag.github.io/2009/12/17/get-your-local-rails-application-ready-for-i18n.html</a></p>\n\n<p>It is supposed to be a gem tool that will extract strings if used like this:</p>\n\n<pre><code>ready_for_i18n &lt;you view path&gt; &lt;target path&gt;\n</code></pre>\n"}, {"tags": ["ruby", "selenium", "rubygems", "watir", "chronic"], "comments": [{"owner": {"reputation": 44680, "user_id": 1200545, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fbbfea5f6583c16f96fc11ef821cfeee?s=128&d=identicon&r=PG&f=1", "display_name": "Justin Ko", "link": "https://stackoverflow.com/users/1200545/justin-ko"}, "edited": false, "score": 0, "creation_date": 1487098841, "post_id": 42233608, "comment_id": 71627716, "body": "For the 3rd point, are you asking how to write the assertion in the test? It would depend on what assertion library you are using and the markup of the page."}, {"owner": {"reputation": 1, "user_id": 7564569, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b5ccb208c67ee4417ff128c556f68176?s=128&d=identicon&r=PG&f=1", "display_name": "Johnny Lids", "link": "https://stackoverflow.com/users/7564569/johnny-lids"}, "reply_to_user": {"reputation": 44680, "user_id": 1200545, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fbbfea5f6583c16f96fc11ef821cfeee?s=128&d=identicon&r=PG&f=1", "display_name": "Justin Ko", "link": "https://stackoverflow.com/users/1200545/justin-ko"}, "edited": false, "score": 0, "creation_date": 1487188710, "post_id": 42233608, "comment_id": 71675492, "body": "thanks that&#39;s very helpful it&#39;s rspec here&#39;s a snippet:                                require &#39;date&#39; $time = Time.now.strftime(&quot;%m%d%Y%H%M&quot;)   current_date = Date.today \t\tif arg1 == &quot;To date&quot; \t\tdailyops = current_date + 7 \t\tdate = dailyops.strftime(&quot;%m/%d/%Y&quot;).to_s \t\t@browser.text_field(:name,&quot;#{obj_info[1].to_s}&quot;).set &quot;#{date}&quot;"}, {"owner": {"reputation": 44680, "user_id": 1200545, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fbbfea5f6583c16f96fc11ef821cfeee?s=128&d=identicon&r=PG&f=1", "display_name": "Justin Ko", "link": "https://stackoverflow.com/users/1200545/justin-ko"}, "edited": false, "score": 0, "creation_date": 1487198681, "post_id": 42233608, "comment_id": 71680685, "body": "Sorry, I&#39;m not sure what that snippet is trying to illustrate. Can you elaborate on where you are still having problems (eg the code you are trying and what unexpected results you are getting)? Note that you can clarify the question by editing it. Putting code in comments is very difficult to read/copy."}], "answers": [{"tags": [], "owner": {"reputation": 44680, "user_id": 1200545, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fbbfea5f6583c16f96fc11ef821cfeee?s=128&d=identicon&r=PG&f=1", "display_name": "Justin Ko", "link": "https://stackoverflow.com/users/1200545/justin-ko"}, "is_accepted": false, "score": 0, "last_activity_date": 1487098644, "creation_date": 1487098644, "answer_id": 42234120, "question_id": 42233608, "link": "https://stackoverflow.com/questions/42233608/i-need-validate-some-tables-for-past-dates-in-the-past-5-saturdays-from-today-u/42234120#42234120", "title": "I need validate some tables for past dates, in the past 5 Saturdays from today using Chronic gem", "body": "<p>Use \"weeks ago\" to get the Saturday of a previous week:</p>\n\n<pre><code>Chronic.parse('1 week ago Saturday')\n#=&gt; \"2017-02-11 12:00:00 -0500\"\nChronic.parse('2 weeks ago Saturday')\n#=&gt; \"2017-02-04 12:00:00 -0500\"\nChronic.parse('3 weeks ago Saturday')\n#=&gt; \"2017-01-28 12:00:00 -0500\"\nChronic.parse('4 weeks ago Saturday')\n#=&gt; \"2017-01-21 12:00:00 -0500\"\nChronic.parse('5 weeks ago Saturday')\n#=&gt; \"2017-01-14 12:00:00 -0500\"\n</code></pre>\n\n<p>You can format the value returned using <code>#strftime</code>:</p>\n\n<pre><code>Chronic.parse('1 week ago Saturday').strftime(\"%m%d%Y%H%M\")\n#=&gt; \"021120171200\"\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 7564569, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b5ccb208c67ee4417ff128c556f68176?s=128&d=identicon&r=PG&f=1", "display_name": "Johnny Lids", "link": "https://stackoverflow.com/users/7564569/johnny-lids"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 38, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1487098644, "creation_date": 1487096857, "question_id": 42233608, "link": "https://stackoverflow.com/questions/42233608/i-need-validate-some-tables-for-past-dates-in-the-past-5-saturdays-from-today-u", "title": "I need validate some tables for past dates, in the past 5 Saturdays from today using Chronic gem", "body": "<p>I've installed the Chronic gem and while </p>\n\n<p>I can get Chronic.parse('Saturday', :context => :past) to return last Saturday's date but not </p>\n\n<ol>\n<li><p>'5 last saturdays' returns 'nil'</p></li>\n<li><p>I would like it to return in this format: strftime \"%m%d%Y%H%M\" </p></li>\n<li><p>I also can't tag on any methods like .exists? or should ==true so I can use it to validate that those reports were run </p></li>\n<li><p>I would just like to verify that 02/11/2017  02/04/2017 01/28/2017 01/28/2017 01/21/2017 appear as text on the page, but since they will change every week i need logic that will return last 5 Saturdays from now</p></li>\n</ol>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 6596, "user_id": 5021321, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/29f10a1b457e63d44e3a221e89e32c17?s=128&d=identicon&r=PG", "display_name": "Eli Sadoff", "link": "https://stackoverflow.com/users/5021321/eli-sadoff"}, "edited": false, "score": 1, "creation_date": 1487096128, "post_id": 42233372, "comment_id": 71626275, "body": "You can&#39;t compile ruby. Regardless, entity is from some library."}, {"owner": {"reputation": 91121, "user_id": 179125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5594142dcc49a24b1902ec8059181f8d?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan Running", "link": "https://stackoverflow.com/users/179125/jordan-running"}, "edited": false, "score": 0, "creation_date": 1487096324, "post_id": 42233372, "comment_id": 71626390, "body": "Why is this question tagged [distributed]?"}, {"owner": {"reputation": 313, "user_id": 2065276, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/869be8ae7564473c22d949294c7f9e0f?s=128&d=identicon&r=PG", "display_name": "user2065276", "link": "https://stackoverflow.com/users/2065276/user2065276"}, "reply_to_user": {"reputation": 91121, "user_id": 179125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5594142dcc49a24b1902ec8059181f8d?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan Running", "link": "https://stackoverflow.com/users/179125/jordan-running"}, "edited": false, "score": 0, "creation_date": 1487100572, "post_id": 42233372, "comment_id": 71628669, "body": "@Jordan if you notice, the file extension is .dj which stands for distributed jobs"}, {"owner": {"reputation": 313, "user_id": 2065276, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/869be8ae7564473c22d949294c7f9e0f?s=128&d=identicon&r=PG", "display_name": "user2065276", "link": "https://stackoverflow.com/users/2065276/user2065276"}, "edited": false, "score": 0, "creation_date": 1487100607, "post_id": 42233372, "comment_id": 71628692, "body": "please don&#39;t -ve rep without putting a plausible explanation. This is unethical"}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 2, "creation_date": 1487100685, "post_id": 42233372, "comment_id": 71628736, "body": "Welcome to Stack Overflow. Please read &quot;<a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a>&quot; and the linked pages, and &quot;<a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>&quot;. You haven&#39;t told us enough to help you, and it sounds like you are shooting in the dark hoping we&#39;ll write a tutorial for you. Instead, give us more detail, such as where you found that code. Then, if it&#39;s from a gem or an app, research that and see what you learn. <a href=\"http://meta.stackoverflow.com/q/261592/128421\">meta.stackoverflow.com/q/261592/128421</a> will help."}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 2, "creation_date": 1487101004, "post_id": 42233372, "comment_id": 71628904, "body": "The <a href=\"https://stackoverflow.com/questions/tagged/distributed\">distributed</a> tag which is for &quot;Multiple computers working together, using a network to communicate&quot;. It&#39;s not for &quot;distributed jobs&quot; which would be a gem or application. See <a href=\"http://stackoverflow.com/tags/distributed/info\">stackoverflow.com/tags/distributed/info</a> for more information."}, {"owner": {"reputation": 371, "user_id": 2979872, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/4f53dae485d6b73e75472bb3bfc08744?s=128&d=identicon&r=PG&f=1", "display_name": "user2979872", "link": "https://stackoverflow.com/users/2979872/user2979872"}, "edited": false, "score": 0, "creation_date": 1487170335, "post_id": 42233372, "comment_id": 71662903, "body": "I see -ve votes without plausible explanation. If you can&#39;t help a person improve his question, at least stay away from -ve voting. This is very immoral."}, {"owner": {"reputation": 371, "user_id": 2979872, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/4f53dae485d6b73e75472bb3bfc08744?s=128&d=identicon&r=PG&f=1", "display_name": "user2979872", "link": "https://stackoverflow.com/users/2979872/user2979872"}, "reply_to_user": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1487170481, "post_id": 42233372, "comment_id": 71663008, "body": "The question seems perfectly legal and meets all the requirements Jorg W Mittag, @the Tin Man, zx485 and Julian F. Weinert, open up your minds"}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1487180397, "post_id": 42233372, "comment_id": 71670611, "body": "Stack Overflow has the goal of being an online reference site for programming problems. As such the quality of the questions asked, and the answers given, are important. You, and your peers, everyone using the site, is tasked with maintaining that quality. <a href=\"https://meta.stackoverflow.com\">Meta Stack Overflow</a> is where we discuss the needs and goals of the site and make decisions on what are appropriate types of questions. Then we vote on questions and answers to keep the site on path. Your peers determined your question doesn&#39;t meet those goals. We don&#39;t need to open our minds, perhaps you need to align with the goals."}], "answers": [{"comments": [{"owner": {"reputation": 313, "user_id": 2065276, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/869be8ae7564473c22d949294c7f9e0f?s=128&d=identicon&r=PG", "display_name": "user2065276", "link": "https://stackoverflow.com/users/2065276/user2065276"}, "edited": false, "score": 0, "creation_date": 1487101341, "post_id": 42234716, "comment_id": 71629102, "body": "Superb. You are right the command to run this script is dj. The reason for asking this question was to find about DSL and see if only Ruby can be used to run this script."}], "tags": [], "owner": {"reputation": 89316, "user_id": 238886, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/8ca29123b5669b26f9b6ca2c62d9d215?s=128&d=identicon&r=PG", "display_name": "Wayne Conrad", "link": "https://stackoverflow.com/users/238886/wayne-conrad"}, "is_accepted": true, "score": 4, "last_activity_date": 1487100965, "creation_date": 1487100965, "answer_id": 42234716, "question_id": 42233372, "link": "https://stackoverflow.com/questions/42233372/how-to-run-dj-file-type-in-ruby-script-from-terminal/42234716#42234716", "title": "How to run dj file-type in Ruby script from terminal", "body": "<p>Your script is indeed Ruby code, but it is not stand-alone Ruby code.  It is is a program in a Ruby internal DSL.  That DSL is defining the methods \"entity\" and \"action\", which are not a part of Ruby.</p>\n\n<p>Scripts written in a DSL are intended to be executed by that DSL.  There is likely to be another command that should be used to invoke this script.  I don't know what that command will be.  Assuming the command were called \"distributed_jobs\", then you might execute this script thusly:</p>\n\n<pre><code>distributed_jobs test.dj\n</code></pre>\n\n<p>But only the documentation for the DSL you are using can answer how to execute this script.</p>\n"}, {"tags": [], "owner": {"reputation": 67463, "user_id": 203130, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/1RE8c.jpg?s=128&g=1", "display_name": "coreyward", "link": "https://stackoverflow.com/users/203130/coreyward"}, "is_accepted": false, "score": 2, "last_activity_date": 1487101504, "creation_date": 1487101504, "answer_id": 42234887, "question_id": 42233372, "link": "https://stackoverflow.com/questions/42233372/how-to-run-dj-file-type-in-ruby-script-from-terminal/42234887#42234887", "title": "How to run dj file-type in Ruby script from terminal", "body": "<p>In this case, it is frequently useful to look for files named <code>Rakefile</code>, <code>Gemfile</code>, or <code>config.ru</code>.</p>\n\n<h2>Rakefile</h2>\n\n<p>\u201cRake\u201d is a <strong>R</strong>uby M<strong>ake</strong> tool that you can run as a CLI. It will look for a <code>Rakefile</code> authored in Ruby to define functionality. You can also run <code>$ rake -T</code> to get a list of available commands, of which <code>test</code> will hopefully be one. </p>\n\n<h2>Gemfile</h2>\n\n<p>Most Ruby projects use Bundler to manage dependencies. If the previous developer declared a dependency, you could potentially find it in the Gemfile. If this is present, running <code>$ bundle install</code> in the directory should install the dependencies (note: you may need to run <code>gem install bundler</code> first).</p>\n\n<h2>config.ru</h2>\n\n<p>This is known as a \u201crackup\u201d configuration, which allows a Ruby app to run as a Rack webserver app. I doubt you'll find this in your project, but if you do, it could give you clues on the dependencies or libraries being utilized.</p>\n"}], "owner": {"reputation": 313, "user_id": 2065276, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/869be8ae7564473c22d949294c7f9e0f?s=128&d=identicon&r=PG", "display_name": "user2065276", "link": "https://stackoverflow.com/users/2065276/user2065276"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 96, "favorite_count": 1, "closed_date": 1487114863, "accepted_answer_id": 42234716, "answer_count": 2, "score": -1, "last_activity_date": 1487101504, "creation_date": 1487095984, "last_edit_date": 1487101219, "question_id": 42233372, "link": "https://stackoverflow.com/questions/42233372/how-to-run-dj-file-type-in-ruby-script-from-terminal", "closed_reason": "Needs details or clarity", "title": "How to run dj file-type in Ruby script from terminal", "body": "<p>The following code  is in file named test.dj. The file belongs to a code base internally developed in Ruby with no accurate documentation:</p>\n\n<pre><code>entity :bob do\n  action :say_hi do\n    puts \"Hello!\"\n  end\nend\n</code></pre>\n\n<p>How can I run this code from the command prompt?  When I try to run it like this:</p>\n\n<pre><code>$ruby test.dj\n</code></pre>\n\n<p>I get the error message:</p>\n\n<pre><code>test.dj:1:in `&lt;main&gt;': undefined method `entity' for main:Object (NoMethodError)\n</code></pre>\n\n<p>The only gem I see is Hdk but I can't find its documentation on the web either.</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 689, "user_id": 3978705, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/06ec029c3a5b20715f5e21a0dcfecb9b?s=128&d=identicon&r=PG&f=1", "display_name": "Karthick Vinod", "link": "https://stackoverflow.com/users/3978705/karthick-vinod"}, "edited": false, "score": 0, "creation_date": 1487095670, "post_id": 42233186, "comment_id": 71625998, "body": "Is the array sorted?"}, {"owner": {"reputation": 152277, "user_id": 438992, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/QouOz.jpg?s=128&g=1", "display_name": "Dave Newton", "link": "https://stackoverflow.com/users/438992/dave-newton"}, "edited": false, "score": 0, "creation_date": 1487095746, "post_id": 42233186, "comment_id": 71626045, "body": "Seems like simple iteration with a comparison against the next element (if available)."}, {"owner": {"reputation": 18583, "user_id": 501171, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/afc19876a76fb3a9d507352d6d3e4cce?s=128&d=identicon&r=PG", "display_name": "Christian Fazzini", "link": "https://stackoverflow.com/users/501171/christian-fazzini"}, "edited": false, "score": 0, "creation_date": 1487095797, "post_id": 42233186, "comment_id": 71626075, "body": "Yea array is sorted"}, {"owner": {"reputation": 91121, "user_id": 179125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5594142dcc49a24b1902ec8059181f8d?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan Running", "link": "https://stackoverflow.com/users/179125/jordan-running"}, "edited": false, "score": 0, "creation_date": 1487096405, "post_id": 42233186, "comment_id": 71626429, "body": "Your title and question state that you want to return the first element meeting your conditions, but your examples indicate you want to return two elements. Which is it?"}, {"owner": {"reputation": 18583, "user_id": 501171, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/afc19876a76fb3a9d507352d6d3e4cce?s=128&d=identicon&r=PG", "display_name": "Christian Fazzini", "link": "https://stackoverflow.com/users/501171/christian-fazzini"}, "edited": false, "score": 0, "creation_date": 1487097193, "post_id": 42233186, "comment_id": 71626848, "body": "Expected are from the examples. I changed the title to be consistent to the expectation"}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1487101427, "post_id": 42233186, "comment_id": 71629144, "body": "When code works and you want to know &quot;if there is a better way&quot;, you should look at asking on <a href=\"https://codereview.stackexchange.com\">Code Review</a> instead of <a href=\"https://stackoverflow.com\">Stack Overflow</a>."}, {"owner": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "edited": false, "score": 0, "creation_date": 1487114228, "post_id": 42233186, "comment_id": 71635314, "body": "Please take a look at my answer. It should be faster than the previous ones."}], "answers": [{"comments": [{"owner": {"reputation": 18583, "user_id": 501171, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/afc19876a76fb3a9d507352d6d3e4cce?s=128&d=identicon&r=PG", "display_name": "Christian Fazzini", "link": "https://stackoverflow.com/users/501171/christian-fazzini"}, "edited": false, "score": 0, "creation_date": 1487096021, "post_id": 42233321, "comment_id": 71626211, "body": "That will return <code>6</code>. In this case, if <code>val</code> is <code>5</code>, result should return <code>[4,6]</code>"}, {"owner": {"reputation": 18583, "user_id": 501171, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/afc19876a76fb3a9d507352d6d3e4cce?s=128&d=identicon&r=PG", "display_name": "Christian Fazzini", "link": "https://stackoverflow.com/users/501171/christian-fazzini"}, "edited": false, "score": 0, "creation_date": 1487096414, "post_id": 42233321, "comment_id": 71626432, "body": "With your new edit. If you change <code>val</code> to <code>3</code>. Result returns as <code>[4,6]</code>. Result should be <code>[2,4]</code>"}, {"owner": {"reputation": 18583, "user_id": 501171, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/afc19876a76fb3a9d507352d6d3e4cce?s=128&d=identicon&r=PG", "display_name": "Christian Fazzini", "link": "https://stackoverflow.com/users/501171/christian-fazzini"}, "edited": false, "score": 0, "creation_date": 1487097316, "post_id": 42233321, "comment_id": 71626918, "body": "With your new edit! Sweet. Definitely better that my solution!"}], "tags": [], "owner": {"reputation": 3271, "user_id": 387177, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ce58186c9663c82e5fef7fcca045fa57?s=128&d=identicon&r=PG", "display_name": "Steffen Roller", "link": "https://stackoverflow.com/users/387177/steffen-roller"}, "is_accepted": true, "score": 1, "last_activity_date": 1487096732, "last_edit_date": 1487096732, "creation_date": 1487095835, "answer_id": 42233321, "question_id": 42233186, "link": "https://stackoverflow.com/questions/42233186/how-to-return-the-elements-in-the-array-that-the-variable-falls-between/42233321#42233321", "title": "How to return the elements in the array that the variable falls between", "body": "<p>what about this</p>\n\n<pre><code>val = 5\na = [2,4,6,8,10] # assuming it's sorted\na.slice(a.rindex {|e| e &lt;= val}, 2)\n</code></pre>\n\n<p>It doesn't account for the case when the lookup value is equal or bigger the last element of the array. I'd probably append a nil element for this, if that would be appropriate for the problem.</p>\n"}, {"comments": [{"owner": {"reputation": 1548, "user_id": 1246279, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e2533d5a4299cad329268e552c47fa8d?s=128&d=identicon&r=PG", "display_name": "philomory", "link": "https://stackoverflow.com/users/1246279/philomory"}, "edited": false, "score": 0, "creation_date": 1487104899, "post_id": 42234328, "comment_id": 71631040, "body": "I like this answer, but your slice_when example has a syntax error, you left in the <code>rv</code> from the previous examples."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "reply_to_user": {"reputation": 1548, "user_id": 1246279, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e2533d5a4299cad329268e552c47fa8d?s=128&d=identicon&r=PG", "display_name": "philomory", "link": "https://stackoverflow.com/users/1246279/philomory"}, "edited": false, "score": 0, "creation_date": 1487105828, "post_id": 42234328, "comment_id": 71631536, "body": "Thanks, @philomony. I confess that was not the only error.\ud83d\ude33 I think it&#39;s OK now."}], "tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": false, "score": 3, "last_activity_date": 1487105514, "last_edit_date": 1487105514, "creation_date": 1487099415, "answer_id": 42234328, "question_id": 42233186, "link": "https://stackoverflow.com/questions/42233186/how-to-return-the-elements-in-the-array-that-the-variable-falls-between/42234328#42234328", "title": "How to return the elements in the array that the variable falls between", "body": "<p>You could use <a href=\"http://ruby-doc.org/core-2.3.0/Enumerable.html#method-i-each_cons\" rel=\"nofollow noreferrer\">Enumerable#each_cons</a>.</p>\n\n<pre><code>def mind_the_gap(arr, n)\n  arr.each_cons(2).find { |l,u| l &lt;= n &amp;&amp; n &lt; u }\nend\n\narr = [2,4,6,8,10]\nmind_the_gap(arr, 5)  #=&gt; [4,6]\nmind_the_gap(arr, 8)  #=&gt; [8,10]\nmind_the_gap(arr, 1)  #=&gt; nil\nmind_the_gap(arr, 10) #=&gt; nil\n</code></pre>\n\n<p>If you don't want the last two examples to return <code>nil</code>, you could change the method as follows.</p>\n\n<pre><code>def mind_the_gap(arr, n)\n  rv = arr.each_cons(2).find { |l,u| l &lt;= n &amp;&amp; n &lt; u }\n  return rv unless rv.nil?\n  n &lt; arr.first ? :low : :high\nend\n\nmind_the_gap(arr, 5)  #=&gt; [4,6]\nmind_the_gap(arr, 8)  #=&gt; [8,10]\nmind_the_gap(arr, 1)  #=&gt; :low\nmind_the_gap(arr, 10) #=&gt; :high\n</code></pre>\n\n<p>Another way is to use <a href=\"http://ruby-doc.org/core-2.3.0/Enumerable.html#method-i-slice_when\" rel=\"nofollow noreferrer\">Enumerable#slice_when</a>.</p>\n\n<pre><code>def mind_the_gap(arr, n)\n  a = arr.slice_when  { |l,u| l &lt;= n &amp;&amp; n &lt; u }.to_a\n  return [a.first.last, a.last.first] unless a.size == 1\n  n &lt; arr.first ? :low : :high\nend\n\nmind_the_gap(arr, 5)  #=&gt; [4,6]\nmind_the_gap(arr, 8)  #=&gt; [8,10]\nmind_the_gap(arr, 1)  #=&gt; :low\nmind_the_gap(arr, 10) #=&gt; :high\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "is_accepted": false, "score": 1, "last_activity_date": 1487102761, "last_edit_date": 1487102761, "creation_date": 1487102255, "answer_id": 42235091, "question_id": 42233186, "link": "https://stackoverflow.com/questions/42233186/how-to-return-the-elements-in-the-array-that-the-variable-falls-between/42235091#42235091", "title": "How to return the elements in the array that the variable falls between", "body": "<p>This looks like a good use to check for the inclusion in a range:</p>\n\n<pre><code>a = [2,4,6,8,10]\nb = 5\na.each_cons(2).select { |i, j| (i .. j) === b }\n# =&gt; [[4, 6]]\n</code></pre>\n\n<p>It's not clear exactly what you mean by \"falls between\". In the code above <code>8</code> would fall between two sets of numbers:</p>\n\n<pre><code>b = 8\na.each_cons(2).select { |i, j| (i .. j) === b }\n# =&gt; [[6, 8], [8, 10]]\n</code></pre>\n\n<p>if the test is <code>i &lt;= b &lt;= j</code>. If it's <code>i &lt;= b &lt; j</code> then use <code>...</code> instead of <code>..</code>:</p>\n\n<pre><code>a.each_cons(2).select { |i, j| (i ... j) === b }\n# =&gt; [[8, 10]]\n</code></pre>\n\n<p>I'm not a big fan of using <code>...</code> but it simplifies the code.</p>\n\n<p>From the <a href=\"https://ruby-doc.org/core-2.4.0/Range.html\" rel=\"nofollow noreferrer\">Range</a> documentation:</p>\n\n<blockquote>\n  <p>Ranges constructed using <code>..</code> run from the beginning to the end inclusively. Those created using <code>...</code> exclude the end value.</p>\n</blockquote>\n\n<p>You could change that to:</p>\n\n<pre><code>a.each_cons(2).select { |i, j| i &lt;= b &amp;&amp; b &lt;= j }\n</code></pre>\n\n<p>or:</p>\n\n<pre><code>a.each_cons(2).select { |i, j| i &lt;= b &amp;&amp; b &lt; j }\n</code></pre>\n\n<p>if those work better for your mind. Using a Range is a little slower, but not radically so.</p>\n"}, {"tags": [], "owner": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "is_accepted": false, "score": 2, "last_activity_date": 1487112846, "last_edit_date": 1487112846, "creation_date": 1487112490, "answer_id": 42237660, "question_id": 42233186, "link": "https://stackoverflow.com/questions/42233186/how-to-return-the-elements-in-the-array-that-the-variable-falls-between/42237660#42237660", "title": "How to return the elements in the array that the variable falls between", "body": "<p>If you're looking for elements inside a sorted array, the \"better way\" probably involves <a href=\"https://ruby-doc.org/core-2.4.0/Array.html#method-i-bsearch\" rel=\"nofollow noreferrer\"><code>bsearch</code></a> or <a href=\"https://ruby-doc.org/core-2.4.0/Array.html#method-i-bsearch_index\" rel=\"nofollow noreferrer\"><code>bsearch_index</code></a>.</p>\n\n<p>The second element in the pair is the first element in the array that is greater than your variable, so <code>bsearch_index</code> can return it directly. You need to check it isn't <code>nil</code> or <code>0</code> before returning the found element and the previous one :</p>\n\n<pre><code>a = [2, 4, 6, 8, 10]\n\ndef find_surrounding_pair(array, element)\n  second_index = array.bsearch_index { |x| x &gt; element }\n  array[second_index - 1, 2] if second_index &amp;&amp; second_index &gt; 0\nend\n\nputs find_surrounding_pair(a, 1).nil?\nputs find_surrounding_pair(a, 2) == [2, 4]\nputs find_surrounding_pair(a, 7) == [6, 8]\nputs find_surrounding_pair(a, 8) == [8, 10]\nputs find_surrounding_pair(a, 12).nil?\n#=&gt; true * 5\n</code></pre>\n\n<p>The complexity of this method should be <code>O(log n)</code>.</p>\n"}], "owner": {"reputation": 18583, "user_id": 501171, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/afc19876a76fb3a9d507352d6d3e4cce?s=128&d=identicon&r=PG", "display_name": "Christian Fazzini", "link": "https://stackoverflow.com/users/501171/christian-fazzini"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 81, "favorite_count": 0, "accepted_answer_id": 42233321, "answer_count": 4, "score": 1, "last_activity_date": 1487112846, "creation_date": 1487095438, "last_edit_date": 1487101397, "question_id": 42233186, "link": "https://stackoverflow.com/questions/42233186/how-to-return-the-elements-in-the-array-that-the-variable-falls-between", "title": "How to return the elements in the array that the variable falls between", "body": "<p>I have a unique sorted array: <code>[2,4,6,8,10]</code>. </p>\n\n<p>I have a variable called <code>i</code>. If <code>i</code> is <code>5</code>, I want to return the elements in the array that <code>5</code> falls between. In this case <code>[4,6]</code>. If <code>i</code> is <code>8</code>, then <code>[8,10]</code>. </p>\n\n<p>How should I go about this?</p>\n\n<p>I've tried with <code>partition</code>, to some extent. If <code>i</code> happens to be a number directly equal to one of the values in the array. This seems to work:</p>\n\n<pre><code>a=[2,4,6,8,10]\ni = 6\na.partition { |v| v &lt; i }.max[0..1] # returns [6,8]\n</code></pre>\n\n<p>However, if <code>i</code> is a number not directly equal to any of the values in the array. For example <code>5</code>, it gets a little trickier.</p>\n\n<p>I got it working for the last case:</p>\n\n<pre><code>a=[2,4,6,8,10]\ni = 5\npartition = a.partition { |v| v &lt; i }\n[].tap { |a| a &lt;&lt; partition[0].max; a &lt;&lt; partition[1].min } # returns [6,8]\n</code></pre>\n\n<p>While this works, I am looking to see if there is a better way to write this logic.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "rspec"], "comments": [{"owner": {"reputation": 4644, "user_id": 2594185, "user_type": "registered", "profile_image": "https://graph.facebook.com/100003773788931/picture?type=large", "display_name": "Jagdeep Singh", "link": "https://stackoverflow.com/users/2594185/jagdeep-singh"}, "edited": false, "score": 0, "creation_date": 1487239931, "post_id": 42232583, "comment_id": 71697805, "body": "To ensure that <i>edit.html.haml</i> exists, you need to write tests for <code>edit</code> action, not the <code>create</code> action."}], "answers": [{"comments": [{"owner": {"reputation": 514, "user_id": 4613443, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/abfa85562e754636c46ac3dc3f67decd?s=128&d=identicon&r=PG", "display_name": "mohnstrudel", "link": "https://stackoverflow.com/users/4613443/mohnstrudel"}, "edited": false, "score": 0, "creation_date": 1487147438, "post_id": 42233591, "comment_id": 71646617, "body": "Updated my question, I&#39;m already checking the explicit redirect. But this test passes even if I have no edit.html.haml file at all."}, {"owner": {"reputation": 407, "user_id": 3263467, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/qbS81.jpg?s=128&g=1", "display_name": "ktaras", "link": "https://stackoverflow.com/users/3263467/ktaras"}, "reply_to_user": {"reputation": 514, "user_id": 4613443, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/abfa85562e754636c46ac3dc3f67decd?s=128&d=identicon&r=PG", "display_name": "mohnstrudel", "link": "https://stackoverflow.com/users/4613443/mohnstrudel"}, "edited": false, "score": 1, "creation_date": 1487157350, "post_id": 42233591, "comment_id": 71653866, "body": "@mohnstrudel, I think you&#39;re overtesting. When you&#39;re testing <code>create</code> action you should just check correctness of redirect. Then you should have another test for <code>edit</code> action, where you&#39;re checking template rendering. That will mean that after redirect in <code>create</code> action you also will see the proper template."}, {"owner": {"reputation": 514, "user_id": 4613443, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/abfa85562e754636c46ac3dc3f67decd?s=128&d=identicon&r=PG", "display_name": "mohnstrudel", "link": "https://stackoverflow.com/users/4613443/mohnstrudel"}, "edited": false, "score": 0, "creation_date": 1487344041, "post_id": 42233591, "comment_id": 71756948, "body": "Great, thank you! This flaw in my logic was indeed the case. I&#39;ve got this test now, and it works properly:   <code>context &quot;GET methods&quot; do     let(:user) { FactoryGirl.build(:user) }      let(:created_user) { FactoryGirl.create(:user) }      describe &quot;#edit&quot; do       it &quot;renders edit template&quot; do         get :edit, id: created_user.id         expect(response).to render_template(:new)       end     end   end</code>  Could you consider changing your initial answer so I can accept it?"}, {"owner": {"reputation": 407, "user_id": 3263467, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/qbS81.jpg?s=128&g=1", "display_name": "ktaras", "link": "https://stackoverflow.com/users/3263467/ktaras"}, "reply_to_user": {"reputation": 514, "user_id": 4613443, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/abfa85562e754636c46ac3dc3f67decd?s=128&d=identicon&r=PG", "display_name": "mohnstrudel", "link": "https://stackoverflow.com/users/4613443/mohnstrudel"}, "edited": false, "score": 0, "creation_date": 1487357986, "post_id": 42233591, "comment_id": 71765758, "body": "@mohnstrudel thanks, I&#39;ve changed a bit, but anyway - comments are also a part of discussion and answer :)"}], "tags": [], "owner": {"reputation": 407, "user_id": 3263467, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/qbS81.jpg?s=128&g=1", "display_name": "ktaras", "link": "https://stackoverflow.com/users/3263467/ktaras"}, "is_accepted": true, "score": 3, "last_activity_date": 1487357918, "last_edit_date": 1487357918, "creation_date": 1487096790, "answer_id": 42233591, "question_id": 42232583, "link": "https://stackoverflow.com/questions/42232583/rspec-check-the-template-after-a-redirect/42233591#42233591", "title": "Rspec check the template after a redirect", "body": "<p>When you're testing <code>create</code> action you should just check correctness of redirect. In this action you're not actually rendering <code>edit</code> template, but you're just making redirect to the <code>edit</code> path of created entity. So this is the thing you should check.</p>\n\n<pre><code>describe \"#create\" do\n    it \"redirects to the edit path\" do\n        post :create, user: FactoryGirl.attributes_for(:user)\n        expect(response).to redirect_to(edit_admin_user_path(User.last))\n    end\nend\n</code></pre>\n\n<p>Then you should have another test for <code>edit</code> action, where you're checking template rendering. That will mean that after redirect in create action you also will see the proper template.</p>\n"}, {"comments": [{"owner": {"reputation": 514, "user_id": 4613443, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/abfa85562e754636c46ac3dc3f67decd?s=128&d=identicon&r=PG", "display_name": "mohnstrudel", "link": "https://stackoverflow.com/users/4613443/mohnstrudel"}, "edited": false, "score": 0, "creation_date": 1487147141, "post_id": 42234642, "comment_id": 71646463, "body": "I do have this test already, but it does not check if edit template is present. Meaning, when I have <i>no</i> edit.html.haml this test still passes. I tried this code: <code>it &quot;renders the edit template&quot; do \t\t\t\tpost :create, user: FactoryGirl.attributes_for(:user) \t\t\t\tuser = User.last \t\t\t\texpect { \t\t\t\t\tredirect_to(edit_admin_user_path(user.id))\t \t\t\t\t}.to render_template(:edit) \t\t\tend</code> but this leads to an error: <code>You must pass an argument rather than a block to use the provided matcher (render template matcher &quot;edit&quot;), or the matcher must implement </code>supports_block_expectations?<code>.</code>"}], "tags": [], "owner": {"reputation": 41, "user_id": 3816455, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4826a8cc312af8c117f9eee14b7db1a6?s=128&d=identicon&r=PG", "display_name": "Prashant Vithani", "link": "https://stackoverflow.com/users/3816455/prashant-vithani"}, "is_accepted": false, "score": 0, "last_activity_date": 1487100664, "creation_date": 1487100664, "answer_id": 42234642, "question_id": 42232583, "link": "https://stackoverflow.com/questions/42232583/rspec-check-the-template-after-a-redirect/42234642#42234642", "title": "Rspec check the template after a redirect", "body": "<p>You are redirecting to <code>edit_admin_user_path</code> after successfully saving the User in your controller action. But, you're testing <code>render</code> in the test instead.</p>\n\n<p>Update your test as below.</p>\n\n<pre><code>context \"POST methods\" do\n\ndescribe \"#create\" do\n  before(:each) do\n    @user = FactoryGirl.attributes_for(:user)\n  end\n  it \"renders the edit template\" do\n    post :create, user: @user\n      expect(response).to redirect_to(edit_admin_user_path(@user))\n    end\n  end\nend\n</code></pre>\n"}], "owner": {"reputation": 514, "user_id": 4613443, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/abfa85562e754636c46ac3dc3f67decd?s=128&d=identicon&r=PG", "display_name": "mohnstrudel", "link": "https://stackoverflow.com/users/4613443/mohnstrudel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1626, "favorite_count": 0, "accepted_answer_id": 42233591, "answer_count": 2, "score": 4, "last_activity_date": 1487357918, "creation_date": 1487093454, "last_edit_date": 1487147363, "question_id": 42232583, "link": "https://stackoverflow.com/questions/42232583/rspec-check-the-template-after-a-redirect", "title": "Rspec check the template after a redirect", "body": "<p>Here is my create action for users:</p>\n\n<pre><code>def create\n        @user = User.new(user_params)\n\n        if @user.save\n            respond_to do |format|\n                format.html { \n                    redirect_to edit_admin_user_path(@user) \n                    flash[:success] = \"Successfully created\"\n                }\n            end\n        else\n            render :new\n            flash[:alert] = \"Something went wrong\"\n        end\n    end\n</code></pre>\n\n<p>My test is looking like this:</p>\n\n<pre><code>context \"POST methods\" do\n\n    describe \"#create\" do\n        it \"renders the edit template\" do\n            post :create, user: FactoryGirl.attributes_for(:user)\n            expect(response).to render_template(:edit)\n        end\n    end\nend\n</code></pre>\n\n<p>However I'm getting this error:</p>\n\n<pre><code>Failures:\n\n  1) Admin::UsersController POST methods #create renders the edit template\n     Failure/Error: expect(response).to render_template(:edit)\n       expecting &lt;\"edit\"&gt; but was a redirect to &lt;http://test.host/admin/users/80/edit&gt;\n</code></pre>\n\n<p>I want to check if the edit.html.haml file is rendered after creating a user. What am I doing wrong?</p>\n\n<p><strong>Update #1</strong>\nI do check for redirect in another test, this is my full test suite:</p>\n\n<pre><code>require 'rails_helper'\n\nRSpec.describe Admin::UsersController, type: :controller do\n\n    render_views    \n\n    context \"POST methods\" do\n\n        describe \"#create\" do\n            it \"using valid params\" do\n\n                expect{\n                    post :create, user: { email: \"something@hello.com\", password: \"long12345678\" }\n                    }.to change(User, :count).by(1)\n                # get user_path('1')\n            end\n\n            it \"redirects to the edit page after saving\" do\n                post :create, user: FactoryGirl.attributes_for(:user)\n                user = User.last\n                expect(response).to redirect_to(edit_admin_user_path(user.id))\n            end\n\n            it \"renders the edit template\" do\n                post :create, user: FactoryGirl.attributes_for(:user)\n                user = User.last\n                expect {\n                    redirect_to(edit_admin_user_path(user.id))  \n                }.to render_template(:edit)\n            end\n\n            context \"it redirects to new\" do\n                it \"if user has no valid mail\" do\n                    post :create, user: { email: \"something\", password: \"long12345678\" }\n                    expect(response).to render_template(:new)\n                end\n                it \"if user has no valid password\" do\n                    post :create, user: { email: \"something@mail.com\", password: \"short\" }  \n                    expect(response).to render_template(:new)\n                end\n            end\n        end\n    end\nend\n</code></pre>\n\n<p>What I want is to actually check if the edit template is rendered. Because with <code>expect(response).to redirect_to(edit_admin_user_path(user))</code> it does <strong>not</strong> check the template. This test passes even if I have <strong>no</strong> edit.html.haml file at all.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "module"], "comments": [{"owner": {"reputation": 539, "user_id": 3693398, "user_type": "registered", "accept_rate": 64, "profile_image": "https://graph.facebook.com/100000471452957/picture?type=large", "display_name": "teddybear", "link": "https://stackoverflow.com/users/3693398/teddybear"}, "edited": false, "score": 0, "creation_date": 1487093249, "post_id": 42232420, "comment_id": 71624566, "body": "What error are you getting?"}, {"owner": {"reputation": 3084, "user_id": 1419884, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/9ab5ef0479dac48e6e84a56bf46250f9?s=128&d=identicon&r=PG", "display_name": "Peter Tretyakov", "link": "https://stackoverflow.com/users/1419884/peter-tretyakov"}, "reply_to_user": {"reputation": 539, "user_id": 3693398, "user_type": "registered", "accept_rate": 64, "profile_image": "https://graph.facebook.com/100000471452957/picture?type=large", "display_name": "teddybear", "link": "https://stackoverflow.com/users/3693398/teddybear"}, "edited": false, "score": 0, "creation_date": 1487093759, "post_id": 42232420, "comment_id": 71624876, "body": "Modules uses Nokogiri in theirs implementation, so I get a Nokogiri error, when <code>method</code> from <code>ModuleA</code> runs <code>other_method</code> from <code>ModuleB</code>. In each module there are about 10 methods, which are connected with each other. So, error, which I get, is in modules implementation, when methods mix with each other from different modules. When all methods run in one Module, there is no error. So, a certain error message wouldn&#39;t help you to answer to my question, it is not because of modules implementation, it is because of methods mix."}], "owner": {"reputation": 3084, "user_id": 1419884, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/9ab5ef0479dac48e6e84a56bf46250f9?s=128&d=identicon&r=PG", "display_name": "Peter Tretyakov", "link": "https://stackoverflow.com/users/1419884/peter-tretyakov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 177, "favorite_count": 2, "answer_count": 0, "score": 1, "last_activity_date": 1487092996, "creation_date": 1487092996, "question_id": 42232420, "link": "https://stackoverflow.com/questions/42232420/include-2-modules-with-the-same-methods", "title": "Include 2 modules with the same methods", "body": "<p>I have a certain <code>Controller</code>, which now includes two <code>Module</code>s.</p>\n\n<pre><code>class SomeController &lt; ApplicationController\n  include ModuleA\n  include ModuleB\n\n  def index\n    if something?\n      a_method # Method from ModuleA\n    else\n      b_method # Method from ModuleB\n    end\n  end\n\nend\n</code></pre>\n\n<p>For some reason <code>ModuleA</code> and <code>ModuleB</code> have the same logic (methods), but methods' implementation are different. So, I need them to be in separate files (modules) to easy refactoring, because I need to change implementation of methods often. Now, I'm using different method names (prefixes) in different modules.</p>\n\n<pre><code>module ModuleA\n  def a_method\n    a_other_method\n    ...\n  end\n\n  private\n\n  def a_other_method\n    ...\n  end\nend\n\nmodule ModuleB\n  def b_method\n    b_other_method\n    ...\n  end\n\n  private\n\n  def b_other_method\n    ...\n  end\nend\n</code></pre>\n\n<p>If I use the same method names (<code>method</code> and <code>other_method</code>) in both modules <code>method</code> from <code>ModuleA</code> runs <code>other_method</code> from <code>ModuleB</code> and I get an error.</p>\n\n<p>Is it possible to have the same method names in modules? How I need to name them, to make <code>method</code> runs <code>other_method</code> from the same module, where it is implemented?</p>\n\n<p>Thanks for any help!</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 46515, "user_id": 5647260, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/oByMV.jpg?s=128&g=1", "display_name": "Andrew Li", "link": "https://stackoverflow.com/users/5647260/andrew-li"}, "edited": false, "score": 1, "creation_date": 1487093322, "post_id": 42232384, "comment_id": 71624604, "body": "<a href=\"http://stackoverflow.com/q/1872110/5647260\">stackoverflow.com/q/1872110/5647260</a>"}, {"owner": {"reputation": 6076, "user_id": 4044009, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/42e57031eb7d02c47c9afaecfc878638?s=128&d=identicon&r=PG&f=1", "display_name": "Neil", "link": "https://stackoverflow.com/users/4044009/neil"}, "reply_to_user": {"reputation": 46515, "user_id": 5647260, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/oByMV.jpg?s=128&g=1", "display_name": "Andrew Li", "link": "https://stackoverflow.com/users/5647260/andrew-li"}, "edited": false, "score": 0, "creation_date": 1487093665, "post_id": 42232384, "comment_id": 71624810, "body": "@AndrewLi I did happen to see that question.  It does not really answer why the example above is <code>pass-by-value</code> as opposed to <code>pass-by-reference</code> in terms of how I understand the two concepts."}, {"owner": {"reputation": 24966, "user_id": 2001031, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/bd4f0d39f82be9c22f6f01c80d7ad800?s=128&d=identicon&r=PG", "display_name": "Neil Slater", "link": "https://stackoverflow.com/users/2001031/neil-slater"}, "edited": false, "score": 0, "creation_date": 1487093820, "post_id": 42232384, "comment_id": 71624909, "body": "@Neil: In order to be a non-duplicate, I think you need to explain quite deeply &quot;how I understand the two concepts&quot; in your question. Your question stops being about Ruby at that point, and about understanding the finer details of what the concepts actually cover. Otherwise, I hope my pre-duplicate answer helps you at least a little."}, {"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 1, "creation_date": 1487099928, "post_id": 42232384, "comment_id": 71628300, "body": "&quot;I understand pass-by-reference to mean passing a reference to the actual object.&quot; \u2013 It means passing the <i>reference</i> (i.e. the <i>variable</i>) <i>instead</i> of the object. And <i>reference</i> here does not mean &quot;pointer&quot;. It means something similar to what &quot;lvalue&quot; means in C. It means &quot;variable, parameter, constant, some sort of binding, literal, \u2026&quot;. &quot;Since it is a reference: we modify the <i>actual</i> dog object&quot; \u2013 The fact that you can modify the object is irrelevant. That&#39;s <i>mutable state</i> and is completely orthogonal to pass-by-reference. If you could modify the <i>reference</i>, then it would be p-b-ref."}], "answers": [{"tags": [], "owner": {"reputation": 24966, "user_id": 2001031, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/bd4f0d39f82be9c22f6f01c80d7ad800?s=128&d=identicon&r=PG", "display_name": "Neil Slater", "link": "https://stackoverflow.com/users/2001031/neil-slater"}, "is_accepted": true, "score": 2, "last_activity_date": 1487093628, "creation_date": 1487093628, "answer_id": 42232633, "question_id": 42232384, "link": "https://stackoverflow.com/questions/42232384/how-is-ruby-not-pass-by-reference-in-this-example/42232633#42232633", "title": "How is Ruby Not Pass-By-Reference in This Example?", "body": "<p>Ruby is strictly \"pass by value\"  when you consider what a variable is. It is a pointer to an object. Ruby variables and method parameters can only be of these pointers. </p>\n\n<p>Probably best shown by annotating your example:</p>\n\n<pre><code># Define and set local variable 'dog' to a pointer to a new Dog object\ndog = Dog.new\nputs \"Dog's initial name: #{dog.name}\" # =&gt; Dog's initial name: Denver\n\n# Pass the pointer, *by value* to the rename_dog method\nrename_dog(dog)\n\nputs \"Dog's New name: #{dog.name}\" # =&gt; Dog's New name: New_Dog_Name\n</code></pre>\n\n<p>Now you might say \"this is a useless, technical, definition of pass by value\". I would <em>partially</em> agree. It goes against expectations.</p>\n\n<p>However, it only goes against expectations from languages where you have a <em>choice</em> between pointers to objects and variables which directly represent those objects. In Ruby you never have this choice. The definition of Ruby as pass-by-value is correct, but because everything is a pointer, you have to explicitly clone container objects - or use a method which returns a modified copy - if you want to work on a \"separate value\".</p>\n"}], "owner": {"reputation": 6076, "user_id": 4044009, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/42e57031eb7d02c47c9afaecfc878638?s=128&d=identicon&r=PG&f=1", "display_name": "Neil", "link": "https://stackoverflow.com/users/4044009/neil"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 40, "favorite_count": 0, "closed_date": 1487093663, "accepted_answer_id": 42232633, "answer_count": 1, "score": 0, "last_activity_date": 1487093628, "creation_date": 1487092881, "question_id": 42232384, "link": "https://stackoverflow.com/questions/42232384/how-is-ruby-not-pass-by-reference-in-this-example", "closed_reason": "Duplicate", "title": "How is Ruby Not Pass-By-Reference in This Example?", "body": "<p>I understand pass-by-value as passing a <strong>copy</strong> of an object into a method.  When a programming language is pass-by-value, we can alter that object we passed into the method, but it leaves the <em>original</em> object that was passed in unaffected.  This is because a <strong>copy</strong> is passed into the method as opposed to the <em>actual</em> object itself (or a reference to that object).</p>\n\n<p>I understand pass-by-reference to mean passing a reference to the actual object.  Therefore: if we pass a reference of an object into a method: then when we modify the object within that method (via the reference that was passed in) then the actual object gets changed, outside of the scope of the method.</p>\n\n<p>Example:</p>\n\n<pre><code>class Dog\n  attr_accessor :name\n  def initialize()\n    @name = \"Denver\"\n  end\nend\n\ndef rename_dog(dog)\n  dog.name = \"New_Dog_Name\"\n  return\nend\n\ndog = Dog.new\nputs \"Dog's initial name: #{dog.name}\" # =&gt; Dog's initial name: Denver\nrename_dog(dog)\nputs \"Dog's New name: #{dog.name}\" # =&gt; Dog's New name: New_Dog_Name\n</code></pre>\n\n<p>To me: this makes it seem as though ruby is pass-by-reference.  We pass a reference of the dog into the <code>rename_dog(dog)</code> method.  Since it is a reference: we modify the <em>actual</em> dog object which is outside of the scope of the <code>rename_dog(dog)</code> method, which is reflected by the last <code>puts</code> statement.  </p>\n\n<p>This is as opposed to behavior I would expect if ruby was pass-by-value.  If ruby was pass-by-value: I would expect that last <code>puts</code> statement to return the dog.name <code>\"Denver\"</code> as opposed to <code>\"New_Dog_Name\"</code>.</p>\n\n<p>Everywhere I look online though: everywhere says that ruby is pass-by-value.  What am I getting wrong here? </p>\n"}]