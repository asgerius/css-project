[{"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1483574875, "post_id": 41475231, "comment_id": 70156614, "body": "As a note, there&#39;s no need to include brackets on a method definition which has no arguments. <code>def initialize</code> is traditionally how that&#39;s expressed."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1483574933, "post_id": 41475231, "comment_id": 70156636, "body": "Instead of an accessor method, why not make a method with the same name? Or are you looking to be able to reset this even if it&#39;s assigned to something by default?"}, {"owner": {"reputation": 435, "user_id": 2203108, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/95f0c30d8d1db970ffef597a0b5eba79?s=128&d=identicon&r=PG&f=1", "display_name": "Spance", "link": "https://stackoverflow.com/users/2203108/spance"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1483575336, "post_id": 41475231, "comment_id": 70156763, "body": "I&#39;ll be setting the state of <code>enabled</code> based off of a hidden field in my params. Could I just pass that hidden field into an <code>enabled</code> method in my form object?"}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1483575416, "post_id": 41475231, "comment_id": 70156782, "body": "The first thing here is to figure out what part of your code should be responsible for handling that. It might not be the model you&#39;re talking about here, as it doesn&#39;t need to know the origin of that value. For example, the controller might populate this once. I&#39;m not entirely sure how this might be used, so it&#39;s hard to say what&#39;s best. Is this a regular Ruby object or an ActiveRecord model?"}, {"owner": {"reputation": 435, "user_id": 2203108, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/95f0c30d8d1db970ffef597a0b5eba79?s=128&d=identicon&r=PG&f=1", "display_name": "Spance", "link": "https://stackoverflow.com/users/2203108/spance"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1483575553, "post_id": 41475231, "comment_id": 70156826, "body": "it&#39;s a helper model that umbrellas a group of ActiveRecord models"}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1483575603, "post_id": 41475231, "comment_id": 70156843, "body": "Still not sure what you mean. Can you create a minimal example that demonstrates what you&#39;re trying to do? This code is incomplete."}], "owner": {"reputation": 435, "user_id": 2203108, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/95f0c30d8d1db970ffef597a0b5eba79?s=128&d=identicon&r=PG&f=1", "display_name": "Spance", "link": "https://stackoverflow.com/users/2203108/spance"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 107, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1483576228, "creation_date": 1483574381, "last_edit_date": 1483576228, "question_id": 41475231, "link": "https://stackoverflow.com/questions/41475231/initializing-a-boolean-on-a-form-object-that-can-be-changed", "title": "Initializing a boolean on a form object that can be changed", "body": "<p>I have a form object that I want to have an <code>enabled</code> field on which can be true or false depending on other logic in my project, how do I initialize something like that in the form object class? I have something like this...</p>\n\n<pre><code> attr_accessor :enabled\n\n        def initialize\n          self.enabled = enabled\n</code></pre>\n\n<p>But I know this is incorrect.</p>\n\n<p>And then in another spot in my code I want to do something like this</p>\n\n<pre><code>if something\n        form_object.enabled\nelsif something_else\n        !form_object.enabled\nend\n</code></pre>\n\n<p>Setting that <code>enabled</code> flag to the appropriate state so that I can use it for later</p>\n\n<p><strong>Edit: adding more info</strong></p>\n\n<p>The place where I want to put this <code>enabled</code> variable is in a helper Ruby Class I have</p>\n\n<pre><code>module Blah\n  module Type\n    module Mixins\n      module CallToActionHelper\n\n        attr_accessor :enabled\n\n\n        def initialize(cta_use: nil, cta: nil)\n          self.cta_type = cta_type\n          self.cta_token = create_cta_token\n          self.enabled = enabled\n</code></pre>\n\n<p>And then I have different ActiveRecord models for each type of call to action I have. They all also use the same controller, and the controller is the place where that <code>enabled</code> variable will be set depending on a hidden field in my params. </p>\n\n<pre><code>def populate_form_object(form_params, form_token)\n      cta_use = set_call_to_action_use(cta_use_id: form_params['cta_use_id'], cta_type_key: form_params['cta_type_key'], cta_id: form_params['cta_id'])\n      cta_type = CallToActionType.find_by_key(form_params['cta_type_key'])\n      form_object = cta_type.get_type_form(cta_use: cta_use)\n      form_object.cta_token = form_token\n\n      form_object.enabled(params[\"call_to_action_use_#{form_token}_enabled\"])\n      # if params[\"call_to_action_use_#{form_token}_enabled\"]\n      #   form_object.enabled = true\n      # elsif params[\"call_to_action_use_#{form_token}_enabled\"] == 'false'\n      #   form_object.enabled = false\n      # else\n      #   form_object.enabled = true\n      # end\n\n\n      return form_object\n    end\n</code></pre>\n\n<p>You can see the code I've commeneted out where I tried to set this enabled field. </p>\n\n<p>The above method, <code>populate_form_object</code> gets called on a save.</p>\n"}, {"tags": ["ruby", "oop"], "comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1483574802, "post_id": 41475132, "comment_id": 70156591, "body": "Why not just <code>Pathname.new(...).to_s.gsub(...)</code>? Pathnames are not strings, but they do sort of pretend to be kind of like them sometimes."}, {"owner": {"reputation": 6391, "user_id": 2909897, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/LMSiW.jpg?s=128&g=1", "display_name": "mbigras", "link": "https://stackoverflow.com/users/2909897/mbigras"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1483575094, "post_id": 41475132, "comment_id": 70156694, "body": "@tadman because I was hoping to make my <code>gsub</code> part of a method chain that eventually returns another instance of <code>Pathname</code> <code>some_pn.sub(...).gsub(...).sub(...) #=&gt; some_other_pn</code>"}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 1, "creation_date": 1483575300, "post_id": 41475132, "comment_id": 70156759, "body": "If you do want to go about this, be careful. Patching core classes can be trouble, <i>especially</i> if this is included in some gem other people use. It&#39;s possible that a future version of Ruby could include <code>gsub</code> here, so normally it&#39;s best to test if <code>instance_methods</code> on that class already includes one, and if not, only then do you inject your own. I&#39;ve had a few situations where my monkeypatched method was later replaced by one of the same name in core (Rails) that did the opposite of what I intended."}, {"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1483575868, "post_id": 41475132, "comment_id": 70156915, "body": "You can scope your patch using <a href=\"https://ruby-doc.org/core-2.1.1/doc/syntax/refinements_rdoc.html\" rel=\"nofollow noreferrer\">refinements</a>, which is a lot less disruptive."}, {"owner": {"reputation": 6391, "user_id": 2909897, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/LMSiW.jpg?s=128&g=1", "display_name": "mbigras", "link": "https://stackoverflow.com/users/2909897/mbigras"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1483576293, "post_id": 41475132, "comment_id": 70157046, "body": "@tadman thanks for the tip will check that out. Also is it less worry-some if I&#39;m adding the <code>gsub</code> method to <code>SomeDir &lt; Pathname</code>? That&#39;s what I&#39;m actually doing in <a href=\"https://gist.github.com/mbigras/ef6085af94489f59482a16fb36da5cec#file-some_dir-rb-L41-L49\" rel=\"nofollow noreferrer\">my project</a> but I wanted to keep the question specific. Maybe I should change the wording in my question?"}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1483578761, "post_id": 41475132, "comment_id": 70157703, "body": "You can make something like MySpecialPathName which inherits from Pathname and has extra methods. That should be the safest way to do this. Patching the core class carries risks, but sometimes this is worthwhile if you stand to benefit in other ways. It&#39;s your call."}], "owner": {"reputation": 6391, "user_id": 2909897, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/LMSiW.jpg?s=128&g=1", "display_name": "mbigras", "link": "https://stackoverflow.com/users/2909897/mbigras"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 46, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1483573693, "creation_date": 1483573693, "last_edit_date": 1495535437, "question_id": 41475132, "link": "https://stackoverflow.com/questions/41475132/monkey-patching-a-pathnamegsub-instance-method", "title": "Monkey patching a Pathname#gsub instance method", "body": "<p>If you look through the documentation for <a href=\"http://ruby-doc.org/stdlib-2.3.0/libdoc/pathname/rdoc/Pathname.html\" rel=\"nofollow noreferrer\">Pathname</a> you won't find a <code>Pathname#gsub</code> instance method. But there is a <a href=\"http://ruby-doc.org/stdlib-2.3.0/libdoc/pathname/rdoc/Pathname.html#method-i-sub\" rel=\"nofollow noreferrer\">Pathname#sub</a>.</p>\n\n<p>So you get a <code>(NoMethodError)</code> when you try to call it:</p>\n\n<pre><code>require 'pathname'\n\nsome_pathname = Pathname.new(\"path/with/two/path/occurances/\")\np some_pathname.sub(/path/, 'foobar')\n#=&gt; #&lt;Pathname:some/foobar/with/two/occurances/of/path&gt;\np some_pathname.gsub(/path/, 'foobar')\n# undefined method `gsub' (NoMethodError)\n</code></pre>\n\n<p>Why wouldn't <code>Pathname</code> have a <code>gsub</code> method? It seems like if you have a <code>sub</code> you might as well have a <code>gsub</code>.</p>\n\n<p>Because ruby has <a href=\"http://rubylearning.com/satishtalim/ruby_open_classes.html\" rel=\"nofollow noreferrer\">open classes</a> you can <a href=\"https://stackoverflow.com/q/10337712/2909897\">monkey patch</a> the <code>Pathname</code> class and add a <code>gsub</code> instance method.</p>\n\n<p>That's what I did below:</p>\n\n<pre><code>require 'pathname'\n\nclass Pathname\n  def gsub(re, str)\n    gsubbed_pn = self\n    while gsubbed_pn.to_s =~ re\n      gsubbed_pn = gsubbed_pn.sub(re, str)\n    end\n    gsubbed_pn\n  end\nend\n\nmonkey_pathname = Pathname.new(\"path/with/two/path/occurances\")\np monkey_pathname.gsub(/path/, 'foobar')\n#=&gt; #&lt;Pathname:foobar/with/two/foobar/occurances&gt;\np monkey_pathname\n#&lt;Pathname:path/with/two/path/occurances&gt;\n</code></pre>\n\n<p>But I've read that <a href=\"http://www.virtuouscode.com/2008/02/23/why-monkeypatching-is-destroying-ruby/\" rel=\"nofollow noreferrer\">monkey patching</a> should probably not be the first tool I reach for.</p>\n\n<p>Is there a better alternative in this case? Is <code>Pathname</code> missing a <code>gsub</code> method by design?</p>\n"}, {"tags": ["ruby", "pry", "byebug"], "answers": [{"tags": [], "owner": {"reputation": 1592, "user_id": 7138517, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/40228125f914cf5ef1ae7df6b98c550d?s=128&d=identicon&r=PG&f=1", "display_name": "Coolness", "link": "https://stackoverflow.com/users/7138517/coolness"}, "is_accepted": false, "score": 10, "last_activity_date": 1483572409, "creation_date": 1483572409, "answer_id": 41474947, "question_id": 41474811, "link": "https://stackoverflow.com/questions/41474811/set-conditional-breakpoint-with-pry-byebug/41474947#41474947", "title": "Set conditional breakpoint with pry-byebug", "body": "<p>I think an easy way is to do it in your code:</p>\n\n<pre><code>require 'pry-byebug'\n\n10.times.with_index do |i|\n  binding.pry if i == 5\n  puts i\nend\n</code></pre>\n\n<p>Or alternatively if you want to stop at an exception, you can do something like:</p>\n\n<pre><code>require 'pry-byebug'\n\n10.times.with_index do |i|\n  puts i rescue binding.pry # if the puts command throws an exception, you'll be taken to pry\nend\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 6391, "user_id": 2909897, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/LMSiW.jpg?s=128&g=1", "display_name": "mbigras", "link": "https://stackoverflow.com/users/2909897/mbigras"}, "edited": false, "score": 0, "creation_date": 1483636945, "post_id": 41490951, "comment_id": 70187703, "body": "Does it not work when the <code>binding.pry</code> is inside the loop because a &quot;breakpoint&quot; is different than a <code>binding.pry</code>? So even though in my example I set a breakpoint, I&#39;m still hitting my <code>binding.pry</code> on each loop through?"}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "reply_to_user": {"reputation": 6391, "user_id": 2909897, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/LMSiW.jpg?s=128&g=1", "display_name": "mbigras", "link": "https://stackoverflow.com/users/2909897/mbigras"}, "edited": false, "score": 0, "creation_date": 1483637122, "post_id": 41490951, "comment_id": 70187800, "body": "Yep, you&#39;re hitting <code>binding.pry</code> each time through. Ruby doesn&#39;t have any idea that <code>binding.pry</code> is a special command it should only do once, it&#39;s just a call to a method as far as it&#39;s concerned. A breakpoint in the debugger occurs at a lower level. You should play with byebug for a while, outside of Pry, and it&#39;ll make more sense. I almost always use byebug for my debugging once I drop in, but I started in assembly language years ago so debuggers are pretty natural to me."}, {"owner": {"reputation": 6391, "user_id": 2909897, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/LMSiW.jpg?s=128&g=1", "display_name": "mbigras", "link": "https://stackoverflow.com/users/2909897/mbigras"}, "edited": false, "score": 0, "creation_date": 1483647542, "post_id": 41490951, "comment_id": 70193904, "body": "Would you say <code>byebug</code> is like <code>gdb</code>?"}], "tags": [], "owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "is_accepted": true, "score": 1, "last_activity_date": 1483637052, "last_edit_date": 1483637052, "creation_date": 1483636630, "answer_id": 41490951, "question_id": 41474811, "link": "https://stackoverflow.com/questions/41474811/set-conditional-breakpoint-with-pry-byebug/41490951#41490951", "title": "Set conditional breakpoint with pry-byebug", "body": "<p>Remove <code>binding.pry</code> from the inside of the loop and put it just before <code>10.times</code>:</p>\n\n<pre><code>binding.pry\n10.times.with_index do |i|\n</code></pre>\n\n<p>Then run the code. When it hits the breakpoint then set a new breakpoint with the conditional you want and <code>continue</code>.</p>\n\n<p>Back to your actual code. Don't do this:</p>\n\n<pre><code>10.times.with_index do |i|\n</code></pre>\n\n<p>Instead, this will do almost the same thing but it's simpler:</p>\n\n<pre><code>10.times do |i|\n</code></pre>\n\n<p>Here's what Ruby is doing:</p>\n\n<pre><code>&gt;&gt; 2.times.with_index.to_a\n[\n  [0] [\n    [0] 0,\n    [1] 0\n  ],\n  [1] [\n    [0] 1,\n    [1] 1\n  ]\n]\n</code></pre>\n\n<p>vs. </p>\n\n<pre><code>&gt;&gt; 2.times.to_a\n[\n  [0] 0,\n  [1] 1\n]\n</code></pre>\n\n<p>The first is passing in arrays of <code>[0,0]</code>, <code>[1,1]</code>, etc., so for correctness your block parameters need to be something like:</p>\n\n<pre><code>10.times.with_index do |i, j|\n</code></pre>\n\n<p>The second only passes the current \"times\" value, resulting in the more simple code.</p>\n"}], "owner": {"reputation": 6391, "user_id": 2909897, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/LMSiW.jpg?s=128&g=1", "display_name": "mbigras", "link": "https://stackoverflow.com/users/2909897/mbigras"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1539, "favorite_count": 3, "accepted_answer_id": 41490951, "answer_count": 2, "score": 4, "last_activity_date": 1483637052, "creation_date": 1483571669, "question_id": 41474811, "link": "https://stackoverflow.com/questions/41474811/set-conditional-breakpoint-with-pry-byebug", "title": "Set conditional breakpoint with pry-byebug", "body": "<p>Given the following code:</p>\n\n<pre><code>require 'pry-byebug'\n\n10.times.with_index do |i|\n  binding.pry\n  puts i\nend\n</code></pre>\n\n<p>I'd like to \"loop until <code>i == 5</code> then break\" while inside <code>pry-byebug</code>. From running it <code>help break</code> it seems like you can identify breakpoints by \"breakpoint #\" or \"line #\". It also seems like you can use conditions, however I'm not getting it to work:</p>\n\n<p>Trying to set breakpoint on line #:</p>\n\n<pre><code>$  ruby foo.rb\n\nFrom: /Users/max/Dropbox/work/tmp/pry_debug/foo.rb @ line 5 :\n\n    1: require 'pry-byebug'\n    2:\n    3: 10.times.with_index do |i|\n    4:   binding.pry\n =&gt; 5:   puts i\n    6: end\n\n[1] pry(main)&gt; break foo.rb:5 if i == 5\n\n  Breakpoint 1: /Users/max/Dropbox/work/tmp/pry_debug/foo.rb @ 5 (Enabled) Condition: i == 5\n\n\n    2:\n    3: 10.times.with_index do |i|\n    4:   binding.pry\n =&gt; 5:   puts i\n    6: end\n\n\n[2] pry(main)&gt; continue\n0\n\nFrom: /Users/max/Dropbox/work/tmp/pry_debug/foo.rb @ line 5 :\n\n    1: require 'pry-byebug'\n    2:\n    3: 10.times.with_index do |i|\n    4:   binding.pry\n =&gt; 5:   puts i\n    6: end\n\n[2] pry(main)&gt; i\n=&gt; 1\n</code></pre>\n\n<p>First setting breakpoint then putting condition on break point:</p>\n\n<pre><code>\u279c  ~/D/w/t/pry_debug  ruby foo.rb\n\nFrom: /Users/max/Dropbox/work/tmp/pry_debug/foo.rb @ line 5 :\n\n    1: require 'pry-byebug'\n    2:\n    3: 10.times.with_index do |i|\n    4:   binding.pry\n =&gt; 5:   puts i\n    6: end\n\n[1] pry(main)&gt; break foo.rb:15\n\n  Breakpoint 1: /Users/max/Dropbox/work/tmp/pry_debug/foo.rb @ 15 (Enabled)\n\n\n\n[2] pry(main)&gt; break --condition 1 i == 5\n[3] pry(main)&gt; c\n0\n\nFrom: /Users/max/Dropbox/work/tmp/pry_debug/foo.rb @ line 5 :\n\n    1: require 'pry-byebug'\n    2:\n    3: 10.times.with_index do |i|\n    4:   binding.pry\n =&gt; 5:   puts i\n    6: end\n\n[3] pry(main)&gt; i\n=&gt; 1\n</code></pre>\n\n<p>As you can see, in both cases <code>pry-byebug</code> doesn't respect the condition because it stops too soon. How do I get it to work?</p>\n"}, {"tags": ["ruby", "chef-infra", "thor"], "comments": [{"owner": {"reputation": 30536, "user_id": 400222, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/75febe3a9bd5b1ad9cb63fceccb6aa31?s=128&d=identicon&r=PG", "display_name": "StephenKing", "link": "https://stackoverflow.com/users/400222/stephenking"}, "edited": false, "score": 0, "creation_date": 1483731074, "post_id": 41474735, "comment_id": 70231891, "body": "The problem described in your <i>Edit</i> did not occur for me."}], "answers": [{"comments": [{"owner": {"reputation": 5556, "user_id": 1549950, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/4e1d79b0859761cf6de8f560784226cc?s=128&d=identicon&r=PG", "display_name": "Michael Lihs", "link": "https://stackoverflow.com/users/1549950/michael-lihs"}, "edited": false, "score": 0, "creation_date": 1483655726, "post_id": 41474996, "comment_id": 70198047, "body": "I tried this and it didn&#39;t work for me - see the edit in my question."}], "tags": [], "owner": {"reputation": 43208, "user_id": 78722, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf611565f0b79abd0b3dc200ad867661?s=128&d=identicon&r=PG", "display_name": "coderanger", "link": "https://stackoverflow.com/users/78722/coderanger"}, "is_accepted": true, "score": 2, "last_activity_date": 1483572739, "creation_date": 1483572739, "answer_id": 41474996, "question_id": 41474735, "link": "https://stackoverflow.com/questions/41474735/use-global-thorfile/41474996#41474996", "title": "Use &quot;global&quot; Thorfile", "body": "<p>You can use <code>thor install</code> to set up a system-wide task. Bear in mind this might make things more difficult for other people since it won't be set up in git for them.</p>\n"}], "owner": {"reputation": 5556, "user_id": 1549950, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/4e1d79b0859761cf6de8f560784226cc?s=128&d=identicon&r=PG", "display_name": "Michael Lihs", "link": "https://stackoverflow.com/users/1549950/michael-lihs"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 250, "favorite_count": 0, "accepted_answer_id": 41474996, "answer_count": 1, "score": 3, "last_activity_date": 1483656359, "creation_date": 1483571170, "last_edit_date": 1483656359, "question_id": 41474735, "link": "https://stackoverflow.com/questions/41474735/use-global-thorfile", "title": "Use &quot;global&quot; Thorfile", "body": "<p>I want to use Thor with <a href=\"https://github.com/RiotGamesMinions/thor-scmversion\" rel=\"nofollow noreferrer\">thor-scmversion</a> to bump the version of my Chef cookbooks. The normal way of using Thor is to create a <code>Thorfile</code> in the project folder and have tasks implemented in there. For my use case I would have to create a <code>Thorfile</code> in every cookbook I write containing only</p>\n\n<pre><code>require 'thor/scmversion'\n</code></pre>\n\n<p>My question is, whether I can somehow put such a file in a \"global\" directory and point to it, when I run <code>thor</code> on the command line from within my project folder.</p>\n\n<p><strong>Edit</strong></p>\n\n<p>I followed @coderanger's advice and used <code>thor install Thorfile</code>. This creates a directory <code>.thor</code> in the user's home directory (in my case: <code>/var/lib/jenkins/.thor</code>) and a <code>thor.yml</code> file that includes a reference to the <code>Thorfile</code> I added with the upper command.</p>\n\n<p>When I now run <code>thor list</code>, I get</p>\n\n<pre><code>$ thor list\nversion\n-------\nthor version:bump TYPE [PRERELEASE_TYPE]  # Bump version number (type is major, minor, patch, prerelease or auto)\nthor version:current                      # Show current SCM tagged version\n</code></pre>\n\n<p>but running <code>thor version:current</code>, I get the following error:</p>\n\n<pre><code>Could not find command \"version:current\".\n</code></pre>\n\n<p>So probably I missed something?</p>\n"}, {"tags": ["ruby", "exception", "error-handling", "rescue"], "comments": [{"owner": {"reputation": 343, "user_id": 3840725, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5un6e.jpg?s=128&g=1", "display_name": "jpheos", "link": "https://stackoverflow.com/users/3840725/jpheos"}, "edited": false, "score": 1, "creation_date": 1483570523, "post_id": 41474448, "comment_id": 70155148, "body": "you can use an other <code>begin rescue</code> block inside the rescue. Or just do nothing in the rescue block. I&#39;m not sure to understand what is your problem. If the code raise an exception on your <code>rescue</code> block, I want to say you: just fix the bug :)"}], "answers": [{"comments": [{"owner": {"reputation": 2572, "user_id": 2862049, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffd65bc37e559c2c407f064f308828a4?s=128&d=identicon&r=PG&f=1", "display_name": "Lukas Baliak", "link": "https://stackoverflow.com/users/2862049/lukas-baliak"}, "edited": false, "score": 0, "creation_date": 1483611608, "post_id": 41474652, "comment_id": 70169846, "body": "<code>rescue</code> is not same as <code>rescue Exception</code>."}], "tags": [], "owner": {"reputation": 12542, "user_id": 156746, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/8TsPx.jpg?s=128&g=1", "display_name": "DiegoSalazar", "link": "https://stackoverflow.com/users/156746/diegosalazar"}, "is_accepted": false, "score": 5, "last_activity_date": 1483640545, "last_edit_date": 1483640545, "creation_date": 1483570728, "answer_id": 41474652, "question_id": 41474448, "link": "https://stackoverflow.com/questions/41474448/what-is-a-good-way-to-suppress-exceptions-inside-the-rescue-clause-in-ruby/41474652#41474652", "title": "What is a good way to suppress exceptions inside the rescue clause in Ruby?", "body": "<p>You said it yourself</p>\n\n<blockquote>\n  <p>wrap the rescue in a rescue</p>\n</blockquote>\n\n<p><em>Exception Inception</em></p>\n\n<p>There's no special way other than wrapping blocks of code in a <code>begin rescue end</code> block:</p>\n\n<pre><code>begin\n  do_something\nrescue\n  begin\n    Logger.write ...\n  rescue\n    ...error handling...\n  end\nend\n</code></pre>\n\n<p>...unless you're using ActiveSupport: <a href=\"http://api.rubyonrails.org/classes/Kernel.html#method-i-suppress\" rel=\"nofollow noreferrer\">http://api.rubyonrails.org/classes/Kernel.html#method-i-suppress</a></p>\n\n<pre><code>suppress(Exception) do\n  # all exceptions will be suppressed\nend\n</code></pre>\n\n<p>..but it isn't a plain Ruby thing and I noticed you didn't add a rails tag to your question. Though, you can implement <code>suppress</code> yourself. Or, just, here take this:</p>\n\n<pre><code>def suppress(*exception_classes)\n  yield\nrescue *exception_classes\nend\n</code></pre>\n\n<p>Use that in your rescue:</p>\n\n<pre><code>begin\n  do_something\nrescue\n  Logger.write ...\n\n  suppress Exception do\n    ...error handling...\n  end\nend\n</code></pre>\n\n<p>In plain old Ruby it's got to be rescues all the way down (and indeed, <code>suppress</code> is just a nested rescue) but let me just state that it's a bad idea to rescue all exceptions, in essence, by not being explicit about what exception you're rescuing, in other words, by not passing an exception class argument to <code>rescue</code> you're implicitly rescuing <code>StandardError</code> which is the superclass to most exceptions (<a href=\"http://rubylearning.com/satishtalim/ruby_exceptions.html\" rel=\"nofollow noreferrer\">more info here</a>). This can lead to hard to find bugs.</p>\n\n<pre><code>begin    \nrescue\nend\n</code></pre>\n\n<p>..is the same as:</p>\n\n<pre><code>begin\nrescue StandardError\nend\n</code></pre>\n\n<p>It's much better to know what exception you're rescuing and be explicit about it:</p>\n\n<pre><code>begin\nrescue SomeApiError =&gt; e\n  # do something when this specific exception occurs\nend\n</code></pre>\n\n<p>With that figured out you can use a cascade strategy to rescue your exceptions:</p>\n\n<pre><code>begin\n  # do the thing\nrescue SomeApiError =&gt; e \n  # specific rescue\nrescue SomeOtherError =&gt; e\n  # more broad error handling\nrescue\n  # catch all rescue\nend\n</code></pre>\n\n<p>With the above only the rescue clause that matches the exception being raised will run however, code in a rescue block won't be rescued by subsequent rescues, only the code in the <code>begin</code> block is rescuable.</p>\n\n<p>If you want to have a block of code that always runs even in the event of an exception, use the <code>ensure</code> keyword:</p>\n\n<pre><code>begin\n  # code\nrescue =&gt; e\n  # rescue code\nensure\n  # this block will always run exception or not\nend\n</code></pre>\n"}], "owner": {"reputation": 39282, "user_id": 336920, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/6e2dbeb23d3fc6552a6e26800ed63289?s=128&d=identicon&r=PG", "display_name": "B Seven", "link": "https://stackoverflow.com/users/336920/b-seven"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1733, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1483640545, "creation_date": 1483569612, "question_id": 41474448, "link": "https://stackoverflow.com/questions/41474448/what-is-a-good-way-to-suppress-exceptions-inside-the-rescue-clause-in-ruby", "title": "What is a good way to suppress exceptions inside the rescue clause in Ruby?", "body": "<pre><code>begin\n  do_something\nrescue\n  Logger.write ...\n\n  ...error handling...\nend\n</code></pre>\n\n<p>The problem is that it is possible that the code <strong><em>inside the rescue</em></strong> raises an exception. For this use case, I want to suppress it.</p>\n\n<p>So, how to wrap the rescue in a rescue to suppress the Exception?</p>\n"}, {"tags": ["javascript", "ruby-on-rails", "ruby", "internationalization"], "answers": [{"comments": [{"owner": {"reputation": 911, "user_id": 5079196, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/UWfbG.jpg?s=128&g=1", "display_name": "gwalshington", "link": "https://stackoverflow.com/users/5079196/gwalshington"}, "edited": false, "score": 0, "creation_date": 1483990006, "post_id": 41487086, "comment_id": 70316081, "body": "it&#39;s all environments. I will add something new to the yml files, and that new translation does not come up. I tried what you suggested, but the translations are still missing :/"}], "tags": [], "owner": {"reputation": 53, "user_id": 2545521, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/f0286a29904b6d06e8737d7384e85958?s=128&d=identicon&r=PG&f=1", "display_name": "user2545521", "link": "https://stackoverflow.com/users/2545521/user2545521"}, "is_accepted": false, "score": 0, "last_activity_date": 1483625131, "creation_date": 1483625131, "answer_id": 41487086, "question_id": 41474435, "link": "https://stackoverflow.com/questions/41474435/i18n-js-translations-not-updating-with-additional-translations-in-yml/41487086#41487086", "title": "i18n-js translations not updating with additional translations in .yml", "body": "<p>Not sure if you mean <code>dev</code> or <code>prod</code> env. I had a similar problem in my <code>dev</code> env and I solved it by adding <code>config.middleware.use(I18n::JS::Middleware)</code> to <code>config/application.rb</code>. You can check it <a href=\"https://github.com/fnando/i18n-js#rails-app-without-asset-pipeline\" rel=\"nofollow noreferrer\">here</a>. Hope it helps.</p>\n"}, {"comments": [{"owner": {"reputation": 911, "user_id": 5079196, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/UWfbG.jpg?s=128&g=1", "display_name": "gwalshington", "link": "https://stackoverflow.com/users/5079196/gwalshington"}, "edited": false, "score": 0, "creation_date": 1483991784, "post_id": 41555837, "comment_id": 70317010, "body": "That was just an example. The question says &#39;When I add new translations to the corresponding yml file, the i18n/translations.js does not update to include the new .yml translations.&#39;   And even if I had the English translation, and it was looking for French, it would default to the English translation IF it could find it. Again... it is not there cause it isn&#39;t updating"}], "tags": [], "owner": {"reputation": 119, "user_id": 6552769, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xuzvYF5Xjo8/AAAAAAAAAAI/AAAAAAAABZU/PrTYC-THLYU/photo.jpg?sz=128", "display_name": "Lucas Ferronato", "link": "https://stackoverflow.com/users/6552769/lucas-ferronato"}, "is_accepted": false, "score": -1, "last_activity_date": 1483991627, "creation_date": 1483991627, "answer_id": 41555837, "question_id": 41474435, "link": "https://stackoverflow.com/questions/41474435/i18n-js-translations-not-updating-with-additional-translations-in-yml/41555837#41555837", "title": "i18n-js translations not updating with additional translations in .yml", "body": "<p>It seems that you have the English translation but is trying to access french locale instead.</p>\n"}, {"comments": [{"owner": {"reputation": 911, "user_id": 5079196, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/UWfbG.jpg?s=128&g=1", "display_name": "gwalshington", "link": "https://stackoverflow.com/users/5079196/gwalshington"}, "edited": false, "score": 1, "creation_date": 1484261145, "post_id": 41604634, "comment_id": 70450134, "body": "Thank you for the response! That is just a spelling error in my post, and not the reason new translations would be missing, but current ones are still there. Edited in question :)"}], "tags": [], "owner": {"reputation": 9415, "user_id": 1099571, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/aebf26d0199bcad3464052df467b42e7?s=128&d=identicon&r=PG", "display_name": "Jim DeLaHunt", "link": "https://stackoverflow.com/users/1099571/jim-delahunt"}, "is_accepted": false, "score": 0, "last_activity_date": 1484191791, "creation_date": 1484191791, "answer_id": 41604634, "question_id": 41474435, "link": "https://stackoverflow.com/questions/41474435/i18n-js-translations-not-updating-with-additional-translations-in-yml/41604634#41604634", "title": "i18n-js translations not updating with additional translations in .yml", "body": "<p>In the <code>.yml</code> file, check for a colon after the language code. </p>\n\n<p>Your example reads:</p>\n\n<pre><code>en\n form_error:\n    cancel_reason: \"Please provide a reason for cancelling.\"\n</code></pre>\n\n<p>Try:</p>\n\n<pre><code>en:\n form_error:\n    cancel_reason: \"Please provide a reason for cancelling.\"\n</code></pre>\n\n<p>I haven't tried exercising an example with this. However, the <code>.yml</code> files in the projects I have copies of all have colon after the language name. And it's just the sort of infuriating typo that might be invisible to someone close to it. Grr!</p>\n"}, {"comments": [{"owner": {"reputation": 911, "user_id": 5079196, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/UWfbG.jpg?s=128&g=1", "display_name": "gwalshington", "link": "https://stackoverflow.com/users/5079196/gwalshington"}, "edited": false, "score": 0, "creation_date": 1484262058, "post_id": 41617722, "comment_id": 70450475, "body": "Thanks for all the details! I added the relavent config files. Hopefully that helps!"}, {"owner": {"reputation": 16977, "user_id": 2518355, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4f3ed231a208476815d1b89dcc045aa6?s=128&d=identicon&r=PG", "display_name": "wjordan", "link": "https://stackoverflow.com/users/2518355/wjordan"}, "reply_to_user": {"reputation": 911, "user_id": 5079196, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/UWfbG.jpg?s=128&g=1", "display_name": "gwalshington", "link": "https://stackoverflow.com/users/5079196/gwalshington"}, "edited": false, "score": 0, "creation_date": 1484262583, "post_id": 41617722, "comment_id": 70450639, "body": "@gwalshington see update for the solution to your issue."}], "tags": [], "owner": {"reputation": 16977, "user_id": 2518355, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4f3ed231a208476815d1b89dcc045aa6?s=128&d=identicon&r=PG", "display_name": "wjordan", "link": "https://stackoverflow.com/users/2518355/wjordan"}, "is_accepted": true, "score": 3, "last_activity_date": 1484262435, "last_edit_date": 1495541789, "creation_date": 1484236852, "answer_id": 41617722, "question_id": 41474435, "link": "https://stackoverflow.com/questions/41474435/i18n-js-translations-not-updating-with-additional-translations-in-yml/41617722#41617722", "title": "i18n-js translations not updating with additional translations in .yml", "body": "<h3>Update</h3>\n\n<p>After looking at the additional configuration files, this <code>config/i18n-js.yml</code> seems suspect:</p>\n\n<pre><code>translations:\n- file: \"app/assets/javascripts/application/i18n/translations.js\"\n  only: '*.js*'\n</code></pre>\n\n<p>According to the <a href=\"https://github.com/fnando/i18n-js#export-configuration-for-translations\" rel=\"nofollow noreferrer\">export configuration</a> docs, the <code>only</code> key refers to the <strong>translation keys</strong> to be exported, not the filenames. So <code>'*.js*'</code> will match nothing, causing <em>no</em> translations to be exported.</p>\n\n<p>Change this file to read:</p>\n\n<pre><code>translations:\n- file: \"app/assets/javascripts/application/i18n/translations.js\"\n  only: '*'\n</code></pre>\n\n<hr>\n\n<p>(Original answer below)</p>\n\n<h3>Working example</h3>\n\n<p>Here's a minimal, working example that produces expected behavior with the <code>i18n-js</code> gem:</p>\n\n<pre><code>#!/bin/bash\nrails _5.0.1_ new .\necho \"gem 'i18n-js', '3.0.0.rc15'\" &gt;&gt; Gemfile\necho \"  NEW_KEY: NEW_VALUE\" &gt;&gt; config/locales/en.yml\nbundle install\nbundle exec rake i18n:js:export\ngrep -o '\"NEW_KEY\"' public/javascripts/translations.js\n</code></pre>\n\n<p>For me, running the above script outputs <code>\"NEW_KEY\"</code> on the last line, as expected (demonstrating that <code>NEW_KEY</code> is correctly added to <code>public/javascripts/translations.js</code> after running <code>i18n:js:export</code> in a fresh Rails installation), which means something else is going on in your local project.</p>\n\n<h3>Further investigation</h3>\n\n<p>In order to know what else exactly is going on, you'll have to further investigate exactly what configuration you've changed locally when compared to a fresh Rails installation.</p>\n\n<p>(Note that the easiest way to do this is to provide a <a href=\"https://stackoverflow.com/help/mcve\">Minimal, Complete and Verifiable example</a>, such as a link to a GitHub repo that produces your issue exactly.)</p>\n\n<ul>\n<li>you say \"the i18n/translations.js does not update to include the new .yml translations.\", but the default path that gets updated is <code>public/javascripts/translations.js</code>. If you're using a non-standard path for your <code>translations.js</code> file, do you have additional configuration for this in <code>config/i18n-js.yml</code>? (If so, please share the entire contents of this file).</li>\n<li>Have you confirmed that the new translation doesn't show up in <code>translations.js</code> at all (e.g., using a <code>grep</code> command like the one above)? Or is it possible that the issue is related to the <a href=\"https://github.com/fnando/i18n-js#rails-app-with-asset-pipeline\" rel=\"nofollow noreferrer\">asset pipeline</a> configuration instead?</li>\n</ul>\n"}], "owner": {"reputation": 911, "user_id": 5079196, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/UWfbG.jpg?s=128&g=1", "display_name": "gwalshington", "link": "https://stackoverflow.com/users/5079196/gwalshington"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2578, "favorite_count": 0, "accepted_answer_id": 41617722, "answer_count": 4, "score": 4, "last_activity_date": 1484262435, "creation_date": 1483569554, "last_edit_date": 1484262002, "question_id": 41474435, "link": "https://stackoverflow.com/questions/41474435/i18n-js-translations-not-updating-with-additional-translations-in-yml", "title": "i18n-js translations not updating with additional translations in .yml", "body": "<p>I have been reading about this for days, and nothing seems to be working. I have seen a lot of documentation of this issue, but none of the work arounds are working for me.\nI have :</p>\n\n<pre><code>  Rails 5.0.1\n  * sprockets (3.7.1)\n  * sprockets-rails (3.2.0)\n  * i18n (0.7.0)\n  * i18n-js (3.0.0.rc15)\n</code></pre>\n\n<p>config/i18n-js.yml</p>\n\n<pre><code>translations:\n- file: \"app/assets/javascripts/application/i18n/translations.js\"\n  only: '*.js*'\n</code></pre>\n\n<p>config/application.rb</p>\n\n<pre><code>    config.middleware.use I18n::JS::Middleware\n</code></pre>\n\n<p>When I add new translations to the corresponding yml file, the i18n/translations.js does not update to include the new .yml translations.</p>\n\n<p>For example, in en.yml:</p>\n\n<pre><code>en:\n form_error:\n    tos_check: \"You must agree to Lexody's Terms of Use to continue.\"\n    choose_city: \"Please select a city from the menu.\"\n    cancel_reason: \"Please provide a reason for cancelling.\"\n\n$('.prompt').html('&lt;p style=\"color:#e57373\"&gt;' + I18n.t('form_error.cancel_reason') +'&lt;/p&gt;');\n</code></pre>\n\n<p>returns: <code>[missing \"en.form_error.cancel_reason\" translation]</code></p>\n\n<p>I have tried:</p>\n\n<p>Deleting translations.js and run <code>rake i18n:js:export</code></p>\n\n<p><code>rake tmp:cache:clear</code></p>\n\n<p><code>rake assets:precompile</code></p>\n\n<p>Does anyone have another solution I can try? Thanks!!</p>\n"}, {"tags": ["arrays", "ruby", "directory", "sinatra", "wiki"], "answers": [{"tags": [], "owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "is_accepted": true, "score": 1, "last_activity_date": 1483571978, "creation_date": 1483571978, "answer_id": 41474873, "question_id": 41474413, "link": "https://stackoverflow.com/questions/41474413/getting-and-displaying-all-files-in-a-folder-as-links-on-the-home-page-of-my-sin/41474873#41474873", "title": "Getting and displaying all files in a folder as links on the home page of my sinatra app", "body": "<pre><code>  @entries = Dir[\"pages/*.txt\"].\n               map { |path| path.split '/' }.\n               flatten.\n               reject { |path| path == 'pages' }.\n               sample(5)\n</code></pre>\n\n<p>The most obvious thing is to chain method calls. Doing this also leads to a more \"functional programming\" style. Note how I replaced <code>delete_if</code> (which mutates the array) with <code>reject</code> (which doesn't). I also removed the \"bang\" methods because using mutating methods is unnecessary here. These shouldn't be the first thing you reach for, because they can sometimes have unintended effects.</p>\n\n<p>For example I recently found a co-worker had written <code>return string.gsub!(\" \", \"\")</code> or something like that. The problem is <code>gsub!</code> returns nil. Using <code>gsub</code> instead worked. </p>\n"}], "owner": {"reputation": 3, "user_id": 7226472, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/77c6cc76f7bbfbdb62dd914d2fe59321?s=128&d=identicon&r=PG&f=1", "display_name": "mattor", "link": "https://stackoverflow.com/users/7226472/mattor"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 22, "favorite_count": 0, "accepted_answer_id": 41474873, "answer_count": 1, "score": 0, "last_activity_date": 1483571978, "creation_date": 1483569466, "question_id": 41474413, "link": "https://stackoverflow.com/questions/41474413/getting-and-displaying-all-files-in-a-folder-as-links-on-the-home-page-of-my-sin", "title": "Getting and displaying all files in a folder as links on the home page of my sinatra app", "body": "<p>I'm making a wiki in Sinatra and I have the following code, which works, it just strikes me as a little bit clunky. I'm trying to get all the wiki entries saved in \"pages\" and display them on the homepage as links.</p>\n\n<pre><code>get \"/\" do\n  @entries = Dir[\"pages/*.txt\"]\n  @entries.map! { |f| f.split '/' }\n  @entries.flatten!\n  @entries.delete_if { |p| p == \"pages\" }\n  @entries = @entries.sample(5)\n  erb :welcome, layout: :page\nend\n</code></pre>\n\n<p>If any ruby genius would like to demonstrate eloquent ruby I would be very grateful!</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "rspec", "omniauth", "omniauth-google-oauth2"], "answers": [{"comments": [{"owner": {"reputation": 7377, "user_id": 896112, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/af5a028afcb5ffe89e19a3a9f9454695?s=128&d=identicon&r=PG", "display_name": "Carpetfizz", "link": "https://stackoverflow.com/users/896112/carpetfizz"}, "edited": false, "score": 0, "creation_date": 1483643808, "post_id": 41476716, "comment_id": 70191834, "body": "Thanks for the reply, I&#39;m testing it out. I get an undefined method <code>visit</code> error. I only have <code>require &#39;rails_helper&#39;</code> and the <code>rspec-rails</code> gem installed"}, {"owner": {"reputation": 7377, "user_id": 896112, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/af5a028afcb5ffe89e19a3a9f9454695?s=128&d=identicon&r=PG", "display_name": "Carpetfizz", "link": "https://stackoverflow.com/users/896112/carpetfizz"}, "edited": false, "score": 0, "creation_date": 1483644091, "post_id": 41476716, "comment_id": 70191990, "body": "Just installed <code>capybara</code> as it seems to define the <code>visit</code> method, yet I am still getting the error."}, {"owner": {"reputation": 2090, "user_id": 642978, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/WpQgb.jpg?s=128&g=1", "display_name": "mroach", "link": "https://stackoverflow.com/users/642978/mroach"}, "reply_to_user": {"reputation": 7377, "user_id": 896112, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/af5a028afcb5ffe89e19a3a9f9454695?s=128&d=identicon&r=PG", "display_name": "Carpetfizz", "link": "https://stackoverflow.com/users/896112/carpetfizz"}, "edited": false, "score": 1, "creation_date": 1483761437, "post_id": 41476716, "comment_id": 70241527, "body": "Did you add <code>require &#39;capybara&#47;rails&#39;</code> to your <code>rails_helper.rb</code>?"}], "tags": [], "owner": {"reputation": 2090, "user_id": 642978, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/WpQgb.jpg?s=128&g=1", "display_name": "mroach", "link": "https://stackoverflow.com/users/642978/mroach"}, "is_accepted": true, "score": 1, "last_activity_date": 1483585501, "creation_date": 1483585501, "answer_id": 41476716, "question_id": 41474315, "link": "https://stackoverflow.com/questions/41474315/undefined-method-provider-for-nilnilclass-rspec-omniauth/41476716#41476716", "title": "undefined method `provider&#39; for nil:NilClass, RSpec, OmniAuth", "body": "<p>There are a couple issues that I see. For one, you're not testing the action of signing-in. You're hitting a controller action with oauth data in the request and expecting it to pass authentication. Oauth data isn't like an API key and won't let you auto sign-in like that. You have to hit the specific signin action provided by omniauth which then sets-up your user's session. This should be tested on its own to confirm that your whole oauth sign-in strategy works as expected. If you're testing controller actions that are not directly related to the act of oauth signins, then you should be using <a href=\"https://github.com/plataformatec/devise/wiki/How-To:-Test-controllers-with-Rails-3-and-4-(and-RSpec)\" rel=\"nofollow noreferrer\">the devise test helpers</a> to sign-in users before running tests that would require authentication.</p>\n\n<p>Also, you don't want to be setting the <code>OmniAuth</code> configuration in an environment initialiser. The documentation suggests, and what I do myself, is set the configuration down in the tests. For one thing, this allows you to test different kinds of scenarios. For example, this is how I test that my omniauth callback controllers are working and doing what I want:</p>\n\n<pre><code>context 'with valid google credentials' do\n  # this should actually be created in a factory\n  let(:provider) { :google_oauth2 }\n  let(:oauth) { OmniAuth::AuthHash.new provider: provider, uid: '1234' }\n  before do\n    OmniAuth.config.test_mode = true\n    OmniAuth.config.mock_auth[provider] = oauth\n  end\n\n  it 'creates a new user' do\n    expect { visit \"/users/auth/#{provider}\" }.to change(User, :count).by(1)\n  end\nend \n</code></pre>\n"}], "owner": {"reputation": 7377, "user_id": 896112, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/af5a028afcb5ffe89e19a3a9f9454695?s=128&d=identicon&r=PG", "display_name": "Carpetfizz", "link": "https://stackoverflow.com/users/896112/carpetfizz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 946, "favorite_count": 0, "accepted_answer_id": 41476716, "answer_count": 1, "score": 0, "last_activity_date": 1483585501, "creation_date": 1483569021, "question_id": 41474315, "link": "https://stackoverflow.com/questions/41474315/undefined-method-provider-for-nilnilclass-rspec-omniauth", "title": "undefined method `provider&#39; for nil:NilClass, RSpec, OmniAuth", "body": "<p>I'm trying to test an authenticated controller with RSpec and OmniAuth. I've followed the <a href=\"https://github.com/omniauth/omniauth/wiki/Integration-Testing\" rel=\"nofollow noreferrer\">integration testing</a> guide on their wiki. When I run the test, I get the following error:</p>\n\n<pre><code>Failure/Error:\n       where(provider: auth.provider, uid: auth.uid).first_or_initialize.tap do |user|\n        user.provider = auth.provider\n        user.uid = auth.uid\n        user.first_name = auth.info.first_name\n        user.last_name = auth.info.last_name\n        user.email = auth.info.email\n        user.picture = auth.info.image\n        user.save!\n       end\n\n     NoMethodError:\n       undefined method `provider' for nil:NilClass\n</code></pre>\n\n<p>All relevant code is provided in this <a href=\"https://gist.github.com/Carpetfizz/5dad0f0f8d5abe79cbe39d6d226cd5e0\" rel=\"nofollow noreferrer\">gist</a>. My hunch is that the mock auth hash isn't being set somehow but I have no way of verifying that. I configure OmniAuth in <code>config/environments/test.rb</code> as shown in the Gist, and I'm pretty sure that file is ran when the application boots.</p>\n"}, {"tags": ["ruby", "parsing"], "comments": [{"owner": {"reputation": 41846, "user_id": 926143, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/3396173c3d22988be1a0732d184902aa?s=128&d=identicon&r=PG", "display_name": "7stud", "link": "https://stackoverflow.com/users/926143/7stud"}, "edited": false, "score": 0, "creation_date": 1483569285, "post_id": 41474281, "comment_id": 70154668, "body": "<i>how would it know that /3/ is not a regex</i> -- Because the word &quot;match&quot; nor the symbol &quot;~&quot; appears anywhere in the line?"}, {"owner": {"reputation": 6596, "user_id": 5021321, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/29f10a1b457e63d44e3a221e89e32c17?s=128&d=identicon&r=PG", "display_name": "Eli Sadoff", "link": "https://stackoverflow.com/users/5021321/eli-sadoff"}, "reply_to_user": {"reputation": 41846, "user_id": 926143, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/3396173c3d22988be1a0732d184902aa?s=128&d=identicon&r=PG", "display_name": "7stud", "link": "https://stackoverflow.com/users/926143/7stud"}, "edited": false, "score": 0, "creation_date": 1483569316, "post_id": 41474281, "comment_id": 70154679, "body": "@7stud <code>&#47;3&#47;</code> on its own with nothing else is a valid Regex."}, {"owner": {"reputation": 41846, "user_id": 926143, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/3396173c3d22988be1a0732d184902aa?s=128&d=identicon&r=PG", "display_name": "7stud", "link": "https://stackoverflow.com/users/926143/7stud"}, "edited": false, "score": 0, "creation_date": 1483569499, "post_id": 41474281, "comment_id": 70154746, "body": "Okay.  Parsing rule 1) if nothing outside of //, then regex.  2) If characters outside of //, and none of them spell &quot;match&quot; and none are &quot;~&quot;, then division."}, {"owner": {"reputation": 6596, "user_id": 5021321, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/29f10a1b457e63d44e3a221e89e32c17?s=128&d=identicon&r=PG", "display_name": "Eli Sadoff", "link": "https://stackoverflow.com/users/5021321/eli-sadoff"}, "reply_to_user": {"reputation": 41846, "user_id": 926143, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/3396173c3d22988be1a0732d184902aa?s=128&d=identicon&r=PG", "display_name": "7stud", "link": "https://stackoverflow.com/users/926143/7stud"}, "edited": false, "score": 0, "creation_date": 1483569696, "post_id": 41474281, "comment_id": 70154818, "body": "@7stud That&#39;s not true once again. <code>&#47;a&#47;i</code> is a valid regex. The key was no prefixes apparently."}, {"owner": {"reputation": 41846, "user_id": 926143, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/3396173c3d22988be1a0732d184902aa?s=128&d=identicon&r=PG", "display_name": "7stud", "link": "https://stackoverflow.com/users/926143/7stud"}, "edited": false, "score": 0, "creation_date": 1483570011, "post_id": 41474281, "comment_id": 70154944, "body": "Yet, if there&#39;s a space between the two, it is an error. Parsing rule 1) if nothing outside of //, then regex. 2) If characters immediately after trailing /, then check against valid modifiers, if valid modifier, then regex, otherwise division.  3) Other characters outside of //, and none of them spell &quot;match&quot; and none are &quot;~&quot;, then division.  In any case, you can build up a parsing rule that takes care of all the possibilities, and if it can&#39;t then the syntax has to be invalid."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 2, "creation_date": 1483570020, "post_id": 41474281, "comment_id": 70154949, "body": "Note that <code>a</code>, <code>a &#47;b&#47;</code> and <code>a &#47;b&#47; c</code> are three completely different situations. The second is passing a regular expression to a function <code>a</code> if one&#39;s defined. The third only makes sense if they&#39;re all variables. You&#39;ll get parse errors otherwise."}, {"owner": {"reputation": 6596, "user_id": 5021321, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/29f10a1b457e63d44e3a221e89e32c17?s=128&d=identicon&r=PG", "display_name": "Eli Sadoff", "link": "https://stackoverflow.com/users/5021321/eli-sadoff"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1483570128, "post_id": 41474281, "comment_id": 70155002, "body": "@tadman Now I have a question. Let&#39;s say I have <code>def a(b); b; end</code> and then I have <code>a, b, i = 1, 2, 3</code>. How is <code>a &#47;b&#47;i</code> <code>0</code> instead of <code>&#47;b&#47;i</code>?"}, {"owner": {"reputation": 41846, "user_id": 926143, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/3396173c3d22988be1a0732d184902aa?s=128&d=identicon&r=PG", "display_name": "7stud", "link": "https://stackoverflow.com/users/926143/7stud"}, "edited": false, "score": 1, "creation_date": 1483570504, "post_id": 41474281, "comment_id": 70155138, "body": "@EliSadoff, It&#39;s a complicated parsing rule that has to be built up from humble beginnings.  You really can&#39;t think of any logic that could account for  what you are seeing, e.g. if i is a lcoal variable then division, not regex?"}, {"owner": {"reputation": 6596, "user_id": 5021321, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/29f10a1b457e63d44e3a221e89e32c17?s=128&d=identicon&r=PG", "display_name": "Eli Sadoff", "link": "https://stackoverflow.com/users/5021321/eli-sadoff"}, "reply_to_user": {"reputation": 41846, "user_id": 926143, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/3396173c3d22988be1a0732d184902aa?s=128&d=identicon&r=PG", "display_name": "7stud", "link": "https://stackoverflow.com/users/926143/7stud"}, "edited": false, "score": 0, "creation_date": 1483570540, "post_id": 41474281, "comment_id": 70155161, "body": "@7stud That&#39;s pretty much what my question was trying to ask. How the hell does this work?"}, {"owner": {"reputation": 41846, "user_id": 926143, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/3396173c3d22988be1a0732d184902aa?s=128&d=identicon&r=PG", "display_name": "7stud", "link": "https://stackoverflow.com/users/926143/7stud"}, "edited": false, "score": 0, "creation_date": 1483570570, "post_id": 41474281, "comment_id": 70155172, "body": "The answer: a complicated parsing rule."}, {"owner": {"reputation": 6596, "user_id": 5021321, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/29f10a1b457e63d44e3a221e89e32c17?s=128&d=identicon&r=PG", "display_name": "Eli Sadoff", "link": "https://stackoverflow.com/users/5021321/eli-sadoff"}, "reply_to_user": {"reputation": 41846, "user_id": 926143, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/3396173c3d22988be1a0732d184902aa?s=128&d=identicon&r=PG", "display_name": "7stud", "link": "https://stackoverflow.com/users/926143/7stud"}, "edited": false, "score": 0, "creation_date": 1483570598, "post_id": 41474281, "comment_id": 70155186, "body": "@7stud certainly, I just would like to know what the actual rule is."}, {"owner": {"reputation": 5496, "user_id": 2661491, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/829f8aba5815197b56359be148cd0a13?s=128&d=identicon&r=PG", "display_name": "evan.oman", "link": "https://stackoverflow.com/users/2661491/evan-oman"}, "edited": false, "score": 1, "creation_date": 1483570677, "post_id": 41474281, "comment_id": 70155217, "body": "<a href=\"http://programmingisterrible.com/post/42432568185/how-to-parse-ruby\" rel=\"nofollow noreferrer\">programmingisterrible.com/post/42432568185/how-to-parse-ruby</a>"}, {"owner": {"reputation": 5496, "user_id": 2661491, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/829f8aba5815197b56359be148cd0a13?s=128&d=identicon&r=PG", "display_name": "evan.oman", "link": "https://stackoverflow.com/users/2661491/evan-oman"}, "edited": false, "score": 2, "creation_date": 1483570743, "post_id": 41474281, "comment_id": 70155249, "body": "Should be defined somewhere in these 11.5k lines: <a href=\"https://github.com/ruby/ruby/blob/trunk/parse.y\" rel=\"nofollow noreferrer\">github.com/ruby/ruby/blob/trunk/parse.y</a>"}, {"owner": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "edited": false, "score": 1, "creation_date": 1483570860, "post_id": 41474281, "comment_id": 70155292, "body": "BTW, when you write <code>a&#47;b&#47;c</code> on a piece of paper (<code>a</code> above <code>b</code> above <code>c</code> with division lines of different width inbetween), it&#39;s easy to see the difference between <code>a&#47;(b&#47;c)</code> and <code>(a&#47;b)&#47;c</code>. When you type it in one line, it becomes ambigous, and shouldn&#39;t be used. See <a href=\"http://math.stackexchange.com/questions/132919/correct-precedence-of-division-operators\" title=\"correct precedence of division operators\">math.stackexchange.com/questions/132919/&hellip;</a>"}, {"owner": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "edited": false, "score": 1, "creation_date": 1483570933, "post_id": 41474281, "comment_id": 70155322, "body": "Ripper is a great lib (<a href=\"http://ruby-doc.org/stdlib-2.4.0/libdoc/ripper/rdoc/Ripper.html\" rel=\"nofollow noreferrer\">ruby-doc.org/stdlib-2.4.0/libdoc/ripper/rdoc/Ripper.html</a>) : <code>require &#39;ripper&#39;; require &#39;pp&#39;; pp Ripper.sexp(&#39;6&#47;3&#47;2&#39;)</code>"}, {"owner": {"reputation": 5496, "user_id": 2661491, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/829f8aba5815197b56359be148cd0a13?s=128&d=identicon&r=PG", "display_name": "evan.oman", "link": "https://stackoverflow.com/users/2661491/evan-oman"}, "reply_to_user": {"reputation": 41846, "user_id": 926143, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/3396173c3d22988be1a0732d184902aa?s=128&d=identicon&r=PG", "display_name": "7stud", "link": "https://stackoverflow.com/users/926143/7stud"}, "edited": false, "score": 0, "creation_date": 1483571019, "post_id": 41474281, "comment_id": 70155363, "body": "@7stud the author actually mentions the method name / variable name ambiguity specifically"}, {"owner": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "edited": false, "score": 1, "creation_date": 1483571081, "post_id": 41474281, "comment_id": 70155396, "body": "This <code>Ripper</code> advice comes directly from <code>Ruby Under a Microscope</code>, an excellent book."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 2, "creation_date": 1483571114, "post_id": 41474281, "comment_id": 70155404, "body": "The Ruby grammar, like a lot of programming languages, is highly complicated. There&#39;s been efforts to better quantify it, such as the <a href=\"https://github.com/ruby/spec\" rel=\"nofollow noreferrer\">Ruby Spec Suite</a> project, but it can be extraordinarily difficult to explain in simple terms due to nuances. The parser typically explores a number of plausible interpretations, then fits the one that makes the most sense. <code>a &#47;b&#47;i</code> depends entirely in <code>a</code> being a method or not, and <code>a=1</code> reverts that to a variable, changing the meaning. Ruby is pretty forgiving, and often forgiving means dizzyingly complicated grammars."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 1, "creation_date": 1483571173, "post_id": 41474281, "comment_id": 70155430, "body": "This is why writing Ruby compilers is seriously difficult. You cannot even be assured what the result of something trivial like <code>1+2</code> will be without knowing <i>everything</i> that came before that code, and everything that <i>might</i> come after."}, {"owner": {"reputation": 6596, "user_id": 5021321, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/29f10a1b457e63d44e3a221e89e32c17?s=128&d=identicon&r=PG", "display_name": "Eli Sadoff", "link": "https://stackoverflow.com/users/5021321/eli-sadoff"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1483572611, "post_id": 41474281, "comment_id": 70155955, "body": "@tadman An interesting addendum. In <code>jirb</code> for <code>Jruby-9.1.5.0</code> you get <code>warning: `&#47;&#39; after local variable or literal is interpreted as binary operator</code> upon <code>a &#47;b&#47;i</code>"}], "answers": [{"comments": [{"owner": {"reputation": 6596, "user_id": 5021321, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/29f10a1b457e63d44e3a221e89e32c17?s=128&d=identicon&r=PG", "display_name": "Eli Sadoff", "link": "https://stackoverflow.com/users/5021321/eli-sadoff"}, "edited": false, "score": 1, "creation_date": 1483569639, "post_id": 41474436, "comment_id": 70154796, "body": "Ah! The leading object part was the part that tripped me up. I&#39;m assuming there are no flags before expressions in Ruby."}, {"owner": {"reputation": 5496, "user_id": 2661491, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/829f8aba5815197b56359be148cd0a13?s=128&d=identicon&r=PG", "display_name": "evan.oman", "link": "https://stackoverflow.com/users/2661491/evan-oman"}, "reply_to_user": {"reputation": 6596, "user_id": 5021321, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/29f10a1b457e63d44e3a221e89e32c17?s=128&d=identicon&r=PG", "display_name": "Eli Sadoff", "link": "https://stackoverflow.com/users/5021321/eli-sadoff"}, "edited": false, "score": 0, "creation_date": 1483569707, "post_id": 41474436, "comment_id": 70154819, "body": "I am not sure, I just know that Scala uses this paradigm for operators and it turns out Ruby is the same."}, {"owner": {"reputation": 6596, "user_id": 5021321, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/29f10a1b457e63d44e3a221e89e32c17?s=128&d=identicon&r=PG", "display_name": "Eli Sadoff", "link": "https://stackoverflow.com/users/5021321/eli-sadoff"}, "edited": false, "score": 1, "creation_date": 1483569737, "post_id": 41474436, "comment_id": 70154834, "body": "You are correct. It was the idea of the prefix vs postfix flags that tripped me up."}, {"owner": {"reputation": 5496, "user_id": 2661491, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/829f8aba5815197b56359be148cd0a13?s=128&d=identicon&r=PG", "display_name": "evan.oman", "link": "https://stackoverflow.com/users/2661491/evan-oman"}, "reply_to_user": {"reputation": 6596, "user_id": 5021321, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/29f10a1b457e63d44e3a221e89e32c17?s=128&d=identicon&r=PG", "display_name": "Eli Sadoff", "link": "https://stackoverflow.com/users/5021321/eli-sadoff"}, "edited": false, "score": 0, "creation_date": 1483570267, "post_id": 41474436, "comment_id": 70155045, "body": "@EliSadoff note that I fixed the parens to reflect the actual parse (a / b which is then divided by c)"}], "tags": [], "owner": {"reputation": 5496, "user_id": 2661491, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/829f8aba5815197b56359be148cd0a13?s=128&d=identicon&r=PG", "display_name": "evan.oman", "link": "https://stackoverflow.com/users/2661491/evan-oman"}, "is_accepted": true, "score": 5, "last_activity_date": 1483570226, "last_edit_date": 1483570226, "creation_date": 1483569564, "answer_id": 41474436, "question_id": 41474281, "link": "https://stackoverflow.com/questions/41474281/how-does-ruby-parse-2-3-4-as-2-%c3%b7-3-%c3%b7-4/41474436#41474436", "title": "How does ruby parse 2 /3/ 4 as 2 &#247; 3 &#247; 4?", "body": "<p>In Ruby (and some other languages), operators are actually methods of the objects in your expression. Thus Ruby sees your expression as:</p>\n\n<pre><code>(a./(b))./(c)\n</code></pre>\n\n<p>When you use regexes there is no leading object so Ruby can figure out that you want a regex and not division.</p>\n\n<p><a href=\"https://code.tutsplus.com/tutorials/ruby-for-newbies-operators-and-their-methods--net-18163\" rel=\"nofollow noreferrer\">Here is a nice article</a> for more info.</p>\n"}], "owner": {"reputation": 6596, "user_id": 5021321, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/29f10a1b457e63d44e3a221e89e32c17?s=128&d=identicon&r=PG", "display_name": "Eli Sadoff", "link": "https://stackoverflow.com/users/5021321/eli-sadoff"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 59, "favorite_count": 0, "accepted_answer_id": 41474436, "answer_count": 1, "score": 4, "last_activity_date": 1483570419, "creation_date": 1483568878, "last_edit_date": 1483570419, "question_id": 41474281, "link": "https://stackoverflow.com/questions/41474281/how-does-ruby-parse-2-3-4-as-2-%c3%b7-3-%c3%b7-4", "title": "How does ruby parse 2 /3/ 4 as 2 &#247; 3 &#247; 4?", "body": "<p>A lot of ruby's syntax and parsing is relatively logical, but I am confused as to how ruby knows, from context, that <code>2 /3/ 4</code> is 2 \u00f7 3 \u00f7 4 instead of parsing <code>/3/</code> as a regex? It's a correct parsing, but <code>/3/</code> is also a valid regex, and how would it know that <code>/3/</code> is not a regex. </p>\n\n<p>I thought that this might be a numeric literal thing, but if you do</p>\n\n<pre><code>a = 6\nb = 4\nc = 2\n\na /b/ c\n</code></pre>\n\n<p>Ruby still parses this as division. How does this work?</p>\n\n<p>Actually, I realized there is more to this question,</p>\n\n<p>let's say I have this</p>\n\n<pre><code>def a(x)\n  x\nend\n\na = 4\nb = 2\ni = 4\n\na /b/i #=&gt; 0\n</code></pre>\n\n<p>How is <code>a /b/i</code> parsed as <code>0</code> instead of <code>/b/i</code>\nas in why does <code>a /b/i</code> get parsed as <code>a./(b./(i))</code> instead of <code>a(/b/i)</code>?</p>\n"}, {"tags": ["ruby", "multithreading", "ruby-on-rails-5", "managedthreadfactory"], "answers": [{"tags": [], "owner": {"reputation": 1592, "user_id": 7138517, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/40228125f914cf5ef1ae7df6b98c550d?s=128&d=identicon&r=PG&f=1", "display_name": "Coolness", "link": "https://stackoverflow.com/users/7138517/coolness"}, "is_accepted": false, "score": 1, "last_activity_date": 1483572211, "creation_date": 1483572211, "answer_id": 41474915, "question_id": 41473541, "link": "https://stackoverflow.com/questions/41473541/how-can-i-manage-multiple-threads-in-ruby-on-rails-equivalent-of-a-java-thread/41474915#41474915", "title": "How can I manage multiple threads in Ruby on Rails (equivalent of a Java thread factory)?", "body": "<p>Especially if you're using ActiveRecord inside your threads, you need to be careful about concurrency issues with for example database connections leaking. </p>\n\n<p>Usually if you want to launch a new thread, you want to do something asynchronously in the background without having the user's request hang on an expensive action. For this there are some great libraries like <a href=\"https://github.com/brandonhilkert/sucker_punch\" rel=\"nofollow noreferrer\">Sucker Punch</a> and <a href=\"https://github.com/mperham/sidekiq\" rel=\"nofollow noreferrer\">Sidekiq</a>. I'd recommend using one of these instead of creating and managing threads manually.</p>\n\n<p>Hope this helps</p>\n"}, {"tags": [], "owner": {"reputation": 15775, "user_id": 634513, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/328293e03f2d7b888ecf197ec1ffb7a7?s=128&d=identicon&r=PG", "display_name": "Ismael Abreu", "link": "https://stackoverflow.com/users/634513/ismael-abreu"}, "is_accepted": true, "score": 1, "last_activity_date": 1483572854, "creation_date": 1483572854, "answer_id": 41475011, "question_id": 41473541, "link": "https://stackoverflow.com/questions/41473541/how-can-i-manage-multiple-threads-in-ruby-on-rails-equivalent-of-a-java-thread/41475011#41475011", "title": "How can I manage multiple threads in Ruby on Rails (equivalent of a Java thread factory)?", "body": "<p>I think <a href=\"https://github.com/ruby-concurrency/concurrent-ruby\" rel=\"nofollow noreferrer\">https://github.com/ruby-concurrency/concurrent-ruby</a> is the most used library with utils for concurrency in ruby.</p>\n\n<p>It has a lot of useful things including Thread Pools (<a href=\"http://ruby-concurrency.github.io/concurrent-ruby/file.thread_pools.html\" rel=\"nofollow noreferrer\">http://ruby-concurrency.github.io/concurrent-ruby/file.thread_pools.html</a>) which I think is what you are looking for.</p>\n\n<p>Keep in mind that MRI Ruby has GIL, so you only have parallelism if your threads are waiting for IO. For heavy computation you might want to use jRuby or look elsewhere :)</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user7055375"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4918, "favorite_count": 2, "accepted_answer_id": 41475011, "answer_count": 2, "score": 2, "last_activity_date": 1535637809, "creation_date": 1483565391, "question_id": 41473541, "link": "https://stackoverflow.com/questions/41473541/how-can-i-manage-multiple-threads-in-ruby-on-rails-equivalent-of-a-java-thread", "title": "How can I manage multiple threads in Ruby on Rails (equivalent of a Java thread factory)?", "body": "<p>I'm using Ruby on Rails 5 although I'm fairly a novice to Ruby/Rails.  I have read about creating threads using</p>\n\n<pre><code>   t = Thread.new {\n      sleep(rand(0)/10.0)\n      Thread.current[\"mycount\"] = count\n      count += 1\n   }\n</code></pre>\n\n<p>However, I'm wondering if there is a standard way of managing a bunch of application-created threads in Ruby/Rails.  I'm familiar with Java, which has a thread factory.  That allows a certain number of threads to concurrently run while others must wait in a queue.  I'm wondering how I would do something similar in Ruby/Rails.</p>\n\n<p>Note that I'm not talking about the types of threads that are generated automatically when a web page is requested.  I'm talking about threads that I (the application owner) creates.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "form-for"], "comments": [{"owner": {"reputation": 4457, "user_id": 5281693, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5fN4R.jpg?s=128&g=1", "display_name": "Alexander Luna", "link": "https://stackoverflow.com/users/5281693/alexander-luna"}, "edited": false, "score": 0, "creation_date": 1483564794, "post_id": 41473360, "comment_id": 70152551, "body": "Move the form tag outside of the form_for and add a remote: true to your form_tag so that it does an ajax call to your controller. In your controller, return either javascript or json and create a javascript file with the info you want to insert into your form_for."}, {"owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "edited": false, "score": 1, "creation_date": 1483566867, "post_id": 41473360, "comment_id": 70153572, "body": "The HTML specification does not actually allow for nested forms. By using nested forms you are relying on slop parsing and the results may be inconsistent. <a href=\"https://www.w3.org/TR/html5/forms.html#the-form-element\" rel=\"nofollow noreferrer\">w3.org/TR/html5/forms.html#the-form-element</a>"}, {"owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "edited": false, "score": 0, "creation_date": 1483567098, "post_id": 41473360, "comment_id": 70153702, "body": "Use javascript instead to bind an event handler to the input."}, {"owner": {"reputation": 71, "user_id": 1449897, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/3d24a680e39d9f7ca6569284ae20436a?s=128&d=identicon&r=PG", "display_name": "gui_maranhao", "link": "https://stackoverflow.com/users/1449897/gui-maranhao"}, "edited": false, "score": 0, "creation_date": 1483581287, "post_id": 41473360, "comment_id": 70158303, "body": "Thank you very much, guys! I&#39;ll do it with Ajax!"}], "answers": [{"tags": [], "owner": {"reputation": 71, "user_id": 1449897, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/3d24a680e39d9f7ca6569284ae20436a?s=128&d=identicon&r=PG", "display_name": "gui_maranhao", "link": "https://stackoverflow.com/users/1449897/gui-maranhao"}, "is_accepted": false, "score": 0, "last_activity_date": 1483583219, "creation_date": 1483583219, "answer_id": 41476425, "question_id": 41473360, "link": "https://stackoverflow.com/questions/41473360/how-to-call-a-specific-action-inside-a-form-for/41476425#41476425", "title": "How to call a specific action inside a form_for", "body": "<p>So guys, according to <a href=\"https://launchschool.com/blog/the-detailed-guide-on-how-ajax-works-with-ruby-on-rails\" rel=\"nofollow noreferrer\">https://launchschool.com/blog/the-detailed-guide-on-how-ajax-works-with-ruby-on-rails</a> and your suggestions, my solution should look like:</p>\n\n<p>My main _form.html.erb:</p>\n\n<pre><code>&lt;%= form_for(@model) do |m|%&gt;\n  &lt;%= m.label :field_1 %&gt;\n  &lt;%= m.text_field :field_1 %&gt;\n\n &lt;%= m.label :field_2 %&gt;\n &lt;%= m.text_field :field_2 %&gt;\n\n &lt;div class=\"field\"&gt;\n    &lt;%= m.label :zip %&gt;\n    &lt;%= m.text_field :zip %&gt;\n    &lt;input type=\"button\" id=\"search\" value=\"Search\" &gt;\n&lt;/div&gt;\n&lt;div id=\"address-data\" style=\"display:none;\"&gt;&lt;/div&gt;\n\n&lt;script type=\"text/javascript\" charset=\"UTF-8\"&gt;\n  $(\"#search\").click(function() {\n    $.ajax({\n      url: '/search_zip_code?zip=' + m_zip.value,\n      type: 'get'\n    });\n  });\n&lt;/script&gt;\n\n&lt;%= m.submit %&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>The controller action:</p>\n\n<pre><code>def search_zip_code\n    @add_zip = search(params[:zip]\n    respond_to do |format|\n      format.js\n    end\nend\n</code></pre>\n\n<p>Then, I need a search_zip_code.js.erb file:</p>\n\n<pre><code>$('#address-data').html(\"&lt;%= j (render 'form-zip') %&gt;\");\n$('#address-data').slideDown(350);\n</code></pre>\n\n<p>The search_zip_code.html.erb, which just contains:</p>\n\n<pre><code>&lt;%= render 'form-zip' %&gt;\n</code></pre>\n\n<p>And finally, the _form-zip.html.erb partial:</p>\n\n<pre><code>&lt;%= simple_form_for @add_zip, remote: true do |z| %&gt;\n   &lt;%= z.input :street %&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>The good news is that the zip param is being correctly passed to search_zip_code method.</p>\n\n<p>But the partial isn't being rendered: I've put breakpoints in all these erb files. The search_zip_code.js.erb is being reached, but the search_zip_code.html.erb and, of course, the _form-zip.html.erb, are not.</p>\n\n<p>Am I missing something?</p>\n\n<p>Thank you!</p>\n\n<p>Guilherme</p>\n"}, {"tags": [], "owner": {"reputation": 95, "user_id": 4337475, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5b1e1604fc185d1a760f8fd721434363?s=128&d=identicon&r=PG&f=1", "display_name": "RamPrasad Reddy", "link": "https://stackoverflow.com/users/4337475/ramprasad-reddy"}, "is_accepted": false, "score": 0, "last_activity_date": 1483593470, "creation_date": 1483593470, "answer_id": 41477744, "question_id": 41473360, "link": "https://stackoverflow.com/questions/41473360/how-to-call-a-specific-action-inside-a-form-for/41477744#41477744", "title": "How to call a specific action inside a form_for", "body": "<p>Hi can you try with the following code for the nested form</p>\n\n<pre><code>&lt;%= form_for @object, url =&gt; { controller: 'controller', action: 'create', method: :get } do |f| %&gt;\n  &lt;%= f.text_field :first_name %&gt;\n  &lt;%= f.submit %&gt;\n&lt;% end %&gt;\n</code></pre>\n"}], "owner": {"reputation": 71, "user_id": 1449897, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/3d24a680e39d9f7ca6569284ae20436a?s=128&d=identicon&r=PG", "display_name": "gui_maranhao", "link": "https://stackoverflow.com/users/1449897/gui-maranhao"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 901, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1483593470, "creation_date": 1483564522, "question_id": 41473360, "link": "https://stackoverflow.com/questions/41473360/how-to-call-a-specific-action-inside-a-form-for", "title": "How to call a specific action inside a form_for", "body": "<p>I have a form which contains some text_fields. One of them is the zip code field. It has a button \"Search\" that calls an specific action \"search_zip_code\" which returns the address values associated with that field. How can I invoke this action inside a form_for tag? I have already tried a form_tag nested to it, but the submit action invokes the :create method. If I use a \"link_to\", I can't pass the zip code entered by the user. What is the best approach for that?</p>\n\n<pre><code>&lt;%= form_for(@model) do |m|%&gt;\n  &lt;%= m.label :field_1 %&gt;\n  &lt;%= m.text_field :field_1 %&gt;\n\n  &lt;%= m.label :field_2 %&gt;\n  &lt;%= m.text_field :field_2 %&gt;\n\n  &lt;div class=\"field\"&gt;\n    &lt;%= form_tag(\"/search_zip_code\", method: \"get\") do %&gt;\n      &lt;%= label_tag(:zip, \"ZIP Code:\") %&gt;\n      &lt;%= text_field_tag(:zip) %&gt;\n    &lt;%= submit_tag(\"Search\") %&gt;\n  &lt;% end %&gt;\n&lt;/div&gt;\n\n&lt;%= m.submit %&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>Why the action \"/search_zip_code\" isn't reached by the submit_tag button? Even if I change this route to a :post method, it doesn't work.</p>\n\n<p>Thank you,</p>\n\n<p>Guilherme</p>\n"}, {"tags": ["ruby", "oop"], "comments": [{"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1483564443, "post_id": 41473195, "comment_id": 70152368, "body": "Pretty sure it is, like if you look at <a href=\"http://ruby-doc.org/core-2.4.0/Enumerable.html\" rel=\"nofollow noreferrer\">Enumerable</a> source all the methods are prefixed with <code>#</code>"}, {"owner": {"reputation": 41846, "user_id": 926143, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/3396173c3d22988be1a0732d184902aa?s=128&d=identicon&r=PG", "display_name": "7stud", "link": "https://stackoverflow.com/users/926143/7stud"}, "edited": false, "score": 0, "creation_date": 1483566524, "post_id": 41473195, "comment_id": 70153419, "body": "I would say: No.  The symbol <code>#</code> implies an instance method of a class, and  the <code>.</code> implies a method defined on the receiver, in this case a class method.  I believe the <code>#</code> just comes from ri.  I can&#39;t remember any notation to refer to some_method in the nested namespace Foo::Bar.  But you don&#39;t need any notation to describe it when talking to a rubyist."}, {"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 1, "creation_date": 1483566883, "post_id": 41473195, "comment_id": 70153579, "body": "technical syntax for documenting &quot;class methods&quot; is <code>Class::method</code> and &quot;instance methods&quot; is <code>Class#method</code>"}, {"owner": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "reply_to_user": {"reputation": 41846, "user_id": 926143, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/3396173c3d22988be1a0732d184902aa?s=128&d=identicon&r=PG", "display_name": "7stud", "link": "https://stackoverflow.com/users/926143/7stud"}, "edited": false, "score": 0, "creation_date": 1483567655, "post_id": 41473195, "comment_id": 70153976, "body": "@7stud: Just take a look the documentation <a href=\"http://ruby-doc.org/core-2.4.0/Enumerable.html\" rel=\"nofollow noreferrer\">ruby-doc.org/core-2.4.0/Enumerable.html</a> <code>#</code> is used everywhere : online documentation, ruby Method objects, irb, ri ..."}, {"owner": {"reputation": 41846, "user_id": 926143, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/3396173c3d22988be1a0732d184902aa?s=128&d=identicon&r=PG", "display_name": "7stud", "link": "https://stackoverflow.com/users/926143/7stud"}, "edited": false, "score": 0, "creation_date": 1483568476, "post_id": 41473195, "comment_id": 70154339, "body": "@EricDuminilk, Good point.  I change my answer to Yes."}, {"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 1, "creation_date": 1483581400, "post_id": 41473195, "comment_id": 70158334, "body": "No one has to agree with me this is the way it is done Modules can have public &quot;class methods&quot; <a href=\"https://ruby-doc.org/core-2.2.0/Module.html\" rel=\"nofollow noreferrer\">Module Docs</a> please note <code>Module::constants</code> and <code>Module::nesting</code> vs all instance methods like <code>Module#include</code> BTW you reversed the order in my statement"}], "answers": [{"comments": [{"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1483566645, "post_id": 41473396, "comment_id": 70153475, "body": "Thank you for the quotes around &quot;instance methods&quot; since technically speaking all methods are instance methods because all objects are instances."}, {"owner": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "edited": false, "score": 0, "creation_date": 1483567018, "post_id": 41473396, "comment_id": 70153651, "body": "I&#39;m not convinced. calling <code>include</code> to examine a method is supposed to be cheating, but <code>module_function</code> should be fine? <code>module_function</code> is basically like <code>extend self</code>, so you&#39;re just converting an instance method to a class method. Call them &quot;functions&quot; if you will, they&#39;re still all methods."}, {"owner": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "edited": false, "score": 0, "creation_date": 1483567318, "post_id": 41473396, "comment_id": 70153801, "body": "We can agree on Kernel methods being called functions, though."}, {"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "reply_to_user": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "edited": false, "score": 0, "creation_date": 1483581993, "post_id": 41473396, "comment_id": 70158471, "body": "@EricDuminil I cannot agree. These are instance methods of the <code>Kernel</code> Module and propagated through inheritance of the <code>Object</code> class&#39; inclusion of this module. <code>BasicObject</code> does not include <code>Kernel</code> and has no access to any methods included therein. As a note to the answer this clearly indicates they are not &quot;global&quot;. Ruby simply has keywords and methods that is all."}, {"owner": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "reply_to_user": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1483607414, "post_id": 41473396, "comment_id": 70167137, "body": "@engineersmnky: Thanks. I actually meant to say that Kernel methods are sometimes referred to as functions, because they look like functions from other languages (&#39;puts/print/test/system&#39;). Still, they are all methods, and it&#39;s never wrong to call them methods."}, {"owner": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "edited": false, "score": 0, "creation_date": 1483607535, "post_id": 41473396, "comment_id": 70167209, "body": "@akuhn:  As far as I can tell, the term &quot;module function&quot; isn&#39;t used often. Except in your answers :D.&quot;Ruby in a Nutshell&quot; is 15 years old, by the way."}, {"owner": {"reputation": 25823, "user_id": 24468, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/PWl6C.png?s=128&g=1", "display_name": "akuhn", "link": "https://stackoverflow.com/users/24468/akuhn"}, "edited": false, "score": 0, "creation_date": 1483647511, "post_id": 41473396, "comment_id": 70193889, "body": "I knew that I&#39;m old, but not that much, hahaha."}], "tags": [], "owner": {"reputation": 25823, "user_id": 24468, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/PWl6C.png?s=128&g=1", "display_name": "akuhn", "link": "https://stackoverflow.com/users/24468/akuhn"}, "is_accepted": true, "score": 0, "last_activity_date": 1483602699, "last_edit_date": 1483602699, "creation_date": 1483564706, "answer_id": 41473396, "question_id": 41473195, "link": "https://stackoverflow.com/questions/41473195/convention-for-talking-about-instance-class-methods-in-a-module/41473396#41473396", "title": "Convention for talking about instance/class methods in a module", "body": "<p>Yes.</p>\n\n<p>The terminology is different though, a class has methods but for modules they are sometimes referred to as functions. </p>\n\n<p>My source is the \"Ruby in a Nutshell\" book by Matz. He refers to methods defined on a module as module functions, thus also the name of the <code>Module.module_function</code> method. The same book has a chapter on builtin functions like <code>exit</code> etc, that are defined on <code>Kernel</code> module. </p>\n\n<p>Fun fact, those \"functions\" seem globally available because <code>Object</code> includes <code>Kernel</code> and thus all its module functions become private methods of any object and are thus callable from any context. Expect <code>BasicObject</code> but that is another story for another time.</p>\n\n<hr>\n\n<p>Or \"Ask Ruby\" as Eric suggested</p>\n\n<pre><code>[1] pry(main)&gt; module B\n[1] pry(main)*   def m\n[1] pry(main)*   end  \n[1] pry(main)*   def self.n\n[1] pry(main)*   end  \n[1] pry(main)*   module_function\n[1] pry(main)*   def f\n[1] pry(main)*   end  \n[1] pry(main)* end  \n=&gt; nil\n[2] pry(main)&gt; B.instance_method(:m)\n=&gt; #&lt;UnboundMethod: B#m&gt;\n[3] pry(main)&gt; B.method(:n)\n=&gt; #&lt;Method: B.n&gt;\n[4] pry(main)&gt; B.method(:f)\n=&gt; #&lt;Method: B.f&gt;\n</code></pre>\n\n<p>Three observations</p>\n\n<ul>\n<li>module functions are the same as \"class methods\" on a module</li>\n<li>\"class methods\" on a module are printed as <code>Module.fun</code></li>\n<li>\"instance methods\" on a module are actually unbound.</li>\n</ul>\n"}, {"comments": [{"owner": {"reputation": 25823, "user_id": 24468, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/PWl6C.png?s=128&g=1", "display_name": "akuhn", "link": "https://stackoverflow.com/users/24468/akuhn"}, "edited": false, "score": 0, "creation_date": 1483565108, "post_id": 41473468, "comment_id": 70152722, "body": "Actually <code>module_function</code> create &quot;class methods&quot; on modules, so that would make <code>Foo::Bar.another_method</code> a module function."}, {"owner": {"reputation": 41846, "user_id": 926143, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/3396173c3d22988be1a0732d184902aa?s=128&d=identicon&r=PG", "display_name": "7stud", "link": "https://stackoverflow.com/users/926143/7stud"}, "reply_to_user": {"reputation": 25823, "user_id": 24468, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/PWl6C.png?s=128&g=1", "display_name": "akuhn", "link": "https://stackoverflow.com/users/24468/akuhn"}, "edited": false, "score": 0, "creation_date": 1483566775, "post_id": 41473468, "comment_id": 70153529, "body": "@akuhn,1) That isn&#39;t the only thing module_function does, so that is a bit of a mis characterization. 2) Dave Thomas uses the term <a href=\"http://ruby-doc.com/docs/ProgrammingRuby/html/tut_modules.html\" rel=\"nofollow noreferrer\"><i>module method</i></a> to describe a method that is defined inside a module and whose method name is preceded by the module name."}, {"owner": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "edited": false, "score": 0, "creation_date": 1483568400, "post_id": 41473468, "comment_id": 70154308, "body": "Talking about Module methods, <code>:instance_method</code> is defined as <code>Module#instance_method</code> and inherited by <code>Class</code>. So it looks like <code>instance_method</code> should make sense in the context of a module."}, {"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "reply_to_user": {"reputation": 41846, "user_id": 926143, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/3396173c3d22988be1a0732d184902aa?s=128&d=identicon&r=PG", "display_name": "7stud", "link": "https://stackoverflow.com/users/926143/7stud"}, "edited": false, "score": 0, "creation_date": 1483583568, "post_id": 41473468, "comment_id": 70158837, "body": "@7stud Ruby core seems to support the terminology of module method to refer to methods that may be called without an encapsulating, instantiatable object. This term is used in the documentation of Module itself"}], "tags": [], "owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "is_accepted": false, "score": 0, "last_activity_date": 1483565037, "creation_date": 1483565037, "answer_id": 41473468, "question_id": 41473195, "link": "https://stackoverflow.com/questions/41473195/convention-for-talking-about-instance-class-methods-in-a-module/41473468#41473468", "title": "Convention for talking about instance/class methods in a module", "body": "<p>When talking about that piece of code <code>Foo::Bar#some_method</code> would be called the <em>instance method <code>some_method</code></em>. <code>Foo::Bar.another_method</code> would I call the <em>class method <code>another_method</code></em>.</p>\n\n<p>In the context of an module I would call <code>Foo::Bar.another_method</code> a <em>module method</em>. Whereas something like an instance method doesn't make sense in the context of a module. You might want to call that a function instead.</p>\n"}, {"tags": [], "owner": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "is_accepted": false, "score": 0, "last_activity_date": 1483569474, "creation_date": 1483569474, "answer_id": 41474414, "question_id": 41473195, "link": "https://stackoverflow.com/questions/41473195/convention-for-talking-about-instance-class-methods-in-a-module/41474414#41474414", "title": "Convention for talking about instance/class methods in a module", "body": "<p>Yes, it is the exact same convention, for the simple reasons that :</p>\n\n<ul>\n<li><a href=\"https://ruby-doc.org/core-2.4.0/Class.html\" rel=\"nofollow noreferrer\"><code>Class</code></a> inherits from <a href=\"https://ruby-doc.org/core-2.4.0/Module.html\" rel=\"nofollow noreferrer\"><code>Module</code></a>.</li>\n<li><a href=\"https://ruby-doc.org/core-2.4.0/Module.html#method-i-instance_methods\" rel=\"nofollow noreferrer\"><code>instance_methods</code></a> method is defined in <a href=\"https://ruby-doc.org/core-2.4.0/Module.html\" rel=\"nofollow noreferrer\"><code>Module</code></a>.</li>\n</ul>\n"}], "owner": {"reputation": 6391, "user_id": 2909897, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/LMSiW.jpg?s=128&g=1", "display_name": "mbigras", "link": "https://stackoverflow.com/users/2909897/mbigras"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 57, "favorite_count": 1, "accepted_answer_id": 41473396, "answer_count": 3, "score": 2, "last_activity_date": 1483839038, "creation_date": 1483563803, "last_edit_date": 1483839038, "question_id": 41473195, "link": "https://stackoverflow.com/questions/41473195/convention-for-talking-about-instance-class-methods-in-a-module", "title": "Convention for talking about instance/class methods in a module", "body": "<p>Given the following code:</p>\n\n<pre><code>module Foo\n  class Bar\n    def some_method\n    end\n    def self.another_method\n    end\n  end\nend\n</code></pre>\n\n<p>If I wanted to talk to a rubyist about the instance method <code>some_method</code> I would say <code>Foo::Bar#some_method</code>.<br>\nIf I wanted to talk about the class method <code>another_method</code> I would say <code>Foo::Bar::another_method</code>.</p>\n\n<p>But what if <code>Bar</code> is a module:</p>\n\n<pre><code>module Foo\n  module Bar\n    def some_method\n    end\n    def self.another_method\n    end\n  end\nend\n</code></pre>\n\n<p>Is the convention the same?</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 1, "creation_date": 1483565384, "post_id": 41473176, "comment_id": 70152849, "body": "You need to examine error messages carefully. Often, as here, they pinpoint the problem. This one tells you the method <code>&#47;</code> is not defined for the instance <code>&quot;23\\n23\\n24\\n&quot;</code> of the class <code>String</code>. That means <code>(num1 + num2 + num3)</code> is a string (not an integer). You therefore need to change it to <code>(num1.to_i + num2.to_i + num3.to_i)</code>."}], "answers": [{"comments": [{"owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "edited": false, "score": 1, "creation_date": 1483565566, "post_id": 41473218, "comment_id": 70152926, "body": "Actually there is no need to call <code>chomp</code>, when you plan to call <code>to_i</code> anyway. From the docs: <i>Returns the result of interpreting leading characters in str as an integer base base (between 2 and 36). Extraneous characters past the end of a valid number are ignored. If there is not a valid number at the start of str, 0 is returned.</i> Just remove the <code>chomp</code>, it doesn&#39;t make a difference."}, {"owner": {"reputation": 3738, "user_id": 2530089, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/a4973420ed95a43d4a63718685b9a94b?s=128&d=identicon&r=PG", "display_name": "Alex Pan", "link": "https://stackoverflow.com/users/2530089/alex-pan"}, "reply_to_user": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "edited": false, "score": 0, "creation_date": 1483566238, "post_id": 41473218, "comment_id": 70153266, "body": "@spickermann, you are totally right. I updated my answer to reflect your input. Thanks!"}, {"owner": {"reputation": 17, "user_id": 7376193, "user_type": "registered", "accept_rate": 12, "profile_image": "https://www.gravatar.com/avatar/75c8ce82abb3d5d80ed8b1a502e47468?s=128&d=identicon&r=PG&f=1", "display_name": "John Doe", "link": "https://stackoverflow.com/users/7376193/john-doe"}, "edited": false, "score": 0, "creation_date": 1483584148, "post_id": 41473218, "comment_id": 70158973, "body": "Thank You for explaining it Alex, I still have one more question. I&#39;m still a beginner in Ruby so I don&#39;t quite understand the #{avg} part. Is that the only way to compute average in Ruby? There isn&#39;t another way for beginners? I just don&#39;t want to get ahead of myself."}, {"owner": {"reputation": 3738, "user_id": 2530089, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/a4973420ed95a43d4a63718685b9a94b?s=128&d=identicon&r=PG", "display_name": "Alex Pan", "link": "https://stackoverflow.com/users/2530089/alex-pan"}, "reply_to_user": {"reputation": 17, "user_id": 7376193, "user_type": "registered", "accept_rate": 12, "profile_image": "https://www.gravatar.com/avatar/75c8ce82abb3d5d80ed8b1a502e47468?s=128&d=identicon&r=PG&f=1", "display_name": "John Doe", "link": "https://stackoverflow.com/users/7376193/john-doe"}, "edited": false, "score": 0, "creation_date": 1483640618, "post_id": 41473218, "comment_id": 70189919, "body": "@JohnDoe, when you had <code>puts &quot;Average is &quot; + avg</code>, it would throw this error <code>TypeError: no implicit conversion of Fixnum into String</code>. This is due to the fact that you are trying to concatenate a string with a number. To get the desired output (&quot;Average is n&quot;), you would need to use string interpolation."}], "tags": [], "owner": {"reputation": 3738, "user_id": 2530089, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/a4973420ed95a43d4a63718685b9a94b?s=128&d=identicon&r=PG", "display_name": "Alex Pan", "link": "https://stackoverflow.com/users/2530089/alex-pan"}, "is_accepted": false, "score": 4, "last_activity_date": 1483569247, "last_edit_date": 1483569247, "creation_date": 1483563907, "answer_id": 41473218, "question_id": 41473176, "link": "https://stackoverflow.com/questions/41473176/simple-ruby-average-program/41473218#41473218", "title": "Simple Ruby average program", "body": "<p>Try this:</p>\n\n<pre><code>puts \"Enter first\"\nnum1 = gets.to_i\nputs \"Enter second\"\nnum2 = gets.to_i\nputs \"Enter third\"\nnum3 = gets.to_i\navg = (num1 + num2 + num3) / 3.0\nputs \"Average is #{avg}\"\n</code></pre>\n\n<p>First, you need to strip the newline from your gets method and convert the string to an integer by calling <a href=\"https://ruby-doc.org/core-2.2.0/String.html#method-i-to_i\" rel=\"nofollow noreferrer\"><code>.to_i</code></a>. Then, to properly output the average, just use string interpolation.</p>\n"}, {"tags": [], "owner": {"reputation": 2276, "user_id": 4343241, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/5041b359de5b9b2d9da810c34d72781a?s=128&d=identicon&r=PG&f=1", "display_name": "Aryaman", "link": "https://stackoverflow.com/users/4343241/aryaman"}, "is_accepted": true, "score": 0, "last_activity_date": 1483563967, "creation_date": 1483563967, "answer_id": 41473236, "question_id": 41473176, "link": "https://stackoverflow.com/questions/41473176/simple-ruby-average-program/41473236#41473236", "title": "Simple Ruby average program", "body": "<p>I don't know anything about Ruby, but if it's similar to Python you'll have to convert the input you get from a string to an integer. Right now your program is just concatenating the strings you enter, and gets confused because you cannot use <code>/</code> on strings.</p>\n\n<p>Edit: you'll have to use the method <code>.to_i</code> on the input to convert it to an integer.</p>\n"}, {"comments": [{"owner": {"reputation": 17, "user_id": 7376193, "user_type": "registered", "accept_rate": 12, "profile_image": "https://www.gravatar.com/avatar/75c8ce82abb3d5d80ed8b1a502e47468?s=128&d=identicon&r=PG&f=1", "display_name": "John Doe", "link": "https://stackoverflow.com/users/7376193/john-doe"}, "edited": false, "score": 0, "creation_date": 1483584195, "post_id": 41473508, "comment_id": 70158982, "body": "What is the meaning of #{avg}? There is no other way to compute average?"}, {"owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "reply_to_user": {"reputation": 17, "user_id": 7376193, "user_type": "registered", "accept_rate": 12, "profile_image": "https://www.gravatar.com/avatar/75c8ce82abb3d5d80ed8b1a502e47468?s=128&d=identicon&r=PG&f=1", "display_name": "John Doe", "link": "https://stackoverflow.com/users/7376193/john-doe"}, "edited": false, "score": 0, "creation_date": 1483600011, "post_id": 41473508, "comment_id": 70163534, "body": "@JohnDoe The <code>&quot;... #{avg} ...&quot;</code> is a string interpolation and a common Ruby idiom. It is basically the same as <code>&quot;... &quot; + avg.to_s + &quot; ...&quot;</code>. It has the advantage the it is less error-prone than to concat Strings with <code>+</code>, because it calls <code>to_s</code> automatically, and many <a href=\"https://github.com/bbatsov/ruby-style-guide#string-interpolation\" rel=\"nofollow noreferrer\">devs</a> think it is easier to read."}], "tags": [], "owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "is_accepted": false, "score": 0, "last_activity_date": 1483565611, "last_edit_date": 1483565611, "creation_date": 1483565246, "answer_id": 41473508, "question_id": 41473176, "link": "https://stackoverflow.com/questions/41473176/simple-ruby-average-program/41473508#41473508", "title": "Simple Ruby average program", "body": "<p><code>gets</code> returns a <code>String</code>, not a number. Therefore you need to call <code>to_i</code> on it first. </p>\n\n<p>Furthermore: To return a <code>Float</code> your calculation needs to have a float value on the left or the right side of the <code>/</code> otherwise it would return an <code>Integer</code> (what might be unexpected):</p>\n\n<pre><code>(1 + 1 + 2) / 3\n#=&gt; 1\n(1 + 1 + 2) / 3.0\n#=&gt; 1.3333333333333333\n</code></pre>\n\n<p>Change your code to:</p>\n\n<pre><code>puts \"Enter first\"\nnum1 = gets.to_i\nputs \"Enter second\"\nnum2 = gets.to_i\nputs \"Enter third\"\nnum3 = gets.to_i\navg = (num1 + num2 + num3) / 3.0\nputs \"Average is #{avg}\"\n</code></pre>\n"}], "owner": {"reputation": 17, "user_id": 7376193, "user_type": "registered", "accept_rate": 12, "profile_image": "https://www.gravatar.com/avatar/75c8ce82abb3d5d80ed8b1a502e47468?s=128&d=identicon&r=PG&f=1", "display_name": "John Doe", "link": "https://stackoverflow.com/users/7376193/john-doe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 341, "favorite_count": 0, "accepted_answer_id": 41473236, "answer_count": 3, "score": 0, "last_activity_date": 1483569247, "creation_date": 1483563733, "last_edit_date": 1483564155, "question_id": 41473176, "link": "https://stackoverflow.com/questions/41473176/simple-ruby-average-program", "title": "Simple Ruby average program", "body": "<p>I'm computing average for 3 numbers that users will input in Ruby. Every time I run the app, the user puts in 3 numbers but I get an error stating: </p>\n\n<blockquote>\n  <p>test.rb:7:in <code>&lt;main&gt;': undefined method</code>/' for \"23\\n23\\n24\\n\":String (NoMethodError)                </p>\n</blockquote>\n\n<p>My code is as follows:</p>\n\n<pre><code>puts \"Enter first\"\nnum1 = gets\nputs \"Enter second\"\nnum2 = gets\nputs \"Enter third\"\nnum3 = gets\navg = (num1 + num2 + num3) / 3\nputs \"Average is  \" + avg\n</code></pre>\n"}, {"tags": ["ruby", "nginx"], "comments": [{"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1483563995, "post_id": 41473097, "comment_id": 70152173, "body": "What do you mean hard to find a single article on how ruby would sit behind nginx? There are a ton of them some involve app servers like passenger or unicorn and some just use a standard webserver like webbrick or thin but the articles exist none the less."}, {"owner": {"reputation": 3957, "user_id": 385265, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/3d981885503d1c3d749c7c243e1f6cae?s=128&d=identicon&r=PG&f=1", "display_name": "Danny Kopping", "link": "https://stackoverflow.com/users/385265/danny-kopping"}, "reply_to_user": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1483564268, "post_id": 41473097, "comment_id": 70152294, "body": "@engineersmnky more of an overview of the available options, with pros &amp; cons for each; which ones are in favour and in use by big companies like GitHub etc, what tradeoffs they all have... something like that"}, {"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1483564428, "post_id": 41473097, "comment_id": 70152362, "body": "<a href=\"https://github.com/blog/530-how-we-made-github-fast\" rel=\"nofollow noreferrer\">GitHub Stack</a> nginx and Unicorn along with other fun stuff"}, {"owner": {"reputation": 3957, "user_id": 385265, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/3d981885503d1c3d749c7c243e1f6cae?s=128&d=identicon&r=PG&f=1", "display_name": "Danny Kopping", "link": "https://stackoverflow.com/users/385265/danny-kopping"}, "reply_to_user": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1483564545, "post_id": 41473097, "comment_id": 70152429, "body": "Thanks! I&#39;ll take a look at that"}, {"owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "edited": false, "score": 0, "creation_date": 1483566178, "post_id": 41473097, "comment_id": 70153234, "body": "Booting up a new application for each request seems very inefficient. I never saw a production Ruby application setup like that. Usually an application server like Unicorn, Puma or Passenger is used."}], "owner": {"reputation": 3957, "user_id": 385265, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/3d981885503d1c3d749c7c243e1f6cae?s=128&d=identicon&r=PG&f=1", "display_name": "Danny Kopping", "link": "https://stackoverflow.com/users/385265/danny-kopping"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 22, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1483563420, "creation_date": 1483563420, "question_id": 41473097, "link": "https://stackoverflow.com/questions/41473097/what-are-the-available-options-for-running-a-ruby-app-in-production", "title": "What are the available options for running a ruby app in production?", "body": "<p>Coming from a PHP background, I'm used to the model of an entire application being booted for each request.</p>\n\n<p>Obviously with tools such as PHP-FPM, this process is a bit more optimised and it keeps a number of child processes (\"workers\") running under a master process which are pre-warmed/booted to will handle requests.</p>\n\n<p>Now that I'm learning Ruby, I'd like to know how Ruby would sit behind nginx, for example. It's proving difficult to find a single article or blog post about the various options available and the approaches accepted by the community by and large.</p>\n\n<p>Does Ruby have something similar to the FPM style of serving Ruby apps? Or is this request-based style of serving less optimal for Ruby? From what I can find, it seems that Rubyists favour an application-server type of approach - Unicorn, Passenger, et al - as opposed to a \"clean slate, each request is fresh\" approach.</p>\n"}, {"tags": ["ruby", "irb"], "comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 1, "creation_date": 1483562054, "post_id": 41472226, "comment_id": 70151236, "body": "It&#39;s actually a handy feature. If you want to save the results of your last operation: <code>a = _</code>. I often use <code>irb</code> as a handy calculator, so you can easily chain things: <code>_ &#47; 1e6</code> for example."}, {"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1483562604, "post_id": 41472226, "comment_id": 70151506, "body": "Some more fun meanings for the underscore are presented <a href=\"http://idiosyncratic-ruby.com/33-too-expressive.html#underscore-4-syntactical-meanings\" rel=\"nofollow noreferrer\">Here</a> such as a visual separator (<code>1_000_000</code>) or an ignored parameter <code>object.each {|_, v| ...}</code>"}], "answers": [{"comments": [{"owner": {"reputation": 3587, "user_id": 328110, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/e7ec644e326b5297da45bebeed13a773?s=128&d=identicon&r=PG", "display_name": "Suborx", "link": "https://stackoverflow.com/users/328110/suborx"}, "edited": false, "score": 0, "creation_date": 1484318575, "post_id": 41472299, "comment_id": 70473845, "body": "<a href=\"http://rubyquicktips.com/post/342527837/console-tip-retrieve-the-last-return-value-with\" rel=\"nofollow noreferrer\">rubyquicktips.com/post/342527837/&hellip;</a>"}], "tags": [], "owner": {"reputation": 1181, "user_id": 2708904, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/b7b059287e83e57ccf1ffd04ccbd6314?s=128&d=identicon&r=PG&f=1", "display_name": "Innot Kauker", "link": "https://stackoverflow.com/users/2708904/innot-kauker"}, "is_accepted": true, "score": 37, "last_activity_date": 1483560077, "creation_date": 1483560077, "answer_id": 41472299, "question_id": 41472226, "link": "https://stackoverflow.com/questions/41472226/strange-behavior-with-underscore-in-ruby/41472299#41472299", "title": "Strange behavior with &#39;_&#39; (underscore) in Ruby", "body": "<p><code>irb</code> uses <code>_</code> to refer to the value of last calculated expression. So you will see <code>_</code> changed even if you don't use it in the previous line :)</p>\n"}, {"tags": [], "owner": {"reputation": 7638, "user_id": 1014251, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/1c4500c91af486c885af8bb84eefd063?s=128&d=identicon&r=PG", "display_name": "ReggieB", "link": "https://stackoverflow.com/users/1014251/reggieb"}, "is_accepted": false, "score": 17, "last_activity_date": 1483560093, "creation_date": 1483560093, "answer_id": 41472309, "question_id": 41472226, "link": "https://stackoverflow.com/questions/41472226/strange-behavior-with-underscore-in-ruby/41472309#41472309", "title": "Strange behavior with &#39;_&#39; (underscore) in Ruby", "body": "<p>Within irb, <code>_</code> returns the result of the previous operation. So on opening a new irb session <code>_</code> will equal nil as there was no previous operation</p>\n\n<pre><code>2.0.0p353 :001 &gt; 4\n =&gt; 4 \n2.0.0p353 :002 &gt; 3 + _\n =&gt; 7 \n</code></pre>\n"}], "owner": {"reputation": 1030, "user_id": 2100645, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5c9894864f33c42fffe19330d2e00d1b?s=128&d=identicon&r=PG", "display_name": "Lucas Costa", "link": "https://stackoverflow.com/users/2100645/lucas-costa"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2004, "favorite_count": 0, "accepted_answer_id": 41472299, "answer_count": 2, "score": 25, "last_activity_date": 1483709786, "creation_date": 1483559832, "last_edit_date": 1483709786, "question_id": 41472226, "link": "https://stackoverflow.com/questions/41472226/strange-behavior-with-underscore-in-ruby", "title": "Strange behavior with &#39;_&#39; (underscore) in Ruby", "body": "<p>Just curious about it.</p>\n\n<p>If you open the IRB and type <code>_</code>, you'll get <code>nil</code> as response:</p>\n\n<pre><code>irb(main):001:0&gt; _\n=&gt; nil\n</code></pre>\n\n<p>And you can modify its value:</p>\n\n<pre><code>irb(main):002:0&gt; _ = 'some value'\nirb(main):003:0&gt; _\n=&gt; \"some value\"\n</code></pre>\n\n<p>But if you create a new variable with <code>_</code>, its value is modified:</p>\n\n<pre><code>irb(main):004:0&gt; foo_bar = 'other value'\nirb(main):005:0&gt; _\n=&gt; \"other value\"\n</code></pre>\n\n<p>Why? Is this a design decision?</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1483574774, "post_id": 41472035, "comment_id": 70156582, "body": "&quot;Array A has been copied to Array B&quot; \u2013 Where? There is no copy operation in your code."}], "answers": [{"comments": [{"owner": {"reputation": 65, "user_id": 5303716, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh5.googleusercontent.com/-xoQmYOw2pls/AAAAAAAAAAI/AAAAAAAAABY/zm6rl_Ac-_E/photo.jpg?sz=128", "display_name": "alert pay", "link": "https://stackoverflow.com/users/5303716/alert-pay"}, "edited": false, "score": 0, "creation_date": 1483559456, "post_id": 41472090, "comment_id": 70149973, "body": "Thanks a lot, It worked and can I know why it was happening?"}, {"owner": {"reputation": 60090, "user_id": 188031, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/p2YIF.jpg?s=128&g=1", "display_name": "tokland", "link": "https://stackoverflow.com/users/188031/tokland"}, "edited": false, "score": 0, "creation_date": 1483559464, "post_id": 41472090, "comment_id": 70149975, "body": "On the subtleties of clone vs dup: <a href=\"http://stackoverflow.com/questions/10183370/whats-the-difference-between-rubys-dup-and-clone-methods\" title=\"whats the difference between rubys dup and clone methods\">stackoverflow.com/questions/10183370/&hellip;</a>"}, {"owner": {"reputation": 1592, "user_id": 7138517, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/40228125f914cf5ef1ae7df6b98c550d?s=128&d=identicon&r=PG&f=1", "display_name": "Coolness", "link": "https://stackoverflow.com/users/7138517/coolness"}, "edited": false, "score": 0, "creation_date": 1483559615, "post_id": 41472090, "comment_id": 70150050, "body": "Updated the answer :)"}, {"owner": {"reputation": 1592, "user_id": 7138517, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/40228125f914cf5ef1ae7df6b98c550d?s=128&d=identicon&r=PG&f=1", "display_name": "Coolness", "link": "https://stackoverflow.com/users/7138517/coolness"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1483560698, "post_id": 41472090, "comment_id": 70150557, "body": "@CarySwoveland Thanks for the note, I&#39;ll remove them."}], "tags": [], "owner": {"reputation": 1592, "user_id": 7138517, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/40228125f914cf5ef1ae7df6b98c550d?s=128&d=identicon&r=PG&f=1", "display_name": "Coolness", "link": "https://stackoverflow.com/users/7138517/coolness"}, "is_accepted": true, "score": 3, "last_activity_date": 1483560791, "last_edit_date": 1483560791, "creation_date": 1483559240, "answer_id": 41472090, "question_id": 41472035, "link": "https://stackoverflow.com/questions/41472035/how-to-delete-a-element-from-two-arrays-independently-which-has-been-copied-from/41472090#41472090", "title": "How to delete a element from two arrays independently which has been copied from one another?", "body": "<p>You can use <a href=\"https://ruby-doc.org/core-2.2.3/Object.html#method-i-dup\" rel=\"nofollow noreferrer\">dup</a> to create a copy of the array.</p>\n\n<pre><code>a = [1,2,3]\n=&gt; [1, 2, 3]\nb = a.dup\n=&gt; [1, 2, 3]\na.delete(1)\n=&gt; 1\na\n=&gt; [2, 3]\nb\n=&gt; [1, 2, 3]\n</code></pre>\n\n<p>EDIT:</p>\n\n<p>As to why this is, when you assign <code>b = a</code>, you assign <code>b</code> to be a reference to <code>a</code>. This means that both variables refer the same underlying object. With <code>dup</code> we are forcing Ruby to create a copy of <code>a</code>. </p>\n"}, {"tags": [], "owner": {"reputation": 1181, "user_id": 2708904, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/b7b059287e83e57ccf1ffd04ccbd6314?s=128&d=identicon&r=PG&f=1", "display_name": "Innot Kauker", "link": "https://stackoverflow.com/users/2708904/innot-kauker"}, "is_accepted": false, "score": 0, "last_activity_date": 1483559343, "creation_date": 1483559343, "answer_id": 41472111, "question_id": 41472035, "link": "https://stackoverflow.com/questions/41472035/how-to-delete-a-element-from-two-arrays-independently-which-has-been-copied-from/41472111#41472111", "title": "How to delete a element from two arrays independently which has been copied from one another?", "body": "<p>You are creating a shallow copy in b, so the contents aren't copied. To copy them, use Object::clone: <code>b = a.clone</code>.</p>\n"}], "owner": {"reputation": 65, "user_id": 5303716, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh5.googleusercontent.com/-xoQmYOw2pls/AAAAAAAAAAI/AAAAAAAAABY/zm6rl_Ac-_E/photo.jpg?sz=128", "display_name": "alert pay", "link": "https://stackoverflow.com/users/5303716/alert-pay"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 59, "favorite_count": 0, "accepted_answer_id": 41472090, "answer_count": 2, "score": 1, "last_activity_date": 1483560791, "creation_date": 1483559026, "question_id": 41472035, "link": "https://stackoverflow.com/questions/41472035/how-to-delete-a-element-from-two-arrays-independently-which-has-been-copied-from", "title": "How to delete a element from two arrays independently which has been copied from one another?", "body": "<blockquote>\n  <p>a = [1,2,3]</p>\n</blockquote>\n\n<p>=> [1, 2, 3] </p>\n\n<blockquote>\n  <p>b = a</p>\n</blockquote>\n\n<p>=> [1, 2, 3] </p>\n\n<blockquote>\n  <p>b.delete(1)</p>\n</blockquote>\n\n<p>=> 1 </p>\n\n<blockquote>\n  <p>b</p>\n</blockquote>\n\n<p>=> [2, 3] </p>\n\n<blockquote>\n  <p>a</p>\n</blockquote>\n\n<p>=> [2, 3] </p>\n\n<p>Array A has given [1,2,3] values, and Array A has been copied to Array B</p>\n\n<p>Then whenever I delete a element from Array B , the element gets deleted from Array A too</p>\n\n<p>eg : If i delete element 1 from array B ,it gets deleted from array A too..</p>\n\n<p>How to avoid this, How to delete an element from these arrays separately ?</p>\n"}, {"tags": ["sql", "ruby-on-rails", "ruby", "rails-activerecord"], "comments": [{"owner": {"reputation": 40236, "user_id": 923315, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/j6lLI.jpg?s=128&g=1", "display_name": "peter", "link": "https://stackoverflow.com/users/923315/peter"}, "edited": false, "score": 1, "creation_date": 1483559552, "post_id": 41472019, "comment_id": 70150021, "body": "you can see the sql that is produced by adding .to_sql behind your statement and learn a lot of that or try that sql in a database client"}], "answers": [{"comments": [{"owner": {"reputation": 1494, "user_id": 417681, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/bed3fcf4e33cb832d1e41f5a2c6e16b8?s=128&d=identicon&r=PG", "display_name": "wildabeast", "link": "https://stackoverflow.com/users/417681/wildabeast"}, "edited": false, "score": 0, "creation_date": 1483559300, "post_id": 41472087, "comment_id": 70149891, "body": "really? i&#39;m doing count(widget_id) so not sure thats true? anyhow if you could do it in SQL I might be able to translate to rails syntax!"}, {"owner": {"reputation": 1, "user_id": 7376026, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-uWnKPZ80PGQ/AAAAAAAAAAI/AAAAAAAAAxM/kFoOMHXFHnI/photo.jpg?sz=128", "display_name": "Patrik Willers", "link": "https://stackoverflow.com/users/7376026/patrik-willers"}, "reply_to_user": {"reputation": 1494, "user_id": 417681, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/bed3fcf4e33cb832d1e41f5a2c6e16b8?s=128&d=identicon&r=PG", "display_name": "wildabeast", "link": "https://stackoverflow.com/users/417681/wildabeast"}, "edited": false, "score": 0, "creation_date": 1483559667, "post_id": 41472087, "comment_id": 70150077, "body": "Well actually you are right. But it gets confusing. You want to count the amount of people having COUNT(widgets)  This is beyond me. With sql i would do a subquery with your logic to get all people and their counts, then use the result of that subquery to get the range of widget coutns and count the people."}], "tags": [], "owner": {"reputation": 1, "user_id": 7376026, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-uWnKPZ80PGQ/AAAAAAAAAAI/AAAAAAAAAxM/kFoOMHXFHnI/photo.jpg?sz=128", "display_name": "Patrik Willers", "link": "https://stackoverflow.com/users/7376026/patrik-willers"}, "is_accepted": false, "score": 0, "last_activity_date": 1483559228, "creation_date": 1483559228, "answer_id": 41472087, "question_id": 41472019, "link": "https://stackoverflow.com/questions/41472019/list-the-number-of-records-that-have-x-number-of-associations-in-has-many/41472087#41472087", "title": "List the number of records that have X number of associations in has_many", "body": "<p>I can't help you very much with the syntax as this is not my strong suite. But knowing SQL you might want to swap the count around.\nWhat you are counting are actually the people.id's.</p>\n\n<p>Hopefully this helps your line of thought.</p>\n"}, {"comments": [{"owner": {"reputation": 1494, "user_id": 417681, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/bed3fcf4e33cb832d1e41f5a2c6e16b8?s=128&d=identicon&r=PG", "display_name": "wildabeast", "link": "https://stackoverflow.com/users/417681/wildabeast"}, "edited": false, "score": 0, "creation_date": 1483565687, "post_id": 41472785, "comment_id": 70152978, "body": "Perfect, used that with <code>ActiveRecord::Base.connection.select_all</code> and got what I needed!"}], "tags": [], "owner": {"reputation": 787, "user_id": 2591068, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5EZRZ.jpg?s=128&g=1", "display_name": "Jakub Macina", "link": "https://stackoverflow.com/users/2591068/jakub-macina"}, "is_accepted": true, "score": 1, "last_activity_date": 1483562183, "creation_date": 1483562183, "answer_id": 41472785, "question_id": 41472019, "link": "https://stackoverflow.com/questions/41472019/list-the-number-of-records-that-have-x-number-of-associations-in-has-many/41472785#41472785", "title": "List the number of records that have X number of associations in has_many", "body": "<p>The raw SQL query should look like this (tested in PostgreSQL):</p>\n\n<pre><code>SELECT a.widget_count, COUNT(a.widget_count) FROM \n(SELECT p.id, COUNT(w.id) AS widget_count FROM Person p JOIN Widget w ON w.person_id = p.id GROUP BY p.id) \nAS a \nGROUP BY a.widget_count\n</code></pre>\n"}], "owner": {"reputation": 1494, "user_id": 417681, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/bed3fcf4e33cb832d1e41f5a2c6e16b8?s=128&d=identicon&r=PG", "display_name": "wildabeast", "link": "https://stackoverflow.com/users/417681/wildabeast"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 29, "favorite_count": 0, "accepted_answer_id": 41472785, "answer_count": 2, "score": 0, "last_activity_date": 1483562183, "creation_date": 1483558957, "question_id": 41472019, "link": "https://stackoverflow.com/questions/41472019/list-the-number-of-records-that-have-x-number-of-associations-in-has-many", "title": "List the number of records that have X number of associations in has_many", "body": "<p>I have my Person class which will have 0 or more widgets associated</p>\n\n<pre><code>class Person &lt; ActiveRecord::Base\n  has_many :widgets\nend\n</code></pre>\n\n<p>I'd like to list out the number of People that have X widgets i.e:</p>\n\n<pre><code>Num of widgets | Num of people\n0              | 10\n1              | 34\n2              | 0\n...\n100            | 20\n</code></pre>\n\n<p>(which is saying 34 people have 1 widget, etc).</p>\n\n<p>Here's my best effort so far:</p>\n\n<pre><code>Person.joins(:widgets).group('people.id').select('people.id, count(widget_id) as widget_count').group('widget_count')\n</code></pre>\n\n<p>But I receive</p>\n\n<pre><code> Mysql2::Error: Can't group on 'widget_count'\n</code></pre>\n"}, {"tags": ["ruby", "chef-infra", "erb"], "comments": [{"owner": {"reputation": 3273, "user_id": 5021963, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/t7Qsr.png?s=128&g=1", "display_name": "Ed de Almeida", "link": "https://stackoverflow.com/users/5021963/ed-de-almeida"}, "edited": false, "score": 0, "creation_date": 1483557068, "post_id": 41471438, "comment_id": 70148758, "body": "There is an obvious error in your code. Your hash has no <code>sources</code> key. It has a <code>sources</code> <b>value</b>. So <code>&lt;% sources[ &quot;primary&quot;] %&gt;</code> makes no sense at all."}, {"owner": {"reputation": 45322, "user_id": 421705, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/581b1760881c962648f99d6040d41829?s=128&d=identicon&r=PG", "display_name": "Holger Just", "link": "https://stackoverflow.com/users/421705/holger-just"}, "reply_to_user": {"reputation": 3273, "user_id": 5021963, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/t7Qsr.png?s=128&g=1", "display_name": "Ed de Almeida", "link": "https://stackoverflow.com/users/5021963/ed-de-almeida"}, "edited": false, "score": 0, "creation_date": 1483557638, "post_id": 41471438, "comment_id": 70149081, "body": "@EddeAlmeida This is a red herring. The sources variable is set with <code>data_bag[&quot;B&quot;]</code> which <i>is included</i> in the data bag."}, {"owner": {"reputation": 3273, "user_id": 5021963, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/t7Qsr.png?s=128&g=1", "display_name": "Ed de Almeida", "link": "https://stackoverflow.com/users/5021963/ed-de-almeida"}, "reply_to_user": {"reputation": 45322, "user_id": 421705, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/581b1760881c962648f99d6040d41829?s=128&d=identicon&r=PG", "display_name": "Holger Just", "link": "https://stackoverflow.com/users/421705/holger-just"}, "edited": false, "score": 0, "creation_date": 1483558316, "post_id": 41471438, "comment_id": 70149430, "body": "Oh I see @HolgerJust. My talking comes too fast to my thoughts sometimes! Thank you."}, {"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1483558544, "post_id": 41471438, "comment_id": 70149557, "body": "Not an answer but for your erb you want to add <code>=</code> signs or you won&#39;t see anything even when it does work. e.g. <code>:server &lt;%= sources[&quot;primary&quot;] %&gt;</code>. in simple terms <code>&lt;%=</code> means render the output from the interpretation and <code>&lt;%</code> means interpret but do not render."}], "answers": [{"tags": [], "owner": {"reputation": 45322, "user_id": 421705, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/581b1760881c962648f99d6040d41829?s=128&d=identicon&r=PG", "display_name": "Holger Just", "link": "https://stackoverflow.com/users/421705/holger-just"}, "is_accepted": false, "score": 2, "last_activity_date": 1483572819, "last_edit_date": 1483572819, "creation_date": 1483557585, "answer_id": 41471671, "question_id": 41471438, "link": "https://stackoverflow.com/questions/41471438/ruby-hash-within-hash-no-implicit-conversion-of-string-into-integer-typeerror/41471671#41471671", "title": "RUBY HASH within Hash ;no implicit conversion of String into Integer (TypeError)", "body": "<p>Chef's <code>search</code> method always returns an array of matches. Thus, your <code>data_bag</code> variable probably contains an array with a single element: your intended hash.</p>\n\n<p>You can normalize this by using something like this:</p>\n\n<pre><code>data_bags = search(:win_sources,'id:sources')\nif data_bags.size == 1\n  data_bag = data_bags.first\nelse\n  raise 'More or less than one sources data bag found!'\nend\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 7375761, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffb0108616ca6a09a0039d007b4789b2?s=128&d=identicon&r=PG&f=1", "display_name": "Yeti", "link": "https://stackoverflow.com/users/7375761/yeti"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 723, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1483572849, "creation_date": 1483556726, "last_edit_date": 1483572849, "question_id": 41471438, "link": "https://stackoverflow.com/questions/41471438/ruby-hash-within-hash-no-implicit-conversion-of-string-into-integer-typeerror", "title": "RUBY HASH within Hash ;no implicit conversion of String into Integer (TypeError)", "body": "<p>I'm trying to resolve a type error, but i'm not sure where the error would be. i am making assumptions that it would be in my client.rb file. I am trying to fill in an ERB file with the correct ip address based on whether its location A or location B. If its in location A then take the first IP address and fill it in, then on another line do the same with the second IP address for location A</p>\n\n<p>Data Bag/ JSON</p>\n\n<pre><code>{\n  \"id\": \"sources\",\n   \"A\": {\"primary\": \"127.0.0.1\", \"secondary\": \"127.0.0.2\"},\n   \"B\": {\"primary\": \"127.0.0.1\", \"secondary\": \"127.0.0.2\"}\n}\n</code></pre>\n\n<p>ERB FILE</p>\n\n<pre><code>:server &lt;%=sources[\"primary\"]%&gt;\n:server &lt;%=sources[\"secondary\"]%&gt;\n</code></pre>\n\n<p>Client Recipe</p>\n\n<pre><code>data_bag = search(:win_sources,'id:sources')\ncase servername\nwhen /^smd(.*)/\n  sources = data_bag[\"B\"]\n...\nend\n</code></pre>\n"}, {"tags": ["ruby", "request", "rest-client"], "comments": [{"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1483558776, "post_id": 41471366, "comment_id": 70149659, "body": "have you tried <code>events: [&quot;invitee.#{type}&quot;]</code> this should be serialized appropriately"}, {"owner": {"reputation": 3273, "user_id": 5021963, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/t7Qsr.png?s=128&g=1", "display_name": "Ed de Almeida", "link": "https://stackoverflow.com/users/5021963/ed-de-almeida"}, "reply_to_user": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1483558810, "post_id": 41471366, "comment_id": 70149681, "body": "Not yet, but I&#39;ll try it now @engineersmnky."}, {"owner": {"reputation": 3273, "user_id": 5021963, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/t7Qsr.png?s=128&g=1", "display_name": "Ed de Almeida", "link": "https://stackoverflow.com/users/5021963/ed-de-almeida"}, "reply_to_user": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1483561027, "post_id": 41471366, "comment_id": 70150752, "body": "It worked, @engineersmnky, thanks. If you post as an answer I&#39;ll accept it."}], "answers": [{"tags": [], "owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "is_accepted": true, "score": 3, "last_activity_date": 1483562312, "creation_date": 1483562312, "answer_id": 41472823, "question_id": 41471366, "link": "https://stackoverflow.com/questions/41471366/sending-an-array-of-string-in-a-request-made-with-rest-client-gem/41472823#41472823", "title": "Sending an array of string in a request made with rest-client gem", "body": "<p><strong>Posted for visibility</strong> (previously answered in comment)</p>\n\n<p><code>RestClient</code> will appropriately serialize a native ruby <code>Array</code> for you meaning </p>\n\n<pre><code>events: [\"invitee.#{type}\"]\n</code></pre>\n\n<p>will be serialized into <code>events[]=invitee.created</code> where <code>type == 'created'</code>. This will work for an <code>Array</code> with multiple values too.</p>\n\n<pre><code>events: [\"more\",\"than\",\"one\"]\n</code></pre>\n\n<p>will be converted to <code>events[]=more&amp;events[]=than&amp;events[]=one</code>. </p>\n\n<p>Finally it also handles an other data types inside an <code>Array</code> such as another <code>Hash</code>  </p>\n\n<pre><code>events: [{first_name: 'Zaphod', last_name: 'Beeblebrox'}]\n</code></pre>\n\n<p>will become <code>events[][first_name]=Zaphod&amp;events[][last_name]=Beeblebrox</code></p>\n"}], "owner": {"reputation": 3273, "user_id": 5021963, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/t7Qsr.png?s=128&g=1", "display_name": "Ed de Almeida", "link": "https://stackoverflow.com/users/5021963/ed-de-almeida"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1105, "favorite_count": 0, "accepted_answer_id": 41472823, "answer_count": 1, "score": 0, "last_activity_date": 1483562312, "creation_date": 1483556445, "question_id": 41471366, "link": "https://stackoverflow.com/questions/41471366/sending-an-array-of-string-in-a-request-made-with-rest-client-gem", "title": "Sending an array of string in a request made with rest-client gem", "body": "<p>I am creating a gem to implement the <a href=\"http://developer.calendly.com/docs/getting-started\" rel=\"nofollow noreferrer\">Calendly API</a> and I need to make a request like </p>\n\n<pre><code>curl --header \"X-TOKEN: &lt;your_token&gt;\"\n     --data \"url=https://blah.foo/bar&amp;events[]=invitee.created\"\n     https://calendly.com/api/v1/hooks\n</code></pre>\n\n<p>to create a webhook.</p>\n\n<p>As you may see, <code>events</code> is passed as an array of strings and this is indicated by the <code>[]</code>.</p>\n\n<p>I am trying to use <code>RestClient::Request#execute</code> to send this request, but I don't know how to pass this array of strings in this case.</p>\n\n<p>I tried</p>\n\n<pre><code>RestClient::Request.execute(method: :post,\n                            url: @uri,\n                            params: { url: url,\n                                      events: \"invitee.#{type}\"\n                                    },\n                            headers: { \"X-TOKEN\": \"#{@api_key}\" })\n</code></pre>\n\n<p>but then I am not sending an array as the API expects.</p>\n\n<p>I also tried</p>\n\n<pre><code>RestClient::Request.execute(method: :post,\n                            url: @uri,\n                            params: { url: url,\n                            'events[]': \"invitee.#{type}\" },\n                            headers: { \"X-TOKEN\": \"#{@api_key}\" })\n</code></pre>\n\n<p>but it didn't work either. I got a bad request error and nothing else.</p>\n\n<p>How should I build my request in this case?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "activerecord"], "answers": [{"tags": [], "owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "is_accepted": true, "score": 8, "last_activity_date": 1483555403, "creation_date": 1483555403, "answer_id": 41471081, "question_id": 41470951, "link": "https://stackoverflow.com/questions/41470951/rails-get-the-first-n-active-record-objects-of-a-model/41471081#41471081", "title": "Rails: get the first n active record objects of a model", "body": "<p>You do <code>.limit(n)</code></p>\n\n<p>Combine this with <code>.offset</code> and you have pagination. </p>\n"}], "owner": {"reputation": 563, "user_id": 6428423, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/28686ea8a03571c763a74df034a0974b?s=128&d=identicon&r=PG&f=1", "display_name": "Life4ants", "link": "https://stackoverflow.com/users/6428423/life4ants"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1730, "favorite_count": 1, "accepted_answer_id": 41471081, "answer_count": 1, "score": 6, "last_activity_date": 1483555403, "creation_date": 1483554974, "question_id": 41470951, "link": "https://stackoverflow.com/questions/41470951/rails-get-the-first-n-active-record-objects-of-a-model", "title": "Rails: get the first n active record objects of a model", "body": "<p>I need a way to get the first n items of a model. <code>Item.first(n)</code>, <code>Item.all[1..n]</code> will do that, except they return an array, not an object.\nHow do I get it as an ActiveRecord Object?</p>\n\n<pre><code>irb(main):135:0&gt; Player.where(game_id: 1).class\n=&gt; Player::ActiveRecord_Relation    #Ok\nirb(main):136:0&gt; Game.first.players.class\n=&gt; Player::ActiveRecord_Associations_CollectionProxy    #Ok\nirb(main):137:0&gt; Player.where(game_id: 1).first(2).class\n=&gt; Array   #Not Ok\n</code></pre>\n\n<p>I want to run <code>update_all</code> on the returned collection of players, and I can't do that on an array.</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "answers": [{"comments": [{"owner": {"reputation": 113, "user_id": 1780977, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/8a46def82198775f2af77598ab0432a7?s=128&d=identicon&r=PG", "display_name": "Marco Noronha", "link": "https://stackoverflow.com/users/1780977/marco-noronha"}, "edited": false, "score": 0, "creation_date": 1483615389, "post_id": 41471574, "comment_id": 70172319, "body": "Even though I cant have an Address without a Community?"}], "tags": [], "owner": {"reputation": 2889, "user_id": 3079520, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/LfkPU.jpg?s=128&g=1", "display_name": "dnsh", "link": "https://stackoverflow.com/users/3079520/dnsh"}, "is_accepted": true, "score": 1, "last_activity_date": 1483557238, "creation_date": 1483557238, "answer_id": 41471574, "question_id": 41470724, "link": "https://stackoverflow.com/questions/41470724/ruby-on-rails-nested-attributes-not-working/41471574#41471574", "title": "Ruby on Rails - Nested attributes not working", "body": "<p>I think you are using Rails 5. This issue is because of feature change in Rails 5. For more info <a href=\"http://blog.bigbinary.com/2016/02/15/rails-5-makes-belong-to-association-required-by-default.html\" rel=\"nofollow noreferrer\">read this</a>.\nYou should try adding <code>optional: true</code> to <code>belongs_to</code> relationship. Like this.</p>\n\n<pre><code>class Address &lt; ApplicationRecord\n    belongs_to :community, optional: true\nend\n</code></pre>\n"}], "owner": {"reputation": 113, "user_id": 1780977, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/8a46def82198775f2af77598ab0432a7?s=128&d=identicon&r=PG", "display_name": "Marco Noronha", "link": "https://stackoverflow.com/users/1780977/marco-noronha"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 39, "favorite_count": 0, "accepted_answer_id": 41471574, "answer_count": 1, "score": 0, "last_activity_date": 1483557238, "creation_date": 1483554165, "question_id": 41470724, "link": "https://stackoverflow.com/questions/41470724/ruby-on-rails-nested-attributes-not-working", "title": "Ruby on Rails - Nested attributes not working", "body": "<p>I have this two simple models:</p>\n\n<pre><code>class Address &lt; ApplicationRecord\n  belongs_to :community\n\n  geocoded_by :full_address\n\n  validates :address, :city, :province, :country, presence: :true\n\n  validates :postalcode, presence: true, postalcode: true\n\n  after_validation :geocode\n\n  def full_address\n    [address, province, postalcode, country].compact.join(', ')\n  end\nend\n</code></pre>\n\n<p>And</p>\n\n<pre><code>class Community &lt; ApplicationRecord\n  has_one :address, dependent: :destroy\n\n  accepts_nested_attributes_for :address\n\n  has_many :community_people, dependent: :destroy\n\n  has_many :people, through: :community_people, source: :user\n\n  validates :name, :address, :administrators, presence: true  \n  # ...\nend\n</code></pre>\n\n<p>I'm trying to create some stub Communities using a seed.rb:</p>\n\n<pre><code>def self.create_community(administrators: [], residents: [], address: {})\n     Community.create(\n        name:  Faker::Name.name,\n        administrators: administrators,\n        residents: residents,\n        address_attributes: address\n      )\n\n    @communities += 1\n  end\n</code></pre>\n\n<p>But I always get:</p>\n\n<pre><code>ActiveRecord::RecordInvalid: Validation failed: Address community must exist\n</code></pre>\n\n<p>PS: Also tried using \"community.create_address\" and other things.\nTo only way I could get it to work was:</p>\n\n<ul>\n<li>Saving Community (with no address)</li>\n<li>Saving Address referencing community_id.</li>\n</ul>\n\n<p>But I had to hack my Model and remove <code>:address</code> from the <code>validates</code> method in <strong>community.rb</strong>.</p>\n\n<p>So how can I make <strong>accepts_nested_attributes_for</strong> work?</p>\n"}, {"tags": ["ruby", "sinatra"], "answers": [{"tags": [], "owner": {"reputation": 45322, "user_id": 421705, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/581b1760881c962648f99d6040d41829?s=128&d=identicon&r=PG", "display_name": "Holger Just", "link": "https://stackoverflow.com/users/421705/holger-just"}, "is_accepted": true, "score": 0, "last_activity_date": 1483553396, "creation_date": 1483553396, "answer_id": 41470515, "question_id": 41470173, "link": "https://stackoverflow.com/questions/41470173/can-i-get-inline-template-as-string-in-sinatra/41470515#41470515", "title": "Can I get inline template as string in Sinatra?", "body": "<p>Sinatra stores the raw loaded templates in a settings variables called <code>templates</code>. You can access them as follows:</p>\n\n<pre><code>require \"sinatra\"\nrequire \"sinatra/json\"\nrequire \"yaml\"\n\nget \"/\" do\n  content_type :json\n  data = YAML.load settings.templates[:my_yaml][0]\n  json data\nend\n\n__END__\n@@my_yaml\nfoo:\n  bar: baz\n\n@@my_something\nhello\n</code></pre>\n\n<p><code>settings.templates</code> contains a Hash with the template names as keys and an array containing the raw template and the line number where it was defined.</p>\n"}], "owner": {"reputation": 33, "user_id": 7375504, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d5609d7052052d4b44bbb60bc3806f5b?s=128&d=identicon&r=PG&f=1", "display_name": "asari72", "link": "https://stackoverflow.com/users/7375504/asari72"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 127, "favorite_count": 0, "accepted_answer_id": 41470515, "answer_count": 1, "score": 0, "last_activity_date": 1483553396, "creation_date": 1483552098, "question_id": 41470173, "link": "https://stackoverflow.com/questions/41470173/can-i-get-inline-template-as-string-in-sinatra", "title": "Can I get inline template as string in Sinatra?", "body": "<h2>Motivation</h2>\n\n<p>The inline template in Sinatra is very convenient (for me).</p>\n\n<p>If it is possible to extract there contents as string,\nmore applications can be expected.</p>\n\n<h2>Example</h2>\n\n<p>showing my intention in this code</p>\n\n<pre><code>require \"sinatra\"\nrequire \"sinatra/json\"\nrequire \"yaml\"\n\nget \"/\" do\n  content_type :json\n  data = YAML.load inline_template_as_raw_string(:my_yaml)\n  json data\nend\n\n__END__\n@@my_yaml\nfoo:\n  bar: baz\n\n@@my_something\nhello\n</code></pre>\n\n<p>any ideas?</p>\n"}, {"tags": ["ruby"], "answers": [{"comments": [{"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 1, "creation_date": 1483550980, "post_id": 41469749, "comment_id": 70145437, "body": "To solve that problem: <code>a[1] = Array.new(7) { [0,0] }</code>"}, {"owner": {"reputation": 1592, "user_id": 7138517, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/40228125f914cf5ef1ae7df6b98c550d?s=128&d=identicon&r=PG&f=1", "display_name": "Coolness", "link": "https://stackoverflow.com/users/7138517/coolness"}, "edited": false, "score": 0, "creation_date": 1483551092, "post_id": 41469749, "comment_id": 70145518, "body": "Thanks a lot to both of you, now I understand."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 3, "creation_date": 1483554078, "post_id": 41469749, "comment_id": 70147118, "body": "The key here is you use an initializer <i>block</i> rather than an initializer <i>element</i>. To see the original problem: <code>a.map(&amp;:object_id)</code> shows that every object in the array is an identical reference."}], "tags": [], "owner": {"reputation": 37741, "user_id": 3425536, "user_type": "registered", "accept_rate": 72, "profile_image": "https://graph.facebook.com/1484495923/picture?type=large", "display_name": "emlai", "link": "https://stackoverflow.com/users/3425536/emlai"}, "is_accepted": true, "score": 3, "last_activity_date": 1483551032, "last_edit_date": 1483551032, "creation_date": 1483550524, "answer_id": 41469749, "question_id": 41469674, "link": "https://stackoverflow.com/questions/41469674/ruby-array-in-hash-assignment-odd-behavior/41469749#41469749", "title": "Ruby array in hash assignment odd behavior", "body": "<p>All the elements in <code>a[1]</code> refer to the same array.</p>\n\n<p><code>[0,0]</code> isn't deep-copied when you do <code>[[0,0]] * 7</code>.</p>\n\n<p>Solution: <code>a[1] = Array.new(7) { [0,0] }</code> (thanks @Stefan!)</p>\n"}, {"tags": [], "owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "is_accepted": false, "score": 0, "last_activity_date": 1483554103, "creation_date": 1483554103, "answer_id": 41470704, "question_id": 41469674, "link": "https://stackoverflow.com/questions/41469674/ruby-array-in-hash-assignment-odd-behavior/41470704#41470704", "title": "Ruby array in hash assignment odd behavior", "body": "<p>Here's how to diagnose this problem in the future:</p>\n\n<p><code>object_id</code> will tell you the \"slot\" where Ruby keeps an object. Objects should have unique IDs:</p>\n\n<pre><code>foo = []\nbar = []\nfoo.object_id # =&gt; 70322472940660\nbar.object_id # =&gt; 70322472940640\n</code></pre>\n\n<p>If they don't, though they might be different variable names, they're still pointing to the same object. That might be desirable in more advanced uses, but generally it's not something you want because changing one will change the other leading to confusion, gnashing teeth and possibly the return of \"he who should not be named\". For instance, we get fooled when we look at:</p>\n\n<pre><code>[[]] * 2 # =&gt; [[], []]\n</code></pre>\n\n<p>because it seems that we're getting back two arrays, which could be assigned using parallel assignment, like:</p>\n\n<pre><code>foo, bar = [[]] * 2\n</code></pre>\n\n<p>But, when we look at <code>foo</code> and <code>bar</code> to see where they're stored we can see the problem, they're both pointing to the same slot, and so changing one changes the other:</p>\n\n<pre><code>foo.object_id # =&gt; 70323794190700\nbar.object_id # =&gt; 70323794190700\nfoo &lt;&lt; 1\nbar # =&gt; [1]\n</code></pre>\n\n<p>This is an ages old problem when writing code; You gotta learn about \"pass by value\" vs. \"pass by reference\" and when a language is doing one or the other otherwise this problem will occur. And then you have to learn how to tell the language to avoid the problem.</p>\n"}], "owner": {"reputation": 1592, "user_id": 7138517, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/40228125f914cf5ef1ae7df6b98c550d?s=128&d=identicon&r=PG&f=1", "display_name": "Coolness", "link": "https://stackoverflow.com/users/7138517/coolness"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 55, "favorite_count": 0, "accepted_answer_id": 41469749, "answer_count": 2, "score": 1, "last_activity_date": 1483554103, "creation_date": 1483550276, "last_edit_date": 1483550660, "question_id": 41469674, "link": "https://stackoverflow.com/questions/41469674/ruby-array-in-hash-assignment-odd-behavior", "title": "Ruby array in hash assignment odd behavior", "body": "<p>i'm attempting to understand why the following code behaves (to my knowledge) oddly.</p>\n\n<pre><code>[1] pry(main)&gt; a = {}\n=&gt; {}\n[2] pry(main)&gt; a[1] = [[0,0]] * 7\n=&gt; [[0, 0], [0, 0], [0, 0], [0, 0], [0, 0], [0, 0], [0, 0]]\n[3] pry(main)&gt; a[2] = [[0,0]] * 7\n=&gt; [[0, 0], [0, 0], [0, 0], [0, 0], [0, 0], [0, 0], [0, 0]]\n[4] pry(main)&gt; a[1][2][0] = 3 # Should be one value changed, right? \n=&gt; 3\n[5] pry(main)&gt; a\n=&gt; {1=&gt;[[3, 0], [3, 0], [3, 0], [3, 0], [3, 0], [3, 0], [3, 0]],\n 2=&gt;[[0, 0], [0, 0], [0, 0], [0, 0], [0, 0], [0, 0], [0, 0]]}\n</code></pre>\n\n<p>What i thought should happen is that one value of the array in the hash <code>a</code> at key <code>1</code> at index <code>2</code> should change to <code>3</code>, but instead all the first values of the entire array change to <code>3</code>. What's going on here, what am I missing? Here's my Ruby version.</p>\n\n<pre><code>$ ruby -v\nruby 2.3.1p112 (2016-04-26 revision 54768) [x86_64-linux]\n</code></pre>\n\n<p>EDIT:</p>\n\n<p>I also tried the following</p>\n\n<pre><code>[1] pry(main)&gt; a = {}\n=&gt; {}\n[2] pry(main)&gt; a[1] = ([[0,0].dup].dup * 7).dup\n=&gt; [[0, 0], [0, 0], [0, 0], [0, 0], [0, 0], [0, 0], [0, 0]]\n[3] pry(main)&gt; a[2] = ([[0,0].dup].dup * 7).dup\n=&gt; [[0, 0], [0, 0], [0, 0], [0, 0], [0, 0], [0, 0], [0, 0]]\n[4] pry(main)&gt; a[1][2][0] = 3\n=&gt; 3\n[5] pry(main)&gt; a\n=&gt; {1=&gt;[[3, 0], [3, 0], [3, 0], [3, 0], [3, 0], [3, 0], [3, 0]],\n 2=&gt;[[0, 0], [0, 0], [0, 0], [0, 0], [0, 0], [0, 0], [0, 0]]}\n[6] pry(main)&gt; a = {}\n=&gt; {}\n[7] pry(main)&gt; a[1] = ([[0,0].clone].clone * 7).clone\n=&gt; [[0, 0], [0, 0], [0, 0], [0, 0], [0, 0], [0, 0], [0, 0]]\n[8] pry(main)&gt; a[2] = ([[0,0].clone].clone * 7).clone\n=&gt; [[0, 0], [0, 0], [0, 0], [0, 0], [0, 0], [0, 0], [0, 0]]\n[9] pry(main)&gt; a\n=&gt; {1=&gt;[[0, 0], [0, 0], [0, 0], [0, 0], [0, 0], [0, 0], [0, 0]],\n 2=&gt;[[0, 0], [0, 0], [0, 0], [0, 0], [0, 0], [0, 0], [0, 0]]}\n[10] pry(main)&gt; a[1][2][0] = 3\n=&gt; 3\n[11] pry(main)&gt; a\n=&gt; {1=&gt;[[3, 0], [3, 0], [3, 0], [3, 0], [3, 0], [3, 0], [3, 0]],\n 2=&gt;[[0, 0], [0, 0], [0, 0], [0, 0], [0, 0], [0, 0], [0, 0]]}\n</code></pre>\n\n<p>Surely the values should be copies?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-3", "owasp", "brakeman"], "answers": [{"comments": [{"owner": {"reputation": 2132, "user_id": 856753, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/1c53a71370f55d0f0a4cc7e4b2c06b91?s=128&d=identicon&r=PG", "display_name": "Micheal", "link": "https://stackoverflow.com/users/856753/micheal"}, "edited": false, "score": 0, "creation_date": 1483556154, "post_id": 41470316, "comment_id": 70148213, "body": "what does &#39;my query&#39; represent above. Do we need it, since sql variable already has the query?"}, {"owner": {"reputation": 45322, "user_id": 421705, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/581b1760881c962648f99d6040d41829?s=128&d=identicon&r=PG", "display_name": "Holger Just", "link": "https://stackoverflow.com/users/421705/holger-just"}, "reply_to_user": {"reputation": 2132, "user_id": 856753, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/1c53a71370f55d0f0a4cc7e4b2c06b91?s=128&d=identicon&r=PG", "display_name": "Micheal", "link": "https://stackoverflow.com/users/856753/micheal"}, "edited": false, "score": 0, "creation_date": 1483557202, "post_id": 41470316, "comment_id": 70148830, "body": "It is the name of the prepared statement which is added to the logs. It has no technical meaning for the query."}, {"owner": {"reputation": 2132, "user_id": 856753, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/1c53a71370f55d0f0a4cc7e4b2c06b91?s=128&d=identicon&r=PG", "display_name": "Micheal", "link": "https://stackoverflow.com/users/856753/micheal"}, "edited": false, "score": 0, "creation_date": 1483558026, "post_id": 41470316, "comment_id": 70149275, "body": "I get the error: ActiveRecord::StatementInvalid (NoMethodError: undefined method `type&#39; for &quot;&#39;ALL&#39;&quot;:String: SELECT * FROM TABLE(FN_REQ(?,?,?,?,?,?,?,?,?))):"}, {"owner": {"reputation": 45322, "user_id": 421705, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/581b1760881c962648f99d6040d41829?s=128&d=identicon&r=PG", "display_name": "Holger Just", "link": "https://stackoverflow.com/users/421705/holger-just"}, "reply_to_user": {"reputation": 2132, "user_id": 856753, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/1c53a71370f55d0f0a4cc7e4b2c06b91?s=128&d=identicon&r=PG", "display_name": "Micheal", "link": "https://stackoverflow.com/users/856753/micheal"}, "edited": false, "score": 0, "creation_date": 1483558184, "post_id": 41470316, "comment_id": 70149358, "body": "@Micheal This probably rewards a new question with the necessary details."}, {"owner": {"reputation": 2132, "user_id": 856753, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/1c53a71370f55d0f0a4cc7e4b2c06b91?s=128&d=identicon&r=PG", "display_name": "Micheal", "link": "https://stackoverflow.com/users/856753/micheal"}, "edited": false, "score": 0, "creation_date": 1483558788, "post_id": 41470316, "comment_id": 70149667, "body": "thanks i will dig more into it. it looks like its not selecting the params at all"}], "tags": [], "owner": {"reputation": 45322, "user_id": 421705, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/581b1760881c962648f99d6040d41829?s=128&d=identicon&r=PG", "display_name": "Holger Just", "link": "https://stackoverflow.com/users/421705/holger-just"}, "is_accepted": true, "score": 2, "last_activity_date": 1483552606, "creation_date": 1483552606, "answer_id": 41470316, "question_id": 41469164, "link": "https://stackoverflow.com/questions/41469164/rails-brakeman-sql-injection-warning-while-accessing-an-oracle-view-function/41470316#41470316", "title": "Rails Brakeman SQL injection warning while accessing an oracle view/function", "body": "<p>Yes, it is real. Almost every time, you build <em>any</em> SQL query from simply concatenating variables, you are vulnerable to SQL injection. Generally, an SQL injection happens each time when data inserted into the query can look like valid SQL and can result in additional queries executed.</p>\n\n<p>The only solution is to manually enforce appropriate escaping or to use prepared statements, with the latter being the preferred solution.</p>\n\n<p>With ActiveRecord / Rails, you can use <a href=\"http://www.rubydoc.info/docs/rails/ActiveRecord/ConnectionAdapters/DatabaseStatements#exec_query-instance_method\" rel=\"nofollow noreferrer\"><code>exec_query</code></a> with binds directly</p>\n\n<pre><code>sql = 'SELECT * FROM TABLE(FN_REQ(?,?))'\nconnection.exec_query(sql, 'my query', [demo_type_param, demo_tid_param])\n</code></pre>\n\n<p>Here, Rails will prepare the statement on the database and add the parameters to it on execution, ensuring that everything is correctly escaped and save from SQL injection.</p>\n"}], "owner": {"reputation": 2132, "user_id": 856753, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/1c53a71370f55d0f0a4cc7e4b2c06b91?s=128&d=identicon&r=PG", "display_name": "Micheal", "link": "https://stackoverflow.com/users/856753/micheal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 410, "favorite_count": 0, "accepted_answer_id": 41470316, "answer_count": 1, "score": 0, "last_activity_date": 1483552606, "creation_date": 1483548619, "last_edit_date": 1483551994, "question_id": 41469164, "link": "https://stackoverflow.com/questions/41469164/rails-brakeman-sql-injection-warning-while-accessing-an-oracle-view-function", "title": "Rails Brakeman SQL injection warning while accessing an oracle view/function", "body": "<p>I have rails code that is consuming an oracle view/function.\nThis is my code:</p>\n\n<pre><code> def run_query\n    connection.exec_query(\n      \"SELECT * FROM TABLE(FN_REQ(#{demo_type_param},#{demo_tid_param}}))\")\n  end\n</code></pre>\n\n<p>When run Brakeman analyzer it warns of possible \"sql injection attack\"</p>\n\n<p>I need to understand if this is a valid warning, if so, how do I remediate it?</p>\n\n<p>Since this is a function &amp; not an actual table, I am not sure what's the right way.\nIf it was a normal model, i would have just followed this pattern:</p>\n\n<p><code>Model.where(\"mycolumn1= ? AND mycolumn2= ?\", demo_type_param, demo_tid_param).firs</code>t</p>\n"}, {"tags": ["android", "ruby", "oauth", "server", "google-signin"], "owner": {"reputation": 264, "user_id": 1815964, "user_type": "registered", "accept_rate": 12, "profile_image": "https://i.stack.imgur.com/4ePsM.jpg?s=128&g=1", "display_name": "Ramadoka", "link": "https://stackoverflow.com/users/1815964/ramadoka"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 168, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1483548313, "creation_date": 1483548313, "question_id": 41469078, "link": "https://stackoverflow.com/questions/41469078/how-can-i-mock-a-dummy-token-for-login-using-google-oauth-in-android", "title": "How can I mock a dummy token for login using Google OAuth in android?", "body": "<p>Since I'm not really into android development, is it possible to generate the token/code that will be generated for google oauth login without coding it in android?</p>\n\n<p>If I understood it correctly, basically client / application will generate a <code>one-time-token</code>, pass it to the Server. Server will exchange it with more permanent token <code>(access token?)</code>, and using this <code>(access token?)</code>, server can then request the user's data to google.</p>\n\n<p>but, is it possible to generate the <code>one-time-token</code> without coding it in android?</p>\n"}, {"tags": ["ruby", "dictionary", "filter", "functional-programming", "reduce"], "answers": [{"comments": [{"owner": {"reputation": 931, "user_id": 3960567, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/8f6c6b389b295fe04f9bb5dbf60a0ee0?s=128&d=identicon&r=PG&f=1", "display_name": "Minato", "link": "https://stackoverflow.com/users/3960567/minato"}, "edited": false, "score": 0, "creation_date": 1483548438, "post_id": 41469035, "comment_id": 70143800, "body": "Thank you! It&#39;s nice to know that you can delete the key you are grouping by!"}], "tags": [], "owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "is_accepted": false, "score": 3, "last_activity_date": 1483548170, "creation_date": 1483548170, "answer_id": 41469035, "question_id": 41468792, "link": "https://stackoverflow.com/questions/41468792/multiclass-partition-function-for-ruby-array-list/41469035#41469035", "title": "Multiclass partition function for ruby array/list", "body": "<pre><code>input = [\n  {:price=&gt;100.0, :size=&gt;'small', :description=&gt;'some description 1'},\n  {:price=&gt;100.0, :size=&gt;'large', :description=&gt;'some description 2'},\n  {:price=&gt;100.0, :size=&gt;'small', :description=&gt;'some description 3'},\n  {:price=&gt;100.0, :size=&gt;'large', :description=&gt;'some description 4'},\n  {:price=&gt;100.0, :size=&gt;'small', :description=&gt;'some description 5'},\n  {:price=&gt;100.0, :size=&gt;'small', :description=&gt;'some description 6'}\n]\n\ninput.group_by { |e| e[:size] }\n</code></pre>\n\n<hr>\n\n<p>Whether you consider the result should not contain the size in hashes, use <code>Hash#delete</code> to mutate elements:</p>\n\n<pre><code>input.group_by { |e| e.delete :size }\n#\u21d2 {\n#  \"large\" =&gt; [\n#    [0] {\n#      :description =&gt; \"some description 2\",\n#            :price =&gt; 100.0\n#    },\n#    [1] {\n#      :description =&gt; \"some description 4\",\n#            :price =&gt; 100.0\n#    }\n#  ],\n#  \"small\" =&gt; [\n#    [0] {\n#      :description =&gt; \"some description 1\",\n#            :price =&gt; 100.0\n#    },\n#    [1] {\n#      :description =&gt; \"some description 3\",\n#            :price =&gt; 100.0\n#    },\n#    [2] {\n#      :description =&gt; \"some description 5\",\n#            :price =&gt; 100.0\n#    },\n#    [3] {\n#      :description =&gt; \"some description 6\",\n#            :price =&gt; 100.0\n#    }\n#  ]\n# }\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 931, "user_id": 3960567, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/8f6c6b389b295fe04f9bb5dbf60a0ee0?s=128&d=identicon&r=PG&f=1", "display_name": "Minato", "link": "https://stackoverflow.com/users/3960567/minato"}, "edited": false, "score": 0, "creation_date": 1483548380, "post_id": 41469059, "comment_id": 70143756, "body": "Thanks, that is exactly what I was searching for!"}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "reply_to_user": {"reputation": 931, "user_id": 3960567, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/8f6c6b389b295fe04f9bb5dbf60a0ee0?s=128&d=identicon&r=PG&f=1", "display_name": "Minato", "link": "https://stackoverflow.com/users/3960567/minato"}, "edited": false, "score": 1, "creation_date": 1483548687, "post_id": 41469059, "comment_id": 70143981, "body": "@Minato you might want to use a proper class for your list items with accessor methods for <code>price</code>, <code>size</code>, and <code>description</code>. That would allow you to write <code>group_by(&amp;:size)</code>."}, {"owner": {"reputation": 931, "user_id": 3960567, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/8f6c6b389b295fe04f9bb5dbf60a0ee0?s=128&d=identicon&r=PG&f=1", "display_name": "Minato", "link": "https://stackoverflow.com/users/3960567/minato"}, "edited": false, "score": 0, "creation_date": 1483548962, "post_id": 41469059, "comment_id": 70144175, "body": "Nice to know! But I will stay with the hash for now as this form is just one of multiple forms the list items take, due to multiple transformations that are involved."}], "tags": [], "owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "is_accepted": true, "score": 4, "last_activity_date": 1483548243, "creation_date": 1483548243, "answer_id": 41469059, "question_id": 41468792, "link": "https://stackoverflow.com/questions/41468792/multiclass-partition-function-for-ruby-array-list/41469059#41469059", "title": "Multiclass partition function for ruby array/list", "body": "<p>I believe you are looking for <a href=\"http://apidock.com/ruby/Enumerable/group_by\" rel=\"nofollow noreferrer\"><code>Enumberable#group_by</code></a>:</p>\n\n<pre><code>list = [\n  {:price=&gt;100.0, :size=&gt;'small', :description=&gt;'some description'},\n  {:price=&gt;123.0, :size=&gt;'small', :description=&gt;'some description 2'},\n  {:price=&gt;456.0, :size=&gt;'medium', :description=&gt;'some description 3'}\n]\n\nlist.group_by {|item| item[:size]}\n  # =&gt; {\n  #      \"small\" =&gt; [\n  #        {:price=&gt;100.0, :size=&gt;\"small\", :description=&gt;\"some description\"},\n  #        {:price=&gt;123.0, :size=&gt;\"small\", :description=&gt;\"some description 2\"}\n  #      ],\n  #      \"medium\" =&gt; [\n  #        {:price=&gt;456.0, :size=&gt;\"medium\", :description=&gt;\"some description 3\"}\n  #      ]\n  #    }\n</code></pre>\n"}], "owner": {"reputation": 931, "user_id": 3960567, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/8f6c6b389b295fe04f9bb5dbf60a0ee0?s=128&d=identicon&r=PG&f=1", "display_name": "Minato", "link": "https://stackoverflow.com/users/3960567/minato"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 40, "favorite_count": 0, "accepted_answer_id": 41469059, "answer_count": 2, "score": 0, "last_activity_date": 1483548243, "creation_date": 1483547450, "question_id": 41468792, "link": "https://stackoverflow.com/questions/41468792/multiclass-partition-function-for-ruby-array-list", "title": "Multiclass partition function for ruby array/list", "body": "<p>I have just gotten deeper into functional aspects of ruby and are fiddling with map/reduce and some filtering.</p>\n\n<p>I have now gotten to a point where I have a list of items of the following structure: </p>\n\n<pre><code>{:price=&gt;100.0, :size=&gt;'small', :description=&gt;'some description'} \n</code></pre>\n\n<p>The value for <code>:size</code> may be one of <code>['small', 'medium', 'large']</code>.</p>\n\n<p>Is there a way to partition the whole list into sublists with only those elements which are of size small, medium and large without setting up a filter function for each of these values?</p>\n\n<p>Basically I am asking wether there is some multiclass Array.partition.</p>\n\n<p>Thanks for any help!</p>\n"}, {"tags": ["ruby", "ruby-on-rails-3", "ruby-on-rails-4", "rubygems"], "comments": [{"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1483548808, "post_id": 41468754, "comment_id": 70144055, "body": "Please define <code>&lt; 1.13</code>"}, {"owner": {"reputation": 351, "user_id": 5534731, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/e0347faf2a8ecc002919f9374015dd51?s=128&d=identicon&r=PG", "display_name": "me24hour", "link": "https://stackoverflow.com/users/5534731/me24hour"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1483548958, "post_id": 41468754, "comment_id": 70144170, "body": "it means if the value is <code>1.10</code> or <code>1.11</code> but not <code>1.13</code>"}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1483549003, "post_id": 41468754, "comment_id": 70144201, "body": "What about <code>1.2</code>, is it larger or smaller than <code>1.13</code>?"}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1483549616, "post_id": 41468754, "comment_id": 70144589, "body": "<i>&quot;is a higher version&quot;</i> \u2013 are these version numbers? If so, then <code>1.2</code> would come before <code>1.13</code> not afterwards. Unless you have a trailing zero as in <code>1.20</code>. Could you clarify this?"}, {"owner": {"reputation": 351, "user_id": 5534731, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/e0347faf2a8ecc002919f9374015dd51?s=128&d=identicon&r=PG", "display_name": "me24hour", "link": "https://stackoverflow.com/users/5534731/me24hour"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1483549958, "post_id": 41468754, "comment_id": 70144833, "body": "I am sorry. You are right. <code>1.2</code> would come before <code>1.13</code> not afterwards. <code>2.0</code> will be a higher version. I am going to delete the previous comment"}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1483550091, "post_id": 41468754, "comment_id": 70144919, "body": "Since your question is tagged <code>rubygems</code> \u2013 are your strings version strings of Ruby gems?"}, {"owner": {"reputation": 351, "user_id": 5534731, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/e0347faf2a8ecc002919f9374015dd51?s=128&d=identicon&r=PG", "display_name": "me24hour", "link": "https://stackoverflow.com/users/5534731/me24hour"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1483550341, "post_id": 41468754, "comment_id": 70145056, "body": "it is not strings of Ruby gems. It is actually a regular string variable"}], "answers": [{"tags": [], "owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "is_accepted": false, "score": 1, "last_activity_date": 1483551736, "creation_date": 1483551736, "answer_id": 41470084, "question_id": 41468754, "link": "https://stackoverflow.com/questions/41468754/performing-arithmetic-on-ruby-string-variable/41470084#41470084", "title": "Performing arithmetic on Ruby String variable", "body": "<p>Assuming that these are <em>version strings</em>, you could use <a href=\"http://ruby-doc.org/stdlib-2.4.0/libdoc/rubygems/rdoc/Gem/Version.html\" rel=\"nofollow noreferrer\"><code>Gem::Version</code></a> and <a href=\"http://ruby-doc.org/stdlib-2.4.0/libdoc/rubygems/rdoc/Gem/Requirement.html\" rel=\"nofollow noreferrer\"><code>Gem::Requirement</code></a>:</p>\n\n<pre><code>requirement = Gem::Requirement.new('&lt; 1.13')\n\nrequirement.satisfied_by? Gem::Version.new('1.10.2.ab2-4.cl6') #=&gt; true\nrequirement.satisfied_by? Gem::Version.new('1.11.2.ab2-4.dl5') #=&gt; true\nrequirement.satisfied_by? Gem::Version.new('1.13.2.ab2-4.el6') #=&gt; false\n</code></pre>\n"}], "owner": {"reputation": 351, "user_id": 5534731, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/e0347faf2a8ecc002919f9374015dd51?s=128&d=identicon&r=PG", "display_name": "me24hour", "link": "https://stackoverflow.com/users/5534731/me24hour"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 110, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1483551736, "creation_date": 1483547357, "question_id": 41468754, "link": "https://stackoverflow.com/questions/41468754/performing-arithmetic-on-ruby-string-variable", "title": "Performing arithmetic on Ruby String variable", "body": "<p>I have a ruby string variable that can have the value <code>1.10.2.ab2-4.cl6</code> or <code>1.11.2.ab2-4.dl5</code> or <code>1.13.2.ab2-4.el6</code></p>\n\n<p>I want to take the first two integer values of this variable which could be <code>1.10</code> or <code>1.11</code> or <code>1.13</code> and then print hello if the value is <code>&lt; 1.13</code></p>\n"}, {"tags": ["ruby", "glob", "file-copying"], "comments": [{"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1483547679, "post_id": 41468494, "comment_id": 70143244, "body": "<code>Dir.mkdir(&#39;&#47;tmp&#47;bcsh&#39;)</code> in advance will help. If you want to copy files with the full path, you should create all the directories yourself. E.g. use <code>Dir.glob() { |filename| HERE! Dir.mkdir &amp;&amp; FileUtils.cp }</code>"}, {"owner": {"reputation": 2955, "user_id": 444234, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/3a0f29f3fd3f8ed687656de9fa22bcc7?s=128&d=identicon&r=PG", "display_name": "android.weasel", "link": "https://stackoverflow.com/users/444234/android-weasel"}, "reply_to_user": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1483548138, "post_id": 41468494, "comment_id": 70143594, "body": "@mudasobwa What&#39;s &#39;HERE!&#39;? Is it a thing, or just you showing me where directories get created? I get so confused by Ruby&#39;s weird magic that I can&#39;t tell functionality from shorthand. Can you craft this as an answer? Thanks"}], "answers": [{"comments": [{"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1483554878, "post_id": 41469220, "comment_id": 70147550, "body": "The use of <code>dest</code> as a temporary variable is fine since you&#39;re using it twice in the following line. If you only used it once it&#39;d be questionable. As is you&#39;re getting a minor speed up because of the multiple uses. More questionable is the use of <code>&amp;&amp;</code> to join the two operations. Idiomatic code would reverse the operation using a trailing <code>if</code> to <code>mkdir_p</code> before <code>cp_r</code>: <code>FileUtils.cp_r(file, dest) if FileUtils.mkdir_p(dest)</code>. <code>&amp;&amp;</code> used that way smells of C or Perl."}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1483556317, "post_id": 41469220, "comment_id": 70148304, "body": "It looks like you&#39;re doing too much work though. <code>cp_r</code> recursively copies the hierarchy under the starting directory: &quot;...If src is a directory, this method copies all its contents recursively.&quot;, so using <code>glob</code> shouldn&#39;t be needed."}, {"owner": {"reputation": 2955, "user_id": 444234, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/3a0f29f3fd3f8ed687656de9fa22bcc7?s=128&d=identicon&r=PG", "display_name": "android.weasel", "link": "https://stackoverflow.com/users/444234/android-weasel"}, "reply_to_user": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1483606029, "post_id": 41469220, "comment_id": 70166376, "body": "@theTinMan I don&#39;t want the entire heirarchy though: I only want the things with .app in them, in any of the directories immediately under Products. The glob gives me the roots of the things I want."}, {"owner": {"reputation": 2955, "user_id": 444234, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/3a0f29f3fd3f8ed687656de9fa22bcc7?s=128&d=identicon&r=PG", "display_name": "android.weasel", "link": "https://stackoverflow.com/users/444234/android-weasel"}, "reply_to_user": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1483606512, "post_id": 41469220, "comment_id": 70166651, "body": "@theTinMan And yes, I&#39;m definitely not a devout Ruby programmer even after 18 months. There are certainly some good bits, but I still feel like I&#39;m programming in a briar patch riddled with rabbit holes and occasional glitter compared to C++/Perl/Java/Groovy (and even Python, now it has optional typing)."}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1483610060, "post_id": 41469220, "comment_id": 70168798, "body": "Local variable here might be eliminated with <a href=\"https://ruby-doc.org/core/Object.html#method-i-tap\" rel=\"nofollow noreferrer\"><code>Object#tap</code></a>: <code>File.dirname(&quot;&#47;tmp&#47;bcsh&#47;#{file}&quot;).tap { |dest| ... }</code>. That way is preferred since it makes it easier/faster for GC to collect <code>dest</code>."}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1483638424, "post_id": 41469220, "comment_id": 70188622, "body": "You might want to look at using Ruby&#39;s <a href=\"http://ruby-doc.org/stdlib-2.4.0/libdoc/find/rdoc/Find.html\" rel=\"nofollow noreferrer\"><code>Find.find</code></a> class and method. It makes it easy to do a recursive descent looking at individual files, and won&#39;t hit the disk as hard. It&#39;s well worth knowing about and using for this sort of thing."}], "tags": [], "owner": {"reputation": 2955, "user_id": 444234, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/3a0f29f3fd3f8ed687656de9fa22bcc7?s=128&d=identicon&r=PG", "display_name": "android.weasel", "link": "https://stackoverflow.com/users/444234/android-weasel"}, "is_accepted": false, "score": 0, "last_activity_date": 1483549255, "last_edit_date": 1483549255, "creation_date": 1483548781, "answer_id": 41469220, "question_id": 41468494, "link": "https://stackoverflow.com/questions/41468494/how-to-copy-a-file-glob-with-directory-structure/41469220#41469220", "title": "How to copy a file glob with directory structure", "body": "<p>Hm. Thanks to mudasobwa for the hint about glob taking a block. This seems to copy the results of the glob, preserving both the directory structure OF the glob and within each entry:</p>\n\n<pre><code>Dir.chdir('build/sources/ios_src') {\n  Dir.glob('build/Build/Products/*/*.app*') { |file|\n    dest = File.dirname(\"/tmp/bcsh/#{file}\")\n    FileUtils.mkdir_p(dest) &amp;&amp; FileUtils.cp_r(file, dest)\n  }\n}\n</code></pre>\n\n<p>Not keen on the temporary, but</p>\n\n<pre><code>.... { |file|\n  FileUtils.cp_r(file, FileUtils.mkdir_p(File.dirname(\"/tmp/bcsh/#{file}\")).first)\n}\n</code></pre>\n\n<p>is a bit extreme.</p>\n"}, {"comments": [{"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1483554687, "post_id": 41469322, "comment_id": 70147452, "body": "You might want to look at <code>*filename.split(File::SEPARATOR)[0..-1]</code> and what it&#39;s doing in the <code>File.join</code> context. You&#39;re making Ruby do things it doesn&#39;t need to do."}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "reply_to_user": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1483605515, "post_id": 41469322, "comment_id": 70166118, "body": "@theTinMan indeed, thanks, there should\u2019ve been triple-dot range. Fixed."}, {"owner": {"reputation": 2955, "user_id": 444234, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/3a0f29f3fd3f8ed687656de9fa22bcc7?s=128&d=identicon&r=PG", "display_name": "android.weasel", "link": "https://stackoverflow.com/users/444234/android-weasel"}, "edited": false, "score": 0, "creation_date": 1483606950, "post_id": 41469322, "comment_id": 70166882, "body": "Is split()[0...-1] more efficient or clearer than File.dirname? And does use of File::SEPARATOR matter, given that my glob has / in it?"}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "reply_to_user": {"reputation": 2955, "user_id": 444234, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/3a0f29f3fd3f8ed687656de9fa22bcc7?s=128&d=identicon&r=PG", "display_name": "android.weasel", "link": "https://stackoverflow.com/users/444234/android-weasel"}, "edited": false, "score": 0, "creation_date": 1483609975, "post_id": 41469322, "comment_id": 70168736, "body": "@android.weasel not at all. Using <code>File::SEPARATOR</code> is a matter of good habit, I always use it in file-related operations, just in case."}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 1, "creation_date": 1483721371, "post_id": 41469322, "comment_id": 70226500, "body": "<code>File.dirname</code> is MUCH clearer than using <code>split</code> and using <code>[0...-1]</code>. The later requires people to understand that <code>split</code> against a filename returns the path as an array, which then has to be passed to <code>join</code> whereas <code>dirname</code> returns the string already joined. Also <code>[0...-1]</code> is extremely unintuitive because of <code>...</code>. The use of <code>...</code> is discouraged because it is easily misread. At a minimum it should be written as <code>0..-2</code> but <code>dirname</code> would still be much more readable. And, readability always improves maintainability."}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1483721527, "post_id": 41469322, "comment_id": 70226616, "body": "<code>&quot;there should\u2019ve been triple-dot range&quot;</code>. No, <code>dirname</code> should have been used rather than <code>split</code> then <code>join</code>. File&#39;s filename methods are very flexible and it&#39;s really good to experiment with them to learn how flexible they are."}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "reply_to_user": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1483722038, "post_id": 41469322, "comment_id": 70226972, "body": "@theTinMan I never trust 3rd party file path handling routines. Even when they are provided by language core. This is my own brainbug, but it is induced by my experience. Sooner or later you\u2019ll find yourself debugging path routines on, say, VAX/VMS, or DR-DOS, or whatever."}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1483722163, "post_id": 41469322, "comment_id": 70227062, "body": "The &quot;3rd party&quot; routines use the same technique your code does, but under the covers. They&#39;re aware of the file path delimiters so they&#39;re cross-platform aware. Remember, the IO class automatically converts between platform file path delimiters."}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "reply_to_user": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1483722378, "post_id": 41469322, "comment_id": 70227191, "body": "@theTinMan in theory I know that. In practice, I have read \u201ccross-platform aware\u201d twice as often as the tools were in fact cross-platform aware. I understand, that it\u2019s silly to expect the same weird behaviour from ruby, but since they ruined <code>__callee__</code> <i>for the whole 2.3 version lifetime</i>, I don\u2019t trust the core team anymore."}], "tags": [], "owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "is_accepted": false, "score": 0, "last_activity_date": 1483605492, "last_edit_date": 1483605492, "creation_date": 1483549052, "answer_id": 41469322, "question_id": 41468494, "link": "https://stackoverflow.com/questions/41468494/how-to-copy-a-file-glob-with-directory-structure/41469322#41469322", "title": "How to copy a file glob with directory structure", "body": "<pre><code>Dir.chdir('build/sources/ios_src') do\n  Dir.glob('build/Build/Products/*/*.app*') do |filename|\n    dir = File.join(\"/tmp/bcsh\", *filename.split(File::SEPARATOR)[0...-1])\n\n    FileUtils.mkdir_p(dir)\n    FileUtils.cp(filename, dir)\n  end\nend\n</code></pre>\n"}], "owner": {"reputation": 2955, "user_id": 444234, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/3a0f29f3fd3f8ed687656de9fa22bcc7?s=128&d=identicon&r=PG", "display_name": "android.weasel", "link": "https://stackoverflow.com/users/444234/android-weasel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 610, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1483605492, "creation_date": 1483546635, "last_edit_date": 1483556185, "question_id": 41468494, "link": "https://stackoverflow.com/questions/41468494/how-to-copy-a-file-glob-with-directory-structure", "title": "How to copy a file glob with directory structure", "body": "<p>I want to copy selected build products, preserving their part of the directory structure, but this:</p>\n\n<pre><code>Dir.chdir('build/sources/ios_src') {\n  FileUtils.cp_r(Dir.glob('build/Build/Products/*/*.app*'), '/tmp/bcsh')\n}\n</code></pre>\n\n<p>results in</p>\n\n<pre><code>Errno::ENOENT: No such file or directory @ dir_s_mkdir - /tmp/bcsh/Booble.app\n</code></pre>\n\n<p>despite the glob returning this:</p>\n\n<pre><code>Dir.chdir('build/sources/ios_src') {\n  Dir.glob('build/Build/Products/*/*.app*')\n}\n =&gt; [\"build/Build/Products/Calabash-iphonesimulator/Booble.app\",\n     \"build/Build/Products/Calabash-iphonesimulator/Booble.app.dSYM\"] \n</code></pre>\n\n<p>I want <code>/tmp/bsch/build/Build/Products/.../Booble.app</code> and <code>.../Booble.app.dSYM</code> not <code>/tmp/bcsh/Booble.app</code> and <code>/tmp/bcsh/Booble.app.dSYM</code>.</p>\n\n<p>For clarity, I'm capable of creating a directory, but the error more usefully shows that the files would end up where I don't want them than more verbiage.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "bundler"], "answers": [{"tags": [], "owner": {"reputation": 6846, "user_id": 1753596, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/r9f3k.jpg?s=128&g=1", "display_name": "trh", "link": "https://stackoverflow.com/users/1753596/trh"}, "is_accepted": true, "score": 1, "last_activity_date": 1483557750, "creation_date": 1483557750, "answer_id": 41471720, "question_id": 41468472, "link": "https://stackoverflow.com/questions/41468472/bundler-cannot-load-gem-rake/41471720#41471720", "title": "Bundler cannot load gem rake", "body": "<p>You're likely going to find several things with Bluehost rails a challenging affair.  You might consider creating a free developer account on Heroku instead.  It will make this process a little easier.  </p>\n\n<p>However, you can fix your issue by setting a GEM_HOME in your htaccess file.  This is going to make sure that gems are installed in your web directory of the shared bluehost server - so they won't run into the kinds of issues that require sudo.  So open your .httacess file in your favorite editor and add this line:</p>\n\n<pre><code>SetEnv GEM_HOME /home2/shsprogr/ruby/gems\n</code></pre>\n"}], "owner": {"reputation": 107, "user_id": 6118400, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/12e9e934ccb50adc2e29b8b75d0e3c13?s=128&d=identicon&r=PG&f=1", "display_name": "Kepoor Hampond", "link": "https://stackoverflow.com/users/6118400/kepoor-hampond"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3508, "favorite_count": 1, "accepted_answer_id": 41471720, "answer_count": 1, "score": 1, "last_activity_date": 1502272008, "creation_date": 1483546552, "last_edit_date": 1502272008, "question_id": 41468472, "link": "https://stackoverflow.com/questions/41468472/bundler-cannot-load-gem-rake", "title": "Bundler cannot load gem rake", "body": "<p>I'm currently SSH'd into a remote server where I am trying <code>bundle install</code>, but here is the message that it spits out when I run it:</p>\n\n<pre><code>Fetching gem metadata from http://rubygems.org/...........\nFetching gem metadata from http://rubygems.org/..\nResolving dependencies...\nsudo: effective uid is not 0, is sudo installed setuid root?\n\nGem::Exception: Cannot load gem at [/usr/lib64/ruby/gems/1.9.3/cache/rake-12.0.0.gem] in /home2/shsprogr/rails/Frothy-Fox\nAn error occurred while installing rake (12.0.0), and Bundler cannot continue.\nMake sure that `gem install rake -v '12.0.0'` succeeds before bundling.\n</code></pre>\n\n<p>And yet, when I run <code>gem install rake -v '12.0.0'</code>:</p>\n\n<pre><code>Successfully installed rake-12.0.0\n1 gem installed\nInstalling ri documentation for rake-12.0.0...\nInstalling RDoc documentation for rake-12.0.0...\n</code></pre>\n\n<p>Yet the same thing happens with bundler above. If it helps, I'm on a bluehost server and I am unable to enable sudo access because <a href=\"https://my.bluehost.com/cgi/help/2358\" rel=\"nofollow noreferrer\">this</a> guide is out of date.</p>\n"}, {"tags": ["arrays", "ruby", "hash"], "answers": [{"comments": [{"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 1, "creation_date": 1483547535, "post_id": 41468527, "comment_id": 70143132, "body": "<code>original.each_with_object({}) { |(k, vs), h| vs.each { |v| h[v] = k } }</code> would work."}, {"owner": {"reputation": 5483, "user_id": 4481312, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/teLso.jpg?s=128&g=1", "display_name": "marmeladze", "link": "https://stackoverflow.com/users/4481312/marmeladze"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1483547771, "post_id": 41468527, "comment_id": 70143307, "body": "i was looking to documentation for a suitable method. need to commit to memory those below -))"}], "tags": [], "owner": {"reputation": 5483, "user_id": 4481312, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/teLso.jpg?s=128&g=1", "display_name": "marmeladze", "link": "https://stackoverflow.com/users/4481312/marmeladze"}, "is_accepted": false, "score": 2, "last_activity_date": 1483547509, "last_edit_date": 1483547509, "creation_date": 1483546696, "answer_id": 41468527, "question_id": 41468399, "link": "https://stackoverflow.com/questions/41468399/ruby-hash-values-is-array-need-to-convert-to-string/41468527#41468527", "title": "Ruby Hash Values is Array, need to convert to string", "body": "<p>the below snippet will give what you want, but let me think on a more readable and elegant solution. </p>\n\n<pre><code>newhash = {}\n\noriginal.each do |k,v|\n  v.each do |v2|\n    newhash[v2] = k\n  end\nend\n#=&gt; {1=&gt;[\"a\", \"b\", \"c\"], 2=&gt;[\"g\", \"m\", \"z\"]}\n\nnewhash\n#=&gt; {\"a\"=&gt;1, \"b\"=&gt;1, \"c\"=&gt;1, \"g\"=&gt;2, \"m\"=&gt;2, \"z\"=&gt;2}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 33085, "user_id": 2423164, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Nxbnp.jpg?s=128&g=1", "display_name": "ndnenkov", "link": "https://stackoverflow.com/users/2423164/ndnenkov"}, "is_accepted": false, "score": 2, "last_activity_date": 1483546705, "creation_date": 1483546705, "answer_id": 41468531, "question_id": 41468399, "link": "https://stackoverflow.com/questions/41468399/ruby-hash-values-is-array-need-to-convert-to-string/41468531#41468531", "title": "Ruby Hash Values is Array, need to convert to string", "body": "<pre><code>original.flat_map { |k, vs| vs.map { |v| {v =&gt; k} } }.reduce(&amp;:merge)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 11, "user_id": 7375204, "user_type": "unregistered", "profile_image": "https://www.gravatar.com/avatar/df85bc8d05528559f7f627a3e2afa6b1?s=128&d=identicon&r=PG", "display_name": "opearo", "link": "https://stackoverflow.com/users/7375204/opearo"}, "is_accepted": false, "score": 1, "last_activity_date": 1483547058, "creation_date": 1483547058, "answer_id": 41468648, "question_id": 41468399, "link": "https://stackoverflow.com/questions/41468399/ruby-hash-values-is-array-need-to-convert-to-string/41468648#41468648", "title": "Ruby Hash Values is Array, need to convert to string", "body": "<p>Your approach is close. You'll have to iterate each element in the values array when assigning the new key/value pair to the newHash</p>\n\n<pre><code>newHash = {}\noriginal.each { |k, v| v.each {|i| newHash[i] = k}}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1304, "user_id": 670127, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/ftaqP.jpg?s=128&g=1", "display_name": "Alexandre Abreu", "link": "https://stackoverflow.com/users/670127/alexandre-abreu"}, "is_accepted": false, "score": 1, "last_activity_date": 1483547358, "creation_date": 1483547358, "answer_id": 41468755, "question_id": 41468399, "link": "https://stackoverflow.com/questions/41468399/ruby-hash-values-is-array-need-to-convert-to-string/41468755#41468755", "title": "Ruby Hash Values is Array, need to convert to string", "body": "<pre><code>original.map { |number, ary| Hash[ary.map { |char| [char, number] }] }.reduce(&amp;:merge)\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 504, "user_id": 7024293, "user_type": "registered", "accept_rate": 68, "profile_image": "https://lh3.googleusercontent.com/-_iHS8SMGqHA/AAAAAAAAAAI/AAAAAAAAAbE/HudebqQ1IF4/photo.jpg?sz=128", "display_name": "stevensonmt", "link": "https://stackoverflow.com/users/7024293/stevensonmt"}, "edited": false, "score": 0, "creation_date": 1483550385, "post_id": 41468925, "comment_id": 70145084, "body": "All the responses are great, but this seems the most &quot;ruby&quot; way to do it.  Much thanks for introducing the product method to me."}], "tags": [], "owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "is_accepted": true, "score": 4, "last_activity_date": 1483547822, "creation_date": 1483547822, "answer_id": 41468925, "question_id": 41468399, "link": "https://stackoverflow.com/questions/41468399/ruby-hash-values-is-array-need-to-convert-to-string/41468925#41468925", "title": "Ruby Hash Values is Array, need to convert to string", "body": "<p>Another one, via <a href=\"http://ruby-doc.org/core-2.4.0/Array.html#method-i-product\" rel=\"nofollow noreferrer\"><code>Array#product</code></a>:</p>\n\n<pre><code>original.flat_map { |k, v| v.product([k]) }.to_h\n#=&gt; {\"a\"=&gt;1, \"b\"=&gt;1, \"c\"=&gt;1, \"g\"=&gt;2, \"m\"=&gt;2, \"z\"=&gt;2}\n</code></pre>\n"}], "owner": {"reputation": 504, "user_id": 7024293, "user_type": "registered", "accept_rate": 68, "profile_image": "https://lh3.googleusercontent.com/-_iHS8SMGqHA/AAAAAAAAAAI/AAAAAAAAAbE/HudebqQ1IF4/photo.jpg?sz=128", "display_name": "stevensonmt", "link": "https://stackoverflow.com/users/7024293/stevensonmt"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 840, "favorite_count": 0, "accepted_answer_id": 41468925, "answer_count": 5, "score": 1, "last_activity_date": 1483547822, "creation_date": 1483546318, "last_edit_date": 1483547717, "question_id": 41468399, "link": "https://stackoverflow.com/questions/41468399/ruby-hash-values-is-array-need-to-convert-to-string", "title": "Ruby Hash Values is Array, need to convert to string", "body": "<p>I have a hash of integers as keys and arrays of strings as values.  I need to convert this to a new hash that inverts this relationship with each item from the array of strings in the original hash values becoming a key in the new hash and each original key becoming the associated value.  For example:</p>\n\n<pre><code>original = {1 =&gt; ['a', 'b', 'c'], 2 =&gt; ['g', 'm', 'z']}\n\nnew_hash = {'a' =&gt; 1, 'b' =&gt; 1, 'c' =&gt; 1, 'g' =&gt; 2, 'm' =&gt; 2, 'z' =&gt; 2}\n</code></pre>\n\n<p>I'm struggling to extract the items from the original array values.  It's easy enough to do </p>\n\n<pre><code>original.each { |k, v| new_hash[v] = k }\n</code></pre>\n\n<p>but this keeps the original array as the new key.  I've tried doing something like </p>\n\n<pre><code>original.each { |k, v| new_hash[v.each { |i| i }] = k }\n</code></pre>\n\n<p>but this also returns the original array for some reason.</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 1553, "user_id": 4149820, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bb809f7e739416524f3c380fe8f4fe45?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas", "link": "https://stackoverflow.com/users/4149820/thomas"}, "edited": false, "score": 1, "creation_date": 1483569533, "post_id": 41468353, "comment_id": 70154757, "body": "you need to use javascript to update available options whenever a value changes"}, {"owner": {"reputation": 379, "user_id": 1377288, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/c49f62d90a3e50b237f67e2e1705111a?s=128&d=identicon&r=PG&f=1", "display_name": "Tuma", "link": "https://stackoverflow.com/users/1377288/tuma"}, "reply_to_user": {"reputation": 1553, "user_id": 4149820, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bb809f7e739416524f3c380fe8f4fe45?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas", "link": "https://stackoverflow.com/users/4149820/thomas"}, "edited": false, "score": 0, "creation_date": 1483615434, "post_id": 41468353, "comment_id": 70172347, "body": "@ThomasSevestre yeah, I ended up implementing it with javascript. Was hoping I could avoid it"}], "owner": {"reputation": 379, "user_id": 1377288, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/c49f62d90a3e50b237f67e2e1705111a?s=128&d=identicon&r=PG&f=1", "display_name": "Tuma", "link": "https://stackoverflow.com/users/1377288/tuma"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 25, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1483546157, "creation_date": 1483546157, "question_id": 41468353, "link": "https://stackoverflow.com/questions/41468353/how-to-guarantee-each-option-in-a-collection-is-selected-only-once", "title": "How to guarantee each option in a collection is selected only once", "body": "<p>I'm using <a href=\"https://github.com/ryanb/nested_form\" rel=\"nofollow noreferrer\">nested forms</a>, more specifically the <code>link_to_add</code> helper, which dynamically generates a new nested form for a new instance with the same fields whenever it is clicked. One of these fields is a <code>select_tag</code> with options from a collection. Is there a way to guarantee an item from the collection can be selected once for all instances that are being created in the same form? </p>\n\n<p><strong>To put it more simply</strong>: Is there a way to disable or remove options from a collection dynamically once they have been selected on a <code>select_tag</code>, so that other <code>select_tag</code>s that use the same collection won't allow that option to be selected again?</p>\n"}, {"tags": ["ruby", "postgresql", "sequel"], "answers": [{"tags": [], "owner": {"reputation": 11331, "user_id": 132053, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f183bcc4176b308c9edabe79299e448f?s=128&d=identicon&r=PG", "display_name": "Jeremy Evans", "link": "https://stackoverflow.com/users/132053/jeremy-evans"}, "is_accepted": true, "score": 2, "last_activity_date": 1483546184, "creation_date": 1483546184, "answer_id": 41468363, "question_id": 41468049, "link": "https://stackoverflow.com/questions/41468049/sequel-pass-value-to-pg-array-query/41468363#41468363", "title": "Sequel, pass value to pg_array query", "body": "<p>Load the pg_array extension into the Sequel::Database object (it ships with Sequel), then:</p>\n\n<pre><code>Model.where(\"array_col &amp;&amp; ?\", Sequel.pg_array(ids))\n</code></pre>\n\n<p>Sequel also ships with a pg_array_ops extension, which allows you to do:</p>\n\n<pre><code>Model.where(Sequel.pg_array(:array_col).overlaps(ids))\n</code></pre>\n"}], "owner": {"reputation": 1213, "user_id": 3825408, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/e6a977bb7d71d35589d3cfa3738e5a46?s=128&d=identicon&r=PG&f=1", "display_name": "zombie_ghast", "link": "https://stackoverflow.com/users/3825408/zombie-ghast"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 254, "favorite_count": 0, "accepted_answer_id": 41468363, "answer_count": 1, "score": 0, "last_activity_date": 1483546184, "creation_date": 1483545337, "last_edit_date": 1483545805, "question_id": 41468049, "link": "https://stackoverflow.com/questions/41468049/sequel-pass-value-to-pg-array-query", "title": "Sequel, pass value to pg_array query", "body": "<p>I am looking for a way to pass an array param to a pg_array query (<a href=\"https://www.postgresql.org/docs/8.2/static/functions-array.html\" rel=\"nofollow noreferrer\">https://www.postgresql.org/docs/8.2/static/functions-array.html</a>). Something like: </p>\n\n<pre><code>Model.where(\"array_col &amp;&amp; ?\", ids)\n</code></pre>\n\n<p>&amp;&amp; - overlap</p>\n\n<p><code>ids</code> = [2,3]</p>\n\n<p><code>array_col</code> is array containing integers for example [1,2]</p>\n\n<p>When hardcoded works:</p>\n\n<pre><code>Model.where(\"array_col &amp;&amp; ARRAY[2,3]\")\n</code></pre>\n"}, {"tags": ["ruby", "proxy", "ftp", "socks"], "comments": [{"owner": {"reputation": 424, "user_id": 3703449, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/398388c2706cdb0b25e4cd7b44304658?s=128&d=identicon&r=PG&f=1", "display_name": "wendybeth", "link": "https://stackoverflow.com/users/3703449/wendybeth"}, "edited": false, "score": 0, "creation_date": 1483545281, "post_id": 41467952, "comment_id": 70141456, "body": "What do you mean &#39;it seems like it does not work&#39;? What error message are you getting? Can you include the code you&#39;re using, what you&#39;re expected it to do, and what it is doing, so that there&#39;s a better chance that someone can help you out?"}, {"owner": {"reputation": 2682, "user_id": 4072843, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tKkUM.jpg?s=128&g=1", "display_name": "Castaglia", "link": "https://stackoverflow.com/users/4072843/castaglia"}, "edited": false, "score": 1, "creation_date": 1483547552, "post_id": 41467952, "comment_id": 70143150, "body": "Does the <code>SOCKS_SERVER</code> environment variable need to be set <i>before</i> you call <code>ftp.connect()</code>?"}, {"owner": {"reputation": 778, "user_id": 1693485, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/ccd9a1122385e0dacffff49dfbe0b771?s=128&d=identicon&r=PG", "display_name": "LukasMac", "link": "https://stackoverflow.com/users/1693485/lukasmac"}, "reply_to_user": {"reputation": 2682, "user_id": 4072843, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tKkUM.jpg?s=128&g=1", "display_name": "Castaglia", "link": "https://stackoverflow.com/users/4072843/castaglia"}, "edited": false, "score": 0, "creation_date": 1483606883, "post_id": 41467952, "comment_id": 70166841, "body": "Copy paste error.. @Castaglia thanks for pointing this out."}, {"owner": {"reputation": 2682, "user_id": 4072843, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tKkUM.jpg?s=128&g=1", "display_name": "Castaglia", "link": "https://stackoverflow.com/users/4072843/castaglia"}, "edited": false, "score": 1, "creation_date": 1483630477, "post_id": 41467952, "comment_id": 70183060, "body": "From the Ruby <a href=\"https://github.com/ruby/ruby/blob/trunk/lib/net/ftp.rb#L335\" rel=\"nofollow noreferrer\">Net::FTP source code</a>, there&#39;s a check to see if <code>SOCKSSocket</code> is supported, in addition to the <code>SOCKS_SERVER</code> env var check.  And <a href=\"http://stackoverflow.com/q/9923704/4072843\">this StackOverflow post</a> suggests that your Ruby <i>might</i> not be built with SOCKS support."}], "owner": {"reputation": 778, "user_id": 1693485, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/ccd9a1122385e0dacffff49dfbe0b771?s=128&d=identicon&r=PG", "display_name": "LukasMac", "link": "https://stackoverflow.com/users/1693485/lukasmac"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 789, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1483606818, "creation_date": 1483545093, "last_edit_date": 1483606818, "question_id": 41467952, "link": "https://stackoverflow.com/questions/41467952/how-to-connect-to-ftp-via-socks5-proxy-with-ruby", "title": "How to connect to FTP via SOCKS5 proxy with Ruby?", "body": "<p>I'm trying to connect to FTP via SOCKS5 proxy using ruby's library <code>Net::FTP</code>. Documentation says to set env variable <code>SOCKS_SERVER</code> in order to connect through proxy (<a href=\"http://ruby-doc.org/stdlib-2.0.0/libdoc/net/ftp/rdoc/Net/FTP.html#method-i-connect\" rel=\"nofollow noreferrer\">http://ruby-doc.org/stdlib-2.0.0/libdoc/net/ftp/rdoc/Net/FTP.html#method-i-connect</a>), but it seems like it does not work.</p>\n\n<p>Code I'm running is this:</p>\n\n<pre><code>irb(main):054:0&gt; ftp = Net::FTP.new\n=&gt; #&lt;Net::FTP:0x007efd08c73768 @mon_owner=nil, @mon_count=0, @mon_mutex=#&lt;Thread::Mutex:0x007efd08c73718&gt;, @binary=true, @passive=true, @debug_mode=false, @resume=false, @sock=#&lt;Net::FTP::NullSocket:0x007efd08c736f0&gt;, @logged_in=false, @open_timeout=nil, @read_timeout=60&gt;\nirb(main):056:0&gt; ENV['SOCKS_SERVER'] = 'host:port'\n=&gt; \"host:port\"\nirb(main):055:0&gt; ftp.connect('test.rebex.net')\n=&gt; nil\nirb(main):057:0&gt; ftp.login('demo', 'password')\n=&gt; true\nirb(main):058:0&gt; ftp.ls\n=&gt; [\"10-27-15  03:46PM       &lt;DIR&gt;          pub\", \"04-08-14  03:09PM                  403 readme.txt\"]\n</code></pre>\n\n<p>When I look to proxy logs I can not see any requests going through.</p>\n\n<p>What I'm doing wrong or does anybody have an example how to achieve that?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "apache", "ubuntu"], "comments": [{"owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "edited": false, "score": 0, "creation_date": 1483547400, "post_id": 41467559, "comment_id": 70143030, "body": "Do you have any gems installed on that server? Is <code>bundler</code> available? Did you run <code>bundle install</code> on that server? How do you deploy your application, with <code>capistrano</code>?"}, {"owner": {"reputation": 11, "user_id": 7374782, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-9RboWJfwKn0/AAAAAAAAAAI/AAAAAAAAAqU/2r0hBtAqt_I/photo.jpg?sz=128", "display_name": "Anton Atamanov", "link": "https://stackoverflow.com/users/7374782/anton-atamanov"}, "reply_to_user": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "edited": false, "score": 0, "creation_date": 1483549114, "post_id": 41467559, "comment_id": 70144276, "body": "Yes, I ran &#39;bundle install&#39; many times. The software (Canvas Learning management system) was installed directly from Github."}, {"owner": {"reputation": 1594, "user_id": 2681997, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/qgKiM.jpg?s=128&g=1", "display_name": "Ajay Barot", "link": "https://stackoverflow.com/users/2681997/ajay-barot"}, "edited": false, "score": 0, "creation_date": 1483549733, "post_id": 41467559, "comment_id": 70144665, "body": "@AntonAtamanov: Try this <code>gem install bundler</code>"}, {"owner": {"reputation": 11, "user_id": 7374782, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-9RboWJfwKn0/AAAAAAAAAAI/AAAAAAAAAqU/2r0hBtAqt_I/photo.jpg?sz=128", "display_name": "Anton Atamanov", "link": "https://stackoverflow.com/users/7374782/anton-atamanov"}, "edited": false, "score": 0, "creation_date": 1483602970, "post_id": 41467559, "comment_id": 70164919, "body": "There is no effect.."}], "owner": {"reputation": 11, "user_id": 7374782, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-9RboWJfwKn0/AAAAAAAAAAI/AAAAAAAAAqU/2r0hBtAqt_I/photo.jpg?sz=128", "display_name": "Anton Atamanov", "link": "https://stackoverflow.com/users/7374782/anton-atamanov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 55, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1483603046, "creation_date": 1483544028, "last_edit_date": 1483603046, "question_id": 41467559, "link": "https://stackoverflow.com/questions/41467559/web-application-cannot-start-ruby-on-rails", "title": "Web application cannot start. Ruby On rails", "body": "<p>I got an issue with starting Ruby application.\nI got Ubuntu 14.04,  Apache/2.4.7, ruby 2.2.5p319 and some Web Apllication installed on. \nWhen I try to go to application page, i see the exception and a trace in my browser. </p>\n\n<pre><code>\n\n\n      Web application could not be started\n\n        cannot load such file -- bundler/setup (LoadError)\n        /usr/lib/ruby/2.2.0/rubygems/core_ext/kernel_require.rb:54:in `require'\n        /usr/lib/ruby/2.2.0/rubygems/core_ext/kernel_require.rb:54:in `require'\n        /usr/lib/ruby/vendor_ruby/phusion_passenger/loader_shared_helpers.rb:245:in     \n        `block in run_load_path_setup_code'\n        /usr/lib/ruby/vendor_ruby/phusion_passenger/loader_shared_helpers.rb:348:in \n        `running_bundler'\n        /usr/lib/ruby/vendor_ruby/phusion_passenger/loader_shared_helpers.rb:243:in \n        `run_load_path_setup_code'\n        /usr/share/passenger/helper-scripts/rack-preloader.rb:100:in `preload_app'\n        /usr/share/passenger/helper-scripts/rack-preloader.rb:158:in `'\n        /usr/share/passenger/helper-scripts/rack-preloader.rb:29:in \n        `'\n        /usr/share/passenger/helper-scripts/rack-preloader.rb:28:in \n\n</code></pre>\n\n<p>Also environmet variables:</p>\n\n<pre><code>\n\n    APACHE_PID_FILE = /var/run/apache2/apache2.pid\n    SHELL = /bin/bash\n    APACHE_RUN_USER = www-data\n    PASSENGER_DEBUG_DIR = /tmp/passenger.spawn-debug.XXXXybOMMs\n    USER = appuser\n    APACHE_LOG_DIR = /var/log/apache2\n    PATH = /usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin\n    PWD = /var/app\n    APACHE_RUN_GROUP = www-data\n    LANG = C\n    NODE_PATH = /usr/share/passenger/node\n    SHLVL = 0\n    HOME = /home/appuser\n    LOGNAME = appuser\n    APACHE_LOCK_DIR = /var/lock/apache2\n    APACHE_RUN_DIR = /var/run/apache2\n    IN_PASSENGER = 1\n    PYTHONUNBUFFERED = 1\n    RAILS_ENV = production\n    RACK_ENV = production\n    WSGI_ENV = production\n    NODE_ENV = production\n    PASSENGER_APP_ENV = production\n    SERVER_PROTOCOL = HTTP/1.1\n    SERVER_ADDR = x.x.x.x\n    REMOTE_ADDR = y.y.y.y\n    REQUEST_URI = /\n    SSL_TLS_SNI = myaddr.com\n    HTTPS = on\n    SERVER_PORT = 443\n    SERVER_NAME = myaddr.com\n    SERVER_SOFTWARE = Apache/2.4.7 (Ubuntu)\n    SERVER_ADMIN = youremail@example.com\n    REMOTE_PORT = 51589\n    DOCUMENT_ROOT = /var/myapp/public\n    QUERY_STRING = \n    REQUEST_METHOD = GET\n\n</code></pre>\n\n<pre><code>\n\n    RUBY_VERSION = 2.2.6\n    RUBY_PLATFORM = i386-linux-gnu\n    RUBY_ENGINE = ruby\n    RubyGems version = 2.4.5.2\n\n</code></pre>\n\n<p>It seems that some parts of Ruby's previous version still has influence to the WebApp, but I can't find where to correct it.\nThanks.</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 4600, "user_id": 5961578, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/df7cbfdd2a92a7926af3bbb8648318aa?s=128&d=identicon&r=PG", "display_name": "moveson", "link": "https://stackoverflow.com/users/5961578/moveson"}, "edited": false, "score": 0, "creation_date": 1483545395, "post_id": 41467451, "comment_id": 70141538, "body": "I&#39;m getting the same error using Ruby 2.2.4 and Rails 4.2. It happens only in my test environment, only if I&#39;ve modified code, and only if I&#39;m running tests individually--running the entire test suite has no problem."}], "answers": [{"comments": [{"owner": {"reputation": 13452, "user_id": 559301, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/e2eee011184fef1a8b4890ca1422ec26?s=128&d=identicon&r=PG", "display_name": "Zane Claes", "link": "https://stackoverflow.com/users/559301/zane-claes"}, "edited": false, "score": 0, "creation_date": 1483624009, "post_id": 41468979, "comment_id": 70178387, "body": "As I explained in the question, the class auto-loads just fine <i>the first time</i>. I definitely have all the naming and paths set up correctly, or it would not autoload the first time. None of your explanation addresses the issue I described. Notice that I was very clear that the error is <b>SPURIOUS</b> and that the first request (and even second and third!) worked fine."}, {"owner": {"reputation": 424, "user_id": 3703449, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/398388c2706cdb0b25e4cd7b44304658?s=128&d=identicon&r=PG&f=1", "display_name": "wendybeth", "link": "https://stackoverflow.com/users/3703449/wendybeth"}, "reply_to_user": {"reputation": 13452, "user_id": 559301, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/e2eee011184fef1a8b4890ca1422ec26?s=128&d=identicon&r=PG", "display_name": "Zane Claes", "link": "https://stackoverflow.com/users/559301/zane-claes"}, "edited": false, "score": 0, "creation_date": 1483641170, "post_id": 41468979, "comment_id": 70190220, "body": "The blog post specifically addresses why the constant would be loaded on the first request and not again, which is why I found it relevant. I made a mistake by overlooking that part in my answer, not because I didn&#39;t read and understand your question but because I overlooked the fact that  my summary should include that part, and I will edit it accordingly."}], "tags": [], "owner": {"reputation": 424, "user_id": 3703449, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/398388c2706cdb0b25e4cd7b44304658?s=128&d=identicon&r=PG&f=1", "display_name": "wendybeth", "link": "https://stackoverflow.com/users/3703449/wendybeth"}, "is_accepted": true, "score": 6, "last_activity_date": 1483642182, "last_edit_date": 1495540909, "creation_date": 1483547987, "answer_id": 41468979, "question_id": 41467451, "link": "https://stackoverflow.com/questions/41467451/why-does-ruby-on-rails-spuriously-raise-unable-to-autoload-constant-after-edit/41468979#41468979", "title": "Why does Ruby on Rails spuriously raise &quot;Unable to Autoload Constant&quot; after editing code?", "body": "<p>There are a couple of good explanations for Rails autoloading behavior that you can find. <a href=\"https://stackoverflow.com/a/24548183/3703449\">This answer</a> provides a useful explanation, which it grabs from <a href=\"http://urbanautomaton.com/blog/2013/08/27/rails-autoloading-hell/\" rel=\"noreferrer\">this blog post at urbanautomaton.com</a>.</p>\n\n<p>Summary:</p>\n\n<p>Basically, Rails first uses Ruby's constant lookup. If that fails, then it has its own lookup, which will miss files if</p>\n\n<ul>\n<li>They are not in the autoload paths (Rails won't find app/foo/bar.rb if <code>config.autoload_paths += %W(#{config.root}/foo)</code> is not added to config/application.rb)</li>\n<li>The directory name/namespace convention isn't followed</li>\n</ul>\n\n<p>It will find <code>Foo::Bar</code> in app/foo/bar.rb if it's defined as:</p>\n\n<pre><code>module Foo\n  class Bar\n  end\nend\n</code></pre>\n\n<p>but not</p>\n\n<pre><code>module Foo\n  module Bar\n  end\nend\n</code></pre>\n\n<ul>\n<li>A constant in a different namespace is referenced without that namespace indicated in another file that's already been autoloaded</li>\n</ul>\n\n<p>Quote from the blog post describing what I mean:</p>\n\n<blockquote>\n  <p>At this point, we\u2019ve only seen how a single constant name maps to a\n  single file name. But as we know, a constant reference in Ruby can\n  resolve to a number of different constant definitions, which vary\n  depending on the nesting in which the reference was made. How does\n  Rails handle this?</p>\n  \n  <p>The answer is, \u201cpartially\u201d. As <code>Module#const_missing</code> passes no nesting\n  information to the receiver, Rails does not know the nesting in which\n  the reference was made, and it must make an assumption. For any\n  reference to a constant <code>Foo::Bar::Baz</code>, it assumes the following:</p>\n\n<pre><code>module Foo\n  module Bar\n    Baz # Module.nesting =&gt; [Foo::Bar, Foo]\nend\n</code></pre>\n  \n  <p>end</p>\n  \n  <p>In other words, it assumes the maximum nesting possible for a given constant\n  reference. The example reference is therefore treated exactly the same\n  as the following:</p>\n  \n  <p><code>Foo::Bar::Baz # Module.nesting =&gt; []</code></p>\n\n<pre><code>module Foo::Bar\n  Baz # Module.nesting =&gt; [Foo::Bar]\nend\n</code></pre>\n  \n  <p>While there\u2019s\n  been a significant loss of information, Rails does have some extra\n  information it can use. It knows that Ruby failed to resolve this\n  particular constant reference using its regular lookup, meaning that\n  whatever constant it should refer to cannot be already loaded.</p>\n  \n  <p>When <code>Foo::Bar::Baz</code> is referred to, then, Rails will attempt to load\n  the following constants in turn, until it finds one that is already\n  loaded:</p>\n  \n  <ul>\n  <li><code>Foo::Bar::Baz</code></li>\n  <li><code>Foo::Baz</code></li>\n  <li><code>Baz</code></li>\n  </ul>\n  \n  <p>As soon as an already-loaded constant <code>Baz</code>\n  is encountered, Rails knows this cannot be the <code>Baz</code> it is looking for,\n  and the algorithm raises a <code>NameError</code>.</p>\n</blockquote>\n\n<p>It's difficult to say what exactly is causing your problem(s) without more specifics about how your code is set up, but hopefully understanding what's going on with autoloading in Rails might help a little. I would highly recommend reading through the blog post and answer linked above.</p>\n\n<p><strong>Edited for possible solution:</strong></p>\n\n<p>Make sure 'app/models/foo' is added to your autoload_load paths in config/application.rb - or move 'foo' to app/models/concerns, which should be there by default.</p>\n\n<p>Often adding explicit <code>require</code> statements helps - especially if things are loading properly in development but not in test. I recently solved this problem by adding a file that required all of my nested files (I had a directory structure that did not mirror my namespace structure) and then requiring that file in my test helper.</p>\n\n<p><strong>Second edit</strong></p>\n\n<p>Including information relevant to the question, why a constant might load successfully only once.</p>\n\n<p>From <a href=\"http://urbanautomaton.com/blog/2013/08/27/rails-autoloading-hell/\" rel=\"noreferrer\">the same blog post</a>:</p>\n\n<blockquote>\n  <p>If constants are loaded only when they\u2019re first encountered at\n  runtime, then by necessity their load order depends on the individual\n  execution path. This can mean that the same constant reference\n  resolves to different constant definitions in two runs of the same\n  code. Worse still, the same constant reference twice in a row can give\n  different results.</p>\n  \n  <p>Let\u2019s go back to our last example. What happens if we call .print_qux\n  twice?</p>\n\n<pre><code>&gt; Foo::Bar.print_qux\nI'm in Foo!\n=&gt; nil\n&gt; Foo::Bar.print_qux\n</code></pre>\n  \n  <p>NameError: uninitialized constant Foo::Bar::Qux This is disastrous!\n  First we\u2019ve been given the wrong result, and then we\u2019ve been\n  incorrectly told that the constant we referred to doesn\u2019t exist. What\n  on earth led to this?</p>\n  \n  <p>The first time, as before, is down to the loss of nesting information.\n  Rails can\u2019t know that Foo::Qux isn\u2019t what we\u2019re after, so once it\n  realises that Foo::Bar::Qux does not exist, it happily loads it.</p>\n  \n  <p>The second time, however, Foo::Qux is already loaded. So our reference\n  can\u2019t have been to that constant, otherwise Ruby would have resolved\n  it, and autoloading would never have been invoked. So the lookup\n  terminates with a NameError, even though our reference could (and\n  should) have resolved to the as-yet-unloaded ::Qux.</p>\n  \n  <p>We can fix this by referring to ::Qux first, ensuring that it\u2019s loaded\n  for Ruby to resolve the reference:</p>\n\n<pre><code>&gt; Qux\n=&gt; \"I'm at the root!\"\n&gt; Foo::Bar.print_qux\nI'm at the root!\n=&gt; nil\n&gt; Foo::Bar.print_qux\nI'm at the root!\n=&gt; nil\n</code></pre>\n  \n  <p>A funny thing has happened here. In order to get correct behaviour, we\n  deliberately loaded the constant we needed before we used it (albeit\n  indirectly, by referring to it, rather than loading the file that\n  defined it).</p>\n  \n  <p>But wait; isn\u2019t this suspiciously close to explicitly loading our\n  dependencies with require, the very thing autoloading was supposed to\n  save us from?</p>\n  \n  <p>To be fair, we could also have fixed the issue by fully qualifying all\n  of our constant references, i.e. making sure that within .print_qux we\n  referred to ::Qux and not the ambiguous Qux. But this still costs us\n  our existing intuitions about Ruby\u2019s behaviour. Moreover, without\n  intimate knowledge of the autoloading process, we would have been hard\n  pressed to deduce that this was necessary.</p>\n</blockquote>\n"}], "owner": {"reputation": 13452, "user_id": 559301, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/e2eee011184fef1a8b4890ca1422ec26?s=128&d=identicon&r=PG", "display_name": "Zane Claes", "link": "https://stackoverflow.com/users/559301/zane-claes"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2708, "favorite_count": 0, "accepted_answer_id": 41468979, "answer_count": 1, "score": 11, "last_activity_date": 1483642182, "creation_date": 1483543767, "last_edit_date": 1483624220, "question_id": 41467451, "link": "https://stackoverflow.com/questions/41467451/why-does-ruby-on-rails-spuriously-raise-unable-to-autoload-constant-after-edit", "title": "Why does Ruby on Rails spuriously raise &quot;Unable to Autoload Constant&quot; after editing code?", "body": "<p>Autoloading (and re-loading) generally works fine in my Ruby (<code>2.3.0</code>) on Rails (<code>5.0.1</code>) project. However, in development mode I occasionally see an error like the following:</p>\n\n<blockquote>\n  <p>Unable to autoload constant Foo::Bar, expected /app/models/foo/bar.rb to define it</p>\n</blockquote>\n\n<p>This is unexpected because:</p>\n\n<ol>\n<li>The first request worked fine (it autoloaded once already). </li>\n<li>It only appears after editing code and sending a new request.</li>\n<li>It does not always happen. I cannot figure out why <em>sometimes</em> it fails to reload.</li>\n<li>The file (<code>foo/bar.rb</code>) does, in fact, define <code>Foo::Bar</code>.</li>\n</ol>\n\n<p>Moreover, the code for <code>foo/bar.rb</code> is dead simple:</p>\n\n<pre><code>module Foo\n  class Bar &lt; CustomRecord\n  end\nend\n</code></pre>\n\n<p>The simple work-around is to restart the server and then send the request again (which always succeeds). FWIW, I'm using <a href=\"https://github.com/burke/zeus\" rel=\"noreferrer\"><code>zeus server</code></a>.</p>\n\n<p>My best-guess is that something is not being reloaded, but I'm not sure how to go about debugging. I can't seem to point to any specific action which causes the problem. Sometimes editing code causes it to happen, sometimes not.</p>\n"}, {"tags": ["ruby", "scope"], "comments": [{"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1483575037, "post_id": 41467015, "comment_id": 70156678, "body": "&quot;I&#39;m confused because I have declared the variable and it should be available to me in my loop.&quot; \u2013 Did you even read the error message you posted? The error is on line 27, which is not in your loop. Your loop has nothing to do with it."}, {"owner": {"reputation": 1, "user_id": 5204451, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-6nntVEEjeps/AAAAAAAAAAI/AAAAAAAAABA/6xM5I1hbDjM/photo.jpg?sz=128", "display_name": "Mihalis Fthenos", "link": "https://stackoverflow.com/users/5204451/mihalis-fthenos"}, "reply_to_user": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1483677704, "post_id": 41467015, "comment_id": 70203836, "body": "Sure it is.... the method causing error is defined on line, containing the postal_codes variable."}], "answers": [{"tags": [], "owner": {"reputation": 3575, "user_id": 6081445, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/005fd098b0fa87b368915187a4e588fd?s=128&d=identicon&r=PG&f=1", "display_name": "Kevin Wallis", "link": "https://stackoverflow.com/users/6081445/kevin-wallis"}, "is_accepted": false, "score": 1, "last_activity_date": 1483542684, "last_edit_date": 1483542684, "creation_date": 1483542592, "answer_id": 41467060, "question_id": 41467015, "link": "https://stackoverflow.com/questions/41467015/a-ruby-nameerror-undefined-local-variable-was-defined/41467060#41467060", "title": "A Ruby NameError, undefined local variable, was defined", "body": "<pre><code>@postal_codes = {\n  V: \"British Columbia\",\n  Y: \"Yukon Territory\",\n  X: \"Northwest Territory\",\n  T: \"Alberta\",\n  S: \"Saskatechewan\",\n  R: \"Manitoba\",\n  P: \"Northern Ontario\",\n  M: \"Toronto\",\n  L: \"Central Ontario\",\n  K: \"Eastern Ontario\",\n  J: \"Western &amp; Northern Quebec\",\n  N: \"Western Ontario\",\n  G: \"Eastern Quebec\",\n  H: \"Metroplitan Montreal\",\n  A: \"Newfoundland &amp; Labradour\",\n  C: \"Prince Edward Island\",\n  E: \"New Brunswick\",\n  B: \"Nova Scotia\"\n}\n\ndef lookup_code(postal_code)\n  territory = @postal_codes.fetch(postal_code[0].upcase.to_sym)\n  puts \"Your address is in #{territory}\"\nend\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 3575, "user_id": 6081445, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/005fd098b0fa87b368915187a4e588fd?s=128&d=identicon&r=PG&f=1", "display_name": "Kevin Wallis", "link": "https://stackoverflow.com/users/6081445/kevin-wallis"}, "edited": false, "score": 0, "creation_date": 1483542840, "post_id": 41467063, "comment_id": 70139784, "body": "a global variable would also be possible or?"}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "reply_to_user": {"reputation": 3575, "user_id": 6081445, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/005fd098b0fa87b368915187a4e588fd?s=128&d=identicon&r=PG&f=1", "display_name": "Kevin Wallis", "link": "https://stackoverflow.com/users/6081445/kevin-wallis"}, "edited": false, "score": 2, "creation_date": 1483543392, "post_id": 41467063, "comment_id": 70140140, "body": "@ndn Updated. Also, one might <code>require(&#39;open-uri&#39;); open(&#39;http:&#47;&#47;www.geopostcodes.com&#47;canada?&#39;) ; parse(...)</code> :)"}, {"owner": {"reputation": 1, "user_id": 5204451, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-6nntVEEjeps/AAAAAAAAAAI/AAAAAAAAABA/6xM5I1hbDjM/photo.jpg?sz=128", "display_name": "Mihalis Fthenos", "link": "https://stackoverflow.com/users/5204451/mihalis-fthenos"}, "edited": false, "score": 0, "creation_date": 1483677838, "post_id": 41467063, "comment_id": 70203870, "body": "Thank you mudasobwa! I didn&#39;t realize methods did not function as closures... Coming from JavaScript I just assumed they would have access to variables in the higher scope."}], "tags": [], "owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "is_accepted": true, "score": 3, "last_activity_date": 1483543221, "last_edit_date": 1483543221, "creation_date": 1483542610, "answer_id": 41467063, "question_id": 41467015, "link": "https://stackoverflow.com/questions/41467015/a-ruby-nameerror-undefined-local-variable-was-defined/41467063#41467063", "title": "A Ruby NameError, undefined local variable, was defined", "body": "<p>Methods introduce new scope. They are not closures: one should not expect that local variables from the parent scope would be accessible there in the nested scope.</p>\n\n<h3>Solution 1: Use constant</h3>\n\n<pre><code>POSTAL_CODES = {\n  V: \"British Columbia\",\n  # SKIPPED\n  B: \"Nova Scotia\"\n}\n\n\ndef lookup_code(postal_code)\n  territory = POSTAL_CODES.fetch(postal_code[0].upcase.to_sym)\n  puts \"Your address is in #{territory}\"\nend\n</code></pre>\n\n<h3>Solution 2: Use an instance variable</h3>\n\n<p>Despite that you have no class, there is <code>main</code>, which is a special instance of <code>Object</code>, always defined:</p>\n\n<pre><code>@postal_codes = {\n  V: \"British Columbia\",\n  # SKIPPED\n  B: \"Nova Scotia\"\n}\n\n\ndef lookup_code(postal_code)\n  territory = @postal_codes.fetch(postal_code[0].upcase.to_sym)\n  puts \"Your address is in #{territory}\"\nend\n</code></pre>\n\n<h3>Solution 3: Use a global variable</h3>\n\n<pre><code>$postal_codes = {\n  V: \"British Columbia\",\n  # SKIPPED\n  B: \"Nova Scotia\"\n}\n\n\ndef lookup_code(postal_code)\n  territory = $postal_codes.fetch(postal_code[0].upcase.to_sym)\n  puts \"Your address is in #{territory}\"\nend\n</code></pre>\n\n<h3>Solution 4: Abuse OOP</h3>\n\n<p>One might (bah!) create a class here and use it\u2019s instance:</p>\n\n<pre><code>class Lookup\n  def postal_codes\n    @postal_codes ||= {\n      V: \"British Columbia\",\n      # SKIPPED\n      B: \"Nova Scotia\"\n    }\n  end\n\n  def lookup_code(postal_code)\n    territory = postal_codes.fetch(postal_code[0].upcase.to_sym)\n    puts \"Your address is in #{territory}\"\n  end\nend\n\nLookup.new.lookup_code(\"01234\")\n</code></pre>\n\n<h3>Solution 5 (credits to @ndn): Inline a hash</h3>\n\n<pre><code>def lookup_code(postal_code)\n  territory = {\n    V: \"British Columbia\",\n    # SKIPPED\n    B: \"Nova Scotia\"\n  }.fetch(postal_code[0].upcase.to_sym)\n  puts \"Your address is in #{territory}\"\nend\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 5204451, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-6nntVEEjeps/AAAAAAAAAAI/AAAAAAAAABA/6xM5I1hbDjM/photo.jpg?sz=128", "display_name": "Mihalis Fthenos", "link": "https://stackoverflow.com/users/5204451/mihalis-fthenos"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 580, "favorite_count": 0, "accepted_answer_id": 41467063, "answer_count": 2, "score": -1, "last_activity_date": 1483796779, "creation_date": 1483542442, "last_edit_date": 1483796779, "question_id": 41467015, "link": "https://stackoverflow.com/questions/41467015/a-ruby-nameerror-undefined-local-variable-was-defined", "title": "A Ruby NameError, undefined local variable, was defined", "body": "<p>I made a simple hash fetching app that retrieves a postal code territory based on the first character of a user's input. But I keep getting this error</p>\n\n<blockquote>\n  <p>postal_code_lookup.rb:27:in <code>lookup_code': undefined local variable or\n  method</code>postal_codes' for main:Object (NameError) Did you mean? \n  postal_code</p>\n</blockquote>\n\n<p>I'm confused because I have declared the variable and it should be available to me in my loop.</p>\n\n<pre><code>postal_codes = {\n  V: \"British Columbia\",\n  Y: \"Yukon Territory\",\n  X: \"Northwest Territory\",\n  T: \"Alberta\",\n  S: \"Saskatechewan\",\n  R: \"Manitoba\",\n  P: \"Northern Ontario\",\n  M: \"Toronto\",\n  L: \"Central Ontario\",\n  K: \"Eastern Ontario\",\n  J: \"Western &amp; Northern Quebec\",\n  N: \"Western Ontario\",\n  G: \"Eastern Quebec\",\n  H: \"Metroplitan Montreal\",\n  A: \"Newfoundland &amp; Labradour\",\n  C: \"Prince Edward Island\",\n  E: \"New Brunswick\",\n  B: \"Nova Scotia\"\n}\n\n\ndef lookup_code(postal_code)\n  territory = postal_codes.fetch(postal_code[0].upcase.to_sym)\n  puts \"Your address is in #{territory}\"\nend\n\nloop do \n  puts \"Do you want to lookup a postal code?(Y/n)\"\n  prompt = gets.chomp.downcase\n  if prompt != \"y\"\n    break\n  end\n\nprint \"Enter your postal code &gt; \"\npostal_code = gets.chomp\n\nlookup_code(postal_code)\n\nend\n</code></pre>\n\n<p>What am I not understanding about the scope here?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4"], "comments": [{"owner": {"reputation": 2612, "user_id": 2273578, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/211dd1a8e9f61b248fba83b9924f4f13?s=128&d=identicon&r=PG", "display_name": "Mario P&#233;rez", "link": "https://stackoverflow.com/users/2273578/mario-p%c3%a9rez"}, "edited": false, "score": 0, "creation_date": 1483542607, "post_id": 41466953, "comment_id": 70139639, "body": "why not having a query string on the url instead for the filtering? (i.e. <code>users?filter=popular</code>)"}, {"owner": {"reputation": 24638, "user_id": 302533, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/6rsH5.jpg?s=128&g=1", "display_name": "Cameron", "link": "https://stackoverflow.com/users/302533/cameron"}, "reply_to_user": {"reputation": 2612, "user_id": 2273578, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/211dd1a8e9f61b248fba83b9924f4f13?s=128&d=identicon&r=PG", "display_name": "Mario P&#233;rez", "link": "https://stackoverflow.com/users/2273578/mario-p%c3%a9rez"}, "edited": false, "score": 0, "creation_date": 1483542774, "post_id": 41466953, "comment_id": 70139747, "body": "@MarioP&#233;rez Short answer is... I don&#39;t want to :)"}, {"owner": {"reputation": 2612, "user_id": 2273578, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/211dd1a8e9f61b248fba83b9924f4f13?s=128&d=identicon&r=PG", "display_name": "Mario P&#233;rez", "link": "https://stackoverflow.com/users/2273578/mario-p%c3%a9rez"}, "edited": false, "score": 0, "creation_date": 1483543261, "post_id": 41466953, "comment_id": 70140052, "body": "Perhaps then using some constraint that checks whether the string is a username or not <a href=\"http://guides.rubyonrails.org/routing.html#advanced-constraints\" rel=\"nofollow noreferrer\">guides.rubyonrails.org/routing.html#advanced-constraints</a> so you could pick the proper route. But querying the database there doesn&#39;t seems right for the performance. If it&#39;s your only option &#175;\\_(\u30c4)_/&#175;"}, {"owner": {"reputation": 24638, "user_id": 302533, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/6rsH5.jpg?s=128&g=1", "display_name": "Cameron", "link": "https://stackoverflow.com/users/302533/cameron"}, "reply_to_user": {"reputation": 2612, "user_id": 2273578, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/211dd1a8e9f61b248fba83b9924f4f13?s=128&d=identicon&r=PG", "display_name": "Mario P&#233;rez", "link": "https://stackoverflow.com/users/2273578/mario-p%c3%a9rez"}, "edited": false, "score": 0, "creation_date": 1483545827, "post_id": 41466953, "comment_id": 70141848, "body": "@MarioP&#233;rez See my updated post for what I have tried. Thanks."}, {"owner": {"reputation": 2612, "user_id": 2273578, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/211dd1a8e9f61b248fba83b9924f4f13?s=128&d=identicon&r=PG", "display_name": "Mario P&#233;rez", "link": "https://stackoverflow.com/users/2273578/mario-p%c3%a9rez"}, "edited": false, "score": 0, "creation_date": 1483555064, "post_id": 41466953, "comment_id": 70147655, "body": "did it work? Also <code>lambda { |request| User.exists?(username: request.params[:username]) }</code> may be faster"}, {"owner": {"reputation": 24638, "user_id": 302533, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/6rsH5.jpg?s=128&g=1", "display_name": "Cameron", "link": "https://stackoverflow.com/users/302533/cameron"}, "reply_to_user": {"reputation": 2612, "user_id": 2273578, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/211dd1a8e9f61b248fba83b9924f4f13?s=128&d=identicon&r=PG", "display_name": "Mario P&#233;rez", "link": "https://stackoverflow.com/users/2273578/mario-p%c3%a9rez"}, "edited": false, "score": 0, "creation_date": 1483610401, "post_id": 41466953, "comment_id": 70169026, "body": "@MarioP&#233;rez Yes it works. Why would your version be faster? (I&#39;m new to Ruby and Rails)."}, {"owner": {"reputation": 2612, "user_id": 2273578, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/211dd1a8e9f61b248fba83b9924f4f13?s=128&d=identicon&r=PG", "display_name": "Mario P&#233;rez", "link": "https://stackoverflow.com/users/2273578/mario-p%c3%a9rez"}, "edited": false, "score": 0, "creation_date": 1483623300, "post_id": 41466953, "comment_id": 70177892, "body": "I think using your version is loading all the records into memory and using a method from the Array class. With my version I&#39;m just querying the database for the thing I need which I believe will be much faster. You could find some info in this article: <a href=\"http://www.webascender.com/Blog/ID/553/Rails-Tips-for-Speeding-up-ActiveRecord-Queries\" rel=\"nofollow noreferrer\">webascender.com/Blog/ID/553/&hellip;</a>  And again I would encourage to go the way I talked about it before. It will follow REST and much less complicated code :)"}], "answers": [{"tags": [], "owner": {"reputation": 24638, "user_id": 302533, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/6rsH5.jpg?s=128&g=1", "display_name": "Cameron", "link": "https://stackoverflow.com/users/302533/cameron"}, "is_accepted": false, "score": 0, "last_activity_date": 1483546487, "creation_date": 1483546487, "answer_id": 41468448, "question_id": 41466953, "link": "https://stackoverflow.com/questions/41466953/rails-constraint-on-route-that-contains-dynamic-segment/41468448#41468448", "title": "Rails constraint on route that contains dynamic segment", "body": "<p>I've tried this approach (based on the link provided by @Mario</p>\n\n<p><code>match '/users/:username' =&gt; 'users#show', :via =&gt; :get, :as =&gt; :user, :constraints =&gt; lambda { |request| User.usernames.include?(request.params[:username]) }</code></p>\n\n<p>and in my User model:</p>\n\n<pre><code>def self.usernames\n  User.pluck(:username)\nend\n</code></pre>\n"}], "owner": {"reputation": 24638, "user_id": 302533, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/6rsH5.jpg?s=128&g=1", "display_name": "Cameron", "link": "https://stackoverflow.com/users/302533/cameron"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 423, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1483612198, "creation_date": 1483542240, "last_edit_date": 1483612198, "question_id": 41466953, "link": "https://stackoverflow.com/questions/41466953/rails-constraint-on-route-that-contains-dynamic-segment", "title": "Rails constraint on route that contains dynamic segment", "body": "<p>I have the following two routes in my Rails app:</p>\n\n<pre><code>match '/users/:username' =&gt; 'users#show', :via =&gt; :get, :as =&gt; :user\nmatch '/users(/:filter)' =&gt; 'users#index', :via =&gt; :get, :as =&gt; :users\n</code></pre>\n\n<p>This is so that I can have routes like:</p>\n\n<p><code>/users/cameron</code>\n<code>/users/popular</code></p>\n\n<p>Where the first is a user, and the second is a filter.</p>\n\n<p>However the routing in Rails will always hit the first route, because it doesn't know the difference between <code>:username</code> and <code>:filter</code>.</p>\n\n<p>For posts I avoid this problem by doing:</p>\n\n<pre><code>match '/posts/:id' =&gt; 'posts#show', :via =&gt; :get, :as =&gt; :post, :id =&gt; /[0-9]/\n</code></pre>\n\n<p>But this only works because posts are always integers. For example: <code>/posts/21</code></p>\n\n<p>How can I apply a constraint to my user routes so that they don't trip over each other and without having to add a prefix to either of them.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4", "rubygems", "bundler"], "comments": [{"owner": {"reputation": 152277, "user_id": 438992, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/QouOz.jpg?s=128&g=1", "display_name": "Dave Newton", "link": "https://stackoverflow.com/users/438992/dave-newton"}, "edited": false, "score": 0, "creation_date": 1483635892, "post_id": 41466837, "comment_id": 70186967, "body": "Did you actually clean and install your current dependencies? If you haven&#39;t, it&#39;ll still just show you what&#39;s actually installed (e.g., the Gemfile.lock stuff)."}, {"owner": {"reputation": 16407, "user_id": 157752, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Qgx5T.jpg?s=128&g=1", "display_name": "Thilo", "link": "https://stackoverflow.com/users/157752/thilo"}, "edited": false, "score": 0, "creation_date": 1500558106, "post_id": 41466837, "comment_id": 77399171, "body": "A bit late, but <code>gem dependency</code> has nothing directly to do with your Gemfile and bundler. Without arguments, it shows the dependencies of <i>all installed gems</i>. Try <code>bundle show</code> to see the exact gems that are part of your bundle, directly or indirectly via dependencies."}], "answers": [{"comments": [{"owner": {"reputation": 16802, "user_id": 1235929, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/9f460ae7deb6fa19034c810a53b9fbac?s=128&d=identicon&r=PG", "display_name": "Dave", "link": "https://stackoverflow.com/users/1235929/dave"}, "edited": false, "score": 0, "creation_date": 1483552045, "post_id": 41467736, "comment_id": 70146062, "body": "My queiston is why is &quot;gem dependency&quot; still showing the bootstrap gem despite the fact I commented it out?  If another gem was using bootstrap, wouldn&#39;t that be listed in one of teh dependencies?"}, {"owner": {"reputation": 1049, "user_id": 5353193, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/b427991caffbc88cf5dccfb942f061a2?s=128&d=identicon&r=PG", "display_name": "Francois", "link": "https://stackoverflow.com/users/5353193/francois"}, "reply_to_user": {"reputation": 16802, "user_id": 1235929, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/9f460ae7deb6fa19034c810a53b9fbac?s=128&d=identicon&r=PG", "display_name": "Dave", "link": "https://stackoverflow.com/users/1235929/dave"}, "edited": false, "score": 0, "creation_date": 1483628085, "post_id": 41467736, "comment_id": 70181366, "body": "Ah ok, I misunderstood!     Have you tried to run <code>bundle clean</code>?"}], "tags": [], "owner": {"reputation": 1049, "user_id": 5353193, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/b427991caffbc88cf5dccfb942f061a2?s=128&d=identicon&r=PG", "display_name": "Francois", "link": "https://stackoverflow.com/users/5353193/francois"}, "is_accepted": false, "score": 0, "last_activity_date": 1483544501, "creation_date": 1483544501, "answer_id": 41467736, "question_id": 41466837, "link": "https://stackoverflow.com/questions/41466837/why-does-gem-dependency-list-a-gem-i-have-commented-out-in-my-gemfile/41467736#41467736", "title": "Why does gem dependency list a gem I have commented out in my Gemfile?", "body": "<p>Maybe one of your gems needs <code>JSON-1.8.3</code> and has it as a dependency for itself.<br>\nHave you tried to comment half of your gems, then run bundle again, and so on until you don't find it in your dependencies anymore? (dichotomy)</p>\n"}], "owner": {"reputation": 16802, "user_id": 1235929, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/9f460ae7deb6fa19034c810a53b9fbac?s=128&d=identicon&r=PG", "display_name": "Dave", "link": "https://stackoverflow.com/users/1235929/dave"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 233, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1500558154, "creation_date": 1483541878, "last_edit_date": 1500558154, "question_id": 41466837, "link": "https://stackoverflow.com/questions/41466837/why-does-gem-dependency-list-a-gem-i-have-commented-out-in-my-gemfile", "title": "Why does gem dependency list a gem I have commented out in my Gemfile?", "body": "<p>I'm trying to eliminate a dependency on JSON-1.8.3 that is wreaking havoc with my build.  I deleted my Gemfile.lock and then commented out the only item (bootstrap-sass) in my Gemfile that had that dependency ...</p>\n\n<pre><code># Bundle edge Rails instead: gem 'rails', github: 'rails/rails'\ngem 'rails'  #, '~&gt; 4.2.7.1'\n# Use SCSS for stylesheets\ngem 'sass-rails', '~&gt; 5.0'\n# Use Uglifier as compressor for JavaScript assets\ngem 'uglifier', '&gt;= 1.3.0'\n# Use CoffeeScript for .coffee assets and views\ngem 'coffee-rails', '~&gt; 4.2'\n# See https://github.com/rails/execjs#readme for more supported runtimes\n# gem 'therubyracer', platforms: :ruby\n\n# Use jquery as the JavaScript library\ngem 'jquery-rails'\n# Turbolinks makes navigating your web application faster. Read more: https://github.com/turbolinks/turbolinks\ngem 'turbolinks', '~&gt; 5'\n# Build JSON APIs with ease. Read more: https://github.com/rails/jbuilder\ngem 'jbuilder', '~&gt; 2.5'\n# Use Redis adapter to run Action Cable in production\n# gem 'redis', '~&gt; 3.0'\n\ngem 'uuids' \ngem 'addressable'\ngem 'pg'\ngem 'pundit'\ngem 'omniauth-oauth2', '~&gt; 1.3.1'\ngem 'omniauth-google-oauth2'\ngem 'omniauth-facebook'\ngem 'omniauth-twitter'\ngem 'omniauth-linkedin-oauth2'\ngem 'jquery-ui-rails'\ngem 'jquery-cookie-rails'  \ngem 'will_paginate'\n#gem 'bootstrap-sass'\ngem 'autoprefixer-rails'\ngem 'compass-rails'\ngem 'pdf-reader' \ngem 'jquery-turbolinks'\ngem 'activerecord-import' \ngem 'w3c_validators'\ngem 'whenever', :require =&gt; false\ngem 'roo-xls'\ngem 'socksify'\n</code></pre>\n\n<p>But when I run gem dependency, <strong>it still lists bootstrap-sass-3.3.7</strong>...</p>\n\n<pre><code>localhost:myproject davea$ gem dependency\nGem Ascii85-1.0.2\n  bundler (&gt;= 1.0.0, development)\n  minitest (&gt;= 2.6.0, development)\n  rake (&gt;= 0.9.2, development)\n\nGem actioncable-5.0.0.1\n  actionpack (= 5.0.0.1)\n  blade (~&gt; 0.5.1, development)\n  nio4r (~&gt; 1.2)\n  websocket-driver (~&gt; 0.6.1)\n\nGem actioncable-5.0.1\n  actionpack (= 5.0.1)\n  blade (~&gt; 0.5.1, development)\n  nio4r (~&gt; 1.2)\n  websocket-driver (~&gt; 0.6.1)\n\nGem actionmailer-5.0.0.1\n  actionpack (= 5.0.0.1)\n  actionview (= 5.0.0.1)\n  activejob (= 5.0.0.1)\n  mail (&gt;= 2.5.4, ~&gt; 2.5)\n  rails-dom-testing (~&gt; 2.0)\n\nGem actionmailer-5.0.1\n  actionpack (= 5.0.1)\n  actionview (= 5.0.1)\n  activejob (= 5.0.1)\n  mail (&gt;= 2.5.4, ~&gt; 2.5)\n  rails-dom-testing (~&gt; 2.0)\n\nGem actionpack-5.0.0.1\n  actionview (= 5.0.0.1)\n  activemodel (= 5.0.0.1, development)\n  activesupport (= 5.0.0.1)\n  rack (~&gt; 2.0)\n  rack-test (~&gt; 0.6.3)\n  rails-dom-testing (~&gt; 2.0)\n  rails-html-sanitizer (&gt;= 1.0.2, ~&gt; 1.0)\n\nGem actionpack-5.0.1\n  actionview (= 5.0.1)\n  activemodel (= 5.0.1, development)\n  activesupport (= 5.0.1)\n  rack (~&gt; 2.0)\n  rack-test (~&gt; 0.6.3)\n  rails-dom-testing (~&gt; 2.0)\n  rails-html-sanitizer (&gt;= 1.0.2, ~&gt; 1.0)\n\nGem actionview-5.0.0.1\n  actionpack (= 5.0.0.1, development)\n  activemodel (= 5.0.0.1, development)\n  activesupport (= 5.0.0.1)\n  builder (~&gt; 3.1)\n  erubis (~&gt; 2.7.0)\n  rails-dom-testing (~&gt; 2.0)\n  rails-html-sanitizer (&gt;= 1.0.2, ~&gt; 1.0)\n\nGem actionview-5.0.1\n  actionpack (= 5.0.1, development)\n  activemodel (= 5.0.1, development)\n  activesupport (= 5.0.1)\n  builder (~&gt; 3.1)\n  erubis (~&gt; 2.7.0)\n  rails-dom-testing (~&gt; 2.0)\n  rails-html-sanitizer (&gt;= 1.0.2, ~&gt; 1.0)\n\nGem activejob-5.0.0.1\n  activesupport (= 5.0.0.1)\n  globalid (&gt;= 0.3.6)\n\nGem activejob-5.0.1\n  activesupport (= 5.0.1)\n  globalid (&gt;= 0.3.6)\n\nGem activemodel-5.0.0.1\n  activesupport (= 5.0.0.1)\n\nGem activemodel-5.0.1\n  activesupport (= 5.0.1)\n\nGem activerecord-5.0.0.1\n  activemodel (= 5.0.0.1)\n  activesupport (= 5.0.0.1)\n  arel (~&gt; 7.0)\n\nGem activerecord-5.0.1\n  activemodel (= 5.0.1)\n  activesupport (= 5.0.1)\n  arel (~&gt; 7.0)\n\nGem activesupport-5.0.0.1\n  concurrent-ruby (&gt;= 1.0.2, ~&gt; 1.0)\n  i18n (~&gt; 0.7)\n  minitest (~&gt; 5.1)\n  tzinfo (~&gt; 1.1)\n\nGem activesupport-5.0.1\n  concurrent-ruby (&gt;= 1.0.2, ~&gt; 1.0)\n  i18n (~&gt; 0.7)\n  minitest (~&gt; 5.1)\n  tzinfo (~&gt; 1.1)\n\nGem afm-0.2.2\n  minitest (~&gt; 5.3, development)\n  rake (~&gt; 10.3, development)\n  rdoc (~&gt; 4.1, development)\n\nGem arel-6.0.4\n  minitest (~&gt; 5.4, development)\n  rake (&gt;= 0, development)\n  rdoc (~&gt; 4.0, development)\n\nGem arel-7.1.4\n  minitest (~&gt; 5.4, development)\n  rake (&gt;= 0, development)\n  rdoc (~&gt; 4.0, development)\n\nGem autoprefixer-rails-6.5.1\n  compass (&gt;= 0, development)\n  execjs (&gt;= 0)\n  rails (&gt;= 0, development)\n  rake (&gt;= 0, development)\n  rspec-rails (&gt;= 0, development)\n\nGem bcrypt-3.1.11\n  rake-compiler (~&gt; 0.9.2, development)\n  rdoc (~&gt; 3.12, development)\n  rspec (&gt;= 3, development)\n\nGem bcrypt-ruby-3.1.5\n  bcrypt (&gt;= 3.1.3)\n  rake-compiler (~&gt; 0.9.2, development)\n  rdoc (~&gt; 3.12, development)\n  rspec (&gt;= 0, development)\n\nGem bigdecimal-1.3.0\n  minitest (~&gt; 4.7.5, development)\n  rake (~&gt; 10.0, development)\n  rake-compiler (~&gt; 0.9, development)\n\nGem bootstrap-sass-3.3.7\n  actionpack (&gt;= 4.1.5, development)\n  activesupport (&gt;= 4.1.5, development)\n  autoprefixer-rails (&gt;= 5.2.1)\n  capybara (&gt;= 2.5.0, development)\n  jquery-rails (&gt;= 3.1.0, development)\n  json (&gt;= 1.8.1, development)\n  minitest (~&gt; 5.8, development)\n  minitest-reporters (~&gt; 1.1, development)\n  poltergeist (&gt;= 0, development)\n  sass (&gt;= 3.3.4)\n  slim-rails (&gt;= 0, development)\n  sprockets-rails (&gt;= 2.1.3, development)\n  term-ansicolor (&gt;= 0, development)\n  uglifier (&gt;= 0, development)\n\nGem builder-3.2.2\n\nGem bundler-1.13.7\n  automatiek (~&gt; 0.1.0, development)\n  mustache (= 0.99.6, development)\n  rake (~&gt; 10.0, development)\n  rdiscount (~&gt; 2.2, development)\n  ronn (~&gt; 0.7.3, development)\n  rspec (~&gt; 3.5, development)\n\nGem bundler-unload-1.0.2\n  bundler (&gt;= 0, development)\n\nGem byebug-9.0.6\n  bundler (~&gt; 1.7, development)\n\nGem chronic-0.10.2\n  activesupport (&gt;= 0, development)\n  minitest (~&gt; 5.0, development)\n  rake (&gt;= 0, development)\n  simplecov (&gt;= 0, development)\n\nGem chunky_png-1.3.8\n  rake (&gt;= 0, development)\n  rspec (~&gt; 3, development)\n\nGem coffee-rails-4.2.1\n  coffee-script (&gt;= 2.2.0)\n  railties (&lt; 5.2.x, &gt;= 4.0.0)\n\nGem coffee-script-2.4.1\n  coffee-script-source (&gt;= 0)\n  execjs (&gt;= 0)\n  json (&gt;= 0, development)\n  rake (&gt;= 0, development)\n\nGem coffee-script-source-1.10.0\n\nGem coffee-script-source-1.12.2\n\nGem colorize-0.8.1\n  codeclimate-test-reporter (~&gt; 0.4, development)\n  minitest (~&gt; 5.0, development)\n  rake (~&gt; 10.0, development)\n\nGem concurrent-ruby-1.0.2\n\nGem concurrent-ruby-1.0.4\n\nGem daemons-1.2.4\n  pry-byebug (~&gt; 0, development)\n  rake (~&gt; 0, development)\n  rspec (~&gt; 3.1, development)\n  simplecov (~&gt; 0, development)\n\nGem debug_inspector-0.0.2\n\nGem did_you_mean-1.1.0\n  bundler (&gt;= 0, development)\n  minitest (&gt;= 0, development)\n  rake (&gt;= 0, development)\n\nGem erubis-2.7.0\n\nGem eventmachine-1.2.1\n  rake-compiler (~&gt; 0.9.5, development)\n  rake-compiler-dock (~&gt; 0.5.1, development)\n  test-unit (~&gt; 2.0, development)\n\nGem execjs-2.7.0\n  rake (&gt;= 0, development)\n\nGem executable-hooks-1.3.2\n  tf (&gt;= 0, development)\n\nGem ffi-1.9.14\n  rake (~&gt; 10.1, development)\n  rake-compiler (~&gt; 0.9, development)\n  rake-compiler-dock (~&gt; 0.5.2, development)\n  rspec (~&gt; 2.14.1, development)\n  rubygems-tasks (~&gt; 0.2.4, development)\n\nGem gem-wrappers-1.2.7\n  minitest (&gt;= 0, development)\n  rake (&gt;= 0, development)\n\nGem globalid-0.3.7\n  activesupport (&gt;= 4.1.0)\n  rake (&gt;= 0, development)\n\nGem hashery-2.1.2\n  lemon (&gt;= 0, development)\n  qed (&gt;= 0, development)\n  rubytest-cli (&gt;= 0, development)\n\nGem hashie-3.4.6\n  rake (&gt;= 0, development)\n  rspec (~&gt; 3.0, development)\n  rspec-pending_for (~&gt; 0.1, development)\n\nGem httplog-0.3.3\n  colorize (&gt;= 0)\n  ethon (&gt;= 0, development)\n  excon (&gt;= 0.18.0, development)\n  faraday (&gt;= 0, development)\n  guard-rspec (&gt;= 0, development)\n  http (= 1.0.4, development)\n  httparty (&gt;= 0, development)\n  httpclient (&gt;= 0, development)\n  log4r (&gt;= 0, development)\n  patron (&gt;= 0, development)\n  rack (&gt;= 0, development)\n  rake (&gt;= 0, development)\n  rspec (&gt;= 0, development)\n  simplecov (&gt;= 0, development)\n  thin (&gt;= 0, development)\n  typhoeus (&gt;= 0, development)\n\nGem i18n-0.7.0\n\nGem ims-lti-1.1.13\n  builder (&gt;= 0)\n  oauth (&lt; 0.6, &gt;= 0.4.5)\n  rspec (&gt;= 0, development)\n\nGem io-console-0.4.6\n\nGem jbuilder-2.6.0\n  activesupport (&lt; 5.1, &gt;= 3.0.0)\n  multi_json (~&gt; 1.2)\n\nGem jquery-rails-4.2.1\n  rails-dom-testing (&lt; 3, &gt;= 1)\n  railties (&gt;= 4.2.0)\n  thor (&lt; 2.0, &gt;= 0.14)\n\nGem jquery-ui-rails-5.0.5\n  json (~&gt; 1.7, development)\n  railties (&gt;= 3.2.16)\n\nGem json-2.0.2\n  rake (&gt;= 0, development)\n  test-unit (~&gt; 2.0, development)\n\nGem jwt-1.5.6\n  bundler (&gt;= 0, development)\n  codeclimate-test-reporter (&gt;= 0, development)\n  json (&lt; 2.0, development)\n  rake (&gt;= 0, development)\n  rspec (&gt;= 0, development)\n  simplecov (&gt;= 0, development)\n  simplecov-json (&gt;= 0, development)\n\nGem listen-3.0.8\n  bundler (&gt;= 1.3.5, development)\n  rb-fsevent (&gt;= 0.9.4, ~&gt; 0.9)\n  rb-inotify (&gt;= 0.9.7, ~&gt; 0.9)\n\nGem loofah-2.0.3\n  hoe (~&gt; 3.13, development)\n  hoe-bundler (&gt;= 0, development)\n  hoe-debugging (&gt;= 0, development)\n  hoe-gemspec (&gt;= 0, development)\n  hoe-git (&gt;= 0, development)\n  json (&gt;= 0, development)\n  minitest (~&gt; 2.2, development)\n  nokogiri (&gt;= 1.5.9)\n  rake (&gt;= 0.8, development)\n  rdoc (~&gt; 4.0, development)\n  rr (~&gt; 1.1.0, development)\n\nGem mail-2.6.4\n  bundler (&gt;= 1.0.3, development)\n  mime-types (&lt; 4, &gt;= 1.16)\n  rake (&gt; 0.8.7, development)\n  rdoc (&gt;= 0, development)\n  rspec (~&gt; 3.0, development)\n\nGem method_source-0.8.2\n  bacon (~&gt; 1.1.0, development)\n  rake (~&gt; 0.9, development)\n\nGem mime-types-3.1\n  fivemat (~&gt; 1.3, development)\n  hoe (~&gt; 3.15, development)\n  hoe-doofus (~&gt; 1.0, development)\n  hoe-gemspec2 (~&gt; 1.1, development)\n  hoe-git (~&gt; 1.6, development)\n  hoe-rubygems (~&gt; 1.0, development)\n  hoe-travis (~&gt; 1.2, development)\n  mime-types-data (~&gt; 3.2015)\n  minitest (~&gt; 5.9, development)\n  minitest-autotest (~&gt; 1.0, development)\n  minitest-bonus-assertions (~&gt; 2.0, development)\n  minitest-focus (~&gt; 1.0, development)\n  minitest-hooks (~&gt; 1.4, development)\n  minitest-rg (~&gt; 5.2, development)\n  rake (~&gt; 10.0, development)\n  rdoc (~&gt; 4.0, development)\n  simplecov (~&gt; 0.7, development)\n\nGem mime-types-data-3.2016.0521\n  hoe (~&gt; 3.15, development)\n  hoe-doofus (~&gt; 1.0, development)\n  hoe-gemspec2 (~&gt; 1.1, development)\n  hoe-git (~&gt; 1.6, development)\n  hoe-rubygems (~&gt; 1.0, development)\n  mime-types (~&gt; 3.0, development)\n  nokogiri (~&gt; 1.6, development)\n  rake (~&gt; 10.0, development)\n  rdoc (~&gt; 4.0, development)\n\nGem mini_portile2-2.1.0\n  bundler (~&gt; 1.7, development)\n  minitar (~&gt; 0.5.4, development)\n  minitest (~&gt; 5.8.0, development)\n  minitest-hooks (~&gt; 1.4.0, development)\n  rake (~&gt; 10.0, development)\n\nGem minitest-5.9.1\n  hoe (~&gt; 3.15, development)\n  rdoc (~&gt; 4.0, development)\n\nGem minitest-5.10.1\n  hoe (~&gt; 3.15, development)\n  rdoc (~&gt; 4.0, development)\n\nGem multi_json-1.12.1\n  bundler (~&gt; 1.0, development)\n\nGem multi_xml-0.6.0\n  bundler (~&gt; 1.0, development)\n\nGem multipart-post-2.0.0\n\nGem net-telnet-0.1.1\n  bundler (~&gt; 1.9, development)\n  rake (~&gt; 10.0, development)\n\nGem nio4r-1.2.1\n  bundler (&gt;= 0, development)\n  rake (&gt;= 0, development)\n\nGem nio4r-2.0.0\n  bundler (&gt;= 0, development)\n  rake (&gt;= 0, development)\n\nGem nokogiri-1.6.8.1\n  hoe (~&gt; 3.15, development)\n  hoe-bundler (~&gt; 1.2.0, development)\n  hoe-debugging (~&gt; 1.2.1, development)\n  hoe-gemspec (~&gt; 1.0.0, development)\n  hoe-git (~&gt; 1.6.0, development)\n  mini_portile2 (~&gt; 2.1.0)\n  minitest (~&gt; 5.8.4, development)\n  racc (~&gt; 1.4.14, development)\n  rake (~&gt; 10.5.0, development)\n  rake-compiler (~&gt; 0.9.2, development)\n  rake-compiler-dock (~&gt; 0.5.1, development)\n  rdoc (~&gt; 4.0, development)\n  rexical (~&gt; 1.0.5, development)\n\nGem nokogiri-1.7.0\n  hoe (~&gt; 3.15, development)\n  hoe-bundler (~&gt; 1.2.0, development)\n  hoe-debugging (~&gt; 1.2.1, development)\n  hoe-gemspec (~&gt; 1.0.0, development)\n  hoe-git (~&gt; 1.6.0, development)\n  mini_portile2 (~&gt; 2.1.0)\n  minitest (~&gt; 5.8.4, development)\n  racc (~&gt; 1.4.14, development)\n  rake (~&gt; 10.5.0, development)\n  rake-compiler (~&gt; 0.9.2, development)\n  rake-compiler-dock (~&gt; 0.5.1, development)\n  rdoc (~&gt; 4.0, development)\n  rexical (~&gt; 1.0.5, development)\n\nGem oauth-0.5.1\n  actionpack (&gt;= 4.0.2, development)\n  byebug (&gt;= 0, development)\n  curb (&gt;= 0, development)\n  em-http-request (= 0.2.11, development)\n  iconv (&gt;= 0, development)\n  minitest (&gt;= 0, development)\n  mocha (&gt;= 0.9.12, development)\n  rack (&gt;= 0, development)\n  rack-test (&gt;= 0, development)\n  rake (&gt;= 0, development)\n  typhoeus (&gt;= 0.1.13, development)\n\nGem openssl-2.0.2\n  rake (&gt;= 0, development)\n  rake-compiler (&gt;= 0, development)\n  rdoc (&gt;= 0, development)\n  test-unit (~&gt; 3.0, development)\n\nGem pg-0.19.0\n  hoe (~&gt; 3.12, development)\n  hoe-bundler (~&gt; 1.0, development)\n  hoe-deveiate (~&gt; 0.7, development)\n  hoe-highline (~&gt; 0.2, development)\n  hoe-mercurial (~&gt; 1.4, development)\n  rake-compiler (~&gt; 0.9, development)\n  rake-compiler-dock (~&gt; 0.5, development)\n  rdoc (~&gt; 4.0, development)\n  rspec (~&gt; 3.0, development)\n\nGem power_assert-0.4.1\n  rake (&gt;= 0, development)\n  simplecov (&gt;= 0, development)\n  test-unit (&gt;= 0, development)\n\nGem psych-2.2.2\n  minitest (~&gt; 5.0, development)\n  rake-compiler (&gt;= 0.4.1, development)\n\nGem public_suffix-2.0.5\n  mocha (&gt;= 0, development)\n  rake (&gt;= 0, development)\n  yard (&gt;= 0, development)\n\nGem puma-3.6.0\n  hoe (~&gt; 3.15, development)\n  rack (&lt; 2.0, &gt;= 1.1, development)\n  rake-compiler (~&gt; 0.8, development)\n  rdoc (~&gt; 4.0, development)\n\nGem rack-1.6.5\n  bacon (&gt;= 0, development)\n  rake (&gt;= 0, development)\n\nGem rack-2.0.1\n  concurrent-ruby (&gt;= 0, development)\n  minitest (~&gt; 5.0, development)\n  minitest-sprint (&gt;= 0, development)\n  rake (&gt;= 0, development)\n\nGem rack-test-0.6.3\n  rack (&gt;= 1.0)\n\nGem rails-5.0.0.1\n  actioncable (= 5.0.0.1)\n  actionmailer (= 5.0.0.1)\n  actionpack (= 5.0.0.1)\n  actionview (= 5.0.0.1)\n  activejob (= 5.0.0.1)\n  activemodel (= 5.0.0.1)\n  activerecord (= 5.0.0.1)\n  activesupport (= 5.0.0.1)\n  bundler (&lt; 2.0, &gt;= 1.3.0)\n  railties (= 5.0.0.1)\n  sprockets-rails (&gt;= 2.0.0)\n\nGem rails-5.0.1\n  actioncable (= 5.0.1)\n  actionmailer (= 5.0.1)\n  actionpack (= 5.0.1)\n  actionview (= 5.0.1)\n  activejob (= 5.0.1)\n  activemodel (= 5.0.1)\n  activerecord (= 5.0.1)\n  activesupport (= 5.0.1)\n  bundler (&lt; 2.0, &gt;= 1.3.0)\n  railties (= 5.0.1)\n  sprockets-rails (&gt;= 2.0.0)\n\nGem rails-dom-testing-2.0.1\n  activesupport (&lt; 6.0, &gt;= 4.2.0)\n  bundler (~&gt; 1.3, development)\n  minitest (&gt;= 0, development)\n  nokogiri (~&gt; 1.6.0)\n  rake (&gt;= 0, development)\n\nGem rails-dom-testing-2.0.2\n  activesupport (&lt; 6.0, &gt;= 4.2.0)\n  bundler (~&gt; 1.3, development)\n  minitest (&gt;= 0, development)\n  nokogiri (~&gt; 1.6)\n  rake (&gt;= 0, development)\n\nGem rails-html-sanitizer-1.0.3\n  bundler (~&gt; 1.3, development)\n  loofah (~&gt; 2.0)\n  minitest (&gt;= 0, development)\n  rails-dom-testing (&gt;= 0, development)\n  rake (&gt;= 0, development)\n\nGem railties-5.0.0.1\n  actionpack (= 5.0.0.1)\n  actionview (= 5.0.0.1, development)\n  activesupport (= 5.0.0.1)\n  method_source (&gt;= 0)\n  rake (&gt;= 0.8.7)\n  thor (&lt; 2.0, &gt;= 0.18.1)\n\nGem railties-5.0.1\n  actionpack (= 5.0.1)\n  actionview (= 5.0.1, development)\n  activesupport (= 5.0.1)\n  method_source (&gt;= 0)\n  rake (&gt;= 0.8.7)\n  thor (&lt; 2.0, &gt;= 0.18.1)\n\nGem rake-11.3.0\n  bundler (~&gt; 1.11, development)\n  minitest (~&gt; 5.8, development)\n  rdoc (~&gt; 4.0, development)\n\nGem rake-12.0.0\n  bundler (&gt;= 0, development)\n  minitest (&gt;= 0, development)\n  rdoc (&gt;= 0, development)\n\nGem rb-fsevent-0.9.8\n  bundler (~&gt; 1.0, development)\n  guard-rspec (~&gt; 4.2, development)\n  rspec (~&gt; 2.11, development)\n\nGem rb-inotify-0.9.7\n  ffi (&gt;= 0.5.0)\n  yard (&gt;= 0.4.0, development)\n\nGem rdoc-5.0.0\n  kpeg (&gt;= 0, development)\n  minitest (~&gt; 4, development)\n  racc (&gt; 1.4.10, development)\n  rake (&gt;= 0, development)\n\nGem ruby-ole-1.2.12\n\nGem ruby-rc4-0.1.5\n  rspec (&gt;= 0, development)\n\nGem rubygems-bundler-1.4.4\n  bundler-unload (&gt;= 1.0.2)\n  executable-hooks (&gt;= 1.3.2)\n  tf (&gt;= 0, development)\n\nGem rubyzip-1.2.0\n  coveralls (~&gt; 0.7, development)\n  minitest (~&gt; 5.4, development)\n  pry (~&gt; 0.10, development)\n  rake (~&gt; 10.3, development)\n\nGem rvm-1.11.3.9\n\nGem sass-3.4.22\n  maruku (&gt;= 0.5.9, development)\n  minitest (&gt;= 5, development)\n  yard (&gt;= 0.5.3, development)\n\nGem sass-3.4.23\n  maruku (&gt;= 0.5.9, development)\n  minitest (&gt;= 5, development)\n  yard (&gt;= 0.5.3, development)\n\nGem sass-rails-5.0.6\n  railties (&lt; 6, &gt;= 4.0.0)\n  sass (~&gt; 3.1)\n  sprockets (&lt; 4.0, &gt;= 2.8)\n  sprockets-rails (&lt; 4.0, &gt;= 2.0)\n  sqlite3 (&gt;= 0, development)\n  tilt (&lt; 3, &gt;= 1.1)\n\nGem socksify-1.7.0\n\nGem spring-2.0.0\n  activesupport (&gt;= 4.2)\n  bump (&gt;= 0, development)\n  rake (&gt;= 0, development)\n\nGem spring-watcher-listen-2.0.1\n  activesupport (&gt;= 0, development)\n  bundler (~&gt; 1.6, development)\n  listen (&lt; 4.0, &gt;= 2.7)\n  rake (&gt;= 0, development)\n  spring (&lt; 3.0, &gt;= 1.2)\n\nGem sprockets-3.7.0\n  closure-compiler (~&gt; 1.1, development)\n  coffee-script (~&gt; 2.2, development)\n  coffee-script-source (~&gt; 1.6, development)\n  concurrent-ruby (~&gt; 1.0)\n  eco (~&gt; 1.0, development)\n  ejs (~&gt; 1.0, development)\n  execjs (~&gt; 2.0, development)\n  minitest (~&gt; 5.0, development)\n  nokogiri (~&gt; 1.3, development)\n  rack (&lt; 3, &gt; 1)\n  rack-test (~&gt; 0.6, development)\n  rake (~&gt; 10.0, development)\n  sass (~&gt; 3.1, development)\n  uglifier (~&gt; 2.3, development)\n  yui-compressor (~&gt; 0.12, development)\n\nGem sprockets-3.7.1\n  closure-compiler (~&gt; 1.1, development)\n  coffee-script (~&gt; 2.2, development)\n  coffee-script-source (~&gt; 1.6, development)\n  concurrent-ruby (~&gt; 1.0)\n  eco (~&gt; 1.0, development)\n  ejs (~&gt; 1.0, development)\n  execjs (~&gt; 2.0, development)\n  minitest (~&gt; 5.0, development)\n  nokogiri (~&gt; 1.3, development)\n  rack (&lt; 3, &gt; 1)\n  rack-test (~&gt; 0.6, development)\n  rake (~&gt; 10.0, development)\n  sass (~&gt; 3.1, development)\n  uglifier (~&gt; 2.3, development)\n  yui-compressor (~&gt; 0.12, development)\n\nGem sprockets-rails-3.2.0\n  actionpack (&gt;= 4.0)\n  activesupport (&gt;= 4.0)\n  railties (&gt;= 4.0, development)\n  rake (&gt;= 0, development)\n  sass (&gt;= 0, development)\n  sprockets (&gt;= 3.0.0)\n  uglifier (&gt;= 0, development)\n\nGem test-unit-3.2.3\n  bundler (&gt;= 0, development)\n  kramdown (&gt;= 0, development)\n  packnga (&gt;= 0, development)\n  power_assert (&gt;= 0)\n  rake (&gt;= 0, development)\n  yard (&gt;= 0, development)\n\nGem thin-1.7.0\n  daemons (&gt;= 1.0.9, ~&gt; 1.0)\n  eventmachine (&gt;= 1.0.4, ~&gt; 1.0)\n  rack (&lt; 3, &gt;= 1)\n\nGem thor-0.19.1\n  bundler (~&gt; 1.0, development)\n\nGem thor-0.19.4\n  bundler (~&gt; 1.0, development)\n\nGem thread_safe-0.3.5\n  atomic (= 1.1.16, development)\n  minitest (&gt;= 4, development)\n  rake (&gt;= 0, development)\n\nGem tilt-2.0.5\n\nGem ttfunk-1.4.0\n  rake (&gt;= 0, development)\n  rdoc (&gt;= 0, development)\n  rspec (&gt;= 0, development)\n  rubocop (= 0.20.1, development)\n\nGem turbolinks-5.0.1\n  turbolinks-source (~&gt; 5)\n\nGem turbolinks-source-5.0.0\n\nGem tzinfo-1.2.2\n  thread_safe (~&gt; 0.1)\n\nGem uglifier-3.0.3\n  bundler (~&gt; 1.3, development)\n  execjs (&lt; 3, &gt;= 0.3.0)\n  rake (~&gt; 11.3, development)\n  rspec (~&gt; 3.0, development)\n  sourcemap (~&gt; 0.1.1, development)\n\nGem web-console-3.4.0\n  actionview (&gt;= 5.0)\n  activemodel (&gt;= 5.0)\n  debug_inspector (&gt;= 0)\n  railties (&gt;= 5.0)\n\nGem websocket-driver-0.6.4\n  eventmachine (&gt;= 0, development)\n  permessage_deflate (&gt;= 0, development)\n  rake-compiler (~&gt; 0.8.0, development)\n  rspec (&gt;= 0, development)\n  websocket-extensions (&gt;= 0.1.0)\n\nGem websocket-extensions-0.1.2\n  rspec (&gt;= 0, development)\n\nGem will_paginate-3.1.5\n\nGem xmlrpc-0.2.1\n  bundler (&gt;= 0, development)\n  rake (&gt;= 0, development)\n  test-unit (&gt;= 0, development)\n\nGem zip-zip-0.3\n  bundler (~&gt; 1.6, development)\n  minitest (= 4.7.5, development)\n  pry (&gt;= 0, development)\n  rake (&gt;= 0, development)\n  rubyzip (&gt;= 1.0.0)\n</code></pre>\n\n<p>How do I eliminate the dependency on this gem?  I thought deleting Gemfile.lock and trying again would work, but evidently, no dice.</p>\n"}, {"tags": ["ruby", "refactoring", "generic-programming"], "answers": [{"tags": [], "owner": {"reputation": 26, "user_id": 6626004, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hAOQp.jpg?s=128&g=1", "display_name": "Johannes Mentz", "link": "https://stackoverflow.com/users/6626004/johannes-mentz"}, "is_accepted": true, "score": 1, "last_activity_date": 1483565325, "creation_date": 1483565325, "answer_id": 41473524, "question_id": 41466335, "link": "https://stackoverflow.com/questions/41466335/how-to-get-a-classs-attributes-and-map-them-to-csv-headers-in-a-generic-way/41473524#41473524", "title": "How to get a class&#39;s attributes and map them to .csv headers in a generic way?", "body": "<p>The biggest problem, which I see, is, that your column headers are not named exactly like your model attributes. Example: 'date' vs. 'ORDER_DATE'. It is not trivially possible to guess, that the attribute date should be populated with the content of the column 'ORDER_DATE'. This makes the task way more complex.</p>\n\n<p>My first idea would therefore be to just define on each class a mapping like</p>\n\n<pre><code>class Order &lt; ActiveRecord::Base\n\n  CSV_IMPORT_MAPPING = {\n    date: 'ORDER_DATE',\n    seller_id: 'SELLER_ID',\n    # ...\n  }\n</code></pre>\n\n<p>and use this mapping to initialize the objects in a loop:</p>\n\n<pre><code>    CSV.foreach(path, :headers =&gt; :first_row, :col_sep =&gt; ',', encoding: \"ISO8859-1:utf-8\") do |row|\n        objects.push class_name.new(class_name::CVS_IMPORT_MAPPING.tap { |hash| hash.map { |class_attr, csv_attr| hash[class_attr] = row[csv_attr] } })\n      )\n end\n</code></pre>\n\n<p>This will basically convert the CSV_IMPORT_MAPPING from</p>\n\n<pre><code>{ date: 'ORDER_DATE', seller_id: 'SELLER_ID' } \n</code></pre>\n\n<p>to a hash with the column content as values</p>\n\n<pre><code>{ date: '2016-12-01', seller_id: 12345 }\n</code></pre>\n\n<p>and pass this hash to the new function to instantiate a new object.</p>\n\n<p>Not cool, but you get a nice overview, which csv column matches to which model attribute and you gain flexibility (you could for example decide to not import all columns, but just the ones from the hash).</p>\n\n<p>Another approach could be, to replace 'CSV.foreach' with 'CSV.read' to get access to the headers, iterate over the headers and use them to instantiate your object:</p>\n\n<pre><code>csv = CSV.read(path, :headers =&gt; :first_row, :col_sep =&gt; ',', encoding: \"ISO8859-1:utf-8\") do |row|\n    instance = class_name.new\n    csv.headers.each do |header|\n      instance.send(\"#{header.downcase}=\", row[header])\n    end\n    objects.push instance\n  )\n</code></pre>\n\n<p>end</p>\n\n<p>'header.downcase' will convert 'ORDER_DATE' to 'order_date', e.g. you will need to add an setter for each column name, that differs from your model attributes, on your model (which i consider to be really ugly):</p>\n\n<pre><code>class Object &lt; ActiveRecord::Base\n  alias_method :order_date=, :date=\n</code></pre>\n\n<p>This would not be necessary if you could get a csv file, in which the column headers are named exactly like your model attributes.</p>\n\n<p>I hope, that one of the ideas works for you.</p>\n"}], "owner": {"reputation": 1959, "user_id": 195964, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9f9d281329fbfb329664ee30be73c1c4?s=128&d=identicon&r=PG", "display_name": "Leif", "link": "https://stackoverflow.com/users/195964/leif"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 143, "favorite_count": 0, "accepted_answer_id": 41473524, "answer_count": 1, "score": 0, "last_activity_date": 1483565325, "creation_date": 1483540369, "last_edit_date": 1483544825, "question_id": 41466335, "link": "https://stackoverflow.com/questions/41466335/how-to-get-a-classs-attributes-and-map-them-to-csv-headers-in-a-generic-way", "title": "How to get a class&#39;s attributes and map them to .csv headers in a generic way?", "body": "<p>I have this function to load several <code>.csv</code> files to an array of objects:</p>\n\n<pre><code>def load_csv_data_to_order_objects\n    orders = []\n    get_data_paths(\"../my/path\", \".csv\").each do |path|\n        CSV.foreach(path, :headers =&gt; :first_row, :col_sep =&gt; ',', encoding: \"ISO8859-1:utf-8\") do |row|\n            orders.push Order.new(\n                :date =&gt; row[\"ORDER_DATE\"],\n                :seller_id =&gt; row[\"SELLER_ID\"],\n                :order_number =&gt; row[\"ORDER_NUMBER\"],\n                :product_id =&gt; row[\"PRODUCT_ID\"],\n                :quantity =&gt; row[\"QUANTITY\"].to_i,\n                :sales_price =&gt; row[\"SALES_PRICE\"].to_f,\n            )\n        end\n    end\n    orders\nend\n</code></pre>\n\n<p>This works, but I need to load <code>.csv</code> files with a different number of columns into different types of objects. The general \"shape\" of the function is the same, but the object attributes differs.</p>\n\n<p>To minimize code duplication, how can I create a more generic version of this function?</p>\n\n<p>I imagine something like this:</p>\n\n<pre><code>def load_csv_data_to_objects(search_path, file_extension, class_name)\n    objects = []\n    get_data_paths(search_path, file_extension).each do |path|\n        CSV.foreach(path, :headers =&gt; :first_row, :col_sep =&gt; ',', encoding: \"ISO8859-1:utf-8\") do |row|\n            objects.push class_name.new(\n\n                # How can I get a class's attributes and map them to .csv headers?\n\n            )\n        end\n    end\n    objects\nend\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1483542292, "post_id": 41466281, "comment_id": 70139461, "body": "<code>before_filter</code> or <code>before_action</code> depending on your rails version <a href=\"http://guides.rubyonrails.org/action_controller_overview.html#filters\" rel=\"nofollow noreferrer\">Docs</a>"}], "answers": [{"tags": [], "owner": {"reputation": 216, "user_id": 6216878, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mWXmf.png?s=128&g=1", "display_name": "Falknn", "link": "https://stackoverflow.com/users/6216878/falknn"}, "is_accepted": false, "score": 0, "last_activity_date": 1483540740, "creation_date": 1483540740, "answer_id": 41466455, "question_id": 41466281, "link": "https://stackoverflow.com/questions/41466281/passing-value-of-variable-from-one-method-to-another-in-a-controller/41466455#41466455", "title": "Passing value of variable from one method to another in a Controller", "body": "<p>Assign them the same way that in your index action :</p>\n\n<pre><code>def update_log\n  @begin_date = the_value\n  @end_date   = the_value\nend\n</code></pre>\n"}], "owner": {"reputation": 65, "user_id": 6509129, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/b3b6d54251ade57f99ccb8132a8e22bb?s=128&d=identicon&r=PG&f=1", "display_name": "s_a", "link": "https://stackoverflow.com/users/6509129/s-a"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 471, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1483540970, "creation_date": 1483540221, "last_edit_date": 1483540970, "question_id": 41466281, "link": "https://stackoverflow.com/questions/41466281/passing-value-of-variable-from-one-method-to-another-in-a-controller", "title": "Passing value of variable from one method to another in a Controller", "body": "<p>I need the value of <code>@begin_date</code> and <code>@end_date</code> from index action in the <code>update_log</code> as I need those value for querying.</p>\n\n<p>I used class variable for it, BUT it only works the first time, as you can see from code below for <code>Date.parse(params[:begin_date])</code> there is a form tag I have written in the index view.  </p>\n\n<pre><code>class TController &lt; ApplicationController\n\n@@begin_date = Date.today\n\n@@end_date = Date.today\n\ndef index\n\n  @begin_date = params[:begin_date].present? ? Date.parse(params[:begin_date]) : Date.today.beginning_of_month\n\n  @end_date = params[:end_date].present? ? Date.parse(params[:end_date]) : Date.today.end_of_month\n\n  @@begin_date = @begin_date \n  @@end_date = @end_date \nend\n\ndef update_log\n  @begin_date2 = @@begin_date\n  @end_date2 = @@end_date\nend\n</code></pre>\n\n<p>In <code>update_log</code> action it's only taking the value of: </p>\n\n<pre><code>@@begin_date = Date.today\n\n@@end_date = Date.today\n</code></pre>\n\n<p>But after the value is changed from form tag for date it is not getting updated in <code>update_log</code>. I need help with this, OR someone can suggest me a better way of getting the result.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "rake"], "answers": [{"comments": [{"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 3, "creation_date": 1483539779, "post_id": 41465712, "comment_id": 70137636, "body": "If you are using Rails <code>v4.1+</code>, then there are now built-in <a href=\"http://api.rubyonrails.org/classes/ActiveSupport/Testing/TimeHelpers.html\" rel=\"nofollow noreferrer\"><code>TimeHelpers</code></a> - which <i>probably</i> (at least, for simple scenarios like this) makes incorporating a third party library such as a<code>TimeCop</code> unnecessary."}, {"owner": {"reputation": 38307, "user_id": 2057388, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ceef8c04f66cd0e2bd360ef6abc14a81?s=128&d=identicon&r=PG", "display_name": "\u0417\u0435\u043b\u0451\u043d\u044b\u0439", "link": "https://stackoverflow.com/users/2057388/%d0%97%d0%b5%d0%bb%d1%91%d0%bd%d1%8b%d0%b9"}, "reply_to_user": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 1, "creation_date": 1483542638, "post_id": 41465712, "comment_id": 70139656, "body": "@TomLord post an answer please. I use it and its awesome."}, {"owner": {"reputation": 14640, "user_id": 380607, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/0475394dd283efd42d1ae51379c9ed00?s=128&d=identicon&r=PG", "display_name": "Magne", "link": "https://stackoverflow.com/users/380607/magne"}, "reply_to_user": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1483551192, "post_id": 41465712, "comment_id": 70145583, "body": "@TomLord note that DateTime.now wasn&#39;t supported for time_travel before Rails 5."}, {"owner": {"reputation": 38077, "user_id": 199712, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/4fa58c43c72a15d2d560ffd931fbe9bb?s=128&d=identicon&r=PG", "display_name": "Jason Swett", "link": "https://stackoverflow.com/users/199712/jason-swett"}, "edited": false, "score": 0, "creation_date": 1583371890, "post_id": 41465712, "comment_id": 107097088, "body": "I believe this answer (and Timecop itself) are pretty much outdated now that Rails has <code>TimeHelpers</code>. I&#39;d recommend <a href=\"https://stackoverflow.com/a/41469122/199712\">the other answer</a> instead."}], "tags": [], "owner": {"reputation": 869, "user_id": 1757430, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/Yz7Eo.jpg?s=128&g=1", "display_name": "Walerian Sobczak", "link": "https://stackoverflow.com/users/1757430/walerian-sobczak"}, "is_accepted": true, "score": 6, "last_activity_date": 1483539471, "last_edit_date": 1483539471, "creation_date": 1483538645, "answer_id": 41465712, "question_id": 41465624, "link": "https://stackoverflow.com/questions/41465624/how-to-override-date-today-when-running-rails-tests/41465712#41465712", "title": "How to override Date.today when running rails tests?", "body": "<p>For <strong>testing</strong> you can use <a href=\"https://github.com/travisjeffery/timecop\" rel=\"nofollow noreferrer\" title=\"timecop gem documentation\">timecop</a> gem.\nIt offers you two useful methods <code>Timecop.freeze</code> and <code>Timecop.travel</code>.</p>\n\n<p>For example, you can use <code>freeze</code> to statically set time in <strong>before hooks</strong>:</p>\n\n<pre><code>describe 'your tests' do\n  before do\n    Timecop.freeze(Time.new(2017, 1, 4))\n  end\n\n  after do\n    Timecop.return\n  end\n\n  it 'should do something' do\n    sleep(10)\n    Time.now # =&gt; 2017-01-04 00:00:00\n  end\nend\n</code></pre>\n\n<p>Or in a <strong>block</strong>:</p>\n\n<pre><code>Timecop.freeze(Time.now - 3.months) do\n  assert product.expired?\nend\n</code></pre>\n\n<p>While with the <code>travel</code> method, you change the starting moment, but <strong>time is still passing by</strong>.</p>\n\n<pre><code>Timecop.travel(Time.new(2017, 1, 4))\nsleep(10)\nTime.now # =&gt; 2017-01-04 00:00:10\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 14640, "user_id": 380607, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/0475394dd283efd42d1ae51379c9ed00?s=128&d=identicon&r=PG", "display_name": "Magne", "link": "https://stackoverflow.com/users/380607/magne"}, "edited": false, "score": 0, "creation_date": 1483551302, "post_id": 41469122, "comment_id": 70145650, "body": "Thanks, this was very nice to know, although in my case I was using Rails 4"}], "tags": [], "owner": {"reputation": 3768, "user_id": 1029521, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/7ce6f2f15a73bb6012b490dcbc4c1ed5?s=128&d=identicon&r=PG", "display_name": "Max Woolf", "link": "https://stackoverflow.com/users/1029521/max-woolf"}, "is_accepted": false, "score": 5, "last_activity_date": 1583371784, "last_edit_date": 1583371784, "creation_date": 1483548468, "answer_id": 41469122, "question_id": 41465624, "link": "https://stackoverflow.com/questions/41465624/how-to-override-date-today-when-running-rails-tests/41469122#41469122", "title": "How to override Date.today when running rails tests?", "body": "<p>As of Rails 4.1 you can do</p>\n\n<pre><code>travel_to Time.new(2004, 11, 24, 01, 04, 44)\n</code></pre>\n\n<p>The full API docs are here: <a href=\"http://api.rubyonrails.org/classes/ActiveSupport/Testing/TimeHelpers.html\" rel=\"nofollow noreferrer\">http://api.rubyonrails.org/classes/ActiveSupport/Testing/TimeHelpers.html</a></p>\n"}], "owner": {"reputation": 14640, "user_id": 380607, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/0475394dd283efd42d1ae51379c9ed00?s=128&d=identicon&r=PG", "display_name": "Magne", "link": "https://stackoverflow.com/users/380607/magne"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1117, "favorite_count": 0, "accepted_answer_id": 41465712, "answer_count": 2, "score": 2, "last_activity_date": 1583371784, "creation_date": 1483538366, "question_id": 41465624, "link": "https://stackoverflow.com/questions/41465624/how-to-override-date-today-when-running-rails-tests", "title": "How to override Date.today when running rails tests?", "body": "<p>I have some tests that were failing on specific dates, because someone wrote them to use <code>Date.today</code>. I want to reproduce the failures on previous select dates.</p>\n\n<p>Is there a way to run rake test with an ENV variable that will override the system clock? So that calls to <code>Date.today</code>, <code>Time.now</code>, and <code>1.day.ago</code> and <code>1.day.from_now</code> will use the date I set?</p>\n\n<p>Like, for example:</p>\n\n<pre><code>&gt; DATE_TODAY='2017-01-04' rake test\n</code></pre>\n"}, {"tags": ["ruby", "loops", "sleep"], "comments": [{"owner": {"reputation": 2470, "user_id": 1175090, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/bd5ca9726b8546e77c9fe21cae2f1e95?s=128&d=identicon&r=PG", "display_name": "Snake Sanders", "link": "https://stackoverflow.com/users/1175090/snake-sanders"}, "edited": false, "score": 0, "creation_date": 1483538543, "post_id": 41465605, "comment_id": 70136787, "body": "It looks to me that you will need a separated thread to achieve what you want. A worker and a main function."}, {"owner": {"user_type": "does_not_exist", "display_name": "user7174959"}, "edited": false, "score": 0, "creation_date": 1483538543, "post_id": 41465605, "comment_id": 70136788, "body": "Where are you incrementing your while loop?"}, {"owner": {"reputation": 5471, "user_id": 6019903, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/e7h7I.png?s=128&g=1", "display_name": "Brad", "link": "https://stackoverflow.com/users/6019903/brad"}, "edited": false, "score": 0, "creation_date": 1483538631, "post_id": 41465605, "comment_id": 70136856, "body": "its just a dummy example but i will update for clarity @leok"}, {"owner": {"user_type": "does_not_exist", "display_name": "user7174959"}, "reply_to_user": {"reputation": 2470, "user_id": 1175090, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/bd5ca9726b8546e77c9fe21cae2f1e95?s=128&d=identicon&r=PG", "display_name": "Snake Sanders", "link": "https://stackoverflow.com/users/1175090/snake-sanders"}, "edited": false, "score": 0, "creation_date": 1483538795, "post_id": 41465605, "comment_id": 70136981, "body": "Look into Threads as @SnakeSanders said"}], "answers": [{"comments": [{"owner": {"reputation": 5471, "user_id": 6019903, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/e7h7I.png?s=128&g=1", "display_name": "Brad", "link": "https://stackoverflow.com/users/6019903/brad"}, "edited": false, "score": 0, "creation_date": 1483539081, "post_id": 41465775, "comment_id": 70137149, "body": "so in simple terms ruby isn&#39;t refreshing the output until it finishes? In your solution im forcing a refresh on each loop with the .flush?"}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "reply_to_user": {"reputation": 5471, "user_id": 6019903, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/e7h7I.png?s=128&g=1", "display_name": "Brad", "link": "https://stackoverflow.com/users/6019903/brad"}, "edited": false, "score": 1, "creation_date": 1483539456, "post_id": 41465775, "comment_id": 70137399, "body": "<code>ruby</code> has nothing to do with standard output settings. It\u2019s up to console to decide when the buffer is to be flushed (unless flushed explicitly, as in my example.) On my Linux box it flashes immediately on every call to <code>puts</code>."}], "tags": [], "owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "is_accepted": true, "score": 7, "last_activity_date": 1483538797, "creation_date": 1483538797, "answer_id": 41465775, "question_id": 41465605, "link": "https://stackoverflow.com/questions/41465605/ruby-while-loop-with-sleep/41465775#41465775", "title": "Ruby while loop with sleep", "body": "<p>The console output is buffered and nobody promised to <a href=\"https://ruby-doc.org/core/IO.html#method-i-flush\" rel=\"noreferrer\"><code>IO#flush</code></a> it for you:</p>\n\n<pre><code>$i = 0\n$num = 3\n\nwhile $i &lt; $num  do\n    $stdout.puts \"My loop just executed\"\n    $stdout.flush\n    sleep 10\n    $i +=1\nend\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 5471, "user_id": 6019903, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/e7h7I.png?s=128&g=1", "display_name": "Brad", "link": "https://stackoverflow.com/users/6019903/brad"}, "edited": false, "score": 0, "creation_date": 1483542845, "post_id": 41466911, "comment_id": 70139788, "body": "Thank you, this is really useful!"}], "tags": [], "owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "is_accepted": false, "score": 8, "last_activity_date": 1540887453, "last_edit_date": 1540887453, "creation_date": 1483542080, "answer_id": 41466911, "question_id": 41465605, "link": "https://stackoverflow.com/questions/41465605/ruby-while-loop-with-sleep/41466911#41466911", "title": "Ruby while loop with sleep", "body": "<p>Ruby automatically flushes output if stdout is a terminal device (tty) and buffers the output if it is not.</p>\n\n<p>For example, running this from a terminal will usually output \"hello\" immediately:</p>\n\n<pre><code>$ ruby -e 'puts \"hello\" ; sleep 5 ; puts \"world\"'\nhello\n# 5 seconds delay\nworld\n$\n</code></pre>\n\n<p>Because of:</p>\n\n<pre><code>$ ruby -e 'puts $stdout.tty?'\ntrue\n</code></pre>\n\n<p>Whereas piping the output to another command will usually delay (i.e. buffer) the output until the script has finished:</p>\n\n<pre><code>$ ruby -e 'puts \"hello\" ; sleep 5 ; puts \"world\"' | cat\n# 5 seconds delay\nhello\nworld\n$\n</code></pre>\n\n<p>Because of:</p>\n\n<pre><code>$ ruby -e 'puts $stdout.tty?' | cat\nfalse\n</code></pre>\n\n<p>To immediately flush any output regardless of whether stdout is a tty, you can set <code>$stdout</code>'s <a href=\"http://ruby-doc.org/core-2.4.0/IO.html#method-i-sync-3D\" rel=\"nofollow noreferrer\"><code>sync</code></a> to <code>true</code> at the beginning of your script:</p>\n\n<pre><code>$stdout.sync = true\n</code></pre>\n\n<p>Applied to the above example:</p>\n\n<pre><code>$ ruby -e '$stdout.sync = true ; puts \"hello\" ; sleep 5 ; puts \"world\"' | cat\nhello\n# 5 seconds delay\nworld\n$\n</code></pre>\n"}], "owner": {"reputation": 5471, "user_id": 6019903, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/e7h7I.png?s=128&g=1", "display_name": "Brad", "link": "https://stackoverflow.com/users/6019903/brad"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1868, "favorite_count": 1, "accepted_answer_id": 41465775, "answer_count": 2, "score": 1, "last_activity_date": 1540887453, "creation_date": 1483538327, "last_edit_date": 1483538641, "question_id": 41465605, "link": "https://stackoverflow.com/questions/41465605/ruby-while-loop-with-sleep", "title": "Ruby while loop with sleep", "body": "<p>Given the following ruby:</p>\n\n<pre><code>$i = 0\n$num = 3\n\nwhile $i &lt; $num  do\n    puts \"My loop just executed\"\n    sleep 10\n    $i +=1\nend\n</code></pre>\n\n<p>I would expect that every 10 seconds (plus execution time) I would get \"My loop just executed\" printed to my console until $i = 3</p>\n\n<pre><code>My loop just executed\n# sleeps for 10 seconds\nMy loop just executed\n# sleeps for 10 seconds\nMy loop just executed\n# sleeps for 10 seconds\n</code></pre>\n\n<p>However what actually happens is the script runs, nothing is printed to console until $i = 3 and then i get 3 lines printed at once:</p>\n\n<pre><code>My loop just executed\nMy loop just executed\nMy loop just executed\n</code></pre>\n\n<p>I can't understand why it wont print after each loop as oppose to printing all at the end?</p>\n\n<p>Why is this and how can I get it to work as I am expecting it to? Any help would be appreciated</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "activerecord", "active-enum"], "comments": [{"owner": {"reputation": 1582, "user_id": 3772041, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5c94870a0274bc091b806eef6575e406?s=128&d=identicon&r=PG&f=1", "display_name": "akash93", "link": "https://stackoverflow.com/users/3772041/akash93"}, "edited": false, "score": 0, "creation_date": 1483538081, "post_id": 41465386, "comment_id": 70136455, "body": "you could write a function which generates content based on the enum value"}, {"owner": {"reputation": 3521, "user_id": 2521680, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/6D935.jpg?s=128&g=1", "display_name": "Rockwell Rice", "link": "https://stackoverflow.com/users/2521680/rockwell-rice"}, "edited": false, "score": 0, "creation_date": 1483538112, "post_id": 41465386, "comment_id": 70136483, "body": "What I typically do with this is make the status part of the class and then write css to attach to the class.  So, label-draft, would be a class with the styles you want on it and then in the view just one line, &quot;label-&lt;%= posting.status %&gt;&quot; will apply the class and styles you want."}, {"owner": {"reputation": 383, "user_id": 1959893, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/4d1ca3a7ff087217b6dbdac3a9d610fa?s=128&d=identicon&r=PG", "display_name": "Robert Saunders", "link": "https://stackoverflow.com/users/1959893/robert-saunders"}, "reply_to_user": {"reputation": 3521, "user_id": 2521680, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/6D935.jpg?s=128&g=1", "display_name": "Rockwell Rice", "link": "https://stackoverflow.com/users/2521680/rockwell-rice"}, "edited": false, "score": 0, "creation_date": 1483538316, "post_id": 41465386, "comment_id": 70136617, "body": "@RockwellRice that is a good idea, I really like that implementation, although, the only thing I don&#39;t like is that I would have to compromise my status names for CSS class names that used more widely throughout my application it doesn&#39;t justify changing them. As a result for clarity I would prefer to keep the status names as they are and not change the CSS classes as well."}, {"owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "edited": false, "score": 1, "creation_date": 1483538786, "post_id": 41465386, "comment_id": 70136976, "body": "<a href=\"http://stackoverflow.com/questions/22827270/how-to-use-i18n-with-rails-4-enums\" title=\"how to use i18n with rails 4 enums\">stackoverflow.com/questions/22827270/&hellip;</a>"}], "answers": [{"comments": [{"owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "edited": false, "score": 0, "creation_date": 1483538624, "post_id": 41465659, "comment_id": 70136847, "body": "I would change it so that you can pass a block for the text or use the I18n module."}], "tags": [], "owner": {"reputation": 13534, "user_id": 644810, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/ADwSQ.png?s=128&g=1", "display_name": "Rustam A. Gasanov", "link": "https://stackoverflow.com/users/644810/rustam-a-gasanov"}, "is_accepted": true, "score": 2, "last_activity_date": 1483538456, "creation_date": 1483538456, "answer_id": 41465659, "question_id": 41465386, "link": "https://stackoverflow.com/questions/41465386/displaying-status-in-view-rails/41465659#41465659", "title": "Displaying Status In View - Rails", "body": "<p>Unless you have decorators, I would've just created a simple helper</p>\n\n<pre><code>def status_label(posting)\n  case posting.status\n  when :waiting_approval\n    content_tag(:div, 'pending approval', class: 'label label-warning')\n  when :draft\n    ...\nend\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 383, "user_id": 1959893, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/4d1ca3a7ff087217b6dbdac3a9d610fa?s=128&d=identicon&r=PG", "display_name": "Robert Saunders", "link": "https://stackoverflow.com/users/1959893/robert-saunders"}, "edited": false, "score": 0, "creation_date": 1483541009, "post_id": 41465704, "comment_id": 70138516, "body": "This is a great solution, the only thing I am weary of is putting this kind of logic in the model class, I prefer all of the business kind of logic to be in the controller, this is why I am going with the other answer, although both work fine! Thanks for the help!"}], "tags": [], "owner": {"reputation": 14827, "user_id": 645886, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2abb0123e9484284a9cb2d36aa9854b3?s=128&d=identicon&r=PG&f=1", "display_name": "Surya", "link": "https://stackoverflow.com/users/645886/surya"}, "is_accepted": false, "score": 3, "last_activity_date": 1483538610, "creation_date": 1483538610, "answer_id": 41465704, "question_id": 41465386, "link": "https://stackoverflow.com/questions/41465386/displaying-status-in-view-rails/41465704#41465704", "title": "Displaying Status In View - Rails", "body": "<p>I would do something like this:</p>\n\n<pre><code>class JobPosting &lt; ApplicationRecord\n   enum status: [:waiting_approval, :draft, :open, :interviews_scheduled, :closed]\n\n   def status_label\n     {\n       'waiting_approval' =&gt; 'pending approval',\n       'open' =&gt; 'open',\n       'interviews_scheduled' =&gt; 'interview is scheduled',\n       'closed' =&gt; 'closed',\n       'draft' =&gt; 'draft'\n     }[self.status]\n   end\nend\n</code></pre>\n\n<p>then in view:</p>\n\n<pre><code>&lt;div class=\"label &lt;%= posting.status %&gt;\"&gt;&lt;%= posting.status_label %&gt;&lt;/div&gt;\n</code></pre>\n\n<p>Since in Rails we've sass you can inherit properties of other css classes:</p>\n\n<pre><code>.waiting_approval{\n  @extend .label-warning;\n  // customize this css class if needed.\n}\n\n// and so on..\n</code></pre>\n"}], "owner": {"reputation": 383, "user_id": 1959893, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/4d1ca3a7ff087217b6dbdac3a9d610fa?s=128&d=identicon&r=PG", "display_name": "Robert Saunders", "link": "https://stackoverflow.com/users/1959893/robert-saunders"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 315, "favorite_count": 1, "accepted_answer_id": 41465659, "answer_count": 2, "score": 2, "last_activity_date": 1483538610, "creation_date": 1483537713, "question_id": 41465386, "link": "https://stackoverflow.com/questions/41465386/displaying-status-in-view-rails", "title": "Displaying Status In View - Rails", "body": "<p>In my rails application I have a model called JobPosting. A job posting has a status, it can be either: </p>\n\n<ol>\n<li>Waiting Approval</li>\n<li>Draft</li>\n<li>Open</li>\n<li>Interviews Scheduled</li>\n<li>Closed</li>\n</ol>\n\n<p>I implemented these statuses using <a href=\"http://api.rubyonrails.org/classes/ActiveRecord/Enum.html\" rel=\"nofollow noreferrer\">ActiveRecord::Enum</a> like so: </p>\n\n<pre><code>class JobPosting &lt; ApplicationRecord\n   enum status: [:waiting_approval, :draft, :open, :interviews_scheduled, :closed]\nend\n</code></pre>\n\n<p>Now I would like to display a different user interface element that is dependant on the status of the job posting. i.e.</p>\n\n<p>For the waiting approval status I want:</p>\n\n<pre><code>&lt;div class=\"label label-warning\"&gt;pending approval&lt;/div&gt;\n</code></pre>\n\n<p>And for the open status I want: </p>\n\n<pre><code>&lt;div class=\"label label-success\"&gt;open&lt;/div&gt;\n</code></pre>\n\n<p>Note that there is different text and the class is different as the element is styled differently for the different cases. In my index.html.erb, where this styling needs to happen, I could just do a bunch of embedded ruby if statements and check the status of the posting and display the desired element, like so: </p>\n\n<pre><code>&lt;% if posting.waiting_approval? %&gt;\n      &lt;div class=\"label label-warning\"&gt;pending approval&lt;/div&gt;\n&lt;% elsif posting.open? %&gt;\n      &lt;div class=\"label label-success\"&gt;open&lt;/div&gt;\n&lt;% elsif posting.closed&gt; %&gt;\n      etc...\n &lt;% end %&gt;\n</code></pre>\n\n<p>I feel as if that is not very DRY, is there a better way? </p>\n\n<p>Alternatively, I could create partial and have the logic stored in that and just render the partial, but again is that how it is done?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "database", "activerecord"], "comments": [{"owner": {"reputation": 5358, "user_id": 2399861, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/5fbe887e0a643cd477ba3f14fa528f84?s=128&d=identicon&r=PG", "display_name": "Ruby Racer", "link": "https://stackoverflow.com/users/2399861/ruby-racer"}, "edited": false, "score": 0, "creation_date": 1483535722, "post_id": 41464571, "comment_id": 70134980, "body": "Maybe get the last part out of these [ ]. You are using an array that has one array element in it"}], "answers": [{"comments": [{"owner": {"reputation": 383, "user_id": 6273382, "user_type": "registered", "accept_rate": 95, "profile_image": "https://graph.facebook.com/10156818603950237/picture?type=large", "display_name": "Omar", "link": "https://stackoverflow.com/users/6273382/omar"}, "edited": false, "score": 0, "creation_date": 1483536530, "post_id": 41464733, "comment_id": 70135450, "body": "thank you for your response, greatly appreciate it champ. Thanks for telling me about that rails 4+ feature"}], "tags": [], "owner": {"reputation": 1903, "user_id": 2578693, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/3a7a908dd876ba5168b5ba618ccae256?s=128&d=identicon&r=PG&f=1", "display_name": "Engr. Hasanuzzaman Sumon", "link": "https://stackoverflow.com/users/2578693/engr-hasanuzzaman-sumon"}, "is_accepted": false, "score": 1, "last_activity_date": 1483535735, "creation_date": 1483535735, "answer_id": 41464733, "question_id": 41464571, "link": "https://stackoverflow.com/questions/41464571/pulling-up-a-list-of-users-who-your-not-following-using-your-controller-rails/41464733#41464733", "title": "Pulling up a list of users who your not following using your controller (Rails)", "body": "<p>You should not use <code>find</code> instead use <code>where</code>.\nIf your are using <code>rails 4+</code> then\n<code>User.where.not(id: [[@user.id] + @user.following.ids])</code> will return all the user excluding <code>@user</code> and <code>@user.following</code></p>\n\n<p>Even you can write as <code>User.where.not(id: [[@user] + @user.following])</code> </p>\n\n<p>Now you can make any operation on it. Hope this will help you.</p>\n"}, {"comments": [{"owner": {"reputation": 383, "user_id": 6273382, "user_type": "registered", "accept_rate": 95, "profile_image": "https://graph.facebook.com/10156818603950237/picture?type=large", "display_name": "Omar", "link": "https://stackoverflow.com/users/6273382/omar"}, "edited": false, "score": 0, "creation_date": 1483536475, "post_id": 41464783, "comment_id": 70135419, "body": "Bharat thank you for your response, greatly appreciate it sir"}], "tags": [], "owner": {"reputation": 2448, "user_id": 2621389, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/uiNbQ.jpg?s=128&g=1", "display_name": "Bharat soni", "link": "https://stackoverflow.com/users/2621389/bharat-soni"}, "is_accepted": false, "score": 1, "last_activity_date": 1483535896, "creation_date": 1483535896, "answer_id": 41464783, "question_id": 41464571, "link": "https://stackoverflow.com/questions/41464571/pulling-up-a-list-of-users-who-your-not-following-using-your-controller-rails/41464783#41464783", "title": "Pulling up a list of users who your not following using your controller (Rails)", "body": "<p>You can use the below code. No need to find the user as well.</p>\n\n<pre><code>User.where.not(id: [[current_user.id] + current_user.following.ids]).shuffle.first\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 383, "user_id": 6273382, "user_type": "registered", "accept_rate": 95, "profile_image": "https://graph.facebook.com/10156818603950237/picture?type=large", "display_name": "Omar", "link": "https://stackoverflow.com/users/6273382/omar"}, "edited": false, "score": 0, "creation_date": 1483536423, "post_id": 41464795, "comment_id": 70135386, "body": "thank you so much!! this was such a helpful explanation - also thank you for letting me know about the production database issue"}], "tags": [], "owner": {"reputation": 33085, "user_id": 2423164, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Nxbnp.jpg?s=128&g=1", "display_name": "ndnenkov", "link": "https://stackoverflow.com/users/2423164/ndnenkov"}, "is_accepted": true, "score": 1, "last_activity_date": 1483535923, "creation_date": 1483535923, "answer_id": 41464795, "question_id": 41464571, "link": "https://stackoverflow.com/questions/41464571/pulling-up-a-list-of-users-who-your-not-following-using-your-controller-rails/41464795#41464795", "title": "Pulling up a list of users who your not following using your controller (Rails)", "body": "<p>The problem is that <code>@user.following.ids</code> is already an array, thus there is no need to wrap it in one. Hence:</p>\n\n<pre><code>User.find((User.pluck(:id) - [@user.id]  - @user.following.ids).shuffle.first)\n</code></pre>\n\n<hr>\n\n<p>Still, this fetches all user ids, which on production database would be problematic. You could instead select only a single record:</p>\n\n<pre><code>User.where.not(id: [@user.id] + @user.following.ids).first\n</code></pre>\n\n<p>How to do the shuffle is database specific. For <em>postgresql</em> and <em>sqlite3</em>, you could do:</p>\n\n<pre><code>User.where.not(id: [@user.id] + @user.following.ids).order('RANDOM()').first\n</code></pre>\n"}], "owner": {"reputation": 383, "user_id": 6273382, "user_type": "registered", "accept_rate": 95, "profile_image": "https://graph.facebook.com/10156818603950237/picture?type=large", "display_name": "Omar", "link": "https://stackoverflow.com/users/6273382/omar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 71, "favorite_count": 0, "accepted_answer_id": 41464795, "answer_count": 3, "score": 0, "last_activity_date": 1483535923, "creation_date": 1483535145, "question_id": 41464571, "link": "https://stackoverflow.com/questions/41464571/pulling-up-a-list-of-users-who-your-not-following-using-your-controller-rails", "title": "Pulling up a list of users who your not following using your controller (Rails)", "body": "<p>I'm new to ruby on rails so please forgive the question. I tried looking at the Rails guide and a few similar questions - and I'm 90% there I feel. Currently, I can pull up the list of users that excludes current user - but my work doesn't exclude the users that I followed which is what I want also. I am trying to show for a specific user a list of users who he or she has not yet followed. I have listed below all my relevant code down below. Thank you so much guys!!</p>\n\n<p><strong>Users controller</strong></p>\n\n<pre><code>def show\n@user = User.find(params[:id])\n@random = User.find((User.pluck(:id) - [@user.id] - [@user.following.ids]).shuffle.first)\nend\n</code></pre>\n\n<p><strong>Show.html.erb</strong></p>\n\n<pre><code>&lt;div&gt;\n&lt;%= image_tag @random.avatar, width: 38, class: \"css-style\" %&gt;&amp;nbsp&lt;strong&gt;&lt;%= link_to @random.username, @random, class: \"youmaylikelink\" %&gt;&lt;/strong&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p><strong>Rails Console</strong>\nIn my rails console if I do @user.following.ids > I get the ids for the users that the current user is following. That is why I put @user.following.ids in my users controller.</p>\n"}, {"tags": ["ruby-on-rails", "angularjs", "ruby"], "answers": [{"comments": [{"owner": {"reputation": 23, "user_id": 7177991, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-BZ75M9p2WX0/AAAAAAAAAAI/AAAAAAAAAJU/_nZfT22tIPQ/photo.jpg?sz=128", "display_name": "Nagarani", "link": "https://stackoverflow.com/users/7177991/nagarani"}, "edited": false, "score": 0, "creation_date": 1483536064, "post_id": 41464606, "comment_id": 70135177, "body": "Thanks you   @Nilton"}, {"owner": {"reputation": 16, "user_id": 6447404, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BvCIl.jpg?s=128&g=1", "display_name": "Nilton", "link": "https://stackoverflow.com/users/6447404/nilton"}, "reply_to_user": {"reputation": 23, "user_id": 7177991, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-BZ75M9p2WX0/AAAAAAAAAAI/AAAAAAAAAJU/_nZfT22tIPQ/photo.jpg?sz=128", "display_name": "Nagarani", "link": "https://stackoverflow.com/users/7177991/nagarani"}, "edited": false, "score": 0, "creation_date": 1484062327, "post_id": 41464606, "comment_id": 70349550, "body": "I forgot to tell just one more thing, if you want to use de notify.js that you downloaded from the internet, you can put in vendor/assets and you have to configure the config/initializers/assets.rb, inside this file, you have an example on how to configure (sorry for my bad english)."}], "tags": [], "owner": {"reputation": 16, "user_id": 6447404, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BvCIl.jpg?s=128&g=1", "display_name": "Nilton", "link": "https://stackoverflow.com/users/6447404/nilton"}, "is_accepted": true, "score": 0, "last_activity_date": 1483535258, "creation_date": 1483535258, "answer_id": 41464606, "question_id": 41464108, "link": "https://stackoverflow.com/questions/41464108/how-to-link-rails-and-angular-js-for-developing-single-page-applications/41464606#41464606", "title": "how to link rails and angular js for developing single page applications", "body": "<p>There is a gem angularjs-rails</p>\n\n<p>put in the gemfile</p>\n\n<p>gem 'angularjs-rails'</p>\n\n<p>Add the following directive to your JavaScript manifest file (application.js):</p>\n\n<p>//= require angular\nIf you desire to require (optional) Angular files, you may include them as well in your JavaScript manifest file (application.js). For example:</p>\n\n<p>//= require angular-animate\n//= require angular-resource\nTo use the 'unstable' branch, add the following directive to your JavaScript manifest file (application.js):</p>\n\n<p>//= require unstable/angular2</p>\n"}], "owner": {"reputation": 23, "user_id": 7177991, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-BZ75M9p2WX0/AAAAAAAAAAI/AAAAAAAAAJU/_nZfT22tIPQ/photo.jpg?sz=128", "display_name": "Nagarani", "link": "https://stackoverflow.com/users/7177991/nagarani"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 63, "favorite_count": 0, "closed_date": 1483539724, "accepted_answer_id": 41464606, "answer_count": 1, "score": -2, "last_activity_date": 1540814401, "creation_date": 1483533725, "last_edit_date": 1540814401, "question_id": 41464108, "link": "https://stackoverflow.com/questions/41464108/how-to-link-rails-and-angular-js-for-developing-single-page-applications", "closed_reason": "Needs more focus", "title": "how to link rails and angular js for developing single page applications", "body": "<p>I know both ruby on rails and angular js, But I don't know how to link both \ncould you tell me how can I link both for developing single page applications</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-5"], "answers": [{"tags": [], "owner": {"reputation": 18856, "user_id": 1359650, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/dffc4318ac93e728a26c8e8b51b4eb37?s=128&d=identicon&r=PG", "display_name": "jvillian", "link": "https://stackoverflow.com/users/1359650/jvillian"}, "is_accepted": false, "score": 9, "last_activity_date": 1483533913, "creation_date": 1483533913, "answer_id": 41464183, "question_id": 41463999, "link": "https://stackoverflow.com/questions/41463999/warning-constant-fixnum-is-deprecated-when-generating-new-model/41464183#41464183", "title": "warning: constant ::Fixnum is deprecated When generating new model", "body": "<p>I assume you're using Rails 5? Check out <a href=\"https://github.com/rails/rails/issues/27462\">this link</a> (towards the bottom). Looks like these warnings will go away with release #27458.</p>\n"}, {"comments": [{"owner": {"reputation": 15683, "user_id": 6523163, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/qUURJ.jpg?s=128&g=1", "display_name": "aircraft", "link": "https://stackoverflow.com/users/6523163/aircraft"}, "edited": false, "score": 1, "creation_date": 1485441572, "post_id": 41464223, "comment_id": 70933505, "body": "I use <code>ruby 2.3.3p222 (2016-11-21 revision 56859) [x86_64-darwin16]</code> but also get this issue."}, {"owner": {"reputation": 5487, "user_id": 2909692, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/05ad9fe4a2d294b296a7bc3eba97850a?s=128&d=identicon&r=PG&f=1", "display_name": "Sauron", "link": "https://stackoverflow.com/users/2909692/sauron"}, "edited": false, "score": 1, "creation_date": 1488060620, "post_id": 41464223, "comment_id": 72066497, "body": "How do I ignore the warnings? Running &quot;rails s&quot; fails"}, {"owner": {"reputation": 5014, "user_id": 3640770, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/HJBjs.jpg?s=128&g=1", "display_name": "IngoAlbers", "link": "https://stackoverflow.com/users/3640770/ingoalbers"}, "reply_to_user": {"reputation": 5487, "user_id": 2909692, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/05ad9fe4a2d294b296a7bc3eba97850a?s=128&d=identicon&r=PG&f=1", "display_name": "Sauron", "link": "https://stackoverflow.com/users/2909692/sauron"}, "edited": false, "score": 0, "creation_date": 1488086436, "post_id": 41464223, "comment_id": 72071837, "body": "@Sauron It should not fail because of warnings. Maybe you have some error additionally?"}], "tags": [], "owner": {"reputation": 5014, "user_id": 3640770, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/HJBjs.jpg?s=128&g=1", "display_name": "IngoAlbers", "link": "https://stackoverflow.com/users/3640770/ingoalbers"}, "is_accepted": true, "score": 86, "last_activity_date": 1488441058, "last_edit_date": 1488441058, "creation_date": 1483534042, "answer_id": 41464223, "question_id": 41463999, "link": "https://stackoverflow.com/questions/41463999/warning-constant-fixnum-is-deprecated-when-generating-new-model/41464223#41464223", "title": "warning: constant ::Fixnum is deprecated When generating new model", "body": "<p>This warnings appear because you are using ruby 2.4.0.</p>\n\n<p>This version introduced this change: <a href=\"https://bugs.ruby-lang.org/issues/12005\" rel=\"noreferrer\" title=\"Unify Fixnum and Bignum into Integer\">Unify Fixnum and Bignum into Integer</a></p>\n\n<p>See here for the announcement: <a href=\"https://www.ruby-lang.org/en/news/2016/12/25/ruby-2-4-0-released/\" rel=\"noreferrer\">https://www.ruby-lang.org/en/news/2016/12/25/ruby-2-4-0-released/</a></p>\n\n<p>The warnings come from the activesupport gem which is part of rails and will be fixed in an upcoming release.</p>\n\n<p>For now you can just ignore those warnings.</p>\n\n<p><strong>Update:</strong> <a href=\"http://weblog.rubyonrails.org/2017/3/1/Rails-5-0-2-has-been-released/\" rel=\"noreferrer\">Rails 5.0.2 has been released</a>, which gets rid of the warnings.</p>\n"}, {"tags": [], "owner": {"reputation": 657, "user_id": 1320064, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/308b5900b3ebaa93aab1b29d6898d01c?s=128&d=identicon&r=PG", "display_name": "lsiebert", "link": "https://stackoverflow.com/users/1320064/lsiebert"}, "is_accepted": false, "score": 9, "last_activity_date": 1487562399, "creation_date": 1487562399, "answer_id": 42336144, "question_id": 41463999, "link": "https://stackoverflow.com/questions/41463999/warning-constant-fixnum-is-deprecated-when-generating-new-model/42336144#42336144", "title": "warning: constant ::Fixnum is deprecated When generating new model", "body": "<p>If these deprecation warnings in active support are the only warnings you are seeing, you can surpress them by passing a RUBYOPT bash variable with the -W0 option which will silence.</p>\n\n<p>so instead of <code>rails server</code> \ntry: <code>RUBYOPT=\"-W0\" rails server</code> or <code>RUBYOPT=\"-W0\" bin/rails server</code> </p>\n\n<p>In rails 5.0 you may want to get in the habit of using bin/rails not just rails, since that's the global rails version which may or may not be the same as your local rails version. </p>\n"}, {"comments": [{"owner": {"reputation": 313, "user_id": 2034099, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/p410N.jpg?s=128&g=1", "display_name": "Forrest Wilkins", "link": "https://stackoverflow.com/users/2034099/forrest-wilkins"}, "edited": false, "score": 1, "creation_date": 1496172458, "post_id": 42639519, "comment_id": 75548731, "body": "This worked for me until opening a new terminal: <code>bundle update geocoder</code> Receiving the following error again, right before rails console starts: <code>&#47;home&#47;moi&#47;.rvm&#47;gems&#47;ruby-2.4.0&#47;gems&#47;geo-distance-0.2.2&#47;lib&#47;g&zwnj;&#8203;eo-distance&#47;core_ext&zwnj;&#8203;.rb:13: warning: constant ::Fixnum is deprecated</code>"}], "tags": [], "owner": {"reputation": 4279, "user_id": 1191830, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/IV49t.jpg?s=128&g=1", "display_name": "mpalencia", "link": "https://stackoverflow.com/users/1191830/mpalencia"}, "is_accepted": false, "score": 19, "last_activity_date": 1488856470, "creation_date": 1488856470, "answer_id": 42639519, "question_id": 41463999, "link": "https://stackoverflow.com/questions/41463999/warning-constant-fixnum-is-deprecated-when-generating-new-model/42639519#42639519", "title": "warning: constant ::Fixnum is deprecated When generating new model", "body": "<p>I fixed mine by updating rails </p>\n\n<pre><code>bundle update rails\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 21, "user_id": 8599900, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/m7cwL.jpg?s=128&g=1", "display_name": "Anyelo Petit", "link": "https://stackoverflow.com/users/8599900/anyelo-petit"}, "is_accepted": false, "score": 0, "last_activity_date": 1600869999, "creation_date": 1600869999, "answer_id": 64029794, "question_id": 41463999, "link": "https://stackoverflow.com/questions/41463999/warning-constant-fixnum-is-deprecated-when-generating-new-model/64029794#64029794", "title": "warning: constant ::Fixnum is deprecated When generating new model", "body": "<p>I fixed this updating <code>therubyracer</code> gem from version '0.12.2' to '0.12.3'</p>\n"}], "owner": {"reputation": 893, "user_id": 7374147, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/28f71808b44f51db48b9ff9613c94869?s=128&d=identicon&r=PG&f=1", "display_name": "user7374147", "link": "https://stackoverflow.com/users/7374147/user7374147"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 92034, "favorite_count": 16, "accepted_answer_id": 41464223, "answer_count": 5, "score": 89, "last_activity_date": 1600869999, "creation_date": 1483533378, "last_edit_date": 1497767570, "question_id": 41463999, "link": "https://stackoverflow.com/questions/41463999/warning-constant-fixnum-is-deprecated-when-generating-new-model", "title": "warning: constant ::Fixnum is deprecated When generating new model", "body": "<p>I've tried to find some solution for this, but I really couldn't find anything related with the errors that is appearing to me when I run the rails command: </p>\n\n<blockquote>\n  <p>rails generate model Book title:string summary:text isbn:string</p>\n</blockquote>\n\n<pre><code>/home/vmu/.rbenv/versions/2.4.0/lib/ruby/gems/2.4.0/gems/activesupport-5.0.1/lib/active_support/xml_mini.rb:51: warning: constant ::Fixnum is deprecated\n/home/vmu/.rbenv/versions/2.4.0/lib/ruby/gems/2.4.0/gems/activesupport-5.0.1/lib/active_support/xml_mini.rb:52: warning: constant ::Bignum is deprecated\n/home/vmu/.rbenv/versions/2.4.0/lib/ruby/gems/2.4.0/gems/activesupport-5.0.1/lib/active_support/core_ext/numeric/conversions.rb:138: warning: constant ::Fixnum is deprecated\nRunning via Spring preloader in process 3579\nExpected string default value for '--jbuilder'; got true (boolean)\n      invoke  active_record\n   identical    db/migrate/20170104114702_create_books.rb\n   identical    app/models/book.rb\n      invoke    test_unit\n   identical      test/models/book_test.rb\n   identical      test/fixtures/books.yml\n</code></pre>\n\n<p>Anyone know what may be causing these errors?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "oauth-2.0", "omniauth-google-oauth2"], "answers": [{"tags": [], "owner": {"reputation": 216, "user_id": 6216878, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mWXmf.png?s=128&g=1", "display_name": "Falknn", "link": "https://stackoverflow.com/users/6216878/falknn"}, "is_accepted": true, "score": 3, "last_activity_date": 1483541265, "creation_date": 1483541265, "answer_id": 41466634, "question_id": 41463685, "link": "https://stackoverflow.com/questions/41463685/redirect-uri-mismatch-login-with-google-using-ruby-on-rails/41466634#41466634", "title": "redirect_uri_mismatch. Login with Google using Ruby on Rails", "body": "<p>Try to downgrade the gem (could be compatibility problem) :  </p>\n\n<pre><code>gem 'omniauth-oauth2', '~&gt; 1.3.1'\n</code></pre>\n"}], "owner": {"reputation": 757, "user_id": 2422930, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/e9d1135a6cae3d8126521e5540c50d5d?s=128&d=identicon&r=PG&f=1", "display_name": "rmn.nish", "link": "https://stackoverflow.com/users/2422930/rmn-nish"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 600, "favorite_count": 1, "accepted_answer_id": 41466634, "answer_count": 1, "score": 0, "last_activity_date": 1483541265, "creation_date": 1483532389, "last_edit_date": 1483532582, "question_id": 41463685, "link": "https://stackoverflow.com/questions/41463685/redirect-uri-mismatch-login-with-google-using-ruby-on-rails", "title": "redirect_uri_mismatch. Login with Google using Ruby on Rails", "body": "<p>I'm trying to add Google Login to my app using <code>omniauth-google-oauth2</code> gem.</p>\n\n<p>I have created the client Id and secret in <code>console.developers.google.com</code> and added redirect_uri as follows.</p>\n\n<p><a href=\"https://i.stack.imgur.com/zYnuz.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/zYnuz.jpg\" alt=\"enter image description here\"></a></p>\n\n<p>routes.rb</p>\n\n<pre><code>get 'auth/:provider/callback', to: 'people#socialmedialogin',:as =&gt; :callback\n</code></pre>\n\n<p>Gemfile</p>\n\n<pre><code>gem 'omniauth-oauth2', '~&gt; 1.4.0'\ngem \"omniauth-google-oauth2\"\n</code></pre>\n\n<p>I am facing the problem in signing in. It is authenticating with Google and fails to redirect. Error is as follows.</p>\n\n<pre><code>redirect_uri_mismatch: { \"error\" : \"redirect_uri_mismatch\" }\n\nExtracted source (around line #113):\n\n  when 400..599\n    error = Error.new(response)\n    raise(error) if opts.fetch(:raise_errors, options[:raise_errors])\n    response.error = error\n    response\n  else\n    .....\n</code></pre>\n"}, {"tags": ["ruby", "rubygems", "jupyter-notebook", "jupyter"], "answers": [{"tags": [], "owner": {"reputation": 766, "user_id": 4017627, "user_type": "registered", "accept_rate": 47, "profile_image": "https://i.stack.imgur.com/pXogL.png?s=128&g=1", "display_name": "mkrinblk", "link": "https://stackoverflow.com/users/4017627/mkrinblk"}, "is_accepted": false, "score": 0, "last_activity_date": 1488074123, "creation_date": 1488074123, "answer_id": 42463842, "question_id": 41463581, "link": "https://stackoverflow.com/questions/41463581/how-to-require-ruby-gems-in-jupyter-notebook/42463842#42463842", "title": "How to require ruby gems in Jupyter notebook?", "body": "<p>I was having issues with this as well. I was running into this problem because I installed iruby with ruby-2.3.0 and the kernel was crashing because I didn't have the required gem rbczmq. long story short I had to install ruby version 2.3.3 and copy my gemset and make sure Iruby had registered the correct version that I was using. </p>\n\n<ol>\n<li>Check what version of ruby you are using <code>rvm list</code> here you need to\ndouble check that you are using the version you think you are you\ncan    change to the correct one with <code>rvm use ruby-x.x.x</code>.</li>\n<li>Once you have decided on a ruby version check what gemset you are using. <code>rvm gemset list</code> will tell you what's available.</li>\n<li>Make sure the gem is in the gem set you are using by using <code>gem list</code>. remember each gemset is brand new when you install a new ruby\nversion they don't automatically get copied over.</li>\n<li>(optional) copy the gemset you had been using <code>rvm gemset copy ruby-2.3.0 ruby-2.3.3</code> or you can install just the gems you want.</li>\n<li>Make sure that Jupyter(Iruby) is using the correct version. Again it could be looking at a different version in which case the gem is in fact not in that gemset. Start up the notebook using <code>iruby notebook</code> and check under the new tab it should have the ruby version you expect it to if it does not you need to quit iruby and run <code>iruby register --force</code> and try it again.</li>\n</ol>\n\n<p>That worked for me hope it helps.</p>\n"}], "owner": {"reputation": 595, "user_id": 5801982, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/efd80ec6b1e9a75daaa5ce61ef05599f?s=128&d=identicon&r=PG&f=1", "display_name": "YSA", "link": "https://stackoverflow.com/users/5801982/ysa"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 470, "favorite_count": 1, "answer_count": 1, "score": 3, "last_activity_date": 1488074123, "creation_date": 1483532041, "last_edit_date": 1483533068, "question_id": 41463581, "link": "https://stackoverflow.com/questions/41463581/how-to-require-ruby-gems-in-jupyter-notebook", "title": "How to require ruby gems in Jupyter notebook?", "body": "<p>I've been looking all over the internet with no answer. Does anyone know how to require ruby gems in Jupyter notebook? I tried <code>require'byebug'</code> and <code>require 'pry'</code> with no use. </p>\n\n<p>I get this error when I try <code>require 'byebug'</code>:</p>\n\n<p>*** No sourcefile available for (pry)</p>\n\n<p>And this error when I try <code>require 'pry'</code>:</p>\n\n<p>From: (pry) @ line 923 Object#divide:</p>\n\n<p>I'm using a local notebook and not the cloud version of course.</p>\n\n<p>EDIT: I even tried setting the absolute path when requiring byebug <code>require '/usr/local/lib/ruby/gems/2.3.0/gems/byebug-9.0.6'</code>.</p>\n"}, {"tags": ["ruby", "matrix", "multidimensional-array", "sketchup"], "comments": [{"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1483534361, "post_id": 41463258, "comment_id": 70134070, "body": "What does &quot;infinity&quot; mean?"}, {"owner": {"reputation": 25, "user_id": 7373737, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56564b196f8ad10beca2138d1c484cf2?s=128&d=identicon&r=PG&f=1", "display_name": "user7373737", "link": "https://stackoverflow.com/users/7373737/user7373737"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1483534600, "post_id": 41463258, "comment_id": 70134225, "body": "it is not a 2x4 but it can be 16x4 or 24x4 ......infinity*4"}], "answers": [{"comments": [{"owner": {"reputation": 25, "user_id": 7373737, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56564b196f8ad10beca2138d1c484cf2?s=128&d=identicon&r=PG&f=1", "display_name": "user7373737", "link": "https://stackoverflow.com/users/7373737/user7373737"}, "edited": false, "score": 0, "creation_date": 1483531785, "post_id": 41463341, "comment_id": 70132384, "body": "thank you Santhosh for the response, but my array is infinity, this works only if you have 2x4"}, {"owner": {"reputation": 24729, "user_id": 2564200, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/a92dfcc9fcac72dabd4b1eefa0b5106e?s=128&d=identicon&r=PG&f=1", "display_name": "Santhosh", "link": "https://stackoverflow.com/users/2564200/santhosh"}, "reply_to_user": {"reputation": 25, "user_id": 7373737, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56564b196f8ad10beca2138d1c484cf2?s=128&d=identicon&r=PG&f=1", "display_name": "user7373737", "link": "https://stackoverflow.com/users/7373737/user7373737"}, "edited": false, "score": 1, "creation_date": 1483531918, "post_id": 41463341, "comment_id": 70132483, "body": "This doesnt just work for 2x4, it works for a finite Array of arrays of same size."}, {"owner": {"reputation": 3273, "user_id": 5021963, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/t7Qsr.png?s=128&g=1", "display_name": "Ed de Almeida", "link": "https://stackoverflow.com/users/5021963/ed-de-almeida"}, "edited": false, "score": 4, "creation_date": 1483532165, "post_id": 41463341, "comment_id": 70132617, "body": "Your array is NOT inifinite. You just can&#39;t store an infinite array in memory. The simple reason is that computer memory is limited and you can&#39;t store an infinite non-infinitesimal quantity in a finite space. <a href=\"http://av1611.com/kjbp/kjv-dictionary/infinite.html\" rel=\"nofollow noreferrer\">av1611.com/kjbp/kjv-dictionary/infinite.html</a>"}], "tags": [], "owner": {"reputation": 24729, "user_id": 2564200, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/a92dfcc9fcac72dabd4b1eefa0b5106e?s=128&d=identicon&r=PG&f=1", "display_name": "Santhosh", "link": "https://stackoverflow.com/users/2564200/santhosh"}, "is_accepted": true, "score": 3, "last_activity_date": 1483531623, "last_edit_date": 1483531623, "creation_date": 1483531301, "answer_id": 41463341, "question_id": 41463258, "link": "https://stackoverflow.com/questions/41463258/how-to-sum-two-dimensional-arrays/41463341#41463341", "title": "How to sum two dimensional arrays", "body": "<p>You can use <a href=\"https://ruby-doc.org/core-2.4.0/Array.html#method-i-transpose\" rel=\"nofollow noreferrer\">Array#transpose</a>, and then sum each individual Array</p>\n\n<pre><code>array = [[12,34,35,21],[10,14,23,17]]\n\narray.transpose.map {|a| a.inject(:+) }\n# =&gt; [22, 48, 58, 38]\n</code></pre>\n\n<p>If you are using Ruby 2.4 or greater, you can use the <a href=\"https://ruby-doc.org/core-2.4.0/Array.html#method-i-sum\" rel=\"nofollow noreferrer\">Array#sum</a> method</p>\n\n<pre><code>array.transpose.map(&amp;:sum)\n# =&gt; [22, 48, 58, 38] \n</code></pre>\n\n<p>For the output to be an Array or Arrays,</p>\n\n<pre><code>array.transpose.map {|a| [a.sum] }\n# =&gt; [[22], [48], [58], [38]] \n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 510, "user_id": 4235198, "user_type": "registered", "accept_rate": 14, "profile_image": "https://www.gravatar.com/avatar/b3c1bdb69d18bf2c9a94628de6b6185d?s=128&d=identicon&r=PG&f=1", "display_name": "Gourav", "link": "https://stackoverflow.com/users/4235198/gourav"}, "is_accepted": false, "score": 1, "last_activity_date": 1483532894, "last_edit_date": 1483532894, "creation_date": 1483532308, "answer_id": 41463661, "question_id": 41463258, "link": "https://stackoverflow.com/questions/41463258/how-to-sum-two-dimensional-arrays/41463661#41463661", "title": "How to sum two dimensional arrays", "body": "<p>I have just written ruby code </p>\n\n<pre><code>h = Hash.new(0)\narr =  [[12, 34, 35, 21], [10, 14, 23, 17], [1, 2, 3]]  #Any size of nested array\narr.each do |a|\n  a.each_with_index do |n,i|\n    h[i]+=n\n  end\nend\nh.values.map{|a| [a]}\n</code></pre>\n\n<p>Hope it helps</p>\n"}], "owner": {"reputation": 25, "user_id": 7373737, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56564b196f8ad10beca2138d1c484cf2?s=128&d=identicon&r=PG&f=1", "display_name": "user7373737", "link": "https://stackoverflow.com/users/7373737/user7373737"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 764, "favorite_count": 0, "accepted_answer_id": 41463341, "answer_count": 2, "score": 0, "last_activity_date": 1483532894, "creation_date": 1483531044, "last_edit_date": 1483531916, "question_id": 41463258, "link": "https://stackoverflow.com/questions/41463258/how-to-sum-two-dimensional-arrays", "title": "How to sum two dimensional arrays", "body": "<p>I have a two dimensional array = <code>[[12,34,35,21],[10,14,23,17],...]</code> infinity. </p>\n\n<p>I would like to do this in ruby; </p>\n\n<pre><code>arr1 = [array[0][0]+array[1][0]+array[n+1][0]...,\narray[0][1]+array[1][1]+array[n+1][1]...,\narray[0][2]+array[1][2]+array[n+1][2]...,\narray[0][3]+array[1][3]+array[n+1][3]...] \n</code></pre>\n\n<p>result (4x4)</p>\n\n<pre><code>arr1 = [[12+10+..],[34+14+..],[35+23..],[21+17+..]]\n</code></pre>\n\n<p>Any idea?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "date"], "comments": [{"owner": {"reputation": 2448, "user_id": 2621389, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/uiNbQ.jpg?s=128&g=1", "display_name": "Bharat soni", "link": "https://stackoverflow.com/users/2621389/bharat-soni"}, "edited": false, "score": 0, "creation_date": 1483529886, "post_id": 41462765, "comment_id": 70131203, "body": "Are you using this dates to make database query ?"}, {"owner": {"reputation": 541, "user_id": 4422123, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/kshyx.png?s=128&g=1", "display_name": "bxorcloud", "link": "https://stackoverflow.com/users/4422123/bxorcloud"}, "reply_to_user": {"reputation": 2448, "user_id": 2621389, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/uiNbQ.jpg?s=128&g=1", "display_name": "Bharat soni", "link": "https://stackoverflow.com/users/2621389/bharat-soni"}, "edited": false, "score": 0, "creation_date": 1483529952, "post_id": 41462765, "comment_id": 70131240, "body": "no Im not using dates to query from database."}, {"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1483530033, "post_id": 41462765, "comment_id": 70131291, "body": "Is the input a string? What format? The question is not clear."}, {"owner": {"reputation": 541, "user_id": 4422123, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/kshyx.png?s=128&g=1", "display_name": "bxorcloud", "link": "https://stackoverflow.com/users/4422123/bxorcloud"}, "edited": false, "score": 0, "creation_date": 1483530156, "post_id": 41462765, "comment_id": 70131370, "body": "the inputed was date. to make sure I get date I use parse.. this was my code. (Date.parse(params[:datestart_stat])..Date.parse(params[:dat&zwnj;&#8203;eend_stat])).to_a"}, {"owner": {"reputation": 19261, "user_id": 4758119, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/F4dJY.jpg?s=128&g=1", "display_name": "Deepak Mahakale", "link": "https://stackoverflow.com/users/4758119/deepak-mahakale"}, "edited": false, "score": 0, "creation_date": 1483530714, "post_id": 41462765, "comment_id": 70131699, "body": "please add the expected output"}, {"owner": {"reputation": 7638, "user_id": 1014251, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/1c4500c91af486c885af8bb84eefd063?s=128&d=identicon&r=PG", "display_name": "ReggieB", "link": "https://stackoverflow.com/users/1014251/reggieb"}, "edited": false, "score": 0, "creation_date": 1483537077, "post_id": 41462765, "comment_id": 70135825, "body": "Are you inputting dates thus: 1st Jan = &quot;1/1/2016&quot;, 2nd Jan = &quot;1/2/2016&quot; or is 2nd Jan &quot;2/1/2016&quot;? This may be a region issue. The first is valid in the UK, and the second is valid in US."}], "answers": [{"comments": [{"owner": {"reputation": 541, "user_id": 4422123, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/kshyx.png?s=128&g=1", "display_name": "bxorcloud", "link": "https://stackoverflow.com/users/4422123/bxorcloud"}, "edited": false, "score": 0, "creation_date": 1483530192, "post_id": 41462952, "comment_id": 70131395, "body": "currently Im using that code. my code was this (Date.parse(params[:datestart_stat])..Date.parse(params[:dat&zwnj;&#8203;eend_stat])).to_a but it returns a whole dates of the month. :( p.s. thankyou for the comment"}, {"owner": {"reputation": 2448, "user_id": 2621389, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/uiNbQ.jpg?s=128&g=1", "display_name": "Bharat soni", "link": "https://stackoverflow.com/users/2621389/bharat-soni"}, "reply_to_user": {"reputation": 541, "user_id": 4422123, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/kshyx.png?s=128&g=1", "display_name": "bxorcloud", "link": "https://stackoverflow.com/users/4422123/bxorcloud"}, "edited": false, "score": 0, "creation_date": 1483530234, "post_id": 41462952, "comment_id": 70131418, "body": "Then whats the issue ?"}, {"owner": {"reputation": 541, "user_id": 4422123, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/kshyx.png?s=128&g=1", "display_name": "bxorcloud", "link": "https://stackoverflow.com/users/4422123/bxorcloud"}, "edited": false, "score": 0, "creation_date": 1483530320, "post_id": 41462952, "comment_id": 70131472, "body": "I want only the dates between the dates I inputed not the whole month. like for example january 1 and january 5. then it should return janaury 1,2,3,4, and janauray 5."}, {"owner": {"reputation": 2448, "user_id": 2621389, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/uiNbQ.jpg?s=128&g=1", "display_name": "Bharat soni", "link": "https://stackoverflow.com/users/2621389/bharat-soni"}, "reply_to_user": {"reputation": 541, "user_id": 4422123, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/kshyx.png?s=128&g=1", "display_name": "bxorcloud", "link": "https://stackoverflow.com/users/4422123/bxorcloud"}, "edited": false, "score": 0, "creation_date": 1483530368, "post_id": 41462952, "comment_id": 70131506, "body": "The above code doing the same. Please share what the values you are getting as inputs values into console."}, {"owner": {"reputation": 541, "user_id": 4422123, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/kshyx.png?s=128&g=1", "display_name": "bxorcloud", "link": "https://stackoverflow.com/users/4422123/bxorcloud"}, "edited": false, "score": 0, "creation_date": 1483530716, "post_id": 41462952, "comment_id": 70131700, "body": "I tried it in the console and the result was right. maybe I have a problem in the inputed dates. thankyou for your help. I will try much harder to find my error. thankyou very much @Bharat soni"}, {"owner": {"reputation": 541, "user_id": 4422123, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/kshyx.png?s=128&g=1", "display_name": "bxorcloud", "link": "https://stackoverflow.com/users/4422123/bxorcloud"}, "edited": false, "score": 0, "creation_date": 1483531327, "post_id": 41462952, "comment_id": 70132081, "body": "Thankyou @Bharat I was able to get an accurate result now. the problem was my parsing. I change Date.parse to Date.strptime and now it work like charm. thankyou"}], "tags": [], "owner": {"reputation": 2448, "user_id": 2621389, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/uiNbQ.jpg?s=128&g=1", "display_name": "Bharat soni", "link": "https://stackoverflow.com/users/2621389/bharat-soni"}, "is_accepted": false, "score": 5, "last_activity_date": 1483530088, "creation_date": 1483530088, "answer_id": 41462952, "question_id": 41462765, "link": "https://stackoverflow.com/questions/41462765/how-to-get-all-the-dates-between-two-input-dates-in-rails/41462952#41462952", "title": "How to get all the DATES between two input DATES In Rails", "body": "<pre><code>start_date = Date.parse('date start')\nend_date = Date.parse('date end')\n(start..endd).to_a\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 541, "user_id": 4422123, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/kshyx.png?s=128&g=1", "display_name": "bxorcloud", "link": "https://stackoverflow.com/users/4422123/bxorcloud"}, "is_accepted": false, "score": 0, "last_activity_date": 1483532212, "last_edit_date": 1483532212, "creation_date": 1483531470, "answer_id": 41463402, "question_id": 41462765, "link": "https://stackoverflow.com/questions/41462765/how-to-get-all-the-dates-between-two-input-dates-in-rails/41463402#41463402", "title": "How to get all the DATES between two input DATES In Rails", "body": "<p>Update! I was able to fix my mistake now. I just change the</p>\n\n<pre><code>Date.parse(params[:datestart_stat])\n# to \nDate.strptime(params[:datestart_stat], '%m/%d/%Y')\n</code></pre>\n\n<p>thank you guys.</p>\n"}], "owner": {"reputation": 541, "user_id": 4422123, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/kshyx.png?s=128&g=1", "display_name": "bxorcloud", "link": "https://stackoverflow.com/users/4422123/bxorcloud"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1640, "favorite_count": 0, "answer_count": 2, "score": -6, "last_activity_date": 1512469974, "creation_date": 1483529457, "last_edit_date": 1512469974, "question_id": 41462765, "link": "https://stackoverflow.com/questions/41462765/how-to-get-all-the-dates-between-two-input-dates-in-rails", "title": "How to get all the DATES between two input DATES In Rails", "body": "<p>The user inputs the starting date and the end date. I want to get the dates between these two input dates.</p>\n\n<p>I tried this:</p>\n\n<pre><code>(datestart..dateend).to_a\n</code></pre>\n\n<p>but it returns the whole month, and when I choose from the previous year, it gives an error <code>ArgumentError (invalid date):</code>.</p>\n\n<p>This is the example return when I choose Jan. 1 2017 and Jan. 2 2017 - the result was whole month and an inaccurate dates.</p>\n\n<pre><code>[Tue, 12 Jan 2016, Wed, 13 Jan 2016, Thu, 14 Jan 2016, Fri, 15 Jan 2016, Sat, 16 Jan 2016, Sun, 17 Jan 2016, Mon, 18 Jan 2016, Tue, 19 Jan 2016, Wed, 20 Jan 2016, Thu, 21 Jan 2016, Fri, 22 Jan 2016, Sat, 23 Jan 2016, Sun, 24 Jan 2016, Mon, 25 Jan 2016, Tue, 26 Jan 2016, Wed, 27 Jan 2016, Thu, 28 Jan 2016, Fri, 29 Jan 2016, Sat, 30 Jan 2016, Sun, 31 Jan 2016, Mon, 01 Feb 2016, Tue, 02 Feb 2016, Wed, 03 Feb 2016, Thu, 04 Feb 2016, Fri, 05 Feb 2016, Sat, 06 Feb 2016, Sun, 07 Feb 2016, Mon, 08 Feb 2016, Tue, 09 Feb 2016, Wed, 10 Feb 2016, Thu, 11 Feb 2016, Fri, 12 Feb 2016]\n</code></pre>\n\n<p>Update! I Fix it by using </p>\n\n<pre><code>Date.strptime(params[:datestart_stat], '%m/%d/%Y')\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "uglifier", "ruby-2.4"], "comments": [{"owner": {"reputation": 2448, "user_id": 2621389, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/uiNbQ.jpg?s=128&g=1", "display_name": "Bharat soni", "link": "https://stackoverflow.com/users/2621389/bharat-soni"}, "edited": false, "score": 0, "creation_date": 1483527110, "post_id": 41461977, "comment_id": 70129388, "body": "Run command bundle update and then try again."}, {"owner": {"reputation": 7768, "user_id": 1213273, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/cf372446eb8bcca32373052e4dda2164?s=128&d=identicon&r=PG", "display_name": "Severin", "link": "https://stackoverflow.com/users/1213273/severin"}, "reply_to_user": {"reputation": 2448, "user_id": 2621389, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/uiNbQ.jpg?s=128&g=1", "display_name": "Bharat soni", "link": "https://stackoverflow.com/users/2621389/bharat-soni"}, "edited": false, "score": 0, "creation_date": 1483527432, "post_id": 41461977, "comment_id": 70129626, "body": "@Bharatsoni That was the first thing I&#39;ve tried."}, {"owner": {"reputation": 5471, "user_id": 6019903, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/e7h7I.png?s=128&g=1", "display_name": "Brad", "link": "https://stackoverflow.com/users/6019903/brad"}, "edited": false, "score": 0, "creation_date": 1483527434, "post_id": 41461977, "comment_id": 70129629, "body": "what OS are you using out of curiosity. I had issues trying to get this gem running on windows10"}, {"owner": {"reputation": 7768, "user_id": 1213273, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/cf372446eb8bcca32373052e4dda2164?s=128&d=identicon&r=PG", "display_name": "Severin", "link": "https://stackoverflow.com/users/1213273/severin"}, "reply_to_user": {"reputation": 5471, "user_id": 6019903, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/e7h7I.png?s=128&g=1", "display_name": "Brad", "link": "https://stackoverflow.com/users/6019903/brad"}, "edited": false, "score": 0, "creation_date": 1483527455, "post_id": 41461977, "comment_id": 70129648, "body": "@Brad Running Ubuntu 16.10"}, {"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1483527610, "post_id": 41461977, "comment_id": 70129734, "body": "Can you please post [all relevant parts of] the <code>Gemfile.lock</code> (In particular, what version of <code>uglifier</code>?), and the full backtrace if there is one?"}, {"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1483527697, "post_id": 41461977, "comment_id": 70129812, "body": "Actually never mind, see my answer below..."}, {"owner": {"reputation": 45322, "user_id": 421705, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/581b1760881c962648f99d6040d41829?s=128&d=identicon&r=PG", "display_name": "Holger Just", "link": "https://stackoverflow.com/users/421705/holger-just"}, "edited": false, "score": 0, "creation_date": 1483541364, "post_id": 41461977, "comment_id": 70138793, "body": "Possible duplicate of <a href=\"http://stackoverflow.com/questions/41426138/ruby-on-rails-web-application-could-not-be-started-because-of-uglifier\">Ruby-on-rails web application could not be started because of &#39;uglifier&#39;</a>"}], "answers": [{"tags": [], "owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "is_accepted": true, "score": 25, "last_activity_date": 1483631377, "last_edit_date": 1483631377, "creation_date": 1483527926, "answer_id": 41462301, "question_id": 41461977, "link": "https://stackoverflow.com/questions/41461977/after-ruby-2-4-upgrade-error-while-trying-to-load-the-gem-uglifier-bundler/41462301#41462301", "title": "After Ruby 2.4 upgrade - error while trying to load the gem &#39;uglifier&#39; (Bundler::GemRequireError)", "body": "<p>This is an open issue on the <code>uglifier</code> repository: <a href=\"https://github.com/lautis/uglifier/issues/105\" rel=\"noreferrer\">Uglifier doesn't load with Ruby 2.4.0 using The Ruby Racer JS runtime</a>.</p>\n\n<p>It was caused by the <a href=\"https://bugs.ruby-lang.org/issues/12005\" rel=\"noreferrer\">unification of <code>Fixnum</code> and <code>Bignum</code> into <code>Integer</code></a>, in Ruby 2.4.0. <a href=\"https://github.com/cowboyd/therubyracer/commit/f2ccbad7e9e3899e8743624d9b1436500100420a\" rel=\"noreferrer\">Here</a> is the pull request that resolves the issue, which actually lies in <code>therubyracer</code>, not <code>uglifier</code>.</p>\n\n<p>For now, as a temporary fix, you could configure your <code>Gemfile</code> to use the master branch of the repo:</p>\n\n<pre><code>gem 'therubyracer', git: 'https://github.com/cowboyd/therubyracer.git'\n</code></pre>\n\n<p><strong>Update</strong>: <code>therubyracer</code> version <code>0.12.3</code> has now been <a href=\"https://rubygems.org/gems/therubyracer/versions/0.12.3\" rel=\"noreferrer\">released</a>, which includes the above fix for ruby 2.4 support.</p>\n"}], "owner": {"reputation": 7768, "user_id": 1213273, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/cf372446eb8bcca32373052e4dda2164?s=128&d=identicon&r=PG", "display_name": "Severin", "link": "https://stackoverflow.com/users/1213273/severin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 7790, "favorite_count": 3, "accepted_answer_id": 41462301, "answer_count": 1, "score": 18, "last_activity_date": 1488903088, "creation_date": 1483526909, "last_edit_date": 1488903088, "question_id": 41461977, "link": "https://stackoverflow.com/questions/41461977/after-ruby-2-4-upgrade-error-while-trying-to-load-the-gem-uglifier-bundler", "title": "After Ruby 2.4 upgrade - error while trying to load the gem &#39;uglifier&#39; (Bundler::GemRequireError)", "body": "<p>I've just upgraded my App to use Ruby 2.4.0 without any errors during the bundling process. When I try to start my server, however, I get the following error:</p>\n\n<pre><code>There was an error while trying to load the gem 'uglifier'. (Bundler::GemRequireError)\nGem Load Error is: wrong argument type Class (expected Module)\n</code></pre>\n\n<p>I found in other answers on this site that you need to add <code>gem 'therubyracer'</code> to your Gemfile, but I already have had that since the creation of my App.</p>\n\n<p>The latest version of NodeJS is also installed on my machine.</p>\n\n<p>Has anyone else encountered this error and knows how to solve it?</p>\n\n<p>uglifier configuration in Gemfile: <code>gem 'uglifier', '~&gt; 3.0.4'</code></p>\n\n<p>Full Stack Trace:</p>\n\n<pre><code>/home/severin/.rvm/gems/ruby-2.4.0/gems/activesupport-5.0.1/lib/active_support/xml_mini.rb:51: warning: constant ::Fixnum is deprecated\n/home/severin/.rvm/gems/ruby-2.4.0/gems/activesupport-5.0.1/lib/active_support/xml_mini.rb:52: warning: constant ::Bignum is deprecated\n/home/severin/.rvm/gems/ruby-2.4.0/gems/therubyracer-0.12.2/lib/v8/conversion.rb:21: warning: constant ::Fixnum is deprecated\n/home/severin/.rvm/gems/ruby-2.4.0/gems/bundler-1.13.7/lib/bundler/runtime.rb:94:in `rescue in block (2 levels) in require': There was an error while trying to load the gem 'uglifier'. (Bundler::GemRequireError)\nGem Load Error is: wrong argument type Class (expected Module)\nBacktrace for gem load error is:\n/home/severin/.rvm/gems/ruby-2.4.0/gems/therubyracer-0.12.2/lib/v8/conversion.rb:23:in `include'\n/home/severin/.rvm/gems/ruby-2.4.0/gems/therubyracer-0.12.2/lib/v8/conversion.rb:23:in `block (2 levels) in &lt;top (required)&gt;'\n/home/severin/.rvm/gems/ruby-2.4.0/gems/therubyracer-0.12.2/lib/v8/conversion.rb:22:in `class_eval'\n/home/severin/.rvm/gems/ruby-2.4.0/gems/therubyracer-0.12.2/lib/v8/conversion.rb:22:in `block in &lt;top (required)&gt;'\n/home/severin/.rvm/gems/ruby-2.4.0/gems/therubyracer-0.12.2/lib/v8/conversion.rb:21:in `each'\n/home/severin/.rvm/gems/ruby-2.4.0/gems/therubyracer-0.12.2/lib/v8/conversion.rb:21:in `&lt;top (required)&gt;'\n/home/severin/.rvm/gems/ruby-2.4.0/gems/therubyracer-0.12.2/lib/v8.rb:22:in `require'\n/home/severin/.rvm/gems/ruby-2.4.0/gems/therubyracer-0.12.2/lib/v8.rb:22:in `&lt;top (required)&gt;'\n/home/severin/.rvm/gems/ruby-2.4.0/gems/execjs-2.7.0/lib/execjs/ruby_racer_runtime.rb:108:in `require'\n/home/severin/.rvm/gems/ruby-2.4.0/gems/execjs-2.7.0/lib/execjs/ruby_racer_runtime.rb:108:in `available?'\n/home/severin/.rvm/gems/ruby-2.4.0/gems/execjs-2.7.0/lib/execjs/runtimes.rb:63:in `each'\n/home/severin/.rvm/gems/ruby-2.4.0/gems/execjs-2.7.0/lib/execjs/runtimes.rb:63:in `find'\n/home/severin/.rvm/gems/ruby-2.4.0/gems/execjs-2.7.0/lib/execjs/runtimes.rb:63:in `best_available'\n/home/severin/.rvm/gems/ruby-2.4.0/gems/execjs-2.7.0/lib/execjs/runtimes.rb:57:in `autodetect'\n/home/severin/.rvm/gems/ruby-2.4.0/gems/execjs-2.7.0/lib/execjs.rb:5:in `&lt;module:ExecJS&gt;'\n/home/severin/.rvm/gems/ruby-2.4.0/gems/execjs-2.7.0/lib/execjs.rb:4:in `&lt;top (required)&gt;'\n/home/severin/.rvm/gems/ruby-2.4.0/gems/uglifier-3.0.4/lib/uglifier.rb:5:in `require'\n/home/severin/.rvm/gems/ruby-2.4.0/gems/uglifier-3.0.4/lib/uglifier.rb:5:in `&lt;top (required)&gt;'\n/home/severin/.rvm/gems/ruby-2.4.0/gems/bundler-1.13.7/lib/bundler/runtime.rb:91:in `require'\n/home/severin/.rvm/gems/ruby-2.4.0/gems/bundler-1.13.7/lib/bundler/runtime.rb:91:in `block (2 levels) in require'\n/home/severin/.rvm/gems/ruby-2.4.0/gems/bundler-1.13.7/lib/bundler/runtime.rb:86:in `each'\n/home/severin/.rvm/gems/ruby-2.4.0/gems/bundler-1.13.7/lib/bundler/runtime.rb:86:in `block in require'\n/home/severin/.rvm/gems/ruby-2.4.0/gems/bundler-1.13.7/lib/bundler/runtime.rb:75:in `each'\n/home/severin/.rvm/gems/ruby-2.4.0/gems/bundler-1.13.7/lib/bundler/runtime.rb:75:in `require'\n/home/severin/.rvm/gems/ruby-2.4.0/gems/bundler-1.13.7/lib/bundler.rb:106:in `require'\n/home/config/application.rb:7:in `&lt;top (required)&gt;'\n/home/severin/.rvm/gems/ruby-2.4.0/gems/railties-5.0.1/lib/rails/commands/commands_tasks.rb:88:in `require'\n/home/severin/.rvm/gems/ruby-2.4.0/gems/railties-5.0.1/lib/rails/commands/commands_tasks.rb:88:in `block in server'\n/home/severin/.rvm/gems/ruby-2.4.0/gems/railties-5.0.1/lib/rails/commands/commands_tasks.rb:85:in `tap'\n/home/severin/.rvm/gems/ruby-2.4.0/gems/railties-5.0.1/lib/rails/commands/commands_tasks.rb:85:in `server'\n/home/severin/.rvm/gems/ruby-2.4.0/gems/railties-5.0.1/lib/rails/commands/commands_tasks.rb:49:in `run_command!'\n/home/severin/.rvm/gems/ruby-2.4.0/gems/railties-5.0.1/lib/rails/commands.rb:18:in `&lt;top (required)&gt;'\n/home/bin/rails:9:in `require'\n/home/bin/rails:9:in `&lt;top (required)&gt;'\n/home/severin/.rvm/gems/ruby-2.4.0/gems/spring-2.0.0/lib/spring/client/rails.rb:28:in `load'\n/home/severin/.rvm/gems/ruby-2.4.0/gems/spring-2.0.0/lib/spring/client/rails.rb:28:in `call'\n/home/severin/.rvm/gems/ruby-2.4.0/gems/spring-2.0.0/lib/spring/client/command.rb:7:in `call'\n/home/severin/.rvm/gems/ruby-2.4.0/gems/spring-2.0.0/lib/spring/client.rb:30:in `run'\n/home/severin/.rvm/gems/ruby-2.4.0/gems/spring-2.0.0/bin/spring:49:in `&lt;top (required)&gt;'\n/home/severin/.rvm/gems/ruby-2.4.0/gems/spring-2.0.0/lib/spring/binstub.rb:31:in `load'\n/home/severin/.rvm/gems/ruby-2.4.0/gems/spring-2.0.0/lib/spring/binstub.rb:31:in `&lt;top (required)&gt;'\n/home/severin/bin/spring:13:in `require'\n/home/severin/bin/spring:13:in `&lt;top (required)&gt;'\nbin/rails:3:in `load'\nbin/rails:3:in `&lt;main&gt;'\nBundler Error Backtrace:\n    from /home/severin/.rvm/gems/ruby-2.4.0/gems/bundler-1.13.7/lib/bundler/runtime.rb:90:in `block (2 levels) in require'\n    from /home/severin/.rvm/gems/ruby-2.4.0/gems/bundler-1.13.7/lib/bundler/runtime.rb:86:in `each'\n    from /home/severin/.rvm/gems/ruby-2.4.0/gems/bundler-1.13.7/lib/bundler/runtime.rb:86:in `block in require'\n    from /home/severin/.rvm/gems/ruby-2.4.0/gems/bundler-1.13.7/lib/bundler/runtime.rb:75:in `each'\n    from /home/severin/.rvm/gems/ruby-2.4.0/gems/bundler-1.13.7/lib/bundler/runtime.rb:75:in `require'\n    from /home/severin/.rvm/gems/ruby-2.4.0/gems/bundler-1.13.7/lib/bundler.rb:106:in `require'\n    from /home/severin/config/application.rb:7:in `&lt;top (required)&gt;'\n    from /home/severin/.rvm/gems/ruby-2.4.0/gems/railties-5.0.1/lib/rails/commands/commands_tasks.rb:88:in `require'\n    from /home/severin/.rvm/gems/ruby-2.4.0/gems/railties-5.0.1/lib/rails/commands/commands_tasks.rb:88:in `block in server'\n    from /home/severin/.rvm/gems/ruby-2.4.0/gems/railties-5.0.1/lib/rails/commands/commands_tasks.rb:85:in `tap'\n    from /home/severin/.rvm/gems/ruby-2.4.0/gems/railties-5.0.1/lib/rails/commands/commands_tasks.rb:85:in `server'\n    from /home/severin/.rvm/gems/ruby-2.4.0/gems/railties-5.0.1/lib/rails/commands/commands_tasks.rb:49:in `run_command!'\n    from /home/severin/.rvm/gems/ruby-2.4.0/gems/railties-5.0.1/lib/rails/commands.rb:18:in `&lt;top (required)&gt;'\n    from /home/severin/bin/rails:9:in `require'\n    from /home/severin/bin/rails:9:in `&lt;top (required)&gt;'\n    from /home/severin/.rvm/gems/ruby-2.4.0/gems/spring-2.0.0/lib/spring/client/rails.rb:28:in `load'\n    from /home/severin/.rvm/gems/ruby-2.4.0/gems/spring-2.0.0/lib/spring/client/rails.rb:28:in `call'\n    from /home/severin/.rvm/gems/ruby-2.4.0/gems/spring-2.0.0/lib/spring/client/command.rb:7:in `call'\n    from /home/severin/.rvm/gems/ruby-2.4.0/gems/spring-2.0.0/lib/spring/client.rb:30:in `run'\n    from /home/severin/.rvm/gems/ruby-2.4.0/gems/spring-2.0.0/bin/spring:49:in `&lt;top (required)&gt;'\n    from /home/severin/.rvm/gems/ruby-2.4.0/gems/spring-2.0.0/lib/spring/binstub.rb:31:in `load'\n    from /home/severin/.rvm/gems/ruby-2.4.0/gems/spring-2.0.0/lib/spring/binstub.rb:31:in `&lt;top (required)&gt;'\n    from /home/severin/bin/spring:13:in `require'\n    from /home/severin/bin/spring:13:in `&lt;top (required)&gt;'\n    from bin/rails:3:in `load'\n    from bin/rails:3:in `&lt;main&gt;'\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "associations", "arel"], "comments": [{"owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "edited": false, "score": 0, "creation_date": 1483527927, "post_id": 41461285, "comment_id": 70129979, "body": "Why do you want to use <code>arel</code> and a Rails query with <code>joins</code> and <code>where</code>?"}, {"owner": {"reputation": 2123, "user_id": 5374999, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/4YXdN.jpg?s=128&g=1", "display_name": "Afsanefda", "link": "https://stackoverflow.com/users/5374999/afsanefda"}, "reply_to_user": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "edited": false, "score": 0, "creation_date": 1483529830, "post_id": 41461285, "comment_id": 70131172, "body": "@spickermann cause I have a search api and I store all the queries in a variable together then I find the whole search result.by the way I want to search in the whole model (table) not a specific record. Do you have any ideas ?"}, {"owner": {"reputation": 7638, "user_id": 1014251, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/1c4500c91af486c885af8bb84eefd063?s=128&d=identicon&r=PG", "display_name": "ReggieB", "link": "https://stackoverflow.com/users/1014251/reggieb"}, "edited": false, "score": 0, "creation_date": 1483531131, "post_id": 41461285, "comment_id": 70131959, "body": "If it is &quot;One to many&quot; why are you using <code>has_and_belongs_to_many</code>? That for many to many relationships."}, {"owner": {"reputation": 2123, "user_id": 5374999, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/4YXdN.jpg?s=128&g=1", "display_name": "Afsanefda", "link": "https://stackoverflow.com/users/5374999/afsanefda"}, "edited": false, "score": 0, "creation_date": 1483532922, "post_id": 41461285, "comment_id": 70133110, "body": "Oh God I&#39;ve made a mistake Your so so right its many to many relation."}], "answers": [{"comments": [{"owner": {"reputation": 2123, "user_id": 5374999, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/4YXdN.jpg?s=128&g=1", "display_name": "Afsanefda", "link": "https://stackoverflow.com/users/5374999/afsanefda"}, "edited": false, "score": 0, "creation_date": 1483533224, "post_id": 41463436, "comment_id": 70133330, "body": "I have tried this it doesn&#39;t make sense. NameError: uninitialized constant LetterTrackingsUsers (this is my jointable name)"}, {"owner": {"reputation": 1225, "user_id": 4933185, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/05bb3fe5a0c25a3bcdab47ab311e747c?s=128&d=identicon&r=PG&f=1", "display_name": "Parth Modi", "link": "https://stackoverflow.com/users/4933185/parth-modi"}, "reply_to_user": {"reputation": 2123, "user_id": 5374999, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/4YXdN.jpg?s=128&g=1", "display_name": "Afsanefda", "link": "https://stackoverflow.com/users/5374999/afsanefda"}, "edited": false, "score": 0, "creation_date": 1483533886, "post_id": 41463436, "comment_id": 70133749, "body": "LetterTrackingsUsers should be model name. If you haven&#39;t created model for join table, then alternatively you can use Arel::Table.new(:name_of_join_table)"}, {"owner": {"reputation": 2123, "user_id": 5374999, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/4YXdN.jpg?s=128&g=1", "display_name": "Afsanefda", "link": "https://stackoverflow.com/users/5374999/afsanefda"}, "edited": false, "score": 0, "creation_date": 1483731376, "post_id": 41463436, "comment_id": 70232042, "body": "Still have the issue although I managed to make arel table for my join table"}, {"owner": {"reputation": 2123, "user_id": 5374999, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/4YXdN.jpg?s=128&g=1", "display_name": "Afsanefda", "link": "https://stackoverflow.com/users/5374999/afsanefda"}, "edited": false, "score": 0, "creation_date": 1483796021, "post_id": 41463436, "comment_id": 70249750, "body": "this is the error ActiveRecord::StatementInvalid: SQLite3::SQLException: no such column: letter_trackings_users.assignee_id: SELECT &quot;letter_trackings&quot;.* FROM &quot;letter_trackings&quot; WHERE &quot;letter_trackings_users&quot;.&quot;assignee_id&quot; IN (5213)"}, {"owner": {"reputation": 1225, "user_id": 4933185, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/05bb3fe5a0c25a3bcdab47ab311e747c?s=128&d=identicon&r=PG&f=1", "display_name": "Parth Modi", "link": "https://stackoverflow.com/users/4933185/parth-modi"}, "reply_to_user": {"reputation": 2123, "user_id": 5374999, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/4YXdN.jpg?s=128&g=1", "display_name": "Afsanefda", "link": "https://stackoverflow.com/users/5374999/afsanefda"}, "edited": false, "score": 0, "creation_date": 1483811857, "post_id": 41463436, "comment_id": 70255039, "body": "you might have used user_id instead of assignee_id or some other name?"}], "tags": [], "owner": {"reputation": 1225, "user_id": 4933185, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/05bb3fe5a0c25a3bcdab47ab311e747c?s=128&d=identicon&r=PG&f=1", "display_name": "Parth Modi", "link": "https://stackoverflow.com/users/4933185/parth-modi"}, "is_accepted": true, "score": 1, "last_activity_date": 1483531562, "creation_date": 1483531562, "answer_id": 41463436, "question_id": 41461285, "link": "https://stackoverflow.com/questions/41461285/query-for-associated-fields-many-to-many-realtion-with-arel/41463436#41463436", "title": "query for associated fields (many to many realtion) with arel", "body": "<p>You need to grab join table used to create HABTM association and search assignee_id or user_id for querying assignees in letter tracking. You can take following snippet for reference. I assumed that join table was LetterTrackingUsers.</p>\n\n<pre><code>letter_trackings = LetterTracking.arel_table\nletter_trackings_users = LetterTrackingUsers.arel_table # here use HABTM table used by you for joining users and letter_trackings\n\nquery = letter_trackings_users[:user_id].in(@assignees_ids)  \nor \nquery = letter_trackings_users[:assignee_id].in(@assignees_ids)\n\n@letter_trackings = LetterTracking.where(letters_query)\n</code></pre>\n"}], "owner": {"reputation": 2123, "user_id": 5374999, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/4YXdN.jpg?s=128&g=1", "display_name": "Afsanefda", "link": "https://stackoverflow.com/users/5374999/afsanefda"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 220, "favorite_count": 0, "accepted_answer_id": 41463436, "answer_count": 1, "score": 0, "last_activity_date": 1483533074, "creation_date": 1483524864, "last_edit_date": 1483533074, "question_id": 41461285, "link": "https://stackoverflow.com/questions/41461285/query-for-associated-fields-many-to-many-realtion-with-arel", "title": "query for associated fields (many to many realtion) with arel", "body": "<p>I have a many to many relation like this :</p>\n\n<pre><code>class User &lt; ApplicationRecord\n    has_and_belongs_to_many :letter_trackings\nend\n</code></pre>\n\n<p>and </p>\n\n<pre><code>class LetterTracking &lt; ApplicationRecord\n    has_and_belongs_to_many :assignees, class_name: \"User\"\nend\n</code></pre>\n\n<p>I want to use arel to search in assignees like this :</p>\n\n<pre><code>users = User.arel_table\nletter_trackings = LetterTracking.arel_table\n\n@users = User.where(users[:name].matches(\"%#{Afsane Fadaei}%\"))\n@assignees_ids = @users.pluck(:id).uniq\nletters_query = letter_trackings[:assignees].in(@assignees_ids)\n@letter_trackings = LetterTracking.where(letters_query)\n</code></pre>\n\n<p>but it returns this error:</p>\n\n<pre><code>ActionView::Template::Error (SQLite3::SQLException: no such column: letter_trackings.assignees: SELECT \"letter_trackings\".* FROM \"letter_trackings\" WHERE \"letter_trackings\".\"assignees\" IN (1189)):\n</code></pre>\n\n<p>That's because I don't know how to query <strong>associated</strong> (many to many) column in <strong>arel</strong>.</p>\n\n<p>Any Ideas?</p>\n"}, {"tags": ["ruby", "redis"], "answers": [{"comments": [{"owner": {"reputation": 684, "user_id": 6607918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rL2uz.png?s=128&g=1", "display_name": "Stuart", "link": "https://stackoverflow.com/users/6607918/stuart"}, "edited": false, "score": 0, "creation_date": 1483526007, "post_id": 41461574, "comment_id": 70128658, "body": "Hey @Razvan, thanks for the response.  That&#39;s pretty much the same conclusion I had come to, but really didn&#39;t want to have to change keys, they&#39;re laid out pretty specifically at this point in time.  Well, at least now I know my options!"}], "tags": [], "owner": {"reputation": 175, "user_id": 1324272, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7e440d0b755563bdd155413631e400b6?s=128&d=identicon&r=PG", "display_name": "Razvan Pavel", "link": "https://stackoverflow.com/users/1324272/razvan-pavel"}, "is_accepted": true, "score": 2, "last_activity_date": 1483525708, "creation_date": 1483525708, "answer_id": 41461574, "question_id": 41460541, "link": "https://stackoverflow.com/questions/41460541/redis-get-all-keys-from-queue-which-have-a-value-equal-to-some-criteria/41461574#41461574", "title": "Redis: Get all keys from queue which have a value equal to some criteria", "body": "<p>You cannot do it without iterating through all keys, because redis supports only key fetching. You can reduce that complexity if you happen to know a pattern for the keys where you have to look, even in this case redis will fetch all the keys in background(with some optimizations, because it will fetch them in batches <a href=\"http://www.rubydoc.info/github/redis/redis-rb/Redis:scan\" rel=\"nofollow noreferrer\">http://www.rubydoc.info/github/redis/redis-rb/Redis:scan</a>). Something like:</p>\n\n<pre><code>$redis.scan_each(match: \"foo*\").to_a\n</code></pre>\n\n<p>You can find how to write your own pattern here <a href=\"https://redis.io/commands/KEYS\" rel=\"nofollow noreferrer\">https://redis.io/commands/KEYS</a> </p>\n\n<p>However, if you can control what values the keys take you can make them take a value with a little hint to help you in this search, like:</p>\n\n<ul>\n<li>let's make each key with this form \"foo#{your_number}:#{success_bool}\"</li>\n<li>when search use this pattern \"foo*:1\"</li>\n</ul>\n"}, {"tags": [], "owner": {"reputation": 11603, "user_id": 234593, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/8e2ee1b00d372ad8f6ed5e87385ffef5?s=128&d=identicon&r=PG", "display_name": "Kache", "link": "https://stackoverflow.com/users/234593/kache"}, "is_accepted": false, "score": 1, "last_activity_date": 1483606343, "creation_date": 1483606343, "answer_id": 41480662, "question_id": 41460541, "link": "https://stackoverflow.com/questions/41460541/redis-get-all-keys-from-queue-which-have-a-value-equal-to-some-criteria/41480662#41480662", "title": "Redis: Get all keys from queue which have a value equal to some criteria", "body": "<p>To do this efficiently only using Redis, you would have to keep an updated, \"Redis-queryable\", SET or LIST of success/completed keys.</p>\n\n<p>At a fundamental level, it sounds like what you really have here is a job queue (and a second job queue for the successful first jobs). Unless you specifically want to implement this on your own, have you looked into job queue implementations?</p>\n"}], "owner": {"reputation": 684, "user_id": 6607918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rL2uz.png?s=128&g=1", "display_name": "Stuart", "link": "https://stackoverflow.com/users/6607918/stuart"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1957, "favorite_count": 0, "accepted_answer_id": 41461574, "answer_count": 2, "score": 0, "last_activity_date": 1483606343, "creation_date": 1483522730, "question_id": 41460541, "link": "https://stackoverflow.com/questions/41460541/redis-get-all-keys-from-queue-which-have-a-value-equal-to-some-criteria", "title": "Redis: Get all keys from queue which have a value equal to some criteria", "body": "<p>I have a bunch of jobs I store on redis, each identified by a special key, with a hash as their value that contains some information. These jobs get picked up, computed, and once they are done, they have a <code>success</code> field that is set to <code>true</code> if the computation was finished successfully.  I want to populate a list of all the keys that have the <code>success</code> key in their value hash set to <code>true</code>.</p>\n\n<p>e.g. redis storage:</p>\n\n<pre><code>foo_key_1 =&gt; {bar_hash_key: bar_value, baz_hash_key: baz_value, success: true}\nfoo_key_2 =&gt; {bar_hash_key: bar_value, baz_hash_key: baz_value, success: false}\n</code></pre>\n\n<p>With the example above, I'd like a simple, efficient way of scanning through all keys in redis and their success field, and end up with <code>[foo_key_1]</code> as a result.</p>\n\n<p>Currently my approach is as follows (in ruby pseudocode):</p>\n\n<pre><code># redis is a connection to my redis server\nall_keys = redis.keys                      # list of all keys in redis\nfor i in all_keys do                       # iterate through all keys in redis \n  if (redis.hgetall i)[\"success\"] == true  # if that key has success = true attrib\n    completed_keys.append(i)               # append that key to a new list\n  end\nend\n</code></pre>\n\n<p>The problem, as you might guess, is I have <em>a lot</em> of keys on redis, and this, albeit O(N) in performance gets fairly sluggish in terms of performance, due to its iterative nature.  I have pored through the redis docs/commands but nothing leapt out at me as a potential candidate to solve this problem <em>more efficiently</em>, I am no redis guru, but it seems fairly straightforward, you put stuff in and take stuff out.  Are there any possible vectorized operations I might have overlooked?</p>\n\n<p>Many thanks.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "solr", "bundle"], "owner": {"reputation": 2073, "user_id": 2615428, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/50118dc915d8e41676b9a773217f6cab?s=128&d=identicon&r=PG", "display_name": "Suraj", "link": "https://stackoverflow.com/users/2615428/suraj"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 40, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1483522460, "creation_date": 1483522460, "question_id": 41460440, "link": "https://stackoverflow.com/questions/41460440/bundle-install-gives-error-for-sufia-which-is-based-on-project-hydra", "title": "bundle install gives error for sufia which is based on project hydra", "body": "<p>I am trying to clone an app which is running with <code>Sufia</code> as a font-end based on <code>project hydra</code>.</p>\n\n<p>I have installed all the requirements such as <code>solr</code> and <code>fcrepo_wrapper</code>.</p>\n\n<p>When I generate a test app and when I am doing bundle install I get <a href=\"http://pastebin.com/8qwDVpwv\" rel=\"nofollow noreferrer\">this</a> error.</p>\n\n<p>I am using <code>ruby-2.3.0</code> and <code>rails-5.0.1</code>.</p>\n\n<p>Anyone else faced this issue with Project-hydra? Please suggest.</p>\n"}, {"tags": ["ruby", "sqlite", "sqlite3-ruby"], "answers": [{"tags": [], "owner": {"reputation": 5449, "user_id": 681520, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/701baebf68d1d7faa9f9def6a24fe356?s=128&d=identicon&r=PG", "display_name": "Kimmo Lehto", "link": "https://stackoverflow.com/users/681520/kimmo-lehto"}, "is_accepted": true, "score": 2, "last_activity_date": 1518160869, "last_edit_date": 1518160869, "creation_date": 1483522577, "answer_id": 41460476, "question_id": 41460280, "link": "https://stackoverflow.com/questions/41460280/how-to-create-a-new-sqlite3-database-using-ruby/41460476#41460476", "title": "How to create a new SQLite3 database using Ruby?", "body": "<p>The file gets created if it doesn't exist.</p>\n\n<p>Bonus: <code>SQLite3::Database</code> points to <code>SQLite3</code> module's <code>Database</code> submodule or subclass.</p>\n"}], "owner": {"reputation": 6373, "user_id": 2715384, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/hwUTZ.jpg?s=128&g=1", "display_name": "the_prole", "link": "https://stackoverflow.com/users/2715384/the-prole"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1229, "favorite_count": 0, "accepted_answer_id": 41460476, "answer_count": 1, "score": 2, "last_activity_date": 1518160869, "creation_date": 1483522010, "last_edit_date": 1483523086, "question_id": 41460280, "link": "https://stackoverflow.com/questions/41460280/how-to-create-a-new-sqlite3-database-using-ruby", "title": "How to create a new SQLite3 database using Ruby?", "body": "<p>I know how to connect to a database in the current file directory:</p>\n\n<pre><code>db = SQLite3::Database.new 'Data.db'\n</code></pre>\n\n<p>My question is how do I create a new database in the current file directory? </p>\n\n<p><strong>bonus question</strong>: what do the two colons means?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4"], "comments": [{"owner": {"reputation": 89316, "user_id": 238886, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/8ca29123b5669b26f9b6ca2c62d9d215?s=128&d=identicon&r=PG", "display_name": "Wayne Conrad", "link": "https://stackoverflow.com/users/238886/wayne-conrad"}, "edited": false, "score": 0, "creation_date": 1484227317, "post_id": 41460236, "comment_id": 70429751, "body": "Hello, welcome to SO.  I rolled back your edit, since it removed all of the question&#39;s content.  If you were attempting to delete your question, there should be a link labeled &quot;delete&quot; that you can use for that."}], "answers": [{"tags": [], "owner": {"reputation": 14827, "user_id": 645886, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2abb0123e9484284a9cb2d36aa9854b3?s=128&d=identicon&r=PG&f=1", "display_name": "Surya", "link": "https://stackoverflow.com/users/645886/surya"}, "is_accepted": false, "score": 0, "last_activity_date": 1483522251, "creation_date": 1483522251, "answer_id": 41460366, "question_id": 41460236, "link": "https://stackoverflow.com/questions/41460236/bulk-update-all-comments-of-posts-but-reject-cancelled/41460366#41460366", "title": "Bulk update *all* comments of posts but reject cancelled", "body": "<p>Use <a href=\"http://apidock.com/rails/v4.0.2/ActiveRecord/Relation/update_all\" rel=\"nofollow noreferrer\"><code>update_all</code></a> for bulk update. For example:</p>\n\n<pre><code>comments.update_all(approved: true)\n</code></pre>\n\n<p>However, be cautious as it does not trigger validations or callbacks.</p>\n"}, {"tags": [], "owner": {"reputation": 43225, "user_id": 297087, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/17b3a5816f0647e9b0f7c49d60f93e7b?s=128&d=identicon&r=PG", "display_name": "Salil", "link": "https://stackoverflow.com/users/297087/salil"}, "is_accepted": false, "score": 0, "last_activity_date": 1483522267, "creation_date": 1483522267, "answer_id": 41460371, "question_id": 41460236, "link": "https://stackoverflow.com/questions/41460236/bulk-update-all-comments-of-posts-but-reject-cancelled/41460371#41460371", "title": "Bulk update *all* comments of posts but reject cancelled", "body": "<p>If you have <code>comment_ids</code> with you do following</p>\n\n<pre><code>cancelled_comment = Comment.where(id: comment_ids.keys, status: :cancelled)\nif cancelled_comment.count &gt; 0\n  flash[:error] = \"Cannot approve cancelled comments: #{cancelled_comments.pluck(:number)}\"\nelse\n  comments = Comment.where(id: comment_ids.keys).update_all()\n  flash[:notice] = \"#{pluralize(comments.count, 'comment')} successfully approved\"\nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 506, "user_id": 2865795, "user_type": "registered", "accept_rate": 12, "profile_image": "https://www.gravatar.com/avatar/6ac71f9f3c18cf6a60ae02f7402953cf?s=128&d=identicon&r=PG&f=1", "display_name": "Bhavya", "link": "https://stackoverflow.com/users/2865795/bhavya"}, "is_accepted": false, "score": 0, "last_activity_date": 1483523458, "creation_date": 1483523458, "answer_id": 41460782, "question_id": 41460236, "link": "https://stackoverflow.com/questions/41460236/bulk-update-all-comments-of-posts-but-reject-cancelled/41460782#41460782", "title": "Bulk update *all* comments of posts but reject cancelled", "body": "<p>If you  are using the <strong><em><a href=\"https://github.com/binarylogic/searchlogic\" rel=\"nofollow noreferrer\">search-logic</a></em></strong> gem, you can do the following (Syntax is of Rails 2)</p>\n\n<pre><code>Comment.status_ne(\"cancelled\").update_all(:approved =&gt; true)\n</code></pre>\n"}], "owner": {"reputation": 31, "user_id": 7304864, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/38ffb47c7e457b459ea8f7341fccd516?s=128&d=identicon&r=PG&f=1", "display_name": "user7304864", "link": "https://stackoverflow.com/users/7304864/user7304864"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 43, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1484227218, "creation_date": 1483521890, "last_edit_date": 1484227218, "question_id": 41460236, "link": "https://stackoverflow.com/questions/41460236/bulk-update-all-comments-of-posts-but-reject-cancelled", "title": "Bulk update *all* comments of posts but reject cancelled", "body": "<pre><code>Post has_many :comments\nComment belongs_to :post\n</code></pre>\n\n<p>I want to bulk update (approve) all comments of posts <strong>that are not <code>cancelled</code></strong>. If there is a cancelled comment selected, display the notification else approve comments.</p>\n\n<pre><code> def make_comments_approved\n    comment_ids = params[:comment_ids]\n\n    if comment_ids\n      posts = Post.includes(:comments).\n        where(comments: { id: comment_ids.keys })\n\n      comments = posts.comments\n\n      cancelled_comments = posts.\n        where(comments: { status: :cancelled }).comments\n\n      comments_to_update = comments - cancelled_comments\n\n      if cancelled_comments.any?\n        flash[:error] = \"Cannot approve cancelled comments: #{cancelled_comments.pluck(:number)}\"\n      else\n        approve_comments(comments_to_update)\n        flash[:notice] =\n          \"#{pluralize(comments.count, 'comment')} successfully approved\"\n      end\n    else\n      flash[:error] = 'Select comments to update'\n    end\n    redirect_to :back\n  end\n\nprivate\n\n  def approve_comments(comments)\n    # approve here\n  end\n</code></pre>\n"}, {"tags": ["ruby", "ruby-on-rails-3", "devise"], "comments": [{"owner": {"reputation": 14827, "user_id": 645886, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2abb0123e9484284a9cb2d36aa9854b3?s=128&d=identicon&r=PG&f=1", "display_name": "Surya", "link": "https://stackoverflow.com/users/645886/surya"}, "edited": false, "score": 0, "creation_date": 1483522461, "post_id": 41460198, "comment_id": 70126456, "body": "AR query seems to be incorrect. Shouldn&#39;t it be: <code>User.find_or_create_by_email(&quot;xyz@gmail.com&quot;)</code> ?"}, {"owner": {"reputation": 3180, "user_id": 3863146, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/34Tzj.png?s=128&g=1", "display_name": "sahil", "link": "https://stackoverflow.com/users/3863146/sahil"}, "reply_to_user": {"reputation": 14827, "user_id": 645886, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2abb0123e9484284a9cb2d36aa9854b3?s=128&d=identicon&r=PG&f=1", "display_name": "Surya", "link": "https://stackoverflow.com/users/645886/surya"}, "edited": false, "score": 0, "creation_date": 1483522653, "post_id": 41460198, "comment_id": 70126580, "body": "The query is correct, if the record is not present it creates the  user record with other fields as shown above."}, {"owner": {"reputation": 856, "user_id": 2131983, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3sKfa.jpg?s=128&g=1", "display_name": "khiav reoy", "link": "https://stackoverflow.com/users/2131983/khiav-reoy"}, "edited": false, "score": 0, "creation_date": 1483544661, "post_id": 41460198, "comment_id": 70141018, "body": "try this: <code>@user = User.find_or_create_by_email(...) rescue User.find_by_email(...)</code>"}], "answers": [{"comments": [{"owner": {"reputation": 3180, "user_id": 3863146, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/34Tzj.png?s=128&g=1", "display_name": "sahil", "link": "https://stackoverflow.com/users/3863146/sahil"}, "edited": false, "score": 0, "creation_date": 1483523792, "post_id": 41460607, "comment_id": 70127248, "body": "Can using a transaction alone be enough?"}, {"owner": {"reputation": 5449, "user_id": 681520, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/701baebf68d1d7faa9f9def6a24fe356?s=128&d=identicon&r=PG", "display_name": "Kimmo Lehto", "link": "https://stackoverflow.com/users/681520/kimmo-lehto"}, "reply_to_user": {"reputation": 3180, "user_id": 3863146, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/34Tzj.png?s=128&g=1", "display_name": "sahil", "link": "https://stackoverflow.com/users/3863146/sahil"}, "edited": false, "score": 0, "creation_date": 1483524066, "post_id": 41460607, "comment_id": 70127413, "body": "Yes it should work. I&#39;m not entirely sure if a transaction solves that but I suspect it might."}, {"owner": {"reputation": 3180, "user_id": 3863146, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/34Tzj.png?s=128&g=1", "display_name": "sahil", "link": "https://stackoverflow.com/users/3863146/sahil"}, "edited": false, "score": 0, "creation_date": 1483531856, "post_id": 41460607, "comment_id": 70132439, "body": "I am still facing the same issue."}, {"owner": {"reputation": 3180, "user_id": 3863146, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/34Tzj.png?s=128&g=1", "display_name": "sahil", "link": "https://stackoverflow.com/users/3863146/sahil"}, "edited": false, "score": 0, "creation_date": 1483666606, "post_id": 41460607, "comment_id": 70201321, "body": "Thanks a lot I had implemented the previous method which you had suggested <code>find_by_email || create</code> with Transaction. Now I am not getting any more errors."}], "tags": [], "owner": {"reputation": 5449, "user_id": 681520, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/701baebf68d1d7faa9f9def6a24fe356?s=128&d=identicon&r=PG", "display_name": "Kimmo Lehto", "link": "https://stackoverflow.com/users/681520/kimmo-lehto"}, "is_accepted": true, "score": 1, "last_activity_date": 1483524081, "last_edit_date": 1483524081, "creation_date": 1483522924, "answer_id": 41460607, "question_id": 41460198, "link": "https://stackoverflow.com/questions/41460198/rails-3-find-or-create-by-slug-sometimes-creates-duplicate-records/41460607#41460607", "title": "Rails 3 find_or_create_by_slug sometimes creates duplicate records", "body": "<p>You need to use something like <a href=\"https://github.com/seamusabshere/upsert\" rel=\"nofollow noreferrer\">Upsert</a></p>\n\n<p><code>find_or_create</code> will first run <code>SELECT</code> and then <code>INSERT</code>. Another instance could have run the <code>INSERT</code> in between. You could also maybe use a transaction:</p>\n\n<pre><code>User.transaction do \n  @user = User.find_or_create_by_email(:email=&gt;\"xyz@gmail.com\", firstname: 'XY', lastname: 'Z', code: 'ABC')\nend\n</code></pre>\n"}], "owner": {"reputation": 3180, "user_id": 3863146, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/34Tzj.png?s=128&g=1", "display_name": "sahil", "link": "https://stackoverflow.com/users/3863146/sahil"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 78, "favorite_count": 0, "accepted_answer_id": 41460607, "answer_count": 1, "score": 0, "last_activity_date": 1483524081, "creation_date": 1483521759, "question_id": 41460198, "link": "https://stackoverflow.com/questions/41460198/rails-3-find-or-create-by-slug-sometimes-creates-duplicate-records", "title": "Rails 3 find_or_create_by_slug sometimes creates duplicate records", "body": "<p>I am using Rails 3.2.14 with Ruby 2.1.0. I have a method which takes care of creating a user in DB by checking if the email id exists or not.</p>\n\n<p>I use <strong>devise</strong> and <strong>SAML</strong> for user authentication and session creation.</p>\n\n<p>I use the following code to do so:</p>\n\n<pre><code>@user = User.find_or_create_by_email(:email=&gt;\"xyz@gmail.com\", firstname: 'XY', lastname: 'Z', code: 'ABC')\n</code></pre>\n\n<p>This works in most of the cases, but rest of the time I keep getting error notification emails in my account as the above code tries to create one more user with the same email: </p>\n\n<pre><code>An ActiveRecord::RecordNotUnique occurred in sessions#consume:\n\n  Mysql2::Error: Duplicate entry 'xyz@gmail.com' for key 'email'\n</code></pre>\n\n<p>How I can avoid this error?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4", "asset-pipeline"], "owner": {"reputation": 417, "user_id": 3603632, "user_type": "registered", "accept_rate": 62, "profile_image": "https://graph.facebook.com/100000118135942/picture?type=large", "display_name": "user3603632", "link": "https://stackoverflow.com/users/3603632/user3603632"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 54, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1483521626, "creation_date": 1483521626, "question_id": 41460157, "link": "https://stackoverflow.com/questions/41460157/rails-4-2-7-1-doesnt-include-all-image-subdirectories-of-asset-pipeline", "title": "Rails 4.2.7.1 doesn&#39;t include all image-subdirectories of asset pipeline", "body": "<p>After a upgrade from rails 4.1.9 to rails 4.2.7.1 the asset pipeline (pre-compile) doesn't work properly.</p>\n\n<p>My structure:</p>\n\n<pre><code>- app/assets/images/platform/panel\n   - /comics    -&gt; [Not precompiled]\n   - /flags     -&gt; [OK]\n   - /map       -&gt; [Not precompiled]\n   - *.png      -&gt; [OK]\n</code></pre>\n\n<p>So most of the images in the asset folder are precompiled when calling:</p>\n\n<pre><code>rake assets:precompile\n</code></pre>\n\n<p>But the images in the subfolder <em>comics</em> and <em>map</em> are not precompiled until i add these directory to the precompile-config like this:</p>\n\n<pre><code>config.assets.precompile += %w(platform/panel/map/*.png platform/panel/comics/*.png platform/panel/comics/*.jpg)\n</code></pre>\n\n<p>Any idea why these subfolders are not precompiled like the others?</p>\n"}, {"tags": ["ruby", "ruby-on-rails-4", "devise"], "comments": [{"owner": {"reputation": 14827, "user_id": 645886, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2abb0123e9484284a9cb2d36aa9854b3?s=128&d=identicon&r=PG&f=1", "display_name": "Surya", "link": "https://stackoverflow.com/users/645886/surya"}, "edited": false, "score": 0, "creation_date": 1483521727, "post_id": 41460076, "comment_id": 70125979, "body": "do <code>rake routes|grep sign_in</code> in your terminal inside rails project and post the output."}, {"owner": {"reputation": 14827, "user_id": 645886, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2abb0123e9484284a9cb2d36aa9854b3?s=128&d=identicon&r=PG&f=1", "display_name": "Surya", "link": "https://stackoverflow.com/users/645886/surya"}, "edited": false, "score": 0, "creation_date": 1483521845, "post_id": 41460076, "comment_id": 70126049, "body": "Post the output in your question. Comment section is for discussion."}, {"owner": {"reputation": 55, "user_id": 670748, "user_type": "registered", "accept_rate": 8, "profile_image": "https://www.gravatar.com/avatar/a4e3de19c214c7972646dc6679d870e1?s=128&d=identicon&r=PG", "display_name": "Nikhil", "link": "https://stackoverflow.com/users/670748/nikhil"}, "reply_to_user": {"reputation": 14827, "user_id": 645886, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2abb0123e9484284a9cb2d36aa9854b3?s=128&d=identicon&r=PG&f=1", "display_name": "Surya", "link": "https://stackoverflow.com/users/645886/surya"}, "edited": false, "score": 0, "creation_date": 1483521908, "post_id": 41460076, "comment_id": 70126086, "body": "new_user_session GET      /users/sign_in(.:format)               devise/sessions#new  user_session POST     /users/sign_in(.:format)               devise/sessions#create  v1_sign_in_page_url_users GET      /users/v1_sign_in_page_url(.:format)   users#v1_sign_in_page_url"}], "answers": [{"tags": [], "owner": {"reputation": 95, "user_id": 6129289, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/qXEXx.png?s=128&g=1", "display_name": "LBarry", "link": "https://stackoverflow.com/users/6129289/lbarry"}, "is_accepted": false, "score": 0, "last_activity_date": 1483539829, "creation_date": 1483539829, "answer_id": 41466139, "question_id": 41460076, "link": "https://stackoverflow.com/questions/41460076/routing-error-no-route-matches-patch-users-sign-in-for-devise-update-passw/41466139#41466139", "title": "Routing error: No route matches [PATCH] &quot;/users/sign_in&quot; for devise update password", "body": "<p>It looks to me like you need to specify the user in your headers in Postman. The uri you listed in Postman is to update a user, but your error is saying there's no user sign in path, which I would assume means it doesn't have access to a user to update. </p>\n"}], "owner": {"reputation": 55, "user_id": 670748, "user_type": "registered", "accept_rate": 8, "profile_image": "https://www.gravatar.com/avatar/a4e3de19c214c7972646dc6679d870e1?s=128&d=identicon&r=PG", "display_name": "Nikhil", "link": "https://stackoverflow.com/users/670748/nikhil"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 253, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1483539829, "creation_date": 1483521357, "last_edit_date": 1483521576, "question_id": 41460076, "link": "https://stackoverflow.com/questions/41460076/routing-error-no-route-matches-patch-users-sign-in-for-devise-update-passw", "title": "Routing error: No route matches [PATCH] &quot;/users/sign_in&quot; for devise update password", "body": "<p>I'm trying to verify my update_password api which updates current user password. I'm using devise and my application is SPA, angular on the front end side. I'm currently getting this error when I try to verify the api with postman client. </p>\n\n<pre><code>def update\n  @user = User.find(current_user.id)\n  if @user.update_with_password(user_params)\n    # Sign in the user by passing validation in case their password changed\n    sign_in @user, :bypass =&gt; true\n    redirect_to root_path , notice: \"Password was successfully changed\"\n  else\n    # render \"edit\"\n    respond_to do |format|\n      format.html { redirect_to edit_user_registration_path, alert: @user.errors.full_messages.first.to_s }\n    end\n    # render \"edit\"\n  end\nend\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/1x6Q8.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/1x6Q8.png\" alt=\"Postman Error\"></a></p>\n"}, {"tags": ["arrays", "ruby"], "answers": [{"tags": [], "owner": {"reputation": 14827, "user_id": 645886, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2abb0123e9484284a9cb2d36aa9854b3?s=128&d=identicon&r=PG&f=1", "display_name": "Surya", "link": "https://stackoverflow.com/users/645886/surya"}, "is_accepted": false, "score": 2, "last_activity_date": 1483520334, "creation_date": 1483520334, "answer_id": 41459784, "question_id": 41459653, "link": "https://stackoverflow.com/questions/41459653/implementing-arrayflatten/41459784#41459784", "title": "Implementing Array#flatten", "body": "<p>I created something similar a long time back. Here is the <a href=\"https://gist.github.com/suryart/235b3ef829e21471b229784188a6473a#file-my_flatten-rb\" rel=\"nofollow noreferrer\">gist link</a>.</p>\n\n<p>Code from gist:</p>\n\n<pre><code>class Array\n  def my_flatten(level = nil)\n    rb_flatten(self, [], level)\n  end\n\n  private\n  # apply recursion based on the level\n  # when no level provided, then produce a complete flatten array\n  # when level is given, then produce a flatten array flattened till that certain level\n  def rb_flatten(array, result, level)\n    array.each do |value|\n      if ((value.is_a? Array) &amp;&amp; (level.nil? || (level &amp;&amp; level &gt; 0)))\n        rb_flatten(value, result, (level.nil? ? level : ((level || 0 ) - 1)))\n      else\n        result &lt;&lt; value\n      end\n    end\n    return result\n  end\nend\n</code></pre>\n\n<p>Hope that helps.</p>\n"}, {"tags": [], "owner": {"reputation": 61438, "user_id": 63034, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/ZXKMO.jpg?s=128&g=1", "display_name": "mikej", "link": "https://stackoverflow.com/users/63034/mikej"}, "is_accepted": true, "score": 3, "last_activity_date": 1483520370, "creation_date": 1483520370, "answer_id": 41459795, "question_id": 41459653, "link": "https://stackoverflow.com/questions/41459653/implementing-arrayflatten/41459795#41459795", "title": "Implementing Array#flatten", "body": "<p>Introduce a parameter to specify the max depth (defaulting to <code>nil</code>) and a parameter to keep track of the current depth (0 on the initial call and then incremented by 1 on each recursive call):</p>\n\n<pre><code>def my_flatten(arr, max_depth = nil, current_depth = 0)\n    arr.reduce([]) do |result, item| \n      item.is_a?(Array) &amp;&amp; (max_depth.nil? || current_depth &lt; max_depth) ? \n        result + my_flatten(item, max_depth, current_depth + 1) : result &lt;&lt; item\n    end\nend\n</code></pre>\n\n<p>You could replace the <code>?:</code> with an <code>if/else</code> if you felt this was more readable:</p>\n\n<pre><code>def my_flatten(arr, max_depth = nil, current_depth = 0)\n  arr.reduce([]) do |result, item|\n    if item.is_a?(Array) &amp;&amp; (max_depth.nil? || current_depth &lt; max_depth)\n      result + my_flatten(item, max_depth, current_depth + 1)\n    else\n      result &lt;&lt; item\n    end\n  end\nend\n</code></pre>\n\n<p>This now returns the expected results:</p>\n\n<pre><code> my_flatten(a) #=&gt; [1, 2, 3, 4, 5]\n\n my_flatten(a, 1) #=&gt; [1, 2, 3, [4, 5]]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2572, "user_id": 2862049, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffd65bc37e559c2c407f064f308828a4?s=128&d=identicon&r=PG&f=1", "display_name": "Lukas Baliak", "link": "https://stackoverflow.com/users/2862049/lukas-baliak"}, "is_accepted": false, "score": 1, "last_activity_date": 1483524711, "creation_date": 1483524711, "answer_id": 41461224, "question_id": 41459653, "link": "https://stackoverflow.com/questions/41459653/implementing-arrayflatten/41461224#41461224", "title": "Implementing Array#flatten", "body": "<p>you can also use <code>Proc</code> like this.</p>\n\n<pre><code>class Array\n  def my_flatten(level = nil)\n    p = -&gt;(arr, exp, lvl) do\n      arr.each { |val| Array === val &amp;&amp; (!level || lvl &lt; level) ? p.(val, exp, lvl+1) : exp &lt;&lt; val }\n      exp\n    end\n\n    p.(self, [], 0)\n  end\nend\n\na = [1, 2, [3, [4, 5]]]\np a.my_flatten\n# =&gt; [1, 2, 3, 4, 5]\np a.my_flatten(0)\n# =&gt; [1, 2, [3, [4, 5]]]\np a.my_flatten(1)\n# =&gt; [1, 2, 3, [4, 5]]\np a.my_flatten(2)\n# =&gt; [1, 2, 3, 4, 5]\n</code></pre>\n"}], "owner": {"reputation": 143, "user_id": 5828351, "user_type": "registered", "accept_rate": 73, "profile_image": "https://lh5.googleusercontent.com/-PlmgCJJFRJI/AAAAAAAAAAI/AAAAAAAAHOA/BdnO1EKCTJk/photo.jpg?sz=128", "display_name": "Alexandr Dmitrenko", "link": "https://stackoverflow.com/users/5828351/alexandr-dmitrenko"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 91, "favorite_count": 0, "accepted_answer_id": 41459795, "answer_count": 3, "score": -2, "last_activity_date": 1483527603, "creation_date": 1483519886, "last_edit_date": 1483527603, "question_id": 41459653, "link": "https://stackoverflow.com/questions/41459653/implementing-arrayflatten", "title": "Implementing Array#flatten", "body": "<p>I need to implement <code>Array#flatten</code>. This implementation removes all nested arrays:</p>\n\n<pre><code>a = [1, 2, [3, [4, 5]]]\n\ndef my_flatten(arr)\n  arr.reduce([]) do |result, item| \n    item.is_a?(Array) ? result + my_flatten(item) : result &lt;&lt; item\n  end\nend\n\nmy_flatten(a) #=&gt; [1, 2, 3, 4, 5]\n</code></pre>\n\n<p>Prompt how to implement such behavior</p>\n\n<pre><code>a.flatten(1) #=&gt; [1, 2, 3, [4, 5]]\n</code></pre>\n"}, {"tags": ["ruby", "string"], "comments": [{"owner": {"reputation": 481662, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 1, "creation_date": 1483519995, "post_id": 41459451, "comment_id": 70124913, "body": "There is no point in using a regex if you replace <i>literal</i>  strings. Regular expressions are good to use when the string you need to match is not known beforehand, but that follows some pattern that can be defined with regex."}], "answers": [{"comments": [{"owner": {"reputation": 8205, "user_id": 373784, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/2f107ff9d44f2d9968e425689724383f?s=128&d=identicon&r=PG", "display_name": "Mark Estrada", "link": "https://stackoverflow.com/users/373784/mark-estrada"}, "edited": false, "score": 0, "creation_date": 1483519738, "post_id": 41459499, "comment_id": 70124779, "body": "thanks mate, that worked! Just would like to ask though why does it work?  I would like to know if you know the reason why my first code doesn&#39;t work if you may.  I am beginning ruby and I would like to expand my understanding on this topic."}, {"owner": {"reputation": 5701, "user_id": 4392605, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/IgDqF.png?s=128&g=1", "display_name": "Meninx - \u30e1\u30cd\u30f3\u30c3\u30af\u30b9", "link": "https://stackoverflow.com/users/4392605/meninx-%e3%83%a1%e3%83%8d%e3%83%b3%e3%83%83%e3%82%af%e3%82%b9"}, "reply_to_user": {"reputation": 8205, "user_id": 373784, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/2f107ff9d44f2d9968e425689724383f?s=128&d=identicon&r=PG", "display_name": "Mark Estrada", "link": "https://stackoverflow.com/users/373784/mark-estrada"}, "edited": false, "score": 0, "creation_date": 1483520020, "post_id": 41459499, "comment_id": 70124926, "body": "<code>[ ]</code>  and <code>$</code> are special characters you need to escape them to get their literals. if you try <code>&#47;if \\[ &quot;\\${USER_CONFIG}&quot; != &quot;&quot; \\] ; then&#47;</code> this pattern will work."}, {"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1483528113, "post_id": 41459499, "comment_id": 70130102, "body": "Your 1, 2, and 4 all give a string, which is not what the OP was asking for. And your 3 gives what the OP was asking for, in a way that OP was most likely trying to avoid (OP wanted to do it &quot;all at once&quot;). Hence, it is not an answer to the question at all. However, this indirectly suggests what OP should have been doing."}, {"owner": {"reputation": 5701, "user_id": 4392605, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/IgDqF.png?s=128&g=1", "display_name": "Meninx - \u30e1\u30cd\u30f3\u30c3\u30af\u30b9", "link": "https://stackoverflow.com/users/4392605/meninx-%e3%83%a1%e3%83%8d%e3%83%b3%e3%83%83%e3%82%af%e3%82%b9"}, "reply_to_user": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1483528870, "post_id": 41459499, "comment_id": 70130598, "body": "@sawa don&#39;t be hypermetropic. Try to &quot;see the trees for the forest !&quot;. If you find it is not a good answer for the question you can write another answer which include some functions for direct escaping."}, {"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1483529455, "post_id": 41459499, "comment_id": 70130937, "body": "@Meninx-\u30e1\u30cd\u30f3\u30c3\u30af\u30b9 Here you go."}], "tags": [], "owner": {"reputation": 5701, "user_id": 4392605, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/IgDqF.png?s=128&g=1", "display_name": "Meninx - \u30e1\u30cd\u30f3\u30c3\u30af\u30b9", "link": "https://stackoverflow.com/users/4392605/meninx-%e3%83%a1%e3%83%8d%e3%83%b3%e3%83%83%e3%82%af%e3%82%b9"}, "is_accepted": true, "score": 2, "last_activity_date": 1483570792, "last_edit_date": 1483570792, "creation_date": 1483519406, "answer_id": 41459499, "question_id": 41459451, "link": "https://stackoverflow.com/questions/41459451/ruby-regex-escape-all/41459499#41459499", "title": "Ruby regex - escape all", "body": "<p>Change this :\n</p>\n\n<pre><code>/if [ \"${USER_CONFIG}\" != \"\" ] ; then/\n</code></pre>\n\n<p>To this:</p>\n\n<ol>\n<li><p><code>'if [ \"${USER_CONFIG}\" != \"\" ] ; then'</code></p>\n\n<p><strong>or</strong> </p></li>\n<li><p><code>string_to_replace</code></p>\n\n<p><strong>or</strong></p></li>\n<li><p><code>/if \\[ \"\\${USER_CONFIG}\" != \"\" \\] ; then/</code></p>\n\n<p><strong>or</strong></p></li>\n<li><p><code>\"if \\[ \\\"\\${USER_CONFIG}\\\" != \\\"\\\" \\] ; then\"</code></p></li>\n</ol>\n\n<p>in <code>sub()</code> function.</p>\n"}, {"tags": [], "owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "is_accepted": false, "score": 0, "last_activity_date": 1483529776, "last_edit_date": 1483529776, "creation_date": 1483529400, "answer_id": 41462749, "question_id": 41459451, "link": "https://stackoverflow.com/questions/41459451/ruby-regex-escape-all/41462749#41462749", "title": "Ruby regex - escape all", "body": "<p>The real answer to the question as is is, yes, there is. And the way to do it is:</p>\n\n<pre><code>Regexp.new(Regexp.escape(string_to_replace))\n#=&gt; /if\\ \\[\\ \"\\$\\{USER_CONFIG\\}\"\\ !=\\ \"\"\\ \\]\\ ;\\ then/\n</code></pre>\n"}], "owner": {"reputation": 8205, "user_id": 373784, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/2f107ff9d44f2d9968e425689724383f?s=128&d=identicon&r=PG", "display_name": "Mark Estrada", "link": "https://stackoverflow.com/users/373784/mark-estrada"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 70, "favorite_count": 0, "accepted_answer_id": 41459499, "answer_count": 2, "score": 0, "last_activity_date": 1483570792, "creation_date": 1483519221, "last_edit_date": 1483529596, "question_id": 41459451, "link": "https://stackoverflow.com/questions/41459451/ruby-regex-escape-all", "title": "Ruby regex - escape all", "body": "<p>I have this string:</p>\n\n<pre><code>string_to_replace = 'if [ \"${USER_CONFIG}\" != \"\" ] ; then'\n</code></pre>\n\n<p>I want to get:</p>\n\n<pre><code>'Sample Only!!!!!'\n</code></pre>\n\n<p>I am doing:</p>\n\n<pre><code>string_to_replace.sub(/if [ \"${USER_CONFIG}\" != \"\" ] ; then/, 'Sample Only!!!!!')\n</code></pre>\n\n<p>But I do not get the desired result.</p>\n\n<p>Is there a way to escape all regex characters at once in this string?</p>\n"}, {"tags": ["ruby", "regex"], "comments": [{"owner": {"reputation": 481662, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 2, "creation_date": 1483516300, "post_id": 41458690, "comment_id": 70123142, "body": "Could you please clarify what you mean by &quot;words&quot;? Share the expected output, please. BTW, <code>\\D+</code> matches what <code>[[:punct:]]+</code> matches, no need to use <code>|[[:punct:]]+</code> in your pattern."}, {"owner": {"reputation": 25823, "user_id": 24468, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/PWl6C.png?s=128&g=1", "display_name": "akuhn", "link": "https://stackoverflow.com/users/24468/akuhn"}, "edited": false, "score": 0, "creation_date": 1483517686, "post_id": 41458690, "comment_id": 70123749, "body": "Cannot reproduce, for me <code>str.scan(&#47;[\\D]+&#47;) # =&gt; [&quot;We bought &quot;, &quot;.&quot;, &quot; million shirts.&quot;]</code>"}], "answers": [{"comments": [{"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1483517520, "post_id": 41458871, "comment_id": 70123675, "body": "Instead of the <code>rescue nil</code> hack, you could use <code>.grep_v(&#47;\\d+\\.?\\d*&#47;)</code> to select non-numeric strings."}, {"owner": {"reputation": 6994, "user_id": 623266, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/aab060b3da7fa08ba0b531e2204c6469?s=128&d=identicon&r=PG", "display_name": "chell", "link": "https://stackoverflow.com/users/623266/chell"}, "edited": false, "score": 0, "creation_date": 1483517700, "post_id": 41458871, "comment_id": 70123756, "body": "Thanks akuhn, I would like to get the punctuation as a separate entity in the resulting array [&quot;We&quot;, &quot;bought&quot;, &quot;million&quot;, &quot;shirts&quot;, &quot;.&quot;]"}, {"owner": {"reputation": 6994, "user_id": 623266, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/aab060b3da7fa08ba0b531e2204c6469?s=128&d=identicon&r=PG", "display_name": "chell", "link": "https://stackoverflow.com/users/623266/chell"}, "edited": false, "score": 0, "creation_date": 1483518328, "post_id": 41458871, "comment_id": 70124038, "body": "Another excellent answer.  Thank akuhn I will go with this one as it&#39;s very clean and gets me the result I am looking for."}, {"owner": {"reputation": 481662, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 0, "creation_date": 1483518385, "post_id": 41458871, "comment_id": 70124061, "body": "However, this excludes matching any punctuation followed with a digit, even if it is <code>:</code> or <code>;</code>, etc. Not sure it is important here though. With my approach, <code>(?!\\.\\d)[[:punct:]]</code>, only a dot before a digit won&#39;t get matched."}], "tags": [], "owner": {"reputation": 25823, "user_id": 24468, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/PWl6C.png?s=128&g=1", "display_name": "akuhn", "link": "https://stackoverflow.com/users/24468/akuhn"}, "is_accepted": false, "score": 1, "last_activity_date": 1483518171, "last_edit_date": 1483518171, "creation_date": 1483516775, "answer_id": 41458871, "question_id": 41458690, "link": "https://stackoverflow.com/questions/41458690/what-is-a-regex-to-extract-words-and-punctuation-but-ignore-decimals-and-numbers/41458871#41458871", "title": "What is a regex to extract words and punctuation but ignore decimals and numbers?", "body": "<p>Try this</p>\n\n<pre><code>str = \"We bought 3.5 million shirts.\"\nstr.scan(/[[:alpha:]]+|[[:punct:]](?![[:digit::]])/)\n# =&gt; [\"We\", \"bought\", \"million\", \"shirts\", \".\"]\n</code></pre>\n\n<p>How does this work?</p>\n\n<ul>\n<li><code>[[:alpha:]]+</code> selects one or more letters, aka words</li>\n<li><code>[[:punct:]](?![[:digit::]])</code> selects punctation that is not followed by a number</li>\n</ul>\n"}, {"comments": [{"owner": {"reputation": 6994, "user_id": 623266, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/aab060b3da7fa08ba0b531e2204c6469?s=128&d=identicon&r=PG", "display_name": "chell", "link": "https://stackoverflow.com/users/623266/chell"}, "edited": false, "score": 0, "creation_date": 1483517908, "post_id": 41459106, "comment_id": 70123854, "body": "Thanks Maverick_Mrt, I still need to get the &quot;.&quot; at the end of the sentence or any other textual punctuation. This only gets the words."}, {"owner": {"reputation": 9384, "user_id": 761132, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/fa462ba2bc6318a8b2e7662bb8e91aa1?s=128&d=identicon&r=PG", "display_name": "Rizwan M.Tuman", "link": "https://stackoverflow.com/users/761132/rizwan-m-tuman"}, "reply_to_user": {"reputation": 6994, "user_id": 623266, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/aab060b3da7fa08ba0b531e2204c6469?s=128&d=identicon&r=PG", "display_name": "chell", "link": "https://stackoverflow.com/users/623266/chell"}, "edited": false, "score": 0, "creation_date": 1483518034, "post_id": 41459106, "comment_id": 70123904, "body": "Try now :) I fought hard to strip punctuations actually... just removed those :)"}], "tags": [], "owner": {"reputation": 9384, "user_id": 761132, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/fa462ba2bc6318a8b2e7662bb8e91aa1?s=128&d=identicon&r=PG", "display_name": "Rizwan M.Tuman", "link": "https://stackoverflow.com/users/761132/rizwan-m-tuman"}, "is_accepted": false, "score": 0, "last_activity_date": 1483519876, "last_edit_date": 1483519876, "creation_date": 1483517700, "answer_id": 41459106, "question_id": 41458690, "link": "https://stackoverflow.com/questions/41458690/what-is-a-regex-to-extract-words-and-punctuation-but-ignore-decimals-and-numbers/41459106#41459106", "title": "What is a regex to extract words and punctuation but ignore decimals and numbers?", "body": "<p>You can try this:</p>\n\n<pre><code>a=\"We bought 3.5 million shirts 15 dolalr.;\"\nb=a.split(/\\s+\\d*\\.?\\d*\\s*|([.,;])|[\\s]+/)\nputs b\n</code></pre>\n\n<p><a href=\"http://ideone.com/hZRItm\" rel=\"nofollow noreferrer\">Try it here</a></p>\n\n<p>Output array:</p>\n\n<pre><code>We\nbought\nmillion\nshirts\ndolalr\n.\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 481662, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "reply_to_user": {"reputation": 6994, "user_id": 623266, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/aab060b3da7fa08ba0b531e2204c6469?s=128&d=identicon&r=PG", "display_name": "chell", "link": "https://stackoverflow.com/users/623266/chell"}, "edited": false, "score": 0, "creation_date": 1483518245, "post_id": 41459131, "comment_id": 70123995, "body": "I also added an alternative approach that looks more readable."}, {"owner": {"reputation": 481662, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "reply_to_user": {"reputation": 6994, "user_id": 623266, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/aab060b3da7fa08ba0b531e2204c6469?s=128&d=identicon&r=PG", "display_name": "chell", "link": "https://stackoverflow.com/users/623266/chell"}, "edited": false, "score": 0, "creation_date": 1483518597, "post_id": 41459131, "comment_id": 70124179, "body": "I think I failed to escape the dot. I fixed it and now it will only avoid matching <i>dots</i> followed with a digit."}, {"owner": {"reputation": 6994, "user_id": 623266, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/aab060b3da7fa08ba0b531e2204c6469?s=128&d=identicon&r=PG", "display_name": "chell", "link": "https://stackoverflow.com/users/623266/chell"}, "edited": false, "score": 1, "creation_date": 1483518756, "post_id": 41459131, "comment_id": 70124260, "body": "I have changed the accepted answer in light of your comment pointing out that akuhn&#39;s answer won&#39;t catch punctuation followed by a digit."}], "tags": [], "owner": {"reputation": 481662, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "is_accepted": true, "score": 4, "last_activity_date": 1483518215, "last_edit_date": 1483518215, "creation_date": 1483517857, "answer_id": 41459131, "question_id": 41458690, "link": "https://stackoverflow.com/questions/41458690/what-is-a-regex-to-extract-words-and-punctuation-but-ignore-decimals-and-numbers/41459131#41459131", "title": "What is a regex to extract words and punctuation but ignore decimals and numbers?", "body": "<p>I suggest using a small enhancement: replace <code>\\D+</code> with <code>\\p{L}+</code> (or <code>[[:alpha:]]+</code>) to only match 1+ letters and then restrict <code>[[:punct:]]</code> to only match if it is not a <code>.</code> followed with a digit (with a negative lookahead <code>(?!\\.\\d)</code>):</p>\n\n<pre><code>s = \"We bought 3.5 million shirts.\"\nres = s.scan(/\\p{L}+|(?!\\.\\d)[[:punct:]]/)\nputs res # =&gt; [We, bought, million, shirts, .]\n</code></pre>\n\n<p>See the <a href=\"https://ideone.com/j8W3gX\" rel=\"nofollow noreferrer\">Ruby demo</a></p>\n\n<p>Another approach is to first remove all numbers with <code>\\d*\\.?\\d+</code> regex and then collect the \"words\" with punctuation:</p>\n\n<pre><code>s = \"We bought 3.5 million shirts.\"\nres = s.gsub(/\\d*\\.?\\d+/, '').scan(/\\w+|\\p{P}/)\n</code></pre>\n\n<p>See <a href=\"https://ideone.com/jMhiKp\" rel=\"nofollow noreferrer\">this Ruby demo</a></p>\n"}], "owner": {"reputation": 6994, "user_id": 623266, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/aab060b3da7fa08ba0b531e2204c6469?s=128&d=identicon&r=PG", "display_name": "chell", "link": "https://stackoverflow.com/users/623266/chell"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 589, "favorite_count": 0, "accepted_answer_id": 41459131, "answer_count": 3, "score": 2, "last_activity_date": 1483519876, "creation_date": 1483516089, "last_edit_date": 1483517799, "question_id": 41458690, "link": "https://stackoverflow.com/questions/41458690/what-is-a-regex-to-extract-words-and-punctuation-but-ignore-decimals-and-numbers", "title": "What is a regex to extract words and punctuation but ignore decimals and numbers?", "body": "<p>I have the following sentence:</p>\n\n<pre><code>\"We bought 3.5 million shirts.\"\n</code></pre>\n\n<p>I want to create an array with all of the words and punctuation but not the number including the decimal point.</p>\n\n<p>I have the following regex:</p>\n\n<pre><code>/[\\D]+/\n</code></pre>\n\n<p>However this still grabs the decimal point between the numbers as follows:</p>\n\n<p>[\"We\", \"bought\", \".\", \"million\", \"shirts\", \".\"]</p>\n\n<p>I want the result to be as follows: looking for the following result:</p>\n\n<pre><code>[\"We\", \"bought\", \"million\", \"shirts\", \".\"]\n</code></pre>\n\n<p>Notice that the \".\" from the number is excluded.</p>\n\n<p>How can I still select periods at the end of sentences but not decimal points that occur before a number?</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 1886, "user_id": 1138557, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/c35c06fc5605d4d1e73e17dd8113426f?s=128&d=identicon&r=PG&f=1", "display_name": "Thorin", "link": "https://stackoverflow.com/users/1138557/thorin"}, "edited": false, "score": 0, "creation_date": 1483513362, "post_id": 41457837, "comment_id": 70121864, "body": "you are using devise gem for authentication ? then why need to check manually?"}, {"owner": {"reputation": 69, "user_id": 7361762, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/cc52a6895498db9f54d6759fdcc895f0?s=128&d=identicon&r=PG&f=1", "display_name": "Rose2017", "link": "https://stackoverflow.com/users/7361762/rose2017"}, "reply_to_user": {"reputation": 1886, "user_id": 1138557, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/c35c06fc5605d4d1e73e17dd8113426f?s=128&d=identicon&r=PG&f=1", "display_name": "Thorin", "link": "https://stackoverflow.com/users/1138557/thorin"}, "edited": false, "score": 0, "creation_date": 1483514091, "post_id": 41457837, "comment_id": 70122132, "body": "yes, my gem have authentication . But I don&#39;t know how to pass id to users when they log in app by using authentication of gem."}, {"owner": {"reputation": 21010, "user_id": 2019247, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/MnZYd.jpg?s=128&g=1", "display_name": "31piy", "link": "https://stackoverflow.com/users/2019247/31piy"}, "edited": false, "score": 0, "creation_date": 1483514623, "post_id": 41457837, "comment_id": 70122364, "body": "It is not clear what you want. Would you please correct the question?"}, {"owner": {"reputation": 4644, "user_id": 2594185, "user_type": "registered", "profile_image": "https://graph.facebook.com/100003773788931/picture?type=large", "display_name": "Jagdeep Singh", "link": "https://stackoverflow.com/users/2594185/jagdeep-singh"}, "edited": false, "score": 0, "creation_date": 1483515338, "post_id": 41457837, "comment_id": 70122697, "body": "Can you clear this statement more: &quot;it pass id to users when they log in my app&quot;?"}, {"owner": {"reputation": 69, "user_id": 7361762, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/cc52a6895498db9f54d6759fdcc895f0?s=128&d=identicon&r=PG&f=1", "display_name": "Rose2017", "link": "https://stackoverflow.com/users/7361762/rose2017"}, "edited": false, "score": 0, "creation_date": 1483515958, "post_id": 41457837, "comment_id": 70122990, "body": "im sorry for my poor explanation.i wanna do Stateless of Restful in HTTP connection.My goal is that  making system that when users log in my app, my app&#39;s server give id to them because if my app cannot do so,  other users can access a user pages.(if they write something in URL randomly)And my server&#39;s model have users&#39; ids in that time.When users log out my app,these ids are delete from model.Maybe I can call these system &#39;Session&#39;."}], "answers": [{"tags": [], "owner": {"reputation": 7638, "user_id": 1014251, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/1c4500c91af486c885af8bb84eefd063?s=128&d=identicon&r=PG", "display_name": "ReggieB", "link": "https://stackoverflow.com/users/1014251/reggieb"}, "is_accepted": true, "score": 1, "last_activity_date": 1483517299, "creation_date": 1483517299, "answer_id": 41459009, "question_id": 41457837, "link": "https://stackoverflow.com/questions/41457837/how-to-do-stateless-user-authentication-of-my-app/41459009#41459009", "title": "How to do Stateless User Authentication of My App", "body": "<p>When a user logs in via Devise, they are given a unique token that is stored in the browser's session. When the next page is rendered, the browser will pass it's session cookie to the rails app, and Devise will gather the user token from the session cookie and populate the <code>current_user</code> variable with the user object that matches that token.</p>\n\n<p>So if you follow the instructions for setting up <a href=\"https://github.com/plataformatec/devise\" rel=\"nofollow noreferrer\">Devise in its README</a>, then once a user has logged in, you can access that logged in user's User object via <code>current_user</code></p>\n"}], "owner": {"reputation": 69, "user_id": 7361762, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/cc52a6895498db9f54d6759fdcc895f0?s=128&d=identicon&r=PG&f=1", "display_name": "Rose2017", "link": "https://stackoverflow.com/users/7361762/rose2017"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 174, "favorite_count": 0, "accepted_answer_id": 41459009, "answer_count": 1, "score": 0, "last_activity_date": 1492721374, "creation_date": 1483512660, "last_edit_date": 1492721374, "question_id": 41457837, "link": "https://stackoverflow.com/questions/41457837/how-to-do-stateless-user-authentication-of-my-app", "title": "How to do Stateless User Authentication of My App", "body": "<p><strong>Update from comments:</strong> I want to do Stateless of Restful in HTTP connection. My goal is making a system that when users log into my app, my app's server assigns an id to them. Because if my app cannot do so, other users can access a user pages (if they write something in the URL randomly). And my server's model have users' ids in that time. When users log out my app, these ids are deleted from model. Maybe I can call these system 'Session'.</p>\n\n<hr>\n\n<p>I am performing user authentication in my app. I want to realize Stateless in there that it pass id to users when they log in my app. However, I'm a beginner, so I don't know how to do it. I think I should write these codes in the main controller, but am not sure.  How can I do this process? </p>\n\n<p><strong>home_controller</strong></p>\n\n<pre><code>class HomeController &lt; ApplicationController\n   before_filter :find_user, only: [:index]\n\n  def index\n    @id = params[:id]\n    @email = [:email]\n    if @id == @user.id  &amp;&amp; @email == @user.email\n      render :text =&gt;   \"sucsess\"\n    else\n      render :text =&gt;   \"fail\"\n    end\n  end\n\n  def create\n    userData = UserData.new(create_params)\n    user = User.find(params[:id]).to_json\n\n    # \u30a8\u30e9\u30fc\u51e6\u7406\n    unless  userData.save\n        @error_message = [memo.errors.full_messages].compact\n    end\n        end\n\n  private\n\u3000\u3000 def find_user\n      @user = User.find(params[:id]) # You should specify this code what are your comparing to.\n    end\nend\n</code></pre>\n\n<p><strong>routes.rb</strong></p>\n\n<pre><code>Rails.application.routes.draw do\n  devise_for :users\n  root to: \"home#index\"\n  get 'home/index'\n\n\n  namespace :home, default: {format: :json} do\n    resources :index, only: :create\n  end\nend\n</code></pre>\n\n<p><strong>user.rb</strong></p>\n\n<pre><code>class User &lt; ActiveRecord::Base\n  # Include default devise modules. Others available are:\n  # :confirmable, :lockable, :timeoutable and :omniauthable\n  devise :database_authenticatable, :registerable,\n         :recoverable, :rememberable, :trackable, :validatable, :omniauthable      \nend\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "string", "encoding", "base64"], "answers": [{"comments": [{"owner": {"reputation": 1886, "user_id": 1138557, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/c35c06fc5605d4d1e73e17dd8113426f?s=128&d=identicon&r=PG&f=1", "display_name": "Thorin", "link": "https://stackoverflow.com/users/1138557/thorin"}, "edited": false, "score": 0, "creation_date": 1483515007, "post_id": 41458031, "comment_id": 70122546, "body": "But in that case it return string littile bit different from online: XGJceEMwXHhCM1x4QjlceEREXHhGQ1x4MUNceDEyWEJhbGFuY2UgZGViaXRl&zwnj;&#8203;\\nZCB3aXRoIDYyLjAgRX&zwnj;&#8203;hwaXJ5IERhdGUgaXMgMD&zwnj;&#8203;ktMTEtMjAxNiAwOToxMD&zwnj;&#8203;ow\\nMCBSZW1haW5pbmcg&zwnj;&#8203;QmFsYW5jZSBpcyAxNDkw&zwnj;&#8203;LjBceDFBXHgwRkRlYml0&zwnj;&#8203;ZWQg\\nQmFsYW5jZVwiWE&zwnj;&#8203;JhbGFuY2UgZGViaXRlZC&zwnj;&#8203;B3aXRoIDYyLjAgRXhwaX&zwnj;&#8203;J5IERh\\ndGUgaXMgMDkt&zwnj;&#8203;MTEtMjAxNiAwOToxMDow&zwnj;&#8203;MCBSZW1haW5pbmcgQmFs&zwnj;&#8203;YW5jZSBp\\ncyAxNDkwLj&zwnj;&#8203;AoXHg5OVx4OUNceENFXH&zwnj;&#8203;hCRlx4MDU=\\n     Noticed that \\n in string and when decode this by ruby it will not same as original it have double slash like \\\\b\\\\xC0\\\\xB3\\\\xB9\\\\xDD\\\\xFC\\\\x1C\\\\x12XBalance debited with 62."}, {"owner": {"reputation": 1886, "user_id": 1138557, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/c35c06fc5605d4d1e73e17dd8113426f?s=128&d=identicon&r=PG&f=1", "display_name": "Thorin", "link": "https://stackoverflow.com/users/1138557/thorin"}, "edited": false, "score": 0, "creation_date": 1483515324, "post_id": 41458031, "comment_id": 70122689, "body": "How can I found original string with single slash as that is the only requirment"}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "reply_to_user": {"reputation": 1886, "user_id": 1138557, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/c35c06fc5605d4d1e73e17dd8113426f?s=128&d=identicon&r=PG&f=1", "display_name": "Thorin", "link": "https://stackoverflow.com/users/1138557/thorin"}, "edited": false, "score": 0, "creation_date": 1483518594, "post_id": 41458031, "comment_id": 70124176, "body": "@Thorin <code>encode64</code> adds newlines every 60 characters. You can use <code>strict_encode64</code> instead."}, {"owner": {"reputation": 1886, "user_id": 1138557, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/c35c06fc5605d4d1e73e17dd8113426f?s=128&d=identicon&r=PG&f=1", "display_name": "Thorin", "link": "https://stackoverflow.com/users/1138557/thorin"}, "edited": false, "score": 0, "creation_date": 1483521666, "post_id": 41458031, "comment_id": 70125940, "body": "Okay but how I can decode string back to original ? it always return string with double slashs not single"}, {"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "reply_to_user": {"reputation": 1886, "user_id": 1138557, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/c35c06fc5605d4d1e73e17dd8113426f?s=128&d=identicon&r=PG&f=1", "display_name": "Thorin", "link": "https://stackoverflow.com/users/1138557/thorin"}, "edited": false, "score": 0, "creation_date": 1483522283, "post_id": 41458031, "comment_id": 70126339, "body": "@Thorin: Your comment is very unclear. What do you mean by &quot;how I can decode string back to original&quot;? You use the base64 library of whatever platform you want to decode the string on. What do you mean by &quot;it always return string with double slashs not single&quot;? There are no slashes in the example string you posted. Are you talking about a different string?"}, {"owner": {"reputation": 1886, "user_id": 1138557, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/c35c06fc5605d4d1e73e17dd8113426f?s=128&d=identicon&r=PG&f=1", "display_name": "Thorin", "link": "https://stackoverflow.com/users/1138557/thorin"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1483528597, "post_id": 41458031, "comment_id": 70130410, "body": "Jos&#233; Ernesto Lara   The String I have added in question when I encode it with strict_encode64 like @Stefan suggest but when I decode that encoded string again it returns \\\\b\\\\xC0\\\\xB3\\\\xB9\\\\xDD\\\\xFC\\\\x1C\\\\x12XBalance...  type string you see that there are two backward slash instead of one like original, I tried all these operation on irb"}, {"owner": {"reputation": 1237, "user_id": 1165207, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f64398194d321df20f928fac80a5991a?s=128&d=identicon&r=PG", "display_name": "Jos&#233; Ernesto Lara Rodr&#237;guez", "link": "https://stackoverflow.com/users/1165207/jos%c3%a9-ernesto-lara-rodr%c3%adguez"}, "edited": false, "score": 0, "creation_date": 1483602041, "post_id": 41458031, "comment_id": 70164497, "body": "Hey Thorin, what are you using to print the string? The double backslash is an internal representation of Ruby (and other languages, like C, C++, C#, Java, Javascript), it&#39;s showing you the slashes escaped. If you use puts to print your string, for example, it will show a single backslash. Or if you save it to a file."}], "tags": [], "owner": {"reputation": 1237, "user_id": 1165207, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f64398194d321df20f928fac80a5991a?s=128&d=identicon&r=PG", "display_name": "Jos&#233; Ernesto Lara Rodr&#237;guez", "link": "https://stackoverflow.com/users/1165207/jos%c3%a9-ernesto-lara-rodr%c3%adguez"}, "is_accepted": false, "score": 2, "last_activity_date": 1483513466, "creation_date": 1483513466, "answer_id": 41458031, "question_id": 41457531, "link": "https://stackoverflow.com/questions/41457531/why-ruby-base64-different-from-others/41458031#41458031", "title": "why ruby base64 different from others?", "body": "<p>The issue is that when you put that string in Ruby inside double quotes, the interpreter parses it and interprets the backslash sequences as escape characters (see the Escape Characters section on <a href=\"https://www.tutorialspoint.com/ruby/ruby_strings.htm\" rel=\"nofollow noreferrer\">https://www.tutorialspoint.com/ruby/ruby_strings.htm</a>). The page you're using doesn't interpret escape characters.</p>\n\n<p>If you want to include the backslashes on the encoded/decoded text, you could use single quotes in Ruby, which don't parse escape characters (except for \\').</p>\n"}], "owner": {"reputation": 1886, "user_id": 1138557, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/c35c06fc5605d4d1e73e17dd8113426f?s=128&d=identicon&r=PG&f=1", "display_name": "Thorin", "link": "https://stackoverflow.com/users/1138557/thorin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 645, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1483515334, "creation_date": 1483511307, "last_edit_date": 1483515334, "question_id": 41457531, "link": "https://stackoverflow.com/questions/41457531/why-ruby-base64-different-from-others", "title": "why ruby base64 different from others?", "body": "<p>I have a string </p>\n\n<pre><code>\\b\\xC0\\xB3\\xB9\\xDD\\xFC\\x1C\\x12XBalance debited with 62.0 Expiry Date is 09-11-2016 09:10:00 Remaining Balance is 1490.0\\x1A\\x0FDebited Balance\\\"XBalance debited with 62.0 Expiry Date is 09-11-2016 09:10:00 Remaining Balance is 1490.0(\\x99\\x9C\\xCE\\xBF\\x05\n</code></pre>\n\n<p>When I encode online sites like <a href=\"https://www.base64encode.org/\" rel=\"nofollow noreferrer\">https://www.base64encode.org/</a> it returns </p>\n\n<pre><code>XGJceEMwXHhCM1x4QjlceEREXHhGQ1x4MUNceDEyWEJhbGFuY2UgZGViaXRlZCB3aXRoIDYyLjAgRXhwaXJ5IERhdGUgaXMgMDktMTEtMjAxNiAwOToxMDowMCBSZW1haW5pbmcgQmFsYW5jZSBpcyAxNDkwLjBceDFBXHgwRkRlYml0ZWQgQmFsYW5jZVwiWEJhbGFuY2UgZGViaXRlZCB3aXRoIDYyLjAgRXhwaXJ5IERhdGUgaXMgMDktMTEtMjAxNiAwOToxMDowMCBSZW1haW5pbmcgQmFsYW5jZSBpcyAxNDkwLjAoXHg5OVx4OUNceENFXHhCRlx4MDU=\n</code></pre>\n\n<p>But when same string encoded by ruby with Base64.encode64(above_string) then I got:</p>\n\n<pre><code>CMCzud38HBJYQmFsYW5jZSBkZWJpdGVkIHdpdGggNjIuMCBFeHBpcnkgRGF0\\nZSBpcyAwOS0xMS0yMDE2IDA5OjEwOjAwIFJlbWFpbmluZyBCYWxhbmNlIGlz\\nIDE0OTAuMBoPRGViaXRlZCBCYWxhbmNlIlhCYWxhbmNlIGRlYml0ZWQgd2l0\\naCA2Mi4wIEV4cGlyeSBEYXRlIGlzIDA5LTExLTIwMTYgMDk6MTA6MDAgUmVt\\nYWluaW5nIEJhbGFuY2UgaXMgMTQ5MC4wKJmczr8F\\n\n</code></pre>\n\n<p>I am not sure why this is produce different string, also when I tried to decode by Base64.decode64(output_from_online) that not produce original string(added extra slash in outputs like \\b\\xC0\\xB3\\xB9\\xDD\\xFC\\x1C\\x12XBalance...) but when I tried to decode ruby it returns original string </p>\n\n<p>anyone let me know why there are two different encodings? and how I can encode same as online available with ruby</p>\n\n<p>How can I found original string with single slash as that is the only requirment</p>\n"}, {"tags": ["ruby", "chef-infra", "chef-recipe"], "answers": [{"comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1483514827, "post_id": 41458053, "comment_id": 70122460, "body": "For the read file, do you prefer <code>open</code> and <code>gets</code> to <code>IO.foreach(&#39;input&#39;) do |line|...</code>?"}, {"owner": {"reputation": 25823, "user_id": 24468, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/PWl6C.png?s=128&g=1", "display_name": "akuhn", "link": "https://stackoverflow.com/users/24468/akuhn"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1483516233, "post_id": 41458053, "comment_id": 70123109, "body": "Good catch, that makes it shorter OTOH <code>File.open { File.foreach { ... }}</code>  would create an empty output file if input does not exist rather than just failing."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1483520319, "post_id": 41458053, "comment_id": 70125127, "body": "I think two types of failures need to be considered: file does not exist; and file does not contain the text marker (including the case of the file being empty).If the file is of manageable size it might be easiest to construct the output file in an array, then write the array to file if all is well."}, {"owner": {"reputation": 43208, "user_id": 78722, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf611565f0b79abd0b3dc200ad867661?s=128&d=identicon&r=PG", "display_name": "coderanger", "link": "https://stackoverflow.com/users/78722/coderanger"}, "edited": false, "score": 0, "creation_date": 1483562302, "post_id": 41458053, "comment_id": 70151363, "body": "This is very incorrect for Chef, please remove this answer."}, {"owner": {"reputation": 25823, "user_id": 24468, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/PWl6C.png?s=128&g=1", "display_name": "akuhn", "link": "https://stackoverflow.com/users/24468/akuhn"}, "reply_to_user": {"reputation": 43208, "user_id": 78722, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf611565f0b79abd0b3dc200ad867661?s=128&d=identicon&r=PG", "display_name": "coderanger", "link": "https://stackoverflow.com/users/78722/coderanger"}, "edited": false, "score": 0, "creation_date": 1483562395, "post_id": 41458053, "comment_id": 70151402, "body": "@coderanger can you explain why this is incorrect for chef? Happy to update my answer if you can provide more constructive feedback."}, {"owner": {"reputation": 43208, "user_id": 78722, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf611565f0b79abd0b3dc200ad867661?s=128&d=identicon&r=PG", "display_name": "coderanger", "link": "https://stackoverflow.com/users/78722/coderanger"}, "edited": false, "score": 2, "creation_date": 1483562526, "post_id": 41458053, "comment_id": 70151469, "body": "1) it assumes the input and output files are different, which is not generally the case when someone is trying to do in-place file manipulation 2) the <code>line</code> cookbook mentioned below demonstrates a resource-oriented API, using raw Ruby code is only ever done as a fallback for exceptional situations. Over-use of Ruby code leads to unreadable and unmaintainable recipes."}, {"owner": {"reputation": 43208, "user_id": 78722, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf611565f0b79abd0b3dc200ad867661?s=128&d=identicon&r=PG", "display_name": "coderanger", "link": "https://stackoverflow.com/users/78722/coderanger"}, "edited": false, "score": 0, "creation_date": 1483562586, "post_id": 41458053, "comment_id": 70151499, "body": "i.e. this answer cannot be corrected, it&#39;s fundamentally incorrect and should be removed."}], "tags": [], "owner": {"reputation": 25823, "user_id": 24468, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/PWl6C.png?s=128&g=1", "display_name": "akuhn", "link": "https://stackoverflow.com/users/24468/akuhn"}, "is_accepted": false, "score": 2, "last_activity_date": 1483516603, "last_edit_date": 1483516603, "creation_date": 1483513559, "answer_id": 41458053, "question_id": 41457415, "link": "https://stackoverflow.com/questions/41457415/ruby-find-a-line-in-a-file-and-add-below-it/41458053#41458053", "title": "Ruby find a line in a file and add below it", "body": "<p>Try this</p>\n\n<pre><code>File.open('input') do |i|\n  File.open('output', 'w') do |o|\n    while line = i.gets\n      o.puts line\n      if line.chomp == \"# PLACE YOUR CONFIGURATION MEMORY start up here:\"\n        o.puts \"MEM_ARGS=-Xms512m -Xmx1024m\"\n      end\n    end\n  end\nend\n`mv output input`\n</code></pre>\n\n<p>How does this work?</p>\n\n<ul>\n<li>First open the input file, will fail with <code>Errno::ENOENT</code> if it does not exist</li>\n<li>Then open the output file</li>\n<li>Streams through them line by line</li>\n<li>Inserts additional lines after marker line, <code>chomp</code> removes trailing linebreak</li>\n<li>The <code>do end</code> blocks automagically close both files</li>\n<li>Eventually replaces input with <code>mv</code></li>\n</ul>\n"}, {"tags": [], "owner": {"reputation": 43208, "user_id": 78722, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf611565f0b79abd0b3dc200ad867661?s=128&d=identicon&r=PG", "display_name": "coderanger", "link": "https://stackoverflow.com/users/78722/coderanger"}, "is_accepted": false, "score": 3, "last_activity_date": 1483562387, "creation_date": 1483562387, "answer_id": 41472842, "question_id": 41457415, "link": "https://stackoverflow.com/questions/41457415/ruby-find-a-line-in-a-file-and-add-below-it/41472842#41472842", "title": "Ruby find a line in a file and add below it", "body": "<p>The correct-er way to do this in Chef is the <code>line</code> cookbook, which has resources for managing this kind of in-place file manipulation. However, we strongly recommend against using it as it is very easy to write a bad regex or whatnot and up with a non-convergent system. Managing the whole file with a <code>template</code> resource is preferred. </p>\n"}], "owner": {"reputation": 8205, "user_id": 373784, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/2f107ff9d44f2d9968e425689724383f?s=128&d=identicon&r=PG", "display_name": "Mark Estrada", "link": "https://stackoverflow.com/users/373784/mark-estrada"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 649, "favorite_count": 0, "answer_count": 2, "score": 2, "last_activity_date": 1483562387, "creation_date": 1483510935, "question_id": 41457415, "link": "https://stackoverflow.com/questions/41457415/ruby-find-a-line-in-a-file-and-add-below-it", "title": "Ruby find a line in a file and add below it", "body": "<p>I have a text file that I need to edit in a chef recipe.\nI need to find this particular line (in bold), and insert configuration below it.</p>\n\n<pre><code>.\n.\n.\n# PLACE YOUR CONFIGURATION MEMORY start up here :\n&lt;INSERT MEMORY ARGUMENTS HERE&gt;\n.\n.\n.\n.\n</code></pre>\n\n<p>Here is what I have been trying..I just would like to know is there some sort of functionality in Ruby\nwhere I could find a line and then below that line add new entry?</p>\n\n<pre><code>ruby_block \"edit the configuration file \" do\n  block do \n    text = File.read(file_name)\n    replace = text.sub(/# PLACE YOUR CONFIGURATION MEMORY start up here :/, \"MEM_ARGS=-Xms512m -Xmx1024m\");\n    File.write(file_name, replace)\n  end\nend\n</code></pre>\n\n<p>I don't want to replace the comment section though, I just want to make use of it as an anchor where I could add new lines of text.</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "answers": [{"comments": [{"owner": {"reputation": 69, "user_id": 7361762, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/cc52a6895498db9f54d6759fdcc895f0?s=128&d=identicon&r=PG&f=1", "display_name": "Rose2017", "link": "https://stackoverflow.com/users/7361762/rose2017"}, "edited": false, "score": 0, "creation_date": 1483509422, "post_id": 41456731, "comment_id": 70120230, "body": "thx, ur comment. I wrote my code like yours,but I got errors like ActiveRecord::RecordNotFound in HomeController#index Couldn&#39;t find User with &#39;id&#39;="}, {"owner": {"reputation": 1289, "user_id": 6583381, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/IoEUj.jpg?s=128&g=1", "display_name": "oj5th", "link": "https://stackoverflow.com/users/6583381/oj5th"}, "reply_to_user": {"reputation": 69, "user_id": 7361762, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/cc52a6895498db9f54d6759fdcc895f0?s=128&d=identicon&r=PG&f=1", "display_name": "Rose2017", "link": "https://stackoverflow.com/users/7361762/rose2017"}, "edited": false, "score": 0, "creation_date": 1483509702, "post_id": 41456731, "comment_id": 70120317, "body": "@Rose2017, additional, why are you using 2 request with the same method <code>home#index</code>? What is your goal with it?"}, {"owner": {"reputation": 69, "user_id": 7361762, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/cc52a6895498db9f54d6759fdcc895f0?s=128&d=identicon&r=PG&f=1", "display_name": "Rose2017", "link": "https://stackoverflow.com/users/7361762/rose2017"}, "edited": false, "score": 0, "creation_date": 1483509986, "post_id": 41456731, "comment_id": 70120408, "body": "I wanna make a server that app users can login &amp; logout, but I am a beginner so I don&#39;t know why mu code are wrong.u told me that Im  using 2 request with the same method home#index,which parts are 2 requests?I thought my code have only if-else method."}, {"owner": {"reputation": 1289, "user_id": 6583381, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/IoEUj.jpg?s=128&g=1", "display_name": "oj5th", "link": "https://stackoverflow.com/users/6583381/oj5th"}, "reply_to_user": {"reputation": 69, "user_id": 7361762, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/cc52a6895498db9f54d6759fdcc895f0?s=128&d=identicon&r=PG&f=1", "display_name": "Rose2017", "link": "https://stackoverflow.com/users/7361762/rose2017"}, "edited": false, "score": 0, "creation_date": 1483510533, "post_id": 41456731, "comment_id": 70120620, "body": "@Rose2017, please check my answer I have updated it."}, {"owner": {"reputation": 1289, "user_id": 6583381, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/IoEUj.jpg?s=128&g=1", "display_name": "oj5th", "link": "https://stackoverflow.com/users/6583381/oj5th"}, "reply_to_user": {"reputation": 69, "user_id": 7361762, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/cc52a6895498db9f54d6759fdcc895f0?s=128&d=identicon&r=PG&f=1", "display_name": "Rose2017", "link": "https://stackoverflow.com/users/7361762/rose2017"}, "edited": false, "score": 0, "creation_date": 1483511237, "post_id": 41456731, "comment_id": 70120905, "body": "@Rose2017, is it worked? If it is, please accept my answer. Thanks!"}], "tags": [], "owner": {"reputation": 1289, "user_id": 6583381, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/IoEUj.jpg?s=128&g=1", "display_name": "oj5th", "link": "https://stackoverflow.com/users/6583381/oj5th"}, "is_accepted": true, "score": 0, "last_activity_date": 1483510506, "last_edit_date": 1483510506, "creation_date": 1483507463, "answer_id": 41456731, "question_id": 41456695, "link": "https://stackoverflow.com/questions/41456695/nomethoderror-undefined-method/41456731#41456731", "title": "NoMethodError\u3000undefined method", "body": "<p>You don't have a value for <code>@user</code> that's why it says undefinded method <code>id</code>. You must have value for it like:</p>\n\n<pre><code>@user = User.find(params[:id])\n</code></pre>\n\n<p>or </p>\n\n<pre><code>@user = User.first\n</code></pre>\n\n<p>On your code:</p>\n\n<pre><code>def index\n  @user = User.first # defined User here like code on this line I added\n  @id = params[:id]\n  @email = [:email]\n  if @id == @user.id  &amp;&amp; @email == @user.email\n    render :text =&gt;   \"\u6210\u529f\"\n  else\n    render :text =&gt;   \"\u5931\u6557\"\n  end\nend\n</code></pre>\n\n<p>You should make sure that you defined it. If you have <code>before_filter :your_method_define_user, only: [:index]</code>, make sure that <code>:your_method_define_user</code> has a value for <code>@user</code>.</p>\n\n<p>As @Deepak Mahakale written above. I guess you are confused. Try the full code:</p>\n\n<p><strong>UPDATED:</strong></p>\n\n<p>Your routes:</p>\n\n<pre><code>Rails.application.routes.draw do\n  devise_for :users\n  get 'home/index' # you must decide what to use post or get. But I use get here as default how index method is implemented in rails.\n  root to: \"home#index\"\nend\n</code></pre>\n\n<p>Your controller:</p>\n\n<pre><code>class HomeController &lt; ApplicationController\n  before_filter :find_user, only: [:index]\n\n  def index \n    @id = params[:id]\n    @email = [:email]\n    if @id == @user.id  &amp;&amp; @email == @user.email\n      render :text =&gt;   \"\u6210\u529f\"\n    else\n      render :text =&gt;   \"\u5931\u6557\"\n    end\n  end\n\n  def create\n    userData = UserData.new(create_params)\n    user = User.find(params[:id]).to_json\n\n    # \u30a8\u30e9\u30fc\u51e6\u7406\n    unless  userData.save\n      @error_message = [memo.errors.full_messages].compact\n    end\n  end\n\n\n\n  private\n\n    def find_user\n      @user = User.find(params[:id]) # You should specify this code what are your comparing to.\n    end\nend\n</code></pre>\n\n<p>Add you should pass the parameters in url if you use get request, like:</p>\n\n<pre><code>localhost:3000/home?id=&lt;your_id&gt;&amp;email=&lt;email_address&gt;\n</code></pre>\n\n<p>and if post pass it on the fields provided in your form.</p>\n"}, {"comments": [{"owner": {"reputation": 1289, "user_id": 6583381, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/IoEUj.jpg?s=128&g=1", "display_name": "oj5th", "link": "https://stackoverflow.com/users/6583381/oj5th"}, "edited": false, "score": 0, "creation_date": 1483508211, "post_id": 41456734, "comment_id": 70119791, "body": "Change  <code>@user = current_user</code> to <code>@user = find_user</code> so he can&#39;t will not confuse."}, {"owner": {"reputation": 19261, "user_id": 4758119, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/F4dJY.jpg?s=128&g=1", "display_name": "Deepak Mahakale", "link": "https://stackoverflow.com/users/4758119/deepak-mahakale"}, "reply_to_user": {"reputation": 1289, "user_id": 6583381, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/IoEUj.jpg?s=128&g=1", "display_name": "oj5th", "link": "https://stackoverflow.com/users/6583381/oj5th"}, "edited": false, "score": 0, "creation_date": 1483508297, "post_id": 41456734, "comment_id": 70119811, "body": "In the first solution I am not calling the private method but <code>current_user</code> helper which will give you current logged in user , Its from devise"}, {"owner": {"reputation": 19261, "user_id": 4758119, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/F4dJY.jpg?s=128&g=1", "display_name": "Deepak Mahakale", "link": "https://stackoverflow.com/users/4758119/deepak-mahakale"}, "reply_to_user": {"reputation": 1289, "user_id": 6583381, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/IoEUj.jpg?s=128&g=1", "display_name": "oj5th", "link": "https://stackoverflow.com/users/6583381/oj5th"}, "edited": false, "score": 0, "creation_date": 1483508350, "post_id": 41456734, "comment_id": 70119837, "body": "I changed it to <code>User.find(id)</code>"}, {"owner": {"reputation": 1289, "user_id": 6583381, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/IoEUj.jpg?s=128&g=1", "display_name": "oj5th", "link": "https://stackoverflow.com/users/6583381/oj5th"}, "edited": false, "score": 0, "creation_date": 1483508453, "post_id": 41456734, "comment_id": 70119877, "body": "So, what&#39;s the use of your before filter now in your answer? If you included <code>user = User.find(params[:id])</code> in the index?"}, {"owner": {"reputation": 19261, "user_id": 4758119, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/F4dJY.jpg?s=128&g=1", "display_name": "Deepak Mahakale", "link": "https://stackoverflow.com/users/4758119/deepak-mahakale"}, "reply_to_user": {"reputation": 1289, "user_id": 6583381, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/IoEUj.jpg?s=128&g=1", "display_name": "oj5th", "link": "https://stackoverflow.com/users/6583381/oj5th"}, "edited": false, "score": 0, "creation_date": 1483508474, "post_id": 41456734, "comment_id": 70119885, "body": "It&#39;s second solution"}, {"owner": {"reputation": 69, "user_id": 7361762, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/cc52a6895498db9f54d6759fdcc895f0?s=128&d=identicon&r=PG&f=1", "display_name": "Rose2017", "link": "https://stackoverflow.com/users/7361762/rose2017"}, "edited": false, "score": 0, "creation_date": 1483508703, "post_id": 41456734, "comment_id": 70119970, "body": "@DeepakMahakale thx,ur comment. I wrote my codes like u wrote above,"}, {"owner": {"reputation": 1289, "user_id": 6583381, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/IoEUj.jpg?s=128&g=1", "display_name": "oj5th", "link": "https://stackoverflow.com/users/6583381/oj5th"}, "edited": false, "score": 0, "creation_date": 1483508805, "post_id": 41456734, "comment_id": 70120005, "body": "It is much better now."}, {"owner": {"reputation": 69, "user_id": 7361762, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/cc52a6895498db9f54d6759fdcc895f0?s=128&d=identicon&r=PG&f=1", "display_name": "Rose2017", "link": "https://stackoverflow.com/users/7361762/rose2017"}, "edited": false, "score": 0, "creation_date": 1483508970, "post_id": 41456734, "comment_id": 70120059, "body": "class HomeController &lt; ApplicationController   before_filter :find_user  private  def find_user   @user = User.find(params[:id]) # or current_user implement this according to your logic end"}, {"owner": {"reputation": 19261, "user_id": 4758119, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/F4dJY.jpg?s=128&g=1", "display_name": "Deepak Mahakale", "link": "https://stackoverflow.com/users/4758119/deepak-mahakale"}, "edited": false, "score": 0, "creation_date": 1483509030, "post_id": 41456734, "comment_id": 70120086, "body": "what are exacly comparing? params[:id] with logged in user or some specific user?"}, {"owner": {"reputation": 1289, "user_id": 6583381, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/IoEUj.jpg?s=128&g=1", "display_name": "oj5th", "link": "https://stackoverflow.com/users/6583381/oj5th"}, "reply_to_user": {"reputation": 69, "user_id": 7361762, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/cc52a6895498db9f54d6759fdcc895f0?s=128&d=identicon&r=PG&f=1", "display_name": "Rose2017", "link": "https://stackoverflow.com/users/7361762/rose2017"}, "edited": false, "score": 0, "creation_date": 1483509107, "post_id": 41456734, "comment_id": 70120125, "body": "@Rose2017, you should add the private method in your code, let me update my answer below and try to use it."}, {"owner": {"reputation": 1289, "user_id": 6583381, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/IoEUj.jpg?s=128&g=1", "display_name": "oj5th", "link": "https://stackoverflow.com/users/6583381/oj5th"}, "reply_to_user": {"reputation": 69, "user_id": 7361762, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/cc52a6895498db9f54d6759fdcc895f0?s=128&d=identicon&r=PG&f=1", "display_name": "Rose2017", "link": "https://stackoverflow.com/users/7361762/rose2017"}, "edited": false, "score": 0, "creation_date": 1483509276, "post_id": 41456734, "comment_id": 70120179, "body": "@Rose2017, check my answer below. Check the full code I have written"}, {"owner": {"reputation": 69, "user_id": 7361762, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/cc52a6895498db9f54d6759fdcc895f0?s=128&d=identicon&r=PG&f=1", "display_name": "Rose2017", "link": "https://stackoverflow.com/users/7361762/rose2017"}, "edited": false, "score": 0, "creation_date": 1483509323, "post_id": 41456734, "comment_id": 70120196, "body": "@DeepakMahakale I wrote my code like u wrote, but I got a error like ActiveRecord::RecordNotFound in HomeController#index Couldn&#39;t find User with &#39;id&#39;= So,what should I do ?Why does ur code work?"}, {"owner": {"reputation": 19261, "user_id": 4758119, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/F4dJY.jpg?s=128&g=1", "display_name": "Deepak Mahakale", "link": "https://stackoverflow.com/users/4758119/deepak-mahakale"}, "edited": false, "score": 0, "creation_date": 1483509383, "post_id": 41456734, "comment_id": 70120217, "body": "That means you don&#39;t have the record with <code>id = whatever value you are passing</code>"}, {"owner": {"reputation": 19261, "user_id": 4758119, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/F4dJY.jpg?s=128&g=1", "display_name": "Deepak Mahakale", "link": "https://stackoverflow.com/users/4758119/deepak-mahakale"}, "edited": false, "score": 0, "creation_date": 1483509415, "post_id": 41456734, "comment_id": 70120229, "body": "Make sure you are passing the id of available record"}], "tags": [], "owner": {"reputation": 19261, "user_id": 4758119, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/F4dJY.jpg?s=128&g=1", "display_name": "Deepak Mahakale", "link": "https://stackoverflow.com/users/4758119/deepak-mahakale"}, "is_accepted": false, "score": 1, "last_activity_date": 1483508548, "last_edit_date": 1483508548, "creation_date": 1483507470, "answer_id": 41456734, "question_id": 41456695, "link": "https://stackoverflow.com/questions/41456695/nomethoderror-undefined-method/41456734#41456734", "title": "NoMethodError\u3000undefined method", "body": "<blockquote>\n  <p>NoMethodError in HomeController#index undefined method `id' for nil:NilClass .</p>\n</blockquote>\n\n<p>@user is <code>nil</code> in index action</p>\n\n<p>You need to set the <code>@user</code> first in index action or in <code>before_filter</code></p>\n\n<p><strong>Solution 1</strong></p>\n\n<pre><code>def index\n  @id = params[:id]\n  @email = [:email]\n  @user = User.find(params[:id]) # or current_user whatever your logic is\n  if @id == @user.id  &amp;&amp; @email == @user.email\n    render :text =&gt;   \"\u6210\u529f\"\n  else\n    render :text =&gt;   \"\u5931\u6557\"\n  end\nend\n</code></pre>\n\n<p><strong>Solution 2</strong></p>\n\n<p>Add a <code>before_filter</code> for <code>index</code> action</p>\n\n<pre><code>before_filter :find_user, only: [:index]\n\nprivate\n\ndef find_user\n  @user = User.find(params[:id]) # or current_user implement this according to your logic\nend\n</code></pre>\n"}], "owner": {"reputation": 69, "user_id": 7361762, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/cc52a6895498db9f54d6759fdcc895f0?s=128&d=identicon&r=PG&f=1", "display_name": "Rose2017", "link": "https://stackoverflow.com/users/7361762/rose2017"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 743, "favorite_count": 0, "accepted_answer_id": 41456731, "answer_count": 2, "score": 0, "last_activity_date": 1483510506, "creation_date": 1483507256, "last_edit_date": 1483507976, "question_id": 41456695, "link": "https://stackoverflow.com/questions/41456695/nomethoderror-undefined-method", "title": "NoMethodError\u3000undefined method", "body": "<p>I got a error that </p>\n\n<blockquote>\n  <p>NoMethodError in HomeController#index undefined method `id' for nil:NilClass .</p>\n</blockquote>\n\n<pre><code>@id = params[:id]\n@email = [:email]\nif @id == @user.id  &amp;&amp; @email == @user.email\n  render :text =&gt;   \"sucsess\"\nelse\n  render :text =&gt;   \"fail\"\n</code></pre>\n\n<p>Error message told me these codes were strange.It says <code>undefined method 'id'</code>,so is <code>@id</code> of if <code>@id == @user.id</code> seem method?(I think I define <code>@id</code> is variable)</p>\n\n<p>What should I do to fix it?</p>\n\n<p><strong>home_controller</strong></p>\n\n<pre><code>class HomeController &lt; ApplicationController\n  def index \n    @id = params[:id]\n    @email = [:email]\n    if @id == @user.id  &amp;&amp; @email == @user.email\n      render :text =&gt;   \"\u6210\u529f\"\n    else\n      render :text =&gt;   \"\u5931\u6557\"\n    end\n  end\n\n  def create\n    userData = UserData.new(create_params)\n    user = User.find(params[:id]).to_json\n\n    # \u30a8\u30e9\u30fc\u51e6\u7406\n    unless  userData.save\n      @error_message = [memo.errors.full_messages].compact\n    end\n  end\nend\n</code></pre>\n\n<p><strong>routes.rb</strong></p>\n\n<pre><code>Rails.application.routes.draw do\n  devise_for :users\n  root to: \"home#index\"\n  get 'home/index'\n  post 'home/index'\n\n  namespace :home, default: {format: :json} do\n    resources :index, only: :create\n  end\nend\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "tree", "binary-tree", "breadth-first-search"], "answers": [{"comments": [{"owner": {"reputation": 233, "user_id": 5890013, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/Vd4YG.jpg?s=128&g=1", "display_name": "DustinRW", "link": "https://stackoverflow.com/users/5890013/dustinrw"}, "edited": false, "score": 0, "creation_date": 1483511932, "post_id": 41457269, "comment_id": 70121199, "body": "Thanks.  I had to modify what you provided. It does what I needed and you helped me understand BFS more along with <code>Queue</code> that I didn&#39;t know about."}, {"owner": {"reputation": 14827, "user_id": 645886, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2abb0123e9484284a9cb2d36aa9854b3?s=128&d=identicon&r=PG&f=1", "display_name": "Surya", "link": "https://stackoverflow.com/users/645886/surya"}, "reply_to_user": {"reputation": 233, "user_id": 5890013, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/Vd4YG.jpg?s=128&g=1", "display_name": "DustinRW", "link": "https://stackoverflow.com/users/5890013/dustinrw"}, "edited": false, "score": 0, "creation_date": 1483512372, "post_id": 41457269, "comment_id": 70121400, "body": "@DustinRW : Question was on searching than traversing, like I stated in my answer, you can easily modify the approach to just traverse the tree if you do not wish to search."}], "tags": [], "owner": {"reputation": 14827, "user_id": 645886, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2abb0123e9484284a9cb2d36aa9854b3?s=128&d=identicon&r=PG&f=1", "display_name": "Surya", "link": "https://stackoverflow.com/users/645886/surya"}, "is_accepted": true, "score": 1, "last_activity_date": 1483510301, "creation_date": 1483510301, "answer_id": 41457269, "question_id": 41456221, "link": "https://stackoverflow.com/questions/41456221/printing-out-breadth-first-search-using-ruby/41457269#41457269", "title": "Printing out Breadth First Search using Ruby", "body": "<p>Level order traversal in Tree is inspired by BFS of Graph, in level order we use queue to traverse through the tree and keep pushing left and right nodes until the queue is empty or the node is found(if we're searching for one). Here is a typical example of the same:</p>\n\n<pre><code>def bfs(node)\n  return nil if node.nil? || root.nil? # nothing to do if there is no node or root to begin the search\n  queue = Queue.new\n  queue.enq(root)\n  result = nil\n  while !queue.empty?\n    value = queue.deq\n    if value.title == node.title &amp;&amp; value.rating == node.rating\n      result = value\n      break\n    end\n\n    # keep moving the levels in tree by pushing left and right nodes of tree in queue\n    queue.enq(value.left) if value.left\n    queue.enq(value.right) if value.right\n  end\n\n  result # returns node found in BST else default value nil\nend\n</code></pre>\n\n<p>Assuming that <code>root</code> is a getter method in your BST class. Class <code>Queue</code> is available in Ruby using thread. You might have to do <code>require 'thread'</code> in your code to have it available in your code.</p>\n\n<p>Time Complexity: O(n)</p>\n\n<p>Space Complexity: O(n) for queue.</p>\n"}, {"tags": [], "owner": {"reputation": 233, "user_id": 5890013, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/Vd4YG.jpg?s=128&g=1", "display_name": "DustinRW", "link": "https://stackoverflow.com/users/5890013/dustinrw"}, "is_accepted": false, "score": 0, "last_activity_date": 1483512035, "creation_date": 1483512035, "answer_id": 41457697, "question_id": 41456221, "link": "https://stackoverflow.com/questions/41456221/printing-out-breadth-first-search-using-ruby/41457697#41457697", "title": "Printing out Breadth First Search using Ruby", "body": "<p><strong>modified from above</strong></p>\n\n<pre><code>  def printf(node)\n    return nil if node.nil?\n    queue = Queue.new\n    queue.enq(node)\n    result = nil\n    while !queue.empty?\n      value = queue.deq\n      puts value.title if !value.title.nil?\n      # keep moving the levels in tree by pushing left and right nodes of tree in queue\n      queue.enq(value.left) if value.left\n      queue.enq(value.right) if value.right\n    end\n  end\n</code></pre>\n"}], "owner": {"reputation": 233, "user_id": 5890013, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/Vd4YG.jpg?s=128&g=1", "display_name": "DustinRW", "link": "https://stackoverflow.com/users/5890013/dustinrw"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1998, "favorite_count": 0, "accepted_answer_id": 41457269, "answer_count": 2, "score": 0, "last_activity_date": 1483512035, "creation_date": 1483504153, "last_edit_date": 1483505707, "question_id": 41456221, "link": "https://stackoverflow.com/questions/41456221/printing-out-breadth-first-search-using-ruby", "title": "Printing out Breadth First Search using Ruby", "body": "<p>Exploring various examples via the Web, I cannot seem to implement printing my binary tree with a breadth first example.  I'm given a hint with <code>children=nil</code> within <code>#printf(children=nil)</code>, but cannot get anything going.  I'm provided the idea of created a queue <em>array</em> or two, but my particular function is not performing a search or passing in any argument.  I simply want to print my tree from top node on down.</p>\n\n<p><strong>Output of binary tree</strong></p>\n\n<pre><code>=&gt; #&lt;BinarySearchTree:0x007fbe40b044c8 @root=#&lt;Node:0x007fbe40b044f0 @title=\"The Matrix\", @rating=87, @parent=nil, @left=#&lt;Node:0x007fbe40b04478 @title=\"Pacific Rim\", @rating=72, @parent=#&lt;Node:0x007fbe40b044f0 ...&gt;, @left=nil, @right=#&lt;Node:0x007fbe40b04428 @title=\"Braveheart\", @rating=78, @parent=#&lt;Node:0x007fbe40b04478 ...&gt;, @left=nil, @right=nil&gt;&gt;, @right=#&lt;Node:0x007fbe40b042e8 @title=\"District 9\", @rating=90, @parent=#&lt;Node:0x007fbe40b044f0 ...&gt;, @left=nil, @right=#&lt;Node:0x007fbe40b04298 @title=\"The Shawshank Redemption\", @rating=91, @parent=#&lt;Node:0x007fbe40b042e8 ...&gt;, @left=nil, @right=nil&gt;&gt;&gt;&gt;\n</code></pre>\n\n<p><strong>output of function SHOULD look like:</strong></p>\n\n<pre><code>The Matrix: 87\nPacific Rim: 72\nDistrict 9: 90\nBraveheart: 78\nShawshank: 91\n...\n</code></pre>\n\n<p><strong>my print function</strong></p>\n\n<pre><code>def printf(children=nil)\n  current = @root\n  queue = [current]\n\n  if current.left &amp;&amp; current.right\n    queue &lt;&lt; current.left &lt;&lt; current.right\n    puts queue.methods.sort\n  elsif current.right\n    queue &lt;&lt; current.right\n  end\n\n  queue.each do |i|\n    #print out my created array\n  end\nend\n</code></pre>\n\n<p>Puzzled of how to move through my binary tree object given this particular example and what I have now won't work, especially as the tree expands.  Ideas or advice?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-3", "ruby-on-rails-4"], "comments": [{"owner": {"reputation": 300, "user_id": 3473435, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/REx46.jpg?s=128&g=1", "display_name": "abhi110892", "link": "https://stackoverflow.com/users/3473435/abhi110892"}, "edited": false, "score": 0, "creation_date": 1483504363, "post_id": 41456166, "comment_id": 70118690, "body": "I can&#39;t see new post link in your header file."}, {"owner": {"reputation": 3134, "user_id": 3884750, "user_type": "registered", "accept_rate": 62, "profile_image": "https://graph.facebook.com/100003183948251/picture?type=large", "display_name": "Oleg  Sobchuk", "link": "https://stackoverflow.com/users/3884750/oleg-sobchuk"}, "edited": false, "score": 1, "creation_date": 1483516411, "post_id": 41456166, "comment_id": 70123191, "body": "<code>rake routes</code> will help you"}, {"owner": {"reputation": 4101, "user_id": 1482055, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/f4D9p.jpg?s=128&g=1", "display_name": "Milind", "link": "https://stackoverflow.com/users/1482055/milind"}, "edited": false, "score": 0, "creation_date": 1484870297, "post_id": 41456166, "comment_id": 70700144, "body": "Did you tried the recommendations that i mentioned ?"}], "answers": [{"comments": [{"owner": {"reputation": 10702, "user_id": 2079103, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/XlVYy.png?s=128&g=1", "display_name": "clearlight", "link": "https://stackoverflow.com/users/2079103/clearlight"}, "edited": false, "score": 0, "creation_date": 1483508946, "post_id": 41456279, "comment_id": 70120052, "body": "To brief and vague. Pls explain how it solves the questioner&#39;s problem and relates to the post."}], "tags": [], "owner": {"reputation": 300, "user_id": 3473435, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/REx46.jpg?s=128&g=1", "display_name": "abhi110892", "link": "https://stackoverflow.com/users/3473435/abhi110892"}, "is_accepted": false, "score": 1, "last_activity_date": 1483504577, "creation_date": 1483504577, "answer_id": 41456279, "question_id": 41456166, "link": "https://stackoverflow.com/questions/41456166/routes-not-working-correctly/41456279#41456279", "title": "Routes not working correctly", "body": "<p>code for link to new post   </p>\n\n<pre><code>&lt;%= link_to \"New Post\", new_post_path %&gt;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 667, "user_id": 6141597, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8d52107448cce3dc1010f66ceb534270?s=128&d=identicon&r=PG&f=1", "display_name": "abax", "link": "https://stackoverflow.com/users/6141597/abax"}, "is_accepted": false, "score": 1, "last_activity_date": 1483504591, "creation_date": 1483504591, "answer_id": 41456281, "question_id": 41456166, "link": "https://stackoverflow.com/questions/41456166/routes-not-working-correctly/41456281#41456281", "title": "Routes not working correctly", "body": "<p>Try <code>new_post_path</code></p>\n\n<p>Also, <code>rake routes</code> in terminal will list all the routes and associated helpers for you to double check against.</p>\n\n<p>Finally, adding 'as' to: <code>get  '/posts', to: 'posts#new', as: 'new_post'</code> in your routes file will allow you to define your own path name (in this case new_post_path, but you can set it as anything you'd like).</p>\n"}, {"tags": [], "owner": {"reputation": 95, "user_id": 4337475, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5b1e1604fc185d1a760f8fd721434363?s=128&d=identicon&r=PG&f=1", "display_name": "RamPrasad Reddy", "link": "https://stackoverflow.com/users/4337475/ramprasad-reddy"}, "is_accepted": false, "score": 1, "last_activity_date": 1483505679, "creation_date": 1483505679, "answer_id": 41456428, "question_id": 41456166, "link": "https://stackoverflow.com/questions/41456166/routes-not-working-correctly/41456428#41456428", "title": "Routes not working correctly", "body": "<pre><code>&lt;%= link_to \"Posts\", posts_path %&gt; corresponds to index action not to the new action.\n</code></pre>\n\n<p>Remove the only condition for your posts controller in routes.rb which will create all the basic routes needed rather than specific routes.</p>\n\n<pre><code>resources :posts\n</code></pre>\n\n<p>So, new_post_path returns /posts/new</p>\n\n<p>Finally add a link link <code>&lt;%= link_to 'New Post', new_post_path %&gt;</code></p>\n"}, {"tags": [], "owner": {"reputation": 234, "user_id": 5992270, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/95add28d8792fa4af0f190344db456ac?s=128&d=identicon&r=PG", "display_name": "Stephen W", "link": "https://stackoverflow.com/users/5992270/stephen-w"}, "is_accepted": false, "score": 2, "last_activity_date": 1484281398, "creation_date": 1484281398, "answer_id": 41627346, "question_id": 41456166, "link": "https://stackoverflow.com/questions/41456166/routes-not-working-correctly/41627346#41627346", "title": "Routes not working correctly", "body": "<p>I would suggest that you remove <code>get 'posts/new'</code> &amp; <code>get  '/posts', to: 'posts#new', as: 'new_post'</code> as these are duplicate routes. </p>\n\n<p>You already have the correct route created in the route <code>resources :posts, only: [:new, :create, :destroy]</code>. By including <code>new</code>, Rails is doing this portion for you. See here: <a href=\"http://guides.rubyonrails.org/v4.2/routing.html#crud-verbs-and-actions\" rel=\"nofollow noreferrer\">http://guides.rubyonrails.org/v4.2/routing.html#crud-verbs-and-actions</a></p>\n\n<p>Then you should be able to use the link that everyone else has posted. \n<code>&lt;%= link_to \"New Post\", new_post_path %&gt;</code> based on the guide here: <a href=\"http://guides.rubyonrails.org/v4.2/routing.html#path-and-url-helpers\" rel=\"nofollow noreferrer\">http://guides.rubyonrails.org/v4.2/routing.html#path-and-url-helpers</a></p>\n"}, {"tags": [], "owner": {"reputation": 21, "user_id": 6537594, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/7ac8d0821faa321c7c06e506d0f4979c?s=128&d=identicon&r=PG&f=1", "display_name": "Prabha", "link": "https://stackoverflow.com/users/6537594/prabha"}, "is_accepted": false, "score": 1, "last_activity_date": 1484738465, "creation_date": 1484738465, "answer_id": 41718106, "question_id": 41456166, "link": "https://stackoverflow.com/questions/41456166/routes-not-working-correctly/41718106#41718106", "title": "Routes not working correctly", "body": "<p>This may be helps to redirect,<br>\nin <strong>routes.rb</strong>,    </p>\n\n<pre><code>resources :posts  \n</code></pre>\n\n<p>It gives the paths to all default controller methods like index, new, create, edit, update, show, destroy. Then check with rake routes. Get the corresponding path like,    </p>\n\n<pre><code>new_post GET      /posts/new(.:format)                    posts#new  \n</code></pre>\n\n<p>if it correct means give the url like,    </p>\n\n<p><code>&lt;%= link_to 'New Post', new_post_path %&gt;</code><br>\nIt redirects to method new in controller and render corresponding html.erb page. This url formed by the routes.rb.</p>\n\n<p><strong>OR</strong></p>\n\n<p>push the redirection url manually.In html page,    </p>\n\n<pre><code>&lt;%= button_tag \"New\", :onclick =&gt; \"getNew()\" %&gt;   \nfunction getNew(){\n        var form = document.forms[0];\n        // get the id and value with any variable // \n        form.method = \"post\";       \n        // pass the value to parameters //\n        form.var name = column name; (description r picture) \n        form.action = \"posts/new\";\n        form.submit();\n    }  \n</code></pre>\n\n<p>in routes.rb,    </p>\n\n<pre><code>match '/posts/new' =&gt; 'posts#new', via: [:get, :post]  \n</code></pre>\n\n<p>It makes the manual redirection url. It calls the new in controller method.<br>\nLet me know your feedback! Thanks</p>\n"}, {"tags": [], "owner": {"reputation": 3048, "user_id": 2374626, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/Z78U0.jpg?s=128&g=1", "display_name": "Satishakumar Awati", "link": "https://stackoverflow.com/users/2374626/satishakumar-awati"}, "is_accepted": true, "score": 1, "last_activity_date": 1484739433, "creation_date": 1484739433, "answer_id": 41718440, "question_id": 41456166, "link": "https://stackoverflow.com/questions/41456166/routes-not-working-correctly/41718440#41718440", "title": "Routes not working correctly", "body": "<p>Rails scans the routes from top to bottom <strong>i.e. routes.rb</strong>. Whenever it finds the matching routes corresponding <strong>controller#action</strong> gets executed and remaining all will be skipped(later routes after match found).</p>\n\n<p>In this case routes are conflicting, So do bellow changeseverything will work fine.\n    config/routes.rb</p>\n\n<pre><code>Rails.application.routes.draw do\nget 'sessions/new'\nroot 'static_pages#home'\nget  '/search', to: 'static_pages#search'\nget  '/login', to: 'sessions#new'\n#get  '/posts', to: 'posts#new', as: 'new_post' #not required as resources :posts will do the job in last line\npost  '/login', to: 'sessions#create'\ndelete  '/logout', to: 'sessions#destroy'\nget  '/signup', to: 'users#new'\nget 'users/new'\nget 'static_pages/home'\nget 'posts/new', to: 'posts#new', as: 'posts_new_path'  #Made changes here according to helper used in view 'posts_new_path'\nget 'sessions/new'\nresources :users\nresources :account_activations, only: [:edit]\nresources :password_resets, only: [:new, :create, :edit, :update]\nresources :posts, only: [:new, :create, :destroy]\nend \n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 71, "user_id": 3908923, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/pawxL.jpg?s=128&g=1", "display_name": "Sumit Dey", "link": "https://stackoverflow.com/users/3908923/sumit-dey"}, "is_accepted": false, "score": 1, "last_activity_date": 1484740991, "creation_date": 1484740991, "answer_id": 41718940, "question_id": 41456166, "link": "https://stackoverflow.com/questions/41456166/routes-not-working-correctly/41718940#41718940", "title": "Routes not working correctly", "body": "<p>As per your rake routes output the following should work</p>\n\n<pre><code>&lt;%= link_to \"New Post\", posts_new_path %&gt;\n</code></pre>\n\n<p>Please let us know whether there any error comming in the console log on clicking the new post link.</p>\n"}, {"tags": [], "owner": {"reputation": 520, "user_id": 7199345, "user_type": "registered", "accept_rate": 35, "profile_image": "https://i.stack.imgur.com/ygMl8.jpg?s=128&g=1", "display_name": "Sachin srinivasan", "link": "https://stackoverflow.com/users/7199345/sachin-srinivasan"}, "is_accepted": false, "score": 2, "last_activity_date": 1484742129, "creation_date": 1484742129, "answer_id": 41719310, "question_id": 41456166, "link": "https://stackoverflow.com/questions/41456166/routes-not-working-correctly/41719310#41719310", "title": "Routes not working correctly", "body": "<p>The problem is there is conflict occurring in your routes.\nYou have defined routes twice for <code>new</code>  </p>\n\n<pre><code>get /posts', to: 'posts#new', as: 'new_post'\n</code></pre>\n\n<p>and </p>\n\n<pre><code>resources :posts, only: [:new, :create, :destroy]\n</code></pre>\n\n<p>now there are 2 paths for <code>posts#new</code>. I suggest u <strong>remove</strong> first one. Change your <strong>html</strong> to </p>\n\n<pre><code>&lt;li&gt;&lt;%= link_to 'New Post', posts_path %&gt;&lt;/li&gt;\n</code></pre>\n\n<p>and it should work fine.</p>\n"}, {"tags": [], "owner": {"reputation": 4101, "user_id": 1482055, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/f4D9p.jpg?s=128&g=1", "display_name": "Milind", "link": "https://stackoverflow.com/users/1482055/milind"}, "is_accepted": false, "score": 2, "last_activity_date": 1484796912, "creation_date": 1484796912, "answer_id": 41733265, "question_id": 41456166, "link": "https://stackoverflow.com/questions/41456166/routes-not-working-correctly/41733265#41733265", "title": "Routes not working correctly", "body": "<p>i went through your code...and this is what i recommend to add/edit changes..and sure it should work :).</p>\n\n<ol>\n<li>for <code>routes.rb</code>,its looks good <code>BUT</code>\n there is a <strong>duplicate</strong> url entry.So either remove <code>get 'posts/new'</code> or <code>resources :posts, only: [:new, :create, :destroy]</code> as they both will create a duplicate entry for <code>posts#new</code>.You can verify this by outputting your routes in seperate txt file by <code>rake routes &gt;&gt; path.txt</code></li>\n<li>in <code>app/views/layouts/_header.html.erb</code>,its good too and dont need any change.</li>\n<li>in <code>posts_controller.rb</code>,<strong>there is a condition added for only logged in user</strong>,Kindly check if you are logged in else remove that condition and check again.</li>\n<li>Finally,debug using <code>F12</code> in chrome/firefox and see what log do you get in web browser console <strong>before</strong> and <strong>after</strong> click to check is there some javascript error or not.</li>\n</ol>\n"}, {"comments": [{"owner": {"reputation": 1141, "user_id": 3251463, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hxssB.png?s=128&g=1", "display_name": "Scott Schupbach", "link": "https://stackoverflow.com/users/3251463/scott-schupbach"}, "edited": false, "score": 1, "creation_date": 1484877020, "post_id": 41746903, "comment_id": 70701889, "body": "Wouldn&#39;t the path helper be <code>new_post_path</code>?"}], "tags": [], "owner": {"reputation": 216, "user_id": 6216878, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mWXmf.png?s=128&g=1", "display_name": "Falknn", "link": "https://stackoverflow.com/users/6216878/falknn"}, "is_accepted": false, "score": 3, "last_activity_date": 1484910969, "last_edit_date": 1484910969, "creation_date": 1484843403, "answer_id": 41746903, "question_id": 41456166, "link": "https://stackoverflow.com/questions/41456166/routes-not-working-correctly/41746903#41746903", "title": "Routes not working correctly", "body": "<p>Remove <code>get 'sessions/new'</code> &amp; <code>get  '/posts', to: 'posts#new', as: 'new_post'</code></p>\n\n<p>Restart server</p>\n\n<p>and try <code>link_to \"Posts\", new_post_path, method: :post</code></p>\n\n<p>Should work</p>\n"}, {"tags": [], "owner": {"reputation": 1141, "user_id": 3251463, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hxssB.png?s=128&g=1", "display_name": "Scott Schupbach", "link": "https://stackoverflow.com/users/3251463/scott-schupbach"}, "is_accepted": false, "score": 1, "last_activity_date": 1484876920, "creation_date": 1484876920, "answer_id": 41754794, "question_id": 41456166, "link": "https://stackoverflow.com/questions/41456166/routes-not-working-correctly/41754794#41754794", "title": "Routes not working correctly", "body": "<p>The bottom line is that you're trying to do things in a non-Rails manner. Rails favors <strong>convention over configuration</strong>, meaning if you don't do things the Rails way, you're going to have a bad time.</p>\n\n<p>This means you should clean up your routes until you have no unnecessary duplication. Right now you have 3 different routes that go to <code>posts#new</code> each with a different path prefix.</p>\n\n<p>I'd remove:</p>\n\n<ul>\n<li><code>get  '/posts', to: 'posts#new', as: 'new_post'</code></li>\n<li><code>get 'posts/new'</code> </li>\n</ul>\n\n<p>since <code>resources :posts, only: [:new, :create, :destroy]</code> already creates that route. Then your <code>new_post_path</code> helper should create the correct URL and your routes will have no ambiguity.</p>\n"}], "owner": {"reputation": 349, "user_id": 2647092, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/f28af5bf35344ad0431adbd445b8e015?s=128&d=identicon&r=PG", "display_name": "user2647092", "link": "https://stackoverflow.com/users/2647092/user2647092"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 7377, "favorite_count": 1, "accepted_answer_id": 41718440, "answer_count": 11, "score": 5, "last_activity_date": 1484910969, "creation_date": 1483503665, "last_edit_date": 1484875928, "question_id": 41456166, "link": "https://stackoverflow.com/questions/41456166/routes-not-working-correctly", "title": "Routes not working correctly", "body": "<p><strong>EDIT:</strong> Thanks for the replies, I tried everything listed below but still now luck. If I type localhosts/posts/new it takes me to the form, however the link does not work when I click from the navigation bar. I've updated the code and included my rake routes results.</p>\n\n<p>I am new to ruby and working through a tutorial, however one of my links is not working and not sure what is happening.</p>\n\n<p>My navigation link to create a new post is not taking me to the correct page, when I click the link to the \"posts_path\" the page does not change. </p>\n\n<p>I can create a new posts by typing in the /posts/new in the address bar, but when I click the \"New Post\" link on the nav bar the page does not update (although the url displays /posts).  Any idea how to fix this?</p>\n\n<p>config/routes.rb</p>\n\n<pre><code>Rails.application.routes.draw do\nget 'sessions/new'\nroot 'static_pages#home'\nget  '/search', to: 'static_pages#search'\nget  '/login', to: 'sessions#new'\nget  '/posts', to: 'posts#new', as: 'new_post'\npost  '/login', to: 'sessions#create'\ndelete  '/logout', to: 'sessions#destroy'\nget  '/signup', to: 'users#new'\nget 'users/new'\nget 'static_pages/home'\nget 'posts/new'\nget 'sessions/new'\nresources :users\nresources :account_activations, only: [:edit]\nresources :password_resets, only: [:new, :create, :edit, :update]\nresources :posts, only: [:new, :create, :destroy]\nend\n</code></pre>\n\n<p>app/views/layouts/_header.html.erb</p>\n\n<pre><code>&lt;header class=\"navbar navbar-fixed-top navbar-inverse\"&gt;\n&lt;div class=\"container\"&gt;\n  &lt;% link_to \"sample app\", root_path, id: \"logo\" %&gt;\n    &lt;nav&gt;\n      &lt;ul class=\"nav navbar-nav navbar-right\"&gt;\n        &lt;li&gt;&lt;%= link_to \"Home\", root_path %&gt;&lt;/li&gt;\n        &lt;li&gt;&lt;%= link_to \"Search\", search_path %&gt;&lt;/li&gt;\n          &lt;% if logged_in? %&gt;\n            &lt;li&gt;&lt;%= link_to \"Users\", users_path %&gt;&lt;/li&gt;\n            &lt;li&gt;&lt;%= link_to \"Posts\", posts_new_path %&gt;&lt;/li&gt;\n            &lt;li class=\"dropdown\"&gt;\n             &lt;a href='#' class=\"dropdown-toggle\" data-toggle=\"dropdown\"&gt;Account &lt;b class=\"caret\"&gt;&lt;/b&gt;&lt;/a&gt;\n             &lt;ul class=\"dropdown-menu\"&gt;\n              &lt;li&gt;&lt;%= link_to \"Profile\", current_user %&gt;&lt;/li&gt;\n              &lt;li&gt;&lt;%= link_to \"Settings\", edit_user_path(current_user) %&gt;&lt;/li&gt;\n              &lt;li class=\"divider\"&gt;&lt;/li&gt;\n              &lt;li&gt;&lt;%= link_to \"Logout\", logout_path, method: \"delete\" %&gt;&lt;/li&gt;\n             &lt;/ul&gt;\n           &lt;/li&gt;\n           &lt;% else %&gt;\n             &lt;li&gt;&lt;%= link_to \"Log in\", login_path %&gt;&lt;/li&gt;\n           &lt;% end %&gt;\n          &lt;/ul&gt;\n       &lt;/nav&gt;\n  &lt;/div&gt;\n</code></pre>\n\n<p></p>\n\n<p>posts_controller.rb</p>\n\n<pre><code>class PostsController &lt; ApplicationController\n    before_action :logged_in_user, only: [:create, :destroy]\n    before_action :correct_user, only: :destroy\n\n    def create\n            @post = current_user.posts.build(post_params)\n            if @post.save\n                    flash[:success] = \"Post created!\"\n                    redirect_to root_url\n            else\n                    @feed_items = []\n                    render 'static_pages/home'\n            end\n    end\n\n    def destroy\n            @post.destroy\n            flash[:success] = \"Post Deleted\"\n            redirect_to request.referrer || root_url\n    end\n    def new\n       @post = current_user.posts.build if logged_in?\n    end\n\n    private\n\n    def post_params\n            params.require(:post).permit(:description, :picture)\n    end\n\n    def correct_user\n            @post = current_user.posts.find_by(id:params[:id])\n            redirect_to root_url if @post.nil?\n    end\nend\n</code></pre>\n\n<p>rake routes:</p>\n\n<pre><code>password_resets_new     GET     /password_resets/new(.:format)          password_resets#new\npassword_resets_edit    GET     /password_resets/edit(.:format)         password_resets#edit\nsessions_new            GET     /sessions/new(.:format)                 sessions#new\nroot                    GET     /                                       static_pages#home\nsearch                  GET     /search(.:format)                       static_pages#search\nlogin                   GET     /login(.:format)                        sessions#new\nnew_post                GET     /posts(.:format)                        posts#new\n                        POST    /login(.:format)                        sessions#create\nlogout                  DELETE  /logout(.:format)                       sessions#destroy\nsignup                  GET     /signup(.:format)                       users#new\nusers_new               GET     /users/new(.:format)                    users#new\nstatic_pages_home       GET     /static_pages/home(.:format)            static_pages#home\nstatic_pages_about      GET     /static_pages/about(.:format)           static_pages#about\nstatic_pages_search     GET     /static_pages/search(.:format)          static_pages#search\nposts_new               GET     /posts/new(.:format)                    posts#new\n                        GET     /password_resets/new(.:format)          password_resets#new\n                        GET     /password_resets/edit(.:format)         password_resets#edit\n                        GET     /sessions/new(.:format)                 sessions#new\nhelp                    GET     /help(.:format)                         static_pages#help\nabout                   GET     /about(.:format)                        static_pages#about\ncontact                 GET     /contact(.:format)                      static_pages#contact\nusers                   GET     /users(.:format)                        users#index\n                        POST    /users(.:format)                        users#create\nnew_user                GET     /users/new(.:format)                    users#new\nedit_user               GET     /users/:id/edit(.:format)               users#edit\nuser                    GET     /users/:id(.:format)                    users#show\n                        PATCH   /users/:id(.:format)                    users#update\n                        PUT     /users/:id(.:format)                    users#update\n                        DELETE  /users/:id(.:format)                    users#destroy\nedit_account_activation GET     /account_activations/:id/edit(.:format) account_activations#edit\npassword_resets         POST    /password_resets(.:format)              password_resets#create\nnew_password_reset      GET     /password_resets/new(.:format)          password_resets#new\nedit_password_reset     GET     /password_resets/:id/edit(.:format)     password_resets#edit\npassword_reset          PATCH   /password_resets/:id(.:format)          password_resets#update\n                        PUT     /password_resets/:id(.:format)          password_resets#update\nposts                   POST    /posts(.:format)                        posts#create\n                        GET     /posts/new(.:format)                    posts#new\npost                    DELETE  /posts/:id(.:format)                    posts#destroy\n</code></pre>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 208794, "user_id": 229044, "user_type": "moderator", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/591426cbbacd4025d920467bad356911?s=128&d=identicon&r=PG&f=1", "display_name": "meagar", "link": "https://stackoverflow.com/users/229044/meagar"}, "edited": false, "score": 2, "creation_date": 1483502908, "post_id": 41456039, "comment_id": 70118336, "body": "You&#39;re really going to abandon the language because you have to type <code>a: a</code>?"}], "answers": [{"comments": [{"owner": {"reputation": 25823, "user_id": 24468, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/PWl6C.png?s=128&g=1", "display_name": "akuhn", "link": "https://stackoverflow.com/users/24468/akuhn"}, "edited": false, "score": 0, "creation_date": 1483503398, "post_id": 41456050, "comment_id": 70118441, "body": "There are actually ways to do this."}, {"owner": {"reputation": 208794, "user_id": 229044, "user_type": "moderator", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/591426cbbacd4025d920467bad356911?s=128&d=identicon&r=PG&f=1", "display_name": "meagar", "link": "https://stackoverflow.com/users/229044/meagar"}, "reply_to_user": {"reputation": 25823, "user_id": 24468, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/PWl6C.png?s=128&g=1", "display_name": "akuhn", "link": "https://stackoverflow.com/users/24468/akuhn"}, "edited": false, "score": 0, "creation_date": 1483505444, "post_id": 41456050, "comment_id": 70118934, "body": "@akuhn No, there aren&#39;t. Your way isn&#39;t even close, and it relies on MRI-specific functionality to achieve the limited success that it does, resulting in a syntax that <i>technically</i> allows you to avoid repeating the variable names, but requires you to wrap them instead in a <code>binding.fun %w{...}</code> which is hardly an improvement. That kind of pseudo-syntax-extension is to be avoided, inventing your own Ruby locale is not desirable."}, {"owner": {"reputation": 25823, "user_id": 24468, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/PWl6C.png?s=128&g=1", "display_name": "akuhn", "link": "https://stackoverflow.com/users/24468/akuhn"}, "edited": false, "score": 0, "creation_date": 1483505712, "post_id": 41456050, "comment_id": 70119007, "body": "You can choose a shorter syntax, like redefining `Kernel#``"}, {"owner": {"reputation": 208794, "user_id": 229044, "user_type": "moderator", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/591426cbbacd4025d920467bad356911?s=128&d=identicon&r=PG&f=1", "display_name": "meagar", "link": "https://stackoverflow.com/users/229044/meagar"}, "reply_to_user": {"reputation": 25823, "user_id": 24468, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/PWl6C.png?s=128&g=1", "display_name": "akuhn", "link": "https://stackoverflow.com/users/24468/akuhn"}, "edited": false, "score": 0, "creation_date": 1483505773, "post_id": 41456050, "comment_id": 70119031, "body": "@akuhn That&#39;s an even worse idea. Again, Ruby doesn&#39;t support this, and inventing your own &quot;close enough&quot; syntaxes by patching core classes is not desirable. You are effectively making a sub-language of Ruby that only you understand."}, {"owner": {"reputation": 25823, "user_id": 24468, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/PWl6C.png?s=128&g=1", "display_name": "akuhn", "link": "https://stackoverflow.com/users/24468/akuhn"}, "edited": false, "score": 0, "creation_date": 1483506161, "post_id": 41456050, "comment_id": 70119143, "body": "That is called a <a href=\"http://martinfowler.com/books/dsl.html\" rel=\"nofollow noreferrer\">DSL, aka domain specific language,</a> and is a perfectly perfect application of Ruby. I wouldn&#39;t know another language that is so strong at creating &quot;sublanguages&quot; other than lisp."}, {"owner": {"reputation": 208794, "user_id": 229044, "user_type": "moderator", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/591426cbbacd4025d920467bad356911?s=128&d=identicon&r=PG&f=1", "display_name": "meagar", "link": "https://stackoverflow.com/users/229044/meagar"}, "reply_to_user": {"reputation": 25823, "user_id": 24468, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/PWl6C.png?s=128&g=1", "display_name": "akuhn", "link": "https://stackoverflow.com/users/24468/akuhn"}, "edited": false, "score": 0, "creation_date": 1483506230, "post_id": 41456050, "comment_id": 70119166, "body": "@akuhn The question was about whether Ruby supports this syntax, not &quot;can I produce a bastardized version of Ruby that nobody else will understand so that I can use a syntax Ruby doesn&#39;t actually support&quot;."}, {"owner": {"reputation": 25823, "user_id": 24468, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/PWl6C.png?s=128&g=1", "display_name": "akuhn", "link": "https://stackoverflow.com/users/24468/akuhn"}, "edited": false, "score": 0, "creation_date": 1483506270, "post_id": 41456050, "comment_id": 70119173, "body": "What else is Rails other than a &quot;bastardized version of Ruby&quot;? Or Chef? Or Rake?"}], "tags": [], "owner": {"reputation": 208794, "user_id": 229044, "user_type": "moderator", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/591426cbbacd4025d920467bad356911?s=128&d=identicon&r=PG&f=1", "display_name": "meagar", "link": "https://stackoverflow.com/users/229044/meagar"}, "is_accepted": false, "score": 2, "last_activity_date": 1483502895, "creation_date": 1483502895, "answer_id": 41456050, "question_id": 41456039, "link": "https://stackoverflow.com/questions/41456039/is-there-a-way-to-pass-key-vals-in-one-word-like-in-javascript/41456050#41456050", "title": "Is there a way to pass key-vals in one word like in Javascript?", "body": "<blockquote>\n  <p>Anyway, I'm wondering if there is any way to do this in Ruby itself,</p>\n</blockquote>\n\n<p>No, there isn't.</p>\n"}, {"comments": [{"owner": {"reputation": 8699, "user_id": 1726083, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/757452f7cd7ba2347c667ef9298ceadb?s=128&d=identicon&r=PG", "display_name": "Daniel Farrell", "link": "https://stackoverflow.com/users/1726083/daniel-farrell"}, "edited": false, "score": 1, "creation_date": 1483503739, "post_id": 41456114, "comment_id": 70118519, "body": "That is totally different syntax than the OP is referring to.  Also, your code isn&#39;t complete.  You never initialize <code>binding</code>.  Clearly, you&#39;re not making your code any more concise with this method as the OP is going for."}, {"owner": {"reputation": 25823, "user_id": 24468, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/PWl6C.png?s=128&g=1", "display_name": "akuhn", "link": "https://stackoverflow.com/users/24468/akuhn"}, "reply_to_user": {"reputation": 8699, "user_id": 1726083, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/757452f7cd7ba2347c667ef9298ceadb?s=128&d=identicon&r=PG", "display_name": "Daniel Farrell", "link": "https://stackoverflow.com/users/1726083/daniel-farrell"}, "edited": false, "score": 2, "creation_date": 1483503807, "post_id": 41456114, "comment_id": 70118542, "body": "<code>binding</code> does not have to be initialized"}, {"owner": {"reputation": 8699, "user_id": 1726083, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/757452f7cd7ba2347c667ef9298ceadb?s=128&d=identicon&r=PG", "display_name": "Daniel Farrell", "link": "https://stackoverflow.com/users/1726083/daniel-farrell"}, "edited": false, "score": 0, "creation_date": 1483503959, "post_id": 41456114, "comment_id": 70118598, "body": "I&#39;ll admit to that being a mistake on my part.  But even so, are you really arguing that your code is really very similar to a javascript concept like the OP requests?"}, {"owner": {"reputation": 25823, "user_id": 24468, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/PWl6C.png?s=128&g=1", "display_name": "akuhn", "link": "https://stackoverflow.com/users/24468/akuhn"}, "reply_to_user": {"reputation": 8699, "user_id": 1726083, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/757452f7cd7ba2347c667ef9298ceadb?s=128&d=identicon&r=PG", "display_name": "Daniel Farrell", "link": "https://stackoverflow.com/users/1726083/daniel-farrell"}, "edited": false, "score": 2, "creation_date": 1483504309, "post_id": 41456114, "comment_id": 70118677, "body": "As far as I understand they don&#39;t want to have to repeat key and value. Personally I tend to agree with meagar&#39;s comment, but that is not up to me to judge. I just show how close Ruby can get to Javascript&#39;s syntax."}, {"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1483514444, "post_id": 41456114, "comment_id": 70122277, "body": "I gemified that backtick patch (gave you credit of course) - <a href=\"https://github.com/maxpleaner/keyword_hash_builder\" rel=\"nofollow noreferrer\">keyword_hash_builder</a>. With refinements I don&#39;t think it&#39;s that bad."}], "tags": [], "owner": {"reputation": 25823, "user_id": 24468, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/PWl6C.png?s=128&g=1", "display_name": "akuhn", "link": "https://stackoverflow.com/users/24468/akuhn"}, "is_accepted": true, "score": 0, "last_activity_date": 1483506334, "last_edit_date": 1483506334, "creation_date": 1483503329, "answer_id": 41456114, "question_id": 41456039, "link": "https://stackoverflow.com/questions/41456039/is-there-a-way-to-pass-key-vals-in-one-word-like-in-javascript/41456114#41456114", "title": "Is there a way to pass key-vals in one word like in Javascript?", "body": "<p>Try this</p>\n\n<pre><code>class Binding\n  def fun(names)\n    names.zip(names.map(&amp;method(:eval))).to_h\n  end\nend\n\na = 1\nb = 2\nh = binding.fun %w{a b}\np h\n# =&gt; {\"a\"=&gt;1, \"b\"=&gt;2}\n</code></pre>\n\n<p>Or,</p>\n\n<p>if you don't want to have to define a function on <code>Binding</code> class</p>\n\n<pre><code>require 'debug_inspector'\n\ndef fun(names)\n  RubyVM::DebugInspector.open do |inspector|\n    names.zip(names.map { |name| eval(name, inspector.frame_binding(2)) }).to_h\n  end\nend\n\na = 1\nb = 2\nh = fun %w{a b}\np h\n# =&gt; {\"a\"=&gt;1, \"b\"=&gt;2}\n</code></pre>\n\n<p>Or,</p>\n\n<p>if you want really concise syntax and don't plan on using the builtin backtick function.</p>\n\n<pre><code>require 'debug_inspector'\n\ndef `(str) \n  # overrides builtin ` function, use with caution!\n  RubyVM::DebugInspector.open do |inspector|\n    str.split(?,).zip(eval(\"[#{str}]\", inspector.frame_binding(2))).to_h\n  end\nend\n\na = 1\nb = 2\nh = `a, b`\np h\n# =&gt; {\"a\"=&gt;1, \"b\"=&gt;2}\n</code></pre>\n"}], "owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 70, "favorite_count": 0, "accepted_answer_id": 41456114, "answer_count": 2, "score": 0, "last_activity_date": 1483506334, "creation_date": 1483502799, "question_id": 41456039, "link": "https://stackoverflow.com/questions/41456039/is-there-a-way-to-pass-key-vals-in-one-word-like-in-javascript", "title": "Is there a way to pass key-vals in one word like in Javascript?", "body": "<p>In Javascript I can do this:</p>\n\n<pre><code>myVar = 1\nobj = { myVar }\nobj.myVar == 1 // true\n</code></pre>\n\n<p>In Ruby it's only possible to do something similar to this in methods, with keyword arguments:</p>\n\n<pre><code>def foo(a:, b:)\n  [a,b]\nend\nfoo(a: 1, b: 2) # [1,2]\n</code></pre>\n\n<p>In practice I find this makes the code more verbose. Rather than naming a variable once, as I'd do with sequential arguments, I have to name it twice in order to send it as an argument:</p>\n\n<pre><code>def method_1(a:, b:)\n  method_2(a: a, b: b) # repetition is here\nend\n</code></pre>\n\n<p>I'm aware of the <code>**</code> operator which serves as a splat for keyword arguments. But I'd rather not put splats in my method definitions, because it makes code less comprehensible.</p>\n\n<p>I'm not saying keyword arguments are useless (it's clearer than parsing an <code>options</code> hash) but they would be more useful if they supported regular hash construction, like in Javascript.</p>\n\n<p>Anyway, I'm wondering if there is any way to do this in Ruby itself, or if I should look to another language.</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 10490, "user_id": 513951, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/6cace4406e1ea825e78ec0134a5ea6fd?s=128&d=identicon&r=PG&f=1", "display_name": "user513951", "link": "https://stackoverflow.com/users/513951/user513951"}, "edited": false, "score": 1, "creation_date": 1483503218, "post_id": 41455716, "comment_id": 70118403, "body": "Your examples are all about <i>setters</i>, but your &quot;basically&quot; summary talks about <i>getters</i>. Is that a typo, or intentional?"}], "answers": [{"tags": [], "owner": {"reputation": 208794, "user_id": 229044, "user_type": "moderator", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/591426cbbacd4025d920467bad356911?s=128&d=identicon&r=PG&f=1", "display_name": "meagar", "link": "https://stackoverflow.com/users/229044/meagar"}, "is_accepted": false, "score": 0, "last_activity_date": 1483501853, "last_edit_date": 1483501853, "creation_date": 1483500241, "answer_id": 41455731, "question_id": 41455716, "link": "https://stackoverflow.com/questions/41455716/understanding-ruby-setters/41455731#41455731", "title": "Understanding Ruby Setters", "body": "<p>Getters/setters, also known as \"accessors\", are accessible outside the class, instance variables are not. If you want things to be able to read or change <code>@name</code> from <em>outside</em> the class, you to define accessors for it.</p>\n\n<p>Additionally accessor methods allow you to perform a certain amount of sanity checking or mutate incoming/outgoing values, and otherwise protect the internal state of your objects.</p>\n"}, {"tags": [], "owner": {"reputation": 9030, "user_id": 5101476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JCQrl.jpg?s=128&g=1", "display_name": "ice\u30c4", "link": "https://stackoverflow.com/users/5101476/ice%e3%83%84"}, "is_accepted": false, "score": 1, "last_activity_date": 1483502050, "last_edit_date": 1495540421, "creation_date": 1483502050, "answer_id": 41455932, "question_id": 41455716, "link": "https://stackoverflow.com/questions/41455716/understanding-ruby-setters/41455932#41455932", "title": "Understanding Ruby Setters", "body": "<p><code>initialize</code> sets attributes during the <em>initialization</em> of a new object.</p>\n\n<pre><code>keeper = Player.new('goalkeeper','Shilton').\n</code></pre>\n\n<p>What if you want to update an attribute of <code>keeper</code> after initialzation? Well you'll need to use your ordinary setter method:</p>\n\n<pre><code>def name=(name)\n  @name = name\nend\n</code></pre>\n\n<p>like so:</p>\n\n<pre><code>keeper.name = 'Banks'\n</code></pre>\n\n<p>If you don't have a setter method defined for Player instances, then you can't do this. Similarly for getter methods. Also be aware you can refactor your code by using <a href=\"https://stackoverflow.com/a/4371458/5101493\">attr_accessor</a> like so:</p>\n\n<pre><code>class Player\n  attr_accessor :name, :position\n\n  def initialize(position, name)\n    @position = position\n    @name = name\n  end    \nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 14827, "user_id": 645886, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2abb0123e9484284a9cb2d36aa9854b3?s=128&d=identicon&r=PG&f=1", "display_name": "Surya", "link": "https://stackoverflow.com/users/645886/surya"}, "is_accepted": true, "score": 1, "last_activity_date": 1483502933, "creation_date": 1483502933, "answer_id": 41456056, "question_id": 41455716, "link": "https://stackoverflow.com/questions/41455716/understanding-ruby-setters/41456056#41456056", "title": "Understanding Ruby Setters", "body": "<p>Getters and setters job is to provide you a quick implementation of read and write of instance variables that you define in your constructor:</p>\n\n<pre><code>class Player\n  attr_accessor :name, :position\n  def initialize(position, name)\n    @position = position\n    @name = name\n  end\nend\n</code></pre>\n\n<p>you can also user <code>attr_reader</code>(for getters) and <code>attr_writer</code>(for setters) specifically for these variables.</p>\n\n<p>Above code: <code>attr_accessor :name, :position</code> gives you: <code>#name</code>, <code>#position</code>, <code>#name=</code>, and <code>#position=</code> methods for instance of <code>Player</code> class.</p>\n\n<p>However, they're not going to give you validation or a customized logic for getters/setters.</p>\n\n<p>For example: you might want to show a player's full name or do not wish your code to accept a 0 or negative position, in such a case you'd have to write getter and setter yourself:</p>\n\n<pre><code>class Player\n  def initialize(first_name, last_name, position)\n    @first_name = first_name\n    @last_name = last_name\n    @position = position\n  end\n\n  # validation for updating position using setter of position\n  def position=(new_position)\n    raise \"invalid position: #{new_position}\" if new_position &lt;= 0\n    @position = new_position\n  end\n\n  # customized getter for name method\n  def name\n    \"#{@first_name} #{@last_name}\"\n  end\nend\n</code></pre>\n\n<p>If you do not require customization as stated above then using <code>attr_*</code> method for these variables makes more sense.</p>\n"}], "owner": {"reputation": 6503, "user_id": 5650878, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/xh7BI.png?s=128&g=1", "display_name": "Bitwise", "link": "https://stackoverflow.com/users/5650878/bitwise"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 192, "favorite_count": 0, "accepted_answer_id": 41456056, "answer_count": 3, "score": -2, "last_activity_date": 1483502933, "creation_date": 1483500099, "question_id": 41455716, "link": "https://stackoverflow.com/questions/41455716/understanding-ruby-setters", "title": "Understanding Ruby Setters", "body": "<p>If I create a class like this:</p>\n\n<pre><code>class Player\n\n  def initialize(position, name)\n    @position = position\n    @name = name\n  end\n\nend\n</code></pre>\n\n<p>Isn't that setting the name to an instance variable? if so, why would I need to write a setter like this</p>\n\n<pre><code> class Player\n\n  def initialize(position, name)\n    @position = position\n    @name = name\n  end\n\n  def name=(name)\n    @name = name\n  end\n\n end\n</code></pre>\n\n<p>Basically when is it necessary to write getters in a class?</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 7371855, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7b241f9de8915ab80f37106d1254b6e7?s=128&d=identicon&r=PG&f=1", "display_name": "Yayo", "link": "https://stackoverflow.com/users/7371855/yayo"}, "edited": false, "score": 0, "creation_date": 1483571612, "post_id": 41454878, "comment_id": 70155583, "body": "I try, but it happen the same. <code>Tasks: TOP =&gt; db:migrate                                                                                                                                                                                                                              (See full trace by running task with --trace) </code>"}, {"owner": {"reputation": 13, "user_id": 7371855, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7b241f9de8915ab80f37106d1254b6e7?s=128&d=identicon&r=PG&f=1", "display_name": "Yayo", "link": "https://stackoverflow.com/users/7371855/yayo"}, "edited": false, "score": 0, "creation_date": 1483573395, "post_id": 41454878, "comment_id": 70156206, "body": "<code>SyntaxError: &#47;home&#47;cabox&#47;workspace&#47;blog&#47;db&#47;migrate&#47;20170103233409_create_&zwnj;&#8203;posts.rb:5: syntax error, unexpected &#39;:&#39;                          &#47;home&#47;cabox&#47;.rvm&#47;gems&#47;ruby-2.1.2&#47;gems&#47;rake-12.0.0&#47;exe&#47;rake:2&zwnj;&#8203;7:in &lt;top (required)&gt;&#39;</code> This is the most important of the message error."}, {"owner": {"reputation": 3521, "user_id": 2521680, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/6D935.jpg?s=128&g=1", "display_name": "Rockwell Rice", "link": "https://stackoverflow.com/users/2521680/rockwell-rice"}, "edited": false, "score": 0, "creation_date": 1483574847, "post_id": 41454878, "comment_id": 70156606, "body": "I think in your migration file you did the same thing by putting a space before (and possibly after) a &#39; : &#39; somewhere, it is unrelated to the original issue, but we can fix it easily. Just post the migration file in the original post and I will tell you what to correct."}, {"owner": {"reputation": 13, "user_id": 7371855, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7b241f9de8915ab80f37106d1254b6e7?s=128&d=identicon&r=PG&f=1", "display_name": "Yayo", "link": "https://stackoverflow.com/users/7371855/yayo"}, "edited": false, "score": 0, "creation_date": 1483577142, "post_id": 41454878, "comment_id": 70157232, "body": "i put the file in the post :)"}, {"owner": {"reputation": 13, "user_id": 7371855, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7b241f9de8915ab80f37106d1254b6e7?s=128&d=identicon&r=PG&f=1", "display_name": "Yayo", "link": "https://stackoverflow.com/users/7371855/yayo"}, "edited": false, "score": 0, "creation_date": 1483578863, "post_id": 41454878, "comment_id": 70157733, "body": "You solve my problem, i edit the file like you put in your anwer (i dont know why my file was in that state beacuse i didn&#39;t move anything) Sincerly thanks"}], "tags": [], "owner": {"reputation": 3521, "user_id": 2521680, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/6D935.jpg?s=128&g=1", "display_name": "Rockwell Rice", "link": "https://stackoverflow.com/users/2521680/rockwell-rice"}, "is_accepted": true, "score": 5, "last_activity_date": 1483636681, "last_edit_date": 1483636681, "creation_date": 1483493358, "answer_id": 41454878, "question_id": 41454805, "link": "https://stackoverflow.com/questions/41454805/cannot-use-db-migrate-rake-aborted-error/41454878#41454878", "title": "Cannot use db Migrate, rake aborted error", "body": "<p>I am pretty sure what is happening is you are inserting a space in there when you type it out.  It needs to be</p>\n\n<pre><code>rake db:migrate\n</code></pre>\n\n<p>not</p>\n\n<pre><code>rake db : migrate\n</code></pre>\n\n<p>That error message is pretty common when there is a spelling error or some other kind of typing error when running the command.</p>\n\n<p>Your migration has a typo as well, should be this</p>\n\n<pre><code>class CreatePosts &lt; ActiveRecord::Migration\n  def change\n    create_table :posts do |t|\n      t.string :title\n      t.text :body \n      t.timestamps\n    end\n  end\nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 95, "user_id": 4337475, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5b1e1604fc185d1a760f8fd721434363?s=128&d=identicon&r=PG&f=1", "display_name": "RamPrasad Reddy", "link": "https://stackoverflow.com/users/4337475/ramprasad-reddy"}, "is_accepted": false, "score": -1, "last_activity_date": 1483506269, "creation_date": 1483506269, "answer_id": 41456508, "question_id": 41454805, "link": "https://stackoverflow.com/questions/41454805/cannot-use-db-migrate-rake-aborted-error/41456508#41456508", "title": "Cannot use db Migrate, rake aborted error", "body": "<p>Try doing rake <code>db:reset</code> if you want to rebuild your db again. It does 4 things for you</p>\n\n<pre><code>rake db:drop\nrake db:create\nrake db:migrate\nrake db:seed \n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 170, "user_id": 6856761, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2532418b05d963c173086b5aa5cb3dee?s=128&d=identicon&r=PG&f=1", "display_name": "sureshvignesh", "link": "https://stackoverflow.com/users/6856761/sureshvignesh"}, "is_accepted": false, "score": 1, "last_activity_date": 1483513734, "creation_date": 1483513734, "answer_id": 41458096, "question_id": 41454805, "link": "https://stackoverflow.com/questions/41454805/cannot-use-db-migrate-rake-aborted-error/41458096#41458096", "title": "Cannot use db Migrate, rake aborted error", "body": "<p>Rake is a <strong>software task management tool</strong>, similar to Make, etc. in other systems</p>\n\n<p>The generic syntax is </p>\n\n<pre><code>rake namesapce:task\n</code></pre>\n\n<p>In your case it is</p>\n\n<pre><code>rake db:migrate\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 7371855, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7b241f9de8915ab80f37106d1254b6e7?s=128&d=identicon&r=PG&f=1", "display_name": "Yayo", "link": "https://stackoverflow.com/users/7371855/yayo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 548, "favorite_count": 0, "accepted_answer_id": 41454878, "answer_count": 3, "score": 0, "last_activity_date": 1483683768, "creation_date": 1483492732, "last_edit_date": 1483683768, "question_id": 41454805, "link": "https://stackoverflow.com/questions/41454805/cannot-use-db-migrate-rake-aborted-error", "title": "Cannot use db Migrate, rake aborted error", "body": "<p>I am working a new project in Codeanywhere (I am new on Ruby), but when I try to use <code>\"rake db : migrate\"</code> I have this error:</p>\n\n<pre><code>rake aborted!                                                                                                                                                                                                                                        \nDon't know how to build task ':' (see --tasks)                                                                                                                                                                                                       \n/home/cabox/.rvm/gems/ruby-2.1.2/gems/rake-12.0.0/exe/rake:27:in `&lt;top (required)&gt;'                                                     \n(See full trace by running task with --trace)\n</code></pre>\n\n<p>Before this I use bundle update and after and nothing, and when I put \"rake-T\", db Migartion is on the tasks, when I try with --trace, pass the same.</p>\n\n<p>I try before with <code>rake db:migrate</code> and the same happened\n`rake aborted!   </p>\n\n<pre><code>SyntaxError:     \n/home/cabox/workspace/blog/db/migrate/20170103233409_create_posts.rb:5: syntax error, unexpected ':'                                                                                                                                    \n/home/cabox/.rvm/gems/ruby-2.1.2/gems/activesupport-4.1.6/lib/active_support/dependencies.rb:247:in `require'                                                                                                                                        \n/home/cabox/.rvm/gems/ruby-2.1.2/gems/activesupport-4.1.6/lib/active_support/dependencies.rb:247:in `block in require'                                                                                                                               \n/home/cabox/.rvm/gems/ruby-2.1.2/gems/activesupport-4.1.6/lib/active_support/dependencies.rb:232:in `load_dependency'                                                                                                                                \n/home/cabox/.rvm/gems/ruby-2.1.2/gems/activesupport-4.1.6/lib/active_support/dependencies.rb:247:in `require'                                                                                                                                        \n/home/cabox/.rvm/gems/ruby-2.1.2/gems/activerecord-4.1.6/lib/active_record/migration.rb:761:in `load_migration'                                                                                                                                      \n/home/cabox/.rvm/gems/ruby-2.1.2/gems/activerecord- 4.1.6/lib/active_record/migration.rb:757:in `migration'                                                                                                                                           \n/home/cabox/.rvm/gems/ruby-2.1.2/gems/activerecord-4.1.6/lib/active_record/migration.rb:752:in `disable_ddl_transaction'                                                                                                                             \n/home/cabox/.rvm/gems/ruby-2.1.2/gems/activerecord-4.1.6/lib/active_record/migration.rb:1044:in `use_transaction?'                                                                                                                                   \n/home/cabox/.rvm/gems/ruby-2.1.2/gems/activerecord-4.1.6/lib/active_record/migration.rb:1036:in `ddl_transaction'                                                                                                                                    \n/home/cabox/.rvm/gems/ruby-2.1.2/gems/activerecord-4.1.6/lib/active_record/migration.rb:990:in `execute_migration_in_transaction'                                                                                                                    \n/home/cabox/.rvm/gems/ruby-2.1.2/gems/activerecord-4.1.6/lib/active_record/migration.rb:952:in `block in migrate'                                                                                                                                    \n/home/cabox/.rvm/gems/ruby-2.1.2/gems/activerecord-4.1.6/lib/active_record/migration.rb:948:in `each'                                                                                                                                                \n/home/cabox/.rvm/gems/ruby-2.1.2/gems/activerecord-4.1.6/lib/active_record/migration.rb:948:in `migrate'                                                                                                                                             \n/home/cabox/.rvm/gems/ruby-2.1.2/gems/activerecord-4.1.6/lib/active_record/migration.rb:807:in `up'                                                                                                                                                  \n/home/cabox/.rvm/gems/ruby-2.1.2/gems/activerecord-4.1.6/lib/active_record/migration.rb:785:in `migrate'                                                                                                                                             \n/home/cabox/.rvm/gems/ruby-2.1.2/gems/activerecord-4.1.6/lib/active_record/railties/databases.rake:34:in `block (2 levels) in &lt;top (required)&gt;'                                                                                                      \n/home/cabox/.rvm/gems/ruby-2.1.2/gems/rake-12.0.0/exe/rake:27:in `&lt;top (required)&gt;'                                                                                                                                                                  \nTasks: TOP =&gt; db:migrate                                                                                                                                                                                                                             \n(See full trace by running task with --trace)` &gt;    \n</code></pre>\n\n<p>Does anyone know how to solve this problem?</p>\n\n<p>In the migration file I have:</p>\n\n<pre><code>class CreatePosts &lt; ActiveRecord::Migration\n  def change\n    create_table :posts do |t|\n      t.string :title\n      t.strind : \n      t.text :body \n      t.timestamps\n    end\n  end\nend\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "windows", "rvm", "pik"], "comments": [{"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1483492514, "post_id": 41454740, "comment_id": 70115964, "body": "I bet you could just edit the Gemfile to say<code>2.2.6</code> instead - the versions aren&#39;t that different."}, {"owner": {"reputation": 227, "user_id": 2089111, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Ym326.jpg?s=128&g=1", "display_name": "DanHam", "link": "https://stackoverflow.com/users/2089111/danham"}, "reply_to_user": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1483547104, "post_id": 41454740, "comment_id": 70142799, "body": "I tried that and ran into a couple of different issues - would it be worth adding those to the question?  Would I be able to do the same with changing the rails version from 4.2.0 to 5.0.1?"}], "answers": [{"tags": [], "owner": {"reputation": 4449, "user_id": 7681659, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/47bc1a3b7231505d61b7f80642bc1a14?s=128&d=identicon&r=PG&f=1", "display_name": "ashmaroli", "link": "https://stackoverflow.com/users/7681659/ashmaroli"}, "is_accepted": true, "score": 1, "last_activity_date": 1489241728, "creation_date": 1489241728, "answer_id": 42736263, "question_id": 41454740, "link": "https://stackoverflow.com/questions/41454740/do-i-have-to-install-ruby-from-source-to-get-ruby-2-2-0-and-rails-4-2-0-installe/42736263#42736263", "title": "Do I have to install Ruby from source to get Ruby 2.2.0 and Rails 4.2.0 installed on my windows machine?", "body": "<p>The oldest available <code>Ruby 2.2.x</code> via RubyInstaller is <code>2.2.1</code>\nSo, the answer to your question is, \"Yes, you'll have to build from source.\"</p>\n\n<p>But then again,\n<code>v2.x</code> of <code>gem \"rack\"</code> requires at least <code>Ruby v2.2.2</code></p>\n\n<p>And depending on what other gems are included in your <code>Gemfile</code>, you'll still have to reconfigure your <code>Gemfile</code> to get this app running.</p>\n\n<p>So the best solution is probably to use the latest patch version of <code>Ruby 2.2.x</code> and lock <code>rails</code> to <code>4.2.x</code>. (The app <em>may not</em> be compatible with <code>Rails 5.x</code>)</p>\n\n<pre><code># Lock-in Lang and Framework:\n\nruby '2.2.6'\ngem 'rails', '~&gt; 4.2'\n</code></pre>\n\n<p>Then run <code>bundle install</code> to install all the gems required by the <code>Gemfile</code></p>\n"}], "owner": {"reputation": 227, "user_id": 2089111, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Ym326.jpg?s=128&g=1", "display_name": "DanHam", "link": "https://stackoverflow.com/users/2089111/danham"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 423, "favorite_count": 0, "accepted_answer_id": 42736263, "answer_count": 1, "score": 0, "last_activity_date": 1489241728, "creation_date": 1483492153, "last_edit_date": 1483549355, "question_id": 41454740, "link": "https://stackoverflow.com/questions/41454740/do-i-have-to-install-ruby-from-source-to-get-ruby-2-2-0-and-rails-4-2-0-installe", "title": "Do I have to install Ruby from source to get Ruby 2.2.0 and Rails 4.2.0 installed on my windows machine?", "body": "<p>I currently have Ruby 2.2.6 and Rails 5.0.1 installed on my Windows 10 machine. I have cloned an existing project that has the following settings included in its Gemfile:</p>\n\n<pre><code># Lock-in Lang and Framework:\nruby '2.2.0'\ngem 'rails', '4.2.0'\n</code></pre>\n\n<p>I'm having a surprisingly hard time figuring out how to get Ruby 2.2.0 and Rails 4.2.0 installed. Ruby has <a href=\"https://www.ruby-lang.org/en/documentation/installation/\" rel=\"nofollow noreferrer\">good documentation of different installation options</a>, but I think I've exhausted the Windows options without any success. Here are a couple I tried:</p>\n\n<ul>\n<li>Installers: I couldn't find an option for downloading either from <a href=\"http://railsinstaller.org/en\" rel=\"nofollow noreferrer\">RailsInstaller</a>, <a href=\"https://rubyinstaller.org/downloads/\" rel=\"nofollow noreferrer\">RubyInstaller</a>, and <a href=\"https://bitnami.com/stack/ruby/installer#windows\" rel=\"nofollow noreferrer\">Bitnami</a>. </li>\n<li>RVM: I tried (unsuccessfully) following <a href=\"http://blog.developwithpassion.com/2012/03/30/installing-rvm-with-cygwin-on-windows/\" rel=\"nofollow noreferrer\">this blog post</a> to install cygwin so that I could use RVM, but then saw in the comments that the author now recommends spinning up a linux VM rather that using this method.</li>\n<li><a href=\"https://github.com/vertiginous/pik\" rel=\"nofollow noreferrer\">Pik</a> and <a href=\"https://bitbucket.org/jonforums/uru\" rel=\"nofollow noreferrer\">Uru</a>: It appears Pik is no longer maintained, and I couldn't figure how to download new versions and ruby and rails with Uru as opposed to managing already downloaded versions.</li>\n</ul>\n\n<p>EDIT: I also tried simply changing the version numbers for ruby and rails in the Gemfile to 2.2.6 and 5.0.1. When I do this I (very understandably) get a message when I try to use a rails command saying I need to run <code>bundle update rails</code>. When I run that rails update I get the following error: <code>Bundler could not find compatible versions for gem \"rack\"</code>.  I've done some googling on that option, and it looks like resolving that issue might be possible but requires some more involved tinkering with my Gemfile configuration. </p>\n\n<p>I think my next option is to install Ruby from the source, but I wanted to throw a question up here first to make sure I'm not missing an easier method. <strong>So my question is - is it really this hard to get an older minor release of ruby and rails installed on Windows?</strong> I realize that the majority of users are probably looking for the most recent release, but it doesn't seem to me that my use case is terribly unique. </p>\n"}, {"tags": ["ruby"], "answers": [{"comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1483511644, "post_id": 41454797, "comment_id": 70121091, "body": "Perhaps write #2 <code>Array.new(3, &quot;hello&quot;).join(&#39; &#39;)</code>."}, {"owner": {"reputation": 9030, "user_id": 5101476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JCQrl.jpg?s=128&g=1", "display_name": "ice\u30c4", "link": "https://stackoverflow.com/users/5101476/ice%e3%83%84"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1483513203, "post_id": 41454797, "comment_id": 70121791, "body": "@CarySwoveland Nice one, have added to my answer -thanks."}], "tags": [], "owner": {"reputation": 9030, "user_id": 5101476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JCQrl.jpg?s=128&g=1", "display_name": "ice\u30c4", "link": "https://stackoverflow.com/users/5101476/ice%e3%83%84"}, "is_accepted": true, "score": 2, "last_activity_date": 1483513116, "last_edit_date": 1483513116, "creation_date": 1483492655, "answer_id": 41454797, "question_id": 41454737, "link": "https://stackoverflow.com/questions/41454737/ruby-interpolation-issue-with-space/41454797#41454797", "title": "Ruby interpolation issue with space", "body": "<p>You can use <a href=\"http://ruby-doc.org/core-2.4.0/String.html#method-i-strip\" rel=\"nofollow noreferrer\"><code>String#strip</code></a>:</p>\n\n<pre><code>def repeat(string, a = 1)\n  (\"#{string} \"  * a).strip\nend\n\nrepeat('hello',3)\n#=&gt; \"hello hello hello\"\n</code></pre>\n\n<p>Another way is:</p>\n\n<pre><code>Array.new(3) {\"hello\"}.join(' ')\n#=&gt; \"hello hello hello\"\n</code></pre>\n\n<p>Also, we can have:</p>\n\n<pre><code>Array.new(3,\"hello\").join(' ')\n#=&gt; \"hello hello hello\"\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "is_accepted": false, "score": 1, "last_activity_date": 1483492682, "creation_date": 1483492682, "answer_id": 41454804, "question_id": 41454737, "link": "https://stackoverflow.com/questions/41454737/ruby-interpolation-issue-with-space/41454804#41454804", "title": "Ruby interpolation issue with space", "body": "<p>The String#rstrip function in Ruby core can be used here:</p>\n\n<pre><code>def repeat(string, a = 1)\n     (\"#{string} \"  * a).rstrip\nend\n</code></pre>\n\n<p>This will just remove all trailing spaces from the right side.</p>\n\n<p>Another option is to use Array#join ...</p>\n\n<pre><code>def repeat(string, a = 1)\n  ([string] * 2).join(\" \")\nend\n</code></pre>\n\n<p>Or, equivalently:</p>\n\n<pre><code>def repeat(string, a = 1)\n  a.times.map { string }.join(\" \")\nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 7188, "user_id": 3013522, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5498748e139a6d5715a167ae64611cc8?s=128&d=identicon&r=PG", "display_name": "Wilson Silva", "link": "https://stackoverflow.com/users/3013522/wilson-silva"}, "is_accepted": false, "score": 2, "last_activity_date": 1483492867, "creation_date": 1483492867, "answer_id": 41454822, "question_id": 41454737, "link": "https://stackoverflow.com/questions/41454737/ruby-interpolation-issue-with-space/41454822#41454822", "title": "Ruby interpolation issue with space", "body": "<p>You can use <a href=\"http://ruby-doc.org/core-2.4.0/String.html#method-i-chop\" rel=\"nofollow noreferrer\"><code>String#chop</code></a> to remove the last character:</p>\n\n<pre><code>def repeat(string, a = 1)\n  (\"#{string} \"  * a).chop\nend\n</code></pre>\n\n<p>Or you can use <a href=\"http://ruby-doc.org/core-2.3.3/Array.html#method-i-2A\" rel=\"nofollow noreferrer\">array repetition</a>:</p>\n\n<pre><code>def repeat(string, a = 1)\n  [string] * a * ' '\nend\n</code></pre>\n\n<p>You can also use a more intention revealing name than <code>a</code>, such as <code>repetitions</code>, <code>repeating_count</code>, <code>repeating_times</code>, etc.</p>\n"}, {"tags": [], "owner": {"reputation": 61, "user_id": 5696024, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/dbaa8b5f63c3ab5b0a938e3337e9c936?s=128&d=identicon&r=PG&f=1", "display_name": "Micael", "link": "https://stackoverflow.com/users/5696024/micael"}, "is_accepted": false, "score": 0, "last_activity_date": 1483493217, "creation_date": 1483493217, "answer_id": 41454857, "question_id": 41454737, "link": "https://stackoverflow.com/questions/41454737/ruby-interpolation-issue-with-space/41454857#41454857", "title": "Ruby interpolation issue with space", "body": "<p>What about:</p>\n\n<pre><code>def repeat(string, a = 1)\n   Array.new(a){string}.join(' ')\nend\nrepeat(\"hello\", 3)\n</code></pre>\n\n<p><code>Array.new(a)</code> will construct an array of size <code>a</code> where each position is the string. The <code>join(' ')</code> method will join the whole array by adding a space between each string.</p>\n"}], "owner": {"reputation": 2221, "user_id": 5921203, "user_type": "registered", "accept_rate": 42, "profile_image": "https://i.stack.imgur.com/lczFa.jpg?s=128&g=1", "display_name": "Steven Aguilar", "link": "https://stackoverflow.com/users/5921203/steven-aguilar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 261, "favorite_count": 0, "accepted_answer_id": 41454797, "answer_count": 4, "score": 0, "last_activity_date": 1483513116, "creation_date": 1483492138, "last_edit_date": 1483502271, "question_id": 41454737, "link": "https://stackoverflow.com/questions/41454737/ruby-interpolation-issue-with-space", "title": "Ruby interpolation issue with space", "body": "<p>I am currently coming across an issue that it seems simple but I have not been able to debug. With the following code:</p>\n\n<pre><code>def repeat(string, a = 1)\n     \"#{string} \"  * a\nend\nrepeat(\"hello\", 3)\n</code></pre>\n\n<p>I am trying to get the following output:</p>\n\n<p><code>expected: \"hello hello hello\"</code> \nBut instead I end up getting the following output <code>\"hello hello hello \"</code> if I were to take the space away I would end up with an output of <code>\"hellohellohello\"</code></p>\n"}, {"tags": ["ruby", "string", "time-complexity"], "comments": [{"owner": {"reputation": 46515, "user_id": 5647260, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/oByMV.jpg?s=128&g=1", "display_name": "Andrew Li", "link": "https://stackoverflow.com/users/5647260/andrew-li"}, "edited": false, "score": 1, "creation_date": 1483491281, "post_id": 41454587, "comment_id": 70115659, "body": "Why not check their source?"}, {"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 1, "creation_date": 1483491499, "post_id": 41454587, "comment_id": 70115702, "body": "The source only tells you what one specific version of one specific implementation does. It doesn&#39;t tell you anything about the guarantees that are made by the language specification. There are about 5 Ruby implementations in the wild right now, I believe. (Well, there are many more, but 5 that are industrial-strength, production-ready, still maintained and developed, and in actual real-world use.)"}, {"owner": {"reputation": 51391, "user_id": 132382, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/20fc7ee8f405aa42e36eb73e841e5a36?s=128&d=identicon&r=PG", "display_name": "pilcrow", "link": "https://stackoverflow.com/users/132382/pilcrow"}, "edited": false, "score": 4, "creation_date": 1483491884, "post_id": 41454587, "comment_id": 70115793, "body": "Do you really mean <code>String#count</code>, as your title asks, or do you mean <code>String#length</code>, as the linked question suggests?"}, {"owner": {"reputation": 568, "user_id": 969421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/e26b8671e7473dc24eb7c76f39e4456d?s=128&d=identicon&r=PG", "display_name": "gdpelican", "link": "https://stackoverflow.com/users/969421/gdpelican"}, "edited": false, "score": 1, "creation_date": 1483503778, "post_id": 41454587, "comment_id": 70118535, "body": "One really great way to feel confident about the answer to this for your own particular use case is to use Ruby&#39;s benchmarking tools, outlined here: <a href=\"https://ruby-doc.org/stdlib-1.9.3/libdoc/benchmark/rdoc/Benchmark.html\" rel=\"nofollow noreferrer\">ruby-doc.org/stdlib-1.9.3/libdoc/benchmark/rdoc/Benchmark.ht&zwnj;&#8203;ml</a>"}], "answers": [{"comments": [{"owner": {"reputation": 25823, "user_id": 24468, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/PWl6C.png?s=128&g=1", "display_name": "akuhn", "link": "https://stackoverflow.com/users/24468/akuhn"}, "edited": false, "score": 1, "creation_date": 1483494856, "post_id": 41454657, "comment_id": 70116548, "body": "Not quite, it does not count substrings but the occurrences of characters from the intersection of all parameters. Weird, I know."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "reply_to_user": {"reputation": 25823, "user_id": 24468, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/PWl6C.png?s=128&g=1", "display_name": "akuhn", "link": "https://stackoverflow.com/users/24468/akuhn"}, "edited": false, "score": 0, "creation_date": 1483497621, "post_id": 41454657, "comment_id": 70117162, "body": "@akuhn It&#39;s a lot like <a href=\"https://ruby-doc.org/core-2.4.0/String.html#method-i-tr\" rel=\"nofollow noreferrer\"><code>String#tr</code></a> that way with that Perl-inspired notation."}, {"owner": {"reputation": 25823, "user_id": 24468, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/PWl6C.png?s=128&g=1", "display_name": "akuhn", "link": "https://stackoverflow.com/users/24468/akuhn"}, "edited": false, "score": 0, "creation_date": 1483502164, "post_id": 41454657, "comment_id": 70118180, "body": "It actually uses <code>tr_find</code> and <code>tr_setup_table</code> internally."}], "tags": [], "owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "is_accepted": false, "score": 2, "last_activity_date": 1483491825, "last_edit_date": 1483491825, "creation_date": 1483491469, "answer_id": 41454657, "question_id": 41454587, "link": "https://stackoverflow.com/questions/41454587/in-ruby-whats-the-time-cost-of-str-length/41454657#41454657", "title": "In ruby, what&#39;s the time cost of str.length?", "body": "<p><a href=\"http://ruby-doc.org/core/String.html#method-i-count\" rel=\"nofollow noreferrer\"><code>String#count</code></a> counts the number of occurences of (a set of) substrings in the string. In order to do this, it <em>must</em> compare each character against the predicate set, there is no other way.</p>\n\n<p>It cannot possibly be faster than O(n). The trivial implementation is O(n), so in order to make it <em>slower</em> than O(n), you have to be extra stupid and do extra work. So, since it cannot be faster than O(n), and we can assume that nobody would be stupid or malicious enough to deliberately make it slower than O(n), we can safely conclude that it is O(n).</p>\n\n<p>However, that is just a conclusion. It is no guarantee. The Ruby Language Specification does not make performance guarantees. But you can be pretty sure that a Ruby implementation where it is not O(n) would be ridiculed and simply not used and die.</p>\n"}, {"tags": [], "owner": {"reputation": 25823, "user_id": 24468, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/PWl6C.png?s=128&g=1", "display_name": "akuhn", "link": "https://stackoverflow.com/users/24468/akuhn"}, "is_accepted": false, "score": 1, "last_activity_date": 1483495506, "creation_date": 1483495506, "answer_id": 41455124, "question_id": 41454587, "link": "https://stackoverflow.com/questions/41454587/in-ruby-whats-the-time-cost-of-str-length/41455124#41455124", "title": "In ruby, what&#39;s the time cost of str.length?", "body": "<p>The complexity is <code>O(n + m)</code> </p>\n\n<p>Where <code>n</code> is the size of the string and <code>m</code> is the number of character set parameters. </p>\n\n<ul>\n<li><code>O(m)</code> for the creation of the lookup table/hash from the arguments</li>\n<li><code>O(n) * O(1)</code> for the comparison of the input string with the lookup table/hash</li>\n<li>Depending on receiver and arguments, either <code>n</code> or <code>m</code> can be the dominating factor.</li>\n</ul>\n\n<hr>\n\n<p>If however you mean <code>String#length</code> then it is <code>O(1)</code></p>\n"}], "owner": {"reputation": 1360, "user_id": 4430977, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/1268ab423eed6c864e3c43514a55efa5?s=128&d=identicon&r=PG&f=1", "display_name": "segue_segway", "link": "https://stackoverflow.com/users/4430977/segue-segway"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 249, "favorite_count": 0, "closed_date": 1483513929, "answer_count": 2, "score": 0, "last_activity_date": 1483574835, "creation_date": 1483490927, "last_edit_date": 1495541786, "question_id": 41454587, "link": "https://stackoverflow.com/questions/41454587/in-ruby-whats-the-time-cost-of-str-length", "closed_reason": "Needs details or clarity", "title": "In ruby, what&#39;s the time cost of str.length?", "body": "<p><em>I had previously mistakenly asked for str.count, when I really meant str.length. Thanks to responders for getting back to me</em></p>\n\n<p>Is this a constant time operation or linear time? I know in Java it's constant time and C it's linear time, according to <a href=\"https://stackoverflow.com/questions/254726/in-java-for-a-string-x-what-is-the-runtime-cost-of-s-length-is-it-o1-or-o\">In Java, for a string x, what is the runtime cost of s.length()? Is it O(1) or O(n)?</a> but not sure what the case is in Ruby.</p>\n"}, {"tags": ["javascript", "ruby-on-rails", "ruby", "ruby-on-rails-4", "stripe-payments"], "answers": [{"comments": [{"owner": {"reputation": 394580, "user_id": 479863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ArUCE.jpg?s=128&g=1", "display_name": "mu is too short", "link": "https://stackoverflow.com/users/479863/mu-is-too-short"}, "edited": false, "score": 1, "creation_date": 1483496864, "post_id": 41454673, "comment_id": 70116977, "body": "The <code>def create</code> is, more or less, an implicit <code>begin</code> so you don&#39;t need an explicit <code>begin</code> if you want the <code>rescue</code> to apply to the whole method."}, {"owner": {"reputation": 3, "user_id": 4228102, "user_type": "registered", "accept_rate": 11, "profile_image": "https://www.gravatar.com/avatar/12f2d034ae6a019708d821be1fa013db?s=128&d=identicon&r=PG&f=1", "display_name": "Dean Gergori\u0107", "link": "https://stackoverflow.com/users/4228102/dean-gergori%c4%87"}, "edited": false, "score": 0, "creation_date": 1483549821, "post_id": 41454673, "comment_id": 70144740, "body": "yes that thing didn&#39;t work. Do you have any other advice?"}, {"owner": {"reputation": 3, "user_id": 4228102, "user_type": "registered", "accept_rate": 11, "profile_image": "https://www.gravatar.com/avatar/12f2d034ae6a019708d821be1fa013db?s=128&d=identicon&r=PG&f=1", "display_name": "Dean Gergori\u0107", "link": "https://stackoverflow.com/users/4228102/dean-gergori%c4%87"}, "edited": false, "score": 0, "creation_date": 1483549931, "post_id": 41454673, "comment_id": 70144818, "body": "I don&#39;t want that stripe charge popup window open if validation is not passing."}, {"owner": {"reputation": 7196, "user_id": 379538, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05087d995c7f4660b688e9d61f0b4e5a?s=128&d=identicon&r=PG", "display_name": "floatingLomas", "link": "https://stackoverflow.com/users/379538/floatinglomas"}, "reply_to_user": {"reputation": 3, "user_id": 4228102, "user_type": "registered", "accept_rate": 11, "profile_image": "https://www.gravatar.com/avatar/12f2d034ae6a019708d821be1fa013db?s=128&d=identicon&r=PG&f=1", "display_name": "Dean Gergori\u0107", "link": "https://stackoverflow.com/users/4228102/dean-gergori%c4%87"}, "edited": false, "score": 0, "creation_date": 1483567629, "post_id": 41454673, "comment_id": 70153966, "body": "@DeanGergori\u0107 Looks like you re-asked this question (<a href=\"http://stackoverflow.com/questions/41454454\">stackoverflow.com/questions/41454454</a>) and I think the answer over there is the correct one based on what you&#39;re trying to do."}], "tags": [], "owner": {"reputation": 7196, "user_id": 379538, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05087d995c7f4660b688e9d61f0b4e5a?s=128&d=identicon&r=PG", "display_name": "floatingLomas", "link": "https://stackoverflow.com/users/379538/floatinglomas"}, "is_accepted": false, "score": 0, "last_activity_date": 1483491689, "creation_date": 1483491689, "answer_id": 41454673, "question_id": 41454454, "link": "https://stackoverflow.com/questions/41454454/ruby-stripe-and-javascript/41454673#41454673", "title": "Ruby, stripe and javascript", "body": "<p>You'll need to include the <code>begin</code> and <code>end</code> with the <code>rescue</code> in your try/catch block or I don't believe it'll work properly:</p>\n\n<pre><code>begin\n  charge = Stripe::Charge.create(\n    :customer    =&gt; customer.id,\n    :amount      =&gt; @amount,\n    :description =&gt; 'Rails Stripe customer',\n    :currency    =&gt; 'usd'\n  )\n\nrescue Stripe::CardError =&gt; e\n  flash[:error] = e.message\n  redirect_to new_charge_path\nend\n</code></pre>\n\n<p>You may also want to confirm that <code>params[:stripeEmail]</code> and <code>params[:stripeToken]</code> actually contain (expected) things before you try to create the Customer.</p>\n"}, {"tags": [], "owner": {"reputation": 4736, "user_id": 550454, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/5c3e09b0c9c219bc524284bdb751d50e?s=128&d=identicon&r=PG", "display_name": "Karl Wilbur", "link": "https://stackoverflow.com/users/550454/karl-wilbur"}, "is_accepted": false, "score": 0, "last_activity_date": 1489492760, "creation_date": 1489492760, "answer_id": 42785424, "question_id": 41454454, "link": "https://stackoverflow.com/questions/41454454/ruby-stripe-and-javascript/42785424#42785424", "title": "Ruby, stripe and javascript", "body": "<p>You need to put your Stripe interaction inside the <code>if</code> block for <code>@post.save</code>. Something like this:</p>\n\n<pre><code>def create\n  @post = Post.new(post_params)\n\n  if @post.save\n    # Amount in cents\n    @amount = 150\n\n    begin\n      customer = Stripe::Customer.create(\n        :email =&gt; params[:stripeEmail],\n        :source  =&gt; params[:stripeToken]\n      )\n\n      charge = Stripe::Charge.create(\n        :customer    =&gt; customer.id,\n        :amount      =&gt; @amount,\n        :description =&gt; 'Rails Stripe customer',\n        :currency    =&gt; 'usd'\n      )\n\n      redirect_to @post, notice: 'Your post was created.'\n    rescue Stripe::CardError =&gt; e\n      flash[:error] = e.message\n      redirect_to new_charge_path\n    end\n  else\n    render :new\n  end\n</code></pre>\n\n<p>Also, I need to comment on the fact that this doesn't really belong in the controller. I would build a class to handle the Stripe interaction.</p>\n\n<p>That way, in your controller, you would have something like:</p>\n\n<pre><code>if @post.save\n  begin\n    MyStripeStuff.create_and_charge_customer({\n       email: params[:stripeEmail],\n       token: params[:stripeToken],\n       amount: 150,\n       currency: 'usd',\n       description: 'Rails Stripe customer'\n    })\n    redirect_to @post, notice: 'Your post was created.'\n  rescue Stripe::CardError =&gt; e\n    flash[:error] = e.message\n    redirect_to new_charge_path\n  end\nelse\n  render :new\nend\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 4228102, "user_type": "registered", "accept_rate": 11, "profile_image": "https://www.gravatar.com/avatar/12f2d034ae6a019708d821be1fa013db?s=128&d=identicon&r=PG&f=1", "display_name": "Dean Gergori\u0107", "link": "https://stackoverflow.com/users/4228102/dean-gergori%c4%87"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 68, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1489492760, "creation_date": 1483489909, "question_id": 41454454, "link": "https://stackoverflow.com/questions/41454454/ruby-stripe-and-javascript", "title": "Ruby, stripe and javascript", "body": "<p>How can I incorporate this script in ruby form so stripe charge doesn't go through if doesn't create post.</p>\n\n<p>now if I remove validations post is posted if charge goes through and if charge doesn't go through post is not posted.</p>\n\n<p>as soon as I add validations and something is missing, by clicking on pay when charge is correct, validation stops to save post in database but charge is going still through. </p>\n\n<p>Wive</p>\n\n<pre><code>&lt;%= form_for @post do |f| %&gt;\n\n\n  &lt;div&gt;\n    &lt;%= f.label :name %&gt;\n    &lt;%= f.text_field :name %&gt;\n  &lt;/div&gt;\n\n  &lt;div&gt;\n    &lt;%= f.label :email %&gt;\n    &lt;%= f.text_field :email %&gt;\n  &lt;/div&gt;\n\n  &lt;div&gt;\n    &lt;%= f.label :phone_number %&gt;\n    &lt;%= f.text_field :phone_number %&gt;\n  &lt;/div&gt;\n\n  &lt;div&gt;\n    &lt;%= f.label :post %&gt;\n    &lt;%= f.text_area :post %&gt;\n  &lt;/div&gt;\n\n  &lt;script src=\"https://checkout.stripe.com/checkout.js\" class=\"stripe-button\"\n          data-key=\"&lt;%= Rails.configuration.stripe[:publishable_key] %&gt;\"\n          data-description=\"Good Luck\"\n          data-amount=\"500\"\n          data-locale=\"auto\"&gt;&lt;/script&gt;\n\n\n&lt;% end %&gt;\n</code></pre>\n\n<p>post controller</p>\n\n<pre><code>class PostsController &lt; ApplicationController\n\n  before_action :authenticate_admin!, only: [:index]\n\n  def index\n    @posts = Post.all\n  end\n\n  def new\n    @post = Post.new\n  end\n\n  def show\n\n  end\n\n  def create\n    @post = Post.new(post_params)\n\n    if @post.save\n      redirect_to @post, notice: 'Your post was create'\n    else\n      render :new\n    end\n\n      # Amount in cents\n      @amount = 150\n\n      customer = Stripe::Customer.create(\n        :email =&gt; params[:stripeEmail],\n        :source  =&gt; params[:stripeToken]\n      )\n\n      charge = Stripe::Charge.create(\n        :customer    =&gt; customer.id,\n        :amount      =&gt; @amount,\n        :description =&gt; 'Rails Stripe customer',\n        :currency    =&gt; 'usd'\n      )\n\n    rescue Stripe::CardError =&gt; e\n      flash[:error] = e.message\n      redirect_to new_charge_path\n\n\n  end\n\n  private\n\n  def post_params\n    params.require(:post).permit(:name, :email, :phone_number, :post)\n  end\n\nend\n</code></pre>\n\n<p>post model</p>\n\n<pre><code>validates :name, :phone_number, :post, presence: true\n\n  validates :email,\n            presence: true,\n            format: { with: /\\b[A-Z0-9._%a-z\\-]+@(?:[A-Z0-9a-z\\-]+\\.)+[A-Za-z]{2,4}\\z/}\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "json", "ruby", "ruby-on-rails-4", "rubygems"], "comments": [{"owner": {"reputation": 18856, "user_id": 1359650, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/dffc4318ac93e728a26c8e8b51b4eb37?s=128&d=identicon&r=PG", "display_name": "jvillian", "link": "https://stackoverflow.com/users/1359650/jvillian"}, "edited": false, "score": 1, "creation_date": 1483488388, "post_id": 41454209, "comment_id": 70115010, "body": "See if this helps: <a href=\"http://stackoverflow.com/questions/19050654/how-to-see-the-dependency-tree-just-from-gemfile\" title=\"how to see the dependency tree just from gemfile\">stackoverflow.com/questions/19050654/&hellip;</a>"}, {"owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "edited": false, "score": 0, "creation_date": 1483492065, "post_id": 41454209, "comment_id": 70115842, "body": "One unrelated thing is that you have the <code>postgresql</code> gem in your gemfile. You should use the <a href=\"https://rubygems.org/gems/pg\" rel=\"nofollow noreferrer\"><code>pg</code></a> gem directly instead."}, {"owner": {"reputation": 640, "user_id": 79623, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/mCRMz.png?s=128&g=1", "display_name": "MarkDav.is", "link": "https://stackoverflow.com/users/79623/markdav-is"}, "edited": false, "score": 0, "creation_date": 1483837049, "post_id": 41454209, "comment_id": 70262590, "body": "I have this exact problem with mac Sierra and I&#39;m looing for a fix.  did you ever find one?"}], "answers": [{"comments": [{"owner": {"reputation": 16802, "user_id": 1235929, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/9f460ae7deb6fa19034c810a53b9fbac?s=128&d=identicon&r=PG", "display_name": "Dave", "link": "https://stackoverflow.com/users/1235929/dave"}, "edited": false, "score": 0, "creation_date": 1483541008, "post_id": 41454704, "comment_id": 70138514, "body": "I wanted to fix the build error and I ran the statements you listed regarding xcode.  Although all thsoe ran successfully and I agreed to the license, I still got the error above when I attempted to do &quot;bundle install.&quot;"}], "tags": [], "owner": {"reputation": 7188, "user_id": 3013522, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5498748e139a6d5715a167ae64611cc8?s=128&d=identicon&r=PG", "display_name": "Wilson Silva", "link": "https://stackoverflow.com/users/3013522/wilson-silva"}, "is_accepted": false, "score": 1, "last_activity_date": 1483492166, "last_edit_date": 1483492166, "creation_date": 1483491880, "answer_id": 41454704, "question_id": 41454209, "link": "https://stackoverflow.com/questions/41454209/how-do-i-figure-out-what-is-causing-rails-to-require-json-1-8-3/41454704#41454704", "title": "How do I figure out what is causing Rails to require JSON 1.8.3?", "body": "<p><code>json</code> is required by a couple of gems, including <code>activesupport</code>, which is required by <code>rails</code>.</p>\n\n<p>As mentioned by jvillan, you can find the dependency tree using <code>gem dependency</code>, more specifically <code>gem dep -R json</code>, <code>bundle viz</code>, or look at the <code>Gemfile.lock</code>.</p>\n\n<p>To fix this build error, you can try updating Bundler itself and xcode too:</p>\n\n<pre><code>$ xcode-select --install\n$ sudo chown -R (whoami):admin /usr/local\n$ sudo xcode-select --reset\n$ softwareupdate --install\n$ sudo xcodebuild -license\n</code></pre>\n\n<p>Then agree or with Apples license.</p>\n"}, {"tags": [], "owner": {"reputation": 1635, "user_id": 4732342, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/48VaR.jpg?s=128&g=1", "display_name": "Hank Phung", "link": "https://stackoverflow.com/users/4732342/hank-phung"}, "is_accepted": false, "score": 0, "last_activity_date": 1484052182, "creation_date": 1484052182, "answer_id": 41569141, "question_id": 41454209, "link": "https://stackoverflow.com/questions/41454209/how-do-i-figure-out-what-is-causing-rails-to-require-json-1-8-3/41569141#41569141", "title": "How do I figure out what is causing Rails to require JSON 1.8.3?", "body": "<p>I faced this problem too and my solution is just fallback Ruby version to 2.3 and wait for all gems to run on 2.4</p>\n"}, {"tags": [], "owner": {"reputation": 352, "user_id": 6646194, "user_type": "registered", "accept_rate": 39, "profile_image": "https://graph.facebook.com/654853087999024/picture?type=large", "display_name": "Leon Bogod", "link": "https://stackoverflow.com/users/6646194/leon-bogod"}, "is_accepted": false, "score": 0, "last_activity_date": 1495290749, "creation_date": 1495290749, "answer_id": 44087106, "question_id": 41454209, "link": "https://stackoverflow.com/questions/41454209/how-do-i-figure-out-what-is-causing-rails-to-require-json-1-8-3/44087106#44087106", "title": "How do I figure out what is causing Rails to require JSON 1.8.3?", "body": "<p>i had same problem.  you need to update to rails 5 and the do bundle again</p>\n"}], "owner": {"reputation": 16802, "user_id": 1235929, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/9f460ae7deb6fa19034c810a53b9fbac?s=128&d=identicon&r=PG", "display_name": "Dave", "link": "https://stackoverflow.com/users/1235929/dave"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 315, "favorite_count": 0, "answer_count": 3, "score": 1, "last_activity_date": 1495290749, "creation_date": 1483487839, "question_id": 41454209, "link": "https://stackoverflow.com/questions/41454209/how-do-i-figure-out-what-is-causing-rails-to-require-json-1-8-3", "title": "How do I figure out what is causing Rails to require JSON 1.8.3?", "body": "<p>I'm using Ruby 2.4 on Mac Sierra.  How do I figure out what Gem is requiring JSON 1.8.3?  Although I haven't specified this gem in my Gmefile, shown below</p>\n\n<pre><code># Bundle edge Rails instead: gem 'rails', github: 'rails/rails'\ngem 'rails'  #, '~&gt; 4.2.7.1'\n# Use SCSS for stylesheets\ngem 'sass-rails', '~&gt; 5.0'\n# Use Uglifier as compressor for JavaScript assets\ngem 'uglifier', '&gt;= 1.3.0'\n# Use CoffeeScript for .coffee assets and views\ngem 'coffee-rails', '~&gt; 4.2'\n# See https://github.com/rails/execjs#readme for more supported runtimes\n# gem 'therubyracer', platforms: :ruby\n\n# Use jquery as the JavaScript library\ngem 'jquery-rails'\n# Turbolinks makes navigating your web application faster. Read more: https://github.com/turbolinks/turbolinks\ngem 'turbolinks', '~&gt; 5'\n# Build JSON APIs with ease. Read more: https://github.com/rails/jbuilder\ngem 'jbuilder', '~&gt; 2.5'\n# Use Redis adapter to run Action Cable in production\n# gem 'redis', '~&gt; 3.0'\n\ngem 'uuids'\ngem 'addressable'\ngem 'postgresql'\ngem 'pundit'\ngem 'omniauth-oauth2', '~&gt; 1.3.1'\ngem 'omniauth-google-oauth2'\ngem 'omniauth-facebook'\ngem 'omniauth-twitter'\ngem 'omniauth-linkedin-oauth2'\ngem 'jquery-ui-rails'\ngem 'jquery-cookie-rails'\ngem 'will_paginate'\ngem 'bootstrap-sass'\ngem 'autoprefixer-rails'\ngem 'compass-rails'\ngem 'pdf-reader'\ngem 'jquery-turbolinks'\ngem 'activerecord-import'\ngem 'w3c_validators'\ngem 'whenever', :require =&gt; false\ngem 'roo-xls'\ngem 'socksify'\n</code></pre>\n\n<p>but when I run \"bundle install,\" I get all these errors related to the JSON gem, that I haven't specified anywhere.</p>\n\n<pre><code>localhost:myproject davea$ bundle install\nFetching gem metadata from https://rubygems.org/.........\nFetching version metadata from https://rubygems.org/..\nFetching dependency metadata from https://rubygems.org/.\nResolving dependencies..........\nUsing rake 12.0.0\nUsing Ascii85 1.0.2\nUsing i18n 0.7.0\nInstalling json 1.8.3 with native extensions\nUsing minitest 5.10.1\nUsing thread_safe 0.3.5\nUsing builder 3.2.2\nUsing erubis 2.7.0\nUsing mini_portile2 2.1.0\nUsing rack 1.6.5\nUsing mime-types-data 3.2016.0521\nUsing arel 6.0.4\nUsing public_suffix 2.0.5\nUsing afm 0.2.2\nUsing execjs 2.7.0\nUsing sass 3.4.23\nUsing bundler 1.13.7\nUsing byebug 9.0.6\nUsing chronic 0.10.2\nUsing chunky_png 1.3.8\nUsing coffee-script-source 1.12.2\nUsing thor 0.19.4\nUsing multi_json 1.12.1\nUsing rb-fsevent 0.9.8\nUsing ffi 1.9.14\nUsing concurrent-ruby 1.0.4\nUsing tilt 2.0.5\nUsing debug_inspector 0.0.2\nUsing multipart-post 2.0.0\nUsing hashery 2.1.2\nUsing hashie 3.4.6\nUsing turbolinks-source 5.0.0\nUsing jwt 1.5.6\nUsing multi_xml 0.6.0\nUsing oauth 0.5.1\nUsing ruby-rc4 0.1.5\nUsing ttfunk 1.4.0\nUsing pg 0.19.0\nUsing rubyzip 1.2.0\nUsing ruby-ole 1.2.12\nUsing socksify 1.7.0\nGem::Ext::BuildError: ERROR: Failed to build gem native extension.\n\n    current directory: /Users/davea/.rvm/gems/ruby-2.4.0/gems/json-1.8.3/ext/json/ext/generator\n/Users/davea/.rvm/rubies/ruby-2.4.0/bin/ruby -r ./siteconf20170103-19554-1x7gtyd.rb extconf.rb\ncreating Makefile\n\ncurrent directory: /Users/davea/.rvm/gems/ruby-2.4.0/gems/json-1.8.3/ext/json/ext/generator\nmake \"DESTDIR=\" clean\n\ncurrent directory: /Users/davea/.rvm/gems/ruby-2.4.0/gems/json-1.8.3/ext/json/ext/generator\nmake \"DESTDIR=\"\ncompiling generator.c\ngenerator.c:861:25: error: use of undeclared identifier 'rb_cFixnum'\n    } else if (klass == rb_cFixnum) {\n                        ^\ngenerator.c:863:25: error: use of undeclared identifier 'rb_cBignum'\n    } else if (klass == rb_cBignum) {\n                        ^\ngenerator.c:975:5: warning: division by zero is undefined [-Wdivision-by-zero]\n    rb_scan_args(argc, argv, \"01\", &amp;opts);\n    ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\n/Users/davea/.rvm/rubies/ruby-2.4.0/include/ruby-2.4.0/ruby/ruby.h:2143:9: note: expanded from macro 'rb_scan_args'\n        rb_scan_args0(argc,argvp,fmt,\\\n        ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\n/Users/davea/.rvm/rubies/ruby-2.4.0/include/ruby-2.4.0/ruby/ruby.h:2329:8: note: expanded from macro 'rb_scan_args0'\n                     rb_scan_args_verify(fmt, varc), vars)\n                     ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\n/Users/davea/.rvm/rubies/ruby-2.4.0/include/ruby-2.4.0/ruby/ruby.h:2201:11: note: expanded from macro 'rb_scan_args_verify'\n        verify = rb_scan_args_verify_count(fmt, varc); \\\n                 ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\nnote: (skipping 4 expansions in backtrace; use -fmacro-backtrace-limit=0 to see all)\n/Users/davea/.rvm/rubies/ruby-2.4.0/include/ruby-2.4.0/ruby/ruby.h:2167:6: note: expanded from macro    'rb_scan_args_count_hash'\n     rb_scan_args_count_block(fmt, ofs, varc, vari) : \\\n     ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\n/Users/davea/.rvm/rubies/ruby-2.4.0/include/ruby-2.4.0/ruby/ruby.h:2162:6: note: expanded from macro    'rb_scan_args_count_block'\n     rb_scan_args_count_end(fmt, ofs, varc, vari) : \\\n     ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\n/Users/davea/.rvm/rubies/ruby-2.4.0/include/ruby-2.4.0/ruby/ruby.h:2158:12: note: expanded from macro   'rb_scan_args_count_end'\n    ((vari)/(!fmt[ofs] || rb_scan_args_bad_format(fmt)))\n           ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\ngenerator.c:975:5: warning: division by zero is undefined [-Wdivision-by-zero]\n    rb_scan_args(argc, argv, \"01\", &amp;opts);\n    ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\n/Users/davea/.rvm/rubies/ruby-2.4.0/include/ruby-2.4.0/ruby/ruby.h:2143:9: note: expanded from macro 'rb_scan_args'\n        rb_scan_args0(argc,argvp,fmt,\\\n        ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\n/Users/davea/.rvm/rubies/ruby-2.4.0/include/ruby-2.4.0/ruby/ruby.h:2329:8: note: expanded from macro 'rb_scan_args0'\n                     rb_scan_args_verify(fmt, varc), vars)\n                     ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\n/Users/davea/.rvm/rubies/ruby-2.4.0/include/ruby-2.4.0/ruby/ruby.h:2201:11: note: expanded from macro 'rb_scan_args_verify'\n        verify = rb_scan_args_verify_count(fmt, varc); \\\n                 ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\nnote: (skipping 4 expansions in backtrace; use -fmacro-backtrace-limit=0 to see all)\n/Users/davea/.rvm/rubies/ruby-2.4.0/include/ruby-2.4.0/ruby/ruby.h:2167:6: note: expanded from macro    'rb_scan_args_count_hash'\n     rb_scan_args_count_block(fmt, ofs, varc, vari) : \\\n     ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\n/Users/davea/.rvm/rubies/ruby-2.4.0/include/ruby-2.4.0/ruby/ruby.h:2163:6: note: expanded from macro    'rb_scan_args_count_block'\n     rb_scan_args_count_end(fmt, ofs+1, varc, vari+1))\n     ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\n/Users/davea/.rvm/rubies/ruby-2.4.0/include/ruby-2.4.0/ruby/ruby.h:2158:12: note: expanded from macro   'rb_scan_args_count_end'\n    ((vari)/(!fmt[ofs] || rb_scan_args_bad_format(fmt)))\n           ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\ngenerator.c:975:5: warning: division by zero is undefined [-Wdivision-by-zero]\n    rb_scan_args(argc, argv, \"01\", &amp;opts);\n    ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\n/Users/davea/.rvm/rubies/ruby-2.4.0/include/ruby-2.4.0/ruby/ruby.h:2143:9: note: expanded from macro 'rb_scan_args'\n        rb_scan_args0(argc,argvp,fmt,\\\n        ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\n/Users/davea/.rvm/rubies/ruby-2.4.0/include/ruby-2.4.0/ruby/ruby.h:2329:8: note: expanded from macro 'rb_scan_args0'\n                     rb_scan_args_verify(fmt, varc), vars)\n                     ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\n/Users/davea/.rvm/rubies/ruby-2.4.0/include/ruby-2.4.0/ruby/ruby.h:2201:11: note: expanded from macro 'rb_scan_args_verify'\n        verify = rb_scan_args_verify_count(fmt, varc); \\\n                 ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\nnote: (skipping 4 expansions in backtrace; use -fmacro-backtrace-limit=0 to see all)\n/Users/davea/.rvm/rubies/ruby-2.4.0/include/ruby-2.4.0/ruby/ruby.h:2168:6: note: expanded from macro    'rb_scan_args_count_hash'\n     rb_scan_args_count_block(fmt, ofs+1, varc, vari+1))\n     ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\n/Users/davea/.rvm/rubies/ruby-2.4.0/include/ruby-2.4.0/ruby/ruby.h:2162:6: note: expanded from macro    'rb_scan_args_count_block'\n     rb_scan_args_count_end(fmt, ofs, varc, vari) : \\\n     ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\n/Users/davea/.rvm/rubies/ruby-2.4.0/include/ruby-2.4.0/ruby/ruby.h:2158:12: note: expanded from macro   'rb_scan_args_count_end'\n    ((vari)/(!fmt[ofs] || rb_scan_args_bad_format(fmt)))\n           ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\ngenerator.c:975:5: warning: division by zero is undefined [-Wdivision-by-zero]\n    rb_scan_args(argc, argv, \"01\", &amp;opts);\n    ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\n/Users/davea/.rvm/rubies/ruby-2.4.0/include/ruby-2.4.0/ruby/ruby.h:2143:9: note: expanded from macro 'rb_scan_args'\n        rb_scan_args0(argc,argvp,fmt,\\\n        ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\n/Users/davea/.rvm/rubies/ruby-2.4.0/include/ruby-2.4.0/ruby/ruby.h:2329:8: note: expanded from macro 'rb_scan_args0'\n                     rb_scan_args_verify(fmt, varc), vars)\n                     ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\n/Users/davea/.rvm/rubies/ruby-2.4.0/include/ruby-2.4.0/ruby/ruby.h:2201:11: note: expanded from macro 'rb_scan_args_verify'\n        verify = rb_scan_args_verify_count(fmt, varc); \\\n                 ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\nnote: (skipping 4 expansions in backtrace; use -fmacro-backtrace-limit=0 to see all)\n/Users/davea/.rvm/rubies/ruby-2.4.0/include/ruby-2.4.0/ruby/ruby.h:2167:6: note: expanded from macro    'rb_scan_args_count_hash'\n     rb_scan_args_count_block(fmt, ofs, varc, vari) : \\\n     ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\n/Users/davea/.rvm/rubies/ruby-2.4.0/include/ruby-2.4.0/ruby/ruby.h:2162:6: note: expanded from macro    'rb_scan_args_count_block'\n     rb_scan_args_count_end(fmt, ofs, varc, vari) : \\\n     ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\n/Users/davea/.rvm/rubies/ruby-2.4.0/include/ruby-2.4.0/ruby/ruby.h:2158:12: note: expanded from macro   'rb_scan_args_count_end'\n    ((vari)/(!fmt[ofs] || rb_scan_args_bad_format(fmt)))\n           ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\ngenerator.c:975:5: warning: division by zero is undefined [-Wdivision-by-zero]\n    rb_scan_args(argc, argv, \"01\", &amp;opts);\n    ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\n/Users/davea/.rvm/rubies/ruby-2.4.0/include/ruby-2.4.0/ruby/ruby.h:2143:9: note: expanded from macro 'rb_scan_args'\n        rb_scan_args0(argc,argvp,fmt,\\\n        ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\n/Users/davea/.rvm/rubies/ruby-2.4.0/include/ruby-2.4.0/ruby/ruby.h:2329:8: note: expanded from macro 'rb_scan_args0'\n                     rb_scan_args_verify(fmt, varc), vars)\n                     ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\n/Users/davea/.rvm/rubies/ruby-2.4.0/include/ruby-2.4.0/ruby/ruby.h:2201:11: note: expanded from macro 'rb_scan_args_verify'\n        verify = rb_scan_args_verify_count(fmt, varc); \\\n                 ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\nnote: (skipping 4 expansions in backtrace; use -fmacro-backtrace-limit=0 to see all)\n/Users/davea/.rvm/rubies/ruby-2.4.0/include/ruby-2.4.0/ruby/ruby.h:2167:6: note: expanded from macro    'rb_scan_args_count_hash'\n     rb_scan_args_count_block(fmt, ofs, varc, vari) : \\\n     ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\n/Users/davea/.rvm/rubies/ruby-2.4.0/include/ruby-2.4.0/ruby/ruby.h:2162:6: note: expanded from macro    'rb_scan_args_count_block'\n     rb_scan_args_count_end(fmt, ofs, varc, vari) : \\\n     ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\n/Users/davea/.rvm/rubies/ruby-2.4.0/include/ruby-2.4.0/ruby/ruby.h:2158:12: note: expanded from macro   'rb_scan_args_count_end'\n    ((vari)/(!fmt[ofs] || rb_scan_args_bad_format(fmt)))\n           ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\ngenerator.c:975:5: warning: division by zero is undefined [-Wdivision-by-zero]\n    rb_scan_args(argc, argv, \"01\", &amp;opts);\n    ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\n/Users/davea/.rvm/rubies/ruby-2.4.0/include/ruby-2.4.0/ruby/ruby.h:2143:9: note: expanded from macro 'rb_scan_args'\n        rb_scan_args0(argc,argvp,fmt,\\\n        ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\n/Users/davea/.rvm/rubies/ruby-2.4.0/include/ruby-2.4.0/ruby/ruby.h:2329:8: note: expanded from macro 'rb_scan_args0'\n                     rb_scan_args_verify(fmt, varc), vars)\n                     ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\n/Users/davea/.rvm/rubies/ruby-2.4.0/include/ruby-2.4.0/ruby/ruby.h:2201:11: note: expanded from macro 'rb_scan_args_verify'\n        verify = rb_scan_args_verify_count(fmt, varc); \\\n                 ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\nnote: (skipping 5 expansions in backtrace; use -fmacro-backtrace-limit=0 to see all)\n/Users/davea/.rvm/rubies/ruby-2.4.0/include/ruby-2.4.0/ruby/ruby.h:2167:6: note: expanded from macro    'rb_scan_args_count_hash'\n     rb_scan_args_count_block(fmt, ofs, varc, vari) : \\\n     ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\n/Users/davea/.rvm/rubies/ruby-2.4.0/include/ruby-2.4.0/ruby/ruby.h:2162:6: note: expanded from macro    'rb_scan_args_count_block'\n     rb_scan_args_count_end(fmt, ofs, varc, vari) : \\\n     ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\n/Users/davea/.rvm/rubies/ruby-2.4.0/include/ruby-2.4.0/ruby/ruby.h:2158:12: note: expanded from macro   'rb_scan_args_count_end'\n    ((vari)/(!fmt[ofs] || rb_scan_args_bad_format(fmt)))\n           ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\n6 warnings and 2 errors generated.\nmake: *** [generator.o] Error 1\n\nmake failed, exit code 2\n\nGem files will remain installed in /Users/davea/.rvm/gems/ruby-2.4.0/gems/json-1.8.3 for inspection.\nResults logged to /Users/davea/.rvm/gems/ruby-2.4.0/extensions/x86_64-darwin-16/2.4.0/json-1.8.3/gem_make.out\n\nAn error occurred while installing json (1.8.3), and Bundler cannot continue.\nMake sure that `gem install json -v '1.8.3'` succeeds before bundling.\n</code></pre>\n\n<p>How do I figure out what is requiring this gem or how do I fix the errors altogether?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-3", "ruby-on-rails-4", "aasm"], "answers": [{"tags": [], "owner": {"reputation": 16919, "user_id": 152825, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/e990c2bcb4dfb7fd0c398098da9bca59?s=128&d=identicon&r=PG", "display_name": "timpone", "link": "https://stackoverflow.com/users/152825/timpone"}, "is_accepted": false, "score": 1, "last_activity_date": 1483503716, "creation_date": 1483503716, "answer_id": 41456173, "question_id": 41453781, "link": "https://stackoverflow.com/questions/41453781/best-practices-for-using-aasm-in-a-rails-api-controller/41456173#41456173", "title": "Best Practices for using AASM in a Rails API Controller", "body": "<p>personally, I tend to have two kinds of calls - straight class-REST calls and state transitions, the most common one being an enabled? I would use what's most intiuitive and not worry about it being un-RESTful esp because I find the state transitions can have a different set of logic. In other words RPC - style</p>\n"}], "owner": {"reputation": 6059, "user_id": 87002, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/4f672c7c43c0031145b86c3efecefc79?s=128&d=identicon&r=PG", "display_name": "Joel Hooks", "link": "https://stackoverflow.com/users/87002/joel-hooks"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 449, "favorite_count": 0, "answer_count": 1, "score": 5, "last_activity_date": 1483503716, "creation_date": 1483485090, "question_id": 41453781, "link": "https://stackoverflow.com/questions/41453781/best-practices-for-using-aasm-in-a-rails-api-controller", "title": "Best Practices for using AASM in a Rails API Controller", "body": "<p>We are using <a href=\"https://github.com/aasm/aasm\" rel=\"noreferrer\">acts_as_state_machine (AASM)</a> in our Rails app to control flow of models from one state to the next in a traditional finite state-machine. We are building out an API for our application, and as part of that we'd like to be able to trigger state transitions when a Rails model is updated based on the state that is passed into the <code>update</code> Controller method by the API user.</p>\n\n<p>A simplified version of the state-machine looks like this:</p>\n\n<pre><code>aasm :column =&gt; :state do\n    state :proposed, :initial =&gt; true\n    state :published\n    state :retired\n\n    event :publish do\n      transitions :from =&gt; :proposed, :to =&gt; :published\n    end\n\n    event :retire do\n      transitions :from =&gt; :published, :to =&gt; :retired\n    end\nend\n</code></pre>\n\n<p>One option is to use remote-procedure call (RPC) style, where we provide <code>/model/{ID}/publish</code> and <code>/model/{ID}/retire</code> style endpoints. This is fairly straight forward, but isn't very RESTful.</p>\n\n<p>Another option we've considered is inspecting the parameters and transitioning based on the incoming <code>state</code> property of the model. This feels like a \"better\" approach in that our API is kept simpler for the consumer, but it adds a lot of complexity to the controller in terms of logic.</p>\n\n<p>What's the best way to implement the triggering of AASM state events for a Rails API? Are we missing an option? </p>\n"}, {"tags": ["ruby", "rubygems", "gemfile"], "comments": [{"owner": {"reputation": 12661, "user_id": 5343387, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/15a14cec3014822297a08ed6dfae2563?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Schuchard", "link": "https://stackoverflow.com/users/5343387/matt-schuchard"}, "edited": false, "score": 0, "creation_date": 1483533966, "post_id": 41453521, "comment_id": 70133814, "body": "Post the Gemfile."}], "answers": [{"tags": [], "owner": {"reputation": 51, "user_id": 3155412, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/sgOGe.jpg?s=128&g=1", "display_name": "rupio", "link": "https://stackoverflow.com/users/3155412/rupio"}, "is_accepted": true, "score": 1, "last_activity_date": 1483551043, "creation_date": 1483551043, "answer_id": 41469907, "question_id": 41453521, "link": "https://stackoverflow.com/questions/41453521/gem-install-fails-with-unsatisfiabledependencyerror/41469907#41469907", "title": "Gem Install fails with UnsatisfiableDependencyError", "body": "<p>So, after further research, I found that the problem was not related to my code, files or configuration but with a problem with Rubygems.</p>\n\n<p>Bottomline, I had to follow <a href=\"http://guides.rubygems.org/ssl-certificate-update/#installing-using-update-packages\" rel=\"nofollow noreferrer\" title=\"this link\">this link</a> and manually update the certificate.</p>\n\n<p>It looks like ruby wasn't able to connect to the server to check for dependencies of the gems I was requiring.</p>\n"}], "owner": {"reputation": 51, "user_id": 3155412, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/sgOGe.jpg?s=128&g=1", "display_name": "rupio", "link": "https://stackoverflow.com/users/3155412/rupio"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3835, "favorite_count": 0, "accepted_answer_id": 41469907, "answer_count": 1, "score": 1, "last_activity_date": 1483551043, "creation_date": 1483483341, "last_edit_date": 1483542183, "question_id": 41453521, "link": "https://stackoverflow.com/questions/41453521/gem-install-fails-with-unsatisfiabledependencyerror", "title": "Gem Install fails with UnsatisfiableDependencyError", "body": "<p>I have a puppet module project that fails when trying to update Gems, although it works in some computers. The Gems are used for the spec tests of the module. </p>\n\n<p>Here's the command I run and the output:</p>\n\n<pre><code>X:\\puppet-module-rems&gt;gem install -g Gemfile -f\nERROR:  While executing gem ... (Gem::UnsatisfiableDependencyError)\n    Unable to resolve dependency: user requested 'win32-service (= 0.8.7)'\n</code></pre>\n\n<p>The gem that it's trying to install/update is already in the system:</p>\n\n<pre><code>X:\\puppet-module-rems&gt;gem list -l\n\n*** LOCAL GEMS ***\n\nast (2.3.0)\nbigdecimal (1.2.4)\nbuilder (3.2.2)\nbundler (1.13.0.rc.2)\nchildprocess (0.5.9)\nci_reporter (2.0.0)\nci_reporter_rspec (1.0.0)\ndeep_merge (1.0.1)\ndiff-lcs (1.2.5)\nfacter (2.4.6 x64-mingw32)\nffi (1.9.14 x64-mingw32, 1.9.6 x64-mingw32)\nffi-win32-extensions (1.0.3)\nhiera (1.3.4)\nhiera-eyaml (2.1.0)\nhighline (1.6.21)\nio-console (0.4.3, 0.4.2)\njson (1.8.1)\njson_pure (2.0.2)\nmetaclass (0.0.4)\nminitar (0.5.4)\nminitest (4.7.5)\nmocha (1.1.0)\nmulti_json (1.12.1)\nmulti_test (0.1.2)\nparser (2.3.1.2)\npowerpack (0.1.1)\npsych (2.0.5)\nptools (1.3.3 universal-mingw32)\npuppet (3.8.1 x64-mingw32)\npuppet-lint (2.0.2)\npuppet-syntax (2.1.0)\npuppetlabs_spec_helper (1.1.1)\nrainbow (2.1.0)\nrake (10.1.0)\nrdoc (4.1.0)\nrspec (3.5.0, 3.5.0.beta2)\nrspec-core (3.5.2, 3.5.0.beta2)\nrspec-expectations (3.5.0, 3.5.0.beta2)\nrspec-mocks (3.5.0, 3.5.0.beta2)\nrspec-puppet (2.4.0, 2.3.2)\nrspec-support (3.5.0, 3.5.0.beta2)\nrubocop (0.42.0)\nruby-progressbar (1.8.1)\nstomp (1.3.3)\nsys-admin (1.6.4)\ntest-unit (2.5.5, 2.1.7.0, 2.1.6.0, 2.1.5.0)\nthread_order (1.1.0)\ntrollop (2.1.2)\nunicode-display_width (1.1.0)\nwin32-dir (0.4.9)\nwin32-eventlog (0.6.6, 0.6.2)\nwin32-file (0.8.1)\nwin32-file-stat (1.5.5)\nwin32-process (0.7.5, 0.7.4)\nwin32-security (0.2.5)\nwin32-service (0.8.7, 0.8.6)\n</code></pre>\n\n<p>Here's the version of ruby I have:</p>\n\n<pre><code>X:\\puppet-module-rems&gt;ruby --version\nruby 2.1.7p400 (2015-08-18 revision 51632) [x64-mingw32]\n</code></pre>\n\n<p><strong>EDITED #1</strong></p>\n\n<p>Here's the content of the Gemfile:</p>\n\n<pre><code>source 'https://rubygems.org'\n\npuppetversion = ENV.key?('PUPPET_VERSION') ? \"= #{ENV['PUPPET_VERSION']}\" :    ['3.8.1']\ngem 'puppet', puppetversion\ngem 'puppetlabs_spec_helper', '= 1.1.1'\ngem 'puppet-lint', '&gt;= 0.3.2'\ngem 'facter', '&gt;= 1.7.0'\ngem 'ci_reporter_rspec'\ngem 'win32-service', '= 0.8.7'\ngem 'rake', '= 10.1.0'\ngem 'rspec-core', '= 3.5.2'\ngem 'rspec-expectations', '= 3.5.0'\ngem 'rspec-mocks', '= 3.5.0'\ngem 'rspec-puppet', '= 2.4.0'\ngem 'rspec-support', '= 3.5.0'\n</code></pre>\n"}, {"tags": ["arrays", "ruby"], "comments": [{"owner": {"reputation": 19411, "user_id": 6640099, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/tf1sO.jpg?s=128&g=1", "display_name": "Christian Dean", "link": "https://stackoverflow.com/users/6640099/christian-dean"}, "edited": false, "score": 2, "creation_date": 1483483401, "post_id": 41453383, "comment_id": 70113496, "body": "Don&#39;t ask how to fix your solution, rather, ask how to solve your <i>actual problem</i>. Your real question is how to remove the first two elements of your array."}, {"owner": {"reputation": 2575, "user_id": 2954267, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/298721d73565c75b54fbc1a3a4159b49?s=128&d=identicon&r=PG", "display_name": "robe007", "link": "https://stackoverflow.com/users/2954267/robe007"}, "reply_to_user": {"reputation": 19411, "user_id": 6640099, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/tf1sO.jpg?s=128&g=1", "display_name": "Christian Dean", "link": "https://stackoverflow.com/users/6640099/christian-dean"}, "edited": false, "score": 0, "creation_date": 1483484149, "post_id": 41453383, "comment_id": 70113746, "body": "@leaf Interesting comment, but I just want to learn how to do it with my solution."}, {"owner": {"reputation": 67463, "user_id": 203130, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/1RE8c.jpg?s=128&g=1", "display_name": "coreyward", "link": "https://stackoverflow.com/users/203130/coreyward"}, "edited": false, "score": 2, "creation_date": 1483485888, "post_id": 41453383, "comment_id": 70114277, "body": "@robe007 That&#39;s not how StackOverflow is designed to work, so you&#39;re bound to get people pointing it out. <a href=\"http://stackoverflow.com/tour\">Focus on questions about an actual problem you have faced. Include details about what you have tried and exactly what you are trying to do.</a>"}], "answers": [{"comments": [{"owner": {"reputation": 2575, "user_id": 2954267, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/298721d73565c75b54fbc1a3a4159b49?s=128&d=identicon&r=PG", "display_name": "robe007", "link": "https://stackoverflow.com/users/2954267/robe007"}, "edited": false, "score": 0, "creation_date": 1483484258, "post_id": 41453517, "comment_id": 70113782, "body": "Thanks for the answer, it works, but it is possible to do it fixing my solution?"}, {"owner": {"reputation": 2575, "user_id": 2954267, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/298721d73565c75b54fbc1a3a4159b49?s=128&d=identicon&r=PG", "display_name": "robe007", "link": "https://stackoverflow.com/users/2954267/robe007"}, "edited": false, "score": 1, "creation_date": 1483485625, "post_id": 41453517, "comment_id": 70114202, "body": "Very nice explained answer. Danke sch&#246;n !"}], "tags": [], "owner": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "is_accepted": true, "score": 4, "last_activity_date": 1483485289, "last_edit_date": 1483485289, "creation_date": 1483483335, "answer_id": 41453517, "question_id": 41453383, "link": "https://stackoverflow.com/questions/41453383/iterate-elements-in-array-except-the-first-two-but-also-using-each-slice/41453517#41453517", "title": "Iterate elements in array, except the first two, but also using &quot;each_slice&quot;", "body": "<h1>Your code</h1>\n\n<p><a href=\"http://ruby-doc.org/core-2.4.0/Enumerable.html#method-i-each_slice\" rel=\"nofollow noreferrer\"><code>each_slice</code></a> returns an <code>Enumerable</code>, but you define your method for <code>Array</code>. Just define it for <code>Enumerable</code> :</p>\n\n<pre><code>module Enumerable\n  def each_after(n)\n    each_with_index do |elem, i|\n      yield elem if i &gt;= n\n    end\n  end\nend\n</code></pre>\n\n<p>You can then use </p>\n\n<pre><code>array.each_slice(2).each_after(1) do |m, v|\n    puts \"#{m}, #{v}\"\nend\n</code></pre>\n\n<p>Note that you need to drop 1 element (a 2-element Array).</p>\n\n<p>Without changing your method, you could also use <code>to_a</code> before your Array method :</p>\n\n<pre><code>array.each_slice(2).to_a.each_after(1) do |m, v|\n    puts \"#{m}, #{v}\"\nend\n</code></pre>\n\n<h1>Alternative</h1>\n\n<p>Just use <a href=\"https://ruby-doc.org/core-2.3.1/Array.html#method-i-drop\" rel=\"nofollow noreferrer\"><code>drop</code></a> before <a href=\"https://ruby-doc.org/core-2.3.1/Enumerable.html#method-i-each_slice\" rel=\"nofollow noreferrer\"><code>each_slice</code></a> :</p>\n\n<pre><code>[\"month\", \"value\", \"january\", \"30%\", \"february\", \"40%\"].drop(2).each_slice(2).to_a\n#=&gt; [[\"january\", \"30%\"], [\"february\", \"40%\"]]\n</code></pre>\n"}], "owner": {"reputation": 2575, "user_id": 2954267, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/298721d73565c75b54fbc1a3a4159b49?s=128&d=identicon&r=PG", "display_name": "robe007", "link": "https://stackoverflow.com/users/2954267/robe007"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 148, "favorite_count": 0, "accepted_answer_id": 41453517, "answer_count": 1, "score": 2, "last_activity_date": 1483487126, "creation_date": 1483482569, "last_edit_date": 1495541339, "question_id": 41453383, "link": "https://stackoverflow.com/questions/41453383/iterate-elements-in-array-except-the-first-two-but-also-using-each-slice", "title": "Iterate elements in array, except the first two, but also using &quot;each_slice&quot;", "body": "<p>Well, I have an array like this:</p>\n\n<pre><code>array = [\"month\", \"value\", \"january\", \"30%\", \"february\", \"40%\"] # etc etc ...\n</code></pre>\n\n<p>I'm printing the values in pair, I mean:</p>\n\n<pre><code>array.each_slice(2) do |m, v|\n    puts \"#{m}, #{v}\"\nend\n\nOutputs:\nmonth, value\njanuary, 30%\nfebruary, 40%\n</code></pre>\n\n<p>Good, but I don't want that outputs: <code>\"month, value\"</code> (the first two)</p>\n\n<p>I have trying doing this: (found <a href=\"https://stackoverflow.com/a/29426300\">here</a>)</p>\n\n<pre><code>class Array\n  def each_after(n)\n    each_with_index do |elem, i|\n      yield elem if i &gt;= n # Warning : it doesn't work without a block\n    end\n  end\nend\n\narray.each_slice(2).each_after(2) do |m, v|\n    puts \"#{m}, #{v}\"\nend\n</code></pre>\n\n<p>And outputs this error:</p>\n\n<pre><code>&lt;main&gt;: undefined method each_after for ...\n</code></pre>\n\n<p>I think that the problem is with the <code>\"each_after\"</code> method, that is made only to use it without the <code>\"each_slice\"</code>.</p>\n\n<p><strong>My question:</strong>:</p>\n\n<p>How I can modify the <code>\"each_after\"</code> method to work with the <code>\"each_slice\"</code> method ?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4", "acts-as-follower"], "answers": [{"tags": [], "owner": {"reputation": 1225, "user_id": 5724342, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d0fc4bbc261a7a2a233a196a0b655fd2?s=128&d=identicon&r=PG&f=1", "display_name": "Gurmukh Singh", "link": "https://stackoverflow.com/users/5724342/gurmukh-singh"}, "is_accepted": true, "score": 0, "last_activity_date": 1483570073, "creation_date": 1483570073, "answer_id": 41474528, "question_id": 41453225, "link": "https://stackoverflow.com/questions/41453225/acts-as-follower-issue-with-following-users/41474528#41474528", "title": "acts_as_follower issue with following users", "body": "<p>I figured it out, in my gemfile I installed from the master branch, so change your gemfile to this:</p>\n\n<pre><code>gem \"acts_as_follower\", github: \"tcocca/acts_as_follower\"\n</code></pre>\n"}], "owner": {"reputation": 1225, "user_id": 5724342, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d0fc4bbc261a7a2a233a196a0b655fd2?s=128&d=identicon&r=PG&f=1", "display_name": "Gurmukh Singh", "link": "https://stackoverflow.com/users/5724342/gurmukh-singh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 285, "favorite_count": 0, "accepted_answer_id": 41474528, "answer_count": 1, "score": 1, "last_activity_date": 1483570073, "creation_date": 1483481638, "question_id": 41453225, "link": "https://stackoverflow.com/questions/41453225/acts-as-follower-issue-with-following-users", "title": "acts_as_follower issue with following users", "body": "<p>I have a User model created in devise:</p>\n\n<pre><code>class User &lt; ApplicationRecord\n  # Include default devise modules. Others available are:\n  # :confirmable, :lockable, :timeoutable and :omniauthable\n  devise :database_authenticatable, :registerable,\n         :recoverable, :rememberable, :trackable, :validatable\n\n  has_one :profile, dependent: :destroy\n  after_create :build_profile\n\n  acts_as_follower\n\nend\n</code></pre>\n\n<p>Which has an associated <code>profile</code> with the <code>user</code>. And I'm using the <a href=\"https://github.com/tcocca/acts_as_follower\" rel=\"nofollow noreferrer\">acts_as_follower gem</a> to give this model the ability to follow another model.</p>\n\n<p>I want the <code>User</code> to follow a <code>Profile</code>, so i have my profile model set up like this:</p>\n\n<pre><code>class Profile &lt; ApplicationRecord\n  belongs_to :user\n\n  has_attached_file :avatar, styles: { medium: \"300x300&gt;\", thumb: \"100x100&gt;\" }, default_url: \"https://s-media-cache-ak0.pinimg.com/564x/f7/61/b3/f761b3ae57801975e0a605e805626279.jpg\"\n  validates_attachment_content_type :avatar, content_type: /\\Aimage\\/.*\\z/\n\n  acts_as_followable\n\nend\n</code></pre>\n\n<p>The Profile model should be followable according to the gem, which is how I have it set up.</p>\n\n<p>I ran the migrations as required <code>rails generate acts_as_follower</code></p>\n\n<p>In my <code>profile_controller</code> iv set up the following methods:</p>\n\n<pre><code>  def follow\n    @profile = Profile.find(params[:id])\n    current_user.follow(@profile)\n    redirect_to :back\n  end\n\n  def unfollow\n    @profile = Profile.find(params[:id]) \n    current_user.stop_following(@profile)\n    redirect_to :back\n  end\n</code></pre>\n\n<p>And in my <code>route.rb</code> file i have the following:</p>\n\n<pre><code>  resources :profiles do\n    member do\n      get :follow\n      get :unfollow\n    end\n  end\n</code></pre>\n\n<p>Now in my profiles show view iv set up the button as so:</p>\n\n<pre><code>  &lt;% if !@profile.followed_by?(current_user) %&gt;\n    &lt;%= link_to \"Follow\", follow_profile_path(@profile), class: \"btn btn-success btn-outline btn-sm\"%&gt;\n  &lt;% end %&gt;\n</code></pre>\n\n<p>According to my knowledge and documentation this should work, but for some reason it does not follow the user or create the association between the <code>user</code> and the <code>profile</code> to follow.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "activerecord", "model"], "comments": [{"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 1, "creation_date": 1483479558, "post_id": 41452664, "comment_id": 70111972, "body": "that&#39;s because <code>favorited</code> is not a <code>Post</code> method. try <code>@post.favorites.count</code> although I believe the <code>Post</code> model also needs <code>has_many :favorites, as: :favorited</code>"}], "answers": [{"tags": [], "owner": {"reputation": 365, "user_id": 43672, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc49a2918d8cf87b7fbad0a3b6234a98?s=128&d=identicon&r=PG", "display_name": "chris raethke", "link": "https://stackoverflow.com/users/43672/chris-raethke"}, "is_accepted": false, "score": 2, "last_activity_date": 1483481061, "creation_date": 1483481061, "answer_id": 41453118, "question_id": 41452664, "link": "https://stackoverflow.com/questions/41452664/rails-count-number-of-users-who-favorited-post/41453118#41453118", "title": "Rails count number of Users who favorited Post", "body": "<p>@engineersmnky is right, you will need to include the relationship on Post as well.</p>\n\n<p>Additionally while you can get this information via a join, it won't let you efficiently query the top favorited posts or include the number of favorites in a table of posts. You should persist the count each time a favorite is added or removed, either using <a href=\"http://api.rubyonrails.org/classes/ActiveModel/Callbacks.html\" rel=\"nofollow noreferrer\">callbacks</a> or a <a href=\"http://yerb.net/blog/2014/03/13/three-easy-steps-to-using-counter-caches-in-rails/\" rel=\"nofollow noreferrer\">counter cache</a>.</p>\n"}, {"comments": [{"owner": {"reputation": 27, "user_id": 6829618, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/179c93901521b645de0cbacab8047f18?s=128&d=identicon&r=PG&f=1", "display_name": "ETSchmidt", "link": "https://stackoverflow.com/users/6829618/etschmidt"}, "edited": false, "score": 0, "creation_date": 1483654118, "post_id": 41453230, "comment_id": 70197349, "body": "Thanks! this works!! (except that when I add &quot;counter_cache: true&quot; it no longer lets me favorite anything in the site"}], "tags": [], "owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "is_accepted": true, "score": 0, "last_activity_date": 1510453258, "last_edit_date": 1510453258, "creation_date": 1483481669, "answer_id": 41453230, "question_id": 41452664, "link": "https://stackoverflow.com/questions/41452664/rails-count-number-of-users-who-favorited-post/41453230#41453230", "title": "Rails count number of Users who favorited Post", "body": "<pre><code>class User\n  has_many :favorites\n  has_many :favorite_posts, through: :favorites, \n                            source: :favorited, \n                            source_type: 'Post'\nend\n\nclass Post\n  has_many :favorites, as: :favorited\nend\n\nclass Favorite\n  belongs_to :user\n  belongs_to :favorited, polymorphic: true\nend\n</code></pre>\n\n<p>This will let get a count through <code>@post.favorites.size</code> - but you should either use a join or <a href=\"http://guides.rubyonrails.org/association_basics.html#options-for-belongs-to-counter-cache\" rel=\"nofollow noreferrer\">counter caches</a> to avoid N+1 query issues.</p>\n\n<pre><code>class Favorite\n  belongs_to :user\n  belongs_to :favorited, polymorphic: true, counter_cache: true\nend\n</code></pre>\n"}], "owner": {"reputation": 27, "user_id": 6829618, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/179c93901521b645de0cbacab8047f18?s=128&d=identicon&r=PG&f=1", "display_name": "ETSchmidt", "link": "https://stackoverflow.com/users/6829618/etschmidt"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 297, "favorite_count": 0, "accepted_answer_id": 41453230, "answer_count": 2, "score": 1, "last_activity_date": 1510453258, "creation_date": 1483478964, "question_id": 41452664, "link": "https://stackoverflow.com/questions/41452664/rails-count-number-of-users-who-favorited-post", "title": "Rails count number of Users who favorited Post", "body": "<p>Relatively new to rails, and am just trying to sort through my model relationships in order to find the number of users who have Favorited a particular post. Here are my models:</p>\n\n<p>User.rb</p>\n\n<pre><code>has_many :favorites\nhas_many :favorite_posts, through: :favorites, source: :favorited, source_type: 'Post'\n</code></pre>\n\n<p>Post.rb</p>\n\n<pre><code>  belongs_to :user\n  has_many :favorites\n</code></pre>\n\n<p>Favorite.rb</p>\n\n<pre><code>belongs_to :favorited, polymorphic: true\nbelongs_to :user\n</code></pre>\n\n<p>In my Posts#show view I want to call something like</p>\n\n<pre><code>&lt;%= @post.favorited.count %&gt; \n</code></pre>\n\n<p>and get the number of users who have favorited this post, but it tells me that this is an undefined method. </p>\n\n<p>Any suggestions? thank you,</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1483480764, "post_id": 41452313, "comment_id": 70112498, "body": "Actually given your structure all you need to do is add a check for the extension e.g. <code>Dir.glob(&quot;some&#47;**&#47;*.*&quot;)</code> since your directories do not include a dot this will do as asked. Also given that all your files end in <code>rb</code> then <code>Dir.glob(&quot;some&#47;**&#47;*.*rb&quot;)</code> will also work for you. This will neglect extentionless files but that does not seem to be a problem for you"}, {"owner": {"reputation": 6391, "user_id": 2909897, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/LMSiW.jpg?s=128&g=1", "display_name": "mbigras", "link": "https://stackoverflow.com/users/2909897/mbigras"}, "reply_to_user": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1483480876, "post_id": 41452313, "comment_id": 70112547, "body": "Thanks @engineersmnky! The problem is I&#39;d like to include files like <code>Rakefile</code>. I added an edit."}, {"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1483480923, "post_id": 41452313, "comment_id": 70112570, "body": "Ahh something beyond the question asked. Well yes in that case you have the correct answer."}], "owner": {"reputation": 6391, "user_id": 2909897, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/LMSiW.jpg?s=128&g=1", "display_name": "mbigras", "link": "https://stackoverflow.com/users/2909897/mbigras"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 48, "favorite_count": 0, "closed_date": 1483478448, "answer_count": 0, "score": 3, "last_activity_date": 1483480912, "creation_date": 1483477325, "last_edit_date": 1495541339, "question_id": 41452313, "link": "https://stackoverflow.com/questions/41452313/get-files-recursively-inside-directory-in-ruby", "closed_reason": "Duplicate", "title": "Get files recursively inside directory in ruby", "body": "<p>Given the following directory structure:</p>\n\n<pre><code>$  tree .\n.\n\u2514\u2500\u2500 some\n    \u251c\u2500\u2500 Rakefile\n    \u2514\u2500\u2500 path\n        \u251c\u2500\u2500 bar.erb\n        \u2514\u2500\u2500 to\n            \u2514\u2500\u2500 baz.rb\n\n3 directories, 3 files\n</code></pre>\n\n<p>I'm able to get all files (including directories), only directories, and only files:</p>\n\n<pre><code>p Dir.glob('some/**/*')\n#=&gt; [\"some/Rakefile\", \"some/path\", \"some/path/bar.erb\", \"some/path/to\", \"some/path/to/baz.rb\"]\np Dir.glob('some/**/*/')\n#=&gt; [\"some/path/\", \"some/path/to/\"]\np Dir.glob('some/**/*').select { |f| File.file? f }\n#=&gt; [\"some/Rakefile\", \"some/path/bar.erb\", \"some/path/to/baz.rb\"]\n</code></pre>\n\n<p>Is there a more terse way to get only the files and not dirs (the third case)?</p>\n\n<p>Edit:</p>\n\n<p>Just to add an explicit answer to my question:<br>\nNo. there isn't a shorter way, see this <a href=\"https://stackoverflow.com/questions/7677410/how-do-i-get-a-listing-of-only-files-using-dir-glob\">question</a></p>\n"}, {"tags": ["ruby", "rubygems", "bundler", "rbenv"], "answers": [{"comments": [{"owner": {"reputation": 185, "user_id": 3775864, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/up1a0.jpg?s=128&g=1", "display_name": "NicolasWebDev", "link": "https://stackoverflow.com/users/3775864/nicolaswebdev"}, "edited": false, "score": 1, "creation_date": 1483484263, "post_id": 41452100, "comment_id": 70113784, "body": "Really nice indeed. I had not thought of looking inside the rbenv plugins. Out of curiosity do you think a global Gemfile would have been possible?"}, {"owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "reply_to_user": {"reputation": 185, "user_id": 3775864, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/up1a0.jpg?s=128&g=1", "display_name": "NicolasWebDev", "link": "https://stackoverflow.com/users/3775864/nicolaswebdev"}, "edited": false, "score": 0, "creation_date": 1483520558, "post_id": 41452100, "comment_id": 70125296, "body": "I have never thought about a global Gemfile. I wonder how that works if there a multiple nested Gemfiles with various versions of the same gems. To me <code>default-gems</code> seems much clearer."}], "tags": [], "owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "is_accepted": true, "score": 3, "last_activity_date": 1507626970, "last_edit_date": 1507626970, "creation_date": 1483476495, "answer_id": 41452100, "question_id": 41451711, "link": "https://stackoverflow.com/questions/41451711/global-gemfile-in-the-users-home-directory-using-rbenv-good-idea/41452100#41452100", "title": "Global Gemfile in the user&#39;s home directory using rbenv: good idea?", "body": "<p>I suggest using <a href=\"https://github.com/rbenv/rbenv-default-gems\" rel=\"nofollow noreferrer\"><code>rbenv-default-gems</code></a>.</p>\n\n<p>Just install it into rbenv's plugins folder:</p>\n\n<pre><code>git clone https://github.com/rbenv/rbenv-default-gems.git $(rbenv root)/plugins/rbenv-default-gems\n</code></pre>\n\n<p>Place a file named <code>default-gems</code> into your rbenv's root folder:</p>\n\n<pre><code>touch $(rbenv root)/default-gems\n</code></pre>\n\n<p>Add gems in <code>$(rbenv root)/default-gems</code> by name, one per line. You may need to optionally specify a version string after the name, or <code>--pre</code> to install a pre-release version. For example:</p>\n\n<pre><code>bundler\nbcat ~&gt;0.6\nrails --pre\n</code></pre>\n"}], "owner": {"reputation": 185, "user_id": 3775864, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/up1a0.jpg?s=128&g=1", "display_name": "NicolasWebDev", "link": "https://stackoverflow.com/users/3775864/nicolaswebdev"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 446, "favorite_count": 0, "accepted_answer_id": 41452100, "answer_count": 1, "score": 2, "last_activity_date": 1507626970, "creation_date": 1483474982, "question_id": 41451711, "link": "https://stackoverflow.com/questions/41451711/global-gemfile-in-the-users-home-directory-using-rbenv-good-idea", "title": "Global Gemfile in the user&#39;s home directory using rbenv: good idea?", "body": "<p>I am using rbenv to manage my gems, locally in my projects but also globally, on a Linux box.  </p>\n\n<p>When I bump my global ruby version (set in <code>~/.rbenv/version</code>), I always forget to install some of my utility gems, that I need for development mainly.<br>\nExamples are rubocop for linting, minitest for some scripts I have scattered in my files, etc.<br>\nUsing my package manager is not a really flexible solution (not so up-to-date, many gems are not packaged etc).</p>\n\n<p>How should I proceed to keep a list of these gems I want to always have globally accessible, whatever the project I am currently working on?\nShould I have a Gemfile and a Gemfile.lock in my home directory? How could I hide them then (.Gemfile/.Gemfile.lock)?</p>\n\n<p>So that once I change the global ruby version, then a</p>\n\n<pre><code>$ gem install bundler\n$ bundle\n</code></pre>\n\n<p>and I have everything up and running?\nIn this case would I have to prepend every command with <code>bundle exec</code>?</p>\n\n<p>Is there a better way to manage this problem that I am not aware of?</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 3211, "user_id": 4377017, "user_type": "registered", "accept_rate": 67, "profile_image": "https://lh3.googleusercontent.com/-QUYAVWJQopU/AAAAAAAAAAI/AAAAAAAAAAA/5Xpy51rKuFM/photo.jpg?sz=128", "display_name": "Igor Ivancha", "link": "https://stackoverflow.com/users/4377017/igor-ivancha"}, "edited": false, "score": 0, "creation_date": 1483474202, "post_id": 41451389, "comment_id": 70109468, "body": "post, please,  your views <code>index</code> and <code>_doctor</code> (if this partial exists)"}, {"owner": {"reputation": 25, "user_id": 6161667, "user_type": "registered", "accept_rate": 0, "profile_image": "https://graph.facebook.com/1051080308298202/picture?type=large", "display_name": "Prabal Kar", "link": "https://stackoverflow.com/users/6161667/prabal-kar"}, "reply_to_user": {"reputation": 3211, "user_id": 4377017, "user_type": "registered", "accept_rate": 67, "profile_image": "https://lh3.googleusercontent.com/-QUYAVWJQopU/AAAAAAAAAAI/AAAAAAAAAAA/5Xpy51rKuFM/photo.jpg?sz=128", "display_name": "Igor Ivancha", "link": "https://stackoverflow.com/users/4377017/igor-ivancha"}, "edited": false, "score": 0, "creation_date": 1483474713, "post_id": 41451389, "comment_id": 70109720, "body": "posted the _doctor"}, {"owner": {"reputation": 19261, "user_id": 4758119, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/F4dJY.jpg?s=128&g=1", "display_name": "Deepak Mahakale", "link": "https://stackoverflow.com/users/4758119/deepak-mahakale"}, "edited": false, "score": 0, "creation_date": 1483508829, "post_id": 41451389, "comment_id": 70120016, "body": "check if you have <code>jquery_ujs</code> included twice in your html source of the page"}, {"owner": {"reputation": 19261, "user_id": 4758119, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/F4dJY.jpg?s=128&g=1", "display_name": "Deepak Mahakale", "link": "https://stackoverflow.com/users/4758119/deepak-mahakale"}, "edited": false, "score": 0, "creation_date": 1483508858, "post_id": 41451389, "comment_id": 70120027, "body": "just press <code>ctrl + U</code> in the browser"}, {"owner": {"reputation": 25, "user_id": 6161667, "user_type": "registered", "accept_rate": 0, "profile_image": "https://graph.facebook.com/1051080308298202/picture?type=large", "display_name": "Prabal Kar", "link": "https://stackoverflow.com/users/6161667/prabal-kar"}, "edited": false, "score": 0, "creation_date": 1483520316, "post_id": 41451389, "comment_id": 70125125, "body": "jquery_ujs is once .. and by pressing ctrl + u nothing happend"}], "answers": [{"tags": [], "owner": {"reputation": 365, "user_id": 43672, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc49a2918d8cf87b7fbad0a3b6234a98?s=128&d=identicon&r=PG", "display_name": "chris raethke", "link": "https://stackoverflow.com/users/43672/chris-raethke"}, "is_accepted": false, "score": 0, "last_activity_date": 1483481642, "creation_date": 1483481642, "answer_id": 41453226, "question_id": 41451389, "link": "https://stackoverflow.com/questions/41451389/multiple-display-in-show-view-of-ruby-on-rails/41453226#41453226", "title": "Multiple display in show view of ruby on rails", "body": "<p>@Prabal-Kar, as Igor suggested are you sure you are 'clicking' the button only once? To prevent users doing this you can <a href=\"https://www.formget.com/enable-disable-button-jquery/\" rel=\"nofollow noreferrer\">disable the button</a> after clicking and you should also ensure you have some <a href=\"https://robots.thoughtbot.com/the-perils-of-uniqueness-validations\" rel=\"nofollow noreferrer\">unique constraints</a> on your doctor model.</p>\n"}], "owner": {"reputation": 25, "user_id": 6161667, "user_type": "registered", "accept_rate": 0, "profile_image": "https://graph.facebook.com/1051080308298202/picture?type=large", "display_name": "Prabal Kar", "link": "https://stackoverflow.com/users/6161667/prabal-kar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 52, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1483481642, "creation_date": 1483473531, "last_edit_date": 1483480901, "question_id": 41451389, "link": "https://stackoverflow.com/questions/41451389/multiple-display-in-show-view-of-ruby-on-rails", "title": "Multiple display in show view of ruby on rails", "body": "<p>Hello I want to write a small blog with Ruby on Rails (5), with category and doctors submitted via form.</p>\n\n<p>But when I submit a doctor it is often shown twice, and I got no idea why.  </p>\n\n<p>Here is the source code of my project.</p>\n\n<p><code>doctors_controller.rb</code> file:</p>\n\n<pre><code>def create\n    @category = Category.find(params[:category_id])\n    @doctor = @category.doctors.create(doctor_params)\n    redirect_to category_path(@category)\nend\n\ndef destroy\n    @category = Category.find(params[:category_id])\n    @doctor = @category.doctors.find(params[:id])\n    @doctor.destroy\n    redirect_to category_path(@category)\nend\n\nprivate\n\ndef doctor_params   \n  params.require(:doctor).permit(:name, :address, :phno)\nend\n</code></pre>\n\n<p><code>show.html.erb</code> file:</p>\n\n<pre><code>&lt;p id=\"notice\"&gt;&lt;%= notice %&gt;&lt;/p&gt;\n\n&lt;center&gt;&lt;h1&gt;        \n  &lt;%= @category.name %&gt;\n&lt;/h1&gt;\n&lt;/center&gt;\n&lt;p1&gt;&lt;%= render @category.doctors %&gt;&lt;/p1&gt;\n\n&lt;p2&gt;&lt;%= render 'doctors/form' %&gt;&lt;/p2&gt;\n\n\n&lt;%= link_to 'Edit', edit_category_path(@category) %&gt; |\n&lt;%= link_to 'Back', categories_path %&gt;\n</code></pre>\n\n<p><code>_doctor.html.erb</code> file:</p>\n\n<pre><code>&lt;table style=\"width:100%\"&gt;\n  &lt;tr&gt;\n    &lt;th&gt;Name&lt;/th&gt;\n    &lt;th&gt;Address&lt;/th&gt;\n    &lt;th&gt;phone number&lt;/th&gt;\n  &lt;/tr&gt;         \n  &lt;% @category.doctors.each do |doctor| %&gt;\n\n    &lt;tr&gt;\n     &lt;th&gt;&lt;%= doctor.name %&gt;&lt;/th&gt;\n     &lt;th&gt;&lt;%=doctor.address%&gt;&lt;/th&gt; \n     &lt;th&gt;&lt;%=doctor.phno%&gt;&lt;/th&gt;\n     &lt;th&gt;&lt;%= link_to 'Delete doctor', [doctor.category, doctor],method: :delete,data: { confirm: 'Are you sure?' } %&gt;\n     &lt;/th&gt;\n    &lt;/tr\n  &lt;% end %&gt;\n&lt;/table&gt;\n</code></pre>\n"}, {"tags": ["ruby", "inheritance", "module", "mixins", "super"], "answers": [{"comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 1, "creation_date": 1483479535, "post_id": 41452526, "comment_id": 70111966, "body": "Very interesting and instructive. What do you mean by &quot;I cannot fully explain&quot; at the beginning of your opening sentence."}, {"owner": {"reputation": 208794, "user_id": 229044, "user_type": "moderator", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/591426cbbacd4025d920467bad356911?s=128&d=identicon&r=PG&f=1", "display_name": "meagar", "link": "https://stackoverflow.com/users/229044/meagar"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1483480028, "post_id": 41452526, "comment_id": 70112160, "body": "@CarySwoveland I meant that this answer relies on hypothesis and experimentation that seem to support that hypothesis, rather than an authoritative explanation and a link to supporting documentation."}, {"owner": {"reputation": 208794, "user_id": 229044, "user_type": "moderator", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/591426cbbacd4025d920467bad356911?s=128&d=identicon&r=PG&f=1", "display_name": "meagar", "link": "https://stackoverflow.com/users/229044/meagar"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1483480276, "post_id": 41452526, "comment_id": 70112258, "body": "@CarySwoveland Anyways I updated the wording slightly."}, {"owner": {"reputation": 1478, "user_id": 7489, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c37241ecd7700ec38fb8f6a8055aae0d?s=128&d=identicon&r=PG", "display_name": "&#201;tienne Barri&#233;", "link": "https://stackoverflow.com/users/7489/%c3%89tienne-barri%c3%a9"}, "edited": false, "score": 0, "creation_date": 1483481974, "post_id": 41452526, "comment_id": 70112998, "body": "This may be part of the reference you were looking for with regards to method lookup: <a href=\"http://ruby-doc.org/core/doc/syntax/calling_methods_rdoc.html#label-Method+Lookup\" rel=\"nofollow noreferrer\">ruby-doc.org/core/doc/syntax/&hellip;</a>"}], "tags": [], "owner": {"reputation": 208794, "user_id": 229044, "user_type": "moderator", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/591426cbbacd4025d920467bad356911?s=128&d=identicon&r=PG&f=1", "display_name": "meagar", "link": "https://stackoverflow.com/users/229044/meagar"}, "is_accepted": false, "score": 9, "last_activity_date": 1483538715, "last_edit_date": 1483538715, "creation_date": 1483478300, "answer_id": 41452526, "question_id": 41451292, "link": "https://stackoverflow.com/questions/41451292/calling-super-keyword-with-modules-and-inheritance/41452526#41452526", "title": "Calling &quot;super&quot; keyword with modules and inheritance", "body": "<p>You're running into nuances of Ruby's object hierarchy and how method lookups interact with included modules.</p>\n\n<p>When you invoke a method on a object, <a href=\"http://ruby-doc.org/core-2.4.0/doc/syntax/calling_methods_rdoc.html#label-Method+Lookup\" rel=\"noreferrer\">Ruby walks over the <code>ancestors</code> list</a> for the object's class, looking for an ancestor class or module that responds to that method. When you invoke <code>super</code> in that method, you're effectively <em>continuing</em> your walking up the tree of <code>ancestors</code>, looking for the <em>next</em> object that responds to the same method name.</p>\n\n<p>The ancestor tree for your <code>X</code> and <code>Y</code> classes look like this:</p>\n\n<pre><code>p X.ancestors #=&gt; [ X, A, Object, Kernel, BaseObject ]\np Y.ancestors #=&gt; [ Y, X, A, Object, Kernel, BaseObject ]\n</code></pre>\n\n<p>The problem is that <code>include</code>ing the module a second time, in a child class, does <em>not</em> inject a second copy of the module in the ancestors chain.</p>\n\n<p>Effectively what is happening is when you invoke <code>Y.new.blah</code>, Ruby begins looking for a class that responds to <code>blah</code>. It walks past <code>Y</code>, and <code>X</code>, and lands on <code>A</code> which introduces the <code>blah</code> method.  When <code>A#blah</code> invokes <code>super</code>, the \"pointer\" into your ancestor list is already pointing at <code>A</code>, and Ruby resumes looking from that point for another object responding to <code>blah</code>, starting with <code>Object</code>, <code>Kernel</code>, and then <code>BaseObject</code>. None of these classes have a <code>blah</code> method, so your <code>super</code> invocation fails.</p>\n\n<p>A similar thing happens if a module <code>A</code> includes a module <code>B</code>, and then a class includes both module <code>A</code> and <code>B</code>. The <code>B</code> module is <em>not</em> included twice:</p>\n\n<pre><code>module A; end\nmodule B; include A; end\n\nclass C\n  include A\n  include B\nend\n\np C.ancestors # [ C, B, A, Object, Kernel, BaseObject ]\n</code></pre>\n\n<p>Note that it's <code>C, B, A</code>, not <code>C, A, B, A</code>.</p>\n\n<p>The intent would seem to be to allow you to safely invoke <code>super</code> inside any of <code>A</code>'s methods without worrying about how consuming class hierarchies may inadvertently include <code>A</code> twice.</p>\n\n<hr>\n\n<p>There are a few experiments that demonstrate different aspects of this behavior. The first is adding a <code>blah</code> method to Object, which allows the <code>super</code> call to pass:</p>\n\n<pre><code>class Object; def blah; puts \"Object::blah\"; end; end\n\nmodule A\n  def blah\n    puts \"A::blah\"\n    super\n  end\nend\n\nclass X\n    include A\nend\n\nclass Y &lt; X\n    include A\nend\n\nY.new.blah\n\n# Output\n# A::blah\n# Object::blah\n</code></pre>\n\n<p>The second experiment is to use two modules, <code>BaseA</code> and <code>A</code>, which <em>does</em> cause the modules to be inserted twice, correctly, in the <code>ancestors</code> chain:</p>\n\n<pre><code>module BaseA\n  def blah\n    puts \"BaseA::blah\"\n  end\nend\n\nmodule A\n  def blah\n    puts \"A::blah\"\n    super\n  end\nend\n\nclass X\n  include BaseA\nend\n\nclass Y &lt; X\n  include A\nend\n\np Y.ancestors # [ Y, A, X, BaseA, Object, ...]\nY.new.blah\n\n# Output\n# A::blah\n# BaseA::blah\n</code></pre>\n\n<p>A third experiement uses <code>prepend</code>, instead of <code>include</code>, which places the module <em>in front</em> of the object in the <code>ancestors</code> hierarchy and interestingly  <strong>does</strong> insert a duplicate copy of the module. This allows us to reach the point where effectively <code>Y::blah</code> invokes <code>X::blah</code>, which fails because <code>Object::blah</code> does not exist:</p>\n\n<pre><code>require 'pry'\n\nmodule A\n  def blah\n    puts \"A::blah\"\n    begin\n      super\n    rescue\n      puts \"no super\"\n    end\n  end\nend\n\nclass X\n  prepend A\nend\n\nclass Y &lt; X\n  prepend A\nend\n\np Y.ancestors # [ A, Y, A, X, Object, ... ]\nY.new.blah\n\n# Output\n# A::blah (from the A before Y)\n# A::blah (from the A before X)\n# no super (from the rescue clause in A::blah)\n</code></pre>\n"}], "owner": {"reputation": 145, "user_id": 1666334, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/e09ba0e560282b8069f4ce580d89bf3c?s=128&d=identicon&r=PG", "display_name": "d0bz", "link": "https://stackoverflow.com/users/1666334/d0bz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1782, "favorite_count": 1, "answer_count": 1, "score": 4, "last_activity_date": 1483538715, "creation_date": 1483473159, "last_edit_date": 1483477640, "question_id": 41451292, "link": "https://stackoverflow.com/questions/41451292/calling-super-keyword-with-modules-and-inheritance", "title": "Calling &quot;super&quot; keyword with modules and inheritance", "body": "<p>I thought that including a module as a mixin in a class \"added the functions\" to the class.</p>\n\n<p>I do not understand why this does not work as expected:</p>\n\n<pre><code>module A\n    def blah\n        super if defined?(super)\n        puts \"hello, world!\"\n    end\nend\n\nclass X\n    include A\nend\n\nclass Y &lt; X\n    include A\nend\n\ny = Y.new\ny.blah\n</code></pre>\n\n<p>I was expecting \"y\" to call its super blah() (since its included in class X?) but instead i got:</p>\n\n<blockquote>\n  <p>test.rb:3:in blah: super: no superclass method `blah'</p>\n</blockquote>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4"], "answers": [{"tags": [], "owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "is_accepted": true, "score": 0, "last_activity_date": 1483476098, "creation_date": 1483476098, "answer_id": 41451997, "question_id": 41451049, "link": "https://stackoverflow.com/questions/41451049/case-statement-two-buttons-under-selection/41451997#41451997", "title": "Case statement two buttons under selection", "body": "<p>It's typically the case that only the last result is returned, so if you want to return multiple things:</p>\n\n<pre><code>when 'x'\n  [\n    button_to ...,\n    button_to\n  ]\n...\n</code></pre>\n\n<p>That will return an array with all of the various buttons present.</p>\n"}], "owner": {"reputation": 33, "user_id": 7207339, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/fxAPe.jpg?s=128&g=1", "display_name": "Daniel Gomez Firmat", "link": "https://stackoverflow.com/users/7207339/daniel-gomez-firmat"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 19, "favorite_count": 0, "accepted_answer_id": 41451997, "answer_count": 1, "score": 0, "last_activity_date": 1483476098, "creation_date": 1483472176, "last_edit_date": 1483476039, "question_id": 41451049, "link": "https://stackoverflow.com/questions/41451049/case-statement-two-buttons-under-selection", "title": "Case statement two buttons under selection", "body": "<p>I'm trying to put to buttons under the same case such as:</p>\n\n<pre><code>    when \"invited\"\n         button_to \"Confirm\", .... \n         button_to \"Refuse\", ....\n</code></pre>\n\n<p>At the minute only one of the buttons is shown at the time, how can I do to show both simultaneously?</p>\n\n<p>Thanks!</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "cocoon-gem"], "comments": [{"owner": {"reputation": 20590, "user_id": 504963, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/xlYLo.jpg?s=128&g=1", "display_name": "Antarr Byrd", "link": "https://stackoverflow.com/users/504963/antarr-byrd"}, "edited": false, "score": 0, "creation_date": 1483476336, "post_id": 41451015, "comment_id": 70110496, "body": "What gem are you using for storing images ?"}, {"owner": {"reputation": 1, "user_id": 7370809, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ir44G.jpg?s=128&g=1", "display_name": "Gweno", "link": "https://stackoverflow.com/users/7370809/gweno"}, "reply_to_user": {"reputation": 20590, "user_id": 504963, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/xlYLo.jpg?s=128&g=1", "display_name": "Antarr Byrd", "link": "https://stackoverflow.com/users/504963/antarr-byrd"}, "edited": false, "score": 0, "creation_date": 1483479121, "post_id": 41451015, "comment_id": 70111754, "body": "i use gem &#39;carrierwave&#39; gem &#39;mini_magick&#39; for the images"}], "answers": [{"comments": [{"owner": {"reputation": 1820, "user_id": 5830835, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/29a99125813cee34a6ecfe0d0e432eb1?s=128&d=identicon&r=PG&f=1", "display_name": "Timmy Von Heiss ", "link": "https://stackoverflow.com/users/5830835/timmy-von-heiss"}, "edited": false, "score": 0, "creation_date": 1483499048, "post_id": 41455559, "comment_id": 70117457, "body": "what rails version are you running?"}], "tags": [], "owner": {"reputation": 1, "user_id": 7370809, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ir44G.jpg?s=128&g=1", "display_name": "Gweno", "link": "https://stackoverflow.com/users/7370809/gweno"}, "is_accepted": false, "score": 0, "last_activity_date": 1483498741, "creation_date": 1483498741, "answer_id": 41455559, "question_id": 41451015, "link": "https://stackoverflow.com/questions/41451015/rails-form-info-received-but-didnt-save-in-the-database/41455559#41455559", "title": "rails form info received but didn&#39;t save in the database", "body": "<p>I figured out the problem. As I watch videos, I saw attr_accessible, however when i run the server, it threw me an error and suggested attr_accessor. So I changed it to attr_accessor. Don't make this silly mistake. But if anyone can tell me why that attr_accessor made my code not work, that would be fantastic :) </p>\n"}], "owner": {"reputation": 1, "user_id": 7370809, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ir44G.jpg?s=128&g=1", "display_name": "Gweno", "link": "https://stackoverflow.com/users/7370809/gweno"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 49, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1483498741, "creation_date": 1483472047, "last_edit_date": 1483489913, "question_id": 41451015, "link": "https://stackoverflow.com/questions/41451015/rails-form-info-received-but-didnt-save-in-the-database", "title": "rails form info received but didn&#39;t save in the database", "body": "<p>I've been trying for different solutions for the entire day. But nothing seems to work</p>\n\n<p>Background info: For my app, users can upload images and each image can have many users. So it's a many-to-many-association through: . <strong>The problem I'm encountering is that the info/data received from the form doesn't save in the database.</strong></p>\n\n<p>I'm using the cocoon gem. When upload the image, I'm able to add and remove the users field in the frontend. When I upload the image, and select user1 and user2, debugger showed me that user_id1 and user_id2 are received. After submitting, I use rails console to check image.users. But it's empty, there're no users associate with the image. I did a lot of researching,and tried many different ways but nothing seems to work. </p>\n\n<p>Debugger showing that the user_ids are received from the form.\n<div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>{\"utf8\"=&gt;\"\u2713\", \"authenticity_token\"=&gt;\"/q52XogfTcEqCLap3K5C4B4I1gNYQGfBJOynNvdIXUE3ViVnRM+2JcksmaAwCWzBXw2kSOqOR+W25pefgBRRGw==\", \"image\"=&gt;{\"picture\"=&gt;#&lt;ActionDispatch::Http::UploadedFile:0x007f49998bd320 @tempfile=#&lt;Tempfile:/tmp/RackMultipart20170103-11352-qmm06k.png&gt;, @original_filename=\"erincolor4.png\", @content_type=\"image/png\", @headers=\"Content-Disposition: form-data; name=\\\"image[picture]\\\"; filename=\\\"erincolor4.png\\\"\\r\\nContent-Type: image/png\\r\\n\"&gt;, \"image_users_attributes\"=&gt;{\"1483469430746\"=&gt;{\"user_id\"=&gt;\"1\", \"_destroy\"=&gt;\"false\"}, \"1483469434072\"=&gt;{\"user_id\"=&gt;\"9\", \"_destroy\"=&gt;\"false\"}}}, \"commit\"=&gt;\"Upload\", \"controller\"=&gt;\"images\", \"action\"=&gt;\"create\"} </code></pre>\r\n</div>\r\n</div>\r\n</p>\n\n<p>I suspect the problem is not the form, but  either it's the model or controller.</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>#Image model\r\nclass Image &lt; ActiveRecord::Base\r\n  attr_accessor :picture, :image_users_attributes, :user_id\r\n  has_many :image_users, dependent: :destroy\r\n  has_many :users, through: :image_users \r\n\r\n\r\n  accepts_nested_attributes_for :image_users, reject_if: :all_blank, allow_destroy: true\r\n\r\n  mount_uploader :picture, ImageUploader\r\n  \r\n  validates :picture,  presence: true\r\n  validates_associated :image_users\r\n\r\nend \r\n    \r\n                                                              \r\n                               \r\n#User model\r\nclass User &lt; ActiveRecord::Base \r\n  \r\n  has_many :image_users\r\n  has_many :images, through: :image_users \r\nend \r\n\r\n\r\n\r\n#ImageUser model\r\nclass ImageUser &lt; ActiveRecord::Base \r\n  belongs_to :user\r\n  belongs_to :image\r\n  \r\n  \r\nend</code></pre>\r\n</div>\r\n</div>\r\n</p>\n\n<p>Image Controller </p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>class ImagesController &lt; ApplicationController\r\n  \r\n  before_action :set_image, only: [:show, :destroy, :edit, :update]\r\n  before_action :require_user, only: [:new, :create, :edit, :update, :destroy]\r\n\r\n\r\n  \r\n  def new \r\n    @image = Image.new\r\n    \r\n  end \r\n  \r\n  def create \r\n    debugger\r\n    @image = Image.new(image_params)\r\n    if @image.save \r\n      flash[:success]=\"Image saved\"\r\n      redirect_to user_path(current_user)\r\n    else \r\n      render'new'\r\n    end \r\n  end \r\n\r\n ...........\r\n  \r\nprivate\r\n  \r\n  def image_params \r\n    params.require(:image).permit(:picture, image_users_attributes:[:id, :user_id, :_destroy])\r\n  end \r\n  \r\n  \r\n  def set_image\r\n    @image =Image.find(params[:id]) \r\n  end \r\n  \r\n\r\nend                                               </code></pre>\r\n</div>\r\n</div>\r\n</p>\n\n<p>Form view:</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>&lt;%= form_for @image do |f|%&gt;\r\n    &lt;div class=\"field\"&gt;\r\n      &lt;%= f.file_field :picture, accept: 'image/jpeg, image/gif, image/png'%&gt;\r\n    &lt;/div&gt;\r\n    &lt;div id='image_users'&gt;\r\n      &lt;%= f.fields_for :image_users do |u| %&gt;\r\n        &lt;%=render 'image_user_fields', :f =&gt; u %&gt;\r\n      &lt;% end %&gt; \r\n      &lt;div class=\"links\"&gt;\r\n        &lt;%= link_to_add_association 'add user', f, :image_users %&gt;\r\n      &lt;/div&gt;\r\n    &lt;/div&gt;\r\n    &lt;%= f.submit 'Upload' %&gt;\r\n\r\n&lt;% end %&gt;\r\n  \r\n#nested form\r\n &lt;div class=\"nested-fields\"&gt;\r\n  &lt;div class=\"field\"&gt;\r\n    &lt;%= f.label :content,\"Stylist\" %&gt;&lt;br&gt;\r\n    &lt;%= f.collection_select :user_id, User.all, :id,:username, :prompt =&gt; \"  \"  %&gt;\r\n  &lt;/div&gt;\r\n  &lt;%= link_to_remove_association \"remove stylist\", f %&gt;\r\n  \r\n&lt;/div&gt;</code></pre>\r\n</div>\r\n</div>\r\n</p>\n\n<p>I'm using cloud9 IDE</p>\n"}, {"tags": ["ruby", "oop"], "comments": [{"owner": {"reputation": 67463, "user_id": 203130, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/1RE8c.jpg?s=128&g=1", "display_name": "coreyward", "link": "https://stackoverflow.com/users/203130/coreyward"}, "edited": false, "score": 0, "creation_date": 1483486039, "post_id": 41451012, "comment_id": 70114319, "body": "Because <code>chdir</code> is occurring after <code>Dir.pwd</code> has been fetched, tagged as frozen, and assigned to <code>FileResolver::BASE_DIR</code>. That&#39;s what it sounded like you wanted. You are welcome to change <code>FileResolver</code> to accept a path you pass it. In any case, I would avoid <code>chdir</code> and instead use more explicit paths."}], "answers": [{"comments": [{"owner": {"reputation": 6391, "user_id": 2909897, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/LMSiW.jpg?s=128&g=1", "display_name": "mbigras", "link": "https://stackoverflow.com/users/2909897/mbigras"}, "edited": false, "score": 0, "creation_date": 1483476238, "post_id": 41451561, "comment_id": 70110456, "body": "Thank you for the response! Didn&#39;t know that about <code>join</code> or <code>realpath</code>. I think the problem with your solution is although it eliminates the instance variable it returns the <code>Dir.pwd</code> on method invocation instead of on instance creation. I&#39;m not sure if this is a big deal in practice but I was able to <code>chdir</code> after instantiation in a minitest test which caused <code>absolute_path</code> to give the wrong path."}, {"owner": {"reputation": 67463, "user_id": 203130, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/1RE8c.jpg?s=128&g=1", "display_name": "coreyward", "link": "https://stackoverflow.com/users/203130/coreyward"}, "reply_to_user": {"reputation": 6391, "user_id": 2909897, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/LMSiW.jpg?s=128&g=1", "display_name": "mbigras", "link": "https://stackoverflow.com/users/2909897/mbigras"}, "edited": false, "score": 0, "creation_date": 1483476327, "post_id": 41451561, "comment_id": 70110493, "body": "@mbigras You wouldn&#39;t want to call it on each trip through the codebase anyways, so definitely abstract that away however makes sense given your architecture."}, {"owner": {"reputation": 6391, "user_id": 2909897, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/LMSiW.jpg?s=128&g=1", "display_name": "mbigras", "link": "https://stackoverflow.com/users/2909897/mbigras"}, "edited": false, "score": 0, "creation_date": 1483479197, "post_id": 41451561, "comment_id": 70111792, "body": "Sorry @coreyward, I&#39;m a little confused. I wouldn&#39;t want to call my way or your way? And also what do you mean by &quot;abstract it away&quot;? Are you saying, yes keep doing it my way because it abstracts away the need to know about what directory I&#39;m in when I invoke the <code>SomeDir#absolute_path</code> method?"}, {"owner": {"reputation": 67463, "user_id": 203130, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/1RE8c.jpg?s=128&g=1", "display_name": "coreyward", "link": "https://stackoverflow.com/users/203130/coreyward"}, "reply_to_user": {"reputation": 6391, "user_id": 2909897, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/LMSiW.jpg?s=128&g=1", "display_name": "mbigras", "link": "https://stackoverflow.com/users/2909897/mbigras"}, "edited": false, "score": 0, "creation_date": 1483479618, "post_id": 41451561, "comment_id": 70111998, "body": "@mbigras I added an example; hopefully that&#39;ll help."}], "tags": [], "owner": {"reputation": 67463, "user_id": 203130, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/1RE8c.jpg?s=128&g=1", "display_name": "coreyward", "link": "https://stackoverflow.com/users/203130/coreyward"}, "is_accepted": true, "score": 0, "last_activity_date": 1483485626, "last_edit_date": 1483485626, "creation_date": 1483474321, "answer_id": 41451561, "question_id": 41451012, "link": "https://stackoverflow.com/questions/41451012/implement-absolute-path-for-pathname-child/41451561#41451561", "title": "Implement #absolute_path for Pathname child", "body": "<p>Are you trying to get a faux-realpath for files that don't exist? If so, you might be better served by using <code>.join</code> and handing in the necessary components:</p>\n\n<pre><code>Pathname.new(Dir.pwd).join(\"some/nonexistent/path\")\n</code></pre>\n\n<p>If you have a file that exists, but your path string is a fragment and you need to provide another base directory to <code>realpath</code>, you can do that too:</p>\n\n<pre><code>path = Pathname.new('/path/and/file.jpg')\npath.realpath('some/existing')\n#=&gt; '/some/existing/path/and/file.jpg'\n</code></pre>\n\n<p>An example implementation might be\u2026</p>\n\n<pre><code>class FileResolver\n  BASE_DIR = Dir.pwd.freeze\n\n  def initialize(filepath)\n    @filepath = filepath\n  end\n\n  def absolute_path\n    Pathname.new(BASE_DIR).join(@filepath)\n  end\nend\n</code></pre>\n\n<p>Or, if your files aren't relative to this class but instead your Rails project, a better way is to use <code>Rails.root.join</code>:</p>\n\n<pre><code>Rails.root.join('your/path', 'some/filename.txt')\n</code></pre>\n"}], "owner": {"reputation": 6391, "user_id": 2909897, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/LMSiW.jpg?s=128&g=1", "display_name": "mbigras", "link": "https://stackoverflow.com/users/2909897/mbigras"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 161, "favorite_count": 0, "accepted_answer_id": 41451561, "answer_count": 1, "score": 1, "last_activity_date": 1483485626, "creation_date": 1483472042, "last_edit_date": 1483484736, "question_id": 41451012, "link": "https://stackoverflow.com/questions/41451012/implement-absolute-path-for-pathname-child", "title": "Implement #absolute_path for Pathname child", "body": "<p>An instance of <a href=\"https://ruby-doc.org/stdlib-2.2.2/libdoc/rake/rdoc/Pathname.html\" rel=\"nofollow noreferrer\">Pathname</a> is a pretty useful object because of all the great messages it responds to.</p>\n\n<p>For example, even if the path doesn't exist it can tell you if it's an absolute path:</p>\n\n<pre><code>some_path = Pathname.new(\"/some/nonexistent/path\")\np some_path.absolute?\n#=&gt; true\n</code></pre>\n\n<p>It can given you the \"absolute_path\" using the method <code>realpath</code> if the path already exists on disk:</p>\n\n<pre><code>another_path = Pathname.new(\"some/existing/path\")\np another_path.realpath\n#=&gt; #&lt;Pathname:/Users/max/Dropbox/work/tmp/abs_path/some/existing/path&gt;\n</code></pre>\n\n<p>But if the path doesn't exist already <code>realpath</code> breaks:</p>\n\n<pre><code>yet_another_path = Pathname.new(\"some/nonexistent/path\")\np yet_another_path.realpath\n# `realpath': No such file or directory @ realpath_rec - /Users/max/Dropbox/work/tmp/abs_path/some/nonexistent (Errno::ENOENT)\n</code></pre>\n\n<p>So I'm trying to implement another class called <code>SomeDir</code> that inherits from <code>Pathname</code> and responds to the <code>absolute_path</code> message with the \"absolute path if it existed\". I don't think this is too weird since it's sort of like calling <code>to_s</code> on the original nonexistent Pathname, except it's giving the absolute_path.</p>\n\n<p>This is my implementation:</p>\n\n<pre><code>require 'pathname'\nrequire 'fileutils'\n\nclass SomeDir &lt; Pathname\n\n  attr_reader :cwd_on_instantiation \n  def initialize path\n    @cwd_on_instantiation = Dir.pwd \n    super\n  end\n\n  def absolute_path\n    if exist?\n      Pathname.new(to_s).realpath\n    elsif absolute?\n      Pathname.new(to_s)\n    else\n      Pathname.new(File.join(cwd_on_instantiation, to_s)) \n    end\n  end\nend\n\nsome_dir = SomeDir.new(\"some/nonexistent/path\")\np some_dir.absolute_path\n# #&lt;Pathname:/Users/max/Dropbox/work/tmp/abs_path/some/nonexistent/path&gt;\n</code></pre>\n\n<p>So it seems like it works.</p>\n\n<p>Now, I'm wondering:</p>\n\n<ol>\n<li>Are there any cases where you can see this not working as expected?</li>\n<li>How would I re-implement the <code>absolute_path</code> method if without the <code>if...elsif..else</code> block?</li>\n<li>What would a better name for the <code>cwd_on_instantiation</code> instance variable be?</li>\n</ol>\n\n<p>Edit:</p>\n\n<p>Thank you @coreyward for the code example. It seems like it isn't working when I <code>chdir</code> though:</p>\n\n<pre><code>require 'pathname'\nrequire 'fileutils'\ninclude FileUtils\n\nclass FileResolver\n  BASE_DIR = Dir.pwd.freeze\n\n  attr_reader :filepath\n  def initialize(filepath)\n    @filepath = filepath\n  end\n\n  def absolute_path\n    Pathname.new(BASE_DIR).join(filepath)\n  end\nend\n\nchdir \"some\" do \n  puts Dir.pwd # /Users/max/Dropbox/work/tmp/freeze_example/some\n  yet_another_dir = FileResolver.new('nonexistent')\n  p yet_another_dir.absolute_path\n  #=&gt; #&lt;Pathname:/Users/max/Dropbox/work/tmp/freeze_example/nonexistent&gt;\nend\n</code></pre>\n\n<p>Not sure why <code>Dir.pwd.freeze</code> isn't picking up the <code>chdir \"some\"</code></p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4", "devise", "friendly-id"], "answers": [{"tags": [], "owner": {"reputation": 490, "user_id": 4835347, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-jYSX21F2zsc/AAAAAAAAAAI/AAAAAAAAAeo/MJZfozW2Ml8/photo.jpg?sz=128", "display_name": "Igor Springer", "link": "https://stackoverflow.com/users/4835347/igor-springer"}, "is_accepted": true, "score": 3, "last_activity_date": 1483473795, "creation_date": 1483473795, "answer_id": 41451448, "question_id": 41450412, "link": "https://stackoverflow.com/questions/41450412/friendly-id-on-belongs-to-model/41451448#41451448", "title": "friendly_id on belongs_to model", "body": "<p>An answer from <code>friendly_id</code> repository <a href=\"https://github.com/norman\" rel=\"nofollow noreferrer\">owner</a> to a similar question from <a href=\"https://github.com/norman/friendly_id/issues/558#issuecomment-44527493\" rel=\"nofollow noreferrer\">Github issue</a>:</p>\n\n<blockquote>\n  <p>Sorry, not going to do this. This was how FriendlyId 3.x and below worked. If you have very large tables, performance is significantly worse with the slug in a separate table.</p>\n</blockquote>\n\n<p>So it a nutshell, the slug must be placed in the same table. </p>\n"}], "owner": {"reputation": 1225, "user_id": 5724342, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d0fc4bbc261a7a2a233a196a0b655fd2?s=128&d=identicon&r=PG&f=1", "display_name": "Gurmukh Singh", "link": "https://stackoverflow.com/users/5724342/gurmukh-singh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 155, "favorite_count": 0, "accepted_answer_id": 41451448, "answer_count": 1, "score": 0, "last_activity_date": 1483473795, "creation_date": 1483469539, "question_id": 41450412, "link": "https://stackoverflow.com/questions/41450412/friendly-id-on-belongs-to-model", "title": "friendly_id on belongs_to model", "body": "<p>I have a devise <code>User</code> model and a Profile model which <code>belongs_to</code> the <code>User</code></p>\n\n<pre><code>class Profile &lt; ApplicationRecord\n    belongs_to :user\nend\n</code></pre>\n\n<p>The <code>User</code> model has a added column called <code>name</code> which stores the users name.</p>\n\n<p>Im using <a href=\"https://github.com/norman/friendly_id\" rel=\"nofollow noreferrer\">friendly_id gem</a> and want to apply it to the Profile model like so:</p>\n\n<pre><code>class Profile &lt; ActiveRecord::Base\n  belongs_to :user\n  extend FriendlyId\n  friendly_id :name, use: :slugged\nend \n</code></pre>\n\n<p>But rather than create another column in the <code>Profile</code> model called <code>name</code>, i want to use the <code>User</code> model column <code>name</code> here, which the profile <code>belongs_to</code>.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-3", "rubygems", "pg"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user1351104"}, "edited": false, "score": 1, "creation_date": 1483469659, "post_id": 41450296, "comment_id": 70107328, "body": "Check if Postgres is installed on your system by running <code>psql -v</code>."}, {"owner": {"reputation": 911, "user_id": 5079196, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/UWfbG.jpg?s=128&g=1", "display_name": "gwalshington", "link": "https://stackoverflow.com/users/5079196/gwalshington"}, "edited": false, "score": 0, "creation_date": 1483469792, "post_id": 41450296, "comment_id": 70107389, "body": "@cobaltsoda I ran that and got: <code>-bash: psql: command not found</code>   I tried to uninstall it and reinstall, based on another solution I saw, but it didn&#39;t get me anywhere."}, {"owner": {"user_type": "does_not_exist", "display_name": "user1351104"}, "edited": false, "score": 1, "creation_date": 1483470420, "post_id": 41450296, "comment_id": 70107683, "body": "Just to confirm, did you try running <code>brew install postgresql</code>? That will install the postgres software needed for the gem to work."}, {"owner": {"reputation": 911, "user_id": 5079196, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/UWfbG.jpg?s=128&g=1", "display_name": "gwalshington", "link": "https://stackoverflow.com/users/5079196/gwalshington"}, "edited": false, "score": 0, "creation_date": 1483470593, "post_id": 41450296, "comment_id": 70107783, "body": "@cobaltsoda let me try real quick. if I have been using this app for over a year, would there be a reason pg would all of a sudden not be there?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user1351104"}, "edited": false, "score": 1, "creation_date": 1483470852, "post_id": 41450296, "comment_id": 70107922, "body": "That&#39;s a good point, although because you upgraded your Ruby version something could have happened to your installation of postgres"}, {"owner": {"reputation": 911, "user_id": 5079196, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/UWfbG.jpg?s=128&g=1", "display_name": "gwalshington", "link": "https://stackoverflow.com/users/5079196/gwalshington"}, "edited": false, "score": 0, "creation_date": 1483471013, "post_id": 41450296, "comment_id": 70108001, "body": "@cobaltsoda okay, I reinstalled pg, and updated my question with the new output. I&#39;m tempted to run update pg again, and see if it works, but is this message saying anything important about needing to migrate the db first?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user1351104"}, "edited": false, "score": 1, "creation_date": 1483471670, "post_id": 41450296, "comment_id": 70108313, "body": "I had a similar error when upgrading pg version on Linux. See <a href=\"http://stackoverflow.com/questions/24379373/how-to-upgrade-postgresql-from-version-9-4-to-version-9-5-without-losing-data\">this</a> SO post on how to upgrade your db clusters and remove the previous pg installation."}, {"owner": {"reputation": 911, "user_id": 5079196, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/UWfbG.jpg?s=128&g=1", "display_name": "gwalshington", "link": "https://stackoverflow.com/users/5079196/gwalshington"}, "edited": false, "score": 0, "creation_date": 1483472983, "post_id": 41450296, "comment_id": 70108926, "body": "@cobaltsoda I updated my answer. Not sure if you&#39;re able to find anything from this..."}], "answers": [{"tags": [], "owner": {"reputation": 911, "user_id": 5079196, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/UWfbG.jpg?s=128&g=1", "display_name": "gwalshington", "link": "https://stackoverflow.com/users/5079196/gwalshington"}, "is_accepted": true, "score": 0, "last_activity_date": 1483475713, "creation_date": 1483475713, "answer_id": 41451906, "question_id": 41450296, "link": "https://stackoverflow.com/questions/41450296/trying-to-upgrade-to-rails-5-make-sure-that-gem-install-pg-v-0-18-4-succee/41451906#41451906", "title": "Trying to upgrade to rails 5: Make sure that `gem install pg -v &#39;0.18.4&#39;` succeeds before bundling", "body": "<p>I don't have the full answer I'm looking for, but until someone can explain what happened, here is what I did to get Rails 5 installed:</p>\n\n<p>I uninstalled and reinstalled pg. </p>\n\n<p>Then ran <code>bundle update rails</code> and received the last error log posted above. </p>\n\n<p>To get over that issue, I ran <code>sudo gem install rails</code></p>\n\n<p>Then I was getting this error: <code>Warning: You're using Rubygems 2.0.14 with Spring. Upgrade to at least Rubygems 2.1.0 and run</code>gem pristine --all<code>for better startup performance.</code> and solved by running <code>gem update --system</code></p>\n\n<p>Now I could successfully run <code>gem install pg -v '0.18.2'</code> and finally get past the original error, in the first logs I posted above.</p>\n\n<p>It's not over... try spinning up the rails server, and get this error:</p>\n\n<p><code>Array values in the parameter to</code>Gem.paths=<code>are deprecated.\nPlease use a String or nil. \nSorry, you can't use byebug without Readline. To solve this, you need to\n    rebuild Ruby with Readline support. If using Ubuntu, try</code>sudo apt-get\n    install libreadline-dev<code>and then reinstall your Ruby.\n</code>\nI took out byebug gem, had to run <code>gem install pg -v '0.18.2'</code> again, then <code>bundle update</code>\nAfter all of this, rails is finally updated (having already declared 5.0 in my gem file) and the server will start. There are warnings when the server starts:</p>\n\n<p><code>Array values in the parameter to</code>Gem.paths=<code>are deprecated.\nPlease use a String or nil.\nAn Array ({\"GEM_PATH\"=&gt;[\"/Users/walshcostigan/.rvm/gems/ruby-2.3.1\", \"/Users/walshcostigan/.rvm/gems/ruby-2.3.1@global\"]}) was passed in from bin/rails:3:in</code>load'\n`</p>\n\n<p>But it is Rails 5, and it is running, so for now that is how I solved this. Hopefully this helps someone else, and any insight into the issue is appreciated!</p>\n"}], "owner": {"reputation": 911, "user_id": 5079196, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/UWfbG.jpg?s=128&g=1", "display_name": "gwalshington", "link": "https://stackoverflow.com/users/5079196/gwalshington"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 832, "favorite_count": 0, "accepted_answer_id": 41451906, "answer_count": 1, "score": 0, "last_activity_date": 1483475713, "creation_date": 1483469047, "last_edit_date": 1495541331, "question_id": 41450296, "link": "https://stackoverflow.com/questions/41450296/trying-to-upgrade-to-rails-5-make-sure-that-gem-install-pg-v-0-18-4-succee", "title": "Trying to upgrade to rails 5: Make sure that `gem install pg -v &#39;0.18.4&#39;` succeeds before bundling", "body": "<p>I am trying to update to Rails 5. I have successfully updated Ruby to '2.3.1' in my gem file, and ran bundle install.</p>\n\n<p>Then I went for Rails 5.0, and it told me:</p>\n\n<p><code>Make sure that gem install pg -v '0.18.2' succeeds before bundling.</code></p>\n\n<p>I put rails back to 4.2 like it is now, and I tried to update pg in the terminal by running  <code>gem install pg -v '0.18.2'</code>, and by updating the gem file and running <code>bundle install</code> and both times get this error:</p>\n\n<pre><code>Building native extensions.  This could take a while...\nERROR:  Error installing pg:\n    ERROR: Failed to build gem native extension.\n\n    /Users/w*****n/.rvm/rubies/ruby-2.1.2/bin/ruby extconf.rb\nchecking for pg_config... no\nNo pg_config... trying anyway. If building fails, please try again with\n --with-pg-config=/path/to/pg_config\nchecking for libpq-fe.h... no\nCan't find the 'libpq-fe.h header\n*** extconf.rb failed ***\nCould not create Makefile due to some reason, probably lack of necessary\nlibraries and/or headers.  Check the mkmf.log file for more details.  You may\nneed configuration options.\n\nProvided configuration options:\n    --with-opt-dir\n    --without-opt-dir\n    --with-opt-include\n    --without-opt-include=${opt-dir}/include\n    --with-opt-lib\n    --without-opt-lib=${opt-dir}/lib\n    --with-make-prog\n    --without-make-prog\n    --srcdir=.\n    --curdir\n    --ruby=/Users/w******n/.rvm/rubies/ruby-2.1.2/bin/ruby\n    --with-pg\n    --without-pg\n    --enable-windows-cross\n    --disable-windows-cross\n    --with-pg-config\n    --without-pg-config\n    --with-pg_config\n    --without-pg_config\n    --with-pg-dir\n    --without-pg-dir\n    --with-pg-include\n    --without-pg-include=${pg-dir}/include\n    --with-pg-lib\n    --without-pg-lib=${pg-dir}/lib\n\nextconf failed, exit code 1\n\nGem files will remain installed in /Users/w******n/.rvm/gems/ruby-2.1.2/gems/pg-0.18.2 for inspection.\nResults logged to /Users/w*******n/.rvm/gems/ruby-2.1.2/extensions/x86_64-darwin-13/2.1.0-static/pg-0.18.2/gem_make.out\n</code></pre>\n\n<p>Ive found <a href=\"https://stackoverflow.com/questions/34399858/cant-install-pg-gem-on-rails\">this post</a> which is a similar error, but when I try their solutions, it does not work.</p>\n\n<p>My question has 1.5 parts:\n1. How can I get pg to upgrade to the newest version\n.5 Why am I getting this, and how do I interpret that error?</p>\n\n<p>UPDATE:</p>\n\n<p>reinstalled pg and received this:</p>\n\n<pre><code>==&gt; Pouring postgresql-9.6.1.yosemite.bottle.tar.gz\n==&gt; /usr/local/Cellar/postgresql/9.6.1/bin/initdb /usr/local/var/postgres\n==&gt; Caveats\nIf builds of PostgreSQL 9 are failing and you have version 8.x installed,\nyou may need to remove the previous version first. See:\n  https://github.com/Homebrew/homebrew/issues/2510\n\nTo migrate existing data from a previous major version (pre-9.0) of PostgreSQL, see:\n  https://www.postgresql.org/docs/9.6/static/upgrading.html\n\nTo migrate existing data from a previous minor version (9.0-9.5) of PostgreSQL, see:\n  https://www.postgresql.org/docs/9.6/static/pgupgrade.html\n\n  You will need your previous PostgreSQL installation from brew to perform `pg_upgrade`.\n  Do not run `brew cleanup postgresql` until you have performed the migration.\n\nTo have launchd start postgresql now and restart at login:\n  brew services start postgresql\nOr, if you don't want/need a background service you can just run:\n  pg_ctl -D /usr/local/var/postgres start\n==&gt; Summary\n\ud83c\udf7a  /usr/local/Cellar/postgresql/9.6.1: 3,242 files, 36.5M\n</code></pre>\n\n<p>running psql -V : <code>psql (PostgreSQL) 9.6.1</code></p>\n\n<p>Now after reinstalling pg, and trying to <code>bundle update rails</code>, I get this error:</p>\n\n<pre><code>Gem::Ext::BuildError: ERROR: Failed to build gem native extension.\n\n    current directory: /Users/w*******n/.rvm/gems/ruby-2.3.1/gems/pg-0.18.2/ext\n/Users/w******n/.rvm/rubies/ruby-2.3.1/bin/ruby -r ./siteconf20170103-82113-1miw542.rb extconf.rb --with-pg-config=/Applications/Postgres.app/Contents/Versions/0.18.2/bin/pg_config\nUsing config values from /Applications/Postgres.app/Contents/Versions/0.18.2/bin/pg_config\nsh: /Applications/Postgres.app/Contents/Versions/0.18.2/bin/pg_config: No such file or directory\nsh: /Applications/Postgres.app/Contents/Versions/0.18.2/bin/pg_config: No such file or directory\nchecking for libpq-fe.h... yes\nchecking for libpq/libpq-fs.h... yes\nchecking for pg_config_manual.h... yes\nchecking for PQconnectdb() in -lpq... yes\nchecking for PQconnectionUsedPassword()... yes\nchecking for PQisthreadsafe()... yes\nchecking for PQprepare()... yes\nchecking for PQexecParams()... yes\nchecking for PQescapeString()... yes\nchecking for PQescapeStringConn()... yes\nchecking for PQescapeLiteral()... yes\nchecking for PQescapeIdentifier()... yes\nchecking for PQgetCancel()... yes\nchecking for lo_create()... yes\nchecking for pg_encoding_to_char()... yes\nchecking for pg_char_to_encoding()... yes\nchecking for PQsetClientEncoding()... yes\nchecking for PQlibVersion()... yes\nchecking for PQping()... yes\nchecking for PQsetSingleRowMode()... yes\nchecking for PQconninfo()... yes\nchecking for rb_encdb_alias()... yes\nchecking for rb_enc_alias()... no\nchecking for rb_thread_call_without_gvl()... yes\nchecking for rb_thread_call_with_gvl()... yes\nchecking for rb_thread_fd_select()... yes\nchecking for rb_w32_wrap_io_handle()... no\nchecking for rb_str_modify_expand()... yes\nchecking for rb_hash_dup()... yes\nchecking for PGRES_COPY_BOTH in libpq-fe.h... yes\nchecking for PGRES_SINGLE_TUPLE in libpq-fe.h... yes\nchecking for PG_DIAG_TABLE_NAME in libpq-fe.h... yes\nchecking for struct pgNotify.extra in libpq-fe.h... yes\nchecking for unistd.h... yes\nchecking for ruby/st.h... yes\nchecking for C99 variable length arrays... yes\ncreating extconf.h\ncreating Makefile\n\nTo see why this extension failed to compile, please check the mkmf.log which can be found here:\n\n  /Users/w******n/.rvm/gems/ruby-2.3.1/extensions/x86_64-darwin-14/2.3.0/pg-0.18.2/mkmf.log\n\ncurrent directory: /Users/w*******n/.rvm/gems/ruby-2.3.1/gems/pg-0.18.2/ext\nmake \"DESTDIR=\" clean\n\ncurrent directory: /Users/w*******n/.rvm/gems/ruby-2.3.1/gems/pg-0.18.2/ext\nmake \"DESTDIR=\"\ncompiling gvl_wrappers.c\ncompiling pg.c\ncompiling pg_binary_decoder.c\ncompiling pg_binary_encoder.c\ncompiling pg_coder.c\npg_coder.c:188:34: warning: implicit conversion loses integer precision: 'long' to 'int' [-Wshorten-64-to-32]\n        res = this-&gt;dec_func(this, val, RSTRING_LEN(argv[0]), tuple, field, ENCODING_GET(argv[0]));\n              ~~~~                      ^~~~~~~~~~~~~~~~~~~~\n/Users/w*******n/.rvm/rubies/ruby-2.3.1/include/ruby-2.3.0/ruby/ruby.h:998:6: note: expanded from macro 'RSTRING_LEN'\n     RSTRING_EMBED_LEN(str) : \\\n     ^~~~~~~~~~~~~~~~~~~~~~\n/Users/w********n/.rvm/rubies/ruby-2.3.1/include/ruby-2.3.0/ruby/ruby.h:994:6: note: expanded from macro 'RSTRING_EMBED_LEN'\n     (long)((RBASIC(str)-&gt;flags &gt;&gt; RSTRING_EMBED_LEN_SHIFT) &amp; \\\n     ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\npg_coder.c:188:34: warning: implicit conversion loses integer precision: 'long' to 'int' [-Wshorten-64-to-32]\n        res = this-&gt;dec_func(this, val, RSTRING_LEN(argv[0]), tuple, field, ENCODING_GET(argv[0]));\n              ~~~~                      ^~~~~~~~~~~~~~~~~~~~\n/Users/w******n/.rvm/rubies/ruby-2.3.1/include/ruby-2.3.0/ruby/ruby.h:999:28: note: expanded from macro 'RSTRING_LEN'\n     RSTRING(str)-&gt;as.heap.len)\n     ~~~~~~~~~~~~~~~~~~~~~~^~~\npg_coder.c:188:56: warning: implicit conversion loses integer precision: 'VALUE' (aka 'unsigned long') to 'int' [-Wshorten-64-to-32]\n        res = this-&gt;dec_func(this, val, RSTRING_LEN(argv[0]), tuple, field, ENCODING_GET(argv[0]));\n              ~~~~                                            ^~~~~\npg_coder.c:188:63: warning: implicit conversion loses integer precision: 'VALUE' (aka 'unsigned long') to 'int' [-Wshorten-64-to-32]\n        res = this-&gt;dec_func(this, val, RSTRING_LEN(argv[0]), tuple, field, ENCODING_GET(argv[0]));\n              ~~~~                                                   ^~~~~\n4 warnings generated.\ncompiling pg_connection.c\npg_connection.c:2394:3: warning: implicit declaration of function 'gettimeofday' is invalid in C99 [-Wimplicit-function-declaration]\n                gettimeofday(&amp;currtime, NULL);\n                ^\n1 warning generated.\ncompiling pg_copy_coder.c\npg_copy_coder.c:218:15: warning: implicit conversion loses integer precision: 'long' to 'int' [-Wshorten-64-to-32]\n                                        strlen = RSTRING_LEN(subint);\n                                               ~ ^~~~~~~~~~~~~~~~~~~\n/Users/w*******n/.rvm/rubies/ruby-2.3.1/include/ruby-2.3.0/ruby/ruby.h:998:6: note: expanded from macro 'RSTRING_LEN'\n     RSTRING_EMBED_LEN(str) : \\\n     ^~~~~~~~~~~~~~~~~~~~~~\n/Users/w******n/.rvm/rubies/ruby-2.3.1/include/ruby-2.3.0/ruby/ruby.h:994:6: note: expanded from macro 'RSTRING_EMBED_LEN'\n     (long)((RBASIC(str)-&gt;flags &gt;&gt; RSTRING_EMBED_LEN_SHIFT) &amp; \\\n     ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\npg_copy_coder.c:218:15: warning: implicit conversion loses integer precision: 'long' to 'int' [-Wshorten-64-to-32]\n                                        strlen = RSTRING_LEN(subint);\n                                               ~ ^~~~~~~~~~~~~~~~~~~\n/Users/w*******n/.rvm/rubies/ruby-2.3.1/include/ruby-2.3.0/ruby/ruby.h:999:28: note: expanded from macro 'RSTRING_LEN'\n     RSTRING(str)-&gt;as.heap.len)\n     ~~~~~~~~~~~~~~~~~~~~~~^~~\npg_copy_coder.c:501:23: warning: implicit conversion loses integer precision: 'long' to 'int' [-Wshorten-64-to-32]\n                input_len = end_ptr - start_ptr;\n                          ~ ~~~~~~~~^~~~~~~~~~~\n3 warnings generated.\ncompiling pg_errors.c\ncompiling pg_result.c\ncompiling pg_text_decoder.c\ncompiling pg_text_encoder.c\npg_text_encoder.c:162:14: warning: implicit conversion loses integer precision: 'long' to 'int' [-Wshorten-64-to-32]\n                        len = out - start;\n                            ~ ~~~~^~~~~~~\npg_text_encoder.c:281:15: warning: implicit conversion loses integer precision: 'long' to 'int' [-Wshorten-64-to-32]\n                return optr - out;\n                ~~~~~~ ~~~~~^~~~~\npg_text_encoder.c:285:12: warning: implicit conversion loses integer precision: 'long' to 'int' [-Wshorten-64-to-32]\n                return 2 + RSTRING_LEN(*intermediate) * 2;\n                ~~~~~~ ~~^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\npg_text_encoder.c:491:13: warning: implicit conversion loses integer precision: 'long' to 'int' [-Wshorten-64-to-32]\n        nr_elems = RARRAY_LEN(value);\n                 ~ ^~~~~~~~~~~~~~~~~\n/Users/w********n/.rvm/rubies/ruby-2.3.1/include/ruby-2.3.0/ruby/ruby.h:1044:23: note: expanded from macro 'RARRAY_LEN'\n#define RARRAY_LEN(a) rb_array_len(a)\n                      ^~~~~~~~~~~~~~~\n4 warnings generated.\ncompiling pg_type_map.c\ncompiling pg_type_map_all_strings.c\ncompiling pg_type_map_by_class.c\ncompiling pg_type_map_by_column.c\npg_type_map_by_column.c:161:52: warning: implicit conversion loses integer precision: 'long' to 'int' [-Wshorten-64-to-32]\n        return dec_func( p_coder, RSTRING_PTR(field_str), RSTRING_LEN(field_str), 0, fieldno, enc_idx );\n               ~~~~~~~~                                   ^~~~~~~~~~~~~~~~~~~~~~\n/Users/w********n/.rvm/rubies/ruby-2.3.1/include/ruby-2.3.0/ruby/ruby.h:998:6: note: expanded from macro 'RSTRING_LEN'\n     RSTRING_EMBED_LEN(str) : \\\n     ^~~~~~~~~~~~~~~~~~~~~~\n/Users/w********n/.rvm/rubies/ruby-2.3.1/include/ruby-2.3.0/ruby/ruby.h:994:6: note: expanded from macro 'RSTRING_EMBED_LEN'\n     (long)((RBASIC(str)-&gt;flags &gt;&gt; RSTRING_EMBED_LEN_SHIFT) &amp; \\\n     ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\npg_type_map_by_column.c:161:52: warning: implicit conversion loses integer precision: 'long' to 'int' [-Wshorten-64-to-32]\n        return dec_func( p_coder, RSTRING_PTR(field_str), RSTRING_LEN(field_str), 0, fieldno, enc_idx );\n               ~~~~~~~~                                   ^~~~~~~~~~~~~~~~~~~~~~\n/Users/w*********n/.rvm/rubies/ruby-2.3.1/include/ruby-2.3.0/ruby/ruby.h:999:28: note: expanded from macro 'RSTRING_LEN'\n     RSTRING(str)-&gt;as.heap.len)\n     ~~~~~~~~~~~~~~~~~~~~~~^~~\npg_type_map_by_column.c:230:17: warning: implicit conversion loses integer precision: 'long' to 'int' [-Wshorten-64-to-32]\n        conv_ary_len = RARRAY_LEN(conv_ary);\n                     ~ ^~~~~~~~~~~~~~~~~~~~\n/Users/w********n/.rvm/rubies/ruby-2.3.1/include/ruby-2.3.0/ruby/ruby.h:1044:23: note: expanded from macro 'RARRAY_LEN'\n#define RARRAY_LEN(a) rb_array_len(a)\n                      ^~~~~~~~~~~~~~~\n3 warnings generated.\ncompiling pg_type_map_by_mri_type.c\ncompiling pg_type_map_by_oid.c\ncompiling pg_type_map_in_ruby.c\ncompiling util.c\nutil.c:119:24: warning: implicit conversion loses integer precision: 'long' to 'int' [-Wshorten-64-to-32]\n        return (char*)out_ptr - out;\n        ~~~~~~ ~~~~~~~~~~~~~~~^~~~~\n1 warning generated.\nlinking shared-object pg_ext.bundle\nld: file not found: dynamic_lookup\nclang: error: linker command failed with exit code 1 (use -v to see invocation)\nmake: *** [pg_ext.bundle] Error 1\n\nmake failed, exit code 2\n\nGem files will remain installed in /Users/w********n/.rvm/gems/ruby-2.3.1/gems/pg-0.18.2 for inspection.\nResults logged to /Users/w*******n/.rvm/gems/ruby-2.3.1/extensions/x86_64-darwin-14/2.3.0/pg-0.18.2/gem_make.out\n\nAn error occurred while installing pg (0.18.2), and Bundler cannot continue.\nMake sure that `gem install pg -v '0.18.2'` succeeds before bundling.\n</code></pre>\n"}, {"tags": ["arrays", "json", "ruby"], "comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 1, "creation_date": 1483470996, "post_id": 41449996, "comment_id": 70107994, "body": "The first thing you do is convert a JSON string to an array, each element of which is a hash. You want to know how to delete the same key from every hash. The fact that you got the hash from a JSON string is  irrelevant, and since you obviously must loop through each element of the array, the question really boils down to wanting to know how to delete a key from a hash. To answer that question you need only look through <a href=\"http://ruby-doc.org/core-2.3.0/Hash.html\" rel=\"nofollow noreferrer\">Hash</a>&#39;s instance methods for one that will do that."}], "answers": [{"comments": [{"owner": {"reputation": 1016, "user_id": 6362862, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6ae375229c55d1491e026498c84bc47f?s=128&d=identicon&r=PG&f=1", "display_name": "srijanshukla", "link": "https://stackoverflow.com/users/6362862/srijanshukla"}, "edited": false, "score": 0, "creation_date": 1483468292, "post_id": 41450026, "comment_id": 70106577, "body": "that worked. thanks. seems like I need to get a grip on my basics."}, {"owner": {"reputation": 27144, "user_id": 3857758, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/58c4295826435f049b7fc32b98c240f9?s=128&d=identicon&r=PG&f=1", "display_name": "Ursus", "link": "https://stackoverflow.com/users/3857758/ursus"}, "reply_to_user": {"reputation": 1016, "user_id": 6362862, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6ae375229c55d1491e026498c84bc47f?s=128&d=identicon&r=PG&f=1", "display_name": "srijanshukla", "link": "https://stackoverflow.com/users/6362862/srijanshukla"}, "edited": false, "score": 1, "creation_date": 1483468377, "post_id": 41450026, "comment_id": 70106618, "body": "My pleasure Sir ;)"}], "tags": [], "owner": {"reputation": 27144, "user_id": 3857758, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/58c4295826435f049b7fc32b98c240f9?s=128&d=identicon&r=PG&f=1", "display_name": "Ursus", "link": "https://stackoverflow.com/users/3857758/ursus"}, "is_accepted": true, "score": 13, "last_activity_date": 1483468032, "creation_date": 1483468032, "answer_id": 41450026, "question_id": 41449996, "link": "https://stackoverflow.com/questions/41449996/delete-a-key-from-every-element-in-a-json-array-ruby/41450026#41450026", "title": "Delete a key from every element in a JSON Array - Ruby", "body": "<p>Try this one</p>\n\n<pre><code>j.delete(\"subject_id\")\n</code></pre>\n"}], "owner": {"reputation": 1016, "user_id": 6362862, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6ae375229c55d1491e026498c84bc47f?s=128&d=identicon&r=PG&f=1", "display_name": "srijanshukla", "link": "https://stackoverflow.com/users/6362862/srijanshukla"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 7656, "favorite_count": 1, "accepted_answer_id": 41450026, "answer_count": 1, "score": 5, "last_activity_date": 1483468032, "creation_date": 1483467943, "question_id": 41449996, "link": "https://stackoverflow.com/questions/41449996/delete-a-key-from-every-element-in-a-json-array-ruby", "title": "Delete a key from every element in a JSON Array - Ruby", "body": "<p>So, I have a JSON array through which I am looping, and adding three keys and their values, I also want to remove/delete a key(subject_id) from every element in the array. </p>\n\n<p>How to go about doing this?</p>\n\n<pre><code>s=JSON.parse(subjects.to_json)\ns.each do |j|\n  j[\"total_classes\"] = total_classes[i]\n  j[\"attended_classes\"] = attended_classes[i]\n  j[\"subject_name\"] = subject_name[i]\n  j[\"subject_id\"] #remove this key, how?\n  i=i+1\nend\n\nrender json: { attendances: s }\n</code></pre>\n"}, {"tags": ["ruby", "format", "pad"], "answers": [{"comments": [{"owner": {"reputation": 487, "user_id": 729474, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/a8e32e28c2361f6bf5465e39c0a68987?s=128&d=identicon&r=PG", "display_name": "missscripty", "link": "https://stackoverflow.com/users/729474/missscripty"}, "edited": false, "score": 0, "creation_date": 1483468156, "post_id": 41449933, "comment_id": 70106486, "body": "Thanks! I&#39;ll mark this as the answer, as soon as it lets me."}], "tags": [], "owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "is_accepted": true, "score": 2, "last_activity_date": 1483467685, "creation_date": 1483467685, "answer_id": 41449933, "question_id": 41449900, "link": "https://stackoverflow.com/questions/41449900/pad-ruby-number-on-left-and-right-of-decimal/41449933#41449933", "title": "Pad Ruby number on Left AND Right of Decimal?", "body": "<p>You can do both if you ask for it:</p>\n\n<pre><code>'%08.2f' % 5.008\n</code></pre>\n\n<p>The notation here is <code>%0N.Mf</code> where <em>N</em> represents how many places overall, and <em>M</em> for places after the decimal. This is based on the classic <code>printf</code>-style arguments <a href=\"http://ruby-doc.org/core-2.3.3/Kernel.html#method-i-format\" rel=\"nofollow noreferrer\">explained in the documentation</a>.</p>\n"}], "owner": {"reputation": 487, "user_id": 729474, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/a8e32e28c2361f6bf5465e39c0a68987?s=128&d=identicon&r=PG", "display_name": "missscripty", "link": "https://stackoverflow.com/users/729474/missscripty"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 94, "favorite_count": 0, "accepted_answer_id": 41449933, "answer_count": 1, "score": 1, "last_activity_date": 1483467685, "creation_date": 1483467495, "question_id": 41449900, "link": "https://stackoverflow.com/questions/41449900/pad-ruby-number-on-left-and-right-of-decimal", "title": "Pad Ruby number on Left AND Right of Decimal?", "body": "<p>I have seen the solution to pad a number on each side of a decimal, in ruby, but not both on the same time.</p>\n\n<p>here are the pieces I have:</p>\n\n<pre><code>mysize = 5000.127\nf1_mysize = \"%.2f\" % mysize\nputs f1_mysize\n\nmysize2 = 5000.8\nf2_mysize = \"%06d\" % mysize2\nputs f2_mysize\n</code></pre>\n\n<p>I can't seem to put the two of those together, in one line.  This number is a size, in GB, and I want to make sure the progress messages are lined evenly, so they are easier to read.</p>\n\n<p>Can anyone help me with how to put those together?</p>\n\n<p>Thanks!</p>\n"}, {"tags": ["ruby"], "answers": [{"comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 17, "creation_date": 1483467394, "post_id": 41449844, "comment_id": 70106095, "body": "This is a really good optimization to have since calculating the sum of a range of numbers is trivial if you use the right formula, and excruciating if you go about it iteratively. It&#39;s like trying to implement multiplication as a series of addition operations."}, {"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1483468567, "post_id": 41449844, "comment_id": 70106736, "body": "So the performance boost is for <code>n+1</code> ranges only? I don&#39;t have 2.4 installed or I would test myself but are other Enumerable Objects handled by basic addition as they would be in <code>inject(:+)</code> minus the overhead of symbol to proc."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 8, "creation_date": 1483468930, "post_id": 41449844, "comment_id": 70106915, "body": "Readers, recall from your high-school math that <code>n, n+1, n+2, .., m</code> constitutes an <i>arithmetic series</i> whose sum equals <code>(m-n+1)*(m+n)&#47;2</code>. Similarly, the sum of a <i>geometric series</i>, <code>n, (\u03b1^1)n, (\u03b1^2)n, (\u03b1^3)n, ... , (\u03b1^m)n</code>. can be computed from a closed-form expression."}, {"owner": {"reputation": 6596, "user_id": 5021321, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/29f10a1b457e63d44e3a221e89e32c17?s=128&d=identicon&r=PG", "display_name": "Eli Sadoff", "link": "https://stackoverflow.com/users/5021321/eli-sadoff"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1483469505, "post_id": 41449844, "comment_id": 70107242, "body": "@CarySwoveland certainly (and I normally do that) but it&#39;s very cool to see that ruby automates it for you."}, {"owner": {"reputation": 4009, "user_id": 1549476, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/dxQHN.png?s=128&g=1", "display_name": "k_g", "link": "https://stackoverflow.com/users/1549476/k-g"}, "edited": false, "score": 4, "creation_date": 1483505570, "post_id": 41449844, "comment_id": 70118970, "body": "\\begin{nitpick} Enumerable#sum is O((log n)^2) and inject is O(n log n) when your numbers are allowed to be unbounded. \\end{nitpick}"}, {"owner": {"reputation": 6596, "user_id": 5021321, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/29f10a1b457e63d44e3a221e89e32c17?s=128&d=identicon&r=PG", "display_name": "Eli Sadoff", "link": "https://stackoverflow.com/users/5021321/eli-sadoff"}, "reply_to_user": {"reputation": 4009, "user_id": 1549476, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/dxQHN.png?s=128&g=1", "display_name": "k_g", "link": "https://stackoverflow.com/users/1549476/k-g"}, "edited": false, "score": 0, "creation_date": 1483508555, "post_id": 41449844, "comment_id": 70119905, "body": "@k_g What do you mean by unbounded numbers?"}, {"owner": {"reputation": 25491, "user_id": 49197, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/15ebf24a33a29b9efbf9924f530dd736?s=128&d=identicon&r=PG", "display_name": "Hynek -Pichi- Vychodil", "link": "https://stackoverflow.com/users/49197/hynek-pichi-vychodil"}, "reply_to_user": {"reputation": 6596, "user_id": 5021321, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/29f10a1b457e63d44e3a221e89e32c17?s=128&d=identicon&r=PG", "display_name": "Eli Sadoff", "link": "https://stackoverflow.com/users/5021321/eli-sadoff"}, "edited": false, "score": 6, "creation_date": 1483520187, "post_id": 41449844, "comment_id": 70125040, "body": "@EliSadoff: It means <b>really</b> big numbers. It means numbers which don&#39;t fit architecture word i.e. can&#39;t be computed by one instruction and one operation in CPU core. Number of size N could be encoded by log_2 N bits so addition is O(logN) operation and multiplication is O((logN)^2) but could be O((logN)^1.585) (Karasuba) or even O(logN*log(logN)*log(log(LogN)) (FFT)."}, {"owner": {"reputation": 6596, "user_id": 5021321, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/29f10a1b457e63d44e3a221e89e32c17?s=128&d=identicon&r=PG", "display_name": "Eli Sadoff", "link": "https://stackoverflow.com/users/5021321/eli-sadoff"}, "reply_to_user": {"reputation": 25491, "user_id": 49197, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/15ebf24a33a29b9efbf9924f530dd736?s=128&d=identicon&r=PG", "display_name": "Hynek -Pichi- Vychodil", "link": "https://stackoverflow.com/users/49197/hynek-pichi-vychodil"}, "edited": false, "score": 0, "creation_date": 1483533467, "post_id": 41449844, "comment_id": 70133488, "body": "@Hynek-Pichi-Vychodil Ah. So what would have been <code>Bignum</code> in versions of ruby pre-2.4.0"}, {"owner": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "reply_to_user": {"reputation": 4009, "user_id": 1549476, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/dxQHN.png?s=128&g=1", "display_name": "k_g", "link": "https://stackoverflow.com/users/1549476/k-g"}, "edited": false, "score": 0, "creation_date": 1483536065, "post_id": 41449844, "comment_id": 70135180, "body": "@k_g and Hynek. Thanks a lot! Is the part about complexity correct now?"}, {"owner": {"reputation": 4009, "user_id": 1549476, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/dxQHN.png?s=128&g=1", "display_name": "k_g", "link": "https://stackoverflow.com/users/1549476/k-g"}, "edited": false, "score": 0, "creation_date": 1483554627, "post_id": 41449844, "comment_id": 70147417, "body": "Yes, looks good. (When 100000000000000000) is the specific case, the log n starts mattering :-)"}], "tags": [], "owner": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "is_accepted": true, "score": 228, "last_activity_date": 1483527346, "last_edit_date": 1483527346, "creation_date": 1483467213, "answer_id": 41449844, "question_id": 41449617, "link": "https://stackoverflow.com/questions/41449617/why-is-sum-so-much-faster-than-inject/41449844#41449844", "title": "Why is sum so much faster than inject(:+)?", "body": "<h1>Short answer</h1>\n\n<p>For an integer range :</p>\n\n<ul>\n<li><code>Enumerable#sum</code> returns <code>(range.max-range.min+1)*(range.max+range.min)/2</code></li>\n<li><code>Enumerable#inject(:+)</code> iterates over every element.</li>\n</ul>\n\n<hr>\n\n<h1>Theory</h1>\n\n<p>The sum of integers between 1 and <code>n</code> is called a <a href=\"https://en.wikipedia.org/wiki/Triangular_number\">triangular number</a>, and is equal to <code>n*(n+1)/2</code>.</p>\n\n<p>The sum of integers between <code>n</code> and <code>m</code> is the triangular number of <code>m</code> minus the triangular number of <code>n-1</code>, which is equal to <code>m*(m+1)/2-n*(n-1)/2</code>, and can be written <code>(m-n+1)*(m+n)/2</code>.</p>\n\n<h1>Enumerable#sum in Ruby 2.4</h1>\n\n<p>This property in used in <a href=\"http://ruby-doc.org/core-2.4.0/Enumerable.html#method-i-sum\"><code>Enumerable#sum</code></a> for integer ranges :</p>\n\n<pre><code>if (RTEST(rb_range_values(obj, &amp;beg, &amp;end, &amp;excl))) {\n    if (!memo.block_given &amp;&amp; !memo.float_value &amp;&amp;\n            (FIXNUM_P(beg) || RB_TYPE_P(beg, T_BIGNUM)) &amp;&amp;\n            (FIXNUM_P(end) || RB_TYPE_P(end, T_BIGNUM))) { \n        return int_range_sum(beg, end, excl, memo.v);\n    } \n}\n</code></pre>\n\n<p><code>int_range_sum</code> looks like this :</p>\n\n<pre><code>VALUE a;\na = rb_int_plus(rb_int_minus(end, beg), LONG2FIX(1));\na = rb_int_mul(a, rb_int_plus(end, beg));\na = rb_int_idiv(a, LONG2FIX(2));\nreturn rb_int_plus(init, a);\n</code></pre>\n\n<p>which is equivalent to:</p>\n\n<pre><code>(range.max-range.min+1)*(range.max+range.min)/2\n</code></pre>\n\n<p>the aforementioned equality!</p>\n\n<h1>Complexity</h1>\n\n<p>Thanks a lot to @k_g and @Hynek-Pichi-Vychodil for this part!</p>\n\n<h3>sum</h3>\n\n<p><code>(1...1000000000000000000000000000000).sum</code>\nrequires three additions, a multiplication, a substraction and a division.</p>\n\n<p>It's a constant number of operations, but multiplication is O((log n)\u00b2), so <code>Enumerable#sum</code> is O((log n)\u00b2) for an integer range.</p>\n\n<h3>inject</h3>\n\n<p><code>(1...1000000000000000000000000000000).inject(:+)</code></p>\n\n<p>requires 999999999999999999999999999998 additions!</p>\n\n<p>Addition is O(log n), so <code>Enumerable#inject</code> is O(n log n).</p>\n\n<p>With <code>1E30</code> as input, <code>inject</code> with never return. The sun will explode long before!</p>\n\n<h1>Test</h1>\n\n<p>It's easy to check if Ruby Integers are being added :</p>\n\n<pre><code>module AdditionInspector\n  def +(b)\n    puts \"Calculating #{self}+#{b}\"\n    super\n  end\nend\n\nclass Integer\n  prepend AdditionInspector\nend\n\nputs (1..5).sum\n#=&gt; 15\n\nputs (1..5).inject(:+)\n# Calculating 1+2\n# Calculating 3+3\n# Calculating 6+4\n# Calculating 10+5\n#=&gt; 15\n</code></pre>\n\n<p>Indeed, from <code>enum.c</code> comments :</p>\n\n<blockquote>\n  <p><code>Enumerable#sum</code> method may not respect method redefinition of <code>\"+\"</code>\n  methods such as <code>Integer#+</code>.</p>\n</blockquote>\n"}], "owner": {"reputation": 6596, "user_id": 5021321, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/29f10a1b457e63d44e3a221e89e32c17?s=128&d=identicon&r=PG", "display_name": "Eli Sadoff", "link": "https://stackoverflow.com/users/5021321/eli-sadoff"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 8662, "favorite_count": 25, "accepted_answer_id": 41449844, "answer_count": 1, "score": 130, "last_activity_date": 1483660286, "creation_date": 1483466373, "last_edit_date": 1483502641, "question_id": 41449617, "link": "https://stackoverflow.com/questions/41449617/why-is-sum-so-much-faster-than-inject", "title": "Why is sum so much faster than inject(:+)?", "body": "<p>So I was running some benchmarks in Ruby 2.4.0 and realized that</p>\n\n<pre><code>(1...1000000000000000000000000000000).sum\n</code></pre>\n\n<p>calculates immediately whereas</p>\n\n<pre><code>(1...1000000000000000000000000000000).inject(:+)\n</code></pre>\n\n<p>takes so long that I just aborted the operation. I was under the impression that <code>Range#sum</code> was an alias for <code>Range#inject(:+)</code> but it seems like that is not true. So how does <code>sum</code> work, and why is it so much faster than <code>inject(:+)</code>?</p>\n\n<p><strong>N.B.</strong> The documentation for <code>Enumerable#sum</code> (which is implemented by <code>Range</code>) does not say anything about lazy evaluation or anything along those lines. </p>\n"}, {"tags": ["ruby", "rspec"], "comments": [{"owner": {"reputation": 5134, "user_id": 1672197, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/i8HkV.png?s=128&g=1", "display_name": "orde", "link": "https://stackoverflow.com/users/1672197/orde"}, "edited": false, "score": 3, "creation_date": 1483467047, "post_id": 41449571, "comment_id": 70105907, "body": "Don&#39;t you want to run <code>rspec zombie_spec.rb</code> (instead of <code>ruby zombie_spec.rb </code>)?"}, {"owner": {"reputation": 914, "user_id": 1612193, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f21ef0b135d7399570b3679ce958fcbd?s=128&d=identicon&r=PG", "display_name": "Dani", "link": "https://stackoverflow.com/users/1612193/dani"}, "edited": false, "score": 0, "creation_date": 1483482082, "post_id": 41449571, "comment_id": 70113053, "body": "I think the <code>uninitialized constant RSpec</code> error indicates that Rspec was not loaded properly. Try adding <code>require &#39;rspec&#47;core&#39;</code> to the top of you <code>spec_helper</code>."}], "answers": [{"tags": [], "owner": {"reputation": 75, "user_id": 7024297, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/5c5b909c8aaa6691b17779a9b919fb47?s=128&d=identicon&r=PG&f=1", "display_name": "MattF", "link": "https://stackoverflow.com/users/7024297/mattf"}, "is_accepted": false, "score": 0, "last_activity_date": 1483548013, "creation_date": 1483548013, "answer_id": 41468985, "question_id": 41449571, "link": "https://stackoverflow.com/questions/41449571/starting-with-rspec-top-required-uninitialized-constant-rspec-nameerro/41468985#41468985", "title": "Starting with RSpec -- &lt;top (required)&gt;&#39;: uninitialized constant RSpec (NameError)", "body": "<p>I figured it out: you don't run the xxx_spec.rb file through ruby, you run it through rspec. I see that orde beat me to the punch.</p>\n"}, {"tags": [], "owner": {"reputation": 85, "user_id": 8178738, "user_type": "registered", "accept_rate": 43, "profile_image": "https://lh3.googleusercontent.com/-QqytqBYS8dc/AAAAAAAAAAI/AAAAAAAAAGk/B1TR4T3r-1M/photo.jpg?sz=128", "display_name": "Ronak Bhatt", "link": "https://stackoverflow.com/users/8178738/ronak-bhatt"}, "is_accepted": false, "score": 0, "last_activity_date": 1501562924, "last_edit_date": 1501562924, "creation_date": 1501506923, "answer_id": 45417001, "question_id": 41449571, "link": "https://stackoverflow.com/questions/41449571/starting-with-rspec-top-required-uninitialized-constant-rspec-nameerro/45417001#45417001", "title": "Starting with RSpec -- &lt;top (required)&gt;&#39;: uninitialized constant RSpec (NameError)", "body": "<p>dude, u want to run RSpec and you are using a ruby command \nmake sure you run RSpec like this.</p>\n\n<pre><code>rspec  spec/zombie_spec.rb\n</code></pre>\n"}], "owner": {"reputation": 75, "user_id": 7024297, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/5c5b909c8aaa6691b17779a9b919fb47?s=128&d=identicon&r=PG&f=1", "display_name": "MattF", "link": "https://stackoverflow.com/users/7024297/mattf"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 841, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1501562924, "creation_date": 1483466227, "last_edit_date": 1483469721, "question_id": 41449571, "link": "https://stackoverflow.com/questions/41449571/starting-with-rspec-top-required-uninitialized-constant-rspec-nameerro", "title": "Starting with RSpec -- &lt;top (required)&gt;&#39;: uninitialized constant RSpec (NameError)", "body": "<p>I just started with RSpec. I am following Code School's lessons here: <a href=\"http://rspec.codeschool.com/levels/1\" rel=\"nofollow noreferrer\">http://rspec.codeschool.com/levels/1</a></p>\n\n<p>I am using Cloud 9 to save all the files and run Ruby.</p>\n\n<p>This is my directory structure:</p>\n\n<p><img src=\"https://i.stack.imgur.com/X30yE.png\" alt=\"enter image description here\">\n</p>\n\n<p>This is my code for zombie.rb:</p>\n\n<pre><code>class Zombie\nend\n</code></pre>\n\n<p>This is my code for zombie_spec.rb:</p>\n\n<pre><code>require \"spec_helper\"\nrequire \"zombie\"\n</code></pre>\n\n<p>This is my result:</p>\n\n<pre><code>rspec_example/spec $ ruby zombie_spec.rb \n/usr/local/rvm/rubies/ruby-        2.3.0/lib/ruby/2.3.0/rubygems/core_ext/kernel_require.rb:55:in `require':     cannot load such file -- spec_helper (LoadError)\n        from /usr/local/rvm/rubies/ruby-    2.3.0/lib/ruby/2.3.0/rubygems/core_ext/kernel_require.rb:55:in `require'\n        from zombie_spec.rb:1:in `&lt;main&gt;'\n</code></pre>\n\n<p>When I try to change the require path inside of zombie_spec.rb:</p>\n\n<pre><code>require \"./spec_helper\"\nrequire \"zombie\"\n</code></pre>\n\n<p>I get this:</p>\n\n<pre><code>    rspec_example/spec $ ruby zombie_spec.rb \n/home/ubuntu/workspace/rspec_example/spec/spec_helper.rb:19:in `&lt;top     (required)&gt;': uninitialized constant RSpec (NameError)\n        from /usr/local/rvm/rubies/ruby-    2.3.0/lib/ruby/2.3.0/rubygems/core_ext/kernel_require.rb:55:in `require'\n        from /usr/local/rvm/rubies/ruby-    2.3.0/lib/ruby/2.3.0/rubygems/core_ext/kernel_require.rb:55:in `require'\n        from zombie_spec.rb:1:in `&lt;main&gt;'\n</code></pre>\n\n<p>If I change the spec again to this:</p>\n\n<pre><code>require \"./spec_helper\"\nrequire \"../zombie\"\n</code></pre>\n\n<p>And I get this:</p>\n\n<pre><code>    rspec_example/spec $ ruby zombie_spec.rb \n/home/ubuntu/workspace/rspec_example/spec/spec_helper.rb:19:in `&lt;top     (required)&gt;': uninitialized constant RSpec (NameError)\n        from /usr/local/rvm/rubies/ruby-    2.3.0/lib/ruby/2.3.0/rubygems/core_ext/kernel_require.rb:55:in `require'\n        from /usr/local/rvm/rubies/ruby-    2.3.0/lib/ruby/2.3.0/rubygems/core_ext/kernel_require.rb:55:in `require'\n        from zombie_spec.rb:1:in `&lt;main&gt;'\n</code></pre>\n\n<p>And this is everything from the spec_helper.rb file the error message referenced:</p>\n\n<pre><code>RSpec.configure do |config|\n  # rspec-expectations config goes here. You can use an alternate\n  # assertion/expectation library such as wrong or the stdlib/minitest\n  # assertions if you prefer.\n  config.expect_with :rspec do |expectations|\n    # This option will default to `true` in RSpec 4. It makes the `description`\n    # and `failure_message` of custom matchers include text for helper methods\n    # defined using `chain`, e.g.:\n    #     be_bigger_than(2).and_smaller_than(4).description\n    #     # =&gt; \"be bigger than 2 and smaller than 4\"\n    # ...rather than:\n    #     # =&gt; \"be bigger than 2\"\n    expectations.include_chain_clauses_in_custom_matcher_descriptions = true\n  end\n\n  # rspec-mocks config goes here. You can use an alternate test double\n  # library (such as bogus or mocha) by changing the `mock_with` option here.\n  config.mock_with :rspec do |mocks|\n    # Prevents you from mocking or stubbing a method that does not exist on\n    # a real object. This is generally recommended, and will default to\n    # `true` in RSpec 4.\n    mocks.verify_partial_doubles = true\n  end\n\n  # This option will default to `:apply_to_host_groups` in RSpec 4 (and will\n  # have no way to turn it off -- the option exists only for backwards\n  # compatibility in RSpec 3). It causes shared context metadata to be\n  # inherited by the metadata hash of host groups and examples, rather than\n  # triggering implicit auto-inclusion in groups with matching metadata.\n  config.shared_context_metadata_behavior = :apply_to_host_groups\n\n# The settings below are suggested to provide a good initial experience\n# with RSpec, but feel free to customize to your heart's content.\n=begin\n  # This allows you to limit a spec run to individual examples or groups\n  # you care about by tagging them with `:focus` metadata. When nothing\n  # is tagged with `:focus`, all examples get run. RSpec also provides\n  # aliases for `it`, `describe`, and `context` that include `:focus`\n  # metadata: `fit`, `fdescribe` and `fcontext`, respectively.\n  config.filter_run_when_matching :focus\n\n  # Allows RSpec to persist some state between runs in order to support\n  # the `--only-failures` and `--next-failure` CLI options. We recommend\n  # you configure your source control system to ignore this file.\n  config.example_status_persistence_file_path = \"spec/examples.txt\"\n\n  # Limits the available syntax to the non-monkey patched syntax that is\n  # recommended. For more details, see:\n  #   - http://rspec.info/blog/2012/06/rspecs-new-expectation-syntax/\n  #   - http://www.teaisaweso.me/blog/2013/05/27/rspecs-new-message-expectation-syntax/\n  #   - http://rspec.info/blog/2014/05/notable-changes-in-rspec-3/#zero-monkey-patching-mode\n  config.disable_monkey_patching!\n\n  # This setting enables warnings. It's recommended, but in some cases may\n  # be too noisy due to issues in dependencies.\n  config.warnings = true\n\n  # Many RSpec users commonly either run the entire suite or an individual\n  # file, and it's useful to allow more verbose output when running an\n  # individual spec file.\n  if config.files_to_run.one?\n    # Use the documentation formatter for detailed output,\n    # unless a formatter has already been configured\n    # (e.g. via a command-line flag).\n    config.default_formatter = 'doc'\n  end\n\n  # Print the 10 slowest examples and example groups at the\n  # end of the spec run, to help surface which specs are running\n  # particularly slow.\n  config.profile_examples = 10\n\n  # Run specs in random order to surface order dependencies. If you find an\n  # order dependency and want to debug it, you can fix the order by providing\n  # the seed, which is printed after each run.\n  #     --seed 1234\n  config.order = :random\n\n  # Seed global randomization in this process using the `--seed` CLI option.\n  # Setting this allows you to use `--seed` to deterministically reproduce\n  # test failures related to randomization by passing the same `--seed` value\n  # as the one that triggered the failure.\n  Kernel.srand config.seed\n=end\nend\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "google-api", "google-calendar-api", "ruby-on-rails-5"], "answers": [{"tags": [], "owner": {"reputation": 2387, "user_id": 4717992, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/SRrvm.jpg?s=128&g=1", "display_name": "Jonathan Soifer", "link": "https://stackoverflow.com/users/4717992/jonathan-soifer"}, "is_accepted": true, "score": 0, "last_activity_date": 1483531615, "last_edit_date": 1495541240, "creation_date": 1483531615, "answer_id": 41463454, "question_id": 41449382, "link": "https://stackoverflow.com/questions/41449382/connecting-to-google-calendars-api-through-rails/41463454#41463454", "title": "Connecting to Google Calendar&#39;s API through Rails", "body": "<p>I was able to figure this out and will post the answer to each of the questions below:</p>\n\n<ol>\n<li><p><a href=\"https://stackoverflow.com/questions/34372312/rails-where-to-store-json-credentials-of-google-client-api-and-how-to-access-it\">One of the possible locations</a> for the <em>client_secret.json</em> file is <code>config/client_secret.json</code>.\nWhen shipping to Production in Heroku, use ENV Vars.</p></li>\n<li><p>Require is not the appropriate way to import the credentials in the json file.\nUse <code>Google::APIClient::ClientSecrets.load( File.join( Rails.root, 'config', 'client_secret.json' ) )</code> (assuming the file is indeed in <code>config/</code>.</p></li>\n<li><p><a href=\"http://www.justinweiss.com/articles/where-do-you-put-your-code/\" rel=\"nofollow noreferrer\">There are several different alternatives</a> as on how to organize code. I ended up creating a services folder and a google_calendar.rb class holding the authorization logic.</p></li>\n</ol>\n\n<p><strong>Here's the code:</strong></p>\n\n<p><code>app/services/google_calendar.rb</code></p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>require 'google/api_client/client_secrets'\nrequire 'google/apis/calendar_v3'\n\nclass GoogleCalendar \n  # Attributes Accessors (attr_writer + attr_reader)\n  attr_accessor :auth_client, :auth_uri, :code\n\n  def initialize\n\n    # ENV: Development\n    # Google's API Credentials are in ~/config/client_secret.json\n    client_secrets = Google::APIClient::ClientSecrets.load( File.join( Rails.root, 'config', 'client_secret.json' ) )\n    @auth_client = client_secrets.to_authorization\n\n    # Specify privileges and callback URL\n    @auth_client.update!(\n      :scope =&gt; 'https://www.googleapis.com/auth/calendar',\n      :redirect_uri =&gt; 'http://localhost:3000/oauth2callback'\n    )\n\n    # Build up the Redirecting URL\n    @auth_uri = @auth_client.authorization_uri.to_s\n\n  end\n\nend\n</code></pre>\n\n<p><code>app/controllers/application_controller.rb</code></p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>class ApplicationController &lt; ActionController::Base\n  protect_from_forgery with: :exception\n\n  # Starting action in config/routes.rb\n  def welcome\n\n    # Redirect to Google Authorization Page\n    redirect_to GoogleCalendar.new.auth_uri\n\n  end\n\n  def token\n    # Get a auth_client object from Google API\n    @google_api = GoogleCalendar.new\n\n    @google_api.auth_client.code = params[:code] if params[:code]\n    response = @google_api.auth_client.fetch_access_token!\n\n    session[:access_token] = response['access_token']\n\n    # Whichever Controller/Action needed to handle what comes next\n    redirect_to new_event_path()\n  end\n\nend\n</code></pre>\n"}], "owner": {"reputation": 2387, "user_id": 4717992, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/SRrvm.jpg?s=128&g=1", "display_name": "Jonathan Soifer", "link": "https://stackoverflow.com/users/4717992/jonathan-soifer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 412, "favorite_count": 0, "accepted_answer_id": 41463454, "answer_count": 1, "score": 0, "last_activity_date": 1483531615, "creation_date": 1483465589, "last_edit_date": 1483466051, "question_id": 41449382, "link": "https://stackoverflow.com/questions/41449382/connecting-to-google-calendars-api-through-rails", "title": "Connecting to Google Calendar&#39;s API through Rails", "body": "<p>I'm creating a really simple Rails application with one specific purpose: add a Calendar event to a Google Calendar account.</p>\n\n<p>I'm following the <a href=\"https://developers.google.com/api-client-library/ruby/start/get_started\" rel=\"nofollow noreferrer\">Ruby Guide from the Google Calendar API</a>.</p>\n\n<p>I was able to run the provided testing code (Ruby only, no framework) but I'm having a hard time accessing the credentials from a Rails project and I'm not sure the proper (\"idiomatic\"?) way to do it and organize the project.</p>\n\n<p>Part of the process is using OAuth 2.0 since this goal requires access to Google User's private data (both read and write), I'm following the <a href=\"https://developers.google.com/api-client-library/ruby/auth/web-app\" rel=\"nofollow noreferrer\">Using OAuth 2.0 for Web Services</a> instructions.</p>\n\n<p>Right now I have several different questions regarding best practices and/or the proper way to organize code:</p>\n\n<ol>\n<li><p>Google provides a <em>client_secret.json</em> that have the credentials to access the application. Where should I keep it? Should I keep it in a <strong>.env</strong> file in the Development environment and (in my case) in Heroku's <em>ENV VARS</em> in the Production Environment?</p></li>\n<li><p>I tried keeping the <em>client_secret.json</em> file in the project's root folder (same path as the <em>Gemfile</em>), added it to the <em>.gitignore</em> but I wasn't able to <code>require \"#{Rails.root}/client_secret.json\"</code>:</p>\n\n<pre><code>/Users/jsoifer/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/gems/activesupport-5.0.1/lib/active_support/dependencies.rb:293:in `require': No such file to load -- /Users/jsoifer/Developer/Tiny-Things/tiny-booking/client_secret.json (LoadError)\n</code></pre></li>\n<li><p>I created a <code>services/</code> folder to put the Google Calendar related code inside, I wasn't sure if I should put is in a controller though. How should I organize this?</p></li>\n</ol>\n\n<p><strong>Important consideration:</strong>\nI'm not using any other method of Authentication/Authorization such as <em>Devise</em> or others and I'm not planning to do so right now. I just want to get Google's Authorization token and create a Calendar event.</p>\n\n<p><a href=\"https://github.com/tiny-things/tiny-booking\" rel=\"nofollow noreferrer\">Github Project Link</a></p>\n"}, {"tags": ["ruby-on-rails", "ruby", "macos", "rvm"], "comments": [{"owner": {"reputation": 38307, "user_id": 2057388, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ceef8c04f66cd0e2bd360ef6abc14a81?s=128&d=identicon&r=PG", "display_name": "\u0417\u0435\u043b\u0451\u043d\u044b\u0439", "link": "https://stackoverflow.com/users/2057388/%d0%97%d0%b5%d0%bb%d1%91%d0%bd%d1%8b%d0%b9"}, "edited": false, "score": 0, "creation_date": 1483465532, "post_id": 41449191, "comment_id": 70105065, "body": "Is the file <code>~&#47;.ruby-version</code> or exists in the home directory? Or maybe in the project directory? The ruby version also can be in the Gemfile of the project."}, {"owner": {"user_type": "does_not_exist", "display_name": "user7055375"}, "reply_to_user": {"reputation": 38307, "user_id": 2057388, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ceef8c04f66cd0e2bd360ef6abc14a81?s=128&d=identicon&r=PG", "display_name": "\u0417\u0435\u043b\u0451\u043d\u044b\u0439", "link": "https://stackoverflow.com/users/2057388/%d0%97%d0%b5%d0%bb%d1%91%d0%bd%d1%8b%d0%b9"}, "edited": false, "score": 0, "creation_date": 1483465680, "post_id": 41449191, "comment_id": 70105156, "body": "Yeah I thinik putting it in the Gemfile would be more foolproof.  HOw do I do that?"}, {"owner": {"reputation": 38307, "user_id": 2057388, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ceef8c04f66cd0e2bd360ef6abc14a81?s=128&d=identicon&r=PG", "display_name": "\u0417\u0435\u043b\u0451\u043d\u044b\u0439", "link": "https://stackoverflow.com/users/2057388/%d0%97%d0%b5%d0%bb%d1%91%d0%bd%d1%8b%d0%b9"}, "edited": false, "score": 0, "creation_date": 1483465729, "post_id": 41449191, "comment_id": 70105177, "body": "just add <code>ruby &quot;2.4.0&quot;</code> to the Gemfile."}, {"owner": {"user_type": "does_not_exist", "display_name": "user7055375"}, "reply_to_user": {"reputation": 38307, "user_id": 2057388, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ceef8c04f66cd0e2bd360ef6abc14a81?s=128&d=identicon&r=PG", "display_name": "\u0417\u0435\u043b\u0451\u043d\u044b\u0439", "link": "https://stackoverflow.com/users/2057388/%d0%97%d0%b5%d0%bb%d1%91%d0%bd%d1%8b%d0%b9"}, "edited": false, "score": 0, "creation_date": 1483465939, "post_id": 41449191, "comment_id": 70105290, "body": "I added this and then started my Rails server and got the erorr, &quot;Your Ruby version is 2.3.0, but your Gemfile specified 2.4.0&quot;."}, {"owner": {"reputation": 38307, "user_id": 2057388, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ceef8c04f66cd0e2bd360ef6abc14a81?s=128&d=identicon&r=PG", "display_name": "\u0417\u0435\u043b\u0451\u043d\u044b\u0439", "link": "https://stackoverflow.com/users/2057388/%d0%97%d0%b5%d0%bb%d1%91%d0%bd%d1%8b%d0%b9"}, "edited": false, "score": 0, "creation_date": 1483466366, "post_id": 41449191, "comment_id": 70105551, "body": "Place the file <code>.ruby-version</code> to the project directory with <code>2.4.0</code> and check again."}, {"owner": {"user_type": "does_not_exist", "display_name": "user7055375"}, "reply_to_user": {"reputation": 38307, "user_id": 2057388, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ceef8c04f66cd0e2bd360ef6abc14a81?s=128&d=identicon&r=PG", "display_name": "\u0417\u0435\u043b\u0451\u043d\u044b\u0439", "link": "https://stackoverflow.com/users/2057388/%d0%97%d0%b5%d0%bb%d1%91%d0%bd%d1%8b%d0%b9"}, "edited": false, "score": 0, "creation_date": 1483470270, "post_id": 41449191, "comment_id": 70107600, "body": "Am I also supposed to remove the &quot;ruby &#39;2.4.0&#39;&quot; declaration from the Gemfile?  Anyway, I did, and then created a file called &quot;.ruby-version&quot; at the root of my project directory with the line &quot;2.4.0&quot; (without quotes), but when I fire up &quot;rails console&quot;, the prompt is &quot;2.3.0 :001 &gt;&quot;, so I don&#39;t hink it worked."}], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user7055375"}, "edited": false, "score": 0, "creation_date": 1483465585, "post_id": 41449235, "comment_id": 70105092, "body": "That didn&#39;t work.  I ran that command, got this response, &quot;Warning! PATH is not properly set up, &#39;/Users/nataliab/.rvm/gems/ruby-2.3.0/bin&#39; is not at first place,          usually this is caused by shell initialization files - check them for &#39;PATH=...&#39; entries,          it might also help to re-add RVM to your dotfiles: &#39;rvm get stable --auto-dotfiles&#39;,          to fix temporarily in this shell session run: &#39;rvm use ruby-2.3.0&#39;.&quot; and then when i opened a new shell and ran &quot;ruby -v&quot; I got &quot;ruby 2.3.0p0 (2015-12-25 revision 53290) [x86_64-darwin16]&quot;."}, {"owner": {"reputation": 1072, "user_id": 3423825, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/007V9.jpg?s=128&g=1", "display_name": "Florent", "link": "https://stackoverflow.com/users/3423825/florent"}, "edited": false, "score": 0, "creation_date": 1489568945, "post_id": 41449235, "comment_id": 72723301, "body": "I need to complete the installation with <code>rvm use 2.4</code> to switch to the new binary."}], "tags": [], "owner": {"reputation": 9030, "user_id": 5101476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JCQrl.jpg?s=128&g=1", "display_name": "ice\u30c4", "link": "https://stackoverflow.com/users/5101476/ice%e3%83%84"}, "is_accepted": false, "score": 0, "last_activity_date": 1483465109, "creation_date": 1483465109, "answer_id": 41449235, "question_id": 41449191, "link": "https://stackoverflow.com/questions/41449191/installed-ruby-2-4-but-when-im-still-showing-ruby-2-3/41449235#41449235", "title": "Installed Ruby 2.4 but when I&#39;m still showing Ruby 2.3", "body": "<p>Change your default <em>ruby</em>:</p>\n\n<pre><code>$ rvm default ruby-2.4.0\n$ rvm list\n\n#rvm rubies\n\n#   ruby-2.3.0 [ x86_64 ]\n#=* ruby-2.4.0 [ x86_64 ]\n#   ruby-head [ x86_64 ]\n\n## =&gt; - current\n## =* - current &amp;&amp; default\n##  * - default\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 26, "user_id": 1957888, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf2f024655c5d959aa7e3e576434519c?s=128&d=identicon&r=PG", "display_name": "kikonen", "link": "https://stackoverflow.com/users/1957888/kikonen"}, "is_accepted": false, "score": 0, "last_activity_date": 1485204154, "last_edit_date": 1485204154, "creation_date": 1485201828, "answer_id": 41814636, "question_id": 41449191, "link": "https://stackoverflow.com/questions/41449191/installed-ruby-2-4-but-when-im-still-showing-ruby-2-3/41814636#41814636", "title": "Installed Ruby 2.4 but when I&#39;m still showing Ruby 2.3", "body": "<p>In project dir</p>\n\n<ul>\n<li>do not add any 'ruby \"2.4.0\"' line in Gemfile</li>\n<li>if there is .rvmrc file delete it</li>\n<li>create files (at least some rvm versions require both version and gemset files to exist)</li>\n</ul>\n\n<p>.ruby-version</p>\n\n<p><code>\n2.4.0\n</code></p>\n\n<p>.ruby-gemset\n<code>\napp\n</code></p>\n\n<p>Trigger rvm to reload them\n<code>\ncd .\nruby --version\nrvm gemset list\n</code></p>\n\n<ul>\n<li>install bundler for 2.4.0 (if it is missing)\n<code>\nrvm 2.4.0@global do gem install bundler\n</code></li>\n</ul>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user7055375"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1870, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1485204154, "creation_date": 1483464931, "question_id": 41449191, "link": "https://stackoverflow.com/questions/41449191/installed-ruby-2-4-but-when-im-still-showing-ruby-2-3", "title": "Installed Ruby 2.4 but when I&#39;m still showing Ruby 2.3", "body": "<p>I'm trying to intsall Ruby 2.4 on my Mac Sierra machine.  I thought i had done it successfully ...</p>\n\n<pre><code>localhost:myproject nataliab$ rvm use 2.4.0\nWarning! PATH is not properly set up, '/Users/nataliab/.rvm/gems/ruby-2.3.0/bin' is not at first place,\n         usually this is caused by shell initialization files - check them for 'PATH=...' entries,\n         it might also help to re-add RVM to your dotfiles: 'rvm get stable --auto-dotfiles',\n         to fix temporarily in this shell session run: 'rvm use ruby-2.3.0'.\nruby-2.4.0 is not installed.\nTo install do: 'rvm install ruby-2.4.0'\nlocalhost:myproject nataliab$ rvm install ruby-2.4.0\nWarning! PATH is not properly set up, '/Users/nataliab/.rvm/gems/ruby-2.3.0/bin' is not at first place,\n         usually this is caused by shell initialization files - check them for 'PATH=...' entries,\n         it might also help to re-add RVM to your dotfiles: 'rvm get stable --auto-dotfiles',\n         to fix temporarily in this shell session run: 'rvm use ruby-2.3.0'.\nWarning, new version of rvm available '1.28.0', you are using older version '1.26.11'.\nYou can disable this warning with:    echo rvm_autoupdate_flag=0 &gt;&gt; ~/.rvmrc\nYou can enable  auto-update  with:    echo rvm_autoupdate_flag=2 &gt;&gt; ~/.rvmrc\nSearching for binary rubies, this might take some time.\nNo binary rubies available for: osx/10.12/x86_64/ruby-2.4.0.\nContinuing with compilation. Please read 'rvm help mount' to get more information on binary rubies.\nChecking requirements for osx.\nUpdating certificates in '/usr/local/etc/openssl/cert.pem'.\nRequirements installation successful.\nWarning: DYLD_LIBRARY_PATH environment variable is set, this might interact with the compilation and ruby.\nInstalling Ruby from source to: /Users/nataliab/.rvm/rubies/ruby-2.4.0, this may take a while depending on your cpu(s)...\nruby-2.4.0 - #downloading ruby-2.4.0, this may take a while depending on your connection...\n  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current\n                                 Dload  Upload   Total   Spent    Left  Speed\n100 11.9M  100 11.9M    0     0  2715k      0  0:00:04  0:00:04 --:--:-- 2880k\nNo checksum for downloaded archive, recording checksum in user configuration.\nruby-2.4.0 - #extracting ruby-2.4.0 to /Users/nataliab/.rvm/src/ruby-2.4.0....\nruby-2.4.0 - #configuring..................................................................\nruby-2.4.0 - #post-configuration.\nruby-2.4.0 - #compiling.............................................................\nruby-2.4.0 - #installing.......\nruby-2.4.0 - #making binaries executable..\nInstalled rubygems 2.6.8 is newer than 2.4.8 provided with installed ruby, skipping installation, use --force to force  installation.\nruby-2.4.0 - #gemset created /Users/nataliab/.rvm/gems/ruby-2.4.0@global\nruby-2.4.0 - #importing gemset /Users/nataliab/.rvm/gemsets/global.gems...............................................\nruby-2.4.0 - #generating global wrappers........\nruby-2.4.0 - #gemset created /Users/nataliab/.rvm/gems/ruby-2.4.0\nruby-2.4.0 - #importing gemsetfile /Users/nataliab/.rvm/gemsets/default.gems evaluated to empty gem list\nruby-2.4.0 - #generating default wrappers........\nruby-2.4.0 - #adjusting #shebangs for (gem irb erb ri rdoc testrb rake).\nInstall of ruby-2.4.0 - #complete \nRuby was built without documentation, to build it run: rvm docs generate-ri\n</code></pre>\n\n<p>And then I see the right Ruby version ...</p>\n\n<pre><code>localhost:myproject nataliab$ ruby -v\nruby 2.4.0p0 (2016-12-24 revision 57164) [x86_64-darwin16]\n</code></pre>\n\n<p>But when I open up a new terminal window, navigate to my project directory, I no longer see the newly installed version ...</p>\n\n<pre><code>localhost:myproject nataliab$ ruby -v\nruby 2.3.0p0 (2015-12-25 revision 53290) [x86_64-darwin16]\n</code></pre>\n\n<p>How do I make my version stick? </p>\n"}, {"tags": ["ruby-on-rails", "ruby", "split"], "answers": [{"tags": [], "owner": {"reputation": 1777, "user_id": 3353157, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6168a2c2f5e3582addf6d9d70ce13749?s=128&d=identicon&r=PG", "display_name": "Peter Camilleri", "link": "https://stackoverflow.com/users/3353157/peter-camilleri"}, "is_accepted": false, "score": 0, "last_activity_date": 1483464841, "creation_date": 1483464841, "answer_id": 41449164, "question_id": 41448927, "link": "https://stackoverflow.com/questions/41448927/can-someone-explain-why-the-split-method-in-ruby-works-this-way/41449164#41449164", "title": "Can someone explain why the .split method in Ruby works this way?", "body": "<p>The pickaxe book says of string#split</p>\n\n<p>If the limit parameter is omitted, trailing empty fields are suppressed. ... If negative, there is no limit to the number of fields returned and trailing null [empty] fields are not suppressed. So:</p>\n\n<pre><code>irb(main):001:0&gt; \"aware\".split('e')\n=&gt; [\"awar\"]\nirb(main):002:0&gt; \"aware\".split('e',-1)\n=&gt; [\"awar\", \"\"]\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 93, "user_id": 7337500, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AhTrU.jpg?s=128&g=1", "display_name": "Joana B", "link": "https://stackoverflow.com/users/7337500/joana-b"}, "edited": false, "score": 0, "creation_date": 1483466295, "post_id": 41449254, "comment_id": 70105498, "body": "Thank you very much for such a great answer @dheerajsharma ! Explaining it through regular expressions is really helpful."}, {"owner": {"reputation": 372, "user_id": 4106275, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-phSDv3xKP8s/AAAAAAAAAAI/AAAAAAAAABQ/ML6imIkvol4/photo.jpg?sz=128", "display_name": "dheeraj Kumar", "link": "https://stackoverflow.com/users/4106275/dheeraj-kumar"}, "reply_to_user": {"reputation": 93, "user_id": 7337500, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AhTrU.jpg?s=128&g=1", "display_name": "Joana B", "link": "https://stackoverflow.com/users/7337500/joana-b"}, "edited": false, "score": 0, "creation_date": 1483467436, "post_id": 41449254, "comment_id": 70106111, "body": "Most Welcome @JoanaB"}], "tags": [], "owner": {"reputation": 372, "user_id": 4106275, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-phSDv3xKP8s/AAAAAAAAAAI/AAAAAAAAABQ/ML6imIkvol4/photo.jpg?sz=128", "display_name": "dheeraj Kumar", "link": "https://stackoverflow.com/users/4106275/dheeraj-kumar"}, "is_accepted": false, "score": 1, "last_activity_date": 1483465181, "creation_date": 1483465181, "answer_id": 41449254, "question_id": 41448927, "link": "https://stackoverflow.com/questions/41448927/can-someone-explain-why-the-split-method-in-ruby-works-this-way/41449254#41449254", "title": "Can someone explain why the .split method in Ruby works this way?", "body": "<p>Below is a simple example of behavioral oddity that String#split may seem to have:</p>\n\n<pre><code>\"1234\".split(/1/) # =&gt; [\"\", \"234\"]\n</code></pre>\n\n<p>It seems like the expected result of the above example would be [\u201c234\u201d] since it is splitting on the 1, but instead we\u2019re getting an unexpected empty string.\n**</p>\n\n<blockquote>\n  <p>How String#split works</p>\n</blockquote>\n\n<p>**\nInternally String#split only uses regular expression delimiters. If you pass in a string delimiter it will be escaped for a regular expression and then turned into a regular expression:</p>\n\n<pre><code>1 2 3 4\n \"1234\".split(\"1\") # is really the same as \"1234\".split( Regexp.new( Regexp.escape(\"1\") ) )\n</code></pre>\n\n<p>For the remainder of this article when I refer to delimiter I am referring to a regular expression delimiter since internally that is what String#split uses.\nString#split keeps track the track of five important pieces of information:</p>\n\n<ul>\n<li><p>the string itself</p>\n\n<p>a results array which is returned</p>\n\n<p>the position marking where to start matching the string against the\ndelimiter. This is the start position and is initialized to 0.</p>\n\n<p>the position marking where the string matched the delimiter. This is\nthe matched position and is initialized to 0.</p>\n\n<p>the position marking the offset immediately following where the\nstring matched the delimiter</p></li>\n</ul>\n\n<p>String#split operates in a loop. It continues to match the string against the delimiter until there are no more matches that can be found. It performs the following steps on each iteration:</p>\n\n<ul>\n<li>from the start position match the delimiter against the string</li>\n<li>set the matchedposition to where the delimiter matched the string</li>\n<li>if the delimiter didn\u2019t match the string then break the loop</li>\n<li>create a substring using the start and matched positions of the\nstring being matched. Push this substring onto the results array</li>\n<li>set the start position for the next iteration</li>\n</ul>\n\n<p>With this knowledge let\u2019s discuss how String#split handles the previous example of:</p>\n\n<pre><code>\"1234\".split(/1/) # =&gt; [\"\", \"234\"]\n</code></pre>\n\n<ul>\n<li>the first loop</li>\n<li>the start position is initialized to 0</li>\n<li>the delimiter is matched against the string \u201c1234\u201d</li>\n<li>the first match occurs with the first character, \u201c1\u201d which is at\nposition 0. This sets the matched position to 0.</li>\n<li>a substring is created using the start and matched positions and\npushed onto our result array. This gives us string[start,end] which\ntranslates to \u201c1234\u201d[0,0] which returns an empty string.</li>\n<li>the start position is reset to position 1</li>\n<li>The second loop</li>\n<li>start is now 1</li>\n<li>The delimiter is matched against the remainder of our string, \u201c234\u201d</li>\n<li>No match is found so the loop is finished.</li>\n<li>A substring is created using the start position and remainder of the\nstring and pushed onto the results array</li>\n<li>the results array is returned</li>\n</ul>\n\n<p>Given how String#split works it is easy to see why we have that unexpected empty string in our results array. You should note that this only occurred because the regular expression matched our string at the first character. Below is an example where the delimiter doesn\u2019t match the first character and there is no empty string:</p>\n\n<pre><code>\"1234\".split(/2/) # =&gt; [\"1\", \"34\"]\n</code></pre>\n"}], "owner": {"reputation": 93, "user_id": 7337500, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AhTrU.jpg?s=128&g=1", "display_name": "Joana B", "link": "https://stackoverflow.com/users/7337500/joana-b"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 258, "favorite_count": 0, "closed_date": 1483464895, "answer_count": 2, "score": 1, "last_activity_date": 1483465181, "creation_date": 1483463984, "question_id": 41448927, "link": "https://stackoverflow.com/questions/41448927/can-someone-explain-why-the-split-method-in-ruby-works-this-way", "closed_reason": "Duplicate", "title": "Can someone explain why the .split method in Ruby works this way?", "body": "<p>Why does .split create an empty character when its argument is the first letter of the string, and it doesn't do the same when the argument is the last letter of the string? In the second example, doesn't it \"say\", since nothing is on my right I'll output \"\" ? (Is there a 'nil' at the end of the string?)</p>\n\n<p>I know this is not a very relevant question, however, I'd like to understand why the method behaves this way. Thank you!</p>\n\n<pre><code>string = \"aware\"\nstring.split(\"a\") --&gt; # outputs: [\"\", \"w\", \"re\"]\nstring.split(\"e\") --&gt; # outputs: [\"awar\"]\n</code></pre>\n"}, {"tags": ["ruby", "selenium-webdriver", "watir", "watir-webdriver"], "answers": [{"comments": [{"owner": {"reputation": 45, "user_id": 6499282, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b688829af47fdaa85dcaaf3688131ee9?s=128&d=identicon&r=PG", "display_name": "Becks303", "link": "https://stackoverflow.com/users/6499282/becks303"}, "edited": false, "score": 0, "creation_date": 1483464322, "post_id": 41448853, "comment_id": 70104448, "body": "Makes sense and makes it easy, thank you, also for very fast answer as always"}, {"owner": {"reputation": 2183, "user_id": 1869007, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a5485a7313b368471cfe092e95fd7bea?s=128&d=identicon&r=PG", "display_name": "Lucas Tierney", "link": "https://stackoverflow.com/users/1869007/lucas-tierney"}, "edited": false, "score": 0, "creation_date": 1483470745, "post_id": 41448853, "comment_id": 70107859, "body": "Can you accept the answer so people will know it has been answered?"}], "tags": [], "owner": {"reputation": 44680, "user_id": 1200545, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fbbfea5f6583c16f96fc11ef821cfeee?s=128&d=identicon&r=PG&f=1", "display_name": "Justin Ko", "link": "https://stackoverflow.com/users/1200545/justin-ko"}, "is_accepted": true, "score": 5, "last_activity_date": 1483463694, "creation_date": 1483463694, "answer_id": 41448853, "question_id": 41448473, "link": "https://stackoverflow.com/questions/41448473/watir-scroll-gives-an-error-when-scrolling-to-element/41448853#41448853", "title": "Watir-scroll gives an error when scrolling to element", "body": "<p>As of <a href=\"https://github.com/p0deje/watir-scroll/commit/bf1bc3988939455979a2c6ccb9b57b96f8683309\" rel=\"noreferrer\">Watir-Scroll v0.2</a>, the browser-level scrolling no longer supports scrolling to an element.</p>\n\n<p>The equivalent of:</p>\n\n<pre><code>@browser.scroll.to page_element_xy\n</code></pre>\n\n<p>Is now:</p>\n\n<pre><code>page_element_xy.scroll.to :top\n</code></pre>\n\n<p>Scrolling to the top of the element is the default, so you can simply do:</p>\n\n<pre><code>page_element_xy.scroll.to\n</code></pre>\n"}], "owner": {"reputation": 45, "user_id": 6499282, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b688829af47fdaa85dcaaf3688131ee9?s=128&d=identicon&r=PG", "display_name": "Becks303", "link": "https://stackoverflow.com/users/6499282/becks303"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 793, "favorite_count": 0, "accepted_answer_id": 41448853, "answer_count": 1, "score": 4, "last_activity_date": 1483464673, "creation_date": 1483462391, "last_edit_date": 1483464673, "question_id": 41448473, "link": "https://stackoverflow.com/questions/41448473/watir-scroll-gives-an-error-when-scrolling-to-element", "title": "Watir-scroll gives an error when scrolling to element", "body": "<p>Just got an unknown error when I try to <code>scroll.to</code> a specific element. For example with:</p>\n\n<pre><code>@browser.scroll.to page_element_xy\n#=&gt; \"Don't know how to scroll to: #&lt; Watir::Div:0x... &gt;! (ArgumentError)\"\n</code></pre>\n\n<p>The normal <code>scroll.to</code> <code>:top</code> / <code>:bottom</code> is still working somehow.</p>\n\n<p>Is just the DIV the problem or has the <code>scroll.to</code> function changed in general?</p>\n\n<p>On search, I found the following that worked for me:</p>\n\n<pre><code>page_element_xy.scroll.to :center\n</code></pre>\n\n<p>Would be nice to know what is recommended for now.</p>\n"}, {"tags": ["ruby", "junos-automation"], "answers": [{"tags": [], "owner": {"reputation": 11, "user_id": 2194283, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/10561ee7bc677fda89afbc23f5ff1a43?s=128&d=identicon&r=PG", "display_name": "Dwarakanath", "link": "https://stackoverflow.com/users/2194283/dwarakanath"}, "is_accepted": false, "score": 1, "last_activity_date": 1483463040, "creation_date": 1483463040, "answer_id": 41448672, "question_id": 41448345, "link": "https://stackoverflow.com/questions/41448345/executing-multiple-junos-router-commands-with-ruby/41448672#41448672", "title": "Executing multiple JUNOS router commands with ruby", "body": "<p>Have you checked <a href=\"https://github.com/Juniper/net-netconf\" rel=\"nofollow noreferrer\">https://github.com/Juniper/net-netconf</a>? It is a Ruby Gem for doing NETCONF based interactions with Junos devices.</p>\n"}, {"tags": [], "owner": {"reputation": 466, "user_id": 5723106, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/ROQ9Q.jpg?s=128&g=1", "display_name": "Nitin Kr", "link": "https://stackoverflow.com/users/5723106/nitin-kr"}, "is_accepted": false, "score": 0, "last_activity_date": 1483463423, "creation_date": 1483463423, "answer_id": 41448776, "question_id": 41448345, "link": "https://stackoverflow.com/questions/41448345/executing-multiple-junos-router-commands-with-ruby/41448776#41448776", "title": "Executing multiple JUNOS router commands with ruby", "body": "<p>You should use RubyEZ.</p>\n\n<p>Refer: <a href=\"https://github.com/Juniper/ruby-junos-ez-stdlib\" rel=\"nofollow noreferrer\">https://github.com/Juniper/ruby-junos-ez-stdlib</a></p>\n\n<p>to get the configuration of the device, we have get-configuration rpc.</p>\n\n<pre><code>data = ndev.rpc.get_configuration                   # Junos specific RPC\nputs \"Showing 'policy-options' hierarchy ...\"\nputs cfgall.xpath('policy-options')  \n</code></pre>\n\n<p>To call operational rpc (for ex \"show chassis hardware\" corresponds to get-chassis-inventory rpc), hence</p>\n\n<pre><code>data = ndev.rpc.get_chassis_inventory  \n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 25, "user_id": 2965792, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dafc6cffe9ad818112e2b48eee99391b?s=128&d=identicon&r=PG&f=1", "display_name": "CraigD", "link": "https://stackoverflow.com/users/2965792/craigd"}, "edited": false, "score": 0, "creation_date": 1483480957, "post_id": 41450111, "comment_id": 70112584, "body": "That works manually, but for some reason I never see the output when I do it via my script.  Looking at RubyEZ now.  Thanks!"}], "tags": [], "owner": {"reputation": 1, "user_id": 6755466, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WWcqE.jpg?s=128&g=1", "display_name": "Diogo Montagner", "link": "https://stackoverflow.com/users/6755466/diogo-montagner"}, "is_accepted": false, "score": 0, "last_activity_date": 1483468306, "creation_date": 1483468306, "answer_id": 41450111, "question_id": 41448345, "link": "https://stackoverflow.com/questions/41448345/executing-multiple-junos-router-commands-with-ruby/41450111#41450111", "title": "Executing multiple JUNOS router commands with ruby", "body": "<p>Although I would recommend you to use RubyEZ libraries, your problem is related to the fact that you are trying to execute a configuration syntax command in the operational mode.</p>\n\n<p>Here is your problem:</p>\n\n<pre><code>commands: [\"configure\", \"show policy-options prefix-list greautomation-676872\"]\n</code></pre>\n\n<p>Make the following changes:</p>\n\n<ul>\n<li>remove the \"configure\" command</li>\n<li>replace \"show policy-options prefix-list greautomation-676872\" with \"show configuration policy-options prefix-list greautomation-676872\"</li>\n</ul>\n\n<p>This should solve your problem.</p>\n\n<p>I highly recommend you to look into RubyEZ libraries from Juniper.</p>\n"}], "owner": {"reputation": 25, "user_id": 2965792, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dafc6cffe9ad818112e2b48eee99391b?s=128&d=identicon&r=PG&f=1", "display_name": "CraigD", "link": "https://stackoverflow.com/users/2965792/craigd"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 244, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1483468306, "creation_date": 1483461997, "question_id": 41448345, "link": "https://stackoverflow.com/questions/41448345/executing-multiple-junos-router-commands-with-ruby", "title": "Executing multiple JUNOS router commands with ruby", "body": "<p>Has anyone tried to execute multiple commands in a JUNOS router using ruby with the net/ssh and net/ssh/telnet gems where you have to go into configure mode?  It never wants to accept the configure commands and I don't know why. </p>\n\n<p>Here is my code:</p>\n\n<pre><code>def exec_router(host_type, commands)\n  puts \"commands: #{commands}\"\n  output = \"\"\n  ssh = Net::SSH.start(HOST_MAP[host_type], QA_USER, :password =&gt; QA_USER_PASSWORD)\n  t = Net::SSH::Telnet.new(\"Session\" =&gt; ssh, \"Prompt\" =&gt; /.+@.+&gt;/, \"Output_log\" =&gt; \"/tmp/test.outputi\")\n  commands.each { |command| output &lt;&lt; t.cmd(command) }\n  puts output\n  t.close\n  ssh.close\nend\n</code></pre>\n\n<p>And here is the output that it produces:</p>\n\n<pre><code>  commands: [\"configure\", \"show policy-options prefix-list greautomation-676872\"]\n  configure\n              ^\n  unknown command.\n\n  {master:member0-re0}\n  qa@c1.lab5&gt; show policy-options\n                   ^\n  syntax error, expecting &lt;command&gt;.\n</code></pre>\n\n<p>qa@c1.lab5> show policy-optionsprefix-list\n                       ^\n      syntax error, expecting .\nqa@c1.lab5> show policy-optionsprefix-listgreautomation-676872\n                       ^\n      syntax error, expecting .</p>\n\n<p>I know my ssh/telnet stuff is working because I can replace the block that iterates through the command array with t.cmd('?') and I get the expected output with no errors.</p>\n\n<p>My Junos version is 15.1F6-S3.8 and I am using ruby 2.3.0.</p>\n\n<p>Thanks in advance</p>\n\n<p>Craig</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "socks", "net-http", "tcpsocket"], "comments": [{"owner": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "edited": false, "score": 0, "creation_date": 1484047132, "post_id": 41448100, "comment_id": 70339072, "body": "Do you use <code>socksify</code>?"}, {"owner": {"reputation": 16802, "user_id": 1235929, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/9f460ae7deb6fa19034c810a53b9fbac?s=128&d=identicon&r=PG", "display_name": "Dave", "link": "https://stackoverflow.com/users/1235929/dave"}, "reply_to_user": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "edited": false, "score": 0, "creation_date": 1484065074, "post_id": 41448100, "comment_id": 70351430, "body": "Yes.  I edited my question to include all the require statements."}, {"owner": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "edited": false, "score": 0, "creation_date": 1484085703, "post_id": 41448100, "comment_id": 70363378, "body": "Which Rails are you using exactly?"}, {"owner": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "edited": false, "score": 0, "creation_date": 1484506540, "post_id": 41448100, "comment_id": 70528249, "body": "The code in my answer works just fine with your Gemfile."}, {"owner": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "edited": false, "score": 0, "creation_date": 1484665523, "post_id": 41448100, "comment_id": 70596844, "body": "Thanks for the bounty. Did you manage to make it work?"}], "answers": [{"comments": [{"owner": {"reputation": 16802, "user_id": 1235929, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/9f460ae7deb6fa19034c810a53b9fbac?s=128&d=identicon&r=PG", "display_name": "Dave", "link": "https://stackoverflow.com/users/1235929/dave"}, "edited": false, "score": 0, "creation_date": 1484065245, "post_id": 41568257, "comment_id": 70351565, "body": "Let me ask this -- if you change this line &quot;res1 = Net::HTTP.SOCKSProxy(nil, nil).start(uri.host, uri.port, :use_ssl =&gt; (uri.scheme == &quot;https&quot;)) do |http|&quot; to &#39;res1 = Net::HTTP.SOCKSProxy(&quot;bogus&quot;, &quot;bogus&quot;).start(uri.host, uri.port, :use_ssl =&gt; (uri.scheme == &quot;https&quot;)) do |http|&#39; (note the &quot;bogus&quot; params), does your call fail or succeed?  Mine succeeds with bogus params and I suspect this is related to my problem."}, {"owner": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "reply_to_user": {"reputation": 16802, "user_id": 1235929, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/9f460ae7deb6fa19034c810a53b9fbac?s=128&d=identicon&r=PG", "display_name": "Dave", "link": "https://stackoverflow.com/users/1235929/dave"}, "edited": false, "score": 0, "creation_date": 1484065796, "post_id": 41568257, "comment_id": 70351968, "body": "It throws an exception (see update). Do you use <code>tsocks</code>, or possibly some specific environment variables?"}, {"owner": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "reply_to_user": {"reputation": 16802, "user_id": 1235929, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/9f460ae7deb6fa19034c810a53b9fbac?s=128&d=identicon&r=PG", "display_name": "Dave", "link": "https://stackoverflow.com/users/1235929/dave"}, "edited": false, "score": 0, "creation_date": 1484065900, "post_id": 41568257, "comment_id": 70352022, "body": "What happens inside <code>require &quot;resolv-replace.rb&quot;</code>?"}, {"owner": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "reply_to_user": {"reputation": 16802, "user_id": 1235929, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/9f460ae7deb6fa19034c810a53b9fbac?s=128&d=identicon&r=PG", "display_name": "Dave", "link": "https://stackoverflow.com/users/1235929/dave"}, "edited": false, "score": 0, "creation_date": 1484067389, "post_id": 41568257, "comment_id": 70353038, "body": "What happens when you run the test script as stand alone ruby, with your socks port(s)?"}, {"owner": {"reputation": 16802, "user_id": 1235929, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/9f460ae7deb6fa19034c810a53b9fbac?s=128&d=identicon&r=PG", "display_name": "Dave", "link": "https://stackoverflow.com/users/1235929/dave"}, "edited": false, "score": 0, "creation_date": 1484069242, "post_id": 41568257, "comment_id": 70354280, "body": "I included my Gemfile in my question, but let me fire up a &quot;rails console&quot; to test this in isolation as you suggest."}], "tags": [], "owner": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "is_accepted": true, "score": 1, "last_activity_date": 1484506506, "last_edit_date": 1484506506, "creation_date": 1484049313, "answer_id": 41568257, "question_id": 41448100, "link": "https://stackoverflow.com/questions/41448100/how-do-i-set-tcpsocket-attributes-for-only-a-method-and-not-globally/41568257#41568257", "title": "How do I set TCPSocket attributes for only a method and not globally?", "body": "<h1>Notes</h1>\n\n<blockquote>\n  <p>Please don't say set the parameters here</p>\n  \n  <p>res1 = Net::HTTP.SOCKSProxy(nil, nil)</p>\n</blockquote>\n\n<p>Sorry, but I'll have to say that you should set those parameters. :)</p>\n\n<p>I couldn't get your example to work when setting <code>TCPSocket::socks_server</code>, but it worked just fine when using <code>Net::HTTP.SOCKSProxy(socks_server, socks_port)</code>.</p>\n\n<p>I used :</p>\n\n<pre><code>$ ruby -v &amp;&amp; gem list socksify\nruby 2.3.1p112 (2016-04-26 revision 54768) [x86_64-linux]\n*** LOCAL GEMS ***\nsocksify (1.7.0)\n</code></pre>\n\n<h1>Setup</h1>\n\n<p>On a linux client, I connect to two linux servers with those commands, in 2 separate terminals at the same time :</p>\n\n<pre><code>ssh -D 1085 linux_server1 -N\nssh -D 1084 linux_server2 -N\n</code></pre>\n\n<p>I now have 2 Socks proxies on my client, running on port 1084 and 1085.</p>\n\n<h1>Test</h1>\n\n<p>The methods connect to [<code>http://whatismyip.akamai.com</code>][1] to check if the SOCKS proxy is being used.</p>\n\n<pre><code>require 'socket'\nrequire 'socksify'\nrequire 'socksify/http'\nrequire 'uri'\nrequire 'net/http'\n\ndef translate_ips(str)\n  my_ips = {\n    \"XXX.XXX.XXX.XXX\" =&gt; 'local_ip  :(',\n    \"YYY.YYY.YYY.YYY\" =&gt; 'socks_ip1 :D',\n    \"ZZZ.ZZZ.ZZZ.ZZZ\" =&gt; 'socks_ip2 :D'\n  }\n  str.gsub(/\\d{1,3}\\.\\d{1,3}\\.\\d{1,3}.\\d{1,3}/,my_ips)\nend\n\ndef get_content_via_socks_v1(socks_server, socks_port, url, headers)\n  TCPSocket::socks_server = socks_server\n  TCPSocket::socks_port = socks_port \n  uri = URI(url)\n  res1 = Net::HTTP.SOCKSProxy(nil, nil).start(uri.host, uri.port, :use_ssl =&gt; (uri.scheme == \"https\")) do |http|\n    http.read_timeout = 500\n    puts \"launching #{uri} on #{socks_server}:#{socks_port}\"\n    resp = http.get(uri, initheader = headers)\n  end\nend\n\ndef get_content_via_socks_v2(socks_server, socks_port, url, headers)\n  uri = URI(url)\n  Net::HTTP.SOCKSProxy(socks_server, socks_port).start(uri.host, uri.port, use_ssl: (uri.scheme == 'https')) do |http|\n    http.read_timeout = 500\n    puts \"launching #{uri} on #{socks_server}:#{socks_port}\"\n    http.get(uri, headers)\n  end\nend\n\nputs translate_ips(get_content_via_socks_v1('localhost', 1085, 'http://whatismyip.akamai.com', nil).body)\nputs translate_ips(get_content_via_socks_v1('localhost', 1084, 'http://whatismyip.akamai.com', nil).body)\nputs\nputs translate_ips(get_content_via_socks_v2('localhost', 1085, 'http://whatismyip.akamai.com', nil).body)\nputs translate_ips(get_content_via_socks_v2('localhost', 1084, 'http://whatismyip.akamai.com', nil).body)\n</code></pre>\n\n<p>It outputs :</p>\n\n<pre><code>launching http://whatismyip.akamai.com on localhost:1085\nlocal_ip  :(\nlaunching http://whatismyip.akamai.com on localhost:1084\nlocal_ip  :(\n\nlaunching http://whatismyip.akamai.com on localhost:1085\nsocks_ip1 :D\nlaunching http://whatismyip.akamai.com on localhost:1084\nsocks_ip2 :D\n</code></pre>\n\n<p>The <code>Net::HTTP.SOCKSProxy(socks_server, socks_port)</code> version works just fine!</p>\n\n<p>If I try to use <code>Net::HTTP.SOCKSProxy(\"bogus\", \"bogus\")</code>, the method raises an exception:</p>\n\n<pre><code>in `rescue in block in connect': Failed to open TCP connection to whatismyip.akamai.com:80 (getaddrinfo: Servname not supported for ai_socktype) (SocketError)\n</code></pre>\n\n<h1>Multiple threads</h1>\n\n<p>Setting <code>TCPSocket::socks_server</code> at the beginning of the method wouldn't be thread-safe.</p>\n\n<p>Using a <code>Net::HTTP.SOCKSProxy</code> with a block should prevent race-conditions :</p>\n\n<pre><code>threads = []\n10.times do\n  sleep 0.1\n  threads &lt;&lt; Thread.new { puts translate_ips(get_content_via_socks_v2('localhost', 1085, 'http://whatismyip.akamai.com', nil).body)}\n  threads &lt;&lt; Thread.new { puts translate_ips(get_content_via_socks_v2('localhost', 1084, 'http://whatismyip.akamai.com', nil).body)}\nend\n\nthreads.join\n</code></pre>\n\n<p>It outputs :</p>\n\n<pre><code>launching http://whatismyip.akamai.com on localhost:1084\nsocks_ip2 :D\nlaunching http://whatismyip.akamai.com on localhost:1085\nsocks_ip1 :D\nlaunching http://whatismyip.akamai.com on localhost:1084\nsocks_ip2 :D\nlaunching http://whatismyip.akamai.com on localhost:1085\nsocks_ip1 :D\nlaunching http://whatismyip.akamai.com on localhost:1084\nsocks_ip2 :D\nlaunching http://whatismyip.akamai.com on localhost:1085\nsocks_ip1 :D\nlaunching http://whatismyip.akamai.com on localhost:1084\nsocks_ip2 :D\nlaunching http://whatismyip.akamai.com on localhost:1085\nsocks_ip1 :D\nlaunching http://whatismyip.akamai.com on localhost:1084\nsocks_ip2 :D\nlaunching http://whatismyip.akamai.com on localhost:1085\nsocks_ip1 :D\nlaunching http://whatismyip.akamai.com on localhost:1084\nsocks_ip2 :D\nlaunching http://whatismyip.akamai.com on localhost:1085\nsocks_ip1 :D\nlaunching http://whatismyip.akamai.com on localhost:1084\nsocks_ip2 :D\nlaunching http://whatismyip.akamai.com on localhost:1085\nsocks_ip1 :D\nlaunching http://whatismyip.akamai.com on localhost:1084\nsocks_ip2 :D\nlaunching http://whatismyip.akamai.com on localhost:1085\nsocks_ip1 :D\nlaunching http://whatismyip.akamai.com on localhost:1084\nsocks_ip2 :D\nlaunching http://whatismyip.akamai.com on localhost:1085\nsocks_ip1 :D\n</code></pre>\n\n<h1>Test with your Gemfile</h1>\n\n<p>With </p>\n\n<pre><code>ruby 2.3.1p112 (2016-04-26 revision 54768) [x86_64-linux]\n</code></pre>\n\n<p>and your Gemfile on Linux Mint 17, the script above worked just fine when launched with</p>\n\n<pre><code>rails runner get_content_via_socks.rb\n</code></pre>\n\n<p>I created an empty Gemset and only added your gems. The resulting <code>Gemfile.lock</code> was :</p>\n\n<pre><code>GEM\n  remote: https://rubygems.org/\n  specs:\n    Ascii85 (1.0.2)\n    actioncable (5.0.1)\n      actionpack (= 5.0.1)\n      nio4r (~&gt; 1.2)\n      websocket-driver (~&gt; 0.6.1)\n    actionmailer (5.0.1)\n      actionpack (= 5.0.1)\n      actionview (= 5.0.1)\n      activejob (= 5.0.1)\n      mail (~&gt; 2.5, &gt;= 2.5.4)\n      rails-dom-testing (~&gt; 2.0)\n    actionpack (5.0.1)\n      actionview (= 5.0.1)\n      activesupport (= 5.0.1)\n      rack (~&gt; 2.0)\n      rack-test (~&gt; 0.6.3)\n      rails-dom-testing (~&gt; 2.0)\n      rails-html-sanitizer (~&gt; 1.0, &gt;= 1.0.2)\n    actionview (5.0.1)\n      activesupport (= 5.0.1)\n      builder (~&gt; 3.1)\n      erubis (~&gt; 2.7.0)\n      rails-dom-testing (~&gt; 2.0)\n      rails-html-sanitizer (~&gt; 1.0, &gt;= 1.0.2)\n    activejob (5.0.1)\n      activesupport (= 5.0.1)\n      globalid (&gt;= 0.3.6)\n    activemodel (5.0.1)\n      activesupport (= 5.0.1)\n    activerecord (5.0.1)\n      activemodel (= 5.0.1)\n      activesupport (= 5.0.1)\n      arel (~&gt; 7.0)\n    activerecord-import (0.16.2)\n      activerecord (&gt;= 3.2)\n    activesupport (5.0.1)\n      concurrent-ruby (~&gt; 1.0, &gt;= 1.0.2)\n      i18n (~&gt; 0.7)\n      minitest (~&gt; 5.1)\n      tzinfo (~&gt; 1.1)\n    addressable (2.5.0)\n      public_suffix (~&gt; 2.0, &gt;= 2.0.2)\n    afm (0.2.2)\n    arel (7.1.4)\n    autoprefixer-rails (6.6.1)\n      execjs\n    bootstrap-sass (3.3.7)\n      autoprefixer-rails (&gt;= 5.2.1)\n      sass (&gt;= 3.3.4)\n    builder (3.2.3)\n    byebug (9.0.6)\n    chronic (0.10.2)\n    chunky_png (1.3.8)\n    coffee-rails (4.2.1)\n      coffee-script (&gt;= 2.2.0)\n      railties (&gt;= 4.0.0, &lt; 5.2.x)\n    coffee-script (2.4.1)\n      coffee-script-source\n      execjs\n    coffee-script-source (1.12.2)\n    compass (1.0.3)\n      chunky_png (~&gt; 1.2)\n      compass-core (~&gt; 1.0.2)\n      compass-import-once (~&gt; 1.0.5)\n      rb-fsevent (&gt;= 0.9.3)\n      rb-inotify (&gt;= 0.9)\n      sass (&gt;= 3.3.13, &lt; 3.5)\n    compass-core (1.0.3)\n      multi_json (~&gt; 1.0)\n      sass (&gt;= 3.3.0, &lt; 3.5)\n    compass-import-once (1.0.5)\n      sass (&gt;= 3.2, &lt; 3.5)\n    compass-rails (3.0.2)\n      compass (~&gt; 1.0.0)\n      sass-rails (&lt; 5.1)\n      sprockets (&lt; 4.0)\n    concurrent-ruby (1.0.4)\n    debug_inspector (0.0.2)\n    erubis (2.7.0)\n    execjs (2.7.0)\n    faraday (0.10.1)\n      multipart-post (&gt;= 1.2, &lt; 3)\n    ffi (1.9.17)\n    globalid (0.3.7)\n      activesupport (&gt;= 4.1.0)\n    hashery (2.1.2)\n    hashie (3.4.6)\n    i18n (0.7.0)\n    jquery-rails (4.2.2)\n      rails-dom-testing (&gt;= 1, &lt; 3)\n      railties (&gt;= 4.2.0)\n      thor (&gt;= 0.14, &lt; 2.0)\n    jquery-turbolinks (2.1.0)\n      railties (&gt;= 3.1.0)\n      turbolinks\n    jquery-ui-rails (6.0.1)\n      railties (&gt;= 3.2.16)\n    json (2.0.3)\n    jwt (1.5.6)\n    kgio (2.11.0)\n    libv8 (3.16.14.17)\n    listen (3.0.8)\n      rb-fsevent (~&gt; 0.9, &gt;= 0.9.4)\n      rb-inotify (~&gt; 0.9, &gt;= 0.9.7)\n    loofah (2.0.3)\n      nokogiri (&gt;= 1.5.9)\n    mail (2.6.4)\n      mime-types (&gt;= 1.16, &lt; 4)\n    method_source (0.8.2)\n    mime-types (3.1)\n      mime-types-data (~&gt; 3.2015)\n    mime-types-data (3.2016.0521)\n    mini_portile2 (2.1.0)\n    minitest (5.10.1)\n    multi_json (1.12.1)\n    multi_xml (0.6.0)\n    multipart-post (2.0.0)\n    nio4r (1.2.1)\n    nokogiri (1.7.0.1)\n      mini_portile2 (~&gt; 2.1.0)\n    oauth (0.5.1)\n    oauth2 (1.3.0)\n      faraday (&gt;= 0.8, &lt; 0.11)\n      jwt (~&gt; 1.0)\n      multi_json (~&gt; 1.3)\n      multi_xml (~&gt; 0.5)\n      rack (&gt;= 1.2, &lt; 3)\n    omniauth (1.3.1)\n      hashie (&gt;= 1.2, &lt; 4)\n      rack (&gt;= 1.0, &lt; 3)\n    omniauth-facebook (4.0.0)\n      omniauth-oauth2 (~&gt; 1.2)\n    omniauth-google-oauth2 (0.4.1)\n      jwt (~&gt; 1.5.2)\n      multi_json (~&gt; 1.3)\n      omniauth (&gt;= 1.1.1)\n      omniauth-oauth2 (&gt;= 1.3.1)\n    omniauth-linkedin-oauth2 (0.1.5)\n      omniauth (~&gt; 1.0)\n      omniauth-oauth2\n    omniauth-oauth (1.1.0)\n      oauth\n      omniauth (~&gt; 1.0)\n    omniauth-oauth2 (1.3.1)\n      oauth2 (~&gt; 1.0)\n      omniauth (~&gt; 1.2)\n    omniauth-twitter (1.3.0)\n      omniauth-oauth (~&gt; 1.1)\n      rack\n    pdf-reader (1.4.1)\n      Ascii85 (~&gt; 1.0.0)\n      afm (~&gt; 0.2.1)\n      hashery (~&gt; 2.0)\n      ruby-rc4\n      ttfunk\n    pg (0.19.0)\n    public_suffix (2.0.5)\n    puma (3.6.2)\n    pundit (1.1.0)\n      activesupport (&gt;= 3.0.0)\n    rack (2.0.1)\n    rack-test (0.6.3)\n      rack (&gt;= 1.0)\n    rails (5.0.1)\n      actioncable (= 5.0.1)\n      actionmailer (= 5.0.1)\n      actionpack (= 5.0.1)\n      actionview (= 5.0.1)\n      activejob (= 5.0.1)\n      activemodel (= 5.0.1)\n      activerecord (= 5.0.1)\n      activesupport (= 5.0.1)\n      bundler (&gt;= 1.3.0, &lt; 2.0)\n      railties (= 5.0.1)\n      sprockets-rails (&gt;= 2.0.0)\n    rails-dom-testing (2.0.2)\n      activesupport (&gt;= 4.2.0, &lt; 6.0)\n      nokogiri (~&gt; 1.6)\n    rails-html-sanitizer (1.0.3)\n      loofah (~&gt; 2.0)\n    railties (5.0.1)\n      actionpack (= 5.0.1)\n      activesupport (= 5.0.1)\n      method_source\n      rake (&gt;= 0.8.7)\n      thor (&gt;= 0.18.1, &lt; 2.0)\n    raindrops (0.17.0)\n    rake (12.0.0)\n    rb-fsevent (0.9.8)\n    rb-inotify (0.9.7)\n      ffi (&gt;= 0.5.0)\n    ref (2.0.0)\n    roo (2.7.1)\n      nokogiri (~&gt; 1)\n      rubyzip (~&gt; 1.1, &lt; 2.0.0)\n    roo-xls (1.0.0)\n      nokogiri\n      roo (&gt;= 2.0.0beta1, &lt; 3)\n      spreadsheet (&gt; 0.9.0)\n    ruby-ole (1.2.12)\n    ruby-rc4 (0.1.5)\n    rubyzip (1.2.0)\n    sass (3.4.23)\n    sass-rails (5.0.6)\n      railties (&gt;= 4.0.0, &lt; 6)\n      sass (~&gt; 3.1)\n      sprockets (&gt;= 2.8, &lt; 4.0)\n      sprockets-rails (&gt;= 2.0, &lt; 4.0)\n      tilt (&gt;= 1.1, &lt; 3)\n    socksify (1.7.0)\n    spreadsheet (1.1.4)\n      ruby-ole (&gt;= 1.0)\n    spring (2.0.0)\n      activesupport (&gt;= 4.2)\n    spring-watcher-listen (2.0.1)\n      listen (&gt;= 2.7, &lt; 4.0)\n      spring (&gt;= 1.2, &lt; 3.0)\n    sprockets (3.7.1)\n      concurrent-ruby (~&gt; 1.0)\n      rack (&gt; 1, &lt; 3)\n    sprockets-rails (3.2.0)\n      actionpack (&gt;= 4.0)\n      activesupport (&gt;= 4.0)\n      sprockets (&gt;= 3.0.0)\n    therubyracer (0.12.3)\n      libv8 (~&gt; 3.16.14.15)\n      ref\n    thor (0.19.4)\n    thread_safe (0.3.5)\n    tilt (2.0.5)\n    ttfunk (1.4.0)\n    turbolinks (5.0.1)\n      turbolinks-source (~&gt; 5)\n    turbolinks-source (5.0.0)\n    tzinfo (1.2.2)\n      thread_safe (~&gt; 0.1)\n    uglifier (3.0.4)\n      execjs (&gt;= 0.3.0, &lt; 3)\n    unicorn (5.2.0)\n      kgio (~&gt; 2.6)\n      raindrops (~&gt; 0.7)\n    w3c_validators (1.3.1)\n      json (~&gt; 2.0)\n      nokogiri (~&gt; 1.6)\n    web-console (3.4.0)\n      actionview (&gt;= 5.0)\n      activemodel (&gt;= 5.0)\n      debug_inspector\n      railties (&gt;= 5.0)\n    websocket-driver (0.6.4)\n      websocket-extensions (&gt;= 0.1.0)\n    websocket-extensions (0.1.2)\n    whenever (0.9.7)\n      chronic (&gt;= 0.6.3)\n    will_paginate (3.1.5)\n\nPLATFORMS\n  ruby\n\nDEPENDENCIES\n  activerecord-import\n  addressable\n  autoprefixer-rails\n  bootstrap-sass\n  byebug\n  coffee-rails\n  compass-rails\n  jquery-rails\n  jquery-turbolinks\n  jquery-ui-rails\n  listen (~&gt; 3.0.5)\n  omniauth-facebook\n  omniauth-google-oauth2\n  omniauth-linkedin-oauth2\n  omniauth-oauth2 (~&gt; 1.3.1)\n  omniauth-twitter\n  pdf-reader\n  pg\n  puma\n  pundit\n  rails (~&gt; 5.0.1)\n  roo-xls\n  sass-rails\n  socksify\n  spring\n  spring-watcher-listen (~&gt; 2.0.0)\n  therubyracer\n  turbolinks\n  uglifier\n  unicorn\n  w3c_validators\n  web-console\n  whenever\n  will_paginate\n\nBUNDLED WITH\n   1.13.7\n\n\n\n\n\n  [1]: http://whatismyip.akamai.com\n</code></pre>\n"}], "owner": {"reputation": 16802, "user_id": 1235929, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/9f460ae7deb6fa19034c810a53b9fbac?s=128&d=identicon&r=PG", "display_name": "Dave", "link": "https://stackoverflow.com/users/1235929/dave"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 635, "favorite_count": 0, "accepted_answer_id": 41568257, "answer_count": 1, "score": 3, "last_activity_date": 1484506506, "creation_date": 1483461318, "last_edit_date": 1484068923, "question_id": 41448100, "link": "https://stackoverflow.com/questions/41448100/how-do-i-set-tcpsocket-attributes-for-only-a-method-and-not-globally", "title": "How do I set TCPSocket attributes for only a method and not globally?", "body": "<p>I'm using Rails 4.2.7 with Ruby 2.3.0.  I have this code for getting a web page through a SOCKS Proxy</p>\n\n<pre><code>require \"resolv-replace.rb\"\nrequire 'open-uri'\nrequire 'uri'\nrequire \"socksify\"\nrequire 'socksify/http'\n...\n\n  def get_content_via_socks(socks_server, socks_port, url, headers)\n    TCPSocket::socks_server = socks_server\n    TCPSocket::socks_port = socks_port \n    uri = URI(url)\n    res1 = Net::HTTP.SOCKSProxy(nil, nil).start(uri.host, uri.port, :use_ssl =&gt; (uri.scheme == \"https\")) do |http|\n      http.read_timeout = 500\n      puts \"launching #{uri} on #{socks_server}:#{socks_port}\"\n      resp = http.get(uri, initheader = headers)\n    end\n  end\n</code></pre>\n\n<p>The only problem with this is even though I have set</p>\n\n<pre><code>    TCPSocket::socks_server = socks_server\n    TCPSocket::socks_port = socks_port \n</code></pre>\n\n<p>within my local method, it seems to affect the entire application.  That is when I call </p>\n\n<pre><code>http         = Net::HTTP.new(uri.host, uri.port)\n</code></pre>\n\n<p>from another method, it fails unless the above socks_server and socks_port are running.  How do I set the socks_server and socks_port for that method only and not affect the rest of the application?  Please don't say set the parameters here</p>\n\n<pre><code>res1 = Net::HTTP.SOCKSProxy(nil, nil)\n</code></pre>\n\n<p>These parameters are meaningless.  You can set them to \"abc\" and \"def\" and they will behave exactly the same as if you set them to valid values.</p>\n\n<p><b>Edit:</b> Including my Gemfile</p>\n\n<pre><code>source 'https://rubygems.org'\n\ngem 'rails', '~&gt; 5.0.1'\n# Use SCSS for stylesheets\ngem 'sass-rails'\n# Use Uglifier as compressor for JavaScript assets\ngem 'uglifier'\n# Use CoffeeScript for .coffee assets and views\ngem 'coffee-rails'\n# See https://github.com/rails/execjs#readme for more supported runtimes\n# gem 'therubyracer', platforms: :ruby\n\n# Use jquery as the JavaScript library\ngem 'jquery-rails'\n# Turbolinks makes navigating your web application faster. Read more: https://github.com/turbolinks/turbolinks\ngem 'turbolinks'\n# Build JSON APIs with ease. Read more: https://github.com/rails/jbuilder\n#gem 'jbuilder', '~&gt; 2.5'\n# Use Redis adapter to run Action Cable in production\n# gem 'redis', '~&gt; 3.0'\n\ngem 'addressable'\ngem 'pg'\ngem 'pundit'\ngem 'omniauth-oauth2', '~&gt; 1.3.1'\ngem 'omniauth-google-oauth2'\ngem 'omniauth-facebook'\ngem 'omniauth-twitter'\ngem 'omniauth-linkedin-oauth2'\ngem 'jquery-ui-rails'\n#gem 'jquery-cookie-rails'\ngem 'will_paginate'\ngem 'bootstrap-sass'\ngem 'autoprefixer-rails'\ngem 'compass-rails'\ngem 'pdf-reader'\ngem 'jquery-turbolinks'\ngem 'activerecord-import'\ngem 'w3c_validators'\ngem 'whenever', :require =&gt; false\ngem 'roo-xls'\ngem 'socksify'\n\ngroup :development, :test do\n  # Call 'byebug' anywhere in the code to stop execution and get a debugger console\n  gem 'byebug', platform: :mri\nend\n\ngroup :development do\n  # Access an IRB console on exception pages or by using &lt;%= console %&gt; anywhere in the code.\n  gem 'web-console'\n  gem 'listen', '~&gt; 3.0.5'\n  # Spring speeds up development by keeping your application running in the background. Read more: https://github.com/rails/spring\n  gem 'spring'\n  gem 'spring-watcher-listen', '~&gt; 2.0.0'\nend\n\ngroup :production do\n  gem 'unicorn'\n  gem 'puma'\nend\n</code></pre>\n"}]