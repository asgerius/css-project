[{"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 906, "user_id": 2901457, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/nxFaL.jpg?s=128&g=1", "display_name": "s_dolan", "link": "https://stackoverflow.com/users/2901457/s-dolan"}, "edited": false, "score": 2, "creation_date": 1491434444, "post_id": 43243094, "comment_id": 73556393, "body": "Could you provide some more context about why you&#39;re working with a string in this way? The cleanest solution to your problem is likely to change the input."}], "answers": [{"comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1491442067, "post_id": 43243371, "comment_id": 73558294, "body": "I&#39;d strongly advocate the <code>JSON.parse</code> approach and steer away from that gnarly regular expression."}], "tags": [], "owner": {"reputation": 5382, "user_id": 7671538, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3506350bc4dd02281ad7f99e8e84715c?s=128&d=identicon&r=PG&f=1", "display_name": "gwcodes", "link": "https://stackoverflow.com/users/7671538/gwcodes"}, "is_accepted": true, "score": 2, "last_activity_date": 1491437641, "last_edit_date": 1491437641, "creation_date": 1491435880, "answer_id": 43243371, "question_id": 43243094, "link": "https://stackoverflow.com/questions/43243094/remove-quotes-from-string-built-from-an-array/43243371#43243371", "title": "Remove quotes from string built from an array", "body": "<p>You could use a regular expression:</p>\n\n<pre><code># match (in a non-greedy way) characters up to a comma or `]`\n# capture each word as a group, and don't capture `,` or `]`\nstr.scan(/'(.+?)'(?:,|\\])/).flatten\n</code></pre>\n\n<p>Or <code>JSON.parse</code> (but accounting for the fact that single quotes are in fact technically not allowed in JSON):</p>\n\n<pre><code>JSON.parse( str.tr(\"'\", '\"') )\n</code></pre>\n\n<hr>\n\n<p><code>JSON.parse</code> probably has a small edge over the regexp in terms of performance, but if you're expecting your users to do single quote escaping, then that <code>tr</code> is going to mess things up. In this case, I'd stick with the regexp.</p>\n"}, {"tags": [], "owner": {"reputation": 896, "user_id": 520843, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/711a181409e23c300b82404544166deb?s=128&d=identicon&r=PG", "display_name": "grail", "link": "https://stackoverflow.com/users/520843/grail"}, "is_accepted": false, "score": 0, "last_activity_date": 1491450083, "creation_date": 1491450083, "answer_id": 43245291, "question_id": 43243094, "link": "https://stackoverflow.com/questions/43243094/remove-quotes-from-string-built-from-an-array/43245291#43245291", "title": "Remove quotes from string built from an array", "body": "<p>The JSON.parse looks more correct, but here is another alternative:</p>\n\n<pre><code>str.split(/[[:punct:] ]+/).drop(1)\n</code></pre>\n"}], "owner": {"reputation": 82, "user_id": 7407963, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/3e73972f9df8fd02cea426c6b6d582d8?s=128&d=identicon&r=PG&f=1", "display_name": "Ron Silson", "link": "https://stackoverflow.com/users/7407963/ron-silson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1289, "favorite_count": 0, "accepted_answer_id": 43243371, "answer_count": 2, "score": 0, "last_activity_date": 1491450083, "creation_date": 1491433903, "question_id": 43243094, "link": "https://stackoverflow.com/questions/43243094/remove-quotes-from-string-built-from-an-array", "title": "Remove quotes from string built from an array", "body": "<p>I have user controller input like so (the length and # of items may change):</p>\n\n<p><code>str = \"['honda', 'toyota', 'lexus']\"</code></p>\n\n<p>I would like to convert this into an array, but I'm struggling to find the best way to do so. <code>eval()</code> does exactly what I need, but it is not very elegant and is dangerous in this case, since it's user controller input.</p>\n\n<p>Another way is:</p>\n\n<pre><code>str[1..-2].split(',').collect { |car| car.strip.tr(\"'\", '') }\n\n=&gt; [\"honda\", \"toyota\", \"lexus\"]\n</code></pre>\n\n<p>But this is also not very elegant. Any suggestions that are more 'Rubyish'?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "forms", "save"], "comments": [{"owner": {"reputation": 16229, "user_id": 525478, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/3b6c0b47a0c430a0b141baee7ea845be?s=128&d=identicon&r=PG", "display_name": "Brad Werth", "link": "https://stackoverflow.com/users/525478/brad-werth"}, "edited": false, "score": 0, "creation_date": 1491433686, "post_id": 43242962, "comment_id": 73556198, "body": "Sometimes, a form object is a good alternative to complicated nested forms that model complicated nested relationships. Just search &quot;ruby on rails form object&quot; for more info..."}, {"owner": {"reputation": 21, "user_id": 1919906, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/efaa25dd484b36f07c65a4766d2287a5?s=128&d=identicon&r=PG", "display_name": "TheMissingNTLDR", "link": "https://stackoverflow.com/users/1919906/themissingntldr"}, "reply_to_user": {"reputation": 16229, "user_id": 525478, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/3b6c0b47a0c430a0b141baee7ea845be?s=128&d=identicon&r=PG", "display_name": "Brad Werth", "link": "https://stackoverflow.com/users/525478/brad-werth"}, "edited": false, "score": 0, "creation_date": 1491433985, "post_id": 43242962, "comment_id": 73556276, "body": "Thanks for the tip Brad, will read up on this definitely!"}], "answers": [{"comments": [{"owner": {"reputation": 21, "user_id": 1919906, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/efaa25dd484b36f07c65a4766d2287a5?s=128&d=identicon&r=PG", "display_name": "TheMissingNTLDR", "link": "https://stackoverflow.com/users/1919906/themissingntldr"}, "edited": false, "score": 0, "creation_date": 1491433940, "post_id": 43243055, "comment_id": 73556263, "body": "Thanks Amr! will certainly try this out tomorrow and will report back.!"}, {"owner": {"reputation": 499, "user_id": 5636930, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-L0BF3IxhZYw/AAAAAAAAAAI/AAAAAAAAAPM/RAOVvQpPSEA/photo.jpg?sz=128", "display_name": "amrrbakry", "link": "https://stackoverflow.com/users/5636930/amrrbakry"}, "reply_to_user": {"reputation": 21, "user_id": 1919906, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/efaa25dd484b36f07c65a4766d2287a5?s=128&d=identicon&r=PG", "display_name": "TheMissingNTLDR", "link": "https://stackoverflow.com/users/1919906/themissingntldr"}, "edited": false, "score": 0, "creation_date": 1491434096, "post_id": 43243055, "comment_id": 73556300, "body": "One last thing, in your <code>property_params</code> it&#39;s <code>pictures_attributes</code> not <code>picture_attributes</code>. Hope this helps!"}, {"owner": {"reputation": 21, "user_id": 1919906, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/efaa25dd484b36f07c65a4766d2287a5?s=128&d=identicon&r=PG", "display_name": "TheMissingNTLDR", "link": "https://stackoverflow.com/users/1919906/themissingntldr"}, "edited": false, "score": 0, "creation_date": 1491434206, "post_id": 43243055, "comment_id": 73556335, "body": "yes, i was playing around with that in singular/plural but will stick to plural now!"}, {"owner": {"reputation": 21, "user_id": 1919906, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/efaa25dd484b36f07c65a4766d2287a5?s=128&d=identicon&r=PG", "display_name": "TheMissingNTLDR", "link": "https://stackoverflow.com/users/1919906/themissingntldr"}, "edited": false, "score": 0, "creation_date": 1491504872, "post_id": 43243055, "comment_id": 73595500, "body": "ok..i tried this in form: <code>&lt;%= form_for(@property) do |f| %&gt; \t&lt;%= f.label :address %&gt; \t&lt;%= f.text_field :address %&gt;  \t\t&lt;%= f.fields_for @property.pictures.build do |p| %&gt; \t\t  &lt;%= p.file_field :image1 %&gt; \t\t  &lt;%= p.file_field :image2 %&gt;  \t\t&lt;% end %&gt;    \t&lt;%= f.submit %&gt; &lt;% end %&gt;</code> but it is giving me error &gt;&gt; unknown attribute &#39;property_id&#39; for Picture (around line #5)"}, {"owner": {"reputation": 499, "user_id": 5636930, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-L0BF3IxhZYw/AAAAAAAAAAI/AAAAAAAAAPM/RAOVvQpPSEA/photo.jpg?sz=128", "display_name": "amrrbakry", "link": "https://stackoverflow.com/users/5636930/amrrbakry"}, "reply_to_user": {"reputation": 21, "user_id": 1919906, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/efaa25dd484b36f07c65a4766d2287a5?s=128&d=identicon&r=PG", "display_name": "TheMissingNTLDR", "link": "https://stackoverflow.com/users/1919906/themissingntldr"}, "edited": false, "score": 0, "creation_date": 1491505272, "post_id": 43243055, "comment_id": 73595723, "body": "Rails expects a foreign key field <code>property_id</code> in your pictures table for the association to work. Create a migration and add this field and it should work."}, {"owner": {"reputation": 21, "user_id": 1919906, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/efaa25dd484b36f07c65a4766d2287a5?s=128&d=identicon&r=PG", "display_name": "TheMissingNTLDR", "link": "https://stackoverflow.com/users/1919906/themissingntldr"}, "edited": false, "score": 0, "creation_date": 1491517709, "post_id": 43243055, "comment_id": 73602110, "body": "I added a migration &#39;rails g migration add_property_id_to_pictures property_id:integer&#39; then &#39;rails db:migrate&#39; - Still getting error on controller params being in correct. Am i missing anything in both model files in terms of foreign key clause? Sorry I am still learning rails so not used to this. However I am still searching and reading up on this so will keep trying..!"}, {"owner": {"reputation": 499, "user_id": 5636930, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-L0BF3IxhZYw/AAAAAAAAAAI/AAAAAAAAAPM/RAOVvQpPSEA/photo.jpg?sz=128", "display_name": "amrrbakry", "link": "https://stackoverflow.com/users/5636930/amrrbakry"}, "reply_to_user": {"reputation": 21, "user_id": 1919906, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/efaa25dd484b36f07c65a4766d2287a5?s=128&d=identicon&r=PG", "display_name": "TheMissingNTLDR", "link": "https://stackoverflow.com/users/1919906/themissingntldr"}, "edited": false, "score": 0, "creation_date": 1491525206, "post_id": 43243055, "comment_id": 73604349, "body": "no, it&#39;s totally okay these things help you learn for sure. could you post the error you&#39;re getting now"}, {"owner": {"reputation": 21, "user_id": 1919906, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/efaa25dd484b36f07c65a4766d2287a5?s=128&d=identicon&r=PG", "display_name": "TheMissingNTLDR", "link": "https://stackoverflow.com/users/1919906/themissingntldr"}, "edited": false, "score": 0, "creation_date": 1491578697, "post_id": 43243055, "comment_id": 73631716, "body": "Sorry I mean form works now, that is sorted but when I submit the fields, get an error: &gt;&gt; <code>NameError in PropertiesController#create undefined local variable or method </code>properties&#39; for #&lt;PropertiesController:0x9fba0c0&gt; Extracted source (around line #8):   def create     @property = properties.build(property_params)     if @property.save       flash[:success] = &quot;Property was successfully created&quot;       redirect_to property_path(@property)`"}, {"owner": {"reputation": 21, "user_id": 1919906, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/efaa25dd484b36f07c65a4766d2287a5?s=128&d=identicon&r=PG", "display_name": "TheMissingNTLDR", "link": "https://stackoverflow.com/users/1919906/themissingntldr"}, "edited": false, "score": 0, "creation_date": 1491578727, "post_id": 43243055, "comment_id": 73631737, "body": "<code>app&#47;controllers&#47;properties_controller.rb:8:in </code>create&#39; Request Parameters: {&quot;utf8&quot;=&gt;&quot;\u2713&quot;,  &quot;authenticity_token&quot;=&gt;&quot;FkMU6CuAIf25LeaHR+eluPj7v4Tury+EuLLjR&zwnj;&#8203;6zksZs5LFfqf/It1R5m5&zwnj;&#8203;Z4tGm96uN05lmj9P1n0O&zwnj;&#8203;SP1rnL7BQ==&quot;,  &quot;property&quot;=&gt;{&quot;address&quot;=&gt;&quot;add1&quot;, &quot;picture&quot;=&gt;{&quot;image1&quot;=&gt;&quot;url1&quot;, &quot;image2&quot;=&gt;&quot;url2&quot;}},  &quot;commit&quot;=&gt;&quot;Create Property&quot;}`"}, {"owner": {"reputation": 21, "user_id": 1919906, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/efaa25dd484b36f07c65a4766d2287a5?s=128&d=identicon&r=PG", "display_name": "TheMissingNTLDR", "link": "https://stackoverflow.com/users/1919906/themissingntldr"}, "edited": false, "score": 0, "creation_date": 1491578794, "post_id": 43243055, "comment_id": 73631788, "body": "Form is like this now: <code>&lt;%= form_for(@property) do |f| %&gt; &lt;%= f.label :address %&gt; &lt;%= f.text_field :address %&gt;&lt;&#47;br&gt;  &lt;%= f.fields_for @property.pictures.build do |p| %&gt;   &lt;%= p.text_field :image1 %&gt;&lt;&#47;br&gt;   &lt;%= p.text_field :image2 %&gt;&lt;&#47;br&gt; &lt;% end %&gt;    &lt;%= f.submit %&gt; &lt;% end %&gt;</code>"}, {"owner": {"reputation": 21, "user_id": 1919906, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/efaa25dd484b36f07c65a4766d2287a5?s=128&d=identicon&r=PG", "display_name": "TheMissingNTLDR", "link": "https://stackoverflow.com/users/1919906/themissingntldr"}, "edited": false, "score": 0, "creation_date": 1491578864, "post_id": 43243055, "comment_id": 73631841, "body": "Controller like this now: <code>class PropertiesController &lt; ApplicationController    def new     @property = Property.new   end    def create     @property = properties.build(property_params)     if @property.save       flash[:success] = &quot;Property was successfully created&quot;       redirect_to property_path(@property)     else       render &#39;new&#39;     end   end    private     def property_params       params.require(:property).permit(:address, pictures_attributes: [:image1, :image2])     end end</code>"}, {"owner": {"reputation": 21, "user_id": 1919906, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/efaa25dd484b36f07c65a4766d2287a5?s=128&d=identicon&r=PG", "display_name": "TheMissingNTLDR", "link": "https://stackoverflow.com/users/1919906/themissingntldr"}, "edited": false, "score": 0, "creation_date": 1491578933, "post_id": 43243055, "comment_id": 73631888, "body": "Models like this now: <code>class Property &lt; ApplicationRecord \thas_many :pictures     accepts_nested_attributes_for :pictures end  class Picture &lt; ApplicationRecord \tbelongs_to :property end</code>"}, {"owner": {"reputation": 499, "user_id": 5636930, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-L0BF3IxhZYw/AAAAAAAAAAI/AAAAAAAAAPM/RAOVvQpPSEA/photo.jpg?sz=128", "display_name": "amrrbakry", "link": "https://stackoverflow.com/users/5636930/amrrbakry"}, "reply_to_user": {"reputation": 21, "user_id": 1919906, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/efaa25dd484b36f07c65a4766d2287a5?s=128&d=identicon&r=PG", "display_name": "TheMissingNTLDR", "link": "https://stackoverflow.com/users/1919906/themissingntldr"}, "edited": false, "score": 0, "creation_date": 1491589683, "post_id": 43243055, "comment_id": 73637833, "body": "in your properties_controller&#39;s <code>create</code> action change the first line to this: <code>@property = Property.build(property_params)</code>"}, {"owner": {"reputation": 21, "user_id": 1919906, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/efaa25dd484b36f07c65a4766d2287a5?s=128&d=identicon&r=PG", "display_name": "TheMissingNTLDR", "link": "https://stackoverflow.com/users/1919906/themissingntldr"}, "edited": false, "score": 0, "creation_date": 1491598131, "post_id": 43243055, "comment_id": 73641866, "body": "changed to <code>@property = Property.build(property_params)</code> but error is now different. It says build method or class not found for controller. I think I will have to rewrite this again. But thanks for all your help!!"}], "tags": [], "owner": {"reputation": 499, "user_id": 5636930, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-L0BF3IxhZYw/AAAAAAAAAAI/AAAAAAAAAPM/RAOVvQpPSEA/photo.jpg?sz=128", "display_name": "amrrbakry", "link": "https://stackoverflow.com/users/5636930/amrrbakry"}, "is_accepted": false, "score": 2, "last_activity_date": 1491433579, "creation_date": 1491433579, "answer_id": 43243055, "question_id": 43242962, "link": "https://stackoverflow.com/questions/43242962/error-in-form-when-saving-to-2-tables-in-ruby-rails/43243055#43243055", "title": "Error in Form when saving to 2 Tables in Ruby Rails", "body": "<p>You should use the <code>fields_for</code> method to have a form for pictures inside the property form:</p>\n\n<pre><code># inside the property form_for\n&lt;%= f.fields_for @property.pictures.build do |p| %&gt;\n  &lt;%= p.file_field :image1 %&gt;\n  &lt;%= p.file_field :image2 %&gt; \n&lt;% end %&gt; \n</code></pre>\n"}], "owner": {"reputation": 21, "user_id": 1919906, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/efaa25dd484b36f07c65a4766d2287a5?s=128&d=identicon&r=PG", "display_name": "TheMissingNTLDR", "link": "https://stackoverflow.com/users/1919906/themissingntldr"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 76, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1491433579, "creation_date": 1491432949, "last_edit_date": 1495541865, "question_id": 43242962, "link": "https://stackoverflow.com/questions/43242962/error-in-form-when-saving-to-2-tables-in-ruby-rails", "title": "Error in Form when saving to 2 Tables in Ruby Rails", "body": "<p>I saw a similar answered question <a href=\"https://stackoverflow.com/questions/24746906/ruby-on-rails-saving-in-two-tables-from-one-form/43242398\">here</a> which got me this far. But now I am facing an error in Form. The solution I am looking for is basically saving to two tables in Ruby Rails where saving the Property with address in first table also saves 2 images in Pictures' second table.</p>\n\n<p>Migration1:</p>\n\n<pre><code>class CreateProperties &lt; ActiveRecord::Migration[5.0]\n  def change\n    create_table :properties do |t|\n      t.string :address\n\n      t.timestamps\n    end\n  end\nend\n</code></pre>\n\n<p>Migration2:</p>\n\n<pre><code>class CreatePictures &lt; ActiveRecord::Migration[5.0]\n  def change\n    create_table :pictures do |t|\n      t.string :image1\n      t.string :image2\n\n      t.timestamps\n    end\n  end\nend\n</code></pre>\n\n<p>Property Model:</p>\n\n<pre><code>class Property &lt; ApplicationRecord\n    has_many :pictures\n    accepts_nested_attributes_for :pictures\nend\n</code></pre>\n\n<p>Picture Model:</p>\n\n<pre><code>class Picture &lt; ApplicationRecord\n    belongs_to :property\nend\n</code></pre>\n\n<p>PropertiesController:</p>\n\n<pre><code>class PropertiesController &lt; ApplicationController\nbefore_action :set_property\n\n  def new\n    @property = Property.new\n  end\n\n  def create\n    @property = properties.build(property_params)\n    if @property.save\n      flash[:success] = \"Property was successfully created\"\n      redirect_to property_path(@property)\n    else\n      render 'new'\n    end\n  end\n\n  private\n    def property_params\n      params.require(:property).permit(:address, picture_attributes: [:image1, :image2])\n    end\nend\n</code></pre>\n\n<p>The FORM which I don't know is done as below:</p>\n\n<pre><code>&lt;%= form_for(@property) do |f| %&gt;\n&lt;%= f.label :address %&gt;\n&lt;%= f.text_field :address %&gt;\n\n&lt;%= f.label :image1 %&gt;\n&lt;%= f.text_field :image1 %&gt;\n\n&lt;%= f.label :image2 %&gt;\n&lt;%= f.text_field :image2 %&gt;\n&lt;%= f.submit %&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>Error Picture:</p>\n\n<p><a href=\"https://i.stack.imgur.com/0gtEN.png\" rel=\"nofollow noreferrer\">Error on new.html.erb</a></p>\n"}, {"tags": ["ruby-on-rails", "ruby", "database", "yaml", "seed"], "answers": [{"comments": [{"owner": {"reputation": 77, "user_id": 7802501, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/4874272e8bba778b1452bdb1e8a7c625?s=128&d=identicon&r=PG&f=1", "display_name": "NanoBreaker", "link": "https://stackoverflow.com/users/7802501/nanobreaker"}, "edited": false, "score": 0, "creation_date": 1491428419, "post_id": 43242044, "comment_id": 73554345, "body": "As you wish, did it! :) But does it make any sence? What if I have a lot of .yml files, isn&#39;t this better to just put them all in one folder?) Just looks the way better."}, {"owner": {"reputation": 1589, "user_id": 1123717, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/fb3d5703694d21ac6573b31d3f3014f0?s=128&d=identicon&r=PG", "display_name": "aarkerio", "link": "https://stackoverflow.com/users/1123717/aarkerio"}, "reply_to_user": {"reputation": 77, "user_id": 7802501, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/4874272e8bba778b1452bdb1e8a7c625?s=128&d=identicon&r=PG&f=1", "display_name": "NanoBreaker", "link": "https://stackoverflow.com/users/7802501/nanobreaker"}, "edited": false, "score": 1, "creation_date": 1491435246, "post_id": 43242044, "comment_id": 73556608, "body": "yeah in that cases yml files make sense, but at the end you&#39;ll have a lot of hashes to do the &quot;Model.create&quot; thing and you can write those hashes directly inside seeds.rb.  BTW, don&#39;t use fixtures for testing, use FactoryGirl instead."}], "tags": [], "owner": {"reputation": 1589, "user_id": 1123717, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/fb3d5703694d21ac6573b31d3f3014f0?s=128&d=identicon&r=PG", "display_name": "aarkerio", "link": "https://stackoverflow.com/users/1123717/aarkerio"}, "is_accepted": false, "score": 0, "last_activity_date": 1491428118, "creation_date": 1491428118, "answer_id": 43242044, "question_id": 43241925, "link": "https://stackoverflow.com/questions/43241925/ruby-on-rails-seed-yml-file-which-has-models-with-associations-in-it/43242044#43242044", "title": "ruby on rails seed .yml file which has models with associations in it", "body": "<p>Do yourself a favor, delete the seeds.yml file and create all inside seeds.rb</p>\n"}, {"comments": [{"owner": {"reputation": 77, "user_id": 7802501, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/4874272e8bba778b1452bdb1e8a7c625?s=128&d=identicon&r=PG&f=1", "display_name": "NanoBreaker", "link": "https://stackoverflow.com/users/7802501/nanobreaker"}, "edited": false, "score": 1, "creation_date": 1491428644, "post_id": 43242122, "comment_id": 73554428, "body": "This is a business requirement, as I said I already used another way to make everything work, but how to make this one work? :D Thanks for the answer btw. My goal is just to seed that file, to get know how this works."}, {"owner": {"reputation": 1862, "user_id": 2386942, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/Zr2m6.jpg?s=128&g=1", "display_name": "SerKnight", "link": "https://stackoverflow.com/users/2386942/serknight"}, "reply_to_user": {"reputation": 77, "user_id": 7802501, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/4874272e8bba778b1452bdb1e8a7c625?s=128&d=identicon&r=PG&f=1", "display_name": "NanoBreaker", "link": "https://stackoverflow.com/users/7802501/nanobreaker"}, "edited": false, "score": 0, "creation_date": 1491489474, "post_id": 43242122, "comment_id": 73585311, "body": "Yeah so multi model .yml seed files do not look like they are supported.. I recommend you just use ruby to load &amp; seed the static data you need. ex. <a href=\"http://www.xyzpub.com/en/ruby-on-rails/3.2/seed_rb.html\" rel=\"nofollow noreferrer\">xyzpub.com/en/ruby-on-rails/3.2/seed_rb.html</a> - sorry thats all I can help with without understanding more of biz req. - best"}], "tags": [], "owner": {"reputation": 1862, "user_id": 2386942, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/Zr2m6.jpg?s=128&g=1", "display_name": "SerKnight", "link": "https://stackoverflow.com/users/2386942/serknight"}, "is_accepted": false, "score": 0, "last_activity_date": 1491428498, "creation_date": 1491428498, "answer_id": 43242122, "question_id": 43241925, "link": "https://stackoverflow.com/questions/43241925/ruby-on-rails-seed-yml-file-which-has-models-with-associations-in-it/43242122#43242122", "title": "ruby on rails seed .yml file which has models with associations in it", "body": "<p>It looks like you need to separate your models into separate fixture files. Though it says theres some minimal support for setting relationships via YML &amp; seed.rb workflow:</p>\n\n<blockquote>\n  <p><a href=\"http://guides.rubyonrails.org/testing.html#the-low-down-on-fixtures\" rel=\"nofollow noreferrer\">http://guides.rubyonrails.org/testing.html#the-low-down-on-fixtures</a></p>\n</blockquote>\n\n<p>I'd recommend a alternate routes to seed your database unless this is a business requirement essential to follow. Can help more if you answer:</p>\n\n<ul>\n<li>Do you already have the data you want to supply to db?</li>\n<li>Is your goal to seed a test / dev / or production database?</li>\n</ul>\n"}], "owner": {"reputation": 77, "user_id": 7802501, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/4874272e8bba778b1452bdb1e8a7c625?s=128&d=identicon&r=PG&f=1", "display_name": "NanoBreaker", "link": "https://stackoverflow.com/users/7802501/nanobreaker"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 748, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1491428498, "creation_date": 1491427606, "question_id": 43241925, "link": "https://stackoverflow.com/questions/43241925/ruby-on-rails-seed-yml-file-which-has-models-with-associations-in-it", "title": "ruby on rails seed .yml file which has models with associations in it", "body": "<p>I don't really understand how to seed a .yml file which has more than one data model in it, plus they are they are interrelated.</p>\n\n<p>That's what I have:</p>\n\n<p>project.rb</p>\n\n<pre><code>class Project &lt; ActiveRecord::Base\n  has_many :todos\nend\n</code></pre>\n\n<p>todo.rb</p>\n\n<pre><code>class Todo &lt; ActiveRecord::Base\n\n  belongs_to :project\n\nend\n</code></pre>\n\n<p>my data schema:</p>\n\n<pre><code>  create_table \"projects\", force: :cascade do |t|\n    t.string   \"title\"\n    t.datetime \"created_at\", null: false\n    t.datetime \"updated_at\", null: false\n  end\n\n  create_table \"todos\", force: :cascade do |t|\n    t.string   \"text\"\n    t.boolean  \"isCompleted\"\n    t.integer  \"project_id\"\n    t.datetime \"created_at\",  null: false\n    t.datetime \"updated_at\",  null: false\n  end\n</code></pre>\n\n<p>seeds.rb (ofc it doesn't work)</p>\n\n<pre><code>seed_file = File.join(Rails.root, 'db', 'seeds/seeds.yml')\nconfig = YAML::load_file(seed_file)\nProject.create(config[\"projects\"])\n</code></pre>\n\n<p>seeds/seeds.yml</p>\n\n<pre><code>projects:\n - title: 'family'\n   todos:\n    - text: 'Get some milk'\n      isCompleted: false\n    - text: 'Cook some bacon'\n      isCompleted: true\n    - text: 'Repair the front door'\n      isCompleted: false\n - title: 'work'\n   todos:\n    - text: 'Call my boss'\n      isCompleted: true\n    - text: 'Finish my work tasks'\n      isCompleted: true\n    - text: 'Get fired'\n      isCompleted: false\n - title: 'therest'\n   todos:\n    - text: 'Do something'\n      isCompleted: false\n    - text: 'Ask a question on stackoverflow'\n      isCompleted: false\n</code></pre>\n\n<p>Can someone tell me please, what should I do to make it work properly. I need to use exactly this kind of data from my <code>seeds.yml</code>, I know how to make two different .yml files for <code>projects</code> and <code>todos</code> and make them work, but this is not the way I want to solve my problem.</p>\n"}, {"tags": ["ruby", "watir", "cloud9"], "answers": [{"comments": [{"owner": {"reputation": 779, "user_id": 6484371, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/9739ce20bf000c611ddf35e50443aadd?s=128&d=identicon&r=PG&f=1", "display_name": "ByteMe", "link": "https://stackoverflow.com/users/6484371/byteme"}, "edited": false, "score": 0, "creation_date": 1491429331, "post_id": 43242004, "comment_id": 73554724, "body": "Thanks so much! I guess I was under the impression that the path code was returning it, but apparently not!"}], "tags": [], "owner": {"reputation": 163, "user_id": 2361698, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mpBMT.jpg?s=128&g=1", "display_name": "Krzysztof Rygielski", "link": "https://stackoverflow.com/users/2361698/krzysztof-rygielski"}, "is_accepted": true, "score": 1, "last_activity_date": 1491427949, "creation_date": 1491427949, "answer_id": 43242004, "question_id": 43241762, "link": "https://stackoverflow.com/questions/43241762/cant-upload-file-using-watir-headless-browser-chromedriver-using-ruby/43242004#43242004", "title": "Can&#39;t upload file using Watir, Headless Browser, Chromedriver, using Ruby", "body": "<p>Shouldn't <code>path</code> variable contain the path to actual file? From your example it looks like it's pointing to parent directory. Ditch the <code>File.dirname(photo)</code> turning it to this:</p>\n\n<pre><code>photo = File.open(\"00909_8qYJaR8wTix_600x450.jpg\", \"a\") \npath = File.expand_path(photo)\nbrowser.file_field(:type,\"file\").set(path)\n</code></pre>\n\n<p>and you should be fine, in my opinion.</p>\n"}], "owner": {"reputation": 779, "user_id": 6484371, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/9739ce20bf000c611ddf35e50443aadd?s=128&d=identicon&r=PG&f=1", "display_name": "ByteMe", "link": "https://stackoverflow.com/users/6484371/byteme"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 244, "favorite_count": 0, "accepted_answer_id": 43242004, "answer_count": 1, "score": 0, "last_activity_date": 1491427949, "creation_date": 1491426938, "question_id": 43241762, "link": "https://stackoverflow.com/questions/43241762/cant-upload-file-using-watir-headless-browser-chromedriver-using-ruby", "title": "Can&#39;t upload file using Watir, Headless Browser, Chromedriver, using Ruby", "body": "<p>I am trying to automate the creation of a listing on my website and I am having a lot of difficulty uploading an image for the listing. I am using Cloud9 and Watir, and using a headless chrome browser and the code is written in Ruby. For some reason the photo refuses to upload. </p>\n\n<p><a href=\"https://i.stack.imgur.com/HUyv0.png\" rel=\"nofollow noreferrer\">Click to see picture of upload area</a></p>\n\n<pre><code>photo = File.open(\"00909_8qYJaR8wTix_600x450.jpg\", \"a\") \npath = File.expand_path(File.dirname(photo))\nbrowser.file_field(:type,\"file\").set(path)\n</code></pre>\n\n<p>Output on terminal:</p>\n\n<pre><code>[8] pry(main)&gt; browser.file_field(:type,\"file\").value\n=&gt; \"\"\n[9] pry(main)&gt; path\n=&gt; \"/home/ubuntu/workspace/scraper\"\n[10] pry(main)&gt; File.exist? (path)\n=&gt; true\n</code></pre>\n\n<p>HTML\n    input class=\"fileupload\" multiple=\"multiple\" type=\"file\" style=\"display: \n    inline-block;\"            </p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1491429243, "post_id": 43241685, "comment_id": 73554673, "body": "This situation usually happens when you haven&#39;t thought out the logic well."}], "answers": [{"tags": [], "owner": {"reputation": 32451, "user_id": 2516474, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a2179a340c0e84edc285d432211145d?s=128&d=identicon&r=PG", "display_name": "SteveTurczyn", "link": "https://stackoverflow.com/users/2516474/steveturczyn"}, "is_accepted": false, "score": 0, "last_activity_date": 1491427593, "creation_date": 1491427593, "answer_id": 43241921, "question_id": 43241685, "link": "https://stackoverflow.com/questions/43241685/how-to-avoid-repeated-conditions-inside-case-statement/43241921#43241921", "title": "How to avoid repeated conditions inside case statement", "body": "<p>You can select on just <code>a.question == f.question</code> and then the results of that select can be used in a further select.</p>\n\n<pre><code>def notifications_lookup(filters, answers)\n    filters.flat_map do |f|\n      selected_answers = answers.select {|a| a.question == f.question}\n      selected_answers = selected_answers.select do |a|\n        case a.question.question_type\n        when \"image\"\n          a.answer_image.image_id == f.answer.to_i\n        when \"single\"\n          a.choice_answer.choice_id == f.answer.to_i\n        when \"list\"\n          a.choice_answer.choice_id == f.answer.to_i\n        when \"multiple\"\n          !(f.answer.split(\",\").map(&amp;:to_i) &amp; a.answer_multiple.choices.map(&amp;:id)).empty?\n        when \"rating\"\n          results = verify_condition(f, a)\n          results.any?\n        else\n          true\n        end\n      end\n    end\n  end\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 2, "creation_date": 1491429365, "post_id": 43241931, "comment_id": 73554743, "body": "&quot;...writing a <code>==</code> method on your Answer model that can do the comparison for you&quot;. Yes. This can make a big difference in the readability of the code."}], "tags": [], "owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "is_accepted": true, "score": 0, "last_activity_date": 1491427631, "creation_date": 1491427631, "answer_id": 43241931, "question_id": 43241685, "link": "https://stackoverflow.com/questions/43241685/how-to-avoid-repeated-conditions-inside-case-statement/43241931#43241931", "title": "How to avoid repeated conditions inside case statement", "body": "<p>Remember Ruby lets you do these things in several simple passes. There's no need to do it all in one go:</p>\n\n<pre><code>def notifications_lookup(filters, answers)\n  filters.flat_map do |f|\n    answers.select do |a|\n      a.question == f.question\n    end.select do |a|\n      case a.question.question_type\n      when \"image\"\n        a.answer_image.image_id == f.answer.to_i\n      when \"single\", \"list\"\n        a.choice_answer.choice_id == f.answer.to_i\n      when \"multiple\"\n        !(f.answer.split(\",\").map(&amp;:to_i) &amp; a.answer_multiple.choices.map(&amp;:id)).empty?\n      when \"rating\"\n        verify_condition(f, a).any?\n      else\n        true\n      end\n    end\n  end\nend\n</code></pre>\n\n<p>Another quick fix was to combine two clauses that had the same code.</p>\n\n<p>You might make this even easier by writing a <code>==</code> method on your Answer model that can do the comparison for you.</p>\n"}], "owner": {"reputation": 536, "user_id": 2266777, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/QgXTg.png?s=128&g=1", "display_name": "Andr&#233;s Da Vi&#225;", "link": "https://stackoverflow.com/users/2266777/andr%c3%a9s-da-vi%c3%a1"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 45, "favorite_count": 0, "accepted_answer_id": 43241931, "answer_count": 2, "score": 0, "last_activity_date": 1491429150, "creation_date": 1491426640, "last_edit_date": 1491429150, "question_id": 43241685, "link": "https://stackoverflow.com/questions/43241685/how-to-avoid-repeated-conditions-inside-case-statement", "title": "How to avoid repeated conditions inside case statement", "body": "<p>How can I clean up this a bit? I want to get rid of the unnecessary code like all the repeated <code>a.question == f.question</code> comparisons I use on each <code>case</code> statement:</p>\n\n<pre><code>def notifications_lookup(filters, answers)\n    filters.flat_map do |f|\n      answers.select do |a|\n        case a.question.question_type\n        when \"image\"\n          a.question == f.question &amp;&amp; a.answer_image.image_id == f.answer.to_i\n        when \"single\"\n          a.question == f.question &amp;&amp; a.choice_answer.choice_id == f.answer.to_i\n        when \"list\"\n          a.question == f.question &amp;&amp; a.choice_answer.choice_id == f.answer.to_i\n        when \"multiple\"\n          a.question == f.question &amp;&amp; !(f.answer.split(\",\").map(&amp;:to_i) &amp; a.answer_multiple.choices.map(&amp;:id)).empty?\n        when \"rating\"\n          results = verify_condition(f, a)\n          a.question == f.question &amp;&amp; results.any?\n        else\n          a.question == f.question\n        end\n      end\n    end\n  end\n\n  def verify_condition(filter, a)\n    a.answer_raitings.map do |r|\n      r.raiting == filter.raiting &amp;&amp; filter.answer.split(\",\").map(&amp;:to_i).include?(r.response)\n    end\n  end\n</code></pre>\n"}, {"tags": ["ruby", "rmagick", "prawn"], "comments": [{"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1491429538, "post_id": 43241565, "comment_id": 73554815, "body": "You&#39;re asking us to recommend ways to solve the problem, without showing us what you tried. That means we toss out ideas, you say you tried those, we give more ideas, you say you tried those. That&#39;s not how SO works. &quot;<a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>&quot; and <a href=\"http://meta.stackoverflow.com/questions/261592\">meta.stackoverflow.com/questions/261592</a> describe the process."}, {"owner": {"reputation": 1410, "user_id": 617243, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/badeb4be07d422115225b85e28c5fabb?s=128&d=identicon&r=PG", "display_name": "Brandon", "link": "https://stackoverflow.com/users/617243/brandon"}, "reply_to_user": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1491432952, "post_id": 43241565, "comment_id": 73555981, "body": "I tried enabling both <code>compress</code> and <code>optimize_objects</code> on the prawn document. Anything else you recommend will be new ideas. Is there somewhere you would recommend me asking a conceptual question rather than here? I am looking for ideas, and didn&#39;t know where else to ask."}, {"owner": {"reputation": 1377, "user_id": 3011280, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/mkyAT.jpg?s=128&g=1", "display_name": "Oshan Wisumperuma", "link": "https://stackoverflow.com/users/3011280/oshan-wisumperuma"}, "edited": false, "score": 0, "creation_date": 1548554283, "post_id": 43241565, "comment_id": 95581730, "body": "try pdf-toolkit <a href=\"https://rubygems.org/gems/pdf-toolkit/\" rel=\"nofollow noreferrer\">rubygems.org/gems/pdf-toolkit</a> <a href=\"https://www.pdflabs.com/docs/pdftk-man-page/#dest-compress\" rel=\"nofollow noreferrer\">pdflabs.com/docs/pdftk-man-page/#dest-compress</a>"}], "answers": [{"comments": [{"owner": {"reputation": 1410, "user_id": 617243, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/badeb4be07d422115225b85e28c5fabb?s=128&d=identicon&r=PG", "display_name": "Brandon", "link": "https://stackoverflow.com/users/617243/brandon"}, "edited": false, "score": 0, "creation_date": 1491891083, "post_id": 43261241, "comment_id": 73739410, "body": "This actually did work except I can&#39;t get it to output a file with halfway decent quality. I will post on the imagemagick discourse, thank you for the tip. I&#39;ll mark this as accepted if that works out."}], "tags": [], "owner": {"reputation": 329, "user_id": 2137426, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b33ea5c12d767bfd1253940a960274f5?s=128&d=identicon&r=PG", "display_name": "An RMagick User", "link": "https://stackoverflow.com/users/2137426/an-rmagick-user"}, "is_accepted": false, "score": 0, "last_activity_date": 1491497207, "creation_date": 1491497207, "answer_id": 43261241, "question_id": 43241565, "link": "https://stackoverflow.com/questions/43241565/how-do-i-flatten-compress-a-pdf-which-is-generated-with-prawn/43261241#43261241", "title": "How do I flatten/compress a pdf which is generated with prawn?", "body": "<p>Have you tried simply making a copy of the PDF with RMagick? That is, read in the PDF and write it back out again.</p>\n\n<p>Also, check with the ImageMagick folks at <a href=\"https://www.imagemagick.org/discourse-server/\" rel=\"nofollow noreferrer\">https://www.imagemagick.org/discourse-server/</a>. Any advice they offer you can be implemented via RMagick.</p>\n"}], "owner": {"reputation": 1410, "user_id": 617243, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/badeb4be07d422115225b85e28c5fabb?s=128&d=identicon&r=PG", "display_name": "Brandon", "link": "https://stackoverflow.com/users/617243/brandon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 382, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1491497207, "creation_date": 1491426142, "question_id": 43241565, "link": "https://stackoverflow.com/questions/43241565/how-do-i-flatten-compress-a-pdf-which-is-generated-with-prawn", "title": "How do I flatten/compress a pdf which is generated with prawn?", "body": "<p>I am using prawn to generate pdf files which have lots of images so they come out quite large. I can open the file in Adobe Acrobat and then save it using the \"reduce file size\" option, and a 164MB file shrunk to 7MB and retained all of the image quality. I would like to replicate this compression in Ruby. I have tried using the compression settings which prawn offers and they have not had any effect on the file size. I suspect there must be a way to do it with RMagick, but I haven't figured it out yet.</p>\n\n<p>I apologize for not including any code samples showing what I have tried, but I removed the prawn compression settings when they didn't have any effect, so I don't have anything to show.</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 424, "user_id": 6150184, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/26aa5396de57080c2084de1b8a5aeaa5?s=128&d=identicon&r=PG&f=1", "display_name": "DiodonHystrix", "link": "https://stackoverflow.com/users/6150184/diodonhystrix"}, "edited": false, "score": 0, "creation_date": 1491423713, "post_id": 43240801, "comment_id": 73551987, "body": "Take a look at this <a href=\"https://github.com/drapergem/draper\" rel=\"nofollow noreferrer\">gem</a>."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 3, "creation_date": 1491423912, "post_id": 43240801, "comment_id": 73552096, "body": "Before you get too over-eager on this, remember that display concerns like that aren&#39;t really supposed to be expressed in the model. These are generally best put into the <code>helpers&#47;</code> area. What you&#39;re doing here is very difficult to localize."}], "answers": [{"comments": [{"owner": {"reputation": 1349, "user_id": 6163262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7f3655350c57cb94195d64808b7ba61?s=128&d=identicon&r=PG&f=1", "display_name": "whodini9", "link": "https://stackoverflow.com/users/6163262/whodini9"}, "edited": false, "score": 1, "creation_date": 1491424874, "post_id": 43241081, "comment_id": 73552598, "body": "Right, <i>database</i> and <i>background</i> logic should be removed from the views. The model is the place for that. The controller presents the view and database objects and manages the interaction between them. For example, if a user wants to re-sort a column (although sort may be a bad example...), this should probably happen in the view and not the Model. Meaning, you shouldn&#39;t re-query the database with a different <code>.order</code>  just to show it differently in a view."}], "tags": [], "owner": {"reputation": 182, "user_id": 1920508, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/43740b9270a206c2d0a9061b4c906be3?s=128&d=identicon&r=PG", "display_name": "Traveler", "link": "https://stackoverflow.com/users/1920508/traveler"}, "is_accepted": false, "score": 1, "last_activity_date": 1491425512, "last_edit_date": 1491425512, "creation_date": 1491424329, "answer_id": 43241081, "question_id": 43240801, "link": "https://stackoverflow.com/questions/43240801/moving-logic-from-view-to-model-in-rails/43241081#43241081", "title": "Moving logic from view to model in Rails", "body": "<p>there is nothing wrong about keeping <strong>view</strong> logic in views. In your case you're iterating reviews and formatting it the way you want to present it to a user. Think about it, if you would like to change the way you show \"posted\" to, lets say, <strong>ago in digits</strong>, where is logical place to go and modify it? Model? Don't think so, model keep and operate with data, view represent it, so you example seem's fine to me.</p>\n"}, {"tags": [], "owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "is_accepted": false, "score": 1, "last_activity_date": 1491429901, "last_edit_date": 1491429901, "creation_date": 1491426636, "answer_id": 43241684, "question_id": 43240801, "link": "https://stackoverflow.com/questions/43240801/moving-logic-from-view-to-model-in-rails/43241684#43241684", "title": "Moving logic from view to model in Rails", "body": "<p>Lets put the discussion aside for a second and look at how we could salvage your attempt:</p>\n\n<pre><code>class Review\n  def time_posted\n    \"posted  #{ time_ago_in_words(self.created_at) } ago\"\n  end\nend\n</code></pre>\n\n<p>We have changed the method so that it works on <code>self</code> - meaning the object to which the method belongs:</p>\n\n<pre><code>&lt;p class=\"grey\"&gt;&lt;i&gt;&lt;%= r.time_posted %&gt;&lt;/i&gt;&lt;/p&gt; \n</code></pre>\n\n<p>However its pretty iffy - we moved the logic from the view but we stuffed it into the model. The models job is to keep track of the business logic, and when you consider how much is actually shoved into the models in rails (validations, callbacks, I18n, associations, state tracking, etc) shoving presentation logic in the as well becomes pretty unappealing.</p>\n\n<p>So what can you do?</p>\n\n<h3>1. Create a helper method:</h3>\n\n<pre><code>module ReviewHelper\n  def time_posted(r)\n    \"posted  #{ time_ago_in_words(r.created_at) } ago\"\n  end\nend\n\n&lt;p class=\"grey\"&gt;&lt;i&gt;&lt;%= time_posted(r) %&gt;&lt;/i&gt;&lt;/p&gt; \n</code></pre>\n\n<p>Basically helpers are just modules - rails takes all the helpers declared in <code>/app/helpers</code> and uses them to extend the <strong>view context</strong> so that you can call them from your views. Its simple and keeps the view logic tucked away.</p>\n\n<h3>2. use the <a href=\"http://nithinbekal.com/posts/rails-presenters/\" rel=\"nofollow noreferrer\">presenter pattern</a>:</h3>\n\n<pre><code>class ReviewPresenter &lt; SimpleDelegator\n  def time_posted(r)\n    \"posted  #{ time_ago_in_words(r.created_at) } ago\"\n  end\nend\n\nclass Review\n  def present \n    @presenter ||= ReviewPresenter.new(self)\n  end\nend\n</code></pre>\n\n<hr>\n\n<pre><code>&lt;% @reviews.map(:present).each do |r| %&gt;\n  &lt;p class=\"grey\"&gt;&lt;i&gt;&lt;%= r.time_posted %&gt;&lt;/i&gt;&lt;/p&gt; \n&lt;% end %&gt;\n</code></pre>\n\n<p>This makes it nice and encapsulated and avoids putting tons of methods into the \"global\" view context namespace like a helper does. But if its worth the extra complexity is up to you.</p>\n\n<p>There are several gems which supposedly make the presenter pattern easier to work with like <a href=\"https://github.com/drapergem/draper\" rel=\"nofollow noreferrer\">draper</a>.</p>\n"}], "owner": {"reputation": 1740, "user_id": 6749371, "user_type": "registered", "accept_rate": 32, "profile_image": "https://www.gravatar.com/avatar/1fb6335a13491c2ead854c6c24a81771?s=128&d=identicon&r=PG&f=1", "display_name": "J Seabolt", "link": "https://stackoverflow.com/users/6749371/j-seabolt"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 501, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1491429901, "creation_date": 1491423269, "last_edit_date": 1491423943, "question_id": 43240801, "link": "https://stackoverflow.com/questions/43240801/moving-logic-from-view-to-model-in-rails", "title": "Moving logic from view to model in Rails", "body": "<p>I am trying to be better about keeping logic out of my views and in my models. I am building a Rails app. It has a <code>Review</code> model and an <code>Album</code> model. This is some logic in the <code>album/show.html.erb</code> view. I would like to move this to the <code>Review</code> model, but I am unsure about how to do it. </p>\n\n<pre><code>&lt;% @reviews.each do |r| %&gt;\n  &lt;div&gt;\n    &lt;div class=\"review-rating\" data-number=\"&lt;%= r.rating %&gt;\"&gt;\n    &lt;/div&gt;\n    &lt;p class=\"white\"&gt;&lt;%= r.comment %&gt;&lt;/p&gt;\n    &lt;p class=\"grey\"&gt;&lt;i&gt;posted &lt;%= time_ago_in_words(r.created_at) %&gt; ago&lt;/i&gt;&lt;/p&gt; \n    &lt;% if user_signed_in? %&gt;\n      &lt;% if current_user.id == r.user_id %&gt; \n        &lt;%= link_to 'Edit', edit_album_review_path(@album, r.id), class: 'grey' %&gt; |\n        &lt;%= link_to 'Delete', album_review_path(@album, r.id), method: :delete, data: {confirm: \"Are you sure?\"}, class: 'grey' %&gt;\n        &lt;br /&gt;&lt;br /&gt;\n      &lt;% end %&gt; \n    &lt;% else %&gt; \n      &lt;br /&gt;\n    &lt;% end %&gt;\n  &lt;/div&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>Specifically, I would like to move this part</p>\n\n<pre><code>&lt;p class=\"grey\"&gt;&lt;i&gt;posted &lt;%= time_ago_in_words(r.created_at) %&gt; ago&lt;/i&gt;&lt;/p&gt; \n</code></pre>\n\n<p>I am getting hung up on the fact that the code relies on the <code>.each</code> method. I am unsure how to work around that in the model. I tried this: </p>\n\n<pre><code>&lt;p class=\"grey\"&gt;&lt;i&gt;&lt;%= time_posted(r) %&gt;&lt;/i&gt;&lt;/p&gt; \n</code></pre>\n\n<p>with this in the <code>review.rb</code> model </p>\n\n<pre><code>def time_posted(r)\n  \"posted  #{time_ago_in_words(r.created_at)} ago\"\nend\n</code></pre>\n\n<p>But then Rails throws this error:</p>\n\n<blockquote>\n  <p>\"undefined method `time_posted' for #&lt;#:0x007fff2ab8a8e0>\"</p>\n</blockquote>\n\n<p>Help would be appreciated. </p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 1670, "user_id": 6388521, "user_type": "registered", "accept_rate": 69, "profile_image": "https://lh4.googleusercontent.com/-VdFWPJVSpRc/AAAAAAAAAAI/AAAAAAAAAFo/vCc8QOz6v9Y/photo.jpg?sz=128", "display_name": "Ruslan", "link": "https://stackoverflow.com/users/6388521/ruslan"}, "edited": false, "score": 0, "creation_date": 1491423656, "post_id": 43240600, "comment_id": 73551960, "body": "Can you put traits of both users into separate arrays?"}, {"owner": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "edited": false, "score": 0, "creation_date": 1491424569, "post_id": 43240600, "comment_id": 73552421, "body": "You might need <a href=\"https://en.wikipedia.org/wiki/Levenshtein_distance\" rel=\"nofollow noreferrer\">Levenshtein</a> distance or some full text search fuzzy query"}], "answers": [{"tags": [], "owner": {"reputation": 5382, "user_id": 7671538, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3506350bc4dd02281ad7f99e8e84715c?s=128&d=identicon&r=PG&f=1", "display_name": "gwcodes", "link": "https://stackoverflow.com/users/7671538/gwcodes"}, "is_accepted": true, "score": 2, "last_activity_date": 1491428479, "creation_date": 1491428479, "answer_id": 43242115, "question_id": 43240600, "link": "https://stackoverflow.com/questions/43240600/how-can-i-include-wildcards-in-ruby-include-to-query-for-non-exact-but-similar/43242115#43242115", "title": "How can I include wildcards in Ruby include? to query for non-exact (but similar) matches?", "body": "<p>If you're happy with a wildcard match that works the same way as <code>LIKE</code> in SQL, then it's worth noting that you can <a href=\"https://ruby-doc.org/core-2.4.1/Enumerable.html#method-i-grep\" rel=\"nofollow noreferrer\"><code>grep</code> an Enumberable</a>.</p>\n\n<p>So say you have a list of traits that some would find desirable:</p>\n\n<pre><code>traits = [\"funny\", \"smart\", \"has adorable dimples\"]\n</code></pre>\n\n<p>And you wanted to search for <code>\"adorable\"</code>:</p>\n\n<pre><code>trait_name = \"adorable\"\ntraits.grep /#{trait_name}/\n#=&gt; [\"has adorable dimples\"]\n\ntraits.grep(/#{trait_name}/).any?\n#=&gt; will return true/false, just like include?\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "is_accepted": false, "score": 1, "last_activity_date": 1491428886, "last_edit_date": 1491428886, "creation_date": 1491428580, "answer_id": 43242147, "question_id": 43240600, "link": "https://stackoverflow.com/questions/43240600/how-can-i-include-wildcards-in-ruby-include-to-query-for-non-exact-but-similar/43242147#43242147", "title": "How can I include wildcards in Ruby include? to query for non-exact (but similar) matches?", "body": "<p>The underlying problem here is poor database design. You should use one table to store the normalized traits and a seperate table to join users and traits.</p>\n\n<pre><code>class User &lt; ApplicationRecord\n  has_many :user_traits\n  has_many :traits, through: :user_traits\nend\n\nclass Trait &lt; ApplicationRecord\n  has_many :user_traits\n  has_many :users, through: :user_traits\nend\n\nclass UserTrait &lt; ApplicationRecord\n  belongs_to :user\n  belongs_to :trait\nend\n</code></pre>\n\n<p>The whole point here is that you use ids instead of slow searches on a text column - it also avoids duplicate data. Another big issue is that your approach will not support localization. </p>\n\n<p>If you want to check if a user has a trait you would just do:</p>\n\n<pre><code>user.traits.include?(trait)\n</code></pre>\n\n<p>This is basically the same method you would use for tags, categories or any kind of classification.</p>\n"}], "owner": {"reputation": 67, "user_id": 3172463, "user_type": "registered", "accept_rate": 54, "profile_image": "https://i.stack.imgur.com/2HT8H.png?s=128&g=1", "display_name": "SORA", "link": "https://stackoverflow.com/users/3172463/sora"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1156, "favorite_count": 0, "accepted_answer_id": 43242115, "answer_count": 2, "score": 1, "last_activity_date": 1491673401, "creation_date": 1491422562, "last_edit_date": 1491673401, "question_id": 43240600, "link": "https://stackoverflow.com/questions/43240600/how-can-i-include-wildcards-in-ruby-include-to-query-for-non-exact-but-similar", "title": "How can I include wildcards in Ruby include? to query for non-exact (but similar) matches?", "body": "<p>I'm making a dating app. Each user has his own traits (UserTraits) and the traits he desires in others (DesiredTraits). A user can check if his traits match those desired by another user. </p>\n\n<h3>@user's desired trait show view (current_user checks a desired trait of @user)</h3>\n\n<pre><code>- @current_user_traits = UserTrait.where(\"user = ?\", current_user)\n- @user_desired_trait = DesiredTrait.find(params[:id])\n\n- if @current_user_traits.map {|a| a.trait_name}.include? @user_desired_trait.trait_name\n  @matching_traits = UserTrait.where(\"user = ? AND trait_name LIKE ?\", current_user, \"%#{@user_desired_trait.trait_name}%\")\n- else \n  | \"Sorry, you don't have traits desired by User\"\n</code></pre>\n\n<p>However, this only fills @matching_traits if there is an exact match between @current_user_trait.trait_name and @user_desired_trait.trait_name, as I don't know how to put wildcards in the include? query.</p>\n\n<hr>\n\n<h3>Update:</h3>\n\n<p>There are 2 traits models which belong to a user: UserTraits and DesiredTraits.</p>\n\n<p>I used grep on an array, but it only returns true if the string is the same or if the string in grep is shorter than the one in the array:</p>\n\n<pre><code>- if @current_user_traits.map {|a| a.trait_name}.grep(/#{@user_desired_trait.trait_name}/)\n</code></pre>\n\n<p>How can I do a basic \"full text search fuzzy query\" on the array from the view (like what LIKE does)?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "activerecord"], "comments": [{"owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "edited": false, "score": 0, "creation_date": 1491430768, "post_id": 43239972, "comment_id": 73555282, "body": "<code>SomeModel.where.not(id: SomeModel.joins(taggings: :tag).where(tags: { is_bad: true }))</code>. If you remove <code>.pluck</code> and use a relation instead ActiveRecord can use it to construct a query with a subselect. However what you might want to do is construct a subquery which counts the associated records - how to best accomplish that depends on the DB."}, {"owner": {"reputation": 1, "user_id": 7576833, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fb581e1ed9560de9dc2e5cb67285c55a?s=128&d=identicon&r=PG", "display_name": "Matthew Schultz", "link": "https://stackoverflow.com/users/7576833/matthew-schultz"}, "reply_to_user": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "edited": false, "score": 1, "creation_date": 1491515325, "post_id": 43239972, "comment_id": 73601193, "body": "Yep, that works. It still feels a bit ugly, but it does totally create just a single SQL query, and is a bit faster, so I can get behind it. I didn&#39;t actually know ActiveRecord did subqueries like that. Thanks mate."}], "owner": {"reputation": 1, "user_id": 7576833, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fb581e1ed9560de9dc2e5cb67285c55a?s=128&d=identicon&r=PG", "display_name": "Matthew Schultz", "link": "https://stackoverflow.com/users/7576833/matthew-schultz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 39, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1491420381, "creation_date": 1491420381, "question_id": 43239972, "link": "https://stackoverflow.com/questions/43239972/rails-4-search-for-model-without-a-child-that-has-an-attribute", "title": "Rails 4: Search for Model WITHOUT a child that has an attribute", "body": "<p>There has to be a better way to do this. Say I have:</p>\n\n<pre class=\"lang-ruby prettyprint-override\"><code>class SomeModel &lt; ActiveRecord::Base\n  has_many :taggings\n  has_many :tags, through: :taggings\nend\n\nclass Tagging &lt; ActiveRecord::Base\n  belongs_to :some_model\n  belongs_to :tag\nend\n\nclass Tag\n  # Attributes:\n  # - name:string\n  # - is_bad:boolean\n  has_many :taggings\n  has_many :some_models, through: taggings\nend\n</code></pre>\n\n<p>Some tags are bad, some are not.</p>\n\n<p>I want a scope on SomeModel <code>scope :not_bad</code> such that I get any SomeModels that don't have any tags which are bad (is_bad == true).</p>\n\n<p>At first glance:</p>\n\n<pre><code>SomeModel.joins(taggings: :tag).where('tags.is_bad = FALSE')\n</code></pre>\n\n<p>finds all <strong>tagged</strong> SomeModels without bad tags. Sure. But what about untagged SomeModels? They aren't bad...at least not yet. I need to try includes, to look for records which aren't tagged:</p>\n\n<pre><code>SomeModel.includes(taggings: :tag).where('tags.is_bad = FALSE')\n</code></pre>\n\n<p>Doesn't work, error. A look at the resulting SQL shows that I am not getting a join statement at all. I read some documentation and look at references, giving me:</p>\n\n<pre><code>SomeModel.includes(taggings: :tag).where('tags.is_bad = FALSE').references(taggings: :tag)\n</code></pre>\n\n<p>Which runs, but simply reproduces the output of joins...</p>\n\n<p>At the moment I'm left with the functional, but terrible:</p>\n\n<pre><code>SomeModel.where.not(id: SomeModel.joins(taggings: :tag).where('tags.is_bad = TRUE').pluck(:id))\n</code></pre>\n\n<p>which requires multiple queries, and just feels horrid.</p>\n\n<p>I know there has to be a good way to do this, what am I missing here?</p>\n"}, {"tags": ["ruby", "cross-browser", "rubygems"], "comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1491420068, "post_id": 43239535, "comment_id": 73549862, "body": "Looks like it needs a headless browser if you&#39;re not running X."}, {"owner": {"reputation": 161, "user_id": 7705189, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/06587ae42507bc7c5e34e15e829bb9b6?s=128&d=identicon&r=PG", "display_name": "Hima Chhag", "link": "https://stackoverflow.com/users/7705189/hima-chhag"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1491420577, "post_id": 43239535, "comment_id": 73550163, "body": "Means? What Should I do?"}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1491421190, "post_id": 43239535, "comment_id": 73550510, "body": "Which headless browser do you have installed? If you don&#39;t know, you might not have one, so that could be the problem."}, {"owner": {"reputation": 161, "user_id": 7705189, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/06587ae42507bc7c5e34e15e829bb9b6?s=128&d=identicon&r=PG", "display_name": "Hima Chhag", "link": "https://stackoverflow.com/users/7705189/hima-chhag"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1491421551, "post_id": 43239535, "comment_id": 73550726, "body": "@tadman Thank you so much for your help! So, wouldn&#39;t it open chrome or firefox?"}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1491422352, "post_id": 43239535, "comment_id": 73551185, "body": "I&#39;m not familiar with <code>browser_cmdline</code>, but it could be it&#39;s not finding them properly or launching them correctly."}], "owner": {"reputation": 161, "user_id": 7705189, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/06587ae42507bc7c5e34e15e829bb9b6?s=128&d=identicon&r=PG", "display_name": "Hima Chhag", "link": "https://stackoverflow.com/users/7705189/hima-chhag"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 351, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1491418875, "creation_date": 1491418875, "question_id": 43239535, "link": "https://stackoverflow.com/questions/43239535/using-launchy-gem-gives-an-error", "title": "Using Launchy gem gives an error", "body": "<p>I tried using Launchy gem to open up a browser in my CLI App. I get following error message. </p>\n\n<pre><code>  xprop: unable to open display '' \n  /usr/local/rvm/gems/ruby-2.3.1/gems/launchy-2.4.3/lib/launchy/applications/browser.rb:63:in `browser_cmdline': Unable to find a browser command. If th\n  is is unexpected, Please rerun with environment variable LAUNCHY_DEBUG=true or the '-d' commandline option and file a bug at https://github.com/copiou\n  sfreetime/launchy/issues/new (Launchy::CommandNotFoundError) \n  from /usr/local/rvm/gems/ruby-2.3.1/gems/launchy-2.4.3/lib/launchy/applications/browser.rb:67:in `cmd_and_args' \n  from /usr/local/rvm/gems/ruby-2.3.1/gems/launchy-2.4.3/lib/launchy/applications/browser.rb:78:in `open' \n  from /usr/local/rvm/gems/ruby-2.3.1/gems/launchy-2.4.3/lib/launchy.rb:29:in `open' \n  from /home/himachhag-45739/code/popular-deals-from-slickdeals.net-cli/lib/popular_deals/cli.rb:49:in `open_deal_in_browser' \n  from /home/himachhag-45739/code/popular-deals-from-slickdeals.net-cli/lib/popular_deals/cli.rb:36:in `menu' \n  from /home/himachhag-45739/code/popular-deals-from-slickdeals.net-cli/lib/popular_deals/cli.rb:8:in `call' \n  from ./bin/popular-deals:10:in `&lt;main&gt;'\n</code></pre>\n\n<p>Does anyone know any possible solution?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "getter-setter"], "comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 2, "creation_date": 1491416844, "post_id": 43238836, "comment_id": 73547979, "body": "Why not store them as integers in the range 0..100 and instead change <code>final_price</code> to be <code>price * (1 - discount &#47; 100.0)</code>?"}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1491417538, "post_id": 43238836, "comment_id": 73548379, "body": "&quot;they end up using the 0-100 values instead of 0-1&quot; - because you told it to, in the getter! Why not just remove the overridden getter and see? Or, better, use <code>read_attribute(:discount)</code> directly in <code>final_price</code>? Or, even better, have different names for your 0-100 getter/setter and your 0-1 column (discount_percentage and discount_fraction, or something), so that you are able to use both on demand."}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1491417839, "post_id": 43238836, "comment_id": 73548556, "body": "@tadman &quot;Why not store them as integers in the range 0..100&quot; - the rationale given is &quot;to make calculations simpler&quot;. Indeed, I can see how it can make some reports <i>slightly</i> simpler. <code>SELECT price * discount AS adjusted_price ...</code>."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "reply_to_user": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 2, "creation_date": 1491418082, "post_id": 43238836, "comment_id": 73548695, "body": "@SergioTulentsev That&#39;s a valid use case, but I&#39;m not sure it&#39;s worth the trouble. I&#39;d write a <code>discount_factor</code> method that does the math and use that wherever necessary, leaving it as an integer percentage value."}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1491418712, "post_id": 43238836, "comment_id": 73549084, "body": "@tadman: yep, that&#39;s good too"}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "reply_to_user": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 3, "creation_date": 1491418808, "post_id": 43238836, "comment_id": 73549141, "body": "@SergioTulentsev Generally I like to keep data in the form the user entered it, or expects to be able to view it. Like if they put in inches, keep the raw value they entered and if mm are necessary internally, have a secondary column with normalized values. This avoids problems when your conversion code is screwy, or when you need to switch to a different factor or unit for whatever reason. The user is not really impacted, and their data stays the same."}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 1, "creation_date": 1491418998, "post_id": 43238836, "comment_id": 73549239, "body": "@tadman: yah, I remember a particular debugging session, where it turned out I was escaping urls at least twice. Overwriting the source url in the db. So that I couldn&#39;t even tell if I escaped it once already. It was baaad. :)"}, {"owner": {"reputation": 313, "user_id": 4882906, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/J8X5A.jpg?s=128&g=1", "display_name": "Bernardo Loureiro", "link": "https://stackoverflow.com/users/4882906/bernardo-loureiro"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1491419412, "post_id": 43238836, "comment_id": 73549491, "body": "@tadman I like the idea of keeping the data as the user entered it, your argument makes a lot of sense to me. So that you know what the user entered, no matter if your conversion code changes in the future."}], "answers": [{"comments": [{"owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "edited": false, "score": 0, "creation_date": 1491436545, "post_id": 43243414, "comment_id": 73556939, "body": "Going from 0-1 from 0-100 is simply <code>x * 0.01</code> - I can&#39;t really see the value in storing the converted value in the db as its not complex or expensive to calculate."}], "tags": [], "owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "is_accepted": true, "score": 0, "last_activity_date": 1491437670, "last_edit_date": 1491437670, "creation_date": 1491436137, "answer_id": 43243414, "question_id": 43238836, "link": "https://stackoverflow.com/questions/43238836/representing-percentages-through-getters-and-setters-in-ruby-on-rails/43243414#43243414", "title": "Representing percentages through getters and setters in Ruby on Rails", "body": "<p>I would use a decimal column (to avoid the <a href=\"https://www.noelherrick.com/blog/always-use-decimal-for-money\" rel=\"nofollow noreferrer\">issues with floats and rounding</a>) to store the raw values (as a percentage) and avoid casting.</p>\n\n<p>You can then simply calculate the net price by using:</p>\n\n<pre><code>def final_price\n  price * (discount || 100 * 0.01)\nend\n</code></pre>\n\n<p>When it comes to dealing with presenting the output to the user you way want to look at the <a href=\"https://github.com/RubyMoney/money\" rel=\"nofollow noreferrer\">money gem</a> as it makes it easier to deal with locales and multiple currencies. </p>\n"}], "owner": {"reputation": 313, "user_id": 4882906, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/J8X5A.jpg?s=128&g=1", "display_name": "Bernardo Loureiro", "link": "https://stackoverflow.com/users/4882906/bernardo-loureiro"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 365, "favorite_count": 0, "accepted_answer_id": 43243414, "answer_count": 1, "score": 1, "last_activity_date": 1491437670, "creation_date": 1491416489, "question_id": 43238836, "link": "https://stackoverflow.com/questions/43238836/representing-percentages-through-getters-and-setters-in-ruby-on-rails", "title": "Representing percentages through getters and setters in Ruby on Rails", "body": "<p>In my Rails app, I want users to be able to input percentage values as decimals from 0.0 to 100.0. In the database, I want to store them as decimals from 0.00 to 1.00, so that calculations are easier.</p>\n\n<p>I'm currently doing this through getters and setters in the model. But then, when I write derived attributes in the model, they end up using the 0-100 values instead of 0-1, which defeats the purpose of storing it in 0-1 values for easy calculation:</p>\n\n<pre><code># in the model `quote.rb`\n\ndef discount=(value)\n  write_attribute :discount, value.to_f / 100\nend\ndef discount\n  read_attribute(:discount).to_f * 100\nend\n\ndef final_price\n  price * (1 - discount)\n  # this generates a wrong value, \n  # because if the user inputs discount as 50 to represent 50%, \n  # the final price will be `price * -49`\nend\n</code></pre>\n\n<p>Any ideas on better ways to achieve this?</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 1, "creation_date": 1491415724, "post_id": 43238568, "comment_id": 73547289, "body": "What&#39;s more important is how this relationship is defined. What does <code>Job</code> look like, roughly?"}, {"owner": {"reputation": 3997, "user_id": 3998420, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/55ea542584d3fd2a430c3d409bdafc95?s=128&d=identicon&r=PG&f=1", "display_name": "bkunzi01", "link": "https://stackoverflow.com/users/3998420/bkunzi01"}, "edited": false, "score": 2, "creation_date": 1491416588, "post_id": 43238568, "comment_id": 73547829, "body": "job.photos is a reference to all the job&#39;s photos via Active Record.  Why are you checking if one exists before creating an array?  If you specify the relationship correctly you can just add a new &quot;job photo&quot; without checking if any are there already."}, {"owner": {"reputation": 28612, "user_id": 5025116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7WdYi.jpg?s=128&g=1", "display_name": "Sebastian Palma", "link": "https://stackoverflow.com/users/5025116/sebastian-palma"}, "edited": false, "score": 0, "creation_date": 1491416604, "post_id": 43238568, "comment_id": 73547839, "body": "Try handling the opposite to <code>!job.photos</code>."}, {"owner": {"reputation": 290, "user_id": 5753640, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/pgFc3.jpg?s=128&g=1", "display_name": "Cameron Roe", "link": "https://stackoverflow.com/users/5753640/cameron-roe"}, "edited": false, "score": 0, "creation_date": 1491416662, "post_id": 43238568, "comment_id": 73547875, "body": "Can you post the code for the <code>Job</code> class? When it is throwing this error, does the instance of <code>Job</code> already have <code>photos</code> initialized?"}, {"owner": {"reputation": 561, "user_id": 6389345, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FDfyP.jpg?s=128&g=1", "display_name": "fozzarelo", "link": "https://stackoverflow.com/users/6389345/fozzarelo"}, "edited": false, "score": 1, "creation_date": 1491416796, "post_id": 43238568, "comment_id": 73547957, "body": "yeah.. thats the right question to ask.. i just looked i my schema. photos is a text atribute of Job. thats my prob right there.. Thanks man."}, {"owner": {"reputation": 561, "user_id": 6389345, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FDfyP.jpg?s=128&g=1", "display_name": "fozzarelo", "link": "https://stackoverflow.com/users/6389345/fozzarelo"}, "edited": false, "score": 0, "creation_date": 1491416978, "post_id": 43238568, "comment_id": 73548061, "body": "Yup.. all right comments.. i was treating this as an object instead of an active record. This is more than enough. thank you guys."}, {"owner": {"reputation": 561, "user_id": 6389345, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FDfyP.jpg?s=128&g=1", "display_name": "fozzarelo", "link": "https://stackoverflow.com/users/6389345/fozzarelo"}, "edited": false, "score": 0, "creation_date": 1491417044, "post_id": 43238568, "comment_id": 73548092, "body": "I wonder about the difference between my local and heroku servers though.. im using pg on both."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1491418229, "post_id": 43238568, "comment_id": 73548787, "body": "If you save the record and then reload it later it will be coerced into a string."}, {"owner": {"reputation": 561, "user_id": 6389345, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FDfyP.jpg?s=128&g=1", "display_name": "fozzarelo", "link": "https://stackoverflow.com/users/6389345/fozzarelo"}, "edited": false, "score": 0, "creation_date": 1491421222, "post_id": 43238568, "comment_id": 73550530, "body": "In my schema the photos attribute is type :text, array: true. But when I create a new instance its value is a nil type string. Thats whats causing it."}, {"owner": {"reputation": 561, "user_id": 6389345, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FDfyP.jpg?s=128&g=1", "display_name": "fozzarelo", "link": "https://stackoverflow.com/users/6389345/fozzarelo"}, "edited": false, "score": 0, "creation_date": 1491421374, "post_id": 43238568, "comment_id": 73550625, "body": "I changed my data type, kept :text, array: true.. but gave it a default: [] now it gets treated as an array.. so that solves for new jobs. I still have to find a solution cause I have a lot of jobs under the previous schema. I&#39;m going to close this issue as the title isn&#39;t making sense anymore. i need to reformulate my question."}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1491422461, "post_id": 43238568, "comment_id": 73551239, "body": "Welcome to SO. Please read &quot;<a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a>&quot;, the linked pages, and &quot;<a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>&quot;. Because there is a lot of unknown information in the question we&#39;re having to ask for clarification. That&#39;s a strong indication it&#39;s not asked well. If the problem only occurs on one machine and not another, and the code is the same on both, then you need to compare the configurations."}, {"owner": {"reputation": 561, "user_id": 6389345, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FDfyP.jpg?s=128&g=1", "display_name": "fozzarelo", "link": "https://stackoverflow.com/users/6389345/fozzarelo"}, "reply_to_user": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1491423543, "post_id": 43238568, "comment_id": 73551894, "body": "sorry about that @the Tim Man, the question evolved on me. I was way off. I&#39;d be batting blind without the clarification questions. So purpose was served.. :)"}], "owner": {"reputation": 561, "user_id": 6389345, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FDfyP.jpg?s=128&g=1", "display_name": "fozzarelo", "link": "https://stackoverflow.com/users/6389345/fozzarelo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 89, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1491423120, "creation_date": 1491415598, "last_edit_date": 1491422186, "question_id": 43238568, "link": "https://stackoverflow.com/questions/43238568/why-is-my-array-turning-into-a-string", "title": "Why is my array turning into a string?", "body": "<p>Why is my array turning into a string?</p>\n\n<p>I declared an array and tried to push on it:</p>\n\n<pre><code>  url = params[:img_url]\n  job = Job.find(params[:job_id])\n  puts \"addphoto==============================================b4\"\n  puts \"job.photos:#{job.photos}-#{job.photos.instance_of? Array}\"\n  puts \"=====================================================\"\n  job.photos = Array.new if (!job.photos)\n  puts \"addphoto==============================================aft\"\n  puts \"job.photos:#{job.photos}-#{job.photos.instance_of? Array}\"\n  puts \"=====================================================\"\n  job.photos.push(url)\n</code></pre>\n\n<p>Minus the <code>puts</code> all I'm doing is creating a new empty array if there isn't already one, then I push.</p>\n\n<p>My logs say:</p>\n\n<pre><code>2017-04-05T17:51:41.034394+00:00 app[web.1]: addphoto==============================================b4\n2017-04-05T17:51:41.034467+00:00 app[web.1]: job.photos:-false\n2017-04-05T17:51:41.034490+00:00 app[web.1]: =====================================================\n2017-04-05T17:51:41.034687+00:00 app[web.1]: addphoto==============================================aft\n2017-04-05T17:51:41.034713+00:00 app[web.1]: job.photos:[]-false\n2017-04-05T17:51:41.034715+00:00 app[web.1]: =====================================================\n2017-04-05T17:51:41.035141+00:00 app[web.1]: Completed 500 Internal Server Error in 15ms (ActiveRecord: 6.7ms)\n2017-04-05T17:51:41.036043+00:00 app[web.1]: 10 TID-ox2i47d2w FATAL: \n2017-04-05T17:51:41.036045+00:00 app[web.1]: NoMethodError (undefined method `push' for \"[]\":String):\n2017-04-05T17:51:41.036046+00:00 app[web.1]:   app/controllers/mobilevv/job_controller.rb:266:in `add_photo'\n</code></pre>\n\n<p>Why is my newly created array NOT an array?\nI can't debug it because it only happens in my deployed server. </p>\n\n<p>The exact same code throws this in my local server:</p>\n\n<pre><code>addphoto==============================================b4\njob.photos:-false\n=====================================================\naddphoto==============================================aft\njob.photos:[]-true\n=====================================================\n</code></pre>\n\n<p>What is happening?</p>\n"}, {"tags": ["ruby", "lambda", "proc"], "comments": [{"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 3, "creation_date": 1491412987, "post_id": 43237744, "comment_id": 73545582, "body": "&quot;What&#39;s the reason for this?&quot; - because these are different things with different behaviour. That&#39;s one of the differences between them."}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 2, "creation_date": 1491413240, "post_id": 43237744, "comment_id": 73545752, "body": "Sometimes you do want to return from the entire thing and not just the block. Contrived and silly example: <code>def find_even; [1, 2, 3].each {|elem| return elem if elem.even? }; end</code>. So, if that&#39;s the case, use block/proc. if you want the opposite, use lambda."}, {"owner": {"reputation": 2177, "user_id": 684133, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/28e34bba8a34fc266d15ab1cebafd0a2?s=128&d=identicon&r=PG", "display_name": "Martin Vidner", "link": "https://stackoverflow.com/users/684133/martin-vidner"}, "edited": false, "score": 0, "creation_date": 1491481798, "post_id": 43237744, "comment_id": 73579079, "body": "I see no <code>lambda</code> in the code."}], "answers": [{"comments": [{"owner": {"reputation": 4312, "user_id": 3880254, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/13dffa84d85f3ed70e7156867822246d?s=128&d=identicon&r=PG&f=1", "display_name": "InQusitive", "link": "https://stackoverflow.com/users/3880254/inqusitive"}, "edited": false, "score": 0, "creation_date": 1491493733, "post_id": 43251900, "comment_id": 73588605, "body": "Logical answer."}, {"owner": {"reputation": 32008, "user_id": 322020, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/dce43cb8158a14c3fed02bea797becd7?s=128&d=identicon&r=PG", "display_name": "Nakilon", "link": "https://stackoverflow.com/users/322020/nakilon"}, "edited": false, "score": 0, "creation_date": 1607820913, "post_id": 43251900, "comment_id": 115393652, "body": "The linked answer is 12 years old and already was 9 years old at the moment on this answer. Things have changed meanwhile."}], "tags": [], "owner": {"reputation": 1254, "user_id": 4576274, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/F5Wnd.jpg?s=128&g=1", "display_name": "Pramod", "link": "https://stackoverflow.com/users/4576274/pramod"}, "is_accepted": true, "score": 2, "last_activity_date": 1491472973, "last_edit_date": 1592644375, "creation_date": 1491472973, "answer_id": 43251900, "question_id": 43237744, "link": "https://stackoverflow.com/questions/43237744/proc-return-vs-lambda-return/43251900#43251900", "title": "proc return vs lambda return", "body": "<p>You should see comment in this answer <a href=\"https://stackoverflow.com/a/723/4576274\">https://stackoverflow.com/a/723/4576274</a>.</p>\n<p>It states</p>\n<blockquote>\n<p>A lambda is an anonymous method. Since it's a method, it returns a\nvalue, and the method that called it can do with it whatever it wants,\nincluding ignoring it and returning a different value.</p>\n<p>A Proc is like\npasting in a code snippet. It doesn't act like a method. So when a\nreturn happens within the Proc, that's just part of the code of the\nmethod that called it</p>\n</blockquote>\n"}], "owner": {"reputation": 4312, "user_id": 3880254, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/13dffa84d85f3ed70e7156867822246d?s=128&d=identicon&r=PG&f=1", "display_name": "InQusitive", "link": "https://stackoverflow.com/users/3880254/inqusitive"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 745, "favorite_count": 0, "accepted_answer_id": 43251900, "answer_count": 1, "score": 1, "last_activity_date": 1491472973, "creation_date": 1491412928, "question_id": 43237744, "link": "https://stackoverflow.com/questions/43237744/proc-return-vs-lambda-return", "title": "proc return vs lambda return", "body": "<p>Why is Proc in ruby return before executing remaining codes in a method from which Proc was called?</p>\n\n<pre><code>def hello\n  a = Proc.new{ return }\n  a.call\n  puts \"Hello\"\nend\n\n\ndef proc\n  hello\n  puts \"Proc\"\nend\n</code></pre>\n\n<p>Here <code>return</code> will skip <code>puts \"Hello\"</code> and prints only <code>puts \"Proc\"</code></p>\n\n<p>But <code>lambda</code> prints <code>puts \"Hello\"</code> as well.</p>\n\n<p>What's the reason for this? </p>\n"}, {"tags": ["ruby-on-rails", "ruby", "heroku", "delayed-job", "mailgun"], "answers": [{"tags": [], "owner": {"reputation": 131, "user_id": 2012807, "user_type": "registered", "accept_rate": 22, "profile_image": "https://www.gravatar.com/avatar/455cfdae8ab910b08e83308bdbbdb588?s=128&d=identicon&r=PG", "display_name": "jfredson", "link": "https://stackoverflow.com/users/2012807/jfredson"}, "is_accepted": false, "score": 2, "last_activity_date": 1491407644, "creation_date": 1491407644, "answer_id": 43236065, "question_id": 43235960, "link": "https://stackoverflow.com/questions/43235960/rails-environment-variable-not-getting-set-on-production-on-heroku/43236065#43236065", "title": "Rails Environment Variable Not Getting Set on Production on Heroku", "body": "<p>I'm an idiot, I setup figaro to handle my environment variables and forgot to publish them to heroku:</p>\n\n<pre><code>figaro heroku:set -e production\n</code></pre>\n\n<p>Also, you need to wrap all variables in application.yml in strings, so I also had to update the MAILGUN_PORT to '587'.</p>\n"}], "owner": {"reputation": 131, "user_id": 2012807, "user_type": "registered", "accept_rate": 22, "profile_image": "https://www.gravatar.com/avatar/455cfdae8ab910b08e83308bdbbdb588?s=128&d=identicon&r=PG", "display_name": "jfredson", "link": "https://stackoverflow.com/users/2012807/jfredson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 428, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1491407644, "creation_date": 1491407323, "question_id": 43235960, "link": "https://stackoverflow.com/questions/43235960/rails-environment-variable-not-getting-set-on-production-on-heroku", "title": "Rails Environment Variable Not Getting Set on Production on Heroku", "body": "<p>I am trying to setup ActionMail using Mailgun and DelayedJob on Heroku and I've got everything working to the point where DelayedJob is initiating the request with Mailgun, but I'm getting a <code>400 Bad Request: 'from' parameter is missing</code> from Mailgun.</p>\n\n<p>My mailer is <code>app/mailers/example_mailer.rb</code>:</p>\n\n<pre><code>class ExampleMailer &lt; ApplicationMailer\n\ndef sample_email(user)\n    @user = user\n    mailgun_client = Mailgun::Client.new ENV['MAILGUN_API_KEY']\n    message_params = {:from     =&gt; ENV['GMAIL_USERNAME'],\n                      :to       =&gt; @user.email,\n                      :subject  =&gt; 'Sample Mail Using Mailgun API',\n                      :text     =&gt; 'Testing...'}\n\n    mailgun_client.send_message ENV['MAILGUN_DOMAIN'], message_params\n\n  end\nend\n</code></pre>\n\n<p>My <code>config/application.yml</code>:</p>\n\n<pre><code>MAILGUN_API_KEY:  '[REDACTED]'\nMAILGUN_ADDRESS:  'smtp.mailgun.org'\nMAILGUN_PORT:     587\nMAILGUN_DOMAIN:   '[REDACTED]'\nMAILGUN_USERNAME: '[REDACTED]'\nMAILGUN_PASSWORD: '[REDACTED]'\nGMAIL_USERNAME:   '[REDACTED]'\n</code></pre>\n\n<p>So since the error is that the from field isn't being set properly I logged into my heroku console and tested my <code>ENV</code> variables and lo and behold all of them are present except <code>ENV['GMAIL_USERNAME']</code>. Is there any reason why this variable would be missing in my production environment? I'm not sure how to debug this as I've never come across a problem with environment variables like this before.</p>\n"}, {"tags": ["ruby", "testunit", "data-driven-tests"], "answers": [{"comments": [{"owner": {"reputation": 105, "user_id": 4236311, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1e1611e5bc0bfba7fc2130cf5d3b84eb?s=128&d=identicon&r=PG&f=1", "display_name": "mleewing", "link": "https://stackoverflow.com/users/4236311/mleewing"}, "edited": false, "score": 0, "creation_date": 1491407578, "post_id": 43235968, "comment_id": 73542185, "body": "Thanks.  I mostly just wanted to get a bare basics test working so I could make sure I had the syntax right before trying to do anything more complicated.  This is my first attempt at using Test::Unit."}], "tags": [], "owner": {"reputation": 67463, "user_id": 203130, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/1RE8c.jpg?s=128&g=1", "display_name": "coreyward", "link": "https://stackoverflow.com/users/203130/coreyward"}, "is_accepted": false, "score": 0, "last_activity_date": 1491407337, "creation_date": 1491407337, "answer_id": 43235968, "question_id": 43235746, "link": "https://stackoverflow.com/questions/43235746/using-testunitdata/43235968#43235968", "title": "Using Test::Unit::Data", "body": "<p>I'm not familiar with this module in particular, but since <code>data</code> is defined as an instance method on <code>Test::Unit::Data</code> and <code>Test::Unit::Data</code> is a Module, this works:</p>\n\n<pre><code>class YourTest &lt; Test::Unit::TestCase\n  include Test::Unit::Data\n\n  data(\u2026)\nend\n</code></pre>\n\n<p>This said, you're going to want to take a closer look at the docs you linked since your example usage is looking like copy-pasta. </p>\n"}, {"tags": [], "owner": {"reputation": 105, "user_id": 4236311, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1e1611e5bc0bfba7fc2130cf5d3b84eb?s=128&d=identicon&r=PG&f=1", "display_name": "mleewing", "link": "https://stackoverflow.com/users/4236311/mleewing"}, "is_accepted": false, "score": 0, "last_activity_date": 1491488744, "creation_date": 1491488744, "answer_id": 43258050, "question_id": 43235746, "link": "https://stackoverflow.com/questions/43235746/using-testunitdata/43258050#43258050", "title": "Using Test::Unit::Data", "body": "<p>Turns out that the problem was that I was using an older version of Ruby that did not include the class I was trying to use.  Updating to a newer version solved the problem.  </p>\n"}], "owner": {"reputation": 105, "user_id": 4236311, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1e1611e5bc0bfba7fc2130cf5d3b84eb?s=128&d=identicon&r=PG&f=1", "display_name": "mleewing", "link": "https://stackoverflow.com/users/4236311/mleewing"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 99, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1491488744, "creation_date": 1491406628, "question_id": 43235746, "link": "https://stackoverflow.com/questions/43235746/using-testunitdata", "title": "Using Test::Unit::Data", "body": "<p>I am trying to create some data driven API tests using Test::Unit for ruby.  The eventual intention is to read a series of test cases in from a .csv file.  In looking for something that would be the equivalent of @dataprovider for testng, I found a class called Data which looks like exactly what I need.  </p>\n\n<p><a href=\"http://www.rubydoc.info/github/test-unit/test-unit/Test/Unit/Data/ClassMethods\" rel=\"nofollow noreferrer\">http://www.rubydoc.info/github/test-unit/test-unit/Test/Unit/Data/ClassMethods</a></p>\n\n<p>However, when I tried to create a test case to try to get it working, I get an error saying </p>\n\n<p>\"initial_test.rb:4:in <code>&lt;class:InitialTest&gt;': undefined method</code>data' for InitialTest:Class (NoMethodError)\n\"</p>\n\n<p>code I was running: </p>\n\n<pre><code>    require \"test/unit\"\nclass InitialTest &lt; Test::Unit::TestCase\n    data(\"true\" =&gt; [true],\n         \"false\" =&gt; [false])\n    def test_true_is_true(data)\n        value = data\n        assert(false, \"FAIL!\")\n    end\nend\n</code></pre>\n\n<p>I can't seem to find any mention of the Data class outside of the documentation.  Has anyone used this class?  Am I missing something?  </p>\n"}, {"tags": ["arrays", "ruby", "while-loop", "reverse"], "comments": [{"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 4, "creation_date": 1491406478, "post_id": 43235616, "comment_id": 73541401, "body": "<code>(0..3).to_a.combination(2).map { |a, b| a..b }</code> returns the ranges in the expected order."}, {"owner": {"reputation": 9729, "user_id": 4554116, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/cu8de.png?s=128&g=1", "display_name": "Julius", "link": "https://stackoverflow.com/users/4554116/julius"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 1, "creation_date": 1491406805, "post_id": 43235616, "comment_id": 73541663, "body": "@Stefan Well thats a great solution in just a few seconds. If you could write an answer with a brief explanation, I would accept it and maybe this will help someone else as well, some day.."}], "answers": [{"comments": [{"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 2, "creation_date": 1491411303, "post_id": 43236097, "comment_id": 73544624, "body": "\u2026 and the sort <i>does</i> work because <code>Array</code>s are guaranteed to be compared lexicographically. (I think it&#39;s mentioned in the docs for <code>Array#&lt;=&gt;</code>.)"}], "tags": [], "owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "is_accepted": true, "score": 7, "last_activity_date": 1491407738, "creation_date": 1491407738, "answer_id": 43236097, "question_id": 43235616, "link": "https://stackoverflow.com/questions/43235616/how-to-reverse-arrays-while-inserting-them-via-the-while-loop/43236097#43236097", "title": "How to reverse arrays while inserting them via the while loop", "body": "<blockquote>\n  <p>So the output I would get:</p>\n\n<pre><code>=&gt; [0..1, 0..2, 0..3, 1..2, 1..3, 2..3]\n</code></pre>\n</blockquote>\n\n<p>This is exactly what <a href=\"http://ruby-doc.org/core-2.4.1/Array.html#method-i-combination\" rel=\"noreferrer\"><code>Array#combination</code></a> returns:</p>\n\n<pre><code>a = [0, 1, 2, 3]\na.combination(2).to_a\n#=&gt; [[0, 1], [0, 2], [0, 3], [1, 2], [1, 3], [2, 3]]\n</code></pre>\n\n<p>To get ranges:</p>\n\n<pre><code>a.combination(2).map { |a, b| a..b }\n#=&gt; [0..1, 0..2, 0..3, 1..2, 1..3, 2..3]\n</code></pre>\n\n<p>However, note that the documentation says: (emphasis added)</p>\n\n<blockquote>\n  <p>The implementation makes <strong>no guarantees about the order</strong> in which the combinations are yielded.</p>\n</blockquote>\n\n<p>So you might want to explicitly <a href=\"http://ruby-doc.org/core-2.4.1/Enumerable.html#method-i-sort\" rel=\"noreferrer\"><code>sort</code></a> the result:</p>\n\n<pre><code> a.combination(2).sort\n #=&gt; [[0, 1], [0, 2], [0, 3], [1, 2], [1, 3], [2, 3]]\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1491461172, "post_id": 43239584, "comment_id": 73564610, "body": "A more idiomatic implementation: <code>(0...3).flat_map { |a| (a+1..3).map { |b| a..b } }</code> with <code>0</code> being <code>first_index</code> and <code>3</code> being <code>last_index</code>"}], "tags": [], "owner": {"reputation": 435, "user_id": 1016615, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04c2fcb90d02fa73a96c8ed70ed01e95?s=128&d=identicon&r=PG", "display_name": "marzhaev", "link": "https://stackoverflow.com/users/1016615/marzhaev"}, "is_accepted": false, "score": 1, "last_activity_date": 1491419028, "creation_date": 1491419028, "answer_id": 43239584, "question_id": 43235616, "link": "https://stackoverflow.com/questions/43235616/how-to-reverse-arrays-while-inserting-them-via-the-while-loop/43239584#43239584", "title": "How to reverse arrays while inserting them via the while loop", "body": "<p>If the order is critical, you could use an intermediary array. </p>\n\n<pre><code>first_index = 0\nlast_index = 3\nranges = []\nsub_ranges = []\n\nwhile first_index != last_index\n    while last_index != 0\n        if first_index &lt; last_index \n            sub_ranges &lt;&lt; (first_index..last_index)\n        end \n            last_index -= 1\n    end\n    ranges &lt;&lt; sub_ranges.reverse\n    sub_ranges = []\n    first_index += 1\n    last_index = 3\nend\nranges.flatten!\np ranges\n</code></pre>\n\n<p>It is a far shot, but on large number array manipulations become relatively expensive. You could rely more on numerical work. Alternatively, you just like this one more:</p>\n\n<pre><code>first_index = 0\nlast_index = 3\nranges = []\n\ny = first_index + 1\n\nwhile first_index != last_index\n    while y &lt;= last_index\n      ranges &lt;&lt; (first_index..y)\n      y += 1\n    end\n    first_index += 1\n    y = first_index + 1\nend\n</code></pre>\n"}], "owner": {"reputation": 9729, "user_id": 4554116, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/cu8de.png?s=128&g=1", "display_name": "Julius", "link": "https://stackoverflow.com/users/4554116/julius"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 68, "favorite_count": 0, "accepted_answer_id": 43236097, "answer_count": 2, "score": 2, "last_activity_date": 1491419028, "creation_date": 1491406253, "last_edit_date": 1491412694, "question_id": 43235616, "link": "https://stackoverflow.com/questions/43235616/how-to-reverse-arrays-while-inserting-them-via-the-while-loop", "title": "How to reverse arrays while inserting them via the while loop", "body": "<p>With this function I generate needed ranges:</p>\n\n<pre><code>first_index = 0\nlast_index = 3\nranges = []\n\nwhile first_index != last_index\n  while last_index != 0\n    if first_index &lt; last_index \n      ranges &lt;&lt; (first_index..last_index)\n    end \n      last_index -= 1\n  end\n  first_index += 1\n  last_index = 3\nend \n\np ranges\n</code></pre>\n\n<p>The output is:</p>\n\n<pre><code>[0..3, 0..2, 0..1, 1..3, 1..2, 2..3]\n</code></pre>\n\n<p>I need to revert the output of the nested <code>while</code> loop, after it finishes. So in this example, I need:</p>\n\n<pre><code> [0..3, 0..2, 0..1].reverse \n [1..3, 1..2].reverse\n [2..3].reverse (wouldn't make any different on this, though)\n</code></pre>\n\n<p>The output I would get is:</p>\n\n<pre><code>[0..1, 0..2, 0..3, 1..2, 1..3, 2..3]\n</code></pre>\n\n<p>Can I invoke <code>reverse</code> somehow in that function? <code>last_index</code> could be any integer. I used 3 just to shorten the output.</p>\n"}, {"tags": ["ruby", "rubyzip"], "comments": [{"owner": {"reputation": 323, "user_id": 5384061, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/8a7047a8adf8adc426d3a17f3e97b146?s=128&d=identicon&r=PG&f=1", "display_name": "Hellfar", "link": "https://stackoverflow.com/users/5384061/hellfar"}, "edited": false, "score": 0, "creation_date": 1491408470, "post_id": 43234973, "comment_id": 73542817, "body": "Should I post as an issue to the gem <code>rubyzip</code> if that is not the correct behavior ?"}], "answers": [{"tags": [], "owner": {"reputation": 323, "user_id": 5384061, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/8a7047a8adf8adc426d3a17f3e97b146?s=128&d=identicon&r=PG&f=1", "display_name": "Hellfar", "link": "https://stackoverflow.com/users/5384061/hellfar"}, "is_accepted": true, "score": 0, "last_activity_date": 1491814868, "creation_date": 1491814868, "answer_id": 43318921, "question_id": 43234973, "link": "https://stackoverflow.com/questions/43234973/rubyzip-fail-to-add-a-file-with-a-same-name-from-another-folder-zipentryexist/43318921#43318921", "title": "Rubyzip fail to add a file with a same name from another folder [Zip::EntryExistsError]", "body": "<p>Thanks to @simonoff (<a href=\"https://github.com/rubyzip/rubyzip/issues/323\" rel=\"nofollow noreferrer\">here</a>), I shouldn't use the basename but the full relative path so Rubyzip could make the difference between <code>test1</code> and <code>folder2/test1</code>.</p>\n\n<p>Here is a code fixing it:</p>\n\n<pre><code>basename = File.basename path\ndirname = File.dirname path\ninternal_path = path.sub %r[^#{__dir__}/], ''\n\narchive = File.join(dirname, basename) + '.zip'\nFileUtils.rm archive, force: true\n\nZip::File.open(archive, Zip::File::CREATE) do | zipfile |\n  Dir[\"#{internal_path}/**/**\"].map{|e|e.sub %r[^#{internal_path}/],''}.reject{|f|f==archive}.each do | item |\n    zipfile.add(item, File.join(internal_path, item))\n  end\nend\n</code></pre>\n\n<p>There is certainly a much cleaner way to do it.</p>\n"}], "owner": {"reputation": 323, "user_id": 5384061, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/8a7047a8adf8adc426d3a17f3e97b146?s=128&d=identicon&r=PG&f=1", "display_name": "Hellfar", "link": "https://stackoverflow.com/users/5384061/hellfar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 904, "favorite_count": 0, "accepted_answer_id": 43318921, "answer_count": 1, "score": 2, "last_activity_date": 1491814868, "creation_date": 1491404597, "question_id": 43234973, "link": "https://stackoverflow.com/questions/43234973/rubyzip-fail-to-add-a-file-with-a-same-name-from-another-folder-zipentryexist", "title": "Rubyzip fail to add a file with a same name from another folder [Zip::EntryExistsError]", "body": "<p>Using the following test tree folder for example:</p>\n\n<pre><code>- test1\n- folder2\n  - test1 # This is the file rubyzip will break on.\n  - test2\n</code></pre>\n\n<p>And copied this code from <a href=\"https://stackoverflow.com/questions/11509802/zipping-a-directory-in-rails\">here</a>:</p>\n\n<pre><code>path = File.expand_path path\narchive = File.join(__dir__, File.basename(path)) + '.zip'\nFileUtils.rm archive, force: true\n\nZip::File.open(archive, Zip::File::CREATE) do | zipfile |\n  Dir[\"#{path}/**/**\"].reject{|f|f==archive}.each do | item |\n    basename = File.basename(item)\n    zipfile.add(basename, item)\n  end\nend\n</code></pre>\n\n<p>It fails because there is two files having the same name even if their are not in the same directory (<code>test1</code> in my example).</p>\n\n<p>Is there something I am missing ?</p>\n"}, {"tags": ["ruby", "cucumber", "watir-webdriver"], "comments": [{"owner": {"reputation": 44680, "user_id": 1200545, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fbbfea5f6583c16f96fc11ef821cfeee?s=128&d=identicon&r=PG&f=1", "display_name": "Justin Ko", "link": "https://stackoverflow.com/users/1200545/justin-ko"}, "edited": false, "score": 2, "creation_date": 1491405057, "post_id": 43234953, "comment_id": 73540412, "body": "Not likely related to your issue, but Watir-Webdriver is deprecated. It has been replaced by Watir v6.0 or greater."}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 1, "creation_date": 1491413090, "post_id": 43234953, "comment_id": 73545653, "body": "Welcome to Stack Overflow. Please read &quot;<a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a>&quot; and the linked pages. SO isn&#39;t a discussion list, it&#39;s a reference site, like a cookbook or encyclopedia. As such concise questions are preferred over verbose ones; A little personality is great but remember, you&#39;re creating a new entry in the book to help others, not writing in a message thread so keep it to the point. Also, salutations, valedictions and signatures are not desirable."}, {"owner": {"reputation": 1772, "user_id": 5743300, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/86b739012f3bafbce2e40f59f3291c0e?s=128&d=identicon&r=PG&f=1", "display_name": "Emjey", "link": "https://stackoverflow.com/users/5743300/emjey"}, "edited": false, "score": 0, "creation_date": 1491458657, "post_id": 43234953, "comment_id": 73563204, "body": "Can you put these <code>before do</code> and <code>after do</code> in hooks.rb? In the steps.rb file, just mention the code for your cucumber steps, and before that declare   <code>browser = Watir::Browser.new :ff</code>"}, {"owner": {"reputation": 11, "user_id": 7821443, "user_type": "registered", "profile_image": "https://graph.facebook.com/1618220731551668/picture?type=large", "display_name": "Dmitriy Andrienko", "link": "https://stackoverflow.com/users/7821443/dmitriy-andrienko"}, "reply_to_user": {"reputation": 1772, "user_id": 5743300, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/86b739012f3bafbce2e40f59f3291c0e?s=128&d=identicon&r=PG&f=1", "display_name": "Emjey", "link": "https://stackoverflow.com/users/5743300/emjey"}, "edited": false, "score": 0, "creation_date": 1491464422, "post_id": 43234953, "comment_id": 73566610, "body": "@MrityunjeyanS    thanks that is help fo my case.But i put not in hooks.rb i put it on env.rb"}, {"owner": {"reputation": 1772, "user_id": 5743300, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/86b739012f3bafbce2e40f59f3291c0e?s=128&d=identicon&r=PG&f=1", "display_name": "Emjey", "link": "https://stackoverflow.com/users/5743300/emjey"}, "edited": false, "score": 0, "creation_date": 1491476157, "post_id": 43234953, "comment_id": 73574919, "body": "@DmitriyAndrienko : Cool! on a side note the best practice is to put it in <code>hooks.rb</code>. <code>env.rb</code> usually should consist the desired capabilities plus server environment codes. :)  I have updated the answer. Please accept  the answer, if it had helped you in resolving your bug :)   Thanks"}], "answers": [{"tags": [], "owner": {"reputation": 1772, "user_id": 5743300, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/86b739012f3bafbce2e40f59f3291c0e?s=128&d=identicon&r=PG&f=1", "display_name": "Emjey", "link": "https://stackoverflow.com/users/5743300/emjey"}, "is_accepted": false, "score": 0, "last_activity_date": 1491476271, "creation_date": 1491476271, "answer_id": 43253186, "question_id": 43234953, "link": "https://stackoverflow.com/questions/43234953/why-does-watir-webdriver-open-two-browsers/43253186#43253186", "title": "Why does Watir-webdriver open two browsers?", "body": "<p>Can you put these before do and after do in <code>hooks.rb</code>? In the <code>steps.rb</code> file, just mention the code for your cucumber steps, and before that declare <code>browser = Watir::Browser.new :ff</code></p>\n\n<p>The best practice is to put it in hooks.rb. env.rb usually should consist the desired capabilities plus server environment codes. :)</p>\n"}, {"tags": [], "owner": {"reputation": 176, "user_id": 4902498, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/VoZOB.jpg?s=128&g=1", "display_name": "Kaushal Rupani", "link": "https://stackoverflow.com/users/4902498/kaushal-rupani"}, "is_accepted": false, "score": 0, "last_activity_date": 1492669811, "creation_date": 1492669811, "answer_id": 43511849, "question_id": 43234953, "link": "https://stackoverflow.com/questions/43234953/why-does-watir-webdriver-open-two-browsers/43511849#43511849", "title": "Why does Watir-webdriver open two browsers?", "body": "<p>What you have put in step file should go in hooks.rb file.</p>\n\n<p>Please install gem called testnow. \nIt will help you to create most standard and easy to use watir-webdriver framework with all pre-configured browsers.</p>\n\n<p>Steps:   </p>\n\n<pre><code>1) gem install testnow   \n2) testnow watir_cucumber_now\n</code></pre>\n\n<p>It will as you to install dependecies, enter Y to set it up completely.\nIt will create robust framework with a sample scenario.</p>\n\n<p>Just run the sample scenario with any of the following commands.</p>\n\n<pre><code>rake testnow BROWSER=firefox\nrake testnow BROWSER=chrome\nrake testnow BROWSER=opera\n</code></pre>\n\n<p>This will only work provided you have browsers pre-installed and webdriver present in PATH variable.</p>\n\n<p>Please comment for more information.</p>\n\n<p>Hope it helps!!</p>\n"}], "owner": {"reputation": 11, "user_id": 7821443, "user_type": "registered", "profile_image": "https://graph.facebook.com/1618220731551668/picture?type=large", "display_name": "Dmitriy Andrienko", "link": "https://stackoverflow.com/users/7821443/dmitriy-andrienko"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 234, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1492669811, "creation_date": 1491404552, "last_edit_date": 1491413008, "question_id": 43234953, "link": "https://stackoverflow.com/questions/43234953/why-does-watir-webdriver-open-two-browsers", "title": "Why does Watir-webdriver open two browsers?", "body": "<p>I'm working on website test automation using Cucumber/Ruby/Selenium-Webdriver/Capybara. I want to switch to Watir-Webdriver in combination with Cucumber and Ruby, but I'm struggling with the following:</p>\n\n<p>Every time I run my cucumber test, Watir opens two browser windows, a blank screen to the site I configurated as default, plus another in which the actual test steps are executed.</p>\n\n<p>My 'Support/env.rb' file has:</p>\n\n<pre><code>require 'allure-cucumber'\nrequire 'rspec'\nrequire 'watir-webdriver'\n\nAllureCucumber.configure do |c|\n  c.output_dir = 'D:\\Test\\result'\n  c.clean_dir  = true\n  c.tms_prefix      = '@PRACTEST--'\n  c.issue_prefix    = '@JIRA++'\n  c.severity_prefix = '@URGENCY:'\n  c.tms_prefix =  ''\nend\n</code></pre>\n\n<p>My steps file begins with:</p>\n\n<pre><code>require 'watir-webdriver'\nrequire 'cucumber'\nrequire 'rspec'\nrequire_relative 'D:\\EntelTest\\src\\PageObject\\home_page.rb'\n\nBefore  do\n  @test = AbstractPage.new(Watir::Browser.new :ff)\n  @test.full_size\nend\n\nAfter  do\n  @test.quit\nend\n\n\nhome_page = nil\n\n\nWhen(/^Go to home page$/) do\n  home_page  = @test.goToHomePage\n\nend\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "linux"], "comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1491416244, "post_id": 43234637, "comment_id": 73547599, "body": "I&#39;m not even sure this is a supported filesystem, it&#39;s missing critical things that are expected on POSIX. You may need to create it on your Linux filesystem, then copy it over once everything&#39;s in place. Even then there&#39;s no guarantee it will work going forward, a lack of permissions support is a big deal."}], "answers": [{"comments": [{"owner": {"reputation": 413, "user_id": 5149471, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh3.googleusercontent.com/-Sqr06HaqS7s/AAAAAAAAAAI/AAAAAAAAABc/0GICbgbAH0A/photo.jpg?sz=128", "display_name": "Akash Pinnaka", "link": "https://stackoverflow.com/users/5149471/akash-pinnaka"}, "edited": false, "score": 0, "creation_date": 1491516435, "post_id": 43238657, "comment_id": 73601652, "body": "I am using RVM for ruby and I didn&#39;t understand firstline. What is file_name?"}], "tags": [], "owner": {"reputation": 418, "user_id": 6331585, "user_type": "registered", "accept_rate": 60, "profile_image": "https://lh5.googleusercontent.com/--Spi1QdCgC0/AAAAAAAAAAI/AAAAAAAABnU/sJNL2oLTBHY/photo.jpg?sz=128", "display_name": "Vishwas Nahar", "link": "https://stackoverflow.com/users/6331585/vishwas-nahar"}, "is_accepted": true, "score": 1, "last_activity_date": 1491415928, "creation_date": 1491415928, "answer_id": 43238657, "question_id": 43234637, "link": "https://stackoverflow.com/questions/43234637/cant-create-rails-app-mounted-ntfs-partition/43238657#43238657", "title": "Can&#39;t create Rails app mounted NTFS partition", "body": "<pre><code>chmod(mode_int, file_name, ... ) \n</code></pre>\n\n<p>Changes permission bits on the named file to the bit pattern represented by mode_int. Actual effects are operating system dependent. On Unix systems, see chmod for details. Returns the number of files processed.</p>\n\n<p>You statically give permission</p>\n\n<pre><code> File.chmod(0604, '/path/to/file') \n</code></pre>\n\n<p>rbenv install 2.3.0</p>\n\n<p>Or you can find all files and directories that you might not have write access to by </p>\n\n<pre><code>find `rbenv root`/versions ! -perm -u+w\n</code></pre>\n\n<p><a href=\"https://www.ibm.com/support/knowledgecenter/en/SSLTBW_2.1.0/com.ibm.zos.v2r1.bpxa500/chmod.htm\" rel=\"nofollow noreferrer\">chmod</a></p>\n"}], "owner": {"reputation": 413, "user_id": 5149471, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh3.googleusercontent.com/-Sqr06HaqS7s/AAAAAAAAAAI/AAAAAAAAABc/0GICbgbAH0A/photo.jpg?sz=128", "display_name": "Akash Pinnaka", "link": "https://stackoverflow.com/users/5149471/akash-pinnaka"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 64, "favorite_count": 0, "accepted_answer_id": 43238657, "answer_count": 1, "score": 0, "last_activity_date": 1491416283, "creation_date": 1491403796, "last_edit_date": 1491416283, "question_id": 43234637, "link": "https://stackoverflow.com/questions/43234637/cant-create-rails-app-mounted-ntfs-partition", "title": "Can&#39;t create Rails app mounted NTFS partition", "body": "<p>When I am trying to create a rails app in /dos partition in linux mint 18.1, it is throwing the following error</p>\n\n<pre><code>/home/akash/.rvm/rubies/ruby-2.3.0/lib/ruby/2.3.0/fileutils.rb:1345:in `chmod': Operation not permitted @ chmod_internal - /dos/projects/rails/little_farmers_family_daycare/bin (Errno::EPERM)\n        from /home/akash/.rvm/rubies/ruby-2.3.0/lib/ruby/2.3.0/fileutils.rb:1345:in `chmod'\n        from /home/akash/.rvm/rubies/ruby-2.3.0/lib/ruby/2.3.0/fileutils.rb:1026:in `block (2 levels) in chmod_R'\n        from /home/akash/.rvm/rubies/ruby-2.3.0/lib/ruby/2.3.0/fileutils.rb:1478:in `preorder_traverse'\n        from /home/akash/.rvm/rubies/ruby-2.3.0/lib/ruby/2.3.0/fileutils.rb:1024:in `block in chmod_R'\n        from /home/akash/.rvm/rubies/ruby-2.3.0/lib/ruby/2.3.0/fileutils.rb:1023:in `each'\n        from /home/akash/.rvm/rubies/ruby-2.3.0/lib/ruby/2.3.0/fileutils.rb:1023:in `chmod_R'\n        from /home/akash/.rvm/gems/ruby-2.3.0/gems/thor-0.19.4/lib/thor/actions/file_manipulation.rb:137:in `chmod'\n        from /home/akash/.rvm/gems/ruby-2.3.0/gems/railties-5.0.1/lib/rails/generators/rails/app/app_generator.rb:17:in `chmod'\n        from /home/akash/.rvm/gems/ruby-2.3.0/gems/railties-5.0.1/lib/rails/generators/rails/app/app_generator.rb:70:in `bin'\n        from /home/akash/.rvm/gems/ruby-2.3.0/gems/railties-5.0.1/lib/rails/generators/app_base.rb:147:in `build'\n        from /home/akash/.rvm/gems/ruby-2.3.0/gems/railties-5.0.1/lib/rails/generators/rails/app/app_generator.rb:217:in `create_bin_files'\n        from /home/akash/.rvm/gems/ruby-2.3.0/gems/thor-0.19.4/lib/thor/command.rb:27:in `run'\n        from /home/akash/.rvm/gems/ruby-2.3.0/gems/thor-0.19.4/lib/thor/invocation.rb:126:in `invoke_command'\n        from /home/akash/.rvm/gems/ruby-2.3.0/gems/thor-0.19.4/lib/thor/invocation.rb:133:in `block in invoke_all'\n        from /home/akash/.rvm/gems/ruby-2.3.0/gems/thor-0.19.4/lib/thor/invocation.rb:133:in `each'\n        from /home/akash/.rvm/gems/ruby-2.3.0/gems/thor-0.19.4/lib/thor/invocation.rb:133:in `map'\n        from /home/akash/.rvm/gems/ruby-2.3.0/gems/thor-0.19.4/lib/thor/invocation.rb:133:in `invoke_all'\n        from /home/akash/.rvm/gems/ruby-2.3.0/gems/thor-0.19.4/lib/thor/group.rb:232:in `dispatch'\n        from /home/akash/.rvm/gems/ruby-2.3.0/gems/thor-0.19.4/lib/thor/base.rb:444:in `start'\n        from /home/akash/.rvm/gems/ruby-2.3.0/gems/railties-5.0.1/lib/rails/commands/application.rb:17:in `&lt;top (required)&gt;'\n        from /home/akash/.rvm/rubies/ruby-2.3.0/lib/ruby/site_ruby/2.3.0/rubygems/core_ext/kernel_require.rb:68:in `require'\n        from /home/akash/.rvm/rubies/ruby-2.3.0/lib/ruby/site_ruby/2.3.0/rubygems/core_ext/kernel_require.rb:68:in `require'\n        from /home/akash/.rvm/gems/ruby-2.3.0/gems/railties-5.0.1/lib/rails/cli.rb:14:in `&lt;top (required)&gt;'\n        from /home/akash/.rvm/rubies/ruby-2.3.0/lib/ruby/site_ruby/2.3.0/rubygems/core_ext/kernel_require.rb:68:in `require'\n        from /home/akash/.rvm/rubies/ruby-2.3.0/lib/ruby/site_ruby/2.3.0/rubygems/core_ext/kernel_require.rb:68:in `require'\n        from /home/akash/.rvm/gems/ruby-2.3.0/gems/railties-5.0.1/exe/rails:9:in `&lt;top (required)&gt;'\n        from /home/akash/.rvm/gems/ruby-2.3.0/bin/rails:22:in `load'\n        from /home/akash/.rvm/gems/ruby-2.3.0/bin/rails:22:in `&lt;main&gt;'\n        from /home/akash/.rvm/gems/ruby-2.3.0/bin/ruby_executable_hooks:15:in `eval'\n        from /home/akash/.rvm/gems/ruby-2.3.0/bin/ruby_executable_hooks:15:in `&lt;main&gt;'\n</code></pre>\n\n<p>When I opened</p>\n\n<blockquote>\n  <p>/home/akash/.rvm/rubies/ruby-2.3.0/lib/ruby/2.3.0/fileutils.rb:1345</p>\n</blockquote>\n\n<p>the code in the 1345th line is</p>\n\n<pre><code>def chmod(mode)\n  if symlink?\n    File.lchmod mode, path() if have_lchmod?\n  else\n    File.chmod mode, path() #1345th line\n  end\nend\n</code></pre>\n\n<p>I couldn't understand the above code. Please help me</p>\n\n<p>Note: Creating rails app in ext4 partition is working fine. I am using\nruby -2.4.0, rails -5.0.1</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 56328, "user_id": 4265352, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-lzAUc5pYb24/AAAAAAAAAAI/AAAAAAAAAGQ/q3h7bZUnqrs/photo.jpg?sz=128", "display_name": "axiac", "link": "https://stackoverflow.com/users/4265352/axiac"}, "edited": false, "score": 3, "creation_date": 1491403356, "post_id": 43233882, "comment_id": 73539001, "body": "What doesn&#39;t work well? It can be expressed in a shorter form (and easier to read) but it seem correct to me as it is. I would write it as <code>1 - [105 % 27.5, 105 % 31.5].min &#47; 105</code> (get the smallest unused space, divide to <code>105</code> to express it as fraction of the whole, subtract from <code>1</code> to get the used space as fraction of the whole space)."}, {"owner": {"reputation": 283, "user_id": 1745832, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/ba14bc2f99682187ea50d885e853ff2d?s=128&d=identicon&r=PG", "display_name": "massaskillz", "link": "https://stackoverflow.com/users/1745832/massaskillz"}, "reply_to_user": {"reputation": 56328, "user_id": 4265352, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-lzAUc5pYb24/AAAAAAAAAAI/AAAAAAAAAGQ/q3h7bZUnqrs/photo.jpg?sz=128", "display_name": "axiac", "link": "https://stackoverflow.com/users/4265352/axiac"}, "edited": false, "score": 1, "creation_date": 1491405687, "post_id": 43233882, "comment_id": 73540842, "body": "Thanks @axiac. Sorry, I&#39;m still a Ruby newbie, so I think there is a special Ruby way for everything :)"}], "answers": [{"tags": [], "owner": {"reputation": 91121, "user_id": 179125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5594142dcc49a24b1902ec8059181f8d?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan Running", "link": "https://stackoverflow.com/users/179125/jordan-running"}, "is_accepted": false, "score": 0, "last_activity_date": 1491417629, "last_edit_date": 1491417629, "creation_date": 1491416773, "answer_id": 43238915, "question_id": 43233882, "link": "https://stackoverflow.com/questions/43233882/using-modulo-to-determine-optimal-usage-of-space-is-there-an-easier-way-in-ruby/43238915#43238915", "title": "Using modulo to determine optimal usage of space. Is there an easier way in Ruby?", "body": "<p>axiac gave a reasonable answer in the comments above. If you want to know how it might look in idiomatic Ruby, I suggest the following, although it's only one of several possibilities:</p>\n\n<pre><code>def best_space_utilization(total_space, widths)\n  utilization = widths.map {|w| total_space - (total_space % w) }.max\n  utilization / total_space.to_f\nend\n\np best_space_utilization(105, [27.5, 31.5])\n# =&gt; 0.9\n</code></pre>\n\n<p>See it on repl.it: <a href=\"https://repl.it/Gwe7/2\" rel=\"nofollow noreferrer\">https://repl.it/Gwe7/2</a></p>\n\n<p>This could, of course, be reduced to a one-liner, with the corresponding sacrifice of readability: <code>ws.map {|w| t - (t % w) }.max / t.to_f</code></p>\n\n<p>If you wanted a function that returned both the best utilization and the corresponding width, you could do something like this:</p>\n\n<pre><code>def best_space_utilization(total_space, widths)\n  widths.map do |w|\n    utilization_percent = (total_space - (total_space % w)) / total_space\n    [ w, utilization_percent ]\n  end.max_by(&amp;:last)\nend\n\np best_space_utilization(105, [27.5, 31.5])\n# =&gt; [31.5, 0.9]\n</code></pre>\n\n<p>See it on repl.it: <a href=\"https://repl.it/Gwe7/4\" rel=\"nofollow noreferrer\">https://repl.it/Gwe7/4</a></p>\n"}], "owner": {"reputation": 283, "user_id": 1745832, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/ba14bc2f99682187ea50d885e853ff2d?s=128&d=identicon&r=PG", "display_name": "massaskillz", "link": "https://stackoverflow.com/users/1745832/massaskillz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 32, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1491417629, "creation_date": 1491401944, "last_edit_date": 1491416122, "question_id": 43233882, "link": "https://stackoverflow.com/questions/43233882/using-modulo-to-determine-optimal-usage-of-space-is-there-an-easier-way-in-ruby", "title": "Using modulo to determine optimal usage of space. Is there an easier way in Ruby?", "body": "<p>As an example, let's say we want to see what's the highest utilization when fitting 27.5\" wide chairs vs 31.5\" wide chairs into a space of 105\". The final value I want to see is the highest percentage utilization, not the size of the chair to pick.</p>\n\n<p>I'm doing it this way:</p>\n\n<pre><code>[((105 - (105 % 27.5)) / 105), ((105 - (105 % 31.5)) / 105)].max\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 5483, "user_id": 4481312, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/teLso.jpg?s=128&g=1", "display_name": "marmeladze", "link": "https://stackoverflow.com/users/4481312/marmeladze"}, "edited": false, "score": 7, "creation_date": 1491399963, "post_id": 43233049, "comment_id": 73536069, "body": "info, warning, error -)) and there is nothing to do with nginx (also with rails) it is a feature of ruby&#39;s Logger class <a href=\"https://ruby-doc.org/stdlib-2.1.0/libdoc/logger/rdoc/Logger.html\" rel=\"nofollow noreferrer\">ruby-doc.org/stdlib-2.1.0/libdoc/logger/rdoc/Logger.html</a>"}, {"owner": {"reputation": 2464, "user_id": 1035438, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/d802ced0d7c4ac1f7a3d4958a90eb724?s=128&d=identicon&r=PG", "display_name": "Igor T.", "link": "https://stackoverflow.com/users/1035438/igor-t"}, "reply_to_user": {"reputation": 5483, "user_id": 4481312, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/teLso.jpg?s=128&g=1", "display_name": "marmeladze", "link": "https://stackoverflow.com/users/4481312/marmeladze"}, "edited": false, "score": 0, "creation_date": 1491400049, "post_id": 43233049, "comment_id": 73536142, "body": "oh, it is this simple :) Thank you!"}], "answers": [{"tags": [], "owner": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "is_accepted": false, "score": 2, "last_activity_date": 1491402147, "creation_date": 1491402147, "answer_id": 43233961, "question_id": 43233049, "link": "https://stackoverflow.com/questions/43233049/ruby-on-rails-log-lines-start-with-i-or-w/43233961#43233961", "title": "Ruby on Rails log lines start with &quot;I&quot; or &quot;W&quot;", "body": "<p>It's the standard <a href=\"https://ruby-doc.org/stdlib-2.4.0/libdoc/logger/rdoc/Logger.html\" rel=\"nofollow noreferrer\">Logger</a> <a href=\"https://ruby-doc.org/stdlib-2.4.0/libdoc/logger/rdoc/Logger.html#class-Logger-label-Format\" rel=\"nofollow noreferrer\">Format</a> with <a href=\"https://ruby-doc.org/stdlib-2.4.0/libdoc/logger/rdoc/Logger/Severity.html\" rel=\"nofollow noreferrer\"><code>SeverityID</code></a> as the first value :</p>\n\n<pre><code>Log format:\n\nSeverityID, [DateTime #pid] SeverityLabel -- ProgName: message\n\nLog sample:\n\nI, [1999-03-03T02:34:24.895701 #19074]  INFO -- Main: info.\n</code></pre>\n"}], "owner": {"reputation": 2464, "user_id": 1035438, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/d802ced0d7c4ac1f7a3d4958a90eb724?s=128&d=identicon&r=PG", "display_name": "Igor T.", "link": "https://stackoverflow.com/users/1035438/igor-t"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 89, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1491413267, "creation_date": 1491399891, "last_edit_date": 1491413267, "question_id": 43233049, "link": "https://stackoverflow.com/questions/43233049/ruby-on-rails-log-lines-start-with-i-or-w", "title": "Ruby on Rails log lines start with &quot;I&quot; or &quot;W&quot;", "body": "<p>Noticed that all the lines in Rails log (<code>production.log</code> for example) start with either capital \"I\" or capital \"W\". For example</p>\n\n<pre><code>I, [2017-04-04T15:40:40.409423 #15879]  INFO -- : [8dd4dd50-2dba-466e-91c3-13e83333db78] Completed 302 Found in 96ms (ActiveRecord: 6.2ms)\nI, [2017-04-04T15:40:40.448567 #15866]  INFO -- : [e80b7bcc-92be-465a-a9b1-1f39222238cf] Started GET \"/bla\" for ip at 2017-04-05 15:40:40 +0200\nI, [2017-04-04T15:40:40.454994 #15866]  INFO -- : [e80b7bcc-92be-465a-a9b1-1f39123138cf] Processing by blaController#index as HTML\n</code></pre>\n\n<p>Found no explanation for why is it like this and what's the purpose.</p>\n"}, {"tags": ["ruby", "macos", "jekyll"], "answers": [{"comments": [{"owner": {"reputation": 43, "user_id": 3173756, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/ab7458c49911b9151fc065f06fb4c043?s=128&d=identicon&r=PG&f=1", "display_name": "user3173756", "link": "https://stackoverflow.com/users/3173756/user3173756"}, "edited": false, "score": 1, "creation_date": 1491403587, "post_id": 43233322, "comment_id": 73539184, "body": "Ah, gotcha marcanuy.  That explains a lot because it seemed like everything was working just fine and I had a sinking suspicion that I was missing something.  Thanks!"}], "tags": [], "owner": {"reputation": 19724, "user_id": 1165509, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/2ebdffd5ddb4a98b0cc77117503d2711?s=128&d=identicon&r=PG", "display_name": "marcanuy", "link": "https://stackoverflow.com/users/1165509/marcanuy"}, "is_accepted": true, "score": 1, "last_activity_date": 1491400604, "creation_date": 1491400604, "answer_id": 43233322, "question_id": 43232917, "link": "https://stackoverflow.com/questions/43232917/how-to-fix-missing-directories-in-a-new-jekyll-site/43233322#43233322", "title": "How to fix missing directories in a new Jekyll site", "body": "<p>Jekyll 3.2.0 introduced <strong>gem based themes</strong>:</p>\n\n<blockquote>\n  <p>Our flagship feature for this release has been themes. Themes?!, you\n  say? Yes, proper, versionable, releasable, first-class themes. We\u2019re\n  pretty stoked about it and we hope you like building and using them.\n  For now, it only supports layouts, includes, and sass, but we have\n  plans to include static assets like images and CSS/JS in a future\n  release.</p>\n</blockquote>\n\n<p>That basically means that by default you won't have these typical directories:</p>\n\n<pre><code>/assets\n/_layouts\n/_includes\n/_sass\n</code></pre>\n\n<p>But you can always overwrite them or copy to your jekyll instance to <a href=\"https://jekyllrb.com/docs/themes/\" rel=\"nofollow noreferrer\">modify them</a>.</p>\n"}], "owner": {"reputation": 43, "user_id": 3173756, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/ab7458c49911b9151fc065f06fb4c043?s=128&d=identicon&r=PG&f=1", "display_name": "user3173756", "link": "https://stackoverflow.com/users/3173756/user3173756"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 248, "favorite_count": 0, "accepted_answer_id": 43233322, "answer_count": 1, "score": 1, "last_activity_date": 1491433243, "creation_date": 1491399588, "last_edit_date": 1491433243, "question_id": 43232917, "link": "https://stackoverflow.com/questions/43232917/how-to-fix-missing-directories-in-a-new-jekyll-site", "title": "How to fix missing directories in a new Jekyll site", "body": "<p>I finally got all my Ruby issues squared away and have Jekyll installed. When I run <code>jekyll new sitename</code> it creates a new Jekyll project and doesn't show any errors, but the project is missing several directories including <code>_includes</code>, <code>_layouts</code>, <code>_sass</code>.</p>\n\n<p>When I browse to the site on my localhost, however, it shows a working site.  The <code>_site</code> folder has a CSS file in the assets folder.  </p>\n\n<p>Every tutorial I've seen shows that those missing directories I list above should be created when the project is initialized, but this is my first time working with Jekyll, so I can't tell if I'm missing something.</p>\n\n<p>Does anyone know what would cause the site to be incomplete or for these directories to be hidden?</p>\n"}, {"tags": ["javascript", "ruby", "encryption", "cryptography", "aes"], "comments": [{"owner": {"reputation": 79299, "user_id": 589259, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/vJbKg.jpg?s=128&g=1", "display_name": "Maarten Bodewes", "link": "https://stackoverflow.com/users/589259/maarten-bodewes"}, "edited": false, "score": 2, "creation_date": 1491403042, "post_id": 43232834, "comment_id": 73538739, "body": "You could at least post code that can run with a test key and message, right? Where is your URL encoding / decoding? We&#39;re not here to do your job."}, {"owner": {"reputation": 58084, "user_id": 1816580, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f30e6b41f1e2bd48b058e8e72c1f0f57?s=128&d=identicon&r=PG", "display_name": "Artjom B.", "link": "https://stackoverflow.com/users/1816580/artjom-b"}, "edited": false, "score": 1, "creation_date": 1491414177, "post_id": 43232834, "comment_id": 73546381, "body": "Your <code>&quot;Key&quot;</code> in CryptoJS is not an actual key. It&#39;s a password which is used to derive a key. As far as I understand the OpenSSL wrapper in Ruby, this is not the case. The two code snippets are completely different. The answer would be easy if the CryptoJS code would be changeable (is it?). Why do you want to symmetric encryption in the browser. It doesn&#39;t provide any more security than HTTPS would."}, {"owner": {"reputation": 58084, "user_id": 1816580, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f30e6b41f1e2bd48b058e8e72c1f0f57?s=128&d=identicon&r=PG", "display_name": "Artjom B.", "link": "https://stackoverflow.com/users/1816580/artjom-b"}, "edited": false, "score": 1, "creation_date": 1491414185, "post_id": 43232834, "comment_id": 73546387, "body": "If you&#39;re using only symmetric encryption you need the exact same key at the server and the client. If you send the encryption key from the server to the client or the other way around you need to encrypt your symmetric encryption key. The easiest way to do this would be to use TLS. If you use TLS, then the data as well as key are encrypted, so you don&#39;t need to encrypt it yourself. This doesn&#39;t provide any security, just a little bit of obfuscation. You should read: <a href=\"https://www.nccgroup.trust/us/about-us/newsroom-and-events/blog/2011/august/javascript-cryptography-considered-harmful/\" rel=\"nofollow noreferrer\">nccgroup.trust/us/about-us/newsroom-and-events/blog/2011/aug&zwnj;&#8203;ust/&hellip;</a>"}, {"owner": {"reputation": 58084, "user_id": 1816580, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f30e6b41f1e2bd48b058e8e72c1f0f57?s=128&d=identicon&r=PG", "display_name": "Artjom B.", "link": "https://stackoverflow.com/users/1816580/artjom-b"}, "edited": false, "score": 0, "creation_date": 1491414447, "post_id": 43232834, "comment_id": 73546554, "body": "Have you thought about using a library like <a href=\"https://github.com/RNCryptor\" rel=\"nofollow noreferrer\">RNCryptor</a> which has a secure implementation for Ruby, JavaScript and a couple other languages?"}, {"owner": {"reputation": 1685, "user_id": 2406824, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b9e6d42de16d7fd42a75edf7470f0ebc?s=128&d=identicon&r=PG", "display_name": "napkinsterror", "link": "https://stackoverflow.com/users/2406824/napkinsterror"}, "edited": false, "score": 0, "creation_date": 1491586074, "post_id": 43232834, "comment_id": 73636072, "body": "I am using it as a simple barrier. The message isn&#39;t that important. I just wanted to create unique urls using this with data point inside that are not easily visible. I could just use encoding but like the fact that there is a password even thought it is not secure to separate certain client code access by department and page."}], "answers": [{"comments": [{"owner": {"reputation": 1685, "user_id": 2406824, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b9e6d42de16d7fd42a75edf7470f0ebc?s=128&d=identicon&r=PG", "display_name": "napkinsterror", "link": "https://stackoverflow.com/users/2406824/napkinsterror"}, "edited": false, "score": 0, "creation_date": 1491586174, "post_id": 43241985, "comment_id": 73636126, "body": "Thanks, I will try this out! Should this be similar to the Ruby code I&#39;m running or are there mistakes there as well."}, {"owner": {"reputation": 5721, "user_id": 3823831, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e10a2607a7827988b6ac570fe168e02a?s=128&d=identicon&r=PG", "display_name": "TheGreatContini", "link": "https://stackoverflow.com/users/3823831/thegreatcontini"}, "reply_to_user": {"reputation": 1685, "user_id": 2406824, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b9e6d42de16d7fd42a75edf7470f0ebc?s=128&d=identicon&r=PG", "display_name": "napkinsterror", "link": "https://stackoverflow.com/users/2406824/napkinsterror"}, "edited": false, "score": 0, "creation_date": 1491596217, "post_id": 43241985, "comment_id": 73641041, "body": "@napkinsterror I am not a ruby expert, but the only potential issue I see with the ruby is that AES keys are by definition one of 16, 24, or 32 bytes.  I don&#39;t know what ruby does under the hood when you pass it something smaller: maybe it pads it out with 0s.  One thing to remember is that the same IV that was used for encryption should also be used for decryption.  The IV is not secret and is typically put at the beginning of the cipher text so that the receiving end can read it at the beginning for decryption."}], "tags": [], "owner": {"reputation": 5721, "user_id": 3823831, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e10a2607a7827988b6ac570fe168e02a?s=128&d=identicon&r=PG", "display_name": "TheGreatContini", "link": "https://stackoverflow.com/users/3823831/thegreatcontini"}, "is_accepted": false, "score": 1, "last_activity_date": 1491427856, "creation_date": 1491427856, "answer_id": 43241985, "question_id": 43232834, "link": "https://stackoverflow.com/questions/43232834/performing-aes-encryption-is-ruby-compared-to-javascript/43241985#43241985", "title": "Performing AES Encryption is Ruby compared to Javascript", "body": "<p>At least one of your problems is noted by Artjom B noted in the comment above, and this is a frequent problem with trying to get crypto-js to interoperate with other libraries: crypto-js is not taking in a \"Key\" the way you are using it but instead a password.  Passwords are not keys!!!</p>\n\n<p>Internally, crypto-js uses a very poor algorithm for converting the password into a key.  The algorithm is poor for two reasons: (1) it is based upon the insecure MD5, and (2) converting passwords to keys should be a slow process to deter brute force guessing of passwords.  In crypto-js, the process is not slow.</p>\n\n<p>To get you headed the right direction, do not call:</p>\n\n<pre><code>CryptoJS.AES.encrypt(\"Message\",\"Password\") \n</code></pre>\n\n<p>Instead, call </p>\n\n<pre><code>CryptoJS.AES.encrypt(\"Message\", key, { iv: iv });\n</code></pre>\n\n<p>You might also need to explore padding to get it to interoperate with Ruby.</p>\n"}], "owner": {"reputation": 1685, "user_id": 2406824, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b9e6d42de16d7fd42a75edf7470f0ebc?s=128&d=identicon&r=PG", "display_name": "napkinsterror", "link": "https://stackoverflow.com/users/2406824/napkinsterror"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 289, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1491427856, "creation_date": 1491399391, "question_id": 43232834, "link": "https://stackoverflow.com/questions/43232834/performing-aes-encryption-is-ruby-compared-to-javascript", "title": "Performing AES Encryption is Ruby compared to Javascript", "body": "<p>I am struggling at this one part of code where I need to decrypt AES on my server side (Ruby) from a client. I know all the information, but I am struggling with re-producing the encryption.</p>\n\n<p>I am currently using <code>CryptoJS</code> from <a href=\"https://github.com/brix/crypto-js\" rel=\"nofollow noreferrer\">https://github.com/brix/crypto-js</a>. I am not sure which version of AES it is using which might be my first problem. </p>\n\n<p>An example of how I currently encrypt my data in Javascript is:</p>\n\n<pre><code>encodeURIComponent(CryptoJS.AES.encrypt(\"Message\",\"Key\").toString())\n</code></pre>\n\n<p>Right now I am currently using <code>openssl</code> and <code>cgi</code> in Ruby to try to decrypt. This is wrong and not working, but I wanted to show what I am trying as I believe it is close. I don't understand how the key is used in the encryption, but I am following the example I found <a href=\"http://ruby-doc.org/stdlib-2.0.0/libdoc/openssl/rdoc/OpenSSL/Cipher.html#class-OpenSSL::Cipher-label-Encrypting+and+decrypting+some+data\" rel=\"nofollow noreferrer\">here</a></p>\n\n<pre><code>require \"openssl\"\nrequire \"cgi\"\n\ncipher = OpenSSL::Cipher.new('AES-128-CBC')\ncipher.encrypt\nkey = \"Key\"\niv = cipher.random_iv\n\nencrypted = cipher.update(\"Message\") + cipher.final\n\nputs CGI::escape(encrypted.to_s)\n</code></pre>\n\n<p>I have just put <code>\"Message\"</code> and <code>\"Key\"</code> to not share my information, I am an amateur when it comes to security and cryptography, but I have done these things in lower level languages without problems. I believe the problem happens in two main areas</p>\n\n<ol>\n<li>My lack of knowledge of how these high level languages work, and the libraries I am using</li>\n<li>The strings are sometimes UTF-8 vs UTF-16 in these langauges, so passing the <code>\"Message\"</code> as a string might be causing problems</li>\n</ol>\n\n<p>FULL EXAMPLE OF ENCRYPTION AND DECRYPTION IN JAVASCRIPT:</p>\n\n<p>Encrypting and URL encoding with input 1:</p>\n\n<pre><code>encodeURIComponent(CryptoJS.AES.encrypt(\"1\",\"Key\").toString())\n</code></pre>\n\n<p>Result:</p>\n\n<pre><code>\"U2FsdGVkX19Lp8ItQaO5h6Lj68sheHeYrIkJAfqt1Tw%3D\"\n</code></pre>\n\n<p>Decoding URL and Decryption:</p>\n\n<pre><code>CryptoJS.AES.decrypt(decodeURIComponent(\"U2FsdGVkX19Lp8ItQaO5h6Lj68sheHeYrIkJAfqt1Tw%3D\"), \"Key\").toString(CryptoJS.enc.Utf8)\n</code></pre>\n\n<p>Result:</p>\n\n<pre><code>\"1\"\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "oauth", "yandex", "yandex-api"], "answers": [{"comments": [{"owner": {"reputation": 851, "user_id": 1460362, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/7684f2f794624fcdce2f9406e6234bf3?s=128&d=identicon&r=PG", "display_name": "Edgars", "link": "https://stackoverflow.com/users/1460362/edgars"}, "edited": false, "score": 0, "creation_date": 1491910965, "post_id": 43344650, "comment_id": 73752865, "body": "I have tried in Chrome Postman and I receive the same response as in my Rails app and it is &quot;Code has expired&quot;."}, {"owner": {"reputation": 2644, "user_id": 747744, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/58e40f54006383a41c5c00347a7a0cc7?s=128&d=identicon&r=PG", "display_name": "Eugene Primako", "link": "https://stackoverflow.com/users/747744/eugene-primako"}, "reply_to_user": {"reputation": 851, "user_id": 1460362, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/7684f2f794624fcdce2f9406e6234bf3?s=128&d=identicon&r=PG", "display_name": "Edgars", "link": "https://stackoverflow.com/users/1460362/edgars"}, "edited": false, "score": 1, "creation_date": 1491912183, "post_id": 43344650, "comment_id": 73753767, "body": "And what client_id do you use when you get authorization_code? Is it equal to <code>Rails.application.secrets.client_id</code>?"}, {"owner": {"reputation": 851, "user_id": 1460362, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/7684f2f794624fcdce2f9406e6234bf3?s=128&d=identicon&r=PG", "display_name": "Edgars", "link": "https://stackoverflow.com/users/1460362/edgars"}, "edited": false, "score": 0, "creation_date": 1491914234, "post_id": 43344650, "comment_id": 73755292, "body": "Yes, I used the same client_id. if I changed few symbols(for debuging) request returned cannot find such client or client doesn&#39;t exist. Can&#39;t remember exactly.."}], "tags": [], "owner": {"reputation": 2644, "user_id": 747744, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/58e40f54006383a41c5c00347a7a0cc7?s=128&d=identicon&r=PG", "display_name": "Eugene Primako", "link": "https://stackoverflow.com/users/747744/eugene-primako"}, "is_accepted": true, "score": 1, "last_activity_date": 1491910183, "creation_date": 1491910183, "answer_id": 43344650, "question_id": 43232802, "link": "https://stackoverflow.com/questions/43232802/yandex-oauth-authorization-code-always-expired-ruby-on-rails/43344650#43344650", "title": "Yandex Oauth authorization code always expired, Ruby On Rails", "body": "<p>Yandex authorization codes are single-use. Are you sure you are not making request to \"<a href=\"https://oauth.yandex.ru/token\" rel=\"nofollow noreferrer\">https://oauth.yandex.ru/token</a>\" twice? You can try making such a request in Chrome Postman <strong>before</strong> evaluating your code that does the same.</p>\n"}], "owner": {"reputation": 851, "user_id": 1460362, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/7684f2f794624fcdce2f9406e6234bf3?s=128&d=identicon&r=PG", "display_name": "Edgars", "link": "https://stackoverflow.com/users/1460362/edgars"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 474, "favorite_count": 0, "accepted_answer_id": 43344650, "answer_count": 1, "score": 2, "last_activity_date": 1491910183, "creation_date": 1491399304, "question_id": 43232802, "link": "https://stackoverflow.com/questions/43232802/yandex-oauth-authorization-code-always-expired-ruby-on-rails", "title": "Yandex Oauth authorization code always expired, Ruby On Rails", "body": "<p>I followed this <a href=\"https://tech.yandex.com/oauth/doc/dg/reference/auto-code-client-docpage/\" rel=\"nofollow noreferrer\">guide</a> to implement Yandex Oauth in my Ruby On Rails app. Few weeks I had no problems with it, but recently (few days ago) I am experiencing problem. I can't get access token, refresh token and etc. because my request fails with 400 error code.</p>\n\n<p>I am receiving this specific message:</p>\n\n<pre><code>{\"error_description\": \"Code has expired\", \"error\": \"invalid_grant\"}\n</code></pre>\n\n<p>From guide:</p>\n\n<blockquote>\n  <p>The lifespan of this code is 10 minutes. When it expires, a code must\n  be requested again.</p>\n</blockquote>\n\n<p>But it never waits 10 minutes or even 10 seconds because as soon as my app gets authorization code it immediately makes POST request to change this authorization code for access token, refresh token and expiration. But this POST request fails because that authorization code seems to be expired. </p>\n\n<p>From Yandex error descriptions:</p>\n\n<blockquote>\n  <p>invalid_grant \u2015 Invalid or expired authorization code.</p>\n</blockquote>\n\n<p><strong>My code:</strong></p>\n\n<pre><code>def yandex\n    require 'net/http'\n    require 'json'  # =&gt; false\n\n    @user = User.from_omniauth(request.env[\"omniauth.auth\"])\n\n    @client_id = Rails.application.secrets.client_id \n    @secret =  Rails.application.secrets.password\n    @authorization_code = params[:code]\n\n    @user.update_attribute(:code, @authorization_code)\n    @user.update_attribute(:state, params[:state])\n\n\n    @post_body = \"grant_type=authorization_code&amp;code=#{@authorization_code}&amp;client_id=#{@client_id}&amp;client_secret=#{@secret}\"\n\n    @url = \"https://oauth.yandex.ru/token\"\n\n    url = URI.parse(@url)\n    req = Net::HTTP::Post.new(url.request_uri)\n    req['host'] =\"oauth.yandex.ru\"\n    req['Content-Length'] = @post_body.length\n    req['Content-Type'] = 'application/x-www-form-urlencoded'\n    req.body = @post_body\n    http = Net::HTTP.new(url.host, url.port)\n    http.use_ssl = (url.scheme == \"https\")\n\n    @response_mess = http.request(req)\n\n    refreshhash = JSON.parse(@response_mess.body)\n    access_token  = refreshhash['access_token']\n    refresh_token  = refreshhash['refresh_token']\n    access_token_expires_at = DateTime.now + refreshhash[\"expires_in\"].to_i.seconds\n\n\n    if access_token.present? &amp;&amp; refresh_token.present? &amp;&amp; access_token_expires_at.present?\n        @user.update_attribute(:access_token, access_token)\n        @user.update_attribute(:refresh_token, refresh_token)\n        @user.update_attribute(:expires_in, access_token_expires_at)\n\n        sign_in(@user)\n        redirect_to admin_dashboard_index_path\n    end\n\nend\n</code></pre>\n\n<p>My log:</p>\n\n<pre><code>Started GET \"/users/auth/yandex/callback?state=31c11a86beecdeb55ab30887d56391a8cbafccdc85c456aa&amp;code=5842278\" for 212.3.192.116 at 2017-04-05 15:58:27 +0300\nCannot render console from 212.3.192.116! Allowed networks: 127.0.0.1, ::1, 127.0.0.0/127.255.255.255\nProcessing by CallbacksController#yandex as HTML\n  Parameters: {\"state\"=&gt;\"31c11a86beecdeb55ab30887d56391a8cbafccdc85c456aa\", \"code\"=&gt;\"5842278\"}\n</code></pre>\n\n<p>I tried the same POST request in CHROME POSTMAN and received the same response as <code>{\"error_description\": \"Code has expired\", \"error\": \"invalid_grant\"}</code></p>\n\n<p>I have googled around but there isn't any similar question.. It seems that the problem is at Yandex end, but how get around it ?</p>\n\n<p>Any help will be appreciated.</p>\n"}, {"tags": ["javascript", "ruby", "ajax"], "answers": [{"tags": [], "owner": {"reputation": 1018, "user_id": 2417194, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/0WgJ2.jpg?s=128&g=1", "display_name": "bunty", "link": "https://stackoverflow.com/users/2417194/bunty"}, "is_accepted": false, "score": 0, "last_activity_date": 1491401169, "creation_date": 1491401169, "answer_id": 43233562, "question_id": 43232761, "link": "https://stackoverflow.com/questions/43232761/how-to-write-ruby-method-in-js-file/43233562#43233562", "title": "How to write ruby method in js file", "body": "<p>If you are using Rails framework, then it provides an option where you write ruby code in Js file.\nFor this, you need to change extension for js file to <code>.js.erb</code>\nAnd then call ruby function is js method as,</p>\n\n<pre><code>dayRender:function(cell, week_balance){\n   $(cell).html('&lt;span&gt;' + \"&lt;%= week_balance %&gt;\" + \u2018&lt;/span&gt;\u2019);\n},\n</code></pre>\n\n<p>make sure week_balance is accessible without any parent. Else make it class method and use it.</p>\n"}], "owner": {"reputation": 1, "user_id": 7820904, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8c9016971e13aa89a31aeb37e961eaec?s=128&d=identicon&r=PG&f=1", "display_name": "Gdesgrottes", "link": "https://stackoverflow.com/users/7820904/gdesgrottes"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 49, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1491401169, "creation_date": 1491399201, "question_id": 43232761, "link": "https://stackoverflow.com/questions/43232761/how-to-write-ruby-method-in-js-file", "title": "How to write ruby method in js file", "body": "<p>I'm trying to display in each cell of my calendar in js (fullcalendar) a ruby method \u201cweek_balance\u201d where I have some informations but I can't. \nI write : </p>\n\n<pre><code>dayRender:function(cell, week_balance){\n     $(cell).html(\u2018&lt;span&gt;\u2019 + week_balance + \u2018&lt;/span&gt;\u2019);\n     },\n</code></pre>\n\n<p>It doesn't work, why ?</p>\n\n<p>Thanks.</p>\n"}, {"tags": ["ruby", "set", "typing"], "answers": [{"comments": [{"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 1, "creation_date": 1491400671, "post_id": 43232998, "comment_id": 73536664, "body": "You could add a type check (<code>other.is_a? Test</code>) for a less invasive patch."}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 1, "creation_date": 1491402630, "post_id": 43232998, "comment_id": 73538342, "body": "I&#39;d probably move the method to a module and either use <code>refine</code> or <code>prepend</code> to have a proper <code>super</code> method. You can then delegate the comparison to <code>other</code> (in reverse order) or just call <code>super</code>, i.e.: <code>other.is_a?(Test) ? other.eql?(self) : super</code>"}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1491403223, "post_id": 43232998, "comment_id": 73538883, "body": "Interesting, maybe an optimization in Hash? The core classes can be rather strange if you expect them to behave like ordinary Ruby objects ;-)"}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1491404774, "post_id": 43232998, "comment_id": 73540188, "body": "Type coercion would be really nice. Unfortunately, it only exists for numerics in Ruby."}], "tags": [], "owner": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "is_accepted": true, "score": 3, "last_activity_date": 1491403417, "last_edit_date": 1491403417, "creation_date": 1491399772, "answer_id": 43232998, "question_id": 43232685, "link": "https://stackoverflow.com/questions/43232685/ruby-set-membership-for-objects-of-different-types/43232998#43232998", "title": "Ruby Set membership for objects of different types", "body": "<p>Your main problem is <a href=\"https://ruby-doc.org/core-2.4.0/String.html#method-i-eql-3F\" rel=\"nofollow noreferrer\"><code>String#eql?</code></a>:</p>\n\n<pre><code>puts Test.new('string').eql? 'string'\n# true\nputs 'string'.eql? Test.new('string')\n# false\n</code></pre>\n\n<p>You're right, there seems to be some internal type checking :</p>\n\n<pre><code>rb_str_eql(VALUE str1, VALUE str2)\n{\n    if (str1 == str2) return Qtrue;\n    if (!RB_TYPE_P(str2, T_STRING)) return Qfalse;\n    return str_eql(str1, str2);\n}\n</code></pre>\n\n<p>Note that your example works when used the other way around :</p>\n\n<pre><code>s = Set.new(['string'])\nputs s.member? Test.new('string')\n# true\n</code></pre>\n\n<p>If you really want to achieve this behaviour, you could monkey-patch <code>String#eql?</code>:</p>\n\n<pre><code>module TestStringEquality\n  def eql?(other)\n    other.is_a?(Test) ? other.eql?(self) : super\n  end\nend\n\ns = Set.new([Test.new('string')])\nputs s.member? 'string'\n# false\n\nclass String\n  prepend TestStringEquality\nend\n\nputs s.member? 'string'\n# true\n</code></pre>\n\n<p>Be careful, this method is probably used in every gem.</p>\n\n<p>Finally, please remember that <a href=\"http://ruby-doc.org/stdlib-2.4.1/libdoc/set/rdoc/Set.html\" rel=\"nofollow noreferrer\"><code>Set</code></a> is a pure Ruby implementation with <a href=\"https://ruby-doc.org/core-2.4.0/Hash.html\" rel=\"nofollow noreferrer\"><code>Hash</code></a> as a backend. It might make it easier to google for information and documentation.</p>\n"}], "owner": {"reputation": 41, "user_id": 7820817, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-t7GAV_s97PY/AAAAAAAAAAI/AAAAAAAAMkE/2dy2bQVh-GE/photo.jpg?sz=128", "display_name": "Franklin Ochieng", "link": "https://stackoverflow.com/users/7820817/franklin-ochieng"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 67, "favorite_count": 0, "accepted_answer_id": 43232998, "answer_count": 1, "score": 3, "last_activity_date": 1491403417, "creation_date": 1491398985, "last_edit_date": 1491403024, "question_id": 43232685, "link": "https://stackoverflow.com/questions/43232685/ruby-set-membership-for-objects-of-different-types", "title": "Ruby Set membership for objects of different types", "body": "<p>Ruby is not a typed language therefore I find this rather queer. Example:</p>\n\n<pre><code>class Test\n    attr_reader :field\n\n    def initialize(f)\n        @field = String(f)\n    end\n\n    def ==(other)\n        field == String(other)\n    end\n\n    def eql?(other)\n        field.eql? String(other)\n    end\n\n    def hash\n        field.hash\n    end\n\n    def to_s\n        field\n    end\nend\n\ns = Set.new([Test.new('string')])\n# =&gt; [#&lt;Test:0x007fc97da17ea0 @field=\"string\"&gt;]\n\nputs Test.new('string').eql?(Test.new('string'))\n# true\n\nputs Test.new('string').hash == Test.new('string').hash\n# true\n\nputs s.member? Test.new('string')\n# true\n\nputs s.member? Test.new('other')\n# false\n\nputs Test.new('string') == 'string'\n# true\n\nputs Test.new('string').eql? 'string'\n# true\n\nputs Test.new('string').hash == 'string'.hash\n# true\n</code></pre>\n\n<p>But,</p>\n\n<pre><code>puts s.member? 'string'\n# false\n</code></pre>\n\n<p>Seems like Ruby is enforcing some type checking internally. Is this supposed to be the case?</p>\n"}, {"tags": ["ruby", "csv", "rubygems"], "comments": [{"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1491413650, "post_id": 43232251, "comment_id": 73546016, "body": "<i>WHAT</i> CSV are you trying to parse? Please read &quot;<a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>&quot; and the linked page. We need the minimal code demonstrating the problem, the minimal input (CSV) supporting that code that demonstrates the problem and the expected output. You gave us the expected output but no way to get to that."}], "answers": [{"comments": [{"owner": {"reputation": 237, "user_id": 4926055, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/9fb70666a82101bc83eaf0b8e85d1c09?s=128&d=identicon&r=PG&f=1", "display_name": "encrypt", "link": "https://stackoverflow.com/users/4926055/encrypt"}, "edited": false, "score": 0, "creation_date": 1491400996, "post_id": 43233161, "comment_id": 73536969, "body": "from C:/Ruby22-x64/lib/ruby/2.2.0/csv.rb:1256:in <code>open&#39; \tfrom C:&#47;Ruby22-x64&#47;lib&#47;ruby&#47;2.2.0&#47;csv.rb:1256:in </code>open&#39; \tfrom C:/Ruby22-x64/lib/ruby/2.2.0/csv.rb:1330:in <code>read&#39; \tfrom C:&#47;Users&#47;1&#47;RubymineProjects&#47;nexpose&#47;main.rb:26:in </code>block in &lt;top (required)&gt;&#39; \tfrom C:/Users/RubymineProjects/nexpose/main.rb:18:in <code>each&#39; \tfrom C:&#47;Users&#47;RubymineProjects&#47;nexpose&#47;main.rb:18:in </code>&lt;top (required)&gt;&#39; \tfrom -e:1:in <code>load&#39; \tfrom -e:1:in </code>&lt;main&gt;&#39;"}, {"owner": {"reputation": 73209, "user_id": 290394, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d7908f05c89e965f6bc5308ad6f41256?s=128&d=identicon&r=PG", "display_name": "steenslag", "link": "https://stackoverflow.com/users/290394/steenslag"}, "reply_to_user": {"reputation": 237, "user_id": 4926055, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/9fb70666a82101bc83eaf0b8e85d1c09?s=128&d=identicon&r=PG&f=1", "display_name": "encrypt", "link": "https://stackoverflow.com/users/4926055/encrypt"}, "edited": false, "score": 0, "creation_date": 1491401563, "post_id": 43233161, "comment_id": 73537469, "body": "Try copy-pasting this code right after your <code>puts report</code> line"}], "tags": [], "owner": {"reputation": 73209, "user_id": 290394, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d7908f05c89e965f6bc5308ad6f41256?s=128&d=identicon&r=PG", "display_name": "steenslag", "link": "https://stackoverflow.com/users/290394/steenslag"}, "is_accepted": true, "score": 0, "last_activity_date": 1491400204, "creation_date": 1491400204, "answer_id": 43233161, "question_id": 43232251, "link": "https://stackoverflow.com/questions/43232251/how-to-parse-csv-based-if-conditions/43233161#43233161", "title": "How to parse CSV-based IF conditions", "body": "<p>Don't convert the headers to symbols; use <code>select</code>, not <code>detect</code>; and some minor details:</p>\n\n<pre><code>csv = CSV.read(report, :headers =&gt; true, :converters =&gt; :all).select do|row|\n   row['number available'] &gt; 0 &amp;&amp; row['Score'] &gt;=9}\nend    \n\ncsv.each do |row|\n  puts row[\"name\"]\nend \n</code></pre>\n"}], "owner": {"reputation": 237, "user_id": 4926055, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/9fb70666a82101bc83eaf0b8e85d1c09?s=128&d=identicon&r=PG&f=1", "display_name": "encrypt", "link": "https://stackoverflow.com/users/4926055/encrypt"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 54, "favorite_count": 0, "accepted_answer_id": 43233161, "answer_count": 1, "score": 0, "last_activity_date": 1491413536, "creation_date": 1491397836, "last_edit_date": 1491413536, "question_id": 43232251, "link": "https://stackoverflow.com/questions/43232251/how-to-parse-csv-based-if-conditions", "title": "How to parse CSV-based IF conditions", "body": "<p>I'm trying to parse a CSV report which I'm calling from Nexpose's API: </p>\n\n<pre><code> nsc.list_reports.each do | report |\n  puts report.name\n  report_id = report.config_id\n  report_summary = nsc.generate_report(report_id, true)\n\n  report = nsc.download(report_summary.uri)\n  puts report    \n\n\n  csv = CSV.read(report, :headers =&gt; true, :converters =&gt; :all).select do|row|\n    row['number available'] &gt; 0 &amp;&amp; row['Score'] &gt;=9\n  end\n\n  csv.each do |row|\n    puts row['name']\n  end\nend\n</code></pre>\n\n<p>but basically this is the format of what it gives me</p>\n\n<pre><code>ID,name,title,Score,number available\n1,\"test1\",\"title1\",4,3\n2,\"test2\",\"title2\",8,0\n3,\"test3\",\"title3\",9,0\n4,\"test4\",\"title4\",10,6\n5,\"test5\",\"title5\",5,22\n6,\"test6\",\"title6\",9,1\n7,\"test7\",\"title7\",2,5\n</code></pre>\n\n<p>My goal is to only find the ones that have a \"score\" >=9 and \"number available\" >0. So in this example, it should return 'test4' and 'test6'</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ssl", "https", "devise"], "comments": [{"owner": {"reputation": 1018, "user_id": 2417194, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/0WgJ2.jpg?s=128&g=1", "display_name": "bunty", "link": "https://stackoverflow.com/users/2417194/bunty"}, "edited": false, "score": 0, "creation_date": 1491395870, "post_id": 43231308, "comment_id": 73532687, "body": "may be this will resolve your issue <a href=\"http://stackoverflow.com/questions/38331496/rails-5-actioncontrollerinvalidauthenticitytoken-error\" title=\"rails 5 actioncontrollerinvalidauthenticitytoken error\">stackoverflow.com/questions/38331496/&hellip;</a>"}, {"owner": {"reputation": 776, "user_id": 6030239, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/deea17366715ac200fde1b6fb3511292?s=128&d=identicon&r=PG", "display_name": "Bexultan Myrzatayev", "link": "https://stackoverflow.com/users/6030239/bexultan-myrzatayev"}, "reply_to_user": {"reputation": 1018, "user_id": 2417194, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/0WgJ2.jpg?s=128&g=1", "display_name": "bunty", "link": "https://stackoverflow.com/users/2417194/bunty"}, "edited": false, "score": 0, "creation_date": 1491397167, "post_id": 43231308, "comment_id": 73533702, "body": "@bunty, well, it didn&#39;t"}, {"owner": {"reputation": 1018, "user_id": 2417194, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/0WgJ2.jpg?s=128&g=1", "display_name": "bunty", "link": "https://stackoverflow.com/users/2417194/bunty"}, "edited": false, "score": 0, "creation_date": 1491398407, "post_id": 43231308, "comment_id": 73534755, "body": "this <a href=\"https://github.com/plataformatec/devise/wiki/How-To:-Use-SSL-(HTTPS)\" rel=\"nofollow noreferrer\">github.com/plataformatec/devise/wiki/How-To:-Use-SSL-(HTTPS)</a>"}], "answers": [{"comments": [{"owner": {"reputation": 776, "user_id": 6030239, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/deea17366715ac200fde1b6fb3511292?s=128&d=identicon&r=PG", "display_name": "Bexultan Myrzatayev", "link": "https://stackoverflow.com/users/6030239/bexultan-myrzatayev"}, "edited": false, "score": 1, "creation_date": 1491396207, "post_id": 43231456, "comment_id": 73532948, "body": "Mayur, where is sessions_controller?"}, {"owner": {"reputation": 776, "user_id": 6030239, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/deea17366715ac200fde1b6fb3511292?s=128&d=identicon&r=PG", "display_name": "Bexultan Myrzatayev", "link": "https://stackoverflow.com/users/6030239/bexultan-myrzatayev"}, "edited": false, "score": 0, "creation_date": 1491396267, "post_id": 43231456, "comment_id": 73532993, "body": "I will try to create a sessions_controller.rb in controllers/users/sessions folder"}, {"owner": {"reputation": 776, "user_id": 6030239, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/deea17366715ac200fde1b6fb3511292?s=128&d=identicon&r=PG", "display_name": "Bexultan Myrzatayev", "link": "https://stackoverflow.com/users/6030239/bexultan-myrzatayev"}, "edited": false, "score": 0, "creation_date": 1491396484, "post_id": 43231456, "comment_id": 73533147, "body": "Error: uninitialized constant Users::SessionsController  It seems I need more expanded explanations from you."}, {"owner": {"reputation": 51, "user_id": 7797538, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-m-bSfWLuBhQ/AAAAAAAAAAI/AAAAAAAAAF4/8DOfBmd0j-o/photo.jpg?sz=128", "display_name": "Mayur Kambariya", "link": "https://stackoverflow.com/users/7797538/mayur-kambariya"}, "reply_to_user": {"reputation": 776, "user_id": 6030239, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/deea17366715ac200fde1b6fb3511292?s=128&d=identicon&r=PG", "display_name": "Bexultan Myrzatayev", "link": "https://stackoverflow.com/users/6030239/bexultan-myrzatayev"}, "edited": false, "score": 1, "creation_date": 1491460672, "post_id": 43231456, "comment_id": 73564317, "body": "sessions_controller is generated by devise itself  app/controllers/users/sessios_controller.rb"}], "tags": [], "owner": {"reputation": 51, "user_id": 7797538, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-m-bSfWLuBhQ/AAAAAAAAAAI/AAAAAAAAAF4/8DOfBmd0j-o/photo.jpg?sz=128", "display_name": "Mayur Kambariya", "link": "https://stackoverflow.com/users/7797538/mayur-kambariya"}, "is_accepted": false, "score": 0, "last_activity_date": 1491395932, "creation_date": 1491395932, "answer_id": 43231456, "question_id": 43231308, "link": "https://stackoverflow.com/questions/43231308/devise-in-rails-doesnt-work-with-https/43231456#43231456", "title": "Devise in Rails doesn&#39;t work with HTTPs", "body": "<p>put one line in sessions_controller</p>\n\n<pre><code>skip_before_action :verify_authenticity_token\n</code></pre>\n\n<p>and in routes.rb</p>\n\n<pre><code>devise_for :users, controllers:\n                  {\n                    sessions: 'users/sessions',\n                  }\n</code></pre>\n\n<p>because its not require authentication_token when user login</p>\n"}, {"tags": [], "owner": {"reputation": 3516, "user_id": 4094161, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rCzRm.png?s=128&g=1", "display_name": "PHP Team", "link": "https://stackoverflow.com/users/4094161/php-team"}, "is_accepted": false, "score": 0, "last_activity_date": 1491400813, "creation_date": 1491400813, "answer_id": 43233417, "question_id": 43231308, "link": "https://stackoverflow.com/questions/43231308/devise-in-rails-doesnt-work-with-https/43233417#43233417", "title": "Devise in Rails doesn&#39;t work with HTTPs", "body": "<p>There is the workaround of disabling CSRF protection for the sign_in action in the application controller</p>\n\n<pre><code>class ApplicationController &lt; ActionController::Base\n  protect_from_forgery with: :exception\n  ....\nend\n</code></pre>\n\n<p>Set it as:</p>\n\n<pre><code>class ApplicationController &lt; ActionController::Base\n  protect_from_forgery  with: :exception\n  skip_before_filter :verify_authenticity_token, if: -&gt; { controller_name == 'sessions' &amp;&amp; action_name == 'create' }\n  ...\nend\n</code></pre>\n"}], "owner": {"reputation": 776, "user_id": 6030239, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/deea17366715ac200fde1b6fb3511292?s=128&d=identicon&r=PG", "display_name": "Bexultan Myrzatayev", "link": "https://stackoverflow.com/users/6030239/bexultan-myrzatayev"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 724, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1491421008, "creation_date": 1491395552, "last_edit_date": 1491421008, "question_id": 43231308, "link": "https://stackoverflow.com/questions/43231308/devise-in-rails-doesnt-work-with-https", "title": "Devise in Rails doesn&#39;t work with HTTPs", "body": "<p>After I press the button to \"sign in\" on <a href=\"https://myapp.com/users/sign_in\" rel=\"nofollow noreferrer\">https://myapp.com/users/sign_in</a>, the following error appears:</p>\n\n<pre><code>ActionController::InvalidAuthenticityToken in Devise::SessionsController#create\n</code></pre>\n\n<p>regardless of the existing user's credentials.</p>\n\n<p>If I press the button to sign in on <a href=\"http://myapp.com/users/sign_in\" rel=\"nofollow noreferrer\">http://myapp.com/users/sign_in</a>, the user signs in and the application seems to work smoothly, except the user cannot create posts under HTTPs too. </p>\n\n<p>I want to make devise authentication work under SSL.</p>\n\n<p>routes.rb:</p>\n\n<pre><code>devise_for :users\n</code></pre>\n\n<p>application_controller.rb:</p>\n\n<pre><code>class ApplicationController &lt; ActionController::Base\n    protect_from_forgery with: :exception\nend\n</code></pre>\n\n<p>user.rb:</p>\n\n<pre><code>class User &lt; ApplicationRecord\n    devise :database_authenticatable, :recoverable, :rememberable, :registerable, :trackable, :validatable\nend\n</code></pre>\n\n<ol>\n<li>I have the <code>&lt;%= csrf_meta_tags %&gt;</code> in the head </li>\n<li>I cleared the cookies in browsers</li>\n<li>I tried <code>protect_from_forgery with: :null_session</code> instead of <code>protect_from_forgery with: :exception</code> in app/controllers/application_controller.rb</li>\n<li>I tried to put <code>&lt;%= hidden_field_tag :authenticity_token, form_authenticity_token %&gt;</code> in the <code>form_for</code> for new session</li>\n<li>I tried <code>devise_for :users, :controllers =&gt; { :sessions =&gt; \"users/sessions\" }</code> in root</li>\n<li><p>I tried to add </p>\n\n<pre><code>config.to_prepare { Devise::SessionsController.force_ssl }\nconfig.to_prepare { Devise::RegistrationsController.force_ssl }\nconfig.to_prepare { Devise::PasswordsController.force_ssl }\n</code></pre>\n\n<p>in config/environments/production.rb</p></li>\n</ol>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4", "devise"], "comments": [{"owner": {"reputation": 340, "user_id": 3614852, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tACsF.jpg?s=128&g=1", "display_name": "Prashant Vardhan Singh", "link": "https://stackoverflow.com/users/3614852/prashant-vardhan-singh"}, "edited": false, "score": 0, "creation_date": 1491394403, "post_id": 43230325, "comment_id": 73531536, "body": "use <i>accepts_nested_attributes_for</i> in user model and in your <i>registrations/edit.html.erb</i> file use <i>fields_for</i> to upload multiple file. Please refer <a href=\"http://stackoverflow.com/questions/13506735/rails-has-many-through-nested-form#answer-21060278\" title=\"rails has many through nested form%23answer 21060278\">stackoverflow.com/questions/13506735/&hellip;</a>"}, {"owner": {"reputation": 999, "user_id": 2039718, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4URjU.jpg?s=128&g=1", "display_name": "Dnyanarth lonkar", "link": "https://stackoverflow.com/users/2039718/dnyanarth-lonkar"}, "edited": false, "score": 0, "creation_date": 1491394675, "post_id": 43230325, "comment_id": 73531758, "body": "for multiple file upload use need to use nested form ref: <a href=\"http://stackoverflow.com/questions/24597721/rails-4-multiple-image-upload-using-paperclip\" title=\"rails 4 multiple image upload using paperclip\">stackoverflow.com/questions/24597721/&hellip;</a>"}], "answers": [{"comments": [{"owner": {"reputation": 990, "user_id": 7240463, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/RQUCc.jpg?s=128&g=1", "display_name": "current_user", "link": "https://stackoverflow.com/users/7240463/current-user"}, "edited": false, "score": 0, "creation_date": 1491409469, "post_id": 43230903, "comment_id": 73543499, "body": "Thank you for the quick response.  I have already added  multipart:  true in the edit form."}, {"owner": {"reputation": 1018, "user_id": 2417194, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/0WgJ2.jpg?s=128&g=1", "display_name": "bunty", "link": "https://stackoverflow.com/users/2417194/bunty"}, "reply_to_user": {"reputation": 990, "user_id": 7240463, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/RQUCc.jpg?s=128&g=1", "display_name": "current_user", "link": "https://stackoverflow.com/users/7240463/current-user"}, "edited": false, "score": 0, "creation_date": 1491411648, "post_id": 43230903, "comment_id": 73544806, "body": "Suresh, add multipart true in html property of form_for tag."}], "tags": [], "owner": {"reputation": 1018, "user_id": 2417194, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/0WgJ2.jpg?s=128&g=1", "display_name": "bunty", "link": "https://stackoverflow.com/users/2417194/bunty"}, "is_accepted": false, "score": 0, "last_activity_date": 1491394487, "creation_date": 1491394487, "answer_id": 43230903, "question_id": 43230325, "link": "https://stackoverflow.com/questions/43230325/override-update-action-for-devise-user/43230903#43230903", "title": "Override update action for Devise User", "body": "<p>Add <code>multipart: true</code> in HTML block of form_tag.</p>\n\n<pre><code>&lt;%= form_for(resource, as: resource_name, url: registration_path(resource_name), html: {method: :put, multipart: true}) do |f| %&gt;\n</code></pre>\n\n<p>Also on browser inspect the code and see what attributes you can see in <code>&lt;form&gt;</code> tag. </p>\n\n<p>If you are able to add one file but facing problem while uploading multiple files then most probably reason is rails could not add multipart: true in form tag</p>\n"}], "owner": {"reputation": 990, "user_id": 7240463, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/RQUCc.jpg?s=128&g=1", "display_name": "current_user", "link": "https://stackoverflow.com/users/7240463/current-user"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 582, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1491469176, "creation_date": 1491392913, "last_edit_date": 1495540953, "question_id": 43230325, "link": "https://stackoverflow.com/questions/43230325/override-update-action-for-devise-user", "title": "Override update action for Devise User", "body": "<p>In the devise users edit profile page I want to add a custom field called \"add verification documents\" which takes in all documents uploaded using paperclip gem and has to be updated.A User can upload multiple documents.</p>\n\n<p>verification_document.rb</p>\n\n<pre><code>  class VerificationDocument &lt; ActiveRecord::Base\n belongs_to :user\n has_attached_file :verification_documents                \n   validates_attachment_content_type :verification_documents, {:content_type =&gt; %w( application/pdf )} \n end\n</code></pre>\n\n<p>user.rb</p>\n\n<pre><code> class User &lt; ActiveRecord::Base\n has_many :verification_documents\n end\n</code></pre>\n\n<p>In views/devise/registrations/edit.html.erb</p>\n\n<pre><code>   &lt;div class=\"row\"&gt;\n   &lt;%= form_for(resource, as: resource_name, url: registration_path(resource_name), html: {method: :put}, multipart: true) do |f| %&gt;\n   &lt;div class=\"form-group\"&gt;\n            &lt;%= f.text_field :fullname, autofocus: true, placeholder: \"Full Name *\", class: \"form-control\" %&gt;\n          &lt;/div&gt;\n\n          &lt;div class=\"form-group\"&gt;\n            &lt;%= f.email_field :email, placeholder: \"Email *\", class: \"form-control\" %&gt;\n          &lt;/div&gt;\n           &lt;span class=\"btn btn-default  btn-file btn-green pad_small\"&gt;Upload Verification Documents\n                &lt;input type=\"file\" accept=\"application/pdf\" name=\"input-file-preview\"/&gt;  \n                  &lt;%= file_field_tag \"verification_documents[]\", type: :file, multiple: true %&gt;\n                &lt;/span&gt; \n     &lt;div class=\"actions\"&gt;\n            &lt;%= f.button \"Save\", class: \"btn btn-green pad_small\" %&gt;\n          &lt;/div&gt;\n</code></pre>\n\n<p>routes.rb</p>\n\n<pre><code>      devise_for :users,\n         path: '',\n         path_names: {sign_in: 'login', sign_out: 'logout',sign_up: 'sign-up', edit: 'profile'},\n         controllers: {\n             omniauth_callbacks: 'omniauth_callbacks',\n             registrations: 'registrations'\n         }\n</code></pre>\n\n<p>How can I make update action in RegistrationsController &lt; Devise::RegistrationsController  as :</p>\n\n<pre><code>      def update\n      if @user.update(user_params)\n    if params[:verification_documents]\n    params[:verification_documents].each do |doc|\n      @user.verification_documents.create(verification_documents: doc)\n    end\n   end\n   redirect_to root_path, notice: \"Updated...\"\n   else\n   render :edit\n   end\n</code></pre>\n\n<p><strong>How to upload  multiple verification_documents all at a time during the devise user edit action?</strong></p>\n\n<p><strong>Note: I have successfully uploaded one verification_document in the devise users table using the paperclip gem.But I want to upload multiple verification_documents and show all the documents in the users profile view page.</strong></p>\n\n<p>I added the below lines in  ApplicationController for single document upload:</p>\n\n<pre><code>   def configure_permitted_parameters\ndevise_parameter_sanitizer.permit(:sign_up, keys: [:fullname, :subscribe])\ndevise_parameter_sanitizer.permit(:account_update, keys: [:fullname, :reset_password_token, :verification_documents])\n\n end\n</code></pre>\n\n<p>My Requirement is very similar to \n<a href=\"https://stackoverflow.com/questions/28208166/rails-devise-register-user-with-associated-model\">Rails Devise - Register User with Associated Model</a> ,\nBut Instead of address attributes, here I want to upload multiple verification verification documents to the verification_documents model while updating the devise user.</p>\n\n<p><strong>Any Help is Highly Appreciated.Thanks in Advance!</strong></p>\n"}, {"tags": ["ruby-on-rails", "ruby", "strong-parameters", "model-associations"], "comments": [{"owner": {"reputation": 3997, "user_id": 3998420, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/55ea542584d3fd2a430c3d409bdafc95?s=128&d=identicon&r=PG&f=1", "display_name": "bkunzi01", "link": "https://stackoverflow.com/users/3998420/bkunzi01"}, "edited": false, "score": 0, "creation_date": 1491391477, "post_id": 43229523, "comment_id": 73529306, "body": "You&#39;re trying to build several items at once and save them.  Try iterating through all of the items you plan on saving with a call to the shopping_list association and this problem should go away."}, {"owner": {"user_type": "does_not_exist", "display_name": "user6332661"}, "reply_to_user": {"reputation": 3997, "user_id": 3998420, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/55ea542584d3fd2a430c3d409bdafc95?s=128&d=identicon&r=PG&f=1", "display_name": "bkunzi01", "link": "https://stackoverflow.com/users/3998420/bkunzi01"}, "edited": false, "score": 0, "creation_date": 1491465939, "post_id": 43229523, "comment_id": 73567618, "body": "Thanks @bkunzi01 ! I&#39;m not sure I understand what you mean by &#39;... with a call to the shopping_list association&#39; though, are you able to provide an example?"}], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user6332661"}, "edited": false, "score": 0, "creation_date": 1491466317, "post_id": 43229803, "comment_id": 73567861, "body": "Thanks @Sajin, but I still get the same error trying both of those methods. If you have a look at the server log image, the &#39;@shopping_list&#39; object&#39;s id is added to each &#39;@item&#39; object&#39;s shopping_list_id successfully, but the issue arises when the &#39;@shopping_list&#39; object tries to save to the db.  When I tried the &#39;@shopping_list = ShoppingList.create(shopping_list_params)&#39; solution, the error was brought up there and didn&#39;t get a chance to build items."}, {"owner": {"user_type": "does_not_exist", "display_name": "user6332661"}, "edited": false, "score": 0, "creation_date": 1491469360, "post_id": 43229803, "comment_id": 73569948, "body": "I checked the logs again, the items are definitely saving successfully and each <i>item</i> object has the correct shopping_list_id assigned to it, but the <i>shopping_list</i> object itself will not save, and doesn&#39;t have an id. Which is confusing me a lot!"}], "tags": [], "owner": {"reputation": 1528, "user_id": 7573791, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0e5e5cf864fb33229ca56750a51d6674?s=128&d=identicon&r=PG&f=1", "display_name": "Sajin", "link": "https://stackoverflow.com/users/7573791/sajin"}, "is_accepted": false, "score": 0, "last_activity_date": 1491391471, "creation_date": 1491391471, "answer_id": 43229803, "question_id": 43229523, "link": "https://stackoverflow.com/questions/43229523/rails-why-is-my-parent-object-not-saving/43229803#43229803", "title": "Rails why is my parent object not saving?", "body": "<p>In the <code>create</code> method of <code>shopping_lists_controller</code>, you are using a new instance of <code>shopping_list</code> and using the id of that instance to create <code>items</code>. Since the new instance is not saved to the db, it will not have <code>id</code>. So you cannot use <code>@shopping_list.id</code> while creating items.<br><br>\nSo either change </p>\n\n<pre><code>@shopping_list = ShoppingList.new(shopping_list_params)\n</code></pre>\n\n<p>to</p>\n\n<pre><code>@shopping_list = ShoppingList.create(shopping_list_params)\n</code></pre>\n\n<p>or do</p>\n\n<pre><code>@shopping_list = ShoppingList.new(shopping_list_params)\n@shopping_list.save\n</code></pre>\n\n<p>You may also want to destroy this object if any exception is raised.</p>\n"}, {"tags": [], "owner": {"reputation": 548, "user_id": 987533, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7b838905086baf5cefc00961e8151cc0?s=128&d=identicon&r=PG", "display_name": "Anton K", "link": "https://stackoverflow.com/users/987533/anton-k"}, "is_accepted": true, "score": 1, "last_activity_date": 1491865786, "creation_date": 1491865786, "answer_id": 43334270, "question_id": 43229523, "link": "https://stackoverflow.com/questions/43229523/rails-why-is-my-parent-object-not-saving/43334270#43334270", "title": "Rails why is my parent object not saving?", "body": "<p>The issue is that <code>Meal</code> model has <code>belongs_to :shopping_list</code> but it doesn't have column <code>shopping_list_id</code>. </p>\n\n<p>So when you run </p>\n\n<pre><code>ShoppingList.create(meal_ids: ['1'])\n</code></pre>\n\n<p>Rails tries to create <code>Meal</code> model and link it back to the <code>ShoppingList</code>, but it can't since there is no such attribute and error tells you that <code>ActiveModel::MissingAttributeError</code>. To fix create a migration e.g.:</p>\n\n<pre><code>add_column :meals, :shopping_list_id, :integer\n</code></pre>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user6332661"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 126, "favorite_count": 0, "accepted_answer_id": 43334270, "answer_count": 2, "score": 1, "last_activity_date": 1491865786, "creation_date": 1491390767, "question_id": 43229523, "link": "https://stackoverflow.com/questions/43229523/rails-why-is-my-parent-object-not-saving", "title": "Rails why is my parent object not saving?", "body": "<p>I'm quite new to rails/programming/web development, and this is the error that I'm getting:</p>\n\n<p><strong>ActiveModel::MissingAttributeError (can't write unknown attribute <code>'shopping_list_id'</code>)</strong></p>\n\n<p>I'm trying to save a shopping list object which is populated with <em>Item</em> objects after selecting specific <em>Meal</em> objects (with collection_check_box) and the associated <em>Ingredient</em> objects.</p>\n\n<p>Looking through the localhost server logs, all the items are created correctly using the correct ingredients retrieved (and assigned to the current shopping list id) from the correct meal_ids - but when it comes to saving the actual shopping list I get the above error. Please see below for image of server log.</p>\n\n<p>I've been stuck on this for a few days now and I've seen many posts with the same error but all seem to have quite different contexts to this issue.</p>\n\n<p>Is it something to do with strong_parameters? Or are my associations wrong?</p>\n\n<p><strong>In my meals index.html.erb:</strong></p>\n\n<pre><code>&lt;%= form_for :shopping_list, url: shopping_lists_path do |f| %&gt;\n  &lt;%= collection_check_boxes :shopping_list, :meal_ids, Meal.all, :id, :name  do |b|%&gt;\n    &lt;%= b.label class:\"label-checkbox\" do%&gt;\n       &lt;%=b.check_box + b.text%&gt;\n    &lt;%end%&gt;\n  &lt;% end %&gt;\n\n  &lt;%= f.submit \"Create Shopping List\" %&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p><strong>My shopping_lists_controller:</strong></p>\n\n<pre><code>def create\n\n  @shopping_list = ShoppingList.new(shopping_list_params)\n\n  @meals = Meal.where(id:[@shopping_list.meal_ids])\n  @meals.map do |meal|\n    meal.ingredients.map do |ingredient|\n      @shopping_list.items.build(name: ingredient.name, quantity: ingredient.quantity, unit: ingredient.unit, shopping_list_id: @shopping_list.id)\n    end\n  end\n\n\n  respond_to do |format|\n    if @shopping_list.save\n      format.html { redirect_to @shopping_list, notice: 'Shopping List was successfully created.' }\n      format.json { render :show, status: :created, location: @shopping_list }\n    else\n      format.html { render :new }\n      format.json { render json: @shopping_list.errors, status: :unprocessable_entity }\n    end\n  end \n\nend\n</code></pre>\n\n<p>private</p>\n\n<pre><code>def set_shopping_list\n  @shopping_list = ShoppingList.find(params[:id])\nend\n\n\ndef shopping_list_params\n  params.require(:shopping_list).permit(:name, {meal_ids: []})\nend\n</code></pre>\n\n<p><strong>My ShoppingList Model:</strong></p>\n\n<pre><code>class ShoppingList &lt; ApplicationRecord\n  has_many :items\n  has_many :meals\n  accepts_nested_attributes_for :meals\n  accepts_nested_attributes_for :items\nend\n</code></pre>\n\n<p><strong>My Item Model:</strong></p>\n\n<pre><code>class Item &lt; ApplicationRecord\n  belongs_to :shopping_list\nend\n</code></pre>\n\n<p><strong>My schema.rb:</strong></p>\n\n<pre><code>create_table \"ingredients\", force: :cascade do |t|\n    t.integer  \"meal_id\"\n    t.string   \"name\"\n    t.float    \"quantity\"\n    t.integer  \"unit\"\n    t.datetime \"created_at\", null: false\n    t.datetime \"updated_at\", null: false\n    t.index [\"meal_id\"], name: \"index_ingredients_on_meal_id\"\n  end\n\n  create_table \"items\", force: :cascade do |t|\n    t.integer  \"shopping_list_id\"\n    t.string   \"name\"\n    t.float    \"quantity\"\n    t.integer  \"unit\"\n    t.datetime \"created_at\",       null: false\n    t.datetime \"updated_at\",       null: false\n    t.index [\"shopping_list_id\"], name: \"index_items_on_shopping_list_id\"\n  end\n\n  create_table \"meals\", force: :cascade do |t|\n    t.string   \"name\"\n    t.string   \"description\"\n    t.string   \"method\"\n    t.datetime \"created_at\",              null: false\n    t.datetime \"updated_at\",              null: false\n    t.string   \"meal_image_file_name\"\n    t.string   \"meal_image_content_type\"\n    t.integer  \"meal_image_file_size\"\n    t.datetime \"meal_image_updated_at\"\n    t.integer  \"diet\"\n  end\n\n  create_table \"shopping_lists\", force: :cascade do |t|\n    t.string   \"name\"\n    t.datetime \"created_at\", null: false\n    t.datetime \"updated_at\", null: false\n  end\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/zzHpP.png\" rel=\"nofollow noreferrer\">Image of server log</a></p>\n"}, {"tags": ["ruby-on-rails", "ruby", "devise", "carrierwave", "omniauth"], "answers": [{"tags": [], "owner": {"reputation": 1658, "user_id": 2240273, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/R9qy8.jpg?s=128&g=1", "display_name": "alanpaivaa", "link": "https://stackoverflow.com/users/2240273/alanpaivaa"}, "is_accepted": true, "score": 1, "last_activity_date": 1491408127, "creation_date": 1491408127, "answer_id": 43236237, "question_id": 43229440, "link": "https://stackoverflow.com/questions/43229440/devise-omniauth-carrierwave-doesnt-save-facebook-github-profile-image/43236237#43236237", "title": "Devise + Omniauth + Carrierwave doesn&#39;t save facebook/github profile image", "body": "<p>I had a similar problem a while ago.\nAparently, carrierwave does not allow a <code>remote_url</code> which redirects from a protocol to another. The url you get with <code>auth.info.image</code> is an <code>http</code> url which redirects to a <code>https</code> url. So in your <code>OauthUserGenerator</code>class, on your <code>generate</code> method. Try to do the following:</p>\n\n<pre><code>@user.remote_avatar_url = @auth.info.image.gsub('http', 'https')\n</code></pre>\n\n<p>That way the redirect will be from <code>https -&gt; https</code>. That worked for me. Hope that's the same issue for you.</p>\n"}], "owner": {"reputation": 171, "user_id": 5812753, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/ol7fB.jpg?s=128&g=1", "display_name": "rabingaire", "link": "https://stackoverflow.com/users/5812753/rabingaire"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 387, "favorite_count": 0, "accepted_answer_id": 43236237, "answer_count": 1, "score": 1, "last_activity_date": 1491408127, "creation_date": 1491390520, "last_edit_date": 1495539998, "question_id": 43229440, "link": "https://stackoverflow.com/questions/43229440/devise-omniauth-carrierwave-doesnt-save-facebook-github-profile-image", "title": "Devise + Omniauth + Carrierwave doesn&#39;t save facebook/github profile image", "body": "<p>Before I was only using Omni auth + devise for a user to sign Up. Everything was working fine. Later I decided to use simple sign Up form of devise. I configured it and it was also working fine, but the problem arises when a user wants to use Omni auth to sign Up. Avatar is always set to nil even though facebook/Github is returning the link to the profile picture. I have tried this <a href=\"https://stackoverflow.com/questions/19868830/devise-omniauth-carrierwave-doesnt-save-facebook-profile-image\">solution</a> but, still is not working and I am aware of carrierwave remote location upload method. Gems I have used for Omni auth are omniauth-facebook and omniauth-github.</p>\n\n<p>(1)</p>\n\n<pre><code>User.rb\n</code></pre>\n\n<p>Code:</p>\n\n<pre><code>class User &lt; ApplicationRecord\n  include Storext.model\n  devise :database_authenticatable, :registerable, :omniauthable,\n     :recoverable, :rememberable, :trackable, :validatable\n  validates :first_name, :last_name, :email, :experience_level,\n        :goal_level, :theoretical_learner_level, presence: true\n  mount_uploader :avatar, AvatarUploader\n\n  # Override devise method for Oauth\n  def self.new_with_session(params, session)\n    if session['devise.user_attributes']\n      new(session['devise.user_attributes'].merge(session[:user_attributes])) do |user|\n        user.attributes = params\n        user.valid?\n      end\n    else\n      super\n    end\n  end\n\n  def self.from_omniauth(auth)\n    where(auth.slice(:provider, :uid).to_hash).first_or_create do |user|\n      OauthUserGenerator.new(user: user, auth: auth).generate\n    end\n  end\n\n  # If sign in through Oauth, don't require password\n  def password_required?\n    super &amp;&amp; provider.blank?\n  end\n\n  # Don't require update with password if Oauth\n  def update_with_password(params, *options)\n    if encrypted_password.blank?\n      update_attributes(params, *options)\n    else\n      super\n    end\n  end\nend\n</code></pre>\n\n<p>(2)</p>\n\n<pre><code>oauth_user_generator.rb\n</code></pre>\n\n<p>Code: </p>\n\n<pre><code>class OauthUserGenerator\n  def initialize(user:, auth:)\n    @user = user\n    @auth = auth\n  end\n\n  def generate\n    @user.provider = @auth.provider\n    @user.uid = @auth.uid\n    @user.email = @auth.info.email\n    @user.password = Devise.friendly_token[0, 20]\n    @user.first_name = @auth.info.name.split[0]\n    @user.last_name = @auth.info.name.split[1]\n    @user.remote_avatar_url = @auth.info.image\n  end\nend\n</code></pre>\n\n<p>(3)</p>\n\n<pre><code>omniauth_callbacks_controller.rb\n</code></pre>\n\n<p>Code: </p>\n\n<pre><code>class OmniauthCallbacksController &lt; Devise::OmniauthCallbacksController\n  def omniauth_providers\n    process_oauth(request.env['omniauth.auth'].merge(session.fetch(:user_attributes, {})))\n  end\n\n  alias facebook omniauth_providers\n  alias github omniauth_providers\n\n  private\n\n  def process_oauth(omniauth_params)\n    user = User.from_omniauth(omniauth_params)\n    if user.persisted?\n      flash.notice = 'Signed in!'\n      sign_in_and_redirect user\n    else\n      session['devise.user_attributes'] = user.attributes\n      redirect_to new_user_email_registration_path\n    end\n  end\nend\n</code></pre>\n\n<p>Thank You. </p>\n"}, {"tags": ["ruby", "openssl", "digital-signature"], "comments": [{"owner": {"reputation": 16672, "user_id": 22237, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/hkobD.png?s=128&g=1", "display_name": "Kris", "link": "https://stackoverflow.com/users/22237/kris"}, "edited": false, "score": 0, "creation_date": 1491393076, "post_id": 43229221, "comment_id": 73530522, "body": "It might help if you state the error."}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1491421614, "post_id": 43229221, "comment_id": 73550771, "body": "Please read &quot;<a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>&quot; and the linked page."}, {"owner": {"reputation": 387, "user_id": 2058004, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7222625a5d82577bf9fd32dd4647e120?s=128&d=identicon&r=PG", "display_name": "Harry Fairbanks", "link": "https://stackoverflow.com/users/2058004/harry-fairbanks"}, "edited": false, "score": 0, "creation_date": 1549332985, "post_id": 43229221, "comment_id": 95861429, "body": "I answered a similar question here <a href=\"https://stackoverflow.com/questions/51984805/origami-openssl-error-while-validating-digital-signature-of-a-pdf-in-rails/54526938#54526938\">How to add digital signature to pdf in Ruby?</a> It&#39;s a bit rough of an answer but it has all the elements you&#39;re looking for."}], "owner": {"reputation": 177, "user_id": 3312887, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/3d0f7ac5248e2d1cf4b0e9351e578d4c?s=128&d=identicon&r=PG&f=1", "display_name": "Gurunath", "link": "https://stackoverflow.com/users/3312887/gurunath"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 862, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1549332985, "creation_date": 1491389917, "last_edit_date": 1495542336, "question_id": 43229221, "link": "https://stackoverflow.com/questions/43229221/how-to-verify-pdf-digital-signature-in-ruby", "title": "How to verify PDF digital signature in Ruby", "body": "<p>I added a digital signature as mentioned in \"<a href=\"https://stackoverflow.com/questions/12078006/insert-digital-signature-into-existing-pdf-file\">Insert digital signature into existing pdf file</a>\" and stored that certificate as a PEM file in local. How can I verify the signature with a stored certificate? </p>\n\n<p>This is sample code from <a href=\"https://stackoverflow.com/questions/12078006/insert-digital-signature-into-existing-pdf-file\">source</a>:</p>\n\n<pre><code>open 'certificate.pem', 'w' do |io| io.write cert.to_pem end #Saving certificate\ncert = OpenSSL::X509::Certificate.new(File::read('certificate.pem')) #Opening certificate to verify. This gives error. how to convert pem string to certificate.\npdf = PDF.read('test.pdf') #opening certified pdf to validate signature\npdf.verify(trusted_certs: [cert]) if pdf.signed? #This gives error.\n</code></pre>\n\n<p>Edited:\nAfter adding <code>cert.sign key, OpenSSL::Digest::SHA1.new</code> the above works.But the verification fails.\nUsing the following code i added digital signature into pdf.</p>\n\n<pre><code>require 'openssl'\nrequire 'origami'\ninclude Origami\nkey = OpenSSL::PKey::RSA.new 2048\nname = OpenSSL::X509::Name.parse 'CN=nobody/DC=example'\ncert = OpenSSL::X509::Certificate.new\ncert.version = 2\ncert.serial = 0\ncert.not_before = Time.now\ncert.not_after = Time.now + 3600\ncert.public_key = key.public_key\ncert.subject = name\ncert.sign key, OpenSSL::Digest::SHA1.new\nopen 'certificate.pem', 'w' do |io| io.write cert.to_pem end\nOUTPUTFILE = \"outfile.pdf\"\npdf = PDF.read('testing.pdf')\npdf.sign(cert, key, \n  :method =&gt; 'adbe.pkcs7.sha1',\n  #:annotation =&gt; sigannot, \n  :location =&gt; \"Portugal\", \n  :contact =&gt; \"myemail@email.tt\", \n  :reason =&gt; \"Proof of Concept\"\n)\npdf.save(OUTPUTFILE)\n</code></pre>\n\n<p>After that i used the following code to verify digital signature using stored certificate. But it gives false.</p>\n\n<pre><code>signed_cert = OpenSSL::X509::Certificate.new(File::read('certificate.pem'))\npdf = PDF.read(\"outfile.pdf\")\nif pdf.signed?\n  pdf.verify(trusted_certs: [signed_cert]) #This gives false\nend\n</code></pre>\n\n<p>What am I doing wrong?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "activerecord", "paper-trail-gem"], "comments": [{"owner": {"reputation": 16672, "user_id": 22237, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/hkobD.png?s=128&g=1", "display_name": "Kris", "link": "https://stackoverflow.com/users/22237/kris"}, "edited": false, "score": 1, "creation_date": 1491390347, "post_id": 43229201, "comment_id": 73528500, "body": "Try <code>has_paper_trail class_name: ::Bar::Baz::FooVersion</code> or <code>has_paper_trail class_name: &#39;FooVersion&#39;</code> (you have plural in your example)."}, {"owner": {"reputation": 7768, "user_id": 1213273, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/cf372446eb8bcca32373052e4dda2164?s=128&d=identicon&r=PG", "display_name": "Severin", "link": "https://stackoverflow.com/users/1213273/severin"}, "reply_to_user": {"reputation": 16672, "user_id": 22237, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/hkobD.png?s=128&g=1", "display_name": "Kris", "link": "https://stackoverflow.com/users/22237/kris"}, "edited": false, "score": 0, "creation_date": 1491390722, "post_id": 43229201, "comment_id": 73528775, "body": "@Kris Removing the plural results in an undefined table error, since it relates to <code>foo_versions</code>."}, {"owner": {"reputation": 16672, "user_id": 22237, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/hkobD.png?s=128&g=1", "display_name": "Kris", "link": "https://stackoverflow.com/users/22237/kris"}, "edited": false, "score": 1, "creation_date": 1491390826, "post_id": 43229201, "comment_id": 73528854, "body": "Is this not a better error because at least it is finding the class. Does &quot;foo_versions&quot; table exist?"}, {"owner": {"reputation": 7768, "user_id": 1213273, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/cf372446eb8bcca32373052e4dda2164?s=128&d=identicon&r=PG", "display_name": "Severin", "link": "https://stackoverflow.com/users/1213273/severin"}, "reply_to_user": {"reputation": 16672, "user_id": 22237, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/hkobD.png?s=128&g=1", "display_name": "Kris", "link": "https://stackoverflow.com/users/22237/kris"}, "edited": false, "score": 0, "creation_date": 1491391232, "post_id": 43229201, "comment_id": 73529132, "body": "@Kris The table is called <code>my_app_foo_versions</code> using the <code>table_name_prefix</code> from the ApplicationRecord"}, {"owner": {"reputation": 16672, "user_id": 22237, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/hkobD.png?s=128&g=1", "display_name": "Kris", "link": "https://stackoverflow.com/users/22237/kris"}, "edited": false, "score": 1, "creation_date": 1491392835, "post_id": 43229201, "comment_id": 73530329, "body": "But you are setting <code>table_name</code> to <code>:foo_versions</code>, sounds like you might need to include the prefix."}, {"owner": {"reputation": 7768, "user_id": 1213273, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/cf372446eb8bcca32373052e4dda2164?s=128&d=identicon&r=PG", "display_name": "Severin", "link": "https://stackoverflow.com/users/1213273/severin"}, "reply_to_user": {"reputation": 16672, "user_id": 22237, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/hkobD.png?s=128&g=1", "display_name": "Kris", "link": "https://stackoverflow.com/users/22237/kris"}, "edited": false, "score": 0, "creation_date": 1491461484, "post_id": 43229201, "comment_id": 73564791, "body": "@Kris That was the first thing I&#39;ve tried. I&#39;ve also tried adding <code>self.table_name_prefix = &#39;my_app_&#39;</code> to <code>PaperTrail::Version</code>, but still no luck."}], "owner": {"reputation": 7768, "user_id": 1213273, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/cf372446eb8bcca32373052e4dda2164?s=128&d=identicon&r=PG", "display_name": "Severin", "link": "https://stackoverflow.com/users/1213273/severin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 280, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1491389874, "creation_date": 1491389874, "question_id": 43229201, "link": "https://stackoverflow.com/questions/43229201/using-paper-trail-gem-with-activerecord-table-name-prefix", "title": "Using paper trail gem with ActiveRecord table_name_prefix", "body": "<p>I am currently setting up PaperTrail for my Rails 5 application, where I need custom names for the version tables. As for the basic setup: I have configured</p>\n\n<pre><code># app/models/application_record.rb\nclass ApplicationRecord &lt; ActiveRecord::Base\n  self.abstract_class = true\n  self.table_name_prefix = 'my_app_'\nend\n</code></pre>\n\n<p>and changed the default PaperTrail migration to fit this:</p>\n\n<pre><code>def change\n  create_table :my_app_foo_versions, ...\n  ...\nend\n</code></pre>\n\n<p>The Models are defined like this:</p>\n\n<pre><code># lib/bar/baz/foo.rb\nmodule Bar\n  module Baz\n    class Foo &lt; ApplicationRecord\n      has_paper_trail class_name: 'FooVersions'\n    end\n  end\nend\n\n# lib/bar/baz/foo_version.rb\nmodule Bar\n  module Baz\n    class FooVersion &lt; PaperTrail::Version\n      self.table_name = :foo_versions\n      self.sequence_name = :foo_versions_id_seq\n    end\n  end\nend\n</code></pre>\n\n<p>In addition, the <code>PaperTrail::Version</code> is defined like so:</p>\n\n<pre><code># app/models/paper_trail/versions.rb\nmodule PaperTrail\n  class Version &lt; ApplicationRecord\n    include PaperTrail::VersionConcern\n    self.abstract_class = true\n  end\nend\n</code></pre>\n\n<p>Now, the migrations run without any errors, but when I create a new DB entry of <code>Foo</code> I get</p>\n\n<pre><code>NameError: uninitialized constant Bar::Baz::Foo::FooVersions\n</code></pre>\n\n<p>I have tried any naming combination I could think of (regarding file and class names), but I can't seem to get around this error. What part of this setup do I have to change to use this custom versions table for my model?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4", "ruby-on-rails-5", "rubocop"], "answers": [{"comments": [{"owner": {"reputation": 47232, "user_id": 1772830, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Qtoqg.jpg?s=128&g=1", "display_name": "Andrey Deineko", "link": "https://stackoverflow.com/users/1772830/andrey-deineko"}, "edited": false, "score": 0, "creation_date": 1491389957, "post_id": 43229214, "comment_id": 73528206, "body": "Nope, I have the newest version (from April the 3rd - 0.48.1). Will accept in 8 mins :)"}, {"owner": {"reputation": 12629, "user_id": 4739257, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/MdhEs.jpg?s=128&g=1", "display_name": "Ilya", "link": "https://stackoverflow.com/users/4739257/ilya"}, "edited": false, "score": 5, "creation_date": 1491391704, "post_id": 43229214, "comment_id": 73529489, "body": "Fix is <a href=\"https://github.com/bbatsov/rubocop/pull/4237\" rel=\"nofollow noreferrer\">already merged</a> in rubocop master, check the new version soon :)"}, {"owner": {"reputation": 5050, "user_id": 322791, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/331994d09f3139c73f1ac29e5a65d91e?s=128&d=identicon&r=PG", "display_name": "knagode", "link": "https://stackoverflow.com/users/322791/knagode"}, "edited": false, "score": 0, "creation_date": 1492717147, "post_id": 43229214, "comment_id": 74109916, "body": "How can I turn off this warning? What should I put in .rubocop.yml to fix this?"}, {"owner": {"reputation": 4205, "user_id": 3102766, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/NXF1I.jpg?s=128&g=1", "display_name": "tirdadc", "link": "https://stackoverflow.com/users/3102766/tirdadc"}, "edited": false, "score": 0, "creation_date": 1492803082, "post_id": 43229214, "comment_id": 74153499, "body": "Weird, still getting this with 0.48.1, going to disable the cop"}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "reply_to_user": {"reputation": 4205, "user_id": 3102766, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/NXF1I.jpg?s=128&g=1", "display_name": "tirdadc", "link": "https://stackoverflow.com/users/3102766/tirdadc"}, "edited": false, "score": 0, "creation_date": 1492804324, "post_id": 43229214, "comment_id": 74154064, "body": "@tirdadc: yep, 0.48.1 still has it. You need a newer version. Or master."}], "tags": [], "owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "is_accepted": true, "score": 22, "last_activity_date": 1518196595, "last_edit_date": 1518196595, "creation_date": 1491389904, "answer_id": 43229214, "question_id": 43229096, "link": "https://stackoverflow.com/questions/43229096/parenthesize-the-param-to-make-sure-that-block-will-be-associated-with-method-ca/43229214#43229214", "title": "Parenthesize the param to make sure that block will be associated with method call", "body": "<p>It wants you to do this: </p>\n\n<pre><code>scope :active, (-&gt; { where(active: true) }) \n</code></pre>\n\n<p>Better to turn off the warning :) </p>\n\n<p>This stabby lambda syntax is perfectly fine. Maybe you have old rubocop version?</p>\n\n<p><strong>Update:</strong> fixed in 0.49.0.</p>\n"}, {"comments": [{"owner": {"reputation": 762, "user_id": 1062276, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/283b2a44a6ede568b3863ce83fff18f1?s=128&d=identicon&r=PG", "display_name": "ringe", "link": "https://stackoverflow.com/users/1062276/ringe"}, "edited": false, "score": 0, "creation_date": 1507634036, "post_id": 45022725, "comment_id": 80278795, "body": "this is the correct answer, as far as I am concerned"}], "tags": [], "owner": {"reputation": 139, "user_id": 3851381, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YkFjd.jpg?s=128&g=1", "display_name": "AnthonyM.", "link": "https://stackoverflow.com/users/3851381/anthonym"}, "is_accepted": false, "score": 3, "last_activity_date": 1499760906, "last_edit_date": 1499760906, "creation_date": 1499726394, "answer_id": 45022725, "question_id": 43229096, "link": "https://stackoverflow.com/questions/43229096/parenthesize-the-param-to-make-sure-that-block-will-be-associated-with-method-ca/45022725#45022725", "title": "Parenthesize the param to make sure that block will be associated with method call", "body": "<p><code>gem update rubocop</code> worked for me.</p>\n"}], "owner": {"reputation": 47232, "user_id": 1772830, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Qtoqg.jpg?s=128&g=1", "display_name": "Andrey Deineko", "link": "https://stackoverflow.com/users/1772830/andrey-deineko"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 5854, "favorite_count": 0, "accepted_answer_id": 43229214, "answer_count": 2, "score": 15, "last_activity_date": 1609836454, "creation_date": 1491389592, "last_edit_date": 1609836454, "question_id": 43229096, "link": "https://stackoverflow.com/questions/43229096/parenthesize-the-param-to-make-sure-that-block-will-be-associated-with-method-ca", "title": "Parenthesize the param to make sure that block will be associated with method call", "body": "<pre><code>class User\n  scope :active, -&gt; { where(active: true) }\nend\n</code></pre>\n\n<p>Running rubocop I get the following warning:</p>\n\n<blockquote>\n  <p>Parenthesize the param <code>-&gt; { where(active: true) }</code> to make sure that\n  the block will be associated with the <code>-&gt;</code> method call.</p>\n</blockquote>\n\n<p>I have no slightest clue, what my <code>scope</code> definition has to do with this warning. Do you?</p>\n\n<p>How do I fix the warning except for turning the check off because it makes no sense at the moment?</p>\n"}, {"tags": ["ruby", "syntax"], "comments": [{"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1491387644, "post_id": 43228179, "comment_id": 73526471, "body": "what ruby version? This runs fine for me in ruby 2.3.4"}, {"owner": {"reputation": 1121, "user_id": 272846, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/8b12d17e2b54660de108a0995e1b5c3f?s=128&d=identicon&r=PG", "display_name": "Molfar", "link": "https://stackoverflow.com/users/272846/molfar"}, "reply_to_user": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1491388243, "post_id": 43228179, "comment_id": 73526932, "body": "ruby 2.3.1p112 (2016-04-26 revision 54768) [x86_64-darwin16]"}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 2, "creation_date": 1491388623, "post_id": 43228179, "comment_id": 73527207, "body": "Still can&#39;t reproduce. <a href=\"https://pastebin.com/CeL9aMkE\" rel=\"nofollow noreferrer\">This code</a> should be close enough to what you have, I think. And it doesn&#39;t fail for me. Try it. If it doesn&#39;t fail for you too, then we&#39;ll need a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>."}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 6, "creation_date": 1491388759, "post_id": 43228179, "comment_id": 73527328, "body": "Show the error you receive at least, please."}, {"owner": {"reputation": 33085, "user_id": 2423164, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Nxbnp.jpg?s=128&g=1", "display_name": "ndnenkov", "link": "https://stackoverflow.com/users/2423164/ndnenkov"}, "reply_to_user": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1491389671, "post_id": 43228179, "comment_id": 73527977, "body": "@mudasobwa, the error is &quot;unexpected keyword_do...&quot;. Has something to do with the value for the last keyword argument being a literal string or boolean. If you change it to a symbol/number/variable, it works. MCVE: <code>foo bar(baz 42), quiz: &#39;test&#39; { }</code>. Ruby version - 2.3.3p222."}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 1, "creation_date": 1491392035, "post_id": 43228179, "comment_id": 73529728, "body": "You should file a bug report, this looks like a parser shortcoming."}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "reply_to_user": {"reputation": 33085, "user_id": 2423164, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Nxbnp.jpg?s=128&g=1", "display_name": "ndnenkov", "link": "https://stackoverflow.com/users/2423164/ndnenkov"}, "edited": false, "score": 0, "creation_date": 1491396419, "post_id": 43228179, "comment_id": 73533092, "body": "@ndn: how do you know it&#39;s <i>that</i> error? If it is, how do you explain it being fixed by placing parentheses around 42 (because that&#39;s what allegedly happens in the OP)?"}, {"owner": {"reputation": 33085, "user_id": 2423164, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Nxbnp.jpg?s=128&g=1", "display_name": "ndnenkov", "link": "https://stackoverflow.com/users/2423164/ndnenkov"}, "reply_to_user": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 1, "creation_date": 1491396767, "post_id": 43228179, "comment_id": 73533360, "body": "@SergioTulentsev, I know because I reproduced it. As for why these particular parentheses help the parser and why only with string/boolean values - I&#39;m wondering the same myself. I agree with Stefan&#39;s sentiment that the parser is just being weird. I would understand it if the parentheses were around the <code>link_to</code> invocation, but that is not the case."}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "reply_to_user": {"reputation": 33085, "user_id": 2423164, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Nxbnp.jpg?s=128&g=1", "display_name": "ndnenkov", "link": "https://stackoverflow.com/users/2423164/ndnenkov"}, "edited": false, "score": 0, "creation_date": 1491396900, "post_id": 43228179, "comment_id": 73533479, "body": "@ndn: ah indeed, block changes everything. Super-weird!"}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "reply_to_user": {"reputation": 33085, "user_id": 2423164, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Nxbnp.jpg?s=128&g=1", "display_name": "ndnenkov", "link": "https://stackoverflow.com/users/2423164/ndnenkov"}, "edited": false, "score": 0, "creation_date": 1491397174, "post_id": 43228179, "comment_id": 73533706, "body": "@ndn: at least, numbers behave the same as strings/booleans for me. But variables - it tries to interpret it as a method. I have no idea what&#39;s happening :)"}, {"owner": {"reputation": 33085, "user_id": 2423164, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Nxbnp.jpg?s=128&g=1", "display_name": "ndnenkov", "link": "https://stackoverflow.com/users/2423164/ndnenkov"}, "reply_to_user": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 1, "creation_date": 1491397379, "post_id": 43228179, "comment_id": 73533867, "body": "@SergioTulentsev, hm, I tried again with numbers/symbols and I got the error. Not sure what I did test earlier. But for variables it does make sense that it would interpret it as a method call and pass the block to that <i>&quot;method&quot;</i> instead of <code>link_to</code>, hence no syntax error."}], "owner": {"reputation": 1121, "user_id": 272846, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/8b12d17e2b54660de108a0995e1b5c3f?s=128&d=identicon&r=PG", "display_name": "Molfar", "link": "https://stackoverflow.com/users/272846/molfar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 80, "favorite_count": 1, "answer_count": 0, "score": 2, "last_activity_date": 1491387752, "creation_date": 1491387150, "last_edit_date": 1491387752, "question_id": 43228179, "link": "https://stackoverflow.com/questions/43228179/whats-ruby-syntax-error-here", "title": "What&#39;s Ruby syntax error here?", "body": "<p>This is a simple code from rails project. But why Ruby shows syntax error here? In my humble opinion, all the necessary parentheses are present here.</p>\n\n<pre><code>link_to cart_remove_path(current_cart.item_for variant), class: 'text-danger', remote: true do\n</code></pre>\n\n<p>I know the way how fix this, like:</p>\n\n<pre><code>link_to cart_remove_path(current_cart.item_for(variant)), class: 'text-danger', remote: true do\n</code></pre>\n\n<p>But I cant understand why Ruby requires this extra parentheses?</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "answers": [{"tags": [], "owner": {"reputation": 47232, "user_id": 1772830, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Qtoqg.jpg?s=128&g=1", "display_name": "Andrey Deineko", "link": "https://stackoverflow.com/users/1772830/andrey-deineko"}, "is_accepted": true, "score": 2, "last_activity_date": 1491438659, "last_edit_date": 1491438659, "creation_date": 1491387144, "answer_id": 43228174, "question_id": 43228122, "link": "https://stackoverflow.com/questions/43228122/unable-to-access-env-in-rails-worker/43228174#43228174", "title": "Unable to access ENV in Rails worker", "body": "<p>Change the braces (as it's shown in the docs you've linked to):</p>\n\n<pre><code>ENV['APILAYER_KEY']\n</code></pre>\n\n<p><code>ENV</code> is an object. The problem with your code is that Ruby treats it as if it was a method, and <code>\"APILAYER_KEY\"</code> as an argument passed to it.</p>\n"}], "owner": {"reputation": 5932, "user_id": 3541205, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/6d36383f353f79d903e2e0946b73e8f7?s=128&d=identicon&r=PG", "display_name": "aks", "link": "https://stackoverflow.com/users/3541205/aks"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 27, "favorite_count": 0, "accepted_answer_id": 43228174, "answer_count": 1, "score": -1, "last_activity_date": 1491438659, "creation_date": 1491387010, "last_edit_date": 1491388916, "question_id": 43228122, "link": "https://stackoverflow.com/questions/43228122/unable-to-access-env-in-rails-worker", "title": "Unable to access ENV in Rails worker", "body": "<p>I am trying to read an environment variable in my worker(also tried in rake tasks) like:</p>\n\n<pre><code>puts ENV('APILAYER_KEY')\n</code></pre>\n\n<p>but it throws the following error:</p>\n\n<pre><code>NoMethodError: undefined method `ENV' for #&lt;ExchangeRateUpdater:0x0055c5a7a484f0&gt;\n</code></pre>\n\n<p>As I can see <code>ENV</code> is supposed to be Ruby method and will be available everywhere. <a href=\"https://ruby-doc.org/core-2.2.0/ENV.html\" rel=\"nofollow noreferrer\">https://ruby-doc.org/core-2.2.0/ENV.html</a></p>\n\n<p>Has anyone seen this problem?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "api", "validation"], "comments": [{"owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "edited": false, "score": 1, "creation_date": 1491384913, "post_id": 43226967, "comment_id": 73524445, "body": "How do you plan to store this attributes with unknown names in your db? Serialized? Document storage?"}, {"owner": {"reputation": 133, "user_id": 4716314, "user_type": "registered", "accept_rate": 14, "profile_image": "https://graph.facebook.com/914603558560275/picture?type=large", "display_name": "Satyam Agrawal", "link": "https://stackoverflow.com/users/4716314/satyam-agrawal"}, "reply_to_user": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "edited": false, "score": 0, "creation_date": 1491385657, "post_id": 43226967, "comment_id": 73525021, "body": "I will not be storing them. Its only meant for one time use."}, {"owner": {"reputation": 133, "user_id": 4716314, "user_type": "registered", "accept_rate": 14, "profile_image": "https://graph.facebook.com/914603558560275/picture?type=large", "display_name": "Satyam Agrawal", "link": "https://stackoverflow.com/users/4716314/satyam-agrawal"}, "reply_to_user": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "edited": false, "score": 0, "creation_date": 1491387010, "post_id": 43226967, "comment_id": 73526051, "body": "I&#39;m simply pushing data to IPFS and not storing on local db."}, {"owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "edited": false, "score": 0, "creation_date": 1491387174, "post_id": 43226967, "comment_id": 73526164, "body": "Did you consider just pushing un-permitted params (<code>params[:key]</code>)?"}, {"owner": {"reputation": 133, "user_id": 4716314, "user_type": "registered", "accept_rate": 14, "profile_image": "https://graph.facebook.com/914603558560275/picture?type=large", "display_name": "Satyam Agrawal", "link": "https://stackoverflow.com/users/4716314/satyam-agrawal"}, "reply_to_user": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "edited": false, "score": 0, "creation_date": 1491387505, "post_id": 43226967, "comment_id": 73526375, "body": "yes but is there not a way to make dynamic permission on the params?"}, {"owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "edited": false, "score": 0, "creation_date": 1491387783, "post_id": 43226967, "comment_id": 73526580, "body": "Sorry, but that doesn&#39;t make sense. If you don&#39;t know what the user is sending, then you cannot whitelist the params. How do you dynamically permit secure parameters? You can only allow everything with <a href=\"http://api.rubyonrails.org/classes/ActionController/Parameters.html#method-i-permit-21\" rel=\"nofollow noreferrer\"><code>permit!</code></a> or just use the plain un-permitted params. From a security point of view permitting everything is as bad as using the plain, un-permitted params hash."}, {"owner": {"reputation": 133, "user_id": 4716314, "user_type": "registered", "accept_rate": 14, "profile_image": "https://graph.facebook.com/914603558560275/picture?type=large", "display_name": "Satyam Agrawal", "link": "https://stackoverflow.com/users/4716314/satyam-agrawal"}, "reply_to_user": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "edited": false, "score": 0, "creation_date": 1491387897, "post_id": 43226967, "comment_id": 73526672, "body": "if we want to permit some data and leave the rest un-permitted then how do we do that?"}, {"owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "edited": false, "score": 0, "creation_date": 1491388005, "post_id": 43226967, "comment_id": 73526763, "body": "How do you want to decide what to permit and what not to permit, if you the attribute names an unknown to you?"}, {"owner": {"reputation": 133, "user_id": 4716314, "user_type": "registered", "accept_rate": 14, "profile_image": "https://graph.facebook.com/914603558560275/picture?type=large", "display_name": "Satyam Agrawal", "link": "https://stackoverflow.com/users/4716314/satyam-agrawal"}, "reply_to_user": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "edited": false, "score": 0, "creation_date": 1491388463, "post_id": 43226967, "comment_id": 73527083, "body": "say i want to permit name and contact and rest is unpermitted. then how to write it in rails?"}, {"owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "edited": false, "score": 0, "creation_date": 1491388770, "post_id": 43226967, "comment_id": 73527339, "body": "You question is not clear to me. Why permit <code>:name</code> and <code>:contact</code>, when everything else will be used un-permitted anyway. What is the benefit of permitting something and let everything else pass un-permitted? It is like asking Peter Parker and Tony Stark for their passport at the border, but allow all others to cross the border without a passport at all. Then there is no benefit in asking poor Peter and Tony..."}, {"owner": {"reputation": 133, "user_id": 4716314, "user_type": "registered", "accept_rate": 14, "profile_image": "https://graph.facebook.com/914603558560275/picture?type=large", "display_name": "Satyam Agrawal", "link": "https://stackoverflow.com/users/4716314/satyam-agrawal"}, "reply_to_user": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "edited": false, "score": 0, "creation_date": 1491389576, "post_id": 43226967, "comment_id": 73527910, "body": "thats hilarious! let me explain myself. i have a dashboard where the fields are name , contact and then there is a field say Address proof. and the customer has to write the proof he is giving and upload the corresponding document. now the user may upload anything from DL or Bank statement or something else. Also he can upload more than one document."}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1491433811, "post_id": 43226967, "comment_id": 73556230, "body": "Your question isn&#39;t a good fit for SO. You need to research, try things, and then, when you have a problem with your code, ask a specific question about that problem. <a href=\"http://meta.stackoverflow.com/questions/261592\">meta.stackoverflow.com/questions/261592</a>"}], "answers": [{"comments": [{"owner": {"reputation": 133, "user_id": 4716314, "user_type": "registered", "accept_rate": 14, "profile_image": "https://graph.facebook.com/914603558560275/picture?type=large", "display_name": "Satyam Agrawal", "link": "https://stackoverflow.com/users/4716314/satyam-agrawal"}, "edited": false, "score": 0, "creation_date": 1491452576, "post_id": 43229435, "comment_id": 73560920, "body": "Thanks it was really helpful"}], "tags": [], "owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "is_accepted": true, "score": 0, "last_activity_date": 1491391097, "last_edit_date": 1491391097, "creation_date": 1491390511, "answer_id": 43229435, "question_id": 43226967, "link": "https://stackoverflow.com/questions/43226967/custom-fields-in-api/43229435#43229435", "title": "Custom fields in Api", "body": "<p>You might want to use a nested permissions like this:</p>\n\n<pre><code>params.require(...).permit(\n  :name, :contact, :proofs =&gt; [:description, :file]\n)\n</code></pre>\n\n<p>Which will permit a <code>name</code>, a <code>contact</code> and an array that must be named <code>proofs</code> and in that array there are only the attributes <code>description</code> and <code>file</code> allowed.</p>\n\n<hr>\n\n<p>From the docs of <a href=\"http://api.rubyonrails.org/classes/ActionController/Parameters.html#method-i-permit\" rel=\"nofollow noreferrer\"><code>permit</code></a> about nested parameters:</p>\n\n<blockquote>\n  <p>You can also use permit on nested parameters, like:</p>\n\n<pre><code>params = ActionController::Parameters.new({\n  person: {\n    name: 'Francesco',\n    age:  22,\n    pets: [{\n      name: 'Purplish',\n      category: 'dogs'\n    }]\n  }\n})\n\npermitted = params.permit(person: [ :name, { pets: :name } ])\npermitted.permitted?                    # =&gt; true\npermitted[:person][:name]               # =&gt; \"Francesco\"\npermitted[:person][:age]                # =&gt; nil\npermitted[:person][:pets][0][:name]     # =&gt; \"Purplish\"\npermitted[:person][:pets][0][:category] # =&gt; nil\n</code></pre>\n</blockquote>\n"}], "owner": {"reputation": 133, "user_id": 4716314, "user_type": "registered", "accept_rate": 14, "profile_image": "https://graph.facebook.com/914603558560275/picture?type=large", "display_name": "Satyam Agrawal", "link": "https://stackoverflow.com/users/4716314/satyam-agrawal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 48, "favorite_count": 0, "accepted_answer_id": 43229435, "answer_count": 1, "score": -3, "last_activity_date": 1491391097, "creation_date": 1491384085, "question_id": 43226967, "link": "https://stackoverflow.com/questions/43226967/custom-fields-in-api", "title": "Custom fields in Api", "body": "<p>I want to write a post API for a customer who gives his details like name, address , pincode , contact, etc. From the dashboard the customer can add any field (even those other than the above listed) i.e dynamic attributes. Fields are therefore unknown to the Api whitelisting process (customer_add_params.permit{})</p>\n\n<p>How to go about it?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "regex", "routes"], "comments": [{"owner": {"reputation": 19261, "user_id": 4758119, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/F4dJY.jpg?s=128&g=1", "display_name": "Deepak Mahakale", "link": "https://stackoverflow.com/users/4758119/deepak-mahakale"}, "edited": false, "score": 1, "creation_date": 1491381608, "post_id": 43226080, "comment_id": 73522126, "body": "you might want to check <code>friendly-id</code>"}, {"owner": {"reputation": 19261, "user_id": 4758119, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/F4dJY.jpg?s=128&g=1", "display_name": "Deepak Mahakale", "link": "https://stackoverflow.com/users/4758119/deepak-mahakale"}, "edited": false, "score": 0, "creation_date": 1491381661, "post_id": 43226080, "comment_id": 73522167, "body": "And i think instead of <code>&#39;http:&#47;&#47;localhost:3000&#47;articles&#47;article-title-1063&#39;</code> you should go for <code>&#39;http:&#47;&#47;localhost:3000&#47;articles&#47;1063&#47;article-title&#39;</code>"}], "answers": [{"tags": [], "owner": {"reputation": 639, "user_id": 7046734, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RQ62P.jpg?s=128&g=1", "display_name": "Mayank", "link": "https://stackoverflow.com/users/7046734/mayank"}, "is_accepted": false, "score": 0, "last_activity_date": 1491433934, "last_edit_date": 1491433934, "creation_date": 1491382236, "answer_id": 43226307, "question_id": 43226080, "link": "https://stackoverflow.com/questions/43226080/how-to-change-the-way-i-access-an-article-object-in-rails/43226307#43226307", "title": "How to change the way I access an article object in Rails", "body": "<p>You can do that by:</p>\n\n<pre><code>get 'articles/:article_title-:id', to: 'articles#show', as: 'article'\n</code></pre>\n\n<p>and create link or path as:</p>\n\n<pre><code>article_path(id: Article.first, article_title: \"any-title-or-tag\")\n</code></pre>\n\n<p>or</p>\n\n<pre><code>article_path(id: Article.first, article_title: Article.first.title.gsub(' ','-')\n</code></pre>\n\n<p>As you like, make sure that <code>article_title</code> param does not contain any spaces or other special characters.</p>\n"}, {"tags": [], "owner": {"reputation": 471, "user_id": 2395946, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gqI0l.png?s=128&g=1", "display_name": "hoangdd", "link": "https://stackoverflow.com/users/2395946/hoangdd"}, "is_accepted": false, "score": 0, "last_activity_date": 1491382283, "creation_date": 1491382283, "answer_id": 43226327, "question_id": 43226080, "link": "https://stackoverflow.com/questions/43226080/how-to-change-the-way-i-access-an-article-object-in-rails/43226327#43226327", "title": "How to change the way I access an article object in Rails", "body": "<p>I think you should set</p>\n\n<pre><code>get 'articles/:article_title', to: 'articles#show', as: 'article'\n</code></pre>\n\n<p>And in your <code>ArticlesController</code>, you get <code>article_id</code> from <code>params[:article_title]</code>.</p>\n"}], "owner": {"reputation": 1, "user_id": 7818688, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-HraN9WwveWc/AAAAAAAAAAI/AAAAAAAAABQ/QwxTrQ0jO0A/photo.jpg?sz=128", "display_name": "darth ravena", "link": "https://stackoverflow.com/users/7818688/darth-ravena"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 45, "favorite_count": 0, "answer_count": 2, "score": -2, "last_activity_date": 1491434008, "creation_date": 1491381554, "last_edit_date": 1491434008, "question_id": 43226080, "link": "https://stackoverflow.com/questions/43226080/how-to-change-the-way-i-access-an-article-object-in-rails", "title": "How to change the way I access an article object in Rails", "body": "<p>My code is:</p>\n\n<pre><code>article_path(Article.first) - 'http://localhost:3000/articles/1063'\nget 'articles/:id', to: 'articles#show', as: 'article'\n</code></pre>\n\n<p>I want to change it like this:</p>\n\n<pre><code>article_path(Article.first) - 'http://localhost:3000/articles/article-title-1063'\nget 'articles/:id', to: 'articles#show', as: 'article' , id: /some_regex/\n</code></pre>\n"}, {"tags": ["ruby", "selenium", "timeout", "automated-tests", "capybara"], "comments": [{"owner": {"reputation": 2080, "user_id": 1033737, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/iJ3qS.jpg?s=128&g=1", "display_name": "thefabbulus", "link": "https://stackoverflow.com/users/1033737/thefabbulus"}, "edited": false, "score": 0, "creation_date": 1491382513, "post_id": 43225829, "comment_id": 73522729, "body": "maybe changing the default timeout (to 90-120 seconds for example) could help? <a href=\"https://github.com/SeleniumHQ/selenium/wiki/Ruby-Bindings#internal-timeouts\" rel=\"nofollow noreferrer\">github.com/SeleniumHQ/selenium/wiki/&hellip;</a>"}, {"owner": {"reputation": 131, "user_id": 7819162, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-7hOeqhQ92hE/AAAAAAAAAAI/AAAAAAAAAAw/x20rkElIUqY/photo.jpg?sz=128", "display_name": "skaliber", "link": "https://stackoverflow.com/users/7819162/skaliber"}, "reply_to_user": {"reputation": 2080, "user_id": 1033737, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/iJ3qS.jpg?s=128&g=1", "display_name": "thefabbulus", "link": "https://stackoverflow.com/users/1033737/thefabbulus"}, "edited": false, "score": 0, "creation_date": 1491388235, "post_id": 43225829, "comment_id": 73526927, "body": "@fabersky my driver instance looks like this : ```   Capybara.register_driver :chrome do |app|     client = Selenium::WebDriver::Remote::Http::Default.new     client.read_timeout = 120     Capybara::Selenium::Driver.new(app, :browser =&gt; :chrome, http_client: client)   end   Capybara.default_driver = :chrome   Capybara.javascript_driver = :chrome   Capybara.default_max_wait_time = 60 ``` , so looks like there is no difference"}, {"owner": {"reputation": 2080, "user_id": 1033737, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/iJ3qS.jpg?s=128&g=1", "display_name": "thefabbulus", "link": "https://stackoverflow.com/users/1033737/thefabbulus"}, "edited": false, "score": 0, "creation_date": 1491388742, "post_id": 43225829, "comment_id": 73527315, "body": "can you try to change <code>Capybara.default_max_wait_time</code> to 120?"}, {"owner": {"reputation": 42014, "user_id": 2709090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/238c2b7cde2c817fc9a5a2b8eaa2ffad?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas Walpole", "link": "https://stackoverflow.com/users/2709090/thomas-walpole"}, "edited": false, "score": 0, "creation_date": 1491438439, "post_id": 43225829, "comment_id": 73557426, "body": "Net::ReadTimeout isn&#39;t really going to be affected  by Capybara.default_max_wait_time - Your best bet is to use something like puffing_billy to block the requests for whatever resources are timing out during the page load (I assume they&#39;re third party resources where you&#39;re getting rate limited)"}, {"owner": {"reputation": 131, "user_id": 7819162, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-7hOeqhQ92hE/AAAAAAAAAAI/AAAAAAAAAAw/x20rkElIUqY/photo.jpg?sz=128", "display_name": "skaliber", "link": "https://stackoverflow.com/users/7819162/skaliber"}, "reply_to_user": {"reputation": 42014, "user_id": 2709090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/238c2b7cde2c817fc9a5a2b8eaa2ffad?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas Walpole", "link": "https://stackoverflow.com/users/2709090/thomas-walpole"}, "edited": false, "score": 0, "creation_date": 1492079951, "post_id": 43225829, "comment_id": 73840769, "body": "@ThomasWalpole that might be the case , we already have a query string ` disable_ads=1 ` that is automatically passed for each tests so we disable all potential ads that might try to be served on the page , I will try puffing-billy to see what I can get out of it , thanks for suggesting it"}], "owner": {"reputation": 131, "user_id": 7819162, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-7hOeqhQ92hE/AAAAAAAAAAI/AAAAAAAAAAw/x20rkElIUqY/photo.jpg?sz=128", "display_name": "skaliber", "link": "https://stackoverflow.com/users/7819162/skaliber"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 243, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1491388298, "creation_date": 1491380834, "last_edit_date": 1491388298, "question_id": 43225829, "link": "https://stackoverflow.com/questions/43225829/continue-test-execution-after-page-timeout-in-ruby-capybara", "title": "continue test execution after page timeout in ruby capybara", "body": "<p>I am using Ruby Capybara with Siteprims for my Selenium tests. In most cases my environment does not load the page completely because of the implicit wait for the DOM, causing tests to fail. In order to find the locators we use <code>find(locator).action</code>. In most cases the locators are already loaded but because the page is still spinning, Selenium is waiting to finish.</p>\n\n<p>Is there any way to try to perform    <code>Net::ReadTimeout (Net::ReadTimeout)</code> even if I get a timeout exception?</p>\n"}, {"tags": ["ios", "ruby", "colors", "cucumber"], "comments": [{"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 1, "creation_date": 1491380906, "post_id": 43225764, "comment_id": 73521620, "body": "hint: <code>0.7490196078431373 * 255 #=&gt; 191.0</code>"}, {"owner": {"reputation": 8942, "user_id": 356105, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/7c411478d988aeab3111d2c20ac58880?s=128&d=identicon&r=PG", "display_name": "BadmintonCat", "link": "https://stackoverflow.com/users/356105/badmintoncat"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1491381592, "post_id": 43225764, "comment_id": 73522117, "body": "Ok, that easy. If you make this an answer I will accept it."}], "answers": [{"tags": [], "owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "is_accepted": true, "score": 1, "last_activity_date": 1491381681, "creation_date": 1491381681, "answer_id": 43226125, "question_id": 43225764, "link": "https://stackoverflow.com/questions/43225764/convert-float-rgb-color-components-to-integer-in-ruby/43226125#43226125", "title": "Convert Float RGB Color Components to Integer in Ruby", "body": "<p>Your source values are in the range 0..1 whereas your destination values are in the range 0..255 (or 0..0xFF for hex).</p>\n\n<p>First of all, let's fetch the values:</p>\n\n<pre><code>data = {\n      \"red\" =&gt; 0.7490196078431373,\n    \"alpha\" =&gt; 1,\n     \"type\" =&gt; \"UIDeviceRGBColor\",\n     \"blue\" =&gt; 0,\n    \"green\" =&gt; 0\n}\n\nvalues = data.values_at('red', 'green', 'blue')\n#=&gt; [0.7490196078431373, 0, 0]\n</code></pre>\n\n<p>Now we can multiply them by 255:</p>\n\n<pre><code>values.map! { |v| (v * 255).round }\n#=&gt; [191, 0, 0]\n</code></pre>\n\n<p>And finally format them as hex values:</p>\n\n<pre><code>'%02x%02x%02x' % values\n#=&gt; \"bf0000\"\n</code></pre>\n"}], "owner": {"reputation": 8942, "user_id": 356105, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/7c411478d988aeab3111d2c20ac58880?s=128&d=identicon&r=PG", "display_name": "BadmintonCat", "link": "https://stackoverflow.com/users/356105/badmintoncat"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 276, "favorite_count": 0, "accepted_answer_id": 43226125, "answer_count": 1, "score": 0, "last_activity_date": 1491381681, "creation_date": 1491380717, "question_id": 43225764, "link": "https://stackoverflow.com/questions/43225764/convert-float-rgb-color-components-to-integer-in-ruby", "title": "Convert Float RGB Color Components to Integer in Ruby", "body": "<p>I need to convert float RGB values provided by Cucumber from an iOS app to Ints so that I can compare them as hex color to expected hex colors.</p>\n\n<p>Problem is that Ruby to_s(16) only works with Fixnums, not floats.</p>\n\n<p>Cucumber fetches this from iOS app:</p>\n\n<pre><code>{\n      \"red\" =&gt; 0.7490196078431373,\n    \"alpha\" =&gt; 1,\n     \"type\" =&gt; \"UIDeviceRGBColor\",\n     \"blue\" =&gt; 0,\n    \"green\" =&gt; 0\n}\n</code></pre>\n\n<p>So I have three float RGB values that I need to convert to a hexadecimal string. But I can't just say r.to_s(16). How do I convert the values properly to integers to be able to use them with string base conversion in Ruby?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "windows"], "answers": [{"tags": [], "owner": {"reputation": 1528, "user_id": 7573791, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0e5e5cf864fb33229ca56750a51d6674?s=128&d=identicon&r=PG&f=1", "display_name": "Sajin", "link": "https://stackoverflow.com/users/7573791/sajin"}, "is_accepted": false, "score": 1, "last_activity_date": 1491380717, "last_edit_date": 1491380717, "creation_date": 1491380455, "answer_id": 43225663, "question_id": 43225508, "link": "https://stackoverflow.com/questions/43225508/nameerror-in-controllernew-in-view-in-ruby-on-rails-on-windows/43225663#43225663", "title": "NameError in Controller#new in view in ruby on rails on windows", "body": "<p>In your form change <code>:description</code> to <code>:size</code>\n<br>and change </p>\n\n<pre><code>&lt;%= form_for :product, url: products_create_path do |f| %&gt;\n</code></pre>\n\n<p>to</p>\n\n<pre><code>&lt;%= form_for @product do |f| %&gt;\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 779, "user_id": 6858228, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/39c09fdb3f434d643a86d64033e5d5c5?s=128&d=identicon&r=PG&f=1", "display_name": "Angel", "link": "https://stackoverflow.com/users/6858228/angel"}, "edited": false, "score": 0, "creation_date": 1491380963, "post_id": 43225724, "comment_id": 73521677, "body": "Last question sir, after I submitted the form it gives me another error &quot; Routing Error No route matches [POST] &quot;/products/new&quot; &quot; But in my routes i declared it as resources.. Why sir"}], "tags": [], "owner": {"reputation": 999, "user_id": 2039718, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4URjU.jpg?s=128&g=1", "display_name": "Dnyanarth lonkar", "link": "https://stackoverflow.com/users/2039718/dnyanarth-lonkar"}, "is_accepted": false, "score": 1, "last_activity_date": 1491381555, "last_edit_date": 1491381555, "creation_date": 1491380621, "answer_id": 43225724, "question_id": 43225508, "link": "https://stackoverflow.com/questions/43225508/nameerror-in-controllernew-in-view-in-ruby-on-rails-on-windows/43225724#43225724", "title": "NameError in Controller#new in view in ruby on rails on windows", "body": "<p>change your form_tag to   </p>\n\n<pre><code>&lt;%= form_for @post, :url =&gt; new_product_path do |f| %&gt;\n</code></pre>\n\n<p>or</p>\n\n<pre><code>&lt;%= form_for @product do |f| %&gt;\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1018, "user_id": 2417194, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/0WgJ2.jpg?s=128&g=1", "display_name": "bunty", "link": "https://stackoverflow.com/users/2417194/bunty"}, "edited": false, "score": 0, "creation_date": 1491380765, "post_id": 43225756, "comment_id": 73521511, "body": "check out this for more details : <a href=\"https://railscodders.wordpress.com/difference-between-form_for-and-form_tag%C2%A0/\" rel=\"nofollow noreferrer\">railscodders.wordpress.com/&hellip;</a>"}, {"owner": {"reputation": 779, "user_id": 6858228, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/39c09fdb3f434d643a86d64033e5d5c5?s=128&d=identicon&r=PG&f=1", "display_name": "Angel", "link": "https://stackoverflow.com/users/6858228/angel"}, "edited": false, "score": 0, "creation_date": 1491447756, "post_id": 43225756, "comment_id": 73559727, "body": "Sir I have another question, If i am in delet method, what should I put to link_to? Like this?&lt;%= link_to &#39;Delete&#39;, delete_product_path(p) %&gt;"}, {"owner": {"reputation": 1018, "user_id": 2417194, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/0WgJ2.jpg?s=128&g=1", "display_name": "bunty", "link": "https://stackoverflow.com/users/2417194/bunty"}, "reply_to_user": {"reputation": 779, "user_id": 6858228, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/39c09fdb3f434d643a86d64033e5d5c5?s=128&d=identicon&r=PG&f=1", "display_name": "Angel", "link": "https://stackoverflow.com/users/6858228/angel"}, "edited": false, "score": 0, "creation_date": 1491452990, "post_id": 43225756, "comment_id": 73561040, "body": "use this &lt;%= link_to &quot;Delete&quot;, delete_product_path(p), :confirm =&gt; &quot;Are you sure?&quot;, :method =&gt; :delete %&gt;"}], "tags": [], "owner": {"reputation": 1018, "user_id": 2417194, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/0WgJ2.jpg?s=128&g=1", "display_name": "bunty", "link": "https://stackoverflow.com/users/2417194/bunty"}, "is_accepted": true, "score": 1, "last_activity_date": 1491380689, "creation_date": 1491380689, "answer_id": 43225756, "question_id": 43225508, "link": "https://stackoverflow.com/questions/43225508/nameerror-in-controllernew-in-view-in-ruby-on-rails-on-windows/43225756#43225756", "title": "NameError in Controller#new in view in ruby on rails on windows", "body": "<p>You don't need to give <code>url</code> in form_for tag. Rails internally redirect to path depends on in presence of id value.</p>\n\n<p>Change form_for tag to this:</p>\n\n<pre><code>&lt;%= form_for @product do |f| %&gt;\n</code></pre>\n\n<p>So in your form_for tag, object (@product) has value for id field, then rails will submit the form to update routes else it will submit the form to create routes.</p>\n"}, {"tags": [], "owner": {"reputation": 91, "user_id": 5061740, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-iPqLwqz9U0M/AAAAAAAAAAI/AAAAAAAAAFM/pz61ZlmCL6o/photo.jpg?sz=128", "display_name": "gyohannes", "link": "https://stackoverflow.com/users/5061740/gyohannes"}, "is_accepted": false, "score": 1, "last_activity_date": 1491380871, "creation_date": 1491380871, "answer_id": 43225843, "question_id": 43225508, "link": "https://stackoverflow.com/questions/43225508/nameerror-in-controllernew-in-view-in-ruby-on-rails-on-windows/43225843#43225843", "title": "NameError in Controller#new in view in ruby on rails on windows", "body": "<p>products_create_path is not correct and you don't need it either. Your form should be &lt;%= form_for(@product) do |f| %></p>\n"}, {"tags": [], "owner": {"reputation": 471, "user_id": 2395946, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gqI0l.png?s=128&g=1", "display_name": "hoangdd", "link": "https://stackoverflow.com/users/2395946/hoangdd"}, "is_accepted": false, "score": 1, "last_activity_date": 1491381024, "creation_date": 1491381024, "answer_id": 43225895, "question_id": 43225508, "link": "https://stackoverflow.com/questions/43225508/nameerror-in-controllernew-in-view-in-ruby-on-rails-on-windows/43225895#43225895", "title": "NameError in Controller#new in view in ruby on rails on windows", "body": "<p>It should be:</p>\n\n<pre><code>&lt;%= form_for :product, url: products_path do |f| %&gt;\n</code></pre>\n\n<p>You can check your routes by using this command:</p>\n\n<pre><code>rake routes\n</code></pre>\n\n<p>Or find more information from <a href=\"http://guides.rubyonrails.org/routing.html#crud-verbs-and-actions\" rel=\"nofollow noreferrer\">here</a>.</p>\n\n<p>Hope I can help.</p>\n"}], "owner": {"reputation": 779, "user_id": 6858228, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/39c09fdb3f434d643a86d64033e5d5c5?s=128&d=identicon&r=PG&f=1", "display_name": "Angel", "link": "https://stackoverflow.com/users/6858228/angel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 432, "favorite_count": 0, "accepted_answer_id": 43225756, "answer_count": 5, "score": 0, "last_activity_date": 1491381555, "creation_date": 1491379998, "question_id": 43225508, "link": "https://stackoverflow.com/questions/43225508/nameerror-in-controllernew-in-view-in-ruby-on-rails-on-windows", "title": "NameError in Controller#new in view in ruby on rails on windows", "body": "<p>I am currently doing a CRUD, i am now in part of create method but I'm encountering when I load the new method(this is where my form is) NameError in Products#new</p>\n\n<p>Question: Is my products_create_path correct? This is the action after I send the form into create method</p>\n\n<p><strong>New file</strong></p>\n\n<pre><code>Add New Item\n\n&lt;%= form_for :product, url: products_create_path do |f| %&gt;\n    &lt;p&gt;\n        &lt;%= f.label :Name %&gt;&lt;br&gt;\n        &lt;%= f.text_field :name %&gt;\n    &lt;/p&gt;\n    &lt;p&gt;\n        &lt;%= f.label :Size %&gt;&lt;br&gt;\n        &lt;%= f.text_area :description %&gt;\n    &lt;/p&gt;\n    &lt;p&gt;\n        &lt;%= f.label :Price %&gt;&lt;br&gt;\n        &lt;%= f.text_field :price %&gt;\n\n    &lt;/p&gt;x   \n    &lt;p&gt;\n    &lt;%= f.submit :Submit %&gt;\n    &lt;/p&gt;\n&lt;% end %&gt;\n&lt;%= link_to 'BACK', products_path %&gt;\n</code></pre>\n\n<p><strong>Routes</strong></p>\n\n<pre><code>Rails.application.routes.draw do\n\n resources :products\n  # For details on the DSL available within this file, see http://guides.rubyonrails.org/routing.html\nend\n</code></pre>\n\n<p><strong>Controller</strong></p>\n\n<pre><code>class ProductsController &lt; ApplicationController\n  def index\n    @product = Product.all.order('created_at DESC')\n\n  end\n  def show\n    @post = Product.find(params[:id])\n  end\n  def new\n    @product = Product.new\n  end\n  def create\n    @post = Product.new(post_params)\n    if @post.save\n    redirect_to (products_path)\n    else\n    redirect_to('new')\n    end\n  end\n\n  private\n    def post_params\n      params.require(:product).permit(:name, :size, :price)\n    end\n\nend\n</code></pre>\n"}, {"tags": ["ruby", "magic-square", "ruby-hash"], "comments": [{"owner": {"reputation": 38307, "user_id": 2057388, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ceef8c04f66cd0e2bd360ef6abc14a81?s=128&d=identicon&r=PG", "display_name": "\u0417\u0435\u043b\u0451\u043d\u044b\u0439", "link": "https://stackoverflow.com/users/2057388/%d0%97%d0%b5%d0%bb%d1%91%d0%bd%d1%8b%d0%b9"}, "edited": false, "score": 1, "creation_date": 1491374680, "post_id": 43223672, "comment_id": 73517602, "body": "Show what have you tried so far."}, {"owner": {"reputation": 2546, "user_id": 2603130, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/60f46755895fd7c8bfa4f39d527ba9a8?s=128&d=identicon&r=PG", "display_name": "radubogdan", "link": "https://stackoverflow.com/users/2603130/radubogdan"}, "edited": false, "score": 0, "creation_date": 1491374967, "post_id": 43223672, "comment_id": 73517781, "body": "Does the first value have a nil at the end because the biggest index found in all the positions is 3?"}, {"owner": {"reputation": 9729, "user_id": 4554116, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/cu8de.png?s=128&g=1", "display_name": "Julius", "link": "https://stackoverflow.com/users/4554116/julius"}, "reply_to_user": {"reputation": 38307, "user_id": 2057388, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ceef8c04f66cd0e2bd360ef6abc14a81?s=128&d=identicon&r=PG", "display_name": "\u0417\u0435\u043b\u0451\u043d\u044b\u0439", "link": "https://stackoverflow.com/users/2057388/%d0%97%d0%b5%d0%bb%d1%91%d0%bd%d1%8b%d0%b9"}, "edited": false, "score": 0, "creation_date": 1491374998, "post_id": 43223672, "comment_id": 73517809, "body": "@\u0417\u0435\u043b\u0451\u043d\u044b\u0439 Its a bit difficult to show. I just extracted those three arrays (keys, values, positions) from the previous data and now stuck on this part. My tries were something like <code>Hash[keys.zip values values.values_at(positions) ]</code> I know its nonsense, I just pasted the idea.."}, {"owner": {"reputation": 9729, "user_id": 4554116, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/cu8de.png?s=128&g=1", "display_name": "Julius", "link": "https://stackoverflow.com/users/4554116/julius"}, "edited": false, "score": 0, "creation_date": 1491375055, "post_id": 43223672, "comment_id": 73517847, "body": "@adubogdan, yes, biggest index is 3."}, {"owner": {"reputation": 9729, "user_id": 4554116, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/cu8de.png?s=128&g=1", "display_name": "Julius", "link": "https://stackoverflow.com/users/4554116/julius"}, "edited": false, "score": 0, "creation_date": 1491375168, "post_id": 43223672, "comment_id": 73517909, "body": "@Andrey Deineko, pretty hard to explain, but these nil values will indicate me where is needed data in other array of arrays (in 2d array)..."}, {"owner": {"reputation": 9729, "user_id": 4554116, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/cu8de.png?s=128&g=1", "display_name": "Julius", "link": "https://stackoverflow.com/users/4554116/julius"}, "edited": false, "score": 0, "creation_date": 1491375215, "post_id": 43223672, "comment_id": 73517942, "body": "@adubogdan and that biggest index I keep in a variable (it might change)"}, {"owner": {"reputation": 47232, "user_id": 1772830, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Qtoqg.jpg?s=128&g=1", "display_name": "Andrey Deineko", "link": "https://stackoverflow.com/users/1772830/andrey-deineko"}, "edited": false, "score": 0, "creation_date": 1491375285, "post_id": 43223672, "comment_id": 73517990, "body": "I have a feeling that it&#39;s worth showing your initial problem (or at least one-two steps before you got here)."}, {"owner": {"reputation": 9729, "user_id": 4554116, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/cu8de.png?s=128&g=1", "display_name": "Julius", "link": "https://stackoverflow.com/users/4554116/julius"}, "edited": false, "score": 0, "creation_date": 1491376374, "post_id": 43223672, "comment_id": 73518691, "body": "@Andray Deineko - have fun! You asked for it"}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1491376553, "post_id": 43223672, "comment_id": 73518803, "body": "Link to definition of the magic square problem, perhaps?"}, {"owner": {"reputation": 9729, "user_id": 4554116, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/cu8de.png?s=128&g=1", "display_name": "Julius", "link": "https://stackoverflow.com/users/4554116/julius"}, "edited": false, "score": 0, "creation_date": 1491376733, "post_id": 43223672, "comment_id": 73518921, "body": "I have no link to it. Wikipedia - <a href=\"https://en.wikipedia.org/wiki/Magic_square\" rel=\"nofollow noreferrer\">en.wikipedia.org/wiki/Magic_square</a> . I need to find a &quot;Multiplicative magic squares&quot; in the given input (<i>$inputs</i> array in my case)"}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1491376846, "post_id": 43223672, "comment_id": 73518988, "body": "I believe I understand how the value of the key <code>4</code> was calculated, but I have no idea how the value of <code>1</code> was obtained. Can you please explain that?"}, {"owner": {"reputation": 9729, "user_id": 4554116, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/cu8de.png?s=128&g=1", "display_name": "Julius", "link": "https://stackoverflow.com/users/4554116/julius"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1491378953, "post_id": 43223672, "comment_id": 73520299, "body": "@Cary Swoveland, I am away for few hours, but if i got you right, these all are calculated in row_sums(arr) method. Later i generated hash which holds  indexes of relevant values and generated hash that holds only those relevant values. Hope i made it clear..."}], "answers": [{"comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 1, "creation_date": 1491376677, "post_id": 43224186, "comment_id": 73518889, "body": "As a public service, please consider adding a sentence at the beginning that states the question you are answering. :-)"}, {"owner": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "edited": false, "score": 0, "creation_date": 1491378355, "post_id": 43224186, "comment_id": 73519944, "body": "Any reason you use <code>.next</code> instead of ` + 1`?"}, {"owner": {"reputation": 33085, "user_id": 2423164, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Nxbnp.jpg?s=128&g=1", "display_name": "ndnenkov", "link": "https://stackoverflow.com/users/2423164/ndnenkov"}, "reply_to_user": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "edited": false, "score": 1, "creation_date": 1491378703, "post_id": 43224186, "comment_id": 73520142, "body": "@EricDuminil, generally, I use <code>+ 1</code> only if I was already writing some formula <code>x * y - z + 1</code>. It&#39;s a bit weird mixing English explanations (aka method calls/chains) with math notations (aka operations <code>+</code> and numbers <code>1</code>) and vice versa. But it&#39;s a minor thingy and very much opinion based."}, {"owner": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "edited": false, "score": 0, "creation_date": 1491379074, "post_id": 43224186, "comment_id": 73520385, "body": "Okay. It might cause confusion with <code>Enumerator#next</code> though. ` + 1` is less ambiguous IMHO."}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1491379241, "post_id": 43224186, "comment_id": 73520494, "body": "\u201cIt&#39;s a bit weird mixing English explanations (aka method calls/chains) with math notations\u201d\u2014use <code>positions.flatten.max.public_send(:+, 1)</code> :)"}, {"owner": {"reputation": 33085, "user_id": 2423164, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Nxbnp.jpg?s=128&g=1", "display_name": "ndnenkov", "link": "https://stackoverflow.com/users/2423164/ndnenkov"}, "reply_to_user": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "edited": false, "score": 0, "creation_date": 1491379360, "post_id": 43224186, "comment_id": 73520578, "body": "@EricDuminil, there is also <code>String#next</code>. The idea is that there are many <i>?nextable?</i> things in Ruby, just like there are many things you can add <code>1</code> to. You have to be aware what is the concept behind the thing you are <i>?nexting?</i>. But if you prefer, you can use <code>#succ</code> instead."}, {"owner": {"reputation": 47232, "user_id": 1772830, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Qtoqg.jpg?s=128&g=1", "display_name": "Andrey Deineko", "link": "https://stackoverflow.com/users/1772830/andrey-deineko"}, "edited": false, "score": 0, "creation_date": 1491379568, "post_id": 43224186, "comment_id": 73520711, "body": "to me <code>next</code> here is perfectly Rubyish :)"}, {"owner": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "edited": false, "score": 0, "creation_date": 1491379789, "post_id": 43224186, "comment_id": 73520861, "body": "An alternative would be <code>row_size = positions.flatten.max + 1 # Believe me, I&#39;m a nerd!</code> ;)"}, {"owner": {"reputation": 33085, "user_id": 2423164, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Nxbnp.jpg?s=128&g=1", "display_name": "ndnenkov", "link": "https://stackoverflow.com/users/2423164/ndnenkov"}, "reply_to_user": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "edited": false, "score": 0, "creation_date": 1491394766, "post_id": 43224186, "comment_id": 73531821, "body": "@EricDuminil, apparently using <code>#next</code> is <a href=\"http://stackoverflow.com/a/17523916/2423164\">57 / 11 times</a> better than + 1. (:"}, {"owner": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "edited": false, "score": 0, "creation_date": 1491395542, "post_id": 43224186, "comment_id": 73532424, "body": "@ndn: Thanks for the laugh. It&#39;s also -57/31 better than the accepted answer."}], "tags": [], "owner": {"reputation": 33085, "user_id": 2423164, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Nxbnp.jpg?s=128&g=1", "display_name": "ndnenkov", "link": "https://stackoverflow.com/users/2423164/ndnenkov"}, "is_accepted": true, "score": 2, "last_activity_date": 1491376738, "last_edit_date": 1491376738, "creation_date": 1491376103, "answer_id": 43224186, "question_id": 43223672, "link": "https://stackoverflow.com/questions/43223672/fill-hash-with-nil-values-if-no-values-given/43224186#43224186", "title": "Fill Hash with nil values if no values given", "body": "<p>Let the zippery begin \ud83e\udd10 (answer to the original question):</p>\n\n<pre><code>row_size = positions.flatten.max.next\n\nrows = positions.zip(values).map do |row_positions, row_values|\n  row = Array.new(row_size)\n  row_positions.zip(row_values).each_with_object(row) do |(position, value), row|\n    row[position] = value\n  end\nend\n\nkeys.zip(rows).to_h # =&gt; {1=&gt;[15, 15, 15, nil], 4=&gt;[nil, nil, 7, 7]}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1491378100, "post_id": 43224571, "comment_id": 73519788, "body": "A number of elements is not strictly limited to <code>4</code>."}], "tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user6536560"}, "is_accepted": false, "score": 0, "last_activity_date": 1491381124, "last_edit_date": 1491381124, "creation_date": 1491377228, "answer_id": 43224571, "question_id": 43223672, "link": "https://stackoverflow.com/questions/43223672/fill-hash-with-nil-values-if-no-values-given/43224571#43224571", "title": "Fill Hash with nil values if no values given", "body": "<pre><code>new_hash = {}\n\nkeys.each_with_index do |key, index|\n\n    new_hash[key] = Array.new(positions.flatten.max + 1)\n    value_array = values[index] \n    position_array = positions[index] \n    position_array.each_with_index.map { |element, i| new_hash[key][element] = value_array[i]} \nend \nnew_hash\n</code></pre>\n\n<p>I hope this will work.</p>\n"}, {"comments": [{"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1491378111, "post_id": 43224716, "comment_id": 73519798, "body": "A number of elements is not strictly limited to <code>4</code>."}, {"owner": {"reputation": 2110, "user_id": 2146879, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NMsq7.jpg?s=128&g=1", "display_name": "Ho Man", "link": "https://stackoverflow.com/users/2146879/ho-man"}, "reply_to_user": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1491378245, "post_id": 43224716, "comment_id": 73519887, "body": "That was not mentioned in the original question, but it&#39;s fixed now. Just need to take the highest index in positions. And actually, in one of the comments, the author also mentioned the highest index IS 3. @mudasobwa"}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1491379080, "post_id": 43224716, "comment_id": 73520391, "body": "Highest index IS <code>3</code> \u2260 a number of elements is strictly limited to <code>4</code>. BTW, using such constants hardcoded is a code smell."}, {"owner": {"reputation": 2110, "user_id": 2146879, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NMsq7.jpg?s=128&g=1", "display_name": "Ho Man", "link": "https://stackoverflow.com/users/2146879/ho-man"}, "reply_to_user": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1491379496, "post_id": 43224716, "comment_id": 73520665, "body": "It doesn&#39;t matter how many elements there are in this scenario though. And I absolutely think it&#39;s fine if it was extracted as a constant and if it is a recognized and accepted constraint of the system, which also removes the need to re-calculate the max every time."}], "tags": [], "owner": {"reputation": 2110, "user_id": 2146879, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NMsq7.jpg?s=128&g=1", "display_name": "Ho Man", "link": "https://stackoverflow.com/users/2146879/ho-man"}, "is_accepted": false, "score": 1, "last_activity_date": 1491380700, "last_edit_date": 1491380700, "creation_date": 1491377662, "answer_id": 43224716, "question_id": 43223672, "link": "https://stackoverflow.com/questions/43223672/fill-hash-with-nil-values-if-no-values-given/43224716#43224716", "title": "Fill Hash with nil values if no values given", "body": "<p>Not the cleanest.. but works :P</p>\n\n<pre><code>max = positions.flatten.max + 1\npv = positions.zip(values).map { |o| o.transpose.to_h }\nh = {}\npv.each_with_index do |v, idx|\n  h[keys[idx]] = Array.new(max).map.with_index { |_, i| v[i] }\nend\n\n# h\n# {1=&gt;[15, 15, 15, nil], 4=&gt;[nil, nil, 7, 7]}\n</code></pre>\n\n<p>or if you prefer a more compressed but less readable one..</p>\n\n<pre><code>keys.zip(positions.zip(values).map { |o| o.transpose.to_h }).reduce({}) do |h, (k, v)|\n  h[k] = Array.new(max).map.with_index { |_, i| v[i] }\n  h\nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "is_accepted": false, "score": 1, "last_activity_date": 1491379600, "last_edit_date": 1491379600, "creation_date": 1491378831, "answer_id": 43225124, "question_id": 43223672, "link": "https://stackoverflow.com/questions/43223672/fill-hash-with-nil-values-if-no-values-given/43225124#43225124", "title": "Fill Hash with nil values if no values given", "body": "<p>Just out of curiosity:</p>\n\n<pre><code>nils = (0..positions.flatten.max).zip([nil]).to_h\nkeys.zip(positions, values).group_by(&amp;:shift).map do |k, v|\n  [k, nils.merge(v.shift.reduce(&amp;:zip).to_h).values]\nend.to_h\n#\u21d2\u00a0{1=&gt;[15, 15, 15, nil], 4=&gt;[nil, nil, 7, 7]}\n</code></pre>\n"}], "owner": {"reputation": 9729, "user_id": 4554116, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/cu8de.png?s=128&g=1", "display_name": "Julius", "link": "https://stackoverflow.com/users/4554116/julius"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 501, "favorite_count": 0, "accepted_answer_id": 43224186, "answer_count": 4, "score": -1, "last_activity_date": 1494691268, "creation_date": 1491374519, "last_edit_date": 1494691268, "question_id": 43223672, "link": "https://stackoverflow.com/questions/43223672/fill-hash-with-nil-values-if-no-values-given", "title": "Fill Hash with nil values if no values given", "body": "<p>I have these arrays:</p>\n\n<pre><code>positions = [[0, 1, 2], [2, 3]] \nvalues = [[15, 15, 15], [7, 7]]\nkeys = [1, 4]\n</code></pre>\n\n<p>I need to create a hash whose keys are from <code>keys</code> and the values are from <code>values</code>. Values must be at indices defined in <code>positions. If no index is defined,</code>nil` should be added to that index.</p>\n\n<p>The three arrays contain the same number of elements; <code>keys</code> has two elements, <code>values</code> two, and <code>positions</code> two. So it's ok. </p>\n\n<p>Expected output:</p>\n\n<pre><code>hash = {1=&gt;[15, 15, 15, nil], 4=&gt;[nil, nil, 7, 7]}\n</code></pre>\n"}, {"tags": ["html", "ruby-on-rails", "ruby", "web-scraping"], "comments": [{"owner": {"reputation": 198, "user_id": 5720354, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh3.googleusercontent.com/-XopWyeUMJmU/AAAAAAAAAAI/AAAAAAAAAEg/Cp_x2coVJoA/photo.jpg?sz=128", "display_name": "Malware Skiddie", "link": "https://stackoverflow.com/users/5720354/malware-skiddie"}, "edited": false, "score": 0, "creation_date": 1491374217, "post_id": 43223528, "comment_id": 73517394, "body": "Try adding some code to understand."}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 1, "creation_date": 1491377788, "post_id": 43223528, "comment_id": 73519584, "body": "Yep, nokogiri is generally useful in this type of tasks"}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1491434511, "post_id": 43223528, "comment_id": 73556405, "body": "Your question is too broad. Do you need to account for JavaScript links? Is JavaScript being used to dynamically create the URLs? Nokogiri is great for parsing HTML but not JavaScript, so yes, Nokogiri will help unless your needs don&#39;t fit its capabilities. And, since you really told us nothing useful we can&#39;t give a useful detailed answers."}], "answers": [{"comments": [{"owner": {"reputation": 139, "user_id": 3892173, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7b0ef28ae27bf1fedba624bde5ead55e?s=128&d=identicon&r=PG&f=1", "display_name": "mehtasuraj09", "link": "https://stackoverflow.com/users/3892173/mehtasuraj09"}, "edited": false, "score": 0, "creation_date": 1491377915, "post_id": 43224098, "comment_id": 73519684, "body": "Thank you Mr. Vasily Yudin. I will try this and will let you know if it works."}, {"owner": {"reputation": 845, "user_id": 4535298, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FBmxp.jpg?s=128&g=1", "display_name": "Vasili", "link": "https://stackoverflow.com/users/4535298/vasili"}, "reply_to_user": {"reputation": 139, "user_id": 3892173, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7b0ef28ae27bf1fedba624bde5ead55e?s=128&d=identicon&r=PG&f=1", "display_name": "mehtasuraj09", "link": "https://stackoverflow.com/users/3892173/mehtasuraj09"}, "edited": false, "score": 0, "creation_date": 1491381592, "post_id": 43224098, "comment_id": 73522116, "body": "@mehtasuraj09 no problem ;)"}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1491434292, "post_id": 43224098, "comment_id": 73556356, "body": "Don&#39;t write <code>File.open(&quot;your_file.html&quot;) { |f| Nokogiri::HTML(f) }</code>. Simply using <code>Nokogiri::HTML(File.read(&quot;your_file.html&quot;))</code> does the same more clearly."}], "tags": [], "owner": {"reputation": 845, "user_id": 4535298, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FBmxp.jpg?s=128&g=1", "display_name": "Vasili", "link": "https://stackoverflow.com/users/4535298/vasili"}, "is_accepted": false, "score": 2, "last_activity_date": 1491375862, "creation_date": 1491375862, "answer_id": 43224098, "question_id": 43223528, "link": "https://stackoverflow.com/questions/43223528/how-do-i-retrieve-links-inside-a-href-from-a-page-and-show-on-rails-page/43224098#43224098", "title": "How do I retrieve links inside &lt;a href&gt; from a page and show on Rails page?", "body": "<p>Yes, it will.</p>\n\n<pre><code># open and read your HTML file as Nokogiri::HTML document\ndoc = File.open(\"your_file.html\") { |f| Nokogiri::HTML(f) }\n\n# collect all links that have not empty href attribute\nlinks = doc.css('a').map { |link| link['href'] }.reject { |link| link.blank? }\n</code></pre>\n"}], "owner": {"reputation": 139, "user_id": 3892173, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7b0ef28ae27bf1fedba624bde5ead55e?s=128&d=identicon&r=PG&f=1", "display_name": "mehtasuraj09", "link": "https://stackoverflow.com/users/3892173/mehtasuraj09"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 50, "favorite_count": 0, "answer_count": 1, "score": -5, "last_activity_date": 1491434609, "creation_date": 1491374070, "last_edit_date": 1491434609, "question_id": 43223528, "link": "https://stackoverflow.com/questions/43223528/how-do-i-retrieve-links-inside-a-href-from-a-page-and-show-on-rails-page", "title": "How do I retrieve links inside &lt;a href&gt; from a page and show on Rails page?", "body": "<p>I have been given ASP and HTML files  which contain HTML and some JavaScript code. I have to write a Rails application which will retrieve links from those pages and show them in Rails views.</p>\n\n<p>I am stuck. Will Nokogiri help?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "controller", "save", "autosave"], "answers": [{"comments": [{"owner": {"reputation": 447, "user_id": 4192210, "user_type": "registered", "accept_rate": 81, "profile_image": "https://graph.facebook.com/545096648/picture?type=large", "display_name": "Dylan Little", "link": "https://stackoverflow.com/users/4192210/dylan-little"}, "edited": false, "score": 0, "creation_date": 1491371336, "post_id": 43222696, "comment_id": 73515951, "body": "This looks promising. Could you provide a basic example of what to do when the user &quot;saves&quot; foo? In other words what would I do to tell the controller that a user is saving &quot;set active to false on active&quot; instead of creating. Would I create another method?"}, {"owner": {"reputation": 2840, "user_id": 6400294, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KtX2z.jpg?s=128&g=1", "display_name": "Shannon", "link": "https://stackoverflow.com/users/6400294/shannon"}, "reply_to_user": {"reputation": 447, "user_id": 4192210, "user_type": "registered", "accept_rate": 81, "profile_image": "https://graph.facebook.com/545096648/picture?type=large", "display_name": "Dylan Little", "link": "https://stackoverflow.com/users/4192210/dylan-little"}, "edited": false, "score": 0, "creation_date": 1491371641, "post_id": 43222696, "comment_id": 73516083, "body": "You can probably add it in the create method: <code>def create   @foo = Foo.new(foo_params) @foo.active = true @foo.create end</code> and have it set to <code>false</code> in the <code>autosave</code> method"}, {"owner": {"reputation": 447, "user_id": 4192210, "user_type": "registered", "accept_rate": 81, "profile_image": "https://graph.facebook.com/545096648/picture?type=large", "display_name": "Dylan Little", "link": "https://stackoverflow.com/users/4192210/dylan-little"}, "edited": false, "score": 0, "creation_date": 1491371682, "post_id": 43222696, "comment_id": 73516108, "body": "Great! Love the answer. Thanks"}], "tags": [], "owner": {"reputation": 2840, "user_id": 6400294, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KtX2z.jpg?s=128&g=1", "display_name": "Shannon", "link": "https://stackoverflow.com/users/6400294/shannon"}, "is_accepted": true, "score": 1, "last_activity_date": 1491370820, "creation_date": 1491370820, "answer_id": 43222696, "question_id": 43222470, "link": "https://stackoverflow.com/questions/43222470/how-to-allow-a-user-to-save-a-model-without-publishing-it-ruby-on-rails/43222696#43222696", "title": "How to allow a user to save a model without publishing it - ruby on rails", "body": "<p>One way would be to have an <code>active</code> column which is set to true when the object is created/completed by the user. The <code>foo</code> index would then only display <code>active</code> objects. In the form you could have an autosave feature using JS/AJAX that could periodically save the form in the background:</p>\n\n<pre><code>autoSave = -&gt;\n  $.ajax\n    type: 'POST'\n    data: $(\"#form\").serialize()\n    url: '/foo/autosave'\n    dataType: 'script'\n  return\n\n$(document).ready -&gt;\n  setTimeout autoSave, 10000\n  return\n</code></pre>\n"}], "owner": {"reputation": 447, "user_id": 4192210, "user_type": "registered", "accept_rate": 81, "profile_image": "https://graph.facebook.com/545096648/picture?type=large", "display_name": "Dylan Little", "link": "https://stackoverflow.com/users/4192210/dylan-little"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 40, "favorite_count": 0, "accepted_answer_id": 43222696, "answer_count": 1, "score": 0, "last_activity_date": 1491370820, "creation_date": 1491369852, "question_id": 43222470, "link": "https://stackoverflow.com/questions/43222470/how-to-allow-a-user-to-save-a-model-without-publishing-it-ruby-on-rails", "title": "How to allow a user to save a model without publishing it - ruby on rails", "body": "<p>What would be the process of allowing a user to begin creating an object (foo) but mid-way the user would like to save foo so that they may be able to return to it later. How would I do this? The only way I know of \"saving\" an object is by doing just that, by sending it to the create action in the controller and creating the object.</p>\n\n<pre><code>def create\n  @foo = current_user.foo.create(foo_params)\nend\n</code></pre>\n\n<p>But how would I allow a user to return to foo and finish what they started so that they may be able to publish foo to be viewable at the foo index. </p>\n\n<p>I would eventually like to create an \"autosave\" functionality so that if the user closes the window before pressing save that it will still be accessible. </p>\n"}, {"tags": ["ruby-on-rails", "ruby", "devise", "ruby-on-rails-5"], "comments": [{"owner": {"reputation": 423, "user_id": 2029932, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/44c5fbea96c3b8c76a0ae4b266f058c9?s=128&d=identicon&r=PG", "display_name": "Leonardo Prado", "link": "https://stackoverflow.com/users/2029932/leonardo-prado"}, "edited": false, "score": 0, "creation_date": 1491373659, "post_id": 43221764, "comment_id": 73517105, "body": "What&#39;s the reason for you to move the <code>sign_in</code> method from outside it&#39;s default place?"}, {"owner": {"reputation": 955, "user_id": 3739453, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/ad500b31d2ce042c4f2c5b6e361a129b?s=128&d=identicon&r=PG&f=1", "display_name": "Joe Morano", "link": "https://stackoverflow.com/users/3739453/joe-morano"}, "reply_to_user": {"reputation": 423, "user_id": 2029932, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/44c5fbea96c3b8c76a0ae4b266f058c9?s=128&d=identicon&r=PG", "display_name": "Leonardo Prado", "link": "https://stackoverflow.com/users/2029932/leonardo-prado"}, "edited": false, "score": 0, "creation_date": 1491378527, "post_id": 43221764, "comment_id": 73520052, "body": "@LeonardoPrado I&#39;m trying to build a sign_in partial that I can render anywhere on my app."}, {"owner": {"reputation": 101, "user_id": 7598927, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ff6a64040a43609704ce5eb5f706fc42?s=128&d=identicon&r=PG&f=1", "display_name": "andriy", "link": "https://stackoverflow.com/users/7598927/andriy"}, "edited": false, "score": 0, "creation_date": 1491381655, "post_id": 43221764, "comment_id": 73522161, "body": "What is inside Static#show method and in static/show.html.erb?"}, {"owner": {"reputation": 1410, "user_id": 1507845, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/9daba84d2a161462310fe5a0eb3ab53c?s=128&d=identicon&r=PG", "display_name": "XML Slayer", "link": "https://stackoverflow.com/users/1507845/xml-slayer"}, "edited": false, "score": 0, "creation_date": 1491393327, "post_id": 43221764, "comment_id": 73530693, "body": "@JoeMorano You can use whatever partial you want, and place it wherever you want, but still have it route through the registrations controller."}], "answers": [{"comments": [{"owner": {"reputation": 613, "user_id": 5032873, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/MSWnq.jpg?s=128&g=1", "display_name": "mike927", "link": "https://stackoverflow.com/users/5032873/mike927"}, "edited": false, "score": 0, "creation_date": 1494420846, "post_id": 43237513, "comment_id": 74820162, "body": "As for me. When I added resource setter then application didn&#39;t recognise that. It treated that as normal local variable. Solution that works for me it is simply assignment <code>@resource = user</code>"}], "tags": [], "owner": {"reputation": 423, "user_id": 2029932, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/44c5fbea96c3b8c76a0ae4b266f058c9?s=128&d=identicon&r=PG", "display_name": "Leonardo Prado", "link": "https://stackoverflow.com/users/2029932/leonardo-prado"}, "is_accepted": true, "score": 2, "last_activity_date": 1491412122, "last_edit_date": 1495540021, "creation_date": 1491412122, "answer_id": 43237513, "question_id": 43221764, "link": "https://stackoverflow.com/questions/43221764/using-devise-in-different-controller-undefined-method-resource/43237513#43237513", "title": "Using Devise in different controller: undefined method &quot;resource=&quot;", "body": "<p>I believe that your question has 2 answers: Why this error is happening, and how to have a <code>sign_in</code> partial to use on all your controllers:</p>\n\n<h1>Creating the <code>sign_in</code> partial</h1>\n\n<p>First of all, the <code>sign_in</code> method belongs to <code>sessions</code>, not <code>registrations</code> be careful to not replace the wrong controller :)</p>\n\n<p>And you just added a few more code than needed for what you want. To create a partial sign_in to use anywhere, just use the default Devise form in it:</p>\n\n<pre><code>&lt;%= form_for(resource, as: resource_name, url: session_path(resource_name)) do |f| %&gt;\n  &lt;%= f.label :email %&gt;&lt;br /&gt;\n  &lt;%= f.email_field :email, autofocus: true %&gt;\n\n  &lt;%= f.label :password %&gt;&lt;br /&gt;\n  &lt;%= f.password_field :password, autocomplete: \"off\" %&gt;\n\n  &lt;% if devise_mapping.rememberable? -%&gt;\n    &lt;%= f.check_box :remember_me %&gt;\n    &lt;%= f.label :remember_me %&gt;\n  &lt;% end -%&gt;\n\n  &lt;%= f.submit \"Log in\" %&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>That part with <code>build_resource({})</code> isn't needed, as it'll be handled by Devise itself when you submit the form. And since <code>build_resource</code> isn't needed, you just need the following code on your ApplicationHelper:</p>\n\n<pre><code>module ApplicationHelper\n  def resource_name\n    :user\n  end\n\n  def resource\n    @resource ||= User.new\n  end\n\n  def devise_mapping\n    @devise_mapping ||= Devise.mappings[:user]\n  end\nend\n</code></pre>\n\n<p>This should be enough to have a sign_in form in any controller view. If you need more control over the login flow, you can check the <strong>Configuring Controller</strong> section on <a href=\"https://github.com/plataformatec/devise#configuring-controllers\" rel=\"nofollow noreferrer\">Devise Readme</a> for more information on how to create a customizable controller. </p>\n\n<h1>Why your code throws a NoMethodError error</h1>\n\n<p>Your code throws an NoMethodError because you haven't defined a setter for the <code>@resource</code> instance variable. It should be either:</p>\n\n<pre><code>def resource=(value)\n  @resource = value\nend\n</code></pre>\n\n<p>or with <code>attr_writer :resource</code></p>\n\n<p>I recommend this question for more info on the topic:\n<a href=\"https://stackoverflow.com/questions/5046831/why-use-rubys-attr-accessor-attr-reader-and-attr-writer\">Why use Ruby&#39;s attr_accessor, attr_reader and attr_writer?</a></p>\n"}], "owner": {"reputation": 955, "user_id": 3739453, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/ad500b31d2ce042c4f2c5b6e361a129b?s=128&d=identicon&r=PG&f=1", "display_name": "Joe Morano", "link": "https://stackoverflow.com/users/3739453/joe-morano"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 563, "favorite_count": 1, "accepted_answer_id": 43237513, "answer_count": 1, "score": 0, "last_activity_date": 1491412122, "creation_date": 1491366097, "last_edit_date": 1491372152, "question_id": 43221764, "link": "https://stackoverflow.com/questions/43221764/using-devise-in-different-controller-undefined-method-resource", "title": "Using Devise in different controller: undefined method &quot;resource=&quot;", "body": "<p>I have Devise 4.2.1 and Rails 5.0.1. I'm trying to use Devise <code>sign_in</code> in a controller other than <code>registrations</code>. There were a bunch of methods that weren't defined, so I had to add them as helpers:</p>\n\n<pre><code>module ApplicationHelper\n  def resource_name\n    :user\n  end\n\n  def resource\n    @resource ||= User.new\n  end\n\n  def devise_mapping\n    @devise_mapping ||= Devise.mappings[:user]\n  end\n\n  def build_resource(hash=nil)\n    self.resource = resource_class.new_with_session(hash || {}, session)\n    # ^the source of the error^\n  end\n\n  def resource_class\n    devise_mapping.to\n  end\nend\n</code></pre>\n\n<p>But now I'm getting the following error:</p>\n\n<pre><code>NoMethodError in Static#show\nundefined method 'resource=' for (class)\n</code></pre>\n\n<p>I don't have \"resource=\" written anywhere in my code, certainly not on the line the error points to (marked above). <strong>Where is my server getting that error from?</strong></p>\n\n<hr>\n\n<p>Also, I think I'm just using the standard sign_in code:</p>\n\n<pre><code>&lt;%\nbuild_resource({})\nset_minimum_password_length\nyield resource if block_given?\nrespond_with self.resource\n%&gt;\n\n&lt;% form_for(resource, as: resource_name, url: registration_path(resource_name)) do |f| %&gt;\n  &lt;%= devise_error_messages! %&gt;\n  ...\n</code></pre>\n"}, {"tags": ["javascript", "css", "ruby-on-rails", "ruby", "twitter-bootstrap"], "answers": [{"tags": [], "owner": {"reputation": 63, "user_id": 6506369, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cbe1a91770efe5a1493454d5e83059f4?s=128&d=identicon&r=PG&f=1", "display_name": "tdigangi5", "link": "https://stackoverflow.com/users/6506369/tdigangi5"}, "is_accepted": false, "score": 2, "last_activity_date": 1491483586, "last_edit_date": 1495541382, "creation_date": 1491483586, "answer_id": 43255947, "question_id": 43221150, "link": "https://stackoverflow.com/questions/43221150/bootstrap-css-not-rendering-in-ruby-on-rails-in-docker/43255947#43255947", "title": "bootstrap/css not rendering in Ruby on Rails in Docker", "body": "<p>I was not precompiling my assets in docker, this did not take place when putting together my dockerfile. I was able to find the answer below.</p>\n\n<p><a href=\"https://stackoverflow.com/questions/39752252/rails-4-1-6-asset-pipeline-not-loading-assets-and-javascript-in-production/43245272#43245272\">Rails 4.1.6 Asset pipeline not loading assets and javascript in production</a></p>\n"}], "owner": {"reputation": 63, "user_id": 6506369, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cbe1a91770efe5a1493454d5e83059f4?s=128&d=identicon&r=PG&f=1", "display_name": "tdigangi5", "link": "https://stackoverflow.com/users/6506369/tdigangi5"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 835, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1491483586, "creation_date": 1491362024, "question_id": 43221150, "link": "https://stackoverflow.com/questions/43221150/bootstrap-css-not-rendering-in-ruby-on-rails-in-docker", "title": "bootstrap/css not rendering in Ruby on Rails in Docker", "body": "<p>Fellow techies, </p>\n\n<p>I have been building a ruby on rails application with embedded ruby and twitter bootstrap(bootstrap-sass) all of which is working correctly when tested locally(rails server) and when deployed to heroku.</p>\n\n<p>However, I have been trying to dockerize the application into a 3 tier environment(until I scale out) with docker / docker-compose. When I deploy into the container the app is working completely with the exception of the CSS / bootstrap layout. Please note I am not going through </p>\n\n<p><strong>application.css.scss</strong></p>\n\n<pre><code>@import \"bootstrap-sprockets\";\n@import \"bootstrap\";\n</code></pre>\n\n<p><strong>application.js</strong></p>\n\n<pre><code>//= require jquery\n//= require jquery_ujs\n//= require bootstrap-sprockets\n</code></pre>\n\n<p><strong>application.html loaded from index.html</strong>\n<div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>&lt;!DOCTYPE html&gt;\r\n&lt;html&gt;\r\n&lt;head&gt;\r\n&lt;title&gt;AlphaBlog&lt;/title&gt;\r\n&lt;%= csrf_meta_tags %&gt;\r\n&lt;link rel=\"stylesheet\" href=\"../assets/stylesheets/application.css\"&gt;\r\n&lt;%= stylesheet_link_tag    'application', media: 'all', 'data-turbolinks-track': 'reload' %&gt;\r\n&lt;%= javascript_include_tag 'application', 'data-turbolinks-track': 'reload' %&gt;\r\n&lt;/head&gt;\r\n    \r\n&lt;body&gt;\r\n&lt;%= render 'layouts/navigation' %&gt;\r\n&lt;%= render 'layouts/messages' %&gt;\r\n&lt;div class=\"container\"&gt;\r\n&lt;%= yield %&gt;\r\n&lt;%= render 'layouts/footer' %&gt;\r\n&lt;/div&gt;\r\n&lt;/body&gt;\r\n&lt;/html&gt;</code></pre>\r\n</div>\r\n</div>\r\n</p>\n\n<p><strong>Failed state(docker): rendered html in chrome dev tools</strong></p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>&lt;head&gt;\r\n&lt;title&gt;AlphaBlog&lt;/title&gt;\r\n&lt;meta name=\"csrf-param\" content=\"authenticity_token\" /&gt;\r\n&lt;meta name=\"csrf-token\" content=\"exrph+jdoTdpHC6INECT3nWN0TWDSREEJzGsbCf2kd9cZlhhbzBGnwxVPhmnWvwfAgARvgNcpOL5Fya0phyjKQ==\" /&gt;\r\n&lt;link rel=\"stylesheet\" href=\"../../assets/stylesheets/application.scss\"&gt;\r\n&lt;link rel=\"stylesheet\" media=\"all\" href=\"/stylesheets/application.css\" data-turbolinks-track=\"reload\" /&gt;\r\n&lt;script src=\"/javascripts/application.js\" data-turbolinks-track=\"reload\"&gt;&lt;/script&gt;\r\n&lt;/head&gt;</code></pre>\r\n</div>\r\n</div>\r\n</p>\n\n<p><strong>Successful state(localhost): rendered html in chrome dev tools</strong></p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>&lt;head&gt;\r\n&lt;title&gt;AlphaBlog&lt;/title&gt;\r\n&lt;meta name=\"csrf-param\" content=\"authenticity_token\" /&gt;\r\n&lt;meta name=\"csrf-token\" content=\"S9mIfrj9dJGNEAzK39YlhEr9yaDgLiP/uPlJtAuUKycquMISZpccd3jsWM53+AQrYMStnFsugXdSL2pGPc5/kg==\" /&gt;\r\n&lt;link rel=\"stylesheet\" href=\"../assets/stylesheets/application.scss\"&gt;\r\n&lt;link rel=\"stylesheet\" media=\"all\" href=\"/assets/custom.self-4b6d90fa3b36a5c34ccc95f67aaf8ba9729bf9bebbd5c39399b8390ebe0bd2dd.css?body=1\" data-turbolinks-track=\"reload\" /&gt;\r\n&lt;link rel=\"stylesheet\" media=\"all\" href=\"/assets/application.self-ddb161abf5f419c38cbe3e77258e87cef5c121f34e0c7f21d1b1130d7be306eb.css?body=1\" data-turbolinks-track=\"reload\" /&gt;\r\n&lt;script src=\"/assets/jquery.self-bd7ddd393353a8d2480a622e80342adf488fb6006d667e8b42e4c0073393abee.js?body=1\" data-turbolinks-track=\"reload\"&gt;&lt;/script&gt;\r\n&lt;script src=\"/assets/jquery_ujs.self-784a997f6726036b1993eb2217c9cb558e1cbb801c6da88105588c56f13b466a.js?body=1\" data-turbolinks-track=\"reload\"&gt;&lt;/script&gt;\r\n&lt;script src=\"/assets/bootstrap/transition.self-6ad2488465135ab731a045a8ebbe3ea2fc501aed286042496eda1664fdd07ba9.js?body=1\" data-turbolinks-track=\"reload\"&gt;&lt;/script&gt;\r\n&lt;script src=\"/assets/bootstrap/alert.self-742145c5bb847aafdadc6e339be795628f8bc25f177e851f03a8c42278eb0312.js?body=1\" data-turbolinks-track=\"reload\"&gt;&lt;/script&gt;\r\n&lt;script src=\"/assets/bootstrap/button.self-126ac9bf0e7f2d8568f8da3a00fd5f0fac6eae0946331003370161fbf8d7975e.js?body=1\" data-turbolinks-track=\"reload\"&gt;&lt;/script&gt;\r\n&lt;script src=\"/assets/bootstrap/carousel.self-e47323f363ceb3dc0bdbce05e36e709ed428e339833a41140a85cb0af24b8127.js?body=1\" data-turbolinks-track=\"reload\"&gt;&lt;/script&gt;\r\n&lt;script src=\"/assets/bootstrap/collapse.self-2eb697f62b587bb786ff940d82dd4be88cdeeaf13ca128e3da3850c5fcaec301.js?body=1\" data-turbolinks-track=\"reload\"&gt;&lt;/script&gt;\r\n&lt;script src=\"/assets/bootstrap/dropdown.self-561cca1cbaf67474e01e9536f106bad541594860a6df997004591c1c1957a147.js?body=1\" data-turbolinks-track=\"reload\"&gt;&lt;/script&gt;\r\n&lt;script src=\"/assets/bootstrap/modal.self-3e78617ade5663314b7ee0ea10375a5b34d59ffbade44939e3f2a4e4ef2019b3.js?body=1\" data-turbolinks-track=\"reload\"&gt;&lt;/script&gt;\r\n&lt;script src=\"/assets/bootstrap/tab.self-5bf7078b682f8b131332eefa46b45fa5eff2eca745fc0d03e2991450888f7c28.js?body=1\" data-turbolinks-track=\"reload\"&gt;&lt;/script&gt;\r\n&lt;script src=\"/assets/bootstrap/affix.self-6d6f1a7fc5c8aabf3547fa1b794fab6268f54bc55ad815e55873c71f52513517.js?body=1\" data-turbolinks-track=\"reload\"&gt;&lt;/script&gt;\r\n&lt;script src=\"/assets/bootstrap/scrollspy.self-969f3c5f48cdf1e439c7fa1154c13b948715f5c689f87837c0b64521d3b46ef6.js?body=1\" data-turbolinks-track=\"reload\"&gt;&lt;/script&gt;\r\n&lt;script src=\"/assets/bootstrap/tooltip.self-05afb177e08f98997ccfc84fa08a215e4b27d48d5fe4d049080675e9dffd8199.js?body=1\" data-turbolinks-track=\"reload\"&gt;&lt;/script&gt;\r\n&lt;script src=\"/assets/bootstrap/popover.self-0aa93860b59fe7393f1dd490f54b3cb994f9d6155adffce034d4e14ae361b041.js?body=1\" data-turbolinks-track=\"reload\"&gt;&lt;/script&gt;\r\n&lt;script src=\"/assets/bootstrap-sprockets.self-fbfa5ad7d9aa0afe439ec4ff3883acc4cb92b62cb67c40d674320c9aa1d4642d.js?body=1\" data-turbolinks-track=\"reload\"&gt;&lt;/script&gt;\r\n&lt;script src=\"/assets/turbolinks.self-c5acd7a204f5f25ce7a1d8a0e4d92e28d34c9e2df2c7371cd7af88e147e4ad82.js?body=1\" data-turbolinks-track=\"reload\"&gt;&lt;/script&gt;\r\n&lt;script src=\"/assets/action_cable.self-5454023407ffec0d29137c7110917e1e745525ae9afbc05f52104c4cd6597429.js?body=1\" data-turbolinks-track=\"reload\"&gt;&lt;/script&gt;\r\n&lt;script src=\"/assets/cable.self-6e0514260c1aa76eaf252412ce74e63f68819fd19bf740595f592c5ba4c36537.js?body=1\" data-turbolinks-track=\"reload\"&gt;&lt;/script&gt;\r\n&lt;script src=\"/assets/application.self-9b9be17d3c356f1a9a23b03b3b5d01bb4e46845459cc7ac189cd20f571fefb23.js?body=1\" data-turbolinks-track=\"reload\"&gt;&lt;/script&gt;\r\n&lt;/head&gt;</code></pre>\r\n</div>\r\n</div>\r\n</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "windows"], "answers": [{"comments": [{"owner": {"reputation": 779, "user_id": 6858228, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/39c09fdb3f434d643a86d64033e5d5c5?s=128&d=identicon&r=PG&f=1", "display_name": "Angel", "link": "https://stackoverflow.com/users/6858228/angel"}, "edited": false, "score": 0, "creation_date": 1491361796, "post_id": 43221092, "comment_id": 73512885, "body": "Is it mandatory to use resources? What if I dont want to use it for example, I mean isn&#39;t the same with that?"}, {"owner": {"reputation": 370, "user_id": 4526617, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/3fc0643deb79dffedb7bf9dfdc9d9346?s=128&d=identicon&r=PG&f=1", "display_name": "Kavincat", "link": "https://stackoverflow.com/users/4526617/kavincat"}, "edited": false, "score": 0, "creation_date": 1491362070, "post_id": 43221092, "comment_id": 73512950, "body": "No, it&#39;s not mandatory but it creates seven different routes in your application, all mapping to the Products controller. <a href=\"http://guides.rubyonrails.org/routing.html#crud-verbs-and-actions\" rel=\"nofollow noreferrer\">guides.rubyonrails.org/routing.html#crud-verbs-and-actions</a>"}, {"owner": {"reputation": 1289, "user_id": 6583381, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/IoEUj.jpg?s=128&g=1", "display_name": "oj5th", "link": "https://stackoverflow.com/users/6583381/oj5th"}, "reply_to_user": {"reputation": 779, "user_id": 6858228, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/39c09fdb3f434d643a86d64033e5d5c5?s=128&d=identicon&r=PG&f=1", "display_name": "Angel", "link": "https://stackoverflow.com/users/6858228/angel"}, "edited": false, "score": 0, "creation_date": 1491362208, "post_id": 43221092, "comment_id": 73512999, "body": "@Angel, ideally you should add <code>resources</code> and if you only want to use specific route only, you can use <code>:only</code> on your routes. Example: <code>resources :products, only: [:show]</code>"}, {"owner": {"reputation": 779, "user_id": 6858228, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/39c09fdb3f434d643a86d64033e5d5c5?s=128&d=identicon&r=PG&f=1", "display_name": "Angel", "link": "https://stackoverflow.com/users/6858228/angel"}, "reply_to_user": {"reputation": 370, "user_id": 4526617, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/3fc0643deb79dffedb7bf9dfdc9d9346?s=128&d=identicon&r=PG&f=1", "display_name": "Kavincat", "link": "https://stackoverflow.com/users/4526617/kavincat"}, "edited": false, "score": 0, "creation_date": 1491362579, "post_id": 43221092, "comment_id": 73513101, "body": "@Kavincat I also read the guide, and I also check syntax of resources(through <a href=\"http://localhost:3000/info/routes\" rel=\"nofollow noreferrer\">localhost:3000/info/routes</a>).. GET\t/products/:id(.:format)\t products#show it is also the same with my routes gets &#39;/products/:id =&gt; &#39;products#show&#39;"}], "tags": [], "owner": {"reputation": 1289, "user_id": 6583381, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/IoEUj.jpg?s=128&g=1", "display_name": "oj5th", "link": "https://stackoverflow.com/users/6583381/oj5th"}, "is_accepted": true, "score": 1, "last_activity_date": 1491361688, "creation_date": 1491361688, "answer_id": 43221092, "question_id": 43221062, "link": "https://stackoverflow.com/questions/43221062/creating-wrong-routes-with-dots-ruby-on-windows/43221092#43221092", "title": "Creating wrong routes with dots ruby on windows", "body": "<p>Try to change your routes:</p>\n\n<pre><code>get 'products/' =&gt; 'products#index'\nget 'products/:id' =&gt; 'products#show'\n</code></pre>\n\n<p>To:</p>\n\n<pre><code>resources :products\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 779, "user_id": 6858228, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/39c09fdb3f434d643a86d64033e5d5c5?s=128&d=identicon&r=PG&f=1", "display_name": "Angel", "link": "https://stackoverflow.com/users/6858228/angel"}, "edited": false, "score": 0, "creation_date": 1491366032, "post_id": 43221693, "comment_id": 73513986, "body": "Correct me if I am wrong, when I declare it as: &#39;product&#39;  it will give you an error?  because both name is the same?"}, {"owner": {"reputation": 19261, "user_id": 4758119, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/F4dJY.jpg?s=128&g=1", "display_name": "Deepak Mahakale", "link": "https://stackoverflow.com/users/4758119/deepak-mahakale"}, "reply_to_user": {"reputation": 779, "user_id": 6858228, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/39c09fdb3f434d643a86d64033e5d5c5?s=128&d=identicon&r=PG&f=1", "display_name": "Angel", "link": "https://stackoverflow.com/users/6858228/angel"}, "edited": false, "score": 0, "creation_date": 1491366122, "post_id": 43221693, "comment_id": 73514017, "body": "The index one is <code>products</code>"}, {"owner": {"reputation": 779, "user_id": 6858228, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/39c09fdb3f434d643a86d64033e5d5c5?s=128&d=identicon&r=PG&f=1", "display_name": "Angel", "link": "https://stackoverflow.com/users/6858228/angel"}, "edited": false, "score": 0, "creation_date": 1491374690, "post_id": 43221693, "comment_id": 73517606, "body": "What will be the route in my view if I am in create method?"}, {"owner": {"reputation": 19261, "user_id": 4758119, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/F4dJY.jpg?s=128&g=1", "display_name": "Deepak Mahakale", "link": "https://stackoverflow.com/users/4758119/deepak-mahakale"}, "reply_to_user": {"reputation": 779, "user_id": 6858228, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/39c09fdb3f434d643a86d64033e5d5c5?s=128&d=identicon&r=PG&f=1", "display_name": "Angel", "link": "https://stackoverflow.com/users/6858228/angel"}, "edited": false, "score": 0, "creation_date": 1491374982, "post_id": 43221693, "comment_id": 73517798, "body": "<code>products_path</code> with <code>POST</code> which will go <code>post &#39;products&#39; =&gt; products#create, as: &#39;products&#39;</code>"}], "tags": [], "owner": {"reputation": 19261, "user_id": 4758119, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/F4dJY.jpg?s=128&g=1", "display_name": "Deepak Mahakale", "link": "https://stackoverflow.com/users/4758119/deepak-mahakale"}, "is_accepted": false, "score": 1, "last_activity_date": 1491365690, "creation_date": 1491365690, "answer_id": 43221693, "question_id": 43221062, "link": "https://stackoverflow.com/questions/43221062/creating-wrong-routes-with-dots-ruby-on-windows/43221693#43221693", "title": "Creating wrong routes with dots ruby on windows", "body": "<p>Actually the main issue here is the following routes will not generate the route helper</p>\n\n<pre><code>get 'products/' =&gt; 'products#index'\nget 'products/:id' =&gt; 'products#show'\n</code></pre>\n\n<p>so even if the URL and controller is correct you can't use <code>product_path</code> method</p>\n\n<p>To use that there are two ways</p>\n\n<pre><code>resources :products, only: [:index, :show]\n</code></pre>\n\n<p>or</p>\n\n<pre><code>get 'products/' =&gt; 'products#index', as: 'products'\nget 'products/:id' =&gt; 'products#show', as: 'product'\n</code></pre>\n\n<p>And now you can use <code>products_path</code> and <code>product_path(10)</code></p>\n"}], "owner": {"reputation": 779, "user_id": 6858228, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/39c09fdb3f434d643a86d64033e5d5c5?s=128&d=identicon&r=PG&f=1", "display_name": "Angel", "link": "https://stackoverflow.com/users/6858228/angel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 42, "favorite_count": 0, "accepted_answer_id": 43221092, "answer_count": 2, "score": 0, "last_activity_date": 1491365690, "creation_date": 1491361469, "last_edit_date": 1495539985, "question_id": 43221062, "link": "https://stackoverflow.com/questions/43221062/creating-wrong-routes-with-dots-ruby-on-windows", "title": "Creating wrong routes with dots ruby on windows", "body": "<p>I am new in ruby on windows.. I am trying to use the link to method but it gives me an <a href=\"http://localhost:3000/products.2(expecting\" rel=\"nofollow noreferrer\">http://localhost:3000/products.2(expecting</a> <a href=\"http://localhost:3000/products/2\" rel=\"nofollow noreferrer\">http://localhost:3000/products/2</a>). I read some forum regarding to this problem, one of the answer that I read(<a href=\"https://stackoverflow.com/questions/14033853/rails-creating-malformed-routes-with-dots\">source</a>) is </p>\n\n<pre><code>\"Have you try tweet_path and user_path ?\n\nYou want to access the show action. For that action, the model name must be singular in the *_path call.\"\n</code></pre>\n\n<p><strong>View</strong></p>\n\n<pre><code>&lt;html&gt;\n&lt;head&gt;\n    &lt;title&gt;MY STORE!&lt;/title&gt;\n&lt;/head&gt;\n&lt;body&gt;\n    &lt;h1&gt;&lt;align=\"center\"&gt; WELCOME TO MY STORE&lt;/h1&gt;\n    &lt;table border = \"1\" width=\"100%\"&gt;\n        &lt;tr&gt;\n            &lt;td&gt;ID&lt;/td&gt;\n            &lt;td&gt;Name&lt;/td&gt;\n            &lt;td&gt;Size&lt;/td&gt;\n            &lt;td&gt;Price&lt;/td&gt;\n            &lt;td&gt;Created At&lt;/td&gt;\n            &lt;td&gt;Updated At&lt;/td&gt;\n            &lt;td&gt;Action&lt;/td&gt;\n        &lt;/tr&gt;\n        &lt;% @product.each do |p| %&gt;\n\n        &lt;tr&gt;\n            &lt;td&gt;&lt;%= p.id %&gt;&lt;/td&gt;\n            &lt;td&gt;&lt;%= p.name %&gt;&lt;/td&gt;\n            &lt;td&gt;&lt;%= p.size %&gt;&lt;/td&gt;\n            &lt;td&gt;&lt;%= p.price %&gt;&lt;/td&gt;\n            &lt;td&gt;&lt;%= p.created_at.strftime(\"%B, %d, %Y\") %&gt;&lt;/td&gt;\n            &lt;td&gt;&lt;%= p.updated_at %&gt;&lt;/td&gt;\n            &lt;td&gt;&lt;%= link_to 'View', products_path(p) %&gt;&lt;/td&gt;\n        &lt;/tr&gt;\n        &lt;% end %&gt;\n\n    &lt;/table&gt;\n&lt;/body&gt;\n&lt;/html&gt;\n</code></pre>\n\n<p>NOTE: I tried to make this singular &lt;%= link_to 'View', product_path(p) %> and it gives me an error</p>\n\n<pre><code>NoMethodError in Products#index\n\nundefined method `product_path' for #&lt;#&lt;Class:0x9955218&gt;:0x4ca3b98&gt;\nDid you mean?  products_path\n&lt;td&gt;&lt;%= p.created_at.strftime(\"%B, %d, %Y\") %&gt;&lt;/td&gt;\n            &lt;td&gt;&lt;%= p.updated_at %&gt;&lt;/td&gt;\n            &lt;td&gt;&lt;%= link_to 'View', product_path(p) %&gt;&lt;/td&gt; // to this line\n        &lt;/tr&gt;\n        &lt;% end %&gt;\n</code></pre>\n\n<p><strong>Routes</strong></p>\n\n<pre><code>Rails.application.routes.draw do\n  get 'products/' =&gt; 'products#index'\n  get 'products/:id' =&gt; 'products#show'\n\n  # For details on the DSL available within this file, see http://guides.rubyonrails.org/routing.html\nend\n</code></pre>\n\n<p><strong>Controller</strong></p>\n\n<pre><code>class ProductsController &lt; ApplicationController\n  def index\n    @product = Product.all.order('created_at DESC')\n\n  end\n  def show\n    @post = Product.find(params[:id])\n\n\n  end\n\nend\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 1289, "user_id": 6583381, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/IoEUj.jpg?s=128&g=1", "display_name": "oj5th", "link": "https://stackoverflow.com/users/6583381/oj5th"}, "edited": false, "score": 0, "creation_date": 1491361468, "post_id": 43221000, "comment_id": 73512807, "body": "id value should not be <code>swarm</code> it should be an integer refers to the record id. Could you please post your view?"}], "answers": [{"tags": [], "owner": {"reputation": 1289, "user_id": 6583381, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/IoEUj.jpg?s=128&g=1", "display_name": "oj5th", "link": "https://stackoverflow.com/users/6583381/oj5th"}, "is_accepted": false, "score": 0, "last_activity_date": 1491361376, "creation_date": 1491361376, "answer_id": 43221050, "question_id": 43221000, "link": "https://stackoverflow.com/questions/43221000/couldnt-find-schedule-with-id/43221050#43221050", "title": "Couldn&#39;t find Schedule with &#39;id&#39;=", "body": "<p><code>id</code> value should not be <code>swarm</code>. It should be an integer which is referring to your record id.</p>\n\n<p>Assuming that you are triggering that request in view, it should be link this:</p>\n\n<pre><code>&lt;%= link_to \"Show\", schedules_path(schedule) %&gt;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1114, "user_id": 1810266, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/pkLOF.jpg?s=128&g=1", "display_name": "ExperimentsWithCode", "link": "https://stackoverflow.com/users/1810266/experimentswithcode"}, "is_accepted": false, "score": 0, "last_activity_date": 1491361865, "creation_date": 1491361865, "answer_id": 43221124, "question_id": 43221000, "link": "https://stackoverflow.com/questions/43221000/couldnt-find-schedule-with-id/43221124#43221124", "title": "Couldn&#39;t find Schedule with &#39;id&#39;=", "body": "<p>Assuming you are linking to your_url.whatever/schedule/swarm/id, where id is equal to a valid id of a row in your table. </p>\n\n<p>You may need to define the wildcard 'id' in your route. </p>\n\n<pre><code>get 'schedule/swarm/:id'\n</code></pre>\n\n<p>One way to check if param[:id] exists is by adding a debugger into your code. You can require <code>byebug</code> in your gem file. Then add <code>debugger</code> as the first line in your show method. If you are running locally and have <code>rails s</code> running in terminal, this should pause and let you interact with your code at that point. Enter param[:id] to see what that param is and if id exists. If it does not exist, try adding it as mentioned above. </p>\n\n<p>I know that :id is automatically placed in restful routes, but you do not appear to be doing restful routing. </p>\n"}, {"comments": [{"owner": {"reputation": 64, "user_id": 4963725, "user_type": "registered", "accept_rate": 67, "profile_image": "https://lh6.googleusercontent.com/-0cB6bA_hf6U/AAAAAAAAAAI/AAAAAAAAAXY/Lbqv1EHoSlQ/photo.jpg?sz=128", "display_name": "Red Hendery", "link": "https://stackoverflow.com/users/4963725/red-hendery"}, "edited": false, "score": 0, "creation_date": 1491369948, "post_id": 43221761, "comment_id": 73515375, "body": "Thank you @Deepak-Mahakale this solved the issue.  Out of curiosity, as ExperimentsWithCode pointed out this may not be RESTful routing. So if there is a better simple solution for what I doing I&#39;m all ears."}], "tags": [], "owner": {"reputation": 19261, "user_id": 4758119, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/F4dJY.jpg?s=128&g=1", "display_name": "Deepak Mahakale", "link": "https://stackoverflow.com/users/4758119/deepak-mahakale"}, "is_accepted": true, "score": 1, "last_activity_date": 1491366073, "creation_date": 1491366073, "answer_id": 43221761, "question_id": 43221000, "link": "https://stackoverflow.com/questions/43221000/couldnt-find-schedule-with-id/43221761#43221761", "title": "Couldn&#39;t find Schedule with &#39;id&#39;=", "body": "<p>The issue here is the ordering of routes</p>\n\n<pre><code>Rails.application.routes.draw do    \n  resources :schedule\n  root 'schedule#index'\n  get 'schedule/swarm'\n  get 'schedule/reddevils'\n  get 'schedule/thunder'\n  get 'schedule/stampede'\n  get 'schedule/admirals'\nend\n</code></pre>\n\n<p>The route <code>schedule/swarm</code> is being matched with <code>schedule/:id</code>  generated by <code>resources :schedule</code> and it is being redirected to <code>schedule#show</code> with <code>id = swarm</code> </p>\n\n<p>Solution:</p>\n\n<p>Move the resources routes for schedule below the other routes. Changing this will work</p>\n\n<blockquote>\n  <p>Note: One more thing move the <code>root</code> at the end of route file</p>\n</blockquote>\n\n<pre><code>Rails.application.routes.draw do    \n  get 'schedule/swarm'\n  get 'schedule/reddevils'\n  get 'schedule/thunder'\n  get 'schedule/stampede'\n  get 'schedule/admirals'\n\n  resources :schedule\n  root 'schedule#index'\nend\n</code></pre>\n"}], "owner": {"reputation": 64, "user_id": 4963725, "user_type": "registered", "accept_rate": 67, "profile_image": "https://lh6.googleusercontent.com/-0cB6bA_hf6U/AAAAAAAAAAI/AAAAAAAAAXY/Lbqv1EHoSlQ/photo.jpg?sz=128", "display_name": "Red Hendery", "link": "https://stackoverflow.com/users/4963725/red-hendery"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 67, "favorite_count": 0, "accepted_answer_id": 43221761, "answer_count": 3, "score": 0, "last_activity_date": 1491366073, "creation_date": 1491360958, "last_edit_date": 1491362039, "question_id": 43221000, "link": "https://stackoverflow.com/questions/43221000/couldnt-find-schedule-with-id", "title": "Couldn&#39;t find Schedule with &#39;id&#39;=", "body": "<p>I am getting error <code>ActiveRecord::RecordNotFound in ScheduleController#show Couldn't find Schedule with 'id'=swarm</code></p>\n\n<p>The error triggers when I click one of my routes and I figure this is due to Active Record looking for <code>id=swarm</code> and not finding it because it doesn't exist. </p>\n\n<p>My methods / routes <code>swarm</code> (etc...) find the by <code>id</code> and load without issue until I implement the <code>show</code> method to show individual items.</p>\n\n<p>My goal was to handle all of this with just one controller, but I am unsure if this is an issue with my routing or my controller.</p>\n\n<p>schedule_controller.rb</p>\n\n<pre><code>class ScheduleController &lt; ApplicationController\n\n  def index\n    @schedules = Schedule.all\n  end\n\n  def show\n    @schedules = Schedule.find(params[:id])\n  end\n\n  def swarm\n    @swarm = Schedule.find([3, 4, 7, 8, 13, 14, 19, 20, 27, 28, 29, 30, 35, 36, 39, 40])\n  end\n\n  def reddevils\n    @reddevils = Schedule.find([1, 2, 7, 8, 11, 12, 15, 16, 23, 24, 21, 32, 35, 36, 37, 38])\n  end\n\n  def thunder\n    @thunder = Schedule.find([5, 6, 9, 10, 15, 16, 19, 20, 21, 22, 27, 28, 31, 32, 33, 34])\n  end\n\n  def stampede\n    @stampede = Schedule.find([1, 2, 9, 10, 13, 14, 17, 18, 21, 22, 25, 26, 29, 30, 37, 38])\n  end\n\n  def admirals\n    @admirals = Schedule.find([3, 4, 5, 6, 11, 12, 17, 18, 23, 24, 25, 26, 33, 34, 39, 40])\n  end\n\nend\n</code></pre>\n\n<p>routes.rb</p>\n\n<pre><code>Rails.application.routes.draw do\n  # get 'schedule/index'\n\n  resources :schedule\n\n  root 'schedule#index'\n\n# Schedule routes\n  get 'schedule/swarm'\n  get 'schedule/reddevils'\n  get 'schedule/thunder'\n  get 'schedule/stampede'\n  get 'schedule/admirals'\n\nend\n</code></pre>\n\n<p>EDIT: Posting views as requested:</p>\n\n<p>views/schedule/index.html.erb</p>\n\n<pre><code>&lt;div class=\"container-fluid\"&gt;\n  &lt;div class=\"well team-list\"&gt;\n    &lt;ul class=\"nav nav-pills nav-justified\"&gt;\n      &lt;li&gt;&lt;%= link_to 'All Games', root_path %&gt;&lt;/li&gt;\n      &lt;li&gt;&lt;%= link_to 'Botany Swarm', schedule_swarm_path %&gt;&lt;/li&gt;\n      &lt;li&gt;&lt;%= link_to 'Canterbury Red Devils', schedule_reddevils_path %&gt;&lt;/li&gt;\n      &lt;li&gt;&lt;%= link_to 'Dunedin Thunder', schedule_thunder_path %&gt;&lt;/li&gt;\n      &lt;li&gt;&lt;%= link_to 'Skycity Stampede', schedule_stampede_path %&gt;&lt;/li&gt;\n      &lt;li&gt;&lt;%= link_to 'West Auckland Admirals', schedule_admirals_path %&gt;&lt;/li&gt;\n    &lt;/ul&gt;\n    &lt;% @schedules.each do |schedule| %&gt;\n      &lt;div class=\"col-xs-6\"&gt;\n        &lt;div class=\"panel panel-default\"&gt;\n          &lt;div class=\"panel-heading\"&gt;\n            &lt;div class=\"panel-title\"&gt;\n              &lt;h4 class=\"text-center\"&gt;&lt;%= schedule.leagueGame %&gt; - &lt;%= schedule.home %&gt; v &lt;%= schedule.away %&gt;&lt;/h4&gt;\n            &lt;/div&gt;\n            &lt;div class=\"panel-body\"&gt;\n              &lt;span class=\"pull-left\"&gt;&lt;img src=\"&lt;%= schedule.homeLogo %&gt;\" alt=\"&lt;%= schedule.homeLogo %&gt;\"&gt;&lt;/span&gt;\n              &lt;span class=\"text-center\"&gt;Details of upcoming game &lt;%= link_to 'Game Deets', schedule_path(schedule) %&gt;&lt;/span&gt;\n              &lt;span&gt;&lt;img class=\"pull-right\" src=\"&lt;%= schedule.awayLogo %&gt;\" alt=\"&lt;%= schedule.awayLogo %&gt;\"&gt;&lt;/span&gt;\n            &lt;/div&gt;\n            &lt;div class=\"panel-footer\"&gt;\n              &lt;span class=\"pull-left\"&gt;&lt;%= schedule.venue %&gt;&lt;/span&gt;\n              &lt;span class=\"text-center\"&gt;Tickets&lt;/span&gt;\n              &lt;span class=\"pull-right\"&gt;&lt;%= schedule.date %&gt;&lt;/span&gt;\n            &lt;/div&gt;\n          &lt;/div&gt;\n        &lt;/div&gt;\n      &lt;/div&gt;\n    &lt;% end %&gt;\n  &lt;/div&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p>Any help is much appreciated!</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "devise", "cancancan"], "answers": [{"comments": [{"owner": {"reputation": 51, "user_id": 2259952, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/405dc5d6db1bdf9a7758ff75cc8c44f7?s=128&d=identicon&r=PG", "display_name": "Ryan McCrary", "link": "https://stackoverflow.com/users/2259952/ryan-mccrary"}, "edited": false, "score": 0, "creation_date": 1491492551, "post_id": 43244700, "comment_id": 73587643, "body": "Thanks for the response, I eventually figured that out, by using the method you suggest of setting to the symbol, not the roles_mask. I&#39;m curious as to why it converts the array to 1, 2, 4? I&#39;m assuming an additional role would be a roles_mask of 8? Any reason why this is the typical solution?"}, {"owner": {"reputation": 2046, "user_id": 5165, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/NM63d.png?s=128&g=1", "display_name": "multipolygon", "link": "https://stackoverflow.com/users/5165/multipolygon"}, "reply_to_user": {"reputation": 51, "user_id": 2259952, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/405dc5d6db1bdf9a7758ff75cc8c44f7?s=128&d=identicon&r=PG", "display_name": "Ryan McCrary", "link": "https://stackoverflow.com/users/2259952/ryan-mccrary"}, "edited": false, "score": 0, "creation_date": 1491569651, "post_id": 43244700, "comment_id": 73625214, "body": "Yes, for that particular code you are using, it allows you to give the user multiple roles all stored in one single number value, stored as one field in a database table I guess."}, {"owner": {"reputation": 2046, "user_id": 5165, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/NM63d.png?s=128&g=1", "display_name": "multipolygon", "link": "https://stackoverflow.com/users/5165/multipolygon"}, "reply_to_user": {"reputation": 51, "user_id": 2259952, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/405dc5d6db1bdf9a7758ff75cc8c44f7?s=128&d=identicon&r=PG", "display_name": "Ryan McCrary", "link": "https://stackoverflow.com/users/2259952/ryan-mccrary"}, "edited": false, "score": 0, "creation_date": 1491569711, "post_id": 43244700, "comment_id": 73625251, "body": "(If you just want one role per user, you could remove all the code there and just have a plain old indexed array.)"}], "tags": [], "owner": {"reputation": 2046, "user_id": 5165, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/NM63d.png?s=128&g=1", "display_name": "multipolygon", "link": "https://stackoverflow.com/users/5165/multipolygon"}, "is_accepted": true, "score": 1, "last_activity_date": 1495088390, "last_edit_date": 1495088390, "creation_date": 1491446093, "answer_id": 43244700, "question_id": 43220464, "link": "https://stackoverflow.com/questions/43220464/cancancan-roles-mask-not-mapping/43244700#43244700", "title": "Cancancan roles_mask not mapping", "body": "<p>If I understand your question correctly, 3 is the correct <code>roles_mask</code> for <code>[:admin, :regular]</code>.</p>\n\n<p>If you are trying to set the <code>User</code> to a <code>reporter</code>, it would not be 3 but actually 4.</p>\n\n<p>This is because the <code>roles=</code> method, with the most basic usage, converts your <code>ROLES</code> array to:</p>\n\n<p><code>ROLES_MAP = [1, 2, 4]</code></p>\n\n<p>(...and therefore allows multiple roles to be combined simply by adding the numbers together)</p>\n\n<p>But, if you want to set a User object as a reporter, you should use:</p>\n\n<p>\ud83d\ude00: <code>@user.roles = \"reporter\"</code></p>\n\n<p>and best not to set <code>roles_mask</code> directly, like this:</p>\n\n<p>\ud83d\ude41: <code>@user.roles_mask = 4</code> </p>\n"}], "owner": {"reputation": 51, "user_id": 2259952, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/405dc5d6db1bdf9a7758ff75cc8c44f7?s=128&d=identicon&r=PG", "display_name": "Ryan McCrary", "link": "https://stackoverflow.com/users/2259952/ryan-mccrary"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 93, "favorite_count": 0, "accepted_answer_id": 43244700, "answer_count": 1, "score": 0, "last_activity_date": 1495088390, "creation_date": 1491356793, "question_id": 43220464, "link": "https://stackoverflow.com/questions/43220464/cancancan-roles-mask-not-mapping", "title": "Cancancan roles_mask not mapping", "body": "<p>Using the most basic implementation of cancancan and feel like I'm going crazy. </p>\n\n<p>Here's what's in my user model</p>\n\n<pre><code> ROLES = %i[admin regular reporter]\n\n  # Roles logic to covert string above to/from integers\n  def roles=(roles)\n    roles = [*roles].map { |r| r.to_sym }\n    self.roles_mask = (roles &amp; ROLES).map { |r| 2**ROLES.index(r) }.inject(0, :+)\n  end\n\n  def roles\n    ROLES.reject do |r|\n      ((roles_mask.to_i || 0) &amp; 2**ROLES.index(r)).zero?\n    end\n  end\n\n  def has_role?(role)\n    roles.include?(role)\n  end\n</code></pre>\n\n<p>user with 1 is showing role :admin</p>\n\n<p>user with 2 is showing role :regular</p>\n\n<p>but user with 3 is showing role [:admin, :regular]</p>\n\n<p>can't figure it out to save my life</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "nested-attributes"], "comments": [{"owner": {"reputation": 2166, "user_id": 1329583, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/d5599fe622fe6b8430b56aba3d79d2c3?s=128&d=identicon&r=PG&f=1", "display_name": "Abdulaziz", "link": "https://stackoverflow.com/users/1329583/abdulaziz"}, "edited": false, "score": 0, "creation_date": 1491353388, "post_id": 43220016, "comment_id": 73511080, "body": "Shouldn&#39;t each <code>Test</code> have multiple questions, where each question has an  <code>Answer</code> that corresponds to it?"}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1491353697, "post_id": 43220016, "comment_id": 73511148, "body": "What&#39;s the problem here?"}], "owner": {"reputation": 79, "user_id": 7485407, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/Rvp3O.jpg?s=128&g=1", "display_name": "andywalt", "link": "https://stackoverflow.com/users/7485407/andywalt"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 29, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1491355662, "creation_date": 1491353006, "last_edit_date": 1491355662, "question_id": 43220016, "link": "https://stackoverflow.com/questions/43220016/adding-response-to-nesting-field-with-another-field-rails", "title": "adding response to nesting field with another field rails", "body": "<p>I have a main table that hosts an Applications Table and a nested table of Tests with an input of questions. I'm trying to add another table that answers the questions posed by the nested table.</p>\n\n<p>My problem is that it won't save the reply in the answer table.</p>\n\n<p><a href=\"https://i.stack.imgur.com/L7akg.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/L7akg.jpg\" alt=\"Explanation of what the heck!\"></a></p>\n\n<p>Here's my code:</p>\n\n<p>answers.controller.rb</p>\n\n<pre><code>  class AnswersController &lt; ApplicationController\n    def create\n        @application = Application.find(params[:application_id])\n        @answer = @application.answers.create(params[:answer].permit(:reply))\n        @answer.user_id = current_user.id if current_user\n        @answer.save\n\n        if @answer.save\n            redirect_to application_path(@application)\n        else\n            render 'applications/new'\n        end\n    end\n end\n</code></pre>\n\n<p>applications.controller.rb</p>\n\n<pre><code>class ApplicationsController &lt; ApplicationController\n    before_action :find_application, only: [:show, :edit, :update, :destroy]\n    before_action :authenticate_user!, except: [:index, :show   ]\n\n    def index\n        @applications = Application.all.order(\"created_at DESC\").limit(3)\n    end\n\n    def new \n      @application = current_user.applications.build\n      @application.tests.build\n    end\n\n    def create\n        @application = current_user.applications.build(application_params)\n\n        if @application.save\n            redirect_to @application\n        else\n            render 'new'\n        end\n    end\n\n    def show\n    end\n\n    def edit\n    end\n\n    def update\n        if @application.update(application_params)\n            redirect_to @application\n        else\n            render 'edit'\n        end\n    end\n\n\n    def destroy\n        @application.destroy\n        redirect_to root_path\n    end\n\n    private\n\n    def find_application\n        @application = Application.find(params[:id])\n    end\n\n    def application_params\n        params.require(:application).permit(:name, :description, tests_attributes: [:id, :question, :_destroy])\n    end\n\n    def after_sign_out_path_for(resource_or_scope)\n    redirect_to root_path\n    end\nend\n</code></pre>\n\n<p>Models:</p>\n\n<p>answer.rb</p>\n\n<pre><code>class Answer &lt; ApplicationRecord\n  belongs_to :test\n  belongs_to :application\n  belongs_to :user\nend\n</code></pre>\n\n<p>application.rb</p>\n\n<pre><code>class Application &lt; ApplicationRecord\n    belongs_to :user\n\n    has_many :tests\n    has_many :answers\n\n    accepts_nested_attributes_for :tests, reject_if: :all_blank, allow_destroy: true\n\n    validates :name, :description, presence: true\nend\n</code></pre>\n\n<p>test.rb</p>\n\n<pre><code>class Test &lt; ApplicationRecord\n  belongs_to :application, required: false\n  validates :question, presence: true\n  has_many :answers\nend\n</code></pre>\n\n<p>user.rb</p>\n\n<pre><code>class User &lt; ApplicationRecord\n  # Include default devise modules. Others available are:\n  # :confirmable, :lockable, :timeoutable and :omniauthable\n  devise :database_authenticatable, :registerable,\n         :recoverable, :rememberable, :trackable, :validatable\n\n  has_many :applications\n  has_many :answers\nend\n</code></pre>\n\n<p>answers.form.html.erb</p>\n\n<pre><code>&lt;%= form_for([@application, @application.answers.build]) do |f| %&gt;\n    &lt;div class=\"field\"&gt;\n        &lt;%= f.text_field :reply %&gt;\n        &lt;%= f.submit class: \"btn btn-default\" %&gt;\n    &lt;/div&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>applications.html.erb</p>\n\n<pre><code>&lt;h1&gt;&lt;%= @application.name %&gt;&lt;/h1&gt;\n&lt;h4&gt;&lt;i&gt;&lt;%= @application.description %&gt;&lt;/i&gt;&lt;/h4&gt;\n&lt;h3&gt;Questions&lt;/h3&gt;\n&lt;ul&gt;\n    &lt;% @application.tests.each do |test| %&gt;\n        &lt;li&gt;\n            &lt;%= test.question + \"?\" %&gt;\n        &lt;/li&gt;\n    &lt;% end %&gt;\n&lt;/ul&gt;\n\n&lt;h2&gt;&lt;%= @application.answers.count %&gt;&lt;/h2&gt;\n&lt;%= render @application.answers %&gt;\n\n&lt;%= render 'answers/form' %&gt;\n\n&lt;h6&gt;&lt;%= link_to \"Back\", root_path %&gt;&lt;/h6&gt;\n</code></pre>\n\n<p>create_answers migration:</p>\n\n<pre><code>class CreateAnswers &lt; ActiveRecord::Migration[5.0]\n  def change\n    create_table :answers do |t|\n      t.string :reply\n      t.references :test, foreign_key: true\n      t.references :application, foreign_key: true\n      t.references :user, foreign_key: true\n\n      t.timestamps\n    end\n  end\nend\n</code></pre>\n\n<p>I should've just linked the GitHub repo. I'm terrible at this. I need friends I can ask about this stuff without feeling like a dum dum. Should've graduated college.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "helper"], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 7382001, "user_type": "registered", "profile_image": "https://graph.facebook.com/163362317481958/picture?type=large", "display_name": "Joel Garcia", "link": "https://stackoverflow.com/users/7382001/joel-garcia"}, "edited": false, "score": 0, "creation_date": 1491357506, "post_id": 43220264, "comment_id": 73511961, "body": "hello Kumar i tried but didnt work here&#39;s my helper = link_to &quot;&quot;, post_path(post, anchor: &quot;disqus_thread&quot;), data: { &quot;disqus-identifier&quot; =&gt; &quot;#{url_for([post, {only_path: false}]).gsub(&#39;comments&#39;,&#39;&#39;)}&quot; }, class: &quot;no-underline bold blue label&quot; THANKS"}, {"owner": {"reputation": 5730, "user_id": 667987, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8c00249587cb5aa0ceb5765dc811faa7?s=128&d=identicon&r=PG", "display_name": "seph", "link": "https://stackoverflow.com/users/667987/seph"}, "reply_to_user": {"reputation": 11, "user_id": 7382001, "user_type": "registered", "profile_image": "https://graph.facebook.com/163362317481958/picture?type=large", "display_name": "Joel Garcia", "link": "https://stackoverflow.com/users/7382001/joel-garcia"}, "edited": false, "score": 0, "creation_date": 1491363901, "post_id": 43220264, "comment_id": 73513420, "body": "@JoelGarcia - you might try this: <code>gsub(&#47;comment[s]*&#47;,&#39;&#39;)</code>"}, {"owner": {"reputation": 11, "user_id": 7382001, "user_type": "registered", "profile_image": "https://graph.facebook.com/163362317481958/picture?type=large", "display_name": "Joel Garcia", "link": "https://stackoverflow.com/users/7382001/joel-garcia"}, "edited": false, "score": 0, "creation_date": 1491412517, "post_id": 43220264, "comment_id": 73545297, "body": "i could with this. Comment count link text can be customized at your Disqus Admin &gt; Settings &gt; Community page. &quot;Comment Count Link&quot; section. Delete Comment and Comments from fields <a href=\"http://disqus.com/admin/settings/community/\" rel=\"nofollow noreferrer\">disqus.com/admin/settings/community</a> But now, how can i update the counter in real time in the index view, like the show view? because the counter in the index view updates some minutes later the time i commented and the counter in show view  updates in real time :( how can i resolve that? thanks"}, {"owner": {"reputation": 3914, "user_id": 4057366, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/uZ3e5.jpg?s=128&g=1", "display_name": "Alex Holubenko", "link": "https://stackoverflow.com/users/4057366/alex-holubenko"}, "edited": false, "score": 0, "creation_date": 1491468035, "post_id": 43220264, "comment_id": 73568979, "body": "<code>a = &#39;0 comments, 1 comment , 2 comments&#39;</code> =&gt; <code>a.scan(&#47;\\d+&#47;)  #=&gt; [&quot;0&quot;, &quot;1&quot;, &quot;2&quot;]</code> - no?"}], "tags": [], "owner": {"reputation": 671, "user_id": 540852, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/fb761b886d9368481e81ea3389310755?s=128&d=identicon&r=PG&f=1", "display_name": "Kumar", "link": "https://stackoverflow.com/users/540852/kumar"}, "is_accepted": false, "score": 0, "last_activity_date": 1491355258, "creation_date": 1491355258, "answer_id": 43220264, "question_id": 43219989, "link": "https://stackoverflow.com/questions/43219989/how-to-get-only-numbers-of-a-string-in-a-link-helper/43220264#43220264", "title": "How to get only numbers of a string in a link helper", "body": "<p>You can do something like this</p>\n\n<pre><code>= link_to \"\", post_path(post, anchor: \"disqus_thread\"), data: { \"disqus-identifier\" =&gt; \"#{post.id.gsub('comments','')}\" }, class: \"no-underline bold blue label\"\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 7382001, "user_type": "registered", "profile_image": "https://graph.facebook.com/163362317481958/picture?type=large", "display_name": "Joel Garcia", "link": "https://stackoverflow.com/users/7382001/joel-garcia"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 66, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1491359306, "creation_date": 1491352809, "last_edit_date": 1592644375, "question_id": 43219989, "link": "https://stackoverflow.com/questions/43219989/how-to-get-only-numbers-of-a-string-in-a-link-helper", "title": "How to get only numbers of a string in a link helper", "body": "<h1>hello everyone i need your help with this.</h1>\n<p>well in my index view i have many posts with disqus comments and i show a comment counter for each post and all works fine but i get for example:</p>\n<blockquote>\n<p>0 comments, 1 comment , 2 comments ... etc.</p>\n</blockquote>\n<h3>how can i show only the number? for example:</h3>\n<blockquote>\n<p>0 , 1 , 2</p>\n</blockquote>\n<p>my helper is here:</p>\n<p><code>= link_to &quot;&quot;, post_path(post, anchor: &quot;disqus_thread&quot;), data: { &quot;disqus-identifier&quot; =&gt; &quot;#{post.id}&quot; }, class: &quot;no-underline bold blue label&quot;</code></p>\n<p>I hope your answer thanks a lot!</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "twitter-bootstrap", "haml"], "comments": [{"owner": {"reputation": 2166, "user_id": 1329583, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/d5599fe622fe6b8430b56aba3d79d2c3?s=128&d=identicon&r=PG&f=1", "display_name": "Abdulaziz", "link": "https://stackoverflow.com/users/1329583/abdulaziz"}, "edited": false, "score": 0, "creation_date": 1491352348, "post_id": 43219918, "comment_id": 73510865, "body": "This looks to be client-side job rather than the back-end&#39;s. Can you show where the <code>div</code> element is being rendered?"}, {"owner": {"reputation": 3997, "user_id": 3998420, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/55ea542584d3fd2a430c3d409bdafc95?s=128&d=identicon&r=PG&f=1", "display_name": "bkunzi01", "link": "https://stackoverflow.com/users/3998420/bkunzi01"}, "edited": false, "score": 0, "creation_date": 1491352959, "post_id": 43219918, "comment_id": 73511002, "body": "You need to use javascript.  In jquery you would target the element as:  $(&quot;#id_here&quot;)"}], "answers": [{"tags": [], "owner": {"reputation": 2166, "user_id": 1329583, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/d5599fe622fe6b8430b56aba3d79d2c3?s=128&d=identicon&r=PG&f=1", "display_name": "Abdulaziz", "link": "https://stackoverflow.com/users/1329583/abdulaziz"}, "is_accepted": true, "score": 0, "last_activity_date": 1491352766, "creation_date": 1491352766, "answer_id": 43219983, "question_id": 43219918, "link": "https://stackoverflow.com/questions/43219918/check-for-presence-of-div-by-id-in-rails-view/43219983#43219983", "title": "Check for presence of div by ID in Rails view", "body": "<p>Checking the existence of DOM elements is the client-side's job, if you were to do it by JavaScript you'll have something like this:  </p>\n\n<pre><code>if(document.getElementById('x')) {\n  // ... code\n} \n</code></pre>\n\n<p>Also you can embed this JavaScript snippet into your HAML template by using HAML's <code>:javascript</code> tag, like so:</p>\n\n<pre><code># template.haml\n%div#x\n\n:javascript\n    if(document.getElementById('x')) {\n      // ... code\n    }  \n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 7795686, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1e121fd6e07952e75325f2225a09bed2?s=128&d=identicon&r=PG&f=1", "display_name": "Justin", "link": "https://stackoverflow.com/users/7795686/justin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 520, "favorite_count": 0, "accepted_answer_id": 43219983, "answer_count": 1, "score": 0, "last_activity_date": 1491352814, "creation_date": 1491352155, "question_id": 43219918, "link": "https://stackoverflow.com/questions/43219918/check-for-presence-of-div-by-id-in-rails-view", "title": "Check for presence of div by ID in Rails view", "body": "<p>I want to do the following inside a rails view:</p>\n\n<pre><code>if &lt;Div with ID \"X\" exists&gt;\n  do some stuff\nend\n</code></pre>\n\n<p>How do I achieve this?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "activerecord", "model", "filterrific"], "comments": [{"owner": {"reputation": 3521, "user_id": 2521680, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/6D935.jpg?s=128&g=1", "display_name": "Rockwell Rice", "link": "https://stackoverflow.com/users/2521680/rockwell-rice"}, "edited": false, "score": 1, "creation_date": 1491351198, "post_id": 43219698, "comment_id": 73510581, "body": "could you post your user edit code to help debug the second issue you mention."}, {"owner": {"reputation": 1539, "user_id": 3394654, "user_type": "registered", "accept_rate": 30, "profile_image": "https://i.stack.imgur.com/4fRHp.jpg?s=128&g=1", "display_name": "J. Jackson", "link": "https://stackoverflow.com/users/3394654/j-jackson"}, "reply_to_user": {"reputation": 3521, "user_id": 2521680, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/6D935.jpg?s=128&g=1", "display_name": "Rockwell Rice", "link": "https://stackoverflow.com/users/2521680/rockwell-rice"}, "edited": false, "score": 0, "creation_date": 1491351661, "post_id": 43219698, "comment_id": 73510714, "body": "Edited my post with the user edit code."}, {"owner": {"reputation": 3521, "user_id": 2521680, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/6D935.jpg?s=128&g=1", "display_name": "Rockwell Rice", "link": "https://stackoverflow.com/users/2521680/rockwell-rice"}, "edited": false, "score": 1, "creation_date": 1491353244, "post_id": 43219698, "comment_id": 73511057, "body": "Can you post your schema.rb file? It would be helpful to see what your database setup is."}, {"owner": {"reputation": 1539, "user_id": 3394654, "user_type": "registered", "accept_rate": 30, "profile_image": "https://i.stack.imgur.com/4fRHp.jpg?s=128&g=1", "display_name": "J. Jackson", "link": "https://stackoverflow.com/users/3394654/j-jackson"}, "reply_to_user": {"reputation": 3521, "user_id": 2521680, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/6D935.jpg?s=128&g=1", "display_name": "Rockwell Rice", "link": "https://stackoverflow.com/users/2521680/rockwell-rice"}, "edited": false, "score": 0, "creation_date": 1491353603, "post_id": 43219698, "comment_id": 73511119, "body": "Of course, just added it."}], "answers": [{"comments": [{"owner": {"reputation": 1539, "user_id": 3394654, "user_type": "registered", "accept_rate": 30, "profile_image": "https://i.stack.imgur.com/4fRHp.jpg?s=128&g=1", "display_name": "J. Jackson", "link": "https://stackoverflow.com/users/3394654/j-jackson"}, "edited": false, "score": 0, "creation_date": 1491400568, "post_id": 43220065, "comment_id": 73536595, "body": "So with something like that, would I be able to call, for example     &lt;td class=&#39;center&#39;&gt;&lt;%= user.program %&gt;&lt;/td&gt; That doesn&#39;t seem to be working for some reason, I get a <code>ActiveRecord::StatementInvalid at &#47;users PG::UndefinedColumn: ERROR:  column programs.user_id does not exist</code> error."}], "tags": [], "owner": {"reputation": 21, "user_id": 2962597, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5b692bd980e86cd745a5036be52e5978?s=128&d=identicon&r=PG", "display_name": "bsylla", "link": "https://stackoverflow.com/users/2962597/bsylla"}, "is_accepted": false, "score": 1, "last_activity_date": 1491353456, "creation_date": 1491353456, "answer_id": 43220065, "question_id": 43219698, "link": "https://stackoverflow.com/questions/43219698/correct-user-associations-with-multiple-models/43220065#43220065", "title": "Correct user associations with multiple models", "body": "<p>based on how you described the project you should update you model:</p>\n\n<pre><code>class University &lt; ActiveRecord::Base\n    has_many :programs\n    has_many :users, :through =&gt; :programs\nend\n\nclass Program &lt; ActiveRecord::Base\n    belongs_to :university\n    has_many :users\nend\n\nclass User &lt; ActiveRecord::Base\n    has_one :program\n    has_one :university, through: :program\nend\n</code></pre>\n\n<p>So you can specific program by university and if you want the user to have just one program he'll have btw one university through that program. </p>\n\n<p>Hope it can help...</p>\n"}, {"comments": [{"owner": {"reputation": 1539, "user_id": 3394654, "user_type": "registered", "accept_rate": 30, "profile_image": "https://i.stack.imgur.com/4fRHp.jpg?s=128&g=1", "display_name": "J. Jackson", "link": "https://stackoverflow.com/users/3394654/j-jackson"}, "edited": false, "score": 0, "creation_date": 1491485446, "post_id": 43239014, "comment_id": 73581953, "body": "I&#39;ve been reading that HABTM is not the preferred route to go, and instead a has_many :through association is better. That might just be one of those things that depends on who you talk to though."}, {"owner": {"reputation": 639, "user_id": 7046734, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RQ62P.jpg?s=128&g=1", "display_name": "Mayank", "link": "https://stackoverflow.com/users/7046734/mayank"}, "reply_to_user": {"reputation": 1539, "user_id": 3394654, "user_type": "registered", "accept_rate": 30, "profile_image": "https://i.stack.imgur.com/4fRHp.jpg?s=128&g=1", "display_name": "J. Jackson", "link": "https://stackoverflow.com/users/3394654/j-jackson"}, "edited": false, "score": 0, "creation_date": 1491493126, "post_id": 43239014, "comment_id": 73588096, "body": "Yes you are right, but here you have many to many relationship between University and Program with both having one to one relationship with user. Unless you create a specific custom table/model, HABTM is a possible solution here."}, {"owner": {"reputation": 1539, "user_id": 3394654, "user_type": "registered", "accept_rate": 30, "profile_image": "https://i.stack.imgur.com/4fRHp.jpg?s=128&g=1", "display_name": "J. Jackson", "link": "https://stackoverflow.com/users/3394654/j-jackson"}, "edited": false, "score": 0, "creation_date": 1492047544, "post_id": 43239014, "comment_id": 73826372, "body": "When I tried this out, I got the error     <code>ActiveRecord::StatementInvalid at &#47;users     PG::UndefinedColumn: ERROR:  column universities.user_id does not exist</code>"}, {"owner": {"reputation": 639, "user_id": 7046734, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RQ62P.jpg?s=128&g=1", "display_name": "Mayank", "link": "https://stackoverflow.com/users/7046734/mayank"}, "reply_to_user": {"reputation": 1539, "user_id": 3394654, "user_type": "registered", "accept_rate": 30, "profile_image": "https://i.stack.imgur.com/4fRHp.jpg?s=128&g=1", "display_name": "J. Jackson", "link": "https://stackoverflow.com/users/3394654/j-jackson"}, "edited": false, "score": 0, "creation_date": 1492049528, "post_id": 43239014, "comment_id": 73826804, "body": "University <code>has_many</code> users. So first select a university object e.g. <code>university=University.find your_university_id</code> and then use <code>university.users</code> to get all users enlisted in university and to get their ids use <code>university.users.pluck(:id)</code>  . To check a particular user in university use <code>university.users.include?  your_user_object</code>"}, {"owner": {"reputation": 1539, "user_id": 3394654, "user_type": "registered", "accept_rate": 30, "profile_image": "https://i.stack.imgur.com/4fRHp.jpg?s=128&g=1", "display_name": "J. Jackson", "link": "https://stackoverflow.com/users/3394654/j-jackson"}, "edited": false, "score": 0, "creation_date": 1492051025, "post_id": 43239014, "comment_id": 73827178, "body": "When I tried in rails console to enter <code>university.users</code>, I got the error <code>NoMethodError: undefined method </code>klass&#39; for nil:NilClass`. I am hoping to show a list of all users and their attributes in a table, and so I need to show user.university and user.program. Will this route allow me to do that?"}, {"owner": {"reputation": 639, "user_id": 7046734, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RQ62P.jpg?s=128&g=1", "display_name": "Mayank", "link": "https://stackoverflow.com/users/7046734/mayank"}, "reply_to_user": {"reputation": 1539, "user_id": 3394654, "user_type": "registered", "accept_rate": 30, "profile_image": "https://i.stack.imgur.com/4fRHp.jpg?s=128&g=1", "display_name": "J. Jackson", "link": "https://stackoverflow.com/users/3394654/j-jackson"}, "edited": false, "score": 0, "creation_date": 1492051567, "post_id": 43239014, "comment_id": 73827297, "body": "Before applying <code>university.users</code> in console, check  <code>university.nil?</code> if it&#39;s <code>false</code> and still you are getting errors for <code>university.users</code> post the full error again."}, {"owner": {"reputation": 1539, "user_id": 3394654, "user_type": "registered", "accept_rate": 30, "profile_image": "https://i.stack.imgur.com/4fRHp.jpg?s=128&g=1", "display_name": "J. Jackson", "link": "https://stackoverflow.com/users/3394654/j-jackson"}, "edited": false, "score": 0, "creation_date": 1492051798, "post_id": 43239014, "comment_id": 73827338, "body": ".nil? did return false. Here is the full error. Also, thank you SO much for your help, this has been haunting me for weeks!  I&#39;ve included the error at the bottom of the original post because this comment wouldn&#39;t allow me to include the full error message."}], "tags": [], "owner": {"reputation": 639, "user_id": 7046734, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RQ62P.jpg?s=128&g=1", "display_name": "Mayank", "link": "https://stackoverflow.com/users/7046734/mayank"}, "is_accepted": false, "score": 0, "last_activity_date": 1492051624, "last_edit_date": 1492051624, "creation_date": 1491417076, "answer_id": 43239014, "question_id": 43219698, "link": "https://stackoverflow.com/questions/43219698/correct-user-associations-with-multiple-models/43239014#43239014", "title": "Correct user associations with multiple models", "body": "<p>I would Suggest a different type of relationship between models</p>\n\n<pre><code>class University &lt; ActiveRecord::Base\n    has_and_belongs_to_many :programs\n    has_many :users\nend\n\nclass Program &lt; ActiveRecord::Base\n    has_and_belongs_to_many :universities\n    has_many :users\nend\n\nclass User &lt; ActiveRecord::Base\n    has_one :program\n    has_one :university\nend\n</code></pre>\n\n<p>In this way You can prevent repeatation of data while stating a program or a university. Relationship is managed in combined table generated.\nWe get many to many relationship between University as it can have multiple programs and one program can be run by multiple universities.\nThis relationship is scalable i.e. a university specific program can be later opened by other </p>\n\n<p>Usages will be as</p>\n\n<pre><code> user.university\n user.program\n university.programs\n university.users\n program.universities\n program.users\n</code></pre>\n\n<p>And so on.\nHope this helps..</p>\n"}, {"tags": [], "owner": {"reputation": 1539, "user_id": 3394654, "user_type": "registered", "accept_rate": 30, "profile_image": "https://i.stack.imgur.com/4fRHp.jpg?s=128&g=1", "display_name": "J. Jackson", "link": "https://stackoverflow.com/users/3394654/j-jackson"}, "is_accepted": false, "score": 0, "last_activity_date": 1492368933, "creation_date": 1492368933, "answer_id": 43440886, "question_id": 43219698, "link": "https://stackoverflow.com/questions/43219698/correct-user-associations-with-multiple-models/43440886#43440886", "title": "Correct user associations with multiple models", "body": "<p>FINALLY figured it out. I'm posting my answer in case anyone else comes across a similar issue.</p>\n\n<pre><code>class University &lt; ActiveRecord::Base\n    has_many :programs\n    has_many :users, through: :programs\nend\n\nclass Program &lt; ActiveRecord::Base\n    belongs_to :university\n    has_many :users, through: :university\nend\n\nclass User &lt; ActiveRecord::Base\n    belongs_to :university\n    belongs_to :program\nend\n</code></pre>\n"}], "owner": {"reputation": 1539, "user_id": 3394654, "user_type": "registered", "accept_rate": 30, "profile_image": "https://i.stack.imgur.com/4fRHp.jpg?s=128&g=1", "display_name": "J. Jackson", "link": "https://stackoverflow.com/users/3394654/j-jackson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 205, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1492368933, "creation_date": 1491350418, "last_edit_date": 1492051838, "question_id": 43219698, "link": "https://stackoverflow.com/questions/43219698/correct-user-associations-with-multiple-models", "title": "Correct user associations with multiple models", "body": "<p><strong>Edit</strong> I'm still having an issue with displaying programs. I have universities' names showing up correctly, but because programs belong to universities, I'm still not able to get those to show up correctly. The user table has a program_id, and yet I'm still not able to get it working.</p>\n\n<p>I'm fairly new to Rails, and am running into a situation I've not yet encountered. </p>\n\n<p>I have three models: user, university and program. I want the user to be able to choose one university and one program, however each university must be able to have multiple programs, and programs must be specific to each university. (Ex. basket weaving may not be available at University A, but is available at University B). I am also using the Filterrific gem, if that's important to the issue.</p>\n\n<p>I've been looking into the has_one :through associations, and feel that I am 95% of the way there, but just can't quite get there!</p>\n\n<pre><code>class User &lt; ActiveRecord::Base\n    has_one :university\n    has_one :program, through: :university\nend\n\nclass University &lt; ActiveRecord::Base\n    belongs_to :program\n    has_many :users, :through =&gt; :programs\nend\n\nclass Program &lt; ActiveRecord::Base\n    belongs_to :university\n    belongs_to :user\nend\n</code></pre>\n\n<p>My specific problem is that when displaying a table with a user's particular university and program, I'm only getting the ID, and not the name of that specific university/program. Also - and I'm not sure if this is related or completely separate - but when I look to edit a user, I receive the error <code>ActiveRecord::StatementInvalid at /users/6/edit\nPG::UndefinedColumn: ERROR:  column universities.user_id does not exist</code></p>\n\n<p>My view that's having this issue is as such:</p>\n\n<pre><code>&lt;% @users.each do |user| %&gt;\n    &lt;tr&gt;\n        &lt;td class='center'&gt;&lt;%= link_to(user.full_name, user_path(user)) %&gt;&lt;/td&gt;\n        &lt;td class='center'&gt;&lt;%= user.email %&gt;&lt;/td&gt;\n        &lt;td class='center'&gt;&lt;%= user.role.capitalize %&gt;&lt;/td&gt;\n        &lt;td class='center'&gt;&lt;%= user.program_id %&gt;&lt;/td&gt;    &lt;-- Error\n        &lt;td class='center'&gt;&lt;%= user.university_id %&gt;&lt;/td&gt;    &lt;-- Error\n    &lt;/tr&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>User edit view:</p>\n\n<pre><code>&lt;%= form_for(@user) do |f| %&gt;\n    &lt;div class=\"field\"&gt;\n        &lt;%= f.label :full_name %&gt;&lt;br /&gt;\n        &lt;%= f.text_field :full_name %&gt;\n    &lt;/div&gt;\n    &lt;div class=\"field\"&gt;\n        &lt;%= f.label :email %&gt;&lt;br /&gt;\n        &lt;%= f.email_field :email %&gt;\n    &lt;/div&gt;\n    &lt;div class=\"field\"&gt;\n        &lt;%= f.label :university %&gt;&lt;br&gt;\n        &lt;%= f.select :university, options_from_collection_for_select(University.all, 'id', 'name'), {include_blank: true}, {:class =&gt; 'select2'} %&gt;\n    &lt;/div&gt;\n    &lt;div class=\"field\"&gt;\n        &lt;%= f.label :program %&gt;&lt;br&gt;\n        &lt;%= f.select :program, options_from_collection_for_select(Program.all, 'id', 'name'), {include_blank: true}, {:class =&gt; 'select2'} %&gt;\n    &lt;/div&gt;\n    &lt;div class=\"actions\"&gt;\n        &lt;%= f.submit 'Submit', :class =&gt; 'btn btn-trilogy' %&gt;\n    &lt;/div&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>My user controller</p>\n\n<pre><code>class UsersController &lt; ApplicationController\n    def index\n        @filterrific = initialize_filterrific(\n            User,\n            params[:filterrific],\n            :select_options =&gt; {\n                sorted_by: User.options_for_sorted_by,\n                with_university_id: University.options_for_select,\n                with_program_id: Program.options_for_select,\n            }\n        ) or return\n        @users = @filterrific.find.page(params[:page])\n\n        respond_to do |format|\n            format.html\n            format.js\n        end\n    end\n</code></pre>\n\n<p>And finally my schema</p>\n\n<pre><code>ActiveRecord::Schema.define(version: 20170404205100) do\n\n  enable_extension \"plpgsql\"\n\n  create_table \"programs\", force: true do |t|\n    t.string   \"name\"\n    t.datetime \"created_at\"\n    t.datetime \"updated_at\"\n  end\n\n  create_table \"universities\", force: true do |t|\n    t.string   \"name\"\n    t.datetime \"created_at\"\n    t.datetime \"updated_at\"\n  end\n\n  create_table \"users\", force: true do |t|\n    t.string   \"email\",                  default: \"\",                    null: false\n    t.string   \"encrypted_password\",     default: \"\",                    null: false\n    t.integer  \"role\"\n    t.string   \"reset_password_token\"\n    t.datetime \"reset_password_sent_at\"\n    t.datetime \"remember_created_at\"\n    t.integer  \"sign_in_count\",          default: 0,                     null: false\n    t.datetime \"current_sign_in_at\"\n    t.datetime \"last_sign_in_at\"\n    t.inet     \"current_sign_in_ip\"\n    t.inet     \"last_sign_in_ip\"\n    t.datetime \"created_at\",                                             null: false\n    t.datetime \"updated_at\",                                             null: false\n    t.string   \"full_name\"\n    t.integer  \"university_id\"\n    t.string   \"time_zone\"\n    t.integer  \"program_id\"\n  end\n\n  add_index \"users\", [\"email\"], name: \"index_users_on_email\", unique: true, using: :btree\n  add_index \"users\", [\"reset_password_token\"], name: \"index_users_on_reset_password_token\", unique: true, using: :btree\n\nend\n</code></pre>\n\n<p>Forgive me if there's some code missing you need to see. Just let me know, I don't post here too often! </p>\n\n<pre><code>2.3.3 :006 &gt; university.users\nNoMethodError: undefined method `klass' for nil:NilClass\nDid you mean?  class\n    from /Users/jimmiejackson/.rvm/gems/ruby-2.3.3/gems/activerecord-4.1.9/lib/active_record/reflection.rb:537:in `source_reflection'\n    from /Users/jimmiejackson/.rvm/gems/ruby-2.3.3/gems/activerecord-4.1.9/lib/active_record/reflection.rb:728:in `derive_class_name'\n    from /Users/jimmiejackson/.rvm/gems/ruby-2.3.3/gems/activerecord-4.1.9/lib/active_record/reflection.rb:176:in `class_name'\n    from /Users/jimmiejackson/.rvm/gems/ruby-2.3.3/gems/activerecord-4.1.9/lib/active_record/reflection.rb:728:in `derive_class_name'\n    from /Users/jimmiejackson/.rvm/gems/ruby-2.3.3/gems/activerecord-4.1.9/lib/active_record/reflection.rb:176:in `class_name'\n    from /Users/jimmiejackson/.rvm/gems/ruby-2.3.3/gems/activerecord-4.1.9/lib/active_record/reflection.rb:221:in `klass'\n    from /Users/jimmiejackson/.rvm/gems/ruby-2.3.3/gems/activerecord-4.1.9/lib/active_record/associations/association.rb:118:in `klass'\n    from /Users/jimmiejackson/.rvm/gems/ruby-2.3.3/gems/activerecord-4.1.9/lib/active_record/associations/collection_association.rb:41:in `reader'\n    from /Users/jimmiejackson/.rvm/gems/ruby-2.3.3/gems/activerecord-4.1.9/lib/active_record/associations/builder/association.rb:110:in `users'\n    from (irb):6\n    from /Users/jimmiejackson/.rvm/gems/ruby-2.3.3/gems/railties-4.1.9/lib/rails/commands/console.rb:90:in `start'\n    from /Users/jimmiejackson/.rvm/gems/ruby-2.3.3/gems/railties-4.1.9/lib/rails/commands/console.rb:9:in `start'\n    from /Users/jimmiejackson/.rvm/gems/ruby-2.3.3/gems/railties-4.1.9/lib/rails/commands/commands_tasks.rb:69:in `console'\n    from /Users/jimmiejackson/.rvm/gems/ruby-2.3.3/gems/railties-4.1.9/lib/rails/commands/commands_tasks.rb:40:in `run_command!'\n    from /Users/jimmiejackson/.rvm/gems/ruby-2.3.3/gems/railties-4.1.9/lib/rails/commands.rb:17:in `&lt;top (required)&gt;'\n    from /Users/jimmiejackson/.rvm/gems/ruby-2.3.3/gems/activesupport-4.1.9/lib/active_support/dependencies.rb:247:in `require'\n... 4 levels...\n    from /Users/jimmiejackson/.rvm/gems/ruby-2.3.3/gems/activesupport-4.1.9/lib/active_support/dependencies.rb:241:in `load'\n    from /Users/jimmiejackson/.rvm/gems/ruby-2.3.3/gems/activesupport-4.1.9/lib/active_support/dependencies.rb:241:in `block in load'\n    from /Users/jimmiejackson/.rvm/gems/ruby-2.3.3/gems/activesupport-4.1.9/lib/active_support/dependencies.rb:232:in `load_dependency'\n    from /Users/jimmiejackson/.rvm/gems/ruby-2.3.3/gems/activesupport-4.1.9/lib/active_support/dependencies.rb:241:in `load'\n    from /Users/jimmiejackson/.rvm/gems/ruby-2.3.3/gems/spring-1.3.6/lib/spring/commands/rails.rb:6:in `call'\n    from /Users/jimmiejackson/.rvm/gems/ruby-2.3.3/gems/spring-1.3.6/lib/spring/command_wrapper.rb:38:in `call'\n    from /Users/jimmiejackson/.rvm/gems/ruby-2.3.3/gems/spring-1.3.6/lib/spring/application.rb:183:in `block in serve'\n    from /Users/jimmiejackson/.rvm/gems/ruby-2.3.3/gems/spring-1.3.6/lib/spring/application.rb:156:in `fork'\n    from /Users/jimmiejackson/.rvm/gems/ruby-2.3.3/gems/spring-1.3.6/lib/spring/application.rb:156:in `serve'\n    from /Users/jimmiejackson/.rvm/gems/ruby-2.3.3/gems/spring-1.3.6/lib/spring/application.rb:131:in `block in run'\n    from /Users/jimmiejackson/.rvm/gems/ruby-2.3.3/gems/spring-1.3.6/lib/spring/application.rb:125:in `loop'\n    from /Users/jimmiejackson/.rvm/gems/ruby-2.3.3/gems/spring-1.3.6/lib/spring/application.rb:125:in `run'\n    from /Users/jimmiejackson/.rvm/gems/ruby-2.3.3/gems/spring-1.3.6/lib/spring/application/boot.rb:18:in `&lt;top (required)&gt;'\n    from /Users/jimmiejackson/.rvm/rubies/ruby-2.3.3/lib/ruby/site_ruby/2.3.0/rubygems/core_ext/kernel_require.rb:55:in `require'\n    from /Users/jimmiejackson/.rvm/rubies/ruby-2.3.3/lib/ruby/site_ruby/2.3.0/rubygems/core_ext/kernel_require.rb:55:in `require'\n    from -e:1:in `&lt;main&gt;'\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-3"], "comments": [{"owner": {"reputation": 2166, "user_id": 1329583, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/d5599fe622fe6b8430b56aba3d79d2c3?s=128&d=identicon&r=PG&f=1", "display_name": "Abdulaziz", "link": "https://stackoverflow.com/users/1329583/abdulaziz"}, "edited": false, "score": 0, "creation_date": 1491353045, "post_id": 43219548, "comment_id": 73511019, "body": "Can you please update the question with the code for the form&#39;s controller/view?"}, {"owner": {"reputation": 63, "user_id": 7696718, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/2019c6b1f20a273b8ffd442f6025244e?s=128&d=identicon&r=PG&f=1", "display_name": "nakapaka1", "link": "https://stackoverflow.com/users/7696718/nakapaka1"}, "reply_to_user": {"reputation": 2166, "user_id": 1329583, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/d5599fe622fe6b8430b56aba3d79d2c3?s=128&d=identicon&r=PG&f=1", "display_name": "Abdulaziz", "link": "https://stackoverflow.com/users/1329583/abdulaziz"}, "edited": false, "score": 0, "creation_date": 1491353411, "post_id": 43219548, "comment_id": 73511085, "body": "rev3rse, sure. just a moment"}, {"owner": {"reputation": 3865, "user_id": 4540175, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/a789c8057fed1368f96c15cfbdba6421?s=128&d=identicon&r=PG&f=1", "display_name": "gates", "link": "https://stackoverflow.com/users/4540175/gates"}, "edited": false, "score": 0, "creation_date": 1491366284, "post_id": 43219548, "comment_id": 73514068, "body": "You are already redirecting to the show action, have a different  view there? your problem is solved. One more thing I would do is pass the show action id of the product, so it can show the product that is created"}, {"owner": {"reputation": 2553, "user_id": 1706831, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/34b7c15de97dd917f6159feb72a3a5a8?s=128&d=identicon&r=PG", "display_name": "Kori John Roys", "link": "https://stackoverflow.com/users/1706831/kori-john-roys"}, "edited": false, "score": 0, "creation_date": 1491570206, "post_id": 43219548, "comment_id": 73625576, "body": "Fixing code formatting"}], "answers": [{"tags": [], "owner": {"reputation": 56, "user_id": 7796934, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-qXQv3f0RL_Q/AAAAAAAAAAI/AAAAAAAAACU/a5U0i9W3ASk/photo.jpg?sz=128", "display_name": "Elentras", "link": "https://stackoverflow.com/users/7796934/elentras"}, "is_accepted": false, "score": 0, "last_activity_date": 1491376717, "creation_date": 1491376717, "answer_id": 43224403, "question_id": 43219548, "link": "https://stackoverflow.com/questions/43219548/rails-how-to-hide-form-after-save/43224403#43224403", "title": "Rails how to hide form after save?", "body": "<p>That's something to add in your view.</p>\n\n<p>Use a condition around your brand form : </p>\n\n<pre><code>form @product do |f|\n  f.text_field :name\n\n\n  if not @product.new_record?\n    f.select_field :brand_id, @brands, :id\n  end\nend\n</code></pre>\n"}], "owner": {"reputation": 63, "user_id": 7696718, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/2019c6b1f20a273b8ffd442f6025244e?s=128&d=identicon&r=PG&f=1", "display_name": "nakapaka1", "link": "https://stackoverflow.com/users/7696718/nakapaka1"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 53, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1491570206, "creation_date": 1491349409, "last_edit_date": 1491570206, "question_id": 43219548, "link": "https://stackoverflow.com/questions/43219548/rails-how-to-hide-form-after-save", "title": "Rails how to hide form after save?", "body": "<p>this is the case: </p>\n\n<h3>models/product.rb</h3>\n\n<pre><code>belongs_to :brand\n</code></pre>\n\n<h3>models/brand.rb</h3>\n\n<pre><code>has_many :products\n</code></pre>\n\n<h3>controllers/products_controller.rb</h3>\n\n<pre><code>class ProductsController &lt; ApplicationController \n  def new\n    @product = Product.new\n    @brands = Brand.all\n  end\n\n  def create\n    @product = Product.new(params[:product])\n    if @product.save  \n      redirect_to :show\n    else\n      render :new, format: :html\n    end\n  end    \nend\n</code></pre>\n\n<p>On product create the user can add a brand name and if the user add a brand name on next time to create a product the form for the brand did not show again.</p>\n\n<p>Someone please have a idea how to do something like that on rails?</p>\n"}, {"tags": ["ruby", "debugging", "recursion"], "comments": [{"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1491349562, "post_id": 43219377, "comment_id": 73510135, "body": "Embedded spaces around operators and in parameter definitions are a really good idea. Ruby isn&#39;t C or Perl."}, {"owner": {"reputation": 138, "user_id": 7741591, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/I2Rt2.png?s=128&g=1", "display_name": "Simply Beautiful Art", "link": "https://stackoverflow.com/users/7741591/simply-beautiful-art"}, "reply_to_user": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1491349743, "post_id": 43219377, "comment_id": 73510184, "body": "@theTinMan Like that?  It doesn&#39;t seem to make an apparent difference though :-("}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1491349874, "post_id": 43219377, "comment_id": 73510211, "body": "Do you mean <code>if p = c.length</code> (to assign then compare) or <code>if p == c.length</code> (only compare)? The first is a very common error, though it&#39;s legitimate code. We don&#39;t deliberately do it in Ruby because it&#39;s difficult to tell if it&#39;s something desired when debugging."}, {"owner": {"reputation": 138, "user_id": 7741591, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/I2Rt2.png?s=128&g=1", "display_name": "Simply Beautiful Art", "link": "https://stackoverflow.com/users/7741591/simply-beautiful-art"}, "reply_to_user": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1491350017, "post_id": 43219377, "comment_id": 73510251, "body": "@theTinMan Oh, that&#39;s right.  Though it doesn&#39;t seem to affect my function :-/"}, {"owner": {"reputation": 138, "user_id": 7741591, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/I2Rt2.png?s=128&g=1", "display_name": "Simply Beautiful Art", "link": "https://stackoverflow.com/users/7741591/simply-beautiful-art"}, "reply_to_user": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1491350296, "post_id": 43219377, "comment_id": 73510327, "body": "I&#39;m curious what&#39;s causing the bug, as when I replace <code>c</code> with a constant and change my code to treat it like an array of length one, it works fine... <a href=\"https://repl.it/GvD3/12\" rel=\"nofollow noreferrer\">repl.it/GvD3/12</a>"}, {"owner": {"reputation": 138, "user_id": 7741591, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/I2Rt2.png?s=128&g=1", "display_name": "Simply Beautiful Art", "link": "https://stackoverflow.com/users/7741591/simply-beautiful-art"}, "reply_to_user": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1491350985, "post_id": 43219377, "comment_id": 73510516, "body": "Oops, fixed.  <a href=\"https://repl.it/GvD3/13\" rel=\"nofollow noreferrer\">repl.it/GvD3/13</a>"}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 1, "creation_date": 1491353606, "post_id": 43219377, "comment_id": 73511121, "body": "The name of this method and the arguments makes understanding this code extremely frustrating. It&#39;d much better if you explain what this is supposed to do, especially through clarity of code and examples of desired and actual output."}, {"owner": {"reputation": 138, "user_id": 7741591, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/I2Rt2.png?s=128&g=1", "display_name": "Simply Beautiful Art", "link": "https://stackoverflow.com/users/7741591/simply-beautiful-art"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1491353786, "post_id": 43219377, "comment_id": 73511170, "body": "@tadman Have you taken a look at the very last link of my question?  And thanks for the suggestions, I&#39;ll take them and add in some examples."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 1, "creation_date": 1491353889, "post_id": 43219377, "comment_id": 73511191, "body": "The links just give errors. It&#39;s almost always better to avoid external links except if there&#39;s no alternative and try and make your question as self-contained as possible. Services like that go down all the time."}, {"owner": {"reputation": 138, "user_id": 7741591, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/I2Rt2.png?s=128&g=1", "display_name": "Simply Beautiful Art", "link": "https://stackoverflow.com/users/7741591/simply-beautiful-art"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1491354410, "post_id": 43219377, "comment_id": 73511309, "body": "@tadman If you wish, you could try smaller inputs into the given link.  And while I&#39;m typing up the examples, you could also read this: <a href=\"http://googology.wikia.com/wiki/User_blog:Simply_Beautiful_Art/Fast_Array_Iteration_Leaping\" rel=\"nofollow noreferrer\">FAIL</a> which is basically what I&#39;m trying to recreate (without any @&#39;s)"}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1491354665, "post_id": 43219377, "comment_id": 73511354, "body": "That&#39;s an odd article, but given the problem I&#39;m surprised this isn&#39;t done with strings or an array of symbols to manipulate."}, {"owner": {"reputation": 138, "user_id": 7741591, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/I2Rt2.png?s=128&g=1", "display_name": "Simply Beautiful Art", "link": "https://stackoverflow.com/users/7741591/simply-beautiful-art"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1491354957, "post_id": 43219377, "comment_id": 73511404, "body": "@tadman I&#39;m more of a mathematician, so my coding experience is very limited to a few things I&#39;ve needed to do... if you have any suggestions I&#39;m open.  I also added an example while I was at it."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1491355024, "post_id": 43219377, "comment_id": 73511415, "body": "I think that link you have is really ineffective at explaining the fundamental problem you&#39;re trying to solve. I can&#39;t see any correlation between that FAIL link and this code. If you can explain better more people would be able to lend a hand or advise."}, {"owner": {"reputation": 138, "user_id": 7741591, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/I2Rt2.png?s=128&g=1", "display_name": "Simply Beautiful Art", "link": "https://stackoverflow.com/users/7741591/simply-beautiful-art"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1491355194, "post_id": 43219377, "comment_id": 73511443, "body": "@tadman Well it was more of a side note... each element in the array is approximately equivalent to a # followed by the element in FAIL.  And I do hope the examples are enlightening?"}, {"owner": {"reputation": 138, "user_id": 7741591, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/I2Rt2.png?s=128&g=1", "display_name": "Simply Beautiful Art", "link": "https://stackoverflow.com/users/7741591/simply-beautiful-art"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1491355876, "post_id": 43219377, "comment_id": 73511596, "body": "@tadman I added a lot of context, explaining the basics as to how this function behaves in general in words as well as how the function compares to common operations."}], "answers": [{"comments": [{"owner": {"reputation": 138, "user_id": 7741591, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/I2Rt2.png?s=128&g=1", "display_name": "Simply Beautiful Art", "link": "https://stackoverflow.com/users/7741591/simply-beautiful-art"}, "edited": false, "score": 0, "creation_date": 1491351272, "post_id": 43219786, "comment_id": 73510603, "body": "I&#39;m pretty sure I <b>want</b> it to modify <code>c</code> as it goes along... else the function would never terminate..."}, {"owner": {"reputation": 138, "user_id": 7741591, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/I2Rt2.png?s=128&g=1", "display_name": "Simply Beautiful Art", "link": "https://stackoverflow.com/users/7741591/simply-beautiful-art"}, "edited": false, "score": 0, "creation_date": 1491352684, "post_id": 43219786, "comment_id": 73510944, "body": "Ah, thank you!  That really explains.  I&#39;ll see if I can fix it based on that."}, {"owner": {"reputation": 138, "user_id": 7741591, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/I2Rt2.png?s=128&g=1", "display_name": "Simply Beautiful Art", "link": "https://stackoverflow.com/users/7741591/simply-beautiful-art"}, "edited": false, "score": 0, "creation_date": 1491352786, "post_id": 43219786, "comment_id": 73510967, "body": "I tried to fix it but it still doesn&#39;t work :-( <a href=\"https://repl.it/GvD3/18\" rel=\"nofollow noreferrer\">repl.it/GvD3/18</a>  Any suggestions on how to fix this would be nice."}, {"owner": {"reputation": 138, "user_id": 7741591, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/I2Rt2.png?s=128&g=1", "display_name": "Simply Beautiful Art", "link": "https://stackoverflow.com/users/7741591/simply-beautiful-art"}, "edited": false, "score": 0, "creation_date": 1491353460, "post_id": 43219786, "comment_id": 73511093, "body": "Hm, I honestly don&#39;t know how to work with variables like this yet... :-( This really sucks... XD"}], "tags": [], "owner": {"reputation": 17337, "user_id": 83605, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a214bcecbc04c7c42696e55cbdea3e17?s=128&d=identicon&r=PG", "display_name": "Aziz", "link": "https://stackoverflow.com/users/83605/aziz"}, "is_accepted": false, "score": 2, "last_activity_date": 1491352595, "last_edit_date": 1491352595, "creation_date": 1491351121, "answer_id": 43219786, "question_id": 43219377, "link": "https://stackoverflow.com/questions/43219377/why-do-these-two-inputs-result-in-different-outputs/43219786#43219786", "title": "Why do these two inputs result in different outputs?", "body": "<p>This is because you are <strong>modifying elements of the array <code>c</code></strong> inside the function calls. When the function returns, <strong><code>c</code></strong> is the modified one, not the original one. The new <strong><code>c</code></strong> is used in the subsequent function calls, resulting in the behavior you're getting.</p>\n\n<h2>Edit</h2>\n\n<p>Here is an explanation of how <strong><code>f(2,0,[0,-1])</code></strong> is evaluated:</p>\n\n<ul>\n<li><p>The function call does not satisfy the condition <strong><code>b &lt; 0</code></strong>, so it will go to the last <code>else</code> statement and execute <code>f( f(a ,-1 ,c), b-1, c)</code></p></li>\n<li><p>The inner call is <code>f(a,-1,c)</code> which is <code>f(2, -1, [0,-1])</code>. This will return the value <strong><code>6</code></strong>. Also, during this evaluation, it will modify <strong><code>c</code></strong> into <code>[-1,-1]</code>.</p></li>\n<li><p>The outer call is now <code>f(6,b-1,c)</code>, which is <code>f(6, -1,</code><strong><code>[-1,-1]</code></strong><code>)</code>. Notice that <code>c</code> is <strong>not</strong> <code>[0,-1]</code> anymore. This will evaluate to <strong><code>7</code></strong>. </p></li>\n</ul>\n\n<p>Hence, the equivalent call should be: <strong><code>f(f(2,-1,[0,-1]),-1,[-1,-1])</code></strong>, which will give the same result, <strong><code>7</code></strong>.</p>\n"}], "owner": {"reputation": 138, "user_id": 7741591, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/I2Rt2.png?s=128&g=1", "display_name": "Simply Beautiful Art", "link": "https://stackoverflow.com/users/7741591/simply-beautiful-art"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 69, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1491356512, "creation_date": 1491348250, "last_edit_date": 1491356512, "question_id": 43219377, "link": "https://stackoverflow.com/questions/43219377/why-do-these-two-inputs-result-in-different-outputs", "title": "Why do these two inputs result in different outputs?", "body": "<p>So I have the following Ruby script:</p>\n\n<pre><code>def f( a , b , c )\n  if b &lt; 0\n    p = q = 1\n    if c[ 0 ] &lt; 0\n      while p != 0\n        if p == c.length\n          p = 0\n          return a + 1\n        elsif c[ p ] &lt; 0\n          p += 1\n        else\n          c[ p ] -= 1\n          c[ p - 1 ] = a\n          p = 0\n          return f( a , b , c )\n        end\n      end\n    else\n      c[ 0 ] -= 1\n      return f( a , a , c )\n    end\n  else\n    return f( f( a , -1 , c ) , b-1 , c )\n  end\nend\n\n#Why do the below two return different numbers?\nf( 2 , 0 , [ 0 , -1 ] )\nf( f( 2 , -1 , [ 0 , -1 ] ) , -1 , [ 0 , -1 ] )\n</code></pre>\n\n<p>They are supposed to return the same thing.  Since the first one has a second argument greater than or equal to zero, we should have it run to the last <code>else</code> case and return <code>f(f(2,-1,[0,1]),-1,[0,1])</code>, but when I run the two, they do not return the same results.</p>\n\n<p><a href=\"https://repl.it/GvD3/10\" rel=\"nofollow noreferrer\">https://repl.it/GvD3/10</a></p>\n\n<p>According to the above link, we have</p>\n\n<pre><code>f(2,0,[0,-1]) = 7\nf(f(2,-1,[0,-1]),-1,[0,-1]) = 14\n</code></pre>\n\n<p>and I can't figure out what I've done wrong here.  (if you can fix this, thanks as well)</p>\n\n<hr>\n\n<p>The function should look something like the following for an array <code>c</code> of length four:</p>\n\n<p><a href=\"https://repl.it/GvD3/17\" rel=\"nofollow noreferrer\">https://repl.it/GvD3/17</a></p>\n\n<hr>\n\n<p>Some examples to show how this is supposed to work:</p>\n\n<pre><code>  f(3,1,[2,3])\n= f(f(3,-1,[2,3]),0,[2,3])\n= f(f(3,3,[1,3]),0,[2,3])\n= f(f(f(3,-1,[1,3]),2,[1,3]),0,[2,3])\n= f(f(f(3,3,[0,3]),2,[1,3]),0,[2,3])\n= f(f(f(f(3,-1,[0,3]),2,[0,3]),2,[1,3]),0,[2,3])\n= f(f(f(f(3,3,[-1,3]),2,[0,3]),2,[1,3]),0,[2,3])\n= f(f(f(f(f(3,-1,[-1,3]),2,[-1,3]),2,[0,3]),2,[1,3]),0,[2,3])\n= f(f(f(f(f(3,-1,[3,2]),2,[-1,3]),2,[0,3]),2,[1,3]),0,[2,3])\n= f(f(f(f(f(3,3,[2,2]),2,[-1,3]),2,[0,3]),2,[1,3]),0,[2,3])\n</code></pre>\n\n<p>And now I'm going to be honest and tell you that <code>f(3,1,[2,3])</code> is much larger than anything you would normally deal with.  Indeed, the program I am making will almost always return <code>stack level too deep</code>, for the amount of stacks I am running through are sheer insanity.  I'm supposed to run this on a theoretical computer with infinite resources and the like, and I'm trying to recreate a version of <a href=\"http://googology.wikia.com/wiki/User_blog:Simply_Beautiful_Art/Fast_Array_Iteration_Leaping\" rel=\"nofollow noreferrer\">FAIL</a> with no @ symbols.</p>\n\n<p>The general explanation of this in words:</p>\n\n<p>If <code>b&gt;-1</code>, then we do <code>b+1</code> nestings of the function inside the first argument:</p>\n\n<p><code>f(a,3,c) = f(f(f(f(a,-1,c),-1,c),-1,c),-1,c)</code></p>\n\n<p>If <code>b=-1</code> but the first element of <code>c0=-1</code>, then replace the second argument with the first argument.</p>\n\n<p><code>f(a,-1,[c0, c1, ...]) = f(a,a,[c0 - 1, c1, ...])</code></p>\n\n<p>Else, if the second element is <code>-1</code>, then replace the first element with the first argument, else, if the third element is <code>-1</code>, then replace the second element with the first argument etc.</p>\n\n<p>If the second argument and all of the elements of the array are <code>-1</code>, then we have</p>\n\n<p><code>f(a,-1,c) = a + 1</code></p>\n\n<hr>\n\n<p>More intuitively, we have: (not real equalities)</p>\n\n<pre><code>f(a,-1,[-1,-1,-1, ...]) = addition\nf(a,-1,[ 0,-1,-1, ...]) = repeated addition = multiplication\nf(a,-1,[ 1,-1,-1, ...]) = repeated multiplication = exponentiation\nf(a,-1,[ 2,-1,-1, ...]) = repeated exponentiation = tetration\n...\nf(a,-1,[-1, 0,-1, ...]) = Ackermann function (it climbs up the previous functions)\nf(a,-1,[ 0, 0,-1, ...]) = repeated Ackermann functions\nf(a,-1,[ 1, 0,-1, ...]) = repeated previous function nested into itself\nf(a,-1,[ 2, 0,-1, ...]) = repeated previous function nested into itself\n...\nf(a,-1,[-1, 1,-1, ...]) = some function that climbs up through the list of previous functions\n...\nf(a,-1,[-1,-1, 0, ...]) = some function that climbs through functions of the form f(a,-1,[-1, k,-1, ...])\nf(a,-1,[ 0,-1, 0, ...]) = repeated nesting of the previous function\nf(a,-1,[-1, 0, 0, ...]) = some function that climbs through function of the form f(a,-1,[ k,-1, 0, ...])\nf(a,-1,[ 0,-1, 1, ...]) = some function that climbs through functions of the form f(a,-1,[ 0, k, 0, ...])\n</code></pre>\n\n<p>And I hope you get the general idea.</p>\n\n<p><a href=\"http://mathworld.wolfram.com/AckermannFunction.html\" rel=\"nofollow noreferrer\">Ackermann function</a></p>\n"}, {"tags": ["ruby", "methods", "ruby-on-rails-5"], "comments": [{"owner": {"reputation": 14010, "user_id": 3109182, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/a4b305f0077055b4fdcf715067775d5a?s=128&d=identicon&r=PG", "display_name": "Anthony", "link": "https://stackoverflow.com/users/3109182/anthony"}, "edited": false, "score": 0, "creation_date": 1491348058, "post_id": 43219301, "comment_id": 73509718, "body": "I&#39;m willing to bet the stacktrace sees your controller but doesn&#39;t know what to do with <code>@project = Project.new</code>.  Sounds like you have both a module and a class named <code>Project</code>."}, {"owner": {"reputation": 19, "user_id": 6490492, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh4.googleusercontent.com/-dAq1ZwgGpxk/AAAAAAAAAAI/AAAAAAAABQw/8AbP5UYYi8A/photo.jpg?sz=128", "display_name": "Hodari Toure&#39;", "link": "https://stackoverflow.com/users/6490492/hodari-toure"}, "reply_to_user": {"reputation": 14010, "user_id": 3109182, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/a4b305f0077055b4fdcf715067775d5a?s=128&d=identicon&r=PG", "display_name": "Anthony", "link": "https://stackoverflow.com/users/3109182/anthony"}, "edited": false, "score": 0, "creation_date": 1491348481, "post_id": 43219301, "comment_id": 73509842, "body": "Yes, i do have both named &quot;Project&quot;, should i change one or rename the app? I was following along with an instructor as i try to learn."}, {"owner": {"reputation": 28612, "user_id": 5025116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7WdYi.jpg?s=128&g=1", "display_name": "Sebastian Palma", "link": "https://stackoverflow.com/users/5025116/sebastian-palma"}, "edited": false, "score": 0, "creation_date": 1491350165, "post_id": 43219301, "comment_id": 73510284, "body": "Can you add a repository?"}, {"owner": {"reputation": 19, "user_id": 6490492, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh4.googleusercontent.com/-dAq1ZwgGpxk/AAAAAAAAAAI/AAAAAAAABQw/8AbP5UYYi8A/photo.jpg?sz=128", "display_name": "Hodari Toure&#39;", "link": "https://stackoverflow.com/users/6490492/hodari-toure"}, "edited": false, "score": 0, "creation_date": 1491360626, "post_id": 43219301, "comment_id": 73512635, "body": "<a href=\"https://github.com/quietwar/CohortProjects\" rel=\"nofollow noreferrer\">github.com/quietwar/CohortProjects</a>"}], "answers": [{"tags": [], "owner": {"reputation": 19, "user_id": 6490492, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh4.googleusercontent.com/-dAq1ZwgGpxk/AAAAAAAAAAI/AAAAAAAABQw/8AbP5UYYi8A/photo.jpg?sz=128", "display_name": "Hodari Toure&#39;", "link": "https://stackoverflow.com/users/6490492/hodari-toure"}, "is_accepted": true, "score": 0, "last_activity_date": 1509850649, "last_edit_date": 1509850649, "creation_date": 1509849564, "answer_id": 47117656, "question_id": 43219301, "link": "https://stackoverflow.com/questions/43219301/rails5-error-no-methoderror-in-projectscontrollernew-i-defined-it-but/47117656#47117656", "title": "Rails5 error: No methoderror in ProjectsController#new. I defined it but", "body": "<p>I just needed to change the params to \"params.require(:project)\" using the singular instead of the plural. </p>\n"}], "owner": {"reputation": 19, "user_id": 6490492, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh4.googleusercontent.com/-dAq1ZwgGpxk/AAAAAAAAAAI/AAAAAAAABQw/8AbP5UYYi8A/photo.jpg?sz=128", "display_name": "Hodari Toure&#39;", "link": "https://stackoverflow.com/users/6490492/hodari-toure"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 24, "favorite_count": 0, "accepted_answer_id": 47117656, "answer_count": 1, "score": 0, "last_activity_date": 1509850649, "creation_date": 1491347805, "question_id": 43219301, "link": "https://stackoverflow.com/questions/43219301/rails5-error-no-methoderror-in-projectscontrollernew-i-defined-it-but", "title": "Rails5 error: No methoderror in ProjectsController#new. I defined it but", "body": "<p>i am getting \"undefined method 'new' for Project:Module</p>\n\n<p>My projects_controller.rb\nclass ProjectsController &lt; ApplicationController</p>\n\n<pre><code>def new\n    @project = Project.new\nend\n\ndef create\n    @project = Project.new(project_param)\n    if @project.save\n     redirect_to project_path(@project)\n    else\n        render 'new'\n    end\nend\n\nprivate\n\n    def project_param\n        params.require(:projects).permit(:name, :description)\n    end\n</code></pre>\n\n<p>end</p>\n\n<p>my routes</p>\n\n<p>Prefix Verb   URI Pattern                  Controller#Action\n        root GET    /                            pages#home\n       about GET    /about(.:format)             pages#about\n        help GET    /help(.:format)              pages#help\n    projects GET    /projects(.:format)          projects#index\n             POST   /projects(.:format)          projects#create\n new_project GET    /projects/new(.:format)      projects#new\nedit_project GET    /projects/:id/edit(.:format) projects#edit\n     project GET    /projects/:id(.:format)      projects#show\n             PATCH  /projects/:id(.:format)      projects#update\n             PUT    /projects/:id(.:format)      projects#update\n             DELETE /projects/:id(.:format)      projects#destroy</p>\n\n<p><a href=\"https://i.stack.imgur.com/FseQ6.png\" rel=\"nofollow noreferrer\">pic</a></p>\n"}, {"tags": ["html", "ruby-on-rails", "ruby", "video.js"], "answers": [{"tags": [], "owner": {"reputation": 12440, "user_id": 308731, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/eQxFn.jpg?s=128&g=1", "display_name": "Eyeslandic", "link": "https://stackoverflow.com/users/308731/eyeslandic"}, "is_accepted": false, "score": 1, "last_activity_date": 1491348496, "creation_date": 1491348496, "answer_id": 43219417, "question_id": 43219266, "link": "https://stackoverflow.com/questions/43219266/is-it-possible-to-change-the-way-rails-renders-a-small-piece-of-code/43219417#43219417", "title": "Is it possible to change the way rails renders a small piece of code", "body": "<p>The <a href=\"https://apidock.com/rails/ActionView/Helpers/AssetTagHelper/video_tag\" rel=\"nofollow noreferrer\"><code>video_tag</code></a> helper does have some use like the <code>poster</code> attribute which references an image, so it's needed for that, to include the digest of the image file. However for your use case I don't see any reason to use the helper when it's quite easy to just write the pure html yourself.</p>\n"}, {"tags": [], "owner": {"reputation": 2157, "user_id": 6407868, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/5f5ea0c071e2a5adff7d131f58cc2011?s=128&d=identicon&r=PG&f=1", "display_name": "the12", "link": "https://stackoverflow.com/users/6407868/the12"}, "is_accepted": true, "score": 1, "last_activity_date": 1491349447, "creation_date": 1491349447, "answer_id": 43219557, "question_id": 43219266, "link": "https://stackoverflow.com/questions/43219266/is-it-possible-to-change-the-way-rails-renders-a-small-piece-of-code/43219557#43219557", "title": "Is it possible to change the way rails renders a small piece of code", "body": "<p>Helpers are just there to make things easier to read syntactically, and easier to program. If you write HTML instead of ERB it performs the same, provided your HTML tags print out everything ERB would have otherwise printed. </p>\n\n<p>In this specialized usecase, I would just write the entire HTML tag surrounded by an ERB <code>.each</code> tag. Not sure how you have your controller set up, but under the assumption it was something like <code>@videos = Videos.all</code>, it would be something like this:</p>\n\n<pre><code>&lt;% @videos.each do |video| %&gt;\n  &lt;video class=\"video-js\" data-setup='{}' src=&lt;%=video.file_name%&gt;&gt;\n  &lt;/video&gt;\n\n&lt;% end %&gt;\n</code></pre>\n"}], "owner": {"reputation": 2958, "user_id": 952248, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/u2n4V.jpg?s=128&g=1", "display_name": "Mark Kramer", "link": "https://stackoverflow.com/users/952248/mark-kramer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 48, "favorite_count": 0, "accepted_answer_id": 43219557, "answer_count": 2, "score": 0, "last_activity_date": 1491349447, "creation_date": 1491347677, "question_id": 43219266, "link": "https://stackoverflow.com/questions/43219266/is-it-possible-to-change-the-way-rails-renders-a-small-piece-of-code", "title": "Is it possible to change the way rails renders a small piece of code", "body": "<p>I'm trying to set up <a href=\"http://videojs.com/\" rel=\"nofollow noreferrer\">VideoJS</a> and I'm following the guide <a href=\"http://docs.videojs.com/tutorial-setup.html#automatic-setup\" rel=\"nofollow noreferrer\">here</a>.</p>\n\n<p>You'll see that for automatic setup the video needs to be initialized like this:</p>\n\n<pre><code>&lt;video class=\"video-js\" data-setup='{}'&gt;\n</code></pre>\n\n<p>Which I thought would be fine because in rails I can do this:</p>\n\n<pre><code>&lt;%= video_tag @video.filename + '.mp4', :class =&gt; 'video-js', 'data-setup' =&gt; '{}' %&gt;\n</code></pre>\n\n<p>However, that renders the tag like this:</p>\n\n<pre><code>&lt;video class=\"video-js\" data-setup=\"{}\" src=\"/assets/0019 Trump Android.mp4\"&gt;&lt;/video&gt;\n</code></pre>\n\n<p>That looks fine at first glance except that the data-setup line needs single quotes, not double quotes, or videojs setup won't work. Like this: <code>data-setup='{}'</code></p>\n\n<p>So is there any way to get rails to render that one attribute with single quotes instead of double quotes?</p>\n\n<p>Also, a second thought, why should I have rails render the video tag when I could just write it in HTML?</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "answers": [{"comments": [{"owner": {"reputation": 3320, "user_id": 4950680, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/C8cEh.jpg?s=128&g=1", "display_name": "Martin Zinovsky", "link": "https://stackoverflow.com/users/4950680/martin-zinovsky"}, "edited": false, "score": 0, "creation_date": 1491349057, "post_id": 43219316, "comment_id": 73510010, "body": "to refator it down even more you can do <code>@applicants.map(&amp;:first_name)</code>"}], "tags": [], "owner": {"reputation": 1761, "user_id": 3741320, "user_type": "registered", "profile_image": "https://graph.facebook.com/10222536/picture?type=large", "display_name": "James Milani", "link": "https://stackoverflow.com/users/3741320/james-milani"}, "is_accepted": false, "score": 1, "last_activity_date": 1491347914, "creation_date": 1491347914, "answer_id": 43219316, "question_id": 43219053, "link": "https://stackoverflow.com/questions/43219053/how-to-get-attribute-of-object-in-model-ruby-on-rails/43219316#43219316", "title": "How to get attribute of object in Model - Ruby on Rails", "body": "<p>You probably want to use <code>.map</code> instead of <code>.each</code>.</p>\n\n<p>You can get all the names of the applicants in an array by doing this:</p>\n\n<pre><code>@applicants.map { |appli| appli.first_name }\n\n#=&gt; ['John', 'Mary']\n</code></pre>\n\n<p>As you can see, <a href=\"https://ruby-doc.org/core-2.3.0/Array.html#method-i-each\" rel=\"nofollow noreferrer\"><code>.each</code></a> returns the array itself.</p>\n\n<p><a href=\"https://ruby-doc.org/core-2.3.0/Array.html#method-i-map\" rel=\"nofollow noreferrer\"><code>.map</code></a> will return the array generated by executing the block.</p>\n"}, {"tags": [], "owner": {"reputation": 15583, "user_id": 177489, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/sv6zK.jpg?s=128&g=1", "display_name": "Mark Swardstrom", "link": "https://stackoverflow.com/users/177489/mark-swardstrom"}, "is_accepted": false, "score": 1, "last_activity_date": 1491408751, "last_edit_date": 1491408751, "creation_date": 1491348940, "answer_id": 43219466, "question_id": 43219053, "link": "https://stackoverflow.com/questions/43219053/how-to-get-attribute-of-object-in-model-ruby-on-rails/43219466#43219466", "title": "How to get attribute of object in Model - Ruby on Rails", "body": "<p>Or use <code>pluck</code> and avoid creating the ruby objects</p>\n\n<pre><code>def tenant\n  Applicant.where(id: tenant_id).pluck(:first_name)\nend\n</code></pre>\n\n<p>BTW - I see you have a tenant_id, if that means you have a <code>belongs_to :tenant</code> on the Billing class, you will want to pick a different method name (maybe \"tenant_first_names\").  If this is the case, and tenant <code>has_many :applicants</code> you can do this:</p>\n\n<pre><code>def tenant_first_names\n  tenant.applicants.pluck(:first_name)\nend\n</code></pre>\n"}], "owner": {"reputation": 318, "user_id": 5685405, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/2dc9cecb4d319605cfe1f823772d32dd?s=128&d=identicon&r=PG&f=1", "display_name": "Acrux", "link": "https://stackoverflow.com/users/5685405/acrux"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 763, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1491408751, "creation_date": 1491346471, "question_id": 43219053, "link": "https://stackoverflow.com/questions/43219053/how-to-get-attribute-of-object-in-model-ruby-on-rails", "title": "How to get attribute of object in Model - Ruby on Rails", "body": "<p>How can I get the attribute first_name of an entity called Applicant when I'm in a different model called Billing. So far I am able to make it work however, what is returned is the object and not only the attribute.</p>\n\n<p>The following is my code:</p>\n\n<pre><code>class Billing &lt; ActiveRecord::Base\n    def self.to_csv\n        attributes=%w{tenant bill_type_dec total_amount created_at datetime_paid paid }\n        CSV.generate(headers:true) do |csv|\n            csv&lt;&lt;attributes\n            all.each do |bill|\n                csv &lt;&lt;attributes.map{|attr| bill.send(attr)}\n            end\n        end\n    end\n\n    def bill_type_dec\n        if bill_type!=nil\n            if bill_type==1\n                \"Water\"\n            else\n                \"Electricity\"\n            end\n        else\n            \"#{description}\"\n        end\n    end\n\n    def tenant\n        @applicants=Applicant.where(id: tenant_id)\n        @applicants.each do |appli|\n                \"#{appli.first_name}\"\n\n        end\n    end\nend\n</code></pre>\n"}, {"tags": ["ruby", "string"], "comments": [{"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1491348095, "post_id": 43219040, "comment_id": 73509728, "body": "Welcome to SO. Please read &quot;<a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a>&quot; and the linked pages, and &quot;<a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>&quot;. Concise and clear questions are really important. There was a lot of unnecessary information in your question. In &quot;<a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>&quot; we need the input data, which is the string you&#39;re counting. That helps everyone work on the same problem."}, {"owner": {"reputation": 126343, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "edited": false, "score": 1, "creation_date": 1491348432, "post_id": 43219040, "comment_id": 73509830, "body": "Could you show us the call to <code>letter_count</code> which is giving you this odd behavior? I suspect you&#39;re not passing in what you think you are."}, {"owner": {"reputation": 33, "user_id": 6274483, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/294428bfcc09d3176ad5f39507afd61e?s=128&d=identicon&r=PG&f=1", "display_name": "Emperor Norton", "link": "https://stackoverflow.com/users/6274483/emperor-norton"}, "edited": false, "score": 0, "creation_date": 1491421316, "post_id": 43219040, "comment_id": 73550586, "body": "I feel profoundly stupid. I looked at the test cases being provided and sure enough I had simply misread them (there was an &#39;e&#39; character I didn&#39;t see). Thank you all for helping me see this error."}], "answers": [{"comments": [{"owner": {"reputation": 33, "user_id": 6274483, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/294428bfcc09d3176ad5f39507afd61e?s=128&d=identicon&r=PG&f=1", "display_name": "Emperor Norton", "link": "https://stackoverflow.com/users/6274483/emperor-norton"}, "edited": false, "score": 0, "creation_date": 1491421407, "post_id": 43219396, "comment_id": 73550647, "body": "Turned out I was misreading the test cases (the provided strings). You were absolutely right. Thanks for the tip on String#each_char, I&#39;ll squirrel that one away for later use."}], "tags": [], "owner": {"reputation": 126343, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "is_accepted": false, "score": 0, "last_activity_date": 1491348366, "creation_date": 1491348366, "answer_id": 43219396, "question_id": 43219040, "link": "https://stackoverflow.com/questions/43219040/how-to-fix-incorrect-character-counting-code/43219396#43219396", "title": "How to fix incorrect character counting code", "body": "<p>Ruby already has <a href=\"http://ruby-doc.org/core-2.4.1/String.html#method-i-each_char\" rel=\"nofollow noreferrer\">String#each_char</a> which you could use.</p>\n\n<pre><code>def char_count(string)\n    counts = Hash.new(0)\n\n    string.each_char { |char|\n        counts[char] += 1\n    }\n\n    return counts\nend\n\nputs char_count(\"Basset hounds got long ears\").inspect\n\n# {\"B\"=&gt;1, \"a\"=&gt;2, \"s\"=&gt;4, \"e\"=&gt;2, \"t\"=&gt;2, \" \"=&gt;4, \"h\"=&gt;1,\n#  \"o\"=&gt;3, \"u\"=&gt;1, \"n\"=&gt;2, \"d\"=&gt;1, \"g\"=&gt;2, \"l\"=&gt;1, \"r\"=&gt;1}\n</code></pre>\n\n<p>As for why you're getting the wrong characters, are you sure you're passing in the string you think you are?</p>\n"}, {"comments": [{"owner": {"reputation": 33, "user_id": 6274483, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/294428bfcc09d3176ad5f39507afd61e?s=128&d=identicon&r=PG&f=1", "display_name": "Emperor Norton", "link": "https://stackoverflow.com/users/6274483/emperor-norton"}, "edited": false, "score": 0, "creation_date": 1491421576, "post_id": 43219438, "comment_id": 73550745, "body": "Yeah, I misread the test cases. Sorry for wasting your time. I do very much appreciate the distinction you make between empty and blank space--it&#39;s helpful both in terms of thinking about data, and in expressing my questions--so not a total loss (for me anyway). Thanks again."}], "tags": [], "owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "is_accepted": true, "score": 0, "last_activity_date": 1491349474, "last_edit_date": 1491349474, "creation_date": 1491348685, "answer_id": 43219438, "question_id": 43219040, "link": "https://stackoverflow.com/questions/43219040/how-to-fix-incorrect-character-counting-code/43219438#43219438", "title": "How to fix incorrect character counting code", "body": "<blockquote>\n  <p>I don't understand why empty spaces were being represented by the letter 'e' or being counted at all.</p>\n</blockquote>\n\n<p>I can't duplicate the problem:</p>\n\n<pre><code>def letter_count(str)\n  counts = Hash.new(0)\n  str.split(\"\").each{|letter| counts[letter] += 1 unless letter == \"\"}\n  counts\nend\n\nletter_count('a cat') # =&gt; {\"a\"=&gt;2, \" \"=&gt;1, \"c\"=&gt;1, \"t\"=&gt;1}\n</code></pre>\n\n<p>\"empty spaces\"? There's no such thing. A space is not empty; It's considered blank but not empty:</p>\n\n<pre><code>' '.empty? # =&gt; false\n</code></pre>\n\n<p>Loading the ActiveSupport extension:</p>\n\n<pre><code>require 'active_support/core_ext/object/blank'\n' '.blank? # =&gt; true\n</code></pre>\n\n<p>spaces are valid characters, which is why they're being counted. You have to disallow them if you don't want them counted.</p>\n\n<p>For reference, here's how I'd do it:</p>\n\n<pre><code>def letter_count(str)\n  str.chars.each_with_object(Hash.new(0)) { |l, h| h[l] += 1 }\nend\n\nletter_count('a cat') # =&gt; {\"a\"=&gt;2, \" \"=&gt;1, \"c\"=&gt;1, \"t\"=&gt;1}\n</code></pre>\n\n<p>A messier way would be:</p>\n\n<pre><code>def letter_count(str)\n  str.chars.group_by { |c| c }.map { |char, chars| [char, chars.count] }.to_h\nend\n</code></pre>\n\n<p>Breaking that down:</p>\n\n<pre><code>def letter_count(str)\n  str.chars # =&gt; [\"a\", \" \", \"c\", \"a\", \"t\"]\n    .group_by { |c| c } # =&gt; {\"a\"=&gt;[\"a\", \"a\"], \" \"=&gt;[\" \"], \"c\"=&gt;[\"c\"], \"t\"=&gt;[\"t\"]}\n    .map { |char, chars| [char, chars.count] } # =&gt; [[\"a\", 2], [\" \", 1], [\"c\", 1], [\"t\", 1]]\n    .to_h # =&gt; {\"a\"=&gt;2, \" \"=&gt;1, \"c\"=&gt;1, \"t\"=&gt;1}\nend\n</code></pre>\n"}], "owner": {"reputation": 33, "user_id": 6274483, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/294428bfcc09d3176ad5f39507afd61e?s=128&d=identicon&r=PG&f=1", "display_name": "Emperor Norton", "link": "https://stackoverflow.com/users/6274483/emperor-norton"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 48, "favorite_count": 0, "accepted_answer_id": 43219438, "answer_count": 2, "score": -1, "last_activity_date": 1491349474, "creation_date": 1491346406, "last_edit_date": 1491348154, "question_id": 43219040, "link": "https://stackoverflow.com/questions/43219040/how-to-fix-incorrect-character-counting-code", "title": "How to fix incorrect character counting code", "body": "<p>I have a question about mysterious 'e' characters appearing in my <code>counts</code> hash. </p>\n\n<p>My initial approach was clunky and inelegant: </p>\n\n<pre><code>def letter_count(str)\n  counts = {}\n  words = str.split(\" \")\n  words.each do |word|\n    letters = word.split(\"\")\n    letters.each do |letter| \n      if counts.include?(letter)\n        counts[letter] += 1 \n      else \n        counts[letter] = 1 \n      end \n    end \n  end \n  counts\nend\n</code></pre>\n\n<p>This approach worked, but I wanted to make it a little more readable, so I abbreviated it to: </p>\n\n<pre><code>def letter_count(str)\n  counts = Hash.new(0)\n  str.split(\"\").each{|letter| counts[letter] += 1 unless letter == \"\"}\n  counts\nend\n</code></pre>\n\n<p>This is where I encountered the issue, and fixed it by using:</p>\n\n<pre><code>str.split(\"\").each{|letter| counts[letter] += 1 unless letter == \" \"} # added a space.\n</code></pre>\n\n<p>I don't understand why empty spaces were being represented by the letter 'e' or being counted at all.</p>\n"}, {"tags": ["ruby", "linux", "awk"], "comments": [{"owner": {"reputation": 64845, "user_id": 2088135, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/YB10Q.jpg?s=128&g=1", "display_name": "Tom Fenech", "link": "https://stackoverflow.com/users/2088135/tom-fenech"}, "edited": false, "score": 2, "creation_date": 1491344306, "post_id": 43218603, "comment_id": 73508512, "body": "Rather than posting a &quot;convert this script for me&quot; request, it would be better to show a sample of your input/output and explain what you&#39;re trying to do"}, {"owner": {"reputation": 49, "user_id": 7806725, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/046224a646b15d3882eb7c3f041e7d69?s=128&d=identicon&r=PG&f=1", "display_name": "alberto", "link": "https://stackoverflow.com/users/7806725/alberto"}, "reply_to_user": {"reputation": 64845, "user_id": 2088135, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/YB10Q.jpg?s=128&g=1", "display_name": "Tom Fenech", "link": "https://stackoverflow.com/users/2088135/tom-fenech"}, "edited": false, "score": 0, "creation_date": 1491344366, "post_id": 43218603, "comment_id": 73508543, "body": "only need to give a idea not need that convert the code"}, {"owner": {"reputation": 49, "user_id": 7806725, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/046224a646b15d3882eb7c3f041e7d69?s=128&d=identicon&r=PG&f=1", "display_name": "alberto", "link": "https://stackoverflow.com/users/7806725/alberto"}, "reply_to_user": {"reputation": 64845, "user_id": 2088135, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/YB10Q.jpg?s=128&g=1", "display_name": "Tom Fenech", "link": "https://stackoverflow.com/users/2088135/tom-fenech"}, "edited": false, "score": 0, "creation_date": 1491344375, "post_id": 43218603, "comment_id": 73508546, "body": "only need a method"}, {"owner": {"reputation": 49, "user_id": 7806725, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/046224a646b15d3882eb7c3f041e7d69?s=128&d=identicon&r=PG&f=1", "display_name": "alberto", "link": "https://stackoverflow.com/users/7806725/alberto"}, "reply_to_user": {"reputation": 64845, "user_id": 2088135, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/YB10Q.jpg?s=128&g=1", "display_name": "Tom Fenech", "link": "https://stackoverflow.com/users/2088135/tom-fenech"}, "edited": false, "score": 0, "creation_date": 1491344511, "post_id": 43218603, "comment_id": 73508601, "body": "only need to know if exist a similar options for index and substring in ruby Or  if this options are very differents"}, {"owner": {"reputation": 49, "user_id": 7806725, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/046224a646b15d3882eb7c3f041e7d69?s=128&d=identicon&r=PG&f=1", "display_name": "alberto", "link": "https://stackoverflow.com/users/7806725/alberto"}, "reply_to_user": {"reputation": 64845, "user_id": 2088135, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/YB10Q.jpg?s=128&g=1", "display_name": "Tom Fenech", "link": "https://stackoverflow.com/users/2088135/tom-fenech"}, "edited": false, "score": 0, "creation_date": 1491344750, "post_id": 43218603, "comment_id": 73508688, "body": "Basically I just need to know out if ruby has awk-like functionality for this example"}, {"owner": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "edited": false, "score": 1, "creation_date": 1491344809, "post_id": 43218603, "comment_id": 73508707, "body": "The answer is : yes."}, {"owner": {"reputation": 49, "user_id": 7806725, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/046224a646b15d3882eb7c3f041e7d69?s=128&d=identicon&r=PG&f=1", "display_name": "alberto", "link": "https://stackoverflow.com/users/7806725/alberto"}, "edited": false, "score": 0, "creation_date": 1491344854, "post_id": 43218603, "comment_id": 73508728, "body": "If you do not have these functionalities, I just want you to tell me"}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1491350974, "post_id": 43218603, "comment_id": 73510514, "body": "Your question is off-topic. See <a href=\"https://meta.stackoverflow.com/a/265834/128421\">meta.stackoverflow.com/a/265834/128421</a>."}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1491351493, "post_id": 43218603, "comment_id": 73510670, "body": "Please read &quot;<a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a>&quot; including the linked pages, &quot;<a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>&quot; and &quot;<a href=\"http://meta.stackoverflow.com/questions/261592\">How much research effort is expected of Stack Overflow users?</a>&quot;. Rather than add multiple comments you should think about the question prior to asking it, then write and ask the question once. It helps us when answering. Ruby is a general purpose language, <code>awk</code> is a string processing language, so Ruby is more full-featured than <code>awk</code>."}, {"owner": {"reputation": 896, "user_id": 520843, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/711a181409e23c300b82404544166deb?s=128&d=identicon&r=PG", "display_name": "grail", "link": "https://stackoverflow.com/users/520843/grail"}, "edited": false, "score": 1, "creation_date": 1491362794, "post_id": 43218603, "comment_id": 73513146, "body": "Why not go and look at the VERY well documented api for ruby and see for yourself.  In case your search engine is not working well :- <a href=\"http://www.ruby-doc.org/core\" rel=\"nofollow noreferrer\">ruby-doc.org/core</a>"}], "answers": [{"tags": [], "owner": {"reputation": 49, "user_id": 7806725, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/046224a646b15d3882eb7c3f041e7d69?s=128&d=identicon&r=PG&f=1", "display_name": "alberto", "link": "https://stackoverflow.com/users/7806725/alberto"}, "is_accepted": true, "score": 0, "last_activity_date": 1491435793, "last_edit_date": 1491435793, "creation_date": 1491346169, "answer_id": 43219005, "question_id": 43218603, "link": "https://stackoverflow.com/questions/43218603/its-possible-convert-this-code-to-ruby-using-index-and-substring-command-using-s/43219005#43219005", "title": "Its possible convert this code to ruby using index and substring command using similar sintax to awk?", "body": "<p>I solved it:</p>\n\n<pre><code>ruby -a -F'Name\": \"'   -ne 'puts $F[3].split(/\"/)[0]' sumacomando\n</code></pre>\n"}], "owner": {"reputation": 49, "user_id": 7806725, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/046224a646b15d3882eb7c3f041e7d69?s=128&d=identicon&r=PG&f=1", "display_name": "alberto", "link": "https://stackoverflow.com/users/7806725/alberto"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 53, "favorite_count": 0, "accepted_answer_id": 43219005, "answer_count": 1, "score": -2, "last_activity_date": 1491435793, "creation_date": 1491344146, "last_edit_date": 1491344780, "question_id": 43218603, "link": "https://stackoverflow.com/questions/43218603/its-possible-convert-this-code-to-ruby-using-index-and-substring-command-using-s", "title": "Its possible convert this code to ruby using index and substring command using similar sintax to awk?", "body": "<p>I do know if is possible generate a ruby code that use ane</p>\n\n<p>like this </p>\n\n<p>ruby -a -F'Name\": \"' -ne</p>\n\n<p>this is my awk code</p>\n\n<pre><code>     awk -v OFS='\"' -v   FS='Name\": \"'     '{ i2 = index($4, \"\\\"\"); print  \";\" substr($4, 0, i2) }'   sumacomando\n</code></pre>\n\n<p>I need to know if is possible using ruby one liner or ruby its limited for this task</p>\n\n<p>only need to know if exist a similar options for index and substring in ruby Or if this options are very differents</p>\n\n<p>Basically I just need to know out if ruby has awk-like functionality for this example</p>\n\n<p>Please help me </p>\n"}, {"tags": ["ruby", "parsing", "nokogiri", "ruby-on-rails-5"], "comments": [{"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 2, "creation_date": 1491346054, "post_id": 43218476, "comment_id": 73509149, "body": "Why isn&#39;t <code>&lt;inner&gt;</code> selected? Why are you locating the last <code>&lt;most_inner&gt;</code> node? Do you only want the immediate preceding sibling for <code>&lt;inner&gt;</code> or all others at that level? Your question doesn&#39;t show evidence of much effort. Please read &quot;<a href=\"http://meta.stackoverflow.com/questions/261592\">How much research effort is expected of Stack Overflow users?</a>&quot; and &quot;<a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>&quot;."}, {"owner": {"reputation": 7389, "user_id": 2235594, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/4MssP.jpg?s=128&g=1", "display_name": "davegson", "link": "https://stackoverflow.com/users/2235594/davegson"}, "edited": false, "score": 0, "creation_date": 1492696224, "post_id": 43218476, "comment_id": 74096256, "body": "inner includes the most_inner node, he wants to exclude that as well as I understood it"}, {"owner": {"reputation": 16802, "user_id": 1235929, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/9f460ae7deb6fa19034c810a53b9fbac?s=128&d=identicon&r=PG", "display_name": "Dave", "link": "https://stackoverflow.com/users/1235929/dave"}, "reply_to_user": {"reputation": 7389, "user_id": 2235594, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/4MssP.jpg?s=128&g=1", "display_name": "davegson", "link": "https://stackoverflow.com/users/2235594/davegson"}, "edited": false, "score": 0, "creation_date": 1492705564, "post_id": 43218476, "comment_id": 74103293, "body": "Hi @TheChamp, you are correct -- whatever the node in question is, I wish to find all preceding nodes that do not also contain that node."}, {"owner": {"reputation": 167912, "user_id": 240443, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/495d675e3bc42ed1dee469e2ce701f1b?s=128&d=identicon&r=PG", "display_name": "Amadan", "link": "https://stackoverflow.com/users/240443/amadan"}, "edited": false, "score": 0, "creation_date": 1493099420, "post_id": 43218476, "comment_id": 74254586, "body": "If <code>.abc</code> was actually <code>&lt;really_inner class=&quot;abc&quot;&gt;&lt;most_inner&gt;Howdy&lt;&#47;most_inner&gt;&lt;&#47;really_inner&gt;</code>, what do you expect in the answer? <code>most_inner</code>, <code>really_inner</code>, or both?"}, {"owner": {"reputation": 16802, "user_id": 1235929, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/9f460ae7deb6fa19034c810a53b9fbac?s=128&d=identicon&r=PG", "display_name": "Dave", "link": "https://stackoverflow.com/users/1235929/dave"}, "edited": false, "score": 0, "creation_date": 1493215183, "post_id": 43218476, "comment_id": 74320964, "body": "Is the entire document &#39;&lt;really_inner class=&quot;abc&quot;&gt;&lt;most_inner&gt;Howdy&lt;/most_inner&gt;&lt;/really_inner&gt;&#39; in your example?  If so there are no nodes that come before the node with class &quot;abc&quot;, so I would expect teh answer to be nothing.  If the document were &quot;&lt;a&gt;Stuff&lt;b&gt;hi&lt;/b&gt;&lt;/a&gt;&lt;really_inner class=&quot;abc&quot;&gt;&lt;most_inner&gt;Howdy&lt;/most_inner&gt;&lt;/really_inner&gt;&quot;, and dthe node in question were the one with class &quot;abc&quot;, I woudl expect the answer to be &quot;&lt;a&gt;Stuff&lt;b&gt;hi&lt;/b&gt;&lt;/a&gt;&quot;"}], "answers": [{"comments": [{"owner": {"reputation": 16802, "user_id": 1235929, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/9f460ae7deb6fa19034c810a53b9fbac?s=128&d=identicon&r=PG", "display_name": "Dave", "link": "https://stackoverflow.com/users/1235929/dave"}, "edited": false, "score": 0, "creation_date": 1492703354, "post_id": 43522622, "comment_id": 74101886, "body": "I was just using a node with class=&quot;def&quot; as an example -- the node in question may not have a class=&quot;def&quot;.  But your example wouldn&#39;t work anyway, right -- because it would pick out leaf nodes that occur after the node with class=&quot;def&quot;?  I know my example doesn&#39;t have any such nodes, but another document might."}, {"owner": {"reputation": 24213, "user_id": 390897, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/bb90a39b77596fcffbab96de88f0ee34?s=128&d=identicon&r=PG", "display_name": "fny", "link": "https://stackoverflow.com/users/390897/fny"}, "reply_to_user": {"reputation": 16802, "user_id": 1235929, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/9f460ae7deb6fa19034c810a53b9fbac?s=128&d=identicon&r=PG", "display_name": "Dave", "link": "https://stackoverflow.com/users/1235929/dave"}, "edited": false, "score": 0, "creation_date": 1492736361, "post_id": 43522622, "comment_id": 74116857, "body": "Ah, you&#39;re right! Wasn&#39;t quite clear about what you wanted. I&#39;ve updated the answer accordingly!"}, {"owner": {"reputation": 16802, "user_id": 1235929, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/9f460ae7deb6fa19034c810a53b9fbac?s=128&d=identicon&r=PG", "display_name": "Dave", "link": "https://stackoverflow.com/users/1235929/dave"}, "edited": false, "score": 0, "creation_date": 1493055905, "post_id": 43522622, "comment_id": 74238870, "body": "Hi, I&quot;m still not getting the desired results.  If I create a doc using &quot; doc = Nokogiri.XML(&#39;&lt;foo&gt;&lt;a /&gt;&lt;b class=&quot;def&quot; /&gt;&lt;c /&gt;&lt;foo&gt;&#39;, nil, &#39;EUC-JP&#39;) &quot;, running your code returns the &quot;&lt;c /&gt;&quot; node, which I don&#39;t want becuase it occurs after the node I&#39;m looking at.  I only want to return nodes that precede (are before) the one in quesiton."}, {"owner": {"reputation": 24213, "user_id": 390897, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/bb90a39b77596fcffbab96de88f0ee34?s=128&d=identicon&r=PG", "display_name": "fny", "link": "https://stackoverflow.com/users/390897/fny"}, "reply_to_user": {"reputation": 16802, "user_id": 1235929, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/9f460ae7deb6fa19034c810a53b9fbac?s=128&d=identicon&r=PG", "display_name": "Dave", "link": "https://stackoverflow.com/users/1235929/dave"}, "edited": false, "score": 0, "creation_date": 1493098692, "post_id": 43522622, "comment_id": 74254235, "body": "I misunderstood a second time! You just need to loop over node set until you reach your target node. Answer is updated."}, {"owner": {"reputation": 16802, "user_id": 1235929, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/9f460ae7deb6fa19034c810a53b9fbac?s=128&d=identicon&r=PG", "display_name": "Dave", "link": "https://stackoverflow.com/users/1235929/dave"}, "edited": false, "score": 0, "creation_date": 1493147391, "post_id": 43522622, "comment_id": 74286991, "body": "I appreciate your reifning your answer.  THe problem is for some reason you are only considering leaf nodes.  That is not a requirement of mine.  I want to find all nodes before my node in question that don&#39;t also contain that node.  So, this document, &#39;doc = Nokogiri.XML(&#39;&lt;foo&gt;&lt;a&gt;This is &lt;b&gt;Bold&lt;/b&gt; text&lt;/a&gt;&lt;b class=&quot;def&quot; /&gt;&lt;c /&gt;&lt;foo&gt;&#39;, nil, &#39;EUC-JP&#39;)&#39; doesn&#39;t include the &quot;&lt;a&gt;&quot; element using your logic -- probably because the &quot;&lt;a&gt;&quot; node has a &quot;&lt;b&gt;&quot; within it."}], "tags": [], "owner": {"reputation": 24213, "user_id": 390897, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/bb90a39b77596fcffbab96de88f0ee34?s=128&d=identicon&r=PG", "display_name": "fny", "link": "https://stackoverflow.com/users/390897/fny"}, "is_accepted": false, "score": 5, "last_activity_date": 1493098617, "last_edit_date": 1493098617, "creation_date": 1492699046, "answer_id": 43522622, "question_id": 43218476, "link": "https://stackoverflow.com/questions/43218476/in-nokogiri-how-do-i-find-all-the-nodes-that-come-before-a-certain-node-in-my-d/43522622#43522622", "title": "In Nokogiri, how do I find all the nodes that come before a certain node in my document?", "body": "<p>You just need to iterate over the leaf nodes until you reach the target node.</p>\n\n<pre><code># Node to exclude\nnode = doc.search('//*[contains(@class, \"def\")]').first\npreceding_nodes = []\n\n# Find all leaf nodes\nleaf_nodes = doc.xpath(\"//*[not(child::*)]\")\n\nleaf_nodes.each do |leaf|\n  if leaf == node\n    break\n  else\n    preceding_nodes.push(leaf)\n  end\nend\n\npreceding_nodes # =&gt; Contains all preceding leaf nodes\n</code></pre>\n"}], "owner": {"reputation": 16802, "user_id": 1235929, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/9f460ae7deb6fa19034c810a53b9fbac?s=128&d=identicon&r=PG", "display_name": "Dave", "link": "https://stackoverflow.com/users/1235929/dave"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 532, "favorite_count": 0, "answer_count": 1, "score": 11, "last_activity_date": 1588590679, "creation_date": 1491343456, "last_edit_date": 1492695875, "question_id": 43218476, "link": "https://stackoverflow.com/questions/43218476/in-nokogiri-how-do-i-find-all-the-nodes-that-come-before-a-certain-node-in-my-d", "title": "In Nokogiri, how do I find all the nodes that come before a certain node in my document?", "body": "<p>Using Rails 5, Ruby 2.4.  If I have located a node using Nokogiri parsing, how would I find all the nodes that occur before my found node that do not also include that found node?  That is, let's say my document is</p>\n\n<pre><code>&lt;outer&gt;\n    &lt;p&gt;Hello&lt;/p&gt;\n    &lt;inner&gt;\n        &lt;most_inner class=\"abc\"&gt;Howdy&lt;/most_inner&gt;\n        &lt;most_inner class=\"def\"&gt;Next&lt;/most_inner&gt;\n    &lt;/inner&gt;\n&lt;/outer&gt;\n</code></pre>\n\n<p>and I run a query like</p>\n\n<pre><code>node = doc.search('//*[contains(@class, \"def\")]').first\n</code></pre>\n\n<p>How would I locate all the preceding nodes (that don't include the one I just identified)?  The nodes I would expect would be</p>\n\n<pre><code>&lt;p&gt;Hello&lt;/p&gt;\n&lt;most_inner&gt;Howdy&lt;/most_inner&gt;\n</code></pre>\n"}, {"tags": ["ruby", "sinatra"], "comments": [{"owner": {"reputation": 91121, "user_id": 179125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5594142dcc49a24b1902ec8059181f8d?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan Running", "link": "https://stackoverflow.com/users/179125/jordan-running"}, "edited": false, "score": 1, "creation_date": 1491341345, "post_id": 43217924, "comment_id": 73507265, "body": "Do you actually have <code>null</code> in your code, or did you just redact those values when you wrote your question? If the latter, you should make a note of that in the question (and perhaps use something more obvious than <code>null</code>, e.g. <code>######</code>)."}], "answers": [{"comments": [{"owner": {"reputation": 1323, "user_id": 1800508, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/f50c0dc2a98227d029183f22cfd73570?s=128&d=identicon&r=PG&f=1", "display_name": "Quesofat", "link": "https://stackoverflow.com/users/1800508/quesofat"}, "edited": false, "score": 0, "creation_date": 1491342858, "post_id": 43218193, "comment_id": 73507907, "body": "This renders invalid headers. The headers worked before this. If I turn <code>headers =&gt; headers</code> into <code>:headers =&gt; headers</code> it works and we are back to invalid value again. Thank you for any additional help"}, {"owner": {"reputation": 91121, "user_id": 179125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5594142dcc49a24b1902ec8059181f8d?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan Running", "link": "https://stackoverflow.com/users/179125/jordan-running"}, "reply_to_user": {"reputation": 1323, "user_id": 1800508, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/f50c0dc2a98227d029183f22cfd73570?s=128&d=identicon&r=PG&f=1", "display_name": "Quesofat", "link": "https://stackoverflow.com/users/1800508/quesofat"}, "edited": false, "score": 1, "creation_date": 1491343231, "post_id": 43218193, "comment_id": 73508056, "body": "I don&#39;t know what you mean by &quot;invalid headers,&quot; but my code doesn&#39;t say <code>headers =&gt; headers</code>. It says <code>headers: headers</code>, which in all versions of Ruby since 1.9.3 is equivalent to <code>:headers =&gt; headers</code>."}, {"owner": {"reputation": 1323, "user_id": 1800508, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/f50c0dc2a98227d029183f22cfd73570?s=128&d=identicon&r=PG&f=1", "display_name": "Quesofat", "link": "https://stackoverflow.com/users/1800508/quesofat"}, "edited": false, "score": 0, "creation_date": 1491343426, "post_id": 43218193, "comment_id": 73508149, "body": "The API responds with Malformed JSON in request body. Go easy on me lol. First ruby app. I&#39;m a node.js guy."}, {"owner": {"reputation": 91121, "user_id": 179125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5594142dcc49a24b1902ec8059181f8d?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan Running", "link": "https://stackoverflow.com/users/179125/jordan-running"}, "reply_to_user": {"reputation": 1323, "user_id": 1800508, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/f50c0dc2a98227d029183f22cfd73570?s=128&d=identicon&r=PG&f=1", "display_name": "Quesofat", "link": "https://stackoverflow.com/users/1800508/quesofat"}, "edited": false, "score": 0, "creation_date": 1491343911, "post_id": 43218193, "comment_id": 73508342, "body": "If you add <code>debug_output: $stdout</code> (or <code>:debug_output =&gt; $stdout</code>) to the arguments, what does it print?"}, {"owner": {"reputation": 1323, "user_id": 1800508, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/f50c0dc2a98227d029183f22cfd73570?s=128&d=identicon&r=PG&f=1", "display_name": "Quesofat", "link": "https://stackoverflow.com/users/1800508/quesofat"}, "edited": false, "score": 0, "creation_date": 1491348390, "post_id": 43218193, "comment_id": 73509819, "body": "<code>starting SSL for api.cloudflare.com:443... SSL established &lt;- &quot;PATCH &#47;client&#47;v4&#47;zones&#47;&#47;settings&#47;development_mode HTTP&#47;1.1\\r\\nX-Auth-Email:\\r\\nX-Auth-Key: a\\r\\nContent-Type: application&#47;json\\r\\nConnection: close\\r\\nHost: api.cloudflare.com\\r\\nContent-Length: 9\\r\\n\\r\\n&quot; &lt;- &quot;value=off&quot;1</code>"}, {"owner": {"reputation": 91121, "user_id": 179125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5594142dcc49a24b1902ec8059181f8d?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan Running", "link": "https://stackoverflow.com/users/179125/jordan-running"}, "reply_to_user": {"reputation": 1323, "user_id": 1800508, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/f50c0dc2a98227d029183f22cfd73570?s=128&d=identicon&r=PG&f=1", "display_name": "Quesofat", "link": "https://stackoverflow.com/users/1800508/quesofat"}, "edited": false, "score": 0, "creation_date": 1491349341, "post_id": 43218193, "comment_id": 73510078, "body": "Ah. I had thought HTTParty would automatically JSON-encode the <code>:body</code>, but it doesn&#39;t. <code>to_json</code> should fix that; I&#39;ve updated my answer."}], "tags": [], "owner": {"reputation": 91121, "user_id": 179125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5594142dcc49a24b1902ec8059181f8d?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan Running", "link": "https://stackoverflow.com/users/179125/jordan-running"}, "is_accepted": true, "score": 0, "last_activity_date": 1491349305, "last_edit_date": 1491349305, "creation_date": 1491342134, "answer_id": 43218193, "question_id": 43217924, "link": "https://stackoverflow.com/questions/43217924/httparty-patch-sinatra-api-returns-invalid-value/43218193#43218193", "title": "HTTParty Patch Sinatra API returns &quot;invalid value&quot;", "body": "<p>Your \"Route\" code isn't valid Ruby code, so I'm not sure how it's running at all. In particular, this line has unclosed quotation marks:</p>\n\n<pre><code>options = '{value: 'off'}'\n</code></pre>\n\n<p>I'm not sure what you were intending to do here\u2014if you were trying to make a Ruby Hash or a JSON string\u2014but what you want to do is this:</p>\n\n<pre><code>headers = {\n  \"X-Auth-Email\" =&gt; \"####\",\n  \"X-Auth-Key\"   =&gt; \"####\",\n  \"Content-Type\" =&gt; \"application/json\"\n}\n\noptions = { value: \"off\" }\n\n@result = HTTParty.patch(\n  \"https://api.cloudflare.com/client/v4/zones/####/settings/development_mode\",\n  headers: headers,\n  body: options.to_json\n)\n</code></pre>\n\n<p>Note that <code>options</code> is a Hash, and it's given to <code>HTTParty.patch</code> as the <code>:body</code> option (not <code>:data</code>).</p>\n"}], "owner": {"reputation": 1323, "user_id": 1800508, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/f50c0dc2a98227d029183f22cfd73570?s=128&d=identicon&r=PG&f=1", "display_name": "Quesofat", "link": "https://stackoverflow.com/users/1800508/quesofat"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 141, "favorite_count": 0, "accepted_answer_id": 43218193, "answer_count": 1, "score": 0, "last_activity_date": 1491349305, "creation_date": 1491340972, "last_edit_date": 1491341395, "question_id": 43217924, "link": "https://stackoverflow.com/questions/43217924/httparty-patch-sinatra-api-returns-invalid-value", "title": "HTTParty Patch Sinatra API returns &quot;invalid value&quot;", "body": "<p>The following route works as far as reaching out to the api. </p>\n\n<p>The api returns \"invalid value\". I'd assume this is a data type issue. \nAPI docs: </p>\n\n<pre><code>value\n  string    \nValue of the zone setting\n  \"off\"\ndefault value: off\nvalid values: on, off\n</code></pre>\n\n<p>API CURL example: </p>\n\n<pre><code>curl -X PATCH \"https://api.cloudflare.com/client/v4/zones/023e105f4ecef8ad9ca31a8372d0c353/settings/development_mode\" \\\n     -H \"X-Auth-Email: user@example.com\" \\\n     -H \"X-Auth-Key: c2547eb745079dac9320b638f5e225cf483cc5cfdda41\" \\\n     -H \"Content-Type: application/json\" \\\n     --data '{\"value\":\"off\"}'\n</code></pre>\n\n<p>Route:</p>\n\n<pre><code>    get '/devModeOff' do\n          headers = {\n            \"X-Auth-Email\" =&gt; '####',\n            \"X-Auth-Key\" =&gt;   '####',\n            \"Content-Type\" =&gt; 'application/json'\n          }\n   options = '{value: 'off'}'\n\n         @result = HTTParty.patch(\n          'https://api.cloudflare.com/client/v4/zones/####/settings/development_mode',\n          :headers =&gt; headers,\n          :data =&gt; options\n          )\n          puts @result\n\n          redirect to ('/')\n        end\n</code></pre>\n\n<p>Being very new to ruby, how would I fix this?</p>\n"}, {"tags": ["ruby", "automated-tests", "integration-testing"], "answers": [{"tags": [], "owner": {"reputation": 5382, "user_id": 7671538, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3506350bc4dd02281ad7f99e8e84715c?s=128&d=identicon&r=PG&f=1", "display_name": "gwcodes", "link": "https://stackoverflow.com/users/7671538/gwcodes"}, "is_accepted": false, "score": 0, "last_activity_date": 1491339876, "creation_date": 1491339876, "answer_id": 43217683, "question_id": 43217437, "link": "https://stackoverflow.com/questions/43217437/feature-toggling-for-automated-tests-in-ruby-web-app/43217683#43217683", "title": "Feature Toggling for automated tests in Ruby web app", "body": "<p>If it's a third party service/tool you're looking for, you could try <a href=\"https://launchdarkly.com/\" rel=\"nofollow noreferrer\">LaunchDarkly</a>.</p>\n\n<p>It wouldn't be very hard to roll your own solution though: you could create a new <code>Toggle</code> model, where each record represents one feature toggle with a boolean on/off. If you're worried about hitting the database too often, you could cache the entire collection at startup; and then add code to update the cache when toggles get updated.</p>\n"}], "owner": {"reputation": 95, "user_id": 3259647, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/d0c76b1988bdb91f97a845a2d1224ad1?s=128&d=identicon&r=PG&f=1", "display_name": "user3259647", "link": "https://stackoverflow.com/users/3259647/user3259647"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 32, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1491339876, "creation_date": 1491338957, "question_id": 43217437, "link": "https://stackoverflow.com/questions/43217437/feature-toggling-for-automated-tests-in-ruby-web-app", "title": "Feature Toggling for automated tests in Ruby web app", "body": "<p>We are working to build an integration test framework at my current company - and one of the challenges I have yet to answer is how do we handle the need to toggle features on and off without completely restarting the server in our test environment.</p>\n\n<p>So - that is my question to the community - has anyone recently conquered this issue with a third party tool they might enlighten me upon, or any other feedback that may be given would also be awesome.</p>\n\n<p>Thanks!</p>\n"}, {"tags": ["ruby", "model-view-controller", "ruby-on-rails-5"], "comments": [{"owner": {"reputation": 4538, "user_id": 809830, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bdd9801d2717096282258b192edc7793?s=128&d=identicon&r=PG", "display_name": "Alex Kojin", "link": "https://stackoverflow.com/users/809830/alex-kojin"}, "edited": false, "score": 0, "creation_date": 1491338239, "post_id": 43217122, "comment_id": 73505675, "body": "Check the name of pages controller, maybe it&#39;s PageController.."}, {"owner": {"reputation": 32451, "user_id": 2516474, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a2179a340c0e84edc285d432211145d?s=128&d=identicon&r=PG", "display_name": "SteveTurczyn", "link": "https://stackoverflow.com/users/2516474/steveturczyn"}, "edited": false, "score": 1, "creation_date": 1491339876, "post_id": 43217122, "comment_id": 73506564, "body": "Have you got a file <code>app&#47;controllers&#47;pages_controller.rb</code> and the first line is <code>PagesController &lt; ApplicationController</code> ?  If you don&#39;t, that&#39;s your problem."}, {"owner": {"reputation": 19, "user_id": 6490492, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh4.googleusercontent.com/-dAq1ZwgGpxk/AAAAAAAAAAI/AAAAAAAABQw/8AbP5UYYi8A/photo.jpg?sz=128", "display_name": "Hodari Toure&#39;", "link": "https://stackoverflow.com/users/6490492/hodari-toure"}, "edited": false, "score": 0, "creation_date": 1491340727, "post_id": 43217122, "comment_id": 73506967, "body": "Sorry, for not including this, my pages_controller.rb     class PagesController &lt; ApplicationController  \tdef home \tend          def about \tend  \tdef help \tend \t \t end"}, {"owner": {"reputation": 576, "user_id": 2361564, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/tPogy.png?s=128&g=1", "display_name": "Mark Davies", "link": "https://stackoverflow.com/users/2361564/mark-davies"}, "edited": false, "score": 0, "creation_date": 1505472673, "post_id": 43217122, "comment_id": 79438878, "body": "Your routes looks fine.  Check that the controller is in the controllers folder and not a sub folder.  And hi to Steve, hope you&#39;re well."}], "answers": [{"tags": [], "owner": {"reputation": 19, "user_id": 6490492, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh4.googleusercontent.com/-dAq1ZwgGpxk/AAAAAAAAAAI/AAAAAAAABQw/8AbP5UYYi8A/photo.jpg?sz=128", "display_name": "Hodari Toure&#39;", "link": "https://stackoverflow.com/users/6490492/hodari-toure"}, "is_accepted": true, "score": 0, "last_activity_date": 1505763647, "creation_date": 1505763647, "answer_id": 46286997, "question_id": 43217122, "link": "https://stackoverflow.com/questions/43217122/rails-5-error-actioncontrollerroutingerror-uninitialized-constant-pagescontr/46286997#46286997", "title": "Rails 5 error: ActionController::RoutingError (uninitialized constant PagesController):", "body": "<p>the problem was i didn't declare the page constant in a model. \nThank you all for your responses. </p>\n"}], "owner": {"reputation": 19, "user_id": 6490492, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh4.googleusercontent.com/-dAq1ZwgGpxk/AAAAAAAAAAI/AAAAAAAABQw/8AbP5UYYi8A/photo.jpg?sz=128", "display_name": "Hodari Toure&#39;", "link": "https://stackoverflow.com/users/6490492/hodari-toure"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 688, "favorite_count": 0, "accepted_answer_id": 46286997, "answer_count": 1, "score": 0, "last_activity_date": 1505763647, "creation_date": 1491337787, "last_edit_date": 1491340597, "question_id": 43217122, "link": "https://stackoverflow.com/questions/43217122/rails-5-error-actioncontrollerroutingerror-uninitialized-constant-pagescontr", "title": "Rails 5 error: ActionController::RoutingError (uninitialized constant PagesController):", "body": "<p>I am a newbie and I am trying to learn Rails and I am taking a online tutorial and I am stuck early. The instructor is not much help. My paths/routes look ok to me and my naming convention seems to be ok. I have looked at others on here with similar issues and I can't seem to understand whats going on. Any guidance would be helpful.</p>\n\n<p><a href=\"https://i.stack.imgur.com/2yJeD.png\" rel=\"nofollow noreferrer\">my routs.rb file</a></p>\n\n<p>Thank You.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "cron"], "comments": [{"owner": {"reputation": 5130, "user_id": 1443478, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/4J9cr.jpg?s=128&g=1", "display_name": "Brennan", "link": "https://stackoverflow.com/users/1443478/brennan"}, "edited": false, "score": 0, "creation_date": 1491337419, "post_id": 43216892, "comment_id": 73505253, "body": "The permissions of your script are incorrect. What is the output of <code>ls -l &#47;Users&#47;cameronbass&#47;Desktop&#47;Play&#47;Ruby&#47;hello_world.rb</code>?"}, {"owner": {"reputation": 5130, "user_id": 1443478, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/4J9cr.jpg?s=128&g=1", "display_name": "Brennan", "link": "https://stackoverflow.com/users/1443478/brennan"}, "edited": false, "score": 1, "creation_date": 1491337700, "post_id": 43216892, "comment_id": 73505415, "body": "Even so, it&#39;s important to understand that you will not see any output from this. Cron is going to run your script in another session, and its output will not be visible to you"}, {"owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "edited": false, "score": 0, "creation_date": 1491339618, "post_id": 43216892, "comment_id": 73506421, "body": "<code>puts</code> not <code>Puts</code>. The latter will raise <code>NameError: uninitialized constant Puts</code>."}, {"owner": {"reputation": 47898, "user_id": 966023, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/917fcb4327159076f752c0c3c3fddfbb?s=128&d=identicon&r=PG", "display_name": "pguardiario", "link": "https://stackoverflow.com/users/966023/pguardiario"}, "edited": false, "score": 1, "creation_date": 1491349897, "post_id": 43216892, "comment_id": 73510218, "body": "To see it in your terminal you would have to do something like `wall &quot;Good Morning, Cam&quot;`"}], "answers": [{"comments": [{"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1491436029, "post_id": 43217025, "comment_id": 73556799, "body": "While this will fix the permission problem it won&#39;t fix the problem of the output not appearing on the user&#39;s console."}], "tags": [], "owner": {"reputation": 845, "user_id": 4535298, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FBmxp.jpg?s=128&g=1", "display_name": "Vasili", "link": "https://stackoverflow.com/users/4535298/vasili"}, "is_accepted": true, "score": 0, "last_activity_date": 1491435967, "last_edit_date": 1491435967, "creation_date": 1491337452, "answer_id": 43217025, "question_id": 43216892, "link": "https://stackoverflow.com/questions/43216892/how-to-print-good-morning-to-the-console-at-9am-every-morning/43217025#43217025", "title": "How to print &quot;Good Morning&quot; to the console at 9am every morning", "body": "<p>You're trying to run a script without permissions to execute it. If crontab runs this as <code>cameronbass</code>, then just do the following:</p>\n\n<pre><code>cd /Users/cameronbass/Desktop/Play/Ruby/\nchown cameronbass hello_world.rb # set cameronbass as an owner\nchmod 700 hello_world.rb # give read, write and execute permissions to owner\n</code></pre>\n\n<p>and try again.</p>\n"}], "owner": {"reputation": 6503, "user_id": 5650878, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/xh7BI.png?s=128&g=1", "display_name": "Bitwise", "link": "https://stackoverflow.com/users/5650878/bitwise"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 119, "favorite_count": 0, "accepted_answer_id": 43217025, "answer_count": 1, "score": 1, "last_activity_date": 1491436196, "creation_date": 1491336985, "last_edit_date": 1491436196, "question_id": 43216892, "link": "https://stackoverflow.com/questions/43216892/how-to-print-good-morning-to-the-console-at-9am-every-morning", "title": "How to print &quot;Good Morning&quot; to the console at 9am every morning", "body": "<p>I want to write a program that runs every morning at 9 AM using crontab that will print out the message \"Good Morning, Cam\".</p>\n\n<p>Here is what I'm currently trying:</p>\n\n<p>Crontab:</p>\n\n<pre><code>5 * * * * /Users/cameronbass/Desktop/Play/Ruby/hello_world.rb\n</code></pre>\n\n<p>Program:</p>\n\n<pre><code>Puts \"Good Morning, Cam\"\n</code></pre>\n\n<p>Error message from cron:</p>\n\n<pre><code>/bin/sh: /Users/cameronbass/Desktop/Play/Ruby/hello_world.rb: Permission denied\n</code></pre>\n\n<p>Is this possible with Ruby?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "devise"], "answers": [{"comments": [{"owner": {"reputation": 854, "user_id": 4696152, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/ce4a2a4814cedafd095f3516a9f9cfe4?s=128&d=identicon&r=PG&f=1", "display_name": "Zack Herbert", "link": "https://stackoverflow.com/users/4696152/zack-herbert"}, "edited": false, "score": 0, "creation_date": 1491495862, "post_id": 43216824, "comment_id": 73590133, "body": "I appreciate your help, this ended up not working for me. I ended up posting the solution that I found"}], "tags": [], "owner": {"reputation": 28612, "user_id": 5025116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7WdYi.jpg?s=128&g=1", "display_name": "Sebastian Palma", "link": "https://stackoverflow.com/users/5025116/sebastian-palma"}, "is_accepted": false, "score": 2, "last_activity_date": 1491337094, "last_edit_date": 1491337094, "creation_date": 1491336776, "answer_id": 43216824, "question_id": 43216712, "link": "https://stackoverflow.com/questions/43216712/require-password-only-when-changing-password-devise-registration/43216824#43216824", "title": "Require password only when changing password devise registration", "body": "<p>What you can do is to validate at the time that the user do the update to its account, through the params <code>params[:user][:password]</code> and <code>params[:user][:password_confirmation]</code>:</p>\n\n<p>This way if there are no <code>password</code> nor <code>password_confirmation</code> then use the <code>update_without_password</code> method passing the <code>user_params</code>, the other way do it just using the <code>update_attributes</code> method</p>\n\n<pre><code>  def update\n    ...\n    if params[:user][:password].blank? &amp;&amp; params[:user][:password_confirmation].blank?\n      if @user.update_without_password(user_params)\n        flash[:notice] = 'User updated successfully'\n        redirect_to some_path\n      else\n        render :edit\n      end\n    else\n      if @user.update_attributes(user_params)\n        # login before update passing the current user\n        sign_in(User.find(current_user.id), :bypass =&gt; true) \n        flash[:notice] = 'User updated successfully'\n        redirect_to some_path\n      else\n        render :edit\n      end\n    end\n    ...\n  end\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 854, "user_id": 4696152, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/ce4a2a4814cedafd095f3516a9f9cfe4?s=128&d=identicon&r=PG&f=1", "display_name": "Zack Herbert", "link": "https://stackoverflow.com/users/4696152/zack-herbert"}, "is_accepted": true, "score": 4, "last_activity_date": 1491495783, "creation_date": 1491495783, "answer_id": 43260708, "question_id": 43216712, "link": "https://stackoverflow.com/questions/43216712/require-password-only-when-changing-password-devise-registration/43260708#43260708", "title": "Require password only when changing password devise registration", "body": "<p>So I've been digging on trying to solve this I have found the solution.</p>\n\n<p>In my model (user.rb) I added <code>:validatable</code> to the following snippet of code:</p>\n\n<pre><code>  devise :omniauthable, :database_authenticatable, :registerable, :recoverable, :rememberable, :validatable,\n     :confirmable, :trackable, reset_password_keys:[:email, :company_id],\n     request_keys: [:host, :params], omniauth_providers: [:auth0]\n</code></pre>\n\n<p>Then in my registration controller, I added the following:</p>\n\n<pre><code>def update_resource(resource, params)\n  if !params[:password].blank?\n    resource.password = params[:password]\n    resource.password_confirmation = params[:password_confirmation]\n  end\n\n  resource.update_without_password(params)\nend\n</code></pre>\n\n<p>And finally in my application controller, I added <code>:password_confirmation</code> to the following snippet:</p>\n\n<pre><code>devise_parameter_sanitizer.permit(:account_update) do |u|\n  u.permit(:first_name, :last_name, :email, :password, :password_confirmation, :phone_number, :receive_emails,\n           location_attributes: [:id, :street, :city, :state, :zip, :country])\nend\n</code></pre>\n\n<p>With this combination, once the form gets submitted it will fall into the <code>update_resource</code> block that I have overwritten. It will check to make sure that <code>resource.password</code> and <code>password_confirmation</code> are the same. On top of that now that <code>current_password</code> is out of the equation, you no longer have to enter your password everytime to save changes.</p>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 3365879, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/709e4a5945f7c7e53b2b9154044ff986?s=128&d=identicon&r=PG&f=1", "display_name": "Tteurs", "link": "https://stackoverflow.com/users/3365879/tteurs"}, "is_accepted": false, "score": 0, "last_activity_date": 1591211777, "creation_date": 1591211777, "answer_id": 62180939, "question_id": 43216712, "link": "https://stackoverflow.com/questions/43216712/require-password-only-when-changing-password-devise-registration/62180939#62180939", "title": "Require password only when changing password devise registration", "body": "<p>Create a registration controller in app/controllers/registrations_controller.rb</p>\n\n<pre><code>class RegistrationsController &lt; Devise::RegistrationsController\n\n  protected\n\n  def update_resource(resource, params)\n    # Require current password if user is trying to change password.\n    return super if params[\"password\"]&amp;.present?\n\n    # Allows user to update registration information without password.\n    resource.update_without_password(params.except(\"current_password\"))\n  end\nend\n\n</code></pre>\n"}], "owner": {"reputation": 854, "user_id": 4696152, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/ce4a2a4814cedafd095f3516a9f9cfe4?s=128&d=identicon&r=PG&f=1", "display_name": "Zack Herbert", "link": "https://stackoverflow.com/users/4696152/zack-herbert"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 698, "favorite_count": 0, "accepted_answer_id": 43260708, "answer_count": 3, "score": 4, "last_activity_date": 1591211777, "creation_date": 1491336391, "last_edit_date": 1491336721, "question_id": 43216712, "link": "https://stackoverflow.com/questions/43216712/require-password-only-when-changing-password-devise-registration", "title": "Require password only when changing password devise registration", "body": "<p>I have a registration/edit form that is rendered through a <code>Devise::RegistrationsController</code> within my application. The way it works now you must provide your current password when making any updates to the form. They way I want it to work is that the <code>current_password</code>is only required when you are updating the <code>password</code> field... or you must repeat the \"new_password\" as a means of confirmation. I have done some reading on the Devise Wiki, mainly the following links and they don't seem to list a solution for this. If anyone has some insight on how this might be achieved I would appreciate it.</p>\n\n<p><a href=\"https://github.com/plataformatec/devise/wiki/How-To:-Allow-users-to-edit-their-password\" rel=\"nofollow noreferrer\">https://github.com/plataformatec/devise/wiki/How-To:-Allow-users-to-edit-their-password</a></p>\n\n<p><a href=\"https://github.com/plataformatec/devise/wiki/How-To:-Allow-users-to-edit-their-account-without-providing-a-password\" rel=\"nofollow noreferrer\">https://github.com/plataformatec/devise/wiki/How-To:-Allow-users-to-edit-their-account-without-providing-a-password</a></p>\n"}, {"tags": ["ruby", "file", "split"], "comments": [{"owner": {"reputation": 70793, "user_id": 28128, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/4e974a514f0764fdfe99a8915f192002?s=128&d=identicon&r=PG", "display_name": "David Grayson", "link": "https://stackoverflow.com/users/28128/david-grayson"}, "edited": false, "score": 0, "creation_date": 1491336106, "post_id": 43216556, "comment_id": 73504544, "body": "Your program has no lines that output anything so I&#39;m not sure what you would expect.  Please give a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> and a better explanation of the problem."}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1491336670, "post_id": 43216556, "comment_id": 73504832, "body": "You are reading a comma-separated-value (CSV) file. Use the existing <a href=\"https://ruby-doc.org/stdlib-2.4.1/libdoc/csv/rdoc/CSV.html\" rel=\"nofollow noreferrer\">CSV</a> class. CSV files look simple but there are a number of special cases that a simple, naive, <code>split</code> won&#39;t handle."}], "answers": [{"tags": [], "owner": {"reputation": 4538, "user_id": 809830, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bdd9801d2717096282258b192edc7793?s=128&d=identicon&r=PG", "display_name": "Alex Kojin", "link": "https://stackoverflow.com/users/809830/alex-kojin"}, "is_accepted": false, "score": 2, "last_activity_date": 1491336272, "creation_date": 1491336272, "answer_id": 43216674, "question_id": 43216556, "link": "https://stackoverflow.com/questions/43216556/how-to-split-line-read-from-text-file/43216674#43216674", "title": "How to split line read from text file", "body": "<p>You should save result of splitting, as example save it to variable:</p>\n\n<pre><code>result = []\nf = File.open(\"textfile.txt\", \"r\")\nf.each_line {|line| result &lt;&lt; line.split(\",\") }\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 3032, "user_id": 4695439, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/J87l8.png?s=128&g=1", "display_name": "Jim U", "link": "https://stackoverflow.com/users/4695439/jim-u"}, "is_accepted": false, "score": 0, "last_activity_date": 1491342792, "last_edit_date": 1491342792, "creation_date": 1491336403, "answer_id": 43216717, "question_id": 43216556, "link": "https://stackoverflow.com/questions/43216556/how-to-split-line-read-from-text-file/43216717#43216717", "title": "How to split line read from text file", "body": "<p>Outputs last name field from comma-delimited-file:</p>\n\n<p><strong>Program</strong> </p>\n\n<pre><code>f.each_line do |line|\n  fields = line.split(\",\")\n  puts fields[1]\nend\n</code></pre>\n\n<p><strong>Input</strong> (textfile.txt)</p>\n\n<pre><code>Bob,Daniels,40,50,60,70,80\nJohn,Smith,40,50,60,70,80\n</code></pre>\n\n<p><strong>Output</strong></p>\n\n<pre><code>Daniels\nSmith\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "is_accepted": false, "score": 1, "last_activity_date": 1491337883, "last_edit_date": 1491337883, "creation_date": 1491336951, "answer_id": 43216884, "question_id": 43216556, "link": "https://stackoverflow.com/questions/43216556/how-to-split-line-read-from-text-file/43216884#43216884", "title": "How to split line read from text file", "body": "<p>You're reading a CSV (\"comma-separated-value\") file, so use the existing <a href=\"https://ruby-doc.org/stdlib-2.4.1/libdoc/csv/rdoc/CSV.html\" rel=\"nofollow noreferrer\">CSV</a> class. CSV files have a lot of special-case situations that a naive <code>split</code> won't handle. </p>\n\n<p>The documentation has a number of different examples for how to read or write from/to files or strings.</p>\n\n<p>For example, from <a href=\"https://ruby-doc.org/stdlib-2.4.1/libdoc/csv/rdoc/CSV.html#class-CSV-label-A+Line+at+a+Time\" rel=\"nofollow noreferrer\">the documentation</a> for reading a line at a time from a file:</p>\n\n<blockquote>\n<pre><code>CSV.foreach(\"path/to/file.csv\") do |row|\n  # use row here...\nend\n</code></pre>\n</blockquote>\n\n<p>In your code the problem is:</p>\n\n<pre><code>f.each_line do |line|\n  line.split(\",\")\nend\n</code></pre>\n\n<p><code>each_line</code> iterates over the file being read using an <code>each</code> block.</p>\n\n<pre><code>line.split(\",\")\n</code></pre>\n\n<p>splits the value but doesn't do anything with it, so the result is thrown away. You could assign the result to a variable or iterate over the resulting array:</p>\n\n<pre><code>foo = line.split(\",\")\n# do something with foo\n</code></pre>\n\n<p>or:</p>\n\n<pre><code>line.split(\",\").each do |i|\n  # do something with i\nend\n</code></pre>\n\n<p>But again, the CSV specification is not simple so think twice before relying on <code>split</code>. For example, the following line is valid CSV:</p>\n\n<pre><code>this,\"is,some,CSV\",data\n</code></pre>\n\n<p>and should be parsed as:</p>\n\n<pre><code>[\"this\", \"is,some,CSV\", \"data\"]\n</code></pre>\n\n<p>but <code>split(\",\")</code> will wrongly generate:</p>\n\n<pre><code>[\"this\", \"\\\"is\", \"some\", \"CSV\\\"\", \"data\"]\n</code></pre>\n\n<p>and, because it's wrong, there'll be a lot of extra cleanup needed.</p>\n\n<p><code>split</code> will seem safe on a simple set of comma-separated values, leading you to think it's safe for everything until you run into the above type of situation.</p>\n"}], "owner": {"reputation": 11, "user_id": 7650455, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/979273cc7f8f6f96dadacd042fec6442?s=128&d=identicon&r=PG&f=1", "display_name": "PaperMate", "link": "https://stackoverflow.com/users/7650455/papermate"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2291, "favorite_count": 1, "answer_count": 3, "score": 1, "last_activity_date": 1491342792, "creation_date": 1491335866, "last_edit_date": 1491336758, "question_id": 43216556, "link": "https://stackoverflow.com/questions/43216556/how-to-split-line-read-from-text-file", "title": "How to split line read from text file", "body": "<p>I'm trying to read in each line of a text file where each line is formatted like this:</p>\n\n<pre><code>Bob,Daniels,40,50,60,70,80\n</code></pre>\n\n<p>I want to split the contents of each line based on commas but for some reason it's not working when I do this:</p>\n\n<pre><code>f = File.open(\"textfile.txt\", \"r\")\nf.each_line do |line|\n  line.split(\",\")\nend\n</code></pre>\n\n<p>What am I doing wrong here or is there a better way I could be doing this?</p>\n"}, {"tags": ["arrays", "ruby", "element"], "answers": [{"tags": [], "owner": {"reputation": 4538, "user_id": 809830, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bdd9801d2717096282258b192edc7793?s=128&d=identicon&r=PG", "display_name": "Alex Kojin", "link": "https://stackoverflow.com/users/809830/alex-kojin"}, "is_accepted": true, "score": 8, "last_activity_date": 1491335725, "last_edit_date": 1491335725, "creation_date": 1491335056, "answer_id": 43216333, "question_id": 43216045, "link": "https://stackoverflow.com/questions/43216045/how-do-i-remove-an-element-from-an-array-at-a-specified-index-but-not-do-the-ope/43216333#43216333", "title": "How do I remove an element from an array at a specified index but not do the operation in-place", "body": "<p>You can duplicate array and remove element from this duplicate. Use <code>tap</code> to return array, but not a deleted element.</p>\n\n<pre><code>2.3.3 :018 &gt; a = [\"a\", \"b\", \"c\"]\n =&gt; [\"a\", \"b\", \"c\"] \n2.3.3 :019 &gt; b = a.dup.tap{|i| i.delete_at(0)}\n =&gt; [\"b\", \"c\"] \n2.3.3 :020 &gt; b\n =&gt; [\"b\", \"c\"]\n</code></pre>\n\n<p>Another way is to use <code>reject</code> with <code>with_index</code>:</p>\n\n<pre><code>2.3.3 :042 &gt; b = a.reject.with_index{|v, i| i == 0 }\n =&gt; [\"b\", \"c\"] \n2.3.3 :043 &gt; b\n =&gt; [\"b\", \"c\"]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": false, "score": 1, "last_activity_date": 1491357809, "last_edit_date": 1491357809, "creation_date": 1491354896, "answer_id": 43220233, "question_id": 43216045, "link": "https://stackoverflow.com/questions/43216045/how-do-i-remove-an-element-from-an-array-at-a-specified-index-but-not-do-the-ope/43220233#43220233", "title": "How do I remove an element from an array at a specified index but not do the operation in-place", "body": "<p>You wish to create a new array which is the same as a given array less the element at a given index.</p>\n\n<p>You could use <a href=\"http://ruby-doc.org/core-2.3.0/Array.html#method-i-5B-5D\" rel=\"nofollow noreferrer\">Array#[]</a> (aka <a href=\"http://ruby-doc.org/core-2.3.0/Array.html#method-i-slice\" rel=\"nofollow noreferrer\">Array#slice</a>) and <a href=\"http://ruby-doc.org/core-2.3.0/Array.html#method-i-concat\" rel=\"nofollow noreferrer\">Array#concat</a>.</p>\n\n<pre><code>def copy_wo_element(arr, index_to_exclude)\n  arr[0,index_to_exclude].concat(arr[index_to_exclude+1..-1])\nend\n\narr = [1,2,3,4,5]\ncopy_wo_element(arr, 0)\n  #=&gt; [2, 3, 4, 5] \ncopy_wo_element(arr, 1)\n  #=&gt; [1, 3, 4, 5] \ncopy_wo_element(arr, 2)\n  #=&gt; [1, 2, 4, 5] \ncopy_wo_element(arr, 3)\n  #=&gt; [1, 2, 3, 5] \ncopy_wo_element(arr, 4)\n  #=&gt; [1, 2, 3, 4] \n</code></pre>\n\n<p>You could instead write</p>\n\n<pre><code>arr[0,index_to_exclude] + arr[index_to_exclude+1..-1]\n</code></pre>\n\n<p>but the use of <code>concat</code> avoids the creation of the temporary array <code>arr[index_to_exclude+1..-1]</code>.</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user7055375"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 5734, "favorite_count": 1, "accepted_answer_id": 43216333, "answer_count": 2, "score": 4, "last_activity_date": 1491357809, "creation_date": 1491334172, "last_edit_date": 1491335690, "question_id": 43216045, "link": "https://stackoverflow.com/questions/43216045/how-do-i-remove-an-element-from-an-array-at-a-specified-index-but-not-do-the-ope", "title": "How do I remove an element from an array at a specified index but not do the operation in-place", "body": "<p>Ruby 2.4.  I want to create a new array by removing an element at a specified index from an array.  I thought <code>delete_at</code> was the way, but it performs in-place and doesn't return the newly created array, but rather, the element that was removed:</p>\n\n<pre><code>2.4.0 :003 &gt; a = [\"a\", \"b\", \"c\"]\n =&gt; [\"a\", \"b\", \"c\"]\n2.4.0 :004 &gt; a.delete_at(0)\n =&gt; \"a\"\n2.4.0 :005 &gt; a\n =&gt; [\"b\", \"c\"]\n</code></pre>\n\n<p>How do I delete an element from an array at a specified index but not perform the operation in place?</p>\n"}, {"tags": ["ruby", "http.rb"], "answers": [{"tags": [], "owner": {"reputation": 745, "user_id": 3033467, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/8a33988a3dc0d009236304ff4ad8d615?s=128&d=identicon&r=PG&f=1", "display_name": "user3033467", "link": "https://stackoverflow.com/users/3033467/user3033467"}, "is_accepted": true, "score": 2, "last_activity_date": 1491334703, "last_edit_date": 1491334703, "creation_date": 1491333212, "answer_id": 43215769, "question_id": 43215768, "link": "https://stackoverflow.com/questions/43215768/http-rb-how-to-disable-ssl-verification/43215769#43215769", "title": "http.rb: how to disable ssl verification", "body": "<p>You have to pass a ssl_context VERIFY_NONE to your request:</p>\n\n<pre><code>ssl_context = OpenSSL::SSL::SSLContext.new\nssl_context.verify_mode = OpenSSL::SSL::VERIFY_NONE\nHTTP.get(url, ssl_context: ssl_context)\n</code></pre>\n"}], "owner": {"reputation": 745, "user_id": 3033467, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/8a33988a3dc0d009236304ff4ad8d615?s=128&d=identicon&r=PG&f=1", "display_name": "user3033467", "link": "https://stackoverflow.com/users/3033467/user3033467"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1526, "favorite_count": 0, "accepted_answer_id": 43215769, "answer_count": 1, "score": 1, "last_activity_date": 1491334703, "creation_date": 1491333212, "question_id": 43215768, "link": "https://stackoverflow.com/questions/43215768/http-rb-how-to-disable-ssl-verification", "title": "http.rb: how to disable ssl verification", "body": "<p>SSL validation fails on some HTTP calls: <code>OpenSSL::SSL::SSLError: SSL_connect returned=1 errno=0 state=error: certificate verify failed</code></p>\n\n<p>However we want those requests to be made anyway, how to force http.rb to proceed anyway?</p>\n"}, {"tags": ["ruby"], "answers": [{"tags": [], "owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "is_accepted": false, "score": 0, "last_activity_date": 1491335640, "last_edit_date": 1491335640, "creation_date": 1491335187, "answer_id": 43216364, "question_id": 43215737, "link": "https://stackoverflow.com/questions/43215737/is-class-or-method-definition-also-an-object-in-ruby/43216364#43216364", "title": "Is class or method definition also an object in Ruby?", "body": "<p>Generally variables aren't assigned to classes or method definitions.</p>\n\n<p>However, it is possible with anonymous classes:</p>\n\n<pre><code>MyClass = Class.new do\n  # class body goes here\nend\n</code></pre>\n\n<p>Method definitions return the symbol of the method name, which can be used to call the method in various ways</p>\n\n<pre><code>foo_symbol = def foo; \"ok\"; end\nputs foo_symbol == :foo # =&gt; true\n\n# call the method using send\nsend(foo_symbol) # =&gt; \"ok\"\n\n# convert to a proc and call\nmethod(foo_symbol).call # =&gt; \"ok\"\n</code></pre>\n\n<p>Of course the method is still callable by <code>foo</code>. If the goal was to make an anonymous method that was just assigned to the variable, then it'd be best to just make it a proc in the first place. </p>\n\n<pre><code>foo_proc = Proc.new { \"ok\" }\n# it can be assigned as an instance method on the class\nMyClass.send(:define_method, :foo, &amp;foo_proc)\nMyClass.new.foo # =&gt; \"ok\"\n</code></pre>\n\n<p>Though truth be told, this type of deconstruction isn't necessarily beneficial from a comprehensibility perspective and unless there's some metaprogramming going on it's probably simpler to use regular methods/classes. </p>\n"}, {"tags": [], "owner": {"reputation": 712, "user_id": 4191738, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/wKXDY.jpg?s=128&g=1", "display_name": "Sculper", "link": "https://stackoverflow.com/users/4191738/sculper"}, "is_accepted": false, "score": 0, "last_activity_date": 1491335190, "creation_date": 1491335190, "answer_id": 43216365, "question_id": 43215737, "link": "https://stackoverflow.com/questions/43215737/is-class-or-method-definition-also-an-object-in-ruby/43216365#43216365", "title": "Is class or method definition also an object in Ruby?", "body": "<p>I'm inclined to think that the author meant that you can assign classes and methods to variables (rather than the literal statements that define them).</p>\n\n<p>When you define a class, the block of code in which you define it will return the last evaluated statement. For instance, your example returns nil because nothing was evaluated.  But look at what happens when we add code to the class definition:</p>\n\n<pre><code>irb(main):026:0&gt; class Abc\nirb(main):027:1&gt;   SOME_CONSTANT = 'boiled_frogs'\nirb(main):028:1&gt; end\n=&gt; \"boiled_frogs\"\n</code></pre>\n\n<p>If you wanted to assign the class to a variable, you would define the class first:</p>\n\n<pre><code>irb(main):040:0&gt; class Abc ; end\n=&gt; nil\nirb(main):041:0&gt; the_class = Abc\n=&gt; Abc\n</code></pre>\n\n<p>Methods work a bit differently - a method <em>will</em> be returned (well, a symbol representing the method name) when you initially define it:</p>\n\n<pre><code>irb(main):037:0&gt; def my_method\nirb(main):038:1&gt;   return 'boiled_frogs'\nirb(main):039:1&gt; end\n=&gt; :my_method\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "is_accepted": false, "score": 3, "last_activity_date": 1491335195, "creation_date": 1491335195, "answer_id": 43216366, "question_id": 43215737, "link": "https://stackoverflow.com/questions/43215737/is-class-or-method-definition-also-an-object-in-ruby/43216366#43216366", "title": "Is class or method definition also an object in Ruby?", "body": "<p>No, class definitions and method definitions are syntax, they aren't objects. They <em>do</em>, however <em>evaluate</em> to an object:</p>\n\n<p>Method definitions evaluate to a <code>Symbol</code> denoting the name of the method:</p>\n\n<pre><code>def foo; end\n#=&gt; :foo\n</code></pre>\n\n<p>This allows you to do things like this, for example:</p>\n\n<pre><code>private def foo; end\n</code></pre>\n\n<p>Class definitions evaluate to the value of the last expression evaluated inside the definition:</p>\n\n<pre><code>class Foo; 'Hello' end\n#=&gt; 'Hello'\n</code></pre>\n"}], "owner": {"reputation": 3801, "user_id": 1745356, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/77f20c912125fab501d9686201ffaccb?s=128&d=identicon&r=PG", "display_name": "user1745356", "link": "https://stackoverflow.com/users/1745356/user1745356"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 52, "favorite_count": 0, "answer_count": 3, "score": 2, "last_activity_date": 1491335640, "creation_date": 1491333115, "question_id": 43215737, "link": "https://stackoverflow.com/questions/43215737/is-class-or-method-definition-also-an-object-in-ruby", "title": "Is class or method definition also an object in Ruby?", "body": "<p>I'm reading a Ruby book and it looks like even a method or class definition is an object.\nSo, I can do this:</p>\n\n<pre><code>my_class = class Abc; end\n</code></pre>\n\n<p>my_class evaluates to NilClass.</p>\n\n<p>There's not much you can do with this variable. But still what's the point of having a class or method definition to be a <code>nil</code> object?</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 4312, "user_id": 3880254, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/13dffa84d85f3ed70e7156867822246d?s=128&d=identicon&r=PG&f=1", "display_name": "InQusitive", "link": "https://stackoverflow.com/users/3880254/inqusitive"}, "edited": false, "score": 1, "creation_date": 1491330670, "post_id": 43214855, "comment_id": 73501551, "body": "Misunderstanding caused this question. I am the author and I want to close this question."}], "answers": [{"comments": [{"owner": {"reputation": 4312, "user_id": 3880254, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/13dffa84d85f3ed70e7156867822246d?s=128&d=identicon&r=PG&f=1", "display_name": "InQusitive", "link": "https://stackoverflow.com/users/3880254/inqusitive"}, "edited": false, "score": 0, "creation_date": 1491330548, "post_id": 43214923, "comment_id": 73501477, "body": "Couldn&#39;t remember the word. Yes, I want the reduced form."}, {"owner": {"reputation": 26014, "user_id": 123695, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/c1e4202cb329b1e3343a571dff94c68c?s=128&d=identicon&r=PG", "display_name": "Michael Mior", "link": "https://stackoverflow.com/users/123695/michael-mior"}, "edited": false, "score": 0, "creation_date": 1491330693, "post_id": 43214923, "comment_id": 73501569, "body": "If you want the reduced form, then you&#39;ll never be able to get 22. And <code>Rational(22&#47;7).denominator</code> gives you 1, not 7 as stated in the question."}, {"owner": {"reputation": 4312, "user_id": 3880254, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/13dffa84d85f3ed70e7156867822246d?s=128&d=identicon&r=PG&f=1", "display_name": "InQusitive", "link": "https://stackoverflow.com/users/3880254/inqusitive"}, "edited": false, "score": 0, "creation_date": 1491330840, "post_id": 43214923, "comment_id": 73501676, "body": "I thought .to_r and Rational are same. Above question formed combining both."}, {"owner": {"reputation": 1349, "user_id": 6163262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7f3655350c57cb94195d64808b7ba61?s=128&d=identicon&r=PG&f=1", "display_name": "whodini9", "link": "https://stackoverflow.com/users/6163262/whodini9"}, "edited": false, "score": 0, "creation_date": 1491330872, "post_id": 43214923, "comment_id": 73501694, "body": "@MichaelMior <code>Rational(22.0, 7.0).denominator =&gt; 7</code> ruby reads your number &#39;type&#39; as integers and will not automatically convert them to floats for you in any calculations. See <code>22&#47;7</code> vs <code>22.0&#47;7</code>"}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 3, "creation_date": 1491331412, "post_id": 43214923, "comment_id": 73501992, "body": "Then what would you call someone who nominates someone else for public office?"}, {"owner": {"reputation": 26014, "user_id": 123695, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/c1e4202cb329b1e3343a571dff94c68c?s=128&d=identicon&r=PG", "display_name": "Michael Mior", "link": "https://stackoverflow.com/users/123695/michael-mior"}, "reply_to_user": {"reputation": 1349, "user_id": 6163262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7f3655350c57cb94195d64808b7ba61?s=128&d=identicon&r=PG&f=1", "display_name": "whodini9", "link": "https://stackoverflow.com/users/6163262/whodini9"}, "edited": false, "score": 0, "creation_date": 1491340116, "post_id": 43214923, "comment_id": 73506678, "body": "@whodini9 I&#39;m not sure what that has to do with my answer or the associated comments."}], "tags": [], "owner": {"reputation": 26014, "user_id": 123695, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/c1e4202cb329b1e3343a571dff94c68c?s=128&d=identicon&r=PG", "display_name": "Michael Mior", "link": "https://stackoverflow.com/users/123695/michael-mior"}, "is_accepted": true, "score": 4, "last_activity_date": 1491340153, "last_edit_date": 1491340153, "creation_date": 1491330488, "answer_id": 43214923, "question_id": 43214855, "link": "https://stackoverflow.com/questions/43214855/how-to-get-ruby-rational-number-numerator/43214923#43214923", "title": "How to get ruby Rational number numerator?", "body": "<p>I have never heard of the term \"nominator\" (in this context). The number on the top of the fraction is called the <em>numerator</em>.</p>\n\n<pre><code>2.1.8 :001 &gt; Rational(22, 7).numerator\n =&gt; 22\n</code></pre>\n\n<p>Also, note that <code>Rational(22/7)</code> reduces to <code>Rational(3/1)</code> since the division is performed first. So in your example, you would actually get 3 and 1 instead of 22 and 7.</p>\n"}], "owner": {"reputation": 4312, "user_id": 3880254, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/13dffa84d85f3ed70e7156867822246d?s=128&d=identicon&r=PG&f=1", "display_name": "InQusitive", "link": "https://stackoverflow.com/users/3880254/inqusitive"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 165, "favorite_count": 0, "accepted_answer_id": 43214923, "answer_count": 1, "score": 0, "last_activity_date": 1491340153, "creation_date": 1491330264, "question_id": 43214855, "link": "https://stackoverflow.com/questions/43214855/how-to-get-ruby-rational-number-numerator", "title": "How to get ruby Rational number numerator?", "body": "<p>From Rational class I got the accessor for denominator.\nBut I can't find a nominator accessor.</p>\n\n<pre><code>Rational(22/7).denominator give 7\n</code></pre>\n\n<p>How do I get 22 similarly?</p>\n\n<pre><code>Rational(22/7).**numerator**\n</code></pre>\n"}, {"tags": ["ruby", "random"], "comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 1, "creation_date": 1491332015, "post_id": 43214813, "comment_id": 73502318, "body": "If you tell us the grouping criteria we might be able to suggest how you could optimize a measure of the criteria, but don&#39;t expect to get help with the criteria and measures of the criteria--that&#39;s your job."}, {"owner": {"reputation": 18855, "user_id": 165448, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/8a849756df87a0e7982302bf05c840e5?s=128&d=identicon&r=PG", "display_name": "JZ.", "link": "https://stackoverflow.com/users/165448/jz"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1491336581, "post_id": 43214813, "comment_id": 73504776, "body": "The criteria is listed above &quot;a bias for matching team members of opposite teams&quot;.   This was an interview question. I have an answer above that solves for match members of opposite teams, but the feedback I received was it was implemented in a a poor way. Hence the stack-overflow curiosity"}, {"owner": {"reputation": 18855, "user_id": 165448, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/8a849756df87a0e7982302bf05c840e5?s=128&d=identicon&r=PG", "display_name": "JZ.", "link": "https://stackoverflow.com/users/165448/jz"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1491336660, "post_id": 43214813, "comment_id": 73504826, "body": "If you dig into the question, it is in fact interesting. I know no way to implement semi-random. I&#39;m looking for a matching algorithm"}, {"owner": {"reputation": 18855, "user_id": 165448, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/8a849756df87a0e7982302bf05c840e5?s=128&d=identicon&r=PG", "display_name": "JZ.", "link": "https://stackoverflow.com/users/165448/jz"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1491336777, "post_id": 43214813, "comment_id": 73504900, "body": "example outputs are also listed:  [1,1,2,3,5], [1,2,3,4], [1,2,3,3], [1,3,4,1,4]"}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1491339118, "post_id": 43214813, "comment_id": 73506125, "body": "&quot;a bias for matching team members of opposite teams&quot; is not a criterion, it is only a notion for what is wanted. Your criteria must be <i>measurable</i>. An example of a criterion (to be maximized) is the minimum of the number of groups represented in each of the arrays produced (which, incidentally, would be a difficult problem). Moreover, I don&#39;t know what you mean by &quot;semi-random&quot;."}, {"owner": {"reputation": 18855, "user_id": 165448, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/8a849756df87a0e7982302bf05c840e5?s=128&d=identicon&r=PG", "display_name": "JZ.", "link": "https://stackoverflow.com/users/165448/jz"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1491341257, "post_id": 43214813, "comment_id": 73507216, "body": "Its was interview question! chill out!"}, {"owner": {"reputation": 18855, "user_id": 165448, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/8a849756df87a0e7982302bf05c840e5?s=128&d=identicon&r=PG", "display_name": "JZ.", "link": "https://stackoverflow.com/users/165448/jz"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1491341394, "post_id": 43214813, "comment_id": 73507285, "body": "Semi-random: do not match members of the same groups (see hash) 75% of the time."}], "owner": {"reputation": 18855, "user_id": 165448, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/8a849756df87a0e7982302bf05c840e5?s=128&d=identicon&r=PG", "display_name": "JZ.", "link": "https://stackoverflow.com/users/165448/jz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 69, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1491330666, "creation_date": 1491330090, "last_edit_date": 1491330666, "question_id": 43214813, "link": "https://stackoverflow.com/questions/43214813/how-to-implement-semi-random-groups-with-ruby", "title": "How to implement semi-random groups with Ruby?", "body": "<p>suppose I've got groups: </p>\n\n<pre><code>{1=&gt;[1,1,1,1,1,1], 2=&gt;[2,2,2], 3=&gt;[3,3,3,3,3,3], 4=&gt;[4,4,4,4,4,4]}\n</code></pre>\n\n<p>the keys represent teams, and the values within the arrays represent employees. Imagine I wish to match employees in a semi-random way. I want to make groups of 3's-5's like this:</p>\n\n<pre><code>[1,1,2,3,5], [1,2,3,4], [1,2,3,3], [1,3,4,1,4]\n</code></pre>\n\n<p>I have the wish to create groups and have a bias for matching team members of opposite teams, but not an absolute bias. Also you must match every member of each team with a group.</p>\n\n<p>How would you solve this? </p>\n\n<p>This is how I've done it:</p>\n\n<pre><code>group_by_team = records.group_by {|x| x.team_id}.values\nmixed_groups = group_by_team.each{|x| x.shuffle!}\n\n# take 1 element from each team and mix\n# the number of teams is defined as a constant so we don't have to hit the db with a count\nfor index in (1..(TEAMS-1))\n  zipped_groups ||= mixed_groups[0]\n  zipped_groups = zipped_groups.zip(mixed_groups[index])\nend \n\n# flatten the arrays to produce one large Array\n# remove nil values from ziped steps with compact!\nzipped_groups = zipped_groups.flatten!.compact!\nlunch_groups = zipped_groups.each_slice(3)\n\n\n# we can no longer reduce table size, so lets join two small lunch groups\nif lunch_groups.any?{|x| x.size&lt;3}\n  lunch_groups = self.merge_last_two(lunch_groups)\nend\n</code></pre>\n\n<p>But the problems with my implementation are vast. Groups size is fixed at 3. And its no exactly elegant, or efficient. </p>\n\n<p><strong>How would you make semi-random groups happen?</strong></p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 635, "user_id": 2045511, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3856a9633870744ae9706eaf88e5c1d8?s=128&d=identicon&r=PG", "display_name": "ellitt", "link": "https://stackoverflow.com/users/2045511/ellitt"}, "edited": false, "score": 0, "creation_date": 1491330179, "post_id": 43214786, "comment_id": 73501257, "body": "Do you have a controller set up to handle this request? It&#39;s not good practice to put all that code in a route file like that. That&#39;s supposed to be handled by a controller method."}, {"owner": {"reputation": 1323, "user_id": 1800508, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/f50c0dc2a98227d029183f22cfd73570?s=128&d=identicon&r=PG&f=1", "display_name": "Quesofat", "link": "https://stackoverflow.com/users/1800508/quesofat"}, "reply_to_user": {"reputation": 635, "user_id": 2045511, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3856a9633870744ae9706eaf88e5c1d8?s=128&d=identicon&r=PG", "display_name": "ellitt", "link": "https://stackoverflow.com/users/2045511/ellitt"}, "edited": false, "score": 0, "creation_date": 1491330254, "post_id": 43214786, "comment_id": 73501307, "body": "No I don&#39;t. Not sure what a controller would look like. In node, I usually dump my requests in the route so I didn&#39;t see an issue with it here. The file I provided would be the equivalent of my app.js in node."}, {"owner": {"reputation": 635, "user_id": 2045511, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3856a9633870744ae9706eaf88e5c1d8?s=128&d=identicon&r=PG", "display_name": "ellitt", "link": "https://stackoverflow.com/users/2045511/ellitt"}, "edited": false, "score": 0, "creation_date": 1491330723, "post_id": 43214786, "comment_id": 73501593, "body": "In Sinatra what you&#39;re talking about would be fine, but I&#39;m unfamiliar with most Sinatra. Do you have a Rails or Sinatra app?"}, {"owner": {"reputation": 1323, "user_id": 1800508, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/f50c0dc2a98227d029183f22cfd73570?s=128&d=identicon&r=PG&f=1", "display_name": "Quesofat", "link": "https://stackoverflow.com/users/1800508/quesofat"}, "reply_to_user": {"reputation": 635, "user_id": 2045511, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3856a9633870744ae9706eaf88e5c1d8?s=128&d=identicon&r=PG", "display_name": "ellitt", "link": "https://stackoverflow.com/users/2045511/ellitt"}, "edited": false, "score": 0, "creation_date": 1491330816, "post_id": 43214786, "comment_id": 73501658, "body": "I&#39;m using sinatra. Rails seemed to be overkill here"}, {"owner": {"reputation": 635, "user_id": 2045511, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3856a9633870744ae9706eaf88e5c1d8?s=128&d=identicon&r=PG", "display_name": "ellitt", "link": "https://stackoverflow.com/users/2045511/ellitt"}, "edited": false, "score": 0, "creation_date": 1491330858, "post_id": 43214786, "comment_id": 73501690, "body": "In that case I can&#39;t be much help, sorry. Saw the Rails tag and assumed a rails question."}, {"owner": {"reputation": 1323, "user_id": 1800508, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/f50c0dc2a98227d029183f22cfd73570?s=128&d=identicon&r=PG&f=1", "display_name": "Quesofat", "link": "https://stackoverflow.com/users/1800508/quesofat"}, "reply_to_user": {"reputation": 635, "user_id": 2045511, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3856a9633870744ae9706eaf88e5c1d8?s=128&d=identicon&r=PG", "display_name": "ellitt", "link": "https://stackoverflow.com/users/2045511/ellitt"}, "edited": false, "score": 0, "creation_date": 1491330948, "post_id": 43214786, "comment_id": 73501747, "body": "No problem. I will edit the post accordingly."}], "answers": [{"comments": [{"owner": {"reputation": 1323, "user_id": 1800508, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/f50c0dc2a98227d029183f22cfd73570?s=128&d=identicon&r=PG&f=1", "display_name": "Quesofat", "link": "https://stackoverflow.com/users/1800508/quesofat"}, "edited": false, "score": 0, "creation_date": 1491331986, "post_id": 43215331, "comment_id": 73502299, "body": "That seemed to help me get past that error. I have undefined method `result&#39; for nil:NilClass as an error now. Is dot notation still accepted in erb?"}, {"owner": {"reputation": 1349, "user_id": 6163262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7f3655350c57cb94195d64808b7ba61?s=128&d=identicon&r=PG&f=1", "display_name": "whodini9", "link": "https://stackoverflow.com/users/6163262/whodini9"}, "reply_to_user": {"reputation": 1323, "user_id": 1800508, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/f50c0dc2a98227d029183f22cfd73570?s=128&d=identicon&r=PG&f=1", "display_name": "Quesofat", "link": "https://stackoverflow.com/users/1800508/quesofat"}, "edited": false, "score": 0, "creation_date": 1491332516, "post_id": 43215331, "comment_id": 73502610, "body": "What happens if you try to display just the params? I&#39;m not really familiar with HTTParty"}], "tags": [], "owner": {"reputation": 1349, "user_id": 6163262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7f3655350c57cb94195d64808b7ba61?s=128&d=identicon&r=PG&f=1", "display_name": "whodini9", "link": "https://stackoverflow.com/users/6163262/whodini9"}, "is_accepted": true, "score": 1, "last_activity_date": 1491331769, "creation_date": 1491331769, "answer_id": 43215331, "question_id": 43214786, "link": "https://stackoverflow.com/questions/43214786/undefined-method-when-passing-variable-into-erb/43215331#43215331", "title": "Undefined method when passing variable into erb", "body": "<p>Pass <code>isDevModeOn</code> as a param:</p>\n\n<pre><code>require 'sinatra'\nrequire 'httparty'\nrequire 'erb'\n\n\nget '/' do\n  headers = {\n    \"X-Auth-Email\" =&gt; 'null',\n    \"X-Auth-Key\" =&gt;   'null',\n    \"Content-Type\" =&gt; 'application/json'\n  }\n\n  isDevModeOn = HTTParty.get(\n    'https://api.cloudflare.com/client/v4/zones/null/settings/development_mode',\n    :headers =&gt; headers\n  )\n\n  erb :index, :locals =&gt; {:isDevModeOn =&gt; params[:isDevModeOn]}\nend #end for get\n</code></pre>\n"}], "owner": {"reputation": 1323, "user_id": 1800508, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/f50c0dc2a98227d029183f22cfd73570?s=128&d=identicon&r=PG&f=1", "display_name": "Quesofat", "link": "https://stackoverflow.com/users/1800508/quesofat"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 50, "favorite_count": 0, "accepted_answer_id": 43215331, "answer_count": 1, "score": 0, "last_activity_date": 1491331769, "creation_date": 1491329986, "last_edit_date": 1491330971, "question_id": 43214786, "link": "https://stackoverflow.com/questions/43214786/undefined-method-when-passing-variable-into-erb", "title": "Undefined method when passing variable into erb", "body": "<p>I am trying to pass json response into my index view in erb. </p>\n\n<p>In ERB I am trying to check if the value is true, render certain html, if it is false, render some html.</p>\n\n<p>Routes:</p>\n\n<pre><code>require 'sinatra'\nrequire 'httparty'\nrequire 'erb'\n\n\nget '/' do\n  headers = {\n    \"X-Auth-Email\" =&gt; 'null',\n    \"X-Auth-Key\" =&gt;   'null',\n    \"Content-Type\" =&gt; 'application/json'\n  }\n\n  isDevModeOn = HTTParty.get(\n    'https://api.cloudflare.com/client/v4/zones/null/settings/development_mode',\n    :headers =&gt; headers\n  )\n\n  erb :index, :locals =&gt; isDevModeOn\nend #end for get\n</code></pre>\n\n<p>View</p>\n\n<pre><code>&lt;html&gt;\n  &lt;head&gt;\n    &lt;title&gt;CloudFlare App&lt;/title&gt;\n    &lt;link href=\"https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css\" rel=\"stylesheet\" integrity=\"sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u\" crossorigin=\"anonymous\"&gt;\n    &lt;link rel=\"stylesheet\" href=\"css/master.css\"&gt;\n  &lt;/head&gt;\n  &lt;body class=\"container-fluid\"&gt;\n    &lt;div class=\"row\"&gt;\n      &lt;div class=\"col-md-3\"&gt;\n        &lt;div style=\"border: solid 1px black; height: 400px; width: 400px;\" class=\"tile\"&gt;\n          &lt;h2&gt;Dev Mode Status&lt;/h2&gt;\n\n          &lt;% if isDevModeOn.result.value? %&gt;\n            &lt;span style=\"background: green;\"&gt;ON&lt;/span&gt;\n\n            &lt;a href=\"#\"&gt;Turn off Dev Mode&lt;/a&gt;\n          &lt;% else %&gt;\n            &lt;span style=\"background: red;\"&gt;OFF&lt;/span&gt;\n\n            &lt;a href=\"#\"&gt;Turn On Dev Mode&lt;/a&gt;\n          &lt;% end %&gt;\n        &lt;/div&gt;\n      &lt;/div&gt;\n    &lt;/div&gt;\n  &lt;/body&gt;\n&lt;/html&gt;\n</code></pre>\n\n<p>response example</p>\n\n<pre><code>{\n  \"success\": true,\n  \"errors\": [],\n  \"messages\": [],\n  \"result\": {\n    \"id\": \"development_mode\",\n    \"value\": \"off\",\n    \"editable\": true,\n    \"modified_on\": \"2014-01-01T05:20:00.12345Z\",\n    \"time_remaining\": 3600\n  }\n}\n</code></pre>\n\n<p>Disclaimer: I have a javascript background and use EJS a lot and am pretty inexperienced with ruby.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "forms", "ruby-on-rails-3", "models"], "comments": [{"owner": {"reputation": 635, "user_id": 2045511, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3856a9633870744ae9706eaf88e5c1d8?s=128&d=identicon&r=PG", "display_name": "ellitt", "link": "https://stackoverflow.com/users/2045511/ellitt"}, "edited": false, "score": 0, "creation_date": 1491329666, "post_id": 43214597, "comment_id": 73500946, "body": "Take a look at <code>fields_for</code> <a href=\"http://api.rubyonrails.org/classes/ActionView/Helpers/FormHelper.html#method-i-fields_for\" rel=\"nofollow noreferrer\">api.rubyonrails.org/classes/ActionView/Helpers/&hellip;</a>"}, {"owner": {"reputation": 2232, "user_id": 1430655, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/IJdhB.jpg?s=128&g=1", "display_name": "shiladitya", "link": "https://stackoverflow.com/users/1430655/shiladitya"}, "edited": false, "score": 0, "creation_date": 1491335718, "post_id": 43214597, "comment_id": 73504370, "body": "what is the issue you are facing?"}], "answers": [{"tags": [], "owner": {"reputation": 499, "user_id": 5636930, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-L0BF3IxhZYw/AAAAAAAAAAI/AAAAAAAAAPM/RAOVvQpPSEA/photo.jpg?sz=128", "display_name": "amrrbakry", "link": "https://stackoverflow.com/users/5636930/amrrbakry"}, "is_accepted": true, "score": 1, "last_activity_date": 1491337534, "creation_date": 1491337534, "answer_id": 43217050, "question_id": 43214597, "link": "https://stackoverflow.com/questions/43214597/creating-form-for-an-object-which-has-an-association/43217050#43217050", "title": "Creating form for an object which has an association", "body": "<p>In your todo form, you could have a select box to choose the project the todo belongs to:</p>\n\n<pre><code># todos/_todo_form.html.erb\n  &lt;%= select_tag \"project_id\", options_for_select(Project.pluck(:title, :id)) %&gt;\n</code></pre>\n\n<p>And in your todos_controller <code>create</code> action:</p>\n\n<pre><code>def create\n  @project = Project.find(params[:project_id])\n  @todo = @project.todos.new(todo_params)\n  if @todo.save\n    # success\n  else \n    # error \n  end\nend \n</code></pre>\n\n<p>finally, permit the <code>project_id</code> in <code>todo_params</code>:</p>\n\n<pre><code>def todo_params\n  params.require(:todo).permit(:text, :project_id) # add any other attributes you want\nend\n</code></pre>\n"}], "owner": {"reputation": 77, "user_id": 7802501, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/4874272e8bba778b1452bdb1e8a7c625?s=128&d=identicon&r=PG&f=1", "display_name": "NanoBreaker", "link": "https://stackoverflow.com/users/7802501/nanobreaker"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 176, "favorite_count": 2, "accepted_answer_id": 43217050, "answer_count": 1, "score": 0, "last_activity_date": 1491337534, "creation_date": 1491329387, "question_id": 43214597, "link": "https://stackoverflow.com/questions/43214597/creating-form-for-an-object-which-has-an-association", "title": "Creating form for an object which has an association", "body": "<p>I have two models: project and todo. Project has many todos.</p>\n\n<p>So I wanna create a form, where I select project category from the combobox and then I add a todo to it.</p>\n\n<p>For instance:\nI have following categories: family, work, study.</p>\n\n<p>In form in the combobox I select 'study', and then in textfield I spell a todo like 'make homework for monday' and press submit button.</p>\n\n<p>project.rb</p>\n\n<pre><code>class Project &lt; ActiveRecord::Base\n  has_many :todos\nend\n</code></pre>\n\n<p>todo.rb</p>\n\n<pre><code>class Todo &lt; ActiveRecord::Base\n\n  belongs_to :project\n\nend\n</code></pre>\n\n<p>my data schema:</p>\n\n<pre><code>  create_table \"projects\", force: :cascade do |t|\n    t.string   \"title\"\n    t.datetime \"created_at\", null: false\n    t.datetime \"updated_at\", null: false\n  end\n\n  create_table \"todos\", force: :cascade do |t|\n    t.string   \"text\"\n    t.boolean  \"isCompleted\"\n    t.integer  \"project_id\"\n    t.datetime \"created_at\",  null: false\n    t.datetime \"updated_at\",  null: false\n  end\n</code></pre>\n\n<p>_form.html.erb</p>\n\n<pre><code>&lt;%= form_for @project do |f| %&gt;\n\n  &lt;div class=\"form_control\"&gt;\n    &lt;%= f.select :title, options_for_select([[\"Work\", \"w\"],\n                                            [\"Family\", \"f\"],\n                                           [\"Study\", \"f\"],\n                                           [\"TheRest\", \"t\"]]) %&gt;\n  &lt;/div&gt;\n\n  &lt;div class=\"form_control\"&gt;\n    *** HERE I NEED TO FIGURE OUT HOW TO ADD SOME DATA TO todo.text ***\n  &lt;/div&gt;  \n\n  &lt;div class=\"form_control\"&gt;\n    &lt;%= f.submit 'Add' %&gt;\n  &lt;/div&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>this is how I show all the projects with their todos:</p>\n\n<pre><code>&lt;% @projects.each do |project| %&gt;\n    &lt;h2&gt; &lt;%= project.title %&gt; &lt;/h2&gt;\n    &lt;% project.todos.all.each do |todo| %&gt;\n      &lt;p&gt;&lt;%= todo.text %&gt; &lt;%= check_box('tag', todo.__id__, {checked: todo.isCompleted}) %&gt;&lt;/p&gt;\n    &lt;% end %&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>GitHub link : <a href=\"https://github.com/NanoBreaker/taskmanager\" rel=\"nofollow noreferrer\">https://github.com/NanoBreaker/taskmanager</a></p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-3"], "answers": [{"tags": [], "owner": {"reputation": 2799, "user_id": 3772982, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/91362482c60ebfba88fbdbde79c5fac6?s=128&d=identicon&r=PG&f=1", "display_name": "margo", "link": "https://stackoverflow.com/users/3772982/margo"}, "is_accepted": false, "score": 1, "last_activity_date": 1491332169, "creation_date": 1491332169, "answer_id": 43215450, "question_id": 43214487, "link": "https://stackoverflow.com/questions/43214487/rails-strange-behavior-with-build-association/43215450#43215450", "title": "Rails strange behavior with build association", "body": "<p>It is possible, but you will need to add some additional logic in the controller method to cater for either situation. You've posted minimal code so it would help if you showed the controller method that the form posts to. </p>\n\n<p>Also are you sure the relationship should be <code>has_one</code>? From your form and the fact that you're showing all the brands to allow the user to select one that may have already been selected for another product, which would explain why the brand isn't appearing on the show page. You may want a <code>has_many</code> relationship.</p>\n"}], "owner": {"reputation": 63, "user_id": 7696718, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/2019c6b1f20a273b8ffd442f6025244e?s=128&d=identicon&r=PG&f=1", "display_name": "nakapaka1", "link": "https://stackoverflow.com/users/7696718/nakapaka1"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 30, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1491332169, "creation_date": 1491329020, "question_id": 43214487, "link": "https://stackoverflow.com/questions/43214487/rails-strange-behavior-with-build-association", "title": "Rails strange behavior with build association", "body": "<p>I have a product model that belongs to Brand</p>\n\n<pre><code>Model product\nbelongs_to :brand\n\nmodel Brand \nhas_one :product\n</code></pre>\n\n<p>on product create i place a select brand on creation</p>\n\n<pre><code>    &lt;%=  p.collection_select(:brand_id, Brand.all, :id, :name, {},{ :multiple =&gt; false}) %&gt;\n</code></pre>\n\n<p>but if the user would like to add his brand i added a text field</p>\n\n<pre><code> &lt;%= p.fields_for  :brand_attributes  do |b| %&gt;\n\n  &lt;%=b.text_field :name, :label=&gt;\"Name\"%&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>now, if the user choose the brand on select did not show on product show page\njust if the user add the name of the brand</p>\n\n<p>so, is possible to keep a select brand and the possibility do add the brand name to?</p>\n"}, {"tags": ["sql", "arrays", "json", "ruby"], "answers": [{"tags": [], "owner": {"reputation": 4600, "user_id": 5961578, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/df7cbfdd2a92a7926af3bbb8648318aa?s=128&d=identicon&r=PG", "display_name": "moveson", "link": "https://stackoverflow.com/users/5961578/moveson"}, "is_accepted": true, "score": 0, "last_activity_date": 1491409267, "last_edit_date": 1491409267, "creation_date": 1491336159, "answer_id": 43216641, "question_id": 43214082, "link": "https://stackoverflow.com/questions/43214082/ruby-sql-result-to-grouped-hash/43216641#43216641", "title": "Ruby SQL Result to Grouped Hash", "body": "<p>You will want to start out using Ruby's <code>#group_by</code> method, which will group the rows by year, with the years as the keys and arrays of matching rows as the values:</p>\n\n<pre><code>&gt;&gt; groups = result.group_by { |row| row['year'] }\n=&gt; {\"2016\"=&gt;\n  [{\"year\"=&gt;\"2016\", \"month\"=&gt;\"1\", \"total\"=&gt;\"1223\"},\n   {\"year\"=&gt;\"2016\", \"month\"=&gt;\"2\", \"total\"=&gt;\"613\"},\n   {\"year\"=&gt;\"2016\", \"month\"=&gt;\"3\", \"total\"=&gt;\"12351\"}],\n \"2017\"=&gt;\n  [{\"year\"=&gt;\"2017\", \"month\"=&gt;\"1\", \"total\"=&gt;\"123123\"},\n   {\"year\"=&gt;\"2017\", \"month\"=&gt;\"2\", \"total\"=&gt;\"613123\"},\n   {\"year\"=&gt;\"2017\", \"month\"=&gt;\"3\", \"total\"=&gt;\"123\"}]}\n</code></pre>\n\n<p>Next you'll use <code>#map</code> to transform your data:</p>\n\n<pre><code>&gt;&gt; grouped_rows = groups.map { |year, values| {name: year, data: values.map { |value| [value['month'], value['total']] }.to_h} }\n=&gt; [{:name=&gt;\"2016\", :data=&gt;{\"1\"=&gt;\"1223\", \"2\"=&gt;\"613\", \"3\"=&gt;\"12351\"}},\n {:name=&gt;\"2017\", :data=&gt;{\"1\"=&gt;\"123123\", \"2\"=&gt;\"613123\", \"3\"=&gt;\"123\"}}]\n</code></pre>\n\n<p>If you want the rows sorted as shown, you can finish by calling <code>#sort_by</code> on the result:</p>\n\n<pre><code>&gt;&gt; grouped_rows.sort_by { |row| -row[:name].to_i }\n=&gt; [{:name=&gt;\"2017\", :data=&gt;{\"1\"=&gt;\"123123\", \"2\"=&gt;\"613123\", \"3\"=&gt;\"123\"}},\n {:name=&gt;\"2016\", :data=&gt;{\"1\"=&gt;\"1223\", \"2\"=&gt;\"613\", \"3\"=&gt;\"12351\"}}]\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 6349231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/258abf5e86554f51f2d1bd117c64ad29?s=128&d=identicon&r=PG&f=1", "display_name": "Y05H10", "link": "https://stackoverflow.com/users/6349231/y05h10"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 38, "favorite_count": 0, "accepted_answer_id": 43216641, "answer_count": 1, "score": 0, "last_activity_date": 1491409267, "creation_date": 1491327611, "question_id": 43214082, "link": "https://stackoverflow.com/questions/43214082/ruby-sql-result-to-grouped-hash", "title": "Ruby SQL Result to Grouped Hash", "body": "<p>I am Fetching Data from a proprietary Database (Sybase Advantage ADS)\nThrough a self written API that utilizes PHP and return the Results as JSON</p>\n\n<p>so i have a Result that looks like this</p>\n\n<pre><code>[   \n  {\"year\"=&gt;\"2016\", \"month\"=&gt;\"1\", \"total\"=&gt;\"1223\"},  \n  {\"year\"=&gt;\"2016\", \"month\"=&gt;\"2\", \"total\"=&gt;\"613\"},   \n  {\"year\"=&gt;\"2016\", \"month\"=&gt;\"3\", \"total\"=&gt;\"12351\"},  \n  {\"year\"=&gt;\"2017\", \"month\"=&gt;\"1\", \"total\"=&gt;\"123123\"},   \n  {\"year\"=&gt;\"2017\", \"month\"=&gt;\"2\", \"total\"=&gt;\"613123\"},\n  {\"year\"=&gt;\"2017\", \"month\"=&gt;\"3\", \"total\"=&gt;\"123\"}\n]\n</code></pre>\n\n<p>This is what i retrieve in Ruby, now in Order to work with the Date i'd like to create a Hash like this : </p>\n\n<pre><code>[  \n  {:name =&gt; \"2017\", :data =&gt; {\"1\" =&gt; 123123, \"2\" =&gt; 613123, \"3\" =&gt; 123}},  \n  {:name =&gt; \"2016\", :data =&gt; {\"1\" =&gt; 1223, \"2\" =&gt; 613, \"3\" =&gt; 12351}}  \n]\n</code></pre>\n\n<p>This big array is ment to be split and merged by the year key, with each combination of month and total in it.</p>\n\n<p>Furthermore i want to utilize the value of month as the key for total.</p>\n\n<p>Any little help to get me started would be greatly appreciated.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "apache", "devise", "passenger"], "answers": [{"comments": [{"owner": {"reputation": 23, "user_id": 5421028, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GBz6B.jpg?s=128&g=1", "display_name": "deskmonkey", "link": "https://stackoverflow.com/users/5421028/deskmonkey"}, "edited": false, "score": 0, "creation_date": 1491330444, "post_id": 43214599, "comment_id": 73501417, "body": "Sorry, but what file or files would I add these lines?"}, {"owner": {"reputation": 418, "user_id": 6331585, "user_type": "registered", "accept_rate": 60, "profile_image": "https://lh5.googleusercontent.com/--Spi1QdCgC0/AAAAAAAAAAI/AAAAAAAABnU/sJNL2oLTBHY/photo.jpg?sz=128", "display_name": "Vishwas Nahar", "link": "https://stackoverflow.com/users/6331585/vishwas-nahar"}, "reply_to_user": {"reputation": 23, "user_id": 5421028, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GBz6B.jpg?s=128&g=1", "display_name": "deskmonkey", "link": "https://stackoverflow.com/users/5421028/deskmonkey"}, "edited": false, "score": 0, "creation_date": 1491330703, "post_id": 43214599, "comment_id": 73501576, "body": "You can add this first line to <code>config&#47;application.rb</code>"}, {"owner": {"reputation": 23, "user_id": 5421028, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GBz6B.jpg?s=128&g=1", "display_name": "deskmonkey", "link": "https://stackoverflow.com/users/5421028/deskmonkey"}, "edited": false, "score": 0, "creation_date": 1491331616, "post_id": 43214599, "comment_id": 73502089, "body": "Thank you for replying. I added it to the file and restarted the app &#39;touch tmp/restart.txt&#39; and restarted apache but still getting the error without any changes."}, {"owner": {"reputation": 418, "user_id": 6331585, "user_type": "registered", "accept_rate": 60, "profile_image": "https://lh5.googleusercontent.com/--Spi1QdCgC0/AAAAAAAAAAI/AAAAAAAABnU/sJNL2oLTBHY/photo.jpg?sz=128", "display_name": "Vishwas Nahar", "link": "https://stackoverflow.com/users/6331585/vishwas-nahar"}, "reply_to_user": {"reputation": 23, "user_id": 5421028, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GBz6B.jpg?s=128&g=1", "display_name": "deskmonkey", "link": "https://stackoverflow.com/users/5421028/deskmonkey"}, "edited": false, "score": 0, "creation_date": 1491331877, "post_id": 43214599, "comment_id": 73502233, "body": "Can you also check models namespace ?"}, {"owner": {"reputation": 418, "user_id": 6331585, "user_type": "registered", "accept_rate": 60, "profile_image": "https://lh5.googleusercontent.com/--Spi1QdCgC0/AAAAAAAAAAI/AAAAAAAABnU/sJNL2oLTBHY/photo.jpg?sz=128", "display_name": "Vishwas Nahar", "link": "https://stackoverflow.com/users/6331585/vishwas-nahar"}, "reply_to_user": {"reputation": 23, "user_id": 5421028, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GBz6B.jpg?s=128&g=1", "display_name": "deskmonkey", "link": "https://stackoverflow.com/users/5421028/deskmonkey"}, "edited": false, "score": 0, "creation_date": 1491331966, "post_id": 43214599, "comment_id": 73502286, "body": "<a href=\"http://stackoverflow.com/questions/18921079/circular-dependency-detected-while-autoloading-a-constant?rq=1\" title=\"circular dependency detected while autoloading a constant\">stackoverflow.com/questions/18921079/&hellip;</a>"}, {"owner": {"reputation": 23, "user_id": 5421028, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GBz6B.jpg?s=128&g=1", "display_name": "deskmonkey", "link": "https://stackoverflow.com/users/5421028/deskmonkey"}, "edited": false, "score": 0, "creation_date": 1491502837, "post_id": 43214599, "comment_id": 73594368, "body": "Update: still not working but is working when I set it to development in the apache virtual host file. I have ran the <code>RAKE_ENV=production rake db:migrate</code> and <code>db:seed</code>. I&#39;m thinking of deleting this post and coming back to it at a later time. Really not understanding why this isn&#39;t working in production mode. :/"}], "tags": [], "owner": {"reputation": 418, "user_id": 6331585, "user_type": "registered", "accept_rate": 60, "profile_image": "https://lh5.googleusercontent.com/--Spi1QdCgC0/AAAAAAAAAAI/AAAAAAAABnU/sJNL2oLTBHY/photo.jpg?sz=128", "display_name": "Vishwas Nahar", "link": "https://stackoverflow.com/users/6331585/vishwas-nahar"}, "is_accepted": false, "score": 0, "last_activity_date": 1491329391, "creation_date": 1491329391, "answer_id": 43214599, "question_id": 43214065, "link": "https://stackoverflow.com/questions/43214065/railsapachepassenger-circular-dependency-error-a-devisecontroller-runtimeer/43214599#43214599", "title": "Rails:Apache:Passenger: Circular Dependency Error, A DeviseController (RuntimeError)", "body": "<p>You can try add this</p>\n\n<pre><code>config.autoload_paths += Dir[\"#{config.root}/lib/**/\"]\n</code></pre>\n\n<p>Ruby looks for the file in the directories listed in $LOAD_PATH. That is, Ruby iterates over all its directories and for each one of them checks whether they have a file called \"erb.rb\", or \"erb.so\". If it finds any of them, the interpreter loads it and ends the search. Otherwise, it tries again in the next directory of the list. If the list gets exhausted, LoadError is raised. </p>\n\n<pre><code>inject Rack::Lock if config.eager_load is false\n</code></pre>\n\n<p>If code is not eager loaded constants are loaded on demand. Constant\nautoloading is not thread-safe, so if eager loading is not enabled\nmulti-threading should not be allowed</p>\n"}], "owner": {"reputation": 23, "user_id": 5421028, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GBz6B.jpg?s=128&g=1", "display_name": "deskmonkey", "link": "https://stackoverflow.com/users/5421028/deskmonkey"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 72, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1491329391, "creation_date": 1491327535, "last_edit_date": 1491327875, "question_id": 43214065, "link": "https://stackoverflow.com/questions/43214065/railsapachepassenger-circular-dependency-error-a-devisecontroller-runtimeer", "title": "Rails:Apache:Passenger: Circular Dependency Error, A DeviseController (RuntimeError)", "body": "<p>I'm trying to deploy my rails app on my VPS but I get the error in <code>/var/log/httpd/error_log</code> saying </p>\n\n<pre><code>`Circular dependency detected while autoloading constant DeviseController     (RuntimeError)\n/home/user/.gem/ruby/2.4.0/gems/activesupport-5.0.2/lib/active_support/dependencies.rb:509:in 'load_missing_constant'\n/home/user/.gem/ruby/2.4.0/gems/activesupport-5.0.2/lib/active_support/dependencies.rb:203:in 'const_missing'\n/home/user/.gem/ruby/2.4.0/gems/devise-4.2.1/app/controllers/devise/registrations_controller.rb:1:in '&lt;top (required)&gt;'....`\n</code></pre>\n\n<p>I have searched Google and Bing and getting nowhere. I don't fully understand this error either. Created a base rails app and it worked. Reckoning that saying all is fine system-wide. The devise gem is installed on the system and have ran <code>bundler install</code> and no errors. Also ran <code>rake db:migrate</code> to install everything in the database. I suspect everything fine on the system but something in my app is wrong or I need to add something in devise but what?? </p>\n\n<p>In my app, its very simple. The app allows people to register and login. I do not use the mailing feature and it only has the standard <code>user</code> membership that devise use. Have not setup the admin role in devise. Its all default configurations.</p>\n\n<p>Just in case my Apache config is</p>\n\n<pre><code>`&lt;VirtualHost myapp.tk:80&gt;\n    ServerName myapp.tk\n    ServerAlias www.myapp.tk\n    DocumentRoot \"/srv/http/myapp/public\"\n    ErrorLog \"/var/log/httpd/myapp.tk-error_log\"\n    CustomLog \"/var/log/httpd/myapp.tk-access_log\" common\n    PassengerRuby /usr/bin/ruby\n    RailsEnv production\n    &lt;Directory \"/srv/http/myapp/public\"&gt;\n      Allow from all\n      Options -MultiViews\n      Require all granted\n    &lt;/Directory&gt;\n&lt;/VirtualHost&gt;`\n</code></pre>\n\n<p>The server setup is Apache/Passenger running on Archlinux. All are the latest  versions including the gems.</p>\n\n<p>Let me know if I missed any log files or information needed. Seemed like a simple problem but </p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-5", "nested-forms", "has-many-through"], "comments": [{"owner": {"reputation": 3, "user_id": 7256005, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TUx1R.png?s=128&g=1", "display_name": "\u0414\u043c\u0438\u0442\u0440\u0438\u0439 \u0421\u043f\u0438\u0432\u0430\u043a\u043e\u0432", "link": "https://stackoverflow.com/users/7256005/%d0%94%d0%bc%d0%b8%d1%82%d1%80%d0%b8%d0%b9-%d0%a1%d0%bf%d0%b8%d0%b2%d0%b0%d0%ba%d0%be%d0%b2"}, "edited": false, "score": 0, "creation_date": 1491327577, "post_id": 43213990, "comment_id": 73499736, "body": "forgot to add: Rails version 5.0.2, Ruby ruby 2.3.1p112"}], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 7256005, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TUx1R.png?s=128&g=1", "display_name": "\u0414\u043c\u0438\u0442\u0440\u0438\u0439 \u0421\u043f\u0438\u0432\u0430\u043a\u043e\u0432", "link": "https://stackoverflow.com/users/7256005/%d0%94%d0%bc%d0%b8%d1%82%d1%80%d0%b8%d0%b9-%d0%a1%d0%bf%d0%b8%d0%b2%d0%b0%d0%ba%d0%be%d0%b2"}, "edited": false, "score": 0, "creation_date": 1491826222, "post_id": 43311988, "comment_id": 73709680, "body": "Thanks for the answer. Saw the video and tried to mimic it in my app but failed due to user email/id problem. You are 100% right about using AJAX calls. Currently I&#39;m working on simplified version of this feature (user_roles controller, and params hash). Definitely will try to refactor it into AJAX calls after I get the controller solution working properly."}], "tags": [], "owner": {"reputation": 505, "user_id": 5909738, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/jNscA.jpg?s=128&g=1", "display_name": "Tashows", "link": "https://stackoverflow.com/users/5909738/tashows"}, "is_accepted": true, "score": 0, "last_activity_date": 1491772322, "creation_date": 1491772322, "answer_id": 43311988, "question_id": 43213990, "link": "https://stackoverflow.com/questions/43213990/accepts-nested-attributes-for-has-many-through-create-and-delete-join-model-obj/43311988#43311988", "title": "accepts_nested_attributes_for has_many :through Create and delete join model objects, depending on other model", "body": "<p>First of all I don't think you can have accepts_nested_attributes for :user in UserRoles, since UserRole is what is nested into User and not the other way round. From what you are describing you don't seem to need that anyway though, except if there are other cases in your business logic, apart from this form.</p>\n\n<p>I would highly suggest you watch this railscast on nested forms. It shows a way to dynamically add and remove nested fields (add or remove a UserRole set of fields)</p>\n\n<p><a href=\"http://railscasts.com/episodes/197-nested-model-form-part-2?autoplay=true\" rel=\"nofollow noreferrer\">http://railscasts.com/episodes/197-nested-model-form-part-2?autoplay=true</a></p>\n\n<p>However the user email logic would probably have to be extracted into something else. If I were you I would create an ajax call in the email input field. That call would send the email to the server, the server would try to find any matching users and if it finds some it will return their id-email pairs. Then you display the returned data (email) as a select option in a dropdown. When the user clicks the valid email that was fetched, the form sets the id as the value for that field (user_id field inside user_roles). If no user was found, you return a string that says no user was found with that email or something like that.</p>\n\n<p>If you don't want to fetch the ids, you would have to extract the emails from the params hash in the controller. For each email try to find a user and then you would have to find a way to manage the errors for each one separately in case the user was not found. The first option would give a better user experience for sure.</p>\n"}], "owner": {"reputation": 3, "user_id": 7256005, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TUx1R.png?s=128&g=1", "display_name": "\u0414\u043c\u0438\u0442\u0440\u0438\u0439 \u0421\u043f\u0438\u0432\u0430\u043a\u043e\u0432", "link": "https://stackoverflow.com/users/7256005/%d0%94%d0%bc%d0%b8%d1%82%d1%80%d0%b8%d0%b9-%d0%a1%d0%bf%d0%b8%d0%b2%d0%b0%d0%ba%d0%be%d0%b2"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 429, "favorite_count": 0, "accepted_answer_id": 43311988, "answer_count": 1, "score": 0, "last_activity_date": 1491772322, "creation_date": 1491327269, "last_edit_date": 1491327615, "question_id": 43213990, "link": "https://stackoverflow.com/questions/43213990/accepts-nested-attributes-for-has-many-through-create-and-delete-join-model-obj", "title": "accepts_nested_attributes_for has_many :through Create and delete join model objects, depending on other model", "body": "<p>Here are my models</p>\n\n<pre><code>class User &lt; ApplicationRecord\n    has_many :user_roles, dependent: :destroy\n    has_many :projects, through: :user_roles\n    has_secure_password\nend\n\nclass UserRole &lt; ApplicationRecord\n    belongs_to :user\n    belongs_to :project\n    accepts_nested_attributes_for :user\nend\n\nclass Project &lt; ApplicationRecord\n    has_many :user_roles, dependent: :destroy\n    has_many :users, through: :user_roles\n    accepts_nested_attributes_for :user_roles\nend\n</code></pre>\n\n<p>Currently I'm trying to figure out a proper way for creating multiple UserRole entries in Project creation form.</p>\n\n<p>UserRole stores user_id, project_id and role.<br>\nThe actual problem: form input for UserRole is User's email, i.e. I should  find User with such email and if such User exists retrieve his id and save it in UserRole.user_id.</p>\n\n<p>It works just well in console, but not with forms.\nI tried to use accepts_nested_attributes_for and nested fields in forms</p>\n\n<pre><code> &lt;%= form_for @project do |f| %&gt;\n      # project fields\n      &lt;%= f.fields_for :user_roles do |role_f| %&gt;\n          # user role fields\n          &lt;%= role_f.fields_for :user do |user_f| %&gt;\n               # user fields\n           &lt;% end %&gt;\n       &lt;% end %&gt;\n &lt;% end %&gt;\n</code></pre>\n\n<p>With this form I can easily modify any entries. But can't add or delete properly. Also, this form allows to modify User and that's troublesome.\nI'm searching for a way to only create and delete Project's UserRoles while keeping User safe.</p>\n\n<p>I tried to make a virtual attribute - email for UserRole that would be a link to User's actual email attribute, but failed.</p>\n\n<p>The whole situation looks as if I am using wrong approach to this problem. Please, advice.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "activerecord"], "comments": [{"owner": {"reputation": 1349, "user_id": 6163262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7f3655350c57cb94195d64808b7ba61?s=128&d=identicon&r=PG&f=1", "display_name": "whodini9", "link": "https://stackoverflow.com/users/6163262/whodini9"}, "edited": false, "score": 0, "creation_date": 1491331090, "post_id": 43213898, "comment_id": 73501818, "body": "You could create a model method update_time, and use <code>.map(&amp;:update_time)</code>, but there is probably a slicker way"}], "answers": [{"tags": [], "owner": {"reputation": 3614, "user_id": 1569930, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/7bc43a689388dd4697947ffe8f4c9dcd?s=128&d=identicon&r=PG", "display_name": "eirikir", "link": "https://stackoverflow.com/users/1569930/eirikir"}, "is_accepted": false, "score": 0, "last_activity_date": 1491339108, "creation_date": 1491339108, "answer_id": 43217485, "question_id": 43213898, "link": "https://stackoverflow.com/questions/43213898/ruby-on-rails-how-to-pluck-and-update-all/43217485#43217485", "title": "Ruby on Rails - how to pluck and update_all", "body": "<p>ActiveRecord <code>pluck</code> generates a SQL <code>SELECT</code> query while <code>update_all</code> generates a SQL <code>UPDATE</code> query. You can retrieve data during an <code>UPDATE</code> for certain SQL dialects, e.g. in PostgreSQL <a href=\"https://www.postgresql.org/docs/9.5/static/sql-update.html\" rel=\"nofollow noreferrer\">you can use <code>RETURNING</code></a> to specify which values you want returned from the updated rows. In your case, e.g.:</p>\n\n<pre><code>UPDATE models \n  SET last_import_date = '2017-04-04 20:49:07'\n  WHERE name = 'Some Name'\n  RETURNING id;\n</code></pre>\n\n<p>ActiveRecord doesn't support this, likely because its highly dialect-dependent, and ActiveRecord intends to abstract away from those differences.</p>\n"}, {"tags": [], "owner": {"reputation": 639, "user_id": 7046734, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RQ62P.jpg?s=128&g=1", "display_name": "Mayank", "link": "https://stackoverflow.com/users/7046734/mayank"}, "is_accepted": false, "score": 0, "last_activity_date": 1491406507, "creation_date": 1491406507, "answer_id": 43235696, "question_id": 43213898, "link": "https://stackoverflow.com/questions/43213898/ruby-on-rails-how-to-pluck-and-update-all/43235696#43235696", "title": "Ruby on Rails - how to pluck and update_all", "body": "<p>I don't think there is any such thing is required. Your code is generally used. But if you really want to do this in one query you can try this.</p>\n\n<pre><code>model_hash = Map.where(id: some_id, name: some_name).map { |x| x.update_attributes(last_import_date: DateTime.now) ? [x.id, x.some_name] : [\"value\",\"nil\"] }.to_h\n</code></pre>\n\n<p>Its a complex one though.\nHope this Helps...</p>\n"}], "owner": {"reputation": 6282, "user_id": 1210614, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/918877d79c9865c542cbe4474266fc6f?s=128&d=identicon&r=PG&f=1", "display_name": "jordan", "link": "https://stackoverflow.com/users/1210614/jordan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 290, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1491406507, "creation_date": 1491326948, "question_id": 43213898, "link": "https://stackoverflow.com/questions/43213898/ruby-on-rails-how-to-pluck-and-update-all", "title": "Ruby on Rails - how to pluck and update_all", "body": "<p>I currently am pulling some info out of </p>\n\n<pre><code>model_hash = Model.where(id: some_id, name: some_name).pluck(:name, :id).to_h\n</code></pre>\n\n<p>I'd like to update another attribute on every model that it sees. I know I can write:</p>\n\n<pre><code>Model.where(id: some_id, name: some_name).update_all(last_import_date: DateTime.now)\n</code></pre>\n\n<p>But I'm wondering if there's a way that I can combine the two statements</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "devise"], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 7558352, "user_type": "registered", "profile_image": "https://graph.facebook.com/10208666855854290/picture?type=large", "display_name": "Cristofer Flores Ortega", "link": "https://stackoverflow.com/users/7558352/cristofer-flores-ortega"}, "edited": false, "score": 0, "creation_date": 1491336892, "post_id": 43215429, "comment_id": 73504950, "body": "But how do i nested in the form? i already have a nested account in the form, something like <code>fields_for :account</code> but how do i achieve the same with the user?"}], "tags": [], "owner": {"reputation": 1247, "user_id": 4087989, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/72c9108f519b175d408da0142014d421?s=128&d=identicon&r=PG&f=1", "display_name": "Siva Praveen", "link": "https://stackoverflow.com/users/4087989/siva-praveen"}, "is_accepted": false, "score": 0, "last_activity_date": 1491332702, "last_edit_date": 1491332702, "creation_date": 1491332091, "answer_id": 43215429, "question_id": 43213641, "link": "https://stackoverflow.com/questions/43213641/register-more-than-1-user-using-devise/43215429#43215429", "title": "Register more than 1 user using devise", "body": "<p>You can get the <em>params</em> in the controller action, split the <em>params</em> into number of users and then loop through each user and use super <em>paramas</em>.</p>\n\n<p>Devise creates <code>registration controller</code> with <code>create</code> action.</p>\n\n<p>you can tweak here to get the desired.</p>\n\n<p><code>def create\n      # params = {\"users\"=>{\"test1\"=>{:name=>\"test1\", :age=>20}, \"test2\"=>{:name=>\"test2\", :age=>22}}}\n      params[\"users\"].each do |each_user|\n        super each_user\n      end\n  end</code></p>\n"}], "owner": {"reputation": 1, "user_id": 7558352, "user_type": "registered", "profile_image": "https://graph.facebook.com/10208666855854290/picture?type=large", "display_name": "Cristofer Flores Ortega", "link": "https://stackoverflow.com/users/7558352/cristofer-flores-ortega"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 32, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1491332702, "creation_date": 1491326075, "question_id": 43213641, "link": "https://stackoverflow.com/questions/43213641/register-more-than-1-user-using-devise", "title": "Register more than 1 user using devise", "body": "<p>Does anyone have and idea to register more than 1 user at once with devise?</p>\n\n<p>I have a nested form for users and accounts, because 1 user must have an account, and accounts can have a lot of users, but now i want to just have a button on the register form that says: 'Add another user', and it will append the new fields to the same form for the new user, so when you clicked 'submit', it send a hash with account_attributes nested and also should nest the new user information, kinda bulkified?</p>\n"}, {"tags": ["ruby", "sum", "ruby-hash"], "comments": [{"owner": {"reputation": 3865, "user_id": 4540175, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/a789c8057fed1368f96c15cfbdba6421?s=128&d=identicon&r=PG&f=1", "display_name": "gates", "link": "https://stackoverflow.com/users/4540175/gates"}, "edited": false, "score": 1, "creation_date": 1491323844, "post_id": 43212727, "comment_id": 73497560, "body": "Explain this result = { 1 =&gt; [45], 4 =&gt; [14], 5 =&gt; [26], etc } properly"}, {"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 1, "creation_date": 1491327762, "post_id": 43212727, "comment_id": 73499843, "body": "What is the code you are having trouble with? <a href=\"https://stackoverflow.com\">Stack Overflow</a> is not a Write-My-Code-For-Me-Service. Those <i>do</i> exist, they are called &quot;programmers&quot; and you can hire them for a fee."}], "answers": [{"comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1491329274, "post_id": 43213174, "comment_id": 73500707, "body": "\ud835\udf41, why enclose each sum in an array? I see @llya did the same, so I&#39;m probably missing something."}, {"owner": {"reputation": 394580, "user_id": 479863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ArUCE.jpg?s=128&g=1", "display_name": "mu is too short", "link": "https://stackoverflow.com/users/479863/mu-is-too-short"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1491331375, "post_id": 43213174, "comment_id": 73501970, "body": "@CarySwoveland Because that&#39;s the format the question asked for. I agree that it looks a bit weird but..."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1491332335, "post_id": 43213174, "comment_id": 73502512, "body": "Egad, how did I miss that?"}], "tags": [], "owner": {"reputation": 394580, "user_id": 479863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ArUCE.jpg?s=128&g=1", "display_name": "mu is too short", "link": "https://stackoverflow.com/users/479863/mu-is-too-short"}, "is_accepted": true, "score": 8, "last_activity_date": 1552497425, "last_edit_date": 1552497425, "creation_date": 1491324496, "answer_id": 43213174, "question_id": 43212727, "link": "https://stackoverflow.com/questions/43212727/sum-of-particular-values-in-a-ruby-hash/43213174#43213174", "title": "Sum of particular values in a Ruby hash", "body": "<p>A straightforward way is to say exactly what you mean:</p>\n\n<pre><code>first.map { |k, v| [ k, [ v.values_at(*second[k]).sum ] ] }.to_h\n</code></pre>\n\n<p>If your version of Ruby doesn't have <a href=\"https://ruby-doc.org/core/Array.html#method-i-sum\" rel=\"nofollow noreferrer\"><code>Array#sum</code></a> then use <code>inject(:+)</code>:</p>\n\n<pre><code>first.map { |k, v| [ k, [ v.values_at(*second[k]).inject(:+) ] ] }.to_h\n</code></pre>\n\n<p>You could also skip the <code>map</code>/<code>to_h</code> business by using <code>each_with_object</code> instead:</p>\n\n<pre><code>first.each_with_object({}) { |(k, v), h| h[k] = [ v.values_at(*second[k]).inject(:+) ] }\n</code></pre>\n\n<p>A little time with the <a href=\"https://ruby-doc.org/core/Array.html#method-i-values_at\" rel=\"nofollow noreferrer\"><code>Array#values_at</code> documentation</a> might be fruitful as would the <a href=\"https://ruby-doc.org/core/Enumerable.html\" rel=\"nofollow noreferrer\"><code>Enumerable</code> documentation</a>.</p>\n"}, {"tags": [], "owner": {"reputation": 73, "user_id": 6882663, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-7fN35JEsAHo/AAAAAAAAAAI/AAAAAAAAATU/hTdMmxf2X2M/photo.jpg?sz=128", "display_name": "Samantha Klonaris", "link": "https://stackoverflow.com/users/6882663/samantha-klonaris"}, "is_accepted": false, "score": 1, "last_activity_date": 1491324844, "creation_date": 1491324844, "answer_id": 43213274, "question_id": 43212727, "link": "https://stackoverflow.com/questions/43212727/sum-of-particular-values-in-a-ruby-hash/43213274#43213274", "title": "Sum of particular values in a Ruby hash", "body": "<p>Try this:</p>\n\n<pre><code>def sum(list, indices)\n    sum = 0\n    indices.each do |index|\n        sum += list[index]\n    end\n   return sum\nend\n</code></pre>\n\n<p>And then</p>\n\n<p><code>second.map { |k, v| [k, sum(first[k], v)] }.to_h</code></p>\n"}, {"tags": [], "owner": {"reputation": 12629, "user_id": 4739257, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/MdhEs.jpg?s=128&g=1", "display_name": "Ilya", "link": "https://stackoverflow.com/users/4739257/ilya"}, "is_accepted": false, "score": 3, "last_activity_date": 1491460652, "last_edit_date": 1491460652, "creation_date": 1491326123, "answer_id": 43213655, "question_id": 43212727, "link": "https://stackoverflow.com/questions/43212727/sum-of-particular-values-in-a-ruby-hash/43213655#43213655", "title": "Sum of particular values in a Ruby hash", "body": "<p>More natural way is to use <code>Hash#merge</code>, I think:</p>\n\n<pre><code>first.merge(second) { |_, f, s| [f.values_at(*s).sum] }\n#=&gt; {1=&gt;[45], 4=&gt;[14], 5=&gt;[26], 6=&gt;[68], 7=&gt;[36], 8=&gt;[42], 9=&gt;[16]}\n</code></pre>\n\n<p>Of course, you can use <code>inject(:+)</code> instead of <code>sum</code> if your Ruby version &lt; 2.4</p>\n"}, {"tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": false, "score": 2, "last_activity_date": 1491328766, "creation_date": 1491328766, "answer_id": 43214405, "question_id": 43212727, "link": "https://stackoverflow.com/questions/43212727/sum-of-particular-values-in-a-ruby-hash/43214405#43214405", "title": "Sum of particular values in a Ruby hash", "body": "<p>Since you say the elements of <code>second</code> are ranges, you might write them as such:</p>\n\n<pre><code>second = { 1=&gt;0..2, 4=&gt;2..3, 5=&gt;2..3, 6=&gt;0..3, 7=&gt;1..3, 8=&gt;1..3, 9=&gt;2..3 }\n</code></pre>\n\n<p>Then</p>\n\n<pre><code>second.merge(second) { |k,o,_| first[k].values_at(*o).sum }\n  #=&gt; {1=&gt;45, 4=&gt;14, 5=&gt;26, 6=&gt;68, 7=&gt;36, 8=&gt;42, 9=&gt;16}\n</code></pre>\n\n<p>This uses the form of <a href=\"http://ruby-doc.org/core-2.4.0/Hash.html#method-i-merge\" rel=\"nofollow noreferrer\">Hash#merge</a> that employs a block to determine the values of keys that are present in both hashes being merged, which here is all keys. See the doc for details, particularly the values of the three block variables <code>k</code>, <code>o</code>, and <code>n</code>. (Here I've replaced <code>n</code> with <code>_</code> to signify that it is not used in the block calculation.)</p>\n"}], "owner": {"reputation": 9729, "user_id": 4554116, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/cu8de.png?s=128&g=1", "display_name": "Julius", "link": "https://stackoverflow.com/users/4554116/julius"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1046, "favorite_count": 0, "accepted_answer_id": 43213174, "answer_count": 4, "score": 0, "last_activity_date": 1552497425, "creation_date": 1491323073, "last_edit_date": 1494691302, "question_id": 43212727, "link": "https://stackoverflow.com/questions/43212727/sum-of-particular-values-in-a-ruby-hash", "title": "Sum of particular values in a Ruby hash", "body": "<p>I have two hashes:</p>\n\n<pre><code>first = { 1 =&gt; [15, 15, 15, 8], 4 =&gt; [11, 12, 7, 7], 5 =&gt; [14, 17, 13, 13],\n          6 =&gt; [19, 19, 15, 15], 7 =&gt; [5, 12, 12, 12], 8 =&gt; [10, 14, 14, 14], \n          9 =&gt; [8, 7, 8, 8] } \n\nsecond = { 1 =&gt; [0, 1, 2], 4 =&gt; [2, 3], 5 =&gt; [2, 3], 6 =&gt; [0, 1, 2, 3], \n           7 =&gt; [1, 2, 3], 8 =&gt; [1, 2, 3], 9 =&gt; [2, 3] }\n</code></pre>\n\n<p>As you see they both use same keys, but values are different. <code>second</code>'s values contains ranges of indexes of the <code>first</code>'s values and I need to sum only those <code>first</code>'s values that are in those ranges. </p>\n\n<p>The expected output:</p>\n\n<pre><code>result = { 1 =&gt; [45], 4 =&gt; [14], 5 =&gt; [26], etc }\n</code></pre>\n"}, {"tags": ["mysql", "ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 4243, "user_id": 4638378, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/pGqPN.png?s=128&g=1", "display_name": "Brian", "link": "https://stackoverflow.com/users/4638378/brian"}, "edited": false, "score": 0, "creation_date": 1491323686, "post_id": 43212640, "comment_id": 73497454, "body": "Possible duplicate of <a href=\"http://stackoverflow.com/questions/18505277/equals-vs-like-for-date-data-type\">Equals(=) vs. LIKE for date data type</a>"}, {"owner": {"reputation": 394580, "user_id": 479863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ArUCE.jpg?s=128&g=1", "display_name": "mu is too short", "link": "https://stackoverflow.com/users/479863/mu-is-too-short"}, "reply_to_user": {"reputation": 4243, "user_id": 4638378, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/pGqPN.png?s=128&g=1", "display_name": "Brian", "link": "https://stackoverflow.com/users/4638378/brian"}, "edited": false, "score": 0, "creation_date": 1491323822, "post_id": 43212640, "comment_id": 73497547, "body": "@Brian I don&#39;t see how that&#39;s a duplicate: different database, different types."}, {"owner": {"reputation": 394580, "user_id": 479863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ArUCE.jpg?s=128&g=1", "display_name": "mu is too short", "link": "https://stackoverflow.com/users/479863/mu-is-too-short"}, "edited": false, "score": 0, "creation_date": 1491323977, "post_id": 43212640, "comment_id": 73497635, "body": "Have you checked <code>Flight.where(arrival_date_time: &quot;2017-04-02 23:29:43&quot;.to_datetime).to_sql</code> to make sure you&#39;re running the query you think you are?"}, {"owner": {"reputation": 101, "user_id": 6180997, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/c4bce14127bf06dc5cbf719731007307?s=128&d=identicon&r=PG&f=1", "display_name": "chaosfirebit", "link": "https://stackoverflow.com/users/6180997/chaosfirebit"}, "reply_to_user": {"reputation": 394580, "user_id": 479863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ArUCE.jpg?s=128&g=1", "display_name": "mu is too short", "link": "https://stackoverflow.com/users/479863/mu-is-too-short"}, "edited": false, "score": 0, "creation_date": 1491324269, "post_id": 43212640, "comment_id": 73497816, "body": "@muistooshort  am pretty sure it is sql after all it returns this: <code>Flight Load (0.2ms)  SELECT &quot;flights&quot;.* FROM &quot;flights&quot; WHERE &quot;flights&quot;.&quot;arrival_date_time&quot; = ?  [[&quot;arrival_date_time&quot;, 2017-04-02 23:29:43 UTC]]  =&gt; #&lt;ActiveRecord::Relation []&gt;</code>"}, {"owner": {"reputation": 101, "user_id": 6180997, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/c4bce14127bf06dc5cbf719731007307?s=128&d=identicon&r=PG&f=1", "display_name": "chaosfirebit", "link": "https://stackoverflow.com/users/6180997/chaosfirebit"}, "reply_to_user": {"reputation": 4243, "user_id": 4638378, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/pGqPN.png?s=128&g=1", "display_name": "Brian", "link": "https://stackoverflow.com/users/4638378/brian"}, "edited": false, "score": 0, "creation_date": 1491324500, "post_id": 43212640, "comment_id": 73497950, "body": "@Brian Please double check my question before marking as duplicate thanks"}, {"owner": {"reputation": 3997, "user_id": 3998420, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/55ea542584d3fd2a430c3d409bdafc95?s=128&d=identicon&r=PG&f=1", "display_name": "bkunzi01", "link": "https://stackoverflow.com/users/3998420/bkunzi01"}, "edited": false, "score": 0, "creation_date": 1491325805, "post_id": 43212640, "comment_id": 73498702, "body": "Is arrival_date_time a string or date object?  Is to_datetime doing what you think it is?  You&#39;re far better off using rails strptime method to specify the exact format the string you&#39;re converting is in to ensure you get the right result."}, {"owner": {"reputation": 101, "user_id": 6180997, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/c4bce14127bf06dc5cbf719731007307?s=128&d=identicon&r=PG&f=1", "display_name": "chaosfirebit", "link": "https://stackoverflow.com/users/6180997/chaosfirebit"}, "reply_to_user": {"reputation": 3997, "user_id": 3998420, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/55ea542584d3fd2a430c3d409bdafc95?s=128&d=identicon&r=PG&f=1", "display_name": "bkunzi01", "link": "https://stackoverflow.com/users/3998420/bkunzi01"}, "edited": false, "score": 0, "creation_date": 1491326084, "post_id": 43212640, "comment_id": 73498870, "body": "@bkunzi01 believe me or not, try searching via a date yourself with any model with a datetime. It will NOT WORK"}, {"owner": {"reputation": 3997, "user_id": 3998420, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/55ea542584d3fd2a430c3d409bdafc95?s=128&d=identicon&r=PG&f=1", "display_name": "bkunzi01", "link": "https://stackoverflow.com/users/3998420/bkunzi01"}, "edited": false, "score": 0, "creation_date": 1491326806, "post_id": 43212640, "comment_id": 73499308, "body": "If you&#39;re searching by date on a column with datetime you then need to do  a search by range...for example all datetimes between day + 00 hours and day +23:59 hours.  Eg. @flights = Flight.where(arrival_date_time: DateTime.now.beginning_of_day.. DateTime.now.end_of_day)"}, {"owner": {"reputation": 4243, "user_id": 4638378, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/pGqPN.png?s=128&g=1", "display_name": "Brian", "link": "https://stackoverflow.com/users/4638378/brian"}, "edited": false, "score": 0, "creation_date": 1491338452, "post_id": 43212640, "comment_id": 73505768, "body": "@chaosfirebit I think the point in the question I linked may still apply - you may be trying to compare a string against a date and having equality issues due to a loss of precision."}], "answers": [{"comments": [{"owner": {"reputation": 101, "user_id": 6180997, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/c4bce14127bf06dc5cbf719731007307?s=128&d=identicon&r=PG&f=1", "display_name": "chaosfirebit", "link": "https://stackoverflow.com/users/6180997/chaosfirebit"}, "edited": false, "score": 0, "creation_date": 1491371155, "post_id": 43217452, "comment_id": 73515860, "body": "It was definitely the lack of precision. result_1 and result_3 solved it but not result_2"}], "tags": [], "owner": {"reputation": 4243, "user_id": 4638378, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/pGqPN.png?s=128&g=1", "display_name": "Brian", "link": "https://stackoverflow.com/users/4638378/brian"}, "is_accepted": true, "score": 1, "last_activity_date": 1491339005, "creation_date": 1491339005, "answer_id": 43217452, "question_id": 43212640, "link": "https://stackoverflow.com/questions/43212640/rails-5-not-finding-date-field-in-sql-table/43217452#43217452", "title": "Rails 5 not finding date field in sql table", "body": "<p>I think you're encountering an issue due to a lack of precision. Try the following searches:</p>\n\n<pre><code>search_time = \"2017-04-02 23:29:43\".to_datetime\nresult_1 = Flight.where(\"arrival_date_time between ? and ?\", search_time - 1.second, search_time + 1.second)\nresult_2 = Flight.where(\"arrival_date_time between ? and ?\", search_time - 1.second, search_time)\nresult_3 = Flight.where(\"arrival_date_time between ? and ?\", search_time, search_time + 1.second)\n</code></pre>\n\n<p>For me, I get the expected result for <code>result_1</code> and <code>result_3</code>, but not <code>result_2</code>. This implies that there's a rounding error someplace, but that as long as your search can tolerate a precision of plus or minus one second, you can rewrite your query as in my <code>result_1</code> line - or better yet, convert it to a scope.</p>\n"}], "owner": {"reputation": 101, "user_id": 6180997, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/c4bce14127bf06dc5cbf719731007307?s=128&d=identicon&r=PG&f=1", "display_name": "chaosfirebit", "link": "https://stackoverflow.com/users/6180997/chaosfirebit"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 62, "favorite_count": 0, "accepted_answer_id": 43217452, "answer_count": 1, "score": 0, "last_activity_date": 1491339005, "creation_date": 1491322811, "last_edit_date": 1491324691, "question_id": 43212640, "link": "https://stackoverflow.com/questions/43212640/rails-5-not-finding-date-field-in-sql-table", "title": "Rails 5 not finding date field in sql table", "body": "<p>This rails sql query: </p>\n\n<pre><code>Flight.where(arrival_date_time: \"2017-04-02 23:29:43\".to_datetime)\n</code></pre>\n\n<p>Does not work even though I have this in my database: </p>\n\n<pre><code>#&lt;Flight id: 1, departed_from_id: 1, arriving_to_id: 3, departure_date_time: \"2017-04-02 16:29:43\", arrival_date_time: \"2017-04-02 23:29:43\", created_at: \"2017-04-02 13:29:43\", updated_at: \"2017-04-02 13:29:43\"&gt;\n</code></pre>\n\n<p>It returns with this: </p>\n\n<pre><code>Flight Load (0.2ms)  SELECT \"flights\".* FROM \"flights\" WHERE \"flights\".\"arrival_date_time\" = ?  [[\"arrival_date_time\", 2017-04-02 23:29:43 UTC]]\n =&gt; #&lt;ActiveRecord::Relation []&gt;\n</code></pre>\n\n<p>I have also tried </p>\n\n<pre><code>Flight.find_by(arrival_date_time: \"2017-04-02 23:29:43\".to_datetime)\n</code></pre>\n\n<p>and</p>\n\n<pre><code>Flight.where(\"arrival_date_time = ?  \", \"2017-04-02 23:29:43\".to_datetime)\n</code></pre>\n\n<p>All 3 queries return nil.</p>\n\n<p>PS: <code>arrival_date_time</code> is of class <code>ActiveSupport::TimeWithZone</code> </p>\n"}, {"tags": ["ruby-on-rails", "ruby", "google-cloud-datastore"], "answers": [{"tags": [], "owner": {"reputation": 2719, "user_id": 6029837, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1aac8f1edff43955f080f48d366242dd?s=128&d=identicon&r=PG", "display_name": "Renato Byrro", "link": "https://stackoverflow.com/users/6029837/renato-byrro"}, "is_accepted": false, "score": 0, "last_activity_date": 1492017578, "creation_date": 1492017578, "answer_id": 43375858, "question_id": 43212453, "link": "https://stackoverflow.com/questions/43212453/how-to-create-one-to-many-relationship-into-google-cloud-datastore-in-ruby/43375858#43375858", "title": "How to create one to many relationship into Google Cloud Datastore in Ruby", "body": "<p>You can declare book as a child of an author:</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>book_key = datastore.key [[\"Author\", \"Someone\"], [\"Book\", \"sampleBook\"]]\n</code></pre>\n\n<p>See more at <a href=\"https://cloud.google.com/datastore/docs/concepts/entities#datastore-key-with-parent-ruby\" rel=\"nofollow noreferrer\">Entities, Properties, and Keys >> Ancestor Paths</a> documentation.</p>\n\n<p><strong>Think VERY CAREFULLY before using this structure</strong>. If a book happens to have multiple authors, you'll need to replicate books many times for each author. In Datastore, each child can have only one parent. There's not an <em>official</em> many-to-many relationship in Datastore, although you can <em>mimic</em> it in your code and data structure, similarly to how you're already doing (with a custom <code>authorid</code> property in Book entity).</p>\n"}, {"tags": [], "owner": {"reputation": 6270, "user_id": 6586255, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Ozmjk.png?s=128&g=1", "display_name": "TheAddonDepot", "link": "https://stackoverflow.com/users/6586255/theaddondepot"}, "is_accepted": false, "score": 0, "last_activity_date": 1493408731, "last_edit_date": 1493408731, "creation_date": 1493262809, "answer_id": 43648024, "question_id": 43212453, "link": "https://stackoverflow.com/questions/43212453/how-to-create-one-to-many-relationship-into-google-cloud-datastore-in-ruby/43648024#43648024", "title": "How to create one to many relationship into Google Cloud Datastore in Ruby", "body": "<p>I concur with Renato. You essentially have a many-to-many scenario. An Author can write several Books and conversely Books can have multiple Authors. </p>\n\n<p>Unfortunately there is no explicit mechanism for many-to-many relationships in Google Datastore. But you can still structure your entities to model the relationship. </p>\n\n<p>For example, instead of using a hierarchical model via ancestor paths, add an array to your Book entity that store keys that reference Author entities which might look something like this:</p>\n\n<pre><code>book_key = datastore.key \"Book\"\n\nauthor_key1 = datastore.key \"Author\", \"john\"\nauthor_key2 = datastore.key \"Author\", \"jane\"\n\nauthor_entity1 = datastore.entity author_key1 do |t|\n  t[\"name\"] = \"Doe, John\"\nend\n\nauthor_entity2 = datastore.entity author_key2 do |t|\n  t[\"name\"] = \"Doe, Jane\"\nend\n\ndatastore.save(author_entity1, author_entity2)\n</code></pre>\n\n<p>And the array property on the Book entity would look something like this:</p>\n\n<pre><code>book_entity = datastore.entity book_key do |t|\n  t[\"authors\"] = [author_key1, author_key2]\nend\n</code></pre>\n\n<p>If you want to know all the books associated with author John Doe in your database all you need do is query the \"authors\" array property:</p>\n\n<pre><code>query = Google::Cloud::Datastore::Query.new\nquery.kind(\"Book\").\n  where(\"authors\", \"=\", datastore.key(\"Author\",\"john\"))\n\nbooks_by_john = datastore.run query\n</code></pre>\n\n<p>Notice that I could have also gone the other way and created an array of Book keys on Author entities. But had I gone that route and tried to model a prolific Author like say Stephen King...well that Author entity would end up being pretty bloated with key references to Book entities, so you have to be selective as to which side of the relationship you add the array and try to go for the entities less likely to have bloat.</p>\n"}], "owner": {"reputation": 81, "user_id": 7815454, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DzYyr.jpg?s=128&g=1", "display_name": "coffee man", "link": "https://stackoverflow.com/users/7815454/coffee-man"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 406, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1493408731, "creation_date": 1491322277, "question_id": 43212453, "link": "https://stackoverflow.com/questions/43212453/how-to-create-one-to-many-relationship-into-google-cloud-datastore-in-ruby", "title": "How to create one to many relationship into Google Cloud Datastore in Ruby", "body": "<p>May I know how to create one to many relationship into Google Cloud Datastore in Ruby and Ruby on Rails?</p>\n\n<p>Now I'm writing a code like this.</p>\n\n<pre><code>class Author\n  attr_accessor :name, :books\nend\n\nclass Book\n  attr_accessor :title, :description, :author_id\nend\n\n&gt; @author.books\n[2, 3, 5]\n&gt; Book.find(@author.books.first)\n&lt;Book: ....\n</code></pre>\n\n<p>I'm putting some Book ids into Author's books.\nBut I feel there is more sophisticated way.</p>\n\n<p>I'd like to implement the code using 'belongs_to' and 'has_many' into Google Cloud Datastore. Is it possible?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "rubygems"], "comments": [{"owner": {"reputation": 3997, "user_id": 3998420, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/55ea542584d3fd2a430c3d409bdafc95?s=128&d=identicon&r=PG&f=1", "display_name": "bkunzi01", "link": "https://stackoverflow.com/users/3998420/bkunzi01"}, "edited": false, "score": 0, "creation_date": 1491321782, "post_id": 43212216, "comment_id": 73496165, "body": "Post the error message from your log please"}, {"owner": {"reputation": 711, "user_id": 1516373, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ot7S1.jpg?s=128&g=1", "display_name": "David S.", "link": "https://stackoverflow.com/users/1516373/david-s"}, "edited": false, "score": 0, "creation_date": 1491322061, "post_id": 43212216, "comment_id": 73496366, "body": "Try prepending <code>bundle exec</code> to what you are trying to invoke from the command line."}, {"owner": {"reputation": 161, "user_id": 7705189, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/06587ae42507bc7c5e34e15e829bb9b6?s=128&d=identicon&r=PG", "display_name": "Hima Chhag", "link": "https://stackoverflow.com/users/7705189/hima-chhag"}, "reply_to_user": {"reputation": 3997, "user_id": 3998420, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/55ea542584d3fd2a430c3d409bdafc95?s=128&d=identicon&r=PG&f=1", "display_name": "bkunzi01", "link": "https://stackoverflow.com/users/3998420/bkunzi01"}, "edited": false, "score": 0, "creation_date": 1491322223, "post_id": 43212216, "comment_id": 73496487, "body": "@bkunzi01 Thank you for your suggestion. I have improved my question."}, {"owner": {"reputation": 161, "user_id": 7705189, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/06587ae42507bc7c5e34e15e829bb9b6?s=128&d=identicon&r=PG", "display_name": "Hima Chhag", "link": "https://stackoverflow.com/users/7705189/hima-chhag"}, "reply_to_user": {"reputation": 711, "user_id": 1516373, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ot7S1.jpg?s=128&g=1", "display_name": "David S.", "link": "https://stackoverflow.com/users/1516373/david-s"}, "edited": false, "score": 0, "creation_date": 1491322268, "post_id": 43212216, "comment_id": 73496519, "body": "@David S. Thank you for your suggestion. It gives me &quot;Could not locate Gemfile or .bundle/ directory&quot; error."}, {"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1491326027, "post_id": 43212216, "comment_id": 73498839, "body": "Did you push all your changes to RubyGems as a new version? And maybe try making the scripts executables (<code>chmod a+x</code>)"}], "answers": [{"comments": [{"owner": {"reputation": 161, "user_id": 7705189, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/06587ae42507bc7c5e34e15e829bb9b6?s=128&d=identicon&r=PG", "display_name": "Hima Chhag", "link": "https://stackoverflow.com/users/7705189/hima-chhag"}, "edited": false, "score": 1, "creation_date": 1491326795, "post_id": 43213653, "comment_id": 73499301, "body": "You are right. Initially, I also tried popular-deals but didn&#39;t work. Maybe because I had required &#39;pry&#39;. After I removed it, it started working. I am really not sure about how it started working as I tried many different things. But yes, now it works with popular-deals. Thank you so much for your help!"}], "tags": [], "owner": {"reputation": 711, "user_id": 1516373, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ot7S1.jpg?s=128&g=1", "display_name": "David S.", "link": "https://stackoverflow.com/users/1516373/david-s"}, "is_accepted": true, "score": 2, "last_activity_date": 1491326114, "creation_date": 1491326114, "answer_id": 43213653, "question_id": 43212216, "link": "https://stackoverflow.com/questions/43212216/built-a-gem-but-when-tried-it-gives-an-error-that-command-not-found/43213653#43213653", "title": "Built a gem but when tried it gives an error that command not found", "body": "<p>I was able to get it to work by doing the following. I think that in your original answer you were executing <code>popular_deals</code>, when the command is actually <code>popular-deals</code> and not the same as the name of the gem!</p>\n\n<pre><code>mkdir deals_test\ncd deals_test\n# Contents shown below\ntouch Gemfile\nbundle\nbundle exec popular-deals\n</code></pre>\n\n<p>Gemfile:</p>\n\n<pre><code>source 'https://rubygems.org'\n\ngem 'popular_deals'\n</code></pre>\n\n<p>I'm using MRI 2.3.3</p>\n"}], "owner": {"reputation": 161, "user_id": 7705189, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/06587ae42507bc7c5e34e15e829bb9b6?s=128&d=identicon&r=PG", "display_name": "Hima Chhag", "link": "https://stackoverflow.com/users/7705189/hima-chhag"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 67, "favorite_count": 0, "accepted_answer_id": 43213653, "answer_count": 1, "score": 0, "last_activity_date": 1491326114, "creation_date": 1491321594, "last_edit_date": 1491322650, "question_id": 43212216, "link": "https://stackoverflow.com/questions/43212216/built-a-gem-but-when-tried-it-gives-an-error-that-command-not-found", "title": "Built a gem but when tried it gives an error that command not found", "body": "<p>Hi I have built a CLI Ruby gem.</p>\n\n<p>If i try to run it through git repo, it works perfectly fine. But if I try to install a gem and run it, it gives me an error that command not found. </p>\n\n<p>Error message..</p>\n\n<pre><code> popular_deals                                                                                                                                                          \n-su: popular_deals: command not found\n</code></pre>\n\n<p>A friend of mine also tried, he got this error message</p>\n\n<pre><code>WARN: Unresolved specs during Gem::Specification.reset:\n      colorize (&gt;= 0)\nWARN: Clearing out unresolved specs.\nPlease report a bug if this causes problems.\n/Users/M/.rvm/gems/ruby-2.2.3/gems/popular_deals-0.2.0/bin/popular-deals:3:in `require': cannot load such file -- popular_deals (LoadError)\n    from /Users/M/.rvm/gems/ruby-2.2.3/gems/popular_deals-0.2.0/bin/popular-deals:3:in `&lt;top (required)&gt;'\n    from /Users/M/.rvm/gems/ruby-2.2.3/bin/popular-deals:23:in `load'\n    from /Users/M/.rvm/gems/ruby-2.2.3/bin/popular-deals:23:in `&lt;main&gt;'\n    from /Users/M/.rvm/gems/ruby-2.2.3/bin/ruby_executable_hooks:15:in `eval'\n    from /Users/M/.rvm/gems/ruby-2.2.3/bin/ruby_executable_hooks:15:in `&lt;main&gt;' \n</code></pre>\n\n<p>Here is a link of my gem..</p>\n\n<p><a href=\"https://rubygems.org/gems/popular_deals\" rel=\"nofollow noreferrer\">https://rubygems.org/gems/popular_deals</a></p>\n\n<p>Here is a link of github repo..</p>\n\n<p><a href=\"https://github.com/HimaChitalia/popular-deals-from-slickdeals.net-cli\" rel=\"nofollow noreferrer\">https://github.com/HimaChitalia/popular-deals-from-slickdeals.net-cli</a></p>\n\n<p>Any suggestions? Thanks a lot for help!</p>\n"}, {"tags": ["html", "ruby-on-rails", "ruby"], "answers": [{"comments": [{"owner": {"reputation": 73, "user_id": 6042800, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh5.googleusercontent.com/-mf6A3hcbiiw/AAAAAAAAAAI/AAAAAAAACjI/jNvymFJYDME/photo.jpg?sz=128", "display_name": "Kait Jardine", "link": "https://stackoverflow.com/users/6042800/kait-jardine"}, "edited": false, "score": 0, "creation_date": 1491328765, "post_id": 43212172, "comment_id": 73500404, "body": "That gives an undefined method error. &quot;undefined method `path&#39; for nil:NilClass&quot;"}, {"owner": {"reputation": 12440, "user_id": 308731, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/eQxFn.jpg?s=128&g=1", "display_name": "Eyeslandic", "link": "https://stackoverflow.com/users/308731/eyeslandic"}, "reply_to_user": {"reputation": 73, "user_id": 6042800, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh5.googleusercontent.com/-mf6A3hcbiiw/AAAAAAAAAAI/AAAAAAAACjI/jNvymFJYDME/photo.jpg?sz=128", "display_name": "Kait Jardine", "link": "https://stackoverflow.com/users/6042800/kait-jardine"}, "edited": false, "score": 0, "creation_date": 1491333432, "post_id": 43212172, "comment_id": 73503079, "body": "Well, then your <code>default_image</code> is <code>nil</code>, that&#39;s another problem."}], "tags": [], "owner": {"reputation": 12440, "user_id": 308731, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/eQxFn.jpg?s=128&g=1", "display_name": "Eyeslandic", "link": "https://stackoverflow.com/users/308731/eyeslandic"}, "is_accepted": false, "score": 0, "last_activity_date": 1491321488, "creation_date": 1491321488, "answer_id": 43212172, "question_id": 43212119, "link": "https://stackoverflow.com/questions/43212119/trying-to-make-the-image-source-one-of-the-objects-parameters/43212172#43212172", "title": "Trying to make the image source one of the object&#39;s parameters", "body": "<p>Use the rails helper <a href=\"https://apidock.com/rails/ActionView/Helpers/AssetTagHelper/image_tag\" rel=\"nofollow noreferrer\"><code>image_tag</code></a></p>\n\n<pre><code>&lt;div class=\"panel-body\"&gt;\n  &lt;%= image_tag(product.default_image.path, class: 'img-responsive') %&gt;\n&lt;/div&gt;\n</code></pre>\n"}], "owner": {"reputation": 73, "user_id": 6042800, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh5.googleusercontent.com/-mf6A3hcbiiw/AAAAAAAAAAI/AAAAAAAACjI/jNvymFJYDME/photo.jpg?sz=128", "display_name": "Kait Jardine", "link": "https://stackoverflow.com/users/6042800/kait-jardine"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 19, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1491321488, "creation_date": 1491321343, "question_id": 43212119, "link": "https://stackoverflow.com/questions/43212119/trying-to-make-the-image-source-one-of-the-objects-parameters", "title": "Trying to make the image source one of the object&#39;s parameters", "body": "<p>I'm working in an hmtl.erb file trying to make the image source the link that is saved as a parameter for the product object.</p>\n\n<pre><code>&lt;% @products.each do |categories,products| %&gt;\n&lt;% products.each do |product| %&gt;\n&lt;div class=\"container\"&gt;    \n&lt;div class=\"row\"&gt;\n    &lt;div class=\"col-sm-4\"&gt;\n        &lt;div class=\"panel panel-primary\"&gt;\n            &lt;div class=\"panel-heading\"&gt;\n                &lt;%= link_to product.name, product_path(product.permalink) %&gt;&lt;/div&gt;\n                &lt;%-# the image source link below is not working -%&gt;\n                &lt;div class=\"panel-body\"&gt;&lt;img src= product.default_image.path class=\"img-responsive\" style=\"height: 250 width:250\" alt=\"Image\"&gt;&lt;/div&gt;\n                &lt;div class=\"panel-footer\"&gt;&lt;%= product.short_description %&gt;&lt;/div&gt;\n        &lt;/div&gt;\n    &lt;/div&gt;\n&lt;/div&gt;\n&lt;/div&gt;&lt;br&gt;\n&lt;%end%&gt;\n</code></pre>\n\n<p>I have tried putting that in quotes and doing @product.default_image.path. Nothing that I have tried works</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "activerecord"], "comments": [{"owner": {"reputation": 6227, "user_id": 808533, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/qSPq0.jpg?s=128&g=1", "display_name": "prasad.surase", "link": "https://stackoverflow.com/users/808533/prasad-surase"}, "edited": false, "score": 0, "creation_date": 1491323794, "post_id": 43211927, "comment_id": 73497524, "body": "Since, User has many Accounts, you can accept nested attributes for Accounts in User model. Now, Account belongs to Company and User. So, for Company,  you can provide a select box in the fields_for Account."}, {"owner": {"reputation": 699, "user_id": 6873497, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/7e17e7b7f298bbf51382bd565add516a?s=128&d=identicon&r=PG&f=1", "display_name": "matiss", "link": "https://stackoverflow.com/users/6873497/matiss"}, "reply_to_user": {"reputation": 6227, "user_id": 808533, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/qSPq0.jpg?s=128&g=1", "display_name": "prasad.surase", "link": "https://stackoverflow.com/users/808533/prasad-surase"}, "edited": false, "score": 0, "creation_date": 1491323999, "post_id": 43211927, "comment_id": 73497650, "body": "@prasad.surase Thank you. Yes, this could be something I can do. For now I was thinking, how do I write it in console to see it adds multiple Companies to User?"}, {"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1491326130, "post_id": 43211927, "comment_id": 73498896, "body": "the <a href=\"https://github.com/jamis/bulk_insert\" rel=\"nofollow noreferrer\">bulk_insert</a> gem can be used."}, {"owner": {"reputation": 699, "user_id": 6873497, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/7e17e7b7f298bbf51382bd565add516a?s=128&d=identicon&r=PG&f=1", "display_name": "matiss", "link": "https://stackoverflow.com/users/6873497/matiss"}, "reply_to_user": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1491326400, "post_id": 43211927, "comment_id": 73499056, "body": "@maxple Thank you, didn&#39;t know about that. I expect for each User to have up to ~5 Companies. Not sure if this is &quot;bulk_insert&quot; case. Isn&#39;t there some relatively simple query to do the trick?"}, {"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1491327253, "post_id": 43211927, "comment_id": 73499554, "body": "bulk_insert is relatively simple, in fact, compared to building a <code>INSERT TO</code> SQL statement by hand, which is something people sometimes do."}], "answers": [{"comments": [{"owner": {"reputation": 699, "user_id": 6873497, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/7e17e7b7f298bbf51382bd565add516a?s=128&d=identicon&r=PG&f=1", "display_name": "matiss", "link": "https://stackoverflow.com/users/6873497/matiss"}, "edited": false, "score": 0, "creation_date": 1491328449, "post_id": 43214032, "comment_id": 73500219, "body": "Ok, I could try this. As I understand this would work for adding Companies to User. How I could do Edit, e.g., remove Company with ID=2 and add Company with ID=3 to User with ID=1 ? Can &quot;bulk_insert&quot; gem do some update action as well or for that I would do something else?"}, {"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "reply_to_user": {"reputation": 699, "user_id": 6873497, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/7e17e7b7f298bbf51382bd565add516a?s=128&d=identicon&r=PG&f=1", "display_name": "matiss", "link": "https://stackoverflow.com/users/6873497/matiss"}, "edited": false, "score": 0, "creation_date": 1491328590, "post_id": 43214032, "comment_id": 73500306, "body": "Deleting and creating in a single query is getting into more complex SQL than I&#39;m familiar with."}, {"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "reply_to_user": {"reputation": 699, "user_id": 6873497, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/7e17e7b7f298bbf51382bd565add516a?s=128&d=identicon&r=PG&f=1", "display_name": "matiss", "link": "https://stackoverflow.com/users/6873497/matiss"}, "edited": false, "score": 0, "creation_date": 1491328710, "post_id": 43214032, "comment_id": 73500375, "body": "There is already the <code>update_all</code> and <code>delete_all</code> in rails, there just isn&#39;t a similar one for inserts as far as I&#39;m aware."}, {"owner": {"reputation": 699, "user_id": 6873497, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/7e17e7b7f298bbf51382bd565add516a?s=128&d=identicon&r=PG&f=1", "display_name": "matiss", "link": "https://stackoverflow.com/users/6873497/matiss"}, "edited": false, "score": 0, "creation_date": 1491330000, "post_id": 43214032, "comment_id": 73501143, "body": "Yes, I&#39;m  familiar with <code>update_all</code> - use that in one of my models and it works just fine. My initial thinking was to use this tagging approach - <a href=\"https://rubyplus.com/articles/4241-Tagging-from-Scratch-in-Rails-5\" rel=\"nofollow noreferrer\">rubyplus.com/articles/4241-Tagging-from-Scratch-in-Rails-5</a> However so far I did not manage to have it working in my case."}], "tags": [], "owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "is_accepted": false, "score": 1, "last_activity_date": 1491327420, "creation_date": 1491327420, "answer_id": 43214032, "question_id": 43211927, "link": "https://stackoverflow.com/questions/43211927/rails-5-add-edit-multiple-records-in-has-many-through-relationship/43214032#43214032", "title": "Rails 5: add/edit multiple records in &quot;has_many through&quot; relationship", "body": "<p>Here's an example with the <a href=\"https://github.com/jamis/bulk_insert\" rel=\"nofollow noreferrer\">bulk_insert</a> gem:</p>\n\n<pre><code>company_ids = [1,2]\nuser_id = 1\n\nAccount.bulk_insert(\n  values: company_ids.map do |company_id|\n    {\n      user_id: user_id,\n      company_id: company_id,\n      created_at: Time.now,\n      updated_at: Time.now\n    }\n  end\n)\n</code></pre>\n"}], "owner": {"reputation": 699, "user_id": 6873497, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/7e17e7b7f298bbf51382bd565add516a?s=128&d=identicon&r=PG&f=1", "display_name": "matiss", "link": "https://stackoverflow.com/users/6873497/matiss"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 932, "favorite_count": 1, "answer_count": 1, "score": 1, "last_activity_date": 1491648552, "creation_date": 1491320812, "last_edit_date": 1491648552, "question_id": 43211927, "link": "https://stackoverflow.com/questions/43211927/rails-5-add-edit-multiple-records-in-has-many-through-relationship", "title": "Rails 5: add/edit multiple records in &quot;has_many through&quot; relationship", "body": "<p>I have classic <code>has_many through</code> relationship where I need to be able to <strong>add multiple Companies to particular User</strong>. Models look like this:</p>\n\n<pre><code>class Company &lt; ApplicationRecord\n  has_many :accounts, dependent: :destroy\n  has_many :users, through: :accounts\nend\n\nclass Account &lt; ApplicationRecord\n  belongs_to :company, inverse_of: :accounts\n  belongs_to :user, inverse_of: :accounts\n  accepts_nested_attributes_for :company, :user\nend\n\nclass User &lt; ApplicationRecord\n  has_many :accounts, dependent: :destroy\n  has_many :companies, through: :accounts\nend\n</code></pre>\n\n<p>In console I can add single record with this:</p>\n\n<pre><code>[1] pry(main)&gt; user=User.find(7)\n[2] pry(main)&gt; user.accounts.create(company_id: 1)\n</code></pre>\n\n<p><strong>How do I add, edit, delete multiple accounts for user in one query?</strong> I need to attach multiple Companies to User, then Edit / Remove if necessary. </p>\n\n<p>So far I tried to implement array part <a href=\"https://ducktypelabs.com/how-a-has_many-through-association-works-in-practice\" rel=\"nofollow noreferrer\">from this tutorial</a>, but somehow it does not work as obviously I'm doing something wrong here:</p>\n\n<pre><code>[4] pry(main)&gt; user.accounts.create(company_id: [1,2])\n   (0.4ms)  BEGIN\n  User Exists (1.3ms)  SELECT  1 AS one FROM \"users\" WHERE LOWER(\"users\".\"email\") = LOWER($1) AND (\"users\".\"id\" != $2) LIMIT $3  [[\"email\", \"tester@gmaill.com\"], [\"id\", 7], [\"LIMIT\", 1]]\n   (0.6ms)  COMMIT\n=&gt; #&lt;Account:0x00000005b2c640 id: nil, company_id: nil, user_id: 7, created_at: nil, updated_at: nil&gt;\n</code></pre>\n\n<p>As I understand I need to create array somehow and then operate with that. I would appreciate any help here. Thank you!</p>\n\n<p><strong>Solution</strong></p>\n\n<p>If anyone needs, I solved my problem a bit differently. I used <a href=\"https://makandracards.com/makandra/32147-rails-4-introduced-collection_check_boxes\" rel=\"nofollow noreferrer\">checkboxes from this tutorial</a> and it works just fine for me.</p>\n"}, {"tags": ["ruby", "rubocop"], "answers": [{"comments": [{"owner": {"reputation": 7844, "user_id": 1520557, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/9KKRA.png?s=128&g=1", "display_name": "Drenmi", "link": "https://stackoverflow.com/users/1520557/drenmi"}, "edited": false, "score": 1, "creation_date": 1491384451, "post_id": 43212156, "comment_id": 73524082, "body": "I agree this is very hard to read. Is there an alternative syntax or behaviour you&#39;d like? Care to open an issue in the RuboCop GitHub repo? :-)"}], "tags": [], "owner": {"reputation": 2359, "user_id": 1837084, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/67dya.jpg?s=128&g=1", "display_name": "Oleg Antonyan", "link": "https://stackoverflow.com/users/1837084/oleg-antonyan"}, "is_accepted": false, "score": 0, "last_activity_date": 1491321449, "creation_date": 1491321449, "answer_id": 43212156, "question_id": 43211833, "link": "https://stackoverflow.com/questions/43211833/how-to-tell-rubocop-only-look-at-specific-directories/43212156#43212156", "title": "How to tell Rubocop only look at specific directories?", "body": "<p>Regex seems to work, but very ugly</p>\n\n<pre><code>AllCops:\n  Exclude:\n    - !ruby/regexp /^((?!(something|some\\/other\\/dir)).)*$/\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 36888, "user_id": 293280, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/6e6e22d81a1f4f394f62301be40c2e20?s=128&d=identicon&r=PG", "display_name": "Joshua Pinter", "link": "https://stackoverflow.com/users/293280/joshua-pinter"}, "is_accepted": false, "score": 2, "last_activity_date": 1533275613, "creation_date": 1533275613, "answer_id": 51666079, "question_id": 43211833, "link": "https://stackoverflow.com/questions/43211833/how-to-tell-rubocop-only-look-at-specific-directories/51666079#51666079", "title": "How to tell Rubocop only look at specific directories?", "body": "<p>It <a href=\"https://github.com/rubocop-hq/rubocop/issues/4247\" rel=\"nofollow noreferrer\"><em>appears</em></a> that the latest version (~0.56+) of Rubocop will only include files (or patterns) specified in <code>Include</code>, if you define <code>Include</code>. </p>\n\n<p>This would mean that if all you do is: </p>\n\n<pre><code>AllCops:\n  Include:\n    - 'something/**/*.rb'\n</code></pre>\n\n<p>Then <em>only</em> <code>something/**/*.rb</code> will be inspected. It <em>overwrites</em> the default files instead of appending to it.</p>\n\n<p>I think this is new functionality because that's what it's doing for us now and that's not how it was before. Very deceiving for a minor version release.</p>\n"}], "owner": {"reputation": 2359, "user_id": 1837084, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/67dya.jpg?s=128&g=1", "display_name": "Oleg Antonyan", "link": "https://stackoverflow.com/users/1837084/oleg-antonyan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1148, "favorite_count": 0, "answer_count": 2, "score": 4, "last_activity_date": 1533275613, "creation_date": 1491320514, "question_id": 43211833, "link": "https://stackoverflow.com/questions/43211833/how-to-tell-rubocop-only-look-at-specific-directories", "title": "How to tell Rubocop only look at specific directories?", "body": "<p>I want to include only specific directories, and ignore everything else.</p>\n\n<p>This ignores everything</p>\n\n<pre><code>AllCops:\n  Include:\n    - 'something/**/*.rb'\n\n  Exclude:\n    - '**/*'\n</code></pre>\n\n<p>And this inspects everything</p>\n\n<pre><code>AllCops:\n  Include:\n    - 'something/**/*.rb'\n</code></pre>\n"}, {"tags": ["arrays", "ruby", "loops", "mysql2", "ruby-hash"], "comments": [{"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 1, "creation_date": 1491327978, "post_id": 43211762, "comment_id": 73499974, "body": "Please, provide a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>. Your example is not complete (it requires a database, but you haven&#39;t provided the scheme) and it is probably not minimal (I highly doubt, you need 50 lines to demonstrate the problem)."}, {"owner": {"reputation": 13, "user_id": 5085345, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/deab8c22f3e9e17b70bf4f8f191ad7db?s=128&d=identicon&r=PG&f=1", "display_name": "Peter", "link": "https://stackoverflow.com/users/5085345/peter"}, "reply_to_user": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1491329107, "post_id": 43211762, "comment_id": 73500606, "body": "I&#39;ve updated the DB schema."}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1491331873, "post_id": 43211762, "comment_id": 73502231, "body": "&quot;What am I doing wrong?&quot; - this: <code>#{pull_rcpt[0][&quot;email&quot;]}</code>. You explicitly tell it to always use email of the first row."}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1491332380, "post_id": 43211762, "comment_id": 73502541, "body": "That <code>rcpt.each do |row|</code> does not return what you think it does."}, {"owner": {"reputation": 13, "user_id": 5085345, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/deab8c22f3e9e17b70bf4f8f191ad7db?s=128&d=identicon&r=PG&f=1", "display_name": "Peter", "link": "https://stackoverflow.com/users/5085345/peter"}, "edited": false, "score": 0, "creation_date": 1491333920, "post_id": 43211762, "comment_id": 73503376, "body": "Should I use rcpt.each_with_index {|(key, value), index| }?"}], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 5085345, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/deab8c22f3e9e17b70bf4f8f191ad7db?s=128&d=identicon&r=PG&f=1", "display_name": "Peter", "link": "https://stackoverflow.com/users/5085345/peter"}, "edited": false, "score": 0, "creation_date": 1491413384, "post_id": 43217674, "comment_id": 73545850, "body": "Thank you very much an491445!! The lazy version works, but now I&#39;m spurred, whats the most efficient approach in your opinion? I guess to refactor the database. Thanks in advance!"}, {"owner": {"reputation": 161, "user_id": 7385963, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/63b34a42e160f41086b7c9be65b448b1?s=128&d=identicon&r=PG&f=1", "display_name": "an491445", "link": "https://stackoverflow.com/users/7385963/an491445"}, "reply_to_user": {"reputation": 13, "user_id": 5085345, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/deab8c22f3e9e17b70bf4f8f191ad7db?s=128&d=identicon&r=PG&f=1", "display_name": "Peter", "link": "https://stackoverflow.com/users/5085345/peter"}, "edited": false, "score": 0, "creation_date": 1491425767, "post_id": 43217674, "comment_id": 73553099, "body": "Well, as the rcpt-table only has two rows, I guess this won&#39;t do much for the efficiency, but as you asked... I got the impression that you want con to return an array of email addresses, and not an array of hashes. Changing each to map would solve that. You could also look if client.query can accept other arguments. Changing <code>SELECT * from rcpt</code> to <code>SELECT email from rcpt</code> would be a start, but I guess that it would still give you an array of hashes. Anyway, if you change what con returns, you will have to modify the rest of the code. For example <code>rcpt[&#39;email&#39;]</code> =&gt; <code>rcpt</code> within the loop."}], "tags": [], "owner": {"reputation": 161, "user_id": 7385963, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/63b34a42e160f41086b7c9be65b448b1?s=128&d=identicon&r=PG&f=1", "display_name": "an491445", "link": "https://stackoverflow.com/users/7385963/an491445"}, "is_accepted": true, "score": 1, "last_activity_date": 1491339842, "creation_date": 1491339842, "answer_id": 43217674, "question_id": 43211762, "link": "https://stackoverflow.com/questions/43211762/how-to-use-values-of-a-hash-dynamically/43217674#43217674", "title": "How to use values of a hash dynamically?", "body": "<p>As already mentioned, this line is the core of the problem: <code>&lt;#{pull_rcpt[0][\"email\"]}&gt;</code>. You are explicitly selecting the first element in the database. To create the header dynamically, you will have to pass an argument to the data-method.</p>\n\n<p>So here's one way to solve this:</p>\n\n<p>In class Email, change <code>def data</code> to <code>def data(dynamic_email)</code>, and \n<code>To: Dani &lt;#{pull_rcpt[0][\"email\"]}&gt;</code> to <code>To: Dani &lt;#{dynamic_email}&gt;</code></p>\n\n<p>and within the loop:\n<code>data: Dkim.sign(message.data)</code> => <code>data: Dkim.sign(message.data(rcpt[\"email\"]))</code></p>\n\n<p>Something like that should work.</p>\n\n<p>As a side note, your code could do some refactoring. For example, the con-method you have written doesn't work the way you think. \"each\" returns the array itself. If you put it on the last line of a method like that, it doesn't serve any purpose. In this case, it would be equivalent to writing <code>return rcpt</code>. If you want the method to return an array of email addresses, you should use map instead of each (or even better, rewrite your sql query). But of course, if you change that, it'll break the rest of your code. The lazy solution is just to remove the each-loop...</p>\n"}], "owner": {"reputation": 13, "user_id": 5085345, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/deab8c22f3e9e17b70bf4f8f191ad7db?s=128&d=identicon&r=PG&f=1", "display_name": "Peter", "link": "https://stackoverflow.com/users/5085345/peter"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 79, "favorite_count": 0, "accepted_answer_id": 43217674, "answer_count": 1, "score": -2, "last_activity_date": 1494691359, "creation_date": 1491320332, "last_edit_date": 1494691359, "question_id": 43211762, "link": "https://stackoverflow.com/questions/43211762/how-to-use-values-of-a-hash-dynamically", "title": "How to use values of a hash dynamically?", "body": "<p>Goal: Use unique email address in email header To: field (see message_class) of MIME Html Message.</p>\n\n<p><strong>File: database.rb</strong> Here I connect to the database and I loop through the rows in table <code>rcpt</code>. Then I store the value in <code>row[\"email\"]</code>.</p>\n\n<pre><code>require 'mysql2'\n\nclass Db\n\n  def con\n    @db_host = \"localhost\"\n    @db_user = \"root\"\n    @db_pass = \"password\"\n    @db_name = \"table_db\"\n\n    client = Mysql2::Client.new(:host =&gt; @db_host, :unsername =&gt; @db_user, :password =&gt; @db_pass, :database =&gt; @db_name)\n    rcpt = client.query(\"SELECT * from rcpt\")\n    rcpt.each do |row|\n      row[\"email\"]\n    end\n  end\nend\n</code></pre>\n\n<p>Ouput of <code>con</code> method without [\"email\"]:</p>\n\n<pre><code>{\"id\"=&gt;01, \"email\"=&gt;\"example1@example.com\"}\n{\"id\"=&gt;02, \"email\"=&gt;\"example2@example.com\"}\n</code></pre>\n\n<p>Output of <code>con</code> method with [\"email\"]:</p>\n\n<pre><code>example1@example.com\nexample2@example.com\n</code></pre>\n\n<p>DB Schema:</p>\n\n<pre><code>mysql&gt; describe rcpt;\n+-------+--------------+------+-----+---------+----------------+\n| Field | Type         | Null | Key | Default | Extra          |\n+-------+--------------+------+-----+---------+----------------+\n| id    | int(11)      | NO   | PRI | NULL    | auto_increment |\n| email | varchar(150) | NO   | UNI | NULL    |                |\n+-------+--------------+------+-----+---------+----------------+\n2 rows in set (0.00 sec)\n</code></pre>\n\n<p><strong>File: message_class.rb</strong> Here I create the method <code>pull_rcpt</code> which then stores <code>row[\"email\"]</code>. Then I'm trying to use the <code>pull_rcpt</code> method in <code>message</code> heredoc. Now comes my problem: in the <code>To:</code> field, I'm trying to pass the users email address I'm currently sending to, so it should change with the receiving email address. It still uses the email address of the first contact in the array/Db. What am I doing wrong?</p>\n\n<pre><code>require 'dkim'\nrequire './database'\n\nclass Email\n\n  def pull_rcpt\n    rcpt = Db.new\n    rcpt.con\n  end\n\n  def data\n    Dkim::domain      = 'example.com'\n    Dkim::selector    = 'mail'\n    Dkim::private_key = open('/path/to/keys/example.com/mail.private').read \n\n    message = &lt;&lt;~MESSAGE\n    From: Eva &lt;test@example.com&gt;\n    To: Dani &lt;#{pull_rcpt[0][\"email\"]}&gt;\n    MIME-Version: 1.0\n    Content-Type: text/html\n    Content-Transfer-Encoding: 8bit\n    Subject: Test Subject\n\n    This is an email message.\n    &lt;h1&gt;Test&lt;/h1&gt;\n    MESSAGE\n   end\nend\n</code></pre>\n\n<p><strong>File: mailer_class.rb</strong> In my mailer_class I have two method's <code>rcpt_to</code> and <code>message</code>. Rcpt_to contains an array <code>contacts</code>, which holds the values of <code>row[\"email\"]</code>. Message builds the email.</p>\n\n<pre><code>require './database'\nrequire './message_class'\n\ndef rcpt_to\n#conn zu DB &amp; take rcpt\n  contacts = []\n  contacts = Db.new\n  contacts.con\nend\n\ndef message \n#message\n  message = Email.new\nend\n</code></pre>\n\n<p>A few lines later inside a <code>for loop</code> I use the methods as follows:</p>\n\n<pre><code> for rcpt in rcpt_to do\n  @protocol = { ehlo: \"ehlo\", mail_from: \"eva@example.com\", rcpt_to: [rcpt[\"email\"]], data: Dkim.sign(message.data) }\n end\n</code></pre>\n\n<p>Here is the header of example2@example.com which is the second record in the database:</p>\n\n<pre><code> From: Eva &lt;test@example.com&gt;\n To: Dani &lt;example1@example.com&gt; &lt;--- This should be example2(value in hash of second entry in database) not example1\n MIME-Version: 1.0\n Content-Type: text/html\n Content-Transfer-Encoding: 8bit\n Subject: Test Subject\n Content-Length: 40\n</code></pre>\n\n<p>So the only thing not working is the dynamic To: field in the email header. The rest is just working fine and all records in the database receive an email. </p>\n"}, {"tags": ["ruby", "exit-code"], "comments": [{"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 1, "creation_date": 1491319032, "post_id": 43211203, "comment_id": 73494201, "body": "yeah, you don&#39;t need the explicit <code>exit 0</code> at the end of the script."}], "answers": [{"comments": [{"owner": {"reputation": 2484, "user_id": 2097284, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/Md1tZ.jpg?s=128&g=1", "display_name": "Camille Goudeseune", "link": "https://stackoverflow.com/users/2097284/camille-goudeseune"}, "edited": false, "score": 0, "creation_date": 1491321746, "post_id": 43211273, "comment_id": 73496131, "body": "The convention is familiar.  I hope that the answer is yes.  But I&#39;m hoping for stronger proof.  (Who said that Ruby is &quot;normal&quot;?)"}, {"owner": {"reputation": 33085, "user_id": 2423164, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Nxbnp.jpg?s=128&g=1", "display_name": "ndnenkov", "link": "https://stackoverflow.com/users/2423164/ndnenkov"}, "reply_to_user": {"reputation": 2484, "user_id": 2097284, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/Md1tZ.jpg?s=128&g=1", "display_name": "Camille Goudeseune", "link": "https://stackoverflow.com/users/2097284/camille-goudeseune"}, "edited": false, "score": 0, "creation_date": 1491323292, "post_id": 43211273, "comment_id": 73497201, "body": "@CamilleGoudeseune, the answer is definitely yes. It is normal in that sense. As Ruby doesn&#39;t have official documentation I&#39;m not sure what proof you want. Link to the exact line in the implementation that exists with 0 by default?"}, {"owner": {"reputation": 2484, "user_id": 2097284, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/Md1tZ.jpg?s=128&g=1", "display_name": "Camille Goudeseune", "link": "https://stackoverflow.com/users/2097284/camille-goudeseune"}, "edited": false, "score": 0, "creation_date": 1491323774, "post_id": 43211273, "comment_id": 73497510, "body": "Proof: either a statement in e.g. <a href=\"http://ruby-doc.org/\" rel=\"nofollow noreferrer\">ruby-doc.org</a> or, yes, a line in the source code.  At least something more than &quot;it works on my computer too,&quot; more than &quot;because I say so.&quot;"}, {"owner": {"reputation": 33085, "user_id": 2423164, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Nxbnp.jpg?s=128&g=1", "display_name": "ndnenkov", "link": "https://stackoverflow.com/users/2423164/ndnenkov"}, "reply_to_user": {"reputation": 2484, "user_id": 2097284, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/Md1tZ.jpg?s=128&g=1", "display_name": "Camille Goudeseune", "link": "https://stackoverflow.com/users/2097284/camille-goudeseune"}, "edited": false, "score": 0, "creation_date": 1491325479, "post_id": 43211273, "comment_id": 73498533, "body": "@CamilleGoudeseune, added links to various documentations."}, {"owner": {"reputation": 45322, "user_id": 421705, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/581b1760881c962648f99d6040d41829?s=128&d=identicon&r=PG", "display_name": "Holger Just", "link": "https://stackoverflow.com/users/421705/holger-just"}, "edited": false, "score": 2, "creation_date": 1491326217, "post_id": 43211273, "comment_id": 73498936, "body": "As for code documentation, the exit status in MRI Ruby is mostly determined by <a href=\"https://github.com/ruby/ruby/blob/2aaca105058950af2fc1a39c7e5c7cb032c85fff/eval.c#L148-L231\" rel=\"nofollow noreferrer\"><code>ruby_cleanup</code></a> which in turn is called by <a href=\"https://github.com/ruby/ruby/blob/2aaca105058950af2fc1a39c7e5c7cb032c85fff/eval.c#L252-L257\" rel=\"nofollow noreferrer\"><code>ruby_stop</code></a> which is the primary way the Ruby VM is shutdown. Note that there are other ways to kill a process than a regular shutdown (e.g. by sending it a signal). In that case, the termination status will be different."}, {"owner": {"reputation": 2484, "user_id": 2097284, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/Md1tZ.jpg?s=128&g=1", "display_name": "Camille Goudeseune", "link": "https://stackoverflow.com/users/2097284/camille-goudeseune"}, "edited": false, "score": 0, "creation_date": 1491326423, "post_id": 43211273, "comment_id": 73499071, "body": "Thank you, @ndn.  But Process#exit&#39;s doc does <i>not</i> claim that &quot;Ruby exits with success by default.&quot;  And that is exactly my question.  <i>Does</i> a Ruby script exit with a status code that means success, when it lacks an <code>exit</code> command?  Equivalently, from that doc&#39;s &quot;click to toggle source&quot;: does a script without an <code>exit</code> command always exit by calling <code>rb_f_exit()</code>?  That function&#39;s source code is clear enough."}, {"owner": {"reputation": 33085, "user_id": 2423164, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Nxbnp.jpg?s=128&g=1", "display_name": "ndnenkov", "link": "https://stackoverflow.com/users/2423164/ndnenkov"}, "reply_to_user": {"reputation": 2484, "user_id": 2097284, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/Md1tZ.jpg?s=128&g=1", "display_name": "Camille Goudeseune", "link": "https://stackoverflow.com/users/2097284/camille-goudeseune"}, "edited": false, "score": 0, "creation_date": 1491326546, "post_id": 43211273, "comment_id": 73499155, "body": "@CamilleGoudeseune, it does say that it&#39;s the default, look at the default value for the status parameter - <code>exit(status=true)</code>."}, {"owner": {"reputation": 2484, "user_id": 2097284, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/Md1tZ.jpg?s=128&g=1", "display_name": "Camille Goudeseune", "link": "https://stackoverflow.com/users/2097284/camille-goudeseune"}, "edited": false, "score": 0, "creation_date": 1491326766, "post_id": 43211273, "comment_id": 73499283, "body": "(move to talk?)  @ndn, yes, true is the default for <code>exit()</code>.  No, it doesn&#39;t say what happens when the script <i>lacks</i> an <code>exit()</code>.  That&#39;s the case in question."}, {"owner": {"reputation": 33085, "user_id": 2423164, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Nxbnp.jpg?s=128&g=1", "display_name": "ndnenkov", "link": "https://stackoverflow.com/users/2423164/ndnenkov"}, "reply_to_user": {"reputation": 2484, "user_id": 2097284, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/Md1tZ.jpg?s=128&g=1", "display_name": "Camille Goudeseune", "link": "https://stackoverflow.com/users/2097284/camille-goudeseune"}, "edited": false, "score": 0, "creation_date": 1491327144, "post_id": 43211273, "comment_id": 73499503, "body": "@CamilleGoudeseune, fair point. Lets look at it another way - the documentation says that it respects the underlying system&#39;s integer exit codes. So unless you are speculating that the default semantic isn&#39;t that a Ruby program runs successfully unless something exceptional happens, there is no reason to suggest you will not get 0 under UNIX or Windows given normal execution."}, {"owner": {"reputation": 33085, "user_id": 2423164, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Nxbnp.jpg?s=128&g=1", "display_name": "ndnenkov", "link": "https://stackoverflow.com/users/2423164/ndnenkov"}, "edited": false, "score": 0, "creation_date": 1491327211, "post_id": 43211273, "comment_id": 73499534, "body": "I don&#39;t think you will find something more black and white in the documentation and I don&#39;t intend to spend my evening code spelunking in MRI for something I&#39;m 100% certain of. Still, if you want to go that route, Holger&#39;s comment provides a good starting point."}], "tags": [], "owner": {"reputation": 33085, "user_id": 2423164, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Nxbnp.jpg?s=128&g=1", "display_name": "ndnenkov", "link": "https://stackoverflow.com/users/2423164/ndnenkov"}, "is_accepted": true, "score": 3, "last_activity_date": 1491325440, "last_edit_date": 1491325440, "creation_date": 1491319071, "answer_id": 43211273, "question_id": 43211203, "link": "https://stackoverflow.com/questions/43211203/ok-to-omit-exit-0-at-end-of-ruby-script/43211273#43211273", "title": "OK to omit &quot;exit 0&quot; at end of Ruby script?", "body": "<p>Universally in UNIX, 0 is reserved for success and codes other than 0 - different sorts of errors.</p>\n\n<p>In any normal language, unless your program throws some sort of exception or explicitly exits with a different code, you can safely assume that it exited with 0.</p>\n\n<hr>\n\n<p>As per the <a href=\"https://ruby-doc.org/core-2.2.0/Process.html#method-c-exit\" rel=\"nofollow noreferrer\">documentation of <code>Process#exit</code></a>:</p>\n\n<blockquote>\n  <p>exit(status=true)<br>\n  [...]The optional parameter is used to return a status code to the invoking environment. true and FALSE of status means success and failure respectively.<br>\n  The interpretation of other integer values are system dependent.</p>\n</blockquote>\n\n<p>Meaning Ruby exits with success by default, whatever success means for the underlying system.</p>\n\n<p>As per the documentation of <a href=\"http://www.tldp.org/LDP/abs/html/exit-status.html\" rel=\"nofollow noreferrer\">exit codes from The Linux Documentation Project</a>:</p>\n\n<blockquote>\n  <p>[...] A successful command returns a 0, while an unsuccessful one returns a non-zero value that usually can be interpreted as an error code. Well-behaved UNIX commands, programs, and utilities return a 0 exit code upon successful completion, though there are some exceptions. [...]</p>\n</blockquote>\n\n<p>Meaning you are will get 0 in a UNIX environments.</p>\n\n<p>As per <a href=\"https://msdn.microsoft.com/en-us/library/ms681382.aspx\" rel=\"nofollow noreferrer\">Microsoft's documentation on exit codes</a>:</p>\n\n<blockquote>\n  <p>ERROR_SUCCESS<br>\n  0 (0x0)<br>\n  The operation completed successfully.</p>\n</blockquote>\n\n<p>Meaning you will also get zero in Windows.</p>\n"}], "owner": {"reputation": 2484, "user_id": 2097284, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/Md1tZ.jpg?s=128&g=1", "display_name": "Camille Goudeseune", "link": "https://stackoverflow.com/users/2097284/camille-goudeseune"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 982, "favorite_count": 1, "accepted_answer_id": 43211273, "answer_count": 1, "score": 0, "last_activity_date": 1491325440, "creation_date": 1491318890, "question_id": 43211203, "link": "https://stackoverflow.com/questions/43211203/ok-to-omit-exit-0-at-end-of-ruby-script", "title": "OK to omit &quot;exit 0&quot; at end of Ruby script?", "body": "<p>On Ubuntu 14's Ruby 1.9.3, when I run the script</p>\n\n<pre><code>#!/usr/bin/env ruby\n</code></pre>\n\n<p>and the script</p>\n\n<pre><code>#!/usr/bin/env ruby\nexit 0\n</code></pre>\n\n<p>they do the same thing.  In particular, a subsequent <code>echo $?</code> prints <code>0</code>.  How universal is this behavior?  Can I safely omit <code>exit 0</code> from the end of a nontrivial script?</p>\n"}, {"tags": ["javascript", "ruby-on-rails", "ruby", "erb"], "comments": [{"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1491320697, "post_id": 43211138, "comment_id": 73495439, "body": "What&#39;s the actual JS that gets generated as a result?"}, {"owner": {"reputation": 2623, "user_id": 5739514, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/79f8410055f0114c31bde3ccc1d56178?s=128&d=identicon&r=PG", "display_name": "HashRocketSyntax", "link": "https://stackoverflow.com/users/5739514/hashrocketsyntax"}, "reply_to_user": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1491321303, "post_id": 43211138, "comment_id": 73495817, "body": "You know @SergioTulentsev I&#39;m new to working with js/front end. Would I look under Inspect &gt; Elements or Page Source for that?"}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1491321576, "post_id": 43211138, "comment_id": 73496006, "body": "Yes, page source, for example."}, {"owner": {"reputation": 91121, "user_id": 179125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5594142dcc49a24b1902ec8059181f8d?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan Running", "link": "https://stackoverflow.com/users/179125/jordan-running"}, "edited": false, "score": 1, "creation_date": 1491321884, "post_id": 43211138, "comment_id": 73496231, "body": "You&#39;ll want to use View Source or inspect the server response in your dev tools&#39; Network pane. The parsed DOM in the Elements pane will not reflect the actual source returned by the server."}], "answers": [{"comments": [{"owner": {"reputation": 2623, "user_id": 5739514, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/79f8410055f0114c31bde3ccc1d56178?s=128&d=identicon&r=PG", "display_name": "HashRocketSyntax", "link": "https://stackoverflow.com/users/5739514/hashrocketsyntax"}, "edited": false, "score": 0, "creation_date": 1491319923, "post_id": 43211491, "comment_id": 73494900, "body": "Thanks for helping out. That produces this error <code>only generation of JSON objects or arrays allowed</code> from the view, which prevents the view from loading. It also results in some crazy syntax highlighting: <a href=\"http://imgur.com/xyGUzxs\" rel=\"nofollow noreferrer\">imgur.com/xyGUzxs</a>"}, {"owner": {"reputation": 2623, "user_id": 5739514, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/79f8410055f0114c31bde3ccc1d56178?s=128&d=identicon&r=PG", "display_name": "HashRocketSyntax", "link": "https://stackoverflow.com/users/5739514/hashrocketsyntax"}, "edited": false, "score": 0, "creation_date": 1491320854, "post_id": 43211491, "comment_id": 73495535, "body": "Hmm now it looks like it is trying to run the right line, but <code>&#39;&lt;%= j(Rails.application.secrets.stripe([&#39;publishable_key&#39;]).firs&zwnj;&#8203;t[1].to_s) %&gt;&#39;</code> but still outputting this error <code>only generation of JSON objects or arrays allowed</code>"}, {"owner": {"reputation": 2623, "user_id": 5739514, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/79f8410055f0114c31bde3ccc1d56178?s=128&d=identicon&r=PG", "display_name": "HashRocketSyntax", "link": "https://stackoverflow.com/users/5739514/hashrocketsyntax"}, "edited": false, "score": 0, "creation_date": 1491320978, "post_id": 43211491, "comment_id": 73495616, "body": "Alright, if I drop the <code>j()</code> and keep the ticks on each <code>&lt;%= %&gt;</code> line it seems to work!"}], "tags": [], "owner": {"reputation": 1515, "user_id": 7189767, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5c979c9b4f88620e8ddbf74fb6a83824?s=128&d=identicon&r=PG&f=1", "display_name": "Fallenhero", "link": "https://stackoverflow.com/users/7189767/fallenhero"}, "is_accepted": false, "score": 1, "last_activity_date": 1491469784, "last_edit_date": 1491469784, "creation_date": 1491319669, "answer_id": 43211491, "question_id": 43211138, "link": "https://stackoverflow.com/questions/43211138/creating-a-multi-line-string-in-javascript-that-accepts-ruby-object/43211491#43211491", "title": "Creating a multi-line string in javascript that accepts ruby object", "body": "<p>I think i should just be:</p>\n\n<pre><code>var stripe = Stripe(\n  &lt;% if Rails.env == 'production' %&gt;\n    '&lt;%= Rails.application.secrets.stripe(['publishable_key']).second[1].to_s %&gt;'\n  &lt;% else %&gt;\n    '&lt;%= Rails.application.secrets.stripe(['publishable_key']).first[1].to_s %&gt;'\n  &lt;% end %&gt;\n);\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 91121, "user_id": 179125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5594142dcc49a24b1902ec8059181f8d?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan Running", "link": "https://stackoverflow.com/users/179125/jordan-running"}, "is_accepted": false, "score": 1, "last_activity_date": 1491321759, "last_edit_date": 1491321759, "creation_date": 1491321152, "answer_id": 43212047, "question_id": 43211138, "link": "https://stackoverflow.com/questions/43211138/creating-a-multi-line-string-in-javascript-that-accepts-ruby-object/43212047#43212047", "title": "Creating a multi-line string in javascript that accepts ruby object", "body": "<p>First of all, it will be helpful to clean up your code a bit to see what's happening where. Move the logic up to the top of the file:</p>\n\n<pre class=\"lang-erb prettyprint-override\"><code>&lt;%\n  config = Rails.application.secrets.stripe(['publishable_key'])\n  stripe_key = Rails.env.production? ? config.first[1] : config.second[1]\n%&gt;\n</code></pre>\n\n<p>...or, better, yet, a helper:</p>\n\n<pre class=\"lang-ruby prettyprint-override\"><code>def stripe_key\n  config = Rails.application.secrets.stripe(['publishable_key'])\n  Rails.env.production? ? config.first[1] : config.second[1]\nend\n</code></pre>\n\n<p>Then, in your JavaScript:</p>\n\n<pre class=\"lang-erb prettyprint-override\"><code>var stripe = Stripe('&lt;%= j(stripe_key) %&gt;');\n\n// ...or...\n\nvar stripe = Stripe(&lt;%= stripe_key.to_json %&gt;);\n</code></pre>\n\n<p>Be careful to note the presence or absence of single-quotes in both cases. The <a href=\"http://api.rubyonrails.org/classes/ActionView/Helpers/JavaScriptHelper.html#method-i-escape_javascript\" rel=\"nofollow noreferrer\"><code>j</code> helper</a> will escape special characters (including quotes and newlines) inside the string, but the returned string won't be wrapped in quotation marks, whereas <code>to_json</code> will return a string already wrapped with double-quotes.</p>\n\n<p>P.S. When you say this:</p>\n\n\n\n<pre class=\"lang-ruby prettyprint-override\"><code>Rails.application.secrets.stripe(['publishable_key'])\n</code></pre>\n\n<p>...are you sure you don't mean:</p>\n\n<pre class=\"lang-ruby prettyprint-override\"><code>Rails.application.secrets.stripe['publishable_key']\n\n# ...or...\n\nRails.application.secrets.stripe.publishable_key\n</code></pre>\n"}], "owner": {"reputation": 2623, "user_id": 5739514, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/79f8410055f0114c31bde3ccc1d56178?s=128&d=identicon&r=PG", "display_name": "HashRocketSyntax", "link": "https://stackoverflow.com/users/5739514/hashrocketsyntax"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 497, "favorite_count": 1, "answer_count": 2, "score": 0, "last_activity_date": 1491469784, "creation_date": 1491318759, "last_edit_date": 1491320452, "question_id": 43211138, "link": "https://stackoverflow.com/questions/43211138/creating-a-multi-line-string-in-javascript-that-accepts-ruby-object", "title": "Creating a multi-line string in javascript that accepts ruby object", "body": "<p>So I am trying to get my code to match Stripe's js example:</p>\n\n<pre><code>var stripe = Stripe('pk_test_REST_OF_MY_KEY');\n</code></pre>\n\n<p>Here are the lines from my <code>.js.erb</code> file that call the right key from my secrets.yml file. When this renders I get the following error in the browser console <code>Uncaught ReferenceError: pk_test_REST_OF_MY_KEY is not defined</code></p>\n\n<pre><code>  var stripe = Stripe(\n    &lt;% if Rails.env == 'production' %&gt;\n      &lt;%= Rails.application.secrets.stripe(['publishable_key']).second[1].to_s %&gt;\n    &lt;% else %&gt;\n      &lt;%= Rails.application.secrets.stripe(['publishable_key']).first[1].to_s %&gt;\n    &lt;% end %&gt;\n  );\n</code></pre>\n\n<p>I've tried</p>\n\n<pre><code>... Stripe(` \n  RUBY LINES BETWEEN BACKTICKS \n`);\n\n... Stripe(' + \n  RUBY LINES BETWEEN PLUSES \n+ ');\n</code></pre>\n\n<p>So it has to be some finicky js syntax with the <code>(' ');</code> not accepting the ruby value as a string, right? We know the ruby is running because the console error is printing the right value. </p>\n\n<p>Also, the ruby is correct because it produces <code>Rails.application.secrets.stripe(['publishable_key']).first[1].to_s\n=&gt; \"pk_test_REST_OF_MY_KEY\"</code> in the console</p>\n"}, {"tags": ["ruby", "ruby-2.3"], "answers": [{"comments": [{"owner": {"reputation": 4206, "user_id": 1329461, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/meIoL.png?s=128&g=1", "display_name": "Leantraxxx", "link": "https://stackoverflow.com/users/1329461/leantraxxx"}, "edited": false, "score": 0, "creation_date": 1491336607, "post_id": 43211782, "comment_id": 73504797, "body": "Your code is undoubtedly very clean but, as I said: &quot;I know I can iterate through the data keys and use something like  define_method&quot;. I&#39;m looking for a &quot;transparent&quot; way. Maybe does not exist."}, {"owner": {"reputation": 47232, "user_id": 1772830, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Qtoqg.jpg?s=128&g=1", "display_name": "Andrey Deineko", "link": "https://stackoverflow.com/users/1772830/andrey-deineko"}, "reply_to_user": {"reputation": 4206, "user_id": 1329461, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/meIoL.png?s=128&g=1", "display_name": "Leantraxxx", "link": "https://stackoverflow.com/users/1329461/leantraxxx"}, "edited": false, "score": 2, "creation_date": 1491336955, "post_id": 43211782, "comment_id": 73504993, "body": "@Leantraxxx it does not exist, AFAICT"}], "tags": [], "owner": {"reputation": 47232, "user_id": 1772830, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Qtoqg.jpg?s=128&g=1", "display_name": "Andrey Deineko", "link": "https://stackoverflow.com/users/1772830/andrey-deineko"}, "is_accepted": true, "score": 4, "last_activity_date": 1491321158, "last_edit_date": 1491321158, "creation_date": 1491320386, "answer_id": 43211782, "question_id": 43209470, "link": "https://stackoverflow.com/questions/43209470/convert-hash-params-into-instance-variables-on-ruby-initializer/43211782#43211782", "title": "Convert hash params into instance variables on Ruby initializer", "body": "<blockquote>\n  <p><strong>I want to do this in a clean way.</strong></p>\n</blockquote>\n\n<p>You won't get <code>attr_accessor</code>s and instance variables without defining them. The below is using some simple metaprogramming (does it qualify for <em>\"clean\"</em>?)</p>\n\n<pre><code>class PriceChange\n  def initialize(data = {})\n    data.each_pair do |key, value|\n      instance_variable_set(\"@#{key}\", value)\n      self.class.instance_eval { attr_accessor key.to_sym }\n    end\n  end\nend\n</code></pre>\n\n<p>Usage:</p>\n\n<pre><code>price_change = PriceChange.new(foo: :foo, bar: :bar)\n#=&gt; #&lt;PriceChange:0x007fb3a1755178 @bar=:bar, @foo=:foo&gt;\nprice_change.foo\n#=&gt; :foo\nprice_change.foo = :baz\n#=&gt; :baz\nprice_change.foo\n#=&gt; :baz\n</code></pre>\n"}], "owner": {"reputation": 4206, "user_id": 1329461, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/meIoL.png?s=128&g=1", "display_name": "Leantraxxx", "link": "https://stackoverflow.com/users/1329461/leantraxxx"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 796, "favorite_count": 1, "accepted_answer_id": 43211782, "answer_count": 1, "score": 3, "last_activity_date": 1491370706, "creation_date": 1491314489, "last_edit_date": 1491370706, "question_id": 43209470, "link": "https://stackoverflow.com/questions/43209470/convert-hash-params-into-instance-variables-on-ruby-initializer", "title": "Convert hash params into instance variables on Ruby initializer", "body": "<p>I have this class:</p>\n\n<pre><code>class PriceChange\n  attr_accessor :distributor_id, :product_id, :value, :price_changed_at, :realm\n\n  def initialize(data = {})\n    @distributor_id   = data[:distributor_id]\n    @product_id       = data[:product_id]\n    @value            = data[:value]\n    @price_changed_at = data[:price_changed_at]\n    @realm            = data[:realm]\n  end\nend\n</code></pre>\n\n<p>And I want to avoid the mapping inside the method body.\nI want a transparent and elegant way to set the instance attributes values.\nI know I can iterate through the data keys and use something like <code>define_method</code>. I don't want this. <strong>I want to do this in a clean way.</strong></p>\n"}, {"tags": ["ruby-on-rails", "ruby", "bundler", "unicorn"], "answers": [{"comments": [{"owner": {"reputation": 379, "user_id": 1377288, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/c49f62d90a3e50b237f67e2e1705111a?s=128&d=identicon&r=PG&f=1", "display_name": "Tuma", "link": "https://stackoverflow.com/users/1377288/tuma"}, "edited": false, "score": 0, "creation_date": 1491316304, "post_id": 43209896, "comment_id": 73491875, "body": "Hey, thanks, that sort of worked. Now I&#39;m getting this when I try to start unicorn: <code>master failed to start, check stderr log for details</code>. I can&#39;t find <code>unicorn.stderr.log</code> not the <code>unicorn.rb</code> config file (only the gems show up). I think most of my problems stem from there. Do you have any suggestions for this case?"}, {"owner": {"reputation": 5312, "user_id": 6535997, "user_type": "registered", "accept_rate": 62, "profile_image": "https://graph.facebook.com/10156345016155058/picture?type=large", "display_name": "Mark", "link": "https://stackoverflow.com/users/6535997/mark"}, "reply_to_user": {"reputation": 379, "user_id": 1377288, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/c49f62d90a3e50b237f67e2e1705111a?s=128&d=identicon&r=PG&f=1", "display_name": "Tuma", "link": "https://stackoverflow.com/users/1377288/tuma"}, "edited": false, "score": 1, "creation_date": 1491316732, "post_id": 43209896, "comment_id": 73492264, "body": "I&#39;ve never used unicorn :( if you enter &#39;bundle show unicorn&#39; it should show where all the files related to that gem are stored, but other than that I can&#39;t help unfortunately"}, {"owner": {"reputation": 507, "user_id": 4347736, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7657ad875bf801e1ff83a9e8ac0e9a70?s=128&d=identicon&r=PG&f=1", "display_name": "Tyler", "link": "https://stackoverflow.com/users/4347736/tyler"}, "edited": false, "score": 0, "creation_date": 1491334862, "post_id": 43209896, "comment_id": 73503910, "body": "I wouldn&#39;t delete and rebuild your gemfile.lock.  That tends to be more trouble than its worth."}], "tags": [], "owner": {"reputation": 5312, "user_id": 6535997, "user_type": "registered", "accept_rate": 62, "profile_image": "https://graph.facebook.com/10156345016155058/picture?type=large", "display_name": "Mark", "link": "https://stackoverflow.com/users/6535997/mark"}, "is_accepted": false, "score": 1, "last_activity_date": 1491315538, "creation_date": 1491315538, "answer_id": 43209896, "question_id": 43209456, "link": "https://stackoverflow.com/questions/43209456/you-have-already-activated-unicorn-5-2-0-but-your-gemfile-requires-unicorn-5-3/43209896#43209896", "title": "You have already activated unicorn 5.2.0, but your Gemfile requires unicorn 5.3.0", "body": "<p>Try deleting your gemfile.lock file, and then running bundle install again, which will repopulate it from scratch, that normally sorts out my gem conflicts.</p>\n"}, {"tags": [], "owner": {"reputation": 507, "user_id": 4347736, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7657ad875bf801e1ff83a9e8ac0e9a70?s=128&d=identicon&r=PG&f=1", "display_name": "Tyler", "link": "https://stackoverflow.com/users/4347736/tyler"}, "is_accepted": false, "score": 0, "last_activity_date": 1491335089, "last_edit_date": 1495541404, "creation_date": 1491335089, "answer_id": 43216340, "question_id": 43209456, "link": "https://stackoverflow.com/questions/43209456/you-have-already-activated-unicorn-5-2-0-but-your-gemfile-requires-unicorn-5-3/43216340#43216340", "title": "You have already activated unicorn 5.2.0, but your Gemfile requires unicorn 5.3.0", "body": "<p>That means that the version of unicorn running on your machine is different than the version specified in your application.  <code>service unicorn</code> is probably pointing to unicorn installed on the server/computer not pointing to your apps version of unicorn, right?  Then when that starts your application, your app is trying to load a different version of the gem.  </p>\n\n<p>You could also run unicorn within the context of your app, like <code>bundle exec unicorn</code> - <a href=\"https://stackoverflow.com/questions/17409910/how-to-start-rails-server-in-production-mode-using-unicorn-and-config-file\">How to start rails server in production mode using unicorn and config file?</a>.</p>\n"}, {"tags": [], "owner": {"reputation": 447, "user_id": 3816367, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/x4ncI.jpg?s=128&g=1", "display_name": "cmramseyer", "link": "https://stackoverflow.com/users/3816367/cmramseyer"}, "is_accepted": false, "score": 0, "last_activity_date": 1493146293, "creation_date": 1493146293, "answer_id": 43618729, "question_id": 43209456, "link": "https://stackoverflow.com/questions/43209456/you-have-already-activated-unicorn-5-2-0-but-your-gemfile-requires-unicorn-5-3/43618729#43618729", "title": "You have already activated unicorn 5.2.0, but your Gemfile requires unicorn 5.3.0", "body": "<p>If you have found a solution, good. If not, next time, create a new rails app using a unique gemset like 2.3.1@myapp. \nThis way, when you deploy to a remote server you will avoid this type of gems conflicts. </p>\n"}, {"tags": [], "owner": {"reputation": 1269, "user_id": 704499, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6069c0ab390a602832cf30835fce0691?s=128&d=identicon&r=PG", "display_name": "morgler", "link": "https://stackoverflow.com/users/704499/morgler"}, "is_accepted": false, "score": 0, "last_activity_date": 1493149729, "creation_date": 1493149729, "answer_id": 43619701, "question_id": 43209456, "link": "https://stackoverflow.com/questions/43209456/you-have-already-activated-unicorn-5-2-0-but-your-gemfile-requires-unicorn-5-3/43619701#43619701", "title": "You have already activated unicorn 5.2.0, but your Gemfile requires unicorn 5.3.0", "body": "<p>This could be caused by you having two different sources for gems on your machine. </p>\n\n<p>If you use something like RVM with gemsets, make sure you are using the correct gemset. Especially, be sure that your <code>gem install</code> and <code>gem uninstall</code> act upon the application-sepcific gemset and not on the system-wide gems. You can find details at <a href=\"https://rvm.io/gemsets\" rel=\"nofollow noreferrer\">https://rvm.io/gemsets</a>.</p>\n\n<p>Bundler also generates a separate gemset per application. So if you use bundler, you have to run all your commands by prepending them with <code>bundle exec</code> (e.g. <code>bundle exec rspec spec</code>). If you want to remove gems from the bundle, remove it from your Gemfile and run <code>bundle update gem_in_question</code> afterwards (this will also update your Gemfile.lock). You can find more at <a href=\"http://bundler.io/v1.14/guides/using_bundler_in_application.html#executing-commands---bundle-exec\" rel=\"nofollow noreferrer\">http://bundler.io/v1.14/guides/using_bundler_in_application.html#executing-commands---bundle-exec</a>.</p>\n\n<p>I hope that this helps to solve your problem.</p>\n"}], "owner": {"reputation": 379, "user_id": 1377288, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/c49f62d90a3e50b237f67e2e1705111a?s=128&d=identicon&r=PG&f=1", "display_name": "Tuma", "link": "https://stackoverflow.com/users/1377288/tuma"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 623, "favorite_count": 0, "answer_count": 4, "score": 0, "last_activity_date": 1493149729, "creation_date": 1491314469, "question_id": 43209456, "link": "https://stackoverflow.com/questions/43209456/you-have-already-activated-unicorn-5-2-0-but-your-gemfile-requires-unicorn-5-3", "title": "You have already activated unicorn 5.2.0, but your Gemfile requires unicorn 5.3.0", "body": "<p>I have an application running remotely, and I just upgraded <code>rails</code> to version 4.2.8, which upgraded other gems as well. I ran <code>service unicorn restart</code> afterwards, but the log for unicorn gives me this error:</p>\n\n<blockquote>\n  <p>You have already activated unicorn 5.2.0, but your Gemfile requires unicorn 5.3.0. Prepending <code>bundle exec</code> to your command may solve this. (Gem::LoadError)</p>\n</blockquote>\n\n<p>I have tried <code>gem uninstall unicorn -v 5.2.0</code>, which returned successfully, and then <code>gem install -v 5.3.0</code>, which also returned successfully. Afterwards, I ran <code>service unicorn restart</code>, but the error persists. </p>\n\n<p>I noticed the <code>bundle exec</code> suggestion, but I'm not sure what I should prepend this command to.</p>\n"}, {"tags": ["arrays", "ruby", "match", "elements"], "comments": [{"owner": {"reputation": 1183, "user_id": 1030494, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/6026760ae1e3ce75f51c64aa5b682d87?s=128&d=identicon&r=PG", "display_name": "Vall3y", "link": "https://stackoverflow.com/users/1030494/vall3y"}, "edited": false, "score": 0, "creation_date": 1491314390, "post_id": 43209367, "comment_id": 73490327, "body": "The logic you want to run is, for each element X1 in array1, iterate over all of the elements in array2, and for each element X2 in array2, if X1 matches X2, add it to the result. You can use a regex search with the <code>=~</code> operator (x1 =~ x2 iirc)."}, {"owner": {"reputation": 33085, "user_id": 2423164, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Nxbnp.jpg?s=128&g=1", "display_name": "ndnenkov", "link": "https://stackoverflow.com/users/2423164/ndnenkov"}, "edited": false, "score": 0, "creation_date": 1491314921, "post_id": 43209367, "comment_id": 73490735, "body": "Is there an exact pattern here? If it&#39;s the first two, you can just remove digits. But with the latter one, you have a bit of a mix. In the generic case, you can use a string similarity algorithm like Levenstein or Jaro\u2013Winkler distance. Could you clarify what is needed to consider two strings matching abstractly?"}, {"owner": {"reputation": 1, "user_id": 7793146, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-LLKjrMfDusw/AAAAAAAAAAI/AAAAAAAAAFw/MJRBMrTj-AI/photo.jpg?sz=128", "display_name": "Sean", "link": "https://stackoverflow.com/users/7793146/sean"}, "edited": false, "score": 0, "creation_date": 1491315846, "post_id": 43209367, "comment_id": 73491497, "body": "ndn - there will be hundreds of filenames in each array, the filenames in array1 will have the same beginning as the filenames in array2 but will contain some extra characters before the extension. I am only interested in a match if the first few characters of each filename are the same."}, {"owner": {"reputation": 33085, "user_id": 2423164, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Nxbnp.jpg?s=128&g=1", "display_name": "ndnenkov", "link": "https://stackoverflow.com/users/2423164/ndnenkov"}, "edited": false, "score": 0, "creation_date": 1491316080, "post_id": 43209367, "comment_id": 73491704, "body": "So <code>mydogisdumb.doc</code> and <code>imstupid.doc</code> shouldn&#39;t match then? Also the result that you gave us shows two elements from <code>array1</code>, not one from <code>array1</code> and one from <code>array2</code>, what is up with that? Also can you define <i>&quot;a few&quot;</i>? Is two enough? Is one enough?"}, {"owner": {"reputation": 1, "user_id": 7793146, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-LLKjrMfDusw/AAAAAAAAAAI/AAAAAAAAAFw/MJRBMrTj-AI/photo.jpg?sz=128", "display_name": "Sean", "link": "https://stackoverflow.com/users/7793146/sean"}, "edited": false, "score": 0, "creation_date": 1491316729, "post_id": 43209367, "comment_id": 73492258, "body": "that&#39;s right mydogisdumb and imstupid should not match. i want to compare every element in array1 with every element in array2 and if there are any matches - say the first 7 characters of an element from array1 matches the first 7 characters of an element from array2 - i want the result to be the associated element from array1."}], "answers": [{"tags": [], "owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "is_accepted": false, "score": 1, "last_activity_date": 1491315598, "creation_date": 1491315598, "answer_id": 43209917, "question_id": 43209367, "link": "https://stackoverflow.com/questions/43209367/ruby-if-element-in-array-partly-matches-with-element-from-another-array/43209917#43209917", "title": "Ruby - if element in array partly matches with element from another array", "body": "<pre><code>array1 = %w[budget2017.doc accounting2017.doc mydogisdumb.doc]\narray2 = %w[budget.doc accounting.doc imstupid.doc] \n\narray1.select do |elem|\n  array2.any? do |ee|\n    s, e = ee.split('.')\n    elem.start_with?(s) &amp;&amp; elem.end_with?(e)\n  end\nend\n#\u21d2 [\"budget2017.doc\", \"accounting2017.doc\"] \n</code></pre>\n\n<p>Or, a bit more efficient:</p>\n\n<pre><code>selectors = array2.map { |e| e.split('.') }\narray1.select do |elem|\n  selectors.any? do |(s, e)|\n    elem.start_with?(s) &amp;&amp; elem.end_with?(e)\n  end\nend\n#\u21d2 [\"budget2017.doc\", \"accounting2017.doc\"] \n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1, "user_id": 7793146, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-LLKjrMfDusw/AAAAAAAAAAI/AAAAAAAAAFw/MJRBMrTj-AI/photo.jpg?sz=128", "display_name": "Sean", "link": "https://stackoverflow.com/users/7793146/sean"}, "edited": false, "score": 0, "creation_date": 1491317948, "post_id": 43210736, "comment_id": 73493325, "body": "ndn - I will try that tonight. Thank you!"}], "tags": [], "owner": {"reputation": 33085, "user_id": 2423164, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Nxbnp.jpg?s=128&g=1", "display_name": "ndnenkov", "link": "https://stackoverflow.com/users/2423164/ndnenkov"}, "is_accepted": false, "score": 0, "last_activity_date": 1491317686, "creation_date": 1491317686, "answer_id": 43210736, "question_id": 43209367, "link": "https://stackoverflow.com/questions/43209367/ruby-if-element-in-array-partly-matches-with-element-from-another-array/43210736#43210736", "title": "Ruby - if element in array partly matches with element from another array", "body": "<p>As per the comments, finds all elements of <code>array1</code>, which have the same first 7 characters as an element out of <code>array2</code>:</p>\n\n<pre><code>array1.select do |element|\n  array2.any? { |match_candidate| match_candidate.start_with? element[0...7] }\nend\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1491324986, "post_id": 43212198, "comment_id": 73498243, "body": "<code>start_with?</code> and <code>end_with?</code> are proven to be way faster than regexp match."}], "tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": false, "score": 0, "last_activity_date": 1491321559, "creation_date": 1491321559, "answer_id": 43212198, "question_id": 43209367, "link": "https://stackoverflow.com/questions/43209367/ruby-if-element-in-array-partly-matches-with-element-from-another-array/43212198#43212198", "title": "Ruby - if element in array partly matches with element from another array", "body": "<pre><code>arr1 = [\"budget2017.doc\", \"acc2017.doc\", \"acc.doc\", \"budget2016.doc\", \"foo.doc\"] \narr2 = [\"budget.doc\", \"acc.doc\", \"foo.docx,\", \"goo.doc\"] \n\na2 = arr2.map { |s| s.split('.') }\n  #=&gt; [[\"budget\", \"doc\"], [\"acc\", \"doc\"], [\"foo\", \"docx,\"], [\"goo\", \"doc\"]] \narr1.select { |s1| a2.any? { |pfx, sfx| s1 =~ /\\A#{pfx}.*\\.#{sfx}\\z/ } }\n  #=&gt; [\"budget2017.doc\", \"acc2017.doc\", \"acc.doc\", \"budget2016.doc\"]\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 7793146, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-LLKjrMfDusw/AAAAAAAAAAI/AAAAAAAAAFw/MJRBMrTj-AI/photo.jpg?sz=128", "display_name": "Sean", "link": "https://stackoverflow.com/users/7793146/sean"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 460, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1491321559, "creation_date": 1491314276, "last_edit_date": 1491317605, "question_id": 43209367, "link": "https://stackoverflow.com/questions/43209367/ruby-if-element-in-array-partly-matches-with-element-from-another-array", "title": "Ruby - if element in array partly matches with element from another array", "body": "<p>Example:</p>\n\n<pre><code>array1 = [\"budget2017.doc\", \"accounting2017.doc\", \"mydogisdumb.doc\"]\narray2 = [\"budget.doc\", \"accounting.doc\", \"imstupid.doc\"] \n</code></pre>\n\n<p>I would like to compare the two arrays for similarity and return the associated element from <code>array1</code>.</p>\n\n<pre><code>array1.select { |x| x.include?(array2) }\n</code></pre>\n\n<p>I need the result to be a new array with <code>[\"budget2017.doc\", \"accounting2017.doc\"]</code></p>\n\n<p>But obviously the above won't work because <code>\"budget.doc\"</code> is not a match with <code>\"budget2017.doc\"</code>. I could accomplish what I need if I could just match the first few characters of each element and return the associated element from <code>array1</code>.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4"], "comments": [{"owner": {"reputation": 1456, "user_id": 2295410, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/PYmkM.png?s=128&g=1", "display_name": "Alex.U", "link": "https://stackoverflow.com/users/2295410/alex-u"}, "edited": false, "score": 0, "creation_date": 1491312650, "post_id": 43208220, "comment_id": 73488851, "body": "Are you sure you&#39;re not defining that variable somewhere else? or are you using &#39;active_admin&#39;?"}, {"owner": {"reputation": 55, "user_id": 7062008, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/8acb00bd1a8aca08a88885857f4371cc?s=128&d=identicon&r=PG&f=1", "display_name": "user938438932", "link": "https://stackoverflow.com/users/7062008/user938438932"}, "reply_to_user": {"reputation": 1456, "user_id": 2295410, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/PYmkM.png?s=128&g=1", "display_name": "Alex.U", "link": "https://stackoverflow.com/users/2295410/alex-u"}, "edited": false, "score": 0, "creation_date": 1491313129, "post_id": 43208220, "comment_id": 73489254, "body": "PATIENT_HASH is defined only in Patientinfo concern"}], "answers": [{"comments": [{"owner": {"reputation": 55, "user_id": 7062008, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/8acb00bd1a8aca08a88885857f4371cc?s=128&d=identicon&r=PG&f=1", "display_name": "user938438932", "link": "https://stackoverflow.com/users/7062008/user938438932"}, "edited": false, "score": 0, "creation_date": 1491316888, "post_id": 43208969, "comment_id": 73492384, "body": "Yes. i am calling it in 2 separate models"}, {"owner": {"reputation": 1456, "user_id": 2295410, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/PYmkM.png?s=128&g=1", "display_name": "Alex.U", "link": "https://stackoverflow.com/users/2295410/alex-u"}, "reply_to_user": {"reputation": 55, "user_id": 7062008, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/8acb00bd1a8aca08a88885857f4371cc?s=128&d=identicon&r=PG&f=1", "display_name": "user938438932", "link": "https://stackoverflow.com/users/7062008/user938438932"}, "edited": false, "score": 0, "creation_date": 1491317143, "post_id": 43208969, "comment_id": 73492600, "body": "then this is the issue. The constant is already defined by the time the second class includes this module."}, {"owner": {"reputation": 1456, "user_id": 2295410, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/PYmkM.png?s=128&g=1", "display_name": "Alex.U", "link": "https://stackoverflow.com/users/2295410/alex-u"}, "reply_to_user": {"reputation": 55, "user_id": 7062008, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/8acb00bd1a8aca08a88885857f4371cc?s=128&d=identicon&r=PG&f=1", "display_name": "user938438932", "link": "https://stackoverflow.com/users/7062008/user938438932"}, "edited": false, "score": 0, "creation_date": 1491373030, "post_id": 43208969, "comment_id": 73516756, "body": "could you please accept this as an answer if this was the case?"}], "tags": [], "owner": {"reputation": 1456, "user_id": 2295410, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/PYmkM.png?s=128&g=1", "display_name": "Alex.U", "link": "https://stackoverflow.com/users/2295410/alex-u"}, "is_accepted": true, "score": 1, "last_activity_date": 1491313249, "creation_date": 1491313249, "answer_id": 43208969, "question_id": 43208220, "link": "https://stackoverflow.com/questions/43208220/already-initialized-constant-patientinfopatient-hash-warning-previous-defini/43208969#43208969", "title": "Already initialized constant Patientinfo::PATIENT_HASH. warning: previous definition of PATIENT_HASH was here", "body": "<p>If you're including this module in more than one class, included will run the same block again, re-defining the constant, hence the collision. Do you include this module in more than one class?</p>\n"}], "owner": {"reputation": 55, "user_id": 7062008, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/8acb00bd1a8aca08a88885857f4371cc?s=128&d=identicon&r=PG&f=1", "display_name": "user938438932", "link": "https://stackoverflow.com/users/7062008/user938438932"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 520, "favorite_count": 0, "accepted_answer_id": 43208969, "answer_count": 1, "score": 2, "last_activity_date": 1491313249, "creation_date": 1491311422, "question_id": 43208220, "link": "https://stackoverflow.com/questions/43208220/already-initialized-constant-patientinfopatient-hash-warning-previous-defini", "title": "Already initialized constant Patientinfo::PATIENT_HASH. warning: previous definition of PATIENT_HASH was here", "body": "<p>I created a concern patientinfo with following code</p>\n\n<pre><code>module Patientinfo\n  extend ActiveSupport::Concern\n\n  included do\n    PATIENT_HASH = {\n      '0' =&gt; 'Test1',\n      '1' =&gt; 'Test2',\n      '2' =&gt; 'Test3',\n      '3' =&gt; 'Test4'\n    }.freeze\n\n    def patient_map(patient_number)\n      PATIENT_HASH[patient_number]\n    end\n  end\nend\n</code></pre>\n\n<p>Now when i start the rails server i am getting the error in title. \nAny idea why?</p>\n"}, {"tags": ["ruby", "shell"], "comments": [{"owner": {"reputation": 4150, "user_id": 7470620, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/49f3026fe13841e41d1805178eed9a3c?s=128&d=identicon&r=PG", "display_name": "eiko", "link": "https://stackoverflow.com/users/7470620/eiko"}, "edited": false, "score": 0, "creation_date": 1491311836, "post_id": 43208040, "comment_id": 73488169, "body": "how are you executing your shell command? the execution style you choose dictates whether you&#39;ll get a data stream (which gets continuously output) or buffered data (which is printed all at once)."}], "answers": [{"comments": [{"owner": {"reputation": 12022, "user_id": 419017, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/Y6Frk.jpg?s=128&g=1", "display_name": "Damien Roche", "link": "https://stackoverflow.com/users/419017/damien-roche"}, "edited": false, "score": 0, "creation_date": 1572861075, "post_id": 43208282, "comment_id": 103679295, "body": "Simple and effective."}], "tags": [], "owner": {"reputation": 33085, "user_id": 2423164, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Nxbnp.jpg?s=128&g=1", "display_name": "ndnenkov", "link": "https://stackoverflow.com/users/2423164/ndnenkov"}, "is_accepted": false, "score": 3, "last_activity_date": 1491311908, "last_edit_date": 1491311908, "creation_date": 1491311573, "answer_id": 43208282, "question_id": 43208040, "link": "https://stackoverflow.com/questions/43208040/ruby-continuously-output-stdout-of-a-long-running-shell-command/43208282#43208282", "title": "Ruby continuously output stdout of a long running shell command", "body": "<p>Redirect the output to <code>STDOUT</code>:</p>\n\n<pre><code># waits a second, prints the current directory's contents, waits 5 seconds\nsystem('sleep 1; ls; sleep 5', out: STDOUT)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 4150, "user_id": 7470620, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/49f3026fe13841e41d1805178eed9a3c?s=128&d=identicon&r=PG", "display_name": "eiko", "link": "https://stackoverflow.com/users/7470620/eiko"}, "is_accepted": false, "score": 2, "last_activity_date": 1491313371, "last_edit_date": 1491313371, "creation_date": 1491312600, "answer_id": 43208709, "question_id": 43208040, "link": "https://stackoverflow.com/questions/43208040/ruby-continuously-output-stdout-of-a-long-running-shell-command/43208709#43208709", "title": "Ruby continuously output stdout of a long running shell command", "body": "<p>My favorite way to work with shell commands is like so:</p>\n\n<pre><code>Open3.popen3 \"shellcommand --args --more-args\" do |stdin, stdout, stderr, thread|\n  while line = stdout.gets\n    puts line\n  end\nend\n</code></pre>\n\n<p>The command gives you input, output and error streams. You can call <code>stdout.gets</code> to get the next line of output (my favorite), or <code>stdout.getc</code> for the next character, if you really want immediacy. The function waits until input is available and then returns <code>nil</code> when the command completes, so a common technique is to wrap the command in a while-loop and have a set of commands repeatedly execute until the command completes.</p>\n"}], "owner": {"reputation": 13009, "user_id": 1532045, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/c0f1432bd6834661f8e16d0397f43b00?s=128&d=identicon&r=PG", "display_name": "Avner Barr", "link": "https://stackoverflow.com/users/1532045/avner-barr"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 334, "favorite_count": 0, "answer_count": 2, "score": 2, "last_activity_date": 1491341123, "creation_date": 1491310958, "last_edit_date": 1491341123, "question_id": 43208040, "link": "https://stackoverflow.com/questions/43208040/ruby-continuously-output-stdout-of-a-long-running-shell-command", "title": "Ruby continuously output stdout of a long running shell command", "body": "<p>How can I continuously output the results of a long running shell command, as the output becomes available?</p>\n\n<p>Currently I need to do this (which I can only see after command has finished)</p>\n\n<blockquote>\n  <p>puts <code>long_running_shell_command</code></p>\n</blockquote>\n\n<p>What I want to do conceptually is</p>\n\n<blockquote>\n  <p>puts_immediately  <code>long_running_shell_command</code></p>\n</blockquote>\n"}, {"tags": ["ruby", "google-api"], "answers": [{"tags": [], "owner": {"reputation": 17095, "user_id": 267705, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/4543ffcf546b12b586c0a851c4129778?s=128&d=identicon&r=PG", "display_name": "David Morales", "link": "https://stackoverflow.com/users/267705/david-morales"}, "is_accepted": true, "score": 5, "last_activity_date": 1491310249, "creation_date": 1491310249, "answer_id": 43207766, "question_id": 43207765, "link": "https://stackoverflow.com/questions/43207765/how-do-i-add-data-to-a-google-sheet-from-ruby/43207766#43207766", "title": "How do I add data to a Google Sheet from Ruby?", "body": "<p>Let's suppose you have an array of emails you want to add to a spreadsheet:</p>\n\n<pre><code>def generate_emails\n  10.times.map { |i| [\"email#{i}@example.com\"] }\nend\n</code></pre>\n\n<p>Now, after initializing the API (just after calling the <code>authorize</code> method, prepare the value range object with the data, and append it to the spreadsheet using the API:</p>\n\n<pre><code># Adds the email addresses to the spreadsheet\nvalue_range_object = Google::Apis::SheetsV4::ValueRange.new(values: generate_emails)\nresponse = service.append_spreadsheet_value(\n           SPREADSHEET_ID,\n           RANGE,\n           value_range_object,\n           value_input_option: VALUE_INPUT_OPTION)\n</code></pre>\n\n<p>Don't forget to define the <code>SPREADSHEET_ID</code>, and the other two constants:</p>\n\n<pre><code>RANGE = 'Sheet1!A1'\nVALUE_INPUT_OPTION = 'RAW'\n</code></pre>\n\n<p>This will add your data to the existing content (it will not be overwritten).</p>\n"}], "owner": {"reputation": 17095, "user_id": 267705, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/4543ffcf546b12b586c0a851c4129778?s=128&d=identicon&r=PG", "display_name": "David Morales", "link": "https://stackoverflow.com/users/267705/david-morales"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1145, "favorite_count": 0, "accepted_answer_id": 43207766, "answer_count": 1, "score": 4, "last_activity_date": 1529919255, "creation_date": 1491310249, "question_id": 43207765, "link": "https://stackoverflow.com/questions/43207765/how-do-i-add-data-to-a-google-sheet-from-ruby", "title": "How do I add data to a Google Sheet from Ruby?", "body": "<p>There's a <a href=\"https://developers.google.com/sheets/api/quickstart/ruby\" rel=\"nofollow noreferrer\">Ruby Quickstart guide</a> in Google's developers site, but it only demonstrates how to get data from a spreadsheet, not adding data to it.</p>\n\n<p>Is there some easy example out there explaining how to do it?</p>\n"}, {"tags": ["arrays", "ruby"], "answers": [{"comments": [{"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1491310172, "post_id": 43207641, "comment_id": 73486850, "body": "Note that the question has a <code>ruby</code> tag."}, {"owner": {"reputation": 721, "user_id": 6005089, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf76b226f95f8eafdfe745dcc07727b8?s=128&d=identicon&r=PG", "display_name": "Hadas Zeilberger", "link": "https://stackoverflow.com/users/6005089/hadas-zeilberger"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1491310366, "post_id": 43207641, "comment_id": 73487007, "body": "same concept applies though, no?"}], "tags": [], "owner": {"reputation": 721, "user_id": 6005089, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf76b226f95f8eafdfe745dcc07727b8?s=128&d=identicon&r=PG", "display_name": "Hadas Zeilberger", "link": "https://stackoverflow.com/users/6005089/hadas-zeilberger"}, "is_accepted": false, "score": 1, "last_activity_date": 1491311957, "last_edit_date": 1491311957, "creation_date": 1491309914, "answer_id": 43207641, "question_id": 43207397, "link": "https://stackoverflow.com/questions/43207397/circular-array-slicing/43207641#43207641", "title": "Circular array slicing", "body": "<p>Possible solution:</p>\n\n<pre><code>4.times { |i| p a.values_at(*(i*3..i*3+2).map {|e| e % 10 }) }\n[0, 1, 2]\n[3, 4, 5]\n[6, 7, 8]\n[9, 0, 1]\n</code></pre>\n\n<p>9%10 = 9, 10%10 = 0, 11%10 = 1. So you will get the desired output.</p>\n"}, {"comments": [{"owner": {"reputation": 47232, "user_id": 1772830, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Qtoqg.jpg?s=128&g=1", "display_name": "Andrey Deineko", "link": "https://stackoverflow.com/users/1772830/andrey-deineko"}, "edited": false, "score": 1, "creation_date": 1491310316, "post_id": 43207681, "comment_id": 73486961, "body": "exactly what I had in mind - <code>a.cycle.each_slice(3).take(4).map.with_index {|a,i| &quot;i = #{i} =&gt; #{a}&quot;}</code>, but was not sure if that&#39;s what needed from the question :)"}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "reply_to_user": {"reputation": 47232, "user_id": 1772830, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Qtoqg.jpg?s=128&g=1", "display_name": "Andrey Deineko", "link": "https://stackoverflow.com/users/1772830/andrey-deineko"}, "edited": false, "score": 1, "creation_date": 1491310424, "post_id": 43207681, "comment_id": 73487050, "body": "@AndreyDeineko the example contains the expected output: <code>i = 3 =&gt; [9,0,1]</code>"}], "tags": [], "owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "is_accepted": true, "score": 9, "last_activity_date": 1491310021, "creation_date": 1491310021, "answer_id": 43207681, "question_id": 43207397, "link": "https://stackoverflow.com/questions/43207397/circular-array-slicing/43207681#43207681", "title": "Circular array slicing", "body": "<p>You could use <a href=\"http://ruby-doc.org/core-2.4.1/Array.html#method-i-cycle\" rel=\"noreferrer\"><code>cycle</code></a>:</p>\n\n<pre><code>a.cycle.each_slice(3).take(4)\n#=&gt; [[0, 1, 2], [3, 4, 5], [6, 7, 8], [9, 0, 1]]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 5382, "user_id": 7671538, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3506350bc4dd02281ad7f99e8e84715c?s=128&d=identicon&r=PG&f=1", "display_name": "gwcodes", "link": "https://stackoverflow.com/users/7671538/gwcodes"}, "is_accepted": false, "score": 2, "last_activity_date": 1491311056, "last_edit_date": 1491311056, "creation_date": 1491310251, "answer_id": 43207767, "question_id": 43207397, "link": "https://stackoverflow.com/questions/43207397/circular-array-slicing/43207767#43207767", "title": "Circular array slicing", "body": "<p>You could use <a href=\"https://apidock.com/ruby/Array/rotate\" rel=\"nofollow noreferrer\">Array#rotate</a>, and then take the first 3 elements each time:</p>\n\n<pre><code>4.times.each { |i| a.rotate(i*3)[0..2] }\n# =&gt; [[0, 1, 2], [3, 4, 5], [6, 7, 8], [9, 0, 1]]\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 1, "creation_date": 1491312701, "post_id": 43208494, "comment_id": 73488879, "body": "Just give <i>your</i> method another name, there&#39;s absolutely no need to rename the built-in one."}], "tags": [], "owner": {"reputation": 885, "user_id": 1169785, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1cb88c0410d5380a5b590a2e993b053a?s=128&d=identicon&r=PG", "display_name": "G. Allen Morris III", "link": "https://stackoverflow.com/users/1169785/g-allen-morris-iii"}, "is_accepted": false, "score": 0, "last_activity_date": 1491319649, "last_edit_date": 1491319649, "creation_date": 1491312088, "answer_id": 43208494, "question_id": 43207397, "link": "https://stackoverflow.com/questions/43207397/circular-array-slicing/43208494#43208494", "title": "Circular array slicing", "body": "<p>This might break some code, so be careful.</p>\n\n<pre><code>class Array\n  alias_method :old_slice, :slice\n  def slice(o, c)\n     ret = old_slice(o % size, c)\n     if ret.size != c\n        ret += old_slice(0, c - ret.size)\n     end\n     ret\n  end\nend\n\na = [0,1,2,3,4,5,6,7,8,9]\n\n4.times do |i|\n  p a.slice(i * 3, 3)\nend\n</code></pre>\n\n<p>As Stephan points out it would be better to give this method a different name, or it might be even better to create a CircularArray class.</p>\n\n<pre><code>class CircularArray &lt; Array\n  alias_method :straight_slice, :slice\n  def slice(o, c)\n     ret = straight_slice(o % size, c)\n     if ret.size != c\n        ret += straight_slice(0, c - ret.size)\n     end\n     ret\n  end\nend\n</code></pre>\n"}], "owner": {"reputation": 8232, "user_id": 1002814, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/935d2564cfa8572c12763684e072063d?s=128&d=identicon&r=PG", "display_name": "Niels Kristian", "link": "https://stackoverflow.com/users/1002814/niels-kristian"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1265, "favorite_count": 0, "accepted_answer_id": 43207681, "answer_count": 4, "score": 3, "last_activity_date": 1491319649, "creation_date": 1491309257, "question_id": 43207397, "link": "https://stackoverflow.com/questions/43207397/circular-array-slicing", "title": "Circular array slicing", "body": "<p>I have an array with a varying number of elements 0..n elements. An example could be:</p>\n\n<pre><code>a = [0,1,2,3,4,5,6,7,8,9]\n</code></pre>\n\n<p>In an iterative process, I would like to move a cursor in the array and slice out a max number of elements. If I reach the \"end\" of the array, it should start over and pick from the beginning again:</p>\n\n<p>Something like this:</p>\n\n<pre><code>4.times do |i|\n  a.slice(i * 3, 3)\nend\n# i = 0 =&gt; [0,1,2]\n# i = 1 =&gt; [3,4,5]\n# i = 2 =&gt; [6,7,8]\n# i = 3 =&gt; [9,0,1]\n# ...\n</code></pre>\n\n<p>However the last output <code>i = 3</code> produces <code>[9]</code> as <code>.slice</code> does not do exactly what I want.</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 569, "user_id": 1501938, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Yv3Vp.jpg?s=128&g=1", "display_name": "Ilya Bodrov-Krukowski", "link": "https://stackoverflow.com/users/1501938/ilya-bodrov-krukowski"}, "edited": false, "score": 0, "creation_date": 1491309350, "post_id": 43207372, "comment_id": 73486232, "body": "I&#39;d recommend saying <code>resources :blogs</code> as resources are usually in plural form."}], "answers": [{"comments": [{"owner": {"reputation": 165, "user_id": 3745015, "user_type": "registered", "accept_rate": 19, "profile_image": "https://www.gravatar.com/avatar/efa3a15a291ee97bd85f1c823412a5c6?s=128&d=identicon&r=PG&f=1", "display_name": "Jim B", "link": "https://stackoverflow.com/users/3745015/jim-b"}, "edited": false, "score": 0, "creation_date": 1491312793, "post_id": 43207545, "comment_id": 73488956, "body": "Thanks for the help. I went back and set up the blog using the standard naming convention."}], "tags": [], "owner": {"reputation": 1658, "user_id": 2240273, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/R9qy8.jpg?s=128&g=1", "display_name": "alanpaivaa", "link": "https://stackoverflow.com/users/2240273/alanpaivaa"}, "is_accepted": true, "score": 1, "last_activity_date": 1491309658, "creation_date": 1491309658, "answer_id": 43207545, "question_id": 43207372, "link": "https://stackoverflow.com/questions/43207372/rails-form-for-not-working-as-expected/43207545#43207545", "title": "Rails form_for not working as expected", "body": "<p>Following the conventions, rename your controller file to <code>blogs_controller.rb</code> and the class inside of it to <code>BlogsController</code>. Then, in your <code>routes.rb</code>: <code>resources :blogs</code>. It should all work fine.</p>\n"}, {"tags": [], "owner": {"reputation": 11, "user_id": 6502677, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ORTfh.jpg?s=128&g=1", "display_name": "Eric", "link": "https://stackoverflow.com/users/6502677/eric"}, "is_accepted": false, "score": 1, "last_activity_date": 1491309776, "creation_date": 1491309776, "answer_id": 43207586, "question_id": 43207372, "link": "https://stackoverflow.com/questions/43207372/rails-form-for-not-working-as-expected/43207586#43207586", "title": "Rails form_for not working as expected", "body": "<p>As already said, it should be :</p>\n\n<pre><code>resources :blogs\n</code></pre>\n\n<p>And I think the controller should use the plural too : BlogsController</p>\n"}, {"tags": [], "owner": {"reputation": 1357, "user_id": 6229122, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-tQUnBjPGP9o/AAAAAAAAAAI/AAAAAAAACww/wJS82aCB06E/photo.jpg?sz=128", "display_name": "Alex Suslyakov", "link": "https://stackoverflow.com/users/6229122/alex-suslyakov"}, "is_accepted": false, "score": 1, "last_activity_date": 1491310234, "creation_date": 1491310234, "answer_id": 43207754, "question_id": 43207372, "link": "https://stackoverflow.com/questions/43207372/rails-form-for-not-working-as-expected/43207754#43207754", "title": "Rails form_for not working as expected", "body": "<p>To find what's wrong with urls you can use <code>rake routes</code> command</p>\n\n<p>Values in first column <em>Prefix</em> are names of helpers you can use as <code>prefix_url</code> or <code>prefix_path</code></p>\n"}], "owner": {"reputation": 165, "user_id": 3745015, "user_type": "registered", "accept_rate": 19, "profile_image": "https://www.gravatar.com/avatar/efa3a15a291ee97bd85f1c823412a5c6?s=128&d=identicon&r=PG&f=1", "display_name": "Jim B", "link": "https://stackoverflow.com/users/3745015/jim-b"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 190, "favorite_count": 1, "accepted_answer_id": 43207545, "answer_count": 3, "score": 0, "last_activity_date": 1491310376, "creation_date": 1491309189, "question_id": 43207372, "link": "https://stackoverflow.com/questions/43207372/rails-form-for-not-working-as-expected", "title": "Rails form_for not working as expected", "body": "<p>I am trying to create a small rails blog, and have run into an error. I think I've messed up the naming convention of something here... but I can't find anything specific enough to help me and give me the answer.</p>\n\n<p>I have a route of </p>\n\n<pre><code>resources :blog\n</code></pre>\n\n<p>and a controller which has the following</p>\n\n<pre><code>class BlogController &lt; ApplicationController\n\n  def index\n    @blogs = Blog.all\n  end\n\n  def show\n    @blog = Blog.find(params[:id])\n  end\n\n  def new\n    @blog = Blog.new\n  end\n\nend\n</code></pre>\n\n<p>When I try to set up a form on the new.html.erb page, it links to routing which states </p>\n\n<pre><code>undefined method `blogs_path'\n</code></pre>\n\n<p>My route is blog, not blogs... where am I going wrong? I would like the route to be /blog.</p>\n"}, {"tags": ["ruby", "while-loop", "range"], "comments": [{"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 2, "creation_date": 1491308837, "post_id": 43207200, "comment_id": 73485831, "body": "hint: <code>array.chunk_while</code>"}], "answers": [{"tags": [], "owner": {"reputation": 27144, "user_id": 3857758, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/58c4295826435f049b7fc32b98c240f9?s=128&d=identicon&r=PG&f=1", "display_name": "Ursus", "link": "https://stackoverflow.com/users/3857758/ursus"}, "is_accepted": true, "score": 3, "last_activity_date": 1491309293, "creation_date": 1491309293, "answer_id": 43207415, "question_id": 43207200, "link": "https://stackoverflow.com/questions/43207200/ruby-getting-uninterrupted-range-s-from-an-array/43207415#43207415", "title": "Ruby - getting uninterrupted range/-s from an array", "body": "<p>Nice solution:</p>\n\n<pre><code>array.chunk_while { |i, j| i + 1 == j }.select { |range| range.size &gt; 1 }\n =&gt; [[1, 2, 3], [6, 7, 8, 9]] \n</code></pre>\n\n<p>In your code the problem is that you are asking for the index of values 0 (and you don't have 0s) and 1, not the value at the positions 0 and 1. This is the first issue I note. You could do</p>\n\n<pre><code>compare1 = array[0]\ncompare2 = array[1]\n</code></pre>\n"}], "owner": {"reputation": 9729, "user_id": 4554116, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/cu8de.png?s=128&g=1", "display_name": "Julius", "link": "https://stackoverflow.com/users/4554116/julius"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 44, "favorite_count": 0, "accepted_answer_id": 43207415, "answer_count": 1, "score": 0, "last_activity_date": 1491309293, "creation_date": 1491308733, "question_id": 43207200, "link": "https://stackoverflow.com/questions/43207200/ruby-getting-uninterrupted-range-s-from-an-array", "title": "Ruby - getting uninterrupted range/-s from an array", "body": "<p>I have an <code>array = [1, 3, 5, 1, 2, 3, 6, 7, 8, 9]</code></p>\n\n<p>And I need to extract uninterrupted ranges, so <code>[1, 2, 3]</code> and <code>[6, 7, 8, 9]</code> in this case. </p>\n\n<p>Please share your ideas for this, but also, please - fix my while loop as well. Learning is my priority nr 1. </p>\n\n<p>My primary try to get at least one range was:</p>\n\n<pre><code>$sequence = []\n\nwhile array.length &gt; 0 do\n    p @compare1 = array.index(0)\n    p @compare2 = array.index(1)\n    if @compare1 + 1 == @compare2\n        $sequence &lt;&lt; @compare1 \n  end\n    array = array[1..-1] \nend \n</code></pre>\n\n<p>But it doesn't work...</p>\n"}, {"tags": ["ruby", "programmatically", "ruby-2.3"], "comments": [{"owner": {"reputation": 47232, "user_id": 1772830, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Qtoqg.jpg?s=128&g=1", "display_name": "Andrey Deineko", "link": "https://stackoverflow.com/users/1772830/andrey-deineko"}, "edited": false, "score": 1, "creation_date": 1491309147, "post_id": 43206994, "comment_id": 73486077, "body": "note the usage of <code>public_send</code> in the linked question and never use <code>send</code> unless you know why you do that."}], "answers": [{"tags": [], "owner": {"reputation": 5382, "user_id": 7671538, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3506350bc4dd02281ad7f99e8e84715c?s=128&d=identicon&r=PG&f=1", "display_name": "gwcodes", "link": "https://stackoverflow.com/users/7671538/gwcodes"}, "is_accepted": true, "score": 4, "last_activity_date": 1491308436, "creation_date": 1491308436, "answer_id": 43207102, "question_id": 43206994, "link": "https://stackoverflow.com/questions/43206994/call-property-programmatically-in-ruby/43207102#43207102", "title": "Call property programmatically in Ruby", "body": "<p>You can use <a href=\"http://ruby-doc.org/core-2.4.1/Object.html#method-i-send\" rel=\"nofollow noreferrer\">#send</a> to programmatically access properties:</p>\n\n<pre><code>m.send(\"#{property_name}_with_locales\")\n# =&gt; { 'en-US' =&gt; 'US Title', ... }\n</code></pre>\n\n<p>If you need to access a setter and pass in values, you can do:</p>\n\n<pre><code>m.send(\"#{property_name}_with_locales=\", { 'whatever' =&gt; 'value' })\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 5382, "user_id": 7671538, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3506350bc4dd02281ad7f99e8e84715c?s=128&d=identicon&r=PG&f=1", "display_name": "gwcodes", "link": "https://stackoverflow.com/users/7671538/gwcodes"}, "edited": false, "score": 1, "creation_date": 1491309816, "post_id": 43207247, "comment_id": 73486578, "body": "beware old benchmarks - from 2008! :-) This isn&#39;t true in more recent versions of Ruby, and <code>send</code> should actually be faster (but we&#39;re talking minuscule differences here)"}, {"owner": {"reputation": 5483, "user_id": 4481312, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/teLso.jpg?s=128&g=1", "display_name": "marmeladze", "link": "https://stackoverflow.com/users/4481312/marmeladze"}, "reply_to_user": {"reputation": 5382, "user_id": 7671538, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3506350bc4dd02281ad7f99e8e84715c?s=128&d=identicon&r=PG&f=1", "display_name": "gwcodes", "link": "https://stackoverflow.com/users/7671538/gwcodes"}, "edited": false, "score": 0, "creation_date": 1491311093, "post_id": 43207247, "comment_id": 73487589, "body": "sorry, i&#39;ve not updated myself -))"}, {"owner": {"reputation": 45322, "user_id": 421705, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/581b1760881c962648f99d6040d41829?s=128&d=identicon&r=PG", "display_name": "Holger Just", "link": "https://stackoverflow.com/users/421705/holger-just"}, "edited": false, "score": 0, "creation_date": 1491320553, "post_id": 43207247, "comment_id": 73495336, "body": "Never use <code>eval</code> unless you absolutely positively have to and understand the consequences of doing so (i.e. the danger of introducing a remote code execution vulnerability if someone manages to inject unintended ruby code)."}, {"owner": {"reputation": 45322, "user_id": 421705, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/581b1760881c962648f99d6040d41829?s=128&d=identicon&r=PG", "display_name": "Holger Just", "link": "https://stackoverflow.com/users/421705/holger-just"}, "edited": false, "score": 0, "creation_date": 1491320720, "post_id": 43207247, "comment_id": 73495455, "body": "Also, the linked benchmark is seriously flawed since the expensive part of using <code>a.method(&quot;length&quot;).call</code>, namely the generation of the method object, is left out of the benchmark. If you include it in the loop, the fastest option will again be <code>send</code> respectively <code>public_send</code>"}], "tags": [], "owner": {"reputation": 5483, "user_id": 4481312, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/teLso.jpg?s=128&g=1", "display_name": "marmeladze", "link": "https://stackoverflow.com/users/4481312/marmeladze"}, "is_accepted": false, "score": 0, "last_activity_date": 1491308858, "creation_date": 1491308858, "answer_id": 43207247, "question_id": 43206994, "link": "https://stackoverflow.com/questions/43206994/call-property-programmatically-in-ruby/43207247#43207247", "title": "Call property programmatically in Ruby", "body": "<p>beside <code>send</code> as @gwcodes had written, there are also, <code>eval</code> and <code>call</code>. </p>\n\n<pre><code>2.3.1 :010 &gt; a\n =&gt; [1, 2, 3] \n2.3.1 :011 &gt; a.send(\"length\")\n =&gt; 3 \n2.3.1 :012 &gt; a.method(\"length\").call\n =&gt; 3 \n2.3.1 :013 &gt; eval \"a.length\"\n =&gt; 3 \n</code></pre>\n\n<p><a href=\"http://blog.khd.me/ruby/ruby-dynamic-method-calling/\" rel=\"nofollow noreferrer\">as shown on this blog post</a> <code>call</code> is a bit faster than <code>send</code>. </p>\n"}], "owner": {"reputation": 20208, "user_id": 469106, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/dbbe7d20d8f71260222ab51c9b1ca48f?s=128&d=identicon&r=PG", "display_name": "skaz", "link": "https://stackoverflow.com/users/469106/skaz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 125, "favorite_count": 0, "closed_date": 1491309122, "accepted_answer_id": 43207102, "answer_count": 2, "score": 0, "last_activity_date": 1491308858, "creation_date": 1491308160, "question_id": 43206994, "link": "https://stackoverflow.com/questions/43206994/call-property-programmatically-in-ruby", "closed_reason": "Duplicate", "title": "Call property programmatically in Ruby", "body": "<p>I have a Ruby project where I programmatically get the names of keys in a hash I need to access. I can access the fields I need in the following way:</p>\n\n<pre><code>current_content = entry.fields[property_name.to_sym]\n</code></pre>\n\n<p>However, it seems that some content can only be accessed with a property syntax: </p>\n\n<pre><code>m.title_with_locales = {'en-US' =&gt; 'US Title', 'nl' =&gt; 'NL Title'}\n</code></pre>\n\n<p>Since I don't know \"title\" ahead of time, how can I make a call programmatically? Ex:</p>\n\n<pre><code>m.${property_name}_with_locales = {'en-US' =&gt; 'US Title', 'nl' =&gt; 'NL Title'}\n</code></pre>\n"}]