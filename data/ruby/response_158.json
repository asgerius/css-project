[{"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-5", "pundit"], "answers": [{"comments": [{"owner": {"reputation": 389, "user_id": 2743124, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/VcxZw.jpg?s=128&g=1", "display_name": "Chetan Datta", "link": "https://stackoverflow.com/users/2743124/chetan-datta"}, "edited": false, "score": 0, "creation_date": 1516234396, "post_id": 48311971, "comment_id": 83609834, "body": "Exactly what i wanted.. Tnx"}], "tags": [], "owner": {"reputation": 4600, "user_id": 5961578, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/df7cbfdd2a92a7926af3bbb8648318aa?s=128&d=identicon&r=PG", "display_name": "moveson", "link": "https://stackoverflow.com/users/5961578/moveson"}, "is_accepted": true, "score": 3, "last_activity_date": 1516234401, "last_edit_date": 1516234401, "creation_date": 1516234020, "answer_id": 48311971, "question_id": 48311070, "link": "https://stackoverflow.com/questions/48311070/create-pundit-policies-to-api-controller-methods/48311971#48311971", "title": "Create Pundit Policies to API controller methods", "body": "<p>Pundit is resource-based, not controller-based. When you call <code>authorize</code> and pass it a resource, Pundit cares about the action name and the resource type, but it does not care about the controller name.</p>\n\n<p>Regardless of whether you call from the Api::PostsController:</p>\n\n<pre><code># /app/controllers/api/posts_controller.rb\n\nclass Api::PostsController &lt; ApplicationController\n\n  def create\n    @post = Post.find(params[:post_id])\n    authorize @post\n  end\nend\n</code></pre>\n\n<p>or from your original PostsController:</p>\n\n<pre><code># /app/controllers/posts_controller.rb\n\nclass PostsController &lt; ApplicationController\n\n  def create\n    @post = Post.find(params[:post_id])\n    authorize @post\n  end\nend\n</code></pre>\n\n<p>So long as <code>@post</code> is a member of the <code>Post</code> class, you can call <code>authorize @post</code> from the controller of a parent or child or a completely unrelated controller, it doesn't matter. In all cases Pundit will go and look for a method called <code>create?</code> within app/policies/post_policy:</p>\n\n<pre><code># app/policies/post_policy.rb\n\nclass PostPolicy &lt; ApplicationPolicy\n\n  attr_reader :user, :post\n\n  def initialize(user, post)\n    @user = user\n    @post = post\n  end\n\n  def create?\n    user.present?\n  end\nend\n</code></pre>\n"}], "owner": {"reputation": 389, "user_id": 2743124, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/VcxZw.jpg?s=128&g=1", "display_name": "Chetan Datta", "link": "https://stackoverflow.com/users/2743124/chetan-datta"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1739, "favorite_count": 2, "accepted_answer_id": 48311971, "answer_count": 1, "score": 2, "last_activity_date": 1516234401, "creation_date": 1516228249, "last_edit_date": 1516228977, "question_id": 48311070, "link": "https://stackoverflow.com/questions/48311070/create-pundit-policies-to-api-controller-methods", "title": "Create Pundit Policies to API controller methods", "body": "<p>How to create <code>Policies</code> for API-Controller's using <code>Pundit gem</code>?</p>\n\n<p>Api controller path: <code>/app/controllers/api/posts_controller.rb</code></p>\n\n<pre><code>#posts_controller.rb\n\nclass Api::PostsController &lt; ApplicationController\n\n  def create\n  ......\n  end\n\n\n  def update\n  ......\n  end\n\n  def delete\n  ......\n  end\n\nend\n</code></pre>\n\n<p>I have <code>Controller</code> for the same and the corresponding <code>Model</code></p>\n\n<p>controller path: <code>/controllers/posts_controller.rb</code></p>\n\n<pre><code>#posts_controller.rb\n\nclass PostsController &lt; ApplicationController\n\n  def create\n  ......\n  end\n\n\n  def update\n  ......\n  end\n\n  def delete\n  ......\n  end\n\nend\n</code></pre>\n\n<p>I have created the policies for <code>posts controller</code>. How to create the same for API's Controller</p>\n"}, {"tags": ["ruby", "graphql", "relay", "graphql-ruby"], "owner": {"reputation": 4249, "user_id": 531479, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/52be1662035d921d395ca5b1d6b9c64c?s=128&d=identicon&r=PG", "display_name": "CWitty", "link": "https://stackoverflow.com/users/531479/cwitty"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 177, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1516227740, "creation_date": 1516227740, "question_id": 48310971, "link": "https://stackoverflow.com/questions/48310971/creating-join-multiple-associations-using-graphql-relay", "title": "Creating join multiple associations using GraphQL &amp; Relay", "body": "<p>I am using GraphQL Ruby and making it compatible with Relay. I am trying to find the <strong>correct</strong> way of creating records in a join table using Relays node IDs. I know I can take an array of node IDs and get look up each object using <code>Schema.object_from_id</code>, but that would cause an N+1 query and I am trying to avoid that. </p>\n\n<p>Is that the only way to do it if I use Relay node IDs? What is the best practice for this situation?</p>\n\nData model for reference:\n\n<p>We have <code>Photo</code>s, <code>Gallery</code>s, and the join model is <code>GalleryPhoto</code>. I have the ids for the photos and want to create a new gallery.</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 2946, "user_id": 1430057, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/Tbizp.jpg?s=128&g=1", "display_name": "Subash", "link": "https://stackoverflow.com/users/1430057/subash"}, "edited": false, "score": 0, "creation_date": 1516228532, "post_id": 48310935, "comment_id": 83608006, "body": "Always show your code, what you did before you ask for help"}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1516230927, "post_id": 48310935, "comment_id": 83608912, "body": "Thanks for the greenie, but I would encourage you to wait longer before awarding the checkmark to anyone. A quick selection may discourage other answers and imo is a little discourteous to others still working on answers. The point is, there&#39;s no rush. Many here wait at least a couple of hours--some much longer--before selecting an answer. If you wish, you can retract your selection and reconsider later."}, {"owner": {"reputation": 95, "user_id": 7685722, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/791cbf6af02ecfe051dd1a9b0c39fa7c?s=128&d=identicon&r=PG&f=1", "display_name": "C. Yee", "link": "https://stackoverflow.com/users/7685722/c-yee"}, "edited": false, "score": 0, "creation_date": 1516231148, "post_id": 48310935, "comment_id": 83608983, "body": "Got it. Will do next time. I figure I didn&#39;t want to waste people&#39;s time if I got the answer I was looking for. But if you think it would be good for others to work on it, I can wait. :)  Thank you!"}], "answers": [{"comments": [{"owner": {"reputation": 6433, "user_id": 5326603, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/3rFep.png?s=128&g=1", "display_name": "nbkhope", "link": "https://stackoverflow.com/users/5326603/nbkhope"}, "edited": false, "score": 0, "creation_date": 1516243934, "post_id": 48311069, "comment_id": 83612016, "body": "This answer does not provide an explanation. Please explain your answers."}], "tags": [], "owner": {"reputation": 1668, "user_id": 1576822, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/FY9gu.jpg?s=128&g=1", "display_name": "Sergio Belevskij", "link": "https://stackoverflow.com/users/1576822/sergio-belevskij"}, "is_accepted": false, "score": 0, "last_activity_date": 1516228242, "creation_date": 1516228242, "answer_id": 48311069, "question_id": 48310935, "link": "https://stackoverflow.com/questions/48310935/turning-one-array-into-two-hashes/48311069#48311069", "title": "Turning one array into two hashes", "body": "<pre><code>array = [[\"a\", \"b\", \"c\"], [\"d\", \"e\", \"f\"], [\"g\", \"h\", \"i\"]]\nhashes = {}\narray.each do |subarray|\n  subarray[1..-1].each_with_index do |item, index|\n    hashes[index] ||= {}\n    hashes[index][subarray.first] = item\n  end\nend\n\nputs hashes.values\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 9030, "user_id": 5101476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JCQrl.jpg?s=128&g=1", "display_name": "ice\u30c4", "link": "https://stackoverflow.com/users/5101476/ice%e3%83%84"}, "edited": false, "score": 2, "creation_date": 1516232341, "post_id": 48311095, "comment_id": 83609290, "body": "A bit of symmetry would be nice <code>hash1 = array.map { |f,m,_| [f,m] }.to_h</code>."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "reply_to_user": {"reputation": 9030, "user_id": 5101476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JCQrl.jpg?s=128&g=1", "display_name": "ice\u30c4", "link": "https://stackoverflow.com/users/5101476/ice%e3%83%84"}, "edited": false, "score": 0, "creation_date": 1516239666, "post_id": 48311095, "comment_id": 83611032, "body": "@Sagar, I agree. Made the change. Thanks."}], "tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": true, "score": 5, "last_activity_date": 1516239639, "last_edit_date": 1516239639, "creation_date": 1516228401, "answer_id": 48311095, "question_id": 48310935, "link": "https://stackoverflow.com/questions/48310935/turning-one-array-into-two-hashes/48311095#48311095", "title": "Turning one array into two hashes", "body": "<pre><code>array = [[\"a\", \"b\", \"c\"], [\"d\", \"e\", \"f\"], [\"g\", \"h\", \"i\"]]\n\nhash1 = array.map { |f,m,_| [f,m] }.to_h\n  #=&gt; {\"a\"=&gt;\"b\", \"d\"=&gt;\"e\", \"g\"=&gt;\"h\"}\nhash2 = array.map { |f,_,l| [f,l] }.to_h\n  #=&gt; {\"a\"=&gt;\"c\", \"d\"=&gt;\"f\", \"g\"=&gt;\"i\"}\n</code></pre>\n\n<p>or</p>\n\n<pre><code>def doit(arr, i1, i2)\n  arr.map { |a| [a[i1], a[i2]] }.to_h\nend\n\nhash1 = doit(array, 0, 1)\n  #=&gt; {\"a\"=&gt;\"b\", \"d\"=&gt;\"e\", \"g\"=&gt;\"h\"}\nhash2 = doit(array, 0, 2)\n  #=&gt; {\"a\"=&gt;\"c\", \"d\"=&gt;\"f\", \"g\"=&gt;\"i\"}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 9030, "user_id": 5101476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JCQrl.jpg?s=128&g=1", "display_name": "ice\u30c4", "link": "https://stackoverflow.com/users/5101476/ice%e3%83%84"}, "edited": false, "score": 1, "creation_date": 1516325543, "post_id": 48312217, "comment_id": 83651384, "body": "Use <code>k, *v = array.transpose</code> (non-destructive too)."}, {"owner": {"reputation": 24179, "user_id": 1672429, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/0815eb7d4e9dd58022d51ba2011b9c0a?s=128&d=identicon&r=PG", "display_name": "Stefan Pochmann", "link": "https://stackoverflow.com/users/1672429/stefan-pochmann"}, "reply_to_user": {"reputation": 9030, "user_id": 5101476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JCQrl.jpg?s=128&g=1", "display_name": "ice\u30c4", "link": "https://stackoverflow.com/users/5101476/ice%e3%83%84"}, "edited": false, "score": 0, "creation_date": 1516327941, "post_id": 48312217, "comment_id": 83651912, "body": "@SagarPandya Ah, right. I&#39;ve even used <code>transpose</code> before, but apparently forgot. I guess Python&#39;s <code>zip</code> is too ingrained in my brain."}], "tags": [], "owner": {"reputation": 24179, "user_id": 1672429, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/0815eb7d4e9dd58022d51ba2011b9c0a?s=128&d=identicon&r=PG", "display_name": "Stefan Pochmann", "link": "https://stackoverflow.com/users/1672429/stefan-pochmann"}, "is_accepted": false, "score": 1, "last_activity_date": 1516327532, "last_edit_date": 1516327532, "creation_date": 1516236288, "answer_id": 48312217, "question_id": 48310935, "link": "https://stackoverflow.com/questions/48310935/turning-one-array-into-two-hashes/48312217#48312217", "title": "Turning one array into two hashes", "body": "<p>Just two more ways, though the first one destructs your array in the process.</p>\n\n<p>Build <code>hash2</code> first by popping so <code>hash1</code> becomes trivial:</p>\n\n<pre><code>hash2 = array.map { |a| [a[0], a.pop] }.to_h\nhash1 = array.to_h\n</code></pre>\n\n<p>First separate key and values columns, then zip them back together:</p>\n\n<pre><code>k, *v = array.transpose\nhash1, hash2 = v.map { |v| k.zip(v).to_h }\n</code></pre>\n\n<p>(Thanks to Sagar Pandya for that, I had used <code>k, *v = array.shift.zip(*array)</code> before.)</p>\n"}, {"comments": [{"owner": {"reputation": 9030, "user_id": 5101476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JCQrl.jpg?s=128&g=1", "display_name": "ice\u30c4", "link": "https://stackoverflow.com/users/5101476/ice%e3%83%84"}, "edited": false, "score": 0, "creation_date": 1516466998, "post_id": 48317722, "comment_id": 83703995, "body": "Great answer. Just wondering whether it is reasonable to refer to the <code>each</code> method as a <i>loop</i>?"}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "reply_to_user": {"reputation": 9030, "user_id": 5101476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JCQrl.jpg?s=128&g=1", "display_name": "ice\u30c4", "link": "https://stackoverflow.com/users/5101476/ice%e3%83%84"}, "edited": false, "score": 1, "creation_date": 1516475836, "post_id": 48317722, "comment_id": 83706955, "body": "@SagarPandya if <code>array.each { ... }</code> is not a <i>loop</i>, then what is it?"}, {"owner": {"reputation": 9030, "user_id": 5101476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JCQrl.jpg?s=128&g=1", "display_name": "ice\u30c4", "link": "https://stackoverflow.com/users/5101476/ice%e3%83%84"}, "edited": false, "score": 1, "creation_date": 1516476735, "post_id": 48317722, "comment_id": 83707248, "body": "Good point. Wikipedia: <i>&quot;A loop is a sequence of statements which is specified once but which may be carried out several times in succession&quot;</i>. So of course <code>each</code> is that. Not sure why that confused me. Perhaps I&#39;m only use to referring to <code>while</code>, <code>for</code> and <code>until</code> etc as loops."}], "tags": [], "owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "is_accepted": false, "score": 3, "last_activity_date": 1516267409, "creation_date": 1516267409, "answer_id": 48317722, "question_id": 48310935, "link": "https://stackoverflow.com/questions/48310935/turning-one-array-into-two-hashes/48317722#48317722", "title": "Turning one array into two hashes", "body": "<p>A simple <code>each</code> loop would work:</p>\n\n<pre><code>array = [[\"a\", \"b\", \"c\"], [\"d\", \"e\", \"f\"], [\"g\", \"h\", \"i\"]]\n\nhash1 = {}\nhash2 = {}\n\narray.each do |k, v1, v2|\n  hash1[k] = v1\n  hash2[k] = v2\nend\n\nhash1 #=&gt; {\"a\"=&gt;\"b\", \"d\"=&gt;\"e\", \"g\"=&gt;\"h\"}\nhash2 #=&gt; {\"a\"=&gt;\"c\", \"d\"=&gt;\"f\", \"g\"=&gt;\"i\"}\n</code></pre>\n"}], "owner": {"reputation": 95, "user_id": 7685722, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/791cbf6af02ecfe051dd1a9b0c39fa7c?s=128&d=identicon&r=PG&f=1", "display_name": "C. Yee", "link": "https://stackoverflow.com/users/7685722/c-yee"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 95, "favorite_count": 0, "accepted_answer_id": 48311095, "answer_count": 4, "score": 0, "last_activity_date": 1516327532, "creation_date": 1516227487, "last_edit_date": 1516245780, "question_id": 48310935, "link": "https://stackoverflow.com/questions/48310935/turning-one-array-into-two-hashes", "title": "Turning one array into two hashes", "body": "<p>I want to split:</p>\n\n<pre><code>array = [[\"a\", \"b\", \"c\"], [\"d\", \"e\", \"f\"], [\"g\", \"h\", \"i\"]]\n</code></pre>\n\n<p>into two hashes like this:</p>\n\n<pre><code>hash1 = {\"a\" =&gt; \"b\", \"d\" =&gt; \"e\", \"g\" =&gt; \"h\"}\nhash2 = {\"a\" =&gt; \"c\", \"d\" =&gt; \"f\", \"g\" =&gt; \"i\"}\n</code></pre>\n\n<p>Is there a way to do this?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4"], "comments": [{"owner": {"reputation": 2946, "user_id": 1430057, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/Tbizp.jpg?s=128&g=1", "display_name": "Subash", "link": "https://stackoverflow.com/users/1430057/subash"}, "edited": false, "score": 0, "creation_date": 1516227227, "post_id": 48310616, "comment_id": 83607500, "body": "use <code>==</code> for comparison, you are using <code>=</code>"}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1516231460, "post_id": 48310616, "comment_id": 83609077, "body": "I have three general suggestions concerning the use of examples in questions. Firstly, make the example complete so that all inputs are valid Ruby objects.  For example, no &quot;......more data here.....&quot;. The reason is that you want to allow readers to run code that produces the desired result for your example. Secondly, you want to always give the desired result for you example. You&#39;ve done that. Thirdly, assign variables to all input objects so that readers can refer to those variables in answers and comments without having to define them. Here you might write <code>arr = [ { id: 1,...</code>."}], "answers": [{"comments": [{"owner": {"reputation": 4690, "user_id": 1937435, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/YyN37.jpg?s=128&g=1", "display_name": "Josh Brody", "link": "https://stackoverflow.com/users/1937435/josh-brody"}, "reply_to_user": {"reputation": 203, "user_id": 9226492, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/1101789162a8e10b23e10edb2f56fadd?s=128&d=identicon&r=PG&f=1", "display_name": "jose1221", "link": "https://stackoverflow.com/users/9226492/jose1221"}, "edited": false, "score": 0, "creation_date": 1516226439, "post_id": 48310649, "comment_id": 83607129, "body": "is this JSON? if it is <code>data.select {|e| e[&#39;id&#39;] == 1}</code>"}, {"owner": {"reputation": 4690, "user_id": 1937435, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/YyN37.jpg?s=128&g=1", "display_name": "Josh Brody", "link": "https://stackoverflow.com/users/1937435/josh-brody"}, "reply_to_user": {"reputation": 203, "user_id": 9226492, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/1101789162a8e10b23e10edb2f56fadd?s=128&d=identicon&r=PG&f=1", "display_name": "jose1221", "link": "https://stackoverflow.com/users/9226492/jose1221"}, "edited": false, "score": 0, "creation_date": 1516226498, "post_id": 48310649, "comment_id": 83607155, "body": "<a href=\"https://repl.it/repls/AstonishingNauticalBufflehead\" rel=\"nofollow noreferrer\">repl.it/repls/AstonishingNauticalBufflehead</a> returns as expected"}], "tags": [], "owner": {"reputation": 4690, "user_id": 1937435, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/YyN37.jpg?s=128&g=1", "display_name": "Josh Brody", "link": "https://stackoverflow.com/users/1937435/josh-brody"}, "is_accepted": true, "score": 4, "last_activity_date": 1516226521, "last_edit_date": 1516226521, "creation_date": 1516226142, "answer_id": 48310649, "question_id": 48310616, "link": "https://stackoverflow.com/questions/48310616/how-to-return-specific-set-of-data-from-from-array-of-hashes/48310649#48310649", "title": "how to return specific set of data from from array of hashes", "body": "<p><code>extracted_data = data.select {|e| e[:id] == 1}</code> </p>\n\n<p><code>==</code> for comparison</p>\n"}], "owner": {"reputation": 203, "user_id": 9226492, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/1101789162a8e10b23e10edb2f56fadd?s=128&d=identicon&r=PG&f=1", "display_name": "jose1221", "link": "https://stackoverflow.com/users/9226492/jose1221"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 39, "favorite_count": 0, "accepted_answer_id": 48310649, "answer_count": 1, "score": 0, "last_activity_date": 1516226521, "creation_date": 1516225982, "question_id": 48310616, "link": "https://stackoverflow.com/questions/48310616/how-to-return-specific-set-of-data-from-from-array-of-hashes", "title": "how to return specific set of data from from array of hashes", "body": "<p>I have following data contract available in constant variable <code>data</code></p>\n\n<pre><code>[\n{\n  id: 1,\n  name: \"class1\",\n  start_at: \"2017-08-15T10:00:00.000Z\",\n  end_at: \"2017-08-15T10:30:00.000Z\",\n},\n{\n  id: 2,\n  name: \"class2\",\n  start_at: \"2017-08-15T10:00:00.000Z\",\n  end_at: \"2017-08-15T10:30:00.000Z\",\n },\n ......more data here.....\n]\n</code></pre>\n\n<p>I want to return the specific set of data.\ne.g <code>data.select {|e| e[:id] = 1}</code> should return following but instead it returns all data.</p>\n\n<pre><code>[\n {\n  id: 1,\n  name: \"class1\",\n  start_at: \"2017-08-15T10:00:00.000Z\",\n  end_at: \"2017-08-15T10:30:00.000Z\",\n }\n]\n</code></pre>\n\n<p>Any idea what is wrong?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "rubygems", "authorization", "pundit"], "comments": [{"owner": {"reputation": 4690, "user_id": 1937435, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/YyN37.jpg?s=128&g=1", "display_name": "Josh Brody", "link": "https://stackoverflow.com/users/1937435/josh-brody"}, "edited": false, "score": 0, "creation_date": 1516226183, "post_id": 48310508, "comment_id": 83607011, "body": "Just anecdotal regarding a gem that has &quot;gone cold&quot;: sometimes, things become stable and feature-complete :)"}, {"owner": {"reputation": 2902, "user_id": 523051, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/497825ebbcb0e06c2451d3ff91d644b2?s=128&d=identicon&r=PG", "display_name": "chrickso", "link": "https://stackoverflow.com/users/523051/chrickso"}, "reply_to_user": {"reputation": 4690, "user_id": 1937435, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/YyN37.jpg?s=128&g=1", "display_name": "Josh Brody", "link": "https://stackoverflow.com/users/1937435/josh-brody"}, "edited": false, "score": 0, "creation_date": 1516226927, "post_id": 48310508, "comment_id": 83607341, "body": "with a couple dozen open issues though? it&#39;s nice to know that if an issue does pop up there is someone around to hopefully work through it."}, {"owner": {"reputation": 4690, "user_id": 1937435, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/YyN37.jpg?s=128&g=1", "display_name": "Josh Brody", "link": "https://stackoverflow.com/users/1937435/josh-brody"}, "edited": false, "score": 1, "creation_date": 1516227136, "post_id": 48310508, "comment_id": 83607450, "body": "Issues aren&#39;t always indicative of actual issues. Hell, rails/rails has 365 open &quot;issues&quot; right now."}, {"owner": {"reputation": 4690, "user_id": 1937435, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/YyN37.jpg?s=128&g=1", "display_name": "Josh Brody", "link": "https://stackoverflow.com/users/1937435/josh-brody"}, "edited": false, "score": 1, "creation_date": 1516227165, "post_id": 48310508, "comment_id": 83607466, "body": "it also doesn&#39;t prevent you from contributing your own code :)"}, {"owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "edited": false, "score": 0, "creation_date": 1516256533, "post_id": 48310508, "comment_id": 83615464, "body": "I am sorry but your question is unclear to me. Is your question about how to implement the parts in Pundit? Or do you want to know how to implement groups or a grant right feature (including models, controllers, etc)? If you already have groups and right grants in place then please show your code."}, {"owner": {"reputation": 2902, "user_id": 523051, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/497825ebbcb0e06c2451d3ff91d644b2?s=128&d=identicon&r=PG", "display_name": "chrickso", "link": "https://stackoverflow.com/users/523051/chrickso"}, "edited": false, "score": 0, "creation_date": 1516291175, "post_id": 48310508, "comment_id": 83636227, "body": "any documentation on pundit i have found is focused around verifying a single user is the owner of the post being viewed/updated. i&#39;m questioning what is the general workflow of granting permissions to a user or group that is not the original-poster. can pundit handle this on it&#39;s own or does it need additional gems/setup? there is surprisingly few resources to be found for how to implement a dynamic permissions system with rails."}], "answers": [{"tags": [], "owner": {"reputation": 1668, "user_id": 1576822, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/FY9gu.jpg?s=128&g=1", "display_name": "Sergio Belevskij", "link": "https://stackoverflow.com/users/1576822/sergio-belevskij"}, "is_accepted": false, "score": 0, "last_activity_date": 1516228498, "creation_date": 1516228498, "answer_id": 48311116, "question_id": 48310508, "link": "https://stackoverflow.com/questions/48310508/how-to-implement-a-group-team-permission-system-with-rails-5-and-pundit-or-other/48311116#48311116", "title": "How to implement a group/team permission system with Rails 5 and Pundit or other gem?", "body": "<p>use <a href=\"https://github.com/CanCanCommunity/cancancan\" rel=\"nofollow noreferrer\">cancancan</a> gem. This is the great solution for permission.</p>\n"}], "owner": {"reputation": 2902, "user_id": 523051, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/497825ebbcb0e06c2451d3ff91d644b2?s=128&d=identicon&r=PG", "display_name": "chrickso", "link": "https://stackoverflow.com/users/523051/chrickso"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 514, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1516228498, "creation_date": 1516225525, "question_id": 48310508, "link": "https://stackoverflow.com/questions/48310508/how-to-implement-a-group-team-permission-system-with-rails-5-and-pundit-or-other", "title": "How to implement a group/team permission system with Rails 5 and Pundit or other gem?", "body": "<p>From what I understand of Pundit so far, it is geared more toward allowing the current user to perform certain actions on certain controllers, but how is it possible to extend this to cover if the user is part of a team or group that that would allow them certain actions? Or for one user to allow another user certain actions on, say, a post they created?</p>\n\n<p>I like the idea of Pundit being \"plain old ruby object\" but I am open to working with another gem that may simplify how to do what I'm looking for. I have found a gem, Groupify (<a href=\"https://github.com/dwbutler/groupify\" rel=\"nofollow noreferrer\">https://github.com/dwbutler/groupify</a>), that seems to have gone cold for the past several months. I do have a requirement that anything I implement must be actively maintained so that one is disqualified. Does anything similar come to mind?</p>\n"}, {"tags": ["ruby", "shell", "makefile", "rvm"], "answers": [{"tags": [], "owner": {"reputation": 3273, "user_id": 5021963, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/t7Qsr.png?s=128&g=1", "display_name": "Ed de Almeida", "link": "https://stackoverflow.com/users/5021963/ed-de-almeida"}, "is_accepted": false, "score": 0, "last_activity_date": 1516230579, "creation_date": 1516230579, "answer_id": 48311464, "question_id": 48310275, "link": "https://stackoverflow.com/questions/48310275/make-shell-does-not-inherit-console-shell-environment-variables/48311464#48311464", "title": "Make shell does not inherit console shell environment variables", "body": "<p>First I added two lines to my <code>backend:</code> recipe, which now was reading</p>\n\n<pre><code>backend:\n    cd ./be &amp;&amp; \\\n    source $(HOME)/.rvm/scripts/rvm &amp;&amp; \\\n    rvm use jruby-9.1.7.0 &amp;&amp; \\\n    gem install bundler &amp;&amp; \\\n    bundle install\n</code></pre>\n\n<p>The idea was setting the correct Ruby (JRuby 9.1.7.0) without having to change it permanently at the console.</p>\n\n<p>It happened this wouldn't work, because I wasn't choosing the shell I was using and it seems for some reason it wasn't <code>/bin/bash</code> and <code>source</code> wouldn't work. As a sequel, <code>rvm</code> wouldn't work either and I would receive that irritating message saying</p>\n\n<blockquote>\n  <p>rvm is not a function</p>\n</blockquote>\n\n<p>Then I added</p>\n\n<pre><code>SHELL = /bin/bash\n</code></pre>\n\n<p>right after the <code>.ONESHELL:</code> directive.</p>\n\n<p>And now everything worked fine!</p>\n"}, {"tags": [], "owner": {"reputation": 4272, "user_id": 501266, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/iDtAx.jpg?s=128&g=1", "display_name": "Keith Bennett", "link": "https://stackoverflow.com/users/501266/keith-bennett"}, "is_accepted": true, "score": 1, "last_activity_date": 1516359179, "creation_date": 1516359179, "answer_id": 48339434, "question_id": 48310275, "link": "https://stackoverflow.com/questions/48310275/make-shell-does-not-inherit-console-shell-environment-variables/48339434#48339434", "title": "Make shell does not inherit console shell environment variables", "body": "<p>I believe there are 2 problems:</p>\n\n<p>1) when <code>rvm</code> creates its environment variables, it does not <code>export</code> them, so they are not visible to child shells, and</p>\n\n<p>2) because the child shell is not started as a login shell, it does not see and process the <code>rvm</code> function declarations, and can therefore not execute <code>rvm my-ruby-version</code>.</p>\n\n<p>Here are a couple of workarounds:</p>\n\n<p>Before creating the child shell, do something like this:</p>\n\n<pre><code>export RVM_VERSION=`rvm current`\n</code></pre>\n\n<p>When starting the child shell, do so in login mode:</p>\n\n<pre><code>zsh --login\n</code></pre>\n\n<p>or</p>\n\n<pre><code>bash --login\n</code></pre>\n\n<p>Then, rvm should be a function, and this should work:</p>\n\n<pre><code>rvm $RVM_VERSION\n</code></pre>\n"}], "owner": {"reputation": 3273, "user_id": 5021963, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/t7Qsr.png?s=128&g=1", "display_name": "Ed de Almeida", "link": "https://stackoverflow.com/users/5021963/ed-de-almeida"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 158, "favorite_count": 0, "accepted_answer_id": 48339434, "answer_count": 2, "score": 1, "last_activity_date": 1516359179, "creation_date": 1516224468, "last_edit_date": 1516229416, "question_id": 48310275, "link": "https://stackoverflow.com/questions/48310275/make-shell-does-not-inherit-console-shell-environment-variables", "title": "Make shell does not inherit console shell environment variables", "body": "<p>I am working on a Makefile to build an application where frontend and backend are completely separated in two different directories, like:</p>\n\n<pre><code>- myapp\n  |_be\n  |_fe\n</code></pre>\n\n<p>This is my Makefile:</p>\n\n<pre><code>.ONESHELL:\n\nall: frontend backend\n\nfrontend:\n    cd ./fe &amp;&amp; \\\n    npm install &amp;&amp; \\\n    ./node_modules/webpack/bin/webpack.js\n\nbackend: clean\n    cd ./be &amp;&amp; \\\n    gem install bundler &amp;&amp; \\\n    bundle install\n\nclean:\n    rm -f ./fe/public/bundle.js &amp;&amp; rm -rf ./fe/public/resources \n\nwebpack:\n    cd ./fe &amp;&amp; \\\n    .node_modules/webpack/bin/webpack.js\n\ntest:\n    cd ./fe &amp;&amp; \\\n    npm test\n\nrun:\n    cd ./be &amp;&amp; \\\n    rackup config.ru\n</code></pre>\n\n<p>The frontend is a React application and it is being built correctly when I type <code>make frontend</code>. No issues here.</p>\n\n<p>But the backend is a Rack application written in Ruby. During the build process I need to enter its directory (<code>be</code>), make sure bundler is installed and run <code>bundle install</code>.</p>\n\n<p>It happens that <code>make</code> creates its own shell to run the Makefile commands. And this shell does NOT inherit the environment variables of the console shell I am working. This turns out to be a problem to me, because I use <code>rvm</code> and <code>rvm</code> uses some environment variables to pick the correct gems. I use the <code>.ruby-gemset</code> and <code>.ruby-version</code> to create a private bundle to my application, not using the default gemset. This is necessary, because I have applications using many different Ruby versions and don't want to care about this.</p>\n\n<p>This particular application uses JRuby 9.1.7.0 and then my <code>Gemfile</code> (inside <code>be</code> directory) has the following line:</p>\n\n<pre><code>ruby '2.3.1', :engine =&gt; 'jruby', :engine_version =&gt; '9.1.7.0'\n</code></pre>\n\n<p>I noticed all this issue because I got the following error when I typed <code>make backend</code>:</p>\n\n<blockquote>\n  <p>Your Ruby engine is ruby, but your Gemfile specified jruby</p>\n</blockquote>\n\n<p>As far as I know <code>rvm</code> (and I know it quite well), this means it is trying to use my default Ruby version (which is set to Ruby 2.5.0) as engine, instead of the correct JRuby version.</p>\n\n<p>Now, here is my question: <strong>Is there a way to force the make inner shell to use the same configuration of the console shell I am using?</strong></p>\n\n<p>This would solve the issue, because the console shell is already configured by <code>rvm</code>. I know it is because when I enter the <code>be</code> directory manually and run <code>bundle install</code> inside it, everything goes fine.</p>\n\n<p>I used the <code>.ONESHELL</code> directive to force <code>make</code> to do this, but it seems it is not what I need.</p>\n\n<p>Suggestions?</p>\n\n<p><strong>EDIT:</strong> <code>make</code> <a href=\"https://www.gnu.org/software/make/manual/html_node/Environment.html#Environment\" rel=\"nofollow noreferrer\">documentation</a> says the <code>-e</code> flag may be used to force the <code>make</code> grab all console shell variables. I tried it and it didn't work.</p>\n\n<p><strong>EDIT:</strong> It all works if I do</p>\n\n<pre><code>rvm use --default jruby-9.1.7.0\n</code></pre>\n\n<p>before doing my <code>make backend</code>. But for many reasons it is not convenient to do this. Besides, I really believe this is a better way to do this. <code>make</code> is too smart not to allow something as simple as this.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "uri"], "comments": [{"owner": {"reputation": 628, "user_id": 4643970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AwK4h.jpg?s=128&g=1", "display_name": "Mahmoud Sayed", "link": "https://stackoverflow.com/users/4643970/mahmoud-sayed"}, "edited": false, "score": 0, "creation_date": 1516223161, "post_id": 48309824, "comment_id": 83605679, "body": "Try <code>rake db:drop db:setup</code>"}, {"owner": {"reputation": 1, "user_id": 8133910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b8aff800d5c6a160007b18efd1143810?s=128&d=identicon&r=PG", "display_name": "user8133910", "link": "https://stackoverflow.com/users/8133910/user8133910"}, "reply_to_user": {"reputation": 628, "user_id": 4643970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AwK4h.jpg?s=128&g=1", "display_name": "Mahmoud Sayed", "link": "https://stackoverflow.com/users/4643970/mahmoud-sayed"}, "edited": false, "score": 0, "creation_date": 1516223466, "post_id": 48309824, "comment_id": 83605833, "body": "No dice, I get the exact same error."}, {"owner": {"reputation": 2946, "user_id": 1430057, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/Tbizp.jpg?s=128&g=1", "display_name": "Subash", "link": "https://stackoverflow.com/users/1430057/subash"}, "edited": false, "score": 0, "creation_date": 1516228958, "post_id": 48309824, "comment_id": 83608192, "body": "Can you make sure if <code>rake db:drop</code> worked, can you see if that deleted the database <code>ground_game_dev</code> and try after that"}, {"owner": {"reputation": 1, "user_id": 8133910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b8aff800d5c6a160007b18efd1143810?s=128&d=identicon&r=PG", "display_name": "user8133910", "link": "https://stackoverflow.com/users/8133910/user8133910"}, "edited": false, "score": 0, "creation_date": 1516238627, "post_id": 48309824, "comment_id": 83610818, "body": "I used db:drop and checked with psql and found that I had deleted the ground_game_dev database. After doing this I found that running rake db:setup still returned the error  Event not sent due to excluded environment: development  rake aborted!  URI::InvalidURIError: bad URI(is not URI?):"}, {"owner": {"reputation": 1, "user_id": 8133910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b8aff800d5c6a160007b18efd1143810?s=128&d=identicon&r=PG", "display_name": "user8133910", "link": "https://stackoverflow.com/users/8133910/user8133910"}, "edited": false, "score": 0, "creation_date": 1516314200, "post_id": 48309824, "comment_id": 83648390, "body": "I found out that moving the .env.sample file to .env was able to fix this problem. I am not completely sure why though."}], "owner": {"reputation": 1, "user_id": 8133910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b8aff800d5c6a160007b18efd1143810?s=128&d=identicon&r=PG", "display_name": "user8133910", "link": "https://stackoverflow.com/users/8133910/user8133910"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 157, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1516222420, "creation_date": 1516222420, "question_id": 48309824, "link": "https://stackoverflow.com/questions/48309824/uri-error-running-rails-server", "title": "URI Error running rails server", "body": "<p>I am attempting to setup the rails server from the following github project:\n<a href=\"https://github.com/Bernie-2016/fieldthebern-api\" rel=\"nofollow noreferrer\">https://github.com/Bernie-2016/fieldthebern-api</a></p>\n\n<p>I know that people were recently able to pull this project and have the server up and running. However, when I attempt after bundle install when I type rake db:setup I obtain the following error:</p>\n\n<pre><code>ground_game_dev already exists\nD, [2018-01-17T15:49:44.313281 #7026] DEBUG -- : ** [Raven] Event not sent due to excluded environment: development\n</code></pre>\n\n<p><code>rake aborted!</code></p>\n\n<pre><code>URI::InvalidURIError: bad URI(is not URI?):\n</code></pre>\n\n<p>I was hoping for some insight into this, I can't figure out a solution</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "activerecord", "hash"], "comments": [{"owner": {"reputation": 18856, "user_id": 1359650, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/dffc4318ac93e728a26c8e8b51b4eb37?s=128&d=identicon&r=PG", "display_name": "jvillian", "link": "https://stackoverflow.com/users/1359650/jvillian"}, "edited": false, "score": 0, "creation_date": 1516220668, "post_id": 48309236, "comment_id": 83604419, "body": "How about turning your hash into an array and they sorting on that? The Googles provide a number of examples on how to do that (the second part, the first part is simple enough) including <a href=\"https://stackoverflow.com/questions/1680627/activerecord-findarray-of-ids-preserving-order/26868980#26868980\">here</a>."}, {"owner": {"reputation": 61438, "user_id": 63034, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/ZXKMO.jpg?s=128&g=1", "display_name": "mikej", "link": "https://stackoverflow.com/users/63034/mikej"}, "edited": false, "score": 1, "creation_date": 1516222161, "post_id": 48309236, "comment_id": 83605156, "body": "<a href=\"https://stackoverflow.com/a/48130387/63034\">this</a> should do the trick with a couple of minor modifications."}], "answers": [{"tags": [], "owner": {"reputation": 31, "user_id": 8617968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56696da10e3d35d8df56927d6f46aa97?s=128&d=identicon&r=PG&f=1", "display_name": "Faizal Zakaria", "link": "https://stackoverflow.com/users/8617968/faizal-zakaria"}, "is_accepted": false, "score": 0, "last_activity_date": 1516224559, "creation_date": 1516224559, "answer_id": 48310293, "question_id": 48309236, "link": "https://stackoverflow.com/questions/48309236/how-can-i-order-by-activerecord-query-results-by-a-corresponding-value-in-my-has/48310293#48310293", "title": "How can I order by ActiveRecord query results by a corresponding value in my hash?", "body": "<p>Your data structure to store the ranking/order could be improved. Something like,</p>\n\n<p><code>\n{ record_id =&gt; order }\n</code></p>\n\n<p>You can generate 1 by doing this</p>\n\n<p><code>\nsorted_hash = hash.sort { |a, b| a.first &lt;=&gt; b.first }.each_with_object({}) { |a, m| m[a.last] = a.first }\n</code></p>\n\n<p><code>ar_collection</code> is your ActiveRecord collection.</p>\n\n<p><code>\nar_collection.sort { |a, b| sorted_hash[a.id] &lt;=&gt; sorted_hash[b.id] }\n</code></p>\n\n<p>Your hash might be missing some data, ex. record id: 100, is not part of the hash.</p>\n\n<p>So you can avoid the exception as such:</p>\n\n<p><code>\nar_collection.sort { |a, b| sorted_hash[a.id] || 0 &lt;=&gt; sorted_hash[b.id] || 0 }\n</code></p>\n\n<p>The missing ranking, will be at the top.</p>\n"}, {"tags": [], "owner": {"reputation": 5645, "user_id": 394241, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/3053d95e25ab78a2c696b6e24c7dd8cf?s=128&d=identicon&r=PG", "display_name": "daveomcd", "link": "https://stackoverflow.com/users/394241/daveomcd"}, "is_accepted": false, "score": 0, "last_activity_date": 1516225354, "creation_date": 1516225354, "answer_id": 48310470, "question_id": 48309236, "link": "https://stackoverflow.com/questions/48309236/how-can-i-order-by-activerecord-query-results-by-a-corresponding-value-in-my-has/48310470#48310470", "title": "How can I order by ActiveRecord query results by a corresponding value in my hash?", "body": "<p>Based off of @jvillian's comment I ended up with a pretty simple solution that works.</p>\n\n<pre><code>record_ids = People.where(:position_id: 5).order(:last_name, :first_name).pluck(:id)\n# Pass ids to my Active Job, and then finally in the partial do the following ...\nPeople.where(id: record_ids).sort_by {|record| record_ids.index record.id }\n</code></pre>\n\n<p>Thanks!</p>\n"}, {"comments": [{"owner": {"reputation": 394580, "user_id": 479863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ArUCE.jpg?s=128&g=1", "display_name": "mu is too short", "link": "https://stackoverflow.com/users/479863/mu-is-too-short"}, "edited": false, "score": 0, "creation_date": 1516232138, "post_id": 48311150, "comment_id": 83609242, "body": "<a href=\"http://api.rubyonrails.org/classes/ActiveRecord/FinderMethods.html#method-i-find\" rel=\"nofollow noreferrer\">&quot;The returned records may not be in the same order as the ids you provide since database rows are unordered&quot;</a> so just a <code>find</code> call isn&#39;t enough to get the desired order."}, {"owner": {"reputation": 5480, "user_id": 1264360, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed97babb5c190f0eacce8cb27affe733?s=128&d=identicon&r=PG", "display_name": "Shawn C.", "link": "https://stackoverflow.com/users/1264360/shawn-c"}, "edited": false, "score": 0, "creation_date": 1516249603, "post_id": 48311150, "comment_id": 83613391, "body": "Thank you for this code snippet, which might provide some limited short-term help. A proper explanation would greatly improve its long-term value by showing why this is a good solution to the problem, and would make it more useful to future readers with other, similar questions. Please edit your answer to add some explanation, including the assumptions you&#39;ve made"}], "tags": [], "owner": {"reputation": 1668, "user_id": 1576822, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/FY9gu.jpg?s=128&g=1", "display_name": "Sergio Belevskij", "link": "https://stackoverflow.com/users/1576822/sergio-belevskij"}, "is_accepted": false, "score": 0, "last_activity_date": 1516228667, "creation_date": 1516228667, "answer_id": 48311150, "question_id": 48309236, "link": "https://stackoverflow.com/questions/48309236/how-can-i-order-by-activerecord-query-results-by-a-corresponding-value-in-my-has/48311150#48311150", "title": "How can I order by ActiveRecord query results by a corresponding value in my hash?", "body": "<pre><code>order_hash = { 1 =&gt; 10145, 2 =&gt; 11543, 3 =&gt; 50, 4 =&gt; 77534 }\nUser.find(order_hash.values)\n</code></pre>\n"}], "owner": {"reputation": 5645, "user_id": 394241, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/3053d95e25ab78a2c696b6e24c7dd8cf?s=128&d=identicon&r=PG", "display_name": "daveomcd", "link": "https://stackoverflow.com/users/394241/daveomcd"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 54, "favorite_count": 0, "closed_date": 1516232249, "answer_count": 3, "score": 1, "last_activity_date": 1516228667, "creation_date": 1516219875, "question_id": 48309236, "link": "https://stackoverflow.com/questions/48309236/how-can-i-order-by-activerecord-query-results-by-a-corresponding-value-in-my-has", "closed_reason": "Duplicate", "title": "How can I order by ActiveRecord query results by a corresponding value in my hash?", "body": "<p>I have two objects.</p>\n\n<ol>\n<li>ActiveRecord Collection</li>\n<li>Hash with a number, record id pair </li>\n</ol>\n\n<p><strong>Example Hash:</strong> <code>{ 1=&gt;10145, 2=&gt;11543, 3=&gt;50, 4=&gt; 77534 }</code></p>\n\n<p>So, I want to order my ActiveRecord query based on the key in my hash for the corresponding record id as it's value.  How can I go about doing this?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "postgresql"], "comments": [{"owner": {"reputation": 746, "user_id": 7028309, "user_type": "registered", "profile_image": "https://graph.facebook.com/1188395947872769/picture?type=large", "display_name": "Aakash Gupta", "link": "https://stackoverflow.com/users/7028309/aakash-gupta"}, "edited": false, "score": 0, "creation_date": 1516218838, "post_id": 48308750, "comment_id": 83603405, "body": "Have you created db? If not, use <code>rake db:create</code> and then migrate it."}, {"owner": {"reputation": 36, "user_id": 6724695, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8def7d4efe89fedeeb68ea518d7d156f?s=128&d=identicon&r=PG&f=1", "display_name": "Som Nath", "link": "https://stackoverflow.com/users/6724695/som-nath"}, "reply_to_user": {"reputation": 746, "user_id": 7028309, "user_type": "registered", "profile_image": "https://graph.facebook.com/1188395947872769/picture?type=large", "display_name": "Aakash Gupta", "link": "https://stackoverflow.com/users/7028309/aakash-gupta"}, "edited": false, "score": 0, "creation_date": 1516271477, "post_id": 48308750, "comment_id": 83623565, "body": "I have created the db. Problem is with migrations only."}, {"owner": {"reputation": 37141, "user_id": 5315974, "user_type": "registered", "accept_rate": 47, "profile_image": "https://i.stack.imgur.com/MNGHV.png?s=128&g=1", "display_name": "Vao Tsun", "link": "https://stackoverflow.com/users/5315974/vao-tsun"}, "edited": false, "score": 0, "creation_date": 1516359453, "post_id": 48308750, "comment_id": 83664128, "body": "<a href=\"https://stackoverflow.com/a/21276130/5315974\">stackoverflow.com/a/21276130/5315974</a>"}, {"owner": {"reputation": 36, "user_id": 6724695, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8def7d4efe89fedeeb68ea518d7d156f?s=128&d=identicon&r=PG&f=1", "display_name": "Som Nath", "link": "https://stackoverflow.com/users/6724695/som-nath"}, "reply_to_user": {"reputation": 37141, "user_id": 5315974, "user_type": "registered", "accept_rate": 47, "profile_image": "https://i.stack.imgur.com/MNGHV.png?s=128&g=1", "display_name": "Vao Tsun", "link": "https://stackoverflow.com/users/5315974/vao-tsun"}, "edited": false, "score": 0, "creation_date": 1516480223, "post_id": 48308750, "comment_id": 83708291, "body": "@VaoTsun mine is ruby project. can&#39;t update gem"}], "owner": {"reputation": 36, "user_id": 6724695, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8def7d4efe89fedeeb68ea518d7d156f?s=128&d=identicon&r=PG&f=1", "display_name": "Som Nath", "link": "https://stackoverflow.com/users/6724695/som-nath"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 106, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1516217951, "creation_date": 1516217951, "question_id": 48308750, "link": "https://stackoverflow.com/questions/48308750/db-migration-giving-psqlexception", "title": "DB migration giving PSQLexception", "body": "<p>I am trying to setup an existing ruby project. However, during rake db:migrate, its giving the following error:</p>\n\n<blockquote>\n  <p>StandardError: An error has occurred, this and all later migrations\n  canceled:</p>\n  \n  <p>ActiveRecord::JDBCError: org.postgresql.util.PSQLException: No results\n  were returned by the query.: INSERT INTO \"schema_migrations\"\n  (\"version\") VALUES ('20170426211531')</p>\n</blockquote>\n"}, {"tags": ["ruby", "oop"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user9903"}, "edited": false, "score": 0, "creation_date": 1516217991, "post_id": 48308685, "comment_id": 83602958, "body": "there is no casting from one type of object to another happening, Ruby is a message-passing language and as explained in the answer(s) below; you are passing the message <code>#+</code> to the object <code>var1.to_s</code> which is of the class String. When you pass a message, any methods defined in the instance (or class) will be invoked: <a href=\"http://rubylearning.com/blog/2010/11/03/do-you-understand-rubys-objects-messages-and-blocks/\" rel=\"nofollow noreferrer\">rubylearning.com/blog/2010/11/03/&hellip;</a>"}, {"owner": {"reputation": 9030, "user_id": 5101476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JCQrl.jpg?s=128&g=1", "display_name": "ice\u30c4", "link": "https://stackoverflow.com/users/5101476/ice%e3%83%84"}, "edited": false, "score": 0, "creation_date": 1516219002, "post_id": 48308685, "comment_id": 83603517, "body": "<code>puts var1 + var2.to_i</code> on the other hand..."}], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user9903"}, "edited": false, "score": 0, "creation_date": 1516217894, "post_id": 48308712, "comment_id": 83602896, "body": "you can check the class/type of the objects by doing <code>var1.to_s.class</code> and <code>2.class</code>"}, {"owner": {"reputation": 21, "user_id": 9231473, "user_type": "registered", "profile_image": "https://graph.facebook.com/10214873038400461/picture?type=large", "display_name": "Carlos Felipe Ramirez", "link": "https://stackoverflow.com/users/9231473/carlos-felipe-ramirez"}, "edited": false, "score": 0, "creation_date": 1516218876, "post_id": 48308712, "comment_id": 83603428, "body": "Now I get it, feel like a massive dummy. Thanks @sepp2k!"}], "tags": [], "owner": {"reputation": 339851, "user_id": 149392, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a561ec0875fcbbe3066ea8fe288ec77?s=128&d=identicon&r=PG", "display_name": "sepp2k", "link": "https://stackoverflow.com/users/149392/sepp2k"}, "is_accepted": true, "score": 6, "last_activity_date": 1516217821, "creation_date": 1516217821, "answer_id": 48308712, "question_id": 48308685, "link": "https://stackoverflow.com/questions/48308685/adding-numerical-strings/48308712#48308712", "title": "Adding numerical strings", "body": "<p><code>'2' + '5'</code> is <code>'25'</code> because <code>String#+</code> concatenates two strings.</p>\n\n<p>If you want to perform arithmetic, both operands need to be numbers, not strings.</p>\n"}, {"tags": [], "owner": {"reputation": 41846, "user_id": 926143, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/3396173c3d22988be1a0732d184902aa?s=128&d=identicon&r=PG", "display_name": "7stud", "link": "https://stackoverflow.com/users/926143/7stud"}, "is_accepted": false, "score": 0, "last_activity_date": 1516220632, "last_edit_date": 1516220632, "creation_date": 1516219707, "answer_id": 48309204, "question_id": 48308685, "link": "https://stackoverflow.com/questions/48308685/adding-numerical-strings/48309204#48309204", "title": "Adding numerical strings", "body": "<p>In ruby, the code</p>\n\n<pre><code>x = '2' + '5'\n</code></pre>\n\n<p>is equivalent to:</p>\n\n<pre><code>x = '2'.+('5')\n</code></pre>\n\n<p>Try it--you can actually write that in your program.  That second syntax may look really strange, but it fits the format:</p>\n\n<pre><code>x = someObject.someMethodName(someArgument)\n</code></pre>\n\n<p>where:</p>\n\n<pre><code>someObject     =&gt; '2'  (a String)\nsomeMethodName =&gt; +\nsomeArgument   =&gt; '5' (a String)  \n</code></pre>\n\n<p>Yep, <code>+</code> is actually the name of a method in the <a href=\"https://ruby-doc.org/core-2.4.0/String.html\" rel=\"nofollow noreferrer\">String class</a>.  So, you can check the String class for how the method named <code>+</code> works.</p>\n\n<p>The syntax:</p>\n\n<pre><code>x = '2' + '5'\n</code></pre>\n\n<p>is known as <em>syntactic sugar</em> for the normal method syntax:</p>\n\n<pre><code>x = '2'.+('5')\n</code></pre>\n\n<p>And, because you cam omit the parentheses you could also write:</p>\n\n<pre><code>x = '2'.+ '5'\n</code></pre>\n\n<p>And if you don't like the result that the method named <code>+</code> in the String class produces, you can change it:</p>\n\n<pre><code>class String\n  def +(other)\n    return self.to_i + other.to_i\n  end\nend\n\nputs '2' + '5'\n\n--output:--\n7\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 12200, "user_id": 473040, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/c2713a4959692f16d27d2553fb06cc4b?s=128&d=identicon&r=PG", "display_name": "equivalent8", "link": "https://stackoverflow.com/users/473040/equivalent8"}, "is_accepted": false, "score": 0, "last_activity_date": 1516222367, "last_edit_date": 1516222367, "creation_date": 1516221058, "answer_id": 48309494, "question_id": 48308685, "link": "https://stackoverflow.com/questions/48308685/adding-numerical-strings/48309494#48309494", "title": "Adding numerical strings", "body": "<p>Let's have some fun</p>\n\n<pre><code>2 + 5 = 7 \n2.class = Integer\n5.class = Integer \n\n'2' + '5' = '25'\n'2'.class = String\n'5'.class = String\n</code></pre>\n\n<p>so Integer <code>+</code> is numeric plus</p>\n\n<p>and String <code>+</code> is concatenate  equivalent</p>\n\n<p>... but why ? </p>\n\n<p>Where thing you need to understand is that Integer in Ruby is an object and String is an object too. All objects (in any OOP lang) has methods you can call on them:</p>\n\n<pre><code> 2.public_methods\n =&gt; [:%, :&amp;, :*, :+, :-, :/, :&lt;, :&gt;, :^, :|, :~, :-@, :**, :&lt;=&gt;, :&lt;&lt;, :&gt;&gt;, :&lt;=, :&gt;=, :==, :===, :[], :inspect, :size, :succ, :to_int, :to_s, :to_i, :to_f, :next, :div, :upto,  ....and the list goes on\n\n'2'.public_methods\n =&gt; [:include?, :%, :*, :+, :to_c, :count, :unicode_normalize, :unicode_normalize!, :unicode_normalized?, :partition, :unpack, :unpack1, :sum, :next,  ...and the list goes on\n</code></pre>\n\n<p>So in reality when you do:</p>\n\n<pre><code>2 + 5\n'2' + '5' \n</code></pre>\n\n<p>you are actually calling a method <code>.+</code></p>\n\n<pre><code>2.+(5)\n'2'.+('5')\n</code></pre>\n\n<p>but in reallity calling a method in OOP languages is actually \"sending\" a message to an object:</p>\n\n<pre><code>2.send(:+, 5)\n'2'.send(:+, '5')\n</code></pre>\n\n<p>Anyway, </p>\n\n<p>one thing you need to realize is that if you are mixing different Objects together like:</p>\n\n<pre><code>'2' + 5\n# =&gt; TypeError: no implicit conversion of Integer into String\n\n2 + '5'\n# =&gt; TypeError: String can't be coerced into Integer\n</code></pre>\n\n<p>Ruby will protect you by raising an error. Just in case you or your colegue are doing something stupid in your code</p>\n\n<p>But nothing prevents you from transfering  one object type to another object type</p>\n\n<pre><code>'2'.to_i + 5 \n #=&gt; 7\n\n 2 + '5'.to_i\n # =&gt; 7\n\n '2' + 5.to_s\n # =&gt; '25'\n</code></pre>\n\n<p>Another fun part of fully OOP languages (like Ruby) is you can create your own objects with <code>+</code> method</p>\n\n<pre><code>class SafePlus\n  def initialize(first_value)\n    @first_value = first_value\n  end\n\n  def +(other_value) \n    @first_value.to_i + other_value.to_i\n  end\nend\n\nSafePlus.new(2) + '5'\n# =&gt; 7\n\nSafePlus.new(\"5\") + \"107\"\n# =&gt; 112\n</code></pre>\n\n<p>You can also override the original implementation of String class or Integer class so all corresponding objects will behave this way: </p>\n\n<pre><code>module MyIntegerFix\n  def +(other)\n    super(other.to_i)\n  end\nend\nInteger.prepend(MyIntegerFix)\n\n2 + \"5\" \n# =&gt; 7\n</code></pre>\n\n<blockquote>\n  <p>But for love of God don't do that !   </p>\n</blockquote>\n\n<p>And to fully confuse you, here is a mind blowing scenario is which you can actually overide single object</p>\n\n<pre><code> a = \"5\"\n a + \"2\"\n # =&gt; \"52\"\n\n def a.+(other)\n   self.to_i + other.to_i\n end\n\n a + \"2\"\n # =&gt; 7\n\n #but \n\n \"5\" + \"2\"\n # =&gt; \"52\"\n</code></pre>\n\n<p>so in this case we are just overiding one single object, the <code>a</code> object not entire class of String.</p>\n\n<blockquote>\n  <p>you will not be able to override  Integer objects this way because they are <code>Singletons</code> ...something that cannot be overwritten on single object base </p>\n</blockquote>\n"}], "owner": {"reputation": 21, "user_id": 9231473, "user_type": "registered", "profile_image": "https://graph.facebook.com/10214873038400461/picture?type=large", "display_name": "Carlos Felipe Ramirez", "link": "https://stackoverflow.com/users/9231473/carlos-felipe-ramirez"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 65, "favorite_count": 0, "accepted_answer_id": 48308712, "answer_count": 3, "score": 0, "last_activity_date": 1516246144, "creation_date": 1516217689, "last_edit_date": 1516246144, "question_id": 48308685, "link": "https://stackoverflow.com/questions/48308685/adding-numerical-strings", "title": "Adding numerical strings", "body": "<p>This bit of code: </p>\n\n<pre><code>var1 = 2\nvar2 = '5'    \nputs var1.to_s + var2\n</code></pre>\n\n<p>prints <code>25</code>. I would like to know why. We convert <code>2</code> from an integer to a string <code>2</code>, so in principle, it would be <code>2 + 5 = 7</code>. But why is the output <code>25</code> instead?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "inheritance", "view", "ruby-on-rails-5"], "comments": [{"owner": {"reputation": 8645, "user_id": 368167, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c9596f533dcd61ecf75f150b0d9997b3?s=128&d=identicon&r=PG", "display_name": "Tamer Shlash", "link": "https://stackoverflow.com/users/368167/tamer-shlash"}, "edited": false, "score": 0, "creation_date": 1516218955, "post_id": 48308094, "comment_id": 83603478, "body": "It&#39;s better if you post the error message as text instead of a screenshot."}], "answers": [{"comments": [{"owner": {"reputation": 50, "user_id": 8460005, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c2e9fa649f75667aed67947eeb0025d7?s=128&d=identicon&r=PG&f=1", "display_name": "T.Koomen", "link": "https://stackoverflow.com/users/8460005/t-koomen"}, "edited": false, "score": 0, "creation_date": 1516222045, "post_id": 48309096, "comment_id": 83605104, "body": "Just to clarify, I&#39;m not having a problem with passing the parameters to the parent, but I&#39;m having a problem getting the parent to render the views. I have a ton of these &quot;CountryNameBlogPostControllers&quot; so I want to write as little code as possible. The way I am passing the parameters from the child to the parent is working as I want it to."}, {"owner": {"reputation": 8645, "user_id": 368167, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c9596f533dcd61ecf75f150b0d9997b3?s=128&d=identicon&r=PG", "display_name": "Tamer Shlash", "link": "https://stackoverflow.com/users/368167/tamer-shlash"}, "reply_to_user": {"reputation": 50, "user_id": 8460005, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c2e9fa649f75667aed67947eeb0025d7?s=128&d=identicon&r=PG&f=1", "display_name": "T.Koomen", "link": "https://stackoverflow.com/users/8460005/t-koomen"}, "edited": false, "score": 0, "creation_date": 1516222246, "post_id": 48309096, "comment_id": 83605208, "body": "If it doesn&#39;t throw an error that doesn&#39;t necessarily mean it&#39;s working properly. Are you sure it is working? did you try to <code>puts country</code> in the parent controller to see if it actually has a value?"}, {"owner": {"reputation": 50, "user_id": 8460005, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c2e9fa649f75667aed67947eeb0025d7?s=128&d=identicon&r=PG&f=1", "display_name": "T.Koomen", "link": "https://stackoverflow.com/users/8460005/t-koomen"}, "edited": false, "score": 0, "creation_date": 1516222629, "post_id": 48309096, "comment_id": 83605414, "body": "That worked! You were right about the named parameter. Thanks for the help!"}], "tags": [], "owner": {"reputation": 8645, "user_id": 368167, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c9596f533dcd61ecf75f150b0d9997b3?s=128&d=identicon&r=PG", "display_name": "Tamer Shlash", "link": "https://stackoverflow.com/users/368167/tamer-shlash"}, "is_accepted": true, "score": 0, "last_activity_date": 1516219276, "creation_date": 1516219276, "answer_id": 48309096, "question_id": 48308094, "link": "https://stackoverflow.com/questions/48308094/how-to-render-view-in-parent-controller/48309096#48309096", "title": "How to render view in parent controller", "body": "<p>Your parent controller methods accept a normal parameter, not <a href=\"https://stackoverflow.com/q/15062570/368167\">named parameter</a>.</p>\n\n<p>Instead of:</p>\n\n<pre><code>super(country: 'AUSTRALIA')\n</code></pre>\n\n<p>You need</p>\n\n<pre><code>super('AUSTRALIA')\n</code></pre>\n\n<p>But I must say, the entire logic of your controllers doesn't make a lot of sense.</p>\n"}], "owner": {"reputation": 50, "user_id": 8460005, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c2e9fa649f75667aed67947eeb0025d7?s=128&d=identicon&r=PG&f=1", "display_name": "T.Koomen", "link": "https://stackoverflow.com/users/8460005/t-koomen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 160, "favorite_count": 0, "accepted_answer_id": 48309096, "answer_count": 1, "score": 0, "last_activity_date": 1516219276, "creation_date": 1516215235, "last_edit_date": 1516218925, "question_id": 48308094, "link": "https://stackoverflow.com/questions/48308094/how-to-render-view-in-parent-controller", "title": "How to render view in parent controller", "body": "<p>I want to pass down values from a parent controller, to the views of the child, or ideally, render the view directly from the parent controller.</p>\n\n<p>Here is my parent controller:</p>\n\n<pre><code>class SuperBlogPostsController &lt; ApplicationController\n\n\ndef index(country)\n    if country == \"AUSTRALIA\"\n      @posts = AustraliaBlogPost.all\n    hash = { posts: @posts, featured_post: AustraliaBlogPost.find_by(featured_post: true) }\n    respond_to do |format|\n        format.html {render 'super_blog_post/index'}\n        format.json {render json: hash}\n    end\nend\nend\n\ndef show(country)\n    if country == \"AUSTRALIA\"\n        @post = AustraliaBlogPost.find(params[:id])\n        respond_to do |format|\n            format.html {render 'super_blog_post/show'}\n        format.json {render json: @post}\n    end\nend\n</code></pre>\n\n<p>end</p>\n\n<p>And here is my child:</p>\n\n<pre><code>class AustraliaBlogPostsController &lt; SuperBlogPostsController\n\n  def index\n    super(country: 'AUSTRALIA')\n  end\n\n  def show\n    super(country: 'AUSTRALIA')\n  end\nend\n</code></pre>\n\n<p>This is the error that I get, even when I append .json at the end of the url:</p>\n\n<p><img src=\"https://i.stack.imgur.com/a1VXt.png\" alt=\"Error Message\"></p>\n\n<p>Is it possible to do the rendering of the view in the parent, or at least pass down the return values of the variables generated by the parent to the  child? If I've been unclear at all, let me know!</p>\n\n<p>Thanks!</p>\n"}, {"tags": ["sql", "ruby-on-rails", "ruby", "performance"], "comments": [{"owner": {"reputation": 16229, "user_id": 525478, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/3b6c0b47a0c430a0b141baee7ea845be?s=128&d=identicon&r=PG", "display_name": "Brad Werth", "link": "https://stackoverflow.com/users/525478/brad-werth"}, "edited": false, "score": 1, "creation_date": 1516213496, "post_id": 48307542, "comment_id": 83600631, "body": "Well, it takes more time to get everything and do something to them, than to just get everything... You might have to be more specific in your example, to get good feedback, though (for example, your example could be improved by using pluck instead of map, maybe there is a similar optimization for your actual problem). FWIW, what version of ruby are you running, and how many records does that query return? I&#39;m not seeing nearly as appreciable of a delay added by map using a similar example..."}, {"owner": {"reputation": 41, "user_id": 6366361, "user_type": "registered", "accept_rate": 75, "profile_image": "https://graph.facebook.com/1133631680022291/picture?type=large", "display_name": "lululala", "link": "https://stackoverflow.com/users/6366361/lululala"}, "reply_to_user": {"reputation": 16229, "user_id": 525478, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/3b6c0b47a0c430a0b141baee7ea845be?s=128&d=identicon&r=PG", "display_name": "Brad Werth", "link": "https://stackoverflow.com/users/525478/brad-werth"}, "edited": false, "score": 0, "creation_date": 1516244668, "post_id": 48307542, "comment_id": 83612188, "body": "@BradWerth thanks your replied. I put more specific function and data size here, hope useful."}], "answers": [{"comments": [{"owner": {"reputation": 41, "user_id": 6366361, "user_type": "registered", "accept_rate": 75, "profile_image": "https://graph.facebook.com/1133631680022291/picture?type=large", "display_name": "lululala", "link": "https://stackoverflow.com/users/6366361/lululala"}, "edited": false, "score": 0, "creation_date": 1516242324, "post_id": 48311229, "comment_id": 83611649, "body": "I need to use map here because i will do a series function in map block, just for example so i do map(&amp;:id) here."}], "tags": [], "owner": {"reputation": 1668, "user_id": 1576822, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/FY9gu.jpg?s=128&g=1", "display_name": "Sergio Belevskij", "link": "https://stackoverflow.com/users/1576822/sergio-belevskij"}, "is_accepted": false, "score": -1, "last_activity_date": 1516229153, "creation_date": 1516229153, "answer_id": 48311229, "question_id": 48307542, "link": "https://stackoverflow.com/questions/48307542/rails5-1-1-includes-map-function-will-extremely-slow-about-15-seconds/48311229#48311229", "title": "Rails5.1.1 includes + map function will extremely slow about 15 seconds", "body": "<p>use <code>.pluck(:id)</code> instead <code>.map(&amp;:id)</code>\nthis is will be faster.</p>\n"}], "owner": {"reputation": 41, "user_id": 6366361, "user_type": "registered", "accept_rate": 75, "profile_image": "https://graph.facebook.com/1133631680022291/picture?type=large", "display_name": "lululala", "link": "https://stackoverflow.com/users/6366361/lululala"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 36, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1516244555, "creation_date": 1516213092, "last_edit_date": 1516244555, "question_id": 48307542, "link": "https://stackoverflow.com/questions/48307542/rails5-1-1-includes-map-function-will-extremely-slow-about-15-seconds", "title": "Rails5.1.1 includes + map function will extremely slow about 15 seconds", "body": "<p>If user model includes multi tables and use map, its will really slow!!\nIts could be about 11s~20s.</p>\n\n<p>In console i watched the log print, its always slow when sql includes and after printed out sql query log finished its will go function very fast.</p>\n\n<p>This function only do for data export to excel, so seldom to use lead to i don't want to use counter cache in this situation.  </p>\n\n<pre><code>Benchmark.bm do |x| \n   x.report { \n     User.includes(:active_goal, :notification_setting, :reviews, \n     :comments, :answers, :quiz_answers).map(&amp;:id) do |user|\n        [\n          user.active_goal.try(:name),\n          user.notification_setting&amp;.is_need_notify || false,\n          user.reviews.size,\n          user.comments.size,\n          assignment_reviews(user.answers),\n          right_ratio(user.quiz_answers)\n        ]\n      end\n   }\n\n   x.report { \n     User.includes(:active_goal, :notification_setting, :reviews, \n     :comments, :answers, :quiz_answers) \n    }\nend\n\nBenchmark::Tms: @real=14.244344999955501, @stime=0.45999999999999996, @total=13.05, @utime=12.59\nBenchmark::Tms: @real=0.00010500004282221198, @stime=0.0, @total=0.0, @utime=0.0\n\n@users.size = 887\nQuizAnswer.all.size = 71386   \nGoal.all.size = 1519    \nNotificationSetting.all.size = 928    \nReview.all.size = 10\nComment.all.size = 6664\nAnswer.all.size = 98\n\nRuby 2.4.1p111\n</code></pre>\n\n<p>By the way, these table i already did id index on.</p>\n\n<p>Still don't know what problems it is.</p>\n\n<p>Can someone help me please or share how can i speed up?  </p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-5", "yarnpkg"], "answers": [{"comments": [{"owner": {"reputation": 687, "user_id": 1056493, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/89c8e9dd38e9173b160155abb86a7d59?s=128&d=identicon&r=PG", "display_name": "andreapavan", "link": "https://stackoverflow.com/users/1056493/andreapavan"}, "edited": false, "score": 0, "creation_date": 1516358071, "post_id": 48337763, "comment_id": 83663264, "body": "Nope, I tried to install with nom and set yarn as globally (-g) but the result is my last snippet code."}, {"owner": {"reputation": 199, "user_id": 6670519, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/t7r9T.jpg?s=128&g=1", "display_name": "Dapeng114", "link": "https://stackoverflow.com/users/6670519/dapeng114"}, "reply_to_user": {"reputation": 687, "user_id": 1056493, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/89c8e9dd38e9173b160155abb86a7d59?s=128&d=identicon&r=PG", "display_name": "andreapavan", "link": "https://stackoverflow.com/users/1056493/andreapavan"}, "edited": false, "score": 0, "creation_date": 1516358860, "post_id": 48337763, "comment_id": 83663773, "body": "could you run  <code>npm -v</code>  <code>yarn -v</code>  and  <code>yarn</code> ?"}, {"owner": {"reputation": 687, "user_id": 1056493, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/89c8e9dd38e9173b160155abb86a7d59?s=128&d=identicon&r=PG", "display_name": "andreapavan", "link": "https://stackoverflow.com/users/1056493/andreapavan"}, "edited": false, "score": 0, "creation_date": 1516360267, "post_id": 48337763, "comment_id": 83664607, "body": "<code>npm -v: 5.6.0</code> <code>node -v: 9.4.0</code> <code>yarn -v: 1.3.2</code>"}, {"owner": {"reputation": 199, "user_id": 6670519, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/t7r9T.jpg?s=128&g=1", "display_name": "Dapeng114", "link": "https://stackoverflow.com/users/6670519/dapeng114"}, "reply_to_user": {"reputation": 687, "user_id": 1056493, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/89c8e9dd38e9173b160155abb86a7d59?s=128&d=identicon&r=PG", "display_name": "andreapavan", "link": "https://stackoverflow.com/users/1056493/andreapavan"}, "edited": false, "score": 0, "creation_date": 1516419553, "post_id": 48337763, "comment_id": 83691469, "body": "@andreapavan honestly, I faced this problem yesterday, right before you post this Q. And after 2 hours, do everything, it worked.  - cd to /home/../myfolder/  - run yarn  - cd out, and cd back to /home/../myfolder  - run <code>npm install yarn -g</code> again"}], "tags": [], "owner": {"reputation": 199, "user_id": 6670519, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/t7r9T.jpg?s=128&g=1", "display_name": "Dapeng114", "link": "https://stackoverflow.com/users/6670519/dapeng114"}, "is_accepted": false, "score": 0, "last_activity_date": 1516353779, "creation_date": 1516353779, "answer_id": 48337763, "question_id": 48307401, "link": "https://stackoverflow.com/questions/48307401/rails-5-production-assets-precompile-error/48337763#48337763", "title": "Rails 5 production assets precompile error", "body": "<p>As i see, Yarn is a package. Please install that package via npm (on your production server):</p>\n\n<p><code>npm install yarn -g</code></p>\n\n<p>Hope this helps. </p>\n"}], "owner": {"reputation": 687, "user_id": 1056493, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/89c8e9dd38e9173b160155abb86a7d59?s=128&d=identicon&r=PG", "display_name": "andreapavan", "link": "https://stackoverflow.com/users/1056493/andreapavan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1339, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1522844051, "creation_date": 1516212563, "last_edit_date": 1522844051, "question_id": 48307401, "link": "https://stackoverflow.com/questions/48307401/rails-5-production-assets-precompile-error", "title": "Rails 5 production assets precompile error", "body": "<p>I'm working on Ubuntu 16.04 LTS server for deploying multiple RoR apps.<br>\nI'm using an Amazon EC2 machine with a Nginx webserver managing multiple RoR app on different domains. Some products are in development environment for testing and others in production environment.</p>\n\n<p>I decided to update a site installing a HTTP certificate with certbot.\nI followed the instructions below and everything was fine.</p>\n\n<p><a href=\"https://certbot.eff.org/#ubuntuxenial-nginx\" rel=\"nofollow noreferrer\">https://certbot.eff.org/#ubuntuxenial-nginx</a></p>\n\n<p>After updating the production assets with:</p>\n\n<pre><code>`RAILS_ENV=production rake assets:precompile`\n</code></pre>\n\n<p>I have the following message instead of the list of assets files generated\nInstalling certbot I broke some dependencies for assets compiling flow?</p>\n\n<pre><code>`Yarn executable was not detected in the system.\nDownload Yarn at https://yarnpkg.com/en/docs/install`\n</code></pre>\n\n<p>I tried to install yarn with <code>npm</code> globally but after I have:</p>\n\n<pre><code>`yarn install v1.3.2\ninfo No lockfile found.\n[1/4] Resolving packages...\n[2/4] Fetching packages...\n[3/4] Linking dependencies...\n[4/4] Building fresh packages...\ninfo Lockfile not saved, no dependencies.\nDone in 0.09s.`\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby"], "answers": [{"comments": [{"owner": {"reputation": 24179, "user_id": 1672429, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/0815eb7d4e9dd58022d51ba2011b9c0a?s=128&d=identicon&r=PG", "display_name": "Stefan Pochmann", "link": "https://stackoverflow.com/users/1672429/stefan-pochmann"}, "edited": false, "score": 0, "creation_date": 1516215193, "post_id": 48307283, "comment_id": 83601480, "body": "How about <code>e[-3, 3]</code> or <code>e[-3..-1]</code>?"}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1516215472, "post_id": 48307283, "comment_id": 83601652, "body": "Disregard please."}], "tags": [], "owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "is_accepted": true, "score": 3, "last_activity_date": 1516215997, "last_edit_date": 1516215997, "creation_date": 1516212006, "answer_id": 48307283, "question_id": 48307076, "link": "https://stackoverflow.com/questions/48307076/get-unique-occurancies-from-array-by-last-3-letters/48307283#48307283", "title": "Get unique occurancies from array by last 3 letters", "body": "<pre><code>array.\n  flat_map(&amp;:values).\n  group_by { |e| e[/.{3}\\z/] }. # or e[-3..-1], see comments\n  map { |_, v| v.first }\n#\u21d2 [\"R01L01\", \"R02ZZZ\", \"D22DAR\"]\n</code></pre>\n"}], "owner": {"reputation": 117, "user_id": 2731970, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/cbc6c538d4c80602b9ac40e3e79e71dc?s=128&d=identicon&r=PG&f=1", "display_name": "Dawid PR", "link": "https://stackoverflow.com/users/2731970/dawid-pr"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 34, "favorite_count": 0, "accepted_answer_id": 48307283, "answer_count": 1, "score": 1, "last_activity_date": 1516215997, "creation_date": 1516211224, "question_id": 48307076, "link": "https://stackoverflow.com/questions/48307076/get-unique-occurancies-from-array-by-last-3-letters", "title": "Get unique occurancies from array by last 3 letters", "body": "<p>Is there some efficient way to get all occurancies of field value in array of hashes with same three last letters ?</p>\n\n<p>I have an array like this:</p>\n\n<pre><code>array = [\n    {\n        :code =&gt; 'R01L01'\n    },\n    {\n        :code =&gt; 'R02ZZZ'\n    },\n    {\n        :code =&gt; 'A03ZZZ'\n    },\n    {\n        :code =&gt; 'A04L01'\n    },\n    {\n        :code =&gt; 'D11ZZZ'\n    },\n    {\n        :code =&gt; 'D22DAR'\n    },\n]\n</code></pre>\n\n<p>In response i want to have R01L01, R02ZZZ, D22DAR so i will have unique codes by last three letters.</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1516246761, "post_id": 48306335, "comment_id": 83612672, "body": "<code>c</code> is <code>&quot;SMTHLKKK&quot;</code>, and that has never changed after the assignment in your code. Hence, <code>c</code> <b>always</b> exists. Your issue does not seem to make sense."}, {"owner": {"reputation": 101, "user_id": 7042299, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/56fa5a578544bc3c8f9053e1e1169023?s=128&d=identicon&r=PG&f=1", "display_name": "grenfunday", "link": "https://stackoverflow.com/users/7042299/grenfunday"}, "reply_to_user": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1516264190, "post_id": 48306335, "comment_id": 83618946, "body": "It&#39;s just an example. In real code in some cases c doesn&#39;t exist"}], "answers": [{"comments": [{"owner": {"reputation": 101, "user_id": 7042299, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/56fa5a578544bc3c8f9053e1e1169023?s=128&d=identicon&r=PG&f=1", "display_name": "grenfunday", "link": "https://stackoverflow.com/users/7042299/grenfunday"}, "edited": false, "score": 0, "creation_date": 1517768426, "post_id": 48306583, "comment_id": 84219389, "body": "Thx a lot) But my purpose was not in writing good code but to write code with several checks in one ( or two) lines. I know that it&#39;s wrong and etc, but very interesting for me."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "reply_to_user": {"reputation": 101, "user_id": 7042299, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/56fa5a578544bc3c8f9053e1e1169023?s=128&d=identicon&r=PG&f=1", "display_name": "grenfunday", "link": "https://stackoverflow.com/users/7042299/grenfunday"}, "edited": false, "score": 0, "creation_date": 1517788290, "post_id": 48306583, "comment_id": 84225251, "body": "@grenfunday Don&#39;t forget clarity trumps brevity. Your clever one-liner solutions might seem interesting today but if two years from now you need to fix one of them you might be cursing about your old habits."}], "tags": [], "owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "is_accepted": false, "score": 2, "last_activity_date": 1516209292, "creation_date": 1516209292, "answer_id": 48306583, "question_id": 48306335, "link": "https://stackoverflow.com/questions/48306335/additional-checks-in-hash-each/48306583#48306583", "title": "Additional checks in hash.each", "body": "<p>You should steer towards writing methods that encapsulate this sort of thing than just throwing together some code. It helps organize things better and expresses your intent more clearly. For example:</p>\n\n<pre><code>require 'set'\n\nDEFAULT_DEFAULT = 'SMT'\n\ndef fill_with_defaults(hash, default = nil, skip_keys = nil)\n  default ||= DEFAULT_DEFAULT\n  skip_keys ||= Set.new(skip_keys || [ ])\n\n  hash.each do |key, sub|\n    next if (skip_keys.include?(key))\n\n    sub['lol3'] = default\n  end\n\n  hash\nend\n</code></pre>\n\n<p>Where here there's a well-defined method called <code>fill_with_defaults</code> that takes three arguments, the hash, the default to set and the keys to skip.</p>\n\n<p>The default is assigned a default if it's not specified and the keys to skip are converted to a Set for performance reasons, this helps with larger arrays. You could even force that argument to be a set in the first place if you're calling this more frequently on smaller hashes instead of fewer times on larger hashes. There's trade-offs in both directions.</p>\n\n<p>The set allows you to quickly skip any unnecessary keys, and the default is set once to avoid repeated <code>||</code> checks.</p>\n\n<p>Then you can use it like this:</p>\n\n<pre><code>fill_with_defaults(b['lol1'], 'SMTHLKK', %w[ lol2 ])\n</code></pre>\n\n<p>Where that'll skip the <code>lol2</code> key.</p>\n"}], "owner": {"reputation": 101, "user_id": 7042299, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/56fa5a578544bc3c8f9053e1e1169023?s=128&d=identicon&r=PG&f=1", "display_name": "grenfunday", "link": "https://stackoverflow.com/users/7042299/grenfunday"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 42, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1516246700, "creation_date": 1516208399, "last_edit_date": 1516246700, "question_id": 48306335, "link": "https://stackoverflow.com/questions/48306335/additional-checks-in-hash-each", "title": "Additional checks in hash.each", "body": "<p>I have a code:</p>\n\n<pre><code>c = \"SMTHLKKK\"\nb = {\n  \"lol1\" =&gt; {\n     \"lol21\" =&gt; {\"lol3\" =&gt; \"smth\"},\n     \"lol22\" =&gt; {\"lol3\" =&gt; \"smth\"},\n     \"lol2\" =&gt; {\"lol3\" =&gt; \"smth\"}\n  }\n}\n</code></pre>\n\n<p>I want to check if <code>c</code> exists, and if it does, I want to set the values for <code>\"lol3\"</code> in the nested hashes in <code>b</code> to <code>\"SMTHLKKK\"</code>. Otherwise, I set it to <code>\"SMT\"</code>. I want to check whether <code>key != \"lol22</code> in each block before setting the value.</p>\n\n<p>I tried this:</p>\n\n<pre><code>b[\"lol1\"].each{|key, value| value[\"lol3\"] = c ? c : \"SMT\"}\n</code></pre>\n\n<p>How can I do this check?</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "answers": [{"tags": [], "owner": {"reputation": 2093, "user_id": 3309314, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/3683a7a05e7e97a67c262b774db00d08?s=128&d=identicon&r=PG&f=1", "display_name": "user3309314", "link": "https://stackoverflow.com/users/3309314/user3309314"}, "is_accepted": true, "score": 2, "last_activity_date": 1516207241, "last_edit_date": 1516207241, "creation_date": 1516206347, "answer_id": 48305709, "question_id": 48305598, "link": "https://stackoverflow.com/questions/48305598/generate-secure-token-ruby-on-rails/48305709#48305709", "title": "Generate Secure Token - Ruby on Rails", "body": "<p>Maybe you are looking for <a href=\"http://api.rubyonrails.org/classes/ActiveSupport/MessageVerifier.html\" rel=\"nofollow noreferrer\">ActiveSupport::MessageVerifier</a>. </p>\n\n<blockquote>\n  <p>MessageVerifier makes it easy to generate and verify messages which\n  are signed to prevent tampering.</p>\n</blockquote>\n\n<p><a href=\"http://www.monkeyandcrow.com/blog/reading_rails_how_does_message_verifier_work\" rel=\"nofollow noreferrer\">How Does MessageVerifier Work?</a></p>\n"}], "owner": {"reputation": 2960, "user_id": 7426461, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/Ldwxy.jpg?s=128&g=1", "display_name": "Cannon Moyer", "link": "https://stackoverflow.com/users/7426461/cannon-moyer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 127, "favorite_count": 0, "accepted_answer_id": 48305709, "answer_count": 1, "score": 0, "last_activity_date": 1516207241, "creation_date": 1516206038, "question_id": 48305598, "link": "https://stackoverflow.com/questions/48305598/generate-secure-token-ruby-on-rails", "title": "Generate Secure Token - Ruby on Rails", "body": "<p>I have a process flow where I send a user a link via email with a generated token.</p>\n\n<p>I'm currently generating the token like this:</p>\n\n<pre><code>before_create :generate_token\n\nprotected\n\ndef generate_token\n  self.token = loop do\n    random_token = SecureRandom.urlsafe_base64(nil, false)\n    break random_token unless ModelName.exists?(token: random_token)\n  end\nend\n</code></pre>\n\n<p>The user can access the record by going to </p>\n\n<pre><code>mysite.com/records/:token\n</code></pre>\n\n<p>How can I accomplish the same task with either a hashed or encrypted token? I want to make this link more secure. </p>\n"}, {"tags": ["ruby", "rest", "google-plus"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user1531971"}, "edited": false, "score": 0, "creation_date": 1516206377, "post_id": 48305526, "comment_id": 83596392, "body": "Can you show the relevant parts of the Ruby? The link you provide is the client lib I assume, which implies you&#39;ve written at least some code that creates the client object and then does something with it. How does it compare with the example here: <a href=\"https://developers.google.com/+/web/api/rest/latest/activities/get\" rel=\"nofollow noreferrer\">developers.google.com/+/web/api/rest/latest/activities/get</a>"}, {"owner": {"reputation": 31, "user_id": 6131660, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-4kUcxnBTjIo/AAAAAAAAAAI/AAAAAAAAAMg/CT8BdQoXAoY/photo.jpg?sz=128", "display_name": "William Flanagan", "link": "https://stackoverflow.com/users/6131660/william-flanagan"}, "edited": false, "score": 0, "creation_date": 1516207787, "post_id": 48305526, "comment_id": 83597280, "body": "The problem isn&#39;t getting things. If I search for an activity through the API, I can get it&#39;s ID and retrieve it fine. But, if I find a post through any other source, I can&#39;t seem to make it work... and there is no error message from google, just a 500."}, {"owner": {"user_type": "does_not_exist", "display_name": "user1531971"}, "edited": false, "score": 0, "creation_date": 1516207982, "post_id": 48305526, "comment_id": 83597412, "body": "I wouldn&#39;t expect a 500 from Google, though. This feels like it is resolving the REST request against some other server. You might want to check that you are actually reaching the host you think you are. Can you find a way of showing the raw HTTP request and result?"}], "owner": {"reputation": 31, "user_id": 6131660, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-4kUcxnBTjIo/AAAAAAAAAAI/AAAAAAAAAMg/CT8BdQoXAoY/photo.jpg?sz=128", "display_name": "William Flanagan", "link": "https://stackoverflow.com/users/6131660/william-flanagan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 37, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1516207699, "creation_date": 1516205756, "last_edit_date": 1516207699, "question_id": 48305526, "link": "https://stackoverflow.com/questions/48305526/google-plus-api-read-a-single-public-post-in-ruby", "title": "Google Plus API, read a single public post in Ruby", "body": "<p>I am trying to, as an exercise, read a public post I randomly found on the Internet.  The URL is: <a href=\"https://plus.google.com/107555023234041177814/posts/a5oZwq6h325\" rel=\"nofollow noreferrer\">https://plus.google.com/107555023234041177814/posts/a5oZwq6h325</a> </p>\n\n<p>In all cases, trying to retrieve the Activity (a5oZwq6h325) of the post returns a 500 with a null message.  </p>\n\n<p>This is a simple #activities.get(activity_id) call on the GooglePlus API. I am authenticated, and the token is refreshed.  </p>\n\n<p>There is no option in the API documentation to supply a user_id, if that would help, that I can see. </p>\n\n<p>Anyone know how to do this? Ideally in Ruby, but really any Google API client.</p>\n\n<p>I'm using the standard <a href=\"https://github.com/google/google-api-ruby-client\" rel=\"nofollow noreferrer\">https://github.com/google/google-api-ruby-client</a> google client.</p>\n\n<p>This is my code: </p>\n\n<pre><code>    def client\n      @client ||= begin\n        c = ::Google::Apis::PlusV1::PlusService.new\n        c.authorization = oauth_authorization.to_authorization\n        c.authorization.refresh!\n        c\n      end\n    end\n\n    client.get_activity('a5oZwq6h325')\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "node.js", "ruby", "passenger", "execjs"], "answers": [{"tags": [], "owner": {"reputation": 155, "user_id": 5145402, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5d8b5ce978c5bdf6ca34c6a1d852d9b0?s=128&d=identicon&r=PG&f=1", "display_name": "Panda", "link": "https://stackoverflow.com/users/5145402/panda"}, "is_accepted": true, "score": 1, "last_activity_date": 1516209955, "creation_date": 1516209955, "answer_id": 48306744, "question_id": 48304939, "link": "https://stackoverflow.com/questions/48304939/passenger-ruby-execjs-not-finding-nodejs/48306744#48306744", "title": "Passenger + Ruby/ExecJS not finding NodeJS", "body": "<p>For some reason nginx/passenger cannot find the proper nodejs path. I've fixed this issued before by adding this to the top of my nginx configuration ( /etc/nginx/nginx.conf ):\n<code>end PATH;</code></p>\n\n<p>Check: <a href=\"https://stackoverflow.com/questions/23124776/rails-passenger-node-js-execjs-could-not-find-a-javascript-runtime?rq=1\">Rails/Passenger/Node.js: ExecJS &quot;Could not find a JavaScript runtime&quot;</a> for more info.</p>\n\n<p>Also, make sure the user in which nginx is executed (www-data?) is able to run node. </p>\n"}], "owner": {"reputation": 767, "user_id": 7985922, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/9f8bcc5be5da750cd58183b5ef19c89b?s=128&d=identicon&r=PG&f=1", "display_name": "Proz1g", "link": "https://stackoverflow.com/users/7985922/proz1g"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 315, "favorite_count": 0, "accepted_answer_id": 48306744, "answer_count": 1, "score": 0, "last_activity_date": 1516209955, "creation_date": 1516204017, "question_id": 48304939, "link": "https://stackoverflow.com/questions/48304939/passenger-ruby-execjs-not-finding-nodejs", "title": "Passenger + Ruby/ExecJS not finding NodeJS", "body": "<p>I have a Ruby on Rails application deployed using capistrano on a server with ubuntu 16.04 + nginx + passenger5 + ruby 2.5.0 (via rbenv) + nodejs 9.4. For some unknown reason when I open the website passenger returns an error:\n<code>\nThere was an error while trying to load the gem 'bootstrap'.\nGem Load Error is: Could not find a JavaScript runtime. See https://github.com/rails/execjs for a list of available runtimes.\"\n</code></p>\n\n<p>As said, I have nodejs installed and if I try to run the first ExecJS example via ruby console (irb) it works properly:\n<code>\nrequire \"execjs\"\nExecJS.eval \"'red yellow blue'.split(' ')'\"\n</code></p>\n\n<p>If I change the javascript runtime by adding \"therubyracer\" gem to the Gemfile the project works properly. Any ideas why the ExecJS autodetection missing NodeJS?</p>\n\n<p>Thanks in advance.</p>\n"}, {"tags": ["json", "ruby", "datetime", "serialization"], "comments": [{"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 1, "creation_date": 1516203963, "post_id": 48304882, "comment_id": 83594819, "body": "That&#39;s exactly what refinements do. Read up on this."}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "reply_to_user": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 1, "creation_date": 1516205862, "post_id": 48304882, "comment_id": 83596095, "body": "@SergioTulentsev or this is exactly what explicit call to <code>iso8601</code> would do:  <code>{my_time: DateTime.now.iso8601(3)}.to_json</code> :)"}, {"owner": {"reputation": 2218, "user_id": 5129208, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-wfsc3HumFMQ/AAAAAAAAAAI/AAAAAAAAAGw/2TW94iOeLhQ/photo.jpg?sz=128", "display_name": "yez", "link": "https://stackoverflow.com/users/5129208/yez"}, "edited": false, "score": 0, "creation_date": 1516208262, "post_id": 48304882, "comment_id": 83597608, "body": "Read this post about how Refinements work <a href=\"http://jakeyesbeck.com/2015/12/13/ruby-refinements/\" rel=\"nofollow noreferrer\">jakeyesbeck.com/2015/12/13/ruby-refinements</a>"}], "answers": [{"tags": [], "owner": {"reputation": 91, "user_id": 1938835, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/5aeb5978917eca4d09a923403bd4d56d?s=128&d=identicon&r=PG", "display_name": "Emily", "link": "https://stackoverflow.com/users/1938835/emily"}, "is_accepted": true, "score": 1, "last_activity_date": 1516212716, "creation_date": 1516212716, "answer_id": 48307443, "question_id": 48304882, "link": "https://stackoverflow.com/questions/48304882/ruby-extend-datetime-only-in-class/48307443#48307443", "title": "Ruby extend DateTime only in class", "body": "<p>This manually serializes all <code>DateTime</code> values in the hash (and nested hashes) to the specified format. After this <code>my_hash.to_json</code> will show the correct precision.</p>\n\n<pre><code>require 'date'\nrequire 'json'\n\nmodule HashExtensions\n  refine Hash do\n    def deep_traverse(&amp;block)\n      stack = self.map{ |k,v| [ [k], v ] }\n      while not stack.empty?\n        key, value = stack.pop\n        yield(key, value)\n        if value.is_a? Hash\n          value.each{ |k,v| stack.push [ key.dup &lt;&lt; k, v ] }\n        end\n      end\n    end\n\n    def deep_update(&amp;block)\n      deep_traverse do |keys, v|\n        if keys.length == 1\n          self[keys.first] = block.call(v)\n        else\n          self.dig(*keys.first(keys.length - 1))&amp;.[]=(keys.last, block.call(v))\n        end\n      end\n    end\n  end\nend\n</code></pre>\n\n<p>Test for nested hashes:</p>\n\n<pre><code>h = {\n  d1: DateTime.now,\n  level1: {\n    d2: DateTime.now,\n    level2: {\n      d3: DateTime.now,\n    }\n  }\n}\nusing HashExtensions\nh.deep_update do |v|\n  if v.is_a? DateTime\n     v.iso8601(3)\n  else\n    v\n  end\nend\nputs h\n</code></pre>\n"}], "owner": {"reputation": 91, "user_id": 1938835, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/5aeb5978917eca4d09a923403bd4d56d?s=128&d=identicon&r=PG", "display_name": "Emily", "link": "https://stackoverflow.com/users/1938835/emily"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 135, "favorite_count": 0, "accepted_answer_id": 48307443, "answer_count": 1, "score": 0, "last_activity_date": 1516212716, "creation_date": 1516203838, "last_edit_date": 1516206343, "question_id": 48304882, "link": "https://stackoverflow.com/questions/48304882/ruby-extend-datetime-only-in-class", "title": "Ruby extend DateTime only in class", "body": "<p>I want to change the way a <code>DateTime</code> is serialized in <code>Hash#to_json</code> for a higher precision.</p>\n\n<pre><code>require 'date'\nrequire 'json'\nputs ({my_time: DateTime.now}.to_json) # =&gt; {\"my_time\":\"2018-01-17T15:34:30+00:00\"}\n</code></pre>\n\n<p>This working example includes milliseconds:</p>\n\n<pre><code>require 'date'\nrequire 'json'\nclass A\n  class ::DateTime\n    def as_json(*)\n      iso8601(3)\n    end\n\n    def to_json(*args)\n      as_json.to_json(*args)\n    end\n  end\n\n  def serialize_hash\n    {my_time: DateTime.now}.to_json\n  end\nend\n</code></pre>\n\n<p>This overrides <code>DateTime#to_json</code> to produce the expected result, but the change is global. I need to change <code>DateTime.to_json</code> in <strong>only</strong> class <code>A</code>.</p>\n\n<pre><code># Includes milliseconds, as expected\nputs A.new.serialize_hash # =&gt; {\"my_time\":\"2018-01-17T15:33:44.348+00:00\"}\n\n# Outside class A\n# Should not include milliseconds\nputs ({my_other_time: DateTime.now}.to_json) # =&gt; {\"my_other_time\":\"2018-01-17T15:33:44.348+00:00\"}\n</code></pre>\n\n<p>This global change is making one of my gems fail to load with <code>TypeError: superclass mismatch for class DateTime</code>.</p>\n\n<p>This is a pure Ruby implementation. No Rails.</p>\n\n<p><strong>Edit</strong>: per @SergioTulentsev's recommendation I am now working with refinements.</p>\n\n<pre><code>require 'date'\nrequire 'json'\nmodule DateTimeExtensions\n  refine DateTime do\n    def as_json(*)\n      iso8601(3)\n    end\n\n    def to_json(*args)\n      as_json.to_json(*args)\n    end\n  end\nend\n</code></pre>\n\n<p>It looks like <code>Hash#to_json</code> cannot see my refinement.</p>\n\n<pre><code>using DateTimeExtensions\n# Has milliseconds, as expected\nputs DateTime.now.to_json # =&gt; \"2018-01-17T16:23:46.043+00:00\"\n# Should also have milliseconds, but does not\nputs ({my_time: DateTime.now}.to_json) # =&gt; {\"my_time\":\"2018-01-17T16:23:46+00:00\"}\n</code></pre>\n"}, {"tags": ["ruby", "automated-tests", "ui-automation", "calabash-android"], "comments": [{"owner": {"reputation": 499, "user_id": 5636930, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-L0BF3IxhZYw/AAAAAAAAAAI/AAAAAAAAAPM/RAOVvQpPSEA/photo.jpg?sz=128", "display_name": "amrrbakry", "link": "https://stackoverflow.com/users/5636930/amrrbakry"}, "edited": false, "score": 0, "creation_date": 1516203977, "post_id": 48304838, "comment_id": 83594830, "body": "do you need to check if <code>&#39;*&#39;</code> is in the string <code>&#39;* 12 = 12&#39;</code> or not?"}, {"owner": {"reputation": 411, "user_id": 4252313, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/567208cb2687d981c3b35447f45f08b4?s=128&d=identicon&r=PG&f=1", "display_name": "zzz", "link": "https://stackoverflow.com/users/4252313/zzz"}, "reply_to_user": {"reputation": 499, "user_id": 5636930, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-L0BF3IxhZYw/AAAAAAAAAAI/AAAAAAAAAPM/RAOVvQpPSEA/photo.jpg?sz=128", "display_name": "amrrbakry", "link": "https://stackoverflow.com/users/5636930/amrrbakry"}, "edited": false, "score": 0, "creation_date": 1516204839, "post_id": 48304838, "comment_id": 83595412, "body": "yes ...i need to verify only * , is in the string or not"}], "answers": [{"tags": [], "owner": {"reputation": 499, "user_id": 5636930, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-L0BF3IxhZYw/AAAAAAAAAAI/AAAAAAAAAPM/RAOVvQpPSEA/photo.jpg?sz=128", "display_name": "amrrbakry", "link": "https://stackoverflow.com/users/5636930/amrrbakry"}, "is_accepted": false, "score": 1, "last_activity_date": 1516205364, "last_edit_date": 1516205364, "creation_date": 1516205044, "answer_id": 48305297, "question_id": 48304838, "link": "https://stackoverflow.com/questions/48304838/how-to-verify-specific-text-from-text-view-in-calabash-android/48305297#48305297", "title": "How to verify specific text from text view in calabash android", "body": "<p><a href=\"https://apidock.com/ruby/String/include%3F\" rel=\"nofollow noreferrer\"><code>include?</code></a> should help you with that:</p>\n\n<p>Example:</p>\n\n<pre><code>my_string = '* 12 = 12'\nmy_string.include?('*') # true\n</code></pre>\n\n<p><code>'abc'.include?('*') # false</code></p>\n"}], "owner": {"reputation": 411, "user_id": 4252313, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/567208cb2687d981c3b35447f45f08b4?s=128&d=identicon&r=PG&f=1", "display_name": "zzz", "link": "https://stackoverflow.com/users/4252313/zzz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 147, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1516205364, "creation_date": 1516203650, "question_id": 48304838, "link": "https://stackoverflow.com/questions/48304838/how-to-verify-specific-text-from-text-view-in-calabash-android", "title": "How to verify specific text from text view in calabash android", "body": "<p>How do i verify specific text from text view in calabash android</p>\n\n<p>i enter some number in text field, and there is some specific scenario in which it should be multiplied with some another number which is returned by the service. this multiplication is displayed in front of the text box where i enter number. this multiplication is displayed in text view on which i can assert the expected result ..but i have to take entire text ... i am concerned with only multiplication sign ... and not the calculation</p>\n\n<p>Scenerio:</p>\n\n<p>1*12=12</p>\n\n<p>'1' = is the input</p>\n\n<p>'* 12 = 12' =  is the output in textview ... i need assertion on  '*' and not on entire textview which is '*12 = 12'.</p>\n\n<p>Currently i am using check_if_element_exists? ... and it works in the case of entire textview (* 12 = 12) and fails if i use it for identifying only '*'</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "activerecord"], "comments": [{"owner": {"reputation": 5312, "user_id": 6535997, "user_type": "registered", "accept_rate": 62, "profile_image": "https://graph.facebook.com/10156345016155058/picture?type=large", "display_name": "Mark", "link": "https://stackoverflow.com/users/6535997/mark"}, "edited": false, "score": 1, "creation_date": 1516202870, "post_id": 48304471, "comment_id": 83594027, "body": "<a href=\"https://stackoverflow.com/questions/1781202/could-not-find-the-association-problem-in-rails\" title=\"could not find the association problem in rails\">stackoverflow.com/questions/1781202/&hellip;</a> should point you in the right direction"}], "answers": [{"tags": [], "owner": {"reputation": 499, "user_id": 5636930, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-L0BF3IxhZYw/AAAAAAAAAAI/AAAAAAAAAPM/RAOVvQpPSEA/photo.jpg?sz=128", "display_name": "amrrbakry", "link": "https://stackoverflow.com/users/5636930/amrrbakry"}, "is_accepted": true, "score": 0, "last_activity_date": 1516203103, "creation_date": 1516203103, "answer_id": 48304664, "question_id": 48304471, "link": "https://stackoverflow.com/questions/48304471/many-to-many-relationship-activerecordhasmanythroughassociationnotfounderror/48304664#48304664", "title": "Many to many relationship ActiveRecord::HasManyThroughAssociationNotFoundError", "body": "<p>Your models' associations should be set up like this: </p>\n\n<pre><code># count.rb\nclass Count &lt; ApplicationRecord\n  has_many :counts_users\n  has_many :users, through: :counts_users\nend\n\n# user.rb\nclass User &lt; ApplicationRecord\n  has_many :counts_users\n  has_many :counts, through: :counts_users\nend\n\n# counts_user.rb\nclass CountsUser &lt; ApplicationRecord\n  belongs_to :user\n  belongs_to :count\nend\n</code></pre>\n\n<p>See: <a href=\"http://guides.rubyonrails.org/association_basics.html#the-has-many-through-association\" rel=\"nofollow noreferrer\">the Rails Guides on has_many :through Association</a></p>\n"}], "owner": {"reputation": 873, "user_id": 2320239, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/daef5b7116143c14162b242bf0b1a35a?s=128&d=identicon&r=PG", "display_name": "user2320239", "link": "https://stackoverflow.com/users/2320239/user2320239"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 34, "favorite_count": 0, "accepted_answer_id": 48304664, "answer_count": 1, "score": 0, "last_activity_date": 1516203103, "creation_date": 1516202537, "question_id": 48304471, "link": "https://stackoverflow.com/questions/48304471/many-to-many-relationship-activerecordhasmanythroughassociationnotfounderror", "title": "Many to many relationship ActiveRecord::HasManyThroughAssociationNotFoundError", "body": "<p>Hi I'm trying to set up a many to many relationship in my app. I have two models <code>Count.rb</code></p>\n\n<pre><code>class Count &lt; ApplicationRecord\n  has_many :users, through: :counts_users\nend\n</code></pre>\n\n<p><code>users.rb</code>:</p>\n\n<pre><code>class User &lt; ApplicationRecord\n  has_many :counts, through: :counts_users\nend\n</code></pre>\n\n<p>and <code>counts_users.rb</code>:</p>\n\n<pre><code>class CountsUser &lt; ApplicationRecord\n  belongs_to :user\n  belongs_to :count\nend\n</code></pre>\n\n<p>Now I can create a count </p>\n\n<p><code>Count.new(message: 'hello')</code></p>\n\n<p>but if I then do </p>\n\n<p><code>Count.last.users &lt;&lt; User.last</code></p>\n\n<p>I get the error <code>ActiveRecord::HasManyThroughAssociationNotFoundError: Could not find the association :counts_users in model ErrorCount</code></p>\n\n<p>I assume I've done something wrong setting up the association, but I'm not sure what?</p>\n"}, {"tags": ["ruby", "sinatra"], "comments": [{"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1516203145, "post_id": 48303992, "comment_id": 83594229, "body": "Would more explicit <code>Monteverde.const_defined? &quot;OPERATION&quot;</code> work?"}, {"owner": {"reputation": 3522, "user_id": 544864, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/2146b632c41a02a62279aed5b4ab57d7?s=128&d=identicon&r=PG", "display_name": "Ken J", "link": "https://stackoverflow.com/users/544864/ken-j"}, "reply_to_user": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1516204239, "post_id": 48303992, "comment_id": 83594985, "body": "The problem is that the constant isn&#39;t recognized when the API class is inherited by Sinatra::Base. I need to find a way to include external variables/constants inside of the API class."}], "answers": [{"comments": [{"owner": {"reputation": 3522, "user_id": 544864, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/2146b632c41a02a62279aed5b4ab57d7?s=128&d=identicon&r=PG", "display_name": "Ken J", "link": "https://stackoverflow.com/users/544864/ken-j"}, "edited": false, "score": 0, "creation_date": 1516215464, "post_id": 48306374, "comment_id": 83601642, "body": "Great answer! I never considered it would be as simple as calling run! directly."}], "tags": [], "owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "is_accepted": true, "score": 2, "last_activity_date": 1516208557, "creation_date": 1516208557, "answer_id": 48306374, "question_id": 48303992, "link": "https://stackoverflow.com/questions/48303992/ruby-module-constant-set-and-read/48306374#48306374", "title": "Ruby Module Constant Set and Read", "body": "<p>In your API class definition, the <code>run!</code> line happens as soon as you require that file. It doesn't run again if you reference the class, as you're trying to do with the last line of your <code>def api</code> method.</p>\n\n<p>To get around this, you can move the <code>run!</code> command into a method, and call that from Thor:</p>\n\n<pre><code>class API &lt; Sinatra::Base\n  # ... other stuff\n  def self.start\n    run! if defined? Monteverde::OPERATION\n  end\nend\n</code></pre>\n\n<p>Then in the Thor file:</p>\n\n<pre><code> def api\n   Monteverde.const_set(\"OPERATION\", \"started\")\n   Monteverde::Activity::API.start\n end\n</code></pre>\n\n<p>You can deduce that <code>run!</code> is a class method since it's callable in the scope of the class <em>definition</em> (not in an instance method), and so I define a class method to call it.</p>\n\n<p>It would be simpler, though, to not define <code>def self.start</code>, and instead just call the <code>run!</code> method from the Thor file directly:</p>\n\n<pre><code>def api\n  Monteverde::Activity::API.run!\nend\n</code></pre>\n"}], "owner": {"reputation": 3522, "user_id": 544864, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/2146b632c41a02a62279aed5b4ab57d7?s=128&d=identicon&r=PG", "display_name": "Ken J", "link": "https://stackoverflow.com/users/544864/ken-j"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 262, "favorite_count": 0, "accepted_answer_id": 48306374, "answer_count": 1, "score": 1, "last_activity_date": 1516208557, "creation_date": 1516201109, "question_id": 48303992, "link": "https://stackoverflow.com/questions/48303992/ruby-module-constant-set-and-read", "title": "Ruby Module Constant Set and Read", "body": "<p>I'm developing a module that contains standard methods as well as CLI (Thor) and API (Sinatra). I've created a Submodule that includes a class that inherits Sinatra::Base:</p>\n\n<pre><code>module Monteverde\n  module Activity\n    def self.version\n      \"1.0.1\"\n    end\n\n    class API &lt; Sinatra::Base\n      set :port, 22340\n      get \"/version\" do\n        Monteverde::Activity.version\n      end\n      run! if defined? Monteverde::OPERATION\n    end\n  end\nend\n</code></pre>\n\n<p>This \"Activity\" is invokes from the CLI (Thor):</p>\n\n<pre><code>module Monteverde\n  class CLI &lt; Thor\n    desc \"api\", \"Start Activity API\"\n    def api\n      Monteverde.const_set(\"OPERATION\", \"started\")\n      Monteverde::Activity::API\n    end\n\n    desc \"aversion\", \"Get Activity Version\"\n    def aversion\n      puts Monteverde::Activity.version\n    end\n  end\nend\n</code></pre>\n\n<p>If I don't add an \"if\" to Sinatra's run! it will run automatically and take over the rest of the methods in the module:</p>\n\n<pre><code>...\nclass API &lt; Sinatra::Base\n  register Sinatra::DefaultRoutes\n  set :port, 22340\n  get \"/version\" do\n    Monteverde::Activity.version\n  end\n  run!\nend\n\n$ ruby monteverde.rb aversion\n$ == Sinatra (v2.0.0) has taken the stage on 22340 for development with backup from Puma\n$ ...\n</code></pre>\n\n<p>My issue is that the OPERATION constant is not recognized even though it's set right before the module is called. </p>\n\n<p>Why isn't OPERATION being recognized and how can I get it to be? \nIs there another more intuitive/useful way to get Sinatra not to fire when I call the module?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "amazon-web-services", "amazon-elastic-beanstalk"], "comments": [{"owner": {"reputation": 5312, "user_id": 6535997, "user_type": "registered", "accept_rate": 62, "profile_image": "https://graph.facebook.com/10156345016155058/picture?type=large", "display_name": "Mark", "link": "https://stackoverflow.com/users/6535997/mark"}, "edited": false, "score": 0, "creation_date": 1516202487, "post_id": 48303192, "comment_id": 83593746, "body": "<a href=\"https://docs.aws.amazon.com/elasticbeanstalk/latest/dg/create_deploy_Ruby_rails.html#create_deploy_Ruby_rails-devenv\" rel=\"nofollow noreferrer\">docs.aws.amazon.com/elasticbeanstalk/latest/dg/&hellip;</a> has a good walkthrough"}, {"owner": {"reputation": 4243, "user_id": 4638378, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/pGqPN.png?s=128&g=1", "display_name": "Brian", "link": "https://stackoverflow.com/users/4638378/brian"}, "edited": false, "score": 0, "creation_date": 1516224929, "post_id": 48303192, "comment_id": 83606471, "body": "What is the environment variable <code>RACK_ENV</code> set to on your environments? <code>config.yml</code> just maps git branches to EB environments, but you&#39;ll need to actually tell Rails what the environments are called."}], "owner": {"reputation": 69, "user_id": 8956819, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/18ee2cca28c7060f59b9fdf2ddfe47e5?s=128&d=identicon&r=PG", "display_name": "hood", "link": "https://stackoverflow.com/users/8956819/hood"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 296, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1516198517, "creation_date": 1516198517, "question_id": 48303192, "link": "https://stackoverflow.com/questions/48303192/aws-elastic-beanstalk-environment", "title": "AWS Elastic Beanstalk environment", "body": "<p>I have deployed a Rails app using AWS Elastic Beanstalk and there are two env; Dev-env and Prod-env. However, Dev-env gives me \"production\" when I do Rails.env. Also, log file is defined as /var/app/current/log/production.log not /var/app/current/log/development.log in Dev-env. Am i missing something?</p>\n\n<p>Here is my .elasticbeanstalk/config.yml file.\n<code>\nbranch-defaults:\n  develop:\n    environment: Dev-env\n  master:\n    environment: Prod-env\nenvironment-defaults:\n  Dev-env:\n    branch: null\n    repository: null\nglobal:\n  ...\n</code></p>\n"}, {"tags": ["ruby", "typeerror"], "answers": [{"tags": [], "owner": {"reputation": 208794, "user_id": 229044, "user_type": "moderator", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/591426cbbacd4025d920467bad356911?s=128&d=identicon&r=PG&f=1", "display_name": "meagar", "link": "https://stackoverflow.com/users/229044/meagar"}, "is_accepted": true, "score": 4, "last_activity_date": 1516198165, "creation_date": 1516198165, "answer_id": 48303091, "question_id": 48303041, "link": "https://stackoverflow.com/questions/48303041/ruby-typeerror-when-trying-to-check-object-type/48303091#48303091", "title": "Ruby TypeError when trying to check object type", "body": "<p>The error message is clear: <code>is_a?</code> expects a class or module, but you're giving it a string.</p>\n\n<p>You need to ask if <code>x.is_a? String</code>, not <code>x.is_a? 'String'</code>.</p>\n"}], "owner": {"reputation": 816, "user_id": 5006720, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/9pfXu.png?s=128&g=1", "display_name": "ARL", "link": "https://stackoverflow.com/users/5006720/arl"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 239, "favorite_count": 0, "accepted_answer_id": 48303091, "answer_count": 1, "score": 1, "last_activity_date": 1516198165, "creation_date": 1516198019, "question_id": 48303041, "link": "https://stackoverflow.com/questions/48303041/ruby-typeerror-when-trying-to-check-object-type", "title": "Ruby TypeError when trying to check object type", "body": "<p>Although I have a string object, I am unable to retrieve a boolean when checking what the object type is.</p>\n\n<p><a href=\"https://ruby-doc.org/core-2.2.0/Object.html\" rel=\"nofollow noreferrer\">ruby-doc.org</a></p>\n\n<blockquote>\n  <p>is_a?(class) \u2192 true or false Returns true if class is the class of\n  obj, or if class is one of the superclasses of obj or modules included\n  in obj.</p>\n</blockquote>\n\n<p>Why is this happening?    </p>\n\n<pre><code>irb(main):105:0&gt; p server[0]['role'].class\n    String\n    =&gt; String\n\nirb(main):106:0&gt; p server[0]['role'].is_a? 'String'\nTypeError: class or module required\n    from (irb):103:in `is_a?'\n    from (irb):103\n    from /usr/local/opt/ruby@2.2/bin/irb:11:in `&lt;main&gt;'\n\nirb(main):107:0&gt; p server[0]['role'].methods\n[:&lt;=&gt;, :==, :===, :eql?, :hash, :casecmp, :+, :*, :%, :[], :[]=, :insert, :length, :size, :bytesize, :empty?, :=~, :match, :succ, :succ!, :next, :next!, :upto, :index, :rindex, :replace, :clear, :chr, :getbyte, :setbyte, :byteslice, :scrub, :scrub!, :freeze, :to_i, :to_f, :to_s, :to_str, :inspect, :dump, :upcase, :downcase, :capitalize, :swapcase, :upcase!, :downcase!, :capitalize!, :swapcase!, :hex, :oct, :split, :lines, :bytes, :chars, :codepoints, :reverse, :reverse!, :concat, :&lt;&lt;, :prepend, :crypt, :intern, :to_sym, :ord, :include?, :start_with?, :end_with?, :scan, :ljust, :rjust, :center, :sub, :gsub, :chop, :chomp, :strip, :lstrip, :rstrip, :sub!, :gsub!, :chop!, :chomp!, :strip!, :lstrip!, :rstrip!, :tr, :tr_s, :delete, :squeeze, :count, :tr!, :tr_s!, :delete!, :squeeze!, :each_line, :each_byte, :each_char, :each_codepoint, :sum, :slice, :slice!, :partition, :rpartition, :encoding, :force_encoding, :b, :valid_encoding?, :ascii_only?, :unpack, :encode, :encode!, :to_r, :to_c, :unicode_normalize, :unicode_normalize!, :unicode_normalized?, :to_json, :to_json_raw, :to_json_raw_object, :&gt;, :&gt;=, :&lt;, :&lt;=, :between?, :nil?, :!~, :class, :singleton_class, :clone, :dup, :itself, :taint, :tainted?, :untaint, :untrust, :untrusted?, :trust, :frozen?, :methods, :singleton_methods, :protected_methods, :private_methods, :public_methods, :instance_variables, :instance_variable_get, :instance_variable_set, :instance_variable_defined?, :remove_instance_variable, :instance_of?, :kind_of?, :is_a?, :tap, :send, :public_send, :respond_to?, :extend, :display, :method, :public_method, :singleton_method, :define_singleton_method, :object_id, :to_enum, :enum_for, :equal?, :!, :!=, :instance_eval, :instance_exec, :__send__, :__id__]\n</code></pre>\n"}, {"tags": ["ruby", "jruby", "activemerchant"], "answers": [{"comments": [{"owner": {"reputation": 170, "user_id": 3969778, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/ed5d16d55bd1b1b808a17b71b5febfba?s=128&d=identicon&r=PG&f=1", "display_name": "Richtopia", "link": "https://stackoverflow.com/users/3969778/richtopia"}, "edited": false, "score": 0, "creation_date": 1516227308, "post_id": 48304548, "comment_id": 83607539, "body": "SecurePayAuGateway is here: <a href=\"https://github.com/activemerchant/active_merchant/blob/master/lib/active_merchant/billing/gateways/secure_pay_au.rb\" rel=\"nofollow noreferrer\">github.com/activemerchant/active_merchant/blob/master/lib/&hellip;</a>. I&#39;ve debugged JRuby and can see that none of the gateways are being loaded as constants of the Billing module when the gem is wrapped into a jar, but they all get loaded during Unit testing because the unit tests reference real files in the Maven target directory."}], "tags": [], "owner": {"reputation": 5312, "user_id": 6535997, "user_type": "registered", "accept_rate": 62, "profile_image": "https://graph.facebook.com/10156345016155058/picture?type=large", "display_name": "Mark", "link": "https://stackoverflow.com/users/6535997/mark"}, "is_accepted": false, "score": 0, "last_activity_date": 1516202769, "creation_date": 1516202769, "answer_id": 48304548, "question_id": 48302471, "link": "https://stackoverflow.com/questions/48302471/org-jruby-exceptions-raiseexception-nameerror-uninitialized-constant/48304548#48304548", "title": "org.jruby.exceptions.RaiseException: (NameError) uninitialized constant", "body": "<p>Which gateway are you trying to teach? From Active Merchant's github there is no</p>\n\n<pre><code>ActiveMerchant::Billing::SecurePayAuGateway\n</code></pre>\n\n<p>But there is a </p>\n\n<pre><code>ActiveMerchant::Billing::SecurePayGateway\n</code></pre>\n\n<p>And a</p>\n\n<pre><code>ActiveMerchant::Billing::SecurePayTechGateway\n</code></pre>\n\n<p>To test, instead of </p>\n\n<pre><code>gateway = ActiveMerchant::Billing::const_get(name).new(options)\n</code></pre>\n\n<p>Try</p>\n\n<pre><code>gateway = ActiveMerchant::Billing::SecurePayGateway\n</code></pre>\n\n<p>If this works, you know the problem is your gateway = method and you can fix this accordingly</p>\n"}], "owner": {"reputation": 170, "user_id": 3969778, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/ed5d16d55bd1b1b808a17b71b5febfba?s=128&d=identicon&r=PG&f=1", "display_name": "Richtopia", "link": "https://stackoverflow.com/users/3969778/richtopia"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 754, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1516202769, "creation_date": 1516196204, "question_id": 48302471, "link": "https://stackoverflow.com/questions/48302471/org-jruby-exceptions-raiseexception-nameerror-uninitialized-constant", "title": "org.jruby.exceptions.RaiseException: (NameError) uninitialized constant", "body": "<p>I'm getting the following error from a JRuby wrapping of the ActiveMerchant library:</p>\n\n<pre><code>org.jruby.exceptions.RaiseException: (NameError) uninitialized constant ActiveMerchant::Billing::SecurePayAuGateway\n    at org.jruby.RubyModule.const_missing(org/jruby/RubyModule.java:3345)\n    at org.jruby.RubyModule.const_get(org/jruby/RubyModule.java:3290)\n    at RUBY.createGateway(classpath:/scripts/main.rb:79)\n</code></pre>\n\n<p>The code initiating it is:</p>\n\n<pre><code>gateway = ActiveMerchant::Billing::const_get(name).new(options)\n</code></pre>\n\n<p>I think this is happening because there is some dynamic loading of the gateways happening in gateways.rb:</p>\n\n<pre><code>module ActiveMerchant\n    module Billing\n        load_path = Pathname.new(__FILE__ + '/../../..')\n        Dir[File.dirname(__FILE__) + '/gateways/**/*.rb'].each do |filename|\n            gateway_name      = File.basename(filename, '.rb')\n            gateway_classname = \"#{gateway_name}_gateway\".camelize\n            gateway_filename  = Pathname.new(filename).relative_path_from(load_path).sub_ext('')\n\n            autoload(gateway_classname, gateway_filename)\n        end\n    end\nend\n</code></pre>\n\n<p>This works during unit tests because the Ruby files are real files in my target directory. However in the final application, the Ruby files are contained within a Jar which is in a Jar.</p>\n\n<p>Anyone know why this is happening and how to get it to work?</p>\n"}, {"tags": ["ruby", "grape", "grape-api"], "comments": [{"owner": {"reputation": 2093, "user_id": 3309314, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/3683a7a05e7e97a67c262b774db00d08?s=128&d=identicon&r=PG&f=1", "display_name": "user3309314", "link": "https://stackoverflow.com/users/3309314/user3309314"}, "edited": false, "score": 0, "creation_date": 1516207151, "post_id": 48302423, "comment_id": 83596913, "body": "You mean the entire request&#39;s body will be a JSON?"}, {"owner": {"reputation": 38170, "user_id": 57135, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/S9roh.jpg?s=128&g=1", "display_name": "Joe", "link": "https://stackoverflow.com/users/57135/joe"}, "edited": false, "score": 0, "creation_date": 1516230619, "post_id": 48302423, "comment_id": 83608817, "body": "This is an area where grape I think has a shortcoming.  I looked into it a while back and didn&#39;t come up with a satisfactory answer (&quot;how do you declare a top-level nameless parameter&quot;) but am looking again."}, {"owner": {"reputation": 38170, "user_id": 57135, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/S9roh.jpg?s=128&g=1", "display_name": "Joe", "link": "https://stackoverflow.com/users/57135/joe"}, "edited": false, "score": 0, "creation_date": 1516242099, "post_id": 48302423, "comment_id": 83611593, "body": "So... this is not currently easy to do without rolling it yourself by parsing the overall payload.  See: <a href=\"https://github.com/ruby-grape/grape/issues/1730\" rel=\"nofollow noreferrer\">github.com/ruby-grape/grape/issues/1730</a>"}], "owner": {"reputation": 21, "user_id": 5106443, "user_type": "registered", "profile_image": "https://graph.facebook.com/1075845749111453/picture?type=large", "display_name": "Mateus Mendon&#231;a", "link": "https://stackoverflow.com/users/5106443/mateus-mendon%c3%a7a"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 360, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1516200604, "creation_date": 1516196034, "last_edit_date": 1516200604, "question_id": 48302423, "link": "https://stackoverflow.com/questions/48302423/how-to-allow-top-level-json-array-param-in-ruby-grape", "title": "How to allow top-level JSON array param in Ruby Grape", "body": "<p>I have a route with /coordinates. I want to receive a JSON Array on this route, such as:</p>\n\n<pre><code>[\n    {\"latitude\": 1, \"longitude\": 1},\n    {\"latitude\": 1, \"longitude\": 2},\n    {\"latitude\": 1, \"longitude\": 3}\n]\n</code></pre>\n\n<p>How do I configure the params to parse this kind of data with grape? I don't want to give a name to the array such as <code>{ \"blah\": []}</code>, I just want to read it from the request.</p>\n\n<p>Here's what I'm trying to do </p>\n\n<pre><code>params do\n  requires :latitude, type: Float\n  requires :longitude, type: Float\nend\npost do\n  route = Route.create(coordinates: params)\n  { id: route.id }\nend\n</code></pre>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 1812, "user_id": 9104680, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a6e2d06cc56c31f995950c00602a0e7d?s=128&d=identicon&r=PG", "display_name": "Derek Hopper", "link": "https://stackoverflow.com/users/9104680/derek-hopper"}, "edited": false, "score": 0, "creation_date": 1516197779, "post_id": 48302210, "comment_id": 83590484, "body": "I&#39;ve used this method recently: <a href=\"https://github.com/sparklemotion/nokogiri/wiki/Add-and-Remove-elements-from-an-existing-document\" rel=\"nofollow noreferrer\">github.com/sparklemotion/nokogiri/wiki/&hellip;</a>. Have you tried it?"}], "answers": [{"comments": [{"owner": {"reputation": 1135, "user_id": 1638009, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/cce87e94a76af5a587b5c9fe48461910?s=128&d=identicon&r=PG", "display_name": "Shimu", "link": "https://stackoverflow.com/users/1638009/shimu"}, "edited": false, "score": 0, "creation_date": 1516282575, "post_id": 48302485, "comment_id": 83630329, "body": "Any news here? Have you still problems or is it working?"}], "tags": [], "owner": {"reputation": 1135, "user_id": 1638009, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/cce87e94a76af5a587b5c9fe48461910?s=128&d=identicon&r=PG", "display_name": "Shimu", "link": "https://stackoverflow.com/users/1638009/shimu"}, "is_accepted": false, "score": 0, "last_activity_date": 1516196247, "creation_date": 1516196247, "answer_id": 48302485, "question_id": 48302210, "link": "https://stackoverflow.com/questions/48302210/insert-data-in-xml-tag/48302485#48302485", "title": "Insert data in XML tag", "body": "<p>When you read the docu you leanr that the node has a content method where you can add stuff.  </p>\n\n<p>This would be the code:</p>\n\n<pre><code>doc = Nokogiri::XML(....file...)\ndoc.children.each do |node|\n  if node.name == 'payment_transaction'\n    span = Nokogiri::XML::Node.new \"moto\", doc\n    span.content = true\n    node.add_child(span)\n  end\nend\n</code></pre>\n\n<p><a href=\"http://www.nokogiri.org/tutorials/modifying_an_html_xml_document.html\" rel=\"nofollow noreferrer\">Here</a> is the docu</p>\n"}], "owner": {"reputation": 7004, "user_id": 1103606, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/0d93cc650b93939ea91066fcb5aefae0?s=128&d=identicon&r=PG", "display_name": "Peter Penzov", "link": "https://stackoverflow.com/users/1103606/peter-penzov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 47, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1516196247, "creation_date": 1516195369, "question_id": 48302210, "link": "https://stackoverflow.com/questions/48302210/insert-data-in-xml-tag", "title": "Insert data in XML tag", "body": "<p>I want to modify this XML file to add additional inner tag. I tried this:</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;transaction&gt;\n  &lt;transaction_type&gt;void&lt;/transaction_type&gt;\n  &lt;transaction_id&gt;r742srui&lt;/transaction_id&gt;\n  &lt;reference_id&gt;&lt;/reference_id&gt;\n&lt;/transaction&gt;\n\n    doc = Nokogiri::XML(....file...)\n    doc.children.each do |node|\n      if node.name == 'payment_transaction'\n        span = Nokogiri::XML::Node.new \"moto\", doc\n        node.add_child(span)\n      end\n    end\n</code></pre>\n\n<p>And I get this result:</p>\n\n<pre><code>....\n&lt;reference_id/&gt;\n&lt;moto/&gt;\n......\n</code></pre>\n\n<p>How I can insert true into <code>&lt;moto&gt;true&lt;/flag&gt;</code>?</p>\n"}, {"tags": ["mysql", "ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 722, "user_id": 3643211, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/kEAbU.jpg?s=128&g=1", "display_name": "Daniel", "link": "https://stackoverflow.com/users/3643211/daniel"}, "edited": false, "score": 0, "creation_date": 1516194508, "post_id": 48301740, "comment_id": 83588291, "body": "Why do you make your table name singular?"}, {"owner": {"reputation": 59, "user_id": 9133350, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/28f9f514983df63ae9f79e416647b268?s=128&d=identicon&r=PG&f=1", "display_name": "Kase", "link": "https://stackoverflow.com/users/9133350/kase"}, "reply_to_user": {"reputation": 722, "user_id": 3643211, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/kEAbU.jpg?s=128&g=1", "display_name": "Daniel", "link": "https://stackoverflow.com/users/3643211/daniel"}, "edited": false, "score": 0, "creation_date": 1516196676, "post_id": 48301740, "comment_id": 83589786, "body": "user_group_info = It handle the user_group information with different language."}], "answers": [{"comments": [{"owner": {"reputation": 59, "user_id": 9133350, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/28f9f514983df63ae9f79e416647b268?s=128&d=identicon&r=PG&f=1", "display_name": "Kase", "link": "https://stackoverflow.com/users/9133350/kase"}, "edited": false, "score": 0, "creation_date": 1516245447, "post_id": 48303124, "comment_id": 83612364, "body": "It help me a lot, i know what is the problem now, thank you."}], "tags": [], "owner": {"reputation": 1812, "user_id": 9104680, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a6e2d06cc56c31f995950c00602a0e7d?s=128&d=identicon&r=PG", "display_name": "Derek Hopper", "link": "https://stackoverflow.com/users/9104680/derek-hopper"}, "is_accepted": true, "score": 0, "last_activity_date": 1516198263, "creation_date": 1516198263, "answer_id": 48303124, "question_id": 48301740, "link": "https://stackoverflow.com/questions/48301740/ruby-on-rails-model-with-table-join/48303124#48303124", "title": "Ruby on Rails Model with table join", "body": "<p>You can use ActiveRecord to create your query rather than creating it by hand. Try this:</p>\n\n<pre><code>User.joins(user_group: :user_group_info).where(user_group_infos: { language_id: 1 })\n</code></pre>\n\n<p>This should translate into what you gave as an example query in your question.</p>\n\n<p>You start with <code>User</code> and you join with <code>user_groups</code>. Through <code>user_groups</code>, you join with <code>user_group_infos</code>. Finally, you add a condition on the <code>user_group_infos</code>. There are a couple ways to write that.</p>\n\n<pre><code>where(\"user_group_infos.language_id = ?\", language_id)\n# or\nwhere(user_group_infos: { language_id: language_id })\n</code></pre>\n"}], "owner": {"reputation": 59, "user_id": 9133350, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/28f9f514983df63ae9f79e416647b268?s=128&d=identicon&r=PG&f=1", "display_name": "Kase", "link": "https://stackoverflow.com/users/9133350/kase"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 37, "favorite_count": 0, "accepted_answer_id": 48303124, "answer_count": 1, "score": 0, "last_activity_date": 1516198263, "creation_date": 1516193779, "question_id": 48301740, "link": "https://stackoverflow.com/questions/48301740/ruby-on-rails-model-with-table-join", "title": "Ruby on Rails Model with table join", "body": "<p>In my database, I create three tables which are user, user_group, user_group_info.<br/>\nI want to do something like this query, but i have no idea how can i join the two tables.<br/></p>\n\n<pre><code>SELECT * FROM user AS u\nINNER JOIN user_group AS ug ON u.user_group_id=ug.user_group_id\nINNER JOIN user_group_info AS ugi ON ug.user_group_id=ugi.user_group_id\nWHERE ugi.language_id = 1\n</code></pre>\n\n<p><br/><br/></p>\n\n<p>User Model</p>\n\n<pre><code>class User &lt; ApplicationRecord\n    self.table_name = \"user\"\n    self.primary_key = \"user_id\"\n    belongs_to :user_group\nend\n</code></pre>\n\n<p><hr/>\nUserGroup Model</p>\n\n<pre><code>class UserGroup &lt; ApplicationRecord\n    self.table_name = \"user_group\"\n    self.primary_key = \"user_group_id\"\n    has_many :user\n    belongs_to :user_group_info\nend\n</code></pre>\n\n<p><hr/>\nUserGroupInfo Model</p>\n\n<pre><code>class UserGroupInfo &lt; ApplicationRecord\n    self.table_name = \"user_group_info\"\n    has_many :user_group\nend\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 722, "user_id": 3643211, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/kEAbU.jpg?s=128&g=1", "display_name": "Daniel", "link": "https://stackoverflow.com/users/3643211/daniel"}, "edited": false, "score": 0, "creation_date": 1516193669, "post_id": 48301437, "comment_id": 83587768, "body": "You can check if current user is admin."}, {"owner": {"reputation": 1450, "user_id": 5554158, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/a8KtK.jpg?s=128&g=1", "display_name": "wokoro douye samuel", "link": "https://stackoverflow.com/users/5554158/wokoro-douye-samuel"}, "reply_to_user": {"reputation": 722, "user_id": 3643211, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/kEAbU.jpg?s=128&g=1", "display_name": "Daniel", "link": "https://stackoverflow.com/users/3643211/daniel"}, "edited": false, "score": 0, "creation_date": 1516194023, "post_id": 48301437, "comment_id": 83588011, "body": "that&#39;s not the case @Daniel, i am trying to preview the file before creating the users, preview button is supposed to preview student details while create would create them. i wanted a case were when a button is clicked it would go to a given route in the controller."}, {"owner": {"reputation": 722, "user_id": 3643211, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/kEAbU.jpg?s=128&g=1", "display_name": "Daniel", "link": "https://stackoverflow.com/users/3643211/daniel"}, "edited": false, "score": 0, "creation_date": 1516194404, "post_id": 48301437, "comment_id": 83588242, "body": "Do you mean one button for 2 actions?"}, {"owner": {"reputation": 1450, "user_id": 5554158, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/a8KtK.jpg?s=128&g=1", "display_name": "wokoro douye samuel", "link": "https://stackoverflow.com/users/5554158/wokoro-douye-samuel"}, "reply_to_user": {"reputation": 722, "user_id": 3643211, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/kEAbU.jpg?s=128&g=1", "display_name": "Daniel", "link": "https://stackoverflow.com/users/3643211/daniel"}, "edited": false, "score": 0, "creation_date": 1516194689, "post_id": 48301437, "comment_id": 83588395, "body": "No i mean, two buttons for two different actions, it goes to a given action depending on what is been clicked @Daniel"}, {"owner": {"reputation": 722, "user_id": 3643211, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/kEAbU.jpg?s=128&g=1", "display_name": "Daniel", "link": "https://stackoverflow.com/users/3643211/daniel"}, "edited": false, "score": 1, "creation_date": 1516195845, "post_id": 48301437, "comment_id": 83589213, "body": "If you want change url dynamically, you can use Javascript."}, {"owner": {"reputation": 1521, "user_id": 7177640, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/21ab719e4dfae3533a20da4f52e5c9e7?s=128&d=identicon&r=PG", "display_name": "nattfodd", "link": "https://stackoverflow.com/users/7177640/nattfodd"}, "edited": false, "score": 1, "creation_date": 1516196365, "post_id": 48301437, "comment_id": 83589585, "body": "I would solve that in controller: <code>return redirect_to_preview(params) if params[:submit] == &#39;preview&#39;</code>"}, {"owner": {"reputation": 1450, "user_id": 5554158, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/a8KtK.jpg?s=128&g=1", "display_name": "wokoro douye samuel", "link": "https://stackoverflow.com/users/5554158/wokoro-douye-samuel"}, "reply_to_user": {"reputation": 1521, "user_id": 7177640, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/21ab719e4dfae3533a20da4f52e5c9e7?s=128&d=identicon&r=PG", "display_name": "nattfodd", "link": "https://stackoverflow.com/users/7177640/nattfodd"}, "edited": false, "score": 0, "creation_date": 1516196656, "post_id": 48301437, "comment_id": 83589776, "body": "Please @nattfodd 2 am not clear with your solution."}, {"owner": {"reputation": 1450, "user_id": 5554158, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/a8KtK.jpg?s=128&g=1", "display_name": "wokoro douye samuel", "link": "https://stackoverflow.com/users/5554158/wokoro-douye-samuel"}, "reply_to_user": {"reputation": 722, "user_id": 3643211, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/kEAbU.jpg?s=128&g=1", "display_name": "Daniel", "link": "https://stackoverflow.com/users/3643211/daniel"}, "edited": false, "score": 0, "creation_date": 1516196769, "post_id": 48301437, "comment_id": 83589847, "body": "OK I would try doing that and get back to you @Daniel"}], "answers": [{"tags": [], "owner": {"reputation": 1521, "user_id": 7177640, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/21ab719e4dfae3533a20da4f52e5c9e7?s=128&d=identicon&r=PG", "display_name": "nattfodd", "link": "https://stackoverflow.com/users/7177640/nattfodd"}, "is_accepted": false, "score": 0, "last_activity_date": 1516197396, "creation_date": 1516197396, "answer_id": 48302860, "question_id": 48301437, "link": "https://stackoverflow.com/questions/48301437/dynamic-routing-base-on-clicked-bottoms/48302860#48302860", "title": "Dynamic routing base on clicked bottoms", "body": "<p>I would solve this that way, for example:</p>\n\n<h1>Controller part</h1>\n\n<pre><code>class YourContoller &lt; ApplicationController\n  # POST /create_from_file \n  def create_from_file\n    # Initialize user or something\n    user = User.new(params)\n\n    if params[:preview]\n      return redirect_to(:preview_from_file, user: user)\n    end\n\n    # Create new user here\n  end\n\n  # GET /preview_from_file\n  # Add another view for preview page\n  def preview_from_file\n    @user = params[:user]\n  end\nend\n</code></pre>\n\n<h1>View part</h1>\n\n<pre><code>&lt;%= form_for :create_student, url:\"/create_from_file\", remote:true, html:{id:\"create_student_from_file\"} do|f| %&gt;\n   &lt;div id=\"student-fields0\" class=\"fields_div\"&gt;\n      &lt;%= f.label \"Upload file\"%&gt;\n      &lt;%= f.file_field :Upload_file %&gt;\n      &lt;%= f.submit :create, id: 'create_student' %&gt;\n      // This is what changed compared to your current view\n      &lt;%= submit_tag 'preview', name: 'preview', value: 'true', class: 'button' %&gt;\n   &lt;/div&gt;\n&lt;% end %&gt;\n</code></pre>\n"}], "owner": {"reputation": 1450, "user_id": 5554158, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/a8KtK.jpg?s=128&g=1", "display_name": "wokoro douye samuel", "link": "https://stackoverflow.com/users/5554158/wokoro-douye-samuel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 38, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1516197396, "creation_date": 1516192911, "last_edit_date": 1516193813, "question_id": 48301437, "link": "https://stackoverflow.com/questions/48301437/dynamic-routing-base-on-clicked-bottoms", "title": "Dynamic routing base on clicked bottoms", "body": "<p>please am stocked trying to create a way for an admin to preview a file before creating users from the file(\"an xls file\"), the problem am faced with is not knowing how to dynamically change the route base on the button the admin clicked, the buttons are supposed to either go to preview the file or create the users from the file.</p>\n\n<pre><code>&lt;%= form_for :create_student, url:\"/create_from_file\", remote:true, html:{id:\"create_student_from_file\"} do|f| %&gt;\n   &lt;div id=\"student-fields0\" class=\"fields_div\"&gt;\n      &lt;%= f.label \"Upload file\"%&gt;\n      &lt;%= f.file_field :Upload_file %&gt;\n      &lt;%= f.submit :create, id: 'create_student' %&gt;\n      &lt;div id=\"preview_student\" class=\"button\"&gt;preview&lt;/div&gt;\n   &lt;/div&gt;\n&lt;% end %&gt;\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby"], "answers": [{"comments": [{"owner": {"reputation": 18856, "user_id": 1359650, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/dffc4318ac93e728a26c8e8b51b4eb37?s=128&d=identicon&r=PG", "display_name": "jvillian", "link": "https://stackoverflow.com/users/1359650/jvillian"}, "edited": false, "score": 0, "creation_date": 1516202529, "post_id": 48301179, "comment_id": 83593769, "body": "Might as well use a guard condition on that last <code>if...else</code>, yes?"}, {"owner": {"reputation": 1521, "user_id": 7177640, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/21ab719e4dfae3533a20da4f52e5c9e7?s=128&d=identicon&r=PG", "display_name": "nattfodd", "link": "https://stackoverflow.com/users/7177640/nattfodd"}, "reply_to_user": {"reputation": 18856, "user_id": 1359650, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/dffc4318ac93e728a26c8e8b51b4eb37?s=128&d=identicon&r=PG", "display_name": "jvillian", "link": "https://stackoverflow.com/users/1359650/jvillian"}, "edited": false, "score": 1, "creation_date": 1516204115, "post_id": 48301179, "comment_id": 83594905, "body": "This last condition has too long lines, it doesn&#39;t fit recommended 80 characters line lenghts... so it&#39;s either exceeds line size, or increases amount of lines by expanding guard clause to 3 lines (if ...\\n return\\n end)"}], "tags": [], "owner": {"reputation": 1521, "user_id": 7177640, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/21ab719e4dfae3533a20da4f52e5c9e7?s=128&d=identicon&r=PG", "display_name": "nattfodd", "link": "https://stackoverflow.com/users/7177640/nattfodd"}, "is_accepted": true, "score": 3, "last_activity_date": 1516192122, "creation_date": 1516192122, "answer_id": 48301179, "question_id": 48300905, "link": "https://stackoverflow.com/questions/48300905/how-to-optimize-the-following-code-segment-in-rails/48301179#48301179", "title": "How to optimize the following code segment in rails", "body": "<p>Besides the logic itself, you can avoid multiple nested if/else statements by using so-called <a href=\"http://www.rubydoc.info/gems/rubocop/RuboCop/Cop/Style/GuardClause\" rel=\"nofollow noreferrer\">guard clause</a>, using <code>return</code>:</p>\n\n<pre><code>def index\n  return redirect_to(login_path) unless current_user\n\n  diary_count = current_user.diaries.count\n  return redirect_to(new_diary_path) if diary_count.zero?\n  return redirect_to(diaries_path(params: {a: :b})) if diary_count &gt; 1\n\n  if current_user.has_agreed_to_privacy_policy?\n    redirect_to current_user.diaries.first\n  else\n    redirect_to diary_path(current_user.diaries.first, params: {a: :b})\n  end\nend\n</code></pre>\n"}], "owner": {"reputation": 61, "user_id": 6590397, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/mnF1p.jpg?s=128&g=1", "display_name": "ADMAT Bandara", "link": "https://stackoverflow.com/users/6590397/admat-bandara"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 45, "favorite_count": 0, "accepted_answer_id": 48301179, "answer_count": 1, "score": 0, "last_activity_date": 1516192122, "creation_date": 1516191209, "question_id": 48300905, "link": "https://stackoverflow.com/questions/48300905/how-to-optimize-the-following-code-segment-in-rails", "title": "How to optimize the following code segment in rails", "body": "<p>This code segment will redirect to the predefined page after sign in. \nNow I need to pass a parameter considering a condition which is</p>\n\n<pre><code>agreed_user = current_user.has_agreed_to_privacy_policy?\n</code></pre>\n\n<p>I wrote the following code. I need the best optimized code segment to this.</p>\n\n<pre><code>def index\n if current_user\n   agreed_user = current_user.has_agreed_to_privacy_policy?\n   diary_count = current_user.diaries.count\n   if diary_count == 0\n     redirect_to new_diary_path\n   elsif diary_count == 1\n     unless agreed_user\n       redirect_to diary_path(current_user.diaries.first, params: {a: :b})\n     else\n       redirect_to current_user.diaries.first\n     end\n   else\n     redirect_to diaries_path(params: {a: :b})\n   end\n else\n   unless agreed_user\n     redirect_to login_path(params: {a: :b})\n   else\n     redirect_to login_path\n   end\n end\nend\n</code></pre>\n"}, {"tags": ["node.js", "ruby", "npm", "terminal", "node-modules"], "owner": {"reputation": 39, "user_id": 7707352, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/07af1bc614f58dddae8b5c948d972eec?s=128&d=identicon&r=PG&f=1", "display_name": "ChrisD", "link": "https://stackoverflow.com/users/7707352/chrisd"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 24, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1516189347, "creation_date": 1516189347, "question_id": 48300322, "link": "https://stackoverflow.com/questions/48300322/error-in-terminal-bash-export-users-chrisdutton-rvm-gems-ruby-2-4-0-bin", "title": "Error in Terminal - bash: export: `/Users/chrisdutton/.rvm/gems/ruby-2.4.0/bin&#39;: not a valid identifier", "body": "<p>I have updated my OS to Sierra this morning and had all sorts of issues with npm, node etc. I have managed to be able to run grunt and get websites working locally, however I get errors each time I open a new terminal window.</p>\n\n<p>I get the following</p>\n\n<pre><code>-bash: export: `/Users/chrisdutton/.rvm/gems/ruby-2.4.0/bin': not a valid identifier\n-bash: uname: command not found\n-bash: ps: command not found\nchriss-imac:~ chrisdutton$ \n</code></pre>\n\n<p>It allows me to run grunt, bower etc and works fine, but something is not right.</p>\n\n<pre><code>ruby -v = ruby 2.4.0p0 (2016-12-24 revision 57164) [x86_64-darwin16]\nnpm -v = 5.6.0\nnode -v = v9.4.0\nHomebrew 1.4.3\n\nPlease note that these warnings are just used to help the Homebrew maintainers\nwith debugging if you file an issue. If everything you use Homebrew for is\nworking fine: please don't worry or file an issue; just ignore this. Thanks!\n\nWarning: Unbrewed header files were found in /usr/local/include.\nIf you didn't put them there on purpose they could cause problems when\nbuilding Homebrew formulae, and may need to be deleted.\n\nUnexpected header files:\n/usr/local/include/node/ares.h\n/usr/local/include/node/ares_build.h\n/usr/local/include/node/ares_rules.h\n/usr/local/include/node/ares_version.h\n/usr/local/include/node/nameser.h\n/usr/local/include/node/node_internals.h\n/usr/local/include/node/pthread-fixes.h\n/usr/local/include/ruby-2.2.0/ruby.h\n/usr/local/include/ruby-2.2.0/ruby/backward/classext.h\n/usr/local/include/ruby-2.2.0/ruby/backward/rubyio.h\n/usr/local/include/ruby-2.2.0/ruby/backward/rubysig.h\n/usr/local/include/ruby-2.2.0/ruby/backward/st.h\n/usr/local/include/ruby-2.2.0/ruby/backward/util.h\n/usr/local/include/ruby-2.2.0/ruby/debug.h\n/usr/local/include/ruby-2.2.0/ruby/defines.h\n/usr/local/include/ruby-2.2.0/ruby/digest.h\n/usr/local/include/ruby-2.2.0/ruby/encoding.h\n/usr/local/include/ruby-2.2.0/ruby/intern.h\n/usr/local/include/ruby-2.2.0/ruby/io.h\n/usr/local/include/ruby-2.2.0/ruby/missing.h\n/usr/local/include/ruby-2.2.0/ruby/oniguruma.h\n/usr/local/include/ruby-2.2.0/ruby/re.h\n/usr/local/include/ruby-2.2.0/ruby/regex.h\n/usr/local/include/ruby-2.2.0/ruby/ruby.h\n/usr/local/include/ruby-2.2.0/ruby/st.h\n/usr/local/include/ruby-2.2.0/ruby/subst.h\n/usr/local/include/ruby-2.2.0/ruby/thread.h\n/usr/local/include/ruby-2.2.0/ruby/thread_native.h\n/usr/local/include/ruby-2.2.0/ruby/util.h\n/usr/local/include/ruby-2.2.0/ruby/version.h\n/usr/local/include/ruby-2.2.0/ruby/vm.h\n/usr/local/include/ruby-2.2.0/x86_64-darwin11.0/ruby/config.h\n/usr/local/include/ublio.h\n</code></pre>\n"}, {"tags": ["ruby", "rspec", "cucumber"], "comments": [{"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1516193899, "post_id": 48300065, "comment_id": 83587938, "body": "Remove escaping backslashes in the first place and please share the exact error message then."}], "answers": [{"tags": [], "owner": {"reputation": 703, "user_id": 3275627, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/sFsXG.jpg?s=128&g=1", "display_name": "Jonathan Duarte", "link": "https://stackoverflow.com/users/3275627/jonathan-duarte"}, "is_accepted": false, "score": 0, "last_activity_date": 1516198799, "creation_date": 1516198799, "answer_id": 48303285, "question_id": 48300065, "link": "https://stackoverflow.com/questions/48300065/why-undefined-method-expect-when-checking-in-at-exit-hook/48303285#48303285", "title": "Why undefined method `expect&#39; when checking in at_exit hook", "body": "<p>Your code is suppose be a test case based on rspec, and you are mixing it with normal ruby code. </p>\n\n<p>In order to test your code with rspec you need to wrap the test scenarios and cases inside a <code>describe</code> and <code>it</code> block, only then you'll have access to the <code>expect</code> method, like so:</p>\n\n<pre><code># test.rb\nrequire 'rspec'\nrequire 'rspec/expectations'\n\ndescribe 'Test exit status' do\n  it \"check status\" do\n    `cat /etc/redhat-release`\n    expect($?.exitstatus).to eq(0)\n  end\nend\n</code></pre>\n\n<p>and you run this code with rspec command line, like: <code>rspec test.rb</code></p>\n\n<p>The code you had before, was using the <code>at_exit</code> block. This is only called when you exit the program, or receive a signal for it to be killed.</p>\n"}], "owner": {"reputation": 41, "user_id": 3212003, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fb2eea37f897e75944b3a2fe4a63ae60?s=128&d=identicon&r=PG&f=1", "display_name": "jaggu", "link": "https://stackoverflow.com/users/3212003/jaggu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 358, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1516198799, "creation_date": 1516188560, "last_edit_date": 1516188729, "question_id": 48300065, "link": "https://stackoverflow.com/questions/48300065/why-undefined-method-expect-when-checking-in-at-exit-hook", "title": "Why undefined method `expect&#39; when checking in at_exit hook", "body": "<p>I am trying to check the exitstatus of a command through the below code. It is resulting in an error --->undefined method 'expect'</p>\n\n<pre><code>require 'rspec'\nrequire 'rspec/expectations'\n\nat_exit do\n\n \\`cat /etc/redhat-release\\`\n\n  expect($?.exitstatus).to eq(0)\n\nend\n</code></pre>\n\n<p>Can any one please help me in solving this problem</p>\n"}, {"tags": ["ruby", "types", "compiler-errors", "blockchain", "crystal-lang"], "answers": [{"comments": [{"owner": {"reputation": 2174, "user_id": 3448554, "user_type": "registered", "accept_rate": 44, "profile_image": "https://i.stack.imgur.com/j7RcG.jpg?s=128&g=1", "display_name": "Kelsey Hannan", "link": "https://stackoverflow.com/users/3448554/kelsey-hannan"}, "edited": false, "score": 0, "creation_date": 1516225834, "post_id": 48301880, "comment_id": 83606869, "body": "Thank you!  Follow up question: with the same script, do you know what would be necessary for having the Integers in this script to use <code>Int64</code> rather than <code>Int32</code> (as I suspect would be wanted for the blockchain&#39;s index?)  I get an error if I just switch the Integer types over to <code>Int64</code>.  Specifically:  <code>instance variable &#39;@index&#39; of Block must be Int64, not Int32</code>  I&#39;m assuming this is because the type inference engine sees an undeclared integer in <code>Block.new(0, data, &quot;0&quot;)</code> and assumes it&#39;s automatically <code>Int32</code>?"}, {"owner": {"reputation": 4722, "user_id": 7401689, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/j8SqS.jpg?s=128&g=1", "display_name": "Johannes M&#252;ller", "link": "https://stackoverflow.com/users/7401689/johannes-m%c3%bcller"}, "reply_to_user": {"reputation": 2174, "user_id": 3448554, "user_type": "registered", "accept_rate": 44, "profile_image": "https://i.stack.imgur.com/j7RcG.jpg?s=128&g=1", "display_name": "Kelsey Hannan", "link": "https://stackoverflow.com/users/3448554/kelsey-hannan"}, "edited": false, "score": 0, "creation_date": 1516227985, "post_id": 48301880, "comment_id": 83607811, "body": "Indeed. The default int type is Int32 and the compiler is (not yet) capable to automatically select a matching type for literals implicitly. You can use <code>0_i64</code> to explicitly state the type to be Int64."}], "tags": [], "owner": {"reputation": 4722, "user_id": 7401689, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/j8SqS.jpg?s=128&g=1", "display_name": "Johannes M&#252;ller", "link": "https://stackoverflow.com/users/7401689/johannes-m%c3%bcller"}, "is_accepted": true, "score": 4, "last_activity_date": 1516194275, "creation_date": 1516194275, "answer_id": 48301880, "question_id": 48299395, "link": "https://stackoverflow.com/questions/48299395/how-to-convert-to-crystal-rubys-multiple-assignments-of-array/48301880#48301880", "title": "How to convert to Crystal ruby&#39;s multiple assignments of Array", "body": "<p>When decomposing an Array into a multiple assignment Crystal can't infer the exact type of each element. So the value assigned to the instance variable <code>@nonce</code> could be either <code>Int32</code> or <code>String</code>. You should use a Tuple instead: <code>return {nonce, hash}</code> (in line 29). A tuple has positional type declarations and is by the way more performant than an Array because it does not allocate memory on the heap.</p>\n"}], "owner": {"reputation": 2174, "user_id": 3448554, "user_type": "registered", "accept_rate": 44, "profile_image": "https://i.stack.imgur.com/j7RcG.jpg?s=128&g=1", "display_name": "Kelsey Hannan", "link": "https://stackoverflow.com/users/3448554/kelsey-hannan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 110, "favorite_count": 0, "accepted_answer_id": 48301880, "answer_count": 1, "score": 0, "last_activity_date": 1516226158, "creation_date": 1516186606, "last_edit_date": 1516226158, "question_id": 48299395, "link": "https://stackoverflow.com/questions/48299395/how-to-convert-to-crystal-rubys-multiple-assignments-of-array", "title": "How to convert to Crystal ruby&#39;s multiple assignments of Array", "body": "<p>I have a small (formerly) ruby blockchain script I'm trying to convert over into Crystal, that looks like this so far:</p>\n\n<pre><code>#  build your own blockchain from scratch in crystal!\n#\n#  to run use:\n#    $ crystal ./blockchain_with_proof_of_work.cr\n\nrequire \"openssl\" # for hash checksum digest function SHA256\n\nclass Block\n  getter index : Int32\n  getter timestamp : Time\n  getter data : String\n  getter previous_hash : String\n  getter nonce : Int32 # # proof of work if hash starts with leading zeros (00)\n  getter hash : String\n\n  def initialize(index, data, previous_hash)\n    @index = index\n    @timestamp = Time.now\n    @data = data\n    @previous_hash = previous_hash\n    @nonce, @hash = compute_hash_with_proof_of_work\n  end\n\n  def compute_hash_with_proof_of_work(difficulty = \"00\")\n    nonce = 0\n    loop do\n      hash = calc_hash_with_nonce(nonce)\n      if hash.starts_with?(difficulty)\n        return [nonce, hash] # # bingo! proof of work if hash starts with leading zeros (00)\n      else\n        nonce += 1 # # keep trying (and trying and trying)\n      end\n    end\n  end\n\n  def calc_hash_with_nonce(nonce = 0)\n    sha = OpenSSL::Digest.new(\"SHA256\")\n    sha.update(nonce.to_s + @index.to_s + @timestamp.to_s + @data + @previous_hash)\n    sha.hexdigest\n  end\n\n  def self.first(data = \"Genesis\") # create genesis (big bang! first) block\n    # # uses index zero (0) and arbitrary previous_hash (\"0\")\n    Block.new(0, data, \"0\")\n  end\n\n  def self.next(previous, data = \"Transaction Data...\")\n    Block.new(previous.index + 1, data, previous.hash)\n  end\nend # class Block\n\n#####\n# # let's get started\n# #   build a blockchain a block at a time\n\nb0 = Block.first(\"Genesis\")\nb1 = Block.next(b0, \"Transaction Data...\")\nb2 = Block.next(b1, \"Transaction Data......\")\nb3 = Block.next(b2, \"More Transaction Data...\")\n\nblockchain = [b0, b1, b2, b3]\n\nputs blockchain\n\n######\n#  will print something like:\n#\n# [#&lt;Block:0x1e204f0\n#   @data=\"Genesis\",\n#   @hash=\"00b8e77e27378f9aa0afbcea3a2882bb62f6663771dee053364beb1887e18bcf\",\n#   @index=0,\n#   @nonce=242,\n#   @previous_hash=\"0\",\n#   @timestamp=2017-09-20 20:13:38 +0200&gt;,\n#  #&lt;Block:0x1e56e20\n#   @data=\"Transaction Data...\",\n#   @hash=\"00aae8d2e9387e13c71b33f8cd205d336ac250d2828011f5970062912985a9af\",\n#   @index=1,\n#   @nonce=46,\n#   @previous_hash=\n#    \"00b8e77e27378f9aa0afbcea3a2882bb62f6663771dee053364beb1887e18bcf\",\n#   @timestamp=2017-09-20 20:13:38 +0200&gt;,\n#  #&lt;Block:0x1e2bd58\n#   @data=\"Transaction Data......\",\n#   @hash=\"00ea45e0f4683c3bec4364f349ee2b6816be0c9fd95cfd5ffcc6ed572c62f190\",\n#   @index=2,\n#   @nonce=350,\n#   @previous_hash=\n#    \"00aae8d2e9387e13c71b33f8cd205d336ac250d2828011f5970062912985a9af\",\n#   @timestamp=2017-09-20 20:13:38 +0200&gt;,\n#  #&lt;Block:0x1fa8338\n#   @data=\"More Transaction Data...\",\n#   @hash=\"00436f0fca677652963e904ce4c624606a255946b921132d5b1f70f7d86c4ab8\",\n#   @index=3,\n#   @nonce=59,\n#   @previous_hash=\n#    \"00ea45e0f4683c3bec4364f349ee2b6816be0c9fd95cfd5ffcc6ed572c62f190\",\n#   @timestamp=2017-09-20 20:13:38 +0200&gt;]\n</code></pre>\n\n<p>However when I run it I get an error that states:</p>\n\n<pre><code>Error in blockchain.cr/blockchain_with_proof_of_work.cr:57: instantiating \n'Block:Class#first(String)'\n\nb0 = Block.first(\"Genesis\")\n           ^~~~~\n\nin blockchain.cr/blockchain_with_proof_of_work.cr:45: instantiating \n'Block:Class#new(Int32, String, String)'\n\nBlock.new(0, data, \"0\")\n      ^~~\n\nin blockchain.cr/blockchain_with_proof_of_work.cr:22: instance variable \n'@nonce' of Block must be Int32, not (Int32 | String)\n\n    @nonce, @hash = compute_hash_with_proof_of_work\n    ^~~~~~\n</code></pre>\n\n<p>Looking at <a href=\"https://crystal-lang.org/docs/syntax_and_semantics/multiple_assignment.html\" rel=\"nofollow noreferrer\">Crystal docs on multiple assignment</a>, I'm unsure of how I can refactor this method so that it doesn't fail Crystal's automatic static type checking and type inference?  The method in question, of an array of two types being returned, doesn't seem covered by the docs:</p>\n\n<pre><code>@nonce, @hash = compute_hash_with_proof_of_work # return [nonce, hash]\n</code></pre>\n"}, {"tags": ["ruby", "sequel"], "answers": [{"tags": [], "owner": {"reputation": 11331, "user_id": 132053, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f183bcc4176b308c9edabe79299e448f?s=128&d=identicon&r=PG", "display_name": "Jeremy Evans", "link": "https://stackoverflow.com/users/132053/jeremy-evans"}, "is_accepted": true, "score": 1, "last_activity_date": 1516203237, "creation_date": 1516203237, "answer_id": 48304704, "question_id": 48299054, "link": "https://stackoverflow.com/questions/48299054/rake-dbschemadump-and-rake-dbschemaload-equivalent-in-sequel/48304704#48304704", "title": "rake db:schema:dump and rake db:schema:load equivalent in Sequel", "body": "<p>I think you are misunderstanding the point of Sequel's schema dump and load.  Schema dumping should only be used if you have an existing database and would like to produce a migration from it, either for review of what tables/columns exist, or for loading into an empty database.  Loading a migration dumped by the schema dumper should only be done on an empty database.</p>\n\n<p>If you already have an existing test database that is not empty (i.e. previous migrations have been applied to it), you shouldn't be using schema dump and load, you should just run the migrator on the test database.  In general, it's best to migrate your test database before you migrate your development database, so you can then run your tests and see if the migration breaks anything.</p>\n\n<p>The only time you should have to run all migrations since the beginning is if you have an empty database.  If you migrate your test databases similar to the way you migrate your development and production databases, you are generally only applying a single migration at a time.</p>\n\n<p>Note that the schema dumper only handles a small fraction of what is possible, and will only work correctly for the simplest cases.  It doesn't handle dumping views, functions, triggers, partial/functional indexes, and a whole range of other things.  For all but the simplest cases, use the database's tools to dump and load schema.</p>\n"}], "owner": {"reputation": 6088, "user_id": 1983072, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/974c4e106b996fff51c25171e439b7b8?s=128&d=identicon&r=PG", "display_name": "bbozo", "link": "https://stackoverflow.com/users/1983072/bbozo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 875, "favorite_count": 0, "accepted_answer_id": 48304704, "answer_count": 1, "score": 1, "last_activity_date": 1516203237, "creation_date": 1516185501, "question_id": 48299054, "link": "https://stackoverflow.com/questions/48299054/rake-dbschemadump-and-rake-dbschemaload-equivalent-in-sequel", "title": "rake db:schema:dump and rake db:schema:load equivalent in Sequel", "body": "<p>I tried following through the source code and the docs, but after a lost morning I give up: at the same time it's as if not enough assumptions are made in the <code>SchemaDumper</code> and at the same time there's no <code>SchemaLoader</code> and following through the <code>sequel</code> command source code it seems that it clobbers migration information to-date (since it has no \"migrations to date\" kind of information in the resulting file).</p>\n\n<p>The motivation to do this is a failed migration in tests (Sequel thinks the tables are not there, yet they are so it breaks both on migrating to new versions and the check pending migrations check fails) - and a previous experience that running all migrations from start of history to today is generally a bad way to put up a database.</p>\n\n<p>I've got this thus far:</p>\n\n<pre><code>namespace :schema do\n\n  task :dump =&gt; :migrations_environment do\n    schema = without_sequel_logging{ DB.dump_schema_migration }\n    File.open(\"db/schema.rb\", 'w') {|f| f.write(schema) }\n  end\n\n  task :load =&gt; :migrations_environment do\n    Sequel::Migrator.run(DB, \"db/schema.rb\")\n  end\n\nend\n</code></pre>\n\n<p>normally the <code>load</code> fails since the <code>Migrator</code> makes a load of assumptions ranging starting from that it will be given a folder full of files in a specific order, yet this is apparently exactly what  <code>sequel -m</code> and <code>sequel -d</code> should do according to current source code - and <code>sequel -m</code> and <code>sequel -d</code> combo are apparently what you should use when you want to do schema dump &amp; schema load.</p>\n\n<p>Any ideas?</p>\n"}, {"tags": ["ruby", "ruby-c-extension"], "answers": [{"tags": [], "owner": {"reputation": 149, "user_id": 5759987, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/zCxJO.png?s=128&g=1", "display_name": "Marko Lustro", "link": "https://stackoverflow.com/users/5759987/marko-lustro"}, "is_accepted": false, "score": 0, "last_activity_date": 1516188742, "last_edit_date": 1516188742, "creation_date": 1516187223, "answer_id": 48299613, "question_id": 48298985, "link": "https://stackoverflow.com/questions/48298985/ruby-c-extension-how-do-i-know-that-a-ruby-value-generated-in-my-c-code-will-b/48299613#48299613", "title": "Ruby C extension : How do I know that a ruby VALUE generated in my C code will be correctly cleaned by GC?", "body": "<p>Yes, You code properly clean memory if You using <code>rb_ary_new()</code>.</p>\n\n<p>In my opinion You need answer on other question. How create you own object.\n<a href=\"http://www.onlamp.com/pub/a/onlamp/2004/11/18/extending_ruby.html\" rel=\"nofollow noreferrer\">http://www.onlamp.com/pub/a/onlamp/2004/11/18/extending_ruby.html</a></p>\n\n<p>first You must create  <code>rb_define_alloc_func(cYouObject,t_allocate);</code></p>\n\n<p>similar this</p>\n\n<blockquote>\n  <p>struct stru { char      a; };</p>\n  \n  <p>void t_free(struct stru *a) { }</p>\n  \n  <p>static VALUE t_allocate(VALUE obj) { return\n  Data_Wrap_Struct(obj,NULL,t_free,m); }</p>\n</blockquote>\n"}], "owner": {"reputation": 955, "user_id": 2087834, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/d49843edd8129f13ecc9cc5700eb894c?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/2087834/quentin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 52, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1516188742, "creation_date": 1516185299, "question_id": 48298985, "link": "https://stackoverflow.com/questions/48298985/ruby-c-extension-how-do-i-know-that-a-ruby-value-generated-in-my-c-code-will-b", "title": "Ruby C extension : How do I know that a ruby VALUE generated in my C code will be correctly cleaned by GC?", "body": "<p>I'm trying to write a really small C extension. So I don't want to make a whole ruby class, with initializer, allocator, and so forth. All I want to do is add a static method to an existing class, method which will run an algorithm and return a result. Unfortunately, all documentation I find only speak about wrapping a C struct into a VALUE, but that's not my use case.</p>\n\n<p>What I want to know : if I create a ruby object (which will allocate memory) inside my C code, and that I return it as the result of my function, will it be taken care of properly by the garbage collector, or is it going to leak ?</p>\n\n<p>Example : </p>\n\n<pre><code>void Init_my_extension() \n{\n  VALUE cFooModule;\n\n  cFooModule = rb_const_get(rb_cObject, rb_intern(\"Foo\"));\n  rb_define_singleton_method(cFooModule, \"big_calc\", method_big_calc, 1);\n}\n\nVALUE method_big_calc(VALUE self, VALUE input)\n{\n  VALUE result;\n\n  result = rb_ary_new();\n\n  return result;\n}\n</code></pre>\n\n<p>Will the array that was allocated by <code>rb_ary_new()</code> be properly cleaned when it's not used anymore ? How is the garbage collector aware of references to this value ?</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1516180312, "post_id": 48297294, "comment_id": 83579162, "body": "Do you want the quick answer, or the correct one, that involves using Unicode definitions for symbol pairs and would be legit for anything that is declared as paired symbol in the Unicode Consortium definition?"}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 3, "creation_date": 1516180336, "post_id": 48297294, "comment_id": 83579178, "body": "You could simply check if the string contains <code>()</code>, <code>[]</code> or <code>{}</code>."}, {"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1516180433, "post_id": 48297294, "comment_id": 83579235, "body": "Not clear what you mean by &quot;a string with ... should be false, otherwise true&quot;. A string is not <code>true</code>, nor is it <code>false</code>."}, {"owner": {"reputation": 1480, "user_id": 4741620, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/13911648aa5b99a6542494b4c8fcbc38?s=128&d=identicon&r=PG&f=1", "display_name": "jedi", "link": "https://stackoverflow.com/users/4741620/jedi"}, "reply_to_user": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1516180801, "post_id": 48297294, "comment_id": 83579457, "body": "@sawa Sorry, wasn&#39;t specific enough. Return false if brackets are empty, true otherwise."}, {"owner": {"reputation": 1480, "user_id": 4741620, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/13911648aa5b99a6542494b4c8fcbc38?s=128&d=identicon&r=PG&f=1", "display_name": "jedi", "link": "https://stackoverflow.com/users/4741620/jedi"}, "reply_to_user": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1516181020, "post_id": 48297294, "comment_id": 83579613, "body": "@mudasobwa I would like the &quot;correct&quot; answer :)"}], "answers": [{"comments": [{"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 2, "creation_date": 1516180685, "post_id": 48297401, "comment_id": 83579382, "body": "Or <code>input =~ Regexp.union(&#39;()&#39;, &#39;[]&#39;, &#39;{}&#39;)</code> for the ones specified in the question."}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 2, "creation_date": 1516181130, "post_id": 48297401, "comment_id": 83579675, "body": "@Stefan nah :) the answer above actually has a value <i>for future readers</i>; that is why I ever bothered to write the answer instead of a comment."}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1516181855, "post_id": 48297401, "comment_id": 83580104, "body": "For small number of pairs (3 in the OP), regexes are 3x slower. However, the <code>include?</code> solution scales much quicker with more pairs."}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "reply_to_user": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1516181945, "post_id": 48297401, "comment_id": 83580166, "body": "@SergioTulentsev plain wrong. It does not scale at all, mostly because <i>you have no idea what pairs are, while The Consortium has</i>. Also, my solution will work tomorrow, for Unicode 42.0."}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 1, "creation_date": 1516182128, "post_id": 48297401, "comment_id": 83580281, "body": "@mudasobwa: this might be overengineering, some domains do have known (and closed!) set of pairs :) And it seems you misunderstood my comment about scaling."}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "reply_to_user": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 1, "creation_date": 1516182249, "post_id": 48297401, "comment_id": 83580354, "body": "@SergioTulentsev ah, indeed, you meant regexp will outperform <code>include?</code> sooner or later :) Anyway, my experience always whispers to me: everything will change, stay prepared!"}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 2, "creation_date": 1516182320, "post_id": 48297401, "comment_id": 83580387, "body": "&quot;Correct&quot; is defined by the requirements. Matching too much can be as bad as matching too little."}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1516182571, "post_id": 48297401, "comment_id": 83580532, "body": "@Stefan true that; on the other hand, for this particular case I saw many solutions matching too little and nearly none matching too much."}, {"owner": {"reputation": 24179, "user_id": 1672429, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/0815eb7d4e9dd58022d51ba2011b9c0a?s=128&d=identicon&r=PG", "display_name": "Stefan Pochmann", "link": "https://stackoverflow.com/users/1672429/stefan-pochmann"}, "edited": false, "score": 0, "creation_date": 1516195831, "post_id": 48297401, "comment_id": 83589199, "body": "I don&#39;t think it&#39;s &quot;unfortunate&quot; that it catches <code>[)</code>, that looks even <i>more</i> invalid than <code>()</code>. A case where it actually looks wrong is <code>&#39;the \u201c]\u201d char&#39;</code>, as that string looks valid. But are you sure those quote characters get matched? I tried it and it didn&#39;t work."}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "reply_to_user": {"reputation": 24179, "user_id": 1672429, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/0815eb7d4e9dd58022d51ba2011b9c0a?s=128&d=identicon&r=PG", "display_name": "Stefan Pochmann", "link": "https://stackoverflow.com/users/1672429/stefan-pochmann"}, "edited": false, "score": 0, "creation_date": 1516197189, "post_id": 48297401, "comment_id": 83590108, "body": "@StefanPochmann indeed, you\u2019re right, there are different classes for quotes: <i><code>&#47;\\p{Pi}&#47;</code> \u2014 &#39;Punctuation: Initial Quote&#39;; <code>&#47;\\p{Pf}&#47;</code> \u2014 &#39;Punctuation: Final Quote&#39;</i>. But it\u2019ll match <code>&quot;(])&quot;</code> which is probably not so good either."}, {"owner": {"reputation": 24179, "user_id": 1672429, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/0815eb7d4e9dd58022d51ba2011b9c0a?s=128&d=identicon&r=PG", "display_name": "Stefan Pochmann", "link": "https://stackoverflow.com/users/1672429/stefan-pochmann"}, "edited": false, "score": 0, "creation_date": 1516197647, "post_id": 48297401, "comment_id": 83590400, "body": "About your edit: <code>&#47;\\p{Ps}\\p{Pe}|\\p{Pi}\\p{Pf}&#47;</code> might be also be good, that doesn&#39;t match my <code>\u201c]\u201d</code> example. But not sure what&#39;s better, other &quot;mixed&quot; cases might be desirable to catch."}], "tags": [], "owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "is_accepted": false, "score": 2, "last_activity_date": 1516197952, "last_edit_date": 1516197952, "creation_date": 1516180464, "answer_id": 48297401, "question_id": 48297294, "link": "https://stackoverflow.com/questions/48297294/ruby-check-for-empty-brackets/48297401#48297401", "title": "Ruby - check for empty brackets", "body": "<p>The simplest answer that comes to my mind would be to check if the string contains opening punctuation symbol immediately following by the closing one:</p>\n\n<pre><code>input =~ /\\p{Ps}\\p{Pe}/ \n</code></pre>\n\n<p>Here is <a href=\"http://ruby-doc.org/core-2.5.0/Regexp.html#class-Regexp-label-Character+Properties\" rel=\"nofollow noreferrer\">the reference</a>.</p>\n\n<p>Unfortunately, that\u2019ll catch <code>\"[)\"</code> and other non-paired punctuation symbols. There is no way to test whether the closing one is the exact pair for the opening one within a single regexp (AFAIK,) so the next step would be probably required, that\u2019ll check if the closing one is a pair to opening one.</p>\n\n<p>To do so, one would need to parse <a href=\"http://www.unicode.org/Public/10.0.0/ucd/NamesList.txt\" rel=\"nofollow noreferrer\">Names List</a> (and maybe others) to find opening/closing pairs and validate they explicitly.</p>\n\n<hr>\n\n<p>Bonus track: the solution above might also be a bit tweaked to catch proper Unicode quotes \u201c\u201d and many other symbols that are marked as paired punctuation (credits @StefanPochmann.) That way modern editors like Atom and VSCode highlight them:</p>\n\n<pre><code>input =~ /[\\p{Ps}\\p{Pi}][\\p{Pe}\\p{Pf}]/ \n</code></pre>\n\n<p>or (check comments for details):</p>\n\n<pre><code>input =~ /\\p{Ps}\\p{Pe}|\\p{Pi}\\p{Pf}/\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 4, "creation_date": 1516181001, "post_id": 48297545, "comment_id": 83579589, "body": "<code>brackets = %w[ () [] {} ]</code>. Also, consider using <code>brackets.none?</code> instead of abusing <code>each</code> with early return."}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 2, "creation_date": 1516181855, "post_id": 48297545, "comment_id": 83580105, "body": "<code>def is_valid_string(s); %w[ () [] {} ].none?(&amp;s.method(:include?)); end</code>"}, {"owner": {"reputation": 7044, "user_id": 7670262, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3zdDY.jpg?s=128&g=1", "display_name": "Azeem", "link": "https://stackoverflow.com/users/7670262/azeem"}, "reply_to_user": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1516181964, "post_id": 48297545, "comment_id": 83580188, "body": "@mudasobwa: Thanks a lot! That was enlightening for me! :)"}, {"owner": {"reputation": 1480, "user_id": 4741620, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/13911648aa5b99a6542494b4c8fcbc38?s=128&d=identicon&r=PG&f=1", "display_name": "jedi", "link": "https://stackoverflow.com/users/4741620/jedi"}, "reply_to_user": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 1, "creation_date": 1516181990, "post_id": 48297545, "comment_id": 83580205, "body": "@mudasobwa you are a genius! I wish I were able to think programaticaly like you :D Can you help me understand this part <code>(&amp;s.method(:include))</code>"}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "reply_to_user": {"reputation": 1480, "user_id": 4741620, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/13911648aa5b99a6542494b4c8fcbc38?s=128&d=identicon&r=PG&f=1", "display_name": "jedi", "link": "https://stackoverflow.com/users/4741620/jedi"}, "edited": false, "score": 1, "creation_date": 1516182500, "post_id": 48297545, "comment_id": 83580487, "body": "@jedi <code>each</code> accepts either an explicit block or the <code>proc</code>. <code>s.method(:include)</code> returns a method <code>include</code> defined on <code>String</code> instance <code>s</code>, <code>&amp;</code> converts it to <code>proc</code>."}, {"owner": {"reputation": 24179, "user_id": 1672429, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/0815eb7d4e9dd58022d51ba2011b9c0a?s=128&d=identicon&r=PG", "display_name": "Stefan Pochmann", "link": "https://stackoverflow.com/users/1672429/stefan-pochmann"}, "reply_to_user": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1516197247, "post_id": 48297545, "comment_id": 83590150, "body": "@mudasobwa Hmm, why doesn&#39;t <code>%w[ () [] {} ]</code> parse as <code>%w[ () []</code> and then complain about <code>{} ]</code>? Is <code>%w</code> somehow eager, or does it ignore that first <code>]</code> because of the preceding <code>[</code>, or how? Couldn&#39;t find an explanation."}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "reply_to_user": {"reputation": 24179, "user_id": 1672429, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/0815eb7d4e9dd58022d51ba2011b9c0a?s=128&d=identicon&r=PG", "display_name": "Stefan Pochmann", "link": "https://stackoverflow.com/users/1672429/stefan-pochmann"}, "edited": false, "score": 0, "creation_date": 1516200770, "post_id": 48297545, "comment_id": 83592527, "body": "@StefanPochmann Yes, <code>%*</code> sigils are somehow eager, but I am unable to find the docs on it neither."}, {"owner": {"reputation": 24179, "user_id": 1672429, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/0815eb7d4e9dd58022d51ba2011b9c0a?s=128&d=identicon&r=PG", "display_name": "Stefan Pochmann", "link": "https://stackoverflow.com/users/1672429/stefan-pochmann"}, "reply_to_user": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1516203111, "post_id": 48297545, "comment_id": 83594207, "body": "@mudasobwa Ok I don&#39;t think it&#39;s just eager. It does throw up at <code>%w[ () ] {} ]</code>. Though not at <code>%w[ () [ [ 3 ] ] {} ]</code> etc. Looks like it counts and matches <code>[</code> and <code>]</code>."}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "reply_to_user": {"reputation": 24179, "user_id": 1672429, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/0815eb7d4e9dd58022d51ba2011b9c0a?s=128&d=identicon&r=PG", "display_name": "Stefan Pochmann", "link": "https://stackoverflow.com/users/1672429/stefan-pochmann"}, "edited": false, "score": 0, "creation_date": 1516203270, "post_id": 48297545, "comment_id": 83594321, "body": "@StefanPochmann It depends on what we call \u201ceager\u201d :) Of course it counts the amount of opened/closed brackets, otherwise it would gorge everything till the last closing one."}, {"owner": {"reputation": 24179, "user_id": 1672429, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/0815eb7d4e9dd58022d51ba2011b9c0a?s=128&d=identicon&r=PG", "display_name": "Stefan Pochmann", "link": "https://stackoverflow.com/users/1672429/stefan-pochmann"}, "reply_to_user": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1516204119, "post_id": 48297545, "comment_id": 83594909, "body": "@mudasobwa Yes, depends. What I meant with &quot;eager&quot; was something like &quot;use the last <code>]</code> on the line of code&quot;. I think that might be reasonable as well. But really what I had expected originally was that it would take the <i>first</i> <code>]</code> and that we&#39;d have to somehow escape it or use different delimiters, like <code>%w&lt; ... &gt;</code>."}, {"owner": {"reputation": 24179, "user_id": 1672429, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/0815eb7d4e9dd58022d51ba2011b9c0a?s=128&d=identicon&r=PG", "display_name": "Stefan Pochmann", "link": "https://stackoverflow.com/users/1672429/stefan-pochmann"}, "reply_to_user": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1516204622, "post_id": 48297545, "comment_id": 83595266, "body": "@mudasobwa Yeah, I hadn&#39;t thought of multiliners. It&#39;s not sigils, though, is it? Sigils as far as I know are symbols attached to <i>variables</i> to show type or scope. See <a href=\"https://en.wikipedia.org/wiki/Sigil_(computer_programming)\" rel=\"nofollow noreferrer\">en.wikipedia.org/wiki/Sigil_(computer_programming)</a>"}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "reply_to_user": {"reputation": 24179, "user_id": 1672429, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/0815eb7d4e9dd58022d51ba2011b9c0a?s=128&d=identicon&r=PG", "display_name": "Stefan Pochmann", "link": "https://stackoverflow.com/users/1672429/stefan-pochmann"}, "edited": false, "score": 0, "creation_date": 1516204759, "post_id": 48297545, "comment_id": 83595354, "body": "@StefanPochmann I always lack the short term for those in ruby and I use the name that is set for them in <a href=\"https://stackoverflow.com/questions/tagged/elixir\">elixir</a>."}, {"owner": {"reputation": 24179, "user_id": 1672429, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/0815eb7d4e9dd58022d51ba2011b9c0a?s=128&d=identicon&r=PG", "display_name": "Stefan Pochmann", "link": "https://stackoverflow.com/users/1672429/stefan-pochmann"}, "reply_to_user": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1516205266, "post_id": 48297545, "comment_id": 83595714, "body": "@mudasobwa I&#39;ve seen them called &quot;percent literals&quot;, for example <a href=\"https://github.com/bbatsov/ruby-style-guide#percent-literals\" rel=\"nofollow noreferrer\">in this style guide</a>. Not exactly nice, I admit. But in our context, &quot;multiline literals&quot; would&#39;ve been fine. Oh and <a href=\"https://en.wikibooks.org/wiki/Ruby_Programming/Syntax/Literals#The_%_Notation\" rel=\"nofollow noreferrer\">here</a> I just saw <i>&quot;delimiters can appear unescaped in the string as long as they are in balanced pairs&quot;</i>."}], "tags": [], "owner": {"reputation": 7044, "user_id": 7670262, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3zdDY.jpg?s=128&g=1", "display_name": "Azeem", "link": "https://stackoverflow.com/users/7670262/azeem"}, "is_accepted": true, "score": 3, "last_activity_date": 1585201497, "last_edit_date": 1585201497, "creation_date": 1516180959, "answer_id": 48297545, "question_id": 48297294, "link": "https://stackoverflow.com/questions/48297294/ruby-check-for-empty-brackets/48297545#48297545", "title": "Ruby - check for empty brackets", "body": "<p>You can write your own method to do that.</p>\n\n<p>Here's an example (<a href=\"https://ideone.com/ZgPtzQ\" rel=\"nofollow noreferrer\">live</a>):</p>\n\n<pre><code>def is_valid_string( s )\n    brackets = %w[ () [] {} ]\n    brackets.none? { |b| s.include?( b ) }\nend\n\ntest_strings = [ 'hello (world)!', 'hello ()', 'test {}' ]\n\ntest_strings.each do |s|\n    is_valid = is_valid_string( s )\n    puts \"#{s} -&gt; #{ is_valid ? 'valid' : 'not valid' }\"\nend\n</code></pre>\n\n<p>Output:</p>\n\n<pre class=\"lang-sh prettyprint-override\"><code>hello (world)! -&gt; valid\nhello () -&gt; not valid\ntest {} -&gt; not valid\n</code></pre>\n"}], "owner": {"reputation": 1480, "user_id": 4741620, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/13911648aa5b99a6542494b4c8fcbc38?s=128&d=identicon&r=PG&f=1", "display_name": "jedi", "link": "https://stackoverflow.com/users/4741620/jedi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 374, "favorite_count": 0, "accepted_answer_id": 48297545, "answer_count": 2, "score": -3, "last_activity_date": 1585201497, "creation_date": 1516180130, "last_edit_date": 1516180506, "question_id": 48297294, "link": "https://stackoverflow.com/questions/48297294/ruby-check-for-empty-brackets", "title": "Ruby - check for empty brackets", "body": "<p>How to check if brackets or parenthesis are empty in a string in Ruby?</p>\n\n<p>For example:</p>\n\n<pre><code>\"Some text some text () some text some text\" #=&gt; Invalid string\n</code></pre>\n\n<p>A string with empty \"()\" or \"[]\" or \"{}\" should be false, otherwise true.</p>\n\n<p>Examples:</p>\n\n<pre><code>\"Some text some text (some text) some text some text\" #=&gt; Valid string\n\"Some text some text [some text] some text some text\" #=&gt; Valid string\n\"Some text some text {some text} some text some text\" #=&gt; Valid string\n\n\"Some text some text () some text some text\" #=&gt; Invalid string\n\"Some text some text [] some text some text\" #=&gt; Invalid string\n\"Some text some text {} some text some text\" #=&gt; Invalid string\n</code></pre>\n\n<p>I've been researching to use regular expressions or <code>scan</code> method, but none seems to fit my needs. How could I approach that?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "git", "heroku", "sendgrid"], "comments": [{"owner": {"reputation": 6942, "user_id": 4172515, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/BYWxd.jpg?s=128&g=1", "display_name": "fool-dev", "link": "https://stackoverflow.com/users/4172515/fool-dev"}, "edited": false, "score": 0, "creation_date": 1516176723, "post_id": 48296251, "comment_id": 83577188, "body": "Have you any public repository to see your model code or can you post your full model"}], "answers": [{"comments": [{"owner": {"reputation": 57, "user_id": 8544232, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh3.googleusercontent.com/-Z2nVeSzuDh4/AAAAAAAAAAI/AAAAAAAAHWg/Q_VLUHz7FWU/photo.jpg?sz=128", "display_name": "AzBest", "link": "https://stackoverflow.com/users/8544232/azbest"}, "edited": false, "score": 0, "creation_date": 1516178738, "post_id": 48296289, "comment_id": 83578241, "body": "I have this def change     add_column :users, :activation_digest, :string     add_column :users, :activated, :boolean, default: false     add_column :users, :activated_at, :datetime   end end"}, {"owner": {"reputation": 4690, "user_id": 1937435, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/YyN37.jpg?s=128&g=1", "display_name": "Josh Brody", "link": "https://stackoverflow.com/users/1937435/josh-brody"}, "reply_to_user": {"reputation": 57, "user_id": 8544232, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh3.googleusercontent.com/-Z2nVeSzuDh4/AAAAAAAAAAI/AAAAAAAAHWg/Q_VLUHz7FWU/photo.jpg?sz=128", "display_name": "AzBest", "link": "https://stackoverflow.com/users/8544232/azbest"}, "edited": false, "score": 0, "creation_date": 1516180148, "post_id": 48296289, "comment_id": 83579077, "body": "Did you run <code>heroku run rake db:migrate</code>?"}], "tags": [], "owner": {"reputation": 4690, "user_id": 1937435, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/YyN37.jpg?s=128&g=1", "display_name": "Josh Brody", "link": "https://stackoverflow.com/users/1937435/josh-brody"}, "is_accepted": true, "score": 1, "last_activity_date": 1516176414, "creation_date": 1516176414, "answer_id": 48296289, "question_id": 48296251, "link": "https://stackoverflow.com/questions/48296251/how-to-send-email-activation-link-with-heroku-and-send-grid/48296289#48296289", "title": "How to send email activation link with Heroku and Send Grid?", "body": "<p>You don't have an column called <code>activation_digest</code> on your user model. <code>rails g migration add_activation_digest_to_users activation_digest:string:index</code></p>\n"}], "owner": {"reputation": 57, "user_id": 8544232, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh3.googleusercontent.com/-Z2nVeSzuDh4/AAAAAAAAAAI/AAAAAAAAHWg/Q_VLUHz7FWU/photo.jpg?sz=128", "display_name": "AzBest", "link": "https://stackoverflow.com/users/8544232/azbest"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 100, "favorite_count": 0, "accepted_answer_id": 48296289, "answer_count": 1, "score": 0, "last_activity_date": 1516181386, "creation_date": 1516176279, "last_edit_date": 1516181386, "question_id": 48296251, "link": "https://stackoverflow.com/questions/48296251/how-to-send-email-activation-link-with-heroku-and-send-grid", "title": "How to send email activation link with Heroku and Send Grid?", "body": "<p><strong>Errors in heroku logs when I try to send email activation link:</strong></p>\n\n<blockquote>\n  <p>2018-01-17T07:37:09.783615+00:00 app[web.1]:\n  [f3c128f0-83ad-4879-ae6c-a54b28030290]   [1m[35m (0.7ms)[0m \n  [1m[35mBEGIN[0m\n      2018-01-17T07:37:09.891482+00:00 app[web.1]: [f3c128f0-83ad-4879-ae6c-a54b28030290] Completed 500 Internal Server\n  Error in 188ms (ActiveRecord: 10.7ms)\n      2018-01-17T07:37:09.892707+00:00 app[web.1]: [f3c128f0-83ad-4879-ae6c-a54b28030290]<br>\n      2018-01-17T07:37:09.871499+00:00 app[web.1]: [f3c128f0-83ad-4879-ae6c-a54b28030290]   [1m[35m (1.1ms)[0m \n  [1m[31mROLLBACK[0m\n      2018-01-17T07:37:09.892886+00:00 app[web.1]: [f3c128f0-83ad-4879-ae6c-a54b28030290] NoMethodError (undefined method\n  activation_digest= for #\n      2018-01-17T07:37:09.892887+00:00 app[web.1]: Did you mean?  activation_token=):\n      2018-01-17T07:37:09.892920+00:00 app[web.1]: [f3c128f0-83ad-4879-ae6c-a54b28030290]<br>\n      2018-01-17T07:37:09.892966+00:00 app[web.1]: [f3c128f0-83ad-4879-ae6c-a54b28030290] app/models/user.rb:71:in\n  create_activation_digest\n      2018-01-17T07:37:09.892967+00:00 app[web.1]: [f3c128f0-83ad-4879-ae6c-a54b28030290]\n  app/controllers/users_controller.rb:23:in `create'\n      2018-01-17T07:37:09.892966+00:00 heroku[router]: at=info method=POST path=\"/users\" host=letsgo228.herokuapp.com\n  request_id=f3c128f0-83ad-4879-ae6c-a54b28030290 fwd=\"61.6.75.149\"\n  dyno=web.1 connect=1ms service=194ms status=500 bytes=1891\n  protocol=https\n      2018-01-17T07:37:10.572375+00:00 heroku[router]: at=info method=GET path=\"/favicon.ico\" host=letsgo228.herokuapp.com\n  request_id=6b2a9847-7844-4ae9-a7df-e1405b86b08f fwd=\"61.6.75.149\"\n  dyno=web.1 connect=0ms service=1ms status=304 bytes=112 protocol=https</p>\n</blockquote>\n\n<p><strong>User model</strong> </p>\n\n<pre><code> # Creates and assigns the activation token and digest.\n  def create_activation_digest\n    self.activation_token  = User.new_token\n    self.activation_digest = User.digest(activation_token)\n  end\nend\n</code></pre>\n\n<p><strong>user_contrller</strong></p>\n\n<pre><code>def new\n    @user = User.new\n  end\n\n  def create\n    @user = User.new(user_params)\n    if @user.save\n      @user.send_activation_email\n      flash[:info] = \"\u041f\u043e\u0436\u0430\u043b\u0443\u0439\u0441\u0442\u0430 \u043f\u0440\u043e\u0432\u0435\u0440\u044c\u0442\u0435 \u0441\u0432\u043e\u044e \u043f\u043e\u0447\u0442\u0443,\u0432 \u0442\u0435\u0447\u0435\u043d\u0438\u0438 1 \u043c\u0438\u043d\u0443\u0442\u044b \u043f\u0440\u0438\u0434\u0435\u0442 \u043f\u0438\u0441\u044c\u043c\u043e \u0434\u043b\u044f \u0430\u043a\u0442\u0438\u0432\u0430\u0446\u0438\u0438 \u0430\u043a\u043a\u0430\u0443\u043d\u0442\u0430\"\n      redirect_to root_url\n    else\n      render 'new'\n    end\n  end\n</code></pre>\n"}, {"tags": ["ruby", "string"], "comments": [{"owner": {"reputation": 2771, "user_id": 1887370, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/08bf95201cabfe02acc28041cff862ff?s=128&d=identicon&r=PG", "display_name": "sakurashinken", "link": "https://stackoverflow.com/users/1887370/sakurashinken"}, "edited": false, "score": 0, "creation_date": 1516171591, "post_id": 48295060, "comment_id": 83574768, "body": "Please edit your question so the code is properly formatted. Its not readable as is."}, {"owner": {"reputation": 1, "user_id": 9227938, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/445aaec377ff239ec3d1a416eea3eebc?s=128&d=identicon&r=PG&f=1", "display_name": "WhyyyHalp", "link": "https://stackoverflow.com/users/9227938/whyyyhalp"}, "reply_to_user": {"reputation": 2771, "user_id": 1887370, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/08bf95201cabfe02acc28041cff862ff?s=128&d=identicon&r=PG", "display_name": "sakurashinken", "link": "https://stackoverflow.com/users/1887370/sakurashinken"}, "edited": false, "score": 0, "creation_date": 1516171642, "post_id": 48295060, "comment_id": 83574788, "body": "Thanks! I have edited."}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1516172610, "post_id": 48295060, "comment_id": 83575215, "body": "What&#39;s up with the trailing dots?"}, {"owner": {"reputation": 9030, "user_id": 5101476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JCQrl.jpg?s=128&g=1", "display_name": "ice\u30c4", "link": "https://stackoverflow.com/users/5101476/ice%e3%83%84"}, "edited": false, "score": 0, "creation_date": 1516173106, "post_id": 48295060, "comment_id": 83575445, "body": "Your method seems rather busy."}, {"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1516177061, "post_id": 48295060, "comment_id": 83577340, "body": "What is your question?"}, {"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1516177197, "post_id": 48295060, "comment_id": 83577414, "body": "Why do you think &quot;creat[ing] another array that has all the elements of players without the spaces, then compare with that&quot; not a clean solution?"}], "answers": [{"tags": [], "owner": {"reputation": 9384, "user_id": 761132, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/fa462ba2bc6318a8b2e7662bb8e91aa1?s=128&d=identicon&r=PG", "display_name": "Rizwan M.Tuman", "link": "https://stackoverflow.com/users/761132/rizwan-m-tuman"}, "is_accepted": false, "score": 0, "last_activity_date": 1516174979, "last_edit_date": 1516174979, "creation_date": 1516172476, "answer_id": 48295326, "question_id": 48295060, "link": "https://stackoverflow.com/questions/48295060/compare-user-input-against-elements-in-array-disregarding-white-spaces/48295326#48295326", "title": "Compare user input against elements in array disregarding white spaces", "body": "<p>The following will match kyrieirving:</p>\n\n<pre><code>re = /KYRIE IRVING/mix\n</code></pre>\n\n<p>The follwoing will match  KYRIE IRVING, Kyrie Irving, kyrie irving : </p>\n\n<pre><code>re = /KYRIE IRVING/mi\n</code></pre>\n\n<p>x stands for ignore whitespace... you may prepare two regex one with x flag and another without and apply both while iterating through your array. Otherwise you will have to apply things (which I think would have been better) that you have mentioned in your post as FORBIDDEN :)</p>\n\n<pre><code>re = /KYRIE IRVING/mi\nstr = 'KYRIE IRVING, Kyrie Irving, kyrie irving, or kyrieirving,'\n\n# Print the match result\nstr.scan(re) do |match|\n    puts match.to_s\nend\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1, "user_id": 9227938, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/445aaec377ff239ec3d1a416eea3eebc?s=128&d=identicon&r=PG&f=1", "display_name": "WhyyyHalp", "link": "https://stackoverflow.com/users/9227938/whyyyhalp"}, "edited": false, "score": 0, "creation_date": 1516174075, "post_id": 48295382, "comment_id": 83575913, "body": "Thanks for your help!! I&#39;m running this in terminal so using the newline in addition to puts to make it look better when it&#39;s actually run (granted this makes the code look worse).  The challenge I would have with players_no_spc is that I print the elements of the array elsewhere in the program and I want the spacing in those spots."}, {"owner": {"reputation": 2771, "user_id": 1887370, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/08bf95201cabfe02acc28041cff862ff?s=128&d=identicon&r=PG", "display_name": "sakurashinken", "link": "https://stackoverflow.com/users/1887370/sakurashinken"}, "reply_to_user": {"reputation": 1, "user_id": 9227938, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/445aaec377ff239ec3d1a416eea3eebc?s=128&d=identicon&r=PG&f=1", "display_name": "WhyyyHalp", "link": "https://stackoverflow.com/users/9227938/whyyyhalp"}, "edited": false, "score": 0, "creation_date": 1516174595, "post_id": 48295382, "comment_id": 83576149, "body": "The code I gave you preserves the spacing in players, just uses the no spaces version for comparison. If you don&#39;t want to use regular expressions, this is probably the best solution. If you want something that takes up less screen space, go with the rizwan&#39;s answer below."}], "tags": [], "owner": {"reputation": 2771, "user_id": 1887370, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/08bf95201cabfe02acc28041cff862ff?s=128&d=identicon&r=PG", "display_name": "sakurashinken", "link": "https://stackoverflow.com/users/1887370/sakurashinken"}, "is_accepted": false, "score": 0, "last_activity_date": 1516172682, "creation_date": 1516172682, "answer_id": 48295382, "question_id": 48295060, "link": "https://stackoverflow.com/questions/48295060/compare-user-input-against-elements-in-array-disregarding-white-spaces/48295382#48295382", "title": "Compare user input against elements in array disregarding white spaces", "body": "<p>A few points</p>\n\n<ul>\n<li><p>puts in ruby includes a newline so you don't need to begin your strings with newline if you call puts.</p></li>\n<li><p>I find its easier to store everything in lower case, not upper case. Much easier to read.</p></li>\n<li><p>I would use recursion to check for a valid response, not a loop.</p></li>\n</ul>\n\n<p>something like this:</p>\n\n<pre><code>def valid_player(fan, players, vote_history)\n    player = gets.strip\n    player_no_spc = player.gsub(\" \",\"\").downcase\n    players_no_spc = players.map{ |s| s.gsub(\" \",\"\")}\n\n    if players_no_spc.include?(player_no_spc)\n       return vote_history &lt;&lt; player\n    else\n       puts \"Oops! That's not a valid player. Please try again.\"\n       puts \"Fan #{fan}: \"\n       valid_player(fan, players, vote_history)\n    end\nend\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 9384, "user_id": 761132, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/fa462ba2bc6318a8b2e7662bb8e91aa1?s=128&d=identicon&r=PG", "display_name": "Rizwan M.Tuman", "link": "https://stackoverflow.com/users/761132/rizwan-m-tuman"}, "edited": false, "score": 0, "creation_date": 1516174142, "post_id": 48295681, "comment_id": 83575949, "body": "That means preprocessing the values in the array temporarily which the op mentioned as he doesn&#39;t want to do, although this approach is better none the less :)"}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "reply_to_user": {"reputation": 9384, "user_id": 761132, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/fa462ba2bc6318a8b2e7662bb8e91aa1?s=128&d=identicon&r=PG", "display_name": "Rizwan M.Tuman", "link": "https://stackoverflow.com/users/761132/rizwan-m-tuman"}, "edited": false, "score": 0, "creation_date": 1516174586, "post_id": 48295681, "comment_id": 83576145, "body": "@RizwanM.Tuman I never understood the claim starting with \u201cI don\u2019t want to,\u201d specifically when asking a question."}, {"owner": {"reputation": 1, "user_id": 9227938, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/445aaec377ff239ec3d1a416eea3eebc?s=128&d=identicon&r=PG&f=1", "display_name": "WhyyyHalp", "link": "https://stackoverflow.com/users/9227938/whyyyhalp"}, "edited": false, "score": 0, "creation_date": 1516175167, "post_id": 48295681, "comment_id": 83576451, "body": "Thanks! I said I don&#39;t want to as I thought there was bound to be a better way (...this is the third program I&#39;ve written so I&#39;m verrry new).   Nevertheless, doesn&#39;t sound like there&#39;s a great solution that avoids two arrays, but still lets me print with the spaces. Players can have additional elements based on what the user enters.  I will play around some more and see where I get."}, {"owner": {"reputation": 9384, "user_id": 761132, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/fa462ba2bc6318a8b2e7662bb8e91aa1?s=128&d=identicon&r=PG", "display_name": "Rizwan M.Tuman", "link": "https://stackoverflow.com/users/761132/rizwan-m-tuman"}, "reply_to_user": {"reputation": 1, "user_id": 9227938, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/445aaec377ff239ec3d1a416eea3eebc?s=128&d=identicon&r=PG&f=1", "display_name": "WhyyyHalp", "link": "https://stackoverflow.com/users/9227938/whyyyhalp"}, "edited": false, "score": 0, "creation_date": 1516175429, "post_id": 48295681, "comment_id": 83576569, "body": "@Brandy with the existing things you have you may play around the&#39;x&#39; option that i have mentioned along iwth &#39;i&#39; - case insenstive option in my answer.. by using both you have to build two regex but a full regex solution without preprocessing anything..."}, {"owner": {"reputation": 23378, "user_id": 4850040, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/acYd0.png?s=128&g=1", "display_name": "Toby Speight", "link": "https://stackoverflow.com/users/4850040/toby-speight"}, "edited": false, "score": 0, "creation_date": 1516184845, "post_id": 48295681, "comment_id": 83582045, "body": "Thank you for this code snippet, which might provide some limited short-term help.  A proper explanation <a href=\"//meta.stackexchange.com/q/114762\">would greatly improve</a> its long-term value by showing <i>why</i> this is a good solution to the problem, and would make it more useful to future readers with other, similar questions.  Please <a href=\"https://stackoverflow.com/posts/48295681/edit\">edit</a> your answer to add some explanation, including the assumptions you&#39;ve made."}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "reply_to_user": {"reputation": 23378, "user_id": 4850040, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/acYd0.png?s=128&g=1", "display_name": "Toby Speight", "link": "https://stackoverflow.com/users/4850040/toby-speight"}, "edited": false, "score": 0, "creation_date": 1516184930, "post_id": 48295681, "comment_id": 83582106, "body": "@TobySpeight please feel free to edit the answer to add anything you think it misses."}], "tags": [], "owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "is_accepted": false, "score": 0, "last_activity_date": 1516173889, "creation_date": 1516173889, "answer_id": 48295681, "question_id": 48295060, "link": "https://stackoverflow.com/questions/48295060/compare-user-input-against-elements-in-array-disregarding-white-spaces/48295681#48295681", "title": "Compare user input against elements in array disregarding white spaces", "body": "<pre><code>players = %w|KYRIEIRVING KEVINDURANT KAWHILEONARD|\nplayer_to_check = \"Kyrie IRVING\"\nif p = players.detect? { |p| p == player_to_check.delete(' ').upcase }\n  puts \"Found: #{p}\"\nelse\n  puts \"Oops!\"\nend\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 9227938, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/445aaec377ff239ec3d1a416eea3eebc?s=128&d=identicon&r=PG&f=1", "display_name": "WhyyyHalp", "link": "https://stackoverflow.com/users/9227938/whyyyhalp"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 94, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1516176948, "creation_date": 1516171386, "last_edit_date": 1516176948, "question_id": 48295060, "link": "https://stackoverflow.com/questions/48295060/compare-user-input-against-elements-in-array-disregarding-white-spaces", "title": "Compare user input against elements in array disregarding white spaces", "body": "<p>I want to compare a user input <code>player</code> with the elements in an array <code>players</code>:</p>\n\n<pre><code>players = [\"KYRIE IRVING\", \"KEVIN DURANT\", \"KAWHI LEONARD\"]\n</code></pre>\n\n<p>If <code>player</code> is in <code>players</code> disregarding spaces in <code>player</code>, then I want to move forward; otherwise, I want it to display an error message. For example, if <code>player</code> is <code>\"KYRIE IRVING\"</code>, <code>\"Kyrie Irving\"</code>, <code>\"kyrie irving\"</code>, or <code>\"kyrieirving\"</code>, I want to move forward.</p>\n\n<p>The following code doesn't work with <code>\"kyrieirving\"</code>.</p>\n\n<pre><code>def valid_player(player, fan, players, vote_history)\n  until players.include?(player) || **players.gsub(/\\s+/, \"\").include?(player)**\n    puts \"\\n   Oops! That's not a valid player. Please try again.\"  \n    print \"\\n   Fan #{fan}: \"  \n    player = gets.chomp.upcase \n  end \n vote_history &lt;&lt; player\nend\n</code></pre>\n\n<p>I could create another array that has all the elements of players without the spaces, then compare with that. I also could create a block in which the <code>gsub</code> method applies to each element of the array. I'm assuming there's a cleaner solution than either of these two options though.</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 24179, "user_id": 1672429, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/0815eb7d4e9dd58022d51ba2011b9c0a?s=128&d=identicon&r=PG", "display_name": "Stefan Pochmann", "link": "https://stackoverflow.com/users/1672429/stefan-pochmann"}, "edited": false, "score": 1, "creation_date": 1516165193, "post_id": 48293230, "comment_id": 83572742, "body": "&quot;easier&quot; and &quot;shorter&quot; than <i>what</i>?"}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 1, "creation_date": 1516175857, "post_id": 48293230, "comment_id": 83576779, "body": "<i>&quot;sum all values in c:&quot;</i> \u2013 what you mean by that? What&#39;s your expected result?"}, {"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 1, "creation_date": 1516318726, "post_id": 48293230, "comment_id": 83649805, "body": "What is the code you are having trouble with? What trouble do you have with your code? Do you get an error message? What is the error message? Is the result you are getting not the result you are expecting? What result do you expect and why, what is the result you are getting and how do the two differ? Is the behavior you are observing not the desired behavior? What is the desired behavior and why, what is the observed behavior, and in what way do they differ? Please, provide a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>."}, {"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 1, "creation_date": 1516318738, "post_id": 48293230, "comment_id": 83649809, "body": "Can you provide a <i>precise</i> specification of what it is that you want to happen, including any and all rules, exceptions from those rules, corner cases, special cases, boundary cases, and edge cases? Can you provide sample inputs and outputs demonstrating what you expect to happen, both in normal cases, and in all the exceptions, corner cases, special cases, boundary cases, and edge cases? Please, also make sure to provide a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>."}, {"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 1, "creation_date": 1516318783, "post_id": 48293230, "comment_id": 83649824, "body": "&quot;What is the easier way to sum all values in <code>c:</code>?&quot; \u2013 You do it by writing a program which does that. If you have a problem with your program, carefully read the documentation of all the methods, classes, modules, and libraries you are using, write tests for your programs, trace the execution with pen and paper, single-step it in a debugger, then sleep on it, start again from the beginning, sleep on it again, and <i>then and only then</i> narrow your problem down to a concise, focused, simple, short, reproducible <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> and ask a focused, narrow question on <a href=\"https://stackoverflow.com\">Stack Overflow</a>."}], "answers": [{"comments": [{"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 2, "creation_date": 1516161163, "post_id": 48293282, "comment_id": 83571673, "body": "You can omit <code>&amp;</code>."}, {"owner": {"reputation": 9030, "user_id": 5101476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JCQrl.jpg?s=128&g=1", "display_name": "ice\u30c4", "link": "https://stackoverflow.com/users/5101476/ice%e3%83%84"}, "edited": false, "score": 1, "creation_date": 1516171716, "post_id": 48293282, "comment_id": 83574814, "body": "<code>Array#sum</code> is available in Ruby &gt;= 2.4"}], "tags": [], "owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "is_accepted": false, "score": 3, "last_activity_date": 1516160840, "creation_date": 1516160840, "answer_id": 48293282, "question_id": 48293230, "link": "https://stackoverflow.com/questions/48293230/easier-and-shorter-way-to-sum-values-in-a-hash-of-hashes-in-ruby/48293282#48293282", "title": "easier and shorter way to sum values in a hash of hashes in ruby", "body": "<pre><code>d.values.map { |val| val[:c] }.reduce(&amp;:+)\n</code></pre>\n\n<p>To explain:</p>\n\n<pre><code>d.values\n=&gt; [{:c=&gt;1, :d=&gt;3}, {:c=&gt;2, :d=&gt;6}]\n\nd.values.map { |val| val[:c] }\n=&gt; [1, 2]\n</code></pre>\n\n<p>From this point you can use <code>reduce(&amp;:+)</code> to get the sum, or if you're using rails (or have required active support), you can use Array#sum</p>\n\n<p><code>reduce(&amp;:+)</code>, by the way, is a shorthand for <code>reduce { |memo, val| memo + val }</code></p>\n"}, {"comments": [{"owner": {"reputation": 9030, "user_id": 5101476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JCQrl.jpg?s=128&g=1", "display_name": "ice\u30c4", "link": "https://stackoverflow.com/users/5101476/ice%e3%83%84"}, "edited": false, "score": 1, "creation_date": 1516171581, "post_id": 48293747, "comment_id": 83574762, "body": "<code>d.sum { |_,v| v[:c] }</code>"}], "tags": [], "owner": {"reputation": 24179, "user_id": 1672429, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/0815eb7d4e9dd58022d51ba2011b9c0a?s=128&d=identicon&r=PG", "display_name": "Stefan Pochmann", "link": "https://stackoverflow.com/users/1672429/stefan-pochmann"}, "is_accepted": false, "score": 2, "last_activity_date": 1516194694, "last_edit_date": 1516194694, "creation_date": 1516164240, "answer_id": 48293747, "question_id": 48293230, "link": "https://stackoverflow.com/questions/48293230/easier-and-shorter-way-to-sum-values-in-a-hash-of-hashes-in-ruby/48293747#48293747", "title": "easier and shorter way to sum values in a hash of hashes in ruby", "body": "<p>Just go over the hashes and sum their <code>:c</code> values.</p>\n\n<pre><code>d.values.sum { |h| h[:c] }\n=&gt; 3\n</code></pre>\n\n<p>Even shorter (from Sagar Pandya's comment):</p>\n\n<pre><code>d.sum { |_, v| v[:c] }\n=&gt; 3\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": false, "score": 1, "last_activity_date": 1516168699, "creation_date": 1516168699, "answer_id": 48294468, "question_id": 48293230, "link": "https://stackoverflow.com/questions/48293230/easier-and-shorter-way-to-sum-values-in-a-hash-of-hashes-in-ruby/48294468#48294468", "title": "easier and shorter way to sum values in a hash of hashes in ruby", "body": "<p>If you wish to permit nested hashes of arbitrary depth you can use the following recursive method.</p>\n\n<pre><code>def sum_cees(h)\n  h.sum { |k,v| v.is_a?(Hash) ? sum_cees(v) : k == :c ? v : 0 }\nend\n\nsum_cees({ a: { c: 1, d:3 }, b: { d: { m: { c: 2, e: 6 } }, f: { c: 3} },\n           g: { c: 4 },  n: { r: 3 } })\n  #=&gt; 10 \n</code></pre>\n"}], "owner": {"reputation": 6268, "user_id": 503831, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/992c174c48fa4dadacb03854dbf7ade8?s=128&d=identicon&r=PG", "display_name": "Arnold Roa", "link": "https://stackoverflow.com/users/503831/arnold-roa"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 366, "favorite_count": 0, "answer_count": 3, "score": -1, "last_activity_date": 1516194694, "creation_date": 1516160432, "question_id": 48293230, "link": "https://stackoverflow.com/questions/48293230/easier-and-shorter-way-to-sum-values-in-a-hash-of-hashes-in-ruby", "title": "easier and shorter way to sum values in a hash of hashes in ruby", "body": "<p>Having a hash of hashes like this:</p>\n\n<pre><code>d = {a: {c: 1, d:3 }, b: {c: 2, d: 6}, ...}\n</code></pre>\n\n<p>What is the easier way to sum all values in <code>c:</code>?</p>\n"}, {"tags": ["ruby"], "answers": [{"tags": [], "owner": {"reputation": 1265, "user_id": 6092216, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/F6a3O.jpg?s=128&g=1", "display_name": "Nabin Paudyal", "link": "https://stackoverflow.com/users/6092216/nabin-paudyal"}, "is_accepted": false, "score": 0, "last_activity_date": 1516162033, "creation_date": 1516162033, "answer_id": 48293436, "question_id": 48292982, "link": "https://stackoverflow.com/questions/48292982/randrange-no-implicit-conversion-of-range-into-integer/48293436#48293436", "title": "rand(Range) - no implicit conversion of Range into Integer", "body": "<p>I believe this error is because you are trying to use rand() on objects of your custom class.</p>\n\n<pre><code>`rand': no implicit conversion of Range into Integer (TypeError)\n</code></pre>\n\n<p>This error message clearly mentions that ruby was unable to convert your range into integer. Based on your code snippet, following works and might be what you are looking for.</p>\n\n<pre><code>puts rand(Int.new(1).to_int..Int.new(3).to_int)\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 13091, "user_id": 483266, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a88664c5c8cd526ac9c0638e59db2c0f?s=128&d=identicon&r=PG", "display_name": "Arie Xiao", "link": "https://stackoverflow.com/users/483266/arie-xiao"}, "edited": false, "score": 1, "creation_date": 1516165613, "post_id": 48293681, "comment_id": 83572870, "body": "Thanks for the answer. More specifically, <code>rand</code> is expecting the following 2 methods on <code>Int</code>: <code>-</code> that accepts <code>Int</code> and returns <code>Integer</code>, and <code>+</code> that accepts <code>Integer</code> and returns <code>Int</code>."}, {"owner": {"reputation": 394580, "user_id": 479863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ArUCE.jpg?s=128&g=1", "display_name": "mu is too short", "link": "https://stackoverflow.com/users/479863/mu-is-too-short"}, "reply_to_user": {"reputation": 13091, "user_id": 483266, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a88664c5c8cd526ac9c0638e59db2c0f?s=128&d=identicon&r=PG", "display_name": "Arie Xiao", "link": "https://stackoverflow.com/users/483266/arie-xiao"}, "edited": false, "score": 0, "creation_date": 1516165960, "post_id": 48293681, "comment_id": 83572954, "body": "Generally, <code>a + b</code> should yield something with the same class as <code>a</code> and similarly for <code>a - b</code> (not always but it is a good rule of thumb). I added the <code>to_int</code> calls as that&#39;s the easiest way to open up an <code>Int</code> and it also makes sense for <code>Int</code> to be able to participate in arithmetic with other integer-isn things."}, {"owner": {"reputation": 13091, "user_id": 483266, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a88664c5c8cd526ac9c0638e59db2c0f?s=128&d=identicon&r=PG", "display_name": "Arie Xiao", "link": "https://stackoverflow.com/users/483266/arie-xiao"}, "edited": false, "score": 0, "creation_date": 1516166693, "post_id": 48293681, "comment_id": 83573144, "body": "yes, that makes the interface more general and not specifically for the <code>rand</code>."}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1516178481, "post_id": 48293681, "comment_id": 83578101, "body": "In order to work with <code>rand</code>, <code>-</code> must return the difference as a number (just like <code>Time#-</code> returns a float when given another <code>Time</code>). A working implementation in that sense would be <code>def -(other); num - other.num; end</code> and <code>def +(offset); Int.new(num + offset); end</code>"}, {"owner": {"reputation": 394580, "user_id": 479863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ArUCE.jpg?s=128&g=1", "display_name": "mu is too short", "link": "https://stackoverflow.com/users/479863/mu-is-too-short"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1516215763, "post_id": 48293681, "comment_id": 83601781, "body": "@Stefan But it actually does work when <code>+</code> and <code>-</code> return <code>Int</code>s. I suspect the result is functionally equivalent to <code>r.to_a.sample</code> but there&#39;s no specification and I haven&#39;t examined the MRI source so, again, hand waving."}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1516253108, "post_id": 48293681, "comment_id": 83614388, "body": "@muistooshort you&#39;re right, it does work. But just because <code>Int</code> implements <code>to_int</code>, which allows <code>rand</code> to convert it to an integer."}, {"owner": {"reputation": 394580, "user_id": 479863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ArUCE.jpg?s=128&g=1", "display_name": "mu is too short", "link": "https://stackoverflow.com/users/479863/mu-is-too-short"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1516254193, "post_id": 48293681, "comment_id": 83614743, "body": "@Stefan Right. I&#39;m not disagreeing with you I&#39;m just qualifying my statement because specifications in Ruby generally boil to &quot;what RMI does&quot;. Anyway, looks like the OP went through the source in <a href=\"https://stackoverflow.com/a/48294686/479863\">their answer</a> which is helpful."}], "tags": [], "owner": {"reputation": 394580, "user_id": 479863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ArUCE.jpg?s=128&g=1", "display_name": "mu is too short", "link": "https://stackoverflow.com/users/479863/mu-is-too-short"}, "is_accepted": true, "score": 4, "last_activity_date": 1516216003, "last_edit_date": 1516216003, "creation_date": 1516163778, "answer_id": 48293681, "question_id": 48292982, "link": "https://stackoverflow.com/questions/48292982/randrange-no-implicit-conversion-of-range-into-integer/48293681#48293681", "title": "rand(Range) - no implicit conversion of Range into Integer", "body": "<p>I don't know of any documentation for what specifically <code>Kernel#rand</code> expects from a <code>Range</code> argument but we can get a look at what's going on by overriding <code>respond_to?</code> in your class and then watching as things fall apart:</p>\n\n<pre><code>def respond_to?(m)\n  puts \"They want us to support #{m}\"\n  super\nend\n</code></pre>\n\n<p>Doing that tells us that <code>rand</code> wants to call the <code>#-</code> and <code>#+</code> methods on your <code>Int</code> instances. This does make some sense given that <code>rand(a..b)</code> is designed for working with integers.</p>\n\n<p>So we throw in quick'n'dirty implementations of addition and subtraction:</p>\n\n<pre><code>def -(other)\n  self.class.new(to_int - other.to_int)\nend\n\ndef +(other)\n  self.class.new(to_int + other.to_int)\nend\n</code></pre>\n\n<p>and we start getting rand <code>Int</code>s out of our calls to <code>rand</code>.</p>\n\n<hr>\n\n<p>I'm not sure where (or if) this is documented so you'll have to excuse a bit of hand waving. I normally spend some time rooting around the Ruby source code to answer this sort of question but I lack the time right now.</p>\n"}, {"tags": [], "owner": {"reputation": 13091, "user_id": 483266, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a88664c5c8cd526ac9c0638e59db2c0f?s=128&d=identicon&r=PG", "display_name": "Arie Xiao", "link": "https://stackoverflow.com/users/483266/arie-xiao"}, "is_accepted": false, "score": 3, "last_activity_date": 1516169745, "creation_date": 1516169745, "answer_id": 48294686, "question_id": 48292982, "link": "https://stackoverflow.com/questions/48292982/randrange-no-implicit-conversion-of-range-into-integer/48294686#48294686", "title": "rand(Range) - no implicit conversion of Range into Integer", "body": "<p>To add a bit more to @mu-is-too-short's answer, I checked the source of <code>Random#rand</code> and the following is the current implementation logic for <code>rand(Range)</code>:</p>\n\n<ol>\n<li><p>Get the begin, end, and <code>vmax</code> from the <code>Range</code> object (<a href=\"https://github.com/ruby/ruby/blob/0c2f92daad93c57af1720e3cbafcdcae9bd0cd62/random.c#L1230\" rel=\"nofollow noreferrer\">call <code>range_values</code></a>), where <code>vmax</code> is computed as (<a href=\"https://github.com/ruby/ruby/blob/0c2f92daad93c57af1720e3cbafcdcae9bd0cd62/random.c#L1145\" rel=\"nofollow noreferrer\">call <code>id_minus</code></a>): </p>\n\n<pre><code>vmax = end - begin\n</code></pre>\n\n<p><code>vmax</code> will be used as the upper bound of the random number generation later.</p>\n\n<p><strong>This requires the custom class to have <code>-</code> method defined.</strong></p></li>\n<li><p>Generate a random number based on the type of <code>vmax</code>:</p>\n\n<ul>\n<li><p>If it is not <code>Float</code> and can be coerced to <code>Integer</code> (<a href=\"https://github.com/ruby/ruby/blob/0c2f92daad93c57af1720e3cbafcdcae9bd0cd62/random.c#L1232\" rel=\"nofollow noreferrer\"><code>rb_check_to_int</code></a>), generate a random <code>Integer</code> less than <code>vmax</code>.</p>\n\n<p><strong>In this case, the <code>-</code> method should either return an <code>Integer</code>, or an object which responds to <code>to_int</code> method.</strong></p></li>\n<li><p>If it is <code>Numeric</code> and can be converted to <code>Float</code> with <code>to_f</code>, (<a href=\"https://github.com/ruby/ruby/blob/0c2f92daad93c57af1720e3cbafcdcae9bd0cd62/random.c#L1252\" rel=\"nofollow noreferrer\"><code>rb_check_to_float</code></a>), generate a random <code>Float</code> number less than <code>vmax</code>.</p>\n\n<p><strong>In this case, the <code>-</code> method should return a <code>Numeric</code> number which can be converted to <code>Float</code> with method <code>to_f</code>.</strong></p></li>\n</ul></li>\n<li><p>Add the random number to <code>begin</code> to yield the result (<a href=\"https://github.com/ruby/ruby/blob/0c2f92daad93c57af1720e3cbafcdcae9bd0cd62/random.c#L1294\" rel=\"nofollow noreferrer\">call <code>id_add</code></a>).</p>\n\n<p><strong>This requires the custom class to have <code>+</code> method defined, which accepts the result of the random number generated in step 2 (either <code>Integer</code>, or <code>Float</code>) and returns the final result for <code>rand</code>.</strong></p></li>\n</ol>\n"}], "owner": {"reputation": 13091, "user_id": 483266, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a88664c5c8cd526ac9c0638e59db2c0f?s=128&d=identicon&r=PG", "display_name": "Arie Xiao", "link": "https://stackoverflow.com/users/483266/arie-xiao"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1223, "favorite_count": 1, "accepted_answer_id": 48293681, "answer_count": 3, "score": 5, "last_activity_date": 1516216003, "creation_date": 1516158474, "question_id": 48292982, "link": "https://stackoverflow.com/questions/48292982/randrange-no-implicit-conversion-of-range-into-integer", "title": "rand(Range) - no implicit conversion of Range into Integer", "body": "<p>A follow up on the question <a href=\"https://stackoverflow.com/questions/48292568/how-to-create-a-random-time-between-a-range\">How to create a random time between a range\n</a>.</p>\n\n<p><code>Kernel#rand</code> works with <code>Time</code> range:</p>\n\n<pre><code>require 'time'\nrand(Time.parse('9 am')..Time.parse('11:30 am'))\n</code></pre>\n\n<p>But when I tried with a custom class, I ended up with the error: </p>\n\n<blockquote>\n  <p>`rand': no implicit conversion of Range into Integer (TypeError)</p>\n</blockquote>\n\n<pre><code>class Int\n  include Comparable\n\n  attr_reader :num\n\n  def initialize(num)\n    @num = num\n  end\n\n  def succ\n    Int.new(num + 1)\n  end\n\n  def &lt;=&gt;(other)\n    num &lt;=&gt; other.num\n  end\n\n  def to_s\n    \"Int(#{num})\"\n  end\n\n  def to_int\n    @num\n  end\n\n  alias_method :inspect, :to_s\nend\n\nputs rand(Int.new(1)..Int.new(3))\n</code></pre>\n\n<p>Why? What am I missing in the custom class? Can we use such a custom class in <code>rand(Range)</code>?</p>\n"}, {"tags": ["ruby"], "answers": [{"comments": [{"owner": {"reputation": 9030, "user_id": 5101476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JCQrl.jpg?s=128&g=1", "display_name": "ice\u30c4", "link": "https://stackoverflow.com/users/5101476/ice%e3%83%84"}, "edited": false, "score": 1, "creation_date": 1516155650, "post_id": 48292641, "comment_id": 83570529, "body": "<code>require &#39;time&#39;</code> required."}, {"owner": {"reputation": 13091, "user_id": 483266, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a88664c5c8cd526ac9c0638e59db2c0f?s=128&d=identicon&r=PG", "display_name": "Arie Xiao", "link": "https://stackoverflow.com/users/483266/arie-xiao"}, "edited": false, "score": 1, "creation_date": 1516157981, "post_id": 48292641, "comment_id": 83570988, "body": "A bit curious why this works. I tried with some custom class other than <code>Time</code>, like <code>rand(Int.new(1)..Int.new(3))</code> where <code>Int</code> is a class with <code>succ</code> and <code>&lt;=&gt;</code> methods, but it always ends up with <code>&#39;rand&#39;: no implicit conversion of Range into Integer</code>."}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "reply_to_user": {"reputation": 13091, "user_id": 483266, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a88664c5c8cd526ac9c0638e59db2c0f?s=128&d=identicon&r=PG", "display_name": "Arie Xiao", "link": "https://stackoverflow.com/users/483266/arie-xiao"}, "edited": false, "score": 1, "creation_date": 1516177668, "post_id": 48292641, "comment_id": 83577664, "body": "@ArieXiao since ranges can have a large (or even infinite) number of elements, <code>rand</code> <i>calculates</i> the new value using only the beginning and end of the range. It first determines the difference via <code>Time.parse(&#39;11:30 am&#39;) - Time.parse(&#39;9 am&#39;)</code> which is <code>9000.0</code>. It then calculates a random offset between 0 and that difference, e.g. <code>rand * 9000.0</code> which could return <code>1234.5</code>. Finally that offset is added back to the beginning of the range, i.e. <code>Time.parse(&#39;9 am&#39;) + 1234.5</code> which gives the final value. In short: your custom class must also respond to <code>+</code> and <code>-</code> the way <code>Time</code> does."}], "tags": [], "owner": {"reputation": 4690, "user_id": 1937435, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/YyN37.jpg?s=128&g=1", "display_name": "Josh Brody", "link": "https://stackoverflow.com/users/1937435/josh-brody"}, "is_accepted": false, "score": 9, "last_activity_date": 1516155110, "creation_date": 1516155110, "answer_id": 48292641, "question_id": 48292568, "link": "https://stackoverflow.com/questions/48292568/how-to-create-a-random-time-within-a-range/48292641#48292641", "title": "How to create a random time within a range", "body": "<p>use <code>rand()</code></p>\n\n<p><code>rand(Time.parse('9 am')..Time.parse('11:30 am'))</code></p>\n"}], "owner": {"reputation": 235600, "user_id": 39677, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/77aa7bc1ace6e4b0b49a2102e4fa4059?s=128&d=identicon&r=PG", "display_name": "Blankman", "link": "https://stackoverflow.com/users/39677/blankman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 89, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1516158485, "creation_date": 1516154433, "last_edit_date": 1516158485, "question_id": 48292568, "link": "https://stackoverflow.com/questions/48292568/how-to-create-a-random-time-within-a-range", "title": "How to create a random time within a range", "body": "<p>How can I create a random time within a time interval? I want to create a random time between 9am and 11:30am.</p>\n"}, {"tags": ["arrays", "ruby"], "comments": [{"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1516159919, "post_id": 48292076, "comment_id": 83571388, "body": "<code>reset = sequence</code>. Of course, whatever you do to <code>sequence</code> is done to <code>reset</code>."}], "answers": [{"tags": [], "owner": {"reputation": 26704, "user_id": 1202830, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4bd22084046f375b15ff56ffae8237b0?s=128&d=identicon&r=PG", "display_name": "Michael Geary", "link": "https://stackoverflow.com/users/1202830/michael-geary"}, "is_accepted": false, "score": 3, "last_activity_date": 1516152249, "last_edit_date": 1516152249, "creation_date": 1516150672, "answer_id": 48292145, "question_id": 48292076, "link": "https://stackoverflow.com/questions/48292076/getting-messed-with-wrong-array/48292145#48292145", "title": "Getting messed with wrong array", "body": "<p><code>reset</code> and <code>sequence</code> are <em>the same array</em>. The <code>=</code> operator doesn't copy the contents of an array or other object; it creates a new reference to the same array.</p>\n\n<p>For example, try this in <code>irb</code>:</p>\n\n<pre><code>irb(main):001:0&gt; a = [ 10, 20 ]\n=&gt; [10, 20]\nirb(main):002:0&gt; b = a\n=&gt; [10, 20]\nirb(main):003:0&gt; a\n=&gt; [10, 20]\nirb(main):004:0&gt; b\n=&gt; [10, 20]\nirb(main):005:0&gt; a.push( 30 )\n=&gt; [10, 20, 30]\nirb(main):006:0&gt; b.push( 40 )\n=&gt; [10, 20, 30, 40]\nirb(main):007:0&gt; a\n=&gt; [10, 20, 30, 40]\nirb(main):008:0&gt; b\n=&gt; [10, 20, 30, 40]\n</code></pre>\n\n<p>The same is true when you pass an array or any object in a method call. The method doesn't get a separate copy of the object data; it receives a reference to the same object:</p>\n\n<pre><code>irb(main):001:0&gt; a = [ 10, 20 ]\n=&gt; [10, 20]\nirb(main):002:0&gt; def foo( x );  x.push( 30 );  end\n=&gt; :foo\nirb(main):003:0&gt; foo( a )\n=&gt; [10, 20, 30]\nirb(main):004:0&gt; a\n=&gt; [10, 20, 30]\n</code></pre>\n\n<p>Note that <code>foo</code> didn't just modify its <code>x</code> parameter, it also modified the <code>a</code> that was passed into it, because <code>x</code> and <code>a</code> are both references to the same array.</p>\n\n<p>If you want to make a copy of an array so that operations on it are independent of the original, you can use <code>dup</code> or <code>clone</code>:</p>\n\n<pre><code>irb(main):001:0&gt; a = [ 10, 20 ]\n=&gt; [10, 20]\nirb(main):002:0&gt; b = a.clone\n=&gt; [10, 20]\nirb(main):003:0&gt; a\n=&gt; [10, 20]\nirb(main):004:0&gt; b\n=&gt; [10, 20]\nirb(main):005:0&gt; a.push( 30 )\n=&gt; [10, 20, 30]\nirb(main):006:0&gt; b.push( 40 )\n=&gt; [10, 20, 40]\nirb(main):007:0&gt; a\n=&gt; [10, 20, 30]\nirb(main):008:0&gt; b\n=&gt; [10, 20, 40]\n</code></pre>\n\n<p>Many languages work like this; the assignment operator or a function parameter doesn't copy any data but merely creates a new reference to the same data.</p>\n\n<p>Here's the same example in Python:</p>\n\n<pre><code>&gt;&gt;&gt; a = [ 10, 20 ]\n&gt;&gt;&gt; b = a\n&gt;&gt;&gt; a\n[10, 20]\n&gt;&gt;&gt; b\n[10, 20]\n&gt;&gt;&gt; a.append( 30 )\n&gt;&gt;&gt; b.append( 40 )\n&gt;&gt;&gt; a\n[10, 20, 30, 40]\n&gt;&gt;&gt; b\n[10, 20, 30, 40]\n</code></pre>\n\n<p>and in JavaScript:</p>\n\n<pre><code>a = [ 10, 20 ]\n  (2) [10, 20]\nb = a\n  (2) [10, 20]\na.push( 30 )  // .push() returns the array length\n  3\nb.push( 40 )\n  4\na\n  (4) [10, 20, 30, 40]\nb\n  (4) [10, 20, 30, 40]\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 51, "user_id": 8459341, "user_type": "registered", "accept_rate": 0, "profile_image": "https://graph.facebook.com/10155256575038283/picture?type=large", "display_name": "Aaron Godhard", "link": "https://stackoverflow.com/users/8459341/aaron-godhard"}, "edited": false, "score": 0, "creation_date": 1516219653, "post_id": 48292567, "comment_id": 83603868, "body": "That information...is nowhere to be found in the study material I was provided.  So is there a non-brute force way to reset an especially large array after deleting one element?"}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "reply_to_user": {"reputation": 51, "user_id": 8459341, "user_type": "registered", "accept_rate": 0, "profile_image": "https://graph.facebook.com/10155256575038283/picture?type=large", "display_name": "Aaron Godhard", "link": "https://stackoverflow.com/users/8459341/aaron-godhard"}, "edited": false, "score": 0, "creation_date": 1516222902, "post_id": 48292567, "comment_id": 83605547, "body": "If you wish to do that you would normally use a method that creates a new array without <i>mutating</i> (changing) the original array. For example, <code>arr1 = [1,2,3]; arr2 = arr1.reject { |e| e == 2 } #=&gt; [1,3]</code> leaves <code>arr1</code> unchanged (<code>[1,2,3]</code>). See <a href=\"http://ruby-doc.org/core-2.4.0/Array.html#method-i-reject\" rel=\"nofollow noreferrer\">Array#reject</a>. If you delete elements from <code>arr1</code> (mutating that array) and later want to change <code>arr1</code> back to the way it was you&#39;d have to keep track of the values and their indices that were deleted from <code>arr1</code>, which is doable but messy. Does that answer your question?"}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "reply_to_user": {"reputation": 51, "user_id": 8459341, "user_type": "registered", "accept_rate": 0, "profile_image": "https://graph.facebook.com/10155256575038283/picture?type=large", "display_name": "Aaron Godhard", "link": "https://stackoverflow.com/users/8459341/aaron-godhard"}, "edited": false, "score": 0, "creation_date": 1516223107, "post_id": 48292567, "comment_id": 83605653, "body": "You said my answer was not contained in your study material, but does it make sense? Does it answer your question?"}], "tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": false, "score": 0, "last_activity_date": 1516223470, "last_edit_date": 1516223470, "creation_date": 1516154432, "answer_id": 48292567, "question_id": 48292076, "link": "https://stackoverflow.com/questions/48292076/getting-messed-with-wrong-array/48292567#48292567", "title": "Getting messed with wrong array", "body": "<p>Suppose we write</p>\n\n<pre><code>sequence = [1, 1, 1, 2, 3]\nreset = sequence\n  #=&gt; [1, 1, 1, 2, 3]\n</code></pre>\n\n<p>The variables <code>sequence</code> and <code>reset</code> do not only hold the same value, they hold the same object:</p>\n\n<pre><code>sequence.object_id\n  #=&gt; 4044000\nreset.object_id\n  #=&gt; 4044000\n</code></pre>\n\n<p>Note that variables do not have object id's; it is their values--Ruby objects-- that have unique ids (see <a href=\"http://ruby-doc.org/core-2.4.0/Object.html#method-i-object_id\" rel=\"nofollow noreferrer\">Object#object_id</a>). When we write <code>sequence.object_id</code>, <code>sequence</code> returns <code>[1, 1, 1, 2, 3]</code> and then <code>[1, 1, 1, 2, 3].object_id #=&gt; 4044000</code> is returned.</p>\n\n<p>If the object <code>[1, 1, 1, 2, 3]</code> is changed the values of the two variables will both equal the changed object.</p>\n\n<pre><code>sequence.replace [1, 4]\n  #=&gt; [1, 4]\nsequence.object_id\n  #=&gt; 4044000\nreset\n  #=&gt; [1, 4]\nreset.object_id\n  #=&gt; 4044000\n</code></pre>\n\n<p>On the other hand, if we set either of these variables to equal a difference object (which will have a different object id), the value of the other variable is unaffected.</p>\n\n<pre><code>sequence = [99, 31]\nsequence.object_id\n  #=&gt; 5564720\nreset\n  #=&gt; [1, 4]\nreset.object_id\n  #=&gt; 4044000\n</code></pre>\n"}], "owner": {"reputation": 51, "user_id": 8459341, "user_type": "registered", "accept_rate": 0, "profile_image": "https://graph.facebook.com/10155256575038283/picture?type=large", "display_name": "Aaron Godhard", "link": "https://stackoverflow.com/users/8459341/aaron-godhard"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 69, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1516223470, "creation_date": 1516150124, "last_edit_date": 1516159774, "question_id": 48292076, "link": "https://stackoverflow.com/questions/48292076/getting-messed-with-wrong-array", "title": "Getting messed with wrong array", "body": "<p>I saved an array <code>sequence</code> to <code>reset</code>. I deleted each element from <code>sequence</code>, performing an operation, then reset <code>sequence</code> to its former state.</p>\n\n<pre><code>reset = sequence\n(0..sequence.length).each do |i|\n  puts \"Sequence #{sequence}, index is #{i}.  Deleting #{sequence[i]}\"\n  sequence.delete_at(i)\n  puts \"New sequence is #{sequence.inspect}, sorted makes #{sequence.sort}, unique makes #{sequence.uniq}\"\n  return true if sequence.sort == sequence &amp;&amp; sequence.uniq == sequence\n  puts \"This is reset before the sequence = reset: #{reset.inspect}\"\n  sequence = reset\n  puts \"Resetting sequence. Reset is #{reset.inspect}, sequence is #{sequence.inspect}\"\n  dummy = gets.chomp\nend\n</code></pre>\n\n<p>Then, what happened to <code>sequence</code> also happened to <code>reset</code>. Here is some output:</p>\n\n<pre><code>Sequence [1, 1, 1, 2, 3], index is 0.  Deleting 1\nNew sequence is [1, 1, 2, 3], sorted makes [1, 1, 2, 3], unique makes [1, 2, 3]\nThis is reset before the sequence = reset: [1, 1, 2, 3]\nResetting sequence. Reset is [1, 1, 2, 3], sequence is [1, 1, 2, 3]\n</code></pre>\n\n<p>It's mucking about <code>reset</code> when I only commanded it to delete from <code>sequence</code>. It's not the case that <code>reset = sequence</code> is inside the loop. What gives? The loop was supposed to break at <code>oldarray.size</code>, inside which it was pushing elements into a new array. But inexplicably, it pushed the same numbers into the same array as well, thereby creating an infinite loop.</p>\n"}, {"tags": ["php", "ruby-on-rails", "ruby", "rest", "rest-client"], "comments": [{"owner": {"reputation": 2946, "user_id": 1430057, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/Tbizp.jpg?s=128&g=1", "display_name": "Subash", "link": "https://stackoverflow.com/users/1430057/subash"}, "edited": false, "score": 0, "creation_date": 1516150683, "post_id": 48292057, "comment_id": 83569400, "body": "Can you post what code you tried with and what errors are you getting and the <code>curl_set_opt</code> are just setting options on the request, with <code>rest_client</code> you&#39;d be doing same thing like setting the type of request, post body etc..."}], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 7232238, "user_type": "registered", "profile_image": "https://graph.facebook.com/10154049068802647/picture?type=large", "display_name": "Conner Hiatt", "link": "https://stackoverflow.com/users/7232238/conner-hiatt"}, "edited": false, "score": 0, "creation_date": 1516821818, "post_id": 48292262, "comment_id": 83850891, "body": "Thank you all. That was exactly what I needed!  I now understand PHP a bit better as well."}], "tags": [], "owner": {"reputation": 3828, "user_id": 2137417, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/792918317c06a7c76f7f88390d003d93?s=128&d=identicon&r=PG", "display_name": "jstuartmilne", "link": "https://stackoverflow.com/users/2137417/jstuartmilne"}, "is_accepted": true, "score": 4, "last_activity_date": 1516152263, "last_edit_date": 1516152263, "creation_date": 1516151540, "answer_id": 48292262, "question_id": 48292057, "link": "https://stackoverflow.com/questions/48292057/converting-a-php-curl-request-to-ruby/48292262#48292262", "title": "Converting a PHP cURL request to Ruby", "body": "<p>Apparently you want to make a post request. more or less like this would be the translation youll have to adapt the headers</p>\n\n<pre><code>require 'net/http'\nrequire 'uri'\nrequire 'json'\n\nuri = URI.parse('https://api-v1.liondesk.com/')\n\nheader = {\n  'Content-Type':  'text/json',\n  'X-LionDesk-Id': 'yourId'\n}\ndata = {  \n  action:              'NewSubmission',\n  firstname:           'Joe',\n  lastname:            'Smith',\n  comments:            'API Test',\n  phone:               '555-1212',\n  email:               'joe@testaddress.com',\n  street_address:      '5937 Darwin Court',\n  city:                'San Diego',\n  state:               'CA',\n  zip:                 '92025',\n  assigned_user_name:  'Joe Smith',\n  assigned_user_email: 'joeassigned@testaddress.com',\n  assigned_user_phone: '760-123-1234',\n  tag:                 'Buyer,92025,Listings Landing Page',\n  sourcename:          'Facebook Ad 1',\n  contactid:           '12345',\n  siteid:              '1'\n}\n\nhttp = Net::HTTP.new(uri.host, uri.port)\nrequest = Net::HTTP::Post.new(uri.request_uri, header)\nrequest.body = data.to_json\n\nresponse = http.request(request)\n</code></pre>\n\n<p>Hope it helps. Take a look at this for reference <a href=\"https://ruby-doc.org/stdlib-2.1.1/libdoc/net/http/rdoc/Net/HTTP.html\" rel=\"nofollow noreferrer\">https://ruby-doc.org/stdlib-2.1.1/libdoc/net/http/rdoc/Net/HTTP.html</a></p>\n"}], "owner": {"reputation": 3, "user_id": 7232238, "user_type": "registered", "profile_image": "https://graph.facebook.com/10154049068802647/picture?type=large", "display_name": "Conner Hiatt", "link": "https://stackoverflow.com/users/7232238/conner-hiatt"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 632, "favorite_count": 0, "accepted_answer_id": 48292262, "answer_count": 1, "score": 0, "last_activity_date": 1516152263, "creation_date": 1516149903, "question_id": 48292057, "link": "https://stackoverflow.com/questions/48292057/converting-a-php-curl-request-to-ruby", "title": "Converting a PHP cURL request to Ruby", "body": "<p>I'm attempting to send a NewSubmission to a CRM called LionDesk. The sample NewSubmission code is written in PHP and I need to convert this into Ruby code since I will be integrating this into an existing Rails application.</p>\n\n<p>Here is the code they provide via their docs: </p>\n\n<pre><code>$url = 'https://api-v1.liondesk.com//';\n$data = array(\n    'action' =&gt; 'NewSubmission',\n    'firstname' =&gt; 'Joe',\n    'lastname' =&gt; 'Smith',\n    'comments' =&gt; 'API Test',\n    'phone' =&gt; '555-1212',\n    'email' =&gt; 'joe@testaddress.com',\n    'street_address' =&gt; '5937 Darwin Court',\n    'city' =&gt; 'San Diego',\n    'state' =&gt; 'CA',\n    'zip' =&gt; '92025',\n    'assigned_user_name' =&gt; 'Joe Smith',\n    'assigned_user_email' =&gt; 'joeassigned@testaddress.com',\n    'assigned_user_phone' =&gt; '760-123-1234',\n    'tag' =&gt; 'Buyer,92025,Listings Landing Page',\n    'sourcename' =&gt; 'Facebook Ad 1',\n    'contactid' =&gt; '12345',\n    'siteid' =&gt; '1'\n);\n$content = json_encode($data);\n\n$ch = curl_init();\ncurl_setopt($ch, CURLOPT_URL, $url);\ncurl_setopt($ch, CURLOPT_POST, TRUE);\ncurl_setopt($ch, CURLOPT_POSTFIELDS, $content);\ncurl_setopt($ch, CURLOPT_USERPWD, $APIKEY . \":\" . \"\" );  \ncurl_setopt($ch, CURLOPT_HTTPHEADER, array(\n'Content-Type: application/json',\n'X-LionDesk-Id: '.$USERKEY\n));\ncurl_setopt($ch, CURLOPT_RETURNTRANSFER, TRUE);\n$result = curl_exec($ch);\n$res = json_decode($result);\nprint_r($res);\ncurl_close($ch);\n</code></pre>\n\n<p>Link to their docs: <a href=\"https://api.liondesk.com/docs.html\" rel=\"nofollow noreferrer\">https://api.liondesk.com/docs.html</a></p>\n\n<p>Any help would be greatly appreciated.\nI've attempted this with gems like 'rest-client' and 'rack', but am really having difficulties interpreting the php code from <code>$ch = curl_init();</code> on downward.</p>\n"}, {"tags": ["ruby", "oracle", "activerecord", "sqlplus", "oracle-call-interface"], "answers": [{"comments": [{"owner": {"reputation": 73, "user_id": 2073847, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/c5b9169e4dd1ae06498b5078e9e23d33?s=128&d=identicon&r=PG", "display_name": "krazyito65", "link": "https://stackoverflow.com/users/2073847/krazyito65"}, "edited": false, "score": 0, "creation_date": 1516147507, "post_id": 48291749, "comment_id": 83568531, "body": "The result is 0, not a string of the output."}, {"owner": {"reputation": 4690, "user_id": 1937435, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/YyN37.jpg?s=128&g=1", "display_name": "Josh Brody", "link": "https://stackoverflow.com/users/1937435/josh-brody"}, "reply_to_user": {"reputation": 73, "user_id": 2073847, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/c5b9169e4dd1ae06498b5078e9e23d33?s=128&d=identicon&r=PG", "display_name": "krazyito65", "link": "https://stackoverflow.com/users/2073847/krazyito65"}, "edited": false, "score": 0, "creation_date": 1516147597, "post_id": 48291749, "comment_id": 83568558, "body": "hitting <code>result.methods</code> will lead you on the path to the correct method you&#39;re looking for, if at all possible. Your question was relatively vague and without a verifiable working example it&#39;s very hard to help you get the output you&#39;re looking for."}, {"owner": {"reputation": 73, "user_id": 2073847, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/c5b9169e4dd1ae06498b5078e9e23d33?s=128&d=identicon&r=PG", "display_name": "krazyito65", "link": "https://stackoverflow.com/users/2073847/krazyito65"}, "edited": false, "score": 0, "creation_date": 1516148284, "post_id": 48291749, "comment_id": 83568762, "body": "I mean, I&#39;m not sure how I can clear it up any more.  I literally just want the output of the statements I&#39;m running.  The same output that I would normally get for running a script through SQLplus or SQL developer.   When I run <code>results.methods</code> i get results for integers.  I don&#39;t think I&#39;m accessing the information I want correctly using this."}, {"owner": {"reputation": 4690, "user_id": 1937435, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/YyN37.jpg?s=128&g=1", "display_name": "Josh Brody", "link": "https://stackoverflow.com/users/1937435/josh-brody"}, "reply_to_user": {"reputation": 73, "user_id": 2073847, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/c5b9169e4dd1ae06498b5078e9e23d33?s=128&d=identicon&r=PG", "display_name": "krazyito65", "link": "https://stackoverflow.com/users/2073847/krazyito65"}, "edited": false, "score": 0, "creation_date": 1516148650, "post_id": 48291749, "comment_id": 83568858, "body": "Try firing <code>ActiveRecord::Base.logger = Logger.new(STDOUT); ActiveRecord::Base.logger.level = 0;</code> prior to running the query, and then fire the query. Does that return what you&#39;re looking for? If it does, you could capture the output of the log."}, {"owner": {"reputation": 73, "user_id": 2073847, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/c5b9169e4dd1ae06498b5078e9e23d33?s=128&d=identicon&r=PG", "display_name": "krazyito65", "link": "https://stackoverflow.com/users/2073847/krazyito65"}, "edited": false, "score": 0, "creation_date": 1516148897, "post_id": 48291749, "comment_id": 83568920, "body": "That just outputs the contents of the script in pink letters, but no actual results output."}], "tags": [], "owner": {"reputation": 4690, "user_id": 1937435, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/YyN37.jpg?s=128&g=1", "display_name": "Josh Brody", "link": "https://stackoverflow.com/users/1937435/josh-brody"}, "is_accepted": false, "score": 0, "last_activity_date": 1516169168, "last_edit_date": 1516169168, "creation_date": 1516147495, "answer_id": 48291749, "question_id": 48291522, "link": "https://stackoverflow.com/questions/48291522/how-can-i-get-the-output-of-a-sql-script-using-ruby-active-record/48291749#48291749", "title": "How can I get the output of a sql script using Ruby Active Record?", "body": "<pre><code>puts ActiveRecord::Base.connection.execute(IO.read(\"#{file_path}\"))\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 73, "user_id": 2073847, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/c5b9169e4dd1ae06498b5078e9e23d33?s=128&d=identicon&r=PG", "display_name": "krazyito65", "link": "https://stackoverflow.com/users/2073847/krazyito65"}, "is_accepted": false, "score": 0, "last_activity_date": 1516312218, "creation_date": 1516312218, "answer_id": 48330899, "question_id": 48291522, "link": "https://stackoverflow.com/questions/48291522/how-can-i-get-the-output-of-a-sql-script-using-ruby-active-record/48330899#48330899", "title": "How can I get the output of a sql script using Ruby Active Record?", "body": "<p>I think I've determined that there is no way to get the information I'm trying to get using ActiveRecord, and will try to look into other options or keep using sqlplus. </p>\n"}], "owner": {"reputation": 73, "user_id": 2073847, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/c5b9169e4dd1ae06498b5078e9e23d33?s=128&d=identicon&r=PG", "display_name": "krazyito65", "link": "https://stackoverflow.com/users/2073847/krazyito65"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 146, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1516312218, "creation_date": 1516145791, "last_edit_date": 1592644375, "question_id": 48291522, "link": "https://stackoverflow.com/questions/48291522/how-can-i-get-the-output-of-a-sql-script-using-ruby-active-record", "title": "How can I get the output of a sql script using Ruby Active Record?", "body": "<p>Notes:  Using Ruby 2.4, oci8 / oracle enhanced adapter.</p>\n<p>I was using sqlplus to execute some DDL / DML I have. Basically this:</p>\n<pre><code>system &quot;echo / | sqlplus  #{db.username}/\\&quot;#{db.password}\\&quot;@#{db.host}:#{db.port}/#{db.sid} @\\&quot;#{file_to_execute}\\&quot; &gt; #{@SQLOUT_LOG}&quot;\n</code></pre>\n<p>I want to move away from using sqlplus and use active record instead.  So I got this working:</p>\n<pre><code>ActiveRecord::Base.connection.execute(IO.read(&quot;#{file_path}&quot;))\n</code></pre>\n<p>And that does basically the same thing, except:  I cannot access the 'script output' that I got from SQLplus (or even SQLDeveloper).  This 'execute' function returns table rows, which I usually don't care about or need.</p>\n<p>I just want a string of the output result of the script after I run it. Example:</p>\n<blockquote>\n<p>Procedure MYPROCEDURE compiled</p>\n<p>3 rows inserted.</p>\n</blockquote>\n<p>etc....</p>\n"}, {"tags": ["ruby-on-rails", "json", "ruby", "api", "parameters"], "comments": [{"owner": {"reputation": 535, "user_id": 3134957, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qutnS.jpg?s=128&g=1", "display_name": "Anurag Aryan", "link": "https://stackoverflow.com/users/3134957/anurag-aryan"}, "edited": false, "score": 2, "creation_date": 1516143046, "post_id": 48291065, "comment_id": 83567251, "body": "Always try before asking any question, if it works for you well and good, if it doesn&#39;t, show the wrong output or the error you&#39;re getting."}, {"owner": {"reputation": 2946, "user_id": 1430057, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/Tbizp.jpg?s=128&g=1", "display_name": "Subash", "link": "https://stackoverflow.com/users/1430057/subash"}, "edited": false, "score": 2, "creation_date": 1516143142, "post_id": 48291065, "comment_id": 83567285, "body": "Yes, it looks fine to me so always try before posting a question"}, {"owner": {"reputation": 708, "user_id": 8005612, "user_type": "registered", "accept_rate": 31, "profile_image": "https://www.gravatar.com/avatar/fe32b531eb7d09e29b64d71d392ba9fc?s=128&d=identicon&r=PG&f=1", "display_name": "jungleMan", "link": "https://stackoverflow.com/users/8005612/jungleman"}, "edited": false, "score": 0, "creation_date": 1516236893, "post_id": 48291065, "comment_id": 83610388, "body": "I get undefined method `[]&#39; for nil:NilClass when I use the above"}], "answers": [{"tags": [], "owner": {"reputation": 94, "user_id": 5187790, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LshIU.jpg?s=128&g=1", "display_name": "yusefu", "link": "https://stackoverflow.com/users/5187790/yusefu"}, "is_accepted": true, "score": 1, "last_activity_date": 1516158090, "creation_date": 1516158090, "answer_id": 48292941, "question_id": 48291065, "link": "https://stackoverflow.com/questions/48291065/how-do-i-access-the-parameters-from-json-api-in-rails/48292941#48292941", "title": "How do I access the parameters from json API in Rails?", "body": "<p>If your Hash name is Parameters</p>\n\n<pre><code>    Parameters['data']['attributes']['name'] # \"An event\" \n    Parameters['data']['relationships']['calendar']['data']['id'] # \"685\"\n</code></pre>\n\n<p>if it's params, then</p>\n\n<pre><code>    params['data']['attributes']['name'] # \"An event\" \n    params['data']['relationships']['calendar']['data']['id'] # \"685\"\n</code></pre>\n\n<p>will access the attributes.</p>\n"}], "owner": {"reputation": 708, "user_id": 8005612, "user_type": "registered", "accept_rate": 31, "profile_image": "https://www.gravatar.com/avatar/fe32b531eb7d09e29b64d71d392ba9fc?s=128&d=identicon&r=PG&f=1", "display_name": "jungleMan", "link": "https://stackoverflow.com/users/8005612/jungleman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 88, "favorite_count": 0, "closed_date": 1516179187, "accepted_answer_id": 48292941, "answer_count": 1, "score": -1, "last_activity_date": 1516158090, "creation_date": 1516142827, "question_id": 48291065, "link": "https://stackoverflow.com/questions/48291065/how-do-i-access-the-parameters-from-json-api-in-rails", "closed_reason": "Needs details or clarity", "title": "How do I access the parameters from json API in Rails?", "body": "<p>My rails app is receiving the following from the json. How do I access the name key of attributes and the calendar id in Ruby.</p>\n\n<pre><code> Parameters: {\"data\"=&gt;{\"type\"=&gt;\"user-events\", \"attributes\"=&gt;{\"name\"=&gt;\"An event\", \"location\"=&gt;\"University of Illinois at Urbna-Champaign\", \"notes\"=&gt;\"Testing my eventf\\n\", \"all-day\"=&gt;false, \"recurring\"=&gt;false, \"sunday\"=&gt;false, \"monday\"=&gt;false, \"tuesday\"=&gt;false, \"wednesday\"=&gt;false, \"thursday\"=&gt;false, \"friday\"=&gt;false, \"saturday\"=&gt;false, \"start-date\"=&gt;\"01-16-2018\", \"stop-date\"=&gt;\"01-16-2018\", \"start-time\"=&gt;\"04:32PM\", \"stop-time\"=&gt;\"05:32PM\"}, \"relationships\"=&gt;{\"calendar\"=&gt;{\"data\"=&gt;{\"type\"=&gt;\"calendars\", \"id\"=&gt;\"685\"}}}}}\n</code></pre>\n\n<p>Do I use the code below to access the name attribute ?</p>\n\n<pre><code> params[:data][:attributes][:name] \n</code></pre>\n\n<p>Also, do I use the following to access the id for the calendars ?</p>\n\n<pre><code>params[:data][:relationships][:calendar][:data][:id]\n</code></pre>\n\n<p>Thanks in advance for your help</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "answers": [{"comments": [{"owner": {"reputation": 49, "user_id": 9226704, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/f4a243fe2d93e3ea48f43954ee63c045?s=128&d=identicon&r=PG&f=1", "display_name": "JOJO", "link": "https://stackoverflow.com/users/9226704/jojo"}, "edited": false, "score": 0, "creation_date": 1516195244, "post_id": 48291011, "comment_id": 83588789, "body": "THANKS ALOT ...it works well in the console but whenever I call it in the view i get something like this #&lt;Post::ActiveRecord_Relation:0x7b34920&gt; It calls the object itself ... and I tried current_user.feed ,,, User.find(params[:id]).feed and I get the same"}, {"owner": {"reputation": 102358, "user_id": 15245, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/9a2a53db8e9b4476038c94a64b32833f?s=128&d=identicon&r=PG", "display_name": "Ryan Bigg", "link": "https://stackoverflow.com/users/15245/ryan-bigg"}, "reply_to_user": {"reputation": 49, "user_id": 9226704, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/f4a243fe2d93e3ea48f43954ee63c045?s=128&d=identicon&r=PG&f=1", "display_name": "JOJO", "link": "https://stackoverflow.com/users/9226704/jojo"}, "edited": false, "score": 0, "creation_date": 1516240136, "post_id": 48291011, "comment_id": 83611139, "body": "You will need to iterate through that object: <code>&lt;% user.feed.each do |post| %&gt;</code>..."}], "tags": [], "owner": {"reputation": 102358, "user_id": 15245, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/9a2a53db8e9b4476038c94a64b32833f?s=128&d=identicon&r=PG", "display_name": "Ryan Bigg", "link": "https://stackoverflow.com/users/15245/ryan-bigg"}, "is_accepted": true, "score": 0, "last_activity_date": 1516142559, "creation_date": 1516142559, "answer_id": 48291011, "question_id": 48290900, "link": "https://stackoverflow.com/questions/48290900/how-to-display-posts-for-people-you-follow/48291011#48291011", "title": "How to display posts for people you follow?", "body": "<p>I believe you already have the answer in your code.</p>\n\n<p>The <code>User#feed</code> method will let you do it:</p>\n\n<pre><code>user = User.first\nuser.feed # =&gt; [&lt;posts from the users that you follow&gt;]\n</code></pre>\n"}], "owner": {"reputation": 49, "user_id": 9226704, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/f4a243fe2d93e3ea48f43954ee63c045?s=128&d=identicon&r=PG&f=1", "display_name": "JOJO", "link": "https://stackoverflow.com/users/9226704/jojo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 67, "favorite_count": 0, "accepted_answer_id": 48291011, "answer_count": 1, "score": 1, "last_activity_date": 1516160733, "creation_date": 1516141965, "last_edit_date": 1516160733, "question_id": 48290900, "link": "https://stackoverflow.com/questions/48290900/how-to-display-posts-for-people-you-follow", "title": "How to display posts for people you follow?", "body": "<p>I am new to rails but after i followed michael hartl rails I was wondering how to view posts for people you follow ?   </p>\n\n<p><strong>User Model</strong></p>\n\n<pre><code> class User &lt; ActiveRecord::Base   # Include default devise modules. Others available are:   # :confirmable, :lockable, :timeoutable and :omniauthable   devise :database_authenticatable, :registerable,\n         :recoverable, :rememberable, :trackable, :validatable\n    has_many :posts, dependent: :destroy\n    has_many :active_relationships, class_name:  \"Relationship\",\n                                  foreign_key: \"follower_id\",\n                                  dependent:   :destroy\n    has_many :passive_relationships, class_name:  \"Relationship\",\n                                   foreign_key: \"followed_id\",\n                                   dependent:   :destroy\n\n    has_many :following, through: :active_relationships, source: :followed\n    has_many :followers, through: :passive_relationships, source: :follower\n\n\n  def feed\n    following_ids = \"SELECT followed_id FROM relationships\n                     WHERE  follower_id = :user_id\"\n    Post.where(\"user_id IN (#{following_ids})\n                     OR user_id = :user_id\", user_id: id)   end\n    def follow(other)\n    active_relationships.create(followed_id: other.id)   end   def unfollow(other)\n    active_relationships.find_by(followed_id: other.id).destroy   end   def following?(other)\n     following.include?(other)    end\n</code></pre>\n\n<p><strong>Relationship Controller</strong></p>\n\n<pre><code>class RelationshipsController &lt; ApplicationController\n\n    before_filter :authenticate_user!\n\n def create\n    user = User.find(params[:followed_id])\n    current_user.follow(user)\n    respond_to do |format|\n      format.html { redirect_to :back }\n      format.js\n    end      \n\n  end\n\n  def destroy\n    user = Relationship.find(params[:id]).followed\n    current_user.unfollow(user)\n    respond_to do |format|\n    format.html { redirect_to :back }\n    format.js\n  end \n\n\n  end\n\n    end\n</code></pre>\n\n<p><strong>RelationShip Model</strong></p>\n\n<pre><code>class Relationship &lt; ActiveRecord::Base\n     belongs_to :follower, class_name: \"User\"\n  belongs_to :followed, class_name: \"User\"\nvalidates :follower_id, presence: true\n  validates :followed_id, presence: true\nend\n</code></pre>\n\n<p>So I was hoping what is the code ? I tried <code>current_user.followed_id.posts</code> but didn't work ...</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "validation"], "comments": [{"owner": {"reputation": 1812, "user_id": 9104680, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a6e2d06cc56c31f995950c00602a0e7d?s=128&d=identicon&r=PG", "display_name": "Derek Hopper", "link": "https://stackoverflow.com/users/9104680/derek-hopper"}, "edited": false, "score": 0, "creation_date": 1516141075, "post_id": 48290679, "comment_id": 83566508, "body": "When your form renders errors, it&#39;s not technically a redirect. When you submit the form, it does a <code>POST &#47;articles</code>. When there&#39;s a validation error, your controller then <code>renders &#39;new&#39;</code>. That means you&#39;ll remain on <code>&#47;articles</code>. You could change this to redirect instead, but then your form wouldn&#39;t display errors."}], "answers": [{"comments": [{"owner": {"reputation": 370, "user_id": 4657565, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-ingejXhdSic/AAAAAAAAAAI/AAAAAAAAABQ/aVAF1TaNnrU/photo.jpg?sz=128", "display_name": "Mohammed", "link": "https://stackoverflow.com/users/4657565/mohammed"}, "edited": false, "score": 0, "creation_date": 1516145202, "post_id": 48290827, "comment_id": 83567920, "body": "Sorry just got error msg: ActionController::ParameterMissing in ArticlesController#new. Extracted source (around line #33): \tparams.require(:article).permit(:title, :text"}], "tags": [], "owner": {"reputation": 2840, "user_id": 6400294, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KtX2z.jpg?s=128&g=1", "display_name": "Shannon", "link": "https://stackoverflow.com/users/6400294/shannon"}, "is_accepted": false, "score": 1, "last_activity_date": 1516141645, "creation_date": 1516141645, "answer_id": 48290827, "question_id": 48290679, "link": "https://stackoverflow.com/questions/48290679/redirect-wrong-after-form-submit/48290827#48290827", "title": "Redirect wrong after form submit", "body": "<p>This is the standard behavior. If you want to change it however to keep the URL, you can modify the <code>new</code> and <code>create</code> actions:</p>\n\n<pre><code>def new\n  if article_params\n    create\n    return\n  end\n  @article = Article.new\n  render 'new'\nend \n\ndef create\n  @article = Article.new(article_params)\n  if @article.save\n    redirect_to @article\n  else\n    render 'new'\n  end\nend\n</code></pre>\n\n<p>And in routes.rb:</p>\n\n<pre><code>resources :articles\npost \"articles/new\"\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 370, "user_id": 4657565, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-ingejXhdSic/AAAAAAAAAAI/AAAAAAAAABQ/aVAF1TaNnrU/photo.jpg?sz=128", "display_name": "Mohammed", "link": "https://stackoverflow.com/users/4657565/mohammed"}, "edited": false, "score": 0, "creation_date": 1516285756, "post_id": 48299406, "comment_id": 83632450, "body": "Thank you Amr, I am already using that in the form _form.html.erb. &lt;%= form_with model: @article, local: true do |form| %&gt; .. But I am still geting error and Not sure why.. I think to say: \t &quot;if article_params&quot; is that wrong?"}], "tags": [], "owner": {"reputation": 536, "user_id": 8436554, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/d3XUa.jpg?s=128&g=1", "display_name": "Amr Adel", "link": "https://stackoverflow.com/users/8436554/amr-adel"}, "is_accepted": false, "score": 1, "last_activity_date": 1516186960, "last_edit_date": 1516186960, "creation_date": 1516186630, "answer_id": 48299406, "question_id": 48290679, "link": "https://stackoverflow.com/questions/48290679/redirect-wrong-after-form-submit/48299406#48299406", "title": "Redirect wrong after form submit", "body": "<p>@Shannon answer is correct, I'm writing this for your comment on his answer, Try to use <code>model</code> argument, according to <a href=\"https://m.patrikonrails.com/rails-5-1s-form-with-vs-old-form-helpers-3a5f72a8c78a\" rel=\"nofollow noreferrer\">this</a> when you gonna use <code>model: @article</code> it will generate everything automatically for you</p>\n\n<p><a href=\"https://i.stack.imgur.com/5hRrR.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/5hRrR.png\" alt=\"enter image description here\"></a></p>\n\n<p>Hope it helps.</p>\n"}], "owner": {"reputation": 370, "user_id": 4657565, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-ingejXhdSic/AAAAAAAAAAI/AAAAAAAAABQ/aVAF1TaNnrU/photo.jpg?sz=128", "display_name": "Mohammed", "link": "https://stackoverflow.com/users/4657565/mohammed"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 485, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1516186960, "creation_date": 1516140783, "question_id": 48290679, "link": "https://stackoverflow.com/questions/48290679/redirect-wrong-after-form-submit", "title": "Redirect wrong after form submit", "body": "<p>I am started learning Ruby. I just followed this guide <a href=\"http://guides.rubyonrails.org/getting_started.html\" rel=\"nofollow noreferrer\">http://guides.rubyonrails.org/getting_started.html</a> to create blog app. One thing I noticed if we try to submit the form without entering data from  url  <a href=\"http://localhost:3000/articles/new\" rel=\"nofollow noreferrer\">http://localhost:3000/articles/new</a> it showing error message and redirect to <a href=\"http://localhost:3000/articles\" rel=\"nofollow noreferrer\">http://localhost:3000/articles</a> </p>\n\n<p>I think it should keep same url and show error message.\nNot sure how to fix that.</p>\n\n<p>articles_controller.rb</p>\n\n<pre><code>class ArticlesController &lt; ApplicationController\n\n    def index\n    @articles = Article.all\n  end\n\n    def show\n        @article = Article.find(params[:id])\n    end\n\n    def new\n        @article = Article.new\n    end\n\n    def create\n        @article = Article.new(article_params)\n\n      if @article.save\n        redirect_to @article\n      else\n        render 'new'\n      end \n  end   \n\n    private\n      def article_params\n        params.require(:article).permit(:title, :text)\n      end  \n\nend\n</code></pre>\n\n<p>new.html.erb</p>\n\n<pre><code>&lt;%= form_with scope: :article, url: articles_path, local: true do |form| %&gt;\n\n  &lt;% if @article.errors.any? %&gt;\n    &lt;div id=\"error_explanation\"&gt;\n      &lt;h2&gt;\n        &lt;%= pluralize(@article.errors.count, \"error\") %&gt; prohibited\n        this article from being saved:\n      &lt;/h2&gt;\n      &lt;ul&gt;\n        &lt;% @article.errors.full_messages.each do |msg| %&gt;\n          &lt;li&gt;&lt;%= msg %&gt;&lt;/li&gt;\n        &lt;% end %&gt;\n      &lt;/ul&gt;\n    &lt;/div&gt;\n  &lt;% end %&gt;\n\n  &lt;p&gt;\n    &lt;%= form.label :title %&gt;&lt;br&gt;\n    &lt;%= form.text_field :title %&gt;\n  &lt;/p&gt;\n\n  &lt;p&gt;\n    &lt;%= form.label :text %&gt;&lt;br&gt;\n    &lt;%= form.text_area :text %&gt;\n  &lt;/p&gt;\n\n  &lt;p&gt;\n    &lt;%= form.submit %&gt;\n  &lt;/p&gt;\n\n&lt;% end %&gt;\n\n&lt;%= link_to 'Back', articles_path %&gt;\n</code></pre>\n\n<p>routes.rb</p>\n\n<pre><code>Rails.application.routes.draw do\n  get 'welcome/index'\n\n    resources :articles\n    root 'welcome#index'\n  # For details on the DSL available within this file, see http://guides.rubyonrails.org/routing.html\nend\n</code></pre>\n\n<p>rails routes</p>\n\n<pre><code>      Prefix Verb   URI Pattern                  Controller#Action\nwelcome_index GET    /welcome/index(.:format)     welcome#index\n     articles GET    /articles(.:format)          articles#index\n              POST   /articles(.:format)          articles#create\n  new_article GET    /articles/new(.:format)      articles#new\n edit_article GET    /articles/:id/edit(.:format) articles#edit\n      article GET    /articles/:id(.:format)      articles#show\n              PATCH  /articles/:id(.:format)      articles#update\n              PUT    /articles/:id(.:format)      articles#update\n              DELETE /articles/:id(.:format)      articles#destroy\n         root GET    /                            welcome#index\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "url", "url-routing"], "comments": [{"owner": {"reputation": 208794, "user_id": 229044, "user_type": "moderator", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/591426cbbacd4025d920467bad356911?s=128&d=identicon&r=PG&f=1", "display_name": "meagar", "link": "https://stackoverflow.com/users/229044/meagar"}, "edited": false, "score": 1, "creation_date": 1516141118, "post_id": 48290664, "comment_id": 83566531, "body": "Exactly like you would with <code>friendly_id</code>, but limit your character set to 0..9."}, {"owner": {"reputation": 4690, "user_id": 1937435, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/YyN37.jpg?s=128&g=1", "display_name": "Josh Brody", "link": "https://stackoverflow.com/users/1937435/josh-brody"}, "edited": false, "score": 0, "creation_date": 1516144987, "post_id": 48290664, "comment_id": 83567865, "body": "<a href=\"https://github.com/peterhellberg/hashids.rb\" rel=\"nofollow noreferrer\">github.com/peterhellberg/hashids.rb</a> is also an option."}, {"owner": {"reputation": 2902, "user_id": 523051, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/497825ebbcb0e06c2451d3ff91d644b2?s=128&d=identicon&r=PG", "display_name": "chrickso", "link": "https://stackoverflow.com/users/523051/chrickso"}, "reply_to_user": {"reputation": 208794, "user_id": 229044, "user_type": "moderator", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/591426cbbacd4025d920467bad356911?s=128&d=identicon&r=PG&f=1", "display_name": "meagar", "link": "https://stackoverflow.com/users/229044/meagar"}, "edited": false, "score": 0, "creation_date": 1516160121, "post_id": 48290664, "comment_id": 83571438, "body": "@meagar are you saying to actually use friendly_id and there is away to output only digits like i am after? i did not see anything in the documentation about it"}], "answers": [{"tags": [], "owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "is_accepted": false, "score": 0, "last_activity_date": 1516318619, "creation_date": 1516318619, "answer_id": 48332025, "question_id": 48290664, "link": "https://stackoverflow.com/questions/48290664/with-ruby-rails-how-to-disguise-url-id-as-a-seemingly-random-7-digit-number-%c3%a0/48332025#48332025", "title": "With Ruby/Rails, how to disguise URL :id as a seemingly random 7 digit number &#224; la basecamp.com?", "body": "<blockquote>\n  <p>How can I replicate exactly how basecamp.com produces id's in a way that will \"never\" produce a collision?</p>\n</blockquote>\n\n<p>That is impossible. No matter what you do, no matter how clever your algorithm, it <em>will</em> produce a collision after 10000000 calls at the latest.</p>\n"}], "owner": {"reputation": 2902, "user_id": 523051, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/497825ebbcb0e06c2451d3ff91d644b2?s=128&d=identicon&r=PG", "display_name": "chrickso", "link": "https://stackoverflow.com/users/523051/chrickso"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 63, "favorite_count": 0, "answer_count": 1, "score": -4, "last_activity_date": 1516318619, "creation_date": 1516140703, "question_id": 48290664, "link": "https://stackoverflow.com/questions/48290664/with-ruby-rails-how-to-disguise-url-id-as-a-seemingly-random-7-digit-number-%c3%a0", "title": "With Ruby/Rails, how to disguise URL :id as a seemingly random 7 digit number &#224; la basecamp.com?", "body": "<p>I really like the Basecamp method of encoding account/user id's as a seemingly random string of 7 digit numbers to use in the URL so that no one is aware of what what database row ID they have. I have seen it specified how to do something like this by different forms of hashing or with friendly_id, but they all seem to end up having non-number characters in it as well, which I do not think looks as nice.</p>\n\n<p>How can I replicate exactly how basecamp.com produces id's in a way that will \"never\" produce a collision?</p>\n\n<pre><code>https://basecamp.com/8675309\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 1812, "user_id": 9104680, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a6e2d06cc56c31f995950c00602a0e7d?s=128&d=identicon&r=PG", "display_name": "Derek Hopper", "link": "https://stackoverflow.com/users/9104680/derek-hopper"}, "edited": false, "score": 1, "creation_date": 1516141247, "post_id": 48290559, "comment_id": 83566578, "body": "There&#39;s a gem for SendGrid which will integrate with ActionMailer. Then you can send mail as normal. Is there a reason you can&#39;t use that?"}], "answers": [{"tags": [], "owner": {"reputation": 5141, "user_id": 193980, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/aafa8848c4b764f080b1b31a51eab73d?s=128&d=identicon&r=PG", "display_name": "Phlip", "link": "https://stackoverflow.com/users/193980/phlip"}, "is_accepted": true, "score": 1, "last_activity_date": 1516140994, "creation_date": 1516140994, "answer_id": 48290715, "question_id": 48290559, "link": "https://stackoverflow.com/questions/48290559/get-generated-html-as-string-rails/48290715#48290715", "title": "Get Generated HTML as String - Rails", "body": "<p>Look up <code>render_to_string</code>.</p>\n\n<p>It renders and returns a string.</p>\n"}], "owner": {"reputation": 2960, "user_id": 7426461, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/Ldwxy.jpg?s=128&g=1", "display_name": "Cannon Moyer", "link": "https://stackoverflow.com/users/7426461/cannon-moyer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 38, "favorite_count": 0, "accepted_answer_id": 48290715, "answer_count": 1, "score": 0, "last_activity_date": 1516140994, "creation_date": 1516140226, "question_id": 48290559, "link": "https://stackoverflow.com/questions/48290559/get-generated-html-as-string-rails", "title": "Get Generated HTML as String - Rails", "body": "<p>I'm using the SendGrid API and I am trying to find a cleaner way to generate HTML content to send as an email. </p>\n\n<p>I would like to try and use some of my current mailer html template files and pass a database object to them to receive the response, but I am not sure how that is done or if it can be. Here is essentially what I am wanting to do. </p>\n\n<pre><code>@user = User.find(1)\nhtml_content = render \"mailers/my_mailer\", user: @user\n@user.send_html_content(html_content)\n</code></pre>\n\n<p>Maybe there is a better way of doing this but I'm not sure. Any tips would be appreciated!</p>\n\n<p>Thanks in advance. </p>\n"}, {"tags": ["ruby-on-rails", "ruby", "simple-form"], "comments": [{"owner": {"reputation": 2060, "user_id": 3944700, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/4df64cd1de5941fb49263a19d80f1482?s=128&d=identicon&r=PG&f=1", "display_name": "hashrocket", "link": "https://stackoverflow.com/users/3944700/hashrocket"}, "edited": false, "score": 0, "creation_date": 1516138166, "post_id": 48289898, "comment_id": 83565264, "body": "Is there a question in there somewhere?"}, {"owner": {"reputation": 14352, "user_id": 7607190, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lt74X.png?s=128&g=1", "display_name": "June7", "link": "https://stackoverflow.com/users/7607190/june7"}, "edited": false, "score": 0, "creation_date": 1516138393, "post_id": 48289898, "comment_id": 83565350, "body": "What is the issue - error message, wrong results, nothing happens?"}, {"owner": {"reputation": 31, "user_id": 8430674, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/f4fcf1ff6f4663910541e83bcddfe732?s=128&d=identicon&r=PG&f=1", "display_name": "Royal", "link": "https://stackoverflow.com/users/8430674/royal"}, "edited": false, "score": 0, "creation_date": 1516143724, "post_id": 48289898, "comment_id": 83567465, "body": "Sorry, took so long to format; totally, forgot to post the query.  How do I get the Comment box to show?  No error...just on Comment box is displaying."}, {"owner": {"reputation": 31, "user_id": 8430674, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/f4fcf1ff6f4663910541e83bcddfe732?s=128&d=identicon&r=PG&f=1", "display_name": "Royal", "link": "https://stackoverflow.com/users/8430674/royal"}, "edited": false, "score": 0, "creation_date": 1516199020, "post_id": 48289898, "comment_id": 83591325, "body": "No, but I&#39;m willing to try."}, {"owner": {"reputation": 31, "user_id": 8430674, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/f4fcf1ff6f4663910541e83bcddfe732?s=128&d=identicon&r=PG&f=1", "display_name": "Royal", "link": "https://stackoverflow.com/users/8430674/royal"}, "reply_to_user": {"reputation": 280325, "user_id": 1560062, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7c5027e3046fed86e8e34b4fa0e6246c?s=128&d=identicon&r=PG", "display_name": "zero323", "link": "https://stackoverflow.com/users/1560062/zero323"}, "edited": false, "score": 0, "creation_date": 1516199143, "post_id": 48289898, "comment_id": 83591419, "body": "When I ran the Simple Form install, it generated the following:  Inside your views, use the &#39;simple_form_for&#39; with one of the Bootstrap form   classes, &#39;.form-horizontal&#39; or &#39;.form-inline&#39;, as the following:     = simple_form_for(@user, html: { class: &#39;form-horizontal&#39; }) do |form|"}, {"owner": {"reputation": 31, "user_id": 8430674, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/f4fcf1ff6f4663910541e83bcddfe732?s=128&d=identicon&r=PG&f=1", "display_name": "Royal", "link": "https://stackoverflow.com/users/8430674/royal"}, "edited": false, "score": 0, "creation_date": 1516199431, "post_id": 48289898, "comment_id": 83591632, "body": "I had the following: &lt;div id=&quot;comments&quot;&gt;    &lt;%= render :partial =&gt; @link.comments %&gt; &lt;/div&gt;  &lt;%= simple_form_for (@link, Comment.new) do |f| %&gt;   &lt;div class=&quot;field&quot;&gt;      &lt;%= f.text_area :body, class: &quot;form-control&quot; %&gt;    &lt;/div&gt;  Someone suggested changing it the &lt;%= f.text_area :body, size: &quot;60x12&quot; %&gt;"}, {"owner": {"reputation": 31, "user_id": 8430674, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/f4fcf1ff6f4663910541e83bcddfe732?s=128&d=identicon&r=PG&f=1", "display_name": "Royal", "link": "https://stackoverflow.com/users/8430674/royal"}, "reply_to_user": {"reputation": 436, "user_id": 3244407, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/31a2e00b7474c0ed5d44482b8714bb99?s=128&d=identicon&r=PG&f=1", "display_name": "Ethan", "link": "https://stackoverflow.com/users/3244407/ethan"}, "edited": false, "score": 0, "creation_date": 1516200561, "post_id": 48289898, "comment_id": 83592378, "body": "@Ethan didn&#39;t work but thanks for trying."}, {"owner": {"reputation": 31, "user_id": 8430674, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/f4fcf1ff6f4663910541e83bcddfe732?s=128&d=identicon&r=PG&f=1", "display_name": "Royal", "link": "https://stackoverflow.com/users/8430674/royal"}, "edited": false, "score": 0, "creation_date": 1516204790, "post_id": 48289898, "comment_id": 83595376, "body": "So, I did F12 and the simple form code block isn&#39;t showing...any clues?"}], "owner": {"reputation": 31, "user_id": 8430674, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/f4fcf1ff6f4663910541e83bcddfe732?s=128&d=identicon&r=PG&f=1", "display_name": "Royal", "link": "https://stackoverflow.com/users/8430674/royal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 33, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1516139430, "creation_date": 1516137098, "last_edit_date": 1516139430, "question_id": 48289898, "link": "https://stackoverflow.com/questions/48289898/simple-form-reddit-like-site", "title": "simple form - Reddit-like site", "body": "<p>I completed a search and found this topic that is close, How do I make simple form to use, I'm too new to fully understand\nwhat I was looking at.</p>\n\n<p>The answer was as follows:</p>\n\n<p>Step 1\n    rails generate simple_form:install --bootstrap  (which I did after adding the Gem and running Bundle Install)</p>\n\n<p>Step 2\nTold me to add wrappers (not sure if I need to complete this step)</p>\n\n<p>Step 3\nmodify the simple_form and has this example:  </p>\n\n<pre><code>&lt;%= simple_form_for(@contact, url: supplier_contacts_path, html: { class: \n'form-horizontal' }) do |f| %&gt;\n&lt;div class=\"form-inputs\"&gt;\n&lt;%= f.input :c_regular,wrapper: :horizontal_input_group do %&gt;\n&lt;span class=\"input-group-addon\"&gt;$&lt;/span&gt;\n&lt;%= f.input_field :c_regular, :label =&gt; \"Regular\",class: \"form-control\" %&gt;\n&lt;% end %&gt;\n&lt;/div&gt;\n&lt;% end %&gt;  \n</code></pre>\n\n<p>My code is as follows(views/comments/show.html.erb):  </p>\n\n<pre><code>&lt;div id=\"comments\"&gt;\n  &lt;%= render :partial =&gt; @link.comments %&gt;\n&lt;/div&gt;\n\n&lt;%= simple_form_for(@link, html {class: 'form-horizontal' })  do |f| %&gt;  \n&lt;div class=\"field\"&gt;  \n  &lt;%= f.text_area :body, size: \"60x12\" %&gt;\n&lt;/div&gt;  \n&lt;%= f.submit \"Add Comment\", class: 'btn btn-primary\" %&gt;\n&lt;% end %&gt;  \n</code></pre>\n\n<p>Here's my partial(views/comments/_comments.html.erb):  </p>\n\n<pre><code>&lt;%= div_for(comment) do %&gt;\n&lt;div class=\"comments_wrapper clearfix\"&gt;\n&lt;div class=\"pull-left\"&gt;\n&lt;p class=\"lead\"&gt;&lt;%= comment.body %&gt;&lt;/p&gt;\n&lt;p&gt;&lt;small&gt;Submitted &lt;strong&gt;&lt;%= time_ago_in_words(comment.created_at) %&gt; \nago&lt;/strong&gt; by\n&lt;%= comment.user.email %&gt;&lt;/small&gt;&lt;/p&gt;\n&lt;/div&gt;\n&lt;div class=\"btn-group pull-right\"&gt;\n&lt;% if comment.user == current_user %&gt;\n&lt;%= link_to 'Destroy', comment, method: :delete, data: { confirm: 'Are you \nsure?' }, class: \"btn btn-sm btn-default\" %&gt;\n&lt;% end %&gt;\n&lt;% end %&gt;\n&lt;/div&gt;\n&lt;% end %&gt;    \n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 535, "user_id": 3134957, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qutnS.jpg?s=128&g=1", "display_name": "Anurag Aryan", "link": "https://stackoverflow.com/users/3134957/anurag-aryan"}, "edited": false, "score": 0, "creation_date": 1516137794, "post_id": 48289798, "comment_id": 83565082, "body": "You need <code>.instance_methods</code>"}, {"owner": {"reputation": 167, "user_id": 1789782, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/4cea235336ea3bfb21ee0564b9766bb2?s=128&d=identicon&r=PG", "display_name": "user1789782", "link": "https://stackoverflow.com/users/1789782/user1789782"}, "reply_to_user": {"reputation": 535, "user_id": 3134957, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qutnS.jpg?s=128&g=1", "display_name": "Anurag Aryan", "link": "https://stackoverflow.com/users/3134957/anurag-aryan"}, "edited": false, "score": 0, "creation_date": 1516157771, "post_id": 48289798, "comment_id": 83570940, "body": "That returns all the parent methods as well. I need to find only the methods defined in the class itself."}], "answers": [{"comments": [{"owner": {"reputation": 167, "user_id": 1789782, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/4cea235336ea3bfb21ee0564b9766bb2?s=128&d=identicon&r=PG", "display_name": "user1789782", "link": "https://stackoverflow.com/users/1789782/user1789782"}, "edited": false, "score": 0, "creation_date": 1516750648, "post_id": 48296618, "comment_id": 83815073, "body": "This also returns all the inherited methods which is not whats desired. I&#39;m not sure this can be done in Ruby, so I went with a manual method declaration model which is not ideal but it works."}], "tags": [], "owner": {"reputation": 1, "user_id": 2388826, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c6f1fdf901f31e8878ddebba21d3c3a1?s=128&d=identicon&r=PG", "display_name": "Johannus Vogel", "link": "https://stackoverflow.com/users/2388826/johannus-vogel"}, "is_accepted": false, "score": 0, "last_activity_date": 1516178189, "last_edit_date": 1516178189, "creation_date": 1516177703, "answer_id": 48296618, "question_id": 48289798, "link": "https://stackoverflow.com/questions/48289798/get-list-of-rails-custom-methods/48296618#48296618", "title": "Get list of Rails custom methods", "body": "<p>Use <code>MyClass.instance_methods(false)</code>, but make sure to pass <code>false</code> as an argument if you don't want it to return the methods defined in the superclasses.</p>\n\n<p>Additionally, use <code>MyClass.singleton_methods(false)</code> for class methods.</p>\n\n<p>More info: </p>\n\n<ul>\n<li><a href=\"https://apidock.com/ruby/Object/singleton_methods\" rel=\"nofollow noreferrer\">https://apidock.com/ruby/Object/singleton_methods</a></li>\n<li><a href=\"https://apidock.com/ruby/Module/instance_methods\" rel=\"nofollow noreferrer\">https://apidock.com/ruby/Module/instance_methods</a></li>\n</ul>\n"}], "owner": {"reputation": 167, "user_id": 1789782, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/4cea235336ea3bfb21ee0564b9766bb2?s=128&d=identicon&r=PG", "display_name": "user1789782", "link": "https://stackoverflow.com/users/1789782/user1789782"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 127, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1516178189, "creation_date": 1516136647, "last_edit_date": 1516136759, "question_id": 48289798, "link": "https://stackoverflow.com/questions/48289798/get-list-of-rails-custom-methods", "title": "Get list of Rails custom methods", "body": "<p>I'm trying to get the list of methods defined in a Rails model without the attributes and reflections.</p>\n\n<p>The code I have thus far is as follows but it only shows the database columns and has_many, etc definitions. I need the custom methods in the model as well.</p>\n\n<pre><code>    class.reflections.keys.each do |key|\n      define_method key do\n        @object.send key\n      end\n    end\n    class.attribute_names.each do |sym|\n      define_method sym do\n        @object.send sym\n      end\n    end\n</code></pre>\n\n<p>I've tried \".methods\", etc but it includes or excludes the methods I've defined.</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 18856, "user_id": 1359650, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/dffc4318ac93e728a26c8e8b51b4eb37?s=128&d=identicon&r=PG", "display_name": "jvillian", "link": "https://stackoverflow.com/users/1359650/jvillian"}, "edited": false, "score": 1, "creation_date": 1516135406, "post_id": 48289496, "comment_id": 83563986, "body": "Is that your actual code? You seem to have a lot of naming errors (e.g., <code>Lane1</code>, <code>:zipcode</code>, <code>:ZipCode</code>, etc.)."}, {"owner": {"reputation": 2060, "user_id": 3944700, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/4df64cd1de5941fb49263a19d80f1482?s=128&d=identicon&r=PG&f=1", "display_name": "hashrocket", "link": "https://stackoverflow.com/users/3944700/hashrocket"}, "edited": false, "score": 0, "creation_date": 1516138668, "post_id": 48289496, "comment_id": 83565487, "body": "Is your form inside of a form_for or a form_with?"}, {"owner": {"reputation": 221, "user_id": 5420504, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/174979efbe4f8e8e9f1579ac1c551f82?s=128&d=identicon&r=PG&f=1", "display_name": "kparekh01", "link": "https://stackoverflow.com/users/5420504/kparekh01"}, "edited": false, "score": 0, "creation_date": 1516140415, "post_id": 48289496, "comment_id": 83566248, "body": "Your params hash keys MUST match the attribute names in your DB"}, {"owner": {"reputation": 3, "user_id": 9226319, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3e18ad2961c3276205e089240731425c?s=128&d=identicon&r=PG&f=1", "display_name": "VIIIISSSSUU", "link": "https://stackoverflow.com/users/9226319/viiiissssuu"}, "reply_to_user": {"reputation": 18856, "user_id": 1359650, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/dffc4318ac93e728a26c8e8b51b4eb37?s=128&d=identicon&r=PG", "display_name": "jvillian", "link": "https://stackoverflow.com/users/1359650/jvillian"}, "edited": false, "score": 0, "creation_date": 1516281588, "post_id": 48289496, "comment_id": 83629708, "body": "Thanks @jvillian ."}, {"owner": {"reputation": 3, "user_id": 9226319, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3e18ad2961c3276205e089240731425c?s=128&d=identicon&r=PG&f=1", "display_name": "VIIIISSSSUU", "link": "https://stackoverflow.com/users/9226319/viiiissssuu"}, "reply_to_user": {"reputation": 2060, "user_id": 3944700, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/4df64cd1de5941fb49263a19d80f1482?s=128&d=identicon&r=PG&f=1", "display_name": "hashrocket", "link": "https://stackoverflow.com/users/3944700/hashrocket"}, "edited": false, "score": 0, "creation_date": 1516281680, "post_id": 48289496, "comment_id": 83629769, "body": "inside form_with. and now its working . @hashrocket"}], "answers": [{"tags": [], "owner": {"reputation": 37, "user_id": 8615510, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ab041f03d5504bca0cd8cb27a2fa25f4?s=128&d=identicon&r=PG&f=1", "display_name": "Vikas Dubey", "link": "https://stackoverflow.com/users/8615510/vikas-dubey"}, "is_accepted": false, "score": -1, "last_activity_date": 1516163192, "creation_date": 1516163192, "answer_id": 48293597, "question_id": 48289496, "link": "https://stackoverflow.com/questions/48289496/rails-all-fields-in-form-are-not-saving-in-rails-db-instead-few-fields-showing/48293597#48293597", "title": "Rails : all fields in form are not saving in rails db instead few fields showing nil", "body": "<p>Try this:</p>\n\n<pre><code>&lt;p&gt;\n    &lt;%= form.label :FirstName %&gt;\n    &lt;%= form.text_field :FirstName %&gt; &amp;nbsp\n    &lt;%= form.label :LastName %&gt;\n    &lt;%= form.text_field :LastName %&gt;\n  &lt;/p&gt;\n  &lt;br&gt;\n  &lt;%= form.label :PhoneNo %&gt;\n    &lt;%= form.text_field :PhoneNo %&gt;\n\n  &lt;p&gt;\n    &lt;%= form.label :Line1 %&gt;\n    &lt;%= form.text_field :Line1 %&gt; &amp;nbsp\n    &lt;%= form.label :Line2 %&gt;\n    &lt;%= form.text_field :Line2 %&gt; &lt;br&gt;\n    &lt;%= form.label :ZipCode %&gt;\n    &lt;%= form.text_field :ZipCode %&gt; &amp;nbsp\n    &lt;%= form.label :State %&gt;\n\n    &lt;%= form.select(:State, options_for_select([['Alaska','AK'],['Alabama','AL'], ['Arkansas','AR'],['Arizona','AZ'],['California','CA'],['Colorado','CO'],['Connecticut','CT'],['District of Columbia','DC'],['Delaware','DE'],['Florida','FL'],['Georgia','GA'],['Hawaii','HI'],['Iowa','IA'],['Idaho','ID'],['Illinois','IL'],['Indiana','IN'],['Kansas','KS'],['Kentucky','KY'],['Louisiana','LA'],['Massachusetts','MA'],['Maryland','MD'],['Maine','ME'],['Michigan','MI'],['Minnesota','MN'],['Missouri','MO'],['Mississippi','MS'],['Montana','MT'],['North Carolina','NC'],['North Dakota','ND'],['Nebraska','NE'],['New Hampshire','NH'],['New Jersey','NJ'],['New Mexico','NM'],['Nevada','NV'],['New York','NY'],['Ohio','OH'],['Oklahoma','OK'],['Oregon','OR'],['Pennsylvania','PA'],['Rhode Island','RI'],['South Carolina','SC'],['South Dakota','SD'],['Tennessee','TN'],['Texas','TX'],['Utah','UT'],['Virginia','VA'],['Vermont','VT'],['Washington','WA'],['Wisconsin','WI'],['West Virginia','WV'],['Wyoming','WY']])) %&gt;\n\n    &lt;%= form.label :County %&gt;\n    &lt;%= form.text_field :County %&gt; \n  &lt;/p&gt;\n\n  &lt;p&gt;\n    &lt;%= form.submit %&gt;\n  &lt;/p&gt;\n</code></pre>\n\n\n"}, {"tags": [], "owner": {"reputation": 131, "user_id": 7215546, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3EmTG.jpg?s=128&g=1", "display_name": "Ruturaj Bisure", "link": "https://stackoverflow.com/users/7215546/ruturaj-bisure"}, "is_accepted": true, "score": 0, "last_activity_date": 1516283837, "creation_date": 1516283837, "answer_id": 48323041, "question_id": 48289496, "link": "https://stackoverflow.com/questions/48289496/rails-all-fields-in-form-are-not-saving-in-rails-db-instead-few-fields-showing/48323041#48323041", "title": "Rails : all fields in form are not saving in rails db instead few fields showing nil", "body": "<p>In your customer_params method , you permitted <strong>:Line1, :Line2, :ZipCode</strong>\nbut in your view it is <strong>:Lane1, :Lane2, :zipcode</strong> So it is not accepting them.You can fix it with two types.</p>\n\n<ol>\n<li>Use the same names.</li>\n<li><p>You can fix this(refer only if you want to accept all attributes)(<strong>dirty way</strong>)</p>\n\n<p>def customer_params</p>\n\n<pre><code>   params.require(:customer).permit!\n</code></pre>\n\n<p>end</p></li>\n</ol>\n"}], "owner": {"reputation": 3, "user_id": 9226319, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3e18ad2961c3276205e089240731425c?s=128&d=identicon&r=PG&f=1", "display_name": "VIIIISSSSUU", "link": "https://stackoverflow.com/users/9226319/viiiissssuu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 91, "favorite_count": 0, "closed_date": 1516283962, "accepted_answer_id": 48323041, "answer_count": 2, "score": -2, "last_activity_date": 1516283837, "creation_date": 1516135245, "last_edit_date": 1516137868, "question_id": 48289496, "link": "https://stackoverflow.com/questions/48289496/rails-all-fields-in-form-are-not-saving-in-rails-db-instead-few-fields-showing", "closed_reason": "Not suitable for this site", "title": "Rails : all fields in form are not saving in rails db instead few fields showing nil", "body": "<p>View:</p>\n\n<pre><code>  &lt;p&gt;\n    &lt;%= form.label :FirstName %&gt;\n    &lt;%= form.text_field :FirstName %&gt; &amp;nbsp\n    &lt;%= form.label :LastName %&gt;\n    &lt;%= form.text_field :LastName %&gt;\n  &lt;/p&gt;\n  &lt;br&gt;\n  &lt;%= form.label :PhoneNo %&gt;\n    &lt;%= form.text_field :PhoneNo %&gt;\n\n  &lt;p&gt;\n    &lt;%= form.label :Lane1 %&gt;\n    &lt;%= form.text_field :Lane1 %&gt; &amp;nbsp\n    &lt;%= form.label :Lane2 %&gt;\n    &lt;%= form.text_field :Lane2 %&gt; &lt;br&gt;\n    &lt;%= form.label :ZipCode %&gt;\n    &lt;%= form.text_field :zipcode %&gt; &amp;nbsp\n    &lt;%= form.label :State %&gt;\n\n    &lt;%= form.select(:State, options_for_select([['Alaska','AK'],['Alabama','AL'], ['Arkansas','AR'],['Arizona','AZ'],['California','CA'],['Colorado','CO'],['Connecticut','CT'],['District of Columbia','DC'],['Delaware','DE'],['Florida','FL'],['Georgia','GA'],['Hawaii','HI'],['Iowa','IA'],['Idaho','ID'],['Illinois','IL'],['Indiana','IN'],['Kansas','KS'],['Kentucky','KY'],['Louisiana','LA'],['Massachusetts','MA'],['Maryland','MD'],['Maine','ME'],['Michigan','MI'],['Minnesota','MN'],['Missouri','MO'],['Mississippi','MS'],['Montana','MT'],['North Carolina','NC'],['North Dakota','ND'],['Nebraska','NE'],['New Hampshire','NH'],['New Jersey','NJ'],['New Mexico','NM'],['Nevada','NV'],['New York','NY'],['Ohio','OH'],['Oklahoma','OK'],['Oregon','OR'],['Pennsylvania','PA'],['Rhode Island','RI'],['South Carolina','SC'],['South Dakota','SD'],['Tennessee','TN'],['Texas','TX'],['Utah','UT'],['Virginia','VA'],['Vermont','VT'],['Washington','WA'],['Wisconsin','WI'],['West Virginia','WV'],['Wyoming','WY']])) %&gt;\n\n    &lt;%= form.label :County %&gt;\n    &lt;%= form.text_field :County %&gt; \n  &lt;/p&gt;\n\n  &lt;p&gt;\n    &lt;%= form.submit %&gt;\n  &lt;/p&gt;\n\n&lt;% end %&gt;\n</code></pre>\n\n<p>(Line1 , line2, zipcode and country are not saving)    </p>\n\n<p>Controller:</p>\n\n<pre><code>class CustomersController &lt; ApplicationController\n    def index\n        @customers = Customer.all\n    end\n\n    def show\n       @customer = Customer.find(params[:id])\n    end\n\n    def new \n    end\n\n    def create\n        @customer = Customer.new(customer_params)\n         @customer.save\n        redirect_to @customer\n    end\n\n    private \n        def customer_params\n            params.require(:customer).permit(\n               :FirstName, :LastName, :PhoneNo, :Line1, :Line2, :ZipCode, :State, :Country)\n        end\n    end\n</code></pre>\n\n<p>//sjhfkljifeui;eisdhABCNFJWHEkywqoka;cns,M bhwdgshcwlnq</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "file-upload", "download", "filenames"], "comments": [{"owner": {"reputation": 2946, "user_id": 1430057, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/Tbizp.jpg?s=128&g=1", "display_name": "Subash", "link": "https://stackoverflow.com/users/1430057/subash"}, "edited": false, "score": 0, "creation_date": 1516142711, "post_id": 48289362, "comment_id": 83567130, "body": "<code>show.html.erb</code> should be used for showing just one file, <code>index.html.erb</code> should be user for listing all the files and that is where you should be showing the file name, do you have an index.html file? and how are you displaying the list of files, are you reading them from a directory or from a database?"}, {"owner": {"reputation": 11, "user_id": 9226273, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PUnaK.jpg?s=128&g=1", "display_name": "Fox", "link": "https://stackoverflow.com/users/9226273/fox"}, "reply_to_user": {"reputation": 2946, "user_id": 1430057, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/Tbizp.jpg?s=128&g=1", "display_name": "Subash", "link": "https://stackoverflow.com/users/1430057/subash"}, "edited": false, "score": 0, "creation_date": 1516231300, "post_id": 48289362, "comment_id": 83609027, "body": "Thanks for your response! I added my code in index.html.erb file. All the files are stored in a directory public/files."}], "owner": {"reputation": 11, "user_id": 9226273, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PUnaK.jpg?s=128&g=1", "display_name": "Fox", "link": "https://stackoverflow.com/users/9226273/fox"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 33, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1516231203, "creation_date": 1516134738, "last_edit_date": 1516231203, "question_id": 48289362, "link": "https://stackoverflow.com/questions/48289362/display-all-user-uploaded-files-filenames-in-view-of-ror-app", "title": "Display all user uploaded files filenames in view of RoR app", "body": "<p>I would like to display all the filenames of the files users have uploaded to my Ruby-on-Rails app in a view for admin to see the filename before downloading the file. All the files are stored in a directory.</p>\n\n<p>My UploadController is the following:</p>\n\n<pre><code>class UploadController &lt; ApplicationController\n\n  def index\n\n  end\n\n  def show\n\n  end\n\n  def uploadFile\n    uploadedFile = params[:upload][:file]\n    File.open(Rails.root.join('public','files', uploadedFile.original_filename), 'wb') do |f|\n        f.write(uploadedFile.read)\n    end\n    redirect_to upload_path, :notice =&gt; \"Thanks for your upload!\"\n  end\n\n  def downloadFile\n    fileName = params[:download][:file].original_filename\n    send_file Rails.root.join('public','files', fileName)\n  end   \nend\n</code></pre>\n\n<hr>\n\n<p>show.html.erb (the view I want Admin to be able to see uploaded filenames and download the files) is the following:</p>\n\n<pre><code>&lt;h1&gt;Download a file&lt;/h1&gt;\n&lt;%= form_for :download, url: upload_admin_downloadFile_path do |f| %&gt;\n    &lt;%= f.text_field :fileName %&gt;&lt;br/&gt;\n    &lt;br/&gt;\n    &lt;%= f.submit :DOWNLOAD! %&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<hr>\n\n<p>This is my upload index.html.erb</p>\n\n<pre><code>&lt;div class=\"upload_container\"&gt;\n            &lt;h1&gt;- UPLOAD A FILE -&lt;/h1&gt;\n            &lt;p&gt;  Here you can upload files that you want to share &lt;/p&gt;\n        &lt;%= form_for :upload, url: upload_uploadFile_path do |f| %&gt;\n            &lt;%= f.file_field :file, :class=&gt; \"btn-uploadoldschool\" %&gt;\n            &lt;br/&gt;\n            &lt;br/&gt;\n            &lt;br/&gt;\n            &lt;%= f.submit :UPLOAD!, :class=&gt; \"btn-uploadoldschool\" %&gt;\n        &lt;% end %&gt;\n        &lt;% if user_signed_in? %&gt;\n            &lt;% if current_user.has_role? :admin %&gt;\n                &lt;%= link_to upload_admin_url do %&gt;  \n\n                &lt;% end %&gt;\n            &lt;% end %&gt;\n        &lt;% end %&gt;        \n\n&lt;/div&gt;  \n</code></pre>\n\n<p>All the help is very much appreciated! \nThanks,\nFox.</p>\n"}, {"tags": ["ruby", "rspec"], "answers": [{"tags": [], "owner": {"reputation": 4338, "user_id": 299774, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/eab8557a9cb59427455bac3cc59d2802?s=128&d=identicon&r=PG", "display_name": "Grzegorz", "link": "https://stackoverflow.com/users/299774/grzegorz"}, "is_accepted": false, "score": 0, "last_activity_date": 1516133535, "creation_date": 1516133535, "answer_id": 48289078, "question_id": 48288160, "link": "https://stackoverflow.com/questions/48288160/handling-a-method-from-outside-of-a-mixin-module-in-ruby-and-rspec/48289078#48289078", "title": "Handling a method from outside of a mixin module in ruby and rspec", "body": "<p>Is <code>ShortenedUrl</code> defined inside <code>ReusableBitlyLinks</code> module? If not - try to access it with <code>::ShortenedUrl.shorten_url_with_bitly</code>. </p>\n\n<p>Not sure what stubbing has to do with it...</p>\n"}, {"tags": [], "owner": {"reputation": 459, "user_id": 468361, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0cfd64ab75e1111c832a7f40b67d5143?s=128&d=identicon&r=PG", "display_name": "Grant Neufeld", "link": "https://stackoverflow.com/users/468361/grant-neufeld"}, "is_accepted": false, "score": 0, "last_activity_date": 1516134172, "creation_date": 1516134172, "answer_id": 48289222, "question_id": 48288160, "link": "https://stackoverflow.com/questions/48288160/handling-a-method-from-outside-of-a-mixin-module-in-ruby-and-rspec/48289222#48289222", "title": "Handling a method from outside of a mixin module in ruby and rspec", "body": "<p>In your mixin module, you need to tell it that <code>ShortenedUrl</code> is from outside the module by prepending <code>::</code>:</p>\n\n<pre><code>module ReusableBitlyLinks\n  def shorten_url(url, *args)\n    ::ShortenedUrl.shorten_url_with_bitly(url, email.user)\n  end\nend\n</code></pre>\n\n<p>You may also need to do a <code>require</code> inside the mixin file to load whatever file it is that defines <code>ShortenedUrl</code>.</p>\n\n<p>Further, in your test file, the line:</p>\n\n<pre><code>require File.expand_path(\"../../../../app/decorators/mixins/reusable_bitly_links\", __FILE__)\n</code></pre>\n\n<p>could be simplified to:</p>\n\n<pre><code>require_relative '../../../../app/decorators/mixins/reusable_bitly_links'\n</code></pre>\n"}], "owner": {"reputation": 3518, "user_id": 3384609, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/1cb30cda6294521f9c6e60277504c5c2?s=128&d=identicon&r=PG", "display_name": "Clintm", "link": "https://stackoverflow.com/users/3384609/clintm"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 45, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1516172083, "creation_date": 1516129420, "last_edit_date": 1516172083, "question_id": 48288160, "link": "https://stackoverflow.com/questions/48288160/handling-a-method-from-outside-of-a-mixin-module-in-ruby-and-rspec", "title": "Handling a method from outside of a mixin module in ruby and rspec", "body": "<p>I have a class that looks like this:</p>\n\n<pre><code>module ReusableBitlyLinks\n  def shorten_url url, *args\n    ShortenedUrl.shorten_url_with_bitly( url, email.user )\n  end\nend\n</code></pre>\n\n<p>I have a test that looks like this:</p>\n\n<pre><code>require File.expand_path(\"../../../../app/decorators/mixins/reusable_bitly_links\", __FILE__)\n\ninclude ReusableBitlyLinks\n\ndescribe ReusableBitlyLinks do\n\n  describe \"shorten_url\" do\n    it \"works\" do\n      ReusableBitlyLinks.shorten_url('asdf').should == 'asdf'\n    end\n  end\nend\n</code></pre>\n\n<p>When I run the test I get an error that says: \n<code>uninitialized constant ReusableBitlyLinks::ShortenedUrl</code></p>\n\n<p>How do I mock stub <code>ReusableBitlyLinks::ShortenedUrl</code>?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "heroku"], "comments": [{"owner": {"reputation": 4690, "user_id": 1937435, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/YyN37.jpg?s=128&g=1", "display_name": "Josh Brody", "link": "https://stackoverflow.com/users/1937435/josh-brody"}, "edited": false, "score": 0, "creation_date": 1516130610, "post_id": 48287810, "comment_id": 83561655, "body": "make sure you&#39;re including <code>rails_ujs</code> in your javascript bundle; alternatively, you can set the <code>config.sign_out_via</code> to <code>[:get, :delete]</code> in devise.rb"}], "answers": [{"comments": [{"owner": {"reputation": 25, "user_id": 9132070, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-TjtjBsL5vAI/AAAAAAAAAAI/AAAAAAAABzY/41KuC7bPYdQ/photo.jpg?sz=128", "display_name": "Joseph Harskamp", "link": "https://stackoverflow.com/users/9132070/joseph-harskamp"}, "edited": false, "score": 0, "creation_date": 1516141140, "post_id": 48288293, "comment_id": 83566545, "body": "Sure enough, I&#39;m getting 404&#39;s on the application.js file. I&#39;m not sure how to rectify it either.  <code>&#47;&#47;= require jquery &#47;&#47;= require jquery_ujs &#47;&#47;= require rails-ujs &#47;&#47;= require turbolinks &#47;&#47;= require_tree .</code>   that&#39;s my application.js file. I also added it in the assets.rb file, no luck."}, {"owner": {"reputation": 3015, "user_id": 1518336, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/238d1c14366d5d0dd398b088c99f7b4c?s=128&d=identicon&r=PG", "display_name": "Daniel Westendorf", "link": "https://stackoverflow.com/users/1518336/daniel-westendorf"}, "reply_to_user": {"reputation": 25, "user_id": 9132070, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-TjtjBsL5vAI/AAAAAAAAAAI/AAAAAAAABzY/41KuC7bPYdQ/photo.jpg?sz=128", "display_name": "Joseph Harskamp", "link": "https://stackoverflow.com/users/9132070/joseph-harskamp"}, "edited": false, "score": 0, "creation_date": 1516202931, "post_id": 48288293, "comment_id": 83594069, "body": "@JosephHarskamp You&#39;re probably better off asking a separate question about why you&#39;re getting a 404 for your application.js."}], "tags": [], "owner": {"reputation": 3015, "user_id": 1518336, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/238d1c14366d5d0dd398b088c99f7b4c?s=128&d=identicon&r=PG", "display_name": "Daniel Westendorf", "link": "https://stackoverflow.com/users/1518336/daniel-westendorf"}, "is_accepted": false, "score": 1, "last_activity_date": 1516129971, "creation_date": 1516129971, "answer_id": 48288293, "question_id": 48287810, "link": "https://stackoverflow.com/questions/48287810/rails-app-on-heroku-not-allowing-logout/48288293#48288293", "title": "Rails app on heroku not allowing logout", "body": "<p>Per your log message, the logout action is being submitted with a <code>GET</code> instead of a <code>DELETE</code> method. It looks like your logout link is using UJS. </p>\n\n<p>If it's working locally in dev, but not when deployed, it's probably because your javascript isn't compiling correctly, served correctly, or being loaded correctly. Look at your browser developer console to see if anything is being logged there.</p>\n"}], "owner": {"reputation": 25, "user_id": 9132070, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-TjtjBsL5vAI/AAAAAAAAAAI/AAAAAAAABzY/41KuC7bPYdQ/photo.jpg?sz=128", "display_name": "Joseph Harskamp", "link": "https://stackoverflow.com/users/9132070/joseph-harskamp"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 56, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1516129971, "creation_date": 1516127973, "question_id": 48287810, "link": "https://stackoverflow.com/questions/48287810/rails-app-on-heroku-not-allowing-logout", "title": "Rails app on heroku not allowing logout", "body": "<p>I'm having issues with my rails app when i deploy it to heroku. I'm using steam-omniauth. The log out function works correctly on my machine, but won't work when deployed. Clicking the logout link transfers me to a 404 screen and this error message in the log. looks like its trying to use 'get' for some reason. I've also made sure to rake my db, and pushed the latest versions through to heroku. I'm kind of out of ideas.</p>\n\n<p>at=info method=GET path=\"/logout\" host=warm-sands-60002.herokuapp.com request_id=d01b9d02-238f-41f6-a894-0e74bf64a1c0 fwd=\"98.169.0.136\" dyno=web.1 connect=1ms service=6ms status=404 bytes=1902 protocol=https`</p>\n\n<p>my destroy action in the sessions_controller</p>\n\n<pre><code>def destroy\n  if current_user\n    session.delete(:user_id)\n    flash[:success] = \"Goodbye!\"\n    redirect_to root_path\n  end\nend\n</code></pre>\n\n<p>sessions helper</p>\n\n<pre><code>def current_user\n    if cookies[:remember_token].present?\n        @current_user ||= User.find_by_remember_token(cookies[:remember_token])\n    end\nend\n</code></pre>\n\n<p>routes</p>\n\n<pre><code>match '/auth/:provider/callback', to: 'sessions#create', via: :all\n\n\ndelete '/logout', to: 'sessions#destroy'\n</code></pre>\n\n<p>and my logout link</p>\n\n<p><code>&lt;li class=\"nav-item\"&gt;&lt;%= link_to 'Log Out', logout_path, method: :delete %&gt;&lt;/li&gt;</code></p>\n\n<p>if theres anything i can provide let me know. this is pretty frustrating. </p>\n"}, {"tags": ["ruby-on-rails", "ruby", "activerecord", "internationalization"], "comments": [{"owner": {"reputation": 52685, "user_id": 980550, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/8emhY.jpg?s=128&g=1", "display_name": "lurker", "link": "https://stackoverflow.com/users/980550/lurker"}, "edited": false, "score": 0, "creation_date": 1516127795, "post_id": 48287732, "comment_id": 83560347, "body": "What about <code>activemodel: errors: models: search: customers: &quot;xxxxx&quot;</code>? That seems to align with your working structure. The two ideas you showed for customer don&#39;t seem to align with it."}], "answers": [{"tags": [], "owner": {"reputation": 51, "user_id": 6008847, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-ZoGNJqPwbuw/AAAAAAAAAAI/AAAAAAAADOg/WJq3L4YYxho/photo.jpg?sz=128", "display_name": "Gimmy", "link": "https://stackoverflow.com/users/6008847/gimmy"}, "is_accepted": false, "score": 0, "last_activity_date": 1516134749, "creation_date": 1516134749, "answer_id": 48289364, "question_id": 48287732, "link": "https://stackoverflow.com/questions/48287732/activerecord-translate-nested-attribute/48289364#48289364", "title": "ActiveRecord translate nested attribute", "body": "<p>the reason that you see \"Customers nicht im Alter\" is because the model name is not translated(for customer model). You only added translation for the error.\nYou can find more here: <a href=\"http://guides.rubyonrails.org/i18n.html#translations-for-active-record-models\" rel=\"nofollow noreferrer\">http://guides.rubyonrails.org/i18n.html#translations-for-active-record-models</a></p>\n\n<pre><code>de:\n  activemodel/activerecord(depnding of what you use):\n    models:\n      customer:\n        one: *german translation for one*\n        other: *german translation for many*\n</code></pre>\n"}], "owner": {"reputation": 2781, "user_id": 277668, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/c43cb9216745cc2a8a85aae601e5072e?s=128&d=identicon&r=PG", "display_name": "jackbot", "link": "https://stackoverflow.com/users/277668/jackbot"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 221, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1516134749, "creation_date": 1516127610, "question_id": 48287732, "link": "https://stackoverflow.com/questions/48287732/activerecord-translate-nested-attribute", "title": "ActiveRecord translate nested attribute", "body": "<p>I've got a model that looks like this:</p>\n\n<pre><code>class Search\n  validate :customers_are_of_age\n\n  def customers\n    [customer1, customer2]\n  end\n\n  def customers_are_of_age\n    unless customers.all?(&amp;:of_age)\n      errors.add(:customers, :not_of_age)\n    end\n  end\nend\n</code></pre>\n\n<p>It's a contrived example but highlights the issue I'm facing. Now my translation file looks like so:</p>\n\n<pre><code>en:\n  activemodel:\n    errors:\n      models: \n        search: \n          customers:\n            not_of_age: \"not of age\"\nde:\n  activemodel:\n    errors:\n      models: \n        search: \n          customers:\n            not_of_age: \"nicht im Alter\"\n</code></pre>\n\n<p>This works mostly OK, in that if I have a search object which fails the validation, I get the message \"Customers not of age\" which is what I want. However in German, I get the message \"Customers nicht im Alter\".</p>\n\n<p>How do I translate the \"customers\" key? I've tried the following to no avail:</p>\n\n<pre><code>activemodel:\n    errors:\n      attributes:\n        search/customers: \"Customers\"\n      models: \n        search: \n          customers:\n            not_of_age: \"not of age\"\n</code></pre>\n\n<p>I also tried this, which doesn't work either:</p>\n\n<pre><code>activemodel:\n      models: \n        search: \n          customers:\n            one: \"Customer\"\n            many: \"Customers\"\n            not_of_age: \"not of age\"\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "devise"], "comments": [{"owner": {"reputation": 536, "user_id": 8436554, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/d3XUa.jpg?s=128&g=1", "display_name": "Amr Adel", "link": "https://stackoverflow.com/users/8436554/amr-adel"}, "edited": false, "score": 0, "creation_date": 1516189160, "post_id": 48287534, "comment_id": 83584832, "body": "Did you tried to search about overriding the behavior of <code>PasswordController</code> or <code>recoverable</code> module to achieve your demands. What i understood is you want to send a notification of the fact that the password has been changed to another e-mail, right?"}], "answers": [{"tags": [], "owner": {"reputation": 1230, "user_id": 3323777, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9b57e9b0115e6d0356bd4d7502d5cbb9?s=128&d=identicon&r=PG&f=1", "display_name": "eugene-nikolaev", "link": "https://stackoverflow.com/users/3323777/eugene-nikolaev"}, "is_accepted": true, "score": 3, "last_activity_date": 1516190211, "creation_date": 1516190211, "answer_id": 48300604, "question_id": 48287534, "link": "https://stackoverflow.com/questions/48287534/send-password-reset-to-a-different-email-devise/48300604#48300604", "title": "Send Password Reset to a Different Email - Devise", "body": "<p><strong>Please note</strong>: it is pretty unrecommended way to implement things.<br>It is not within scope of the best practices.<br>\nIt is dirty and fragile.<br>\nBut if you really need to achieve it no matter how dirty are the measures, this is it.<br></p>\n\n<p>Well, the requirement to send the reset instruction to other email is already weird enough. Is it really a last resort?</p>\n\n<p>Anyway, </p>\n\n<p>You've not specified the Devise version but that behaviour was unlikely changed too much so lets take the current master and look how it sends emails:</p>\n\n<p><a href=\"https://github.com/plataformatec/devise/blob/f39c6fd92774cb66f96f546d8d5e8281542b4e78/lib/devise/mailers/helpers.rb#L31\" rel=\"nofollow noreferrer\">https://github.com/plataformatec/devise/blob/f39c6fd92774cb66f96f546d8d5e8281542b4e78/lib/devise/mailers/helpers.rb#L31</a></p>\n\n<pre><code>def headers_for(action, opts)\n    headers = {\n      subject: subject_for(action),\n      to: resource.email,\n</code></pre>\n\n<p>So, the getter is somewhat hardcoded.</p>\n\n<p>Though, it is possible to create a token and set it as Devise does:</p>\n\n<p><a href=\"https://github.com/plataformatec/devise/blob/d1948b79d3e933253baa753bd033c92171c0a7d0/lib/devise/models/recoverable.rb#L89\" rel=\"nofollow noreferrer\">https://github.com/plataformatec/devise/blob/d1948b79d3e933253baa753bd033c92171c0a7d0/lib/devise/models/recoverable.rb#L89</a></p>\n\n<pre><code>def set_reset_password_token\n  raw, enc = Devise.token_generator.generate(self.class, :reset_password_token)\n\n  self.reset_password_token   = enc\n  self.reset_password_sent_at = Time.now.utc\n  save(validate: false)\n  raw\nend\n</code></pre>\n\n<p>And when find in sources how Devise sends it and try to somehow replicate it but using your custom email.</p>\n\n<p>I think the less evil in this case would be just implementing your own mailer for that kind of reset instructions which would use the same URL as Devise does.<br>\nOtherwise you would have too much coupling with a current version of Devise.</p>\n"}], "owner": {"reputation": 2960, "user_id": 7426461, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/Ldwxy.jpg?s=128&g=1", "display_name": "Cannon Moyer", "link": "https://stackoverflow.com/users/7426461/cannon-moyer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 443, "favorite_count": 0, "accepted_answer_id": 48300604, "answer_count": 1, "score": 2, "last_activity_date": 1516190211, "creation_date": 1516126831, "question_id": 48287534, "link": "https://stackoverflow.com/questions/48287534/send-password-reset-to-a-different-email-devise", "title": "Send Password Reset to a Different Email - Devise", "body": "<p>I'm using ruby on rails 5 with devise and I need to send a password reset email to a different email than the one stored in my User table. How can this be achieved? </p>\n"}, {"tags": ["ruby", "rspec"], "comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1516132584, "post_id": 48287510, "comment_id": 83562648, "body": "Is that really the best placeholder name you could come up with?"}, {"owner": {"reputation": 956, "user_id": 1667207, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/w3ttm.jpg?s=128&g=1", "display_name": "verygoodsoftwarenotvirus", "link": "https://stackoverflow.com/users/1667207/verygoodsoftwarenotvirus"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1516136889, "post_id": 48287510, "comment_id": 83564721, "body": "I don&#39;t see how it&#39;s relevant one way or the other."}], "answers": [{"comments": [{"owner": {"reputation": 956, "user_id": 1667207, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/w3ttm.jpg?s=128&g=1", "display_name": "verygoodsoftwarenotvirus", "link": "https://stackoverflow.com/users/1667207/verygoodsoftwarenotvirus"}, "edited": false, "score": 0, "creation_date": 1516143984, "post_id": 48290956, "comment_id": 83567554, "body": "The purpose of these tests is only to validate that a container has the relevant tab completions installed, not to validate any behavior with the application the completions are for."}, {"owner": {"reputation": 15006, "user_id": 520567, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/6cb1b2c58abc2116f910ec9253ee387f?s=128&d=identicon&r=PG", "display_name": "akostadinov", "link": "https://stackoverflow.com/users/520567/akostadinov"}, "reply_to_user": {"reputation": 956, "user_id": 1667207, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/w3ttm.jpg?s=128&g=1", "display_name": "verygoodsoftwarenotvirus", "link": "https://stackoverflow.com/users/1667207/verygoodsoftwarenotvirus"}, "edited": false, "score": 0, "creation_date": 1516145833, "post_id": 48290956, "comment_id": 83568092, "body": "@verygoodsoftwarenotvirus, this is exactly what I write to you above"}], "tags": [], "owner": {"reputation": 15006, "user_id": 520567, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/6cb1b2c58abc2116f910ec9253ee387f?s=128&d=identicon&r=PG", "display_name": "akostadinov", "link": "https://stackoverflow.com/users/520567/akostadinov"}, "is_accepted": false, "score": 0, "last_activity_date": 1516142212, "creation_date": 1516142212, "answer_id": 48290956, "question_id": 48287510, "link": "https://stackoverflow.com/questions/48287510/how-to-test-external-tab-completion-script-in-ruby/48290956#48290956", "title": "How to test external tab completion script in Ruby", "body": "<p>You shouldn't fa^M^M exec the thing. It doesn't work like this. You need to interact with a <a href=\"https://ruby-doc.org/stdlib-2.4.1/libdoc/pty/rdoc/PTY.html\" rel=\"nofollow noreferrer\">PTY</a>. Basically spawn a shell in a PTY, then send keys like you would do interactively.</p>\n\n<p>Alternatively you could write <code>expect</code> scripts and use the <code>expect</code> utility found in most linux distros.</p>\n\n<p>Auto-completion is a shell function, not a program function. When you hit <code>tab</code>, <code>bash</code> or some other shell is looking for completion definitions and uses them to show you the available options. It is <strong>not</strong> executing the program in any way.</p>\n"}], "owner": {"reputation": 956, "user_id": 1667207, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/w3ttm.jpg?s=128&g=1", "display_name": "verygoodsoftwarenotvirus", "link": "https://stackoverflow.com/users/1667207/verygoodsoftwarenotvirus"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 48, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1516142212, "creation_date": 1516126741, "question_id": 48287510, "link": "https://stackoverflow.com/questions/48287510/how-to-test-external-tab-completion-script-in-ruby", "title": "How to test external tab completion script in Ruby", "body": "<p>So say I have an external command, <code>fart</code>, that supports tab completion for its subcommands. When you type <code>fart &lt;\\tab&gt;&lt;\\tab&gt;</code> in the command line, it prints out something like </p>\n\n<pre><code>$ &gt; fart \u2588\ndo             some             things             here              \nor             other            stuff              there\n</code></pre>\n\n<p>however, if you type <code>fart &lt;\\enter&gt;</code>, it prints the help text</p>\n\n<pre><code>fart is a tool for doing things and stuff\n\nUsage: fart &lt;command&gt;\n\nCommands:\n\n  init     Initialize a new something or other\n  status   Report the status of the thing\n  version  Show the fart version information\n</code></pre>\n\n<p>I want to test that the tab completion works via an integration test suite in Ruby. When I tell <code>exec</code> to execute <code>fart \\t\\t</code>, I get the help output, not the autocomplete output. How can I get <code>exec</code> to not terminate the shell command with a newline so that I can assert the autocompletion output?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "macos", "rvm", "macos-sierra"], "comments": [{"owner": {"reputation": 861, "user_id": 3012906, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/a4VKS.jpg?s=128&g=1", "display_name": "GuilPejon", "link": "https://stackoverflow.com/users/3012906/guilpejon"}, "edited": false, "score": 0, "creation_date": 1589503793, "post_id": 48287458, "comment_id": 109328440, "body": "I&#39;m having the exact same problem, but in my case I can&#39;t even install bundler"}], "answers": [{"tags": [], "owner": {"reputation": 346, "user_id": 5331859, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/8ddfcdd5d8fc6e4d7cebc17d48a19600?s=128&d=identicon&r=PG&f=1", "display_name": "zasman", "link": "https://stackoverflow.com/users/5331859/zasman"}, "is_accepted": false, "score": 1, "last_activity_date": 1516129000, "creation_date": 1516129000, "answer_id": 48288056, "question_id": 48287458, "link": "https://stackoverflow.com/questions/48287458/rvm-not-changing-ruby-version-on-mac/48288056#48288056", "title": "RVM Not Changing Ruby Version on Mac", "body": "<p>Looks like i had bundler installed before RVM was setup. Ran <code>gem install bundler</code> and now I'm able to bundle install and everything works fine.</p>\n"}], "owner": {"reputation": 346, "user_id": 5331859, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/8ddfcdd5d8fc6e4d7cebc17d48a19600?s=128&d=identicon&r=PG&f=1", "display_name": "zasman", "link": "https://stackoverflow.com/users/5331859/zasman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 648, "favorite_count": 0, "answer_count": 1, "score": 3, "last_activity_date": 1516129000, "creation_date": 1516126512, "question_id": 48287458, "link": "https://stackoverflow.com/questions/48287458/rvm-not-changing-ruby-version-on-mac", "title": "RVM Not Changing Ruby Version on Mac", "body": "<p>I'm trying to change my ruby versions on Mac and even though it says its on the right ruby version (2.3.4), it still doesn't work.</p>\n\n<p>Example output:</p>\n\n<pre><code>:~ my_username$ cd my_project_name\n:my_project_name my_username$ which ruby\n/Users/my_username/.rvm/rubies/ruby-2.3.4/bin/ruby\n:my_project_name my_username$ ruby -v\nruby 2.3.4p301 (2017-03-30 revision 58214) [x86_64-darwin16]\n:my_project_name my_username$ bundle install\nIgnoring executable-hooks-1.3.2 because its extensions are not built. Try: gem pristine executable-hooks --version 1.3.2\nIgnoring gem-wrappers-1.3.2 because its extensions are not built. Try: gem pristine gem-wrappers --version 1.3.2\nYour Ruby version is 2.5.0, but your Gemfile specified 2.3.4\n:my_project_name my_username$\n</code></pre>\n\n<p>And RVM list, and then attempting to bundle install for my project:</p>\n\n<pre><code>:my_project_name my_username$ rvm list\n\nrvm rubies\n\n=* ruby-2.3.4 [ x86_64 ]\n   ruby-2.4.0 [ x86_64 ]\n   ruby-2.4.1 [ x86_64 ]\n   ruby-2.4.2 [ x86_64 ]\n\n# =&gt; - current\n# =* - current &amp;&amp; default\n#  * - default\n\n:my_project_name my_username$ bundle install\nIgnoring executable-hooks-1.3.2 because its extensions are not built. Try: gem pristine executable-hooks --version 1.3.2\nIgnoring gem-wrappers-1.3.2 because its extensions are not built. Try: gem pristine gem-wrappers --version 1.3.2\nYour Ruby version is 2.5.0, but your Gemfile specified 2.3.4\n:my_project_name my_username$\n</code></pre>\n\n<p>As you can see, I have both 2.3.4 installed and set to the current ruby version but it doesn't detect it in my directory. I've closed and retried several times in a new terminal window.</p>\n"}, {"tags": ["arrays", "ruby", "sorting"], "comments": [{"owner": {"reputation": 28612, "user_id": 5025116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7WdYi.jpg?s=128&g=1", "display_name": "Sebastian Palma", "link": "https://stackoverflow.com/users/5025116/sebastian-palma"}, "edited": false, "score": 1, "creation_date": 1516125805, "post_id": 48287291, "comment_id": 83559412, "body": "There&#39;s one missing &quot;portrait&quot;, what&#39;s your expected output, what are the scenarios to cover?"}, {"owner": {"reputation": 2545, "user_id": 1783642, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bc69b60352cb9a411cb033b26bd8136e?s=128&d=identicon&r=PG", "display_name": "Puhlze", "link": "https://stackoverflow.com/users/1783642/puhlze"}, "edited": false, "score": 0, "creation_date": 1516126367, "post_id": 48287291, "comment_id": 83559700, "body": "Rather than &quot;sorting&quot; the array, you could gather total counts of landscape and portrait entries and create a new array with elements in the correct positions. This allows you to easily handle the case where there aren&#39;t enough &quot;landscape&quot; available and gives you easy control of the output order."}, {"owner": {"reputation": 9030, "user_id": 5101476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JCQrl.jpg?s=128&g=1", "display_name": "ice\u30c4", "link": "https://stackoverflow.com/users/5101476/ice%e3%83%84"}, "edited": false, "score": 1, "creation_date": 1516126409, "post_id": 48287291, "comment_id": 83559727, "body": "&#39;With a fallback&#39;. Okay what&#39;s the fallback?"}], "answers": [{"comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1516151364, "post_id": 48287590, "comment_id": 83569572, "body": "Keith, I added your solution to the benchmark. I don&#39;t know how I missed it earlier."}], "tags": [], "owner": {"reputation": 4272, "user_id": 501266, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/iDtAx.jpg?s=128&g=1", "display_name": "Keith Bennett", "link": "https://stackoverflow.com/users/501266/keith-bennett"}, "is_accepted": false, "score": 0, "last_activity_date": 1516127729, "last_edit_date": 1516127729, "creation_date": 1516127028, "answer_id": 48287590, "question_id": 48287291, "link": "https://stackoverflow.com/questions/48287291/sorting-sequentially/48287590#48287590", "title": "Sorting sequentially", "body": "<p>Without knowing what you mean by fallback, here is an illustration of how to achieve what you want. It's probably not the most elegant solution, but it's simple:</p>\n\n<pre><code>#!/usr/bin/env ruby\n\narr = (['P'] * 32 + ['L'] * 12).shuffle  # as an example\nps, ls = arr.partition { |element| element == 'P' }\nresult = []\n\nloop do\n    portrait_count = [4, ps.size].min\n    portrait_count.times { result &lt;&lt; ps.shift }\n\n    landscape_count = [1, ls.size].min\n    landscape_count.times { result &lt;&lt; ls.shift }\n\n    break if ps.empty? &amp;&amp; ls.empty?\nend\n\nputs result.each_slice(5) { |slice| p slice }\n\n=begin\nOutputs:\n[\"P\", \"P\", \"P\", \"P\", \"L\"]\n[\"P\", \"P\", \"P\", \"P\", \"L\"]\n[\"P\", \"P\", \"P\", \"P\", \"L\"]\n[\"P\", \"P\", \"P\", \"P\", \"L\"]\n[\"P\", \"P\", \"P\", \"P\", \"L\"]\n[\"P\", \"P\", \"P\", \"P\", \"L\"]\n[\"P\", \"P\", \"P\", \"P\", \"L\"]\n[\"P\", \"P\", \"P\", \"P\", \"L\"]\n[\"L\", \"L\", \"L\", \"L\"]\n=end\n</code></pre>\n\n<p>I'm assuming there is more to each object than merely a 'portrait' or 'landscape' switch, and that's why I get the elements out of the array in order.</p>\n"}, {"tags": [], "owner": {"reputation": 28612, "user_id": 5025116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7WdYi.jpg?s=128&g=1", "display_name": "Sebastian Palma", "link": "https://stackoverflow.com/users/5025116/sebastian-palma"}, "is_accepted": true, "score": 3, "last_activity_date": 1516127503, "creation_date": 1516127503, "answer_id": 48287704, "question_id": 48287291, "link": "https://stackoverflow.com/questions/48287291/sorting-sequentially/48287704#48287704", "title": "Sorting sequentially", "body": "<p>I guess if the number of \"portraits\" doesn't \"coincide\" with the number of \"landscapes\" then it'd add the remaining ones in a row:</p>\n\n<pre><code>arr = %w[portrait landscape portrait portrait portrait portrait portrait portrait portrait portrait portrait portrait portrait portrait portrait portrait portrait portrait landscape landscape]\nlandscapes, portraits =  arr.sort.slice_when { |a, b| a != b }.to_a\np portraits.each_slice(4).flat_map.with_index { |e, i| e &lt;&lt; landscapes[i] }.compact\n\n# [\"portrait\", \"portrait\", \"portrait\", \"portrait\", \"landscape\", \"portrait\", \"portrait\", \"portrait\", \"portrait\", \"landscape\", \"portrait\", \"portrait\", \"portrait\", \"portrait\", \"landscape\", \"portrait\", \"portrait\", \"portrait\", \"portrait\", \"portrait\"]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": false, "score": 0, "last_activity_date": 1516151974, "last_edit_date": 1516151974, "creation_date": 1516142530, "answer_id": 48291006, "question_id": 48287291, "link": "https://stackoverflow.com/questions/48287291/sorting-sequentially/48291006#48291006", "title": "Sorting sequentially", "body": "<p>This method emphasizes computational efficiency. I count the number of \"portrait\"'s in the array and from that compute the number of groups of four and the numbers of remaining \"portrait\"'s and \"landscape\"'s. I then uses those three quantities to constructs the desired array, which does not require any iterative steps.</p>\n\n<p><strong>Code</strong></p>\n\n<pre><code>def rearrange(arr)\n  nbr_portraits = arr.count(\"portrait\")\n  nbr_landscapes = arr.size - nbr_portraits\n  groups_of_4_portraits = [nbr_portraits/4, nbr_landscapes].min \n  nbr_portraits -= 4 * groups_of_4_portraits\n  nbr_landscapes -= groups_of_4_portraits\n  [*[*[\"portrait\"]*4, \"landscape\"]*groups_of_4_portraits,\n   *[\"portrait\"] * nbr_portraits, *[\"landscape\"] * nbr_landscapes] \nend\n</code></pre>\n\n<p><strong>Examples</strong></p>\n\n<pre><code>arr = [\"portrait\", \"landscape\", \"portrait\", \"portrait\", \"portrait\", \"portrait\",\n       \"portrait\", \"portrait\", \"portrait\", \"portrait\", \"portrait\", \"portrait\",\n       \"portrait\", \"portrait\", \"portrait\", \"portrait\", \"portrait\", \"portrait\",\n      \"landscape\", \"landscape\"]\n\nrearrange arr\n  #=&gt; [\"portrait\", \"portrait\", \"portrait\", \"portrait\", \"landscape\",\n  #    \"portrait\", \"portrait\", \"portrait\", \"portrait\", \"landscape\",\n  #    \"portrait\", \"portrait\", \"portrait\", \"portrait\", \"landscape\",\n  #    \"portrait\", \"portrait\", \"portrait\", \"portrait\", \"portrait\"]   \n\nrearrange %w| portrait portrait portrait landscape portrait portrait\n              portrait portrait portrait portrait |\n  #=&gt; [\"portrait\", \"portrait\", \"portrait\", \"portrait\", \"landscape\",\n  #    \"portrait\", \"portrait\", \"portrait\", \"portrait\", \"portrait\"]\n\nrearrange %w| portrait portrait portrait portrait portrait |\n  #=&gt; [\"portrait\", \"portrait\", \"portrait\", \"portrait\", \"portrait\"]\n\nrearrange %w| landscape landscape portrait landscape portrait |\n  #=&gt; [\"portrait\", \"portrait\", \"landscape\", \"landscape\", \"landscape\"]\n\nrearrange %w| landscape landscape landscape landscape |\n  #=&gt; [\"landscape\", \"landscape\", \"landscape\", \"landscape\"]\n\nrearrange []\n  #=&gt; []\n</code></pre>\n\n<p><strong>Explanation</strong></p>\n\n<p>For <code>arr</code> above the steps are as follows.</p>\n\n<pre><code>nbr_portraits = arr.count(\"portrait\")\n  #=&gt; 17\nnbr_landscapes = arr.size - nbr_portraits\n  #=&gt; 3\ngroups_of_4_portraits = [nbr_portraits/4, nbr_landscapes].min\n  #=&gt; 3\nnbr_portraits -= 4 * groups_of_4_portraits\n  #=&gt; 5\nnbr_landscapes -= groups_of_4_portraits\n  #=&gt; 0\nb = [\"portrait\"] * 4\n  #=&gt; [\"portrait\", \"portrait\", \"portrait\", \"portrait\"]\nc = [*b, \"landscape\"]\n  #=&gt; [\"portrait\", \"portrait\", \"portrait\", \"portrait\", \"landscape\"]\nd = c * groups_of_4_portraits\n  #=&gt; [\"portrait\", \"portrait\", \"portrait\", \"portrait\", \"landscape\",\n  #    \"portrait\", \"portrait\", \"portrait\", \"portrait\", \"landscape\",\n  #    \"portrait\", \"portrait\", \"portrait\", \"portrait\", \"landscape\"]\ne = [\"portrait\"] * nbr_portraits\n  #=&gt; [\"portrait\", \"portrait\", \"portrait\", \"portrait\", \"portrait\"]\nf = [\"landscape\"] * nbr_landscapes\n  #=&gt; []\n[*d, *e, *f]\n  #=&gt; [\"portrait\", \"portrait\", \"portrait\", \"portrait\", \"landscape\",\n  #    \"portrait\", \"portrait\", \"portrait\", \"portrait\", \"landscape\",\n  #    \"portrait\", \"portrait\", \"portrait\", \"portrait\", \"landscape\",\n  #    \"portrait\", \"portrait\", \"portrait\", \"portrait\", \"portrait\"]   \n</code></pre>\n\n<p><strong>Quick Benchmark</strong></p>\n\n<p>Here I am comparing the above method with Sebastian's and Keith's solutions. The results are not directly comparable because we understood the question differently. Keith and I put any left-over \"portrait\"'s or \"landscape\"'s at the end (\"portrait\"'s first), whereas Sebastian puts only left-over \"portrait\"'s at the end, discarding any left-over \"landscape\"'s.</p>\n\n<pre><code>require 'fruity'\n\nnp = 100\nnl = 120\n\np (arr = [*[\"portrait\"]*np, *[\"landscape\"]*nl].shuffle).size\n\ndef sebastian(arr)\n  landscapes, portraits =  arr.sort.slice_when { |a, b| a != b }.to_a\n  portraits.each_slice(4).flat_map.with_index { |e, i| e &lt;&lt; landscapes[i] }.compact\nend\n\ndef keith(arr)\n  ps, ls = arr.partition { |element| element == 'portrait' }\n  result = []    \n  loop do\n    portrait_count = [4, ps.size].min\n    portrait_count.times { result &lt;&lt; ps.shift }\n    landscape_count = [1, ls.size].min\n    landscape_count.times { result &lt;&lt; ls.shift }\n    break if ps.empty? &amp;&amp; ls.empty?\n  end\n  result\nend\n\ncompare(\n  Sebastian: -&gt; { sebastian arr },\n  Keith:     -&gt; { keith arr },\n  Cary:      -&gt; { rearrange arr }\n)\n\nRunning each test 64 times. Test will take about 1 second.\nCary is faster than Keith by 5x \u00b1 1.0\nKeith is similar to Sebastian\n</code></pre>\n"}], "owner": {"reputation": 4429, "user_id": 102133, "user_type": "registered", "accept_rate": 99, "profile_image": "https://www.gravatar.com/avatar/561a3a55352fe6a5343e541a6894b541?s=128&d=identicon&r=PG", "display_name": "Ben", "link": "https://stackoverflow.com/users/102133/ben"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 63, "favorite_count": 1, "accepted_answer_id": 48287704, "answer_count": 3, "score": -3, "last_activity_date": 1516188162, "creation_date": 1516125668, "last_edit_date": 1516188162, "question_id": 48287291, "link": "https://stackoverflow.com/questions/48287291/sorting-sequentially", "title": "Sorting sequentially", "body": "<p>Having an unordered array containing two distincts elements :</p>\n\n<pre><code>arr = [\"portrait\", \"landscape\", \"portrait\", \"portrait\", \"portrait\", \"portrait\", \"portrait\", \"portrait\", \"portrait\", \"portrait\", \"portrait\", \"portrait\", \"portrait\", \"portrait\", \"portrait\", \"portrait\", \"portrait\", \"portrait\", \"landscape\", \"landscape\"]\n</code></pre>\n\n<p>Given this example, looking into 'sorting' the array to have one <code>landscape</code> every four <code>portraits</code>:</p>\n\n<pre><code>4 portraits\n1 landscape\n4 portraits\n1 landscape\n...\n</code></pre>\n\n<p>If not a one liner, what would be the shortest way to achieve such goal?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-5"], "comments": [{"owner": {"reputation": 28612, "user_id": 5025116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7WdYi.jpg?s=128&g=1", "display_name": "Sebastian Palma", "link": "https://stackoverflow.com/users/5025116/sebastian-palma"}, "edited": false, "score": 0, "creation_date": 1516125071, "post_id": 48287113, "comment_id": 83558989, "body": "What&#39;s the specific error?"}, {"owner": {"reputation": 52, "user_id": 7213185, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh3.googleusercontent.com/-bNyRYVLYN9s/AAAAAAAAAAI/AAAAAAAAAFU/Svahj953hiQ/photo.jpg?sz=128", "display_name": "Sion Roberts", "link": "https://stackoverflow.com/users/7213185/sion-roberts"}, "reply_to_user": {"reputation": 28612, "user_id": 5025116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7WdYi.jpg?s=128&g=1", "display_name": "Sebastian Palma", "link": "https://stackoverflow.com/users/5025116/sebastian-palma"}, "edited": false, "score": 0, "creation_date": 1516125343, "post_id": 48287113, "comment_id": 83559153, "body": "bad URI(is not URI?): file-digest:///Users/Sion/Google Drive/Projects/Accent_properties/app/assets/config/jquery-ui"}, {"owner": {"reputation": 12542, "user_id": 156746, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/8TsPx.jpg?s=128&g=1", "display_name": "DiegoSalazar", "link": "https://stackoverflow.com/users/156746/diegosalazar"}, "edited": false, "score": 0, "creation_date": 1516125483, "post_id": 48287113, "comment_id": 83559241, "body": "Could be a problem inside your application.css or js. Post those files, please."}, {"owner": {"reputation": 52, "user_id": 7213185, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh3.googleusercontent.com/-bNyRYVLYN9s/AAAAAAAAAAI/AAAAAAAAAFU/Svahj953hiQ/photo.jpg?sz=128", "display_name": "Sion Roberts", "link": "https://stackoverflow.com/users/7213185/sion-roberts"}, "edited": false, "score": 0, "creation_date": 1516127432, "post_id": 48287113, "comment_id": 83560175, "body": "Added as an edit now"}, {"owner": {"reputation": 2060, "user_id": 3944700, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/4df64cd1de5941fb49263a19d80f1482?s=128&d=identicon&r=PG&f=1", "display_name": "hashrocket", "link": "https://stackoverflow.com/users/3944700/hashrocket"}, "edited": false, "score": 0, "creation_date": 1516132100, "post_id": 48287113, "comment_id": 83562380, "body": "Try moving the require jquery-ui above the require tree . line."}, {"owner": {"reputation": 52, "user_id": 7213185, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh3.googleusercontent.com/-bNyRYVLYN9s/AAAAAAAAAAI/AAAAAAAAAFU/Svahj953hiQ/photo.jpg?sz=128", "display_name": "Sion Roberts", "link": "https://stackoverflow.com/users/7213185/sion-roberts"}, "edited": false, "score": 0, "creation_date": 1516133038, "post_id": 48287113, "comment_id": 83562862, "body": "Still gives the same error"}, {"owner": {"reputation": 26120, "user_id": 219883, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/c35b5b0f9e7cce48864f4f1545ead995?s=128&d=identicon&r=PG", "display_name": "Taryn East", "link": "https://stackoverflow.com/users/219883/taryn-east"}, "edited": false, "score": 0, "creation_date": 1516248835, "post_id": 48287113, "comment_id": 83613173, "body": "Try <code>require jquery_ui</code> instead (underscore instead of dash)?"}], "answers": [{"tags": [], "owner": {"reputation": 76, "user_id": 4644050, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-GkplLp89H-A/AAAAAAAAAAI/AAAAAAAADl4/GsiBnyF3eyM/photo.jpg?sz=128", "display_name": "Jason Noronha", "link": "https://stackoverflow.com/users/4644050/jason-noronha"}, "is_accepted": true, "score": 5, "last_activity_date": 1521990987, "creation_date": 1521990987, "answer_id": 49477398, "question_id": 48287113, "link": "https://stackoverflow.com/questions/48287113/bad-uri-on-rails-javascript-include-tag-and-stylesheet-link-tag/49477398#49477398", "title": "Bad URI on rails javascript_include_tag and stylesheet_link_tag", "body": "<p>I had exactly the same error and it drove me nuts. </p>\n\n<p>I'm guessing this has something to do with the URI (duh!) and I finally moved my project folder out of Google Drive to my desktop, running bundle, rails db:migrate, rails assets:precompile and then rails s. Turns out that fixed it for me.</p>\n"}], "owner": {"reputation": 52, "user_id": 7213185, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh3.googleusercontent.com/-bNyRYVLYN9s/AAAAAAAAAAI/AAAAAAAAAFU/Svahj953hiQ/photo.jpg?sz=128", "display_name": "Sion Roberts", "link": "https://stackoverflow.com/users/7213185/sion-roberts"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 616, "favorite_count": 0, "accepted_answer_id": 49477398, "answer_count": 1, "score": 2, "last_activity_date": 1521990987, "creation_date": 1516125012, "last_edit_date": 1516127415, "question_id": 48287113, "link": "https://stackoverflow.com/questions/48287113/bad-uri-on-rails-javascript-include-tag-and-stylesheet-link-tag", "title": "Bad URI on rails javascript_include_tag and stylesheet_link_tag", "body": "<p>So I took a few months out from this project, went to it today and tried to host it, and without touching anything I am getting a bad URI error on two links to my javascript and css.</p>\n\n<pre><code>&lt;%= javascript_include_tag \"application\", \"data-turbolinks-track\": \"reload\" %&gt;\n\n&lt;%= stylesheet_link_tag    \"application\", media: \"all\", \"data-turbolinks-track\": \"reload\" %&gt;\n</code></pre>\n\n<p>Those are the two pieces of code causing the errors. Does anyone know what the problem could be, I have tried all combinations of double/single quotes but to no avail.</p>\n\n<p>Any help will be much appreciated!</p>\n\n<p>Edit:</p>\n\n<p>Application.js:</p>\n\n<pre><code>    // This is a manifest file that'll be compiled into application.js, which will include all the files\n// listed below.\n//\n// Any JavaScript/Coffee file within this directory, lib/assets/javascripts, vendor/assets/javascripts,\n// or any plugin's vendor/assets/javascripts directory can be referenced here using a relative path.\n//\n// It's not advisable to add code directly here, but if you do, it'll appear at the bottom of the\n// compiled file. JavaScript code in this file should be added after the last require_* statement.\n//\n// Read Sprockets README (https://github.com/rails/sprockets#sprockets-directives) for details\n// about supported directives.\n//\n\n//= require jquery\n//= require jquery_ujs\n//= require turbolinks\n//= require_tree .\n//= require jquery-ui\n\n\n\n\n$(window).scroll(function() {\n    var distanceFromTop = $(this).scrollTop();\n    if (distanceFromTop &gt;= $('.navbar').height()) {\n        $('#sticky').fadeIn('1000').addClass('fixed');\n    } else {\n        $('#sticky').removeClass('fixed');\n    }\n});\n\n\n\n$(document).ready(function() {\n    $(\".dropdown-toggle\").dropdown();\n});\n</code></pre>\n\n<p>Application.css</p>\n\n<pre><code>    /*\n * This is a manifest file that'll be compiled into application.css, which will include all the files\n * listed below.\n *\n * Any CSS and SCSS file within this directory, lib/assets/stylesheets, vendor/assets/stylesheets,\n * or any plugin's vendor/assets/stylesheets directory can be referenced here using a relative path.\n *\n * You're free to add application-wide styles to this file and they'll appear at the bottom of the\n * compiled file so the styles you add here take precedence over styles defined in any other CSS/SCSS\n * files in this directory. Styles in this file should be added after the last require_* statement.\n * It is generally better to create a new file per style scope.\n *\n *= require_tree .\n *= require_self\n *= require jquery-ui\n */\n\nbody {\n    font-family: sans-serif;\n    background-color: white;\n    color: #686868;\n}\n\n@media (min-width: 768px) and (max-width: 991px) {\n    .navbar-collapse.collapse {\n        display: none !important;\n    }\n    .navbar-collapse.collapse.in {\n        display: block !important;\n    }\n    .navbar-header .collapse, .navbar-toggle {\n        display:block !important;\n    }\n    .navbar-header {\n        float:none;\n    }\n\n\n\n\n}\n\n\n\n* {\n    border-radius: 0;\n}\n\n.navbar{\n    -webkit-border-radius: 0;\n    -moz-border-radius: 0;\n    border-radius: 0;\n}\n\n.navbar .navbar-nav {\n    display: inline-block;\n    float: none;\n    vertical-align: top;\n    margin-left: auto;\n    padding: 0;\n}\n\n.navbar .navbar-collapse {\n    text-align: center;\n    border-radius: 0;\n}\n\na {\n    color: #1b7b90;\n}\n\na:hover {\n    color: #1b7b90;\n    text-decoration: none;\n}\n\nhr {\n    border: 0;\n    height: 1px;\n    background: #333;\n    background-image: linear-gradient(to right, #ccc, #333, #ccc);\n}\n\n.property-link:hover {\n    color: white;\n}\n\n.property-fixedbar {\n    color: white;\n    text-align: center;\n    border-style: solid;\n    border-width: 1px;\n    border-color: white;\n    margin-top: 12px;\n    padding-top: auto;\n}\n\n.property-fixedbar:hover {\n    color: #1b7b90;\n    background-color: white;\n}\n\n.main-content {\n    color: #686868;\n}\n\n.search-button:hover {\n    background-color: black;\n}\n\n.table th{\n    text-align: center;\n}\n\n#sticky {\n    z-index: 10;\n    height: 67px;\n}\n\n\n#sticky.fixed {\n    display: block;\n    position: fixed;\n    top: 0;\n    width: 100%;\n}\n\n.navBar-wrapper {\n    height: 67px;\n}\n\n@media (min-width: 10px) and (max-width: 991px) {\n    .navBar-wrapper {\n        height: 150px;\n    }\n\n    #sticky {\n        height: 100px;\n    }\n\n    #show-top {\n        height: 180px;\n    }\n\n    #sticky.fixed {\n        position: relative;\n    }\n\n    .fixed-summary {\n        position: absolute;\n        margin: 0;\n    }\n    .thumbnail-images {\n        display: none;\n    }\n}\n\n.carousel-inner &gt; .item &gt; img,\n.carousel-inner &gt; .item &gt; a &gt; img {\n    margin: auto;\n}\n\n#myCarousel {\n    margin-left: 30px;\n    margin-right: 30px;\n}\n\n.carousel-control {\n    padding-top: 25%;\n}\n.carousel-control.left, .carousel-control.right {\n    background: none;\n    color: #1b7b90;\n    border: none;\n}\n\n.hide-bullets {\n    list-style:none;\n    margin-left: 0;\n    margin-top:20px;\n}\n\n.thumbnail {\n    padding: 0;\n}\n\n.carousel-inner&gt;.item&gt;img, .carousel-inner&gt;.item&gt;a&gt;img {\n    width: 100%;\n}\n\n.green {\n    color: green;\n}\n\n.red {\n    color: red;\n}\n</code></pre>\n"}, {"tags": ["ruby", "chef-infra", "test-kitchen"], "answers": [{"comments": [{"owner": {"reputation": 715, "user_id": 6928292, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/a0nBD.jpg?s=128&g=1", "display_name": "aphexlog", "link": "https://stackoverflow.com/users/6928292/aphexlog"}, "edited": false, "score": 0, "creation_date": 1516125566, "post_id": 48287224, "comment_id": 83559289, "body": "Is there any recommended approach requiring strait ruby code?"}], "tags": [], "owner": {"reputation": 43208, "user_id": 78722, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf611565f0b79abd0b3dc200ad867661?s=128&d=identicon&r=PG", "display_name": "coderanger", "link": "https://stackoverflow.com/users/78722/coderanger"}, "is_accepted": false, "score": 0, "last_activity_date": 1516125421, "creation_date": 1516125421, "answer_id": 48287224, "question_id": 48287107, "link": "https://stackoverflow.com/questions/48287107/chef-ruby-import-all-templates-from-template-subdirectory-into-single-directory/48287224#48287224", "title": "Chef/ruby: import all templates from template subdirectory into single directory on a node", "body": "<p>No, that is not supported. Some additional characters because SO forces me to.</p>\n"}, {"tags": [], "owner": {"reputation": 715, "user_id": 6928292, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/a0nBD.jpg?s=128&g=1", "display_name": "aphexlog", "link": "https://stackoverflow.com/users/6928292/aphexlog"}, "is_accepted": false, "score": 0, "last_activity_date": 1516130466, "creation_date": 1516130466, "answer_id": 48288394, "question_id": 48287107, "link": "https://stackoverflow.com/questions/48287107/chef-ruby-import-all-templates-from-template-subdirectory-into-single-directory/48288394#48288394", "title": "Chef/ruby: import all templates from template subdirectory into single directory on a node", "body": "<p>I solved this problem by creating an array with the objects(templates) I needed to copy to the server.. it looks something like this:</p>\n\n<pre><code>auth_schemas = ['file1.xml','file2.xml','file3.xml','file4.xml','file5.xml','file6.xml','file7.xml','file8.xml','file9.xml','file10.xml']\n        auth_schemas.each do |schemaFile|\n          template \"/tmp/#{schemaFile}\" do\n            source \"path/to/SubDir/#{schemaFile}\"\n            owner node['attribute']['os_user']\n            group node['attribute']['os_group']\n            mode '0755'\n          end\n        end\n</code></pre>\n\n<p>Worked Like a charm!</p>\n"}], "owner": {"reputation": 715, "user_id": 6928292, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/a0nBD.jpg?s=128&g=1", "display_name": "aphexlog", "link": "https://stackoverflow.com/users/6928292/aphexlog"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 274, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1516130466, "creation_date": 1516124980, "last_edit_date": 1516128895, "question_id": 48287107, "link": "https://stackoverflow.com/questions/48287107/chef-ruby-import-all-templates-from-template-subdirectory-into-single-directory", "title": "Chef/ruby: import all templates from template subdirectory into single directory on a node", "body": "<p>Using a simple template block, is there a way to copy all template files in a <code>templates/default/SubDir/</code> (<code>templates/default/SubDir/*</code>) to a single location (<code>/tmp/</code>)?\nHere is an example block:</p>\n\n<pre><code>template '/tmp/...' do\n    source 'default/SubDir/...'\n    owner node['attribute']['os_user']\n    group node['attribute']['os_group']\n    mode '0755'\nend\n</code></pre>\n\n<p>EDIT: these are all xml files and I assume that I would not be adding the <code>.erb</code> extension to the template files, as that would require me to mention each template file name so that i can revert them back to .xml (as apposed to recursively copying the templates to the server).</p>\n\n<p>NOTE: If this is not supported, then is there any recommended approach requiring strait ruby code?</p>\n\n<hr>\n\n<p>EDIT: I am going to try making an aray of template files and see if that would work if I were to copy the entire array to the node.</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 6165, "user_id": 2697183, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/65255fe741b95ba0c641d96ea6750ea9?s=128&d=identicon&r=PG&f=1", "display_name": "AbM", "link": "https://stackoverflow.com/users/2697183/abm"}, "edited": false, "score": 0, "creation_date": 1516124693, "post_id": 48286980, "comment_id": 83558803, "body": "because <code>account.expiration.try(:to_date)</code> is <code>nil</code>"}, {"owner": {"reputation": 498, "user_id": 7280962, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8181c2901a87288eef3d3a62589b0bd4?s=128&d=identicon&r=PG", "display_name": "Nicholas Martinez", "link": "https://stackoverflow.com/users/7280962/nicholas-martinez"}, "edited": false, "score": 0, "creation_date": 1516124711, "post_id": 48286980, "comment_id": 83558816, "body": "Either <code>account.expiration.try(:to_date)</code> or <code>Date.today</code> is <code>nil</code>. You need to put a debugger in there and figure out which one it is. Its probably the former rather than the latter..."}], "answers": [{"comments": [{"owner": {"reputation": 685, "user_id": 7458849, "user_type": "registered", "accept_rate": 45, "profile_image": "https://i.stack.imgur.com/89kDb.jpg?s=128&g=1", "display_name": "Theopap", "link": "https://stackoverflow.com/users/7458849/theopap"}, "edited": false, "score": 0, "creation_date": 1516126841, "post_id": 48287065, "comment_id": 83559903, "body": "Thanks for the reply @Sebastian Palma! I&#39;m using` try` because I have a couple of <code>expirations</code> that are <code>nil</code>. Also, what should I put inside the <code>&lt;default_value&gt;</code>? And how can I access this form the view, when I loop thru the accounts?"}, {"owner": {"reputation": 28612, "user_id": 5025116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7WdYi.jpg?s=128&g=1", "display_name": "Sebastian Palma", "link": "https://stackoverflow.com/users/5025116/sebastian-palma"}, "reply_to_user": {"reputation": 685, "user_id": 7458849, "user_type": "registered", "accept_rate": 45, "profile_image": "https://i.stack.imgur.com/89kDb.jpg?s=128&g=1", "display_name": "Theopap", "link": "https://stackoverflow.com/users/7458849/theopap"}, "edited": false, "score": 0, "creation_date": 1516126942, "post_id": 48287065, "comment_id": 83559954, "body": "If you place this method within the app/helpers/application_helper.rb then it&#39;d be available for any of your views. The default value is something you define for yourself to show in the view in case the account.expiration is nil and you can&#39;t perform the operation of subtracting it to Date.today."}, {"owner": {"reputation": 685, "user_id": 7458849, "user_type": "registered", "accept_rate": 45, "profile_image": "https://i.stack.imgur.com/89kDb.jpg?s=128&g=1", "display_name": "Theopap", "link": "https://stackoverflow.com/users/7458849/theopap"}, "edited": false, "score": 0, "creation_date": 1516127249, "post_id": 48287065, "comment_id": 83560099, "body": "I got this error : <code>application_helper.rb:4: void value expression return &lt;1&gt; if account_expiration.nil? ^</code>"}, {"owner": {"reputation": 685, "user_id": 7458849, "user_type": "registered", "accept_rate": 45, "profile_image": "https://i.stack.imgur.com/89kDb.jpg?s=128&g=1", "display_name": "Theopap", "link": "https://stackoverflow.com/users/7458849/theopap"}, "edited": false, "score": 0, "creation_date": 1516127350, "post_id": 48287065, "comment_id": 83560143, "body": "at this line <code>return &lt;1&gt; if account_expiration.nil?</code>"}, {"owner": {"reputation": 28612, "user_id": 5025116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7WdYi.jpg?s=128&g=1", "display_name": "Sebastian Palma", "link": "https://stackoverflow.com/users/5025116/sebastian-palma"}, "reply_to_user": {"reputation": 685, "user_id": 7458849, "user_type": "registered", "accept_rate": 45, "profile_image": "https://i.stack.imgur.com/89kDb.jpg?s=128&g=1", "display_name": "Theopap", "link": "https://stackoverflow.com/users/7458849/theopap"}, "edited": false, "score": 0, "creation_date": 1516127598, "post_id": 48287065, "comment_id": 83560254, "body": "Sorry, the value between <code>&lt;&gt;</code> is to exemplify is a custom value added by you, remove them, just <code>return 1 if account_expiration.nil?</code>."}, {"owner": {"reputation": 685, "user_id": 7458849, "user_type": "registered", "accept_rate": 45, "profile_image": "https://i.stack.imgur.com/89kDb.jpg?s=128&g=1", "display_name": "Theopap", "link": "https://stackoverflow.com/users/7458849/theopap"}, "edited": false, "score": 0, "creation_date": 1516127773, "post_id": 48287065, "comment_id": 83560336, "body": "ok now I&#39;m getting: <code>undefined method &#39;expiration&#39; for #&lt;Account::ActiveRecord_Relation:0x007fea36585368&gt;</code> I changed the helper method  to this: <code>(@accounts.expiration.to_date - Date.today).to_i</code>"}], "tags": [], "owner": {"reputation": 28612, "user_id": 5025116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7WdYi.jpg?s=128&g=1", "display_name": "Sebastian Palma", "link": "https://stackoverflow.com/users/5025116/sebastian-palma"}, "is_accepted": true, "score": 4, "last_activity_date": 1516129201, "last_edit_date": 1516129201, "creation_date": 1516124824, "answer_id": 48287065, "question_id": 48286980, "link": "https://stackoverflow.com/questions/48286980/rails-format-the-date-and-subtracting/48287065#48287065", "title": "Rails Format the date and subtracting", "body": "<p>What you're getting is:</p>\n\n<pre><code>nil - Date.today\nNoMethodError: undefined method `-' for nil:NilClass\n</code></pre>\n\n<p>As you're using try, then it doesn't raise any exception, but returns nil if the object being accessed doesn't respond to the method invoked. In your case it's giving you <code>nil</code>, and you can't apply <code>-</code> to a nil object.</p>\n\n<p>You could move such logic to a helper, check if the attribute is being nil and return a default value, otherwise perform the operation:</p>\n\n<pre><code># app/helpers/application_helper.rb\ndef expiration_substraction(account_expiration)\n  return &lt;default_value&gt; if account_expiration.nil?\n  (account_expiration.to_date - Date.today).to_i\nend\n</code></pre>\n\n<p>This should be available for the view you're working on:</p>\n\n<pre><code>&lt;%= expiration_substraction(account.expiration) %&gt;\n</code></pre>\n"}], "owner": {"reputation": 685, "user_id": 7458849, "user_type": "registered", "accept_rate": 45, "profile_image": "https://i.stack.imgur.com/89kDb.jpg?s=128&g=1", "display_name": "Theopap", "link": "https://stackoverflow.com/users/7458849/theopap"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 162, "favorite_count": 0, "accepted_answer_id": 48287065, "answer_count": 1, "score": 1, "last_activity_date": 1516129201, "creation_date": 1516124534, "question_id": 48286980, "link": "https://stackoverflow.com/questions/48286980/rails-format-the-date-and-subtracting", "title": "Rails Format the date and subtracting", "body": "<p>I'm trying to subtract todays date from account expiration date in order to get remaining days, by doing this:</p>\n\n<pre><code>&lt;% @accounts.each do |account| %&gt;\n    &lt;tr&gt;\n      &lt;td&gt;&lt;%= account.name %&gt;&amp;nbsp;&lt;/td&gt;\n      &lt;td&gt;&lt;%= account.email %&gt;&amp;nbsp;&lt;/td&gt;\n      &lt;td&gt;&lt;%= (account.expiration.try(:to_date) - Date.today).to_i %&gt;&lt;/td&gt;\n</code></pre>\n\n<p>I'm getting this error: <code>undefined method '-' for nil:NilClass</code></p>\n\n<p>At this line: <code>&lt;td&gt;&lt;%= (account.expiration.try(:to_date) - Date.today).to_i %&gt;&lt;/td&gt;</code></p>\n\n<p>Any ideas why this is not working?</p>\n"}, {"tags": ["ruby", "shopify"], "answers": [{"comments": [{"owner": {"reputation": 376, "user_id": 5437147, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-BVv968E80E0/AAAAAAAAAAI/AAAAAAAAIoQ/hiY9Pyn3BpI/photo.jpg?sz=128", "display_name": "Mark Cooper", "link": "https://stackoverflow.com/users/5437147/mark-cooper"}, "edited": false, "score": 0, "creation_date": 1516745403, "post_id": 48387300, "comment_id": 83813049, "body": "the error was on the fourth line of code and the only errors available to me were the &#39;fiber&#39; related ones, no stack trace. Your solution seems to work.   Can you give me the rundown on what your solution fixed so I can accept your answer?"}, {"owner": {"reputation": 14010, "user_id": 3109182, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/a4b305f0077055b4fdcf715067775d5a?s=128&d=identicon&r=PG", "display_name": "Anthony", "link": "https://stackoverflow.com/users/3109182/anthony"}, "reply_to_user": {"reputation": 376, "user_id": 5437147, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-BVv968E80E0/AAAAAAAAAAI/AAAAAAAAIoQ/hiY9Pyn3BpI/photo.jpg?sz=128", "display_name": "Mark Cooper", "link": "https://stackoverflow.com/users/5437147/mark-cooper"}, "edited": false, "score": 0, "creation_date": 1516753894, "post_id": 48387300, "comment_id": 83816010, "body": "Hard to know exactly what was wrong but those stacktraces were not helpful clearly!  I added some more info, let me know if that answers your questions."}, {"owner": {"reputation": 14010, "user_id": 3109182, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/a4b305f0077055b4fdcf715067775d5a?s=128&d=identicon&r=PG", "display_name": "Anthony", "link": "https://stackoverflow.com/users/3109182/anthony"}, "reply_to_user": {"reputation": 376, "user_id": 5437147, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-BVv968E80E0/AAAAAAAAAAI/AAAAAAAAIoQ/hiY9Pyn3BpI/photo.jpg?sz=128", "display_name": "Mark Cooper", "link": "https://stackoverflow.com/users/5437147/mark-cooper"}, "edited": false, "score": 0, "creation_date": 1516803419, "post_id": 48387300, "comment_id": 83838700, "body": "@MarkCooper I found the other issue that I forgot to explain as well."}, {"owner": {"reputation": 376, "user_id": 5437147, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-BVv968E80E0/AAAAAAAAAAI/AAAAAAAAIoQ/hiY9Pyn3BpI/photo.jpg?sz=128", "display_name": "Mark Cooper", "link": "https://stackoverflow.com/users/5437147/mark-cooper"}, "edited": false, "score": 1, "creation_date": 1516803933, "post_id": 48387300, "comment_id": 83839098, "body": "That explains it. I&#39;m not terribly down on Ruby, so that helps a lot."}], "tags": [], "owner": {"reputation": 14010, "user_id": 3109182, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/a4b305f0077055b4fdcf715067775d5a?s=128&d=identicon&r=PG", "display_name": "Anthony", "link": "https://stackoverflow.com/users/3109182/anthony"}, "is_accepted": true, "score": 1, "last_activity_date": 1516803400, "last_edit_date": 1516803400, "creation_date": 1516642759, "answer_id": 48387300, "question_id": 48286842, "link": "https://stackoverflow.com/questions/48286842/shopify-shipping-script-discount-on-customer-tag/48387300#48387300", "title": "Shopify Shipping Script Discount on Customer Tag", "body": "<p>Can you try:</p>\n\n<pre><code>  def always_free_tag?\n    return false if Input.cart.customer.nil? || Input.cart.customer.tags.empty?\n    Input.cart.customer.tags.any? do |tag|\n      tag.upcase == \"ALWAYSFREE\"\n    end\n  end\n\n  shippingMethodToDelete = (condition1 or condition2 or always_free_tag?) ? \"UPS\" : \"FREE\"\n\n  Output.shipping_rates = Input.shipping_rates.delete_if do |shipping_rate|\n    puts shipping_rate.name\n    shipping_rate.name.upcase.start_with?(shippingMethodToDelete)\n  end\n</code></pre>\n\n<p>Also, can you share more of the stack trace and what line it points to?</p>\n\n<p>Edit:  Great!  Glad that worked.  I think your issue is you were using <code>Array#index</code> which yields an index (integer) to the block (this line: <code>Input.cart.customer.tags.index</code>).  You're then calling <code>#upcase</code> on Numeric which isn't a method.  If you instead did this it would work as expected:</p>\n\n<pre><code>Input.cart.customer.tags.index do |i|\n  return true if Input.cart.customer.tags[i].upcase == \"ALWAYSFREE\"\nend \n</code></pre>\n\n<p>The other issue is that in ruby only <code>nil</code> and <code>false</code> are falsy in ruby, so your condition in <code>shippingMethodToDelete</code> likely wasn't returning the correct value.  Instead, I changed it so it always returns a boolean that way we can be sure <code>ALWAYSFREE</code> is searched for and evaluated correctly.  I think you were really close but take a look at <a href=\"https://ruby-doc.org/core-2.5.0/Enumerable.html#method-i-any-3F\" rel=\"nofollow noreferrer\">Enumerable#any</a> for more examples.</p>\n"}], "owner": {"reputation": 376, "user_id": 5437147, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-BVv968E80E0/AAAAAAAAAAI/AAAAAAAAIoQ/hiY9Pyn3BpI/photo.jpg?sz=128", "display_name": "Mark Cooper", "link": "https://stackoverflow.com/users/5437147/mark-cooper"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 574, "favorite_count": 0, "accepted_answer_id": 48387300, "answer_count": 1, "score": 1, "last_activity_date": 1516803400, "creation_date": 1516123970, "last_edit_date": 1592644375, "question_id": 48286842, "link": "https://stackoverflow.com/questions/48286842/shopify-shipping-script-discount-on-customer-tag", "title": "Shopify Shipping Script Discount on Customer Tag", "body": "<p>I have a Shopify Plus account in which I am attempting to add a new condition to my Shipping Script that controls what shipping methods are displayed to customers. Specifically, I want to give customers with a specific tag access to free shipping. To control that</p>\n<pre><code>def freeItUp\n  index = -1 \n  if Input.cart.customer != nil and Input.cart.customer.tags != nil \n    Input.cart.customer.tags.index do |tag|\n      return tag.upcase == &quot;ALWAYSFREE&quot;\n    end \n  end\n  return index &gt; -1\nend \n\nshippingMethodToDelete = (condition1 or condition2 or freeItUp) ? &quot;UPS&quot; : &quot;FREE&quot;\n\nOutput.shipping_rates = Input.shipping_rates.delete_if do |shipping_rate|\n  puts shipping_rate.name\n  shipping_rate.name.upcase.start_with?(shippingMethodToDelete)\nend\n</code></pre>\n<p>However, I keep getting the following error</p>\n<blockquote>\n<p>fiber required for enumerator (Your Cart)</p>\n<p>fiber required for enumerator (Empty Cart)</p>\n</blockquote>\n<p>I'm not terribly familiar with Ruby, but I'm using the same code block (above) in Line Item scripts with no issues. According to the <a href=\"https://help.shopify.com/api/tutorials/shopify-scripts#general-methods\" rel=\"nofollow noreferrer\">documentation</a> I believe I'm not trying to access properties that don't exist. Any thoughts/help would be greatly appreciated.</p>\n"}, {"tags": ["ruby", "docker", "sass", "containers", "ubuntu-14.04"], "comments": [{"owner": {"reputation": 1451, "user_id": 4375502, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ioDe6.png?s=128&g=1", "display_name": "miir", "link": "https://stackoverflow.com/users/4375502/miir"}, "edited": false, "score": 0, "creation_date": 1516125017, "post_id": 48286738, "comment_id": 83558969, "body": "Can you use npm? If so, you can use node-sass. Let me know if this sounds like a solution for you and I can write up a more detailed answer"}], "answers": [{"tags": [], "owner": {"reputation": 8645, "user_id": 368167, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c9596f533dcd61ecf75f150b0d9997b3?s=128&d=identicon&r=PG", "display_name": "Tamer Shlash", "link": "https://stackoverflow.com/users/368167/tamer-shlash"}, "is_accepted": false, "score": 0, "last_activity_date": 1516127048, "last_edit_date": 1516127048, "creation_date": 1516126573, "answer_id": 48287469, "question_id": 48286738, "link": "https://stackoverflow.com/questions/48286738/simple-and-fast-way-to-install-sass-in-container-ubuntu-14-04/48287469#48287469", "title": "Simple and fast way to install sass in container ubuntu 14.04?", "body": "<p>You can make a Docker image that inherits the specific Ruby image you need, add your changes to it, and use it instead.</p>\n\n<p>For example, if you currently use <code>debian:jessie</code>, then you can create a new <code>Dockerfile</code> with:</p>\n\n<pre><code>FROM debian:jessie\n# Now you install all the dependencies including Ruby... etc\nRUN gem install sass\n</code></pre>\n\n<p>Then you can build and image from that file, and publish that image to a docker registry, and use it instead of the one you are currently using.</p>\n\n<p>Take a look at <a href=\"https://github.com/docker-library/ruby/blob/1d0fe6a9d5c75d8a114fb03016f528d68c613d80/2.4/jessie/slim/Dockerfile\" rel=\"nofollow noreferrer\">the source code</a> of some Ruby docker image to see how you can install Ruby and dependencies. Ofcourse, you are free to install it however you want (natively, using rbenv or using rvm... etc).</p>\n"}], "owner": {"reputation": 754, "user_id": 8247069, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/1841b46f504257ace9325e26b637d8b0?s=128&d=identicon&r=PG", "display_name": "Theo", "link": "https://stackoverflow.com/users/8247069/theo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 559, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1516127048, "creation_date": 1516123601, "question_id": 48286738, "link": "https://stackoverflow.com/questions/48286738/simple-and-fast-way-to-install-sass-in-container-ubuntu-14-04", "title": "Simple and fast way to install sass in container ubuntu 14.04?", "body": "<p>I want to run a script that compiles my sass in a \"build\" container.\nSince this container will repeatedly be restarted I need a robust and quick way to install or use sass. (including ruby and dependencies)</p>\n\n<p>Is there a simple way for sass to be available in a container for scss compiling?</p>\n\n<p>There is a solution using a ruby container but this is not possible in my case since i already need a specific container image for the build itself.\nUsing another container and named volumes is also not possible in my case.</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 9030, "user_id": 5101476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JCQrl.jpg?s=128&g=1", "display_name": "ice\u30c4", "link": "https://stackoverflow.com/users/5101476/ice%e3%83%84"}, "edited": false, "score": 0, "creation_date": 1516124018, "post_id": 48286721, "comment_id": 83558418, "body": "Have you a link to the coding challenge?"}], "answers": [{"comments": [{"owner": {"reputation": 22377, "user_id": 2288659, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/bBg8v.png?s=128&g=1", "display_name": "Silvio Mayolo", "link": "https://stackoverflow.com/users/2288659/silvio-mayolo"}, "edited": false, "score": 0, "creation_date": 1516124880, "post_id": 48286965, "comment_id": 83558901, "body": "Good observation! Do you know if changing <code>self.class</code> messes anything up with regard to the way the class behaves on other contexts?"}, {"owner": {"reputation": 357, "user_id": 3920497, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/3484cf4578ea58143b86d453104a6dd0?s=128&d=identicon&r=PG&f=1", "display_name": "ChrisCPO", "link": "https://stackoverflow.com/users/3920497/chriscpo"}, "edited": false, "score": 0, "creation_date": 1516125282, "post_id": 48286965, "comment_id": 83559107, "body": "Yea I knew the Solution was simple, I over complicated it, and I had trouble getting around the &quot;why&quot; factor."}, {"owner": {"reputation": 91121, "user_id": 179125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5594142dcc49a24b1902ec8059181f8d?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan Running", "link": "https://stackoverflow.com/users/179125/jordan-running"}, "reply_to_user": {"reputation": 22377, "user_id": 2288659, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/bBg8v.png?s=128&g=1", "display_name": "Silvio Mayolo", "link": "https://stackoverflow.com/users/2288659/silvio-mayolo"}, "edited": false, "score": 0, "creation_date": 1516125355, "post_id": 48286965, "comment_id": 83559158, "body": "@SilvioMayolo I would definitely expect this to cause some unusual behavior with code that makes assumptions about the behavior of <code>.class</code>, which is a lot of code in the Ruby ecosystem."}], "tags": [], "owner": {"reputation": 91121, "user_id": 179125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5594142dcc49a24b1902ec8059181f8d?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan Running", "link": "https://stackoverflow.com/users/179125/jordan-running"}, "is_accepted": true, "score": 4, "last_activity_date": 1516124488, "creation_date": 1516124488, "answer_id": 48286965, "question_id": 48286721, "link": "https://stackoverflow.com/questions/48286721/ruby-class-inheritance-issue/48286965#48286965", "title": "Ruby class inheritance issue", "body": "<p>Your intuition is good. At face value, the challenge seems incorrect, and if it's intended to be \"a relatively simple code challenge,\" then I think that must be the case.</p>\n\n<p>If the challenge is meant to be tricky, on the other hand, the specified result is certainly something that's <em>possible</em> in Ruby:</p>\n\n<pre><code>class Vehicle\n  def self.class\n    self\n  end\nend\n\nclass Car &lt; Vehicle; end\nclass Van &lt; Vehicle; end\nclass Truck &lt; Vehicle; end\n\np Car.class.name # =&gt; \"Car\"\np Truck.class.name # =&gt; \"Truck\"\np Van.class.name # =&gt; \"Van\"\np Car.superclass.name # =&gt; \"Vehicle\"\n</code></pre>\n\n<p>Try it on repl.it: <a href=\"https://repl.it/@jrunning/VisibleMustyHapuka\" rel=\"nofollow noreferrer\">https://repl.it/@jrunning/VisibleMustyHapuka</a></p>\n\n<p>However, knowing nothing more about the challenge or its source, it's impossible to say whether or not this is the <em>intended</em> solution.</p>\n"}], "owner": {"reputation": 357, "user_id": 3920497, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/3484cf4578ea58143b86d453104a6dd0?s=128&d=identicon&r=PG&f=1", "display_name": "ChrisCPO", "link": "https://stackoverflow.com/users/3920497/chriscpo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 41, "favorite_count": 1, "accepted_answer_id": 48286965, "answer_count": 1, "score": 3, "last_activity_date": 1516160330, "creation_date": 1516123530, "last_edit_date": 1516160330, "question_id": 48286721, "link": "https://stackoverflow.com/questions/48286721/ruby-class-inheritance-issue", "title": "Ruby class inheritance issue", "body": "<p>I tried to get this result:</p>\n\n<pre><code>Car.class.name # =&gt; \"Car\"\nTruck.class.name # =&gt; \"Truck\"\nVan.class.name # =&gt; \"Van\" \nCar/Truck/Van.superclass.name # =&gt; \"Vehicle\" \n</code></pre>\n\n<p>I did this:</p>\n\n<pre><code>require \"rspec/autorun\"\n\nclass Vehicle\nend\n\nclass Car &lt; Vehicle\nend\n\nclass Van &lt; Vehicle\nend\n\nclass Truck &lt; Vehicle\nend\n\ndescribe Car do\n  describe \".class.name\" do\n    it \"returns name of the class\" do\n      expect(Car.class.name).to eq \"Car\"\n    end\n  end\nend\n</code></pre>\n\n<p>What am I missing about Ruby's class system in order to implement this?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "chat", "actioncable"], "answers": [{"tags": [], "owner": {"reputation": 12542, "user_id": 156746, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/8TsPx.jpg?s=128&g=1", "display_name": "DiegoSalazar", "link": "https://stackoverflow.com/users/156746/diegosalazar"}, "is_accepted": false, "score": 0, "last_activity_date": 1516125875, "creation_date": 1516125875, "answer_id": 48287327, "question_id": 48286696, "link": "https://stackoverflow.com/questions/48286696/group-chat-app-with-actioncable-gives-error-actioncontrollerinvalidauthenticit/48287327#48287327", "title": "Group chat app with ActionCable gives error ActionController::InvalidAuthenticityToken", "body": "<p>Your <code>simple_form_for</code> in the view <a href=\"https://stackoverflow.com/questions/36000511/rails-4-how-to-add-authenticity-token-to-forms-rendered-via-partial\">might not be creating the authenticity token</a>. Or you need to place the <a href=\"http://api.rubyonrails.org/classes/ActionView/Helpers/CsrfHelper.html\" rel=\"nofollow noreferrer\">csrf meta tag</a> in the head of the HTML document. Either way, you're trying to create a message the old fashioned way rather than using websockets. You have to send your messages through the client side component of actioncable as described here: <a href=\"http://guides.rubyonrails.org/action_cable_overview.html#client-side-components\" rel=\"nofollow noreferrer\">http://guides.rubyonrails.org/action_cable_overview.html#client-side-components</a></p>\n"}], "owner": {"reputation": 1, "user_id": 9145739, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-oJNUlKzscSQ/AAAAAAAAAAI/AAAAAAAAANs/-sbaZZGQlJQ/photo.jpg?sz=128", "display_name": "Alvaro Lobato", "link": "https://stackoverflow.com/users/9145739/alvaro-lobato"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 361, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1516127117, "creation_date": 1516123454, "last_edit_date": 1516127117, "question_id": 48286696, "link": "https://stackoverflow.com/questions/48286696/group-chat-app-with-actioncable-gives-error-actioncontrollerinvalidauthenticit", "title": "Group chat app with ActionCable gives error ActionController::InvalidAuthenticityToken", "body": "<p>I have been trying to get around an error I don't really understand. How can there be an Invalid Authenticity Token error?</p>\n\n<p>This is the error on the Terminal:</p>\n\n<pre><code>    Started GET \"/serviceworker.js\" for 127.0.0.1 at 2018-01-16 17:16:46 +0000\n\nActionController::RoutingError (No route matches [GET] \"/serviceworker.js\"):\n\nactionpack (5.0.5) lib/action_dispatch/middleware/debug_exceptions.rb:53:in `call'\nweb-console (3.5.1) lib/web_console/middleware.rb:135:in `call_app'\nweb-console (3.5.1) lib/web_console/middleware.rb:28:in `block in call'\nweb-console (3.5.1) lib/web_console/middleware.rb:18:in `catch'\nweb-console (3.5.1) lib/web_console/middleware.rb:18:in `call'\nactionpack (5.0.5) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'\nrailties (5.0.5) lib/rails/rack/logger.rb:36:in `call_app'\nrailties (5.0.5) lib/rails/rack/logger.rb:24:in `block in call'\nactivesupport (5.0.5) lib/active_support/tagged_logging.rb:69:in `block in tagged'\nactivesupport (5.0.5) lib/active_support/tagged_logging.rb:26:in `tagged'\nactivesupport (5.0.5) lib/active_support/tagged_logging.rb:69:in `tagged'\nrailties (5.0.5) lib/rails/rack/logger.rb:24:in `call'\nsprockets-rails (3.2.1) lib/sprockets/rails/quiet_assets.rb:13:in `call'\nactionpack (5.0.5) lib/action_dispatch/middleware/request_id.rb:24:in `call'\nrack (2.0.3) lib/rack/method_override.rb:22:in `call'\nrack (2.0.3) lib/rack/runtime.rb:22:in `call'\nactivesupport (5.0.5) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'\nactionpack (5.0.5) lib/action_dispatch/middleware/executor.rb:12:in `call'\nactionpack (5.0.5) lib/action_dispatch/middleware/static.rb:136:in `call'\nrack (2.0.3) lib/rack/sendfile.rb:111:in `call'\nrailties (5.0.5) lib/rails/engine.rb:522:in `call'\npuma (3.11.0) lib/puma/configuration.rb:225:in `call'\npuma (3.11.0) lib/puma/server.rb:624:in `handle_request'\npuma (3.11.0) lib/puma/server.rb:438:in `process_client'\npuma (3.11.0) lib/puma/server.rb:302:in `block in run'\npuma (3.11.0) lib/puma/thread_pool.rb:120:in `block in spawn_thread'\n  Rendering /usr/local/opt/rbenv/versions/2.3.4/lib/ruby/gems/2.3.0/gems/actionpack-5.0.5/lib/action_dispatch/middleware/templates/rescues/routing_error.html.erb within rescues/layout\n  Rendering /usr/local/opt/rbenv/versions/2.3.4/lib/ruby/gems/2.3.0/gems/actionpack-5.0.5/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb\n  Rendered /usr/local/opt/rbenv/versions/2.3.4/lib/ruby/gems/2.3.0/gems/actionpack-5.0.5/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (0.9ms)\n  Rendered collection of /usr/local/opt/rbenv/versions/2.3.4/lib/ruby/gems/2.3.0/gems/actionpack-5.0.5/lib/action_dispatch/middleware/templates/routes/_route.html.erb [42 times] (9.2ms)\n  Rendered collection of /usr/local/opt/rbenv/versions/2.3.4/lib/ruby/gems/2.3.0/gems/actionpack-5.0.5/lib/action_dispatch/middleware/templates/routes/_route.html.erb [1 times] (0.4ms)\n  Rendered /usr/local/opt/rbenv/versions/2.3.4/lib/ruby/gems/2.3.0/gems/actionpack-5.0.5/lib/action_dispatch/middleware/templates/routes/_table.html.erb (16.0ms)\n  Rendering /usr/local/opt/rbenv/versions/2.3.4/lib/ruby/gems/2.3.0/gems/actionpack-5.0.5/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb\n  Rendered /usr/local/opt/rbenv/versions/2.3.4/lib/ruby/gems/2.3.0/gems/actionpack-5.0.5/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (1.3ms)\n  Rendered /usr/local/opt/rbenv/versions/2.3.4/lib/ruby/gems/2.3.0/gems/actionpack-5.0.5/lib/action_dispatch/middleware/templates/rescues/routing_error.html.erb within rescues/layout (134.3ms)\nStarted POST \"/chatrooms/1/messages\" for 127.0.0.1 at 2018-01-16 17:16:52 +0000\nProcessing by MessagesController#create as HTML\n  Parameters: {\"utf8\"=&gt;\"\u2713\", \"message\"=&gt;{\"body\"=&gt;\"hi\"}, \"chatroom_id\"=&gt;\"1\"}\nCan't verify CSRF token authenticity.\nCompleted 401 Unauthorized in 0ms (ActiveRecord: 0.0ms)\n\n\n\nActionController::InvalidAuthenticityToken - ActionController::InvalidAuthenticityToken:\n\nStarted POST \"/__better_errors/b0e0d47806bf58c8/variables\" for 127.0.0.1 at 2018-01-16 17:16:53 +0000\n</code></pre>\n\n<p>This is my message controller</p>\n\n<pre><code> class MessagesController &lt; ApplicationController\n\n  def create\n    @message = Message.new(message_params)\n    @chatroom = Chatroom.find(params[:chatroom_id])\n    @message.chatroom = @chatroom\n    @message.sender = current_user\n\n    if @message.save\n      respond_to do |format|\n        format.html { redirect_to chatroom_path(@chatroom) }\n        format.js\n      end\n    else\n      respond_to do |format|\n        format.html { render \"chatrooms/show\" }\n        format.js\n      end\n    end\n\n  end\n</code></pre>\n\n<p>private</p>\n\n<p>def message_params\n    params.require(:message).permit(:body)\n  end</p>\n\n<p>end</p>\n\n<p>This is the view where I have the chat form:</p>\n\n<pre><code>&lt;div class=\"col-xs-4\"&gt;\n  &lt;div class=\"chat-header\"&gt;&lt;h4&gt;&lt;%= @chatroom.session.title %&gt;&lt;/h4&gt;&lt;/div&gt;\n  &lt;div class=\"messages\"&gt;\n    &lt;% @chatroom.messages.each do |message| %&gt;\n      &lt;%= render \"messages/message\", message: message, user_is_messages_author: message.from?(current_user), c_user: current_user %&gt;\n    &lt;% end %&gt;\n  &lt;/div&gt;\n  &lt;div id=\"create-message\"&gt;\n    &lt;%= simple_form_for [ @chatroom, Message.new ], remote: true, html: {autocomplete: \"off\" } do |f| %&gt;\n      &lt;%= f.input :body, label: false %&gt;\n    &lt;% end %&gt;\n  &lt;/div&gt;\n&lt;/div&gt;\n</code></pre>\n"}, {"tags": ["ruby", "rspec"], "answers": [{"comments": [{"owner": {"reputation": 3518, "user_id": 3384609, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/1cb30cda6294521f9c6e60277504c5c2?s=128&d=identicon&r=PG", "display_name": "Clintm", "link": "https://stackoverflow.com/users/3384609/clintm"}, "edited": false, "score": 0, "creation_date": 1516122187, "post_id": 48286283, "comment_id": 83557217, "body": "How could I change the test and not the ApplicationHelper module to just <code>include ApplicationHelper</code>"}, {"owner": {"reputation": 1681, "user_id": 947640, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WA3TV.jpg?s=128&g=1", "display_name": "Esteban Garcia", "link": "https://stackoverflow.com/users/947640/esteban-garcia"}, "reply_to_user": {"reputation": 3518, "user_id": 3384609, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/1cb30cda6294521f9c6e60277504c5c2?s=128&d=identicon&r=PG", "display_name": "Clintm", "link": "https://stackoverflow.com/users/3384609/clintm"}, "edited": false, "score": 0, "creation_date": 1516122313, "post_id": 48286283, "comment_id": 83557280, "body": "Yes, you&#39;re right. You can do that as well without using self. Also check that in your question the replace_links_with_urls has two def"}, {"owner": {"reputation": 3518, "user_id": 3384609, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/1cb30cda6294521f9c6e60277504c5c2?s=128&d=identicon&r=PG", "display_name": "Clintm", "link": "https://stackoverflow.com/users/3384609/clintm"}, "edited": false, "score": 0, "creation_date": 1516122707, "post_id": 48286283, "comment_id": 83557531, "body": "That was it! Thanks. I had to both require and include it."}], "tags": [], "owner": {"reputation": 1681, "user_id": 947640, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WA3TV.jpg?s=128&g=1", "display_name": "Esteban Garcia", "link": "https://stackoverflow.com/users/947640/esteban-garcia"}, "is_accepted": true, "score": 1, "last_activity_date": 1516122404, "last_edit_date": 1516122404, "creation_date": 1516121942, "answer_id": 48286283, "question_id": 48286218, "link": "https://stackoverflow.com/questions/48286218/invoke-a-function-on-a-ruby-module/48286283#48286283", "title": "Invoke a function on a ruby module", "body": "<p>You need to declare your function using self, like this:</p>\n\n<pre><code>module ApplicationHelper\n  def self.replace_links_with_urls(text)\n    text.gsub(%r{&lt;a[^&gt;]*? href=['\"]([^'\"]*)?['\"].*?&gt;(.*?)&lt;/a&gt;}m, \"\\\\2 ( \\\\1 )\")\n  end\nend\n</code></pre>\n\n<p>Then you can call it using:</p>\n\n<pre><code>ApplicationHelper.replace_links_with_urls(\"asd\")\n</code></pre>\n\n<p>Or declare it without using self, include the module using</p>\n\n<pre><code>include ApplicationHelper\n</code></pre>\n\n<p>And call the function</p>\n\n<p>So your test will be:</p>\n\n<pre><code>require File.expand_path(\"../../../app/helpers/application_helper\", __FILE__)\ninclude ApplicationHelper\ndescribe ApplicationHelper do\n    describe \"#replace_links_with_urls\" do\n        it \"does not replace non-links\" do\n            ApplicationHelper::replace_links_with_urls(\"ABC &lt;b&gt;bold&lt;/b&gt;\").should == \"ABC &lt;b&gt;bold&lt;/b&gt;\"\n        end\n    end\nend\n</code></pre>\n\n<p>Also, check that the code you posted the replace_links_with_urls function has two def, don't know if you have that same typo in your code or just here.</p>\n"}], "owner": {"reputation": 3518, "user_id": 3384609, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/1cb30cda6294521f9c6e60277504c5c2?s=128&d=identicon&r=PG", "display_name": "Clintm", "link": "https://stackoverflow.com/users/3384609/clintm"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 25, "favorite_count": 0, "accepted_answer_id": 48286283, "answer_count": 1, "score": 0, "last_activity_date": 1516122662, "creation_date": 1516121727, "last_edit_date": 1516122662, "question_id": 48286218, "link": "https://stackoverflow.com/questions/48286218/invoke-a-function-on-a-ruby-module", "title": "Invoke a function on a ruby module", "body": "<p>Here's my folder structure:</p>\n\n<pre><code>root\n  - app\n    - helpers\n      - application_helper.rb\n  - test\n    - helpers\n      - application_helper_test.rb\n</code></pre>\n\n<p>Here's what application_helper.rb looks like:</p>\n\n<pre><code>module ApplicationHelper\n  def replace_links_with_urls(text)\n    text.gsub(%r{&lt;a[^&gt;]*? href=['\"]([^'\"]*)?['\"].*?&gt;(.*?)&lt;/a&gt;}m, \"\\\\2 ( \\\\1 )\")\n  end\nend\n</code></pre>\n\n<p>Here's what application_helper_test.rb looks like:</p>\n\n<pre><code>   require File.expand_path(\"../../../app/helpers/application_helper\", __FILE__)\n    describe ApplicationHelper do\n      describe \"#replace_links_with_urls\" do\n        it \"does not replace non-links\" do\n          ApplicationHelper::replace_links_with_urls(\"ABC &lt;b&gt;bold&lt;/b&gt;\").should == \"ABC &lt;b&gt;bold&lt;/b&gt;\"\n        end\n      end\n  end\n</code></pre>\n\n<p>The error I get is:</p>\n\n<pre><code>NoMethodError: undefined method `replace_links_with_urls' for ApplicationHelper:Module\n</code></pre>\n\n<p>What am I doing wrong?</p>\n"}, {"tags": ["ruby", "language-lawyer", "destructuring", "keyword-argument"], "comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 2, "creation_date": 1516120734, "post_id": 48285909, "comment_id": 83556329, "body": "This is a bit of a fuzzy spot, I&#39;m not sure what <a href=\"https://github.com/ruby/spec\" rel=\"nofollow noreferrer\">Ruby Spec</a> has to say but it&#39;d know for sure. I think <code>x</code> is just being really aggressive here and grabbing whatever it can first. In the second case <code>x</code> gets the left-overs."}, {"owner": {"reputation": 71199, "user_id": 1301972, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/T5G7N.jpg?s=128&g=1", "display_name": "Todd A. Jacobs", "link": "https://stackoverflow.com/users/1301972/todd-a-jacobs"}, "edited": false, "score": 1, "creation_date": 1516121415, "post_id": 48285909, "comment_id": 83556726, "body": "Possibly related to <a href=\"https://bugs.ruby-lang.org/issues/14183\" rel=\"nofollow noreferrer\">bugs.ruby-lang.org/issues/14183</a> or its related issues."}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1516124360, "post_id": 48285909, "comment_id": 83558611, "body": "Unfortunately, Ruby doesn&#39;t distinguish between <code>fn({a: 2})</code> and <code>fn(**{a: 2})</code> so there&#39;s a lot of ambiguity when a method takes both, positional and keyword arguments."}], "answers": [{"tags": [], "owner": {"reputation": 1342, "user_id": 1143549, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/45da1bf4376d6f184e41de57e03789b9?s=128&d=identicon&r=PG", "display_name": "Derek Wright", "link": "https://stackoverflow.com/users/1143549/derek-wright"}, "is_accepted": false, "score": 0, "last_activity_date": 1516123366, "creation_date": 1516123366, "answer_id": 48286658, "question_id": 48285909, "link": "https://stackoverflow.com/questions/48285909/ruby-keywords-argument-destructuring/48286658#48286658", "title": "ruby keywords argument destructuring", "body": "<p>Ruby implicitly converts a hash to keyword args, here is a good post: <a href=\"https://makandracards.com/makandra/36013-heads-up-ruby-implicitly-converts-a-hash-to-keyword-arguments\" rel=\"nofollow noreferrer\">https://makandracards.com/makandra/36013-heads-up-ruby-implicitly-converts-a-hash-to-keyword-arguments</a></p>\n\n<p>Because of this, they recommend you do not mix keyword and optional arguments: <a href=\"https://makandracards.com/makandra/36011-ruby-do-not-mix-optional-and-keyword-arguments\" rel=\"nofollow noreferrer\">https://makandracards.com/makandra/36011-ruby-do-not-mix-optional-and-keyword-arguments</a></p>\n"}], "owner": {"reputation": 5516, "user_id": 282636, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/22632681afdd11cbd0e829a4739b8ccc?s=128&d=identicon&r=PG", "display_name": "Andreas Krey", "link": "https://stackoverflow.com/users/282636/andreas-krey"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 296, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1516123366, "creation_date": 1516120621, "question_id": 48285909, "link": "https://stackoverflow.com/questions/48285909/ruby-keywords-argument-destructuring", "title": "ruby keywords argument destructuring", "body": "<p>I have the simple function</p>\n\n<pre><code>def fn(x,a:nil)\n  \"#{x.inspect} - #{a.inspect}\"\nend\n</code></pre>\n\n<p>and doing <code>puts fn({ 'v' =&gt; 1, :a =&gt; 2})</code> I get <code>{\"v\"=&gt;1, :a=&gt;2} - nil</code> as expected.</p>\n\n<p>But if I make <code>x</code> optional, as in <code>def fn(x=nil,a:nil)</code>, I unexpectedly get <code>{\"v\"=&gt;1} - 2</code>, i.e. the <code>a</code> part has been removed from the hash and put into the keyword argument.</p>\n\n<p>Why does that only happen when <code>x</code> is optional?</p>\n\n<p>(I know that the invocation is equivalent to <code>fn('v' =&gt; 1, :a =&gt; 2)</code>, and using this indeed does not change the behaviour.)</p>\n\n<p>debian <code>ruby 2.1.5p273</code>, same with RHEL <code>ruby 2.0.0p598</code>.</p>\n"}, {"tags": ["ruby", "regex"], "comments": [{"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 1, "creation_date": 1516120521, "post_id": 48285671, "comment_id": 83556184, "body": "What do you mean by &quot;works&quot;? <b>Why</b> is that result correct? I understand why your code obtains this result, but I don&#39;t understand what logic you actually intended to apply."}, {"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1516120654, "post_id": 48285671, "comment_id": 83556270, "body": "For example, maybe that result is wrong, and <i>this</i> is actually the &quot;correct&quot;?? <code>[&quot;hello&quot;, &quot;there   ok \\&quot;hohh\\&quot;   &quot;, &quot;   ciao    \\&quot;eeee  \\&quot;   \\&quot;  yessss &quot;, &quot;aaa&quot;, &quot;%%55+&quot;]</code> If not, then <i>why not</i>?"}, {"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1516120820, "post_id": 48285671, "comment_id": 83556385, "body": "Provide some more context. What is the real problem you&#39;re solving? What are you actually trying to achieve? For instance, maybe you&#39;re actually trying to parse a CSV file? (In which case, don&#39;t use regex; there are libraries for this.) The question sounds like a potential <a href=\"https://meta.stackexchange.com/questions/66377/what-is-the-xy-problem\">XY problem</a> to me."}, {"owner": {"reputation": 83, "user_id": 3863264, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/4cc2ab904de2f0a07526873171e903f3?s=128&d=identicon&r=PG&f=1", "display_name": "log69", "link": "https://stackoverflow.com/users/3863264/log69"}, "reply_to_user": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1516121241, "post_id": 48285671, "comment_id": 83556620, "body": "No CSV here. As I wrote, I need to parse a string (this is command line for an interpreter that is part of my program). So I need my parser to be able to interpret single quoted text with embedded double quotes and double quoted text with embedded single quotes and also text without quotes. Therefore the intended output that I provided above is correct for me."}, {"owner": {"reputation": 4600, "user_id": 5961578, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/df7cbfdd2a92a7926af3bbb8648318aa?s=128&d=identicon&r=PG", "display_name": "moveson", "link": "https://stackoverflow.com/users/5961578/moveson"}, "edited": false, "score": 1, "creation_date": 1516122657, "post_id": 48285671, "comment_id": 83557497, "body": "You can replace <code>select{|x|x}</code> with the idiomatic Ruby <a href=\"https://apidock.com/ruby/v1_9_3_392/Array/compact\" rel=\"nofollow noreferrer\"><code>Array#compact</code></a>."}, {"owner": {"reputation": 83, "user_id": 3863264, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/4cc2ab904de2f0a07526873171e903f3?s=128&d=identicon&r=PG&f=1", "display_name": "log69", "link": "https://stackoverflow.com/users/3863264/log69"}, "reply_to_user": {"reputation": 4600, "user_id": 5961578, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/df7cbfdd2a92a7926af3bbb8648318aa?s=128&d=identicon&r=PG", "display_name": "moveson", "link": "https://stackoverflow.com/users/5961578/moveson"}, "edited": false, "score": 0, "creation_date": 1516124439, "post_id": 48285671, "comment_id": 83558654, "body": "@moveson that&#39;s neat, thx"}, {"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1516125219, "post_id": 48285671, "comment_id": 83559075, "body": "@log69 <i>&quot;this is command line for an interpreter that is part of my program&quot;</i> -- Ahh, right then! So have you considered using ruby&#39;s built-in functionality such as <a href=\"http://ruby-doc.org/core/ARGF.html#method-i-argv\" rel=\"nofollow noreferrer\"><code>ARGV</code></a>? This would be much cleaner, more concise and reliable than a custom regex solution."}, {"owner": {"reputation": 83, "user_id": 3863264, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/4cc2ab904de2f0a07526873171e903f3?s=128&d=identicon&r=PG&f=1", "display_name": "log69", "link": "https://stackoverflow.com/users/3863264/log69"}, "reply_to_user": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1516128805, "post_id": 48285671, "comment_id": 83560814, "body": "@TomLord It&#39;s not that simple, it is not a command line program in Ruby, for that I would use ARGV or the OptionParser class. What I need is parsing a string as I wrote above. Parameters in this string can stand between single and double quotes with nested quotes. I find the example above working but cannot understand the regex part and would like to validate its correctness. Thx."}, {"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1516141853, "post_id": 48285671, "comment_id": 83566807, "body": "@log69 Right... But there&#39;s a library for emulating that behaviour. No need to reinvent the wheel with a confusing regex! I&#39;ll post an answer below now, but for future reference: <i>always</i> describe the full context of the problem, to prevent XY Questions like this. You&#39;re asking for answers to is a misguided implementation, not the original problem in hand."}], "answers": [{"comments": [{"owner": {"reputation": 83, "user_id": 3863264, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/4cc2ab904de2f0a07526873171e903f3?s=128&d=identicon&r=PG&f=1", "display_name": "log69", "link": "https://stackoverflow.com/users/3863264/log69"}, "edited": false, "score": 1, "creation_date": 1516207711, "post_id": 48291185, "comment_id": 83597243, "body": "ShellWords seems cool. Thanks for your thorough answer, I greatly appreciate it."}], "tags": [], "owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "is_accepted": true, "score": 1, "last_activity_date": 1516144006, "last_edit_date": 1516144006, "creation_date": 1516143592, "answer_id": 48291185, "question_id": 48285671, "link": "https://stackoverflow.com/questions/48285671/why-does-the-following-parsing-solution-work/48291185#48291185", "title": "Why does the following parsing solution work?", "body": "<p>No need to solve this with a custom regex; <a href=\"http://ruby-doc.org/stdlib/libdoc/shellwords/rdoc/Shellwords.html\" rel=\"nofollow noreferrer\">the ruby standard library contains a module for this: <strong><code>Shellwords</code></strong></a>.</p>\n\n<blockquote>\n  <h3>Manipulates strings like the UNIX Bourne shell</h3>\n  \n  <p>This module manipulates strings according to the word parsing rules of the UNIX Bourne shell.</p>\n</blockquote>\n\n<p>Usage:</p>\n\n<pre><code>require 'shellwords'\n\nstr = \" hello    'there   ok \\\"hohh\\\"   '   ciao    \\\"eeee  \\\"   \\\"  yessss 'aaa'  \\\"   %%55+ \"\n\nShellwords.split(str)\n  #=&gt; [\"hello\", \"there   ok \\\"hohh\\\"   \", \"ciao\", \"eeee  \", \"  yessss 'aaa'  \", \"%%55+\"]\n# Or equivalently:\nstr.shellsplit\n  #=&gt; [\"hello\", \"there   ok \\\"hohh\\\"   \", \"ciao\", \"eeee  \", \"  yessss 'aaa'  \", \"%%55+\"]\n</code></pre>\n\n<hr>\n\n<p>The above is the \"right\" answer. Use that. What follows is additional information to explain <em>why</em> to use this, and why your answer \"sort-of\" works.</p>\n\n<p>Parsing these strings accurately is tricky! Your regex attempt works for <em>most</em> inputs, but does not properly handle various edge cases. For example, consider:</p>\n\n<pre><code>str = \"foo\\\\ bar\"\n\nstr.shellsplit\n  #=&gt; [\"foo bar\"] (correct!)\n\nstr.scan(/\\\"(.*?)\\\"|'(.*?)'|([^\\s]+)/).flatten.select{|x|x}\n  #=&gt; [\"foo\\\\\", \"bar\"] (wrong!)\n</code></pre>\n\n<p>The <a href=\"https://github.com/rubysl/rubysl-shellwords/blob/d98beb721a3d2ddc8be02e24ee4307b51bf0508e/lib/rubysl/shellwords/shellwords.rb#L32-L45\" rel=\"nofollow noreferrer\">method's implementation</a> does still use a (more complex!) regex under the hood, but also handles edge cases such as invalid inputs - which yours does not.</p>\n\n<blockquote>\n<pre><code>line.scan(/\\G\\s*(?&gt;([^\\s\\\\\\'\\\"]+)|'([^\\']*)'|\"((?:[^\\\"\\\\]|\\\\.)*)\"|(\\\\.?)|(\\S))(\\s|\\z)?/m)\n</code></pre>\n</blockquote>\n\n<p>So without digging <em>too</em> deeply into the flaws of your approach (but suffice to say, it doesn't always work!), why does it <strong>mostly</strong> work? Well, your regex:</p>\n\n<blockquote>\n<pre><code>/\\\"(.*?)\\\"|'(.*?)'|([^\\s]+)/\n</code></pre>\n</blockquote>\n\n<p>...is saying:</p>\n\n<ul>\n<li>If <code>\"</code> is found, match <em>as <strong>little</strong> as possible</em> (<code>.*?</code>) up until the closing <code>\"</code>.</li>\n<li>Same as above, for single quotes (<code>'</code>).</li>\n<li>If neither a single nor double quote is found, scan ahead to the first non-whitespace characters (<code>[^\\s]+</code> -- which could also, equivalently, have been written as <code>\\S+</code>).</li>\n</ul>\n\n<p>The <code>.flatten</code> is necessary because you're using <em>capture groups</em> (<code>(...)</code>). This could have been avoided if you'd used non-capture groups instead (<code>(?:...)</code>).</p>\n\n<p>The <code>.select{|x|x}</code>, or (effectively) equivalently <code>.compact</code> was also necessary because of these capture groups - since in each match, 2 of the 3 groups were not part of the result.</p>\n"}], "owner": {"reputation": 83, "user_id": 3863264, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/4cc2ab904de2f0a07526873171e903f3?s=128&d=identicon&r=PG&f=1", "display_name": "log69", "link": "https://stackoverflow.com/users/3863264/log69"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 59, "favorite_count": 0, "accepted_answer_id": 48291185, "answer_count": 1, "score": 0, "last_activity_date": 1516144006, "creation_date": 1516119696, "last_edit_date": 1516123095, "question_id": 48285671, "link": "https://stackoverflow.com/questions/48285671/why-does-the-following-parsing-solution-work", "title": "Why does the following parsing solution work?", "body": "<p>I need simple parsing with embedded single and double quotes. For the following input:</p>\n\n<pre><code>\" hello    'there   ok \\\"hohh\\\"   '   ciao    \\\"eeee  \\\"   \\\"  yessss 'aaa'  \\\"   %%55+ \"\n</code></pre>\n\n<p>I need the following output:</p>\n\n<pre><code>[\"hello\", \"there   ok \\\"hohh\\\"   \", \"ciao\", \"eeee  \", \"  yessss 'aaa'  \", \"%%55+\"]\n</code></pre>\n\n<p>Why does the following Ruby code that I came up with work? I do not understand the regex part. I know basic regex but I assume that the embedded quotes should not work but they still do, either with single ones having doubles and vice versa.</p>\n\n<pre><code>text.scan(/\\\"(.*?)\\\"|'(.*?)'|([^\\s]+)/).flatten.select{|x|x}\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "filter", "activeadmin"], "answers": [{"tags": [], "owner": {"reputation": 2560, "user_id": 153279, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/783f796db3d628f7c268326fb3323de8?s=128&d=identicon&r=PG", "display_name": "Piers C", "link": "https://stackoverflow.com/users/153279/piers-c"}, "is_accepted": false, "score": 1, "last_activity_date": 1516139694, "creation_date": 1516139694, "answer_id": 48290447, "question_id": 48285649, "link": "https://stackoverflow.com/questions/48285649/ruby-in-rails-activeadmin-filter-age-from-birthday-column/48290447#48290447", "title": "Ruby in Rails - Activeadmin - :filter Age from Birthday column", "body": "<p>I wouldn't say 'easy', but there are a couple of articles on custom filters with Ransack listed on the <a href=\"https://github.com/activeadmin/activeadmin/wiki#index-pages-filters-and-scopes\" rel=\"nofollow noreferrer\">wiki</a>.</p>\n"}], "owner": {"reputation": 31, "user_id": 9225310, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c23bfbfe1008c3c6ffc1ac9ba46b3f36?s=128&d=identicon&r=PG&f=1", "display_name": "SmackerJacker", "link": "https://stackoverflow.com/users/9225310/smackerjacker"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 126, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1516139694, "creation_date": 1516119639, "last_edit_date": 1516139690, "question_id": 48285649, "link": "https://stackoverflow.com/questions/48285649/ruby-in-rails-activeadmin-filter-age-from-birthday-column", "title": "Ruby in Rails - Activeadmin - :filter Age from Birthday column", "body": "<p>I have a little problem. In my DB I have a column <code>:birthday</code>. Format is <code>Date: \"1999-12-1\"</code> for example. But I want to have a filter for age in my page.</p>\n\n<p>Is there an easy way to calculate it ?\nfilter <code>:birthday.age</code> or something? I know this sounds easy, but I can't make it work.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "forms", "activerecord", "drop-down-menu"], "answers": [{"comments": [{"owner": {"reputation": 8270, "user_id": 168286, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/EcFEn.jpg?s=128&g=1", "display_name": "Lee McAlilly", "link": "https://stackoverflow.com/users/168286/lee-mcalilly"}, "edited": false, "score": 0, "creation_date": 1516124694, "post_id": 48286592, "comment_id": 83558805, "body": "Wow. Ok that worked! Thank you. ThIs doesn&#39;t seem like the correct &quot;Rails Way&quot;, so I&#39;d be interested in seeing if anyone knows a more idiomatically correct way to do this, but just happy to see it working finally. Thanks so much."}, {"owner": {"reputation": 8270, "user_id": 168286, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/EcFEn.jpg?s=128&g=1", "display_name": "Lee McAlilly", "link": "https://stackoverflow.com/users/168286/lee-mcalilly"}, "edited": false, "score": 2, "creation_date": 1516125094, "post_id": 48286592, "comment_id": 83559003, "body": "Lesson learned: when in doubt, build the form manually in HTML before banging your head against every Rails helper method."}], "tags": [], "owner": {"reputation": 6942, "user_id": 4172515, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/BYWxd.jpg?s=128&g=1", "display_name": "fool-dev", "link": "https://stackoverflow.com/users/4172515/fool-dev"}, "is_accepted": true, "score": 2, "last_activity_date": 1516123089, "creation_date": 1516123089, "answer_id": 48286592, "question_id": 48285481, "link": "https://stackoverflow.com/questions/48285481/how-do-you-use-a-single-select-dropdown-with-rails-has-many-through-association/48286592#48286592", "title": "How do you use a single select dropdown with Rails has_many through association?", "body": "<p>Yes! exactly, I had the same problem but I have solved by using own tricks, see the below code</p>\n\n<pre><code>&lt;div class=\"form-group\"&gt;\n    &lt;label&gt;Artist&lt;/label&gt;\n    &lt;select name=\"quote[artist_ids][]\" id=\"quote_artist_ids\" class=\"form-control\"&gt;\n        &lt;% Artist.all.each do |artist| %&gt;\n            &lt;option value=\"&lt;%= artist.id %&gt;\"&gt;\n                &lt;%= artist.name %&gt;\n            &lt;/option&gt;\n        &lt;% end %&gt;\n    &lt;/select&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p>It's working, without this everything are same like: <code>quote_params</code> I mean all are the same which before worked for multiple.</p>\n\n<p>Hope to help</p>\n"}, {"comments": [{"owner": {"reputation": 905, "user_id": 11682469, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/39A5w.jpg?s=128&g=1", "display_name": "Jeanne Dark", "link": "https://stackoverflow.com/users/11682469/jeanne-dark"}, "edited": false, "score": 0, "creation_date": 1606722677, "post_id": 65068377, "comment_id": 115036804, "body": "Hi and welcome to Stack Overflow! Please take the <a href=\"https://stackoverflow.com/tour\">tour</a>. Here&#39;s a <a href=\"https://stackoverflow.com/editing-help\">help center article</a> on how you can properly format code. Thanks for contributing an answer but can you also add an explanation on how your code solves the problem?"}], "tags": [], "owner": {"reputation": 1, "user_id": 14732893, "user_type": "registered", "profile_image": "https://graph.facebook.com/1114654402270219/picture?type=large", "display_name": "Cezar Ramirez", "link": "https://stackoverflow.com/users/14732893/cezar-ramirez"}, "is_accepted": false, "score": 0, "last_activity_date": 1606757564, "last_edit_date": 1606757564, "creation_date": 1606712936, "answer_id": 65068377, "question_id": 48285481, "link": "https://stackoverflow.com/questions/48285481/how-do-you-use-a-single-select-dropdown-with-rails-has-many-through-association/65068377#65068377", "title": "How do you use a single select dropdown with Rails has_many through association?", "body": "<p>This is the correct way, by Ruby on Rails:</p>\n<pre><code>&lt;%= collection_select(:empleado, :departamento_id, Departamento.all, :id, :nombre_departamento, {:prompt =&gt; false}) %&gt;\n</code></pre>\n"}], "owner": {"reputation": 8270, "user_id": 168286, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/EcFEn.jpg?s=128&g=1", "display_name": "Lee McAlilly", "link": "https://stackoverflow.com/users/168286/lee-mcalilly"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 869, "favorite_count": 0, "accepted_answer_id": 48286592, "answer_count": 2, "score": 1, "last_activity_date": 1606757564, "creation_date": 1516119077, "last_edit_date": 1516124751, "question_id": 48285481, "link": "https://stackoverflow.com/questions/48285481/how-do-you-use-a-single-select-dropdown-with-rails-has-many-through-association", "title": "How do you use a single select dropdown with Rails has_many through association?", "body": "<p>I can't figure out how to get a single select dropdown for a Rails has_many through association to work. I can only get multiple checkboxes or a multiple-select to work.</p>\n\n<p>How do you have a rails has_many through relationship where you want the user to only be able to select one option from the associated collection through a single select drop down?</p>\n\n<p>Here are my models</p>\n\n<pre><code>class Artist &lt; ApplicationRecord\n  has_many :topics\n  has_many :quotes, through: :topics\nend\n\nclass Topic &lt; ApplicationRecord\n  belongs_to :artist\n  belongs_to :quote\nend\n\nclass Quote &lt; ApplicationRecord\n  has_many :topics\n  has_many :artists, through: :topics\nend\n</code></pre>\n\n<p>Here is my create action and params in the Quotes controller:</p>\n\n<pre><code>  def create\n    @quote = current_user.quotes.build(quote_params)\n    if @quote.save\n      flash[:success] = \"Quote created!\"\n      redirect_to root_url\n    else\n      @feed_items = []\n      render 'static_pages/home'\n    end\n  end\n</code></pre>\n\n<p>And here are the form fields that work:</p>\n\n<pre><code>&lt;%= f.collection_select(:artist_ids, Artist.all, :id, :name,\n      {}, { :multiple =&gt; true } ) %&gt;\n\n&lt;%= f.collection_check_boxes(:artist_ids, Artist.all, :id, :name ) %&gt;\n</code></pre>\n\n<p>If I use this to make a single select drop down it just displays the dropdown with the correct collection, but then doesn't seem to save on submit and doesn't display in the view:</p>\n\n<pre><code>&lt;%= f.collection_select(:artist_ids, Artist.all, :id, :name ) %&gt;\n</code></pre>\n\n<p>For the two form fields that do work I can display the results in the view with this:</p>\n\n<pre><code>&lt;% quote.artists.each do |artist| %&gt;\n  &lt;%= artist.name %&gt; - It worked!\n&lt;% end %&gt;\n</code></pre>\n\n<p>But I don't want a multi-select dropdown. I just want a dropdown where you can only select and submit one option. How do you do this?</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "answers": [{"tags": [], "owner": {"reputation": 545, "user_id": 7146589, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/0f3b4cadf837952a1fbc16191d22c2bf?s=128&d=identicon&r=PG&f=1", "display_name": "iceveda06", "link": "https://stackoverflow.com/users/7146589/iceveda06"}, "is_accepted": false, "score": 0, "last_activity_date": 1516119339, "creation_date": 1516119339, "answer_id": 48285565, "question_id": 48285400, "link": "https://stackoverflow.com/questions/48285400/how-to-select-and-save-multiple-ids-in-ruby-on-rails/48285565#48285565", "title": "How to select and save multiple ids in ruby on rails", "body": "<p>bsh,</p>\n\n<p>It sounds like you need to have many to many association between competence and staff.  Here is a link to Rails guide which talks about how to set it up.  Look at section 2.4 that has what you want to accomplish.</p>\n\n<p><a href=\"http://guides.rubyonrails.org/association_basics.html\" rel=\"nofollow noreferrer\">has_many :through Associations</a></p>\n"}], "owner": {"reputation": 1, "user_id": 6117338, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ea59fadf88ef2d031cfd1fad7bd4f93e?s=128&d=identicon&r=PG&f=1", "display_name": "bsh", "link": "https://stackoverflow.com/users/6117338/bsh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 131, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1516179921, "creation_date": 1516118825, "last_edit_date": 1516179921, "question_id": 48285400, "link": "https://stackoverflow.com/questions/48285400/how-to-select-and-save-multiple-ids-in-ruby-on-rails", "title": "How to select and save multiple ids in ruby on rails", "body": "<p>Im building a site where a business can create staff and competences.<br>\nThe business first creates the staff. After that when creating the competences they should choose which staff who has that competence.<br>\nI have a working solution where i save the staff ids in an array which belongs_to clinic. \nI would like to have a connection between the models so i can call both Business.staff.competences and Business.competence.staffs.</p>\n"}, {"tags": ["javascript", "jquery", "ruby-on-rails", "ruby", "ajax"], "comments": [{"owner": {"reputation": 696, "user_id": 7314004, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/95806024183ca05eed5c8a100c610ce8?s=128&d=identicon&r=PG&f=1", "display_name": "Peter H&#248;jlund Andersen", "link": "https://stackoverflow.com/users/7314004/peter-h%c3%b8jlund-andersen"}, "edited": false, "score": 0, "creation_date": 1516129446, "post_id": 48284898, "comment_id": 83561099, "body": "Okay, there is no new data in your js."}, {"owner": {"reputation": 13, "user_id": 8870751, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/f6142e26703da60b4d6af4023312ef5e?s=128&d=identicon&r=PG&f=1", "display_name": "donkihot5", "link": "https://stackoverflow.com/users/8870751/donkihot5"}, "reply_to_user": {"reputation": 696, "user_id": 7314004, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/95806024183ca05eed5c8a100c610ce8?s=128&d=identicon&r=PG&f=1", "display_name": "Peter H&#248;jlund Andersen", "link": "https://stackoverflow.com/users/7314004/peter-h%c3%b8jlund-andersen"}, "edited": false, "score": 0, "creation_date": 1516129506, "post_id": 48284898, "comment_id": 83561124, "body": "so how do you mean"}], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 8870751, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/f6142e26703da60b4d6af4023312ef5e?s=128&d=identicon&r=PG&f=1", "display_name": "donkihot5", "link": "https://stackoverflow.com/users/8870751/donkihot5"}, "edited": false, "score": 0, "creation_date": 1516130510, "post_id": 48288217, "comment_id": 83561615, "body": "Thank You, I will take a look, hope it helps, if it happens to work I&#39;ll accept the answer."}, {"owner": {"reputation": 696, "user_id": 7314004, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/95806024183ca05eed5c8a100c610ce8?s=128&d=identicon&r=PG&f=1", "display_name": "Peter H&#248;jlund Andersen", "link": "https://stackoverflow.com/users/7314004/peter-h%c3%b8jlund-andersen"}, "reply_to_user": {"reputation": 13, "user_id": 8870751, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/f6142e26703da60b4d6af4023312ef5e?s=128&d=identicon&r=PG&f=1", "display_name": "donkihot5", "link": "https://stackoverflow.com/users/8870751/donkihot5"}, "edited": false, "score": 0, "creation_date": 1516194166, "post_id": 48288217, "comment_id": 83588106, "body": "I normally use the <code>$(&quot;#song_like&quot;).html(...)</code> - to change the HTML."}, {"owner": {"reputation": 13, "user_id": 8870751, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/f6142e26703da60b4d6af4023312ef5e?s=128&d=identicon&r=PG&f=1", "display_name": "donkihot5", "link": "https://stackoverflow.com/users/8870751/donkihot5"}, "edited": false, "score": 0, "creation_date": 1516194633, "post_id": 48288217, "comment_id": 83588362, "body": "how do you mean? have You tested it, or You are saying this is the query to use, are You referring to the &#39;teju c&#39;s answer"}, {"owner": {"reputation": 696, "user_id": 7314004, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/95806024183ca05eed5c8a100c610ce8?s=128&d=identicon&r=PG&f=1", "display_name": "Peter H&#248;jlund Andersen", "link": "https://stackoverflow.com/users/7314004/peter-h%c3%b8jlund-andersen"}, "reply_to_user": {"reputation": 13, "user_id": 8870751, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/f6142e26703da60b4d6af4023312ef5e?s=128&d=identicon&r=PG&f=1", "display_name": "donkihot5", "link": "https://stackoverflow.com/users/8870751/donkihot5"}, "edited": false, "score": 0, "creation_date": 1516200331, "post_id": 48288217, "comment_id": 83592221, "body": "I checked my answer this morning and i realised that this was the only line that&#39;s different from what i normally use. - so i just wanted to let you know that i haven&#39;t myself used load when i&#39;ve implemented ajax."}, {"owner": {"reputation": 13, "user_id": 8870751, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/f6142e26703da60b4d6af4023312ef5e?s=128&d=identicon&r=PG&f=1", "display_name": "donkihot5", "link": "https://stackoverflow.com/users/8870751/donkihot5"}, "edited": false, "score": 0, "creation_date": 1516263474, "post_id": 48288217, "comment_id": 83618583, "body": "oh, well I did say I do not know jQuery, so I just used load, but yes, if that is the way to go around, I will try that also, anyway, I am still on this issue... Need to check my locals again..."}, {"owner": {"reputation": 696, "user_id": 7314004, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/95806024183ca05eed5c8a100c610ce8?s=128&d=identicon&r=PG&f=1", "display_name": "Peter H&#248;jlund Andersen", "link": "https://stackoverflow.com/users/7314004/peter-h%c3%b8jlund-andersen"}, "reply_to_user": {"reputation": 13, "user_id": 8870751, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/f6142e26703da60b4d6af4023312ef5e?s=128&d=identicon&r=PG&f=1", "display_name": "donkihot5", "link": "https://stackoverflow.com/users/8870751/donkihot5"}, "edited": false, "score": 0, "creation_date": 1516268112, "post_id": 48288217, "comment_id": 83621380, "body": "Okay. And I just saw <code>&lt;%= j ...</code>  - the &#39;j&#39; should be just after like this: <code>&lt;%=j ..</code> ---- NOW it should work :)"}, {"owner": {"reputation": 13, "user_id": 8870751, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/f6142e26703da60b4d6af4023312ef5e?s=128&d=identicon&r=PG&f=1", "display_name": "donkihot5", "link": "https://stackoverflow.com/users/8870751/donkihot5"}, "edited": false, "score": 0, "creation_date": 1516276162, "post_id": 48288217, "comment_id": 83626407, "body": "I am searching the net, and at some pages I have seen they add &#39;remote: true&#39; and &#39;ID&#39; to the link and then they work with that ID, do You think adding an ID could work, because, when I look at the partial with link, that link actually has an icon and number which need to be refreshed? So, perhaps I do not even need to reload/load the div in my view, but rather the link itself"}, {"owner": {"reputation": 696, "user_id": 7314004, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/95806024183ca05eed5c8a100c610ce8?s=128&d=identicon&r=PG&f=1", "display_name": "Peter H&#248;jlund Andersen", "link": "https://stackoverflow.com/users/7314004/peter-h%c3%b8jlund-andersen"}, "reply_to_user": {"reputation": 13, "user_id": 8870751, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/f6142e26703da60b4d6af4023312ef5e?s=128&d=identicon&r=PG&f=1", "display_name": "donkihot5", "link": "https://stackoverflow.com/users/8870751/donkihot5"}, "edited": false, "score": 0, "creation_date": 1516276429, "post_id": 48288217, "comment_id": 83626609, "body": "You already done that in your link: <code>like_song_path(@s.id, like: true), method: :post, remote: true</code> - <code>@s.id</code> is your id and you&#39;re working with that in your controller: <code>@song = Song.find(params[:id])</code>"}, {"owner": {"reputation": 696, "user_id": 7314004, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/95806024183ca05eed5c8a100c610ce8?s=128&d=identicon&r=PG&f=1", "display_name": "Peter H&#248;jlund Andersen", "link": "https://stackoverflow.com/users/7314004/peter-h%c3%b8jlund-andersen"}, "reply_to_user": {"reputation": 13, "user_id": 8870751, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/f6142e26703da60b4d6af4023312ef5e?s=128&d=identicon&r=PG&f=1", "display_name": "donkihot5", "link": "https://stackoverflow.com/users/8870751/donkihot5"}, "edited": false, "score": 0, "creation_date": 1516276603, "post_id": 48288217, "comment_id": 83626717, "body": "Can i see your routes.rb to see how the route for the link is set up?"}, {"owner": {"reputation": 696, "user_id": 7314004, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/95806024183ca05eed5c8a100c610ce8?s=128&d=identicon&r=PG&f=1", "display_name": "Peter H&#248;jlund Andersen", "link": "https://stackoverflow.com/users/7314004/peter-h%c3%b8jlund-andersen"}, "reply_to_user": {"reputation": 13, "user_id": 8870751, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/f6142e26703da60b4d6af4023312ef5e?s=128&d=identicon&r=PG&f=1", "display_name": "donkihot5", "link": "https://stackoverflow.com/users/8870751/donkihot5"}, "edited": false, "score": 0, "creation_date": 1516276692, "post_id": 48288217, "comment_id": 83626783, "body": "I don&#39;t understand: <i>when I look at the partial with link, that link actually has an icon and number which need to be refreshed? So, perhaps I do not even need to reload/load the div in my view, but rather the link itself</i>"}, {"owner": {"reputation": 13, "user_id": 8870751, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/f6142e26703da60b4d6af4023312ef5e?s=128&d=identicon&r=PG&f=1", "display_name": "donkihot5", "link": "https://stackoverflow.com/users/8870751/donkihot5"}, "edited": false, "score": 0, "creation_date": 1516279771, "post_id": 48288217, "comment_id": 83628633, "body": "I added the routes.rb part to the question, and ID which I am referring to is: &lt;%= link_to &quot;New Task&quot;, new_task_path, id: &quot;new_link&quot;, remote: true %&gt; something like this, here they have added an HTML ID to the link and are using it in jQuery, so maybe I need something like that also..."}, {"owner": {"reputation": 696, "user_id": 7314004, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/95806024183ca05eed5c8a100c610ce8?s=128&d=identicon&r=PG&f=1", "display_name": "Peter H&#248;jlund Andersen", "link": "https://stackoverflow.com/users/7314004/peter-h%c3%b8jlund-andersen"}, "reply_to_user": {"reputation": 13, "user_id": 8870751, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/f6142e26703da60b4d6af4023312ef5e?s=128&d=identicon&r=PG&f=1", "display_name": "donkihot5", "link": "https://stackoverflow.com/users/8870751/donkihot5"}, "edited": false, "score": 0, "creation_date": 1516362492, "post_id": 48288217, "comment_id": 83665973, "body": "You are already using the id to find the song and creating the like. It looks fine. But have you changed your <code>like</code> to <code>@like</code> so the js can find the new variable? Do you have <a href=\"https://github.com/deivid-rodriguez/byebug\" rel=\"nofollow noreferrer\">Byebug</a> or <a href=\"https://github.com/pry/pry\" rel=\"nofollow noreferrer\">Pry</a> installed? I would use them to make sure that everything is being created in the controller as it should. For example: is <code>@like.valid?</code>  And can you add your updated <code>link.js.erb</code> as well?"}, {"owner": {"reputation": 13, "user_id": 8870751, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/f6142e26703da60b4d6af4023312ef5e?s=128&d=identicon&r=PG&f=1", "display_name": "donkihot5", "link": "https://stackoverflow.com/users/8870751/donkihot5"}, "edited": false, "score": 0, "creation_date": 1516371267, "post_id": 48288217, "comment_id": 83671396, "body": "Yes I did change the @like, I will take a look at this all over again during the weekend, then I will come back, hopefully the solution will arise, it is near at least..."}, {"owner": {"reputation": 13, "user_id": 8870751, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/f6142e26703da60b4d6af4023312ef5e?s=128&d=identicon&r=PG&f=1", "display_name": "donkihot5", "link": "https://stackoverflow.com/users/8870751/donkihot5"}, "edited": false, "score": 0, "creation_date": 1518338763, "post_id": 48288217, "comment_id": 84458513, "body": "I have managed to get it around and make it t work, apparently I needed to add class to the link instead of the div, but there is still issue. Do You have any advice how to target only one particular post, without affecting numbers on other posts?"}, {"owner": {"reputation": 13, "user_id": 8870751, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/f6142e26703da60b4d6af4023312ef5e?s=128&d=identicon&r=PG&f=1", "display_name": "donkihot5", "link": "https://stackoverflow.com/users/8870751/donkihot5"}, "edited": false, "score": 0, "creation_date": 1518386786, "post_id": 48288217, "comment_id": 84473460, "body": "I will try to add this part with ID, Thank You"}, {"owner": {"reputation": 13, "user_id": 8870751, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/f6142e26703da60b4d6af4023312ef5e?s=128&d=identicon&r=PG&f=1", "display_name": "donkihot5", "link": "https://stackoverflow.com/users/8870751/donkihot5"}, "edited": false, "score": 0, "creation_date": 1518387818, "post_id": 48288217, "comment_id": 84473764, "body": "Thank You, Your last update with the ID suggestion worked just fine"}, {"owner": {"reputation": 13, "user_id": 8870751, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/f6142e26703da60b4d6af4023312ef5e?s=128&d=identicon&r=PG&f=1", "display_name": "donkihot5", "link": "https://stackoverflow.com/users/8870751/donkihot5"}, "edited": false, "score": 0, "creation_date": 1518388492, "post_id": 48288217, "comment_id": 84473948, "body": "If You do not mind, can You please take a look at the question on this link, issue is almost the same, just this time I can&#39;t even get it to connect to .js.erb file, here is the link <a href=\"https://stackoverflow.com/questions/48735761/render-follow-unfollow-button-in-rails-with-ajax?noredirect=1#comment84473572_48735761\" title=\"render follow unfollow button in rails with ajax\">stackoverflow.com/questions/48735761/&hellip;</a> Thank You"}], "tags": [], "owner": {"reputation": 696, "user_id": 7314004, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/95806024183ca05eed5c8a100c610ce8?s=128&d=identicon&r=PG&f=1", "display_name": "Peter H&#248;jlund Andersen", "link": "https://stackoverflow.com/users/7314004/peter-h%c3%b8jlund-andersen"}, "is_accepted": true, "score": 0, "last_activity_date": 1518383887, "last_edit_date": 1518383887, "creation_date": 1516129660, "answer_id": 48288217, "question_id": 48284898, "link": "https://stackoverflow.com/questions/48284898/ruby-on-rails-on-rendering-with-ajax/48288217#48288217", "title": "Ruby on Rails on rendering with Ajax", "body": "<h3>EDIT: You should remove the <code>redirect_to</code> in your f.html?</h3>\n\n<h3>This reloads the page - and the js will therefore not work.</h3>\n\n<h3>An Ajax call is per definition not reloading the page.</h3>\n\n<p>If you remove those lines and try the following:</p>\n\n<hr>\n\n<p>There's no new data in your jQuery.</p>\n\n<p>You need a global attribute, so the view can find the data from your controller. </p>\n\n<p>For example: </p>\n\n<pre><code>@like = ...\n</code></pre>\n\n<p>Then in your view you can add a local to be rendered:</p>\n\n<pre><code>$(\"#song_like\").load(\"&lt;%=j render partial: '/components/song_like', locals: {like: @like} %&gt;\");\n</code></pre>\n\n<p><strong>But</strong>, you need to change your partial to be a partial. And change the variable to <code>like</code> so it will be rendered in the right way. </p>\n\n<p>Hope it helps!</p>\n\n<h2>UPDATE</h2>\n\n<p>If you want to hit a specific song you can render it with <code>each</code> and then assign an id to your post's class</p>\n\n<p>For example:</p>\n\n<pre><code>&lt;% @posts.each do |post| %&gt;\n  &lt;div class=\"post-content\"&gt;\n    ... other stuff ...\n    &lt;div class=\"likes like-post-&lt;%= post.id %&gt;\"&gt;\n       .. number of likes\n    &lt;/div&gt; \n    &lt;%= link_to \"Like\", link_route_path(post) %&gt;\n  &lt;/div&gt;\n&lt;% end %&gt;\n\n\n# controller \n# So you can use the id in your js view\n\n@id = params[:id]   \n\n# view.js\n$(\".like-post-\" + \"&lt;%= @id %&gt;\").html(\"&lt;%=  @s.thumbs_up_total %&gt;\"); \n</code></pre>\n\n<p>Hope the idea helps.</p>\n"}, {"comments": [{"owner": {"reputation": 13, "user_id": 8870751, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/f6142e26703da60b4d6af4023312ef5e?s=128&d=identicon&r=PG&f=1", "display_name": "donkihot5", "link": "https://stackoverflow.com/users/8870751/donkihot5"}, "edited": false, "score": 0, "creation_date": 1516130573, "post_id": 48288334, "comment_id": 83561638, "body": "This seems appropriate, I will take a look at it immediately, if it happens to work I will gladly accept the answer as correct. Thank You for detailed info."}, {"owner": {"reputation": 314, "user_id": 5338984, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-FaCNz8NK23I/AAAAAAAAAAI/AAAAAAAAAB8/UBdEWV7l-jo/photo.jpg?sz=128", "display_name": "teju c", "link": "https://stackoverflow.com/users/5338984/teju-c"}, "reply_to_user": {"reputation": 13, "user_id": 8870751, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/f6142e26703da60b4d6af4023312ef5e?s=128&d=identicon&r=PG&f=1", "display_name": "donkihot5", "link": "https://stackoverflow.com/users/8870751/donkihot5"}, "edited": false, "score": 0, "creation_date": 1516131723, "post_id": 48288334, "comment_id": 83562175, "body": "i have one question after like do u want to pass false to like parameter. or opposite to previous like status? if yes i have updated @ like&#39;s value in controller"}, {"owner": {"reputation": 13, "user_id": 8870751, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/f6142e26703da60b4d6af4023312ef5e?s=128&d=identicon&r=PG&f=1", "display_name": "donkihot5", "link": "https://stackoverflow.com/users/8870751/donkihot5"}, "edited": false, "score": 0, "creation_date": 1516132201, "post_id": 48288334, "comment_id": 83562429, "body": "if you mean will there also be a dislike feature, then yes, it is also implemented, however, I am trying this and few error arised first was for the &#39;s&#39; saying undefined local variable or method <code>s&#39;, then I added @s and it changed to undefined local variable or method </code>like&#39;, both errors are in partial file, what do You think?"}, {"owner": {"reputation": 314, "user_id": 5338984, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-FaCNz8NK23I/AAAAAAAAAAI/AAAAAAAAAB8/UBdEWV7l-jo/photo.jpg?sz=128", "display_name": "teju c", "link": "https://stackoverflow.com/users/5338984/teju-c"}, "reply_to_user": {"reputation": 13, "user_id": 8870751, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/f6142e26703da60b4d6af4023312ef5e?s=128&d=identicon&r=PG&f=1", "display_name": "donkihot5", "link": "https://stackoverflow.com/users/8870751/donkihot5"}, "edited": false, "score": 0, "creation_date": 1516132278, "post_id": 48288334, "comment_id": 83562470, "body": "after completing ajax call? you are getting this issue"}, {"owner": {"reputation": 314, "user_id": 5338984, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-FaCNz8NK23I/AAAAAAAAAAI/AAAAAAAAAB8/UBdEWV7l-jo/photo.jpg?sz=128", "display_name": "teju c", "link": "https://stackoverflow.com/users/5338984/teju-c"}, "reply_to_user": {"reputation": 13, "user_id": 8870751, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/f6142e26703da60b4d6af4023312ef5e?s=128&d=identicon&r=PG&f=1", "display_name": "donkihot5", "link": "https://stackoverflow.com/users/8870751/donkihot5"}, "edited": false, "score": 0, "creation_date": 1516132633, "post_id": 48288334, "comment_id": 83562672, "body": "or while coming to page in first place only? anyways updated like.js.erb code check"}, {"owner": {"reputation": 13, "user_id": 8870751, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/f6142e26703da60b4d6af4023312ef5e?s=128&d=identicon&r=PG&f=1", "display_name": "donkihot5", "link": "https://stackoverflow.com/users/8870751/donkihot5"}, "edited": false, "score": 0, "creation_date": 1516132766, "post_id": 48288334, "comment_id": 83562732, "body": "well I changed entire code, and hit reload and then error occurred, so before ajax, ok I will try again, I did, well actually the controller is now an issue, I need to fix &#39;like&#39; value there, as it says undefined variable"}, {"owner": {"reputation": 314, "user_id": 5338984, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-FaCNz8NK23I/AAAAAAAAAAI/AAAAAAAAAB8/UBdEWV7l-jo/photo.jpg?sz=128", "display_name": "teju c", "link": "https://stackoverflow.com/users/5338984/teju-c"}, "reply_to_user": {"reputation": 13, "user_id": 8870751, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/f6142e26703da60b4d6af4023312ef5e?s=128&d=identicon&r=PG&f=1", "display_name": "donkihot5", "link": "https://stackoverflow.com/users/8870751/donkihot5"}, "edited": false, "score": 0, "creation_date": 1516132919, "post_id": 48288334, "comment_id": 83562807, "body": "ohh got it change render to render partial in song_like page, when u provide locals it should render partial. updated the same. first render"}, {"owner": {"reputation": 13, "user_id": 8870751, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/f6142e26703da60b4d6af4023312ef5e?s=128&d=identicon&r=PG&f=1", "display_name": "donkihot5", "link": "https://stackoverflow.com/users/8870751/donkihot5"}, "edited": false, "score": 0, "creation_date": 1516133186, "post_id": 48288334, "comment_id": 83562934, "body": "Ok with adding render partial it got over the controller issues, ok, I will try to implement everything step by step, and let You know how it went, hope now it will be alright, assuming all other steps are going to work, thank You for everything until now..."}, {"owner": {"reputation": 13, "user_id": 8870751, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/f6142e26703da60b4d6af4023312ef5e?s=128&d=identicon&r=PG&f=1", "display_name": "donkihot5", "link": "https://stackoverflow.com/users/8870751/donkihot5"}, "edited": false, "score": 0, "creation_date": 1516178749, "post_id": 48288334, "comment_id": 83578249, "body": "It still does&#39;t work, now I am assuming I do not need @s as a local, I will update the view code in the question, please take a look?"}, {"owner": {"reputation": 314, "user_id": 5338984, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-FaCNz8NK23I/AAAAAAAAAAI/AAAAAAAAAB8/UBdEWV7l-jo/photo.jpg?sz=128", "display_name": "teju c", "link": "https://stackoverflow.com/users/5338984/teju-c"}, "reply_to_user": {"reputation": 13, "user_id": 8870751, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/f6142e26703da60b4d6af4023312ef5e?s=128&d=identicon&r=PG&f=1", "display_name": "donkihot5", "link": "https://stackoverflow.com/users/8870751/donkihot5"}, "edited": false, "score": 0, "creation_date": 1516186143, "post_id": 48288334, "comment_id": 83582934, "body": "well after ajax complete render partial doesn&#39;t get class var, so u need to anyways pass it after ajax complete. So thats why u need to have @s in your partial by sending it as local."}, {"owner": {"reputation": 13, "user_id": 8870751, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/f6142e26703da60b4d6af4023312ef5e?s=128&d=identicon&r=PG&f=1", "display_name": "donkihot5", "link": "https://stackoverflow.com/users/8870751/donkihot5"}, "edited": false, "score": 0, "creation_date": 1516193501, "post_id": 48288334, "comment_id": 83587660, "body": "Ok, will work around it a bit, hope I will get it before returning here..."}, {"owner": {"reputation": 13, "user_id": 8870751, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/f6142e26703da60b4d6af4023312ef5e?s=128&d=identicon&r=PG&f=1", "display_name": "donkihot5", "link": "https://stackoverflow.com/users/8870751/donkihot5"}, "edited": false, "score": 0, "creation_date": 1518338667, "post_id": 48288334, "comment_id": 84458497, "body": "I have managed to get it to work but there are still issues with the numbers, do You have any advice for targeting only one post at a time without affecting the others?"}, {"owner": {"reputation": 13, "user_id": 8870751, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/f6142e26703da60b4d6af4023312ef5e?s=128&d=identicon&r=PG&f=1", "display_name": "donkihot5", "link": "https://stackoverflow.com/users/8870751/donkihot5"}, "edited": false, "score": 0, "creation_date": 1518534505, "post_id": 48288334, "comment_id": 84540632, "body": "Oh, actually the issue was solved in the previous answer, thank You very much for Your assistance. But if You have some free time, could You take a look at the issues in this question:  <a href=\"https://stackoverflow.com/questions/48735761/render-follow-unfollow-button-in-rails-with-ajax\" title=\"render follow unfollow button in rails with ajax\">stackoverflow.com/questions/48735761/&hellip;</a>  The thing is, i just want to render different form if one is already submitted, I have different kinds of errors, but as I am still learning Rails and do not know or understand much of JS, it is not something I can reach by myself. If You can, please take a look? Thank You."}], "tags": [], "owner": {"reputation": 314, "user_id": 5338984, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-FaCNz8NK23I/AAAAAAAAAAI/AAAAAAAAAB8/UBdEWV7l-jo/photo.jpg?sz=128", "display_name": "teju c", "link": "https://stackoverflow.com/users/5338984/teju-c"}, "is_accepted": false, "score": 0, "last_activity_date": 1516132852, "last_edit_date": 1516132852, "creation_date": 1516130156, "answer_id": 48288334, "question_id": 48284898, "link": "https://stackoverflow.com/questions/48284898/ruby-on-rails-on-rendering-with-ajax/48288334#48288334", "title": "Ruby on Rails on rendering with Ajax", "body": "<p>change rendering like this: </p>\n\n<pre><code>&lt;div class=\"col-3\" id=\"song_like\"&gt;\n &lt;%= render partial: '/components/song_like', locals: {s: @s, like: true} %&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p>then in partial: </p>\n\n<pre><code>&lt;%= link_to like_song_path(s.id, like: like), method: :post, remote: true do %&gt;\n    &lt;i class=\"fa fa-thumbs-o-up fa-lg\" aria-hidden=\"true\"&gt;&lt;/i&gt; &amp;nbsp &lt;%= s.thumbs_up_total %&gt;        \n&lt;% end %&gt;\n</code></pre>\n\n<p>and in controller of like_song</p>\n\n<p>should define </p>\n\n<pre><code>@s= Song.find(params[:id])\nlike = Like.create(like: params[:like], user: current_user, song: @song)\n@like = !like.like # opposite to your current status\n</code></pre>\n\n<p>rest of the things good and then in like.js.erb</p>\n\n<pre><code>$('#songs_like').html(\"&lt;%= escape_javascript(render partial: '/components/song_like', locals: { s: @s, like: @like } ) %&gt;\")\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 8870751, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/f6142e26703da60b4d6af4023312ef5e?s=128&d=identicon&r=PG&f=1", "display_name": "donkihot5", "link": "https://stackoverflow.com/users/8870751/donkihot5"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 100, "favorite_count": 0, "accepted_answer_id": 48288217, "answer_count": 2, "score": 0, "last_activity_date": 1518383887, "creation_date": 1516117184, "last_edit_date": 1518338553, "question_id": 48284898, "link": "https://stackoverflow.com/questions/48284898/ruby-on-rails-on-rendering-with-ajax", "title": "Ruby on Rails on rendering with Ajax", "body": "<p>I am working on a simple website which has posts in forms of songs, now I have implemented like and dislike feature, but when I click on like/dislike it renders the numbers of likes/dislikes on all posts. And when I reload the page it returns them to normal. Now I would like it to change only the numbers for that particular post, without affecting the numbers on other posts?</p>\n\n<p>My view for posts:</p>\n\n<pre><code>&lt;div class=\"col-6\"&gt;\n    &lt;% for @s in @songs %&gt;\n    &lt;div class=\"card border-secondary mb-1\"&gt;\n        &lt;div class=\"card-header\"&gt;\n            &lt;div class=\"col-1\"&gt;\n                &lt;%= image_tag User.find(@s.user_id).user_image.url, :size=&gt;\"50x50\" %&gt;\n            &lt;/div&gt;\n            &lt;div class=\"col-11 text-muted\"&gt;\n                &lt;a href=\"/user/&lt;%= User.find(@s.user_id).username %&gt;\" class=\"info-col\"&gt;\n                    &lt;%= User.find(@s.user_id).username %&gt;                           \n                &lt;/a&gt; \n                - &lt;%= @s.created_at.to_formatted_s(:short) %&gt;\n            &lt;/div&gt;\n        &lt;/div&gt;\n        &lt;div class=\"card-body\"&gt;\n        &lt;h4 class=\"card-title\"&gt;\n            &lt;a href=\"&lt;%= song_path(@s) %&gt;\" class=\"link-col\"&gt;&lt;%= @s.title %&gt;&lt;/a&gt;\n        &lt;/h4&gt;\n        &lt;p class=\"card-text\"&gt;&lt;%= simple_format(@s.content) %&gt;&lt;/p&gt;\n        &lt;/div&gt;\n\n        &lt;div class=\"card-footer text-muted\"&gt;\n            &lt;div class=\"col-12\"&gt;\n                &lt;div class=\"row\"&gt;\n\n                    &lt;div class=\"col-3\" id=\"song_like\"&gt;\n                        &lt;%= render '/components/song_like' %&gt;\n                    &lt;/div&gt;\n\n                    &lt;div class=\"col-3\" id=\"song_dislike\"&gt;\n                        &lt;%= render '/components/song_dislike' %&gt;\n                    &lt;/div&gt;\n\n                    &lt;div class=\"col-4\" id=\"song_comment\"&gt;\n                        &lt;%= render '/components/song_comment' %&gt;\n                    &lt;/div&gt;\n\n                &lt;/div&gt;\n            &lt;/div&gt;\n        &lt;/div&gt;\n\n    &lt;/div&gt;\n    &lt;% end %&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p>The song_like partial has the following code:</p>\n\n<pre><code>    &lt;%= link_to like_song_path(@s.id, like: true), remote: true, method: :post do %&gt;\n    &lt;i class=\"fa fa-thumbs-o-up fa-lg\" aria-hidden=\"true\"&gt;&lt;/i&gt; &amp;nbsp &lt;span class=\"songlikes\"&gt;\n        &lt;%= @s.thumbs_up_total %&gt;\n    &lt;/span&gt;        \n&lt;% end %&gt;\n</code></pre>\n\n<p>The song_dislike partial has the following code:</p>\n\n<pre><code>&lt;%= link_to like_song_path(@s.id, like: false), method: :post, remote: true do %&gt;\n    &lt;i class=\"fa fa-thumbs-o-down fa-lg\" aria-hidden=\"true\"&gt;&lt;/i&gt; &amp;nbsp &lt;span class=\"songdislikes\"&gt;\n        &lt;%= @s.thumbs_down_total %&gt;\n    &lt;/span&gt;  \n&lt;% end %&gt;\n</code></pre>\n\n<p>And my 'like' controller is like:</p>\n\n<pre><code>def like\n@s = Song.find(params[:id])\n@like = Like.create(like: params[:like], user: current_user, song: @s)\n\nrespond_to do |format| \nif @like.valid?\n    format.html\n    format.js\nelse\n    format.html\n    format.js\n  end\nend\n</code></pre>\n\n<p>end</p>\n\n<p>This is how like.js.erb looks like:</p>\n\n<pre><code>    $('.songlikes').html(\"&lt;%=  @s.thumbs_up_total %&gt;\");\n\n$('.songdislikes').html(\"&lt;%=  @s.thumbs_down_total %&gt;\");\n</code></pre>\n\n<p>Here is the part of routes.rb file:</p>\n\n<pre><code>resources :songs do\n  member do\n    post 'like'\n  end\nend\n</code></pre>\n\n<p>I am assuming there is some issue on rendering or jquery, but can't figure it out. Do You have any instructions?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4"], "answers": [{"comments": [{"owner": {"reputation": 3791, "user_id": 1467802, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/c370a1855b3094ca8b0e737822164a1a?s=128&d=identicon&r=PG", "display_name": "Mathieu", "link": "https://stackoverflow.com/users/1467802/mathieu"}, "edited": false, "score": 0, "creation_date": 1516115729, "post_id": 48284395, "comment_id": 83552801, "body": "id 5 was just an example I&#39;ll try with self.steps.order(:step_rank).each_with_index do |step, index|   step.update_attributes step_rank: index end"}, {"owner": {"reputation": 3791, "user_id": 1467802, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/c370a1855b3094ca8b0e737822164a1a?s=128&d=identicon&r=PG", "display_name": "Mathieu", "link": "https://stackoverflow.com/users/1467802/mathieu"}, "edited": false, "score": 0, "creation_date": 1516116207, "post_id": 48284395, "comment_id": 83553128, "body": "I get error: undefined method `order&#39; for #&lt;Array:0x00000004edf428&gt;"}, {"owner": {"reputation": 2093, "user_id": 3309314, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/3683a7a05e7e97a67c262b774db00d08?s=128&d=identicon&r=PG&f=1", "display_name": "user3309314", "link": "https://stackoverflow.com/users/3309314/user3309314"}, "reply_to_user": {"reputation": 3791, "user_id": 1467802, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/c370a1855b3094ca8b0e737822164a1a?s=128&d=identicon&r=PG", "display_name": "Mathieu", "link": "https://stackoverflow.com/users/1467802/mathieu"}, "edited": false, "score": 0, "creation_date": 1516116434, "post_id": 48284395, "comment_id": 83553325, "body": "Considering your case <code>Deal#steps</code> should be a relation rather than an array. And a relation has method <code>order</code>"}, {"owner": {"reputation": 3791, "user_id": 1467802, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/c370a1855b3094ca8b0e737822164a1a?s=128&d=identicon&r=PG", "display_name": "Mathieu", "link": "https://stackoverflow.com/users/1467802/mathieu"}, "edited": false, "score": 0, "creation_date": 1516116641, "post_id": 48284395, "comment_id": 83553461, "body": "I agree but i don&#39;t know why it&#39;s an array... in models/Deal.rb , I can&#39;t say of course only &quot;do this for id=5&quot; (id 5 was given to clarify an example), so I use the broader approach : self.steps.reject(&amp;:marked_for_destruction?).order(:step_ran&zwnj;&#8203;k).each_with_index do |step, index|           step.update_attributes step_rank: index         end       end"}, {"owner": {"reputation": 2093, "user_id": 3309314, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/3683a7a05e7e97a67c262b774db00d08?s=128&d=identicon&r=PG&f=1", "display_name": "user3309314", "link": "https://stackoverflow.com/users/3309314/user3309314"}, "reply_to_user": {"reputation": 3791, "user_id": 1467802, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/c370a1855b3094ca8b0e737822164a1a?s=128&d=identicon&r=PG", "display_name": "Mathieu", "link": "https://stackoverflow.com/users/1467802/mathieu"}, "edited": false, "score": 0, "creation_date": 1516116856, "post_id": 48284395, "comment_id": 83553591, "body": "I got what you mean about <code>Deal.find(5)</code>. It&#39;s just an example also. What is context for self by the way?"}, {"owner": {"reputation": 3791, "user_id": 1467802, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/c370a1855b3094ca8b0e737822164a1a?s=128&d=identicon&r=PG", "display_name": "Mathieu", "link": "https://stackoverflow.com/users/1467802/mathieu"}, "edited": false, "score": 0, "creation_date": 1516116897, "post_id": 48284395, "comment_id": 83553622, "body": "well self is the Deal itself as i write self inside a method of the file models/deal.rb. self.steps go to fetch the steps associated with the present Deal."}, {"owner": {"reputation": 2093, "user_id": 3309314, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/3683a7a05e7e97a67c262b774db00d08?s=128&d=identicon&r=PG&f=1", "display_name": "user3309314", "link": "https://stackoverflow.com/users/3309314/user3309314"}, "reply_to_user": {"reputation": 3791, "user_id": 1467802, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/c370a1855b3094ca8b0e737822164a1a?s=128&d=identicon&r=PG", "display_name": "Mathieu", "link": "https://stackoverflow.com/users/1467802/mathieu"}, "edited": false, "score": 0, "creation_date": 1516117376, "post_id": 48284395, "comment_id": 83553959, "body": "Maybe you override steps method somewhere in your Deal model"}, {"owner": {"reputation": 3791, "user_id": 1467802, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/c370a1855b3094ca8b0e737822164a1a?s=128&d=identicon&r=PG", "display_name": "Mathieu", "link": "https://stackoverflow.com/users/1467802/mathieu"}, "edited": false, "score": 0, "creation_date": 1516118664, "post_id": 48284395, "comment_id": 83554893, "body": "This is super weird: If I put in the method a &quot;puts self.steps&quot; to see how it prints in the console I see: #&lt;Step:0x007fa357d52940&gt; #&lt;Step:0x007fa357d52670&gt; #&lt;Step:0x007fa357d523a0&gt; #&lt;Step:0x007fa357d520f8&gt; #&lt;Step:0x007fa357d51dd8&gt; #&lt;Step:0x007fa357d51b30&gt; #&lt;Step:0x007fa357d51860&gt; #&lt;Step:0x007fa357d51540&gt; #&lt;Step:0x007fa357d51298&gt; #&lt;Step:0x007fa357d50ed8&gt; #&lt;Step:0x007fa357d50500&gt;. so self.steps is not an array...So why do I get the error undefined method `order&#39; for #&lt;Array:0x007fa32c355af8&gt; hahah"}, {"owner": {"reputation": 3791, "user_id": 1467802, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/c370a1855b3094ca8b0e737822164a1a?s=128&d=identicon&r=PG", "display_name": "Mathieu", "link": "https://stackoverflow.com/users/1467802/mathieu"}, "edited": false, "score": 0, "creation_date": 1516177947, "post_id": 48284395, "comment_id": 83577812, "body": "found the reasons: As stated in this other SO question <a href=\"https://stackoverflow.com/questions/15730432/order-array-undefined-method-order-for-array-convert-array-into-hash\" title=\"order array undefined method order for array convert array into hash\">stackoverflow.com/questions/15730432/&hellip;</a>, &quot;order is a method used for sorting at the database level. since @hotels is an array, you won&#39;t be able to sort using order&quot;. Replacing it with sort_by(&amp;:step_rank) make it work. Thanks for your help!"}], "tags": [], "owner": {"reputation": 2093, "user_id": 3309314, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/3683a7a05e7e97a67c262b774db00d08?s=128&d=identicon&r=PG&f=1", "display_name": "user3309314", "link": "https://stackoverflow.com/users/3309314/user3309314"}, "is_accepted": true, "score": 1, "last_activity_date": 1516115747, "last_edit_date": 1516115747, "creation_date": 1516115647, "answer_id": 48284395, "question_id": 48284178, "link": "https://stackoverflow.com/questions/48284178/ruby-re-assign-values-to-attributes/48284395#48284395", "title": "Ruby - Re-assign values to attributes", "body": "<p>Try something like this:</p>\n\n<pre><code>Deal.find(5).steps.order(:step_rank).each_with_index do |step, index|\n  step.update_attributes step_rank: index\nend\n</code></pre>\n"}], "owner": {"reputation": 3791, "user_id": 1467802, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/c370a1855b3094ca8b0e737822164a1a?s=128&d=identicon&r=PG", "display_name": "Mathieu", "link": "https://stackoverflow.com/users/1467802/mathieu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 35, "favorite_count": 0, "accepted_answer_id": 48284395, "answer_count": 1, "score": 0, "last_activity_date": 1516115926, "creation_date": 1516114958, "last_edit_date": 1516115926, "question_id": 48284178, "link": "https://stackoverflow.com/questions/48284178/ruby-re-assign-values-to-attributes", "title": "Ruby - Re-assign values to attributes", "body": "<p>I have a belong_to/has_many relation between Deal and Step :</p>\n\n<pre><code>class Deal &lt; ActiveRecord::Base\n\n has_many   :steps,          dependent:  :destroy do   \n    def length\n      reject(&amp;:marked_for_destruction?).length\n    end\n  end \n\naccepts_nested_attributes_for :steps, allow_destroy: true\n\nend\n</code></pre>\n\n<p>Step belongs to Deal and has an attribute called step_rank. </p>\n\n<p>I would like to find a method to take all Steps and change the values of their step_ranks so that:</p>\n\n<ul>\n<li><p>the lowest initial step_rank value gets a value of 0</p></li>\n<li><p>the others , <strong>while keeping the same \"order\" in terms of initial step_rank</strong> , simply make up at the end a series with +1 increments</p></li>\n</ul>\n\n<p>Let me give you an example if we have the following Steps fora given Deal (id:5 for example) initially:</p>\n\n<pre><code>Deal(id=5).step(id:1).step_rank = 15\nDeal(id=5).step(id:4).step_rank = 4\nDeal(id=5).step(id:7).step_rank = 9\nDeal(id=5).step(id:37).step_rank = 30\n</code></pre>\n\n<p>then I need to find a way to transform those attribute's values into:</p>\n\n<pre><code>Deal(id=5).step(id:1).step_rank = 2\nDeal(id=5).step(id:4).step_rank = 0\nDeal(id=5).step(id:7).step_rank = 1\nDeal(id=5).step(id:37).step_rank = 3\n</code></pre>\n\n<p>As you see the final values make a up a series of values starting at 0 and incrementing one by one while keeping the initial order.</p>\n\n<p>I found a way to re-order them <strong>but not really to change each of their values</strong>. How to do it?</p>\n\n<p>model/deal.rb</p>\n\n<pre><code>implement_increment( self.steps.reject(&amp;:marked_for_destruction?).map{|u| u.step_rank} )\n\ndef implement_increment(array)\n  sorted = array.sort\n  lastNum = sorted[0]\n  sorted[1, sorted.count].each do |n|\n    lastNum = n\n  end\n  true\nend \n</code></pre>\n"}, {"tags": ["ruby", "file"], "answers": [{"comments": [{"owner": {"reputation": 37, "user_id": 8544981, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/97a54206de23e202b0641b7a71d3cc4e?s=128&d=identicon&r=PG&f=1", "display_name": "flow daguerre", "link": "https://stackoverflow.com/users/8544981/flow-daguerre"}, "edited": false, "score": 0, "creation_date": 1516111262, "post_id": 48282946, "comment_id": 83549742, "body": "I just solved it by the following <code>puts line.split.first</code> instead of <code>puts line</code>"}], "tags": [], "owner": {"reputation": 27144, "user_id": 3857758, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/58c4295826435f049b7fc32b98c240f9?s=128&d=identicon&r=PG&f=1", "display_name": "Ursus", "link": "https://stackoverflow.com/users/3857758/ursus"}, "is_accepted": false, "score": 0, "last_activity_date": 1516111113, "creation_date": 1516111113, "answer_id": 48282946, "question_id": 48282804, "link": "https://stackoverflow.com/questions/48282804/get-the-first-word-of-a-file-into-a-variable/48282946#48282946", "title": "Get the first word of a file into a variable", "body": "<p>If the first word in a line contains <code>ath</code> at any point</p>\n\n<pre><code>if line =~ /^\\S*ath\\S*/\n</code></pre>\n"}], "owner": {"reputation": 37, "user_id": 8544981, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/97a54206de23e202b0641b7a71d3cc4e?s=128&d=identicon&r=PG&f=1", "display_name": "flow daguerre", "link": "https://stackoverflow.com/users/8544981/flow-daguerre"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 38, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1516125199, "creation_date": 1516110635, "last_edit_date": 1516125199, "question_id": 48282804, "link": "https://stackoverflow.com/questions/48282804/get-the-first-word-of-a-file-into-a-variable", "title": "Get the first word of a file into a variable", "body": "<p>I have a txt file and I want to extract only the first word of a line which contains the characters 'ath'.</p>\n\n<pre><code>File.open(\"myfile.txt\").readlines.each do |line|\n  if line =~ /ath/\n   line.split.first\n   puts line\n$line = line.chomp\n\nputs \"Ok\"\nelse\nnil\nend\nend\n</code></pre>\n\n<p><code>line.split.first</code> only works if the first word of the line is a match, because when I do the same in irb:</p>\n\n<pre><code>\"im here to ask someting easy\".split.first\n</code></pre>\n\n<p>The output is 'im'.</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 4600, "user_id": 5961578, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/df7cbfdd2a92a7926af3bbb8648318aa?s=128&d=identicon&r=PG", "display_name": "moveson", "link": "https://stackoverflow.com/users/5961578/moveson"}, "edited": false, "score": 1, "creation_date": 1516110927, "post_id": 48282390, "comment_id": 83549475, "body": "You don&#39;t need to use <code>String</code> to create a String. Just do <code>answer = &quot;B&quot;</code>. Also, Ruby style is not to use <code>()</code> when a method takes no arguments. Just use the name of the method; for example, <code>puts</code> instead of <code>puts()</code>.."}], "answers": [{"comments": [{"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 4, "creation_date": 1516109974, "post_id": 48282523, "comment_id": 83548779, "body": "Nitpicking, but <code>gets</code> doesn&#39;t <i>add</i> a line break (unlike <code>puts</code>). It just <i>preserves</i> the line break that the user entered by pressing the return key."}, {"owner": {"reputation": 21, "user_id": 9224417, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3bfd5a153d0db77056736b9349247bc?s=128&d=identicon&r=PG&f=1", "display_name": "Travis Sidebottom", "link": "https://stackoverflow.com/users/9224417/travis-sidebottom"}, "edited": false, "score": 0, "creation_date": 1516110222, "post_id": 48282523, "comment_id": 83548962, "body": "Doing text = gets.chop  allowed the code to correctly run. I am not sure why it works, and will be looking into it, but thank you for the time in answering the question for me."}, {"owner": {"reputation": 663, "user_id": 8282168, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ba492cef39f592a7e738a4d3a70b8bab?s=128&d=identicon&r=PG&f=1", "display_name": "L_Church", "link": "https://stackoverflow.com/users/8282168/l-church"}, "edited": false, "score": 1, "creation_date": 1516110521, "post_id": 48282523, "comment_id": 83549192, "body": "I didn&#39;t explain as well but basically when you type in your answer and press enter, the &quot;gets&quot; method will also store the line break from when you pressed enter as well. the extra &quot;chomp&quot; method removes the line break from the string so that it corresponds to the answer which also has no line break. Good luck coding and welcome to StackOverflow"}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "reply_to_user": {"reputation": 21, "user_id": 9224417, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3bfd5a153d0db77056736b9349247bc?s=128&d=identicon&r=PG&f=1", "display_name": "Travis Sidebottom", "link": "https://stackoverflow.com/users/9224417/travis-sidebottom"}, "edited": false, "score": 0, "creation_date": 1516111287, "post_id": 48282523, "comment_id": 83549760, "body": "@TravisSidebottom you probably end your input by pressing the &quot;return&quot; or &quot;enter&quot; key. But that also produces a character: the <a href=\"https://en.wikipedia.org/wiki/Newline\" rel=\"nofollow noreferrer\">newline</a> character <code>&quot;\\n&quot;</code> so <code>text</code> becomes <code>&quot;B\\n&quot;</code> which is obviously not the same as <code>&quot;B&quot;</code>. <a href=\"http://ruby-doc.org/core-2.5.0/String.html#method-i-chomp\" rel=\"nofollow noreferrer\"><code>chomp</code></a> just removes that trailing newline character, i.e. <code>&quot;B\\n&quot;.chomp</code> returns <code>&quot;B&quot;</code>."}, {"owner": {"reputation": 21, "user_id": 9224417, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3bfd5a153d0db77056736b9349247bc?s=128&d=identicon&r=PG&f=1", "display_name": "Travis Sidebottom", "link": "https://stackoverflow.com/users/9224417/travis-sidebottom"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1516111584, "post_id": 48282523, "comment_id": 83549971, "body": "@Stefan That helps clear up and explain how the .chomp command works. Was not aware that pressing &quot;enter&quot; created a new character. I wonder then, why do I not have to use .chomp when working with Integers. would &quot;1\\n&quot; not be the same as 1?"}, {"owner": {"reputation": 21, "user_id": 9224417, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3bfd5a153d0db77056736b9349247bc?s=128&d=identicon&r=PG&f=1", "display_name": "Travis Sidebottom", "link": "https://stackoverflow.com/users/9224417/travis-sidebottom"}, "edited": false, "score": 0, "creation_date": 1516111675, "post_id": 48282523, "comment_id": 83550033, "body": "Thank you both for your time in explaining the answer to this question of mine, I am so frustrated with this, I want so badly to learn a language."}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "reply_to_user": {"reputation": 21, "user_id": 9224417, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3bfd5a153d0db77056736b9349247bc?s=128&d=identicon&r=PG&f=1", "display_name": "Travis Sidebottom", "link": "https://stackoverflow.com/users/9224417/travis-sidebottom"}, "edited": false, "score": 0, "creation_date": 1516112065, "post_id": 48282523, "comment_id": 83550286, "body": "@TravisSidebottom entering 1 (plus return) does result in the string <code>&quot;1\\n&quot;</code>. But both, <code>to_i</code> and <code>Integer()</code> ignore the trailing newline."}], "tags": [], "owner": {"reputation": 663, "user_id": 8282168, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ba492cef39f592a7e738a4d3a70b8bab?s=128&d=identicon&r=PG&f=1", "display_name": "L_Church", "link": "https://stackoverflow.com/users/8282168/l-church"}, "is_accepted": false, "score": 2, "last_activity_date": 1516110284, "last_edit_date": 1516110284, "creation_date": 1516109741, "answer_id": 48282523, "question_id": 48282390, "link": "https://stackoverflow.com/questions/48282390/what-am-i-doing-wrong-with-this-simple-if-function-in-ruby/48282523#48282523", "title": "What am I doing wrong with this simple If function in ruby", "body": "<p>There is an additional method you can call when declaring the \"text\" variable that will solve this.</p>\n\n<p>The method you used preserves a line break at the end when you press enter to submit an answer so it will never actually correspond to the answer. To remove the line break use the \"chomp\" method.</p>\n\n<pre><code>text = gets.chomp\n</code></pre>\n\n<p>Hope this helped. Good luck.</p>\n"}], "owner": {"reputation": 21, "user_id": 9224417, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3bfd5a153d0db77056736b9349247bc?s=128&d=identicon&r=PG&f=1", "display_name": "Travis Sidebottom", "link": "https://stackoverflow.com/users/9224417/travis-sidebottom"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 54, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1516110284, "creation_date": 1516109331, "question_id": 48282390, "link": "https://stackoverflow.com/questions/48282390/what-am-i-doing-wrong-with-this-simple-if-function-in-ruby", "title": "What am I doing wrong with this simple If function in ruby", "body": "<p>I have been trying to teach myself to code and have gravitated towards Ruby.\nUpon working on if functions I have come across this problem where even if the user input is == to the answer variable it still comes back as false in the if function. It will not come back as true\nI can get it to work if it is an Integer, but for some reason it always returns false when having a string. Tried to convert is as well but can not figure it out.</p>\n\n<p>Thank you for any help.  </p>\n\n<pre><code>puts(\"For each question select A, B, or C\")\nputs(\"What is the capital of Kentucky?\")\nputs()\nputs(\"A. Louisville\") \nputs(\"B. Frankfort\") \nputs(\"C. Bardstown\")\nputs()\n\nanswer = String(\"B\")\n\ntext = gets()\nputs()\n\nif text == answer\n    puts(\"correct\")\nelse\n    puts(\"incorrect\")\n    puts(\"The correct answer was \" + answer + \".\")\nend\n</code></pre>\n"}, {"tags": ["ruby", "google-chrome", "watir"], "comments": [{"owner": {"reputation": 587, "user_id": 4297122, "user_type": "registered", "accept_rate": 53, "profile_image": "https://graph.facebook.com/100000722742064/picture?type=large", "display_name": "Jais Anasrulloh Ja&#39;fari", "link": "https://stackoverflow.com/users/4297122/jais-anasrulloh-jafari"}, "edited": false, "score": 0, "creation_date": 1532332624, "post_id": 48282126, "comment_id": 89916224, "body": "facing the same issue, any updates ? have solved this problem ?"}, {"owner": {"reputation": 1448, "user_id": 1652185, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/eAfTP.png?s=128&g=1", "display_name": "Codeformer", "link": "https://stackoverflow.com/users/1652185/codeformer"}, "reply_to_user": {"reputation": 587, "user_id": 4297122, "user_type": "registered", "accept_rate": 53, "profile_image": "https://graph.facebook.com/100000722742064/picture?type=large", "display_name": "Jais Anasrulloh Ja&#39;fari", "link": "https://stackoverflow.com/users/4297122/jais-anasrulloh-jafari"}, "edited": false, "score": 0, "creation_date": 1532398506, "post_id": 48282126, "comment_id": 89947776, "body": "headless-chrome still has this issue. Mine was a csv download , i &quot;resolved&quot; it by printing the csv instead of download if requested from headless-chrome."}], "owner": {"reputation": 1448, "user_id": 1652185, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/eAfTP.png?s=128&g=1", "display_name": "Codeformer", "link": "https://stackoverflow.com/users/1652185/codeformer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 344, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1516130907, "creation_date": 1516108423, "last_edit_date": 1516130907, "question_id": 48282126, "link": "https://stackoverflow.com/questions/48282126/setdownloadbehavior-in-watir-for-headless-chrome", "title": "setDownloadBehavior in watir for headless chrome", "body": "<p>The headless mode in chrome doesn't support file download. There are various solutions proposed under <a href=\"https://bugs.chromium.org/p/chromium/issues/detail?id=696481\" rel=\"nofollow noreferrer\">issue here</a>. </p>\n\n<p>Below solution for selenium is from that page, Comment 78. </p>\n\n<pre><code>def enable_chrome_headless_downloads(driver, directory)\n  bridge = driver.send(:bridge)\n  path = '/session/:session_id/chromium/send_command'\n  path[':session_id'] = bridge.session_id\n  bridge.http.call(:post, path, {\n  \"cmd\" =&gt; \"Page.setDownloadBehavior\",\n  \"params\" =&gt; {\n    \"behavior\" =&gt; \"allow\",\n    \"downloadPath\" =&gt; directory,\n  }\n})\nend\n</code></pre>\n\n<p>But this doesn't work for watir. How to implement the same solution while using watir.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "eventmachine", "ruby-smpp"], "answers": [{"tags": [], "owner": {"reputation": 1127, "user_id": 436112, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/301b3c350bcbbd99ea65ee2c467d38e9?s=128&d=identicon&r=PG", "display_name": "Sascha Kaestle", "link": "https://stackoverflow.com/users/436112/sascha-kaestle"}, "is_accepted": false, "score": 0, "last_activity_date": 1516183467, "creation_date": 1516183467, "answer_id": 48298365, "question_id": 48281179, "link": "https://stackoverflow.com/questions/48281179/multiple-class-instances-of-eventmachine-rails/48298365#48298365", "title": "Multiple Class Instances Of EventMachine Rails", "body": "<p>The samplegateway provided by the project is not suitable for your usecase. if you check <a href=\"https://github.com/raykrueger/ruby-smpp/blob/master/examples/sample_gateway.rb#L64\" rel=\"nofollow noreferrer\">https://github.com/raykrueger/ruby-smpp/blob/master/examples/sample_gateway.rb#L64</a> the EventMachine connection is stored in a class variable, which means your second call <code>gw_2.start(config_2)</code> will just overwrite the first one.</p>\n\n<p>You should probably orient yourself on the <a href=\"https://github.com/raykrueger/ruby-smpp\" rel=\"nofollow noreferrer\">https://github.com/raykrueger/ruby-smpp</a> basic usage and write your own <code>Gateway</code></p>\n"}], "owner": {"reputation": 71, "user_id": 3010074, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dO7O8.jpg?s=128&g=1", "display_name": "Pledges", "link": "https://stackoverflow.com/users/3010074/pledges"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 118, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1516183467, "creation_date": 1516105289, "last_edit_date": 1592644375, "question_id": 48281179, "link": "https://stackoverflow.com/questions/48281179/multiple-class-instances-of-eventmachine-rails", "title": "Multiple Class Instances Of EventMachine Rails", "body": "<p>I am trying to bind to two diferenet SMSCs through SMPP 3.4 from a single rails application using the <a href=\"https://github.com/raykrueger/ruby-smpp\" rel=\"nofollow noreferrer\">ruby-smpp</a> gem.</p>\n<p>Following the example included on the documentation of this gem I have two configuration blocks pointing to the different ISPs i.e.</p>\n<pre><code>config_1 = {\n  #.......\n}\nconfig_2 = {\n  #.......\n}\n</code></pre>\n<p>I go on to declare and run two instaces of the gateways as shown below:</p>\n<pre><code>gw_1 = SampleGateway.new\ngw_1.start(config_1)\n\ngw_2 = SampleGateway.new\ngw_2.start(config_2)\n</code></pre>\n<p>I am able to bind to the respective ISPs but the problems I am experiancing are as follows:</p>\n<ol>\n<li>Whenever one of the binds is lost (i.e. on unbound), both ISP connections are lost.</li>\n<li>When I initiate/send an SMS to a particular ISP at least 2 times the number of SMSes will be sent throught that ISP (i.e. if i send 1 SMS throught ISP1, 2 SMSes will be delivered on the handset)</li>\n</ol>\n<p>Any ideas as to how I can prevent the above from happening, or should I connect to the ISPs with two different rails apps?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "actionview"], "comments": [{"owner": {"reputation": 8645, "user_id": 368167, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c9596f533dcd61ecf75f150b0d9997b3?s=128&d=identicon&r=PG", "display_name": "Tamer Shlash", "link": "https://stackoverflow.com/users/368167/tamer-shlash"}, "edited": false, "score": 0, "creation_date": 1516108475, "post_id": 48280889, "comment_id": 83547842, "body": "what do you mean by &quot;display flash-notices interactively while the application is running&quot;?"}], "answers": [{"tags": [], "owner": {"reputation": 1127, "user_id": 436112, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/301b3c350bcbbd99ea65ee2c467d38e9?s=128&d=identicon&r=PG", "display_name": "Sascha Kaestle", "link": "https://stackoverflow.com/users/436112/sascha-kaestle"}, "is_accepted": true, "score": 0, "last_activity_date": 1516109590, "creation_date": 1516109590, "answer_id": 48282474, "question_id": 48280889, "link": "https://stackoverflow.com/questions/48280889/how-to-add-more-than-one-flashnotice-at-a-interactive-mode/48282474#48282474", "title": "How to add more than one flash[:notice] at a interactive mode?", "body": "<pre><code>flash[:notice] = [tweet.text]\nflash[:notice] &lt;&lt; tweet.text\n</code></pre>\n\n<p>should be</p>\n\n<pre><code>flash[:notice] ||= [] # initialize a new array, the first time only\nflash[:notice] &lt;&lt; tweet.text\n</code></pre>\n\n<p>or you will reinitialize the flash array every time</p>\n\n<p>But to be honest, I think you should just look into: <a href=\"http://edgeguides.rubyonrails.org/action_cable_overview.html\" rel=\"nofollow noreferrer\">http://edgeguides.rubyonrails.org/action_cable_overview.html</a></p>\n"}], "owner": {"reputation": 25, "user_id": 8846107, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/373506fdb0f70148d3fee476709d76b8?s=128&d=identicon&r=PG&f=1", "display_name": "Jelle", "link": "https://stackoverflow.com/users/8846107/jelle"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 78, "favorite_count": 0, "accepted_answer_id": 48282474, "answer_count": 1, "score": 0, "last_activity_date": 1516109590, "creation_date": 1516104366, "last_edit_date": 1516108438, "question_id": 48280889, "link": "https://stackoverflow.com/questions/48280889/how-to-add-more-than-one-flashnotice-at-a-interactive-mode", "title": "How to add more than one flash[:notice] at a interactive mode?", "body": "<p>I'm using <a href=\"https://github.com/leonid-shevtsov/unobtrusive_flash\" rel=\"nofollow noreferrer\"><code>unobtrusive_flash</code></a> and my view shows only the latest flash notices. How do I display all flash notices? Also, is it possible to display flash-notices interactively while the application is running?</p>\n\n<p>I'm totally fine with any solution even if it doesn't use <code>unobtrusive_flash</code>.</p>\n\n<p>view</p>\n\n<pre><code>&lt;div class=\"unobtrusive-flash-container\"&gt;&lt;/div&gt;\n</code></pre>\n\n<p>controller</p>\n\n<pre><code>-------\nwhile do\n  begin\n    config = {\n      consumer_key:        '******',\n      consumer_secret:     '*******',\n      access_token:    '********',\n      access_token_secret: '********'\n    }\n    rClient = Twitter::REST::Client.new config\n    sClient = Twitter::Streaming::Client.new(config)\n    topics = ['#trump', '#rails']\n    sClient.filter(:track =&gt; topics.join(',')) do |tweet|\n      if tweet.is_a?(Twitter::Tweet)\n        puts tweet.text\n        flash[:notice] = [tweet.text]\n        flash[:notice] &lt;&lt; tweet.text\n        rClient.retweet tweet\n      end\n    end\n  rescue\n    puts 'error occurred, waiting for 5 seconds'\n    flash[:error] = ['error occurred, waiting for 5 seconds']\n    flash[:error] &lt;&lt; 'error occurred, waiting for 5 seconds'\n  end\n</code></pre>\n"}, {"tags": ["ruby"], "answers": [{"comments": [{"owner": {"reputation": 12290, "user_id": 228370, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/a3f87affc7032e0af7cc4ce2ddb08ce9?s=128&d=identicon&r=PG", "display_name": "23tux", "link": "https://stackoverflow.com/users/228370/23tux"}, "edited": false, "score": 0, "creation_date": 1516099972, "post_id": 48279430, "comment_id": 83542537, "body": "great, exactly what I was looking for!"}], "tags": [], "owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "is_accepted": true, "score": 21, "last_activity_date": 1516121936, "last_edit_date": 1516121936, "creation_date": 1516099589, "answer_id": 48279430, "question_id": 48279119, "link": "https://stackoverflow.com/questions/48279119/dont-pass-block-when-calling-super/48279430#48279430", "title": "Don&#39;t pass block when calling super", "body": "<p>It's actually not that obvious. From the <a href=\"http://ruby-doc.org/core-2.5.0/doc/syntax/modules_and_classes_rdoc.html#label-Inheritance\" rel=\"noreferrer\">documentation</a> we know that:</p>\n\n<ul>\n<li>calling <code>super</code> passes all arguments</li>\n<li>calling <code>super()</code> passes no arguments</li>\n</ul>\n\n<p>What the documentation doesn't say is that this only applies to positional and keyword arguments. <code>super()</code> still passes a given block!</p>\n\n<p>You have to explicitly unset the block by calling:</p>\n\n<pre><code>super(&amp;nil)\n</code></pre>\n\n<h3>How does this work?</h3>\n\n<p>You probably know that you can define a method with an explicit <a href=\"http://ruby-doc.org/core-2.5.0/doc/syntax/methods_rdoc.html#label-Block+Argument\" rel=\"noreferrer\">block argument</a>:</p>\n\n<pre><code>def foo(&amp;block)\n  # ...\nend\n</code></pre>\n\n<p>and that you can pass it as a block to another method: (that other method might be <code>super</code>)</p>\n\n<pre><code>def foo(&amp;block)\n  super(&amp;block)\nend\n</code></pre>\n\n<p>Now, if you pass a block when calling the method, the corresponding <code>block</code> variable will be an instance of <code>Proc</code>:</p>\n\n<pre><code>def foo(&amp;block)\n  p block_given: block_given?, block: block\nend\n\nfoo {}\n#=&gt; {:block_given=&gt;true, :block=&gt;#&lt;Proc:0x00007ff4990d0030&gt;}\n</code></pre>\n\n<p>If you call it without passing block, the <code>block</code> variable will just be <code>nil</code>:</p>\n\n<pre><code>foo\n#=&gt; {:block_given=&gt;false, :block=&gt;nil}\n</code></pre>\n\n<p>So if no block is given, <code>block</code> is <code>nil</code> and</p>\n\n<pre><code>super(&amp;block)\n</code></pre>\n\n<p>becomes:</p>\n\n<pre><code>super(&amp;nil)\n</code></pre>\n"}], "owner": {"reputation": 12290, "user_id": 228370, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/a3f87affc7032e0af7cc4ce2ddb08ce9?s=128&d=identicon&r=PG", "display_name": "23tux", "link": "https://stackoverflow.com/users/228370/23tux"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1456, "favorite_count": 0, "accepted_answer_id": 48279430, "answer_count": 1, "score": 8, "last_activity_date": 1516121936, "creation_date": 1516098572, "last_edit_date": 1516107187, "question_id": 48279119, "link": "https://stackoverflow.com/questions/48279119/dont-pass-block-when-calling-super", "title": "Don&#39;t pass block when calling super", "body": "<p>How can I set a block to nil for the <code>super</code> call?</p>\n\n<pre><code>class A\n  def foo\n    if block_given?\n      result = yield \n      # do stuff with the yield result\n    end\n    # some more code\n  end\nend\n\nclass B &lt; A\n  def foo\n    block_result = yield\n    # process block results and store it\n    # ...\n    super\n  end\nend\n\nB.new.foo { puts \"block called\" }\n# =&gt; block called\n# =&gt; block called\n</code></pre>\n\n<p>I don't want to yield the block twice. Is it somehow possible that <code>block_given?</code> in class <code>A</code>  returns false?</p>\n\n<p>Background is that I don't own the <code>A</code> class and I can't change it's <code>foo</code> method but I want to avoid calling my block twice. I also don't want to pass a dummy / empty block to super, because the behaviour of <code>A</code>'s <code>foo</code> method changes when a block is given.</p>\n"}, {"tags": ["jquery", "ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 5669, "user_id": 7429104, "user_type": "registered", "accept_rate": 20, "profile_image": "https://i.stack.imgur.com/TZAPt.jpg?s=128&g=1", "display_name": "Aman", "link": "https://stackoverflow.com/users/7429104/aman"}, "edited": false, "score": 0, "creation_date": 1516098423, "post_id": 48278940, "comment_id": 83541524, "body": "i think you haven&#39;t put jquery require file in propery order. lets try the given solution."}], "answers": [{"comments": [{"owner": {"reputation": 2347, "user_id": 1625253, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/iBQwX.jpg?s=128&g=1", "display_name": "Simon Franzen", "link": "https://stackoverflow.com/users/1625253/simon-franzen"}, "reply_to_user": {"reputation": 59, "user_id": 9133350, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/28f9f514983df63ae9f79e416647b268?s=128&d=identicon&r=PG&f=1", "display_name": "Kase", "link": "https://stackoverflow.com/users/9133350/kase"}, "edited": false, "score": 0, "creation_date": 1516098508, "post_id": 48279020, "comment_id": 83541605, "body": "Have you looked into the HTML code what css and js is actually getting loaded ? Or in your inspectors network tab look what files are getting loaded. What @Gabbar and me wrote should work."}], "tags": [], "owner": {"reputation": 2347, "user_id": 1625253, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/iBQwX.jpg?s=128&g=1", "display_name": "Simon Franzen", "link": "https://stackoverflow.com/users/1625253/simon-franzen"}, "is_accepted": false, "score": 0, "last_activity_date": 1516098228, "creation_date": 1516098228, "answer_id": 48279020, "question_id": 48278940, "link": "https://stackoverflow.com/questions/48278940/ruby-on-rails-install-jquery/48279020#48279020", "title": "Ruby on Rails Install JQuery", "body": "<p>Do this when include stylesheet and javascript</p>\n\n<pre><code>&lt;%= stylesheet_link_tag ....\n&lt;%= javascript_include_tag ....\n</code></pre>\n\n<p>You forgot to output. Thats correct -> &lt;%= ... %></p>\n\n<p>You are just wrote &lt;% ... %></p>\n"}, {"comments": [{"owner": {"reputation": 59, "user_id": 9133350, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/28f9f514983df63ae9f79e416647b268?s=128&d=identicon&r=PG&f=1", "display_name": "Kase", "link": "https://stackoverflow.com/users/9133350/kase"}, "edited": false, "score": 0, "creation_date": 1516098931, "post_id": 48279029, "comment_id": 83541900, "body": "It is work now, but i have another error. It show [object doesn&#39;t support this property or method] on cmd when //= require turbolinks, but it is work without //"}, {"owner": {"reputation": 5669, "user_id": 7429104, "user_type": "registered", "accept_rate": 20, "profile_image": "https://i.stack.imgur.com/TZAPt.jpg?s=128&g=1", "display_name": "Aman", "link": "https://stackoverflow.com/users/7429104/aman"}, "reply_to_user": {"reputation": 59, "user_id": 9133350, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/28f9f514983df63ae9f79e416647b268?s=128&d=identicon&r=PG&f=1", "display_name": "Kase", "link": "https://stackoverflow.com/users/9133350/kase"}, "edited": false, "score": 0, "creation_date": 1516099136, "post_id": 48279029, "comment_id": 83542029, "body": "@Kase just comment <code>turbolinks</code> by changing it <code>&#47;&#47; require turbolinks</code> in application.js as i edited the answer and restart your server also. hope it helped you. feel free to accept/upvote answer."}, {"owner": {"reputation": 59, "user_id": 9133350, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/28f9f514983df63ae9f79e416647b268?s=128&d=identicon&r=PG&f=1", "display_name": "Kase", "link": "https://stackoverflow.com/users/9133350/kase"}, "edited": false, "score": 0, "creation_date": 1516099746, "post_id": 48279029, "comment_id": 83542405, "body": "i comment the require_tree, it is work perfectly now."}], "tags": [], "owner": {"reputation": 5669, "user_id": 7429104, "user_type": "registered", "accept_rate": 20, "profile_image": "https://i.stack.imgur.com/TZAPt.jpg?s=128&g=1", "display_name": "Aman", "link": "https://stackoverflow.com/users/7429104/aman"}, "is_accepted": true, "score": 1, "last_activity_date": 1516099048, "last_edit_date": 1516099048, "creation_date": 1516098253, "answer_id": 48279029, "question_id": 48278940, "link": "https://stackoverflow.com/questions/48278940/ruby-on-rails-install-jquery/48279029#48279029", "title": "Ruby on Rails Install JQuery", "body": "<pre><code>//= require jquery\n//= require jquery_ujs\n// require turbolinks\n//= require_tree .\n</code></pre>\n\n<p>in your layouts: -</p>\n\n<pre><code>&lt;%= stylesheet_link_tag 'application', media: 'all', 'data-turbolinks-track' =&gt; true %&gt;\n&lt;%= javascript_include_tag 'application', 'data-turbolinks-track' =&gt; true %&gt;\n&lt;%= csrf_meta_tags %&gt;\n</code></pre>\n\n<p>after the above changes restart your server.</p>\n"}], "owner": {"reputation": 59, "user_id": 9133350, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/28f9f514983df63ae9f79e416647b268?s=128&d=identicon&r=PG&f=1", "display_name": "Kase", "link": "https://stackoverflow.com/users/9133350/kase"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3573, "favorite_count": 0, "accepted_answer_id": 48279029, "answer_count": 2, "score": 1, "last_activity_date": 1516099048, "creation_date": 1516097975, "question_id": 48278940, "link": "https://stackoverflow.com/questions/48278940/ruby-on-rails-install-jquery", "title": "Ruby on Rails Install JQuery", "body": "<p>I create a new project, i am just follow the tutorial step by step to install jquery in my project, but it doesn't work.</p>\n\n<p>I add this two line to my view.<br/>\n<li>&lt;% stylesheet_link_tag    'application', media: 'all', 'data-turbolinks-track': 'reload' %><br/>\n<li>&lt;% javascript_include_tag 'application', 'data-turbolinks-track': 'reload' %></li></p>\n\n<hr/>\n\n<p>Project\\Gemfile</p>\n\n<pre>\n    source 'https://rubygems.org'\n\n    git_source(:github) do |repo_name|\n      repo_name = \"#{repo_name}/#{repo_name}\" unless repo_name.include?(\"/\")\n      \"https://github.com/#{repo_name}.git\"\n    end\n\n\n    # Bundle edge Rails instead: gem 'rails', github: 'rails/rails'\n    gem 'rails', '~> 5.1.4'\n    # Use sqlite3 as the database for Active Record\n    gem 'sqlite3'\n    # Use Puma as the app server\n    gem 'puma', '~> 3.7'\n    # Use SCSS for stylesheets\n    gem 'sass-rails', '~> 5.0'\n    # Use Uglifier as compressor for JavaScript assets\n    gem 'uglifier', '>= 1.3.0'\n    # See https://github.com/rails/execjs#readme for more supported runtimes\n    # gem 'therubyracer', platforms: :ruby\n\n    # Use CoffeeScript for .coffee assets and views\n    gem 'coffee-rails', '~> 4.2'\n    # Turbolinks makes navigating your web application faster. Read more: https://github.com/turbolinks/turbolinks\n    gem 'turbolinks', '~> 5'\n    # Build JSON APIs with ease. Read more: https://github.com/rails/jbuilder\n    gem 'jbuilder', '~> 2.5'\n    # Use Redis adapter to run Action Cable in production\n    # gem 'redis', '~> 3.0'\n    # Use ActiveModel has_secure_password\n    # gem 'bcrypt', '~> 3.1.7'\n\n    # Use Capistrano for deployment\n    # gem 'capistrano-rails', group: :development\n\n    group :development, :test do\n      # Call 'byebug' anywhere in the code to stop execution and get a debugger console\n      gem 'byebug', platforms: [:mri, :mingw, :x64_mingw]\n      # Adds support for Capybara system testing and selenium driver\n      gem 'capybara', '~> 2.13'\n      gem 'selenium-webdriver'\n    end\n\n    group :development do\n      # Access an IRB console on exception pages or by using  anywhere in the code.\n      gem 'web-console', '>= 3.3.0'\n    end\n\n    # Windows does not include zoneinfo files, so bundle the tzinfo-data gem\n    gem 'tzinfo-data', platforms: [:mingw, :mswin, :x64_mingw, :jruby]\n\n    gem 'jquery-rails'\n    gem 'mysql2'\n\n</pre>\n\n<p><br/><hr/></p>\n\n<p>Project\\app\\assets\\javascripts\\application.js</p>\n\n<pre>\n    // This is a manifest file that'll be compiled into application.js, which will include all the files\n    // listed below.\n    //\n    // Any JavaScript/Coffee file within this directory, lib/assets/javascripts, or any plugin's\n    // vendor/assets/javascripts directory can be referenced here using a relative path.\n    //\n    // It's not advisable to add code directly here, but if you do, it'll appear at the bottom of the\n    // compiled file. JavaScript code in this file should be added after the last require_* statement.\n    //\n    // Read Sprockets README (https://github.com/rails/sprockets#sprockets-directives) for details\n    // about supported directives.\n    //\n    //= require rails-ujs\n    //= require turbolinks\n    //= require jquery\n    //= require jquery_ujs\n    //= require_tree .\n\n</pre>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1516096794, "post_id": 48277425, "comment_id": 83540378, "body": "What do you mean by <i>&quot;storage space occupied by a variable&quot;</i>? The storage the referenced object is occupying or the storage for storing the variable itself or maybe both?"}], "answers": [{"comments": [{"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 2, "creation_date": 1516093541, "post_id": 48277481, "comment_id": 83538349, "body": "Doesn&#39;t seem to work with numbers or nils, though. Returns 0. Because these are on stack and not the heap? &#175;\\_(\u30c4)_/&#175;"}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "reply_to_user": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1516094591, "post_id": 48277481, "comment_id": 83538963, "body": "@SergioTulentsev probably because they have immediate value. There&#39;s no actual object occupying space."}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1516094708, "post_id": 48277481, "comment_id": 83539050, "body": "@Stefan: yep, that&#39;s what I was trying to say :)"}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1516098565, "post_id": 48277481, "comment_id": 83541662, "body": "Besides this is an exact copy of the cited answer, strictly speaking, it\u2019s incorrect.<code>ObjectSpace#memsize_of</code> is misleading because it returns the amount of memory <b>allocated in heap</b> and does not take into consideration Ruby Heap, where <code>RValue</code> of size 24 bytes is stored for anything that is stored in heap."}], "tags": [], "owner": {"reputation": 3021, "user_id": 9208197, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/82e545ac8c6a4f6c5cad3832d7463c15?s=128&d=identicon&r=PG&f=1", "display_name": "L&#233;o R.", "link": "https://stackoverflow.com/users/9208197/l%c3%a9o-r"}, "is_accepted": false, "score": 0, "last_activity_date": 1516093408, "creation_date": 1516093408, "answer_id": 48277481, "question_id": 48277425, "link": "https://stackoverflow.com/questions/48277425/how-can-i-calculate-or-find-storage-space-occupied-by-a-variable-in-ruby/48277481#48277481", "title": "How can I calculate or find storage space occupied by a variable in ruby?", "body": "<p>ObjectSpace.memsize_of does work in 1.9.3, documented or not:</p>\n\n<pre><code>puts RUBY_VERSION #=&gt;1.9.3\n\nrequire 'objspace'\n\np ObjectSpace.memsize_of(\"a\"*23)    #=&gt; 23 \np ObjectSpace.memsize_of(\"a\"*24)    #=&gt; 24 \np ObjectSpace.memsize_of(\"a\".*1000) #=&gt; 1000\nh = {\"a\"=&gt;1, \"b\"=&gt;2}\np ObjectSpace.memsize_of(h)         #=&gt; 116\n</code></pre>\n\n<p>Source : <a href=\"https://stackoverflow.com/questions/10068018/memory-size-of-a-hash-or-other-object\">Memory size of a hash or other object?</a></p>\n"}, {"comments": [{"owner": {"reputation": 900, "user_id": 1644132, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/RCs3f.png?s=128&g=1", "display_name": "codemilan", "link": "https://stackoverflow.com/users/1644132/codemilan"}, "edited": false, "score": 0, "creation_date": 1516189108, "post_id": 48279269, "comment_id": 83584800, "body": "Thank you alot @mudasobwa, this is the detailed answers I wanted."}], "tags": [], "owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "is_accepted": true, "score": 3, "last_activity_date": 1516099080, "creation_date": 1516099080, "answer_id": 48279269, "question_id": 48277425, "link": "https://stackoverflow.com/questions/48277425/how-can-i-calculate-or-find-storage-space-occupied-by-a-variable-in-ruby/48279269#48279269", "title": "How can I calculate or find storage space occupied by a variable in ruby?", "body": "<p>The closest to the reality approach I am aware of would be to use memory report as by OS. The below is probably correct for MRI only.</p>\n\n<pre><code>\u25b6 def report\n\u25b7   puts 'Memory ' + `ps ax -o pid,rss | grep -E \"^[[:space:]]*#{$$}\"`.\n\u25b7     strip.split.map(&amp;:to_i)[1].to_s + 'KB'  \n\u25b7 end  \n\u25b6 report\n#\u21d2\u00a0Memory 90276KB\n\u25b6 a = nil &amp;&amp; report\n#\u21d2\u00a0Memory 90712KB\n\u25b6 a = nil &amp;&amp; report\n#\u21d2\u00a0Memory 90712KB   NB!!! NOT CHANGED!\n\u25b6 a = \"a\" &amp;&amp; report\n#\u21d2\u00a0Memory 90908KB\n\u25b6 a = \"a\" &amp;&amp; report\n#\u21d2\u00a0Memory 91096KB   NB!!! CHANGED!!\n\u25b6 a = \"a\" &amp;&amp; report\n#\u21d2\u00a0Memory 91388KB   NB!!! CHANGED!!\n\u25b6 ObjectSpace.garbage_collect &amp;&amp; report\n#\u21d2 Memory 91512KB   NB!!! INCREASED!!!\n</code></pre>\n\n<p>That said, there is no way to determine how much space would take the object. The amount of memory consumed would be the sum of:</p>\n\n<ul>\n<li>amount of memory allocated in the heap </li>\n<li><code>RValue</code> required to declare the variable</li>\n<li>ruby internal memory allocator, that is responsible for handling Ruby Heaps (and the heap they operate)</li>\n</ul>\n\n<p>The latter is unpredictable and it cannot be predicted/calculated based on the data size. It might take zero bytes for the short string when there is a sufficient amount of Ruby slots.</p>\n\n<p>Please note, that <code>RValue</code>s are allocated in so-called Ruby Heap and this memory <strong>is never returned back to OS</strong>. Never means never.</p>\n"}], "owner": {"reputation": 900, "user_id": 1644132, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/RCs3f.png?s=128&g=1", "display_name": "codemilan", "link": "https://stackoverflow.com/users/1644132/codemilan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 375, "favorite_count": 0, "accepted_answer_id": 48279269, "answer_count": 2, "score": 1, "last_activity_date": 1516099080, "creation_date": 1516093220, "question_id": 48277425, "link": "https://stackoverflow.com/questions/48277425/how-can-i-calculate-or-find-storage-space-occupied-by-a-variable-in-ruby", "title": "How can I calculate or find storage space occupied by a variable in ruby?", "body": "<p>From a sample ruby code like:  </p>\n\n<pre><code>a = 0.0\na = nil  \n</code></pre>\n\n<p>Now, I would like to know how much storage is occupied by variable 'a' when it's value is '0.0' and when it's value in 'nil'. Thank you.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4"], "comments": [{"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1516092574, "post_id": 48276207, "comment_id": 83537793, "body": "What is your question?"}], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 9222288, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/508caef4e681d9057a7a217c563777e9?s=128&d=identicon&r=PG&f=1", "display_name": "ali", "link": "https://stackoverflow.com/users/9222288/ali"}, "edited": false, "score": 0, "creation_date": 1516092991, "post_id": 48276612, "comment_id": 83538000, "body": "Tried this as well, but redirected me back to the edit page but the URL isn&#39;t saying /edit/. No updates to the database."}], "tags": [], "owner": {"reputation": 346, "user_id": 9030790, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4037273fba75800aa1dd6e249a9d9817?s=128&d=identicon&r=PG&f=1", "display_name": "lg86", "link": "https://stackoverflow.com/users/9030790/lg86"}, "is_accepted": false, "score": 1, "last_activity_date": 1516090092, "creation_date": 1516090092, "answer_id": 48276612, "question_id": 48276207, "link": "https://stackoverflow.com/questions/48276207/outer-form-updated-details-but-the-nested-form-did-not/48276612#48276612", "title": "Outer form updated details, but the nested form did not", "body": "<p>I think your error is on these line</p>\n\n<pre><code>= simple_fields_for :promoter do |p|\n</code></pre>\n\n<p>replace with these:</p>\n\n<pre><code>= f.fields_for :promoter do |p|\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 11, "user_id": 9222288, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/508caef4e681d9057a7a217c563777e9?s=128&d=identicon&r=PG&f=1", "display_name": "ali", "link": "https://stackoverflow.com/users/9222288/ali"}, "edited": false, "score": 0, "creation_date": 1516093037, "post_id": 48276982, "comment_id": 83538028, "body": "Oh yeah, didn&#39;t place the f before simple_fields_for. But unfortunately, this didn&#39;t fix the problem."}], "tags": [], "owner": {"reputation": 32451, "user_id": 2516474, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a2179a340c0e84edc285d432211145d?s=128&d=identicon&r=PG", "display_name": "SteveTurczyn", "link": "https://stackoverflow.com/users/2516474/steveturczyn"}, "is_accepted": false, "score": 0, "last_activity_date": 1516091589, "creation_date": 1516091589, "answer_id": 48276982, "question_id": 48276207, "link": "https://stackoverflow.com/questions/48276207/outer-form-updated-details-but-the-nested-form-did-not/48276982#48276982", "title": "Outer form updated details, but the nested form did not", "body": "<p>You need to give the receiver for <code>simple_fields_for</code> to associate the promoter fields with the larger form.</p>\n\n<p>Instead of</p>\n\n<pre><code>  = simple_fields_for :promoter do |p|\n</code></pre>\n\n<p>Do</p>\n\n<pre><code>  = f.simple_fields_for :promoter do |p|\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 9222288, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/508caef4e681d9057a7a217c563777e9?s=128&d=identicon&r=PG&f=1", "display_name": "ali", "link": "https://stackoverflow.com/users/9222288/ali"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 47, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1516104269, "creation_date": 1516088517, "last_edit_date": 1516104269, "question_id": 48276207, "link": "https://stackoverflow.com/questions/48276207/outer-form-updated-details-but-the-nested-form-did-not", "title": "Outer form updated details, but the nested form did not", "body": "<p>Apologies if the answer to this is obvious, but I'm only a month and a half into Rails.</p>\n\n<p>Basically, I have an edit restaurant form.</p>\n\n<pre><code>= simple_form_for(restaurant, html: { class: 'session_form with_padding' }) do |f|\n  %h3\n    %b\n      Manager Details\n  = simple_fields_for :promoter do |p|\n    .row\n      .col-xs-12.col-sm-12.col-md-6.col-lg-6\n        = p.label :first_name, required: false, class: 'control-label'\n        .form-group{:class =&gt; ('has-error' if restaurant.errors[:manager_first_name].first)}\n          = p.text_field :first_name, required: true, autofocus: true, class: 'form-control', value: restaurant.promoter.first_name\n          %h5\n            = p.full_error :first_name\n    .row\n      .col-xs-12.col-sm-12.col-md-6.col-lg-6\n        = p.label :last_name, required: false, class: 'control-label'\n        .form-group{:class =&gt; ('has-error' if restaurant.errors[:manager_last_name].first)}\n          = p.text_field :last_name, required: true, autofocus: true, class: 'form-control', value: restaurant.promoter.last_name\n          %h5\n            = p.full_error :last_name\n  %h3\n    %b\n      Restaurant Details\n  .row\n    .col-xs-12.col-sm-12.col-md-6.col-lg-6\n      = f.label :name, required: false, class: 'control-label'\n      .form-group{:class =&gt; ('has-error' if restaurant.errors[:name].first)}\n        = f.text_field :name, required: true, autofocus: true, class: 'form-control'\n        %h5\n          = f.full_error :name\n      = f.label :address, required: false, class: 'control-label'\n      .form-group{:class =&gt; ('has-error' if restaurant.errors[:address].first)}\n        %input#pac-input.controls{:placeholder =&gt; \"Search address\", :type =&gt; \"text\", class: 'form-control'}\n        %h5\n          = f.full_error :address\n</code></pre>\n\n<p>Inside of the form, I have a nested form for the 'Manager Details'. What I've been trying to achieve here is to save the details when they're updated. I edit a \"Restaurant Details\" and a \"Manager Details\" field and then hit the submit button, but in the terminal, I can only see an SQL update to a column in the restaurants, but no updates to a Promoter column.</p>\n\n<p>Also, I have two models, Promoter and Restaurant. Promoter has_many restaurants and Restaurant belongs_to promoter.</p>\n\n<pre><code>class Restaurant &lt; ActiveRecord::Base\n  ...\n  belongs_to :promoter\n  accepts_nested_attributes_for :promoter\n  ...\nend\n\nclass Promoter &lt; ActiveRecord::Base\n  has_many :restaurants\n  ...\nend\n</code></pre>\n\n<p>Here's the restaurant's controller.</p>\n\n<pre><code>class RestaurantsController &lt; ApplicationController\n  before_action :set_restaurant, only: [:edit, :update, :destroy]\n  before_action :authenticate_promoter!\n\n  def create\n    @restaurant = Restaurant.new(restaurant_params)\n    @restaurant.update(promoter_id: current_promoter.id)\n\n    if @restaurant.save\n      return render :crop if logo_exists?\n      redirect_to restaurant_path(@restaurant)\n      flash[:notice] = 'Restaurant was successfully created.'\n    else\n      render :new\n    end\n  end\n\n  def edit\n  end\n\n  def update\n    if @restaurant.update(restaurant_params)\n      return render :crop if logo_exists?\n      redirect_to @restaurant, notice: 'Restaurant was successfully updated.'\n    else\n      render :edit\n    end\n  end\n\n  private\n  def set_restaurant\n    @restaurant = Restaurant.find(params[:id])\n  end\n\n  def restaurant_params\n    return permitted_params unless permitted_params[:phone_number].present?\n    parameters = permitted_params\n    parameters[:phone_number] =\n      \"+#{params[:country_code]}#{parameters[:phone_number]}\"\n    parameters\n  end\n\n  def permitted_params\n    params\n      .require(:restaurant)\n      .permit(:name, :address, :latitude, :longitude, :phone_number,\n              :manager_first_name, :website, :manager_last_name,\n              :manager_email, :manager_phone_number, :logo, :logo_cache,\n              :crop_x, :crop_y, :crop_w, :crop_h, :service_charge, :gst,\n              :first_name, :last_name, :email,\n              operating_hours_attributes: [:id, :day, :opening_time,\n              :closing_time, :enabled, :_destroy])\n  end\nend\n</code></pre>\n\n<p>Promoter's controller</p>\n\n<pre><code>class Promoters::RegistrationsController &lt; Devise::RegistrationsController\n  after_action :subscribe_mailchimp, only: :create, if: '@promoter.persisted?'\n\n  def create\n    @promoter = Promoter.new(promoter_params)\n    if @promoter.save\n      sign_in(resource_name, resource)\n      redirect_to restaurants_path, notice:\n      'Welcome! You have signed up successfully'\n    else\n      render :new\n    end\n  end\n\n  private\n\n  def promoter_params\n    parameters = permitted_params\n    parameters[:phone_number] =\n      \"+#{params[:country_code]}#{parameters[:phone_number]}\"\n    parameters\n  end\n\n  def permitted_params\n    params\n      .require(:promoter)\n      .permit(\n        :first_name, :last_name, :email, :phone_number,\n        :password, :password_confirmation, :country_code,\n        :terms)\n  end\nend\n</code></pre>\n\n<p>The code pasted here are the ones I believe is necessary. Soz if it's too long.</p>\n\n<p>My question is, why doesn't the fields_for :promotion update the data in the database? I'll add my routes file once I can.</p>\n"}, {"tags": ["ruby", "chef-infra"], "answers": [{"comments": [{"owner": {"reputation": 5, "user_id": 9222537, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/55cdb0f64fe3e1dc444db7285dcf8747?s=128&d=identicon&r=PG&f=1", "display_name": "Anna", "link": "https://stackoverflow.com/users/9222537/anna"}, "edited": false, "score": 0, "creation_date": 1516091390, "post_id": 48276311, "comment_id": 83537173, "body": "the value  data: node[&#39;abc&#39;][&#39;def&#39;] keeps changing for every chef client run . And the its fetches the value directly from the attributes folder."}], "tags": [], "owner": {"reputation": 43208, "user_id": 78722, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf611565f0b79abd0b3dc200ad867661?s=128&d=identicon&r=PG", "display_name": "coderanger", "link": "https://stackoverflow.com/users/78722/coderanger"}, "is_accepted": false, "score": 0, "last_activity_date": 1516088952, "creation_date": 1516088952, "answer_id": 48276311, "question_id": 48275007, "link": "https://stackoverflow.com/questions/48275007/how-do-i-compare-a-registry-value-value-in-the-machine-with-the-node-attribute/48276311#48276311", "title": "How do I compare a registry_value (value in the machine) with the node attribute for every chef-client run if the value keeps changing", "body": "<p>To quote the example from the docs for the <code>registry_key</code> resource:</p>\n\n<pre><code>registry_key \"HKEY_LOCAL_MACHINE\\\\...\\\\System\" do\n  values [{\n    name: \"NewRegistryKeyValue\",\n    type: :string,\n    data: node['abc']['def']\n  }]\nend\n</code></pre>\n"}], "owner": {"reputation": 5, "user_id": 9222537, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/55cdb0f64fe3e1dc444db7285dcf8747?s=128&d=identicon&r=PG&f=1", "display_name": "Anna", "link": "https://stackoverflow.com/users/9222537/anna"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 173, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1516130460, "creation_date": 1516082776, "last_edit_date": 1516130460, "question_id": 48275007, "link": "https://stackoverflow.com/questions/48275007/how-do-i-compare-a-registry-value-value-in-the-machine-with-the-node-attribute", "title": "How do I compare a registry_value (value in the machine) with the node attribute for every chef-client run if the value keeps changing", "body": "<p>The value in the regedit (registry value) keeps changing for every chef client-run. Lets say the default value is <strong>default[abc][def] = 'NULL'</strong> in attributes folder-> default.rb . In the Chef::Recipe \"enable.rb\" I get the registry_value .</p>\n\n<pre><code>  `first_reg_value = registry_get_values'HKEY_LOCAL_MACHINE\\xxx\\yy\\zzz'\n   second_value = node[abc][def]\n   first_reg_value.each do |key|\n    if key[:name] == 'theoriginal_value' \n    second_value = key[:data]\n    only_if { first_reg_value = second_value }\n   end \n  end`\n</code></pre>\n\n<p>How to get the value for every chef-client run from the machine?</p>\n\n<p>The value should be changed from NULL to 'xyz' and it should reflect in the node attribute value in the chef console.In the next chef-client run if the value changes again the that value should reflect in the node attributes.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "heroku"], "comments": [{"owner": {"reputation": 2287, "user_id": 5267751, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bd62e8fd8fbb37abc7e2a39d23828047?s=128&d=identicon&r=PG&f=1", "display_name": "user202729", "link": "https://stackoverflow.com/users/5267751/user202729"}, "edited": false, "score": 0, "creation_date": 1516079125, "post_id": 48274357, "comment_id": 83532317, "body": "You can post it, so post it. Why not?"}, {"owner": {"reputation": 11638, "user_id": 461294, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/EQqHn.jpg?s=128&g=1", "display_name": "vich", "link": "https://stackoverflow.com/users/461294/vich"}, "edited": false, "score": 1, "creation_date": 1516079598, "post_id": 48274357, "comment_id": 83532476, "body": "In your command line, run <code>heroku logs -t -a name-of-app</code>. The <code>-t</code> option is for tailing the Heroku logs. Once you&#39;ve spotted the error, Google it and attempt to implement a solution. If you get stuck, update your question. If Googling has given you what you need, please close this question. Or, better yet, answer it yourself with the steps you took to fix the issue."}, {"owner": {"reputation": 21, "user_id": 8397953, "user_type": "registered", "profile_image": "https://graph.facebook.com/10155445167041550/picture?type=large", "display_name": "Tommy", "link": "https://stackoverflow.com/users/8397953/tommy"}, "edited": false, "score": 0, "creation_date": 1516079799, "post_id": 48274357, "comment_id": 83532527, "body": "I uploaded the logs and I see a fatal error is that the number I should google?"}, {"owner": {"reputation": 1213, "user_id": 5664033, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/965444bb2b99f96cd3e3ace4181fa27c?s=128&d=identicon&r=PG", "display_name": "Bala Karthik", "link": "https://stackoverflow.com/users/5664033/bala-karthik"}, "edited": false, "score": 0, "creation_date": 1516079900, "post_id": 48274357, "comment_id": 83532560, "body": "Have you ran the migration scripts..?"}, {"owner": {"reputation": 21, "user_id": 8397953, "user_type": "registered", "profile_image": "https://graph.facebook.com/10155445167041550/picture?type=large", "display_name": "Tommy", "link": "https://stackoverflow.com/users/8397953/tommy"}, "edited": false, "score": 0, "creation_date": 1516080006, "post_id": 48274357, "comment_id": 83532594, "body": "I ran $ heroku run rails db:migrate"}, {"owner": {"reputation": 11638, "user_id": 461294, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/EQqHn.jpg?s=128&g=1", "display_name": "vich", "link": "https://stackoverflow.com/users/461294/vich"}, "edited": false, "score": 0, "creation_date": 1516080590, "post_id": 48274357, "comment_id": 83532757, "body": "Seems like Heroku is having an issue with your <code>simple_pages&#47;index.html.erb</code> view. Could you post the code for that file? Also, please use the formatting tools when editing your question to improve readability."}, {"owner": {"reputation": 21, "user_id": 8397953, "user_type": "registered", "profile_image": "https://graph.facebook.com/10155445167041550/picture?type=large", "display_name": "Tommy", "link": "https://stackoverflow.com/users/8397953/tommy"}, "edited": false, "score": 0, "creation_date": 1516081017, "post_id": 48274357, "comment_id": 83532914, "body": "I just added thank you for taking a look"}], "answers": [{"tags": [], "owner": {"reputation": 21, "user_id": 8397953, "user_type": "registered", "profile_image": "https://graph.facebook.com/10155445167041550/picture?type=large", "display_name": "Tommy", "link": "https://stackoverflow.com/users/8397953/tommy"}, "is_accepted": false, "score": 1, "last_activity_date": 1516081378, "creation_date": 1516081378, "answer_id": 48274789, "question_id": 48274357, "link": "https://stackoverflow.com/questions/48274357/heroku-not-working-and-i-dont-know-where-to-start/48274789#48274789", "title": "Heroku not working and I don&#39;t know where to start", "body": "<p>There was a file type missing from the end of my image on my simple_pages/index.html.erb page.  I needed to .jpg to the end of my source in my image_tag.</p>\n\n<p>Thank you @mmichael for your help in identifying the issue.  </p>\n\n<p>I thought there was something wrong with my db but I was incorrect.  Thanks for your help.</p>\n"}], "owner": {"reputation": 21, "user_id": 8397953, "user_type": "registered", "profile_image": "https://graph.facebook.com/10155445167041550/picture?type=large", "display_name": "Tommy", "link": "https://stackoverflow.com/users/8397953/tommy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 58, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1516081458, "creation_date": 1516078699, "last_edit_date": 1516081458, "question_id": 48274357, "link": "https://stackoverflow.com/questions/48274357/heroku-not-working-and-i-dont-know-where-to-start", "title": "Heroku not working and I don&#39;t know where to start", "body": "<p>I apologize for this being a vague question but I don't know what is going wrong so I don't know how to ask the questions.</p>\n\n<p>I set up a rails app and it's working locally.  However, when creating it on Heroku Create and it gets set up on my Heroku server it does not work.  When I run Heroku open I get this page:</p>\n\n<p><a href=\"https://polar-taiga-65467.herokuapp.com/\" rel=\"nofollow noreferrer\">https://polar-taiga-65467.herokuapp.com/</a></p>\n\n<p>I can post logs or anything else to help.  If someone can help me figure out what to do from here it would be appreciated.</p>\n\n<p>Here is my GitHub project: <a href=\"https://github.com/TomTom319/morali-tee\" rel=\"nofollow noreferrer\">https://github.com/TomTom319/morali-tee</a></p>\n\n<p>Here is the log from Heroku:</p>\n\n<pre><code>2018-01-16T05:13:18.292500+00:00 app[web.1]: I,\n[2018-01-16T05:13:18.292411 #4]  INFO -- :\n[99bf3dd0-59b3-4438-a3f7-36a037174b55]   Rendering simple_pages/index.html.erb within layouts/application\n2018-01-16T05:13:18.295106+00:00 app[web.1]:\n[99bf3dd0-59b3-4438-a3f7-36a037174b55]     3:  2018-01-16T05:13:18.293930+00:00 app[web.1]: I,\n[2018-01-16T05:13:18.293863 #4]  INFO -- :\n[99bf3dd0-59b3-4438-a3f7-36a037174b55]   Rendered simple_pages/index.html.erb within layouts/application (1.3ms)\n2018-01-16T05:13:18.294179+00:00 app[web.1]: I,\n[2018-01-16T05:13:18.294089 #4]  INFO -- :\n[99bf3dd0-59b3-4438-a3f7-36a037174b55] Completed 500 Internal Server Error in 15ms 2018-01-16T05:13:18.294881+00:00 app[web.1]: F,\n[2018-01-16T05:13:18.294798 #4] FATAL -- :\n[99bf3dd0-59b3-4438-a3f7-36a037174b55]    2018-01-16T05:13:18.295107+00:00 app[web.1]:\n[99bf3dd0-59b3-4438-a3f7-36a037174b55]     4: &lt;%= image_tag(\"yellowtee\", class: \"img-responsive first-tee\")%&gt;\n2018-01-16T05:13:18.295101+00:00 app[web.1]: F,\n[2018-01-16T05:13:18.295028 #4] FATAL -- :\n[99bf3dd0-59b3-4438-a3f7-36a037174b55]     1: &lt;h1 style=\"color:red;\"&gt;MoraliTee&lt;/h1&gt; 2018-01-16T05:13:18.295104+00:00\napp[web.1]: [99bf3dd0-59b3-4438-a3f7-36a037174b55]     2: &lt;p&gt;Welcome! We are on a mission to give back to people around the world&lt;/p&gt;\n2018-01-16T05:13:18.295158+00:00 app[web.1]: F,\n[2018-01-16T05:13:18.295086 #4] FATAL -- :\n[99bf3dd0-59b3-4438-a3f7-36a037174b55]    2018-01-16T05:13:18.760114+00:00 heroku[router]: at=info method=GET\npath=\"/favicon.ico\" host=polar-taiga-65467.herokuapp.com\nrequest_id=6a2ec4b7-7054-46b7-b76a-28ef5ab3f69a fwd=\"24.15.217.85\"\ndyno=web.1 connect=0ms service=2ms status=200 bytes=143 protocol=https\n2018-01-16T05:13:18.293286+00:00 heroku[router]: at=info method=GET\npath=\"/\" host=polar-taiga-65467.herokuapp.com\nrequest_id=99bf3dd0-59b3-4438-a3f7-36a037174b55 fwd=\"24.15.217.85\" dyno=web.1 connect=0ms service=22ms status=500 bytes=1827\nprotocol=https\n</code></pre>\n\n<p><code>Simple_pages/index.html.erb</code> code below:</p>\n\n<pre><code>&lt;h1 style=\"color:red;\"&gt;MoraliTee&lt;/h1&gt;\n&lt;p&gt;Welcome! We are on a mission to give back to people around the \nworld&lt;/p&gt;\n\n&lt;%= image_tag(\"yellowtee\", class: \"img-responsive first-tee\")%&gt;\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "activerecord", "scope"], "answers": [{"comments": [{"owner": {"reputation": 968, "user_id": 2597978, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/4K1RC.png?s=128&g=1", "display_name": "saywhatnow", "link": "https://stackoverflow.com/users/2597978/saywhatnow"}, "edited": false, "score": 2, "creation_date": 1547146880, "post_id": 48274204, "comment_id": 95102054, "body": "Semantically I agree that this example is better, but the <code>explain</code> suggests that the query is more complex with two <code>where</code> clauses. So YMMV with query speeds if that&#39;s important to you."}], "tags": [], "owner": {"reputation": 1213, "user_id": 5664033, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/965444bb2b99f96cd3e3ace4181fa27c?s=128&d=identicon&r=PG", "display_name": "Bala Karthik", "link": "https://stackoverflow.com/users/5664033/bala-karthik"}, "is_accepted": true, "score": 8, "last_activity_date": 1516077629, "creation_date": 1516077629, "answer_id": 48274204, "question_id": 48273854, "link": "https://stackoverflow.com/questions/48273854/rails-inverse-of-a-scope/48274204#48274204", "title": "rails inverse of a scope", "body": "<p>Try this</p>\n\n<p><code>scope : all_enrolled, -&gt; { joins(:trainings) }\nscope :not_enrolled, -&gt; { where.not(id: all_enrolled) }</code></p>\n"}], "owner": {"reputation": 1035, "user_id": 5891503, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/830569e0fa440b692ab80005ef9b00cb?s=128&d=identicon&r=PG", "display_name": "reiallenramos", "link": "https://stackoverflow.com/users/5891503/reiallenramos"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3005, "favorite_count": 0, "accepted_answer_id": 48274204, "answer_count": 1, "score": 3, "last_activity_date": 1573169518, "creation_date": 1516074817, "last_edit_date": 1573169518, "question_id": 48273854, "link": "https://stackoverflow.com/questions/48273854/rails-inverse-of-a-scope", "title": "rails inverse of a scope", "body": "<p>Is there a method to negate the result of a scope?\nI have 3 models, associated by has_many :through association</p>\n\n<p>user.rb</p>\n\n<pre><code>class User &lt; ActiveRecord::Base\n    has_many :user_training_maps\n    has_many :trainings, through: :user_training_maps\nend\n</code></pre>\n\n<p>training.rb</p>\n\n<pre><code>class Training &lt; ActiveRecord::Base\n    has_many :user_training_maps\n    has_many :users, through: :user_training_maps\nend\n</code></pre>\n\n<p>user_training_map.rb</p>\n\n<pre><code>class UserTrainingMap &lt; ActiveRecord::Base\n    belongs_to :user\n    belongs_to :training\nend\n</code></pre>\n\n<p>Before, I want to find all users belonging (enrolled) to a training. In user.rb, this works:</p>\n\n<p><code>scope :all_enrolled, -&gt; { joins(:trainings) }</code></p>\n\n<p>Now, I need help to find all users NOT belonging (unenrolled) to a training. I can't get this to work:\n<code>scope :all_unenrolled, -&gt; { !joins(:trainings) }</code>\ninstead, it simply returns all the users. Something like <code>unenrolled users = (all users) - (enrolled users)</code></p>\n"}, {"tags": ["ruby-on-rails", "ruby", "git", "heroku"], "comments": [{"owner": {"reputation": 446, "user_id": 1397028, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/f3276d4e8c2092c45eb93f62263bc639?s=128&d=identicon&r=PG", "display_name": "rantingsonrails", "link": "https://stackoverflow.com/users/1397028/rantingsonrails"}, "edited": false, "score": 0, "creation_date": 1516073045, "post_id": 48273307, "comment_id": 83530920, "body": "Did you commit your Gemfile.lock after running bundle install locally after modifying the Gemfile?"}, {"owner": {"reputation": 2858, "user_id": 527472, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/6VmZD.jpg?s=128&g=1", "display_name": "Kurt Mueller", "link": "https://stackoverflow.com/users/527472/kurt-mueller"}, "reply_to_user": {"reputation": 446, "user_id": 1397028, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/f3276d4e8c2092c45eb93f62263bc639?s=128&d=identicon&r=PG", "display_name": "rantingsonrails", "link": "https://stackoverflow.com/users/1397028/rantingsonrails"}, "edited": false, "score": 0, "creation_date": 1516073226, "post_id": 48273307, "comment_id": 83530953, "body": "Yes! I did commit my Gemfile.lock and Gemfile after running bundle install locally. Again, it seems restarting my computer helped (I had just installed the heroku cli toolset). Weird!"}, {"owner": {"reputation": 2858, "user_id": 527472, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/6VmZD.jpg?s=128&g=1", "display_name": "Kurt Mueller", "link": "https://stackoverflow.com/users/527472/kurt-mueller"}, "reply_to_user": {"reputation": 446, "user_id": 1397028, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/f3276d4e8c2092c45eb93f62263bc639?s=128&d=identicon&r=PG", "display_name": "rantingsonrails", "link": "https://stackoverflow.com/users/1397028/rantingsonrails"}, "edited": false, "score": 0, "creation_date": 1516073471, "post_id": 48273307, "comment_id": 83530998, "body": "Wait, does heroku only look on the master branch to determine if there&#39;s changes? I created a separate <code>heroku</code> branch to install and push heroku."}, {"owner": {"reputation": 4690, "user_id": 1937435, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/YyN37.jpg?s=128&g=1", "display_name": "Josh Brody", "link": "https://stackoverflow.com/users/1937435/josh-brody"}, "edited": false, "score": 0, "creation_date": 1516076663, "post_id": 48273307, "comment_id": 83531644, "body": "did you <code>git add .</code>"}, {"owner": {"reputation": 2858, "user_id": 527472, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/6VmZD.jpg?s=128&g=1", "display_name": "Kurt Mueller", "link": "https://stackoverflow.com/users/527472/kurt-mueller"}, "edited": false, "score": 0, "creation_date": 1516078219, "post_id": 48273307, "comment_id": 83532068, "body": "Yes I did actually. I usually use <code>git add --all</code>"}, {"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1516080727, "post_id": 48273307, "comment_id": 83532807, "body": "can you check that it really does not have the commited code already? Follow the instructions here <a href=\"https://stackoverflow.com/a/8035499/2981429\">stackoverflow.com/a/8035499/2981429</a>"}], "answers": [{"tags": [], "owner": {"reputation": 2298, "user_id": 5883753, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b32d66e6c723279fdfc2a90b269a070c?s=128&d=identicon&r=PG&f=1", "display_name": "fongfan999", "link": "https://stackoverflow.com/users/5883753/fongfan999"}, "is_accepted": false, "score": 0, "last_activity_date": 1516082981, "creation_date": 1516082981, "answer_id": 48275045, "question_id": 48273307, "link": "https://stackoverflow.com/questions/48273307/git-push-heroku-master-doesnt-push-any-changes-in-my-codebase/48275045#48275045", "title": "Git push heroku master doesn&#39;t push any changes in my codebase", "body": "<p>Try to the following:</p>\n\n<p><code>git push heroku heroku:master</code></p>\n"}], "owner": {"reputation": 2858, "user_id": 527472, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/6VmZD.jpg?s=128&g=1", "display_name": "Kurt Mueller", "link": "https://stackoverflow.com/users/527472/kurt-mueller"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 56, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1516082981, "creation_date": 1516070049, "last_edit_date": 1516071066, "question_id": 48273307, "link": "https://stackoverflow.com/questions/48273307/git-push-heroku-master-doesnt-push-any-changes-in-my-codebase", "title": "Git push heroku master doesn&#39;t push any changes in my codebase", "body": "<p>When I added a gem to my app's <code>Gemfile</code>, committed the changes, and attempted to <code>git push heroku master</code>, it simply told me all the changes were up-to-date, via the message below.</p>\n\n<pre><code>$ git push heroku master\nEverything up-to-date\n</code></pre>\n\n<p>How can I go about diagnosing this problem? thank you.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "heroku"], "comments": [{"owner": {"reputation": 446, "user_id": 1397028, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/f3276d4e8c2092c45eb93f62263bc639?s=128&d=identicon&r=PG", "display_name": "rantingsonrails", "link": "https://stackoverflow.com/users/1397028/rantingsonrails"}, "edited": false, "score": 0, "creation_date": 1516073097, "post_id": 48273288, "comment_id": 83530927, "body": "Did you run bundle install locally after modifying the Gemfile and commit both Gemfile and Gemfile.lock?"}, {"owner": {"reputation": 2858, "user_id": 527472, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/6VmZD.jpg?s=128&g=1", "display_name": "Kurt Mueller", "link": "https://stackoverflow.com/users/527472/kurt-mueller"}, "reply_to_user": {"reputation": 446, "user_id": 1397028, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/f3276d4e8c2092c45eb93f62263bc639?s=128&d=identicon&r=PG", "display_name": "rantingsonrails", "link": "https://stackoverflow.com/users/1397028/rantingsonrails"}, "edited": false, "score": 0, "creation_date": 1516073166, "post_id": 48273288, "comment_id": 83530938, "body": "Yes! Oddly enough, restarting my computer seemed to have worked in getting heroku to see that i&#39;m specifying ruby 2.5.0. I just installed the heroku toolset for the first time without restarting. Maybe that had something to do with it?"}, {"owner": {"reputation": 446, "user_id": 1397028, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/f3276d4e8c2092c45eb93f62263bc639?s=128&d=identicon&r=PG", "display_name": "rantingsonrails", "link": "https://stackoverflow.com/users/1397028/rantingsonrails"}, "edited": false, "score": 0, "creation_date": 1516073391, "post_id": 48273288, "comment_id": 83530983, "body": "This maybe has something to do with rvm if you&#39;re using it to manage your ruby installations. Overall, I&#39;m glad that you got things working."}, {"owner": {"reputation": 2858, "user_id": 527472, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/6VmZD.jpg?s=128&g=1", "display_name": "Kurt Mueller", "link": "https://stackoverflow.com/users/527472/kurt-mueller"}, "reply_to_user": {"reputation": 446, "user_id": 1397028, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/f3276d4e8c2092c45eb93f62263bc639?s=128&d=identicon&r=PG", "display_name": "rantingsonrails", "link": "https://stackoverflow.com/users/1397028/rantingsonrails"}, "edited": false, "score": 0, "creation_date": 1516073552, "post_id": 48273288, "comment_id": 83531015, "body": "I am using <code>rvm</code> to manage my ruby installations. Any precautionary measures I can take? Also, does heroku only look at my master branch when deciding if changes are created? I was using that a local branch to install heroku and configure it."}, {"owner": {"reputation": 1127, "user_id": 436112, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/301b3c350bcbbd99ea65ee2c467d38e9?s=128&d=identicon&r=PG", "display_name": "Sascha Kaestle", "link": "https://stackoverflow.com/users/436112/sascha-kaestle"}, "edited": false, "score": 0, "creation_date": 1516109944, "post_id": 48273288, "comment_id": 83548754, "body": "the documentation seems to be helpful: <a href=\"https://devcenter.heroku.com/articles/ruby-versions\" rel=\"nofollow noreferrer\">devcenter.heroku.com/articles/ruby-versions</a>"}], "owner": {"reputation": 2858, "user_id": 527472, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/6VmZD.jpg?s=128&g=1", "display_name": "Kurt Mueller", "link": "https://stackoverflow.com/users/527472/kurt-mueller"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 33, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1516069847, "creation_date": 1516069847, "question_id": 48273288, "link": "https://stackoverflow.com/questions/48273288/heroku-doesnt-respect-my-ruby-directive-in-my-gemfile", "title": "Heroku doesn&#39;t respect my ruby directive in my Gemfile", "body": "<p>At the top of my <code>Gemfile</code>, I have the following two lines:</p>\n\n<pre><code>source 'https://rubygems.org'\nruby '2.5.0'\n</code></pre>\n\n<p>However, run I run <code>git push heroku master</code>, I get the following message:</p>\n\n<pre><code>remote: -----&gt; Ruby app detected\nremote: -----&gt; Compiling Ruby/Rails\nremote: -----&gt; Using Ruby version: ruby-2.3.4\nremote: -----&gt; Installing dependencies using bundler 1.15.2\n</code></pre>\n\n<p>Heroku doesn't let me specify <code>ruby 2.5.0</code>.</p>\n\n<p>How can I go about telling Heroku that I want to use <code>ruby 2.5.0</code>?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "amazon-web-services", "aws-sdk", "amazon-sns"], "comments": [{"owner": {"reputation": 446, "user_id": 1397028, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/f3276d4e8c2092c45eb93f62263bc639?s=128&d=identicon&r=PG", "display_name": "rantingsonrails", "link": "https://stackoverflow.com/users/1397028/rantingsonrails"}, "edited": false, "score": 0, "creation_date": 1516073845, "post_id": 48273248, "comment_id": 83531063, "body": "Does the following help? <a href=\"https://docs.aws.amazon.com/sdkforruby/api/Aws/SNS/Client.html#set_topic_attributes-instance_method\" rel=\"nofollow noreferrer\">docs.aws.amazon.com/sdkforruby/api/Aws/SNS/&hellip;</a>"}, {"owner": {"reputation": 1, "user_id": 8595145, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oM0df.png?s=128&g=1", "display_name": "xaxaxaxaxa", "link": "https://stackoverflow.com/users/8595145/xaxaxaxaxa"}, "reply_to_user": {"reputation": 446, "user_id": 1397028, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/f3276d4e8c2092c45eb93f62263bc639?s=128&d=identicon&r=PG", "display_name": "rantingsonrails", "link": "https://stackoverflow.com/users/1397028/rantingsonrails"}, "edited": false, "score": 0, "creation_date": 1516076131, "post_id": 48273248, "comment_id": 83531523, "body": "@rantingsonrails thank you for your advice. thank you for your advice. I checked &#39;set_topic_attributes&#39; and &#39;set_subscription_attributes&#39;. but, There is no description about &#39;FilterPolicy&#39;.  According to the CLI example, setting of FilterPolicy seems to be done for subscription. ``` aws sns set-subscription-attributes \\   --subscription-arn arn:aws:sns:ap-northeast-1:123456789012:Insurance-Quote-Requ&zwnj;&#8203;ests:20ae8621-e33b-4&zwnj;&#8203;a6e-952c-62fa92bac17&zwnj;&#8203;1 \\   --attribute-name FilterPolicy \\   --attribute-value &#39;{&quot;insurance_type&quot;:[&quot;car&quot;, &quot;boat&quot;]}&#39; ```"}], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 8595145, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oM0df.png?s=128&g=1", "display_name": "xaxaxaxaxa", "link": "https://stackoverflow.com/users/8595145/xaxaxaxaxa"}, "is_accepted": false, "score": 0, "last_activity_date": 1516089822, "creation_date": 1516089822, "answer_id": 48276555, "question_id": 48273248, "link": "https://stackoverflow.com/questions/48273248/how-to-filtering-message-with-aws-sns-with-ruby-on-rails/48276555#48276555", "title": "How to filtering message with AWS SNS with Ruby on Rails", "body": "<p>I could set FilterPolicy using set_subscription_attributes.<br>\nDeliveryPolicy and RawMessageDelivery were valid attribute names in the description of this page, and FilterPolicy could be used too.  </p>\n\n<p><a href=\"https://docs.aws.amazon.com/sdkforruby/api/Aws/SNS/Client.html#set_subscription_attributes-instance_method\" rel=\"nofollow noreferrer\">https://docs.aws.amazon.com/sdkforruby/api/Aws/SNS/Client.html#set_subscription_attributes-instance_method</a></p>\n\n<pre><code>params = {subscription_arn: subscription_arn, attribute_name: 'FilterPolicy', attribute_value: '{\"event_type\": [\"order_placed\", \"order_cancelled\"]}'}\nclient.set_subscription_attributes(params)\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 8595145, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oM0df.png?s=128&g=1", "display_name": "xaxaxaxaxa", "link": "https://stackoverflow.com/users/8595145/xaxaxaxaxa"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 272, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1516089822, "creation_date": 1516069481, "last_edit_date": 1516077799, "question_id": 48273248, "link": "https://stackoverflow.com/questions/48273248/how-to-filtering-message-with-aws-sns-with-ruby-on-rails", "title": "How to filtering message with AWS SNS with Ruby on Rails", "body": "<p>I'm using 'aws-sdk' gem.  </p>\n\n<p><a href=\"https://github.com/aws/aws-sdk-ruby\" rel=\"nofollow noreferrer\">https://github.com/aws/aws-sdk-ruby</a>  </p>\n\n<p>Using below gem</p>\n\n<pre><code>'aws-sdk (1.11.0)'\n</code></pre>\n\n<p>I want to use filtering messages function.  </p>\n\n<p><a href=\"https://docs.aws.amazon.com/sns/latest/dg/message-filtering.html\" rel=\"nofollow noreferrer\">https://docs.aws.amazon.com/sns/latest/dg/message-filtering.html</a></p>\n\n<p>I understood I should set Filter policy.</p>\n\n<p>but, I could not find how to set it.</p>\n\n<p>I have read below.  </p>\n\n<p><a href=\"https://docs.aws.amazon.com/sdk-for-ruby/v3/developer-guide/sns-examples.html\" rel=\"nofollow noreferrer\">https://docs.aws.amazon.com/sdk-for-ruby/v3/developer-guide/sns-examples.html</a>\n<a href=\"https://docs.aws.amazon.com/sdk-for-ruby/v3/api/index.html\" rel=\"nofollow noreferrer\">https://docs.aws.amazon.com/sdk-for-ruby/v3/api/index.html</a></p>\n\n<p>How can I use this function?</p>\n\n<p>Thank you.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "heroku", "shopify-app"], "comments": [{"owner": {"reputation": 446, "user_id": 1397028, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/f3276d4e8c2092c45eb93f62263bc639?s=128&d=identicon&r=PG", "display_name": "rantingsonrails", "link": "https://stackoverflow.com/users/1397028/rantingsonrails"}, "edited": false, "score": 0, "creation_date": 1516069487, "post_id": 48272593, "comment_id": 83530277, "body": "When you run the following in a rails console what is the response?  <code>application_charge = ShopifyAPI::ApplicationCharge.new(             name: &quot;MyApp&quot;,             price: 0.09,             return_url: &quot;https:\\&#47;\\&#47;myapp.herokuapp.com\\&#47;activatecharge&quot;,             test: true)         save = application_charge.save</code>"}, {"owner": {"reputation": 43, "user_id": 6524387, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/932fe510daffb0c0bcf63e169c6fa7cd?s=128&d=identicon&r=PG&f=1", "display_name": "Brady", "link": "https://stackoverflow.com/users/6524387/brady"}, "reply_to_user": {"reputation": 446, "user_id": 1397028, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/f3276d4e8c2092c45eb93f62263bc639?s=128&d=identicon&r=PG", "display_name": "rantingsonrails", "link": "https://stackoverflow.com/users/1397028/rantingsonrails"}, "edited": false, "score": 0, "creation_date": 1516118206, "post_id": 48272593, "comment_id": 83554567, "body": "Using &quot;rails c&quot; and then pasting the above produces: &quot;NoMethodError: undefined method &#39;path&#39; for nil:NilClass&quot; in &#39;new&#39;. I guess I need to look into why the ShopifyAPI::ApplicationCharge doesn&#39;t work."}, {"owner": {"reputation": 43, "user_id": 6524387, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/932fe510daffb0c0bcf63e169c6fa7cd?s=128&d=identicon&r=PG&f=1", "display_name": "Brady", "link": "https://stackoverflow.com/users/6524387/brady"}, "reply_to_user": {"reputation": 446, "user_id": 1397028, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/f3276d4e8c2092c45eb93f62263bc639?s=128&d=identicon&r=PG", "display_name": "rantingsonrails", "link": "https://stackoverflow.com/users/1397028/rantingsonrails"}, "edited": false, "score": 0, "creation_date": 1516121089, "post_id": 48272593, "comment_id": 83556536, "body": "Removing the arguments from the .new and more closely copying the second link I posted above instead causes an ArgumentError: Missing site URI on the save action, where it previously errored on the .new. I assumed this was due to not having a session in the console, but making the same changes in the app and running it still fails to save (without direct error printed to logs)."}, {"owner": {"reputation": 446, "user_id": 1397028, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/f3276d4e8c2092c45eb93f62263bc639?s=128&d=identicon&r=PG", "display_name": "rantingsonrails", "link": "https://stackoverflow.com/users/1397028/rantingsonrails"}, "edited": false, "score": 0, "creation_date": 1516144148, "post_id": 48272593, "comment_id": 83567609, "body": "Just curious, do the backslashes have to be escaped in the return_url argument, and if not, have you tried without them?"}, {"owner": {"reputation": 446, "user_id": 1397028, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/f3276d4e8c2092c45eb93f62263bc639?s=128&d=identicon&r=PG", "display_name": "rantingsonrails", "link": "https://stackoverflow.com/users/1397028/rantingsonrails"}, "edited": false, "score": 0, "creation_date": 1516144520, "post_id": 48272593, "comment_id": 83567719, "body": "Do other shopify calls work in the console or does ShopifyAPI need to be included first?"}, {"owner": {"reputation": 43, "user_id": 6524387, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/932fe510daffb0c0bcf63e169c6fa7cd?s=128&d=identicon&r=PG&f=1", "display_name": "Brady", "link": "https://stackoverflow.com/users/6524387/brady"}, "reply_to_user": {"reputation": 446, "user_id": 1397028, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/f3276d4e8c2092c45eb93f62263bc639?s=128&d=identicon&r=PG", "display_name": "rantingsonrails", "link": "https://stackoverflow.com/users/1397028/rantingsonrails"}, "edited": false, "score": 0, "creation_date": 1516144941, "post_id": 48272593, "comment_id": 83567847, "body": "Other Shopify calls work fine, I&#39;m able to do Theme edits in another part of the app if I bypass the app_charge part while testing. I have not tried without the backslashes and imagine them necessary, but will check and return."}, {"owner": {"reputation": 43, "user_id": 6524387, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/932fe510daffb0c0bcf63e169c6fa7cd?s=128&d=identicon&r=PG&f=1", "display_name": "Brady", "link": "https://stackoverflow.com/users/6524387/brady"}, "reply_to_user": {"reputation": 446, "user_id": 1397028, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/f3276d4e8c2092c45eb93f62263bc639?s=128&d=identicon&r=PG", "display_name": "rantingsonrails", "link": "https://stackoverflow.com/users/1397028/rantingsonrails"}, "edited": false, "score": 0, "creation_date": 1516145412, "post_id": 48272593, "comment_id": 83567977, "body": "There appears to be no change, the save still fails. However, the second link I mentioned (the ecommerce one) has a url without the backslashes, so  it may actually be the better thing."}, {"owner": {"reputation": 43, "user_id": 6524387, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/932fe510daffb0c0bcf63e169c6fa7cd?s=128&d=identicon&r=PG&f=1", "display_name": "Brady", "link": "https://stackoverflow.com/users/6524387/brady"}, "reply_to_user": {"reputation": 446, "user_id": 1397028, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/f3276d4e8c2092c45eb93f62263bc639?s=128&d=identicon&r=PG", "display_name": "rantingsonrails", "link": "https://stackoverflow.com/users/1397028/rantingsonrails"}, "edited": false, "score": 0, "creation_date": 1516146319, "post_id": 48272593, "comment_id": 83568205, "body": "OH; I completely read right over that you asked &quot;in the console&quot;. No, I get NoMethodErrors, most likely due to lack of a session which I don&#39;t know how to create in console"}], "answers": [{"tags": [], "owner": {"reputation": 43, "user_id": 6524387, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/932fe510daffb0c0bcf63e169c6fa7cd?s=128&d=identicon&r=PG&f=1", "display_name": "Brady", "link": "https://stackoverflow.com/users/6524387/brady"}, "is_accepted": true, "score": 0, "last_activity_date": 1516209524, "creation_date": 1516209524, "answer_id": 48306645, "question_id": 48272593, "link": "https://stackoverflow.com/questions/48272593/shopify-application-charge-failing-to-save/48306645#48306645", "title": "shopify application charge failing to save", "body": "<p>The primary issue appears to be that the minimum charge you can request is $0.50, for which I wasn't meeting with my choice of using $0.09 for my test.</p>\n"}], "owner": {"reputation": 43, "user_id": 6524387, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/932fe510daffb0c0bcf63e169c6fa7cd?s=128&d=identicon&r=PG&f=1", "display_name": "Brady", "link": "https://stackoverflow.com/users/6524387/brady"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 290, "favorite_count": 1, "accepted_answer_id": 48306645, "answer_count": 1, "score": 1, "last_activity_date": 1516209524, "creation_date": 1516062888, "question_id": 48272593, "link": "https://stackoverflow.com/questions/48272593/shopify-application-charge-failing-to-save", "title": "shopify application charge failing to save", "body": "<p>Below is my code for a Shopify one-time-application-charge in Ruby. I followed the shopify \"add billing to your app\" page (<a href=\"https://help.shopify.com/api/tutorials/adding-billing-to-your-app\" rel=\"nofollow noreferrer\">https://help.shopify.com/api/tutorials/adding-billing-to-your-app</a>) for the code, except didn't need a recurring charge. I have also found someone else who posted their one-time-charge code which looks very similar to mine (<a href=\"https://ecommerce.shopify.com/c/shopify-apis-and-technology/t/one-time-application-charge-example-for-shopify-rails-app-489347\" rel=\"nofollow noreferrer\">https://ecommerce.shopify.com/c/shopify-apis-and-technology/t/one-time-application-charge-example-for-shopify-rails-app-489347</a>).</p>\n\n<pre><code>def create_application_charge\n\n       application_charge = ShopifyAPI::ApplicationCharge.new(\n            name: \"MyApp\",\n            price: 0.09,\n            return_url: \"https:\\/\\/myapp.herokuapp.com\\/activatecharge\",\n            test: true)\n        save = application_charge.save\n        if save\n            redirect application_charge.confirmation_url\n            return\n        end\n        flash[:error] = \"The save worked: #{save}\"\n    end\n</code></pre>\n\n<p>The flash always responds as false. Is there a failure at authentication that would prevent this? Or something to get the store to accept an application charge? I'm at a loss as to why this does not work.</p>\n\n<p>Any help would be greatly appreciated, thank you.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "string", "utf-8", "unicode-normalization"], "comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1516057450, "post_id": 48271858, "comment_id": 83527566, "body": "In your example I&#39;m seeing <code>&quot;\u042f\u0308 &quot;</code> which has a space in it, same with the second example, but not the third. Check with <code>&quot;\u042f\u0308 &quot;.chars</code> which gives <code>[&quot;\u042f&quot;, &quot;\u0308&quot;, &quot; &quot;]</code> for me, the accent as a separate char."}, {"owner": {"reputation": 107, "user_id": 3442759, "user_type": "registered", "profile_image": "https://graph.facebook.com/1237562817/picture?type=large", "display_name": "tomkra", "link": "https://stackoverflow.com/users/3442759/tomkra"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1516057670, "post_id": 48271858, "comment_id": 83527627, "body": "Thank you but I think this is caused by editor here in stackowerflow. When you try to copy these chars in terminal, browser etc. It&#39;s just one char."}, {"owner": {"reputation": 16229, "user_id": 525478, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/3b6c0b47a0c430a0b141baee7ea845be?s=128&d=identicon&r=PG", "display_name": "Brad Werth", "link": "https://stackoverflow.com/users/525478/brad-werth"}, "edited": false, "score": 0, "creation_date": 1516057686, "post_id": 48271858, "comment_id": 83527630, "body": "It displays correctly (shows one character) in my terminal, with the same result: <code>2.4.2 :002 &gt; &#39;\u042f\u0306&#39;.length  =&gt; 2</code>"}, {"owner": {"reputation": 16229, "user_id": 525478, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/3b6c0b47a0c430a0b141baee7ea845be?s=128&d=identicon&r=PG", "display_name": "Brad Werth", "link": "https://stackoverflow.com/users/525478/brad-werth"}, "edited": false, "score": 1, "creation_date": 1516057861, "post_id": 48271858, "comment_id": 83527684, "body": "You might be interested in something like this <a href=\"https://stackoverflow.com/questions/22277052/how-can-zalgo-text-be-prevented\" title=\"how can zalgo text be prevented\">stackoverflow.com/questions/22277052/&hellip;</a>, which I think is sort of related to your issue."}, {"owner": {"reputation": 16229, "user_id": 525478, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/3b6c0b47a0c430a0b141baee7ea845be?s=128&d=identicon&r=PG", "display_name": "Brad Werth", "link": "https://stackoverflow.com/users/525478/brad-werth"}, "edited": false, "score": 1, "creation_date": 1516057899, "post_id": 48271858, "comment_id": 83527697, "body": "Actually, the referenced <a href=\"https://stackoverflow.com/questions/6579844/how-does-zalgo-text-work\" title=\"how does zalgo text work\">stackoverflow.com/questions/6579844/how-does-zalgo-text-work</a> might be better"}], "answers": [{"comments": [{"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 1, "creation_date": 1516080027, "post_id": 48272617, "comment_id": 83532601, "body": "What is the exact purpose of NFD before gsubbing the diacritics out, besides it\u2019s the educational example? I believe the decomposition could be safely removed from the chain."}, {"owner": {"reputation": 394580, "user_id": 479863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ArUCE.jpg?s=128&g=1", "display_name": "mu is too short", "link": "https://stackoverflow.com/users/479863/mu-is-too-short"}, "reply_to_user": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 1, "creation_date": 1516084620, "post_id": 48272617, "comment_id": 83534076, "body": "@mudasobwa Mostly to remind me not to be thinking about two different things at once (only one of which was related to the question). Thanks for reminding me."}], "tags": [], "owner": {"reputation": 394580, "user_id": 479863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ArUCE.jpg?s=128&g=1", "display_name": "mu is too short", "link": "https://stackoverflow.com/users/479863/mu-is-too-short"}, "is_accepted": true, "score": 5, "last_activity_date": 1516093819, "last_edit_date": 1516093819, "creation_date": 1516063122, "answer_id": 48272617, "question_id": 48271858, "link": "https://stackoverflow.com/questions/48271858/cyrillic-strings-%d0%af%cc%86-%d0%af%cc%84-%d0%af%cc%88-return-length-2-instead-of-1-in-ruby-and-other-program/48272617#48272617", "title": "cyrillic strings \u042f\u0306 \u042f\u0304 \u042f\u0308 return length 2 instead of 1 in ruby and other programming languages", "body": "<p>The underlying problem is that <code>\u042f\u0308</code> is actually two code points: the <code>\u042f</code> and the umlaut are separate:</p>\n\n<pre><code>'\u042f\u0308'.chars\n#=&gt; [\"\u042f\", \"\u0308\"]\n</code></pre>\n\n<p>Normally you'd solve this sort of problem through unicode normalization but that alone won't help you here as there is no single code point for <code>\u042f\u0308</code> or <code>\u042f\u0306</code> (but there is for <code>\u04ec</code>).</p>\n\n<p>You could strip off the diacritics before checking the length:</p>\n\n<pre><code>'\u042f\u0306'.gsub(/\\p{Diacritic}/, '')\n#=&gt; \"\u042f\" \n'\u042f\u0306'.gsub(/\\p{Diacritic}/, '').length\n#=&gt; 1 \n</code></pre>\n\n<p>You'll get the desired length but the strings won't be quite the same. This also works on things like <code>\u04ec</code> which can be represented by a single code point:</p>\n\n<pre><code>'\u04ec'.length\n#=&gt; 1\n'\u04ec'.gsub(/\\p{Diacritic}/, '')\n#=&gt; \"\u04ec\" \n'\u04ec'.gsub(/\\p{Diacritic}/, '').length\n#=&gt; 1 \n</code></pre>\n\n<p>Unicode is wonderful and awesome and solves many problems that used to plague us. Unfortunately, Unicode is also horrible and complicated because human languages and glyphs weren't exactly designed.</p>\n"}, {"tags": [], "owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "is_accepted": false, "score": 5, "last_activity_date": 1516089326, "creation_date": 1516089326, "answer_id": 48276420, "question_id": 48271858, "link": "https://stackoverflow.com/questions/48271858/cyrillic-strings-%d0%af%cc%86-%d0%af%cc%84-%d0%af%cc%88-return-length-2-instead-of-1-in-ruby-and-other-program/48276420#48276420", "title": "cyrillic strings \u042f\u0306 \u042f\u0304 \u042f\u0308 return length 2 instead of 1 in ruby and other programming languages", "body": "<p>Ruby 2.5 adds <a href=\"http://ruby-doc.org/core-2.5.0/String.html#method-i-each_grapheme_cluster\" rel=\"noreferrer\"><code>String#each_grapheme_cluster</code></a>:</p>\n\n<pre><code>'\u042f\u0306\u042f\u0304\u042f\u0308'.each_grapheme_cluster.to_a   #=&gt; [\"\u042f\u0306\", \"\u042f\u0304\", \"\u042f\u0308\"]\n'\u042f\u0306\u042f\u0304\u042f\u0308'.each_grapheme_cluster.count  #=&gt; 3\n</code></pre>\n\n<p>Note that you can't use <code>each_grapheme_cluster.size</code> which is equivalent to <code>each_char.size</code>, so both would return <code>6</code> in the above example. (That looks like a bug, I've just filed a <a href=\"https://bugs.ruby-lang.org/issues/14363\" rel=\"noreferrer\">bug report</a>)</p>\n"}, {"tags": [], "owner": {"reputation": 8831, "user_id": 169793, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/901b686e3824cd357b169ac7ce431b1b?s=128&d=identicon&r=PG", "display_name": "J-_-L", "link": "https://stackoverflow.com/users/169793/j-l"}, "is_accepted": false, "score": 0, "last_activity_date": 1516096054, "last_edit_date": 1516096054, "creation_date": 1516094792, "answer_id": 48277891, "question_id": 48271858, "link": "https://stackoverflow.com/questions/48271858/cyrillic-strings-%d0%af%cc%86-%d0%af%cc%84-%d0%af%cc%88-return-length-2-instead-of-1-in-ruby-and-other-program/48277891#48277891", "title": "cyrillic strings \u042f\u0306 \u042f\u0304 \u042f\u0308 return length 2 instead of 1 in ruby and other programming languages", "body": "<p>Try <a href=\"https://github.com/janlelis/unicode-display_width\" rel=\"nofollow noreferrer\">unicode-display_width</a> which is built to give an exact answer to this question:</p>\n\n<pre><code>require \"unicode/display_width\"\nUnicode::DisplayWidth.of \"\u042f\u0308\" #=&gt; 1\n</code></pre>\n"}], "owner": {"reputation": 107, "user_id": 3442759, "user_type": "registered", "profile_image": "https://graph.facebook.com/1237562817/picture?type=large", "display_name": "tomkra", "link": "https://stackoverflow.com/users/3442759/tomkra"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 177, "favorite_count": 1, "accepted_answer_id": 48272617, "answer_count": 3, "score": 6, "last_activity_date": 1516096054, "creation_date": 1516057063, "last_edit_date": 1516093901, "question_id": 48271858, "link": "https://stackoverflow.com/questions/48271858/cyrillic-strings-%d0%af%cc%86-%d0%af%cc%84-%d0%af%cc%88-return-length-2-instead-of-1-in-ruby-and-other-program", "title": "cyrillic strings \u042f\u0306 \u042f\u0304 \u042f\u0308 return length 2 instead of 1 in ruby and other programming languages", "body": "<p>In Ruby, Javascript and Java (others I didn't try), have cyrillic chars \u042f\u0306 \u042f\u0304 \u042f\u0308  length 2. When I try to check length of string with these chars indside, I get bad output value.</p>\n\n<pre><code>\"\u042f\u0308\".mb_chars.length\n#=&gt; 2  #should be 1 (ruby on rails)\n\n\"\u042f\u0306\".length\n#=&gt; 2  #should be 1 (ruby, javascript)\n\n\"\u04ec\".length\n#=&gt; 1  #correct (ruby, javascript)\n</code></pre>\n\n<p>Please note, that strings are encoded in UTF-8 and each char behave as single character.</p>\n\n<p>My question is why is there such behaviour and how can I get length of string correctly with these chars inside?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "equality"], "comments": [{"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 2, "creation_date": 1516055205, "post_id": 48271276, "comment_id": 83526844, "body": "You are asking whether the class of something is a string. Obviously, it isn&#39;t. The class of something is a class, not a string."}, {"owner": {"reputation": 394580, "user_id": 479863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ArUCE.jpg?s=128&g=1", "display_name": "mu is too short", "link": "https://stackoverflow.com/users/479863/mu-is-too-short"}, "edited": false, "score": 2, "creation_date": 1516055257, "post_id": 48271276, "comment_id": 83526857, "body": "BTW, you&#39;re doing a lot more work than you need to. <code>ActiveRecord::Type::Boolean.new.cast</code> takes care of strings, <code>nil</code>, booleans, ... for you so you don&#39;t need all those branches, just <code>value = ActiveRecord::Type::Boolean.new.cast(uncertain_value)</code> and the <code>to_integer</code> logic should be sufficient."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 1, "creation_date": 1516057278, "post_id": 48271276, "comment_id": 83527510, "body": "<code>return</code> is not needed in the last line of each clause (for example, <code>return false</code> can, and should be, written simply <code>false</code>). Also, instead of, say, <code>return 0 if to_integer == true; return false</code>, you can use a <i>ternary</i> expression: <code>to_integer == true ? 0 : false</code>. If you only care that <code>to_integer</code> is truthy, simplify that to <code>to_integer ? 0 : false</code>."}], "answers": [{"tags": [], "owner": {"reputation": 2097, "user_id": 384813, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/d1f6789769c66d266a246bd9b24ca982?s=128&d=identicon&r=PG", "display_name": "Martin Svalin", "link": "https://stackoverflow.com/users/384813/martin-svalin"}, "is_accepted": true, "score": 2, "last_activity_date": 1516054231, "creation_date": 1516054231, "answer_id": 48271381, "question_id": 48271276, "link": "https://stackoverflow.com/questions/48271276/unexpected-results-when-comparing-classes-in-case-statement-vs-an-if-statment/48271381#48271381", "title": "Unexpected results when comparing classes in case statement vs an if statment", "body": "<p>The triple equals <code>===</code> is called under the hood in a <code>case</code> expression in Ruby. We've found it convenient to be able to express something like:</p>\n\n<pre><code>case object\nwhen String\n  \"object is an instance of String!\"\nwhen Enumerable\n  \"wow, object is actually a bunch of objects!\"\nend\n</code></pre>\n\n<p>This is convenient, of course, unless you're actually holding the class, not an instance of the class. But in your example, you call <code>#class</code> on the object in your case expression. Simply drop that call, and your cases will be put in the correct bins. :)</p>\n"}], "owner": {"reputation": 60, "user_id": 8533465, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5810faa18d5c2c5d21f9e213ad80767?s=128&d=identicon&r=PG&f=1", "display_name": "Mendoza", "link": "https://stackoverflow.com/users/8533465/mendoza"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 109, "favorite_count": 0, "accepted_answer_id": 48271381, "answer_count": 1, "score": 0, "last_activity_date": 1516215074, "creation_date": 1516053764, "last_edit_date": 1516215074, "question_id": 48271276, "link": "https://stackoverflow.com/questions/48271276/unexpected-results-when-comparing-classes-in-case-statement-vs-an-if-statment", "title": "Unexpected results when comparing classes in case statement vs an if statment", "body": "<p>So I was writing a module function to convert 'falsey' and 'truthy' values into true and false. To do this I was using a case expression which as far as I can tell is basically just <a href=\"https://stackoverflow.com/questions/3422223/vs-in-ruby\">a big elseif statement that uses the === function</a> with the === operator <a href=\"https://stackoverflow.com/questions/4467538/what-does-the-operator-do-in-ruby/4467823#\">being meant to be used for comparing sets</a>. From the <a href=\"https://ruby-doc.org/core-2.3.0/NilClass.html\" rel=\"nofollow noreferrer\">Ruby documentation</a> the only difference I can really find between == and === is that === can be overwritten for comparing decedents of classes. I also understand that <a href=\"https://stackoverflow.com/questions/39159149/why-trueclass-true-evaluates-to-true-but-true-trueclass-evaluates\">everything is a method call in ruby</a> so we can't assume that the equality/subsumption methods are commutative.</p>\n\n<p>When using a case statement to sort by class I would have guessed that the functionality of == and === would be identical but what I found is that when sorting by class they case statement never put my inputs into the correct 'bin'. At that point I switched to using == and it did work so I was wondering why that was the case since I am comparing classes which I assumed would in fact be an \"apples to apples\" comparison.</p>\n\n<pre><code>module FirstTry\n  def self.to_boolean(uncertain_value, to_integer: false)\n    case uncertain_value.class\n    when String\n      value = ActiveRecord::Type::Boolean.new.cast(uncertain_value)\n      return 1 if to_integer == true &amp;&amp; value == true\n      return 0 if to_integer == true &amp;&amp; value == false\n      return boolean_value\n    when TrueClass\n      return 1 if to_integer == true\n      return true\n    when FalseClass\n      return 0 if to_integer == true\n      return false\n    when NilClass\n      return 0 if to_integer == true\n      return false\n    end\n    # I did not originally include this part of the code in the question\n    raise 'Conversion Failed: No rules for converting that type of input into a boolean.'\n  end\nend\n\nmodule SecondTry\n  def self.to_boolean(uncertain_value, to_integer: false)\n    if uncertain_value.class == String\n      boolean_value = ActiveRecord::Type::Boolean.new.cast(uncertain_value)\n      return 1 if to_integer == true &amp;&amp; boolean_value == true\n      return 0 if to_integer == true &amp;&amp; boolean_value == false\n      return boolean_value\n    elsif uncertain_value.class == TrueClass\n      return 1 if to_integer == true\n      return true\n    elsif uncertain_value.class == FalseClass\n      return 0 if to_integer == true\n      return false\n    elsif uncertain_value.class == NilClass\n      return 0 if to_integer == true\n      return false\n    end\n    # I did not originally include this part of the code in the question\n    raise 'Conversion Failed: No rules for converting that type of input into a boolean.'\n  end\nend\n</code></pre>\n"}, {"tags": ["ruby", "sinatra", "nokogiri", "fileutils"], "comments": [{"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1516046861, "post_id": 48269938, "comment_id": 83523388, "body": "directory local to what, the app or the user?"}, {"owner": {"reputation": 361, "user_id": 1407810, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/E8Q9I.jpg?s=128&g=1", "display_name": "Gooner", "link": "https://stackoverflow.com/users/1407810/gooner"}, "reply_to_user": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1516047201, "post_id": 48269938, "comment_id": 83523535, "body": "@SergioTulentsev in the server directory"}, {"owner": {"reputation": 2262, "user_id": 4101569, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/15c4c64e58bc5cdeec8e7ce067131a54?s=128&d=identicon&r=PG", "display_name": "katafrakt", "link": "https://stackoverflow.com/users/4101569/katafrakt"}, "edited": false, "score": 2, "creation_date": 1516048315, "post_id": 48269938, "comment_id": 83523995, "body": "Since you have the file already on the server, you &quot;save&quot; it by simply copying (or moving) it to desired location (<code>FileUtils.cp</code>)."}, {"owner": {"reputation": 361, "user_id": 1407810, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/E8Q9I.jpg?s=128&g=1", "display_name": "Gooner", "link": "https://stackoverflow.com/users/1407810/gooner"}, "reply_to_user": {"reputation": 2262, "user_id": 4101569, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/15c4c64e58bc5cdeec8e7ce067131a54?s=128&d=identicon&r=PG", "display_name": "katafrakt", "link": "https://stackoverflow.com/users/4101569/katafrakt"}, "edited": false, "score": 0, "creation_date": 1516153341, "post_id": 48269938, "comment_id": 83570063, "body": "Thanks @katafrakt for your tips"}], "answers": [{"comments": [{"owner": {"reputation": 361, "user_id": 1407810, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/E8Q9I.jpg?s=128&g=1", "display_name": "Gooner", "link": "https://stackoverflow.com/users/1407810/gooner"}, "edited": false, "score": 0, "creation_date": 1516153482, "post_id": 48270278, "comment_id": 83570096, "body": "thanks for your tips but i go with katafrakt suggestion on using (FileUtils.cp) as the solution to my problem."}], "tags": [], "owner": {"reputation": 446, "user_id": 1397028, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/f3276d4e8c2092c45eb93f62263bc639?s=128&d=identicon&r=PG", "display_name": "rantingsonrails", "link": "https://stackoverflow.com/users/1397028/rantingsonrails"}, "is_accepted": false, "score": 1, "last_activity_date": 1516048370, "creation_date": 1516048370, "answer_id": 48270278, "question_id": 48269938, "link": "https://stackoverflow.com/questions/48269938/ruby-send-file-and-store-it-directly-to-local-folder-using-fileutils/48270278#48270278", "title": "Ruby send_file and store it directly to local folder using FileUtils", "body": "<p>Save the file prior to calling send_file and then reference it as such</p>\n\n<pre><code>file = File.open(temp_file_path, 'w+')\nfile.binmode\nfile.write(rand_file.read)\nfile.close\nfile = Tempfile.new('temp_file_path', 'tmp')\nsend_file file, ...\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 361, "user_id": 1407810, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/E8Q9I.jpg?s=128&g=1", "display_name": "Gooner", "link": "https://stackoverflow.com/users/1407810/gooner"}, "is_accepted": true, "score": 1, "last_activity_date": 1516153308, "creation_date": 1516153308, "answer_id": 48292459, "question_id": 48269938, "link": "https://stackoverflow.com/questions/48269938/ruby-send-file-and-store-it-directly-to-local-folder-using-fileutils/48292459#48292459", "title": "Ruby send_file and store it directly to local folder using FileUtils", "body": "<p>I've finally solve my problem by using tips from @katafrakt and @rantingsonrails by using the FileUtils method of copying just before the send_file command. Below are my code on how i did it.</p>\n\n<pre><code>temp_file_path = \"./document/#{@report.report_name}.docx\"\nFileUtils::copy_file(rand_file,temp_file_path)\n</code></pre>\n"}], "owner": {"reputation": 361, "user_id": 1407810, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/E8Q9I.jpg?s=128&g=1", "display_name": "Gooner", "link": "https://stackoverflow.com/users/1407810/gooner"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 349, "favorite_count": 0, "accepted_answer_id": 48292459, "answer_count": 2, "score": 0, "last_activity_date": 1516522135, "creation_date": 1516046699, "last_edit_date": 1516522135, "question_id": 48269938, "link": "https://stackoverflow.com/questions/48269938/ruby-send-file-and-store-it-directly-to-local-folder-using-fileutils", "title": "Ruby send_file and store it directly to local folder using FileUtils", "body": "<p>I am currently able to send a docx file for the user to download, question is <strong>how do I save the file created for download from the <code>send_file</code> method to store into a local directory in a ruby app?</strong></p>\n\n<p>Below is the code that uses <code>send_file</code>:</p>\n\n<pre><code>send_file rand_file, :type =&gt; 'docx', :filename =&gt; \"#{@report.report_name}.docx\"\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "email", "smtp", "ruby-on-rails-5"], "comments": [{"owner": {"reputation": 446, "user_id": 1397028, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/f3276d4e8c2092c45eb93f62263bc639?s=128&d=identicon&r=PG", "display_name": "rantingsonrails", "link": "https://stackoverflow.com/users/1397028/rantingsonrails"}, "edited": false, "score": 0, "creation_date": 1516052652, "post_id": 48269608, "comment_id": 83525836, "body": "Does it affect things if you change authentication type from &#39;plain&#39; to &#39;login&#39; in development?"}, {"owner": {"reputation": 26120, "user_id": 219883, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/c35b5b0f9e7cce48864f4f1545ead995?s=128&d=identicon&r=PG", "display_name": "Taryn East", "link": "https://stackoverflow.com/users/219883/taryn-east"}, "edited": false, "score": 0, "creation_date": 1516055418, "post_id": 48269608, "comment_id": 83526919, "body": "Is it looking-for (and failing to find) a mailer-view or layout or some other file?"}, {"owner": {"reputation": 955, "user_id": 3739453, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/ad500b31d2ce042c4f2c5b6e361a129b?s=128&d=identicon&r=PG&f=1", "display_name": "Joe Morano", "link": "https://stackoverflow.com/users/3739453/joe-morano"}, "reply_to_user": {"reputation": 446, "user_id": 1397028, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/f3276d4e8c2092c45eb93f62263bc639?s=128&d=identicon&r=PG", "display_name": "rantingsonrails", "link": "https://stackoverflow.com/users/1397028/rantingsonrails"}, "edited": false, "score": 0, "creation_date": 1516058441, "post_id": 48269608, "comment_id": 83527808, "body": "@rantingsonrails I changed &#39;plain&#39; to &#39;login&#39; and now it works on development, but not on production."}, {"owner": {"reputation": 446, "user_id": 1397028, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/f3276d4e8c2092c45eb93f62263bc639?s=128&d=identicon&r=PG", "display_name": "rantingsonrails", "link": "https://stackoverflow.com/users/1397028/rantingsonrails"}, "edited": false, "score": 0, "creation_date": 1516059769, "post_id": 48269608, "comment_id": 83528169, "body": "@JoeMorano Are both dev and prod using port 587 now?"}, {"owner": {"reputation": 446, "user_id": 1397028, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/f3276d4e8c2092c45eb93f62263bc639?s=128&d=identicon&r=PG", "display_name": "rantingsonrails", "link": "https://stackoverflow.com/users/1397028/rantingsonrails"}, "edited": false, "score": 0, "creation_date": 1516059920, "post_id": 48269608, "comment_id": 83528206, "body": "@JoeMorano Also another guess for production to try <code>config.action_mailer.default_url_options = { host: &#39;website.com&#39;, protocol:&#39;http&#39; }</code>"}, {"owner": {"reputation": 955, "user_id": 3739453, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/ad500b31d2ce042c4f2c5b6e361a129b?s=128&d=identicon&r=PG&f=1", "display_name": "Joe Morano", "link": "https://stackoverflow.com/users/3739453/joe-morano"}, "reply_to_user": {"reputation": 446, "user_id": 1397028, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/f3276d4e8c2092c45eb93f62263bc639?s=128&d=identicon&r=PG", "display_name": "rantingsonrails", "link": "https://stackoverflow.com/users/1397028/rantingsonrails"}, "edited": false, "score": 0, "creation_date": 1516062466, "post_id": 48269608, "comment_id": 83528828, "body": "@rantingsonrails Yes, both are using port 587. I tried your latest code, but the email still isn&#39;t being sent."}, {"owner": {"reputation": 955, "user_id": 3739453, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/ad500b31d2ce042c4f2c5b6e361a129b?s=128&d=identicon&r=PG&f=1", "display_name": "Joe Morano", "link": "https://stackoverflow.com/users/3739453/joe-morano"}, "reply_to_user": {"reputation": 446, "user_id": 1397028, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/f3276d4e8c2092c45eb93f62263bc639?s=128&d=identicon&r=PG", "display_name": "rantingsonrails", "link": "https://stackoverflow.com/users/1397028/rantingsonrails"}, "edited": false, "score": 0, "creation_date": 1516068282, "post_id": 48269608, "comment_id": 83530033, "body": "@rantingsonrails For the love of god, now I&#39;m getting the EOFError on development again, but I didn&#39;t even change the code."}, {"owner": {"reputation": 446, "user_id": 1397028, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/f3276d4e8c2092c45eb93f62263bc639?s=128&d=identicon&r=PG", "display_name": "rantingsonrails", "link": "https://stackoverflow.com/users/1397028/rantingsonrails"}, "edited": false, "score": 0, "creation_date": 1516069674, "post_id": 48269608, "comment_id": 83530317, "body": "@JoeMorano First of all Google is a pain sometimes, so take heart. The EOF error is a message that Google is sending saying that they are denying access. Do you have a google apps account that you&#39;re using here, ie your own domain, or just trying to send through your me@gmail.com account?"}, {"owner": {"reputation": 446, "user_id": 1397028, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/f3276d4e8c2092c45eb93f62263bc639?s=128&d=identicon&r=PG", "display_name": "rantingsonrails", "link": "https://stackoverflow.com/users/1397028/rantingsonrails"}, "edited": false, "score": 0, "creation_date": 1516069802, "post_id": 48269608, "comment_id": 83530341, "body": "@JoeMorano Also, in development, if you use a gem like mailcatcher, do you see the email being sent?"}, {"owner": {"reputation": 446, "user_id": 1397028, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/f3276d4e8c2092c45eb93f62263bc639?s=128&d=identicon&r=PG", "display_name": "rantingsonrails", "link": "https://stackoverflow.com/users/1397028/rantingsonrails"}, "edited": false, "score": 0, "creation_date": 1516070104, "post_id": 48269608, "comment_id": 83530398, "body": "@JoeMorano Also, as a shot in the dark, you can try removing <code>default from: &#39;address@gmail.com&#39;</code> and specify from in the <code>mail(..., from:&quot;address@gmail.com&quot;)</code>"}, {"owner": {"reputation": 955, "user_id": 3739453, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/ad500b31d2ce042c4f2c5b6e361a129b?s=128&d=identicon&r=PG&f=1", "display_name": "Joe Morano", "link": "https://stackoverflow.com/users/3739453/joe-morano"}, "reply_to_user": {"reputation": 446, "user_id": 1397028, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/f3276d4e8c2092c45eb93f62263bc639?s=128&d=identicon&r=PG", "display_name": "rantingsonrails", "link": "https://stackoverflow.com/users/1397028/rantingsonrails"}, "edited": false, "score": 0, "creation_date": 1516070918, "post_id": 48269608, "comment_id": 83530536, "body": "@rantingsonrails That&#39;s the weird thing, Google sent me an email the first few times that it blocked a suspicious sign-in attempt, but I&#39;ve tried about 50 times since then and I never get a warning anymore. I&#39;m using a x@gmail.com account with less secure apps enabled, so I don&#39;t know what else I can do. I&#39;m not using mailcatcher. The content of the email is printed in my terminal, but then I get a 500 EOF error."}, {"owner": {"reputation": 955, "user_id": 3739453, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/ad500b31d2ce042c4f2c5b6e361a129b?s=128&d=identicon&r=PG&f=1", "display_name": "Joe Morano", "link": "https://stackoverflow.com/users/3739453/joe-morano"}, "reply_to_user": {"reputation": 446, "user_id": 1397028, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/f3276d4e8c2092c45eb93f62263bc639?s=128&d=identicon&r=PG", "display_name": "rantingsonrails", "link": "https://stackoverflow.com/users/1397028/rantingsonrails"}, "edited": false, "score": 0, "creation_date": 1516071021, "post_id": 48269608, "comment_id": 83530563, "body": "@rantingsonrails I changed that, and now it works on development again, but still not on production."}, {"owner": {"reputation": 446, "user_id": 1397028, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/f3276d4e8c2092c45eb93f62263bc639?s=128&d=identicon&r=PG", "display_name": "rantingsonrails", "link": "https://stackoverflow.com/users/1397028/rantingsonrails"}, "edited": false, "score": 0, "creation_date": 1516071849, "post_id": 48269608, "comment_id": 83530701, "body": "@JoeMorano Production rails console is sending the email without issue? The problem is just when running the command through the local web server?"}, {"owner": {"reputation": 446, "user_id": 1397028, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/f3276d4e8c2092c45eb93f62263bc639?s=128&d=identicon&r=PG", "display_name": "rantingsonrails", "link": "https://stackoverflow.com/users/1397028/rantingsonrails"}, "edited": false, "score": 0, "creation_date": 1516072424, "post_id": 48269608, "comment_id": 83530802, "body": "@JoeMorano Also, with the above changes regarding the <code>default_url_options</code>, can you add <code>tls:true</code> using port 465 on production?  <code>config.action_mailer.smtp_settings = {   tls: true,   address: &#39;smtp.gmail.com&#39;,   port:                 465,   ...  }</code>"}, {"owner": {"reputation": 955, "user_id": 3739453, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/ad500b31d2ce042c4f2c5b6e361a129b?s=128&d=identicon&r=PG&f=1", "display_name": "Joe Morano", "link": "https://stackoverflow.com/users/3739453/joe-morano"}, "reply_to_user": {"reputation": 446, "user_id": 1397028, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/f3276d4e8c2092c45eb93f62263bc639?s=128&d=identicon&r=PG", "display_name": "rantingsonrails", "link": "https://stackoverflow.com/users/1397028/rantingsonrails"}, "edited": false, "score": 0, "creation_date": 1516073936, "post_id": 48269608, "comment_id": 83531080, "body": "@rantingsonrails No, it runs without issue on my local server, but I just checked my production server, and I&#39;m actually getting a &quot;Net::SMTPAuthenticationError: 535-5.7.8 Username and Password not accepted&quot; error, but my username and password are both definitely correct. I also tried to create another gmail and yahoo account, but those did the same thing."}, {"owner": {"reputation": 955, "user_id": 3739453, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/ad500b31d2ce042c4f2c5b6e361a129b?s=128&d=identicon&r=PG&f=1", "display_name": "Joe Morano", "link": "https://stackoverflow.com/users/3739453/joe-morano"}, "reply_to_user": {"reputation": 446, "user_id": 1397028, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/f3276d4e8c2092c45eb93f62263bc639?s=128&d=identicon&r=PG", "display_name": "rantingsonrails", "link": "https://stackoverflow.com/users/1397028/rantingsonrails"}, "edited": false, "score": 0, "creation_date": 1516074900, "post_id": 48269608, "comment_id": 83531264, "body": "@rantingsonrails I tried that, but I&#39;m still getting the same error. This is ridiculous. I&#39;m going to try the &#39;gmail&#39; gem."}, {"owner": {"reputation": 4690, "user_id": 1937435, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/YyN37.jpg?s=128&g=1", "display_name": "Josh Brody", "link": "https://stackoverflow.com/users/1937435/josh-brody"}, "edited": false, "score": 0, "creation_date": 1516076824, "post_id": 48269608, "comment_id": 83531677, "body": "Completely anecdotal: I&#39;ve gotten this error because of a bizarrely-setup HTTP proxy server before."}, {"owner": {"reputation": 955, "user_id": 3739453, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/ad500b31d2ce042c4f2c5b6e361a129b?s=128&d=identicon&r=PG&f=1", "display_name": "Joe Morano", "link": "https://stackoverflow.com/users/3739453/joe-morano"}, "reply_to_user": {"reputation": 4690, "user_id": 1937435, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/YyN37.jpg?s=128&g=1", "display_name": "Josh Brody", "link": "https://stackoverflow.com/users/1937435/josh-brody"}, "edited": false, "score": 0, "creation_date": 1516087412, "post_id": 48269608, "comment_id": 83535240, "body": "@JoshBrody Thank you so much for helping me this far. This is one of the most ridiculous bugs I&#39;ve ever encountered. I found a gem called &#39;gmail&#39; that works perfectly, so I&#39;m totally abandoning ActionMailer. It&#39;s way too much trouble."}], "answers": [{"tags": [], "owner": {"reputation": 26120, "user_id": 219883, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/c35b5b0f9e7cce48864f4f1545ead995?s=128&d=identicon&r=PG", "display_name": "Taryn East", "link": "https://stackoverflow.com/users/219883/taryn-east"}, "is_accepted": false, "score": 0, "last_activity_date": 1516055555, "creation_date": 1516055555, "answer_id": 48271627, "question_id": 48269608, "link": "https://stackoverflow.com/questions/48269608/mailer-returning-eoferror-from-server-but-not-from-console/48271627#48271627", "title": "Mailer returning EOFError from server but not from console", "body": "<p>According to the <a href=\"http://guides.rubyonrails.org/action_mailer_basics.html\" rel=\"nofollow noreferrer\">Rails Guide</a>, you should be passing a mail body via param, not manipulating <code>@body</code> eg:</p>\n\n<pre><code>  def contact(body)\n    mail(to: \"otheraddress@gmail.com\", subject: \"New\", body: body)\n  end\n</code></pre>\n\n<p>Note: not sure if this will solve it, but worth a try?</p>\n"}, {"tags": [], "owner": {"reputation": 955, "user_id": 3739453, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/ad500b31d2ce042c4f2c5b6e361a129b?s=128&d=identicon&r=PG&f=1", "display_name": "Joe Morano", "link": "https://stackoverflow.com/users/3739453/joe-morano"}, "is_accepted": false, "score": 0, "last_activity_date": 1516087494, "last_edit_date": 1516087494, "creation_date": 1516087076, "answer_id": 48275863, "question_id": 48269608, "link": "https://stackoverflow.com/questions/48269608/mailer-returning-eoferror-from-server-but-not-from-console/48275863#48275863", "title": "Mailer returning EOFError from server but not from console", "body": "<p>I don't think I even came close to solving this bug. Instead, I switched to using the 'gmail' gem, which I would recommend for everyone trying to build an email function. ActionMailer is way too fragile and unstable for my taste.</p>\n\n<p>This is all the code I need:</p>\n\n<pre><code>require 'gmail'\ngmail = Gmail.connect('youremail@ex.com', 'password')\nemail = gmail.compose do\n  to \"theiremail@ex.com\"\n  subject \"New Message\"\n  body \"Body\"\nend\ngmail.deliver(email)\n</code></pre>\n"}], "owner": {"reputation": 955, "user_id": 3739453, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/ad500b31d2ce042c4f2c5b6e361a129b?s=128&d=identicon&r=PG&f=1", "display_name": "Joe Morano", "link": "https://stackoverflow.com/users/3739453/joe-morano"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 127, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1516087494, "creation_date": 1516045053, "last_edit_date": 1516052359, "question_id": 48269608, "link": "https://stackoverflow.com/questions/48269608/mailer-returning-eoferror-from-server-but-not-from-console", "title": "Mailer returning EOFError from server but not from console", "body": "<p>I set up a mailer for my rails app. I swear it was working just a few days ago, but now I'm suddenly getting an EOFError when I try to send an email. I can send emails from my rails console, but I get the following minimalist error whenever I try it from my rails server:</p>\n\n<blockquote>\n  <p>EOFError: end of file reached</p>\n</blockquote>\n\n<p>If there were a problem with my configuration or some connectivity problem, I don't think it would work from console either, so I'm pretty confused. What could be the problem?</p>\n\n<p>It's worth noting that I used to get a \"suspicious sign-in attempt blocked\" message from the email address I'm using, but I no longer even get that message, only the EOFError. This is true for both development and production.</p>\n\n<p>I also tried changing my port to 465, but nothing changed.</p>\n\n<p><strong>Development.rb:</strong></p>\n\n<pre><code>  config.action_mailer.delivery_method = :smtp\n  config.action_mailer.default_url_options = { host: 'localhost', port: 3000 }\n  config.action_mailer.perform_deliveries = true\n  config.action_mailer.raise_delivery_errors = true\n  config.action_mailer.default :charset =&gt; \"utf-8\"\n  config.action_mailer.smtp_settings = {\n    address: 'smtp.gmail.com',\n    port: 587,\n    domain: 'gmail.com',\n    user_name: 'address@gmail.com',\n    password: 'Password',\n    authentication: 'plain',\n    enable_starttls_auto: true\n  }\n</code></pre>\n\n<p><strong>Production.rb:</strong></p>\n\n<pre><code>  config.action_mailer.delivery_method = :smtp\n  config.action_mailer.default_url_options = { :host =&gt; 'http://website.com' }\n  config.action_mailer.perform_deliveries = true\n  config.action_mailer.raise_delivery_errors = true\n  config.action_mailer.default :charset =&gt; \"utf-8\"\n  config.action_mailer.smtp_settings = {\n    address: 'smtp.gmail.com',\n    port: 587,\n    domain: 'gmail.com',\n    user_name: 'address@gmail.com',\n    password: 'Password',\n    authentication: 'plain',\n    enable_starttls_auto: true\n  }\n</code></pre>\n\n<p><strong>mailers/order_mailer.rb</strong></p>\n\n<pre><code>class OrderMailer &lt; ApplicationMailer\n  default from: 'address@gmail.com'\n\n  def contact(body)\n    @body = body\n    mail(to: \"otheraddress@gmail.com\", subject: \"New\")\n  end\nend\n</code></pre>\n\n<p><strong>To test, I enter the following into, respectively, my rails console and my binding.pry server console. The former sends an email successfuly, the latter gives an EOFError.</strong></p>\n\n<pre><code>OrderMailer.contact(\"body\").deliver\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby"], "answers": [{"comments": [{"owner": {"reputation": 452, "user_id": 2105198, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/d8d71b35e59634845c7b1b522824a832?s=128&d=identicon&r=PG", "display_name": "andrefurquin", "link": "https://stackoverflow.com/users/2105198/andrefurquin"}, "edited": false, "score": 0, "creation_date": 1516099616, "post_id": 48269593, "comment_id": 83542317, "body": "I didn&#39;t find this link that was already on Stack. It was very useful."}, {"owner": {"reputation": 2000, "user_id": 952740, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/d758ce8171d8e74b9c5f5a2e701f1b9b?s=128&d=identicon&r=PG", "display_name": "Nick M", "link": "https://stackoverflow.com/users/952740/nick-m"}, "edited": false, "score": 0, "creation_date": 1555054966, "post_id": 48269593, "comment_id": 97982748, "body": "Could you also explain how to deal with migrations and optimizing number of connections in the pool to avoid duplicates due to misconfigured models. Cheerios"}], "tags": [], "owner": {"reputation": 446, "user_id": 1397028, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/f3276d4e8c2092c45eb93f62263bc639?s=128&d=identicon&r=PG", "display_name": "rantingsonrails", "link": "https://stackoverflow.com/users/1397028/rantingsonrails"}, "is_accepted": true, "score": 4, "last_activity_date": 1516044996, "creation_date": 1516044996, "answer_id": 48269593, "question_id": 48269341, "link": "https://stackoverflow.com/questions/48269341/postgres-and-mongodb-together-in-the-same-project/48269593#48269593", "title": "Postgres and MongoDB together in the same project", "body": "<p>Yes. You can have multiple database.yml files, etc.</p>\n\n<p>There are a number of articles about getting multiple dbs set up in Rails.\n<a href=\"http://www.thegreatcodeadventure.com/managing-multiple-databases-in-a-single-rails-application/\" rel=\"nofollow noreferrer\">http://www.thegreatcodeadventure.com/managing-multiple-databases-in-a-single-rails-application/</a>\n<a href=\"http://www.ostinelli.net/setting-multiple-databases-rails-definitive-guide/\" rel=\"nofollow noreferrer\">http://www.ostinelli.net/setting-multiple-databases-rails-definitive-guide/</a></p>\n\n<p>In terms of using generators this post should help: <a href=\"https://stackoverflow.com/questions/32008513/rails-4-use-mysql-and-mongodb-together#answer-32032655\">Rails 4: Use MySql and MongoDB together</a></p>\n"}], "owner": {"reputation": 452, "user_id": 2105198, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/d8d71b35e59634845c7b1b522824a832?s=128&d=identicon&r=PG", "display_name": "andrefurquin", "link": "https://stackoverflow.com/users/2105198/andrefurquin"}, "delete_vote_count": 1, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 654, "favorite_count": 0, "closed_date": 1516075032, "accepted_answer_id": 48269593, "answer_count": 1, "score": 0, "last_activity_date": 1516044996, "creation_date": 1516043679, "question_id": 48269341, "link": "https://stackoverflow.com/questions/48269341/postgres-and-mongodb-together-in-the-same-project", "closed_reason": "Needs more focus", "title": "Postgres and MongoDB together in the same project", "body": "<p>Is it possible to have Postgresql and MongoDB in the same project ? \nI would like to be able to use generators for both as well.</p>\n"}, {"tags": ["ruby", "discogs-api"], "comments": [{"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1516056127, "post_id": 48269001, "comment_id": 83527164, "body": "Just want to point out your original code wouldn&#39;t run since it had some small issues (e.g. single quote delimited string containing a single quote character). Anyway, I&#39;m not sure, but I see you raised an issue on the github which is a good start"}, {"owner": {"reputation": 8645, "user_id": 368167, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c9596f533dcd61ecf75f150b0d9997b3?s=128&d=identicon&r=PG", "display_name": "Tamer Shlash", "link": "https://stackoverflow.com/users/368167/tamer-shlash"}, "edited": false, "score": 0, "creation_date": 1516056737, "post_id": 48269001, "comment_id": 83527356, "body": "The gem <code>discogs-wrapper</code> depends on 3 other gems: <code>hashie</code>, <code>httparty</code> and <code>oauth</code>, and that deprecation warning is most likely coming from one of these 3 gems (or their dependencies). It&#39;s just a deprecation warning, you don&#39;t need to worry about it (yet). Just make sure you&#39;e always using the most up to date version."}, {"owner": {"reputation": 79, "user_id": 9194880, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/491d3d73b2a80eb434e7034a36e04704?s=128&d=identicon&r=PG&f=1", "display_name": "rtuz2th", "link": "https://stackoverflow.com/users/9194880/rtuz2th"}, "edited": false, "score": 0, "creation_date": 1516104389, "post_id": 48269001, "comment_id": 83545190, "body": "Okay, thank you very much for your help! Wasn&#39;t shure if it was my mistake, so I wasn&#39;t shure about github."}], "owner": {"reputation": 79, "user_id": 9194880, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/491d3d73b2a80eb434e7034a36e04704?s=128&d=identicon&r=PG&f=1", "display_name": "rtuz2th", "link": "https://stackoverflow.com/users/9194880/rtuz2th"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 116, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1516055911, "creation_date": 1516041962, "last_edit_date": 1516055911, "question_id": 48269001, "link": "https://stackoverflow.com/questions/48269001/accessing-discogs-with-the-ruby-wrapper-the-key-count-has-been-replaced-with", "title": "Accessing Discogs with the Ruby Wrapper: The key &#39;count&#39; has been replaced with &#39;total&#39;", "body": "<p>I'm trying to write a short script that reads Label ID's of records from a CSV file, searches Discogs for them and returns all the info found, I'm using this ruby wrapper to access Discogs:</p>\n\n<p><a href=\"https://github.com/buntine/discogs\" rel=\"nofollow noreferrer\">https://github.com/buntine/discogs</a></p>\n\n<pre><code>require 'discogs-wrapper'\nrequire 'pp'\naw = Discogs::Wrapper.new(\"My_Application\", user_token: \"My_Token\")\npath=\"Path to my CSV File with Label ID's of Records\"\nseperator = ','\nvalues = File.open(path).map{|line| line.chop.split(seperator)}\ntemp_data=aw.search(values[0][0])[\"results\"][0]\npp aw.get_release(temp_data['id'])['status']\n</code></pre>\n\n<p>Got this as return:</p>\n\n<pre><code>[DEPRECATED]: The key 'count' has been replaced with 'total'. When     accessing, please use the latter. This message will be removed in the next major     release.\nW, [2018-01-15T19:29:26.463127 #12056] WARN -- : You are setting a key that     conflicts with a built-in method Hashie::Mash#count defined in Enumerable. This     can cause unexpected behavior when accessing the key as a property. You can     still access the key via the #[] method.\nW, [2018-01-15T19:29:26.467639 #12056] WARN -- : You are setting a key that     conflicts with a built-in method Hashie::Mash#type_ defined in Hashie::Mash.     This can cause unexpected behavior when accessing the key as a property. You can     still access the key via the #[] method.\nW, [2018-01-15T19:29:26.469200 #12056] WARN -- : You are setting a key that     conflicts with a built-in method Hashie::Mash#type_ defined in Hashie::Mash.     This can cause unexpected behavior when accessing the key as a property. You can still access the key via the #[] method.\nW, [2018-01-15T19:29:26.469642 #12056] WARN -- : You are setting a key that     conflicts with a built-in method Hashie::Mash#type_ defined in Hashie::Mash.     This can cause unexpected behavior when accessing the key as a property. You can     still access the key via the #[] method.\nW, [2018-01-15T19:29:26.470643 #12056] WARN -- : You are setting a key that     conflicts with a built-in method Hashie::Mash#type_ defined in Hashie::Mash.     This can cause unexpected behavior when accessing the key as a property. You can     still access the key via the #[] method.\nW, [2018-01-15T19:29:26.471159 #12056] WARN -- : You are setting a key that     conflicts with a built-in method Hashie::Mash#type_ defined in Hashie::Mash.     This can cause unexpected behavior when accessing the key as a property. You can     still access the key via the #[] method.\nW, [2018-01-15T19:29:26.471644 #12056] WARN -- : You are setting a key that     conflicts with a built-in method Hashie::Mash#type_ defined in Hashie::Mash.     This can cause unexpected behavior when accessing the key as a property. You can     still access the key via the #[] method.\nW, [2018-01-15T19:29:26.472192 #12056] WARN -- : You are setting a key that     conflicts with a built-in method Hashie::Mash#type_ defined in Hashie::Mash.     This can cause unexpected behavior when accessing the key as a property. You can     still access the key via the #[] method.\nW, [2018-01-15T19:29:26.472653 #12056] WARN -- : You are setting a key that     conflicts with a built-in method Hashie::Mash#type_ defined in Hashie::Mash.     This can cause unexpected behavior when accessing the key as a property. You can     still access the key via the #[] method.\nW, [2018-01-15T19:29:26.473155 #12056] WARN -- : You are setting a key that     conflicts with a built-in method Hashie::Mash#type_ defined in Hashie::Mash.     This can cause unexpected behavior when accessing the key as a property. You can     still access the key via the #[] method.\nW, [2018-01-15T19:29:26.473653 #12056] WARN -- : You are setting a key that     conflicts with a built-in method Hashie::Mash#type_ defined in Hashie::Mash.     This can cause unexpected behavior when accessing the key as a property. You can     still access the key via the #[] method.\n</code></pre>\n\n<p>To be honest I'm not really sure what this means to me, I'm pretty new to ruby, but as far as I can see I did not mess with Syntax or Discogs own structure, or did I just get something wrong? Thank you very much!\nGreetings, rtuz2th</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 681, "user_id": 775313, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/e0ff7bd30dab51a9382db7c3593ef9bb?s=128&d=identicon&r=PG", "display_name": "Tom Norton", "link": "https://stackoverflow.com/users/775313/tom-norton"}, "edited": false, "score": 0, "creation_date": 1516039647, "post_id": 48268416, "comment_id": 83520081, "body": "To clarify, our test database is used by a server on our test environment, so that end users can see what things look like before we deploy to production.  We don&#39;t want to use this test database for automated tests."}, {"owner": {"reputation": 18856, "user_id": 1359650, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/dffc4318ac93e728a26c8e8b51b4eb37?s=128&d=identicon&r=PG", "display_name": "jvillian", "link": "https://stackoverflow.com/users/1359650/jvillian"}, "edited": false, "score": 1, "creation_date": 1516039804, "post_id": 48268416, "comment_id": 83520145, "body": "That sounds more like a staging database."}, {"owner": {"reputation": 446, "user_id": 1397028, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/f3276d4e8c2092c45eb93f62263bc639?s=128&d=identicon&r=PG", "display_name": "rantingsonrails", "link": "https://stackoverflow.com/users/1397028/rantingsonrails"}, "edited": false, "score": 0, "creation_date": 1516042156, "post_id": 48268416, "comment_id": 83521239, "body": "Does this post help? <a href=\"https://stackoverflow.com/questions/433724/how-do-i-run-rails-integration-tests-without-dropping-db-contents\" title=\"how do i run rails integration tests without dropping db contents\">stackoverflow.com/questions/433724/&hellip;</a>"}, {"owner": {"reputation": 681, "user_id": 775313, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/e0ff7bd30dab51a9382db7c3593ef9bb?s=128&d=identicon&r=PG", "display_name": "Tom Norton", "link": "https://stackoverflow.com/users/775313/tom-norton"}, "reply_to_user": {"reputation": 18856, "user_id": 1359650, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/dffc4318ac93e728a26c8e8b51b4eb37?s=128&d=identicon&r=PG", "display_name": "jvillian", "link": "https://stackoverflow.com/users/1359650/jvillian"}, "edited": false, "score": 0, "creation_date": 1516113051, "post_id": 48268416, "comment_id": 83550916, "body": "@jvillian This is exactly it.  I guess we were confused because be call our staging environments test environments.  Is there a way to rename the <code>test</code> environment to <code>integration-test</code> so that future developers at our company don&#39;t get confused?"}, {"owner": {"reputation": 18856, "user_id": 1359650, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/dffc4318ac93e728a26c8e8b51b4eb37?s=128&d=identicon&r=PG", "display_name": "jvillian", "link": "https://stackoverflow.com/users/1359650/jvillian"}, "edited": false, "score": 0, "creation_date": 1516113455, "post_id": 48268416, "comment_id": 83551226, "body": "I don&#39;t know. But why don&#39;t you just update that comment with a longer comment explaining your company nomenclature?"}], "answers": [{"comments": [{"owner": {"reputation": 681, "user_id": 775313, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/e0ff7bd30dab51a9382db7c3593ef9bb?s=128&d=identicon&r=PG", "display_name": "Tom Norton", "link": "https://stackoverflow.com/users/775313/tom-norton"}, "edited": false, "score": 0, "creation_date": 1516044788, "post_id": 48269010, "comment_id": 83522485, "body": "We use TDD, but we prefer to keep our tests as decoupled from our database as possible."}], "tags": [], "owner": {"reputation": 5141, "user_id": 193980, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/aafa8848c4b764f080b1b31a51eab73d?s=128&d=identicon&r=PG", "display_name": "Phlip", "link": "https://stackoverflow.com/users/193980/phlip"}, "is_accepted": false, "score": 0, "last_activity_date": 1516041990, "creation_date": 1516041990, "answer_id": 48269010, "question_id": 48268416, "link": "https://stackoverflow.com/questions/48268416/how-do-we-configure-rails-to-not-clear-out-the-test-database/48269010#48269010", "title": "How do we configure rails to not clear out the test database?", "body": "<p>Move your \"test\" database settings to the \"development\" section of <code>database.yml</code>, and put a new database name in the \"test\" section.</p>\n\n<p>And use it, with lots of fixtures in your test fixture files. Test Driven Development is a great way to develop twice as fast with 1/10th of the bugs.</p>\n"}], "owner": {"reputation": 681, "user_id": 775313, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/e0ff7bd30dab51a9382db7c3593ef9bb?s=128&d=identicon&r=PG", "display_name": "Tom Norton", "link": "https://stackoverflow.com/users/775313/tom-norton"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 43, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1516041990, "creation_date": 1516039456, "question_id": 48268416, "link": "https://stackoverflow.com/questions/48268416/how-do-we-configure-rails-to-not-clear-out-the-test-database", "title": "How do we configure rails to not clear out the test database?", "body": "<p>We are trying to rebuild an app in rails.  So we already have all of our tables in place.  While configuring the <code>database.yml</code> file, we found the following comment:</p>\n\n<pre><code># Warning: The database defined as \"test\" will be erased and\n# re-generated from your development database when you run \"rake\".\n# Do not set this db to the same as development or production.\n</code></pre>\n\n<p>We don't want to wipe out our test database.  Is there a way to disable this option?</p>\n"}, {"tags": ["ruby", "oop"], "comments": [{"owner": {"reputation": 24179, "user_id": 1672429, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/0815eb7d4e9dd58022d51ba2011b9c0a?s=128&d=identicon&r=PG", "display_name": "Stefan Pochmann", "link": "https://stackoverflow.com/users/1672429/stefan-pochmann"}, "edited": false, "score": 2, "creation_date": 1516037376, "post_id": 48267855, "comment_id": 83518989, "body": "Where is <code>number</code> coming from? You don&#39;t give it to <code>get_subject</code> when you call it. Shouldn&#39;t you say <code>test_cal.get_calendar_items.get_subject(number)</code>? And then why not just do <code>test_cal.get_calendar_items[number].subject</code> instead? That&#39;s the normal way. And shorter."}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 1, "creation_date": 1516039045, "post_id": 48267855, "comment_id": 83519807, "body": "It&#39;s unidiomatic to prefix getters with <code>get_</code> in Ruby. Just call the method <code>calendar_items</code> or simply <code>items</code>."}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1516040310, "post_id": 48267855, "comment_id": 83520379, "body": "An array is a collection of <i>arbitrary</i> objects. It therefore doesn&#39;t make much sense to add a method that only works for specific elements (and you don&#39;t have to, as shown by Stefan Pochmann above). A better approach would be to create a custom class for your collection (e.g. <code>CalenderItemArray</code>) or to <code>extend</code> the array instances returned by <code>get_calendar_items</code>, so you only add the &quot;collection methods&quot; to those arrays."}], "answers": [{"comments": [{"owner": {"reputation": 446, "user_id": 1397028, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/f3276d4e8c2092c45eb93f62263bc639?s=128&d=identicon&r=PG", "display_name": "rantingsonrails", "link": "https://stackoverflow.com/users/1397028/rantingsonrails"}, "edited": false, "score": 0, "creation_date": 1516039111, "post_id": 48267957, "comment_id": 83519843, "body": "If taking this approach I would modify line 3 to puts self[number].subject if self[number].is_a?(&#39;CalendarItem&#39;)"}, {"owner": {"reputation": 18079, "user_id": 503402, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/873ad707fb34aac8fbdfbfec676e02e9?s=128&d=identicon&r=PG", "display_name": "Max", "link": "https://stackoverflow.com/users/503402/max"}, "reply_to_user": {"reputation": 446, "user_id": 1397028, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/f3276d4e8c2092c45eb93f62263bc639?s=128&d=identicon&r=PG", "display_name": "rantingsonrails", "link": "https://stackoverflow.com/users/1397028/rantingsonrails"}, "edited": false, "score": 0, "creation_date": 1516041963, "post_id": 48267957, "comment_id": 83521162, "body": "Replacing an error with <code>nil</code> does not fix the problem. Don&#39;t worry too much about it for now since you&#39;re just getting started, but there are much more idiomatic ways to do it."}], "tags": [], "owner": {"reputation": 18079, "user_id": 503402, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/873ad707fb34aac8fbdfbfec676e02e9?s=128&d=identicon&r=PG", "display_name": "Max", "link": "https://stackoverflow.com/users/503402/max"}, "is_accepted": false, "score": 3, "last_activity_date": 1516037224, "creation_date": 1516037224, "answer_id": 48267957, "question_id": 48267855, "link": "https://stackoverflow.com/questions/48267855/creating-a-method-to-be-called-on-an-array/48267957#48267957", "title": "Creating a method to be called on an array", "body": "<p>You have to define it in the Array class</p>\n\n<pre><code>class Array\n  def get_subject(number)\n      puts self[number].subject\n  end\nend\n</code></pre>\n\n<p>Since you're new to Ruby, you should know that this approach is not very good since it depends greatly on what objects are being stored in the array. For example I can do <code>[1].get_subject(0)</code> or <code>[\"foo\"].get_subject(0)</code> and I'll get an error because numbers and strings don't have a <code>subject</code> method.</p>\n"}, {"comments": [{"owner": {"reputation": 446, "user_id": 1397028, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/f3276d4e8c2092c45eb93f62263bc639?s=128&d=identicon&r=PG", "display_name": "rantingsonrails", "link": "https://stackoverflow.com/users/1397028/rantingsonrails"}, "reply_to_user": {"reputation": 24179, "user_id": 1672429, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/0815eb7d4e9dd58022d51ba2011b9c0a?s=128&d=identicon&r=PG", "display_name": "Stefan Pochmann", "link": "https://stackoverflow.com/users/1672429/stefan-pochmann"}, "edited": false, "score": 0, "creation_date": 1516040028, "post_id": 48268042, "comment_id": 83520249, "body": "@StefanPochmann I apologize, I did not catch that the post was not specific to Rails. Nice catch. Solution amended."}], "tags": [], "owner": {"reputation": 446, "user_id": 1397028, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/f3276d4e8c2092c45eb93f62263bc639?s=128&d=identicon&r=PG", "display_name": "rantingsonrails", "link": "https://stackoverflow.com/users/1397028/rantingsonrails"}, "is_accepted": false, "score": 0, "last_activity_date": 1516039984, "last_edit_date": 1516039984, "creation_date": 1516037662, "answer_id": 48268042, "question_id": 48267855, "link": "https://stackoverflow.com/questions/48267855/creating-a-method-to-be-called-on-an-array/48268042#48268042", "title": "Creating a method to be called on an array", "body": "<p>Typically you would only extend Array if it was a method that could be called on all arrays. Due to the subject being a prerequisite method on the array contents, I would think adding a class method like the following would be better.</p>\n\n<pre><code>class CalendarItem\n  def self.get_subject(arr, index=0)\n    arr[index].subject\n  end\nend\n</code></pre>\n\n<p>Reorganized code would read</p>\n\n<pre><code>CalendarItem.get_subject(test_cal.get_calendar_items)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 7605, "user_id": 584552, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/dc70f4a04726fada8b9db8a18ff40412?s=128&d=identicon&r=PG", "display_name": "mdesantis", "link": "https://stackoverflow.com/users/584552/mdesantis"}, "is_accepted": false, "score": 1, "last_activity_date": 1516038493, "last_edit_date": 1516038493, "creation_date": 1516037706, "answer_id": 48268055, "question_id": 48267855, "link": "https://stackoverflow.com/questions/48267855/creating-a-method-to-be-called-on-an-array/48268055#48268055", "title": "Creating a method to be called on an array", "body": "<p>Altough you could define an <code>Array</code> instance method in order to solve your issue, defining a method of a Core class is considered a bad practice for many reasons. Better is f.e. to define another method within <code>test_cal</code> class which fetches <code>subject</code> from <code>get_calendar_items</code>:</p>\n\n<pre><code>class TestCal # or whichever `test_cal` class is\n  def get_calendar_items_subjects\n    get_calendar_items.map &amp;:subject\n  end\nend\n</code></pre>\n\n<p>And then:</p>\n\n<pre><code>test_cal.get_calendar_items_subjects[number]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 367, "user_id": 7852372, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Ukz2Q.jpg?s=128&g=1", "display_name": "rhunal", "link": "https://stackoverflow.com/users/7852372/rhunal"}, "is_accepted": false, "score": 0, "last_activity_date": 1516041323, "creation_date": 1516041323, "answer_id": 48268863, "question_id": 48267855, "link": "https://stackoverflow.com/questions/48267855/creating-a-method-to-be-called-on-an-array/48268863#48268863", "title": "Creating a method to be called on an array", "body": "<pre><code>def get_subject(number)\n  puts self[number].subject\nend\n</code></pre>\n\n<p>Simply you can call your above method as below :</p>\n\n<pre><code>test_cal.get_calendar_items.each do |number|\n  get_subject(number)\nend\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 8893641, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cd88d549dd1f65d63d1431ed55a4d25c?s=128&d=identicon&r=PG&f=1", "display_name": "John Boswell", "link": "https://stackoverflow.com/users/8893641/john-boswell"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 68, "favorite_count": 0, "answer_count": 4, "score": -2, "last_activity_date": 1516081572, "creation_date": 1516036752, "last_edit_date": 1516081572, "question_id": 48267855, "link": "https://stackoverflow.com/questions/48267855/creating-a-method-to-be-called-on-an-array", "title": "Creating a method to be called on an array", "body": "<p><code>test_cal</code> is an instance of a custom class and <code>get_calendar_items</code> returns an array. I want to write a method to be called on an array like so:</p>\n\n<pre><code>test_cal.get_calendar_items.get_subject\n</code></pre>\n\n<p>Here is the method I wrote</p>\n\n<pre><code>def get_subject(number)\n    puts self[number].subject\nend\n</code></pre>\n\n<p>However, ruby gives an error:</p>\n\n<pre><code>undefined method get_subject for #&lt;Array:0x00 ...&gt; (NoMethodError)\n</code></pre>\n\n<p>How do I write a method that can be called on an array?</p>\n\n<p>I assumed each array is some kind of object.\nThe individual elements of the array are then accessed in the method via <code>number</code>.</p>\n"}, {"tags": ["ruby", "database-connection", "mysql2"], "comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1516036423, "post_id": 48267252, "comment_id": 83518588, "body": "What do you mean by that? What error do you get?"}, {"owner": {"reputation": 405, "user_id": 1947573, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/e203c0cfcdf3f8a3f44e7353dfade700?s=128&d=identicon&r=PG", "display_name": "RV_Dev", "link": "https://stackoverflow.com/users/1947573/rv-dev"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1516036521, "post_id": 48267252, "comment_id": 83518628, "body": "I mean that I provide host value to be &quot;ABCD&quot; but it is always taking 10.X.X.X Error I get is Access denied for user &#39;XYZ&#39;@&#39;10.X.X.X&#39; (using password: YES) (Mysql2::Error)"}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1516037620, "post_id": 48267252, "comment_id": 83519120, "body": "You&#39;re going to see your local address in the error there since that&#39;s where you&#39;re connecting <i>from</i>."}], "owner": {"reputation": 405, "user_id": 1947573, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/e203c0cfcdf3f8a3f44e7353dfade700?s=128&d=identicon&r=PG", "display_name": "RV_Dev", "link": "https://stackoverflow.com/users/1947573/rv-dev"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 31, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1516034479, "creation_date": 1516034479, "question_id": 48267252, "link": "https://stackoverflow.com/questions/48267252/mysql2-connection-in-ruby-always-take-my-ip-address-to-connect-and-ignores-the-v", "title": "Mysql2 connection in ruby always take my Ip address to connect and ignores the value in host", "body": "<p>I am trying to connect to my database through mysql2 in ruby with the following:</p>\n\n<pre><code>client = Mysql2::Client.new(:host =&gt; host, :username =&gt; username, :password =&gt; password, :database =&gt; database)\n</code></pre>\n\n<p>But I see that my host value no matter what I give is replaced by \"my local ip address\"</p>\n\n<p>Can someone help me with this?</p>\n\n<p>Thanks,\nRv</p>\n"}]