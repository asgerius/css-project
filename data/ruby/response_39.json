[{"tags": ["ruby-on-rails", "ruby", "installation", "bundle"], "comments": [{"owner": {"reputation": 9234, "user_id": 4629810, "user_type": "registered", "accept_rate": 88, "profile_image": "https://lh4.googleusercontent.com/-gcabh64Le4c/AAAAAAAAAAI/AAAAAAAAAQ8/GquVsg_lVoA/photo.jpg?sz=128", "display_name": "Mircea", "link": "https://stackoverflow.com/users/4629810/mircea"}, "edited": false, "score": 0, "creation_date": 1444262193, "post_id": 33004260, "comment_id": 53833443, "body": "do &quot;which ruby&quot; and &quot;which rails&quot; and paste the output in the question"}, {"owner": {"reputation": 21, "user_id": 3898486, "user_type": "registered", "profile_image": "https://graph.facebook.com/100007078893166/picture?type=large", "display_name": "Dastan Aryngazy", "link": "https://stackoverflow.com/users/3898486/dastan-aryngazy"}, "reply_to_user": {"reputation": 9234, "user_id": 4629810, "user_type": "registered", "accept_rate": 88, "profile_image": "https://lh4.googleusercontent.com/-gcabh64Le4c/AAAAAAAAAAI/AAAAAAAAAQ8/GquVsg_lVoA/photo.jpg?sz=128", "display_name": "Mircea", "link": "https://stackoverflow.com/users/4629810/mircea"}, "edited": false, "score": 0, "creation_date": 1444262702, "post_id": 33004260, "comment_id": 53833602, "body": "/Users/user/.rbenv/shims/ruby, /Users/user/.rbenv/shims/rails @Mircea"}, {"owner": {"reputation": 9234, "user_id": 4629810, "user_type": "registered", "accept_rate": 88, "profile_image": "https://lh4.googleusercontent.com/-gcabh64Le4c/AAAAAAAAAAI/AAAAAAAAAQ8/GquVsg_lVoA/photo.jpg?sz=128", "display_name": "Mircea", "link": "https://stackoverflow.com/users/4629810/mircea"}, "edited": false, "score": 0, "creation_date": 1444269513, "post_id": 33004260, "comment_id": 53835418, "body": "did you rehash after installing the rails gem?"}, {"owner": {"reputation": 21, "user_id": 3898486, "user_type": "registered", "profile_image": "https://graph.facebook.com/100007078893166/picture?type=large", "display_name": "Dastan Aryngazy", "link": "https://stackoverflow.com/users/3898486/dastan-aryngazy"}, "reply_to_user": {"reputation": 9234, "user_id": 4629810, "user_type": "registered", "accept_rate": 88, "profile_image": "https://lh4.googleusercontent.com/-gcabh64Le4c/AAAAAAAAAAI/AAAAAAAAAQ8/GquVsg_lVoA/photo.jpg?sz=128", "display_name": "Mircea", "link": "https://stackoverflow.com/users/4629810/mircea"}, "edited": false, "score": 0, "creation_date": 1444318292, "post_id": 33004260, "comment_id": 53863083, "body": "yes, I solved it by hard reinstalling all environment dependencies @Mircea"}], "answers": [{"tags": [], "owner": {"reputation": 22836, "user_id": 152786, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/581hP.jpg?s=128&g=1", "display_name": "smathy", "link": "https://stackoverflow.com/users/152786/smathy"}, "is_accepted": true, "score": 0, "last_activity_date": 1444263121, "creation_date": 1444263121, "answer_id": 33004516, "question_id": 33004260, "link": "https://stackoverflow.com/questions/33004260/i-have-trouble-every-bundle-install-with-my-rails-how-to-fix-it/33004516#33004516", "title": "I have trouble every bundle install with my rails. How to fix it", "body": "<p>Seems like a rehash failure, run: <code>rbenv rehash</code></p>\n\n<p>If that works, <a href=\"https://github.com/sstephenson/rbenv#understanding-shims\" rel=\"nofollow\">see here for why.</a></p>\n"}], "owner": {"reputation": 21, "user_id": 3898486, "user_type": "registered", "profile_image": "https://graph.facebook.com/100007078893166/picture?type=large", "display_name": "Dastan Aryngazy", "link": "https://stackoverflow.com/users/3898486/dastan-aryngazy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 55, "favorite_count": 0, "accepted_answer_id": 33004516, "answer_count": 1, "score": 1, "last_activity_date": 1444263121, "creation_date": 1444261518, "question_id": 33004260, "link": "https://stackoverflow.com/questions/33004260/i-have-trouble-every-bundle-install-with-my-rails-how-to-fix-it", "title": "I have trouble every bundle install with my rails. How to fix it", "body": "<p>With guide on gorails I set up homebrew, rbenv and rails. But then when I work with other project from github and when I do bundle install It doesn't work. </p>\n\n<p>Here is the error, I am looking for the answer but still don't find</p>\n\n<pre><code>/Users/user/.rbenv/versions/2.2.2/bin/rails:23:in `load': cannot load such file -- /Users/user/.rbenv/versions/2.2.2/lib/ruby/gems/2.2.0/gems/rails-4.2.4/bin/rails (LoadError)\n    from /Users/user/.rbenv/versions/2.2.2/bin/rails:23:in `&lt;main&gt;'\n</code></pre>\n\n<p>Thanks</p>\n"}, {"tags": ["ruby", "regex"], "comments": [{"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1444261494, "post_id": 33004121, "comment_id": 53833284, "body": "What is your question?"}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1444262168, "post_id": 33004121, "comment_id": 53833438, "body": "Why the rush to select an answer?"}], "answers": [{"comments": [{"owner": {"reputation": 15386, "user_id": 92679, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/oJLsX.jpg?s=128&g=1", "display_name": "Satchel", "link": "https://stackoverflow.com/users/92679/satchel"}, "edited": false, "score": 0, "creation_date": 1444260851, "post_id": 33004154, "comment_id": 53833135, "body": "Do I need a <code>&#47;m</code>?  Didn&#39;t work without one, and if so, why?  @outbound_text.gsub!(/#{open_tag}(.*)#{close_tag}/m, &#39;&#39;)"}, {"owner": {"reputation": 41846, "user_id": 926143, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/3396173c3d22988be1a0732d184902aa?s=128&d=identicon&r=PG", "display_name": "7stud", "link": "https://stackoverflow.com/users/926143/7stud"}, "reply_to_user": {"reputation": 15386, "user_id": 92679, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/oJLsX.jpg?s=128&g=1", "display_name": "Satchel", "link": "https://stackoverflow.com/users/92679/satchel"}, "edited": false, "score": 0, "creation_date": 1444260904, "post_id": 33004154, "comment_id": 53833150, "body": "@Angela, In a regex <code>.</code> will not match a newline(\\n).  Yes, that is a stupid default.  So, as a matter of course the <code>m</code> flag should always be used.  And the <code>x</code> flag should also be used as a matter of course--that way you can insert spaces into your regex to make it more readable, yet not have the spaces be part of the pattern."}, {"owner": {"reputation": 15386, "user_id": 92679, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/oJLsX.jpg?s=128&g=1", "display_name": "Satchel", "link": "https://stackoverflow.com/users/92679/satchel"}, "edited": false, "score": 0, "creation_date": 1444261616, "post_id": 33004154, "comment_id": 53833315, "body": "I see, I am not familiar with the x flag, actually.  Would it be <code>&#47;mx</code>?"}, {"owner": {"reputation": 15386, "user_id": 92679, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/oJLsX.jpg?s=128&g=1", "display_name": "Satchel", "link": "https://stackoverflow.com/users/92679/satchel"}, "edited": false, "score": 1, "creation_date": 1444261652, "post_id": 33004154, "comment_id": 53833323, "body": "Also quick question&gt;  Suppose I have TWO <code>&lt;CREATE-EVENT&gt;</code> tags, is there a way to choose between deleting one and deleting both with a given statement?"}, {"owner": {"reputation": 41846, "user_id": 926143, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/3396173c3d22988be1a0732d184902aa?s=128&d=identicon&r=PG", "display_name": "7stud", "link": "https://stackoverflow.com/users/926143/7stud"}, "reply_to_user": {"reputation": 15386, "user_id": 92679, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/oJLsX.jpg?s=128&g=1", "display_name": "Satchel", "link": "https://stackoverflow.com/users/92679/satchel"}, "edited": false, "score": 0, "creation_date": 1444262128, "post_id": 33004154, "comment_id": 53833429, "body": "@Angela, Both <code>&#47;xm</code> and  <code>&#47;mx</code> will work.   The String class has a method named <code>sub()</code> which will only change the first match.  gsub() stands for <i>global</i> sub, which looks for all matches."}, {"owner": {"reputation": 41846, "user_id": 926143, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/3396173c3d22988be1a0732d184902aa?s=128&d=identicon&r=PG", "display_name": "7stud", "link": "https://stackoverflow.com/users/926143/7stud"}, "reply_to_user": {"reputation": 15386, "user_id": 92679, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/oJLsX.jpg?s=128&g=1", "display_name": "Satchel", "link": "https://stackoverflow.com/users/92679/satchel"}, "edited": false, "score": 1, "creation_date": 1444263175, "post_id": 33004154, "comment_id": 53833750, "body": "@Angela, But as TinMan mentioned, Nokogiri is the way to parse html and xml.  If you learn a little Xpath, you can quickly locate the 1st, 2nd, 3rd, or last <code>&lt;CREATE-EVENT&gt;</code> tag and remove it."}, {"owner": {"reputation": 15386, "user_id": 92679, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/oJLsX.jpg?s=128&g=1", "display_name": "Satchel", "link": "https://stackoverflow.com/users/92679/satchel"}, "edited": false, "score": 0, "creation_date": 1444338077, "post_id": 33004154, "comment_id": 53874081, "body": "I see. Let me go back and review in more detail what @tinman wrote."}], "tags": [], "owner": {"reputation": 41846, "user_id": 926143, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/3396173c3d22988be1a0732d184902aa?s=128&d=identicon&r=PG", "display_name": "7stud", "link": "https://stackoverflow.com/users/926143/7stud"}, "is_accepted": true, "score": 4, "last_activity_date": 1444263529, "last_edit_date": 1444263529, "creation_date": 1444260692, "answer_id": 33004154, "question_id": 33004121, "link": "https://stackoverflow.com/questions/33004121/deleting-between-tags-and-using-variables-in-regex-in-gsub/33004154#33004154", "title": "Deleting between tags and using variables in regex in `gsub`", "body": "<p>The following is what variable substitution into a regex looks like:</p>\n\n<pre><code>/#{open_tag}.*#{close_tag}/, ...\n</code></pre>\n\n<p>Pretend that the opening <code>/</code> and closing <code>/</code> of the regex are double quote marks and have at it.  </p>\n\n<p>Here's a full example:</p>\n\n<pre><code>tag = 'CREATE-EVENT'\n\nopen_tag = \"&lt;#{tag}&gt;\"\nclose_tag = \"&lt;/#{tag}&gt;\"\nany_text = \".*\"\n\nhtml_tag = /#{open_tag} \n            #{any_text}\n            #{close_tag}/xm\n\n@outbound_text = %q{\nhello\n &lt;CREATE-EVENT&gt;\n        &lt;COLLECTION&gt;PAM&lt;/COLLECTION&gt;\n        &lt;EVENT-TYPE&gt;\n&lt;/CREATE-EVENT&gt;\nworld\n}\n\np @outbound_text.gsub!(html_tag, '')\n\n--output:--\n\"\\nhello\\n \\nworld\\n\"\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 15386, "user_id": 92679, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/oJLsX.jpg?s=128&g=1", "display_name": "Satchel", "link": "https://stackoverflow.com/users/92679/satchel"}, "edited": false, "score": 0, "creation_date": 1444337882, "post_id": 33004307, "comment_id": 53873968, "body": "Thanks. The content isn&#39;t true XML. It uses xml like tags but for readability often has extra and unwanted tabs and end of lines. So I thought that would break any real xml parsing."}, {"owner": {"reputation": 15386, "user_id": 92679, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/oJLsX.jpg?s=128&g=1", "display_name": "Satchel", "link": "https://stackoverflow.com/users/92679/satchel"}, "edited": false, "score": 0, "creation_date": 1444337998, "post_id": 33004307, "comment_id": 53874030, "body": "Technically the actual document is xml. But I am only working with one mode which passes a lot of extra spaces. If there were a way to make it fit the xml structure I would do it this way you suggest. However I also have a scenario where there may be more than one of the same tags. Eg more than one create event tag. I assumed that would break a xml parser. But am reading more to understand if that&#39;s the case."}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "reply_to_user": {"reputation": 15386, "user_id": 92679, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/oJLsX.jpg?s=128&g=1", "display_name": "Satchel", "link": "https://stackoverflow.com/users/92679/satchel"}, "edited": false, "score": 0, "creation_date": 1444338015, "post_id": 33004307, "comment_id": 53874041, "body": "Tabs and line-ends are considered white space and are ignored when between tags for the most part. That&#39;s true in XML and HTML. Your example data definitely looks like regular XML. You really need to supply a more accurate example of what you&#39;re dealing with. It doesn&#39;t sound like it&#39;s anything special or  difficult to handle."}, {"owner": {"reputation": 41846, "user_id": 926143, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/3396173c3d22988be1a0732d184902aa?s=128&d=identicon&r=PG", "display_name": "7stud", "link": "https://stackoverflow.com/users/926143/7stud"}, "reply_to_user": {"reputation": 15386, "user_id": 92679, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/oJLsX.jpg?s=128&g=1", "display_name": "Satchel", "link": "https://stackoverflow.com/users/92679/satchel"}, "edited": false, "score": 0, "creation_date": 1444365778, "post_id": 33004307, "comment_id": 53882242, "body": "@Angela, <i>But I am only working with one mode which passes a lot of extra spaces.</i>--Most(all?) xml parsers have a configuration setting that will ignore the newline and tabs between a parent element and a child element, i.e. the whitespace used to make xml look pretty. But if you use Xpath that isn&#39;t even necessary: you can obtain a collection of all the similarly named elements and pick and choose whichever ones you want--without having to worry about newlines being items in the collection."}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "reply_to_user": {"reputation": 41846, "user_id": 926143, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/3396173c3d22988be1a0732d184902aa?s=128&d=identicon&r=PG", "display_name": "7stud", "link": "https://stackoverflow.com/users/926143/7stud"}, "edited": false, "score": 0, "creation_date": 1444393078, "post_id": 33004307, "comment_id": 53896797, "body": "As @7stud said, white space is generally there to make documents pretty for our eyes. Both CSS and XPath allow us to focus on the tags and gloss over the tabs and spaces and line-ends. When dealing with high speed transfer of big XML or HTML, we turn off the pretty-XML generation to more efficiently use the network, and the parser and selectors continue to work as we expect even without the &quot;pretty&quot;. That&#39;s the beauty of using a parser vs. trying to search a text document where white space can be extremely significant."}], "tags": [], "owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "is_accepted": false, "score": 1, "last_activity_date": 1444263404, "last_edit_date": 1495539889, "creation_date": 1444261809, "answer_id": 33004307, "question_id": 33004121, "link": "https://stackoverflow.com/questions/33004121/deleting-between-tags-and-using-variables-in-regex-in-gsub/33004307#33004307", "title": "Deleting between tags and using variables in regex in `gsub`", "body": "<p>When dealing with XML or HTML, don't use regular expressions unless the markup is extremely trivial and you own the task of generating it. Odds are very good that your code will break with a small change to the incoming data. Read \"<a href=\"https://stackoverflow.com/questions/80357\">Match All Occurrences of a Regex</a>\", which tries to explain the issues of using patterns to parse XML and HTML.</p>\n\n<p>Instead, use something more resiliant, a parser. Here's how I'd do it:</p>\n\n<pre><code>xml = &lt;&lt;EOT\n&lt;CREATE-EVENT&gt;\n  &lt;COLLECTION&gt;PAM&lt;/COLLECTION&gt;\n  &lt;EVENT-TYPE&gt;survey_answer&lt;/EVENT-TYPE&gt;\n  &lt;JSON-STRING&gt;\n    {\n    question1:done,\n    question2:done,\n    question3:done,\n    question4:done,\n    question5:done,\n    question6:done\n    }\n  &lt;/JSON-STRING&gt;\n&lt;/CREATE-EVENT&gt;\n&lt;EMAIL&gt;\n  &lt;ADDRESS&gt;bot_client_id&lt;/ADDRESS&gt;\n  &lt;SUBJECT&gt;PAM responses for Wednesday October 07&lt;/SUBJECT&gt;\n  &lt;BODY/&gt;\n&lt;/EMAIL&gt;\nEOT\n\nrequire 'nokogiri'\ndoc = Nokogiri::XML::DocumentFragment.parse('&lt;root&gt;' + xml + '&lt;/root&gt;')\n</code></pre>\n\n<p>Your XML example isn't syntactically correct because it's missing a root node and has unterminated <code>&lt;EMAIL&gt;</code> nodes so I added <code>&lt;/EMAIL&gt;</code> and wrap <code>xml</code> with <code>&lt;root&gt;</code> when parsing it. In real life you'd pass the entire XML string, assuming it is valid XML using:</p>\n\n<pre><code>doc = Nokogiri::XML(xml)\n</code></pre>\n\n<p>Once it's parsed into a DOM, I can use:</p>\n\n<pre><code>doc.at('CREATE-EVENT').children.remove\n</code></pre>\n\n<p>to remove the child nodes of <code>&lt;CREATE-EVENT&gt;</code>, resulting in:</p>\n\n<pre><code>puts doc.to_xml\n# &gt;&gt; &lt;root&gt;&lt;CREATE-EVENT/&gt;\n# &gt;&gt; &lt;EMAIL&gt;\n# &gt;&gt;   &lt;ADDRESS&gt;bot_client_id&lt;/ADDRESS&gt;\n# &gt;&gt;   &lt;SUBJECT&gt;PAM responses for Wednesday October 07&lt;/SUBJECT&gt;\n# &gt;&gt;   &lt;BODY/&gt;\n# &gt;&gt; &lt;/EMAIL&gt;\n# &gt;&gt; &lt;/root&gt;\n</code></pre>\n\n<p>At this point <code>&lt;CREATE-EVENT/&gt;</code> is now empty.</p>\n\n<p>If you want to substitute something into that node it's equally easy:</p>\n\n<pre><code>word = 'bar'\ndoc.at('CREATE-EVENT').children = \"&lt;foo&gt;#{ word }&lt;/foo&gt;\"\n</code></pre>\n\n<p>which results in:</p>\n\n<pre><code># &gt;&gt; &lt;root&gt;&lt;CREATE-EVENT&gt;&lt;foo&gt;bar&lt;/foo&gt;&lt;/CREATE-EVENT&gt;\n# &gt;&gt; &lt;EMAIL&gt;\n# &gt;&gt;   &lt;ADDRESS&gt;bot_client_id&lt;/ADDRESS&gt;\n# &gt;&gt;   &lt;SUBJECT&gt;PAM responses for Wednesday October 07&lt;/SUBJECT&gt;\n# &gt;&gt;   &lt;BODY/&gt;\n# &gt;&gt; &lt;/EMAIL&gt;\n# &gt;&gt; &lt;/root&gt;\n</code></pre>\n\n<p>There are very few times I'd ever use <code>sub</code> or <code>gsub</code> to change HTML or XML. Instead I'd grab a parser first. It might not be as fast, but it's a lot more robust solution, which translates to being able to sleep through the night a lot more often.</p>\n\n<p>You can read more about using <a href=\"http://nokogiri.org\" rel=\"nofollow noreferrer\">Nokogiri</a> by searching Stack Overflow (<a href=\"/questions/tagged/nokogiri\" class=\"post-tag\" title=\"show questions tagged &#39;nokogiri&#39;\" rel=\"tag\">nokogiri</a>), or the internet.</p>\n"}, {"comments": [{"owner": {"reputation": 41846, "user_id": 926143, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/3396173c3d22988be1a0732d184902aa?s=128&d=identicon&r=PG", "display_name": "7stud", "link": "https://stackoverflow.com/users/926143/7stud"}, "edited": false, "score": 0, "creation_date": 1444262342, "post_id": 33004323, "comment_id": 53833495, "body": "<i>The problem is that you forgot /m (multiline) at the end of the regex.</i>--Look again!"}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "reply_to_user": {"reputation": 41846, "user_id": 926143, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/3396173c3d22988be1a0732d184902aa?s=128&d=identicon&r=PG", "display_name": "7stud", "link": "https://stackoverflow.com/users/926143/7stud"}, "edited": false, "score": 0, "creation_date": 1444262458, "post_id": 33004323, "comment_id": 53833532, "body": "@7stud, I don&#39;t follow. Look again at what?"}, {"owner": {"reputation": 41846, "user_id": 926143, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/3396173c3d22988be1a0732d184902aa?s=128&d=identicon&r=PG", "display_name": "7stud", "link": "https://stackoverflow.com/users/926143/7stud"}, "edited": false, "score": 0, "creation_date": 1444262614, "post_id": 33004323, "comment_id": 53833575, "body": "The regex had more problems than not using /m.  I made a change to my answer, so  fell free to lobby for the points."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "reply_to_user": {"reputation": 41846, "user_id": 926143, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/3396173c3d22988be1a0732d184902aa?s=128&d=identicon&r=PG", "display_name": "7stud", "link": "https://stackoverflow.com/users/926143/7stud"}, "edited": false, "score": 0, "creation_date": 1444264088, "post_id": 33004323, "comment_id": 53833985, "body": "@7stud, yes, I forgot to mention that the hyphens need to be escaped, as I&#39;ve done, but other than that, adding <code>&#47;m</code> is all that&#39;s required. Your answer, which I upvoted, is better, however."}, {"owner": {"reputation": 41846, "user_id": 926143, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/3396173c3d22988be1a0732d184902aa?s=128&d=identicon&r=PG", "display_name": "7stud", "link": "https://stackoverflow.com/users/926143/7stud"}, "edited": false, "score": 0, "creation_date": 1444271007, "post_id": 33004323, "comment_id": 53835779, "body": "Outside of a character class, a hyphen is not a special regex character, e.g. the regex <code>&#47;a-c&#47;</code> will not match the strings <code>a</code> or <code>b</code> or <code>c</code>--it will match only the string <code>a-c</code>.  Anyway...onwards."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "reply_to_user": {"reputation": 41846, "user_id": 926143, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/3396173c3d22988be1a0732d184902aa?s=128&d=identicon&r=PG", "display_name": "7stud", "link": "https://stackoverflow.com/users/926143/7stud"}, "edited": false, "score": 0, "creation_date": 1444271317, "post_id": 33004323, "comment_id": 53835854, "body": "@7stud, ah yes, I got mixed up on that. Thanks, Will fix."}], "tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": false, "score": -1, "last_activity_date": 1444271335, "last_edit_date": 1444271335, "creation_date": 1444261892, "answer_id": 33004323, "question_id": 33004121, "link": "https://stackoverflow.com/questions/33004121/deleting-between-tags-and-using-variables-in-regex-in-gsub/33004323#33004323", "title": "Deleting between tags and using variables in regex in `gsub`", "body": "<pre><code>@outbound_text.gsub(/&lt;CREATE-EVENT&gt;(.*)&lt;\\/CREATE-EVENT&gt;/m, '\\1')\n  #=&gt; \"\\n\\t\\t\\t\\t&lt;COLLECTION&gt;PAM&lt;/COLLECTION&gt;\\n\\t\\t\\t\\t&lt;EVENT-TYPE&gt;\n  #    survey_answer&lt;/EVENT-TYPE&gt;\\n\\t\\t\\t\\t&lt;JSON-STRING&gt;\\n\\t\\t\\t\\t\\t\n  #    {\\n\\t\\t\\t\\t\\t question1:done,\\n\\t\\t\\t\\t\\t question2:done,\n  #    \\n\\t\\t\\t\\t\\t question3:done,\\n\\t\\t\\t\\t\\t question4:done,\n  #    \\n\\t\\t\\t\\t\\t question5:done,\\n\\t\\t\\t\\t\\t question6:done\n  #    \\n\\t\\t\\t\\t\\t}\\n\\t\\t\\t\\t&lt;/JSON-STRING&gt;\\n\\t\\t\\t\\n\\n\\t\\t\\t\\n      &lt;EMAIL&gt;\\n\n  #        &lt;ADDRESS&gt;bot_client_id&lt;/ADDRESS&gt;\\n        &lt;SUBJECT&gt;PAM\n  #    responses for Wednesday October 07&lt;/SUBJECT&gt;\\n        &lt;BODY&gt;\\nHi, there\" \n</code></pre>\n\n<p>I've broken the return string so it can be seen more easily. The problem is that you forgot <code>/m</code> (multiline) at the end of the regex.</p>\n"}], "owner": {"reputation": 15386, "user_id": 92679, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/oJLsX.jpg?s=128&g=1", "display_name": "Satchel", "link": "https://stackoverflow.com/users/92679/satchel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 165, "favorite_count": 0, "accepted_answer_id": 33004154, "answer_count": 3, "score": -1, "last_activity_date": 1444271335, "creation_date": 1444260524, "last_edit_date": 1444263514, "question_id": 33004121, "link": "https://stackoverflow.com/questions/33004121/deleting-between-tags-and-using-variables-in-regex-in-gsub", "title": "Deleting between tags and using variables in regex in `gsub`", "body": "<p>My <code>@outbound_text</code> looks something like this:</p>\n\n<pre><code>&lt;CREATE-EVENT&gt;\\n\\t\\t\\t\\t&lt;COLLECTION&gt;PAM&lt;/COLLECTION&gt;\\n\\t\\t\\t\\t&lt;EVENT-TYPE&gt;survey_answer&lt;/EVENT-TYPE&gt;\\n\\t\\t\\t\\t&lt;JSON-STRING&gt;\\n\\t\\t\\t\\t\\t{\\n\\t\\t\\t\\t\\t question1:done,\\n\\t\\t\\t\\t\\t question2:done,\\n\\t\\t\\t\\t\\t question3:done,\\n\\t\\t\\t\\t\\t question4:done,\\n\\t\\t\\t\\t\\t question5:done,\\n\\t\\t\\t\\t\\t question6:done\\n\\t\\t\\t\\t\\t}\\n\\t\\t\\t\\t&lt;/JSON-STRING&gt;\\n\\t\\t\\t&lt;/CREATE-EVENT&gt;\\n\\n\\t\\t\\t\\n      &lt;EMAIL&gt;\\n        &lt;ADDRESS&gt;bot_client_id&lt;/ADDRESS&gt;\\n        &lt;SUBJECT&gt;PAM responses for Wednesday October 07&lt;/SUBJECT&gt;\\n        &lt;BODY&gt;\\nHi, there\n</code></pre>\n\n<p>I want to remove everything between <code>&lt;CREATE-EVENT&gt;</code> and <code>&lt;/CREATE-EVENT&gt;</code>.</p>\n\n<p>I tried the following, where <code>tag</code> is<code>\"CREATE-EVENT\"</code>:</p>\n\n<pre><code>open_tag = \"&lt;\" + tag + \"&gt;\"\nclose_tag = \"&lt;/\" + tag + \"&gt;\"\n@outbound_text.gsub!(/#{open_tag}/(.*)\\/#{close_tag}/, '')\n</code></pre>\n"}, {"tags": ["html", "ruby", "selenium", "selenium-webdriver"], "answers": [{"comments": [{"owner": {"reputation": 5470, "user_id": 2568849, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/UxtGh.png?s=128&g=1", "display_name": "Mesut GUNES", "link": "https://stackoverflow.com/users/2568849/mesut-gunes"}, "reply_to_user": {"reputation": 411841, "user_id": 771848, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/2DTBv.jpg?s=128&g=1", "display_name": "alecxe", "link": "https://stackoverflow.com/users/771848/alecxe"}, "edited": false, "score": 0, "creation_date": 1444266930, "post_id": 33004755, "comment_id": 53834776, "body": "if the element is not in the dom which means if script reach the element before loading it, there is a problem for stale element especially in chrome driver. better idea to add some waiting code. thanks @alecxe"}, {"owner": {"reputation": 21, "user_id": 5420703, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-N8lBztq_gx4/AAAAAAAAAAI/AAAAAAAAADA/ofFjhprDWEo/photo.jpg?sz=128", "display_name": "Israel Bautista", "link": "https://stackoverflow.com/users/5420703/israel-bautista"}, "edited": false, "score": 0, "creation_date": 1444316506, "post_id": 33004755, "comment_id": 53861862, "body": "I think alecxe is right because I got this error: Failure/Error: elements[i].click()      Selenium::WebDriver::Error::StaleElementReferenceError:        Element not found in the cache - perhaps the page has changed since it was looked up"}, {"owner": {"reputation": 21, "user_id": 5420703, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-N8lBztq_gx4/AAAAAAAAAAI/AAAAAAAAADA/ofFjhprDWEo/photo.jpg?sz=128", "display_name": "Israel Bautista", "link": "https://stackoverflow.com/users/5420703/israel-bautista"}, "edited": false, "score": 0, "creation_date": 1444318737, "post_id": 33004755, "comment_id": 53863387, "body": "I did, but I failed to mentioned that inside each li there is an a tag. so I modifed the code to this: <code>elements = @driver.find_elements(css: &quot;.account-item&gt;a&quot;)</code>"}, {"owner": {"reputation": 21, "user_id": 5420703, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-N8lBztq_gx4/AAAAAAAAAAI/AAAAAAAAADA/ofFjhprDWEo/photo.jpg?sz=128", "display_name": "Israel Bautista", "link": "https://stackoverflow.com/users/5420703/israel-bautista"}, "edited": false, "score": 0, "creation_date": 1444318814, "post_id": 33004755, "comment_id": 53863441, "body": "<code>for i in 0..elements.size  \t\telements[i].click()  \t\t# wait until the element loads  \t\t\twait.until { @driver.find_element(css: &quot;.account-list &gt; li:nth-child(#{i})&gt;a&quot;)}</code>"}, {"owner": {"reputation": 5470, "user_id": 2568849, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/UxtGh.png?s=128&g=1", "display_name": "Mesut GUNES", "link": "https://stackoverflow.com/users/2568849/mesut-gunes"}, "reply_to_user": {"reputation": 21, "user_id": 5420703, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-N8lBztq_gx4/AAAAAAAAAAI/AAAAAAAAADA/ofFjhprDWEo/photo.jpg?sz=128", "display_name": "Israel Bautista", "link": "https://stackoverflow.com/users/5420703/israel-bautista"}, "edited": false, "score": 0, "creation_date": 1444319240, "post_id": 33004755, "comment_id": 53863698, "body": "@IsraelBautista it should wait before click"}, {"owner": {"reputation": 21, "user_id": 5420703, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-N8lBztq_gx4/AAAAAAAAAAI/AAAAAAAAADA/ofFjhprDWEo/photo.jpg?sz=128", "display_name": "Israel Bautista", "link": "https://stackoverflow.com/users/5420703/israel-bautista"}, "edited": false, "score": 0, "creation_date": 1444319707, "post_id": 33004755, "comment_id": 53863971, "body": "how would you select the next &lt;a&gt; tag?"}, {"owner": {"reputation": 5470, "user_id": 2568849, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/UxtGh.png?s=128&g=1", "display_name": "Mesut GUNES", "link": "https://stackoverflow.com/users/2568849/mesut-gunes"}, "reply_to_user": {"reputation": 21, "user_id": 5420703, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-N8lBztq_gx4/AAAAAAAAAAI/AAAAAAAAADA/ofFjhprDWEo/photo.jpg?sz=128", "display_name": "Israel Bautista", "link": "https://stackoverflow.com/users/5420703/israel-bautista"}, "edited": false, "score": 0, "creation_date": 1444377205, "post_id": 33004755, "comment_id": 53887312, "body": "@IsraelBautista as you did it <code>&quot;.account-list &gt; li:nth-child(#{i}) &gt; a&quot;</code>"}], "tags": [], "owner": {"reputation": 5470, "user_id": 2568849, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/UxtGh.png?s=128&g=1", "display_name": "Mesut GUNES", "link": "https://stackoverflow.com/users/2568849/mesut-gunes"}, "is_accepted": false, "score": 0, "last_activity_date": 1444268510, "last_edit_date": 1444268510, "creation_date": 1444264848, "answer_id": 33004755, "question_id": 33004032, "link": "https://stackoverflow.com/questions/33004032/how-to-get-a-list-of-the-li-elements-in-an-ul-with-selenium-in-ruby/33004755#33004755", "title": "How to get a list of the &lt;li&gt; elements in an &lt;ul&gt; with Selenium in Ruby?", "body": "<p>You can do it by getting the all elements by their <code>css</code> then iterate throutght the elements as following:</p>\n\n<pre><code>elems = driver.find_elements(:css =&gt; \".account-list &gt; li\")\nurl = driver.current_url\n\nfor i in 0..elems.size\n # wait until the element loads\n wait.until { driver.find_element(:css =&gt; \".account-list &gt; li:nth-child(#{i})\")}\n\n elems[i].click()\n #do your tests\n # ...\n\n # go back\n driver.navigate.to url     \nend\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 21, "user_id": 5420703, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-N8lBztq_gx4/AAAAAAAAAAI/AAAAAAAAADA/ofFjhprDWEo/photo.jpg?sz=128", "display_name": "Israel Bautista", "link": "https://stackoverflow.com/users/5420703/israel-bautista"}, "edited": false, "score": 0, "creation_date": 1444347183, "post_id": 33025145, "comment_id": 53877501, "body": "thanks, I do get an error were Selenium can&#39;t find the element. I tried a few different ways but still can&#39;t get it. Failure/Error: @driver.find_element(:link, &quot;.account-list &gt; li:nth-child(#{i}) &gt; a&quot;).click      Selenium::WebDriver::Error::NoSuchElementError:"}, {"owner": {"reputation": 3480, "user_id": 4072371, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/112e615d8c60908294e30848d9556186?s=128&d=identicon&r=PG", "display_name": "titusfortner", "link": "https://stackoverflow.com/users/4072371/titusfortner"}, "reply_to_user": {"reputation": 21, "user_id": 5420703, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-N8lBztq_gx4/AAAAAAAAAAI/AAAAAAAAADA/ofFjhprDWEo/photo.jpg?sz=128", "display_name": "Israel Bautista", "link": "https://stackoverflow.com/users/5420703/israel-bautista"}, "edited": false, "score": 0, "creation_date": 1444361905, "post_id": 33025145, "comment_id": 53881195, "body": "You can try putting in a wait before the click in case it is a race condition."}], "tags": [], "owner": {"reputation": 3480, "user_id": 4072371, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/112e615d8c60908294e30848d9556186?s=128&d=identicon&r=PG", "display_name": "titusfortner", "link": "https://stackoverflow.com/users/4072371/titusfortner"}, "is_accepted": false, "score": 1, "last_activity_date": 1444335305, "creation_date": 1444335305, "answer_id": 33025145, "question_id": 33004032, "link": "https://stackoverflow.com/questions/33004032/how-to-get-a-list-of-the-li-elements-in-an-ul-with-selenium-in-ruby/33025145#33025145", "title": "How to get a list of the &lt;li&gt; elements in an &lt;ul&gt; with Selenium in Ruby?", "body": "<p>You can't iterate over a list of elements in Selenium because their object references will become invalid when the DOM changes (StaleElement exception), but you can do it by index number so long as the size of your list doesn't change </p>\n\n<pre><code>elements = @driver.find_elements(css: \".account-item&gt;a\")    \nelements.size.times do |i|\n  @driver.find_element(css: \".account-list &gt; li:nth-child(#{i})&gt;a\").click\n  # Do something\n  @driver.navigate.back\nend\n</code></pre>\n"}], "owner": {"reputation": 21, "user_id": 5420703, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-N8lBztq_gx4/AAAAAAAAAAI/AAAAAAAAADA/ofFjhprDWEo/photo.jpg?sz=128", "display_name": "Israel Bautista", "link": "https://stackoverflow.com/users/5420703/israel-bautista"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2079, "favorite_count": 1, "answer_count": 2, "score": 1, "last_activity_date": 1444335305, "creation_date": 1444259880, "last_edit_date": 1444284760, "question_id": 33004032, "link": "https://stackoverflow.com/questions/33004032/how-to-get-a-list-of-the-li-elements-in-an-ul-with-selenium-in-ruby", "title": "How to get a list of the &lt;li&gt; elements in an &lt;ul&gt; with Selenium in Ruby?", "body": "<p>I'm using Selenium WebDriver I need to perform and action(click) on the first account item, do something, then come back and repeat the process again on the next item. It can potentially be up-to 90 account items so I'm trying to avoid hard coding all 90. any idea how to perhaps loop through the account-list?</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>&lt;ul class=\"account-list\"&gt;\r\n  &lt;li class=\"account-item\"&gt;one item&lt;/li&gt;\r\n  &lt;li class=\"account-item\"&gt;two items&lt;/li&gt;\r\n  &lt;li class=\"account-item\"&gt;three items&lt;/li&gt;\r\n&lt;/ul&gt;</code></pre>\r\n</div>\r\n</div>\r\n</p>\n"}, {"tags": ["ruby", "rack"], "answers": [{"tags": [], "owner": {"reputation": 7565, "user_id": 1021515, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/Z9QcP.jpg?s=128&g=1", "display_name": "mwp", "link": "https://stackoverflow.com/users/1021515/mwp"}, "is_accepted": true, "score": 2, "last_activity_date": 1444400717, "last_edit_date": 1444400717, "creation_date": 1444280803, "answer_id": 33007065, "question_id": 33003946, "link": "https://stackoverflow.com/questions/33003946/rackdeflater-and-rackurlmap/33007065#33007065", "title": "Rack::Deflater and Rack::URLMap", "body": "<p>It looks like <code>Rack::BodyProxy</code> does provide an <code>#each</code> method as a workaround of issue <a href=\"https://github.com/rack/rack/issues/434\" rel=\"nofollow\">rack/rack#434</a>. This method returns an enumerator over the elements of the private <code>@body</code> ivar. Adding an <code>.each</code> into the call chain resolves this problem for <code>Rack::BodyProxy</code> objects, and it's a no-op for more ordinary array-based bodies, so for now this gets me where I need to be. However, I would still like to understand why I'm getting these objects and if there's a better way to deal with them.</p>\n\n<p>Here's the modified and working solution:</p>\n\n<pre><code>use Rack::Deflater, :if =&gt; lambda { |*, body| \n  body.each.map(&amp;:bytesize).reduce(0, :+) &gt; 512 \n}\n</code></pre>\n\n<p><strong>UPDATE:</strong> Hrrm, sometimes <code>body</code> is a <code>Rack::BodyProxy</code> object, and <code>body.body</code> is a <code>Rack::Response</code> object. This is getting a little out of hand...! Here's the solution I'm using now:</p>\n\n<pre><code>use Rack::Deflater, :if =&gt; lambda { |*, body|\n  body.map(&amp;:bytesize).reduce(0, :+) &gt; 512 \\\n    if body.respond_to?(:map) \\\n    or body.respond_to?(:each) and (body = body.each).respond_to?(:map)\n}\n</code></pre>\n\n<p>Far from elegant...</p>\n"}], "owner": {"reputation": 7565, "user_id": 1021515, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/Z9QcP.jpg?s=128&g=1", "display_name": "mwp", "link": "https://stackoverflow.com/users/1021515/mwp"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 200, "favorite_count": 0, "accepted_answer_id": 33007065, "answer_count": 1, "score": 2, "last_activity_date": 1444400717, "creation_date": 1444259389, "question_id": 33003946, "link": "https://stackoverflow.com/questions/33003946/rackdeflater-and-rackurlmap", "title": "Rack::Deflater and Rack::URLMap", "body": "<p>I would like to conditionally enable <code>Rack::Deflater</code> based on the size of the response body, like so:</p>\n\n<pre><code>use Rack::Deflater, :if =&gt; lambda { |*, body| body.map(&amp;:bytesize).reduce(0, :+) &gt; 512 }\n</code></pre>\n\n<p>If I insert the <code>Rack::Deflater</code> middleware inside one of my Rack applications, this lambda works fine; <code>body</code> is an array of strings. However, if I insert the <code>Rack::Deflater</code> middleware before <code>Rack::URLMap</code> (in <code>config.ru</code>), it does not; because <code>body</code> is now a <code>Rack::BodyProxy</code> object.</p>\n\n<p>I've looked into the <code>Rack::BodyProxy</code> definition and it seems a bit opaque. There isn't a clear way to resolve the actual body from this object; <code>body.body</code> returns <code>nil</code>. What's the easiest/best way determine the response body size in this situation, short of moving the <code>Rack::Deflater</code> middleware down into each of my Rack applications? </p>\n\n<p><strong>tl;dr</strong>: How can I determine the size of the response body given a <code>Rack::BodyProxy</code> object? </p>\n"}, {"tags": ["html", "ruby-on-rails", "ruby"], "answers": [{"comments": [{"owner": {"reputation": 245, "user_id": 5079390, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/113fc6595254ee52d79df08376ac701e?s=128&d=identicon&r=PG&f=1", "display_name": "hikmatyar", "link": "https://stackoverflow.com/users/5079390/hikmatyar"}, "edited": false, "score": 0, "creation_date": 1444312919, "post_id": 33013905, "comment_id": 53858981, "body": "thanks, but it&#39;s still not working..   i added my JSON file above, maybe that helps?"}, {"owner": {"reputation": 156, "user_id": 4629515, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b4b59dda59972105b1647b50bb905dbd?s=128&d=identicon&r=PG&f=1", "display_name": "Neven Rakoni\u0107", "link": "https://stackoverflow.com/users/4629515/neven-rakoni%c4%87"}, "reply_to_user": {"reputation": 245, "user_id": 5079390, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/113fc6595254ee52d79df08376ac701e?s=128&d=identicon&r=PG&f=1", "display_name": "hikmatyar", "link": "https://stackoverflow.com/users/5079390/hikmatyar"}, "edited": false, "score": 0, "creation_date": 1444405174, "post_id": 33013905, "comment_id": 53905184, "body": "It&#39;s not working in what way? Do you get any errors? What does your development/testing log show?"}, {"owner": {"reputation": 245, "user_id": 5079390, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/113fc6595254ee52d79df08376ac701e?s=128&d=identicon&r=PG&f=1", "display_name": "hikmatyar", "link": "https://stackoverflow.com/users/5079390/hikmatyar"}, "edited": false, "score": 0, "creation_date": 1444407523, "post_id": 33013905, "comment_id": 53906592, "body": "my development log does not show anything at all when i check/uncheck the filter.. its as if the check/uncheck is somehow not being submitted to the server.."}, {"owner": {"reputation": 156, "user_id": 4629515, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b4b59dda59972105b1647b50bb905dbd?s=128&d=identicon&r=PG&f=1", "display_name": "Neven Rakoni\u0107", "link": "https://stackoverflow.com/users/4629515/neven-rakoni%c4%87"}, "reply_to_user": {"reputation": 245, "user_id": 5079390, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/113fc6595254ee52d79df08376ac701e?s=128&d=identicon&r=PG&f=1", "display_name": "hikmatyar", "link": "https://stackoverflow.com/users/5079390/hikmatyar"}, "edited": false, "score": 0, "creation_date": 1444416354, "post_id": 33013905, "comment_id": 53911182, "body": "Do you have an event handler on the checkbox that triggers the controller action?"}, {"owner": {"reputation": 245, "user_id": 5079390, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/113fc6595254ee52d79df08376ac701e?s=128&d=identicon&r=PG&f=1", "display_name": "hikmatyar", "link": "https://stackoverflow.com/users/5079390/hikmatyar"}, "edited": false, "score": 0, "creation_date": 1444417583, "post_id": 33013905, "comment_id": 53911791, "body": "i don&#39;t think so - the only relevant code is that which i have pasted above in my question.  what code do i need to add to trigger the event?"}, {"owner": {"reputation": 156, "user_id": 4629515, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b4b59dda59972105b1647b50bb905dbd?s=128&d=identicon&r=PG&f=1", "display_name": "Neven Rakoni\u0107", "link": "https://stackoverflow.com/users/4629515/neven-rakoni%c4%87"}, "reply_to_user": {"reputation": 245, "user_id": 5079390, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/113fc6595254ee52d79df08376ac701e?s=128&d=identicon&r=PG&f=1", "display_name": "hikmatyar", "link": "https://stackoverflow.com/users/5079390/hikmatyar"}, "edited": false, "score": 0, "creation_date": 1444418370, "post_id": 33013905, "comment_id": 53912155, "body": "Well currently your form doesn&#39;t submit anything read more about form creation here:  <a href=\"http://guides.rubyonrails.org/form_helpers.html\" rel=\"nofollow noreferrer\">guides.rubyonrails.org/form_helpers.html</a>    And if you want to submit it via ajax (in which case you can put the event handler on the checkboxes so that information is updated instantly), you can put remote: true on the form.  More about that here:  <a href=\"http://edgeguides.rubyonrails.org/working_with_javascript_in_rails.html\" rel=\"nofollow noreferrer\">edgeguides.rubyonrails.org/&hellip;</a>"}, {"owner": {"reputation": 245, "user_id": 5079390, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/113fc6595254ee52d79df08376ac701e?s=128&d=identicon&r=PG&f=1", "display_name": "hikmatyar", "link": "https://stackoverflow.com/users/5079390/hikmatyar"}, "edited": false, "score": 0, "creation_date": 1444419769, "post_id": 33013905, "comment_id": 53912839, "body": "i tried replacing the form in in my index page with this:    &lt;%= form_tag do %&gt;              &lt;%= check_box_tag(:zagat_status) %&gt;             &lt;%= label_tag(:zagat_status, &quot;Zagat status&quot;) %&gt;        &lt;% end %&gt;   it still doesn&#39;t work"}], "tags": [], "owner": {"reputation": 156, "user_id": 4629515, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b4b59dda59972105b1647b50bb905dbd?s=128&d=identicon&r=PG&f=1", "display_name": "Neven Rakoni\u0107", "link": "https://stackoverflow.com/users/4629515/neven-rakoni%c4%87"}, "is_accepted": false, "score": 0, "last_activity_date": 1444302059, "creation_date": 1444302059, "answer_id": 33013905, "question_id": 33003744, "link": "https://stackoverflow.com/questions/33003744/how-do-i-add-checkbox-filters-to-my-posts-index-page-rails-app/33013905#33013905", "title": "How do I add checkbox filters to my Posts index page (Rails app)", "body": "<p>Your code doesn't work because the results are returned immediately after one of the conditions in the controller are satisfied e.g. if params[:search] exists it will return:</p>\n\n<pre><code>@posts = Post.search(params[:search]).order(\"created_at DESC\")\n</code></pre>\n\n<p>And the rest of the code won't be run, because it's inside elsif blocks.</p>\n\n<p>Something like this should work:</p>\n\n<pre><code>@posts = Post.all\nif params[:search]\n  @posts = @posts.search(params[:search]).order(\"created_at DESC\")\nend\nif params[:zagat_status].present?\n  @posts = @posts.zagat_status(params[:zagat_status]).order(\"created_at DESC\")\nend\nif params[:michelin_status].present?\n  @posts = @posts.michelin_status(params[:michelin_status]).order(\"created_at DESC\")\nend\n</code></pre>\n\n<p>This way we build the query based on the existence of parameters. However this is not the most elegant solution.</p>\n\n<p>I would suggest you create a method in your model that would take in the parameters, and then create a query there based on the parameters.</p>\n"}], "owner": {"reputation": 245, "user_id": 5079390, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/113fc6595254ee52d79df08376ac701e?s=128&d=identicon&r=PG&f=1", "display_name": "hikmatyar", "link": "https://stackoverflow.com/users/5079390/hikmatyar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 241, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1444312801, "creation_date": 1444258280, "last_edit_date": 1444312801, "question_id": 33003744, "link": "https://stackoverflow.com/questions/33003744/how-do-i-add-checkbox-filters-to-my-posts-index-page-rails-app", "title": "How do I add checkbox filters to my Posts index page (Rails app)", "body": "<p>I have a Rails app that has many Posts. Each Post has different parameters, two of these parameters are zagat_status and michelin_status. (it's a restaurant discovery website).</p>\n\n<p>I'm trying to add 2 checkboxes that allow me to filter results for:</p>\n\n<p>a) zagat_status .. so clicking the checkbox shows all Posts where zagat_status is \"Yes\" \nb) michelin_status .. so clicking the checkbox shows all Posts where michelin_status = \"1\", \"2\", or \"3\"</p>\n\n<p>Moreover, I want these two checkboxes to be able to work with each other. So if I click both, both filters apply simulatneously.</p>\n\n<p>However, this is not working... how do I get the code below to work??</p>\n\n<p><strong>POST MODEL</strong></p>\n\n<pre><code>class Post &lt; ActiveRecord::Base\n   scope :zagat_status, -&gt; (zagat_status) { where zagat_status: zagat_status }\n   scope :michelin_status, -&gt; (michelin_status) { where michelin_status: michelin_status }\n\n   validates :name, presence: true\n   validates :city, presence: true\n   validates :address, presence: true\n\n   def self.search(query)\n     where(\"name like ? OR city like ? OR address like ?\", \"%#{query}%\", \"%#{query}%\", \"%#{query}%\")\n   end\n\nend\n</code></pre>\n\n<p><strong>POST CONTROLLER</strong></p>\n\n<pre><code>class PostsController &lt; ApplicationController\n  before_action :set_post, only: [:show, :edit, :update, :destroy]\n\n  # GET /posts\n  # GET /posts.json\n  def index\n    @posts = Post.all\n    if params[:search]\n      @posts = Post.search(params[:search]).order(\"created_at DESC\")\n    elsif params[:zagat_status].present?\n      @posts = Post.zagat_status(params[:zagat_status]).order(\"created_at DESC\")\n    elsif params[:michelin_status].present?\n      @posts = Post.michelin_status(params[:michelin_status]).order(\"created_at DESC\")\n    else\n      @posts = Post.all\n    end\n  end\n\n  private\n    # Use callbacks to share common setup or constraints between actions.\n    def set_post\n      @post = Post.find(params[:id])\n    end\n\n    # Never trust parameters from the scary internet, only allow the white list through.\n    def post_params\n      params.require(:post).permit(\n        :name,\n        :michelin_status,\n        :zagat_status,\n        :address,\n        :city,\n        :cuisine,\n        :neighborhood,\n        :price_range,\n        :longitude,\n        :latitude)\n    end\nend\n</code></pre>\n\n<p><strong>INDEX.HTML.ERB FILE (for POSTS)</strong></p>\n\n<pre><code>  &lt;div class=\"search-filter\"&gt;\n        &lt;form&gt;\n          &lt;span&gt;Accolades&lt;/span&gt;\n          &lt;div class=\"accolades-panel\"&gt;\n            &lt;label&gt;\n              Michelin Star(s) &lt;dd&gt;1,2,3 and bibs&lt;/dd&gt;\n              &lt;input type=\"checkbox\" name=\"michelin_status\" value=\"1\"&gt;\n            &lt;/label&gt;\n            &lt;label&gt;\n              Zagat&lt;dd&gt;rated&lt;/dd&gt;&lt;input type=\"checkbox\" name=\"zagat_status\" value=\"Yes\"&gt;\n            &lt;/label&gt;\n\n          &lt;/div&gt;\n        &lt;/form&gt;\n      &lt;/div&gt;\n</code></pre>\n\n<p><strong>INDEX.JS.ERB FILE</strong></p>\n\n<p>Blank</p>\n\n<p><strong>INDEX.JSON.JBUILDER FILE</strong></p>\n\n<pre><code>json.array!(@posts) do |post|\n  json.extract! post, :id, :name, :zagat_status, :michelin_status, :cuisine, :address, :city, :price_range, :longitude, :latitude\n  json.url post_url(post, format: :json)\nend\n</code></pre>\n"}, {"tags": ["ruby", "typeerror", "fixnum"], "comments": [{"owner": {"reputation": 1892, "user_id": 2995907, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/c5c13110c63a9c7fd100f0eac2b303b4?s=128&d=identicon&r=PG&f=1", "display_name": "dingalapadum", "link": "https://stackoverflow.com/users/2995907/dingalapadum"}, "edited": false, "score": 0, "creation_date": 1444257669, "post_id": 33003368, "comment_id": 53832149, "body": "What lang is this anyway? You might want to add a tag..."}], "answers": [{"comments": [{"owner": {"reputation": 221, "user_id": 5420504, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/174979efbe4f8e8e9f1579ac1c551f82?s=128&d=identicon&r=PG&f=1", "display_name": "kparekh01", "link": "https://stackoverflow.com/users/5420504/kparekh01"}, "edited": false, "score": 0, "creation_date": 1444278047, "post_id": 33003590, "comment_id": 53837510, "body": "Wow, I spent a lot of time researching prior to posting this ?  I had a pretty good idea that it was going to be simple, but now I will never ever forget about mistakenly accessing elements outside the array.  Given the -2 the loop will finish when there are 2 numbers left inside the array, thus removing the typeerror I was receiving.  Also placed the return false right before ending the method, and worked like a charm.  Thanks for your time and feedback."}, {"owner": {"reputation": 1892, "user_id": 2995907, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/c5c13110c63a9c7fd100f0eac2b303b4?s=128&d=identicon&r=PG&f=1", "display_name": "dingalapadum", "link": "https://stackoverflow.com/users/2995907/dingalapadum"}, "reply_to_user": {"reputation": 221, "user_id": 5420504, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/174979efbe4f8e8e9f1579ac1c551f82?s=128&d=identicon&r=PG&f=1", "display_name": "kparekh01", "link": "https://stackoverflow.com/users/5420504/kparekh01"}, "edited": false, "score": 0, "creation_date": 1444284484, "post_id": 33003590, "comment_id": 53839773, "body": "@k.parekh if this solved your problem, how about accepting and/or upvoting this answer? ;)"}, {"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1444288420, "post_id": 33003590, "comment_id": 53841914, "body": "It&#39;s bugs like this that demonstrate why you should use <code>Enumerable</code> methods instead of implementing loops yourself: <code>def lucky_sevens?(numbers) numbers.each_cons(3).any? {|triple| triple.reduce(:+) == 7 } end</code> See? No loops, no indices to keep track of, it&#39;s simply pretty much impossible to get wrong! There is a general rule of thumb in Ruby: if you use a loop, you&#39;re doing something wrong."}, {"owner": {"reputation": 1892, "user_id": 2995907, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/c5c13110c63a9c7fd100f0eac2b303b4?s=128&d=identicon&r=PG&f=1", "display_name": "dingalapadum", "link": "https://stackoverflow.com/users/2995907/dingalapadum"}, "reply_to_user": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1444289409, "post_id": 33003590, "comment_id": 53842509, "body": "@J&#246;rgWMittag Thank you very much for the advice! That looks really nice I must say. But probably you should be telling this to OP rather than to me. As you probably can tell from the comment I made on his question, I don&#39;t know ruby at all."}, {"owner": {"reputation": 221, "user_id": 5420504, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/174979efbe4f8e8e9f1579ac1c551f82?s=128&d=identicon&r=PG&f=1", "display_name": "kparekh01", "link": "https://stackoverflow.com/users/5420504/kparekh01"}, "edited": false, "score": 0, "creation_date": 1444330090, "post_id": 33003590, "comment_id": 53869796, "body": "@dingalapadum, hey I already up voted you, but unfortunately my votes cannot be seen publicly, until I accumulate 15 myself.  I put it the first day you posted this.  Also see the accepted answer below."}, {"owner": {"reputation": 221, "user_id": 5420504, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/174979efbe4f8e8e9f1579ac1c551f82?s=128&d=identicon&r=PG&f=1", "display_name": "kparekh01", "link": "https://stackoverflow.com/users/5420504/kparekh01"}, "reply_to_user": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1444330361, "post_id": 33003590, "comment_id": 53869943, "body": "@J&#246;rgWMittag , your advice is much appreciated, but I am not dabbling in these more advanced methods as I am not comfortable handling them as of this moment.  I am currently working on my fundamental concepts for ruby, and one day will be much more comfortable using the more complex methods.  Looking fwd to it.  Thanks for the example though."}], "tags": [], "owner": {"reputation": 1892, "user_id": 2995907, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/c5c13110c63a9c7fd100f0eac2b303b4?s=128&d=identicon&r=PG&f=1", "display_name": "dingalapadum", "link": "https://stackoverflow.com/users/2995907/dingalapadum"}, "is_accepted": false, "score": 1, "last_activity_date": 1444289903, "last_edit_date": 1444289903, "creation_date": 1444257511, "answer_id": 33003590, "question_id": 33003368, "link": "https://stackoverflow.com/questions/33003368/nil-cant-be-coerced-into-fixnum-typeerror-lucky-sevennumbers/33003590#33003590", "title": "`+&#39;: nil can&#39;t be coerced into Fixnum (TypeError). Lucky_seven?(numbers)", "body": "<p>You are trying to access <code>numbers[i+2]</code> . But what happens when <code>i</code> reaches the last element in numbers?  Try</p>\n\n<pre><code>while i &lt; (numbers.length-2)\n</code></pre>\n\n<p>What basically is happening, is that you are accessing an element out of bounds. Also, you should probably put a <code>return false</code> statement after the loop.</p>\n"}, {"tags": [], "owner": {"reputation": 221, "user_id": 5420504, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/174979efbe4f8e8e9f1579ac1c551f82?s=128&d=identicon&r=PG&f=1", "display_name": "kparekh01", "link": "https://stackoverflow.com/users/5420504/kparekh01"}, "is_accepted": false, "score": 0, "last_activity_date": 1444329958, "creation_date": 1444329958, "answer_id": 33023626, "question_id": 33003368, "link": "https://stackoverflow.com/questions/33003368/nil-cant-be-coerced-into-fixnum-typeerror-lucky-sevennumbers/33023626#33023626", "title": "`+&#39;: nil can&#39;t be coerced into Fixnum (TypeError). Lucky_seven?(numbers)", "body": "<p>Using the advice above, I made 2 simple changes.  Here is the working version.</p>\n\n<pre><code>def lucky_sevens?(numbers)\n    i = 0\n    while i &lt; (numbers.length - 2) \n    each_number = numbers[i]\n    next_number = numbers[i+1]\n    third_number = numbers[i+2]\n        if(each_number + next_number + third_number) == 7\n        return true\n        end\n    i += 1\n    end\nreturn false\nend\n</code></pre>\n"}], "owner": {"reputation": 221, "user_id": 5420504, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/174979efbe4f8e8e9f1579ac1c551f82?s=128&d=identicon&r=PG&f=1", "display_name": "kparekh01", "link": "https://stackoverflow.com/users/5420504/kparekh01"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 234, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1444329958, "creation_date": 1444256314, "last_edit_date": 1444259632, "question_id": 33003368, "link": "https://stackoverflow.com/questions/33003368/nil-cant-be-coerced-into-fixnum-typeerror-lucky-sevennumbers", "title": "`+&#39;: nil can&#39;t be coerced into Fixnum (TypeError). Lucky_seven?(numbers)", "body": "<p>I have run in to a slight hiccup.  I'm sure it's simple but for the life of me can't figure it out.    </p>\n\n<p>The function of the method is simple, given an array of \"numbers\", return true if any 3 consecutive numbers add up to 7, else false.</p>\n\n<p>My code below satisfies the first condition in full, as in any qualifying set of numbers will return true.  My problem is that when an array of numbers do not meet the parameters set in the code, instead of false, I get an error of `+': nil can't be coerced into Fixnum (TypeError), any feed back is helpful.  Thanks in advance.  Please see code below: * is the problem line.</p>\n\n<pre><code>def lucky_sevens?(numbers)\ni = 0\nwhile i &lt; numbers.length \neach_number = numbers[i]\nnext_number = numbers[i+1]\nthird_number = numbers[i+2]\n **if  (each_number + next_number + third_number) == 7**\n           return true\n end\n\n    i += 1\nend\nend\n</code></pre>\n"}, {"tags": ["ruby", "foreman", "sigint", "sigterm", "runit"], "owner": {"reputation": 7464, "user_id": 170876, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1853fda2c1e67e6bb26a2d8ace994074?s=128&d=identicon&r=PG", "display_name": "G Gordon Worley III", "link": "https://stackoverflow.com/users/170876/g-gordon-worley-iii"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 215, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1444256236, "creation_date": 1444256236, "question_id": 33003353, "link": "https://stackoverflow.com/questions/33003353/killing-foreman-child-processes-via-runit", "title": "Killing foreman child processes via runit", "body": "<p>I'm using runit for process supervision. I have the following simple run script for a service:</p>\n\n<pre><code>#!/bin/sh -e\ncd /opt/myapp\nexec 2&gt;&amp;1\nexec chpst -u ubuntu /home/ubuntu/.rvm/bin/myapp_foreman start -t 1 -c web=1,worker=1\n</code></pre>\n\n<p>This starts foreman wrapped with the appropriate RVM environment using an RVM wrapper. Everything starts and runs fine, but when I issue <code>sv down myapp</code> I can see in the logs that foreman reports receiving SIGTERM and the foreman process terminates, but the child web and worker processes continue running.</p>\n\n<p>This problem also happens if I just manually send a SIGTERM to foreman using kill rather than through runit, so may not be runit specific. However if I run foreman interactively and then do C-c to send SIGINT that works correctly. Sending SIGINT and SIGKILL via kill, though, do not work.</p>\n\n<p>Is there a way I can get foreman to terminate its child processes when run non-interactively like I have here in my runit script?</p>\n"}, {"tags": ["ios", "ruby", "xcode", "cocoapods"], "comments": [{"owner": {"reputation": 2905, "user_id": 2036995, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/af70d05f380d9930df7a7cd9f3907920?s=128&d=identicon&r=PG", "display_name": "franck", "link": "https://stackoverflow.com/users/2036995/franck"}, "edited": false, "score": 0, "creation_date": 1484150201, "post_id": 33003331, "comment_id": 70393376, "body": "Any update on that one ? Is it now supported ?"}], "answers": [{"tags": [], "owner": {"reputation": 2402, "user_id": 1851134, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/0faa5a992732dc00452de210e310c583?s=128&d=identicon&r=PG", "display_name": "manonthemoon", "link": "https://stackoverflow.com/users/1851134/manonthemoon"}, "is_accepted": false, "score": 1, "last_activity_date": 1444375048, "creation_date": 1444375048, "answer_id": 33032212, "question_id": 33003331, "link": "https://stackoverflow.com/questions/33003331/is-it-possible-to-use-different-versions-of-pods-in-different-targets/33032212#33032212", "title": "Is It possible to use different versions of Pods in different targets?", "body": "<p>I've posted same question as an issue in Cocoapods Github. \nI've got his response :\n\"No, that's not supported.\" So I guess we can forget doing that. \nUnless someday there is a new release supporting that.</p>\n"}], "owner": {"reputation": 2402, "user_id": 1851134, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/0faa5a992732dc00452de210e310c583?s=128&d=identicon&r=PG", "display_name": "manonthemoon", "link": "https://stackoverflow.com/users/1851134/manonthemoon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 845, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1444375048, "creation_date": 1444256118, "question_id": 33003331, "link": "https://stackoverflow.com/questions/33003331/is-it-possible-to-use-different-versions-of-pods-in-different-targets", "title": "Is It possible to use different versions of Pods in different targets?", "body": "<p>This is what I'm trying to do in Podfile :</p>\n\n<pre><code>platform :ios, '7.0'\n\ntarget TargetOne, :exclusive =&gt; true do  \n   pod 'AFNetworking', '2.6.0'\nend\n\ntarget TargetTwo, :exclusive =&gt; true do  \n    pod 'AFNetworking', '2.5.0'\nend\n</code></pre>\n\n<p>Here's the output : </p>\n\n<pre><code>[!] Unable to satisfy the following requirements:\n\n- `AFNetworking (= 2.6.0)` required by `Podfile`\n- `AFNetworking (= 2.5.0)` required by `Podfile`\n</code></pre>\n\n<p>There is not anyway that I can have multiple targets with different versions of pods ? \nEven by setting : <code>:exclusive =&gt; true do</code>, it doesn't change anything.</p>\n"}, {"tags": ["ruby", "ruby-on-rails-3", "file-upload"], "answers": [{"comments": [{"owner": {"reputation": 708, "user_id": 336893, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/6776cd02cf0e246a317291481321043f?s=128&d=identicon&r=PG", "display_name": "WhiteTiger", "link": "https://stackoverflow.com/users/336893/whitetiger"}, "edited": false, "score": 0, "creation_date": 1444257217, "post_id": 33003423, "comment_id": 53832019, "body": "okay, wow, I&#39;m stupid. So multiple file selection is easy What about entire folder selection as I described?"}], "tags": [], "owner": {"reputation": 1009, "user_id": 2502605, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/7f3824de8433c834eecb229b79608412?s=128&d=identicon&r=PG&f=1", "display_name": "Roko", "link": "https://stackoverflow.com/users/2502605/roko"}, "is_accepted": true, "score": 1, "last_activity_date": 1444257752, "last_edit_date": 1495542575, "creation_date": 1444256608, "answer_id": 33003423, "question_id": 33003104, "link": "https://stackoverflow.com/questions/33003104/select-multiple-files-or-folder-for-upload-in-rails/33003423#33003423", "title": "select multiple files or folder for upload in rails", "body": "<p>Did u add the <code>multiple: true</code> to your file_upload field as an option?</p>\n\n<p>Show form view please</p>\n\n<p>Regarding select a folder to upload- to my knowledge this is not possible- take a look at <a href=\"https://stackoverflow.com/questions/6746986/rails-uploading-directories\">(Rails) Uploading Directories</a> for other solutions</p>\n"}], "owner": {"reputation": 708, "user_id": 336893, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/6776cd02cf0e246a317291481321043f?s=128&d=identicon&r=PG", "display_name": "WhiteTiger", "link": "https://stackoverflow.com/users/336893/whitetiger"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1003, "favorite_count": 0, "accepted_answer_id": 33003423, "answer_count": 1, "score": 0, "last_activity_date": 1444257752, "creation_date": 1444255088, "question_id": 33003104, "link": "https://stackoverflow.com/questions/33003104/select-multiple-files-or-folder-for-upload-in-rails", "title": "select multiple files or folder for upload in rails", "body": "<p>I have a rails app where users upload files. However, as it stands if users want to upload more than one file, they have to load those files one at a time. This doesn't make sense if they want to send 100 files for processing so I was wondering how I can make it so they can upload all files from a folder, or recursively the contents of an entire folder. For example, say they have:</p>\n\n<pre><code>Desktop\n|\n+--Folder of files\n   |\n   +--Folder of files of type A\n   |  |\n   |  +-- file1\n   |  +-- file2\n   |  +-- file3\n   |  ...\n   |  +-- file50\n   |\n   +--Folder of files of type B\n      |\n      +-- file1\n      +-- file2\n      +-- file3\n      ...\n      +-- file4\n</code></pre>\n\n<p>I'd like to give them the option to select <code>Folder of files</code> and upload each of the 50 files in <code>Folder of files of type A</code> and <code>Folder of files of type B</code>. Are there any gems that allow for upload of multiple files or entire folder with one selection? or will I have to write one from scratch?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "database", "migration"], "comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1444254624, "post_id": 33002965, "comment_id": 53830981, "body": "Depends on your operating system. Sometimes a process that uses up way too much memory might be &quot;shot&quot; to avoid taking down the whole system. Either that or someone else is in there using <code>kill</code> on your process. It&#39;s worth noting you should check the current state of the database to be sure you do  need to undo the change. It may not have been applied in the first place."}, {"owner": {"reputation": 15, "user_id": 5415752, "user_type": "registered", "profile_image": "https://graph.facebook.com/159395307739977/picture?type=large", "display_name": "Tom Aldy", "link": "https://stackoverflow.com/users/5415752/tom-aldy"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1444254671, "post_id": 33002965, "comment_id": 53831003, "body": "@tadman I&#39;m running this on OSX."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1444254726, "post_id": 33002965, "comment_id": 53831026, "body": "I&#39;ve seen that intermittently, but it&#39;s hard to say what&#39;s causing it. I&#39;ve never been able to reproduce it reliably, and it&#39;s happened more often with Node.js than Ruby."}, {"owner": {"reputation": 15, "user_id": 5415752, "user_type": "registered", "profile_image": "https://graph.facebook.com/159395307739977/picture?type=large", "display_name": "Tom Aldy", "link": "https://stackoverflow.com/users/5415752/tom-aldy"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1444254848, "post_id": 33002965, "comment_id": 53831079, "body": "@tadman In my terminal, it&#39;s attempting to load the schema migrations from the database and freezing straight there, I assumed there was an error in there but I have no idea how to change anything in there."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1444255006, "post_id": 33002965, "comment_id": 53831149, "body": "What&#39;s odd is the <code>9</code> signal <code>SIGKILL</code> is a pretty severe way for a process to die. Does this happen in only this project or is it now affecting others of yours? Also worth testing a different, newer version of Ruby if that&#39;s an option."}], "answers": [{"comments": [{"owner": {"reputation": 15, "user_id": 5415752, "user_type": "registered", "profile_image": "https://graph.facebook.com/159395307739977/picture?type=large", "display_name": "Tom Aldy", "link": "https://stackoverflow.com/users/5415752/tom-aldy"}, "edited": false, "score": 0, "creation_date": 1444289694, "post_id": 33003100, "comment_id": 53842672, "body": "Thanks so much for your feedback, I couldn&#39;t seem to escape the error and ended up reverting back to an old version of the application I am building. Thank you for going in depth for me, I appreciate it very much."}], "tags": [], "owner": {"reputation": 71, "user_id": 3306027, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1bdd81d9d6ae5e1d49c7683f4cd65cc8?s=128&d=identicon&r=PG", "display_name": "esergion", "link": "https://stackoverflow.com/users/3306027/esergion"}, "is_accepted": true, "score": 1, "last_activity_date": 1444261032, "last_edit_date": 1444261032, "creation_date": 1444255077, "answer_id": 33003100, "question_id": 33002965, "link": "https://stackoverflow.com/questions/33002965/ruby-on-rails-migration-returning-killed9/33003100#33003100", "title": "Ruby on Rails migration returning Killed:9?", "body": "<p>You should read about <a href=\"http://api.rubyonrails.org/classes/ActiveRecord/ConnectionAdapters/TableDefinition.html#method-i-column\" rel=\"nofollow\">:limit option</a> for integer attribute.</p>\n\n<p>And I suggest you to use string type for phone attribute instead of integer</p>\n\n<p><strong>Update</strong></p>\n\n<p>Will respond in greater detail:</p>\n\n<p><code>:limit</code> option that you are using in migration is used to request maximum column length <strong>in bytes</strong> when used with <em>integer</em> or <em>binary</em> column types.\nSo in your migration you trying to change <code>:phone</code> column to integer and request for it <strong>100000000</strong> bytes. </p>\n\n<p>Now keep in mind that, for example, the maximum integer number that can be encoded with <strong>8 bytes</strong> is <strong>9 223 372 036 854 775 807</strong>.</p>\n\n<p>So all that you get when you start your migration - is out of memory.</p>\n\n<p>This works with SQlite, but if you were using PostgreSQL for database - you'd get errors when you try to run this migration. Don't know about MySQL</p>\n"}, {"tags": [], "owner": {"reputation": 15, "user_id": 5415752, "user_type": "registered", "profile_image": "https://graph.facebook.com/159395307739977/picture?type=large", "display_name": "Tom Aldy", "link": "https://stackoverflow.com/users/5415752/tom-aldy"}, "is_accepted": false, "score": 0, "last_activity_date": 1444257606, "creation_date": 1444257606, "answer_id": 33003607, "question_id": 33002965, "link": "https://stackoverflow.com/questions/33002965/ruby-on-rails-migration-returning-killed9/33003607#33003607", "title": "Ruby on Rails migration returning Killed:9?", "body": "<p>I have managed to remove the issue by loading up an older copy of my application, although I have kept these files as I will try to fix the issue in order to find out how to remove the problem for future reference.</p>\n"}], "owner": {"reputation": 15, "user_id": 5415752, "user_type": "registered", "profile_image": "https://graph.facebook.com/159395307739977/picture?type=large", "display_name": "Tom Aldy", "link": "https://stackoverflow.com/users/5415752/tom-aldy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 509, "favorite_count": 0, "accepted_answer_id": 33003100, "answer_count": 2, "score": 0, "last_activity_date": 1444261032, "creation_date": 1444254403, "question_id": 33002965, "link": "https://stackoverflow.com/questions/33002965/ruby-on-rails-migration-returning-killed9", "title": "Ruby on Rails migration returning Killed:9?", "body": "<p>I'm having a real issue here with my Rails database, I created a few Migrations that held the following...</p>\n\n<pre><code>def change\nchange_column(:users, :phone, :integer, limit: 100000000)\nend\n</code></pre>\n\n<p>This obviously threw a huge error, although it seemed to work, I had no idea what I was doing in all honesty, I then deleted the migration and created another trying to change the column back to its original setting, as a normal integer.</p>\n\n<p>This new migration didn't work and when I attempted to migrate the database once again, it gave me this error...</p>\n\n<pre><code>Killed:9\n</code></pre>\n\n<p>I have no idea what this is or even how to deal with it.</p>\n\n<p>Can someone please shed some light for me?\nI'd very much appreciate it.</p>\n"}, {"tags": ["ruby", "architecture"], "comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 1, "creation_date": 1444255101, "post_id": 33002935, "comment_id": 53831194, "body": "One hint: <code>division_line = &#39;=&#39; * 30</code> and <code>puts division_line</code>."}, {"owner": {"reputation": 3773, "user_id": 991903, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/J12Hi.jpg?s=128&g=1", "display_name": "Meier", "link": "https://stackoverflow.com/users/991903/meier"}, "edited": false, "score": 2, "creation_date": 1444255506, "post_id": 33002935, "comment_id": 53831346, "body": "Reading code without any hint what the program is supposed to do is no fun."}, {"owner": {"reputation": 1, "user_id": 5420453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ba3911bb7bf4866f57a4df6df9ae52dd?s=128&d=identicon&r=PG&f=1", "display_name": "Ryan", "link": "https://stackoverflow.com/users/5420453/ryan"}, "edited": false, "score": 0, "creation_date": 1444256975, "post_id": 33002935, "comment_id": 53831930, "body": "tadman - Thanks! I didn&#39;t know I could actually do that."}, {"owner": {"reputation": 1, "user_id": 5420453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ba3911bb7bf4866f57a4df6df9ae52dd?s=128&d=identicon&r=PG&f=1", "display_name": "Ryan", "link": "https://stackoverflow.com/users/5420453/ryan"}, "edited": false, "score": 0, "creation_date": 1444256992, "post_id": 33002935, "comment_id": 53831937, "body": "Meier - I added a little bit more explanation. Sorry."}, {"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1444257215, "post_id": 33002935, "comment_id": 53832018, "body": "Your issue is not about coding style (which you tagged). It is about architecture."}, {"owner": {"reputation": 1, "user_id": 5420453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ba3911bb7bf4866f57a4df6df9ae52dd?s=128&d=identicon&r=PG&f=1", "display_name": "Ryan", "link": "https://stackoverflow.com/users/5420453/ryan"}, "edited": false, "score": 0, "creation_date": 1444267609, "post_id": 33002935, "comment_id": 53834955, "body": "sawa - Sorry! I&#39;m very new to coding. I&#39;ll try to research better next time before posting so I tag it correctly. Thank you for the correction."}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 5420453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ba3911bb7bf4866f57a4df6df9ae52dd?s=128&d=identicon&r=PG&f=1", "display_name": "Ryan", "link": "https://stackoverflow.com/users/5420453/ryan"}, "edited": false, "score": 1, "creation_date": 1444267823, "post_id": 33003917, "comment_id": 53835003, "body": "Wow this is great input, thank you. I didn&#39;t realize .to_h existed, that makes a lot of sense. There are a few things in your code I have not learned yet, so I will research that tonight. I really appreciate the time you have put into showing me a better way."}], "tags": [], "owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "is_accepted": false, "score": 2, "last_activity_date": 1444259914, "last_edit_date": 1444259914, "creation_date": 1444259226, "answer_id": 33003917, "question_id": 33002935, "link": "https://stackoverflow.com/questions/33002935/looking-for-help-cleaning-up-code/33003917#33003917", "title": "Looking for help cleaning up code", "body": "<p>I would change the code to the following. This is not refactor since it is not equivalent to your code. In particular, it is not inconsistent like your code is. For example, when it prompts, it does not sometimes change a line and sometimes not as in your code; My code never changes a line. My code also always prints the list after an operation, unlike your code, which does not do so particularly when an item is added. Also, unlike your code, it does not end a message sometimes with and sometimes without a period; Messages in my code never end with period.</p>\n\n<pre><code>def prompt s\n  print \"#{s}: \"\n  gets.chomp\nend\ndef list_items\n  @items.each{|k, v| puts \"Flavor: #{k} - Cost: $#{v}\"}\nend\ndef sort_items\n  @items = @items.sort_by{|flavor, price| price}.to_h\n  list_items\nend\n\nputs \"Welcome to d0nutz flavor menu\"\n@items = {}\nloop do\n  puts(\n    ?= * 30,\n    \"(l)ist flavors\",\n    \"(a)dd a flavor\",\n    \"(d)elete a flavor\",\n    \"(e)xit application\",\n    ?= * 30,\n  )\n  case prompt(\"Your choice\")\n  when ?l\n    list_items\n  when ?a\n    @items[prompt(\"Enter new flavor\")] = prompt(\"Enter cost\").to_i\n    sort_items\n  when ?d\n    @items.delete(prompt(\"Enter a flavor to remove\")){|k| puts \"#{k} not found\"}\n    sort_items\n  when ?e\n    break\n  else\n    puts \"That is not a recognised command\"\n  end\nend\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 5420453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ba3911bb7bf4866f57a4df6df9ae52dd?s=128&d=identicon&r=PG&f=1", "display_name": "Ryan", "link": "https://stackoverflow.com/users/5420453/ryan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 53, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1444259914, "creation_date": 1444254307, "last_edit_date": 1444257598, "question_id": 33002935, "link": "https://stackoverflow.com/questions/33002935/looking-for-help-cleaning-up-code", "title": "Looking for help cleaning up code", "body": "<p>This is for an assignment for a class. I want to create a register type application for a donut shop. The application should accept <code>\"l\"</code> to list flavors, <code>\"a\"</code> to add flavors, <code>\"d\"</code> to delete flavors, and <code>\"e\"</code> to exit. The prices should be listed in ascending order. When adding a flavor, it should ask first the flavor, then the price.</p>\n\n<p>I have the application working. It uses Jekyll (what the class uses).</p>\n\n<pre><code>item = {}\nitem_asc = {}\nputs \"Welcome to d0nutz flavor menu\"\ninput = \"\"\ndivision_line = lambda {30.times {|x| print \"=\"}}\nwhile input != \"e\"\n  division_line.call\n  puts \"\\n(l)ist flavors\\n(a)dd a flavor\\n(d)elete a flavor\\n(e)xit application\"\n  division_line.call\n  print \"\\nYour choice: \"\n  input = gets.chomp\n  case input\n  when \"l\"\n    item_asc.each {|x,y| puts \"Flavor: #{x} - Cost: $#{y}\"}\n  when \"a\"\n    puts \"Enter new flavor: \"\n    flavor = gets.chomp\n    puts \"Enter cost: \"\n    cost = gets.chomp.to_i\n    item[flavor] = cost\n    item_asc = item.sort_by {|flavor,price| price}\n    input = \"\"\n  when \"d\"\n    puts \"Enter a flavor to remove\"\n    to_delete = gets.chomp\n    item.delete(\"#{to_delete}\") {|x| puts \"#{x} not found.\"}\n    item_asc = item.sort_by {|flavor,price| price}\n    item_asc.each {|x,y| puts \"Flavor: #{x} - Cost: $#{y}\"}\n    input = \"\"\n  when \"e\"\n  else\n    puts \"\\nThat is not a recognised command\"\n  end\nend\n</code></pre>\n\n<p>However it's even uglier than what I have here. I appreciate any input. I am interested in seeing what I should have done for clean up purposes, and maybe adding classes/methods where they should be, and making this more Rubyesque.</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 2212, "user_id": 4803039, "user_type": "registered", "accept_rate": 96, "profile_image": "https://lh3.googleusercontent.com/-MmbDSCFLpd8/AAAAAAAAAAI/AAAAAAAAADg/2jruEOH8FM0/photo.jpg?sz=128", "display_name": "philip yoo", "link": "https://stackoverflow.com/users/4803039/philip-yoo"}, "edited": false, "score": 1, "creation_date": 1444254422, "post_id": 33002932, "comment_id": 53830879, "body": "I&#39;m guessing you want the return to not display <code>nil</code>.  Use <code>return &#39;A&#39;</code>"}, {"owner": {"reputation": 25573, "user_id": 676874, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/c8e67ec01dc3e7c402255ff26785863f?s=128&d=identicon&r=PG", "display_name": "knut", "link": "https://stackoverflow.com/users/676874/knut"}, "reply_to_user": {"reputation": 2212, "user_id": 4803039, "user_type": "registered", "accept_rate": 96, "profile_image": "https://lh3.googleusercontent.com/-MmbDSCFLpd8/AAAAAAAAAAI/AAAAAAAAADg/2jruEOH8FM0/photo.jpg?sz=128", "display_name": "philip yoo", "link": "https://stackoverflow.com/users/4803039/philip-yoo"}, "edited": false, "score": 0, "creation_date": 1444309779, "post_id": 33002932, "comment_id": 53856500, "body": "@philipyoo With <code>return &#39;A&#39;</code> I get a <code>unexpected return (LocalJumpError)</code>."}, {"owner": {"reputation": 2212, "user_id": 4803039, "user_type": "registered", "accept_rate": 96, "profile_image": "https://lh3.googleusercontent.com/-MmbDSCFLpd8/AAAAAAAAAAI/AAAAAAAAADg/2jruEOH8FM0/photo.jpg?sz=128", "display_name": "philip yoo", "link": "https://stackoverflow.com/users/4803039/philip-yoo"}, "reply_to_user": {"reputation": 25573, "user_id": 676874, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/c8e67ec01dc3e7c402255ff26785863f?s=128&d=identicon&r=PG", "display_name": "knut", "link": "https://stackoverflow.com/users/676874/knut"}, "edited": false, "score": 0, "creation_date": 1444319958, "post_id": 33002932, "comment_id": 53864120, "body": "@knut The <code>return</code> statement works only within a block or method. If you wanted to print and also return &#39;A&#39;, then try <code>p &#39;A&#39;</code>. Also, just using <code>&#39;A&#39;</code> will return itself but not print to console"}], "answers": [{"comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1444254491, "post_id": 33002970, "comment_id": 53830918, "body": "<code>print</code> won&#39;t add a <code>&quot;\\n&quot;</code> new-line character, but <code>puts</code> will. It&#39;s kind of odd to use <code>print</code> with a newline when <code>puts</code> is shorter and already does that."}], "tags": [], "owner": {"reputation": 29, "user_id": 3412713, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9oFOl.png?s=128&g=1", "display_name": "Tu ..", "link": "https://stackoverflow.com/users/3412713/tu"}, "is_accepted": false, "score": 1, "last_activity_date": 1444293705, "last_edit_date": 1444293705, "creation_date": 1444254445, "answer_id": 33002970, "question_id": 33002932, "link": "https://stackoverflow.com/questions/33002932/how-writing-a-in-ruby-in-commandline/33002970#33002970", "title": "How writing &#39;A&#39; in Ruby in commandline", "body": "<p>This is simple</p>\n\n<pre><code>print \"A\\n\" with new line\nprint \"A\" without\n</code></pre>\n\n<p>runing \n$ruby filename.rb</p>\n\n<p>$ruby -e \"print 'A'\"</p>\n\n<p>$ruby -e \"print 65.chr\"</p>\n\n<pre><code>$irb\n&gt;print 'A'.encode('utf-8')\n</code></pre>\n\n<p>$stdout.print \"A\"</p>\n"}], "owner": {"reputation": 29, "user_id": 3412713, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9oFOl.png?s=128&g=1", "display_name": "Tu ..", "link": "https://stackoverflow.com/users/3412713/tu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 39, "favorite_count": 0, "answer_count": 1, "score": -5, "last_activity_date": 1444293705, "creation_date": 1444254298, "last_edit_date": 1444254791, "question_id": 33002932, "link": "https://stackoverflow.com/questions/33002932/how-writing-a-in-ruby-in-commandline", "title": "How writing &#39;A&#39; in Ruby in commandline", "body": "<p>I need writing character\nHow writing script to showing char 'A' in console.</p>\n\n<pre><code>puts 'A' without  new line\n</code></pre>\n\n<p>or other way</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "actioncontroller"], "answers": [{"tags": [], "owner": {"reputation": 4543, "user_id": 3213605, "user_type": "registered", "accept_rate": 36, "profile_image": "https://i.stack.imgur.com/a2HS8.jpg?s=128&g=1", "display_name": "PhilVarg", "link": "https://stackoverflow.com/users/3213605/philvarg"}, "is_accepted": true, "score": 3, "last_activity_date": 1444256415, "last_edit_date": 1444256415, "creation_date": 1444255987, "answer_id": 33003304, "question_id": 33002811, "link": "https://stackoverflow.com/questions/33002811/rails-routing-to-another-directory/33003304#33003304", "title": "Rails routing to another directory", "body": "<p>you should be able to just tell your controller what path to render</p>\n\n<pre><code>class V1::ReportsController &lt; ApplicationController\n  def index\n   @company = current_user.company\n\n   reports = if @company\n    @company.reports.order(\"created_at DESC\")\n   else\n    []\n   end\n  end\n  render '/path/to/views/reports/index.html.erb'\nend\n</code></pre>\n\n<p>see section 2.2.3 and 2.2.5 of the docs for the <a href=\"http://guides.rubyonrails.org/layouts_and_rendering.html#using-render\" rel=\"nofollow\">render method</a></p>\n\n<p>although really, you should be using the directory rails wants you to. mainly because if there is a v2 controller made down the road, where would you put its views?</p>\n"}], "owner": {"reputation": 2074, "user_id": 688071, "user_type": "registered", "accept_rate": 67, "profile_image": "https://graph.facebook.com/1229375604/picture?type=large", "display_name": "Godzilla74", "link": "https://stackoverflow.com/users/688071/godzilla74"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 68, "favorite_count": 0, "accepted_answer_id": 33003304, "answer_count": 1, "score": 1, "last_activity_date": 1444256415, "creation_date": 1444253773, "last_edit_date": 1444255735, "question_id": 33002811, "link": "https://stackoverflow.com/questions/33002811/rails-routing-to-another-directory", "title": "Rails routing to another directory", "body": "<p>Is there a way to direct a route to use a view that isn't in the expected folder?</p>\n\n<p>Here's my problem... I'm creating a new view for my <code>Reports</code>, however I'm getting <code>Missing template v1/reports/index</code> error.</p>\n\n<p><strong>routes.rb</strong></p>\n\n<pre><code>api_version(module: \"V1\", path: { value: \"v1\" }) do\n  resources :reports, only: [:create, :index]\nend\n</code></pre>\n\n<p><strong>views/reports/index.html.erb</strong></p>\n\n<pre><code>&lt;h3&gt;Just some test content&lt;/h3&gt;\n</code></pre>\n\n<p><strong>controllers/v1/reports_controller.rb</strong></p>\n\n<pre><code>class V1::ReportsController &lt; ApplicationController\n  def index\n   @company = current_user.company\n\n   reports = if @company\n    @company.reports.order(\"created_at DESC\")\n   else\n    []\n   end\n  end\nend\n</code></pre>\n\n<p><strong>_navigation.html.erb</strong></p>\n\n<pre><code>&lt;%= link_to \"Reports\", v1_reports_path, role: \"menuItem\" %&gt;\n</code></pre>\n\n<p>I used <code>apipie</code> to create some API for my application which has many of my controllers under a 'v1' directory within my app which is now causing some issues as I expand my app (I think).  I don't want to have to redo the structure so hopefully there is a way to direct the route to use the view under <code>views/reports/</code> instead of <code>v1/reports/</code> which is what it is looking for which doesn't exist.</p>\n\n<p>...or am I stuck with also having to create a `views/v1/reports/index.html.erb' file?</p>\n"}, {"tags": ["ruby", "minitest"], "comments": [{"owner": {"reputation": 1538, "user_id": 1696287, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/V8zk9.jpg?s=128&g=1", "display_name": "trosborn", "link": "https://stackoverflow.com/users/1696287/trosborn"}, "edited": false, "score": 3, "creation_date": 1444252380, "post_id": 33002423, "comment_id": 53829904, "body": "Pretty sure minitest requires that all tests begin with &quot;test_&quot;, so you&#39;d need to rename it to &quot;test_zeetest&quot;"}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1444252576, "post_id": 33002423, "comment_id": 53829999, "body": "As a coding style recommendation, indent your code correctly. It&#39;ll help readability and maintenance, for us and for you."}], "answers": [{"tags": [], "owner": {"reputation": 1009, "user_id": 2502605, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/7f3824de8433c834eecb229b79608412?s=128&d=identicon&r=PG&f=1", "display_name": "Roko", "link": "https://stackoverflow.com/users/2502605/roko"}, "is_accepted": true, "score": 1, "last_activity_date": 1444253161, "last_edit_date": 1444253161, "creation_date": 1444252425, "answer_id": 33002512, "question_id": 33002423, "link": "https://stackoverflow.com/questions/33002423/minitest-not-working/33002512#33002512", "title": "Minitest not working", "body": "<p>Try this:</p>\n\n<pre><code>require_relative \"task\"\nrequire \"minitest/autorun\"\n\nclass TestCalc &lt; MiniTest::Test\n\n  def setup\n    @calc = Calc.new\n  end\n\n  def test_xo\n    assert_equal( true, @calc.xo(\"xoxo\"))\n  end\n\nend\n</code></pre>\n"}], "owner": {"reputation": 205, "user_id": 4925363, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f9677975a7f1508434abccac7b2409ec?s=128&d=identicon&r=PG&f=1", "display_name": "SeattleDucati", "link": "https://stackoverflow.com/users/4925363/seattleducati"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 274, "favorite_count": 0, "accepted_answer_id": 33002512, "answer_count": 1, "score": 0, "last_activity_date": 1447108911, "creation_date": 1444252040, "last_edit_date": 1447108911, "question_id": 33002423, "link": "https://stackoverflow.com/questions/33002423/minitest-not-working", "title": "Minitest not working", "body": "<p>I have simple ruby app that parses a string and counts the number of Xs and Os, and returns true if there is an equal number, otherwise false. </p>\n\n<p>I want to know why my test isn't working. </p>\n\n<p>When I run the test, the app gets called, and the test runs, but there are 0 runs, 0 assertion...etc. Why?</p>\n\n<p>The app:</p>\n\n<pre><code>class Calc\n\n  def xo(str)\n    ex = 0\n    oh = 0\n    for i in (0...str.length)\n      if str[i] == \"x\" || str[i] == \"X\"\n        ex += 1\n      elsif str[i] == \"o\" || str[i] == \"O\"\n        oh += 1\n      else\n      end\n    end\n    if ex == oh\n      puts \"equal\" \n      return true\n    else\n      puts \"not equal\"\n      return false\n    end\n  end\nend\n\nCalc.new.xo(\"xoxoo\")\n</code></pre>\n\n<p>The test:</p>\n\n<pre><code>require_relative \"task\"\nrequire \"minitest/autorun\"\n\nclass Test &lt; MiniTest::Test\n\n  def zeetest\n    @calc = Calc.new\n    assert_equal( true, @calc.xo(\"xoxo\"))\n  end\n\nend\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "railstutorial.org", "partials"], "comments": [{"owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "edited": false, "score": 2, "creation_date": 1444252568, "post_id": 33002391, "comment_id": 53829997, "body": "Adding links to your github repository is nice but if you want debugging help you should add the relevant code in the body of the question. It a nice courtesy to people who are prepared to help you and safeguards SO against link rot."}, {"owner": {"reputation": 283, "user_id": 1788943, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/dafa45ccb0e700a30c98933e200566ca?s=128&d=identicon&r=PG", "display_name": "JoeNyland", "link": "https://stackoverflow.com/users/1788943/joenyland"}, "reply_to_user": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "edited": false, "score": 0, "creation_date": 1444288919, "post_id": 33002391, "comment_id": 53842204, "body": "Understood. Question updated to include the code that I am using. I&#39;ve also included the brief of the exercise that I am trying to complete, to further avoid link rot (if the link to the tutorial book breaks/changes)."}], "answers": [{"comments": [{"owner": {"reputation": 283, "user_id": 1788943, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/dafa45ccb0e700a30c98933e200566ca?s=128&d=identicon&r=PG", "display_name": "JoeNyland", "link": "https://stackoverflow.com/users/1788943/joenyland"}, "edited": false, "score": 0, "creation_date": 1444289122, "post_id": 33002501, "comment_id": 53842330, "body": "That was it. I&#39;ve replaced <code>&lt;%</code> with <code>&lt;%=</code> and it works now. Thanks!"}], "tags": [], "owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "is_accepted": true, "score": 2, "last_activity_date": 1444289017, "last_edit_date": 1444289017, "creation_date": 1444252373, "answer_id": 33002501, "question_id": 33002391, "link": "https://stackoverflow.com/questions/33002391/why-cant-i-render-a-partial-in-exercise-1-of-chapter-11-of-michael-hartls-rail/33002501#33002501", "title": "Why can&#39;t I render a partial in Exercise 1 of Chapter 11 of Michael Hartl&#39;s Rail Tutorial Book?", "body": "<p>You are using <code>&lt;% render 'shared/home_logged_in' %&gt;</code> instead of <code>&lt;%= render 'shared/home_logged_in' %&gt;</code>. You need to print the expression into the page buffer for it be included in the response.</p>\n\n<pre><code>&lt;% \"I am invisible\" %&gt;\n&lt;%= \"I am not\" %&gt;\n</code></pre>\n"}], "owner": {"reputation": 283, "user_id": 1788943, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/dafa45ccb0e700a30c98933e200566ca?s=128&d=identicon&r=PG", "display_name": "JoeNyland", "link": "https://stackoverflow.com/users/1788943/joenyland"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 150, "favorite_count": 0, "accepted_answer_id": 33002501, "answer_count": 1, "score": 0, "last_activity_date": 1444289017, "creation_date": 1444251869, "last_edit_date": 1444288788, "question_id": 33002391, "link": "https://stackoverflow.com/questions/33002391/why-cant-i-render-a-partial-in-exercise-1-of-chapter-11-of-michael-hartls-rail", "title": "Why can&#39;t I render a partial in Exercise 1 of Chapter 11 of Michael Hartl&#39;s Rail Tutorial Book?", "body": "<p>I'm trying to complete <a href=\"https://www.railstutorial.org/book/user_microposts#sec-micropost_exercises\" rel=\"nofollow noreferrer\">Exercise 1, Chapter 11 of Michael Hartl's Rail Tutorial Book</a>, but when I load the page in a browser I don't see my partials rendered.</p>\n\n<p><a href=\"https://i.stack.imgur.com/xvkuF.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/xvkuF.png\" alt=\"screenshot\"></a></p>\n\n<p>The brief is:</p>\n\n<blockquote>\n  <p>Refactor the Home page to use separate partials for the two branches of the if-else statement.</p>\n</blockquote>\n\n<p>The homepage template in which I am trying to load partials is as follows:</p>\n\n<pre><code>&lt;% if logged_in? %&gt;\n    &lt;% render 'shared/home_logged_in' %&gt;\n&lt;% else %&gt;\n    &lt;% render 'shared/home_not_logged_in' %&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>An example of one of the partials that I am trying to load is as follows:</p>\n\n<pre><code>&lt;div class=\"center jumbotron\"&gt;\n  &lt;h1&gt;Welcome to the Sample App&lt;/h1&gt;\n\n  &lt;h2&gt;\n    This is the home page for the\n    &lt;a href=\"http://www.railstutorial.org/\"&gt;Ruby on Rails Tutorial&lt;/a&gt;\n    sample application.\n  &lt;/h2&gt;\n\n  &lt;%= link_to \"Sign up now!\", signup_path, class: \"btn btn-lg btn-primary\" %&gt;\n&lt;/div&gt;\n\n&lt;%= link_to image_tag(\"rails.png\", alt: \"Rails logo\"),\n            'http://rubyonrails.org/' %&gt;\n</code></pre>\n\n<p>My code is available on GitHub <a href=\"https://github.com/MasterRoot24/sample_app\" rel=\"nofollow noreferrer\">here</a> and the changes I have made in an attempt to complete this exercise can be found <a href=\"https://github.com/MasterRoot24/sample_app/commit/2ac24ee035f9b95e37fac5a55d23139e8b168905\" rel=\"nofollow noreferrer\">here</a>.</p>\n\n<p>What am I doing wrong?</p>\n"}, {"tags": ["mysql", "ruby"], "comments": [{"owner": {"reputation": 1835, "user_id": 4841794, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/56d108b7860f6db080d1723372132e55?s=128&d=identicon&r=PG&f=1", "display_name": "Dipen Shah", "link": "https://stackoverflow.com/users/4841794/dipen-shah"}, "edited": false, "score": 1, "creation_date": 1444249928, "post_id": 33001907, "comment_id": 53828672, "body": "You have a better chance at Mysql if the data is being indexed, you will get the results faster."}], "answers": [{"comments": [{"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 1, "creation_date": 1444252954, "post_id": 33002027, "comment_id": 53830201, "body": "Agreed. DBMs are designed to handle indexes and sorting very efficiently and, as long as the indexes are maintained and the DBM is allowed to run its analysis of the tables regularly, it&#39;ll figure out the best ways to handle the sorts, assuming it&#39;s a good DBM. Failing to index properly or allow the DBM to analyze the data can degrade performance. Pulling data into the code to sort puts a load on the DB host, the network and the code host and it can be amazing how much work that causes."}], "tags": [], "owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "is_accepted": true, "score": 4, "last_activity_date": 1444250337, "creation_date": 1444250337, "answer_id": 33002027, "question_id": 33001907, "link": "https://stackoverflow.com/questions/33001907/which-is-more-efficient-order-by-in-the-database-or-sort-in-ruby/33002027#33002027", "title": "Which is more efficient, order by in the database or sort in Ruby?", "body": "<p>Generally you should do as much filtering and ordering in the database as possible, and this is especially true when you're only displaying a small subset of all possible records as is the case when paginating.</p>\n\n<p>You'll want to do ordering manually if and only if the logic for ordering is so crazy convoluted it's impractical or impossible to do it in the database itself.</p>\n\n<p>It's worth mentioning that database indexes help considerably when accessing ordered information. Use them whenever you have an <code>ORDER BY</code> clause on your query for best results.</p>\n"}], "owner": {"reputation": 23, "user_id": 4747437, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-tkkcNIsPA8A/AAAAAAAAAAI/AAAAAAAACw4/ChKYFqpod64/photo.jpg?sz=128", "display_name": "Gaurav Sharma", "link": "https://stackoverflow.com/users/4747437/gaurav-sharma"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 118, "favorite_count": 0, "accepted_answer_id": 33002027, "answer_count": 1, "score": 2, "last_activity_date": 1444250337, "creation_date": 1444249827, "last_edit_date": 1444250252, "question_id": 33001907, "link": "https://stackoverflow.com/questions/33001907/which-is-more-efficient-order-by-in-the-database-or-sort-in-ruby", "title": "Which is more efficient, order by in the database or sort in Ruby?", "body": "<p>I have a heavy query that takes a lot of time. It has multiple joins, and I am doing <code>group by</code> and <code>order by</code> on multiple table's columns. Should I do this <code>order by</code> or <code>group by</code> at ruby application level, or continue doing it in a MySQL query?</p>\n"}, {"tags": ["ruby", "shell", "ubuntu", "crontab"], "comments": [{"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1444253156, "post_id": 33001423, "comment_id": 53830295, "body": "Why is this your third time trying to ask? You have two other existing questions, with only one answer, and a lot of comments asking for clarification. Instead of continually asking, perhaps you should have rephrased your first question to improve it, allowing us to have more information so we can help you?"}, {"owner": {"reputation": 47, "user_id": 5172981, "user_type": "registered", "accept_rate": 67, "profile_image": "https://graph.facebook.com/1146756268674720/picture?type=large", "display_name": "Michael O Meara", "link": "https://stackoverflow.com/users/5172981/michael-o-meara"}, "reply_to_user": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1444253286, "post_id": 33001423, "comment_id": 53830352, "body": "Ok Sorry I removed a lot of the non important stuff from my code for this question in order to make it easier to debug.. I will know better next time thanks"}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1444253507, "post_id": 33001423, "comment_id": 53830450, "body": "Please decide which is your current question and delete the others, otherwise you dilute the value of each question. Don&#39;t waste the time of those who&#39;ve been trying to help you; I&#39;ll guarantee that seeing the question repeatedly asked, without it seeming like progress is being made, will only turn off those trying to help."}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1444253750, "post_id": 33001423, "comment_id": 53830552, "body": "Which user owns the crontab? Root, or is it an individual user&#39;s crontab? Root won&#39;t have the same environment as a user, it&#39;s usually much more limited for security reasons. If you want root to run code normally run as a user, you have to make sure that root&#39;s environment is correct, either by setting up a wrapper script or sourcing a file that sets the environment, and then use explicit paths to everything, from Ruby to the scripts. Don&#39;t rely on the OS to search a path, tell it where everything is. For instance, who&#39;s <code>$HOME</code> do you think will be in effect?"}, {"owner": {"reputation": 47, "user_id": 5172981, "user_type": "registered", "accept_rate": 67, "profile_image": "https://graph.facebook.com/1146756268674720/picture?type=large", "display_name": "Michael O Meara", "link": "https://stackoverflow.com/users/5172981/michael-o-meara"}, "reply_to_user": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1444254145, "post_id": 33001423, "comment_id": 53830755, "body": "Ok yes When I open up my crontab I use <code>sudo crontab -e</code>"}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1444254315, "post_id": 33001423, "comment_id": 53830826, "body": "<code>crontab -e</code> means &quot;Edit your crontab file, or create one if it doesn\u2019t already exist.&quot; It does NOT mean <i>run</i> the crontab as a particular user. See <a href=\"http://stackoverflow.com/a/8476992/128421\">stackoverflow.com/a/8476992/128421</a>"}, {"owner": {"reputation": 47, "user_id": 5172981, "user_type": "registered", "accept_rate": 67, "profile_image": "https://graph.facebook.com/1146756268674720/picture?type=large", "display_name": "Michael O Meara", "link": "https://stackoverflow.com/users/5172981/michael-o-meara"}, "reply_to_user": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1444255047, "post_id": 33001423, "comment_id": 53831170, "body": "I created a new crontab as user ubuntumike but I can&#39;t get any of my code to run now <code>*&#47;1 * * * * ubuntumike bash &#47;ubuntumike&#47;Documents&#47;rubyUbuntuIssue&#47;trigger.sh &gt;&gt;&#47;ubuntumike&#47;Documents&#47;rubyUbuntuIssue&#47;tmp&#47;mybackup.log</code>"}], "answers": [{"comments": [{"owner": {"reputation": 47, "user_id": 5172981, "user_type": "registered", "accept_rate": 67, "profile_image": "https://graph.facebook.com/1146756268674720/picture?type=large", "display_name": "Michael O Meara", "link": "https://stackoverflow.com/users/5172981/michael-o-meara"}, "edited": false, "score": 0, "creation_date": 1444251360, "post_id": 33001966, "comment_id": 53829428, "body": "Thank you for reaching out. Ok I tried logging the error messages but there is nothing being logged. Also when I put <code>echo ruby -v</code>&quot; at the end of my script file it is showing that its using the correct Ruby Version."}, {"owner": {"reputation": 47, "user_id": 5172981, "user_type": "registered", "accept_rate": 67, "profile_image": "https://graph.facebook.com/1146756268674720/picture?type=large", "display_name": "Michael O Meara", "link": "https://stackoverflow.com/users/5172981/michael-o-meara"}, "edited": false, "score": 0, "creation_date": 1444251472, "post_id": 33001966, "comment_id": 53829493, "body": "My biggest problem is that if the Ruby File is in the same directory level as my Shell file it will run with out any issues but if it is a folder deeper than the Shell file then it will fail to run."}, {"owner": {"reputation": 6689, "user_id": 273444, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/26988136c0514172417b7c7c863733f2?s=128&d=identicon&r=PG", "display_name": "Alexey Shein", "link": "https://stackoverflow.com/users/273444/alexey-shein"}, "reply_to_user": {"reputation": 47, "user_id": 5172981, "user_type": "registered", "accept_rate": 67, "profile_image": "https://graph.facebook.com/1146756268674720/picture?type=large", "display_name": "Michael O Meara", "link": "https://stackoverflow.com/users/5172981/michael-o-meara"}, "edited": false, "score": 0, "creation_date": 1444252149, "post_id": 33001966, "comment_id": 53829786, "body": "Put <code>set -x</code> and <code>set -e</code> at the beginning of your shell script. That will enable tracing mode and will finish on first non-successful command, very helpful in debugging."}, {"owner": {"reputation": 47, "user_id": 5172981, "user_type": "registered", "accept_rate": 67, "profile_image": "https://graph.facebook.com/1146756268674720/picture?type=large", "display_name": "Michael O Meara", "link": "https://stackoverflow.com/users/5172981/michael-o-meara"}, "edited": false, "score": 0, "creation_date": 1444252171, "post_id": 33001966, "comment_id": 53829794, "body": "trigger.sh: 5: trigger.sh: [[: not found  RVM is not a function, selecting rubies with &#39;rvm use ...&#39; will not work.  You need to change your terminal emulator preferences to allow login shell. Sometimes it is required to use <code>&#47;bin&#47;bash --login</code> as the command. Please visit <a href=\"https://rvm.io/integration/gnome-terminal/\" rel=\"nofollow noreferrer\">rvm.io/integration/gnome-terminal</a> for an example."}, {"owner": {"reputation": 6689, "user_id": 273444, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/26988136c0514172417b7c7c863733f2?s=128&d=identicon&r=PG", "display_name": "Alexey Shein", "link": "https://stackoverflow.com/users/273444/alexey-shein"}, "reply_to_user": {"reputation": 47, "user_id": 5172981, "user_type": "registered", "accept_rate": 67, "profile_image": "https://graph.facebook.com/1146756268674720/picture?type=large", "display_name": "Michael O Meara", "link": "https://stackoverflow.com/users/5172981/michael-o-meara"}, "edited": false, "score": 0, "creation_date": 1444252337, "post_id": 33001966, "comment_id": 53829879, "body": "It seems RVM is not loaded correctly. Can you update your question with contents of your current <code>trigger.sh</code>?"}, {"owner": {"reputation": 47, "user_id": 5172981, "user_type": "registered", "accept_rate": 67, "profile_image": "https://graph.facebook.com/1146756268674720/picture?type=large", "display_name": "Michael O Meara", "link": "https://stackoverflow.com/users/5172981/michael-o-meara"}, "edited": false, "score": 0, "creation_date": 1444252788, "post_id": 33001966, "comment_id": 53830124, "body": "I have updated the question above with the latest version of the <code>trigger.sh</code> file. Just a note that as it stands all the code still runs perfectly when the  <code>trigger.sh</code> is run from terminal the issue is only when it is run using crontab. Thanks again"}, {"owner": {"reputation": 6689, "user_id": 273444, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/26988136c0514172417b7c7c863733f2?s=128&d=identicon&r=PG", "display_name": "Alexey Shein", "link": "https://stackoverflow.com/users/273444/alexey-shein"}, "reply_to_user": {"reputation": 47, "user_id": 5172981, "user_type": "registered", "accept_rate": 67, "profile_image": "https://graph.facebook.com/1146756268674720/picture?type=large", "display_name": "Michael O Meara", "link": "https://stackoverflow.com/users/5172981/michael-o-meara"}, "edited": false, "score": 0, "creation_date": 1444253436, "post_id": 33001966, "comment_id": 53830422, "body": "Try running your <code>trigger.sh</code> script with <code>bash</code>, not <code>sh</code>."}, {"owner": {"reputation": 47, "user_id": 5172981, "user_type": "registered", "accept_rate": 67, "profile_image": "https://graph.facebook.com/1146756268674720/picture?type=large", "display_name": "Michael O Meara", "link": "https://stackoverflow.com/users/5172981/michael-o-meara"}, "edited": false, "score": 0, "creation_date": 1444254003, "post_id": 33001966, "comment_id": 53830682, "body": "Ok tried that in the crontab still not working now the output of the crontab is line 14: ruby: command not found"}], "tags": [], "owner": {"reputation": 6689, "user_id": 273444, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/26988136c0514172417b7c7c863733f2?s=128&d=identicon&r=PG", "display_name": "Alexey Shein", "link": "https://stackoverflow.com/users/273444/alexey-shein"}, "is_accepted": false, "score": 0, "last_activity_date": 1444250045, "creation_date": 1444250045, "answer_id": 33001966, "question_id": 33001423, "link": "https://stackoverflow.com/questions/33001423/trouble-running-ruby-script-using-crontab/33001966#33001966", "title": "Trouble Running Ruby Script Using Crontab?", "body": "<p>It seems you're using <code>rvm</code>. Instead of setting <code>PATH</code> manually, it's better to delegate this job to <code>rvm</code>. In your <code>trigger.sh</code>:</p>\n\n<pre><code>[[ -s \"$HOME/.rvm/scripts/rvm\" ]] &amp;&amp; . \"$HOME/.rvm/scripts/rvm\"\n# or use an absolute path instead of $HOME, just make sure the script get sourced\n# after that you can choose correct ruby with rvm\nrvm use ruby-2.1.5\n</code></pre>\n\n<p>Add to the end of your non-working script <code>2&gt;&amp;1 &gt;&gt; /tmp/errors.txt</code>, so you can see stdout and stderror in one place, this way you will know what exact errors you experience, like this:</p>\n\n<pre><code>ruby Script_Files/trigger_file.rb 2&gt;&amp;1 &gt;&gt; /tmp/errors.txt\n</code></pre>\n"}], "owner": {"reputation": 47, "user_id": 5172981, "user_type": "registered", "accept_rate": 67, "profile_image": "https://graph.facebook.com/1146756268674720/picture?type=large", "display_name": "Michael O Meara", "link": "https://stackoverflow.com/users/5172981/michael-o-meara"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 671, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1444252533, "creation_date": 1444248076, "last_edit_date": 1444252533, "question_id": 33001423, "link": "https://stackoverflow.com/questions/33001423/trouble-running-ruby-script-using-crontab", "title": "Trouble Running Ruby Script Using Crontab?", "body": "<p>this is my third time trying to post this. I am having some trouble running my Ruby Script using a crontab.</p>\n\n<p>Below is my file tree</p>\n\n<pre><code>rubyUbuntuIssue\n    \u251c\u2500\u2500 logFile.txt\n    \u251c\u2500\u2500 RubyFile.rb\n    \u251c\u2500\u2500 Script_Files\n    \u2502\u00a0\u00a0 \u251c\u2500\u2500 logFileTwo.txt\n    \u2502\u00a0\u00a0 \u251c\u2500\u2500 scripttwo.sh\n    \u2502\u00a0\u00a0 \u2514\u2500\u2500 trigger_file.rb\n    \u2514\u2500\u2500 trigger.sh\n</code></pre>\n\n<p>This is my <code>crontab file</code> </p>\n\n<pre><code>SHELL=/bin/bash\nPATH=/usr/sbin:/usr/bin:/sbin:/bin\n\n*/1 * * * * sh /home/ubuntumike/Documents/rubyUbuntuIssue/trigger.sh &gt;&gt; /tmp/mybackup.log\n</code></pre>\n\n<p>This is my <code>trigger.sh</code> file</p>\n\n<pre><code>set -x\nset -e\nSHELL=/bin/bash\n#PATH=/home/ubuntumike/.rvm/gems/ruby-2.1.5/bin:/home/ubuntumike/.rvm/gems/ruby-2.1.5@global/bin:/home/ubuntumike/.rvm/rubies/ruby-2.1.5/bin:/usr/local/sbin:/usr/local/bin:/usr/s$\ncd /home/ubuntumike/Documents/rubyUbuntuIssue\n\n[[ -s \"$HOME/.rvm/scripts/rvm\" ]] &amp;&amp; . \"$HOME/.rvm/scripts/rvm\"\n# or use an absolute path instead of $HOME, just make sure the script get sourced\n# after that you can choose correct ruby with rvm\nrvm use ruby-2.1.5\n\nruby RubyFile.rb;\n\nruby Script_Files/trigger_file.rb 2&gt;&amp;1 &gt;&gt; /tmp/errors.txt;\n\nsh Script_Files/scripttwo.sh\n\necho \"The present working directory is `pwd`\"\necho \"$(date) running  trigger.sh file\"\necho \"`ruby -v`\"\n</code></pre>\n\n<p>When I run <code>trigger.sh</code> directly from terminal everything works perfectly, however when run using <code>crontab</code> only the <code>RubyFile.rb</code> will run which is on the same level as the shell file</p>\n\n<p>Ok so heres what should happen when <code>trigger.sh</code> is executed the 3 scripts \n<code>RubyFile.rb</code>,\n<code>scripttwo.sh</code>, \n<code>trigger_file.rb</code> should run. </p>\n\n<p>When I run this directly from terminal all 3 scripts work as expected.</p>\n\n<p>When I run this using crontab <code>RubyFile.rb</code> and <code>scripttwo.sh</code> will run however <code>trigger_file.rb</code> will not run. I simply don't have a clue what I am doing wrong. \nIf you want you can have a look at the exact code on GitHub <a href=\"https://github.com/omearamike/rubyUbuntuIssue\" rel=\"nofollow\">https://github.com/omearamike/rubyUbuntuIssue</a> .</p>\n\n<p>If anyone can offer some guidance it would be much appreciated as I am completely lost and ran out of options.</p>\n\n<p>Current response in terminal when <code>trigger.sh</code> is run.</p>\n\n<pre><code>+ set -e\n+ SHELL=/bin/bash\n+ cd /home/ubuntumike/Documents/rubyUbuntuIssue\n+ [[ -s /home/ubuntumike/.rvm/scripts/rvm ]] trigger.sh: 7: trigger.sh: [[: not found\n+ rvm use ruby-2.1.5\n\nRVM is not a function, selecting rubies with 'rvm use ...' will not work.\n\nYou need to change your terminal emulator preferences to allow login shell.\nSometimes it is required to use `/bin/bash --login` as the command.\nPlease visit https://rvm.io/integration/gnome-terminal/ for an example.\n\n+ ruby RubyFile.rb\n+ ruby Script_Files/trigger_file.rb\n+ sh Script_Files/scripttwo.sh\nScript_Files/scripttwo.sh: 10: Script_Files/scripttwo.sh: date: not found\nrunning  scripttwo.sh file...........................SUCCESS\n+ pwd\n+ echo The present working directory is /home/ubuntumike/Documents/rubyUbuntuIssue\nThe present working directory is /home/ubuntumike/Documents/rubyUbuntuIssue\n+ date\n+ echo Wed Oct  7 22:10:48 IST 2015 running  trigger.sh file\nWed Oct  7 22:10:48 IST 2015 running  trigger.sh file\n+ ruby -v\n+ echo ruby 2.1.5p273 (2014-11-13 revision 48405) [x86_64-linux]\nruby 2.1.5p273 (2014-11-13 revision 48405) [x86_64-linux]\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "rspec"], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 5308079, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-o5qPnvkvXng/AAAAAAAAAAI/AAAAAAAAF6s/igwhK58isOA/photo.jpg?sz=128", "display_name": "Charlie Tarr", "link": "https://stackoverflow.com/users/5308079/charlie-tarr"}, "edited": false, "score": 0, "creation_date": 1444482689, "post_id": 33001791, "comment_id": 53928828, "body": "Thanks very much Max. Much appreciated."}], "tags": [], "owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "is_accepted": false, "score": 0, "last_activity_date": 1444487692, "last_edit_date": 1444487692, "creation_date": 1444249424, "answer_id": 33001791, "question_id": 33001203, "link": "https://stackoverflow.com/questions/33001203/automatically-emailing-a-user-when-they-create-a-post/33001791#33001791", "title": "Automatically emailing a user when they create a post", "body": "<p>I would not use a model callback to handle these kind of lifecycle events.</p>\n\n<h3>Why?</h3>\n\n<p>Because it is going to be called whenever you create a record which means you will have to override it in your tests.\nActiveRecord models can easily become godlike and bloated and notifying users is a bit beyond the models job of maintaining data and business logic. </p>\n\n<p>It will also get in the way of delegating the notifications to a background job, which is very important if you need to send multiple emails.</p>\n\n<h2>So what then?</h2>\n\n<p>Well, we could stuff it in the controller. But that might not be optimal since controllers are PITA to test and we like 'em skinny.</p>\n\n<p>So let's create an object with the single task of notifying the user:</p>\n\n<pre><code>module PostCreationNotifier\n  def self.call(post)\n    FavoriteMailer.new_post(post.user, post)\n  end\nend\n</code></pre>\n\n<p>And then we add it to the controller action:</p>\n\n<pre><code>def create\n  @post = Post.new(post_params)\n  if @post.save\n    redirect_to @post\n    PostCreationNotifier.call(@post)\n  else\n    render :new\n  end\nend\n</code></pre>\n\n<p><strong>But - this probably is not what you want! Doh!</strong> It will only notify the creator that she just created a post - and she already knows that!</p>\n\n<p>If we want to notify all the participants of a response we probably need to look at the thread and send an email to all of the participants:</p>\n\n<pre><code>module PostCreationNotifier\n  def self.call(post)\n    post.thread.followers.map do |f|\n      FavoriteMailer.new_post(f, post)\n    end\n  end\nend\n</code></pre>\n\n<hr>\n\n<pre><code>describe PostCreationNotifier do\n\n  let(:followers) { 2.times.map { create(:user) } }\n  let(:post){ create(:post, thread: create(:thread, followers: followers)) }\n  let(:mails) { PostCreationNotifier.call(post) }\n\n  it \"sends an email to each of the followers\" do\n    expect(mails.first.to).to eq followers.first.email\n    expect(mails.last.to).to eq followers.last.email\n  end\nend\n</code></pre>\n\n<p>The pattern is called service objects. Having a simple object which takes care of a single task is easy to test and will make it easier to implement sending the emails in a background job. I'll leave that part to you.</p>\n\n<p>Further reading:</p>\n\n<ul>\n<li><a href=\"http://www.sitepoint.com/comparing-background-processing-libraries-sidekiq/\" rel=\"nofollow\">http://www.sitepoint.com/comparing-background-processing-libraries-sidekiq/</a></li>\n<li><a href=\"https://blog.engineyard.com/2014/keeping-your-rails-controllers-dry-with-services\" rel=\"nofollow\">https://blog.engineyard.com/2014/keeping-your-rails-controllers-dry-with-services</a></li>\n</ul>\n"}], "owner": {"reputation": 1, "user_id": 5308079, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-o5qPnvkvXng/AAAAAAAAAAI/AAAAAAAAF6s/igwhK58isOA/photo.jpg?sz=128", "display_name": "Charlie Tarr", "link": "https://stackoverflow.com/users/5308079/charlie-tarr"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 68, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1444487692, "creation_date": 1444247413, "question_id": 33001203, "link": "https://stackoverflow.com/questions/33001203/automatically-emailing-a-user-when-they-create-a-post", "title": "Automatically emailing a user when they create a post", "body": "<p>I am a trainee full stack developer learning ruby on rails and am in month 1 of a 6 month intensive course.  </p>\n\n<p>I am working on a 'reddit' style app where users can create topics, posts and comments. </p>\n\n<p>I am trying to automatically email a user when they create a new post. </p>\n\n<p>I am using ActionMailer for this. </p>\n\n<p>I am working on an after_create callback in my post model and a method in a mailer called 'favorite_mailer'. </p>\n\n<p>The problem I am facing, is that I am unable to successfully implement an after_create callback, which triggers an email to be automatically sent to a user after they create a post. </p>\n\n<p>I have defined a method in my mailer called new_post, which should receive 2 arguments (user, post). </p>\n\n<p>I have defined a callback method in my Post model called send_new_post email but can't make it pass my Rspec tests. </p>\n\n<p>Any help will be greatly appreciated. </p>\n\n<p>I have created the following Post model spec:</p>\n\n<pre><code>describe \"send_new_post_email\" do\n  it \"triggers an after_create callback called send_new_post_email\" do\n    expect(post).to receive(:send_new_post_email).at_least(:once)\n    post.send(:send_new_post_email)\n  end\n   it \"sends an email to users when they create a new post\" do\n     expect(FavoriteMailer).to receive(:new_post).with(user, post).and_return(double(deliver_now: true))\n     post.save\n   end\n end\n</code></pre>\n\n<p>Here is my Post Model (the relevant bit being the send_new_post_email callback): </p>\n\n<pre><code>class Post &lt; ActiveRecord::Base\n  belongs_to :topic\n  belongs_to :user\n  has_many :comments, dependent: :destroy\n  has_many :votes, dependent: :destroy\n  has_many :favorites, dependent: :destroy\n  has_many :labelings, as: :labelable\n  has_many :labels, through: :labelings\n  after_create :create_vote\n  after_create :create_favorite\n  after_create :send_new_post_email\n  default_scope { order('rank DESC') }\n\n\n  validates :title, length: { minimum: 5 }, presence: true\n  validates :body, length: { minimum: 20 }, presence: true\n  validates :topic, presence: true\n  validates :user, presence: true\n\n  def up_votes\n    votes.where(value: 1).count\n  end\n\n  def down_votes\n    votes.where(value: -1).count\n  end\n\n  def points\n    votes.sum(:value)\n  end\n\n  def update_rank\n     age_in_days = (created_at - Time.new(1970,1,1)) / 1.day.seconds\n     new_rank = points + age_in_days\n     update_attribute(:rank, new_rank)\n   end\n\n   private\n\n   def create_vote\n     user.votes.create(value: 1, post: self)\n   end\n\n   def create_favorite\n     user.favorites.create(post: self)\n   end\n\n   def send_new_post_email\n     FavoriteMailer.new_post(self.user, self)\n   end\nend\n</code></pre>\n\n<p>Finally, here is my mailer: </p>\n\n<pre><code>class FavoriteMailer &lt; ApplicationMailer\n  default from: \"charlietarr1@gmail.com\"\n\n  def new_comment(user, post, comment)\n\n # #18\n     headers[\"Message-ID\"] = \"&lt;comments/#{comment.id}@your-app-name.example&gt;\"\n     headers[\"In-Reply-To\"] = \"&lt;post/#{post.id}@your-app-name.example&gt;\"\n     headers[\"References\"] = \"&lt;post/#{post.id}@your-app-name.example&gt;\"\n\n     @user = user\n     @post = post\n     @comment = comment\n\n # #19\n     mail(to: user.email, subject: \"New comment on #{post.title}\")\n   end\n\n   def new_post(user, post)\n\n  # #18\n      headers[\"Message-ID\"] = \"&lt;post/#{post.id}@your-app-name.example&gt;\"\n      headers[\"In-Reply-To\"] = \"&lt;post/#{post.id}@your-app-name.example&gt;\"\n      headers[\"References\"] = \"&lt;post/#{post.id}@your-app-name.example&gt;\"\n\n      @user = user\n      @post = post\n\n  # #19\n      mail(to: user.email, subject: \"You have favorited #{post.title}\")\n    end\n\nend\n</code></pre>\n"}, {"tags": ["ruby", "rspec", "sinatra"], "answers": [{"tags": [], "owner": {"reputation": 2359, "user_id": 405454, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/IDzwW.png?s=128&g=1", "display_name": "mhutter", "link": "https://stackoverflow.com/users/405454/mhutter"}, "is_accepted": false, "score": 0, "last_activity_date": 1444386244, "creation_date": 1444386244, "answer_id": 33035809, "question_id": 33000984, "link": "https://stackoverflow.com/questions/33000984/how-do-i-test-a-method-gets-called-in-a-sinatra-controller/33035809#33035809", "title": "How do I test a method gets called in a Sinatra controller?", "body": "<pre><code>it 'sends a message to the user when user signs up' do\n  allow_any_instance_of(RestClient::Request).to receive(:execute).with(any_args)\n  expect(app).to receive(:send_email)\n  post '/users', params={email: \"example@email.com\", \n                      username: \"Adrian17\", \n                      password: \"adrian1\", \n                      password_confirmation: 'adrian1'}\nend\n</code></pre>\n\n<p>That should get you flying!</p>\n"}], "owner": {"reputation": 49, "user_id": 5419073, "user_type": "registered", "accept_rate": 0, "profile_image": "https://graph.facebook.com/10207884190206520/picture?type=large", "display_name": "Adrian Booth", "link": "https://stackoverflow.com/users/5419073/adrian-booth"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 405, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1444386244, "creation_date": 1444246706, "last_edit_date": 1444247176, "question_id": 33000984, "link": "https://stackoverflow.com/questions/33000984/how-do-i-test-a-method-gets-called-in-a-sinatra-controller", "title": "How do I test a method gets called in a Sinatra controller?", "body": "<p>I'm trying to test that a method gets called in my Sinatra controller using Rspec. I'm making a clone of Twitter for a mini-project, and want to make sure that every time a new user signs up, an email gets sent. </p>\n\n<p>This works using Mailgun, a ruby gem, and emails have been sent out once a new user signs up. </p>\n\n<p>The problem is in the testing. I've written a method in the controller called send_mail that only gets called when the user signs up. Ignore the contents of this method, they're not that important for the purposes of this question. Just know that it works. </p>\n\n<pre><code>def send_email\n  RestClient::Request.execute(\n  url: \"https://api:key-7af11fe0adc2a642e55d33744117e7d2\"\\\n  \"@api.mailgun.net/v3/sandbox1aad2b9369f348018e3b435a1026927c.mailgun.org/messages\",\n  :method =&gt; :post,\n  :payload =&gt; {\n  :from =&gt; 'Mailgun Sandbox &lt;postmaster@sandbox1aad2b9369f348018e3b435a1026927c.mailgun.org&gt;',\n  :sender =&gt; 'Mailgun Sandbox &lt;postmaster@sandbox1aad2b9369f348018e3b435a1026927c.mailgun.org&gt;',\n  :to =&gt; params[:email],\n  :subject =&gt; \"Welcome to Chitter\",\n  :text =&gt; \"Welcome to Adrian's awesome Chitter site. \" + params[:username] + \".Get Chittering!\",\n  :multipart =&gt; true\n  },\n  :headers =&gt; {\n    :\"h:X-My-Header\" =&gt; \"www/mailgun-email-send\"\n  },\n  :verify_ssl =&gt; false\n  )\nend\n</code></pre>\n\n<p>This method (send_email) gets called in the post request on the 8th line below. </p>\n\n<pre><code>  post '/users' do\n@user = User.create(email: params[:email],\n            username: params[:username],\n            password: params[:password],\n            password_confirmation: params[:password_confirmation])\n\nif @user.save\n  session[:user_id] = @user.id\n  send_email\n  redirect '/peeps'\nelse\n  flash.now[:errors] = @user.errors.full_messages\n  erb :'users/new'\nend\nend\n</code></pre>\n\n<p>I've written a bunch of tests, one to test that the app even responds to the method, and second to test that the send_email method is being called when a new user signs up.</p>\n\n<pre><code>describe Chitter do\ninclude Rack::Test::Methods\n\ndef app\n Chitter.new!\nend\n\nit 'has send_email method' do\n expect(app).to respond_to :send_email\nend\n\nit 'sends a message to the user when user signs up' do\n allow_any_instance_of(RestClient::Request).to receive(:execute).with(any_args)\n post '/users', params={email: \"example@email.com\", \n                      username: \"Adrian17\", \n                      password: \"adrian1\", \n                      password_confirmation: 'adrian1'}\n expect(app).to have_received(:send_email)\nend\n</code></pre>\n\n<p>Our first test passes (the app should respond to send_email) but the second one doesn't. The error message we get is saying the method has not been stubbed. </p>\n\n<pre><code>Failure/Error: expect(app).to have_received(:send_email)\n   #&lt;Chitter:0x007f959e8e3088&gt; expected to have received send_email, but that object is not a spy or method has not been stubbed.\n</code></pre>\n\n<p>Many hours have been spent on this, with varying pairs of eyes giving it a go, but nothing we do has managed to make this test pass. Any guidance on where we might be going wrong? </p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 2374, "user_id": 115192, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Nsobz.jpg?s=128&g=1", "display_name": "gernberg", "link": "https://stackoverflow.com/users/115192/gernberg"}, "edited": false, "score": 4, "creation_date": 1444246746, "post_id": 33000895, "comment_id": 53826809, "body": "A good tip to help others help you in the future is to paste your code in the question and the error message you get."}, {"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 4, "creation_date": 1444246752, "post_id": 33000895, "comment_id": 53826811, "body": "Post code as characters, not as a picture."}, {"owner": {"reputation": 95, "user_id": 1751930, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/6253bb19dcd8c77aabc0dc3b9bea1737?s=128&d=identicon&r=PG", "display_name": "Craig Rinde", "link": "https://stackoverflow.com/users/1751930/craig-rinde"}, "edited": false, "score": 0, "creation_date": 1444246816, "post_id": 33000895, "comment_id": 53826856, "body": "thanks for the advice"}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 2, "creation_date": 1444246837, "post_id": 33000895, "comment_id": 53826872, "body": "I&#39;m going to doubly complain about the image. Not only is it hard to read, but it&#39;s useless when it comes to testing your code. Nobody is going to retype all that to test and repair it. Pasting as clean, formatted code makes it considerably easier to provide a working solution."}], "answers": [{"comments": [{"owner": {"reputation": 977, "user_id": 4142552, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-Puiw1rqSrjE/AAAAAAAAAAI/AAAAAAAAASA/2u6qPeqLeYY/photo.jpg?sz=128", "display_name": "court3nay", "link": "https://stackoverflow.com/users/4142552/court3nay"}, "edited": false, "score": 1, "creation_date": 1444247026, "post_id": 33000980, "comment_id": 53826984, "body": "Agree! You could also iterate with something like ` [1..9].each do ` instead of @numbers,  but the &quot;best&quot; way to do this is to make a separate Card model, with the paper weight, types and quantity as fields on the card, and then just do ` @order.cards.each do |card| ` -- it looks like you&#39;re learning rails, good luck with it!"}, {"owner": {"reputation": 95, "user_id": 1751930, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/6253bb19dcd8c77aabc0dc3b9bea1737?s=128&d=identicon&r=PG", "display_name": "Craig Rinde", "link": "https://stackoverflow.com/users/1751930/craig-rinde"}, "edited": false, "score": 0, "creation_date": 1444247405, "post_id": 33000980, "comment_id": 53827196, "body": "I think as of now my understanding is flawed. I am new at rails and right now I am just trying to get this code to email me the details. RIght now the information is coming from a user submitted form and the user can have up to 9 cards. They can only select 1 card if they want to and I only want to. in the email I don&#39;t want to show all of the information so I am trying to use this set up. Later once I learn more I want to add the fancier structuring of having users have many cards type setup."}], "tags": [], "owner": {"reputation": 2374, "user_id": 115192, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Nsobz.jpg?s=128&g=1", "display_name": "gernberg", "link": "https://stackoverflow.com/users/115192/gernberg"}, "is_accepted": false, "score": 3, "last_activity_date": 1444247181, "last_edit_date": 1444247181, "creation_date": 1444246690, "answer_id": 33000980, "question_id": 33000895, "link": "https://stackoverflow.com/questions/33000895/ruby-on-rails-iteration-syntax-error/33000980#33000980", "title": "Ruby on Rails: Iteration syntax error", "body": "<p>If you <em>really</em> want to do it this way you could use the method send, in this way:</p>\n\n<pre><code>if @order.send(\"cardtype#{n}\") != \"none\"\n</code></pre>\n\n<p>This will execute the method \"cardtype#{n}\" on the @order object.</p>\n\n<p>However, this is generally not the best idea and I would suggest you look into turning this attribute in to a has_many relation or perhaps a serializable array.</p>\n\n<p>Check out this tutorial on how associations work (it is most likely what you want to use): <a href=\"http://guides.rubyonrails.org/association_basics.html\" rel=\"nofollow\">http://guides.rubyonrails.org/association_basics.html</a></p>\n"}, {"comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 1, "creation_date": 1444246934, "post_id": 33001031, "comment_id": 53826934, "body": "The <code>[]</code> notation does read a lot better. It&#39;s worth noting that your comments on the poor design decision stem from violating the <a href=\"https://en.wikipedia.org/wiki/Zero_one_infinity_rule\" rel=\"nofollow noreferrer\">Zero, One or Infinity Rule</a> of software design. This seems to be a good candidate for a <code>has_many</code> relationship rather than a pile of columns."}, {"owner": {"reputation": 163714, "user_id": 123527, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/99e0b39c091e10d9c7d4452a34ca52dc?s=128&d=identicon&r=PG", "display_name": "Simone Carletti", "link": "https://stackoverflow.com/users/123527/simone-carletti"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1444247092, "post_id": 33001031, "comment_id": 53827024, "body": "@tadman I agree about the <code>has_many</code>, that&#39;s why I put some emphasis on it. I really feel that having method names with index values is a terrible approach."}, {"owner": {"reputation": 95, "user_id": 1751930, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/6253bb19dcd8c77aabc0dc3b9bea1737?s=128&d=identicon&r=PG", "display_name": "Craig Rinde", "link": "https://stackoverflow.com/users/1751930/craig-rinde"}, "edited": false, "score": 0, "creation_date": 1444247532, "post_id": 33001031, "comment_id": 53827285, "body": "Thanks for the information on the Zero Infinty rule. I will look into the has_many. I think my understanding is just not there yet and I am hacking it together."}, {"owner": {"reputation": 95, "user_id": 1751930, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/6253bb19dcd8c77aabc0dc3b9bea1737?s=128&d=identicon&r=PG", "display_name": "Craig Rinde", "link": "https://stackoverflow.com/users/1751930/craig-rinde"}, "edited": false, "score": 0, "creation_date": 1444247763, "post_id": 33001031, "comment_id": 53827455, "body": "I am getting undefined method `[]&#39; for #&lt;Order:0x000001124fa070&gt; I copied your first syntax. @order[&quot;cardtype#{n}&quot;]"}], "tags": [], "owner": {"reputation": 163714, "user_id": 123527, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/99e0b39c091e10d9c7d4452a34ca52dc?s=128&d=identicon&r=PG", "display_name": "Simone Carletti", "link": "https://stackoverflow.com/users/123527/simone-carletti"}, "is_accepted": false, "score": 1, "last_activity_date": 1444246833, "creation_date": 1444246833, "answer_id": 33001031, "question_id": 33000895, "link": "https://stackoverflow.com/questions/33000895/ruby-on-rails-iteration-syntax-error/33001031#33001031", "title": "Ruby on Rails: Iteration syntax error", "body": "<p>As far as I understand, <code>cardtypeN</code> is a method (database column?) where N is an integer. It means there is no easy way to loop over these attributes as for the Ruby virtual machine itself these methods have no connections each other even if you call them <code>cardtype1</code>, <code>cardtype2</code>, etc.</p>\n\n<p>And in fact, your code highlights a very poor design decision to me. If an order can have more card types, you should really h ave a cardtype model and associate order and cardtypes with a 1-to-many relationship.</p>\n\n<p>However, to answer your question, you can dynamically compose the method using one of the following approaches:</p>\n\n<pre><code># [] syntax\n@order[\"cardtype#{n}\"]\n# send\n@order.send(\"cardtype#{n}\")\n</code></pre>\n\n<p>Each method has its own advantages and disadvantages. Said that, you can loop from 1 to the number of maximum cardtypes</p>\n\n<pre><code>&lt;% 1.to(10).each do |index| %&gt;\n  &lt;% if @order[\"cardtype#{index}\"] != \"none\" %&gt;\n     whatever\n  &lt;% end %&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>However, as I mentioned, you really want to redesign your model.</p>\n"}], "owner": {"reputation": 95, "user_id": 1751930, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/6253bb19dcd8c77aabc0dc3b9bea1737?s=128&d=identicon&r=PG", "display_name": "Craig Rinde", "link": "https://stackoverflow.com/users/1751930/craig-rinde"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 123, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1444247703, "creation_date": 1444246366, "last_edit_date": 1444247703, "question_id": 33000895, "link": "https://stackoverflow.com/questions/33000895/ruby-on-rails-iteration-syntax-error", "title": "Ruby on Rails: Iteration syntax error", "body": "<p><a href=\"https://i.stack.imgur.com/PWNdX.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/PWNdX.png\" alt=\"enter image description here\"></a></p>\n\n<p>I am trying to get this loop to iterate numbers at the end of cardtype. I can't figure out the right syntax. I have tried a bunch of different things.</p>\n\n<p>See red arrow.</p>\n"}, {"tags": ["ruby", "nokogiri"], "comments": [{"owner": {"reputation": 1143, "user_id": 1563837, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/0784ce3665c294c4547f81a212014d4b?s=128&d=identicon&r=PG", "display_name": "Josh Bodah", "link": "https://stackoverflow.com/users/1563837/josh-bodah"}, "edited": false, "score": 1, "creation_date": 1444247499, "post_id": 33000882, "comment_id": 53827267, "body": "What about just using <code>Symbol#to_s</code>?"}, {"owner": {"reputation": 11845, "user_id": 1536527, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/Sgr8O.png?s=128&g=1", "display_name": "ironsand", "link": "https://stackoverflow.com/users/1536527/ironsand"}, "reply_to_user": {"reputation": 1143, "user_id": 1563837, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/0784ce3665c294c4547f81a212014d4b?s=128&d=identicon&r=PG", "display_name": "Josh Bodah", "link": "https://stackoverflow.com/users/1563837/josh-bodah"}, "edited": false, "score": 0, "creation_date": 1444249046, "post_id": 33000882, "comment_id": 53828225, "body": "it&#39;s more irksome for me to write <code>&#39;href&#39;</code>, thanks anyway."}, {"owner": {"reputation": 74087, "user_id": 214790, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f878c8230342730990acd21f889301d4?s=128&d=identicon&r=PG", "display_name": "matt", "link": "https://stackoverflow.com/users/214790/matt"}, "edited": false, "score": 0, "creation_date": 1444249392, "post_id": 33000882, "comment_id": 53828401, "body": "Have you tried using a symbol?"}, {"owner": {"reputation": 11845, "user_id": 1536527, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/Sgr8O.png?s=128&g=1", "display_name": "ironsand", "link": "https://stackoverflow.com/users/1536527/ironsand"}, "edited": false, "score": 0, "creation_date": 1444249456, "post_id": 33000882, "comment_id": 53828431, "body": "yes, and it failed with <code>TypeError: no implicit conversion of Symbol into String</code>"}], "answers": [{"comments": [{"owner": {"reputation": 11845, "user_id": 1536527, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/Sgr8O.png?s=128&g=1", "display_name": "ironsand", "link": "https://stackoverflow.com/users/1536527/ironsand"}, "edited": false, "score": 0, "creation_date": 1444375593, "post_id": 33003599, "comment_id": 53886465, "body": "Thanks! Just a small fix, when I use symbol I didn&#39;t need to use <code>value</code> method. <code>doc.at_css(&#39;a#foo&#39;).attr(:href)</code> returns string value."}], "tags": [], "owner": {"reputation": 74087, "user_id": 214790, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f878c8230342730990acd21f889301d4?s=128&d=identicon&r=PG", "display_name": "matt", "link": "https://stackoverflow.com/users/214790/matt"}, "is_accepted": true, "score": 1, "last_activity_date": 1444257555, "creation_date": 1444257555, "answer_id": 33003599, "question_id": 33000882, "link": "https://stackoverflow.com/questions/33000882/is-there-a-way-to-access-nokogirixmlattr-by-using-a-symbol-key-not-a-string/33003599#33003599", "title": "Is there a way to access Nokogiri::XML::Attr by using a symbol key, not a string key", "body": "<p>You are calling <a href=\"http://www.rubydoc.info/github/sparklemotion/nokogiri/Nokogiri/XML/NodeSet#attr-instance_method\" rel=\"nofollow\"><code>attr</code></a> on the <a href=\"http://www.rubydoc.info/github/sparklemotion/nokogiri/Nokogiri/XML/NodeSet\" rel=\"nofollow\"><code>NodeSet</code></a> returned from <a href=\"http://www.rubydoc.info/github/sparklemotion/nokogiri/Nokogiri/XML/Searchable#css-instance_method\" rel=\"nofollow\"><code>css</code></a>, not on a single <a href=\"http://www.rubydoc.info/github/sparklemotion/nokogiri/Nokogiri/XML/Node\" rel=\"nofollow\"><code>Node</code></a> object. <a href=\"http://www.rubydoc.info/github/sparklemotion/nokogiri/Nokogiri/XML/Node#%5B%5D-instance_method\" rel=\"nofollow\"><code>attr</code> on a <code>Node</code></a> will accept a symbol to specify the attribute, and <a href=\"https://github.com/sparklemotion/nokogiri/commit/6ac0e37db1d4edee1cd45c1ae2b639c7cad8c4a9\" rel=\"nofollow\">has done for a while</a>, but it looks like the corresponding change hasn\u2019t been made to <code>NodeSet#attr</code>. Note that the <code>NodeSet</code> version of <code>attr</code> is for setting the attribute on all nodes in the set, and will only return the value of the attribute on the <em>first</em> node it contains if you don\u2019t specify a value.</p>\n\n<p>You can use <a href=\"http://www.rubydoc.info/github/sparklemotion/nokogiri/Nokogiri/XML/Searchable#at_css-instance_method\" rel=\"nofollow\"><code>at_css</code></a> to explicitly only select the first matching node of your query, then you can use a symbol:</p>\n\n<pre><code>doc.at_css('a#foo').attr(:href).value\n</code></pre>\n\n<p>Alternatively you could select the node from the node set by its index:</p>\n\n<pre><code>doc.css('a#foo')[0].attr(:href).value\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "is_accepted": false, "score": 1, "last_activity_date": 1444521969, "last_edit_date": 1444521969, "creation_date": 1444521665, "answer_id": 33060234, "question_id": 33000882, "link": "https://stackoverflow.com/questions/33000882/is-there-a-way-to-access-nokogirixmlattr-by-using-a-symbol-key-not-a-string/33060234#33060234", "title": "Is there a way to access Nokogiri::XML::Attr by using a symbol key, not a string key", "body": "<p>The simple way to access a parameter in a tag is to use the \"hash\" <code>[]</code> syntax:</p>\n\n<pre><code>require 'nokogiri'\n\nhtml = &lt;&lt;EOT\n&lt;html&gt;\n  &lt;body&gt;\n    &lt;a href=\"blah\" id=\"foo\"&gt;bar&lt;/a&gt;\n  &lt;/body&gt;\n&lt;/html&gt;\nEOT\n\ndoc = Nokogiri::HTML(html)\ndoc.at('a#foo')['href'] # =&gt; \"blah\"\n</code></pre>\n\n<p>But we can use a symbol:</p>\n\n<pre><code>doc.at('a#foo')[:href] # =&gt; \"blah\"\n</code></pre>\n\n<p>Note, <code>at</code> is equivalent to <code>search('a#foo').first</code>, and both return a Node. <code>search</code>, and its CSS and XPath variants return NodeSets, which don't have the ability to return the attribute of a specific node or all nodes. To process multiple nodes use <code>map</code>:</p>\n\n<pre><code>html = &lt;&lt;EOT\n&lt;html&gt;\n  &lt;body&gt;\n    &lt;a href=\"blah\" class=\"foo\"&gt;bar1&lt;/a&gt;\n    &lt;a href=\"more_blah\" class=\"foo\"&gt;bar2&lt;/a&gt;\n  &lt;/body&gt;\n&lt;/html&gt;\nEOT\n\ndoc = Nokogiri::HTML(html)\ndoc.search('a.foo').map{ |n| n['href'] } # =&gt; [\"blah\", \"more_blah\"]\n</code></pre>\n"}], "owner": {"reputation": 11845, "user_id": 1536527, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/Sgr8O.png?s=128&g=1", "display_name": "ironsand", "link": "https://stackoverflow.com/users/1536527/ironsand"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 243, "favorite_count": 0, "accepted_answer_id": 33003599, "answer_count": 2, "score": 0, "last_activity_date": 1444521969, "creation_date": 1444246317, "question_id": 33000882, "link": "https://stackoverflow.com/questions/33000882/is-there-a-way-to-access-nokogirixmlattr-by-using-a-symbol-key-not-a-string", "title": "Is there a way to access Nokogiri::XML::Attr by using a symbol key, not a string key", "body": "<p>I have a code like this</p>\n\n<pre><code>require 'nokogiri'\nurl = ENV['URL']\ndoc = Nokogiri::HTML(open(url))\nlink = doc.css('a#foo').attr('href').value\n</code></pre>\n\n<p>I want to access to <code>Nokogiri::XML::Attr</code> by using symbol like this.</p>\n\n<pre><code>doc = Nokogiri::HTML(open(url), hash_key_symbol: true)\nlink = doc.css('a#foo').attr(:href).value\n</code></pre>\n\n<p>I couldn't find information for it, but maybe I've overlooked it.\nIs there a option like this?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4", "devise", "carrierwave"], "answers": [{"comments": [{"owner": {"reputation": 255, "user_id": 2806814, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/66ab2e4cd2fc3dbe8f2e44b109ce7846?s=128&d=identicon&r=PG&f=1", "display_name": "I want to delete my account", "link": "https://stackoverflow.com/users/2806814/i-want-to-delete-my-account"}, "edited": false, "score": 0, "creation_date": 1444248143, "post_id": 33001383, "comment_id": 53827709, "body": "Sorry I&#39;ve forget to say that the picture was attached and form submitted with it."}, {"owner": {"reputation": 31319, "user_id": 981183, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/88dd7155ef7c0e5f43ab8d1a9efdecab?s=128&d=identicon&r=PG&f=1", "display_name": "K M Rakibul Islam", "link": "https://stackoverflow.com/users/981183/k-m-rakibul-islam"}, "reply_to_user": {"reputation": 255, "user_id": 2806814, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/66ab2e4cd2fc3dbe8f2e44b109ce7846?s=128&d=identicon&r=PG&f=1", "display_name": "I want to delete my account", "link": "https://stackoverflow.com/users/2806814/i-want-to-delete-my-account"}, "edited": false, "score": 1, "creation_date": 1444248953, "post_id": 33001383, "comment_id": 53828175, "body": "did you follow the article as it is? or you added some of your own stuff too? Your <code>configure_permitted_parameters</code> looks different than the one in here: <a href=\"https://github.com/carrierwaveuploader/carrierwave/wiki/how-to:-use-carrierwave-with-devise\" rel=\"nofollow noreferrer\">github.com/carrierwaveuploader/carrierwave/wiki/&hellip;</a>"}, {"owner": {"reputation": 255, "user_id": 2806814, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/66ab2e4cd2fc3dbe8f2e44b109ce7846?s=128&d=identicon&r=PG&f=1", "display_name": "I want to delete my account", "link": "https://stackoverflow.com/users/2806814/i-want-to-delete-my-account"}, "edited": false, "score": 0, "creation_date": 1444317432, "post_id": 33001383, "comment_id": 53862497, "body": "Nope, nothing, I removed my original Devise based strong parameters and added this carrierwave parameters, but nothing... the problem still exits"}], "tags": [], "owner": {"reputation": 31319, "user_id": 981183, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/88dd7155ef7c0e5f43ab8d1a9efdecab?s=128&d=identicon&r=PG&f=1", "display_name": "K M Rakibul Islam", "link": "https://stackoverflow.com/users/981183/k-m-rakibul-islam"}, "is_accepted": false, "score": 1, "last_activity_date": 1444247973, "creation_date": 1444247973, "answer_id": 33001383, "question_id": 33000851, "link": "https://stackoverflow.com/questions/33000851/avatar-picture-cant-be-blank-after-avatar-attached-and-form-submitted-carri/33001383#33001383", "title": "Avatar (picture) can&#39;t be blank after avatar attached and form submitted - carrierwave error", "body": "<p>Because you have this validation:</p>\n\n<pre><code>validates_presence_of :avatar\n</code></pre>\n\n<p>means, you have to upload an avatar.</p>\n\n<p>You will get this error message: <code>Avatar can't be blank</code> if you try to submit the form without attaching the avatar.</p>\n\n<p>So, make sure you attach an avatar before hitting the <code>Sign Up</code> button.</p>\n"}], "owner": {"reputation": 255, "user_id": 2806814, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/66ab2e4cd2fc3dbe8f2e44b109ce7846?s=128&d=identicon&r=PG&f=1", "display_name": "I want to delete my account", "link": "https://stackoverflow.com/users/2806814/i-want-to-delete-my-account"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 736, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1449779156, "creation_date": 1444246223, "last_edit_date": 1449779156, "question_id": 33000851, "link": "https://stackoverflow.com/questions/33000851/avatar-picture-cant-be-blank-after-avatar-attached-and-form-submitted-carri", "title": "Avatar (picture) can&#39;t be blank after avatar attached and form submitted - carrierwave error", "body": "<p>I am a newbie in Rails. I use Rails 4.2 with Ruby 2.0, I've installed the <strong>carrierwave</strong> gem. I followed the instructions <a href=\"https://github.com/carrierwaveuploader/carrierwave/wiki/how-to:-use-carrierwave-with-devise\" rel=\"nofollow\">how to setup with devise</a>.</p>\n\n<p>But the validation or the picture does not work correctly, cause I always get the <em>\"Avatar can't be blank\"</em> error message <strong>when I attached a picture and submit the form</strong>. I have no idea where is my mistake.</p>\n\n<p>User model:</p>\n\n<pre><code>class User &lt; ActiveRecord::Base\nmount_uploader :avatar, AvatarUploader\n\n# Include default devise modules. Others available are:\n# :confirmable, :lockable, :timeoutable and :omniauthable\ndevise :database_authenticatable, :registerable, :recoverable, :rememberable, :trackable, :validatable, \n       :omniauthable, :omniauth_providers =&gt; [:facebook, :google_oauth2]\n\nafter_initialize :set_default_role, :if =&gt; :new_record?\n\n# Validations\nvalidates_presence_of   :avatar\nvalidates_integrity_of  :avatar\nvalidates_processing_of :avatar\n\ndef self.from_omniauth(auth)\n    where(provider: auth.provider, uid: auth.uid).first_or_create do |user|\n        user.name = auth.info.nickname\n        user.email = auth.info.email\n        user.password = Devise.friendly_token[0,20]\n    end\nend\n\nend\n</code></pre>\n\n<p>Sign up form</p>\n\n<pre><code>    &lt;h2&gt;Sign up&lt;/h2&gt;\n\n&lt;%= form_for(resource, as: resource_name, url: registration_path(resource_name), html: { multipart: true }) do |f| %&gt;\n  &lt;%= devise_error_messages! %&gt;\n\n  &lt;div class=\"field\"&gt;\n    &lt;%= f.label :name %&gt;&lt;br /&gt;\n    &lt;%= f.text_field :name, autofocus: true %&gt;\n  &lt;/div&gt;\n\n  &lt;div class=\"field\"&gt;\n    &lt;%= f.label 'Woman' %&gt;&lt;br /&gt;\n    &lt;%= f.radio_button :gender, 'Woman' %&gt;\n    &lt;br&gt;\n    &lt;%= f.label 'Man' %&gt;&lt;br /&gt;\n    &lt;%= f.radio_button :gender, 'Man' %&gt;\n  &lt;/div&gt;\n\n  &lt;div class=\"field\"&gt;\n    &lt;%= f.label :email %&gt;&lt;br /&gt;\n    &lt;%= f.email_field :email %&gt;\n  &lt;/div&gt;\n\n  &lt;div class=\"field\"&gt;\n    &lt;%= f.label :phone %&gt;&lt;br /&gt;\n    &lt;%= f.text_field :phone %&gt;\n  &lt;/div&gt;\n\n  &lt;div class=\"field\"&gt;\n    &lt;%= f.label :password %&gt;\n    &lt;% if @minimum_password_length %&gt;\n    &lt;em&gt;(&lt;%= @minimum_password_length %&gt; characters minimum)&lt;/em&gt;\n    &lt;% end %&gt;&lt;br /&gt;\n    &lt;%= f.password_field :password, autocomplete: \"off\" %&gt;\n  &lt;/div&gt;\n\n  &lt;div class=\"field\"&gt;\n    &lt;%= f.label :password_confirmation %&gt;&lt;br /&gt;\n    &lt;%= f.password_field :password_confirmation, autocomplete: \"off\" %&gt;\n  &lt;/div&gt;\n\n  &lt;div class=\"field\"&gt;\n    &lt;%= f.label :city %&gt;&lt;br /&gt;\n    &lt;%= f.text_field :city %&gt;\n  &lt;/div&gt;\n\n  &lt;div class=\"field\"&gt;\n    &lt;%= f.label :county %&gt;&lt;br /&gt;\n    &lt;%= f.text_field :county %&gt;\n  &lt;/div&gt;\n\n  &lt;div class=\"field\"&gt;\n    &lt;label&gt;My Avatar&lt;/label&gt;\n    &lt;%= f.file_field :avatar %&gt;\n    &lt;%= f.hidden_field :avatar_cache %&gt;\n  &lt;/div&gt;\n\n  &lt;div class=\"actions\"&gt;\n    &lt;%= f.submit \"Sign up\" %&gt;\n  &lt;/div&gt;\n&lt;% end %&gt;\n\n&lt;%= render \"users/shared/links\" %&gt;\n</code></pre>\n\n<p>Application controller's strong parameters:</p>\n\n<pre><code>  def configure_permitted_parameters\n      devise_parameter_sanitizer.for(:sign_in) { |u| u.permit(:email) }\n      devise_parameter_sanitizer.for(:sign_up) { |u| u.permit({ roles: [] }, :name, :email, :password, :password_confirmation, :avatar, :avatar_cache) }\n      devise_parameter_sanitizer.for(:account_update) { |u| u.permit({ roles: [] }, :name, :email, :password, :password_confirmation, :avatar, :avatar_cache) }\n  end\n</code></pre>\n\n<p>I really do not see where is my mistake. Maybe do you see?</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 152277, "user_id": 438992, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/QouOz.jpg?s=128&g=1", "display_name": "Dave Newton", "link": "https://stackoverflow.com/users/438992/dave-newton"}, "edited": false, "score": 0, "creation_date": 1444245323, "post_id": 33000507, "comment_id": 53825932, "body": "You wouldn&#39;t want a class method calling <code>params</code>. If you want this in the model then you&#39;d need to pass in the <code>rating_id</code>. Whether or not it <i>belongs</i> in the model depends, but there&#39;s no reason it can&#39;t start off as a model instance method, potentially in a callback (here there be potential dragons). If whatever the model is already <i>has</i> a rating relation then you don&#39;t need to pass in the rating id, you already have it."}], "answers": [{"comments": [{"owner": {"reputation": 10364, "user_id": 877472, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/e73a159e3f7790ee019673c37da48a59?s=128&d=identicon&r=PG", "display_name": "Paul Richter", "link": "https://stackoverflow.com/users/877472/paul-richter"}, "edited": false, "score": 0, "creation_date": 1444246795, "post_id": 33000909, "comment_id": 53826842, "body": "Good answer. Minor nitpick, I might call the method <code>weighted_score</code> or something like that, since that&#39;s what its calculating."}, {"owner": {"reputation": 11, "user_id": 5420020, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c6a7584d7d223a5f6070a0ec688d0342?s=128&d=identicon&r=PG&f=1", "display_name": "mongoose126", "link": "https://stackoverflow.com/users/5420020/mongoose126"}, "edited": false, "score": 0, "creation_date": 1444246846, "post_id": 33000909, "comment_id": 53826878, "body": "I have an intermediate table so i have a Rating table/model that belongs_to Employee and Skills. Skills just has a skill_id and summary and has many employees through rating . The Rating table has the FKs of both employee and skills and all the ratings stored in it. I assume the approach would be similar. Once i have the method defined where should it be called?"}, {"owner": {"reputation": 17254, "user_id": 920371, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/sJHH1.jpg?s=128&g=1", "display_name": "fivedigit", "link": "https://stackoverflow.com/users/920371/fivedigit"}, "edited": false, "score": 1, "creation_date": 1444247033, "post_id": 33000909, "comment_id": 53826989, "body": "Since the <code>weight</code> method is only using attributes from <code>rating</code>, the method as a whole should be moved to the <code>Rating</code> class. Then, in the <code>Employee</code> class, you can define a delegation to that method: <code>delegate :weight, to: :rating</code>. Then you can still call <code>employee.weight</code> while the method is actually defined in <code>Rating</code>."}], "tags": [], "owner": {"reputation": 71, "user_id": 3306027, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1bdd81d9d6ae5e1d49c7683f4cd65cc8?s=128&d=identicon&r=PG", "display_name": "esergion", "link": "https://stackoverflow.com/users/3306027/esergion"}, "is_accepted": false, "score": 2, "last_activity_date": 1444247250, "last_edit_date": 1444247250, "creation_date": 1444246412, "answer_id": 33000909, "question_id": 33000507, "link": "https://stackoverflow.com/questions/33000507/calling-class-instance-method-in-controller/33000909#33000909", "title": "Calling class/instance method in controller", "body": "<p>I assume that you have some relations on your models like</p>\n\n\n\n<pre class=\"lang-rb prettyprint-override\"><code>class Rating &lt; ActiveRecord::Base\n  belongs_to :employee\nend\n\nclass Employee &lt; ActiveRecord::Base\n  has_one :rating\nend\n</code></pre>\n\n<p>If so you just need to add method to Employee model, like:</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>def weight\n  (rating.emp_score * 0.4 +\n    rating.mgr_score * 0.2 +\n    rating.sme_score * 0.4).to_i # for integer value\nend\n</code></pre>\n\n<p>And call it like <code>@employee.weight</code></p>\n\n<p><strong>Or</strong></p>\n\n<p>If you want to add attribute <code>wgt_score</code> to Rating model and update it whenever Rating-object updated - then you have to add <code>before_save</code> (for example) callback to Rating model like:</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>class Rating &lt; ActiveRecord::Base\n  belongs_to :employee\n  before_save :update_weight\n  # ...\n  private\n  def update_weight      \n    self.wgt_score = (emp_score * 0.4 +\n                      mgr_score * 0.2 +\n                      sme_score * 0.4)\n  end\nend\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 5420020, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c6a7584d7d223a5f6070a0ec688d0342?s=128&d=identicon&r=PG&f=1", "display_name": "mongoose126", "link": "https://stackoverflow.com/users/5420020/mongoose126"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 926, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1444247250, "creation_date": 1444244995, "last_edit_date": 1444246354, "question_id": 33000507, "link": "https://stackoverflow.com/questions/33000507/calling-class-instance-method-in-controller", "title": "Calling class/instance method in controller", "body": "<p>I just started putting together an app thats a skills matrix for employees. </p>\n\n<p>Each employee has 3 ratings. One from themselves, one from their manager, and one from an expert in the skill. </p>\n\n<p>I want to have each employee have a weighted score based upon the above 3 scores with respective weights (40%, 20%, 40%). </p>\n\n<p>I assume I need to create some sort of method in my model something like:</p>\n\n<pre><code>def self.calc_weight\n  a = Rating.find(params[:id])\n  b = a.emp_score *.4\n  c = a.mgr_score *.2\n  d = a.sme_score *.4\n  e = b + c + d\n  a.wgt_score = e\nend\n</code></pre>\n\n<p>I know this is improper syntax. Is this the correct approach or should this be something thats handled by my controller after creation of rating? If so on which controller action would i define this? If I'm to utilize a method, I have the same question. I'm sure theres also a better way to do this. </p>\n"}, {"tags": ["ruby-on-rails", "ruby", "heroku", "resque", "heroku-toolbelt"], "comments": [{"owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "edited": false, "score": 0, "creation_date": 1444243609, "post_id": 33000005, "comment_id": 53824827, "body": "Why would you execute these tasks from a worker? Both migrations and seeding should be done by the manually by the developer after pushing a migration - who should ensure that migration and seeding is successful. Sorry if I&#39;m being contrarian but i just can&#39;t see why you would want to do this."}], "answers": [{"tags": [], "owner": {"reputation": 1787, "user_id": 586983, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/a404d3280b6226449ddade0b1db4e271?s=128&d=identicon&r=PG", "display_name": "jakeonrails", "link": "https://stackoverflow.com/users/586983/jakeonrails"}, "is_accepted": false, "score": 0, "last_activity_date": 1444244597, "last_edit_date": 1495542145, "creation_date": 1444244597, "answer_id": 33000379, "question_id": 33000005, "link": "https://stackoverflow.com/questions/33000005/running-heroku-cli-commands-rake-dbmigrate-from-resque-worker/33000379#33000379", "title": "Running heroku CLI commands (rake db:migrate) from Resque worker", "body": "<p>Like max said I'm not sure why you would want to do this, but if you want to invoke a Rake task from a Ruby script, in your case it is better to actually load the Rake task into memory and run it from within your Resque worker. Here is a SO answer that explains how to run a Rake task from Ruby: <a href=\"https://stackoverflow.com/a/15259172/586983\">https://stackoverflow.com/a/15259172/586983</a></p>\n"}], "owner": {"reputation": 23, "user_id": 3280592, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/1028633749/picture?type=large", "display_name": "Josh Tate", "link": "https://stackoverflow.com/users/3280592/josh-tate"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 132, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1444244597, "creation_date": 1444243216, "question_id": 33000005, "link": "https://stackoverflow.com/questions/33000005/running-heroku-cli-commands-rake-dbmigrate-from-resque-worker", "title": "Running heroku CLI commands (rake db:migrate) from Resque worker", "body": "<p>I'm trying to run heroku CLI commands like:</p>\n\n<pre><code>heroku run rake db:migrate --app app-name\nheroku run rake db:seed --app app-name\n</code></pre>\n\n<p>from a Resque worker running in the background.</p>\n\n<p>If I run the worker in the foreground with:</p>\n\n<pre><code>RAILS_ENV=production rake resque:work QUEUE=\"*\"\n</code></pre>\n\n<p>the process completes successfully, and the rake tasks are run.</p>\n\n<p>However, when the worker is started like so:</p>\n\n<pre><code>RAILS_ENV=production PIDFILE=./resque.pid BACKGROUND=yes QUEUE=\"*\" rake resque:work &gt;&gt;  worker1.log\n</code></pre>\n\n<p>the processes silently fail with no indication of what happened in the logs. Is there a way to run these tasks in the background?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ffmpeg", "popen"], "answers": [{"comments": [{"owner": {"reputation": 1081, "user_id": 468603, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/d863f374f48bdb8cc516e006dc5196f4?s=128&d=identicon&r=PG", "display_name": "Xofo", "link": "https://stackoverflow.com/users/468603/xofo"}, "edited": false, "score": 0, "creation_date": 1444242904, "post_id": 32999885, "comment_id": 53824411, "body": "These useful comments could be fed back to the FFMpeg maintainer. I imagine such behavior (stderr and \\r) is a bit unconventional to most people."}, {"owner": {"reputation": 49960, "user_id": 32453, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/bec38d63650c8912b6ba9b557fb953b9?s=128&d=identicon&r=PG", "display_name": "rogerdpack", "link": "https://stackoverflow.com/users/32453/rogerdpack"}, "edited": false, "score": 3, "creation_date": 1444243039, "post_id": 32999885, "comment_id": 53824482, "body": "it basically outputs logs to stderr so that its stdout can be &quot;piped&quot; to other programs more easily, FWIW..."}], "tags": [], "owner": {"reputation": 3079, "user_id": 689424, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/05ffd09ae496b61db8fce4e1aaaf50f5?s=128&d=identicon&r=PG", "display_name": "onetwopunch", "link": "https://stackoverflow.com/users/689424/onetwopunch"}, "is_accepted": true, "score": 1, "last_activity_date": 1444254435, "last_edit_date": 1444254435, "creation_date": 1444242792, "answer_id": 32999885, "question_id": 32999884, "link": "https://stackoverflow.com/questions/32999884/how-to-parse-ffmpeg-progress-real-time-in-ruby/32999885#32999885", "title": "How to parse ffmpeg progress real time in ruby", "body": "<p>There are two problems: </p>\n\n<ol>\n<li>How to parse output real-time in ruby?</li>\n<li>Since FFmpeg writes progress output on one line, how do you get that output?</li>\n</ol>\n\n<p>For the first one I looked at the ruby Open3 module and <a href=\"http://blog.bigbinary.com/2012/10/18/backtick-system-exec-in-ruby.html\" rel=\"nofollow\">this article</a> was particularly helpful. The gist is this:</p>\n\n<pre><code>require 'open3'\ncmd = \"bash my_long_running_command.sh\"\nOpen3.popen3(cmd) do |stdin, stdout, stderr, thread|\n  stdout.each do |line|\n    # this will print as stdout is being written to the stream real-time\n    puts line\n  end\nend\n</code></pre>\n\n<p>Now this works well for many commands and all but not with FFmpeg. FFmpeg is weird in that it writes it's progress and output to <code>STDERR</code> instead of <code>STDOUT</code>. </p>\n\n<p>Not only that but as I finally noticed the line delimiter of FFmpeg is not <code>\\n</code> as it is in most bash commands but rather <code>\\r</code> which is how it is able to edit the progress inline. Now that we know that the only updates are the stream and the delimiter, which can be overridden in the <code>each</code> method as the first argument.</p>\n\n<pre><code>require 'open3'\ncmd = \"ffmpeg -i input.mp4 ... output.mp4\"\nOpen3.popen3(cmd) do |stdin, stdout, stderr, thread|\n  duration = 0\n  progress = 0\n  stderr.each(\"\\r\") do |line|\n    next unless (line.include?(\"time=\") || line.include?(\"Duration:\"))\n    if duration == 0\n      if line =~ /Duration:\\s+(\\d{2}):(\\d{2}):(\\d{2}).(\\d{1,2})/\n        duration = $1.to_i * 3600 + $2.to_i * 60 + $3\n      end\n    end \n\n    percentage = if line =~ /time(\\d{2}):(\\d{2}):(\\d{2})/\n      progress = $1.to_i * 3600 + $2.to_i * 60 + $3\n      (progress.to_f/duration.to_f) * 100\n    end\n\n    puts \"#{percentage}%\"\n  end\nend\n</code></pre>\n\n<p>You can also use a gem that I found that does something very similar called <a href=\"https://github.com/streamio/streamio-ffmpeg\" rel=\"nofollow\">stremio-ffmpeg</a> that I sadly found after I already implemented my solution. If you would like to do the same thing as above, just do:</p>\n\n<pre><code>require 'streamio-ffmpeg'\nmovie = FFMPEG::Movie.new('input.mp4')\nduration = movie.duration\nmovie.transcode('output.mp4', options_as_a_string) do |progress|\n  percentage = (progress.to_f/duration.to_f) * 100\n  puts \"#{percentage}%\"\nend\n</code></pre>\n"}], "owner": {"reputation": 3079, "user_id": 689424, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/05ffd09ae496b61db8fce4e1aaaf50f5?s=128&d=identicon&r=PG", "display_name": "onetwopunch", "link": "https://stackoverflow.com/users/689424/onetwopunch"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 807, "favorite_count": 0, "accepted_answer_id": 32999885, "answer_count": 1, "score": 1, "last_activity_date": 1444254435, "creation_date": 1444242792, "question_id": 32999884, "link": "https://stackoverflow.com/questions/32999884/how-to-parse-ffmpeg-progress-real-time-in-ruby", "title": "How to parse ffmpeg progress real time in ruby", "body": "<p>So I was struggling with this problem a long time last night and finally figured it out so I wanted to post here in case someone ran across the same issue.</p>\n\n<p>The goal is to parse the output of FFmpeg so that it would run in a Sidekiq worker and save progress and duration to an ActiveRecord model so I could get a progress bar in the UI by polling the database.</p>\n\n<p>How do I parse ffmpeg <code>duration</code> and <code>time</code> real-time without waiting for the process to finish?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "activerecord", "database-design"], "comments": [{"owner": {"reputation": 2124, "user_id": 3871352, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Yb6Z4.jpg?s=128&g=1", "display_name": "Kiloreux", "link": "https://stackoverflow.com/users/3871352/kiloreux"}, "edited": false, "score": 0, "creation_date": 1444242340, "post_id": 32999663, "comment_id": 53824121, "body": "If product can belong to category directly why didn&#39;t you try something like <code>has_many :lines</code> and <code>has_many :products</code> ?"}, {"owner": {"reputation": 339, "user_id": 491886, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/5564d215923d203e7613b2e3d4c72e8c?s=128&d=identicon&r=PG", "display_name": "Theo B", "link": "https://stackoverflow.com/users/491886/theo-b"}, "reply_to_user": {"reputation": 2124, "user_id": 3871352, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Yb6Z4.jpg?s=128&g=1", "display_name": "Kiloreux", "link": "https://stackoverflow.com/users/3871352/kiloreux"}, "edited": false, "score": 0, "creation_date": 1444244959, "post_id": 32999663, "comment_id": 53825684, "body": "@Kiloreux Because I want to have access to the products through the lines too"}], "answers": [{"comments": [{"owner": {"reputation": 339, "user_id": 491886, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/5564d215923d203e7613b2e3d4c72e8c?s=128&d=identicon&r=PG", "display_name": "Theo B", "link": "https://stackoverflow.com/users/491886/theo-b"}, "edited": false, "score": 0, "creation_date": 1444250403, "post_id": 32999837, "comment_id": 53828925, "body": "I want to keep a unique interface to access the products.   In the end I associate <b>all</b> products directly with the categories."}, {"owner": {"reputation": 339, "user_id": 491886, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/5564d215923d203e7613b2e3d4c72e8c?s=128&d=identicon&r=PG", "display_name": "Theo B", "link": "https://stackoverflow.com/users/491886/theo-b"}, "edited": false, "score": 0, "creation_date": 1444250928, "post_id": 32999837, "comment_id": 53829185, "body": "And the association with lines are optional."}], "tags": [], "owner": {"reputation": 5014, "user_id": 3640770, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/HJBjs.jpg?s=128&g=1", "display_name": "IngoAlbers", "link": "https://stackoverflow.com/users/3640770/ingoalbers"}, "is_accepted": false, "score": 4, "last_activity_date": 1444242602, "creation_date": 1444242602, "answer_id": 32999837, "question_id": 32999663, "link": "https://stackoverflow.com/questions/32999663/rails-has-many-with-direct-and-indirect-association/32999837#32999837", "title": "Rails has_many with direct and indirect association", "body": "<p>You should probably set it up like this:</p>\n\n<pre><code>has_many :lines\nhas_many :line_products, through: lines, source: products\nhas_many :products\n</code></pre>\n\n<p>With <code>:source</code>, we're telling Rails to look for an association called <code>:products</code> on the Line model and use that.</p>\n\n<p>You can also check <a href=\"http://guides.rubyonrails.org/association_basics.html#has-many-association-reference\" rel=\"nofollow\">http://guides.rubyonrails.org/association_basics.html#has-many-association-reference</a> for some more information.</p>\n"}, {"tags": [], "owner": {"reputation": 1736, "user_id": 1464617, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/58031c89f45c6df1866338c118afec76?s=128&d=identicon&r=PG&f=1", "display_name": "Ben", "link": "https://stackoverflow.com/users/1464617/ben"}, "is_accepted": false, "score": 0, "last_activity_date": 1444256787, "creation_date": 1444256787, "answer_id": 33003461, "question_id": 32999663, "link": "https://stackoverflow.com/questions/32999663/rails-has-many-with-direct-and-indirect-association/33003461#33003461", "title": "Rails has_many with direct and indirect association", "body": "<p>I'm assuming we're trying to build a query that looks something like this: </p>\n\n<pre><code>SELECT * FROM products\n  LEFT OUTER JOIN lines ON products.line_id = lines.id\n  WHERE lines.category_id = &lt;category_id&gt; \n    OR products.category_id = &lt;category_id&gt;;\n</code></pre>\n\n<p>In <code>Category</code>, we could create an instance method rather than using associations:</p>\n\n<pre><code>class Category &lt; ActiveRecord::Base\n  def products\n     Product.eager_load(:line)\n      .where(\"products.category_id = :id OR lines.category_id = :id\", {id: id})\n  end\nend\n</code></pre>\n\n<p>But if associations are really your thing, something like this might work (I'm not 100% sure):</p>\n\n<pre><code>class Category &lt; ActiveRecord::Base\n  has_many :products, -&gt;(category) { \n    reset.eager_load(:line)\n      .where(\"products.category_id = :id OR lines.category_id = :id\", {id: category.id})\n  }\nend\n</code></pre>\n"}], "owner": {"reputation": 339, "user_id": 491886, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/5564d215923d203e7613b2e3d4c72e8c?s=128&d=identicon&r=PG", "display_name": "Theo B", "link": "https://stackoverflow.com/users/491886/theo-b"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 362, "favorite_count": 1, "answer_count": 2, "score": 0, "last_activity_date": 1444256787, "creation_date": 1444242023, "question_id": 32999663, "link": "https://stackoverflow.com/questions/32999663/rails-has-many-with-direct-and-indirect-association", "title": "Rails has_many with direct and indirect association", "body": "<p>I've three models: Category, Line and Product.</p>\n\n<p>Category has lines.<br>\nLine has products.<br>\nAnd product can belongs to Category directly too.</p>\n\n<p>So I've two association variations:</p>\n\n<p>1 - <code>Category -&gt; Line -&gt; Product</code><br>\n2 - <code>Category -&gt; Product</code></p>\n\n<p>How can I implement this using <code>has_many</code>?</p>\n\n<p>Of course, I can't declare two <code>has_many</code> like this:</p>\n\n<pre><code># category.rb\nhas_many :lines\nhas_many :products, through: :lines\nhas_many :products\n</code></pre>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 1, "creation_date": 1444242092, "post_id": 32999641, "comment_id": 53823947, "body": "Since this is a class method, you should <i>really</i> avoid using instance variables in here. Those will persist between calls of the method, something you probably didn&#39;t intend. Just use regular local variables, no <code>@</code> required."}, {"owner": {"reputation": 35, "user_id": 4326164, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/388e862682f7dfc342adc6d59c9b7366?s=128&d=identicon&r=PG&f=1", "display_name": "Bryan", "link": "https://stackoverflow.com/users/4326164/bryan"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1444243302, "post_id": 32999641, "comment_id": 53824632, "body": "Sounds good, I will correct my variables as well. Much appreciated, thank you again!"}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 2, "creation_date": 1444243390, "post_id": 32999641, "comment_id": 53824687, "body": "@tadman has answered your question, but there are a few things you could do to improve your method. 1, The problem does not ask you to <code>puts</code>, so you should remove that. 2. When you want to return a result (e.g., <code>true</code> or <code>false</code>) and also <code>puts</code> the the result, it&#39;s generally best to <code>puts</code> outside the method. That makes the method more versatile, should you want to use it again, elsewhere in your program, with no or different <code>puts</code> messages..."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 2, "creation_date": 1444243794, "post_id": 32999641, "comment_id": 53824940, "body": "...3. You should use local variables rather instance variables (<code>word1</code> rather than <code>@word</code>, as instance variables are visible outside the method, which you don&#39;t want. That&#39;s not a problem here, but don&#39;t use instance variables unless you need them to be visible outside the current scope. 4. You don&#39;t need to check the length, unless you want to do that for reasons of efficiency. 5. You don&#39;t need <code>join</code>. 6. You don&#39;t need all those temporary variables. Just write <code>string_a.downcase.chars.sort == string_b.downcase.chars.sort</code>. That is, the method only requires that single line."}, {"owner": {"reputation": 35, "user_id": 4326164, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/388e862682f7dfc342adc6d59c9b7366?s=128&d=identicon&r=PG&f=1", "display_name": "Bryan", "link": "https://stackoverflow.com/users/4326164/bryan"}, "edited": false, "score": 0, "creation_date": 1444244516, "post_id": 32999641, "comment_id": 53825406, "body": "Thank you for the information Cary. I didn&#39;t know that using &#39;puts&#39; is generally better outside of a method and I appreciate your help with this. I have since modified my code with your suggestions and not only is it considerably smaller it is 100% right. Thank you very much to both you and tadman!"}], "answers": [{"comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1444242389, "post_id": 32999737, "comment_id": 53824143, "body": "Now that you&#39;ve identified the problem, perhaps a few words on how the code can be improved..."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1444242461, "post_id": 32999737, "comment_id": 53824188, "body": "@CarySwoveland I thought that was pretty clear. All that needs to be done is adding <code>true</code> or <code>false</code> after each puts."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1444242569, "post_id": 32999737, "comment_id": 53824244, "body": "Use of temporary variables, use of instance variables, having <code>&#39;puts</code> inside the method, etc."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1444242675, "post_id": 32999737, "comment_id": 53824292, "body": "@CarySwoveland Already remarked above on the question itself, so hopefully that helps. This is a solution that&#39;s 90% there, I&#39;m just getting it over the hump. The rest is all about finesse."}, {"owner": {"reputation": 35, "user_id": 4326164, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/388e862682f7dfc342adc6d59c9b7366?s=128&d=identicon&r=PG&f=1", "display_name": "Bryan", "link": "https://stackoverflow.com/users/4326164/bryan"}, "edited": false, "score": 1, "creation_date": 1444243086, "post_id": 32999737, "comment_id": 53824509, "body": "Thanks tadman! All I had to do was replace the &quot;puts&quot; lines to &quot;return true&quot; or &quot;return false&quot; and voila."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1444244961, "post_id": 32999737, "comment_id": 53825687, "body": "Good news. Remember Ruby returns things implicitly, so often a <code>return</code> statement is not necessary unless there&#39;s a need to explicitly break out of your method early."}], "tags": [], "owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "is_accepted": true, "score": 2, "last_activity_date": 1444242265, "creation_date": 1444242265, "answer_id": 32999737, "question_id": 32999641, "link": "https://stackoverflow.com/questions/32999641/ruby-anagram-comparison-module/32999737#32999737", "title": "Ruby Anagram Comparison Module", "body": "<p>I think the problem here is you're displaying a message but not returning a <code>true</code> or <code>false</code> value which is what is expected.</p>\n\n<p>After each <code>puts</code>, include the appropriate answer. That way your method will return something useful. Right now I'm presuming it's <code>nil</code> for all cases, since that's what <code>puts</code> returns.</p>\n"}], "owner": {"reputation": 35, "user_id": 4326164, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/388e862682f7dfc342adc6d59c9b7366?s=128&d=identicon&r=PG&f=1", "display_name": "Bryan", "link": "https://stackoverflow.com/users/4326164/bryan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 314, "favorite_count": 0, "accepted_answer_id": 32999737, "answer_count": 1, "score": 1, "last_activity_date": 1444242265, "creation_date": 1444241956, "question_id": 32999641, "link": "https://stackoverflow.com/questions/32999641/ruby-anagram-comparison-module", "title": "Ruby Anagram Comparison Module", "body": "<p>I am new to Ruby and trying to figure out a problem for an online test. The problem is as follows:</p>\n\n<blockquote>\n  <p>An anagram is a word formed from another by rearranging its letters,\n  using all the original letters exactly once; for example, orchestra\n  can be rearranged into carthorse.</p>\n  \n  <p>Write a function that checks if two words are each other's anagrams.</p>\n  \n  <p>For example, AreAnagrams.are_anagrams?('momdad', 'dadmom') should\n  return true as arguments are anagrams.</p>\n</blockquote>\n\n<p>The code I have come up with is this:</p>\n\n<pre><code>module AreAnagrams\n  def self.are_anagrams?(string_a, string_b)\n      ## Create @word1 variable to store string_a\n      @word1 = string_a\n\n      ## Create @word1_compare variable to store string_a in lower case\n      @word1_compare = @word1.downcase\n\n      ## Create @word2_compare variable to store string_b\n      @word2 = string_b\n\n      ## Create @word2_compare variable to store string_b in lower case\n      @word2_compare = @word2.downcase\n\n      ## Check length of @word1 and @word2 to make sure they are the same length\n      if @word1.length == @word2.length\n\n      =begin\n        Sort the letters of the @word1 and @word2 variables and compare\n        them to see if they are anagrams\n      =end\n\n      if @word1_compare.chars.sort.join == @word2_compare.chars.sort.join\n          puts \"#{@word1} and #{@word2} are anagrams!\"\n      else\n          puts \"#{@word1} and #{@word2} are not anagrams!\"\n      end\n      else\n          puts \"#{@word1} and #{@word2} are not anagrams!\"\n      end\n  end\nend\n</code></pre>\n\n<p>When I submit the code, I get the following back from the test:</p>\n\n<blockquote>\n  <p>Compilation OK, but 4 out of 4 test cases fail</p>\n  \n  <p>Sample case: Wrong answer</p>\n  \n  <p>Words with unique letters: Wrong answer</p>\n  \n  <p>Words with duplicate letters: Wrong answer</p>\n  \n  <p>One word is the prefix of another word: Wrong answer</p>\n</blockquote>\n\n<p>I have tested my code with multiple strings and it seems to work just fine. It looks like it wants me to check for more specific instances (special characters, words with duplicate letters, etc.) but is that really required? Sorry if it's a dumb question, I'm new to Ruby and lost.</p>\n\n<p>Any help would be greatly appreciated!</p>\n"}, {"tags": ["ruby", "string-formatting"], "comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1444245741, "post_id": 32999586, "comment_id": 53826201, "body": "You could write <code>puts &quot;%s %c%s&quot; % [1,2,3] #=&gt; &quot;1 3&quot;</code>, just don&#39;t expect it to always work. If fact, it doesn&#39;t even work here. :-)"}], "answers": [{"tags": [], "owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "is_accepted": true, "score": 4, "last_activity_date": 1444246285, "last_edit_date": 1444246285, "creation_date": 1444242316, "answer_id": 32999753, "question_id": 32999586, "link": "https://stackoverflow.com/questions/32999586/ruby-string-formatting-omit-element-in-list/32999753#32999753", "title": "Ruby String Formatting: Omit element in list", "body": "<pre><code>puts \"%1$s %3$s\" % list\n</code></pre>\n\n<p>........</p>\n"}, {"tags": [], "owner": {"reputation": 17357, "user_id": 794242, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e871d15815cfef926f21737a5ccd30c4?s=128&d=identicon&r=PG", "display_name": "Wand Maker", "link": "https://stackoverflow.com/users/794242/wand-maker"}, "is_accepted": false, "score": 0, "last_activity_date": 1444242615, "creation_date": 1444242615, "answer_id": 32999842, "question_id": 32999586, "link": "https://stackoverflow.com/questions/32999586/ruby-string-formatting-omit-element-in-list/32999842#32999842", "title": "Ruby String Formatting: Omit element in list", "body": "<p>You can do something like this:</p>\n\n<pre><code>list = [1,2,3]\nputs \"%s %s\" % list.values_at(0,2)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": false, "score": 1, "last_activity_date": 1444250362, "last_edit_date": 1444250362, "creation_date": 1444250056, "answer_id": 33001970, "question_id": 32999586, "link": "https://stackoverflow.com/questions/32999586/ruby-string-formatting-omit-element-in-list/33001970#33001970", "title": "Ruby String Formatting: Omit element in list", "body": "<pre><code>\"%s %0.s%s\" % [1,2,3]\n  #=&gt; \"1 3\"\n</code></pre>\n\n<p>The decimal point tells Ruby that <code>0</code> is the field width rather than a flag. You could also write <code>%0.0s</code>.</p>\n"}], "owner": {"reputation": 327, "user_id": 1726135, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/aba0ea7dea8d6e53047d414d66eacf66?s=128&d=identicon&r=PG", "display_name": "luxon", "link": "https://stackoverflow.com/users/1726135/luxon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 62, "favorite_count": 1, "accepted_answer_id": 32999753, "answer_count": 3, "score": 1, "last_activity_date": 1444250362, "creation_date": 1444241795, "last_edit_date": 1444242201, "question_id": 32999586, "link": "https://stackoverflow.com/questions/32999586/ruby-string-formatting-omit-element-in-list", "title": "Ruby String Formatting: Omit element in list", "body": "<p>Ruby lets me do:</p>\n\n<pre><code>    list = [1,2,3]\n    puts \"%s %s\" % list\n</code></pre>\n\n<p>and returns <code>1 2</code>.  What if I want to skip the second element (to print <code>1 3</code>)?  Yes I know it's easily doable without string formatting, but for my specific case I want to know if it's possible using string formatting.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "nokogiri"], "answers": [{"comments": [{"owner": {"reputation": 61, "user_id": 3548398, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/e0f3ba4716d0edfe5e7b8e2b4131c195?s=128&d=identicon&r=PG&f=1", "display_name": "user3548398", "link": "https://stackoverflow.com/users/3548398/user3548398"}, "edited": false, "score": 0, "creation_date": 1444241484, "post_id": 32999435, "comment_id": 53823571, "body": "i have always nil, but not true"}, {"owner": {"reputation": 9012, "user_id": 122201, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/BTtUU.jpg?s=128&g=1", "display_name": "rainkinz", "link": "https://stackoverflow.com/users/122201/rainkinz"}, "reply_to_user": {"reputation": 61, "user_id": 3548398, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/e0f3ba4716d0edfe5e7b8e2b4131c195?s=128&d=identicon&r=PG&f=1", "display_name": "user3548398", "link": "https://stackoverflow.com/users/3548398/user3548398"}, "edited": false, "score": 0, "creation_date": 1444241817, "post_id": 32999435, "comment_id": 53823778, "body": "I tried it and it worked for me if you use <code>&#47;&#47;person&#47;&#47;carsList</code> as your xpath instead of <code>&#47;&#47;person&#47;&#47;carslist</code>"}, {"owner": {"reputation": 61, "user_id": 3548398, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/e0f3ba4716d0edfe5e7b8e2b4131c195?s=128&d=identicon&r=PG&f=1", "display_name": "user3548398", "link": "https://stackoverflow.com/users/3548398/user3548398"}, "edited": false, "score": 0, "creation_date": 1444241973, "post_id": 32999435, "comment_id": 53823867, "body": "for me it doesn&#39;t work. Also in my <code>@account</code> i have response from <code>@account = Nokogiri::XML(open(&#39;httyp:&#47;&#47;...&#39;))</code>"}, {"owner": {"reputation": 9012, "user_id": 122201, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/BTtUU.jpg?s=128&g=1", "display_name": "rainkinz", "link": "https://stackoverflow.com/users/122201/rainkinz"}, "reply_to_user": {"reputation": 61, "user_id": 3548398, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/e0f3ba4716d0edfe5e7b8e2b4131c195?s=128&d=identicon&r=PG&f=1", "display_name": "user3548398", "link": "https://stackoverflow.com/users/3548398/user3548398"}, "edited": false, "score": 0, "creation_date": 1444242098, "post_id": 32999435, "comment_id": 53823955, "body": "oops sorry I see what you&#39;re getting at. The car.attribute(&#39;default&#39;) bit is returning nil. Updated code above with correction"}, {"owner": {"reputation": 61, "user_id": 3548398, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/e0f3ba4716d0edfe5e7b8e2b4131c195?s=128&d=identicon&r=PG&f=1", "display_name": "user3548398", "link": "https://stackoverflow.com/users/3548398/user3548398"}, "edited": false, "score": 0, "creation_date": 1444242334, "post_id": 32999435, "comment_id": 53824117, "body": "i&#39;ve updated my post with correctly code. Thank u, your code was helpful for me"}], "tags": [], "owner": {"reputation": 9012, "user_id": 122201, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/BTtUU.jpg?s=128&g=1", "display_name": "rainkinz", "link": "https://stackoverflow.com/users/122201/rainkinz"}, "is_accepted": true, "score": 1, "last_activity_date": 1444522275, "last_edit_date": 1444522275, "creation_date": 1444241258, "answer_id": 32999435, "question_id": 32999375, "link": "https://stackoverflow.com/questions/32999375/get-xml-attribute-value/32999435#32999435", "title": "Get XML attribute value", "body": "<p>You want:</p>\n\n<pre><code>unless @account.xpath(\"//person//carsList/*\").blank?\n</code></pre>\n\n<p>Notice the capital 'L' in <code>carsList</code> instead of <code>carslist</code>. Also note the <code>/*</code> to get the child nodes of <code>carList</code>.</p>\n\n<p>The corrected code would be:</p>\n\n<pre><code>  unless @account.xpath(\"//person//carsList/*\").blank?\n    @account.xpath(\"//person//carsList\").each do |car|\n\n      p car.attribute('default')\n\n    end\n  end\n</code></pre>\n"}], "owner": {"reputation": 61, "user_id": 3548398, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/e0f3ba4716d0edfe5e7b8e2b4131c195?s=128&d=identicon&r=PG&f=1", "display_name": "user3548398", "link": "https://stackoverflow.com/users/3548398/user3548398"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 745, "favorite_count": 0, "accepted_answer_id": 32999435, "answer_count": 1, "score": 0, "last_activity_date": 1444522275, "creation_date": 1444241071, "last_edit_date": 1444522225, "question_id": 32999375, "link": "https://stackoverflow.com/questions/32999375/get-xml-attribute-value", "title": "Get XML attribute value", "body": "<p>This is my XML:</p>\n\n<pre><code>&lt;response errors=\"0\"&gt;&lt;person&gt;&lt;middlename/&gt;&lt;name&gt;Egor&lt;/name&gt;&lt;carsList&gt;&lt;car default=\"true\"&gt;0777AD&lt;/car&gt;&lt;/carsList&gt;&lt;surname&gt;Petrov&lt;/surname&gt;&lt;/person&gt;&lt;funds&gt;505.56&lt;/funds&gt;&lt;/response&gt;\n</code></pre>\n\n<p>I need to get the value of the <code>default</code> attribute for the <code>&lt;car&gt;</code> element.</p>\n\n<p>I found some solutions on Stack Overflow with <code>attr()</code> and <code>attributue()</code> but I had no success using them.</p>\n\n<p>My code is:</p>\n\n<pre><code>unless @account.xpath(\"//person//carslist\").blank?\n  @account.xpath(\"//person//carslist\").each do |car|\n\n    p car.attribute('default')\n\n  end\nend\n</code></pre>\n\n<p>On my console I see nil but need to see true.</p>\n\n<p>The correctly variant is:</p>\n\n<pre><code>unless @account.xpath(\"//person//carsList/*\").blank?\n  @account.xpath(\"//person//carsList/*\").each do |car|\n\n    p car.attribute('default').content\n\n  end\nend\n</code></pre>\n\n<p>What can it be?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "gem", "mapping", "representable"], "comments": [{"owner": {"reputation": 3533, "user_id": 1955990, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/5112f123adc37e54a218f4571b784f32?s=128&d=identicon&r=PG", "display_name": "aceofbassgreg", "link": "https://stackoverflow.com/users/1955990/aceofbassgreg"}, "edited": false, "score": 0, "creation_date": 1455902968, "post_id": 32999337, "comment_id": 58713397, "body": "I have something similar to what you have in your last example (i.e. creating a <code>Representer</code> class that inherits from <code>Representable::Decorator</code>, and I observed the same behavior. To make sure it wasn&#39;t user error, I commented out all of the hash-related logic and changed to json, and then called <code>from_json</code> and <code>nested</code> properties were stored as expected.  I&#39;ll open a Git issue unless one already exists."}], "owner": {"reputation": 6202, "user_id": 1066615, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/iv68W.png?s=128&g=1", "display_name": "sixty4bit", "link": "https://stackoverflow.com/users/1066615/sixty4bit"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 363, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1444240955, "creation_date": 1444240955, "question_id": 32999337, "link": "https://stackoverflow.com/questions/32999337/representable-gem-trouble-handling-nested-documents-hashes", "title": "Representable gem: trouble handling nested documents (hashes)", "body": "<p>I'm using the Representable gem and am following the instructions in the <a href=\"https://github.com/apotonick/representable#document-nesting\" rel=\"nofollow\">readme</a> for accessing properties in a nested document. </p>\n\n<p>Representer and test:</p>\n\n<pre><code># app/representers/nhl/game_representer.rb\n\nrequire 'representable/hash'\n\nmodule Nhl::GameRepresenter\n  include Representable::Hash\n  include Representable::Hash::AllowSymbols\n\n  property :stats_id, as: :eventId\n\n  nested :venue do\n    property :venue_id, as: :venueId\n  end\nend\n\n# test/models/nhl/game_test.rb\n\nclass Nhl::GameTest &lt; ActiveSupport::TestCase\n  context 'initializing w/Representer' do\n    should 'map attributes correctly' do\n      real_hash = {\n        :eventId =&gt; 1553247,\n        venue: {\n          :venueId=&gt;28,\n          :name=&gt;\"Air Canada Centre\"\n        }\n      }\n\n      game = Nhl::Game.new.extend(Nhl::GameRepresenter).from_hash(real_hash)\n\n      assert_equal 1553247, game.stats_id\n      assert_equal 28, game.venue_id\n    end\n  end\nend\n</code></pre>\n\n<p>Here the first assertion passes but the second one (venue) fails. It seems that my <code>nested</code> block just isn't doing anything because <code>game.venue_id</code> ends up being <code>nil</code>.</p>\n\n<p>Looking back at the readme, I realized it says: </p>\n\n<blockquote>\n  <p>\"Note that ::nested internally is implemented using Decorator.\"</p>\n</blockquote>\n\n<p>...and the code example uses <code>Class SongRepresenter &lt; Representable::Decorator</code>. So I rewrote my representer like this:</p>\n\n<pre><code>class Nhl::GameRepresenter &lt; Representable::Decorator # &lt;--- change to class\n  include Representable::Hash\n  include Representable::Hash::AllowSymbols\n\n  property :stats_id, as: :eventId\n\n  nested :venue do\n    property :venue_id, as: :venueId\n  end\nend\n</code></pre>\n\n<p>In my test, I then set up the <code>game</code> object like this:</p>\n\n<pre><code>game = Nhl::GameRepresenter.new(Nhl::Game.new).from_hash(real_hash)\n</code></pre>\n\n<p>However, I'm still getting the same problem: <code>game.venue # =&gt; nil</code></p>\n\n<p>Can anyone with more experience using this gem point out what I'm doing wrong??</p>\n"}, {"tags": ["ruby", "activerecord", "configuration", "connection"], "comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1444241623, "post_id": 32999018, "comment_id": 53823655, "body": "JSON is just an encoding method. Why not handle the formatting in the application receiving the JSON data? Passing in numbers as strings is kind of annoying."}, {"owner": {"reputation": 551, "user_id": 3681793, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6a23b03da4efe057f090c33cae367f09?s=128&d=identicon&r=PG", "display_name": "bonafernando", "link": "https://stackoverflow.com/users/3681793/bonafernando"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1444242153, "post_id": 32999018, "comment_id": 53823994, "body": "It&#39;s an api, 3 different applications are using. I&#39;m trying to pattern that"}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 1, "creation_date": 1444242360, "post_id": 32999018, "comment_id": 53824134, "body": "That&#39;s all the more reason to respect the JSON format and send regular numbers, not stringified numbers. If presentation is a problem, handle it if/when the numbers are displayed, not when they&#39;re packaged for transport. Unless someone&#39;s going to be looking at your raw JSON payload and complaining about decimal places, this is a non-issue. What you might want to do is communicate your payload like this: <code>{ &quot;value&quot;: 92.0, &quot;precision&quot;: 2 }</code>"}, {"owner": {"reputation": 551, "user_id": 3681793, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6a23b03da4efe057f090c33cae367f09?s=128&d=identicon&r=PG", "display_name": "bonafernando", "link": "https://stackoverflow.com/users/3681793/bonafernando"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1444242696, "post_id": 32999018, "comment_id": 53824305, "body": "That&#39;s a very good point. The presentation is responsibility of the view... Thanks for that. I&#39;ll rearrange things over here! Thank you very much!"}], "owner": {"reputation": 551, "user_id": 3681793, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6a23b03da4efe057f090c33cae367f09?s=128&d=identicon&r=PG", "display_name": "bonafernando", "link": "https://stackoverflow.com/users/3681793/bonafernando"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 637, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1444240830, "creation_date": 1444239851, "last_edit_date": 1444240830, "question_id": 32999018, "link": "https://stackoverflow.com/questions/32999018/activerecordbase-connection-exec-query-returns-bigdecimal", "title": "ActiveRecord::Base.connection.exec_query returns BigDecimal", "body": "<p>I need to call a procedure in my ruby rest api in Sinatra and I'm calling it like:</p>\n\n<pre><code>result = ActiveRecord::Base.connection.exec_query query\n</code></pre>\n\n<p>After that I'm parsing it to hash:</p>\n\n<pre><code>results = results.to_hash\n</code></pre>\n\n<p>My procedure already have it's number format and returns all the numbers like <code>92.00</code>. But in the results I have it parsed as a BigDecimal. And when I'm returning this to my client like:</p>\n\n<pre><code>JSON.pretty_generate(results)\n</code></pre>\n\n<p>It is returned as <code>92.0</code>. I have a lot developed already and searched everywhere a way to make ActiveRecord respect the number format that my SQL query returned, but couldn't find anywhere. Do you guys have a configure solution or a different approach for pure SQL queries on ruby without rails?</p>\n\n<p>EDIT:</p>\n\n<p>To solve it for a while I made the code below, but I can't accept this as an answer for this problem:</p>\n\n<pre><code>  def self.format_hash_results(results)\n    rresults = results\n    rresults.each do |row|\n      row.each do |k,v|\n        row[k] = '%.2f' % v if v.class == BigDecimal\n      end\n    end\n    rresults\n  end\n</code></pre>\n"}, {"tags": ["mysql", "ruby", "encryption"], "comments": [{"owner": {"reputation": 99643, "user_id": 445517, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/57e2ba76e6290c4e9e19821a068bc8c1?s=128&d=identicon&r=PG", "display_name": "CodesInChaos", "link": "https://stackoverflow.com/users/445517/codesinchaos"}, "edited": false, "score": 1, "creation_date": 1444249884, "post_id": 32998737, "comment_id": 53828649, "body": "As a side note: The point of IV/salt is to be different for each encryption. So reading them from the configuration misses the point."}, {"owner": {"reputation": 82953, "user_id": 608639, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/aPIhh.jpg?s=128&g=1", "display_name": "jww", "link": "https://stackoverflow.com/users/608639/jww"}, "edited": false, "score": 0, "creation_date": 1444255526, "post_id": 32998737, "comment_id": 53831352, "body": "You usually do one of two things: (1) use a <a href=\"https://dev.mysql.com/doc/refman/5.0/en/blob.html\" rel=\"nofollow noreferrer\">binary <code>BLOB</code></a> to store the raw cipher text; or (2) encode the raw cipher text into printable ASCIIs with Hex, Base32, Base64, etc. Then store it like a string or <code>char*</code>. The binary BLOB is probably most efficient. Its most compact, and does not require the additional encoding."}], "answers": [{"tags": [], "owner": {"reputation": 17357, "user_id": 794242, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e871d15815cfef926f21737a5ccd30c4?s=128&d=identicon&r=PG", "display_name": "Wand Maker", "link": "https://stackoverflow.com/users/794242/wand-maker"}, "is_accepted": true, "score": 2, "last_activity_date": 1444240251, "creation_date": 1444240251, "answer_id": 32999139, "question_id": 32998737, "link": "https://stackoverflow.com/questions/32998737/how-to-save-cipher-text-to-db-if-it-has-illegal-characters/32999139#32999139", "title": "How to save cipher text to db if it has illegal characters?", "body": "<p>You can perform base64 encoding of encrypted string, and store the encoded value in DB.</p>\n\n<p>When retrieving the value, you can decode it back to binary and decrypt it.</p>\n\n<pre><code>require \"base64\"\n\nenc   = Base64.encode64('Send reinforcements')\n                    # -&gt; \"U2VuZCByZWluZm9yY2VtZW50cw==\\n\"\nplain = Base64.decode64(enc)\n                    # -&gt; \"Send reinforcements\"\n</code></pre>\n\n<p><a href=\"http://ruby-doc.org/stdlib-2.2.0/libdoc/base64/rdoc/Base64.html\" rel=\"nofollow\">http://ruby-doc.org/stdlib-2.2.0/libdoc/base64/rdoc/Base64.html</a></p>\n"}], "owner": {"reputation": 2647, "user_id": 302274, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/3b5598a61f85012ea1de2a5c8cee2e6c?s=128&d=identicon&r=PG", "display_name": "analyticsPierce", "link": "https://stackoverflow.com/users/302274/analyticspierce"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 388, "favorite_count": 0, "accepted_answer_id": 32999139, "answer_count": 1, "score": 1, "last_activity_date": 1444255852, "creation_date": 1444238956, "last_edit_date": 1444255852, "question_id": 32998737, "link": "https://stackoverflow.com/questions/32998737/how-to-save-cipher-text-to-db-if-it-has-illegal-characters", "title": "How to save cipher text to db if it has illegal characters?", "body": "<p>I am working on encrypting text strings that contain sensitive data. I need to save these encrypted strings to a MySQL db. The strings are cipher text, and all character (printable ASCII to control characters to <code>null</code> are equally likely).</p>\n\n<p>These strings are not long (&lt; 40 characters). I am using Ruby 2.1 (no Rails) along with the encryptor gem with a custom salt and iv to do the encryption. The encryptor gem is a wrapper for Ruby's openssl. </p>\n\n<p>For many strings this works fine. However, I have run into a small number of these strings that, once encrypted, contain illegal or improperly quoted characters. As a result, when the string is saved I get an error. </p>\n\n<p>What is the best way to handle the encrypted value so it can be reliably saved to MySQL? </p>\n\n<p>Here is my encryption command:</p>\n\n<pre><code>require 'encryptor'\nencrypted_value = Encryptor.encrypt(@sensitive_string, \n:key =&gt; @config[\"encryption\"][\"key\"], \n:iv = @config[\"encryption\"][\"iv\"], \n:salt =&gt; @config[\"encryption\"][\"salt\"]) \n</code></pre>\n\n<p>Here is the encrypted value: </p>\n\n<pre><code>encrypted_value: /:Z`\u07c9Nc??\"v'??\\??\u061f??????Oa?jR\n</code></pre>\n\n<p>and a screenshot since some of the characters did not copy correctly: \n<a href=\"https://i.stack.imgur.com/bDplO.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/bDplO.png\" alt=\"enter image description here\"></a></p>\n\n<p>MySQL update statement: </p>\n\n<pre><code>query = \"UPDATE db.table  \nSET `key` = mysql_real_escape_string(#{encrypted_value})\"\n</code></pre>\n\n<p>With the value in the query it looks like:</p>\n\n<pre><code>query UPDATE db.table \n             SET `key` = mysql_real_escape_string(/:Z`\u07c9Nc??\"v'??\\??\u061f??????Oa?jR)\n</code></pre>\n\n<p>I have tried both the MySQL Quote and mysql_real_escape_string functions. I get the same error with both and also wrapping the encrypted_value in double and single quotes. </p>\n\n<p>Then I get this error:</p>\n\n<pre><code>wrong number of arguments (0 for 2) (ArgumentError)\n</code></pre>\n\n<p>What is the best way to tackle this? Any advice is appreciated. </p>\n"}, {"tags": ["ruby-on-rails", "ruby", "pdf", "prawn"], "answers": [{"comments": [{"owner": {"reputation": 6076, "user_id": 4044009, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/42e57031eb7d02c47c9afaecfc878638?s=128&d=identicon&r=PG&f=1", "display_name": "Neil", "link": "https://stackoverflow.com/users/4044009/neil"}, "edited": false, "score": 0, "creation_date": 1444739333, "post_id": 33061205, "comment_id": 54020194, "body": "The thing though is that I do not want content from one column to flow to the other column.  I want to keep the columns completely separate, and let each column take up as much space as is needed.  The example of column_box only shows one column flowing into the next column."}, {"owner": {"reputation": 897, "user_id": 5255019, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-obI_W7jTY6M/AAAAAAAAAAI/AAAAAAAACLg/-ccFAzkxIq4/photo.jpg?sz=128", "display_name": "Brian", "link": "https://stackoverflow.com/users/5255019/brian"}, "reply_to_user": {"reputation": 6076, "user_id": 4044009, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/42e57031eb7d02c47c9afaecfc878638?s=128&d=identicon&r=PG&f=1", "display_name": "Neil", "link": "https://stackoverflow.com/users/4044009/neil"}, "edited": false, "score": 2, "creation_date": 1444740398, "post_id": 33061205, "comment_id": 54020933, "body": "Ah, I see. For that, perhaps Prawn Table is just the ticket for you: <a href=\"https://github.com/prawnpdf/prawn-table\" rel=\"nofollow noreferrer\">github.com/prawnpdf/prawn-table</a>"}], "tags": [], "owner": {"reputation": 897, "user_id": 5255019, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-obI_W7jTY6M/AAAAAAAAAAI/AAAAAAAACLg/-ccFAzkxIq4/photo.jpg?sz=128", "display_name": "Brian", "link": "https://stackoverflow.com/users/5255019/brian"}, "is_accepted": false, "score": 0, "last_activity_date": 1444533736, "creation_date": 1444533736, "answer_id": 33061205, "question_id": 32998491, "link": "https://stackoverflow.com/questions/32998491/prawn-grid-layout-dynamic-content-colliding-with-subsequent-rows/33061205#33061205", "title": "Prawn grid layout: Dynamic content colliding with subsequent rows", "body": "<p>I think the grid is for tables. Column_box looks more applicable to your problem:</p>\n\n<pre><code>column_box([0, cursor], :columns =&gt; 2, :width =&gt; bounds.width) do\n  text(\"a bunch of text ...\")\nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 978, "user_id": 3797480, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZuuZI.jpg?s=128&g=1", "display_name": "nsave", "link": "https://stackoverflow.com/users/3797480/nsave"}, "is_accepted": false, "score": 0, "last_activity_date": 1444741870, "creation_date": 1444741870, "answer_id": 33103606, "question_id": 32998491, "link": "https://stackoverflow.com/questions/32998491/prawn-grid-layout-dynamic-content-colliding-with-subsequent-rows/33103606#33103606", "title": "Prawn grid layout: Dynamic content colliding with subsequent rows", "body": "<p>I hope I understand you correctly.</p>\n\n<p>I'd use Prawn table for this as suggested in the first answer.\nFor that add a gem 'prawn-table' and use code like this:</p>\n\n<pre><code>pdf = Prawn::Document.new\n\n# First section with two columns\npdf.table([['column_text_1', 'column_text_2']])\n\n# Second section with three columns\npdf.table([['column_text_1', 'column_text_2', 'column_text_3']])\n</code></pre>\n\n<p>If you need something more advanced you could refer to the gem <a href=\"https://github.com/prawnpdf/prawn-table\" rel=\"nofollow\">documentation</a> or leave a comment here.</p>\n"}, {"tags": [], "owner": {"reputation": 897, "user_id": 5255019, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-obI_W7jTY6M/AAAAAAAAAAI/AAAAAAAACLg/-ccFAzkxIq4/photo.jpg?sz=128", "display_name": "Brian", "link": "https://stackoverflow.com/users/5255019/brian"}, "is_accepted": true, "score": 1, "last_activity_date": 1444751106, "creation_date": 1444751106, "answer_id": 33107050, "question_id": 32998491, "link": "https://stackoverflow.com/questions/32998491/prawn-grid-layout-dynamic-content-colliding-with-subsequent-rows/33107050#33107050", "title": "Prawn grid layout: Dynamic content colliding with subsequent rows", "body": "<p>With prawn table, it could like like this:</p>\n\n<pre><code>require 'prawn'\nrequire 'prawn/table'\n\nPrawn::Document.generate(\"junk4.pdf\") do\n\n  font \"Helvetica\"\n\n  text \"Test Table\", :style =&gt; :bold_italic\n  stroke_horizontal_rule\n\n  move_down 20\n\n  table([ [\"short\", \"short\", \"loooooooooooooooooooong \"*30],\n          [\"short\", \"loooooooooooooooooooong \"*15, \"short\"],\n          [\"loooooooooooooooooooong \"*10, \"short\", \"short\"] ])\n\nend\n</code></pre>\n"}], "owner": {"reputation": 6076, "user_id": 4044009, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/42e57031eb7d02c47c9afaecfc878638?s=128&d=identicon&r=PG&f=1", "display_name": "Neil", "link": "https://stackoverflow.com/users/4044009/neil"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2378, "favorite_count": 0, "accepted_answer_id": 33107050, "answer_count": 3, "score": 2, "last_activity_date": 1444751106, "creation_date": 1444238181, "last_edit_date": 1444239756, "question_id": 32998491, "link": "https://stackoverflow.com/questions/32998491/prawn-grid-layout-dynamic-content-colliding-with-subsequent-rows", "title": "Prawn grid layout: Dynamic content colliding with subsequent rows", "body": "<p>I want to specify columns at various points in a pdf document. </p>\n\n<p>Example: three columns for this section, one column for that section, two columns for this other section. </p>\n\n<p>I don't want rows to be tied to a physical location on a pdf document because I have dynamic text with various lengths, so I cannot predict how much content is within a certain area.  What happens is that if there is too much text for a <code>[column, row]</code> box it simply overflows to the subsequent row, colliding with text there.</p>\n\n<p>It appears that the layout grid in prawn forces me to specify the number of rows.<br>\nIt would be nice if I could dynamically define rows like with bootstrap.  That way content in a row does not start until the previous row takes up all the space it needs.  </p>\n\n<p>Here is how I understand you must define a layout grid in Prawn:</p>\n\n<pre><code>    pdf.define_grid(columns: 12, rows: 12, gutter: 10)\n</code></pre>\n\n<p>So say I do something like this:</p>\n\n<pre><code>pdf.grid([0,0]).bounding_box do\n  pdf.text \"Aenean eu leo quam. Pellentesque ornare sem lacinia quam venenatis vestibulum. Duis mollis, est non commodo luctus, nisi erat porttitor ligula, eget lacinia odio sem nec elit. Maecenas faucibus mollis interdum.\"\nend\n\npdf.grid([1,0]).bounding_box do\n  pdf.text \"some text\"\nend\n</code></pre>\n\n<p>Clearly the text in the <code>[0,0]</code> bounding box is going to collide with the text in the <code>[1,0]</code> bounding box because there is too much content in <code>[0,0]</code>, so it overflows into rows below it.</p>\n\n<p>Because bootstrap is not stuck to a physical columns/rows layout grid, Bootstrap allows the content in <code>[0,0]</code> to take up as much space as needed and then begins <code>[1,0]</code> content afterwards.  </p>\n\n<p>The issue is that prawn's layout grid appears to apply directly to the physical location of a pdf document, but I don't want it to do that.</p>\n\n<p>Hopefully that makes sense. Is something like this possible in Prawn?  Otherwise I foresee myself having to forgo columns altogether for my pdfs, which would render a ton of empty space. </p>\n\n<p><a href=\"http://prawnpdf.org/manual.pdf\" rel=\"nofollow\">Prawn PDF manual</a>, layout info on page 74</p>\n"}, {"tags": ["ruby", "nginx", "passenger", "erb", "rack"], "comments": [{"owner": {"reputation": 11913, "user_id": 1016033, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1daac942e48a293ad867d186bd519376?s=128&d=identicon&r=PG", "display_name": "Alexey Ten", "link": "https://stackoverflow.com/users/1016033/alexey-ten"}, "edited": false, "score": 0, "creation_date": 1444240291, "post_id": 32998295, "comment_id": 53822885, "body": "Show full server config. How should we know what&#39;s wrong and where?"}, {"owner": {"reputation": 2538, "user_id": 988591, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/248624b122eb5cc3748ee7131fc0b3f4?s=128&d=identicon&r=PG&f=1", "display_name": "jj_", "link": "https://stackoverflow.com/users/988591/jj"}, "reply_to_user": {"reputation": 11913, "user_id": 1016033, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1daac942e48a293ad867d186bd519376?s=128&d=identicon&r=PG", "display_name": "Alexey Ten", "link": "https://stackoverflow.com/users/1016033/alexey-ten"}, "edited": false, "score": 0, "creation_date": 1444243847, "post_id": 32998295, "comment_id": 53824979, "body": "@AlexeyTen added it."}], "answers": [{"tags": [], "owner": {"reputation": 74087, "user_id": 214790, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f878c8230342730990acd21f889301d4?s=128&d=identicon&r=PG", "display_name": "matt", "link": "https://stackoverflow.com/users/214790/matt"}, "is_accepted": false, "score": 1, "last_activity_date": 1444308832, "creation_date": 1444308832, "answer_id": 33016443, "question_id": 32998295, "link": "https://stackoverflow.com/questions/32998295/for-a-rack-app-how-do-i-make-passenger-standalone-serve-the-output-of-erb-file/33016443#33016443", "title": "For a rack app, how do I make passenger-standalone serve the output of .erb files rather of sending the .erb file itself?", "body": "<p>Do you have your ERB pages in directory named <code>public</code>?</p>\n\n<p>When Passenger handles a request, Nginx will first try and find a matching file in the <code>public</code> directory and if it finds one will serve it directly without passing the request to your app, since many web app frameworks use this directory for static files by default (e.g. Rails, Sinatra).</p>\n\n<p>Since Rack Server Pages also <a href=\"https://github.com/migrs/rack-server-pages#options\" rel=\"nofollow\">defaults to <code>public</code> for its templates</a>,  I suspect this is what is happening in your case. When you use the extension Passenger is able to find a matching file and sends it directly back as the response. Without the extension Passenger passes the request to the app which is able to map in onto the file and process it as expected.</p>\n\n<p>Since it looks like Rack Server Pages also uses <code>views</code> as a default template directory, the simplest solution is probably to create a directory with this name and move your templates into it. If you have any static files you could leave them in <code>public</code> and get the speed benefit of Nginx serving these as well.</p>\n\n<p>If you prefer you could change the <code>view_path</code> configuration option and use a different directory altogether.</p>\n\n<p>If you want to change the configuration on the Passenger side, you could look at the <a href=\"https://www.phusionpassenger.com/library/config/standalone/reference/#--static-files-dir-static_files_dir\" rel=\"nofollow\"><code>static_files_dir</code> option</a>. You might have to make sure the directory you choose in this case actually exists, even if it is empty.</p>\n"}], "owner": {"reputation": 2538, "user_id": 988591, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/248624b122eb5cc3748ee7131fc0b3f4?s=128&d=identicon&r=PG&f=1", "display_name": "jj_", "link": "https://stackoverflow.com/users/988591/jj"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 590, "favorite_count": 1, "answer_count": 1, "score": 1, "last_activity_date": 1444308832, "creation_date": 1444237476, "last_edit_date": 1444254792, "question_id": 32998295, "link": "https://stackoverflow.com/questions/32998295/for-a-rack-app-how-do-i-make-passenger-standalone-serve-the-output-of-erb-file", "title": "For a rack app, how do I make passenger-standalone serve the output of .erb files rather of sending the .erb file itself?", "body": "<p><strong>I have a simple <em>config.ru</em> rack app</strong> where I only require and run <strong><a href=\"https://github.com/migrs/rack-server-pages\" rel=\"nofollow\">rack-server-pages</a></strong> to provide dynamic pages in a quick and convenient way. This <em>config.ru</em> app is <strong>served by phusion passenger-standalone</strong> (which uses nginx internally).</p>\n\n<p><em>.erb</em> files are processed and served correctly, except when I explicitely add the .erb extension to a URL (for a .erb file). In that case  <strong>the server will send me the .erb file for download, rather than its output.</strong>  Obviously I would like to avoid that.</p>\n\n<p><br>\nTo make it clearer:</p>\n\n<p><br>\nThe file on the server is called <strong><em>somefile.erb</em></strong></p>\n\n<p><em>this works:</em></p>\n\n<pre><code>www.domain.com/somefile\n</code></pre>\n\n<p><em>this sends the .erb file for download</em> \u2639:</p>\n\n<pre><code>www.domain.com/somefile.erb\n</code></pre>\n\n<p><br>\n<strong>How can I fix this? Is this a problem I should manage at the application level</strong> (rack-server-pages), <strong>or at the web server level</strong> (nginx configuration) ? In both cases I would need some help...\n<br><br></p>\n\n<p><strong>Update 2:</strong> I think <a href=\"https://github.com/migrs/rack-server-pages/blob/0de830ef11f58298e0a2be7fe9cb3322a8467081/lib/rack/server_pages.rb\" rel=\"nofollow\">this rack-server-pages file could be relevant</a>... but it's just a wild guess and I wouldn't know what to change in it..</p>\n\n<p><strong>Update 1:</strong> Pasting passenger-standalone Nginx configuration file. <code>Passenger-standalone</code> uses Nginx internally, but with <strong>different settings</strong> than the system-wide Nginx at <code>/etc/nginx/nginx.conf</code>. The default settings for a passenger-standalone Nginx are regenerated at each passenger-standalone run based on the file at <code>/usr/share/passenger/templates/standalone/config.erb</code>. Following is that file:\n<br><br></p>\n\n<pre><code>##############################################################\n#  Phusion Passenger Standalone uses a template file to\n#  generate an Nginx configuration file. The original template\n#  file can be found by running the following command:\n#\n#    ls $(passenger-config about resourcesdir)/templates/standalone/config.erb\n#\n#  You can create a copy of this template file and customize it\n#  to your liking. Just make sure you tell Phusion Passenger Standalone\n#  to use your template file by passing the --nginx-config-template\n#  parameter.\n#\n#  *** NOTE ***\n#  If you customize the template file, make sure you keep an eye\n#  on the original template file and merge any changes.\n#  New Phusion Passenger features may require changes to the template\n#  file.\n##############################################################\n\n\nmaster_process on;\nworker_processes 1;\ndaemon on;\nerror_log '&lt;%= @options[:log_file] %&gt;' &lt;% if @options[:log_level] &gt;= LVL_DEBUG %&gt;info&lt;% end %&gt;;\npid '&lt;%= @options[:pid_file] %&gt;';\n\n&lt;% if Process.euid == 0 %&gt;\n    &lt;% if @options[:user] %&gt;\n        &lt;%# Run workers as the given user. The master process will always run as root and will be able to bind to any port. %&gt;\n        user &lt;%= @options[:user] %&gt; &lt;%= default_group_for(@options[:user]) %&gt;;\n    &lt;% else %&gt;\n        &lt;%# Prevent running Nginx workers as nobody. %&gt;\n        user &lt;%= current_user %&gt; &lt;%= default_group_for(current_user) %&gt;;\n    &lt;% end %&gt;\n&lt;% end %&gt;\n\nevents {\n    worker_connections 1024;\n}\n\nhttp {\n    log_format debug '[$time_local] $msec  \"$request\" $status conn=$connection sent=$bytes_sent body_sent=$body_bytes_sent';\n    include '&lt;%= PhusionPassenger.resources_dir %&gt;/mime.types';\n\n    &lt;% if @options[:ruby] %&gt;\n        passenger_ruby &lt;%= @options[:ruby] %&gt;;\n    &lt;% else %&gt;\n        passenger_ruby &lt;%= PlatformInfo.ruby_command %&gt;;\n    &lt;% end %&gt;\n    &lt;% if @options[:nodejs] %&gt;\n        passenger_nodejs &lt;%= @options[:nodejs] %&gt;;\n    &lt;% end %&gt;\n    &lt;% if @options[:python] %&gt;\n        passenger_python &lt;%= @options[:python] %&gt;;\n    &lt;% end %&gt;\n\n    passenger_root '&lt;%= PhusionPassenger.install_spec %&gt;';\n    passenger_abort_on_startup_error on;\n    passenger_ctl cleanup_pidfiles &lt;%= serialize_strset(\"#{@working_dir}/temp_dir_toucher.pid\") %&gt;;\n    passenger_ctl integration_mode standalone;\n    passenger_ctl standalone_engine nginx;\n    passenger_user_switching off;\n\n    &lt;%= nginx_option :passenger_log_level, :log_level %&gt;\n    &lt;%= nginx_option :passenger_max_pool_size, :max_pool_size %&gt;\n    &lt;%= nginx_option :passenger_min_instances, :min_instances %&gt;\n    &lt;%= nginx_option :passenger_pool_idle_time, :pool_idle_time %&gt;\n    &lt;%= nginx_option :passenger_max_preloader_idle_time, :max_preloader_idle_time %&gt;\n    &lt;%= nginx_option :passenger_turbocaching, :turbocaching %&gt;\n    &lt;% if @options[:user] %&gt;\n        passenger_user &lt;%= @options[:user] %&gt;;\n        passenger_default_user &lt;%= @options[:user] %&gt;;\n        passenger_analytics_log_user &lt;%= @options[:user] %&gt;;\n    &lt;% else %&gt;\n        passenger_user &lt;%= current_user %&gt;;\n        passenger_default_user &lt;%= current_user %&gt;;\n        passenger_analytics_log_user &lt;%= current_user %&gt;;\n    &lt;% end %&gt;\n    &lt;% if @options[:instance_registry_dir] %&gt;passenger_instance_registry_dir '&lt;%= @options[:instance_registry_dir] %&gt;';&lt;% end %&gt;\n    &lt;% if @options[:data_buffer_dir] %&gt;passenger_data_buffer_dir '&lt;%= @options[:data_buffer_dir] %&gt;';&lt;% end %&gt;\n    &lt;% if @options[:rolling_restarts] %&gt;passenger_rolling_restarts on;&lt;% end %&gt;\n    &lt;% if @options[:resist_deployment_errors] %&gt;passenger_resist_deployment_errors on;&lt;% end %&gt;\n    &lt;% if !@options[:load_shell_envvars] %&gt;passenger_load_shell_envvars off;&lt;% end %&gt;\n\n    &lt;% if !@options[:friendly_error_pages].nil? -%&gt;\n        passenger_friendly_error_pages &lt;%= boolean_config_value(@options[:friendly_error_pages]) %&gt;;\n    &lt;% end %&gt;\n\n    &lt;% if @options[:union_station_gateway_address] %&gt;\n        union_station_gateway_address &lt;%= @options[:union_station_gateway_address] %&gt;;\n    &lt;% end %&gt;\n    &lt;% if @options[:union_station_gateway_port] %&gt;\n        union_station_gateway_port &lt;%= @options[:union_station_gateway_port] %&gt;;\n    &lt;% end %&gt;\n    &lt;% if @options[:union_station_gateway_cert] %&gt;\n        union_station_gateway_cert -;\n    &lt;% end %&gt;\n\n    &lt;% @options[:ctls].each do |ctl| %&gt;\n        passenger_ctl '&lt;%= ctl.split(\"=\", 2)[0] %&gt;' '&lt;%= ctl.split(\"=\", 2)[1] %&gt;';\n    &lt;% end %&gt;\n\n    default_type application/octet-stream;\n    types_hash_max_size 2048;\n    server_names_hash_bucket_size 64;\n    client_max_body_size 1024m;\n    access_log off;\n    keepalive_timeout 60;\n    underscores_in_headers on;\n    gzip on;\n    gzip_comp_level 3;\n    gzip_min_length 150;\n    gzip_proxied any;\n    gzip_types text/plain text/css text/json text/javascript\n        application/javascript application/x-javascript application/json\n        application/rss+xml application/vnd.ms-fontobject application/x-font-ttf\n        application/xml font/opentype image/svg+xml text/xml;\n\n    &lt;% if @app_finder.multi_mode? %&gt;\n        # Default server entry for mass deployment mode.\n        server {\n            &lt;% if @options[:ssl] %&gt;\n                &lt;% if @options[:ssl_port] %&gt;\n                    listen &lt;%= nginx_listen_address %&gt;;\n                    listen &lt;%= nginx_listen_address_with_ssl_port %&gt; ssl;\n                                                                                               &lt;% else %&gt;\n                    listen &lt;%= nginx_listen_address %&gt; ssl;\n                &lt;% end %&gt;\n            &lt;% else %&gt;\n                listen &lt;%= nginx_listen_address %&gt;;\n            &lt;% end %&gt;\n            root '&lt;%= PhusionPassenger.resources_dir %&gt;/standalone_default_root';\n        }\n    &lt;% end %&gt;\n\n    &lt;% for app in @apps %&gt;\n    server {\n        &lt;% if app[:ssl] %&gt;\n            &lt;% if app[:ssl_port] %&gt;\n                listen &lt;%= nginx_listen_address(app) %&gt;;\n                listen &lt;%= nginx_listen_address_with_ssl_port(app) %&gt; ssl;\n            &lt;% else %&gt;\n                listen &lt;%= nginx_listen_address(app) %&gt; ssl;\n            &lt;% end %&gt;\n        &lt;% else %&gt;\n            listen &lt;%= nginx_listen_address(app) %&gt;;\n        &lt;% end %&gt;\n        server_name &lt;%= app[:server_names].join(' ') %&gt;;\n        &lt;% if app[:static_files_dir] %&gt;\n            root '&lt;%= app[:static_files_dir] %&gt;';\n        &lt;% else %&gt;\n            root '&lt;%= app[:root] %&gt;/public';\n        &lt;% end %&gt;\n        passenger_app_root '&lt;%= app[:root] %&gt;';\n        passenger_enabled on;\n        passenger_app_env &lt;%= app[:environment] %&gt;;\n        passenger_spawn_method &lt;%= app[:spawn_method] %&gt;;\n        &lt;% if app[:app_type] %&gt;passenger_app_type &lt;%= app[:app_type] %&gt;;&lt;% end %&gt;\n        &lt;% if app[:startup_file] %&gt;passenger_startup_file &lt;%= app[:startup_file] %&gt;;&lt;% end %&gt;\n        &lt;% if app[:concurrency_model] &amp;&amp; app[:concurrency_model] != DEFAULT_CONCURRENCY_MODEL %&gt;passenger_concurrency_model &lt;%= app[:concurrency_model] %&gt;;&lt;% end %&gt;\n        &lt;% if app[:thread_count] &amp;&amp; app[:thread_count] != DEFAULT_APP_THREAD_COUNT %&gt;passenger_thread_count &lt;%= app[:thread_count] %&gt;;&lt;% end %&gt;\n        &lt;% if app[:min_instances] %&gt;passenger_min_instances &lt;%= app[:min_instances] %&gt;;&lt;% end %&gt;\n        &lt;% if app[:restart_dir] %&gt;passenger_restart_dir '&lt;%= app[:restart_dir] %&gt;';&lt;% end %&gt;\n        &lt;% if app[:sticky_sessions] %&gt;passenger_sticky_sessions on;&lt;% end %&gt;\n        &lt;% if app[:sticky_sessions_cookie_name] %&gt;passenger_sticky_sessions_cookie_name '&lt;%= app[:sticky_sessions_cookie_name] %&gt;';&lt;% end %&gt;\n        &lt;% if app[:vary_turbocache_by_cookie] %&gt;passenger_vary_turbocache_by_cookie '&lt;%= app[:vary_turbocache_by_cookie] %&gt;';&lt;% end %&gt;\n        &lt;% if app[:union_station_key] %&gt;\n            union_station_support on;\n            union_station_key &lt;%= app[:union_station_key] %&gt;;\n        &lt;% end %&gt;\n        &lt;% if app[:ssl] %&gt;\n            ssl_certificate &lt;%= app[:ssl_certificate] %&gt;;\n            ssl_certificate_key &lt;%= app[:ssl_certificate_key] %&gt;;\n        &lt;% end %&gt;\n        &lt;% if @options[:meteor_app_settings] %&gt;\n          passenger_meteor_app_settings &lt;%= @options[:meteor_app_settings] %&gt;;\n        &lt;% end %&gt;\n\n        &lt;% app[:envvars].each_pair do |name, value| %&gt;\n            passenger_env_var '&lt;%= name %&gt;' '&lt;%= value %&gt;';\n        &lt;% end %&gt;\n\n        # Rails asset pipeline support.\n        location ~ \"^/assets/.+-([0-9a-f]{32}|[0-9a-f]{64})\\..+\" {\n            error_page 490 = @static_asset;\n        error_page 491 = @dynamic_request;\n            recursive_error_pages on;\n\n            if (-f $request_filename) {\n                return 490;\n            }\n            if (!-f $request_filename) {\n                return 491;\n            }\n        }\n        location @static_asset {\n            gzip_static on;\n            expires max;\n            add_header Cache-Control public;\n            add_header ETag \"\";\n        }\n        location @dynamic_request {\n            passenger_enabled on;\n        }\n    }\n    passenger_pre_start &lt;%= listen_url(app) %&gt;;\n    &lt;% end %&gt;\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4.1", "activescaffold"], "answers": [{"comments": [{"owner": {"reputation": 4487, "user_id": 224519, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/ae23bf1d5ef90ef9076ff7246b400e9d?s=128&d=identicon&r=PG", "display_name": "Arpit Vaishnav", "link": "https://stackoverflow.com/users/224519/arpit-vaishnav"}, "edited": false, "score": 1, "creation_date": 1444281424, "post_id": 32998556, "comment_id": 53838558, "body": "your edited answer is right. I think this should work . Symbol needed to be converted in string to get right result @Arv"}, {"owner": {"reputation": 447, "user_id": 2437427, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/9cf539daf9b56a979444f284ed74b222?s=128&d=identicon&r=PG", "display_name": "Daniel Arenas", "link": "https://stackoverflow.com/users/2437427/daniel-arenas"}, "edited": false, "score": 0, "creation_date": 1444315157, "post_id": 32998556, "comment_id": 53860878, "body": "I got the error is in &lt;% if flash[name] %&gt;, and this code is into the active_scaffold gem. I have error is in flash variable"}, {"owner": {"reputation": 2388, "user_id": 1752114, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/778377fd64568f1a23968400a7477306?s=128&d=identicon&r=PG", "display_name": "Arvind", "link": "https://stackoverflow.com/users/1752114/arvind"}, "reply_to_user": {"reputation": 447, "user_id": 2437427, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/9cf539daf9b56a979444f284ed74b222?s=128&d=identicon&r=PG", "display_name": "Daniel Arenas", "link": "https://stackoverflow.com/users/2437427/daniel-arenas"}, "edited": false, "score": 0, "creation_date": 1444316009, "post_id": 32998556, "comment_id": 53861494, "body": "@DanielArenas but what I have mention that is working ?? because &lt;div class=&quot;&lt;%= &quot;#{name}-message message&quot; %&gt;&quot;&gt; is also wrong"}, {"owner": {"reputation": 2388, "user_id": 1752114, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/778377fd64568f1a23968400a7477306?s=128&d=identicon&r=PG", "display_name": "Arvind", "link": "https://stackoverflow.com/users/1752114/arvind"}, "edited": false, "score": 0, "creation_date": 1444316103, "post_id": 32998556, "comment_id": 53861570, "body": "I have mention name should be like this name.to_s have you seen that"}], "tags": [], "owner": {"reputation": 2388, "user_id": 1752114, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/778377fd64568f1a23968400a7477306?s=128&d=identicon&r=PG", "display_name": "Arvind", "link": "https://stackoverflow.com/users/1752114/arvind"}, "is_accepted": false, "score": 0, "last_activity_date": 1444280530, "last_edit_date": 1444280530, "creation_date": 1444238377, "answer_id": 32998556, "question_id": 32998268, "link": "https://stackoverflow.com/questions/32998268/active-scaffold-error-in-flash-messages-no-implicit-conversion-of-symbol-into-i/32998556#32998556", "title": "active_scaffold Error in Flash messages (no implicit conversion of Symbol into Integer)", "body": "<p>You have used two times double quotes which would not work. \nAs you have passed symbol in the class you need to convert in to string <code>name.to_s</code></p>\n\n<p>There are many ways to print </p>\n\n<pre><code>&lt;div class=\"&lt;%= name.to_s %&gt;-message message\"&gt;\n</code></pre>\n\n<p>or </p>\n\n<pre><code>&lt;div class='&lt;%= \"#{name.to_s}-message message\"%&gt;'&gt;\n</code></pre>\n"}], "owner": {"reputation": 447, "user_id": 2437427, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/9cf539daf9b56a979444f284ed74b222?s=128&d=identicon&r=PG", "display_name": "Daniel Arenas", "link": "https://stackoverflow.com/users/2437427/daniel-arenas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 154, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1444280530, "creation_date": 1444237354, "last_edit_date": 1444238444, "question_id": 32998268, "link": "https://stackoverflow.com/questions/32998268/active-scaffold-error-in-flash-messages-no-implicit-conversion-of-symbol-into-i", "title": "active_scaffold Error in Flash messages (no implicit conversion of Symbol into Integer)", "body": "<p>Rails 4.1.6<br>\nRuby 2.2.2<br>\nactive_scaffold 3.4.28  </p>\n\n<p>I have error when enter in a view of active_scaffold</p>\n\n<p>no implicit conversion of Symbol into Integer</p>\n\n<pre><code>&lt;% for name in [:info, :warning, :error] %&gt;\n  &lt;% if flash[name] %&gt; &lt;&lt;&lt; ------- Got The Error\n    &lt;div class=\"&lt;%= \"#{name}-message message\" %&gt;\"&gt;\n      &lt;%= display_message flash[name] %&gt;\n      &lt;% if request.xhr? %&gt;\n\n\n /home.rbenv/versions/2.2.2/lib/ruby/gems/2.2.0/gems/active_scaffold-3.4.28/app/views/active_scaffold_overrides/_list_messages.html.erb,      \n /home.rbenv/versions/2.2.2/lib/ruby/gems/2.2.0/gems/active_scaffold-3.4.28/app/views/active_scaffold_overrides/_list.html.erb, \n</code></pre>\n\n<p>I dont know why I have problem with the flash messages, some suggestion? </p>\n"}, {"tags": ["ruby-on-rails", "ruby", "postgresql", "ruby-on-rails-4"], "comments": [{"owner": {"reputation": 6689, "user_id": 273444, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/26988136c0514172417b7c7c863733f2?s=128&d=identicon&r=PG", "display_name": "Alexey Shein", "link": "https://stackoverflow.com/users/273444/alexey-shein"}, "edited": false, "score": 7, "creation_date": 1444235476, "post_id": 32997586, "comment_id": 53820059, "body": "It depends on your database. Isn&#39;t it easier just to check it yourself?"}, {"owner": {"reputation": 29107, "user_id": 122080, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/6fa1cdda524d49996a8bc6917328de3d?s=128&d=identicon&r=PG", "display_name": "Damien MATHIEU", "link": "https://stackoverflow.com/users/122080/damien-mathieu"}, "edited": false, "score": 2, "creation_date": 1444235533, "post_id": 32997586, "comment_id": 53820097, "body": "Ruby does nothing in that case. Your database does the thing."}, {"owner": {"reputation": 16229, "user_id": 525478, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/3b6c0b47a0c430a0b141baee7ea845be?s=128&d=identicon&r=PG", "display_name": "Brad Werth", "link": "https://stackoverflow.com/users/525478/brad-werth"}, "edited": false, "score": 1, "creation_date": 1444235671, "post_id": 32997586, "comment_id": 53820174, "body": "Possible duplicate of <a href=\"http://stackoverflow.com/questions/8514167/float-vs-decimal-in-activerecord\">Float vs Decimal in ActiveRecord</a>"}, {"owner": {"reputation": 6689, "user_id": 273444, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/26988136c0514172417b7c7c863733f2?s=128&d=identicon&r=PG", "display_name": "Alexey Shein", "link": "https://stackoverflow.com/users/273444/alexey-shein"}, "edited": false, "score": 0, "creation_date": 1444235839, "post_id": 32997586, "comment_id": 53820268, "body": "What database are you using?"}, {"owner": {"reputation": 2248, "user_id": 1558132, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/8b8f159143056627925a4ed59ff724bb?s=128&d=identicon&r=PG", "display_name": "mack", "link": "https://stackoverflow.com/users/1558132/mack"}, "edited": false, "score": 0, "creation_date": 1444236105, "post_id": 32997586, "comment_id": 53820438, "body": "Postgres is the database"}, {"owner": {"reputation": 2248, "user_id": 1558132, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/8b8f159143056627925a4ed59ff724bb?s=128&d=identicon&r=PG", "display_name": "mack", "link": "https://stackoverflow.com/users/1558132/mack"}, "edited": false, "score": 0, "creation_date": 1444236823, "post_id": 32997586, "comment_id": 53820873, "body": "I didn&#39;t realize it was the database that handles this. It looks like Postgres rounds.Sorry for the trivial question. :)"}, {"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 1, "creation_date": 1444236828, "post_id": 32997586, "comment_id": 53820879, "body": "Based on a very simple script it looks like postgres will round when the value scale exceeds the column scale"}, {"owner": {"reputation": 394580, "user_id": 479863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ArUCE.jpg?s=128&g=1", "display_name": "mu is too short", "link": "https://stackoverflow.com/users/479863/mu-is-too-short"}, "edited": false, "score": 1, "creation_date": 1444237617, "post_id": 32997586, "comment_id": 53821340, "body": "Are you sure it is rounding not truncating? Have you checked the PostgreSQL documentation to see what behavior is specified? Don&#39;t trust empirical evidence unless you&#39;re willing to check all boundary conditions and special cases and even then things can change during an upgrade unless the behavior is specified."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1444238596, "post_id": 32997586, "comment_id": 53821909, "body": "If you&#39;re really concerned about this, why not write unit tests to verify you&#39;re getting the correct behaviour? There&#39;s a dozen ways to round numbers, each with various benefits and drawbacks, so ensuring you&#39;re using the correct one is a simple process, but a necessary one."}], "answers": [{"tags": [], "owner": {"reputation": 121, "user_id": 3877750, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XcGeX.jpg?s=128&g=1", "display_name": "mccartjm", "link": "https://stackoverflow.com/users/3877750/mccartjm"}, "is_accepted": true, "score": 1, "last_activity_date": 1444249123, "last_edit_date": 1444249123, "creation_date": 1444247472, "answer_id": 33001221, "question_id": 32997586, "link": "https://stackoverflow.com/questions/32997586/does-ruby-round-or-truncate/33001221#33001221", "title": "Does Ruby Round or Truncate", "body": "<p>Based on the documentation: <a href=\"http://www.postgresql.org/docs/9.0/static/datatype-numeric.html\" rel=\"nofollow\">http://www.postgresql.org/docs/9.0/static/datatype-numeric.html</a></p>\n\n<p>In section: 8.1.2. Arbitrary Precision Numbers</p>\n\n<p>They will automatically round:</p>\n\n<blockquote>\n  <p>If the scale of a value to be stored is greater than the declared\n  scale of the column, the system will round the value to the specified\n  number of fractional digits. Then, if the number of digits to the left\n  of the decimal point exceeds the declared precision minus the declared\n  scale, an error is raised.</p>\n</blockquote>\n\n<p>I would suggest setting your database to the expected result for that field using: \n<a href=\"http://www.postgresql.org/docs/8.1/static/functions-math.html\" rel=\"nofollow\">http://www.postgresql.org/docs/8.1/static/functions-math.html</a></p>\n\n<p>Then writing unit tests to ensure you are getting the intended results.</p>\n"}], "owner": {"reputation": 2248, "user_id": 1558132, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/8b8f159143056627925a4ed59ff724bb?s=128&d=identicon&r=PG", "display_name": "mack", "link": "https://stackoverflow.com/users/1558132/mack"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 346, "favorite_count": 0, "accepted_answer_id": 33001221, "answer_count": 1, "score": 2, "last_activity_date": 1444249123, "creation_date": 1444235162, "last_edit_date": 1444238511, "question_id": 32997586, "link": "https://stackoverflow.com/questions/32997586/does-ruby-round-or-truncate", "title": "Does Ruby Round or Truncate", "body": "<p>I'm using Ruby on Rails 4.2.3. If I store a number that has five decimal places in a database field that only allows two decimal places, is the number truncated or automagically rounded?</p>\n\n<p>Does 10.12565 become 10.12 or 10.13?</p>\n\n<p>The database field types for both are decimal data types.</p>\n"}, {"tags": ["ruby", "rack", "unicorn"], "answers": [{"comments": [{"owner": {"reputation": 8232, "user_id": 1002814, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/935d2564cfa8572c12763684e072063d?s=128&d=identicon&r=PG", "display_name": "Niels Kristian", "link": "https://stackoverflow.com/users/1002814/niels-kristian"}, "edited": false, "score": 0, "creation_date": 1444290018, "post_id": 33008206, "comment_id": 53842897, "body": "Thanks, but not exactly the answer I was looking for, maybe I didn&#39;t formulate my question well enough :-)"}], "tags": [], "owner": {"reputation": 2060, "user_id": 3625058, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PEy9i.jpg?s=128&g=1", "display_name": "matanco", "link": "https://stackoverflow.com/users/3625058/matanco"}, "is_accepted": false, "score": 0, "last_activity_date": 1444285884, "creation_date": 1444285884, "answer_id": 33008206, "question_id": 32997487, "link": "https://stackoverflow.com/questions/32997487/what-is-causing-error-app-error-no-implicit-conversion-of-fixnum-into-st/33008206#33008206", "title": "What is causing: &quot;ERROR -- : app error: no implicit conversion of Fixnum into String (TypeError)&quot; in my rack app?", "body": "<p>You try to do mathematical calculation on a Text(string) if it's a number but under a string type add <code>to_i</code> then it won't throw this error.</p>\n"}], "owner": {"reputation": 8232, "user_id": 1002814, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/935d2564cfa8572c12763684e072063d?s=128&d=identicon&r=PG", "display_name": "Niels Kristian", "link": "https://stackoverflow.com/users/1002814/niels-kristian"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 52, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1444289984, "creation_date": 1444234853, "last_edit_date": 1444289984, "question_id": 32997487, "link": "https://stackoverflow.com/questions/32997487/what-is-causing-error-app-error-no-implicit-conversion-of-fixnum-into-st", "title": "What is causing: &quot;ERROR -- : app error: no implicit conversion of Fixnum into String (TypeError)&quot; in my rack app?", "body": "<p>I'm running a simple rack based app for image processing on the fly. In my log I see tons of those. Where might this originate from and how do I fix it?</p>\n\n<pre><code>[2015-10-07T16:16:20.299285 #18586] ERROR -- : app error: no implicit conversion of Fixnum into String (TypeError)\nE, [2015-10-07T16:16:20.299510 #18586] ERROR -- : /home/ubuntu/.rvm/gems/ruby-2.2.1@au-images/gems/rack-1.6.1/lib/rack/reloader.rb:87:in `initialize'\nE, [2015-10-07T16:16:20.299560 #18586] ERROR -- : /home/ubuntu/.rvm/gems/ruby-2.2.1@au-images/gems/rack-1.6.1/lib/rack/reloader.rb:87:in `new'\nE, [2015-10-07T16:16:20.299603 #18586] ERROR -- : /home/ubuntu/.rvm/gems/ruby-2.2.1@au-images/gems/rack-1.6.1/lib/rack/reloader.rb:87:in `figure_path'\nE, [2015-10-07T16:16:20.299644 #18586] ERROR -- : /home/ubuntu/.rvm/gems/ruby-2.2.1@au-images/gems/rack-1.6.1/lib/rack/reloader.rb:73:in `block in rotation'\nE, [2015-10-07T16:16:20.299683 #18586] ERROR -- : /home/ubuntu/.rvm/gems/ruby-2.2.1@au-images/gems/rack-1.6.1/lib/rack/reloader.rb:70:in `map'\nE, [2015-10-07T16:16:20.299723 #18586] ERROR -- : /home/ubuntu/.rvm/gems/ruby-2.2.1@au-images/gems/rack-1.6.1/lib/rack/reloader.rb:70:in `rotation'\nE, [2015-10-07T16:16:20.299762 #18586] ERROR -- : /home/ubuntu/.rvm/gems/ruby-2.2.1@au-images/gems/rack-1.6.1/lib/rack/reloader.rb:48:in `reload!'\nE, [2015-10-07T16:16:20.299800 #18586] ERROR -- : /home/ubuntu/.rvm/gems/ruby-2.2.1@au-images/gems/rack-1.6.1/lib/rack/reloader.rb:36:in `block in call'\nE, [2015-10-07T16:16:20.299840 #18586] ERROR -- : &lt;internal:prelude&gt;:12:in `block in exclusive'\nE, [2015-10-07T16:16:20.299878 #18586] ERROR -- : &lt;internal:prelude&gt;:11:in `synchronize'\nE, [2015-10-07T16:16:20.299916 #18586] ERROR -- : &lt;internal:prelude&gt;:11:in `exclusive'\nE, [2015-10-07T16:16:20.299953 #18586] ERROR -- : /home/ubuntu/.rvm/gems/ruby-2.2.1@au-images/gems/rack-1.6.1/lib/rack/reloader.rb:36:in `call'\nE, [2015-10-07T16:16:20.299993 #18586] ERROR -- : /home/ubuntu/.rvm/gems/ruby-2.2.1@au-images/gems/unicorn-4.9.0/lib/unicorn/http_server.rb:580:in `process_client'\nE, [2015-10-07T16:16:20.300052 #18586] ERROR -- : /home/ubuntu/.rvm/gems/ruby-2.2.1@au-images/gems/unicorn-worker-killer-0.4.3/lib/unicorn/worker_killer.rb:52:in `process_client'\nE, [2015-10-07T16:16:20.300095 #18586] ERROR -- : /home/ubuntu/.rvm/gems/ruby-2.2.1@au-images/gems/unicorn-4.9.0/lib/unicorn/http_server.rb:674:in `worker_loop'\nE, [2015-10-07T16:16:20.300134 #18586] ERROR -- : /home/ubuntu/.rvm/gems/ruby-2.2.1@au-images/gems/unicorn-4.9.0/lib/unicorn/http_server.rb:529:in `spawn_missing_workers'\nE, [2015-10-07T16:16:20.300173 #18586] ERROR -- : /home/ubuntu/.rvm/gems/ruby-2.2.1@au-images/gems/unicorn-4.9.0/lib/unicorn/http_server.rb:540:in `maintain_worker_count'\nE, [2015-10-07T16:16:20.300212 #18586] ERROR -- : /home/ubuntu/.rvm/gems/ruby-2.2.1@au-images/gems/unicorn-4.9.0/lib/unicorn/http_server.rb:294:in `join'\nE, [2015-10-07T16:16:20.300251 #18586] ERROR -- : /home/ubuntu/.rvm/gems/ruby-2.2.1@au-images/gems/unicorn-4.9.0/bin/unicorn_rails:209:in `&lt;top (required)&gt;'\nE, [2015-10-07T16:16:20.300289 #18586] ERROR -- : /home/ubuntu/.rvm/gems/ruby-2.2.1@au-images/bin/unicorn_rails:23:in `load'\nE, [2015-10-07T16:16:20.300327 #18586] ERROR -- : /home/ubuntu/.rvm/gems/ruby-2.2.1@au-images/bin/unicorn_rails:23:in `&lt;main&gt;'\nE, [2015-10-07T16:16:20.300365 #18586] ERROR -- : /home/ubuntu/.rvm/gems/ruby-2.2.1@au-images/bin/ruby_executable_hooks:15:in `eval'\nE, [2015-10-07T16:16:20.300403 #18586] ERROR -- : /home/ubuntu/.rvm/gems/ruby-2.2.1@au-images/bin/ruby_executable_hooks:15:in `&lt;main&gt;'\n</code></pre>\n"}, {"tags": ["arrays", "ruby", "string"], "comments": [{"owner": {"reputation": 110733, "user_id": 1009479, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/wlrC5.jpg?s=128&g=1", "display_name": "Yu Hao", "link": "https://stackoverflow.com/users/1009479/yu-hao"}, "edited": false, "score": 0, "creation_date": 1444235344, "post_id": 32997351, "comment_id": 53819984, "body": "What do you mean by <i>isn&#39;t working</i>? What is the value of <code>string</code>?"}, {"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1444235375, "post_id": 32997351, "comment_id": 53820000, "body": "By <code>&lt;=</code> in the return data, do you mean <code>=&gt;</code>?"}, {"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 3, "creation_date": 1444235529, "post_id": 32997351, "comment_id": 53820095, "body": "Cannot be reproduced. Your code does work. It returns <code>&quot;31121322&quot;</code>."}, {"owner": {"reputation": 4968, "user_id": 244330, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/66b048081841e1854319684966683663?s=128&d=identicon&r=PG", "display_name": "newguy", "link": "https://stackoverflow.com/users/244330/newguy"}, "edited": false, "score": 0, "creation_date": 1461677560, "post_id": 32997351, "comment_id": 61300035, "body": "Chunk is awesome. I like the conciseness of the syntax. And the code works like a charm."}], "answers": [{"tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": true, "score": 1, "last_activity_date": 1444241900, "creation_date": 1444241900, "answer_id": 32999616, "question_id": 32997351, "link": "https://stackoverflow.com/questions/32997351/using-chunk-to-make-look-and-say-sequence/32999616#32999616", "title": "Using `chunk` to make look-and-say sequence", "body": "<p>Yes, as @sawa said, and other have confirmed, your code works just fine, and for the approach you have adopted, it's precisely how you should do it. Well, maybe not \"precisely\". You could make a small improvement by replacing <code>split(\"\")</code> with <code>each_char</code>, as the former returns an unnecessary temporary array whereas the latter returns an enumerator.</p>\n\n<p>The main reason I'm offering an answer, however, is to suggest you instead use <a href=\"http://ruby-doc.org/core-2.2.0/String.html#method-i-gsub\" rel=\"nofollow\">String#gsub</a> with a regular expression:</p>\n\n<pre><code>\"1112322\".gsub(/(.)\\1*/) { |s| \"#{s.size}#{s[0]}\" }\n  #=&gt; \"31121322\"\n</code></pre>\n"}], "owner": {"reputation": 123, "user_id": 5418498, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1de6f18e6e282e520506840e296124d8?s=128&d=identicon&r=PG", "display_name": "user25959", "link": "https://stackoverflow.com/users/5418498/user25959"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 53, "favorite_count": 0, "accepted_answer_id": 32999616, "answer_count": 1, "score": -1, "last_activity_date": 1444241900, "creation_date": 1444234408, "last_edit_date": 1444235684, "question_id": 32997351, "link": "https://stackoverflow.com/questions/32997351/using-chunk-to-make-look-and-say-sequence", "title": "Using `chunk` to make look-and-say sequence", "body": "<p>Given a string of numbers <code>string = \"1112322\"</code>, I am trying to return the look-and-say sequence associated with it: Three <code>\"1\"</code>s give <code>\"31\"</code>, one <code>\"2\"</code> gives <code>\"12\"</code>, etc., so result would be <code>\"31121322\"</code>.</p>\n\n<p>I would like to do it in the following way:</p>\n\n<ul>\n<li>Break up the string into <code>[\"1\",\"1\",\"1\",\"2\",\"3\",\"2\",\"2\"]</code>.</li>\n<li><p>Chunk them using the identity block <code>{|n| n}</code>. This should return the data</p>\n\n<pre><code>{1&lt;=[1,1,1],2&lt;=[2],3&lt;=[3],2&lt;=[2,2]}\n</code></pre>\n\n<p>as an enumerable object.</p></li>\n<li>Map them to <code>\"31\"</code>, <code>\"12\"</code>, etc. (the length of the value array as string + the key).</li>\n<li>Join the whole array into a string.</li>\n</ul>\n\n<p>Can anyone explain why my following code isn't working?</p>\n\n<pre><code>string.split(\"\").chunk { |i| i }.map {|i,array| array.length.to_s+i}.join\n</code></pre>\n"}, {"tags": ["ruby", "regex"], "answers": [{"comments": [{"owner": {"reputation": 1082, "user_id": 5381605, "user_type": "registered", "accept_rate": 76, "profile_image": "https://lh5.googleusercontent.com/-5ZF_yJyjvcQ/AAAAAAAAAAI/AAAAAAAAAFM/lQbQAZxe2wo/photo.jpg?sz=128", "display_name": "binarymason", "link": "https://stackoverflow.com/users/5381605/binarymason"}, "edited": false, "score": 0, "creation_date": 1444241941, "post_id": 32997380, "comment_id": 53823849, "body": "hmmmm... looks like the answer to this question is a big fat <b>not possible</b>.  Marking as complete and opening another question on the way ahead.  Thanks @sawa."}], "tags": [], "owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "is_accepted": true, "score": 1, "last_activity_date": 1444240276, "last_edit_date": 1444240276, "creation_date": 1444234509, "answer_id": 32997380, "question_id": 32997111, "link": "https://stackoverflow.com/questions/32997111/possible-to-pass-variable-to-regex-literal-then-capture-match-group-to-another-l/32997380#32997380", "title": "Possible to pass variable to regex literal then capture match group to another local variable?", "body": "<p>Under the documentation for <a href=\"http://ruby-doc.org/core-2.2.3/Regexp.html#method-i-3D-7E\" rel=\"nofollow\">Regexp#=~</a>, it says:</p>\n\n<blockquote>\n  <p>This assignment is implemented in the Ruby parser. The parser detects \u2018regexp-literal =~ expression\u2019 for the assignment. The regexp must be a <strong>literal without interpolation</strong> and placed at left hand side.</p>\n</blockquote>\n\n<p>The reason local variable was not assigned is because your regex was defined using interpolation, and is not a literal.</p>\n\n<p>As the citation implies, assigning a local variable is done during parsing phase, and since string interpolation is done during run time, there seems no way to detour the limitation imposed by the specification.</p>\n"}, {"tags": [], "owner": {"reputation": 1082, "user_id": 5381605, "user_type": "registered", "accept_rate": 76, "profile_image": "https://lh5.googleusercontent.com/-5ZF_yJyjvcQ/AAAAAAAAAAI/AAAAAAAAAFM/lQbQAZxe2wo/photo.jpg?sz=128", "display_name": "binarymason", "link": "https://stackoverflow.com/users/5381605/binarymason"}, "is_accepted": false, "score": 0, "last_activity_date": 1444247674, "creation_date": 1444247674, "answer_id": 33001275, "question_id": 32997111, "link": "https://stackoverflow.com/questions/32997111/possible-to-pass-variable-to-regex-literal-then-capture-match-group-to-another-l/33001275#33001275", "title": "Possible to pass variable to regex literal then capture match group to another local variable?", "body": "<p>For anyone's future reference. You have to use regexp's <code>MatchData</code>. This is what worked for me:</p>\n\n<pre><code>def example_extract(url_str)\n  exmpl = '.com'\n  regx = /(?&lt;extract&gt;\\b#{exmpl}\\b)[\\/]{0,1}/\n  extract = regx.match(url_str)[:extract]\n  p extract\nend\n\nexample_extract('google.com')\n</code></pre>\n"}], "owner": {"reputation": 1082, "user_id": 5381605, "user_type": "registered", "accept_rate": 76, "profile_image": "https://lh5.googleusercontent.com/-5ZF_yJyjvcQ/AAAAAAAAAAI/AAAAAAAAAFM/lQbQAZxe2wo/photo.jpg?sz=128", "display_name": "binarymason", "link": "https://stackoverflow.com/users/5381605/binarymason"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 78, "favorite_count": 0, "accepted_answer_id": 32997380, "answer_count": 2, "score": 1, "last_activity_date": 1444247674, "creation_date": 1444233746, "last_edit_date": 1444234891, "question_id": 32997111, "link": "https://stackoverflow.com/questions/32997111/possible-to-pass-variable-to-regex-literal-then-capture-match-group-to-another-l", "title": "Possible to pass variable to regex literal then capture match group to another local variable?", "body": "<p>In order to save <a href=\"http://ruby-doc.org/core-2.2.3/Regexp.html#class-Regexp-label-Capturing\" rel=\"nofollow\">regex capture groups</a> to a local variable, the regex must be on the left side of an operation such as <code>/(?&lt;somegroup&gt;someregex)/ =~ 'somestring'</code>. For example, given a url string, extracting the top level domain: </p>\n\n<pre><code>/(?&lt;extract&gt;\\b.com\\b)[\\/]{0,1}/ =~ 'google.com'\nputs extract # =&gt; .com\n</code></pre>\n\n<p>There are various domains (.org, .scb, .wine, .me, etc). My strategy is to store <a href=\"http://www.iana.org/domains/root/db\" rel=\"nofollow\">all possible tlds from a reputable source</a> in an array, and iterate through each one and pass it to the regex. How do you pass a variable to the literal?</p>\n\n<p>Here is a simplified method of what I am trying to do:</p>\n\n<pre><code>def example_extract(url_str)\n  exmpl = '.com'\n  regx = /(?&lt;extract&gt;\\b#{exmpl}\\b)[\\/]{0,1}/\n  regx =~ url_str\n  extract\nend\n\nexample_extract('google.com')\n# =&gt; NameError: undefined local variable or method `extract' for main:Object\n</code></pre>\n\n<p>I fail to pass a variable to a left hand (literal) regex operation. Why is my capture group <code>extract</code> not defined?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "acts-as-taggable-on"], "comments": [{"owner": {"reputation": 5483, "user_id": 4481312, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/teLso.jpg?s=128&g=1", "display_name": "marmeladze", "link": "https://stackoverflow.com/users/4481312/marmeladze"}, "edited": false, "score": 0, "creation_date": 1444234539, "post_id": 32996729, "comment_id": 53819471, "body": "could you <code>print</code> <code>params[:tag]</code>?"}, {"owner": {"reputation": 349, "user_id": 4729071, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/84e71b5dd68a02da991225f3effe3b20?s=128&d=identicon&r=PG&f=1", "display_name": "Ray", "link": "https://stackoverflow.com/users/4729071/ray"}, "reply_to_user": {"reputation": 5483, "user_id": 4481312, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/teLso.jpg?s=128&g=1", "display_name": "marmeladze", "link": "https://stackoverflow.com/users/4481312/marmeladze"}, "edited": false, "score": 0, "creation_date": 1444236232, "post_id": 32996729, "comment_id": 53820514, "body": "params[:tag] returns basically whatever I click on so if i click on tv my params[:tag] returns &#39;tv&#39;"}, {"owner": {"reputation": 5483, "user_id": 4481312, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/teLso.jpg?s=128&g=1", "display_name": "marmeladze", "link": "https://stackoverflow.com/users/4481312/marmeladze"}, "edited": false, "score": 0, "creation_date": 1444238098, "post_id": 32996729, "comment_id": 53821611, "body": "I asked question above beacuse you should parse the <code>params[:tag]</code> string to array. <code>User.tagged_with([&quot;credit card&quot;, &quot;bill&quot;], :match_all =&gt; true)</code> will match all users tagged with both <code>credit card</code> and <code>bill</code>.  Providing such functionality you should rewrite code for url which accepts tag param.  e.g.: <code>url&#47;?tags=tag1+tag2</code>  here <code>params[:tag]</code> is <code>tag1 tag2</code> string. you should parse them and put in an array then pass to <code>with_tagged</code> method. also in tag search page, you have to build new urls for chaining tag requests. e.g. <code>url?tags=tag1</code> =&gt; <code>url?tags=tag1+tag2</code> not `url?tags=tag2"}, {"owner": {"reputation": 349, "user_id": 4729071, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/84e71b5dd68a02da991225f3effe3b20?s=128&d=identicon&r=PG&f=1", "display_name": "Ray", "link": "https://stackoverflow.com/users/4729071/ray"}, "reply_to_user": {"reputation": 5483, "user_id": 4481312, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/teLso.jpg?s=128&g=1", "display_name": "marmeladze", "link": "https://stackoverflow.com/users/4481312/marmeladze"}, "edited": false, "score": 0, "creation_date": 1444840316, "post_id": 32996729, "comment_id": 54073328, "body": "I&#39;m still struggling to chain tag requests can you please show me how that would look in my context. thanks"}, {"owner": {"reputation": 5483, "user_id": 4481312, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/teLso.jpg?s=128&g=1", "display_name": "marmeladze", "link": "https://stackoverflow.com/users/4481312/marmeladze"}, "edited": false, "score": 0, "creation_date": 1444845090, "post_id": 32996729, "comment_id": 54076010, "body": "could you provide your url format? are they beautiful, like <code>&#47;url&#47;tags&#47;tag1&#47;tag2</code> or old school style like, <code>&#47;url&#47;?tags=tag1+tag2</code>"}, {"owner": {"reputation": 349, "user_id": 4729071, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/84e71b5dd68a02da991225f3effe3b20?s=128&d=identicon&r=PG&f=1", "display_name": "Ray", "link": "https://stackoverflow.com/users/4729071/ray"}, "reply_to_user": {"reputation": 5483, "user_id": 4481312, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/teLso.jpg?s=128&g=1", "display_name": "marmeladze", "link": "https://stackoverflow.com/users/4481312/marmeladze"}, "edited": false, "score": 0, "creation_date": 1444847869, "post_id": 32996729, "comment_id": 54077682, "body": "it looks like this for one of the tag <code>url&#47;tag.Video?class=s&amp;tag=Video</code> Btw I haven&#39;t been able to chain it like ` tag1/tag2/tag3` yet"}, {"owner": {"reputation": 5483, "user_id": 4481312, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/teLso.jpg?s=128&g=1", "display_name": "marmeladze", "link": "https://stackoverflow.com/users/4481312/marmeladze"}, "edited": false, "score": 0, "creation_date": 1444851202, "post_id": 32996729, "comment_id": 54079617, "body": "try <code>link_to &quot;Something&quot;, tags_path(:class =&gt; &quot;s&quot;, :tags =&gt; {:tag1 =&gt; &quot;foo&quot;, :tag2 =&gt;&quot;bar&quot;})</code>. this will make your urls look like <code>tags?class=s&amp;tags[tag1]=foo&amp;tags[tag2]=bar</code>.   or add a hyperlink to one of your current pages like that: <code>link_to &quot;Another thing&quot;, request.original_uri+&#39;&#47;&amp;tags[tag2]=bar&#39;</code>   then in your controller function you have to parse this query."}], "answers": [{"tags": [], "owner": {"reputation": 251, "user_id": 5338062, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/07cdd86ea7bd7c23f87fab877b652a00?s=128&d=identicon&r=PG&f=1", "display_name": "Florin Ionita", "link": "https://stackoverflow.com/users/5338062/florin-ionita"}, "is_accepted": false, "score": 0, "last_activity_date": 1444233422, "creation_date": 1444233422, "answer_id": 32996983, "question_id": 32996729, "link": "https://stackoverflow.com/questions/32996729/rails-search-by-multiple-tags-using-acts-as-taggle-on/32996983#32996983", "title": "Rails search by multiple tags using acts as taggle on", "body": "<p>Try</p>\n\n<pre><code>get 'tag/*tags' =&gt; 'users#index', :as =&gt; 'tag'\n</code></pre>\n"}], "owner": {"reputation": 349, "user_id": 4729071, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/84e71b5dd68a02da991225f3effe3b20?s=128&d=identicon&r=PG&f=1", "display_name": "Ray", "link": "https://stackoverflow.com/users/4729071/ray"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 332, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1444233422, "creation_date": 1444232708, "last_edit_date": 1495541032, "question_id": 32996729, "link": "https://stackoverflow.com/questions/32996729/rails-search-by-multiple-tags-using-acts-as-taggle-on", "title": "Rails search by multiple tags using acts as taggle on", "body": "<p>At the moment when you click on a tag, it shows all tasks with that tag. What I'd like to do is make it so that once you click a tag, clicking an additional tag further filters the results with the clicked tag name. </p>\n\n<p>Ex.</p>\n\n<p>Cable (tagged with: tv, credit card. bills)</p>\n\n<p>Chairs (tagged with: credit card, bills)</p>\n\n<p>When I click on the 'credit card' tag after I click 'bills' tag , I'd like to have it display only those tasks which are both a bills tag AND and credit card tag.</p>\n\n<p>Thanks for any help or suggestions</p>\n\n<p>I followed <a href=\"https://stackoverflow.com/questions/13629924/rails-acts-as-taggle-on-filter-by-multiple-tags/\">this </a> example but still when I click one tag it filters it but when I click on another tag it doesn't remember the tag that was clicked before.</p>\n\n<p>users_controller.rb</p>\n\n<pre><code>class UsersController &lt; ApplicationController\n\n  def index\n    if params[:tag]\n      @users = User.tagged_with(params[:tag])\n    end\nend\n</code></pre>\n\n<p>routes.rb</p>\n\n<pre><code>get 'context' =&gt; 'users#index', :as =&gt; 'context'\nget 'tag' =&gt; 'users#index', :as =&gt; 'tag'\n</code></pre>\n\n<p>index.html.erb</p>\n\n<pre><code>&lt;% tag_cloud User.tag_counts_on(:tags), %w[s m l] do |tag, css_class| %&gt;\n   &lt;%= link_to tag.name, tag_path(tag:(tag.name), class: css_class) %&gt;\n&lt;% end %&gt;\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "wkhtmltopdf", "wicked-pdf"], "answers": [{"comments": [{"owner": {"reputation": 347, "user_id": 5181773, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/baa25d98c4bf3e71c5a66d9d557bae94?s=128&d=identicon&r=PG&f=1", "display_name": "volt", "link": "https://stackoverflow.com/users/5181773/volt"}, "edited": false, "score": 0, "creation_date": 1444234205, "post_id": 32997097, "comment_id": 53819258, "body": "New error:  <code>[&quot;C:&#47;Program Files&#47;wkhtmltopdf&#47;bin&#47;wkhtmltopdf.exe&quot;, &quot;file:&#47;&#47;C:&#47;Users&#47;xx&#47;AppData&#47;Local&#47;Temp&#47;wicked_pdf20151007-25&zwnj;&#8203;72-3ytogu.html&quot;, &quot;C:&#47;Users&#47;xx&#47;AppData&#47;Local&#47;Temp&#47;wicked_pdf_generated_file201&zwnj;&#8203;51007-2572-93hmvr.pd&zwnj;&#8203;f&quot;] Error: PDF could not be generated! Command Error: Loading pages (1&#47;6)  Error: Failed loading page file:&#47;&#47;c&#47;Users&#47;xx&#47;AppData&#47;Local&#47;Temp&#47;wicked_pdf20151007-864-&zwnj;&#8203;1qs3w7v.html (sometimes it will work just to ignore this error with --load-error-handling ignore) Exit with code 1 due to network error: ContentNotFoundError</code>"}], "tags": [], "owner": {"reputation": 251, "user_id": 5338062, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/07cdd86ea7bd7c23f87fab877b652a00?s=128&d=identicon&r=PG&f=1", "display_name": "Florin Ionita", "link": "https://stackoverflow.com/users/5338062/florin-ionita"}, "is_accepted": false, "score": 1, "last_activity_date": 1444233702, "creation_date": 1444233702, "answer_id": 32997097, "question_id": 32996693, "link": "https://stackoverflow.com/questions/32996693/bad-wkhtmltopdfs-path-wicked-pdf-on-windows/32997097#32997097", "title": "Bad wkhtmltopdf&#39;s path - wicked_pdf on windows", "body": "<p>Try</p>\n\n<pre><code>:exe_path =&gt; 'C:/Program Files/wkhtmltopdf/bin/wkhtmltopdf.exe'\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 591, "user_id": 733561, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ea8e609cbfebc8cfba6594d56a4a6006?s=128&d=identicon&r=PG&f=1", "display_name": "Shanaka Kuruwita", "link": "https://stackoverflow.com/users/733561/shanaka-kuruwita"}, "is_accepted": false, "score": 0, "last_activity_date": 1601840646, "creation_date": 1601840646, "answer_id": 64199142, "question_id": 32996693, "link": "https://stackoverflow.com/questions/32996693/bad-wkhtmltopdfs-path-wicked-pdf-on-windows/64199142#64199142", "title": "Bad wkhtmltopdf&#39;s path - wicked_pdf on windows", "body": "<p>On Windows you must specify the exe extension.</p>\n<p>so the current configuration is</p>\n<pre><code>WickedPdf.config = {   :exe_path =&gt; 'C:\\Program Files\\wkhtmltopdf\\bin\\wkhtmltopdf.exe' }\n</code></pre>\n"}], "owner": {"reputation": 347, "user_id": 5181773, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/baa25d98c4bf3e71c5a66d9d557bae94?s=128&d=identicon&r=PG&f=1", "display_name": "volt", "link": "https://stackoverflow.com/users/5181773/volt"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1670, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1601840646, "creation_date": 1444232643, "question_id": 32996693, "link": "https://stackoverflow.com/questions/32996693/bad-wkhtmltopdfs-path-wicked-pdf-on-windows", "title": "Bad wkhtmltopdf&#39;s path - wicked_pdf on windows", "body": "<p>I downloaded whkhtmltopdf manually via:</p>\n\n<pre><code>http://wkhtmltopdf.org/downloads.html\n</code></pre>\n\n<p>After this I changed my wicked_pdf.rb to:</p>\n\n<pre><code>WickedPdf.config = {\n  #:wkhtmltopdf =&gt; '/usr/local/bin/wkhtmltopdf',\n  #:layout =&gt; \"pdf.html\",\n  :exe_path =&gt; 'C:\\Program Files\\wkhtmltopdf\\bin\\wkhtmltopdf'\n}\n</code></pre>\n\n<p>I tried \"where wkhtmltopdf\" in my windows console and I obtain this:</p>\n\n<pre><code>c:\\RailsInstaller\\Ruby2.1.0\\bin\\wkhtmltopdf\nc:\\RailsInstaller\\Ruby2.1.0\\bin\\wkhtmltopdf.bat\n</code></pre>\n\n<p>After change change \"exe_path\" I obtain the same error.</p>\n"}, {"tags": ["ruby", "vcr"], "answers": [{"tags": [], "owner": {"reputation": 6689, "user_id": 273444, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/26988136c0514172417b7c7c863733f2?s=128&d=identicon&r=PG", "display_name": "Alexey Shein", "link": "https://stackoverflow.com/users/273444/alexey-shein"}, "is_accepted": true, "score": 2, "last_activity_date": 1444234227, "creation_date": 1444234227, "answer_id": 32997297, "question_id": 32996586, "link": "https://stackoverflow.com/questions/32996586/show-ruby-vcr-stats-after-running-tests/32997297#32997297", "title": "Show ruby VCR stats after running tests?", "body": "<p>Take a look at <a href=\"https://relishapp.com/vcr/vcr/v/2-9-3/docs/hooks/after-http-request-hook\" rel=\"nofollow\">After Http Request Hook</a>:</p>\n\n<pre><code>VCR.configure do |c|\n  c.cassette_library_dir = 'cassettes'\n  c.ignore_localhost = true\n  c.after_http_request(:ignored?, lambda { |req| req.uri =~ /foo/ }) do |request, response|\n    puts \"Response for #{request.method} #{request.uri}: #{response.body}\"\n  end\nend\n</code></pre>\n\n<p>Or you can enable <a href=\"https://relishapp.com/vcr/vcr/v/2-9-3/docs/configuration/debug-logging\" rel=\"nofollow\">debug logging</a>:</p>\n\n<pre><code>VCR.configure do |c|\n  c.hook_into :webmock\n  c.cassette_library_dir = 'cassettes'\n  c.debug_logger = File.open(ARGV.first, 'w')\nend\n</code></pre>\n"}], "owner": {"reputation": 641, "user_id": 3476249, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/4bd30e00c752c0a438f2ffff13bbac84?s=128&d=identicon&r=PG&f=1", "display_name": "fabro", "link": "https://stackoverflow.com/users/3476249/fabro"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 31, "favorite_count": 0, "accepted_answer_id": 32997297, "answer_count": 1, "score": 1, "last_activity_date": 1444234227, "creation_date": 1444232324, "question_id": 32996586, "link": "https://stackoverflow.com/questions/32996586/show-ruby-vcr-stats-after-running-tests", "title": "Show ruby VCR stats after running tests?", "body": "<p>Is there a way of knowing how many requests are happening when you run your tests and could be cached by VCR.</p>\n\n<p>Is there a way of knowing how many of those are getting read from the VCR cache?</p>\n\n<p>Thanks</p>\n"}, {"tags": ["ruby"], "answers": [{"tags": [], "owner": {"reputation": 534, "user_id": 827715, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/11474de354dc6452e2cdbd076c453b1c?s=128&d=identicon&r=PG&f=1", "display_name": "Harish Ved", "link": "https://stackoverflow.com/users/827715/harish-ved"}, "is_accepted": false, "score": 4, "last_activity_date": 1444232277, "last_edit_date": 1444232277, "creation_date": 1444232096, "answer_id": 32996498, "question_id": 32996434, "link": "https://stackoverflow.com/questions/32996434/modifying-two-dimensional-array-ruby/32996498#32996498", "title": "modifying two dimensional array ruby", "body": "<p>You might need to refer to <a href=\"http://ruby-doc.org/core-2.2.0/Array.html#method-c-new-label-Common+gotchas\" rel=\"nofollow\">this</a></p>\n\n<p><code>Array.new(3,Array.new(2,0))</code> can be understood in 2 steps -</p>\n\n<ol>\n<li><p>a new array <code>Array.new(2,0)</code> is created</p></li>\n<li><p>again a new array is created with 3 elements with the same object (1) in all 3 places.</p></li>\n</ol>\n\n<p>Hence, changing a value in any of the subarrays changes values in each one of them. The sub arrays are referring to the same object.</p>\n\n<p>As Gavin Miller pointed out, you will need to use <code>a = Array.new(3) { Array.new(2,0) }</code> to change each element.</p>\n"}, {"comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1444258453, "post_id": 32996552, "comment_id": 53832390, "body": "This is fine if the default value is immutable, as are Fixnum&#39;s. If <code>a = Array.new(3) { Array.new(2,&#39;a&#39;) }</code>, (<code>a</code> being mutable) and you reassign an element, <code>a[0][0] = &#39;b&#39;</code>, not a problem: <code>a #=&gt; [[&quot;b&quot;,&quot;a&quot;], [&quot;a&quot;,&quot;a&quot;], [&quot;a&quot;,&quot;a&quot;]]</code>. If, however, you <i>replace</i> an element, <code>a[0][0].replace(&#39;b&#39;)</code>, you get <code>[[&quot;b&quot;,&quot;b&quot;], [&quot;a&quot;,&quot;a&quot;], [&quot;a&quot;, &quot;a&quot;]]</code>. (Be sure to first reinitialize <code>a</code> if you wish to test this.) If you use <code>a = Array.new(3) { Array.new(2) {&#39;a&#39;} }</code>, then <code>a[0][0].replace(&#39;b&#39;); a #=&gt; [[&quot;b&quot;,&quot;a&quot;], [&quot;a&quot;,&quot;a&quot;], [&quot;a&quot;,&quot;a&quot;]]</code>, as desired. If you&#39;re unsure, put the default in a block."}], "tags": [], "owner": {"reputation": 40466, "user_id": 33226, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/8f75007bcbcb8ba4daa408592e1c65ec?s=128&d=identicon&r=PG", "display_name": "Gavin Miller", "link": "https://stackoverflow.com/users/33226/gavin-miller"}, "is_accepted": true, "score": 6, "last_activity_date": 1444232213, "creation_date": 1444232213, "answer_id": 32996552, "question_id": 32996434, "link": "https://stackoverflow.com/questions/32996434/modifying-two-dimensional-array-ruby/32996552#32996552", "title": "modifying two dimensional array ruby", "body": "<p>You'll have to change how you're initializing your Array (<a href=\"http://ruby-doc.org/core-2.2.0/Array.html#method-c-new-label-Common+gotchas\">this is a known issue</a>) to this:</p>\n\n<pre><code>a = Array.new(3) { Array.new(2,0) }\n</code></pre>\n\n<p>The difference between your version and this version is that the <code>Array.new(2,0)</code> only occurs once. You're creating one array with 3 \"pointers\" to the second array. You can see this demonstrated in the following code:</p>\n\n<pre><code>a = Array.new(3,Array.new(2,0))\na.map { |a| a.object_id }\n#=&gt; [70246027840960, 70246027840960, 70246027840960] # Same object ids!\n\na = Array.new(3) { Array.new(2,0) }\na.map { |a| a.object_id }\n#=&gt; [70246028007600, 70246028007580, 70246028007560] # Different object ids\n</code></pre>\n"}], "owner": {"reputation": 4194, "user_id": 527106, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/2coeQ.jpg?s=128&g=1", "display_name": "Oded Harth", "link": "https://stackoverflow.com/users/527106/oded-harth"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 61, "favorite_count": 0, "closed_date": 1444260166, "accepted_answer_id": 32996552, "answer_count": 2, "score": 4, "last_activity_date": 1444258181, "creation_date": 1444231919, "question_id": 32996434, "link": "https://stackoverflow.com/questions/32996434/modifying-two-dimensional-array-ruby", "closed_reason": "Duplicate", "title": "modifying two dimensional array ruby", "body": "<p>if I create this Array:</p>\n\n<pre><code>a = Array.new(3,Array.new(2,0))\n</code></pre>\n\n<p>it creates:</p>\n\n<pre><code>=&gt; [[0, 0], [0, 0], [0, 0]]\n</code></pre>\n\n<p>And when I try to change specific element:</p>\n\n<pre><code>a[0][0] = 3\n</code></pre>\n\n<p>it changes multiple values:</p>\n\n<pre><code> =&gt; [[3, 0], [3, 0], [3, 0]]\n</code></pre>\n\n<p>Why is this happening? And how can I change a specific element?</p>\n"}, {"tags": ["jquery", "ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 4662, "user_id": 2456549, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/9Uz71.png?s=128&g=1", "display_name": "Justin", "link": "https://stackoverflow.com/users/2456549/justin"}, "edited": false, "score": 1, "creation_date": 1444232128, "post_id": 32995995, "comment_id": 53817757, "body": "You have quite a number of options here. 1) show/hide both links and just toggle them depending. i.e.: show accept; when click accept, hide accept and show cancel. 2) add a <code>accept.js.erb</code> file and add the javascript here. &quot;Unobtrusive javascript&quot; - <a href=\"http://edgeguides.rubyonrails.org/working_with_javascript_in_rails.html#server-side-concerns\" rel=\"nofollow noreferrer\">edgeguides.rubyonrails.org/&hellip;</a> 3. Handle the link via AJAX in a javascript file and return a partial (via controller) with the new link.   it&#39;ll take some time to type all these up with examples, but I will if you would like."}, {"owner": {"reputation": 162909, "user_id": 1175966, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8d3d9dfbd040f9cbc1a6b82f0da2b345?s=128&d=identicon&r=PG", "display_name": "charlietfl", "link": "https://stackoverflow.com/users/1175966/charlietfl"}, "edited": false, "score": 1, "creation_date": 1444232235, "post_id": 32995995, "comment_id": 53817832, "body": "use a data atribute on the elements and read that value"}, {"owner": {"reputation": 4662, "user_id": 2456549, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/9Uz71.png?s=128&g=1", "display_name": "Justin", "link": "https://stackoverflow.com/users/2456549/justin"}, "reply_to_user": {"reputation": 162909, "user_id": 1175966, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8d3d9dfbd040f9cbc1a6b82f0da2b345?s=128&d=identicon&r=PG", "display_name": "charlietfl", "link": "https://stackoverflow.com/users/1175966/charlietfl"}, "edited": false, "score": 1, "creation_date": 1444232270, "post_id": 32995995, "comment_id": 53817870, "body": "Yep, I should have included that in my list @charlietfl. And to add the to data-attribute, you could even group the controller methods into one and accept/cancel depending on current state, so you wouldn&#39;t have to change much client side."}], "answers": [{"comments": [{"owner": {"reputation": 454, "user_id": 4420382, "user_type": "registered", "accept_rate": 78, "profile_image": "https://graph.facebook.com/100007097701606/picture?type=large", "display_name": "Martijn Kerckhaert", "link": "https://stackoverflow.com/users/4420382/martijn-kerckhaert"}, "edited": false, "score": 0, "creation_date": 1444233074, "post_id": 32996615, "comment_id": 53818453, "body": "Thank you for your answer, one small issue there, I am getting the employee_id in a loop in my view and thus I get the error undefined local variable or method `e&#39; for #&lt;#&lt;Class:0x007fdd840e2ab8&gt;:0x007fdd83ca80b0&gt; with the parameters employer_id and vacancy_id, and I need the employee_id aswell to target the correct row to change."}, {"owner": {"reputation": 19261, "user_id": 4758119, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/F4dJY.jpg?s=128&g=1", "display_name": "Deepak Mahakale", "link": "https://stackoverflow.com/users/4758119/deepak-mahakale"}, "reply_to_user": {"reputation": 454, "user_id": 4420382, "user_type": "registered", "accept_rate": 78, "profile_image": "https://graph.facebook.com/100007097701606/picture?type=large", "display_name": "Martijn Kerckhaert", "link": "https://stackoverflow.com/users/4420382/martijn-kerckhaert"}, "edited": false, "score": 2, "creation_date": 1444233313, "post_id": 32996615, "comment_id": 53818640, "body": "you need to set <code>@employee</code> object from accept/candidate action  that so that it will be available in your views and then change <code>e.id</code> to <code>@employee.id</code>"}, {"owner": {"reputation": 454, "user_id": 4420382, "user_type": "registered", "accept_rate": 78, "profile_image": "https://graph.facebook.com/100007097701606/picture?type=large", "display_name": "Martijn Kerckhaert", "link": "https://stackoverflow.com/users/4420382/martijn-kerckhaert"}, "edited": false, "score": 0, "creation_date": 1444233524, "post_id": 32996615, "comment_id": 53818786, "body": "Works like a charm! Thanks!"}], "tags": [], "owner": {"reputation": 19261, "user_id": 4758119, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/F4dJY.jpg?s=128&g=1", "display_name": "Deepak Mahakale", "link": "https://stackoverflow.com/users/4758119/deepak-mahakale"}, "is_accepted": true, "score": 1, "last_activity_date": 1444232983, "last_edit_date": 1444232983, "creation_date": 1444232423, "answer_id": 32996615, "question_id": 32995995, "link": "https://stackoverflow.com/questions/32995995/jquery-replacewith-ruby-code/32996615#32996615", "title": "jQuery .replacewith ruby code", "body": "<blockquote>\n  <p>it works completly fine with just plain text, but I need the text to be the embedded ruby. Is this possible?</p>\n</blockquote>\n\n<p>You have to create <code>.js</code> files for your action where you can change the html of link with paths as well</p>\n\n<p>e.g \ncreate <code>accept_candidate.js.erb</code> and add respond_to js format it will do the trick</p>\n\n<pre><code># accept_candidate.js.erb\n$(\"[id^='link_']\").html(\"&lt;%= escape_javascript(render('cancel_link')) %&gt;\")\n\n\n# _cancel_link.html.erb\n&lt;%= link_to \"Cancel\", back_to_pending_path(vacancy_id: @vacancy.id, employee_id: e.id), method: :post, :remote =&gt; true%&gt;\n</code></pre>\n"}], "owner": {"reputation": 454, "user_id": 4420382, "user_type": "registered", "accept_rate": 78, "profile_image": "https://graph.facebook.com/100007097701606/picture?type=large", "display_name": "Martijn Kerckhaert", "link": "https://stackoverflow.com/users/4420382/martijn-kerckhaert"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 333, "favorite_count": 1, "accepted_answer_id": 32996615, "answer_count": 1, "score": 0, "last_activity_date": 1444232983, "creation_date": 1444230728, "question_id": 32995995, "link": "https://stackoverflow.com/questions/32995995/jquery-replacewith-ruby-code", "title": "jQuery .replacewith ruby code", "body": "<p>I have ruby code that calls a method to accept a candidate for a vacancy like this:</p>\n\n<pre><code>&lt;%= link_to \"Accept\", accept_candidate_path(vacancy_id: @vacancy.id, employee_id: e.id), method: :post, :remote =&gt; true, :id =&gt; \"link_#{i}\" %&gt;\n</code></pre>\n\n<p>The method changes the state in the database to Accepted.</p>\n\n<p>Once that is clicked, I want to replace that with following ruby code:</p>\n\n<pre><code>&lt;%= link_to \"Cancel\", back_to_pending_path(vacancy_id: @vacancy.id, employee_id: e.id), method: :post, :remote =&gt; true%&gt;\n</code></pre>\n\n<p>I also have a if/else that checks the state of a candidate to display either links. But that is only triggered by refreshing the page and I just want it to accept it, change the button without completely refreshing the page.</p>\n\n<p>Currently I have this:</p>\n\n<pre><code>$(\"[id^='link_']\").click(function (event) {\n  $(this).replaceWith(\"Accepted\")\n});\n</code></pre>\n\n<p>and it works completly fine with just plain text, but I need the text to be the embedded ruby. Is this possible?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "http", "ruby-on-rails-4"], "answers": [{"tags": [], "owner": {"reputation": 27, "user_id": 4863097, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/38944932666a7156ca837fc32dd1b122?s=128&d=identicon&r=PG&f=1", "display_name": "Users for programing", "link": "https://stackoverflow.com/users/4863097/users-for-programing"}, "is_accepted": false, "score": 0, "last_activity_date": 1444236223, "creation_date": 1444236223, "answer_id": 32997919, "question_id": 32995773, "link": "https://stackoverflow.com/questions/32995773/rails-get-request-body-0byte/32997919#32997919", "title": "rails get request body 0byte", "body": "<p>Solved </p>\n\n<p>on android http using a on params add a content type(\"video/mp4\")</p>\n\n<p>and work fine !</p>\n\n<p>regards!</p>\n"}], "owner": {"reputation": 27, "user_id": 4863097, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/38944932666a7156ca837fc32dd1b122?s=128&d=identicon&r=PG&f=1", "display_name": "Users for programing", "link": "https://stackoverflow.com/users/4863097/users-for-programing"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 170, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1444236223, "creation_date": 1444230142, "last_edit_date": 1444234583, "question_id": 32995773, "link": "https://stackoverflow.com/questions/32995773/rails-get-request-body-0byte", "title": "rails get request body 0byte", "body": "<p>I get a request.body from web service</p>\n\n<pre><code>            fp = File.open(\"/home/mm/mms/video_rest/video_mp.mp4\", \"wb\") \n            fp.write(request.body.readline) \n            fp.close\n</code></pre>\n\n<p>but when file are create size a 0 bytes</p>\n\n<p>how to view if request body are a file size or how to best way to get a video file from request body?</p>\n\n<p><strong>UPDATE</strong>\nhave a this params</p>\n\n<pre><code> {\"video\"=&gt;#&lt;ActionDispatch::Http::UploadedFile:0x007febdc497da0 @tempfile=#&lt;Tempfile:/tmp/RackMultipart20151007-3197-14dis8n.mp4&gt;, @original_filename=\"VID_20151006_153121393.mp4\", @content_type=\"application/octet-stream\", @headers=\"Content-Disposition: form-data; name=\\\"video_presentacion\\\"; filename=\\\"VID_20151006_153121393.mp4\\\"\\r\\nContent-Type: application/octet-stream\\r\\nContent-Transfer-Encoding: binary\\r\\n\"&gt;}\n</code></pre>\n\n<p>how to create a file on folder and change Content-Type application/octet-stream for 'video/mp4'?</p>\n\n<p>im try with:</p>\n\n<pre><code>       fp = File.open(\"/home/mm/aa/video_rest/video_mp.mp4\", \"wb\") \n        fp.write(params[:video]) \n        fp.close\n</code></pre>\n\n<p>or direct for paperclipt </p>\n\n<pre><code>usuario.update_attributes!(:video =&gt; params[:video])\n</code></pre>\n\n<p>result => Content type invalid</p>\n"}, {"tags": ["ruby", "ramaze"], "comments": [{"owner": {"reputation": 4231, "user_id": 337306, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/bcdd9f5447f1a3f18cefdb8c3f6b4dab?s=128&d=identicon&r=PG", "display_name": "desbest", "link": "https://stackoverflow.com/users/337306/desbest"}, "edited": false, "score": 0, "creation_date": 1444230907, "post_id": 32995744, "comment_id": 53816757, "body": "Why is this being downvoted?"}, {"owner": {"reputation": 45322, "user_id": 421705, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/581b1760881c962648f99d6040d41829?s=128&d=identicon&r=PG", "display_name": "Holger Just", "link": "https://stackoverflow.com/users/421705/holger-just"}, "edited": false, "score": 2, "creation_date": 1444231040, "post_id": 32995744, "comment_id": 53816850, "body": "Questions seeking debugging help (&quot;<i>why isn&#39;t this code working?</i>&quot;) must include the desired behavior, a specific problem or error and the shortest code necessary to reproduce it <i>in the question itself</i>. Questions without <i>a clear problem statement</i> are not useful to other readers. See: <a href=\"http://stackoverflow.com/help/mcve\">How to create a Minimal, Complete, and Verifiable example</a>."}, {"owner": {"reputation": 4231, "user_id": 337306, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/bcdd9f5447f1a3f18cefdb8c3f6b4dab?s=128&d=identicon&r=PG", "display_name": "desbest", "link": "https://stackoverflow.com/users/337306/desbest"}, "reply_to_user": {"reputation": 45322, "user_id": 421705, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/581b1760881c962648f99d6040d41829?s=128&d=identicon&r=PG", "display_name": "Holger Just", "link": "https://stackoverflow.com/users/421705/holger-just"}, "edited": false, "score": 1, "creation_date": 1444231307, "post_id": 32995744, "comment_id": 53817072, "body": "I&#39;ve updated my question. Is it fine now?"}, {"owner": {"reputation": 45322, "user_id": 421705, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/581b1760881c962648f99d6040d41829?s=128&d=identicon&r=PG", "display_name": "Holger Just", "link": "https://stackoverflow.com/users/421705/holger-just"}, "edited": false, "score": 0, "creation_date": 1444242136, "post_id": 32995744, "comment_id": 53823980, "body": "Your question is much better now, thanks! What would make it perfect would be a stacktrace of exception which allows us to better spot what went wrong."}, {"owner": {"reputation": 4231, "user_id": 337306, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/bcdd9f5447f1a3f18cefdb8c3f6b4dab?s=128&d=identicon&r=PG", "display_name": "desbest", "link": "https://stackoverflow.com/users/337306/desbest"}, "reply_to_user": {"reputation": 45322, "user_id": 421705, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/581b1760881c962648f99d6040d41829?s=128&d=identicon&r=PG", "display_name": "Holger Just", "link": "https://stackoverflow.com/users/421705/holger-just"}, "edited": false, "score": 0, "creation_date": 1444250339, "post_id": 32995744, "comment_id": 53828891, "body": "Here&#39;s a stacktrace. <a href=\"https://gist.github.com/desbest/9a6c24b7e03cf8d50e44\" rel=\"nofollow noreferrer\">gist.github.com/desbest/9a6c24b7e03cf8d50e44</a>"}], "owner": {"reputation": 4231, "user_id": 337306, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/bcdd9f5447f1a3f18cefdb8c3f6b4dab?s=128&d=identicon&r=PG", "display_name": "desbest", "link": "https://stackoverflow.com/users/337306/desbest"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 143, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1444675348, "creation_date": 1444230080, "last_edit_date": 1444675348, "question_id": 32995744, "link": "https://stackoverflow.com/questions/32995744/why-am-i-getting-argumenterror-invalid-encoding", "title": "Why am I getting ArgumentError: invalid %-encoding?", "body": "<p>This code fetches the content in plain text or html, and displays it on the page.</p>\n\n<p>A HTML form with the fields <code>post_id</code> <code>content</code> POSTS to <code>edit_post</code> in my controller. I'm using <a href=\"http://sequel.jeremyevans.net/\" rel=\"nofollow\">Sequel ORM</a> and <a href=\"http://ramaze.net\" rel=\"nofollow\">Ramaze</a>.</p>\n\n<pre><code>def edit_post\n  Encoding.default_external = 'utf-8'\n  data = request.subset(:content, :post_id)\n  shake = Post[data['post_id']]\n  data.delete('post_id'); \n  shake.update(data); shake.save\nend\n</code></pre>\n\n<p>The only symbols inside data['content'] is <code>%</code> <code>,</code> <code>.</code> <code>'</code> and <code>\"</code></p>\n\n<p>The desired behaviour is that the POST data submitted through the form updates the row in the database. <a href=\"https://gist.github.com/desbest/b1add0ccee6cf7eb2128\" rel=\"nofollow\">This is the string</a> I was trying to post. It contains this line that includes 2 percent signs (<code>%</code>): </p>\n\n<pre><code>A scientific study showed that men want more sex partners than women, in every country. Only 2% of lesbians have had over 1000 sexual partners, but 28% of gays have had over 1000.\n</code></pre>\n\n<p>The table row requires a \"content\" and \"post_id\" column.</p>\n\n<p>It looks like there's a problem with the <code>%</code> symbol being used to update the database. I believe the default encoding to be CP850. How do I change my Ramaze app to stop using CP850 and use UTF-8 instead?</p>\n\n<p>I have the following code in <code>model/init.rb</code></p>\n\n<pre><code>Sequel::Model.plugin :force_encoding, 'UTF-8'\nEncoding.default_external = 'utf-8'\n</code></pre>\n\n<p><a href=\"https://gist.github.com/desbest/9a6c24b7e03cf8d50e44\" rel=\"nofollow\">Here is a stack trace.</a></p>\n"}, {"tags": ["ruby-on-rails", "ruby", "apache", "passenger"], "comments": [{"owner": {"reputation": 3571, "user_id": 185310, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/063c98fb1df33c7a4ea70a7d829f83c6?s=128&d=identicon&r=PG&f=1", "display_name": "Mike K.", "link": "https://stackoverflow.com/users/185310/mike-k"}, "edited": false, "score": 0, "creation_date": 1444231096, "post_id": 32995466, "comment_id": 53816887, "body": "how does server.conf get loaded? is it maybe get included twice?"}, {"owner": {"reputation": 245, "user_id": 2079439, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/fe364ee6809546558c512f835a1206a4?s=128&d=identicon&r=PG", "display_name": "AHalbert", "link": "https://stackoverflow.com/users/2079439/ahalbert"}, "reply_to_user": {"reputation": 3571, "user_id": 185310, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/063c98fb1df33c7a4ea70a7d829f83c6?s=128&d=identicon&r=PG&f=1", "display_name": "Mike K.", "link": "https://stackoverflow.com/users/185310/mike-k"}, "edited": false, "score": 0, "creation_date": 1444231524, "post_id": 32995466, "comment_id": 53817260, "body": "in the httpd.conf file, I have <code>Include conf.d&#47;*.conf</code> but I don&#39;t see any other references to server.conf or including other .conf files."}], "answers": [{"comments": [{"owner": {"reputation": 245, "user_id": 2079439, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/fe364ee6809546558c512f835a1206a4?s=128&d=identicon&r=PG", "display_name": "AHalbert", "link": "https://stackoverflow.com/users/2079439/ahalbert"}, "edited": false, "score": 0, "creation_date": 1444238487, "post_id": 32997250, "comment_id": 53821846, "body": "Fixed the problem neatly to downgrade to 5.0.15. Thanks so much for the help! :)"}], "tags": [], "owner": {"reputation": 17872, "user_id": 20816, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/02f0ee0da223f90bb9996ef252e528c1?s=128&d=identicon&r=PG", "display_name": "Hongli", "link": "https://stackoverflow.com/users/20816/hongli"}, "is_accepted": true, "score": 2, "last_activity_date": 1444234107, "creation_date": 1444234107, "answer_id": 32997250, "question_id": 32995466, "link": "https://stackoverflow.com/questions/32995466/rails-passenger-invalid-route-name-already-in-use/32997250#32997250", "title": "Rails + Passenger: Invalid Route name, already in use", "body": "<p>Passenger author here. I think you are running into <a href=\"https://github.com/phusion/passenger/issues/1596#issuecomment-137203230\" rel=\"nofollow\">issue #1596</a> where a slight change in behavior causes some applications to initialize Rails twice. A fix is planned for the next version, but for now you can simply downgrade to 5.0.15.</p>\n"}], "owner": {"reputation": 245, "user_id": 2079439, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/fe364ee6809546558c512f835a1206a4?s=128&d=identicon&r=PG", "display_name": "AHalbert", "link": "https://stackoverflow.com/users/2079439/ahalbert"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 241, "favorite_count": 0, "accepted_answer_id": 32997250, "answer_count": 1, "score": 3, "last_activity_date": 1444234107, "creation_date": 1444229339, "question_id": 32995466, "link": "https://stackoverflow.com/questions/32995466/rails-passenger-invalid-route-name-already-in-use", "title": "Rails + Passenger: Invalid Route name, already in use", "body": "<p>I'm attempting to host a Rails 4 application with Apache and Passenger on a RHEL 6.3 machine. My application is accessible on the IP address on the server when the httpd service is running, but gives the Rails \"Something went wrong\" page when I try to access a page. The application runs correctly when hosted via rails server. I'm hoping someone with a little more hosting experience can help me out and tell me where I'm going wrong.</p>\n\n<p>/etc/httpd/conf/httpd.conf includes:</p>\n\n<pre><code>LoadModule passenger_module /usr/lib/ruby/gems/2.2.0/gems/passenger-5.0.20/buildout/apache2/mod_passenger.so\n&lt;IfModule mod_passenger.c&gt;\n    PassengerRoot /usr/lib/ruby/gems/2.2.0/gems/passenger-5.0.20\n    PassengerDefaultRuby /usr/bin/ruby\n&lt;/IfModule&gt;\n</code></pre>\n\n<p>which ruby returns <code>/usr/bin/ruby</code>.</p>\n\n<p>/etc/httpd/conf.d/server.conf includes:</p>\n\n<pre><code>&lt;VirtualHost *:80&gt;\n# !!! Be sure to point DocumentRoot to 'public'!\n  DocumentRoot /var/www/service/public\n  RailsEnv production\n  &lt;Directory /var/www/service/public\n   AllowOverride all\n   Options -MultiViews\n  &lt;/Directory&gt;\n&lt;/VirtualHost&gt;\n</code></pre>\n\n<p>where service is the name of my folder my Rails Project is in. </p>\n\n<p>The passenger error in /etc/httpd/logs/error_log is:</p>\n\n<pre><code>App 23360 stdout:\n[ 2015-10-05 12:05:43.4683 23295/7fd764072700 age/Cor/App/Implementation.cpp:303 ]: Could not spawn process for application /var/www/service: An error occured while starting up the preloader.\nError ID: aa70e16a\nError details saved to: /tmp/passenger-error-41xm1e.html\nMessage from application: Invalid route name, already in use: 'base'\nYou may have defined two routes with the same name using the `:as` option, or you may be overriding a route already defined by a resource with the same naming. For the latter, you can restrict the routes created with `resources` as explained here:\nhttp://guides.rubyonrails.org/routing.html#restricting-the-routes-created (ArgumentError)\n/usr/lib/ruby/gems/2.2.0/gems/actionpack-4.2.0/lib/action_dispatch/routing/route_set.rb:538:in `add_route'...\n</code></pre>\n\n<p>I've pared down my routes in an attempt to find out why it thinks I have more than one named \"base\", since this is all I have in my routes:</p>\n\n<pre><code>Service::Application.routes.draw do\n\n  match 'home' =&gt; 'activation#register', :as =&gt; :base\n\nend\n</code></pre>\n\n<p>where home is just a test link that displays \"SUCCESS\". </p>\n\n<p>I'm pretty baffled - I have no idea why Passenger thinks that I have multiple routes named base when there is only one. I am wondering if the routes are somehow being loaded multiple times.</p>\n\n<p>I am not able to use RVM, yum, or any other code mangers due to being behind a corporate firewall. This, unfortunately, is nonnegotiable.</p>\n\n<p>I appreciate any and all help, thanks very much. Let me know if anyone needs me to post more details.</p>\n"}, {"tags": ["ruby", "ssl", "https", "webrick", "tls1.2"], "owner": {"reputation": 603, "user_id": 1781482, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/1b81aacc445c4dea2b16b9c55205aafc?s=128&d=identicon&r=PG", "display_name": "user1781482", "link": "https://stackoverflow.com/users/1781482/user1781482"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 372, "favorite_count": 0, "answer_count": 0, "score": 3, "last_activity_date": 1444428243, "creation_date": 1444227813, "last_edit_date": 1495540354, "question_id": 32994846, "link": "https://stackoverflow.com/questions/32994846/how-to-make-webrick-work-only-over-https-tls1-2-to-avoid-poodle", "title": "How to make WEBrick work only over HTTPS/TLS1.2 to avoid POODLE?", "body": "<p>I was looking at the code here: <a href=\"https://stackoverflow.com/questions/3696558/how-to-make-sinatra-work-over-https-ssl\">How to make Sinatra work over HTTPS/SSL?</a> </p>\n\n<pre><code>require 'sinatra/base'\nrequire 'webrick'\nrequire 'webrick/https'\nrequire 'openssl'\n\nCERT_PATH = '/opt/myCA/server/'\n\nwebrick_options = {\n        :Port               =&gt; 8443,\n        :Logger             =&gt; WEBrick::Log::new($stderr, WEBrick::Log::DEBUG),\n        :DocumentRoot       =&gt; \"/ruby/htdocs\",\n        :SSLEnable          =&gt; true,\n        :SSLVerifyClient    =&gt; OpenSSL::SSL::VERIFY_NONE,\n        :SSLCertificate     =&gt; OpenSSL::X509::Certificate.new(  File.open(File.join(CERT_PATH, \"my-server.crt\")).read),\n        :SSLPrivateKey      =&gt; OpenSSL::PKey::RSA.new(          File.open(File.join(CERT_PATH, \"my-server.key\")).read),\n        :SSLCertName        =&gt; [ [ \"CN\",WEBrick::Utils::getservername ] ]\n}\n\nclass MyServer  &lt; Sinatra::Base\n    post '/' do\n      \"Hellow, world!\"\n    end            \nend\n\nRack::Handler::WEBrick.run MyServer, webrick_options\n</code></pre>\n\n<p>How does one disable SSLv2, SSLv3 and TLS1.0, and only allow TLS1.2? This will remediate the POODLE vulnerability in older protocols. This is the first time I am experimenting with ruby/WEBrick so pretty novice here. Thanks for any help!</p>\n"}, {"tags": ["ruby", "gem"], "comments": [{"owner": {"reputation": 5503, "user_id": 1004617, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ae0a9d0eb893217c4b0de8278ce09f7b?s=128&d=identicon&r=PG", "display_name": "gotva", "link": "https://stackoverflow.com/users/1004617/gotva"}, "edited": false, "score": 0, "creation_date": 1444228112, "post_id": 32994781, "comment_id": 53814552, "body": "use <code>bundle</code> with Gemfile"}, {"owner": {"reputation": 900, "user_id": 3194408, "user_type": "registered", "accept_rate": 27, "profile_image": "https://www.gravatar.com/avatar/d9d478e261a504219e8e3dabc6114ca6?s=128&d=identicon&r=PG", "display_name": "mipmip", "link": "https://stackoverflow.com/users/3194408/mipmip"}, "reply_to_user": {"reputation": 5503, "user_id": 1004617, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ae0a9d0eb893217c4b0de8278ce09f7b?s=128&d=identicon&r=PG", "display_name": "gotva", "link": "https://stackoverflow.com/users/1004617/gotva"}, "edited": false, "score": 0, "creation_date": 1444228236, "post_id": 32994781, "comment_id": 53814641, "body": "In this case I don&#39;t want to use bundler. I need some cli tools."}, {"owner": {"reputation": 16900, "user_id": 597992, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/d265520bc3ae286b9b3e05e35812cc97?s=128&d=identicon&r=PG", "display_name": "jpw", "link": "https://stackoverflow.com/users/597992/jpw"}, "edited": false, "score": 0, "creation_date": 1485373653, "post_id": 32994781, "comment_id": 70904459, "body": "When someone answers your question, accept it!"}], "answers": [{"tags": [], "owner": {"reputation": 764, "user_id": 846138, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9b0d3d3b1f3b9dbf8d87e6e4fab79358?s=128&d=identicon&r=PG", "display_name": "grimsock", "link": "https://stackoverflow.com/users/846138/grimsock"}, "is_accepted": false, "score": 0, "last_activity_date": 1444228792, "creation_date": 1444228792, "answer_id": 32995216, "question_id": 32994781, "link": "https://stackoverflow.com/questions/32994781/dont-reinstall-if-gem-is-already-installed/32995216#32995216", "title": "Don&#39;t reinstall if gem is already installed", "body": "<p>I would go with some bash oneliner:</p>\n\n<p><code>if ! gem list | grep your_gem_name; then gem install your_gem_name; fi;</code></p>\n"}, {"comments": [{"owner": {"reputation": 900, "user_id": 3194408, "user_type": "registered", "accept_rate": 27, "profile_image": "https://www.gravatar.com/avatar/d9d478e261a504219e8e3dabc6114ca6?s=128&d=identicon&r=PG", "display_name": "mipmip", "link": "https://stackoverflow.com/users/3194408/mipmip"}, "edited": false, "score": 0, "creation_date": 1444229670, "post_id": 32995553, "comment_id": 53815778, "body": "Thanks! Exactly what I need. Should be default behavior in my opinion."}, {"owner": {"reputation": 406, "user_id": 4482286, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-Sl_16MRc3EQ/AAAAAAAAAAI/AAAAAAAAAJ4/OjoaYnwT9HU/photo.jpg?sz=128", "display_name": "RossMc", "link": "https://stackoverflow.com/users/4482286/rossmc"}, "reply_to_user": {"reputation": 900, "user_id": 3194408, "user_type": "registered", "accept_rate": 27, "profile_image": "https://www.gravatar.com/avatar/d9d478e261a504219e8e3dabc6114ca6?s=128&d=identicon&r=PG", "display_name": "mipmip", "link": "https://stackoverflow.com/users/3194408/mipmip"}, "edited": false, "score": 0, "creation_date": 1444230033, "post_id": 32995553, "comment_id": 53816065, "body": "I agree. It was only while trying this out that I realised it wasn&#39;t the default."}], "tags": [], "owner": {"reputation": 406, "user_id": 4482286, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-Sl_16MRc3EQ/AAAAAAAAAAI/AAAAAAAAAJ4/OjoaYnwT9HU/photo.jpg?sz=128", "display_name": "RossMc", "link": "https://stackoverflow.com/users/4482286/rossmc"}, "is_accepted": true, "score": 4, "last_activity_date": 1444229579, "creation_date": 1444229579, "answer_id": 32995553, "question_id": 32994781, "link": "https://stackoverflow.com/questions/32994781/dont-reinstall-if-gem-is-already-installed/32995553#32995553", "title": "Don&#39;t reinstall if gem is already installed", "body": "<p>You can use the <code>--conservative</code> flag with gem install.</p>\n\n<p><code>gem install sqlite -v 1.3.8 --conservative</code></p>\n\n<p>It won't install or update any gems that meet the version requirement.</p>\n"}], "owner": {"reputation": 900, "user_id": 3194408, "user_type": "registered", "accept_rate": 27, "profile_image": "https://www.gravatar.com/avatar/d9d478e261a504219e8e3dabc6114ca6?s=128&d=identicon&r=PG", "display_name": "mipmip", "link": "https://stackoverflow.com/users/3194408/mipmip"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 284, "favorite_count": 0, "accepted_answer_id": 32995553, "answer_count": 2, "score": 1, "last_activity_date": 1444229579, "creation_date": 1444227649, "question_id": 32994781, "link": "https://stackoverflow.com/questions/32994781/dont-reinstall-if-gem-is-already-installed", "title": "Don&#39;t reinstall if gem is already installed", "body": "<p>How can I prevent <code>gem install</code> to not reinstall a Gem if the same version is already installed?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "mongodb", "mongoid", "default"], "comments": [{"owner": {"reputation": 7844, "user_id": 1520557, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/9KKRA.png?s=128&g=1", "display_name": "Drenmi", "link": "https://stackoverflow.com/users/1520557/drenmi"}, "edited": false, "score": 0, "creation_date": 1444228217, "post_id": 32994650, "comment_id": 53814627, "body": "This sounds like a bug. Have you confirmed it is the <code>default_scope</code> that&#39;s causing this?"}, {"owner": {"reputation": 2607, "user_id": 4470392, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CvLjT.jpg?s=128&g=1", "display_name": "Maxim Pontyushenko", "link": "https://stackoverflow.com/users/4470392/maxim-pontyushenko"}, "reply_to_user": {"reputation": 7844, "user_id": 1520557, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/9KKRA.png?s=128&g=1", "display_name": "Drenmi", "link": "https://stackoverflow.com/users/1520557/drenmi"}, "edited": false, "score": 0, "creation_date": 1444229285, "post_id": 32994650, "comment_id": 53815483, "body": "@Drenmi When I remove line with default_scope everything is ok, so I guess yeah."}, {"owner": {"reputation": 2607, "user_id": 4470392, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CvLjT.jpg?s=128&g=1", "display_name": "Maxim Pontyushenko", "link": "https://stackoverflow.com/users/4470392/maxim-pontyushenko"}, "reply_to_user": {"reputation": 394580, "user_id": 479863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ArUCE.jpg?s=128&g=1", "display_name": "mu is too short", "link": "https://stackoverflow.com/users/479863/mu-is-too-short"}, "edited": false, "score": 0, "creation_date": 1444300526, "post_id": 32994650, "comment_id": 53849886, "body": "@muistooshort t of course, fixed now, my bad."}], "answers": [{"tags": [], "owner": {"reputation": 1484, "user_id": 1601772, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/C4CW3.jpg?s=128&g=1", "display_name": "ABrowne", "link": "https://stackoverflow.com/users/1601772/abrowne"}, "is_accepted": false, "score": 1, "last_activity_date": 1447663858, "last_edit_date": 1495541715, "creation_date": 1447663858, "answer_id": 33731375, "question_id": 32994650, "link": "https://stackoverflow.com/questions/32994650/mongoid-default-scope-overrides-default-value-why/33731375#33731375", "title": "Mongoid default scope overrides default value. Why?", "body": "<p>Try calling Test.create(), successful will also be true. This seems strange, but think what you are saying in your default_scope... get all tests that are true. </p>\n\n<p>This looks like something that came from active_record originally: <a href=\"https://stackoverflow.com/questions/3975161/rails3-default-scope-and-default-column-value-in-migration\">rails3 default_scope, and default column value in migration</a> however it is strictly followed active_record this should work, however it doesn't:</p>\n\n<pre><code>t= Test.unscoped.new; t.successful\n=&gt; true\n</code></pre>\n\n<p>In the mongo world, if you put on a default_scope it'll scope all objects with that and assume that you would want anything new to also have that same default. The work arounds are using callbacks. You mentioned hooking up the after_initialize which is a good choice, however you need to make sure you check whether it has actually been set. Another alternative would be to use a named scope rather than the default. </p>\n"}], "owner": {"reputation": 2607, "user_id": 4470392, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CvLjT.jpg?s=128&g=1", "display_name": "Maxim Pontyushenko", "link": "https://stackoverflow.com/users/4470392/maxim-pontyushenko"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1142, "favorite_count": 0, "answer_count": 1, "score": 6, "last_activity_date": 1447663858, "creation_date": 1444227312, "last_edit_date": 1444320575, "question_id": 32994650, "link": "https://stackoverflow.com/questions/32994650/mongoid-default-scope-overrides-default-value-why", "title": "Mongoid default scope overrides default value. Why?", "body": "<p><em>mongoid 4.0.2</em></p>\n\n<p>I have <code>Test</code> class:</p>\n\n<pre><code>class Test\n  include Mongoid::Document\n  include Mongoid::Timestamps\n  include Mongoid::Paranoia\n\n  field :successful,      type: Boolean, default: false\n\n  default_scope  -&gt;{ where(successful: true) }\nend\n</code></pre>\n\n<p>Then I do:</p>\n\n<pre><code>t=Test.new; t.successful\n=&gt; true\n</code></pre>\n\n<p>So here is the question: <strong>what is the reason behind this behaviour?</strong></p>\n\n<p><strong>P.S.</strong> I have fixed it resetting <code>successful</code> with the help of <code>after_initialize</code> method.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "base64"], "comments": [{"owner": {"reputation": 7844, "user_id": 1520557, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/9KKRA.png?s=128&g=1", "display_name": "Drenmi", "link": "https://stackoverflow.com/users/1520557/drenmi"}, "edited": false, "score": 0, "creation_date": 1444228347, "post_id": 32994627, "comment_id": 53814734, "body": "Possible duplicate of <a href=\"http://stackoverflow.com/questions/1160741/how-to-save-a-base64-string-as-an-image-using-ruby\">How to save a base64 string as an image using ruby</a>"}, {"owner": {"reputation": 1958, "user_id": 1858727, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/3affc24909ae07768e44d1cc97d439bd?s=128&d=identicon&r=PG", "display_name": "opensource-developer", "link": "https://stackoverflow.com/users/1858727/opensource-developer"}, "reply_to_user": {"reputation": 7844, "user_id": 1520557, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/9KKRA.png?s=128&g=1", "display_name": "Drenmi", "link": "https://stackoverflow.com/users/1520557/drenmi"}, "edited": false, "score": 0, "creation_date": 1444228663, "post_id": 32994627, "comment_id": 53814976, "body": "Hello Drenmi, i have tried the above one, but the result is the same"}], "answers": [{"comments": [{"owner": {"reputation": 1958, "user_id": 1858727, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/3affc24909ae07768e44d1cc97d439bd?s=128&d=identicon&r=PG", "display_name": "opensource-developer", "link": "https://stackoverflow.com/users/1858727/opensource-developer"}, "edited": false, "score": 0, "creation_date": 1444230037, "post_id": 32995691, "comment_id": 53816071, "body": "do i need to uncompress it? I am not sure how to un compress it? can you suggest?"}, {"owner": {"reputation": 1958, "user_id": 1858727, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/3affc24909ae07768e44d1cc97d439bd?s=128&d=identicon&r=PG", "display_name": "opensource-developer", "link": "https://stackoverflow.com/users/1858727/opensource-developer"}, "edited": false, "score": 0, "creation_date": 1444230062, "post_id": 32995691, "comment_id": 53816091, "body": "You can edit your answer and let me know how to uncompress it in code"}, {"owner": {"reputation": 74087, "user_id": 214790, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f878c8230342730990acd21f889301d4?s=128&d=identicon&r=PG", "display_name": "matt", "link": "https://stackoverflow.com/users/214790/matt"}, "edited": false, "score": 0, "creation_date": 1444232765, "post_id": 32995691, "comment_id": 53818222, "body": "I suspect that you need to do this the other way round, i.e. base64 decode first, then decompress. This way doesn\u2019t make much sense (but I can\u2019t know for sure without seeing the actual data)."}, {"owner": {"reputation": 406, "user_id": 4482286, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-Sl_16MRc3EQ/AAAAAAAAAAI/AAAAAAAAAJ4/OjoaYnwT9HU/photo.jpg?sz=128", "display_name": "RossMc", "link": "https://stackoverflow.com/users/4482286/rossmc"}, "edited": false, "score": 0, "creation_date": 1444293741, "post_id": 32995691, "comment_id": 53845185, "body": "I think you&#39;re right. It&#39;s probably more likely to be Base64 encoded during transmission. I couldn&#39;t be sure either. I&#39;ll edit the snippet."}], "tags": [], "owner": {"reputation": 406, "user_id": 4482286, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-Sl_16MRc3EQ/AAAAAAAAAAI/AAAAAAAAAJ4/OjoaYnwT9HU/photo.jpg?sz=128", "display_name": "RossMc", "link": "https://stackoverflow.com/users/4482286/rossmc"}, "is_accepted": false, "score": 1, "last_activity_date": 1444293903, "last_edit_date": 1495539868, "creation_date": 1444229941, "answer_id": 32995691, "question_id": 32994627, "link": "https://stackoverflow.com/questions/32994627/base64-with-checksum-decode-and-generate-image/32995691#32995691", "title": "base64 with checksum decode and generate image", "body": "<p>I think you will need to uncompress the data before you decode it, otherwise you're attempting to decode the compressed data and hence giving you errors.</p>\n\n<p>You may have to install the Zlib gem for this solution.</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>require 'zlib'\n\ndecoded_string = Base64.decode64(encodedtext)\ngzipped_string = Zlib::GzipReader.new(decoded_string)\n\nfile = File.new(path, \"wb\")\nfile.write gzipped_text.read\nfile.close\n</code></pre>\n\n<p>You can find more help with GZip <a href=\"https://stackoverflow.com/questions/8684125/how-do-i-read-a-gzip-file-line-by-line\">here</a> and <a href=\"https://stackoverflow.com/questions/856891/unzip-zip-tar-tag-gz-files-with-ruby\">here</a></p>\n"}], "owner": {"reputation": 1958, "user_id": 1858727, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/3affc24909ae07768e44d1cc97d439bd?s=128&d=identicon&r=PG", "display_name": "opensource-developer", "link": "https://stackoverflow.com/users/1858727/opensource-developer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 989, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1444293903, "creation_date": 1444227249, "last_edit_date": 1444227590, "question_id": 32994627, "link": "https://stackoverflow.com/questions/32994627/base64-with-checksum-decode-and-generate-image", "title": "base64 with checksum decode and generate image", "body": "<p>I am using Ruby On Rails, and accessing a API which is returning me baseencoded string and a checksum for a png type image.</p>\n\n<p>However when i try to create a image from this, its not getting created and i see a message saying image might be corrupt. I might be doing this correctly.</p>\n\n<p>Here is a little more description about the encoded string and checksum</p>\n\n<pre><code>encoded string is form of a Base64-encoded, GZipcompressed\nstring.\n\nchecksum is An MD5 hash to validate the above data, in the form of a\nBase64-encoded string.\n</code></pre>\n\n<p>Here is my approach</p>\n\n<pre><code>    file = File.new(path,\"wb\")\n    file.write Base64.decode64(\"encodedtext\")\n    file.close\n</code></pre>\n\n<p>am i doing anything wrong?</p>\n\n<p>However i am not sure what role the checksum plays, can anyone please suggest what i might be doing wrong, Thanks.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "performance", "security", "rails-i18n"], "answers": [{"tags": [], "owner": {"reputation": 2755, "user_id": 1543985, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/h2xDy.jpg?s=128&g=1", "display_name": "RichardAE", "link": "https://stackoverflow.com/users/1543985/richardae"}, "is_accepted": false, "score": 2, "last_activity_date": 1444228271, "creation_date": 1444228271, "answer_id": 32995029, "question_id": 32994391, "link": "https://stackoverflow.com/questions/32994391/rails-translation-performance-impact-raw-t-vs-t/32995029#32995029", "title": "Rails translation performance impact &lt;%= raw t( vs. &lt;%= t(", "body": "<p>You just just append _html to your tag keys to handle HTML in translation tags:</p>\n\n<pre><code>en:\n  key_one: test text\n  key_one_html: &lt;p&gt;test text&lt;/p&gt;\n</code></pre>\n\n<p>Then the standard code will work:</p>\n\n<pre><code>&lt;%= t('key_one_html') %&gt;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 928, "user_id": 4339299, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-_wBLXwaopKo/AAAAAAAAAAI/AAAAAAAADqM/zrKvxhatyRo/photo.jpg?sz=128", "display_name": "Tom Fast", "link": "https://stackoverflow.com/users/4339299/tom-fast"}, "is_accepted": false, "score": 0, "last_activity_date": 1444228474, "creation_date": 1444228474, "answer_id": 32995097, "question_id": 32994391, "link": "https://stackoverflow.com/questions/32994391/rails-translation-performance-impact-raw-t-vs-t/32995097#32995097", "title": "Rails translation performance impact &lt;%= raw t( vs. &lt;%= t(", "body": "<p>You could also use the globalize gem for bigger text / html sections of content. </p>\n\n<p><a href=\"https://github.com/globalize/globalize/blob/master/README.md\" rel=\"nofollow\">https://github.com/globalize/globalize/blob/master/README.md</a></p>\n\n<p>It also supports eager loading if you're worried about performance. </p>\n"}, {"tags": [], "owner": {"reputation": 66009, "user_id": 23368, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/2ace1b52352e1260c6a42df36e36f356?s=128&d=identicon&r=PG", "display_name": "Daniel Rikowski", "link": "https://stackoverflow.com/users/23368/daniel-rikowski"}, "is_accepted": false, "score": 1, "last_activity_date": 1444229601, "creation_date": 1444229601, "answer_id": 32995561, "question_id": 32994391, "link": "https://stackoverflow.com/questions/32994391/rails-translation-performance-impact-raw-t-vs-t/32995561#32995561", "title": "Rails translation performance impact &lt;%= raw t( vs. &lt;%= t(", "body": "<p><strong>Performance aspect:</strong></p>\n\n<p>The performance impact should be negligible. Calling <code>raw</code> copies the parameter into a new string (an <code>ActiveSupport::SafeBuffer</code> to be precise) with its <code>html_safe</code> flag set to true. On the other hand there is no longer HTML escaping performed on that string.</p>\n\n<p><strong>Security aspect:</strong></p>\n\n<p>There are more substantial drawbacks to using <code>raw</code> everywhere.</p>\n\n<p>You say your translations are read from the database. Can the user edit these translations? If so...</p>\n\n<ul>\n<li>You risk HTML injections: A malicious user could just enter a <code>&lt;script&gt;</code> tag.</li>\n<li><em>All</em> your translations must to be HTML safe from now on. That means you have to manually escape all your translations, i.e. you have to replace &lt;,>, and &amp;. </li>\n</ul>\n\n<p><strong>Alternatives:</strong></p>\n\n<p>There are other options if you need to incorporate HTML into your translations:</p>\n\n<ul>\n<li>Use the <code>_html</code> suffix <em>judiciously</em> to prevent automatic escaping</li>\n<li>Use localized views and partials, i.e. <code>index.en.html</code>, <code>_footer.de-DE.html</code> to translate larger parts of your views.</li>\n</ul>\n\n<p>To streamline translation of database entries, you try</p>\n\n<ul>\n<li><a href=\"https://github.com/globalize/globalize\" rel=\"nofollow\">Globalize</a> </li>\n<li><a href=\"https://github.com/Leadformance/hstore_translate\" rel=\"nofollow\">hstore_translate</a> (PostgreSQL only)</li>\n</ul>\n\n<p><strong>Conclusion:</strong></p>\n\n<p>Using <code>raw</code> everywhere will lead to a lot of problems along the road. Save yourself a lot of trouble and just use it \"as needed\".</p>\n"}], "owner": {"reputation": 11, "user_id": 4809950, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e67512d4fbfa8690b443c3481d64315f?s=128&d=identicon&r=PG&f=1", "display_name": "Pippo", "link": "https://stackoverflow.com/users/4809950/pippo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 414, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1444229601, "creation_date": 1444226650, "last_edit_date": 1444227195, "question_id": 32994391, "link": "https://stackoverflow.com/questions/32994391/rails-translation-performance-impact-raw-t-vs-t", "title": "Rails translation performance impact &lt;%= raw t( vs. &lt;%= t(", "body": "<p>I am building a multilingual application using rails-i18n Ruby on Rails.\nMost of content (and DB entries) I have to translate is pure text, though part of it has some embedded html.</p>\n\n<p>I was thinking of using <code>&lt;%= raw t('translation_key') %&gt;</code> instead of the straight <code>&lt;%= t('translation_key') %&gt;</code> to account for future changes that might include html.</p>\n\n<p>If I adopt <code>&lt;%= raw t('translation_key') %&gt;</code> throughout the all website, am I going to get any (negative) impact when it comes to</p>\n\n<ol>\n<li>website performance </li>\n<li>website security</li>\n</ol>\n"}, {"tags": ["ruby", "selenium-webdriver", "cucumber", "selenium-chromedriver"], "comments": [{"owner": {"reputation": 1906, "user_id": 396986, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/82270219349732c881bd50f534c397f8?s=128&d=identicon&r=PG", "display_name": "Dave McNulla", "link": "https://stackoverflow.com/users/396986/dave-mcnulla"}, "edited": false, "score": 0, "creation_date": 1444366781, "post_id": 32994153, "comment_id": 53882533, "body": "You haven&#39;t provided enough code. Do you open the browser with hooks? If so, you should show how you are indicating which browser should open. Alister Scott had some instructions at <a href=\"http://watirmelon.com/2011/08/27/running-headless-watir-webdriver-tests-using-a-real-browser/\" rel=\"nofollow noreferrer\">watirmelon.com/2011/08/27/&hellip;</a>"}, {"owner": {"reputation": 855, "user_id": 3759265, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/19a877022888fb56ba9c69541a3f09db?s=128&d=identicon&r=PG&f=1", "display_name": "Tom", "link": "https://stackoverflow.com/users/3759265/tom"}, "reply_to_user": {"reputation": 1906, "user_id": 396986, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/82270219349732c881bd50f534c397f8?s=128&d=identicon&r=PG", "display_name": "Dave McNulla", "link": "https://stackoverflow.com/users/396986/dave-mcnulla"}, "edited": false, "score": 0, "creation_date": 1444385314, "post_id": 32994153, "comment_id": 53892189, "body": "I&#39;ve updated the question"}, {"owner": {"reputation": 1906, "user_id": 396986, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/82270219349732c881bd50f534c397f8?s=128&d=identicon&r=PG", "display_name": "Dave McNulla", "link": "https://stackoverflow.com/users/396986/dave-mcnulla"}, "edited": false, "score": 0, "creation_date": 1444415790, "post_id": 32994153, "comment_id": 53910873, "body": "The cucumber documentation in github (<a href=\"https://github.com/cucumber/cucumber/wiki/Hooks\" rel=\"nofollow noreferrer\">github.com/cucumber/cucumber/wiki/Hooks</a>) shows hooks as Before(@chrome) do... I always put my hooks in the hooks.rb, not in the env.rb file.."}, {"owner": {"reputation": 855, "user_id": 3759265, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/19a877022888fb56ba9c69541a3f09db?s=128&d=identicon&r=PG&f=1", "display_name": "Tom", "link": "https://stackoverflow.com/users/3759265/tom"}, "reply_to_user": {"reputation": 1906, "user_id": 396986, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/82270219349732c881bd50f534c397f8?s=128&d=identicon&r=PG", "display_name": "Dave McNulla", "link": "https://stackoverflow.com/users/396986/dave-mcnulla"}, "edited": false, "score": 0, "creation_date": 1444904665, "post_id": 32994153, "comment_id": 54101525, "body": "I&#39;ve got it to open in Chrome using that, thank you @DaveMcNulla. What I&#39;m finding now is it&#39;s setting selenium as the default driver for all tests instead of just the tagged scenarios."}, {"owner": {"reputation": 1906, "user_id": 396986, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/82270219349732c881bd50f534c397f8?s=128&d=identicon&r=PG", "display_name": "Dave McNulla", "link": "https://stackoverflow.com/users/396986/dave-mcnulla"}, "edited": false, "score": 0, "creation_date": 1444924173, "post_id": 32994153, "comment_id": 54115366, "body": "it&#39;s probably better if you post that as a separate question so you can put the code in to show people."}, {"owner": {"reputation": 855, "user_id": 3759265, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/19a877022888fb56ba9c69541a3f09db?s=128&d=identicon&r=PG&f=1", "display_name": "Tom", "link": "https://stackoverflow.com/users/3759265/tom"}, "reply_to_user": {"reputation": 1906, "user_id": 396986, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/82270219349732c881bd50f534c397f8?s=128&d=identicon&r=PG", "display_name": "Dave McNulla", "link": "https://stackoverflow.com/users/396986/dave-mcnulla"}, "edited": false, "score": 0, "creation_date": 1444980149, "post_id": 32994153, "comment_id": 54137921, "body": "No need, i found the solution that works.  i&#39;ll post it up should anyone else be curious.  Very grateful for your help"}, {"owner": {"reputation": 4630, "user_id": 3058254, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/Z10oX.jpg?s=128&g=1", "display_name": "Aravin", "link": "https://stackoverflow.com/users/3058254/aravin"}, "edited": false, "score": 0, "creation_date": 1444990261, "post_id": 32994153, "comment_id": 54143609, "body": "Where is tag is your code?"}, {"owner": {"reputation": 855, "user_id": 3759265, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/19a877022888fb56ba9c69541a3f09db?s=128&d=identicon&r=PG&f=1", "display_name": "Tom", "link": "https://stackoverflow.com/users/3759265/tom"}, "edited": false, "score": 0, "creation_date": 1444990764, "post_id": 32994153, "comment_id": 54143882, "body": "I&#39;ve tagged my scenarios as @chrome, in my code I would place Before (&#39;@chrome&#39;) do |scenario|.  I used (&#39;@tag&#39;) to generalise the example"}], "answers": [{"tags": [], "owner": {"reputation": 855, "user_id": 3759265, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/19a877022888fb56ba9c69541a3f09db?s=128&d=identicon&r=PG&f=1", "display_name": "Tom", "link": "https://stackoverflow.com/users/3759265/tom"}, "is_accepted": false, "score": 0, "last_activity_date": 1444980504, "creation_date": 1444980504, "answer_id": 33164802, "question_id": 32994153, "link": "https://stackoverflow.com/questions/32994153/selenium-tag-ruby-cucumber/33164802#33164802", "title": "Selenium Tag Ruby Cucumber", "body": "<p>The solution, following on from Dave McNulla's guidance is as follows:</p>\n\n<pre><code>Before ('@tag') do |scenario|\nCapybara.default_driver = :selenium\nCapybara.register_driver :selenium do |app|\nCapybara::Selenium::Driver.new(app, \n  :browser =&gt; :chrome,\n  desired_capabilities: {\n  \"chromeOptions\" =&gt; {\n    \"args\" =&gt; %w{ window-size=1080,720 }\n     }\n   }\n )\n  end\nend\n</code></pre>\n\n<p>I've set it to open in Chrome, only because it's default download action doesn't open up a pop up window, it goes directly to the downloads folder which is ideal for my tests.</p>\n"}], "owner": {"reputation": 855, "user_id": 3759265, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/19a877022888fb56ba9c69541a3f09db?s=128&d=identicon&r=PG&f=1", "display_name": "Tom", "link": "https://stackoverflow.com/users/3759265/tom"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 217, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1444980504, "creation_date": 1444226125, "last_edit_date": 1444385301, "question_id": 32994153, "link": "https://stackoverflow.com/questions/32994153/selenium-tag-ruby-cucumber", "title": "Selenium Tag Ruby Cucumber", "body": "<p>I'm using Selenium-Webdriver with the ChromeDriver installed as well as PhantomJS to automate my test pack.  There are some scenarios that I would prefer to run in browser when my pack is running headless.  I can tag my scenario as <code>@selenium</code> but when it loads, it opens up in firefox.  How do I get it to open up ChromeDriver when using the @selenium tag please?</p>\n\n<p>I have the following in my env.rb file to run in browser:</p>\n\n<pre><code>if ENV['chrome']\n Capybara.default_driver = :selenium\n Capybara.register_driver :selenium do |app|\n Capybara::Selenium::Driver.new(app, \n   :browser =&gt; :chrome,\n   desired_capabilities: {\n   \"chromeOptions\" =&gt; {\n   \"args\" =&gt; %w{ window-size=1080,720 }\n  }\n}\n</code></pre>\n\n<p>)</p>\n\n<p>I set chrome=true to run in browser via cmd.</p>\n"}, {"tags": ["ruby", "methods", "operators"], "comments": [{"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 1, "creation_date": 1444226070, "post_id": 32993919, "comment_id": 53812935, "body": "So, is your question about <code>reduce</code> or <code>&lt;&lt;</code>? Make up your mind."}], "answers": [{"tags": [], "owner": {"reputation": 10298, "user_id": 1205299, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/31432723c324f68bc45e86f197c4c1eb?s=128&d=identicon&r=PG", "display_name": "davidrac", "link": "https://stackoverflow.com/users/1205299/davidrac"}, "is_accepted": true, "score": 6, "last_activity_date": 1444226255, "last_edit_date": 1444226255, "creation_date": 1444225874, "answer_id": 32994053, "question_id": 32993919, "link": "https://stackoverflow.com/questions/32993919/reduce-inject-operator-in-ruby/32994053#32994053", "title": "Reduce/Inject Operator in Ruby", "body": "<p>The <code>&lt;&lt;</code> operator is the Binary Left Shift Operator. It will shift the bits in the binary representation of the number the amount of places you specify.</p>\n\n<p>So <code>1 &lt;&lt; 2</code> will shift all the bits of <code>1</code> left by <code>2</code> positions.</p>\n\n<p>In your example code, <code>1</code> will be shifted <code>2</code> positions to the left, which is the binary representation of <code>4</code>, which is the result.</p>\n"}, {"comments": [{"owner": {"reputation": 74087, "user_id": 214790, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f878c8230342730990acd21f889301d4?s=128&d=identicon&r=PG", "display_name": "matt", "link": "https://stackoverflow.com/users/214790/matt"}, "edited": false, "score": 0, "creation_date": 1444227525, "post_id": 32994308, "comment_id": 53814088, "body": "<code>10 &lt;&lt; 2</code> is 40, not 36. 10 is <code>1010</code>."}], "tags": [], "owner": {"reputation": 19261, "user_id": 4758119, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/F4dJY.jpg?s=128&g=1", "display_name": "Deepak Mahakale", "link": "https://stackoverflow.com/users/4758119/deepak-mahakale"}, "is_accepted": false, "score": 1, "last_activity_date": 1444227635, "last_edit_date": 1444227635, "creation_date": 1444226483, "answer_id": 32994308, "question_id": 32993919, "link": "https://stackoverflow.com/questions/32993919/reduce-inject-operator-in-ruby/32994308#32994308", "title": "Reduce/Inject Operator in Ruby", "body": "<p><code>&lt;&lt;</code> is <code>Binary Left Shift Operator</code>. The left operands value is moved left by the number of bits specified by the right operand.</p>\n\n<p>e.g.</p>\n\n<pre><code>10 &lt;&lt; 2 #=&gt; 40.\n</code></pre>\n\n<p>10 binary representation is <code>0000 1010</code> will be shifted to left by 2 bits and the result will be <code>0010 1000</code> which is 40</p>\n"}], "owner": {"reputation": 597, "user_id": 4534985, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/Z4Y06.jpg?s=128&g=1", "display_name": "inthenameofmusik", "link": "https://stackoverflow.com/users/4534985/inthenameofmusik"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 129, "favorite_count": 0, "accepted_answer_id": 32994053, "answer_count": 2, "score": 2, "last_activity_date": 1444227635, "creation_date": 1444225547, "last_edit_date": 1444225933, "question_id": 32993919, "link": "https://stackoverflow.com/questions/32993919/reduce-inject-operator-in-ruby", "title": "Reduce/Inject Operator in Ruby", "body": "<p>I'm testing out the reduce/inject method and ruby and came across a command with unexpected results.</p>\n\n<p><code>(1..2).reduce(:&lt;&lt;)</code> produces <code>#=&gt; 4</code> </p>\n\n<p>I believe I understand what <code>reduce</code> and <code>inject</code> do but I'm not understanding the <code>&lt;&lt;</code> operator.</p>\n"}, {"tags": ["ruby", "filter", "compression", "time-series", "iot"], "answers": [{"comments": [{"owner": {"reputation": 97, "user_id": 3362540, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/VVrTl.png?s=128&g=1", "display_name": "mojo2go", "link": "https://stackoverflow.com/users/3362540/mojo2go"}, "edited": false, "score": 0, "creation_date": 1444306782, "post_id": 32996079, "comment_id": 53854101, "body": "Your solution works as you describe, and does so elegantly.  It captures the first sample of each run of identical values, but does not capture the final sample of a run.  However I do want that ending sample.  In my example the samples come at a regular interval--one per minute--but in reality I can never enjoy that sort of predictability due to data transmission problems and sensor issues.  There will be gaps.  So it would not be possible to calculate the final time that the last sample of a run was measured."}, {"owner": {"reputation": 16076, "user_id": 802618, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6111449042dd940f360673d25d61ea6b?s=128&d=identicon&r=PG", "display_name": "Kristj&#225;n", "link": "https://stackoverflow.com/users/802618/kristj%c3%a1n"}, "reply_to_user": {"reputation": 97, "user_id": 3362540, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/VVrTl.png?s=128&g=1", "display_name": "mojo2go", "link": "https://stackoverflow.com/users/3362540/mojo2go"}, "edited": false, "score": 0, "creation_date": 1444404170, "post_id": 32996079, "comment_id": 53904520, "body": "Yeah, thought that might be the case. Glad you found a way!"}], "tags": [], "owner": {"reputation": 16076, "user_id": 802618, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6111449042dd940f360673d25d61ea6b?s=128&d=identicon&r=PG", "display_name": "Kristj&#225;n", "link": "https://stackoverflow.com/users/802618/kristj%c3%a1n"}, "is_accepted": false, "score": 0, "last_activity_date": 1444230992, "creation_date": 1444230992, "answer_id": 32996079, "question_id": 32993904, "link": "https://stackoverflow.com/questions/32993904/use-ruby-to-compress-a-stream-of-time-series-data/32996079#32996079", "title": "Use ruby to compress a stream of time series data", "body": "<pre><code>data.reduce([data.first]) do |result, item|\n  result.last.last == item.last ? result : result + [item]\nend\n</code></pre>\n\n<p>This doesn't produce exactly your desired output - it skips the last item of the run. But the good news is you don't need the last item, because you know its value is the same as your first item, and you know its timestamp is one less than the next item. (If your timestamps aren't consecutive, then this is no good). If the last entry also isn't at <code>Time.now</code>, the simplest thing to do is just manually tack it on at the end.</p>\n\n<p>What it does:</p>\n\n<ul>\n<li>Initializes the result with the first value. This is simply to avoid a <code>nil</code> case at the beginning.</li>\n<li>For each <code>item</code> in <code>data</code>\n\n<ul>\n<li>If the value in <code>item.last</code> is the same as the last entry currently in <code>result</code>, do nothing</li>\n<li>If the value in <code>item.last</code> is different, append it to <code>result</code></li>\n</ul></li>\n</ul>\n\n<p>I've written it so that each iteration produces a new <code>result</code> array with <code>result + [item]</code>, which is the functional style and preferred way to use <code>reduce</code>, but that produces a lot of unnecessary intermediate arrays. You can create just one new array by actually appending (<code>&lt;&lt;</code>) instead.</p>\n"}, {"comments": [{"owner": {"reputation": 97, "user_id": 3362540, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/VVrTl.png?s=128&g=1", "display_name": "mojo2go", "link": "https://stackoverflow.com/users/3362540/mojo2go"}, "edited": false, "score": 0, "creation_date": 1444379909, "post_id": 33015513, "comment_id": 53888796, "body": "It&#39;s an interesting approach and it is the only one that returns precisely the answer requested.  I would not have thought to delete from the array until all unneeded samples are removed.  It also would be easy to add more granular logic."}], "tags": [], "owner": {"reputation": 188, "user_id": 2187540, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/95c3f05662660783c06d79309779db56?s=128&d=identicon&r=PG", "display_name": "Wagner", "link": "https://stackoverflow.com/users/2187540/wagner"}, "is_accepted": false, "score": 0, "last_activity_date": 1444421343, "last_edit_date": 1444421343, "creation_date": 1444306495, "answer_id": 33015513, "question_id": 32993904, "link": "https://stackoverflow.com/questions/32993904/use-ruby-to-compress-a-stream-of-time-series-data/33015513#33015513", "title": "Use ruby to compress a stream of time series data", "body": "<p>That's not an elegant solution, but it works.</p>\n\n<pre><code>data = ['8:00', 4],['8:01', 4],['8:02', 4],['8:03', 7],['8:04', 7],['8:05', 8],['8:06', 9],['8:07', 13],['8:08', 13],['8:09', 13]\n\ndef clean_array(data)\n    item_to_delete = []\n\n    (0..(data.count-3)).each do |i|\n        if data[i][1].eql?(data[i+2][1])\n            item_to_delete &lt;&lt; data[i+1]\n        end\n    end\n\n    data - item_to_delete\nend\n\nnew_data = clean_array(data)\n</code></pre>\n\n<p>The output, as expected is</p>\n\n<pre><code>=&gt; [[\"8:00\", 4], [\"8:02\", 4], [\"8:03\", 7], [\"8:04\", 7], [\"8:05\", 8], [\"8:06\", 9], [\"8:07\", 13], [\"8:09\", 13]]\n</code></pre>\n\n<p>Edit</p>\n\n<p>Another approach</p>\n\n<pre><code>data = ['8:00', 4],['8:01', 4],['8:02', 4],['8:03', 7],['8:04', 7],['8:05', 8],['8:06', 9],['8:07', 13],['8:08', 13],['8:09', 13]    \nnew_data = []\n\ndata.each { |item| (new_data[-2] and item[1].eql?(new_data[-2][1])) ? new_data[-1] = item : new_data &lt;&lt; item }\n\nnew_data\n\n# =&gt; =&gt; [[\"8:00\", 4], [\"8:02\", 4], [\"8:03\", 7], [\"8:04\", 7], [\"8:05\", 8], [\"8:06\", 9], [\"8:07\", 13], [\"8:09\", 13]]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 97, "user_id": 3362540, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/VVrTl.png?s=128&g=1", "display_name": "mojo2go", "link": "https://stackoverflow.com/users/3362540/mojo2go"}, "is_accepted": false, "score": 0, "last_activity_date": 1444340628, "creation_date": 1444340628, "answer_id": 33026455, "question_id": 32993904, "link": "https://stackoverflow.com/questions/32993904/use-ruby-to-compress-a-stream-of-time-series-data/33026455#33026455", "title": "Use ruby to compress a stream of time series data", "body": "<p>I am posting a solution to my own question.  I started with Kristj\u00e1n's solution which used reduce.  Note that my solution fails to produce the final sample time, but I am choosing to accept this behavior because my example was just meant to be a simulated stream.  So that 8:09 sample is not meant to be the final value.  The next incoming sample will determine whether that 8:09 value gets stored.  So that detail of my original post could have been better explained.  </p>\n\n<pre><code>samples = [['8:00', 4],['8:01', 4],['8:02', 4],['8:03', 7],['8:04', 7],['8:05', 8],['8:06', 9],['8:07', 13],['8:08', 13],['8:09', 13]].lazy\n\nprev = []\ncompressed = samples.reduce([samples.first]) do |keepers, sample|\n  keepers &lt;&lt; prev &lt;&lt; sample if keepers.last.last != sample.last\n  prev = sample\n  keepers\nend\nputs compressed.inspect\n\n# =&gt; [[\"8:00\", 4], [\"8:02\", 4], [\"8:03\", 7], [\"8:04\", 7], [\"8:05\", 8], [\"8:05\", 8], [\"8:06\", 9], [\"8:06\", 9], [\"8:07\", 13]]\n</code></pre>\n"}], "owner": {"reputation": 97, "user_id": 3362540, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/VVrTl.png?s=128&g=1", "display_name": "mojo2go", "link": "https://stackoverflow.com/users/3362540/mojo2go"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 124, "favorite_count": 0, "answer_count": 3, "score": 2, "last_activity_date": 1444421343, "creation_date": 1444225505, "question_id": 32993904, "link": "https://stackoverflow.com/questions/32993904/use-ruby-to-compress-a-stream-of-time-series-data", "title": "Use ruby to compress a stream of time series data", "body": "<p>I have a stream that I would like to read from a sensor.  The stream never ends.  Most of the time the values repeat over time.  So I would like to identify runs of values and just keep the first and last of each run, and keep their timestamps too.</p>\n\n<p>Here is an example of 10 minutes of data:</p>\n\n<p>[['8:00', 4],['8:01', 4],['8:02', 4],['8:03', 7],['8:04', 7],['8:05', 8],['8:06', 9],['8:07', 13],['8:08', 13],['8:09', 13]].lazy </p>\n\n<p>I want to compress this data to this:\n[['8:00', 4],['8:02', 4],['8:03', 7],['8:04', 7],['8:05', 8],['8:06', 9],['8:07', 13],['8:09', 13]]</p>\n\n<p>I've been trying to accomplish this through enumerable functions such as  chunk, each_cons, each_with_object.  This problem, though, seems inherently functional.  Can I accomplish this using lazy enumerator in ruby?</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 4, "creation_date": 1444222939, "post_id": 32992862, "comment_id": 53810493, "body": "Now you need to learn about methods. Extract your game logic into a method, which you can call (thus &quot;restarting&quot; the game)."}, {"owner": {"reputation": 1197, "user_id": 1524644, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/5a1fe0add700fc4fa38b452f4b19ee53?s=128&d=identicon&r=PG", "display_name": "pedros", "link": "https://stackoverflow.com/users/1524644/pedros"}, "edited": false, "score": 2, "creation_date": 1444224409, "post_id": 32992862, "comment_id": 53811585, "body": "Also take a look a loops and iterations in Ruby. If you placa a while loop around the hole code it would almost have the desired effects."}], "answers": [{"tags": [], "owner": {"reputation": 16696, "user_id": 359380, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/b1f5969eb9f627f7d596552079d9ce57?s=128&d=identicon&r=PG", "display_name": "DVG", "link": "https://stackoverflow.com/users/359380/dvg"}, "is_accepted": false, "score": 2, "last_activity_date": 1444224989, "creation_date": 1444224989, "answer_id": 32993689, "question_id": 32992862, "link": "https://stackoverflow.com/questions/32992862/how-to-restart-script-from-the-beginning/32993689#32993689", "title": "How to restart script from the beginning?", "body": "<p>What you want to do is make the main thread of your game a loop:</p>\n\n<pre><code>loop do\n  # Prompt\nend\n</code></pre>\n\n<p>This will execute endlessly whatever is inside it until an exception is raised or the program is interrupted.</p>\n\n<p>Now, to make it effective, you'll want to start wrapping up your game logic in an Object.</p>\n\n<p>For instance</p>\n\n<pre><code>class GuessingGame\n  def initialize\n    @secret = 1 + rand(20)\n    @guesses_remaining = 5\n  end\n\n  def is_it?(number)\n    @guesses_remaining -+ 1\n    @secret == number\n  end\nend\n</code></pre>\n\n<p>Now, when you start the game look, you just make <code>GuessingGame.new</code>, and after the game is over, by running out of guesses, or getting it right, you can just prompt to retry and make a new guessing game</p>\n"}, {"tags": [], "owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "is_accepted": false, "score": 2, "last_activity_date": 1444225541, "creation_date": 1444225541, "answer_id": 32993913, "question_id": 32992862, "link": "https://stackoverflow.com/questions/32992862/how-to-restart-script-from-the-beginning/32993913#32993913", "title": "How to restart script from the beginning?", "body": "<p>First, extract the repeated part into a method:</p>\n\n<pre><code>def correctly_guessed?(target)\n  guess = gets.to_i\n  if    guess == target then puts \"Correct! You win!!!\"; sleep(5)\n  elsif guess &gt; target  then puts \"Wrong! Too high. Try again!\"\n  else                       puts \"Wrong! Too low. Try again!\"\n  end\nend\n</code></pre>\n\n<p>Then, restructure your code:</p>\n\n<pre><code>loop do\n  print \"Guess a number from 1-20. You have 5 guesses!\"\n  target = 1 + rand(20)\n  5.times{break if correctly_guessed?(target)}\n  print \"Restart the game? (Y to restart)\"\n  break unless gets.chomp == \"Y\"\nend\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 61, "user_id": 5418500, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-cp6HZ5-E7sM/AAAAAAAAAAI/AAAAAAAAD9Y/uHeWVj3LT5k/photo.jpg?sz=128", "display_name": "Levi Pinkard", "link": "https://stackoverflow.com/users/5418500/levi-pinkard"}, "edited": false, "score": 1, "creation_date": 1444309077, "post_id": 32993920, "comment_id": 53855910, "body": "Wow. Thanks for the thorough reply. I knew about loops, but didn&#39;t understand how to use them. Now I do. Thanks for all of the help."}, {"owner": {"reputation": 10364, "user_id": 877472, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/e73a159e3f7790ee019673c37da48a59?s=128&d=identicon&r=PG", "display_name": "Paul Richter", "link": "https://stackoverflow.com/users/877472/paul-richter"}, "reply_to_user": {"reputation": 61, "user_id": 5418500, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-cp6HZ5-E7sM/AAAAAAAAAAI/AAAAAAAAD9Y/uHeWVj3LT5k/photo.jpg?sz=128", "display_name": "Levi Pinkard", "link": "https://stackoverflow.com/users/5418500/levi-pinkard"}, "edited": false, "score": 0, "creation_date": 1444309267, "post_id": 32993920, "comment_id": 53856062, "body": "No problem, glad it helped! Don&#39;t forget to accept an answer (green checkmark to the left of the answer), whichever one helped you best."}], "tags": [], "owner": {"reputation": 10364, "user_id": 877472, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/e73a159e3f7790ee019673c37da48a59?s=128&d=identicon&r=PG", "display_name": "Paul Richter", "link": "https://stackoverflow.com/users/877472/paul-richter"}, "is_accepted": true, "score": 3, "last_activity_date": 1444225548, "creation_date": 1444225548, "answer_id": 32993920, "question_id": 32992862, "link": "https://stackoverflow.com/questions/32992862/how-to-restart-script-from-the-beginning/32993920#32993920", "title": "How to restart script from the beginning?", "body": "<p>As Sergio said, a very clean solution would be to learn about functions, and divide up your game logic, so that you can call the function(s) when needed.</p>\n\n<p>Another solution would be to use <a href=\"http://www.tutorialspoint.com/ruby/ruby_loops.htm\" rel=\"nofollow\">loops</a>, specifically a <a href=\"https://en.wikipedia.org/wiki/Do_while_loop\" rel=\"nofollow\">do...while loop</a>.</p>\n\n<p><em>Side note: The <code>begin...while</code> style of looping in the tutorial link I posted is not recommended by <a href=\"https://en.wikipedia.org/wiki/Yukihiro_Matsumoto\" rel=\"nofollow\">Matz</a>, the creator of Ruby. He recommends the <code>loop do...break end</code> style, which is what I will demonstrate.</em></p>\n\n<p>I'll let you read the tutorials to learn more about whats going on, but the gist is that this particular style of loop will run your code once, and it will either loop back and run it again, or exit the loop and the program will end, depending on the result of our \"control\" variable.</p>\n\n<p>Unfortunately, because of the way you've written your code, wrapping the program in a simple <code>do...while</code> is very awkward because of the <code>Kernel.exit</code> lines, and the fact that you've hard coded 5 guesses which are run in sequence. Since my answer involves loops, I'll quickly show you a good way to refactor the code without too much pain. Please note the comments in the code to understand what's going on.</p>\n\n<pre><code>loop do # The start of the main game loop\n  random=1 + rand(20)\n  random=random.to_i\n\n  guess_count = 0 # Tracks the number of times the user has guessed\n\n  print \"Guess a number from 1-20. You have 5 guesses!\"\n  while guess_count &lt; 5 # The guess loop; keep looping up to a max of 5 times\n    guess=gets.chomp\n    guess=guess.to_i\n\n    if guess == random\n        puts \"Correct! You win!!!\"\n        sleep(5) # 5 seconds is a very long time, I would reduce this to 1 at most\n        break # This causes the 'guess loop' to end early\n    elsif guess &gt; random\n        puts \"Wrong! Too high. Try again!\"\n    else\n        puts \"Wrong! Too low. Try again!\"\n    end\n\n    guess_count+= 1 # increment the guess count if the user guessed incorrectly\n  end\n\n  puts \"Would you like to play again? (y/n)\"\n  play_again = gets.chomp\n\n  break if play_again != \"y\" # exit the main loop if the user typed anything except \"y\"\nend # The end of the main loop, and thus the entire program\n# No need for Kernal.exit. The program is done at this point.\n</code></pre>\n\n<p><em>Note: I removed your comments so they don't interfere with the explanation. Feel free to put them back in your version.</em></p>\n\n<p>Take a look at loops in the tutorials for more details. Hope thats clear.</p>\n"}], "owner": {"reputation": 61, "user_id": 5418500, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-cp6HZ5-E7sM/AAAAAAAAAAI/AAAAAAAAD9Y/uHeWVj3LT5k/photo.jpg?sz=128", "display_name": "Levi Pinkard", "link": "https://stackoverflow.com/users/5418500/levi-pinkard"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1163, "favorite_count": 0, "accepted_answer_id": 32993920, "answer_count": 3, "score": 1, "last_activity_date": 1444225812, "creation_date": 1444222674, "last_edit_date": 1444224731, "question_id": 32992862, "link": "https://stackoverflow.com/questions/32992862/how-to-restart-script-from-the-beginning", "title": "How to restart script from the beginning?", "body": "<p>I decided to make a number-guessing game. Here is the code.</p>\n\n<pre><code>print \"Guess a number from 1-20. You have 5 guesses!\"\nguess1=gets.chomp\nguess1=guess1.to_i\nrandom=1 + rand(20)\nrandom=random.to_i\nif guess1 == random\n  puts \"Correct! You win!!!\"\n  sleep(5)\n  Kernel.exit\nelsif guess1 &gt; random\n  puts \"Wrong! Too high. Try again!\"\nelse\n  puts \"Wrong! Too low. Try again!\"\nend\nguess2=gets.chomp\nguess2=guess2.to_i\nif guess2 == random\n  puts \"Correct! You win!!!\"\n  sleep(5)\n  Kernel.exit\nelsif guess2 &gt; random\n  puts \"Wrong! Too high. Try again!\"\nelse\n  puts \"Wrong! Too low. Try again!\"\nend\nguess3=gets.chomp\nguess3=guess3.to_i\nif guess3 == random\n  puts \"Correct! You win!!!\"\n  sleep(5)\n  Kernel.exit\nelsif guess3 &gt; random\n  puts \"Wrong! Too high. Try again!\"\nelse\n  puts \"Wrong! Too low. Try again!\"\nend\nguess4=gets.chomp\nguess4=guess4.to_i\nif guess4 == random\n  puts \"Correct! You win!!!\"\n  sleep(5)\n  Kernel.exit\nelsif guess4 &gt; random\n  puts \"Wrong! Too high. Try again!\"\nelse\n  puts \"Wrong! Too low. Try again!\"\nend\nguess5=gets.chomp\nguess5=guess5.to_i\nif guess5 == random\n  puts \"Correct! You win!!!\"\n  sleep(5)\n  Kernel.exit\nelsif guess5 &gt; random\n  puts \"Wrong! Too high. Game over!\"\n  sleep(5)\n  Kernel.exit\nelse\n  puts \"Wrong! Too low. Game over!\"\n  sleep(5)\n  Kernel.exit\nend\n</code></pre>\n\n<p>How would I add a try-again option at the end that would restart the game?</p>\n"}, {"tags": ["ruby", "function", "variables", "nomethoderror"], "answers": [{"comments": [{"owner": {"reputation": 124, "user_id": 2395680, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/uZ91F.jpg?s=128&g=1", "display_name": "Don Beto", "link": "https://stackoverflow.com/users/2395680/don-beto"}, "edited": false, "score": 0, "creation_date": 1444226466, "post_id": 32993012, "comment_id": 53813233, "body": "Thank you very much! Quite an illustrative answer. What I was trying to do was something similar to Python, where I can simply assign a function to a variable and just use it as the original function. The thing with the parenthesis is that I read that in Ruby you can leave them out and pass the arguments separated by commas, so I did it."}, {"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "reply_to_user": {"reputation": 124, "user_id": 2395680, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/uZ91F.jpg?s=128&g=1", "display_name": "Don Beto", "link": "https://stackoverflow.com/users/2395680/don-beto"}, "edited": false, "score": 1, "creation_date": 1444231562, "post_id": 32993012, "comment_id": 53817292, "body": "Yes, <i>exactly</i>, you can leave out the parentheses and it will <i>still</i> call the method. The parentheses are optional. However, in your original code, you left the parentheses out <i>twice</i>, expected two <i>different</i> things to happen: the first time you expected it to act like Python, where parentheses are <i>required</i> for calls and leaving them off simply references the function. Whereas the second time, you expected the function to get called <i>despite</i> leaving off the parentheses. In other words, the logic within your code was internally inconsistent. Chasing down this inconsistency would have \u2026"}, {"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "reply_to_user": {"reputation": 124, "user_id": 2395680, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/uZ91F.jpg?s=128&g=1", "display_name": "Don Beto", "link": "https://stackoverflow.com/users/2395680/don-beto"}, "edited": false, "score": 0, "creation_date": 1444231644, "post_id": 32993012, "comment_id": 53817370, "body": "\u2026 eventually led you down the path of discovery that I (hopefully) led you down now. This is a general tool for helping you debug your code: verifying your assumptions and your internal logic. In this case, you read that you don&#39;t need the parentheses for calling methods (which is correct) and at the same time you assumed it would work like Python (which contradicts what you read)."}, {"owner": {"reputation": 124, "user_id": 2395680, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/uZ91F.jpg?s=128&g=1", "display_name": "Don Beto", "link": "https://stackoverflow.com/users/2395680/don-beto"}, "edited": false, "score": 0, "creation_date": 1444232913, "post_id": 32993012, "comment_id": 53818342, "body": "Yes, you&#39;re right. Your post is quite helpful to me. The thing with the parenthesis, as with the implicit return values, is something I&#39;m battling with when learning ruby, as I see those things as inconsistencies, but, that&#39;s the way the language is and they must be there for a reason. Thanks again"}], "tags": [], "owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "is_accepted": true, "score": 3, "last_activity_date": 1444231790, "last_edit_date": 1444231790, "creation_date": 1444223108, "answer_id": 32993012, "question_id": 32992420, "link": "https://stackoverflow.com/questions/32992420/ruby-nomethoderror-because-of-argument-passing/32993012#32993012", "title": "Ruby (NoMethodError) because of argument passing", "body": "<blockquote>\n  <p>I'm trying to assign a function to a variable, it feels so natural to do this:</p>\n\n<pre><code>def myfunction(num=3)\n  num\nend\n\nvarfunc = myfunction\n\nputs varfunc # it outputs 3 here, as expected\n</code></pre>\n</blockquote>\n\n<p>There are several things wrong with this.</p>\n\n<p>First, <code>myfunction</code> is not a function, it's a method. Methods aren't objects in Ruby. You can only assign objects to variables, so, since methods aren't objects, you cannot assign them to variables.</p>\n\n<p>Second, you are not assigning the method <code>myfunction</code> to the variable <code>varfunc</code>, because, as I explained above, you <em>cannot</em> do that. You are <em>calling</em> the method <code>myfunction</code> and assigning its return value to the variable <code>varfunc</code>. In Ruby, parentheses are optional for method calls.</p>\n\n<p>Thirdly, even <em>if</em> this <em>did</em> work as you expect it to, i.e. <em>if</em> methods were objects (which they aren't), then the code you showed still shouldn't work the way you see it. <em>If</em> <code>varfunc</code> <em>were</em> a function, then the code would <em>not</em> \"output 3 here, as expected\", because you would expect <code>varfunc</code> to be a function, not an integer, and it <em>should</em> output something like</p>\n\n<pre><code>#&lt;Function:0xdeadbeef4815162342&gt;\n</code></pre>\n\n<p>So, the fact that it <em>does</em> output 3 is <em>not</em> expected, and in fact clearly tells you that your expectations are <em>wrong</em>.</p>\n\n<p>Your logic is inconsistent: on line 5, you assume that leaving off the parentheses will <em>not</em> call <code>myfunction</code>, but instead reference it, on line 7, you assume that leaving off the parentheses will will <em>not</em> reference <code>varfunc</code>, but instead call it. That makes no sense.</p>\n\n<blockquote>\n  <p>But it's not that easy...</p>\n\n<pre><code>puts varfunc(12)\n</code></pre>\n  \n  <p>Gives me this console Error:</p>\n\n<pre><code>test.rb:8:in `&lt;main&gt;': undefined method `varfunc'\nfor main:Object (NoMethodError)\n</code></pre>\n  \n  <p>How can arguments be passed then? Many thanks.</p>\n</blockquote>\n\n<p><code>varfunc</code> is a variable, not a method. You can only pass arguments to methods, not to variables. You need to make <code>varfunc</code> a method.</p>\n\n<p>There are two ways to approach this. One way would be to make <code>myfunction</code> a <a href=\"http://ruby-doc.org/core/Proc.html\" rel=\"nofollow\"><code>Proc</code></a> object, which is the closest equivalent Ruby has to a \"function\":</p>\n\n<pre><code>myfunction = -&gt; (num=3) { num }\n\nvarfunc = myfunction\n\nputs varfunc\n# #&lt;Proc:0x007f909285f640@(irb):1 (lambda)&gt;\n# *This* is the output you would expect from `puts`ing a \"function\"\n\nputs varfunc.()\n# 3\n\nputs varfunc.(12)\n# 12\n</code></pre>\n\n<p>The other possibility would be to use reflection to obtain a <a href=\"http://ruby-doc.org/core/Method.html\" rel=\"nofollow\"><code>Method</code></a> wrapper object for the <code>myfunction</code> method, using the <a href=\"http://ruby-doc.org/core/Object.html#method-i-method\" rel=\"nofollow\"><code>Object#method</code></a> method:</p>\n\n<pre><code>def myfunction(num=3) num end\n\nvarfunc = method(:myfunction)\n\nputs varfunc\n# #&lt;Method: Object#myfunction&gt;\n\nputs varfunc.()\n# 3\n\nputs varfunc.(12)\n# 12\n</code></pre>\n"}], "owner": {"reputation": 124, "user_id": 2395680, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/uZ91F.jpg?s=128&g=1", "display_name": "Don Beto", "link": "https://stackoverflow.com/users/2395680/don-beto"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 267, "favorite_count": 0, "accepted_answer_id": 32993012, "answer_count": 1, "score": -1, "last_activity_date": 1444231790, "creation_date": 1444221433, "question_id": 32992420, "link": "https://stackoverflow.com/questions/32992420/ruby-nomethoderror-because-of-argument-passing", "title": "Ruby (NoMethodError) because of argument passing", "body": "<p>I'm trying to assign a function to a variable, it feels so natural to do this:</p>\n\n<pre><code>def myfunction(num=3)\n    num\nend\n\nvarfunc = myfunction\n\nputs varfunc # it outputs 3 here, as expected\n</code></pre>\n\n<p>But it's not that easy...</p>\n\n<pre><code>puts varfunc(12)\n</code></pre>\n\n<p>Gives me this console Error:</p>\n\n<pre><code>test.rb:8:in `&lt;main&gt;': undefined method `varfunc'\nfor main:Object (NoMethodError)\n</code></pre>\n\n<p>How can arguments be passed then? Many thanks.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "pagination", "kaminari", "sunspot-rails"], "comments": [{"owner": {"reputation": 928, "user_id": 4339299, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-_wBLXwaopKo/AAAAAAAAAAI/AAAAAAAADqM/zrKvxhatyRo/photo.jpg?sz=128", "display_name": "Tom Fast", "link": "https://stackoverflow.com/users/4339299/tom-fast"}, "edited": false, "score": 0, "creation_date": 1444228629, "post_id": 32992204, "comment_id": 53814941, "body": "Are you pagination on @search_products or @search?"}, {"owner": {"reputation": 4497, "user_id": 1050875, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/3549436942ea890da97f41d1dbd3594f?s=128&d=identicon&r=PG", "display_name": "akbarbin", "link": "https://stackoverflow.com/users/1050875/akbarbin"}, "edited": false, "score": 0, "creation_date": 1444228837, "post_id": 32992204, "comment_id": 53815101, "body": "Have you installed your gem paginate? For example will_paginate or kaminari."}], "answers": [{"comments": [{"owner": {"reputation": 928, "user_id": 4339299, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-_wBLXwaopKo/AAAAAAAAAAI/AAAAAAAADqM/zrKvxhatyRo/photo.jpg?sz=128", "display_name": "Tom Fast", "link": "https://stackoverflow.com/users/4339299/tom-fast"}, "edited": false, "score": 0, "creation_date": 1444749868, "post_id": 32997095, "comment_id": 54027901, "body": "Any feedback on the answer?"}], "tags": [], "owner": {"reputation": 928, "user_id": 4339299, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-_wBLXwaopKo/AAAAAAAAAAI/AAAAAAAADqM/zrKvxhatyRo/photo.jpg?sz=128", "display_name": "Tom Fast", "link": "https://stackoverflow.com/users/4339299/tom-fast"}, "is_accepted": false, "score": 0, "last_activity_date": 1444233698, "creation_date": 1444233698, "answer_id": 32997095, "question_id": 32992204, "link": "https://stackoverflow.com/questions/32992204/undefined-method-paginate-for-homecontroller0xb498fa30-in-sunspot-rails-wi/32997095#32997095", "title": "undefined method `paginate&#39; for #&lt;HomeController:0xb498fa30&gt; in sunspot rails with Kaminari", "body": "<p>Make sure you're ordering the gems correctly in your Gemfile, as order matters for these specific gems:</p>\n\n<pre><code>  gem 'kaminari'\n  gem 'sunspot_rails'\n</code></pre>\n\n<p>Then, you want to paginate on @search:</p>\n\n<pre><code>  &lt;ul&gt;\n    &lt;% @search.results.each do |r| %&gt;\n    &lt;li&gt;&lt;%= r.name %&gt;&lt;/li&gt;\n    &lt;% end %&gt;\n  &lt;/ul&gt;\n\n  &lt;%= paginate @search %&gt;\n</code></pre>\n"}], "owner": {"reputation": 5144, "user_id": 5411461, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/RyJfN.jpg?s=128&g=1", "display_name": "Haseeb Ahmad", "link": "https://stackoverflow.com/users/5411461/haseeb-ahmad"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 151, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1444233698, "creation_date": 1444220872, "question_id": 32992204, "link": "https://stackoverflow.com/questions/32992204/undefined-method-paginate-for-homecontroller0xb498fa30-in-sunspot-rails-wi", "title": "undefined method `paginate&#39; for #&lt;HomeController:0xb498fa30&gt; in sunspot rails with Kaminari", "body": "<p>My controller code is</p>\n\n<pre><code>@search = Sunspot.search(Product) do\n    fulltext params[:search]\n    paginate(page: params[:page], per_page: 1)\n  end\n  @search_products = @search.results\n</code></pre>\n\n<p>It gives me an error</p>\n\n<pre><code>undefined method `paginate' for\n</code></pre>\n\n<p>For pagination I use kaminari gem. It works fine just in case with sunspot it gives an error</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "rspec"], "comments": [{"owner": {"reputation": 1197, "user_id": 1524644, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/5a1fe0add700fc4fa38b452f4b19ee53?s=128&d=identicon&r=PG", "display_name": "pedros", "link": "https://stackoverflow.com/users/1524644/pedros"}, "edited": false, "score": 0, "creation_date": 1444222798, "post_id": 32992068, "comment_id": 53810390, "body": "Have you checked if the user where you get the user_params from has been persisted? Do you white-list parameters in your controller? Aren&#39;t you white-listing only email, username, description, and password?"}, {"owner": {"reputation": 1197, "user_id": 1524644, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/5a1fe0add700fc4fa38b452f4b19ee53?s=128&d=identicon&r=PG", "display_name": "pedros", "link": "https://stackoverflow.com/users/1524644/pedros"}, "edited": false, "score": 0, "creation_date": 1444223013, "post_id": 32992068, "comment_id": 53810547, "body": "In you model or your DB, do you check for :password presence? If so it will fail without it"}], "answers": [{"comments": [{"owner": {"reputation": 1130, "user_id": 4574914, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/c27823d944d6c2125057e337c8700b97?s=128&d=identicon&r=PG&f=1", "display_name": "joeyk16", "link": "https://stackoverflow.com/users/4574914/joeyk16"}, "edited": false, "score": 0, "creation_date": 1444221660, "post_id": 32992369, "comment_id": 53809502, "body": "Read the last bold text on the description"}, {"owner": {"reputation": 2145, "user_id": 585675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8693312806c21245f272e6768ee17f91?s=128&d=identicon&r=PG", "display_name": "Vishnu Atrai", "link": "https://stackoverflow.com/users/585675/vishnu-atrai"}, "reply_to_user": {"reputation": 1130, "user_id": 4574914, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/c27823d944d6c2125057e337c8700b97?s=128&d=identicon&r=PG&f=1", "display_name": "joeyk16", "link": "https://stackoverflow.com/users/4574914/joeyk16"}, "edited": false, "score": 0, "creation_date": 1444222047, "post_id": 32992369, "comment_id": 53809802, "body": "<code>user_params</code> should be different there must be validation for user password and password confirmation and uniqueness for username"}, {"owner": {"reputation": 1130, "user_id": 4574914, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/c27823d944d6c2125057e337c8700b97?s=128&d=identicon&r=PG&f=1", "display_name": "joeyk16", "link": "https://stackoverflow.com/users/4574914/joeyk16"}, "edited": false, "score": 0, "creation_date": 1444223433, "post_id": 32992369, "comment_id": 53810872, "body": "Yes this worked. Thank you. I still don&#39;t know why my way didn&#39;t work. user_params in my Spec has the same attributes. It just wansn&#39;t getting passed. I will refractor what you have made. But it&#39;s good fix for now. Thank you so much!!!"}], "tags": [], "owner": {"reputation": 2145, "user_id": 585675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8693312806c21245f272e6768ee17f91?s=128&d=identicon&r=PG", "display_name": "Vishnu Atrai", "link": "https://stackoverflow.com/users/585675/vishnu-atrai"}, "is_accepted": true, "score": 1, "last_activity_date": 1444222265, "last_edit_date": 1444222265, "creation_date": 1444221282, "answer_id": 32992369, "question_id": 32992068, "link": "https://stackoverflow.com/questions/32992068/rspec-failure-error-expectassignsuser-to-be-persisted/32992369#32992369", "title": "Rspec: Failure/Error: expect(assigns(:user)).to be_persisted", "body": "<p>Modify your specs like below and it should work - </p>\n\n<pre><code>require \"rails_helper\"\n\nRSpec.describe UsersController, type: :controller do\n  let!(:admin) { create(:user, password: \"Password123\", admin: true) }\n  let!(:user) { create(:user, password: \"Password456\", admin: false) }\n\n  let!(:users) do\n    [admin, user] + 3.times.map { create(:user) }\n  end\n\n  let!(:user_params) { user.dup.attributes }\n\n  describe \"POST #create\" do\n    it \"user created\" do\n      valid_user_params = { username: \"username#{rand(1000)}\", \n       email: \"user#{rand(1000)}@factory.com\",\n       password: \"Password123\",\n       password_confirmation: \"Password123\",\n       admin: false,\n       description: \"Nihil eligendi ab debitis iure.\" }\n      post :create, user: valid_user_params\n      expect(assigns(:user)).to be_persisted\n    end\n  end\nend\n</code></pre>\n"}], "owner": {"reputation": 1130, "user_id": 4574914, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/c27823d944d6c2125057e337c8700b97?s=128&d=identicon&r=PG&f=1", "display_name": "joeyk16", "link": "https://stackoverflow.com/users/4574914/joeyk16"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2467, "favorite_count": 0, "accepted_answer_id": 32992369, "answer_count": 1, "score": 0, "last_activity_date": 1444222265, "creation_date": 1444220467, "last_edit_date": 1444221641, "question_id": 32992068, "link": "https://stackoverflow.com/questions/32992068/rspec-failure-error-expectassignsuser-to-be-persisted", "title": "Rspec: Failure/Error: expect(assigns(:user)).to be_persisted", "body": "<p>I have a simple controller Rspec test. I'm testing the User controller create action. </p>\n\n<p>But i receive this error</p>\n\n<pre><code>$ rspec spec/controllers/users_controller_spec.rb\n.....F\n\nFailures:\n\n  1) UsersController POST #create user created\n     Failure/Error: expect(assigns(:user)).to be_persisted\n       expected `#&lt;User id: nil, username: \"username27\", email: \"user27@factory.com\", created_at: nil, updated_at: nil, password_digest: nil, remember_digest: nil, admin: false, activation_digest: nil, activated: false, activated_at: nil, reset_digest: nil, &gt;: nil, reset_sent_at: nil, avatar_file_name: nil, avatar_content_type: nil, avatar_file_size: nil, avatar_updated_at: nil, description: nil, header_image_file_name: nil, header_image_content_type: nil, header_image_file_size: nil, header_image_updated_at: nil&gt;.persisted?` to return true, got false\n     # ./spec/controllers/users_controller_spec.rb:58:in `block (3 levels) in &lt;top (required)&gt;'\n\nFinished in 0.49926 seconds (files took 2.6 seconds to load)\n</code></pre>\n\n<p>Here is the test</p>\n\n<pre><code>require \"rails_helper\"\n\nRSpec.describe UsersController, type: :controller do\n  let!(:admin) { create(:user, password: \"Password123\", admin: true) }\n  let!(:user) { create(:user, password: \"Password456\", admin: false) }\n\n  let!(:users) do\n    [admin, user] + 3.times.map { create(:user) }\n  end\n\n  let!(:user_params) { user.attributes }\n\n  describe \"POST #create\" do\n    before do\n      post :create, user: user_params\n    end\n\n    it \"user created\" do\n      expect(assigns(:user)).to be_persisted\n    end\n  end\nend\n</code></pre>\n\n<p><strong>When i put a binding.pry at the create action. Then run User.new(user_params).valid? = false</strong></p>\n\n<pre><code>$ rspec spec/controllers/users_controller_spec.rb\n.....\nFrom: /Users/joseph/Documents/Safsy/Website/Safsy/Safsy/app/controllers/users_controller.rb @ line 26 UsersController#create:\n\n    24: def create\n    25:   @user = User.new(user_params)\n =&gt; 26:   binding.pry\n    27:   if @user.save\n    28:     @user.send_activation_email\n    29:     flash[:info] = \"Please check your email to activate your account.\"\n    30:     redirect_to root_url\n    31:   else\n    32:     render 'new'\n    33:   end\n    34: end\n\n[1] pry(#&lt;UsersController&gt;)&gt; User.new(user_params)\n=&gt; #&lt;User:0x007fa749fc1b18\n id: nil,\n username: \"username27\",\n email: \"user27@factory.com\",\n created_at: nil,\n updated_at: nil,\n password_digest: nil,\n remember_digest: nil,\n admin: false,\n activation_digest: nil,\n activated: false,\n activated_at: nil,\n reset_digest: nil,\n &gt;: nil,\n reset_sent_at: nil,\n avatar_file_name: nil,\n avatar_content_type: nil,\n avatar_file_size: nil,\n avatar_updated_at: nil,\n description: \"Vel aperiam et dolorem aliquid est perspiciatis.\",\n header_image_file_name: nil,\n header_image_content_type: nil,\n header_image_file_size: nil,\n header_image_updated_at: nil&gt;\n</code></pre>\n\n<p><strong>Any clues how to fix it? Its like only some of my attributes for the user_params in my tests are getting passed too the create action</strong></p>\n\n<pre><code>Here are is a binding.pry at the Test\n\n    50:   end\n    51:\n    52:   describe \"POST #create\" do\n    53:     before do\n    54:       post :create, user: user_params\n =&gt; 55:       binding.pry\n    56:     end\n    57:\n    58:     it \"user created\" do\n    59:       expect(assigns(:user)).to be_persisted\n    60:     end\n\n[1] pry(#&lt;RSpec::ExampleGroups::UsersController::POSTCreate&gt;)&gt; user_params\n=&gt; {\"id\"=&gt;2,\n \"username\"=&gt;\"username27\",\n \"email\"=&gt;\"user27@factory.com\",\n \"created_at\"=&gt;Wed, 07 Oct 2015 12:24:01 UTC +00:00,\n \"updated_at\"=&gt;Wed, 07 Oct 2015 12:24:01 UTC +00:00,\n \"password_digest\"=&gt;\"$2a$04$Y627EwOml9cix7NdPITnpem0nZV8fta.JNyuezRsLNF2ucKfdC3GC\",\n \"remember_digest\"=&gt;nil,\n \"admin\"=&gt;false,\n \"activation_digest\"=&gt;\"$2a$04$LHRBD82Lm0bj20nrwHDVveVlUa7zWq0WYIlmTMivT1h9UIcjwv9FO\",\n \"activated\"=&gt;true,\n \"activated_at\"=&gt;nil,\n \"reset_digest\"=&gt;nil,\n \"&gt;\"=&gt;nil,\n \"reset_sent_at\"=&gt;nil,\n \"avatar_file_name\"=&gt;nil,\n \"avatar_content_type\"=&gt;nil,\n \"avatar_file_size\"=&gt;nil,\n \"avatar_updated_at\"=&gt;nil,\n \"description\"=&gt;\"Nihil eligendi ab debitis iure.\",\n \"header_image_file_name\"=&gt;nil,\n \"header_image_content_type\"=&gt;nil,\n \"header_image_file_size\"=&gt;nil,\n \"header_image_updated_at\"=&gt;nil}\n</code></pre>\n\n<p><strong>Look at the user_params here in the test then look at them in the create action. They're the same. Just some attributes like password and password confirmation aren't being passed.</strong></p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 110733, "user_id": 1009479, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/wlrC5.jpg?s=128&g=1", "display_name": "Yu Hao", "link": "https://stackoverflow.com/users/1009479/yu-hao"}, "edited": false, "score": 2, "creation_date": 1444220525, "post_id": 32992063, "comment_id": 53808628, "body": "Please indent your code properly."}, {"owner": {"reputation": 1485, "user_id": 5388516, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/96fff619864c3ebb7654eb98bd945b43?s=128&d=identicon&r=PG&f=1", "display_name": "13aal", "link": "https://stackoverflow.com/users/5388516/13aal"}, "reply_to_user": {"reputation": 110733, "user_id": 1009479, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/wlrC5.jpg?s=128&g=1", "display_name": "Yu Hao", "link": "https://stackoverflow.com/users/1009479/yu-hao"}, "edited": false, "score": 0, "creation_date": 1444220567, "post_id": 32992063, "comment_id": 53808660, "body": "I&#39;m using geddit, and it doesn&#39;t indent for you."}, {"owner": {"reputation": 4127, "user_id": 4231385, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d89a541a4609cafea3957e4cdfcca50f?s=128&d=identicon&r=PG&f=1", "display_name": "cremno", "link": "https://stackoverflow.com/users/4231385/cremno"}, "edited": false, "score": 0, "creation_date": 1444221099, "post_id": 32992063, "comment_id": 53809059, "body": "<code>if input = pin</code>: comparing for equality is done with <code>==</code>. <code>=</code> is for assignments. <code>&quot;&quot;&quot;</code> is also wrong. A single quotation mark (<code>&quot;</code>) is enough."}, {"owner": {"reputation": 1485, "user_id": 5388516, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/96fff619864c3ebb7654eb98bd945b43?s=128&d=identicon&r=PG&f=1", "display_name": "13aal", "link": "https://stackoverflow.com/users/5388516/13aal"}, "edited": false, "score": 0, "creation_date": 1444221349, "post_id": 32992063, "comment_id": 53809256, "body": "AWH! Cool thanks man!"}, {"owner": {"reputation": 1485, "user_id": 5388516, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/96fff619864c3ebb7654eb98bd945b43?s=128&d=identicon&r=PG&f=1", "display_name": "13aal", "link": "https://stackoverflow.com/users/5388516/13aal"}, "edited": false, "score": 0, "creation_date": 1444221434, "post_id": 32992063, "comment_id": 53809327, "body": "Wouldn&#39;t I have to use commas if I used a single quotation?       IE: <code>puts &quot;HI&quot;,</code>                <code>&quot;Hello&quot;</code>"}, {"owner": {"reputation": 14704, "user_id": 908515, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/f1L9v.png?s=128&g=1", "display_name": "undur_gongor", "link": "https://stackoverflow.com/users/908515/undur-gongor"}, "edited": false, "score": 2, "creation_date": 1444222391, "post_id": 32992063, "comment_id": 53810053, "body": "@Ekult3k: If you have no tool doing the indentation for you, you will have to do it all by yourself. Your code is unreadable."}], "answers": [{"comments": [{"owner": {"reputation": 41278, "user_id": 84631, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/181035f8aac1cb68d50dc58b67dc0349?s=128&d=identicon&r=PG", "display_name": "Mischa", "link": "https://stackoverflow.com/users/84631/mischa"}, "edited": false, "score": 0, "creation_date": 1444222814, "post_id": 32992845, "comment_id": 53810401, "body": "It seems he <i>wants</i> those methods to be outside the class. I.e. he&#39;s just calling <code>display</code> at the end."}, {"owner": {"reputation": 14704, "user_id": 908515, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/f1L9v.png?s=128&g=1", "display_name": "undur_gongor", "link": "https://stackoverflow.com/users/908515/undur-gongor"}, "reply_to_user": {"reputation": 41278, "user_id": 84631, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/181035f8aac1cb68d50dc58b67dc0349?s=128&d=identicon&r=PG", "display_name": "Mischa", "link": "https://stackoverflow.com/users/84631/mischa"}, "edited": false, "score": 0, "creation_date": 1444222879, "post_id": 32992845, "comment_id": 53810454, "body": "I think that&#39;s another mistake caused by first one. He is accessing instance variables all the way."}, {"owner": {"reputation": 1485, "user_id": 5388516, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/96fff619864c3ebb7654eb98bd945b43?s=128&d=identicon&r=PG&f=1", "display_name": "13aal", "link": "https://stackoverflow.com/users/5388516/13aal"}, "edited": false, "score": 0, "creation_date": 1444230839, "post_id": 32992845, "comment_id": 53816686, "body": "Sorry got busy, I see what you&#39;re talking about and I fixed it, thanks for the help."}], "tags": [], "owner": {"reputation": 14704, "user_id": 908515, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/f1L9v.png?s=128&g=1", "display_name": "undur_gongor", "link": "https://stackoverflow.com/users/908515/undur-gongor"}, "is_accepted": false, "score": 1, "last_activity_date": 1444223265, "last_edit_date": 1444223265, "creation_date": 1444222635, "answer_id": 32992845, "question_id": 32992063, "link": "https://stackoverflow.com/questions/32992063/making-bank-account/32992845#32992845", "title": "Making bank account", "body": "<p>You have to put all those methods into the <code>Account</code> class body. Otherwise they will not see the instance variables or <code>attr_reader</code> methods.</p>\n\n<pre><code>class Account\n  attr_reader :name, :checking_account, :savings_account\n\n  def initialize(name, checking_account, savings_account)\n    @name = name\n    @checking_account = checking_account\n    @savings_account = savings_account\n  end\nend   # &lt;---- This closes your class, it has to be moved past the last method\n</code></pre>\n\n<p>This error is immediately visible with proper indentation.</p>\n\n<p>And at the end, you call <code>display</code> of <code>my_account</code>:</p>\n\n<pre><code>my_account.display\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 19261, "user_id": 4758119, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/F4dJY.jpg?s=128&g=1", "display_name": "Deepak Mahakale", "link": "https://stackoverflow.com/users/4758119/deepak-mahakale"}, "reply_to_user": {"reputation": 1485, "user_id": 5388516, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/96fff619864c3ebb7654eb98bd945b43?s=128&d=identicon&r=PG&f=1", "display_name": "13aal", "link": "https://stackoverflow.com/users/5388516/13aal"}, "edited": false, "score": 0, "creation_date": 1444230918, "post_id": 32993559, "comment_id": 53816766, "body": "just upvote and accept the answer if you dont mind :)"}], "tags": [], "owner": {"reputation": 19261, "user_id": 4758119, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/F4dJY.jpg?s=128&g=1", "display_name": "Deepak Mahakale", "link": "https://stackoverflow.com/users/4758119/deepak-mahakale"}, "is_accepted": true, "score": 1, "last_activity_date": 1444224639, "creation_date": 1444224639, "answer_id": 32993559, "question_id": 32992063, "link": "https://stackoverflow.com/questions/32992063/making-bank-account/32993559#32993559", "title": "Making bank account", "body": "<p>Move all methods inside class</p>\n\n<p>And call your display method on instance of class i.e. in your case my_account</p>\n\n<p>This should do the trick! :)</p>\n"}], "owner": {"reputation": 1485, "user_id": 5388516, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/96fff619864c3ebb7654eb98bd945b43?s=128&d=identicon&r=PG&f=1", "display_name": "13aal", "link": "https://stackoverflow.com/users/5388516/13aal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1235, "favorite_count": 0, "accepted_answer_id": 32993559, "answer_count": 2, "score": -3, "last_activity_date": 1444224639, "creation_date": 1444220461, "last_edit_date": 1444222533, "question_id": 32992063, "link": "https://stackoverflow.com/questions/32992063/making-bank-account", "title": "Making bank account", "body": "<p>I'm creating a bank account using Ruby. I'm getting a undefined method or local variable error even though the method is already defined, could someone tell me what's wrong with this code? I have tried rewriting the main_menu method but am still getting the same error.</p>\n\n<pre><code>class Account\n  attr_reader :name, :checking_account, :savings_account\n\n  def initialize(name, checking_account, savings_account)\n    @name = name\n    @checking_account = checking_account\n    @savings_account = savings_account\n  end\nend\n\ndef display\n  puts \"Enter your PIN:\"\n  input = gets.chomp\n\n  if input = pin\n    main_menu\n  else\n    bad_pin\n  end\nend\n\ndef main_menu\n  puts \"\"\"\n    Welcome back #{name}!\n    Would you like to:\n    Display Balance press '1'\n    Make Withdrawl press '2'\n    Make Deposit press '3'\n    Exit press '4'\n  \"\"\"\n\n  input = gets.chomp\n\n  case option\n    when 1\n      balance\n    when 2\n      withdrawl\n    when 3\n      deposit\n    else\n      exit\n  end\nend\n\ndef balance\n  puts \"Which balance? Checking or Savings?\"\n  input = gets.chomp\n\n  if input =~ /checking/i\n    puts \"Your balance for your Checking Account is: $#{checking_account}.\"\n  elsif input =~ /savings/i\n    puts \"Your balance for your Savings Account is: $#{savings_account}.\"\n  else\n    main_menu\n  end\nend\n\ndef withdrawl(pin_number, amount)\n  puts \"Enter PIN to make a withdrawl:\"\n  input = gets.chomp\n\n  case withdrawl\n    when checking_account\n      @checking_account -= amount\n      puts \"You have withdrawn $#{amount}; you now have ${checking_account} in your checking.\"\n    when savings_account\n      @savings_account -= amount\n      puts \"You have withdrawn ${amount}; you now have $#{savings_account} in your savings.\"\n    else\n      bad_pin\n  end\nend\n\ndef deposit\n  puts \"Which account would you like to deposit into: Checkings, or Savings?\"\n  input = gets.chomp\n\n  if input =~ /checking/i\n    @checking_account += amount\n    puts \"You have made a deposit of $#{amount} leaving you with $#{checking_account}.\"\n  elsif input =~ /savings/i\n    @savings_account += amount\n    puts \"You have made a deposit of $#{amount} leaving you with $#{savings_account}.\"\n  else\n    main_menu\n  end\nend\n\ndef pin\n  @pin = 1234\nend\n\ndef bad_pin\n  puts \"Access Denied: incorrect PIN\"\n  exit\nend\n\nmy_account = Account.new(\"Thomas\", 500_000, 750_000)\ndisplay\n</code></pre>\n\n<p>The error I'm recieving is this:</p>\n\n<pre><code>bank.rb:25:in `main_menu': undefined local variable or method `name' for main:Object (NameError)\n        from bank.rb:16:in `display'\n        from bank.rb:101:in `&lt;main&gt;'\n</code></pre>\n"}, {"tags": ["ruby", "json"], "comments": [{"owner": {"reputation": 89316, "user_id": 238886, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/8ca29123b5669b26f9b6ca2c62d9d215?s=128&d=identicon&r=PG", "display_name": "Wayne Conrad", "link": "https://stackoverflow.com/users/238886/wayne-conrad"}, "edited": false, "score": 0, "creation_date": 1444332277, "post_id": 32991960, "comment_id": 53871020, "body": "Hello, welcome to SO.  This is the start of a a good question, but in order for someone to answer it we need more information.  Can you please edit the question to explain in what way the code doesn&#39;t work?  SO focuses on fixing specific problems, so we need a specific problem to solve."}, {"owner": {"reputation": 11, "user_id": 5418089, "user_type": "registered", "profile_image": "https://graph.facebook.com/959686404074864/picture?type=large", "display_name": "Eirene", "link": "https://stackoverflow.com/users/5418089/eirene"}, "reply_to_user": {"reputation": 89316, "user_id": 238886, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/8ca29123b5669b26f9b6ca2c62d9d215?s=128&d=identicon&r=PG", "display_name": "Wayne Conrad", "link": "https://stackoverflow.com/users/238886/wayne-conrad"}, "edited": false, "score": 2, "creation_date": 1444403222, "post_id": 32991960, "comment_id": 53903878, "body": "@WayneConrad I edited my question :)"}, {"owner": {"reputation": 13937, "user_id": 3824919, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0HpYR.png?s=128&g=1", "display_name": "Tom", "link": "https://stackoverflow.com/users/3824919/tom"}, "edited": false, "score": 0, "creation_date": 1444412770, "post_id": 32991960, "comment_id": 53909346, "body": "Good that you&#39;ve improved your question :). Please mind that I removed the sentence &quot;Thank you&quot; from your question. Since this is a Q&amp;A based site, it is prefered to write clean questions, without sentences like &quot;Thank you&quot;, &quot;Hello fellow users&quot; etc. Just a note ;). Welcome to SO."}, {"owner": {"reputation": 6885, "user_id": 539115, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/agxrQ.jpg?s=128&g=1", "display_name": "Sanjit Saluja", "link": "https://stackoverflow.com/users/539115/sanjit-saluja"}, "edited": false, "score": 0, "creation_date": 1444412860, "post_id": 32991960, "comment_id": 53909382, "body": "Possible dupe of <a href=\"http://stackoverflow.com/questions/2024805/ruby-send-json-request\" title=\"ruby send json request\">stackoverflow.com/questions/2024805/ruby-send-json-request</a>"}], "owner": {"reputation": 11, "user_id": 5418089, "user_type": "registered", "profile_image": "https://graph.facebook.com/959686404074864/picture?type=large", "display_name": "Eirene", "link": "https://stackoverflow.com/users/5418089/eirene"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 574, "favorite_count": 1, "answer_count": 0, "score": 1, "last_activity_date": 1444412536, "creation_date": 1444220194, "last_edit_date": 1444412536, "question_id": 32991960, "link": "https://stackoverflow.com/questions/32991960/json-http-post-request-in-ruby", "title": "json HTTP-POST request in Ruby", "body": "<p>How can I transform this <code>curl</code> command to a Ruby HTTP Request?</p>\n\n<pre><code>curl -k -v -X POST -H \"Content-Type: application/json\" --data-binary @/home/venafi/venafi-auth.json https://10.150.85.11/authorize/`\n</code></pre>\n\n<p>I don't know Ruby very well and I tried </p>\n\n<pre><code>require 'net/http'\nrequire 'uri'\nrequire 'openssl'\nrequire 'json'\n\nuri = URI.parse(\"https://10.150.85.1/authorize/\")\nhttp = Net::HTTP.new(uri.host, uri.port)\nhttp.use_ssl = true\nhttp.verify_mode = OpenSSL::SSL::VERIFY_NONE\nrequest = Net::HTTP::Post.new(uri.path, initheader = {'Content-Type' =&gt;'application/json'})\nrequest.set_form_data({'Username' =&gt; 'user', 'Password' =&gt; 'Passw0rd'})\n#request['foo'] = 'bar'\nputs request\nresponse =  http.request(request)\nputs \"Response\\n #{response.code} \\n#{response.message}: \\n#{response.body.to_json}\"\nputs response\nputs request\n\nhttpg = Net::HTTP.new(uri.host, uri.port)\nhttpg.use_ssl = true\nhttpg.verify_mode = OpenSSL::SSL::VERIFY_NONE\nreqg = Net::HTTP::Get.new(\"uri.request_uri\")\n\nputs \"Response\\n #{reqg.body.to_json}\"\n</code></pre>\n\n<p>But the only thing that I get is</p>\n\n<blockquote>\n  <p>Net::HTTP::Post:0x00000001baab98<br>\n  Response<br>\n   202<br>\n  Accepted:<br>\n  \"\"<br>\n  Net::HTTPAccepted:0x00000001bcac68<br>\n       Net::HTTP::Post:0x00000001baab98<br>\n       Response<br>\n       null</p>\n</blockquote>\n\n<p>While when I use <code>curl</code> I get an apikey.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "url", "path"], "answers": [{"tags": [], "owner": {"reputation": 26, "user_id": 2743557, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000136322230/picture?type=large", "display_name": "Ferry Phang", "link": "https://stackoverflow.com/users/2743557/ferry-phang"}, "is_accepted": true, "score": 1, "last_activity_date": 1444221654, "creation_date": 1444221654, "answer_id": 32992491, "question_id": 32991295, "link": "https://stackoverflow.com/questions/32991295/how-to-get-the-url-to-edit-without-sending-any-resource/32992491#32992491", "title": "How to get the url to edit without sending any resource", "body": "<p>My suggestion is I think you need to create another routes that handle post request</p>\n\n<pre><code>POST /edit_team \n</code></pre>\n\n<p>So instead of using the RESTFUl routes you create another routes using post request that send using form submit that send a hidden field that consist of team id</p>\n"}], "owner": {"reputation": 65, "user_id": 1122710, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7804dba0d28b8c92d2678b37808fd5d6?s=128&d=identicon&r=PG", "display_name": "nazshal", "link": "https://stackoverflow.com/users/1122710/nazshal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 25, "favorite_count": 0, "accepted_answer_id": 32992491, "answer_count": 1, "score": 0, "last_activity_date": 1444221654, "creation_date": 1444218149, "question_id": 32991295, "link": "https://stackoverflow.com/questions/32991295/how-to-get-the-url-to-edit-without-sending-any-resource", "title": "How to get the url to edit without sending any resource", "body": "<p>I would like to get the path name of an edit without sending any resource.</p>\n\n<p>I can't use this</p>\n\n<pre><code>team_path(@team) &gt; 'team/1234'\n</code></pre>\n\n<p>Something like this would help me to avoid the string only variant.</p>\n\n<pre><code>team_path_name &gt; 'team'\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "controller", "params"], "comments": [{"owner": {"reputation": 110512, "user_id": 350087, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/808bec1c640143bd7091888d9edfb2f2?s=128&d=identicon&r=PG", "display_name": "apneadiving", "link": "https://stackoverflow.com/users/350087/apneadiving"}, "edited": false, "score": 1, "creation_date": 1444218866, "post_id": 32991089, "comment_id": 53807476, "body": "Rails automatically uses <code>wrap_parameters</code> <a href=\"http://api.rubyonrails.org/classes/ActionController/ParamsWrapper.html\" rel=\"nofollow noreferrer\">api.rubyonrails.org/classes/ActionController/ParamsWrapper.h&zwnj;&#8203;tml</a> Btw, I&#39;d also suggest to avoid <code>Transaction</code> as a model name, the name can collide with the database transactions"}], "answers": [{"comments": [{"owner": {"reputation": 19261, "user_id": 4758119, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/F4dJY.jpg?s=128&g=1", "display_name": "Deepak Mahakale", "link": "https://stackoverflow.com/users/4758119/deepak-mahakale"}, "edited": false, "score": 0, "creation_date": 1444224791, "post_id": 32991356, "comment_id": 53811916, "body": "well you don&#39;t pass id to create method id will be generated automatically @DayvanCowboy"}], "tags": [], "owner": {"reputation": 4978, "user_id": 3033649, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d885e80c88f3969d451d513c6a73c802?s=128&d=identicon&r=PG", "display_name": "markets", "link": "https://stackoverflow.com/users/3033649/markets"}, "is_accepted": false, "score": 2, "last_activity_date": 1444219262, "last_edit_date": 1444219262, "creation_date": 1444218344, "answer_id": 32991356, "question_id": 32991089, "link": "https://stackoverflow.com/questions/32991089/rails-extra-params-from-nowhere/32991356#32991356", "title": "Rails extra params from nowhere", "body": "<p>Regarding:</p>\n\n<blockquote>\n  <p>Invalid single-table inheritance type: cars is not a subclass of Transaction</p>\n</blockquote>\n\n<p>The problem is: <code>type</code> is a reserved word in Rails, used for Single Table Inheritance (docs: <a href=\"http://api.rubyonrails.org/classes/ActiveRecord/Base.html#class-ActiveRecord::Base-label-Single+table+inheritance\" rel=\"nofollow\">STI</a>), so you can't use it in an AR Model if you're not dealing with an STI structure.</p>\n\n<p>In that case you have 2 options:</p>\n\n<p>1) Rename the column to something like: transaction_type, kind, ...</p>\n\n<p>2) Disable STI for this model:</p>\n\n<pre><code>class Transaction &lt; ActiveRecord::Base\n  self.inheritance_column = nil\nend\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 19261, "user_id": 4758119, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/F4dJY.jpg?s=128&g=1", "display_name": "Deepak Mahakale", "link": "https://stackoverflow.com/users/4758119/deepak-mahakale"}, "edited": false, "score": 0, "creation_date": 1444224739, "post_id": 32991686, "comment_id": 53811872, "body": "@DayvanCowboy well you don&#39;t pass id to create method id will be generated automatically"}], "tags": [], "owner": {"reputation": 19261, "user_id": 4758119, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/F4dJY.jpg?s=128&g=1", "display_name": "Deepak Mahakale", "link": "https://stackoverflow.com/users/4758119/deepak-mahakale"}, "is_accepted": false, "score": 0, "last_activity_date": 1444219327, "creation_date": 1444219327, "answer_id": 32991686, "question_id": 32991089, "link": "https://stackoverflow.com/questions/32991089/rails-extra-params-from-nowhere/32991686#32991686", "title": "Rails extra params from nowhere", "body": "<blockquote>\n  <p>Invalid single-table inheritance type: cars is not a subclass of Transaction</p>\n</blockquote>\n\n<p>Rails trying to find <code>Car</code> as a subclass of Class <code>Transaction</code> as we use :type column in STI </p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user2231831"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 92, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1444219327, "creation_date": 1444217524, "last_edit_date": 1444218278, "question_id": 32991089, "link": "https://stackoverflow.com/questions/32991089/rails-extra-params-from-nowhere", "title": "Rails extra params from nowhere", "body": "<p>I have a rails controller that accepts 4 params:</p>\n\n<pre><code> def transaction_params\n  params.require(:transaction).permit(:id, :amount, :type, :parent_id)\nend\n</code></pre>\n\n<p>I making the following PUT request with Curl in order to create a new record of Transaction:</p>\n\n<pre><code>curl -v -H \"Accept: application/json\" -H \"Content-type: application/json\" -X PUT -d '{ \"amount\": 5000, \"type\": \"cars\" }'\n</code></pre>\n\n<p>However when I'm trying to save this to a database</p>\n\n<pre><code>transaction = Transaction.new(transaction_params)\n...\n</code></pre>\n\n<p>I'm getting the following error:</p>\n\n<pre><code>Invalid single-table inheritance type: cars is not a subclass of Transaction\n</code></pre>\n\n<p>The parameters list that Rails trying to use are the following:</p>\n\n<pre><code>Parameters: {\"amount\"=&gt;5000, \"type\"=&gt;\"cars\", \"id\"=&gt;\"10\", \"transaction\"=&gt;{\"amount\"=&gt;5000, \"type\"=&gt;\"cars\"}}\n</code></pre>\n\n<p>I cannot figure out why I have a nested \"transaction\" key in the hash with parameters that ruins all the stuff.</p>\n\n<p>Could you help me?</p>\n"}, {"tags": ["ruby", "apache", "rubygems", "vagrant", "virtualbox"], "comments": [{"owner": {"reputation": 44774, "user_id": 4296747, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-muYS9LV5AoA/AAAAAAAAAAI/AAAAAAAACG4/KcTmlFyGWRI/photo.jpg?sz=128", "display_name": "Frederic Henri", "link": "https://stackoverflow.com/users/4296747/frederic-henri"}, "edited": false, "score": 0, "creation_date": 1444218668, "post_id": 32991003, "comment_id": 53807328, "body": "if you go back from start and do <code>su -l www-data gem install sass</code> does it help ?"}, {"owner": {"reputation": 441, "user_id": 1990092, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/6FSap.jpg?s=128&g=1", "display_name": "Mark C.", "link": "https://stackoverflow.com/users/1990092/mark-c"}, "reply_to_user": {"reputation": 44774, "user_id": 4296747, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-muYS9LV5AoA/AAAAAAAAAAI/AAAAAAAACG4/KcTmlFyGWRI/photo.jpg?sz=128", "display_name": "Frederic Henri", "link": "https://stackoverflow.com/users/4296747/frederic-henri"}, "edited": false, "score": 0, "creation_date": 1444220457, "post_id": 32991003, "comment_id": 53808571, "body": "I tried installing it by swithcing users but it returned the following message <code>-su: 0: Can&#39;t open gem</code> it looks like the user <code>www-data</code> doesn&#39;t have any knowledge of the commands that are available for the normal vagrant user"}, {"owner": {"reputation": 44774, "user_id": 4296747, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-muYS9LV5AoA/AAAAAAAAAAI/AAAAAAAACG4/KcTmlFyGWRI/photo.jpg?sz=128", "display_name": "Frederic Henri", "link": "https://stackoverflow.com/users/4296747/frederic-henri"}, "edited": false, "score": 0, "creation_date": 1444222665, "post_id": 32991003, "comment_id": 53810295, "body": "hum .. if you install with the root user then <code>sudo gem install sass</code>"}, {"owner": {"reputation": 441, "user_id": 1990092, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/6FSap.jpg?s=128&g=1", "display_name": "Mark C.", "link": "https://stackoverflow.com/users/1990092/mark-c"}, "reply_to_user": {"reputation": 44774, "user_id": 4296747, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-muYS9LV5AoA/AAAAAAAAAAI/AAAAAAAACG4/KcTmlFyGWRI/photo.jpg?sz=128", "display_name": "Frederic Henri", "link": "https://stackoverflow.com/users/4296747/frederic-henri"}, "edited": false, "score": 0, "creation_date": 1444224456, "post_id": 32991003, "comment_id": 53811632, "body": "It works for the root user but still the www-data can&#39;t find the gem command. Just like I said in my question."}], "answers": [{"comments": [{"owner": {"reputation": 441, "user_id": 1990092, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/6FSap.jpg?s=128&g=1", "display_name": "Mark C.", "link": "https://stackoverflow.com/users/1990092/mark-c"}, "edited": false, "score": 0, "creation_date": 1444229493, "post_id": 32994720, "comment_id": 53815647, "body": "I tried this and it does indeed return the values that are set in the envvars file. I added my envvars file to the question."}, {"owner": {"reputation": 112, "user_id": 1838634, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/J5pPK.jpg?s=128&g=1", "display_name": "BoBro", "link": "https://stackoverflow.com/users/1838634/bobro"}, "reply_to_user": {"reputation": 441, "user_id": 1990092, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/6FSap.jpg?s=128&g=1", "display_name": "Mark C.", "link": "https://stackoverflow.com/users/1990092/mark-c"}, "edited": false, "score": 1, "creation_date": 1444230089, "post_id": 32994720, "comment_id": 53816118, "body": "try running the newest Scotch Box with Ruby 2.2.2 and RBEnv and adding this to your envvars: <code>export PATH=$PATH:&#47;home&#47;vagrant&#47;.rbenv&#47;shims&#47;:&#47;home&#47;vagrant&#47;.rbenv&#47;&zwnj;&#8203;bin:&#47;home&#47;vagrant&#47;.r&zwnj;&#8203;benv&#47;plugins&#47;ruby-bu&zwnj;&#8203;ild&#47;bin:&#47;home&#47;vagran&zwnj;&#8203;t&#47;.rbenv&#47;shims&#47;gem</code>"}], "tags": [], "owner": {"reputation": 112, "user_id": 1838634, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/J5pPK.jpg?s=128&g=1", "display_name": "BoBro", "link": "https://stackoverflow.com/users/1838634/bobro"}, "is_accepted": true, "score": 1, "last_activity_date": 1444229005, "last_edit_date": 1444229005, "creation_date": 1444227479, "answer_id": 32994720, "question_id": 32991003, "link": "https://stackoverflow.com/questions/32991003/www-data-cant-find-the-ruby-gems-on-vagrant-configured-virtualbox/32994720#32994720", "title": "www-data can&#39;t find the ruby gems on vagrant configured virtualbox", "body": "<p>Try to find out whether the PATH that apache uses is indeed modified by your adjustments of the envvars file. You could do this by simply putting running this php code: \n<code>var_dump(getenv(\"PATH\"));\ndie;\n</code>\nI've had the exact same problem. After a long time trying it turned out that <code>service apache2 stop</code> and <code>start</code> in vagrant is not working as expected. After setting the PATH variable in <code>/etc/apache2/envvars</code> try reloading apache by reloading vagrant instead: <code>vagrant reload</code></p>\n"}], "owner": {"reputation": 441, "user_id": 1990092, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/6FSap.jpg?s=128&g=1", "display_name": "Mark C.", "link": "https://stackoverflow.com/users/1990092/mark-c"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 447, "favorite_count": 0, "accepted_answer_id": 32994720, "answer_count": 1, "score": 1, "last_activity_date": 1444229670, "creation_date": 1444217273, "last_edit_date": 1444229670, "question_id": 32991003, "link": "https://stackoverflow.com/questions/32991003/www-data-cant-find-the-ruby-gems-on-vagrant-configured-virtualbox", "title": "www-data can&#39;t find the ruby gems on vagrant configured virtualbox", "body": "<p>I'm trying to get a virtual server running using Vagrant and VirtualBox. For the VirtualBox I'm using <code>scotch/box</code> which got all the basic stuff for running a ubuntu server with some components (apache, mysql, php etc.) more on scotchbox can be found here.</p>\n\n<p>Now I got the server up and running (running a Yii2 application) but as soon as the application starts I get an Yii error message <code>sh: 1: sass: not found</code> and because of that a SASS file couldn't be converted to CSS. So I went back to my server to check if sass was installed, it wasn't so I ran the command <code>gem install sass</code> and after that sass was installed. <code>gem list sass -i</code> returned true.</p>\n\n<p>But still the problem stayed, sass couldn't be found. I went back to my console and of course apache is ran by user <code>www-data</code> and I logged in to ssh with the vagrant user. And this is were it gets a bit vague for me. In the environments variables of the apache service I added the paths to both ruby and the gems. But still the www-data user cannot find the sass command or the gem command or even the ruby command.</p>\n\n<p>I also tried to change the owner of the apache service from www-data to the vagrant user that did kinda help but thats not the solution I want to accept. I want a solution that the apache service stays owned by the www-data user and not a root user like vagrant.</p>\n\n<p>If more data needs to be added please let me know.</p>\n\n<p><strong>Envvars file</strong></p>\n\n<pre><code>    envvars - default environment variables for apache2ctl\n\n# this won't be correct after changing uid\nunset HOME\n\n# for supporting multiple apache2 instances\nif [ \"${APACHE_CONFDIR##/etc/apache2-}\" != \"${APACHE_CONFDIR}\" ] ; then\n    SUFFIX=\"-${APACHE_CONFDIR##/etc/apache2-}\"\nelse\n    SUFFIX=\nfi\n\n# Since there is no sane way to get the parsed apache2 config in scripts, some\n# settings are defined via environment variables and then used in apache2ctl,\n# /etc/init.d/apache2, /etc/logrotate.d/apache2, etc.\nexport APACHE_RUN_USER=www-data\nexport APACHE_RUN_GROUP=www-data\n# temporary state file location. This might be changed to /run in Wheezy+1\nexport APACHE_PID_FILE=/var/run/apache2/apache2$SUFFIX.pid\nexport APACHE_RUN_DIR=/var/run/apache2$SUFFIX\nexport APACHE_LOCK_DIR=/var/lock/apache2$SUFFIX\n# Only /var/log/apache2 is handled by /etc/logrotate.d/apache2.\nexport APACHE_LOG_DIR=/var/log/apache2$SUFFIX\n\n## The locale used by some modules like mod_dav\nexport LANG=C\n## Uncomment the following line to use the system default locale instead:\n#. /etc/default/locale\n\nexport LANG\n\n## The command to get the status for 'apache2ctl status'.\n## Some packages providing 'www-browser' need '--dump' instead of '-dump'.\n#export APACHE_LYNX='www-browser -dump'\n\n## If you need a higher file descriptor limit, uncomment and adjust the\n## following line (default is 8192):\n#APACHE_ULIMIT_MAX_FILES='ulimit -n 65536'\n\n## If you would like to pass arguments to the web server, add them below\n## to the APACHE_ARGUMENTS environment.\n#export APACHE_ARGUMENTS=''\n\n## Enable the debug mode for maintainer scripts.\n## This will produce a verbose output on package installations of web server modules and web application\n## installations which interact with Apache\n#export APACHE2_MAINTSCRIPT_DEBUG=1\nexport GEM_HOME=/home/vagrant/.rvm/gems/ruby-2.1.3\nexport GEM_PATH=/home/vagrant/.rvm/gems/ruby-2.1.3:/home/vagrant/.rvm/gems/ruby-2.1.3@global\nexport MY_RUBY_HOME=/home/vagrant/.rvm/rubies/ruby-2.1.3\nexport IRBRC=/home/vagrant/.rvm/rubies/ruby-2.1.3/.irbrc\nexport PATH=/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "haml"], "comments": [{"owner": {"reputation": 2437, "user_id": 4058838, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/56c7770d8f5d6b9ec7a13e82fbf0a59c?s=128&d=identicon&r=PG", "display_name": "Amit Badheka", "link": "https://stackoverflow.com/users/4058838/amit-badheka"}, "edited": false, "score": 1, "creation_date": 1444217020, "post_id": 32990629, "comment_id": 53806197, "body": "Why would you do that? You should be handling redirecting in the controller."}, {"owner": {"reputation": 19261, "user_id": 4758119, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/F4dJY.jpg?s=128&g=1", "display_name": "Deepak Mahakale", "link": "https://stackoverflow.com/users/4758119/deepak-mahakale"}, "reply_to_user": {"reputation": 2437, "user_id": 4058838, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/56c7770d8f5d6b9ec7a13e82fbf0a59c?s=128&d=identicon&r=PG", "display_name": "Amit Badheka", "link": "https://stackoverflow.com/users/4058838/amit-badheka"}, "edited": false, "score": 0, "creation_date": 1444217854, "post_id": 32990629, "comment_id": 53806777, "body": "agree with @AmitBadhekaPykihStaff you should handle these things in controller itself as you are getting <code>days</code> variable from controller"}, {"owner": {"reputation": 181, "user_id": 3248304, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/45977e7654d52899e8769caa9c7223de?s=128&d=identicon&r=PG", "display_name": "Gregory Worrall", "link": "https://stackoverflow.com/users/3248304/gregory-worrall"}, "edited": false, "score": 0, "creation_date": 1444219552, "post_id": 32990629, "comment_id": 53807928, "body": "Okie dokie, noob mistake. Answered my own question via your feedback."}], "answers": [{"tags": [], "owner": {"reputation": 181, "user_id": 3248304, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/45977e7654d52899e8769caa9c7223de?s=128&d=identicon&r=PG", "display_name": "Gregory Worrall", "link": "https://stackoverflow.com/users/3248304/gregory-worrall"}, "is_accepted": false, "score": 3, "last_activity_date": 1444219524, "creation_date": 1444219524, "answer_id": 32991744, "question_id": 32990629, "link": "https://stackoverflow.com/questions/32990629/redirecting-with-haml/32991744#32991744", "title": "Redirecting with HAML", "body": "<p>Don't handle redirects through your views, use your controller.</p>\n\n<p><strong>Controller:</strong></p>\n\n<pre><code>if days &gt; 1\n    redirect_to edit_user_registration_path\nend\n</code></pre>\n"}], "owner": {"reputation": 181, "user_id": 3248304, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/45977e7654d52899e8769caa9c7223de?s=128&d=identicon&r=PG", "display_name": "Gregory Worrall", "link": "https://stackoverflow.com/users/3248304/gregory-worrall"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1170, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1444219524, "creation_date": 1444216078, "question_id": 32990629, "link": "https://stackoverflow.com/questions/32990629/redirecting-with-haml", "title": "Redirecting with HAML", "body": "<p>I want to redirect to another page within my view with HAML, depending on the state of a variable.</p>\n\n<p><strong>Ideal situation:</strong></p>\n\n<pre><code>- if days &lt; 1\n     - redirect to /settings\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "json"], "answers": [{"comments": [{"owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "reply_to_user": {"reputation": 2278, "user_id": 3728916, "user_type": "registered", "accept_rate": 49, "profile_image": "https://i.stack.imgur.com/Zmke4.jpg?s=128&g=1", "display_name": "ImranNaqvi", "link": "https://stackoverflow.com/users/3728916/imrannaqvi"}, "edited": false, "score": 0, "creation_date": 1444373150, "post_id": 32996216, "comment_id": 53885107, "body": "Well are you sure that you are sending the right params?"}, {"owner": {"reputation": 2278, "user_id": 3728916, "user_type": "registered", "accept_rate": 49, "profile_image": "https://i.stack.imgur.com/Zmke4.jpg?s=128&g=1", "display_name": "ImranNaqvi", "link": "https://stackoverflow.com/users/3728916/imrannaqvi"}, "edited": false, "score": 0, "creation_date": 1444374322, "post_id": 32996216, "comment_id": 53885763, "body": "yes I&#39;m sure and the reason of my assurity is that i&#39;m inserting these values in db right now , but not through strong parameters"}, {"owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "reply_to_user": {"reputation": 2278, "user_id": 3728916, "user_type": "registered", "accept_rate": 49, "profile_image": "https://i.stack.imgur.com/Zmke4.jpg?s=128&g=1", "display_name": "ImranNaqvi", "link": "https://stackoverflow.com/users/3728916/imrannaqvi"}, "edited": false, "score": 0, "creation_date": 1444374960, "post_id": 32996216, "comment_id": 53886090, "body": "Well  - <code>{&quot;places&quot;=&gt;&quot;</code> is not valid JSON. That&#39;s what the JSON::parser error is telling you."}, {"owner": {"reputation": 2278, "user_id": 3728916, "user_type": "registered", "accept_rate": 49, "profile_image": "https://i.stack.imgur.com/Zmke4.jpg?s=128&g=1", "display_name": "ImranNaqvi", "link": "https://stackoverflow.com/users/3728916/imrannaqvi"}, "edited": false, "score": 0, "creation_date": 1444394668, "post_id": 32996216, "comment_id": 53897899, "body": "pardon me for communication gap . i updated my question with actual ajax request . kindly have a look"}, {"owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "reply_to_user": {"reputation": 2278, "user_id": 3728916, "user_type": "registered", "accept_rate": 49, "profile_image": "https://i.stack.imgur.com/Zmke4.jpg?s=128&g=1", "display_name": "ImranNaqvi", "link": "https://stackoverflow.com/users/3728916/imrannaqvi"}, "edited": false, "score": 0, "creation_date": 1444396916, "post_id": 32996216, "comment_id": 53899523, "body": "That&#39;s not valid JSON either. You might want to try validating it <a href=\"http://jsonlint.com/\" rel=\"nofollow noreferrer\">jsonlint.com</a>. I guess It might make it easier if you could show  the javascript where you are sending the AJAX request."}], "tags": [], "owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "is_accepted": false, "score": 0, "last_activity_date": 1444231322, "creation_date": 1444231322, "answer_id": 32996216, "question_id": 32990625, "link": "https://stackoverflow.com/questions/32990625/saving-mutiple-arrays-with-strong-parameters-ruby-on-rails-4/32996216#32996216", "title": "Saving Mutiple arrays with strong parameters Ruby on Rails 4", "body": "<p>You do not need to manually parse JSON parameters. Rails will automatically parse the parameters provided the request has the correct format (more specifically the correct mime type headers). In fact doing so will be slower and use more memory since you are doing the same parsing work twice.</p>\n\n<p>To allow an array of parameters you simply use the hash key and an array of the permitted attributes for the nested params.</p>\n\n<pre><code>def google_places\n  params.permit(places: [:icon, { location: [:H, :L] }])\nend\n</code></pre>\n\n<p>If possible you should change the <code>H</code> and <code>L</code> parameters to lowercase so that you can map them directly to attributes without violating the ruby conventions of lowercase attributes.</p>\n"}], "owner": {"reputation": 2278, "user_id": 3728916, "user_type": "registered", "accept_rate": 49, "profile_image": "https://i.stack.imgur.com/Zmke4.jpg?s=128&g=1", "display_name": "ImranNaqvi", "link": "https://stackoverflow.com/users/3728916/imrannaqvi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 83, "favorite_count": 1, "answer_count": 1, "score": 0, "last_activity_date": 1444394606, "creation_date": 1444216066, "last_edit_date": 1444394606, "question_id": 32990625, "link": "https://stackoverflow.com/questions/32990625/saving-mutiple-arrays-with-strong-parameters-ruby-on-rails-4", "title": "Saving Mutiple arrays with strong parameters Ruby on Rails 4", "body": "<p>I have an ajax response like this ,</p>\n\n<blockquote>\n  <p>google_searched_locations [{\"geometry\":{\"location\":{\"J\":31.482273,\"M\":74.33069999999998}},\"icon\":\"<a href=\"https://maps.gstatic.com/mapfiles\" rel=\"nofollow\">https://maps.gstatic.com/mapfiles</a>\n  /place_api/icons/restaurant-71.png\",\"id\":\"b93a99a46343de01d0d928f99470f9b0f5f6f11d\",\"name\":\"Dunkin' Donuts\"\n  ,\"place_id\":\"ChIJSeoh6hkEGTkRsd0e1crAbHU\",\"rating\":4.3,\"reference\":\"CnRhAAAAewgE30hrAcax1xdGPIf7M863\n  bOtNhRgfnncMx17uWMgtdTyGHGbTO76LX6yXsPyB4PcvfVzIeeIR1bxG0oSambqMYxFWwqHY3Cyfs6uWFp2QbVkGObvQ1LlTrdqLh1eZVgX8aL0iRFFhAnHEM8u1RxIQACDCn2BMD3IiG7tKri31BRoULMSagTU-EmxswgLxzCOWPVVnlpI\"\n  ,\"scope\":\"GOOGLE\",\"types\":[\"restaurant\",\"food\",\"point_of_interest\",\"establishment\"],\"vicinity\":\"Lahore\"\n  ,\"html_attributions\":[]}]</p>\n</blockquote>\n\n<p>After JSON.parse(thisString) , I get the required result by using params[\"places\"][0][\"geometry\"] and then looping over it , but I know that it's not a better way when Rails have strong parameter there , so I tried some solutions after searching , below is my strong parameters function </p>\n\n<pre><code>def google_places\n    json_params = ActionController::Parameters.new(JSON.parse(request.body.read) )\njson_params.require(:google_searched_locations).permit(:icon)\nend\n</code></pre>\n\n<p>but it gives the following error ,</p>\n\n<blockquote>\n  <p>JSON::ParserError in SearchesController#searchResults</p>\n  \n  <p>757: unexpected token at 'places=%5B%7B%22geometry</p>\n</blockquote>\n\n<p>Can anyone make us out of this mess , and tell us what's happening here and where is the right way to go .\nThanks in advance :)</p>\n"}, {"tags": ["ruby", "chef-infra"], "answers": [{"tags": [], "owner": {"reputation": 45322, "user_id": 421705, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/581b1760881c962648f99d6040d41829?s=128&d=identicon&r=PG", "display_name": "Holger Just", "link": "https://stackoverflow.com/users/421705/holger-just"}, "is_accepted": false, "score": 3, "last_activity_date": 1444214751, "creation_date": 1444214751, "answer_id": 32990205, "question_id": 32989599, "link": "https://stackoverflow.com/questions/32989599/no-resource-or-method-named-windows-zipfile-for-chefrecipe-default/32990205#32990205", "title": "No resource or method named `windows_zipfile&#39; for `Chef::Recipe &quot;default&quot;&#39;", "body": "<p>This resource is defined in the <a href=\"https://github.com/chef-cookbooks/windows#windows_zipfile\" rel=\"nofollow\">windows cookbook</a>, not in Chef core itself.</p>\n\n<p>Thus, in order to use it, you have to declare the windows cookbook as a dependency of your cookbook and upload it to the Chef server (or your cookbooks directory when running with chef solo).</p>\n"}], "owner": {"reputation": 21, "user_id": 2020470, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2fe6c43f885942b495a726ebcd284fca?s=128&d=identicon&r=PG", "display_name": "user2020470", "link": "https://stackoverflow.com/users/2020470/user2020470"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1027, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1444214832, "creation_date": 1444212866, "last_edit_date": 1444214832, "question_id": 32989599, "link": "https://stackoverflow.com/questions/32989599/no-resource-or-method-named-windows-zipfile-for-chefrecipe-default", "title": "No resource or method named `windows_zipfile&#39; for `Chef::Recipe &quot;default&quot;&#39;", "body": "<p>When I try to run a simple unzip recipe on windows environment I am getting the below error:</p>\n\n<pre><code>No resource or method named `windows_zipfile' for `Chef::Recipe \"default\"'\n</code></pre>\n\n<p>Please let me know how to fix this.</p>\n"}, {"tags": ["mysql", "ruby", "json"], "comments": [{"owner": {"reputation": 1835, "user_id": 4985645, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NMblv.png?s=128&g=1", "display_name": "Vishal JAIN", "link": "https://stackoverflow.com/users/4985645/vishal-jain"}, "edited": false, "score": 0, "creation_date": 1444212619, "post_id": 32989457, "comment_id": 53803527, "body": "Hey you can directly store this JSON in mysql by serialized it in column of type text/string. when you are accessing that column needs to deserialize it."}, {"owner": {"reputation": 11, "user_id": 5325316, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-Cmw2w-0rDYk/AAAAAAAAAAI/AAAAAAAAAAw/Z83qamn6WaI/photo.jpg?sz=128", "display_name": "Gopalakrishnan B", "link": "https://stackoverflow.com/users/5325316/gopalakrishnan-b"}, "reply_to_user": {"reputation": 1835, "user_id": 4985645, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NMblv.png?s=128&g=1", "display_name": "Vishal JAIN", "link": "https://stackoverflow.com/users/4985645/vishal-jain"}, "edited": false, "score": 0, "creation_date": 1444212824, "post_id": 32989457, "comment_id": 53803646, "body": "That&#39;s a good idea. But I am using Mysql 5.5 and it doesn&#39;t support JSON datatype. I don&#39;t want to upgrade my Mysql because of my own set of reasons. Is there any other way to do it?"}, {"owner": {"reputation": 1835, "user_id": 4985645, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NMblv.png?s=128&g=1", "display_name": "Vishal JAIN", "link": "https://stackoverflow.com/users/4985645/vishal-jain"}, "edited": false, "score": 0, "creation_date": 1444213169, "post_id": 32989457, "comment_id": 53803866, "body": "you have no need to used JSON datatype as i commented serialized data in text. so column datatype is text/string not json"}, {"owner": {"reputation": 11, "user_id": 5325316, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-Cmw2w-0rDYk/AAAAAAAAAAI/AAAAAAAAAAw/Z83qamn6WaI/photo.jpg?sz=128", "display_name": "Gopalakrishnan B", "link": "https://stackoverflow.com/users/5325316/gopalakrishnan-b"}, "reply_to_user": {"reputation": 1835, "user_id": 4985645, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NMblv.png?s=128&g=1", "display_name": "Vishal JAIN", "link": "https://stackoverflow.com/users/4985645/vishal-jain"}, "edited": false, "score": 0, "creation_date": 1444213639, "post_id": 32989457, "comment_id": 53804132, "body": "I got the picture. But it increases my effort to find a particular field since I have to deserialize and search in the JSON instead of picking the particular value from Mysql table."}, {"owner": {"reputation": 1835, "user_id": 4985645, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NMblv.png?s=128&g=1", "display_name": "Vishal JAIN", "link": "https://stackoverflow.com/users/4985645/vishal-jain"}, "edited": false, "score": 0, "creation_date": 1444214631, "post_id": 32989457, "comment_id": 53804733, "body": "yes. for searching particular record it is not possible to query on the particular column."}, {"owner": {"reputation": 47988, "user_id": 267540, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2v58W.jpg?s=128&g=1", "display_name": "e4c5", "link": "https://stackoverflow.com/users/267540/e4c5"}, "edited": false, "score": 0, "creation_date": 1444217698, "post_id": 32989457, "comment_id": 53806686, "body": "why not use redis for this? tailor made for your situation"}, {"owner": {"reputation": 11, "user_id": 5325316, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-Cmw2w-0rDYk/AAAAAAAAAAI/AAAAAAAAAAw/Z83qamn6WaI/photo.jpg?sz=128", "display_name": "Gopalakrishnan B", "link": "https://stackoverflow.com/users/5325316/gopalakrishnan-b"}, "edited": false, "score": 0, "creation_date": 1444219316, "post_id": 32989457, "comment_id": 53807758, "body": "Thanks for the suggestion. Will give a try."}], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 5325316, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-Cmw2w-0rDYk/AAAAAAAAAAI/AAAAAAAAAAw/Z83qamn6WaI/photo.jpg?sz=128", "display_name": "Gopalakrishnan B", "link": "https://stackoverflow.com/users/5325316/gopalakrishnan-b"}, "edited": false, "score": 0, "creation_date": 1444225965, "post_id": 32993452, "comment_id": 53812859, "body": "Thanks! This is exactly what i was looking for!!"}], "tags": [], "owner": {"reputation": 5483, "user_id": 4481312, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/teLso.jpg?s=128&g=1", "display_name": "marmeladze", "link": "https://stackoverflow.com/users/4481312/marmeladze"}, "is_accepted": true, "score": 0, "last_activity_date": 1444224346, "creation_date": 1444224346, "answer_id": 32993452, "question_id": 32989457, "link": "https://stackoverflow.com/questions/32989457/mysql-table-structure/32993452#32993452", "title": "Mysql table structure", "body": "<p>You should better use key-value storage systems for such purposes but there is a lot time consuming solution exists. </p>\n\n<p>I used <code>DataMapper</code> to create database tables below. It's just as quick as implementation, you should consider to add some constraints if you decide to use this scheme. I tried to keep things as simple and this inspiration comes from  <code>redis</code>. </p>\n\n<p>I have 6 tables. 2 of them stores primary keys of related tables.</p>\n\n<pre><code>       Table: roots\nCreate Table: CREATE TABLE `roots` (\n  `id` int(10) unsigned NOT NULL AUTO_INCREMENT,\n  `name` varchar(50) DEFAULT NULL,\n  PRIMARY KEY (`id`)\n) ENGINE=InnoDB AUTO_INCREMENT=6 DEFAULT CHARSET=utf8\n1 row in set (0.00 sec)\n\n       Table: titles\nCreate Table: CREATE TABLE `titles` (\n  `id` int(10) unsigned NOT NULL AUTO_INCREMENT,\n  `name` varchar(50) DEFAULT NULL,\n  PRIMARY KEY (`id`)\n) ENGINE=InnoDB AUTO_INCREMENT=8 DEFAULT CHARSET=utf8\n1 row in set (0.00 sec)\n\n       Table: features\nCreate Table: CREATE TABLE `features` (\n  `id` int(10) unsigned NOT NULL AUTO_INCREMENT,\n  `name` varchar(50) DEFAULT NULL,\n  PRIMARY KEY (`id`),\n  UNIQUE KEY `unique_features_name` (`name`)\n) ENGINE=InnoDB AUTO_INCREMENT=8 DEFAULT CHARSET=utf8\n1 row in set (0.00 sec)\n\n       Table: rootfeatures\nCreate Table: CREATE TABLE `rootfeatures` (\n  `root_id` int(10) unsigned NOT NULL,\n  `feature_id` int(10) unsigned NOT NULL,\n  PRIMARY KEY (`root_id`,`feature_id`),\n  KEY `index_rootfeatures_root` (`root_id`),\n  KEY `index_rootfeatures_feature` (`feature_id`),\n  CONSTRAINT `rootfeatures_feature_fk` FOREIGN KEY (`feature_id`) REFERENCES `features` (`id`) ON DELETE NO ACTION ON UPDATE NO ACTION,\n  CONSTRAINT `rootfeatures_root_fk` FOREIGN KEY (`root_id`) REFERENCES `roots` (`id`) ON DELETE NO ACTION ON UPDATE NO ACTION\n) ENGINE=InnoDB DEFAULT CHARSET=utf8\n1 row in set (0.00 sec)\n\n       Table: roottitles\nCreate Table: CREATE TABLE `roottitles` (\n  `root_id` int(10) unsigned NOT NULL,\n  `title_id` int(10) unsigned NOT NULL,\n  PRIMARY KEY (`root_id`,`title_id`),\n  KEY `index_roottitles_root` (`root_id`),\n  KEY `index_roottitles_title` (`title_id`),\n  CONSTRAINT `roottitles_title_fk` FOREIGN KEY (`title_id`) REFERENCES `titles` (`id`) ON DELETE NO ACTION ON UPDATE NO ACTION,\n  CONSTRAINT `roottitles_root_fk` FOREIGN KEY (`root_id`) REFERENCES `roots` (`id`) ON DELETE NO ACTION ON UPDATE NO ACTION\n) ENGINE=InnoDB DEFAULT CHARSET=utf8\n1 row in set (0.00 sec)\n\n       Table: details\nCreate Table: CREATE TABLE `details` (\n  `id` int(10) unsigned NOT NULL AUTO_INCREMENT,\n  `title` varchar(50) DEFAULT NULL,\n  `feature_id` int(10) unsigned NOT NULL,\n  PRIMARY KEY (`id`),\n  KEY `index_details_feature` (`feature_id`)\n) ENGINE=InnoDB AUTO_INCREMENT=6 DEFAULT CHARSET=utf8\n1 row in set (0.00 sec)\n</code></pre>\n\n<p><strong>models.rb</strong></p>\n\n<pre><code>class Root\n  include DataMapper::Resource\n\n  property :id, Serial\n  property :name, String\n\n  has n, :roottitles\n  has n, :titles, :through =&gt; :roottitles\n\n  has n, :rootfeatures\n  has n, :features, :through =&gt; :rootfeatures\n\n  def list_of_titles\n    arr = []\n    self.titles.each {|t| arr&lt;&lt; t.name}\n    arr\n  end\n\n  def list_of_features\n    arr = []\n    self.features.each {|t| arr&lt;&lt; t.name }\n    arr\n  end\n\n  def list_of_features_with_details\n    arr = []\n    self.features.each {|t| arr&lt;&lt; {t.name =&gt; t.detail.title} unless t.detail.nil?}\n    arr\n  end\n\n  def full_description\n    h = {'titles' =&gt; self.list_of_titles, 'features' =&gt; self.list_of_features_with_details}\n    h\n  end\n\n  def full_json\n    self.full_description.to_json\n  end\n\nend\n\nclass Title\n  include DataMapper::Resource\n\n  property :id,           Serial\n  property :name,       String \n\n  has n, :roottitles\n  has n, :roots, :through =&gt; :roottitles\nend\n\nclass Feature\n  include DataMapper::Resource\n\n  property :id,         Serial\n  property :name,       String, :unique =&gt; true\n\n  has n, :rootfeatures\n  has n, :roots, :through =&gt; :rootfeatures\n\n  has 1, :detail\n\nend\n\nclass Roottitle\n  include DataMapper::Resource\n\n  belongs_to :root, :key =&gt; true\n  belongs_to :title, :key =&gt; true\nend\n\nclass Rootfeature\n  include DataMapper::Resource\n\n  belongs_to :root, :key =&gt; true\n  belongs_to :feature, :key =&gt; true\nend\n\nclass Detail\n  include DataMapper::Resource\n\n  property :id, Serial\n  property :title, String\n\n  belongs_to :feature\n\nend\n</code></pre>\n\n<p>Features data</p>\n\n<pre><code>2.2.0 :006 &gt; Feature.each {|t| print \"#{t.id} #{t.name} \\n\"}\n1 Shoots from distance \n2 Cuts inside \n3 Runs with ball often \n4 Runs with ball less \n5 Tries long range freekicks \n6 Argues with referee \n7 Tries killer balls\n</code></pre>\n\n<p>Details data</p>\n\n<pre><code>2.2.0 :010 &gt; Detail.each {|t| print \"#{t.id}  #{t.feature_id}  #{t.title} \\n\"}\n1  1  When no teammates around him \n2  2  When a wrong footed player on him \n3  7  When opponent team's defence is not blah blah \n4  3  He thinks he is portuguese num. 7 winger \n5  5  He is Juninho Some to titles.\n</code></pre>\n\n<p>Some data from titles</p>\n\n<pre><code>2.2.0 :005 &gt; Title.each {|t| print \"#{t.id} #{t.name} \\n\"}\n1 Lord \n2 Marquisse \n3 Duke \n4 Duchess \n5 Baron \n6 Baronesse \n7 Chevalier \n</code></pre>\n\n<p>Results.</p>\n\n<pre><code>2.2.0 :021 &gt; john = Root.get(1) # get root instance with id 1\n =&gt; #&lt;Root @id=1 @name=\"John\"&gt; \n2.2.0 :022 &gt; john.list_of_titles # returns array\n =&gt; [\"Marquisse\", \"Duke\", \"Duchess\"] \n2.2.0 :023 &gt; john.list_of_features #returns array\n =&gt; [\"Shoots from distance\", \"Cuts inside\", \"Runs with ball often\", \"Tries long range freekicks\", \"Tries killer balls\"] \n2.2.0 :024 &gt; john.list_of_features_with_details # array of hashes\n =&gt; [{\"Shoots from distance\"=&gt;\"When no teammates around him\"}, {\"Cuts inside\"=&gt;\"When a wrong footed player on him\"}, {\"Runs with ball often\"=&gt;\"He thinks he is portuguese num. 7 winger\"}, {\"Tries long range freekicks\"=&gt;\"He is Juninho\"}, {\"Tries killer balls\"=&gt;\"When opponent team's defence is not blah blah\"}] \n2.2.0 :025 &gt; john.full_description # returns hash\n =&gt; {\"titles\"=&gt;[\"Marquisse\", \"Duke\", \"Duchess\"], \"features\"=&gt;[{\"Shoots from distance\"=&gt;\"When no teammates around him\"}, {\"Cuts inside\"=&gt;\"When a wrong footed player on him\"}, {\"Runs with ball often\"=&gt;\"He thinks he is portuguese num. 7 winger\"}, {\"Tries long range freekicks\"=&gt;\"He is Juninho\"}, {\"Tries killer balls\"=&gt;\"When opponent team's defence is not blah blah\"}]} \n2.2.0 :027 &gt; print john.full_json # returns json (just calling .to_json on above method)\n{\"titles\":[\"Marquisse\",\"Duke\",\"Duchess\"],\"features\":[{\"Shoots from distance\":\"When no teammates around him\"},{\"Cuts inside\":\"When a wrong footed player on him\"},{\"Runs with ball often\":\"He thinks he is portuguese num. 7 winger\"},{\"Tries long range freekicks\":\"He is Juninho\"},{\"Tries killer balls\":\"When opponent team's defence is not blah blah\"}]} \n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 5325316, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-Cmw2w-0rDYk/AAAAAAAAAAI/AAAAAAAAAAw/Z83qamn6WaI/photo.jpg?sz=128", "display_name": "Gopalakrishnan B", "link": "https://stackoverflow.com/users/5325316/gopalakrishnan-b"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 67, "favorite_count": 0, "accepted_answer_id": 32993452, "answer_count": 1, "score": -1, "last_activity_date": 1444224346, "creation_date": 1444212416, "question_id": 32989457, "link": "https://stackoverflow.com/questions/32989457/mysql-table-structure", "title": "Mysql table structure", "body": "<p>I want to send a JSON response similar to this :</p>\n\n<pre><code>{\n\n{\"key\":\"Value\"},\n{\"key\":\"Value\"}\n\n\"title\":['john','doe'],\n\"abcd\":[\n{\"key\":\"Value\"},{\"key\":\"Value\"},{\"key\":\"Value\"}]\n\n}\n</code></pre>\n\n<p>How can I have my mysql table structure for this?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "activerecord"], "answers": [{"tags": [], "owner": {"reputation": 610, "user_id": 4172912, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc2a5123ca3954fbf7fc1cf4c3ed609c?s=128&d=identicon&r=PG", "display_name": "byakugie", "link": "https://stackoverflow.com/users/4172912/byakugie"}, "is_accepted": false, "score": 1, "last_activity_date": 1444386390, "creation_date": 1444386390, "answer_id": 33035864, "question_id": 32989271, "link": "https://stackoverflow.com/questions/32989271/display-all-columns-in-in-ruby-left-joins/33035864#33035864", "title": "Display all columns in in ruby left joins", "body": "<p>By default, Model.find selects all the fields from the result set using select *.</p>\n\n<p>You can specify the subset via :select option on the find.</p>\n\n<p>Please use this instead</p>\n\n<pre><code>Students.all(:select =&gt; \"students.*, user.*\", :joins =&gt; \"LEFT JOIN user on students.id =  cards.id\")\n</code></pre>\n\n<p><a href=\"http://guides.rubyonrails.org/v2.3.8/active_record_querying.html\" rel=\"nofollow\">Source</a></p>\n"}], "owner": {"reputation": 731, "user_id": 3433309, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/6e0de05a16888e8d4c99602d345e7da4?s=128&d=identicon&r=PG&f=1", "display_name": "delpha", "link": "https://stackoverflow.com/users/3433309/delpha"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 68, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1444386390, "creation_date": 1444211899, "question_id": 32989271, "link": "https://stackoverflow.com/questions/32989271/display-all-columns-in-in-ruby-left-joins", "title": "Display all columns in in ruby left joins", "body": "<p>I am using rails 2 active record and I am trying to perform a left join on two tables. I have in issue in seeing the all columns names the tables. I only see the columns of one table</p>\n\n<pre><code>Students.all(:joins =&gt; \"LEFT JOIN user on students.id =  cards.id\")\n</code></pre>\n\n<p>The Sql generated by Active Records is: </p>\n\n<pre><code>SELECT `students`.* FROM `students`  LEFT JOIN cards on students.email = cards.id\n</code></pre>\n\n<p>One can notice here the the <code>SELECT</code> statement is only on <code>students</code> table.\nHow can I fetch the columns from the <code>cards</code> table as well?</p>\n\n<p>I am using ruby 1.8 and Rails 2.3.8</p>\n"}, {"tags": ["html", "css", "ruby-on-rails", "ruby"], "answers": [{"comments": [{"owner": {"reputation": 183, "user_id": 5417769, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/02c4f555951595514838609bfd48a7de?s=128&d=identicon&r=PG&f=1", "display_name": "Thrabbit", "link": "https://stackoverflow.com/users/5417769/thrabbit"}, "edited": false, "score": 0, "creation_date": 1444221171, "post_id": 32991497, "comment_id": 53809128, "body": "Works very well, the only tiny issue is that it returns the elements by it&#39;s &quot;nth-of-type&quot; number in the CSS path rather than by its id or class name which would be better in my case. So the path I get is html&gt;body&gt;div:nth-of-type(1)&gt;a, rather than html&gt;body&gt;div.someclass&gt;a .I guess I could work around that issue though. Thanks Robin for the heads up!"}], "tags": [], "owner": {"reputation": 6569, "user_id": 371530, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/UJz1r.jpg?s=128&g=1", "display_name": "Robin", "link": "https://stackoverflow.com/users/371530/robin"}, "is_accepted": true, "score": 0, "last_activity_date": 1444218720, "creation_date": 1444218720, "answer_id": 32991497, "question_id": 32989098, "link": "https://stackoverflow.com/questions/32989098/ruby-gem-or-snippet-to-find-full-css-path-of-anchor-tag/32991497#32991497", "title": "Ruby gem or snippet to find full CSS path of anchor tag", "body": "<p><a href=\"http://www.nokogiri.org/\" rel=\"nofollow\"><strong>Nokogiri</strong></a> can do this. It's an advanced XML/HTML parser for ruby. </p>\n\n<p>You simply select a node, like you do it in Chromes Developer Tool and get the css path from it by using the <a href=\"http://www.rubydoc.info/github/sparklemotion/nokogiri/Nokogiri%2FXML%2FNode%3Acss_path\" rel=\"nofollow\"><code>css_path()</code></a> method.</p>\n\n<pre><code>html_doc = Nokogiri::HTML(\"&lt;html&gt;&lt;body&gt;&lt;h1&gt;Hello Stackoverflow&lt;/h1&gt;&lt;/body&gt;&lt;/html&gt;\")\nhtml_doc.xpath(\"//body\").first.css_path\n</code></pre>\n"}], "owner": {"reputation": 183, "user_id": 5417769, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/02c4f555951595514838609bfd48a7de?s=128&d=identicon&r=PG&f=1", "display_name": "Thrabbit", "link": "https://stackoverflow.com/users/5417769/thrabbit"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 69, "favorite_count": 0, "accepted_answer_id": 32991497, "answer_count": 1, "score": 1, "last_activity_date": 1444218876, "creation_date": 1444211456, "last_edit_date": 1444218876, "question_id": 32989098, "link": "https://stackoverflow.com/questions/32989098/ruby-gem-or-snippet-to-find-full-css-path-of-anchor-tag", "title": "Ruby gem or snippet to find full CSS path of anchor tag", "body": "<p>I'm trying to achieve the following: I would like to find a ruby gem or function which given a link(or more generally an element on the page) on a page can return me the CSS path of that link (or more generally of that element).\nThat would be the equivalent of \"Copy CSS path\" in Google Chrome, but in a Ruby environment.</p>\n\n<p>For example, if you take: www.google.com, the RoR function/gem for the first anchor tag should return: <code>#gbw &gt; div &gt; div &gt; div.gb_Wd.gb_R.gb_be.gb_4d.gb_U &gt; div:nth-child(1) &gt; a</code></p>\n\n<p>Any way to achieve this in RoR?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "actionmailer", "wicked-pdf"], "comments": [{"owner": {"reputation": 1982, "user_id": 1081248, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/cd6c70e8b8153eb2cbaec373628ef394?s=128&d=identicon&r=PG", "display_name": "Arihant Godha", "link": "https://stackoverflow.com/users/1081248/arihant-godha"}, "edited": false, "score": 1, "creation_date": 1444211396, "post_id": 32988870, "comment_id": 53802751, "body": "Could you please check what is the size of the pdf ?"}, {"owner": {"reputation": 2041, "user_id": 688647, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/93221303bceb86c48625c55f72302ead?s=128&d=identicon&r=PG", "display_name": "Veer", "link": "https://stackoverflow.com/users/688647/veer"}, "reply_to_user": {"reputation": 1982, "user_id": 1081248, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/cd6c70e8b8153eb2cbaec373628ef394?s=128&d=identicon&r=PG", "display_name": "Arihant Godha", "link": "https://stackoverflow.com/users/1081248/arihant-godha"}, "edited": false, "score": 0, "creation_date": 1444214206, "post_id": 32988870, "comment_id": 53804459, "body": "hi, PDF with simple text &quot;Hello World!&quot; also giving same problem.."}, {"owner": {"reputation": 1982, "user_id": 1081248, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/cd6c70e8b8153eb2cbaec373628ef394?s=128&d=identicon&r=PG", "display_name": "Arihant Godha", "link": "https://stackoverflow.com/users/1081248/arihant-godha"}, "edited": false, "score": 0, "creation_date": 1444216981, "post_id": 32988870, "comment_id": 53806171, "body": "have you tried setting up the mime type ?"}, {"owner": {"reputation": 2041, "user_id": 688647, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/93221303bceb86c48625c55f72302ead?s=128&d=identicon&r=PG", "display_name": "Veer", "link": "https://stackoverflow.com/users/688647/veer"}, "reply_to_user": {"reputation": 1982, "user_id": 1081248, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/cd6c70e8b8153eb2cbaec373628ef394?s=128&d=identicon&r=PG", "display_name": "Arihant Godha", "link": "https://stackoverflow.com/users/1081248/arihant-godha"}, "edited": false, "score": 0, "creation_date": 1444217904, "post_id": 32988870, "comment_id": 53806809, "body": "@ArihantGodha how to set mime type? through initializers? I have set through initializer"}, {"owner": {"reputation": 1982, "user_id": 1081248, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/cd6c70e8b8153eb2cbaec373628ef394?s=128&d=identicon&r=PG", "display_name": "Arihant Godha", "link": "https://stackoverflow.com/users/1081248/arihant-godha"}, "edited": false, "score": 0, "creation_date": 1444219526, "post_id": 32988870, "comment_id": 53807910, "body": "For this you have to create a template first and generate the attachment separately. Pass the file name and content and Action Mailer and the Mail gem will automatically guess the mime_type, set the encoding and create the attachment.  attachments[&#39;filename.jpg&#39;] = File.read(&#39;/path/to/filename.jpg&#39;). Please refer this <a href=\"http://stackoverflow.com/questions/12339314/sending-email-with-attachments\" title=\"sending email with attachments\">stackoverflow.com/questions/12339314/&hellip;</a>"}, {"owner": {"reputation": 2041, "user_id": 688647, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/93221303bceb86c48625c55f72302ead?s=128&d=identicon&r=PG", "display_name": "Veer", "link": "https://stackoverflow.com/users/688647/veer"}, "reply_to_user": {"reputation": 1982, "user_id": 1081248, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/cd6c70e8b8153eb2cbaec373628ef394?s=128&d=identicon&r=PG", "display_name": "Arihant Godha", "link": "https://stackoverflow.com/users/1081248/arihant-godha"}, "edited": false, "score": 0, "creation_date": 1444226032, "post_id": 32988870, "comment_id": 53812913, "body": "@ArihantGodha added updated code.. filename is .pdf so, I hope it will automatically guess mime type.."}], "owner": {"reputation": 2041, "user_id": 688647, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/93221303bceb86c48625c55f72302ead?s=128&d=identicon&r=PG", "display_name": "Veer", "link": "https://stackoverflow.com/users/688647/veer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 451, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1444225967, "creation_date": 1444210762, "last_edit_date": 1495540319, "question_id": 32988870, "link": "https://stackoverflow.com/questions/32988870/rails-4-actionmailer-wicked-pdf", "title": "Rails 4, ActionMailer &amp; Wicked PDF", "body": "<p><strong>Controller method</strong></p>\n\n<pre><code>def email_pdf\n    @job = Job.find_by_id(params[:id].to_i)\n    job_pdf = WickedPdf.new.pdf_from_string(render_to_string(:pdf =&gt; 'job', :template =&gt; 'job/show.pdf.erb', layout: 'mailer.html.erb'))\n    JobMailer.send_jobs_email(params[:id].to_i, 'vir.jain@gmail.com', 'Mahavir Jain', job_pdf).deliver_now\n\n    respond_to do |format|\n        format.json do\n            render :json =&gt; {:success =&gt; true}, :status =&gt; 200\n        end\n    end\n\nend\n</code></pre>\n\n<p><strong>Job Mailer</strong></p>\n\n<pre><code>class JobMailer &lt; ApplicationMailer\n    def send_jobs_email(job_id, email, name, job_pdf)\n        @name = name\n        @job = Job.find_by_id(job_id)\n        puts 'hello1'\n        attachments['job'] = job_pdf\n        puts @name\n        mail(to: email, subject: 'Job', from: 'info@janatrak.com', from_name: 'JanaTrak Admin')\n    end\nend\n</code></pre>\n\n<p><strong>Output</strong></p>\n\n<pre><code>Rendered job/show.pdf.erb within layouts/mailer.html.erb (15.0ms)\n\"***************[\\\"/usr/local/bin/wkhtmltopdf\\\", \\\"-q\\\", \\\"file:///var/folders/dk/t3scf65x5vx23qq1fsm53s3r0000gn/T/wicked_pdf20151007-4801-h2de03.html\\\", \\\"/var/folders/dk/t3scf65x5vx23qq1fsm53s3r0000gn/T/wicked_pdf_generated_file20151007-4801-7uwh23.pdf\\\"]***************\"\n\"***************[\\\"/usr/local/bin/wkhtmltopdf\\\", \\\"-q\\\", \\\"file:///var/folders/dk/t3scf65x5vx23qq1fsm53s3r0000gn/T/wicked_pdf20151007-4801-mp6b6i.html\\\", \\\"/var/folders/dk/t3scf65x5vx23qq1fsm53s3r0000gn/T/wicked_pdf_generated_file20151007-4801-3bayit.pdf\\\"]***************\"\n\nRendered job_mailer/send_jobs_email.html.erb within layouts/mailer (0.1ms)\n[{\"email\"=&gt;\"vir.jain@gmail.com\", \"status\"=&gt;\"sent\", \"_id\"=&gt;\"dc93087c39a949de827df06a1edb116e\", \"reject_reason\"=&gt;nil}]\n</code></pre>\n\n<p><strong>Problem</strong></p>\n\n<p>From output, I can see, I am able to generate pdf properly but for some reason, it's not sending pdf as attachment. Also it's not sending email content. But when I remove attachment from code, it do properly send content of email.</p>\n\n<p>I did checked\n<a href=\"https://stackoverflow.com/questions/5421615/rails-3-actionmailer-and-wicked-pdf\">Rails 3 ActionMailer and Wicked_PDF</a>\nand tried both solution but none worked.</p>\n\n<p>I'm using rails 4.2, ruby 2.1.2, wkhtmltopdf 0.12.2.1 (with patched qt).</p>\n\n<p>Any help is really appreciated</p>\n\n<p>***************** UPDATE ************************</p>\n\n<p><strong>Controller Method</strong></p>\n\n<pre><code>def email_pdf\n        @job = Job.find_by_id(params[:id].to_i)\n        self.instance_variable_set(:@lookup_context, nil)\n        self.instance_variable_set(:@_lookup_context, nil)\n        job_pdf = WickedPdf.new.pdf_from_string(render_to_string(:template =&gt; 'job/show.pdf.erb', layout: 'mailer.html.erb'))\n        #job_pdf = WickedPdf.new.pdf_from_string('&lt;h1&gt;Hello There!&lt;/h1&gt;')\n        save_path = Rails.root.join('pdfs','job.pdf')\n        dir = File.dirname(save_path)\n        FileUtils.mkdir_p(dir) unless File.directory?(dir)\n        File.open(save_path, 'wb') do |file|\n            file &lt;&lt; job_pdf\n        end\n        JobMailer.send_jobs_email(params[:id].to_i, 'vir.jain@gmail.com', 'Mahavir Jain', save_path).deliver_now\n\n        respond_to do |format|\n            format.json do\n                render :json =&gt; {:success =&gt; true}, :status =&gt; 200\n            end\n        end\n\n    end\n</code></pre>\n\n<p><strong>Mailer Method</strong></p>\n\n<pre><code>def send_jobs_email(job_id, email, name, job_pdf)\n        @name = name\n        @job = Job.find_by_id(job_id)\n        puts 'hello1'\n        attachments['job.pdf'] = File.read(job_pdf)\n        puts job_pdf\n        mail(to: email, subject: 'Job', from: 'info@janatrak.com', from_name: 'JanaTrak Admin')\n    end\n</code></pre>\n\n<p>PDF is generating properly &amp; i can see saved pdf.. But again somehow actionmailer not attaching pdf as well as not displaying content..</p>\n\n<p>Am I anything missing related to actionmailer attachment?</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "answers": [{"comments": [{"owner": {"reputation": 73119, "user_id": 1143732, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/mFUOI.jpg?s=128&g=1", "display_name": "Richard Peck", "link": "https://stackoverflow.com/users/1143732/richard-peck"}, "edited": false, "score": 1, "creation_date": 1444211694, "post_id": 32988821, "comment_id": 53802946, "body": "Pavanmeister strikes again, +1 from me!"}], "tags": [], "owner": {"reputation": 32131, "user_id": 2346461, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/i3xAf.jpg?s=128&g=1", "display_name": "Pavan", "link": "https://stackoverflow.com/users/2346461/pavan"}, "is_accepted": true, "score": 4, "last_activity_date": 1444210611, "creation_date": 1444210611, "answer_id": 32988821, "question_id": 32988781, "link": "https://stackoverflow.com/questions/32988781/rails-4-1-argumenterror-in-episodesnew/32988821#32988821", "title": "Rails 4.1 ArgumentError in Episodes#new", "body": "<blockquote>\n  <p>ArgumentError in Episodes#new , undefined method `title' for\n  nil:NilClass</p>\n</blockquote>\n\n<p>You have a typo, <code>&lt;%= t.text_field :title %&gt;</code> should be <code>&lt;%= f.text_field :title %&gt;</code></p>\n\n<p>You have to wrap the <code>form_helpers</code> with the correct <code>form object</code>.</p>\n"}], "owner": {"reputation": 529, "user_id": 3574178, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/6f9079310597136064b4b8197f7a8bf5?s=128&d=identicon&r=PG&f=1", "display_name": "Neil", "link": "https://stackoverflow.com/users/3574178/neil"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 38, "favorite_count": 0, "accepted_answer_id": 32988821, "answer_count": 1, "score": 1, "last_activity_date": 1444210611, "creation_date": 1444210496, "question_id": 32988781, "link": "https://stackoverflow.com/questions/32988781/rails-4-1-argumenterror-in-episodesnew", "title": "Rails 4.1 ArgumentError in Episodes#new", "body": "<p>Creating an app so users can create podcasts which works but want to allow them to upload individual episode. Created a migration, model, controller   &amp; added a partial form to allow users to add title, description of the episode but when i run this get error <strong>ArgumentError in Episodes#new</strong> , undefined method `title' for nil:NilClass**</p>\n\n<p>extracted source </p>\n\n<pre><code>&lt;div class=\"field\"&gt;\n        &lt;%= f.label :title %&gt;&lt;br&gt;\n        &lt;%= t.text_field :title %&gt;**&lt;--Error** \n      &lt;/div&gt;\n\n      &lt;div class=\"field\"&gt;\n</code></pre>\n\n<p>application trace </p>\n\n<pre><code>app/views/episodes/_form.html.erb:5:in `block in _app_views_episodes__form_html_erb__2559643881136171238_70136007429400'\napp/views/episodes/_form.html.erb:1:in `_app_views_episodes__form_html_erb__2559643881136171238_70136007429400'\napp/views/episodes/new.html.erb:22:in `_app_views_episodes_new_html_erb__3246403970483960928_70136007476220'\n</code></pre>\n\n<p>db migrate file </p>\n\n<pre><code>class CreateEpisodes &lt; ActiveRecord::Migration\n  def change\n    create_table :episodes do |t|\n      t.string :title\n      t.text :description\n      t.references :podcast, index: true\n\n      t.timestamps\n    end\n  end\nend\n</code></pre>\n\n<p>episodes controller </p>\n\n<pre><code>    class EpisodesController &lt; ApplicationController\n      before_action :authenticate_podcast!, except: [:show]\n      before_filter :require_permission\n      before_action :find_podcast\n      before_action :find_episode, only: [:show, :edit, :update, :destroy]\n\n      def new\n        @episode = @podcast.episodes.new\n      end\n\n      def show\n        @episodes = Episode.where(podcast_id: @podcast).order(\"created_at DESC\").limit(6).reject { |e| e.id == @episode.id }\n      end\n\n      def edit\n      end \n\n      def update\n        if @episode.update episode_params\n          redirect_to podcast_episode_path(@podcast, @episode), notice: \"Episode was succesfully updated!\"\n        else\n          render 'edit'\n        end\n      end\n\n      def create\n        @episode = @podcast.episodes.new episode_params\n        if @episode.save\n          redirect_to podcast_episode_path(@podcast, @episode)\n        else\n          render 'new'\n        end\n      end\n\n      def destroy\n        @episode.destroy\n        redirect_to root_path\n      end\n\n      private \n\n      def episode_params\n        params.require(:episode).permit(:title, :description, :episode_thumbnail, :mp3)\n      end\n\n      def find_podcast\n        @podcast = Podcast.find(params[:podcast_id])\n      end\n\n      def find_episode\n        @episode = Episode.find(params[:id])\n      end\n\n      def require_permission\n        @podcast = Podcast.find(params[:podcast_id])\n        if current_podcast != @podcast\n           redirect_to root_path, notice: \"sorry, you're not allowed to view that page\"\n        end\n      end\n    end\n\napplication controller.rb\n\n    class ApplicationController &lt; ActionController::Base\n      # Prevent CSRF attacks by raising an exception.\n      # For APIs, you may want to use :null_session instead.\n      protect_from_forgery with: :exception\n\n      before_filter :configure_permitted_parameters, if: :devise_controller?\n\n      protected\n\n      def configure_permitted_parameters\n        devise_parameter_sanitizer.for(:sign_up) { |u| u.permit(:email, :password, :password_confirmation, :title, :thumbnail)}\n        devise_parameter_sanitizer.for(:account_update) { |u| u.permit(:email, :password, :password_confirmation, :current_password,\n          :title, :thumbnail, :description, :itunes, :stitcher, :podbay)}\n      end\n    end\n</code></pre>\n\n<p>_form.html.erb</p>\n\n<pre><code>&lt;%= form_for ([@podcast, @episode]) do |f| %&gt;\n\n    &lt;div class=\"field\"&gt;\n      &lt;%= f.label :title %&gt;&lt;br&gt;\n      &lt;%= t.text_field :title %&gt;\n    &lt;/div&gt;\n\n    &lt;div class=\"field\"&gt;\n      &lt;%= f.label :description %&gt;&lt;br&gt;\n      &lt;%= f.text_area :description %&gt;\n    &lt;/div&gt;\n\n    &lt;div class=\"field\"&gt;\n      &lt;%= f.label :episode_thumbnail %&gt;&lt;br&gt;\n      &lt;%= f.file_field :episode_thumbnail %&gt;\n    &lt;/div&gt;\n\n\n    &lt;div class=\"field\"&gt;\n      &lt;%= f.label :mp3 %&gt;&lt;br&gt;\n      &lt;%= f.file_field :mp3 %&gt;\n    &lt;/div&gt;\n\n\n    &lt;%= f.submit class: \"button button_highlight button_block\" %&gt;\n&lt;% end %&gt;\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "refactoring", "cocoon-gem"], "comments": [{"owner": {"reputation": 9878, "user_id": 3315785, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/YsMo6.jpg?s=128&g=1", "display_name": "j-dexx", "link": "https://stackoverflow.com/users/3315785/j-dexx"}, "edited": false, "score": 0, "creation_date": 1444209906, "post_id": 32988510, "comment_id": 53801710, "body": "What do you mean <code>link_to_add_association</code> is empty? I&#39;ve used cocoon and never had to do build the items to get it to work.  What is in the model code with associations and the view code?"}, {"owner": {"reputation": 1100, "user_id": 1584736, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/7b8c4392528b20b47726142f7a20c7cd?s=128&d=identicon&r=PG", "display_name": "ngw", "link": "https://stackoverflow.com/users/1584736/ngw"}, "reply_to_user": {"reputation": 9878, "user_id": 3315785, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/YsMo6.jpg?s=128&g=1", "display_name": "j-dexx", "link": "https://stackoverflow.com/users/3315785/j-dexx"}, "edited": false, "score": 0, "creation_date": 1444211623, "post_id": 32988510, "comment_id": 53802906, "body": "It&#39;s pretty strange actually, I agree: basically it doesn&#39;t output anything. You can confirm that you were creating the records from scratch and not adding associations to something that was already there?"}], "answers": [{"tags": [], "owner": {"reputation": 73119, "user_id": 1143732, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/mFUOI.jpg?s=128&g=1", "display_name": "Richard Peck", "link": "https://stackoverflow.com/users/1143732/richard-peck"}, "is_accepted": true, "score": 1, "last_activity_date": 1444211629, "last_edit_date": 1495535219, "creation_date": 1444211629, "answer_id": 32989174, "question_id": 32988510, "link": "https://stackoverflow.com/questions/32988510/empty-link-to-add-association-for-cocoon-nested-attributes/32989174#32989174", "title": "Empty link_to_add_association for cocoon nested attributes", "body": "<blockquote>\n  <p>How can I improve this code?</p>\n</blockquote>\n\n<p>By putting the code in the model:</p>\n\n<pre><code>#app/models/facility.rb\nclass Facility &lt; ActiveRecord::Base\n   def construct_pet animal\n      model = animal.to_s.constantize\n      pet = pets.build animal: model.send(:new)\n      pet.pet_pictures.build\n      pet.animal_mixtures.build\n      pet\n   end\nend\n\n#app/controllers/facilities_controller.rb\nclass FacilitiesController &lt; ApplicationController\n   def new\n      @facility = Facility.find(params[:facility_slug]).construct_pet(:dog)\n   end\nend\n</code></pre>\n\n<p>The problem you have is not with cocoon, it's Rails. </p>\n\n<p>Let me explain:</p>\n\n<hr>\n\n<p><strong>fields_for</strong></p>\n\n<p>You must remember that rails is <em>object orientated</em>, in every sense of the term.</p>\n\n<p>This means that if you want to create dependent data (IE nested fields), you'll have to build the relevant associated model instances.</p>\n\n<p>There is no getting around this; if you don't build the models, Rails will simply not know how to construct the <code>fields_for</code> methods.</p>\n\n<p>When you create an associated model (IE pass data with <code>accepts_nested_attributes_for</code>), Rails has to have instances of the related models to pass. </p>\n\n<p>If you don't build the dependent models, you don't get any related fields, and thus it won't work.</p>\n\n<p><a href=\"https://github.com/nathanvda/cocoon#how-it-works\" rel=\"nofollow noreferrer\"><strong>Cocoon</strong> uses <code>fields_for</code></a> in exactly the same way as you would if you \"manually\" did it:</p>\n\n<p><a href=\"https://i.stack.imgur.com/s5Gsn.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/s5Gsn.png\" alt=\"enter image description here\"></a></p>\n\n<p>You can see from this <a href=\"http://railscasts.com/episodes/196-nested-model-form-part-1\" rel=\"nofollow noreferrer\">RailsCast</a> and <a href=\"https://stackoverflow.com/questions/32984498/rails-4-adding-removing-form-fields-with-multiple-models/32987860#32987860\">this answer I literally just wrote</a>.</p>\n\n<p>--</p>\n\n<blockquote>\n  <p>avoid explicitly call the build method</p>\n</blockquote>\n\n<p>N'est pas possible, mon ami. </p>\n\n<p>The <code>build</code> method creates instances of the instances associative models. If you don't want them to show (which is required to get <code>fields_for</code> working), you won't be able to use them.</p>\n"}], "owner": {"reputation": 1100, "user_id": 1584736, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/7b8c4392528b20b47726142f7a20c7cd?s=128&d=identicon&r=PG", "display_name": "ngw", "link": "https://stackoverflow.com/users/1584736/ngw"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 763, "favorite_count": 0, "accepted_answer_id": 32989174, "answer_count": 1, "score": 1, "last_activity_date": 1444211629, "creation_date": 1444209735, "question_id": 32988510, "link": "https://stackoverflow.com/questions/32988510/empty-link-to-add-association-for-cocoon-nested-attributes", "title": "Empty link_to_add_association for cocoon nested attributes", "body": "<p>I'm using simple_form with cocoon (<a href=\"https://github.com/nathanvda/cocoon\" rel=\"nofollow\">https://github.com/nathanvda/cocoon</a>) and everything works pretty well.</p>\n\n<p>The only thing I really really dislike is the fact that I have to initialize empty instances to make it work:</p>\n\n<pre><code>def new\n  @facility = Facility.friendly.find(params[:facility_slug])\n  @pet = @facility.pets.build(animal: Dog.new)\n  @pet.pet_pictures.build\n  @pet.animal.mixtures.build\nend\n</code></pre>\n\n<p>The last 2 lines are for making cocoon and link_to_add_association work, if I remove them link_to_add_association is completely empty.</p>\n\n<p>Does anybody know how to make this a little bit more idiomatic and avoid explicitly call the build method? How can I improve this code?</p>\n"}, {"tags": ["ruby-on-rails", "arrays", "ruby", "json"], "answers": [{"tags": [], "owner": {"reputation": 2591, "user_id": 2689541, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/efb8ec80d1ae2fd19fb7629da7e702db?s=128&d=identicon&r=PG&f=1", "display_name": "haradwaith", "link": "https://stackoverflow.com/users/2689541/haradwaith"}, "is_accepted": true, "score": 3, "last_activity_date": 1444210214, "creation_date": 1444210214, "answer_id": 32988685, "question_id": 32988338, "link": "https://stackoverflow.com/questions/32988338/parse-json-data-into-simple-array-ruby-on-rails-4/32988685#32988685", "title": "Parse Json data into simple array Ruby on Rails 4", "body": "<p><code>p params['places'][0]</code> is printing brackets because <code>params['places']</code> is a string. You are then printing the first character of the string.</p>\n\n<p>To get the content of the JSON, you first need to parse it, with for example the <code>json</code> gem.</p>\n\n<pre><code>require json\nplaces = JSON.parse(params['places'])\np places[0]\n</code></pre>\n"}], "owner": {"reputation": 2278, "user_id": 3728916, "user_type": "registered", "accept_rate": 49, "profile_image": "https://i.stack.imgur.com/Zmke4.jpg?s=128&g=1", "display_name": "ImranNaqvi", "link": "https://stackoverflow.com/users/3728916/imrannaqvi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1268, "favorite_count": 0, "accepted_answer_id": 32988685, "answer_count": 1, "score": 1, "last_activity_date": 1444210214, "creation_date": 1444209306, "question_id": 32988338, "link": "https://stackoverflow.com/questions/32988338/parse-json-data-into-simple-array-ruby-on-rails-4", "title": "Parse Json data into simple array Ruby on Rails 4", "body": "<p>I got the following json array in the ajax call like this </p>\n\n<pre><code>item    restaurants\nplaces  [{\"geometry\":{\"location\":{\"H\":31.485241,\"L\":74.30220800000006}},\"icon\":\"https://maps.gstatic.com/mapfiles\n/place_api/icons/restaurant-71.png\",\"id\":\"f8d9edcb5068bcd868e225429e881a351a5e2795\",\"name\":\"Subway\",\"opening_hours\"\n:{\"open_now\":true,\"weekday_text\":[]},\"photos\":[{\"height\":720,\"html_attributions\":[\"&lt;a href=\\\"https:/\n/maps.google.com/maps/contrib/116044146831530051317\\\"&gt;Adnan Fayyaz&lt;/a&gt;\"],\"width\":960}],\"place_id\":\"ChIJpaImhvEDGTkRw35DXlvUTIE\"\n,\"price_level\":1,\"rating\":2.9,\"reference\":\"CmRaAAAAr8mbHo-J1Wq8YTjzyiHRmwMkh40-26VJ6WqBxgjdAtT4v2HuT\nLb_OEYS7DUqHHIOe__ywd7S0E8oWgarwGD-DdlS1SVmrEo_Sl58o3PO528LAPGBSuN8luGTXLkKS0waEhCBQcGYE1ejtMRrY1F6zK5NGhTuIi9f4ht2CC0obNOpChdD1P_8yA\"\n,\"scope\":\"GOOGLE\",\"types\":[\"restaurant\",\"food\",\"point_of_interest\",\"establishment\"],\"vicinity\":\"A Block\n, Lahore\",\"html_attributions\":[]}]\n</code></pre>\n\n<p>Now when i do <code>p params[\"item\"]</code> in the console it gives me 'restaurants' (correct) when i do <code>p params[\"places\"]</code> it gives me the whole response (which is again correct) but when i try to get (let's say) first geometry thing by typing <code>p params['places'][0]</code> it gives me just two brackets like  </p>\n\n<blockquote>\n  <p>[ <br> [</p>\n</blockquote>\n\n<p>and nothing else is shown . while my expecting result is first element in the array which is geometry thing . also p params['places'][0].geometry gives nil , why ? what am i missing</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "spree-auth-devise"], "answers": [{"tags": [], "owner": {"reputation": 366, "user_id": 1124177, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d20c3b09bb03d1c1c93e435f5324bbc9?s=128&d=identicon&r=PG", "display_name": "dipak gupta", "link": "https://stackoverflow.com/users/1124177/dipak-gupta"}, "is_accepted": true, "score": 1, "last_activity_date": 1444209121, "creation_date": 1444209121, "answer_id": 32988267, "question_id": 32988104, "link": "https://stackoverflow.com/questions/32988104/facing-issue-in-installing-spree-auth-devise-in-rails-4-2-4/32988267#32988267", "title": "Facing issue in installing spree_auth_devise in rails &#39;4.2.4&#39;", "body": "<p>Please try with this, in your gem file:</p>\n\n<pre><code>gem 'spree', '3.0.1'\ngem 'spree_auth_devise', github: 'spree/spree_auth_devise', branch: '3-0-stable'\n</code></pre>\n"}], "owner": {"reputation": 153, "user_id": 5137922, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/89c5a7b37a5ed23f5d722a5eac1d5dd3?s=128&d=identicon&r=PG&f=1", "display_name": "user123", "link": "https://stackoverflow.com/users/5137922/user123"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 85, "favorite_count": 0, "accepted_answer_id": 32988267, "answer_count": 1, "score": 1, "last_activity_date": 1444209121, "creation_date": 1444208740, "question_id": 32988104, "link": "https://stackoverflow.com/questions/32988104/facing-issue-in-installing-spree-auth-devise-in-rails-4-2-4", "title": "Facing issue in installing spree_auth_devise in rails &#39;4.2.4&#39;", "body": "<p>As I am new in spree in my gem file I have included </p>\n\n<pre><code>gem 'spree'\ngem 'spree_auth_devise'\n</code></pre>\n\n<p>and run bundle install\nI get error:</p>\n\n<blockquote>\n  <p>Bundler could not find compatible versions for gem \"railties\":   In\n  Gemfile:\n      spree_auth_devise (>= 0) ruby depends on\n        devise (~> 2.0.4) ruby depends on\n          railties (~> 3.1) ruby</p>\n\n<pre><code>sass-rails (~&gt; 5.0) ruby depends on\n  railties (4.2.4)\n</code></pre>\n</blockquote>\n\n<p>Please help me out how to solve this</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "haml"], "answers": [{"comments": [{"owner": {"reputation": 5835, "user_id": 558777, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/YK58K.jpg?s=128&g=1", "display_name": "Ahmad Ajmi", "link": "https://stackoverflow.com/users/558777/ahmad-ajmi"}, "edited": false, "score": 0, "creation_date": 1444217530, "post_id": 32990920, "comment_id": 53806569, "body": "Exactly! Using the regex fixed the problem. Thanks so much Deepak"}], "tags": [], "owner": {"reputation": 19261, "user_id": 4758119, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/F4dJY.jpg?s=128&g=1", "display_name": "Deepak Mahakale", "link": "https://stackoverflow.com/users/4758119/deepak-mahakale"}, "is_accepted": true, "score": 3, "last_activity_date": 1444217035, "creation_date": 1444217035, "answer_id": 32990920, "question_id": 32987973, "link": "https://stackoverflow.com/questions/32987973/add-space-between-elements-using-sanitize-and-truncate-in-rails/32990920#32990920", "title": "Add space between elements using sanitize and truncate in Rails", "body": "<p>The problem is you dont have spaces around the tags i.e \nThe text is something like </p>\n\n<pre><code>include ActionView::Helpers::SanitizeHelper\n\n&gt; content = \"&lt;p&gt;this&lt;/p&gt;&lt;p&gt;is&lt;/p&gt;&lt;p&gt;great&lt;/p&gt;&lt;p&gt;and&lt;/p&gt;&lt;p&gt;for&lt;/p&gt;&lt;p&gt;some&lt;/p&gt;&lt;p&gt;reason&lt;/p&gt;\"\n&gt; strip_tags(content)\n&gt; \"thisisgreatandforsomereason\"\n\n&gt; content = \"&lt;p&gt;this &lt;/p&gt;&lt;p&gt;is &lt;/p&gt;&lt;p&gt;great &lt;/p&gt;&lt;p&gt;and &lt;/p&gt;&lt;p&gt;for &lt;/p&gt;&lt;p&gt;some &lt;/p&gt;&lt;p&gt;reason &lt;/p&gt;\"\n&gt; strip_tags(content)\n&gt; \"this is great and for some reason\"\n</code></pre>\n\n<p>either try giving spaces around the <code>&lt;p&gt;</code> tag or use regex to create spaces</p>\n\n<p>for ex </p>\n\n<pre><code>&gt; content = \"&lt;p&gt;this&lt;/p&gt;&lt;p&gt;is&lt;/p&gt;&lt;p&gt;great&lt;/p&gt;&lt;p&gt;and&lt;/p&gt;&lt;p&gt;for&lt;/p&gt;&lt;p&gt;some&lt;/p&gt;&lt;p&gt;reason&lt;/p&gt;\"\n&gt; strip_tags(content.gsub('&lt;/p&gt;', ' &lt;/p&gt;')) # Note the space in replaced content\n&gt; \"this is great and for some reason\"\n</code></pre>\n"}], "owner": {"reputation": 5835, "user_id": 558777, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/YK58K.jpg?s=128&g=1", "display_name": "Ahmad Ajmi", "link": "https://stackoverflow.com/users/558777/ahmad-ajmi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 896, "favorite_count": 0, "accepted_answer_id": 32990920, "answer_count": 1, "score": 3, "last_activity_date": 1444217035, "creation_date": 1444208297, "question_id": 32987973, "link": "https://stackoverflow.com/questions/32987973/add-space-between-elements-using-sanitize-and-truncate-in-rails", "title": "Add space between elements using sanitize and truncate in Rails", "body": "<p>Working on HTML content and trying to generate some excerpt for every post, I'm using the following code to sanitize and then truncate, but the issue is that the generated text without any spaces.</p>\n\n<pre><code>= sanitize(post.body, tags: []).truncate(155, separator: ' ...').html_safe\n</code></pre>\n\n<p>The following image form the editor, every word is a single <code>p</code>\n element, there may be any HTML element like images, video, .. . I only want to show only text.</p>\n\n<p><a href=\"https://i.stack.imgur.com/AjjyJ.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/AjjyJ.png\" alt=\"enter image description here\"></a></p>\n\n<p>The following image is the view, I want to add spaces between theses words (<code>p</code> elements)</p>\n\n<p><a href=\"https://i.stack.imgur.com/M1ojT.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/M1ojT.png\" alt=\"enter image description here\"></a></p>\n\n<p>Inspector</p>\n\n<p><a href=\"https://i.stack.imgur.com/p7LdB.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/p7LdB.png\" alt=\"enter image description here\"></a></p>\n\n<p>How I can sanitize, truncate the content and keeping the format </p>\n"}, {"tags": ["ruby", "rspec"], "answers": [{"tags": [], "owner": {"reputation": 16076, "user_id": 802618, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6111449042dd940f360673d25d61ea6b?s=128&d=identicon&r=PG", "display_name": "Kristj&#225;n", "link": "https://stackoverflow.com/users/802618/kristj%c3%a1n"}, "is_accepted": true, "score": 2, "last_activity_date": 1444312948, "creation_date": 1444312948, "answer_id": 33018057, "question_id": 32987398, "link": "https://stackoverflow.com/questions/32987398/rspec-how-can-i-spy-on-interactions-with-an-existing-object/33018057#33018057", "title": "RSpec: how can I spy on interactions with an existing object?", "body": "<p>You're looking for <a href=\"https://relishapp.com/rspec/rspec-mocks/docs/configuring-responses/calling-the-original-implementation\" rel=\"nofollow\"><code>and_call_original</code></a>.</p>\n\n<pre><code>cf_client = Aws::CloudFormation::Client.new(:stub_responses =&gt; true)\nexpect(cf_client).to_receive(:create_stack).and_call_original\nstack = described_class.new(\"name\", cf_client)\nstack.create\n</code></pre>\n"}], "owner": {"reputation": 306, "user_id": 2163565, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/60fd293984c98c779cc895b7a7b9f217?s=128&d=identicon&r=PG", "display_name": "Mike Williams", "link": "https://stackoverflow.com/users/2163565/mike-williams"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 274, "favorite_count": 0, "accepted_answer_id": 33018057, "answer_count": 1, "score": 1, "last_activity_date": 1444312948, "creation_date": 1444206657, "question_id": 32987398, "link": "https://stackoverflow.com/questions/32987398/rspec-how-can-i-spy-on-interactions-with-an-existing-object", "title": "RSpec: how can I spy on interactions with an existing object?", "body": "<p>I have an existing stub object, that I am using as a collaborator in my tests:</p>\n\n<pre><code>cf_client = Aws::CloudFormation::Client.new(:stub_responses =&gt; true)\nstack = described_class.new(\"name\", cf_client)\n</code></pre>\n\n<p>The stub object (<code>cf_client</code>) was <em>not</em> created using rspec-mocks; it's a fake implementation provided by the <code>aws-sdk</code> gem, and has useful properties.</p>\n\n<p>However, it doesn't provide message verification, so I am hoping to wrap in a proxy that records the received messages, so I can verify them later, while still delegating to the wrapped object, e.g.</p>\n\n<pre><code>cf_client = proxy_spy(Aws::CloudFormation::Client.new(:stub_responses =&gt; true))\nstack = described_class.new(\"name\", cf_client)\n\nstack.create\n\nexpect(cf_client).to have_received(:create_stack)\n</code></pre>\n\n<p>Want I want/need is the <code>proxy_spy</code> method. Does something like this exist? Can I use RSpec's verifying proxies here?</p>\n"}, {"tags": ["ruby"], "answers": [{"tags": [], "owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "is_accepted": false, "score": 2, "last_activity_date": 1444206766, "creation_date": 1444206766, "answer_id": 32987419, "question_id": 32987158, "link": "https://stackoverflow.com/questions/32987158/how-to-create-selection-with-yes-and-no-option-in-ruby/32987419#32987419", "title": "how to create selection with yes and no option in ruby", "body": "<p><code>gets</code> return the user's input including the newline character. Therefore the input will not match <code>'y'</code> or <code>'n'</code>. To remove the tailing newline call <a href=\"http://ruby-doc.org/core-2.2.0/String.html#method-i-chomp\" rel=\"nofollow\"><code>chomp</code></a> right after <code>gets</code>:</p>\n\n<pre><code>puts \"Want a parking decal? [y/n]:\"\nparking = gets.chomp\n</code></pre>\n\n<p>Btw. <code>else parking == 'n'</code> does not do what you expect. It is <code>elsif parking == 'n'</code> or just <code>else</code>.</p>\n"}], "owner": {"reputation": 13, "user_id": 5417381, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-ZqszkxY-378/AAAAAAAAAAI/AAAAAAAAPzM/BSYvB8VlSfo/photo.jpg?sz=128", "display_name": "newcomer", "link": "https://stackoverflow.com/users/5417381/newcomer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 832, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1444206766, "creation_date": 1444205955, "question_id": 32987158, "link": "https://stackoverflow.com/questions/32987158/how-to-create-selection-with-yes-and-no-option-in-ruby", "title": "how to create selection with yes and no option in ruby", "body": "<p>Create a Ruby program which calculates student fees\nI need to ask student to answer question like   \"Are you a state resident\", \"Want a parking decal?\" and the code will executed based on the user input.</p>\n\n<p>But I am having trouble with Yes/No selection part. whatever user input will only be select to No. which I do not know why is that happens. Thank you.</p>\n\n<pre><code>puts \"Are you a state resident[0] or not[1]:\"\nresident = gets\nresident = resident.to_i\n\ncase resident\n    when 0\n        enrollment_fee = 46.00\n    when 1\n        enrollment_fee = 335.00\n\nend\n\nputs \"'enrollment_fee' + #{enrollment_fee}\"\n\nputs \"Want a parking decal? [y/n]:\"\nparking = gets\nparking = parking.to_s\n\nputs parking\nif parking == 'y'\n    case semester\n        when 0,2\n            parking_decal = 85\n        when 1,3\n            parking_decal = 45\n        end\n\nelse parking == 'n'\n    parking_decal = 0.00\n</code></pre>\n\n<p>end </p>\n"}, {"tags": ["ruby", "file-upload", "input", "capybara"], "answers": [{"tags": [], "owner": {"reputation": 42014, "user_id": 2709090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/238c2b7cde2c817fc9a5a2b8eaa2ffad?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas Walpole", "link": "https://stackoverflow.com/users/2709090/thomas-walpole"}, "is_accepted": false, "score": 3, "last_activity_date": 1444227950, "creation_date": 1444227950, "answer_id": 32994900, "question_id": 32986393, "link": "https://stackoverflow.com/questions/32986393/capybara-can-not-find-file-input-field-to-attach-file/32994900#32994900", "title": "capybara can not find file input field to attach file", "body": "<p>Capybara can't find the file input because it's opacity is 0, so it's hidden on the page. - Your best bet is to use execute_script to modify the file inputs style attribute so it becomes visible before calling attach_file</p>\n"}, {"tags": [], "owner": {"reputation": 579, "user_id": 476608, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b822c684fcf7fc66f00785d0757d93e?s=128&d=identicon&r=PG", "display_name": "Vitaliy Grigoruk", "link": "https://stackoverflow.com/users/476608/vitaliy-grigoruk"}, "is_accepted": false, "score": 3, "last_activity_date": 1444248878, "creation_date": 1444248878, "answer_id": 33001641, "question_id": 32986393, "link": "https://stackoverflow.com/questions/32986393/capybara-can-not-find-file-input-field-to-attach-file/33001641#33001641", "title": "capybara can not find file input field to attach file", "body": "<p>If you have jQuery on your web page:</p>\n\n<pre><code>page.execute_script(\"$('input[name=file]').css('opacity','1')\")\n</code></pre>\n\n<p>If you don't have jQuery on your web page:</p>\n\n<pre><code>page.execute_script(\"document.getElementsByName('file')[0].style.opacity = 1\")\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 41, "user_id": 5571943, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4327cb3c074cd6fda560283bc0e22aed?s=128&d=identicon&r=PG&f=1", "display_name": "Independent", "link": "https://stackoverflow.com/users/5571943/independent"}, "is_accepted": false, "score": 4, "last_activity_date": 1447763424, "creation_date": 1447763424, "answer_id": 33756991, "question_id": 32986393, "link": "https://stackoverflow.com/questions/32986393/capybara-can-not-find-file-input-field-to-attach-file/33756991#33756991", "title": "capybara can not find file input field to attach file", "body": "<p>Try this:</p>\n\n<pre><code>page.driver.browser.all(:xpath, '//input[@name=\"file\"]')[0].send_keys('/home/userA/Desktop/chivalry-medieval-warfare.jpg')\n</code></pre>\n\n<p>or:</p>\n\n<pre><code>page.driver.browser.all(:xpath, '//input[@type=\"file\"]').last.send_keys('/home/userA/Desktop/chivalry-medieval-warfare.jpg') \n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 663, "user_id": 1451180, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/QOIm8.jpg?s=128&g=1", "display_name": "frenesim", "link": "https://stackoverflow.com/users/1451180/frenesim"}, "is_accepted": false, "score": 0, "last_activity_date": 1585917796, "creation_date": 1585917796, "answer_id": 61012185, "question_id": 32986393, "link": "https://stackoverflow.com/questions/32986393/capybara-can-not-find-file-input-field-to-attach-file/61012185#61012185", "title": "capybara can not find file input field to attach file", "body": "<p>As per <a href=\"https://rubydoc.info/github/jnicklas/capybara/master/Capybara%2FNode%2FActions:attach_file\" rel=\"nofollow noreferrer\">documentation</a> you can set <code>make_visible</code> option to true if the element is hidden somehow.</p>\n\n<pre><code># will attach file to a descendant file input element that has a name, id, or label_text matching 'My File'\npage.attach_file('My File', '/path/to/file.png', make_visible: true)\n</code></pre>\n"}], "owner": {"reputation": 31, "user_id": 2863939, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/5c8b74a3397c3c3574f581349416bd9e?s=128&d=identicon&r=PG&f=1", "display_name": "Slicey4", "link": "https://stackoverflow.com/users/2863939/slicey4"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2417, "favorite_count": 1, "answer_count": 4, "score": 2, "last_activity_date": 1585917796, "creation_date": 1444203482, "question_id": 32986393, "link": "https://stackoverflow.com/questions/32986393/capybara-can-not-find-file-input-field-to-attach-file", "title": "capybara can not find file input field to attach file", "body": "<p>I use ruby, cucumber and capybara.</p>\n\n<p>My html looks like this:</p>\n\n<pre><code>     &lt;tr&gt;\n        &lt;th&gt;\n            Promotion codes\n            &lt;/th&gt;&lt;td&gt;&lt;div class=\"t-zone\" id=\"promocodesZone\"&gt;\n            &lt;span style=\"display: inline-block;\"&gt;\n        &lt;span class=\"field\"&gt;&lt;label class=\"field-label\"&gt;File name:\n                &lt;span style=\"text-transform: none;\" class=\"status-ok\"&gt;&lt;/span&gt;&lt;/label&gt;&lt;/span&gt;\n        &lt;span class=\"field\"&gt;&lt;label class=\"field-label\"&gt;Codes available:\n                &lt;span style=\"text-transform: none;\" class=\"status-ok\"&gt;0&lt;/span&gt;&lt;/label&gt;&lt;/span&gt;\n        &lt;span class=\"field\"&gt;&lt;label class=\"field-label\"&gt;Codes used:\n                &lt;span style=\"text-transform: none;\" class=\"status-ok\"&gt;&lt;/span&gt;&lt;/label&gt;&lt;/span&gt;\n        &lt;span class=\"field\"&gt;&lt;label class=\"field-label\"&gt;Codes uploaded on:\n                &lt;span style=\"text-transform: none;\" class=\"status-ok\"&gt;&lt;/span&gt;&lt;/label&gt;&lt;/span&gt;\n        &lt;/span&gt;\n    &lt;div style=\"margin-bottom: 15px;\"&gt;&lt;div class=\"t-upload\"&gt;\n        &lt;div id=\"promocodesUpload\"&gt;\n        &lt;div class=\"qq-uploader\"&gt;\n        &lt;div class=\"qq-upload-drop-area\" style=\"display: none;\"&gt;&lt;span&gt;Drop &lt;/span&gt;&lt;/div&gt;\n        &lt;a class=\"qq-upload-button btn\" style=\"position: relative; overflow: hidden; direction: ltr;\"&gt;Upload\n&lt;input type=\"file\" name=\"file\" style=\"position: absolute; right: 0px; top: 0px; font-family: Arial; font-size: 118px; margin: 0px; padding: 0px; cursor: pointer; opacity: 0;\"&gt;&lt;/a&gt;\n&lt;ul class=\"qq-upload-list\"&gt;&lt;/ul&gt;&lt;/div&gt;&lt;/div&gt;\n        &lt;/div&gt;\n        &lt;/div&gt;\n        &lt;/div&gt;\n        &lt;/td&gt;\n        &lt;/tr&gt;\n</code></pre>\n\n<p>Basically what I need to do is to upload a file by clicking on link \"Upload\": </p>\n\n<pre><code>&lt;a class=\"qq-upload-button btn\" style=\"position: relative; overflow: hidden; direction: ltr;\"&gt;Upload&lt;input type=\"file\" name=\"file\" style=\"position: absolute; right: 0px; top: 0px; font-family: Arial; font-size: 118px; margin: 0px; padding: 0px; cursor: pointer; opacity: 0;\"&gt;&lt;/a&gt;\n</code></pre>\n\n<p>But I keep failing because capybara is unable to find the necessary element...\nI have tried many things already:</p>\n\n<pre><code>attach_file('//*[@id=\"promocodesUpload\"]/div/a/input', File.absolute_path($campaign_promotional_code_path))\n</code></pre>\n\n<p>Result: Unable to find file field \"//*[@id=\\\"promocodesUpload\\\"]/div/a/input\" (Capybara::ElementNotFound)</p>\n\n<p>and </p>\n\n<pre><code>within(:xpath, '//*[@id=\"promocodesUpload\"]/div/a') do\n   attach_file(\"input\", File.absolute_path($campaign_promotional_code_path))\n end\n</code></pre>\n\n<p>Result:  Unable to find file field \"input\" (Capybara::ElementNotFound)</p>\n\n<p>and</p>\n\n<pre><code>attach_file(\"Upload\", File.absolute_path($campaign_promotional_code_path)\n</code></pre>\n\n<p>Result: Unable to find file field \"Upload\" (Capybara::ElementNotFound)</p>\n\n<p>and</p>\n\n<pre><code>click_link(\"Upload\")\n</code></pre>\n\n<p>Result: Unable to find link \"Upload\" (Capybara::ElementNotFound)</p>\n\n<p>and</p>\n\n<p>Any help please? :)</p>\n"}, {"tags": ["ruby", "csv", "cucumber"], "comments": [{"owner": {"reputation": 4557, "user_id": 1847280, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4124a0c3fbe08db2e0021e3e09b76e7f?s=128&d=identicon&r=PG", "display_name": "Yevgeniy Anfilofyev", "link": "https://stackoverflow.com/users/1847280/yevgeniy-anfilofyev"}, "edited": false, "score": 0, "creation_date": 1444202191, "post_id": 32985944, "comment_id": 53796844, "body": "Define &#39;it doesn&#39;t like it&#39;."}, {"owner": {"reputation": 855, "user_id": 3759265, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/19a877022888fb56ba9c69541a3f09db?s=128&d=identicon&r=PG&f=1", "display_name": "Tom", "link": "https://stackoverflow.com/users/3759265/tom"}, "reply_to_user": {"reputation": 4557, "user_id": 1847280, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4124a0c3fbe08db2e0021e3e09b76e7f?s=128&d=identicon&r=PG", "display_name": "Yevgeniy Anfilofyev", "link": "https://stackoverflow.com/users/1847280/yevgeniy-anfilofyev"}, "edited": false, "score": 0, "creation_date": 1444202305, "post_id": 32985944, "comment_id": 53796927, "body": "It states it can&#39;t find the file and that &#39;last&#39; is an undefined method"}], "answers": [{"comments": [{"owner": {"reputation": 1082, "user_id": 5381605, "user_type": "registered", "accept_rate": 76, "profile_image": "https://lh5.googleusercontent.com/-5ZF_yJyjvcQ/AAAAAAAAAAI/AAAAAAAAAFM/lQbQAZxe2wo/photo.jpg?sz=128", "display_name": "binarymason", "link": "https://stackoverflow.com/users/5381605/binarymason"}, "reply_to_user": {"reputation": 855, "user_id": 3759265, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/19a877022888fb56ba9c69541a3f09db?s=128&d=identicon&r=PG&f=1", "display_name": "Tom", "link": "https://stackoverflow.com/users/3759265/tom"}, "edited": false, "score": 0, "creation_date": 1444219391, "post_id": 32987754, "comment_id": 53807814, "body": "@Tom if Yevgeniy answered your question, please mark his response as the answer. This will help others in the future."}], "tags": [], "owner": {"reputation": 4557, "user_id": 1847280, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4124a0c3fbe08db2e0021e3e09b76e7f?s=128&d=identicon&r=PG", "display_name": "Yevgeniy Anfilofyev", "link": "https://stackoverflow.com/users/1847280/yevgeniy-anfilofyev"}, "is_accepted": true, "score": 1, "last_activity_date": 1444207742, "creation_date": 1444207742, "answer_id": 32987754, "question_id": 32985944, "link": "https://stackoverflow.com/questions/32985944/open-file-with-date-and-time-stamp-ruby-cucumber/32987754#32987754", "title": "Open file with date and time stamp - Ruby Cucumber", "body": "<p>I think you should read more about file manipulations in ruby.\nFor your situation you could try something like:</p>\n\n<pre><code>file_name = Dir.glob(\"C:\\/Users\\/**\\/Downloads\\/company_#{export}_export_all_*.csv\").last\nfile = File.open(file_name, \"r\")\n...\n</code></pre>\n\n<p>Where, first line is getting all file names and takes only last one. And second line is opening this file in read only mode.</p>\n"}], "owner": {"reputation": 855, "user_id": 3759265, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/19a877022888fb56ba9c69541a3f09db?s=128&d=identicon&r=PG&f=1", "display_name": "Tom", "link": "https://stackoverflow.com/users/3759265/tom"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 151, "favorite_count": 0, "accepted_answer_id": 32987754, "answer_count": 1, "score": 0, "last_activity_date": 1444207742, "creation_date": 1444202000, "question_id": 32985944, "link": "https://stackoverflow.com/questions/32985944/open-file-with-date-and-time-stamp-ruby-cucumber", "title": "Open file with date and time stamp - Ruby Cucumber", "body": "<p>I'm working on the CSV again!! I'm trying to get Cucumber to open it, but my problem is, everytime I download a new CSV from the webpage being developed, it adds a date and time stamp like so:</p>\n\n<pre><code>company_123456_export_all_20151007_074608.csv\n</code></pre>\n\n<p>Is there a way I could tell Cucumber to just open the last one? I've tried:</p>\n\n<pre><code>File.open(C:/Users/**/Downloads/company_#{export}_export_all_*.csv).last\n</code></pre>\n\n<p>But it doesn't like it, any suggestions?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4"], "comments": [{"owner": {"reputation": 392, "user_id": 5017531, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/b6a19f8ef6254807120c84df262bfd3d?s=128&d=identicon&r=PG&f=1", "display_name": "mb_s88", "link": "https://stackoverflow.com/users/5017531/mb-s88"}, "edited": false, "score": 0, "creation_date": 1444202006, "post_id": 32985842, "comment_id": 53796735, "body": "Do you have login functionality already set up?"}, {"owner": {"reputation": 366, "user_id": 1124177, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d20c3b09bb03d1c1c93e435f5324bbc9?s=128&d=identicon&r=PG", "display_name": "dipak gupta", "link": "https://stackoverflow.com/users/1124177/dipak-gupta"}, "edited": false, "score": 0, "creation_date": 1444202585, "post_id": 32985842, "comment_id": 53797104, "body": "please paste your controller here."}], "answers": [{"comments": [{"owner": {"reputation": 5144, "user_id": 5411461, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/RyJfN.jpg?s=128&g=1", "display_name": "Haseeb Ahmad", "link": "https://stackoverflow.com/users/5411461/haseeb-ahmad"}, "edited": false, "score": 0, "creation_date": 1444203024, "post_id": 32986134, "comment_id": 53797341, "body": "I do by this way get &#39;/profile/:id&#39; =&gt; &quot;home#profile&quot; but when I do rake routes No prefix come for this. Which prefix I use?"}, {"owner": {"reputation": 392, "user_id": 5017531, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/b6a19f8ef6254807120c84df262bfd3d?s=128&d=identicon&r=PG&f=1", "display_name": "mb_s88", "link": "https://stackoverflow.com/users/5017531/mb-s88"}, "reply_to_user": {"reputation": 5144, "user_id": 5411461, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/RyJfN.jpg?s=128&g=1", "display_name": "Haseeb Ahmad", "link": "https://stackoverflow.com/users/5411461/haseeb-ahmad"}, "edited": false, "score": 1, "creation_date": 1444203347, "post_id": 32986134, "comment_id": 53797503, "body": "you can stipulate a prefix with &#39;as&#39; like so: get &quot;/profile/:id&quot; =&gt; &quot;home#profile&quot;, as: &quot;profile&quot;"}], "tags": [], "owner": {"reputation": 392, "user_id": 5017531, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/b6a19f8ef6254807120c84df262bfd3d?s=128&d=identicon&r=PG&f=1", "display_name": "mb_s88", "link": "https://stackoverflow.com/users/5017531/mb-s88"}, "is_accepted": true, "score": 1, "last_activity_date": 1444202673, "creation_date": 1444202673, "answer_id": 32986134, "question_id": 32985842, "link": "https://stackoverflow.com/questions/32985842/routing-issue-in-ruby-on-rails/32986134#32986134", "title": "Routing issue in ruby on rails", "body": "<p>If you want the url to stay <code>/profile</code> then you'll have to rely on your login implementation. I've not used devise myself, but according to the documentation it provides you with a <code>current_user</code> method to use in your controllers. So your <code>HomeController#profile</code> would look something like this:</p>\n\n<pre><code>def profile\n  @user = current_user\n  render :profile\nend\n</code></pre>\n\n<p>That way you don't need the client to send the id to you, because (as I understand it) this should be the profile page of the logged in user, which you should already have information about through devise.</p>\n\n<p>Otherwise you need to allow the id to come through the path by defining the route like so:</p>\n\n<pre><code>get '/profile/:id' =&gt; \"home#profile\"\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 5144, "user_id": 5411461, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/RyJfN.jpg?s=128&g=1", "display_name": "Haseeb Ahmad", "link": "https://stackoverflow.com/users/5411461/haseeb-ahmad"}, "edited": false, "score": 0, "creation_date": 1444203209, "post_id": 32986162, "comment_id": 53797440, "body": "When I do this nothing show related to that in rake routes"}, {"owner": {"reputation": 73119, "user_id": 1143732, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/mFUOI.jpg?s=128&g=1", "display_name": "Richard Peck", "link": "https://stackoverflow.com/users/1143732/richard-peck"}, "reply_to_user": {"reputation": 5144, "user_id": 5411461, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/RyJfN.jpg?s=128&g=1", "display_name": "Haseeb Ahmad", "link": "https://stackoverflow.com/users/5411461/haseeb-ahmad"}, "edited": false, "score": 0, "creation_date": 1444203250, "post_id": 32986162, "comment_id": 53797460, "body": "Show routes file and rake routes. I&#39;m not going to do your work for you, make an effort."}, {"owner": {"reputation": 8378, "user_id": 2076787, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2bfe965ab5ef94a0568bc61c36b46d4c?s=128&d=identicon&r=PG", "display_name": "D-side", "link": "https://stackoverflow.com/users/2076787/d-side"}, "edited": false, "score": 0, "creation_date": 1444208469, "post_id": 32986162, "comment_id": 53800699, "body": "I don&#39;t think the <code>path: &quot;profile&quot;</code> part is necessary... Is it?"}, {"owner": {"reputation": 73119, "user_id": 1143732, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/mFUOI.jpg?s=128&g=1", "display_name": "Richard Peck", "link": "https://stackoverflow.com/users/1143732/richard-peck"}, "edited": false, "score": 0, "creation_date": 1444209881, "post_id": 32986162, "comment_id": 53801692, "body": "Not in the bottom example. I should change that actually because I lifted it out of some of our own code"}], "tags": [], "owner": {"reputation": 73119, "user_id": 1143732, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/mFUOI.jpg?s=128&g=1", "display_name": "Richard Peck", "link": "https://stackoverflow.com/users/1143732/richard-peck"}, "is_accepted": false, "score": 2, "last_activity_date": 1444203095, "last_edit_date": 1444203095, "creation_date": 1444202768, "answer_id": 32986162, "question_id": 32985842, "link": "https://stackoverflow.com/questions/32985842/routing-issue-in-ruby-on-rails/32986162#32986162", "title": "Routing issue in ruby on rails", "body": "<p>This is because you're setting it as a <a href=\"http://guides.rubyonrails.org/routing.html#adding-member-routes\" rel=\"nofollow\"><em>member</em></a> route (it expects to pass the <code>id</code> for the controller). You need to replace it with a <a href=\"http://guides.rubyonrails.org/routing.html#adding-collection-routes\" rel=\"nofollow\"><em>collection</em></a> route, <em>if</em> you're going to nest it:</p>\n\n<pre><code>#config/routes.rb\ndevise_for :users ... do\n   get :profile, to: \"home#profile\", on: :collection, as: :profile #-&gt; url.com/users/profile\nend\n</code></pre>\n\n<p>You'd then be able to access the profile as follows:</p>\n\n<pre><code>&lt;%= link_to \"Profile\", users_profiles_path, if user_signed_in? %&gt;\n</code></pre>\n\n<p>If you wanted to make it so that you could access <code>profile</code> without nesting, your route would work:</p>\n\n<pre><code>#config/routes.rb\nget \"profile\", to: \"home#profile\", as: :profile\n\n&lt;%= link_to \"Profile\", profile_path if user_signed_in? %&gt;\n</code></pre>\n\n<hr>\n\n<p><strong>Controller</strong></p>\n\n<p>We have a setup similar to this, let me explain the controller setup...</p>\n\n<pre><code>#app/controllers/users_controller.rb\nclass UsersController &lt; ApplicationController \n   before_action :authenticate_user!\n\n   def edit\n      @user = current_user\n   end\n   def update\n      @user = current_user\n      ...\n   end\nend\n</code></pre>\n\n<p>This gives us the ability to use the following (we also use devise):</p>\n\n<pre><code>#config/routes.rb\nresource  :profile, path: \"profile\", controller: :users, path_names: { edit: \"\" }, only: [:edit, :update]   #-&gt; domain.com/profile\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 426, "user_id": 2575322, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/rM28X.jpg?s=128&g=1", "display_name": "Hemanth M C", "link": "https://stackoverflow.com/users/2575322/hemanth-m-c"}, "reply_to_user": {"reputation": 73119, "user_id": 1143732, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/mFUOI.jpg?s=128&g=1", "display_name": "Richard Peck", "link": "https://stackoverflow.com/users/1143732/richard-peck"}, "edited": false, "score": 0, "creation_date": 1444203897, "post_id": 32986170, "comment_id": 53797862, "body": "@RichPeck thanks for your reply yes i misunderstood the question."}], "tags": [], "owner": {"reputation": 426, "user_id": 2575322, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/rM28X.jpg?s=128&g=1", "display_name": "Hemanth M C", "link": "https://stackoverflow.com/users/2575322/hemanth-m-c"}, "is_accepted": false, "score": 0, "last_activity_date": 1444202792, "creation_date": 1444202792, "answer_id": 32986170, "question_id": 32985842, "link": "https://stackoverflow.com/questions/32985842/routing-issue-in-ruby-on-rails/32986170#32986170", "title": "Routing issue in ruby on rails", "body": "<p>in devise gem they had mentioned current_user model so use</p>\n\n<pre><code>current_user.id \n</code></pre>\n\n<p>to find the User id so that in your profile action do like this, and pass the user id of current user so that you can easily fetch his details</p>\n"}], "owner": {"reputation": 5144, "user_id": 5411461, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/RyJfN.jpg?s=128&g=1", "display_name": "Haseeb Ahmad", "link": "https://stackoverflow.com/users/5411461/haseeb-ahmad"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 48, "favorite_count": 0, "accepted_answer_id": 32986134, "answer_count": 3, "score": 1, "last_activity_date": 1444203095, "creation_date": 1444201669, "question_id": 32985842, "link": "https://stackoverflow.com/questions/32985842/routing-issue-in-ruby-on-rails", "title": "Routing issue in ruby on rails", "body": "<p>For user profile I make an action in home controller and I want that when user click on my profile link only shows www.abc.com/profile</p>\n\n<p>For it I do </p>\n\n<pre><code>get '/profile' =&gt; 'home#profile'\n</code></pre>\n\n<p>But now issue is that there is a need to send user id along with that.If I send it in format then url become </p>\n\n<pre><code>www.abc.com/profile.4\n</code></pre>\n\n<p>I want that url remains '/profile' and Id of user also send</p>\n"}, {"tags": ["ruby", "celluloid"], "comments": [{"owner": {"reputation": 5795, "user_id": 1169705, "user_type": "registered", "accept_rate": 29, "profile_image": "https://i.stack.imgur.com/ZWEMS.png?s=128&g=1", "display_name": "digitalextremist", "link": "https://stackoverflow.com/users/1169705/digitalextremist"}, "edited": false, "score": 0, "creation_date": 1453734030, "post_id": 32985793, "comment_id": 57719298, "body": "What ruby engine do you use?"}, {"owner": {"reputation": 5795, "user_id": 1169705, "user_type": "registered", "accept_rate": 29, "profile_image": "https://i.stack.imgur.com/ZWEMS.png?s=128&g=1", "display_name": "digitalextremist", "link": "https://stackoverflow.com/users/1169705/digitalextremist"}, "edited": false, "score": 0, "creation_date": 1453734410, "post_id": 32985793, "comment_id": 57719582, "body": "Ok, and have you tried using <code>celluloid-redis</code> to avoid EventMachine? <a href=\"https://github.com/celluloid/celluloid-redis\" rel=\"nofollow noreferrer\">github.com/celluloid/celluloid-redis</a>"}, {"owner": {"reputation": 5795, "user_id": 1169705, "user_type": "registered", "accept_rate": 29, "profile_image": "https://i.stack.imgur.com/ZWEMS.png?s=128&g=1", "display_name": "digitalextremist", "link": "https://stackoverflow.com/users/1169705/digitalextremist"}, "edited": false, "score": 0, "creation_date": 1453734841, "post_id": 32985793, "comment_id": 57719890, "body": "And have you tried <code>Rubinius</code> or <code>jRuby</code>?"}, {"owner": {"reputation": 1378, "user_id": 1079225, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/b008a4a10da1412e3fcf64c4de6ab76f?s=128&d=identicon&r=PG&f=1", "display_name": "zuba", "link": "https://stackoverflow.com/users/1079225/zuba"}, "reply_to_user": {"reputation": 5795, "user_id": 1169705, "user_type": "registered", "accept_rate": 29, "profile_image": "https://i.stack.imgur.com/ZWEMS.png?s=128&g=1", "display_name": "digitalextremist", "link": "https://stackoverflow.com/users/1169705/digitalextremist"}, "edited": false, "score": 0, "creation_date": 1453735297, "post_id": 32985793, "comment_id": 57720216, "body": "Nope, not yet. Cannot try at the moment"}], "owner": {"reputation": 1378, "user_id": 1079225, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/b008a4a10da1412e3fcf64c4de6ab76f?s=128&d=identicon&r=PG&f=1", "display_name": "zuba", "link": "https://stackoverflow.com/users/1079225/zuba"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 534, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1453734506, "creation_date": 1444201517, "last_edit_date": 1453734506, "question_id": 32985793, "link": "https://stackoverflow.com/questions/32985793/what-is-wrong-with-my-celluloid-actors", "title": "What is wrong with my Celluloid actors", "body": "<p>I'm playing with celluloid gem. The example works well, but when I press Ctrl-C I get the unexpected message:</p>\n\n<pre><code>^CD, [2015-10-07T09:53:19.784411 #16326] DEBUG -- : Terminating 8 actors...\n</code></pre>\n\n<p>and after few seconds, I get the error:</p>\n\n<pre><code>E, [2015-10-07T09:53:29.785162 #16326] ERROR -- : Couldn't cleanly terminate all actors in 10 seconds!\n/usr/local/rvm/gems/ruby-2.0.0-p353/gems/eventmachine-1.0.7/lib/eventmachine.rb:187:in `run_machine': Interrupt\n        from /usr/local/rvm/gems/ruby-2.0.0-p353/gems/eventmachine-1.0.7/lib/eventmachine.rb:187:in `run'\n</code></pre>\n\n<p>Strange that I create only 4 actors, not 8, and my TERM, INT signals handler isn't be called.</p>\n\n<pre><code>#!/usr/bin/env ruby\n\nrequire './config/environment'\n\nopts = CommandlineOptions.new.to_h\niface = opts[:iface] || '0.0.0.0'\nport  = opts[:port] || 3000\n\nApp.logger.info('Starting communication server')\n\nconnections = Connections.new\nlocal_inbox = LocalQueue.new\nauth_server = AuthServer.new(connections, local_inbox)\n\ninbox_service = InboxService.new('inbox', iface, port)\ninbox_service.async.process_inbox(local_inbox) # &lt;--------\n\nremote_outbox_name = \"outbox_#{iface}:#{port}\"\noutbox_service = OutboxService.new(connections)\noutbox_service.async.subscribe(remote_outbox_name) # &lt;--------\n\nconn_server_opts = { host: iface, port: port }\nconn_server_opts.merge!(auth_server.callbacks)\nconn_server = ConnServer.new(conn_server_opts)\n\n%W(INT TERM).each do |signal|\n  trap(signal) do\n    info(\"Shutting down...\")\n    conn_server.stop\n  end\nend\n\nconn_server.start\n</code></pre>\n\n<p>Here InboxService is an actor which creates another actor - there are 2 actors, then OutboxService also creates one actor, so I got created 4 actors.</p>\n\n<pre><code>require 'redis'\nrequire 'celluloid/current'\n\nclass InboxServiceActor\n  include Celluloid\n\n  def initialize(remote_inbox_name)\n    @remote_inbox_name = remote_inbox_name\n\n    create_redis_connection\n  end\n\n  def publish(full_msg)\n    @redis.publish(@remote_inbox_name, full_msg)\n  end\n\n  private\n\n  def create_redis_connection\n    @redis = Redis.new\n  end\nend\n\nrequire 'json'\nrequire 'redis'\nrequire 'celluloid/current'\n\nclass OutboxServiceActor\n  include Celluloid\n  include HasLoggerMethods\n\n  def initialize\n    create_redis_connection\n  end\n\n  def subscribe(remote_outbox_name, &amp;block)\n    @redis.subscribe(remote_outbox_name) do |on|\n      on.message do |_channel, full_msg|\n        debug(\"Outbox message received: '#{full_msg}'\")\n\n        hash = parse_msg(full_msg)\n\n        block.call(hash['signature'], hash['msg']) if message_valid?(hash)\n      end\n    end\n  end\n\n  private\n\n  def create_redis_connection\n    @redis = Redis.new\n  end\n\n  def parse_msg(full_msg)\n    JSON.parse(full_msg)\n  rescue JSON::ParserError\n    error('Outbox message JSON parse error')\n    nil\n  end\n\n  def message_valid?(msg)\n    msg.is_a?(Hash) &amp;&amp; msg.key?('signature') &amp;&amp; msg.key?('msg') ||\n      error('Invalid outbox message. Should '\\\n            'contain \"signature\" and \"msg\" keys') &amp;&amp; false\n  end\nend\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby"], "answers": [{"comments": [{"owner": {"reputation": 516, "user_id": 1010748, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/0177b2583d30009f1d7e7761a376e6f1?s=128&d=identicon&r=PG", "display_name": "Marcus Brunsten", "link": "https://stackoverflow.com/users/1010748/marcus-brunsten"}, "edited": false, "score": 0, "creation_date": 1444203392, "post_id": 32985884, "comment_id": 53797528, "body": "Works great! Thanks. What does yield really do? I guess capture makes it a string instead?"}, {"owner": {"reputation": 17254, "user_id": 920371, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/sJHH1.jpg?s=128&g=1", "display_name": "fivedigit", "link": "https://stackoverflow.com/users/920371/fivedigit"}, "reply_to_user": {"reputation": 516, "user_id": 1010748, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/0177b2583d30009f1d7e7761a376e6f1?s=128&d=identicon&r=PG", "display_name": "Marcus Brunsten", "link": "https://stackoverflow.com/users/1010748/marcus-brunsten"}, "edited": false, "score": 1, "creation_date": 1444209487, "post_id": 32985884, "comment_id": 53801419, "body": "<code>yield</code> does the same as <code>block.call</code> in this example, it executes a given block, and then it yields the resulting return value. <code>capture</code> returns what is being rendered inside the block so you can store it in a variable or do something with it."}], "tags": [], "owner": {"reputation": 17254, "user_id": 920371, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/sJHH1.jpg?s=128&g=1", "display_name": "fivedigit", "link": "https://stackoverflow.com/users/920371/fivedigit"}, "is_accepted": true, "score": 9, "last_activity_date": 1444201809, "creation_date": 1444201809, "answer_id": 32985884, "question_id": 32985379, "link": "https://stackoverflow.com/questions/32985379/appending-to-yield-in-content-tag/32985884#32985884", "title": "Appending to yield in content_tag", "body": "<p>You can use <a href=\"http://api.rubyonrails.org/classes/ActionView/Helpers/CaptureHelper.html#method-i-capture\" rel=\"noreferrer\"><code>capture</code></a> to achieve this:</p>\n\n<pre><code>def my_helper(content = nil, *args, &amp;block)\n  content_tag(:div, class: :my_wrapper) do\n    (block_given? ? capture(&amp;block) : content) + content_tag(:span, \"this is the end\", *args)\n  end\nend\n</code></pre>\n\n<p>And be sure to do this in your view:</p>\n\n<pre><code>&lt;%= my_helper do %&gt;\n  &lt;%= content_tag(:div, \"this is the beginning\") %&gt;\n&lt;%- end %&gt;\n</code></pre>\n"}], "owner": {"reputation": 516, "user_id": 1010748, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/0177b2583d30009f1d7e7761a376e6f1?s=128&d=identicon&r=PG", "display_name": "Marcus Brunsten", "link": "https://stackoverflow.com/users/1010748/marcus-brunsten"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1105, "favorite_count": 0, "accepted_answer_id": 32985884, "answer_count": 1, "score": 3, "last_activity_date": 1444201809, "creation_date": 1444200144, "question_id": 32985379, "link": "https://stackoverflow.com/questions/32985379/appending-to-yield-in-content-tag", "title": "Appending to yield in content_tag", "body": "<p>Lets say I have this helper in <code>application_helper.rb</code></p>\n\n<pre><code>def my_helper(content = nil, *args, &amp;block)\n   content_tag(:div, class: :my_wrapper) do\n      (block_given? ? yield : content) + content_tag(:span, \"this is the end\", *args)\n   end\nend\n</code></pre>\n\n<p>And i call it from a view with</p>\n\n<pre><code>my_helper do \n  content_tag(:div, \"this is the beginning\")\nend\n</code></pre>\n\n<p>I would expect the result to be something like</p>\n\n<pre><code>&lt;div class=\"my_wrapper\"&gt;\n    &lt;div&gt;\n       this it the beginning\n    &lt;/div&gt;\n    &lt;span&gt;\n       this is the end\n    &lt;/span&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p>But in fact, the span with the text \"this is the end\" will not be appended to the yield. </p>\n\n<p>If i were to use this line in the helper instead:</p>\n\n<pre><code>(block_given? ? content_tag(:div, &amp;block) : content) + content_tag(:span, \"this is the end\", *args)\n</code></pre>\n\n<p>I would get both content, but the yield would be wrapped inside another div. </p>\n\n<p>How could I add / append content after a yield, without wrapping the yield in a different content_tag? </p>\n"}, {"tags": ["ruby-on-rails", "ruby", "email", "actionmailer"], "comments": [{"owner": {"reputation": 1982, "user_id": 1081248, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/cd6c70e8b8153eb2cbaec373628ef394?s=128&d=identicon&r=PG", "display_name": "Arihant Godha", "link": "https://stackoverflow.com/users/1081248/arihant-godha"}, "edited": false, "score": 0, "creation_date": 1444200167, "post_id": 32985207, "comment_id": 53795754, "body": "You can try mandrill api&#39;s for bulk emailing"}], "answers": [{"tags": [], "owner": {"reputation": 7844, "user_id": 1520557, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/9KKRA.png?s=128&g=1", "display_name": "Drenmi", "link": "https://stackoverflow.com/users/1520557/drenmi"}, "is_accepted": false, "score": 0, "last_activity_date": 1444200326, "last_edit_date": 1495541200, "creation_date": 1444200326, "answer_id": 32985417, "question_id": 32985207, "link": "https://stackoverflow.com/questions/32985207/allow-user-to-send-email-to-many-different-dynamic-addresses/32985417#32985417", "title": "Allow user to send email to many different dynamic addresses", "body": "<p>Stuffing your BCC field with e-mails is a surefire way of getting flagged as spam. Googling \"<a href=\"https://www.google.com.sg/search?q=bcc%20spam&amp;oq=bcc%20spam&amp;aqs=chrome..69i57j0l5.1079j0j7&amp;sourceid=chrome&amp;es_sm=91&amp;ie=UTF-8\" rel=\"nofollow noreferrer\">BCC spam</a>\" will highlight this problem:</p>\n\n<blockquote>\n  <p>It is better to send an individual message to each recipient, rather than using multiple addresses in the BCC field because many spam filters (and many ISP's) automatically flag multiple recipients as spam.</p>\n</blockquote>\n\n<p>Instead, loop through the selected recipients, and send one e-mail per, as outlined in <a href=\"https://stackoverflow.com/questions/20072939/send-email-to-all-users-in-rails\">this answer</a>.</p>\n\n<pre><code>def calling_method\n  @recipients.each do |recipient|\n    send_email(recipient.email, recipient.name)\n  end\nend\n\ndef send_email(recipient_email, recipient_name)\n  mail(to: recipient_email, subject: recipient_name)\nend\n</code></pre>\n"}], "owner": {"reputation": 1284, "user_id": 1547080, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/e3172573fe0fd667a25b76a988120468?s=128&d=identicon&r=PG", "display_name": "ChrisDekker", "link": "https://stackoverflow.com/users/1547080/chrisdekker"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 78, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1444200326, "creation_date": 1444199446, "question_id": 32985207, "link": "https://stackoverflow.com/questions/32985207/allow-user-to-send-email-to-many-different-dynamic-addresses", "title": "Allow user to send email to many different dynamic addresses", "body": "<p>I am running a Ruby on Rails 3.2 application where users can, among other things, send emails to their clients that are represented in various ways in the database.</p>\n\n<p>Depending on what selection a user makes, this can be a dynamic list of 50-200 email addresses. The list can be different from day to day depending on numerous factors. Setting up a fixed mailing list at the email provider is not an option.</p>\n\n<p>What would be the best way to expose this functionality to my users?</p>\n\n<p>Currently, I am running a paid SMTP server behind the application that handles all the email, but I've been having SPAM flagging problems when I try to send a single email through them with 50-200 BCC's.</p>\n\n<p>I have also tried to give users the option to send email through their own email clients via a mailto: link. However, depending on browser, Windows version and email client used, a mailto: link does not work whenever it exceeds a certain amount of characters or addresses.</p>\n\n<p>What would be a best practice to solve this problem and offer this functionality to my clients?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "amazon-s3", "paperclip"], "answers": [{"tags": [], "owner": {"reputation": 1312, "user_id": 2280562, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/3a1ecbfd6f642d6f18eaa9a51edbed89?s=128&d=identicon&r=PG", "display_name": "Sebastian Corneliu V&#238;rlan", "link": "https://stackoverflow.com/users/2280562/sebastian-corneliu-v%c3%aerlan"}, "is_accepted": true, "score": 0, "last_activity_date": 1444210577, "creation_date": 1444210577, "answer_id": 32988808, "question_id": 32984963, "link": "https://stackoverflow.com/questions/32984963/upload-base64-encoded-image-with-paperclip-rails/32988808#32988808", "title": "Upload base64 encoded image with paperclip - Rails", "body": "<p>This is my solution, using Paperclip.io_adapters.for(image) where image is base64 string.</p>\n\n<pre><code>def create_image image, image_name, cat\n  signature = Paperclip.io_adapters.for(image)\n  base_name = File.basename(image_name,File.extname(image_name))\n  signature.original_filename = \"#{base_name}.jpg\"\n  media_img = Media::Image.new()\n  media_img.image = signature\n  media_img.company_id = current_company_id\n  media_img.type = cat\n  media_img.save\nend\n</code></pre>\n"}], "owner": {"reputation": 1312, "user_id": 2280562, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/3a1ecbfd6f642d6f18eaa9a51edbed89?s=128&d=identicon&r=PG", "display_name": "Sebastian Corneliu V&#238;rlan", "link": "https://stackoverflow.com/users/2280562/sebastian-corneliu-v%c3%aerlan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1011, "favorite_count": 0, "accepted_answer_id": 32988808, "answer_count": 1, "score": 0, "last_activity_date": 1444210577, "creation_date": 1444198404, "last_edit_date": 1444198947, "question_id": 32984963, "link": "https://stackoverflow.com/questions/32984963/upload-base64-encoded-image-with-paperclip-rails", "title": "Upload base64 encoded image with paperclip - Rails", "body": "<p>Using <a href=\"https://github.com/scottcheng/cropit\" rel=\"nofollow\">cropit</a> I get the image bas64 encode on rails through params.</p>\n\n<pre><code>  image = params['image'].gsub('data:image/jpeg;base64,', '')\n  decoded_file = Base64.decode64(image)\n</code></pre>\n\n<p>and then I save to amazon s3 with paperclip</p>\n\n<pre><code>   begin\n    file = Tempfile.new(['image', '.jpg'])\n    file.binmode\n    file.write decoded_file\n    unless params['image_id']\n      media_img = Media::Image.new()\n      media_img.image = file\n      if media_img.save\n        render json: {status: 'success'}\n      else\n        render json: {status: 'error'}\n      end\n    else\n      img = Media::Image.find(params['image_id'])\n      img.update_attribute(:image, file)\n      img.update_attribute(:name, params['image_name'])\n      render json: {status: 'success'}\n    end\n    file.close\n  ensure\n    file.unlink\n  end\n</code></pre>\n\n<p>The main problem is that the code is working only for jpeg images because I use gsub only for <code>data:image/jpeg;base64,</code> and when creating the Tempfile I created jpg <code>Tempfile.new(['image', '.jpg'])</code> . So how can I handle with best practice jpg, jpeg and png?</p>\n"}, {"tags": ["ios", "ruby", "macos", "console", "alamofire"], "answers": [{"comments": [{"owner": {"reputation": 2470, "user_id": 3853310, "user_type": "registered", "accept_rate": 47, "profile_image": "https://i.stack.imgur.com/wByTd.jpg?s=128&g=1", "display_name": "Ankahathara", "link": "https://stackoverflow.com/users/3853310/ankahathara"}, "edited": false, "score": 0, "creation_date": 1444211104, "post_id": 32988470, "comment_id": 53802535, "body": "How did you find that I need to install pod &quot;Alamofire&quot;, &quot;~&gt; 3.0.0-beta.3&quot; ? In Alamofire github page it says the latest version is pod &#39;Alamofire&#39;, &#39;~&gt; 3.0&#39;."}], "tags": [], "owner": {"reputation": 2468, "user_id": 2697074, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/kC8tM.jpg?s=128&g=1", "display_name": "Puvanarajan", "link": "https://stackoverflow.com/users/2697074/puvanarajan"}, "is_accepted": true, "score": 4, "last_activity_date": 1444209631, "creation_date": 1444209631, "answer_id": 32988470, "question_id": 32984573, "link": "https://stackoverflow.com/questions/32984573/getting-error-while-installing-pods-via-cocoapods-on-os-x-el-capitan/32988470#32988470", "title": "Getting error while installing pods via cocoapods on OS X El Capitan", "body": "<p>Try this </p>\n\n<p>your pod installing </p>\n\n<pre><code>sudo gem install -n /usr/local/bin cocoapods\n</code></pre>\n\n<p>And Alamofire installing </p>\n\n<pre><code>source 'https://github.com/CocoaPods/Specs.git'\nplatform :ios, '8.0'\nuse_frameworks!\n\npod \"Alamofire\", \"~&gt; 3.0.0-beta.3\"\n</code></pre>\n"}], "owner": {"reputation": 2470, "user_id": 3853310, "user_type": "registered", "accept_rate": 47, "profile_image": "https://i.stack.imgur.com/wByTd.jpg?s=128&g=1", "display_name": "Ankahathara", "link": "https://stackoverflow.com/users/3853310/ankahathara"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1555, "favorite_count": 1, "accepted_answer_id": 32988470, "answer_count": 1, "score": 3, "last_activity_date": 1500822202, "creation_date": 1444196352, "last_edit_date": 1500822202, "question_id": 32984573, "link": "https://stackoverflow.com/questions/32984573/getting-error-while-installing-pods-via-cocoapods-on-os-x-el-capitan", "title": "Getting error while installing pods via cocoapods on OS X El Capitan", "body": "<p>I am running on OSX version 10.11 and Have installed Xcode 7.</p>\n\n<p>I have created a new Xcode project and tried to install Alamofire using cocoa pod. </p>\n\n<p>Following is the log which I am getting to do so. Anyone has any clarifications for this issue ? Thanks</p>\n\n<p>Amiths-iMac:YakadaYakaDev Amith$ pod install</p>\n\n<p>Updating local specs repositories</p>\n\n<p>CocoaPods 0.39.0.rc.1 is available.\nTo update use: <code>gem install cocoapods --pre</code>\n[!] This is a test version we'd love you to try.</p>\n\n<p>For more information see <a href=\"http://blog.cocoapods.org\" rel=\"nofollow noreferrer\">http://blog.cocoapods.org</a>\nand the CHANGELOG for this version <a href=\"http://git.io/BaH8pQ\" rel=\"nofollow noreferrer\">http://git.io/BaH8pQ</a>.</p>\n\n<p>Analyzing dependencies</p>\n\n<pre><code>dyld: warning, LC_RPATH @executable_path/../../../../../../../SharedFrameworks in /Applications/Xcode.app/Contents/SharedFrameworks/DVTFoundation.framework/Versions/A/../../..//DVTInstrumentsFoundation.framework/Versions/A/DVTInstrumentsFoundation being ignored in restricted program because of @executable_path\ndyld: warning, LC_RPATH @executable_path/../lib in /Applications/Xcode.app/Contents/Frameworks/IDEFoundation.framework/Versions/A/../../../../Developer/Toolchains/XcodeDefault.xctoolchain/usr/lib/libclang.dylib being ignored in restricted program because of @executable_path\ndyld: warning, LC_RPATH @executable_path/../lib in /Applications/Xcode.app/Contents/Frameworks/IDEFoundation.framework/Versions/A/../../../../Developer/Toolchains/XcodeDefault.xctoolchain/usr/lib/libLTO.dylib being ignored in restricted program because of @executable_path\ndyld: warning, LC_RPATH @executable_path/../Frameworks in /Applications/Xcode.app/Contents/PlugIns/Xcode3Core.ideplugin/Contents/MacOS/Xcode3Core being ignored in restricted program because of @executable_path\n</code></pre>\n\n<p>[!] Unable to satisfy the following requirements:</p>\n\n<ul>\n<li><code>Alamofire (~&gt; 3.0)</code> required by <code>Podfile</code></li>\n</ul>\n\n<p><strong>UPDATE:</strong> \nWhen I update my pod file as below</p>\n\n<pre><code>source 'https://github.com/CocoaPods/Specs.git'\nplatform :ios, '8.0'\nuse_frameworks!\npod 'Alamofire', '~&gt; 2.0'\n</code></pre>\n\n<p>I am no longer getting the above error!</p>\n"}, {"tags": ["ruby", "iteration", "enumerators"], "comments": [{"owner": {"reputation": 10298, "user_id": 1205299, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/31432723c324f68bc45e86f197c4c1eb?s=128&d=identicon&r=PG", "display_name": "davidrac", "link": "https://stackoverflow.com/users/1205299/davidrac"}, "edited": false, "score": 0, "creation_date": 1444195916, "post_id": 32984414, "comment_id": 53793966, "body": "do you mean you want b to change whenever a changes?"}, {"owner": {"reputation": 124, "user_id": 2395680, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/uZ91F.jpg?s=128&g=1", "display_name": "Don Beto", "link": "https://stackoverflow.com/users/2395680/don-beto"}, "reply_to_user": {"reputation": 10298, "user_id": 1205299, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/31432723c324f68bc45e86f197c4c1eb?s=128&d=identicon&r=PG", "display_name": "davidrac", "link": "https://stackoverflow.com/users/1205299/davidrac"}, "edited": false, "score": 0, "creation_date": 1444196059, "post_id": 32984414, "comment_id": 53794023, "body": "Exactly! is that possible?"}, {"owner": {"reputation": 24729, "user_id": 2564200, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/a92dfcc9fcac72dabd4b1eefa0b5106e?s=128&d=identicon&r=PG&f=1", "display_name": "Santhosh", "link": "https://stackoverflow.com/users/2564200/santhosh"}, "edited": false, "score": 1, "creation_date": 1444196286, "post_id": 32984414, "comment_id": 53794088, "body": "You could do something like this <code>@a = 0; def b(x=@a); (x..x+6).step(3); end</code>"}, {"owner": {"reputation": 124, "user_id": 2395680, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/uZ91F.jpg?s=128&g=1", "display_name": "Don Beto", "link": "https://stackoverflow.com/users/2395680/don-beto"}, "reply_to_user": {"reputation": 24729, "user_id": 2564200, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/a92dfcc9fcac72dabd4b1eefa0b5106e?s=128&d=identicon&r=PG&f=1", "display_name": "Santhosh", "link": "https://stackoverflow.com/users/2564200/santhosh"}, "edited": false, "score": 0, "creation_date": 1444196629, "post_id": 32984414, "comment_id": 53794223, "body": "Yes, that&#39;s what I was doing, it works, thank you @Santhosh"}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 2, "creation_date": 1444199367, "post_id": 32984414, "comment_id": 53795369, "body": "<i>&quot;change the value of a with every iteration&quot;</i> - are you trying to enumerate a specific sequence of numbers? If so, please show the expected result. Maybe there&#39;s another way to achieve it."}], "answers": [{"comments": [{"owner": {"reputation": 124, "user_id": 2395680, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/uZ91F.jpg?s=128&g=1", "display_name": "Don Beto", "link": "https://stackoverflow.com/users/2395680/don-beto"}, "edited": false, "score": 0, "creation_date": 1444196867, "post_id": 32984543, "comment_id": 53794311, "body": "Thank you davidrac, I&#39;m resorting to a function like the one Santosh pointed at."}], "tags": [], "owner": {"reputation": 10298, "user_id": 1205299, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/31432723c324f68bc45e86f197c4c1eb?s=128&d=identicon&r=PG", "display_name": "davidrac", "link": "https://stackoverflow.com/users/1205299/davidrac"}, "is_accepted": true, "score": 1, "last_activity_date": 1444196227, "creation_date": 1444196227, "answer_id": 32984543, "question_id": 32984414, "link": "https://stackoverflow.com/questions/32984414/change-value-of-enumerator-in-ruby/32984543#32984543", "title": "Change value of Enumerator in Ruby", "body": "<p>When you write <code>b = (a..a+6).step(3)</code> the expression is evaluated to roughly this: <code>b = (0..6).step(3)</code>. Changing <code>a</code> after this line, won't change <code>b</code>. If you want to change <code>b</code> you need to somehow reassign it , the simplest way is after you had changed <code>a</code> to 1 repeat the assignment <code>b = (a..a+6).step(3)</code></p>\n"}], "owner": {"reputation": 124, "user_id": 2395680, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/uZ91F.jpg?s=128&g=1", "display_name": "Don Beto", "link": "https://stackoverflow.com/users/2395680/don-beto"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 72, "favorite_count": 0, "accepted_answer_id": 32984543, "answer_count": 1, "score": 0, "last_activity_date": 1444196227, "creation_date": 1444195510, "last_edit_date": 1444195874, "question_id": 32984414, "link": "https://stackoverflow.com/questions/32984414/change-value-of-enumerator-in-ruby", "title": "Change value of Enumerator in Ruby", "body": "<p>I have this code in irb:</p>\n\n<pre><code>2.2.1 :001 &gt; a = 0\n=&gt; 0 \n2.2.1 :002 &gt; b = (a..a+6).step(3)\n=&gt; #&lt;Enumerator: 0..6:step(3)&gt; \n2.2.1 :004 &gt; puts b.inspect\n#&lt;Enumerator: 0..6:step(3)&gt;\n=&gt; nil \n2.2.1 :005 &gt; a = 1\n=&gt; 1 \n2.2.1 :007 &gt; puts b.inspect\n#&lt;Enumerator: 0..6:step(3)&gt;\n=&gt; nil \n</code></pre>\n\n<p>What I want to achieve is to change the value of <code>a</code> with every iteration, but <code>a</code> stays with the same value, worse, Ruby just changes the value of <code>a</code> to 0. Is there a way to declare dynamic Enumerators?, ones that change values every time I change the values of my variables?\nThank you.</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 10326, "user_id": 2822004, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/ec7196aaa220767879f125eab493f7a2?s=128&d=identicon&r=PG&f=1", "display_name": "tumultous_rooster", "link": "https://stackoverflow.com/users/2822004/tumultous-rooster"}, "edited": false, "score": 1, "creation_date": 1444195919, "post_id": 32984120, "comment_id": 53793970, "body": "How can you do this? You can do it by googling your question, reading some documentation, then using the IDE of your choice, writing some code. If you do this and still can&#39;t figure it out, you can ask a question here that is thoughtful, clear, and shows that you&#39;ve put some effort into it. Then, maybe someone will provide you with some help."}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 5049907, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/5722a2e67523ebf3110055fde2d822e6?s=128&d=identicon&r=PG&f=1", "display_name": "Sumeet", "link": "https://stackoverflow.com/users/5049907/sumeet"}, "edited": false, "score": 0, "creation_date": 1444194659, "post_id": 32984162, "comment_id": 53793541, "body": "This code generating 10 buttons. for each div. means 100 buttons on pages."}, {"owner": {"reputation": 1835, "user_id": 4985645, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NMblv.png?s=128&g=1", "display_name": "Vishal JAIN", "link": "https://stackoverflow.com/users/4985645/vishal-jain"}, "reply_to_user": {"reputation": 1, "user_id": 5049907, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/5722a2e67523ebf3110055fde2d822e6?s=128&d=identicon&r=PG&f=1", "display_name": "Sumeet", "link": "https://stackoverflow.com/users/5049907/sumeet"}, "edited": false, "score": 0, "creation_date": 1444195039, "post_id": 32984162, "comment_id": 53793658, "body": "@Sumeet you are not mentioned any details in above quesion just ask for genrating dynamic class for button. not mentioned any div and other details. so firstly correct your quesion."}, {"owner": {"reputation": 1, "user_id": 5049907, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/5722a2e67523ebf3110055fde2d822e6?s=128&d=identicon&r=PG&f=1", "display_name": "Sumeet", "link": "https://stackoverflow.com/users/5049907/sumeet"}, "edited": false, "score": 0, "creation_date": 1444195276, "post_id": 32984162, "comment_id": 53793757, "body": "Hey, sorry for that. I have a main for each loop in that I have added that code. But if I remove your code from for each loop it works. Thanks."}, {"owner": {"reputation": 1835, "user_id": 4985645, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NMblv.png?s=128&g=1", "display_name": "Vishal JAIN", "link": "https://stackoverflow.com/users/4985645/vishal-jain"}, "reply_to_user": {"reputation": 1, "user_id": 5049907, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/5722a2e67523ebf3110055fde2d822e6?s=128&d=identicon&r=PG&f=1", "display_name": "Sumeet", "link": "https://stackoverflow.com/users/5049907/sumeet"}, "edited": false, "score": 0, "creation_date": 1444195355, "post_id": 32984162, "comment_id": 53793781, "body": "Ok if this code is useful to you then just accept the answer"}, {"owner": {"reputation": 531, "user_id": 4327377, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-0rdf8UzSkJ8/AAAAAAAAAAI/AAAAAAAAARg/5s_a9PQ0XRE/photo.jpg?sz=128", "display_name": "sghosh968", "link": "https://stackoverflow.com/users/4327377/sghosh968"}, "reply_to_user": {"reputation": 1, "user_id": 5049907, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/5722a2e67523ebf3110055fde2d822e6?s=128&d=identicon&r=PG&f=1", "display_name": "Sumeet", "link": "https://stackoverflow.com/users/5049907/sumeet"}, "edited": false, "score": 1, "creation_date": 1444197256, "post_id": 32984162, "comment_id": 53794466, "body": "just a small advice @sumeet it would be better if you move this iterations to some method in helper and call it in your view.Note: Its better to keep things like iterations out of the views."}], "tags": [], "owner": {"reputation": 1835, "user_id": 4985645, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NMblv.png?s=128&g=1", "display_name": "Vishal JAIN", "link": "https://stackoverflow.com/users/4985645/vishal-jain"}, "is_accepted": true, "score": 0, "last_activity_date": 1444194269, "creation_date": 1444194269, "answer_id": 32984162, "question_id": 32984120, "link": "https://stackoverflow.com/questions/32984120/assign-class-name-dynamically-loop-in-rails/32984162#32984162", "title": "Assign class name dynamically loop in rails?", "body": "<p>You can try this way:</p>\n\n<pre><code>&lt;% (1..10).each do |i| %&gt;\n &lt;button class='&lt;%= \"class#{i}\"%&gt;'&gt;&lt;/button&gt;\n&lt;% end %&gt;\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 5049907, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/5722a2e67523ebf3110055fde2d822e6?s=128&d=identicon&r=PG&f=1", "display_name": "Sumeet", "link": "https://stackoverflow.com/users/5049907/sumeet"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 234, "favorite_count": 0, "accepted_answer_id": 32984162, "answer_count": 1, "score": -3, "last_activity_date": 1444194269, "creation_date": 1444194039, "question_id": 32984120, "link": "https://stackoverflow.com/questions/32984120/assign-class-name-dynamically-loop-in-rails", "title": "Assign class name dynamically loop in rails?", "body": "<p>I want to add a class name dynamically from 1 to 10 to a button. Means it will show class1, class2 ... class10. How can I do this? </p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4"], "comments": [{"owner": {"reputation": 32131, "user_id": 2346461, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/i3xAf.jpg?s=128&g=1", "display_name": "Pavan", "link": "https://stackoverflow.com/users/2346461/pavan"}, "edited": false, "score": 1, "creation_date": 1444193091, "post_id": 32983918, "comment_id": 53793010, "body": "Possible duplicate of <a href=\"http://stackoverflow.com/questions/19120706/rails-erb-form-helper-options-for-select-selected\">rails erb form helper options_for_select :selected</a>"}], "answers": [{"tags": [], "owner": {"reputation": 392, "user_id": 5017531, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/b6a19f8ef6254807120c84df262bfd3d?s=128&d=identicon&r=PG&f=1", "display_name": "mb_s88", "link": "https://stackoverflow.com/users/5017531/mb-s88"}, "is_accepted": true, "score": 2, "last_activity_date": 1444193346, "creation_date": 1444193346, "answer_id": 32983999, "question_id": 32983918, "link": "https://stackoverflow.com/questions/32983918/select-form-helper-display-existing-value/32983999#32983999", "title": "Select form helper, display existing value", "body": "<p>the syntax is <code>select options_for_select([value1, value2, value3], default)</code> so in your case you can write this:</p>\n\n<pre><code>&lt;%= f.select :sex, options_for_select([['Male', 0], ['Female', 1], ['Other', 2], ['Undefined', 3]], @user.sex), {}, {class:\"form-control\"} %&gt;\n</code></pre>\n\n<p>assuming you have assigned @user.</p>\n"}, {"tags": [], "owner": {"reputation": 7898, "user_id": 3437900, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/blKgR.jpg?s=128&g=1", "display_name": "illusionist", "link": "https://stackoverflow.com/users/3437900/illusionist"}, "is_accepted": false, "score": 0, "last_activity_date": 1444193896, "creation_date": 1444193896, "answer_id": 32984095, "question_id": 32983918, "link": "https://stackoverflow.com/questions/32983918/select-form-helper-display-existing-value/32984095#32984095", "title": "Select form helper, display existing value", "body": "<p>try this</p>\n\n<pre><code>&lt;%= f.select :sex, options_for_select([['Male', 0], ['Female', 1], ['Other', 2], ['Undefined', 3]], ['Female', 1]), {}, {class:\"form-control\"} %&gt;\n</code></pre>\n\n<p>the <code>['Female', 1]</code> is the default value you set; you can change it :)</p>\n\n<p>the syntax is</p>\n\n<pre><code>select options_for_select([value1, value2, value3], default)\n</code></pre>\n\n<p>This method will respect the value that is set in the database while creating the record.</p>\n"}], "owner": {"reputation": 3995, "user_id": 1297248, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/TiaMw.jpg?s=128&g=1", "display_name": "Batman", "link": "https://stackoverflow.com/users/1297248/batman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 186, "favorite_count": 0, "accepted_answer_id": 32983999, "answer_count": 2, "score": 0, "last_activity_date": 1444193896, "creation_date": 1444192796, "question_id": 32983918, "link": "https://stackoverflow.com/questions/32983918/select-form-helper-display-existing-value", "title": "Select form helper, display existing value", "body": "<p>I have this helper for my user class: </p>\n\n<pre><code>&lt;%= f.select :sex, options_for_select([['Male', 0], ['Female', 1], ['Other', 2], ['Undefined', 3]]), {}, {class:\"form-control\"} %&gt;\n</code></pre>\n\n<p>When I load the form, everything is filled out except the :sex value. It defaults to the first.</p>\n"}, {"tags": ["javascript", "jquery", "ruby-on-rails", "ruby", "ruby-on-rails-4"], "comments": [{"owner": {"reputation": 32131, "user_id": 2346461, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/i3xAf.jpg?s=128&g=1", "display_name": "Pavan", "link": "https://stackoverflow.com/users/2346461/pavan"}, "edited": false, "score": 0, "creation_date": 1444192175, "post_id": 32983528, "comment_id": 53792737, "body": "Can you update the question with the params that are generated in the server logs?"}], "answers": [{"tags": [], "owner": {"reputation": 3590, "user_id": 1494245, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a50a2dcc33b58918f27664b7646d92b7?s=128&d=identicon&r=PG", "display_name": "Sean Huber", "link": "https://stackoverflow.com/users/1494245/sean-huber"}, "is_accepted": true, "score": 1, "last_activity_date": 1444192592, "creation_date": 1444192592, "answer_id": 32983896, "question_id": 32983528, "link": "https://stackoverflow.com/questions/32983528/how-to-pass-partial-forms-data-to-rails-action-with-javascript-without-neste/32983896#32983896", "title": "How to pass partial form&#39;s data to Rails action (with javascript &amp; without nested attributes)?", "body": "<p>Change your <code>app/views/users/_new_user.html.erb</code> file to the following contents:</p>\n\n<pre><code>&lt;label&gt;User&lt;/label&gt;\n&lt;br&gt;\n&lt;%= email_field_tag 'email[]', nil, class: 'email-input', id: \"email-input\" %&gt;\n</code></pre>\n\n<p>Notice that the first argument of <code>email_field_tag</code> (the name of the input field) has changed from <code>email</code> to <code>email[]</code>. This is a Rails' convention that will set <code>params[:email]</code> to an array.</p>\n\n<p>You can then modify <code>users_controller.rb</code> to something like this:</p>\n\n<pre><code>def send_email\n  params[:email].each do |email_address|\n    AddUserMailer.sign_up_email(current_user, email_address).deliver_now\n    redirect_to '/'\n  end\nend\n</code></pre>\n"}], "owner": {"reputation": 7975, "user_id": 1577357, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/9db0054df76cc4b80888ff713527a652?s=128&d=identicon&r=PG", "display_name": "Zulhilmi Zainudin", "link": "https://stackoverflow.com/users/1577357/zulhilmi-zainudin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 131, "favorite_count": 0, "accepted_answer_id": 32983896, "answer_count": 1, "score": 0, "last_activity_date": 1444192592, "creation_date": 1444190029, "question_id": 32983528, "link": "https://stackoverflow.com/questions/32983528/how-to-pass-partial-forms-data-to-rails-action-with-javascript-without-neste", "title": "How to pass partial form&#39;s data to Rails action (with javascript &amp; without nested attributes)?", "body": "<p>I'm creating a from to invite new users to sign up to my app. Only signed-up users can invite new users. Invited users will receive invitation email from signed up user.</p>\n\n<p>I got stucked when trying to add dynamic email input field. I'm able to add another field with jQuery help but I've no idea how to pass all <code>email</code> input data to my <code>send_email</code> action inside users_controller.rb file.</p>\n\n<p>I'm not planning to use <a href=\"http://api.rubyonrails.org/classes/ActiveRecord/NestedAttributes/ClassMethods.html\" rel=\"nofollow\">nested attributes</a> because I'm not saving anything to database.</p>\n\n<p><strong>app/views/users/add_users.html.erb</strong></p>\n\n<pre><code>&lt;%= form_tag(send_email_path, method: :post) do %&gt;\n    &lt;span id=\"fields\"&gt;\n        &lt;%= render \"new_user\" %&gt;\n    &lt;/span&gt;\n    &lt;%= button_tag(type: 'button', id: \"addBtn\") do %&gt;Add&lt;% end %&gt;\n&lt;% end %&gt;\n\n&lt;script&gt;\n    $(\"#addBtn\").click(function(){\n        $(\"#fields\").append(\"&lt;br/&gt;&lt;%= j render 'new_user' %&gt;\");\n    });\n&lt;/script&gt;\n</code></pre>\n\n<p><strong>app/views/users/_new_user.html.erb</strong></p>\n\n<pre><code>&lt;label&gt;User&lt;/label&gt;\n&lt;br&gt;\n&lt;%= email_field_tag 'email', nil, class: 'email-input', id: \"email-input\" %&gt;\n</code></pre>\n\n<p><strong>users_controller.rb</strong></p>\n\n<pre><code>def send_email\n\n    AddUserMailer.sign_up_email(current_user, params[:email]).deliver_now\n    redirect_to '/'\n\nend\n</code></pre>\n\n<p><strong>app/mailers/add_user_mailer.rb</strong></p>\n\n<pre><code>class AddUserMailer &lt; ApplicationMailer\n    default from: 'example@example.com'\n\n    def sign_up_email(user, address)\n        @url = \"http://localhost:3000/users/sign_up?sc=#{user.customer.secret_code}&amp;cust=#{user.customer.id}\"\n        mail(to: address, subject: \"Sign up\")\n    end\n\nend\n</code></pre>\n\n<p><strong>routes.rb</strong></p>\n\n<pre><code>get 'add_users' =&gt; \"users#add_users\"\npost 'send_email' =&gt; \"users#send_email\"\n</code></pre>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 95978, "user_id": 1079354, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/c17dd9cf3e2322be19639e96da9f3eb3?s=128&d=identicon&r=PG", "display_name": "Makoto", "link": "https://stackoverflow.com/users/1079354/makoto"}, "edited": false, "score": 1, "creation_date": 1444189499, "post_id": 32983374, "comment_id": 53791972, "body": "Are you doing this through some sort of web request? As in, are those query parameters?"}, {"owner": {"reputation": 21398, "user_id": 1136700, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/e484894210178f84679e4e35695ff8ac?s=128&d=identicon&r=PG", "display_name": "Adam Lee", "link": "https://stackoverflow.com/users/1136700/adam-lee"}, "reply_to_user": {"reputation": 95978, "user_id": 1079354, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/c17dd9cf3e2322be19639e96da9f3eb3?s=128&d=identicon&r=PG", "display_name": "Makoto", "link": "https://stackoverflow.com/users/1079354/makoto"}, "edited": false, "score": 0, "creation_date": 1444194591, "post_id": 32983374, "comment_id": 53793514, "body": "No, it is not query strings, it is response from some web post"}], "answers": [{"tags": [], "owner": {"reputation": 70819, "user_id": 1624921, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/keNmm.jpg?s=128&g=1", "display_name": "Games Brainiac", "link": "https://stackoverflow.com/users/1624921/games-brainiac"}, "is_accepted": false, "score": 0, "last_activity_date": 1444189451, "creation_date": 1444189451, "answer_id": 32983447, "question_id": 32983374, "link": "https://stackoverflow.com/questions/32983374/how-to-convert-the-following-into-array-or-hash/32983447#32983447", "title": "How to convert the following into array or hash?", "body": "<p>I would use is <code>gsub</code>.</p>\n\n<pre><code>irb(main):001:0&gt; s = \"a=b&amp;c=d&amp;e=f&amp;g=h\"\n=&gt; \"a=b&amp;c=d&amp;e=f&amp;g=h\"\nirb(main):004:0&gt; s.gsub(/[\\=\\&amp;]/, \" \").split()\n=&gt; [\"a\", \"b\", \"c\", \"d\", \"e\", \"f\", \"g\", \"h\"]\n</code></pre>\n\n<p>So, what we're doing here is replacing all occurrences of <code>=</code> and <code>&amp;</code> with a single space. We then simply <code>split</code> the string.</p>\n"}, {"comments": [{"owner": {"reputation": 70819, "user_id": 1624921, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/keNmm.jpg?s=128&g=1", "display_name": "Games Brainiac", "link": "https://stackoverflow.com/users/1624921/games-brainiac"}, "edited": false, "score": 1, "creation_date": 1444189725, "post_id": 32983474, "comment_id": 53792041, "body": "Thanks for this! I&#39;m a little rusty on ruby, and I didn&#39;t know you could do that."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 1, "creation_date": 1444191295, "post_id": 32983474, "comment_id": 53792469, "body": "You could replace <code>collect</code> and <code>flatten</code> with <code>flat_collect</code>, er, I mean <a href=\"http://ruby-doc.org/core-2.2.0/Enumerable.html#method-i-flat_map\" rel=\"nofollow noreferrer\">Enumerable#flat_map</a>."}], "tags": [], "owner": {"reputation": 9234, "user_id": 4629810, "user_type": "registered", "accept_rate": 88, "profile_image": "https://lh4.googleusercontent.com/-gcabh64Le4c/AAAAAAAAAAI/AAAAAAAAAQ8/GquVsg_lVoA/photo.jpg?sz=128", "display_name": "Mircea", "link": "https://stackoverflow.com/users/4629810/mircea"}, "is_accepted": false, "score": 5, "last_activity_date": 1444191006, "last_edit_date": 1444191006, "creation_date": 1444189674, "answer_id": 32983474, "question_id": 32983374, "link": "https://stackoverflow.com/questions/32983374/how-to-convert-the-following-into-array-or-hash/32983474#32983474", "title": "How to convert the following into array or hash?", "body": "<p>split FTW (i.e. the most straightforward, simple way of doing this is):</p>\n\n<pre><code>irb(main):001:0&gt; s = \"a=b&amp;c=d&amp;e=f&amp;g=h\"\n=&gt; \"a=b&amp;c=d&amp;e=f&amp;g=h\"\nirb(main):002:0&gt; s.split(/[=&amp;]/)\n=&gt; [\"a\", \"b\", \"c\", \"d\", \"e\", \"f\", \"g\", \"h\"]\n</code></pre>\n\n<p>Other interesting ways of abusing Ruby:  </p>\n\n<pre><code>irb(main):001:0&gt; s = \"a=b&amp;c=d&amp;e=f&amp;g=h\"\n=&gt; \"a=b&amp;c=d&amp;e=f&amp;g=h\"\nirb(main):002:0&gt; s.split('=').collect{|x| x.split('&amp;')}.flatten\n=&gt; [\"a\", \"b\", \"c\", \"d\", \"e\", \"f\", \"g\", \"h\"]\nirb(main):003:0&gt; ['=','&amp;'].inject(s) {|t, n| t.split(n).join()}.split('')\n=&gt; [\"a\", \"b\", \"c\", \"d\", \"e\", \"f\", \"g\", \"h\"]\n</code></pre>\n\n<p>Also check Cary's and GamesBrainiac's answers for more alternatives :)</p>\n"}, {"tags": [], "owner": {"reputation": 2030, "user_id": 1249278, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/85067d968f90780d8ca292ab99962189?s=128&d=identicon&r=PG", "display_name": "shafeen", "link": "https://stackoverflow.com/users/1249278/shafeen"}, "is_accepted": false, "score": 1, "last_activity_date": 1444189967, "creation_date": 1444189967, "answer_id": 32983513, "question_id": 32983374, "link": "https://stackoverflow.com/questions/32983374/how-to-convert-the-following-into-array-or-hash/32983513#32983513", "title": "How to convert the following into array or hash?", "body": "<p>You can make a hash very easily with something like this:</p>\n\n<pre><code>myHash  = {} \nstrSplit = \"a=b&amp;c=d&amp;e=f&amp;g=h\".split(\"&amp;\")\nfor pair in strSplit\n   keyValueSplit = pair.split(\"=\")\n   myHash[keyValueSplit[0]] = keyValueSplit[1]\nend\n</code></pre>\n\n<p><code>myHash</code> will look like this in the end <code>{\"a\"=&gt;\"b\", \"c\"=&gt;\"d\", \"e\"=&gt;\"f\", \"g\"=&gt;\"h\"}</code> </p>\n"}, {"comments": [{"owner": {"reputation": 9234, "user_id": 4629810, "user_type": "registered", "accept_rate": 88, "profile_image": "https://lh4.googleusercontent.com/-gcabh64Le4c/AAAAAAAAAAI/AAAAAAAAAQ8/GquVsg_lVoA/photo.jpg?sz=128", "display_name": "Mircea", "link": "https://stackoverflow.com/users/4629810/mircea"}, "edited": false, "score": 1, "creation_date": 1444190391, "post_id": 32983562, "comment_id": 53792218, "body": "thanks :) small nitpick on your answer: it relies on the structure of the input string. for example: test=1023&amp;nottest=99a will not work"}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "reply_to_user": {"reputation": 9234, "user_id": 4629810, "user_type": "registered", "accept_rate": 88, "profile_image": "https://lh4.googleusercontent.com/-gcabh64Le4c/AAAAAAAAAAI/AAAAAAAAAQ8/GquVsg_lVoA/photo.jpg?sz=128", "display_name": "Mircea", "link": "https://stackoverflow.com/users/4629810/mircea"}, "edited": false, "score": 0, "creation_date": 1444190469, "post_id": 32983562, "comment_id": 53792237, "body": "@Mircea, I assumed that was a given, but you have a good point. Will adjust my answer."}, {"owner": {"reputation": 9234, "user_id": 4629810, "user_type": "registered", "accept_rate": 88, "profile_image": "https://lh4.googleusercontent.com/-gcabh64Le4c/AAAAAAAAAAI/AAAAAAAAAQ8/GquVsg_lVoA/photo.jpg?sz=128", "display_name": "Mircea", "link": "https://stackoverflow.com/users/4629810/mircea"}, "edited": false, "score": 0, "creation_date": 1444190823, "post_id": 32983562, "comment_id": 53792335, "body": "here is 2 alternative ways: 1) s.split(&#39;=&#39;).collect{|x| x.split(&#39;&amp;&#39;)}.flatten 2) [&#39;=&#39;,&#39;&amp;&#39;].inject(s) {|t, n| t.split(n).join()}.split(&#39;&#39;)"}], "tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": false, "score": 1, "last_activity_date": 1444191026, "last_edit_date": 1444191026, "creation_date": 1444190251, "answer_id": 32983562, "question_id": 32983374, "link": "https://stackoverflow.com/questions/32983374/how-to-convert-the-following-into-array-or-hash/32983562#32983562", "title": "How to convert the following into array or hash?", "body": "<p>@Mirea's answer is best, but here's another:</p>\n\n<pre><code>s = \"a=b&amp;c=d&amp;e=f&amp;g=h\"\n\ns.scan /[a-z]/\n  #=&gt; [\"a\", \"b\", \"c\", \"d\", \"e\", \"f\", \"g\", \"h\"] \n</code></pre>\n\n<p>The regex could of course be adjusted as required. For example:</p>\n\n<pre><code>\"123a=b&amp;c=d&amp;E=f&amp;g=h\".scan /[A-Za-z0-9]/\n  #=&gt; [\"1\", \"2\", \"3\", \"a\", \"b\", \"c\", \"d\", \"E\", \"f\", \"g\", \"h\"] \n</code></pre>\n\n<p>or</p>\n\n<pre><code>\"1-2-3a=$b&amp;c=d&amp;e=f&amp;g=h\".scan /[^=&amp;]/\n  #=&gt; [\"1\", \"-\", \"2\", \"-\", \"3\", \"a\", \"$\", \"b\", \"c\", \"d\", \"e\", \"f\", \"g\", \"h\"]\n</code></pre>\n\n<p>and so on.</p>\n\n<p>If strings of characters are desired just append <code>+</code> to the character class:</p>\n\n<pre><code>\"123a=b&amp;ccc=d&amp;E=f&amp;gg=h\".scan /[A-Za-z0-9]+/\n  #=&gt; [\"123a\", \"b\", \"ccc\", \"d\", \"E\", \"f\", \"gg\", \"h\"] \n</code></pre>\n\n<p>If the string has the alternating form shown in the example, these work as well:</p>\n\n<pre><code>(0..s.size).step(2).map { |i| s[i] }\n  #=&gt; [\"a\", \"b\", \"c\", \"d\", \"e\", \"f\", \"g\", \"h\"]\n\ns.each_char.each_slice(2).map(&amp;:first)\n  #=&gt; [\"a\", \"b\", \"c\", \"d\", \"e\", \"f\", \"g\", \"h\"] \n</code></pre>\n"}], "owner": {"reputation": 21398, "user_id": 1136700, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/e484894210178f84679e4e35695ff8ac?s=128&d=identicon&r=PG", "display_name": "Adam Lee", "link": "https://stackoverflow.com/users/1136700/adam-lee"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 60, "favorite_count": 0, "answer_count": 4, "score": 0, "last_activity_date": 1444191026, "creation_date": 1444188930, "question_id": 32983374, "link": "https://stackoverflow.com/questions/32983374/how-to-convert-the-following-into-array-or-hash", "title": "How to convert the following into array or hash?", "body": "<pre><code>a=b&amp;c=d&amp;e=f&amp;g=h\n</code></pre>\n\n<p>How to extract this into <code>[a,b,c,d,e,f,g,h]</code></p>\n\n<p>I know I can use split, but it looks like it can only use only one delimit.</p>\n\n<p>or how to convert into a hash?</p>\n"}, {"tags": ["ruby", "hash"], "comments": [{"owner": {"reputation": 91121, "user_id": 179125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5594142dcc49a24b1902ec8059181f8d?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan Running", "link": "https://stackoverflow.com/users/179125/jordan-running"}, "edited": false, "score": 0, "creation_date": 1444189060, "post_id": 32983259, "comment_id": 53791879, "body": "Please edit your question to include the code you&#39;ve written so far, and an explanation of what problem you&#39;re having with that code."}, {"owner": {"reputation": 5292, "user_id": 2727267, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/0e7c773908a4f6095f63cb9553bbc7af?s=128&d=identicon&r=PG", "display_name": "Beartech", "link": "https://stackoverflow.com/users/2727267/beartech"}, "edited": false, "score": 0, "creation_date": 1444189173, "post_id": 32983259, "comment_id": 53791904, "body": "Your hash at the end is not a valid hash. It looks like you nesting hashes but missing some braces."}], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user4930839"}, "edited": false, "score": 0, "creation_date": 1444256138, "post_id": 32983483, "comment_id": 53831621, "body": "What&#39;s the better way between your solution and mine?"}, {"owner": {"reputation": 392, "user_id": 5017531, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/b6a19f8ef6254807120c84df262bfd3d?s=128&d=identicon&r=PG&f=1", "display_name": "mb_s88", "link": "https://stackoverflow.com/users/5017531/mb-s88"}, "edited": false, "score": 0, "creation_date": 1444264468, "post_id": 32983483, "comment_id": 53834098, "body": "I honestly think you don&#39;t really need to worry about which of those two is better. One thing though, yours ends with a slightly different structure than mine (and the hash that you said that you wanted) in that the code you wrote generates an array of hashes where mine creates a hash where each item is under a key.  The reason that I don&#39;t think you need to worry is that you are only going through 20 items at a time and the real bottleneck will be waiting for the requests to come back from the instagram API."}], "tags": [], "owner": {"reputation": 392, "user_id": 5017531, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/b6a19f8ef6254807120c84df262bfd3d?s=128&d=identicon&r=PG&f=1", "display_name": "mb_s88", "link": "https://stackoverflow.com/users/5017531/mb-s88"}, "is_accepted": false, "score": 1, "last_activity_date": 1444189739, "creation_date": 1444189739, "answer_id": 32983483, "question_id": 32983259, "link": "https://stackoverflow.com/questions/32983259/build-a-hash-from-iterating-over-a-hash-with-nested-arrays/32983483#32983483", "title": "build a hash from iterating over a hash with nested arrays", "body": "<p>The hash that you gave is one item in the array stored at the key \"data\" in a larger hash right? At least that's how it is for the tags/ endpoint so I'll assume it's the same here. (I'm referring to that array of hashes as data)</p>\n\n<pre><code>hash = {}\ndata.each_with_index do |h, idx|\n  hash[\"item#{idx + 1}\"] = {\n    location: h[\"location\"], #This grabs the entire hash at \"location\" because you are wanting all of that data\n    created_time: h[\"created_time\"],\n    image: h[\"images\"][\"low_resolution\"][\"url\"], # You can replace this with whichever resolution.\n    caption: h[\"caption\"][\"from\"][\"full_name\"]\n  }\nend\n</code></pre>\n\n<p>I feel like you want a more simple solution, but I'm not sure how that's going to happen as you want things nested at different levels and you are pulling things from diverse levels of nesting.</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user4930839"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 35, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1444256115, "creation_date": 1444188160, "last_edit_date": 1444256115, "question_id": 32983259, "link": "https://stackoverflow.com/questions/32983259/build-a-hash-from-iterating-over-a-hash-with-nested-arrays", "title": "build a hash from iterating over a hash with nested arrays", "body": "<p>I'd like to structure data I get pack from an Instagram API call:</p>\n\n<pre><code>{\"attribution\"=&gt;nil,\n \"tags\"=&gt;[\"loudmouth\"],\n \"location\"=&gt;{\"latitude\"=&gt;40.7181015, \"name\"=&gt;\"Fontanas Bar\", \"longitude\"=&gt;-73.9922791, \"id\"=&gt;31443955},\n \"comments\"=&gt;{\"count\"=&gt;0, \"data\"=&gt;[]},\n \"filter\"=&gt;\"Normal\",\n \"created_time\"=&gt;\"1444181565\",\n \"link\"=&gt;\"https://instagram.com/p/8hJ-UwIDyC/\",\n \"likes\"=&gt;{\"count\"=&gt;0, \"data\"=&gt;[]},\n \"images\"=&gt;\n  {\"low_resolution\"=&gt;{\"url\"=&gt;\"https://scontent.cdninstagram.com/hphotos-xaf1/t51.2885-15/s320x320/e35/12145134_169501263391761_636095824_n.jpg\", \"width\"=&gt;320, \"height\"=&gt;320},\n   \"thumbnail\"=&gt;\n    {\"url\"=&gt;\"https://scontent.cdninstagram.com/hphotos-xfa1/t51.2885-15/s150x150/e35/c135.0.810.810/12093266_813307028768465_178038954_n.jpg\", \"width\"=&gt;150, \"height\"=&gt;150},\n   \"standard_resolution\"=&gt;\n    {\"url\"=&gt;\"https://scontent.cdninstagram.com/hphotos-xaf1/t51.2885-15/s640x640/sh0.08/e35/12145134_169501263391761_636095824_n.jpg\", \"width\"=&gt;640, \"height\"=&gt;640}},\n \"users_in_photo\"=&gt;\n  [{\"position\"=&gt;{\"y\"=&gt;0.636888889, \"x\"=&gt;0.398666667},\n    \"user\"=&gt;\n     {\"username\"=&gt;\"ambersmelson\",\n      \"profile_picture\"=&gt;\"http://photos-h.ak.instagram.com/hphotos-ak-xfa1/t51.2885-19/11909108_1492226137759631_1159527917_a.jpg\",\n      \"id\"=&gt;\"194780705\",\n      \"full_name\"=&gt;\"\"}}],\n \"caption\"=&gt;\n  {\"created_time\"=&gt;\"1444181565\",\n   \"text\"=&gt;\"the INCOMPARABLE Amber Nelson closing us out! #loudmouth\",\n   \"from\"=&gt;\n    {\"username\"=&gt;\"alex3nglish\",\n     \"profile_picture\"=&gt;\"http://photos-f.ak.instagram.com/hphotos-ak-xaf1/t51.2885-19/s150x150/11906214_483262888501413_294704768_a.jpg\",\n     \"id\"=&gt;\"30822062\",\n     \"full_name\"=&gt;\"Alex English\"}}\n</code></pre>\n\n<p>I'd like to structure it in this way:</p>\n\n<pre><code>    hash ={}\n    hash {\"item1\"=&gt;\n:location =&gt; {\"latitude\"=&gt;40.7181015, \"name\"=&gt;\"Fontanas Bar\",      \"longitude\"=&gt;-73.9922791, \"id\"=&gt;31443955},\n          :created_time =&gt; \"1444181565\",\n          :images =&gt;https://scontent.cdninstagram.com/hphotos-xaf1/t51.2885-15/s320x320/e35/12145134_169501263391761_636095824_n.jpg\"\n          :user =&gt;\"Alex English\"}\n</code></pre>\n\n<p>I'm iterating over 20 objects, each with their location, images, etc... how can I get a hash structure like the one above ?</p>\n\n<p>This is what I've tried:</p>\n\n<pre><code>array_images = Array.new\n    # iterate through response object to extract what is needed\n\n     response.each do |item|\n        array_images &lt;&lt; { :image =&gt; item.images.low_resolution.url,\n            :location =&gt;  item.location,:created_time =&gt; Time.at(item.created_time.to_i), :user =&gt; item.user.full_name}\n\n     end\n</code></pre>\n\n<p>Which works fine. So what is the better way, the fastest one?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "yaml"], "comments": [{"owner": {"reputation": 165, "user_id": 2499064, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/egl0G.jpg?s=128&g=1", "display_name": "camkidman", "link": "https://stackoverflow.com/users/2499064/camkidman"}, "edited": false, "score": 0, "creation_date": 1444187689, "post_id": 32983183, "comment_id": 53791555, "body": "I figured part of it out, the <code>generated_method.to_yaml</code> is what&#39;s adding the new lines there. I&#39;m investigating why now."}], "answers": [{"comments": [{"owner": {"reputation": 165, "user_id": 2499064, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/egl0G.jpg?s=128&g=1", "display_name": "camkidman", "link": "https://stackoverflow.com/users/2499064/camkidman"}, "edited": false, "score": 0, "creation_date": 1444188501, "post_id": 32983298, "comment_id": 53791737, "body": "I did isolate it down to that method, when I output <code>generated_file.to_yaml</code> to the console, it puts breaks in long lines for some strange reason. I might have to approach this a different way."}, {"owner": {"reputation": 165, "user_id": 2499064, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/egl0G.jpg?s=128&g=1", "display_name": "camkidman", "link": "https://stackoverflow.com/users/2499064/camkidman"}, "edited": false, "score": 0, "creation_date": 1444231676, "post_id": 32983298, "comment_id": 53817403, "body": "Yeah, <code>.to_s</code> doesn&#39;t add the line breaks, but I figured out what it was. The default behavior of the YAML parser is to add linebreaks after 80 characters, but adding <code>options = {:line_width =&gt; -1}</code> prevents that"}], "tags": [], "owner": {"reputation": 5822, "user_id": 998495, "user_type": "registered", "accept_rate": 27, "profile_image": "https://www.gravatar.com/avatar/9ab68854cd596cfb44679b47ff05206d?s=128&d=identicon&r=PG", "display_name": "emery", "link": "https://stackoverflow.com/users/998495/emery"}, "is_accepted": false, "score": 1, "last_activity_date": 1479417898, "last_edit_date": 1479417898, "creation_date": 1444188361, "answer_id": 32983298, "question_id": 32983183, "link": "https://stackoverflow.com/questions/32983183/writing-to-yaml-file-with-file-open-wraps-longer-lines/32983298#32983298", "title": "Writing to YAML file with File.open wraps longer lines", "body": "<p>It's most likely the <code>to_yaml</code> method that is adding the newline.  <code>File.open</code> and the <code>write</code> method should not be adding newlines.  Try </p>\n\n<pre><code>f.write generated_file\n</code></pre>\n\n<p>or</p>\n\n<pre><code>f.write generated_file.to_s\n</code></pre>\n\n<p>without the <code>to_yaml</code> method.</p>\n"}, {"tags": [], "owner": {"reputation": 50175, "user_id": 1307905, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a38a4f5f180194ac457cdc057f1be6e3?s=128&d=identicon&r=PG", "display_name": "Anthon", "link": "https://stackoverflow.com/users/1307905/anthon"}, "is_accepted": false, "score": 3, "last_activity_date": 1479417816, "last_edit_date": 1479417816, "creation_date": 1444211691, "answer_id": 32989192, "question_id": 32983183, "link": "https://stackoverflow.com/questions/32983183/writing-to-yaml-file-with-file-open-wraps-longer-lines/32989192#32989192", "title": "Writing to YAML file with File.open wraps longer lines", "body": "<p>I would not call that truncating, but wrapping with indent, a decades old technique for lines that are too long e.g. for a terminal width. </p>\n\n<p>In <code>.to_yaml</code> this width is determined by the <code>BestWidth</code> parameter and defaults to 80 characters. More options can be found on the <a href=\"http://yaml4r.sourceforge.net/doc/page/examples.htm\" rel=\"nofollow noreferrer\">documentation page</a> under section 24.</p>\n\n<p>YAML emittors for other programming languages use this wrapping as well.</p>\n"}, {"comments": [{"owner": {"reputation": 165, "user_id": 1334531, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/bcd4b926a8ed52e5aaf54ecf39c8c2a6?s=128&d=identicon&r=PG", "display_name": "Marcin Mateusz Hanc", "link": "https://stackoverflow.com/users/1334531/marcin-mateusz-hanc"}, "edited": false, "score": 1, "creation_date": 1530786303, "post_id": 32996249, "comment_id": 89359382, "body": "There&#39;s a typo in the code. It should be: <code>yaml.to_yaml(:options =&gt; {:line_width =&gt; -1})</code> or <code>yaml.to_yaml(options = {:line_width =&gt; -1})</code> but &quot;edits can&#39;t change less than 6 chars&quot;. :)"}], "tags": [], "owner": {"reputation": 165, "user_id": 2499064, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/egl0G.jpg?s=128&g=1", "display_name": "camkidman", "link": "https://stackoverflow.com/users/2499064/camkidman"}, "is_accepted": true, "score": 3, "last_activity_date": 1530803635, "last_edit_date": 1530803635, "creation_date": 1444231412, "answer_id": 32996249, "question_id": 32983183, "link": "https://stackoverflow.com/questions/32983183/writing-to-yaml-file-with-file-open-wraps-longer-lines/32996249#32996249", "title": "Writing to YAML file with File.open wraps longer lines", "body": "<p>Turns out this was actually answered previously in \"<a href=\"https://stackoverflow.com/questions/17859864/why-does-psych-yaml-interpreter-add-line-breaks-around-80-characters\">why does psych yaml interpreter add line breaks around 80 characters?</a>\". I was searching for the wrong thing.</p>\n\n<p>Doing something like</p>\n\n<pre><code>yaml.to_yaml(:options =&gt; {:line_width =&gt; -1})\n</code></pre>\n\n<p>keeps the lines from wrapping.</p>\n"}], "owner": {"reputation": 165, "user_id": 2499064, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/egl0G.jpg?s=128&g=1", "display_name": "camkidman", "link": "https://stackoverflow.com/users/2499064/camkidman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 543, "favorite_count": 1, "accepted_answer_id": 32996249, "answer_count": 3, "score": 3, "last_activity_date": 1530803635, "creation_date": 1444187581, "last_edit_date": 1479417750, "question_id": 32983183, "link": "https://stackoverflow.com/questions/32983183/writing-to-yaml-file-with-file-open-wraps-longer-lines", "title": "Writing to YAML file with File.open wraps longer lines", "body": "<p>I'm wondering if there's an aspect of <code>File.open</code> that I'm missing. I'm trying to write some documentation in YAML and when I append to the file and save it at all, it truncates my lines and breaks my formatting. </p>\n\n<p>Here's what's going on:</p>\n\n<pre><code>generated_file = YAML::load_file(\"#{Rails.root}/documentation/auto_generated/liquid_drops/#{class_name}.yml\")\n</code></pre>\n\n<p>I get the file I'm working with, then all I do is write to it:</p>\n\n<pre><code>File.open(\"#{Rails.root}/documentation/auto_generated/liquid_drops/#{class_name}.yml\", 'w+') {|f| f.write generated_file.to_yaml }\n</code></pre>\n\n<p>And it truncates lines like this:</p>\n\n<pre><code>example: \"{% for file in object.method.all %} -- this would be the ideal method to iterate over a file's methods\"\n</code></pre>\n\n<p>To this:</p>\n\n<pre><code>example: \"{% for file in object.method.all %} -- this would be the ideal method\n    to iterate over a file's methods\"\n</code></pre>\n\n<p>Here's an example of what generated_file looks like:</p>\n\n<pre><code>{\n  \"class\" =&gt; \"account\",\n  \"methods\" =&gt; [\n{\n    \"method_name\" =&gt; \"this_method\",\n    \"description\" =&gt; \"Donec sed odio dui. Praesent commodo cursus magna, vel scelerisque nisl consectetur et. Donec sed odio dui. Praesent commodo cursus magna, vel scelerisque nisl consectetur et. Donec sed odio odio ma.\",\n    \"return_type\" =&gt; \"Array\",\n        \"example\" =&gt; \"{% for method in object.methods.all %}\"\n}\n],\n\"general_notes\" =&gt; \"Most methods can use this instead of that, because this and that both inherit from the right file\"\n}\n</code></pre>\n"}, {"tags": ["ruby", "string", "chef-infra"], "answers": [{"tags": [], "owner": {"reputation": 394580, "user_id": 479863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ArUCE.jpg?s=128&g=1", "display_name": "mu is too short", "link": "https://stackoverflow.com/users/479863/mu-is-too-short"}, "is_accepted": true, "score": 3, "last_activity_date": 1478713848, "last_edit_date": 1478713848, "creation_date": 1444189487, "answer_id": 32983450, "question_id": 32983165, "link": "https://stackoverflow.com/questions/32983165/chef-complaints-about-invalid-unicode-escape/32983450#32983450", "title": "Chef complaints about invalid Unicode escape", "body": "<p>The isn't really the problem, the <code>\\u</code> is. For example:</p>\n\n<pre><code>irb &gt; \"\\u@\"\nSyntaxError: (irb):1: invalid Unicode escape\n\"\\u@\"\n   ^\n</code></pre>\n\n<p>but:</p>\n\n<pre><code>irb &gt; \"\\u0611\"\n =&gt; \"\u0611\" \n</code></pre>\n\n<p>Keep in mind that <code>%Q(...)</code> behaves like a double quoted string so all the usual escapes (such as <code>\\u</code> for Unicode) apply. Adding more backslashes should sort things out:</p>\n\n<pre><code>bash_profile_content = %Q(\nexport EDITOR=vi\nexport ENV=#{role}\nexport PATH=$PATH:/usr/local/bin\nexport PS1=\"${debian_chroot:+($debian_chroot)}\\\\u@\\\\h:\\\\w [$ENV]\\\\$ \"\n)\n</code></pre>\n"}], "owner": {"reputation": 29577, "user_id": 58129, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/MBBRu.jpg?s=128&g=1", "display_name": "Anthony Kong", "link": "https://stackoverflow.com/users/58129/anthony-kong"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 594, "favorite_count": 0, "accepted_answer_id": 32983450, "answer_count": 1, "score": 2, "last_activity_date": 1478713848, "creation_date": 1444187469, "last_edit_date": 1444189495, "question_id": 32983165, "link": "https://stackoverflow.com/questions/32983165/chef-complaints-about-invalid-unicode-escape", "title": "Chef complaints about invalid Unicode escape", "body": "<p>I want to set the following content in my .bash_profile </p>\n\n<pre><code>bash_profile_content = %Q(\nexport EDITOR=vi\nexport ENV=#{role}\nexport PATH=$PATH:/usr/local/bin\nexport PS1=\"${debian_chroot:+($debian_chroot)}\\u@\\h:\\w [$ENV]\\$ \"\n)\n\nfile '/home/me/.bash_profile' do\n    cotent bash_profile_conent\nend\n</code></pre>\n\n<p>Chef throws this error:</p>\n\n<pre><code>==&gt; Server-002: [2015-10-07T03:02:23+00:00] ERROR: Exception handlers complete\n==&gt; Server-002: Chef Client failed. 0 resources updated in 322.419863736 seconds\n==&gt; Server-002: [2015-10-07T03:02:23+00:00] FATAL: Stacktrace dumped to /var/chef/cache/chef-stacktrace.out\n==&gt; Server-002: [2015-10-07T03:02:23+00:00] ERROR: /var/chef/cache/cookbooks/servers/recipes/_common_user.rb:67: invalid Unicode escape\n==&gt; Server-002: ...ian_chroot:+($debian_chroot)}\\u@\\h:\\w [$ENV]\\$ \"\n==&gt; Server-002: ...   \n</code></pre>\n\n<p>Apparently chef thinks the <code>@</code> character is meant for unicode escape. </p>\n\n<p>I want to use <code>@</code> as is. How can I fix this error?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4", "heroku", "devise"], "comments": [{"owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "edited": false, "score": 0, "creation_date": 1444187639, "post_id": 32983064, "comment_id": 53791537, "body": "Check the browser console for javascript errors. The rail unobtrusive javascript driver (jquery-rails by default) fakes DELETE http requests by using AJAX. If there is a script error the request is instead sent as GET and devise won&#39;t log the user out. You can also configure devise to accept logouts via GET or <a href=\"https://www.youtube.com/watch?v=XqnX8B1Y57k\" rel=\"nofollow noreferrer\">use a form</a> if you need a no-js fallback."}, {"owner": {"reputation": 1503, "user_id": 753012, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/f5Icw.png?s=128&g=1", "display_name": "Rodrigo Castro", "link": "https://stackoverflow.com/users/753012/rodrigo-castro"}, "reply_to_user": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "edited": false, "score": 0, "creation_date": 1444187840, "post_id": 32983064, "comment_id": 53791590, "body": "I didn&#39;t check the javascript console, but the server is receiving the log out request correctly, as a DELETE, and the log in as a POST.  From the server: <code>Started DELETE &quot;&#47;users&#47;sign_out&quot;</code>"}, {"owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "edited": false, "score": 0, "creation_date": 1444187956, "post_id": 32983064, "comment_id": 53791617, "body": "Also, the cookies may be specific per subdomain. So your cookie for <code>pt.sitename.com</code> may still point to a valid session while your <code>en.sitename.com</code> cookie does not."}, {"owner": {"reputation": 1503, "user_id": 753012, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/f5Icw.png?s=128&g=1", "display_name": "Rodrigo Castro", "link": "https://stackoverflow.com/users/753012/rodrigo-castro"}, "reply_to_user": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "edited": false, "score": 0, "creation_date": 1444188130, "post_id": 32983064, "comment_id": 53791659, "body": "The whole delete looks like this on the server: <a href=\"http://i.imgur.com/z9JFwtD.png\" rel=\"nofollow noreferrer\">i.imgur.com/z9JFwtD.png</a>"}, {"owner": {"reputation": 1503, "user_id": 753012, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/f5Icw.png?s=128&g=1", "display_name": "Rodrigo Castro", "link": "https://stackoverflow.com/users/753012/rodrigo-castro"}, "reply_to_user": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "edited": false, "score": 0, "creation_date": 1444188224, "post_id": 32983064, "comment_id": 53791682, "body": "Yeah, about the subdomains, I haven&#39;t set these up on the domain yet, so I&#39;m only using the default one (www I believe), and the location sets as &#39;en&#39; by default."}, {"owner": {"reputation": 1503, "user_id": 753012, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/f5Icw.png?s=128&g=1", "display_name": "Rodrigo Castro", "link": "https://stackoverflow.com/users/753012/rodrigo-castro"}, "reply_to_user": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "edited": false, "score": 0, "creation_date": 1444188523, "post_id": 32983064, "comment_id": 53791744, "body": "I already briefly looked into this domain-specific cookie issue, but I didn&#39;t really did anything concrete yet to fix it, as I&#39;m still ironing out some more important bugs, like this. I&#39;m also not using Rolify at its full potential yet (read: I have no clue on how to use it properly), for the same reason, but I don&#39;t think these are the reasons to this issue."}, {"owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "edited": false, "score": 0, "creation_date": 1444188537, "post_id": 32983064, "comment_id": 53791747, "body": "Also you need to change your authentication hook so that it does not try to authorize the devise actions <code>before_action :authenticate_user!, except: [:change_language], unless:  :devise_controller?</code>."}, {"owner": {"reputation": 1503, "user_id": 753012, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/f5Icw.png?s=128&g=1", "display_name": "Rodrigo Castro", "link": "https://stackoverflow.com/users/753012/rodrigo-castro"}, "reply_to_user": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "edited": false, "score": 0, "creation_date": 1444189256, "post_id": 32983064, "comment_id": 53791922, "body": "Thank you, this seem to fix the log in issue, where I could only log in when choosing remember me, and apparently I can also log out. Tested in a new private tab, works, but my current login is still &quot;locked&quot; with me unable to log out. I&#39;ll try to let the session expire (I now set a 5 minute expire time to better test this), and see if the issue persists."}, {"owner": {"reputation": 1503, "user_id": 753012, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/f5Icw.png?s=128&g=1", "display_name": "Rodrigo Castro", "link": "https://stackoverflow.com/users/753012/rodrigo-castro"}, "reply_to_user": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "edited": false, "score": 0, "creation_date": 1444189373, "post_id": 32983064, "comment_id": 53791945, "body": "Yes, it seems correct now, thank you again! Please post your comment as an answer so I can accept it"}], "answers": [{"comments": [{"owner": {"reputation": 1503, "user_id": 753012, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/f5Icw.png?s=128&g=1", "display_name": "Rodrigo Castro", "link": "https://stackoverflow.com/users/753012/rodrigo-castro"}, "edited": false, "score": 1, "creation_date": 1444232660, "post_id": 32995557, "comment_id": 53818140, "body": "Thanks for the tip on the ApplicationController#index thing, never thought about that before."}, {"owner": {"reputation": 1288, "user_id": 170400, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/37ius.jpg?s=128&g=1", "display_name": "Andrew K", "link": "https://stackoverflow.com/users/170400/andrew-k"}, "edited": false, "score": 0, "creation_date": 1507489144, "post_id": 32995557, "comment_id": 80219031, "body": "I&#39;m having a similar issue however, I don&#39;t have the <code>authenticate_user!</code> or any <code>cancancan</code> actions on the ApplicationController level. I later learned that overwriting <code>serialize_from_session</code> was what caused issues with both logging in and out. Hopefully this helps someone else on this search :)"}, {"owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "edited": false, "score": 0, "creation_date": 1507589541, "post_id": 32995557, "comment_id": 80261355, "body": "This answer no longer applies as authenticate_resource! in Devise checks if it is a Devise controller."}], "tags": [], "owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "is_accepted": true, "score": 2, "last_activity_date": 1444229590, "creation_date": 1444229590, "answer_id": 32995557, "question_id": 32983064, "link": "https://stackoverflow.com/questions/32983064/devise-only-logs-in-when-i-select-remember-me-and-log-out-link-doesnt-work/32995557#32995557", "title": "Devise only logs in when I select &quot;remember me&quot;, and log out link doesn&#39;t work", "body": "<p>When using Devise you need to exempt the Devise controllers from <code>before_action :authenticate_user!</code>. Otherwise the log in / out actions get stuck in a chicken vs egg conundrum. </p>\n\n<pre><code>class ApplicationController &lt; ActionController::Base\n  protect_from_forgery with: :exception\n\n  before_action :authenticate_user!, except: [:change_language], unless: :devise_controller?\n  before_action :configure_permitted_parameters, if: :devise_controller?\n\n  rescue_from CanCan::AccessDenied do |exception|\n    redirect_to root_url, alert: exception.message\n  end\n\n  def index\n  end\n\n  (...)\nend\n</code></pre>\n\n<p>This applies to CanCanCan too as it will cause circular redirects:</p>\n\n<pre><code>class ApplicationController &lt; ActionController::Base\n  protect_from_forgery with: :exception\n  # ...\n  check_authorization unless: :devise_controller?\n  # ...\nend\n</code></pre>\n\n<p><a href=\"https://github.com/CanCanCommunity/cancancan/wiki/Ensure-Authorization\" rel=\"nofollow\">https://github.com/CanCanCommunity/cancancan/wiki/Ensure-Authorization</a></p>\n\n<p>Also you should move your \"root\" index action to a separate controller. This is because in most Rails applications <code>ApplicationController</code> is the superclass for all of your controllers. So you are effectively giving your all your controllers an index action. Many Rails apps use a <code>PagesController</code> or <code>HomeController</code> for this purpose.</p>\n"}], "owner": {"reputation": 1503, "user_id": 753012, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/f5Icw.png?s=128&g=1", "display_name": "Rodrigo Castro", "link": "https://stackoverflow.com/users/753012/rodrigo-castro"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 468, "favorite_count": 0, "accepted_answer_id": 32995557, "answer_count": 1, "score": 0, "last_activity_date": 1444229590, "creation_date": 1444186665, "question_id": 32983064, "link": "https://stackoverflow.com/questions/32983064/devise-only-logs-in-when-i-select-remember-me-and-log-out-link-doesnt-work", "title": "Devise only logs in when I select &quot;remember me&quot;, and log out link doesn&#39;t work", "body": "<p>I have a new, playground-like Rails 4.2 application, and I just set up Devise on it, however I'm having some problems with the Session:</p>\n\n<p><strong>TL;DR</strong>: I'll try to resume it: Log out doesn't work, the server prints as if it's all correct, but user keeps logged in. Log in on production doesn't work, server also prints as if it's correct but I'm still getting 401s. Tried to log in in prod using \"remember me\" option, now I'm in but can't log out because of same bug. What is wrong?</p>\n\n<p>By the way, this setup is working locally, at least for a single user, and apart from the time I had two users logged in at once (I explain it below), I can locally log in and log out without any apparent issues.</p>\n\n<p>Now, the full story:</p>\n\n<ol>\n<li><p>I'm using subdomain as a parameter for locale, so I get urls like en.sitename.com, pt.sitename.com, etc. One day, as I was testing Cancancan, I created another user and created some content for it. When I switched to another language, the app would switch to the first user, and when I switched back to the previous language it would also switch users.</p></li>\n<li><p>When this happened I couldn't log out of either user. I clicked the <code>destroy_user_session_path</code> link, the server logged the delete action (and commit), it all appeared to have worked, but I always got redirected to the home screen, still logged to both users. I could only fix this clearing the browser's cookies.</p></li>\n<li><p>After clearing the cookies, everything seemed to be back to normal, but now I deployed it to Heroku. I created a user, assigned the :admin role to it (I'm also starting to use rolify, but so far I basically only defined a role and checked if the user have it on <code>ability.rb</code>). Tried logging in, but the same \"no-effect\" thing that happened with log out is happening here too: I log in, but when devise redirects me to \"/\", I get a 401 and get redirected back to the log in. Tried it all, I even set cancancan to allow <code>can :manage, :all</code> to all users, but it would still give me a 401.</p></li>\n<li><p>I tried to log in again, but this time selecting the \"remember me\" checkbox, and voila! I'm in, no 401s. But now I can't log out again, same issue as before.</p></li>\n</ol>\n\n<p>I really don't know what in my code is wrong, so I'll try to summarize the important (to me) parts:</p>\n\n<h2><code>config/initializers/devise.rb</code></h2>\n\n<pre><code>Devise.setup do |config|\n  # Have yet to configure this, but I'm not using emails with devise\n  config.mailer_sender = 'please-change-me-at-config-initializers-devise@example.com'\n  require 'devise/orm/active_record'\n  config.case_insensitive_keys = [:email]\n  config.strip_whitespace_keys = [:email]\n  config.stretches = Rails.env.test? ? 1 : 10\n  config.reconfirmable = false\n  config.expire_all_remember_me_on_sign_out = true\n  config.password_length = 6..96\n  config.reset_password_within = 6.hours\n  config.sign_out_via = :delete\nend\n</code></pre>\n\n<h2><code>app/models/user.rb</code></h2>\n\n<pre><code>class User &lt; ActiveRecord::Base\n  rolify\n\n  devise :database_authenticatable, :registerable,\n         :recoverable, :rememberable, :trackable, :validatable\n\n  (... non-devise code ...)\nend\n</code></pre>\n\n<h2><code>app/controllers/application_controller.rb</code></h2>\n\n<pre><code>class ApplicationController &lt; ActionController::Base\n  protect_from_forgery with: :exception\n  before_action :authenticate_user!, except: [:change_language]\n  before_action :configure_permitted_parameters, if: :devise_controller?\n\n  rescue_from CanCan::AccessDenied do |exception|\n    redirect_to root_url, alert: exception.message\n  end\n\n  def index\n  end\n\n  (...)\nend\n</code></pre>\n\n<h2><code>app/models/ability.rb</code> (with temporary \"allow-all\" hack)</h2>\n\n<pre><code>class Ability\n  include CanCan::Ability\n\n  def initialize(user)\n    can :manage, :all\n  end\nend\n</code></pre>\n\n<h2>I'm also redefining devise's views: (this is sessions/new, only relevant lines)</h2>\n\n<pre><code>&lt;%= form_for(resource, as: resource_name, url: session_path(resource_name),\n             html: { class: 'form-horizontal' }) do |f| %&gt;\n  &lt;%= f.email_field :email, autofocus: true, class: 'form-control' %&gt;\n  &lt;%= f.password_field :password, autocomplete: 'off', class: 'form-control' %&gt;\n  &lt;% if devise_mapping.rememberable? -%&gt;\n    &lt;%= f.check_box :remember_me %&gt;\n  &lt;% end -%&gt;\n  &lt;%= f.submit t('devise.views.login.submit'), class: 'btn btn-primary' %&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>The gems versions are as follow:</p>\n\n<ul>\n<li>CanCanCan 1.12.0</li>\n<li>Devise 3.5.2</li>\n<li>Rails 4.2.4</li>\n<li>Rolify 4.1.1</li>\n<li>And running Ruby 2.2.0 on Ubuntu 14.04 x64 (the more info the better, right?)</li>\n</ul>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4"], "answers": [{"tags": [], "owner": {"reputation": 5822, "user_id": 998495, "user_type": "registered", "accept_rate": 27, "profile_image": "https://www.gravatar.com/avatar/9ab68854cd596cfb44679b47ff05206d?s=128&d=identicon&r=PG", "display_name": "emery", "link": "https://stackoverflow.com/users/998495/emery"}, "is_accepted": false, "score": 1, "last_activity_date": 1444189707, "last_edit_date": 1495535219, "creation_date": 1444189707, "answer_id": 32983477, "question_id": 32983028, "link": "https://stackoverflow.com/questions/32983028/time-zone-dropdown-where-select-value-is-index/32983477#32983477", "title": "Time zone dropdown where select value is index", "body": "<p>Try map.each_with_index as described here: <a href=\"https://stackoverflow.com/questions/4697557/how-to-map-with-index-in-ruby\">How to map with index in Ruby?</a></p>\n\n<pre><code>&lt;%= f.collection_select :time_zone, ActiveSupport::TimeZone.us_zones.map.each_with_index { |z, i| i.to_s.concat(\" #{z.name}\") }, name %&gt;\n</code></pre>\n\n<p>You may need to modify that code to work in your rails application, but calling each_with_index on your map should give you a second parameter which will contain the index of your hash.</p>\n"}], "owner": {"reputation": 3995, "user_id": 1297248, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/TiaMw.jpg?s=128&g=1", "display_name": "Batman", "link": "https://stackoverflow.com/users/1297248/batman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 544, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1444189707, "creation_date": 1444186373, "question_id": 32983028, "link": "https://stackoverflow.com/questions/32983028/time-zone-dropdown-where-select-value-is-index", "title": "Time zone dropdown where select value is index", "body": "<p>I'm trying to create a select dropdown for time_zones in my user profile but I need the list and indexes to match up because I'm not using text, I'm using an integer for to store the zones in my database. I did that so I could display it as a dropdown in rails admin instead of a text input.  </p>\n\n<p><strong>User:</strong></p>\n\n<pre><code>validates_inclusion_of :time_zone, in: ActiveSupport::TimeZone.us_zones.map { |z| z.name }, \nmessage: \"is not a valid time zone\", \nallow_blank: true\n\n # This allows me to display the time_zone as a dropdown in rails admin instead of a text box\n TIMEZONES = ActiveSupport::TimeZone.us_zones.map { |z| z.name }\n def time_zone_enum\n   TIMEZONES.each_with_index.to_a\n end\n</code></pre>\n\n<p><strong>View:</strong></p>\n\n<pre><code>&lt;%= f.collection_select :time_zone, ActiveSupport::TimeZone.us_zones.map { |z| z.name }, value, name %&gt;\n\n # I don't know how to get the value to be an index of the map operation and to display the name\n</code></pre>\n"}, {"tags": ["javascript", "ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 1477, "user_id": 3401124, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/2f16bfeaf3bc98416db9d226c8ffbdc9?s=128&d=identicon&r=PG&f=1", "display_name": "ddgd", "link": "https://stackoverflow.com/users/3401124/ddgd"}, "edited": false, "score": 0, "creation_date": 1444191767, "post_id": 32982961, "comment_id": 53792616, "body": "You have this error because you haven&#39;t defined the Post class. There must be <code>var Post = React.createClass({....</code> somewhere in your code."}, {"owner": {"reputation": 439, "user_id": 3399767, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/fhW1I.jpg?s=128&g=1", "display_name": "Ruegen", "link": "https://stackoverflow.com/users/3399767/ruegen"}, "reply_to_user": {"reputation": 1477, "user_id": 3401124, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/2f16bfeaf3bc98416db9d226c8ffbdc9?s=128&d=identicon&r=PG&f=1", "display_name": "ddgd", "link": "https://stackoverflow.com/users/3401124/ddgd"}, "edited": false, "score": 0, "creation_date": 1444193976, "post_id": 32982961, "comment_id": 53793317, "body": "I thought var Posts = React.createClass does that but that I guess is the component name?"}, {"owner": {"reputation": 1477, "user_id": 3401124, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/2f16bfeaf3bc98416db9d226c8ffbdc9?s=128&d=identicon&r=PG&f=1", "display_name": "ddgd", "link": "https://stackoverflow.com/users/3401124/ddgd"}, "edited": false, "score": 0, "creation_date": 1444199830, "post_id": 32982961, "comment_id": 53795600, "body": "They&#39;re all just classes. You&#39;re calling Post class, so you have to define Post class. Posts != Post and Posts doesn&#39;t automatically define Post."}, {"owner": {"reputation": 439, "user_id": 3399767, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/fhW1I.jpg?s=128&g=1", "display_name": "Ruegen", "link": "https://stackoverflow.com/users/3399767/ruegen"}, "reply_to_user": {"reputation": 1477, "user_id": 3401124, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/2f16bfeaf3bc98416db9d226c8ffbdc9?s=128&d=identicon&r=PG&f=1", "display_name": "ddgd", "link": "https://stackoverflow.com/users/3401124/ddgd"}, "edited": false, "score": 0, "creation_date": 1444269107, "post_id": 32982961, "comment_id": 53835315, "body": "where can I declare it in React? I thought jsx would convert <code>&lt;Post post={article} &#47;&gt;;</code> to <code>&lt;div&gt;my article text&lt;&#47;div&gt;</code>"}], "owner": {"reputation": 439, "user_id": 3399767, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/fhW1I.jpg?s=128&g=1", "display_name": "Ruegen", "link": "https://stackoverflow.com/users/3399767/ruegen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 628, "favorite_count": 1, "answer_count": 0, "score": 1, "last_activity_date": 1444185870, "creation_date": 1444185870, "question_id": 32982961, "link": "https://stackoverflow.com/questions/32982961/react-rails-component-not-loading", "title": "React Rails - Component not loading", "body": "<p>I've gone as far as I can</p>\n\n<p>I am using the react gem for rails</p>\n\n<pre><code>gem 'react-rails', '~&gt; 1.3.0'\n</code></pre>\n\n<p>and I hope to have a React loop</p>\n\n<pre><code>&lt;%= react_component( \"Posts\", { posts: @posts} )%&gt;\n</code></pre>\n\n<p>I have a post.js.jsx file in assets/javascripts/components with:</p>\n\n<pre><code>var Posts = React.createClass({\n    render(){\n        var createItem = ({article}) =&gt; &lt;Post post={article} /&gt;;\n        console.log(this.props.posts);\n        return &lt;div&gt;{this.props.posts.map(createItem)}&lt;/div&gt;;\n    }\n});\n</code></pre>\n\n<p>I require the article from each post to be in the view - however it won't return and the console.log does return an array of objects of the this.props.posts (it is also passing the @ instance variable to the data tag of the react_component tag in the source of the page.</p>\n\n<p>Trying to understand why I can't gain access to \"article\" and why it is saying I have Posts undefined error in the console log.</p>\n\n<pre><code>Uncaught ReferenceError: Post is not defined\n</code></pre>\n"}, {"tags": ["sql", "ruby-on-rails", "ruby", "where", "psql"], "answers": [{"comments": [{"owner": {"reputation": 99, "user_id": 3606694, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/3a967a03d32182c19040f5fdc27eb964?s=128&d=identicon&r=PG", "display_name": "jozwright", "link": "https://stackoverflow.com/users/3606694/jozwright"}, "edited": false, "score": 0, "creation_date": 1444189722, "post_id": 32983301, "comment_id": 53792040, "body": "Thanks! This led me in the correct direction. I just changed <code>JOINS</code> to <code>JOIN</code> and the double quotes to single quotes."}], "tags": [], "owner": {"reputation": 392, "user_id": 5017531, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/b6a19f8ef6254807120c84df262bfd3d?s=128&d=identicon&r=PG&f=1", "display_name": "mb_s88", "link": "https://stackoverflow.com/users/5017531/mb-s88"}, "is_accepted": true, "score": 0, "last_activity_date": 1444189859, "last_edit_date": 1444189859, "creation_date": 1444188389, "answer_id": 32983301, "question_id": 32982952, "link": "https://stackoverflow.com/questions/32982952/sql-query-with-multiple-joins-using-rails-models-as-reference/32983301#32983301", "title": "SQL query with multiple joins using Rails models as reference", "body": "<p>Assuming that your table is named like rails would name those objects and you have the foreign keys that are implied by your relations:</p>\n\n<pre><code>SELECT\n    COUNT(*)\nFROM\n    surveys\nJOIN\n    properties ON surveys.property_id = properties.id\nJOIN\n    addresses ON addresses.id = properties.address_id\nWHERE\n    addresses.city = 'Garrison'\n</code></pre>\n\n<p>Also your relations are strangely defined... I'm assuming that that is just a psuedocode version to express the relations.</p>\n\n<p>edit: I corrected the second join, because I believe I had the relations backwards.</p>\n"}], "owner": {"reputation": 99, "user_id": 3606694, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/3a967a03d32182c19040f5fdc27eb964?s=128&d=identicon&r=PG", "display_name": "jozwright", "link": "https://stackoverflow.com/users/3606694/jozwright"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 29, "favorite_count": 0, "accepted_answer_id": 32983301, "answer_count": 1, "score": 0, "last_activity_date": 1444189859, "creation_date": 1444185804, "question_id": 32982952, "link": "https://stackoverflow.com/questions/32982952/sql-query-with-multiple-joins-using-rails-models-as-reference", "title": "SQL query with multiple joins using Rails models as reference", "body": "<p>I want to select a count of all surveys where the <code>survey.property.address.city == \"Garrison\"</code>. I have the following models:</p>\n\n<pre><code>Survey\n  many_to_one :property\n\nProperty\n  one_to_many :surveys\n  many_to_one :address\n\nAddress\n  one_to_many :properties\n</code></pre>\n\n<p>How do I query using SQL? </p>\n\n<p><code>SELECT count(*) FROM surveys JOIN...</code></p>\n"}, {"tags": ["ruby-on-rails", "ruby", "asset-pipeline", "sprockets"], "comments": [{"owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "edited": false, "score": 0, "creation_date": 1444184504, "post_id": 32982710, "comment_id": 53790752, "body": "See <a href=\"http://serverfault.com/questions/638905/does-rails-4-asset-path-helper-uses-asset-prefix\" title=\"does rails 4 asset path helper uses asset prefix\">serverfault.com/questions/638905/&hellip;</a>"}, {"owner": {"reputation": 73119, "user_id": 1143732, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/mFUOI.jpg?s=128&g=1", "display_name": "Richard Peck", "link": "https://stackoverflow.com/users/1143732/richard-peck"}, "edited": false, "score": 0, "creation_date": 1444208292, "post_id": 32982710, "comment_id": 53800582, "body": "When you mention &quot;custom_assets_path&quot;, I presume this folder will be stored in the <code>public</code> dir?"}], "answers": [{"tags": [], "owner": {"reputation": 3590, "user_id": 1494245, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a50a2dcc33b58918f27664b7646d92b7?s=128&d=identicon&r=PG", "display_name": "Sean Huber", "link": "https://stackoverflow.com/users/1494245/sean-huber"}, "is_accepted": false, "score": 1, "last_activity_date": 1444193125, "creation_date": 1444193125, "answer_id": 32983968, "question_id": 32982710, "link": "https://stackoverflow.com/questions/32982710/rails-customizing-asset-path/32983968#32983968", "title": "Rails - customizing asset path", "body": "<p>Set a custom path for <code>config.assets.prefix</code>:</p>\n\n<p><a href=\"http://guides.rubyonrails.org/asset_pipeline.html#changing-the-assets-path\" rel=\"nofollow\">http://guides.rubyonrails.org/asset_pipeline.html#changing-the-assets-path</a></p>\n"}, {"tags": [], "owner": {"reputation": 73119, "user_id": 1143732, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/mFUOI.jpg?s=128&g=1", "display_name": "Richard Peck", "link": "https://stackoverflow.com/users/1143732/richard-peck"}, "is_accepted": false, "score": 0, "last_activity_date": 1444210503, "creation_date": 1444210503, "answer_id": 32988786, "question_id": 32982710, "link": "https://stackoverflow.com/questions/32982710/rails-customizing-asset-path/32988786#32988786", "title": "Rails - customizing asset path", "body": "<p>For want of an answer (I'd be interested to know this), I'd like to remind that  the assets path is simply in the <code>public</code> folder.</p>\n\n<hr>\n\n<p><strong>Public</strong></p>\n\n<p>When you direct requests through Nginx, you're actually sending them to the <code>public</code> folder of your app. When you precompile your assets, they end up in <code>public/assets</code>, although you only see <code>http://url.com/assets/</code></p>\n\n<p>Thus, if you want to make a custom folder for sprockets, you'll be able to use the suggestion from <code>@sean huber</code> -- <code>config.assets.prefix</code>:</p>\n\n<blockquote>\n  <p>The public path that Sprockets uses by default is /assets.</p>\n  \n  <p>This can be changed to something else:\n  <code>config.assets.prefix = \"/some_other_path\"</code></p>\n</blockquote>\n\n<p>You must remember that any \"prefix\" you use should be to a member of the <code>public</code> directory, and thus you should expect it to be present there if you want it to work correctly.</p>\n"}], "owner": {"reputation": 10453, "user_id": 872514, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/a42591877295d7b253af219057635ba7?s=128&d=identicon&r=PG", "display_name": "alexs333", "link": "https://stackoverflow.com/users/872514/alexs333"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 203, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1444210503, "creation_date": 1444184057, "question_id": 32982710, "link": "https://stackoverflow.com/questions/32982710/rails-customizing-asset-path", "title": "Rails - customizing asset path", "body": "<p>I have my Nginx configuration to serve assets from <code>http://&lt;myhost&gt;/custom_asset_path</code>.  Unfortunately I can not change that fact of life.</p>\n\n<p>Is it possible to configure Sprockets to insert <code>custom_asset_path</code> into the asset URL?</p>\n\n<p>I.e. I want my javascript_include_tag to generate something like:</p>\n\n<pre><code>&lt;script src=\"/custom_asset_path/assets/application-ccfcccSHA_continues.js\" data-turbolinks-track=\"true\"&gt;&lt;/script&gt;\n</code></pre>\n\n<p>Help would be appreciated! </p>\n"}, {"tags": ["ruby", "mechanize-ruby"], "comments": [{"owner": {"reputation": 1082, "user_id": 5381605, "user_type": "registered", "accept_rate": 76, "profile_image": "https://lh5.googleusercontent.com/-5ZF_yJyjvcQ/AAAAAAAAAAI/AAAAAAAAAFM/lQbQAZxe2wo/photo.jpg?sz=128", "display_name": "binarymason", "link": "https://stackoverflow.com/users/5381605/binarymason"}, "edited": false, "score": 0, "creation_date": 1444219642, "post_id": 32982705, "comment_id": 53807999, "body": "Be advised that mechanize is not meant to interact with JavaScript. You may want to look into Watir which acts like a full fledged browser."}, {"owner": {"reputation": 69, "user_id": 5416417, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/726eadcfd4aa9eb7ebea20c20a58a890?s=128&d=identicon&r=PG&f=1", "display_name": "Dieter", "link": "https://stackoverflow.com/users/5416417/dieter"}, "reply_to_user": {"reputation": 1082, "user_id": 5381605, "user_type": "registered", "accept_rate": 76, "profile_image": "https://lh5.googleusercontent.com/-5ZF_yJyjvcQ/AAAAAAAAAAI/AAAAAAAAAFM/lQbQAZxe2wo/photo.jpg?sz=128", "display_name": "binarymason", "link": "https://stackoverflow.com/users/5381605/binarymason"}, "edited": false, "score": 0, "creation_date": 1444261822, "post_id": 32982705, "comment_id": 53833365, "body": "Thanks, just looked at it.  seems like it will work.  odd thing is it actually opens a browser, i&#39;d prefer to not see it but oh well"}], "owner": {"reputation": 69, "user_id": 5416417, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/726eadcfd4aa9eb7ebea20c20a58a890?s=128&d=identicon&r=PG&f=1", "display_name": "Dieter", "link": "https://stackoverflow.com/users/5416417/dieter"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 304, "favorite_count": 0, "answer_count": 0, "score": 4, "last_activity_date": 1444184828, "creation_date": 1444184024, "last_edit_date": 1444184828, "question_id": 32982705, "link": "https://stackoverflow.com/questions/32982705/ruby-mechanize-referencing-pop-up-new-window", "title": "Ruby Mechanize referencing pop up/new window", "body": "<p>I'm using Ruby with mechanize gem to try to scrape data from a website.  my question is, after login on the referenced page, the website launches a new page where the actual data lives.  How to I reference that new page in mechanize?</p>\n\n<p>script so far:</p>\n\n<pre><code>require 'mechanize'\n\na = Mechanize.new\npage = a.get('http://www.obfuscation.com')\nformd = page.forms[0]\n\nformd.txtUserName = 'username'\nformd.txtPassword = 'password'\nformd.submit\n</code></pre>\n\n<p>This is where I lose track programatically of the new spawned browser window.</p>\n\n<p>your help is greatly appreciated</p>\n"}]