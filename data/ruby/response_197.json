[{"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4"], "comments": [{"owner": {"reputation": 6462, "user_id": 3784008, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/55ou4.jpg?s=128&g=1", "display_name": "anothermh", "link": "https://stackoverflow.com/users/3784008/anothermh"}, "edited": false, "score": 0, "creation_date": 1539825894, "post_id": 52865065, "comment_id": 92645448, "body": "See <a href=\"https://stackoverflow.com/help/mcve\">How to create a Minimal, Complete, and Verifiable example</a>."}, {"owner": {"reputation": 1263, "user_id": 10221813, "user_type": "registered", "profile_image": "https://graph.facebook.com/10160530708235447/picture?type=large", "display_name": "uno", "link": "https://stackoverflow.com/users/10221813/uno"}, "reply_to_user": {"reputation": 6462, "user_id": 3784008, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/55ou4.jpg?s=128&g=1", "display_name": "anothermh", "link": "https://stackoverflow.com/users/3784008/anothermh"}, "edited": false, "score": 0, "creation_date": 1539830384, "post_id": 52865065, "comment_id": 92646281, "body": "thx fixed it to relevant only"}], "answers": [{"comments": [{"owner": {"reputation": 1263, "user_id": 10221813, "user_type": "registered", "profile_image": "https://graph.facebook.com/10160530708235447/picture?type=large", "display_name": "uno", "link": "https://stackoverflow.com/users/10221813/uno"}, "edited": false, "score": 0, "creation_date": 1539850605, "post_id": 52866320, "comment_id": 92653029, "body": "For the &quot;  validates_uniqueness_of :category &quot; if i don&#39;t have this,the categories will keep duplicating the cateogires from the seed.rb on import.  Is there a better way to be creating categories, such as something like &quot;CATEGORY = %w{ cat1 cat2 cat3 cat4 }&quot; and call it that way? or maybe something else you know would be better practice?"}, {"owner": {"reputation": 1263, "user_id": 10221813, "user_type": "registered", "profile_image": "https://graph.facebook.com/10160530708235447/picture?type=large", "display_name": "uno", "link": "https://stackoverflow.com/users/10221813/uno"}, "edited": false, "score": 0, "creation_date": 1539850675, "post_id": 52866320, "comment_id": 92653064, "body": "i fixed my models to.. category.rb to has_many :listings.... and listings.rb to   belongs_to :category, required: false Is that the rigth way?"}], "tags": [], "owner": {"reputation": 2496, "user_id": 3046905, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/692eb06201cbed91c3c6a9cf11ed0511?s=128&d=identicon&r=PG", "display_name": "Ilya Konyukhov", "link": "https://stackoverflow.com/users/3046905/ilya-konyukhov"}, "is_accepted": false, "score": 0, "last_activity_date": 1539831428, "creation_date": 1539831428, "answer_id": 52866320, "question_id": 52865065, "link": "https://stackoverflow.com/questions/52865065/allowing-multiple-records-in-category-to-submit-to-listing/52866320#52866320", "title": "Allowing multiple records in category to submit to listing", "body": "<p>Your data relationship seems to be incorrect. Take a look:</p>\n\n<ul>\n<li><code>Category</code> model validates uniqueness of <code>category</code>. But there is no field category in categories table. It seems name should be used instead.</li>\n<li><code>Listing</code> model <code>has and belongs to many</code> <code>categories</code>. For Rails it means that these 2 tables are connected via 3rd table, <code>categories_listings</code>, which holds <code>category_id</code> and <code>listing_id</code>. But your database schema is different - in your tables <code>category_id</code> belongs to <code>listings</code> table, which matches [<code>Category</code> model <code>has many</code> <code>listings</code>] association. There is a contradiction.</li>\n</ul>\n\n<p>I would consider data model as a basis for the whole application. Having the correct data model, writing code for controllers and views becomes transparent and obvious. Fix your data model first and use <a href=\"https://api.rubyonrails.org/classes/ActiveRecord/NestedAttributes/ClassMethods.html\" rel=\"nofollow noreferrer\">nested attributes</a> for saving associated models.</p>\n"}, {"comments": [{"owner": {"reputation": 1263, "user_id": 10221813, "user_type": "registered", "profile_image": "https://graph.facebook.com/10160530708235447/picture?type=large", "display_name": "uno", "link": "https://stackoverflow.com/users/10221813/uno"}, "edited": false, "score": 0, "creation_date": 1539852113, "post_id": 52866402, "comment_id": 92653910, "body": "How should i then define my categories the best way.  I am currently using the seed.rb and inputing that way (which is why i use  validates_uniqueness_of :category so i dont create duplicates when adding new ones)."}, {"owner": {"reputation": 32131, "user_id": 2346461, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/i3xAf.jpg?s=128&g=1", "display_name": "Pavan", "link": "https://stackoverflow.com/users/2346461/pavan"}, "reply_to_user": {"reputation": 1263, "user_id": 10221813, "user_type": "registered", "profile_image": "https://graph.facebook.com/10160530708235447/picture?type=large", "display_name": "uno", "link": "https://stackoverflow.com/users/10221813/uno"}, "edited": false, "score": 0, "creation_date": 1539852611, "post_id": 52866402, "comment_id": 92654191, "body": "@uno It depends on what you want to do? Do you want to create listings along with categories, then you should use accepts_nested_attributes_for along with fields_for. Or if you want to create listing for an existing category, then try my approach. And FYI this <code>validates_uniqueness_of :category</code> invalid"}, {"owner": {"reputation": 1263, "user_id": 10221813, "user_type": "registered", "profile_image": "https://graph.facebook.com/10160530708235447/picture?type=large", "display_name": "uno", "link": "https://stackoverflow.com/users/10221813/uno"}, "edited": false, "score": 0, "creation_date": 1539852869, "post_id": 52866402, "comment_id": 92654322, "body": "I&#39;m using categories as a way to search through listings.  so i want, when creating a listing, to be able to choose multiple categories to go along with the listing.  and categories will be pre-defined.  although, new ones will/should be able to be added by admins (not by users) to then have the ability to add the category to an existing or new listing.  hope that explains it.  im not exactly sure if im doing this correctly"}, {"owner": {"reputation": 1263, "user_id": 10221813, "user_type": "registered", "profile_image": "https://graph.facebook.com/10160530708235447/picture?type=large", "display_name": "uno", "link": "https://stackoverflow.com/users/10221813/uno"}, "edited": false, "score": 0, "creation_date": 1539897712, "post_id": 52866402, "comment_id": 92678959, "body": "i updated my code in the original post.  The entries are saving but the categories_listings table nothing saves into it.  Is there a certain way I need to set up my form to enter into it or?"}, {"owner": {"reputation": 1263, "user_id": 10221813, "user_type": "registered", "profile_image": "https://graph.facebook.com/10160530708235447/picture?type=large", "display_name": "uno", "link": "https://stackoverflow.com/users/10221813/uno"}, "edited": false, "score": 0, "creation_date": 1539941155, "post_id": 52866402, "comment_id": 92691630, "body": "I got an error: &quot;wrong number of arguments (given 0, expected 1..2)&quot; Also, i updated my category.rb assume you meant to update my category.rb model to what you said? and when this does work, i am worried about what if only 1 category gets entered, because i want to allow 1 - 5 categories per listing.  also concerned with the &quot;mutliple =&gt; true&quot; because i also tried using a checkbox system but that also wouldn&#39;t work"}, {"owner": {"reputation": 32131, "user_id": 2346461, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/i3xAf.jpg?s=128&g=1", "display_name": "Pavan", "link": "https://stackoverflow.com/users/2346461/pavan"}, "reply_to_user": {"reputation": 1263, "user_id": 10221813, "user_type": "registered", "profile_image": "https://graph.facebook.com/10160530708235447/picture?type=large", "display_name": "uno", "link": "https://stackoverflow.com/users/10221813/uno"}, "edited": false, "score": 0, "creation_date": 1539941643, "post_id": 52866402, "comment_id": 92691873, "body": "@uno My bad! updated the answer. If only one category is selected then only one entry will be created in categories_listings table. :multiple =&gt; true lets you to select multiple categories from the dropdown. If you want that with checkboxes, use <a href=\"https://apidock.com/rails/ActionView/Helpers/FormHelper/check_box\" rel=\"nofollow noreferrer\"><code>check_box</code></a> helper with <code>:multiple =&gt; true</code>  or use <a href=\"https://apidock.com/rails/v4.0.2/ActionView/Helpers/FormOptionsHelper/collection_check_boxes\" rel=\"nofollow noreferrer\"><code>collection_check_boxes</code></a>"}, {"owner": {"reputation": 1263, "user_id": 10221813, "user_type": "registered", "profile_image": "https://graph.facebook.com/10160530708235447/picture?type=large", "display_name": "uno", "link": "https://stackoverflow.com/users/10221813/uno"}, "edited": false, "score": 0, "creation_date": 1539942084, "post_id": 52866402, "comment_id": 92692091, "body": "Looks like i&#39;m receiving the error still : &quot;wrong number of arguments (given 0, expected 1..2)&quot;  my params are:: &quot;  params.require(:listing).permit(:attr1, :name, :description, :price, :image, :category_ids [])&quot;"}, {"owner": {"reputation": 1263, "user_id": 10221813, "user_type": "registered", "profile_image": "https://graph.facebook.com/10160530708235447/picture?type=large", "display_name": "uno", "link": "https://stackoverflow.com/users/10221813/uno"}, "edited": false, "score": 0, "creation_date": 1539942738, "post_id": 52866402, "comment_id": 92692457, "body": "140, on the params.requre line.  Here&#39;s the CMD: app/controllers/listings_controller.rb:140:in <code>[]&#39; app&#47;controllers&#47;listings_controller.rb:140:in </code>listing_params&#39; app/controllers/listings_controller.rb:94:in `create&#39;"}, {"owner": {"reputation": 32131, "user_id": 2346461, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/i3xAf.jpg?s=128&g=1", "display_name": "Pavan", "link": "https://stackoverflow.com/users/2346461/pavan"}, "reply_to_user": {"reputation": 1263, "user_id": 10221813, "user_type": "registered", "profile_image": "https://graph.facebook.com/10160530708235447/picture?type=large", "display_name": "uno", "link": "https://stackoverflow.com/users/10221813/uno"}, "edited": false, "score": 0, "creation_date": 1539942870, "post_id": 52866402, "comment_id": 92692535, "body": "@uno You should change  <code>:category_ids []</code> to  <code>:category_ids =&gt; []</code> or  <code>category_ids: []</code>"}], "tags": [], "owner": {"reputation": 32131, "user_id": 2346461, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/i3xAf.jpg?s=128&g=1", "display_name": "Pavan", "link": "https://stackoverflow.com/users/2346461/pavan"}, "is_accepted": true, "score": 0, "last_activity_date": 1539941375, "last_edit_date": 1539941375, "creation_date": 1539831964, "answer_id": 52866402, "question_id": 52865065, "link": "https://stackoverflow.com/questions/52865065/allowing-multiple-records-in-category-to-submit-to-listing/52866402#52866402", "title": "Allowing multiple records in category to submit to listing", "body": "<blockquote>\n  <p>When I use the first \"form.select :category_id\" which brings up 3 drop\n  downs, only the last selected drop down saves. If i select 3 separate\n  categories, only the last one picked will save. I want to be able to\n  have multiple categories chosen for each listing.</p>\n</blockquote>\n\n<p>Ofcourse, you are having three <strong>same dropdowns</strong> for the <strong>same attribute</strong> and it will just picks the last dropdown's selected value and passes it to the <code>params</code>.</p>\n\n<p>You need to set it as <strong>one dropdown</strong> and allow <strong>multiple selections</strong> on it like so</p>\n\n<pre><code>&lt;%= form.select :category_ids, options_from_collection_for_select(Category.all, :id, :name), :prompt =&gt; \"Select a Category\", :multiple =&gt; true %&gt;\n</code></pre>\n\n<p>Notice the changes <code>:category_ids</code> and <code>:multiple =&gt; true</code>. <code>:category_ids</code> is a method(<a href=\"https://apidock.com/rails/ActiveRecord/Associations/ClassMethods/has_and_belongs_to_many\" rel=\"nofollow noreferrer\"><code>collection_singular_ids</code></a>) that ships for <em>many-to-many</em> associations which will be used by Rails under the hood to <strong>create entries for the joined table</strong>.</p>\n\n<p><code>:multiple =&gt; true</code> allows you to select more than one option and pass those <code>ids</code> as array. For instance like this <code>category_ids: [\"1\",\"2\",\"3\"]</code></p>\n\n<p>Now coming to your controller code, you <strong>shouldn't be building the listings</strong> for categories as your approach is different. Change you new method to below</p>\n\n<pre><code>def new\n  @listing = Listing.new\nend\n</code></pre>\n\n<p>It is also not necessary to have <code>@categories = Category.all</code> as you are explicitly calling <code>Category.all</code> in the <code>select</code></p>\n\n<p>And finally whitelist <code>category_ids</code> in the <code>listing_params</code> like so</p>\n\n<pre><code>params.require(:listing).permit(:attr1, .... category_ids: [])\n</code></pre>\n\n<blockquote>\n  <p>Between the \"~~~~~~~~~~~~~~~~~~~~~\" are my attempts to testing it.\n  They don't even show up within the form though, which I don't know\n  why.</p>\n</blockquote>\n\n<p>Well, you are messing up with <a href=\"https://api.rubyonrails.org/classes/ActiveRecord/NestedAttributes/ClassMethods.html\" rel=\"nofollow noreferrer\"><code>accepts_nested_attributes_for</code></a> and as well with <a href=\"https://api.rubyonrails.org/v5.2.1/classes/ActionView/Helpers/FormHelper.html#method-i-fields_for\" rel=\"nofollow noreferrer\"><code>fields_for</code></a>. Read on!</p>\n\n<p><strong>Note:</strong></p>\n\n<p>Also as <strong>@IIya Konyukhov</strong> mentioned, your schema looks different for a <em>HABTM</em> association. You should alter your schema for to fit the needs of your approach to work.</p>\n\n<p><strong>Update #1</strong></p>\n\n<blockquote>\n  <p>I'm using categories as a way to search through listings. so i want,\n  when creating a listing, to be able to choose multiple categories to\n  go along with the listing. and categories will be pre-defined.</p>\n</blockquote>\n\n<p>The above mentioned approach should fit your need, but there are more tweaks need to be done in  your code to make it work.</p>\n\n<p>1) The associations in <code>Category</code> model are flawed. You need to change <code>has_many :listings</code> to <code>has_and_belongs_to_many :listings</code></p>\n\n<p>2) Remove <code>validates_uniqueness_of :category</code> from the Category model as it is not valid.</p>\n\n<p>3) Remove <code>category_id</code> from <code>listings</code> table</p>\n\n<p>4) Generate a HABTM joined-table for <code>listings</code> and <code>categories</code> as below</p>\n\n<pre><code>rails generate migration CreateJoinTableCategoryListing category listing\n</code></pre>\n\n<p>Now upon saving the listing, rails under the hood will create entries for <code>categories_listings</code> which will be correct for above mentioned approach.</p>\n\n<blockquote>\n  <p>Although, new ones will/should be able to be added by admins (not by\n  users) to then have the ability to add the category to an existing or\n  new listing</p>\n</blockquote>\n\n<p>This can also be done by the same approach as above for to create a new listing with existing categories. And just render the edit form of the listing to add an existing category for that existed listing. You just need to make sure these routes are different and can only be accessed by admins.</p>\n\n<p><strong>Update #2:</strong></p>\n\n<p>You need to remove your current associations in <code>Listing</code> model and add the following code in it.</p>\n\n<pre><code>#listing.rb\nhas_and_belongs_to_many :categories\n</code></pre>\n\n<p>And also remove <code>category_id</code> from the params list. Just keep <code>category_ids: []</code></p>\n\n<pre><code>params.require(:listing).permit(:attr1, :name, :description, :price, :image, category_ids: [])\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 34, "user_id": 10522412, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/76a3f1bcdd6ec0d99e8342da0c24f657?s=128&d=identicon&r=PG&f=1", "display_name": "Jame", "link": "https://stackoverflow.com/users/10522412/jame"}, "is_accepted": false, "score": 0, "last_activity_date": 1539849143, "creation_date": 1539849143, "answer_id": 52869374, "question_id": 52865065, "link": "https://stackoverflow.com/questions/52865065/allowing-multiple-records-in-category-to-submit-to-listing/52869374#52869374", "title": "Allowing multiple records in category to submit to listing", "body": "<p><a href=\"https://railsguide.org/rails/ActiveRecord::Associations::ClassMethods/has_and_belongs_to_many\" rel=\"nofollow noreferrer\">has_and_belongs_to_many</a> just supports array of nested parameters \nyou should permit parameters like this <code>params.require(:listing).permit(:attr, ..., category_ids: [])</code>\nthen change on form with this code</p>\n\n<pre><code>&lt;%= form.select :category_ids, options_from_collection_for_select(Category.all, :id, :name), :prompt =&gt; \"Select Categories\", multiple: true %&gt;\n</code></pre>\n"}], "owner": {"reputation": 1263, "user_id": 10221813, "user_type": "registered", "profile_image": "https://graph.facebook.com/10160530708235447/picture?type=large", "display_name": "uno", "link": "https://stackoverflow.com/users/10221813/uno"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 72, "favorite_count": 0, "accepted_answer_id": 52866402, "answer_count": 3, "score": 0, "last_activity_date": 1539941375, "creation_date": 1539819897, "last_edit_date": 1539897428, "question_id": 52865065, "link": "https://stackoverflow.com/questions/52865065/allowing-multiple-records-in-category-to-submit-to-listing", "title": "Allowing multiple records in category to submit to listing", "body": "<p>I want multiple (an array of...) category_id's to be saved to each listing, if more than one are chosen.  Below is how everything is set up, including how categories work alongside with listings.</p>\n\n<p>Category model:</p>\n\n<pre><code>class Category &lt; ApplicationRecord\n  validates_uniqueness_of :category\n  has_many :listings\n</code></pre>\n\n<p>Listing model:</p>\n\n<pre><code>  has_and_belongs_to_many :categories, required: false\n  attr_accessor :new_category_name\n  before_save :create_category_from_name\n\n  # has_many :categories\n</code></pre>\n\n<p>Scheme (for categories and listings):</p>\n\n<pre><code>  create_table \"categories\", force: :cascade do |t|\n    t.string \"name\"\n    t.datetime \"created_at\", null: false\n    t.datetime \"updated_at\", null: false\n  end\n\n  create_table \"listings\", force: :cascade do |t|\n    t.string \"name\"\n    t.text \"description\"\n    t.decimal \"price\"\n    t.datetime \"created_at\", null: false\n    t.datetime \"updated_at\", null: false\n    t.string \"image\"\n    t.integer \"user_id\"\n    t.integer \"category_id\"\n    t.index [\"category_id\"], name: \"index_listings_on_category_id\"\n  end\n</code></pre>\n\n<p>I then have the categories defined within the seed.rb and then rails db:seed to input them when i need to add them.</p>\n\n<p>Listing Controller for New:</p>\n\n<pre><code>  def new\n    @listing = Listing.new\n    @categories = Category.all\n\n    3.times do\n      @listing.categories.build\n    end\n\n\n  end\n</code></pre>\n\n<p>Form Views for creating a Listing (in brief): </p>\n\n<pre><code>&lt;%= form_with(model: listing, local: true) do |form| %&gt;\n\n&lt;%= form.label \"Choose Up to 3 Categories (1 required)\"%&gt;\n\n  &lt;div class=\"space\"&gt;\n    &lt;%= form.select :category_id, options_from_collection_for_select(Category.all, :id, :name), :prompt =&gt; \"Select a Category\" %&gt;\n    &lt;%= form.select :category_id, options_from_collection_for_select(Category.all, :id, :name), :prompt =&gt; \"Select a Category\" %&gt;\n    &lt;%= form.select :category_id, options_from_collection_for_select(Category.all, :id, :name), :prompt =&gt; \"Select a Category\" %&gt;\n  &lt;/div&gt;\n\n~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\n\n  &lt;%= form.label \"Choose Up to 3 Categories (1 required)\"%&gt;\n\n    &lt;div class=\"space\"&gt;\n  &lt;% form.fields_for :category_id do |c| %&gt;\n    &lt;%= c.select :category_id, options_from_collection_for_select(Category.all, :id, :name), :prompt =&gt; \"Select a Category\" %&gt;\n    &lt;% end %&gt;\n  &lt;/div&gt;\n\n  &lt;% form.fields_for :category_id do |c| %&gt;\n    &lt;%= c.text_field :category_id %&gt;\n    &lt;% end %&gt;\n\n    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\n</code></pre>\n\n<p>Between the \"~~~~~~~~~~~~~~~~~~~~~\" are my attempts to testing it.  They don't even show up within the form though, which I don't know why.</p>\n\n<p>When I use the first  \"form.select :category_id\" which brings up 3 drop downs, only the last selected drop down saves.  If i select 3 separate categories, only the last one picked will save.  I want to be able to have multiple categories chosen for each listing.</p>\n\n<p>How do i allow multiple categories to be saved when creating a new listing? Whether a dropdown, checkboxes, etc.  Just need the possibility of more than one to save to one listing, if more than one are chosen by the user.</p>\n\n<p><strong>UPDATE:</strong></p>\n\n<p>Schema:</p>\n\n<pre><code>create_table \"categories\", force: :cascade do |t|\n    t.string \"name\"\n    t.datetime \"created_at\", null: false\n    t.datetime \"updated_at\", null: false\n  end\n\n  create_table \"categories_listings\", id: false, force: :cascade do |t|\n    t.integer \"category_id\", null: false\n    t.integer \"listing_id\", null: false\n  end\n</code></pre>\n\n<p>View form:</p>\n\n<pre><code>&lt;%= form.select :category_ids, options_from_collection_for_select(Category.all, :id, :name), :prompt =&gt; \"Select a Category\", :multiple =&gt; true %&gt;\n</code></pre>\n\n<p>Control params:</p>\n\n<pre><code>params.require(:listing).permit(:attr1, :name, :description, :price, :image, :category_id, category_ids: [])\n</code></pre>\n\n<p>Models:</p>\n\n<pre><code>    Category\n      has_and_belongs_to_many :listings\n\n\nListing\n\nbelongs_to :category, required: false\n  belongs_to :categories_listings, required: false\n</code></pre>\n"}, {"tags": ["ruby", "graphql", "graphql-ruby"], "answers": [{"tags": [], "owner": {"reputation": 34621, "user_id": 259900, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/c78e40f8fc27a048f10ece6956a2fdf2?s=128&d=identicon&r=PG", "display_name": "Kevin Sylvestre", "link": "https://stackoverflow.com/users/259900/kevin-sylvestre"}, "is_accepted": true, "score": 0, "last_activity_date": 1539993437, "creation_date": 1539993437, "answer_id": 52901228, "question_id": 52864606, "link": "https://stackoverflow.com/questions/52864606/graphql-ruby-subscription-executing-initial-query/52901228#52901228", "title": "GraphQL Ruby Subscription Executing Initial Query", "body": "<p>The author of GraphQL-ruby responded to an issue stating:</p>\n\n<p><a href=\"https://github.com/rmosolgo/graphql-ruby/issues/1910\" rel=\"nofollow noreferrer\">https://github.com/rmosolgo/graphql-ruby/issues/1910</a></p>\n\n<blockquote>\n  <p>No, it's not possible to return something on an initial subscription query. I'm currently working on a new runtime for GraphQL-Ruby and I'll add this issue to my list (<a href=\"https://github.com/rmosolgo/graphql-ruby/issues/1884\" rel=\"nofollow noreferrer\">#1884</a>), since many folks have asked for similar improvements to subscriptions.</p>\n</blockquote>\n\n<p>So not now, maybe later.</p>\n"}], "owner": {"reputation": 34621, "user_id": 259900, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/c78e40f8fc27a048f10ece6956a2fdf2?s=128&d=identicon&r=PG", "display_name": "Kevin Sylvestre", "link": "https://stackoverflow.com/users/259900/kevin-sylvestre"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 141, "favorite_count": 0, "accepted_answer_id": 52901228, "answer_count": 1, "score": 0, "last_activity_date": 1539993437, "creation_date": 1539816283, "question_id": 52864606, "link": "https://stackoverflow.com/questions/52864606/graphql-ruby-subscription-executing-initial-query", "title": "GraphQL Ruby Subscription Executing Initial Query", "body": "<p>With <a href=\"http://graphql-ruby.org/\" rel=\"nofollow noreferrer\">GraphQL Ruby</a> it possible to have a GraphQL subscription also return resolves when subscribing? For example:</p>\n\n<pre><code>module Types\n  class SampleType &lt; GraphQL::Schema::Object\n    field :greeting, String, null: false\n\n    def greeting\n     'Howdy!'\n    end\n  end\nend\n\nclass SampleSchema &lt; GraphQL::Schema\n  subscription Types::SampleType\n  query Types::SampleType\nend\n\nSampleSchema.execute('subscription greeting { greeting }')['data'] # nil - but want the same as query\nSampleSchema.execute('query greeting { greeting }')['data'] # { greeting: 'Howdy!' }\n</code></pre>\n\n<p>Note: have found this <a href=\"http://graphql-ruby.org/subscriptions/subscription_type.html\" rel=\"nofollow noreferrer\">Subscription Type</a> documents that specify the return value of the resolver is not used for data (only authorization).</p>\n"}, {"tags": ["ruby", "ruby-on-rails-4", "factory-bot"], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 10524525, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-urYklAlAWWg/AAAAAAAAAAI/AAAAAAAAAEo/TJrSV8Sdj7M/photo.jpg?sz=128", "display_name": "Noah Guy", "link": "https://stackoverflow.com/users/10524525/noah-guy"}, "is_accepted": false, "score": 0, "last_activity_date": 1539872772, "creation_date": 1539872772, "answer_id": 52876275, "question_id": 52864125, "link": "https://stackoverflow.com/questions/52864125/running-multiple-factories-of-the-same-object-in-production/52876275#52876275", "title": "Running Multiple Factories of the Same Object in Production", "body": "<p>The first example <a href=\"https://github.com/brennovich/cheat-ruby-sheets/blob/master/factory_bot.md\" rel=\"nofollow noreferrer\">here</a> might be what you're looking for.</p>\n\n<p>On one of the latest versions of factory-bot, you can set up concurrent factories like this:</p>\n\n<pre><code>factory :orignal_class do\n  text 'original text'\nend\n\nfactory :new_class_factory, class: OriginalClass do\n  text 'this will be used instead when creating new_class_factory'\nend\n</code></pre>\n\n<p>When you invoke the second factory, it will still be of the same class as the first factory, but will instead use the fields defined in its factory over the original factory.</p>\n"}], "owner": {"reputation": 1, "user_id": 10520946, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-Ikk1xi4UUo0/AAAAAAAAAAI/AAAAAAAAAAA/ABtNlbC80t21d3eCtdZhmSthuQjhVhbxMw/mo/photo.jpg?sz=128", "display_name": "Mack Miller", "link": "https://stackoverflow.com/users/10520946/mack-miller"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 26, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1539872772, "creation_date": 1539813016, "question_id": 52864125, "link": "https://stackoverflow.com/questions/52864125/running-multiple-factories-of-the-same-object-in-production", "title": "Running Multiple Factories of the Same Object in Production", "body": "<p>At work, we're using Ruby 2.3.4, Rails 4.2.7, and FactoryGirl 4.0.0. We've run into the problem of having way too many traits in our base factories. We've started a project for replacing them and have a pattern in mind, but we need to be able to incrementally add our new factories to our production code while the original factories remain active.</p>\n\n<p>Are there any reasonable ways to get this done?</p>\n\n<p>This question, <a href=\"https://stackoverflow.com/questions/41892244/running-two-spec-folders-in-rails-with-rspec\">Running two spec folders in Rails with RSpec</a>, seems to have the same problem, but separate branches is not a feasible solution for us.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "google-app-engine"], "answers": [{"comments": [{"owner": {"reputation": 65, "user_id": 10492781, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FR9ZP.png?s=128&g=1", "display_name": "Amie", "link": "https://stackoverflow.com/users/10492781/amie"}, "edited": false, "score": 0, "creation_date": 1541112340, "post_id": 52883341, "comment_id": 93115945, "body": "Sorry for late reply (i was pulled away from this task but am back at it now).  All my rails apps were created with the ruby that i access via rvm.   I see from the article you posted that I should use Rbenv instead so I switched everything over but I still get the same error when I try gcloud deploy either remotely or from google shell.  Switching to rbenv made my local testing a nightmare so I think I&#39;m going to stick with heroku just for ease of use.  Or maybe Google Cloud Kubernetes instead of app engine."}], "tags": [], "owner": {"reputation": 1184, "user_id": 6938128, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7fcdfa61a165fe77418b79dc6eb5efb0?s=128&d=identicon&r=PG&f=1", "display_name": "George", "link": "https://stackoverflow.com/users/6938128/george"}, "is_accepted": true, "score": 0, "last_activity_date": 1539900929, "creation_date": 1539900929, "answer_id": 52883341, "question_id": 52864005, "link": "https://stackoverflow.com/questions/52864005/gcloud-app-deploy-fails-on-ruby-build-for-both-2-4-2-and-2-5-1/52883341#52883341", "title": "gcloud app deploy fails on ruby-build for both 2.4.2 and 2.5.1", "body": "<p>How did you set up your Ruby development environment? You may profit from taking a look at the \"Setting Up a Ruby Development Environment\" documentation <a href=\"https://cloud.google.com/ruby/docs/setup\" rel=\"nofollow noreferrer\">page</a>. \nThe lot of output from the deployment command may prove highly significant, in context. What is the output from gcloud app deploy --verbosity=debug?</p>\n"}], "owner": {"reputation": 65, "user_id": 10492781, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FR9ZP.png?s=128&g=1", "display_name": "Amie", "link": "https://stackoverflow.com/users/10492781/amie"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 119, "favorite_count": 0, "accepted_answer_id": 52883341, "answer_count": 1, "score": 1, "last_activity_date": 1539900929, "creation_date": 1539812310, "question_id": 52864005, "link": "https://stackoverflow.com/questions/52864005/gcloud-app-deploy-fails-on-ruby-build-for-both-2-4-2-and-2-5-1", "title": "gcloud app deploy fails on ruby-build for both 2.4.2 and 2.5.1", "body": "<p>I am moving over (I think) from heroku to gcloud for deploying my rails applications.  I stepped through the full tutorial provided by google here <a href=\"https://cloud.google.com/ruby/rails/appengine\" rel=\"nofollow noreferrer\">google appengine instructions</a></p>\n\n<p>Running gcloud app deploy produces a lot of output.  However, it seems to show signs of trouble when it tries to download the ruby image from gcp-runtime/ruby/ubuntu16.</p>\n\n<p>Each time at this spot,  I receive the following error:</p>\n\n<ol>\n<li>\"ruby-build: definition not found: ruby-2.5.1\" - this is when I\ntried to deploy a 2.5.1 application.  and </li>\n<li>\"ruby-build: definition not found: ruby-2.4.2\" - when I try to deploy a 2.4.2 application.</li>\n</ol>\n\n<p>For this app deploy test, I only created the skeleton rails site using rails new command.  Executed bundle install and updated the app.yaml as instructed on the site using the secret key.</p>\n\n<p>I am deploying in region north-america, if that info is useful</p>\n"}, {"tags": ["ruby", "selenium"], "answers": [{"comments": [{"owner": {"reputation": 346, "user_id": 4911426, "user_type": "registered", "accept_rate": 75, "profile_image": "https://graph.facebook.com/1087083604639482/picture?type=large", "display_name": "Shahboz", "link": "https://stackoverflow.com/users/4911426/shahboz"}, "edited": false, "score": 0, "creation_date": 1539812085, "post_id": 52863745, "comment_id": 92642188, "body": "So, I created a &quot;clicked?&quot; method that waits until the element is enabled, however, I am still unable to click on the element. Any idea? Check the updated code."}, {"owner": {"reputation": 5091, "user_id": 10474999, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9379ef6b63d5d67645354b797d3caa82?s=128&d=identicon&r=PG&f=1", "display_name": "Navarasu", "link": "https://stackoverflow.com/users/10474999/navarasu"}, "reply_to_user": {"reputation": 346, "user_id": 4911426, "user_type": "registered", "accept_rate": 75, "profile_image": "https://graph.facebook.com/1087083604639482/picture?type=large", "display_name": "Shahboz", "link": "https://stackoverflow.com/users/4911426/shahboz"}, "edited": false, "score": 0, "creation_date": 1539812473, "post_id": 52863745, "comment_id": 92642313, "body": "Editing the question with the answer will mislead that I have duplcated your question.Please revert it.  Please raise it as seprate question with html dom and explaination about what your trying to do. It has to be analysed based on the html you are tring ot interact"}, {"owner": {"reputation": 5091, "user_id": 10474999, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9379ef6b63d5d67645354b797d3caa82?s=128&d=identicon&r=PG&f=1", "display_name": "Navarasu", "link": "https://stackoverflow.com/users/10474999/navarasu"}, "reply_to_user": {"reputation": 346, "user_id": 4911426, "user_type": "registered", "accept_rate": 75, "profile_image": "https://graph.facebook.com/1087083604639482/picture?type=large", "display_name": "Shahboz", "link": "https://stackoverflow.com/users/4911426/shahboz"}, "edited": false, "score": 0, "creation_date": 1539813703, "post_id": 52863745, "comment_id": 92642750, "body": "Please raise it has seperate question with 3 items. Piece Html dom that you are trying to interact, The code which is failing and the expection it is throw."}], "tags": [], "owner": {"reputation": 5091, "user_id": 10474999, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9379ef6b63d5d67645354b797d3caa82?s=128&d=identicon&r=PG&f=1", "display_name": "Navarasu", "link": "https://stackoverflow.com/users/10474999/navarasu"}, "is_accepted": false, "score": 0, "last_activity_date": 1539811377, "last_edit_date": 1539811377, "creation_date": 1539811043, "answer_id": 52863745, "question_id": 52863582, "link": "https://stackoverflow.com/questions/52863582/what-is-the-equivalent-of-javas-elementtobeclickable-in-selenium-using-ruby/52863745#52863745", "title": "What is the equivalent of Java&#39;s elementToBeClickable in Selenium using Ruby?", "body": "<pre><code>wait.until(ExpectedConditions.elementToBeClickable (By.id(\"foo\")));\n</code></pre>\n\n<p>Below lines is exact equivalent of above java code,</p>\n\n<pre><code>wait.until { driver.find_element(id: \"foo\").enabled? }\n</code></pre>\n\n<p>Fact is the elementToBeClickable method in java is misleading, actually it will check enabled state of element.</p>\n\n<p>Refer the implementation of elementToBeClickable in ExpectedContions.java,</p>\n\n<pre><code>  /**\n   * An expectation for checking an element is visible and enabled such that you can click it.\n   *\n   * @param locator used to find the element\n   * @return the WebElement once it is located and clickable (visible and enabled)\n   */\n  public static ExpectedCondition&lt;WebElement&gt; elementToBeClickable(final By locator) {\n    return new ExpectedCondition&lt;WebElement&gt;() {\n      @Override\n      public WebElement apply(WebDriver driver) {\n        WebElement element = visibilityOfElementLocated(locator).apply(driver);\n        try {\n          if (element != null &amp;&amp; element.isEnabled()) {\n            return element;\n          }\n          return null;\n        } catch (StaleElementReferenceException e) {\n          return null;\n        }\n      }\n\n      @Override\n      public String toString() {\n        return \"element to be clickable: \" + locator;\n      }\n    };\n  }\n</code></pre>\n\n<p>Refer <a href=\"https://github.com/SeleniumHQ/selenium/blob/master/java/client/src/org/openqa/selenium/support/ui/ExpectedConditions.java\" rel=\"nofollow noreferrer\">this</a> in github.</p>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 12774619, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mCsN_gxXk0_dOGkN2N31gkeCrTT3cE8bLfpPqRX=k-s128", "display_name": "VATALA AISWARYA N150105", "link": "https://stackoverflow.com/users/12774619/vatala-aiswarya-n150105"}, "is_accepted": false, "score": 0, "last_activity_date": 1587718042, "last_edit_date": 1587718042, "creation_date": 1587702506, "answer_id": 61401165, "question_id": 52863582, "link": "https://stackoverflow.com/questions/52863582/what-is-the-equivalent-of-javas-elementtobeclickable-in-selenium-using-ruby/61401165#61401165", "title": "What is the equivalent of Java&#39;s elementToBeClickable in Selenium using Ruby?", "body": "<p>Actually there is no such direct method in Ruby programming language.</p>\n\n<p>Here is the alternative to check and wait until an element is displayed and enabled to perform operations on it like click, send_keys, etc:</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>wait = Selenium::WebDriver::Wait.new(:timeout =&gt; 10)\nelement = wait.until{\n   tmp_element = driver.find_element(:name, 'password')\n   tmp_element if tmp_element.enabled? &amp;&amp; tmp_element.displayed?\n}\n</code></pre>\n\n<p>Using <code>wait.until</code>, we can do it.<br>\nHope it will help you. If you have any questions, feel free to ask.</p>\n"}], "owner": {"reputation": 346, "user_id": 4911426, "user_type": "registered", "accept_rate": 75, "profile_image": "https://graph.facebook.com/1087083604639482/picture?type=large", "display_name": "Shahboz", "link": "https://stackoverflow.com/users/4911426/shahboz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 235, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1587718042, "creation_date": 1539810206, "last_edit_date": 1539835723, "question_id": 52863582, "link": "https://stackoverflow.com/questions/52863582/what-is-the-equivalent-of-javas-elementtobeclickable-in-selenium-using-ruby", "title": "What is the equivalent of Java&#39;s elementToBeClickable in Selenium using Ruby?", "body": "<p>I am new to Ruby scripting for the Automation framework. I am experimenting Selenium and Ruby combination for automation framework. What I've discovered is that, there is no elementToBeClickable in Ruby selenium? I have a script where I click on the element, using the regular click method. However that click doesn't work, element doesn't get clicked. So I am thinking of waiting for the element to be clickable, however Selenium's ruby library doesn't have that method like the ones in Java and C#. How do you guys wait for the element to be clickable in Ruby?</p>\n\n<pre><code>  def click_more_actions_button\n    more_actions_id = 'btnMoreActions'\n    el = @wd.find_element(id: more_actions_id)\n    el.click\n  end\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "activerecord"], "answers": [{"comments": [{"owner": {"reputation": 142, "user_id": 5563153, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2e2fcca7529cd4dbb45c796dc56ce4e4?s=128&d=identicon&r=PG&f=1", "display_name": "FedeCaceres", "link": "https://stackoverflow.com/users/5563153/fedecaceres"}, "edited": false, "score": 0, "creation_date": 1539809271, "post_id": 52863363, "comment_id": 92641083, "body": "external_organization_id is only on flags, and start_active and end_active is only on flag_histories."}, {"owner": {"reputation": 2496, "user_id": 3046905, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/692eb06201cbed91c3c6a9cf11ed0511?s=128&d=identicon&r=PG", "display_name": "Ilya Konyukhov", "link": "https://stackoverflow.com/users/3046905/ilya-konyukhov"}, "reply_to_user": {"reputation": 142, "user_id": 5563153, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2e2fcca7529cd4dbb45c796dc56ce4e4?s=128&d=identicon&r=PG&f=1", "display_name": "FedeCaceres", "link": "https://stackoverflow.com/users/5563153/fedecaceres"}, "edited": false, "score": 0, "creation_date": 1539809678, "post_id": 52863363, "comment_id": 92641268, "body": "So the query from answer should work without modification. I updated my answer -- see remark about &quot;OR&quot;"}, {"owner": {"reputation": 142, "user_id": 5563153, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2e2fcca7529cd4dbb45c796dc56ce4e4?s=128&d=identicon&r=PG&f=1", "display_name": "FedeCaceres", "link": "https://stackoverflow.com/users/5563153/fedecaceres"}, "edited": false, "score": 0, "creation_date": 1539809814, "post_id": 52863363, "comment_id": 92641314, "body": "Tried with this and worked! Thanks a lot  ` Flag.joins(:flag_histories)       .where(          &quot;flags.external_organization_id = :org_id AND           (flag_histories.start_active &lt;= :date AND flag_histories.end_active &gt;= :date            OR flag_histories.start_active &lt;= :date AND flag_histories.end_active IS NULL)&quot;,          { date: date, org_id: org_id }       ).group(:id) `"}], "tags": [], "owner": {"reputation": 2496, "user_id": 3046905, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/692eb06201cbed91c3c6a9cf11ed0511?s=128&d=identicon&r=PG", "display_name": "Ilya Konyukhov", "link": "https://stackoverflow.com/users/3046905/ilya-konyukhov"}, "is_accepted": true, "score": 1, "last_activity_date": 1539811197, "last_edit_date": 1539811197, "creation_date": 1539809210, "answer_id": 52863363, "question_id": 52863210, "link": "https://stackoverflow.com/questions/52863210/sql-to-activerecord/52863363#52863363", "title": "SQL to ActiveRecord", "body": "<p>Why don't you write your condition using a single <code>where</code> call, such as:</p>\n\n<pre><code>Flag.joins(:flag_histories)\n    .where(\n       \"external_organization_id = :org_id AND\n        (start_active &lt;= :date AND end_active &gt;= :date\n         OR start_active &lt;= :date AND end_active IS NULL)\",\n       { date: date, org_id: org_id }\n    ).group('flags.id')\n</code></pre>\n\n<p>or:</p>\n\n<pre><code>Flag.joins(:flag_histories)\n    .where(external_organization_id: org_id)\n    .where(\n       \"start_active &lt;= :date AND end_active &gt;= :date\n         OR start_active &lt;= :date AND end_active IS NULL\",\n       { date: date }\n    ).group('flags.id')\n</code></pre>\n\n<p>(I assume that each of <code>external_organization_id</code>, <code>start_active</code> and <code>end_active</code> fields are present in either <code>flags</code> or <code>flag_histories</code> tables, not in both, otherwise in the condition they need to be prepended with the correct table name)</p>\n\n<p><strong>UPDATE</strong>:</p>\n\n<p>I have never used the method <code>or</code> before, but as <a href=\"https://api.rubyonrails.org/classes/ActiveRecord/QueryMethods.html#method-i-or\" rel=\"nofollow noreferrer\">the documentation</a> says it has some specifics and cannot be used in the same way as <code>where</code>. Instead of condition, it should have another <code>Relation</code> as an argument:</p>\n\n<blockquote>\n<pre><code># File activerecord/lib/active_record/relation/query_methods.rb, line 622\ndef or(other)\n  unless other.is_a? Relation\n    raise ArgumentError, \"You have passed #{other.class.name} object to #or. Pass an ActiveRecord::Relation object instead.\"\n  end\n\n  spawn.or!(other)\nend\n</code></pre>\n</blockquote>\n"}], "owner": {"reputation": 142, "user_id": 5563153, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2e2fcca7529cd4dbb45c796dc56ce4e4?s=128&d=identicon&r=PG&f=1", "display_name": "FedeCaceres", "link": "https://stackoverflow.com/users/5563153/fedecaceres"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 149, "favorite_count": 0, "accepted_answer_id": 52863363, "answer_count": 1, "score": 0, "last_activity_date": 1539811197, "creation_date": 1539808587, "question_id": 52863210, "link": "https://stackoverflow.com/questions/52863210/sql-to-activerecord", "title": "SQL to ActiveRecord", "body": "<p>I'm having problems writing an ActiveRecord query.</p>\n\n<p>I've what I need on SQL</p>\n\n<pre><code>SELECT \"flags\".* FROM \"flags\" INNER JOIN \"flag_histories\"\n ON \"flag_histories\".\"flag_id\" = \"flags\".\"id\" WHERE \"flags\".\"external_organization_id\" = 2 AND\n  ((start_active &lt;=\"2018-10-16\"  AND  end_active &gt;=  \"2018-10-16\")\n  OR ( start_active &lt;= \"2018-10-16\" AND end_active IS NULL)) GROUP BY \"flags\".\"id\")\n</code></pre>\n\n<p>And this is what I tested on rails with no success</p>\n\n<pre><code>  Flag.joins(:flag_histories)\n  .where(\"end_active &gt;= :date AND start_active &lt;= :date\",\n            {date: date})\n  .or(\"end_active is null AND start_active &lt;= :date\",\n            {date: date})\n  .where(flags: {external_organization_id: org_id})\n  .group(:id)\n</code></pre>\n\n<p>By now I'm getting </p>\n\n<p>wrong number of arguments (given 2, expected 1)\nExtracted source (around line #28):</p>\n\n<pre><code>  .or(\"end_active is null AND start_active &lt;= :date\",\n</code></pre>\n\n<p>Can someone give me a hand with this?</p>\n\n<p>Thanks.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "puma"], "answers": [{"comments": [{"owner": {"reputation": 5610, "user_id": 413924, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/a5fae9bf6a8e05a023c96ba434a1dfd5?s=128&d=identicon&r=PG", "display_name": "DannyB", "link": "https://stackoverflow.com/users/413924/dannyb"}, "edited": false, "score": 2, "creation_date": 1580119918, "post_id": 52862530, "comment_id": 105979979, "body": "Isn&#39;t it weird that it needs to be solved manually, while rails uses <code>tmp&#47;pids&#47;server.pid</code> as the default location for puma pidfile?"}, {"owner": {"reputation": 2060, "user_id": 521259, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/f633b0cf2e883f9f5c11890746f1dbf2?s=128&d=identicon&r=PG", "display_name": "Harm de Wit", "link": "https://stackoverflow.com/users/521259/harm-de-wit"}, "edited": false, "score": 3, "creation_date": 1585164097, "post_id": 52862530, "comment_id": 107670416, "body": "Rails automatically creates the folder during initialization when you start the server with <code>bundle exec rails server (puma)</code>. This folder creation will be skipped if you start the server with <code>bundle exec puma</code>, resulting in the error. It would be nice though if both commands had the same result, saves some errors like these."}, {"owner": {"reputation": 16900, "user_id": 597992, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/d265520bc3ae286b9b3e05e35812cc97?s=128&d=identicon&r=PG", "display_name": "jpw", "link": "https://stackoverflow.com/users/597992/jpw"}, "edited": false, "score": 0, "creation_date": 1602384766, "post_id": 52862530, "comment_id": 113701890, "body": "Just as an aside, if your app needs to be pushed to a server (for example Heroku), and if you previously had /tmp/* in your .gitignore you need to add a .keep file to the pids folder, re-add the pids folder (and the .keep file) to the git repo using <code>git add -f</code>, and add an exclusion to .gitignore to not exclude the pids folder and the .keep file."}, {"owner": {"reputation": 5237, "user_id": 2325924, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/XSXrT.jpg?s=128&g=1", "display_name": "7urkm3n", "link": "https://stackoverflow.com/users/2325924/7urkm3n"}, "edited": false, "score": 0, "creation_date": 1604910794, "post_id": 52862530, "comment_id": 114480632, "body": "<code>mkdir -p tmp&#47;pids</code> create recursively"}, {"owner": {"reputation": 686, "user_id": 1534137, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/8f9712102acae28ffe827b8c88a1aac8?s=128&d=identicon&r=PG", "display_name": "Barry", "link": "https://stackoverflow.com/users/1534137/barry"}, "edited": false, "score": 0, "creation_date": 1610545034, "post_id": 52862530, "comment_id": 116167410, "body": "Don&#39;t forget to update your <code>.dockerignore</code> file when you update your <code>.gitignore</code> to allow the new path to make it into your docker image."}], "tags": [], "owner": {"reputation": 2408, "user_id": 3100462, "user_type": "registered", "accept_rate": 79, "profile_image": "https://graph.facebook.com/1566955386/picture?type=large", "display_name": "Ramon Marques", "link": "https://stackoverflow.com/users/3100462/ramon-marques"}, "is_accepted": true, "score": 25, "last_activity_date": 1539805541, "creation_date": 1539805541, "answer_id": 52862530, "question_id": 52862529, "link": "https://stackoverflow.com/questions/52862529/no-such-file-or-directory-rb-sysopen-tmp-pids-puma-pid/52862530#52862530", "title": "No such file or directory @ rb_sysopen - tmp/pids/puma.pid", "body": "<p>Could solve it manually creating the necessary folders, then the server process could create the pid file.</p>\n\n<pre><code>mkdir tmp\nmkdir tmp/pids\n</code></pre>\n"}], "owner": {"reputation": 2408, "user_id": 3100462, "user_type": "registered", "accept_rate": 79, "profile_image": "https://graph.facebook.com/1566955386/picture?type=large", "display_name": "Ramon Marques", "link": "https://stackoverflow.com/users/3100462/ramon-marques"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 6838, "favorite_count": 1, "accepted_answer_id": 52862530, "answer_count": 1, "score": 6, "last_activity_date": 1539805541, "creation_date": 1539805541, "question_id": 52862529, "link": "https://stackoverflow.com/questions/52862529/no-such-file-or-directory-rb-sysopen-tmp-pids-puma-pid", "title": "No such file or directory @ rb_sysopen - tmp/pids/puma.pid", "body": "<p>I'm trying to start puma, but at the last step it fails like this:</p>\n\n<pre><code>16:38:09 web.1  | /home/ramonpm/.rvm/gems/ruby-2.2.7/gems/puma-3.9.1/lib/puma/launcher.rb:130:in `initialize': No such file or directory @ rb_sysopen - tmp/pids/puma.pid (Errno::ENOENT)\n16:38:09 web.1  |   from /home/ramonpm/.rvm/gems/ruby-2.2.7/gems/puma-3.9.1/lib/puma/launcher.rb:130:in `open'\n16:38:09 web.1  |   from /home/ramonpm/.rvm/gems/ruby-2.2.7/gems/puma-3.9.1/lib/puma/launcher.rb:130:in `write_pid'\n16:38:09 web.1  |   from /home/ramonpm/.rvm/gems/ruby-2.2.7/gems/puma-3.9.1/lib/puma/launcher.rb:103:in `write_state'\n16:38:09 web.1  |   from /home/ramonpm/.rvm/gems/ruby-2.2.7/gems/puma-3.9.1/lib/puma/single.rb:92:in `run'\n16:38:09 web.1  |   from /home/ramonpm/.rvm/gems/ruby-2.2.7/gems/puma-3.9.1/lib/puma/launcher.rb:174:in `run'\n16:38:09 web.1  |   from /home/ramonpm/.rvm/gems/ruby-2.2.7/gems/puma-3.9.1/lib/puma/cli.rb:77:in `run'\n16:38:09 web.1  |   from /home/ramonpm/.rvm/gems/ruby-2.2.7/gems/puma-3.9.1/bin/puma:10:in `&lt;top (required)&gt;'\n16:38:09 web.1  |   from /home/ramonpm/.rvm/gems/ruby-2.2.7/bin/puma:23:in `load'\n16:38:09 web.1  |   from /home/ramonpm/.rvm/gems/ruby-2.2.7/bin/puma:23:in `&lt;main&gt;'\n16:38:09 web.1  |   from /home/ramonpm/.rvm/gems/ruby-2.2.7/bin/ruby_executable_hooks:15:in `eval'\n16:38:09 web.1  |   from /home/ramonpm/.rvm/gems/ruby-2.2.7/bin/ruby_executable_hooks:15:in `&lt;main&gt;'\n16:38:09 web.1  | exited with code 1\n16:38:09 system | sending SIGTERM to all processes\n</code></pre>\n\n<p>Couldn't find a solution somewhere else, they are all related to different things.</p>\n"}, {"tags": ["ruby", "hash", "hashmap"], "answers": [{"comments": [{"owner": {"reputation": 32451, "user_id": 2516474, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a2179a340c0e84edc285d432211145d?s=128&d=identicon&r=PG", "display_name": "SteveTurczyn", "link": "https://stackoverflow.com/users/2516474/steveturczyn"}, "edited": false, "score": 0, "creation_date": 1539805172, "post_id": 52862173, "comment_id": 92639238, "body": "Great answer!  But why is <code>{ }</code> preferred over <code>Hash.new</code> ?"}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "reply_to_user": {"reputation": 32451, "user_id": 2516474, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a2179a340c0e84edc285d432211145d?s=128&d=identicon&r=PG", "display_name": "SteveTurczyn", "link": "https://stackoverflow.com/users/2516474/steveturczyn"}, "edited": false, "score": 2, "creation_date": 1539805227, "post_id": 52862173, "comment_id": 92639257, "body": "It&#39;s less verbose, which is generally the direction Ruby code steers, plus maps to other languages like JavaScript where that notation is identical. You use <code>Hash.new</code> for special cases like <code>Hash.new(0)</code> or <code>Hash.new { |h,k| ... }</code> where you need to customize the behaviour."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 2, "creation_date": 1539805355, "post_id": 52862173, "comment_id": 92639305, "body": "Very nice explanation. A quibble: perhaps &quot;equal&quot; rather than &quot;equivalent&quot;. Consider mentioning <code>h[k]</code> when hash <code>h</code> has no key <code>k</code>, <code>fetch</code> and defaults (as long as you&#39;ve gone this far)."}, {"owner": {"reputation": 13442, "user_id": 3982562, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2a3c7aae1d762372cda697833c602ec8?s=128&d=identicon&r=PG", "display_name": "3limin4t0r", "link": "https://stackoverflow.com/users/3982562/3limin4t0r"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 1, "creation_date": 1539806227, "post_id": 52862173, "comment_id": 92639703, "body": "@CarySwoveland It depends on your meaning of &quot;equal&quot;. The contents of the hashes are equal, but the objects themselves aren&#39;t. <code>a.equal? b #=&gt; false</code> When converted to an array they also wouldn&#39;t be considered equal. <code>a.to_a == b.to_a #=&gt; false</code> In my opinion &quot;equivalent&quot; is a better fit, but in hash context &quot;equal&quot; also works."}, {"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 1, "creation_date": 1539807873, "post_id": 52862173, "comment_id": 92640444, "body": "I have to agree equivalent is the correct term here they are not necessarily equal  but they are equivalent as in can be compared in such a fashion as to represent equality when viewed in an isolated context. Especially given the fact that this question is about ordering and their order is certainly not equal as noted but they are equivalent in that their key =&gt; value associations are the same in an order ignorant fashion. Maybe you could say they are <code>eql?</code> :)"}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "reply_to_user": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1539810521, "post_id": 52862173, "comment_id": 92641624, "body": "@engineersmnky Here I&#39;m using &quot;are equivalent&quot; as in contrast to &quot;are identical&quot;. They contain identical data, but the order is different. What&#39;s odd is they&#39;re also <code>===</code>-quivalent too. Is that &quot;eequivalent&quot;?"}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "reply_to_user": {"reputation": 13442, "user_id": 3982562, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2a3c7aae1d762372cda697833c602ec8?s=128&d=identicon&r=PG", "display_name": "3limin4t0r", "link": "https://stackoverflow.com/users/3982562/3limin4t0r"}, "edited": false, "score": 0, "creation_date": 1539812257, "post_id": 52862173, "comment_id": 92642234, "body": "@JohanWentholt, that&#39;s a good point. I considered the different &quot;equals&quot; but am now unhappy with my suggested wording. I don&#39;t like &quot;equivalent&quot; or &quot;equal&quot;. Rather, I think the sentence should be reworded."}, {"owner": {"reputation": 167912, "user_id": 240443, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/495d675e3bc42ed1dee469e2ce701f1b?s=128&d=identicon&r=PG", "display_name": "Amadan", "link": "https://stackoverflow.com/users/240443/amadan"}, "edited": false, "score": 0, "creation_date": 1539842786, "post_id": 52862173, "comment_id": 92649260, "body": "@tadman Also, for an empty hash, literal notation <code>{}</code> will do <code>newhash 0</code>; <code>Hash.new</code> will generate <code>opt_send_without_block</code> method call to <code>hash_from_ary</code>. The former is slightly faster."}], "tags": [], "owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "is_accepted": false, "score": 7, "last_activity_date": 1539804435, "last_edit_date": 1539804435, "creation_date": 1539804048, "answer_id": 52862173, "question_id": 52862024, "link": "https://stackoverflow.com/questions/52862024/testing-order-using-a-hashmap/52862173#52862173", "title": "Testing order using a hashmap", "body": "<p>Ruby's <code>Hash</code> class represents a \"hash map\" or \"key-value dictionary\" in conventional terms. These are intended to be structures that allow quick random-access to individual elements, but the elements themselves have no intrinsic ordering.</p>\n\n<p>Internally Ruby's <code>Hash</code> organizes elements into their various locations in memory using the <code>hash</code> method each object must provide to be used as a key. Ruby's <code>Hash</code> is unusually, if not ludicrously flexible, in that an object, any object, can be used as a key, and it's preserved exactly as-is. Contrast with JavaScript where keys <em>must</em> be strings and strings only.</p>\n\n<p>That means you can do this:</p>\n\n<pre><code>{ 1 =&gt; 'Number One', '1' =&gt; 'String One', :one =&gt; 'Symbol One', 1.0 =&gt; 'Float One }\n</code></pre>\n\n<p>Where that has four completely different keys.</p>\n\n<p>This is in contrast to <code>Array</code> where the ordering is an important part of how an array works. You don't want to have a queue where things go in one order and come out in another.</p>\n\n<p>Now Ruby's <code>Hash</code> class used to have no intrinsic order, but due to popular demand now it stores order in terms of insertion. That is, the first items inserted are \"first\". Normally you don't depend on this behaviour explicitly, but it does show up if you're paying attention:</p>\n\n<pre><code>a = { x: '1', y: '2' }\n# =&gt; {:x=&gt;\"1, :y=&gt;\"2\"}\n\nb = { }\nb[:y] = '2'\nb[:x] = '1'\nb\n# =&gt; {:y=&gt;\"2\", :x=&gt;\"1\"}\n</code></pre>\n\n<p>Note that the order of the keys in <code>b</code> are reversed due to inserting them in reverse order. They're still equivalent though:</p>\n\n<pre><code>a == b\n# =&gt; true\n</code></pre>\n\n<p>When you call <code>sort</code> on a <code>Hash</code> you actually end up converting it to an array of key/value pairs, then sorting each of those:</p>\n\n<pre><code>b.sort\n# =&gt; [[:x, \"1\"], [:y, \"2\"]]\n</code></pre>\n\n<p>Which you could convert back into a <code>Hash</code> if you want:</p>\n\n<pre><code>b.sort.to_h\n# =&gt; {:x=&gt;\"1\", :y=&gt;\"2\"}\n</code></pre>\n\n<p>So now it's \"ordered\" properly. In practice this rarely matters, though, as you'll be accessing the keys individually as necessary. <code>b[:x]</code> doesn't care where the <code>:x</code> key is, it always returns the right value regardless.</p>\n\n<p>Some things to note about Ruby:</p>\n\n<ul>\n<li>Don't use <code>Hash.new</code>, instead just use <code>{ }</code> to represent an empty Hash structure.</li>\n<li>Don't use capital letters for variables, they have significant meaning in Ruby.  <code>Travel_Plans</code> is a constant, not a variable, because it starts with a capital letter. Those are reserved for <code>ClassName</code> and <code>CONSTANT_NAME</code> type usage. This should be <code>travel_plans</code>.</li>\n</ul>\n"}, {"tags": [], "owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "is_accepted": false, "score": 1, "last_activity_date": 1539841499, "creation_date": 1539841499, "answer_id": 52867685, "question_id": 52862024, "link": "https://stackoverflow.com/questions/52862024/testing-order-using-a-hashmap/52867685#52867685", "title": "Testing order using a hashmap", "body": "<p>First, the statement \"[h]ash does not have order\" is wrong as of today. It used to be true for really old and outdated versions of Ruby. You seem to have picked outdated information, which would be unreliable as of today.</p>\n\n<p>Second, the code you provided:</p>\n\n<pre><code>puts Travel_Plans.sort\n</code></pre>\n\n<p>is irrelevant to showing your point that the hash <code>Travel_Plans</code> has, i.e. preserves, the order. What you should have done to check whether the order is preserved, is to simply do:</p>\n\n<pre><code>p Travel_Plans\n</code></pre>\n\n<p>which would always result in showing the keys in the order <code>4</code>, <code>1</code>, <code>2</code>, <code>5</code>, <code>3</code>, which matches the order in which you assigned the key-values to the hash, thus indeed shows that hash preserves the order.</p>\n"}], "owner": {"reputation": 21, "user_id": 10364291, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-h1CUJ7uX8cU/AAAAAAAAAAI/AAAAAAAAO4s/OUWcOidT0Ys/photo.jpg?sz=128", "display_name": "Xavier Lemon", "link": "https://stackoverflow.com/users/10364291/xavier-lemon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 51, "favorite_count": 0, "answer_count": 2, "score": 2, "last_activity_date": 1539841499, "creation_date": 1539803455, "question_id": 52862024, "link": "https://stackoverflow.com/questions/52862024/testing-order-using-a-hashmap", "title": "Testing order using a hashmap", "body": "<p>I'm a ruby beginner and reading that a Hash does not have order. I tried to play with that concept but found I could still order things like so:</p>\n\n<pre><code>Travel_Plans = Hash.new\nTravel_Plans[4] = \"Colorado Springs\"\nTravel_Plans[1] = \"Santa Fe\"\nTravel_Plans[2] = \"Raton\"\nTravel_Plans[5] = \"Denver\"\nTravel_Plans[3] = \"Pueblo\"\n\nputs Travel_Plans.sort\n</code></pre>\n\n<p>Could someone explain what is meant by \"Hash does not have order\"? </p>\n\n<p>If you could provide a simple example that would be great.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "docker", "ubuntu", "docker-compose"], "comments": [{"owner": {"reputation": 924, "user_id": 7100022, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hHpbp.jpg?s=128&g=1", "display_name": "Giannis Katsini", "link": "https://stackoverflow.com/users/7100022/giannis-katsini"}, "edited": false, "score": 0, "creation_date": 1539803246, "post_id": 52861857, "comment_id": 92638361, "body": "Make sure your docker-compose is up to date.."}, {"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 1, "creation_date": 1539803366, "post_id": 52861857, "comment_id": 92638407, "body": "Also your comment <code>#install .. ruby 2.1.5p273</code> is inaccurate. You are just using <code>apt-get install ruby-full</code> which is likely <code>2.5.1</code> at this point. This more than likely has compatibility issues with rails 4.2"}], "answers": [{"comments": [{"owner": {"reputation": 137, "user_id": 5492086, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/0f349610a2d8cf79f9225b982047d648?s=128&d=identicon&r=PG", "display_name": "Rohil", "link": "https://stackoverflow.com/users/5492086/rohil"}, "edited": false, "score": 0, "creation_date": 1539829504, "post_id": 52865636, "comment_id": 92646107, "body": "My docker image is already created an on docker hub. I\u2019m just pulling it down using docker pull."}, {"owner": {"reputation": 6462, "user_id": 3784008, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/55ou4.jpg?s=128&g=1", "display_name": "anothermh", "link": "https://stackoverflow.com/users/3784008/anothermh"}, "reply_to_user": {"reputation": 137, "user_id": 5492086, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/0f349610a2d8cf79f9225b982047d648?s=128&d=identicon&r=PG", "display_name": "Rohil", "link": "https://stackoverflow.com/users/5492086/rohil"}, "edited": false, "score": 0, "creation_date": 1539882226, "post_id": 52865636, "comment_id": 92671608, "body": "That&#39;s not the point. The point is to use a Docker image that <i>already has Ruby installed</i> so that you reduce the complexity of your task."}], "tags": [], "owner": {"reputation": 6462, "user_id": 3784008, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/55ou4.jpg?s=128&g=1", "display_name": "anothermh", "link": "https://stackoverflow.com/users/3784008/anothermh"}, "is_accepted": false, "score": 2, "last_activity_date": 1539826264, "last_edit_date": 1539826264, "creation_date": 1539825706, "answer_id": 52865636, "question_id": 52861857, "link": "https://stackoverflow.com/questions/52861857/docker-image-working-on-ubuntu-16-04-but-failing-on-ubuntu-18-04/52865636#52865636", "title": "Docker image working on Ubuntu 16.04 but failing on Ubuntu 18.04", "body": "<p>You are not specifying the version of the packages that you want installed with <code>apt-get install</code>. As a result, you're stuck with whatever version is available for those packages for the distribution that you're using.</p>\n\n<p>In this case, you think you're installing Ruby 2.1.5 but on 16.04 you're actually installing <a href=\"https://packages.ubuntu.com/xenial/ruby\" rel=\"nofollow noreferrer\">Ruby 2.3.0</a> and on 18.04 you're installing <a href=\"https://packages.ubuntu.com/bionic/ruby\" rel=\"nofollow noreferrer\">Ruby 2.5.1</a>. Your <code>RUN</code> command includes <code>ruby -v</code> so check your build logs to confirm that you're not getting the version you expect.</p>\n\n<p>Also, make sure <code>gem install rubyzip -v 1.2.2</code> works as a <code>RUN</code> command, that <code>rubyzip</code> is defined in your Gemfile and the correct version is defined in Gemfile.lock, and that whatever gem server bundler is pointing to has a copy of the gem at that version.</p>\n\n<p>Next, you're trying to use Rails 4.2.6 but Rails 4.2.6 is not compatible with Ruby 2.5.1. It's not compatible with 2.4 either. The first version of Rails 4 to support Ruby 2.4 was <a href=\"https://weblog.rubyonrails.org/2017/2/10/Rails-4-2-8-rc1-has-been-released/\" rel=\"nofollow noreferrer\">4.2.8rc1</a> and the current version of Rails 4 is <a href=\"https://rubygems.org/gems/rails/versions/4.2.10\" rel=\"nofollow noreferrer\">4.2.10</a>.</p>\n\n<p>Ensure that you are installing the correct versions of the packages that you need and that your applications and libraries are using compatible versions. Additionally, consider upgrading your version of Ruby as <a href=\"https://www.ruby-lang.org/en/news/2017/04/01/support-of-ruby-2-1-has-ended/\" rel=\"nofollow noreferrer\">support of Ruby 2.1 has ended</a>. (and it ended over a year ago)</p>\n\n<p>Finally, consider using a Docker image that has Ruby already, rather than installing Ruby via <code>apt-get</code>. For example, <a href=\"https://github.com/docker-library/ruby/blob/676eadd43f87bdb1d3f033ea31ae69e45d11ee5b/2.3/stretch/Dockerfile\" rel=\"nofollow noreferrer\">the <code>2.3-stretch</code> image</a> gives you Debian stretch with Ruby 2.3's latest revision. <a href=\"https://hub.docker.com/r/library/ruby/tags/\" rel=\"nofollow noreferrer\">Other versions are also available</a>. The upside of using one of these Dockerfiles is that you know exactly what version of Ruby you're getting and it doesn't change.</p>\n"}], "owner": {"reputation": 137, "user_id": 5492086, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/0f349610a2d8cf79f9225b982047d648?s=128&d=identicon&r=PG", "display_name": "Rohil", "link": "https://stackoverflow.com/users/5492086/rohil"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 397, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1539826264, "creation_date": 1539802771, "question_id": 52861857, "link": "https://stackoverflow.com/questions/52861857/docker-image-working-on-ubuntu-16-04-but-failing-on-ubuntu-18-04", "title": "Docker image working on Ubuntu 16.04 but failing on Ubuntu 18.04", "body": "<p>I thought docker images worked independent of the OS and did not need any dependencies installed on the OS itself.</p>\n\n<p>I have a docker image built using the dockerfile: </p>\n\n<pre><code>FROM ubuntu:16.04\n\n# Prepare to install Java for 'rjb' gem\nRUN apt-get update &amp;&amp; apt-get -y install software-properties-common &amp;&amp; add-apt-repository ppa:webupd8team/java -y &amp;&amp; apt-get update \n\n# Install Java 8 and accept the license by default (https://www.digitalocean.com/community/tutorials/how-to-install-java-with-apt-get-on-ubuntu-16-04)\nRUN echo debconf shared/accepted-oracle-license-v1-1 select true | debconf-set-selections &amp;&amp; echo debconf shared/accepted-oracle-license-v1-1 seen true | debconf-set-selections &amp;&amp; apt-get -y install oracle-java8-installer &amp;&amp; java -version \n\n# Set JAVA_HOME (should add in the docker startup script)\nRUN echo 'export JAVA_HOME=\"/usr/lib/jvm/java-8-oracle\"' &gt;&gt; /etc/environment &amp;&amp; . /etc/environment &amp;&amp; echo $JAVA_HOME \n\nENV JAVA_HOME /usr/lib/jvm/java-8-oracle\n\n# Install curl, rvm, ruby 2.1.5p273, rails 4.2.6\nRUN apt-get -y update &amp;&amp; apt-get -y install build-essential zlib1g-dev libssl-dev libreadline6-dev libyaml-dev &amp;&amp; apt-get -y install wget &amp;&amp; apt-get install -y ruby-full &amp;&amp; ruby -v &amp;&amp; gem install rails -v 4.2.6 &amp;&amp; rails -v\n\n# Install bundler, git\nRUN gem install bundler &amp;&amp; apt-get -y install git\n\nENV DEBIAN_FRONTEND noninteractive   \n\n# Make sure 'bundle install' run successfully and set the git pre-commit hooks\nRUN [\"/bin/bash\", \"-c\", \"cd home &amp;&amp; mkdir expertiza_developer &amp;&amp; cd expertiza_developer &amp;&amp; git clone https://github.com/expertiza/expertiza.git &amp;&amp; cd expertiza &amp;&amp; apt-get -y install ruby-dev &amp;&amp; apt-get -y install make &amp;&amp; apt-get install -y gcc make &amp;&amp; apt-get install -y libmysqlclient-dev &amp;&amp; apt-get install -y libpq-dev &amp;&amp; bundle install &amp;&amp; debconf-set-selections &lt;&lt;&lt; 'mysql-server mysql-server/root_password password ' &amp;&amp; debconf-set-selections &lt;&lt;&lt; 'mysql-server mysql-server/root_password_again password ' &amp;&amp; apt-get -y install mysql-server &amp;&amp; /etc/init.d/mysql start &amp;&amp; cp config/database.yml.example config/database.yml &amp;&amp; cp config/secrets.yml.example config/secrets.yml &amp;&amp; mv ./hooks/pre-commit ./.git/hooks/pre-commit &amp;&amp; chmod 755 ./.git/hooks/pre-commit\"]\n</code></pre>\n\n<p>and using the following docker-compose file to run the image: </p>\n\n<pre><code>version: '3'\n\nservices:\n  expertiza:\n    image: winbobob/expertiza:test\n    ports:\n      - '3000:3000'\n    volumes:\n      - '.:/root/expertiza'\n    depends_on:\n      - scrubbed_db\n      - redis\n    links:\n      - scrubbed_db\n      - redis\n    working_dir: /root/expertiza\n    command: bundle exec thin start -p 3000\n    environment:\n      REDIS_HOST: redis\n\n  scrubbed_db:\n    image: mysql:5.7\n    volumes:\n      # https://stackoverflow.com/questions/25920029/setting-up-mysql-and-importing-dump-within-dockerfile\n      - './docker/scrubbed_db:/docker-entrypoint-initdb.d'\n    environment:\n      MYSQL_ROOT_PASSWORD: expertiza\n\n  redis:\n    image: redis:alpine\n</code></pre>\n\n<p>This runs perfectly fine on an Ubuntu 16.04 box, but when I run this same image on an Ubuntu 18.04 box, I get the following error: </p>\n\n<pre><code>expertiza_1    | /var/lib/gems/2.3.0/gems/bundler-1.16.4/lib/bundler/spec_set.rb:91:in `block in materialize': Could not find rubyzip-1.2.2 in any of the sources (Bundler::GemNotFound)\n</code></pre>\n\n<p>Does anyone know why this is happening and how to fix it? </p>\n"}, {"tags": ["json", "ruby", "chef-infra"], "answers": [{"comments": [{"owner": {"reputation": 13442, "user_id": 3982562, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2a3c7aae1d762372cda697833c602ec8?s=128&d=identicon&r=PG", "display_name": "3limin4t0r", "link": "https://stackoverflow.com/users/3982562/3limin4t0r"}, "edited": false, "score": 0, "creation_date": 1539803859, "post_id": 52861667, "comment_id": 92638618, "body": "Mind your spaces. <code>r[&#39;bucketNames&#39;].find { |str| str.include? &#39;osbackup_config&#39; }</code> <a href=\"https://github.com/rubocop-hq/ruby-style-guide#spaces-braces\" rel=\"nofollow noreferrer\">github.com/rubocop-hq/ruby-style-guide#spaces-braces</a>"}], "tags": [], "owner": {"reputation": 8733, "user_id": 3625433, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/N7qK6.png?s=128&g=1", "display_name": "lacostenycoder", "link": "https://stackoverflow.com/users/3625433/lacostenycoder"}, "is_accepted": true, "score": 1, "last_activity_date": 1539804384, "last_edit_date": 1539804384, "creation_date": 1539801942, "answer_id": 52861667, "question_id": 52861462, "link": "https://stackoverflow.com/questions/52861462/search-specific-string-in-a-value-from-json-and-assign-to-variable-in-ruby/52861667#52861667", "title": "search specific string in a value from Json and assign to variable in ruby", "body": "<p>Why not this?</p>\n\n<pre><code>r['bucketNames'].find { |v| v.include?'osbackup_config' }\n</code></pre>\n\n<p>or</p>\n\n<pre><code>os_conf  = r['bucketNames'].find { |v| v['osbackup_config'] }\n\nosbackup_vman = r['bucketNames'].find { |v| v['osbackup_vman'] }\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 10520212, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-JjWr6xd_Jn4/AAAAAAAAAAI/AAAAAAAAAAA/AB6qoq33QKnmEbZt_KzqJIn2CmW3sm2u7Q/mo/photo.jpg?sz=128", "display_name": "user918753", "link": "https://stackoverflow.com/users/10520212/user918753"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 44, "favorite_count": 0, "accepted_answer_id": 52861667, "answer_count": 1, "score": 0, "last_activity_date": 1539804384, "creation_date": 1539801130, "last_edit_date": 1539801527, "question_id": 52861462, "link": "https://stackoverflow.com/questions/52861462/search-specific-string-in-a-value-from-json-and-assign-to-variable-in-ruby", "title": "search specific string in a value from Json and assign to variable in ruby", "body": "<p>Here is my json file</p>\n\n<pre><code>{\n  \"osNameSpace\" : \"prod\",\n  \"bucketNames\" : [ \"RC_osbackup_config_d0007cz_idfdafa3\", \"IC_osbackup_vman_d0007cz_dasdc3w\" ],\n  \"user\" : \"RC_osbackup_svc_user_d0007cz_dasf2fd\",\n  \"userOcid\" : \"rcid1.user.oc1..aaaaaaaazf5e27hbpst2pxarisi5qvkmgotwm5ro4nhjkkjq4mmxengckv2a\",\n  \"group\" : \"RC_osbackup_svc_grp_d0007cz_asdf24\"\n}\n</code></pre>\n\n<p>I want to search for a string 'osbackup_config' and assign to 'os_conf' variable. similarly for string 'osbackup_vman' to 'os_vman'</p>\n\n<p>I tried the following, but no luck </p>\n\n<pre><code>input_file=\"/root/testjson_2.json\"\nr = JSON.parse(File.read(input_file))\n\nr[\"bucketNames\"].find {|r1| r1['dbbackup_rman']=='rman'}['rman_bucket_name']\nr[\"bucketNames\"].find {|r1| r1['dbbackup_config']=='config'}['config_bucket_name']\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "urlencode", "lint", "rubocop"], "comments": [{"owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "edited": false, "score": 0, "creation_date": 1539795718, "post_id": 52860045, "comment_id": 92634761, "body": "Why do your tests fail? What URLs do you test, what output do you expect and what does it return instead?"}, {"owner": {"reputation": 208794, "user_id": 229044, "user_type": "moderator", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/591426cbbacd4025d920467bad356911?s=128&d=identicon&r=PG&f=1", "display_name": "meagar", "link": "https://stackoverflow.com/users/229044/meagar"}, "edited": false, "score": 0, "creation_date": 1539796669, "post_id": 52860045, "comment_id": 92635226, "body": "The cop clearly tells you what to do. If <code>CGI.escape</code> causes errors, you need to fix those errors. We can&#39;t help you with that as you haven&#39;t included any inputs or the errors they&#39;re causing."}, {"owner": {"reputation": 36228, "user_id": 63761, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/b9a099f02437916c0a76f8326966be17?s=128&d=identicon&r=PG", "display_name": "Meltemi", "link": "https://stackoverflow.com/users/63761/meltemi"}, "edited": false, "score": 3, "creation_date": 1539821364, "post_id": 52860045, "comment_id": 92644572, "body": "I added some output (above) so it&#39;s clear that the <code>URI.escape</code> and <code>CGI.escape</code> are doing different things\u2026 So, what is replacement if <code>URI.escape</code> is &quot;obsolete&quot;?"}, {"owner": {"reputation": 6462, "user_id": 3784008, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/55ou4.jpg?s=128&g=1", "display_name": "anothermh", "link": "https://stackoverflow.com/users/3784008/anothermh"}, "edited": false, "score": 1, "creation_date": 1540866382, "post_id": 52860045, "comment_id": 93012191, "body": "I recommend reading <a href=\"https://github.com/rubocop-hq/rubocop/pull/4702\" rel=\"nofollow noreferrer\">the pull request that added it to rubocop</a>. TLDR: <code>URI.escape</code> has been <a href=\"https://github.com/ruby/ruby/blob/cd6df5fb3c1e9b965071d6a92ed1c7d4a938560f/lib/uri/common.rb#L80-L87\" rel=\"nofollow noreferrer\">deprecated in ruby trunk</a> (and this is reflected <a href=\"https://ruby-doc.org/stdlib-2.5.1/libdoc/uri/rdoc/URI/Escape.html\" rel=\"nofollow noreferrer\">in the docs</a>), and the cop is warning you of that. Details of the alternate implementation are left to the reader, with <code>CGI</code> being given as one possible example."}, {"owner": {"reputation": 8782, "user_id": 337903, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/7df5a0c6b776d2ac8743b6d48738ed01?s=128&d=identicon&r=PG", "display_name": "Nick", "link": "https://stackoverflow.com/users/337903/nick"}, "edited": false, "score": 4, "creation_date": 1564168201, "post_id": 52860045, "comment_id": 100955885, "body": "<code>CGI.escape</code> is not a replacement for <code>URI.escape</code>. For example: <code>URI.escape(&#39;foo bar&#39;)</code> gives <code>&#39;foo%20bar&#39;</code>, while <code>CGI.escape(&#39;foo bar&#39;)</code> gives <code>&#39;foo+bar&#39;</code>. This causes problems if for example you are trying to escape a basic auth password that contains spaces. There are workarounds, but suggesting that OP just use <code>CGI.escape</code> when it&#39;s not the same thing is not helpful."}], "answers": [{"tags": [], "owner": {"reputation": 467, "user_id": 6003939, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-9fP_gxi1pEA/AAAAAAAAAAI/AAAAAAAAAC4/L9NDDYQE22s/photo.jpg?sz=128", "display_name": "Vivek Singh", "link": "https://stackoverflow.com/users/6003939/vivek-singh"}, "is_accepted": false, "score": 0, "last_activity_date": 1591122166, "creation_date": 1591122166, "answer_id": 62158800, "question_id": 52860045, "link": "https://stackoverflow.com/questions/52860045/replacement-for-uri-escape-that-avoids-lint-uriescapeunescape-warnings/62158800#62158800", "title": "Replacement for URI.escape that avoids Lint/UriEscapeUnescape warnings?", "body": "<p>Encounter with the same problem, got it fixed by using <a href=\"https://github.com/sporkmonger/addressable\" rel=\"nofollow noreferrer\">addressable</a> lib.</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>escaped_query = URI.escape(search,\n            Regexp.new(\"[^#{URI::PATTERN::UNRESERVED}]\"))\n\n#W: Lint/UriEscapeUnescape: URI.escape method is obsolete and should not be used. Instead, use CGI.escape, URI.encode_www_form or URI.encode_www_form_component depending on your specific use case.\n</code></pre>\n\n<p>Solved by:</p>\n\n<ul>\n<li>gem <code>addressable</code> gem in <code>gemspec</code> or <code>Gemfile</code>.</li>\n</ul>\n\n<pre><code>gem 'addressable', '~&gt; 2.7'\n</code></pre>\n\n<ul>\n<li><p>require <code>addressable/uri</code></p></li>\n<li><p>Add appropriate.</p></li>\n</ul>\n\n<pre><code>escaped_query = Addressable::URI.encode_component(search, Addressable::URI::CharacterClasses::QUERY)\n\n</code></pre>\n"}], "owner": {"reputation": 36228, "user_id": 63761, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/b9a099f02437916c0a76f8326966be17?s=128&d=identicon&r=PG", "display_name": "Meltemi", "link": "https://stackoverflow.com/users/63761/meltemi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1015, "favorite_count": 0, "answer_count": 1, "score": 3, "last_activity_date": 1591122166, "creation_date": 1539795439, "last_edit_date": 1539822732, "question_id": 52860045, "link": "https://stackoverflow.com/questions/52860045/replacement-for-uri-escape-that-avoids-lint-uriescapeunescape-warnings", "title": "Replacement for URI.escape that avoids Lint/UriEscapeUnescape warnings?", "body": "<p>Not sure how to fix <strong>Rubocop's</strong> <a href=\"https://rubocop.readthedocs.io/en/latest/cops_lint/#linturiescapeunescape\" rel=\"nofollow noreferrer\">Lint/UriEscapeUnescape</a> warning  </p>\n\n<p>Tried replacing <code>URI</code> with <code>CGI</code> thinking that was the \"drop in\" replacement but that blew up the test suite.</p>\n\n<p>Here's the error followed by the line of code where <code>URI</code> is being used:</p>\n\n<pre><code>app/models/media_file.rb:76:5: W: Lint/UriEscapeUnescape: URI.escape method is obsolete and should not be used. Instead, use CGI.escape, URI.encode_www_form or URI.encode_www_form_component depending on your specific use case.\n    URI ...\n    ^^^\n\n    # app/models/media_file.rb\n    ...\n    def cdn_url(format: nil)\n    if format.nil?\n      \"#{s3_config.cloudfront_endpoint}/#{escape_url(key)}\"\n    elsif converted_urls.with_indifferent_access[format.to_s]\n      filename = converted_urls.with_indifferent_access[format.to_s]\n      if URI.parse(escape_url(filename)).host\n        filename\n      else\n        \"#{s3_config.cloudfront_endpoint}/#{escape_url(filename)}\"\n      end\n    else\n      converted(url)\n    end\n  end\n...\n  private\n\n  def escape_url(url)\n    URI\n      .escape(url)\n      .gsub(/\\(/, '%28')\n      .gsub(/\\)/, '%29')\n      .gsub(/\\[/, '%5B')\n      .gsub(/\\]/, '%5D')\n  end\n</code></pre>\n\n<p><strong>EDIT:</strong> Adding sample output of strings escaped with <code>URI</code> and <code>CGI</code>:</p>\n\n<pre><code>            url: images/medium/test-image.jpg\nURI.escape(url): images/medium/test-image.jpg\nCGI.escape(url): images%2Fmedium%2Ftest-image.jpg\n\n            url: images/medium/test-image.jpg\nURI.escape(url): images/medium/test-image.jpg\nCGI.escape(url): images%2Fmedium%2Ftest-image.jpg\n</code></pre>\n\n<p>It would appear <code>CGI</code> is not a drop in replacement for <code>URI</code> as the listing error might have you believe. Thoughts?</p>\n"}, {"tags": ["ruby", "xml", "xml-parsing", "nokogiri", "savon"], "answers": [{"comments": [{"owner": {"reputation": 1303, "user_id": 2789810, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/89a53157699228dbdd2426f783908ae9?s=128&d=identicon&r=PG", "display_name": "nuT707", "link": "https://stackoverflow.com/users/2789810/nut707"}, "edited": false, "score": 0, "creation_date": 1539917135, "post_id": 52859565, "comment_id": 92683385, "body": "I decided  to parse using nokogiri document And i&#39;ve noticed, that <code>Hash.from_xml(string)</code> return hash similiar to savon - array if several tags, hash if one tag"}, {"owner": {"reputation": 8640, "user_id": 4055042, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/cd04c63d95d27033b53d4d83fea40c02?s=128&d=identicon&r=PG&f=1", "display_name": "SRack", "link": "https://stackoverflow.com/users/4055042/srack"}, "reply_to_user": {"reputation": 1303, "user_id": 2789810, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/89a53157699228dbdd2426f783908ae9?s=128&d=identicon&r=PG", "display_name": "nuT707", "link": "https://stackoverflow.com/users/2789810/nut707"}, "edited": false, "score": 0, "creation_date": 1539942870, "post_id": 52859565, "comment_id": 92692536, "body": "Ah, very odd X-) Did this answer help create the data as desired @nuT707?"}, {"owner": {"reputation": 1303, "user_id": 2789810, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/89a53157699228dbdd2426f783908ae9?s=128&d=identicon&r=PG", "display_name": "nuT707", "link": "https://stackoverflow.com/users/2789810/nut707"}, "edited": false, "score": 0, "creation_date": 1540005323, "post_id": 52859565, "comment_id": 92715901, "body": "your answer? It&#39;s obvious decision, but i need to parse a lot of xml and don&#39;t want every time check is it array or  hash. Parsing with nokogiri looks more easy in this case. BUT!) With nokogiri i have some issues too) Look my another <a href=\"https://stackoverflow.com/questions/52886666/searching-savon-response-as-nokogiri-document-returns-an-empty-array\">question</a>"}], "tags": [], "owner": {"reputation": 8640, "user_id": 4055042, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/cd04c63d95d27033b53d4d83fea40c02?s=128&d=identicon&r=PG&f=1", "display_name": "SRack", "link": "https://stackoverflow.com/users/4055042/srack"}, "is_accepted": false, "score": 1, "last_activity_date": 1572236466, "last_edit_date": 1572236466, "creation_date": 1539793717, "answer_id": 52859565, "question_id": 52859170, "link": "https://stackoverflow.com/questions/52859170/savon-array-hash-confusion/52859565#52859565", "title": "Savon array/hash confusion", "body": "<p>If that's Savon's default behaviour, I'd suggest looking at the type of result you get and parsing from there:</p>\n\n<pre><code>if t[:message_list][:trade_message].is_a?(Array) # or perhaps `t[:message_list][:trade_message].respond_to?(:each)`\n  t[:message_list][:trade_message].each { |m| TradeMessage.create(id: m[:@id]) }\nelse\n  TradeMessage.create(id: t[:message_list][:trade_message][:@id])\nend\n</code></pre>\n\n<p>Alternatively, you could wrap the result in an array if it's not already one, and process similarly:</p>\n\n<pre><code>t[:message_list][:trade_message].is_a?(Array) ? t[:message_list][:trade_message] : [t[:message_list][:trade_message]]\nt[:message_list][:trade_message].each { |m| TradeMessage.create(id: m[:@id]) }\n</code></pre>\n\n<p>That's strange behaviour from the gem though, and it might be worth looking into their docs to see if there's something you can use to alter this behaviour.</p>\n"}, {"tags": [], "owner": {"reputation": 3271, "user_id": 387177, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ce58186c9663c82e5fef7fcca045fa57?s=128&d=identicon&r=PG", "display_name": "Steffen Roller", "link": "https://stackoverflow.com/users/387177/steffen-roller"}, "is_accepted": false, "score": 1, "last_activity_date": 1572236414, "last_edit_date": 1572236414, "creation_date": 1539813227, "answer_id": 52864173, "question_id": 52859170, "link": "https://stackoverflow.com/questions/52859170/savon-array-hash-confusion/52864173#52864173", "title": "Savon array/hash confusion", "body": "<p>You could use Ruby's splat operator. It will always return an array. Please see below for a extremely simple example:</p>\n\n<pre><code>require 'awesome_print'\n\ndef return_array(elements)\n  return *elements\nend\n\nap return_array([:a, :b, :c])\nap return_array(:d)\n</code></pre>\n"}], "owner": {"reputation": 1303, "user_id": 2789810, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/89a53157699228dbdd2426f783908ae9?s=128&d=identicon&r=PG", "display_name": "nuT707", "link": "https://stackoverflow.com/users/2789810/nut707"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 142, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1572236466, "creation_date": 1539792272, "last_edit_date": 1572236376, "question_id": 52859170, "link": "https://stackoverflow.com/questions/52859170/savon-array-hash-confusion", "title": "Savon array/hash confusion", "body": "<p>When Savon parses XML:</p>\n\n<pre><code>&lt;MessageList&gt;\n  &lt;TradeMessage ID=\"4850644\"/&gt;\n  &lt;TradeMessage ID=\"4850666\"/&gt;\n  &lt;TradeMessage ID=\"4850667\"/&gt;\n  &lt;TradeMessage ID=\"4850712\"/&gt;\n&lt;/MessageList&gt;\n</code></pre>\n\n<p>It returns a hash</p>\n\n<pre><code>{MessageList: TradeMessage: [{@id: '123'},...,{@id: '456'}]}\n</code></pre>\n\n<p>But if the XML is like</p>\n\n<pre><code>&lt;MessageList&gt;\n  &lt;TradeMessage ID=\"4850644\"/&gt;\n&lt;/MessageList&gt;\n</code></pre>\n\n<p>it will return</p>\n\n<pre><code>{MessageList: TradeMessage: {@id: '123'}}\n</code></pre>\n\n<p>so I can't loop through Message list because it can be a hash or an array. </p>\n\n<p>My code to loop through an array is: </p>\n\n<pre><code>t[:message_list][:trade_message].each do |m|\n  TradeMessage.create(id: m[:@id])\nend\n</code></pre>\n\n<p>What do I do in such a situation? Should I change the XML parser from the default Nokogiri to something else?</p>\n\n<p>I noticed that <code>Hash.from_xml(string)</code> returns a hash similar to Savon, an array if several tags, a hash if one tag.</p>\n\n<hr>\n\n<p>I decided to use Nokogiri document to parse Savon's response <code>response.doc</code></p>\n"}, {"tags": ["sql", "ruby", "postgresql", "pg"], "comments": [{"owner": {"reputation": 1106495, "user_id": 1144035, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e514b017977ebf742a418cac697d8996?s=128&d=identicon&r=PG", "display_name": "Gordon Linoff", "link": "https://stackoverflow.com/users/1144035/gordon-linoff"}, "edited": false, "score": 1, "creation_date": 1539791490, "post_id": 52858915, "comment_id": 92632631, "body": "You are using double quotes instead of single quotes to delimit strings."}], "answers": [{"comments": [{"owner": {"reputation": 558, "user_id": 10435489, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99e0dda803a284635ce818498cbe5c88?s=128&d=identicon&r=PG", "display_name": "Mike Baron", "link": "https://stackoverflow.com/users/10435489/mike-baron"}, "edited": false, "score": 0, "creation_date": 1539791754, "post_id": 52858973, "comment_id": 92632762, "body": "We must have submitted at the same time.  Try the above, but with escape characters in your string."}, {"owner": {"reputation": 1144, "user_id": 10042514, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-L0h-263d_Sw/AAAAAAAAAAI/AAAAAAAAAAo/4wZ_JHSs1FA/photo.jpg?sz=128", "display_name": "Barry Piccinni", "link": "https://stackoverflow.com/users/10042514/barry-piccinni"}, "reply_to_user": {"reputation": 558, "user_id": 10435489, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99e0dda803a284635ce818498cbe5c88?s=128&d=identicon&r=PG", "display_name": "Mike Baron", "link": "https://stackoverflow.com/users/10435489/mike-baron"}, "edited": false, "score": 0, "creation_date": 1539791903, "post_id": 52858973, "comment_id": 92632838, "body": "Corrected this in my latest edit, using double for the outer delimiter, single for inner ones."}, {"owner": {"reputation": 5, "user_id": 9616697, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9271b2ea80ec9d6b6cc71ef8c4345021?s=128&d=identicon&r=PG&f=1", "display_name": "velvetsnowman", "link": "https://stackoverflow.com/users/9616697/velvetsnowman"}, "reply_to_user": {"reputation": 558, "user_id": 10435489, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99e0dda803a284635ce818498cbe5c88?s=128&d=identicon&r=PG", "display_name": "Mike Baron", "link": "https://stackoverflow.com/users/10435489/mike-baron"}, "edited": false, "score": 0, "creation_date": 1539792595, "post_id": 52858973, "comment_id": 92633191, "body": "Thank you Barry Piccinni and @MikeBaron. I ended up going with Barry as it was &#39;neater&#39; (a lot of back-slashes), but both ways worked. Thanks, guys."}], "tags": [], "owner": {"reputation": 1144, "user_id": 10042514, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-L0h-263d_Sw/AAAAAAAAAAI/AAAAAAAAAAo/4wZ_JHSs1FA/photo.jpg?sz=128", "display_name": "Barry Piccinni", "link": "https://stackoverflow.com/users/10042514/barry-piccinni"}, "is_accepted": true, "score": 1, "last_activity_date": 1539792060, "last_edit_date": 1539792060, "creation_date": 1539791631, "answer_id": 52858973, "question_id": 52858915, "link": "https://stackoverflow.com/questions/52858915/insert-into-sql-query-not-working-column-undefined/52858973#52858973", "title": "INSERT INTO sql query not working column undefined", "body": "<p>Your error has come from the <code>\"</code> quotation marks in the string. You need to either use a backslash to delimit them, as per Mike's answer, or use single ones inside a string and double ones to delimit the string itself as I have done below. Try again replacing them with single quotes: <code>'</code></p>\n\n<pre><code>def self.create_tables\n  connection = PG.connect(dbname: 'clients')\n  connection.exec('CREATE TABLE client_details (\n                Company_ID SERIAL PRIMARY KEY,\n                Company_Name text,\n                Company_Telephone text,\n                Company_Representitive text, \n                    Company_Email text,\n                Company_Address text,\n                Company_Contract_Start_Date text,\n                Company_Contract_End_Date text\n                )')\nend\ndef self.create_table_data\n  connection = PG.connect(dbname: 'clients')\n  connection.exec(\"INSERT INTO client_detail (\n  Company_Name,\n  Company_Telephone,\n  Company_Representitive,\n  Company_Email,\n  Company_Address,\n  Company_Contract_Start_Date,\n  Company_Contract_End_Date) \n  VALUES (\n  'Monoprix', \n  '1234', \n  'sarah', \n  'dan@dan.com', \n  'this road', \n  '12', \n  '13');\")\nend\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 5, "user_id": 9616697, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9271b2ea80ec9d6b6cc71ef8c4345021?s=128&d=identicon&r=PG&f=1", "display_name": "velvetsnowman", "link": "https://stackoverflow.com/users/9616697/velvetsnowman"}, "edited": false, "score": 0, "creation_date": 1539792630, "post_id": 52858991, "comment_id": 92633206, "body": "Thank you, i went with Barry&#39;s solution, but yours worked as well. Thanks"}], "tags": [], "owner": {"reputation": 558, "user_id": 10435489, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99e0dda803a284635ce818498cbe5c88?s=128&d=identicon&r=PG", "display_name": "Mike Baron", "link": "https://stackoverflow.com/users/10435489/mike-baron"}, "is_accepted": false, "score": 0, "last_activity_date": 1539791674, "creation_date": 1539791674, "answer_id": 52858991, "question_id": 52858915, "link": "https://stackoverflow.com/questions/52858915/insert-into-sql-query-not-working-column-undefined/52858991#52858991", "title": "INSERT INTO sql query not working column undefined", "body": "<p>Have you tried this:</p>\n\n<pre><code>def self.create_tables\n  connection = PG.connect(dbname: 'clients')\n  connection.exec('CREATE TABLE client_details (\n                Company_ID SERIAL PRIMARY KEY,\n                Company_Name text,\n                Company_Telephone text,\n                Company_Representitive text,\n                Company_Email text,\n                Company_Address text,\n                Company_Contract_Start_Date text,\n                Company_Contract_End_Date text\n                )')\nend\ndef self.create_table_data\n  connection = PG.connect(dbname: 'clients')\n  connection.exec('INSERT INTO client_detail (\n  Company_Name,\n  Company_Telephone,\n  Company_Representitive,\n  Company_Email,\n  Company_Address,\n  Company_Contract_Start_Date,\n  Company_Contract_End_Date) \n  VALUES (\n  \\'Monoprix\\', \n  \\'1234\\', \n  \\'sarah\\', \n  \\'dan@dan.com\\', \n  \\'this road\\', \n  \\'12\\', \n  \\'13\\');')\nend\n</code></pre>\n\n<p>Seems dumb, but gotta check off all the obvious boxes.</p>\n"}], "owner": {"reputation": 5, "user_id": 9616697, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9271b2ea80ec9d6b6cc71ef8c4345021?s=128&d=identicon&r=PG&f=1", "display_name": "velvetsnowman", "link": "https://stackoverflow.com/users/9616697/velvetsnowman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 322, "favorite_count": 0, "accepted_answer_id": 52858973, "answer_count": 2, "score": 0, "last_activity_date": 1539792060, "creation_date": 1539791425, "question_id": 52858915, "link": "https://stackoverflow.com/questions/52858915/insert-into-sql-query-not-working-column-undefined", "title": "INSERT INTO sql query not working column undefined", "body": "<pre><code>def self.create_tables\n  connection = PG.connect(dbname: 'clients')\n  connection.exec('CREATE TABLE client_details (\n                Company_ID SERIAL PRIMARY KEY,\n                Company_Name text,\n                Company_Telephone text,\n                Company_Representitive text,\n                Company_Email text,\n                Company_Address text,\n                Company_Contract_Start_Date text,\n                Company_Contract_End_Date text\n                )')\nend\ndef self.create_table_data\n  connection = PG.connect(dbname: 'clients')\n  connection.exec('INSERT INTO client_detail (\n  Company_Name,\n  Company_Telephone,\n  Company_Representitive,\n  Company_Email,\n  Company_Address,\n  Company_Contract_Start_Date,\n  Company_Contract_End_Date) \n  VALUES (\n  \"Monoprix\", \n  \"1234\", \n  \"sarah\", \n  \"dan@dan.com\", \n  \"this road\", \n  \"12\", \n  \"13\");')\nend\n</code></pre>\n\n<p>When I run the first function it works, when I run the 2nd function I get an error:</p>\n\n<pre><code>Traceback (most recent call last):\n         2: from lib/data_generator.rb:22:in `&lt;main&gt;'\n         1: from lib/data_generator.rb:6:in `create_table_data'\n    lib/data_generator.rb:6:in `async_exec': ERROR:  column\"monoprix\" does not exist (PG::UndefinedColumn)\n    LINE 1: ...act_Start_Date,Company_Contract_End_Date) VALUES (Monoprix, ...\n                                                                    ^\n</code></pre>\n\n<p>I don't know why the error is telling me that column 'monoprix' does not exist when I am attempting to INSERT the value 'monoprix' into the COLUMN Company_Name, not 'monoprix'.</p>\n\n<p>However, when I insert the VALUES 1,2,3,4,5,6,7 it works fine.</p>\n\n<p>I'm stumped.</p>\n\n<p>I want to insert 'monoprix' into the column 'Company_Name'.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "cancancan"], "comments": [{"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1539788362, "post_id": 52857428, "comment_id": 92630873, "body": "Please provide a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>. Try to show full code that reproduces the problem, not a description of the code. Is it possible that, for example, you have some additional logic in the <code>Ability</code> that sometimes overrides this definition? Or maybe a different <code>Ability</code> class is being used? Or maybe <code>authorize_resource</code> has been overridden? The error could be caused by all manor of things, and without a full reproduction example I have no way of knowing for sure."}, {"owner": {"reputation": 486, "user_id": 7069011, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AfPIn.jpg?s=128&g=1", "display_name": "ThorTL67", "link": "https://stackoverflow.com/users/7069011/thortl67"}, "edited": false, "score": 0, "creation_date": 1539788552, "post_id": 52857428, "comment_id": 92630975, "body": "Have you tried rebooting your rails server? I can&#39;t remember for sure if you need to after making changes to <code>ability.rb</code>"}], "answers": [{"tags": [], "owner": {"reputation": 16587, "user_id": 177053, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3f6c516626d381a1ea383cedd1799486?s=128&d=identicon&r=PG", "display_name": "Vasfed", "link": "https://stackoverflow.com/users/177053/vasfed"}, "is_accepted": true, "score": 1, "last_activity_date": 1539792899, "creation_date": 1539792899, "answer_id": 52859343, "question_id": 52857428, "link": "https://stackoverflow.com/questions/52857428/cancancan-user-edit-his-own-profile/52859343#52859343", "title": "CanCanCan User edit his own profile", "body": "<p>Make sure that your instance (<code>@user</code>) is loaded before <code>authorize_resource</code> action runs, otherwise it will check if user can <em>access some Users</em> (<code>can?(:edit, User)</code>, which is always true), instead of exact user.</p>\n\n<pre><code>before_action :load_user, except:[:index, :new, :create]\nauthorize_resource\n\n...\n\nprivate def load_user\n  @user = User.accessible_by(current_ability, action_name.to_sym).find(params[:id])\nend\n</code></pre>\n"}], "owner": {"reputation": 33, "user_id": 9323549, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/91edb59d9a90b502a417d61ffb946790?s=128&d=identicon&r=PG&f=1", "display_name": "Louis Portay", "link": "https://stackoverflow.com/users/9323549/louis-portay"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 85, "favorite_count": 0, "accepted_answer_id": 52859343, "answer_count": 1, "score": 1, "last_activity_date": 1539792899, "creation_date": 1539786838, "question_id": 52857428, "link": "https://stackoverflow.com/questions/52857428/cancancan-user-edit-his-own-profile", "title": "CanCanCan User edit his own profile", "body": "<p>I got a really strange issue here. Here is the line causing all the trouble in my <code>ability.rb</code></p>\n\n<pre><code>    can [:edit, :update, :destroy], User, id: user.id\n</code></pre>\n\n<p>When I launch the rails console, I got the expected behaviour:</p>\n\n<pre><code>u = User.last\na = Ability.new(u)\na.can?(:edit, u)\n=&gt; true\na.can?(:edit, User.first)\n=&gt; false\n</code></pre>\n\n<p>However when I launch a web browser, log me in as a user and try to edit another one, CanCanCan remains silent.\nIf I replace <code>can</code> by <code>cannot</code>, I can't edit any user. It's as if it didn't lookup the condition.</p>\n\n<p>My <code>UsersController</code> got this line on top</p>\n\n<pre><code>authorize_resource\n</code></pre>\n\n<p>I'm stuck with this, any help would be gladly appreciated.</p>\n\n<p>cancancan 2.3.0<br>\nrails 5.2.1</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "zip", "rubyzip"], "comments": [{"owner": {"reputation": 4348, "user_id": 3435610, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/IBOFX.jpg?s=128&g=1", "display_name": "Sara Tibbetts", "link": "https://stackoverflow.com/users/3435610/sara-tibbetts"}, "edited": false, "score": 0, "creation_date": 1539785313, "post_id": 52856686, "comment_id": 92628851, "body": "Do you require the gem?  <code>require &#39;zip&#39;</code>"}, {"owner": {"user_type": "does_not_exist", "display_name": "user9569059"}, "reply_to_user": {"reputation": 4348, "user_id": 3435610, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/IBOFX.jpg?s=128&g=1", "display_name": "Sara Tibbetts", "link": "https://stackoverflow.com/users/3435610/sara-tibbetts"}, "edited": false, "score": 0, "creation_date": 1539786230, "post_id": 52856686, "comment_id": 92629478, "body": "yes i did @SaraTibbetts"}, {"owner": {"reputation": 4348, "user_id": 3435610, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/IBOFX.jpg?s=128&g=1", "display_name": "Sara Tibbetts", "link": "https://stackoverflow.com/users/3435610/sara-tibbetts"}, "edited": false, "score": 1, "creation_date": 1539789088, "post_id": 52856686, "comment_id": 92631263, "body": "From the gem documentation I&#39;m seeing <code>Zip::File.open(zipfile_name, Zip::File::CREATE) do |zipfile|</code>. Rather than <code>Zip::ZipFile</code> have you tried <code>Zip:File</code>?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user9569059"}, "reply_to_user": {"reputation": 4348, "user_id": 3435610, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/IBOFX.jpg?s=128&g=1", "display_name": "Sara Tibbetts", "link": "https://stackoverflow.com/users/3435610/sara-tibbetts"}, "edited": false, "score": 1, "creation_date": 1539789570, "post_id": 52856686, "comment_id": 92631548, "body": "I did a mistake , it&#39;s CREATE instead of Create ;)"}], "owner": {"user_type": "does_not_exist", "display_name": "user9569059"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 230, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1539784643, "creation_date": 1539784643, "question_id": 52856686, "link": "https://stackoverflow.com/questions/52856686/ruby-on-rails-uninitialized-constant-zipfilecreate", "title": "Ruby on rails : uninitialized constant Zip::File::Create", "body": "<p>I'm trying to zip folder with rubyzip gem, I got this error : </p>\n\n<blockquote>\n  <p>uninitialized constant Zip::File::Create</p>\n</blockquote>\n\n<p>this the method that create the zip : </p>\n\n<pre><code>def self.zip_pdf( report, paths )\n    if File.exist?(\"#{Rails.root}/tmp/pdf/reports/#{report.reference}.zip\")\n      FileUtils.rm(\"#{Rails.root}/tmp/pdf/reports/#{report.reference}.zip\")\n    end\n\n    directory = File.join( File.dirname( paths[0] ) )\n    zipfile_name = File.join( File.dirname( paths[0] ) ) + '.zip'\n\n    Zip::ZipFile.open( zipfile_name, Zip::ZipFile::Create ) do |zipfile|\n      Dir[ File.join( directory , '*' ) ].each do |file|\n        zipfile.add( file.basename( file ), file )\n      end\n    end\n\n  end\n</code></pre>\n\n<p>I followed the doc but still don't know why it show that error ! </p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 966, "user_id": 6384607, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/dc77165b05cef4d2d4f6ed65d6bf9b21?s=128&d=identicon&r=PG&f=1", "display_name": "t s", "link": "https://stackoverflow.com/users/6384607/t-s"}, "edited": false, "score": 1, "creation_date": 1539784258, "post_id": 52856521, "comment_id": 92628102, "body": "Can you please add controller code for saving data and form params from terminal ?"}, {"owner": {"reputation": 9, "user_id": 7831736, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed3abe44cef42c0cbf1334b5a38495e3?s=128&d=identicon&r=PG&f=1", "display_name": "Peeyush Verma", "link": "https://stackoverflow.com/users/7831736/peeyush-verma"}, "reply_to_user": {"reputation": 966, "user_id": 6384607, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/dc77165b05cef4d2d4f6ed65d6bf9b21?s=128&d=identicon&r=PG&f=1", "display_name": "t s", "link": "https://stackoverflow.com/users/6384607/t-s"}, "edited": false, "score": 0, "creation_date": 1539784371, "post_id": 52856521, "comment_id": 92628186, "body": "Added the controller"}, {"owner": {"reputation": 9, "user_id": 7831736, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed3abe44cef42c0cbf1334b5a38495e3?s=128&d=identicon&r=PG&f=1", "display_name": "Peeyush Verma", "link": "https://stackoverflow.com/users/7831736/peeyush-verma"}, "reply_to_user": {"reputation": 966, "user_id": 6384607, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/dc77165b05cef4d2d4f6ed65d6bf9b21?s=128&d=identicon&r=PG&f=1", "display_name": "t s", "link": "https://stackoverflow.com/users/6384607/t-s"}, "edited": false, "score": 0, "creation_date": 1539784460, "post_id": 52856521, "comment_id": 92628257, "body": "Sorry, I&#39;m new at this so not sure about certain things."}, {"owner": {"reputation": 966, "user_id": 6384607, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/dc77165b05cef4d2d4f6ed65d6bf9b21?s=128&d=identicon&r=PG&f=1", "display_name": "t s", "link": "https://stackoverflow.com/users/6384607/t-s"}, "edited": false, "score": 0, "creation_date": 1539784598, "post_id": 52856521, "comment_id": 92628352, "body": "First try to change <code>file_field_tag</code> to <code>f.file_field</code> because in tags, params  have different name then the params with <code>f</code> obejct so this might be causing problem First try with <code>f.file_field</code>."}, {"owner": {"reputation": 9, "user_id": 7831736, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed3abe44cef42c0cbf1334b5a38495e3?s=128&d=identicon&r=PG&f=1", "display_name": "Peeyush Verma", "link": "https://stackoverflow.com/users/7831736/peeyush-verma"}, "reply_to_user": {"reputation": 966, "user_id": 6384607, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/dc77165b05cef4d2d4f6ed65d6bf9b21?s=128&d=identicon&r=PG&f=1", "display_name": "t s", "link": "https://stackoverflow.com/users/6384607/t-s"}, "edited": false, "score": 0, "creation_date": 1539784749, "post_id": 52856521, "comment_id": 92628465, "body": "I haved changed it to  &lt;%= f.file_field &quot;images[]&quot;, type: :file, multiple: true %&gt; still the images are not uploading"}, {"owner": {"reputation": 966, "user_id": 6384607, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/dc77165b05cef4d2d4f6ed65d6bf9b21?s=128&d=identicon&r=PG&f=1", "display_name": "t s", "link": "https://stackoverflow.com/users/6384607/t-s"}, "edited": false, "score": 0, "creation_date": 1539784837, "post_id": 52856521, "comment_id": 92628514, "body": "Please add response (with params) form terminal , when you hit save or update check terminal and add that code here."}, {"owner": {"reputation": 9, "user_id": 7831736, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed3abe44cef42c0cbf1334b5a38495e3?s=128&d=identicon&r=PG&f=1", "display_name": "Peeyush Verma", "link": "https://stackoverflow.com/users/7831736/peeyush-verma"}, "reply_to_user": {"reputation": 966, "user_id": 6384607, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/dc77165b05cef4d2d4f6ed65d6bf9b21?s=128&d=identicon&r=PG&f=1", "display_name": "t s", "link": "https://stackoverflow.com/users/6384607/t-s"}, "edited": false, "score": 0, "creation_date": 1539784858, "post_id": 52856521, "comment_id": 92628523, "body": "I think we need to make the changes in the &lt;%= form_for([@campaign, @campaign.contents.new]) do |f| %&gt; section, which will pass the entry."}, {"owner": {"reputation": 3521, "user_id": 2521680, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/6D935.jpg?s=128&g=1", "display_name": "Rockwell Rice", "link": "https://stackoverflow.com/users/2521680/rockwell-rice"}, "edited": false, "score": 0, "creation_date": 1539784860, "post_id": 52856521, "comment_id": 92628525, "body": "Can you share the model handling this, looks like <code>Content.rb</code> maybe, also have you checked to see if the images are getting into the bucket on AWS?"}, {"owner": {"reputation": 9, "user_id": 7831736, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed3abe44cef42c0cbf1334b5a38495e3?s=128&d=identicon&r=PG&f=1", "display_name": "Peeyush Verma", "link": "https://stackoverflow.com/users/7831736/peeyush-verma"}, "edited": false, "score": 0, "creation_date": 1539785284, "post_id": 52856521, "comment_id": 92628826, "body": "Added the model images for content is only uploading, however, all other user images are uploading on aws."}, {"owner": {"reputation": 9, "user_id": 7831736, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed3abe44cef42c0cbf1334b5a38495e3?s=128&d=identicon&r=PG&f=1", "display_name": "Peeyush Verma", "link": "https://stackoverflow.com/users/7831736/peeyush-verma"}, "edited": false, "score": 0, "creation_date": 1539785363, "post_id": 52856521, "comment_id": 92628879, "body": "Terminal response added"}, {"owner": {"reputation": 9, "user_id": 7831736, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed3abe44cef42c0cbf1334b5a38495e3?s=128&d=identicon&r=PG&f=1", "display_name": "Peeyush Verma", "link": "https://stackoverflow.com/users/7831736/peeyush-verma"}, "edited": false, "score": 0, "creation_date": 1539790147, "post_id": 52856521, "comment_id": 92631915, "body": "Hey, Pranav has helped to over come the above mention error but now I&#39;m getting a new error i.e   &quot;unknown attribute &#39;images&#39; for Content.&quot;   please help"}, {"owner": {"reputation": 9, "user_id": 7831736, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed3abe44cef42c0cbf1334b5a38495e3?s=128&d=identicon&r=PG&f=1", "display_name": "Peeyush Verma", "link": "https://stackoverflow.com/users/7831736/peeyush-verma"}, "edited": false, "score": 0, "creation_date": 1539836266, "post_id": 52856521, "comment_id": 92647492, "body": "Hey guys please help!!"}, {"owner": {"reputation": 9, "user_id": 7831736, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed3abe44cef42c0cbf1334b5a38495e3?s=128&d=identicon&r=PG&f=1", "display_name": "Peeyush Verma", "link": "https://stackoverflow.com/users/7831736/peeyush-verma"}, "edited": false, "score": 0, "creation_date": 1539851990, "post_id": 52856521, "comment_id": 92653836, "body": "Is there no one who can help me out :("}], "answers": [{"comments": [{"owner": {"reputation": 9, "user_id": 7831736, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed3abe44cef42c0cbf1334b5a38495e3?s=128&d=identicon&r=PG&f=1", "display_name": "Peeyush Verma", "link": "https://stackoverflow.com/users/7831736/peeyush-verma"}, "edited": false, "score": 0, "creation_date": 1539788749, "post_id": 52857219, "comment_id": 92631090, "body": "Thanks but now I&#39;m getting an error from the controller. &quot;unknown attribute &#39;images&#39; for Content.&quot;"}, {"owner": {"reputation": 32131, "user_id": 2346461, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/i3xAf.jpg?s=128&g=1", "display_name": "Pavan", "link": "https://stackoverflow.com/users/2346461/pavan"}, "reply_to_user": {"reputation": 9, "user_id": 7831736, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed3abe44cef42c0cbf1334b5a38495e3?s=128&d=identicon&r=PG&f=1", "display_name": "Peeyush Verma", "link": "https://stackoverflow.com/users/7831736/peeyush-verma"}, "edited": false, "score": 0, "creation_date": 1539791199, "post_id": 52857219, "comment_id": 92632508, "body": "@PeeyushVerma I&#39;ve updated my answer. Change images to image in the answer."}, {"owner": {"reputation": 9, "user_id": 7831736, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed3abe44cef42c0cbf1334b5a38495e3?s=128&d=identicon&r=PG&f=1", "display_name": "Peeyush Verma", "link": "https://stackoverflow.com/users/7831736/peeyush-verma"}, "edited": false, "score": 0, "creation_date": 1539791327, "post_id": 52857219, "comment_id": 92632570, "body": "Thanks for the swift response. However, now the error is Paperclip::AdapterRegistry::NoHandlerError (No handler found for []):"}, {"owner": {"reputation": 32131, "user_id": 2346461, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/i3xAf.jpg?s=128&g=1", "display_name": "Pavan", "link": "https://stackoverflow.com/users/2346461/pavan"}, "reply_to_user": {"reputation": 9, "user_id": 7831736, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed3abe44cef42c0cbf1334b5a38495e3?s=128&d=identicon&r=PG&f=1", "display_name": "Peeyush Verma", "link": "https://stackoverflow.com/users/7831736/peeyush-verma"}, "edited": false, "score": 0, "creation_date": 1539791456, "post_id": 52857219, "comment_id": 92632621, "body": "@PeeyushVerma What happens when you change  this <code>&lt;%= f.file_field &quot;image[]&quot;, type: :file, multiple: true %&gt;</code> to <code>&lt;%= f.file_field image, type: :file, multiple: true %&gt;</code>?"}, {"owner": {"reputation": 9, "user_id": 7831736, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed3abe44cef42c0cbf1334b5a38495e3?s=128&d=identicon&r=PG&f=1", "display_name": "Peeyush Verma", "link": "https://stackoverflow.com/users/7831736/peeyush-verma"}, "edited": false, "score": 0, "creation_date": 1539791591, "post_id": 52857219, "comment_id": 92632684, "body": "When changed &lt;%= f.file_field &quot;image[]&quot;, type: :file, multiple: true %&gt; to &lt;%= f.file_field image, type: :file, multiple: true %&gt;  I got an error ActiveModel::UnknownAttributeError (unknown attribute &#39;images&#39; for Content.):"}, {"owner": {"reputation": 32131, "user_id": 2346461, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/i3xAf.jpg?s=128&g=1", "display_name": "Pavan", "link": "https://stackoverflow.com/users/2346461/pavan"}, "reply_to_user": {"reputation": 9, "user_id": 7831736, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed3abe44cef42c0cbf1334b5a38495e3?s=128&d=identicon&r=PG&f=1", "display_name": "Peeyush Verma", "link": "https://stackoverflow.com/users/7831736/peeyush-verma"}, "edited": false, "score": 0, "creation_date": 1539791670, "post_id": 52857219, "comment_id": 92632726, "body": "@PeeyushVerma Do you still have images somewhere? change it to image"}, {"owner": {"reputation": 9, "user_id": 7831736, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed3abe44cef42c0cbf1334b5a38495e3?s=128&d=identicon&r=PG&f=1", "display_name": "Peeyush Verma", "link": "https://stackoverflow.com/users/7831736/peeyush-verma"}, "edited": false, "score": 0, "creation_date": 1539791977, "post_id": 52857219, "comment_id": 92632877, "body": "I&#39;m not using images also I have updated my code above, please see"}, {"owner": {"reputation": 32131, "user_id": 2346461, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/i3xAf.jpg?s=128&g=1", "display_name": "Pavan", "link": "https://stackoverflow.com/users/2346461/pavan"}, "reply_to_user": {"reputation": 9, "user_id": 7831736, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed3abe44cef42c0cbf1334b5a38495e3?s=128&d=identicon&r=PG&f=1", "display_name": "Peeyush Verma", "link": "https://stackoverflow.com/users/7831736/peeyush-verma"}, "edited": false, "score": 0, "creation_date": 1539793476, "post_id": 52857219, "comment_id": 92633681, "body": "@PeeyushVerma Can you try changing the form_for to <code>&lt;%= form_for [@campaign, @campaign.contents.new], html: { multipart: true } do |f|</code> and check"}, {"owner": {"reputation": 9, "user_id": 7831736, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed3abe44cef42c0cbf1334b5a38495e3?s=128&d=identicon&r=PG&f=1", "display_name": "Peeyush Verma", "link": "https://stackoverflow.com/users/7831736/peeyush-verma"}, "edited": false, "score": 0, "creation_date": 1539794661, "post_id": 52857219, "comment_id": 92634289, "body": "Still getting the error Paperclip::AdapterRegistry::NoHandlerError in ContentsController#create"}, {"owner": {"reputation": 32131, "user_id": 2346461, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/i3xAf.jpg?s=128&g=1", "display_name": "Pavan", "link": "https://stackoverflow.com/users/2346461/pavan"}, "reply_to_user": {"reputation": 9, "user_id": 7831736, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed3abe44cef42c0cbf1334b5a38495e3?s=128&d=identicon&r=PG&f=1", "display_name": "Peeyush Verma", "link": "https://stackoverflow.com/users/7831736/peeyush-verma"}, "edited": false, "score": 0, "creation_date": 1539794893, "post_id": 52857219, "comment_id": 92634397, "body": "@PeeyushVerma Can you update the question with the full error message?"}], "tags": [], "owner": {"reputation": 32131, "user_id": 2346461, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/i3xAf.jpg?s=128&g=1", "display_name": "Pavan", "link": "https://stackoverflow.com/users/2346461/pavan"}, "is_accepted": false, "score": 1, "last_activity_date": 1539791176, "last_edit_date": 1539791176, "creation_date": 1539786194, "answer_id": 52857219, "question_id": 52856521, "link": "https://stackoverflow.com/questions/52856521/unable-to-upload-images-via-paperclip-on-rails-5/52857219#52857219", "title": "Unable to upload images via paperclip on rails 5", "body": "<blockquote>\n  <p>Unpermitted parameter: :images</p>\n</blockquote>\n\n<p>Your code needs a couple of important changes.</p>\n\n<p>1) This </p>\n\n<p><code>&lt;%= file_field_tag \"images[]\", type: :file, multiple: true %&gt;</code> </p>\n\n<p>should be</p>\n\n<pre><code>&lt;%= f.file_field \"image[]\", type: :file, multiple: true %&gt;\n</code></pre>\n\n<p>2) You need to modify <code>content_params</code> to allow <strong>image</strong> to accept an array of values. Change <code>:image</code> to <code>image: []</code> in the <code>content_params</code></p>\n"}], "owner": {"reputation": 9, "user_id": 7831736, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed3abe44cef42c0cbf1334b5a38495e3?s=128&d=identicon&r=PG&f=1", "display_name": "Peeyush Verma", "link": "https://stackoverflow.com/users/7831736/peeyush-verma"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 56, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1554988533, "creation_date": 1539784179, "last_edit_date": 1554988533, "question_id": 52856521, "link": "https://stackoverflow.com/questions/52856521/unable-to-upload-images-via-paperclip-on-rails-5", "title": "Unable to upload images via paperclip on rails 5", "body": "<p><strong>error</strong></p>\n\n<p><a href=\"https://i.stack.imgur.com/wvBkF.png\" rel=\"nofollow noreferrer\">Error while uploading the image</a></p>\n\n<p>I'm unable to upload an image in my nested scaffold form. </p>\n\n<p>All other fields are getting in the database except the image. Please help!</p>\n\n<p>I am on rails 5.2 and using paperclip for image uploading and images need to be uploaded on AWS.</p>\n\n<p>I am not getting any errors its just the images are not entering the database.</p>\n\n<p>Thanks!</p>\n\n<p><strong>Form Partial</strong></p>\n\n<pre><code>    &lt;div class=\"panel panel-default\"&gt;\n  &lt;div class=\"panel-heading\"&gt;\n    &lt;span&gt;&lt;i class=\"fa fa-bolt\" style=\"color: #ffb400\"&gt;&lt;/i&gt; Apply for this campaign&lt;/span&gt;\n  &lt;/div&gt;\n  &lt;div class=\"panel-body\"&gt;\n\n&lt;%= form_for([@campaign, @campaign.contents.new]) do |f| %&gt;\n&lt;div class=\"row\"&gt;\n  &lt;div class=\"col-md-12\"&gt;\n    &lt;label&gt;Post Copy&lt;/label&gt;\n    &lt;%= f.text_area :post_copy, rows: 5, placeholder: \"Create your post exactly as you'd like to see it published.\", class: \"form-control\", required: true %&gt;\n  &lt;/div&gt;\n&lt;/div&gt;\n\n&lt;div class=\"row\"&gt;\n  &lt;div class=\"col-md-12\"&gt;\n    &lt;label&gt;Price USD&lt;/label&gt;\n    &lt;%= f.text_field :price, placeholder: \"How much you will charge\", class: \"form-control\", required: true %&gt;\n  &lt;/div&gt;\n&lt;/div&gt;\n\n&lt;div class=\"row\"&gt;\n  &lt;div class=\"col-md-12\"&gt;\n    &lt;span class=\"btn btn-default btn-file text-babu\"&gt;\n      &lt;i class=\"fa fa-cloud-upload\" aria-hidden=\"true\"&gt;&lt;/i&gt; Select Photos\n      &lt;%= f.file_field \"image[]\", type: :file, multiple: true %&gt;\n    &lt;/span&gt;\n  &lt;/div&gt;\n&lt;/div&gt;\n\n&lt;div class=\"row\"&gt;\n  &lt;div class=\"col-md-12\"&gt;\n    &lt;label&gt;Where will you post?&lt;/label&gt;\n  &lt;/div&gt;\n\n  &lt;% if !@campaign.facebook.blank? %&gt;\n  &lt;div class=\"col-md-3\"&gt;\n    &lt;%= f.check_box :is_facebook %&gt; Facebook\n  &lt;/div&gt;\n  &lt;% end %&gt;\n\n  &lt;% if !@campaign.twitter.blank? %&gt;\n  &lt;div class=\"col-md-3\"&gt;\n    &lt;%= f.check_box :is_twitter %&gt; Twitter\n  &lt;/div&gt;\n  &lt;% end %&gt;\n\n  &lt;% if !@campaign.instagram.blank? %&gt;\n  &lt;div class=\"col-md-3\"&gt;\n    &lt;%= f.check_box :is_instagram %&gt; Instagram\n  &lt;/div&gt;\n  &lt;% end %&gt;\n\n  &lt;% if !@campaign.youtube.blank? %&gt;\n  &lt;div class=\"col-md-3\"&gt;\n    &lt;%= f.check_box :is_youtube %&gt; Youtube\n  &lt;/div&gt;\n  &lt;% end %&gt;\n&lt;/div&gt;\n\n&lt;br/&gt;\n&lt;%= f.submit \"Submit for Approval\", class: \"btn btn-normal btn-block\" %&gt;\n&lt;% end %&gt;\n&lt;/div&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p><strong>Controller</strong></p>\n\n<pre><code>class ContentsController &lt; ApplicationController\n  before_action :set_campaign, except: [:your_posts]\n  before_action :set_content, only: [:show, :edit, :update, :destroy, :approve, :decline]\n\n  # GET campaigns/1/contents\n  def index\n    @contents = @campaign.contents\n  end\n\n  # GET campaigns/1/contents/1\n  def show\n  end\n\n  # GET campaigns/1/contents/new\n  def new\n    @content = @campaign.contents.build\n  end\n\n  # GET campaigns/1/contents/1/edit\n  def edit\n  end\n\n  # POST campaigns/1/contents\n  def create\n    if !current_user.is_active_influencer\n      return redirect_to payout_method_path, alert: \"Please Connect to Stripe Express first.\"\n    end\n\n    campaign = Campaign.find(params[:campaign_id])\n    if campaign.active == false\n      flash[:alert] = \"This Campaign is closed\"\n    elsif current_user == campaign.user\n      flash[:alert] = \"You cannot apply for your own campaign!\"\n    elsif\n      @content = current_user.contents.build(content_params)\n      @content.campaign = campaign\n      @content.transaction_fee = @content.price * 15/100\n      @content.total = @content.price + @content.transaction_fee\n      @content.save\n\n      flash[:notice] = \"Applied Successfully!\"\n    end\n    redirect_to campaign\n  end\n\n  # PUT campaigns/1/contents/1\n  def update\n    if @content.update_attributes(content_params)\n      redirect_to([@content.campaign, @content], notice: 'Content was successfully updated.')\n    else\n      render action: 'edit'\n    end\n  end\n\n  # DELETE campaigns/1/contents/1\n  def destroy\n    @content.destroy\n    redirect_to campaign_contents_url(@campaign)\n  end\n\n  def your_posts\n    @posts = current_user.contents\n  end\n\n  def approve\n    if current_user.stripe_id.blank?\n      flash[:alert] = \"Please update your payment method.\"\n      return redirect_to payment_method_path\n    elsif\n      charge(@campaign, @content)\n    elsif\n      flash[:alert] = \"Cannot make a reservation!\"\n    end\n  end\n\n  def decline\n    @content.Declined!\n    redirect_to campaign_contents_path\n  end\n\n  private\n\n  #Twilio_start\n  def send_sms(campaign, content)\n    @client = Twilio::REST::Client.new\n    @client.messages.create(\n      from: '+18646060816',\n      to: content.user.phone_number,\n      body: \"You content for '#{campaign.brand_name}' has been approved.\"\n    )\n  end\n  #Twilio_end\n\n  def charge(campaign, content)\n    if !campaign.user.stripe_id.blank?\n      customer = Stripe::Customer.retrieve(campaign.user.stripe_id)\n      charge = Stripe::Charge.create(\n        :customer =&gt; customer.id,\n        :amount =&gt; content.total * 100,\n        :description =&gt; campaign.name,\n        :currency =&gt; \"usd\",\n        :destination =&gt; {\n          :amount =&gt; content.price * 95, # 95% of the content amount goes to the Content Maker\n          :account =&gt; content.user.merchant_id # Influencer's Stripe customer ID\n        }\n      )\n\n      if charge\n        content.Approved!\n        ContentMailer.send_email_to_influencer(content.user, campaign).deliver_later if content.user.setting.enable_email\n        send_sms(campaign, content) if content.user.setting.enable_sms #Twilio\n        flash[:notice] = \"Paid and Approved successfully!\"\n        redirect_to campaign_contents_path\n      else\n        reservation.Declined!\n        flash[:alert] = \"Cannot charge with this payment method!\"\n      end\n    end\n  rescue Stripe::CardError =&gt; e\n    content.Declined!\n    flash[:alert] = e.message\n  end\n\n  # Use callbacks to share common setup or constraints between actions.\n  def set_campaign\n    @campaign = Campaign.find(params[:campaign_id])\n  end\n\n  def set_content\n    @content = @campaign.contents.find(params[:id])\n  end\n\n  # Only allow a trusted parameter \"white list\" through.\n  def content_params\n    params.require(:content).permit(:post_copy, :is_facebook, :is_instagram, :is_twitter, :is_youtube, :price, image: [])\n  end\nend\n</code></pre>\n\n<p><strong>Content.rb</strong></p>\n\n<pre><code>class Content &lt; ApplicationRecord\n  enum status: {Waiting: 0, Approved: 1, Declined: 2}\n\n  after_create_commit :create_notification\n\n  belongs_to :user\n  belongs_to :campaign\n\n  has_attached_file :image, styles: { medium: \"300x300&gt;\", thumb: \"100x100&gt;\" }\n  validates_attachment_content_type :image, content_type: /\\Aimage\\/.*\\z/\n\n  private\n\n  def create_notification\n    type = self.campaign.Instant? ? \"New Booking\" : \"New Request\"\n    influencer = User.find(self.user_id)\n\n    Notification.create(content: \"#{type} from #{influencer.fullname}\", user_id: self.campaign.user_id)\n  end\nend\n</code></pre>\n\n<p><strong>Terminal Response</strong></p>\n\n<pre><code>Processing by ContentsController#create as HTML\nParameters: {\"utf8\"=&gt;\"\u2713\", \"authenticity_token\"=&gt;\"rM9i4hOlaYpVCmaUpHVRmh9N/QqI+nbnPvIJp3k9VlJ1U8rSb7FNTv9kqlR0P0LayZ6nUto2ekYXoTrCy45mWw==\", \"content\"=&gt;{\"post_copy\"=&gt;\"Testing for Stack Over Flow\", \"price\"=&gt;\"10\", \"images\"=&gt;[], \"is_instagram\"=&gt;\"1\"}, \"commit\"=&gt;\"Submit for Approval\", \"campaign_id\"=&gt;\"1\"}\n  Campaign Load (0.2ms)  SELECT  \"campaigns\".* FROM \"campaigns\" WHERE \"campaigns\".\"id\" = ? LIMIT ?  [[\"id\", 1], [\"LIMIT\", 1]]\n  \u21b3 app/controllers/contents_controller.rb:126\n  User Load (0.4ms)  SELECT  \"users\".* FROM \"users\" WHERE \"users\".\"id\" = ? ORDER BY \"users\".\"id\" ASC LIMIT ?  [[\"id\", 2], [\"LIMIT\", 1]]\n  \u21b3 app/controllers/contents_controller.rb:25\n  CACHE Campaign Load (0.0ms)  SELECT  \"campaigns\".* FROM \"campaigns\" WHERE \"campaigns\".\"id\" = ? LIMIT ?  [[\"id\", 1], [\"LIMIT\", 1]]\n  \u21b3 app/controllers/contents_controller.rb:29\n  User Load (0.2ms)  SELECT  \"users\".* FROM \"users\" WHERE \"users\".\"id\" = ? LIMIT ?  [[\"id\", 1], [\"LIMIT\", 1]]\n  \u21b3 app/controllers/contents_controller.rb:32\nUnpermitted parameter: :images\n   (0.1ms)  begin transaction\n  \u21b3 app/controllers/contents_controller.rb:39\n  Content Create (1.1ms)  INSERT INTO \"contents\" (\"user_id\", \"campaign_id\", \"post_copy\", \"is_instagram\", \"price\", \"transaction_fee\", \"total\", \"created_at\", \"updated_at\") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)  [[\"user_id\", 2], [\"campaign_id\", 1], [\"post_copy\", \"Testing for Stack Over Flow\"], [\"is_instagram\", 1], [\"price\", 10], [\"transaction_fee\", 1], [\"total\", 11], [\"created_at\", \"2018-10-17 14:03:08.805281\"], [\"updated_at\", \"2018-10-17 14:03:08.805281\"]]\n  \u21b3 app/controllers/contents_controller.rb:39\n   (6.1ms)  commit transaction\n  \u21b3 app/controllers/contents_controller.rb:39\n  User Load (0.2ms)  SELECT  \"users\".* FROM \"users\" WHERE \"users\".\"id\" = ? LIMIT ?  [[\"id\", 2], [\"LIMIT\", 1]]\n  \u21b3 app/models/content.rb:16\n   (0.2ms)  begin transaction\n  \u21b3 app/models/content.rb:18\n  User Load (0.2ms)  SELECT  \"users\".* FROM \"users\" WHERE \"users\".\"id\" = ? LIMIT ?  [[\"id\", 1], [\"LIMIT\", 1]]\n  \u21b3 app/models/content.rb:18\n  Notification Create (0.7ms)  INSERT INTO \"notifications\" (\"content\", \"user_id\", \"created_at\", \"updated_at\") VALUES (?, ?, ?, ?)  [[\"content\", \"New Request from Influencer\"], [\"user_id\", 1], [\"created_at\", \"2018-10-17 14:03:08.841715\"], [\"updated_at\", \"2018-10-17 14:03:08.841715\"]]\n  \u21b3 app/models/content.rb:18\n   (3.8ms)  commit transaction\n  \u21b3 app/models/content.rb:18\n[ActiveJob] Enqueued NotificationJob (Job ID: 61665383-2b84-4215-95c2-47f6a5b98153) to Async(default) with arguments: #&lt;GlobalID:0x00007fdf094d0928 @uri=#&lt;URI::GID gid://Notification/17&gt;&gt;\nRedirected to http://localhost:3000/campaigns/1\n  Notification Load (0.4ms)  SELECT  \"notifications\".* FROM \"notifications\" WHERE \"notifications\".\"id\" = ? LIMIT ?  [[\"id\", 17], [\"LIMIT\", 1]]\nCompleted 302 Found in 71ms (ActiveRecord: 14.2ms)\n</code></pre>\n"}, {"tags": ["ruby", "middleman"], "answers": [{"tags": [], "owner": {"reputation": 8733, "user_id": 3625433, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/N7qK6.png?s=128&g=1", "display_name": "lacostenycoder", "link": "https://stackoverflow.com/users/3625433/lacostenycoder"}, "is_accepted": true, "score": 1, "last_activity_date": 1539804264, "creation_date": 1539804264, "answer_id": 52862226, "question_id": 52856110, "link": "https://stackoverflow.com/questions/52856110/how-to-use-cookies-in-a-middleman-ruby-application/52862226#52862226", "title": "How to use cookies in a middleman ruby application?", "body": "<p>Middleman doesn't provide any backend code, you'll need to use javascript</p>\n\n<p>To add one inside javascript you can do</p>\n\n<pre><code>document.cookie = \"key1=value1;key2=value2;expires=date\";\n</code></pre>\n\n<p>But you can also have a look at <a href=\"https://github.com/sparklemotion/http-cookie\" rel=\"nofollow noreferrer\">https://github.com/sparklemotion/http-cookie</a></p>\n\n<p>or </p>\n\n<p><a href=\"https://github.com/js-cookie/js-cookie\" rel=\"nofollow noreferrer\">https://github.com/js-cookie/js-cookie</a></p>\n"}], "owner": {"reputation": 1810, "user_id": 3078630, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/5a853b560f56e60ba05073e5b121ef1b?s=128&d=identicon&r=PG&f=1", "display_name": "Naveen Kumar", "link": "https://stackoverflow.com/users/3078630/naveen-kumar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 91, "favorite_count": 0, "accepted_answer_id": 52862226, "answer_count": 1, "score": 0, "last_activity_date": 1539804264, "creation_date": 1539782913, "question_id": 52856110, "link": "https://stackoverflow.com/questions/52856110/how-to-use-cookies-in-a-middleman-ruby-application", "title": "How to use cookies in a middleman ruby application?", "body": "<p>I have a ruby middleman ruby application which contains static pages. I want to use cookies[:some_variable] in a helper class. How can I do this?</p>\n\n<p>config.rb is:</p>\n\n<pre><code>configure :build do\n  activate :minify_css, inline: true\n  activate :minify_javascript\n  activate :minify_html\n  activate :relative_assets\n\n  activate :asset_hash, ignore: ['roost_worker.js']\n\n  activate :gzip\nend\n</code></pre>\n"}, {"tags": ["ruby"], "answers": [{"comments": [{"owner": {"reputation": 79, "user_id": 9711242, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RfjDb.jpg?s=128&g=1", "display_name": "seki", "link": "https://stackoverflow.com/users/9711242/seki"}, "edited": false, "score": 0, "creation_date": 1539788190, "post_id": 52856144, "comment_id": 92630764, "body": "Thanks for your reply. I use your method, but it return me <b>: stack level too deep (SystemStackError)</b>, I am still feel confusing."}, {"owner": {"reputation": 27144, "user_id": 3857758, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/58c4295826435f049b7fc32b98c240f9?s=128&d=identicon&r=PG&f=1", "display_name": "Ursus", "link": "https://stackoverflow.com/users/3857758/ursus"}, "reply_to_user": {"reputation": 79, "user_id": 9711242, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RfjDb.jpg?s=128&g=1", "display_name": "seki", "link": "https://stackoverflow.com/users/9711242/seki"}, "edited": false, "score": 0, "creation_date": 1539788259, "post_id": 52856144, "comment_id": 92630804, "body": "You should just get rid of the parameter in the <code>booklist</code> definition"}, {"owner": {"reputation": 27144, "user_id": 3857758, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/58c4295826435f049b7fc32b98c240f9?s=128&d=identicon&r=PG&f=1", "display_name": "Ursus", "link": "https://stackoverflow.com/users/3857758/ursus"}, "reply_to_user": {"reputation": 79, "user_id": 9711242, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RfjDb.jpg?s=128&g=1", "display_name": "seki", "link": "https://stackoverflow.com/users/9711242/seki"}, "edited": false, "score": 0, "creation_date": 1539805159, "post_id": 52856144, "comment_id": 92639228, "body": "My pleasure sir :)"}], "tags": [], "owner": {"reputation": 27144, "user_id": 3857758, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/58c4295826435f049b7fc32b98c240f9?s=128&d=identicon&r=PG&f=1", "display_name": "Ursus", "link": "https://stackoverflow.com/users/3857758/ursus"}, "is_accepted": true, "score": 3, "last_activity_date": 1539788312, "last_edit_date": 1539788312, "creation_date": 1539783018, "answer_id": 52856144, "question_id": 52856087, "link": "https://stackoverflow.com/questions/52856087/why-do-i-cannot-access-hash-in-ruby/52856144#52856144", "title": "Why do I cannot access hash in Ruby?", "body": "<p>Your <code>booklist</code> method expects a parameter, but in this call you're passing none</p>\n\n<pre><code>booklist.each do |x , y|\n</code></pre>\n\n<p>Anyway, it turns out by the definition for <code>booklist</code> you don't need nor use that parameter. Move <code>booklist</code> to</p>\n\n<pre><code>def booklist\n  {\n    \"Title \" =&gt; @title.title.split(/ |\\_|\\-/).map(&amp;:capitalize).join(\" \"),\n    \"Author \" =&gt; @author.title.split(/ |\\_|\\-/).map(&amp;:capitalize).join(\" \"),\n    \"Language \" =&gt; (@language.title),\n    \"Classification \" =&gt; @classification,\n    \"ISBN \" =&gt; @isbn.to_s,\n    \"Book ID\" =&gt; @book_id.to_s,\n    \"Status\" =&gt; @borrow_status\n  }\nend\n</code></pre>\n"}], "owner": {"reputation": 79, "user_id": 9711242, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RfjDb.jpg?s=128&g=1", "display_name": "seki", "link": "https://stackoverflow.com/users/9711242/seki"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 57, "favorite_count": 0, "accepted_answer_id": 52856144, "answer_count": 1, "score": 0, "last_activity_date": 1539788312, "creation_date": 1539782866, "question_id": 52856087, "link": "https://stackoverflow.com/questions/52856087/why-do-i-cannot-access-hash-in-ruby", "title": "Why do I cannot access hash in Ruby?", "body": "<p>I am going to add <em>Book1</em>'s data to hash <em>bl</em>, but when I run code it returns me </p>\n\n<blockquote>\n  <p>:in `booklist': wrong number of arguments (given 0, expected 1) (ArgumentError)</p>\n</blockquote>\n\n<p>And this is my code.</p>\n\n<pre><code>class Book\n  attr_accessor :title, :author, :language, :classification, :isbn, :book_id, :borrow_status\n\n\n\n  def initialize(title, author, language, classification, isbn, book_id, borrow_status)\n    @title = title\n    @author = author\n    @language = language\n    @classification = classification\n    @isbn = isbn\n    @book_id = book_id\n    @borrow_status = borrow_status\n  end\n\n\n\n  def booklist(bl)\n     bl = {\n    \"Title \" =&gt; @title.title.split(/ |\\_|\\-/).map(&amp;:capitalize).join(\" \"),\n    \"Author \" =&gt; @author.title.split(/ |\\_|\\-/).map(&amp;:capitalize).join(\" \"),\n    \"Language \" =&gt; (@language.title),\n    \"Classification \" =&gt; @classification,\n    \"ISBN \" =&gt; @isbn.to_s,\n    \"Book ID\" =&gt; @book_id.to_s,\n    \"Status\" =&gt; @borrow_status\n    }\n    end\n\n\n  def put_booklist\n    booklist.each do |x , y|\n      puts \"#{x}\" , \"#{y}\"\n    end\n  end\n\n\nend\n\nbooks1 = Book.new(\"lonely planet: ireland\",\"damian harper\",\"english\",\"tourism\",9781786574459,1,\"available\")\nbooks1.put_booklist\n</code></pre>\n\n<p>I would like to know what's wrong with it?</p>\n"}, {"tags": ["ruby", "hanami", "hanami-model"], "comments": [{"owner": {"reputation": 1423, "user_id": 2948157, "user_type": "registered", "accept_rate": 84, "profile_image": "https://graph.facebook.com/100001350795049/picture?type=large", "display_name": "Lucian Tarna", "link": "https://stackoverflow.com/users/2948157/lucian-tarna"}, "edited": false, "score": 0, "creation_date": 1539782065, "post_id": 52854024, "comment_id": 92626646, "body": "tbh, i find it written ok :D. What is it that you don;t like when you look at it?"}], "answers": [{"tags": [], "owner": {"reputation": 8733, "user_id": 3625433, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/N7qK6.png?s=128&g=1", "display_name": "lacostenycoder", "link": "https://stackoverflow.com/users/3625433/lacostenycoder"}, "is_accepted": false, "score": 1, "last_activity_date": 1539831459, "last_edit_date": 1539831459, "creation_date": 1539780367, "answer_id": 52855206, "question_id": 52854024, "link": "https://stackoverflow.com/questions/52854024/how-to-refactor-queries-chain-in-hanami/52855206#52855206", "title": "How to refactor queries chain in Hanami?", "body": "<p>Something along these lines might work, but not sure how chaining these will poorly effect  performance or results, but you can try it and it may lead you to the answer you want</p>\n\n<h3>UPDATED</h3>\n\n<p>If you really want chaining this is close to what you want.</p>\n\n<pre><code>class DocumentRepository &lt; Hanami::Repository\n  GENRES = DbSchema.current_schema.enum(:document_genre).values.map(&amp;:to_s)\n  DOCUMENTS_PER_PAGE = 30\n\n  associations do\n    has_many :boxes\n    has_many :urls\n  end\n\n  attr_accessor :data\n\n  def initialize\n    @data = []\n    super  \n  end\n\n  def data \n    @data.flatten!.uniq!\n  end\n\n  def with_genre(key)\n    @data &lt;&lt; documents.where(genre: key) \n    self\n  end\n\n  def published_between(arr)\n    from, to = arr \n    @data &lt;&lt; documents.where(created_at: [from..to])\n    self\n  end\n\n  def skip(num)\n    @data &lt;&lt; documents.offset(num)\n    self\n  end\n\nend\n</code></pre>\n\n<p>Call it like this assuming this is an instance variable of <code>DocumentRepository</code></p>\n\n<pre><code>document_repository.with_genre('news')\n                   .published_between([from, to])\n                   .skip(30)\n                   .data\n</code></pre>\n\n<p>By returning <code>self</code> in each instance method you're able to chain the calls on the instance.</p>\n\n<h3>Original answer</h3>\n\n<p>This way works but uses similar syntax in your current call.</p>\n\n<pre><code>class DocumentRepository &lt; Hanami::Repository\n  GENRES = DbSchema.current_schema.enum(:document_genre).values.map(&amp;:to_s)\n  DOCUMENTS_PER_PAGE = 30\n\n  associations do\n    has_many :boxes\n    has_many :urls\n  end\n\n  def hack_where(opts={})\n    data = []\n    opts.each do |i|\n      data &lt;&lt; self.send(i[0],i[1]).call\n    end\n    data.flatten!.uniq!\n  end\n\n  def with_genre(key)\n    lambda { |key| documents.where(genre: key) }\n  end\n\n  def published_between(arr)\n    from = arr[0]\n    to = arr[1]\n    lambda { |from, to| documents.where(created_at: [from..to]) }\n  end\n\n  def skip(num)\n    lambda { documents.offset(num) }\n  end\n\nend\n</code></pre>\n\n<p>You can call it like:</p>\n\n<pre><code>hack_where({with_genre: 'news', published_between: [from,to], skip: 30})\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 53, "user_id": 689767, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5b44e40da6fddb57f42057c1b353c4da?s=128&d=identicon&r=PG", "display_name": "foxwwweb", "link": "https://stackoverflow.com/users/689767/foxwwweb"}, "is_accepted": false, "score": 0, "last_activity_date": 1539816949, "creation_date": 1539816949, "answer_id": 52864701, "question_id": 52854024, "link": "https://stackoverflow.com/questions/52854024/how-to-refactor-queries-chain-in-hanami/52864701#52864701", "title": "How to refactor queries chain in Hanami?", "body": "<p>Introduce query object:</p>\n\n<pre><code>class FilterDocuments\n  DOCUMENTS_PER_PAGE = 30\n\n  def initialize(documents)\n    @documents = documents\n  end\n\n  def filter(params = {})\n    result = apply_ordering(documents)\n    result = apply_limit_and_offset(result, params)\n    result = filter_by_genre(result, params)\n    result = filter_by_created_at(result, params)\n    result = filter_by_published_at(result, params)\n\n    result\n  end\n\nprivate\n  attr_reader :documents\n\n  def apply_ordering(documents)\n    documents.order { created_at.desc }\n  end\n\n  def apply_limit_and_offset(documents, params)\n    if params.key?(:skip)\n      documents.offset(params[:skip])\n    else\n      documents\n    end.limit(DOCUMENTS_PER_PAGE)\n  end\n\n  def filter_by_genre(documents, params)\n    if params.key?(:genre)\n      documents.where(genre: params[:genre])\n    else\n      documents\n    end\n  end\n\n  def filter_by_created_at(documents, params)\n    if params.key?(:min_created_at) &amp;&amp; params.key?(:max_created_at)\n      range = params[:min_created_at]..params[:max_created_at]\n      documents.where(created_at: range)\n    else\n      documents\n    end\n  end\n\n  def filter_by_published_at(documents, params)\n    if params.key?(:min_published_at) &amp;&amp; params.key?(:max_published_at)\n      range = params[:min_published_at]..params[:max_published_at]\n      documents.where(published_at: range)\n    else\n      documents\n    end\n  end\nend\n</code></pre>\n\n<p>How to use:</p>\n\n<pre><code>    def query\n      FilterDocuments.new(DocumentRepository.new.documents)\n    end\n\n    filtered_documents = query.filter(params)\n</code></pre>\n"}], "owner": {"reputation": 53, "user_id": 689767, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5b44e40da6fddb57f42057c1b353c4da?s=128&d=identicon&r=PG", "display_name": "foxwwweb", "link": "https://stackoverflow.com/users/689767/foxwwweb"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 119, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1539831459, "creation_date": 1539776446, "question_id": 52854024, "link": "https://stackoverflow.com/questions/52854024/how-to-refactor-queries-chain-in-hanami", "title": "How to refactor queries chain in Hanami?", "body": "<p>How to refactor <code>#filtered</code> method?</p>\n\n<p>In Hanami there is no way to make a chain of queries (filters) in ActiveRecord-style. I would like to get a methods like ActiveRecord filters.</p>\n\n<p>Now: <code>documents.filtered(genre: 'news', min_published_at: from, max_published_at: to, skip: 30)</code></p>\n\n<p>What I want: <code>documents.with_genre('news').published_between(from, to).skip(30)</code></p>\n\n<pre><code>class DocumentRepository &lt; Hanami::Repository\n  GENRES = DbSchema.current_schema.enum(:document_genre).values.map(&amp;:to_s)\n  DOCUMENTS_PER_PAGE = 30\n\n  associations do\n    has_many :boxes\n    has_many :urls\n  end\n\n  # rubocop:disable Metrics/CyclomaticComplexity\n  # rubocop:disable Metrics/AbcSize\n  def filtered(params = {})\n    result = ordered.limit(DOCUMENTS_PER_PAGE)\n\n    result = result.where(genre: params[:genre]) if params.key?(:genre)\n\n    if params.key?(:min_created_at) &amp;&amp; params.key?(:max_created_at)\n      date_range = params[:min_created_at]..params[:max_created_at]\n      result = result.where(created_at: date_range)\n    end\n\n    if params.key?(:min_published_at) &amp;&amp; params.key?(:max_published_at)\n      date_range = params[:min_published_at]..params[:max_published_at]\n      result = result.where(published_at: date_range)\n    end\n\n    result = result.offset(params[:skip]) if params.key?(:skip)\n\n    result\n  end\n  # rubocop:enable Metrics/CyclomaticComplexity\n  # rubocop:enable Metrics/AbcSize\n\n  def ordered\n    documents.order { created_at.desc }\n  end\nend\n</code></pre>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 2, "creation_date": 1539776658, "post_id": 52853995, "comment_id": 92623253, "body": "Obligatory: <a href=\"https://stackoverflow.com/a/1732454/1954610\"><b>Do not parse HTML with regex</b></a>. This might work for a &quot;quick and dirty&quot; solution, but the <i>right</i> way to do this is with an HTML parser. (e.g. Nokogiri, for ruby.)"}, {"owner": {"reputation": 167912, "user_id": 240443, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/495d675e3bc42ed1dee469e2ce701f1b?s=128&d=identicon&r=PG", "display_name": "Amadan", "link": "https://stackoverflow.com/users/240443/amadan"}, "edited": false, "score": 0, "creation_date": 1539779968, "post_id": 52853995, "comment_id": 92625284, "body": "Note that even though Onigmo (Ruby&#39;s regexp engine) is IMO more powerful than any other regexp engine except PCRE, and it would be possible to parse XHTML with it, HTML is not as easy: <code>&lt;p&gt;foo&lt;ul&gt;&lt;li&gt;quux&lt;&#47;ul&gt;bar&lt;&#47;p&gt;</code> is valid HTML where I can&#39;t think of a regexp solution that would do the correct thing (erase <code>&lt;p&gt;foo</code> and <code>&lt;&#47;p&gt;</code>, and leave <code>&lt;ul&gt;&lt;li&gt;quux&lt;&#47;ul&gt;bar</code> alone)."}], "answers": [{"comments": [{"owner": {"reputation": 1059, "user_id": 3576036, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/f1fb048a732909f50ff2e2a267119640?s=128&d=identicon&r=PG&f=1", "display_name": "user3576036", "link": "https://stackoverflow.com/users/3576036/user3576036"}, "edited": false, "score": 1, "creation_date": 1539776910, "post_id": 52854095, "comment_id": 92623410, "body": "<code>string.gsub!</code> this returned nil.  Without <code>bang</code> i.e <code>string.gsub</code> it returned same string ."}, {"owner": {"reputation": 1407, "user_id": 3859961, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/625444c465d9823afd183cf8f62efa51?s=128&d=identicon&r=PG&f=1", "display_name": "An Nguyen", "link": "https://stackoverflow.com/users/3859961/an-nguyen"}, "reply_to_user": {"reputation": 1059, "user_id": 3576036, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/f1fb048a732909f50ff2e2a267119640?s=128&d=identicon&r=PG&f=1", "display_name": "user3576036", "link": "https://stackoverflow.com/users/3576036/user3576036"}, "edited": false, "score": 0, "creation_date": 1539777316, "post_id": 52854095, "comment_id": 92623658, "body": "@user3576036 you can try with the example, or you can edit the exact string that you want to replace"}], "tags": [], "owner": {"reputation": 1407, "user_id": 3859961, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/625444c465d9823afd183cf8f62efa51?s=128&d=identicon&r=PG&f=1", "display_name": "An Nguyen", "link": "https://stackoverflow.com/users/3859961/an-nguyen"}, "is_accepted": false, "score": 0, "last_activity_date": 1539777283, "last_edit_date": 1539777283, "creation_date": 1539776657, "answer_id": 52854095, "question_id": 52853995, "link": "https://stackoverflow.com/questions/52853995/replacing-html-tag-and-its-content-using-ruby-gsub/52854095#52854095", "title": "replacing html tag and its content using ruby gsub", "body": "<p>Apparently, your regex does not match <code>&lt;p&gt;...&lt;/p&gt;</code> (<code>&lt;p&gt;</code> and its content). Try this: </p>\n\n<p><code>string.gsub!(/&lt;p&gt;.*&lt;\\/p&gt;/, '')</code></p>\n\n<pre><code>test = '\\n &lt;img alt=\\\"testing artice breaking news\\\" src=\\\"something.com\" /&gt;\\n &lt;p&gt;\\n \\tnew vision content for testing rss feeds\\n &lt;/p&gt;\\n \"'\ntest.gsub(/&lt;p&gt;.*&lt;\\/p&gt;/, '')\n</code></pre>\n\n<p>Return</p>\n\n<p><code>\"\\\\n &lt;img alt=\\\\\\\"testing artice breaking news\\\\\\\" src=\\\\\\\"something.com\\\" /&gt;\\\\n \\\\n \\\"\"</code></p>\n\n<p>Also, please consider @Tom Lord's comment, you can use <a href=\"http://www.nokogiri.org\" rel=\"nofollow noreferrer\">Nokogiri</a> to manipulate HTML.</p>\n"}], "owner": {"reputation": 1059, "user_id": 3576036, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/f1fb048a732909f50ff2e2a267119640?s=128&d=identicon&r=PG&f=1", "display_name": "user3576036", "link": "https://stackoverflow.com/users/3576036/user3576036"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 779, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1539778714, "creation_date": 1539776321, "last_edit_date": 1539778714, "question_id": 52853995, "link": "https://stackoverflow.com/questions/52853995/replacing-html-tag-and-its-content-using-ruby-gsub", "title": "replacing html tag and its content using ruby gsub", "body": "<p>I am trying to replace a <code>&lt;p&gt;..&lt;/p&gt;</code> tag content in html content with empty string by doing the following.</p>\n\n<pre><code>string =  \\n &lt;img alt=\\\"testing artice breaking news\\\" src=\\\"something.com\" /&gt;\\n &lt;p&gt;\\n \\tnew vision content for testing rss feeds\\n &lt;/p&gt;\\n \" \n</code></pre>\n\n<p>When I did </p>\n\n<pre><code>string.gsub!(/&lt;p.*?&gt;|&lt;\\/p&gt;/, '')\n</code></pre>\n\n<p>It just replaced the <code>&lt;p&gt;</code> and <code>&lt;/p&gt;</code> with empty string but the content remained. How can I remove both the tag and its content ?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "onerror"], "answers": [{"comments": [{"owner": {"reputation": 44, "user_id": 6656970, "user_type": "registered", "accept_rate": 67, "profile_image": "https://lh3.googleusercontent.com/-DxGif210ro8/AAAAAAAAAAI/AAAAAAAAAcw/jXhVPMglwG4/photo.jpg?sz=128", "display_name": "ph\u1ea1m tu\u1ea5n", "link": "https://stackoverflow.com/users/6656970/ph%e1%ba%a1m-tu%e1%ba%a5n"}, "edited": false, "score": 0, "creation_date": 1539791789, "post_id": 52852534, "comment_id": 92632782, "body": "Amazing!! This is solve I&#39;ve tried but my code wrong  <b>onerror: &#39;this.src=&quot;#{asset_path(&quot;default_avatar.png&quot;)}&quot;;&#39;</b>"}, {"owner": {"reputation": 44, "user_id": 6656970, "user_type": "registered", "accept_rate": 67, "profile_image": "https://lh3.googleusercontent.com/-DxGif210ro8/AAAAAAAAAAI/AAAAAAAAAcw/jXhVPMglwG4/photo.jpg?sz=128", "display_name": "ph\u1ea1m tu\u1ea5n", "link": "https://stackoverflow.com/users/6656970/ph%e1%ba%a1m-tu%e1%ba%a5n"}, "edited": false, "score": 0, "creation_date": 1539791885, "post_id": 52852534, "comment_id": 92632826, "body": "result: <b>&lt;img class=&quot;notification-sender-avatar&quot; onerror=&quot;this.src=&amp;quot;#{asset_path(&amp;quot;default_avatar.pn&zwnj;&#8203;g&amp;quot;)}&amp;quot;;&quot; src=&quot;&quot;&gt;</b>"}, {"owner": {"reputation": 16587, "user_id": 177053, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3f6c516626d381a1ea383cedd1799486?s=128&d=identicon&r=PG", "display_name": "Vasfed", "link": "https://stackoverflow.com/users/177053/vasfed"}, "reply_to_user": {"reputation": 44, "user_id": 6656970, "user_type": "registered", "accept_rate": 67, "profile_image": "https://lh3.googleusercontent.com/-DxGif210ro8/AAAAAAAAAAI/AAAAAAAAAcw/jXhVPMglwG4/photo.jpg?sz=128", "display_name": "ph\u1ea1m tu\u1ea5n", "link": "https://stackoverflow.com/users/6656970/ph%e1%ba%a1m-tu%e1%ba%a5n"}, "edited": false, "score": 0, "creation_date": 1539792328, "post_id": 52852534, "comment_id": 92633044, "body": "@ph\u1ea1mtu\u1ea5n interpolation only works inside double-quotes - <code>&quot;</code>"}], "tags": [], "owner": {"reputation": 16587, "user_id": 177053, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3f6c516626d381a1ea383cedd1799486?s=128&d=identicon&r=PG", "display_name": "Vasfed", "link": "https://stackoverflow.com/users/177053/vasfed"}, "is_accepted": true, "score": 3, "last_activity_date": 1539771591, "creation_date": 1539771591, "answer_id": 52852534, "question_id": 52852303, "link": "https://stackoverflow.com/questions/52852303/how-to-write-ruby-code-in-option-of-image-tag/52852534#52852534", "title": "How to write ruby code in option of image tag?", "body": "<p>In erb everything between <code>&lt;%=</code> and <code>%&gt;</code> is ruby code, so use ruby string interpolation there:</p>\n\n<pre><code>&lt;%= image_tag (user.avatar),\n    class: \"avatar\",\n    onerror: \"this.src='#{asset_path(\"default_avatar.png\")}';\" %&gt;\n</code></pre>\n"}], "owner": {"reputation": 44, "user_id": 6656970, "user_type": "registered", "accept_rate": 67, "profile_image": "https://lh3.googleusercontent.com/-DxGif210ro8/AAAAAAAAAAI/AAAAAAAAAcw/jXhVPMglwG4/photo.jpg?sz=128", "display_name": "ph\u1ea1m tu\u1ea5n", "link": "https://stackoverflow.com/users/6656970/ph%e1%ba%a1m-tu%e1%ba%a5n"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 158, "favorite_count": 0, "accepted_answer_id": 52852534, "answer_count": 1, "score": 1, "last_activity_date": 1539792471, "creation_date": 1539770856, "last_edit_date": 1539792471, "question_id": 52852303, "link": "https://stackoverflow.com/questions/52852303/how-to-write-ruby-code-in-option-of-image-tag", "title": "How to write ruby code in option of image tag?", "body": "<p>Today when working with images, I have a problem: when an image is absent or has invalid url (404 or so) I need to replace it with <code>asset_path(\"default_avatar.png\")</code>. So I tried:</p>\n\n<pre><code>def get_url_avatar url\n  return url if url.present? &amp;&amp; Faraday.head(url).status == 200\n  asset_path \"default_avatar.png\"\nend\n</code></pre>\n\n<p>But then I found other solution - the <code>onerror</code> option in <code>image_tag</code> to handle the problem on the clientside.\nThe new code:</p>\n\n<pre><code>&lt;%= image_tag (user.avatar),\n    class: \"avatar\",\n    onerror: \"this.src='asset_path(\"default_avatar.png\")';\" %&gt;\n</code></pre>\n\n<p>or</p>\n\n<pre><code>&lt;%= image_tag (user.avatar),\n    class: \"avatar\",\n    onerror: \"this.src='&lt;%= asset_path(\"default_avatar.png\") %&gt;';\" %&gt;\n</code></pre>\n\n<p><br>\nNow I have a new problem with <code>image_tag</code>. I need to get value of <code>asset_path(\"default_avatar.png\")</code> in <code>onerror</code> javascript handler.\n<br>\nBut I can't write ruby in <code>onerror</code> handler. How to do it ?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "slim-lang"], "answers": [{"comments": [{"owner": {"reputation": 1560, "user_id": 5614748, "user_type": "registered", "accept_rate": 68, "profile_image": "https://graph.facebook.com/10153324566173505/picture?type=large", "display_name": "Afolabi Olaoluwa Akinwumi", "link": "https://stackoverflow.com/users/5614748/afolabi-olaoluwa-akinwumi"}, "edited": false, "score": 0, "creation_date": 1539773800, "post_id": 52852858, "comment_id": 92621575, "body": "It works but there is problem. And that is: <code>{&quot;utf8&quot;=&gt;&quot;\u2713&quot;, &quot;created_at_from&quot;=&gt;&quot;2018-10-01 00:00&quot;, &quot;created_at_to&quot;=&gt;&quot;2018-10-05 00:00&quot;, &quot;action&quot;=&gt;&quot;show&quot;, &quot;controller&quot;=&gt;&quot;admin&#47;statistic&#47;revenues&quot;}</code> <code>start: 2018-10-01 00:00:00</code> <code>end: 2018-10-05 23:59:59</code> So I removed <code>end_of_day</code> and <code>beginning_of_day</code> methods because I do not need it."}, {"owner": {"reputation": 1560, "user_id": 5614748, "user_type": "registered", "accept_rate": 68, "profile_image": "https://graph.facebook.com/10153324566173505/picture?type=large", "display_name": "Afolabi Olaoluwa Akinwumi", "link": "https://stackoverflow.com/users/5614748/afolabi-olaoluwa-akinwumi"}, "edited": false, "score": 0, "creation_date": 1539773829, "post_id": 52852858, "comment_id": 92621594, "body": "Thank you @Vasfed"}], "tags": [], "owner": {"reputation": 16587, "user_id": 177053, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3f6c516626d381a1ea383cedd1799486?s=128&d=identicon&r=PG", "display_name": "Vasfed", "link": "https://stackoverflow.com/users/177053/vasfed"}, "is_accepted": true, "score": 1, "last_activity_date": 1539772860, "last_edit_date": 1539772860, "creation_date": 1539772540, "answer_id": 52852858, "question_id": 52852079, "link": "https://stackoverflow.com/questions/52852079/filtering-by-created-at-start-datetime-and-end-datetime-picks-only-one-date-wh/52852858#52852858", "title": "Filtering by created_at (start_datetime and end_datetime) picks only one date which is end_datetime", "body": "<p>You are trying to use single parameter name for two different parameters <code>created_at_from</code> and <code>created_at_to</code>:</p>\n\n<pre><code>    .col.col-xs-3\n      label[for=\"#\"]\n        | Start Date:\n        input.form-control.created_at.date_time_filter.from[name=\"created_at_from\" type=\"#\" value=\"\"]\n    .col.col-xs-3\n      label[for=\"#\"]\n        | End Date:\n        input.form-control.created_at.date_time_filter.to[name=\"created_at_to\" type=\"#\" value=\"\"]\n</code></pre>\n\n<p><code>created_at</code> is usually <code>datetime</code>, so will have non-zero time for most records.\nAnd <code>2018-10-05 12:34:56 +0100</code> is greater than <code>2018-10-05 00:00:00</code>.</p>\n\n<p>Correct filter for 'records created at specific date' is 'records created after that day has started, but before and of day':</p>\n\n<pre><code>start_datetime = if params[:created_at_from].present?\n                   Time.zone.parse(params[:created_at_from]).beginning_of_day\n                 else\n                   30.days.ago\n                 end\nend_datetime = if params[:created_at_to].present?\n                 Time.zone.parse(params[:created_at_to]).end_of_day\n               else\n                 Time.zone.now\n               end\n</code></pre>\n\n<p>Also note <code>zone</code>, because depending on timezone day may start in different universal time.</p>\n"}], "owner": {"reputation": 1560, "user_id": 5614748, "user_type": "registered", "accept_rate": 68, "profile_image": "https://graph.facebook.com/10153324566173505/picture?type=large", "display_name": "Afolabi Olaoluwa Akinwumi", "link": "https://stackoverflow.com/users/5614748/afolabi-olaoluwa-akinwumi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 179, "favorite_count": 0, "accepted_answer_id": 52852858, "answer_count": 1, "score": 0, "last_activity_date": 1539772860, "creation_date": 1539770217, "question_id": 52852079, "link": "https://stackoverflow.com/questions/52852079/filtering-by-created-at-start-datetime-and-end-datetime-picks-only-one-date-wh", "title": "Filtering by created_at (start_datetime and end_datetime) picks only one date which is end_datetime", "body": "<p>I am trying to create a filter for my <em>revenue_controller show action</em>, but its not working very well. </p>\n\n<p>This is what I have done in the code below, but it picks the <em>end_datetime</em> alone when I filter by date.</p>\n\n<p><strong>revenue_controller.rb</strong></p>\n\n<p>What am trying to do in the <code>show</code> action is default my search to 30days from now, and if params filled with date, use the selected datetime.</p>\n\n<pre><code>module Admin\n  module Statistic\n    class RevenuesController &lt; BaseController\n\n      def show\n        @revenues_reports = Currency.all.map do |currency|\n          puts params\n          start_datetime = if params[:created_at].nil? then\n                             30.days.ago\n                           else\n                             params[:created_at].slice(0..15)\n                           end\n          end_datetime = if params[:created_at].nil? then\n                           Time.now\n                         else\n                           params[:created_at].slice(0..15)\n                         end\n          get_revenue_report_for_currency(currency, start_datetime, end_datetime)\n        end\n      end\n\n      def get_revenue_report_for_currency(currency, start_datetime, end_datetime)\n        puts \"start: #{start_datetime}\" # I added this to see from the log the start_datetime it picks\n        puts \"end: #{end_datetime}\" # I added this to see from the log the end_datetime it picks\n        total_withdraw_fees_charged = Withdraw.where(:currency =&gt; currency.id, :created_at =&gt; start_datetime..end_datetime).sum(:fee)\n        total_withdraw_network_fees_charged = 0.3 * total_withdraw_fees_charged\n        net_income_from_withdraws = total_withdraw_fees_charged - total_withdraw_network_fees_charged\n\n        total_sell_order_fees_charged = Order.where(:type =&gt; 'OrderAsk', :bid =&gt; currency.id, :created_at =&gt; start_datetime..end_datetime).sum(:fee)\n        total_buy_order_fees_charged = Order.where(:type =&gt; 'OrderBid', :ask =&gt; currency.id, :created_at =&gt; start_datetime..end_datetime).sum(:fee)\n        total_trading_fees = total_sell_order_fees_charged + total_buy_order_fees_charged\n\n        total_fees = net_income_from_withdraws + total_trading_fees\n\n        {\n          currency: currency.code.upcase,\n          total_withdraw_fees_charged: total_withdraw_fees_charged,\n          total_withdraw_network_fees_charged: total_withdraw_network_fees_charged,\n          net_income_from_withdraws: net_income_from_withdraws,\n          total_sell_order_fees_charged: total_sell_order_fees_charged,\n          total_buy_order_fees_charged: total_buy_order_fees_charged,\n          total_trading_fees: total_trading_fees,\n          total_fees: total_fees\n        }\n      end\n    end\n  end\nend\n</code></pre>\n\n<p><strong>show.html.erb</strong></p>\n\n<pre><code>.panel.panel-primary\n  .panel-heading\n    h4.panel-title = t('admin.statistic.filter')\n  .panel-body\n    = form_tag(admin_statistic_revenue_path, :method =&gt; 'get', class: 'form-horizontal') do |f|\n      .row\n        .col.col-xs-3\n          label[for=\"#\"]\n            | Start Date:\n            input.form-control.created_at.date_time_filter.from[name=\"[created_at]\" type=\"#\" value=\"\"]\n        .col.col-xs-3\n          label[for=\"#\"]\n            | End Date:\n            input.form-control.created_at.date_time_filter.to[name=\"[created_at]\" type=\"#\" value=\"\"]\n        = button_tag \"Search\", :class =&gt; 'btn btn-info', :name =&gt; nil\n</code></pre>\n\n<p><strong>browser params url</strong></p>\n\n<pre><code>http://localhost:3000/admin/statistic/revenue?utf8=%E2%9C%93&amp;%5Bcreated_at%5D=2018-08-01+00%3A00&amp;%5Bcreated_at%5D=2018-10-05+00%3A00\n</code></pre>\n\n<p><strong>development_logs</strong></p>\n\n<p><a href=\"https://i.stack.imgur.com/aF94T.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/aF94T.png\" alt=\"logs\"></a></p>\n"}, {"tags": ["ruby", "logging", "scripting"], "comments": [{"owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "edited": false, "score": 1, "creation_date": 1539772500, "post_id": 52850853, "comment_id": 92620843, "body": "I think you misunderstood that. I read that as <i>homework help questions</i> are off-topic unless they <i>include a summary of the work you&#39;ve done so far</i> and <i>a description of the difficulty you are having solving it</i>. What makes sense because we do not want to solve your homework, but we love to help you when you are facing a problem."}, {"owner": {"reputation": 881859, "user_id": 100297, "user_type": "moderator", "profile_image": "https://www.gravatar.com/avatar/24780fb6df85a943c7aea0402c843737?s=128&d=identicon&r=PG", "display_name": "Martijn Pieters", "link": "https://stackoverflow.com/users/100297/martijn-pieters"}, "edited": false, "score": 1, "creation_date": 1539773130, "post_id": 52850853, "comment_id": 92621184, "body": "Including what you tried is just good sense; it&#39;s the <i>share your research</i> part of our question asking guidelines.  That way people can focus their help on your specific situation far better. Note that commenting on votes (up or down) is never required, nor can moderators do anything about individual votes."}, {"owner": {"reputation": 442, "user_id": 7266232, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9rIFA.jpg?s=128&g=1", "display_name": "Viktova", "link": "https://stackoverflow.com/users/7266232/viktova"}, "edited": false, "score": 0, "creation_date": 1539773722, "post_id": 52850853, "comment_id": 92621534, "body": "thanks for the illustration."}], "answers": [{"comments": [{"owner": {"reputation": 442, "user_id": 7266232, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9rIFA.jpg?s=128&g=1", "display_name": "Viktova", "link": "https://stackoverflow.com/users/7266232/viktova"}, "edited": false, "score": 0, "creation_date": 1539773362, "post_id": 52853019, "comment_id": 92621322, "body": "counting lines in seconds makes sense, that way i can change it to minutes, and do a hour minute output forexample. thanks a lot"}], "tags": [], "owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "is_accepted": true, "score": 1, "last_activity_date": 1539773015, "creation_date": 1539773015, "answer_id": 52853019, "question_id": 52850853, "link": "https://stackoverflow.com/questions/52850853/dynamically-get-the-total-up-down-time-from-a-log-file/52853019#52853019", "title": "Dynamically get the total up/down time from a log file", "body": "<p>I assume that your file contains exactly one line per second. Then the number of seconds your service was down can be evaluated like you already did in your approach:</p>\n\n<pre><code>number_of_seconds_downtime = File.readlines('path/to/log/file')\n                                 .select { |line| line =~ /DOWN/ }\n                                 .count\n</code></pre>\n\n<p>Or simplified:</p>\n\n<pre><code>number_of_seconds_downtime = File.readlines('path/to/log/file')\n                                 .count { |line| line =~ /DOWN/ }\n</code></pre>\n\n<p>To translate this into minutes and seconds just <a href=\"https://ruby-doc.org/core-2.5.1/Numeric.html#method-i-divmod\" rel=\"nofollow noreferrer\"><code>divmod</code></a></p>\n\n<pre><code>minutes, seconds = number_of_seconds_downtime.divmod(60)\n</code></pre>\n\n<p>and output the result like this:</p>\n\n<pre><code>puts \"#{minutes}:#{seconds} downtime\"\n</code></pre>\n"}], "owner": {"reputation": 442, "user_id": 7266232, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9rIFA.jpg?s=128&g=1", "display_name": "Viktova", "link": "https://stackoverflow.com/users/7266232/viktova"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 41, "favorite_count": 0, "accepted_answer_id": 52853019, "answer_count": 1, "score": -2, "last_activity_date": 1539773015, "creation_date": 1539766299, "last_edit_date": 1539772077, "question_id": 52850853, "link": "https://stackoverflow.com/questions/52850853/dynamically-get-the-total-up-down-time-from-a-log-file", "title": "Dynamically get the total up/down time from a log file", "body": "<p>Let's say I have the following log file that continuously logs a server's down/up time:</p>\n\n<p><strong>status.log</strong></p>\n\n<pre><code>UP - \"18:00:00\"\n..\n..\nDOWN - \"19:00:03\"\n..\n..\nDOWN - \"22:00:47\"\n..\n..\nUP - \"23:59:48\"\nUP - \"23:59:49\"\nUP - \"23:59:50\"\nDOWN - \"23:59:51\"\nDOWN - \"23:59:52\"\nUP - \"23:59:53\"\nUP - \"23:59:54\"\nUP - \"23:59:56\"\nUP - \"23:59:57\"\nUP - \"23:59:59\"\n</code></pre>\n\n<p>each day is logged in a separate folder under the same filename.</p>\n\n<p><strong><em>not my actual code, but this is much simpler and transparent approach:</em></strong></p>\n\n<pre><code>#!/bin/ruby\ndowntime_log = File.readlines(\"path/to/log/file\").select { |line| line =~ /DOWN/ }\nputs \"#{downtime_log.count} Downtimes for today\"\n</code></pre>\n\n<p>logic-wise, how can I get the total downtime per file/day in minutes and seconds but not as a total count.</p>\n"}, {"tags": ["ruby", "recursion"], "comments": [{"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 1, "creation_date": 1539760761, "post_id": 52849137, "comment_id": 92614261, "body": "i am confused ... does <code>x * y * z</code> always get the correct solution? (which, by the way, is the same as <code>x * (y * z)</code>) .. Because that seems at odds with your explanation of the variables."}, {"owner": {"reputation": 125, "user_id": 10228623, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7ae92d25e3a61b31c2f040bc36f43e4d?s=128&d=identicon&r=PG&f=1", "display_name": "Kyle Sharp", "link": "https://stackoverflow.com/users/10228623/kyle-sharp"}, "reply_to_user": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1539760959, "post_id": 52849137, "comment_id": 92614360, "body": "x*(y*z) will always get the correct answer. Take the variables that are present in the code. x: 3, y: 10, z: 4 ==&gt; 3*(10*4) ==&gt; 3*(40) ==&gt; 120. What do you think are at odds?"}, {"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 1, "creation_date": 1539761846, "post_id": 52849137, "comment_id": 92614863, "body": "Ok I get what you are asking. I think the key thing is you want to do this without the times symol, maybe you  should make that more explicit that it&#39;s part of the requirement."}, {"owner": {"reputation": 125, "user_id": 10228623, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7ae92d25e3a61b31c2f040bc36f43e4d?s=128&d=identicon&r=PG&f=1", "display_name": "Kyle Sharp", "link": "https://stackoverflow.com/users/10228623/kyle-sharp"}, "reply_to_user": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1539762011, "post_id": 52849137, "comment_id": 92614938, "body": "I though recursive multiplying is always without the time symbol. Also I made the comment at the end of my question to do it without the times symbol"}, {"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 1, "creation_date": 1539790301, "post_id": 52849137, "comment_id": 92632013, "body": "Not sure why recursion is important but we can avoid the times symbol like this <code>Array.new(x,Array.new(y,z)).flatten.reduce(:+)</code>"}], "answers": [{"comments": [{"owner": {"reputation": 125, "user_id": 10228623, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7ae92d25e3a61b31c2f040bc36f43e4d?s=128&d=identicon&r=PG&f=1", "display_name": "Kyle Sharp", "link": "https://stackoverflow.com/users/10228623/kyle-sharp"}, "edited": false, "score": 0, "creation_date": 1539763124, "post_id": 52849727, "comment_id": 92615497, "body": "Thanks. This is great"}, {"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 1, "creation_date": 1539766319, "post_id": 52849727, "comment_id": 92617209, "body": "Personally I would omit the <code>0</code> in line 6: <code>multiplier(x, j, -1)</code>. It&#39;s functionally the same, of course. I think the key point in this answer, which you hinted at, is that this function is <b>pure</b> - i.e. there are no side-effects, so you&#39;ll always get the same result for a given input -- unlike OP&#39;s original version, which manipulates a &quot;global&quot; variable to accumulate the result."}], "tags": [], "owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "is_accepted": true, "score": 4, "last_activity_date": 1539762802, "last_edit_date": 1539762802, "creation_date": 1539762404, "answer_id": 52849727, "question_id": 52849137, "link": "https://stackoverflow.com/questions/52849137/recursive-multiplier-in-ruby/52849727#52849727", "title": "Recursive Multiplier in ruby", "body": "<p>The main issue with your code is <code>count</code> is a local variable, it is not saved between recursive calls. Also, if you want to avoid globals, pass the variable as an additional parameter in call to the function. In FP we call it <em>accumulator</em>:</p>\n\n<pre><code>def multiplier(x, y, z, j = 0)\n  if z &gt; 0\n    multiplier(x, y, z - 1, j + y)\n  elsif z.zero? # done with z, jump to x \u00d7 (y \u00d7 z)\n    # z = -1 to explicitly mark we are done with z\n    multiplier(x, j, -1, 0)\n  elsif y.zero? # yay, we are all set, reducing is done!\n    j\n  else\n    # still doing x \u00d7 result step\n    multiplier(x, y - 1, -1, j + x)\n  end\nend\n\nmultiplier(3, 10, 4)\n#\u21d2\u00a0120\n</code></pre>\n\n<p>The above surely lacks necessary checks for input validity, but I bet you got the idea.</p>\n"}, {"comments": [{"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1539766941, "post_id": 52850983, "comment_id": 92617595, "body": "Terrible space complexity, though :) (for the first two)"}, {"owner": {"reputation": 79498, "user_id": 298624, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/5b84ccc2f7709bbb7105baeb40e0961b?s=128&d=identicon&r=PG", "display_name": "fl00r", "link": "https://stackoverflow.com/users/298624/fl00r"}, "reply_to_user": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1539767084, "post_id": 52850983, "comment_id": 92617682, "body": "the first one is <code>O(max(x,y))</code>, the second one is <code>O(x*y)</code> and the last <code>O(1)</code>, I suppose. Good thing to be considered, thx @SergioTulentsev"}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "reply_to_user": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1539767167, "post_id": 52850983, "comment_id": 92617736, "body": "@SergioTulentsev <code>times.map</code> \u2192 <code>times.lazy.map</code> and it\u2019s <code>O(1)</code> everywhere :shrug:"}, {"owner": {"reputation": 79498, "user_id": 298624, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/5b84ccc2f7709bbb7105baeb40e0961b?s=128&d=identicon&r=PG", "display_name": "fl00r", "link": "https://stackoverflow.com/users/298624/fl00r"}, "reply_to_user": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1539767349, "post_id": 52850983, "comment_id": 92617834, "body": "@AlekseiMatiushkin if performance is an issue then the last one should be the best choice, otherwise I would go the first or the second"}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1539767387, "post_id": 52850983, "comment_id": 92617857, "body": "With <code>lazy</code> enumerators they are <i>literally</i> the same."}, {"owner": {"reputation": 79498, "user_id": 298624, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/5b84ccc2f7709bbb7105baeb40e0961b?s=128&d=identicon&r=PG", "display_name": "fl00r", "link": "https://stackoverflow.com/users/298624/fl00r"}, "reply_to_user": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1539767797, "post_id": 52850983, "comment_id": 92618098, "body": "@AlekseiMatiushkin it&#39;s a constant factor, but lazy is slower. the complexity is linear though"}, {"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1539768965, "post_id": 52850983, "comment_id": 92618795, "body": "Can you think of a way to make this answer work for an arbitrary list of integers, not specifically 3 values? The only way I can think do it is with <code>eval</code>, but that&#39;s incredibly hacky: <code>result = 0; eval integers.reduce(&#39;result += 1&#39;) { |code, i| &quot;#{i}.times { #{code} }&quot; }; result</code>"}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "reply_to_user": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1539770250, "post_id": 52850983, "comment_id": 92619545, "body": "@TomLord: why, it&#39;s easy. Even with some recursion :) <a href=\"https://gist.github.com/stulentsev/708e1ec8551dc63df43edf977f391776\" rel=\"nofollow noreferrer\">gist.github.com/stulentsev/708e1ec8551dc63df43edf977f391776</a>"}, {"owner": {"reputation": 79498, "user_id": 298624, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/5b84ccc2f7709bbb7105baeb40e0961b?s=128&d=identicon&r=PG", "display_name": "fl00r", "link": "https://stackoverflow.com/users/298624/fl00r"}, "reply_to_user": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1539770410, "post_id": 52850983, "comment_id": 92619648, "body": "@SergioTulentsev let&#39;s assume you have only <code>+1</code> operation :)"}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1539770618, "post_id": 52850983, "comment_id": 92619752, "body": "@fl00r: that snippet will benefit from a <code>head, *tail = xs</code> :)"}, {"owner": {"reputation": 79498, "user_id": 298624, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/5b84ccc2f7709bbb7105baeb40e0961b?s=128&d=identicon&r=PG", "display_name": "fl00r", "link": "https://stackoverflow.com/users/298624/fl00r"}, "reply_to_user": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 1, "creation_date": 1539770689, "post_id": 52850983, "comment_id": 92619801, "body": "@SergioTulentsev nice destructuring"}, {"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1539790214, "post_id": 52850983, "comment_id": 92631966, "body": "The first 2 examples could just be <code>Array.new(x,Array.new(y,z)).flatten.reduce(:+)</code>"}, {"owner": {"reputation": 79498, "user_id": 298624, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/5b84ccc2f7709bbb7105baeb40e0961b?s=128&d=identicon&r=PG", "display_name": "fl00r", "link": "https://stackoverflow.com/users/298624/fl00r"}, "reply_to_user": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1539794308, "post_id": 52850983, "comment_id": 92634120, "body": "@engineersmnky <code>Array.new(x,Array.new(y,(Array.new(z, 1)))).flatten.reduce(:+)</code> then :)"}, {"owner": {"reputation": 79498, "user_id": 298624, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/5b84ccc2f7709bbb7105baeb40e0961b?s=128&d=identicon&r=PG", "display_name": "fl00r", "link": "https://stackoverflow.com/users/298624/fl00r"}, "reply_to_user": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1539794334, "post_id": 52850983, "comment_id": 92634140, "body": "@engineersmnky but that&#39;s not idiomatic ;)"}, {"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1539795098, "post_id": 52850983, "comment_id": 92634486, "body": "@fl00r you can do better than that...<code>Array.new(x,y).cycle(z).sum</code>"}], "tags": [], "owner": {"reputation": 79498, "user_id": 298624, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/5b84ccc2f7709bbb7105baeb40e0961b?s=128&d=identicon&r=PG", "display_name": "fl00r", "link": "https://stackoverflow.com/users/298624/fl00r"}, "is_accepted": false, "score": 2, "last_activity_date": 1539770907, "last_edit_date": 1539770907, "creation_date": 1539766744, "answer_id": 52850983, "question_id": 52849137, "link": "https://stackoverflow.com/questions/52849137/recursive-multiplier-in-ruby/52850983#52850983", "title": "Recursive Multiplier in ruby", "body": "<p>I would say the idiomatic way in ruby is using iterators instead of recursion/cycles</p>\n\n<pre><code>def multiplier(x, y, z)\n  x.times.map do\n    y.times.map do\n      z\n    end.reduce(:+)\n  end.reduce(:+)\nend\n</code></pre>\n\n<p>or</p>\n\n<pre><code>def multiplier(x, y, z)\n  x.times.map do\n    y.times.map do\n      z\n    end\n  end.flatten.reduce(:+)\nend\n</code></pre>\n\n<p>Or if the only operation is <code>inc</code></p>\n\n<pre><code>def multiplier(x, y, z)\n  j = 0\n  x.times do\n    y.times do\n      z.times do\n        j += 1\n      end\n    end\n  end\n  j\nend\n</code></pre>\n\n<p>the output is the same</p>\n\n<pre><code>multiplier(3, 10, 4)\n# 120\n</code></pre>\n\n<p>For an arbitrary number of args we have to use recursion</p>\n\n<pre><code>def multiplier(*xs, res: 0)\n  return res if xs.empty?\n  xs[0].times do\n    res += 1 if xs.size == 1\n    res = multiplier(*xs.drop(1), res: res)\n  end\n  res\nend\n</code></pre>\n\n<p>or</p>\n\n<pre><code>def multiplier(*xs, res: 0)\n  head, *tail = xs\n  head.to_i.times do\n    res += 1 if tail.empty?\n    res = multiplier(*tail, res: res)\n  end\n  res\nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "is_accepted": false, "score": 2, "last_activity_date": 1539769566, "last_edit_date": 1539769566, "creation_date": 1539768574, "answer_id": 52851556, "question_id": 52849137, "link": "https://stackoverflow.com/questions/52849137/recursive-multiplier-in-ruby/52851556#52851556", "title": "Recursive Multiplier in ruby", "body": "<p>Building on the <a href=\"https://stackoverflow.com/a/52849727/1954610\">recursive answer above</a>, here's a more generic function that can take an <strong>arbitrarily long</strong> list of positive integers and multiply them by recursive addition:</p>\n\n<pre><code>def multiplier(*integers, accum: 0)\n  if integers.size == 1\n    # We are finished!\n    integers[0]\n  elsif integers[-1].positive?\n    # \"Multiply\" the last two integers, by recursive addition\n    integers[-1] -= 1\n    multiplier(*integers, accum: accum + integers[-2])\n  else\n    # The above multiplication is complete; set the last integer to its result\n    integers[-2] = accum\n    multiplier(*integers[0..-2])\n  end\nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "is_accepted": false, "score": 2, "last_activity_date": 1539772020, "last_edit_date": 1539772020, "creation_date": 1539770736, "answer_id": 52852247, "question_id": 52849137, "link": "https://stackoverflow.com/questions/52849137/recursive-multiplier-in-ruby/52852247#52852247", "title": "Recursive Multiplier in ruby", "body": "<p>I'd start by writing a method to multiply two numbers recursively:</p>\n\n<pre><code>def multiply_2(a, b)\n  return 0 if a.zero?\n  b + multiply_2(a - 1, b)\nend\n\nmultiply_2(3, 4)\n#=&gt; 12\n</code></pre>\n\n<p>and build upon that method to multiply three numbers:</p>\n\n<pre><code>def multiply_3(a, b, c)\n  multiply_2(multiply_2(a, b), c)\nend\n\nmultiply_3(3, 4, 10)\n#=&gt; 3\n</code></pre>\n\n<p>and eventually extend that to handle <em>n</em> numbers:</p>\n\n<pre><code>def multiply_n(a, b, *more)\n  result = multiply_2(a, b)\n  return result if more.empty?\n  multiply_n(result, *more)\nend\n\nmultiply_n(3, 4, 10, 2)\n#=&gt; 240\n</code></pre>\n\n<p>Note that you might run into a <code>SystemStackError</code> for large numbers. This can be avoided by making <code>multiply_2</code> <a href=\"https://en.wikipedia.org/wiki/Tail_call\" rel=\"nofollow noreferrer\"><em>tail-recursive</em></a> (leaving that as an exercise, it's not hard) and enabling Ruby's <code>:tailcall_optimization</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1539808770, "post_id": 52860539, "comment_id": 92640879, "body": "So as the avoid the dreaded times symbol (albeit <code>Array#*</code> not <code>Integer#*</code>) one could use <code>[recurse(*rest)].cycle(first).sum</code> other benefit is that this need not build additional <code>Array</code>s"}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "reply_to_user": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1539812123, "post_id": 52860539, "comment_id": 92642195, "body": "@engineersmnky, I&#39;ve never seen <code>cycle</code> used with an argument. I&#39;ll have to remember that. Gee, I hope the OP did not intend that answers avoid all uses of the asterisk."}], "tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": false, "score": 1, "last_activity_date": 1539801072, "last_edit_date": 1539801072, "creation_date": 1539797386, "answer_id": 52860539, "question_id": 52849137, "link": "https://stackoverflow.com/questions/52849137/recursive-multiplier-in-ruby/52860539#52860539", "title": "Recursive Multiplier in ruby", "body": "<p>It could be written thusly.</p>\n\n<pre><code>def multiplier(*args)\n  prod = recurse(*args.map(&amp;:abs))\n  args.count { |n| n &lt; 0 }.even? ? prod : -prod\nend\n\ndef recurse(first, *rest)\n  first.zero? || rest.empty? ? first : ([recurse(*rest)]*first).sum\nend\n\nmultiplier(3,  10,  4)        #=&gt;  120\nmultiplier(3,  10,  4, 2, 3)  #=&gt;  720\nmultiplier(3, -10,  4)        #=&gt; -120\nmultiplier(3, -10, -4)        #=&gt;  120\nmultiplier(3,   0,  4)        #=&gt;    0\nmultiplier(3,   0, -4)        #=&gt;    0\n</code></pre>\n\n<p>Suppose we wish to compute <code>multiplier(3, -4)</code>. <code>recurse(3, 4)</code> is called, where</p>\n\n<pre><code>first = 3\nrest = [4]\nfirst.zero? #=&gt; false\nrest.empty? #=&gt; false\n</code></pre>\n\n<p>so we compute</p>\n\n<pre><code>([recurse(4)]*3).sum\n</code></pre>\n\n<p>In <code>recurse(4)</code>,</p>\n\n<pre><code>first = 4\nrest = []\n</code></pre>\n\n<p>As <code>rest.empty #=&gt; true</code>, <code>recurse</code> returns <code>first #=&gt; 4</code>, so</p>\n\n<pre><code>([recurse(4)]*3).sum]\n  #=&gt; ([4]*3).sum =&gt; [4,4,4].sum =&gt; 12\n</code></pre>\n\n<p>is returned to <code>multiplier</code>. As <code>[3, -4]</code> contains an odd number of negative values, multiplier returns <code>-12</code>.</p>\n"}], "owner": {"reputation": 125, "user_id": 10228623, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7ae92d25e3a61b31c2f040bc36f43e4d?s=128&d=identicon&r=PG&f=1", "display_name": "Kyle Sharp", "link": "https://stackoverflow.com/users/10228623/kyle-sharp"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 428, "favorite_count": 0, "accepted_answer_id": 52849727, "answer_count": 5, "score": 1, "last_activity_date": 1539801072, "creation_date": 1539760194, "question_id": 52849137, "link": "https://stackoverflow.com/questions/52849137/recursive-multiplier-in-ruby", "title": "Recursive Multiplier in ruby", "body": "<p>I am trying to create a recursive multiplier in ruby. </p>\n\n<pre><code>@j = 0\n\ndef multiplier(x, y, z)\n    count = 0\n    if x &gt; 0\n        if z &gt; 0\n            @j += y\n            z -= 1\n            count += 1\n            multiplier(x, y, z)\n        else\n            x -= 1\n            z = count\n            p z\n            multiplier(x, y, z)\n        end\n    else\n        return @j\n    end\nend\n\n\ndef main\n    puts \"Calculation is: \" + multiplier(3, 10, 4).to_s\nend\n\nmain\n</code></pre>\n\n<p>X is how many times the multiplication happens</p>\n\n<p>Y is the number we want to multiply</p>\n\n<p>Z is the number we multiply by</p>\n\n<p>The code <em>should</em> output <strong>120</strong> with the variables that are there</p>\n\n<p>I am having issues getting Z to stay what I need it to be. Also, I'd prefer to do this without a global variable</p>\n\n<p>So something like x*(y*z) but without the times symbol</p>\n"}, {"tags": ["ruby", "static"], "answers": [{"comments": [{"owner": {"reputation": 4127, "user_id": 4231385, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d89a541a4609cafea3957e4cdfcca50f?s=128&d=identicon&r=PG&f=1", "display_name": "cremno", "link": "https://stackoverflow.com/users/4231385/cremno"}, "edited": false, "score": 2, "creation_date": 1539757370, "post_id": 52847641, "comment_id": 92612581, "body": "You don&#39;t need to call <code>each</code> as <code>Dir.glob</code> (optionally) takes a block."}, {"owner": {"reputation": 930, "user_id": 3577922, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/eURpm.jpg?s=128&g=1", "display_name": "Masa Sakano", "link": "https://stackoverflow.com/users/3577922/masa-sakano"}, "reply_to_user": {"reputation": 4127, "user_id": 4231385, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d89a541a4609cafea3957e4cdfcca50f?s=128&d=identicon&r=PG&f=1", "display_name": "cremno", "link": "https://stackoverflow.com/users/4231385/cremno"}, "edited": false, "score": 0, "creation_date": 1539758876, "post_id": 52847641, "comment_id": 92613281, "body": "@cremno Good point, thanks! I&#39;ve updated the answer accordingly."}], "tags": [], "owner": {"reputation": 930, "user_id": 3577922, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/eURpm.jpg?s=128&g=1", "display_name": "Masa Sakano", "link": "https://stackoverflow.com/users/3577922/masa-sakano"}, "is_accepted": false, "score": 3, "last_activity_date": 1539758825, "last_edit_date": 1539758825, "creation_date": 1539753036, "answer_id": 52847641, "question_id": 52847549, "link": "https://stackoverflow.com/questions/52847549/how-to-show-all-the-html-files-under-a-folder-with-ruby/52847641#52847641", "title": "How to show all the html files under a folder with ruby?", "body": "<p>Use <code>Dir.glob('*.html')</code>.  For example,</p>\n\n<pre><code>Dir.glob('*.html'){ |f| File.read f }\n</code></pre>\n\n<p><em>NOTE</em>: <code>Dir.glob('*.html').each{ }</code> also works, but <code>each</code> is superfluous.</p>\n"}, {"comments": [{"owner": {"reputation": 421, "user_id": 10130996, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/58411fd54b0352f580242debb34e4583?s=128&d=identicon&r=PG&f=1", "display_name": "zseikyocho", "link": "https://stackoverflow.com/users/10130996/zseikyocho"}, "edited": false, "score": 0, "creation_date": 1539756000, "post_id": 52847891, "comment_id": 92612067, "body": "How to except some files or folders in this way?"}], "tags": [], "owner": {"reputation": 9567, "user_id": 1900722, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/nGsJr.jpg?s=128&g=1", "display_name": "anquegi", "link": "https://stackoverflow.com/users/1900722/anquegi"}, "is_accepted": true, "score": 1, "last_activity_date": 1539754603, "creation_date": 1539754603, "answer_id": 52847891, "question_id": 52847549, "link": "https://stackoverflow.com/questions/52847549/how-to-show-all-the-html-files-under-a-folder-with-ruby/52847891#52847891", "title": "How to show all the html files under a folder with ruby?", "body": "<p>It is not necessary to use sinatra for this task, I think that you want some thing simlar to python <a href=\"http://2ality.com/2014/06/simple-http-server.html\" rel=\"nofollow noreferrer\">simplehttpserver</a></p>\n\n<p>Try with this aproximation:</p>\n\n<p>In a console inside the folder try:</p>\n\n<pre><code> ruby -run -e httpd -- -p 5000\n\n\u256d\u2500 ~/learn/ruby/ruby-way/stackoverflow/q-static-html-007/html \n\u2570\u2500 tree\n.\n.\n\u251c\u2500\u2500 1.html\n\u2514\u2500\u2500 2.html\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/fq5Rt.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/fq5Rt.png\" alt=\"server running\"></a></p>\n"}], "owner": {"reputation": 421, "user_id": 10130996, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/58411fd54b0352f580242debb34e4583?s=128&d=identicon&r=PG&f=1", "display_name": "zseikyocho", "link": "https://stackoverflow.com/users/10130996/zseikyocho"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 72, "favorite_count": 0, "accepted_answer_id": 52847891, "answer_count": 2, "score": 1, "last_activity_date": 1539758825, "creation_date": 1539752345, "question_id": 52847549, "link": "https://stackoverflow.com/questions/52847549/how-to-show-all-the-html-files-under-a-folder-with-ruby", "title": "How to show all the html files under a folder with ruby?", "body": "<p>If use this way to show only <code>index.html</code> file under <code>public</code> folder, it works:</p>\n\n<pre><code>require 'rubygems'\nrequire 'sinatra'\n\nset :bind, '0.0.0.0'\n\nget '/' do\n  File.read('index.html')\nend\n</code></pre>\n\n<p>But want to show all files at the current folder, tried below but not work.</p>\n\n<pre><code>require 'rubygems'\nrequire 'sinatra'\n\nset :bind, '0.0.0.0'\n\nget '/' do\n  File.read('*.html')\nend\n</code></pre>\n\n<p>Got error:</p>\n\n<pre><code>Errno::ENOENT at /\nNo such file or directory @ rb_sysopen - *.html\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-5"], "comments": [{"owner": {"reputation": 282, "user_id": 9206962, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/8a463369008c395c14b569267e3c4f3e?s=128&d=identicon&r=PG&f=1", "display_name": "emijune", "link": "https://stackoverflow.com/users/9206962/emijune"}, "edited": false, "score": 1, "creation_date": 1539751005, "post_id": 52846887, "comment_id": 92610542, "body": "Have you tried setting this from within the Mailer (rather than the model), but outside of the specific actions? You can set it from your app specific Mailers or from within the ApplicationMailer if they&#39;re all coming from the same email address."}, {"owner": {"reputation": 173, "user_id": 2903682, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/4W1Iw.jpg?s=128&g=1", "display_name": "yogi_bear", "link": "https://stackoverflow.com/users/2903682/yogi-bear"}, "reply_to_user": {"reputation": 282, "user_id": 9206962, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/8a463369008c395c14b569267e3c4f3e?s=128&d=identicon&r=PG&f=1", "display_name": "emijune", "link": "https://stackoverflow.com/users/9206962/emijune"}, "edited": false, "score": 0, "creation_date": 1539753662, "post_id": 52846887, "comment_id": 92611291, "body": "Yeah. I have added in the ApplicationMailer. Please check the additional details section in the question above."}], "answers": [{"tags": [], "owner": {"reputation": 173, "user_id": 2903682, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/4W1Iw.jpg?s=128&g=1", "display_name": "yogi_bear", "link": "https://stackoverflow.com/users/2903682/yogi-bear"}, "is_accepted": true, "score": 1, "last_activity_date": 1539756001, "creation_date": 1539756001, "answer_id": 52848155, "question_id": 52846887, "link": "https://stackoverflow.com/questions/52846887/dynamic-default-from-with-action-mailer-rails/52848155#52848155", "title": "Dynamic default from with Action Mailer Rails", "body": "<p>Just found out that this works.</p>\n\n<pre><code>    class ApplicationMailer &lt; ActionMailer::Base\n\n      after_action :set_default_from\n\n    private\n\n    def set_default_from\n      mail.to = tenant_email\n    end\n</code></pre>\n"}], "owner": {"reputation": 173, "user_id": 2903682, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/4W1Iw.jpg?s=128&g=1", "display_name": "yogi_bear", "link": "https://stackoverflow.com/users/2903682/yogi-bear"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 421, "favorite_count": 0, "accepted_answer_id": 52848155, "answer_count": 1, "score": 1, "last_activity_date": 1539756001, "creation_date": 1539746991, "last_edit_date": 1539753583, "question_id": 52846887, "link": "https://stackoverflow.com/questions/52846887/dynamic-default-from-with-action-mailer-rails", "title": "Dynamic default from with Action Mailer Rails", "body": "<p>Is it possible in Rails to set the default from in Action Mailer from an attribute in a Model, without having to set it every time in the actions?</p>\n\n<p>I have a multi tenant app, with different tenants having different emails which has to be the default from in the mailer.</p>\n\n<p>As per the Docs,</p>\n\n<pre><code>    default to:       -&gt; { 'user@email.test' },\n    from:     -&gt; { method_that_retrieves_tenant_email }\n</code></pre>\n\n<p>should be possible, but when I try that, It throws the following error</p>\n\n<pre><code>    Failure/Error: from:     -&gt; { method },\n    ArgumentError:\n    wrong number of arguments (given 1, expected 0)\n</code></pre>\n\n<p>I am using Rails 5.2.0 &amp; ruby 2.3.1p112.</p>\n\n<p>Additional Details:\nThis is what I have used</p>\n\n<pre><code>    class ApplicationMailer &lt; ActionMailer::Base \n      default from: -&gt; { tenant_email }\n      .....\n\n      private\n      def tenant_email\n        fetch_email\n      end\n</code></pre>\n"}, {"tags": ["arrays", "ruby", "hash", "nested"], "comments": [{"owner": {"reputation": 25637, "user_id": 6243352, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/715f60f9edc65642a6805752cfeebb27?s=128&d=identicon&r=PG&f=1", "display_name": "ggorlen", "link": "https://stackoverflow.com/users/6243352/ggorlen"}, "edited": false, "score": 1, "creation_date": 1539745977, "post_id": 52846755, "comment_id": 92609422, "body": "What is your expected output structure?"}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 1, "creation_date": 1539746339, "post_id": 52846755, "comment_id": 92609511, "body": "What is <code>r</code>? What is the nature of <code>t</code>? <code>i</code>, <code>y</code> and <code>z</code> are not initialized. Give us an example (by editing your question) and maybe we can help. Specify <code>r</code> (as a valid Ruby object) and show us your desired result (&quot;output&quot;), also as a valid Ruby object."}, {"owner": {"reputation": 8733, "user_id": 3625433, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/N7qK6.png?s=128&g=1", "display_name": "lacostenycoder", "link": "https://stackoverflow.com/users/3625433/lacostenycoder"}, "edited": false, "score": 0, "creation_date": 1539753633, "post_id": 52846755, "comment_id": 92611279, "body": "please see <a href=\"https://stackoverflow.com/help/how-to-ask\">stackoverflow.com/help/how-to-ask</a>"}, {"owner": {"reputation": 4644, "user_id": 2594185, "user_type": "registered", "profile_image": "https://graph.facebook.com/100003773788931/picture?type=large", "display_name": "Jagdeep Singh", "link": "https://stackoverflow.com/users/2594185/jagdeep-singh"}, "edited": false, "score": 0, "creation_date": 1539755642, "post_id": 52846755, "comment_id": 92611948, "body": "Your code doesn&#39;t work. <code>r</code>, <code>y</code>, and <code>i</code> are undefined."}, {"owner": {"reputation": 25, "user_id": 6603952, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/21155c0f8b4e743da97751a364ba6ed5?s=128&d=identicon&r=PG&f=1", "display_name": "Jon Poehlman", "link": "https://stackoverflow.com/users/6603952/jon-poehlman"}, "edited": false, "score": 0, "creation_date": 1539781520, "post_id": 52846755, "comment_id": 92626296, "body": "Sorry, only my second time posting and I did think it through.  I have added some additional detial.  It also gave me a chance to think more about the date structure I would like to have at the end."}, {"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1539793580, "post_id": 52846755, "comment_id": 92633733, "body": "Your desired output is not a valid object."}, {"owner": {"reputation": 4930, "user_id": 5276188, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/N2sAW.jpg?s=128&g=1", "display_name": "Doktor OSwaldo", "link": "https://stackoverflow.com/users/5276188/doktor-oswaldo"}, "edited": false, "score": 0, "creation_date": 1539844506, "post_id": 52846755, "comment_id": 92649961, "body": "Your desired output is broken, and strange, why have a hash at all if you have every information in it duplicated? This makes no sense to me, please extend your question to show what you want to do in the end with the output..."}], "answers": [{"comments": [{"owner": {"reputation": 25, "user_id": 6603952, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/21155c0f8b4e743da97751a364ba6ed5?s=128&d=identicon&r=PG&f=1", "display_name": "Jon Poehlman", "link": "https://stackoverflow.com/users/6603952/jon-poehlman"}, "edited": false, "score": 0, "creation_date": 1539782610, "post_id": 52850027, "comment_id": 92627004, "body": "Hi, this is probably a stupid question, but how do I escape out all of the hash values.  Presently, this is only save the last value to &quot;z&quot;."}], "tags": [], "owner": {"reputation": 4930, "user_id": 5276188, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/N2sAW.jpg?s=128&g=1", "display_name": "Doktor OSwaldo", "link": "https://stackoverflow.com/users/5276188/doktor-oswaldo"}, "is_accepted": false, "score": 0, "last_activity_date": 1539763842, "last_edit_date": 1539763842, "creation_date": 1539763387, "answer_id": 52850027, "question_id": 52846755, "link": "https://stackoverflow.com/questions/52846755/how-to-create-a-neste-array-and-transform-to-a-nested-hash/52850027#52850027", "title": "How to create a neste array and transform to a nested hash?", "body": "<pre><code>y.each do |h|\n  h.each { |k,v| z[k] = v }\nend\n</code></pre>\n\n<p>Should work. The problem is, your array has multiple Elements which are looking like that: <code>{ :link=&gt;\"1776\", :group=&gt;1 }</code>. That is one element. Now you use a <code>each</code> block with two elements <code>k</code> and <code>v</code>. Since there is only one <code>k</code> will be that one (<code>k</code> = <code>{ :link=&gt;\"1776\", :group=&gt;1 }</code>) and <code>v</code> will be <code>nil</code>.</p>\n\n<p><strong>Note: This is not the most elegant solution for sure</strong>, but it explains your error. Your example code does not make too much of a sense. To get a good, elegant solution <strong>update your question like asked in the comments</strong>.</p>\n"}], "owner": {"reputation": 25, "user_id": 6603952, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/21155c0f8b4e743da97751a364ba6ed5?s=128&d=identicon&r=PG&f=1", "display_name": "Jon Poehlman", "link": "https://stackoverflow.com/users/6603952/jon-poehlman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 81, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1539781456, "creation_date": 1539745806, "last_edit_date": 1539781456, "question_id": 52846755, "link": "https://stackoverflow.com/questions/52846755/how-to-create-a-neste-array-and-transform-to-a-nested-hash", "title": "How to create a neste array and transform to a nested hash?", "body": "<p>I am trying to create a nested hash in ruby.  The following is the code I am using to first create a nested array and then nested hash. </p>\n\n<pre><code>r=[]\ny=[]\nz={}\n\nr= [[\"1776\"], [\"1094\"], [\"1666\", \"1077\"]]\n\ni=1\n\nr.each do |t|\n    t.each do |h|\n        y &lt;&lt; {:link =&gt; h, :group =&gt; i} \n    end \n    i = i + 1 \nend \n\ny.each { |k,v| z[k] = v }\n</code></pre>\n\n<p>However, I keep end up the following output when I put 'p z':</p>\n\n<pre><code>{{:link=&gt;\"1776\", :group=&gt;1}=&gt;nil, {:link=&gt;\"1094\", :group=&gt;2}=&gt;nil \n{:link=&gt;\"1666\", :group=&gt;3}=&gt;nil, {:link=&gt;\"1077\", :group=&gt;3}=&gt;nil}\n</code></pre>\n\n<p>My goal is to create a structure something like this:  </p>\n\n<pre><code>{{:link=&gt;\"1666\" {:group=&gt;3}}, {:link=&gt;\"1077\" {:group=&gt;3}}}\n</code></pre>\n\n<p>I want to use the link key and value to merge this array of hashes with anothoer array based on matching :link= value, and then be able to call on each of the sub-array elements based on the :link key.</p>\n\n<p>Also, when every I try to do anything with the hash, I get \"no implicit conversion of Symbol into Integer\"  Not sure what I am doing wrong and why I get the nil.  I have tried flattening and that did not help.   </p>\n"}, {"tags": ["ruby"], "answers": [{"tags": [], "owner": {"reputation": 155, "user_id": 9795689, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "cjl85", "link": "https://stackoverflow.com/users/9795689/cjl85"}, "is_accepted": false, "score": 0, "last_activity_date": 1539743501, "creation_date": 1539743501, "answer_id": 52846465, "question_id": 52846423, "link": "https://stackoverflow.com/questions/52846423/ruby-calling-system-or-exec-with-a-variable-number-of-parameters/52846465#52846465", "title": "Ruby calling system or exec with a variable number of parameters", "body": "<p>Is this what you might be referring to? As shown on:</p>\n\n<p><a href=\"https://ruby-doc.com/docs/ProgrammingRuby/html/tut_methods.html\" rel=\"nofollow noreferrer\">https://ruby-doc.com/docs/ProgrammingRuby/html/tut_methods.html</a></p>\n\n<blockquote>\n  <p>But what if you want to pass in a variable number of arguments, or want to capture multiple arguments into a single parameter? Placing an asterisk before the name of the parameter after the ``normal'' parameters does just that.</p>\n  \n  <p>def varargs(arg1, *rest)\n    \"Got #{arg1} and #{rest.join(', ')}\"\n  end</p>\n  \n  <p>varargs(\"one\") \u00bb   \"Got one and \"</p>\n  \n  <p>varargs(\"one\", \"two\")  \u00bb   \"Got one and two\"</p>\n  \n  <p>varargs \"one\", \"two\", \"three\"  \u00bb   \"Got one and two, three\"</p>\n  \n  <p>In this example, the first argument is assigned to the first method parameter as usual. However, the next parameter is prefixed with an asterisk, so all the remaining arguments are bundled into a new Array, which is then assigned to that parameter.></p>\n</blockquote>\n"}, {"tags": [], "owner": {"reputation": 394580, "user_id": 479863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ArUCE.jpg?s=128&g=1", "display_name": "mu is too short", "link": "https://stackoverflow.com/users/479863/mu-is-too-short"}, "is_accepted": true, "score": 6, "last_activity_date": 1539745114, "creation_date": 1539745114, "answer_id": 52846685, "question_id": 52846423, "link": "https://stackoverflow.com/questions/52846423/ruby-calling-system-or-exec-with-a-variable-number-of-parameters/52846685#52846685", "title": "Ruby calling system or exec with a variable number of parameters", "body": "<p>Put the arguments in an array:</p>\n\n<pre><code>cmd = %w[ls -l -a]\n</code></pre>\n\n<p>and then splat that array when calling <code>system</code>:</p>\n\n<pre><code>system(*cmd)\n# -----^ splat\n</code></pre>\n\n<p>That's the same as saying:</p>\n\n<pre><code>system('ls', '-l', '-a')\n</code></pre>\n\n<p>The same syntax is used to <em>accept</em> a variable number of arguments when calling a method:</p>\n\n<pre><code>def variadic_method(*args)\n  # This splat leaves all the arguments in the\n  # args array\n  ...\nend\n</code></pre>\n"}], "owner": {"reputation": 502, "user_id": 2487509, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/Oz6bq.jpg?s=128&g=1", "display_name": "Russell Fulton", "link": "https://stackoverflow.com/users/2487509/russell-fulton"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 527, "favorite_count": 0, "accepted_answer_id": 52846685, "answer_count": 2, "score": 0, "last_activity_date": 1539745114, "creation_date": 1539742984, "question_id": 52846423, "link": "https://stackoverflow.com/questions/52846423/ruby-calling-system-or-exec-with-a-variable-number-of-parameters", "title": "Ruby calling system or exec with a variable number of parameters", "body": "<p>I want to invoke some system commands from a ruby script without having a shell fiddle with things.  The catch is that at coding time I don't know how many args there will be.</p>\n\n<p>If I were going through a shell I would build up the command line by concatenation...  </p>\n\n<p>I used to do this in perl by passing system and array with however many arguments I wanted.  This worked because of the way parameters are passed in perl.   Unsurprisingly Ruby does not support that.</p>\n\n<p>Is there a way to do this?</p>\n"}, {"tags": ["ruby"], "answers": [{"comments": [{"owner": {"reputation": 4616, "user_id": 284257, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/f4e37ffbbf81653b797ec4cf995a23b1?s=128&d=identicon&r=PG", "display_name": "Sig", "link": "https://stackoverflow.com/users/284257/sig"}, "edited": false, "score": 0, "creation_date": 1539745475, "post_id": 52846605, "comment_id": 92609320, "body": "Thank for the reply. Enjoy your day."}], "tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": true, "score": 5, "last_activity_date": 1539744877, "last_edit_date": 1539744877, "creation_date": 1539744479, "answer_id": 52846605, "question_id": 52845838, "link": "https://stackoverflow.com/questions/52845838/delegating-to-a-class-method/52846605#52846605", "title": "Delegating to a class method", "body": "<pre><code>require 'forwardable'\n\nclass Klass\n  def self.a_very_long_method_name(name)\n    puts \"Hi, #{name}\"\n  end\nend\n\nclass Sugar\n  extend Forwardable\n  def_delegator Klass, :a_very_long_method_name, :verrry_long\nend\n\ns = Sugar.new\ns.verrry_long \"Sue\"\n  # Hi, Sue\n</code></pre>\n\n<p>In <code>def_delegator Klass, :a_very_long_method_name, :verrry_long</code>, <code>Klass</code> is the receiver of the message forwarding, <code>:a_very_long_method_name</code> is the message to be forwarded and <code>:verrry_long</code> is an alias of the message <code>:a_very_long_method_name</code>.</p>\n"}], "owner": {"reputation": 4616, "user_id": 284257, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/f4e37ffbbf81653b797ec4cf995a23b1?s=128&d=identicon&r=PG", "display_name": "Sig", "link": "https://stackoverflow.com/users/284257/sig"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 70, "favorite_count": 0, "accepted_answer_id": 52846605, "answer_count": 1, "score": 4, "last_activity_date": 1539744877, "creation_date": 1539737359, "question_id": 52845838, "link": "https://stackoverflow.com/questions/52845838/delegating-to-a-class-method", "title": "Delegating to a class method", "body": "<p>Is it possible in Ruby to delegate to a class method of another class so to replace the method below?</p>\n\n<pre><code>def sugar(param)\n  Klass.a_very_long_method_name(param)\nend\n</code></pre>\n\n<p>I have tried to use <code>Forwardable</code></p>\n\n<pre><code>   extend Forwardable\n   def_delegator 'Klass.a_very_long_method_name', :sugar\n</code></pre>\n\n<p>But it doesn't seem to work.</p>\n\n<p>I find myself to call <code>Klass.a_very_long_method_name</code> in many places and I'm trying to dry things up.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "rails-geocoder"], "comments": [{"owner": {"reputation": 28612, "user_id": 5025116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7WdYi.jpg?s=128&g=1", "display_name": "Sebastian Palma", "link": "https://stackoverflow.com/users/5025116/sebastian-palma"}, "edited": false, "score": 0, "creation_date": 1539736593, "post_id": 52845703, "comment_id": 92607468, "body": "What&#39;s the action that render the <code>page</code> template?, do you define <code>@locations</code>there?"}, {"owner": {"reputation": 299, "user_id": 9454269, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/0edb637e57ce3cad9745d80e6739b567?s=128&d=identicon&r=PG&f=1", "display_name": "KuroGane", "link": "https://stackoverflow.com/users/9454269/kurogane"}, "reply_to_user": {"reputation": 28612, "user_id": 5025116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7WdYi.jpg?s=128&g=1", "display_name": "Sebastian Palma", "link": "https://stackoverflow.com/users/5025116/sebastian-palma"}, "edited": false, "score": 0, "creation_date": 1539736864, "post_id": 52845703, "comment_id": 92607530, "body": "Hi there, so I&#39;m actually just messing with the code right now, so the page template code is just as is. I&#39;m actually new to ruby on rails, so I don&#39;t think @locations is defined there. If that&#39;s the case, how would I go about doing so?"}, {"owner": {"reputation": 28612, "user_id": 5025116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7WdYi.jpg?s=128&g=1", "display_name": "Sebastian Palma", "link": "https://stackoverflow.com/users/5025116/sebastian-palma"}, "edited": false, "score": 0, "creation_date": 1539737241, "post_id": 52845703, "comment_id": 92607610, "body": "You need to define any variable within the controller action to be able to use it in the view - the template. As there&#39;s no page action, I&#39;m not sure how you render such template, could you elaborate?"}, {"owner": {"reputation": 299, "user_id": 9454269, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/0edb637e57ce3cad9745d80e6739b567?s=128&d=identicon&r=PG&f=1", "display_name": "KuroGane", "link": "https://stackoverflow.com/users/9454269/kurogane"}, "reply_to_user": {"reputation": 28612, "user_id": 5025116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7WdYi.jpg?s=128&g=1", "display_name": "Sebastian Palma", "link": "https://stackoverflow.com/users/5025116/sebastian-palma"}, "edited": false, "score": 0, "creation_date": 1539738242, "post_id": 52845703, "comment_id": 92607820, "body": "As I mentioned, I&#39;m still new to ruby on rails. But reading what you have stated, how could I generate a page action? Actually, from the above code, I didn&#39;t generate the scaffolding, I just manually added in each file to the respective folders, hence why there may be these issues."}, {"owner": {"reputation": 750, "user_id": 406551, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/sjuJz.jpg?s=128&g=1", "display_name": "AxelTheGerman", "link": "https://stackoverflow.com/users/406551/axelthegerman"}, "edited": false, "score": 0, "creation_date": 1539752526, "post_id": 52845703, "comment_id": 92610935, "body": "Emijune&#39;s answer below seems to have your solution. In the future please ALWAYS attach the stack trace when you get an exception. Saves everyone the guessing game where the error occurred"}], "answers": [{"tags": [], "owner": {"reputation": 282, "user_id": 9206962, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/8a463369008c395c14b569267e3c4f3e?s=128&d=identicon&r=PG&f=1", "display_name": "emijune", "link": "https://stackoverflow.com/users/9206962/emijune"}, "is_accepted": true, "score": 0, "last_activity_date": 1539750625, "last_edit_date": 1539750625, "creation_date": 1539750009, "answer_id": 52847239, "question_id": 52845703, "link": "https://stackoverflow.com/questions/52845703/ruby-on-rails-undefined-method-each-for-nilnilclass-error/52847239#52847239", "title": "Ruby on Rails - undefined method `each&#39; for nil:NilClass error", "body": "<p>You did not specify which controller action you hit this error in, however based off your code I guess it is from the <code>show</code> method. The issue is probably that you are trying to not render the layout, however you are doing this before setting the <code>@locations</code> variable. Therefore, Rails is going into rendering before the instance variable has been created. To fix, you should move <code>render :layout =&gt; nil</code> line to the end of your method, after the instance variables have been created, e.g.:</p>\n\n<pre><code>def show\n  @locations = Locations.find(params[:id])\n  render :layout =&gt; nil\nend\n</code></pre>\n\n<p>However, I think you may not be fully understanding the flow of events happening here based off the names of your files. By default, at the end of a controller action, Rails will attempt to render a file by looking for a file name matching the controller action from within a views folder matching the name of the controller. For example:</p>\n\n<p><em>app/controllers/books_controller.rb</em> :</p>\n\n<pre><code>class BooksController &lt; ApplicationController\n  def index\n    # Will automatically render `app/views/books/index.html.erb`\n  end\n\n  def show\n    render :other_show_page # Will look for a file `app/views/books/other_show_page.html.erb` rather than `app/views/books/show.html.erb` because it was explicitly specified\n  end\nend\n</code></pre>\n\n<p>In your case, you have a file called <code>page.html.erb</code> but you do not have a controller action (<code>def page; end</code>) nor are any of your other actions specifically rendering a file called <code>page</code>. As such, Rails would not be able to find your <code>page.html.erb</code> file anyway. I assume you do have a <code>show.html.erb</code> file or else you would be getting a different error, however if you are trying to render the HTML from within your <code>page.html.erb</code> file, it will not happen from within your <code>show</code> method unless you specifically render that file.</p>\n\n<p>A few other notes... </p>\n\n<ul>\n<li>Models should typically have names in the singular, rather than plural. You appear to be using <code>Locations</code> as your model name, rather than <code>Location</code>.</li>\n<li>Your instance variable in your <code>show</code> method <code>@locations</code>, though you are using the <code>find</code> ActiveRecord query. This query returns a single object, rather than a collection proxy of many objects. As such, your <code>@locations</code> variable naming is slightly misleading, and may be better as <code>@location</code>.</li>\n<li>If you <em>are</em> trying to render the <code>page.html.erb</code> file when you hit the <code>show</code> method, unless there is some specific reason you are doing this it is unnecessary and bad practice. You should just include the code in a <code>show.html.erb</code> file and let Rails automatically render it rather than creating a custom file that you are rendering specifically. Rails is convention over configuration, so try to learn the conventions and follow them until you have a good reason to break away.</li>\n</ul>\n"}], "owner": {"reputation": 299, "user_id": 9454269, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/0edb637e57ce3cad9745d80e6739b567?s=128&d=identicon&r=PG&f=1", "display_name": "KuroGane", "link": "https://stackoverflow.com/users/9454269/kurogane"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 736, "favorite_count": 0, "accepted_answer_id": 52847239, "answer_count": 1, "score": -1, "last_activity_date": 1539750625, "creation_date": 1539736162, "question_id": 52845703, "link": "https://stackoverflow.com/questions/52845703/ruby-on-rails-undefined-method-each-for-nilnilclass-error", "title": "Ruby on Rails - undefined method `each&#39; for nil:NilClass error", "body": "<p>I've gone over the API for my specific error and the answers provided are not able to solve my issue.</p>\n\n<p>I'm just experimenting with a \"find nearest location\" code obtained online, and my issue is that when I am implementing this code to a project, I am obtaining the \"undefined method `each' for nil:NilClass error\". </p>\n\n<p>I understand this error would be due to, when calling an @something, it isn't defined. So, this is the code and files I'm working with:</p>\n\n<p>locations.rb</p>\n\n<pre><code>class Nearby_Location &lt; ActiveRecord::Base\n  geocoded_by :full_address\n  after_validation :geocode, :if =&gt; :address_changed?\n\n  def full_address\n   [address, city, postcode].compact.join(',')\n  end\nend\n</code></pre>\n\n<p>locations_controller.rb</p>\n\n<pre><code>class Locations &lt; ApplicationController\n  def index\n    @locations = Locations.all\n    if params[:search].present?\n      @locations = Locations.near(params[:search], 10, :order =&gt; :distance)\n    else\n      @locations = Locations.all.order(\"created_at DESC\")\n    end\n  end\n\n  def new\n    @locations = Locations.new\n  end\n\n  def create\n    @locations = Locations.new(location_params)\n    if @locations.save\n      flash[:success] = 'Place added!'\n      redirect_to root_path\n    else\n      render 'new'\n    end\n  end\n\n  def location_params\n    params.require(:location).permit(:company_name, :address, :city,\n                                    :postcode, :latitude, :longitude)\n  end\n\n  def show\n    render :layout =&gt; nil\n    @locations = Locations.find(params[:id])\n  end\n\nend\n</code></pre>\n\n<p>page.html.erb</p>\n\n<pre><code>&lt;div class=\"container\"&gt;\n  &lt;div class=\"starter-template\"&gt;\n    &lt;h3&gt;Find places near your location&lt;/h3&gt;\n    &lt;p class=\"lead\"&gt;Enter your address or zip code&lt;/p&gt;\n    &lt;p&gt;&lt;%= form_tag locations_path, :method =&gt; :get do %&gt;\n      &lt;%= text_field_tag :search, params[:search], placeholder: \"e.g Statue of Liberty, New York\" %&gt;\n      &lt;%= submit_tag \"Search Near\", :name =&gt; nil %&gt;\n      &lt;% end %&gt;\n    &lt;/p&gt;\n  &lt;/div&gt;\n\n  &lt;% @locations.each do |locations| %&gt;\n &lt;%= link_to locations do %&gt;\n  &lt;%= locations.name %&gt;\n &lt;% end %&gt;\n&lt;% end %&gt;\n\n&lt;/div&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p>scheme.rb</p>\n\n<pre><code>  create_table \"locations\", force: :cascade do |t|\n    t.string \"address\"\n    t.float \"latitude\"\n    t.float \"longitude\"\n  end\n</code></pre>\n\n<p>I've modified with the code incorporating the answers of the other APIs but with no success. I feel it may be due to the def show portion of the code, but I'm not too sure. </p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4"], "comments": [{"owner": {"reputation": 13378, "user_id": 1430810, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/v669u.jpg?s=128&g=1", "display_name": "arieljuod", "link": "https://stackoverflow.com/users/1430810/arieljuod"}, "edited": false, "score": 0, "creation_date": 1539740629, "post_id": 52845643, "comment_id": 92608355, "body": "What do you mean with &quot;when I trigger the car show method&quot;? you enter an URL (/1/2), rails parses it, and, at the first match, it calls the controller&#39;s action. I don&#39;t think you are understanding the request&#39;s lifecycle."}, {"owner": {"reputation": 4644, "user_id": 2594185, "user_type": "registered", "profile_image": "https://graph.facebook.com/100003773788931/picture?type=large", "display_name": "Jagdeep Singh", "link": "https://stackoverflow.com/users/2594185/jagdeep-singh"}, "edited": false, "score": 0, "creation_date": 1539755907, "post_id": 52845643, "comment_id": 92612036, "body": "How would you access <code>MotorcycleController#show</code> and <code>TravelController#show</code>? What would be the URL for those?"}, {"owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "edited": false, "score": 0, "creation_date": 1539756516, "post_id": 52845643, "comment_id": 92612252, "body": "Your question includes an example (<code>&#47;1&#47;2</code>) that should route to the <code>CarController</code>. Please elaborate and add examples for routes that should route to the <code>TravelController</code> and the <code>MotorcycleController</code> and explain how you (as a human) would decide which controller to route to just by looking at the ids - where to route for example <code>&#47;12&#47;12</code> or <code>&#47;47&#47;999</code>?"}], "answers": [{"comments": [{"owner": {"reputation": 18856, "user_id": 1359650, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/dffc4318ac93e728a26c8e8b51b4eb37?s=128&d=identicon&r=PG", "display_name": "jvillian", "link": "https://stackoverflow.com/users/1359650/jvillian"}, "reply_to_user": {"reputation": 7450, "user_id": 2458858, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/N8Jbo.jpg?s=128&g=1", "display_name": "tryingToLearn", "link": "https://stackoverflow.com/users/2458858/tryingtolearn"}, "edited": false, "score": 0, "creation_date": 1539793504, "post_id": 52845843, "comment_id": 92633691, "body": "Thank you for the feedback. The OP asked whether it is possible to route calls such a <code>http:&#47;&#47;localhost:3000&#47;1&#47;2</code> and <code>http:&#47;&#47;localhost:3000&#47;2&#47;5</code> to different controllers and I answered &quot;No&quot;. That seems like an answer to me. But, I appreciate the comment."}], "tags": [], "owner": {"reputation": 18856, "user_id": 1359650, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/dffc4318ac93e728a26c8e8b51b4eb37?s=128&d=identicon&r=PG", "display_name": "jvillian", "link": "https://stackoverflow.com/users/1359650/jvillian"}, "is_accepted": false, "score": 0, "last_activity_date": 1539737401, "creation_date": 1539737401, "answer_id": 52845843, "question_id": 52845643, "link": "https://stackoverflow.com/questions/52845643/maintaining-similar-url-for-multiple-methods-ruby/52845843#52845843", "title": "Maintaining Similar URL for Multiple Methods Ruby", "body": "<p>No, it's not possible. How is the router supposed to know if the <code>id</code> is for a <code>Car</code>, <code>Motorcycle</code>, or <code>Travel</code>? </p>\n\n<p>BTW, the convention is for the controller to be in the plural form (such as <code>MotorcyclesController</code>).</p>\n\n<p>Also BTW, routing is a Rails phenomenon, not a Ruby phenomenon. </p>\n"}], "owner": {"reputation": 1796, "user_id": 2809686, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/df4c97dd08b33a8a0684cd226bfe89ce?s=128&d=identicon&r=PG&f=1", "display_name": "Kingsley Simon", "link": "https://stackoverflow.com/users/2809686/kingsley-simon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 28, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1539737401, "creation_date": 1539735579, "question_id": 52845643, "link": "https://stackoverflow.com/questions/52845643/maintaining-similar-url-for-multiple-methods-ruby", "title": "Maintaining Similar URL for Multiple Methods Ruby", "body": "<p>I have a 3 controllers with the method show namely</p>\n\n<pre><code>class CarController &lt; ApplicationController\n\n  def show\n  end\nend\n\nclass MotorcycleController &lt; ApplicationController\n\n  def show\n  end\nend\n\nclass TravelController &lt; ApplicationController\n\n  def show\n  end\nend\n</code></pre>\n\n<p>In my routes, i want the show method of all tree to follow the same url structure <code>/:company_id/:id</code> </p>\n\n<p>So given an example that my home page url is <code>https://localhost:3000</code>, company id is <code>1</code> and id is <code>2</code>, if i go to the show method of car controller, my url should be <code>http://localhost:3000/1/2</code></p>\n\n<p>At the moment, i did this in my routes</p>\n\n<pre><code>get '/:company_id/:id' =&gt; 'travel_controller#show', as: 'travel_insurance_product'\n    get '/:company_id/:id' =&gt; 'car_controller#show', as: 'car_insurance_product'\n    get '/:company_id/:id' =&gt; 'motorcycle_controller#show', as: 'motorcycle_insurance_product'\n</code></pre>\n\n<p>But when i trigger the car show method, it goes to the travel controller method</p>\n\n<p>Is this possible to be done in ruby?</p>\n"}, {"tags": ["php", "ruby", "shopify"], "comments": [{"owner": {"reputation": 12936, "user_id": 2106, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/722117a5bb31bd02bc3bc369ab194fd5?s=128&d=identicon&r=PG", "display_name": "Buggabill", "link": "https://stackoverflow.com/users/2106/buggabill"}, "edited": false, "score": 0, "creation_date": 1539734503, "post_id": 52845469, "comment_id": 92607022, "body": "This is really asking for an opinion.  Picking a language is a highly subjective (and could be considered somewhat religious for some) matter that you need to evaluate yourself.  You should pick the best language for the task at hand, and don&#39;t let that choice hamper you in the future from learning more."}, {"owner": {"reputation": 3844, "user_id": 833881, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/856cdb57da6d0b4758d597d30602fcd8?s=128&d=identicon&r=PG", "display_name": "kungphu", "link": "https://stackoverflow.com/users/833881/kungphu"}, "reply_to_user": {"reputation": 12936, "user_id": 2106, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/722117a5bb31bd02bc3bc369ab194fd5?s=128&d=identicon&r=PG", "display_name": "Buggabill", "link": "https://stackoverflow.com/users/2106/buggabill"}, "edited": false, "score": 0, "creation_date": 1539735211, "post_id": 52845469, "comment_id": 92607182, "body": "As @Buggabill says, this is opinion-based, and I think it&#39;s likely to be closed as such... personally, having written PHP for almost a decade, I would very, very strongly prefer Ruby. While I don&#39;t like Ruby&#39;s syntax <i>at all</i>, it&#39;s still a far more mature language in terms of its engineering."}, {"owner": {"reputation": 65, "user_id": 3962143, "user_type": "registered", "accept_rate": 33, "profile_image": "https://graph.facebook.com/100000938356782/picture?type=large", "display_name": "Irfan Saleem", "link": "https://stackoverflow.com/users/3962143/irfan-saleem"}, "edited": false, "score": 0, "creation_date": 1539736084, "post_id": 52845469, "comment_id": 92607374, "body": "Another reason of confliction is that while I can also code WP plugins (and other CMS) in PHP, I can&#39;t do it in Ruby but as you guys said, Ruby is a much more mature laguage. And I can understand language choice being a religious one as one really gotta be devoted to it in order to master it, that&#39;s why I wanna weigh my option before I really commit to it"}], "answers": [{"tags": [], "owner": {"reputation": 33, "user_id": 10503075, "user_type": "registered", "profile_image": "https://graph.facebook.com/10217472266821247/picture?type=large", "display_name": "Tommy Pedersen", "link": "https://stackoverflow.com/users/10503075/tommy-pedersen"}, "is_accepted": false, "score": 0, "last_activity_date": 1539734988, "creation_date": 1539734988, "answer_id": 52845577, "question_id": 52845469, "link": "https://stackoverflow.com/questions/52845469/for-shopify-im-conflicted-between-learning-php-or-ruby/52845577#52845577", "title": "For Shopify, I&#39;m conflicted between learning PHP or Ruby", "body": "<p>I would choose Ruby since that is the native support for, and later PHP if that is necessary in another project.</p>\n"}, {"comments": [{"owner": {"reputation": 65, "user_id": 3962143, "user_type": "registered", "accept_rate": 33, "profile_image": "https://graph.facebook.com/100000938356782/picture?type=large", "display_name": "Irfan Saleem", "link": "https://stackoverflow.com/users/3962143/irfan-saleem"}, "edited": false, "score": 0, "creation_date": 1539779685, "post_id": 52847571, "comment_id": 92625107, "body": "That&#39;s a rather good reply. Thanks David!"}], "tags": [], "owner": {"reputation": 8203, "user_id": 210841, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/5adbe9e20522d6a177e76b223b6750ed?s=128&d=identicon&r=PG", "display_name": "David Lazar", "link": "https://stackoverflow.com/users/210841/david-lazar"}, "is_accepted": true, "score": 2, "last_activity_date": 1539752507, "creation_date": 1539752507, "answer_id": 52847571, "question_id": 52845469, "link": "https://stackoverflow.com/questions/52845469/for-shopify-im-conflicted-between-learning-php-or-ruby/52847571#52847571", "title": "For Shopify, I&#39;m conflicted between learning PHP or Ruby", "body": "<p>It really makes no difference. There. I said it. Shopify is so agnostic to the tech stack you choose, it is up to you to decide what works for you.</p>\n\n<p>PHP, Ruby, Python, Javascript, heck even C# all work the same for making Shopify Apps. Your preference matters. If you feel comfortable with PHP, use it! There is zero obligation to use Ruby just because Shopify uses it. </p>\n\n<p>In fact, Shopify is now so agnostic, their GraphQL based API for Apps eliminates all \"my stack beats your stack\" crap to nothing. These days, you can safely just focus on wiring it up to work, without offending anyone. Make an HTTPS call to an endpoint, get back data. Process it, act on it, show stuff off. Simple. No need to worry about how you do that. All scripting languages do it. </p>\n"}], "owner": {"reputation": 65, "user_id": 3962143, "user_type": "registered", "accept_rate": 33, "profile_image": "https://graph.facebook.com/100000938356782/picture?type=large", "display_name": "Irfan Saleem", "link": "https://stackoverflow.com/users/3962143/irfan-saleem"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 155, "favorite_count": 0, "closed_date": 1539778827, "accepted_answer_id": 52847571, "answer_count": 2, "score": 0, "last_activity_date": 1539752507, "creation_date": 1539733995, "question_id": 52845469, "link": "https://stackoverflow.com/questions/52845469/for-shopify-im-conflicted-between-learning-php-or-ruby", "closed_reason": "Opinion-based", "title": "For Shopify, I&#39;m conflicted between learning PHP or Ruby", "body": "<p>I'm not sure how to phrase this question that won't get me to hate from you guys but I'm giving it a go. I'm aware of the basic syntax and logic of programming like if statement, variable, type of strings, etc (purely basic) though I'm a little more familiar with PHP.</p>\n\n<p>Now I wanna learn Shopify development, though they don't have direct support for PHP but one can build Shopify apps on Laravel too (so I've heard). </p>\n\n<p>I'm very conflicted between learning either PHP or Ruby because it'll be almost all the same for me and ofcourse I don't wanna learn it just for Shopify. </p>\n\n<p>Anyways, your input will be appreciated.</p>\n"}, {"tags": ["ruby"], "answers": [{"tags": [], "owner": {"reputation": 8733, "user_id": 3625433, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/N7qK6.png?s=128&g=1", "display_name": "lacostenycoder", "link": "https://stackoverflow.com/users/3625433/lacostenycoder"}, "is_accepted": true, "score": 0, "last_activity_date": 1539732365, "creation_date": 1539732365, "answer_id": 52845282, "question_id": 52845199, "link": "https://stackoverflow.com/questions/52845199/reset-a-counter-in-ruby/52845282#52845282", "title": "Reset a counter in Ruby", "body": "<p>You may need to reset it inside Job init</p>\n\n<pre><code>class Job\n  def initialize\n    @@count = 0\n  end\n\n  def ft_count_and_percentage\n    #the blah you already have\n  end\nend\n</code></pre>\n"}], "owner": {"reputation": 177, "user_id": 10095385, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-AQNUq2AuhX0/AAAAAAAAAAI/AAAAAAAACeM/W_ToTsU2GKw/photo.jpg?sz=128", "display_name": "Sachin", "link": "https://stackoverflow.com/users/10095385/sachin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 117, "favorite_count": 0, "accepted_answer_id": 52845282, "answer_count": 1, "score": 1, "last_activity_date": 1539732365, "creation_date": 1539731813, "question_id": 52845199, "link": "https://stackoverflow.com/questions/52845199/reset-a-counter-in-ruby", "title": "Reset a counter in Ruby", "body": "<p>I have the following code to compile jobs from github jobs API.  How do I reset a counter back to 0 every time I call on a new city?  I've tried putting it in several different places with no luck.</p>\n\n<pre><code>def ft_count_and_percentage\n    @@url += @city\n    uri = URI(@@url)\n    response = Net::HTTP.get(uri)\n    result = JSON.parse(response)\n    result.each do |job|\n        if job[\"type\"] == \"Full Time\"\n            @@fulltime_count += 1\n        end\n    end \n    puts \"Total number of jobs in #{@city}: #{result.length}\"\n    if @@fulltime_count &gt; 0\n        puts (\"full time percent \") + \"#{(@@fulltime_count/result.length) * 100}\"\n    else\n        puts \"No FT Positions\"\n    end \nend\n</code></pre>\n\n<p>@@fulltime_count is defined outside this method to start at 0.  Currently, as expected the counter just keeps adding jobs every time I add a new city.</p>\n\n<pre><code>    boston = Job.new(\"Boston\")\nboston.ft_count_and_percentage\nsf = Job.new(\"San Francisco\")\nsf.ft_count_and_percentage\nla = Job.new(\"Los Angeles\")\nla.ft_count_and_percentage\ndenver = Job.new(\"Denver\")\ndenver.ft_count_and_percentage\nboulder = Job.new(\"Boulder\")\nboulder.ft_count_and_percentage\nchicago = Job.new(\"Chicago\")\nchicago.ft_count_and_percentage\nny = Job.new(\"New York City\")\nny.ft_count_and_percentage\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "api", "parameters"], "comments": [{"owner": {"reputation": 8733, "user_id": 3625433, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/N7qK6.png?s=128&g=1", "display_name": "lacostenycoder", "link": "https://stackoverflow.com/users/3625433/lacostenycoder"}, "edited": false, "score": 0, "creation_date": 1539731170, "post_id": 52845067, "comment_id": 92606298, "body": "see <a href=\"https://github.com/rails/strong_parameters#nested-parameters\" rel=\"nofollow noreferrer\">github.com/rails/strong_parameters#nested-parameters</a>"}], "owner": {"reputation": 49, "user_id": 10515650, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Tpv4j6ld-A8/AAAAAAAAAAI/AAAAAAAAAC0/795jKrR-hCU/photo.jpg?sz=128", "display_name": "Miguel Moncada", "link": "https://stackoverflow.com/users/10515650/miguel-moncada"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 125, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1539731621, "creation_date": 1539730788, "last_edit_date": 1539731621, "question_id": 52845067, "link": "https://stackoverflow.com/questions/52845067/validation-with-strong-parameters-on-input-file-parameter-in-ruby-on-rails", "title": "Validation with strong parameters on Input File Parameter in Ruby on Rails", "body": "<p>I'm building an API, and I need to create the following object:</p>\n\n<pre><code>certificate {\n file_name (String)\n file_p12  (binary) \n password  (String) \n}\n</code></pre>\n\n<p>I'm sending by post the following parameters:</p>\n\n<pre><code>[\n    {\"key\":\"file_p12\",\"value\":{\"0\":{}}},\n    {\"key\":\"password\",\"value\":\"1234\"}\n]\n</code></pre>\n\n<p>My model is:</p>\n\n<pre><code>class Certificate &lt; ApplicationRecord\n    validates_presence_of :file_name\n    validates_presence_of :file_p12\n    validates_presence_of :password\n    belongs_to :api_client\nend\n</code></pre>\n\n<p>In the controller, I'm saving the object in by this way:</p>\n\n<pre><code>@certificate = Certificate.create!([\n  file_name: params[:file_p12].original_filename,\n  file_p12: Base64.strict_encode64(params[:file_p12].read),\n  password: params[:password],\n  api_client_id: current_user.id])\n</code></pre>\n\n<p>My question is: How can I use a strong parameters to save that object, if I need to split the parameter \"file_p12\" to get the name and the byte info.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "haml"], "comments": [{"owner": {"reputation": 4644, "user_id": 2594185, "user_type": "registered", "profile_image": "https://graph.facebook.com/100003773788931/picture?type=large", "display_name": "Jagdeep Singh", "link": "https://stackoverflow.com/users/2594185/jagdeep-singh"}, "edited": false, "score": 0, "creation_date": 1539756092, "post_id": 52844919, "comment_id": 92612105, "body": "Your method <code>images_base64</code> returns an array."}, {"owner": {"reputation": 65, "user_id": 9749097, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c3995f74020227617b95fc7cd1ee5a85?s=128&d=identicon&r=PG&f=1", "display_name": "luftgekuhltlover", "link": "https://stackoverflow.com/users/9749097/luftgekuhltlover"}, "reply_to_user": {"reputation": 4644, "user_id": 2594185, "user_type": "registered", "profile_image": "https://graph.facebook.com/100003773788931/picture?type=large", "display_name": "Jagdeep Singh", "link": "https://stackoverflow.com/users/2594185/jagdeep-singh"}, "edited": false, "score": 0, "creation_date": 1539770712, "post_id": 52844919, "comment_id": 92619815, "body": "@JagdeepSingh yes I know, I&#39;m asking how can I convert it into a String"}, {"owner": {"reputation": 4644, "user_id": 2594185, "user_type": "registered", "profile_image": "https://graph.facebook.com/100003773788931/picture?type=large", "display_name": "Jagdeep Singh", "link": "https://stackoverflow.com/users/2594185/jagdeep-singh"}, "edited": false, "score": 2, "creation_date": 1539770831, "post_id": 52844919, "comment_id": 92619886, "body": "<code>to_s</code> would convert it into a string but I don&#39;t think you want that. Please explain your issue better."}], "answers": [{"comments": [{"owner": {"reputation": 8733, "user_id": 3625433, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/N7qK6.png?s=128&g=1", "display_name": "lacostenycoder", "link": "https://stackoverflow.com/users/3625433/lacostenycoder"}, "edited": false, "score": 1, "creation_date": 1539778802, "post_id": 52845575, "comment_id": 92624586, "body": "This doesn&#39;t answer the OP&#39;s question."}, {"owner": {"reputation": 61, "user_id": 7507549, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oBl6O.png?s=128&g=1", "display_name": "crice1988", "link": "https://stackoverflow.com/users/7507549/crice1988"}, "reply_to_user": {"reputation": 8733, "user_id": 3625433, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/N7qK6.png?s=128&g=1", "display_name": "lacostenycoder", "link": "https://stackoverflow.com/users/3625433/lacostenycoder"}, "edited": false, "score": 0, "creation_date": 1540484448, "post_id": 52845575, "comment_id": 92892866, "body": "How does this not answer the question?? Is indexing into an array of strings not the proper way to retrieve a value in the array?"}, {"owner": {"reputation": 8733, "user_id": 3625433, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/N7qK6.png?s=128&g=1", "display_name": "lacostenycoder", "link": "https://stackoverflow.com/users/3625433/lacostenycoder"}, "edited": false, "score": 0, "creation_date": 1540487771, "post_id": 52845575, "comment_id": 92894548, "body": "It is a very vague explanation at best, especially for someone who didn&#39;t really understand why they got the error message they posted.  This is not to imply that your answer does not have correctness to it, or that you could have solved the real problem,  but rather that you might have improved your answer based on a comment. &quot;run a loop&quot; is not ruby specific is it?"}], "tags": [], "owner": {"reputation": 61, "user_id": 7507549, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oBl6O.png?s=128&g=1", "display_name": "crice1988", "link": "https://stackoverflow.com/users/7507549/crice1988"}, "is_accepted": false, "score": 0, "last_activity_date": 1539734970, "creation_date": 1539734970, "answer_id": 52845575, "question_id": 52844919, "link": "https://stackoverflow.com/questions/52844919/how-to-convert-an-array-into-string-in-rails/52845575#52845575", "title": "How to convert an Array into String in Rails", "body": "<p>Map is going to return an array so you'll want to index into that array. Since it handles multiple base64 images, you may want to run a loop so that each photo will be displayed.</p>\n"}, {"tags": [], "owner": {"reputation": 8640, "user_id": 4055042, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/cd04c63d95d27033b53d4d83fea40c02?s=128&d=identicon&r=PG&f=1", "display_name": "SRack", "link": "https://stackoverflow.com/users/4055042/srack"}, "is_accepted": true, "score": 3, "last_activity_date": 1539774486, "creation_date": 1539774486, "answer_id": 52853432, "question_id": 52844919, "link": "https://stackoverflow.com/questions/52844919/how-to-convert-an-array-into-string-in-rails/52853432#52853432", "title": "How to convert an Array into String in Rails", "body": "<p>It sounds like you need to loop through the images and display them, for example:</p>\n\n<pre><code>- images_base64(@document.meta.images).each do |image|\n  = image_tag \"data:image/png;base64, #{image}\", width: '450px'\n</code></pre>\n\n<p>That assumes the 'long string' you're referencing is what you'd like to append to <code>'data:image/png;base64,</code>.</p>\n\n<p>That will create an image tag for each element in <code>images_base64(@document.meta.images)</code>, which appears to be just one in your example.</p>\n\n<p>Hope that helps - let me know if you've any questions.</p>\n"}, {"tags": [], "owner": {"reputation": 8733, "user_id": 3625433, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/N7qK6.png?s=128&g=1", "display_name": "lacostenycoder", "link": "https://stackoverflow.com/users/3625433/lacostenycoder"}, "is_accepted": false, "score": 1, "last_activity_date": 1540487517, "creation_date": 1540487517, "answer_id": 52994733, "question_id": 52844919, "link": "https://stackoverflow.com/questions/52844919/how-to-convert-an-array-into-string-in-rails/52994733#52994733", "title": "How to convert an Array into String in Rails", "body": "<p>A good answer has already been provided and accepted, however let's explain why the error actually threw you off and the question the way it was asked was not really the problem you were trying to solve. </p>\n\n<pre><code>\"No implicit conversion of Array into String\"\n</code></pre>\n\n<p>You're trying to render an array inside of the view which has to end up as a string because HAML gets rendered to an HTML string which is read finally by the browser.  So the simple answer is, when trying to render items inside of an array within a rails view template, you must ITERATE over the array with a <code>.each</code> block in ruby, and make sure whatever data ruby returned in that loop can be evaluated as a string. </p>\n"}], "owner": {"reputation": 65, "user_id": 9749097, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c3995f74020227617b95fc7cd1ee5a85?s=128&d=identicon&r=PG&f=1", "display_name": "luftgekuhltlover", "link": "https://stackoverflow.com/users/9749097/luftgekuhltlover"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 922, "favorite_count": 0, "accepted_answer_id": 52853432, "answer_count": 3, "score": 1, "last_activity_date": 1540487517, "creation_date": 1539729495, "last_edit_date": 1540486181, "question_id": 52844919, "link": "https://stackoverflow.com/questions/52844919/how-to-convert-an-array-into-string-in-rails", "title": "How to convert an Array into String in Rails", "body": "<p>I want to display a base64 image.</p>\n\n<p>I show below how far I've got. <code>images_base64</code> is defined like this:</p>\n\n<pre><code>def images_base64(images)\n  images.map {|image| image.image}\nend\n</code></pre>\n\n<p>and if I put it in a paragraph and display it, I get this: </p>\n\n<pre><code>[\"iVBSUhEUAA+gAAA0CAA...a long string\"]\n</code></pre>\n\n<p>I use it like this:</p>\n\n<pre><code>=image_tag 'data:image/png;base64, '+images_base64(@document.meta.images), width: '450px'\n</code></pre>\n\n<p>I get the error: <code>No implicit conversion of Array into String</code>. It seems like I can't convert the returned array into a string.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-3"], "comments": [{"owner": {"reputation": 8733, "user_id": 3625433, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/N7qK6.png?s=128&g=1", "display_name": "lacostenycoder", "link": "https://stackoverflow.com/users/3625433/lacostenycoder"}, "edited": false, "score": 0, "creation_date": 1539728308, "post_id": 52844499, "comment_id": 92605547, "body": "Well if you use RVM you can just try it and see. The official docs don&#39;t specify a max ruby version."}], "answers": [{"tags": [], "owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "is_accepted": false, "score": 2, "last_activity_date": 1539757194, "creation_date": 1539757194, "answer_id": 52848417, "question_id": 52844499, "link": "https://stackoverflow.com/questions/52844499/is-rails-version-3-1-1-compatible-with-ruby-version-2-3/52848417#52848417", "title": "Is Rails version 3.1.1 compatible with Ruby version 2.3?", "body": "<p>Form the <a href=\"https://weblog.rubyonrails.org/2013/2/27/Rails-3-2-13-rc1-has-been-released/\" rel=\"nofollow noreferrer\">release notes</a> of Ruby on Rails 3.2.13:</p>\n\n<blockquote>\n  <p>There is one big thing that is technically a fix but is sort of a feature: Ruby 2.0 support. Big thanks to Prem Sichanugrist for putting that together! Please give your applications a try on Ruby 2.0 and let me know how that goes.</p>\n</blockquote>\n\n<p>That said: When Rails 3.2.13 was the first version of Rails with Ruby 2.0 support then it is unlikely that the older Rails 3.1.1 version is working with Ruby 2.3.</p>\n"}], "owner": {"reputation": 76, "user_id": 6362689, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-AOKpYh-ESt8/AAAAAAAAAAI/AAAAAAAAAF4/yAl84Ng7QVM/photo.jpg?sz=128", "display_name": "Josh Abrams", "link": "https://stackoverflow.com/users/6362689/josh-abrams"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 372, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1539757194, "creation_date": 1539726685, "question_id": 52844499, "link": "https://stackoverflow.com/questions/52844499/is-rails-version-3-1-1-compatible-with-ruby-version-2-3", "title": "Is Rails version 3.1.1 compatible with Ruby version 2.3?", "body": "<p>I am in a situation where I need to update several API-connected gems that are no longer supported by my current version of Ruby. (1.9.3) The Rails release notes for Rails version 3.1.1 state that Rails 3.1 requires Ruby 1.8.7 or higher but it's hard to tell if that includes versions of Ruby which might have been updated more recently than the release notes.</p>\n\n<p>Am I good to update to 2.3 on my Rails 3.1.1 app?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "rubygems"], "comments": [{"owner": {"reputation": 8733, "user_id": 3625433, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/N7qK6.png?s=128&g=1", "display_name": "lacostenycoder", "link": "https://stackoverflow.com/users/3625433/lacostenycoder"}, "edited": false, "score": 0, "creation_date": 1539726644, "post_id": 52844467, "comment_id": 92605053, "body": "what command do you run to get this error?"}, {"owner": {"reputation": 1825, "user_id": 772309, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/e22e46e4e9a0bc49ae068749a1315e86?s=128&d=identicon&r=PG", "display_name": "Ryan Grush", "link": "https://stackoverflow.com/users/772309/ryan-grush"}, "reply_to_user": {"reputation": 8733, "user_id": 3625433, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/N7qK6.png?s=128&g=1", "display_name": "lacostenycoder", "link": "https://stackoverflow.com/users/3625433/lacostenycoder"}, "edited": false, "score": 0, "creation_date": 1539727478, "post_id": 52844467, "comment_id": 92605300, "body": "I got that when I ran <code>rails g mygem:install</code> in the Rails app that&#39;s using mygem. The <code>install_generator.rb</code> file in the gem is the file that has <code>require &quot;pry&quot;</code>"}, {"owner": {"reputation": 1825, "user_id": 772309, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/e22e46e4e9a0bc49ae068749a1315e86?s=128&d=identicon&r=PG", "display_name": "Ryan Grush", "link": "https://stackoverflow.com/users/772309/ryan-grush"}, "reply_to_user": {"reputation": 8733, "user_id": 3625433, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/N7qK6.png?s=128&g=1", "display_name": "lacostenycoder", "link": "https://stackoverflow.com/users/3625433/lacostenycoder"}, "edited": false, "score": 0, "creation_date": 1539728154, "post_id": 52844467, "comment_id": 92605491, "body": "alright I updated my question"}, {"owner": {"reputation": 1825, "user_id": 772309, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/e22e46e4e9a0bc49ae068749a1315e86?s=128&d=identicon&r=PG", "display_name": "Ryan Grush", "link": "https://stackoverflow.com/users/772309/ryan-grush"}, "reply_to_user": {"reputation": 8733, "user_id": 3625433, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/N7qK6.png?s=128&g=1", "display_name": "lacostenycoder", "link": "https://stackoverflow.com/users/3625433/lacostenycoder"}, "edited": false, "score": 0, "creation_date": 1539728884, "post_id": 52844467, "comment_id": 92605735, "body": "I tried all the solutions you mentioned, nothing seems to work. Can you reproduce it? I even tried stopping Spring like I saw mentioned somewhere else"}, {"owner": {"reputation": 8733, "user_id": 3625433, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/N7qK6.png?s=128&g=1", "display_name": "lacostenycoder", "link": "https://stackoverflow.com/users/3625433/lacostenycoder"}, "edited": false, "score": 0, "creation_date": 1539731320, "post_id": 52844467, "comment_id": 92606323, "body": "it was much simpler, see my answer"}], "answers": [{"comments": [{"owner": {"reputation": 1825, "user_id": 772309, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/e22e46e4e9a0bc49ae068749a1315e86?s=128&d=identicon&r=PG", "display_name": "Ryan Grush", "link": "https://stackoverflow.com/users/772309/ryan-grush"}, "edited": false, "score": 0, "creation_date": 1539732592, "post_id": 52845072, "comment_id": 92606622, "body": "I was hoping to do it from the gem side, instead of the project side. Again replacing replacing <code>add_development_dependency</code> with <code>add_dependency</code> in the .gemspec file works too. I don&#39;t know I&#39;m out of ideas. I&#39;ll probably just use your solution or use add_dependency and move on even though its not ideal. Thanks for your help."}, {"owner": {"reputation": 8733, "user_id": 3625433, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/N7qK6.png?s=128&g=1", "display_name": "lacostenycoder", "link": "https://stackoverflow.com/users/3625433/lacostenycoder"}, "reply_to_user": {"reputation": 1825, "user_id": 772309, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/e22e46e4e9a0bc49ae068749a1315e86?s=128&d=identicon&r=PG", "display_name": "Ryan Grush", "link": "https://stackoverflow.com/users/772309/ryan-grush"}, "edited": false, "score": 0, "creation_date": 1539753148, "post_id": 52845072, "comment_id": 92611122, "body": "but your running a <code>rails generate</code> command and Rails needs to load gems from your project <code>Gemfile</code> so there shouldn&#39;t be a problem. And I doubt you want to require pry in a production environment."}, {"owner": {"reputation": 1825, "user_id": 772309, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/e22e46e4e9a0bc49ae068749a1315e86?s=128&d=identicon&r=PG", "display_name": "Ryan Grush", "link": "https://stackoverflow.com/users/772309/ryan-grush"}, "edited": false, "score": 1, "creation_date": 1539795903, "post_id": 52845072, "comment_id": 92634840, "body": "you and @engineersmnky both helped clarify this, thanks. I think I use this solution when debugging my generators rather than loading it as a gem dependency."}], "tags": [], "owner": {"reputation": 8733, "user_id": 3625433, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/N7qK6.png?s=128&g=1", "display_name": "lacostenycoder", "link": "https://stackoverflow.com/users/3625433/lacostenycoder"}, "is_accepted": true, "score": 1, "last_activity_date": 1539730846, "creation_date": 1539730846, "answer_id": 52845072, "question_id": 52844467, "link": "https://stackoverflow.com/questions/52844467/unable-to-require-gems-loaded-as-add-development-dependency/52845072#52845072", "title": "Unable to require gems loaded as add_development_dependency", "body": "<p>Add this to your Gemfile in root of the project:</p>\n\n<pre><code>group :development, :test do\n  gem 'pry'\nend\n</code></pre>\n\n<p>And of course run</p>\n\n<pre><code>bundle install\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1825, "user_id": 772309, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/e22e46e4e9a0bc49ae068749a1315e86?s=128&d=identicon&r=PG", "display_name": "Ryan Grush", "link": "https://stackoverflow.com/users/772309/ryan-grush"}, "edited": false, "score": 0, "creation_date": 1539794606, "post_id": 52859031, "comment_id": 92634262, "body": "so even though I only need pry for debugging my gem and not the Rails app using it, I still have to load it as a runtime dependency? I found some SO answers that had it as an <code>add_development_dependency</code> (<a href=\"https://stackoverflow.com/a/14863281/772309\">stackoverflow.com/a/14863281/772309</a>) so I thought it was possible."}, {"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "reply_to_user": {"reputation": 1825, "user_id": 772309, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/e22e46e4e9a0bc49ae068749a1315e86?s=128&d=identicon&r=PG", "display_name": "Ryan Grush", "link": "https://stackoverflow.com/users/772309/ryan-grush"}, "edited": false, "score": 1, "creation_date": 1539795427, "post_id": 52859031, "comment_id": 92634637, "body": "@RyanGrush you are requiring it in the generator which will run in the gem so yes. Your debugging should be done before placing the gem into a rails application. Usually this is done by writing tests to ensure the functionality."}, {"owner": {"reputation": 1825, "user_id": 772309, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/e22e46e4e9a0bc49ae068749a1315e86?s=128&d=identicon&r=PG", "display_name": "Ryan Grush", "link": "https://stackoverflow.com/users/772309/ryan-grush"}, "edited": false, "score": 2, "creation_date": 1539795703, "post_id": 52859031, "comment_id": 92634749, "body": "oh I see the difference now. I just tried loading pry with <code>add_development_dependency</code> and using it outside of a generator and it worked. Thanks for helping to clear that up."}], "tags": [], "owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "is_accepted": false, "score": 2, "last_activity_date": 1539792672, "last_edit_date": 1592644375, "creation_date": 1539791813, "answer_id": 52859031, "question_id": 52844467, "link": "https://stackoverflow.com/questions/52844467/unable-to-require-gems-loaded-as-add-development-dependency/52859031#52859031", "title": "Unable to require gems loaded as add_development_dependency", "body": "<p>I think you misunderstand what &quot;development_dependency&quot; means: (This has nothing to do with your <code>rails</code> environment as most gems are not dependent on <code>rails</code> or environmental flags)</p>\n<p><a href=\"https://guides.rubygems.org/patterns/\" rel=\"nofollow noreferrer\">Taken From RubyGems Guide</a>:</p>\n<blockquote>\n<p><strong>DECLARING DEPENDENCIES</strong>...</p>\n<p><strong>Runtime vs. development</strong></p>\n<p>RubyGems provides two main \u201ctypes\u201d of dependencies: runtime and development. Runtime dependencies are what your gem needs to work (such as rails needing activesupport).</p>\n<p>Development dependencies are useful for when someone wants to make modifications to your gem. When you specify development dependencies, another developer can run <strong>gem install --dev your_gem</strong> and RubyGems will grab both sets of dependencies (runtime and development). Typical development dependencies include test frameworks and build systems.</p>\n<p>Setting dependencies in your gemspec is easy. Just use <strong>add_runtime_dependency</strong> and <strong>add_development_dependency</strong>:</p>\n</blockquote>\n<pre><code>Gem::Specification.new do |s|\n  s.name = &quot;hola&quot;\n  s.version = &quot;2.0.0&quot;\n  s.add_runtime_dependency &quot;daemons&quot;, [&quot;= 1.1.0&quot;]\n  s.add_development_dependency &quot;bourne&quot;, [&quot;&gt;= 0&quot;]\n</code></pre>\n<p>So since your gem needs <code>pry</code> to work, by your design, then <code>pry</code> would be a runtime_dependency. Either that or you need to put some trapping around this code to determine</p>\n<ul>\n<li>a) is <code>Rails</code> defined? and;</li>\n<li>b) Are we in the <code>development?</code> environment? and;</li>\n<li>c) Is <code>Pry</code> defined? or;</li>\n<li>d) can we load <code>pry</code> (rescue from <code>LoadError</code>)</li>\n</ul>\n"}], "owner": {"reputation": 1825, "user_id": 772309, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/e22e46e4e9a0bc49ae068749a1315e86?s=128&d=identicon&r=PG", "display_name": "Ryan Grush", "link": "https://stackoverflow.com/users/772309/ryan-grush"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 191, "favorite_count": 0, "accepted_answer_id": 52845072, "answer_count": 2, "score": 1, "last_activity_date": 1539792672, "creation_date": 1539726436, "last_edit_date": 1539733086, "question_id": 52844467, "link": "https://stackoverflow.com/questions/52844467/unable-to-require-gems-loaded-as-add-development-dependency", "title": "Unable to require gems loaded as add_development_dependency", "body": "<p>In my mygem.gemspec I have the following gem that I only want for the purposes of debugging my ruby gem - </p>\n\n<pre><code>Gem::Specification.new do |s|\n  ...\n  s.add_development_dependency \"pry\"\n  ...\nend\n</code></pre>\n\n<p>Then in my Rails generator file I have <code>require \"pry\"</code>, however I get the following error - </p>\n\n<pre><code>.rvm/gems/ruby-2.3.3/gems/activesupport-5.1.6/lib/active_support/dependencies.rb:292:in `require': cannot load such file -- pry (LoadError)\n</code></pre>\n\n<p>If I change <code>add_development_dependency</code> to <code>add_dependency</code> it works. Am I doing something wrong?</p>\n\n<p><em>Edit:</em></p>\n\n<p><em>lib/generators/mygem/install_generator.rb</em></p>\n\n<pre><code>require \"pry\"\n\nmodule MyGem\n  module Generators\n    class InstallGenerator &lt; Rails::Generators::Base\n\n      namespace \"mygem:install\"\n\n      def process\n        binding.pry\n      end\n\n    end\n  end\nend\n</code></pre>\n\n<p><em>full stack trace</em></p>\n\n<pre><code>$ rails g mygem:install\nRunning via Spring preloader in process 99478\n.rvm/gems/ruby-2.3.3/gems/activesupport-5.1.6/lib/active_support/dependencies.rb:292:in `require': cannot load such file -- pry (LoadError)\n  from .rvm/gems/ruby-2.3.3/gems/activesupport-5.1.6/lib/active_support/dependencies.rb:292:in `block in require'\n  from .rvm/gems/ruby-2.3.3/gems/activesupport-5.1.6/lib/active_support/dependencies.rb:258:in `load_dependency'\n  from .rvm/gems/ruby-2.3.3/gems/activesupport-5.1.6/lib/active_support/dependencies.rb:292:in `require'\n  from Projects/mygem/gem/mygem/lib/generators/cast/install_generator.rb:1:in `&lt;top (required)&gt;'\n  from .rvm/gems/ruby-2.3.3/gems/activesupport-5.1.6/lib/active_support/dependencies.rb:292:in `require'\n  from .rvm/gems/ruby-2.3.3/gems/activesupport-5.1.6/lib/active_support/dependencies.rb:292:in `block in require'\n  from .rvm/gems/ruby-2.3.3/gems/activesupport-5.1.6/lib/active_support/dependencies.rb:258:in `load_dependency'\n  from .rvm/gems/ruby-2.3.3/gems/activesupport-5.1.6/lib/active_support/dependencies.rb:292:in `require'\n  from .rvm/gems/ruby-2.3.3/gems/railties-5.1.6/lib/rails/command/behavior.rb:82:in `block (2 levels) in lookup'\n  from .rvm/gems/ruby-2.3.3/gems/railties-5.1.6/lib/rails/command/behavior.rb:78:in `each'\n  from .rvm/gems/ruby-2.3.3/gems/railties-5.1.6/lib/rails/command/behavior.rb:78:in `block in lookup'\n  from .rvm/gems/ruby-2.3.3/gems/railties-5.1.6/lib/rails/command/behavior.rb:77:in `each'\n  from .rvm/gems/ruby-2.3.3/gems/railties-5.1.6/lib/rails/command/behavior.rb:77:in `lookup'\n  from .rvm/gems/ruby-2.3.3/gems/railties-5.1.6/lib/rails/generators.rb:250:in `find_by_namespace'\n  from .rvm/gems/ruby-2.3.3/gems/railties-5.1.6/lib/rails/generators.rb:267:in `invoke'\n  from .rvm/gems/ruby-2.3.3/gems/railties-5.1.6/lib/rails/commands/generate/generate_command.rb:24:in `perform'\n  from .rvm/gems/ruby-2.3.3/gems/thor-0.20.0/lib/thor/command.rb:27:in `run'\n  from .rvm/gems/ruby-2.3.3/gems/thor-0.20.0/lib/thor/invocation.rb:126:in `invoke_command'\n  from .rvm/gems/ruby-2.3.3/gems/thor-0.20.0/lib/thor.rb:387:in `dispatch'\n  from .rvm/gems/ruby-2.3.3/gems/railties-5.1.6/lib/rails/command/base.rb:63:in `perform'\n  from .rvm/gems/ruby-2.3.3/gems/railties-5.1.6/lib/rails/command.rb:44:in `invoke'\n  from .rvm/gems/ruby-2.3.3/gems/railties-5.1.6/lib/rails/commands.rb:16:in `&lt;top (required)&gt;'\n  from .rvm/gems/ruby-2.3.3/gems/activesupport-5.1.6/lib/active_support/dependencies.rb:292:in `require'\n  from .rvm/gems/ruby-2.3.3/gems/activesupport-5.1.6/lib/active_support/dependencies.rb:292:in `block in require'\n  from .rvm/gems/ruby-2.3.3/gems/activesupport-5.1.6/lib/active_support/dependencies.rb:258:in `load_dependency'\n  from .rvm/gems/ruby-2.3.3/gems/activesupport-5.1.6/lib/active_support/dependencies.rb:292:in `require'\n  from Projects/mygem/themes/sample/bin/rails:9:in `&lt;top (required)&gt;'\n  from .rvm/gems/ruby-2.3.3/gems/activesupport-5.1.6/lib/active_support/dependencies.rb:286:in `load'\n  from .rvm/gems/ruby-2.3.3/gems/activesupport-5.1.6/lib/active_support/dependencies.rb:286:in `block in load'\n  from .rvm/gems/ruby-2.3.3/gems/activesupport-5.1.6/lib/active_support/dependencies.rb:258:in `load_dependency'\n  from .rvm/gems/ruby-2.3.3/gems/activesupport-5.1.6/lib/active_support/dependencies.rb:286:in `load'\n  from .rvm/rubies/ruby-2.3.3/lib/ruby/site_ruby/2.3.0/rubygems/core_ext/kernel_require.rb:59:in `require'\n  from .rvm/rubies/ruby-2.3.3/lib/ruby/site_ruby/2.3.0/rubygems/core_ext/kernel_require.rb:59:in `require'\n  from -e:1:in `&lt;main&gt;'\n</code></pre>\n\n<p><em>Edit:</em></p>\n\n<p>Here's a sample gem with the problem - <a href=\"https://github.com/ryangrush/stackoverflow_ruby_gem\" rel=\"nofollow noreferrer\">https://github.com/ryangrush/stackoverflow_ruby_gem</a></p>\n"}, {"tags": ["ruby", "heroku"], "comments": [{"owner": {"reputation": 8733, "user_id": 3625433, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/N7qK6.png?s=128&g=1", "display_name": "lacostenycoder", "link": "https://stackoverflow.com/users/3625433/lacostenycoder"}, "edited": false, "score": 0, "creation_date": 1539726399, "post_id": 52844332, "comment_id": 92604973, "body": "do you have ruby version set in your Gemfile?"}, {"owner": {"reputation": 504, "user_id": 4357700, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/0e0c2f562f1ed55fab85f543069b8a40?s=128&d=identicon&r=PG&f=1", "display_name": "Bastien", "link": "https://stackoverflow.com/users/4357700/bastien"}, "reply_to_user": {"reputation": 8733, "user_id": 3625433, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/N7qK6.png?s=128&g=1", "display_name": "lacostenycoder", "link": "https://stackoverflow.com/users/3625433/lacostenycoder"}, "edited": false, "score": 0, "creation_date": 1539731674, "post_id": 52844332, "comment_id": 92606407, "body": "No specific version is specified in the Gemfile."}, {"owner": {"reputation": 8733, "user_id": 3625433, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/N7qK6.png?s=128&g=1", "display_name": "lacostenycoder", "link": "https://stackoverflow.com/users/3625433/lacostenycoder"}, "edited": false, "score": 1, "creation_date": 1539731733, "post_id": 52844332, "comment_id": 92606420, "body": "well try adding one <code>ruby &#39;2.5.1&#39;</code> at top or bottom of your Gemfile"}, {"owner": {"reputation": 7032, "user_id": 1743174, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/9f871161f754442df697dce1cede77a5?s=128&d=identicon&r=PG&f=1", "display_name": "Dipak Gupta", "link": "https://stackoverflow.com/users/1743174/dipak-gupta"}, "edited": false, "score": 0, "creation_date": 1552036594, "post_id": 52844332, "comment_id": 96868340, "body": "You can downgrade heroku stack to solve this issue. Solution can be found here <a href=\"https://stackoverflow.com/questions/53354444/how-can-i-solve-this-trouble-to-deploy-a-rails-app-to-heroku?answertab=active#tab-top\" title=\"how can i solve this trouble to deploy a rails app to heroku\">stackoverflow.com/questions/53354444/&hellip;</a>"}], "owner": {"reputation": 504, "user_id": 4357700, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/0e0c2f562f1ed55fab85f543069b8a40?s=128&d=identicon&r=PG&f=1", "display_name": "Bastien", "link": "https://stackoverflow.com/users/4357700/bastien"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 93, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1552035941, "creation_date": 1539725580, "last_edit_date": 1539725988, "question_id": 52844332, "link": "https://stackoverflow.com/questions/52844332/heroku-different-ruby-versions-locally-and-on-heroku", "title": "Heroku: different ruby versions locally and on heroku", "body": "<p>I am struggling to push a new version of my app on Heroku. I receive error messages related to the version of ruby used:</p>\n\n<p>When I type</p>\n\n<pre><code>ruby-v\n</code></pre>\n\n<p>I get</p>\n\n<pre><code>ruby 2.5.1p57\n</code></pre>\n\n<p>However, when I push git via git push heroku master, I have the following erros:</p>\n\n<pre><code>remote:        Command: 'set -o pipefail; curl -L --fail --retry 5 --retry-delay 1 --connect-timeout 3 --max-time 30 https://s3-external-1.amazonaws.com/heroku-buildpack-ruby/heroku-18/ruby-2.2.6.tgz -s -o - | tar zxf - ' failed on attempt 1 of 3.\nremote:        Command: 'set -o pipefail; curl -L --fail --retry 5 --retry-delay 1 --connect-timeout 3 --max-time 30 https://s3-external-1.amazonaws.com/heroku-buildpack-ruby/heroku-18/ruby-2.2.6.tgz -s -o - | tar zxf - ' failed on attempt 2 of 3.\n\nremote: ! An error occured while installing ruby-2.2.6\nremote: ! This version of Ruby is not available on Heroku-18.\n</code></pre>\n\n<p>Why is heroku trying to install ruby-2.2.6? How can I have it installed ruby 2.5.1p15? How can I fix this issue?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-3", "carrierwave", "cloudinary"], "comments": [{"owner": {"reputation": 8733, "user_id": 3625433, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/N7qK6.png?s=128&g=1", "display_name": "lacostenycoder", "link": "https://stackoverflow.com/users/3625433/lacostenycoder"}, "edited": false, "score": 0, "creation_date": 1539726087, "post_id": 52844142, "comment_id": 92604870, "body": "what do we expect <code>@applicant.resume</code> to return? Also, what error messages do you get with your current code?"}, {"owner": {"reputation": 391, "user_id": 9118625, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/24c0b4ff94e144c7c384b51e1e632cce?s=128&d=identicon&r=PG&f=1", "display_name": "Hakeem Baba", "link": "https://stackoverflow.com/users/9118625/hakeem-baba"}, "reply_to_user": {"reputation": 8733, "user_id": 3625433, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/N7qK6.png?s=128&g=1", "display_name": "lacostenycoder", "link": "https://stackoverflow.com/users/3625433/lacostenycoder"}, "edited": false, "score": 0, "creation_date": 1539726773, "post_id": 52844142, "comment_id": 92605091, "body": "@applicant.resume return the url to download the file from cloudinary. The current code send the email just fine but the @applicant.resume(resume) is not an attachment in the email. But i want it to be an attachment"}], "answers": [{"comments": [{"owner": {"reputation": 391, "user_id": 9118625, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/24c0b4ff94e144c7c384b51e1e632cce?s=128&d=identicon&r=PG&f=1", "display_name": "Hakeem Baba", "link": "https://stackoverflow.com/users/9118625/hakeem-baba"}, "edited": false, "score": 0, "creation_date": 1539801004, "post_id": 52844647, "comment_id": 92637293, "body": "it is not working. I get the following error &quot;no implicit conversion of ResumeUploader into String&quot;"}, {"owner": {"reputation": 8733, "user_id": 3625433, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/N7qK6.png?s=128&g=1", "display_name": "lacostenycoder", "link": "https://stackoverflow.com/users/3625433/lacostenycoder"}, "reply_to_user": {"reputation": 391, "user_id": 9118625, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/24c0b4ff94e144c7c384b51e1e632cce?s=128&d=identicon&r=PG&f=1", "display_name": "Hakeem Baba", "link": "https://stackoverflow.com/users/9118625/hakeem-baba"}, "edited": false, "score": 0, "creation_date": 1539801425, "post_id": 52844647, "comment_id": 92637481, "body": "hard to tell without seeing full stack trace but what happens if your remove <code>&lt;p&gt;Resume: &lt;%= image_tag @applicant.resume %&gt;&lt;&#47;p&gt;</code> does the email work and attach the file? If not, I suspect <code>@applicant.resume</code> is not what you think it is. What type of object is <code>@applicant</code> and is <code>.resume</code> a method? a relation? We can only guess with the info you&#39;ve provided."}, {"owner": {"reputation": 391, "user_id": 9118625, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/24c0b4ff94e144c7c384b51e1e632cce?s=128&d=identicon&r=PG&f=1", "display_name": "Hakeem Baba", "link": "https://stackoverflow.com/users/9118625/hakeem-baba"}, "edited": false, "score": 0, "creation_date": 1539968459, "post_id": 52844647, "comment_id": 92706242, "body": "@applicant is an instance variable of the model Applicant and .resume is a Carrierwave object that is a column field in the Applicant model."}, {"owner": {"reputation": 8733, "user_id": 3625433, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/N7qK6.png?s=128&g=1", "display_name": "lacostenycoder", "link": "https://stackoverflow.com/users/3625433/lacostenycoder"}, "reply_to_user": {"reputation": 391, "user_id": 9118625, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/24c0b4ff94e144c7c384b51e1e632cce?s=128&d=identicon&r=PG&f=1", "display_name": "Hakeem Baba", "link": "https://stackoverflow.com/users/9118625/hakeem-baba"}, "edited": false, "score": 0, "creation_date": 1539982007, "post_id": 52844647, "comment_id": 92711608, "body": "update your question to show related code in Applicant model and add full stack trace of your errors."}], "tags": [], "owner": {"reputation": 8733, "user_id": 3625433, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/N7qK6.png?s=128&g=1", "display_name": "lacostenycoder", "link": "https://stackoverflow.com/users/3625433/lacostenycoder"}, "is_accepted": false, "score": 0, "last_activity_date": 1539727590, "creation_date": 1539727590, "answer_id": 52844647, "question_id": 52844142, "link": "https://stackoverflow.com/questions/52844142/how-to-add-cloudinary-file-as-email-attachment-in-actionmailer/52844647#52844647", "title": "How to add cloudinary file as email attachment in ActionMailer", "body": "<p>Something like this should work. I don't think you need that helper</p>\n\n<pre><code>class ApplicantMailer &lt; ApplicationMailer    \n  def applicant_info(applicant)\n    @applicant = applicant\n    attachments[ open(applicant.resume) ]\n    mail(to: @applicant.job.email, subject: 'Applicant Details')\n  end\n end\n</code></pre>\n\n<h3>template</h3>\n\n<pre><code>&lt;p&gt;Hi Recruiter, in this email, you would find the resume of the latest applicant&lt;/p&gt;\n&lt;p&gt;Resume: &lt;%= image_tag @applicant.resume %&gt;&lt;/p&gt;\n</code></pre>\n"}], "owner": {"reputation": 391, "user_id": 9118625, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/24c0b4ff94e144c7c384b51e1e632cce?s=128&d=identicon&r=PG&f=1", "display_name": "Hakeem Baba", "link": "https://stackoverflow.com/users/9118625/hakeem-baba"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 87, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1539727590, "creation_date": 1539724482, "question_id": 52844142, "link": "https://stackoverflow.com/questions/52844142/how-to-add-cloudinary-file-as-email-attachment-in-actionmailer", "title": "How to add cloudinary file as email attachment in ActionMailer", "body": "<p>I am building a job application in Rails and I need to attach resumes(cv) that are uploaded in a job application as an email attachment. All files in the application are uploaded to Cloudinary using CarrierWave. Emails are handled by Action Mailer. In ActionMailer, I have </p>\n\n<pre><code>  class ApplicantMailer &lt; ApplicationMailer    \n      def applicant_info(applicant)\n        @applicant = applicant\n        mail(to: @applicant.job.email, subject: 'Applicant Details')\n      end\n   end\n</code></pre>\n\n<p>In my mailer view template, I have </p>\n\n<pre><code>&lt;p&gt;Hi Recruiter, in this email, you would find the resume of the latest applicant&lt;/p&gt;\n&lt;p&gt;Resume: &lt;%= cl_image_tag(@applicant.resume, :attachment=&gt;true) %&gt;&lt;/p&gt;\n</code></pre>\n\n<p>At the moment, this does not render the cloudinary file as an attachment in the email. I need to be able to render the resume as a readable attachment file. </p>\n"}, {"tags": ["ruby", "regex", "sensu"], "comments": [{"owner": {"reputation": 208794, "user_id": 229044, "user_type": "moderator", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/591426cbbacd4025d920467bad356911?s=128&d=identicon&r=PG&f=1", "display_name": "meagar", "link": "https://stackoverflow.com/users/229044/meagar"}, "edited": false, "score": 1, "creation_date": 1539722098, "post_id": 52843620, "comment_id": 92603262, "body": "That&#39;s not what regex is for, just <a href=\"https://stackoverflow.com/questions/18668556/comparing-numbers-in-bash\">compare the two numbers</a>."}, {"owner": {"reputation": 187, "user_id": 5880560, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/XT7TH.png?s=128&g=1", "display_name": "Devon", "link": "https://stackoverflow.com/users/5880560/devon"}, "reply_to_user": {"reputation": 208794, "user_id": 229044, "user_type": "moderator", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/591426cbbacd4025d920467bad356911?s=128&d=identicon&r=PG&f=1", "display_name": "meagar", "link": "https://stackoverflow.com/users/229044/meagar"}, "edited": false, "score": 0, "creation_date": 1539727618, "post_id": 52843620, "comment_id": 92605337, "body": "Thank you.. decided to create a bash script instead.. agreed on use of regex"}], "answers": [{"tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user557597"}, "is_accepted": true, "score": 1, "last_activity_date": 1539723148, "creation_date": 1539723148, "answer_id": 52843892, "question_id": 52843620, "link": "https://stackoverflow.com/questions/52843620/trying-to-get-a-regex-value-for-30-000/52843892#52843892", "title": "Trying to get a regex value for &gt; 30,000", "body": "<p>> 30000 = <code>3\\d{3}[1-9]|[4-9]\\d{4}|[1-9]\\d{5,17}|[1-8]\\d{18}|9\\d{18,}</code>  </p>\n\n<p>Add boundary conditions where needed.</p>\n"}], "owner": {"reputation": 187, "user_id": 5880560, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/XT7TH.png?s=128&g=1", "display_name": "Devon", "link": "https://stackoverflow.com/users/5880560/devon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 75, "favorite_count": 0, "accepted_answer_id": 52843892, "answer_count": 1, "score": 0, "last_activity_date": 1539723148, "creation_date": 1539721825, "question_id": 52843620, "link": "https://stackoverflow.com/questions/52843620/trying-to-get-a-regex-value-for-30-000", "title": "Trying to get a regex value for &gt; 30,000", "body": "<p>I'm using this sensu plugin <a href=\"https://github.com/sensu-plugins/sensu-plugins-process-checks/blob/master/bin/check-cmd.rb\" rel=\"nofollow noreferrer\">https://github.com/sensu-plugins/sensu-plugins-process-checks/blob/master/bin/check-cmd.rb</a> </p>\n\n<p>to run</p>\n\n<pre><code>sudo lsof | grep couchbase | grep ESTABLISHED | wc -l\n</code></pre>\n\n<p>I'm trying to come up with a regex for the output. I want it to alert if the value is over 30,000 connections. </p>\n\n<p>What would be the regex I can use?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "callback", "spree"], "comments": [{"owner": {"reputation": 18856, "user_id": 1359650, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/dffc4318ac93e728a26c8e8b51b4eb37?s=128&d=identicon&r=PG", "display_name": "jvillian", "link": "https://stackoverflow.com/users/1359650/jvillian"}, "edited": false, "score": 0, "creation_date": 1539721292, "post_id": 52843274, "comment_id": 92602888, "body": "Out of curiosity, could you make <code>post_initialize</code> a <code>before_action</code>? It seems like it would occur after initialization, but before the named action(s). No?"}, {"owner": {"reputation": 119, "user_id": 2551042, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/620d2579ad942fbb5fd0957bebfa783b?s=128&d=identicon&r=PG", "display_name": "dmferrari", "link": "https://stackoverflow.com/users/2551042/dmferrari"}, "reply_to_user": {"reputation": 18856, "user_id": 1359650, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/dffc4318ac93e728a26c8e8b51b4eb37?s=128&d=identicon&r=PG", "display_name": "jvillian", "link": "https://stackoverflow.com/users/1359650/jvillian"}, "edited": false, "score": 0, "creation_date": 1539721969, "post_id": 52843274, "comment_id": 92603200, "body": "Per your suggestion I have changed the callback, but the result seems to be the same."}, {"owner": {"reputation": 18856, "user_id": 1359650, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/dffc4318ac93e728a26c8e8b51b4eb37?s=128&d=identicon&r=PG", "display_name": "jvillian", "link": "https://stackoverflow.com/users/1359650/jvillian"}, "edited": false, "score": 0, "creation_date": 1539722339, "post_id": 52843274, "comment_id": 92603359, "body": "In the link you provided, I don&#39;t see <code>class_eval do</code> appended to the class name. Am I missing that? It looks rather unusual (perhaps something extra clever that I am unaware of). Oh, and you did <code>before_action :post_initialize</code> (limiting it to specific actions as appropriate)?"}, {"owner": {"reputation": 119, "user_id": 2551042, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/620d2579ad942fbb5fd0957bebfa783b?s=128&d=identicon&r=PG", "display_name": "dmferrari", "link": "https://stackoverflow.com/users/2551042/dmferrari"}, "reply_to_user": {"reputation": 18856, "user_id": 1359650, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/dffc4318ac93e728a26c8e8b51b4eb37?s=128&d=identicon&r=PG", "display_name": "jvillian", "link": "https://stackoverflow.com/users/1359650/jvillian"}, "edited": false, "score": 0, "creation_date": 1539722423, "post_id": 52843274, "comment_id": 92603396, "body": "The <code>class_eval</code> is a way to make changes (override or add methods) to an existent class. In this case, this class is part of a gem that I want to modify."}, {"owner": {"reputation": 8640, "user_id": 4055042, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/cd04c63d95d27033b53d4d83fea40c02?s=128&d=identicon&r=PG&f=1", "display_name": "SRack", "link": "https://stackoverflow.com/users/4055042/srack"}, "edited": false, "score": 0, "creation_date": 1539774640, "post_id": 52843274, "comment_id": 92622090, "body": "When you&#39;re referring to using <code>initialize</code>, is this an action or are you calling it on an instance (e.g. <code>Report.new</code> will fire the report&#39;s <code>initialize</code> method)?"}, {"owner": {"reputation": 119, "user_id": 2551042, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/620d2579ad942fbb5fd0957bebfa783b?s=128&d=identicon&r=PG", "display_name": "dmferrari", "link": "https://stackoverflow.com/users/2551042/dmferrari"}, "edited": false, "score": 0, "creation_date": 1539778533, "post_id": 52843274, "comment_id": 92624413, "body": "I am calling this on an instance"}], "answers": [{"comments": [{"owner": {"reputation": 119, "user_id": 2551042, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/620d2579ad942fbb5fd0957bebfa783b?s=128&d=identicon&r=PG", "display_name": "dmferrari", "link": "https://stackoverflow.com/users/2551042/dmferrari"}, "edited": false, "score": 0, "creation_date": 1539782478, "post_id": 52844645, "comment_id": 92626913, "body": "I have tried both. The first completely replaces the method in the decorated controller (the one from Spree), and the second doesn&#39;t get executed. I guess I will have to override the <code>initialize</code> method."}, {"owner": {"reputation": 943, "user_id": 546950, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60de781d84a6767b10c5040c54180433?s=128&d=identicon&r=PG", "display_name": "robertoplancarte", "link": "https://stackoverflow.com/users/546950/robertoplancarte"}, "reply_to_user": {"reputation": 119, "user_id": 2551042, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/620d2579ad942fbb5fd0957bebfa783b?s=128&d=identicon&r=PG", "display_name": "dmferrari", "link": "https://stackoverflow.com/users/2551042/dmferrari"}, "edited": false, "score": 0, "creation_date": 1539790653, "post_id": 52844645, "comment_id": 92632219, "body": "For the second one to run you will need to change the route in the config/routes.rb so that it uses the subclass controller. I&#39;m guessing spree sets up its own routes but you could add it in the file before the spree routes since the routes get evaluated in order and the first to match is the one that runs."}], "tags": [], "owner": {"reputation": 943, "user_id": 546950, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60de781d84a6767b10c5040c54180433?s=128&d=identicon&r=PG", "display_name": "robertoplancarte", "link": "https://stackoverflow.com/users/546950/robertoplancarte"}, "is_accepted": true, "score": 1, "last_activity_date": 1539727582, "creation_date": 1539727582, "answer_id": 52844645, "question_id": 52843274, "link": "https://stackoverflow.com/questions/52843274/ruby-on-rails-run-callback-code-after-initialize-method-in-class/52844645#52844645", "title": "Ruby on Rails - Run callback code after initialize method in class", "body": "<p>Rails uses the <code>before</code>, <code>after</code> and <code>around</code> <code>_action</code> filters only on <a href=\"https://guides.rubyonrails.org/action_controller_overview.html#methods-and-actions\" rel=\"nofollow noreferrer\">\"actions\"</a>. Restfull controllers should only define 7 <a href=\"http://www.informit.com/articles/article.aspx?p=1671632&amp;seqNum=5\" rel=\"nofollow noreferrer\">actions</a>:</p>\n\n<ol>\n<li>show</li>\n<li>index</li>\n<li>edit</li>\n<li>update</li>\n<li>new</li>\n<li>create</li>\n<li>destroy</li>\n</ol>\n\n<p>Usually controllers don't define an <code>initialize</code> action, although they do inherit an <code>initialize</code> method from their parent class. That is to say there is no route in rails that will go to the initialize method of a controller. Since there is no <code>initialize</code> action to run when you open the <code>index</code> action of <code>Spree::Admin::ReportsController</code> the <code>post_initialize</code> filter is never run.</p>\n\n<p>Rails has no after_initialize callback for its controllers, only for its models. If you want to add code to the initialize function of the controller you can reopen the class and overwrite the initializer (not recomended) or subclass the controller and call super in the new initializer and add you code afterwords.</p>\n\n<pre><code>Spree::Admin::ReportsController.class_eval do\n  def initialize\n    super\n    Spree::Admin::ReportsController.add_available_report!(:custom_sales_total)\n  end\nend\n</code></pre>\n\n<p>or</p>\n\n<pre><code>class CustomSalesTotalController &lt; Spree::Admin::ReportsController\n  def initialize\n    super\n    Spree::Admin::ReportsController.add_available_report!(:custom_sales_total)\n  end\nend\n</code></pre>\n\n<p>Which is actually what Spree is doing <a href=\"https://github.com/spree/spree/blob/bada1e83a96e08dd08a0b65c0f0e627964c9d15a/backend/app/controllers/spree/admin/reports_controller.rb\" rel=\"nofollow noreferrer\">under the hood</a>.</p>\n"}], "owner": {"reputation": 119, "user_id": 2551042, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/620d2579ad942fbb5fd0957bebfa783b?s=128&d=identicon&r=PG", "display_name": "dmferrari", "link": "https://stackoverflow.com/users/2551042/dmferrari"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 876, "favorite_count": 0, "accepted_answer_id": 52844645, "answer_count": 1, "score": 1, "last_activity_date": 1539727582, "creation_date": 1539720295, "last_edit_date": 1539720631, "question_id": 52843274, "link": "https://stackoverflow.com/questions/52843274/ruby-on-rails-run-callback-code-after-initialize-method-in-class", "title": "Ruby on Rails - Run callback code after initialize method in class", "body": "<p>I am using Ruby on Rails 5.2 with ruby 2.4.2p198</p>\n\n<p>Let's say I have a controller (for example this: <a href=\"https://github.com/spree/spree/blob/3-6-stable/backend/app/controllers/spree/admin/reports_controller.rb\" rel=\"nofollow noreferrer\">https://github.com/spree/spree/blob/3-6-stable/backend/app/controllers/spree/admin/reports_controller.rb</a>) and I want to run some code using a callback after the <code>initialize</code> method.</p>\n\n<p>For this, I've created a decorator (for example: <code>reports_controller_decorator.rb</code>) and added the method that I want to run in the <code>after_action</code>callback.</p>\n\n<p>My issue is that this works (the method is called) if I use the callback on the <code>index</code> method, but it doesn't work if I pass the <code>initialize</code> method as parameter in the callback:</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code># It works (note the index method in the callback parameter)\nSpree::Admin::ReportsController.class_eval do\n  after_action :post_initialize, only: :index\n\n  def post_initialize\n    Spree::Admin::ReportsController.add_available_report!(:custom_sales_total)\n  end\nend\n</code></pre>\n\n<pre class=\"lang-rb prettyprint-override\"><code># It doesn't (note the initialize method in the callback parameter)\nSpree::Admin::ReportsController.class_eval do\n  after_action :post_initialize, only: :initialize\n\n  def post_initialize\n    Spree::Admin::ReportsController.add_available_report!(:custom_sales_total)\n  end\nend\n</code></pre>\n\n<p>What am I doing wrong? Is possible to run callbacks after the <code>initialize</code> method?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "saml", "omniauth", "saml-2.0"], "answers": [{"tags": [], "owner": {"reputation": 336, "user_id": 3158545, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tnZj7.png?s=128&g=1", "display_name": "keoghpe", "link": "https://stackoverflow.com/users/3158545/keoghpe"}, "is_accepted": false, "score": 0, "last_activity_date": 1539787982, "creation_date": 1539787982, "answer_id": 52857796, "question_id": 52843270, "link": "https://stackoverflow.com/questions/52843270/omniauth-saml-subjectconfirmationdata-is-missing-child-field/52857796#52857796", "title": "Omniauth SAML SubjectConfirmationData is missing child field", "body": "<p>It looks like in this instance, the customers SAML was invalid and the library did the right thing.</p>\n"}], "owner": {"reputation": 336, "user_id": 3158545, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tnZj7.png?s=128&g=1", "display_name": "keoghpe", "link": "https://stackoverflow.com/users/3158545/keoghpe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 53, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1539787982, "creation_date": 1539720274, "question_id": 52843270, "link": "https://stackoverflow.com/questions/52843270/omniauth-saml-subjectconfirmationdata-is-missing-child-field", "title": "Omniauth SAML SubjectConfirmationData is missing child field", "body": "<p>I'm getting the following error with Omniauth SAML and I don't know how to debug it any further.</p>\n\n<pre><code>Authentication failure! invalid_ticket: OneLogin::RubySaml::ValidationError, 6:0: ERROR: Element '{urn:oasis:names:tc:SAML:2.0:assertion}SubjectConfirmationData': Missing child element(s). Expected is ( {http://www.w3.org/2000/09/xmldsig#}KeyInfo ).\n</code></pre>\n\n<p>I've tried adding skip_receipient_check but that doesn't seem to affect this issue.</p>\n\n<p>Any ideas?</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1539725370, "post_id": 52842972, "comment_id": 92604604, "body": "I assumed, as per your example, that you wanted to use a single ampersand operator, but you awarded the greenie to an answer that does the conventional thing, chaining two calculations that each make use of an ampersand operator. Please clarify."}, {"owner": {"reputation": 184, "user_id": 3438158, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/c82a1bbc325f75c273118ad99c45bcd3?s=128&d=identicon&r=PG&f=1", "display_name": "intmarinoreturn0", "link": "https://stackoverflow.com/users/3438158/intmarinoreturn0"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1539978135, "post_id": 52842972, "comment_id": 92710317, "body": "No, I didn&#39;t want a single ampersand, just a way to chain the calls of <code>bar</code> and <code>baz</code>. But you answer work for me, as the accepted one. thank you"}], "answers": [{"comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1539722618, "post_id": 52843011, "comment_id": 92603458, "body": "This does not answer the question; it&#39;s a work-around."}, {"owner": {"reputation": 4005, "user_id": 4200092, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/saOd8.png?s=128&g=1", "display_name": "GoBusto", "link": "https://stackoverflow.com/users/4200092/gobusto"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 2, "creation_date": 1539724438, "post_id": 52843011, "comment_id": 92604216, "body": "@CarySwoveland The question was <b>&quot;Is there any way to use more than one attribute/method with ampersand colon operator in Ruby?&quot;</b> and this answer shows how you do that."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1539725386, "post_id": 52843011, "comment_id": 92604611, "body": "I&#39;ve asked the OP for clarification. btw, why do you assume that <code>foos.map(&amp;:bar).each(&amp;:baz)</code> is wanted, rather than <code>foos.each(&amp;:bar).map(&amp;:baz)</code> or <code>foos.each(&amp;:bar).each(&amp;:baz)</code>? I realize <code>each</code> returns its receiver but it can also have side effects."}], "tags": [], "owner": {"reputation": 4005, "user_id": 4200092, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/saOd8.png?s=128&g=1", "display_name": "GoBusto", "link": "https://stackoverflow.com/users/4200092/gobusto"}, "is_accepted": true, "score": 5, "last_activity_date": 1539719149, "creation_date": 1539719149, "answer_id": 52843011, "question_id": 52842972, "link": "https://stackoverflow.com/questions/52842972/is-there-any-way-to-use-more-than-one-attribute-method-with-ampersand-colon-oper/52843011#52843011", "title": "Is there any way to use more than one attribute/method with ampersand colon operator in Ruby?", "body": "<p>Use <a href=\"https://ruby-doc.org/core-2.5.1/Array.html#method-i-map\" rel=\"noreferrer\"><code>.map</code></a>:</p>\n\n<pre><code>foos.map(&amp;:bar).each(&amp;:baz)\n</code></pre>\n\n<p>This will turn your array of <code>foo</code> items into an array of <code>bar</code> items, allowing you to call <code>.each</code> on that instead.</p>\n"}, {"tags": [], "owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "is_accepted": false, "score": 2, "last_activity_date": 1539719379, "creation_date": 1539719379, "answer_id": 52843070, "question_id": 52842972, "link": "https://stackoverflow.com/questions/52842972/is-there-any-way-to-use-more-than-one-attribute-method-with-ampersand-colon-oper/52843070#52843070", "title": "Is there any way to use more than one attribute/method with ampersand colon operator in Ruby?", "body": "<blockquote>\n  <p>Is it possible with ampersand colon operator</p>\n</blockquote>\n\n<p>No. Primarily because there's no such thing as \"ampersand colon operator\". This</p>\n\n<pre><code>foos.each(&amp;:bar)\n</code></pre>\n\n<p>is a shorter way of writing this</p>\n\n<pre><code>sym = :bar\nfoos.each(&amp;sym)\n</code></pre>\n\n<p>Also see other answers for alternatives.</p>\n"}, {"comments": [{"owner": {"reputation": 3523, "user_id": 9043475, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FNxvn.jpg?s=128&g=1", "display_name": "Rajagopalan", "link": "https://stackoverflow.com/users/9043475/rajagopalan"}, "edited": false, "score": 0, "creation_date": 1539780181, "post_id": 52844138, "comment_id": 92625431, "body": "I am very happy to have you here ! Thanks for sharing your knowledge."}, {"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1539793999, "post_id": 52844138, "comment_id": 92633976, "body": "Additionally we can go with all the fun everyone had <a href=\"https://stackoverflow.com/questions/34579603/chaining-to-proc-on-symbol\">Here</a> or the insanity of <a href=\"https://github.com/cyoce/J-uby\" rel=\"nofollow noreferrer\"><code>J-uby</code></a>"}, {"owner": {"reputation": 184, "user_id": 3438158, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/c82a1bbc325f75c273118ad99c45bcd3?s=128&d=identicon&r=PG&f=1", "display_name": "intmarinoreturn0", "link": "https://stackoverflow.com/users/3438158/intmarinoreturn0"}, "edited": false, "score": 0, "creation_date": 1539978433, "post_id": 52844138, "comment_id": 92710435, "body": "It is another interesting way to do what I wanted. Besides that, yours and Sergio  explanation made me understand better the <code>&amp;</code> operator. As the GoBusto answer also resolve my question I will keep it. Thank you"}], "tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": false, "score": 3, "last_activity_date": 1539812792, "last_edit_date": 1539812792, "creation_date": 1539724476, "answer_id": 52844138, "question_id": 52842972, "link": "https://stackoverflow.com/questions/52842972/is-there-any-way-to-use-more-than-one-attribute-method-with-ampersand-colon-oper/52844138#52844138", "title": "Is there any way to use more than one attribute/method with ampersand colon operator in Ruby?", "body": "<p><a href=\"http://ruby-doc.org/core-2.5.1/Array.html#method-i-each\" rel=\"nofollow noreferrer\">Array#each</a> returns its receiver, so it may not be the best example of what you are looking for. Suppose we have</p>\n\n<pre><code>arr = [['a', 'b'], ['c', 'd']]\n</code></pre>\n\n<p>and want</p>\n\n<pre><code>arr.map(&amp;:first).map(&amp;:upcase)\n  #=&gt; [\"A\", \"C\"]\n</code></pre>\n\n<p>To use a single ampersand one could write</p>\n\n<pre><code>arr.map(&amp;Proc.new { |e| e.first.upcase })\n  #=&gt; [\"A\", \"C\"]\n</code></pre>\n\n<p><code>&amp;</code> converts the proc to a block, causing</p>\n\n<pre><code>arr.map { |e| e.first.upcase }\n</code></pre>\n\n<p>to be executed.</p>\n"}, {"comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1539812557, "post_id": 52853060, "comment_id": 92642350, "body": "Why <code>map</code> rather than <code>each</code>? Based on the information given in the question can we conclude which is correct?"}, {"owner": {"reputation": 5449, "user_id": 681520, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/701baebf68d1d7faa9f9def6a24fe356?s=128&d=identicon&r=PG", "display_name": "Kimmo Lehto", "link": "https://stackoverflow.com/users/681520/kimmo-lehto"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1539863615, "post_id": 52853060, "comment_id": 92660198, "body": "No reason, changed to each."}], "tags": [], "owner": {"reputation": 5449, "user_id": 681520, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/701baebf68d1d7faa9f9def6a24fe356?s=128&d=identicon&r=PG", "display_name": "Kimmo Lehto", "link": "https://stackoverflow.com/users/681520/kimmo-lehto"}, "is_accepted": false, "score": 1, "last_activity_date": 1539863601, "last_edit_date": 1539863601, "creation_date": 1539773160, "answer_id": 52853060, "question_id": 52842972, "link": "https://stackoverflow.com/questions/52842972/is-there-any-way-to-use-more-than-one-attribute-method-with-ampersand-colon-oper/52853060#52853060", "title": "Is there any way to use more than one attribute/method with ampersand colon operator in Ruby?", "body": "<p>The best option is to just use the regular block syntax:</p>\n\n<pre><code>foos.each { |foo| foo.bar.baz }\n</code></pre>\n\n<p>If you still want to use the <code>&amp;:sym</code> type of syntax, for example because the method names are dynamic, you can check out the <a href=\"https://github.com/baweaver/xf\" rel=\"nofollow noreferrer\">Xf</a> gem. It enables you to do:</p>\n\n<pre><code>foos.each(&amp;Xf.pipe(:bar, :baz))\n</code></pre>\n\n<p>You can replicate the functionality without including the gem simply by borrowing the <a href=\"https://github.com/baweaver/xf/blob/master/lib/xf/public_api.rb#L20-L26\" rel=\"nofollow noreferrer\"><code>pipe</code></a> method:</p>\n\n<pre><code>def pipe(*fns)\n  Proc.new do |target|\n    new_value = target\n    fns.each { |fn| new_value = fn.to_proc.call(new_value) }\n    new_value\n  end\nend\n\nrequire 'ostruct'\n# openstruct used to emulate objects that would respond to .foo.bar\nfoos = []\nfoos &lt;&lt; OpenStruct.new(foo: OpenStruct.new(bar: 'hello'))\nfoos &lt;&lt; OpenStruct.new(foo: OpenStruct.new(bar: 'world'))\nfoos.each(&amp;pipe(:foo, :bar))\n</code></pre>\n"}], "owner": {"reputation": 184, "user_id": 3438158, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/c82a1bbc325f75c273118ad99c45bcd3?s=128&d=identicon&r=PG&f=1", "display_name": "intmarinoreturn0", "link": "https://stackoverflow.com/users/3438158/intmarinoreturn0"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 85, "favorite_count": 0, "accepted_answer_id": 52843011, "answer_count": 4, "score": 2, "last_activity_date": 1539863601, "creation_date": 1539719004, "last_edit_date": 1539719449, "question_id": 52842972, "link": "https://stackoverflow.com/questions/52842972/is-there-any-way-to-use-more-than-one-attribute-method-with-ampersand-colon-oper", "title": "Is there any way to use more than one attribute/method with ampersand colon operator in Ruby?", "body": "<p>It would be something like this: Given an array of <code>foo</code> objects with an attribute <code>bar</code> which also has an attribute called <code>baz</code>:</p>\n\n<pre><code>foos.each(&amp;:bar.baz)\n</code></pre>\n\n<p>I can easily get all <code>bar</code>s with <code>foos.each(&amp;:bar)</code>, but the <code>baz</code> attribute (or however many others could it be) I cannot, as it gives me the error:\n<code>TypeError: wrong argument type String (expected Proc)</code></p>\n"}, {"tags": ["ruby-on-rails", "ruby", "activerecord"], "comments": [{"owner": {"reputation": 208794, "user_id": 229044, "user_type": "moderator", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/591426cbbacd4025d920467bad356911?s=128&d=identicon&r=PG&f=1", "display_name": "meagar", "link": "https://stackoverflow.com/users/229044/meagar"}, "edited": false, "score": 3, "creation_date": 1539716743, "post_id": 52841945, "comment_id": 92600733, "body": "You can&#39;t have both an <code>attr_accessor :tags</code> and a <code>has_many :tags</code>. They both provide accessor methods and the last one will win."}, {"owner": {"reputation": 1077, "user_id": 1425596, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/888a706c6bd51bb4272e069b835f1f3f?s=128&d=identicon&r=PG", "display_name": "Silverfall05", "link": "https://stackoverflow.com/users/1425596/silverfall05"}, "reply_to_user": {"reputation": 208794, "user_id": 229044, "user_type": "moderator", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/591426cbbacd4025d920467bad356911?s=128&d=identicon&r=PG&f=1", "display_name": "meagar", "link": "https://stackoverflow.com/users/229044/meagar"}, "edited": false, "score": 0, "creation_date": 1539716830, "post_id": 52841945, "comment_id": 92600775, "body": "@meagar makes sense, you have any idea though on how to achieve my goal?"}, {"owner": {"reputation": 32131, "user_id": 2346461, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/i3xAf.jpg?s=128&g=1", "display_name": "Pavan", "link": "https://stackoverflow.com/users/2346461/pavan"}, "edited": false, "score": 0, "creation_date": 1539717561, "post_id": 52841945, "comment_id": 92601099, "body": "Ofcourse it doesn&#39;t create <code>TaskTag</code> instance as you didn&#39;t say so. <code>first_or_create</code> accepts a block. You can create <code>TaskTag</code> instance inside the block."}], "answers": [{"tags": [], "owner": {"reputation": 32131, "user_id": 2346461, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/i3xAf.jpg?s=128&g=1", "display_name": "Pavan", "link": "https://stackoverflow.com/users/2346461/pavan"}, "is_accepted": false, "score": 1, "last_activity_date": 1539719784, "last_edit_date": 1539719784, "creation_date": 1539719260, "answer_id": 52843038, "question_id": 52841945, "link": "https://stackoverflow.com/questions/52841945/how-to-parse-has-many-association-before-save/52843038#52843038", "title": "How to parse has_many association before_save", "body": "<blockquote>\n  <p>I have achieved that it creates instance if it doesn't exist, but it\n  does not create TaskTag instance</p>\n</blockquote>\n\n<p>Normally in <code>has_many,&lt;&gt; :through</code> association, when <code>collection_singular_ids</code>(i.e, <code>tag_ids</code> or <code>task_ids</code> in your case) are present in the <code>params</code>, Rails upon create, will also create <strong>new entries</strong> in the <strong>joined table</strong>(i.e, <code>task_tags</code> in your case) with <code>f_key</code> values as those values of <code>collection_singular_ids</code>(<code>tag_id = tag_ids</code>) and the <strong><em>id of current instance</em></strong>(<code>task_id = @task.id</code>). </p>\n\n<p>Your situation is different as you have <code>tags</code> instead of <code>tag_ids</code>. You should create instances for <code>TaskTag</code> like so</p>\n\n<pre><code>def set_tags\n  tag_instances = self.tags.map do |tag|\n    if tag.is_a?(String)\n      Tag.where(title: tag).first_or_create do |t|\n        t.task_tags.create(task_id: self.id) # This will create new entries for task_tags with tag_id as t.id and task_id as self.id\n      end\n    else\n      tag\n    end\n  end\n  self.tags = tag_instances\nend\n</code></pre>\n"}], "owner": {"reputation": 1077, "user_id": 1425596, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/888a706c6bd51bb4272e069b835f1f3f?s=128&d=identicon&r=PG", "display_name": "Silverfall05", "link": "https://stackoverflow.com/users/1425596/silverfall05"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 38, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1539719784, "creation_date": 1539714927, "last_edit_date": 1539715971, "question_id": 52841945, "link": "https://stackoverflow.com/questions/52841945/how-to-parse-has-many-association-before-save", "title": "How to parse has_many association before_save", "body": "<p>I am trying to achieve ability to pass array of strings to <code>has_many</code> association, so that I can iterate over them and create association instance.</p>\n\n<p>I have simple structure <code>Task &lt;-&gt; TaskTag &lt;-&gt; Tag</code></p>\n\n<p>Both <code>Task</code> and <code>Tag</code> has one field: <code>title</code></p>\n\n<p>I'm willing to achieve ability to update with such call: </p>\n\n<pre><code>@task.update({:title=&gt;\"Updated Task Title\", :tags=&gt;[\"NewTag\", \"ExistingTag\"]})\n</code></pre>\n\n<p>so that it creates and sets tag with title \"NewTag\" and sets \"ExistingTag\"</p>\n\n<pre><code>class Task &lt; ApplicationRecord\n  attr_accessor :tags\n\n  before_save :set_tags, if: -&gt; { self.tags.present? }\n\n  has_many :task_tags\n  has_many :tags, through: :task_tags\n  accepts_nested_attributes_for :tags\n\n\n  private\n    def set_tags\n      tag_instances = self.tags.map do |tag|\n        if tag.is_a?(String)\n          Tag.where(title: tag).first_or_create\n        else\n          tag\n        end\n      end\n\n      self.tags = tag_instances\n    end\nend\n</code></pre>\n\n<p>I have achieved that it creates instance if it doesn't exist, but it does not create <code>TaskTag</code> instance</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "answers": [{"comments": [{"owner": {"reputation": 47, "user_id": 6810869, "user_type": "registered", "profile_image": "https://graph.facebook.com/10209196679667634/picture?type=large", "display_name": "Charalambos Pouroutides", "link": "https://stackoverflow.com/users/6810869/charalambos-pouroutides"}, "edited": false, "score": 0, "creation_date": 1539716257, "post_id": 52842096, "comment_id": 92600530, "body": "Hi Pavan the error disappeared  but the function is not working as suppose to"}, {"owner": {"reputation": 32131, "user_id": 2346461, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/i3xAf.jpg?s=128&g=1", "display_name": "Pavan", "link": "https://stackoverflow.com/users/2346461/pavan"}, "reply_to_user": {"reputation": 47, "user_id": 6810869, "user_type": "registered", "profile_image": "https://graph.facebook.com/10209196679667634/picture?type=large", "display_name": "Charalambos Pouroutides", "link": "https://stackoverflow.com/users/6810869/charalambos-pouroutides"}, "edited": false, "score": 0, "creation_date": 1539716508, "post_id": 52842096, "comment_id": 92600628, "body": "@CharalambosPouroutides Did the job run or not?"}, {"owner": {"reputation": 47, "user_id": 6810869, "user_type": "registered", "profile_image": "https://graph.facebook.com/10209196679667634/picture?type=large", "display_name": "Charalambos Pouroutides", "link": "https://stackoverflow.com/users/6810869/charalambos-pouroutides"}, "edited": false, "score": 0, "creation_date": 1539717033, "post_id": 52842096, "comment_id": 92600874, "body": "No it didnt. I added my function in the controller in the private section"}, {"owner": {"reputation": 47, "user_id": 6810869, "user_type": "registered", "profile_image": "https://graph.facebook.com/10209196679667634/picture?type=large", "display_name": "Charalambos Pouroutides", "link": "https://stackoverflow.com/users/6810869/charalambos-pouroutides"}, "edited": false, "score": 0, "creation_date": 1539717078, "post_id": 52842096, "comment_id": 92600891, "body": "&#39;&#39;def update_delay       require &#39;net/http&#39;       require &#39;json&#39;       url = (&quot;<a href=\"https://api.tfl.gov.uk/line/mode/tube/status&quot;\" rel=\"nofollow noreferrer\">api.tfl.gov.uk/line/mode/tube/status&quot;</a>)       uri = URI(url)       response = Net::HTTP.get(uri)       @data_hash= JSON.parse(response)       @data_hash.map{ |item| Delay.create(line: item[&#39;name&#39;], description: item[&#39;lineStatuses&#39;][0][&#39;statusSeverityDescription&#39;])}\t     end     handle_asynchronously :update_delay, :run_at =&gt; Proc.new { 1.minutes.from_now }&#39;&#39;"}, {"owner": {"reputation": 32131, "user_id": 2346461, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/i3xAf.jpg?s=128&g=1", "display_name": "Pavan", "link": "https://stackoverflow.com/users/2346461/pavan"}, "reply_to_user": {"reputation": 47, "user_id": 6810869, "user_type": "registered", "profile_image": "https://graph.facebook.com/10209196679667634/picture?type=large", "display_name": "Charalambos Pouroutides", "link": "https://stackoverflow.com/users/6810869/charalambos-pouroutides"}, "edited": false, "score": 0, "creation_date": 1539717169, "post_id": 52842096, "comment_id": 92600935, "body": "@CharalambosPouroutides Can you remove the private and check"}], "tags": [], "owner": {"reputation": 32131, "user_id": 2346461, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/i3xAf.jpg?s=128&g=1", "display_name": "Pavan", "link": "https://stackoverflow.com/users/2346461/pavan"}, "is_accepted": false, "score": 0, "last_activity_date": 1539715596, "creation_date": 1539715596, "answer_id": 52842096, "question_id": 52841843, "link": "https://stackoverflow.com/questions/52841843/undefined-method-handle-asynchronously/52842096#52842096", "title": "undefined method `handle_asynchronously&#39;", "body": "<p>Your linked post says </p>\n\n<blockquote>\n  <p>With DelayedJob you can do something like</p>\n</blockquote>\n\n<p>So the method <code>handle_asynchronously</code> is probably a helper served by <a href=\"https://github.com/collectiveidea/delayed_job\" rel=\"nofollow noreferrer\">delayed_job</a>. You should <strong>install the gem</strong></p>\n\n<pre><code>#Gemfile\ngem 'delayed_job_active_record'\n</code></pre>\n\n<p>Run </p>\n\n<pre><code>bundle install \n</code></pre>\n\n<p>and </p>\n\n<pre><code>rails generate delayed_job:active_record\nrake db:migrate\n</code></pre>\n"}], "owner": {"reputation": 47, "user_id": 6810869, "user_type": "registered", "profile_image": "https://graph.facebook.com/10209196679667634/picture?type=large", "display_name": "Charalambos Pouroutides", "link": "https://stackoverflow.com/users/6810869/charalambos-pouroutides"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 308, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1539721402, "creation_date": 1539714436, "question_id": 52841843, "link": "https://stackoverflow.com/questions/52841843/undefined-method-handle-asynchronously", "title": "undefined method `handle_asynchronously&#39;", "body": "<p>I followed this article(<a href=\"https://stackoverflow.com/questions/5494369/how-to-schedule-a-function-to-execute-at-a-future-time\">How to schedule a function to execute at a future time?</a>) to create schedule a method execution every couple of minutes.\n I added the bellow code after my update method in the model controller.</p>\n\n<pre><code> handle_asynchronously :update_delay, :run_at =&gt; Proc.new { 1.minutes.from_now }\n</code></pre>\n\n<p>When i refresh the page i get this error</p>\n\n<pre><code>undefined method `handle_asynchronously'\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-3", "jwt"], "comments": [{"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1539710516, "post_id": 52840647, "comment_id": 92597545, "body": "What is <code>decoded_user</code>? Why not just raise <code>ActiveRecord::RecordNotFound</code> from there?"}, {"owner": {"reputation": 1, "user_id": 10514315, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2eed49f092b93586934fd161601af93c?s=128&d=identicon&r=PG&f=1", "display_name": "Anastasia", "link": "https://stackoverflow.com/users/10514315/anastasia"}, "reply_to_user": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1539711627, "post_id": 52840647, "comment_id": 92598121, "body": "@engineersmnky  <code>def decoded_user(jwt)         User.find_by(public_id: decode_user_jwt(jwt)) if decode_user_jwt(jwt)       rescue ActiveRecord::RecordNotFound         render status: 401, json: { error: &#39;invalid token&#39; }.to_json       end</code> where  <code>decode_user_jwt(jwt)</code> returns user&#39;s id. I&#39;ve tried but it doesnt work either"}, {"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1539713595, "post_id": 52840647, "comment_id": 92599119, "body": "<code>find_by</code> will return <code>nil</code> if it cannot find anything, not raise an error. You should correct this code to raise if <code>nil</code>. as an aside if <code>decode_user_jwt(jwt)</code> returns <code>false</code> or <code>nil</code> this method will also return <code>nil</code> due to the inline conditional"}], "answers": [{"comments": [{"owner": {"reputation": 3352, "user_id": 5152338, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5QbPE.png?s=128&g=1", "display_name": "jdno", "link": "https://stackoverflow.com/users/5152338/jdno"}, "edited": false, "score": 1, "creation_date": 1539715587, "post_id": 52842004, "comment_id": 92600181, "body": "<code>find</code> doesn&#39;t take keyword arguments, it only works with ids. To raise an exception, use <code>find_by!</code> instead."}, {"owner": {"reputation": 32131, "user_id": 2346461, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/i3xAf.jpg?s=128&g=1", "display_name": "Pavan", "link": "https://stackoverflow.com/users/2346461/pavan"}, "reply_to_user": {"reputation": 3352, "user_id": 5152338, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5QbPE.png?s=128&g=1", "display_name": "jdno", "link": "https://stackoverflow.com/users/5152338/jdno"}, "edited": false, "score": 0, "creation_date": 1539715686, "post_id": 52842004, "comment_id": 92600227, "body": "@jdno Thanks for the response. I&#39;ve missed the important part!"}, {"owner": {"reputation": 32131, "user_id": 2346461, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/i3xAf.jpg?s=128&g=1", "display_name": "Pavan", "link": "https://stackoverflow.com/users/2346461/pavan"}, "reply_to_user": {"reputation": 3352, "user_id": 5152338, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5QbPE.png?s=128&g=1", "display_name": "jdno", "link": "https://stackoverflow.com/users/5152338/jdno"}, "edited": false, "score": 0, "creation_date": 1539715732, "post_id": 52842004, "comment_id": 92600256, "body": "@jdno Updated my answer :)"}, {"owner": {"reputation": 3352, "user_id": 5152338, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5QbPE.png?s=128&g=1", "display_name": "jdno", "link": "https://stackoverflow.com/users/5152338/jdno"}, "edited": false, "score": 1, "creation_date": 1539715783, "post_id": 52842004, "comment_id": 92600291, "body": "You&#39;re welcome. It happens to me every so often that I try to pass a keyword to <code>find</code>, and then wonder why it doesn&#39;t work as excepted. \ud83d\ude02"}, {"owner": {"reputation": 32131, "user_id": 2346461, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/i3xAf.jpg?s=128&g=1", "display_name": "Pavan", "link": "https://stackoverflow.com/users/2346461/pavan"}, "reply_to_user": {"reputation": 3352, "user_id": 5152338, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5QbPE.png?s=128&g=1", "display_name": "jdno", "link": "https://stackoverflow.com/users/5152338/jdno"}, "edited": false, "score": 0, "creation_date": 1539715854, "post_id": 52842004, "comment_id": 92600324, "body": "@jdno Welcome to the club :D"}, {"owner": {"reputation": 1, "user_id": 10514315, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2eed49f092b93586934fd161601af93c?s=128&d=identicon&r=PG&f=1", "display_name": "Anastasia", "link": "https://stackoverflow.com/users/10514315/anastasia"}, "edited": false, "score": 0, "creation_date": 1539716661, "post_id": 52842004, "comment_id": 92600690, "body": "@Pavan thanks a lot! Rails doesnt want rendering in two places, so i moved it to one method instead of both action and method, now all works fine thanks a lot :)"}, {"owner": {"reputation": 32131, "user_id": 2346461, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/i3xAf.jpg?s=128&g=1", "display_name": "Pavan", "link": "https://stackoverflow.com/users/2346461/pavan"}, "reply_to_user": {"reputation": 1, "user_id": 10514315, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2eed49f092b93586934fd161601af93c?s=128&d=identicon&r=PG&f=1", "display_name": "Anastasia", "link": "https://stackoverflow.com/users/10514315/anastasia"}, "edited": false, "score": 0, "creation_date": 1539716756, "post_id": 52842004, "comment_id": 92600741, "body": "@Anastasia Alright, will update the answer as well :)"}], "tags": [], "owner": {"reputation": 32131, "user_id": 2346461, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/i3xAf.jpg?s=128&g=1", "display_name": "Pavan", "link": "https://stackoverflow.com/users/2346461/pavan"}, "is_accepted": false, "score": 0, "last_activity_date": 1539716846, "last_edit_date": 1539716846, "creation_date": 1539715186, "answer_id": 52842004, "question_id": 52840647, "link": "https://stackoverflow.com/questions/52840647/how-to-handle-user-equal-nil-when-it-is-not-detected-by-activerecordrecordnotf/52842004#52842004", "title": "How to handle user equal nil when it is not detected by ActiveRecord::RecordNotFound", "body": "<p>As <strong>@engineersmnky</strong> pointed out in the comments, <code>find_by</code> <strong>doesn't raise an exception</strong>. It just returns <strong>nil</strong> when there is no record. You should use <code>find_by!</code> instead. Your code should look like below</p>\n\n<pre><code>def decoded_user(jwt)\n  begin \n    User.find_by!(public_id: decode_user_jwt(jwt)) \n  rescue ActiveRecord::RecordNotFound, JWT::DecodeError\n  end\nend\n</code></pre>\n\n<p>And the <code>login</code> method can be changed to just</p>\n\n<pre><code>def login\n  user = decoded_user(permitted_params[:jwt])\n  if user\n    render json: user\n  else\n    render json: {status: 401, error: 'invalid token' }\n  end\nend\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1, "user_id": 10514315, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2eed49f092b93586934fd161601af93c?s=128&d=identicon&r=PG&f=1", "display_name": "Anastasia", "link": "https://stackoverflow.com/users/10514315/anastasia"}, "edited": false, "score": 0, "creation_date": 1539716771, "post_id": 52842058, "comment_id": 92600750, "body": "thanks a lot :) in my case its API , so i send requests from client made on react, not sure if i can apply redirect_to, at least on client i parse json :)"}, {"owner": {"reputation": 3352, "user_id": 5152338, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5QbPE.png?s=128&g=1", "display_name": "jdno", "link": "https://stackoverflow.com/users/5152338/jdno"}, "reply_to_user": {"reputation": 1, "user_id": 10514315, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2eed49f092b93586934fd161601af93c?s=128&d=identicon&r=PG&f=1", "display_name": "Anastasia", "link": "https://stackoverflow.com/users/10514315/anastasia"}, "edited": false, "score": 0, "creation_date": 1539718377, "post_id": 52842058, "comment_id": 92601492, "body": "That was just an example. In your case, you would not have <code>redirect_to</code>, but two <code>render</code> statements. The important thing to note is the pattern, where you first fetch a resource, then perform an action on it (<code>@test.save</code>), and based on that action&#39;s result, return or show something to the user."}], "tags": [], "owner": {"reputation": 3352, "user_id": 5152338, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5QbPE.png?s=128&g=1", "display_name": "jdno", "link": "https://stackoverflow.com/users/5152338/jdno"}, "is_accepted": false, "score": 1, "last_activity_date": 1539715444, "creation_date": 1539715444, "answer_id": 52842058, "question_id": 52840647, "link": "https://stackoverflow.com/questions/52840647/how-to-handle-user-equal-nil-when-it-is-not-detected-by-activerecordrecordnotf/52842058#52842058", "title": "How to handle user equal nil when it is not detected by ActiveRecord::RecordNotFound", "body": "<p>There are two different ways how you can handle this with minimal changes.</p>\n\n<h2>find_by!</h2>\n\n<p>The first is to make sure an exception is raised when the user is not found. You have used <code>find_by</code>, for which the <a href=\"https://api.rubyonrails.org/classes/ActiveRecord/FinderMethods.html#method-i-find_by\" rel=\"nofollow noreferrer\">documentation</a> says:</p>\n\n<blockquote>\n  <p>If no record is found, returns <code>nil</code>.</p>\n</blockquote>\n\n<p>For a lot of finder methods in Rails, there are variants with a <code>!</code> at the end. The <code>!</code> indicates in the context of Rails that the method will raise an exception. For <code>find_by</code>, the same <code>find_by!</code> variant exists. The <a href=\"https://api.rubyonrails.org/classes/ActiveRecord/FinderMethods.html#method-i-find_by-21\" rel=\"nofollow noreferrer\">documentation</a> for this method tells you that it is exactly like <code>find_by</code>, except that it will not return <code>nil</code>, but raise an exception.</p>\n\n<p>Replace <code>find_by</code> in <code>decode_user</code> with <code>find_by!</code>, and your method should work as expected.</p>\n\n<h2>Avoid exceptions</h2>\n\n<p>Raising exceptions is often seen as an anti pattern. There are many different reasons for this, but one argument often used is that <a href=\"https://github.com/JuanitoFatas/fast-ruby#beginrescue-vs-respond_to-for-control-flow-code\" rel=\"nofollow noreferrer\">exceptions are slow</a>. If you look at the code that Rails generated when you use scaffolding, you'll see that controller actions typically look like this:</p>\n\n<pre><code>def create\n  @test = Test.new(test_params)\n\n  if @test.save\n    redirect_to @test, notice: 'Test was successfully created.'\n  else\n    render :new\n  end\nend\n</code></pre>\n\n<p>You can use the same pattern for your method as well. First, decode the user. Then check if the user is exists, e.g. with <code>user.present?</code>. Based on that, either return success or failure.</p>\n\n<p>You'll see this pattern a lot in Rails, and I would recommend to refactor your code to follow it here as well...</p>\n"}], "owner": {"reputation": 1, "user_id": 10514315, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2eed49f092b93586934fd161601af93c?s=128&d=identicon&r=PG&f=1", "display_name": "Anastasia", "link": "https://stackoverflow.com/users/10514315/anastasia"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 145, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1539716846, "creation_date": 1539709653, "last_edit_date": 1539709964, "question_id": 52840647, "link": "https://stackoverflow.com/questions/52840647/how-to-handle-user-equal-nil-when-it-is-not-detected-by-activerecordrecordnotf", "title": "How to handle user equal nil when it is not detected by ActiveRecord::RecordNotFound", "body": "<p>I am learning programming only, Ruby on Rails in particular. The problem I face currently is that I doubt in which way to handle my issue is better regarding clean code and avoiding my code smells or probably something else. </p>\n\n<p>So basically, I have users_controller where I check if my <code>jwt</code> is valid: I decode it, withdraw <code>user_id</code> and look for the user in DB by her <code>id</code>. </p>\n\n<pre><code> def login\n    user = decoded_user(permitted_params[:jwt])\n    render json: user\n  rescue ActiveRecord::RecordNotFound, JWT::DecodeError\n    render status: 401, json: { error: 'invalid token' }.to_json\n  end\n</code></pre>\n\n<p>As you can see, in case of invalid jwt or user is not found, it must render <code>401 error</code>, but somehow when user is <code>nil</code>, <code>rescue ActiveRecord::RecordNotFound</code> does not detect it and render <code>200 status</code> when I want it <code>401</code>. When <code>jwt</code> is valid or empty, it all works fine.</p>\n\n<p>I was thinking to wrap it into <code>if else</code> block in case of <code>nil</code> though to me it does not seem really skilled. Could you help me to refactor, please? Thanks!</p>\n"}, {"tags": ["ruby", "colors", "terminal", "background-color", "tic-tac-toe"], "answers": [{"tags": [], "owner": {"reputation": 3332, "user_id": 201528, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9419ae9829cb341c01f55143d08d0f2e?s=128&d=identicon&r=PG", "display_name": "NilColor", "link": "https://stackoverflow.com/users/201528/nilcolor"}, "is_accepted": false, "score": 0, "last_activity_date": 1539707207, "creation_date": 1539707207, "answer_id": 52840021, "question_id": 52839486, "link": "https://stackoverflow.com/questions/52839486/how-to-remove-color-from-text-background-in-the-terminal-unsig-ruby/52840021#52840021", "title": "How to remove color from text background in the terminal unsig ruby?", "body": "<p>You need to \"repaint\" the whole game. Or the line affected (at least). This way you can draw \"inactive\" fields in white (or any other colors) and your active field as green. You cannot <em>change</em> a color.\nCheck one of the \"progress bar\" gems available. For example, this one - <a href=\"https://github.com/paul/progress_bar/blob/master/lib/progress_bar.rb\" rel=\"nofollow noreferrer\">https://github.com/paul/progress_bar/blob/master/lib/progress_bar.rb</a></p>\n\n<p>Here you can find few more ideas <a href=\"https://stackoverflow.com/questions/10262235/printing-an-ascii-spinning-cursor-in-the-console\">Printing an ASCII spinning &quot;cursor&quot; in the console</a></p>\n"}], "owner": {"reputation": 5, "user_id": 10018273, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/69441090e86ac4bf513519b6d5e4d1e3?s=128&d=identicon&r=PG&f=1", "display_name": "Simon Lp", "link": "https://stackoverflow.com/users/10018273/simon-lp"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 88, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1539707207, "creation_date": 1539705283, "question_id": 52839486, "link": "https://stackoverflow.com/questions/52839486/how-to-remove-color-from-text-background-in-the-terminal-unsig-ruby", "title": "How to remove color from text background in the terminal unsig ruby?", "body": "<p>I am implementing a TIC TAC TOE game in ruby. I want the user to be able to select the square he wants to put his crosses in, by using the arrows of the keyboard. Therefor I have to colorize (using the gem 'pastel') the squares he goes into, in order for him to know his position.</p>\n\n<p>So far I have used this portion of code :</p>\n\n<pre><code>@position = 0\n@pastel = Pastel.new\n@board = Board.new\ndef self.show_single_key\nc = self.read_char\n\ncase c\nwhen \"\\r\"\n  puts \"RETURN\"\nwhen \"\\e[A\"\n@position &gt; 5 ? @position : @position  -= 3\nwhen \"\\e[B\"\n@position &lt; 3 ? @position : @position  += 3\nwhen \"\\e[C\"\n@position == 8 ? @position : @position  += 1\nwhen \"\\e[D\"\n@position == 0 ? @position : @position  -= 1\nend\np @position\n$cases[@position].value = @pastel.on_green($cases[@position].value)\n$cases[@position].value = $cases[@position].value\n@board.print_board\nend\n</code></pre>\n\n<p>The result is  :<a href=\"https://i.stack.imgur.com/Ajq8p.png\" rel=\"nofollow noreferrer\">this</a></p>\n\n<p>Could you help me figure out how I take the green squares to their original black state ? </p>\n\n<p>Thank you for your help</p>\n"}, {"tags": ["ruby", "file-io", "fileparsing"], "comments": [{"owner": {"reputation": 38307, "user_id": 2057388, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ceef8c04f66cd0e2bd360ef6abc14a81?s=128&d=identicon&r=PG", "display_name": "\u0417\u0435\u043b\u0451\u043d\u044b\u0439", "link": "https://stackoverflow.com/users/2057388/%d0%97%d0%b5%d0%bb%d1%91%d0%bd%d1%8b%d0%b9"}, "edited": false, "score": 1, "creation_date": 1539706868, "post_id": 52839473, "comment_id": 92595780, "body": "Post an example of file please."}], "answers": [{"comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "reply_to_user": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 1, "creation_date": 1539711104, "post_id": 52840107, "comment_id": 92597842, "body": "@SergioTulentsev, thanks, I&#39;ll have a look at the link. I added some text to my answer to describe one way to avoid slurping the file."}], "tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": false, "score": 0, "last_activity_date": 1539711047, "last_edit_date": 1539711047, "creation_date": 1539707534, "answer_id": 52840107, "question_id": 52839473, "link": "https://stackoverflow.com/questions/52839473/how-to-access-multiple-lines-at-once-in-ruby/52840107#52840107", "title": "How to access multiple lines at once in ruby", "body": "<pre><code>text =&lt;&lt;_\nMy, oh my\nProduct Serial Number: 12058-2865\nProduct Part Number: 3456\nProduct Type: H-Type\nProduct Version: 2.07\nMy, oh my\nProduct Serial Number: 12058-2865\nProduct Part Number: 3456\nProduct Type: H-Type\nProduct Version: 2.08\nMy, ho my\nProduct Serial Number: 12058-2865\nProduct Part Number: 3456\nProduct Type: H-Type\nProduct Version: 2.07\n_\n\nresult =&lt;&lt;_.lines\nProduct Serial Number: 12058-2865\nProduct Part Number: 3456\nProduct Type: H-Type\nProduct Version: 2.07\n_\n#=&gt; [\"Product Serial Number: 12058-2865\\n\", \"Product Part Number: 3456\\n\",\n#    \"Product Type: H-Type\\n\", \"Product Version: 2.07\\n\"]\n\nFName = \"test\"\nFile.write(FName, text)\n  #=&gt; 339\ntarget = \"Product Serial Number\"\n</code></pre>\n\n<p></p> \n\n<pre><code>nbr_result_lines = result.size\n  #=&gt; 4\nlines = File.readlines(FName)\n  #=&gt; [\"My, oh my\\n\",\n  #    \"Product Serial Number: 12058-2865\\n\",\n  #    ...\n  #    \"Product Version: 2.07\\n\"]\nlines.each_with_index do |line, i|\n  (puts (lines[i, nbr_result_lines] == result ? \"Correct\" : \"Fail\")) if \n  line.match?(target)\nend\n  # \"Correct\"\n  # \"Fail\"\n  # \"Correct\"\n</code></pre>\n\n<p>Note that the array <code>lines[i, nbr_result_lines]</code> will end with one or more <code>nil</code>s when <code>i</code> is sufficiently large.</p>\n\n<p>If the file is so large that slurping it into an array is undesirable or infeasible, one could</p>\n\n<ul>\n<li>read the first <code>nbr_result_lines</code> into a buffer (using, say, <a href=\"http://ruby-doc.org/core-2.5.1/IO.html#method-c-foreach\" rel=\"nofollow noreferrer\">IO::foreach</a>);</li>\n<li>compare <code>target</code> with the first line of the buffer, if a match, compare <code>result</code> with the buffer;</li>\n<li>remove the first line of the buffer, add the next line of the file to the end of the buffer and repeat the above, continuing until the buffer has been examined after the last line of the file has been added to it.</li>\n</ul>\n"}, {"tags": [], "owner": {"reputation": 9567, "user_id": 1900722, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/nGsJr.jpg?s=128&g=1", "display_name": "anquegi", "link": "https://stackoverflow.com/users/1900722/anquegi"}, "is_accepted": false, "score": 0, "last_activity_date": 1539720626, "last_edit_date": 1539720626, "creation_date": 1539709890, "answer_id": 52840708, "question_id": 52839473, "link": "https://stackoverflow.com/questions/52839473/how-to-access-multiple-lines-at-once-in-ruby/52840708#52840708", "title": "How to access multiple lines at once in ruby", "body": "<p>Well you can have several approaches for this, the easy way is to go through each line. and try to detect the sequence like this, it should be something similar to state machine for detecting a sequence:</p>\n\n<pre><code>step = 0\nFile.open('sample-file.txt').each do |line|\n  if /^Product Serial Number.*/.match? line\n    puts(step = 1)\n  elsif /^Product Part Number.*/.match?(line)  &amp;&amp; step == 1\n    puts(step = 2)\n  elsif /^Product Type.*/.match?(line) &amp;&amp; step == 2\n    puts(step = 3)\n  elsif /^Product Version.*/.match?(line) &amp;&amp; step == 3\n    puts 'correct'\n    puts(step = 0)\n  else\n    puts(step = 0)\n  end\nend\n</code></pre>\n\n<p>with this result:</p>\n\n<pre><code>ruby read_file.rb\n1\n2\n3\ncorrect\n0\n0\n1\n0\n0\n0\n0\n0\n0\n1\n2\n3\ncorrect\n0\n0\n</code></pre>\n\n<p>and this sample file:</p>\n\n<pre><code>Product Serial Number: 12058-2865\nProduct Part Number: 3456\nProduct Type: H-Type\nProduct Version: 2.07\nno good line\nProduct Serial Number: 12058-2865\nBAD Part Number: 3456\nProduct Type: H-Type\nProduct Version: 2.07\nno good line\nno good line\nno good line\nProduct Serial Number: 12058-2865\nProduct Part Number: 3456\nProduct Type: H-Type\nProduct Version: 2.07\nno good line\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 219, "user_id": 10474577, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3137e930cf7c117b2c7aa711df8f74f6?s=128&d=identicon&r=PG&f=1", "display_name": "Ivan Gurzhiy", "link": "https://stackoverflow.com/users/10474577/ivan-gurzhiy"}, "is_accepted": false, "score": 0, "last_activity_date": 1539720039, "creation_date": 1539720039, "answer_id": 52843207, "question_id": 52839473, "link": "https://stackoverflow.com/questions/52839473/how-to-access-multiple-lines-at-once-in-ruby/52843207#52843207", "title": "How to access multiple lines at once in ruby", "body": "<p>There is exist similar answered question: <a href=\"https://stackoverflow.com/questions/2497069/reading-a-file-n-lines-at-a-time-in-ruby\" title=\"reading a file n lines at a time in ruby\">reading a mulitply lines at once</a></p>\n\n<p>I think if you have file with knowed format and have persisten series of lines, you can read multiply lines to array and iterate over array elements with needed logic.</p>\n\n<blockquote>\n  <p><code>File.foreach(\"large_file\").each_slice(8) do |eight_lines|\n    # eight_lines is an array containing 8 lines.\n    # at this point you can iterate over these lines \n  end</code></p>\n</blockquote>\n\n<p>Yep loop in loop not very good, but better rather multiply <code>if else</code> </p>\n"}], "owner": {"reputation": 101, "user_id": 10270861, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f9df664d3c4a3b0f079a5fa3008dc724?s=128&d=identicon&r=PG&f=1", "display_name": "pjano1", "link": "https://stackoverflow.com/users/10270861/pjano1"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 243, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1539720626, "creation_date": 1539705246, "last_edit_date": 1539714328, "question_id": 52839473, "link": "https://stackoverflow.com/questions/52839473/how-to-access-multiple-lines-at-once-in-ruby", "title": "How to access multiple lines at once in ruby", "body": "<p>I'm writing a program to parse a basic text file, and compare certain lines from it to results from a test. I'm using specific words to find the line which should be compared to the result from the test, and then passing or failing the result based upon whether or not the line matches the result (they should be exactly the same). I'm using the following general format:</p>\n\n<pre><code>File.open(file).each do |line|\n  if line include? \"Revision\"\n    if line==result\n     puts \"Correct\"\n    else\n     puts \"Fail\"\n</code></pre>\n\n<p>Most of the cases are just one line, so that's easy enough. But for a few of the cases, my result is 4 lines long, not just one. So, once I find the line I need, I need to check to see if the result is equal to the line of interest plus the following 3 lines after it. This is how the information is formatted in the file being read, and also how the result from the test should look:</p>\n\n<pre><code>Product Serial Number: 12058-2865\nProduct Part Number: 3456\nProduct Type: H-Type\nProduct Version: 2.07\n</code></pre>\n\n<p>Once the line of interest is found, I just need to compare the line of interest plus the next three lines to the whole result. </p>\n\n<pre><code>if line include? \"Product Serial Number\"\n  #if (#this line and the next 3) == result\n   puts Correct\n  else\n   puts \"Fail\"\n</code></pre>\n\n<p>How do I do this?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "rubygems", "ruby-on-rails-5", "gemspecs"], "comments": [{"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1539797211, "post_id": 52839143, "comment_id": 92635468, "body": "Please update your code so that the Modules are constants. Also not sure what <code>enable_transport</code> is but why not just require the gem there? e.g. <code>def enable_transport=(val); require &#39;transport&#39; if val &amp;&amp; !defined?(Transport); end</code>"}, {"owner": {"reputation": 694, "user_id": 2388058, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/d0ba321c27f5c1cdeafcbe007145586a?s=128&d=identicon&r=PG", "display_name": "AirWick219", "link": "https://stackoverflow.com/users/2388058/airwick219"}, "reply_to_user": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1539799430, "post_id": 52839143, "comment_id": 92636534, "body": "<code>enable_transport</code> is a config option that we added in <code>fruit_chain&#47;lib&#47;fruit_chain&#47;rails&#47;railtie.rb</code> so that the consuming app can just do <code>config.fruit_chain.enable_transport = true</code> in the <code>application.rb</code>. Basically we need a way to config to require the <code>transport</code> gem or not in our gem."}], "owner": {"reputation": 694, "user_id": 2388058, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/d0ba321c27f5c1cdeafcbe007145586a?s=128&d=identicon&r=PG", "display_name": "AirWick219", "link": "https://stackoverflow.com/users/2388058/airwick219"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 432, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1539801144, "creation_date": 1539704111, "last_edit_date": 1539801144, "question_id": 52839143, "link": "https://stackoverflow.com/questions/52839143/rails-5-require-a-dependent-gem-and-its-initializers-conditionally-in-a-gem-rail", "title": "Rails 5 Require a dependent gem and its initializers conditionally in a gem railtie", "body": "<p>We are writing a gem that includes multiple common gems for a couple of our shared apps. We want to be able to have a config in <code>application.rb</code> or <code>enviroment.rb/*rb</code> something like <code>config.fruit_chain.enable_transport = true</code> from the consuming app to conditionally require a gem and it's initializer dynamically. But the initializer from common gem does not run after require in a railtie. I wondered if there is a better way to do this</p>\n\n<p>fruit_store/config/application.rb . (consuming app)</p>\n\n<pre><code>module FruitStore\n  class Application &lt; Rails::Application\n    # Initialize configuration defaults for originally generated Rails version.\n    config.load_defaults 5.2\n\n    config.fruit_chain.enable_transport = true\n  end\nend\n</code></pre>\n\n<p>fruit_chain/lib/fruit_chain.rb   (Our gem)</p>\n\n<pre><code>require analytic \n- require transport      &lt;----- removed this so it dose not autoload\nrequire marketing\n...\n\nmodule FruitChain\nend\n</code></pre>\n\n<p>fruit_chain/lib/fruit_chain/rails/railtie.rb</p>\n\n<pre><code>module FruitChain\n  module Rails\n    class Railtie &lt; ::Rails::Railtie\n      config.fruit_chain = ActiveSupport::OrderedOptions.new\n      config.fruit_chain.enable_transport = false\n\n      config.before_initialize do |app|\n        if app.config.fruit_chain.enable_transport\n          Kernel.require 'transport'             &lt;--- this require the gem correct and load it up         \n\n          app.initializers.find{ \n            |a| a.name === 'transport.configure'\n          }.run &lt;--- transport.configure initializer doesn't kick off\n        end        \n      end\n    end\n  end\nend\n</code></pre>\n\n<p>transport/lib/transport.rb . (Dependent common gem)</p>\n\n<pre><code>require transport/rails/railtie \n...\n\nmodule Transport\nend\n</code></pre>\n\n<p>transport/lib/transport/rails/railtie.rb</p>\n\n<pre><code>module Transport\n  module Rails\n    class Railtie &lt; ::Rails::Railtie\n      initializer 'transport.configure' do |app|\n      ...\n      end\n    end\n  end\nend\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "model", "associations"], "comments": [{"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1539705314, "post_id": 52838973, "comment_id": 92594946, "body": "switch <code>has_one</code> to <code>belongs_to</code>"}], "answers": [{"comments": [{"owner": {"reputation": 85, "user_id": 10441922, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fe858ee8c4f32ff9953c2b6cf98b90ec?s=128&d=identicon&r=PG&f=1", "display_name": "Markos Tzetzis", "link": "https://stackoverflow.com/users/10441922/markos-tzetzis"}, "edited": false, "score": 0, "creation_date": 1539709383, "post_id": 52839481, "comment_id": 92597031, "body": "ok. that works but i have i conflict in some other part .If i want to use has_one the only change is that i have to move hometeam_id and awayteam_id to teams?"}, {"owner": {"reputation": 803, "user_id": 7654691, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/W8Gni.jpg?s=128&g=1", "display_name": "R. Sierra", "link": "https://stackoverflow.com/users/7654691/r-sierra"}, "reply_to_user": {"reputation": 85, "user_id": 10441922, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fe858ee8c4f32ff9953c2b6cf98b90ec?s=128&d=identicon&r=PG&f=1", "display_name": "Markos Tzetzis", "link": "https://stackoverflow.com/users/10441922/markos-tzetzis"}, "edited": false, "score": 0, "creation_date": 1539710547, "post_id": 52839481, "comment_id": 92597568, "body": "I recommend checking the <a href=\"https://guides.rubyonrails.org/association_basics.html\" rel=\"nofollow noreferrer\">Active Record Associations Guide</a>"}, {"owner": {"reputation": 85, "user_id": 10441922, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fe858ee8c4f32ff9953c2b6cf98b90ec?s=128&d=identicon&r=PG&f=1", "display_name": "Markos Tzetzis", "link": "https://stackoverflow.com/users/10441922/markos-tzetzis"}, "edited": false, "score": 0, "creation_date": 1539710897, "post_id": 52839481, "comment_id": 92597736, "body": "I understand , how can i do the same with has_many? Sorry for the spam but i want to figure it out. Thanks for your time i appreciate the help."}, {"owner": {"reputation": 803, "user_id": 7654691, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/W8Gni.jpg?s=128&g=1", "display_name": "R. Sierra", "link": "https://stackoverflow.com/users/7654691/r-sierra"}, "reply_to_user": {"reputation": 85, "user_id": 10441922, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fe858ee8c4f32ff9953c2b6cf98b90ec?s=128&d=identicon&r=PG&f=1", "display_name": "Markos Tzetzis", "link": "https://stackoverflow.com/users/10441922/markos-tzetzis"}, "edited": false, "score": 0, "creation_date": 1539711387, "post_id": 52839481, "comment_id": 92597992, "body": "@MarkosTzetzis i updated the answer to include the <code>has_many</code> relationship"}], "tags": [], "owner": {"reputation": 803, "user_id": 7654691, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/W8Gni.jpg?s=128&g=1", "display_name": "R. Sierra", "link": "https://stackoverflow.com/users/7654691/r-sierra"}, "is_accepted": true, "score": 1, "last_activity_date": 1539711338, "last_edit_date": 1539711338, "creation_date": 1539705269, "answer_id": 52839481, "question_id": 52838973, "link": "https://stackoverflow.com/questions/52838973/how-to-add-references-to-a-model-to-use-it-twice-with-different-name/52839481#52839481", "title": "How to add references to a model to use it twice with different name?", "body": "<p>First, according to <a href=\"https://api.rubyonrails.org/classes/ActiveRecord/Associations/ClassMethods.html#method-i-has_one\" rel=\"nofollow noreferrer\">Rails API :has_one</a> definition:</p>\n\n<blockquote>\n  <p>Specifies a one-to-one association with another class. This method\n  should only be used if the other class contains the foreign key. If\n  the current class contains the foreign key, then you should use\n  belongs_to instead. See also\n  ActiveRecord::Associations::ClassMethods's overview on when to use\n  has_one and when to use belongs_to.</p>\n</blockquote>\n\n<p>so your Game definition should use <a href=\"https://api.rubyonrails.org/classes/ActiveRecord/Associations/ClassMethods.html#method-i-belongs_to\" rel=\"nofollow noreferrer\">:belongs_to</a> to specify this type of relation. </p>\n\n<p>Secondly, to specify the attribute to be used in the relation you must set the <code>:foreign_key</code> option.</p>\n\n<blockquote>\n  <p>By default this is\n  guessed to be the name of the association with an \u201c_id\u201d suffix. So a\n  class that defines a <code>belongs_to :person</code> association will use\n  \u201cperson_id\u201d as the default <code>:foreign_key</code>. Similarly, <code>belongs_to :favorite_person, class_name: \"Person\"</code> will use a foreign key of\n  \u201cfavorite_person_id\u201d.</p>\n</blockquote>\n\n<p>So according to the docs you could do:</p>\n\n<pre><code>class Game\n  belongs_to :hometeam, foreing_key: 'hometeam_id', class_name: 'Team'\n  belongs_to :awayteam, foreign_key: 'awayteam_id', class_name: 'Team'\nend\n</code></pre>\n\n<p>or the implied form:</p>\n\n<pre><code>class Game\n  belongs_to :hometeam, class_name: 'Team'\n  belongs_to :awayteam, class_name: 'Team'\nend\n</code></pre>\n\n<p>Then each Team could have many games:</p>\n\n<pre><code>class Team\n  has_many :home_games, class_name: 'Game', foreign_key: 'hometeam_id'\n  has_many :away_games, class_name: 'Game', foreign_key: 'awayteam_id'\nend\n</code></pre>\n"}], "owner": {"reputation": 85, "user_id": 10441922, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fe858ee8c4f32ff9953c2b6cf98b90ec?s=128&d=identicon&r=PG&f=1", "display_name": "Markos Tzetzis", "link": "https://stackoverflow.com/users/10441922/markos-tzetzis"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 57, "favorite_count": 0, "accepted_answer_id": 52839481, "answer_count": 1, "score": 0, "last_activity_date": 1539711338, "creation_date": 1539703587, "last_edit_date": 1539704818, "question_id": 52838973, "link": "https://stackoverflow.com/questions/52838973/how-to-add-references-to-a-model-to-use-it-twice-with-different-name", "title": "How to add references to a model to use it twice with different name?", "body": "<p>I have two models Game and Team. I want every game to have exactly two teams a <strong>hometeam</strong> and an <strong>awayteam</strong>. I also want to have access to <strong>@game.hometeam</strong> and <strong>@game.awayteam</strong>. </p>\n\n<p><strong>games</strong></p>\n\n<pre><code> create_table \"games\", force: :cascade do |t|\n    t.datetime \"created_at\", null: false\n    t.datetime \"updated_at\", null: false\n    t.datetime \"start_time\"\n    t.datetime \"end_time\"\n    t.string \"name\"\n    t.integer \"admin_id\"\n    t.integer \"stadium_id\"\n    t.integer \"hometeam_id\"\n    t.integer \"awayteam_id\"\n  end\n</code></pre>\n\n<p><strong>teams</strong></p>\n\n<pre><code>create_table \"teams\", force: :cascade do |t|\n   t.string \"name\"\n   t.integer \"capacity\"\n   t.datetime \"created_at\", null: false\n   t.datetime \"updated_at\", null: false\nend\n</code></pre>\n\n<p><strong>and my controllers for Game , Team is empty</strong></p>\n\n<pre><code>has_one :hometeam , :class_name =&gt; 'Team' \nhas_one :awayteam , :class_name =&gt; 'Team' \n</code></pre>\n"}, {"tags": ["json", "ruby", "sinatra", "settings"], "answers": [{"tags": [], "owner": {"reputation": 4866, "user_id": 6603195, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-nZGPkfcc0EE/AAAAAAAAAAI/AAAAAAAAAoE/op-TBiFRNzg/photo.jpg?sz=128", "display_name": "Marcin Ko\u0142odziej", "link": "https://stackoverflow.com/users/6603195/marcin-ko%c5%82odziej"}, "is_accepted": true, "score": 2, "last_activity_date": 1539705088, "last_edit_date": 1539705088, "creation_date": 1539704317, "answer_id": 52839219, "question_id": 52838941, "link": "https://stackoverflow.com/questions/52838941/ruby-sinatra-json-settings/52839219#52839219", "title": "Ruby Sinatra JSON settings", "body": "<p>You are shallow copying the hash. Which means that your <code>payload</code> has a new <code>object_id</code>, but <code>payload[\"test\"]</code> still points to the same object.</p>\n\n<pre><code>[2] pry(#&lt;Sinatra::Application&gt;)&gt; settings.my_json[\"test\"].object_id\n=&gt; 47444101678660\n[3] pry(#&lt;Sinatra::Application&gt;)&gt; settings.my_json.dup[\"test\"].object_id\n=&gt; 47444101678660\n</code></pre>\n\n<p>If you want to deep clone (there are several ways to do that):</p>\n\n<pre><code>[5] pry(#&lt;Sinatra::Application&gt;)&gt; payload = Marshal.load(Marshal.dump(settings.my_json))\n=&gt; {\"test\"=&gt;[]}\n[6] pry(#&lt;Sinatra::Application&gt;)&gt; payload[\"test\"].object_id\n=&gt; 70216811281680\n</code></pre>\n"}], "owner": {"reputation": 49, "user_id": 4174416, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-bgepS9uLmUs/AAAAAAAAAAI/AAAAAAAAAD0/833QaRIOiNw/photo.jpg?sz=128", "display_name": "Marco Gallo", "link": "https://stackoverflow.com/users/4174416/marco-gallo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 84, "favorite_count": 0, "accepted_answer_id": 52839219, "answer_count": 1, "score": 0, "last_activity_date": 1539705088, "creation_date": 1539703478, "question_id": 52838941, "link": "https://stackoverflow.com/questions/52838941/ruby-sinatra-json-settings", "title": "Ruby Sinatra JSON settings", "body": "<p>I wrote this extension in Sinatra:</p>\n\n<pre><code>#extension.rb\nrequire 'sinatra/base'\nrequire 'json'\n\n    module Sinatra\n      module Ibaf\n        module Helpers\n\n          def test\n            payload = settings.my_json.dup\n            payload[\"test\"] &lt;&lt; \"DONE\"\n            puts payload\n            \"OK\"\n          end   \n\n        end\n\n        def self.registered(app)\n          app.helpers Ibaf::Helpers\n          app.set :my_json, JSON.parse('{\"test\":[]}')\n\n          app.get \"/\" do\n             test\n          end\n        end\n\n      end   \n      register Ibaf\n    end\n</code></pre>\n\n<p>and myapp.rb</p>\n\n<pre><code>#app.rb\nrequire 'sinatra'\nrequire './extension.rb'\n</code></pre>\n\n<p>and running as jruby -S app.rb -p 80</p>\n\n<p>On first call to <a href=\"http://localhost\" rel=\"nofollow noreferrer\">http://localhost</a> the <code>payload</code> variable contains one element <code>\"DONE\"</code>. <br>On the second call <code>payload</code> contains two elements, why?<br>\nI expect that <code>settings.my_json.dup</code> return new object, why is modified?</p>\n\n<p>This is the output:</p>\n\n<pre><code>== Sinatra (v2.0.0) has taken the stage on 80 for development with backup from T\nrinidad\nDeploying from C:/Users/adminlocale/Desktop as /\nInitializing ProtocolHandler [\"http-bio-127.0.0.1-80\"]\nStarting ProtocolHandler [\"http-bio-127.0.0.1-80\"]\n{\"test\"=&gt;[\"DONE\"]}\n127.0.0.1 -  [16/Oct/2018:17:08:42 +0200] \"GET / \" 200 2 0.1110\n\n{\"test\"=&gt;[\"DONE\", \"DONE\"]}\n127.0.0.1 -  [16/Oct/2018:17:08:51 +0200] \"GET / \" 200 2 0.0250\n</code></pre>\n"}, {"tags": ["ruby", "performance"], "comments": [{"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 2, "creation_date": 1539702333, "post_id": 52838495, "comment_id": 92593139, "body": "Yes, that is basically what local variables are for. Ruby does not cache anything."}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1539702379, "post_id": 52838495, "comment_id": 92593169, "body": "<i>Sidenote:</i> your example is better written as <code>s = &quot;a b c d e&quot;; s.split[2..3].join</code> or <code>s.split.join[2..3]</code>."}, {"owner": {"reputation": 43, "user_id": 1834255, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b4f97aa107353b5fd80050b5b0ce37b5?s=128&d=identicon&r=PG", "display_name": "dafuloth", "link": "https://stackoverflow.com/users/1834255/dafuloth"}, "reply_to_user": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1539702949, "post_id": 52838495, "comment_id": 92593511, "body": "haha... thanks for the sidenote. Yeah, I just arbitrarily picked two elements, which happened to be consecutive and expressible as a range xD"}, {"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1539815407, "post_id": 52838495, "comment_id": 92643226, "body": "It&#39;s very easy to test whether Ruby caches the evaluation of expressions automatically: since <code>puts</code> <i>always</i> returns <code>nil</code>, Ruby would be allowed to cache any call to <code>puts</code>, and thus it would be impossible to print anything in Ruby, if that were true. <code>puts &#39;Hello&#39;; puts &#39;World&#39;</code> would print only <code>Hello</code>, because <code>puts &#39;World&#39;</code> has the same value as <code>puts &#39;Hello&#39;</code> and thus would be never evaluated."}], "answers": [{"tags": [], "owner": {"reputation": 4348, "user_id": 3435610, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/IBOFX.jpg?s=128&g=1", "display_name": "Sara Tibbetts", "link": "https://stackoverflow.com/users/3435610/sara-tibbetts"}, "is_accepted": true, "score": 3, "last_activity_date": 1539702889, "creation_date": 1539702889, "answer_id": 52838745, "question_id": 52838495, "link": "https://stackoverflow.com/questions/52838495/is-it-more-efficient-to-assign-an-evaluation-to-a-variable/52838745#52838745", "title": "Is it more efficient to assign an evaluation to a variable?", "body": "<p>Anything not set to a local variable will be reevaluated, so in your case it would be more efficient to set a local variable. </p>\n"}], "owner": {"reputation": 43, "user_id": 1834255, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b4f97aa107353b5fd80050b5b0ce37b5?s=128&d=identicon&r=PG", "display_name": "dafuloth", "link": "https://stackoverflow.com/users/1834255/dafuloth"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 45, "favorite_count": 0, "accepted_answer_id": 52838745, "answer_count": 1, "score": 0, "last_activity_date": 1539905349, "creation_date": 1539702113, "last_edit_date": 1539905349, "question_id": 52838495, "link": "https://stackoverflow.com/questions/52838495/is-it-more-efficient-to-assign-an-evaluation-to-a-variable", "title": "Is it more efficient to assign an evaluation to a variable?", "body": "<p>Does Ruby remember the results of what has already been evaluated? Say I have:</p>\n\n<pre><code>s = \"a b c d e\"\n</code></pre>\n\n<p>If I did:</p>\n\n<pre><code>s.split.join[2] + s.split.join[3] # =&gt; \"cd\"\n</code></pre>\n\n<p>Would it be more or less efficient to instead do:</p>\n\n<pre><code>x = s.split.join\nx[2] + x[3] # =&gt; \"cd\"\n</code></pre>\n\n<p>My thinking is that if I didn't assign <code>s.split.join</code> to a variable, then every time I use that value, Ruby would have to evaluate <code>s.split.join</code>. If <code>s.split.join</code> was called many times, that seems more costly than just checking the value of a single variable.</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "answers": [{"tags": [], "owner": {"reputation": 2496, "user_id": 3046905, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/692eb06201cbed91c3c6a9cf11ed0511?s=128&d=identicon&r=PG", "display_name": "Ilya Konyukhov", "link": "https://stackoverflow.com/users/3046905/ilya-konyukhov"}, "is_accepted": false, "score": 1, "last_activity_date": 1539705702, "last_edit_date": 1539705702, "creation_date": 1539704670, "answer_id": 52839314, "question_id": 52838375, "link": "https://stackoverflow.com/questions/52838375/undefined-method-in-my-service-objects-module/52839314#52839314", "title": "Undefined Method in my service objects module", "body": "<p>If I understand it correctly, the task is to refactor original action from the controller. Your refactored code has a list of problems, so to keep answer shorter let me skip reviewing it and focus on original action.</p>\n\n<p>The problems I see are:</p>\n\n<ul>\n<li><code>product_id</code> variable is initialized but not used</li>\n<li><code>order_id</code> variable in 1st branch of <code>if</code> condition is initialized but not used</li>\n<li><code>respond_to</code> block has condition for <code>html</code> format only. Since there is no code for other formats, it can be simplified</li>\n<li><code>OrderPaidCheckJob.set</code> method is placed after <code>redirect_to</code>, so it will never be called. To make it work, place it before <code>redirect_to</code></li>\n<li>Despite conditions of <code>if</code>, the action ends with <code>redirect_to</code> to the same path, only <code>notice</code> changes. So you could just set up right <code>notice</code>, and move <code>redirect_to</code> out of <code>if</code>s</li>\n<li><code>@product.ordinable = false; @product.save</code> can be simplified as <code>@product.update(ordinable: false)</code>. Since it is in both branches of <code>if</code>, it can be moved out of that block.</li>\n<li>Not sure why <code>if order.products &lt;&lt; @product</code>. When do you think this condition is falsey? In case of a problem adding it to the database, it will throw an exception.</li>\n<li><code>order.products.each do |x|</code> etc block can be simplified as <code>order.amount = @order_amountnew = order_amount + order.products.last.price</code> (I suspect you have an error here because you iterate over <code>products</code> but save the result for the last product only)</li>\n<li>you initialize instance variable <code>@order_amountnew</code> but do not use it later because of redirect. It can be removed I think</li>\n</ul>\n\n<p>Preliminary result:</p>\n\n<pre><code>def create\n  @product.update(ordinable: false)\n\n  if current_user.orders.where(paid: false).present?\n    order = current_user.orders.last\n    order_amount = order.amount\n    if order.products &lt;&lt; @product\n      order.amount = @order_amountnew = order_amount + order.products.last.price\n      order.save\n\n      notice = 'Product added to the cart!'\n    else\n      notice = 'There was a problem while adding the product to the cart!'\n    end\n\n  else\n    order = current_user.orders.new\n    order.save\n    order_id = order.id\n    order_amount = order.amount\n    if order.products &lt;&lt; @product\n      order.amount = @order_amountnew = order_amount + order.products.last.price\n      order.save\n\n      OrderPaidCheckJob.set(wait: 3.minutes).perform_later(order_id)\n\n      notice = 'Product added to the cart!'\n    else\n      notice = 'There was a problem while adding the product to the cart!'\n    end\n  end\n\n  redirect_to products_path, notice: notice\nend\n</code></pre>\n\n<p>Looks better and more readable? Since it still has the repeating code it can be DRYed even more. But I would recommend managing with problems I pointed out before refactoring it further.</p>\n"}, {"comments": [{"owner": {"reputation": 51, "user_id": 10192738, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EBCq0.jpg?s=128&g=1", "display_name": "Kaido", "link": "https://stackoverflow.com/users/10192738/kaido"}, "edited": false, "score": 0, "creation_date": 1539773408, "post_id": 52841618, "comment_id": 92621344, "body": "In the first solution, did you forget to implement the method amount right? If so can you show me how&#39;d you call it. About the delegate, i kinda understood what it does reading other examples, but in this case, I&#39;m a bit confused. The primary scope of it is just to avoid a repetition to write current_user.unpaid_orders and just unpaid_orders and orders.last right? I&#39; trying to understand it following this basic example i found here <a href=\"https://coderwall.com/p/wamyow/using-delegate-in-rails\" rel=\"nofollow noreferrer\">coderwall.com/p/wamyow/using-delegate-in-rails</a>"}, {"owner": {"reputation": 51, "user_id": 10192738, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EBCq0.jpg?s=128&g=1", "display_name": "Kaido", "link": "https://stackoverflow.com/users/10192738/kaido"}, "edited": false, "score": 0, "creation_date": 1539776757, "post_id": 52841618, "comment_id": 92623311, "body": "And is it a good practice to just put that delegate there? Shouldn&#39;t be inside a model? Thank you"}, {"owner": {"reputation": 18856, "user_id": 1359650, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/dffc4318ac93e728a26c8e8b51b4eb37?s=128&d=identicon&r=PG", "display_name": "jvillian", "link": "https://stackoverflow.com/users/1359650/jvillian"}, "reply_to_user": {"reputation": 51, "user_id": 10192738, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EBCq0.jpg?s=128&g=1", "display_name": "Kaido", "link": "https://stackoverflow.com/users/10192738/kaido"}, "edited": false, "score": 0, "creation_date": 1539793731, "post_id": 52841618, "comment_id": 92633829, "body": "In the first approach, you don&#39;t calculate and set <code>amount</code> on order. Instead you created <code>amount</code> as an instance method on the <code>Order</code> class. Then, you can all it whenever you like (for instance <code>@order.amount</code>) and the amount will be calculated based on the current <code>@order.products</code>."}, {"owner": {"reputation": 18856, "user_id": 1359650, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/dffc4318ac93e728a26c8e8b51b4eb37?s=128&d=identicon&r=PG", "display_name": "jvillian", "link": "https://stackoverflow.com/users/1359650/jvillian"}, "reply_to_user": {"reputation": 51, "user_id": 10192738, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EBCq0.jpg?s=128&g=1", "display_name": "Kaido", "link": "https://stackoverflow.com/users/10192738/kaido"}, "edited": false, "score": 0, "creation_date": 1539793851, "post_id": 52841618, "comment_id": 92633891, "body": "And, yes, the primary purpose of the <code>delegate</code> method (in this specific case) is just to tidy up the code. Instead of <code>order = unpaid_orders? ? orders.last : orders.create!</code>, you could do <code>order = current_user.unpaid_orders? ? current_user.orders.last : current_user.orders.create!</code>. So, it&#39;s just cosmetic."}, {"owner": {"reputation": 18856, "user_id": 1359650, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/dffc4318ac93e728a26c8e8b51b4eb37?s=128&d=identicon&r=PG", "display_name": "jvillian", "link": "https://stackoverflow.com/users/1359650/jvillian"}, "reply_to_user": {"reputation": 51, "user_id": 10192738, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EBCq0.jpg?s=128&g=1", "display_name": "Kaido", "link": "https://stackoverflow.com/users/10192738/kaido"}, "edited": false, "score": 0, "creation_date": 1539793937, "post_id": 52841618, "comment_id": 92633939, "body": "<code>delegate</code> does not need to be inside a model. It can go in any ruby class. This example should work just fine."}], "tags": [], "owner": {"reputation": 18856, "user_id": 1359650, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/dffc4318ac93e728a26c8e8b51b4eb37?s=128&d=identicon&r=PG", "display_name": "jvillian", "link": "https://stackoverflow.com/users/1359650/jvillian"}, "is_accepted": true, "score": 1, "last_activity_date": 1539713994, "last_edit_date": 1539713994, "creation_date": 1539713596, "answer_id": 52841618, "question_id": 52838375, "link": "https://stackoverflow.com/questions/52838375/undefined-method-in-my-service-objects-module/52841618#52841618", "title": "Undefined Method in my service objects module", "body": "<p>It seems to me you can refactor your <code>create</code> action without using services. (I'm a huge fan of services. I just don't think you need them here.)</p>\n\n<p>First, I would add a couple of methods to your User model, something like this:</p>\n\n<pre><code>class User &lt; ApplicationRecord\n\n  def unpaid_orders\n    orders.where(paid: false)\n  end\n\n  def unpaid_orders?\n    unpaid_orders.any?\n  end\n\nend\n</code></pre>\n\n<p>Then, I would make <code>amount</code> a method instead of an attribute, something like:</p>\n\n<pre><code>class Order &lt; ApplicationRecord \n\n  def amount\n    products.sum(&amp;:price)\n  end\n\nend\n</code></pre>\n\n<p>Then, in your controller, you can do something like:</p>\n\n<pre><code>delegate *%w(\n  unpaid_orders?\n  orders\n), to: :current_user\n\ndef create\n  order = unpaid_orders? ? orders.last : orders.create!\n  @product.update(ordinable: false)\n  if order.products &lt;&lt; @product \n    @notice = 'Product added to the Cart!'\n    OrderPaidCheckJob.set(wait: 3.minutes).perform_later(order.id) unless unpaid_orders?\n  else \n    @notice = 'There was a problem while adding the product to the cart!'\n  end\n  redirect_to products_path, notice: @notice\nend\n</code></pre>\n\n<p>If you don't want to make <code>amount</code> a method on <code>Order</code>, then you can do: </p>\n\n<pre><code>delegate *%w(\n  unpaid_orders?\n  orders\n), to: :current_user\n\ndef create\n  order = unpaid_orders? ? orders.last : orders.create!\n  @product.update(ordinable: false)\n  if order.products &lt;&lt; @product \n    order.update(amount: order.products.sum(&amp;:price))\n    @notice = 'Product added to the Cart!'\n    OrderPaidCheckJob.set(wait: 3.minutes).perform_later(order.id) unless unpaid_orders?\n  else \n    @notice = 'There was a problem while adding the product to the cart!'\n  end\n  redirect_to products_path, notice: @notice\nend\n</code></pre>\n"}], "owner": {"reputation": 51, "user_id": 10192738, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EBCq0.jpg?s=128&g=1", "display_name": "Kaido", "link": "https://stackoverflow.com/users/10192738/kaido"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 57, "favorite_count": 0, "accepted_answer_id": 52841618, "answer_count": 2, "score": 0, "last_activity_date": 1539713994, "creation_date": 1539701765, "last_edit_date": 1539703511, "question_id": 52838375, "link": "https://stackoverflow.com/questions/52838375/undefined-method-in-my-service-objects-module", "title": "Undefined Method in my service objects module", "body": "<p>I wanted to clean up and refactor a bit the code of my create method inside my orders controller, and I read that is a good practice to use service objects. Starting from this horrible code here:</p>\n\n<pre><code>def create\n  if current_user.orders.where(paid: false).present?\n    order = current_user.orders.last\n    order_id = order.id\n    product_id = @product.id\n    @product.ordinable = false\n    @product.save\n    order_amount = order.amount\n    if order.products &lt;&lt; @product\n      order.products.each do |x|\n        @order_amountnew = order_amount + x.price\n      end\n      order.amount = @order_amountnew\n      order.save\n      respond_to do |format|\n        format.html { redirect_to products_path, notice: 'Product added to the cart!' }\n      end\n    else\n      respond_to do |format|\n        format.html { redirect_to products_path, notice: 'There was a problem while adding the product to the cart!' }\n      end\n    end\n  else\n    product_id = @product.id\n    order = current_user.orders.new\n    order.save\n    order_id = order.id\n    @product.ordinable = false\n    @product.save\n    order_amount = order.amount\n    if order.products &lt;&lt; @product\n      order.products.each do |x|\n        @order_amountnew = order_amount + x.price\n      end\n      order.amount = @order_amountnew\n      order.save\n      respond_to do |format|\n        format.html { redirect_to products_path, notice: 'Product added to the cart!' }\n      end\n      OrderPaidCheckJob.set(wait: 3.minutes).perform_later(order_id)\n    else\n      respond_to do |format|\n        format.html { redirect_to products_path, notice: 'There was a problem while adding the product to the cart!' }\n      end\n    end\n  end\nend\n</code></pre>\n\n<p>i wanted to split the method in two segments basically so i created two modules in the services folder as follow.\nI called the first one order_present_create_service</p>\n\n<pre><code>module OrderPresentCreateService\n  class &lt;&lt; self\n    def create(params)\n      order = current_user.orders.last\n      order_id = order.id\n      product_id = @product.id\n      @product.ordinable = false\n      @product.save\n      order_amount = order.amount\n      if order.products &lt;&lt; @product\n        order.products.each do |x|\n          @order_amountnew = order_amount + x.price\n        end\n        order.amount = @order_amountnew\n        order.save\n        respond_to do |format|\n          format.html { redirect_to products_path, notice: 'Product added to the cart!' }\n        end\n      else\n        respond_to do |format|\n          format.html { redirect_to products_path, notice: 'There was a problem while adding the product to the cart!' }\n        end\n      end\n    end\n  end\nend\n</code></pre>\n\n<p>and i called the second one order_new_create_service</p>\n\n<pre><code>module OrderNewCreateService\n  class &lt;&lt; self\n    def create(params)\n      product_id = params[:id]\n      order = current_user.orders.new\n      order.save\n      order_id = order.id\n      @product.ordinable = false\n      @product.save\n      order_amount = order.amount\n      if order.products &lt;&lt; @product\n        order.products.each do |x|\n          @order_amountnew = order_amount + x.price\n        end\n        order.amount = @order_amountnew\n        order.save\n        respond_to do |format|\n          format.html { redirect_to products_path, notice: 'Product added to the cart!' }\n        end\n        OrderPaidCheckJob.set(wait: 3.minutes).perform_later(order_id)\n      else\n        respond_to do |format|\n          format.html { redirect_to products_path, notice: 'There was a problem while adding the product to the cart!' }\n        end\n      end\n    end\n  end\nend\n</code></pre>\n\n<p>here my new controller:</p>\n\n<pre><code>def create\n  if current_user.orders.where(paid: false).present?\n    OrderPresentCreateService.create(params)\n  else\n    OrderNewCreateService.create(params)\n  end\nend\n</code></pre>\n\n<p>I was simply following this article <a href=\"https://medium.freecodecamp.org/service-objects-explained-simply-for-ruby-on-rails-5-a8cc42a5441f\" rel=\"nofollow noreferrer\">here</a> to make it works.\nWhen i try to create an order, now i get this error:</p>\n\n<blockquote>\n  <p>undefined local variable or method `current_user' for OrderNewCreateService:Module</p>\n</blockquote>\n\n<p>At the beginning i was getting a similar error with product_id = @product.id, so i changed it in product_id = params[:id] and i make it work somehow. Where am i doing it wrong?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "activerecord", "sidekiq"], "answers": [{"comments": [{"owner": {"reputation": 19, "user_id": 10365284, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-BrGiuKCt_Sc/AAAAAAAAAAI/AAAAAAAAAAA/APUIFaMjF__kX01JdIgesLrpf3cjXO_vwg/mo/photo.jpg?sz=128", "display_name": "Rob", "link": "https://stackoverflow.com/users/10365284/rob"}, "edited": false, "score": 0, "creation_date": 1539852727, "post_id": 52840212, "comment_id": 92654244, "body": "I already tried and this does not work as it will lock the row for too long and it will timeout other requests. I might have found the solution with some autosave + sync."}], "tags": [], "owner": {"reputation": 61, "user_id": 7507549, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oBl6O.png?s=128&g=1", "display_name": "crice1988", "link": "https://stackoverflow.com/users/7507549/crice1988"}, "is_accepted": false, "score": 0, "last_activity_date": 1539707916, "creation_date": 1539707916, "answer_id": 52840212, "question_id": 52838221, "link": "https://stackoverflow.com/questions/52838221/activerecord-autosave-in-model/52840212#52840212", "title": "ActiveRecord Autosave in Model", "body": "<p>One solution would be to use a lock so that only one process can access the table at a time. Once you are done processing, you would release the lock.</p>\n\n<p>Check out the following link:\n<a href=\"https://api.rubyonrails.org/v5.1/classes/ActiveRecord/Locking/Pessimistic.html\" rel=\"nofollow noreferrer\">https://api.rubyonrails.org/v5.1/classes/ActiveRecord/Locking/Pessimistic.html</a></p>\n"}], "owner": {"reputation": 19, "user_id": 10365284, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-BrGiuKCt_Sc/AAAAAAAAAAI/AAAAAAAAAAA/APUIFaMjF__kX01JdIgesLrpf3cjXO_vwg/mo/photo.jpg?sz=128", "display_name": "Rob", "link": "https://stackoverflow.com/users/10365284/rob"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 134, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1539707916, "creation_date": 1539701269, "question_id": 52838221, "link": "https://stackoverflow.com/questions/52838221/activerecord-autosave-in-model", "title": "ActiveRecord Autosave in Model", "body": "<p>I am not sure how Ruby uses ActiveRecord to save data directly in the model code. How can I save data into the DB in the model itself?\nBasically my code run into a race condition for the following reason (Ruby/rails + ActiveRecord + Sidekiq):\n- My model does something like the following:</p>\n\n<pre><code>def is_present?(data)\n    memory['properties'].include?(data)\n\ndef update_mem(data, size)\n    if size != 0 &amp;&amp; memory['properties'].length == amount\n         memory['properties'].shift\n    memory['properties'].push(data) \n</code></pre>\n\n<p>It checks if a specific value is present (is_present), if it is not present in the memory['properties'] yet, it will add it.</p>\n\n<ul>\n<li>Clearly if there is only one thread accessing \"memory\", it works just fine but since Sidekiq is pretty fast there might be multiple threads running and will end up in a race condition (one thread write something, the other thread read what was in memory before).</li>\n</ul>\n\n<p>\"memory\" is actually a column in a table (MySQL) and as soon as I write something in it with \"memory['properties'].push(123)\" I would like to save them immediately.</p>\n\n<p>My question is, how can I prevent this weird race condition?\nWhat I would like to do is to save the data directly in the DB using the model. The problem is that it seems is not working.</p>\n\n<p>So, to access the data in the model, I use the following code:\nmemory['property'].push(123)\nor\nself.memory['property'].push(123)</p>\n\n<p>They both reference the memory column in the DB table.</p>\n\n<p>But then I want to do something like self.save! but it is not working at all.</p>\n\n<p>I tried to add the following code in the model iteself:</p>\n\n<pre><code>self.memory_will_change!\nself.memory['properties'].push(property)\nself.save!\n</code></pre>\n\n<p>Unfortunately, it is not working and I cannot save the data into the DB.</p>\n\n<p>This model is actually called via perform() using Sidekiq as per below:</p>\n\n<pre><code>model = Receivers.find(id)\nmodel.receive(data)\nmodel.time = Time.now\nmodel.save!\n</code></pre>\n\n<p>So the time is updated correctly but the memory (which is updated in the model when i call \"receive\") it does not get updated. Anyone knows how to overcome this problem? I need to save the data into the DB directly in the model.</p>\n\n<p>Thanks and I look forward to hearing from you.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "rvm"], "answers": [{"comments": [{"owner": {"reputation": 2037, "user_id": 8036670, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/rGA81.jpg?s=128&g=1", "display_name": "assembler", "link": "https://stackoverflow.com/users/8036670/assembler"}, "edited": false, "score": 0, "creation_date": 1539781809, "post_id": 52838990, "comment_id": 92626484, "body": "tried rvm in a different system with ubuntu as operating system and same issue... is that a glitch with rvm?"}], "tags": [], "owner": {"reputation": 803, "user_id": 7654691, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/W8Gni.jpg?s=128&g=1", "display_name": "R. Sierra", "link": "https://stackoverflow.com/users/7654691/r-sierra"}, "is_accepted": false, "score": 0, "last_activity_date": 1539703647, "creation_date": 1539703647, "answer_id": 52838990, "question_id": 52838093, "link": "https://stackoverflow.com/questions/52838093/failing-trying-to-install-ruby-in-linux-mint-19/52838990#52838990", "title": "failing trying to install ruby in linux mint 19", "body": "<p>There is nothing weird about the output of RVM, the first message is just telling that it has not found a compiled version of ruby for your specific OS(Linux Mint 19), so it will download all necessary files and compile it. \nThe second message states that when trying to update the repos there where some errors, so you should manually update the system and remove/disable any non-working repo, so that installation can continue.</p>\n"}, {"tags": [], "owner": {"reputation": 2037, "user_id": 8036670, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/rGA81.jpg?s=128&g=1", "display_name": "assembler", "link": "https://stackoverflow.com/users/8036670/assembler"}, "is_accepted": true, "score": 2, "last_activity_date": 1539718371, "creation_date": 1539718371, "answer_id": 52842826, "question_id": 52838093, "link": "https://stackoverflow.com/questions/52838093/failing-trying-to-install-ruby-in-linux-mint-19/52842826#52842826", "title": "failing trying to install ruby in linux mint 19", "body": "<p>Since I'm a newcomer into Ruby and into Rails and I'm still need to read and to research a lot more I found a valid solution: using rbenv.</p>\n\n<p>Here is what I did:</p>\n\n<pre><code>$ git clone https://github.com/rbenv/rbenv.git ~/.rbenv\n$ echo 'export PATH=\"$HOME/.rbenv/bin:$PATH\"' &gt;&gt; ~/.bashrc\n$ echo 'eval \"$(rbenv init -)\"' &gt;&gt; ~/.bashrc\n$ exec $SHELL\n$ git clone https://github.com/rbenv/ruby-build.git ~/.rbenv/plugins/ruby-build\n$ echo 'export PATH=\"$HOME/.rbenv/plugins/ruby-build/bin:$PATH\"' &gt;&gt; ~/.bashrc\n$ exec $SHELL\n$ sudo apt-get install -y libssl-dev libreadline-dev zlib1g-dev readline-doc libssl-doc\n$ rbenv install 2.5.1\n$ rbenv global 2.5.1\n$ gem install bundler\n$ rbenv rehash\n$ curl -sL https://deb.nodesource.com/setup_8.x | sudo -E bash -\n$ sudo apt-get install -y nodejs\n$ gem install rails -v 5.2.0\n$ rbenv rehash\n</code></pre>\n\n<p>There is a lot of command line and some of them are repeated, but I think it worth it. No errors, no complains, my terminal is crystal clear. Everything went like a charm.</p>\n\n<p>Credit goes to the people in <a href=\"https://gorails.com\" rel=\"nofollow noreferrer\">https://gorails.com</a>. I thank them and I hope this might be helpful.</p>\n"}], "owner": {"reputation": 2037, "user_id": 8036670, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/rGA81.jpg?s=128&g=1", "display_name": "assembler", "link": "https://stackoverflow.com/users/8036670/assembler"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1160, "favorite_count": 0, "accepted_answer_id": 52842826, "answer_count": 2, "score": 1, "last_activity_date": 1539718371, "creation_date": 1539700920, "last_edit_date": 1539701231, "question_id": 52838093, "link": "https://stackoverflow.com/questions/52838093/failing-trying-to-install-ruby-in-linux-mint-19", "title": "failing trying to install ruby in linux mint 19", "body": "<p>I'm trying to install Ruby on Rails in Linux Mint 19. First of all I tried installing </p>\n\n<p><code>$ sudo apt install ruby-full</code> </p>\n\n<p>from the Repo. Then it began to complain trying to install gems or even if trying to update gems. So I rolled back everything and tried installing Ruby from rvm. Here is what I did:</p>\n\n<p><code>$ command curl -sSL https://rvm.io/mpapis.asc | gpg --import</code></p>\n\n<p>and</p>\n\n<p><code>$ \\curl -sSL https://get.rvm.io | bash -s stable --ruby</code></p>\n\n<p>The first weird thing was this orange message:</p>\n\n<pre><code>    No binary rubies available for: mint/19/x86_64/ruby-2.5.1.\n    Continuing with compilation. Please read 'rvm help mount' to get more information\non binary rubies.\n</code></pre>\n\n<p>Then another weird thing:</p>\n\n<pre><code>Checking requirements for mint.\nInstalling requirements for mint.\nUpdating system.........There has been an error while updating your system using `apt-get`.\nIt seems that there are some 404 Not Found errors for repositories listed in:\n\n    /etc/apt/sources.list\n    /etc/apt/sources.list.d/*.list\n\nMake sure that all repositories are available from your system and verify your setup by running manually:\n\n    sudo apt-get update\n\nMake sure that it works correctly before proceeding with RVM.\n</code></pre>\n\n<p>The repository is the official one that comes with the Mint installation. And finally a red message yelling this:</p>\n\n<pre><code>Error running 'requirements_debian_update_system ruby-2.5.1',\nplease read /home/username/.rvm/log/1539700159_ruby-2.5.1/update_system.log\nRequirements installation failed with status: 100.\n</code></pre>\n\n<p>How can I solve this?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "activerecord"], "answers": [{"tags": [], "owner": {"reputation": 2487, "user_id": 8098012, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0cbdb5ca9b079de1c9700271166feead?s=128&d=identicon&r=PG", "display_name": "Pavel Mikhailyuk", "link": "https://stackoverflow.com/users/8098012/pavel-mikhailyuk"}, "is_accepted": false, "score": 1, "last_activity_date": 1539700817, "creation_date": 1539700817, "answer_id": 52838057, "question_id": 52837491, "link": "https://stackoverflow.com/questions/52837491/activerecord-counting-with-join/52838057#52838057", "title": "Activerecord counting with join", "body": "<p>It is <a href=\"https://sql.sh/cours/having\" rel=\"nofollow noreferrer\">standard</a> <code>SELECT ... JOIN ... GROUP BY ... HAVING ... ORDER</code> SQL task:</p>\n\n<pre><code>Proxy.\n  joins(:configs).\n  group(:id).\n  having('proxies.capacity &gt; count(configs.id)').\n  order('count(configs.id)')\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 2560, "user_id": 5112122, "user_type": "registered", "profile_image": "https://graph.facebook.com/10206053108358704/picture?type=large", "display_name": "Horacio", "link": "https://stackoverflow.com/users/5112122/horacio"}, "edited": false, "score": 0, "creation_date": 1539704992, "post_id": 52838205, "comment_id": 92594736, "body": "This helps me because makes the select more light, I will do more selects than adds on the configs."}], "tags": [], "owner": {"reputation": 803, "user_id": 7654691, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/W8Gni.jpg?s=128&g=1", "display_name": "R. Sierra", "link": "https://stackoverflow.com/users/7654691/r-sierra"}, "is_accepted": true, "score": 1, "last_activity_date": 1539701219, "creation_date": 1539701219, "answer_id": 52838205, "question_id": 52837491, "link": "https://stackoverflow.com/questions/52837491/activerecord-counting-with-join/52838205#52838205", "title": "Activerecord counting with join", "body": "<p>Try using a <a href=\"https://api.rubyonrails.org/classes/ActiveRecord/Associations/ClassMethods.html#method-i-belongs_to\" rel=\"nofollow noreferrer\">:counter_cache</a> in the associations</p>\n\n<pre><code>class Proxy  \n # configs_count integer\n has_many :configs  \nend\n\nclass Config  \n belongs_to :proxy, counter_cache: true\nend\n</code></pre>\n\n<p>Then you could do something like:</p>\n\n<pre><code>Proxy.where(country: country)\n     .where(\"capacity &gt; ?\", :configs_count)\n     .order_by(:configs_count)\n</code></pre>\n"}], "owner": {"reputation": 2560, "user_id": 5112122, "user_type": "registered", "profile_image": "https://graph.facebook.com/10206053108358704/picture?type=large", "display_name": "Horacio", "link": "https://stackoverflow.com/users/5112122/horacio"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 28, "favorite_count": 0, "accepted_answer_id": 52838205, "answer_count": 2, "score": 0, "last_activity_date": 1539701219, "creation_date": 1539699056, "last_edit_date": 1539699385, "question_id": 52837491, "link": "https://stackoverflow.com/questions/52837491/activerecord-counting-with-join", "title": "Activerecord counting with join", "body": "<p>I have 2 activerecord relation</p>\n\n<pre><code>class Proxy  \n   # capacity integer  \n   # country string  \n   has_many :configs  \nend\n\nclass Config  \n   belongs_to :proxy  \n   # proxy_id  \n   # port integer \nend\n</code></pre>\n\n<p>I want to find in a activerecord query all proxies for a specific country, where the capacity is less than his configs and order them by configs counter.</p>\n\n<p>I mean I was trying to do something like (pseudo activrecord example)</p>\n\n<pre><code>Proxy.joins(:configs).where(country: country)\n                    .where(\"capacity &gt; ?\", :configs.count)\n                    .order_by(:configs.count)\n</code></pre>\n\n<p>I guess that maybe I'm tangled with my problem and it has an easy solution.</p>\n\n<p>Thanks in advance!</p>\n"}, {"tags": ["ruby", "file-io"], "comments": [{"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1539840454, "post_id": 52837175, "comment_id": 92648538, "body": "Note that a file extension is just a convention, and os it is not one-to-one. Even if you were to find out what file format the file is written in, you cannot pick the extension automatically."}], "answers": [{"tags": [], "owner": {"reputation": 1407, "user_id": 3859961, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/625444c465d9823afd183cf8f62efa51?s=128&d=identicon&r=PG&f=1", "display_name": "An Nguyen", "link": "https://stackoverflow.com/users/3859961/an-nguyen"}, "is_accepted": false, "score": 1, "last_activity_date": 1539778640, "creation_date": 1539778640, "answer_id": 52854707, "question_id": 52837175, "link": "https://stackoverflow.com/questions/52837175/getting-an-unknown-extension-of-a-file/52854707#52854707", "title": "Getting an unknown extension of a file", "body": "<p>You might need to detect the <a href=\"https://en.wikipedia.org/wiki/Media_type\" rel=\"nofollow noreferrer\">MIME type</a> of a file. </p>\n\n<p>In Linux, you could determine the MIME via  <code>file --mime-type</code>. So, one approach is to call the shell command: </p>\n\n<p><code>mime = %x[file --mime-type #{path} | cut -d' ' -f2]</code></p>\n\n<p>Or you can use <a href=\"https://github.com/minad/mimemagic\" rel=\"nofollow noreferrer\">mimemagic</a> gem to do it:</p>\n\n<pre><code>require 'mimemagic'\n\nMimeMagic.by_magic(File.open('image.jpg')).type # =&gt; \"image/jpeg\" \n</code></pre>\n"}], "owner": {"reputation": 47, "user_id": 9812419, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "TheHedge", "link": "https://stackoverflow.com/users/9812419/thehedge"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 35, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1539840362, "creation_date": 1539698143, "last_edit_date": 1539840362, "question_id": 52837175, "link": "https://stackoverflow.com/questions/52837175/getting-an-unknown-extension-of-a-file", "title": "Getting an unknown extension of a file", "body": "<p>I have a directory path for files that include the name of the file itself, but the extension of the files have been deleted. I have:</p>\n\n<pre><code>Path = \"repository/something/306/072/437/985/825\" \n</code></pre>\n\n<p>where <code>825</code> is the name of the file without an extension. This file can either be <code>.jpg</code> or <code>.txt</code> extension.</p>\n\n<p>I cannot find any functions in ruby for detecting the extension of a file if I have not been given the extension. Anyways to do this?</p>\n"}, {"tags": ["ruby", "ternary-operator"], "comments": [{"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 4, "creation_date": 1539697722, "post_id": 52836845, "comment_id": 92590106, "body": "The shorthand for <code>x ? x : y</code> is <code>x || y</code> for nearly all not esoteric languages."}, {"owner": {"reputation": 12629, "user_id": 4739257, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/MdhEs.jpg?s=128&g=1", "display_name": "Ilya", "link": "https://stackoverflow.com/users/4739257/ilya"}, "edited": false, "score": 0, "creation_date": 1539697907, "post_id": 52836845, "comment_id": 92590226, "body": "It looks like Rails."}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 2, "creation_date": 1539698071, "post_id": 52836845, "comment_id": 92590330, "body": "Take a look at Rails&#39; <a href=\"https://github.com/rails/rails/blob/fc5dd0b85189811062c85520fd70de8389b55aeb/activerecord/lib/active_record/relation.rb#L163-L165\" rel=\"nofollow noreferrer\"><code>find_or_create_by</code></a> (hint: it&#39;s <code>find_by(...) || create(...)</code>)"}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1539734750, "post_id": 52836845, "comment_id": 92607086, "body": "Note that <code>find_by_name(name) ? find_by_name(name) : create(name)</code> is in general not be the same as <code>x = find_by_name(name);  x ? x : create(name)</code>. Suppose, for example, <code>@tot = 0; def find_by_name(name); @tot += 1; name; end</code>. In the first case, <code>@tot #=&gt; 2</code>, in the second, <code>@tot #=&gt; 1</code>. Note that  <code>self.</code> is not needed, even if it were used by the method."}], "answers": [{"comments": [{"owner": {"reputation": 42085, "user_id": 3444240, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/OjOru.jpg?s=128&g=1", "display_name": "potashin", "link": "https://stackoverflow.com/users/3444240/potashin"}, "reply_to_user": {"reputation": 6375, "user_id": 6826164, "user_type": "registered", "accept_rate": 39, "profile_image": "https://lh6.googleusercontent.com/-CKThqFqe5Eo/AAAAAAAAAAI/AAAAAAAAP10/ih0uh1YgT_I/photo.jpg?sz=128", "display_name": "Jonathan Tuzman", "link": "https://stackoverflow.com/users/6826164/jonathan-tuzman"}, "edited": false, "score": 0, "creation_date": 1539701324, "post_id": 52836884, "comment_id": 92592494, "body": "@JonathanTuzman: it is going to return <code>find_by_name(name)</code> if it is present (not nil nor false) or <code>create(name)</code> otherwise"}, {"owner": {"reputation": 930, "user_id": 3577922, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/eURpm.jpg?s=128&g=1", "display_name": "Masa Sakano", "link": "https://stackoverflow.com/users/3577922/masa-sakano"}, "reply_to_user": {"reputation": 6375, "user_id": 6826164, "user_type": "registered", "accept_rate": 39, "profile_image": "https://lh6.googleusercontent.com/-CKThqFqe5Eo/AAAAAAAAAAI/AAAAAAAAP10/ih0uh1YgT_I/photo.jpg?sz=128", "display_name": "Jonathan Tuzman", "link": "https://stackoverflow.com/users/6826164/jonathan-tuzman"}, "edited": false, "score": 0, "creation_date": 1539710780, "post_id": 52836884, "comment_id": 92597672, "body": "@JonathanTuzman In Ruby, <code>a || b</code> never returns a boolean object (<code>true</code> or <code>false</code>) unless the object <code>a</code> and/or <code>b</code> is indeed a boolean (<code>true</code> or <code>false</code>, or in other words an instance of <code>TrueClass</code> or <code>FalseClass</code>)."}], "tags": [], "owner": {"reputation": 42085, "user_id": 3444240, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/OjOru.jpg?s=128&g=1", "display_name": "potashin", "link": "https://stackoverflow.com/users/3444240/potashin"}, "is_accepted": true, "score": 5, "last_activity_date": 1539697636, "last_edit_date": 1539697636, "creation_date": 1539697304, "answer_id": 52836884, "question_id": 52836845, "link": "https://stackoverflow.com/questions/52836845/shorthand-for-x-x-y/52836884#52836884", "title": "Shorthand for x ? x : y", "body": "<p>you can just use <code>||</code> operator:</p>\n\n<pre><code>def find_or_create_by_name(name)\n  find_by_name(name) || create(name)\nend\n</code></pre>\n"}], "owner": {"reputation": 6375, "user_id": 6826164, "user_type": "registered", "accept_rate": 39, "profile_image": "https://lh6.googleusercontent.com/-CKThqFqe5Eo/AAAAAAAAAAI/AAAAAAAAP10/ih0uh1YgT_I/photo.jpg?sz=128", "display_name": "Jonathan Tuzman", "link": "https://stackoverflow.com/users/6826164/jonathan-tuzman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 68, "favorite_count": 0, "accepted_answer_id": 52836884, "answer_count": 1, "score": 0, "last_activity_date": 1539840601, "creation_date": 1539697210, "last_edit_date": 1539840601, "question_id": 52836845, "link": "https://stackoverflow.com/questions/52836845/shorthand-for-x-x-y", "title": "Shorthand for x ? x : y", "body": "<p>Is there a shorthand for <code>x ? x : y</code>? A relatively tame example:</p>\n\n<pre><code>def find_or_create_by_name(name)\n    self.find_by_name(name) ? self.find_by_name(name) : self.create(name)\nend\n</code></pre>\n\n<p>Of course I could do something like</p>\n\n<pre><code>def find_or_create_by_name(name)\n    x = self.find_by_name(name)\n    x ? x : self.create(name)\nend\n</code></pre>\n\n<p>but then I'm starting to lose the space I've saved with the ternary operator in the first place. (and if I use a full <code>if</code> statement, the same redundancy would occur.</p>\n"}, {"tags": ["ruby", "excel", "roo-gem"], "comments": [{"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1539684421, "post_id": 52832810, "comment_id": 92582056, "body": "Use <code>workbook.sheets.first.parse(...)</code>."}, {"owner": {"reputation": 161, "user_id": 1954572, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/f096a7e09f222b100a5eaeb95bf459c8?s=128&d=identicon&r=PG", "display_name": "AKarpun", "link": "https://stackoverflow.com/users/1954572/akarpun"}, "reply_to_user": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1539688127, "post_id": 52832810, "comment_id": 92584115, "body": "Hi, doesn&#39;t work:  undefined method `parse&#39; for &quot;Sheet1&quot;:String (NoMethodError)"}], "answers": [{"tags": [], "owner": {"reputation": 12464, "user_id": 1376448, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6f16da5431a99911ebc32093a28bc591?s=128&d=identicon&r=PG", "display_name": "kiddorails", "link": "https://stackoverflow.com/users/1376448/kiddorails"}, "is_accepted": true, "score": 1, "last_activity_date": 1539690305, "creation_date": 1539690305, "answer_id": 52834739, "question_id": 52832810, "link": "https://stackoverflow.com/questions/52832810/ruby-roo-gem-read-excel-xlsx-sheet-into-hash/52834739#52834739", "title": "Ruby Roo Gem - read Excel xlsx sheet into Hash", "body": "<p>Work on sheet</p>\n\n<pre><code># Open the workbook\nwb = Roo::Spreadsheet.open '/Users/ankur/Desktop/wb.xlsx'\n# Get first sheet\nsheet = wb.sheet(0)\n# Call #parse on that\nsheet.parse(Fruits: \"Fruits\", Qty: \"Qty\", Location:\"Location\", clean:true)\n#=&gt; [{:Fruits=&gt;\"apples\", :Qty=&gt;5, :Location=&gt;\"Kitchen\"}, {:Fruits=&gt;\"pearls\", :Qty=&gt;10, :Location=&gt;\"Bag\"}, {:Fruits=&gt;\"plums\", :Qty=&gt;15, :Location=&gt;\"Bagpack\"}]\n</code></pre>\n"}], "owner": {"reputation": 161, "user_id": 1954572, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/f096a7e09f222b100a5eaeb95bf459c8?s=128&d=identicon&r=PG", "display_name": "AKarpun", "link": "https://stackoverflow.com/users/1954572/akarpun"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2038, "favorite_count": 0, "accepted_answer_id": 52834739, "answer_count": 1, "score": 0, "last_activity_date": 1539690305, "creation_date": 1539683745, "question_id": 52832810, "link": "https://stackoverflow.com/questions/52832810/ruby-roo-gem-read-excel-xlsx-sheet-into-hash", "title": "Ruby Roo Gem - read Excel xlsx sheet into Hash", "body": "<p>I'm stuck - I need to read Excel sheet into hash, I decided to go with the ROO gem, but I can't understand documentation. Please see below:</p>\n\n<p>I got excel spreadsheet:</p>\n\n<pre><code>Fruits   Qty   Location\napples   5     Kitchen\npears    10    Bag\nplums    15    Backpack\n</code></pre>\n\n<p>I'd like to get this into array of hashes:</p>\n\n<pre><code>myhash =[\n{Fruits: \"apples\", Qty: 5, Location: \"Kitchen\"},\n{Fruits: \"pears\", Qty: 10, Location: \"Bag\"},\n{Fruits: \"plums\", Qty: 15, Location: \"Backpack\"}\n}\n</code></pre>\n\n<p>Now in roo documentation I found this:</p>\n\n<pre><code>Use sheet.parse to return an array of rows. Column names can be a String or a Regexp.\n\nsheet.parse(id: /UPC|SKU/, qty: /ATS*\\sATP\\s*QTY\\z/)\n# =&gt; [{:id =&gt; 727880013358, :qty =&gt; 12}, ...]\n</code></pre>\n\n<p>But when I try the following code, I got an error: \" undefined local variable or method `sheet' for main:Object (NameError)\"</p>\n\n<pre><code>require 'roo'\nworkbook = Roo::Spreadsheet.open './fruits.xlsx'\nworkbook.default_sheet = workbook.sheets.first\nsheet.parse(Fruits: \"Fruits\", Qty: \"Qty\", Location:\"Location\", clean:true)\n</code></pre>\n\n<p>I know I need to define sheet somehow, but first I can't find any examples in documentation,. and second:</p>\n\n<pre><code>Almost all methods have an optional argument sheet. If this parameter is omitted, the default_sheet will be used.\n</code></pre>\n\n<p>I don't mind to use any other gem that has better documentation and can work with both xls and xslx documents</p>\n\n<p>Please help,\nThank you in advance</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1539684268, "post_id": 52832791, "comment_id": 92581975, "body": "Why not <code>ErrorHandler.handle_error { Application.run }</code>, or something alone that line instead of wrapping every single method? Or send the notification from an <a href=\"http://ruby-doc.org/core-2.5.1/Kernel.html#method-i-at_exit\" rel=\"nofollow noreferrer\"><code>at_exit</code></a> hook if <code>$!</code> is present."}, {"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1539814870, "post_id": 52832791, "comment_id": 92643080, "body": "<code>super</code> calls the overridden method, but you are not overriding anything, you are over<b>writing</b> it. So, it&#39;s gone and you cannot call it anymore."}], "answers": [{"comments": [{"owner": {"reputation": 327, "user_id": 4942323, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jxEAB.jpg?s=128&g=1", "display_name": "Sepp", "link": "https://stackoverflow.com/users/4942323/sepp"}, "edited": false, "score": 1, "creation_date": 1539689894, "post_id": 52832851, "comment_id": 92585141, "body": "Your approach works just great in my case! Thanks a lot!  <i>You forgot to close the parentheses <code>prepend(....)</code></i>"}], "tags": [], "owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "is_accepted": true, "score": 3, "last_activity_date": 1539690319, "last_edit_date": 1539690319, "creation_date": 1539683885, "answer_id": 52832851, "question_id": 52832791, "link": "https://stackoverflow.com/questions/52832791/override-all-instance-methods-of-a-class-using-define-method-in-ruby/52832851#52832851", "title": "Override all instance methods of a class using define_method in Ruby", "body": "<p>If you want to call <code>super</code> you should use <a href=\"https://ruby-doc.org/core/Module.html#method-i-prepend\" rel=\"nofollow noreferrer\"><code>Module#prepend</code></a>:</p>\n\n<pre><code>ims = instance_methods(false)\nprepend(Module.new do\n  ims.each do |method_name|\n    define_method(method_name) do\n      ErrorHandler.handle_error { super() }\n    end\n  end\nend)\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 1, "creation_date": 1539687366, "post_id": 52833193, "comment_id": 92583673, "body": "<code>class Proxy &lt; BasicObject</code> is way safer when <code>Proxy</code> relies on <code>method_missing</code>."}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1539687428, "post_id": 52833193, "comment_id": 92583714, "body": "Also, never rescue <code>Exception</code>s, rescue <code>StandardError</code>."}, {"owner": {"reputation": 51, "user_id": 6630488, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/25d94e64c8923922912d76f811e50cdb?s=128&d=identicon&r=PG", "display_name": "Interdictor", "link": "https://stackoverflow.com/users/6630488/interdictor"}, "reply_to_user": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1539688154, "post_id": 52833193, "comment_id": 92584126, "body": "Thank you for the corrections. Since I am re-raising the exception which is the difference with StandardError?  I will use BasicObject for my proxies from now!"}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1539688256, "post_id": 52833193, "comment_id": 92584174, "body": "Basically, it makes not much sense. How do you expect to rescue from e.g. OOM?"}, {"owner": {"reputation": 327, "user_id": 4942323, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jxEAB.jpg?s=128&g=1", "display_name": "Sepp", "link": "https://stackoverflow.com/users/4942323/sepp"}, "edited": false, "score": 0, "creation_date": 1539690141, "post_id": 52833193, "comment_id": 92585282, "body": "Thanks for your interesting approach! Working with the missing_method hook is really a cool idea, but I think Aleksei Matiushkin approach works best for me."}], "tags": [], "owner": {"reputation": 51, "user_id": 6630488, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/25d94e64c8923922912d76f811e50cdb?s=128&d=identicon&r=PG", "display_name": "Interdictor", "link": "https://stackoverflow.com/users/6630488/interdictor"}, "is_accepted": false, "score": 2, "last_activity_date": 1539687384, "last_edit_date": 1539687384, "creation_date": 1539684977, "answer_id": 52833193, "question_id": 52832791, "link": "https://stackoverflow.com/questions/52832791/override-all-instance-methods-of-a-class-using-define-method-in-ruby/52833193#52833193", "title": "Override all instance methods of a class using define_method in Ruby", "body": "<p>I suggest you to use the Proxy pattern, that will allow you to inject any instance of MyClass into the proxy and then, in the proxy, you can define any extra behaviour you want.</p>\n\n<p>Here you have an exercise that teach you how to create a proxy:</p>\n\n<p><a href=\"https://github.com/edgecase/ruby_koans/blob/master/src/about_proxy_object_project.rb\" rel=\"nofollow noreferrer\">https://github.com/edgecase/ruby_koans/blob/master/src/about_proxy_object_project.rb</a></p>\n\n<p>At the end you will have something like</p>\n\n<pre><code>class Proxy\n  def initialize(target_object)\n    @target_object = target_object\n  end\n\n  def missing_method(method_symbol, *args, &amp;block)\n    begin\n      @target_object.__send__(method_symbol, *args, &amp;block)\n    rescue Exception =&gt; ex\n      SlackNotifier.notify(ex)\n      raise ex\n    end\n  end\nend\n</code></pre>\n"}], "owner": {"reputation": 327, "user_id": 4942323, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jxEAB.jpg?s=128&g=1", "display_name": "Sepp", "link": "https://stackoverflow.com/users/4942323/sepp"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 605, "favorite_count": 0, "closed_date": 1539815027, "accepted_answer_id": 52832851, "answer_count": 2, "score": 0, "last_activity_date": 1539690319, "creation_date": 1539683706, "question_id": 52832791, "link": "https://stackoverflow.com/questions/52832791/override-all-instance-methods-of-a-class-using-define-method-in-ruby", "closed_reason": "Duplicate", "title": "Override all instance methods of a class using define_method in Ruby", "body": "<p>To centralize the error handling of my application, I created the class <code>ErrorHandling</code>. This class should log all my errors, notify me via Slack, etc.</p>\n\n<pre><code>class ErrorHandler\n    def self.handle_error\n        yield\n    rescue =&gt; e\n        log_error(e.message)\n        notify_via_slack(e.message)\n        # etc.\n    end\nend\n</code></pre>\n\n<p>I need to wrap all the methods of <code>MyClass</code> manually within <code>ErrorHandler.handle_error</code> to make use of the central error handling.</p>\n\n<pre><code>class MyClass\n    def method1\n        ErrorHandler.handle_error do\n            raise StandardError, 'my error msg'\n        end\n    end\n\n    def method2\n        ErrorHandler.handle_error do\n            raise StandardError, 'my error msg'\n        end\n    end\nend\n</code></pre>\n\n<p>This will pollute my code unnecessarily.\nI thought about dynamically overriding my methods, so I don't have to wrap them manually.</p>\n\n<pre><code>class MyClass\n    def method1\n        raise StandardError, 'my error msg'\n    end\n\n    def method2\n        raise StandardError, 'my error msg'\n    end\n\n    instance_methods(false).each do |method_name| # instance_methods(false) =&gt; [:method1, :method2]\n        define_method(method_name) do\n            ErrorHandler.handle_error do\n                super()\n            end\n        end\n    end\nend\n</code></pre>\n\n<p>Unfortunately this code won't work. Is it possible to dynamically override the methods of <code>MyClass</code>?</p>\n\n<p>My goal is to dynamically override all instance methods of a class to make use of the central error handling, so I don't have to manually modify every method.</p>\n\n<p>Thanks for your help!</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "google-calendar-api"], "answers": [{"tags": [], "owner": {"reputation": 70965, "user_id": 1841839, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/ZyKjr.png?s=128&g=1", "display_name": "DaImTo", "link": "https://stackoverflow.com/users/1841839/daimto"}, "is_accepted": false, "score": 0, "last_activity_date": 1539681546, "creation_date": 1539681546, "answer_id": 52832052, "question_id": 52831792, "link": "https://stackoverflow.com/questions/52831792/google-calendar-api-update-timezone-from-utc-to-asia-tokyo/52832052#52832052", "title": "Google Calendar API: Update Timezone from UTC to &#39;Asia/Tokyo&#39;", "body": "<p>Events are set to the timezone of the calendar itself.  If you do a <a href=\"https://developers.google.com/calendar/v3/reference/calendars/get\" rel=\"nofollow noreferrer\">calendar.get</a> on the calendar itself you can see what timezone its set to.</p>\n\n<pre><code>{\n \"kind\": \"calendar#calendar\",\n \"etag\": \"\\\"ze8zJIc0rbkO4aY_gGX0swNYq0/WK1K2C9CsAxePbI13h8-KuIOLek\\\"\",\n \"id\": \"xxxxx@gmail.com\",\n \"summary\": \"xxxx@gmail.com\",\n \"timeZone\": \"Europe/Copenhagen\",\n \"conferenceProperties\": {\n  \"allowedConferenceSolutionTypes\": [\n   \"eventHangout\"\n  ]\n }\n}\n</code></pre>\n\n<p>So when creating your events you will need to take the timezone of the calendar into consideration when setting the event time.   There are a large number of issues relating to creating events with a time zone <a href=\"https://issuetracker.google.com/issues?q=componentid:191627%2B\" rel=\"nofollow noreferrer\">here</a></p>\n"}], "owner": {"reputation": 601, "user_id": 9315566, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-pnkVEz0JwTw/AAAAAAAAAAI/AAAAAAAAASo/NlxvDhY5hi0/photo.jpg?sz=128", "display_name": "Shun Yamada", "link": "https://stackoverflow.com/users/9315566/shun-yamada"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 157, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1539681546, "creation_date": 1539680689, "question_id": 52831792, "link": "https://stackoverflow.com/questions/52831792/google-calendar-api-update-timezone-from-utc-to-asia-tokyo", "title": "Google Calendar API: Update Timezone from UTC to &#39;Asia/Tokyo&#39;", "body": "<p>I have difficulty in getting correct timezone via Google Calendar API on Ruby on Rails. I user <code>google-ruby-client</code>. </p>\n\n<p>result:</p>\n\n<pre><code>#&lt;CalendarEvent:0x00007ffa082f49f0\nid: 7,\nstart_at: Tue, 23 Oct 2018 02:00:00 UTC +00:00,\nend_at: Tue, 23 Oct 2018 03:00:00 UTC +00:00,\nsummary: \"MTG\",\n</code></pre>\n\n<p>code:</p>\n\n<pre><code>  calendar = Google::Apis::CalendarV3::Calendar.new({ discription: 'random', summary:(email.sub(/@.*/, \"\")+'-random')})\n  service = Google::Apis::CalendarV3::CalendarService.new\n  service.authorization = client\n\n  # Generate calendar id\n  _calendar = service.insert_calendar(calendar)\n\n  now = Time.now.iso8601\n  still = Time.now.since(1.month).iso8601\n  items = service.fetch_all do |token|\n    service.list_events('primary',\n                          single_events: true,\n                          order_by: 'startTime',\n                          time_min: now,\n                          time_max: still,\n                          time_zone: 'Asia/Tokyo',\n                          page_token: token)\n  end\n\n  items.each do |event|        \n    calendar_event = CalendarEvent.new(\n      uid: event.id,\n      start_at: event.start.date_time,\n      end_at: event.end.date_time,\n      summary: event.summary,\n    )\n    calendar_event.save\n  end\n</code></pre>\n\n<p>I want to get event detail with Asia/Tokyo timezone or UTC +9h, so do you guys have any ideas to stack overflow?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "paperclip"], "owner": {"reputation": 21, "user_id": 9003945, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zokQR.jpg?s=128&g=1", "display_name": "m1 e1r0r", "link": "https://stackoverflow.com/users/9003945/m1-e1r0r"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 47, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1539673010, "creation_date": 1539673010, "question_id": 52829557, "link": "https://stackoverflow.com/questions/52829557/whats-the-best-gem-or-way-for-saving-images-info-to-database-with-ruby-on-rails", "title": "whats the best gem or way for saving images info to database with ruby on rails and saving image to non (cloud server or using aws SDK)", "body": "<pre><code>ruby 2.4.2\nrails 5.0\ngem \"paper_clip\" , \"~&gt; 6.0.0\"\n</code></pre>\n\n<p>but my problem is when i upload image it doesnt upload with styles sizes like :blog_article_main , :medium , :thumb and image quality is not uploading with same quality as the image is it comes with very less quality.</p>\n\n<p>here is my model image.rb:</p>\n\n<pre><code>belongs_to :vehicle,optional: true\nhas_attached_file :image,\nstyles:  {\n          :blog_article_main =&gt; \"940x400#\",\n          :medium =&gt; \"300x400#\" ,\n          :thumb =&gt; \"200x200\"\n          },\ndefault_url: \"/images/missing.png\",\n:url  =&gt; \"/images/:id/:filename\"\ndo_not_validate_attachment_file_type :image\n</code></pre>\n\n<p>and this is my controller:</p>\n\n<pre><code>     # POST /vehicles\n  # POST /vehicles.json\n  def create\n    @user = User.find(current_user.id)\n    @vehicle = @user.vehicles.new(vehicle_params)\n    @vehicle.proved = 0\n    respond_to do |format|\n      if @vehicle.save\n            # Image.create(vehicle_id: @vehicle.id,image: params[:vehicle][\"image_5\"])if not params[:vehicle][\"image_2\"].nil?\n\n        if (params[:vehicle][\"image_1\"] or params[:vehicle][\"image_2\"] or params[:vehicle][\"image_3\"] or params[:vehicle][\"image_4\"] or params[:vehicle][\"image_5\"] or params[:vehicle][\"image_6\"])\n          #===== The magic is here ;)\n          images = [params[:vehicle][\"image_1\"] , params[:vehicle][\"image_2\"] , params[:vehicle][\"image_3\"] , params[:vehicle][\"image_4\"] , params[:vehicle][\"image_5\"] , params[:vehicle][\"image_6\"]]\n          images.each { |image|\n            @vehicle.images.create(image: image)if not image.nil?\n          }\n        end\n        session[:category_id] = nil\n\n        format.html { redirect_to @vehicle, notice: 'Vehicle was successfully created.' }\n        format.json { render :show, status: :created, location: @vehicle }\n      else\n        format.html { render :new}\n        format.json { render json: @vehicle.errors, status: :unprocessable_entity }\n      end\n    end\n  end\n\n  # PATCH/PUT /vehicles/1\n  # PATCH/PUT /vehicles/1.json\n  def update\n    respond_to do |format|\n    @user = User.find(current_user.id)\n    @vehicle = @user.vehicles.new(vehicle_params)\n      if @vehicle.update(vehicle_params)\n\n        if params[:vehicle][\"image\"]\n          #===== The magic is here ;)\n          @vehicle.images.destroy_all if not @vehicle.images.first.nil?\n          params[:vehicle][\"image\"].each { |image|\n\n            @vehicle.images.create(image: image)\n          }\n        end\n        format.html { redirect_to @vehicle, notice: 'Vehicle was successfully created.' }\n        format.json { render :show, status: :created, location: @vehicle }\n      else\n        format.html { render :new }\n        format.json { render json: @vehicle.errors, status: :unprocessable_entity }\n      end\n    end\n  end\n\n  # DELETE /vehicles/1\n  # DELETE /vehicles/1.json\n  def destroy\n    @vehicle.destroy if @vehicle.images.destroy_all\n    respond_to do |format|\n      format.html { redirect_to vehicles_url, notice: 'Vehicle was successfully destroyed.' }\n      format.json { head :no_content }\n    end\n  end\n\n  private\n  #  def trim_params params\n\n  #   params.each do |x, y|\n  #     y.strip! if y.is_a? String\n  #   end\n  #   params\n  # end\n    # Use callbacks to share common setup or constraints between actions.\n    def set_vehicle\n      @vehicle = Vehicle.find(params[:id])\n    end\n\n    # Never trust parameters from the scary internet, only allow the white list through.\n    def vehicle_params\n      params.require(:vehicle).permit( :categpry_id,attributes.map{|k| k.to_sym })\n    end\n</code></pre>\n\n<p>i want to save images without using cloud server i want to save it into my pc\nwith high quality my project is selling cars and i need to show images in my vehicles show.html.erb and large size</p>\n"}, {"tags": ["ruby", "security", "rubygems", "antivirus-integration", "ruby-development-tools"], "answers": [{"comments": [{"owner": {"reputation": 165, "user_id": 5801262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2a1bce79f21163c66ccd433a9aada5e3?s=128&d=identicon&r=PG&f=1", "display_name": "krishna sai", "link": "https://stackoverflow.com/users/5801262/krishna-sai"}, "edited": false, "score": 0, "creation_date": 1539681187, "post_id": 52830012, "comment_id": 92580122, "body": "Hey, thanks, this gem is definitely useful and would solve the problem. However I tried to make it work, but installing clamby, and trying to scan a file throws me this error <code>Exceptions::ClamscanMissing: clamscan application not found. Check your installation and path.</code> I thought if this was because of the dependency and tried to find the error in it. but it throws this error <code>ClamScan::RequestError: An error occured while making system call to &#47;usr&#47;bin&#47;clamdscan: No such file or directory - &#47;usr&#47;bin&#47;clamdscan</code>. If you have any clue as to why this is happening, it would be really great."}, {"owner": {"reputation": 76, "user_id": 10410230, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0834602318f27d10d2239e8f9fa26953?s=128&d=identicon&r=PG&f=1", "display_name": "David Szell", "link": "https://stackoverflow.com/users/10410230/david-szell"}, "reply_to_user": {"reputation": 165, "user_id": 5801262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2a1bce79f21163c66ccd433a9aada5e3?s=128&d=identicon&r=PG&f=1", "display_name": "krishna sai", "link": "https://stackoverflow.com/users/5801262/krishna-sai"}, "edited": false, "score": 0, "creation_date": 1539682909, "post_id": 52830012, "comment_id": 92581111, "body": "You need to install clamav on the server to make it work. (e.g. <code>sudo apt-get install clamav clamav-daemon</code> if you are using Ubuntu or <code>brew install clamav</code> if using macOS )"}], "tags": [], "owner": {"reputation": 76, "user_id": 10410230, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0834602318f27d10d2239e8f9fa26953?s=128&d=identicon&r=PG&f=1", "display_name": "David Szell", "link": "https://stackoverflow.com/users/10410230/david-szell"}, "is_accepted": true, "score": 3, "last_activity_date": 1539674642, "creation_date": 1539674642, "answer_id": 52830012, "question_id": 52829221, "link": "https://stackoverflow.com/questions/52829221/how-to-check-for-virus-signatures-on-uploaded-files-in-ruby-on-server-side-befor/52830012#52830012", "title": "How to check for virus signatures on uploaded files in ruby on server side before processing?", "body": "<p>You can try Clamby:\n<a href=\"https://github.com/kobaltz/clamby\" rel=\"nofollow noreferrer\">https://github.com/kobaltz/clamby</a></p>\n\n<p>After setup you can use the <code>Clamby.safe?(path)</code> command to check files. </p>\n\n<p>(I also use it to check uploaded files)</p>\n"}], "owner": {"reputation": 165, "user_id": 5801262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2a1bce79f21163c66ccd433a9aada5e3?s=128&d=identicon&r=PG&f=1", "display_name": "krishna sai", "link": "https://stackoverflow.com/users/5801262/krishna-sai"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 332, "favorite_count": 0, "closed_date": 1540430401, "accepted_answer_id": 52830012, "answer_count": 1, "score": 2, "last_activity_date": 1539674642, "creation_date": 1539671582, "question_id": 52829221, "link": "https://stackoverflow.com/questions/52829221/how-to-check-for-virus-signatures-on-uploaded-files-in-ruby-on-server-side-befor", "closed_reason": "Not suitable for this site", "title": "How to check for virus signatures on uploaded files in ruby on server side before processing?", "body": "<p>There is a upload feature on the site. I want to check if the file is infected before it gets processed. Is there any way to achieve this using a gem or having some inhouse code for it? </p>\n"}, {"tags": ["ruby", "rubygems"], "comments": [{"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 1, "creation_date": 1539674010, "post_id": 52829174, "comment_id": 92576092, "body": "There may be some heuristic ways, but no way that will work for sure. For example, even doing grep over all methods and constants defined in the gem has a slight chance of missing method calls via (non-trivial) string composition followed by a <code>send</code> call."}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 1, "creation_date": 1539678050, "post_id": 52829174, "comment_id": 92578312, "body": "I doubt <code>rd-readline</code> is used in <code>group :production</code>, so I would go with <i>remove-and-see-who-screams</i> approach."}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 2, "creation_date": 1539682617, "post_id": 52829174, "comment_id": 92580942, "body": "<i>&quot;How do I determine if it is safe to remove ...&quot;</i> \u2013 by running your tests."}], "owner": {"reputation": 777, "user_id": 1500250, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/39026b3c6b2ab3cfd15b7f24a1eae2ad?s=128&d=identicon&r=PG", "display_name": "snibbets", "link": "https://stackoverflow.com/users/1500250/snibbets"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 20, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1539671348, "creation_date": 1539671348, "question_id": 52829174, "link": "https://stackoverflow.com/questions/52829174/how-can-i-find-out-which-source-files-in-my-project-are-using-a-specific-gem", "title": "How can I find out which source files in my project are using a specific gem?", "body": "<p>I would like to remove the <code>rd-readline</code> gem because it plays tricks with the Rails console. However, I don't know if the project's source code uses it somewhere. How do I determine if it is safe to remove the gem from <code>Gemfile</code>?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4", "activeadmin"], "answers": [{"comments": [{"owner": {"reputation": 35, "user_id": 10324074, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-eIogS2d8Pkg/AAAAAAAAAAI/AAAAAAAAAAA/APUIFaOn2j_AgIi2lfQGQW_v_nrlWBRBKg/mo/photo.jpg?sz=128", "display_name": "Theresa", "link": "https://stackoverflow.com/users/10324074/theresa"}, "edited": false, "score": 1, "creation_date": 1539825962, "post_id": 52856601, "comment_id": 92645459, "body": "should&#39;ve seen this first! seems almost like something I intended to use or should&#39;ve used in the first place. I&#39;m editing my post with the current approach that I have to help me narrow down if the material you gave is still usable in my approach and to give me a heads up if I&#39;d rather use the one you really sent"}], "tags": [], "owner": {"reputation": 2560, "user_id": 153279, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/783f796db3d628f7c268326fb3323de8?s=128&d=identicon&r=PG", "display_name": "Piers C", "link": "https://stackoverflow.com/users/153279/piers-c"}, "is_accepted": false, "score": 0, "last_activity_date": 1539784442, "creation_date": 1539784442, "answer_id": 52856601, "question_id": 52827265, "link": "https://stackoverflow.com/questions/52827265/access-control-list-in-activeadmin/52856601#52856601", "title": "Access Control List in ActiveAdmin?", "body": "<p>I think you might be looking for <a href=\"https://github.com/yhirano55/active_admin_role\" rel=\"nofollow noreferrer\">ActiveAdminRole</a></p>\n"}], "owner": {"reputation": 35, "user_id": 10324074, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-eIogS2d8Pkg/AAAAAAAAAAI/AAAAAAAAAAA/APUIFaOn2j_AgIi2lfQGQW_v_nrlWBRBKg/mo/photo.jpg?sz=128", "display_name": "Theresa", "link": "https://stackoverflow.com/users/10324074/theresa"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 41, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1539827258, "creation_date": 1539658088, "last_edit_date": 1539827258, "question_id": 52827265, "link": "https://stackoverflow.com/questions/52827265/access-control-list-in-activeadmin", "title": "Access Control List in ActiveAdmin?", "body": "<p>I was wondering if there is any gem that implements an active admin control list in ActiveAdmin?</p>\n\n<p>If none, what's the best way or  approach to simply do this?</p>\n\n<p>Reading up on pundit and still active admin whether or not I should really write one from scratch.</p>\n\n<p>Thanks!</p>\n\n<p>Edit:\nI currently worked on this yesterday and have my access control list together with my group model. the form looks roughly something like this:</p>\n\n<p><a href=\"https://i.stack.imgur.com/sgm8c.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/sgm8c.png\" alt=\"enter image description here\"></a></p>\n\n<p>its rendered partial in my activeadmin group.rb \n<a href=\"https://i.stack.imgur.com/bHGLS.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/bHGLS.png\" alt=\"enter image description here\"></a></p>\n\n<p>So yeah I guess the correct word is managing permissions on my activeadmin. I'm reading up if there is any way I can integrate activeadmin roles in my current setup. I'm kinda seeing this kind of setup is tedious?</p>\n\n<p>I made it like this because eventually if there needs to be a lot of different roles, they don't have to ask the devs to code it everytime.</p>\n"}, {"tags": ["ruby", "regex", "encoding", "utf-8"], "comments": [{"owner": {"reputation": 167912, "user_id": 240443, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/495d675e3bc42ed1dee469e2ce701f1b?s=128&d=identicon&r=PG", "display_name": "Amadan", "link": "https://stackoverflow.com/users/240443/amadan"}, "edited": false, "score": 3, "creation_date": 1539664612, "post_id": 52827100, "comment_id": 92572613, "body": "How do you <i>force</i> the proper encoding, or how do you <i>make sure</i> the proper encoding is used? Forcing the encoding is usually not what you want. The heart of the issue is, how do you read your large block of text, and what encoding is it in originally?"}, {"owner": {"reputation": 2096, "user_id": 2108990, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/886481640b3ab8f05cdf3be8c0efdad6?s=128&d=identicon&r=PG", "display_name": "Zack", "link": "https://stackoverflow.com/users/2108990/zack"}, "reply_to_user": {"reputation": 167912, "user_id": 240443, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/495d675e3bc42ed1dee469e2ce701f1b?s=128&d=identicon&r=PG", "display_name": "Amadan", "link": "https://stackoverflow.com/users/240443/amadan"}, "edited": false, "score": 0, "creation_date": 1539717408, "post_id": 52827100, "comment_id": 92601033, "body": "@Amadan so the block of text is being read via an API call. So I&#39;m using HTTParty to read it from JSON. and then dumping that text into a local variable."}], "answers": [{"comments": [{"owner": {"reputation": 167912, "user_id": 240443, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/495d675e3bc42ed1dee469e2ce701f1b?s=128&d=identicon&r=PG", "display_name": "Amadan", "link": "https://stackoverflow.com/users/240443/amadan"}, "edited": false, "score": 0, "creation_date": 1539672957, "post_id": 52828635, "comment_id": 92575560, "body": "&quot;incompatible encoding regexp match (<b>UTF-8 regexp</b> with ASCII-8BIT string)&quot; - also, starting with Ruby 2.0, Ruby defaults to UTF-8, and this line has no effect on any currently non-obsolete (non-obscure) Ruby. It is the text that is ASCII-8BIT, not the regex."}], "tags": [], "owner": {"reputation": 1, "user_id": 4149807, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0292caae1d05c4cfaa73a14fa5b9592f?s=128&d=identicon&r=PG&f=1", "display_name": "Ramakrishna", "link": "https://stackoverflow.com/users/4149807/ramakrishna"}, "is_accepted": false, "score": -2, "last_activity_date": 1539668658, "creation_date": 1539668658, "answer_id": 52828635, "question_id": 52827100, "link": "https://stackoverflow.com/questions/52827100/how-to-address-compatibility-error-with-ruby/52828635#52828635", "title": "How to address Compatibility Error with ruby", "body": "<p>Your Regex is being \"compiled\" as ASCII-8BIT.</p>\n\n<p>Just add the encoding declaration at the top of the file where the Regex is declared:</p>\n\n<h1>encoding: utf-8</h1>\n\n<p>And you're done. Now, when Ruby is parsing your code, it will assume every literal you use (Regex, String, etc) is specified in UTF-8 encoding.</p>\n"}], "owner": {"reputation": 2096, "user_id": 2108990, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/886481640b3ab8f05cdf3be8c0efdad6?s=128&d=identicon&r=PG", "display_name": "Zack", "link": "https://stackoverflow.com/users/2108990/zack"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 47, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1539668658, "creation_date": 1539656878, "question_id": 52827100, "link": "https://stackoverflow.com/questions/52827100/how-to-address-compatibility-error-with-ruby", "title": "How to address Compatibility Error with ruby", "body": "<p>I have a ruby program that parses a large block of text with a number of regular expressions. The problem I'm having is that anytime the text contains 'special characters' (for example Kuut\u00f5bine or No\u00ebl) the program throws an <code>Encoding::CompatibilityError: incompatible encoding regexp match (UTF-8 regexp with ASCII-8BIT string)</code> How do I force the proper encoding?</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 2496, "user_id": 3046905, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/692eb06201cbed91c3c6a9cf11ed0511?s=128&d=identicon&r=PG", "display_name": "Ilya Konyukhov", "link": "https://stackoverflow.com/users/3046905/ilya-konyukhov"}, "edited": false, "score": 0, "creation_date": 1539659817, "post_id": 52826957, "comment_id": 92571629, "body": "I suspect instead of <code>response json: ar</code> you mean <code>render json: ar</code> ? Also, does NewSessionResponse class have a method <code>to_json</code>, to be used in that construction?"}, {"owner": {"reputation": 2151, "user_id": 10068463, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c3df811097b7fb8fef67238aad1151ca?s=128&d=identicon&r=PG&f=1", "display_name": "Nate", "link": "https://stackoverflow.com/users/10068463/nate"}, "edited": false, "score": 0, "creation_date": 1539662957, "post_id": 52826957, "comment_id": 92572278, "body": "I think your issue is that you need to define an <code>as_json</code> method, which returns some sort of object that can be normally serialized by Rails (array, hash, number, string, etc). When you call to_json on an object, it uses as_json, and right now Rails has no idea how to serialize this. Here\u2019s an example of what you could return in your as_json method <code>{:success =&gt; @success, :errors =&gt; @errors}</code>"}, {"owner": {"reputation": 235600, "user_id": 39677, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/77aa7bc1ace6e4b0b49a2102e4fa4059?s=128&d=identicon&r=PG", "display_name": "Blankman", "link": "https://stackoverflow.com/users/39677/blankman"}, "reply_to_user": {"reputation": 2151, "user_id": 10068463, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c3df811097b7fb8fef67238aad1151ca?s=128&d=identicon&r=PG&f=1", "display_name": "Nate", "link": "https://stackoverflow.com/users/10068463/nate"}, "edited": false, "score": 0, "creation_date": 1539696121, "post_id": 52826957, "comment_id": 92589019, "body": "@Nate in my rails console it responded to .to_json just fine, that&#39;s why I am confused."}], "owner": {"reputation": 235600, "user_id": 39677, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/77aa7bc1ace6e4b0b49a2102e4fa4059?s=128&d=identicon&r=PG", "display_name": "Blankman", "link": "https://stackoverflow.com/users/39677/blankman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 29, "favorite_count": 0, "closed_date": 1539662643, "answer_count": 0, "score": 0, "last_activity_date": 1539696132, "creation_date": 1539655503, "last_edit_date": 1539696132, "question_id": 52826957, "link": "https://stackoverflow.com/questions/52826957/trying-to-inherit-from-a-class-and-add-a-attribute-on-it-getting-a-typeerror", "closed_reason": "Duplicate", "title": "Trying to inherit from a class and add a attribute on it, getting a TypeError", "body": "<pre><code>class Api::ApiResponse\n  attr_accessor :success, :errors\n  def initialize(success, errors)\n    @success = success\n    @errors = errors\n  end\nend\n\n\nclass NewSessionResponse &lt; Api::ApiResponse\n  attr_accessor :user\nend\n</code></pre>\n\n<p>In my controller action I have this:</p>\n\n<pre><code>ar = NewSessionResponse.new(true, [])\n\nar.user = user\nrender json: ar\n</code></pre>\n\n<p>For some reason I am getting this error:</p>\n\n<pre><code>TypeError (superclass mismatch for class NewSessionResponse)\n</code></pre>\n\n<p>When I run this code in rails console it works fine.</p>\n\n<p>BTW, the constructor of the parent class gets passed down to subclasses?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "routing"], "answers": [{"comments": [{"owner": {"reputation": 5764, "user_id": 3033691, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/0d3286fd40aade0e7bf90d4d0eda0f29?s=128&d=identicon&r=PG&f=1", "display_name": "userMod2", "link": "https://stackoverflow.com/users/3033691/usermod2"}, "edited": false, "score": 0, "creation_date": 1539654507, "post_id": 52826674, "comment_id": 92570417, "body": "Cool - did that but I keep seeing: <code>ActionController::RoutingError (No route: [GET] &quot;&#47;&quot;)</code>. I&#39;ve tried <code>get(&#39;&#47;&#39; =&gt; &#39;outlets&#47;health#index&#39;)</code> and <code>root(:to =&gt; &#39;outlets&#47;health#index&#39;)</code>"}, {"owner": {"reputation": 4866, "user_id": 6603195, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-nZGPkfcc0EE/AAAAAAAAAAI/AAAAAAAAAoE/op-TBiFRNzg/photo.jpg?sz=128", "display_name": "Marcin Ko\u0142odziej", "link": "https://stackoverflow.com/users/6603195/marcin-ko%c5%82odziej"}, "reply_to_user": {"reputation": 5764, "user_id": 3033691, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/0d3286fd40aade0e7bf90d4d0eda0f29?s=128&d=identicon&r=PG&f=1", "display_name": "userMod2", "link": "https://stackoverflow.com/users/3033691/usermod2"}, "edited": false, "score": 0, "creation_date": 1539654625, "post_id": 52826674, "comment_id": 92570444, "body": "Have you removed any other modifications to root you might have done in your <code>routes.rb</code>? If so, I&#39;d need to see the whole file."}, {"owner": {"reputation": 5764, "user_id": 3033691, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/0d3286fd40aade0e7bf90d4d0eda0f29?s=128&d=identicon&r=PG&f=1", "display_name": "userMod2", "link": "https://stackoverflow.com/users/3033691/usermod2"}, "edited": false, "score": 0, "creation_date": 1539654813, "post_id": 52826674, "comment_id": 92570492, "body": "Ah cool - got it - I was placing the route inside another outlet. I took it out and its ok"}], "tags": [], "owner": {"reputation": 4866, "user_id": 6603195, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-nZGPkfcc0EE/AAAAAAAAAAI/AAAAAAAAAoE/op-TBiFRNzg/photo.jpg?sz=128", "display_name": "Marcin Ko\u0142odziej", "link": "https://stackoverflow.com/users/6603195/marcin-ko%c5%82odziej"}, "is_accepted": false, "score": 1, "last_activity_date": 1539653135, "last_edit_date": 1539653135, "creation_date": 1539652761, "answer_id": 52826674, "question_id": 52826535, "link": "https://stackoverflow.com/questions/52826535/ruby-route-returning-a-200-status/52826674#52826674", "title": "Ruby - route returning a 200 status", "body": "<pre><code>#routes.rb\nroot 'outlets/healthcheck#index'\n</code></pre>\n\n<p>Now in your <code>Outlets::HealthcheckController</code> you need to define an <code>index</code> action like this:</p>\n\n<pre><code>def index\n  head 200\nend\n</code></pre>\n\n<p>You also don't need to have a file in views category related to this action.</p>\n"}], "owner": {"reputation": 5764, "user_id": 3033691, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/0d3286fd40aade0e7bf90d4d0eda0f29?s=128&d=identicon&r=PG&f=1", "display_name": "userMod2", "link": "https://stackoverflow.com/users/3033691/usermod2"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 302, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1539681038, "creation_date": 1539651193, "last_edit_date": 1539681038, "question_id": 52826535, "link": "https://stackoverflow.com/questions/52826535/ruby-route-returning-a-200-status", "title": "Ruby - route returning a 200 status", "body": "<p>In my first Ruby app - I want to the root to return a 200 status code i.e. it would just be a health check.</p>\n\n<p>Whats the correct way to do this - I tried the below with no luck:</p>\n\n<p><code>get('/' =&gt; 'outlets/healthcheck#index', :status =&gt; 200)</code></p>\n\n<p>Where I have a empty HTML file in the directory <code>outlets/healthcheck/index.html.erb</code></p>\n\n<p>Any help appreciated</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "reactjs"], "comments": [{"owner": {"reputation": 5237, "user_id": 2325924, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/XSXrT.jpg?s=128&g=1", "display_name": "7urkm3n", "link": "https://stackoverflow.com/users/2325924/7urkm3n"}, "edited": false, "score": 0, "creation_date": 1539660353, "post_id": 52825607, "comment_id": 92571757, "body": "just follow this one <a href=\"https://blog.grillwork.io/create-a-ruby-on-rails-5-1-application-with-webpack-react-16-and-react-router-e2c16d267f73\" rel=\"nofollow noreferrer\">blog.grillwork.io/&hellip;</a>"}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 8217503, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-WAbzakrEiCs/AAAAAAAAAAI/AAAAAAAAAWI/jNMwo6nnkSE/photo.jpg?sz=128", "display_name": "Ritesh Chauhan", "link": "https://stackoverflow.com/users/8217503/ritesh-chauhan"}, "edited": false, "score": 0, "creation_date": 1539733643, "post_id": 52825775, "comment_id": 92606826, "body": "unable to do it. do you have another solution, I have just uploaded an image in the question, you can check it. Tried mostly every solution available on the internet."}, {"owner": {"reputation": 797, "user_id": 10291275, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-545_MVCSvyE/AAAAAAAAAAI/AAAAAAAAAAA/APUIFaMN3-KZWo1K-xbYjOmpL3h1vS07dw/mo/photo.jpg?sz=128", "display_name": "seanulus", "link": "https://stackoverflow.com/users/10291275/seanulus"}, "reply_to_user": {"reputation": 1, "user_id": 8217503, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-WAbzakrEiCs/AAAAAAAAAAI/AAAAAAAAAWI/jNMwo6nnkSE/photo.jpg?sz=128", "display_name": "Ritesh Chauhan", "link": "https://stackoverflow.com/users/8217503/ritesh-chauhan"}, "edited": false, "score": 0, "creation_date": 1539881692, "post_id": 52825775, "comment_id": 92671337, "body": "Added some example code from a project I made a few months ago."}], "tags": [], "owner": {"reputation": 797, "user_id": 10291275, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-545_MVCSvyE/AAAAAAAAAAI/AAAAAAAAAAA/APUIFaMN3-KZWo1K-xbYjOmpL3h1vS07dw/mo/photo.jpg?sz=128", "display_name": "seanulus", "link": "https://stackoverflow.com/users/10291275/seanulus"}, "is_accepted": false, "score": 0, "last_activity_date": 1539881625, "last_edit_date": 1539881625, "creation_date": 1539644145, "answer_id": 52825775, "question_id": 52825607, "link": "https://stackoverflow.com/questions/52825607/auto-refresh-page-react-with-ruby-on-rails/52825775#52825775", "title": "Auto Refresh Page (React With Ruby On Rails)", "body": "<p>If you are using create-react-app then it should be available through that package. If you are building your own environment with Webpack, you can use Hot Module Replacement. <a href=\"https://webpack.js.org/guides/hot-module-replacement/\" rel=\"nofollow noreferrer\">https://webpack.js.org/guides/hot-module-replacement/</a></p>\n\n<p><strong>Edit:</strong></p>\n\n<p>Here are some example files from a project I made containing relevant code.</p>\n\n<p><em>Webpack</em></p>\n\n<pre><code>const webpack = require('webpack');\nconst { resolve } = require('path');\nconst HtmlWebpackPlugin = require('html-webpack-plugin');\n\n\nmodule.exports = {\n\n  entry: [\n    'react-hot-loader/patch',\n    'webpack-dev-server/client?http://localhost:8080',\n    'webpack/hot/only-dev-server',\n    resolve(__dirname, \"src\") + \"/index.jsx\"\n  ],\n\n  output: {\n    filename: 'app.bundle.js',\n    path: resolve(__dirname, 'build'),\n    publicPath: '/'\n  },\n\n  resolve: {\n    extensions: ['.js', '.jsx']\n  },\n\n  devtool: '#source-map',\n\n  devServer: {\n    hot: true,\n    contentBase: resolve(__dirname, 'build'),\n    publicPath: '/'\n  },\n\n  module: {\n    rules: [\n      {\n        test: /\\.jsx?$/,\n        enforce: \"pre\",\n        loader: \"eslint-loader\",\n        exclude: /node_modules/,\n        options: {\n          emitWarning: true,\n          configFile: \"./.eslintrc.json\"\n          }\n        },\n        {\n      test: /\\.(png|gif|jp(e*)g|svg)$/,\n      use: {\n        loader: 'url-loader',\n        options: {\n          limit: 8000,\n          name: 'images/[hash]-[name].[ext]'\n        }\n      }\n    },\n      {\n        test: /\\.jsx?$/,\n        loader: \"babel-loader\",\n        exclude: /node_modules/,\n        options: {\n          presets: [\n            [\"es2015\", {\"modules\": false}],\n            \"react\"\n          ],\n          plugins: [\n            \"react-hot-loader/babel\",\n            \"styled-jsx/babel\"\n          ]\n        }\n      },\n    ],\n  },\n\n  plugins: [\n    new webpack.HotModuleReplacementPlugin(),\n    new webpack.NamedModulesPlugin(),\n    new HtmlWebpackPlugin({\n      template:'template.ejs',\n      appMountId: 'react-app-root',\n      title: 'Project Name',\n      filename: resolve(__dirname, \"build\", \"index.html\"),\n    }),\n  ]\n};\n</code></pre>\n\n<p>Mainly, the <strong>entry</strong>, <strong>devServer</strong>, <strong>module.plugins</strong> and <strong>plugins</strong> at the bottom have the hot reloading code.</p>\n\n<p><em>package.json</em></p>\n\n<pre><code>{\n  \"name\": \"project\",\n  \"version\": \"1.0.0\",\n  \"description\": \"\",\n  \"main\": \"index.js\",\n  \"scripts\": {\n    \"test\": \"echo \\\"Error: no test specified\\\" &amp;&amp; exit 1\",\n    \"start\": \"webpack-dev-server\",\n    \"lint\": \"eslint src/index.jsx src/**/*.jsx; exit 0\",\n    \"lint-fix\": \"eslint src/index.jsx src/**/*.jsx --fix; exit 0\"\n  },\n  \"repository\": {\n    \"type\": \"git\",\n    \"url\": \"url\"\n  },\n  \"author\": \"\",\n  \"license\": \"ISC\",\n  \"bugs\": {\n    \"url\": \"url\"\n  },\n  \"homepage\": \"relevant-url\",\n  \"dependencies\": {\n    \"eslint\": \"^5.0.1\",\n    \"eslint-plugin-react\": \"^7.10.0\",\n    \"file-loader\": \"^1.1.6\",\n    \"npm\": \"^6.1.0\",\n    \"prop-types\": \"^15.5.10\",\n    \"react\": \"^15.5.4\",\n    \"react-dom\": \"^15.5.4\",\n    \"react-router-dom\": \"^4.0.0\",\n    \"styled-jsx\": \"^2.2.7\",\n    \"url-loader\": \"^0.6.2\"\n  },\n  \"devDependencies\": {\n    \"babel-core\": \"^6.24.1\",\n    \"babel-loader\": \"^7.0.0\",\n    \"babel-preset-es2015\": \"^6.24.1\",\n    \"babel-preset-react\": \"^6.24.1\",\n    \"eslint-loader\": \"^2.0.0\",\n    \"html-webpack-plugin\": \"^2.29.0\",\n    \"react-hot-loader\": \"^3.0.0-beta.7\",\n    \"webpack\": \"^3.4.0\",\n    \"webpack-dev-server\": \"^2.5.0\"\n  }\n}\n</code></pre>\n\n<p>The hot reloading packages in the <strong>devDependencies</strong></p>\n\n<p><em>index.jsx</em></p>\n\n<pre><code>import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './components/App';\nimport { AppContainer } from 'react-hot-loader';\nimport { HashRouter } from 'react-router-dom';\n\nconst render = (Component) =&gt; {\n  ReactDOM.render(\n    &lt;AppContainer&gt;\n      &lt;HashRouter&gt;\n        &lt;Component/&gt;\n      &lt;/HashRouter&gt;  \n    &lt;/AppContainer&gt;,\n    document.getElementById('react-app-root')\n  );\n};\n\nrender(App);\n\n/*eslint-disable */\nif (module.hot) {\n  module.hot.accept('./components/App', () =&gt; {\n    render(App);\n  });\n}\n/*eslint-enable */\n</code></pre>\n\n<p>Notice the <strong>AppContainer</strong> component imported from react-hot-loader that wraps your app in <strong>ReactDOM.render.</strong> Also, sometimes <strong>eslint</strong> can interfere with hot reloading which is why it is disabled and then enabled again at the bottom of the file.</p>\n\n<p>I hope this helps.</p>\n"}], "owner": {"reputation": 1, "user_id": 8217503, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-WAbzakrEiCs/AAAAAAAAAAI/AAAAAAAAAWI/jNMwo6nnkSE/photo.jpg?sz=128", "display_name": "Ritesh Chauhan", "link": "https://stackoverflow.com/users/8217503/ritesh-chauhan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 693, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1539881625, "creation_date": 1539642921, "last_edit_date": 1539733562, "question_id": 52825607, "link": "https://stackoverflow.com/questions/52825607/auto-refresh-page-react-with-ruby-on-rails", "title": "Auto Refresh Page (React With Ruby On Rails)", "body": "<p><a href=\"https://i.stack.imgur.com/RqO9g.png\" rel=\"nofollow noreferrer\">client folder where the react code sits</a>I am Using react with ruby on rails, I have created a separate folder named client for react code on the root. but whenever I changed something in the react i have to go to the page and refresh it manually, is there any way where I can automatically refresh the page whenever I can make any change in the code?</p>\n"}, {"tags": ["ruby", "command-line"], "comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1539640704, "post_id": 52825107, "comment_id": 92567512, "body": "Hint: You can use <a href=\"https://ruby-doc.org/core-2.5.1/Kernel.html#method-i-select\" rel=\"nofollow noreferrer\"><code>select</code></a> on those handles to see if any data is there to read. If there&#39;s something there, <code>read</code> won&#39;t block."}, {"owner": {"reputation": 5850, "user_id": 4501354, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/1230cfcc7f68488ad19d0022cf7b1a93?s=128&d=identicon&r=PG&f=1", "display_name": "Donato", "link": "https://stackoverflow.com/users/4501354/donato"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1539641047, "post_id": 52825107, "comment_id": 92567612, "body": "And if Process.wait(pid) was not there, would it block regardless if data is ready? I am just trying to understand the flow of execution here."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 1, "creation_date": 1539641103, "post_id": 52825107, "comment_id": 92567635, "body": "It&#39;s possible that <code>read</code> blocks until there&#39;s data to read, and if for some reason that condition never happens then it&#39;s stuck waiting until the process dies, which might never happen either. The best approach is to wrap it in <code>select</code> to read it in as you get it, as streaming results are often a thing."}], "owner": {"reputation": 5850, "user_id": 4501354, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/1230cfcc7f68488ad19d0022cf7b1a93?s=128&d=identicon&r=PG&f=1", "display_name": "Donato", "link": "https://stackoverflow.com/users/4501354/donato"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 87, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1539674370, "creation_date": 1539639525, "last_edit_date": 1539674370, "question_id": 52825107, "link": "https://stackoverflow.com/questions/52825107/if-ruby-blocks-when-reading-the-output-stream-then-how-can-it-wait-for-the-proc", "title": "If ruby blocks when reading the output stream, then how can it wait for the process to complete?", "body": "<p><code>$stdin</code> holds a stream for the standard input. It can be used to read input from the console.</p>\n\n<p><code>$stdin</code> is an instance of the class <code>IO</code>. This class defines a method <code>read</code>, which reads bytes from the I/O stream. You can specify the number of bytes to read from the stream via the <code>length</code> argument to <code>read</code>. If <code>length</code> is omitted or is <code>nil</code>, it reads until <code>EOF</code>.</p>\n\n<p>I am pretty sure <code>IO.read</code> is blocking. Given its blocking nature, I am reviewing the following code:</p>\n\n<pre><code>Open3.popen3(cmd) do |stdin, stdout, stderr, wait_thr|\n pid = wait_thr.pid\n begin\n   Timeout.timeout(TIMEOUT) do\n     output = [stdout.read, stderr.read]\n     Process.wait(pid)\n   end\n rescue Errno::ECHILD\n rescue Timeout::Error\n   Process.kill('HUP', pid)\n   fail\n end\nend\n</code></pre>\n\n<p>It uses <code>Open3.popen3</code>, which opens the <code>stdin</code>, <code>stdout</code>, and <code>stderr</code> streams, and starts an external executable. <code>wait_thr.pid</code> gives the <code>pid</code> of the started process.</p>\n\n<p>Now notice the use of <code>stdout.read and stderr.read</code>. Since <code>stdout</code> and <code>stderr</code> are instances of <code>IO</code>, they use <code>IO#read</code>. This method is blocking. </p>\n\n<p>The next line of execution has <code>Process.wait(pid)</code>. <code>Process.wait</code> waits for <code>pid</code> (the process) to exit, returns its process id, and sets <code>$?</code> to a <code>Process::Status</code> object containing information on that process.</p>\n\n<p>But if <code>stdout.read</code> and <code>stderr.read</code> are blocking, how could <code>Process.wait</code> wait for the process to complete? In other words, if for some reason, <code>stdout.read</code> hangs, how could <code>Process.wait</code> wait for process to finish?</p>\n"}, {"tags": ["php", "ruby-on-rails", "ruby", "laravel-5", "bcrypt"], "answers": [{"tags": [], "owner": {"reputation": 385, "user_id": 5124685, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/04aababe637ea7932d7e3dc0fae2bdf2?s=128&d=identicon&r=PG&f=1", "display_name": "SegFaultDev", "link": "https://stackoverflow.com/users/5124685/segfaultdev"}, "is_accepted": false, "score": 0, "last_activity_date": 1540325852, "creation_date": 1540325852, "answer_id": 52957245, "question_id": 52824861, "link": "https://stackoverflow.com/questions/52824861/modifying-the-rails-authenticate-user-function-to-support-phps-non-standard-bcry/52957245#52957245", "title": "Modifying the rails authenticate_user function to support PHPs non-standard bcrypt notation", "body": "<p>Unsure why I have a negative rating on this question but regardless I have figure out a way to do what I was asking. I monkey patched the authenticate method and tried to make it as clear as possible using folder structure.</p>\n\n<p>I created a new directory called extentions in the <code>lib/</code> directory where I organized my monkeypatch based on what it was related to.</p>\n\n<pre><code>lib/ext/rails/secure_password.rb\n\nmodule ActiveModel\n  module SecurePassword\n    module InstanceMethodsOnActivation\n\n      def authenticate(unencrypted_password)\n        BCrypt::Password.new(password_digest.sub(/\\A\\$2y/, '$2a')).is_password?(unencrypted_password) &amp;&amp; self\n      end\n\n    end\n  end\nend\n</code></pre>\n\n<p>I also created an ext.rb file in the initializers directory that will load the monkeypatch class</p>\n\n<pre><code>config/initializers/ext.rb\n\nDir.glob(Rails.root.join('lib/ext/**/*.rb')).sort.each do |filename|\n  require filename\nend\n</code></pre>\n\n<p>this will work for any .rb files if you follow the pattern <code>lib/ext/{library_related_to_patch}/{name_of_file_containing_monkeypatch}.rb</code></p>\n"}], "owner": {"reputation": 385, "user_id": 5124685, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/04aababe637ea7932d7e3dc0fae2bdf2?s=128&d=identicon&r=PG&f=1", "display_name": "SegFaultDev", "link": "https://stackoverflow.com/users/5124685/segfaultdev"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 45, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1540325852, "creation_date": 1539638056, "last_edit_date": 1539703039, "question_id": 52824861, "link": "https://stackoverflow.com/questions/52824861/modifying-the-rails-authenticate-user-function-to-support-phps-non-standard-bcry", "title": "Modifying the rails authenticate_user function to support PHPs non-standard bcrypt notation", "body": "<p>I have a rails application that is using a Users table that was generated and filled via a laravel application. </p>\n\n<p>the issue I'm having relates to another stackoverflow post</p>\n\n<p><a href=\"https://stackoverflow.com/questions/36164875/migrating-users-table-from-laravel-to-ruby-and-using-bcrypt-to-decode-passwords\">Migrating users table from Laravel to Ruby and using BCrypt to decode passwords does not work</a></p>\n\n<p>I need both applications to continue to work, but all the users are currently using PHPs non-standard notation for bcrypt-hashed passwords. The conversion is pretty easy. @tadman posted a solution on how to use the laravel generated password in ruby</p>\n\n<p><code>BCrypt::Password.new(hash.sub(/\\A\\$2y/, '$2a'))</code></p>\n\n<p>but now I'm trying to figure out how to actually use this for the rails authentication...</p>\n\n<p>I've been looking into monkeypatching the <code>authenticate_user</code> method from <code>ActiveModel::SecurePassword</code> class but not sure if that is a good way to approach this.</p>\n\n<p>Another way that I was thinking is making the appropriate change to all the users encrypted passwords to make them conform to the standard Bcrypt format, but then I would need to to make changes to how laravel's function to authecate users works... Ether way I have to change the implemention somewhere.</p>\n\n<p>Is there a way that is less invasive into library code?</p>\n\n<p>Thanks</p>\n"}, {"tags": ["ruby", "homebrew"], "comments": [{"owner": {"reputation": 28612, "user_id": 5025116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7WdYi.jpg?s=128&g=1", "display_name": "Sebastian Palma", "link": "https://stackoverflow.com/users/5025116/sebastian-palma"}, "edited": false, "score": 1, "creation_date": 1539638047, "post_id": 52824775, "comment_id": 92566751, "body": "Did you run <code>brew update</code> before <code>brew install</code>?. Anyways you might take a look to Rbenv or RVM."}, {"owner": {"reputation": 613, "user_id": 8665413, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-5MdNgW6-3h4/AAAAAAAAAAI/AAAAAAAAAH0/j8XUag7iWz4/photo.jpg?sz=128", "display_name": "David Bodow", "link": "https://stackoverflow.com/users/8665413/david-bodow"}, "edited": false, "score": 0, "creation_date": 1539660090, "post_id": 52824775, "comment_id": 92571696, "body": "Big fan of rbenv and rvm if you&#39;re in a position to use a Ruby version management tool.  Will also shout out asdf and anyenv for managing versions of multiple languages all at once!"}, {"owner": {"reputation": 14471, "user_id": 735926, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/6b5fa39f5bc4b397eb7e55766eecd8c4?s=128&d=identicon&r=PG", "display_name": "bfontaine", "link": "https://stackoverflow.com/users/735926/bfontaine"}, "edited": false, "score": 0, "creation_date": 1543402601, "post_id": 52824775, "comment_id": 93904340, "body": "Run <code>brew info ruby</code> and follow the instructions it gives you at the bottom, then start a new shell session. Does it help?"}, {"owner": {"reputation": 1682, "user_id": 6392696, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/09WDQ.jpg?s=128&g=1", "display_name": "nourza", "link": "https://stackoverflow.com/users/6392696/nourza"}, "edited": false, "score": 0, "creation_date": 1561232177, "post_id": 52824775, "comment_id": 99998594, "body": "<a href=\"https://devcenter.heroku.com/articles/ruby-support#supported-runtimes\" rel=\"nofollow noreferrer\">devcenter.heroku.com/articles/ruby-support#supported-runtime&zwnj;&#8203;s</a>"}], "answers": [{"comments": [{"owner": {"reputation": 613, "user_id": 8665413, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-5MdNgW6-3h4/AAAAAAAAAAI/AAAAAAAAAH0/j8XUag7iWz4/photo.jpg?sz=128", "display_name": "David Bodow", "link": "https://stackoverflow.com/users/8665413/david-bodow"}, "edited": false, "score": 0, "creation_date": 1539660014, "post_id": 52825749, "comment_id": 92571676, "body": "This assumes OP is using rvm, which I imagine might not be true from the post."}], "tags": [], "owner": {"reputation": 1682, "user_id": 6392696, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/09WDQ.jpg?s=128&g=1", "display_name": "nourza", "link": "https://stackoverflow.com/users/6392696/nourza"}, "is_accepted": false, "score": 1, "last_activity_date": 1539643980, "creation_date": 1539643980, "answer_id": 52825749, "question_id": 52824775, "link": "https://stackoverflow.com/questions/52824775/wrong-ruby-version-detected-on-mac-after-brew-installing/52825749#52825749", "title": "Wrong ruby version detected on mac after brew installing", "body": "<p>This is how to update your ruby version steps</p>\n\n<p>To check what your ruby in now</p>\n\n<pre><code>$Ruby -v\n</code></pre>\n\n<p>Update it to ruby version 2.3.7</p>\n\n<pre><code>$rvm list known\n$rvm install 2.3.7\n$rvm use 2.3.7 --default\n$gem install bundler\n</code></pre>\n\n<p>Let me know if does that help!</p>\n"}], "owner": {"reputation": 77, "user_id": 8678265, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/3ff7f5600e7ba937eab948411bb6f657?s=128&d=identicon&r=PG&f=1", "display_name": "mcgillian", "link": "https://stackoverflow.com/users/8678265/mcgillian"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 538, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1543402628, "creation_date": 1539637664, "last_edit_date": 1543402628, "question_id": 52824775, "link": "https://stackoverflow.com/questions/52824775/wrong-ruby-version-detected-on-mac-after-brew-installing", "title": "Wrong ruby version detected on mac after brew installing", "body": "<p>When I run </p>\n\n<pre><code>ruby -v \n</code></pre>\n\n<p>i get <code>ruby 2.0.0p648 (2015-12-16 revision 53162) [universal.x86_64-darwin15]</code></p>\n\n<p>this is after installing the latest version of ruby with <code>brew install ruby</code></p>\n\n<p>tried uninstalling and reinstalling and same thing. How can I get the latest version of ruby? If relevent, I need it for <code>gem install bundler</code> which requires a later version. </p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4", "prawn"], "comments": [{"owner": {"reputation": 1682, "user_id": 6392696, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/09WDQ.jpg?s=128&g=1", "display_name": "nourza", "link": "https://stackoverflow.com/users/6392696/nourza"}, "edited": false, "score": 0, "creation_date": 1539644245, "post_id": 52824264, "comment_id": 92568329, "body": "This video will help you it&#39;s about convert Ruby html to pdf file gem &#39;prawn&#39; <a href=\"https://www.youtube.com/watch?v=BW5zwqj37Lo&amp;t=743s\" rel=\"nofollow noreferrer\">youtube.com/watch?v=BW5zwqj37Lo&amp;t=743s</a>"}, {"owner": {"reputation": 1230, "user_id": 511203, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7ec96aadd672b8056173e4e8a5225d8b?s=128&d=identicon&r=PG", "display_name": "Mike Gorski", "link": "https://stackoverflow.com/users/511203/mike-gorski"}, "edited": false, "score": 0, "creation_date": 1539644842, "post_id": 52824264, "comment_id": 92568467, "body": "What&#39;s in the <code>@product</code> instance?"}, {"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1539694215, "post_id": 52824264, "comment_id": 92587774, "body": "<code>item_rows</code> does not do what you think it does. the return value is simply <code>@product.to_a</code> because <code>each</code> returns the receiver. I think you might be looking for <code>map</code>; however if you change <code>foo.each</code> to <code>foo.map</code> you will simply get <code>nil</code> or <code>,</code> because <code>map</code> works on the return value from the block. Take a look at that part of the code to find your issue. (Hint: <code>foo.join(&quot;,&quot;)</code>)"}, {"owner": {"reputation": 321, "user_id": 7768323, "user_type": "registered", "accept_rate": 27, "profile_image": "https://www.gravatar.com/avatar/4dc775ad1110dce42d259e3592704dcd?s=128&d=identicon&r=PG&f=1", "display_name": "jeff", "link": "https://stackoverflow.com/users/7768323/jeff"}, "reply_to_user": {"reputation": 1230, "user_id": 511203, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7ec96aadd672b8056173e4e8a5225d8b?s=128&d=identicon&r=PG", "display_name": "Mike Gorski", "link": "https://stackoverflow.com/users/511203/mike-gorski"}, "edited": false, "score": 0, "creation_date": 1539716570, "post_id": 52824264, "comment_id": 92600655, "body": "@MikeGorski I have updated my post, the product variable returns a hash"}], "answers": [{"comments": [{"owner": {"reputation": 1377, "user_id": 3011280, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/mkyAT.jpg?s=128&g=1", "display_name": "Oshan Wisumperuma", "link": "https://stackoverflow.com/users/3011280/oshan-wisumperuma"}, "edited": false, "score": 0, "creation_date": 1548553939, "post_id": 52858413, "comment_id": 95581697, "body": "thumb up for this: prawn table method expects an array of arrays"}], "tags": [], "owner": {"reputation": 1230, "user_id": 511203, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7ec96aadd672b8056173e4e8a5225d8b?s=128&d=identicon&r=PG", "display_name": "Mike Gorski", "link": "https://stackoverflow.com/users/511203/mike-gorski"}, "is_accepted": false, "score": 1, "last_activity_date": 1539789767, "creation_date": 1539789767, "answer_id": 52858413, "question_id": 52824264, "link": "https://stackoverflow.com/questions/52824264/prawn-error-data-must-be-a-two-dimensional-array-of-cellable-objects/52858413#52858413", "title": "Prawn error \u201cdata must be a two dimensional array of cellable objects\u201d", "body": "<p>I'm not totally clear on what you want the table to look like. But if you are looking for a table that gives a row for each value of the product, this will work:</p>\n\n<pre><code>class Product &lt; Prawn::Document\n  def initialize(product)\n    super(top_margin: 70)\n    # @product = {\"ID\"=&gt;\"12\", \"Product\" =&gt;\"AP\", \"box count\"=&gt; 10}\n    @product = product\n    # The prawn table method expects an array of arrays\n    # this will give you a row in the table for each value in the product\n    table @product.collect{ |label, value| [value]}\n  end\nend\n</code></pre>\n"}], "owner": {"reputation": 321, "user_id": 7768323, "user_type": "registered", "accept_rate": 27, "profile_image": "https://www.gravatar.com/avatar/4dc775ad1110dce42d259e3592704dcd?s=128&d=identicon&r=PG&f=1", "display_name": "jeff", "link": "https://stackoverflow.com/users/7768323/jeff"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 129, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1539789767, "creation_date": 1539635098, "last_edit_date": 1539716440, "question_id": 52824264, "link": "https://stackoverflow.com/questions/52824264/prawn-error-data-must-be-a-two-dimensional-array-of-cellable-objects", "title": "Prawn error \u201cdata must be a two dimensional array of cellable objects\u201d", "body": "<p>I'm using the prawn gem for pdf printing, so I'm trying to show the result of a stored within a table but when I try to print the records inside the column it shows me the following message: Prawn error \u201cdata must be a two dimensional array of cellable objects\u201d</p>\n\n<p>this is my pdf code:</p>\n\n<pre><code>    class Product &lt; Prawn::Document\n  def initialize(product)\n    super(top_margin: 70)\n    @product = product\n    line_items\n  end\n\n\n  def item_header\n    [\"ID\", \"Item Name\"]\n  end\n\n  def item_rows\n    @product.to_a.each do |foo|\n     [ foo.each do |label, value|\n          value\n          \",\" unless value == @product.last\n        end]\n    end\n  end\n\n  def item_table_data\n    [item_header, *item_rows] \n  end\n\n  def line_items\n      table(item_table_data)\n  end\n\nend\n</code></pre>\n\n<p>what returns to me @product is a hash like this</p>\n\n<pre><code>{\"ID\"=&gt;\"12\", \"Product\" =&gt;\"AP\", \"box count\"=&gt; 10}\n</code></pre>\n\n<p>the name of the hash columns like \"Product\" or \"box count\" may change depending on the data thrown by the stored</p>\n\n<p>What could I be doing wrong?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "leaflet", "mapbox"], "answers": [{"tags": [], "owner": {"reputation": 49, "user_id": 5195786, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/V2ziy.png?s=128&g=1", "display_name": "AaronM", "link": "https://stackoverflow.com/users/5195786/aaronm"}, "is_accepted": true, "score": 0, "last_activity_date": 1539654274, "creation_date": 1539654274, "answer_id": 52826831, "question_id": 52822996, "link": "https://stackoverflow.com/questions/52822996/mapbox-tiles-styles-not-loading-with-leaflet-using-rails-and-leaflet-rails-gem/52826831#52826831", "title": "Mapbox Tiles/Styles not loading with Leaflet (using Rails and leaflet-rails gem)", "body": "<p>Figured it out after talking with Mapbox customer support. Correct format was: </p>\n\n<pre><code>https://api.mapbox.com/styles/v1/mapbox/outdoors-v10/tiles/{z}/{x}/{y}?access_token={my access token}\n</code></pre>\n"}], "owner": {"reputation": 49, "user_id": 5195786, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/V2ziy.png?s=128&g=1", "display_name": "AaronM", "link": "https://stackoverflow.com/users/5195786/aaronm"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 249, "favorite_count": 0, "accepted_answer_id": 52826831, "answer_count": 1, "score": 0, "last_activity_date": 1539654274, "creation_date": 1539629303, "question_id": 52822996, "link": "https://stackoverflow.com/questions/52822996/mapbox-tiles-styles-not-loading-with-leaflet-using-rails-and-leaflet-rails-gem", "title": "Mapbox Tiles/Styles not loading with Leaflet (using Rails and leaflet-rails gem)", "body": "<p>I'm trying to implement Leaflet with Mapbox tiles/styles in my webapp but am stuck. I'm using the geocoder gem to translate addresses into latitude/longitude, which is working great.</p>\n\n<p>However, attempting to display the maps leaves me with this:\n<a href=\"https://i.stack.imgur.com/jlRj6.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/jlRj6.png\" alt=\"enter image description here\"></a></p>\n\n<p>I'm using the leaflet.rb config file, which looks like this:</p>\n\n<pre><code>Leaflet.tile_layer = \"https://api.mapbox.com/styles/v1/mapbox/outdoors-v10.html?title=true&amp;access_token={my access token}#2/0/0\"\nLeaflet.max_zoom = 18\n</code></pre>\n\n<p>If I load the tile layer url in the browser, it works fine. It just won't display within the app. The code I'm using to display is below:</p>\n\n<pre><code>                  &lt;div id=\"map\"&gt;\n                    &lt;%= map(\n                      :center =&gt; {\n                        :latlng =&gt; [ @event.latitude , @event.longitude  ],\n                        :zoom =&gt; 10\n                      },\n                      :markers =&gt; [{\n                        :latlng =&gt; [ @event.latitude , @event.longitude  ],\n                      }]\n                     ) \n                    %&gt;\n                  &lt;/div&gt;\n</code></pre>\n\n<p>Any help would be appreciated!</p>\n"}, {"tags": ["ruby", "docker", "docker-compose", "homebrew", "prawn"], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 11510529, "user_type": "unregistered", "profile_image": "https://www.gravatar.com/avatar/696e49984cdfefb15a937a81f4077820?s=128&d=identicon&r=PG", "display_name": "Marcelo Guimar&#227;es", "link": "https://stackoverflow.com/users/11510529/marcelo-guimar%c3%a3es"}, "is_accepted": false, "score": -1, "last_activity_date": 1558016748, "creation_date": 1558016748, "answer_id": 56170868, "question_id": 52822480, "link": "https://stackoverflow.com/questions/52822480/argumenterror-pathname-contains-null-byte-prawn-docker/56170868#56170868", "title": "ArgumentError: pathname contains null byte - prawn - docker", "body": "<p>I don't understand docker with proficiency. But, all times that i had this error with ruby, is because on the situation i'ved been send a file in verification. The solution for those issues are send the file path instead the file.</p>\n"}], "owner": {"reputation": 2221, "user_id": 5921203, "user_type": "registered", "accept_rate": 42, "profile_image": "https://i.stack.imgur.com/lczFa.jpg?s=128&g=1", "display_name": "Steven Aguilar", "link": "https://stackoverflow.com/users/5921203/steven-aguilar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 450, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1558016748, "creation_date": 1539626948, "last_edit_date": 1543402660, "question_id": 52822480, "link": "https://stackoverflow.com/questions/52822480/argumenterror-pathname-contains-null-byte-prawn-docker", "title": "ArgumentError: pathname contains null byte - prawn - docker", "body": "<p>I'm currently working on a Rails 5.2 application. In the Dockerfile I'm using <code>ruby:2.5-alpine</code>. when running the following code\n<code>pdf_attached_doc.image signature_image</code> I get the following error. </p>\n\n<pre><code>ArgumentError: pathname contains null byte\nfrom /usr/local/bundle/gems/prawn-2.2.2/lib/prawn/images.rb:148:in `initialize'\n</code></pre>\n\n<p>I tried <code>brew prune</code> and <code>brew update</code> without success. Here is my Dockerfile</p>\n\n<pre><code>FROM ruby:2.5-alpine\n\n# Bare minimum dependencies for our Rails App with the Apline image;\n# build-base, git, nodejs, linux-headers, postgresql-dev, tzdata\n#\n# Project dependencies include;\n# pdftk\nRUN apk add --no-cache --update \\\n  bash \\\n  build-base \\\n  git \\\n  nodejs \\\n  pdftk \\\n  postgresql-dev \\\n  tzdata \\\n  less\n\n# Set the working directory for all commands after this\nWORKDIR /app\n\n# Bundle the application\n# Copy our Gemfiles into the app directory and install\nADD ./rails_app/Gemfile \\\n    ./rails_app/Gemfile.lock \\\n    /app/\n\nRUN bundle install\n</code></pre>\n\n<p>Here is my Gemfile</p>\n\n<pre><code># frozen_string_literal: true\n\nsource 'https://rubygems.org'\ngit_source(:github) { |repo| \"https://github.com/#{repo}.git\" }\n\nruby '2.5.1'\n\n# Bundle edge Rails instead: gem 'rails', github: 'rails/rails'\ngem 'rails', '~&gt; 5.2.0'\n# Use postgresql as the database for Active Record\ngem 'pg'\n# Loads environment variables from `.env`.\ngem 'dotenv-rails', groups: %i[development test]\n# Use Puma as the app server\ngem 'puma', '~&gt; 3.11'\n# Use SCSS for stylesheets\ngem 'sass-rails', '~&gt; 5.0'\n# Use Uglifier as compressor for JavaScript assets\ngem 'uglifier', '&gt;= 1.3.0'\n# See https://github.com/rails/execjs#readme for more supported runtimes\n# gem 'mini_racer', platforms: :ruby\n# For svg sprites\ngem 'svgeez', '~&gt; 1.0', '&gt;= 1.0.3'\n# Interact with Box API via Boxr Ruby library.\ngem 'boxr'\n# Use CoffeeScript for .coffee assets and views\ngem 'coffee-rails', '~&gt; 4.2'\n# Turbolinks makes navigating your web application faster.\n# Read more: https://github.com/turbolinks/turbolinks\ngem 'turbolinks', '~&gt; 5'\n# Build JSON APIs with ease. Read more: https://github.com/rails/jbuilder\ngem 'jbuilder', '~&gt; 2.5'\n# jquery-rails\ngem 'jquery-rails', '~&gt; 4.3', '&gt;= 4.3.3'\n# PDF merger\ngem 'combine_pdf', '~&gt; 1.0', '&gt;= 1.0.14'\n# PDF parse into form\ngem 'pdf-forms', '~&gt; 1.1', '&gt;= 1.1.1'\n# Add PNG, JPEG and Other images to PDF\ngem 'prawn', '~&gt; 2.1'\n# Use Redis adapter to run Action Cable in production\n# gem 'redis', '~&gt; 4.0'\n# Use ActiveModel has_secure_password\n# gem 'bcrypt', '~&gt; 3.1.7'\n# Parse address\n# Use httparty for requests\ngem 'httparty', '~&gt; 0.16.2'\n# Use ActiveStorage variant\n# gem 'mini_magick', '~&gt; 4.8'\ngem 'pry-rails', group: :development\n# Use Capistrano for deployment\n# gem 'capistrano-rails', group: :development\n\n# Reduces boot times through caching; required in config/boot.rb\ngem 'bootsnap', '&gt;= 1.1.0', require: false\n\ngroup :development, :test do\n  gem 'byebug', platforms: %i[mri mingw x64_mingw]\nend\n\ngroup :development do\n  gem 'listen', '&gt;= 3.0.5', '&lt; 3.2'\n  gem 'web-console', '&gt;= 3.3.0'\n  # Spring speeds up development by keeping your application running\n  # in the background. Read more: https://github.com/rails/spring\n  gem 'rubocop', '~&gt; 0.59.1', require: false\n  gem 'spring'\n  gem 'spring-watcher-listen', '~&gt; 2.0.0'\nend\n\ngroup :test do\n  # Adds support for Capybara system testing and selenium driver\n  gem 'capybara', '&gt;= 2.15', '&lt; 4.0'\n  gem 'selenium-webdriver'\n  # Easy installation and use of chromedriver to run system tests with Chrome\n  gem 'chromedriver-helper'\nend\n\n# Windows does not include zoneinfo files, so bundle the tzinfo-data gem\ngem 'tzinfo-data', platforms: %i[mingw mswin x64_mingw jruby]\n</code></pre>\n\n<p>Any help?</p>\n"}, {"tags": ["sql", "ruby-on-rails", "ruby", "sqlite"], "answers": [{"comments": [{"owner": {"reputation": 798, "user_id": 3412353, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/f3518528d6d7c0fa77f42c97776504d6?s=128&d=identicon&r=PG&f=1", "display_name": "XavM", "link": "https://stackoverflow.com/users/3412353/xavm"}, "edited": false, "score": 1, "creation_date": 1539620360, "post_id": 52820783, "comment_id": 92558850, "body": "Thanks, it was exactly the problem. I specified <code>t.references :looser, foreign_key: true, index: true</code> in my migration. I just had to switch from true to false \ud83d\udc4d"}], "tags": [], "owner": {"reputation": 3327, "user_id": 2121499, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/402a94a6a5d06a560185f3b6d693a5db?s=128&d=identicon&r=PG", "display_name": "Uelb", "link": "https://stackoverflow.com/users/2121499/uelb"}, "is_accepted": true, "score": 1, "last_activity_date": 1539619921, "creation_date": 1539619921, "answer_id": 52820783, "question_id": 52820710, "link": "https://stackoverflow.com/questions/52820710/multiple-belongs-to-has-many-between-two-models-sqlexception-no-such-table/52820783#52820783", "title": "Multiple belongs_to has_many between two models : SQLException: no such table", "body": "<p>First thing, I don't think you need to put the foreign_key option in the fight model, as it's usually taken from the association name.</p>\n\n<p>Now, the problem is actually in the database, when you wrote or generated the migration to build the model, you probably used a belongs_to field (or references field), which automatically creates a foreign key constraint on the database.</p>\n\n<p>So you have a foreign key constraint from the column looser_id to a table (automatically guessed) loosers. You should check your schema.rb to see if this is correct, in which case, just remove that constraint or fix it using another migration : \n<a href=\"https://stackoverflow.com/questions/23718292/foreigner-remove-foreign-key\">foreigner - remove foreign key</a></p>\n"}, {"tags": [], "owner": {"reputation": 384, "user_id": 9105286, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9aabf797e6f398fdb0e3f4d4ad36c8ea?s=128&d=identicon&r=PG&f=1", "display_name": "Denis S Dujota", "link": "https://stackoverflow.com/users/9105286/denis-s-dujota"}, "is_accepted": false, "score": 0, "last_activity_date": 1539620607, "creation_date": 1539620607, "answer_id": 52820948, "question_id": 52820710, "link": "https://stackoverflow.com/questions/52820710/multiple-belongs-to-has-many-between-two-models-sqlexception-no-such-table/52820948#52820948", "title": "Multiple belongs_to has_many between two models : SQLException: no such table", "body": "<p>You should always try to stick to migrations to work with db modifications. </p>\n\n<p>you can add the foreign keys to the respective tables after they have been created and it will properly index it in Rails 4+ </p>\n\n<pre><code>rails g migration addWinnerReferencesToFights winner_id:references\nrails g migration addLooserReferencesToFights looser_id:references\n</code></pre>\n\n<p>PS - it also helps a lot if you spell the models correctly ie: there is no english word called winned nor loosed >>> correct plurals are wins and losses (loose means something not tight or affixed) </p>\n"}], "owner": {"reputation": 798, "user_id": 3412353, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/f3518528d6d7c0fa77f42c97776504d6?s=128&d=identicon&r=PG&f=1", "display_name": "XavM", "link": "https://stackoverflow.com/users/3412353/xavm"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 101, "favorite_count": 0, "accepted_answer_id": 52820783, "answer_count": 2, "score": 0, "last_activity_date": 1539620607, "creation_date": 1539619630, "question_id": 52820710, "link": "https://stackoverflow.com/questions/52820710/multiple-belongs-to-has-many-between-two-models-sqlexception-no-such-table", "title": "Multiple belongs_to has_many between two models : SQLException: no such table", "body": "<p>I have two models linked with each other by two <code>has_many</code> / <code>belongs_to</code> association with a foreign key, but I have some trouble to save any fight object.</p>\n\n<p>Here my models:</p>\n\n<p><strong>Fight.rb</strong></p>\n\n<pre><code>belongs_to :winner, class_name: 'Fighter', foreign_key: :winner_id, inverse_of: 'winned_fights'\nbelongs_to :looser, class_name: 'Fighter', foreign_key: :looser_id, inverse_of: 'loosed_fights'\n</code></pre>\n\n<p><strong>Fighter.rb</strong></p>\n\n<pre><code>has_many :winned_fights, class_name: 'Fight', foreign_key: :winner_id, inverse_of: 'winner'\nhas_many :loosed_fights, class_name: 'Fight', foreign_key: :looser_id, inverse_of: 'looser'\n</code></pre>\n\n<p><strong>db/schema.rb</strong></p>\n\n<pre><code>create_table \"fights\", force: :cascade do |t|\n  ...\n  t.integer \"winner_id\"\n  t.integer \"looser_id\"\n  t.index [\"looser_id\"], name: \"index_fights_on_looser_id\"\n  t.index [\"winner_id\"], name: \"index_fights_on_winner_id\"\nend\n\ncreate_table \"fighters\", force: :cascade do |t|\n  t.string \"name\"\n  ...\nend\n</code></pre>\n\n<p>This is what happens when I try to save a Fight object:</p>\n\n<pre><code>ActiveRecord::StatementInvalid (SQLite3::SQLException: no such table: main.loosers: INSERT INTO \"fights\" (\"winner_punches\", \"looser_punches\", \"victory_type\", \"rounds\", \"winner_id\", \"looser_id\", \"created_at\", \"updated_at\") VALUES (?, ?, ?, ?, ?, ?, ?, ?)):\n</code></pre>\n\n<p>Here is the SQL request that fails:</p>\n\n<pre><code>Fight Create (1.5ms)  INSERT INTO \"fights\" (\"winner_punches\", \"looser_punches\", \"victory_type\", \"rounds\", \"winner_id\", \"looser_id\", \"created_at\", \"updated_at\") VALUES (?, ?, ?, ?, ?, ?, ?, ?)  [[\"winner_punches\", 1], [\"looser_punches\", 1], [\"victory_type\", 0], [\"rounds\", 1], [\"winner_id\", 18], [\"looser_id\", 2], [\"created_at\", \"2018-10-15 15:46:13.479488\"], [\"updated_at\", \"2018-10-15 15:46:13.479488\"]]\n</code></pre>\n\n<p>I can't figure out if the problem come from my <code>has_many</code> / <code>belongs_to</code> association declaration or if it is a DB problem.</p>\n\n<p>What's currently working:</p>\n\n<ul>\n<li><code>figther.winned_fights</code></li>\n<li><code>figther.loosed_fights</code></li>\n</ul>\n\n<p>Does someone would guide me to the right path ?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "rubygems"], "comments": [{"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 1, "creation_date": 1539618264, "post_id": 52820011, "comment_id": 92557838, "body": "Can the scripts be used independently? If so then (IMO) they should should require just what they need. If not then formally requiring them upfront would clean things up a bit I guess. There is really no harm in &quot;requiring&quot; something twice as the second time it will just return <code>false</code> since it has already been required."}], "answers": [{"tags": [], "owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "is_accepted": true, "score": 2, "last_activity_date": 1539619022, "creation_date": 1539619022, "answer_id": 52820546, "question_id": 52820011, "link": "https://stackoverflow.com/questions/52820011/best-way-to-describe-the-script-dependencies-in-a-ruby-gem-where-should-i-requ/52820546#52820546", "title": "Best way to describe the script dependencies in a Ruby Gem - where should I require?", "body": "<p>If your gem doesn't work with <a href=\"https://bundler.io\" rel=\"nofollow noreferrer\">Bundler</a> out of the box by declaring:</p>\n\n<pre><code>gem 'mygem'\n</code></pre>\n\n<p>Then you've got to explain in the documentation why. Some gems, for intractable technical reasons, require you to load in specific files, or recommend that for some occasions. Bundler itself is one such gem:</p>\n\n<pre><code>require 'bundler/setup'\n</code></pre>\n\n<p>Where that will not only load Bundler, but will initiate the Bundler environment setup and imports the <code>Gemfile</code> settings.</p>\n\n<p>Normally your gem should have a main library file with the same name as the gem itself, and that takes care of loading all dependencies.</p>\n\n<p>For example, <code>mygem</code> looks like:</p>\n\n<pre><code>mygem.rb\nmygem/some_module.rb\nmygem/other_module.rb\n</code></pre>\n\n<p>Where the main <code>mygem</code> looks like:</p>\n\n<pre><code>module MyGem\n  # ...\nend\n\nrequire_relative './mygem/some_module'\nrequire_relative './mygem/other_module'\n</code></pre>\n\n<p>The <code>require</code> calls are ordered so that any dependencies are properly accounted for.</p>\n\n<p>If you have a module that has other dependencies of its own, the pattern repeats, like in <code>mygem/submodule.rb</code>:</p>\n\n<pre><code>module MyGem::Submodule\n  # ...\nend\n\nrequire_relative './submodule/something'\n</code></pre>\n"}], "owner": {"reputation": 857, "user_id": 1445968, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9f9fbdbd08e711a0a8a57685cacf70e1?s=128&d=identicon&r=PG", "display_name": "Nas", "link": "https://stackoverflow.com/users/1445968/nas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 64, "favorite_count": 0, "accepted_answer_id": 52820546, "answer_count": 1, "score": 0, "last_activity_date": 1574182567, "creation_date": 1539617176, "last_edit_date": 1574182567, "question_id": 52820011, "link": "https://stackoverflow.com/questions/52820011/best-way-to-describe-the-script-dependencies-in-a-ruby-gem-where-should-i-requ", "title": "Best way to describe the script dependencies in a Ruby Gem - where should I require?", "body": "<p>I am new to the Ruby world and started building my first Ruby gem.</p>\n\n<p>I noticed that require is quite different than what I expected. Let say I have the following scripts in my gem</p>\n\n<pre><code>-  My Gem\n  -  lib\n       script-1.rb\n       script-2.rb\n       script-3.rb\n       ...\n       main.rb\n  + bin\n  + exe\n  ...\n</code></pre>\n\n<p>In the exe I cal the main.rb - the main entry point for my gem.</p>\n\n<p>It uses a class from script-1.rb to do it's job work.\nscript-1.rb on it behalf depends on code script-2.rb. And so on.</p>\n\n<p>Here is my question.</p>\n\n<p>Where is the best place to <code>require</code> the scripts. Mainly from maintainability point of view. Let's say that during the lifetime of my executable all of the scripts will be loaded anyway. I see 2 options:</p>\n\n<ol>\n<li><code>require</code> all of the scripts for my app in main.rb</li>\n<li>Each script does <code>require</code> only for the scripts it depends on.</li>\n<li>Introduce a new boot script</li>\n</ol>\n\n<p>I started using option 2. But soon enough I understand that require does a global modification and some of the scripts are missing <code>require</code> since some other script already did this.</p>\n\n<p>So what is the best practice here. I would rather create a separate script for initialisation - like defining the dependencies of my gem, but I was wondering if there is a better approach I am missing? How do you describe the decencies between scripts in your gems?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "routes"], "comments": [{"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 3, "creation_date": 1539614721, "post_id": 52819278, "comment_id": 92555958, "body": "Resize your terminal window to have a width of 120 symbols?"}, {"owner": {"reputation": 299, "user_id": 7987576, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a1bb29ab3cd439fe89b5dcb93e6186a2?s=128&d=identicon&r=PG&f=1", "display_name": "Lucas", "link": "https://stackoverflow.com/users/7987576/lucas"}, "reply_to_user": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1539615029, "post_id": 52819278, "comment_id": 92556153, "body": "Ofc, but is there any way to change the format of this output? Or do I need to Zoom Out everytime I want to get it readable? I would love to be able to modify the output to show it in a fixed rows and columns, something like this here: <a href=\"https://stackoverflow.com/questions/20715385/how-to-format-rake-routes\" title=\"how to format rake routes\">stackoverflow.com/questions/20715385/how-to-format-rake-rout&zwnj;&#8203;es</a>"}], "answers": [{"comments": [{"owner": {"reputation": 299, "user_id": 7987576, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a1bb29ab3cd439fe89b5dcb93e6186a2?s=128&d=identicon&r=PG&f=1", "display_name": "Lucas", "link": "https://stackoverflow.com/users/7987576/lucas"}, "edited": false, "score": 1, "creation_date": 1539615373, "post_id": 52819374, "comment_id": 92556350, "body": "That works, great! I am not sure about marking it as answer, because it is kinda workaround, but you are getting a plus from me. Thanks agian!"}], "tags": [], "owner": {"reputation": 156, "user_id": 4706812, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-kQIR87DJsJk/AAAAAAAAAAI/AAAAAAAAA7c/nMxrC4Aa06c/photo.jpg?sz=128", "display_name": "cmunozgar", "link": "https://stackoverflow.com/users/4706812/cmunozgar"}, "is_accepted": true, "score": 6, "last_activity_date": 1539614917, "creation_date": 1539614917, "answer_id": 52819374, "question_id": 52819278, "link": "https://stackoverflow.com/questions/52819278/how-to-edit-output-of-rake-routes/52819374#52819374", "title": "How to edit output of &quot;rake routes&quot;", "body": "<p>Have you tried accessing the HTML Routes view? </p>\n\n<p>You can enable it adding this route <code>get '/rails/info/routes' =&gt; 'routes'</code> in your <code>config/routes.rb</code> file and then access the <a href=\"http://localhost:3000/rails/info/routes\" rel=\"noreferrer\">http://localhost:3000/rails/info/routes</a> and you will see something like this:</p>\n\n<p><a href=\"https://i.stack.imgur.com/u0Q5D.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/u0Q5D.png\" alt=\"enter image description here\"></a></p>\n"}, {"tags": [], "owner": {"reputation": 88, "user_id": 2444226, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4c84530e9b03d0f77f1ae8eb08b6b825?s=128&d=identicon&r=PG", "display_name": "Colin_Hagan", "link": "https://stackoverflow.com/users/2444226/colin-hagan"}, "is_accepted": false, "score": 2, "last_activity_date": 1539617314, "creation_date": 1539617314, "answer_id": 52820043, "question_id": 52819278, "link": "https://stackoverflow.com/questions/52819278/how-to-edit-output-of-rake-routes/52820043#52820043", "title": "How to edit output of &quot;rake routes&quot;", "body": "<p>You can grep your routes from the command line, like this:</p>\n\n<p>For example, if you're looking for any route involving the word 'foobar'</p>\n\n<p><code>rake routes | grep foobar</code></p>\n\n<p>This is great if you just want quick output from the command line.</p>\n\n<p>Here's a guide to GREP that I learned a lot from: <a href=\"https://www.maketecheasier.com/beginners-guide-to-grep/\" rel=\"nofollow noreferrer\">https://www.maketecheasier.com/beginners-guide-to-grep/</a></p>\n"}, {"tags": [], "owner": {"reputation": 2599, "user_id": 12201472, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-PcsKV9F65CQ/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3repCiEtFeVMa1z1D-JpXuqg5wlw6w/photo.jpg?sz=128", "display_name": "Marian13", "link": "https://stackoverflow.com/users/12201472/marian13"}, "is_accepted": false, "score": 2, "last_activity_date": 1595352000, "last_edit_date": 1595352000, "creation_date": 1586867732, "answer_id": 61207824, "question_id": 52819278, "link": "https://stackoverflow.com/questions/52819278/how-to-edit-output-of-rake-routes/61207824#61207824", "title": "How to edit output of &quot;rake routes&quot;", "body": "<h2>Rails 6+</h2>\n<p>This is how you can edit the output of the command <code>rails routes</code> in the terminal.</p>\n<p>Rails 6 introduced <code>--expanded</code> option.</p>\n<p>Here is an example:</p>\n<pre class=\"lang-none prettyprint-override\"><code>$ rails routes --expanded\n--[ Route 1 ]------------------------------------------------------------\nPrefix            | high_scores\nVerb              | GET\nURI               | /high_scores(.:format)\nController#Action | high_scores#index\n--[ Route 2 ]------------------------------------------------------------\nPrefix            | new_high_score\nVerb              | GET\nURI               | /high_scores/new(.:format)\nController#Action | high_scores#new\n--[ Route 3 ]------------------------------------------------------------\nPrefix            | blog\nVerb              |\nURI               | /blog\nController#Action | Blog::Engine\n\n[ Routes for Blog::Engine ]\n--[ Route 1 ]------------------------------------------------------------\nPrefix            | cart\nVerb              | GET\nURI               | /cart(.:format)\nController#Action | cart#show\n</code></pre>\n<p>And a <a href=\"https://github.com/rails/rails/pull/32130\" rel=\"nofollow noreferrer\">link to PR</a>.</p>\n"}], "owner": {"reputation": 299, "user_id": 7987576, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a1bb29ab3cd439fe89b5dcb93e6186a2?s=128&d=identicon&r=PG&f=1", "display_name": "Lucas", "link": "https://stackoverflow.com/users/7987576/lucas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 483, "favorite_count": 0, "accepted_answer_id": 52819374, "answer_count": 3, "score": -2, "last_activity_date": 1595352000, "creation_date": 1539614609, "last_edit_date": 1539623975, "question_id": 52819278, "link": "https://stackoverflow.com/questions/52819278/how-to-edit-output-of-rake-routes", "title": "How to edit output of &quot;rake routes&quot;", "body": "<p>I have a problem - how to edit output of command \"rake routes\"? </p>\n\n<p>I got something like this:</p>\n\n<p><a href=\"https://i.stack.imgur.com/PqRaW.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/PqRaW.png\" alt=\"enter image description here\"></a></p>\n\n<p>It is ugly and unreadable. Any ideas how to change this output to more readable?</p>\n\n<p>[EDIT]\nIt is funny how I got these \"minuses\", but actually, noone has answered my question. I was asking about how to EDIT/MODIFY output of command \"rake routes\", not how to edit my terminal to show everything in one line. Of course, this is what I was looking for, partially, but it is not a good answer to my question. </p>\n\n<p>I was looking for something like this: </p>\n\n<p>stackoverflow.com/questions/20715385/how-to-format-rake-routes</p>\n\n<p>but above solution doesnt work, maybe because it is quite old. </p>\n\n<p><strong>Still, if anyone knows answer to my question, that would be great to get it.</strong> </p>\n"}, {"tags": ["ruby-on-rails", "ruby", "rails-geocoder"], "answers": [{"comments": [{"owner": {"reputation": 16672, "user_id": 22237, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/hkobD.png?s=128&g=1", "display_name": "Kris", "link": "https://stackoverflow.com/users/22237/kris"}, "edited": false, "score": 2, "creation_date": 1539613429, "post_id": 52818841, "comment_id": 92555153, "body": "Maybe you would want to combine this with as <code>before_action</code> callback, with something like <code>Geocoder.configure(api_key: current_user.geocoder_api_key)</code>."}, {"owner": {"reputation": 995, "user_id": 3233927, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/9f21d807f80f42e9a5c1832d48842ed7?s=128&d=identicon&r=PG&f=1", "display_name": "Rebirth", "link": "https://stackoverflow.com/users/3233927/rebirth"}, "edited": false, "score": 1, "creation_date": 1539613957, "post_id": 52818841, "comment_id": 92555484, "body": "Ahaa! I was under the impression that this could only be used in an initializer file for some reason. This works for me, thanks!"}], "tags": [], "owner": {"reputation": 2492, "user_id": 5085788, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bWlXI.jpg?s=128&g=1", "display_name": "luisenrike", "link": "https://stackoverflow.com/users/5085788/luisenrike"}, "is_accepted": true, "score": 1, "last_activity_date": 1539613730, "last_edit_date": 1539613730, "creation_date": 1539613121, "answer_id": 52818841, "question_id": 52818507, "link": "https://stackoverflow.com/questions/52818507/setup-dynamic-api-keys-for-rails-geocoder-gem/52818841#52818841", "title": "Setup dynamic api keys for rails geocoder gem", "body": "<p>You could use <code>Geocode.configure</code>:</p>\n\n<pre><code>Geocoder.configure(\n     :timeout  =&gt; 5,\n     :lookup   =&gt; :yandex,\n     :api_key  =&gt; \"2a9fsa983jaslfj982fjasd\",\n     :units    =&gt; :km\n)\n</code></pre>\n\n<p><a href=\"https://github.com/alexreisner/geocoder/blob/e45f8bd3173c28e03efbfaf03eab7c5afaf4621a/lib/geocoder/configuration.rb#L7\" rel=\"nofollow noreferrer\">https://github.com/alexreisner/geocoder/blob/e45f8bd3173c28e03efbfaf03eab7c5afaf4621a/lib/geocoder/configuration.rb#L7</a></p>\n"}], "owner": {"reputation": 995, "user_id": 3233927, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/9f21d807f80f42e9a5c1832d48842ed7?s=128&d=identicon&r=PG&f=1", "display_name": "Rebirth", "link": "https://stackoverflow.com/users/3233927/rebirth"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 176, "favorite_count": 0, "accepted_answer_id": 52818841, "answer_count": 1, "score": 0, "last_activity_date": 1539613730, "creation_date": 1539612119, "question_id": 52818507, "link": "https://stackoverflow.com/questions/52818507/setup-dynamic-api-keys-for-rails-geocoder-gem", "title": "Setup dynamic api keys for rails geocoder gem", "body": "<p>I'm trying to implement a general 'application settings' page for my application. on this page I want my customers to be able to put their own google api key for the rails geocoder gem. I have read through the documentation but could not find any way to set this api key in a dynamic way (through a form).</p>\n\n<p>Is there any way to do this dynamically so the client can use his own google api key?</p>\n\n<p>Small note, every application will only have 1 api key, but I'm trying to do this dynamically so I won't have to think about it anymore down the line.</p>\n"}, {"tags": ["ruby", "csv", "encoding", "inputstream"], "comments": [{"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1539613471, "post_id": 52818497, "comment_id": 92555183, "body": "It should be <code>&quot;BOM|UTF-8&quot;</code> not just <code>&quot;bom&quot;</code>."}, {"owner": {"reputation": 155, "user_id": 375365, "user_type": "registered", "accept_rate": 22, "profile_image": "https://www.gravatar.com/avatar/36268e32a487952477b6f129e590005f?s=128&d=identicon&r=PG", "display_name": "DHM", "link": "https://stackoverflow.com/users/375365/dhm"}, "reply_to_user": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1539702626, "post_id": 52818497, "comment_id": 92593316, "body": "I, of course, tried that and all the different permutations."}, {"owner": {"reputation": 155, "user_id": 375365, "user_type": "registered", "accept_rate": 22, "profile_image": "https://www.gravatar.com/avatar/36268e32a487952477b6f129e590005f?s=128&d=identicon&r=PG", "display_name": "DHM", "link": "https://stackoverflow.com/users/375365/dhm"}, "reply_to_user": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1539703662, "post_id": 52818497, "comment_id": 92593974, "body": "Fetching <code>Encoding.name_list</code> shows no encodings with any similarity to <code>bom</code> case invariant or substring. I&#39;d be curious where the <code>BOM</code> encoding originates."}], "answers": [{"tags": [], "owner": {"reputation": 155, "user_id": 375365, "user_type": "registered", "accept_rate": 22, "profile_image": "https://www.gravatar.com/avatar/36268e32a487952477b6f129e590005f?s=128&d=identicon&r=PG", "display_name": "DHM", "link": "https://stackoverflow.com/users/375365/dhm"}, "is_accepted": false, "score": 0, "last_activity_date": 1539706887, "last_edit_date": 1539706887, "creation_date": 1539703067, "answer_id": 52838800, "question_id": 52818497, "link": "https://stackoverflow.com/questions/52818497/stripping-byte-order-mark-from-zip-stream-in-ruby/52838800#52838800", "title": "Stripping byte order mark from zip stream in ruby", "body": "<p>Since you can rewind streams, the answer is to get the first chars, see if they're the bom, if they are, consume them; otherwise, rewind the stream.</p>\n\n<pre><code>BYTE_ORDER_MARKS_LENGTHS =\n  {\"\\xEF\".bytes.first =&gt; 2, \"\\xFE\".bytes.first =&gt; 1, \"\\xFF\".bytes.first =&gt; 1}\n# checks if input_stream starts with a byte order mark and if so skips over it\ndef skip_bom(input_stream)\n  entry = BYTE_ORDER_MARKS_LENGTHS[input_stream.read(1).bytes.first]\n  if entry\n    input_stream.read(entry)\n  else\n    input_stream.rewind\n  end\nend\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 155, "user_id": 375365, "user_type": "registered", "accept_rate": 22, "profile_image": "https://www.gravatar.com/avatar/36268e32a487952477b6f129e590005f?s=128&d=identicon&r=PG", "display_name": "DHM", "link": "https://stackoverflow.com/users/375365/dhm"}, "edited": false, "score": 0, "creation_date": 1539788404, "post_id": 52847740, "comment_id": 92630900, "body": "Thanks! Alas, <code>IO#new</code> doesn&#39;t accept <code>Zip::InputStream</code> as a fd, but that at least explains where <code>BOM</code> is defined! <code>&gt; io = IO.new(stream, &#39;r:BOM|UTF-8&#39;) TypeError: no implicit conversion of Zip::InputStream into Integer</code>"}, {"owner": {"reputation": 750, "user_id": 406551, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/sjuJz.jpg?s=128&g=1", "display_name": "AxelTheGerman", "link": "https://stackoverflow.com/users/406551/axelthegerman"}, "reply_to_user": {"reputation": 155, "user_id": 375365, "user_type": "registered", "accept_rate": 22, "profile_image": "https://www.gravatar.com/avatar/36268e32a487952477b6f129e590005f?s=128&d=identicon&r=PG", "display_name": "DHM", "link": "https://stackoverflow.com/users/375365/dhm"}, "edited": false, "score": 0, "creation_date": 1539888642, "post_id": 52847740, "comment_id": 92674870, "body": "How about passing the IO into zip stream? basically you want to run it through IO first to handle the encoding and then pass it into the zip stream to unzip, and last but not least read it with the CSV library - <code>CSV.new(Zip::InputStream::open(IO.open(zip_file, &#39;r:BOM|UTF-8&#39;)).get_next_entry.get_input_stream)</code>"}, {"owner": {"reputation": 155, "user_id": 375365, "user_type": "registered", "accept_rate": 22, "profile_image": "https://www.gravatar.com/avatar/36268e32a487952477b6f129e590005f?s=128&d=identicon&r=PG", "display_name": "DHM", "link": "https://stackoverflow.com/users/375365/dhm"}, "edited": false, "score": 0, "creation_date": 1539978399, "post_id": 52847740, "comment_id": 92710422, "body": "I believe that the zip file does not have the bom but the file(s) within the zip do; so, that won&#39;t work and may actually get false alarms."}, {"owner": {"reputation": 750, "user_id": 406551, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/sjuJz.jpg?s=128&g=1", "display_name": "AxelTheGerman", "link": "https://stackoverflow.com/users/406551/axelthegerman"}, "reply_to_user": {"reputation": 155, "user_id": 375365, "user_type": "registered", "accept_rate": 22, "profile_image": "https://www.gravatar.com/avatar/36268e32a487952477b6f129e590005f?s=128&d=identicon&r=PG", "display_name": "DHM", "link": "https://stackoverflow.com/users/375365/dhm"}, "edited": false, "score": 0, "creation_date": 1539979195, "post_id": 52847740, "comment_id": 92710683, "body": "So in that case you&#39;d wrap the stream from the zip in another IO stream maybe? <code>stream_with_bom = Zip::InputStream::open(zip_file).get_next_entry.get_input_st&zwnj;&#8203;ream</code> then <code>CSV.new IO.open(stream_with_bom, &#39;r:BOM|UTF-8&#39;)</code>"}, {"owner": {"reputation": 750, "user_id": 406551, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/sjuJz.jpg?s=128&g=1", "display_name": "AxelTheGerman", "link": "https://stackoverflow.com/users/406551/axelthegerman"}, "reply_to_user": {"reputation": 155, "user_id": 375365, "user_type": "registered", "accept_rate": 22, "profile_image": "https://www.gravatar.com/avatar/36268e32a487952477b6f129e590005f?s=128&d=identicon&r=PG", "display_name": "DHM", "link": "https://stackoverflow.com/users/375365/dhm"}, "edited": false, "score": 0, "creation_date": 1539979690, "post_id": 52847740, "comment_id": 92710852, "body": "If you can upload an example file I could try to actually run the code"}], "tags": [], "owner": {"reputation": 750, "user_id": 406551, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/sjuJz.jpg?s=128&g=1", "display_name": "AxelTheGerman", "link": "https://stackoverflow.com/users/406551/axelthegerman"}, "is_accepted": false, "score": 1, "last_activity_date": 1539753638, "creation_date": 1539753638, "answer_id": 52847740, "question_id": 52818497, "link": "https://stackoverflow.com/questions/52818497/stripping-byte-order-mark-from-zip-stream-in-ruby/52847740#52847740", "title": "Stripping byte order mark from zip stream in ruby", "body": "<p>Looks like handling the BOM is implemented in <code>IO</code> - maybe you can wrap your zip stream around an <code>IO</code> object?</p>\n\n<p><a href=\"https://ruby-doc.org/core-2.3.1/IO.html#method-c-new-label-Open+Mode\" rel=\"nofollow noreferrer\">https://ruby-doc.org/core-2.3.1/IO.html#method-c-new-label-Open+Mode</a></p>\n"}, {"tags": [], "owner": {"reputation": 16860, "user_id": 1536309, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/40f2ef2f2a528a76dbd3667acd154e5c?s=128&d=identicon&r=PG", "display_name": "Blair Anderson", "link": "https://stackoverflow.com/users/1536309/blair-anderson"}, "is_accepted": false, "score": 0, "last_activity_date": 1554419809, "creation_date": 1554419809, "answer_id": 55526205, "question_id": 52818497, "link": "https://stackoverflow.com/questions/52818497/stripping-byte-order-mark-from-zip-stream-in-ruby/55526205#55526205", "title": "Stripping byte order mark from zip stream in ruby", "body": "<p>My situation was similar, but I also needed to remove extra double-quotes: </p>\n\n<pre><code>Zip::File.open(zipfolder) do |zipfile|\n  zipfile.each do |zip_entry|\n    zip_entry.get_input_stream.each_line do |line|\n      line_without_bom_or_quotes = line.force_encoding('UTF-8').gsub('\"', '')\n      row = CSV.parse_line(line_without_bom_or_quotes)\n      puts \"DETAIL: #{row.inspect}\"\n    end\n  end\nend\n</code></pre>\n"}], "owner": {"reputation": 155, "user_id": 375365, "user_type": "registered", "accept_rate": 22, "profile_image": "https://www.gravatar.com/avatar/36268e32a487952477b6f129e590005f?s=128&d=identicon&r=PG", "display_name": "DHM", "link": "https://stackoverflow.com/users/375365/dhm"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 257, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1554419809, "creation_date": 1539612101, "question_id": 52818497, "link": "https://stackoverflow.com/questions/52818497/stripping-byte-order-mark-from-zip-stream-in-ruby", "title": "Stripping byte order mark from zip stream in ruby", "body": "<p>I know that <code>File</code> supposedly takes <code>encoding: 'bom|utf-8'</code> but afaict there's no equivalent for streams. My server is getting a zip file containing one csv that has the bom. It seems silly to save the csv as a file vs just using <code>CSV.new(Zip::InputStream::open(zip_file).get_next_entry.get_input_stream)</code>, but afaict none of those can detect and strip the byte order mark (bom) and <code>CSV</code> fails trying to parse the header if the bom is there.</p>\n\n<p>I see that <code>CSV.new</code> takes <code>encoding</code> as an option, but, in 2.3.0 at least, it doesn't recognize <code>bom</code> (<code>ArgumentError: unknown encoding name - bom</code>)</p>\n"}, {"tags": ["ruby", "ruby-on-rails-4", "ruby-on-rails-5"], "comments": [{"owner": {"reputation": 498, "user_id": 10384879, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-5HTxyDEG1Qo/AAAAAAAAAAI/AAAAAAAAAeQ/9iMyCvOw2A4/photo.jpg?sz=128", "display_name": "giri dharan", "link": "https://stackoverflow.com/users/10384879/giri-dharan"}, "edited": false, "score": 0, "creation_date": 1539629840, "post_id": 52818057, "comment_id": 92563321, "body": "Ok where i put enum status: { pending: 0, accepted: 1, rejected: 2 }"}, {"owner": {"reputation": 28612, "user_id": 5025116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7WdYi.jpg?s=128&g=1", "display_name": "Sebastian Palma", "link": "https://stackoverflow.com/users/5025116/sebastian-palma"}, "edited": false, "score": 0, "creation_date": 1539630392, "post_id": 52818057, "comment_id": 92563589, "body": "In your model. Add any comment you want to do right down the answer provided."}, {"owner": {"reputation": 5060, "user_id": 10522579, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7GQ6a.jpg?s=128&g=1", "display_name": "ray", "link": "https://stackoverflow.com/users/10522579/ray"}, "edited": false, "score": 0, "creation_date": 1548662930, "post_id": 52818057, "comment_id": 95606349, "body": "Your <code>erb tags</code> are not closed properly,"}, {"owner": {"reputation": 5060, "user_id": 10522579, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7GQ6a.jpg?s=128&g=1", "display_name": "ray", "link": "https://stackoverflow.com/users/10522579/ray"}, "edited": false, "score": 0, "creation_date": 1548662995, "post_id": 52818057, "comment_id": 95606369, "body": "In question, you asked for enum status having string but holding numbers in code."}], "answers": [{"comments": [{"owner": {"reputation": 5060, "user_id": 10522579, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7GQ6a.jpg?s=128&g=1", "display_name": "ray", "link": "https://stackoverflow.com/users/10522579/ray"}, "edited": false, "score": 0, "creation_date": 1548663553, "post_id": 52818675, "comment_id": 95606583, "body": "How do you directly invoke <code>enum</code> status as <code>f.status.capitalize</code> if it holds hash?"}, {"owner": {"reputation": 28612, "user_id": 5025116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7WdYi.jpg?s=128&g=1", "display_name": "Sebastian Palma", "link": "https://stackoverflow.com/users/5025116/sebastian-palma"}, "reply_to_user": {"reputation": 5060, "user_id": 10522579, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7GQ6a.jpg?s=128&g=1", "display_name": "ray", "link": "https://stackoverflow.com/users/10522579/ray"}, "edited": false, "score": 0, "creation_date": 1548671384, "post_id": 52818675, "comment_id": 95610632, "body": "My friend, if <code>f</code> is a (poor named) AR object, its enum status is accessible as it&#39;s named. No matter if the attribute is represented as a Hash by Rails."}], "tags": [], "owner": {"reputation": 28612, "user_id": 5025116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7WdYi.jpg?s=128&g=1", "display_name": "Sebastian Palma", "link": "https://stackoverflow.com/users/5025116/sebastian-palma"}, "is_accepted": false, "score": 6, "last_activity_date": 1539612652, "creation_date": 1539612652, "answer_id": 52818675, "question_id": 52818057, "link": "https://stackoverflow.com/questions/52818057/how-to-change-text-color-in-rails-views/52818675#52818675", "title": "how to change text color in rails views", "body": "<p>If your status column (attribute) is an integer, you can use an enum, this way you have only 3 valid values for it:</p>\n\n<pre><code># model\nenum status: { pending: 0, accepted: 1, rejected: 2 }\n</code></pre>\n\n<p>Each key gives them a readable value. So in your view you can just create any html tag, in order to assign a class, which you previously defined with the color text you want:</p>\n\n<pre><code>&lt;span class=\"&lt;%= \"#{f.status.downcase}_status\" %&gt;\"&gt;\n  &lt;%= f.status.capitalize %&gt;\n&lt;/span&gt;\n</code></pre>\n\n<p>The CSS isn't more than this:</p>\n\n<pre><code>&lt;style&gt;\n  .pending_status {\n   color: blue;\n  }\n  .accepted_status {\n   color: green;\n  }\n  .rejected_status {\n   color: red;\n  }\n&lt;/style&gt;\n</code></pre>\n"}], "owner": {"reputation": 498, "user_id": 10384879, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-5HTxyDEG1Qo/AAAAAAAAAAI/AAAAAAAAAeQ/9iMyCvOw2A4/photo.jpg?sz=128", "display_name": "giri dharan", "link": "https://stackoverflow.com/users/10384879/giri-dharan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1995, "favorite_count": 1, "answer_count": 1, "score": 1, "last_activity_date": 1548662825, "creation_date": 1539610660, "last_edit_date": 1548662825, "question_id": 52818057, "link": "https://stackoverflow.com/questions/52818057/how-to-change-text-color-in-rails-views", "title": "how to change text color in rails views", "body": "<p>If status is \"pending\" show the \"pending\" on blue color. If status is \"Accepted\" show the \"Accepted\" in Green color. If status is \"Rejected\" show the Red color..</p>\n\n<pre><code>&lt;% @applyleaves.each do |f| %&gt;\n&lt;%= if f.status == 0\n                 \"Pending\" \n       elsif f.status == 1\n                 \"Accepted\"\n       elsif f.status == 2\n                 \"Rejected\"\n       else\n                 \"Pending\"\n       end%&gt;\n&lt;/td&gt;\n</code></pre>\n"}, {"tags": ["ruby", "prometheus"], "comments": [{"owner": {"reputation": 16672, "user_id": 22237, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/hkobD.png?s=128&g=1", "display_name": "Kris", "link": "https://stackoverflow.com/users/22237/kris"}, "edited": false, "score": 0, "creation_date": 1539614748, "post_id": 52816636, "comment_id": 92555975, "body": "This question is difficult to understand, maybe at least add the table schema and any code you have already tried."}], "answers": [{"tags": [], "owner": {"reputation": 319, "user_id": 9544257, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/VLJVs.jpg?s=128&g=1", "display_name": "wbh1", "link": "https://stackoverflow.com/users/9544257/wbh1"}, "is_accepted": false, "score": 1, "last_activity_date": 1539615420, "creation_date": 1539615420, "answer_id": 52819517, "question_id": 52816636, "link": "https://stackoverflow.com/questions/52816636/how-to-compare-corresponding-metrics-in-prometheus/52819517#52819517", "title": "how to compare corresponding metrics in prometheus?", "body": "<p>If you're generating metrics for every record and each record has a unique identifier (i.e. label), then you can use the <code>count</code> and <code>by</code> aggregators. For example, <code>count(table_metric{id=\"foo\"}) by (table)</code> would work if they each have a table label.</p>\n\n<p>If the metric names are different, you'll probably want to use the <code>or</code> operator to create a union. For example, <code>count(table_1_metric or table_2_metric) by (id)</code>.</p>\n\n<p>In either case, if you want an entry in both tables, you'll want to check to make sure the count is 2.</p>\n\n<p>Finally, just my two cents, but I wouldn't recommend making a habit of putting such high cardinality data into Prometheus. An alternative way of doing this would involve using something like <a href=\"https://github.com/free/sql_exporter\" rel=\"nofollow noreferrer\">this SQL exporter</a> to generate metrics based off database queries (e.g. <code>SELECT count(*) FROM T1 LEFT JOIN T2 ON T1.ID = T2.ID WHERE T2.ID IS NULL</code>, which would show you how many don't match so you could investigate further).</p>\n"}], "owner": {"reputation": 1907, "user_id": 1902570, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/110a426ea70c739aa926efef57ab8428?s=128&d=identicon&r=PG", "display_name": "Leo", "link": "https://stackoverflow.com/users/1902570/leo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 110, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1539615420, "creation_date": 1539605907, "question_id": 52816636, "link": "https://stackoverflow.com/questions/52816636/how-to-compare-corresponding-metrics-in-prometheus", "title": "how to compare corresponding metrics in prometheus?", "body": "<p>lets say i have two corresponding tables, table1 and table2, in my database, one-to-one. for creation of each record in each table there is a metric. now, is it possible two use these two metrics(one from table1 and one from table2) to have na information how many records in table1 DOESNT have a corresponding record in table2 in a given moment? can i pass id of the record into metrics somehow?</p>\n"}, {"tags": ["ruby", "sequel"], "comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1539619775, "post_id": 52816454, "comment_id": 92558591, "body": "I don&#39;t think you can <code>WHERE IN</code> on pairs. You could make a temporary table and try and <code>JOIN</code> to it."}, {"owner": {"reputation": 5797, "user_id": 354531, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/309ab5709c9ab5d92a07ca6c1a38aaa8?s=128&d=identicon&r=PG", "display_name": "Emil Ahlb&#228;ck", "link": "https://stackoverflow.com/users/354531/emil-ahlb%c3%a4ck"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1539688978, "post_id": 52816454, "comment_id": 92584599, "body": "@tadman see Jeremy&#39;s answer below. :)"}], "answers": [{"comments": [{"owner": {"reputation": 5797, "user_id": 354531, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/309ab5709c9ab5d92a07ca6c1a38aaa8?s=128&d=identicon&r=PG", "display_name": "Emil Ahlb&#228;ck", "link": "https://stackoverflow.com/users/354531/emil-ahlb%c3%a4ck"}, "edited": false, "score": 0, "creation_date": 1539688956, "post_id": 52822367, "comment_id": 92584587, "body": "Thank you so much, Jeremy!"}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1539712421, "post_id": 52822367, "comment_id": 92598523, "body": "Well that was surprisingly easy."}], "tags": [], "owner": {"reputation": 11331, "user_id": 132053, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f183bcc4176b308c9edabe79299e448f?s=128&d=identicon&r=PG", "display_name": "Jeremy Evans", "link": "https://stackoverflow.com/users/132053/jeremy-evans"}, "is_accepted": true, "score": 3, "last_activity_date": 1539626511, "creation_date": 1539626511, "answer_id": 52822367, "question_id": 52816454, "link": "https://stackoverflow.com/questions/52816454/matching-list-of-values-on-multiple-columns-in-sequel/52822367#52822367", "title": "Matching list of values on multiple columns in Sequel", "body": "<pre><code>DB[:table].where([:a, :b]=&gt;[[1,1], [2,2], [2,1]])\n# SELECT * FROM table WHERE ((a, b) IN ((1, 1), (2, 2), (2, 1)))\n</code></pre>\n"}], "owner": {"reputation": 5797, "user_id": 354531, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/309ab5709c9ab5d92a07ca6c1a38aaa8?s=128&d=identicon&r=PG", "display_name": "Emil Ahlb&#228;ck", "link": "https://stackoverflow.com/users/354531/emil-ahlb%c3%a4ck"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 143, "favorite_count": 0, "accepted_answer_id": 52822367, "answer_count": 1, "score": 2, "last_activity_date": 1539626511, "creation_date": 1539605353, "last_edit_date": 1539606020, "question_id": 52816454, "link": "https://stackoverflow.com/questions/52816454/matching-list-of-values-on-multiple-columns-in-sequel", "title": "Matching list of values on multiple columns in Sequel", "body": "<p>Given a table with a composite primary key, say <code>a</code> and <code>b</code>. If I have a list of pairs that I would like to query for, say, </p>\n\n<pre><code>pairs = [[1, 1], [2, 2], [2, 1]]\n</code></pre>\n\n<p>How can I filter using these in a dataset?</p>\n\n<p>The result in SQL would look like</p>\n\n<pre><code>WHERE (a, b) IN ((1, 1), (2, 2), (2, 1))\n</code></pre>\n\n<p>There's <code>DB.values()</code> that can be used to express the right side, but I'm not sure how to get the actual filtering into a dataset.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "forms", "ruby-on-rails-5", "locale"], "answers": [{"comments": [{"owner": {"reputation": 314, "user_id": 3181644, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/9c71298986d9ba855dadcc45c498fa17?s=128&d=identicon&r=PG&f=1", "display_name": "Mene", "link": "https://stackoverflow.com/users/3181644/mene"}, "edited": false, "score": 0, "creation_date": 1587941338, "post_id": 52816553, "comment_id": 108701366, "body": "scope actually has another use here, it will name the parameters passed by the form. What you suggest will create a locale[:field_name], which I think is not what the OP is looking for."}], "tags": [], "owner": {"reputation": 1454, "user_id": 1477940, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/f10a7263b299645bfbdcf747c0179297?s=128&d=identicon&r=PG", "display_name": "DonPaulie", "link": "https://stackoverflow.com/users/1477940/donpaulie"}, "is_accepted": false, "score": 1, "last_activity_date": 1539605655, "creation_date": 1539605655, "answer_id": 52816553, "question_id": 52815652, "link": "https://stackoverflow.com/questions/52815652/rails-locales-using-form-with/52816553#52816553", "title": "Rails: Locales using form_with?", "body": "<p><code>root</code> inside of scope means the root of the scope. </p>\n\n<p>Example: </p>\n\n<pre><code>root # matches / \nscope ':locale' do\n  root # matches /en/\n  resources :foos # matches /en/foos, /en/foo/1, ...\nend\n</code></pre>\n\n<p>I suggest you to call <code>rake routes</code> to see what routes you have defined and play around a bit. </p>\n\n<p>And back to the error you are getting. This error means, that the constraint on the scope is not matched. I'd bet, that the locale is empty. \naccording to <a href=\"https://edgeapi.rubyonrails.org/classes/ActionView/Helpers/FormHelper.html#method-i-form_with\" rel=\"nofollow noreferrer\">docs</a> of <code>form_with</code>, you should use scope option, like this: </p>\n\n<pre><code>&lt;%= form_with(model: @model, local: true, scope: I18n.locale) do |form| %&gt;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 314, "user_id": 3181644, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/9c71298986d9ba855dadcc45c498fa17?s=128&d=identicon&r=PG&f=1", "display_name": "Mene", "link": "https://stackoverflow.com/users/3181644/mene"}, "is_accepted": false, "score": 1, "last_activity_date": 1587941176, "creation_date": 1587941176, "answer_id": 61449107, "question_id": 52815652, "link": "https://stackoverflow.com/questions/52815652/rails-locales-using-form-with/61449107#61449107", "title": "Rails: Locales using form_with?", "body": "<p>Rails is using your instance of ModelName because locale isn't set.\nTo be sure that your locale is set in urls, add the <code>default_url_options</code> method to <code>application_controller</code>, where <code>set_locale</code> contains the logic for your application's locale. </p>\n\n<pre><code>def default_url_options\n   { locale: set_locale }\nend\n\nprivate def set_locale\n  params[:locale] || I18n.default_locale\nend\n</code></pre>\n\n<p>source: <a href=\"https://guides.rubyonrails.org/i18n.html#managing-the-locale-across-requests\" rel=\"nofollow noreferrer\">https://guides.rubyonrails.org/i18n.html#managing-the-locale-across-requests</a></p>\n"}], "owner": {"reputation": 11, "user_id": 10506994, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/528987d5a12041c054799c4b6ae53901?s=128&d=identicon&r=PG&f=1", "display_name": "user10506994", "link": "https://stackoverflow.com/users/10506994/user10506994"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 260, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1587941176, "creation_date": 1539602601, "question_id": 52815652, "link": "https://stackoverflow.com/questions/52815652/rails-locales-using-form-with", "title": "Rails: Locales using form_with?", "body": "<p>How do I use locales and <code>form_with</code>? By locale I mean <code>/en</code> instead of <code>/?locale=en</code>.</p>\n\n<p>This is part of my view file:</p>\n\n<p><code>&lt;%= form_with(model: @model, local: true, locale: I18n.locale) do |form| %&gt;</code></p>\n\n<p>After submitting the form I get the following error:</p>\n\n<p><code>No route matches {:action=&gt;\"show\", :controller=&gt;\"model_name\", :format=&gt;nil, :locale=&gt;#&lt;ModelName id: 2, created_at: \"2018-10-15 11:07:36\", updated_at: \"2018-10-15 11:08:09\"&gt;}, missing required keys: [:id], possible unmatched constraints: [:locale]</code></p>\n\n<p>Notice how locale is set with the given model ...</p>\n\n<p>This is my <code>routes.rb</code>:</p>\n\n<pre><code>root 'model_name#new'\n\nscope ':locale', locale: /[a-z]{2}/ do\n  root 'model_name#new'\n  resources :model_name, only: [:create, :show]\nend\n</code></pre>\n\n<p>I don't understand why I need to set root twice but ...</p>\n\n<p>Thanks!</p>\n"}, {"tags": ["ruby", "libgosu"], "comments": [{"owner": {"reputation": 171, "user_id": 9992610, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f1cb08f66aed6c5ef18d43daddb94df4?s=128&d=identicon&r=PG&f=1", "display_name": "krsna", "link": "https://stackoverflow.com/users/9992610/krsna"}, "edited": false, "score": 0, "creation_date": 1539602300, "post_id": 52814756, "comment_id": 92548344, "body": "did you try these :<a href=\"https://apidock.com/ruby/String/center\" rel=\"nofollow noreferrer\">apidock.com/ruby/String/center</a> if you just want to centre text"}, {"owner": {"reputation": 125, "user_id": 10228623, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7ae92d25e3a61b31c2f040bc36f43e4d?s=128&d=identicon&r=PG&f=1", "display_name": "Kyle Sharp", "link": "https://stackoverflow.com/users/10228623/kyle-sharp"}, "reply_to_user": {"reputation": 171, "user_id": 9992610, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f1cb08f66aed6c5ef18d43daddb94df4?s=128&d=identicon&r=PG&f=1", "display_name": "krsna", "link": "https://stackoverflow.com/users/9992610/krsna"}, "edited": false, "score": 0, "creation_date": 1539602718, "post_id": 52814756, "comment_id": 92548576, "body": "How does that help centre text in a Gosu window?"}, {"owner": {"reputation": 171, "user_id": 9992610, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f1cb08f66aed6c5ef18d43daddb94df4?s=128&d=identicon&r=PG&f=1", "display_name": "krsna", "link": "https://stackoverflow.com/users/9992610/krsna"}, "edited": false, "score": 0, "creation_date": 1539603105, "post_id": 52814756, "comment_id": 92548810, "body": "<a href=\"https://github.com/gosu/gosu/wiki/ruby-tutorial#21-player--movement\" rel=\"nofollow noreferrer\">github.com/gosu/gosu/wiki/ruby-tutorial#21-player--movement</a>      did you try with @image.draw_rot as given in the documentation and also &quot;Note that draw_rot puts the center of the image at (x, y)&quot;"}, {"owner": {"reputation": 125, "user_id": 10228623, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7ae92d25e3a61b31c2f040bc36f43e4d?s=128&d=identicon&r=PG&f=1", "display_name": "Kyle Sharp", "link": "https://stackoverflow.com/users/10228623/kyle-sharp"}, "reply_to_user": {"reputation": 171, "user_id": 9992610, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f1cb08f66aed6c5ef18d43daddb94df4?s=128&d=identicon&r=PG&f=1", "display_name": "krsna", "link": "https://stackoverflow.com/users/9992610/krsna"}, "edited": false, "score": 0, "creation_date": 1539603551, "post_id": 52814756, "comment_id": 92549060, "body": "That&#39;s for an image, I&#39;m trying to do text. I have tried using the method draw_rot, but the method I used before it has been deprecated. Sorry if that wasn&#39;t clear. How do I create the text I want to use in draw_rot?"}, {"owner": {"reputation": 2125, "user_id": 1446543, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/934816c610f53abdab5f26510478bc24?s=128&d=identicon&r=PG", "display_name": "ForeverZer0", "link": "https://stackoverflow.com/users/1446543/foreverzer0"}, "edited": false, "score": 0, "creation_date": 1539634733, "post_id": 52814756, "comment_id": 92565444, "body": "Have you looked at the documentation for <a href=\"https://www.rubydoc.info/github/gosu/gosu/Gosu/Font#draw_rel-instance_method\" rel=\"nofollow noreferrer\">Font#draw_rel</a>? In addition to that, you can measure the text with other methods and calculate yourself if that does not work for some reason."}], "answers": [{"tags": [], "owner": {"reputation": 689, "user_id": 10280525, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Ar3KN.jpg?s=128&g=1", "display_name": "Nifriz", "link": "https://stackoverflow.com/users/10280525/nifriz"}, "is_accepted": false, "score": 0, "last_activity_date": 1542020938, "creation_date": 1542020938, "answer_id": 53260894, "question_id": 52814756, "link": "https://stackoverflow.com/questions/52814756/centre-text-in-ruby-libgosu/53260894#53260894", "title": "Centre text in ruby/libgosu", "body": "<p>The best way to put a TEXT in Window with GOSU is using FONT.</p>\n\n<p>Initialize it</p>\n\n<pre><code>your_text = Gosu::Font.new(FONT_HEIGHT)\n</code></pre>\n\n<p>And then draw it</p>\n\n<pre><code>your_text.draw_text('HERE A TEXT', x, y, z)\n</code></pre>\n\n<p>You can center it using WINDOW height and width attribute.</p>\n"}], "owner": {"reputation": 125, "user_id": 10228623, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7ae92d25e3a61b31c2f040bc36f43e4d?s=128&d=identicon&r=PG&f=1", "display_name": "Kyle Sharp", "link": "https://stackoverflow.com/users/10228623/kyle-sharp"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 83, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1542020938, "creation_date": 1539599616, "last_edit_date": 1539604715, "question_id": 52814756, "link": "https://stackoverflow.com/questions/52814756/centre-text-in-ruby-libgosu", "title": "Centre text in ruby/libgosu", "body": "<p>I am trying to centre text in ruby/gosu. However all answers I have come across use deprecated methods. This is the code I've made from those answers. Any help on how to make it work with current versions?</p>\n\n<pre><code>if @track_listing &lt; album.tracks.length\n        track_display = Gosu::Image.from_text(self, tracks, Gosu.default_font_name, 50)\n        track_display.draw_rot(750, 300, 0, center_x = 0.5, center_y = 0.5)\nend\n</code></pre>\n"}, {"tags": ["ruby", "selenium", "cucumber"], "answers": [{"comments": [{"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1539605352, "post_id": 52816442, "comment_id": 92550083, "body": "p.s. Hi Jas! :)"}, {"owner": {"reputation": 485, "user_id": 8798283, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/0522bfc3b8fd78d05a7d4e1bbee5188e?s=128&d=identicon&r=PG&f=1", "display_name": "Jas", "link": "https://stackoverflow.com/users/8798283/jas"}, "edited": false, "score": 0, "creation_date": 1539605654, "post_id": 52816442, "comment_id": 92550274, "body": "thanks! Could I also utilise some more advanced functionality like a Cucumber Rake?"}, {"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "reply_to_user": {"reputation": 485, "user_id": 8798283, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/0522bfc3b8fd78d05a7d4e1bbee5188e?s=128&d=identicon&r=PG&f=1", "display_name": "Jas", "link": "https://stackoverflow.com/users/8798283/jas"}, "edited": false, "score": 0, "creation_date": 1539608408, "post_id": 52816442, "comment_id": 92551966, "body": "Yes, this is also possible. In order to run cucumber via rake, you need to <code>require &#39;cucumber&#39;</code> and <code>require &#39;cucumber&#47;rake&#47;task&#39;</code> in the project <code>Rakefile</code>. See more here: <a href=\"https://www.rubydoc.info/gems/cucumber/Cucumber/Rake/Task\" rel=\"nofollow noreferrer\">rubydoc.info/gems/cucumber/Cucumber/Rake/Task</a>"}, {"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "reply_to_user": {"reputation": 485, "user_id": 8798283, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/0522bfc3b8fd78d05a7d4e1bbee5188e?s=128&d=identicon&r=PG&f=1", "display_name": "Jas", "link": "https://stackoverflow.com/users/8798283/jas"}, "edited": false, "score": 0, "creation_date": 1539608602, "post_id": 52816442, "comment_id": 92552105, "body": "You <i>could</i> even perform the loop within rake, too - i.e. define a rake task that takes the name of another rake task as a parameter, and call <code>invoke</code> on it. But that&#39;s most likely overkill, if you could achieve that via a bash script like above! :)"}], "tags": [], "owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "is_accepted": true, "score": 1, "last_activity_date": 1539605326, "creation_date": 1539605326, "answer_id": 52816442, "question_id": 52814553, "link": "https://stackoverflow.com/questions/52814553/how-can-i-run-a-tagged-cucumber-test-multiple-times/52816442#52816442", "title": "How can I run a tagged cucumber test multiple times?", "body": "<p>I would suggest wrapping the <code>cucumber</code> command in a simple bash loop, such as:</p>\n\n<pre><code>for i in {1..20}; do cucumber features --t @web1; done\n</code></pre>\n\n<p>This will run the whole suite 20 times; it's (almost) equivalent to just running the command manually 20 times.</p>\n\n<p>You could also consider doing something like <a href=\"https://stackoverflow.com/a/12967264/1954610\">this</a> - i.e. re-run the same test indefinitely, until they fail. Assuming the purpose of this is to help track down intermittent failures.</p>\n"}], "owner": {"reputation": 485, "user_id": 8798283, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/0522bfc3b8fd78d05a7d4e1bbee5188e?s=128&d=identicon&r=PG&f=1", "display_name": "Jas", "link": "https://stackoverflow.com/users/8798283/jas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 753, "favorite_count": 0, "accepted_answer_id": 52816442, "answer_count": 1, "score": 1, "last_activity_date": 1539605326, "creation_date": 1539598949, "question_id": 52814553, "link": "https://stackoverflow.com/questions/52814553/how-can-i-run-a-tagged-cucumber-test-multiple-times", "title": "How can I run a tagged cucumber test multiple times?", "body": "<h1>Scenario</h1>\n\n<p>I currently have a number of tests in cucumber which are all under one specific tag so that those specific ones can be run again and once I am happy with my changes they would then be changed to a more generic one where they run as part of a CI suite etc. </p>\n\n<p>The command that I use to currently run that group of tests is:</p>\n\n<pre><code>cucumber features --t @web1\n</code></pre>\n\n<p>What can I add onto this command to make these specific tests run in a loop? i.e. I'd like to run these specific tests under this tag, 20 times say (instead of having to wait for the to complete and enter the command in manually each time).</p>\n\n<p>I've tried to have a look around for some examples but didn't find anything specific for my case. </p>\n\n<p>Any ideas?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-3", "ruby-on-rails-4", "locking"], "comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1539621707, "post_id": 52814450, "comment_id": 92559422, "body": "Multi-tagging different versions of Rails here isn&#39;t really a great idea. ActiveRecord changed substantially between those versions, so which one are you actually using?"}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1539621727, "post_id": 52814450, "comment_id": 92559432, "body": "Is the lock wait-time configurable or not? Usually it is."}], "owner": {"reputation": 752, "user_id": 4645982, "user_type": "registered", "accept_rate": 45, "profile_image": "https://i.stack.imgur.com/6R1yX.jpg?s=128&g=1", "display_name": "Neelabh Singh", "link": "https://stackoverflow.com/users/4645982/neelabh-singh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 33, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1539599580, "creation_date": 1539598622, "last_edit_date": 1539599580, "question_id": 52814450, "link": "https://stackoverflow.com/questions/52814450/ruby-maximum-waiting-time-for-pessimistic-lock", "title": "Ruby: Maximum Waiting time for pessimistic lock?", "body": "<p>Two different systems/process try to update same request. However, I am using pessimistic locking mechanism: <code>lock!</code>. Suppose system-1 acquire the lock before system-2.\nWhat is maximum waiting time for the system-2 to acquire lock? \nRelated question: If it reached the maximum waiting time, will it rollback transaction?</p>\n\n<pre><code>Request.transaction do\n\n  lock!\n    # Do something important\n\nend\n</code></pre>\n"}, {"tags": ["ruby", "git", "shell", "jenkins", "webhooks"], "comments": [{"owner": {"reputation": 2567, "user_id": 7983309, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yB7aS.png?s=128&g=1", "display_name": "ben5556", "link": "https://stackoverflow.com/users/7983309/ben5556"}, "edited": false, "score": 0, "creation_date": 1539598447, "post_id": 52814116, "comment_id": 92546278, "body": "Hi, I am not sure if variables can be passed to <code>Execute shell script on remote host using ssh</code> but did you try &quot;${ref}&quot; and see if it works ?"}, {"owner": {"reputation": 31, "user_id": 10131634, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-ggDFsU2liew/AAAAAAAAAAI/AAAAAAAAAAA/AAnnY7pP12Z_-CbAUlGm8gEYg-EV2w8nsw/mo/photo.jpg?sz=128", "display_name": "nayak_namratha", "link": "https://stackoverflow.com/users/10131634/nayak-namratha"}, "reply_to_user": {"reputation": 2567, "user_id": 7983309, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yB7aS.png?s=128&g=1", "display_name": "ben5556", "link": "https://stackoverflow.com/users/7983309/ben5556"}, "edited": false, "score": 0, "creation_date": 1539600183, "post_id": 52814116, "comment_id": 92547152, "body": "Yes, I did. But it didn&#39;t work :("}], "owner": {"reputation": 31, "user_id": 10131634, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-ggDFsU2liew/AAAAAAAAAAI/AAAAAAAAAAA/AAnnY7pP12Z_-CbAUlGm8gEYg-EV2w8nsw/mo/photo.jpg?sz=128", "display_name": "nayak_namratha", "link": "https://stackoverflow.com/users/10131634/nayak-namratha"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 77, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1539597359, "creation_date": 1539597359, "question_id": 52814116, "link": "https://stackoverflow.com/questions/52814116/send-environment-variable-as-a-command-line-argument-inside-a-remote-ssh-of-the", "title": "Send environment variable as a command line argument inside a remote ssh of the jenkins", "body": "<p>I want to pass the post content parameter of the generic webhook trigger as a command line argument to the ruby script on remote ssh. Could someone please help me in achieving the same. </p>\n\n<p>Here is what I am doing:\nIn Jenkins, under Generic WebHook Trigger, I am using $.ref(which is the branch name of the git). </p>\n\n<p>Under Build-> Execute shell script on remote host using ssh, I am trying to run the ruby script. And I want to pass the above env variable \"ref\" as a command line argument to the ruby script:\nFor example: this is what I am executing inside remote ssh \nruby rubyscriptname.rb ${ref}</p>\n\n<p>But this is not working. The script takes the value of the ref as ${ref} instead of it's value. </p>\n"}, {"tags": ["arrays", "ruby"], "comments": [{"owner": {"reputation": 1512, "user_id": 760393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/24e27e5c8b053d6600b9fca6f86c78ec?s=128&d=identicon&r=PG", "display_name": "Ra&#250;l", "link": "https://stackoverflow.com/users/760393/ra%c3%bal"}, "edited": false, "score": 0, "creation_date": 1539591581, "post_id": 52812180, "comment_id": 92542698, "body": "Please try something on your own, and come up with a more specific problem. Thanks."}, {"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 2, "creation_date": 1539593891, "post_id": 52812180, "comment_id": 92543926, "body": "Those are not arrays, not even valid Ruby objects."}, {"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "reply_to_user": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 1, "creation_date": 1539618747, "post_id": 52812180, "comment_id": 92558080, "body": "@sawa Technically speaking... Yes they are and Yes they are. Ruby allows your to forgo the square brackets when defining a literal <code>Array</code>. That being said I would never recommend it"}], "answers": [{"tags": [], "owner": {"reputation": 802, "user_id": 8728218, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/376ec53188ea3ec0271198a862516657?s=128&d=identicon&r=PG&f=1", "display_name": "Dyaniyal Wilson", "link": "https://stackoverflow.com/users/8728218/dyaniyal-wilson"}, "is_accepted": false, "score": 1, "last_activity_date": 1539591328, "creation_date": 1539591328, "answer_id": 52812384, "question_id": 52812180, "link": "https://stackoverflow.com/questions/52812180/how-to-compare-two-arrays-if-they-have-similar-values-or-not-in-ruby/52812384#52812384", "title": "How to compare two arrays if they have similar values or not in ruby", "body": "<p>Convert the array of strings to array of integers. Then sort the array to compare the arrays</p>\n\n<pre><code>API_Response.map(&amp;:to_i).sort == Database_Response.sort\n</code></pre>\n\n<p>This will return true only if both the response arrays are equal after sorting</p>\n"}, {"comments": [{"owner": {"reputation": 13442, "user_id": 3982562, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2a3c7aae1d762372cda697833c602ec8?s=128&d=identicon&r=PG", "display_name": "3limin4t0r", "link": "https://stackoverflow.com/users/3982562/3limin4t0r"}, "edited": false, "score": 1, "creation_date": 1539689974, "post_id": 52812835, "comment_id": 92585189, "body": "I&#39;d replace <code>.size.zero?</code> with <code>.empty?</code>, but otherwise a clean solution."}], "tags": [], "owner": {"reputation": 156, "user_id": 4706812, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-kQIR87DJsJk/AAAAAAAAAAI/AAAAAAAAA7c/nMxrC4Aa06c/photo.jpg?sz=128", "display_name": "cmunozgar", "link": "https://stackoverflow.com/users/4706812/cmunozgar"}, "is_accepted": false, "score": 1, "last_activity_date": 1539593155, "creation_date": 1539593155, "answer_id": 52812835, "question_id": 52812180, "link": "https://stackoverflow.com/questions/52812180/how-to-compare-two-arrays-if-they-have-similar-values-or-not-in-ruby/52812835#52812835", "title": "How to compare two arrays if they have similar values or not in ruby", "body": "<p>If you want to see if all the values of <code>API_Reponse</code> are availabe in <code>Database_Response</code> you should do the following:</p>\n\n<pre><code>API_Response = API_Response.map(&amp;:to_i)\n(API_Response - Database_Respone).size.zero?\n</code></pre>\n\n<p>The result of the second LOC will determine if all the values of <code>API_Response</code> are present in <code>Database_Response</code></p>\n"}, {"comments": [{"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 1, "creation_date": 1539600911, "post_id": 52813155, "comment_id": 92547567, "body": "This is <code>O(N&#178;)</code> while <code>(API_Response.map(&amp;:to_i) - Database_Response).empty?</code> is <code>O(N)</code>."}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1539619570, "post_id": 52813155, "comment_id": 92558492, "body": "Which is literally <code>O(N)</code>."}], "tags": [], "owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "is_accepted": true, "score": 1, "last_activity_date": 1539594195, "creation_date": 1539594195, "answer_id": 52813155, "question_id": 52812180, "link": "https://stackoverflow.com/questions/52812180/how-to-compare-two-arrays-if-they-have-similar-values-or-not-in-ruby/52813155#52813155", "title": "How to compare two arrays if they have similar values or not in ruby", "body": "<p>I would do something like this:</p>\n\n<pre><code>API_Response.all? { |number| Database_Response.include?(number.to_i) }\n</code></pre>\n\n<p><code>all?</code> returns as soon as it finds a <code>number</code> that is not included and therefore might be faster than checking all numbers.</p>\n\n<p>Depending on the size of <code>Database_Response</code> it might make sense to translate that array into a <code>Set</code> first. Furthermore, you might want to improve performance by using your database to solve this problem instead of loading all records into memory first.</p>\n"}, {"comments": [{"owner": {"reputation": 1, "user_id": 10506020, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-P2ozj_bcezM/AAAAAAAAAAI/AAAAAAAATlE/kxTF6bUQPEE/photo.jpg?sz=128", "display_name": "Sagar Kalshetti", "link": "https://stackoverflow.com/users/10506020/sagar-kalshetti"}, "edited": false, "score": 0, "creation_date": 1539627477, "post_id": 52813787, "comment_id": 92562121, "body": "Thanks @santosh dadi. This piece of code really helped to remove the double quotes and compare the array values. But one more question arises here for me,  what if one array has characters and another array has integers for ex: API_Response = &quot;1,0,0,1,1&quot; and Database_Response = &quot;true, false, true, false, true, false, false&quot;. Here 1 refers to true and 0 refers to false in &#39;API Response&#39;. I want to compare these two arrays"}, {"owner": {"reputation": 13442, "user_id": 3982562, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2a3c7aae1d762372cda697833c602ec8?s=128&d=identicon&r=PG", "display_name": "3limin4t0r", "link": "https://stackoverflow.com/users/3982562/3limin4t0r"}, "reply_to_user": {"reputation": 1, "user_id": 10506020, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-P2ozj_bcezM/AAAAAAAAAAI/AAAAAAAATlE/kxTF6bUQPEE/photo.jpg?sz=128", "display_name": "Sagar Kalshetti", "link": "https://stackoverflow.com/users/10506020/sagar-kalshetti"}, "edited": false, "score": 0, "creation_date": 1539691058, "post_id": 52813787, "comment_id": 92585823, "body": "@SagarKalshetti Convert the strings to the same format first. <code>API_Response.gsub(&#39;1&#39;, &#39;true&#39;).gsub(&#39;0&#39;, &#39;false&#39;).gsub(&#39;,&#39;, &#39;, &#39;)</code>. Keep in mind that those still aren&#39;t arrays but just strings."}], "tags": [], "owner": {"reputation": 334, "user_id": 4562300, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/PK5u6.jpg?s=128&g=1", "display_name": "santosh dadi", "link": "https://stackoverflow.com/users/4562300/santosh-dadi"}, "is_accepted": false, "score": 2, "last_activity_date": 1539596301, "creation_date": 1539596301, "answer_id": 52813787, "question_id": 52812180, "link": "https://stackoverflow.com/questions/52812180/how-to-compare-two-arrays-if-they-have-similar-values-or-not-in-ruby/52813787#52813787", "title": "How to compare two arrays if they have similar values or not in ruby", "body": "<p>I think it helps you check this </p>\n\n<p>To remove the double quotes from API Response just do this</p>\n\n<pre><code>            API_Response = API_Response.map(&amp;:to_i)\n</code></pre>\n\n<p>Now to compare both API_Response and Database_Response </p>\n\n<pre><code>        result =  API_Response &amp; Database_Response \n</code></pre>\n\n<p>this will compare both arrays and gives you common values from both the arrays</p>\n\n<pre><code>       result = [2453565, 23563425645, 43252436, 4676345]\n</code></pre>\n\n<p>Hope this helps you.</p>\n"}, {"comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1539618403, "post_id": 52817373, "comment_id": 92557915, "body": "Didn&#39;t know about the <code>&lt;=</code> feature. That&#39;s really something."}], "tags": [], "owner": {"reputation": 13442, "user_id": 3982562, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2a3c7aae1d762372cda697833c602ec8?s=128&d=identicon&r=PG", "display_name": "3limin4t0r", "link": "https://stackoverflow.com/users/3982562/3limin4t0r"}, "is_accepted": false, "score": 1, "last_activity_date": 1539608352, "creation_date": 1539608352, "answer_id": 52817373, "question_id": 52812180, "link": "https://stackoverflow.com/questions/52812180/how-to-compare-two-arrays-if-they-have-similar-values-or-not-in-ruby/52817373#52817373", "title": "How to compare two arrays if they have similar values or not in ruby", "body": "<p>If you're looking for a simple <code>true</code>/<code>false</code> result I recommend taking a look at the <a href=\"http://ruby-doc.org/stdlib-2.5.1/libdoc/set/rdoc/Set.html\" rel=\"nofollow noreferrer\"><em>Set</em></a> class. It contains some useful methods to check if one set is a superset or subset of another set.</p>\n\n<pre><code>require 'set'\n\nAPI_Response.map!(&amp;:to_i)\nSet.new(API_Response) &lt;= Set.new(Database_Respone)\n#=&gt; false\n</code></pre>\n\n<p>Keep in mind that when creating a set from an array duplicated values are removed automatically.</p>\n\n<p><strong>References:</strong></p>\n\n<ul>\n<li><a href=\"http://ruby-doc.org/core-2.5.1/Array.html#method-i-map-21\" rel=\"nofollow noreferrer\"><code>Array#map!</code></a></li>\n<li><a href=\"http://ruby-doc.org/core-2.5.1/String.html#method-i-to_i\" rel=\"nofollow noreferrer\"><code>String#to_i</code></a></li>\n<li><a href=\"http://ruby-doc.org/stdlib-2.5.1/libdoc/set/rdoc/Set.html#method-c-new\" rel=\"nofollow noreferrer\"><code>Set::new</code></a></li>\n<li><a href=\"http://ruby-doc.org/stdlib-2.5.1/libdoc/set/rdoc/Set.html#method-i-3C-3D\" rel=\"nofollow noreferrer\"><code>Set#&lt;=</code></a> (alias for <a href=\"http://ruby-doc.org/stdlib-2.5.1/libdoc/set/rdoc/Set.html#method-i-subset-3F\" rel=\"nofollow noreferrer\"><code>Set#subset?</code></a>)</li>\n</ul>\n"}], "owner": {"reputation": 1, "user_id": 10506020, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-P2ozj_bcezM/AAAAAAAAAAI/AAAAAAAATlE/kxTF6bUQPEE/photo.jpg?sz=128", "display_name": "Sagar Kalshetti", "link": "https://stackoverflow.com/users/10506020/sagar-kalshetti"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 132, "favorite_count": 1, "accepted_answer_id": 52813155, "answer_count": 5, "score": -3, "last_activity_date": 1539608352, "creation_date": 1539590475, "last_edit_date": 1539591047, "question_id": 52812180, "link": "https://stackoverflow.com/questions/52812180/how-to-compare-two-arrays-if-they-have-similar-values-or-not-in-ruby", "title": "How to compare two arrays if they have similar values or not in ruby", "body": "<p>I am comparing the API response with database fields. I have stored the API response in one array and database field in another</p>\n\n<pre><code>API_Response = \"2451423412\", \"2453565\", \"23563425645\", \"43252436\", \"4676345\"\n\nDatabase_Response = 768567, 4534534, 32451423412, 6978657, 2453565 , 23563425645, 43252436, 4676345\n</code></pre>\n\n<p>In the 'Database__Response' array i have 8 values out of which 5 values are similar to 'API_Response' array.</p>\n\n<p>I want to remove the double quotes from 'API Response' and then compare if all the values in 'API_Response' array are available in 'Database__Response' array</p>\n"}, {"tags": ["ruby", "linux", "shell", "chef-infra"], "comments": [{"owner": {"reputation": 25573, "user_id": 676874, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/c8e67ec01dc3e7c402255ff26785863f?s=128&d=identicon&r=PG", "display_name": "knut", "link": "https://stackoverflow.com/users/676874/knut"}, "edited": false, "score": 0, "creation_date": 1539591051, "post_id": 52812166, "comment_id": 92542443, "body": "MAybe helpfull: <a href=\"https://stackoverflow.com/questions/10147913/ruby-run-shell-command-in-a-specific-directory/10148325#10148325\" title=\"ruby run shell command in a specific directory\">stackoverflow.com/questions/10147913/&hellip;</a>"}, {"owner": {"reputation": 1880, "user_id": 3574603, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/71a7b92124991652bf4dd64a9c50a9ca?s=128&d=identicon&r=PG&f=1", "display_name": "user3574603", "link": "https://stackoverflow.com/users/3574603/user3574603"}, "edited": false, "score": 0, "creation_date": 1539598048, "post_id": 52812166, "comment_id": 92546075, "body": "If you want the first 5 characters of a string, you can use the <code>String#[]</code> method with a range. <code>&quot;012345&quot;[0...5] =&gt; &quot;01234&quot; </code>"}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 8868051, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4a0365dbd982b94ad72e16939060d7e6?s=128&d=identicon&r=PG&f=1", "display_name": "Anna", "link": "https://stackoverflow.com/users/8868051/anna"}, "edited": false, "score": 0, "creation_date": 1539922452, "post_id": 52812912, "comment_id": 92684570, "body": "begin cwdkernel =  Dir.glob(&#39;/var/cache/acpchef/src/ap-kernelmodule-10*&#39;)         cmd = Mixlib::ShellOut.new(&quot;command run here&quot;, :cwd =&gt; &#39;cwdkernel&#39;)         cmd.run_command end------------ how come this is not running the command."}, {"owner": {"reputation": 5449, "user_id": 681520, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/701baebf68d1d7faa9f9def6a24fe356?s=128&d=identicon&r=PG", "display_name": "Kimmo Lehto", "link": "https://stackoverflow.com/users/681520/kimmo-lehto"}, "reply_to_user": {"reputation": 1, "user_id": 8868051, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4a0365dbd982b94ad72e16939060d7e6?s=128&d=identicon&r=PG&f=1", "display_name": "Anna", "link": "https://stackoverflow.com/users/8868051/anna"}, "edited": false, "score": 0, "creation_date": 1539932745, "post_id": 52812912, "comment_id": 92687615, "body": "There&#39;s no &quot;do&quot;"}, {"owner": {"reputation": 1, "user_id": 8868051, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4a0365dbd982b94ad72e16939060d7e6?s=128&d=identicon&r=PG&f=1", "display_name": "Anna", "link": "https://stackoverflow.com/users/8868051/anna"}, "edited": false, "score": 0, "creation_date": 1539933142, "post_id": 52812912, "comment_id": 92687780, "body": "begin        cwd_kernel = Dir.glob(&#39;/var/cache/acpchef/src/ap-kernelmodule-10*&#39;)         cmd = Mixlib::ShellOut.new(&quot;command run here&quot;, :cwd =&gt; cwd_kernel )         cmd.run_command          log &#39;run&#39;      rescue Exception =&gt; e        end -----------so it works only with do?? else it will not"}], "tags": [], "owner": {"reputation": 5449, "user_id": 681520, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/701baebf68d1d7faa9f9def6a24fe356?s=128&d=identicon&r=PG", "display_name": "Kimmo Lehto", "link": "https://stackoverflow.com/users/681520/kimmo-lehto"}, "is_accepted": true, "score": 0, "last_activity_date": 1539593442, "creation_date": 1539593442, "answer_id": 52812912, "question_id": 52812166, "link": "https://stackoverflow.com/questions/52812166/split-the-string-to-get-only-the-first-5-characters/52812912#52812912", "title": "Split the string to get only the first 5 characters", "body": "<p>You can't be in multiple <code>cwd</code>s simultaneously. To run the command for each directory that matches the pattern, you can use <code>Dir#glob</code>:</p>\n\n<pre><code>Dir.glob('/var/cache/acpchef/src/ap-kernelmodule-10*').each do |cwd|\n  Mixlib::ShellOut.new(\"command run here\", cwd: cwd).run_command\nend\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1, "user_id": 8868051, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4a0365dbd982b94ad72e16939060d7e6?s=128&d=identicon&r=PG&f=1", "display_name": "Anna", "link": "https://stackoverflow.com/users/8868051/anna"}, "edited": false, "score": 0, "creation_date": 1539603464, "post_id": 52814360, "comment_id": 92549003, "body": "actually, even if the folder is ap-kernelmodule-10.002-100 or ap-kernelmodule-10.003-101, I need the command to run. Because according to my script the version keeps changing. Sorry for not being very clear. For some machines its one folder and for other machine its the other."}], "tags": [], "owner": {"reputation": 1328, "user_id": 542995, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fPDiC.jpg?s=128&g=1", "display_name": "zdk", "link": "https://stackoverflow.com/users/542995/zdk"}, "is_accepted": false, "score": 0, "last_activity_date": 1539598266, "creation_date": 1539598266, "answer_id": 52814360, "question_id": 52812166, "link": "https://stackoverflow.com/questions/52812166/split-the-string-to-get-only-the-first-5-characters/52814360#52814360", "title": "Split the string to get only the first 5 characters", "body": "<p>I am not quite get on what you really want to achieve. Question is rather ambiguous.</p>\n\n<p>You know you would like to go to <code>/var/log/src/ap-kernelmodule-10.001-100</code> and run a command, the most obvious way is you could just use:</p>\n\n<pre><code>execute \"command run here\" do\n cwd \"/var/log/src/ap-kernelmodule-10.001-100\"\nend\n</code></pre>\n\n<p>But if you would like to run a command for each directory like you said in <code>ap-kernelmodule-10.002-100</code>, <code>ap-kernelmodule-10.003-101</code> etc. with <code>/var/log/src/ap-kernelmodule-10.*/</code> sequentially.</p>\n\n<p>Then you could do with:</p>\n\n<pre><code>Dir.glob(\"/var/log/src/ap-kernelmodule-10.*\").each do |folder|\n  execute \"command run here\" do\n   cwd folder\n  end\nend\n</code></pre>\n\n<p>Additionally, parallel resources execution is not possible natively in chef (AFAIK).\nSo, the possible workaround is to use <code>bash</code> or <code>ruby_block</code> resource to construct commands to be executed in <code>xargs</code>, <code>parallel</code> or similar tools.</p>\n\n<p>Hope this helps.</p>\n"}], "owner": {"reputation": 1, "user_id": 8868051, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4a0365dbd982b94ad72e16939060d7e6?s=128&d=identicon&r=PG&f=1", "display_name": "Anna", "link": "https://stackoverflow.com/users/8868051/anna"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 99, "favorite_count": 0, "accepted_answer_id": 52812912, "answer_count": 2, "score": -2, "last_activity_date": 1539598266, "creation_date": 1539590365, "last_edit_date": 1539590921, "question_id": 52812166, "link": "https://stackoverflow.com/questions/52812166/split-the-string-to-get-only-the-first-5-characters", "title": "Split the string to get only the first 5 characters", "body": "<p>I would like to go to the location \n<code>/var/log/src/ap-kernelmodule-10.001-100</code></p>\n\n<p>But looks like my code has to deal with \nap-kernelmodule-10.002-100, ap-kernelmodule-10.003-101 etc.\nI would like to reach the location with a split string and execute my command. \neg : /var/log/src/ap-kernelmodule-10./</p>\n\n<p>This ruby script for a Linux machine, so I used Mixlib:: ShellOut.</p>\n\n<pre><code>begin  \ncmd = Mixlib::ShellOut.new(\"command run here\" , :cwd =&gt; \n'/var/cache/acpchef/src/ap-kernelmodule-10xxx')\n cmd.run_command\nend\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby"], "answers": [{"tags": [], "owner": {"reputation": 1049, "user_id": 5832250, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2SnJA.jpg?s=128&g=1", "display_name": "Gagan Gupta", "link": "https://stackoverflow.com/users/5832250/gagan-gupta"}, "is_accepted": true, "score": 0, "last_activity_date": 1539590722, "creation_date": 1539590722, "answer_id": 52812237, "question_id": 52812150, "link": "https://stackoverflow.com/questions/52812150/ruby-on-rails-search-method/52812237#52812237", "title": "Ruby on Rails search method", "body": "<p>you're using two <code>?</code> in this statement. so, the interpreter is expecting 2 arguments for each <code>?</code>.\nchange your code to this: </p>\n\n<pre><code>@posts = Post.where(\"title LIKE ? OR description LIKE ?\", \"%#{params[:search]}%\", \"%#{params[:search]}%\").page(params[:page]).per(10)\n</code></pre>\n\n<p>Let me know if it helps.</p>\n"}, {"tags": [], "owner": {"reputation": 5669, "user_id": 7429104, "user_type": "registered", "accept_rate": 20, "profile_image": "https://i.stack.imgur.com/TZAPt.jpg?s=128&g=1", "display_name": "Aman", "link": "https://stackoverflow.com/users/7429104/aman"}, "is_accepted": false, "score": 0, "last_activity_date": 1539594246, "last_edit_date": 1539594246, "creation_date": 1539593915, "answer_id": 52813079, "question_id": 52812150, "link": "https://stackoverflow.com/questions/52812150/ruby-on-rails-search-method/52813079#52813079", "title": "Ruby on Rails search method", "body": "<p>It's good practice to check Case insensitive matching</p>\n\n<pre><code> @posts = Post.where(\"LOWER(title) LIKE ? OR LOWER(description) LIKE ?\", \"%#{params[:search].downcase}%\", \"%#{params[:search].downcase}%\").page(params[:page]).per(10)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "is_accepted": false, "score": 1, "last_activity_date": 1539594891, "creation_date": 1539594891, "answer_id": 52813366, "question_id": 52812150, "link": "https://stackoverflow.com/questions/52812150/ruby-on-rails-search-method/52813366#52813366", "title": "Ruby on Rails search method", "body": "<p>You can name your arguments when you use the hash syntax - for example name it just <code>:q</code>:</p>\n\n<pre><code>@posts = Post\n  .where('title LIKE :q or description LIKE :q', q: \"%#{params[:search]}%\")\n  .page(params[:page]).per(10)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 156, "user_id": 4706812, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-kQIR87DJsJk/AAAAAAAAAAI/AAAAAAAAA7c/nMxrC4Aa06c/photo.jpg?sz=128", "display_name": "cmunozgar", "link": "https://stackoverflow.com/users/4706812/cmunozgar"}, "is_accepted": false, "score": 0, "last_activity_date": 1539597344, "creation_date": 1539597344, "answer_id": 52814111, "question_id": 52812150, "link": "https://stackoverflow.com/questions/52812150/ruby-on-rails-search-method/52814111#52814111", "title": "Ruby on Rails search method", "body": "<p>You can also use this gem called <a href=\"https://github.com/activerecord-hackery/ransack\" rel=\"nofollow noreferrer\">ransack</a>. Although is focused on forms, you can still make great simple search queries. See this documentation: <a href=\"https://github.com/activerecord-hackery/ransack/wiki/Basic-Searching\" rel=\"nofollow noreferrer\">https://github.com/activerecord-hackery/ransack/wiki/Basic-Searching</a></p>\n"}], "owner": {"reputation": 51, "user_id": 10194603, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-hWN495rXPto/AAAAAAAAAAI/AAAAAAAAAAA/AAnnY7oz4MmZglF5X8q3slj4NuIVT7_CBg/mo/photo.jpg?sz=128", "display_name": "James Smith", "link": "https://stackoverflow.com/users/10194603/james-smith"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 843, "favorite_count": 0, "accepted_answer_id": 52812237, "answer_count": 4, "score": 0, "last_activity_date": 1539597344, "creation_date": 1539590326, "question_id": 52812150, "link": "https://stackoverflow.com/questions/52812150/ruby-on-rails-search-method", "title": "Ruby on Rails search method", "body": "<p>So I want to my user to be able to search by title and description so I have added this line of code.\nHere is the error i receive</p>\n\n<blockquote>\n  <p>wrong number of bind variables (1 for 2) in: title LIKE ? or\n  description LIKE ?</p>\n</blockquote>\n\n<pre><code> def index\n\n    @posts = Post.where([\"title LIKE ? or description LIKE ?\", \"%#{params[:search]}%\"]).page(params[:page]).per(10)\n\nend\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "heroku"], "comments": [{"owner": {"reputation": 109029, "user_id": 2767755, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/BkC8q.jpg?s=128&g=1", "display_name": "Arup Rakshit", "link": "https://stackoverflow.com/users/2767755/arup-rakshit"}, "edited": false, "score": 0, "creation_date": 1539585703, "post_id": 52810837, "comment_id": 92539892, "body": "you don&#39;t need <code>serialize</code> declaration, when using postgresql native array type.. just remove it"}, {"owner": {"reputation": 394580, "user_id": 479863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ArUCE.jpg?s=128&g=1", "display_name": "mu is too short", "link": "https://stackoverflow.com/users/479863/mu-is-too-short"}, "edited": false, "score": 0, "creation_date": 1539589704, "post_id": 52810837, "comment_id": 92541795, "body": "Presumably you&#39;re developing on something other than PostgreSQL (SQLite perhaps?) but deploying on PostgreSQL. Don&#39;t do that to yourself; always develop, test, and deploy on the same stack. ActiveRecord doesn&#39;t really offer much in the way of database portability."}], "answers": [{"comments": [{"owner": {"reputation": 394580, "user_id": 479863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ArUCE.jpg?s=128&g=1", "display_name": "mu is too short", "link": "https://stackoverflow.com/users/479863/mu-is-too-short"}, "edited": false, "score": 0, "creation_date": 1539589589, "post_id": 52811127, "comment_id": 92541733, "body": "What do you mean by &quot;However postgresql doesn&#39;t support array data type&quot;? PostgreSQL <i>does</i> support native array columns without the <code>serialize</code> kludge."}, {"owner": {"reputation": 601, "user_id": 9315566, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-pnkVEz0JwTw/AAAAAAAAAAI/AAAAAAAAASo/NlxvDhY5hi0/photo.jpg?sz=128", "display_name": "Shun Yamada", "link": "https://stackoverflow.com/users/9315566/shun-yamada"}, "edited": false, "score": 0, "creation_date": 1539593860, "post_id": 52811127, "comment_id": 92543916, "body": "Thanks but I can&#39;t display <code>array</code> as <code>string</code>. like this error NoMethodError (undefined method `each&#39; for &quot;\\&quot;---\\\\n- 0\\\\n- 1\\\\n- 2\\\\n- 3\\\\n- 4\\\\n- 5\\\\n- 6\\\\n\\&quot;&quot;:String):"}, {"owner": {"reputation": 5669, "user_id": 7429104, "user_type": "registered", "accept_rate": 20, "profile_image": "https://i.stack.imgur.com/TZAPt.jpg?s=128&g=1", "display_name": "Aman", "link": "https://stackoverflow.com/users/7429104/aman"}, "reply_to_user": {"reputation": 601, "user_id": 9315566, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-pnkVEz0JwTw/AAAAAAAAAAI/AAAAAAAAASo/NlxvDhY5hi0/photo.jpg?sz=128", "display_name": "Shun Yamada", "link": "https://stackoverflow.com/users/9315566/shun-yamada"}, "edited": false, "score": 0, "creation_date": 1539593998, "post_id": 52811127, "comment_id": 92543986, "body": "@ShunYamada How did you store value in column? and it should return array not string."}, {"owner": {"reputation": 5669, "user_id": 7429104, "user_type": "registered", "accept_rate": 20, "profile_image": "https://i.stack.imgur.com/TZAPt.jpg?s=128&g=1", "display_name": "Aman", "link": "https://stackoverflow.com/users/7429104/aman"}, "reply_to_user": {"reputation": 601, "user_id": 9315566, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-pnkVEz0JwTw/AAAAAAAAAAI/AAAAAAAAASo/NlxvDhY5hi0/photo.jpg?sz=128", "display_name": "Shun Yamada", "link": "https://stackoverflow.com/users/9315566/shun-yamada"}, "edited": false, "score": 0, "creation_date": 1539594185, "post_id": 52811127, "comment_id": 92544076, "body": "@ShunYamada Check the updated answer , as i have mentioned to get and insert array value, hopefully this will help you."}, {"owner": {"reputation": 601, "user_id": 9315566, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-pnkVEz0JwTw/AAAAAAAAAAI/AAAAAAAAASo/NlxvDhY5hi0/photo.jpg?sz=128", "display_name": "Shun Yamada", "link": "https://stackoverflow.com/users/9315566/shun-yamada"}, "edited": false, "score": 0, "creation_date": 1539595304, "post_id": 52811127, "comment_id": 92544653, "body": "@Gabbar Thanks so much for your help. However I don&#39;t know why but I couldn&#39;t store my array to db and PG don&#39;t recognize this as an array."}], "tags": [], "owner": {"reputation": 5669, "user_id": 7429104, "user_type": "registered", "accept_rate": 20, "profile_image": "https://i.stack.imgur.com/TZAPt.jpg?s=128&g=1", "display_name": "Aman", "link": "https://stackoverflow.com/users/7429104/aman"}, "is_accepted": false, "score": 1, "last_activity_date": 1539594141, "last_edit_date": 1539594141, "creation_date": 1539586099, "answer_id": 52811127, "question_id": 52810837, "link": "https://stackoverflow.com/questions/52810837/postgresqloidarray-does-not-support-serialize-feature/52811127#52811127", "title": "PostgreSQL::OID::Array does not support `serialize` feature", "body": "<p>Solution 1 :=></p>\n\n<pre><code>class AddDaysToSchedule &lt; ActiveRecord::Migration[5.2]\n  def change\n    add_column :event_types, :days, :string, array: true, default: []\n  end\nend\n</code></pre>\n\n<p>No need to serialize</p>\n\n<pre><code>class Schedule &lt; ApplicationRecord\n  #serialize :days, Array\n</code></pre>\n\n<p>Solution 2:=></p>\n\n<p>I would suggest you to go like this: -</p>\n\n<pre><code>class AddDaysToSchedule &lt; ActiveRecord::Migration[5.2]\n  def change\n    add_column :event_types, :days, :string\n  end\nend\n</code></pre>\n\n<p>And serialize column in model as array</p>\n\n<pre><code>class Schedule &lt; ApplicationRecord\n  serialize :days, Array\nend\n</code></pre>\n\n<p>To store values:-</p>\n\n<pre><code>sh = Schedule.new()\nsh.days.push(day_value)\nsh.save\n</code></pre>\n\n<p>To get array value</p>\n\n<pre><code> sh = Schedule.find(x)\n sh.days =&gt; will return array of days\n</code></pre>\n"}], "owner": {"reputation": 601, "user_id": 9315566, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-pnkVEz0JwTw/AAAAAAAAAAI/AAAAAAAAASo/NlxvDhY5hi0/photo.jpg?sz=128", "display_name": "Shun Yamada", "link": "https://stackoverflow.com/users/9315566/shun-yamada"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 586, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1539594141, "creation_date": 1539584860, "question_id": 52810837, "link": "https://stackoverflow.com/questions/52810837/postgresqloidarray-does-not-support-serialize-feature", "title": "PostgreSQL::OID::Array does not support `serialize` feature", "body": "<p>I've tried to deploy to Heroku with <code>array</code> column. But this error occurs. And what can I use method instead of <code>serialize</code> is better?</p>\n\n<pre><code>ActiveRecord::AttributeMethods::Serialization::ColumnNotSerializableError (Column `days` of type ActiveRecord::ConnectionAdapters::PostgreSQL::OID::Array does not support `serialize` feature.\nUsually it means that you are trying to use `serialize`\non a column that already implements serialization natively.\n</code></pre>\n\n<p>// migration file</p>\n\n<pre><code>class AddDaysToSchedule &lt; ActiveRecord::Migration[5.2]\n  def change\n    add_column :event_types, :days, :text, array: true\n  end\nend\n</code></pre>\n\n<p>// schedule model</p>\n\n<pre><code>class Schedule &lt; ApplicationRecord\n  serialize :days, Array\n</code></pre>\n\n<p>Please let me know you knoe how to stack overflow.</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 198293, "user_id": 707111, "user_type": "moderator", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/oXZkh.jpg?s=128&g=1", "display_name": "Ry-", "link": "https://stackoverflow.com/users/707111/ry"}, "edited": false, "score": 3, "creation_date": 1539561808, "post_id": 52808139, "comment_id": 92534346, "body": "This is like if your entire program was <code>&quot;puts &#39;Hello World&#39;&quot;</code> vs. <code>puts &#39;Hello World&#39;</code>. Sure, both programs contain <code>puts</code>, but in one of them it\u2019s code and in the other it\u2019s just part of a string literal."}], "answers": [{"comments": [{"owner": {"reputation": 746, "user_id": 1447975, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/7ecb2a888caf6ef8b5fbdce03d725f92?s=128&d=identicon&r=PG", "display_name": "CBaker", "link": "https://stackoverflow.com/users/1447975/cbaker"}, "edited": false, "score": 0, "creation_date": 1539565476, "post_id": 52808268, "comment_id": 92535057, "body": "Ah ok this makes sense. Is there a way to get the first example to work? I guess you\u2019d have to get it to execute first like the second. Is that possible with a variable that is a string?"}, {"owner": {"reputation": 9542, "user_id": 8068625, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4spqa.png?s=128&g=1", "display_name": "Henry Woody", "link": "https://stackoverflow.com/users/8068625/henry-woody"}, "reply_to_user": {"reputation": 746, "user_id": 1447975, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/7ecb2a888caf6ef8b5fbdce03d725f92?s=128&d=identicon&r=PG", "display_name": "CBaker", "link": "https://stackoverflow.com/users/1447975/cbaker"}, "edited": false, "score": 0, "creation_date": 1539587319, "post_id": 52808268, "comment_id": 92540655, "body": "@CBaker I&#39;m not sure what your expected behavior is. If you want <code>r</code> to be the string <code>&quot;Testing .... puts \\&#39;Hello World\\&#39;&quot;</code>, and you want that to be printed, you can just do <code>puts r</code>. Can you explain a bit more about what you want to have happen?"}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "reply_to_user": {"reputation": 746, "user_id": 1447975, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/7ecb2a888caf6ef8b5fbdce03d725f92?s=128&d=identicon&r=PG", "display_name": "CBaker", "link": "https://stackoverflow.com/users/1447975/cbaker"}, "edited": false, "score": 1, "creation_date": 1539608293, "post_id": 52808268, "comment_id": 92551891, "body": "@CBaker you could wrap the code in a proc: <code>b = -&gt; { puts &#39;hello&#39; }</code> and call that from within the string: <code>r = &quot;Testing #{b.call}&quot;</code>"}], "tags": [], "owner": {"reputation": 9542, "user_id": 8068625, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4spqa.png?s=128&g=1", "display_name": "Henry Woody", "link": "https://stackoverflow.com/users/8068625/henry-woody"}, "is_accepted": true, "score": 3, "last_activity_date": 1539587198, "last_edit_date": 1539587198, "creation_date": 1539563056, "answer_id": 52808268, "question_id": 52808139, "link": "https://stackoverflow.com/questions/52808139/ruby-string-interpolation-operator/52808268#52808268", "title": "Ruby String Interpolation Operator", "body": "<p>String interpolation (the <code>#{}</code> operation) evaluates everything between those braces as code and converts the returned value from execution to a string and places that string in the place of the <code>#{}</code>.</p>\n\n<p>In the first example the string <code>r</code> includes <code>b</code>, and <code>b</code> is just the string <code>\"puts \\'Hello World\\'\"</code>. In this case, <code>\"puts\"</code> has no special meaning because it is just a string. So in this first case, <code>r</code> becomes:</p>\n\n<pre><code>\"Testing .... #{\"puts \\'Hello World\\'\"}\"\n</code></pre>\n\n<p>which then becomes:</p>\n\n<pre><code>\"Testing .... puts \\'Hello World\\'\"\n</code></pre>\n\n<p>In the second example you are including the final value from executing <code>puts 'Hello World'</code> within the string <code>r</code>. Since <code>puts</code> returns <code>nil</code>, <code>r</code> becomes </p>\n\n<pre><code>\"Testing .... #{nil}\"\n</code></pre>\n\n<p>which then becomes:</p>\n\n<pre><code>\"Testing .... \"\n</code></pre>\n"}], "owner": {"reputation": 746, "user_id": 1447975, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/7ecb2a888caf6ef8b5fbdce03d725f92?s=128&d=identicon&r=PG", "display_name": "CBaker", "link": "https://stackoverflow.com/users/1447975/cbaker"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 159, "favorite_count": 0, "accepted_answer_id": 52808268, "answer_count": 1, "score": 1, "last_activity_date": 1539587198, "creation_date": 1539561625, "question_id": 52808139, "link": "https://stackoverflow.com/questions/52808139/ruby-string-interpolation-operator", "title": "Ruby String Interpolation Operator", "body": "<p>I'm messing around with Ruby and I'm trying to understand how the #{} operation works.</p>\n\n<pre><code>b = \"puts \\'Hello World\\'\"\nr = \"Testing .... #{b}\"\n</code></pre>\n\n<p>When running this code, nothing its printed to the screen.</p>\n\n<p>However this does print to the screen</p>\n\n<pre><code>b = \"puts \\'Hello World\\'\"\nr = \"Testing .... #{puts 'Hello World'}\"\n</code></pre>\n\n<p>Why does the 2nd example print to the screen and the first doesn't.</p>\n\n<p>Thanks</p>\n"}, {"tags": ["ruby", "ruby-hash"], "comments": [{"owner": {"reputation": 4866, "user_id": 6603195, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-nZGPkfcc0EE/AAAAAAAAAAI/AAAAAAAAAoE/op-TBiFRNzg/photo.jpg?sz=128", "display_name": "Marcin Ko\u0142odziej", "link": "https://stackoverflow.com/users/6603195/marcin-ko%c5%82odziej"}, "edited": false, "score": 2, "creation_date": 1539547035, "post_id": 52806431, "comment_id": 92531382, "body": "As you&#39;ve already received your answer,  your method can also be rewritten to: <code>fruits.group_by { |k,v| v[:season] }.transform_values {|v| v.map(&amp;:first) }</code>"}], "answers": [{"comments": [{"owner": {"reputation": 43, "user_id": 5148094, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e2c908249e9af50db92998dcc296378?s=128&d=identicon&r=PG&f=1", "display_name": "Jaysan ", "link": "https://stackoverflow.com/users/5148094/jaysan"}, "edited": false, "score": 0, "creation_date": 1539549979, "post_id": 52806503, "comment_id": 92532037, "body": "Thanks max. The explanation and demonstration was really helpful for the beginners like me."}], "tags": [], "owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "is_accepted": false, "score": 1, "last_activity_date": 1539558866, "last_edit_date": 1539558866, "creation_date": 1539546545, "answer_id": 52806503, "question_id": 52806431, "link": "https://stackoverflow.com/questions/52806431/next-key-value-pair-overwrites-the-existing-pair-in-a-hash-while-trying-to-add-p/52806503#52806503", "title": "Next key/value pair overwrites the existing pair in a hash while trying to add pair with new key", "body": "<p>Your problem is that you reuse the same <code>fruits</code> array for all the values. Even though you clear it, is is still the same array. If instead of <code>fruits.clear</code> you use <code>fruits = []</code> then you won't have the issue.</p>\n\n<p>You can see the issue in the following as an example:</p>\n\n<pre><code>arr = ['val']\nhash = {\n  key1: arr,\n  key2: arr\n}\np hash # =&gt; { key1: ['val'], key2: ['val'] }\n\narr.clear\np hash # =&gt; { key1: [], key2: [] }\n</code></pre>\n\n<p>You could alternatively use <code>sorted[season] = fruits.clone</code> or <code>sorted[season] = [*fruits]</code> ... anything that uses a new array.</p>\n\n<p>You have to keep track of when you use 'mutation' methods (those that change objects in-place such as <code>clear</code>) - this is a common pitfall when working with hashes and arrays</p>\n"}, {"comments": [{"owner": {"reputation": 43, "user_id": 5148094, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e2c908249e9af50db92998dcc296378?s=128&d=identicon&r=PG&f=1", "display_name": "Jaysan ", "link": "https://stackoverflow.com/users/5148094/jaysan"}, "edited": false, "score": 0, "creation_date": 1539549906, "post_id": 52806573, "comment_id": 92532018, "body": "Thanks llya for the explanation!"}, {"owner": {"reputation": 167912, "user_id": 240443, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/495d675e3bc42ed1dee469e2ce701f1b?s=128&d=identicon&r=PG", "display_name": "Amadan", "link": "https://stackoverflow.com/users/240443/amadan"}, "edited": false, "score": 0, "creation_date": 1539578828, "post_id": 52806573, "comment_id": 92537713, "body": "See <a href=\"http://www.pythontutor.com/visualize.html#code=a%20%3D%20%7B%20num%3A%201%20%7D%0Ab%20%3D%20%5B%5D%0A3.times%20do%0A%20%20b.push%28a%29%0A%20%20a%5B%3Anum%5D%20%2B%3D%201%0Aend%0Aputs%20b&amp;cumulative=false&amp;heapPrimitives=nevernest&amp;mode=edit&amp;origin=opt-frontend.js&amp;py=ruby&amp;rawInputLstJSON=%5B%5D&amp;textReferences=false\" rel=\"nofollow noreferrer\">this</a> for a vivid demo (click Visualize Execution, then keep clicking Forward to progress)."}, {"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1539616884, "post_id": 52806573, "comment_id": 92557137, "body": "Technically speaking ruby is strictly pass by value.<a href=\"https://stackoverflow.com/questions/22827566/ruby-parameters-by-reference-or-by-value/22827949#22827949\" title=\"ruby parameters by reference or by value\">stackoverflow.com/questions/22827566/&hellip;</a>"}, {"owner": {"reputation": 2496, "user_id": 3046905, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/692eb06201cbed91c3c6a9cf11ed0511?s=128&d=identicon&r=PG", "display_name": "Ilya Konyukhov", "link": "https://stackoverflow.com/users/3046905/ilya-konyukhov"}, "edited": false, "score": 0, "creation_date": 1539617680, "post_id": 52806573, "comment_id": 92557545, "body": "<code>It&#39;s pass-by-value, but all the values are references</code>. So it&#39;s more a question of terminology that can be confusing."}], "tags": [], "owner": {"reputation": 2496, "user_id": 3046905, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/692eb06201cbed91c3c6a9cf11ed0511?s=128&d=identicon&r=PG", "display_name": "Ilya Konyukhov", "link": "https://stackoverflow.com/users/3046905/ilya-konyukhov"}, "is_accepted": true, "score": 1, "last_activity_date": 1539549165, "last_edit_date": 1539549165, "creation_date": 1539547109, "answer_id": 52806573, "question_id": 52806431, "link": "https://stackoverflow.com/questions/52806431/next-key-value-pair-overwrites-the-existing-pair-in-a-hash-while-trying-to-add-p/52806573#52806573", "title": "Next key/value pair overwrites the existing pair in a hash while trying to add pair with new key", "body": "<p>In Ruby mutable objects are passed by reference. It means that when you iterate over <code>seasons</code> in <code>each</code> block this line:</p>\n\n<pre><code>sorted[season] = fruits\n</code></pre>\n\n<p>saves to <code>sorted[season]</code> a reference to <code>fruits</code>, for every season. After <code>each</code> loop finishes every season has a reference to the same <code>fruits</code> array, which contain items calculated on the last step of the iterator. In your case, it's <code>[\"grape\"]</code>.</p>\n"}], "owner": {"reputation": 43, "user_id": 5148094, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e2c908249e9af50db92998dcc296378?s=128&d=identicon&r=PG&f=1", "display_name": "Jaysan ", "link": "https://stackoverflow.com/users/5148094/jaysan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 73, "favorite_count": 0, "accepted_answer_id": 52806573, "answer_count": 2, "score": 0, "last_activity_date": 1539588982, "creation_date": 1539546036, "last_edit_date": 1539588982, "question_id": 52806431, "link": "https://stackoverflow.com/questions/52806431/next-key-value-pair-overwrites-the-existing-pair-in-a-hash-while-trying-to-add-p", "title": "Next key/value pair overwrites the existing pair in a hash while trying to add pair with new key", "body": "<p>I have:</p>\n\n<pre><code>fruits = {\n  \"orange\" =&gt; {:season =&gt; \"winter\"},\n  \"apple\" =&gt; {:season =&gt; \"winter\"},\n  \"banana\" =&gt; {:season =&gt; \"summer\"},\n  \"grape\" =&gt; {:season =&gt; \"spring\"},\n  \"peach\" =&gt; {:season =&gt; \"winter\"},\n  \"pineapple\" =&gt; {:season =&gt; \"summer\"}\n}\n</code></pre>\n\n<p>I want to get:</p>\n\n<pre><code>{\n  \"winter\"=&gt;[\"orange\", \"apple\", \"peach\"],\n  \"summer\"=&gt;[\"banana\", \"pineapple\"],\n  \"spring\"=&gt;[\"grape\"]\n}\n</code></pre>\n\n<p>I did:</p>\n\n<pre><code>def sort_fruits(fruits_hash)\n  fruits=[]\n  sorted = {}\n  seasons = fruits_hash.map {|k, v|v[:season]}\n  seasons.uniq.each do |season|\n    fruits.clear\n    fruits_hash.each do |fruit, season_name|\n      if season == season_name[:season]\n        fruits &lt;&lt; fruit\n      end\n    end\n    p sorted[season] = fruits ## season changes to new season, so this should have created new key/value pair for new season.\n  end\n  sorted\nend\n</code></pre>\n\n<p>I get:</p>\n\n<pre><code>{\n  \"winter\"=&gt;[\"grape\"],\n  \"summer\"=&gt;[\"grape\"],\n  \"spring\"=&gt;[\"grape\"]\n}\n</code></pre>\n\n<p>I couldn't figure out why adding new key/value pair with unique key would overwrite existing pair in a hash. Any help with explanation would be greatly appreciated.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4"], "answers": [{"tags": [], "owner": {"reputation": 2205, "user_id": 591172, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/475c453e241134dd9e51fc6b1ada721e?s=128&d=identicon&r=PG", "display_name": "Sean", "link": "https://stackoverflow.com/users/591172/sean"}, "is_accepted": true, "score": 2, "last_activity_date": 1539547684, "creation_date": 1539547684, "answer_id": 52806651, "question_id": 52806409, "link": "https://stackoverflow.com/questions/52806409/fire-javascript-ajax-partial-after-each-load-using-rails/52806651#52806651", "title": "Fire javascript ajax partial after each load using rails", "body": "<p>After trying a few things, simply replacing the <code>replaceWith</code> with <code>html</code> in the <code>user_profile/show.js.erb</code> will cause the ajax to fire each time.</p>\n\n<p>Old:</p>\n\n<pre><code>$(\"#user_profile\").replaceWith(\"&lt;%= j render \"user_profile\" %&gt;\");\n</code></pre>\n\n<p>New:</p>\n\n<pre><code>$(\"#user_profile\").html(\"&lt;%= j render \"user_profile\" %&gt;\");\n</code></pre>\n\n<p>The reason for this is because the <code>replaceWith</code> is replacing the element in the parent, and thus not firing again because the element has already been replaced the first time.</p>\n\n<p>Hope that helps anyone in the future!</p>\n"}], "owner": {"reputation": 2205, "user_id": 591172, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/475c453e241134dd9e51fc6b1ada721e?s=128&d=identicon&r=PG", "display_name": "Sean", "link": "https://stackoverflow.com/users/591172/sean"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 22, "favorite_count": 0, "accepted_answer_id": 52806651, "answer_count": 1, "score": 2, "last_activity_date": 1539547684, "creation_date": 1539545894, "question_id": 52806409, "link": "https://stackoverflow.com/questions/52806409/fire-javascript-ajax-partial-after-each-load-using-rails", "title": "Fire javascript ajax partial after each load using rails", "body": "<p>I have a menu item that fires ajax that returns javascript partial that is a bootstrap modal.  The problem I am having is when a user clicks the menu item the first time, the modal opens as expected. The user closes the modal and tries to open it again, it doesn't open (although the ajax fires again from backend).</p>\n\n<p>Consider the following code (using bootstrap 4):</p>\n\n<p>Menu.html.erb:</p>\n\n<pre><code>&lt;div class=\"dropdown-menu dropdown-menu-right\" aria-labelledby=\"navbarDropdownMenuLink\"&gt;\n    &lt;%= link_to user_profile_path(current_user.user_profile.id), remote: true, class: \"dropdown-item\" do %&gt;\n        &lt;%= fa_icon \"id-card\", text: \"Profile Settings\" %&gt;\n    &lt;% end %&gt;\n&lt;/div&gt;\n...\n&lt;div id=\"user_profile\"&gt;&lt;/div&gt;\n</code></pre>\n\n<p>user_profile/show.js.erb (ajax js partial):</p>\n\n<pre><code>$(\"#user_profile\").replaceWith(\"&lt;%= j render \"user_profile\" %&gt;\");\n</code></pre>\n\n<p>user_profile/_user_profile.html.erb (bootstrap modal):</p>\n\n<pre><code>&lt;script&gt;\n    $('#user_profile_modal').modal('show');\n&lt;/script&gt;\n\n&lt;%= form_with model: @user_profile do |f| %&gt;\n    &lt;div class=\"modal fade\" id=\"user_profile_modal\" tabindex=\"-1\" role=\"dialog\"&gt;\n        &lt;div class=\"modal-dialog modal-lg\" role=\"document\"&gt;\n        ...\n        &lt;/div&gt;\n    &lt;/div&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>Is there a way to fire the the <code>modal('show');</code> each time the modal is fired from the backend?  By the way, this is just one of 3 modals that get loaded this way on the page.</p>\n\n<p>Thanks again!</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 230, "user_id": 1486234, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/945e89ebc5ab747e075d67c0058ee26f?s=128&d=identicon&r=PG", "display_name": "giglemad", "link": "https://stackoverflow.com/users/1486234/giglemad"}, "edited": false, "score": 1, "creation_date": 1539547977, "post_id": 52806358, "comment_id": 92531596, "body": "I don&#39;t see any instruction that would read from the original files in your code, is it on purpose ?"}], "answers": [{"tags": [], "owner": {"reputation": 8733, "user_id": 3625433, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/N7qK6.png?s=128&g=1", "display_name": "lacostenycoder", "link": "https://stackoverflow.com/users/3625433/lacostenycoder"}, "is_accepted": true, "score": 0, "last_activity_date": 1539550490, "creation_date": 1539550490, "answer_id": 52807014, "question_id": 52806358, "link": "https://stackoverflow.com/questions/52806358/how-would-i-rewrite-sc-files-into-a-different-format/52807014#52807014", "title": "How would I rewrite .sc files into a different format?", "body": "<pre><code># test.sc\n# assume this is your test data\nthis has foo\nthis does not\nthis also has foo\nthis has some other stuff\nthis is the last line which has foo\nblah\nblah blah \ud83d\udca9\n\n\n# filejunk.rb\n# you need to write a method that handles the data inside the file you want to\n# modify, change, replace etc. but for example\n\ndef replace_file_data(filename)\n  lines = File.readlines\n  lines.select{|l| l.include?'foo'} #assumes you only want lines with 'foo' in them\nend\n\nDir.glob('C:\\SpaceEngine\\export\\*.sc').each_with_index  do |filename, i|\n  i += 1\n  name = File.basename(filename, \".*\")\n  current = File.new(\"#{name}.txt\", \"w\") {|f| f.write  replace_file_data(filename) }\n  current.close\nend\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 10469674, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b5c05d38b35b3e42193808100515d1f1?s=128&d=identicon&r=PG&f=1", "display_name": "Thechemistcoder", "link": "https://stackoverflow.com/users/10469674/thechemistcoder"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 57, "favorite_count": 0, "accepted_answer_id": 52807014, "answer_count": 1, "score": 0, "last_activity_date": 1539589247, "creation_date": 1539545537, "last_edit_date": 1539589247, "question_id": 52806358, "link": "https://stackoverflow.com/questions/52806358/how-would-i-rewrite-sc-files-into-a-different-format", "title": "How would I rewrite .sc files into a different format?", "body": "<p>I want to export sc files from SpaceEngine, then for each file, create a new file with the same name but with the extension <code>.txt</code>.</p>\n\n<p>Here is my code:</p>\n\n<pre><code>require 'fileutils'\nrequire 'IO/console'\n\nputs \"Make sure your export folder is clear of everything but the files you want to turn into Object text files.\"\nputs \"Starting Process\"\ni = 0\nDir.foreach('C:\\SpaceEngine\\export') do |item|\n  next if item == '.' or item == '..'\n  i = i + 1\n  name = File.basename(item, \".*\")\n  current = File.new(\"#{name}.txt\", \"w\");\n  current.close\nend\nsleep 2\n</code></pre>\n\n<p>I have the latter part already, but I can't get it to read the original files one by one, and then only put certain things from the original into the new file.</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 25637, "user_id": 6243352, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/715f60f9edc65642a6805752cfeebb27?s=128&d=identicon&r=PG&f=1", "display_name": "ggorlen", "link": "https://stackoverflow.com/users/6243352/ggorlen"}, "edited": false, "score": 1, "creation_date": 1539543135, "post_id": 52805976, "comment_id": 92530365, "body": "Welcome to SO! I&#39;m unable to reproduce your problem. Are you running with <code>ruby your_filename.rb</code>?"}, {"owner": {"reputation": 23, "user_id": 9604971, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a4ac4d5682cc89636f96b97a7d2e2f7?s=128&d=identicon&r=PG&f=1", "display_name": "moldymold", "link": "https://stackoverflow.com/users/9604971/moldymold"}, "reply_to_user": {"reputation": 25637, "user_id": 6243352, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/715f60f9edc65642a6805752cfeebb27?s=128&d=identicon&r=PG&f=1", "display_name": "ggorlen", "link": "https://stackoverflow.com/users/6243352/ggorlen"}, "edited": false, "score": 0, "creation_date": 1539543266, "post_id": 52805976, "comment_id": 92530394, "body": "Hi @ggorlen thanks for taking a look at it. I am typing it that way into the console, yes."}], "answers": [{"comments": [{"owner": {"reputation": 23, "user_id": 9604971, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a4ac4d5682cc89636f96b97a7d2e2f7?s=128&d=identicon&r=PG&f=1", "display_name": "moldymold", "link": "https://stackoverflow.com/users/9604971/moldymold"}, "edited": false, "score": 0, "creation_date": 1539543649, "post_id": 52806044, "comment_id": 92530504, "body": "This did it, thank you @mb21. Just a note, it required a $ before stdout in order to compile correctly."}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "reply_to_user": {"reputation": 23, "user_id": 9604971, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a4ac4d5682cc89636f96b97a7d2e2f7?s=128&d=identicon&r=PG&f=1", "display_name": "moldymold", "link": "https://stackoverflow.com/users/9604971/moldymold"}, "edited": false, "score": 1, "creation_date": 1539544378, "post_id": 52806044, "comment_id": 92530702, "body": "@moldymold ruby is not compiled by any mean and no, it <b>does not</b> require <code>$</code> in front of <code>STDOUT</code>. Make sure you typed it in uppercase, ruby is case sensitive."}, {"owner": {"reputation": 23, "user_id": 9604971, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a4ac4d5682cc89636f96b97a7d2e2f7?s=128&d=identicon&r=PG&f=1", "display_name": "moldymold", "link": "https://stackoverflow.com/users/9604971/moldymold"}, "reply_to_user": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 1, "creation_date": 1539544699, "post_id": 52806044, "comment_id": 92530785, "body": "@AlekseiMatiushkin I apologize, I am new to Ruby so I did not realize it is not compiled. At the time of my previous comment, the <code>STDOUT</code> was <code>stdout</code>, in which case it would need to be <code>$stdout</code>. I appreciate you taking the time to clarify!"}, {"owner": {"reputation": 5449, "user_id": 681520, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/701baebf68d1d7faa9f9def6a24fe356?s=128&d=identicon&r=PG", "display_name": "Kimmo Lehto", "link": "https://stackoverflow.com/users/681520/kimmo-lehto"}, "edited": false, "score": 1, "creation_date": 1539594322, "post_id": 52806044, "comment_id": 92544174, "body": "Usually it&#39;s a good practice to use <code>$stdout, $stdin, $stderr</code> instead of <code>STDOUT, STDIN,STDERR</code>. The upper case versions are constants and always point to the real streams, users or tests may want to override those to for example capture and validate command output, which you can do by using the <code>$</code> versions."}], "tags": [], "owner": {"reputation": 27561, "user_id": 214446, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/5deb6b87326686b1f2e9fdb37ceac210?s=128&d=identicon&r=PG", "display_name": "mb21", "link": "https://stackoverflow.com/users/214446/mb21"}, "is_accepted": true, "score": 0, "last_activity_date": 1539601716, "last_edit_date": 1539601716, "creation_date": 1539543355, "answer_id": 52806044, "question_id": 52805976, "link": "https://stackoverflow.com/questions/52805976/why-does-my-program-take-user-input-before-prompting-the-user/52806044#52806044", "title": "Why does my program take user input before prompting the user?", "body": "<p>Ruby might be buffering output. To force it, use <code>flush</code>:</p>\n\n<pre><code>$stdout.puts \"Hello, please type in your name: \"\n$stdout.flush\nname = gets.chomp\nputs \"Hello #{name}, it is a pleasure to meet you!\"\n</code></pre>\n\n<p>But I think in newer Ruby versions, this shouldn't be necessary.</p>\n"}], "owner": {"reputation": 23, "user_id": 9604971, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a4ac4d5682cc89636f96b97a7d2e2f7?s=128&d=identicon&r=PG&f=1", "display_name": "moldymold", "link": "https://stackoverflow.com/users/9604971/moldymold"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 73, "favorite_count": 0, "accepted_answer_id": 52806044, "answer_count": 1, "score": 2, "last_activity_date": 1539674544, "creation_date": 1539542921, "last_edit_date": 1539674544, "question_id": 52805976, "link": "https://stackoverflow.com/questions/52805976/why-does-my-program-take-user-input-before-prompting-the-user", "title": "Why does my program take user input before prompting the user?", "body": "<p>I am trying to make a console program that asks the user for their name, and greets them. I am coding in Notepad++, and running it in the git bash console. My code is:</p>\n\n<pre><code>puts \"Hello, please type in your name: \"\nname = gets.chomp\nputs \"Hello #{name}, it is a pleasure to meet you!\"\n</code></pre>\n\n<p>When it runs, it waits for user input, and once that is entered, it prints:</p>\n\n<pre><code>Hello, please type in your name:\nHello &lt;name_the_user_entered&gt;, it is a pleasure to meet you!\n</code></pre>\n\n<p>Even though the user prompt is first in the code, it accepts user input before any test is printed. Am I missing something?</p>\n"}, {"tags": ["ruby", "ruby-hash"], "comments": [{"owner": {"reputation": 7878, "user_id": 630780, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/fskbD.png?s=128&g=1", "display_name": "Carl Markham", "link": "https://stackoverflow.com/users/630780/carl-markham"}, "edited": false, "score": 0, "creation_date": 1539537674, "post_id": 52805114, "comment_id": 92528797, "body": "Short answer, yes. The enumeration order follows several other languages. It&#39;s the order in which they were inserted. However, that order could be changed by yourself after initialisation, in which case, it would follow the new order."}, {"owner": {"reputation": 4446, "user_id": 576448, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/hVxvC.jpg?s=128&g=1", "display_name": "peterk", "link": "https://stackoverflow.com/users/576448/peterk"}, "reply_to_user": {"reputation": 7878, "user_id": 630780, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/fskbD.png?s=128&g=1", "display_name": "Carl Markham", "link": "https://stackoverflow.com/users/630780/carl-markham"}, "edited": false, "score": 0, "creation_date": 1539537840, "post_id": 52805114, "comment_id": 92528846, "body": "@CarlMarkham This should be an answer I would select it :) I specifically want to use this in getting hash arguments inside a method so the hash in this case will not be transformed between the caller and the method."}, {"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1539547208, "post_id": 52805114, "comment_id": 92531418, "body": "whether or not it&#39;s true, i have never encountered a use case for requiring ordered iteration in a hash ... why not use a normal ordered structure (an array)?"}, {"owner": {"reputation": 4446, "user_id": 576448, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/hVxvC.jpg?s=128&g=1", "display_name": "peterk", "link": "https://stackoverflow.com/users/576448/peterk"}, "reply_to_user": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1539608689, "post_id": 52805114, "comment_id": 92552162, "body": "@maxpleaner because I am looking at the hash sent into a method invocation representing &quot;named arguments&quot; and Hash#keys returns the array in the enumerated order."}, {"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1539619139, "post_id": 52805114, "comment_id": 92558280, "body": "I don&#39;t see why you would need to see the &#39;named arguments&#39; in any particular order, because you can just identify them by  name ... but i won&#39;t press the point"}, {"owner": {"reputation": 4446, "user_id": 576448, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/hVxvC.jpg?s=128&g=1", "display_name": "peterk", "link": "https://stackoverflow.com/users/576448/peterk"}, "reply_to_user": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1539734339, "post_id": 52805114, "comment_id": 92606977, "body": "@maxpleaner in ruby rake a &quot;task&quot; initialization takes ordered named arguments with unspecified keys (ie name of the task etc).  If you add named arguments for any additional purpose the Rake task arguments need to be removed and separated from the added argumenmts. I have implemented what I need."}], "answers": [{"comments": [{"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1539805290, "post_id": 52817553, "comment_id": 92639278, "body": "Do you have any sources for your claims? The OP specifically asked this question because the <i>official documentation</i> is ambiguous, and does not clearly specify that iteration over keys preserves insertion order, only iteration over values. I also find your claim that it &quot;follows most other languages&quot; dubious, not the least because of the fact that until recently, Ruby itself made <i>no guarantees at all</i> about iteration order of hashes; this was only introduced in Ruby 1.9 in 2007, and for example, in Python dicts have only guaranteed an iteration order for less than 10 months."}, {"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1539805327, "post_id": 52817553, "comment_id": 92639291, "body": "In Java and .NET, the standard Dictionary interface makes no guarantees about iteration order, and the standard implementations of those interfaces have no defined order; you need to use specialized implementations to get a defined iteration order. In fact, recording the insertion order for later iteration is extra work and requires extra memory, making insertion, deletion, and iteration slower, so I would naturally expect that most languages would <i>not</i> make any guarantees about iteration order."}, {"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1539805446, "post_id": 52817553, "comment_id": 92639339, "body": "Also, Carl Markham already posted <a href=\"https://stackoverflow.com/a/52806782/2988\">this exact same answer</a>, and then deleted it again, and I assume it is because he felt he could not sufficiently back it up. Copy&amp;pasting his answer <i>again</i> does not make it more true."}], "tags": [], "owner": {"reputation": 4446, "user_id": 576448, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/hVxvC.jpg?s=128&g=1", "display_name": "peterk", "link": "https://stackoverflow.com/users/576448/peterk"}, "is_accepted": false, "score": 0, "last_activity_date": 1539827044, "last_edit_date": 1539827044, "creation_date": 1539608996, "answer_id": 52817553, "question_id": 52805114, "link": "https://stackoverflow.com/questions/52805114/is-there-a-specified-enumeration-order-for-hash-keys-as-with-hash-values/52817553#52817553", "title": "Is there a specified enumeration order for hash keys as with hash values?", "body": "<p>Short answer, \"unknown\". </p>\n\n<p>This appears to be true as of Ruby 1.9+\nBut so far I have not seen any explicit statement of either yes or no.</p>\n\n<p>It would be nice if the docs would specify it.  In the source code to the linux implementation it appears a list of key-value pairs is what is being traversed, and key, value, and key:value iterators traverse this structure and they would in this case traverse in the same order but there is no statement whether this is part of the api contract.</p>\n\n<p>PK</p>\n"}], "owner": {"reputation": 4446, "user_id": 576448, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/hVxvC.jpg?s=128&g=1", "display_name": "peterk", "link": "https://stackoverflow.com/users/576448/peterk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 93, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1539827044, "creation_date": 1539537134, "last_edit_date": 1539589700, "question_id": 52805114, "link": "https://stackoverflow.com/questions/52805114/is-there-a-specified-enumeration-order-for-hash-keys-as-with-hash-values", "title": "Is there a specified enumeration order for hash keys as with hash values?", "body": "<p>The Ruby documentation makes a statement about <code>Hash#values</code>:</p>\n\n<blockquote>\n  <p>Hashes enumerate their values in the order that the corresponding keys were inserted.</p>\n</blockquote>\n\n<p>This also appears to be true for <code>Hash#keys</code>, but that is not documented.</p>\n\n<p>Is this likely to remain true? And is it true for all key sets?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "fastjsonapi"], "comments": [{"owner": {"reputation": 900, "user_id": 2299139, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0ZT5o.jpg?s=128&g=1", "display_name": "Alex Baidan", "link": "https://stackoverflow.com/users/2299139/alex-baidan"}, "edited": false, "score": 0, "creation_date": 1539538947, "post_id": 52804847, "comment_id": 92529156, "body": "Please update question with &#39;School&#39; model associations."}, {"owner": {"reputation": 235600, "user_id": 39677, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/77aa7bc1ace6e4b0b49a2102e4fa4059?s=128&d=identicon&r=PG", "display_name": "Blankman", "link": "https://stackoverflow.com/users/39677/blankman"}, "reply_to_user": {"reputation": 900, "user_id": 2299139, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0ZT5o.jpg?s=128&g=1", "display_name": "Alex Baidan", "link": "https://stackoverflow.com/users/2299139/alex-baidan"}, "edited": false, "score": 0, "creation_date": 1539539117, "post_id": 52804847, "comment_id": 92529206, "body": "@OleksiiBaidan I updated with the model details."}, {"owner": {"reputation": 900, "user_id": 2299139, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0ZT5o.jpg?s=128&g=1", "display_name": "Alex Baidan", "link": "https://stackoverflow.com/users/2299139/alex-baidan"}, "edited": false, "score": 2, "creation_date": 1539539215, "post_id": 52804847, "comment_id": 92529231, "body": "In fact you can add association to your serializer.  [docs] (<a href=\"https://github.com/Netflix/fast_jsonapi#serializer-definition\" rel=\"nofollow noreferrer\">github.com/Netflix/fast_jsonapi#serializer-definition</a>). When you will set has_many: classrooms in your School serializer, rails will try to find ClassroomSerializer class defined and will use it to render. So create classtoom_serializer.rb in your serializers folder."}], "answers": [{"comments": [{"owner": {"reputation": 235600, "user_id": 39677, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/77aa7bc1ace6e4b0b49a2102e4fa4059?s=128&d=identicon&r=PG", "display_name": "Blankman", "link": "https://stackoverflow.com/users/39677/blankman"}, "edited": false, "score": 0, "creation_date": 1539539714, "post_id": 52805467, "comment_id": 92529407, "body": "Is there a limit to how deep it can go?  What if it does like: School -&gt; Classroom -&gt; Students -&gt; ...."}, {"owner": {"reputation": 900, "user_id": 2299139, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0ZT5o.jpg?s=128&g=1", "display_name": "Alex Baidan", "link": "https://stackoverflow.com/users/2299139/alex-baidan"}, "reply_to_user": {"reputation": 235600, "user_id": 39677, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/77aa7bc1ace6e4b0b49a2102e4fa4059?s=128&d=identicon&r=PG", "display_name": "Blankman", "link": "https://stackoverflow.com/users/39677/blankman"}, "edited": false, "score": 0, "creation_date": 1539539826, "post_id": 52805467, "comment_id": 92529433, "body": "I think no limit. Only common sense. You must understand: deeper you go - slower you get."}, {"owner": {"reputation": 235600, "user_id": 39677, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/77aa7bc1ace6e4b0b49a2102e4fa4059?s=128&d=identicon&r=PG", "display_name": "Blankman", "link": "https://stackoverflow.com/users/39677/blankman"}, "edited": false, "score": 0, "creation_date": 1539539832, "post_id": 52805467, "comment_id": 92529434, "body": "it looks like it only displays the id and type for the relationships, not all the props."}, {"owner": {"reputation": 900, "user_id": 2299139, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0ZT5o.jpg?s=128&g=1", "display_name": "Alex Baidan", "link": "https://stackoverflow.com/users/2299139/alex-baidan"}, "reply_to_user": {"reputation": 235600, "user_id": 39677, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/77aa7bc1ace6e4b0b49a2102e4fa4059?s=128&d=identicon&r=PG", "display_name": "Blankman", "link": "https://stackoverflow.com/users/39677/blankman"}, "edited": false, "score": 0, "creation_date": 1539539883, "post_id": 52805467, "comment_id": 92529448, "body": "Define attrributes in serializers (you must create it for all models you are using)"}, {"owner": {"reputation": 235600, "user_id": 39677, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/77aa7bc1ace6e4b0b49a2102e4fa4059?s=128&d=identicon&r=PG", "display_name": "Blankman", "link": "https://stackoverflow.com/users/39677/blankman"}, "edited": false, "score": 0, "creation_date": 1539539938, "post_id": 52805467, "comment_id": 92529464, "body": "I did that, I created the serializers for school, classroom and students."}, {"owner": {"reputation": 900, "user_id": 2299139, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0ZT5o.jpg?s=128&g=1", "display_name": "Alex Baidan", "link": "https://stackoverflow.com/users/2299139/alex-baidan"}, "reply_to_user": {"reputation": 235600, "user_id": 39677, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/77aa7bc1ace6e4b0b49a2102e4fa4059?s=128&d=identicon&r=PG", "display_name": "Blankman", "link": "https://stackoverflow.com/users/39677/blankman"}, "edited": false, "score": 0, "creation_date": 1539539965, "post_id": 52805467, "comment_id": 92529471, "body": "Did you restart the server?"}, {"owner": {"reputation": 235600, "user_id": 39677, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/77aa7bc1ace6e4b0b49a2102e4fa4059?s=128&d=identicon&r=PG", "display_name": "Blankman", "link": "https://stackoverflow.com/users/39677/blankman"}, "edited": false, "score": 0, "creation_date": 1539540063, "post_id": 52805467, "comment_id": 92529492, "body": "Yes I restarted the server, no change. hmmm."}, {"owner": {"reputation": 235600, "user_id": 39677, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/77aa7bc1ace6e4b0b49a2102e4fa4059?s=128&d=identicon&r=PG", "display_name": "Blankman", "link": "https://stackoverflow.com/users/39677/blankman"}, "edited": false, "score": 0, "creation_date": 1539550405, "post_id": 52805467, "comment_id": 92532122, "body": "That still didn&#39;t&#39; work for me, this is frustrating :) . thanks for your help though."}], "tags": [], "owner": {"reputation": 900, "user_id": 2299139, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0ZT5o.jpg?s=128&g=1", "display_name": "Alex Baidan", "link": "https://stackoverflow.com/users/2299139/alex-baidan"}, "is_accepted": false, "score": 2, "last_activity_date": 1539540273, "last_edit_date": 1539540273, "creation_date": 1539539583, "answer_id": 52805467, "question_id": 52804847, "link": "https://stackoverflow.com/questions/52804847/how-to-include-child-associations-when-serializing-to-json/52805467#52805467", "title": "How to include child associations when serializing to json?", "body": "<pre><code>class SchoolSerializer\n  include FastJsonapi::ObjectSerializer\n  attributes :name, :description\n\n  belongs_to :classroom\nend\n\n# /serializers/classroom_serializer.rb\nclass ClassroomSerializer\n  include FastJsonapi::ObjectSerializer\n  attributes :.... #attributes you want to show\nend\n</code></pre>\n\n<p>Also you can add additional association to your School model, to access Students.\nlike this</p>\n\n<pre><code>has_many :students, through: :classroom\n</code></pre>\n\n<p>and then include it in School serializer directly. </p>\n\n<p><strong>Update</strong>: also please note that you can directly point to serializer class you need. (if you want to use class with different name from model as example). </p>\n\n<pre><code>class SchoolSerializer\n  include FastJsonapi::ObjectSerializer\n  attributes :name, :description\n\n  belongs_to :classroom, serializer: ClassroomSerializer\nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 90, "user_id": 5472341, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bf5dbe2071e88de9580a9e7c97b46880?s=128&d=identicon&r=PG&f=1", "display_name": "James.Oliver", "link": "https://stackoverflow.com/users/5472341/james-oliver"}, "is_accepted": false, "score": 0, "last_activity_date": 1576034485, "creation_date": 1576034485, "answer_id": 59278454, "question_id": 52804847, "link": "https://stackoverflow.com/questions/52804847/how-to-include-child-associations-when-serializing-to-json/59278454#59278454", "title": "How to include child associations when serializing to json?", "body": "<p><code>render json: SchoolSerializer.new(school, include: \"classrooms.students\")</code> </p>\n\n<p>The difference being the use of \"include\" when rendering the serializer. This tells the Serializer to add a key \"included\" to the returned JSON object.</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>class SchoolSerializer\n  include FastJsonapi::ObjectSerializer\n\n  belongs_to :classroom\n  has_many :students, through: :classroom\n\n  attributes :school_name, :description\nend\n</code></pre>\n\n<pre class=\"lang-rb prettyprint-override\"><code>StudentSerializer\n  include FastJsonapi::ObjectSerializer\n\n  belongs_to :classroom\n  belongs_to :school\n\n  attributes :student_name\nend\n</code></pre>\n\n<p><code>render json: SchoolSerializer.new(school).serialized_json</code></p>\n\n<p>will return a series of students with only the top level identifiers in the form</p>\n\n<pre><code>data: {\n  id: \"123\"\n  type: \"school\"\n  attributes: {\n    school_name: \"Best school for Girls\",\n    description: \"Great school!\"\n    ...\n\n  },\n  relationships: {\n    students: [ \n      {\n        id: \"1234\",\n        type: \"student\"\n      },\n      { \n        id: \"5678\",\n        type: \"student\"\n      }\n    ]\n  }\n}\n</code></pre>\n\n<p>whereas the <code>include: \"classroom.students\"</code> will return the <em>full serialized</em> Student Records in the form:</p>\n\n<pre><code>data: {\n  id: \"123\"\n  type: \"school\"\n  attributes: {\n    school_name: \"Best school for Girls\"\n    ...\n\n  },\n  relationships: {\n    classroom: {\n      data: {\n        id: \"456\",\n        type: \"classroom\"\n      }\n    },\n    students: [ \n      {\n        data: {\n          id: \"1234\",\n          type: \"student\"\n        }\n      },\n      { \n        data: {\n          id: \"5678\",\n          type: \"student\"\n        }\n      }\n    ]\n  },\n  included: {\n    students: {\n      data { \n        id: \"1234\",\n        type: \"student\",\n        attributes: {\n          student_name: \"Ralph Wiggum\",\n          ...\n        },\n        relationships: {\n          school: {\n            id: \"123\",\n            type: \"school\"\n          },\n          classroom: {\n            id: \"456\",\n            type: \"classroom\"\n          }\n        }\n      }, \n      data: {\n        id: \"5678\",\n        type: \"student\",\n        attributes: {\n          student_name: \"Lisa Simpson\",\n          ...\n        },\n        relationships: {\n          school: {\n            id: \"123\",\n            type: \"school\"\n          },\n          classroom: {\n            id: \"456\",\n            type: \"classroom\"\n          }\n        }\n      }\n    },\n    classroom: {\n      // Effectively\n      // ClassroomSerializer.new(school.classroom).serialized_json\n    },\n  }\n}\n\n</code></pre>\n"}], "owner": {"reputation": 235600, "user_id": 39677, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/77aa7bc1ace6e4b0b49a2102e4fa4059?s=128&d=identicon&r=PG", "display_name": "Blankman", "link": "https://stackoverflow.com/users/39677/blankman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1458, "favorite_count": 1, "answer_count": 2, "score": 0, "last_activity_date": 1576034485, "creation_date": 1539535091, "last_edit_date": 1539539104, "question_id": 52804847, "link": "https://stackoverflow.com/questions/52804847/how-to-include-child-associations-when-serializing-to-json", "title": "How to include child associations when serializing to json?", "body": "<p>Before using fast_jsonapi gem I was doing this:</p>\n\n<pre><code>render json: school.to_json(include: [classroom: [:students]])\n</code></pre>\n\n<p>My SchoolSerializer looks like:</p>\n\n<pre><code>class SchoolSerializer\n  include FastJsonapi::ObjectSerializer\n  attributes :name, :description, :classroom\nend\n</code></pre>\n\n<p>How would I get the students included in the JSON result?</p>\n\n<p>Also, the classroom association is including but it is displaying all the properties, is there a way to map the classroom property to a ClassroomSerializer ?</p>\n\n<pre><code>class School &lt; ApplicationRecord\n  belongs_to :classroom\nend\n\nclass Classroom &lt; ApplicationRecord\n  has_many :students\nend\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 3692, "user_id": 2102591, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/18ebe6ebe65a7aff45e6d09e96af9701?s=128&d=identicon&r=PG", "display_name": "Andrew Schwartz", "link": "https://stackoverflow.com/users/2102591/andrew-schwartz"}, "edited": false, "score": 0, "creation_date": 1539530586, "post_id": 52804148, "comment_id": 92526694, "body": "Please post your controller code as well, at least the action that renders this form and the action that this form submits to. (E.g. if it doesn&#39;t actually try save the object you won&#39;t get validation errors.)"}, {"owner": {"reputation": 51, "user_id": 10192738, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EBCq0.jpg?s=128&g=1", "display_name": "Kaido", "link": "https://stackoverflow.com/users/10192738/kaido"}, "reply_to_user": {"reputation": 3692, "user_id": 2102591, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/18ebe6ebe65a7aff45e6d09e96af9701?s=128&d=identicon&r=PG", "display_name": "Andrew Schwartz", "link": "https://stackoverflow.com/users/2102591/andrew-schwartz"}, "edited": false, "score": 0, "creation_date": 1539531599, "post_id": 52804148, "comment_id": 92526982, "body": "I put the controller in my post"}], "answers": [{"tags": [], "owner": {"reputation": 67463, "user_id": 203130, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/1RE8c.jpg?s=128&g=1", "display_name": "coreyward", "link": "https://stackoverflow.com/users/203130/coreyward"}, "is_accepted": true, "score": 3, "last_activity_date": 1539531920, "creation_date": 1539531920, "answer_id": 52804379, "question_id": 52804148, "link": "https://stackoverflow.com/questions/52804148/simple-form-error-notification-inside-the-form-on-validation/52804379#52804379", "title": "Simple form error notification inside the form on validation", "body": "<p>Since you're redirecting when there's a validation error on <code>create</code>, <code>@product</code> is always going to be a new instance of <code>Product</code> that hasn't even had validations run. </p>\n\n<p>Instead you want to render the <code>new</code> action view to show the form again, but without changing the page. This way <code>@product</code> gets passed to the view for the errors to be shown.</p>\n\n<pre><code>def create\n  @product = current_user.products.new(product_params)\n  if @product.save\n    respond_to do |format|\n      format.html { redirect_to products_path, notice: 'The product was successfully created.' }\n    end\n  else\n    # changed the following line\n    render :new\n  end\nend\n</code></pre>\n"}], "owner": {"reputation": 51, "user_id": 10192738, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EBCq0.jpg?s=128&g=1", "display_name": "Kaido", "link": "https://stackoverflow.com/users/10192738/kaido"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 257, "favorite_count": 0, "accepted_answer_id": 52804379, "answer_count": 1, "score": 0, "last_activity_date": 1539531920, "creation_date": 1539530290, "last_edit_date": 1539531570, "question_id": 52804148, "link": "https://stackoverflow.com/questions/52804148/simple-form-error-notification-inside-the-form-on-validation", "title": "Simple form error notification inside the form on validation", "body": "<p>I have this form to create and update my product object, but i'm having problems to get the errors messages:</p>\n\n<pre><code>&lt;%= simple_form_for @product do |f| %&gt;\n  &lt;% if @product.errors.any? %&gt;\n    &lt;div class=\"errors-container\"&gt;\n      &lt;ul&gt;\n        &lt;% @product.errors.full_messages.each do |message| %&gt;\n          &lt;li&gt;&lt;%= message %&gt;&lt;/li&gt;\n        &lt;% end %&gt;\n      &lt;/ul&gt;\n    &lt;/div&gt;\n  &lt;% end %&gt;\n  &lt;%= f.input :name, label: 'Product name' %&gt;\n  &lt;%= f.input :description, label: 'Description' %&gt;\n  &lt;%= f.association :category, label: 'Category' %&gt;\n  &lt;%= f.input :price, label: 'Price' %&gt;\n  &lt;%= f.input :picture %&gt;\n  &lt;%= f.input :picture_cache, as: :hidden %&gt;\n  &lt;%= f.button :submit %&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>and these validations in my product model:</p>\n\n<pre><code>validates :name, :description, :category, :price, presence: true\n</code></pre>\n\n<p>this is my controller:</p>\n\n<pre><code>    class ProductsController &lt; ApplicationController\n  before_action :set_product, only: [:show, :edit, :update, :destroy]\n  skip_before_action :authenticate_user!, only: [:index, :show]\n\n  def index\n  end\n\n\n  def show\n  end\n\n  def new\n    @product = Product.new\n  end\n\n  def edit\n  end\n\n  def create\n    @product = current_user.products.new(product_params)\n    if @product.save\n      respond_to do |format|\n        format.html { redirect_to products_path, notice: 'The product was successfully created.' }\n      end\n    else\n      redirect_to new_product_path\n    end\n  end\n\n  def update\n    @product.update(product_params)\n    respond_to do |format|\n      format.html { redirect_to product_path, notice: 'The product was successfully updated.' }\n    end\n  end\n\n  def destroy\n    @product.destroy\n    respond_to do |format|\n      format.html { redirect_to products_path, notice: 'The product was successfully destroyed.' }\n    end\n  end\n\n  private\n    def set_product\n      @product = Product.find(params[:id])\n    end\n\n    def product_params\n      params.require(:product).permit(:name, :description, :category_id, :price, :picture, :picture_cache)\n    end\n  end\n</code></pre>\n\n<p>when i submit the form without any field required in the validation i don't get any error messages. Where am i doing wrong?\nUPDATE: I put my controller.</p>\n"}]