[{"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-3", "ruby-on-rails-4", "activerecord"], "answers": [{"comments": [{"owner": {"reputation": 519, "user_id": 918797, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/c60793adc2013b8060cd0616e70dc8e2?s=128&d=identicon&r=PG", "display_name": "Tyler Willingham", "link": "https://stackoverflow.com/users/918797/tyler-willingham"}, "edited": false, "score": 0, "creation_date": 1447898029, "post_id": 33793307, "comment_id": 55354600, "body": "I feel totally confident this is the right answer. Noticed that immediately myself :)"}, {"owner": {"reputation": 43, "user_id": 4111137, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8KtpA.jpg?s=128&g=1", "display_name": "Beeee", "link": "https://stackoverflow.com/users/4111137/beeee"}, "edited": false, "score": 0, "creation_date": 1447922171, "post_id": 33793307, "comment_id": 55363488, "body": "@Swards I tried that but it caused another error which is <b>NameError: undefined local variable or method `through&#39; for User (call &#39;User.connection&#39; to establish a connection):Class</b> and when I removed this through relation it caused another error !"}, {"owner": {"reputation": 15583, "user_id": 177489, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/sv6zK.jpg?s=128&g=1", "display_name": "Mark Swardstrom", "link": "https://stackoverflow.com/users/177489/mark-swardstrom"}, "edited": false, "score": 0, "creation_date": 1447950175, "post_id": 33793307, "comment_id": 55383670, "body": "The <code>through</code> on this line needs to be symbol, otherwise ruby will treat it as a method <code>has_many :friends , through: :friendships</code>"}], "tags": [], "owner": {"reputation": 15583, "user_id": 177489, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/sv6zK.jpg?s=128&g=1", "display_name": "Mark Swardstrom", "link": "https://stackoverflow.com/users/177489/mark-swardstrom"}, "is_accepted": false, "score": 2, "last_activity_date": 1447893785, "creation_date": 1447893785, "answer_id": 33793307, "question_id": 33792607, "link": "https://stackoverflow.com/questions/33792607/nomethoderror-undefined-method-has-many-for-activerecordmodule/33793307#33793307", "title": "NoMethodError: undefined method `has_many&#39; for ActiveRecord:Module", "body": "<p>This is probably causing that error.</p>\n\n<pre><code>class User &lt; ActiveRecord::\n</code></pre>\n\n<p><code>ActiveRecord</code> is a module, the class is <code>Base</code>.  It should be</p>\n\n<pre><code>class User &lt; ActiveRecord::Base\n</code></pre>\n"}], "owner": {"reputation": 43, "user_id": 4111137, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8KtpA.jpg?s=128&g=1", "display_name": "Beeee", "link": "https://stackoverflow.com/users/4111137/beeee"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 831, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1447893785, "creation_date": 1447889790, "question_id": 33792607, "link": "https://stackoverflow.com/questions/33792607/nomethoderror-undefined-method-has-many-for-activerecordmodule", "title": "NoMethodError: undefined method `has_many&#39; for ActiveRecord:Module", "body": "<p>I am trying to add user to table User by console : u=User.new but I always get an error <strong><em>undefined method `has_many' for ActiveRecord:Module</em></strong> and I tried many solutions but nothing helped so I tried to remove has_many relations ot avoid the error  I get the same error but with <strong><em>undefined method 'attr_accessor'</em></strong>  or I get when I remove attr_accessor <strong><em>undefined method 'before_save'</em></strong> . i have another 4 models which are message-post-friendship-comment.</p>\n\n<p>here is my  User Model</p>\n\n<pre><code> class User &lt; ActiveRecord::\n\n\n  has_many :posts\n  has_many :comments\n  has_many :messages\n  has_many :friendships\n  has_many :friends , through=&gt; :friendships\n  attr_accessor :email, :password\n  before_save :encrypt_password\n  after_save :clear_password\n  validates_prescence_of :first_name\n  validates_prescence_of :last_name\n  validates :password, presence: true, length: { minimum: 6 }\n  validates_prescence_of :email\n  validates_uniqueness_of :email , uniqueness: { case_sensitive: false }\n  validates_prescence_of :gender\n  validate :that_born_on_is_not_in_the_future\n\n\n\n  def self.authenticate(email, password)\n      user = find_by_email(email)\n      if ((user &amp;&amp; user.password_hash) == (BCrypt::Engine.hash_secret(password, user.salt)))\n       user\n      else\n        nil\n      end\n  end\n\n  def encrypt_password\n      if password.present?\n        self.salt = BCrypt::Engine.generate_salt\n        self.hash = BCrypt::Engine.hash_secret(password, salt)\n      end\n  end\n\n  def clear_password\n    self.password = nil\n  end\n\n\n  def that_born_on_is_not_in_the_future\n      self.errors.add :birth_date, 'is in the future' \\\n  unless self.birth_date &lt;= Date.today end\n\n\n  end\n</code></pre>\n\n<p><strong><em>Thanks in advance.</em></strong></p>\n"}, {"tags": ["javascript", "ruby-on-rails", "ruby", "json", "d3.js"], "answers": [{"comments": [{"owner": {"reputation": 473, "user_id": 4652341, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/32d243374ec979900e471874a9dc7ad9?s=128&d=identicon&r=PG&f=1", "display_name": "James N", "link": "https://stackoverflow.com/users/4652341/james-n"}, "edited": false, "score": 0, "creation_date": 1447965892, "post_id": 33810417, "comment_id": 55393537, "body": "awesome, couldnt spot that, and that was the issue. thanks for the help"}], "tags": [], "owner": {"reputation": 101125, "user_id": 16363, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/xv8q9.png?s=128&g=1", "display_name": "Mark", "link": "https://stackoverflow.com/users/16363/mark"}, "is_accepted": true, "score": 1, "last_activity_date": 1447953761, "creation_date": 1447953761, "answer_id": 33810417, "question_id": 33792514, "link": "https://stackoverflow.com/questions/33792514/d3pie-error-no-data-supplied-on-d3pie-js/33810417#33810417", "title": "d3pie error: no data supplied on d3pie.js", "body": "<p>You config option is bracketed incorrectly (everything is a child of \"header\").  You really meant:</p>\n\n<pre><code>var config = {\n    \"header\": {\n      \"title\": {\n        \"text\": \"Quiz Questions\",\n        \"fontSize\": 18,\n        \"font\": \"verdana\"\n      },\n    },\n    \"size\": {\n      \"canvasHeight\": 400,\n      \"canvasWidth\": 500\n    },\n    \"data\": {\n      \"content\": data\n    },\n    \"labels\": {\n      \"outer\": {\n        \"pieDistance\": 32\n      }\n    }\n  };\n</code></pre>\n"}], "owner": {"reputation": 473, "user_id": 4652341, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/32d243374ec979900e471874a9dc7ad9?s=128&d=identicon&r=PG&f=1", "display_name": "James N", "link": "https://stackoverflow.com/users/4652341/james-n"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 520, "favorite_count": 0, "accepted_answer_id": 33810417, "answer_count": 1, "score": 0, "last_activity_date": 1447953761, "creation_date": 1447889299, "question_id": 33792514, "link": "https://stackoverflow.com/questions/33792514/d3pie-error-no-data-supplied-on-d3pie-js", "title": "d3pie error: no data supplied on d3pie.js", "body": "<p>I am using rails, and gathering some data to make pie charts. I am just using ruby objects (so no JSON), and using <a href=\"http://d3pie.org/\" rel=\"nofollow\">d3pie</a>. First, I make a helper function. Then I make a javascript function using that helper, and pass it in the dom. Here's my code;</p>\n\n<p><strong>helper.rb</strong></p>\n\n<pre><code>  def options_data_to_d3(options_data)\n    d3_data = []\n    options_data.each do |key, value|   \n      d3_data.push( { label: key.option.as_json, value: value.as_json } )\n    end\n    return JSON.pretty_generate(d3_data)\n  end\n</code></pre>\n\n<p>this takes the ruby hash, and makes it into json</p>\n\n<p><strong>js function</strong></p>\n\n<pre><code>function dataPieChart(id, data) {  \n    var config = {\n      \"header\": {\n        \"title\": {\n          \"text\": \"Quiz Questions\",\n          \"fontSize\": 18,\n          \"font\": \"verdana\"\n        },\n        \"size\": {\n          \"canvasHeight\": 400,\n          \"canvasWidth\": 500\n        },\n        \"data\": {\n          \"content\": data\n        },\n        \"labels\": {\n          \"outer\": {\n            \"pieDistance\": 32\n          }\n        }\n      }\n    }\n    var pie = new d3pie(id, config); \n}\n</code></pre>\n\n<p><strong>passing into the view</strong></p>\n\n<pre><code>&lt;div id=\"quizQuestionOptionPie&lt;%= question.id %&gt;\"&gt;&lt;/div&gt;\n\n&lt;script type=\"text/javascript\"&gt;dataPieChart(\"quizQuestionOptionPie&lt;%= question.id %&gt;\", &lt;%= raw options_data_to_d3(data[:options]) %&gt;);\n&lt;/script&gt;\n</code></pre>\n\n<p>when I call a console log in the javascript function to see what data is, I get the correct output that both d3pie and d3 are looking for, yet I am still getting the error\n<code>d3pie error: no data supplied.</code></p>\n\n<p>does anyone see something wrong with my code, or something I am missing? any help is appreciated. </p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 2807, "user_id": 420217, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/d8263b4bb6e7d385d9b6267b700a954d?s=128&d=identicon&r=PG", "display_name": "Gary", "link": "https://stackoverflow.com/users/420217/gary"}, "reply_to_user": {"reputation": 36166, "user_id": 393701, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/250889c646cd2a916920d9252f7c6f42?s=128&d=identicon&r=PG", "display_name": "SirDarius", "link": "https://stackoverflow.com/users/393701/sirdarius"}, "edited": false, "score": 0, "creation_date": 1447889472, "post_id": 33792442, "comment_id": 55351904, "body": "Yes my mistake, I am indeed referring to a hash."}, {"owner": {"reputation": 36166, "user_id": 393701, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/250889c646cd2a916920d9252f7c6f42?s=128&d=identicon&r=PG", "display_name": "SirDarius", "link": "https://stackoverflow.com/users/393701/sirdarius"}, "edited": false, "score": 0, "creation_date": 1447889892, "post_id": 33792442, "comment_id": 55352065, "body": "By any chance, are you trying to implement a trie ?"}], "answers": [{"comments": [{"owner": {"reputation": 2807, "user_id": 420217, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/d8263b4bb6e7d385d9b6267b700a954d?s=128&d=identicon&r=PG", "display_name": "Gary", "link": "https://stackoverflow.com/users/420217/gary"}, "edited": false, "score": 0, "creation_date": 1447889177, "post_id": 33792477, "comment_id": 55351798, "body": "No that wouldn&#39;t do it. That would just create an array from the string. But I want to use the string as keys."}], "tags": [], "owner": {"reputation": 11790, "user_id": 5004923, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/EOaz2.jpg?s=128&g=1", "display_name": "webdeb", "link": "https://stackoverflow.com/users/5004923/webdeb"}, "is_accepted": false, "score": -1, "last_activity_date": 1447889087, "creation_date": 1447889087, "answer_id": 33792477, "question_id": 33792442, "link": "https://stackoverflow.com/questions/33792442/convert-a-string-to-a-path-of-keys-in-a-hash/33792477#33792477", "title": "Convert a string to a path of keys in a hash", "body": "<p>you are looking for <code>String.split()</code> function </p>\n\n<pre><code>var array = \"this_is_a_test\".split('_');\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 2807, "user_id": 420217, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/d8263b4bb6e7d385d9b6267b700a954d?s=128&d=identicon&r=PG", "display_name": "Gary", "link": "https://stackoverflow.com/users/420217/gary"}, "edited": false, "score": 0, "creation_date": 1447891636, "post_id": 33792630, "comment_id": 55352687, "body": "No, this doesn&#39;t get the keys from a string."}], "tags": [], "owner": {"reputation": 674, "user_id": 5573943, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d81173e4e32a36b1bbb5aab49d5f813d?s=128&d=identicon&r=PG&f=1", "display_name": "Daniel Rodrigues", "link": "https://stackoverflow.com/users/5573943/daniel-rodrigues"}, "is_accepted": false, "score": 0, "last_activity_date": 1447889932, "creation_date": 1447889932, "answer_id": 33792630, "question_id": 33792442, "link": "https://stackoverflow.com/questions/33792442/convert-a-string-to-a-path-of-keys-in-a-hash/33792630#33792630", "title": "Convert a string to a path of keys in a hash", "body": "<p>could be something like this ?</p>\n\n<pre><code>    keys = [\"a\", \"b\", \"c\"]\n    values = [1, 2, 3]\n    zipped = keys.zip(values)\n    =&gt; [[\"a\", 1], [\"b\", 2], [\"c\", 3]]\n    Hash[zipped]\n    =&gt; {\"a\"=&gt;1, \"b\"=&gt;2, \"c\"=&gt;3}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 36166, "user_id": 393701, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/250889c646cd2a916920d9252f7c6f42?s=128&d=identicon&r=PG", "display_name": "SirDarius", "link": "https://stackoverflow.com/users/393701/sirdarius"}, "is_accepted": true, "score": 5, "last_activity_date": 1447891819, "last_edit_date": 1447891819, "creation_date": 1447890478, "answer_id": 33792729, "question_id": 33792442, "link": "https://stackoverflow.com/questions/33792442/convert-a-string-to-a-path-of-keys-in-a-hash/33792729#33792729", "title": "Convert a string to a path of keys in a hash", "body": "<p><a href=\"http://ruby-doc.org/core-2.2.3/Enumerable.html#method-i-inject\" rel=\"nofollow\">Inject</a> works nicely here:</p>\n\n<pre><code>hash = \"this_is_a_test\".split('_').reverse.inject(\"final value\") { |h, s|  {s =&gt; h}  }\n</code></pre>\n\n<p>This returns:</p>\n\n<pre><code> {\"this\"=&gt;{\"is\"=&gt;{\"a\"=&gt;{\"test\"=&gt;\"final value\"}}}}\n</code></pre>\n\n<p>and:</p>\n\n<pre><code> hash['this']['is']['a']['test']\n =&gt; \"final value\"\n</code></pre>\n\n<p>The explanation here is that each iteration of inject returns a hash that contains the current string as a key, and the previous hash as a value, so each new key contains recursively all the hashes up to this point, including the deepest value that is passed as argument of inject.</p>\n\n<p>This is why the array of keys needs to be reversed, because the hash is created from the inside-out.</p>\n\n<p><strong>edit</strong>: I believe I didn't understand the question correctly.</p>\n\n<p>You actually meant to access an existing recursive hash.</p>\n\n<p>Assuming the hash has been built using my previous method, accessing the innermost value can be achieved with inject too:</p>\n\n<pre><code>\"this_is_a_test\".split('_').inject(hash) { |h,v| h[v] }\n=&gt; \"final value\"\n</code></pre>\n\n<p>Also note that Ruby 2.3 implements the new <code>Hash#dig</code> method, which does exactly this, in a secure way:</p>\n\n<pre><code>path = \"this_is_a_test\".split('_')\nhash.dig(*path) # =&gt; \"final value\"\n</code></pre>\n"}], "owner": {"reputation": 2807, "user_id": 420217, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/d8263b4bb6e7d385d9b6267b700a954d?s=128&d=identicon&r=PG", "display_name": "Gary", "link": "https://stackoverflow.com/users/420217/gary"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 719, "favorite_count": 0, "accepted_answer_id": 33792729, "answer_count": 3, "score": 1, "last_activity_date": 1447910304, "creation_date": 1447888896, "last_edit_date": 1447910304, "question_id": 33792442, "link": "https://stackoverflow.com/questions/33792442/convert-a-string-to-a-path-of-keys-in-a-hash", "title": "Convert a string to a path of keys in a hash", "body": "<p>I have a string like <code>string = \"this_is_a_test\"</code> and a hash <code>hash</code>. How can I convert the string to a path of keys, so that it returns the value located at: <code>hash['this']['is']['a']['test']</code>?</p>\n\n<p>I don't want to simply split the string into an array; I want to use the string as keys to access in a hash. The keys already exist in the hash.</p>\n"}, {"tags": ["ruby", "regex"], "answers": [{"comments": [{"owner": {"reputation": 1925, "user_id": 2386548, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/fb0c86baa20f25404248077f3c01e0b8?s=128&d=identicon&r=PG", "display_name": "Carpela", "link": "https://stackoverflow.com/users/2386548/carpela"}, "edited": false, "score": 0, "creation_date": 1447890442, "post_id": 33792650, "comment_id": 55352249, "body": "That is pretty elegant. Doesn&#39;t work with the 50000-60000 example though. i.e. I&#39;m trying to match the whole range (since, interestingly, it&#39;s the latter value - 60000 - that&#39;s most important, and I want the range to be a string value &quot;50000 - 60000&quot;). But I don&#39;t want to match later examples as I&#39;ll run the risk of running into things which look a bit like numbers but aren&#39;t really what I&#39;m after... e.g. if the phone number in an email starts 800 I&#39;d end up in trouble if I ignore whether or not it was &#39;connected&#39; to the first number I find."}, {"owner": {"reputation": 1925, "user_id": 2386548, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/fb0c86baa20f25404248077f3c01e0b8?s=128&d=identicon&r=PG", "display_name": "Carpela", "link": "https://stackoverflow.com/users/2386548/carpela"}, "edited": false, "score": 0, "creation_date": 1447895482, "post_id": 33792650, "comment_id": 55353904, "body": "Have clarified above as I think the question wasn&#39;t clear."}, {"owner": {"reputation": 3146, "user_id": 982786, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/xARbd.jpg?s=128&g=1", "display_name": "Nefariis", "link": "https://stackoverflow.com/users/982786/nefariis"}, "reply_to_user": {"reputation": 1925, "user_id": 2386548, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/fb0c86baa20f25404248077f3c01e0b8?s=128&d=identicon&r=PG", "display_name": "Carpela", "link": "https://stackoverflow.com/users/2386548/carpela"}, "edited": false, "score": 0, "creation_date": 1447895679, "post_id": 33792650, "comment_id": 55353974, "body": "Gotcha - I need to get a few things done for work and then Ill come back with a new solution. Give me an hour or so... In the mean time, could you post the lines with actual (more or less) examples. It will help me debug."}, {"owner": {"reputation": 1925, "user_id": 2386548, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/fb0c86baa20f25404248077f3c01e0b8?s=128&d=identicon&r=PG", "display_name": "Carpela", "link": "https://stackoverflow.com/users/2386548/carpela"}, "edited": false, "score": 0, "creation_date": 1447896580, "post_id": 33792650, "comment_id": 55354224, "body": "It&#39;s a bit tricky to do that as the strings can be quite long (it&#39;s an entire email message including the description, for example)"}, {"owner": {"reputation": 1925, "user_id": 2386548, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/fb0c86baa20f25404248077f3c01e0b8?s=128&d=identicon&r=PG", "display_name": "Carpela", "link": "https://stackoverflow.com/users/2386548/carpela"}, "edited": false, "score": 0, "creation_date": 1447897787, "post_id": 33792650, "comment_id": 55354533, "body": "&quot;Senior PHP Developer London circa &#163;50000 required&quot; Would be an example...  Or &quot;Hi Bob, I&#39;m looking to hire a Programme Manager.... rate: &#163;500-750 per day......&quot;"}], "tags": [], "owner": {"reputation": 3146, "user_id": 982786, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/xARbd.jpg?s=128&g=1", "display_name": "Nefariis", "link": "https://stackoverflow.com/users/982786/nefariis"}, "is_accepted": false, "score": 0, "last_activity_date": 1447972968, "last_edit_date": 1447972968, "creation_date": 1447890033, "answer_id": 33792650, "question_id": 33792387, "link": "https://stackoverflow.com/questions/33792387/getting-a-regex-to-return-a-number-range-e-g-salary-from-unstructured-text/33792650#33792650", "title": "Getting a regex to return a number range (e.g. salary) from unstructured text", "body": "<p>Here is the new update.</p>\n\n<pre><code>((?:\u00a3)\\d{1,}\\-(?:\\d{1,}(?:\\-|\\w))|\\d{1,} - \\d{1,}|\\d{1,} to \\d{1,}|(?&lt;=\\s)\\d{1,}\\-\\d{1,}(?:k|(?=\\s))|(?:\u00a3)\\d{1,}(?:\\w)|(?&lt;=\\s)\\d{1,}(?=\\s))\n</code></pre>\n\n<p>This should work for all scenarios.</p>\n\n<p>Here is one that includes the \"per hour\"</p>\n\n<pre><code>((?:\u00a3)\\d{1,}\\-(?:\\d{1,}(?:\\-|\\w))|\\d{1,} - \\d{1,}|\\d{1,} to \\d{1,}|(?&lt;=\\s)\\d{1,}\\-\\d{1,}(?:k|(?=\\s))|(?:\u00a3)\\d{1,}(?:\\w| per hour)|(?&lt;=\\s)\\d{1,}(?=\\s))\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1925, "user_id": 2386548, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/fb0c86baa20f25404248077f3c01e0b8?s=128&d=identicon&r=PG", "display_name": "Carpela", "link": "https://stackoverflow.com/users/2386548/carpela"}, "edited": false, "score": 0, "creation_date": 1447895048, "post_id": 33793239, "comment_id": 55353776, "body": "That is looking like it&#39;s getting somewhere, but I&#39;ve clarified the question a little by editing. Those strings with =&gt; are me trying to indicate the string at the start with the requried output after the arrow.... Sorry that wasn&#39;t clear."}, {"owner": {"reputation": 1925, "user_id": 2386548, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/fb0c86baa20f25404248077f3c01e0b8?s=128&d=identicon&r=PG", "display_name": "Carpela", "link": "https://stackoverflow.com/users/2386548/carpela"}, "edited": false, "score": 0, "creation_date": 1447895388, "post_id": 33793239, "comment_id": 55353880, "body": "I&#39;ll also clarify that sometimes it&#39;s just a number, other times it&#39;s a range of numbers. The example I&#39;m looking at is job information. Sometimes people will list the salary as &#163;50k. sometimes they&#39;ll list it as &#163;50000-60000. In these cases either the single number or the range is important."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "reply_to_user": {"reputation": 1925, "user_id": 2386548, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/fb0c86baa20f25404248077f3c01e0b8?s=128&d=identicon&r=PG", "display_name": "Carpela", "link": "https://stackoverflow.com/users/2386548/carpela"}, "edited": false, "score": 0, "creation_date": 1447899959, "post_id": 33793239, "comment_id": 55355148, "body": "Will they ever enter  &#163;50000 - &#163;60000?  &#163;50000 is not bad. but wouldn&#39;t it be hard to get by on &quot;&#163;500-650&quot;, especially in central London?"}, {"owner": {"reputation": 1925, "user_id": 2386548, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/fb0c86baa20f25404248077f3c01e0b8?s=128&d=identicon&r=PG", "display_name": "Carpela", "link": "https://stackoverflow.com/users/2386548/carpela"}, "edited": false, "score": 0, "creation_date": 1447900383, "post_id": 33793239, "comment_id": 55355274, "body": "Not if they&#39;re paying that (&#163;500-650) per day (as they would be in this case...)"}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "reply_to_user": {"reputation": 1925, "user_id": 2386548, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/fb0c86baa20f25404248077f3c01e0b8?s=128&d=identicon&r=PG", "display_name": "Carpela", "link": "https://stackoverflow.com/users/2386548/carpela"}, "edited": false, "score": 0, "creation_date": 1447901169, "post_id": 33793239, "comment_id": 55355450, "body": "Keiran, don&#39;t forget the first sentence of my comment (where I asked if both ends of a range could begin with &#39;&#163;&#39;)."}, {"owner": {"reputation": 1925, "user_id": 2386548, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/fb0c86baa20f25404248077f3c01e0b8?s=128&d=identicon&r=PG", "display_name": "Carpela", "link": "https://stackoverflow.com/users/2386548/carpela"}, "edited": false, "score": 0, "creation_date": 1447901341, "post_id": 33793239, "comment_id": 55355500, "body": "Sorry. Yes they will enter that. Not as commonly as &#163;50000-60000 or even &#163;50-60000 / &#163;50-60k.  They&#39;ll definitely write things like &#163;500 - &#163;650 (often it&#39;s being filled by a &#39;mail-merge&#39;, where if a min and ma value exists, it will put them in that format)."}, {"owner": {"reputation": 145, "user_id": 9338460, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2f9a5846af2a5f0e888d28de6985b6bd?s=128&d=identicon&r=PG&f=1", "display_name": "Maniraj", "link": "https://stackoverflow.com/users/9338460/maniraj"}, "edited": false, "score": 0, "creation_date": 1569922872, "post_id": 33793239, "comment_id": 102743963, "body": "@CarySwoveland I have a small query that how can I extract the amount from the string which is something like &quot;20k per month to 1.5L per month&quot;"}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "reply_to_user": {"reputation": 145, "user_id": 9338460, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2f9a5846af2a5f0e888d28de6985b6bd?s=128&d=identicon&r=PG&f=1", "display_name": "Maniraj", "link": "https://stackoverflow.com/users/9338460/maniraj"}, "edited": false, "score": 0, "creation_date": 1570051553, "post_id": 33793239, "comment_id": 102796840, "body": "@Maniraj, if I understand your question correctly, change <code>r1</code> to <code>&#47;\\d+(?:\\.\\d+)?k per month to \\d+(?:\\.\\d+)?L per month&#47;</code>. This also matches <code>&quot;20.2k per month to 2L per month&quot;</code>."}], "tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": true, "score": 2, "last_activity_date": 1448085397, "last_edit_date": 1448085397, "creation_date": 1447893324, "answer_id": 33793239, "question_id": 33792387, "link": "https://stackoverflow.com/questions/33792387/getting-a-regex-to-return-a-number-range-e-g-salary-from-unstructured-text/33793239#33793239", "title": "Getting a regex to return a number range (e.g. salary) from unstructured text", "body": "<p>I concluded it would be best to do this in two steps. First, let's remove phone numbers:</p>\n\n<pre><code>r0 = /\n     \\d+        # Match one or more digits\n     (?:        # Begin a non-capture group\n       \\s*\\-\\s* # Match a hypen optionally surrounded with spaces\n       \\d+      # Match one or more digits\n     ){2}       # Close non-capture and perform it twice\n    /x          # Extended/free-spacing mode\n\narr0 = [\"blah blah \u00a3500 blah\",\n        \"balh blah \u00a3500-650 blah\",\n        \"\u00a350 per hour\",\n        \"blah blah \u00a350k blah\",\n        \"bblah blah 50-60k\",\n        \"blah blah 50000 blahblahblah\",\n        \"blah 50000 - \u00a360000 blablahblah 0207-123-4567\",\n        \"bblah blah 50k-\u00a360k\"\n       ]\n\narr1 = arr0.map { |str| str.gsub(r0,'') }\n  #=&gt; [\"blah blah \u00a3500 blah\",\n  #    \"balh blah \u00a3500-650 blah\",\n  #    \"\u00a350 per hour\",\n  #    \"blah blah \u00a350k blah\",\n  #    \"bblah blah 50-60k\",\n  #    \"blah blah 50000 blahblahblah\",\n  #    \"blah 50000 - \u00a360000 blablahblah \",\n  #    \"bblah blah 50k-\u00a360k\"] \n</code></pre>\n\n<p>I've assumed that all phone numbers are three strings of digits separated by hyphens that are optionally surrounded with spaces. If that assumption is not correct you would of course have to modify <code>r0</code> as appropriate.</p>\n\n<p>Now extract the values desired from the elements of <code>arr1</code>:</p>\n\n<pre><code>r1 = /\n     \u00a3?         # Optionally begin with a pound sign\n     \\d+k?      # Match one or more digits optionally followed by k\n     (?:        # Begin non-capture group\n       \\s*\\-\\s* # Match a hypen optionally surrounded with spaces\n       \\d+k?    # Match one or more digits optionally followed by k\n     )?         # End non-capture group and make the match optional\n     \\b         # word break\n     /x         # Extended/free-spacing mode\n\narr1.map { |s| s[r1] }\n  #=&gt; [\"\u00a3500\", \"\u00a3500-650\", \"\u00a350\", \"\u00a350k\", \"50-60k\", \"50000\", \"50000\", \"50k\"] \n</code></pre>\n"}], "owner": {"reputation": 1925, "user_id": 2386548, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/fb0c86baa20f25404248077f3c01e0b8?s=128&d=identicon&r=PG", "display_name": "Carpela", "link": "https://stackoverflow.com/users/2386548/carpela"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 460, "favorite_count": 0, "accepted_answer_id": 33793239, "answer_count": 2, "score": 1, "last_activity_date": 1448085397, "creation_date": 1447888653, "last_edit_date": 1447894986, "question_id": 33792387, "link": "https://stackoverflow.com/questions/33792387/getting-a-regex-to-return-a-number-range-e-g-salary-from-unstructured-text", "title": "Getting a regex to return a number range (e.g. salary) from unstructured text", "body": "<p>I'm trying to extract salary information from emails and job adverts. </p>\n\n<p>I need a regex that will return the first instance of the range or salary number (I also want to avoid matching phone numbers that might occur later in the string) e.g.</p>\n\n<pre><code>\"blah blah \u00a3500 blah\".match(regex)\n=&gt; \"\u00a3500\"\n\"balh blah \u00a3500-650 blah\".match(regex)\n=&gt; \"\u00a3500-650\"\n\"\u00a350 per hour\".match(regex) \n=&gt; \"\u00a350\" (or \"\u00a350 per hour\" for an advanced version)\n\"blah blah \u00a350k blah\".match(regex)\n=&gt; \"\u00a350k\"\n\"bblah blah 50-60k\".match(regex)\n=&gt; \"50-60k\"\n\"blah blah 50000 blahblahblah\".match(regex)  \n=&gt; \"50000\"\n\"blah 50000 - 60000 blablahblah 0207-123-4567\".match(regex) \n=&gt; \"50000 - 60000\"\n#\"blah 350 to 425 blah\".match(regex) \n#=&gt; \"350 to 425\" Can forget this last one as it's a bit of an edge case\n</code></pre>\n\n<p>I've got this far. </p>\n\n<pre><code>/(\u00a3|$)?[0-9][0-9]{0,5}[0-9,k]?(-| - | to )?((\u00a3|$)?[0-9][0-9]{0,5}[0,5,k]?)?/\n</code></pre>\n\n<p>Or a slightly enhanced:</p>\n\n<pre><code>/(\u00a3|$)?[0-9][0-9]{0,5}[0-9,k]?(-| - | to )?((\u00a3|$)?[0-9][0-9][0,5,k]?)? ?(ph|pw|pa| per|per)? ?(hour|annum|week|month)?/\n</code></pre>\n\n<p>Sort of works but doesn't match the whole substring number range, there seems to be lots of matches of the individual pieces.</p>\n\n<p>e.g. </p>\n\n<pre><code>\"bblah blah 50-60k\".match(regex)\n=&gt; #&lt;MatchData \"50-60k\" 1:nil 2:\"-\" 3:\"60k\" 4:nil&gt;\n</code></pre>\n\n<p>I want it to just say</p>\n\n<pre><code>\"50-60k\"\n</code></pre>\n\n<p>What am I missing (and is there a more elegant way to do this?)</p>\n"}, {"tags": ["ruby", "unit-testing"], "answers": [{"comments": [{"owner": {"reputation": 150, "user_id": 2631978, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/63d2ac2c0437e55ddf84fe88f740c24c?s=128&d=identicon&r=PG", "display_name": "TJ Liu", "link": "https://stackoverflow.com/users/2631978/tj-liu"}, "edited": false, "score": 0, "creation_date": 1447889290, "post_id": 33792445, "comment_id": 55351831, "body": "This is just what I want. So in this case, what about LogFile and Log? Are they considered as instance variable? Also, is it the recommended way to put test class instance and logger in startup?"}, {"owner": {"reputation": 25573, "user_id": 676874, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/c8e67ec01dc3e7c402255ff26785863f?s=128&d=identicon&r=PG", "display_name": "knut", "link": "https://stackoverflow.com/users/676874/knut"}, "reply_to_user": {"reputation": 150, "user_id": 2631978, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/63d2ac2c0437e55ddf84fe88f740c24c?s=128&d=identicon&r=PG", "display_name": "TJ Liu", "link": "https://stackoverflow.com/users/2631978/tj-liu"}, "edited": false, "score": 0, "creation_date": 1447922037, "post_id": 33792445, "comment_id": 55363416, "body": "Log and Logfile are constants. In the actual example there is no need to define @log or @@log, you could also use Log."}], "tags": [], "owner": {"reputation": 25573, "user_id": 676874, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/c8e67ec01dc3e7c402255ff26785863f?s=128&d=identicon&r=PG", "display_name": "knut", "link": "https://stackoverflow.com/users/676874/knut"}, "is_accepted": true, "score": 0, "last_activity_date": 1447888923, "creation_date": 1447888923, "answer_id": 33792445, "question_id": 33792346, "link": "https://stackoverflow.com/questions/33792346/logger-in-ruby-unit-test-startup-or-setup/33792445#33792445", "title": "logger in ruby unit test startup or setup", "body": "<p><code>startup</code> should be used as a class method. There you could define a class variable like <code>@@log</code>.</p>\n\n<p>If you want to use an instance variable <code>@log</code> you must fill it in <code>setup</code>.</p>\n\n<p>Example: </p>\n\n<pre><code>require 'test/unit'\nrequire 'logger'\nclass MyTest &lt; Test::Unit::TestCase\n    LogFile = \"test.log\"\n    Log= Logger.new(LogFile)\n\n    def self.startup\n       @@log = Log\n    end\n\n    def setup\n       @log = Log\n    end\n\n    def test_class_var\n      assert_kind_of(Logger,@@log)\n    end\n    def test_instance_var\n      assert_kind_of(Logger,@log)\n    end\n\nend\n</code></pre>\n"}], "owner": {"reputation": 150, "user_id": 2631978, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/63d2ac2c0437e55ddf84fe88f740c24c?s=128&d=identicon&r=PG", "display_name": "TJ Liu", "link": "https://stackoverflow.com/users/2631978/tj-liu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 269, "favorite_count": 0, "accepted_answer_id": 33792445, "answer_count": 1, "score": 0, "last_activity_date": 1447888923, "creation_date": 1447888473, "question_id": 33792346, "link": "https://stackoverflow.com/questions/33792346/logger-in-ruby-unit-test-startup-or-setup", "title": "logger in ruby unit test startup or setup", "body": "<p>I am writing some tests in ruby and have this question.</p>\n\n<pre><code>class MyTest &lt; Test::Unit::TestCase\n    LogFile = \"test.log\"\n    Log= Logger.new(LogFile)\n\n    def startup\n       @log = Log\n    end\n\n    def shutdown\n    end\n\n    def setup\n    end\n\n   ....\n\nend\n</code></pre>\n\n<p>I am trying to create a logger in startup, however, it does not work well. In the test cases, @log is nil.\nI know I can put it in setup, however, I don't want to reassign it for every test case. Why it does not work? What is the correct way to do it?</p>\n"}, {"tags": ["python", "ruby"], "comments": [{"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1447888611, "post_id": 33792333, "comment_id": 55351611, "body": "That Python code doesn&#39;t make much sense."}, {"owner": {"reputation": 3, "user_id": 5578057, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IHAnf.png?s=128&g=1", "display_name": "Jack Backe", "link": "https://stackoverflow.com/users/5578057/jack-backe"}, "reply_to_user": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1447889024, "post_id": 33792333, "comment_id": 55351745, "body": "It&#39;s a module from this code <a href=\"https://gist.github.com/quarckster/d7661f26f71b302e1052\" rel=\"nofollow noreferrer\">gist.github.com/quarckster/d7661f26f71b302e1052</a>"}], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 5578057, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IHAnf.png?s=128&g=1", "display_name": "Jack Backe", "link": "https://stackoverflow.com/users/5578057/jack-backe"}, "edited": false, "score": 0, "creation_date": 1447891460, "post_id": 33792706, "comment_id": 55352610, "body": "You&#39;re fix is working, but now it undefined method from second join"}, {"owner": {"reputation": 2212, "user_id": 4803039, "user_type": "registered", "accept_rate": 96, "profile_image": "https://lh3.googleusercontent.com/-MmbDSCFLpd8/AAAAAAAAAAI/AAAAAAAAADg/2jruEOH8FM0/photo.jpg?sz=128", "display_name": "philip yoo", "link": "https://stackoverflow.com/users/4803039/philip-yoo"}, "reply_to_user": {"reputation": 3, "user_id": 5578057, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IHAnf.png?s=128&g=1", "display_name": "Jack Backe", "link": "https://stackoverflow.com/users/5578057/jack-backe"}, "edited": false, "score": 0, "creation_date": 1447892689, "post_id": 33792706, "comment_id": 55353045, "body": "@JackBacke The following should fix it: <code>res = data.to_a.join(&#39;&#39;)</code>. I&#39;ve never worked with <code>Set</code> objects before, but looks similar to an array except it is an object type with a unique set of methods. Look here: <a href=\"http://ruby-doc.org/stdlib-2.2.3/libdoc/set/rdoc/Set.html\" rel=\"nofollow noreferrer\">ruby-doc.org/stdlib-2.2.3/libdoc/set/rdoc/Set.html</a> for a list of methods for <code>Set</code> objects"}], "tags": [], "owner": {"reputation": 2212, "user_id": 4803039, "user_type": "registered", "accept_rate": 96, "profile_image": "https://lh3.googleusercontent.com/-MmbDSCFLpd8/AAAAAAAAAAI/AAAAAAAAADg/2jruEOH8FM0/photo.jpg?sz=128", "display_name": "philip yoo", "link": "https://stackoverflow.com/users/4803039/philip-yoo"}, "is_accepted": false, "score": 0, "last_activity_date": 1447890368, "creation_date": 1447890368, "answer_id": 33792706, "question_id": 33792333, "link": "https://stackoverflow.com/questions/33792333/from-python-to-ruby/33792706#33792706", "title": "From Python to Ruby", "body": "<p>Sorry, I don't exactly have the reasoning behind why, but you need to wrap the <code>map</code> enumerator argument in parentheses like below, or else it will see the symbol <code>:to_s</code> and try to use the <code>join</code> method on that alone. (i.e.: NoMethodError: undefined method `join' for :to_s:Symbol)</p>\n\n<pre><code>def to_str(data)\n  if data.is_a? Array\n    res = data.map(&amp;:to_s).join('')\n  elsif data.is_a? Set\n    res = data.join('')\n  end\nreturn res\nend\n</code></pre>\n\n<p>Edit: It might have something to do with <code>&amp;:to_s</code> being a proc</p>\n"}, {"tags": [], "owner": {"reputation": 2403, "user_id": 69926, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a5d5270f5f3cb32c9e9025123adcf36d?s=128&d=identicon&r=PG", "display_name": "Marcin Urbanski", "link": "https://stackoverflow.com/users/69926/marcin-urbanski"}, "is_accepted": true, "score": 0, "last_activity_date": 1447930078, "creation_date": 1447930078, "answer_id": 33801713, "question_id": 33792333, "link": "https://stackoverflow.com/questions/33792333/from-python-to-ruby/33801713#33801713", "title": "From Python to Ruby", "body": "<pre><code>2.2.2 :001 &gt; require 'set'                                                                                                                                                                               \n =&gt; true \n2.2.2 :002 &gt; [1, 2, \"test\"].join                                                                                                                                                                         \n =&gt; \"12test\" \n2.2.2 :003 &gt; Set.new([1, 2, \"test\"]).to_a.join                                                                                                                                                           \n =&gt; \"12test\" \n</code></pre>\n\n<p>Does this solve your problem?</p>\n"}], "owner": {"reputation": 3, "user_id": 5578057, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IHAnf.png?s=128&g=1", "display_name": "Jack Backe", "link": "https://stackoverflow.com/users/5578057/jack-backe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 61, "favorite_count": 0, "accepted_answer_id": 33801713, "answer_count": 2, "score": 0, "last_activity_date": 1447930078, "creation_date": 1447888410, "last_edit_date": 1447889231, "question_id": 33792333, "link": "https://stackoverflow.com/questions/33792333/from-python-to-ruby", "title": "From Python to Ruby", "body": "<p>I am rewriting one case from Python to Ruby, and have a problem.\nThe program reads data from terminal \"python test.py 1010010101\"</p>\n\n<pre><code>def to_str(data):\n\"\"\"Helper function to convert lists and sets to string.\nArgs:\n    data (LIST, SET): list or set to convert\nReturns:\n    STRING: result string\n\"\"\"\nif isinstance(data, list):\n    res = ''.join([str(i) for i in data])\nelif isinstance(data, set):\n    res = ''.join(data)\nreturn res\n</code></pre>\n\n<p>Almost done it on Ruby, but have \"Undefined method 'join' for # \nTryed .to_a, which doesn't help. </p>\n\n<p>My Ruby's code:  </p>\n\n<pre><code>def to_str(data)\n    if data.is_a? Array\n       res = data.map &amp;:to_s.join('')\n    elsif data.is_a? Set\n       res = data.join('')\n    end\n    return res\n  end\n</code></pre>\n"}, {"tags": ["ruby", "ruby-on-rails-4"], "answers": [{"tags": [], "owner": {"reputation": 61, "user_id": 5285531, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/I3Lu2.jpg?s=128&g=1", "display_name": "MattwalOlaide", "link": "https://stackoverflow.com/users/5285531/mattwalolaide"}, "is_accepted": false, "score": 0, "last_activity_date": 1448005936, "creation_date": 1448005936, "answer_id": 33821551, "question_id": 33792172, "link": "https://stackoverflow.com/questions/33792172/form-tag-calling-an-instance-of-a-class-on-the-controller/33821551#33821551", "title": "form_tag calling an instance of a class on the controller", "body": "<p>Can you make the form_tag sort of a block? Like:</p>\n\n<pre><code>form_tag '/order', method: :get do\n # All form elements\nend\n</code></pre>\n\n<p>Maybe displaying your route here can also help.</p>\n"}], "owner": {"reputation": 120, "user_id": 3973421, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/liVU5.jpg?s=128&g=1", "display_name": "0r4cl3", "link": "https://stackoverflow.com/users/3973421/0r4cl3"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 38, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1448005936, "creation_date": 1447887733, "question_id": 33792172, "link": "https://stackoverflow.com/questions/33792172/form-tag-calling-an-instance-of-a-class-on-the-controller", "title": "form_tag calling an instance of a class on the controller", "body": "<p>I am trying to use a <code>form_tag</code> on a Rails application that, when submitted, call an instance of a class on the controller.</p>\n\n<p><strong>View</strong></p>\n\n<pre><code>form_tag '/order', method: :get\nselect_tag 'type', options_for_select(@options_for_type, @type)\ntext_field_tag 'numbers', nil, placeholder: \"100\"\nsubmit_tag \"Get Info\"\n</code></pre>\n\n<p><strong>controller</strong></p>\n\n<pre><code>def order\n  @order = Order.new(params_here).fetch_info\n\n  @type = params[:type] || \"type1\"\n  @options_for_type = [[\"type1\", \"type1\"], [\"type2\", \"type2\"]]\n\n  ...\nend\n</code></pre>\n\n<p>This class sends some API requests (JSON).</p>\n\n<p>Now problem is, I am getting an error from the API that some parameters are missing, which is expected since I haven't submitted the form with all the params, but it seems the class is called automatically when the page is loaded. I would have expected the class to be called only when the submit button is pressed?</p>\n"}, {"tags": ["arrays", "ruby"], "answers": [{"comments": [{"owner": {"reputation": 207, "user_id": 4266982, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/bc800626f82111c8f9123a9ef144433f?s=128&d=identicon&r=PG&f=1", "display_name": "Keren", "link": "https://stackoverflow.com/users/4266982/keren"}, "edited": false, "score": 0, "creation_date": 1447893510, "post_id": 33792313, "comment_id": 55353331, "body": "Thanks!  But what is &lt;&lt;?  All I can find on Google is that it&#39;s a Binary Left Shift Operator. (The left operands value is moved left by the number of bits specified by the right operand.)  How does that work in this context?  Thanks again!"}, {"owner": {"reputation": 2623, "user_id": 625354, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/xc5hf.jpg?s=128&g=1", "display_name": "Dbz", "link": "https://stackoverflow.com/users/625354/dbz"}, "reply_to_user": {"reputation": 207, "user_id": 4266982, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/bc800626f82111c8f9123a9ef144433f?s=128&d=identicon&r=PG&f=1", "display_name": "Keren", "link": "https://stackoverflow.com/users/4266982/keren"}, "edited": false, "score": 0, "creation_date": 1447896204, "post_id": 33792313, "comment_id": 55354125, "body": "<code>&lt;&lt;</code> is the shovel operator. It appends to the end of the array. Check out the docs: <a href=\"http://ruby-doc.org/core-2.2.0/Array.html#method-i-3C-3C\" rel=\"nofollow noreferrer\">ruby-doc.org/core-2.2.0/Array.html#method-i-3C-3C</a>"}, {"owner": {"reputation": 207, "user_id": 4266982, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/bc800626f82111c8f9123a9ef144433f?s=128&d=identicon&r=PG&f=1", "display_name": "Keren", "link": "https://stackoverflow.com/users/4266982/keren"}, "edited": false, "score": 0, "creation_date": 1447896433, "post_id": 33792313, "comment_id": 55354188, "body": "Thanks, that&#39;s helpful.   Could you also replace that line with the following?   &#39;array.each { |number| new_array.push (number ** 2) }&#39;"}, {"owner": {"reputation": 2623, "user_id": 625354, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/xc5hf.jpg?s=128&g=1", "display_name": "Dbz", "link": "https://stackoverflow.com/users/625354/dbz"}, "reply_to_user": {"reputation": 207, "user_id": 4266982, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/bc800626f82111c8f9123a9ef144433f?s=128&d=identicon&r=PG&f=1", "display_name": "Keren", "link": "https://stackoverflow.com/users/4266982/keren"}, "edited": false, "score": 0, "creation_date": 1447896529, "post_id": 33792313, "comment_id": 55354209, "body": "You can also use <code>new_array.push(number ** 2)</code>, but this is shorter!"}], "tags": [], "owner": {"reputation": 2623, "user_id": 625354, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/xc5hf.jpg?s=128&g=1", "display_name": "Dbz", "link": "https://stackoverflow.com/users/625354/dbz"}, "is_accepted": true, "score": 3, "last_activity_date": 1447888644, "last_edit_date": 1447888644, "creation_date": 1447888336, "answer_id": 33792313, "question_id": 33792081, "link": "https://stackoverflow.com/questions/33792081/replace-array-using-each-method/33792313#33792313", "title": "Replace array using `each` method", "body": "<p>The reason your code will not work is because each time you loop to a number in <code>array</code>, you create a new array, add the square of the number to your new array, and then return out of your function! There are two issues here. First off, you need to create the new array before <code>each</code>ing through <code>array</code>. Secondly, it's important to not return out of your function until you have looped through all of the numbers in <code>array</code>. In your current function, you will only ever loop through the first element of <code>array</code>, and then return out of the <code>square_array</code> function.</p>\n\n<pre><code>def square_array(array)\n  new_array = []  \n  array.each { |number| new_array &lt;&lt; number ** 2 } # Shorthand syntax for a do-block\n  new_array # Return keyword is not necessary in the last line of a method\nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2403, "user_id": 69926, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a5d5270f5f3cb32c9e9025123adcf36d?s=128&d=identicon&r=PG", "display_name": "Marcin Urbanski", "link": "https://stackoverflow.com/users/69926/marcin-urbanski"}, "is_accepted": false, "score": 1, "last_activity_date": 1447929641, "creation_date": 1447929641, "answer_id": 33801561, "question_id": 33792081, "link": "https://stackoverflow.com/questions/33792081/replace-array-using-each-method/33801561#33801561", "title": "Replace array using `each` method", "body": "<pre><code>def square_array(array)\n  array.each_with_object([]) do |number, new_array|\n    new_array &lt;&lt; number ** 2\n  end\nend\n</code></pre>\n"}], "owner": {"reputation": 207, "user_id": 4266982, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/bc800626f82111c8f9123a9ef144433f?s=128&d=identicon&r=PG&f=1", "display_name": "Keren", "link": "https://stackoverflow.com/users/4266982/keren"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 319, "favorite_count": 0, "accepted_answer_id": 33792313, "answer_count": 2, "score": 0, "last_activity_date": 1447929641, "creation_date": 1447887374, "last_edit_date": 1447910491, "question_id": 33792081, "link": "https://stackoverflow.com/questions/33792081/replace-array-using-each-method", "title": "Replace array using `each` method", "body": "<p>I have been given an assignment to take each number in an array, square it, and return it using the <code>each</code> method (specifically not <code>collect</code>, <code>map</code>, or <code>inject</code>). My code is below,</p>\n\n<pre><code>def square_array(array)\n  array.each do |number|\n    new_number = number ** 2\n    new_array = []\n    new_array.push (new_number)\n    return new_array\n  end\nend\n</code></pre>\n\n<p>but this only returns one number, not <code>each</code> number in an array. Any thoughts on how to do this?</p>\n"}, {"tags": ["mysql", "ruby-on-rails", "ruby", "activerecord"], "comments": [{"owner": {"reputation": 6165, "user_id": 2697183, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/65255fe741b95ba0c641d96ea6750ea9?s=128&d=identicon&r=PG&f=1", "display_name": "AbM", "link": "https://stackoverflow.com/users/2697183/abm"}, "edited": false, "score": 2, "creation_date": 1447885465, "post_id": 33791392, "comment_id": 55350339, "body": "Can you show how you are serializing the countries? Try passing an alias to the translation name <code>countries = Country.select(&#39;countries.id, countries.short_code, country_translations.name as name&#39;)</code> and use <code>country[&quot;name&quot;]</code> when looping over countries."}, {"owner": {"reputation": 2256, "user_id": 694693, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/kSGHN.jpg?s=128&g=1", "display_name": "zapico", "link": "https://stackoverflow.com/users/694693/zapico"}, "reply_to_user": {"reputation": 6165, "user_id": 2697183, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/65255fe741b95ba0c641d96ea6750ea9?s=128&d=identicon&r=PG&f=1", "display_name": "AbM", "link": "https://stackoverflow.com/users/2697183/abm"}, "edited": false, "score": 0, "creation_date": 1447886425, "post_id": 33791392, "comment_id": 55350742, "body": "I&#39;m using ActiveModel serializer, but I can reproduce it too by getting <code>countries.first</code>, <code>countries.second</code>... each time it runs a new query..."}], "answers": [{"comments": [{"owner": {"reputation": 2256, "user_id": 694693, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/kSGHN.jpg?s=128&g=1", "display_name": "zapico", "link": "https://stackoverflow.com/users/694693/zapico"}, "edited": false, "score": 0, "creation_date": 1447887760, "post_id": 33791941, "comment_id": 55351274, "body": "Thanks for your answer.  It seems a good point but I&#39;ve tried it and I&#39;m still getting lots of unexpected fields: <code>&quot;countries&quot;: [     {       &quot;id&quot;: 1,       &quot;country_code&quot;: &quot;TUN&quot;,       &quot;name&quot;: &quot;Tunisia&quot;,       &quot;language&quot;: &quot;Arabic&quot;,       &quot;currency&quot;: &quot;Tunisian dinar&quot;,       &quot;capital&quot;: &quot;Tunis&quot;,       &quot;slug&quot;: &quot;tunisia&quot;     },</code>"}, {"owner": {"reputation": 121, "user_id": 5573098, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Nq--IMJ8WM0/AAAAAAAAAAI/AAAAAAAAAdU/YalwtY7AsGQ/photo.jpg?sz=128", "display_name": "Brad Nauta", "link": "https://stackoverflow.com/users/5573098/brad-nauta"}, "reply_to_user": {"reputation": 2256, "user_id": 694693, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/kSGHN.jpg?s=128&g=1", "display_name": "zapico", "link": "https://stackoverflow.com/users/694693/zapico"}, "edited": false, "score": 0, "creation_date": 1447888301, "post_id": 33791941, "comment_id": 55351488, "body": "Without seeing any code: if you&#39;re using ActiveModel serializer you probably have a line like <code>attributes :id, :short_code, :name</code>. You&#39;ll need to specify (in our case) a <code>country_translation_name</code> attribute and likely access it using <code>object.country_translation_name</code>. See <a href=\"https://github.com/rails-api/active_model_serializers#overriding-attribute-methods\" rel=\"nofollow noreferrer\">documentation</a>"}], "tags": [], "owner": {"reputation": 121, "user_id": 5573098, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Nq--IMJ8WM0/AAAAAAAAAAI/AAAAAAAAAdU/YalwtY7AsGQ/photo.jpg?sz=128", "display_name": "Brad Nauta", "link": "https://stackoverflow.com/users/5573098/brad-nauta"}, "is_accepted": false, "score": 1, "last_activity_date": 1447886847, "last_edit_date": 1495540313, "creation_date": 1447886847, "answer_id": 33791941, "question_id": 33791392, "link": "https://stackoverflow.com/questions/33791392/includes-joins-and-select-in-rails-4/33791941#33791941", "title": "Includes, joins and select in rails 4", "body": "<p>Seems that you're calling <code>country.name</code> and expecting the <code>name</code> <em>attribute</em> from the ActiveRecord result, whereas the globalize gem is calling the <code>name</code> <em>method</em> - which fires the n+1.</p>\n\n<p>Using ActiveRecord's <a href=\"http://apidock.com/rails/ActiveRecord/QueryMethods/includes\" rel=\"nofollow noreferrer\">includes</a> method is one way to address the n+1 as you've mentioned, but has the nasty side effect of negating <code>select</code> statements and building larger ActiveRecord::Relation objects than are required. Plus, you're already selecting the fields you need the efficient way.</p>\n\n<p><a href=\"https://stackoverflow.com/users/2697183/abm\">AbM's comment</a> above points to the solution; however <code>country_translations.name</code> is already aliased as <code>name</code> in your query, for clarification I would suggest something like:</p>\n\n<pre><code>countries = Country.select([\n  'countries.id', \n  'countries.short_code',\n  'country_translations.name AS country_translation_name'\n  ])\n</code></pre>\n\n<p>When iterating over <code>countries</code>, you can now call:</p>\n\n<pre><code>country.id                       # =&gt; 840\ncountry.short_code               # =&gt; \"US\"\ncountry.country_translation_name # =&gt; \"United States of America\"\n</code></pre>\n"}], "owner": {"reputation": 2256, "user_id": 694693, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/kSGHN.jpg?s=128&g=1", "display_name": "zapico", "link": "https://stackoverflow.com/users/694693/zapico"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 329, "favorite_count": 1, "answer_count": 1, "score": 2, "last_activity_date": 1447886847, "creation_date": 1447884494, "question_id": 33791392, "link": "https://stackoverflow.com/questions/33791392/includes-joins-and-select-in-rails-4", "title": "Includes, joins and select in rails 4", "body": "<p>I'm trying to get a really simple query with rails 4 but I'm facing unexpected issues...</p>\n\n<p>I have a <code>Country</code> model with a translations table (via <a href=\"https://github.com/globalize/globalize\" rel=\"nofollow\">globalize gem</a>). I want to get every country name in the current locale, the country id and a <code>short_code</code> I've stored in my <code>Country</code> model.</p>\n\n<p>My first approach to this was this sentence:</p>\n\n<pre><code>countries = Country.select('countries.id, countries.short_code,\n        country_translations.name').joins(:translations)\n</code></pre>\n\n<p>This generates this SQL:</p>\n\n<pre><code>SELECT countries.id, countries.short_code, country_translations.name \n    FROM `countries` INNER JOIN `country_translations` \n    ON `country_translations`.`country_id` = `countries`.`id`\n</code></pre>\n\n<p>That seems to be a correct query and it gets the data that I want if I run it in a db console. The problem comes because I need to serialize <code>countries</code>. It runs a query for each country:</p>\n\n<pre><code>SELECT `country_translations`.* FROM `country_translations` WHERE `country_translations`.`country_id` = 1  [[\"country_id\", 1]]\n[...]\nSELECT `country_translations`.* FROM `country_translations` WHERE `country_translations`.`country_id` = 238  [[\"country_id\", 238]]\nSELECT `country_translations`.* FROM `country_translations` WHERE `country_translations`.`country_id` = 239  [[\"country_id\", 239]]\n</code></pre>\n\n<p>To avoid the n+1 problem, I try to <code>include</code> translations on query:</p>\n\n<pre><code>countries = Country.select('countries.id, countries.short_code, \n    country_translations.name').includes(:translations).joins(:translations)\n</code></pre>\n\n<p>This works like a charm and returns everything in just one query. The problem is it gets every attribute from <code>country</code> and <code>country_translations</code> too, ignoring the select statement!</p>\n\n<pre><code>SELECT countries.id, countries.short_code, country_translations.name, \n    `countries`.`id` AS t0_r0, `countries`.`population` AS t0_r1,\n    `countries`.`short_code` AS t0_r2, \n    `countries`.`lat` AS t0_r3,\n    `countries`.`lng` AS t0_r4, \n    `countries`.`range` AS t0_r5,\n    `countries`.`tilt` AS t0_r6, \n    `countries`.`heading` AS t0_r7,\n    `countries`.`country_code_short` AS t0_r8, \n    `countries`.`date_format` AS t0_r9, \n    ...\n    `countries`.`created_at` AS t0_r12, \n    `countries`.`updated_at` AS t0_r13,\n    `country_translations`.`id` AS t1_r0, \n    `country_translations`.`country_id` AS t1_r1, \n    `country_translations`.`locale` AS t1_r2, \n    `country_translations`.`created_at` AS t1_r3, \n    `country_translations`.`updated_at` AS t1_r4, \n    `country_translations`.`name` AS t1_r5, \n    `country_translations`.`language` AS t1_r6, \n    `country_translations`.`currency` AS t1_r7, \n    `country_translations`.`capital` AS t1_r8, \n    `country_translations`.`slug` AS t1_r9 \n    FROM `countries` \n    INNER JOIN `country_translations` \n    ON `country_translations`.`country_id` = `countries`.`id`\n</code></pre>\n\n<p>This brings another problem because serialization is more complex with so many fields...</p>\n\n<p>What am I missing? How can I get just those three fields I need?</p>\n"}, {"tags": ["ruby", "dll", "libffi", "fiddle"], "comments": [{"owner": {"reputation": 311, "user_id": 1329934, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4a8c9663603344787bfc45628ac0326a?s=128&d=identicon&r=PG", "display_name": "jellymann", "link": "https://stackoverflow.com/users/1329934/jellymann"}, "edited": false, "score": 1, "creation_date": 1488098007, "post_id": 33791284, "comment_id": 72074201, "body": "In my experience I haven&#39;t been able to get Fiddle to automagically find my DLL files on any system other than MacOS.  On Linux, I&#39;ve used pkg-config in the past, but that&#39;s not friendly to non-devs who won&#39;t have pkg-config. I then used ldconfig directly.  On Windows, I wrote a ruby script that searches for the DLL in the current working directory, then Windows/System32, then the Windows folder itself. That seems to be the search order of most Windows apps."}], "answers": [{"tags": [], "owner": {"reputation": 2181, "user_id": 4027338, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/gzGPW.png?s=128&g=1", "display_name": "marsh", "link": "https://stackoverflow.com/users/4027338/marsh"}, "is_accepted": true, "score": 0, "last_activity_date": 1474289878, "creation_date": 1474289878, "answer_id": 39573816, "question_id": 33791284, "link": "https://stackoverflow.com/questions/33791284/ruby-fiddle-dll-search-path/39573816#39573816", "title": "Ruby Fiddle dll search Path", "body": "<p>The only solution I got to work was writing a small kernel32.dll library and calling AddDllDirectory from within it. </p>\n"}], "owner": {"reputation": 2181, "user_id": 4027338, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/gzGPW.png?s=128&g=1", "display_name": "marsh", "link": "https://stackoverflow.com/users/4027338/marsh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 464, "favorite_count": 0, "accepted_answer_id": 39573816, "answer_count": 1, "score": 3, "last_activity_date": 1474289878, "creation_date": 1447884110, "question_id": 33791284, "link": "https://stackoverflow.com/questions/33791284/ruby-fiddle-dll-search-path", "title": "Ruby Fiddle dll search Path", "body": "<p>I am trying to load a dll using the following fiddle code: ( If there is a easier way to load a dll and call a function on it that would solve my problem I am happy to hear it )</p>\n\n<pre><code>require 'fiddle' unless defined?(Fiddle)\nrequire 'fiddle/import' unless defined?(Fiddle::Importer)\nextend Fiddle::Importer\ndlload \"Foo.dll\"\n</code></pre>\n\n<p><code>dlload \"C:/Folder/Foo.dll\"</code> works like I want. But the problem is that Foo.dll is a c++ dll that requires several other dlls in various locations.</p>\n\n<p>How do I go about just calling <code>dlload \"Foo.dll\"</code> without a full path. In short how do I add a list of directories to the Ruby dll search path?</p>\n\n<p>I have tried the following:</p>\n\n<pre><code>$LOAD_PATH.unshift(\"C:/Folder\")\nENV['RUBYLIB'] = \"C:/Folder\"\nENV['LD_LIBRARY_PATH'] = \"C:/Folder\"\n</code></pre>\n\n<p>The ruby interpreter is running inside another program (Sketchup), so my environment is restricted. </p>\n"}, {"tags": ["ruby-on-rails", "ruby", "json"], "comments": [{"owner": {"reputation": 120, "user_id": 4999552, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c292f4d4a4ea188add2643c17eba6bf0?s=128&d=identicon&r=PG&f=1", "display_name": "Eupatoria", "link": "https://stackoverflow.com/users/4999552/eupatoria"}, "edited": false, "score": 0, "creation_date": 1447883821, "post_id": 33791150, "comment_id": 55349494, "body": "What do you mean by &#39;adding a name of Locations&#39;? Do you want to add extra content to your JSON object? It&#39;s not entirely clear what the goal is here."}, {"owner": {"reputation": 772, "user_id": 3500477, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/hd7QR.jpg?s=128&g=1", "display_name": "Andrew Walz", "link": "https://stackoverflow.com/users/3500477/andrew-walz"}, "reply_to_user": {"reputation": 120, "user_id": 4999552, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c292f4d4a4ea188add2643c17eba6bf0?s=128&d=identicon&r=PG&f=1", "display_name": "Eupatoria", "link": "https://stackoverflow.com/users/4999552/eupatoria"}, "edited": false, "score": 0, "creation_date": 1447884071, "post_id": 33791150, "comment_id": 55349626, "body": "I have edited the post to to show the ideal format"}, {"owner": {"reputation": 120, "user_id": 4999552, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c292f4d4a4ea188add2643c17eba6bf0?s=128&d=identicon&r=PG&f=1", "display_name": "Eupatoria", "link": "https://stackoverflow.com/users/4999552/eupatoria"}, "edited": false, "score": 0, "creation_date": 1447884355, "post_id": 33791150, "comment_id": 55349783, "body": "You just need to modify your JSON object in such a way that it has a key of &#39;locations&#39; and a value is going to be the rest of it."}], "answers": [{"comments": [{"owner": {"reputation": 772, "user_id": 3500477, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/hd7QR.jpg?s=128&g=1", "display_name": "Andrew Walz", "link": "https://stackoverflow.com/users/3500477/andrew-walz"}, "edited": false, "score": 0, "creation_date": 1447885061, "post_id": 33791441, "comment_id": 55350144, "body": "Thanks for the response, but this results in a SyntaxError: syntax error, unexpected &#39;:&#39;, expecting &#39;}&#39; respond_with {locations: @locations} ^"}, {"owner": {"reputation": 772, "user_id": 3500477, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/hd7QR.jpg?s=128&g=1", "display_name": "Andrew Walz", "link": "https://stackoverflow.com/users/3500477/andrew-walz"}, "edited": false, "score": 0, "creation_date": 1447885139, "post_id": 33791441, "comment_id": 55350185, "body": "It should be response_with locations: @locations. The curly braces are not required"}], "tags": [], "owner": {"reputation": 887, "user_id": 4664086, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9ca859ce2ca107d4a1110965ef40d7f6?s=128&d=identicon&r=PG&f=1", "display_name": "Damiano Stoffie", "link": "https://stackoverflow.com/users/4664086/damiano-stoffie"}, "is_accepted": true, "score": 2, "last_activity_date": 1447887047, "last_edit_date": 1447887047, "creation_date": 1447884684, "answer_id": 33791441, "question_id": 33791150, "link": "https://stackoverflow.com/questions/33791150/add-identifier-for-json-array-in-ruby-on-rails/33791441#33791441", "title": "Add identifier for JSON array in Ruby on Rails", "body": "<pre><code>def index\n  @locations = Location.all\n  respond_with locations: @locations\nend\n</code></pre>\n\n<p>Results in proper output</p>\n"}, {"tags": [], "owner": {"reputation": 120, "user_id": 4999552, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c292f4d4a4ea188add2643c17eba6bf0?s=128&d=identicon&r=PG&f=1", "display_name": "Eupatoria", "link": "https://stackoverflow.com/users/4999552/eupatoria"}, "is_accepted": false, "score": 0, "last_activity_date": 1447888927, "last_edit_date": 1447888927, "creation_date": 1447885600, "answer_id": 33791654, "question_id": 33791150, "link": "https://stackoverflow.com/questions/33791150/add-identifier-for-json-array-in-ruby-on-rails/33791654#33791654", "title": "Add identifier for JSON array in Ruby on Rails", "body": "<p>Just work with your <code>@locations</code>.</p>\n\n<p>You can do something like:</p>\n\n<pre><code>@new_locations = {}\n@new_locations = {'locations' =&gt; @locations}\n</code></pre>\n"}], "owner": {"reputation": 772, "user_id": 3500477, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/hd7QR.jpg?s=128&g=1", "display_name": "Andrew Walz", "link": "https://stackoverflow.com/users/3500477/andrew-walz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 57, "favorite_count": 0, "accepted_answer_id": 33791441, "answer_count": 2, "score": 0, "last_activity_date": 1447888927, "creation_date": 1447883607, "last_edit_date": 1447884038, "question_id": 33791150, "link": "https://stackoverflow.com/questions/33791150/add-identifier-for-json-array-in-ruby-on-rails", "title": "Add identifier for JSON array in Ruby on Rails", "body": "<p>I am looking for a way to add an identifier to my JSON output so it can be more easily parsed. Currently, the output is :</p>\n\n<pre><code>[  \n   {  \n      \"id\":9,\n      \"name\":\"Test Location\",\n      \"description\":\"Test Description\",\n      \"address\":\"123 Fake Street\",\n      \"latitude\":-85.0,\n      \"longitude\":-101.10101,\n      \"created_at\":\"2015-11-15T21:25:08.643Z\",\n      \"updated_at\":\"2015-11-15T21:27:23.419Z\"\n   },\n   {  \n      \"id\":10,\n      \"name\":\"Test Location\",\n      \"description\":\"testest\",\n      \"address\":\"estesets\",\n      \"latitude\":1.0,\n      \"longitude\":1.0,\n      \"created_at\":\"2015-11-15T22:05:39.224Z\",\n      \"updated_at\":\"2015-11-15T22:05:39.224Z\"\n   }\n]\n</code></pre>\n\n<p>The ideal output would be:</p>\n\n<pre><code>{ locations: \n  [  \n       {  \n          \"id\":9,\n          \"name\":\"Test Location\",\n          \"description\":\"Test Description\",\n          \"address\":\"123 Fake Street\",\n          \"latitude\":-85.0,\n          \"longitude\":-101.10101,\n          \"created_at\":\"2015-11-15T21:25:08.643Z\",\n          \"updated_at\":\"2015-11-15T21:27:23.419Z\"\n       },\n       {  \n          \"id\":10,\n          \"name\":\"Test Location\",\n          \"description\":\"testest\",\n          \"address\":\"estesets\",\n          \"latitude\":1.0,\n          \"longitude\":1.0,\n          \"created_at\":\"2015-11-15T22:05:39.224Z\",\n          \"updated_at\":\"2015-11-15T22:05:39.224Z\"\n       }\n    ]\n}\n</code></pre>\n\n<p>My current controller is:</p>\n\n<pre><code>module Api\n  module V1\n    class LocationsController &lt; ApplicationController\nunless Rails.env.test?\n      before_filter :restrict_access\n    end\n      respond_to :json\n\n      def index\n        @locations = Location.all\n        respond_with @locations\n      end\n\n      private\n\n      def restrict_access\n        api_key = ApiKey.find_by_access_token(params[:access_token])\n        head :unauthorized unless api_key\n      end\n    end\n  end\nend\n</code></pre>\n\n<p>I would like for it to have a name of Locations so I can more easily parse it. Thanks for the help!</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 45754, "user_id": 17410, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1022b779bdc1ddef7cd9d29abd70ed15?s=128&d=identicon&r=PG", "display_name": "zetetic", "link": "https://stackoverflow.com/users/17410/zetetic"}, "edited": false, "score": 0, "creation_date": 1447894665, "post_id": 33790960, "comment_id": 55353661, "body": "What version of Rails?"}, {"owner": {"reputation": 6076, "user_id": 4044009, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/42e57031eb7d02c47c9afaecfc878638?s=128&d=identicon&r=PG&f=1", "display_name": "Neil", "link": "https://stackoverflow.com/users/4044009/neil"}, "reply_to_user": {"reputation": 45754, "user_id": 17410, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1022b779bdc1ddef7cd9d29abd70ed15?s=128&d=identicon&r=PG", "display_name": "zetetic", "link": "https://stackoverflow.com/users/17410/zetetic"}, "edited": false, "score": 0, "creation_date": 1447895887, "post_id": 33790960, "comment_id": 55354047, "body": "@zetetic Rails 4.1.1"}, {"owner": {"reputation": 45754, "user_id": 17410, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1022b779bdc1ddef7cd9d29abd70ed15?s=128&d=identicon&r=PG", "display_name": "zetetic", "link": "https://stackoverflow.com/users/17410/zetetic"}, "edited": false, "score": 1, "creation_date": 1447896811, "post_id": 33790960, "comment_id": 55354281, "body": "I ask because old versions of Rails would sometimes appear to return an Array when actually they were returning a relation, but that does not appear to be the issue here. Adding <code>select</code> to the clause should not affect what is returned."}, {"owner": {"reputation": 6076, "user_id": 4044009, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/42e57031eb7d02c47c9afaecfc878638?s=128&d=identicon&r=PG&f=1", "display_name": "Neil", "link": "https://stackoverflow.com/users/4044009/neil"}, "reply_to_user": {"reputation": 45754, "user_id": 17410, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1022b779bdc1ddef7cd9d29abd70ed15?s=128&d=identicon&r=PG", "display_name": "zetetic", "link": "https://stackoverflow.com/users/17410/zetetic"}, "edited": false, "score": 0, "creation_date": 1447898268, "post_id": 33790960, "comment_id": 55354663, "body": "@zetetic do you know how to do this and return an active relation?"}, {"owner": {"reputation": 3700, "user_id": 537716, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3fbe81f6942a6edb382054b2491837f8?s=128&d=identicon&r=PG", "display_name": "charlysisto", "link": "https://stackoverflow.com/users/537716/charlysisto"}, "edited": false, "score": 0, "creation_date": 1447950410, "post_id": 33790960, "comment_id": 55383847, "body": "It should not return an array. In what context did you notice it was in array ? In the console for example it will trigger inspect and return an array, but it&#39;s actually an active_relation...."}, {"owner": {"reputation": 45754, "user_id": 17410, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1022b779bdc1ddef7cd9d29abd70ed15?s=128&d=identicon&r=PG", "display_name": "zetetic", "link": "https://stackoverflow.com/users/17410/zetetic"}, "reply_to_user": {"reputation": 3700, "user_id": 537716, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3fbe81f6942a6edb382054b2491837f8?s=128&d=identicon&r=PG", "display_name": "charlysisto", "link": "https://stackoverflow.com/users/537716/charlysisto"}, "edited": false, "score": 0, "creation_date": 1447959220, "post_id": 33790960, "comment_id": 55389536, "body": "@charlysisto for me in 4.2.1 it returns a relation, not an array. Might depend on the Rails version, but AFAIK that behavior went away quite some time ago. There may some other factor due to the Rails configuration/gems that causes the effect Neil is seeing."}], "answers": [{"tags": [], "owner": {"reputation": 48635, "user_id": 6742, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/xPawo.png?s=128&g=1", "display_name": "David Aldridge", "link": "https://stackoverflow.com/users/6742/david-aldridge"}, "is_accepted": false, "score": 0, "last_activity_date": 1447883199, "creation_date": 1447883199, "answer_id": 33791042, "question_id": 33790960, "link": "https://stackoverflow.com/questions/33790960/rails-scope-is-returning-an-array-instead-of-an-activerecord-relation/33791042#33791042", "title": "Rails Scope is returning an array instead of an ActiveRecord_Relation", "body": "<p>I would build the full name in Rails, but concatenate in the where clause to be able to query on it.</p>\n\n<pre><code>{joins(:contacts)\n.where(\"CONCAT('first_name', ' ', 'last_name') LIKE ?\", contact_name)}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 6076, "user_id": 4044009, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/42e57031eb7d02c47c9afaecfc878638?s=128&d=identicon&r=PG&f=1", "display_name": "Neil", "link": "https://stackoverflow.com/users/4044009/neil"}, "is_accepted": true, "score": 0, "last_activity_date": 1447947855, "last_edit_date": 1447947855, "creation_date": 1447941841, "answer_id": 33806092, "question_id": 33790960, "link": "https://stackoverflow.com/questions/33790960/rails-scope-is-returning-an-array-instead-of-an-activerecord-relation/33806092#33806092", "title": "Rails Scope is returning an array instead of an ActiveRecord_Relation", "body": "<p>This worked for me:</p>\n\n<pre><code>#models/agency.rb\nclass Agency &lt; ActiveRecord::Base\n  has_many :contacts, dependent: :destroy\n  scope :by_contact_name, -&gt; (name){joins(:contacts).merge(Contact.by_name(name))}\nend\n\n#models/contact.rb\nclass Contact &lt; ActiveRecord::Base\n  belongs_to :agency\n  scope :by_name, -&gt; (full_name){where(\"CONCAT(first_name,' ',last_name) LIKE ?\", \"%#{full_name}%\")}\nend\n</code></pre>\n\n<p><strong>Usage</strong>:</p>\n\n<pre><code>@agencies = Agency.by_contact_name(\"joe s\") \n</code></pre>\n"}], "owner": {"reputation": 6076, "user_id": 4044009, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/42e57031eb7d02c47c9afaecfc878638?s=128&d=identicon&r=PG&f=1", "display_name": "Neil", "link": "https://stackoverflow.com/users/4044009/neil"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1078, "favorite_count": 0, "accepted_answer_id": 33806092, "answer_count": 2, "score": 0, "last_activity_date": 1447947855, "creation_date": 1447882896, "last_edit_date": 1447898428, "question_id": 33790960, "link": "https://stackoverflow.com/questions/33790960/rails-scope-is-returning-an-array-instead-of-an-activerecord-relation", "title": "Rails Scope is returning an array instead of an ActiveRecord_Relation", "body": "<p>An <code>Agency</code> has_many <code>Contacts</code>.  In a search form: A user enters a name of a contact.  Once submitted, the app returns all Agencies that have an associated Contact with that entered name.</p>\n\n<p>Two Models:</p>\n\n<pre><code>#models/agency.rb\nclass Agency &lt; ActiveRecord::Base\n  has_many :contacts, dependent: :destroy\n\n    scope :by_contact_name, -&gt;(contact_name)\n                              {joins(:contacts)\n                               .select(\"CONCAT('first_name', ' ', 'last_name')AS 'full_name')\")\n                               .where(\"full_name LIKE ?\", contact_name) \n                              }\nend\n\n#models/contact.rb\nclass Contact &lt; ActiveRecord::Base\n  belongs_to :agency\nend\n</code></pre>\n\n<p>So basically: A <code>contact</code> has the attributes: <code>first_name</code>, and <code>last_name</code>.  In the search form, The prompt to the user is: <strong>Enter the Contact's Full Name</strong>.  Then in the Controller, I call that Agency scope of <code>by_contact_name</code>, pass in the value that the user entered, join the tables, create that column of <code>full_name</code> because it doesn't exist in the database, and then query by it with <code>LIKE</code>.</p>\n\n<p>I hope that makes sense!  The scope works, but the issue is that it returns an array when I want it to return an ActiveRecord_Relation.  </p>\n\n<p>I think the issue is that I have <code>select</code> within the scope, but I don't know any other way to do it. </p>\n\n<p><strong>My overall question is this:</strong></p>\n\n<p>If I call <code>Agency.all.by_contact_name(\"Joe\").class</code>, how can I make it so that it returns <code>Agency::ActiveRecord_Relation</code> instead of: <code>Array</code>?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "rspec", "gem", "feature-file"], "comments": [{"owner": {"reputation": 6178, "user_id": 3307520, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/jWlYC.jpg?s=128&g=1", "display_name": "Cyzanfar", "link": "https://stackoverflow.com/users/3307520/cyzanfar"}, "edited": false, "score": 0, "creation_date": 1447881459, "post_id": 33790464, "comment_id": 55348156, "body": "where are you using <code>expect</code>? show some code YOU wrote."}, {"owner": {"reputation": 33, "user_id": 4847217, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/593ab746ad994bc7803414cc8f4ff28c?s=128&d=identicon&r=PG&f=1", "display_name": "ownJava", "link": "https://stackoverflow.com/users/4847217/ownjava"}, "reply_to_user": {"reputation": 6178, "user_id": 3307520, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/jWlYC.jpg?s=128&g=1", "display_name": "Cyzanfar", "link": "https://stackoverflow.com/users/3307520/cyzanfar"}, "edited": false, "score": 0, "creation_date": 1447884068, "post_id": 33790464, "comment_id": 55349625, "body": "I am using  expect().to for verifying result which require &#39;rspec&#39;. This is my step definition Then(/^I see title in loop qual page &quot;(.*?)&quot;$/) do |message| expect(loop_qual_page.title).to include message end"}], "answers": [{"comments": [{"owner": {"reputation": 33, "user_id": 4847217, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/593ab746ad994bc7803414cc8f4ff28c?s=128&d=identicon&r=PG&f=1", "display_name": "ownJava", "link": "https://stackoverflow.com/users/4847217/ownjava"}, "edited": false, "score": 0, "creation_date": 1447884193, "post_id": 33790621, "comment_id": 55349691, "body": "This is what I get after I try to run                                                             2.1.6 :001 &gt; bundle install NameError: undefined local variable or method <code>install&#39; for main:Object \tfrom (irb):1 \tfrom &#47;Users&#47;Xyz&#47;.rvm&#47;rubies&#47;ruby-2.1.6&#47;bin&#47;irb:11:in </code>&lt;main&gt;&#39; 2.1.6 :002 &gt; rails generate rspec:install NameError: undefined local variable or method <code>install&#39; for main:Object \tfrom (irb):2 \tfrom &#47;Users&#47;Xyz&#47;.rvm&#47;rubies&#47;ruby-2.1.6&#47;bin&#47;irb:11:in </code>&lt;main&gt;&#39; 2.1.6 :003 &gt; exit"}, {"owner": {"reputation": 1958, "user_id": 2803062, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/ed9b78fe5151cbc40739c7db14fbecf7?s=128&d=identicon&r=PG", "display_name": "bosskovic", "link": "https://stackoverflow.com/users/2803062/bosskovic"}, "reply_to_user": {"reputation": 33, "user_id": 4847217, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/593ab746ad994bc7803414cc8f4ff28c?s=128&d=identicon&r=PG&f=1", "display_name": "ownJava", "link": "https://stackoverflow.com/users/4847217/ownjava"}, "edited": false, "score": 0, "creation_date": 1447884509, "post_id": 33790621, "comment_id": 55349879, "body": "try this: &#39;rvm @global do gem install bundler&#39; and then try again &#39;bundle install&#39;. Your gems are not installed, that seems to be a problem. The first command will install a global bundler gem, which will enable you to install other gems in the gemset (if you are using one) or globally, if you aren&#39;t."}], "tags": [], "owner": {"reputation": 1958, "user_id": 2803062, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/ed9b78fe5151cbc40739c7db14fbecf7?s=128&d=identicon&r=PG", "display_name": "bosskovic", "link": "https://stackoverflow.com/users/2803062/bosskovic"}, "is_accepted": true, "score": 0, "last_activity_date": 1447881622, "creation_date": 1447881622, "answer_id": 33790621, "question_id": 33790464, "link": "https://stackoverflow.com/questions/33790464/unable-to-identify-the-object-from-ruby-library/33790621#33790621", "title": "Unable to identify the object from ruby library", "body": "<p>Please try this if you haven't already:</p>\n\n<p>run <code>bundle install</code></p>\n\n<p>If you do not have a spec helper or rails helper in the spec directory, run this: <code>rails generate rspec:install</code></p>\n"}], "owner": {"reputation": 33, "user_id": 4847217, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/593ab746ad994bc7803414cc8f4ff28c?s=128&d=identicon&r=PG&f=1", "display_name": "ownJava", "link": "https://stackoverflow.com/users/4847217/ownjava"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 180, "favorite_count": 0, "accepted_answer_id": 33790621, "answer_count": 1, "score": 0, "last_activity_date": 1447881761, "creation_date": 1447881104, "last_edit_date": 1447881761, "question_id": 33790464, "link": "https://stackoverflow.com/questions/33790464/unable-to-identify-the-object-from-ruby-library", "title": "Unable to identify the object from ruby library", "body": "<p>I recently updated the OS to ELcaptain and ever since my feature files are failing and not identifying object.</p>\n\n<p>This is the error I get in terminal when I run a file:</p>\n\n<pre><code>cannot load such file -- rspec (LoadError)\n/Users/xyz/.rvm/rubies/ruby-2.1.6/lib/ruby/site_ruby/2.1.0/rubygems/core_ext/kernel_require.rb:128:in `require'\n/Users/xyz/.rvm/rubies/ruby-2.1.6/lib/ruby/site_ruby/2.1.0/rubygems/core_ext/kernel_require.rb:128:in `rescue in require'\n/Users/xyz/.rvm/rubies/ruby-2.1.6/lib/ruby/site_ruby/2.1.0/rubygems/core_ext/kernel_require.rb:39:in `require'\n/Users/xyz/ttv-cucumber/helper/auto_loader.rb:14:in `&lt;top (required)&gt;'\n/Users/xyz/ttv-cucumber/flow-combo-selection/features/support/common.rb:1:in `require_relative'\n/Users/xyzr/ttv-cucumber/flow-combo-selection/features/support/common.rb:1:in `&lt;top (required)&gt;'\n/Users/xyz/.rvm/gems/ruby-2.1.6/gems/cucumber-2.1.0/lib/cucumber/rb_support/rb_language.rb:99:in `load'\n/Users/xyz/.rvm/gems/ruby-2.1.6/gems/cucumber-2.1.0/lib/cucumber/rb_support/rb_language.rb:99:in `load_code_file'\n/Users/xyz/.rvm/gems/ruby-2.1.6/gems/cucumber-2.1.0/lib/cucumber/runtime/support_code.rb:232:in `load_file'\n/Users/xyz/.rvm/gems/ruby-2.1.6/gems/cucumber-2.1.0/lib/cucumber/runtime/support_code.rb:99:in `block in load_files!'\n/Users/xyz/.rvm/gems/ruby-2.1.6/gems/cucumber-2.1.0/lib/cucumber/runtime/support_code.rb:98:in `each'\n/Users/xyz/.rvm/gems/ruby-2.1.6/gems/cucumber-2.1.0/lib/cucumber/runtime/support_code.rb:98:in `load_files!'\n/Users/xyz/.rvm/gems/ruby-2.1.6/gems/cucumber-2.1.0/lib/cucumber/runtime.rb:262:in `load_step_definitions'\n/Users/xyz/.rvm/gems/ruby-2.1.6/gems/cucumber-2.1.0/lib/cucumber/runtime.rb:65:in `run!'\n/Users/xyz/.rvm/gems/ruby-2.1.6/gems/cucumber-2.1.0/lib/cucumber/cli/main.rb:32:in `execute!'\n/Users/xyz/.rvm/gems/ruby-2.1.6/gems/cucumber-2.1.0/bin/cucumber:8:in `&lt;top (required)&gt;'\n/Users/xyz/.rvm/gems/ruby-2.1.6/bin/cucumber:23:in `load'\n/Users/xyz/.rvm/gems/ruby-2.1.6/bin/cucumber:23:in `&lt;main&gt;'\n/Users/xyz/.rvm/gems/ruby-2.1.6/bin/ruby_executable_hooks:15:in `eval'\n/Users/xyz/.rvm/gems/ruby-2.1.6/bin/ruby_executable_hooks:15:in `&lt;main&gt;'\n</code></pre>\n\n<p>And on the step definitions I get this error:</p>\n\n<pre><code>undefined method `expect' for #&lt;Object:0x007fb6b1d1ac80&gt; (NoMethodError)\n</code></pre>\n\n<p>This is my gem list:</p>\n\n<pre><code>appium_lib (8.0.0, 4.1.0)\nawesome_print (1.6.1)\nbigdecimal (1.2.7, 1.2.4)\nblankslate (3.1.3, 2.1.2.4)\nbuilder (3.2.2)\nbundler-unload (1.0.2)\nchildprocess (0.5.8, 0.5.6)\nchunky_png (1.3.5, 1.3.4)\ncoderay (1.1.0)\ncucumber (2.0.0)\ncucumber-core (1.3.0, 1.1.3)\ndiff-lcs (1.2.5)\nexecutable-hooks (1.3.2)\nffi (1.9.10, 1.9.8)\ngem-wrappers (1.2.7)\ngherkin (2.12.2)\ngherkin3 (3.1.2)\nio-console (0.4.3)\njar_wrapper (0.1.8)\njson (1.8.3, 1.8.1)\nmethod_source (0.8.2)\nmini_portile (0.6.2)\nminitest (5.8.2, 4.7.5)\nmulti_json (1.11.1)\nmulti_test (0.1.2)\nnokogiri (1.6.6.2)\nparslet (1.5.0)\npower_assert (0.2.6)\npry (0.10.1)\npsych (2.0.5)\nrake (10.1.0)\nrdoc (4.1.0)\nrmagick (2.15.2)\nrspec (3.3.0)\nrspec-core (3.3.0)\nrspec-expectations (3.3.0)\nrspec-mocks (3.3.0)\nrspec-support (3.3.0)\nrubygems-bundler (1.4.4)\nrubytest (0.8.1)\nrubyzip (1.1.7)\nrvm (1.11.3.9)\nselenium (0.2.11)\nselenium-cucumber (2.1.3)\nselenium-webdriver (2.45.0)\nslop (3.6.0)\ntest (1.0.0)\ntest-unit (2.1.6.0)\ntoml (0.1.2)\nwebsocket (1.2.2)\nzip (2.0.2)\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "arel"], "answers": [{"tags": [], "owner": {"reputation": 19398, "user_id": 435471, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/WvUmQ.jpg?s=128&g=1", "display_name": "Kyle Decot", "link": "https://stackoverflow.com/users/435471/kyle-decot"}, "is_accepted": true, "score": 1, "last_activity_date": 1447881880, "creation_date": 1447881880, "answer_id": 33790688, "question_id": 33790367, "link": "https://stackoverflow.com/questions/33790367/postgresql-uuid-generate-v5-using-arel/33790688#33790688", "title": "Postgresql uuid_generate_v5 using Arel", "body": "<p>Turns out that I need to use a slightly different syntax when creating my <code>SelectManager</code>:</p>\n\n<pre><code>select_statement = Arel::SelectManager.new(ActiveRecord::Base).project(uuid_generate_v5)\n</code></pre>\n"}], "owner": {"reputation": 19398, "user_id": 435471, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/WvUmQ.jpg?s=128&g=1", "display_name": "Kyle Decot", "link": "https://stackoverflow.com/users/435471/kyle-decot"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 518, "favorite_count": 0, "accepted_answer_id": 33790688, "answer_count": 1, "score": 0, "last_activity_date": 1447881897, "creation_date": 1447880763, "last_edit_date": 1447881897, "question_id": 33790367, "link": "https://stackoverflow.com/questions/33790367/postgresql-uuid-generate-v5-using-arel", "title": "Postgresql uuid_generate_v5 using Arel", "body": "<p>I'm attempting to use <a href=\"http://github.com/rails/arel\" rel=\"nofollow\">Arel</a> to construct a query like:</p>\n\n<pre><code>SELECT uuid_generate_v5(uuid_ns_url(),CONCAT('hello', 'world')) # 3fc82e1a-b051-595a-8564-27a096716d37\n</code></pre>\n\n<p>So far I have the following:</p>\n\n<pre><code>composite_keys = ['hello', 'world']\nquoted_composite_keys = composite_keys.map do |composite_key|\n  Arel::Nodes.build_quoted(composite_key)\nend\n\nconcat = Arel::Nodes::NamedFunction.new('concat', quoted_composite_keys)\nuuid_ns_url = Arel::Nodes::NamedFunction.new('uuid_ns_url', [])\nuuid_generate_v5 = Arel::Nodes::NamedFunction.new('uuid_generate_v5', [uuid_ns_url, concat]).as('uuid')\nselect_statement = Arel::SelectManager.new(ActiveRecord::Base, project: uuid_generate_v5)\n</code></pre>\n\n<p>However when doing <code>select_statement.to_sql</code> I get the following error:</p>\n\n<blockquote>\n  <p>*** RuntimeError Exception: unsupported: Hash</p>\n  \n  <p>nil</p>\n</blockquote>\n\n<p>It looks like the problem is that I'm not exactly sure what to pass to <code>select</code> in regards to what to project.</p>\n\n<p>Anyone done something similar to this using Arel?</p>\n"}, {"tags": ["ruby", "docker", "centos", "rbenv", "dockerfile"], "comments": [{"owner": {"reputation": 1407, "user_id": 889074, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/YwYtO.jpg?s=128&g=1", "display_name": "kalelc", "link": "https://stackoverflow.com/users/889074/kalelc"}, "edited": false, "score": 0, "creation_date": 1447884765, "post_id": 33789645, "comment_id": 55350002, "body": "What is the need to run for the container? you have exposed 3306, 22, 80, 3389 ports. I recommend separating your services into other containers. <a href=\"https://github.com/kalelc/docker-to-rails-with-rbenv\" rel=\"nofollow noreferrer\">example</a>"}, {"owner": {"reputation": 1407, "user_id": 889074, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/YwYtO.jpg?s=128&g=1", "display_name": "kalelc", "link": "https://stackoverflow.com/users/889074/kalelc"}, "edited": false, "score": 0, "creation_date": 1447885354, "post_id": 33789645, "comment_id": 55350287, "body": "<code>Error response from daemon: No command specified</code> required command. Example <code>docker run -i -t kalelc&#47;stack ps aux</code>"}], "answers": [{"comments": [{"owner": {"reputation": 20590, "user_id": 504963, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/xlYLo.jpg?s=128&g=1", "display_name": "Antarr Byrd", "link": "https://stackoverflow.com/users/504963/antarr-byrd"}, "edited": false, "score": 0, "creation_date": 1447878939, "post_id": 33789733, "comment_id": 55346729, "body": "I still get the same error, did you leave out an important part?"}, {"owner": {"reputation": 1407, "user_id": 889074, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/YwYtO.jpg?s=128&g=1", "display_name": "kalelc", "link": "https://stackoverflow.com/users/889074/kalelc"}, "reply_to_user": {"reputation": 20590, "user_id": 504963, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/xlYLo.jpg?s=128&g=1", "display_name": "Antarr Byrd", "link": "https://stackoverflow.com/users/504963/antarr-byrd"}, "edited": false, "score": 0, "creation_date": 1447880262, "post_id": 33789733, "comment_id": 55347457, "body": "look at my answer. I included ENV statement."}, {"owner": {"reputation": 20590, "user_id": 504963, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/xlYLo.jpg?s=128&g=1", "display_name": "Antarr Byrd", "link": "https://stackoverflow.com/users/504963/antarr-byrd"}, "edited": false, "score": 0, "creation_date": 1447882055, "post_id": 33789733, "comment_id": 55348504, "body": "I&#39;ve tried that it didn&#39;t help. I made some other changes above that did but now I get <code>Error response from daemon: No command specified</code> when running <code>docker run -it </code>"}, {"owner": {"reputation": 1407, "user_id": 889074, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/YwYtO.jpg?s=128&g=1", "display_name": "kalelc", "link": "https://stackoverflow.com/users/889074/kalelc"}, "reply_to_user": {"reputation": 20590, "user_id": 504963, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/xlYLo.jpg?s=128&g=1", "display_name": "Antarr Byrd", "link": "https://stackoverflow.com/users/504963/antarr-byrd"}, "edited": false, "score": 0, "creation_date": 1447882324, "post_id": 33789733, "comment_id": 55348666, "body": "listing containers with <code>docker ps -a</code> to check your container.To run container execute <code>docker run -it -image &#47;bin&#47;bash</code>"}, {"owner": {"reputation": 1407, "user_id": 889074, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/YwYtO.jpg?s=128&g=1", "display_name": "kalelc", "link": "https://stackoverflow.com/users/889074/kalelc"}, "reply_to_user": {"reputation": 20590, "user_id": 504963, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/xlYLo.jpg?s=128&g=1", "display_name": "Antarr Byrd", "link": "https://stackoverflow.com/users/504963/antarr-byrd"}, "edited": false, "score": 0, "creation_date": 1447885113, "post_id": 33789733, "comment_id": 55350168, "body": "I updated Dockerfile for install rbenv and Ruby dependencies. This solves the problem with rbenv. I tried it and it works :)"}], "tags": [], "owner": {"reputation": 1407, "user_id": 889074, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/YwYtO.jpg?s=128&g=1", "display_name": "kalelc", "link": "https://stackoverflow.com/users/889074/kalelc"}, "is_accepted": true, "score": 0, "last_activity_date": 1447884939, "last_edit_date": 1447884939, "creation_date": 1447878482, "answer_id": 33789733, "question_id": 33789645, "link": "https://stackoverflow.com/questions/33789645/dockerfile-fails-when-calling-rbenv/33789733#33789733", "title": "Dockerfile fails when calling rbenv", "body": "<p>Look at my Dockerfile:</p>\n\n<pre><code>FROM centos:6.6\n\nRUN yum update -y\n# Install the rbenv and Ruby dependencies\nRUN yum install git-core curl zlib1g-dev build-essential libssl-dev libreadline-dev libyaml-dev libsqlite3-dev sqlite3 libxml2-dev libxslt1-dev libcurl4-openssl-dev python-software-properties libffi-dev -y\nRUN yum install git openssl-devel openssl readline-devel readline zlib-devel zlib libxml2-devel libxml2 libxslt-devel libxslt nginx tar gcc libaio libaio-devel -y\nRUN rpm -Uvh https://opscode-omnibus-packages.s3.amazonaws.com/el/6/x86_64/chef-12.5.1-1.el6.x86_64.rpm\nRUN yum install -y openssh-server\nRUN mkdir -p /var/run/sshd\n\nRUN adduser deploy -p Password1\nRUN su - deploy\n\nRUN git clone https://github.com/sstephenson/rbenv.git /root/.rbenv\nRUN git clone https://github.com/sstephenson/ruby-build.git /root/.rbenv/plugins/ruby-build\nRUN ./root/.rbenv/plugins/ruby-build/install.sh\nENV PATH /root/.rbenv/bin:$PATH\nRUN echo 'eval \"$(rbenv init -)\"' &gt;&gt; /etc/profile.d/rbenv.sh\nRUN echo 'eval \"$(rbenv init -)\"' &gt;&gt; .bashrc\nRUN echo 'eval \"$(rbenv init -)\"' &gt;&gt; $HOME/.bash_profile\nRUN source $HOME/.bash_profile\nENV CONFIGURE_OPTS --disable-install-doc\n\nRUN rbenv install 2.2.3\nRUN rbenv global 2.2.3\nRUN bash -l -c 'gem update --system'\nRUN bash -l -c 'gem update'\nRUN bash -l -c 'gem install nokogiri -- --use-system-libraries'\nRUN bash -l -c 'gem install bundler rails-api --no-rdoc --no-ri'\n\nRUN touch /etc/sysconfig/network\n\nEXPOSE 3306\nEXPOSE 22\nEXPOSE 80\nEXPOSE 3389\n</code></pre>\n"}], "owner": {"reputation": 20590, "user_id": 504963, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/xlYLo.jpg?s=128&g=1", "display_name": "Antarr Byrd", "link": "https://stackoverflow.com/users/504963/antarr-byrd"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 732, "favorite_count": 0, "accepted_answer_id": 33789733, "answer_count": 1, "score": 0, "last_activity_date": 1447884939, "creation_date": 1447878177, "last_edit_date": 1447882433, "question_id": 33789645, "link": "https://stackoverflow.com/questions/33789645/dockerfile-fails-when-calling-rbenv", "title": "Dockerfile fails when calling rbenv", "body": "<p>I'm trying to create a Dockerfile that configures my ruby environment. But it is failing when I try to run <code>docker run -it</code></p>\n\n<h3>Dockerfile</h3>\n\n<pre><code>FROM centos:6.6\n\n# VOLUME /var/lib/mysql\n\n# ENV HOME /root\n# ENV PATH $HOME/.rbenv/bin:$HOME/.rbenv/shims:$PATH\n# ENV SHELL /bin/bash\n\nRUN yum update -y\nRUN yum install git openssl-devel openssl readline-devel readline zlib-devel zlib libxml2-devel libxml2 libxslt-devel libxslt nginx tar gcc libaio libaio-devel -y\nRUN rpm -Uvh https://opscode-omnibus-packages.s3.amazonaws.com/el/6/x86_64/chef-12.5.1-1.el6.x86_64.rpm\nRUN yum install -y openssh-server\nRUN mkdir -p /var/run/sshd\n\nRUN adduser deploy -p Password1\nRUN su - deploy\n\nRUN git clone https://github.com/sstephenson/rbenv.git /root/.rbenv\nRUN git clone https://github.com/sstephenson/ruby-build.git /root/.rbenv/plugins/ruby-build\nRUN ./root/.rbenv/plugins/ruby-build/install.sh\nENV PATH /root/.rbenv/bin:$PATH\nRUN echo 'eval \"$(rbenv init -)\"' &gt;&gt; /etc/profile.d/rbenv.sh\nRUN echo 'eval \"$(rbenv init -)\"' &gt;&gt; .bashrc\nRUN echo 'eval \"$(rbenv init -)\"' &gt;&gt; $HOME/.bash_profile\nRUN source $HOME/.bash_profile\nENV CONFIGURE_OPTS --disable-install-doc\n\nRUN rbenv install 2.2.3\nRUN rbenv global 2.2.3\nRUN bash -l -c 'gem update --system'\nRUN bash -l -c 'gem update'\nRUN bash -l -c 'gem install nokogiri -- --use-system-libraries'\nRUN bash -l -c 'gem install bundler rails-api --no-rdoc --no-ri'\n\nRUN touch /etc/sysconfig/network\n\nEXPOSE 3306\nEXPOSE 22\nEXPOSE 80\nEXPOSE 3389\n</code></pre>\n\n<h3>error</h3>\n\n<pre><code>Error response from daemon: No command specified\n</code></pre>\n"}, {"tags": ["ruby", "recursion", "combinations"], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 5557138, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/13f06edac5b4811eb20914825a39f077?s=128&d=identicon&r=PG&f=1", "display_name": "Chintan Vadgama", "link": "https://stackoverflow.com/users/5557138/chintan-vadgama"}, "edited": false, "score": 0, "creation_date": 1447887584, "post_id": 33791353, "comment_id": 55351195, "body": "Hello I am really sorry. Actually I have not written all the combinations. I just took two strings &amp; wrote all possible combinations. However, I have to consider all possible combinations... If you could help me with this."}, {"owner": {"reputation": 13, "user_id": 5557138, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/13f06edac5b4811eb20914825a39f077?s=128&d=identicon&r=PG&f=1", "display_name": "Chintan Vadgama", "link": "https://stackoverflow.com/users/5557138/chintan-vadgama"}, "edited": false, "score": 0, "creation_date": 1447889147, "post_id": 33791353, "comment_id": 55351786, "body": "Awesome work you have done for me. Just that I have lots of data so it is taking too long. If you can increase efficiency of this code by anyway, it would be great for me."}, {"owner": {"reputation": 887, "user_id": 4664086, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9ca859ce2ca107d4a1110965ef40d7f6?s=128&d=identicon&r=PG&f=1", "display_name": "Damiano Stoffie", "link": "https://stackoverflow.com/users/4664086/damiano-stoffie"}, "reply_to_user": {"reputation": 13, "user_id": 5557138, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/13f06edac5b4811eb20914825a39f077?s=128&d=identicon&r=PG&f=1", "display_name": "Chintan Vadgama", "link": "https://stackoverflow.com/users/5557138/chintan-vadgama"}, "edited": false, "score": 1, "creation_date": 1447931683, "post_id": 33791353, "comment_id": 55370150, "body": "Given the nature of the problem, high computational complexity has to be expected for any solution. Sure the code can be optimized, and maybe you can come up with a solution that is orders of magnitude faster than what it is now, but I feel you are going to hit efficiency problem anyway when you start using the produced data"}], "tags": [], "owner": {"reputation": 887, "user_id": 4664086, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9ca859ce2ca107d4a1110965ef40d7f6?s=128&d=identicon&r=PG&f=1", "display_name": "Damiano Stoffie", "link": "https://stackoverflow.com/users/4664086/damiano-stoffie"}, "is_accepted": true, "score": 0, "last_activity_date": 1447884339, "creation_date": 1447884339, "answer_id": 33791353, "question_id": 33789560, "link": "https://stackoverflow.com/questions/33789560/how-to-generate-all-possible-combinations/33791353#33791353", "title": "How to generate all possible combinations", "body": "<p>First thing first, I cant' figure out why in your output <code>\"trendingModule:false\"</code> is missing everywhere.</p>\n\n<p>Why the rows <code>\"spotfront4:true\"</code>, <code>\"spotfront4:false\"</code>, <code>\"postClick4:ipsa\"</code>, <code>\"postClick4:ipsa\"</code> etc.. are missing in the output? What's the logic behind the inclusion or the exclusion of each combination?</p>\n\n<p>Shure you want to exclude rows like <code>\"key:true&amp;key:false\"</code> because of the duplicated key.</p>\n\n<p>Second, this program produces every possible combination, but that is not what you want, right? 215 elements, way more than what you listed in the example</p>\n\n<pre><code>opts = [\n  \"productRankingOct12:LessPopularityEPC\",\n  \"productRankingOct12:CtrEpcJob\", \n  \"productRankingOct12:DeviceSpecificLPE\", \n  \"guidedSearch:false\", \n  \"guidedSearch:true\", \n  \"spotfront4:true\", \n  \"spotfront4:false\",\n  \"postClick4:ipsa\", \n  \"postClick4:false\",\n  \"trendingModule:false\"\n]\n\nnormal_opts = Hash.new\nopts.each do |e|\n  k, v = e.split(\":\")\n  (normal_opts[k] ||= []) &lt;&lt; v\nend\n\n# normal_ops looks like this\n#normal_opts = {\n#  \"productRankingOct12\" =&gt; [\"LessPopularityEPC\", \"CtrEpcJob\", \"DeviceSpecificLPE\"],\n#  \"guidedSearch\" =&gt; [\"false\", \"true\"],\n#  \"spotfornt4\" =&gt; [\"true\", \"false\"],\n#  \"postClick4\" =&gt; [\"ipsa\", \"false\"],\n#  \"trendingModule\" =&gt; [\"false\"]\n#}\n\n# nobody is ever going to mantain this\nresult = normal_opts.keys.length.times.map do |i|\n  normal_opts.keys.combination(i + 1).map do |keys|\n    combs = keys.map { |k|\n      normal_opts[k].map { |e|\n        \"#{k}:#{e}\"\n      }\n    }\n    # good luck understanding this!\n    combs.first.product(*combs[1..-1]).map{|e| e.join(\"&amp;\")}\n  end\nend\n\nputs result.flatten\n</code></pre>\n\n<p>If you explain yourself better, I can improve my answer</p>\n"}], "owner": {"reputation": 13, "user_id": 5557138, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/13f06edac5b4811eb20914825a39f077?s=128&d=identicon&r=PG&f=1", "display_name": "Chintan Vadgama", "link": "https://stackoverflow.com/users/5557138/chintan-vadgama"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 180, "favorite_count": 1, "accepted_answer_id": 33791353, "answer_count": 1, "score": 0, "last_activity_date": 1447884339, "creation_date": 1447877849, "last_edit_date": 1447878709, "question_id": 33789560, "link": "https://stackoverflow.com/questions/33789560/how-to-generate-all-possible-combinations", "title": "How to generate all possible combinations", "body": "<p>I have a string array like this:</p>\n\n<pre><code>[\n  \"productRankingOct12:LessPopularityEPC\",\n  \"productRankingOct12:CtrEpcJob\", \n  \"productRankingOct12:DeviceSpecificLPE\", \n  \"guidedSearch:false\", \n  \"guidedSearch:true\", \n  \"spotfront4:true\", \n  \"spotfront4:false\",\n  \"postClick4:ipsa\", \n  \"postClick4:false\",\n  \"trendingModule:false\"\n]\n</code></pre>\n\n<p>I have to build URLs based on the given key:value pairs. I want the combinations of the elements:</p>\n\n<pre><code>[\n  \"productRankingOct12:LessPopularityEPC\",\n  \"productRankingOct12:CtrEpcJob\", \n  \"productRankingOct12:DeviceSpecificLPE\",\n  \"guidedSearch:false\", \n  \"guidedSearch:true\", \n  \"productRankingOct12:LessPopularityEPC &amp; guidedSearch:false\"\n  \"productRankingOct12:CtrEpcJob &amp; guidedSearch:false\"\n  \"productRankingOct12:DeviceSpecificLPE &amp; guidedSearch:false\"\n  \"productRankingOct12:LessPopularityEPC &amp; guidedSearch:true\"\n  \"productRankingOct12:CtrEpcJob &amp; guidedSearch:true\"\n  \"productRankingOct12:DeviceSpecificLPE &amp; guidedSearch:true\"\n  \"productRankingOct12:LessPopularityEPC &amp; guidedSearch:false &amp; spotfront4:true\"\n  \"productRankingOct12:CtrEpcJob &amp; guidedSearch:false &amp; \"spotfront4:true\"\"\n  \"productRankingOct12:DeviceSpecificLPE &amp; guidedSearch:false &amp; \"spotfront4:true\"\"\n  \"productRankingOct12:LessPopularityEPC &amp; guidedSearch:true &amp; \"spotfront4:true\"\"\n]\n</code></pre>\n\n<p>I tried to generate permutations using this:</p>\n\n<pre><code>def Automate_AB_tests.permutation(arg_keyVal)\n  return [arg_keyVal] if arg_keyVal.size &lt; 2\n  ch = arg_keyVal[0] \n  permutation(arg_keyVal[1..-1]).each_with_object([]) do |perm,result|\n    (0..perm.size).each {|i| result &lt;&lt; perm.dup.insert(i,ch)}\n  end\nend\n</code></pre>\n\n<p>but it seems it is taking all the elements, and it crashed. I don't want to permute all the elements. I want the desired output as above. Please anyone can help me with that.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "rest", "curl", "parse-platform"], "comments": [{"owner": {"reputation": 229, "user_id": 2996915, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/37905fd5f43b2c8ba04666f2636c886f?s=128&d=identicon&r=PG", "display_name": "Danny Y", "link": "https://stackoverflow.com/users/2996915/danny-y"}, "edited": false, "score": 1, "creation_date": 1447914893, "post_id": 33789550, "comment_id": 55359889, "body": "What does your response from Parse return with?"}, {"owner": {"reputation": 47, "user_id": 567503, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bbc4b3fca1ae3161257a8636145b424d?s=128&d=identicon&r=PG", "display_name": "curi", "link": "https://stackoverflow.com/users/567503/curi"}, "reply_to_user": {"reputation": 229, "user_id": 2996915, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/37905fd5f43b2c8ba04666f2636c886f?s=128&d=identicon&r=PG", "display_name": "Danny Y", "link": "https://stackoverflow.com/users/2996915/danny-y"}, "edited": false, "score": 0, "creation_date": 1447968001, "post_id": 33789550, "comment_id": 55394653, "body": "like i said, i get Timeout::Error: Resource temporarily unavailable  (ruby exception, not http response)"}, {"owner": {"reputation": 229, "user_id": 2996915, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/37905fd5f43b2c8ba04666f2636c886f?s=128&d=identicon&r=PG", "display_name": "Danny Y", "link": "https://stackoverflow.com/users/2996915/danny-y"}, "edited": false, "score": 2, "creation_date": 1448057275, "post_id": 33789550, "comment_id": 55439111, "body": "<code>http.use_ssl = true</code> maybe?"}, {"owner": {"reputation": 47, "user_id": 567503, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bbc4b3fca1ae3161257a8636145b424d?s=128&d=identicon&r=PG", "display_name": "curi", "link": "https://stackoverflow.com/users/567503/curi"}, "reply_to_user": {"reputation": 229, "user_id": 2996915, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/37905fd5f43b2c8ba04666f2636c886f?s=128&d=identicon&r=PG", "display_name": "Danny Y", "link": "https://stackoverflow.com/users/2996915/danny-y"}, "edited": false, "score": 0, "creation_date": 1448093774, "post_id": 33789550, "comment_id": 55447106, "body": "that worked. thank you!"}], "answers": [{"tags": [], "owner": {"reputation": 229, "user_id": 2996915, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/37905fd5f43b2c8ba04666f2636c886f?s=128&d=identicon&r=PG", "display_name": "Danny Y", "link": "https://stackoverflow.com/users/2996915/danny-y"}, "is_accepted": true, "score": 1, "last_activity_date": 1448325674, "creation_date": 1448325674, "answer_id": 33883484, "question_id": 33789550, "link": "https://stackoverflow.com/questions/33789550/why-is-this-parse-com-rest-api-request-failing/33883484#33883484", "title": "why is this parse.com rest api request failing?", "body": "<p>As per the <a href=\"https://parse.com/docs/rest/guide/\" rel=\"nofollow\">REST API Developers guide</a>, </p>\n\n<blockquote>\n  <p>All API access is over HTTPS, and accessed via the <a href=\"https://api.parse.com\" rel=\"nofollow\">https://api.parse.com</a> domain. </p>\n</blockquote>\n\n<p>So all you need to do is to add <code>http.use_ssl = true</code>.</p>\n"}], "owner": {"reputation": 47, "user_id": 567503, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bbc4b3fca1ae3161257a8636145b424d?s=128&d=identicon&r=PG", "display_name": "curi", "link": "https://stackoverflow.com/users/567503/curi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 206, "favorite_count": 2, "accepted_answer_id": 33883484, "answer_count": 1, "score": 2, "last_activity_date": 1448325674, "creation_date": 1447877812, "question_id": 33789550, "link": "https://stackoverflow.com/questions/33789550/why-is-this-parse-com-rest-api-request-failing", "title": "why is this parse.com rest api request failing?", "body": "<p>i'm trying to send a parse.com push notification from ruby 1.8.7.</p>\n\n<p>i got a test working with curl. but with ruby's net::http i'm getting Timeout::Error: Resource temporarily unavailable</p>\n\n<p>how can i debug this? i don't know how to see why the parse server is responding differently or otherwise see what's happening. i tried sending the request to my own server and the headers looked ok to me.</p>\n\n<p>i simplified what i'm doing to this:</p>\n\n<pre><code>http = Net::HTTP.new('api.parse.com', 443)\nresponse = http.post(\"/1/push\", \"{\\\"where\\\":{},\\\"data\\\":{\\\"alert\\\":\\\"Elliot net http json test 1\\\"}}\", {\"X-Parse-Application-Id\"=&gt;\"xxxxx\", \"Content-Type\"=&gt;\"application/json\", \"X-Parse-REST-API-Key\"=&gt;\"xxxxx\"})\n</code></pre>\n\n<p>the json there is hard to read, it's from:</p>\n\n<pre><code>api_req = {:where =&gt; {}, :data =&gt; {:alert =&gt; \"Elliot net http json test 1\"}}.to_json\nputs api_req\n# {\"where\":{},\"data\":{\"alert\":\"Elliot net http json test 1\"}}\n</code></pre>\n\n<p>i also tried several other ways of sending a request with net::http. same result.</p>\n\n<p>the curl request that worked was:</p>\n\n<pre><code>curl -X POST \\\n  -H \"X-Parse-Application-Id: xxxxxx\" \\\n  -H \"X-Parse-REST-API-Key: xxxxx\" \\\n  -H \"Content-Type: application/json\" \\\n  -d '{\n        \"where\": {},\n        \"data\": {\n          \"alert\": \"Elliot curl test #4\"\n        }\n      }' \\\nhttps://api.parse.com/1/push\n</code></pre>\n\n<p>i'm not using parse-ruby-client because i ran into problems with dependencies assuming a newer version of ruby. all i need to do is send some simple push notifications, and it seems like this should work without too much trouble.</p>\n\n<p>can anyone help me get this working or tell me how to get some useful info about what's happening to debug?</p>\n"}, {"tags": ["ruby", "pdf", "prawn"], "answers": [{"tags": [], "owner": {"reputation": 1866, "user_id": 966166, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/699b9d02024c648ba0edc3fc31a71c79?s=128&d=identicon&r=PG", "display_name": "Anthony DeSimone", "link": "https://stackoverflow.com/users/966166/anthony-desimone"}, "is_accepted": false, "score": 0, "last_activity_date": 1447879478, "creation_date": 1447879478, "answer_id": 33789998, "question_id": 33789047, "link": "https://stackoverflow.com/questions/33789047/making-a-prawn-table-fit-with-a-single-header-and-repeating-footer/33789998#33789998", "title": "Making a prawn table fit with a single header and repeating footer", "body": "<p>Found the answer on prawn's github. It requires you to wrap the table in a bounding box and set the bounding box's start position manually which only affects the first page.</p>\n\n<pre><code>  # ... draw your first-page header here\n  # Store away the y-position below the header on the first page\n  old_y = y\n  # Start a bounding box the size of the page (excluding the footer)\n  bounding_box([bounds.left, bounds.top],\n      :width =&gt; bounds.width, :height =&gt; bounds.height - FooterHeight) do\n    # Restore the old y-position for the first page\n    self.y = old_y\n    table(...)\n  end\n</code></pre>\n\n<p><a href=\"https://github.com/prawnpdf/prawn/issues/309\" rel=\"nofollow\">https://github.com/prawnpdf/prawn/issues/309</a></p>\n"}], "owner": {"reputation": 1866, "user_id": 966166, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/699b9d02024c648ba0edc3fc31a71c79?s=128&d=identicon&r=PG", "display_name": "Anthony DeSimone", "link": "https://stackoverflow.com/users/966166/anthony-desimone"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 656, "favorite_count": 1, "answer_count": 1, "score": 0, "last_activity_date": 1447879478, "creation_date": 1447876115, "question_id": 33789047, "link": "https://stackoverflow.com/questions/33789047/making-a-prawn-table-fit-with-a-single-header-and-repeating-footer", "title": "Making a prawn table fit with a single header and repeating footer", "body": "<p>I'm generating a PDF with Prawn that has a header on the first page, a repeating footer, and table data throughout. </p>\n\n<p>If I add the table without a bounding box, it starts after the header, but it overlaps the footer.\nIf I put the table inside a bounding box, it avoids the footer. But to avoid the header, I have to position it below the header and then I lose that space on every subsequent page.</p>\n\n<p>Is there another way to do this?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "twitter-bootstrap"], "answers": [{"tags": [], "owner": {"reputation": 9487, "user_id": 5572893, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Y0cqs.jpg?s=128&g=1", "display_name": "Long Nguyen", "link": "https://stackoverflow.com/users/5572893/long-nguyen"}, "is_accepted": true, "score": 1, "last_activity_date": 1447877706, "last_edit_date": 1447877706, "creation_date": 1447875390, "answer_id": 33788839, "question_id": 33788616, "link": "https://stackoverflow.com/questions/33788616/rails-4-2-unable-to-intergrate-wysiwyg-editor-for-bootstrap/33788839#33788839", "title": "Rails 4.2: Unable to intergrate WYSIWYG editor for Bootstrap", "body": "<p>I think the option <code>as: :wysihtml5</code> with default form helper of Rails will not work as I only see the author of this gem say it will work with <code>simple_form</code>.</p>\n\n<p>You can try to active the editor by javascript (place this below your application.js)</p>\n\n<pre><code>$(document).ready(function(){\n    $('.wysihtml5').each(function(i, elem) {\n        $(elem).wysihtml5();\n    });\n})\n</code></pre>\n\n<p>And change <code>&lt;%= f.text_area :content, as: :wysihtml5 %&gt;</code> to</p>\n\n<p><code>&lt;%= f.text_area :content, class: \"wysihtml5\" %&gt;</code></p>\n"}], "owner": {"reputation": 529, "user_id": 3574178, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/6f9079310597136064b4b8197f7a8bf5?s=128&d=identicon&r=PG&f=1", "display_name": "Neil", "link": "https://stackoverflow.com/users/3574178/neil"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 188, "favorite_count": 0, "accepted_answer_id": 33788839, "answer_count": 1, "score": 0, "last_activity_date": 1447877706, "creation_date": 1447874695, "question_id": 33788616, "link": "https://stackoverflow.com/questions/33788616/rails-4-2-unable-to-intergrate-wysiwyg-editor-for-bootstrap", "title": "Rails 4.2: Unable to intergrate WYSIWYG editor for Bootstrap", "body": "<p>Installed the Nerian/bootstrap-wysihtml5-rails gem to create a WYSIWYG editor. So a user can add content in the text area. I have added the editor in the content field. </p>\n\n<p><strong>_form.html.erb</strong></p>\n\n<pre><code> &lt;%= form_for @post do |f| %&gt;\n      &lt;% if @post.errors.any? %&gt;\n        &lt;h2&gt;&lt;%= pluralize(@post.errors.count, \"error\") %&gt; Prevented this post from saving: &lt;/h2&gt;\n        &lt;ul&gt;\n          &lt;% @post.errors.full_messages.each do |msg| %&gt;\n          &lt;li&gt;&lt;%= msg %&gt;&lt;/li&gt;\n        &lt;% end %&gt;\n        &lt;/ul&gt;\n        &lt;% end %&gt;\n\n        &lt;%= f.label :title %&gt;&lt;br&gt;\n        &lt;%= f.text_field :title %&gt;\n\n        &lt;br&gt;\n        &lt;br&gt;\n\n        &lt;%= f.label :content, \"Write your article here\" %&gt;&lt;br&gt;\n        **&lt;%= f.text_area :content, as: :wysihtml5 %&gt;**\n\n        &lt;br&gt;\n        &lt;br&gt;\n\n        &lt;%= f.submit %&gt;\n\n      &lt;% end %&gt;\n</code></pre>\n\n<p><strong>Gemfile</strong></p>\n\n<pre><code>gem 'pygments.rb', '~&gt; 0.6.0'\ngem 'redcarpet', '~&gt; 3.2.2'\ngem 'devise'\ngem 'bootstrap-wysihtml5-rails', github: 'nerian/bootstrap-wysihtml5-rails'\ngem 'will_paginate', '~&gt; 3.0.7'\ngem 'coderay'\n</code></pre>\n\n<p><strong>updated the application.js</strong></p>\n\n<pre><code>//= require jquery\n//= require jquery_ujs\n//= require bootstrap-wysihtml5\n//= require bootstrap-sprockets\n//= require_tree .\n</code></pre>\n\n<p>and imported the file into my application.css.scss</p>\n\n<pre><code>@import \"normalize\";\n  @import \"welcome\";\n  @import \"bootstrap-sprockets\";\n  @import \"bootstrap\";\n  @import \"articles\";\n  @import \"bootstrap-wysihtml5/bootstrap3-wysihtml5\";\n</code></pre>\n\n<p>But after restarting the server the WYSIWYG editor does not appear. </p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 634, "user_id": 1199793, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/339b1b14c371fc2e607967663f93e1e4?s=128&d=identicon&r=PG", "display_name": "bpromas", "link": "https://stackoverflow.com/users/1199793/bpromas"}, "edited": false, "score": 2, "creation_date": 1447874350, "post_id": 33788441, "comment_id": 55343923, "body": "From your question it seems like you want <code>b = a</code> if <code>a &gt; b</code>, but in your code snippets you&#39;re doing <code>a = b</code> if <code>a &gt; b</code>. Which is it?"}, {"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1447874623, "post_id": 33788441, "comment_id": 55344080, "body": "Please use English punctuation when writing in English."}], "answers": [{"comments": [{"owner": {"reputation": 31885, "user_id": 1008938, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/EOZbS.png?s=128&g=1", "display_name": "Linuxios", "link": "https://stackoverflow.com/users/1008938/linuxios"}, "edited": false, "score": 1, "creation_date": 1447874560, "post_id": 33788472, "comment_id": 55344054, "body": "Clever short circuiting, but a little terse for a simple problem, no?"}, {"owner": {"reputation": 3150, "user_id": 3012550, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/4e2667dc04d27136e29ccb9c9e19cfd3?s=128&d=identicon&r=PG", "display_name": "alexanderbird", "link": "https://stackoverflow.com/users/3012550/alexanderbird"}, "reply_to_user": {"reputation": 31885, "user_id": 1008938, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/EOZbS.png?s=128&g=1", "display_name": "Linuxios", "link": "https://stackoverflow.com/users/1008938/linuxios"}, "edited": false, "score": 0, "creation_date": 1447874927, "post_id": 33788472, "comment_id": 55344286, "body": "Maybe ... I&#39;ve seen <code>condition &amp;&amp; conditional_expression</code> as a pretty common pattern on the only big rails project I&#39;ve worked on - but if it isn&#39;t already established as a pattern in the project, then yes it would be a little obfuscating"}, {"owner": {"reputation": 31885, "user_id": 1008938, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/EOZbS.png?s=128&g=1", "display_name": "Linuxios", "link": "https://stackoverflow.com/users/1008938/linuxios"}, "edited": false, "score": 1, "creation_date": 1447875025, "post_id": 33788472, "comment_id": 55344347, "body": "There&#39;s nothing wrong with it -- it&#39;s just overly terse and difficult to understand for a language where in as many characters you can write <code>a = b if a &gt; b</code>. One of things I love about Ruby is the ability to use an <code>if</code> conditional as an expression."}, {"owner": {"reputation": 31885, "user_id": 1008938, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/EOZbS.png?s=128&g=1", "display_name": "Linuxios", "link": "https://stackoverflow.com/users/1008938/linuxios"}, "edited": false, "score": 0, "creation_date": 1447875049, "post_id": 33788472, "comment_id": 55344367, "body": "Thanks! But this is the other thing I love about Ruby -- 1 million ways to do everything."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "reply_to_user": {"reputation": 31885, "user_id": 1008938, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/EOZbS.png?s=128&g=1", "display_name": "Linuxios", "link": "https://stackoverflow.com/users/1008938/linuxios"}, "edited": false, "score": 0, "creation_date": 1447921270, "post_id": 33788472, "comment_id": 55362999, "body": "@Linuxios, you probably won&#39;t like this one any better: <code>a =  (a+b+(a&lt;=&gt;b)*(b-a))&#47;2</code>. You are too kind. My view: alexanderbird&#39;s answer (and my answer) should have their heads cut off (the answers&#39;, not the authors&#39;.)  What&#39;s the point of obfuscatiion when there&#39;s a simple, straightforward, easy-to-understand way of doing this?"}, {"owner": {"reputation": 31885, "user_id": 1008938, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/EOZbS.png?s=128&g=1", "display_name": "Linuxios", "link": "https://stackoverflow.com/users/1008938/linuxios"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 1, "creation_date": 1447951427, "post_id": 33788472, "comment_id": 55384588, "body": "@CarySwoveland: I now have an image of you using a guillotine to cut the upvote buttons off of answers. Maybe we should propose that on Meta..."}], "tags": [], "owner": {"reputation": 3150, "user_id": 3012550, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/4e2667dc04d27136e29ccb9c9e19cfd3?s=128&d=identicon&r=PG", "display_name": "alexanderbird", "link": "https://stackoverflow.com/users/3012550/alexanderbird"}, "is_accepted": false, "score": 2, "last_activity_date": 1447874543, "last_edit_date": 1447874543, "creation_date": 1447874233, "answer_id": 33788472, "question_id": 33788441, "link": "https://stackoverflow.com/questions/33788441/ruby-conditional-assignment/33788472#33788472", "title": "Ruby conditional assignment", "body": "<p>How about <code>a &gt; b &amp;&amp; a = b</code></p>\n\n<p>where <code>b</code> is that upper limit. </p>\n\n<pre><code>b = 25\na = 25\na &gt; b &amp;&amp; a = b #&gt; false; a = 25\na = 26 \na &gt; b &amp;&amp; a = b #&gt; true; a = 25\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 31885, "user_id": 1008938, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/EOZbS.png?s=128&g=1", "display_name": "Linuxios", "link": "https://stackoverflow.com/users/1008938/linuxios"}, "edited": false, "score": 2, "creation_date": 1447874750, "post_id": 33788535, "comment_id": 55344170, "body": "Nothing wrong with this solution, however, it seems unnecessary to use arrays to solve a simple greater-than problem."}, {"owner": {"reputation": 9487, "user_id": 5572893, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Y0cqs.jpg?s=128&g=1", "display_name": "Long Nguyen", "link": "https://stackoverflow.com/users/5572893/long-nguyen"}, "reply_to_user": {"reputation": 31885, "user_id": 1008938, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/EOZbS.png?s=128&g=1", "display_name": "Linuxios", "link": "https://stackoverflow.com/users/1008938/linuxios"}, "edited": false, "score": 1, "creation_date": 1447874876, "post_id": 33788535, "comment_id": 55344259, "body": "@Linuxios agreed! But I think JahMyst asking for something that Ruby-ist style, so I have to come up with this :p"}], "tags": [], "owner": {"reputation": 9487, "user_id": 5572893, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Y0cqs.jpg?s=128&g=1", "display_name": "Long Nguyen", "link": "https://stackoverflow.com/users/5572893/long-nguyen"}, "is_accepted": true, "score": 5, "last_activity_date": 1447874442, "creation_date": 1447874442, "answer_id": 33788535, "question_id": 33788441, "link": "https://stackoverflow.com/questions/33788441/ruby-conditional-assignment/33788535#33788535", "title": "Ruby conditional assignment", "body": "<p>So you ask for the upper limit:</p>\n\n<pre><code>UPPER_LIMIT = 25\nb = 100\na = [b, UPPER_LIMIT].min\n</code></pre>\n\n<p><code>a</code> will always smaller or equal to <code>25</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 634, "user_id": 1199793, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/339b1b14c371fc2e607967663f93e1e4?s=128&d=identicon&r=PG", "display_name": "bpromas", "link": "https://stackoverflow.com/users/1199793/bpromas"}, "is_accepted": false, "score": 1, "last_activity_date": 1447874478, "creation_date": 1447874478, "answer_id": 33788546, "question_id": 33788441, "link": "https://stackoverflow.com/questions/33788441/ruby-conditional-assignment/33788546#33788546", "title": "Ruby conditional assignment", "body": "<p>Try: <code>b = a &gt; b ? a : b</code></p>\n\n<p>It's the same as writing:</p>\n\n<pre><code>if a &gt; b\n  b = a\nelse\n  b = b\nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 31885, "user_id": 1008938, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/EOZbS.png?s=128&g=1", "display_name": "Linuxios", "link": "https://stackoverflow.com/users/1008938/linuxios"}, "is_accepted": false, "score": 5, "last_activity_date": 1447874516, "creation_date": 1447874516, "answer_id": 33788550, "question_id": 33788441, "link": "https://stackoverflow.com/questions/33788441/ruby-conditional-assignment/33788550#33788550", "title": "Ruby conditional assignment", "body": "<p>All three options work, it's just a question of style. </p>\n\n<p>I'd go with number 2. It most clearly communicates your intent, while avoiding extraneous keywords (number 1) or excessively terse one liners (number 3). </p>\n\n<p>In answer to your more general question, there is no way to override variable assignment in Ruby. You can override assignment to instance variables using setter methods though. If you just want to do it afterwords, the code from your question is sufficient:</p>\n\n<pre><code>a = something\na = 25 if a &gt; 25\n</code></pre>\n"}], "owner": {"reputation": 1406, "user_id": 4060120, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/2ed2f81836984af6bfcb34fcb5c3935f?s=128&d=identicon&r=PG&f=1", "display_name": "JahMyst", "link": "https://stackoverflow.com/users/4060120/jahmyst"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 424, "favorite_count": 0, "accepted_answer_id": 33788535, "answer_count": 4, "score": 0, "last_activity_date": 1447874543, "creation_date": 1447874102, "last_edit_date": 1447874315, "question_id": 33788441, "link": "https://stackoverflow.com/questions/33788441/ruby-conditional-assignment", "title": "Ruby conditional assignment", "body": "<p>What is the Ruby way to assign a variable a to another variable b if a is superior to b ? </p>\n\n<p>I have three possibilities so far :</p>\n\n<ul>\n<li><code>if a &gt; b then a = b  end</code></li>\n<li><code>a = b if a &gt; b</code></li>\n<li><code>a = a &gt; b ? b : a</code></li>\n</ul>\n\n<p>More broadly, is there a way to set an upper limit to a variable ? \n<strong>e.g:</strong> if I try to set a = 50 and a has an upper limit of 25, a will be equal to 25 after assignment.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "constants"], "comments": [{"owner": {"reputation": 5713, "user_id": 846163, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/623857ee8390f91edba65fcac0d152ab?s=128&d=identicon&r=PG", "display_name": "sschmeck", "link": "https://stackoverflow.com/users/846163/sschmeck"}, "edited": false, "score": 0, "creation_date": 1447873804, "post_id": 33788290, "comment_id": 55343581, "body": "I would prefer a module. Since <code>CalculatorConstants</code> acts like a special namespace for your constants. The constants should have only capital letters, e.g. <code>MEATY</code>."}, {"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1447874764, "post_id": 33788290, "comment_id": 55344180, "body": "Your second option is invalid."}], "answers": [{"tags": [], "owner": {"reputation": 5713, "user_id": 846163, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/623857ee8390f91edba65fcac0d152ab?s=128&d=identicon&r=PG", "display_name": "sschmeck", "link": "https://stackoverflow.com/users/846163/sschmeck"}, "is_accepted": false, "score": 1, "last_activity_date": 1447874309, "creation_date": 1447874309, "answer_id": 33788498, "question_id": 33788290, "link": "https://stackoverflow.com/questions/33788290/class-vs-module-for-constants-file/33788498#33788498", "title": "Class vs module for constants file", "body": "<p>I would prefer a module as namespace for the constants.</p>\n\n<pre><code>module CalculatorConstants\n  AVERAGE_DOMESTIC_FLIGHT_LENGTH = 1070\n  DietType = Struct.new(:name, :co2e)\n\n  AVERAGE_DIET = DietType.new('average', 684.915)\n  # ...\n  DIET_TYPES = [AVERAGE_DIET]\nend\n\np CalculatorConstants::DIET_TYPES\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1958, "user_id": 2803062, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/ed9b78fe5151cbc40739c7db14fbecf7?s=128&d=identicon&r=PG", "display_name": "bosskovic", "link": "https://stackoverflow.com/users/2803062/bosskovic"}, "is_accepted": false, "score": 0, "last_activity_date": 1447921203, "last_edit_date": 1447921203, "creation_date": 1447874967, "answer_id": 33788708, "question_id": 33788290, "link": "https://stackoverflow.com/questions/33788290/class-vs-module-for-constants-file/33788708#33788708", "title": "Class vs module for constants file", "body": "<p>I usually solve such problems by storing the constants in then yaml file, and then load them and access them through a hash.</p>\n\n<p>example of the yaml file:</p>\n\n<pre><code>flight_length:\n  domestic: 1070\n  international: 3000\ndiet_types:\n  - type1\n  - type2\n  - type3\n</code></pre>\n\n<p>Ruby code example:</p>\n\n<pre><code>#loading\nconstants = YAML.load_file(path)\n\n#saving\nFile.open(path, 'w') { |f| YAML.dump(constants, f) }\n\n#use\nputs constants[:flight_length].inspect\n# =&gt; { domestic: 1070, international: 3000 }\n\nputs constants[:flight_length][:domestic]\n# =&gt; 1070\n\nputs constants[:diet_types].inspect\n# =&gt; [type1, type2, type3]\n</code></pre>\n\n<p>It is nicely structured, it is independent from the ruby app, it can easily be edited outside the app context, it can be easily reused or converted, for example to json for use in javascript code.</p>\n\n<p>You could wrap the methods for accessing the values in the yaml file, and various helper either as class methods of a class or instance methods, depending on your needs. If you will just load and save, then perhaps class methods are better. If you would have many helper methods, then instance methods are better. I would not go with a module.</p>\n\n<p><a href=\"http://yaml.org/\" rel=\"nofollow\">Official yaml web site</a></p>\n"}, {"comments": [{"owner": {"reputation": 1958, "user_id": 2803062, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/ed9b78fe5151cbc40739c7db14fbecf7?s=128&d=identicon&r=PG", "display_name": "bosskovic", "link": "https://stackoverflow.com/users/2803062/bosskovic"}, "edited": false, "score": 0, "creation_date": 1447921396, "post_id": 33789653, "comment_id": 55363078, "body": "nice gem, I didn&#39;t know about it."}], "tags": [], "owner": {"reputation": 1487, "user_id": 4314737, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/--oKvmYGmbWo/AAAAAAAAAAI/AAAAAAAAACE/DViFEFiuDjo/photo.jpg?sz=128", "display_name": "Van Huy", "link": "https://stackoverflow.com/users/4314737/van-huy"}, "is_accepted": false, "score": 1, "last_activity_date": 1447878209, "creation_date": 1447878209, "answer_id": 33789653, "question_id": 33788290, "link": "https://stackoverflow.com/questions/33788290/class-vs-module-for-constants-file/33789653#33789653", "title": "Class vs module for constants file", "body": "<p>I usually use the <a href=\"https://github.com/railsconfig/config\" rel=\"nofollow\">config</a> gem to manage constants. It is very easy to use: just store all constants to a YAML file, then these constants will be available in your app. For example,</p>\n\n<pre><code># config/settings.yml\nflight_length: 1070\ndiet_types:\n  average: 684.915\n  meaty: 867.964\n</code></pre>\n\n<p>You can access those constants in your app by </p>\n\n<pre><code>Settings.flight_length # =&gt; 1070\nSettings.diet_types.average # =&gt; 684.915\n</code></pre>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user4455199"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 640, "favorite_count": 1, "answer_count": 3, "score": 1, "last_activity_date": 1447921203, "creation_date": 1447873536, "last_edit_date": 1447878876, "question_id": 33788290, "link": "https://stackoverflow.com/questions/33788290/class-vs-module-for-constants-file", "title": "Class vs module for constants file", "body": "<p>I have a large number of constants: the average length of a domestic flight, the co2 emissions of different diet types, and co2/kwH conversions for different states, etc. I'd thought to put them in a separate file in my models and controllers, but wasn't quite sure what the best practice would be. Should this file be a class, a module, or neither? Should I place them in the models directory? </p>\n\n<p>Examples: </p>\n\n<pre><code>class CalculatorConstants\n  AVERAGE_DOMESTIC_FLIGHT_LENGTH = 1070\n  class DietType\n    def initialize(name, co2e)\n      @name = name\n      @co2e = co2e\n    end\n    attr_reader (:name, :co2e)\n  end\n\n  average_diet = DietType.new('average', 684.915)\n  meaty = DietType.new('meaty', 867.964)\n  no_beef = DietType.new('no beef', 450.585)\n  pescatarian = DietType.new('pescatarian', 612.074)\n  vegetarian = DietType.new('vegetarian', 420.482)\n  vegan = DietType.new('vegan', 245.793)\n  DIET_TYPES = [average_diet, meaty, no_beef, pescatarian, vegetarian, vegan]\nend\n</code></pre>\n\n<p>or</p>\n\n<pre><code>module CalculatorConstants\n  #Above Code\nend\n</code></pre>\n\n<p>or neither? Where would be the best to put them?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4", "heroku"], "comments": [{"owner": {"reputation": 31, "user_id": 4180525, "user_type": "registered", "accept_rate": 20, "profile_image": "https://i.stack.imgur.com/2zk9w.jpg?s=128&g=1", "display_name": "JustDanLee", "link": "https://stackoverflow.com/users/4180525/justdanlee"}, "edited": false, "score": 0, "creation_date": 1447872325, "post_id": 33787918, "comment_id": 55342633, "body": "I have literally just solved this issue: I needed to run a rake assets:precompile - Why does this have to be run? Why doesn&#39;t Rails do this automatically? Could I invoke this?"}, {"owner": {"reputation": 15583, "user_id": 177489, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/sv6zK.jpg?s=128&g=1", "display_name": "Mark Swardstrom", "link": "https://stackoverflow.com/users/177489/mark-swardstrom"}, "edited": false, "score": 0, "creation_date": 1447873777, "post_id": 33787918, "comment_id": 55343566, "body": "Lots more info about this here: <a href=\"https://devcenter.heroku.com/articles/rails-4-asset-pipeline\" rel=\"nofollow noreferrer\">devcenter.heroku.com/articles/rails-4-asset-pipeline</a>.  Did you add the rails_12factor gem?"}, {"owner": {"reputation": 31, "user_id": 4180525, "user_type": "registered", "accept_rate": 20, "profile_image": "https://i.stack.imgur.com/2zk9w.jpg?s=128&g=1", "display_name": "JustDanLee", "link": "https://stackoverflow.com/users/4180525/justdanlee"}, "reply_to_user": {"reputation": 15583, "user_id": 177489, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/sv6zK.jpg?s=128&g=1", "display_name": "Mark Swardstrom", "link": "https://stackoverflow.com/users/177489/mark-swardstrom"}, "edited": false, "score": 0, "creation_date": 1447874326, "post_id": 33787918, "comment_id": 55343904, "body": "rails_12factor was already installed - as Unixmonkey stated, this has likely been missed due to an earlier precompile."}], "answers": [{"comments": [{"owner": {"reputation": 31, "user_id": 4180525, "user_type": "registered", "accept_rate": 20, "profile_image": "https://i.stack.imgur.com/2zk9w.jpg?s=128&g=1", "display_name": "JustDanLee", "link": "https://stackoverflow.com/users/4180525/justdanlee"}, "edited": false, "score": 0, "creation_date": 1447873988, "post_id": 33788336, "comment_id": 55343690, "body": "I already have rails_12factor installed, I think this has been skipped, what&#39;s the best way to avoid this being skipped in future?"}, {"owner": {"reputation": 17497, "user_id": 23915, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b5e935da7b67c03dd56f385b031f485c?s=128&d=identicon&r=PG", "display_name": "Unixmonkey", "link": "https://stackoverflow.com/users/23915/unixmonkey"}, "reply_to_user": {"reputation": 31, "user_id": 4180525, "user_type": "registered", "accept_rate": 20, "profile_image": "https://i.stack.imgur.com/2zk9w.jpg?s=128&g=1", "display_name": "JustDanLee", "link": "https://stackoverflow.com/users/4180525/justdanlee"}, "edited": false, "score": 0, "creation_date": 1447874785, "post_id": 33788336, "comment_id": 55344197, "body": "@JustDanLee Check the output when you deploy for a firmer answer, but I&#39;m thinking you should change <code>config.assets.compile</code> to <code>false</code>. I just checked a few of my apps, and they are all still <code>false</code> and run just fine on Heroku."}, {"owner": {"reputation": 31, "user_id": 4180525, "user_type": "registered", "accept_rate": 20, "profile_image": "https://i.stack.imgur.com/2zk9w.jpg?s=128&g=1", "display_name": "JustDanLee", "link": "https://stackoverflow.com/users/4180525/justdanlee"}, "edited": false, "score": 1, "creation_date": 1447876166, "post_id": 33788336, "comment_id": 55345041, "body": "Very strange, if I change to false the assets don&#39;t show. Even if I run heroku run rake assets:precompile"}, {"owner": {"reputation": 31, "user_id": 4180525, "user_type": "registered", "accept_rate": 20, "profile_image": "https://i.stack.imgur.com/2zk9w.jpg?s=128&g=1", "display_name": "JustDanLee", "link": "https://stackoverflow.com/users/4180525/justdanlee"}, "edited": false, "score": 0, "creation_date": 1448056936, "post_id": 33788336, "comment_id": 55438936, "body": "I have done some further research and it seems for heroku <code>config.assets.compile</code> must be <code>true</code> to serve images - In order to have the pre-compile for .js enabled <code>intitialisers&#47;assets.rb</code> requires the following <code>Rails.application.config.assets.precompile += %w( *.js)</code> - using this method manages to compress the slug size by 40% too, which is brilliant."}, {"owner": {"reputation": 6361, "user_id": 2097529, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/QnP8n.jpg?s=128&g=1", "display_name": "Kick Buttowski", "link": "https://stackoverflow.com/users/2097529/kick-buttowski"}, "edited": false, "score": 0, "creation_date": 1502509981, "post_id": 33788336, "comment_id": 78251681, "body": "if <b>config.assets.compile</b>  is <b>true</b>, there is going to be overhead, but if it is <b>false</b> nothing will be shown in heroku. <b>Rails.application.config.assets.precompile += %w( <i>.js)</b> is not unnecessary if asset pipeline is being used.  ** my js still does not work in heroku*</i>"}], "tags": [], "owner": {"reputation": 17497, "user_id": 23915, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b5e935da7b67c03dd56f385b031f485c?s=128&d=identicon&r=PG", "display_name": "Unixmonkey", "link": "https://stackoverflow.com/users/23915/unixmonkey"}, "is_accepted": false, "score": 1, "last_activity_date": 1447873764, "creation_date": 1447873764, "answer_id": 33788336, "question_id": 33787918, "link": "https://stackoverflow.com/questions/33787918/rails-4-js-files-not-running-in-production-environment-heroku/33788336#33788336", "title": "Rails 4 - .js files not running in production environment - Heroku", "body": "<p>If you install the <a href=\"https://github.com/heroku/rails_12factor\" rel=\"nofollow\">rails_12factor</a> gem <a href=\"https://devcenter.heroku.com/articles/getting-started-with-rails4#heroku-gems\" rel=\"nofollow\">as Heroku Recommends</a> it will automatically run <code>rake assets:precompile</code> on deploy (through a gem dependency named <a href=\"https://github.com/heroku/rails_serve_static_assets\" rel=\"nofollow\">rails_serve_static_assets</a>).</p>\n\n<p>It may skip this step if it sees a public/assets/manifest.* file or a /public/assets directory, which tells it you've already compiled the assets, and it doesn't need to be done again.</p>\n"}], "owner": {"reputation": 31, "user_id": 4180525, "user_type": "registered", "accept_rate": 20, "profile_image": "https://i.stack.imgur.com/2zk9w.jpg?s=128&g=1", "display_name": "JustDanLee", "link": "https://stackoverflow.com/users/4180525/justdanlee"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 369, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1447873764, "creation_date": 1447872296, "question_id": 33787918, "link": "https://stackoverflow.com/questions/33787918/rails-4-js-files-not-running-in-production-environment-heroku", "title": "Rails 4 - .js files not running in production environment - Heroku", "body": "<p>I'm having trouble loading my .js files in production on Heroku.</p>\n\n<p>I know the files are being picked up from the asset pipeline as they are working in development just fine but I am unable to get the .js working in production.</p>\n\n<p>I have created <code>/assets/javascripts/notification.js</code> containing:</p>\n\n<pre><code>$(document).ready(function() {\n  $(\"span\").click(function() {\n    $(\".notice\").delay(200).fadeOut(2000, function() {\n    });\n  });\n});\n</code></pre>\n\n<p>My <code>/assets/javascripts/application.js</code> file contains:</p>\n\n<pre><code>//= require jquery\n//= require jquery_ujs\n//= require turbolinks\n//= require_tree .\n</code></pre>\n\n<p>in development, this works great.</p>\n\n<p>When I deploy to Heroku, I can see that the code is displayed within a single <code>application.js</code> file, except the document ready function is stripped out, see below production .js file:</p>\n\n<pre><code>&lt;script src=\"/assets/application-b9a733c3cc0929ae852e45a6c3a2a5f6.js\" data-turbolinks-track=\"true\"&gt;&lt;/script&gt;\n</code></pre>\n\n<p>My <code>config/production.rb</code> contains:</p>\n\n<pre><code>config.serve_static_files = ENV['RAILS_SERVE_STATIC_FILES'].present?\nconfig.assets.compile = true\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "model-view-controller"], "comments": [{"owner": {"reputation": 17357, "user_id": 794242, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e871d15815cfef926f21737a5ccd30c4?s=128&d=identicon&r=PG", "display_name": "Wand Maker", "link": "https://stackoverflow.com/users/794242/wand-maker"}, "edited": false, "score": 0, "creation_date": 1447872347, "post_id": 33787779, "comment_id": 55342644, "body": "In my view, it will be in controller - given that you say its a small project."}, {"owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "edited": false, "score": 0, "creation_date": 1447872584, "post_id": 33787779, "comment_id": 55342809, "body": "Depends, but I would argue that third party API request should be encapsulated in an module or at least in a model."}, {"owner": {"reputation": 884, "user_id": 1670886, "user_type": "registered", "profile_image": "https://graph.facebook.com/1154683295/picture?type=large", "display_name": "Kuldeep", "link": "https://stackoverflow.com/users/1670886/kuldeep"}, "edited": false, "score": 0, "creation_date": 1447873453, "post_id": 33787779, "comment_id": 55343382, "body": "As per my view, it should be extract out into service that will interact with 3party service, and as soon as the service will get the response from the 3rd party, it will notify the model, and then model will take appropriate action."}], "answers": [{"tags": [], "owner": {"reputation": 9487, "user_id": 5572893, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Y0cqs.jpg?s=128&g=1", "display_name": "Long Nguyen", "link": "https://stackoverflow.com/users/5572893/long-nguyen"}, "is_accepted": false, "score": 0, "last_activity_date": 1447873552, "creation_date": 1447873552, "answer_id": 33788293, "question_id": 33787779, "link": "https://stackoverflow.com/questions/33787779/mvc-pattern-and-ror-or-where-must-that-code-be-placed/33788293#33788293", "title": "MVC pattern and RoR or where must that code be placed?", "body": "<p>I usually wrap it inside a module or a class and place the file into folder</p>\n\n<p><code>app/models/services/</code></p>\n\n<p>Here is the folder I place all things are kind of <code>service</code>, e.g. The logic to requests to API and proceed responses from it.</p>\n"}, {"comments": [{"owner": {"reputation": 694, "user_id": 5493147, "user_type": "registered", "accept_rate": 66, "profile_image": "https://graph.facebook.com/10207662115541894/picture?type=large", "display_name": "nobilik", "link": "https://stackoverflow.com/users/5493147/nobilik"}, "edited": false, "score": 0, "creation_date": 1447916538, "post_id": 33788386, "comment_id": 55360659, "body": "Thanks for answer and links."}], "tags": [], "owner": {"reputation": 76, "user_id": 3250904, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4cd9cb2481aecc03823e73efe13544cd?s=128&d=identicon&r=PG", "display_name": "teixeir3", "link": "https://stackoverflow.com/users/3250904/teixeir3"}, "is_accepted": true, "score": 1, "last_activity_date": 1447875058, "last_edit_date": 1495540759, "creation_date": 1447873913, "answer_id": 33788386, "question_id": 33787779, "link": "https://stackoverflow.com/questions/33787779/mvc-pattern-and-ror-or-where-must-that-code-be-placed/33788386#33788386", "title": "MVC pattern and RoR or where must that code be placed?", "body": "<p>Processing user input from an HTTP request is usually done in the controller.</p>\n\n<p>Send a request to the rails server including the user input.</p>\n\n<p>The request will be routed to the appropriate controller action. In the controller action, form an HTTP request to an external API and include the user input in the request using something like RestClient.</p>\n\n<p>Finally, you will send an email to the user and include the request statuses by calling the deliver! method on a mailer class.</p>\n\n<p>Example:</p>\n\n<pre><code>class UsersController &lt; ApplicationController\n\n    def controller_action\n        @user_input = params[:query]\n\n        # Build the external API request URI.\n        # Using www.icd10api.com as an example.\n        url = Addressable::URI.new(\n              scheme: \"http\",\n              host: \"www.icd10api.com\",\n              query_values: {code: @user_input, r: \"json\", desc: \"long\"})\n        # Perform the external request and parse the response\n        resp = JSON.parse(RestClient.get(url.to_s))\n\n        # Finally, deliver the email.\n        UserMailer.statuses_email(resp).deliver!\n\n        # Return status code\n        render status: 200\n    end\nend\n</code></pre>\n\n<p>You can always refactor your code into a module, but I only do this if it's used in 3+ locations.</p>\n\n<p>If you're using this as more than a demo app, I would refer to the link in  Andrew CP Kelley's comment:</p>\n\n<p><a href=\"https://stackoverflow.com/questions/15205613/where-do-api-calls-go-in-a-ruby-on-rails-mvc-framework-project\">Where do API calls go in a ruby on rails MVC framework project?</a></p>\n\n<p>References:</p>\n\n<p><a href=\"https://en.wikipedia.org/wiki/Model%E2%80%93view%E2%80%93controller\" rel=\"nofollow noreferrer\">https://en.wikipedia.org/wiki/Model%E2%80%93view%E2%80%93controller</a></p>\n\n<p>You also might want to look into concerns if you're using rails 4+:</p>\n\n<p><a href=\"https://stackoverflow.com/questions/14541823/how-to-use-concerns-in-rails-4\">How to use concerns in Rails 4</a></p>\n"}], "owner": {"reputation": 694, "user_id": 5493147, "user_type": "registered", "accept_rate": 66, "profile_image": "https://graph.facebook.com/10207662115541894/picture?type=large", "display_name": "nobilik", "link": "https://stackoverflow.com/users/5493147/nobilik"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 73, "favorite_count": 0, "closed_date": 1447916549, "accepted_answer_id": 33788386, "answer_count": 2, "score": 1, "last_activity_date": 1447875225, "creation_date": 1447871858, "last_edit_date": 1447875225, "question_id": 33787779, "link": "https://stackoverflow.com/questions/33787779/mvc-pattern-and-ror-or-where-must-that-code-be-placed", "closed_reason": "Duplicate", "title": "MVC pattern and RoR or where must that code be placed?", "body": "<p>My task is to take some data from users. The next part is to make permanent requests to an API of a third party site and to process responses from it. I don't know where this part should be placed: model, controller, or module? The final part of the app will send statuses to users' emails.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4"], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 5451551, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fbbf09a5ff8269cc98ca5c4d3c41d675?s=128&d=identicon&r=PG&f=1", "display_name": "Sissi", "link": "https://stackoverflow.com/users/5451551/sissi"}, "edited": false, "score": 0, "creation_date": 1447872549, "post_id": 33787933, "comment_id": 55342779, "body": "Thanks Andrey! That fixed it :)"}], "tags": [], "owner": {"reputation": 47232, "user_id": 1772830, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Qtoqg.jpg?s=128&g=1", "display_name": "Andrey Deineko", "link": "https://stackoverflow.com/users/1772830/andrey-deineko"}, "is_accepted": true, "score": 1, "last_activity_date": 1447872338, "creation_date": 1447872338, "answer_id": 33787933, "question_id": 33787757, "link": "https://stackoverflow.com/questions/33787757/checkboxes-for-all-elements-in-a-model/33787933#33787933", "title": "checkboxes for all elements in a model", "body": "<pre><code>&lt;%-  MyModel.all.each do |c| %&gt;\n    &lt;%= check_box_tag(:id) %&gt;\n    &lt;%= label_tag(:name, c[:name]) %&gt;&lt;br&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p><code>-</code> - evaluates code.</p>\n\n<p><code>=</code> - evaluates code and outputs.</p>\n"}], "owner": {"reputation": 13, "user_id": 5451551, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fbbf09a5ff8269cc98ca5c4d3c41d675?s=128&d=identicon&r=PG&f=1", "display_name": "Sissi", "link": "https://stackoverflow.com/users/5451551/sissi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 17, "favorite_count": 0, "accepted_answer_id": 33787933, "answer_count": 1, "score": 0, "last_activity_date": 1447872457, "creation_date": 1447871783, "last_edit_date": 1447872457, "question_id": 33787757, "link": "https://stackoverflow.com/questions/33787757/checkboxes-for-all-elements-in-a-model", "title": "checkboxes for all elements in a model", "body": "<p>I want to display a checkbox for all elements in a model called MyModel. Here is what I wrote:</p>\n\n<pre><code>&lt;%=  MyModel.all.each do |c| %&gt;\n    &lt;%= check_box_tag(:id) %&gt;\n    &lt;%= label_tag(:name, c[:name]) %&gt;&lt;br&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>It does show the checkboxes as expected but at the end, I also get a list of the model content as shown in this <a href=\"http://i.stack.imgur.com/Nv2hj.png\" rel=\"nofollow\">screenshot</a>. </p>\n\n<p>Actually, it seems to be related to <code>&lt;%=  MyModel.all.each do |c| %&gt;</code> because just printing out simple text still prints the whole model table content at the end: </p>\n\n<pre><code>&lt;%=  MyModel.all.each do |c| %&gt;\n    toto&lt;br&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>shows this <a href=\"http://i.stack.imgur.com/Bh7FK.png\" rel=\"nofollow\">screenshot</a></p>\n\n<p>Any idea how to get rid of this list at the end?</p>\n\n<p>Thanks!</p>\n"}, {"tags": ["ruby", "sass", "compass"], "comments": [{"owner": {"reputation": 62282, "user_id": 1652962, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/2cf5a0741f183379686fe0995ffc27ae?s=128&d=identicon&r=PG", "display_name": "cimmanon", "link": "https://stackoverflow.com/users/1652962/cimmanon"}, "edited": false, "score": 0, "creation_date": 1447873417, "post_id": 33787685, "comment_id": 55343363, "body": "What&#39;s wrong with just declaring the missing functions, exactly?"}, {"owner": {"reputation": 1773, "user_id": 9942, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/b7b835fc47d1846419f3bbe184db1b2a?s=128&d=identicon&r=PG", "display_name": "Jonathan Swartz", "link": "https://stackoverflow.com/users/9942/jonathan-swartz"}, "reply_to_user": {"reputation": 62282, "user_id": 1652962, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/2cf5a0741f183379686fe0995ffc27ae?s=128&d=identicon&r=PG", "display_name": "cimmanon", "link": "https://stackoverflow.com/users/1652962/cimmanon"}, "edited": false, "score": 0, "creation_date": 1447884845, "post_id": 33787685, "comment_id": 55350042, "body": "It wasn&#39;t clear to me how to define a sass function that would return the same thing as the name of the function. Using interpolation #{}, as you suggested below, was the trick I was missing."}], "answers": [{"tags": [], "owner": {"reputation": 62282, "user_id": 1652962, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/2cf5a0741f183379686fe0995ffc27ae?s=128&d=identicon&r=PG", "display_name": "cimmanon", "link": "https://stackoverflow.com/users/1652962/cimmanon"}, "is_accepted": true, "score": 1, "last_activity_date": 1447875070, "creation_date": 1447875070, "answer_id": 33788741, "question_id": 33787685, "link": "https://stackoverflow.com/questions/33787685/can-i-remove-or-ignore-a-defined-sass-function/33788741#33788741", "title": "Can I remove or ignore a defined sass function?", "body": "<p>Compass expects you to use the provided background and background-image functions whenever you use either of the gradient functions (linear/radial).  This is how you get your prefixes.  The reason why the functions involved are written in Ruby is so that you can get an SVG gradient for browsers that don't support gradients.</p>\n\n<p>If you want absolutely none of that, just redefine the function like so:</p>\n\n<pre><code>@function linear-gradient($options...) {\n    @return #{'linear-gradient(#{$options})'};\n}\n</code></pre>\n\n<p>Before redeclaring the function:</p>\n\n<pre><code>@import \"compass/css3\";\n\n.foo {\n  background: linear-gradient(to bottom, #fdefd4, #fdc154);\n}\n\n.bar {\n  @include background(linear-gradient(to bottom, #fdefd4, #fdc154));\n}\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>.foo {\n  background: linear-gradient(to bottom, #fdefd4, #fdc154);\n}\n\n.bar {\n  background: url('data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4gPHN2ZyB2ZXJzaW9uPSIxLjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGRlZnM+PGxpbmVhckdyYWRpZW50IGlkPSJncmFkIiBncmFkaWVudFVuaXRzPSJvYmplY3RCb3VuZGluZ0JveCIgeDE9IjAuNSIgeTE9IjAuMCIgeDI9IjAuNSIgeTI9IjEuMCI+PHN0b3Agb2Zmc2V0PSIwJSIgc3RvcC1jb2xvcj0iI2ZkZWZkNCIvPjxzdG9wIG9mZnNldD0iMTAwJSIgc3RvcC1jb2xvcj0iI2ZkYzE1NCIvPjwvbGluZWFyR3JhZGllbnQ+PC9kZWZzPjxyZWN0IHg9IjAiIHk9IjAiIHdpZHRoPSIxMDAlIiBoZWlnaHQ9IjEwMCUiIGZpbGw9InVybCgjZ3JhZCkiIC8+PC9zdmc+IA==');\n  background: -webkit-gradient(linear, 50% 0%, 50% 100%, color-stop(0%, #fdefd4), color-stop(100%, #fdc154));\n  background: -moz-linear-gradient(top, #fdefd4, #fdc154);\n  background: -webkit-linear-gradient(top, #fdefd4, #fdc154);\n  background: linear-gradient(to bottom, #fdefd4, #fdc154);\n}\n</code></pre>\n\n<p>After:</p>\n\n<pre><code>@import \"compass/css3\";\n\n@function linear-gradient($options...) {\n    @return #{'linear-gradient(#{$options})'};\n}\n\n.foo {\n  background: linear-gradient(to bottom, #fdefd4, #fdc154);\n}\n\n.bar {\n  @include background(linear-gradient(to bottom, #fdefd4, #fdc154));\n}\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>.foo {\n  background: linear-gradient(to bottom, #fdefd4, #fdc154);\n}\n\n.bar {\n  background: linear-gradient(to bottom, #fdefd4, #fdc154);\n}\n</code></pre>\n\n<p>Otherwise, you'll have to implement your own versions of the Ruby functions in Sass.</p>\n"}], "owner": {"reputation": 1773, "user_id": 9942, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/b7b835fc47d1846419f3bbe184db1b2a?s=128&d=identicon&r=PG", "display_name": "Jonathan Swartz", "link": "https://stackoverflow.com/users/9942/jonathan-swartz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 260, "favorite_count": 0, "accepted_answer_id": 33788741, "answer_count": 1, "score": 1, "last_activity_date": 1447875070, "creation_date": 1447871563, "last_edit_date": 1447872193, "question_id": 33787685, "link": "https://stackoverflow.com/questions/33787685/can-i-remove-or-ignore-a-defined-sass-function", "title": "Can I remove or ignore a defined sass function?", "body": "<p>We are using Rails+Sprockets+Compass. Compass defines a <a href=\"https://github.com/Compass/compass/blob/stable/core/stylesheets/compass/css3/_images.scss#L16\" rel=\"nofollow\">linear-gradient function</a>, which conflicts with the <a href=\"https://developer.mozilla.org/en-US/docs/Web/CSS/linear-gradient\" rel=\"nofollow\">css function</a> of the same name.</p>\n\n<p>After our scss file does an <code>@import \"compass\"</code>, is there a way to remove Compass's linear-gradient function so that I can insert a raw linear-gradient into css?</p>\n\n<p>I know I can redefine the function, but I still can't figure out how to redefine it so that I can insert a raw linear-gradient. I want to remove the function entirely.</p>\n\n<p>The problem is that we're migrating to libsass, which means that Compass's Ruby-based functions no longer work. So this</p>\n\n<pre><code>@import \"compass\";\n.tmp {\n  button-background: linear-gradient(to bottom, #fdefd4, #fdc154);\n}\n</code></pre>\n\n<p>which I would like to be output as-is, compiles to this:</p>\n\n<pre><code>.tmp {\n  button-background: _linear-gradient_legacy(compact(to bottom), #fdefd4, #fdc154...);\n}\n</code></pre>\n\n<p>where <code>_linear-gradient_legacy</code> is a Ruby-based compass function that will no longer be expanded under libsass.</p>\n"}, {"tags": ["ruby", "hash", "yaml", "digest"], "comments": [{"owner": {"reputation": 1829, "user_id": 1442966, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/2347a5fea07665538a73887817f30b85?s=128&d=identicon&r=PG", "display_name": "Edward", "link": "https://stackoverflow.com/users/1442966/edward"}, "edited": false, "score": 0, "creation_date": 1447871422, "post_id": 33787533, "comment_id": 55342082, "body": "Do you mean digest the values after reading from the YAML file?"}, {"owner": {"reputation": 1485, "user_id": 5388516, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/96fff619864c3ebb7654eb98bd945b43?s=128&d=identicon&r=PG&f=1", "display_name": "13aal", "link": "https://stackoverflow.com/users/5388516/13aal"}, "reply_to_user": {"reputation": 1829, "user_id": 1442966, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/2347a5fea07665538a73887817f30b85?s=128&d=identicon&r=PG", "display_name": "Edward", "link": "https://stackoverflow.com/users/1442966/edward"}, "edited": false, "score": 0, "creation_date": 1447871555, "post_id": 33787533, "comment_id": 55342162, "body": "@Edward yes I do, I edited the question"}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1447874229, "post_id": 33787533, "comment_id": 55343844, "body": "What do you mean &quot;certain things&quot; and why is it difficult to implement in YAML? Please provide some code that demonstrates what you&#39;re trying to do, or that shows where you&#39;ve searched and why the answers didn&#39;t help you write code. As is it&#39;s not clear what you&#39;ve done. Please read &quot;<a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a>&quot;."}, {"owner": {"reputation": 1485, "user_id": 5388516, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/96fff619864c3ebb7654eb98bd945b43?s=128&d=identicon&r=PG&f=1", "display_name": "13aal", "link": "https://stackoverflow.com/users/5388516/13aal"}, "reply_to_user": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1447874641, "post_id": 33787533, "comment_id": 55344097, "body": "@theTinMan Sorry about that, I added the source codes of both of my files"}], "answers": [{"comments": [{"owner": {"reputation": 1485, "user_id": 5388516, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/96fff619864c3ebb7654eb98bd945b43?s=128&d=identicon&r=PG&f=1", "display_name": "13aal", "link": "https://stackoverflow.com/users/5388516/13aal"}, "edited": false, "score": 0, "creation_date": 1447871952, "post_id": 33787756, "comment_id": 55342415, "body": "That will digest the value of the password key..?"}, {"owner": {"reputation": 1829, "user_id": 1442966, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/2347a5fea07665538a73887817f30b85?s=128&d=identicon&r=PG", "display_name": "Edward", "link": "https://stackoverflow.com/users/1442966/edward"}, "reply_to_user": {"reputation": 1485, "user_id": 5388516, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/96fff619864c3ebb7654eb98bd945b43?s=128&d=identicon&r=PG&f=1", "display_name": "13aal", "link": "https://stackoverflow.com/users/5388516/13aal"}, "edited": false, "score": 0, "creation_date": 1447872290, "post_id": 33787756, "comment_id": 55342609, "body": "if you pass in the password, it will return a encrypted hash"}], "tags": [], "owner": {"reputation": 1829, "user_id": 1442966, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/2347a5fea07665538a73887817f30b85?s=128&d=identicon&r=PG", "display_name": "Edward", "link": "https://stackoverflow.com/users/1442966/edward"}, "is_accepted": true, "score": 2, "last_activity_date": 1447878434, "last_edit_date": 1447878434, "creation_date": 1447871783, "answer_id": 33787756, "question_id": 33787533, "link": "https://stackoverflow.com/questions/33787533/digesting-value-in-yaml-file-into-md5-hash/33787756#33787756", "title": "Digesting value in YAML file into MD5 hash", "body": "<p>You can use Digest::MD5:</p>\n\n<pre><code>require 'digest'\nDigest::MD5.digest('value')\n</code></pre>\n\n<p><a href=\"http://ruby-doc.org/stdlib-2.1.0/libdoc/digest/rdoc/Digest.html\" rel=\"nofollow\">http://ruby-doc.org/stdlib-2.1.0/libdoc/digest/rdoc/Digest.html</a></p>\n"}], "owner": {"reputation": 1485, "user_id": 5388516, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/96fff619864c3ebb7654eb98bd945b43?s=128&d=identicon&r=PG&f=1", "display_name": "13aal", "link": "https://stackoverflow.com/users/5388516/13aal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 375, "favorite_count": 0, "accepted_answer_id": 33787756, "answer_count": 1, "score": 0, "last_activity_date": 1447878434, "creation_date": 1447871126, "last_edit_date": 1447875553, "question_id": 33787533, "link": "https://stackoverflow.com/questions/33787533/digesting-value-in-yaml-file-into-md5-hash", "title": "Digesting value in YAML file into MD5 hash", "body": "<p>I have a YAML file containing usernames and passwords.</p>\n\n<p>Overview of YAML:</p>\n\n<blockquote>\n<pre><code>users:\n test:\n    password: test\n  test2:\n    password: test2\n</code></pre>\n</blockquote>\n\n<p>I want to encrypt the password value into an MD5 hash using <code>Digest::MD5</code> for example:</p>\n\n<pre><code>user:\n  Lost Bam:\n    password: testtesttest #&lt;=I want to overwrite this password with a MD5 hash\n</code></pre>\n\n<p>In Digest is there a way to encrypt a hash value? If so how do I implement this into a YAML file?</p>\n\n<p>md5.rb Source:</p>\n\n<pre><code>require 'yaml'\nrequire 'digest'\n\nprivate\n\n    def load_file\n        File.exist?('info.yml') ? YAML.load_file('info.yml') : {users: {}}\n    end\n\n    def read_file\n        File.read('info.yml')\n    end\n\n    def save_file( hash )\n        File.open('info.yml', 'w') { |f| f.write(hash.to_yaml)}\n    end\n\n    def add_user\n        hash = load_file\n        hash[\"users\"][prompt('Enter username:')] =\n            { \"password\" =&gt;  prompt('Enter password:') }\n        puts \"Encrypt information?\"\n        information = gets.chomp\n        case input\n        when /yes/i\n#           hash = Digest::MD5.digest([\"password\"]'value')&lt;-Doesn't work\n#\n#This is where I want to be able to encrypt the \n#value of the password key that was entered by the user\n#\n#           save_file( hash )\n        else\n            puts \"Add another?\"#Not completed yet\n        end\n        save_file( hash )\n    end\n</code></pre>\n\n<p>main.rb Source:</p>\n\n<pre><code>require_relative 'md5.rb'\n\ndef main\n     puts &lt;&lt;-END.gsub(/^\\s*&gt;/, '')\n                &gt;\n                &gt;To load information type \"L\" to quit system type \"Q\"\n                &gt;\n            END\n    input = gets.chomp.upcase\n    case input\n    when \"L\"\n        add_user\n    when \"Q\"\n        exit_system\n    else\n        exit_lock\n    end\nend\n\ndef exit_system\n    puts \"Exiting...\"\n    exit\nend\n\ndef exit_lock\n    puts \"Locked out, please contact system administrator\"\n    exit\nend\n\ndef restart\n    puts \"Encrypt more?\"\n    input = gets.chomp\n    if input =~ /yes/i\n        return true\n    else \n        exit_system\n    end\nend\n\ndef prompt( message )\n    puts message\n    gets.chomp\nend\nmain\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-3", "integration-testing"], "answers": [{"tags": [], "owner": {"reputation": 2738, "user_id": 747114, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/111517710867e6e4ad41e4f7784f9799?s=128&d=identicon&r=PG", "display_name": "rlarcombe", "link": "https://stackoverflow.com/users/747114/rlarcombe"}, "is_accepted": true, "score": 2, "last_activity_date": 1447872029, "last_edit_date": 1592644375, "creation_date": 1447871707, "answer_id": 33787731, "question_id": 33786975, "link": "https://stackoverflow.com/questions/33786975/rails-3-2-13-api-integration-test-with-authorization-failure/33787731#33787731", "title": "Rails 3.2.13: API Integration Test with Authorization Failure", "body": "<p>Try:</p>\n<pre><code>test 'User Index' do\n    @user = FactoryGirl.create(:user)\n    get '/api/v1/users', nil, { &quot;HTTP_AUTHORIZATION&quot; =&gt; &quot;Token token=\\&quot;#{@user.api_key}\\&quot;&quot;\n    assert_response :success\nend\n</code></pre>\n<p>See more about <a href=\"http://api.rubyonrails.org/classes/ActionDispatch/Integration/RequestHelpers.html#method-i-get\" rel=\"nofollow noreferrer\">Get in integration tests here</a>.</p>\n<p>The key you want to set in your header is called: HTTP_AUTHORIZATION</p>\n"}], "owner": {"reputation": 445, "user_id": 364174, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/2CmW9.jpg?s=128&g=1", "display_name": "stats", "link": "https://stackoverflow.com/users/364174/stats"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 26, "favorite_count": 0, "accepted_answer_id": 33787731, "answer_count": 1, "score": 2, "last_activity_date": 1447872029, "creation_date": 1447869239, "question_id": 33786975, "link": "https://stackoverflow.com/questions/33786975/rails-3-2-13-api-integration-test-with-authorization-failure", "title": "Rails 3.2.13: API Integration Test with Authorization Failure", "body": "<p>I am trying to write integration tests for an API I wrote. The api requires authorization prior to access. </p>\n\n<p>I am using FactoryGirl, with the following factory for my user:</p>\n\n<pre><code>factory :user do\n    name \"John Doe\"\n    sequence(:email) { |n| \"person-#{n}@testSuite.com\" }\n    password \"password\"\n    password_confirmation { |u| u.password }\n    api_key \"1234567890\"\nend\n</code></pre>\n\n<p>The authenticate method which is called in my controller's before_filter is:</p>\n\n<pre><code>def authenticate\n  authenticate_or_request_with_http_token do |token, options|\n    @current_user = User.where(api_key: token).first\n  end\nend\n</code></pre>\n\n<p>And my test is</p>\n\n<pre><code>test 'User Index' do\n    @user = FactoryGirl.create(:user)\n    get '/api/v1/users', authorization: \"Token token=\\\"#{@user.api_key}\\\"\"\n    assert_response :success\nend\n</code></pre>\n\n<p>This test continually fails with a response of 401 being returned.</p>\n\n<p>What is the correct way of setting the authorization token so that I can actually connect to the API?</p>\n"}, {"tags": ["ruby", "multithreading"], "comments": [{"owner": {"reputation": 5713, "user_id": 846163, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/623857ee8390f91edba65fcac0d152ab?s=128&d=identicon&r=PG", "display_name": "sschmeck", "link": "https://stackoverflow.com/users/846163/sschmeck"}, "edited": false, "score": 1, "creation_date": 1447872975, "post_id": 33786760, "comment_id": 55343086, "body": "Could you povide some code example?"}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1447874461, "post_id": 33786760, "comment_id": 55343980, "body": "Code is worth 10,000 words. What did you try? A description of the code doesn&#39;t tell us nearly as much as what you actually wrote. Please read &quot;<a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a>&quot;."}, {"owner": {"reputation": 49, "user_id": 5166732, "user_type": "registered", "accept_rate": 14, "profile_image": "https://www.gravatar.com/avatar/e08c89b5eaa3760fae996096ba92c4d3?s=128&d=identicon&r=PG&f=1", "display_name": "Datz", "link": "https://stackoverflow.com/users/5166732/datz"}, "edited": false, "score": 1, "creation_date": 1447877506, "post_id": 33786760, "comment_id": 55345900, "body": "I just added the code in question."}, {"owner": {"reputation": 5713, "user_id": 846163, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/623857ee8390f91edba65fcac0d152ab?s=128&d=identicon&r=PG", "display_name": "sschmeck", "link": "https://stackoverflow.com/users/846163/sschmeck"}, "edited": false, "score": 0, "creation_date": 1447886469, "post_id": 33786760, "comment_id": 55350767, "body": "What Ruby runtime do you use (MRI, JRuby, ...)?"}, {"owner": {"reputation": 49, "user_id": 5166732, "user_type": "registered", "accept_rate": 14, "profile_image": "https://www.gravatar.com/avatar/e08c89b5eaa3760fae996096ba92c4d3?s=128&d=identicon&r=PG&f=1", "display_name": "Datz", "link": "https://stackoverflow.com/users/5166732/datz"}, "edited": false, "score": 0, "creation_date": 1447897270, "post_id": 33786760, "comment_id": 55354401, "body": "not terribly sure, but we use irb, ruby version 1.9.3. Does that answer your question?"}], "owner": {"reputation": 49, "user_id": 5166732, "user_type": "registered", "accept_rate": 14, "profile_image": "https://www.gravatar.com/avatar/e08c89b5eaa3760fae996096ba92c4d3?s=128&d=identicon&r=PG&f=1", "display_name": "Datz", "link": "https://stackoverflow.com/users/5166732/datz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 214, "favorite_count": 1, "answer_count": 0, "score": 0, "last_activity_date": 1447877488, "creation_date": 1447868476, "last_edit_date": 1447877488, "question_id": 33786760, "link": "https://stackoverflow.com/questions/33786760/ruby-multithreading-print-stdout", "title": "Ruby multithreading print stdout", "body": "<p>I'm implementing a network in Ruby and we're having some issues with printing while multithreading. We have two threads which are listeners, so they're always on (like a server implementation would do). We want to print to stdout with both of these threads, but it seems like only one can print at a time. </p>\n\n<p>For example, we have the \"driver\" which parses a file and spawns the threads and we wanted to print some of the information we parsed from the file before we spawned the thread. The thread which is spawned has some stuff we want to print to stdout, just for debugging purposes. However the only stuff we see when we run the program is the print from the thread which we spawned. All we're doing is starting the thread with a given function and joining on it. What are we doing wrong here?</p>\n\n<pre><code>def populateFromFile()\n\n\n    file = File.open('filename.csv')\n    while( (line = file.gets) != nil)\n        #do processing and populate the neighbors array\n\n    end\n    #When we do not start the thread below, we definitely see this output\n    $neighbors.each {|neighbor| puts neighbor.to_s}\nend\n\ndef listenerFunc\n    while(true)\n        command = STDIN.gets\n        #when this thread is started, we ONLY see this output.\n        puts command\n    end\nend\n\nt1 = Thread.new{listenerFunc}\nt1.join\n</code></pre>\n"}, {"tags": ["arrays", "ruby"], "comments": [{"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1447868923, "post_id": 33786646, "comment_id": 55340655, "body": "What do you mean by &quot;the problem does not occur&quot;?"}], "answers": [{"tags": [], "owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "is_accepted": true, "score": 1, "last_activity_date": 1447868846, "last_edit_date": 1447868846, "creation_date": 1447868543, "answer_id": 33786781, "question_id": 33786646, "link": "https://stackoverflow.com/questions/33786646/why-does-adding-an-element-to-a-specific-subarray-affects-all-subarrays-of-given/33786781#33786781", "title": "Why does adding an element to a specific subarray affects all subarrays of given array?", "body": "<p>Because the first sub-array and the second sub-array in <code>but</code> are an identical array object. Affecting the second sub-array entails that the first sub-array is also affected.</p>\n\n<p>Note that arguments are evaluated prior to the method they are passed to. In <code>Array.new(2, [])</code>, the sub-array <code>[]</code> is evaluated to a single array object, then that identical array object is used twice in the newly created array.</p>\n"}], "owner": {"reputation": 363, "user_id": 4344373, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/hBNOU.jpg?s=128&g=1", "display_name": "A.V. Arno", "link": "https://stackoverflow.com/users/4344373/a-v-arno"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 51, "favorite_count": 1, "closed_date": 1447869023, "accepted_answer_id": 33786781, "answer_count": 1, "score": -1, "last_activity_date": 1447874590, "creation_date": 1447868074, "last_edit_date": 1447874590, "question_id": 33786646, "link": "https://stackoverflow.com/questions/33786646/why-does-adding-an-element-to-a-specific-subarray-affects-all-subarrays-of-given", "closed_reason": "Duplicate", "title": "Why does adding an element to a specific subarray affects all subarrays of given array?", "body": "<p>Here is my code:</p>\n\n<pre><code>but = Array.new(2, []) # =&gt; [[], []]\nbut[1] &lt;&lt; 1\nbut # =&gt; [[1], [1]]\n</code></pre>\n\n<p>If I create an array using this:</p>\n\n<pre><code>but = [[], []]\n</code></pre>\n\n<p>then the problem does not occur. However, the quantity of subarrays I need to include into <code>but</code> is not a stable variable, and alternatives I know to <code>Array.new</code>, loops etc., are cumbersome.</p>\n\n<p>Why does this happen? Doesn't <code>but[1] &lt;&lt; 1</code> affect only one specific sub-element?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "hash", "session-variables"], "comments": [{"owner": {"reputation": 9487, "user_id": 5572893, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Y0cqs.jpg?s=128&g=1", "display_name": "Long Nguyen", "link": "https://stackoverflow.com/users/5572893/long-nguyen"}, "edited": false, "score": 0, "creation_date": 1447866781, "post_id": 33786044, "comment_id": 55339334, "body": "what return if you type <code>hash2.class</code>?"}, {"owner": {"reputation": 3665, "user_id": 4330954, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/340ffba5552ac48227741a8695a255ff?s=128&d=identicon&r=PG", "display_name": "x6iae", "link": "https://stackoverflow.com/users/4330954/x6iae"}, "edited": false, "score": 0, "creation_date": 1447866851, "post_id": 33786044, "comment_id": 55339382, "body": "I&#39;m expecting that to be <code>String</code>"}], "answers": [{"comments": [{"owner": {"reputation": 302, "user_id": 2644111, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/9ndPn.jpg?s=128&g=1", "display_name": "Aitizazk", "link": "https://stackoverflow.com/users/2644111/aitizazk"}, "edited": false, "score": 0, "creation_date": 1447870144, "post_id": 33786633, "comment_id": 55341344, "body": "it doesn&#39;t solve the problem. I have found a solution but i dont think that is the right one if i do hash2[&quot;a&quot;] it works instead of hash2[:a] i dont know what is the difference"}], "tags": [], "owner": {"reputation": 1989, "user_id": 1520130, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d9000383017000de1e1025f4f80d8655?s=128&d=identicon&r=PG", "display_name": "osman", "link": "https://stackoverflow.com/users/1520130/osman"}, "is_accepted": false, "score": 2, "last_activity_date": 1447868023, "last_edit_date": 1495541242, "creation_date": 1447868023, "answer_id": 33786633, "question_id": 33786044, "link": "https://stackoverflow.com/questions/33786044/unable-to-retrieve-hash-from-session/33786633#33786633", "title": "Unable to retrieve hash from session", "body": "<p>You can only store strings in the session hash unless you serialize it or deserialize it. The session store is typically cookies. You can probably use eval(hash2) to get the hash - at least with the hash you posted - if there was a lambda or something else it wouldn't work. </p>\n\n<p>An idea of how to serialize is nicely detailed here:</p>\n\n<p><a href=\"https://stackoverflow.com/questions/20056297/can-store-hash-in-a-cookie\">Can store hash in a cookie?</a></p>\n"}, {"tags": [], "owner": {"reputation": 302, "user_id": 2644111, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/9ndPn.jpg?s=128&g=1", "display_name": "Aitizazk", "link": "https://stackoverflow.com/users/2644111/aitizazk"}, "is_accepted": true, "score": 0, "last_activity_date": 1448373914, "creation_date": 1448373914, "answer_id": 33895712, "question_id": 33786044, "link": "https://stackoverflow.com/questions/33786044/unable-to-retrieve-hash-from-session/33895712#33895712", "title": "Unable to retrieve hash from session", "body": "<p>I have found a solution but i dont think that is the right one if i do hash2[\"a\"] it works instead of hash2[:a] i dont know what is the difference</p>\n"}], "owner": {"reputation": 302, "user_id": 2644111, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/9ndPn.jpg?s=128&g=1", "display_name": "Aitizazk", "link": "https://stackoverflow.com/users/2644111/aitizazk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 44, "favorite_count": 0, "accepted_answer_id": 33895712, "answer_count": 2, "score": -2, "last_activity_date": 1448373914, "creation_date": 1447866211, "last_edit_date": 1447867103, "question_id": 33786044, "link": "https://stackoverflow.com/questions/33786044/unable-to-retrieve-hash-from-session", "title": "Unable to retrieve hash from session", "body": "<p>I have a hash:</p>\n\n<pre><code>hash = {:a=&gt;1, :b=&gt;2}\n</code></pre>\n\n<p>I save it in session:</p>\n\n<pre><code>session[:hash_map] = hash\n</code></pre>\n\n<p>When I retrieve the hash:</p>\n\n<pre><code>hash2 = session[:hash_map]\n</code></pre>\n\n<p><code>hash2</code> is:</p>\n\n<pre><code>{:a=&gt;1, :b=&gt;2}\n</code></pre>\n\n<p>but <code>hash2[:a]</code> and <code>hash2[:b]</code> return <code>nil</code>. Any idea why this is happening?</p>\n"}, {"tags": ["ruby", "chef-infra", "chef-recipe"], "answers": [{"comments": [{"owner": {"reputation": 409, "user_id": 4043517, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/48ef8db2ae117beddce23ceb17e1a13d?s=128&d=identicon&r=PG&f=1", "display_name": "Johnny5", "link": "https://stackoverflow.com/users/4043517/johnny5"}, "edited": false, "score": 0, "creation_date": 1448057479, "post_id": 33795115, "comment_id": 55439200, "body": "Deleted the cookbook, retyped the parts not generated by chef, and re uploaded the cookbook.  It runs now.  I suspect the error was related to developing part of the cookbook on windows and part on mac."}], "tags": [], "owner": {"reputation": 43208, "user_id": 78722, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf611565f0b79abd0b3dc200ad867661?s=128&d=identicon&r=PG", "display_name": "coderanger", "link": "https://stackoverflow.com/users/78722/coderanger"}, "is_accepted": true, "score": 0, "last_activity_date": 1447906221, "creation_date": 1447906221, "answer_id": 33795115, "question_id": 33785923, "link": "https://stackoverflow.com/questions/33785923/chef-client-run-fails-to-sync-cookbooks-with-eoferror-end-of-file-reached/33795115#33795115", "title": "chef-client run fails to sync cookbooks with EOFError: end of file reached", "body": "<p>When chef-client starts up, one of the things it has to do is download the cookbook code it is going to use for the run. This is cached locally to speed future runs, but the first time or when files change etc etc. This exception is saying that it is failing while trying to download the ewe-powershell cookbook from the server. This possibly means it was corrupted during the upload process. A quick first check would be to <code>knife cookbook delete</code> that one and re-upload it. If that fails I would start trying to figure out what file is failing to download. If you turn up Chef's log level (<code>-l debug</code>) you should see which URL it is trying to get, which will tell you which file is failing. With that in hand, try curl'ing it directly from Bookshelf (the service with Chef Server that handles file upload and download).</p>\n"}, {"tags": [], "owner": {"reputation": 3556, "user_id": 506908, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84c874984f69ef596764255efcd79113?s=128&d=identicon&r=PG", "display_name": "lamont", "link": "https://stackoverflow.com/users/506908/lamont"}, "is_accepted": false, "score": 0, "last_activity_date": 1448415730, "creation_date": 1448415730, "answer_id": 33907139, "question_id": 33785923, "link": "https://stackoverflow.com/questions/33785923/chef-client-run-fails-to-sync-cookbooks-with-eoferror-end-of-file-reached/33907139#33907139", "title": "chef-client run fails to sync cookbooks with EOFError: end of file reached", "body": "<p>These are due to networking errors.  They're not client bugs, and cannot be fixed by deleting and reuploading cookbooks.</p>\n\n<p>There's some information here in a gist I made:</p>\n\n<p><a href=\"https://gist.github.com/lamont-granquist/e25af8f50cb4ae4f8050\" rel=\"nofollow\">https://gist.github.com/lamont-granquist/e25af8f50cb4ae4f8050</a></p>\n\n<p>Also more information:</p>\n\n<p><a href=\"https://discourse.chef.io/t/eoferror-when-decrypting-data-bags/5716/2\" rel=\"nofollow\">https://discourse.chef.io/t/eoferror-when-decrypting-data-bags/5716/2</a>\n<a href=\"https://github.com/chef/chef/issues/1881\" rel=\"nofollow\">https://github.com/chef/chef/issues/1881</a></p>\n\n<p>EOFErrors have been tracked down to broken proxies, PMTU issues (VPNs or filtering ICMP dest unreachable), jumbo frames, buggy TCP offload in networking drivers/hardware, Xen bugs, etc.</p>\n\n<p>You should be able to replicate the problem on the command line if you use large enough packets.  If your chef server is chef.example.com then you can send a large ping packet on windows with:</p>\n\n<pre><code>ping chef.example.com -f -l 9999\n</code></pre>\n\n<p>You can also send a large ping package or large GET request on unixes:</p>\n\n<pre><code>ping -s 9999 chef.example.com\ncurl http://chef.example.com/`printf '%*s' 9999 '' | tr ' ' 'a'`\n</code></pre>\n\n<p>Approaches like that can help replicate the issue completely outside of any chef-related software and show that its the network.  The ultimate fix will have to come from spending the time to debug the underlying network problem.  In this case, it sounds like the network magically fixed itself.</p>\n\n<p>(and keep in mind by \"the network\" I include the host TCP stacks and network drivers on either end including any virtualization technology that network communication has to pass through--\"the network\" in the broadest sense possible...)</p>\n"}], "owner": {"reputation": 409, "user_id": 4043517, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/48ef8db2ae117beddce23ceb17e1a13d?s=128&d=identicon&r=PG&f=1", "display_name": "Johnny5", "link": "https://stackoverflow.com/users/4043517/johnny5"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1903, "favorite_count": 0, "accepted_answer_id": 33795115, "answer_count": 2, "score": 1, "last_activity_date": 1448415730, "creation_date": 1447865819, "last_edit_date": 1447889289, "question_id": 33785923, "link": "https://stackoverflow.com/questions/33785923/chef-client-run-fails-to-sync-cookbooks-with-eoferror-end-of-file-reached", "title": "chef-client run fails to sync cookbooks with EOFError: end of file reached", "body": "<p>When running a cookbook with chef-client, the run fails with this error:\n  EOFError: end of file reached</p>\n\n<p>I'm fairly new to this, and I don't know what this means.  The cookbook is a very simple wrapper around the community cookbook which should be good.\n<a href=\"https://supermarket.chef.io/cookbooks/powershell\" rel=\"nofollow\">https://supermarket.chef.io/cookbooks/powershell</a></p>\n\n<p>Here's the error again:</p>\n\n<pre><code>Synchronizing Cookbooks:\n  - windows (1.37.0)\n  - ms_dotnet2 (0.0.0)\n  - ms_dotnet45 (0.0.0)\n  - powershell (3.1.0)\n  - chef_handler (1.1.8)\n  - ewe-powershell (0.1.0)\n\n  ================================================================================\n  Error Syncing Cookbooks:\n  ================================================================================\n\n  Unexpected Error:\n  -----------------\n  EOFError: end of file reached\n\n\n  Running handlers:\n[2015-11-18T08:30:15-08:00] ERROR: Running exception handlers\n  Running handlers complete\n[2015-11-18T08:30:15-08:00] ERROR: Exception handlers complete\n  Chef Client failed. 0 resources updated in 24 seconds\n[2015-11-18T08:30:15-08:00] FATAL: Stacktrace dumped to c:/chef/cache/chef-stacktrace.out\n[2015-11-18T08:30:15-08:00] FATAL: EOFError: end of file reached\n\nC:\\WINDOWS\\system32&gt;\n</code></pre>\n\n<p>and here's the stacktrace:</p>\n\n<pre><code>Generated at 2015-11-18 08:30:15 -0800\nEOFError: end of file reached\nC:/opscode/chef/embedded/lib/ruby/2.0.0/net/protocol.rb:153:in `read_nonblock'\nC:/opscode/chef/embedded/lib/ruby/2.0.0/net/protocol.rb:153:in `rbuf_fill'\nC:/opscode/chef/embedded/lib/ruby/2.0.0/net/protocol.rb:134:in `readuntil'\nC:/opscode/chef/embedded/lib/ruby/2.0.0/net/protocol.rb:144:in `readline'\nC:/opscode/chef/embedded/lib/ruby/2.0.0/net/http/response.rb:39:in `read_status_line'\nC:/opscode/chef/embedded/lib/ruby/2.0.0/net/http/response.rb:28:in `read_new'\nC:/opscode/chef/embedded/lib/ruby/2.0.0/net/http.rb:1412:in `block in transport_request'\nC:/opscode/chef/embedded/lib/ruby/2.0.0/net/http.rb:1409:in `catch'\nC:/opscode/chef/embedded/lib/ruby/2.0.0/net/http.rb:1409:in `transport_request'\nC:/opscode/chef/embedded/lib/ruby/2.0.0/net/http.rb:1382:in `request'\nC:/opscode/chef/embedded/lib/ruby/2.0.0/net/http.rb:1375:in `block in request'\nC:/opscode/chef/embedded/lib/ruby/2.0.0/net/http.rb:852:in `start'\nC:/opscode/chef/embedded/lib/ruby/2.0.0/net/http.rb:1373:in `request'\nC:/opscode/chef/embedded/lib/ruby/gems/2.0.0/gems/chef-12.5.1-universal-mingw32/lib/chef/http/basic_client.rb:65:in `request'\nC:/opscode/chef/embedded/lib/ruby/gems/2.0.0/gems/chef-12.5.1-universal-mingw32/lib/chef/http.rb:264:in `block in send_http_request'\nC:/opscode/chef/embedded/lib/ruby/gems/2.0.0/gems/chef-12.5.1-universal-mingw32/lib/chef/http.rb:298:in `block in retrying_http_errors'\nC:/opscode/chef/embedded/lib/ruby/gems/2.0.0/gems/chef-12.5.1-universal-mingw32/lib/chef/http.rb:296:in `loop'\nC:/opscode/chef/embedded/lib/ruby/gems/2.0.0/gems/chef-12.5.1-universal-mingw32/lib/chef/http.rb:296:in `retrying_http_errors'\nC:/opscode/chef/embedded/lib/ruby/gems/2.0.0/gems/chef-12.5.1-universal-mingw32/lib/chef/http.rb:260:in `send_http_request'\nC:/opscode/chef/embedded/lib/ruby/gems/2.0.0/gems/chef-12.5.1-universal-mingw32/lib/chef/http.rb:170:in `streaming_request'\nC:/opscode/chef/embedded/lib/ruby/gems/2.0.0/gems/chef-12.5.1-universal-mingw32/lib/chef/rest.rb:180:in `streaming_request'\nC:/opscode/chef/embedded/lib/ruby/gems/2.0.0/gems/chef-12.5.1-universal-mingw32/lib/chef/rest.rb:118:in `get'\nC:/opscode/chef/embedded/lib/ruby/gems/2.0.0/gems/chef-12.5.1-universal-mingw32/lib/chef/cookbook/synchronizer.rb:277:in `download_file'\nC:/opscode/chef/embedded/lib/ruby/gems/2.0.0/gems/chef-12.5.1-universal-mingw32/lib/chef/cookbook/synchronizer.rb:254:in `sync_file'\nC:/opscode/chef/embedded/lib/ruby/gems/2.0.0/gems/chef-12.5.1-universal-mingw32/lib/chef/cookbook/synchronizer.rb:152:in `block (2 levels) in sync_cookbooks'\nC:/opscode/chef/embedded/lib/ruby/gems/2.0.0/gems/chef-12.5.1-universal-mingw32/lib/chef/util/threaded_job_queue.rb:52:in `call'\nC:/opscode/chef/embedded/lib/ruby/gems/2.0.0/gems/chef-12.5.1-universal-mingw32/lib/chef/util/threaded_job_queue.rb:52:in `block (3 levels) in process'\nC:/opscode/chef/embedded/lib/ruby/gems/2.0.0/gems/chef-12.5.1-universal-mingw32/lib/chef/util/threaded_job_queue.rb:50:in `loop'\nC:/opscode/chef/embedded/lib/ruby/gems/2.0.0/gems/chef-12.5.1-universal-mingw32/lib/chef/util/threaded_job_queue.rb:50:in `block (2 levels) in process'\n</code></pre>\n\n<p>Does this mean there is some EOFError in protocol.rb ?\nBut that's part of the community cookbook, which I thought looked pretty solid.</p>\n"}, {"tags": ["ruby", "date", "strptime"], "comments": [{"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1447865820, "post_id": 33785322, "comment_id": 55338658, "body": "I believe because there is an uncertainty in what this should result to, next Monday, or previous one."}, {"owner": {"reputation": 25180, "user_id": 1849664, "user_type": "moderator", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/9278dc00e1a8755dc2de02b6a908a15a?s=128&d=identicon&r=PG", "display_name": "Undo", "link": "https://stackoverflow.com/users/1849664/undo"}, "reply_to_user": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 1, "creation_date": 1447865884, "post_id": 33785322, "comment_id": 55338698, "body": "@mudasobwa I originally thought that, but the example of the last two working is interesting - they&#39;re both even more ambiguous, yet DateTime doesn&#39;t have any problems."}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1447868629, "post_id": 33785322, "comment_id": 55340493, "body": "Excellent question that needs to be asked of the development team; It sounds like a bug to me. In the future, it&#39;d make a stronger question if you use <code>&#39;Monday&#39;</code> for both the initial example and the second <code>DateTime.strptime(&#39;Wednesday&#39;, &#39;%A&#39;)</code> as initially it wasn&#39;t clear if <code>strptime</code> was choking on <code>&quot;Monday&quot;</code> vs. <code>&quot;Wednesday&quot;</code> or a change in format."}, {"owner": {"reputation": 198293, "user_id": 707111, "user_type": "moderator", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/oXZkh.jpg?s=128&g=1", "display_name": "Ry-", "link": "https://stackoverflow.com/users/707111/ry"}, "edited": false, "score": 0, "creation_date": 1447869321, "post_id": 33785322, "comment_id": 55340874, "body": "<code>DateTime.strptime(&#39;Monday 10:20&#39;, &#39;%A %H:%M&#39;)</code> works, too. How odd!"}, {"owner": {"reputation": 198293, "user_id": 707111, "user_type": "moderator", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/oXZkh.jpg?s=128&g=1", "display_name": "Ry-", "link": "https://stackoverflow.com/users/707111/ry"}, "edited": false, "score": 2, "creation_date": 1447872722, "post_id": 33785322, "comment_id": 55342916, "body": "<code>Date._strptime(&#39;Monday 10:20:20&#39;, &#39;%A %H:%M:%S&#39;)</code> also works properly; it looks like <code>date_core.c</code>\u2019s <code>rt_complete_frags</code> is at fault, though it\u2019s really hard to read."}, {"owner": {"reputation": 25180, "user_id": 1849664, "user_type": "moderator", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/9278dc00e1a8755dc2de02b6a908a15a?s=128&d=identicon&r=PG", "display_name": "Undo", "link": "https://stackoverflow.com/users/1849664/undo"}, "reply_to_user": {"reputation": 198293, "user_id": 707111, "user_type": "moderator", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/oXZkh.jpg?s=128&g=1", "display_name": "Ry-", "link": "https://stackoverflow.com/users/707111/ry"}, "edited": false, "score": 0, "creation_date": 1447891734, "post_id": 33785322, "comment_id": 55352728, "body": "Posted a workaround that takes advantage of the <code>_strptime</code> method @minitech mentioned, but this definitely seems like a bug. Please link to it here if/when you report it!"}], "answers": [{"tags": [], "owner": {"reputation": 25180, "user_id": 1849664, "user_type": "moderator", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/9278dc00e1a8755dc2de02b6a908a15a?s=128&d=identicon&r=PG", "display_name": "Undo", "link": "https://stackoverflow.com/users/1849664/undo"}, "is_accepted": true, "score": 2, "last_activity_date": 1447892029, "last_edit_date": 1495542236, "creation_date": 1447891458, "answer_id": 33792917, "question_id": 33785322, "link": "https://stackoverflow.com/questions/33785322/datetime-strptime-returns-invalid-date-for-weekday-time-string/33792917#33792917", "title": "`DateTime.strptime` returns invalid date for weekday/time string", "body": "<p>This looks like a bug - <a href=\"https://stackoverflow.com/questions/33785322/datetime-strptime-returns-invalid-date-for-weekday-time-string#comment55342916_33785322\">minitech's comment</a> is spot on. For now, though, a workaround (because you probably want this to work <em>now</em>):</p>\n\n<p>You can split it on the space, get the date from the weekday, then get the time component from the other string (using the <a href=\"http://apidock.com/ruby/Date/_strptime/class\" rel=\"nofollow noreferrer\"><code>_strptime</code></a> method minitech mentioned).  Then you can set the time on the first date to the time component from the second string:</p>\n\n<pre><code>def datetime_from_weekday_time_string(string)\n  components = string.split(\" \")\n  date = DateTime.strptime(components[0], '%A')\n  time = Date._strptime(components[1], '%H:%M:%S') # returns a hash like {:hour=&gt;10, :min=&gt;20, :sec=&gt;20} \n  return date.change(time)\nend\n\n2.2.2 :021 &gt; datetime_from_weekday_time_string(\"Monday 10:20:20\")\n =&gt; Mon, 16 Nov 2015 10:20:20 +0000 \n\n2.2.2 :022 &gt; datetime_from_weekday_time_string(\"Saturday 11:45:21\")\n =&gt; Sat, 21 Nov 2015 11:45:21 +0000\n\n2.2.2 :023 &gt; datetime_from_weekday_time_string(\"Thursday 23:59:59\")\n =&gt; Thu, 19 Nov 2015 23:59:59 +0000 \n</code></pre>\n"}], "owner": {"reputation": 6171, "user_id": 131618, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/X389j.jpg?s=128&g=1", "display_name": "Pavel K.", "link": "https://stackoverflow.com/users/131618/pavel-k"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 369, "favorite_count": 1, "accepted_answer_id": 33792917, "answer_count": 1, "score": 6, "last_activity_date": 1447892029, "creation_date": 1447864129, "last_edit_date": 1447891860, "question_id": 33785322, "link": "https://stackoverflow.com/questions/33785322/datetime-strptime-returns-invalid-date-for-weekday-time-string", "title": "`DateTime.strptime` returns invalid date for weekday/time string", "body": "<p>Why won't Ruby's <code>strptime</code> convert this to a DateTime object:</p>\n\n<pre><code>DateTime.strptime('Monday 10:20:20', '%A %H:%M:%S')\n# =&gt; ArgumentError: invalid date\n</code></pre>\n\n<p>While these work?</p>\n\n<pre><code>DateTime.strptime('Wednesday', '%A')\n# =&gt; #&lt;DateTime: 2015-11-18T00:00:00+00:00 ((2457345j,0s,0n),+0s,2299161j)&gt;\nDateTime.strptime('10:20:20', '%H:%M:%S')\n# =&gt; #&lt;DateTime: 2015-11-18T10:20:20+00:00 ((2457345j,37220s,0n),+0s,2299161j)&gt;\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4"], "answers": [{"comments": [{"owner": {"reputation": 43, "user_id": 3468440, "user_type": "registered", "accept_rate": 12, "profile_image": "https://graph.facebook.com/1316802897/picture?type=large", "display_name": "user3468440", "link": "https://stackoverflow.com/users/3468440/user3468440"}, "edited": false, "score": 0, "creation_date": 1447870359, "post_id": 33785164, "comment_id": 55341474, "body": "Cool, it&#39;s the right path but getting some errors that I need help with working out.  <a href=\"http://pastebin.com/12RUyDuW\" rel=\"nofollow noreferrer\">pastebin.com/12RUyDuW</a>"}], "tags": [], "owner": {"reputation": 3805, "user_id": 2075801, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f845c96122bd745f0614185a840d850b?s=128&d=identicon&r=PG", "display_name": "Yury Lebedev", "link": "https://stackoverflow.com/users/2075801/yury-lebedev"}, "is_accepted": false, "score": 0, "last_activity_date": 1447863692, "creation_date": 1447863692, "answer_id": 33785164, "question_id": 33784141, "link": "https://stackoverflow.com/questions/33784141/rails-4-edit-update-threads-edit-update-posts/33785164#33785164", "title": "Rails 4: Edit/Update Threads, Edit/Update Posts", "body": "<p>It would be <code>edit_forum_thread_forum_post_path</code> based on your <code>rake routes</code> output.</p>\n"}], "owner": {"reputation": 43, "user_id": 3468440, "user_type": "registered", "accept_rate": 12, "profile_image": "https://graph.facebook.com/1316802897/picture?type=large", "display_name": "user3468440", "link": "https://stackoverflow.com/users/3468440/user3468440"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 56, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1447863692, "creation_date": 1447860836, "question_id": 33784141, "link": "https://stackoverflow.com/questions/33784141/rails-4-edit-update-threads-edit-update-posts", "title": "Rails 4: Edit/Update Threads, Edit/Update Posts", "body": "<p>Before I begin yes I know I need a edit and update function in the posts and threads controller, but the issue I have is with the forum_post.user details getting lost in the update and the thread duplicating posts after the update, so I removed the code entirely so I can get help solving the problem by posting the controllers themselves.</p>\n\n<p>But you're going to need the routes, before I post it /forum/ is just a fake route to nest the forum_threads/posts in and does not exist outside of it's scope.</p>\n\n<p>Rake Routes output</p>\n\n<pre><code>   Prefix Verb   URI Pattern                                                          Controller#Action\n            new_user_session GET    /users/sign_in(.:format)                                             devise/sessions#new\n                user_session POST   /users/sign_in(.:format)                                             devise/sessions#create\n        destroy_user_session DELETE /users/sign_out(.:format)                                            devise/sessions#destroy\n               user_password POST   /users/password(.:format)                                            devise/passwords#create\n           new_user_password GET    /users/password/new(.:format)                                        devise/passwords#new\n          edit_user_password GET    /users/password/edit(.:format)                                       devise/passwords#edit\n                             PATCH  /users/password(.:format)                                            devise/passwords#update\n                             PUT    /users/password(.:format)                                            devise/passwords#update\n    cancel_user_registration GET    /users/cancel(.:format)                                              devise/registrations#cancel\n           user_registration POST   /users(.:format)                                                     devise/registrations#create\n       new_user_registration GET    /users/sign_up(.:format)                                             devise/registrations#new\n      edit_user_registration GET    /users/edit(.:format)                                                devise/registrations#edit\n                             PATCH  /users(.:format)                                                     devise/registrations#update\n                             PUT    /users(.:format)                                                     devise/registrations#update\n                             DELETE /users(.:format)                                                     devise/registrations#destroy\n    forum_thread_forum_posts GET    /forum/forum_threads/:forum_thread_id/forum_posts(.:format)          forum_threads/forum_posts#index\n                             POST   /forum/forum_threads/:forum_thread_id/forum_posts(.:format)          forum_threads/forum_posts#create\n new_forum_thread_forum_post GET    /forum/forum_threads/:forum_thread_id/forum_posts/new(.:format)      forum_threads/forum_posts#new\nedit_forum_thread_forum_post GET    /forum/forum_threads/:forum_thread_id/forum_posts/:id/edit(.:format) forum_threads/forum_posts#edit\n     forum_thread_forum_post GET    /forum/forum_threads/:forum_thread_id/forum_posts/:id(.:format)      forum_threads/forum_posts#show\n                             PATCH  /forum/forum_threads/:forum_thread_id/forum_posts/:id(.:format)      forum_threads/forum_posts#update\n                             PUT    /forum/forum_threads/:forum_thread_id/forum_posts/:id(.:format)      forum_threads/forum_posts#update\n                             DELETE /forum/forum_threads/:forum_thread_id/forum_posts/:id(.:format)      forum_threads/forum_posts#destroy\n               forum_threads GET    /forum/forum_threads(.:format)                                       forum_threads#index\n                             POST   /forum/forum_threads(.:format)                                       forum_threads#create\n            new_forum_thread GET    /forum/forum_threads/new(.:format)                                   forum_threads#new\n           edit_forum_thread GET    /forum/forum_threads/:id/edit(.:format)                              forum_threads#edit\n                forum_thread GET    /forum/forum_threads/:id(.:format)                                   forum_threads#show\n                             PATCH  /forum/forum_threads/:id(.:format)                                   forum_threads#update\n                             PUT    /forum/forum_threads/:id(.:format)                                   forum_threads#update\n                             DELETE /forum/forum_threads/:id(.:format)                                   forum_threads#destroy\n                import_users POST   /users/import(.:format)                                              users#import\n                       users GET    /users(.:format)                                                     users#index\n                             POST   /users(.:format)                                                     users#create\n                    new_user GET    /users/new(.:format)                                                 users#new\n                   edit_user GET    /users/:id/edit(.:format)                                            users#edit\n                        user GET    /users/:id(.:format)                                                 users#show\n                             PATCH  /users/:id(.:format)                                                 users#update\n                             PUT    /users/:id(.:format)                                                 users#update\n                             DELETE /users/:id(.:format)                                                 users#destroy\n                        root GET    /                                                                    forum_threads#index\n</code></pre>\n\n<p>Routes:</p>\n\n<pre><code>Rails.application.routes.draw do\ndevise_for :users\n  scope \"/forum\" do\n        resources :forum_threads do\n                resources :forum_posts, module: :forum_threads\n        end\n  end\n\n  resources :users do\n    collection do\n      post :import\n    end\n  end\nroot 'forum_threads#index'\nend\n</code></pre>\n\n<p>Forum Threads Controller</p>\n\n<pre><code>class ForumThreadsController &lt; ApplicationController\n  before_action :authenticate_user!, except: [:index, :show]\n  before_action :set_forum_thread, except: [:index, :new, :create]\n\n  def index\n    @q = ForumThread.search(params[:q])\n    @forum_threads = @q.result(distinct: true)\n  end\n\n  def show\n    @forum_post = ForumPost.new\n  end\n\n  def new\n    @forum_thread = ForumThread.new\n    @forum_thread.forum_posts.new\n  end\n\n  def create\n    @forum_thread = current_user.forum_threads.new forum_thread_params\n    @forum_thread.forum_posts.first.user_id = current_user.id\n\n    if @forum_thread.save\n      redirect_to @forum_thread\n    else\n      render action: :new\n    end\n  end\n\n  def destroy\n    @forum_thread.destroy\n    redirect_to root_path\n  end\n\n  private\n\n    def set_forum_thread\n      @forum_thread = ForumThread.find(params[:id])\n    end\n\n    def forum_thread_params\n      params.require(:forum_thread).permit(:subject, forum_posts_attributes: [:body])\n    end\nend\n</code></pre>\n\n<p>Forum Posts Controller</p>\n\n<pre><code>class ForumThreads::ForumPostsController &lt; ApplicationController\n  before_action :authenticate_user!\n  before_action :set_forum_thread\n\n  def create\n    @forum_post = @forum_thread.forum_posts.new forum_post_params\n    @forum_post.user = current_user\n\n    if @forum_post.save\n      redirect_to forum_thread_path(@forum_thread, anchor: \"forum_post_#{@forum_post.id}\"), notice: \"Successfully posted!\"\n    else\n      redirect_to @forum_thread, alert: \"Unable to save your post\"\n    end\n  end\n\n  private\n\n    def set_forum_thread\n      @forum_thread = ForumThread.find(params[:forum_thread_id])\n    end\n\n    def forum_post_params\n      params.require(:forum_post).permit(:body)\n    end\nend\n</code></pre>\n\n<p>I know the forum edit path for link_to will be edit_forum_thread_path or just correct me if I'm wrong, but it's the posts edit/delete path I need help with since that controller is nested under forum_threads and using the module forum_threads, I originally figured it would be edit_forum_threads_forum_posts_path but that wasn't it either last time I tried before I removed those functions. </p>\n"}, {"tags": ["ruby-on-rails", "ruby", "rubymine", "ruby-debug", "rubymine-7"], "comments": [{"owner": {"reputation": 9487, "user_id": 5572893, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Y0cqs.jpg?s=128&g=1", "display_name": "Long Nguyen", "link": "https://stackoverflow.com/users/5572893/long-nguyen"}, "edited": false, "score": 0, "creation_date": 1447861736, "post_id": 33783946, "comment_id": 55335642, "body": "have you tried <code>gem install yaml_db</code>?"}, {"owner": {"reputation": 302, "user_id": 2644111, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/9ndPn.jpg?s=128&g=1", "display_name": "Aitizazk", "link": "https://stackoverflow.com/users/2644111/aitizazk"}, "reply_to_user": {"reputation": 9487, "user_id": 5572893, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Y0cqs.jpg?s=128&g=1", "display_name": "Long Nguyen", "link": "https://stackoverflow.com/users/5572893/long-nguyen"}, "edited": false, "score": 0, "creation_date": 1447862810, "post_id": 33783946, "comment_id": 55336512, "body": "yes i installed yaml_db but still i am getting the same error in ruby mine"}], "owner": {"reputation": 302, "user_id": 2644111, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/9ndPn.jpg?s=128&g=1", "display_name": "Aitizazk", "link": "https://stackoverflow.com/users/2644111/aitizazk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 155, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1447873685, "creation_date": 1447860305, "last_edit_date": 1447873685, "question_id": 33783946, "link": "https://stackoverflow.com/questions/33783946/unable-to-run-debug-on-rubymine", "title": "Unable to run debug on rubymine", "body": "<p>RubyMine is not running server in debug mode it shows the following error</p>\n\n<pre><code>Uncaught exception: Could not find yaml_db-0.3.0 in any of the sources\n</code></pre>\n\n<p>I tried to change yam_db to 0.3.5 in gem file but that throws another error. Why is it still showing this error?</p>\n\n<p>Complete Error</p>\n\n<pre><code>ast Debugger (ruby-debug-ide 0.4.32, debase 0.1.4) listens on 127.0.0.1:58007\nUncaught exception: Could not find yaml_db-0.3.0 in any of the sources\n    /home/aitizazk/.rvm/gems/ruby-2.2.1@global/gems/bundler-1.8.4/lib/bundler/spec_set.rb:92:in `block in materialize'\n    /home/aitizazk/.rvm/gems/ruby-2.2.1@global/gems/bundler-1.8.4/lib/bundler/spec_set.rb:85:in `map!'\n    /home/aitizazk/.rvm/gems/ruby-2.2.1@global/gems/bundler-1.8.4/lib/bundler/spec_set.rb:85:in `materialize'\n    /home/aitizazk/.rvm/gems/ruby-2.2.1@global/gems/bundler-1.8.4/lib/bundler/definition.rb:132:in `specs'\n    /home/aitizazk/.rvm/gems/ruby-2.2.1@global/gems/bundler-1.8.4/lib/bundler/definition.rb:177:in `specs_for'\n    /home/aitizazk/.rvm/gems/ruby-2.2.1@global/gems/bundler-1.8.4/lib/bundler/definition.rb:166:in `requested_specs'\n    /home/aitizazk/.rvm/gems/ruby-2.2.1@global/gems/bundler-1.8.4/lib/bundler/environment.rb:18:in `requested_specs'\n    /home/aitizazk/.rvm/gems/ruby-2.2.1@global/gems/bundler-1.8.4/lib/bundler/runtime.rb:13:in `setup'\n    /home/aitizazk/.rvm/gems/ruby-2.2.1@global/gems/bundler-1.8.4/lib/bundler.rb:122:in `setup'\n    /home/aitizazk/.rvm/gems/ruby-2.2.1@global/gems/bundler-1.8.4/lib/bundler/setup.rb:18:in `&lt;top (required)&gt;'\n    /home/aitizazk/.rvm/rubies/ruby-2.2.1/lib/ruby/site_ruby/2.2.0/rubygems/core_ext/kernel_require.rb:54:in `require'\n    /home/aitizazk/.rvm/rubies/ruby-2.2.1/lib/ruby/site_ruby/2.2.0/rubygems/core_ext/kernel_require.rb:54:in `require'\n    /home/aitizazk/Rails/MyApp/config/boot.rb:3:in `&lt;top (required)&gt;'\n    /home/aitizazk/Rails/MyApp/bin/rails:7:in `require_relative'\n    /home/aitizazk/Rails/MyApp/bin/rails:7:in `&lt;top (required)&gt;'\n\nProcess finished with exit code 0\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby"], "answers": [{"comments": [{"owner": {"reputation": 529, "user_id": 3574178, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/6f9079310597136064b4b8197f7a8bf5?s=128&d=identicon&r=PG&f=1", "display_name": "Neil", "link": "https://stackoverflow.com/users/3574178/neil"}, "edited": false, "score": 0, "creation_date": 1447862644, "post_id": 33784328, "comment_id": 55336365, "body": "Gem &amp; application helper updated, restarted the server but didn&#39;t work"}, {"owner": {"reputation": 3548, "user_id": 1381240, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/VglOh.jpg?s=128&g=1", "display_name": "Dusht", "link": "https://stackoverflow.com/users/1381240/dusht"}, "reply_to_user": {"reputation": 529, "user_id": 3574178, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/6f9079310597136064b4b8197f7a8bf5?s=128&d=identicon&r=PG&f=1", "display_name": "Neil", "link": "https://stackoverflow.com/users/3574178/neil"}, "edited": false, "score": 0, "creation_date": 1447863975, "post_id": 33784328, "comment_id": 55337307, "body": "@Neil Please be sure you wrapped your code like this <a href=\"https://help.github.com/articles/github-flavored-markdown/#syntax-highlighting\" rel=\"nofollow noreferrer\">help.github.com/articles/github-flavored-markdown/&hellip;</a>"}], "tags": [], "owner": {"reputation": 3548, "user_id": 1381240, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/VglOh.jpg?s=128&g=1", "display_name": "Dusht", "link": "https://stackoverflow.com/users/1381240/dusht"}, "is_accepted": true, "score": 1, "last_activity_date": 1447864105, "last_edit_date": 1447864105, "creation_date": 1447861294, "answer_id": 33784328, "question_id": 33783690, "link": "https://stackoverflow.com/questions/33783690/rails-4-2-no-syntax-highlighting-using-pygments-gem/33784328#33784328", "title": "Rails 4.2: No syntax highlighting using Pygments gem", "body": "<p>Use <a href=\"https://github.com/rubychan/coderay\" rel=\"nofollow\">coderay</a> instead for syntax highlighting (and can remove all css classes you have defined for highlighting). It doesn't have external dependencies and gives amazing results.</p>\n\n<p>Add following gem to your gemfile:</p>\n\n<p><code>gem 'coderay'</code></p>\n\n<p>then, <code>bundle install</code></p>\n\n<p>Now in your application_helper.rb, define a helper method (as you did for Pygments) to covert text to HTML and simultaneously have syntax highlighting integrated.</p>\n\n<pre><code>class CodeRayify &lt; Redcarpet::Render::HTML\n    def block_code(code, language)\n        CodeRay.scan(code, language).div\n    end\nend\n\ndef markdown(text)\n    coderayified = CodeRayify.new(filter_html: true,  hard_wrap: true)\n    options = {\n        :fenced_code_blocks =&gt; true,\n        :no_intra_emphasis =&gt; true,\n        :autolink =&gt; true,\n        :strikethrough =&gt; true,\n        :lax_html_blocks =&gt; true,\n        :superscript =&gt; true\n    }\n    markdown_to_html = Redcarpet::Markdown.new(coderayified, options)\n    markdown_to_html.render(text).html_safe\nend\n</code></pre>\n\n<p>Now wherever you need to convert text to HTML, you can simply pass that text into a method named 'markdown' as show below</p>\n\n<p><code>markdown(your_content_text)</code> </p>\n\n<p>[Edit]</p>\n\n<p>Also, please note that, you need to write your code in following <a href=\"https://help.github.com/articles/github-flavored-markdown/#syntax-highlighting\" rel=\"nofollow\">format</a></p>\n\n<pre><code>```ruby\n\nyour code lines\n\n```\n</code></pre>\n\n<p>I hope it helps!</p>\n"}], "owner": {"reputation": 529, "user_id": 3574178, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/6f9079310597136064b4b8197f7a8bf5?s=128&d=identicon&r=PG&f=1", "display_name": "Neil", "link": "https://stackoverflow.com/users/3574178/neil"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 350, "favorite_count": 0, "accepted_answer_id": 33784328, "answer_count": 1, "score": 0, "last_activity_date": 1447864105, "creation_date": 1447859655, "last_edit_date": 1447862525, "question_id": 33783690, "link": "https://stackoverflow.com/questions/33783690/rails-4-2-no-syntax-highlighting-using-pygments-gem", "title": "Rails 4.2: No syntax highlighting using Pygments gem", "body": "<p>Want to create code snippets &amp; markdown on a wiki blog. Markdown works fine with redcarpet but not getting code snippets. Installed Pygments gem created a pygments.scss file and copied the following text.</p>\n\n<p>/*\n   Some simple Github-like styles, with syntax highlighting CSS via Pygments.\n*/</p>\n\n<pre><code>pre{\n  background-color: #eee;\n  padding: 1.5rem 3.5%;\n  margin: 2rem 0;\n  -webkit-border-radius: 5px;\n  -moz-border-radius: 5px;\n  border-radius: 5px;\n  overflow: auto;\n}\ncode{\n  background-color: #eee;\n  padding: 1px 3px;\n  -webkit-border-radius: 2px;\n  -moz-border-radius: 2px;\n  border-radius: 2px;\n}\n\n.hll { background-color: #ffffcc }\n.c { color: #999988; font-style: italic } /* Comment */\n.err { color: #a61717; background-color: #e3d2d2 } /* Error */\n.k { color: #000000; font-weight: bold } /* Keyword */\n.o { color: #000000; font-weight: bold } /* Operator */\n.cm { color: #999988; font-style: italic } /* Comment.Multiline */\n.cp { color: #999999; font-weight: bold; font-style: italic } /* Comment.Preproc */\n.c1 { color: #999988; font-style: italic } /* Comment.Single */\n.cs { color: #999999; font-weight: bold; font-style: italic } /* Comment.Special */\n.gd { color: #000000; background-color: #ffdddd } /* Generic.Deleted */\n.ge { color: #000000; font-style: italic } /* Generic.Emph */\n.gr { color: #aa0000 } /* Generic.Error */\n.gh { color: #999999 } /* Generic.Heading */\n.gi { color: #000000; background-color: #ddffdd } /* Generic.Inserted */\n.go { color: #888888 } /* Generic.Output */\n.gp { color: #555555 } /* Generic.Prompt */\n.gs { font-weight: bold } /* Generic.Strong */\n.gu { color: #aaaaaa } /* Generic.Subheading */\n.gt { color: #aa0000 } /* Generic.Traceback */\n.kc { color: #000000; font-weight: bold } /* Keyword.Constant */\n.kd { color: #000000; font-weight: bold } /* Keyword.Declaration */\n.kn { color: #000000; font-weight: bold } /* Keyword.Namespace */\n.kp { color: #000000; font-weight: bold } /* Keyword.Pseudo */\n.kr { color: #000000; font-weight: bold } /* Keyword.Reserved */\n.kt { color: #445588; font-weight: bold } /* Keyword.Type */\n.m { color: #009999 } /* Literal.Number */\n.s { color: #d01040 } /* Literal.String */\n.na { color: #008080 } /* Name.Attribute */\n.nb { color: #0086B3 } /* Name.Builtin */\n.nc { color: #445588; font-weight: bold } /* Name.Class */\n.no { color: #008080 } /* Name.Constant */\n.nd { color: #3c5d5d; font-weight: bold } /* Name.Decorator */\n.ni { color: #800080 } /* Name.Entity */\n.ne { color: #990000; font-weight: bold } /* Name.Exception */\n.nf { color: #990000; font-weight: bold } /* Name.Function */\n.nl { color: #990000; font-weight: bold } /* Name.Label */\n.nn { color: #555555 } /* Name.Namespace */\n.nt { color: #000080 } /* Name.Tag */\n.nv { color: #008080 } /* Name.Variable */\n.ow { color: #000000; font-weight: bold } /* Operator.Word */\n.w { color: #bbbbbb } /* Text.Whitespace */\n.mf { color: #009999 } /* Literal.Number.Float */\n.mh { color: #009999 } /* Literal.Number.Hex */\n.mi { color: #009999 } /* Literal.Number.Integer */\n.mo { color: #009999 } /* Literal.Number.Oct */\n.sb { color: #d01040 } /* Literal.String.Backtick */\n.sc { color: #d01040 } /* Literal.String.Char */\n.sd { color: #d01040 } /* Literal.String.Doc */\n.s2 { color: #d01040 } /* Literal.String.Double */\n.se { color: #d01040 } /* Literal.String.Escape */\n.sh { color: #d01040 } /* Literal.String.Heredoc */\n.si { color: #d01040 } /* Literal.String.Interpol */\n.sx { color: #d01040 } /* Literal.String.Other */\n.sr { color: #009926 } /* Literal.String.Regex */\n.s1 { color: #d01040 } /* Literal.String.Single */\n.ss { color: #990073 } /* Literal.String.Symbol */\n.bp { color: #999999 } /* Name.Builtin.Pseudo */\n.vc { color: #008080 } /* Name.Variable.Class */\n.vg { color: #008080 } /* Name.Variable.Global */\n.vi { color: #008080 } /* Name.Variable.Instance */\n.il { color: #009999 } /* Literal.Number.Integer.Long */\n</code></pre>\n\n<p>imported the file into application.scss</p>\n\n<pre><code>$dark: #424652;\n  $light: #9a9da4;\n  $highlight: #8bc6db;\n  $border: #E9E9E9;\n  $white: #FFFFFF;\n  @import url(http://fonts.googleapis.com/css?family=Raleway:400,700);\n  @import \"normalize\";\n  @import \"welcome\";\n  @import \"bootstrap-sprockets\";\n  @import \"bootstrap\";\n  @import \"articles\";\n  @import \"pygments\";\n  @import \"bootstrap-wysihtml5/bootstrap3-wysihtml5\";\n</code></pre>\n\n<p>try to add new code  it does not give me any code block or syntax highlighting. </p>\n\n<p>gemfile</p>\n\n<pre><code>ruby '2.2.3'\ngem 'rails', '4.2.4'\ngem 'sqlite3', group: :development\ngem 'sass-rails', '~&gt; 5.0'\ngem 'uglifier', '&gt;= 1.3.0'\ngem 'coffee-rails', '~&gt; 4.1.0'\ngem 'jquery-rails'\ngem 'turbolinks'\ngem 'jbuilder', '~&gt; 2.0'\ngem 'sdoc', '~&gt; 0.4.0', group: :doc\ngem 'bootstrap-sass', '~&gt; 3.3.5'\ngem 'pygments.rb', '~&gt; 0.6.0'\ngem 'redcarpet', '~&gt; 3.2.2'\ngem 'devise'\ngem 'bootstrap-wysihtml5-rails', github: 'nerian/bootstrap-wysihtml5-rails'\ngem 'will_paginate', '~&gt; 3.0.7'\n</code></pre>\n\n<p>application.helper.rb</p>\n\n<pre><code>module ApplicationHelper\n  class HTMLwithPygments &lt; Redcarpet::Render::HTML\n    def block_code(code, language)\n      Pygments.highlight(code, lexer: language)\n    end\n  end\n  def markdown(content)\n    renderer = HTMLwithPygments.new(hard_wrap: true, filter_html: true)\n    options = {\n      autolink: true,\n      no_intra_emphasis: true,\n      disable_indented_code_blocks: true,\n      fenced_code_blocks: true,\n      lax_html_blocks: true,\n      strikethrough: true,\n      superscript: true\n    }\n    Redcarpet::Markdown.new(renderer, options).render(content).html_safe\n  end\n</code></pre>\n\n<p>updated application helper file</p>\n\n<pre><code>module ApplicationHelper\n class CodeRayify &lt; Redcarpet::Render::HTML\n    def block_code(code, language)\n        CodeRay.scan(code, language).div\n    end\nend\n\ndef markdown(text)\n    coderayified = CodeRayify.new(filter_html: true,  hard_wrap: true)\n    options = {\n        :fenced_code_blocks =&gt; true,\n        :no_intra_emphasis =&gt; true,\n        :autolink =&gt; true,\n        :strikethrough =&gt; true,\n        :lax_html_blocks =&gt; true,\n        :superscript =&gt; true\n    }\n    markdown_to_html = Redcarpet::Markdown.new(coderayified, options)\n    markdown_to_html.render(text).html_safe\n end\nend\n</code></pre>\n\n<p>removed the pygments file </p>\n\n<p>and updated the show page</p>\n\n<pre><code>&lt;div id=\"post_show_content\" class=\"skinny_wrapper\nwrapper_padding\"&gt;\n  &lt;header&gt;\n    &lt;p class=\"date\"&gt;&lt;%= @post.created_at.strftime('%A, %B %d') %&gt;&lt;/p&gt;\n    &lt;h1&gt;&lt;b&gt;&lt;%= @post.title %&gt;&lt;/b&gt;&lt;/h1&gt;\n    &lt;hr&gt;\n  &lt;/header&gt;\n\n  &lt;div id=\"content\"&gt;\n    **&lt;%= markdown @post.content %&gt;**\n  &lt;/div&gt;\n\n   &lt;hr&gt;\n     &lt;%= link_to \"&lt;-Back\", posts_path %&gt;\n\n\n  &lt;/div&gt;\n\n&lt;% if user_signed_in? %&gt;\n\n    &lt;% if @post.user_id == current_user.id %&gt;\n\n    &lt;div id=\"admin_links\"&gt;\n      &lt;%= link_to \"Edit Article\", edit_post_path(@post), class: \"btn btn-default\" %&gt;\n      &lt;%= link_to \"Delete Article\", post_path(@post), method: :delete, data: { confirm: 'Are you sure you want to delete this post?' }, class: \"btn btn-default\" %&gt;\n    &lt;/div&gt;\n\n  &lt;% end %&gt;\n&lt;% end %&gt;\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "arrays", "ruby"], "comments": [{"owner": {"reputation": 366, "user_id": 3494703, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RA7JG.png?s=128&g=1", "display_name": "Jalai", "link": "https://stackoverflow.com/users/3494703/jalai"}, "edited": false, "score": 2, "creation_date": 1447859710, "post_id": 33783655, "comment_id": 55334044, "body": "I&#39;m somewhat new to Ruby, but to me, you can&#39;t feed the array in because then @article.type.name would have to be an array, rather than an individual item.  I believe in the Ruby Koans there is an example which shows how to use an array and string and determine if there is a match inside the array."}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "reply_to_user": {"reputation": 366, "user_id": 3494703, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RA7JG.png?s=128&g=1", "display_name": "Jalai", "link": "https://stackoverflow.com/users/3494703/jalai"}, "edited": false, "score": 0, "creation_date": 1447859837, "post_id": 33783655, "comment_id": 55334146, "body": "@Jalai: you&#39;re totally correct here. I don&#39;t know if it&#39;s poor wording or twisted expectations on Matthew&#39;s part. :)"}, {"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1447861030, "post_id": 33783655, "comment_id": 55335066, "body": "Why could you? ....."}], "answers": [{"comments": [{"owner": {"reputation": 193, "user_id": 5172168, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/3j9tN.jpg?s=128&g=1", "display_name": "Matthew Bennett", "link": "https://stackoverflow.com/users/5172168/matthew-bennett"}, "edited": false, "score": 0, "creation_date": 1447860095, "post_id": 33783715, "comment_id": 55334348, "body": "Thank you Sergio, that&#39;s great. I as unaware of that syntax."}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "reply_to_user": {"reputation": 193, "user_id": 5172168, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/3j9tN.jpg?s=128&g=1", "display_name": "Matthew Bennett", "link": "https://stackoverflow.com/users/5172168/matthew-bennett"}, "edited": false, "score": 2, "creation_date": 1447860166, "post_id": 33783715, "comment_id": 55334403, "body": "@MatthewBennett: this is not a special syntax. It&#39;s just a method that exists. Ruby/rails is full of useful functionality like this."}], "tags": [], "owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "is_accepted": true, "score": 5, "last_activity_date": 1447859720, "creation_date": 1447859720, "answer_id": 33783715, "question_id": 33783655, "link": "https://stackoverflow.com/questions/33783655/with-array-of-values/33783715#33783715", "title": "== with array of values", "body": "<p>In rails you can use <code>in?</code></p>\n\n<pre><code>unless article.type.name.in?(['blog', 'live blog'])\n</code></pre>\n\n<p>In plain ruby, it's <code>include?</code></p>\n\n<pre><code>unless ['blog', 'live blog'].include?(article.type.name)\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 193, "user_id": 5172168, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/3j9tN.jpg?s=128&g=1", "display_name": "Matthew Bennett", "link": "https://stackoverflow.com/users/5172168/matthew-bennett"}, "edited": false, "score": 0, "creation_date": 1447860103, "post_id": 33783725, "comment_id": 55334354, "body": "Thank you AbM, that&#39;s great. I as unaware of that syntax."}], "tags": [], "owner": {"reputation": 6165, "user_id": 2697183, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/65255fe741b95ba0c641d96ea6750ea9?s=128&d=identicon&r=PG&f=1", "display_name": "AbM", "link": "https://stackoverflow.com/users/2697183/abm"}, "is_accepted": false, "score": 1, "last_activity_date": 1447859748, "creation_date": 1447859748, "answer_id": 33783725, "question_id": 33783655, "link": "https://stackoverflow.com/questions/33783655/with-array-of-values/33783725#33783725", "title": "== with array of values", "body": "<p>You can use <a href=\"http://apidock.com/ruby/Array/include%3F\" rel=\"nofollow\"><code>include?</code></a>:</p>\n\n<pre><code>&lt;% unless [\"BLOG\", \"LIVE BLOG\"].include?(@article.type.name)  %&gt;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "is_accepted": false, "score": 1, "last_activity_date": 1447861619, "creation_date": 1447861619, "answer_id": 33784447, "question_id": 33783655, "link": "https://stackoverflow.com/questions/33783655/with-array-of-values/33784447#33784447", "title": "== with array of values", "body": "<p>Another \"trick\" might be to use a regular expression:</p>\n\n<pre><code>&lt;% unless @article.type.name =~ /^(BLOG|LIVE BLOG)$/ %&gt;\n</code></pre>\n\n<p>Maybe it's sufficient to just check for \"blog\":</p>\n\n<pre><code>&lt;% unless @article.type.name =~ /blog/i %&gt;\n</code></pre>\n\n<p>You can also use <code>if</code> and <a href=\"http://ruby-doc.org/core-2.2.3/Object.html#method-i-21-7E\" rel=\"nofollow\"><code>!~</code></a> instead of <code>unless</code> and <code>=~</code>:</p>\n\n<pre><code>&lt;% if @article.type.name !~ /blog/i %&gt;\n</code></pre>\n"}], "owner": {"reputation": 193, "user_id": 5172168, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/3j9tN.jpg?s=128&g=1", "display_name": "Matthew Bennett", "link": "https://stackoverflow.com/users/5172168/matthew-bennett"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 46, "favorite_count": 0, "accepted_answer_id": 33783715, "answer_count": 3, "score": -1, "last_activity_date": 1447861619, "creation_date": 1447859554, "last_edit_date": 1447861154, "question_id": 33783655, "link": "https://stackoverflow.com/questions/33783655/with-array-of-values", "title": "== with array of values", "body": "<p>To make it equivalent with:</p>\n\n<pre><code>&lt;% unless @article.type.name == \"BLOG\" || @article.type.name == \"LIVE BLOG\" %&gt;\n</code></pre>\n\n<p>why can't I feed an array of values like the following?</p>\n\n<pre><code>&lt;% unless @article.type.name == [\"BLOG\", \"LIVE BLOG\"] %&gt;\n</code></pre>\n\n<p>Is there a trick for this, or does it not exist?</p>\n"}, {"tags": ["c++", "ruby-on-rails", "ruby", "macos", "gem"], "comments": [{"owner": {"reputation": 1, "user_id": 5235296, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f90bd54652f67070b21ec561ea41681b?s=128&d=identicon&r=PG&f=1", "display_name": "\u043c\u0430\u043a\u0441\u0438\u043c \u043f\u0430\u0440\u0444\u0435\u043d\u043e\u0432", "link": "https://stackoverflow.com/users/5235296/%d0%bc%d0%b0%d0%ba%d1%81%d0%b8%d0%bc-%d0%bf%d0%b0%d1%80%d1%84%d0%b5%d0%bd%d0%be%d0%b2"}, "reply_to_user": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "edited": false, "score": 0, "creation_date": 1447916698, "post_id": 33783236, "comment_id": 55360736, "body": "<a href=\"https://rubygems.org/gems/io_splice\" rel=\"nofollow noreferrer\">rubygems.org/gems/io_splice</a>"}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 5235296, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f90bd54652f67070b21ec561ea41681b?s=128&d=identicon&r=PG&f=1", "display_name": "\u043c\u0430\u043a\u0441\u0438\u043c \u043f\u0430\u0440\u0444\u0435\u043d\u043e\u0432", "link": "https://stackoverflow.com/users/5235296/%d0%bc%d0%b0%d0%ba%d1%81%d0%b8%d0%bc-%d0%bf%d0%b0%d1%80%d1%84%d0%b5%d0%bd%d0%be%d0%b2"}, "edited": false, "score": 0, "creation_date": 1447914678, "post_id": 33784013, "comment_id": 55359803, "body": "and how to cheat the rails so that they thought that this gem is there, but in fact it is not? that the has been successfully bundle"}], "tags": [], "owner": {"reputation": 9540, "user_id": 254936, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/5744827a6042af02213a6094d6146111?s=128&d=identicon&r=PG", "display_name": "TK-421", "link": "https://stackoverflow.com/users/254936/tk-421"}, "is_accepted": false, "score": 0, "last_activity_date": 1447860477, "creation_date": 1447860477, "answer_id": 33784013, "question_id": 33783236, "link": "https://stackoverflow.com/questions/33783236/io-splice-for-osx-el-capitan-error/33784013#33784013", "title": "io_splice for OSX EL Capitan error", "body": "<p><code>splice</code> is <a href=\"https://en.wikipedia.org/wiki/Splice_%28system_call%29\" rel=\"nofollow\">Linux-only</a>. Also explained <a href=\"http://bogomips.org/ruby_io_splice/\" rel=\"nofollow\">here</a> and <a href=\"http://bogomips.org/ruby-io-splice/20130316020511.GA17263%40dcvr.yhbt.net/\" rel=\"nofollow\">here</a>.</p>\n"}], "owner": {"reputation": 1, "user_id": 5235296, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f90bd54652f67070b21ec561ea41681b?s=128&d=identicon&r=PG&f=1", "display_name": "\u043c\u0430\u043a\u0441\u0438\u043c \u043f\u0430\u0440\u0444\u0435\u043d\u043e\u0432", "link": "https://stackoverflow.com/users/5235296/%d0%bc%d0%b0%d0%ba%d1%81%d0%b8%d0%bc-%d0%bf%d0%b0%d1%80%d1%84%d0%b5%d0%bd%d0%be%d0%b2"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 175, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1448091338, "creation_date": 1447858439, "last_edit_date": 1448091338, "question_id": 33783236, "link": "https://stackoverflow.com/questions/33783236/io-splice-for-osx-el-capitan-error", "title": "io_splice for OSX EL Capitan error", "body": "<p>I am trying to install a gem in the OS X!. I am thinking that the problem is at the level of connection of the file to \u0421.</p>\n\n<blockquote>\n  <p><strong>require 'mkmf'</strong> </p>\n  \n  <p><strong>$CPPFLAGS &lt;&lt; ' -D_GNU_SOURCE=1'</strong></p>\n  \n  <p><strong>have_func('splice', %w(fcntl.h)) or abort 'splice(2) not defined'</strong></p>\n  \n  <p><strong>have_func('tee', %w(fcntl.h)) or abort 'tee(2) not defined'</strong></p>\n  \n  <p><strong>have_func('pipe2', %w(fcntl.h unistd.h))</strong></p>\n  \n  <p><strong>have_func('rb_thread_blocking_region')</strong></p>\n  \n  <p><strong>have_func('rb_thread_call_without_gvl')</strong> </p>\n  \n  <p><strong>have_macro('F_GETPIPE_SZ',%w(fcntl.h))</strong> </p>\n  \n  <p><strong>have_macro('F_SETPIPE_SZ', %w(fcntl.h))</strong></p>\n  \n  <p><strong>create_makefile('io_splice_ext')</strong></p>\n</blockquote>\n\n<pre><code>gem install io_splice\n</code></pre>\n\n<p>Error!</p>\n\n<pre><code>Building native extensions.  This could take a while...\nERROR:  Error installing io_splice:\n    ERROR: Failed to build gem native extension.\n    /Users/parfenov/.rvm/rubies/ruby-1.9.3-p551/bin/ruby -r ./siteconf20151118-25778-1qyxgw.rb extconf.rb\nchecking for splice() in fcntl.h... no\nsplice(2) not defined\n*** extconf.rb failed ***\nCould not create Makefile due to some reason, probably lack of\nnecessary libraries and/or headers.  Check the mkmf.log file for more\ndetails.  You may need configuration options.\nProvided configuration options:\n    --with-opt-dir\n    --with-opt-include\n    --without-opt-include=${opt-dir}/include\n    --with-opt-lib\n    --without-opt-lib=${opt-dir}/lib\n    --with-make-prog\n    --without-make-prog\n    --srcdir=.\n    --curdir\n    --ruby=/Users/parfenov/.rvm/rubies/ruby-1.9.3-p551/bin/ruby\nextconf failed, exit code 1\nGem files will remain installed in /Users/parfenov/.rvm/gems/ruby-1.9.3-p551/gems/io_splice-4.4.0 for inspection.\nResults logged to /Users/parfenov/.rvm/gems/ruby-1.9.3-p551/extensions/x86_64-darwin-14/1.9.1/io_splice-4.4.0/gem_make.out\n</code></pre>\n\n<p><strong>mkmf.log</strong></p>\n\n<pre><code>have_func: checking for splice() in fcntl.h... -------------------- no\n\n\"/usr/local/bin/gcc-4.9 -o conftest -I/Users/parfenov/.rvm/rubies/ruby-1.9.3-p551/include/ruby-1.9.1/x86_64-darwin14.5.0 -I/Users/parfenov/.rvm/rubies/ruby-1.9.3-p551/include/ruby-1.9.1/ruby/backward -I/Users/parfenov/.rvm/rubies/ruby-1.9.3-p551/include/ruby-1.9.1 -I. -D_XOPEN_SOURCE -D_DARWIN_C_SOURCE   -I/usr/local/opt/libyaml/include -I/usr/local/opt/readline/include -I/usr/local/opt/libksba/include -I/usr/local/opt/openssl/include -D_GNU_SOURCE=1  -O3 -ggdb -Wall -Wextra -Wno-unused-parameter -Wno-parentheses -Wno-long-long -Wno-missing-field-initializers -Wpointer-arith -Wwrite-strings -Wdeclaration-after-statement -Wimplicit-function-declaration  -fno-common -pipe conftest.c  -L. -L/Users/parfenov/.rvm/rubies/ruby-1.9.3-p551/lib -L/usr/local/opt/libyaml/lib -L/usr/local/opt/readline/lib -L/usr/local/opt/libksba/lib -L/usr/local/opt/openssl/lib -L.  -L/usr/local/opt/libyaml/lib -L/usr/local/opt/readline/lib -L/usr/local/opt/libksba/lib -L/usr/local/opt/openssl/lib      -lruby.1.9.1  -lpthread -ldl -lobjc \"\nchecked program was:\n/* begin */\n1: #include \"ruby.h\"\n2: \n3: int main(int argc, char **argv)\n4: {\n5:   return 0;\n6: }\n/* end */\n\n\"/usr/local/bin/gcc-4.9 -o conftest -I/Users/parfenov/.rvm/rubies/ruby-1.9.3-p551/include/ruby-1.9.1/x86_64-darwin14.5.0 -I/Users/parfenov/.rvm/rubies/ruby-1.9.3-p551/include/ruby-1.9.1/ruby/backward -I/Users/parfenov/.rvm/rubies/ruby-1.9.3-p551/include/ruby-1.9.1 -I. -D_XOPEN_SOURCE -D_DARWIN_C_SOURCE   -I/usr/local/opt/libyaml/include -I/usr/local/opt/readline/include -I/usr/local/opt/libksba/include -I/usr/local/opt/openssl/include -D_GNU_SOURCE=1  -O3 -ggdb -Wall -Wextra -Wno-unused-parameter -Wno-parentheses -Wno-long-long -Wno-missing-field-initializers -Wpointer-arith -Wwrite-strings -Wdeclaration-after-statement -Wimplicit-function-declaration  -fno-common -pipe conftest.c  -L. -L/Users/parfenov/.rvm/rubies/ruby-1.9.3-p551/lib -L/usr/local/opt/libyaml/lib -L/usr/local/opt/readline/lib -L/usr/local/opt/libksba/lib -L/usr/local/opt/openssl/lib -L.  -L/usr/local/opt/libyaml/lib -L/usr/local/opt/readline/lib -L/usr/local/opt/libksba/lib -L/usr/local/opt/openssl/lib      -lruby.1.9.1  -lpthread -ldl -lobjc \"\nconftest.c: In function 't':\nconftest.c:6:53: error: 'splice' undeclared (first use in this function)\n int t() { void ((*volatile p)()); p = (void ((*)()))splice; return 0; }\n                                                     ^\nconftest.c:6:53: note: each undeclared identifier is reported only once for each function it appears in\nconftest.c:6:28: warning: variable 'p' set but not used [-Wunused-but-set-variable]\n int t() { void ((*volatile p)()); p = (void ((*)()))splice; return 0; }\n                            ^\nchecked program was:\n/* begin */\n 1: #include \"ruby.h\"\n 2: \n 3: #include &lt;fcntl.h&gt;\n 4: \n 5: /*top*/\n 6: int t() { void ((*volatile p)()); p = (void ((*)()))splice; return 0; }\n 7: int main(int argc, char **argv)\n 8: {\n 9:   if (argc &gt; 1000000) {\n10:     printf(\"%p\", &amp;t);\n11:   }\n12: \n13:   return 0;\n14: }\n/* end */\n\n\"/usr/local/bin/gcc-4.9 -o conftest -I/Users/parfenov/.rvm/rubies/ruby-1.9.3-p551/include/ruby-1.9.1/x86_64-darwin14.5.0 -I/Users/parfenov/.rvm/rubies/ruby-1.9.3-p551/include/ruby-1.9.1/ruby/backward -I/Users/parfenov/.rvm/rubies/ruby-1.9.3-p551/include/ruby-1.9.1 -I. -D_XOPEN_SOURCE -D_DARWIN_C_SOURCE   -I/usr/local/opt/libyaml/include -I/usr/local/opt/readline/include -I/usr/local/opt/libksba/include -I/usr/local/opt/openssl/include -D_GNU_SOURCE=1  -O3 -ggdb -Wall -Wextra -Wno-unused-parameter -Wno-parentheses -Wno-long-long -Wno-missing-field-initializers -Wpointer-arith -Wwrite-strings -Wdeclaration-after-statement -Wimplicit-function-declaration  -fno-common -pipe conftest.c  -L. -L/Users/parfenov/.rvm/rubies/ruby-1.9.3-p551/lib -L/usr/local/opt/libyaml/lib -L/usr/local/opt/readline/lib -L/usr/local/opt/libksba/lib -L/usr/local/opt/openssl/lib -L.  -L/usr/local/opt/libyaml/lib -L/usr/local/opt/readline/lib -L/usr/local/opt/libksba/lib -L/usr/local/opt/openssl/lib      -lruby.1.9.1  -lpthread -ldl -lobjc \"\nconftest.c: In function 't':\nconftest.c:6:1: warning: implicit declaration of function 'splice' [-Wimplicit-function-declaration]\n int t() { splice(); return 0; }\n ^\nUndefined symbols for architecture x86_64:\n  \"_splice\", referenced from:\n      _t in cc2dFoEe.o\nld: symbol(s) not found for architecture x86_64\ncollect2: error: ld returned 1 exit status\nchecked program was:\n/* begin */\n 1: #include \"ruby.h\"\n 2: \n 3: #include &lt;fcntl.h&gt;\n 4: \n 5: /*top*/\n 6: int t() { splice(); return 0; }\n 7: int main(int argc, char **argv)\n 8: {\n 9:   if (argc &gt; 1000000) {\n10:     printf(\"%p\", &amp;t);\n11:   }\n12: \n13:   return 0;\n14: }\n/* end */\n\n--------------------\n</code></pre>\n\n<p>ruby 1.9.3 </p>\n"}, {"tags": ["ruby-on-rails", "ruby", "unit-testing", "activerecord", "rspec"], "answers": [{"comments": [{"owner": {"reputation": 43, "user_id": 4882713, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-F4ZcFt2MWKI/AAAAAAAAAAI/AAAAAAAAAOI/82g2C7swbz0/photo.jpg?sz=128", "display_name": "iWanabi", "link": "https://stackoverflow.com/users/4882713/iwanabi"}, "edited": false, "score": 0, "creation_date": 1447861405, "post_id": 33783874, "comment_id": 55335371, "body": "Well as much as I understand the data will have to be stored in a database."}, {"owner": {"reputation": 108, "user_id": 1107630, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bc132ecc8fe673cb5fdb95d4e254a138?s=128&d=identicon&r=PG", "display_name": "funnydaredevil", "link": "https://stackoverflow.com/users/1107630/funnydaredevil"}, "reply_to_user": {"reputation": 43, "user_id": 4882713, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-F4ZcFt2MWKI/AAAAAAAAAAI/AAAAAAAAAOI/82g2C7swbz0/photo.jpg?sz=128", "display_name": "iWanabi", "link": "https://stackoverflow.com/users/4882713/iwanabi"}, "edited": false, "score": 0, "creation_date": 1447933279, "post_id": 33783874, "comment_id": 55371250, "body": "yes, the purpose of models is to perform data store, and your business logic remains untouched."}, {"owner": {"reputation": 43, "user_id": 4882713, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-F4ZcFt2MWKI/AAAAAAAAAAI/AAAAAAAAAOI/82g2C7swbz0/photo.jpg?sz=128", "display_name": "iWanabi", "link": "https://stackoverflow.com/users/4882713/iwanabi"}, "edited": false, "score": 0, "creation_date": 1447938804, "post_id": 33783874, "comment_id": 55375155, "body": "Yes I know the logic should not change, but there should be some simple changes like inheriting ActiveRecord::Base and stuff like that, but I don&#39;t quite fully understand what else should change and also, should I place my tests and logic classes to the corresponding &#39;models&#39; folders?"}, {"owner": {"reputation": 108, "user_id": 1107630, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bc132ecc8fe673cb5fdb95d4e254a138?s=128&d=identicon&r=PG", "display_name": "funnydaredevil", "link": "https://stackoverflow.com/users/1107630/funnydaredevil"}, "reply_to_user": {"reputation": 43, "user_id": 4882713, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-F4ZcFt2MWKI/AAAAAAAAAAI/AAAAAAAAAOI/82g2C7swbz0/photo.jpg?sz=128", "display_name": "iWanabi", "link": "https://stackoverflow.com/users/4882713/iwanabi"}, "edited": false, "score": 0, "creation_date": 1447939137, "post_id": 33783874, "comment_id": 55375407, "body": "you shouldn&#39;t move your logic classes to models folder, instead of create models separately. So that models are responsible for persistent layer and rest of your existing code should invoke glue module&#39;s read/write functions that works with model"}], "tags": [], "owner": {"reputation": 108, "user_id": 1107630, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bc132ecc8fe673cb5fdb95d4e254a138?s=128&d=identicon&r=PG", "display_name": "funnydaredevil", "link": "https://stackoverflow.com/users/1107630/funnydaredevil"}, "is_accepted": true, "score": 0, "last_activity_date": 1456833841, "last_edit_date": 1456833841, "creation_date": 1447860114, "answer_id": 33783874, "question_id": 33782671, "link": "https://stackoverflow.com/questions/33782671/converting-a-ruby-application-to-ruby-on-rails-activerecord-one/33783874#33783874", "title": "Converting a Ruby application to Ruby on Rails ActiveRecord one", "body": "<p>For my opininion, you should keep separately your business logic and data. So that the possible solution would be described in few steps:</p>\n\n<ol>\n<li>Create a new ActiveRecord models, e.g. Song</li>\n<li>Add <em>glue</em> module, that would perform read/write operations between AR model and your custom class attributes.</li>\n</ol>\n\n<p>The benefit of this solution is that you don't need to rewrite your business layer and tests, only <em>glue</em> module should be mixined to your classes.</p>\n"}, {"tags": [], "owner": {"reputation": 3171, "user_id": 2610043, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/jIN0G.jpg?s=128&g=1", "display_name": "hedgesky", "link": "https://stackoverflow.com/users/2610043/hedgesky"}, "is_accepted": false, "score": 0, "last_activity_date": 1448642293, "creation_date": 1448642293, "answer_id": 33961626, "question_id": 33782671, "link": "https://stackoverflow.com/questions/33782671/converting-a-ruby-application-to-ruby-on-rails-activerecord-one/33961626#33961626", "title": "Converting a Ruby application to Ruby on Rails ActiveRecord one", "body": "<p>It depends on your project, but generally, Rails' models should correspond to models in your Ruby app. Possibly all you'll need to do is just inherit your <code>Song</code> class from <code>ActiveRecord::Base</code>, create table \"songs\" in database (usually it is done with migrations), and here you are!</p>\n\n<p>What @funnydaredevil talks about is decoupling persistent layer from logic layer. It's common decision to reduce complexity of big applications. But I think that on first steps of app life it is overengineering.</p>\n\n<p>About test: surely you can use Factory Girl.</p>\n\n<pre><code>before do\n  @song = FactoryGirl.build(:song)\nend\n\n# factories/song.rb\nFactoryGirl.define do\n  factory :song do\n    id { Random.rand(100) }\n    title  'Some song'\n    author 'Some author'\n    path 'C:/song.mp3'\n  end\nend\n</code></pre>\n"}], "owner": {"reputation": 43, "user_id": 4882713, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-F4ZcFt2MWKI/AAAAAAAAAAI/AAAAAAAAAOI/82g2C7swbz0/photo.jpg?sz=128", "display_name": "iWanabi", "link": "https://stackoverflow.com/users/4882713/iwanabi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 76, "favorite_count": 0, "accepted_answer_id": 33783874, "answer_count": 2, "score": 1, "last_activity_date": 1456833841, "creation_date": 1447857002, "question_id": 33782671, "link": "https://stackoverflow.com/questions/33782671/converting-a-ruby-application-to-ruby-on-rails-activerecord-one", "title": "Converting a Ruby application to Ruby on Rails ActiveRecord one", "body": "<p>Let's say we have a ruby class like this:</p>\n\n<pre><code>class Song\n  attr_reader :id, :title, :author, :path\n\n  def initialize(id, title, author, path)\n    @id = id\n    @title= title\n    @author= author\n    @path = path\n  end\n\n  def change_title(new)\n    @title = new\n  end\n\n  def change_path(new)\n    @path = new\n  end\n\n  # other functions here, some operations and stuff\n\nend\n</code></pre>\n\n<p>If we were to \"convert\" it to an Rails ActiveRecord one, what should we do? (examples please) I am quite new to this and don't quite understand how it works, so figured I might ask here.</p>\n\n<p>The second part of this is, we have lots of tests (RSpec for example)</p>\n\n<pre><code>before(:each){\n  @song = Song.new(Random.rand(100), \n                   'Some song', 'Some author', 'C:/song.mp3')\n}    \n\nit 'change songs path' do\n  new_path = 'D:/new_path/something.mp3'\n  @song.change_path(new_path)\n  expect(@song.path).to eq new_path\nend\n</code></pre>\n\n<p>Could you provide me with some examples of how could we produce testing data for the tests and how should we change the tests, like using Fixtures or Factory_girl or etc.</p>\n\n<p>Sorry for quite stupid questions for some of you maybe, because there is documentation, but I find it hard to understand, so thought maybe actual situation like I provided might help.</p>\n"}, {"tags": ["ruby", "rvm"], "comments": [{"owner": {"reputation": 1512, "user_id": 853344, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/UP1oL.jpg?s=128&g=1", "display_name": "Mr Mush", "link": "https://stackoverflow.com/users/853344/mr-mush"}, "edited": false, "score": 0, "creation_date": 1447857050, "post_id": 33782525, "comment_id": 55331969, "body": "Please add the error to the question, not through a link."}, {"owner": {"reputation": 557, "user_id": 3985991, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NMnDT.jpg?s=128&g=1", "display_name": "Jules Goullee", "link": "https://stackoverflow.com/users/3985991/jules-goullee"}, "reply_to_user": {"reputation": 1512, "user_id": 853344, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/UP1oL.jpg?s=128&g=1", "display_name": "Mr Mush", "link": "https://stackoverflow.com/users/853344/mr-mush"}, "edited": false, "score": 0, "creation_date": 1447858794, "post_id": 33782525, "comment_id": 55333336, "body": "A add stack have got with rvm --trace install ruby-2.1.1"}], "answers": [{"comments": [{"owner": {"reputation": 557, "user_id": 3985991, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NMnDT.jpg?s=128&g=1", "display_name": "Jules Goullee", "link": "https://stackoverflow.com/users/3985991/jules-goullee"}, "edited": false, "score": 0, "creation_date": 1448959995, "post_id": 33987392, "comment_id": 55787790, "body": "Thank&#39;s I solved my probleme, it&#39;s an error fix with this commit on other branch <a href=\"https://github.com/rvm/rvm/blob/master/patches/ruby/1.9.1/openssl-1.0.patch\" rel=\"nofollow noreferrer\">github.com/rvm/rvm/blob/master/patches/ruby/1.9.1/&hellip;</a>"}], "tags": [], "owner": {"reputation": 180, "user_id": 4443022, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gvDEg.jpg?s=128&g=1", "display_name": "itsbriany", "link": "https://stackoverflow.com/users/4443022/itsbriany"}, "is_accepted": false, "score": 4, "last_activity_date": 1448829915, "last_edit_date": 1448829915, "creation_date": 1448827220, "answer_id": 33987392, "question_id": 33782525, "link": "https://stackoverflow.com/questions/33782525/rvm-install-rubi-2-1-2-compile-from-source-error-debian-8-x64/33987392#33987392", "title": "Rvm install rubi 2.1.2 Compile from source error debian 8 x64", "body": "<p>Try <code>rvm pkg install openssl</code></p>\n\n<p>This should install the openssl dependencies that rvm cannot find to <code>$HOME/.rvm/usr</code>.</p>\n\n<p>Then you can install ruby with rvm with the following:</p>\n\n<pre><code>rvm install 2.1.2 --with-openssl-dir=$HOME/.rvm/usr\n</code></pre>\n"}], "owner": {"reputation": 557, "user_id": 3985991, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NMnDT.jpg?s=128&g=1", "display_name": "Jules Goullee", "link": "https://stackoverflow.com/users/3985991/jules-goullee"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1149, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1448829915, "creation_date": 1447856596, "last_edit_date": 1448031744, "question_id": 33782525, "link": "https://stackoverflow.com/questions/33782525/rvm-install-rubi-2-1-2-compile-from-source-error-debian-8-x64", "title": "Rvm install rubi 2.1.2 Compile from source error debian 8 x64", "body": "<p>Rvm install ruby 2.1.2, No binary rubies available, it try compile error stack:</p>\n\n<pre><code>`rvm install 2.1.2`\nerror: ossl_ssl.c:115:69: note: in definition of macro \u2018OSSL_SSL_METHOD_ENTRY\u2019\n #define OSSL_SSL_METHOD_ENTRY(name) { #name, (SSL_METHOD *(*)(void))name##_method }\n                                                                 ^\nMakefile:280: recipe for target 'ossl_ssl.o' failed\nmake[2]: *** [ossl_ssl.o] Error 1\nmake[2]: *** Attente des t\u00e2ches non termin\u00e9es....\nmake[2]: Leaving directory '/home/jules/.rvm/src/ruby-2.1.1/ext/openssl'\nexts.mk:187: recipe for target 'ext/openssl/all' failed\nmake[1]: *** [ext/openssl/all] Error 2\nmake[1]: Leaving directory '/home/jules/.rvm/src/ruby-2.1.1'\nuncommon.mk:180: recipe for target 'build-ext' failed\nmake: *** [build-ext] Error 2\n</code></pre>\n\n<p><a href=\"http://pastebin.com/0fFcEV7Y\" rel=\"nofollow\">pastbin stack</a></p>\n"}, {"tags": ["ruby-on-rails", "ruby", "api", "curl"], "comments": [{"owner": {"reputation": 30655, "user_id": 138557, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/73c04e9ef9ca435c5b19a2e765ae6d20?s=128&d=identicon&r=PG", "display_name": "Max Williams", "link": "https://stackoverflow.com/users/138557/max-williams"}, "edited": false, "score": 0, "creation_date": 1447856483, "post_id": 33782278, "comment_id": 55331534, "body": "Sorry, your question in bold doesn&#39;t make sense.  Can you rephrase it in better english?  Apologies if english isn&#39;t your first language."}, {"owner": {"reputation": 30655, "user_id": 138557, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/73c04e9ef9ca435c5b19a2e765ae6d20?s=128&d=identicon&r=PG", "display_name": "Max Williams", "link": "https://stackoverflow.com/users/138557/max-williams"}, "edited": false, "score": 0, "creation_date": 1447856521, "post_id": 33782278, "comment_id": 55331572, "body": "BTW, if your question is &quot;Can the browser make post requests to my api&quot; then the answer is &quot;yes, it can&quot;.  A form is an example way to build a post request, but you could also do it from ajax."}, {"owner": {"reputation": 169, "user_id": 5097395, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/9b03ceb4fc2f830bff550dc6c4110c8f?s=128&d=identicon&r=PG&f=1", "display_name": "karlihnos", "link": "https://stackoverflow.com/users/5097395/karlihnos"}, "reply_to_user": {"reputation": 30655, "user_id": 138557, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/73c04e9ef9ca435c5b19a2e765ae6d20?s=128&d=identicon&r=PG", "display_name": "Max Williams", "link": "https://stackoverflow.com/users/138557/max-williams"}, "edited": false, "score": 0, "creation_date": 1447856701, "post_id": 33782278, "comment_id": 55331720, "body": "No prob. I corrected it. Ok, if you say the browser can make POST request then I have to send the parameters in the URL, right?"}, {"owner": {"reputation": 2575, "user_id": 891359, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/4926014a83c1d25207953e5e585556cb?s=128&d=identicon&r=PG", "display_name": "bo-oz", "link": "https://stackoverflow.com/users/891359/bo-oz"}, "edited": false, "score": 0, "creation_date": 1447860819, "post_id": 33782278, "comment_id": 55334906, "body": "No, normal requests are always GET, you have to do it trough a form (simple form declaration and button) or javascript. But if CURL works, it&#39;s fine right? I can also recommend Advanced REST client plugin for Chrome."}, {"owner": {"reputation": 30655, "user_id": 138557, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/73c04e9ef9ca435c5b19a2e765ae6d20?s=128&d=identicon&r=PG", "display_name": "Max Williams", "link": "https://stackoverflow.com/users/138557/max-williams"}, "edited": false, "score": 0, "creation_date": 1447860988, "post_id": 33782278, "comment_id": 55335030, "body": "A form will send a post request and put the parameters into the body of the request rather than the url.  You can do the same thing with ajax.  I still don&#39;;t understand your question in bold i&#39;m afraid.  One way to deal with external APIs is to never communicate directly with them from the browser, but instead do it all inside your controller actions.  This way you have more control over the interaction."}], "owner": {"reputation": 169, "user_id": 5097395, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/9b03ceb4fc2f830bff550dc6c4110c8f?s=128&d=identicon&r=PG&f=1", "display_name": "karlihnos", "link": "https://stackoverflow.com/users/5097395/karlihnos"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 52, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1447856659, "creation_date": 1447855862, "last_edit_date": 1447856659, "question_id": 33782278, "link": "https://stackoverflow.com/questions/33782278/must-be-an-api-be-always-accessible-from-the-browser", "title": "Must be an API be always accessible from the browser?", "body": "<p>I developed some APIs using Ruby on Rails. The programs calculates some energy values and other things with some inputs/parameters that are sent to the APIs. These APIs respond only to POST.</p>\n\n<p>Testing both with curl work perfectly:</p>\n\n<pre><code>curl -i -H \"Accept: application/json\" -H \"Content-type: application/json\" -X POST -d '@data.js' https://example.com\n</code></pre>\n\n<p>However, I have a question due my inexpirience:</p>\n\n<p><strong>If I send a request to the browser (<a href=\"https://example.com\" rel=\"nofollow\">https://example.com</a>), this request must be successful taking into account the description I made before? or it is acceptable in the way they are built, that an error is given back when doing this request (<a href=\"https://example.com\" rel=\"nofollow\">https://example.com</a>)?</strong></p>\n\n<p>I understand that GET is only to request data that is already on the server.</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 3773, "user_id": 991903, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/J12Hi.jpg?s=128&g=1", "display_name": "Meier", "link": "https://stackoverflow.com/users/991903/meier"}, "edited": false, "score": 0, "creation_date": 1447856620, "post_id": 33781920, "comment_id": 55331650, "body": "What stops you from adding the parenthesis to the query?"}], "answers": [{"tags": [], "owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "is_accepted": false, "score": 2, "last_activity_date": 1447855614, "creation_date": 1447855614, "answer_id": 33782174, "question_id": 33781920, "link": "https://stackoverflow.com/questions/33781920/using-or-in-a-scope-rails/33782174#33782174", "title": "Using OR in a Scope Rails", "body": "<p>I think you almost solved the problem - just some brackets are missing:</p>\n\n<pre><code>scope :between_19_24, -&gt; {\n  where('from_age &gt;= ? AND (to_age &lt;= ? OR to_age = ?)', 19, 24, 1000)\n}\n</code></pre>\n\n<p>Or more general:</p>\n\n<pre><code>scope :serves, -&gt;(range) {\n  where('from_age &gt;= ? AND (to_age &lt;= ? OR to_age = 1000)', range.min, range.max)\n}\n\n# can be used like:\nAgency.serves(19..24)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1814, "user_id": 2119317, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/65e386ab94962682b0abd72463670e23?s=128&d=identicon&r=PG", "display_name": "Pardeep Saini", "link": "https://stackoverflow.com/users/2119317/pardeep-saini"}, "is_accepted": false, "score": 1, "last_activity_date": 1447855646, "creation_date": 1447855646, "answer_id": 33782195, "question_id": 33781920, "link": "https://stackoverflow.com/questions/33781920/using-or-in-a-scope-rails/33782195#33782195", "title": "Using OR in a Scope Rails", "body": "<p>You can use this to achieve the result you want.</p>\n\n<pre><code>class Agency &lt; ActiveRecord::Base\n  scope :between_19_24, -&gt;{where(\"from_age &gt;= ? AND (to_age &lt;= ? OR to_age = ?)\", 19, 24, 1000)}\n end\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2575, "user_id": 891359, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/4926014a83c1d25207953e5e585556cb?s=128&d=identicon&r=PG", "display_name": "bo-oz", "link": "https://stackoverflow.com/users/891359/bo-oz"}, "is_accepted": true, "score": 3, "last_activity_date": 1447855823, "creation_date": 1447855823, "answer_id": 33782260, "question_id": 33781920, "link": "https://stackoverflow.com/questions/33781920/using-or-in-a-scope-rails/33782260#33782260", "title": "Using OR in a Scope Rails", "body": "<p>Isn't it easier to seperate the scopes?</p>\n\n<pre><code>scope :older_then, -&gt; (age=18) { where('agencies.from_age &gt; ?' age)) }\nscope :younger_then, -&gt; (age=65) { where('agencies.from_age &lt; ?' age)) }\n\n18+ Agency.all.older_then(18)\n18-50 18+ Agency.all.older_then(18).younger_then(50)\n</code></pre>\n"}], "owner": {"reputation": 6076, "user_id": 4044009, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/42e57031eb7d02c47c9afaecfc878638?s=128&d=identicon&r=PG&f=1", "display_name": "Neil", "link": "https://stackoverflow.com/users/4044009/neil"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 166, "favorite_count": 0, "accepted_answer_id": 33782260, "answer_count": 3, "score": 2, "last_activity_date": 1447885482, "creation_date": 1447854935, "last_edit_date": 1447885482, "question_id": 33781920, "link": "https://stackoverflow.com/questions/33781920/using-or-in-a-scope-rails", "title": "Using OR in a Scope Rails", "body": "<p>I have an <code>Agency</code> model that has attributes: <code>from_age</code> and <code>to_age</code>, both are ints.  My goal is to be able to find all agencies within a certain age range.</p>\n\n<p><strong>Note</strong>: The stored value: 1000 represents the concept \"and up\".  This value is stored within <code>to_age</code> so that ranges can be specified like so:</p>\n\n<ul>\n<li>Serves Ages 18 <code>and up</code> (from_age = 18 while to_age = 1000)</li>\n<li>Serves Ages 21 <code>and up</code> (from_age = 21 while to_age = 1000)</li>\n</ul>\n\n<p>And when both <code>from_age</code> and <code>to_age</code> have normal values:</p>\n\n<ul>\n<li>Serves Ages 25 - 40 (from_age = 25 while to_age = 40)</li>\n<li>Serves Ages 19 - 24 (from_age = 19 while to_age = 24)</li>\n</ul>\n\n<p>So I am trying to write a scope to grab all agencies within this age range.  I don't think the scope I have is working as expected:</p>\n\n<pre><code>#modeles/agency.rb\nclass Agency &lt; ActiveRecord::Base\n  scope :between_19_24, -&gt;{where(\"from_age &gt;= ? AND to_age &lt;= ? OR to_age = ?\", 19, 24, 1000)}\n  ...\nend\n</code></pre>\n\n<p>So with this query I am trying to grab two sets</p>\n\n<ul>\n<li>Grab all the agencies where <code>from_age</code> >= 19 AND <code>to_age</code> &lt;= 24</li>\n<li>Grab all the agencies where <code>from_age</code> >= 19 AND <code>to_age</code> = 1000 (1000 represents the concept of \"and up\"</li>\n</ul>\n\n<p>In the rails console when I do <code>agencies = Agency.between_19_24</code> it runs this query:</p>\n\n<pre><code>SELECT `agencies`.* FROM `agencies`  WHERE (from_age &gt;= 19 AND to_age &lt;= 24 OR to_age = 1000)\n</code></pre>\n\n<p>I don't think I have this right because that <code>or</code> statement should be something like this, where the OR is specified only for the last part:</p>\n\n<pre><code># I added parenthesis to the part where the or statement should apply\nSELECT `agencies`.* FROM `agencies`  WHERE (from_age &gt;= 19 AND (to_age &lt;= 24 OR to_age = 1000))\n</code></pre>\n\n<p><strong>Update</strong></p>\n\n<p>My solution after reviewing all the help:</p>\n\n<pre><code>scope :age_between, -&gt; (lower, upper){ where(\"(from_age &lt;= ? AND to_age &gt;= ?) OR to_age = ?\", lower, upper, -1)}\n</code></pre>\n\n<p><code>-1</code> stands for the concept of \"Serves all Ages.  So this is saying: \"Grab all the agencies that, at a minimum, serve the desired age range.  If an agency doesn't meet that criteria: grab any of those agencies that serve all ages.  </p>\n"}, {"tags": ["ruby", "regex", "escaping"], "comments": [{"owner": {"reputation": 71156, "user_id": 1190388, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/5391819cc4abe0cb43587c9ef1808dbd?s=128&d=identicon&r=PG", "display_name": "hjpotter92", "link": "https://stackoverflow.com/users/1190388/hjpotter92"}, "edited": false, "score": 0, "creation_date": 1447853463, "post_id": 33781363, "comment_id": 55329128, "body": "<code>%r{&#47;&#47;\\s*$Source\\$}</code>?"}, {"owner": {"reputation": 3458, "user_id": 2050788, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/uIU2Z.jpg?s=128&g=1", "display_name": "Spacemoose", "link": "https://stackoverflow.com/users/2050788/spacemoose"}, "reply_to_user": {"reputation": 71156, "user_id": 1190388, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/5391819cc4abe0cb43587c9ef1808dbd?s=128&d=identicon&r=PG", "display_name": "hjpotter92", "link": "https://stackoverflow.com/users/1190388/hjpotter92"}, "edited": false, "score": 0, "creation_date": 1447853573, "post_id": 33781363, "comment_id": 55329221, "body": "While the answer may indeed be the same, I would argue that my question is not phrased in php terms, meaning it will be much more useful to those of us who don&#39;t use php.  I don&#39;t know if that argues against flagging it as duplicate..."}], "answers": [{"comments": [{"owner": {"reputation": 3458, "user_id": 2050788, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/uIU2Z.jpg?s=128&g=1", "display_name": "Spacemoose", "link": "https://stackoverflow.com/users/2050788/spacemoose"}, "edited": false, "score": 0, "creation_date": 1447854662, "post_id": 33781445, "comment_id": 55330027, "body": "The escaping seems to be necessary to get a correct match, but still, solves my problem, thanks."}], "tags": [], "owner": {"reputation": 71156, "user_id": 1190388, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/5391819cc4abe0cb43587c9ef1808dbd?s=128&d=identicon&r=PG", "display_name": "hjpotter92", "link": "https://stackoverflow.com/users/1190388/hjpotter92"}, "is_accepted": true, "score": 0, "last_activity_date": 1447853541, "creation_date": 1447853541, "answer_id": 33781445, "question_id": 33781363, "link": "https://stackoverflow.com/questions/33781363/ruby-can-i-avoid-lots-of-escaping-in-a-regex/33781445#33781445", "title": "Ruby: can I avoid lots of escaping in a regex?", "body": "<p>Use the <code>%r</code> syntax:</p>\n\n<pre><code>if ( %r{//\\s*\\$Source\\$} =~ line)\n             ^^ I'm not sure whether ruby would allow unescaped `$` here or not \n</code></pre>\n"}], "owner": {"reputation": 3458, "user_id": 2050788, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/uIU2Z.jpg?s=128&g=1", "display_name": "Spacemoose", "link": "https://stackoverflow.com/users/2050788/spacemoose"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 24, "favorite_count": 0, "closed_date": 1447853431, "accepted_answer_id": 33781445, "answer_count": 1, "score": 0, "last_activity_date": 1447853541, "creation_date": 1447853315, "question_id": 33781363, "link": "https://stackoverflow.com/questions/33781363/ruby-can-i-avoid-lots-of-escaping-in-a-regex", "closed_reason": "Duplicate", "title": "Ruby: can I avoid lots of escaping in a regex?", "body": "<p>Lets say I want to match against CVS comments like:</p>\n\n<pre><code>//     $Source$\n</code></pre>\n\n<p>My regex currently looks like this:</p>\n\n<pre><code>if ( /^\\/\\/\\s*\\$Source\\$/ =~ line)\n</code></pre>\n\n<p>Which works, but I'm left wondering -- is there a prettier way to write this?  </p>\n"}, {"tags": ["ruby", "csv"], "comments": [{"owner": {"reputation": 149, "user_id": 2279355, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/26f750123862d60b0672ae5621a86add?s=128&d=identicon&r=PG", "display_name": "Rishab Mehra", "link": "https://stackoverflow.com/users/2279355/rishab-mehra"}, "edited": false, "score": 0, "creation_date": 1447851305, "post_id": 33780588, "comment_id": 55327531, "body": "I am not sure what ruby requires, but you can easily convert the first to the second. Write a quick program remove all the &#39;[&#39; brackets and replace &#39;],&#39; with line breaks."}, {"owner": {"reputation": 17357, "user_id": 794242, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e871d15815cfef926f21737a5ccd30c4?s=128&d=identicon&r=PG", "display_name": "Wand Maker", "link": "https://stackoverflow.com/users/794242/wand-maker"}, "edited": false, "score": 0, "creation_date": 1447852083, "post_id": 33780588, "comment_id": 55328068, "body": "Is that first code sample the CSV you downloaded or something you generated using Ruby?"}, {"owner": {"reputation": 643, "user_id": 2998767, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4e993494baba34ad6da79a07cdedfe3c?s=128&d=identicon&r=PG", "display_name": "Oliver Zeyen", "link": "https://stackoverflow.com/users/2998767/oliver-zeyen"}, "edited": false, "score": 0, "creation_date": 1447854532, "post_id": 33780588, "comment_id": 55329933, "body": "So the data seems consistent to me, Reformatting your array shows this:"}, {"owner": {"reputation": 13886, "user_id": 1150534, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/043af7a7ebf89595bebc3364f933d648?s=128&d=identicon&r=PG", "display_name": "Richlewis", "link": "https://stackoverflow.com/users/1150534/richlewis"}, "edited": false, "score": 0, "creation_date": 1447854881, "post_id": 33780588, "comment_id": 55330213, "body": "So the first example is what is downloaded, the second example is me manually editing the file to show what the data should look like, am i to assume a <code>gsub</code> would be beneficial here?"}], "answers": [{"comments": [{"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1447857087, "post_id": 33782308, "comment_id": 55331997, "body": "<code>NoMethodError: undefined method &#39;to_hash&#39; for #&lt;Array:0x00000007faa8a0&gt;</code>"}, {"owner": {"reputation": 643, "user_id": 2998767, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4e993494baba34ad6da79a07cdedfe3c?s=128&d=identicon&r=PG", "display_name": "Oliver Zeyen", "link": "https://stackoverflow.com/users/2998767/oliver-zeyen"}, "reply_to_user": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1447857477, "post_id": 33782308, "comment_id": 55332306, "body": "How does the content of your csv look? Tried it with:      col1,col2,col3     value1,value2,value3     value4,value5,value6"}, {"owner": {"reputation": 13886, "user_id": 1150534, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/043af7a7ebf89595bebc3364f933d648?s=128&d=identicon&r=PG", "display_name": "Richlewis", "link": "https://stackoverflow.com/users/1150534/richlewis"}, "edited": false, "score": 0, "creation_date": 1447858979, "post_id": 33782308, "comment_id": 55333471, "body": "i get the same undefined method"}, {"owner": {"reputation": 643, "user_id": 2998767, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4e993494baba34ad6da79a07cdedfe3c?s=128&d=identicon&r=PG", "display_name": "Oliver Zeyen", "link": "https://stackoverflow.com/users/2998767/oliver-zeyen"}, "edited": false, "score": 0, "creation_date": 1447863034, "post_id": 33782308, "comment_id": 55336680, "body": "My latest edition fixes and simplifies it even more. Actually a pretty straight forward task."}, {"owner": {"reputation": 643, "user_id": 2998767, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4e993494baba34ad6da79a07cdedfe3c?s=128&d=identicon&r=PG", "display_name": "Oliver Zeyen", "link": "https://stackoverflow.com/users/2998767/oliver-zeyen"}, "edited": false, "score": 0, "creation_date": 1447863641, "post_id": 33782308, "comment_id": 55337085, "body": "Of course it returns <code>nil</code>! You have to inspect <code>data</code>because thats the array where the row hashes are pushed to. Added <code>data.inspect</code>to the example to make it clear."}, {"owner": {"reputation": 13886, "user_id": 1150534, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/043af7a7ebf89595bebc3364f933d648?s=128&d=identicon&r=PG", "display_name": "Richlewis", "link": "https://stackoverflow.com/users/1150534/richlewis"}, "reply_to_user": {"reputation": 643, "user_id": 2998767, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4e993494baba34ad6da79a07cdedfe3c?s=128&d=identicon&r=PG", "display_name": "Oliver Zeyen", "link": "https://stackoverflow.com/users/2998767/oliver-zeyen"}, "edited": false, "score": 0, "creation_date": 1447864043, "post_id": 33782308, "comment_id": 55337365, "body": "Let us <a href=\"http://chat.stackoverflow.com/rooms/95463/discussion-between-richlewis-and-oliver-zeyen\">continue this discussion in chat</a>."}, {"owner": {"reputation": 13886, "user_id": 1150534, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/043af7a7ebf89595bebc3364f933d648?s=128&d=identicon&r=PG", "display_name": "Richlewis", "link": "https://stackoverflow.com/users/1150534/richlewis"}, "edited": false, "score": 0, "creation_date": 1447864533, "post_id": 33782308, "comment_id": 55337723, "body": "thanks for your help, gone through it a few times now and makes sense, nice and easy to search on keys aswell <code>data.find { |h| h[&#39;DatasetName&#39;] == dataset }[&#39;CreditsRemaining&#39;].to_i</code> for example"}], "tags": [], "owner": {"reputation": 643, "user_id": 2998767, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4e993494baba34ad6da79a07cdedfe3c?s=128&d=identicon&r=PG", "display_name": "Oliver Zeyen", "link": "https://stackoverflow.com/users/2998767/oliver-zeyen"}, "is_accepted": true, "score": 1, "last_activity_date": 1447863740, "last_edit_date": 1447863740, "creation_date": 1447855947, "answer_id": 33782308, "question_id": 33780588, "link": "https://stackoverflow.com/questions/33780588/formatting-a-csv-file-to-correct-format/33782308#33782308", "title": "Formatting a csv file to correct format", "body": "<p>This example should turn your csv into a array of hashes with the data accessible by former colum names.</p>\n\n<pre><code>data = []\n\nCSV.foreach('test.csv', headers: true) { |row| data &lt;&lt; row.to_hash }\n\ndata.inspect\n\n=&gt; [{:col1=&gt;'value1', :col2=&gt;'value2', :col3=&gt; 'value3'}, \n    {:col1=&gt;'value4', :col2=&gt;\"value5\", :col3=&gt;'value6'}]\n</code></pre>\n\n<p>Contents of <code>data.csv</code> looked like this:</p>\n\n<pre><code>col1,col2,col3\nvalue1,value2,value3\nvalue4,value5,value6\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 13886, "user_id": 1150534, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/043af7a7ebf89595bebc3364f933d648?s=128&d=identicon&r=PG", "display_name": "Richlewis", "link": "https://stackoverflow.com/users/1150534/richlewis"}, "edited": false, "score": 0, "creation_date": 1447859985, "post_id": 33782574, "comment_id": 55334264, "body": "ok Ive got to a state where a hash is created (need to understand what transpose is doing, will look into that) but how do i access say the <code>No of Searches</code> assigned to the <code>DatasetName</code> &quot;Standard&quot;"}, {"owner": {"reputation": 13886, "user_id": 1150534, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/043af7a7ebf89595bebc3364f933d648?s=128&d=identicon&r=PG", "display_name": "Richlewis", "link": "https://stackoverflow.com/users/1150534/richlewis"}, "edited": false, "score": 0, "creation_date": 1447860780, "post_id": 33782574, "comment_id": 55334873, "body": "I have updated my question, would you be able to take a look please, thanks for your help by the way, it&#39;s appreciated"}], "tags": [], "owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "is_accepted": false, "score": 1, "last_activity_date": 1447864928, "last_edit_date": 1447864928, "creation_date": 1447856743, "answer_id": 33782574, "question_id": 33780588, "link": "https://stackoverflow.com/questions/33780588/formatting-a-csv-file-to-correct-format/33782574#33782574", "title": "Formatting a csv file to correct format", "body": "<pre><code>\u25b6 csv = [[\"Team Name\", \"User Name\", \"Dataset Name\", \"No of Searches\", \"Credits Remaining\"], [\"\", \"\",\n\u25b7   \"DRI\", \"129\", \"99085\"], [\"\", \"\", \"Property Register Search (G)\", \"124\", \"99414\"], [\"\", \"\",  \n\u25b7   \"Landline Verification\", \"1\", \"99783\"], [\"\", \"\",  \n\u25b7   \"Equifax (G)\", \"372\", \"97798\"], [\"\", \"\", \"Director Register\", \"135\", \"98499\"], [\"\", \"\",  \n\u25b7   \"Mobile Verification\", \"2\", \"99845\"], [\"\", \"\",  \n\u25b7   \"BT OSIS\", \"428\", \"91588\"], [\"\", \"\",   \n\u25b7   \"Experian (G)\", \"97\", \"99913\"], [\"\", \"\", \"Standard (G)\",  \n\u25b7 \"873\", \"82151\"], [\"\", \"\", \"CCJ\", \"120\", \"98367\"]]\n</code></pre>\n\n<p>Then the following will give you what you want:</p>\n\n<pre><code>\u25b6 csv.transpose.map { |e| [e.shift, e] }.to_h\n</code></pre>\n\n<p>or:</p>\n\n<pre><code>\u25b6 csv.transpose.group_by(&amp;:shift).map { |k, v| [k, v.first] }.to_h\n</code></pre>\n\n<p>To access the <code>NoofSearches</code> that <code>DatasetName</code> <code>DRI</code> corresponds to:</p>\n\n<pre><code>\u25b6 hash = csv.transpose.map { |e| [e.shift, e] }.to_h\n# \u21d3\u00a0lookup array of noofs\n#                        \u21d3 by index of 'DRI' in 'Dataset Name' \n\u25b6 hash['No of Searches'][hash['Dataset Name'].index('DRI')]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 3346, "user_id": 832780, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/uOmJB.jpg?s=128&g=1", "display_name": "hallucinations", "link": "https://stackoverflow.com/users/832780/hallucinations"}, "is_accepted": false, "score": 0, "last_activity_date": 1448350260, "last_edit_date": 1448350260, "creation_date": 1447881806, "answer_id": 33790674, "question_id": 33780588, "link": "https://stackoverflow.com/questions/33780588/formatting-a-csv-file-to-correct-format/33790674#33790674", "title": "Formatting a csv file to correct format", "body": "<p>Another solution using Array#zip.</p>\n\n<p>Apparently, the file that you downloaded is not in CSV format. But, it seems like the string that you have in the file can be directly evaluated into a Ruby Array even though it's hacky.  </p>\n\n<pre><code>#!/usr/bin/env ruby\n\nfile = File.open(\"test.data\", \"r\")\n#NOTE: eval is evil!\ncsv_arrs = eval(file.read.gsub(\"\\n\", \"\")) \nfile.close\n\nheaders = csv_arrs.shift\nquery = {\n  :select =&gt; \"No of Searches\",\n  :key =&gt; \"Dataset Name\",\n  :value =&gt; \"DRI\"\n}\n\nr = csv_arrs.find {|a| Hash[ headers.zip(a) ][ query[:key] ] == query[:value]}\nputs r[headers.index(query[:select])]\n</code></pre>\n"}], "owner": {"reputation": 13886, "user_id": 1150534, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/043af7a7ebf89595bebc3364f933d648?s=128&d=identicon&r=PG", "display_name": "Richlewis", "link": "https://stackoverflow.com/users/1150534/richlewis"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 407, "favorite_count": 0, "accepted_answer_id": 33782308, "answer_count": 3, "score": 0, "last_activity_date": 1448350260, "creation_date": 1447851092, "last_edit_date": 1447860743, "question_id": 33780588, "link": "https://stackoverflow.com/questions/33780588/formatting-a-csv-file-to-correct-format", "title": "Formatting a csv file to correct format", "body": "<p>I have downloaded a csv file using HTTParty and saved the file locally so I can inspect it at a later date, however it seems as if the data is not formatted correctly</p>\n\n<pre><code>[[\"Team Name\", \"User Name\", \"Dataset Name\", \"No of Searches\", \"Credits Remaining\"], [\"\", \"\",\n\"DRI\", \"129\", \"99085\"], [\"\", \"\", \"Property Register Search (G)\", \"124\", \"99414\"], [\"\", \"\",\n\"Landline Verification\", \"1\", \"99783\"], [\"\", \"\",\n\"Equifax (G)\", \"372\", \"97798\"], [\"\", \"\", \"Director Register\", \"135\", \"98499\"], [\"\", \"\",\n\"Mobile Verification\", \"2\", \"99845\"], [\"\", \"\",\n\"BT OSIS\", \"428\", \"91588\"], [\"\", \"\", \n\"Experian (G)\", \"97\", \"99913\"], [\"\", \"\", \"Standard (G)\",\n\"873\", \"82151\"], [\"\", \"\", \"CCJ\", \"120\", \"98367\"]]\n</code></pre>\n\n<p>So that I can use the <code>CSV</code> class provided by ruby i need the data to be in the following format don't I ?</p>\n\n<pre><code>Team Name, User Name, Dataset Name, No of Searches, Credits Remaining\n\"\", \"\", DRI, 129, 99085\n\"\", \"\", Property Register Search (G), 124, 99414]\n\"\", \"\", Landline Verification, 1, 99783 \n\"\", \"\", Equifax (G), 372, 97798\n\"\", \"\", Director Register, 135, 98499\n\"\", \"\", Mobile Verification, 2, 99845 \n\"\", \"\", BT OSIS, 428, 91588]\n\"\", \"\", Experian (G), 97, 99913\n\"\", \"\", Standard (G), 873, 82151\n\"\", \"\", CCJ, 120, 98367\n</code></pre>\n\n<p>What i am looking to achieve is to get to a point where i can hash this out so i could access <code>Credits Remaining</code> for the <code>Dataset Name</code> <code>Standard</code></p>\n\n<p>Hope that makes sense</p>\n\n<p>Thanks</p>\n\n<p>UPDATE</p>\n\n<p>Thanks to @mudasobwa for your answer, i now have my csv file contents in an array of hashes (I think :) )</p>\n\n<pre><code>{\"TeamName\"=&gt;[nil, nil, nil, nil, nil, nil, nil, nil, nil, nil],\n \"UserName\"=&gt;[nil, nil, nil, nil, nil, nil, nil, nil, nil, nil],\n \"DatasetName\"=&gt; [\"DRI\", \"PropertyRegisterSearch(G)\", \"LandlineVerification\",\"Equifax(G)\", \"DirectorRegister\", \"MobileVerification\", \"BTOSIS\", \"Experian(G)\", \"Standard(G)\",\"CCJ\"],\n \"NoofSearches\"=&gt;[\"129\", \"124\", \"1\", \"372\", \"135\", \"2\", \"428\", \"97\", \"873\", \"120\"],\n \"CreditsRemaining\"=&gt;[\"99085\", \"99414\", \"99783\", \"97798\", \"98499\", \"99845\", \"91588\", \"99913\", \"82151\", \"98367\"]\n}\n</code></pre>\n\n<p>How would i get the <code>NoofSearches</code> that <code>DatasetName</code> <code>DRI</code> corresponds to, so I would expect to get <code>129</code> returned</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1447855058, "post_id": 33780095, "comment_id": 55330364, "body": "Why the rush to select an answer?"}], "answers": [{"tags": [], "owner": {"reputation": 1958, "user_id": 2803062, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/ed9b78fe5151cbc40739c7db14fbecf7?s=128&d=identicon&r=PG", "display_name": "bosskovic", "link": "https://stackoverflow.com/users/2803062/bosskovic"}, "is_accepted": true, "score": 4, "last_activity_date": 1447849743, "creation_date": 1447849743, "answer_id": 33780115, "question_id": 33780095, "link": "https://stackoverflow.com/questions/33780095/how-can-i-write-this-conditional-in-fewer-lines/33780115#33780115", "title": "How can I write this conditional in fewer lines?", "body": "<p>You can do it inline, like this:</p>\n\n<pre><code>percentage += 15 if self.date_of_birth.present?\n</code></pre>\n\n<p>Instead of this:</p>\n\n<pre><code>if self.interests.count &gt;= 10\n    percentage += 10\nelse\n    percentage += self.interests.count*5\nend\n</code></pre>\n\n<p>You can use a ternary operator:</p>\n\n<pre><code>percentage += self.interests.count &gt;= 10 ? 10 : self.interests.count*5\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 73119, "user_id": 1143732, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/mFUOI.jpg?s=128&g=1", "display_name": "Richard Peck", "link": "https://stackoverflow.com/users/1143732/richard-peck"}, "is_accepted": false, "score": 1, "last_activity_date": 1447854908, "last_edit_date": 1447854908, "creation_date": 1447851942, "answer_id": 33780893, "question_id": 33780095, "link": "https://stackoverflow.com/questions/33780095/how-can-i-write-this-conditional-in-fewer-lines/33780893#33780893", "title": "How can I write this conditional in fewer lines?", "body": "<p>You could use an instance method in your model:</p>\n\n<pre><code>#app/models/model.rb\nclass Model &lt; ActiveRecord::Base\n   def percentage\n      value = 0\n      values = [[:date_of_birth, 15], [:gender, 15], [:relationship_status,10], [:language,10], [:qualification, 10]]\n      values.each do |attr,val|\n          value += val if self.send(attr).present?\n      end\n      value += self.interests.count &gt;= 10 ? 10 : self.interests.count*5 if self.interests.present?\n      # Rails should return the value of the last line, which is the \"value\" var\n   end\nend\n</code></pre>\n\n<p>This would allow you to use <code>@user.percentage</code>, where <code>@user</code> is your instance var for the model.</p>\n"}, {"comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1448129322, "post_id": 33781284, "comment_id": 55458143, "body": "I agree that &quot;less lines&quot; is not a good idea. The grammatically correct &quot;fewer lines&quot; is no better. It grates whenever I see the sign &quot;Less than 10 items&quot; at a store&#39;s checkout lane."}], "tags": [], "owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "is_accepted": false, "score": 0, "last_activity_date": 1447853117, "creation_date": 1447853117, "answer_id": 33781284, "question_id": 33780095, "link": "https://stackoverflow.com/questions/33780095/how-can-i-write-this-conditional-in-fewer-lines/33781284#33781284", "title": "How can I write this conditional in fewer lines?", "body": "<p>Personally, I don't think that \"less lines\" is a good idea, but if you want your code in less lines, you can write it like this:</p>\n\n<pre><code>percentage = 0; if date_of_birth.present? then percentage += 15 end; if gender.present? then percentage += 15 end; if relationship_status.present? then percentage += 10 end; if language.present? then percentage += 10 end; if qualification.present? then percentage += 10 end; if interests.present? then if interests.count &gt;= 10 then percentage += 10 else percentage += interests.count*5 end end\n</code></pre>\n\n<p>In Ruby, you can (almost) always replace linebreaks with semicolons to make your code fit on less lines. In fact, <em>every</em> Ruby program can <em>always</em> be written on a single line.</p>\n"}, {"comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1447857165, "post_id": 33781362, "comment_id": 55332045, "body": "I like the technique but find the line dealing with &quot;interests&quot; discordant, even jarring. I&#39;d find it more pleasing if that line were removed and the last line were replaced with <code>].compact.sum + interest_cost</code>, where <code>interest_cost</code> is a method."}, {"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1447860001, "post_id": 33781362, "comment_id": 55334274, "body": "@CarySwoveland You may be right. But perhaps what should be improved is the logic design."}], "tags": [], "owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "is_accepted": false, "score": 3, "last_activity_date": 1447854070, "last_edit_date": 1447854070, "creation_date": 1447853310, "answer_id": 33781362, "question_id": 33780095, "link": "https://stackoverflow.com/questions/33780095/how-can-i-write-this-conditional-in-fewer-lines/33781362#33781362", "title": "How can I write this conditional in fewer lines?", "body": "<pre><code>percentage = [\n  (15 if date_of_birth.present?),\n  (15 if gender.present?),\n  (10 if relationship_status.present?),\n  (10 if language.present?),\n  (10 if qualification.present?),\n  ((counts = interests.count.to_i) &gt;= 10 ? 10 : (counts * 5)),\n].compact.sum\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 1, "creation_date": 1447858098, "post_id": 33781569, "comment_id": 55332850, "body": "One weakness of this approach is that you have to rewrite code substantially if any of the values to be summed are changed."}, {"owner": {"reputation": 510, "user_id": 4235198, "user_type": "registered", "accept_rate": 14, "profile_image": "https://www.gravatar.com/avatar/b3c1bdb69d18bf2c9a94628de6b6185d?s=128&d=identicon&r=PG&f=1", "display_name": "Gourav", "link": "https://stackoverflow.com/users/4235198/gourav"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1447858173, "post_id": 33781569, "comment_id": 55332908, "body": "Ya it just suits for current requirements"}], "tags": [], "owner": {"reputation": 510, "user_id": 4235198, "user_type": "registered", "accept_rate": 14, "profile_image": "https://www.gravatar.com/avatar/b3c1bdb69d18bf2c9a94628de6b6185d?s=128&d=identicon&r=PG&f=1", "display_name": "Gourav", "link": "https://stackoverflow.com/users/4235198/gourav"}, "is_accepted": false, "score": 0, "last_activity_date": 1447853922, "creation_date": 1447853922, "answer_id": 33781569, "question_id": 33780095, "link": "https://stackoverflow.com/questions/33780095/how-can-i-write-this-conditional-in-fewer-lines/33781569#33781569", "title": "How can I write this conditional in fewer lines?", "body": "<pre><code>inc_att = [\"date_of_birth\", \"gender\", \"relationship_status\" , \"language\", \"qualification\", \"interests\"]\n\ninc_att.each do |s|\n\n  if self[s].present? &amp;&amp; (s == \"date_of_birth\" || s == \"gender\")\n      percentage += 15\n  elsif self[s].present? &amp;&amp; s == \"interests\" &amp;&amp; self[s].count &lt; 10\n      percentage += self[s].count * 5\n  else\n      percentage += 10 if self[s].present?\n  end\n\nend \n</code></pre>\n\n<p>Have a look into it</p>\n"}, {"tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user3963226"}, "is_accepted": false, "score": 0, "last_activity_date": 1447917425, "creation_date": 1447917425, "answer_id": 33797441, "question_id": 33780095, "link": "https://stackoverflow.com/questions/33780095/how-can-i-write-this-conditional-in-fewer-lines/33797441#33797441", "title": "How can I write this conditional in fewer lines?", "body": "<pre><code>inc_att = [\"date_of_birth\", \"gender\", \"relationship_status\" , \"language\",   \"qualification\", \"interests\"]\n\ninc_att.each do |s|\n\nif self[s].present? &amp;&amp; (s == \"date_of_birth\" || s == \"gender\")\n  percentage += 15\nelsif self[s].present? &amp;&amp; s == \"interests\" &amp;&amp; self[s].count &lt; 10\n  percentage += self[s].count * 5\nelse\n  percentage += 10 if self[s].present?\nend\n\nend \n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": false, "score": 0, "last_activity_date": 1448128458, "creation_date": 1448128458, "answer_id": 33846672, "question_id": 33780095, "link": "https://stackoverflow.com/questions/33780095/how-can-i-write-this-conditional-in-fewer-lines/33846672#33846672", "title": "How can I write this conditional in fewer lines?", "body": "<p>Inspired by @sawa's answer:</p>\n\n<pre><code>counts = interests.count.to_i\npercentage = (counts &gt;= 10 ? 10 : (counts * 5)) + \n  [\n    date_of_birth.present?       &amp;&amp; 15,\n    gender.present?              &amp;&amp; 15,\n    relationship_status.present? &amp;&amp; 10,\n    language.present?            &amp;&amp; 10,\n    qualification.present?       &amp;&amp; 10,\n  ].select(&amp;:itself).sum\n</code></pre>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user5402808"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 103, "favorite_count": 0, "accepted_answer_id": 33780115, "answer_count": 7, "score": 0, "last_activity_date": 1448128458, "creation_date": 1447849691, "last_edit_date": 1447855014, "question_id": 33780095, "link": "https://stackoverflow.com/questions/33780095/how-can-i-write-this-conditional-in-fewer-lines", "title": "How can I write this conditional in fewer lines?", "body": "<p>I wrote this code in my model:</p>\n\n<pre><code>percentage = 0\nif self.date_of_birth.present?\n  percentage += 15\nend\nif self.gender.present?\n  percentage += 15\nend\nif self.relationship_status.present?\n  percentage += 10\nend\nif self.language.present?\n  percentage += 10\nend\nif self.qualification.present?\n  percentage += 10\nend\nif self.interests.present?\n  if self.interests.count &gt;= 10\n    percentage += 10\n  else\n    percentage += self.interests.count * 5\n  end\nend\n</code></pre>\n\n<p>But it does not look good. It is a lot of code for a small thing. I want to reduce the number of lines.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4"], "answers": [{"comments": [{"owner": {"reputation": 637, "user_id": 4012683, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/0df29ae797a3cff85b01e88d75dc84b7?s=128&d=identicon&r=PG&f=1", "display_name": "huzefa biyawarwala", "link": "https://stackoverflow.com/users/4012683/huzefa-biyawarwala"}, "reply_to_user": {"reputation": 43, "user_id": 3468440, "user_type": "registered", "accept_rate": 12, "profile_image": "https://graph.facebook.com/1316802897/picture?type=large", "display_name": "user3468440", "link": "https://stackoverflow.com/users/3468440/user3468440"}, "edited": false, "score": 0, "creation_date": 1447850480, "post_id": 33779991, "comment_id": 55326952, "body": "Glad that i could help you out. keep asking ... :)"}, {"owner": {"reputation": 637, "user_id": 4012683, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/0df29ae797a3cff85b01e88d75dc84b7?s=128&d=identicon&r=PG&f=1", "display_name": "huzefa biyawarwala", "link": "https://stackoverflow.com/users/4012683/huzefa-biyawarwala"}, "reply_to_user": {"reputation": 43, "user_id": 3468440, "user_type": "registered", "accept_rate": 12, "profile_image": "https://graph.facebook.com/1316802897/picture?type=large", "display_name": "user3468440", "link": "https://stackoverflow.com/users/3468440/user3468440"}, "edited": false, "score": 0, "creation_date": 1447850521, "post_id": 33779991, "comment_id": 55326981, "body": "@user3468440 : If you don&#39;t mind upvoting my answer would be nice of you ;)"}, {"owner": {"reputation": 637, "user_id": 4012683, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/0df29ae797a3cff85b01e88d75dc84b7?s=128&d=identicon&r=PG&f=1", "display_name": "huzefa biyawarwala", "link": "https://stackoverflow.com/users/4012683/huzefa-biyawarwala"}, "reply_to_user": {"reputation": 73119, "user_id": 1143732, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/mFUOI.jpg?s=128&g=1", "display_name": "Richard Peck", "link": "https://stackoverflow.com/users/1143732/richard-peck"}, "edited": false, "score": 0, "creation_date": 1447861547, "post_id": 33779991, "comment_id": 55335484, "body": "@RichPeck : Thanx lots ... :)"}], "tags": [], "owner": {"reputation": 637, "user_id": 4012683, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/0df29ae797a3cff85b01e88d75dc84b7?s=128&d=identicon&r=PG&f=1", "display_name": "huzefa biyawarwala", "link": "https://stackoverflow.com/users/4012683/huzefa-biyawarwala"}, "is_accepted": true, "score": 2, "last_activity_date": 1447849426, "creation_date": 1447849426, "answer_id": 33779991, "question_id": 33779850, "link": "https://stackoverflow.com/questions/33779850/how-to-solve-nilnilclass-errror-in-rails-4/33779991#33779991", "title": "How to solve nil:NilClass errror in Rails 4?", "body": "<p>Change the code in your partial <code>_forum_post</code> as :</p>\n\n<pre><code>&lt;%= div_for @forum_post do %&gt;\n</code></pre>\n\n<p>And add <code>@</code> before the <code>forum_post</code> in your partial . It will work without any errors.</p>\n"}], "owner": {"reputation": 43, "user_id": 3468440, "user_type": "registered", "accept_rate": 12, "profile_image": "https://graph.facebook.com/1316802897/picture?type=large", "display_name": "user3468440", "link": "https://stackoverflow.com/users/3468440/user3468440"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 62, "favorite_count": 0, "accepted_answer_id": 33779991, "answer_count": 1, "score": 2, "last_activity_date": 1447852115, "creation_date": 1447849033, "last_edit_date": 1447852115, "question_id": 33779850, "link": "https://stackoverflow.com/questions/33779850/how-to-solve-nilnilclass-errror-in-rails-4", "title": "How to solve nil:NilClass errror in Rails 4?", "body": "<p>I'm currently having an issue when I create posts, I always seem to get undefined method \"username\" or \"email\", but when using current_user.username or current_user.email it will display just fine... </p>\n\n<p>Forum Threads Controller</p>\n\n<pre><code>class ForumThreadsController &lt; ApplicationController\nbefore_action :authenticate_user!, except: [:index, :show]\nbefore_action :set_forum_thread, except: [:index, :new, :create]\n\ndef index\n@q = ForumThread.search(params[:q])\n@forum_threads = @q.result(distinct: true)\n@forum_threads = ForumThread.paginate(:page =&gt; params[:page], :per_page =&gt; 3)\nend\n\ndef show\n@forum_posts = ForumThread.find(params[:id])\n@forum_post.user = current_user\n@forum_post = ForumPost.new\n@forum_posts = ForumPost.paginate(:page =&gt; params[:page], :per_page =&gt; 3)\nend\n\ndef new\n@forum_thread = ForumThread.new\n@forum_thread.forum_posts.new\nend\n\ndef create\n@forum_thread = current_user.forum_threads.new forum_thread_params\n@forum_thread.forum_posts.first.user_id = current_user.id\n\nif @forum_thread.save\n  redirect_to @forum_thread\nelse\n  render action: :new\nend\nend\n\ndef edit\nend\n\ndef update\nif @forum_thread.update forum_thread_params\nredirect_to @forum_thread\nelse\nrender 'edit'\nend\nend\n\ndef destroy\n@forum_thread.destroy\nredirect_to root_path\nend\n\nprivate\n\ndef set_forum_thread\n  @forum_thread = ForumThread.find(params[:id])\nend\n</code></pre>\n\n<p>Forum Posts Controller</p>\n\n<pre><code>class ForumThreads::ForumPostsController &lt; ApplicationController\n  before_action :authenticate_user!, except: [:index, :show]\n  before_action :set_forum_thread\n\n  def new\n    @forum_post = @forum_thread.forum_posts.new forum_post_params\n    @forum_post.user = current_user\n  end\n\n\n  def create\n    @forum_post = @forum_thread.forum_posts.new forum_post_params\n    @forum_post.user = current_user\n    if @forum_post.save\n      redirect_to forum_thread_path(@forum_thread, anchor: \"forum_post_#{@forum_post.id}\"), notice: \"Successfully posted!\"\n    else\n      redirect_to @forum_thread, alert: \"Unable to save your post\"\n    end\n  end\n\n  def edit\n  end\n\n  def update\n     if @forum_post.update(forum_post_params)\n        redirect_to @forum_thread\n     else\n        render 'edit'\n     end\n  end\n\n\n  private\n\n    def set_forum_thread\n      @forum_thread = ForumThread.find(params[:forum_thread_id])\n    end\n\n    def forum_post_params\n      params.require(:forum_post).permit(:body)\n    end\nend\n</code></pre>\n\n<p>log</p>\n\n<pre><code>I, [2015-11-18T06:16:17.418239 #16523]  INFO -- : Started GET \"/forum/forum_threads/17\" for 24.220.125.144 at 2015-11-18 06:16:17 -0600\nI, [2015-11-18T06:16:17.453154 #16523]  INFO -- : Processing by ForumThreadsController#show as HTML\nI, [2015-11-18T06:16:17.453292 #16523]  INFO -- :   Parameters: {\"id\"=&gt;\"17\"}\nD, [2015-11-18T06:16:17.479120 #16523] DEBUG -- :   ^[[1m^[[36mForumThread Load (0.5ms)^[[0m  ^[[1mSELECT  `forum_threads`.* FROM `forum_threads` WHERE `forum_threads`.`id` = $\nD, [2015-11-18T06:16:17.487690 #16523] DEBUG -- :   ^[[1m^[[35mCACHE (0.0ms)^[[0m  SELECT  `forum_threads`.* FROM `forum_threads` WHERE `forum_threads`.`id` = 17 LIMIT 1  [[\"i$\nD, [2015-11-18T06:16:17.503484 #16523] DEBUG -- :   ^[[1m^[[36mUser Load (0.9ms)^[[0m  ^[[1mSELECT  `users`.* FROM `users` WHERE `users`.`deleted_at` IS NULL AND `users`.`id` $\nD, [2015-11-18T06:16:17.541778 #16523] DEBUG -- :   ^[[1m^[[35mUser Load (0.5ms)^[[0m  SELECT  `users`.* FROM `users` WHERE `users`.`deleted_at` IS NULL AND `users`.`id` = 9 L$\nD, [2015-11-18T06:16:17.573968 #16523] DEBUG -- :   ^[[1m^[[36mForumPost Load (0.6ms)^[[0m  ^[[1mSELECT `forum_posts`.* FROM `forum_posts` WHERE `forum_posts`.`forum_thread_id$\nD, [2015-11-18T06:16:17.579587 #16523] DEBUG -- :   ^[[1m^[[35mCACHE (0.0ms)^[[0m  SELECT  `users`.* FROM `users` WHERE `users`.`deleted_at` IS NULL AND `users`.`id` = 9 LIMIT$\nI, [2015-11-18T06:16:17.583134 #16523]  INFO -- :   Rendered forum_posts/_forum_post.html.erb (7.0ms)\nI, [2015-11-18T06:16:17.583329 #16523]  INFO -- :   Rendered forum_threads/show.html.erb within layouts/application (48.1ms)\nI, [2015-11-18T06:16:17.583711 #16523]  INFO -- : Completed 500 Internal Server Error in 130ms (ActiveRecord: 6.8ms)\nF, [2015-11-18T06:16:17.585545 #16523] FATAL -- :\nActionView::Template::Error (undefined method `email' for nil:NilClass):\n    1: &lt;%= div_for forum_post do %&gt;\n    2: &lt;div class=\"pull-avatar-left\" style=\"padding-right: 20px; padding-bottom: 10px;\"&gt;&lt;%= image_tag current_user.gravatar_url(:size =&gt; 65), :class =&gt; \"img-circle avatar\" %&gt;&lt;$\n    3: &lt;div class=\"forum-post-container\" style=\"margin-top: 20px; margin-left: 20px; padding-bottom: 10px;\"&gt;\n    4: &lt;p class=\"text-muted\"&gt;Posted by &lt;%= forum_post.user.email %&gt; &lt;%= local_time_ago forum_post.created_at %&gt;&lt;/p&gt;\n    5:   &lt;p&gt;&lt;%= forum_post.body %&gt;&lt;/p&gt;\n    6: &lt;/div&gt;\n    7: &lt;% end %&gt;\n  app/views/forum_posts/_forum_post.html.erb:4:in `block in _app_views_forum_posts__forum_post_html_erb___2875746267982681747_45837340'\n  app/views/forum_posts/_forum_post.html.erb:1:in `_app_views_forum_posts__forum_post_html_erb___2875746267982681747_45837340'\n  app/views/forum_threads/show.html.erb:6:in `_app_views_forum_threads_show_html_erb__3506623455216328957_43396520'\n</code></pre>\n"}, {"tags": ["jquery", "ruby-on-rails", "ruby", "ruby-on-rails-4"], "answers": [{"tags": [], "owner": {"reputation": 259, "user_id": 1646412, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/460cda671eb119e0e5c30b17b25275c5?s=128&d=identicon&r=PG", "display_name": "Tayyab Shabab", "link": "https://stackoverflow.com/users/1646412/tayyab-shabab"}, "is_accepted": true, "score": 0, "last_activity_date": 1447850520, "creation_date": 1447850520, "answer_id": 33780398, "question_id": 33779106, "link": "https://stackoverflow.com/questions/33779106/how-to-render-specific-page-template-using-jquery-button-click/33780398#33780398", "title": "How to render specific page template using jquery button click", "body": "<p>You cannot render the template directly into javascript. However ajax can be used to achieve this thing.</p>\n\n<pre><code>function SetLayout(val) {\n  if (val == \"1\") {\n        $.get('/your-route-to-template_1', function(data){\n            $(\"#loadContent\").html(data);\n        });\n    $(\"#pageLayout\").modal(\"hide\");\n  }\n}\n</code></pre>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user5084534"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 199, "favorite_count": 0, "accepted_answer_id": 33780398, "answer_count": 1, "score": 2, "last_activity_date": 1447850520, "creation_date": 1447846823, "question_id": 33779106, "link": "https://stackoverflow.com/questions/33779106/how-to-render-specific-page-template-using-jquery-button-click", "title": "How to render specific page template using jquery button click", "body": "<p>I know this question is asked number of times and all of them didnt help me.</p>\n\n<p>What I need to do is, to render template upon button click that contains mix ruby and html code.</p>\n\n<p>The code I am working on is:</p>\n\n<pre><code>function SetLayout(val) {\n    if (val == \"1\") {\n        $(\"#loadContent\").html(\"&lt;%= escape_javascript(render(:template =&gt; 'pages/template_1')) %&gt;\");\n        $(\"#pageLayout\").modal(\"hide\");\n    }\n}\n\n&lt;div id=\"loadContent\"&gt;\n    //LOAD THAT TEMPLATE IN THIS DIV\n&lt;/div&gt;\n</code></pre>\n\n<p><strong>template_1.html.erb</strong></p>\n\n<pre><code>    &lt;div contenteditable=\"true\"&gt;\n         &lt;%= @page.name.html_safe %&gt;\n        &lt;/div&gt;\n       &lt;div class=\"contenteditable=\"true\" \ndata-attr=\"description\" id=\"page-desc\"&gt;\n&lt;%= @page.description %&gt;&lt;/div&gt;\n</code></pre>\n\n<p>The problem is it just render codes like below in result div</p>\n\n<pre><code>&lt;%= escape_javascript(render(:template =&gt; 'pages/template_1')) %&gt;\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "facebook", "oauth", "koala-gem"], "comments": [{"owner": {"reputation": 2738, "user_id": 747114, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/111517710867e6e4ad41e4f7784f9799?s=128&d=identicon&r=PG", "display_name": "rlarcombe", "link": "https://stackoverflow.com/users/747114/rlarcombe"}, "edited": false, "score": 0, "creation_date": 1447846674, "post_id": 33778937, "comment_id": 55324511, "body": "Your error is right there: An active access token must be used to query information about the current user.  So make sure your Facebook Graph API access token is set up properly and up to date as described here: <a href=\"https://github.com/arsduo/koala\" rel=\"nofollow noreferrer\">github.com/arsduo/koala</a>"}, {"owner": {"reputation": 4509, "user_id": 2936491, "user_type": "registered", "accept_rate": 54, "profile_image": "https://i.stack.imgur.com/BIeeI.jpg?s=128&g=1", "display_name": "techdreams", "link": "https://stackoverflow.com/users/2936491/techdreams"}, "reply_to_user": {"reputation": 637, "user_id": 4012683, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/0df29ae797a3cff85b01e88d75dc84b7?s=128&d=identicon&r=PG&f=1", "display_name": "huzefa biyawarwala", "link": "https://stackoverflow.com/users/4012683/huzefa-biyawarwala"}, "edited": false, "score": 1, "creation_date": 1447847086, "post_id": 33778937, "comment_id": 55324767, "body": "@huzefabiyawarwala I have given the code of pages_controller"}], "answers": [{"tags": [], "owner": {"reputation": 786, "user_id": 2389083, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7Y4QJ.jpg?s=128&g=1", "display_name": "Javier de la Cueva", "link": "https://stackoverflow.com/users/2389083/javier-de-la-cueva"}, "is_accepted": true, "score": 1, "last_activity_date": 1449846443, "creation_date": 1449846443, "answer_id": 34226555, "question_id": 33778937, "link": "https://stackoverflow.com/questions/33778937/koalafacebookauthenticationerror-type-oauthexception-code-2500-message/34226555#34226555", "title": "Koala::Facebook::AuthenticationError - type: OAuthException, code: 2500, message", "body": "<p>As @techdreams has commented, the error is the access token you're using, is invalid. Looking at your code seems you're getting the access token from a cookie. Just please keep in mind that an access token can become invalid if the user logs out of facebook or changes his/her password so you have always to implement a \"refresh token\" in your App, which basically is prompt the login dialog again to get a new token. If user has already approved your App this process will be transparent to him/her and they won't see the dialog again.</p>\n"}], "owner": {"reputation": 4509, "user_id": 2936491, "user_type": "registered", "accept_rate": 54, "profile_image": "https://i.stack.imgur.com/BIeeI.jpg?s=128&g=1", "display_name": "techdreams", "link": "https://stackoverflow.com/users/2936491/techdreams"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 926, "favorite_count": 0, "accepted_answer_id": 34226555, "answer_count": 1, "score": 0, "last_activity_date": 1449846443, "creation_date": 1447846306, "last_edit_date": 1447847056, "question_id": 33778937, "link": "https://stackoverflow.com/questions/33778937/koalafacebookauthenticationerror-type-oauthexception-code-2500-message", "title": "Koala::Facebook::AuthenticationError - type: OAuthException, code: 2500, message", "body": "<p>I am trying to setup a project. Everything has gone fine but this error keeps prompting up and nothing seems to help. Here is the log when i hit the url.</p>\n\n<pre><code>Koala::Facebook::AuthenticationError - type: OAuthException, code: 2500, message: An active access token must be used to query information about the current user. [HTTP 400]:\nkoala (2.2.0) lib/koala/api/graph_api.rb:515:in `block in graph_call'\nkoala (2.2.0) lib/koala/api.rb:80:in `api'\nkoala (2.2.0) lib/koala/api/graph_api.rb:513:in `graph_call'\nkoala (2.2.0) lib/koala/api/graph_api.rb:115:in `get_connection'\n() home/yogesh/Desktop/jugojuice/jugojuice/app/controllers/pages_controller.rb:98:in `show'\n() home/yogesh/Desktop/jugojuice/jugojuice/app/controllers/pages_controller.rb:64:in `home'\nactionpack (4.2.0) lib/action_controller/metal/implicit_render.rb:4:in `send_action'\nactionpack (4.2.0) lib/abstract_controller/base.rb:198:in `process_action'\nactionpack (4.2.0) lib/action_controller/metal/rendering.rb:10:in `process_action'\nactionpack (4.2.0) lib/abstract_controller/callbacks.rb:20:in `block in process_action'\nactivesupport (4.2.0) lib/active_support/callbacks.rb:117:in `call'\nactivesupport (4.2.0) lib/active_support/callbacks.rb:169:in `block in halting'\nactivesupport (4.2.0) lib/active_support/callbacks.rb:151:in `block in halting_and_conditional'\nactivesupport (4.2.0) lib/active_support/callbacks.rb:169:in `block in halting'\nactivesupport (4.2.0) lib/active_support/callbacks.rb:234:in `block in halting'\nactivesupport (4.2.0) lib/active_support/callbacks.rb:234:in `block in halting'\nactivesupport (4.2.0) lib/active_support/callbacks.rb:169:in `block in halting'\nactivesupport (4.2.0) lib/active_support/callbacks.rb:169:in `block in halting'\nactivesupport (4.2.0) lib/active_support/callbacks.rb:234:in `block in halting'\nactivesupport (4.2.0) lib/active_support/callbacks.rb:169:in `block in halting'\nactivesupport (4.2.0) lib/active_support/callbacks.rb:169:in `block in halting'\nactivesupport (4.2.0) lib/active_support/callbacks.rb:169:in `block in halting'\nactivesupport (4.2.0) lib/active_support/callbacks.rb:308:in `block (2 levels) in halting'\n() home/yogesh/.rvm/gems/ruby-2.2.3/bundler/gems/route_translator-f00b46885426/lib/route_translator/extensions/action_controller.rb:20:in `set_locale_from_url'\nactivesupport (4.2.0) lib/active_support/callbacks.rb:427:in `block in make_lambda'\nactivesupport (4.2.0) lib/active_support/callbacks.rb:307:in `block in halting'\nactivesupport (4.2.0) lib/active_support/callbacks.rb:169:in `block in halting'\nactivesupport (4.2.0) lib/active_support/callbacks.rb:92:in `_run_callbacks'\nactivesupport (4.2.0) lib/active_support/callbacks.rb:734:in `_run_process_action_callbacks'\nactivesupport (4.2.0) lib/active_support/callbacks.rb:81:in `run_callbacks'\nactionpack (4.2.0) lib/abstract_controller/callbacks.rb:19:in `process_action'\nactionpack (4.2.0) lib/action_controller/metal/rescue.rb:29:in `process_action'\nactionpack (4.2.0) lib/action_controller/metal/instrumentation.rb:31:in `block in process_action'\nactivesupport (4.2.0) lib/active_support/notifications.rb:164:in `block in instrument'\nactivesupport (4.2.0) lib/active_support/notifications/instrumenter.rb:20:in `instrument'\nactivesupport (4.2.0) lib/active_support/notifications.rb:164:in `instrument'\nactionpack (4.2.0) lib/action_controller/metal/instrumentation.rb:30:in `process_action'\nactionpack (4.2.0) lib/action_controller/metal/params_wrapper.rb:250:in `process_action'\nactiverecord (4.2.0) lib/active_record/railties/controller_runtime.rb:18:in `process_action'\nactionpack (4.2.0) lib/abstract_controller/base.rb:137:in `process'\nactionview (4.2.0) lib/action_view/rendering.rb:30:in `process'\nactionpack (4.2.0) lib/action_controller/metal.rb:195:in `dispatch'\nactionpack (4.2.0) lib/action_controller/metal/rack_delegation.rb:13:in `dispatch'\nactionpack (4.2.0) lib/action_controller/metal.rb:236:in `block in action'\nactionpack (4.2.0) lib/action_dispatch/routing/route_set.rb:73:in `dispatch'\nactionpack (4.2.0) lib/action_dispatch/routing/route_set.rb:42:in `serve'\nactionpack (4.2.0) lib/action_dispatch/journey/router.rb:43:in `block in serve'\nactionpack (4.2.0) lib/action_dispatch/journey/router.rb:30:in `serve'\nactionpack (4.2.0) lib/action_dispatch/routing/route_set.rb:802:in `call'\nxray-rails (0.1.16) lib/xray/middleware.rb:37:in `call'\nwarden (1.2.3) lib/warden/manager.rb:35:in `block in call'\nwarden (1.2.3) lib/warden/manager.rb:34:in `call'\nrack (1.6.0) lib/rack/etag.rb:24:in `call'\nrack (1.6.0) lib/rack/conditionalget.rb:25:in `call'\nrack (1.6.0) lib/rack/head.rb:13:in `call'\nactionpack (4.2.0) lib/action_dispatch/middleware/params_parser.rb:27:in `call'\nactionpack (4.2.0) lib/action_dispatch/middleware/flash.rb:260:in `call'\nrack (1.6.0) lib/rack/session/abstract/id.rb:225:in `context'\nrack (1.6.0) lib/rack/session/abstract/id.rb:220:in `call'\nactionpack (4.2.0) lib/action_dispatch/middleware/cookies.rb:560:in `call'\nactiverecord (4.2.0) lib/active_record/query_cache.rb:36:in `call'\nactiverecord (4.2.0) lib/active_record/connection_adapters/abstract/connection_pool.rb:647:in `call'\nactiverecord (4.2.0) lib/active_record/migration.rb:378:in `call'\nactionpack (4.2.0) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'\nactivesupport (4.2.0) lib/active_support/callbacks.rb:88:in `_run_callbacks'\nactivesupport (4.2.0) lib/active_support/callbacks.rb:734:in `_run_call_callbacks'\nactivesupport (4.2.0) lib/active_support/callbacks.rb:81:in `run_callbacks'\nactionpack (4.2.0) lib/action_dispatch/middleware/callbacks.rb:27:in `call'\nactionpack (4.2.0) lib/action_dispatch/middleware/reloader.rb:73:in `call'\nactionpack (4.2.0) lib/action_dispatch/middleware/remote_ip.rb:78:in `call'\nbetter_errors (2.1.1) lib/better_errors/middleware.rb:84:in `protected_app_call'\nbetter_errors (2.1.1) lib/better_errors/middleware.rb:79:in `better_errors_call'\nbetter_errors (2.1.1) lib/better_errors/middleware.rb:57:in `call'\nactionpack (4.2.0) lib/action_dispatch/middleware/debug_exceptions.rb:17:in `call'\nactionpack (4.2.0) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'\nrailties (4.2.0) lib/rails/rack/logger.rb:38:in `call_app'\nrailties (4.2.0) lib/rails/rack/logger.rb:20:in `block in call'\nactivesupport (4.2.0) lib/active_support/tagged_logging.rb:68:in `block in tagged'\nactivesupport (4.2.0) lib/active_support/tagged_logging.rb:26:in `tagged'\nactivesupport (4.2.0) lib/active_support/tagged_logging.rb:68:in `tagged'\nrailties (4.2.0) lib/rails/rack/logger.rb:20:in `call'\nquiet_assets (1.1.0) lib/quiet_assets.rb:27:in `call_with_quiet_assets'\nactionpack (4.2.0) lib/action_dispatch/middleware/request_id.rb:21:in `call'\nrack (1.6.0) lib/rack/methodoverride.rb:22:in `call'\nrack (1.6.0) lib/rack/runtime.rb:18:in `call'\nactivesupport (4.2.0) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'\nrack (1.6.0) lib/rack/lock.rb:17:in `call'\nrack-livereload (0.3.15) lib/rack/livereload.rb:23:in `_call'\nrack-livereload (0.3.15) lib/rack/livereload.rb:14:in `call'\nactionpack (4.2.0) lib/action_dispatch/middleware/static.rb:113:in `call'\nrack (1.6.0) lib/rack/sendfile.rb:113:in `call'\nrailties (4.2.0) lib/rails/engine.rb:518:in `call'\nrailties (4.2.0) lib/rails/application.rb:164:in `call'\nrack (1.6.0) lib/rack/lock.rb:17:in `call'\nrack (1.6.0) lib/rack/content_length.rb:15:in `call'\nrack (1.6.0) lib/rack/handler/webrick.rb:89:in `service'\n () home/yogesh/.rvm/rubies/ruby-2.2.3/lib/ruby/2.2.0/webrick/httpserver.rb:138:in `service'\n () home/yogesh/.rvm/rubies/ruby-2.2.3/lib/ruby/2.2.0/webrick/httpserver.rb:94:in `run'\n () home/yogesh/.rvm/rubies/ruby-2.2.3/lib/ruby/2.2.0/webrick/server.rb:294:in `block in start_thread'\nlogging (1.8.2) lib/logging/diagnostic_context.rb:323:in `block in create_with_logging_context'\n\n\n\nStarted POST \"/__better_errors/329b87011a8e5497/variables\" for ::1 at 2015-11-18 16:48:21 +0530\n</code></pre>\n\n<p>My code in pages_controller.rb</p>\n\n<pre><code>class PagesController &lt; ApplicationController\n\nlayout :determine_layout\nbefore_filter :cms_setup, :only =&gt; [:show,  :sitemap, :search]\nbefore_filter :set_locale\nhelper_method :transformed_content\n\ndef parse_facebook_cookies\n@facebook_cookies = Koala::Facebook::OAuth.new.get_user_info_from_cookie(cookies)\nend\n\ndef sitemap\n@page = Page.friendly.find(\"sitemap\")\n@subnav_pages = nil\nend\n\ndef search\n@page = Page.friendly.find(\"search\")\n@section = @page\n@pages=Page.nested_set\n@search = Sunspot.search([Cms::Page, Cms::Asset, Product, City, Location]) do\n  fulltext  params[:terms] do\n    fields  \"title_#{I18n.locale}\".to_sym, \"content_#{I18n.locale}\".to_sym, \"description_#{I18n.locale}\".to_sym, \"address_#{I18n.locale}\".to_sym\n  end\nend\n@results = @search.results\nend\n\ndef cms_update\npage = Page.find(params[:id])\nregion = Cms::Region.find(params[:region_id])\nasset =  Cms::Asset.find(params[:asset_id]) if params[:asset_id] &amp;&amp; !params[:asset_id].blank?\n# Update page\nif asset\n  #asset.update_column(:content,  params[:content])\n  if asset.content != params[:content]\n    asset.content = params[:content]\n    asset.save!\n  end\n  expire_fragment([\"page_#{page.id}_region_#{region.id}_asset_#{asset.id}\"])\n  else\n  asset = Cms::Asset.new(:content =&gt; params[:content], :name =&gt; \"#{page.title} - #{region.name}\")\n  asset.save\n  end\n\npra = Cms::PageRegionAsset.find_or_initialize_by(page_id: page.id, region_id: region.id, asset_id: asset.id) unless asset.nil?\n\nunless params[:content].blank?\n  pra.save!\nend\n\nrender text: \"\"\nend\n\n\ndef home\nresponse.headers.delete \"X-Frame-Options\"\n@page = Page.root\nget_site_pages\nget_main_nav\nget_subnav\n@slides = Slide.visible.in_order\n@newsletter_signup = NewsletterSignup.new\nshow\nrender \"show\"\nend\n\ndef show\nresponse.headers.delete \"X-Frame-Options\"\nif @page.redirect_page_id.nil?\n  #get page template and regions\n  @template = @page.template\n  @regions = @template.regions\n  if @page.product_lines.any?\n    @product_line = @page.product_lines.first\n  end\n  if is_editing?\n    @page_content = HashWithIndifferentAccess[:regions =&gt; @regions.map { |r| {:placeholder =&gt; r.placeholder, :name =&gt; r.name, :id =&gt; r.id, :assets =&gt; r.serialized_assets_for(@page)}}.flatten]\n  else\n    @page_content = HashWithIndifferentAccess[:regions =&gt; @regions.map { |r|\n                                                {:placeholder =&gt; r.placeholder, :name =&gt; r.name, :id =&gt; r.id, :assets =&gt; r.serialized_assets_for(@page)}\n                                              }.flatten]\n  end\n  @cms_assets = @page.page_region_assets.order(position: :asc)\nelse\n  unless @page.redirect_page_id.nil?\n    @page = Page.find(@page.redirect_page_id)\n    redirect_to @page.menu_url and return\n  end\nend\n@instagram = Instagram.user_recent_media(\"2502342425320\", {:count =&gt; 4})\n@oauth = Koala::Facebook::OAuth.new(\"15239926112542342322478\", \"fc960a1a044492431aer35qafsd44a42c9c47990ef9b\", \"http://localhost:3000/\")\n@authtoken = @oauth.get_app_access_token\n# generate authenticating URL\n@graph = Koala::Facebook::API.new(\"1523992323611252478|1iBWrcRsYSBsISfsyUoNSmm_opxrI\")\n# @friends = @graph.get_connections(\"me\", \"friends\")\n# @profile = @graph.get_object(\"me\")\n@feed = @graph.get_connections(\"me\", \"feed\")\nend\n\ndef render_404\nrespond_to do |format|\n  format.html { render :file =&gt; \"#{Rails.root}/public/404\", :layout =&gt; false, :status =&gt; :not_found }\n  format.xml  { head :not_found }\n  format.any  { head :not_found }\nend\nend\n\nprivate\ndef determine_layout\n@page.template.file_name\nend\n\ndef get_main_nav\n@main_nav_items = Page.main_nav\nend\n\ndef get_subnav\n@subnav_pages = @page.subnav_pages\nend\n\ndef get_site_pages\n@site_pages = Page.nested_set.visible\nend\n\ndef cms_setup\n#render text: params.inspect and return\nif params[:path].nil?\n  @page = Page.root\nelse\n  @page = Page.find_by_slug(params[:id]) if params[:id]\n  @page ||= Page.friendly.find(params[:path]) if params[:path]\n  @page ||= Page.root unless params[:path]\n  @page ||= Page.find_by(slug: params[:path].match(/[^\\/]+$/)[0]) if params[:path]\n  @page ||= Page.find_by_slug(\"404\")\n  if @page.nil?\n    #render text: params.inspect and return\n    render_404 and return\n    #page_not_found\n    redirect_to \"/404\" and return\n  end\nend\n@section = @page if @page.depth == 1\n@section ||= @page.ancestors.select{|p| p.depth == 1}.first if @page.depth &gt; 1\nget_main_nav\nget_subnav\nend\n\ndef transformed_content(content)\nfrag = Nokogiri::HTML::fragment(content) #this gets us the regions content in a nodset\nsnippets = frag.css(\"div.cms-snippet\")\ndynamic_snippets = frag.xpath('descendant::div[@data-snippettype=\"dynamic\"]')\ndynamic_snippets.each do |ds|\n  object_class = ds.xpath(\"@data-objectclass\")\n  object_id = ds.xpath(\"@data-objectid\").first.value\n  snippet_partial = \"/#{object_class.to_s.pluralize}/instance.html.haml\"\n  ds.content = \"\" #zero out the content and replace it with a rendered partial\n  ds &lt;&lt; (raw render :partial =&gt; snippet_partial, :locals =&gt; {:object_id =&gt; object_id}).to_s\nend\nfrag\nend\n\ndef page_params\nparams.require(:page).permit!\nend\n\ndef page_not_found\nraise ActionController::RoutingError.new('Not Found')\nend\n\ndef set_locale\nunless request.path.include?(\"/api\")\n  @locale = params[:locale]\n  @locale ||= cookies[:locale]\n  @locale ||= I18n.default_locale\n\n  I18n.locale = @locale\n\n\n  if params[:locale].blank?\n    if cookies[:locale].blank?\n      redirect_to \"/#{I18n.default_locale.to_s}#{request.path_info}\" unless request.path.include?(\"/admin\")\n    else\n      redirect_to \"/#{cookies[:locale].to_s}#{request.path_info}\" unless request.path.include?(\"/admin\")\n    end\n  end\n  cookies[:locale] = I18n.locale\n  if request.path.include?(\"/admin\")\n    I18n.locale = :en\n  end\n  end\n  end\n  end\n</code></pre>\n\n<p>I will be really thankful if someone tells me what is wrong here.</p>\n"}, {"tags": ["ruby", "error-handling", "rubygems"], "answers": [{"tags": [], "owner": {"reputation": 546, "user_id": 861987, "user_type": "registered", "accept_rate": 27, "profile_image": "https://i.stack.imgur.com/qfu4K.jpg?s=128&g=1", "display_name": "Athiruban", "link": "https://stackoverflow.com/users/861987/athiruban"}, "is_accepted": false, "score": 1, "last_activity_date": 1447844727, "creation_date": 1447844727, "answer_id": 33778386, "question_id": 33778385, "link": "https://stackoverflow.com/questions/33778385/gemconflicterror-while-running-rspec-test-cases/33778386#33778386", "title": "Gem::ConflictError while running Rspec test cases", "body": "<p>After a little search I found that the \"bundle\" is not initialised for this repository and the Gemfile.lock is missing.</p>\n\n<p>So I just ran </p>\n\n<blockquote>\n  <p>bundle install</p>\n</blockquote>\n\n<p>and it worked.</p>\n\n<p>It installed the necessary gems and then I was able to run the specs properly.</p>\n"}], "owner": {"reputation": 546, "user_id": 861987, "user_type": "registered", "accept_rate": 27, "profile_image": "https://i.stack.imgur.com/qfu4K.jpg?s=128&g=1", "display_name": "Athiruban", "link": "https://stackoverflow.com/users/861987/athiruban"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 253, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1447844727, "creation_date": 1447844727, "question_id": 33778385, "link": "https://stackoverflow.com/questions/33778385/gemconflicterror-while-running-rspec-test-cases", "title": "Gem::ConflictError while running Rspec test cases", "body": "<p>This question and answer might be simple however I thought it would be worth sharing.</p>\n\n<p>I cloned the github repository <a href=\"https://github.com/mikel/mail.git\" rel=\"nofollow\">https://github.com/mikel/mail.git</a> and browsing the specs.</p>\n\n<p>I just thought of running the specs inside the application so ran the command \"rspec\".</p>\n\n<p><strong>Error description</strong></p>\n\n<pre><code>athi@localhost mail (master) $ rspec\nRunning Specs under Ruby Version 2.1.5\n/Users/athi/.rvm/rubies/ruby-2.1.5/lib/ruby/site_ruby/2.1.0/rubygems/specification.rb:2104:in `raise_if_conflicts': Unable to activate rspec-3.3.0, because rspec-core-3.4.0 conflicts with rspec-core (~&gt; 3.3.0) (Gem::ConflictError)\n    from /Users/athi/.rvm/rubies/ruby-2.1.5/lib/ruby/site_ruby/2.1.0/rubygems/specification.rb:1282:in `activate'\n    from /Users/athi/.rvm/rubies/ruby-2.1.5/lib/ruby/site_ruby/2.1.0/rubygems.rb:198:in `rescue in try_activate'\n    from /Users/athi/.rvm/rubies/ruby-2.1.5/lib/ruby/site_ruby/2.1.0/rubygems.rb:195:in `try_activate'\n    from /Users/athi/.rvm/rubies/ruby-2.1.5/lib/ruby/site_ruby/2.1.0/rubygems/core_ext/kernel_require.rb:126:in `rescue in require'\n    from /Users/athi/.rvm/rubies/ruby-2.1.5/lib/ruby/site_ruby/2.1.0/rubygems/core_ext/kernel_require.rb:39:in `require'\n    from /Users/athi/Documents/apps/github/mail/spec/spec_helper.rb:18:in `&lt;top (required)&gt;'\n    from /Users/athi/.rvm/rubies/ruby-2.1.5/lib/ruby/site_ruby/2.1.0/rubygems/core_ext/kernel_require.rb:54:in `require'\n    from /Users/athi/.rvm/rubies/ruby-2.1.5/lib/ruby/site_ruby/2.1.0/rubygems/core_ext/kernel_require.rb:54:in `require'\n    from /Users/athi/Documents/apps/github/mail/spec/mail/attachments_list_spec.rb:2:in `&lt;top (required)&gt;'\n    from /Users/athi/.rvm/gems/ruby-2.1.5/gems/rspec-core-3.4.0/lib/rspec/core/configuration.rb:1361:in `load'\n    from /Users/athi/.rvm/gems/ruby-2.1.5/gems/rspec-core-3.4.0/lib/rspec/core/configuration.rb:1361:in `block in load_spec_files'\n    from /Users/athi/.rvm/gems/ruby-2.1.5/gems/rspec-core-3.4.0/lib/rspec/core/configuration.rb:1359:in `each'\n    from /Users/athi/.rvm/gems/ruby-2.1.5/gems/rspec-core-3.4.0/lib/rspec/core/configuration.rb:1359:in `load_spec_files'\n    from /Users/athi/.rvm/gems/ruby-2.1.5/gems/rspec-core-3.4.0/lib/rspec/core/runner.rb:102:in `setup'\n    from /Users/athi/.rvm/gems/ruby-2.1.5/gems/rspec-core-3.4.0/lib/rspec/core/runner.rb:88:in `run'\n    from /Users/athi/.rvm/gems/ruby-2.1.5/gems/rspec-core-3.4.0/lib/rspec/core/runner.rb:73:in `run'\n    from /Users/athi/.rvm/gems/ruby-2.1.5/gems/rspec-core-3.4.0/lib/rspec/core/runner.rb:41:in `invoke'\n    from /Users/athi/.rvm/gems/ruby-2.1.5/gems/rspec-core-3.4.0/exe/rspec:4:in `&lt;top (required)&gt;'\n    from /Users/athi/.rvm/gems/ruby-2.1.5/bin/rspec:23:in `load'\n    from /Users/athi/.rvm/gems/ruby-2.1.5/bin/rspec:23:in `&lt;main&gt;'\n    from /Users/athi/.rvm/gems/ruby-2.1.5/bin/ruby_executable_hooks:15:in `eval'\n    from /Users/athi/.rvm/gems/ruby-2.1.5/bin/ruby_executable_hooks:15:in `&lt;main&gt;'\n</code></pre>\n"}, {"tags": ["jquery", "ruby-on-rails", "ruby"], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user5574945"}, "edited": false, "score": 0, "creation_date": 1447846478, "post_id": 33778965, "comment_id": 55324376, "body": "I am using rails 4.2.4 ..so how to adapt jquery code?? I have included all the jquery libraries which were relevant"}, {"owner": {"reputation": 160, "user_id": 891807, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/75b1379480467934878c8b2087c33eb6?s=128&d=identicon&r=PG", "display_name": "Daniel Lutz", "link": "https://stackoverflow.com/users/891807/daniel-lutz"}, "edited": false, "score": 0, "creation_date": 1447849263, "post_id": 33778965, "comment_id": 55326124, "body": "i have edited the answer. can you check it, please? :)"}, {"owner": {"user_type": "does_not_exist", "display_name": "user5574945"}, "edited": false, "score": 0, "creation_date": 1447849595, "post_id": 33778965, "comment_id": 55326320, "body": "Yes I have already downloaded scriptaculous file and it is in my folder assets/javascript ..do i need to place it somewhere else also ?? do i need to include that scriptaculous file in my views/layout/application.html.erb ?? or application.js file"}, {"owner": {"reputation": 160, "user_id": 891807, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/75b1379480467934878c8b2087c33eb6?s=128&d=identicon&r=PG", "display_name": "Daniel Lutz", "link": "https://stackoverflow.com/users/891807/daniel-lutz"}, "edited": false, "score": 0, "creation_date": 1447849746, "post_id": 33778965, "comment_id": 55326417, "body": "you need to add it to your application.js file."}, {"owner": {"reputation": 160, "user_id": 891807, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/75b1379480467934878c8b2087c33eb6?s=128&d=identicon&r=PG", "display_name": "Daniel Lutz", "link": "https://stackoverflow.com/users/891807/daniel-lutz"}, "edited": false, "score": 0, "creation_date": 1447849850, "post_id": 33778965, "comment_id": 55326483, "body": "1. move it to your &#39;vendor/assets/javascripts&#39; folder."}, {"owner": {"reputation": 160, "user_id": 891807, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/75b1379480467934878c8b2087c33eb6?s=128&d=identicon&r=PG", "display_name": "Daniel Lutz", "link": "https://stackoverflow.com/users/891807/daniel-lutz"}, "edited": false, "score": 0, "creation_date": 1447849908, "post_id": 33778965, "comment_id": 55326521, "body": "2. add it to your application.js using &#39;require&#39;: //= require scriptaculous"}, {"owner": {"user_type": "does_not_exist", "display_name": "user5574945"}, "edited": false, "score": 0, "creation_date": 1447850498, "post_id": 33778965, "comment_id": 55326965, "body": "When I am viewing the page source so control.js file is coming up and scriptaculous file is coming down..."}, {"owner": {"reputation": 160, "user_id": 891807, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/75b1379480467934878c8b2087c33eb6?s=128&d=identicon&r=PG", "display_name": "Daniel Lutz", "link": "https://stackoverflow.com/users/891807/daniel-lutz"}, "edited": false, "score": 0, "creation_date": 1447850837, "post_id": 33778965, "comment_id": 55327212, "body": "probably the require of &#39;scriptaculous&#39; is after the require of &#39;control&#39; or after require_tree. try putting the require scriptaculous first."}, {"owner": {"reputation": 160, "user_id": 891807, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/75b1379480467934878c8b2087c33eb6?s=128&d=identicon&r=PG", "display_name": "Daniel Lutz", "link": "https://stackoverflow.com/users/891807/daniel-lutz"}, "edited": false, "score": 0, "creation_date": 1447851269, "post_id": 33778965, "comment_id": 55327507, "body": "now you need to download prototype to your &#39;vendor/assets/javascripts&#39; and add it to your &#39;application.js&#39; file, before the require_tree. :)"}, {"owner": {"user_type": "does_not_exist", "display_name": "user5574945"}, "edited": false, "score": 0, "creation_date": 1447852106, "post_id": 33778965, "comment_id": 55328081, "body": "I have downloaded prototype file and place in javascript directory and included it before require_tree also included effects.js before require_tree Now I am getting 3 errors but they are all same  1)Uncaught TypeError: element.attachEvent is not a function"}, {"owner": {"reputation": 160, "user_id": 891807, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/75b1379480467934878c8b2087c33eb6?s=128&d=identicon&r=PG", "display_name": "Daniel Lutz", "link": "https://stackoverflow.com/users/891807/daniel-lutz"}, "edited": false, "score": 0, "creation_date": 1447852324, "post_id": 33778965, "comment_id": 55328259, "body": "see the link on my answer. it looks like conflict with jQuery."}, {"owner": {"user_type": "does_not_exist", "display_name": "user5574945"}, "edited": false, "score": 0, "creation_date": 1447852629, "post_id": 33778965, "comment_id": 55328455, "body": "hey I have written  $.noConflict(); in my application .js file now  I am getting only two errors 1) Uncaught TypeError: element.attachEvent is not a function  2 ) Uncaught TypeError: Cannot read property &#39;bind&#39; of null"}, {"owner": {"user_type": "does_not_exist", "display_name": "user5574945"}, "edited": false, "score": 0, "creation_date": 1447853675, "post_id": 33778965, "comment_id": 55329299, "body": "Sorry I am not able to understand what change I have to make"}, {"owner": {"reputation": 160, "user_id": 891807, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/75b1379480467934878c8b2087c33eb6?s=128&d=identicon&r=PG", "display_name": "Daniel Lutz", "link": "https://stackoverflow.com/users/891807/daniel-lutz"}, "edited": false, "score": 0, "creation_date": 1447853959, "post_id": 33778965, "comment_id": 55329495, "body": "try putting jQuery.noConflict(), instead of $.noConflict();"}, {"owner": {"user_type": "does_not_exist", "display_name": "user5574945"}, "edited": false, "score": 0, "creation_date": 1447910808, "post_id": 33778965, "comment_id": 55358261, "body": "I have Jquery.noConflict() in my application.js folder and now popup is loading but 1 error is still coming 1) Uncaught TypeError: element.attachEvent is not a function also no form is coming in that popup"}, {"owner": {"user_type": "does_not_exist", "display_name": "user5574945"}, "edited": false, "score": 0, "creation_date": 1447910936, "post_id": 33778965, "comment_id": 55358287, "body": "THis is my application.js file   //= require jquery //= require jquery_ujs //= require turbolinks //= require prototype //= require scriptaculous //= require effects //= require_tree . // Add following lines. //= require controls //= require social-share-button $j=jQuery.noConflict(); jQuery(document).ready(function($){ $( &quot;.share a&quot; ).bind(&quot;click&quot;, function() {\t var a = this; $(&quot;#invitation_form&quot;).attr(&quot;title&quot;, &quot;Share &#39;&quot; + $(a).attr(&quot;folder_name&quot;) + &quot;&#39; with others&quot; );"}, {"owner": {"user_type": "does_not_exist", "display_name": "user5574945"}, "edited": false, "score": 0, "creation_date": 1447910998, "post_id": 33778965, "comment_id": 55358301, "body": "$(&quot;#ui-dialog-title-invitation_form&quot;).text(&quot;Share &#39;&quot; + $(a).attr(&quot;folder_name&quot;) + &quot;&#39; with others&quot;);  \t\t\t\t$(&quot;#folder_id&quot;).val($(a).attr(&quot;folder_id&quot;)); \t\t\t\t$( &quot;#invitation_form&quot; ).dialog({ \t\t\t\t\theight: 300, \t\t\t\t\twidth: 600, \t\t\t\t\tmodal: true, \t\t\t\t\tbuttons: { \t\t\t\t\t&quot;Share&quot;: function() { \t\t\t\t\t\t\tvar post_url = $(&quot;#invitation_form form&quot;).attr(&quot;action&quot;); \t\t\t\t\t\t\t$.post(post_url,$(&quot;#invitation_form form&quot;).serialize(), null, &quot;script&quot;);\t \t\t\t\t\t\t\treturn false; \t\t\t\t\t\t}, \t\t\t\t\t\tCancel: function() { \t\t\t\t\t\t\t$( this ).dialog( &quot;close&quot; ); \t\t\t\t\t\t} \t\t\t\t\t},"}, {"owner": {"user_type": "does_not_exist", "display_name": "user5574945"}, "edited": false, "score": 0, "creation_date": 1447911014, "post_id": 33778965, "comment_id": 55358305, "body": "close: function() {  \t\t\t\t\t} \t\t\t\t}); \t\t\t\t \t\t\t\treturn false; \t\t\t});   });"}], "tags": [], "owner": {"reputation": 160, "user_id": 891807, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/75b1379480467934878c8b2087c33eb6?s=128&d=identicon&r=PG", "display_name": "Daniel Lutz", "link": "https://stackoverflow.com/users/891807/daniel-lutz"}, "is_accepted": false, "score": 0, "last_activity_date": 1447849242, "last_edit_date": 1495541769, "creation_date": 1447846371, "answer_id": 33778965, "question_id": 33778179, "link": "https://stackoverflow.com/questions/33778179/jquery-errors-and-rails/33778965#33778965", "title": "jQuery errors and Rails", "body": "<p>The article is from 2011, using a very old version of Rails.</p>\n\n<p>Rails 4 is not provided with scriptaculous anymore.</p>\n\n<p>You have two options:</p>\n\n<ol>\n<li><em>download and enable scriptaculous in your Rails application</em>;</li>\n<li><em>adapt scriptaculous' functions to use jquery instead</em>.</li>\n</ol>\n\n<p>It seem it is a valid jQuery code.</p>\n\n<p>Have you included scriptaculous on your application?</p>\n\n<p>If so, can you try this?</p>\n\n<p><a href=\"https://stackoverflow.com/questions/9253977/valid-jquery-scripts-not-loading-in-production-mode\">Valid jQuery scripts not loading in production mode</a></p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user5574945"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 62, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1447849242, "creation_date": 1447844170, "last_edit_date": 1447846337, "question_id": 33778179, "link": "https://stackoverflow.com/questions/33778179/jquery-errors-and-rails", "title": "jQuery errors and Rails", "body": "<p>I am following <a href=\"http://code.tutsplus.com/tutorials/build-a-dropbox-like-file-sharing-site-with-ruby-on-rails--net-17940\" rel=\"nofollow\">this tutorial</a>.</p>\n\n<p>and struck at step <code>12</code>. </p>\n\n<p>Getting these 4 errors on console: </p>\n\n<pre><code>Uncaught controls.js requires including script.aculo.us' effects.js library&lt;br/&gt;\nUncaught ReferenceError: Effect is not defined&lt;br/&gt;\nUncaught ReferenceError: Prototype is not defined&lt;br/&gt;\nUncaught TypeError: Cannot read property 'bind' of null\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 9602, "user_id": 3607136, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/NRFso.jpg?s=128&g=1", "display_name": "Gagan Gami", "link": "https://stackoverflow.com/users/3607136/gagan-gami"}, "edited": false, "score": 1, "creation_date": 1447843961, "post_id": 33777961, "comment_id": 55322633, "body": "You mean you wanted to create <code>Locations</code> table with <code>city, country, district, street, flat number, floor, landmark</code> fields?"}, {"owner": {"reputation": 637, "user_id": 4012683, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/0df29ae797a3cff85b01e88d75dc84b7?s=128&d=identicon&r=PG&f=1", "display_name": "huzefa biyawarwala", "link": "https://stackoverflow.com/users/4012683/huzefa-biyawarwala"}, "edited": false, "score": 2, "creation_date": 1447844208, "post_id": 33777961, "comment_id": 55322794, "body": "Possible duplicate of <a href=\"http://stackoverflow.com/questions/16388756/create-new-table-in-ruby-on-rails\">create new Table in ruby on rails</a>"}, {"owner": {"reputation": 1, "user_id": 3912536, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed88a52fae50a8664e9e23521b3c66a0?s=128&d=identicon&r=PG&f=1", "display_name": "Loaa", "link": "https://stackoverflow.com/users/3912536/loaa"}, "edited": false, "score": 0, "creation_date": 1447845972, "post_id": 33777961, "comment_id": 55324049, "body": "No Location is a table attribute, my main table is: User : Id , Firstname, Lastname, email, Location (city, country, district, street, flat number, floor, landmark)"}], "answers": [{"comments": [{"owner": {"reputation": 47232, "user_id": 1772830, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Qtoqg.jpg?s=128&g=1", "display_name": "Andrey Deineko", "link": "https://stackoverflow.com/users/1772830/andrey-deineko"}, "edited": false, "score": 2, "creation_date": 1447844360, "post_id": 33778171, "comment_id": 55322913, "body": "&quot;nice&quot; answer for someone, who has no idea of what model is and what difference there is between variable and attribute.. Just provide OP with the link to rails guides - this will be the only potentially useful thing for him."}, {"owner": {"reputation": 9602, "user_id": 3607136, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/NRFso.jpg?s=128&g=1", "display_name": "Gagan Gami", "link": "https://stackoverflow.com/users/3607136/gagan-gami"}, "reply_to_user": {"reputation": 47232, "user_id": 1772830, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Qtoqg.jpg?s=128&g=1", "display_name": "Andrey Deineko", "link": "https://stackoverflow.com/users/1772830/andrey-deineko"}, "edited": false, "score": 0, "creation_date": 1447844791, "post_id": 33778171, "comment_id": 55323228, "body": "@AndreyDeineko : Thank you :) I have added <code>Ruby on Rails Guides</code> link for reference"}, {"owner": {"reputation": 1, "user_id": 3912536, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed88a52fae50a8664e9e23521b3c66a0?s=128&d=identicon&r=PG&f=1", "display_name": "Loaa", "link": "https://stackoverflow.com/users/3912536/loaa"}, "edited": false, "score": 0, "creation_date": 1447846051, "post_id": 33778171, "comment_id": 55324094, "body": "No Location is a table attribute, my main table is: User :- Id , Firstname, Lastname, email, Location (city, country, district, street, flat number, floor, landmark), I don&#39;t know how to represent Location in the create model command"}, {"owner": {"reputation": 9602, "user_id": 3607136, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/NRFso.jpg?s=128&g=1", "display_name": "Gagan Gami", "link": "https://stackoverflow.com/users/3607136/gagan-gami"}, "reply_to_user": {"reputation": 1, "user_id": 3912536, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed88a52fae50a8664e9e23521b3c66a0?s=128&d=identicon&r=PG&f=1", "display_name": "Loaa", "link": "https://stackoverflow.com/users/3912536/loaa"}, "edited": false, "score": 0, "creation_date": 1447847762, "post_id": 33778171, "comment_id": 55325192, "body": "@Loaa : so you mean you wanted to add these fields in <code>users</code> table? I have update my answer for this case also. If this is not what you want then please let me know in details exactly what you want?"}, {"owner": {"reputation": 9602, "user_id": 3607136, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/NRFso.jpg?s=128&g=1", "display_name": "Gagan Gami", "link": "https://stackoverflow.com/users/3607136/gagan-gami"}, "edited": false, "score": 0, "creation_date": 1447848091, "post_id": 33778171, "comment_id": 55325423, "body": "You can also maintain separate table for locations and give relation to user table. So you can easily access user&#39;s location from this relation through user object."}], "tags": [], "owner": {"reputation": 9602, "user_id": 3607136, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/NRFso.jpg?s=128&g=1", "display_name": "Gagan Gami", "link": "https://stackoverflow.com/users/3607136/gagan-gami"}, "is_accepted": false, "score": 2, "last_activity_date": 1447847706, "last_edit_date": 1447847706, "creation_date": 1447844152, "answer_id": 33778171, "question_id": 33777961, "link": "https://stackoverflow.com/questions/33777961/constructing-composite-attribute-in-rails-with-an-association/33778171#33778171", "title": "Constructing composite attribute in Rails with an association", "body": "<p>Generate <code>Location</code> model:</p>\n\n<pre><code>rails g model Location city:string country:string district:string street:string flat_number:string floor:integer landmark:string\n</code></pre>\n\n<p>then run <code>rake db:migrate</code></p>\n\n<p><strong>Note:</strong> In above command <code>Location</code> is model name and it's table generated with Plural of model name so your table name will be <code>locations</code>. after that there are <code>field_name:data_type</code></p>\n\n<hr>\n\n<p>as per your comment you wanted to add fields in <code>users</code> table(existing) then in this case to add fields in existing table:</p>\n\n<pre><code>rails generate migration AddLocationToUser city:string country:string district:string street:string flat_number:string floor:integer landmark:string\n</code></pre>\n\n<p>then run <code>rake db:migrate</code>\nthis will add fields to your users table.</p>\n\n<p>for more info <a href=\"http://edgeguides.rubyonrails.org/active_record_migrations.html\" rel=\"nofollow\">http://edgeguides.rubyonrails.org/active_record_migrations.html</a></p>\n\n<p>There is very nice official rails guideline <a href=\"http://edgeguides.rubyonrails.org\" rel=\"nofollow\">http://edgeguides.rubyonrails.org</a> </p>\n"}], "owner": {"reputation": 1, "user_id": 3912536, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed88a52fae50a8664e9e23521b3c66a0?s=128&d=identicon&r=PG&f=1", "display_name": "Loaa", "link": "https://stackoverflow.com/users/3912536/loaa"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 167, "favorite_count": 0, "closed_date": 1447860136, "answer_count": 1, "score": 0, "last_activity_date": 1493482343, "creation_date": 1447843583, "last_edit_date": 1493482343, "question_id": 33777961, "link": "https://stackoverflow.com/questions/33777961/constructing-composite-attribute-in-rails-with-an-association", "closed_reason": "Not suitable for this site", "title": "Constructing composite attribute in Rails with an association", "body": "<p>I want to create a table in Ruby on rails with association <code>Location</code> which consists of multiple variables, here's the Location attribute:</p>\n\n<pre><code>Location: (city, country, district, street, flat number, floor, landmark)\n</code></pre>\n\n<p>How to represent this in ruby on rails syntax? I'm a bit new to it and I can't quite know how to do this.</p>\n"}, {"tags": ["ruby-on-rails", "arrays", "ruby", "string"], "comments": [{"owner": {"reputation": 7638, "user_id": 1014251, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/1c4500c91af486c885af8bb84eefd063?s=128&d=identicon&r=PG", "display_name": "ReggieB", "link": "https://stackoverflow.com/users/1014251/reggieb"}, "edited": false, "score": 0, "creation_date": 1447844047, "post_id": 33777440, "comment_id": 55322682, "body": "Run benchmark tests on the two versions. <a href=\"http://ruby-doc.org/stdlib-2.2.3/libdoc/benchmark/rdoc/Benchmark.html\" rel=\"nofollow noreferrer\">ruby-doc.org/stdlib-2.2.3/libdoc/benchmark/rdoc/Benchmark.ht&zwnj;&#8203;ml</a>"}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1447844959, "post_id": 33777440, "comment_id": 55323328, "body": "Freezing the strings ensures that you cannot change them, e.g. <code>WORLD_COUNTRIES.first.clear</code> would raise a <code>RuntimeError</code>"}, {"owner": {"reputation": 48635, "user_id": 6742, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/xPawo.png?s=128&g=1", "display_name": "David Aldridge", "link": "https://stackoverflow.com/users/6742/david-aldridge"}, "reply_to_user": {"reputation": 7638, "user_id": 1014251, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/1c4500c91af486c885af8bb84eefd063?s=128&d=identicon&r=PG", "display_name": "ReggieB", "link": "https://stackoverflow.com/users/1014251/reggieb"}, "edited": false, "score": 1, "creation_date": 1447845889, "post_id": 33777440, "comment_id": 55323988, "body": "@ReggieB Thanks, I&#39;ll post results of testing, for any feedback on the validity of the test and interpretation"}, {"owner": {"reputation": 48635, "user_id": 6742, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/xPawo.png?s=128&g=1", "display_name": "David Aldridge", "link": "https://stackoverflow.com/users/6742/david-aldridge"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1447845949, "post_id": 33777440, "comment_id": 55324032, "body": "@Stefan Yes, and the arrays themselves and the values in them are considered immutable so that&#39;s OK. What i&#39;m trying to avoid is any unnecessary cost in allocation of new objects."}], "answers": [{"comments": [{"owner": {"reputation": 48635, "user_id": 6742, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/xPawo.png?s=128&g=1", "display_name": "David Aldridge", "link": "https://stackoverflow.com/users/6742/david-aldridge"}, "edited": false, "score": 0, "creation_date": 1448209902, "post_id": 33856734, "comment_id": 55478695, "body": "I&#39;m reluctant to do so only because I have so many places in the system where I store arrays of this sort. So users select from lists of country/language codes, and they are persisted in PostgreSQL text arrays. I think I&#39;d have to migrate to using Rails serialisation instead of text arrays (so I&#39;d lose access to the values through SQL as well), and rewrite view and model code. It&#39;s too big a solution for something that might not even be a problem."}, {"owner": {"reputation": 205376, "user_id": 13, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/1XtZi.jpg?s=128&g=1", "display_name": "Chris Jester-Young", "link": "https://stackoverflow.com/users/13/chris-jester-young"}, "reply_to_user": {"reputation": 48635, "user_id": 6742, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/xPawo.png?s=128&g=1", "display_name": "David Aldridge", "link": "https://stackoverflow.com/users/6742/david-aldridge"}, "edited": false, "score": 0, "creation_date": 1448210057, "post_id": 33856734, "comment_id": 55478758, "body": "@DavidAldridge I agree the gains may not be worth it, but FWIW you don&#39;t have to rewrite much of anything. That&#39;s one area where Ruby&#39;s support for monkey patching really shines."}, {"owner": {"reputation": 48635, "user_id": 6742, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/xPawo.png?s=128&g=1", "display_name": "David Aldridge", "link": "https://stackoverflow.com/users/6742/david-aldridge"}, "edited": false, "score": 0, "creation_date": 1448210691, "post_id": 33856734, "comment_id": 55479017, "body": "@ChrisJesterYoung I can see that I could be overwriting getter and setters to be converting arrays of strings to/from arrays of symbols, so I store as array of string but use as array-of-symbol, but my concern is really the amount of memory and GC being required by continually using these arrays. If the quick fix is to freeze the strings in the arrays then that&#39;s very do-able, but at the moment I&#39;m having trouble quantifying the difference in memory usage even."}, {"owner": {"reputation": 205376, "user_id": 13, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/1XtZi.jpg?s=128&g=1", "display_name": "Chris Jester-Young", "link": "https://stackoverflow.com/users/13/chris-jester-young"}, "reply_to_user": {"reputation": 48635, "user_id": 6742, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/xPawo.png?s=128&g=1", "display_name": "David Aldridge", "link": "https://stackoverflow.com/users/6742/david-aldridge"}, "edited": false, "score": 0, "creation_date": 1448212030, "post_id": 33856734, "comment_id": 55479530, "body": "@DavidAldridge The strings aren&#39;t being copied or anything, whether or not you freeze them. If you&#39;re really trying to minimise memory usage, you don&#39;t have anything to do."}], "tags": [], "owner": {"reputation": 205376, "user_id": 13, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/1XtZi.jpg?s=128&g=1", "display_name": "Chris Jester-Young", "link": "https://stackoverflow.com/users/13/chris-jester-young"}, "is_accepted": false, "score": 1, "last_activity_date": 1448207339, "creation_date": 1448207339, "answer_id": 33856734, "question_id": 33777440, "link": "https://stackoverflow.com/questions/33777440/ruby-should-strings-in-a-frozen-array-also-be-individually-frozen/33856734#33856734", "title": "Ruby: Should strings in a frozen array also be individually frozen?", "body": "<p>Since you're dealing with a small number of values, and since the performance benefits of symbols are evident from your testing, just go with symbols.</p>\n\n<p>BTW, you can use <code>map(&amp;:to_sym)</code> instead of <code>map {|x| x.to_sym}</code>.</p>\n"}], "owner": {"reputation": 48635, "user_id": 6742, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/xPawo.png?s=128&g=1", "display_name": "David Aldridge", "link": "https://stackoverflow.com/users/6742/david-aldridge"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 646, "favorite_count": 0, "answer_count": 1, "score": 5, "last_activity_date": 1448207339, "creation_date": 1447842157, "last_edit_date": 1447846346, "question_id": 33777440, "link": "https://stackoverflow.com/questions/33777440/ruby-should-strings-in-a-frozen-array-also-be-individually-frozen", "title": "Ruby: Should strings in a frozen array also be individually frozen?", "body": "<p>Ruby 2.2.3, Rails 4.2.1</p>\n\n<p>I have a large number of arrays of strings that I define as constants for use throughout an application. They are various sets of ISO country codes, language codes, that sort of thing, so two to four characters, numbered in the hundreds of unique values each.</p>\n\n<p>The different arrays are collections of these, so NORTH_AMERICA_COUNTRY_CODES might be an array of a dozen of so country codes, AFRICA_COUNTRY_CODES might be an array of around 60. Many of them overlap (various versions of the Commonwealth countries,  for example).</p>\n\n<p>The arrays are used in comparison with other arbitrary arrays of country codes for logic such as \"Subtract this list of countries from Africa\".</p>\n\n<p>So I'm wondering whether, when I generate these constants, I ought to freeze the strings within the arrays, so instead of:</p>\n\n<pre><code>WORLD_COUNTRIES = Countries.pluck(:country_code).freeze\n</code></pre>\n\n<p>... maybe ...</p>\n\n<pre><code>WORLD_COUNTRIES = Countries.pluck(:country_code).map{|c| c.freeze}.freeze\n</code></pre>\n\n<p>Is there a way of quantifying the potential benefits?</p>\n\n<p>I considered using arrays of symbols instead of arrays of strings, but the arbitrary arrays that these are used with are stored in PostgreSQL text arrays, and it seems like I'd need to serialise those columns instead, or maybe override the getter and setter methods to change the values between arrays of strings and arrays of symbols. Ugh.</p>\n\n<h1>Edit</h1>\n\n<p>Testing results, in which I've attempted to benchmark three situations: </p>\n\n<ol>\n<li>Comparing a frozen array of unfrozen strings with an unfrozen array of unfrozen strings</li>\n<li>Comparing a frozen array of <em>frozen</em> strings with an unfrozen array of unfrozen strings</li>\n<li>Comparing a frozen array of symbols with an unfrozen array of symbols (in case I bit the bullet and went all symbolic on this).</li>\n</ol>\n\n<p>Any thoughts on methodology or interpretation gratefully received. I'm not sure whether the similarity in results between the first two indicates that they are in all respects the same, but I'd be keen on anything that can directly point to differences in memory allocation.</p>\n\n<p>Script:</p>\n\n<pre><code>require 'benchmark'\n\ncountry_list             = [\"AD\", \"AE\", \"AF\", \"AG\", \"AI\", \"AL\", \"AM\", \"AN\", \"AO\", \"AQ\", \"AR\", \"AS\", \"AT\", \"AU\", \"AW\", \"AX\", \"AZ\", \"BA\", \"BB\", \"BD\", \"BE\", \"BF\", \"BG\", \"BH\", \"BI\", \"BJ\", \"BL\", \"BM\", \"BN\", \"BO\", \"BQ\", \"BR\", \"BS\", \"BT\", \"BV\", \"BW\", \"BY\", \"BZ\", \"CA\", \"CC\", \"CD\", \"CF\", \"CG\", \"CH\", \"CI\", \"CK\", \"CL\", \"CM\", \"CN\", \"CO\", \"CR\", \"CS\", \"CU\", \"CV\", \"CW\", \"CX\", \"CY\", \"CZ\", \"DE\", \"DJ\", \"DK\", \"DM\", \"DO\", \"DZ\", \"EC\", \"EE\", \"EG\", \"EH\", \"ER\", \"ES\", \"ET\", \"FI\", \"FJ\", \"FK\", \"FM\", \"FO\", \"FR\", \"GA\", \"GB\", \"GD\", \"GE\", \"GF\", \"GG\", \"GH\", \"GI\", \"GL\", \"GM\", \"GN\", \"GP\", \"GQ\", \"GR\", \"GS\", \"GT\", \"GU\", \"GW\", \"GY\", \"HK\", \"HM\", \"HN\", \"HR\", \"HT\", \"HU\", \"ID\", \"IE\", \"IL\", \"IM\", \"IN\", \"IO\", \"IQ\", \"IR\", \"IS\", \"IT\", \"JE\", \"JM\", \"JO\", \"JP\", \"KE\", \"KG\", \"KH\", \"KI\", \"KM\", \"KN\", \"KP\", \"KR\", \"KW\", \"KY\", \"KZ\", \"LA\", \"LB\", \"LC\", \"LI\", \"LK\", \"LR\", \"LS\", \"LT\", \"LU\", \"LV\", \"LY\", \"MA\", \"MC\", \"MD\", \"ME\", \"MF\", \"MG\", \"MH\", \"MK\", \"ML\", \"MM\", \"MN\", \"MO\", \"MP\", \"MQ\", \"MR\", \"MS\", \"MT\", \"MU\", \"MV\", \"MW\", \"MX\", \"MY\", \"MZ\", \"NA\", \"NC\", \"NE\", \"NF\", \"NG\", \"NI\", \"NL\", \"NO\", \"NP\", \"NR\", \"NU\", \"NZ\", \"OM\", \"PA\", \"PE\", \"PF\", \"PG\", \"PH\", \"PK\", \"PL\", \"PM\", \"PN\", \"PR\", \"PS\", \"PT\", \"PW\", \"PY\", \"QA\", \"RE\", \"RO\", \"RS\", \"RU\", \"RW\", \"SA\", \"SB\", \"SC\", \"SD\", \"SE\", \"SG\", \"SH\", \"SI\", \"SJ\", \"SK\", \"SL\", \"SM\", \"SN\", \"SO\", \"SR\", \"SS\", \"ST\", \"SV\", \"SX\", \"SY\", \"SZ\", \"TC\", \"TD\", \"TF\", \"TG\", \"TH\", \"TJ\", \"TK\", \"TL\", \"TM\", \"TN\", \"TO\", \"TR\", \"TT\", \"TV\", \"TW\", \"TZ\", \"UA\", \"UG\", \"UM\", \"US\", \"UY\", \"UZ\", \"VA\", \"VC\", \"VE\", \"VG\", \"VI\", \"VN\", \"VU\", \"WF\", \"WS\", \"YE\", \"YT\", \"YU\", \"ZA\", \"ZM\", \"ZW\"] \nFROZEN_ARRAY             = country_list.dup.freeze\nputs FROZEN_ARRAY.size\nFROZEN_ARRAY_AND_STRINGS = country_list.dup.map{|x| x.freeze}.freeze\nFROZEN_ARRAY_AND_SYMBOLS = country_list.dup.map{|x| x.to_sym}.freeze\ncomp_s                   = %w(AD AT BE CY EE FI FR DE ES GR IE IT LU LV MC ME MT NL PT SI SK SM VA)\ncomp_sym                 = %w(AD AT BE CY EE FI FR DE ES GR IE IT LU LV MC ME MT NL PT SI SK SM VA).map{|x| x.to_sym}\n\n\nBenchmark.bm do |x|\n  x.report(\"frozen string\"  )  { 10000.times {|i| c = (FROZEN_ARRAY_AND_STRINGS &amp; comp_s.dup) }}\n  x.report(\"unfrozen string\")  { 10000.times {|i| c = (FROZEN_ARRAY             &amp; comp_s.dup) }}\n  x.report(\"symbols\"        )  { 10000.times {|i| c = (FROZEN_ARRAY_AND_SYMBOLS &amp; comp_sym.dup) }}\nend\n\n\nBenchmark.bmbm do |x|\n  x.report(\"frozen string\"  )  { 10000.times {|i| c = (FROZEN_ARRAY_AND_STRINGS &amp; comp_s.dup) }}\n  x.report(\"unfrozen string\")  { 10000.times {|i| c = (FROZEN_ARRAY             &amp; comp_s.dup) }}\n  x.report(\"symbols\"        )  { 10000.times {|i| c = (FROZEN_ARRAY_AND_SYMBOLS &amp; comp_sym.dup) }}\nend\n</code></pre>\n\n<p>Result:</p>\n\n<pre><code>2.2.3 :001 &gt; require 'benchmark'\n =&gt; false \n2.2.3 :002 &gt; \n2.2.3 :003 &gt;   country_list             = [\"AD\", \"AE\", \"AF\", \"AG\", \"AI\", \"AL\", \"AM\", \"AN\", \"AO\", \"AQ\", \"AR\", \"AS\", \"AT\", \"AU\", \"AW\", \"AX\", \"AZ\", \"BA\", \"BB\", \"BD\", \"BE\", \"BF\", \"BG\", \"BH\", \"BI\", \"BJ\", \"BL\", \"BM\", \"BN\", \"BO\", \"BQ\", \"BR\", \"BS\", \"BT\", \"BV\", \"BW\", \"BY\", \"BZ\", \"CA\", \"CC\", \"CD\", \"CF\", \"CG\", \"CH\", \"CI\", \"CK\", \"CL\", \"CM\", \"CN\", \"CO\", \"CR\", \"CS\", \"CU\", \"CV\", \"CW\", \"CX\", \"CY\", \"CZ\", \"DE\", \"DJ\", \"DK\", \"DM\", \"DO\", \"DZ\", \"EC\", \"EE\", \"EG\", \"EH\", \"ER\", \"ES\", \"ET\", \"FI\", \"FJ\", \"FK\", \"FM\", \"FO\", \"FR\", \"GA\", \"GB\", \"GD\", \"GE\", \"GF\", \"GG\", \"GH\", \"GI\", \"GL\", \"GM\", \"GN\", \"GP\", \"GQ\", \"GR\", \"GS\", \"GT\", \"GU\", \"GW\", \"GY\", \"HK\", \"HM\", \"HN\", \"HR\", \"HT\", \"HU\", \"ID\", \"IE\", \"IL\", \"IM\", \"IN\", \"IO\", \"IQ\", \"IR\", \"IS\", \"IT\", \"JE\", \"JM\", \"JO\", \"JP\", \"KE\", \"KG\", \"KH\", \"KI\", \"KM\", \"KN\", \"KP\", \"KR\", \"KW\", \"KY\", \"KZ\", \"LA\", \"LB\", \"LC\", \"LI\", \"LK\", \"LR\", \"LS\", \"LT\", \"LU\", \"LV\", \"LY\", \"MA\", \"MC\", \"MD\", \"ME\", \"MF\", \"MG\", \"MH\", \"MK\", \"ML\", \"MM\", \"MN\", \"MO\", \"MP\", \"MQ\", \"MR\", \"MS\", \"MT\", \"MU\", \"MV\", \"MW\", \"MX\", \"MY\", \"MZ\", \"NA\", \"NC\", \"NE\", \"NF\", \"NG\", \"NI\", \"NL\", \"NO\", \"NP\", \"NR\", \"NU\", \"NZ\", \"OM\", \"PA\", \"PE\", \"PF\", \"PG\", \"PH\", \"PK\", \"PL\", \"PM\", \"PN\", \"PR\", \"PS\", \"PT\", \"PW\", \"PY\", \"QA\", \"RE\", \"RO\", \"RS\", \"RU\", \"RW\", \"SA\", \"SB\", \"SC\", \"SD\", \"SE\", \"SG\", \"SH\", \"SI\", \"SJ\", \"SK\", \"SL\", \"SM\", \"SN\", \"SO\", \"SR\", \"SS\", \"ST\", \"SV\", \"SX\", \"SY\", \"SZ\", \"TC\", \"TD\", \"TF\", \"TG\", \"TH\", \"TJ\", \"TK\", \"TL\", \"TM\", \"TN\", \"TO\", \"TR\", \"TT\", \"TV\", \"TW\", \"TZ\", \"UA\", \"UG\", \"UM\", \"US\", \"UY\", \"UZ\", \"VA\", \"VC\", \"VE\", \"VG\", \"VI\", \"VN\", \"VU\", \"WF\", \"WS\", \"YE\", \"YT\", \"YU\", \"ZA\", \"ZM\", \"ZW\"] \n =&gt; [\"AD\", \"AE\", \"AF\", \"AG\", \"AI\", \"AL\", \"AM\", \"AN\", \"AO\", \"AQ\", \"AR\", \"AS\", \"AT\", \"AU\", \"AW\", \"AX\", \"AZ\", \"BA\", \"BB\", \"BD\", \"BE\", \"BF\", \"BG\", \"BH\", \"BI\", \"BJ\", \"BL\", \"BM\", \"BN\", \"BO\", \"BQ\", \"BR\", \"BS\", \"BT\", \"BV\", \"BW\", \"BY\", \"BZ\", \"CA\", \"CC\", \"CD\", \"CF\", \"CG\", \"CH\", \"CI\", \"CK\", \"CL\", \"CM\", \"CN\", \"CO\", \"CR\", \"CS\", \"CU\", \"CV\", \"CW\", \"CX\", \"CY\", \"CZ\", \"DE\", \"DJ\", \"DK\", \"DM\", \"DO\", \"DZ\", \"EC\", \"EE\", \"EG\", \"EH\", \"ER\", \"ES\", \"ET\", \"FI\", \"FJ\", \"FK\", \"FM\", \"FO\", \"FR\", \"GA\", \"GB\", \"GD\", \"GE\", \"GF\", \"GG\", \"GH\", \"GI\", \"GL\", \"GM\", \"GN\", \"GP\", \"GQ\", \"GR\", \"GS\", \"GT\", \"GU\", \"GW\", \"GY\", \"HK\", \"HM\", \"HN\", \"HR\", \"HT\", \"HU\", \"ID\", \"IE\", \"IL\", \"IM\", \"IN\", \"IO\", \"IQ\", \"IR\", \"IS\", \"IT\", \"JE\", \"JM\", \"JO\", \"JP\", \"KE\", \"KG\", \"KH\", \"KI\", \"KM\", \"KN\", \"KP\", \"KR\", \"KW\", \"KY\", \"KZ\", \"LA\", \"LB\", \"LC\", \"LI\", \"LK\", \"LR\", \"LS\", \"LT\", \"LU\", \"LV\", \"LY\", \"MA\", \"MC\", \"MD\", \"ME\", \"MF\", \"MG\", \"MH\", \"MK\", \"ML\", \"MM\", \"MN\", \"MO\", \"MP\", \"MQ\", \"MR\", \"MS\", \"MT\", \"MU\", \"MV\", \"MW\", \"MX\", \"MY\", \"MZ\", \"NA\", \"NC\", \"NE\", \"NF\", \"NG\", \"NI\", \"NL\", \"NO\", \"NP\", \"NR\", \"NU\", \"NZ\", \"OM\", \"PA\", \"PE\", \"PF\", \"PG\", \"PH\", \"PK\", \"PL\", \"PM\", \"PN\", \"PR\", \"PS\", \"PT\", \"PW\", \"PY\", \"QA\", \"RE\", \"RO\", \"RS\", \"RU\", \"RW\", \"SA\", \"SB\", \"SC\", \"SD\", \"SE\", \"SG\", \"SH\", \"SI\", \"SJ\", \"SK\", \"SL\", \"SM\", \"SN\", \"SO\", \"SR\", \"SS\", \"ST\", \"SV\", \"SX\", \"SY\", \"SZ\", \"TC\", \"TD\", \"TF\", \"TG\", \"TH\", \"TJ\", \"TK\", \"TL\", \"TM\", \"TN\", \"TO\", \"TR\", \"TT\", \"TV\", \"TW\", \"TZ\", \"UA\", \"UG\", \"UM\", \"US\", \"UY\", \"UZ\", \"VA\", \"VC\", \"VE\", \"VG\", \"VI\", \"VN\", \"VU\", \"WF\", \"WS\", \"YE\", \"YT\", \"YU\", \"ZA\", \"ZM\", \"ZW\"] \n2.2.3 :004 &gt; FROZEN_ARRAY             = country_list.dup.freeze\n =&gt; [\"AD\", \"AE\", \"AF\", \"AG\", \"AI\", \"AL\", \"AM\", \"AN\", \"AO\", \"AQ\", \"AR\", \"AS\", \"AT\", \"AU\", \"AW\", \"AX\", \"AZ\", \"BA\", \"BB\", \"BD\", \"BE\", \"BF\", \"BG\", \"BH\", \"BI\", \"BJ\", \"BL\", \"BM\", \"BN\", \"BO\", \"BQ\", \"BR\", \"BS\", \"BT\", \"BV\", \"BW\", \"BY\", \"BZ\", \"CA\", \"CC\", \"CD\", \"CF\", \"CG\", \"CH\", \"CI\", \"CK\", \"CL\", \"CM\", \"CN\", \"CO\", \"CR\", \"CS\", \"CU\", \"CV\", \"CW\", \"CX\", \"CY\", \"CZ\", \"DE\", \"DJ\", \"DK\", \"DM\", \"DO\", \"DZ\", \"EC\", \"EE\", \"EG\", \"EH\", \"ER\", \"ES\", \"ET\", \"FI\", \"FJ\", \"FK\", \"FM\", \"FO\", \"FR\", \"GA\", \"GB\", \"GD\", \"GE\", \"GF\", \"GG\", \"GH\", \"GI\", \"GL\", \"GM\", \"GN\", \"GP\", \"GQ\", \"GR\", \"GS\", \"GT\", \"GU\", \"GW\", \"GY\", \"HK\", \"HM\", \"HN\", \"HR\", \"HT\", \"HU\", \"ID\", \"IE\", \"IL\", \"IM\", \"IN\", \"IO\", \"IQ\", \"IR\", \"IS\", \"IT\", \"JE\", \"JM\", \"JO\", \"JP\", \"KE\", \"KG\", \"KH\", \"KI\", \"KM\", \"KN\", \"KP\", \"KR\", \"KW\", \"KY\", \"KZ\", \"LA\", \"LB\", \"LC\", \"LI\", \"LK\", \"LR\", \"LS\", \"LT\", \"LU\", \"LV\", \"LY\", \"MA\", \"MC\", \"MD\", \"ME\", \"MF\", \"MG\", \"MH\", \"MK\", \"ML\", \"MM\", \"MN\", \"MO\", \"MP\", \"MQ\", \"MR\", \"MS\", \"MT\", \"MU\", \"MV\", \"MW\", \"MX\", \"MY\", \"MZ\", \"NA\", \"NC\", \"NE\", \"NF\", \"NG\", \"NI\", \"NL\", \"NO\", \"NP\", \"NR\", \"NU\", \"NZ\", \"OM\", \"PA\", \"PE\", \"PF\", \"PG\", \"PH\", \"PK\", \"PL\", \"PM\", \"PN\", \"PR\", \"PS\", \"PT\", \"PW\", \"PY\", \"QA\", \"RE\", \"RO\", \"RS\", \"RU\", \"RW\", \"SA\", \"SB\", \"SC\", \"SD\", \"SE\", \"SG\", \"SH\", \"SI\", \"SJ\", \"SK\", \"SL\", \"SM\", \"SN\", \"SO\", \"SR\", \"SS\", \"ST\", \"SV\", \"SX\", \"SY\", \"SZ\", \"TC\", \"TD\", \"TF\", \"TG\", \"TH\", \"TJ\", \"TK\", \"TL\", \"TM\", \"TN\", \"TO\", \"TR\", \"TT\", \"TV\", \"TW\", \"TZ\", \"UA\", \"UG\", \"UM\", \"US\", \"UY\", \"UZ\", \"VA\", \"VC\", \"VE\", \"VG\", \"VI\", \"VN\", \"VU\", \"WF\", \"WS\", \"YE\", \"YT\", \"YU\", \"ZA\", \"ZM\", \"ZW\"] \n2.2.3 :005 &gt; puts FROZEN_ARRAY.size\n252\n =&gt; nil \n2.2.3 :006 &gt; FROZEN_ARRAY_AND_STRINGS = country_list.dup.map{|x| x.freeze}.freeze\n =&gt; [\"AD\", \"AE\", \"AF\", \"AG\", \"AI\", \"AL\", \"AM\", \"AN\", \"AO\", \"AQ\", \"AR\", \"AS\", \"AT\", \"AU\", \"AW\", \"AX\", \"AZ\", \"BA\", \"BB\", \"BD\", \"BE\", \"BF\", \"BG\", \"BH\", \"BI\", \"BJ\", \"BL\", \"BM\", \"BN\", \"BO\", \"BQ\", \"BR\", \"BS\", \"BT\", \"BV\", \"BW\", \"BY\", \"BZ\", \"CA\", \"CC\", \"CD\", \"CF\", \"CG\", \"CH\", \"CI\", \"CK\", \"CL\", \"CM\", \"CN\", \"CO\", \"CR\", \"CS\", \"CU\", \"CV\", \"CW\", \"CX\", \"CY\", \"CZ\", \"DE\", \"DJ\", \"DK\", \"DM\", \"DO\", \"DZ\", \"EC\", \"EE\", \"EG\", \"EH\", \"ER\", \"ES\", \"ET\", \"FI\", \"FJ\", \"FK\", \"FM\", \"FO\", \"FR\", \"GA\", \"GB\", \"GD\", \"GE\", \"GF\", \"GG\", \"GH\", \"GI\", \"GL\", \"GM\", \"GN\", \"GP\", \"GQ\", \"GR\", \"GS\", \"GT\", \"GU\", \"GW\", \"GY\", \"HK\", \"HM\", \"HN\", \"HR\", \"HT\", \"HU\", \"ID\", \"IE\", \"IL\", \"IM\", \"IN\", \"IO\", \"IQ\", \"IR\", \"IS\", \"IT\", \"JE\", \"JM\", \"JO\", \"JP\", \"KE\", \"KG\", \"KH\", \"KI\", \"KM\", \"KN\", \"KP\", \"KR\", \"KW\", \"KY\", \"KZ\", \"LA\", \"LB\", \"LC\", \"LI\", \"LK\", \"LR\", \"LS\", \"LT\", \"LU\", \"LV\", \"LY\", \"MA\", \"MC\", \"MD\", \"ME\", \"MF\", \"MG\", \"MH\", \"MK\", \"ML\", \"MM\", \"MN\", \"MO\", \"MP\", \"MQ\", \"MR\", \"MS\", \"MT\", \"MU\", \"MV\", \"MW\", \"MX\", \"MY\", \"MZ\", \"NA\", \"NC\", \"NE\", \"NF\", \"NG\", \"NI\", \"NL\", \"NO\", \"NP\", \"NR\", \"NU\", \"NZ\", \"OM\", \"PA\", \"PE\", \"PF\", \"PG\", \"PH\", \"PK\", \"PL\", \"PM\", \"PN\", \"PR\", \"PS\", \"PT\", \"PW\", \"PY\", \"QA\", \"RE\", \"RO\", \"RS\", \"RU\", \"RW\", \"SA\", \"SB\", \"SC\", \"SD\", \"SE\", \"SG\", \"SH\", \"SI\", \"SJ\", \"SK\", \"SL\", \"SM\", \"SN\", \"SO\", \"SR\", \"SS\", \"ST\", \"SV\", \"SX\", \"SY\", \"SZ\", \"TC\", \"TD\", \"TF\", \"TG\", \"TH\", \"TJ\", \"TK\", \"TL\", \"TM\", \"TN\", \"TO\", \"TR\", \"TT\", \"TV\", \"TW\", \"TZ\", \"UA\", \"UG\", \"UM\", \"US\", \"UY\", \"UZ\", \"VA\", \"VC\", \"VE\", \"VG\", \"VI\", \"VN\", \"VU\", \"WF\", \"WS\", \"YE\", \"YT\", \"YU\", \"ZA\", \"ZM\", \"ZW\"] \n2.2.3 :007 &gt; FROZEN_ARRAY_AND_SYMBOLS = country_list.dup.map{|x| x.to_sym}.freeze\n =&gt; [:AD, :AE, :AF, :AG, :AI, :AL, :AM, :AN, :AO, :AQ, :AR, :AS, :AT, :AU, :AW, :AX, :AZ, :BA, :BB, :BD, :BE, :BF, :BG, :BH, :BI, :BJ, :BL, :BM, :BN, :BO, :BQ, :BR, :BS, :BT, :BV, :BW, :BY, :BZ, :CA, :CC, :CD, :CF, :CG, :CH, :CI, :CK, :CL, :CM, :CN, :CO, :CR, :CS, :CU, :CV, :CW, :CX, :CY, :CZ, :DE, :DJ, :DK, :DM, :DO, :DZ, :EC, :EE, :EG, :EH, :ER, :ES, :ET, :FI, :FJ, :FK, :FM, :FO, :FR, :GA, :GB, :GD, :GE, :GF, :GG, :GH, :GI, :GL, :GM, :GN, :GP, :GQ, :GR, :GS, :GT, :GU, :GW, :GY, :HK, :HM, :HN, :HR, :HT, :HU, :ID, :IE, :IL, :IM, :IN, :IO, :IQ, :IR, :IS, :IT, :JE, :JM, :JO, :JP, :KE, :KG, :KH, :KI, :KM, :KN, :KP, :KR, :KW, :KY, :KZ, :LA, :LB, :LC, :LI, :LK, :LR, :LS, :LT, :LU, :LV, :LY, :MA, :MC, :MD, :ME, :MF, :MG, :MH, :MK, :ML, :MM, :MN, :MO, :MP, :MQ, :MR, :MS, :MT, :MU, :MV, :MW, :MX, :MY, :MZ, :NA, :NC, :NE, :NF, :NG, :NI, :NL, :NO, :NP, :NR, :NU, :NZ, :OM, :PA, :PE, :PF, :PG, :PH, :PK, :PL, :PM, :PN, :PR, :PS, :PT, :PW, :PY, :QA, :RE, :RO, :RS, :RU, :RW, :SA, :SB, :SC, :SD, :SE, :SG, :SH, :SI, :SJ, :SK, :SL, :SM, :SN, :SO, :SR, :SS, :ST, :SV, :SX, :SY, :SZ, :TC, :TD, :TF, :TG, :TH, :TJ, :TK, :TL, :TM, :TN, :TO, :TR, :TT, :TV, :TW, :TZ, :UA, :UG, :UM, :US, :UY, :UZ, :VA, :VC, :VE, :VG, :VI, :VN, :VU, :WF, :WS, :YE, :YT, :YU, :ZA, :ZM, :ZW] \n2.2.3 :008 &gt; comp_s                   = %w(AD AT BE CY EE FI FR DE ES GR IE IT LU LV MC ME MT NL PT SI SK SM VA)\n =&gt; [\"AD\", \"AT\", \"BE\", \"CY\", \"EE\", \"FI\", \"FR\", \"DE\", \"ES\", \"GR\", \"IE\", \"IT\", \"LU\", \"LV\", \"MC\", \"ME\", \"MT\", \"NL\", \"PT\", \"SI\", \"SK\", \"SM\", \"VA\"] \n2.2.3 :009 &gt; comp_sym                 = %w(AD AT BE CY EE FI FR DE ES GR IE IT LU LV MC ME MT NL PT SI SK SM VA).map{|x| x.to_sym}\n =&gt; [:AD, :AT, :BE, :CY, :EE, :FI, :FR, :DE, :ES, :GR, :IE, :IT, :LU, :LV, :MC, :ME, :MT, :NL, :PT, :SI, :SK, :SM, :VA] \n2.2.3 :010 &gt; \n2.2.3 :011 &gt;   \n2.2.3 :012 &gt;   Benchmark.bm do |x|\n2.2.3 :013 &gt;       x.report(\"frozen string\"  )  { 10000.times {|i| c = (FROZEN_ARRAY_AND_STRINGS &amp; comp_s.dup) }}\n2.2.3 :014?&gt;     x.report(\"unfrozen string\")  { 10000.times {|i| c = (FROZEN_ARRAY             &amp; comp_s.dup) }}\n2.2.3 :015?&gt;     x.report(\"symbols\"        )  { 10000.times {|i| c = (FROZEN_ARRAY_AND_SYMBOLS &amp; comp_sym.dup) }}\n2.2.3 :016?&gt;   end\n       user     system      total        real\nfrozen string  0.190000   0.000000   0.190000 (  0.194141)\nunfrozen string  0.170000   0.010000   0.180000 (  0.174675)\nsymbols  0.080000   0.000000   0.080000 (  0.081507)\n =&gt; [#&lt;Benchmark::Tms:0x007f810c3aca70 @label=\"frozen string\", @real=0.1941408810671419, @cstime=0.0, @cutime=0.0, @stime=0.0, @utime=0.1899999999999995, @total=0.1899999999999995&gt;, #&lt;Benchmark::Tms:0x007f810c82b538 @label=\"unfrozen string\", @real=0.1746752569451928, @cstime=0.0, @cutime=0.0, @stime=0.010000000000000009, @utime=0.16999999999999993, @total=0.17999999999999994&gt;, #&lt;Benchmark::Tms:0x007f810af2cfa0 @label=\"symbols\", @real=0.08150708093307912, @cstime=0.0, @cutime=0.0, @stime=0.0, @utime=0.08000000000000007, @total=0.08000000000000007&gt;] \n2.2.3 :017 &gt; \n2.2.3 :018 &gt;   \n2.2.3 :019 &gt;   Benchmark.bmbm do |x|\n2.2.3 :020 &gt;       x.report(\"frozen string\"  )  { 10000.times {|i| c = (FROZEN_ARRAY_AND_STRINGS &amp; comp_s.dup) }}\n2.2.3 :021?&gt;     x.report(\"unfrozen string\")  { 10000.times {|i| c = (FROZEN_ARRAY             &amp; comp_s.dup) }}\n2.2.3 :022?&gt;     x.report(\"symbols\"        )  { 10000.times {|i| c = (FROZEN_ARRAY_AND_SYMBOLS &amp; comp_sym.dup) }}\n2.2.3 :023?&gt;   end\nRehearsal ---------------------------------------------------\nfrozen string     0.180000   0.000000   0.180000 (  0.183846)\nunfrozen string   0.200000   0.000000   0.200000 (  0.196311)\nsymbols           0.080000   0.000000   0.080000 (  0.082794)\n------------------------------------------ total: 0.460000sec\n\n                      user     system      total        real\nfrozen string     0.160000   0.000000   0.160000 (  0.167051)\nunfrozen string   0.170000   0.000000   0.170000 (  0.171601)\nsymbols           0.080000   0.000000   0.080000 (  0.078746)\n =&gt; [#&lt;Benchmark::Tms:0x007f811022a388 @label=\"frozen string\", @real=0.1670510449912399, @cstime=0.0, @cutime=0.0, @stime=0.0, @utime=0.16000000000000014, @total=0.16000000000000014&gt;, #&lt;Benchmark::Tms:0x007f811022a4c8 @label=\"unfrozen string\", @real=0.17160122003406286, @cstime=0.0, @cutime=0.0, @stime=0.0, @utime=0.16999999999999993, @total=0.16999999999999993&gt;, #&lt;Benchmark::Tms:0x007f8108eb1c58 @label=\"symbols\", @real=0.07874645793344826, @cstime=0.0, @cutime=0.0, @stime=0.0, @utime=0.08000000000000007, @total=0.08000000000000007&gt;] \n2.2.3 :024 &gt; \n2.2.3 :025 &gt;   \n2.2.3 :026 &gt;   \n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "rubygems", "uploader"], "comments": [{"owner": {"reputation": 643, "user_id": 2998767, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4e993494baba34ad6da79a07cdedfe3c?s=128&d=identicon&r=PG", "display_name": "Oliver Zeyen", "link": "https://stackoverflow.com/users/2998767/oliver-zeyen"}, "edited": false, "score": 0, "creation_date": 1447841624, "post_id": 33777053, "comment_id": 55320952, "body": "Is there a particular reason why you pin most of your gems to fixed versions?"}, {"owner": {"reputation": 539, "user_id": 5545463, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/DLDIb.jpg?s=128&g=1", "display_name": "Victoria S.", "link": "https://stackoverflow.com/users/5545463/victoria-s"}, "reply_to_user": {"reputation": 643, "user_id": 2998767, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4e993494baba34ad6da79a07cdedfe3c?s=128&d=identicon&r=PG", "display_name": "Oliver Zeyen", "link": "https://stackoverflow.com/users/2998767/oliver-zeyen"}, "edited": false, "score": 0, "creation_date": 1447841782, "post_id": 33777053, "comment_id": 55321072, "body": "Besides following the tutorial exactly? Not really. I was trying to avoid errors because of versions"}], "answers": [{"comments": [{"owner": {"reputation": 539, "user_id": 5545463, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/DLDIb.jpg?s=128&g=1", "display_name": "Victoria S.", "link": "https://stackoverflow.com/users/5545463/victoria-s"}, "edited": false, "score": 0, "creation_date": 1447841653, "post_id": 33777188, "comment_id": 55320976, "body": "I can&#39;t believe th&#224;t was the problem. Thanks a million!"}], "tags": [], "owner": {"reputation": 643, "user_id": 2998767, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4e993494baba34ad6da79a07cdedfe3c?s=128&d=identicon&r=PG", "display_name": "Oliver Zeyen", "link": "https://stackoverflow.com/users/2998767/oliver-zeyen"}, "is_accepted": true, "score": 2, "last_activity_date": 1447841528, "creation_date": 1447841528, "answer_id": 33777188, "question_id": 33777053, "link": "https://stackoverflow.com/questions/33777053/cannot-generate-uploader-picture-on-rails-web-app/33777188#33777188", "title": "Cannot generate uploader Picture on rails web app", "body": "<p>Add this line to your Gemfile and <code>bundle install</code>again:</p>\n\n<pre><code>gem 'net-ssh'\n</code></pre>\n"}], "owner": {"reputation": 539, "user_id": 5545463, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/DLDIb.jpg?s=128&g=1", "display_name": "Victoria S.", "link": "https://stackoverflow.com/users/5545463/victoria-s"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 537, "favorite_count": 0, "accepted_answer_id": 33777188, "answer_count": 1, "score": 0, "last_activity_date": 1447841528, "creation_date": 1447841181, "question_id": 33777053, "link": "https://stackoverflow.com/questions/33777053/cannot-generate-uploader-picture-on-rails-web-app", "title": "Cannot generate uploader Picture on rails web app", "body": "<p>I'm following the railstutorial by michael hartl and got stuck in Chapter 11, where he implements the uploading of images. After updating my gemfile to</p>\n\n<pre><code>source 'https://rubygems.org'\n\ngem 'rails', '4.2.4'\ngem 'sqlite3'\ngem 'sass-rails', '5.0.2'\ngem 'uglifier', '2.5.3'\ngem 'coffee-rails', '~&gt; 4.1.0'\ngem 'bootstrap-sass', '3.2.0.0'\ngem 'bcrypt', '3.1.7'\ngem 'faker', '1.4.2'\ngem 'carrierwave',             '0.10.0'\ngem 'mini_magick',             '3.8.0'\ngem 'fog',                     '1.26.0'\ngem 'will_paginate', '3.0.7'\ngem 'bootstrap-will_paginate', '0.0.10'\ngem 'jquery-rails', '4.0.3'\ngem 'turbolinks', '2.3.0'\ngem 'jbuilder', '~&gt; 2.2.3'\ngem 'sdoc', '~&gt; 0.4.0', group: :doc\n\ngroup :development, :test do\n  gem 'byebug', '3.4.0'\nend\n\ngroup :development do\n  gem 'web-console', '~&gt; 2.0'\n  gem 'spring'\nend\n\ngroup :test do\n    gem 'minitest-reporters', '1.0.5'\n    gem 'mini_backtrace',     '0.1.3'\n  gem 'guard-minitest',     '2.3.1'\nend\n</code></pre>\n\n<p>I ran bundle and the gems installed without trouble. But when I try to run</p>\n\n<pre><code>rails generate uploader Picture\n</code></pre>\n\n<p>I get the following message:</p>\n\n<pre><code>/home/user/.rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/fog-1.26.0/lib/fog/joyent/compute.rb:3:in `require': cannot load such file -- net/ssh (LoadError)\nfrom /home/user/.rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/fog-1.26.0/lib/fog/joyent/compute.rb:3:in `&lt;top (required)&gt;'\nfrom /home/user/.rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/fog-1.26.0/lib/fog/joyent.rb:1:in `require'\nfrom /home/user/.rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/fog-1.26.0/lib/fog/joyent.rb:1:in `&lt;top (required)&gt;'\nfrom /home/user/.rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/fog-1.26.0/lib/fog.rb:41:in `require'\nfrom /home/user/.rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/fog-1.26.0/lib/fog.rb:41:in `&lt;top (required)&gt;'\nfrom /home/user/.rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/carrierwave-0.10.0/lib/carrierwave/storage/fog.rb:3:in `require'\nfrom /home/user/.rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/carrierwave-0.10.0/lib/carrierwave/storage/fog.rb:3:in `&lt;top (required)&gt;'\nfrom /home/user/.rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/carrierwave-0.10.0/lib/carrierwave/storage.rb:9:in `require'\nfrom /home/user/.rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/carrierwave-0.10.0/lib/carrierwave/storage.rb:9:in `&lt;top (required)&gt;'\nfrom /home/user/.rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/carrierwave-0.10.0/lib/carrierwave.rb:78:in `require'\nfrom /home/user/.rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/carrierwave-0.10.0/lib/carrierwave.rb:78:in `&lt;top (required)&gt;'\nuser@ubuntuServer:/media/sf_ubuntu/hello_world$    from /home/user/.rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/bundler-1.10.6/lib/bundler/runtime.rb:76:in `require'\nfrom /home/user/.rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/bundler-1.10.6/lib/bundler/runtime.rb:76:in `block (2 levels) in require'\nfrom /home/user/.rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/bundler-1.10.6/lib/bundler/runtime.rb:72:in `each'\nfrom /home/user/.rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/bundler-1.10.6/lib/bundler/runtime.rb:72:in `block in require'\nfrom /home/user/.rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/bundler-1.10.6/lib/bundler/runtime.rb:61:in `each'\nfrom /home/user/.rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/bundler-1.10.6/lib/bundler/runtime.rb:61:in `require'\n</code></pre>\n\n<p>So far I've tried changing the versions of the gems, and running a bundle update, but with no effect. I've even tried rolling back my app using git to try again, with no effect.</p>\n\n<p>Anyone here have an idea what's going on and how to fix it?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-3", "rubygems"], "comments": [{"owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "edited": false, "score": 0, "creation_date": 1447841755, "post_id": 33776909, "comment_id": 55321048, "body": "You had a problem, but solved it with the suggested solution. Great. But you had another problem before? Do you still have it? I cannot follow. What is your actual question? What problem do you face right now?"}, {"owner": {"reputation": 3573, "user_id": 3265282, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/Q8zRa.png?s=128&g=1", "display_name": "nemo_87", "link": "https://stackoverflow.com/users/3265282/nemo-87"}, "reply_to_user": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "edited": false, "score": 0, "creation_date": 1447842050, "post_id": 33776909, "comment_id": 55321261, "body": "@spickermann The problem is not founding rails gem when I run &#39;rails server&#39; command."}, {"owner": {"reputation": 377, "user_id": 2563577, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/m4S4U.jpg?s=128&g=1", "display_name": "SaravanaKumAr", "link": "https://stackoverflow.com/users/2563577/saravanakumar"}, "edited": false, "score": 0, "creation_date": 1447842118, "post_id": 33776909, "comment_id": 55321323, "body": "Can you post your gem file and bundle install errors?"}, {"owner": {"reputation": 3573, "user_id": 3265282, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/Q8zRa.png?s=128&g=1", "display_name": "nemo_87", "link": "https://stackoverflow.com/users/3265282/nemo-87"}, "reply_to_user": {"reputation": 377, "user_id": 2563577, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/m4S4U.jpg?s=128&g=1", "display_name": "SaravanaKumAr", "link": "https://stackoverflow.com/users/2563577/saravanakumar"}, "edited": false, "score": 0, "creation_date": 1447842170, "post_id": 33776909, "comment_id": 55321360, "body": "@SaravanaKumAr Sure, I will edit my post right away."}], "answers": [{"comments": [{"owner": {"reputation": 3573, "user_id": 3265282, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/Q8zRa.png?s=128&g=1", "display_name": "nemo_87", "link": "https://stackoverflow.com/users/3265282/nemo-87"}, "edited": false, "score": 0, "creation_date": 1447844044, "post_id": 33777866, "comment_id": 55322681, "body": "I&#39;ve tried with gem install build-essentials... But I guess that is not command for Windows that suits the one you provide for Unix. I got this:  C:\\Users\\n.mosorinski\\Rails\\apps\\MyBlog&gt;gem install build-essential ERROR:  Could not find a valid gem &#39;build-essential&#39; (&gt;= 0) in any repository ERROR:  Possible alternatives: knife-essentials, build_eval, essentials, spree_e ssentials"}, {"owner": {"reputation": 377, "user_id": 2563577, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/m4S4U.jpg?s=128&g=1", "display_name": "SaravanaKumAr", "link": "https://stackoverflow.com/users/2563577/saravanakumar"}, "reply_to_user": {"reputation": 3573, "user_id": 3265282, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/Q8zRa.png?s=128&g=1", "display_name": "nemo_87", "link": "https://stackoverflow.com/users/3265282/nemo-87"}, "edited": false, "score": 0, "creation_date": 1447844112, "post_id": 33777866, "comment_id": 55322720, "body": "I have mentioned that in the answer itself"}, {"owner": {"reputation": 377, "user_id": 2563577, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/m4S4U.jpg?s=128&g=1", "display_name": "SaravanaKumAr", "link": "https://stackoverflow.com/users/2563577/saravanakumar"}, "reply_to_user": {"reputation": 3573, "user_id": 3265282, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/Q8zRa.png?s=128&g=1", "display_name": "nemo_87", "link": "https://stackoverflow.com/users/3265282/nemo-87"}, "edited": false, "score": 0, "creation_date": 1447844728, "post_id": 33777866, "comment_id": 55323187, "body": "Can you check this one <a href=\"http://stackoverflow.com/questions/33084811/error-in-installing-json-gem-for-ruby-in-windows\" title=\"error in installing json gem for ruby in windows\">stackoverflow.com/questions/33084811/&hellip;</a>"}], "tags": [], "owner": {"reputation": 377, "user_id": 2563577, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/m4S4U.jpg?s=128&g=1", "display_name": "SaravanaKumAr", "link": "https://stackoverflow.com/users/2563577/saravanakumar"}, "is_accepted": false, "score": 0, "last_activity_date": 1447843635, "last_edit_date": 1447843635, "creation_date": 1447843311, "answer_id": 33777866, "question_id": 33776909, "link": "https://stackoverflow.com/questions/33776909/could-not-find-gem-rails-4-2-5-x86-mingw32-when-running-rails-server/33777866#33777866", "title": "Could not find gem &#39;rails (= 4.2.5) x86-mingw32&#39; when running rails server", "body": "<p>Try to install the following packages to succeed bundle install</p>\n\n<pre><code>sudo apt-get install build-essential\nsudo apt-get install libgmp3-dev\n</code></pre>\n\n<p>These packages are for Linux environment. Find the alternatives for other environments. Let me know if you got any error.</p>\n"}, {"tags": [], "owner": {"reputation": 161, "user_id": 5761320, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/336158bbe1424f260df64158a83557da?s=128&d=identicon&r=PG&f=1", "display_name": "Sameer Khader", "link": "https://stackoverflow.com/users/5761320/sameer-khader"}, "is_accepted": false, "score": 0, "last_activity_date": 1462260204, "last_edit_date": 1462260204, "creation_date": 1462179913, "answer_id": 36978744, "question_id": 33776909, "link": "https://stackoverflow.com/questions/33776909/could-not-find-gem-rails-4-2-5-x86-mingw32-when-running-rails-server/36978744#36978744", "title": "Could not find gem &#39;rails (= 4.2.5) x86-mingw32&#39; when running rails server", "body": "<p>open file Gemfile.lock, find and delete \"x64-mingw32\" then run the command:-</p>\n\n<p>$bundle install</p>\n"}, {"tags": [], "owner": {"reputation": 41, "user_id": 10006908, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/di7UH.jpg?s=128&g=1", "display_name": "Fizban", "link": "https://stackoverflow.com/users/10006908/fizban"}, "is_accepted": false, "score": 0, "last_activity_date": 1605284745, "last_edit_date": 1605284745, "creation_date": 1605283829, "answer_id": 64824218, "question_id": 33776909, "link": "https://stackoverflow.com/questions/33776909/could-not-find-gem-rails-4-2-5-x86-mingw32-when-running-rails-server/64824218#64824218", "title": "Could not find gem &#39;rails (= 4.2.5) x86-mingw32&#39; when running rails server", "body": "<p>Late answer but this happened to me just now.\nWhat worked for me was figuring out I accidently installed an older Ruby version.</p>\n<p>In your last screenshot you received a line:</p>\n<p><code>Make sure that `gem install json -v '1.8.3'` succeeds before bundling</code></p>\n<p>This command probably failed due to an older Ruby version, get the latest version here (Assuming you're a windows user) <a href=\"https://rubyinstaller.org/downloads/\" rel=\"nofollow noreferrer\">https://rubyinstaller.org/downloads/</a></p>\n<p>P.S</p>\n<p>Make sure you remove any previous Ruby / Rails installations.\nWhat you need is a &quot;With DEVKIT&quot; installer, preferably the one they recommend on (starts with &quot;=&gt;&quot;).</p>\n"}], "owner": {"reputation": 3573, "user_id": 3265282, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/Q8zRa.png?s=128&g=1", "display_name": "nemo_87", "link": "https://stackoverflow.com/users/3265282/nemo-87"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 11474, "favorite_count": 0, "answer_count": 3, "score": 2, "last_activity_date": 1618405043, "creation_date": 1447840816, "last_edit_date": 1488110414, "question_id": 33776909, "link": "https://stackoverflow.com/questions/33776909/could-not-find-gem-rails-4-2-5-x86-mingw32-when-running-rails-server", "title": "Could not find gem &#39;rails (= 4.2.5) x86-mingw32&#39; when running rails server", "body": "<p>I'm trying to learn Ruby on Rails.\nCurrently been trying out Rails framework. I've installed it. Create new project in MyBlog folder, but when I try to run:</p>\n\n<pre><code>rails server\n</code></pre>\n\n<p>I get back an error:</p>\n\n<pre><code>Could not find gem 'rails (= 4.2.5) x86-mingw32' in any of the gem sources listed in your Gemfile or available on this machine. Run `bundle install` to install missing gems.\n</code></pre>\n\n<p>I've installed bundle as suggested. Had few problems with installing it as well, but I've found a soultion on the internet.</p>\n\n<p>Before bundle install I was getting another error saying that it could not find gem 'sqlite3'</p>\n\n<p><a href=\"https://i.stack.imgur.com/BKWnl.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/BKWnl.png\" alt=\"enter image description here\"></a></p>\n\n<p>Did someone had similar problem? Can you help me with solving it?</p>\n\n<p>Update:</p>\n\n<p>Content of my Gemfile is:</p>\n\n<pre><code>source 'https://rubygems.org'\n\n\n# Bundle edge Rails instead: gem 'rails', github: 'rails/rails'\ngem 'rails', '4.2.5'\n# Use sqlite3 as the database for Active Record\ngem 'sqlite3'\n# Use SCSS for stylesheets\ngem 'sass-rails', '~&gt; 5.0'\n# Use Uglifier as compressor for JavaScript assets\ngem 'uglifier', '&gt;= 1.3.0'\n# Use CoffeeScript for .coffee assets and views\ngem 'coffee-rails', '~&gt; 4.1.0'\n# See https://github.com/rails/execjs#readme for more supported runtimes\n# gem 'therubyracer', platforms: :ruby\n\n# Use jquery as the JavaScript library\ngem 'jquery-rails'\n# Turbolinks makes following links in your web application faster. Read more: https://github.com/rails/turbolinks\ngem 'turbolinks'\n# Build JSON APIs with ease. Read more: https://github.com/rails/jbuilder\ngem 'jbuilder', '~&gt; 2.0'\n# bundle exec rake doc:rails generates the API under doc/api.\ngem 'sdoc', '~&gt; 0.4.0', group: :doc\n\n# Use ActiveModel has_secure_password\n# gem 'bcrypt', '~&gt; 3.1.7'\n\n# Use Unicorn as the app server\n# gem 'unicorn'\n\n# Use Capistrano for deployment\n# gem 'capistrano-rails', group: :development\n\ngroup :development, :test do\n  # Call 'byebug' anywhere in the code to stop execution and get a debugger console\n  gem 'byebug'\nend\n\ngroup :development do\n  # Access an IRB console on exception pages or by using &lt;%= console %&gt; in views\n  gem 'web-console', '~&gt; 2.0'\nend\n\n# Windows does not include zoneinfo files, so bundle the tzinfo-data gem\ngem 'tzinfo-data', platforms: [:mingw, :mswin, :x64_mingw, :jruby]\n</code></pre>\n\n<p>Errors when try to run 'bundle install':</p>\n\n<p><a href=\"https://i.stack.imgur.com/dKxa1.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/dKxa1.png\" alt=\"enter image description here\"></a>\n<a href=\"https://i.stack.imgur.com/Ncbxu.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Ncbxu.png\" alt=\"enter image description here\"></a></p>\n"}, {"tags": ["ruby-on-rails", "ruby", "api", "curl", "httparty"], "comments": [{"owner": {"reputation": 1077, "user_id": 4269239, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/jTw9F.jpg?s=128&g=1", "display_name": "Sachin Gevariya", "link": "https://stackoverflow.com/users/4269239/sachin-gevariya"}, "edited": false, "score": 1, "creation_date": 1447842466, "post_id": 33776154, "comment_id": 55321572, "body": "You can try Restclient(<a href=\"https://github.com/rest-client/rest-client\" rel=\"nofollow noreferrer\">github.com/rest-client/rest-client</a>) gem to achieve this goal. It is good for you as well."}], "answers": [{"comments": [{"owner": {"reputation": 7898, "user_id": 3437900, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/blKgR.jpg?s=128&g=1", "display_name": "illusionist", "link": "https://stackoverflow.com/users/3437900/illusionist"}, "edited": false, "score": 0, "creation_date": 1447851488, "post_id": 33777876, "comment_id": 55327664, "body": "but looks like he needs to send <code>APIKEY</code> rather than <code>uname</code> and <code>password</code>.. can you address that as well?"}, {"owner": {"reputation": 643, "user_id": 2998767, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4e993494baba34ad6da79a07cdedfe3c?s=128&d=identicon&r=PG", "display_name": "Oliver Zeyen", "link": "https://stackoverflow.com/users/2998767/oliver-zeyen"}, "reply_to_user": {"reputation": 7898, "user_id": 3437900, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/blKgR.jpg?s=128&g=1", "display_name": "illusionist", "link": "https://stackoverflow.com/users/3437900/illusionist"}, "edited": false, "score": 0, "creation_date": 1447853206, "post_id": 33777876, "comment_id": 55328894, "body": "Sure. I added a more explicit example to my answer."}], "tags": [], "owner": {"reputation": 643, "user_id": 2998767, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4e993494baba34ad6da79a07cdedfe3c?s=128&d=identicon&r=PG", "display_name": "Oliver Zeyen", "link": "https://stackoverflow.com/users/2998767/oliver-zeyen"}, "is_accepted": false, "score": 2, "last_activity_date": 1447853785, "last_edit_date": 1447853785, "creation_date": 1447843341, "answer_id": 33777876, "question_id": 33776154, "link": "https://stackoverflow.com/questions/33776154/httparty-post-record-using-with-u-flag/33777876#33777876", "title": "HTTParty post record using with -u flag", "body": "<p>A solution could look a bit like this, where the <code>basic_auth</code>argument stands for  the <code>curl -u</code>part. Since you are only passing the api_key, the follwoing should do the trick. It's looking weird but it is the way to go:</p>\n\n<pre><code>class MyRequest\n   include HTTParty\n   base_uri 'https://testdomain.org/api/v1'\n\n   def self.execute(query)\n       post('/updates/create.json', :query =&gt;  query, basic_auth: {username: \"YOUR_API_KEY\", password: \"\"})\n   end \n end\n</code></pre>\n"}], "owner": {"reputation": 2613, "user_id": 1429950, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/87465b5766341bd3fc21edb5b4e6562f?s=128&d=identicon&r=PG", "display_name": "Ganesh Kunwar", "link": "https://stackoverflow.com/users/1429950/ganesh-kunwar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 162, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1447853785, "creation_date": 1447838868, "last_edit_date": 1447839459, "question_id": 33776154, "link": "https://stackoverflow.com/questions/33776154/httparty-post-record-using-with-u-flag", "title": "HTTParty post record using with -u flag", "body": "<p>I'm trying to post the data using following API using <code>HTTParty gem</code> in rails,</p>\n\n<pre><code>curl -X POST https://app.referralsaasquatch.com/api/v1/{tenant_alias}/user \\\n-u API_KEY: \\\n-H \"Content-Type: application/json\" \\\n-d '{\n    \"id\": \"219065\",\n    \"accountId\": \"accc9065\",\n    \"referralCode\": \"BOBTESTERSON\",\n    \"email\": \"bob@example.com\",\n    \"imageUrl\": \"https://www.example.com/profiled/ab5111251125\",\n    \"firstName\": \"Bob\",\n    \"lastName\": \"Testerson\" }'\n</code></pre>\n\n<p>What is best way to achieve this goal?\nThanks in advance.</p>\n"}, {"tags": ["ruby", "ruby-on-rails-3", "checkbox"], "answers": [{"comments": [{"owner": {"reputation": 950, "user_id": 4993517, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/cc7c669cf8ed5e60e7443150e3a5b513?s=128&d=identicon&r=PG&f=1", "display_name": "SreRoR", "link": "https://stackoverflow.com/users/4993517/sreror"}, "edited": false, "score": 0, "creation_date": 1447927933, "post_id": 33776531, "comment_id": 55367481, "body": "How to write condition to delete when &#39;standard_size = Custom size&#39;"}, {"owner": {"reputation": 9487, "user_id": 5572893, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Y0cqs.jpg?s=128&g=1", "display_name": "Long Nguyen", "link": "https://stackoverflow.com/users/5572893/long-nguyen"}, "reply_to_user": {"reputation": 950, "user_id": 4993517, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/cc7c669cf8ed5e60e7443150e3a5b513?s=128&d=identicon&r=PG&f=1", "display_name": "SreRoR", "link": "https://stackoverflow.com/users/4993517/sreror"}, "edited": false, "score": 0, "creation_date": 1447928287, "post_id": 33776531, "comment_id": 55367742, "body": "@sree Could you please more specific about your StandardSize&#39;s data? If &quot;Custom Size&quot; is the last item in <code>StandardSize.all</code> then the solution above did solve your problem, didn&#39;t it?"}, {"owner": {"reputation": 950, "user_id": 4993517, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/cc7c669cf8ed5e60e7443150e3a5b513?s=128&d=identicon&r=PG&f=1", "display_name": "SreRoR", "link": "https://stackoverflow.com/users/4993517/sreror"}, "edited": false, "score": 0, "creation_date": 1447928443, "post_id": 33776531, "comment_id": 55367867, "body": "i want to check custom size option is there in this list. if there then delete it."}, {"owner": {"reputation": 950, "user_id": 4993517, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/cc7c669cf8ed5e60e7443150e3a5b513?s=128&d=identicon&r=PG&f=1", "display_name": "SreRoR", "link": "https://stackoverflow.com/users/4993517/sreror"}, "edited": false, "score": 0, "creation_date": 1447928579, "post_id": 33776531, "comment_id": 55367971, "body": "the above condition deletes last element,its fine.but if custom size option is not added in standard size table, then it deletes the size which is the last one which is not custom size. so i need to avoid it"}, {"owner": {"reputation": 9487, "user_id": 5572893, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Y0cqs.jpg?s=128&g=1", "display_name": "Long Nguyen", "link": "https://stackoverflow.com/users/5572893/long-nguyen"}, "reply_to_user": {"reputation": 950, "user_id": 4993517, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/cc7c669cf8ed5e60e7443150e3a5b513?s=128&d=identicon&r=PG&f=1", "display_name": "SreRoR", "link": "https://stackoverflow.com/users/4993517/sreror"}, "edited": false, "score": 1, "creation_date": 1447928677, "post_id": 33776531, "comment_id": 55368040, "body": "@sree In that case, it will be <code>- StandardSize.all.reject { |item| item.name == &#39;Custom Size&#39; }.each do |s|</code>"}, {"owner": {"reputation": 9487, "user_id": 5572893, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Y0cqs.jpg?s=128&g=1", "display_name": "Long Nguyen", "link": "https://stackoverflow.com/users/5572893/long-nguyen"}, "reply_to_user": {"reputation": 950, "user_id": 4993517, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/cc7c669cf8ed5e60e7443150e3a5b513?s=128&d=identicon&r=PG&f=1", "display_name": "SreRoR", "link": "https://stackoverflow.com/users/4993517/sreror"}, "edited": false, "score": 0, "creation_date": 1447928895, "post_id": 33776531, "comment_id": 55368213, "body": "@sree you&#39;re welcome. please give this answer one up vote so every have same problem with you can find it easier :)"}], "tags": [], "owner": {"reputation": 9487, "user_id": 5572893, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Y0cqs.jpg?s=128&g=1", "display_name": "Long Nguyen", "link": "https://stackoverflow.com/users/5572893/long-nguyen"}, "is_accepted": true, "score": 0, "last_activity_date": 1447839873, "creation_date": 1447839873, "answer_id": 33776531, "question_id": 33776107, "link": "https://stackoverflow.com/questions/33776107/how-to-remove-last-element-from-checkbox/33776531#33776531", "title": "How to remove last element from checkbox", "body": "<p>This should do the job</p>\n\n<pre><code>- StandardSize.all[0..-2].each do |s|\n   = f.check_box :standard_sizes_id_in, {multiple: true}, s.id, nil\n   = s.name\n</code></pre>\n\n<p>Because <code>StandardSize.all</code> just return an array so you can apply any methods on array to filter it. For more information: <a href=\"http://ruby-doc.org/core-2.2.2/Array.html\" rel=\"nofollow\">http://ruby-doc.org/core-2.2.2/Array.html</a></p>\n"}], "owner": {"reputation": 950, "user_id": 4993517, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/cc7c669cf8ed5e60e7443150e3a5b513?s=128&d=identicon&r=PG&f=1", "display_name": "SreRoR", "link": "https://stackoverflow.com/users/4993517/sreror"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 58, "favorite_count": 0, "accepted_answer_id": 33776531, "answer_count": 1, "score": -1, "last_activity_date": 1447839920, "creation_date": 1447838736, "last_edit_date": 1447839920, "question_id": 33776107, "link": "https://stackoverflow.com/questions/33776107/how-to-remove-last-element-from-checkbox", "title": "How to remove last element from checkbox", "body": "<p>I want to remove the last checkbox option from this loop.</p>\n\n<pre><code>- StandardSize.all.each do |s|\n   = f.check_box :standard_sizes_id_in, {multiple: true}, s.id, nil\n   = s.name\n</code></pre>\n\n<p>This is how I get the checkbox option, when I did inspect element.\nFrom here I want to remove 'custom size' option (which is the last checkbox name). How to do so? </p>\n\n<pre><code>&lt;input type=\"checkbox\" value=\"1\" name=\"q[standard_sizes_id_in][]\" id=\"q_standard_sizes_id_in_1\"&gt;S\n&lt;input type=\"checkbox\" value=\"2\" name=\"q[standard_sizes_id_in][]\" id=\"q_standard_sizes_id_in_2\"&gt;M\n&lt;input type=\"checkbox\" value=\"3\" name=\"q[standard_sizes_id_in][]\" id=\"q_standard_sizes_id_in_3\"&gt;L\n&lt;input type=\"checkbox\" value=\"4\" name=\"q[standard_sizes_id_in][]\" id=\"q_standard_sizes_id_in_4\"&gt;XL\n&lt;input type=\"checkbox\" value=\"5\" name=\"q[standard_sizes_id_in][]\" id=\"q_standard_sizes_id_in_5\"&gt;XXL\n&lt;input type=\"checkbox\" value=\"10\" name=\"q[standard_sizes_id_in][]\" id=\"q_standard_sizes_id_in_10\"&gt;Custom Size\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "heroku", "gem"], "answers": [{"comments": [{"owner": {"reputation": 148, "user_id": 5568319, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e79b87bbae014ef398dbde7ee7aafaf4?s=128&d=identicon&r=PG&f=1", "display_name": "Meetesh", "link": "https://stackoverflow.com/users/5568319/meetesh"}, "edited": false, "score": 0, "creation_date": 1447839569, "post_id": 33776273, "comment_id": 55319433, "body": "I understand that but, I was confused because when I was using the cloud 9 IDE the exact same code worked fine on heroku. But when I tried doing the same with my locally setup ubuntu dev environment it did not work. That had me thinking, anyway thanks for the answer."}, {"owner": {"reputation": 2738, "user_id": 747114, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/111517710867e6e4ad41e4f7784f9799?s=128&d=identicon&r=PG", "display_name": "rlarcombe", "link": "https://stackoverflow.com/users/747114/rlarcombe"}, "reply_to_user": {"reputation": 148, "user_id": 5568319, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e79b87bbae014ef398dbde7ee7aafaf4?s=128&d=identicon&r=PG&f=1", "display_name": "Meetesh", "link": "https://stackoverflow.com/users/5568319/meetesh"}, "edited": false, "score": 0, "creation_date": 1447840249, "post_id": 33776273, "comment_id": 55319914, "body": "The Spring documentation explicitly says &quot;You must not install Spring on your production environment.&quot; <a href=\"https://github.com/rails/spring#user-content-deployment\" rel=\"nofollow noreferrer\">github.com/rails/spring#user-content-deployment</a>  Have a Google of your error related to &#39;to_specs&#39;. I think you should find something that helps your configuration."}], "tags": [], "owner": {"reputation": 2738, "user_id": 747114, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/111517710867e6e4ad41e4f7784f9799?s=128&d=identicon&r=PG", "display_name": "rlarcombe", "link": "https://stackoverflow.com/users/747114/rlarcombe"}, "is_accepted": true, "score": 5, "last_activity_date": 1447839536, "last_edit_date": 1447839536, "creation_date": 1447839177, "answer_id": 33776273, "question_id": 33775964, "link": "https://stackoverflow.com/questions/33775964/why-does-heroku-skip-gems-under-development-section-in-the-gemfile/33776273#33776273", "title": "Why does heroku skip gems under development section in the gemfile?", "body": "<p>Heroku is your production environment, so Gems in your <em>development</em> and <em>test</em> groups in your Gemfile will never be installed on Heroku. </p>\n\n<p>That is the whole point of <a href=\"http://bundler.io/v1.10/groups.html\">Groups in Bundler</a> - you don't need test or development related gems using up memory on your production server. </p>\n\n<p>Spring is an application pre-loader to help speed up your development workflow, so you shouldn't have Spring installed in your production environment. Try to track down what is requiring Spring, and fix that problem first. </p>\n"}, {"tags": [], "owner": {"reputation": 73119, "user_id": 1143732, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/mFUOI.jpg?s=128&g=1", "display_name": "Richard Peck", "link": "https://stackoverflow.com/users/1143732/richard-peck"}, "is_accepted": false, "score": 0, "last_activity_date": 1447841957, "creation_date": 1447841957, "answer_id": 33777374, "question_id": 33775964, "link": "https://stackoverflow.com/questions/33775964/why-does-heroku-skip-gems-under-development-section-in-the-gemfile/33777374#33777374", "title": "Why does heroku skip gems under development section in the gemfile?", "body": "<p>Just to add some context, the problem isn't <em>heroku</em>, it's <a href=\"http://bundler.io\" rel=\"nofollow noreferrer\">bundler</a>;</p>\n\n<p><a href=\"https://i.stack.imgur.com/Hdh9C.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Hdh9C.jpg\" alt=\"enter image description here\"></a></p>\n\n<p>Bundler allows you to install gems specific to the environment in which you're working:</p>\n\n<pre><code>bundler install --without production staging test\n</code></pre>\n\n<p>This is handy for multiple types of dependencies (EG different web servers etc):</p>\n\n<p><a href=\"https://i.stack.imgur.com/SJBny.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/SJBny.png\" alt=\"enter image description here\"></a></p>\n"}], "owner": {"reputation": 148, "user_id": 5568319, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e79b87bbae014ef398dbde7ee7aafaf4?s=128&d=identicon&r=PG&f=1", "display_name": "Meetesh", "link": "https://stackoverflow.com/users/5568319/meetesh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 183, "favorite_count": 0, "accepted_answer_id": 33776273, "answer_count": 2, "score": 1, "last_activity_date": 1447846325, "creation_date": 1447838321, "last_edit_date": 1447846325, "question_id": 33775964, "link": "https://stackoverflow.com/questions/33775964/why-does-heroku-skip-gems-under-development-section-in-the-gemfile", "title": "Why does heroku skip gems under development section in the gemfile?", "body": "<p>I was having a application error so checked <code>heroku rails console</code>:</p>\n\n<pre><code>(master)$ heroku run rails console\nRunning rails console on morning-river-1349... up, run.8048\n/app/vendor/ruby-2.2.3/lib/ruby/2.2.0/rubygems/dependency.rb:315:in `to_specs': Could not find 'spring' (= 1.1.3) among 58 total gem(s) (Gem::LoadError)\nChecked in 'GEM_PATH=/app/vendor/bundle/ruby/2.2.0:/app/vendor/ruby-2.2.3/lib/ruby/gems/2.2.0', execute `gem env` for more information\n    from /app/vendor/ruby-2.2.3/lib/ruby/2.2.0/rubygems/dependency.rb:324:in `to_spec'\n    from /app/vendor/ruby-2.2.3/lib/ruby/2.2.0/rubygems/core_ext/kernel_gem.rb:64:in `gem'\n    from /app/bin/spring:12:in `&lt;top (required)&gt;'\n    from /app/bin/rails:4:in `load'\n    from /app/bin/rails:4:in `&lt;main&gt;'\n</code></pre>\n\n<p><strong>Solution</strong>: I had to move the spring development section to the main in the gemfile.</p>\n\n<p>Now the app works great but, \nany ideas on how to prevent heroku from skipping development category gems ? \n<br> <strong>edit</strong> : Sorry for the unnecessary trouble, I read the release notes of rails 4.1 {since then spring is preloaded}, hence including it in the gemfile was causing unnecessary problem, just removed it altogether. </p>\n"}, {"tags": ["ruby", "mongodb", "mongoid", "aggregation-framework"], "answers": [{"comments": [{"owner": {"reputation": 259, "user_id": 3385328, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/63107cd816389909734d2a68340f651e?s=128&d=identicon&r=PG&f=1", "display_name": "Georgiana.b", "link": "https://stackoverflow.com/users/3385328/georgiana-b"}, "edited": false, "score": 0, "creation_date": 1447848222, "post_id": 33777258, "comment_id": 55325507, "body": "Indeed it does. But not for <code>{&quot;$project&quot; =&gt; { &quot;document.document_attribute&quot;=&gt; 1}}</code> . Does nesting work only for embedded documents and not for the related ones too?"}, {"owner": {"reputation": 43776, "user_id": 5031275, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/h8FTg.png?s=128&g=1", "display_name": "Blakes Seven", "link": "https://stackoverflow.com/users/5031275/blakes-seven"}, "reply_to_user": {"reputation": 259, "user_id": 3385328, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/63107cd816389909734d2a68340f651e?s=128&d=identicon&r=PG&f=1", "display_name": "Georgiana.b", "link": "https://stackoverflow.com/users/3385328/georgiana-b"}, "edited": false, "score": 0, "creation_date": 1447848927, "post_id": 33777258, "comment_id": 55325913, "body": "@Georgiana.b I think you need to <a href=\"http://stackoverflow.com/questions/ask\">Ask another question</a> to put that in context. The result in your question was because you were trying to inspect an object that does not directly expose the results and showing that you need to expose the results before inspecting. But object nesting does not make any difference here, and there would be other reasons if you don&#39;t get an expected result from a different case. So ask another question instead to make it clear, if it is not clear already."}, {"owner": {"reputation": 259, "user_id": 3385328, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/63107cd816389909734d2a68340f651e?s=128&d=identicon&r=PG&f=1", "display_name": "Georgiana.b", "link": "https://stackoverflow.com/users/3385328/georgiana-b"}, "edited": false, "score": 0, "creation_date": 1447850124, "post_id": 33777258, "comment_id": 55326683, "body": "You&#39;re right. Will do if further digging doesn&#39;t reveal the answer."}], "tags": [], "owner": {"reputation": 43776, "user_id": 5031275, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/h8FTg.png?s=128&g=1", "display_name": "Blakes Seven", "link": "https://stackoverflow.com/users/5031275/blakes-seven"}, "is_accepted": true, "score": 3, "last_activity_date": 1447841692, "creation_date": 1447841692, "answer_id": 33777258, "question_id": 33775656, "link": "https://stackoverflow.com/questions/33775656/mongoid-project-aggregation-doesnt-return-anything/33777258#33777258", "title": "Mongoid $project aggregation doesn&#39;t return anything", "body": "<p>Modern releases of Mongoid (v5 and greater) now use a modern <a href=\"http://api.mongodb.org/ruby/2.1.2/\" rel=\"nofollow\">mongodb ruby driver</a> rather than the older \"moped\" driver of Mongoid v3 and v4.</p>\n\n<p>This means that <a href=\"http://api.mongodb.org/ruby/2.1.2/Mongo/Collection.html#aggregate-instance_method\" rel=\"nofollow\"><code>.aggregate()</code></a> returns a \"cursor\", or specifically a <a href=\"http://api.mongodb.org/ruby/2.1.2/Mongo/Collection/View/Readable.html\" rel=\"nofollow\">Mongo::Collection::View::Readable</a> object instead of a plain array of objects, which is consistent with other modern driver releases.</p>\n\n<p>So iterate the \"cursor\" instead, via the standard ways. i.e:</p>\n\n<pre><code>require \"pp\"\n\nAward.collection.aggregate( [ {\"$project\" =&gt; { \"value.amount\"=&gt; 1}} ] ).each do | doc |\n    pp doc\nend\n</code></pre>\n\n<p>Which will give you output like this for each document in the response:</p>\n\n<pre><code>{\"_id\"=&gt;BSON::ObjectId('564c4836023fb886145f8063'), \"value\"=&gt;{\"amount\"=&gt;1.0}}\n</code></pre>\n\n<p>Just like you asked for.</p>\n"}], "owner": {"reputation": 259, "user_id": 3385328, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/63107cd816389909734d2a68340f651e?s=128&d=identicon&r=PG&f=1", "display_name": "Georgiana.b", "link": "https://stackoverflow.com/users/3385328/georgiana-b"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1093, "favorite_count": 0, "accepted_answer_id": 33777258, "answer_count": 1, "score": 1, "last_activity_date": 1447956503, "creation_date": 1447837368, "last_edit_date": 1447956503, "question_id": 33775656, "link": "https://stackoverflow.com/questions/33775656/mongoid-project-aggregation-doesnt-return-anything", "title": "Mongoid $project aggregation doesn&#39;t return anything", "body": "<p>I'm trying to perform the following aggregation with Mongoid: </p>\n\n<pre><code> Award.collection.aggregate( [ {\"$project\" =&gt; {:\"value.amount\"=&gt; 1}} ] )\n</code></pre>\n\n<p>This returns: </p>\n\n<pre><code>#&lt;Mongo::Collection::View::Aggregation:0x0055cc6e8658b8\n@options={},\n@pipeline=[{\"$project\"=&gt;{:\"value.amount\"=&gt;1}}],\n@view=#&lt;Mongo::Collection::View:0x47168257993960   \nnamespace='elvis_development.awards @selector={} @options={}&gt;&gt;\n</code></pre>\n\n<p>so no results but no errors either. This version has the same syntax as the example they give in <a href=\"https://docs.mongodb.org/v3.0/reference/operator/aggregation/project/#embedded-document-fields\" rel=\"nofollow\">the docs</a> but I've tried different syntax too, with no success. In the mongo shell this:</p>\n\n<pre><code>db.awards.aggregate( [ { $project : { value.amount : 1 } } ] )\n</code></pre>\n\n<p>returns the desired results. \n  I use MongoDB v3.0.7 and Mongoid 5.0.1 and this is my model:</p>\n\n<pre><code>class Award\n  include Mongoid::Document\n  include Mongoid::Elasticsearch\n\n  # Associations\n  belongs_to :document\n  embeds_one :date, class_name: \"AwardDate\", inverse_of: :award\n  embeds_one :value, class_name: \"Value\", inverse_of: :award\n\n accepts_nested_attributes_for :value, :date\n\n  # Fields\n field :title, type: String\n field :description, type: String\n\n elasticsearch!({\n  prefix_name: false,\n  index_name: 'awards',\n  wrapper: :load\n })\nend \n</code></pre>\n\n<p>Am I doing something wrong? I noticed in <a href=\"http://github.com/mongodb/mongo-ruby-driver/wiki/Aggregation-Framework-Examples#the-6-most-common-name-days\" rel=\"nofollow\">this example on mongo_ruby_driver Github</a> that the $project aggregation is supported, but I've tried with both nested and not nested attributes with the same result. I realize I could do this with normal retrieval but I would prefer aggregations since they are faster and I have a large data set. Any thoughts would be very much appreciated. </p>\n"}, {"tags": ["ruby"], "answers": [{"tags": [], "owner": {"reputation": 24966, "user_id": 2001031, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/bd4f0d39f82be9c22f6f01c80d7ad800?s=128&d=identicon&r=PG", "display_name": "Neil Slater", "link": "https://stackoverflow.com/users/2001031/neil-slater"}, "is_accepted": false, "score": 1, "last_activity_date": 1447837272, "creation_date": 1447837272, "answer_id": 33775619, "question_id": 33775477, "link": "https://stackoverflow.com/questions/33775477/how-to-set-without-overwrite-option-when-using-fileutils-mv/33775619#33775619", "title": "How to set &quot;without overwrite&quot; option when using FileUtils.mv", "body": "<p>Looking at <a href=\"http://ruby-doc.org/stdlib-2.2.1/libdoc/fileutils/rdoc/FileUtils.html#method-c-mv\" rel=\"nofollow\">the source</a> for <code>FileUtils.mv</code>, it seems there is no single-command equivalent to <code>mv -n</code>. The supported option flags are <code>:verbose</code>, <code>:secure</code>, <code>:noop</code> and <code>:force</code>.</p>\n\n<p>You can work round this with a check if the target exists, e.g.</p>\n\n<pre><code>unless File.exists?( target )\n  FileUtils.mv source, target\nend\n</code></pre>\n"}], "owner": {"reputation": 11845, "user_id": 1536527, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/Sgr8O.png?s=128&g=1", "display_name": "ironsand", "link": "https://stackoverflow.com/users/1536527/ironsand"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 398, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1447837272, "creation_date": 1447836869, "question_id": 33775477, "link": "https://stackoverflow.com/questions/33775477/how-to-set-without-overwrite-option-when-using-fileutils-mv", "title": "How to set &quot;without overwrite&quot; option when using FileUtils.mv", "body": "<p>I want to move files if the files not exist.\nWith <code>system(\"mv -n foo.txt bar.txt\")</code> is basically what I want.\nBut I prefer not to use <code>system</code>, because it depends environment.</p>\n\n<p>Is there corresponding option for <code>mv -n</code> in <code>FileUtils.mv</code>?</p>\n"}, {"tags": ["ruby", "unit-testing", "jruby"], "answers": [{"comments": [{"owner": {"reputation": 2176, "user_id": 323303, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/1443a67b8c1b8ffd44cddad350ae6e2a?s=128&d=identicon&r=PG", "display_name": "amadain", "link": "https://stackoverflow.com/users/323303/amadain"}, "edited": false, "score": 0, "creation_date": 1447858979, "post_id": 33778439, "comment_id": 55333473, "body": "I did and got the same issue"}], "tags": [], "owner": {"reputation": 19821, "user_id": 170230, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/cNDYy.png?s=128&g=1", "display_name": "Draco Ater", "link": "https://stackoverflow.com/users/170230/draco-ater"}, "is_accepted": false, "score": 0, "last_activity_date": 1447844860, "creation_date": 1447844860, "answer_id": 33778439, "question_id": 33774926, "link": "https://stackoverflow.com/questions/33774926/ruby-unit-testing-at-start-not-found/33778439#33778439", "title": "ruby unit testing at_start not found", "body": "<p>In the example provided by your link the</p>\n\n<pre><code>Test::Unit.at_start do\n  puts \"start\"\nend\n</code></pre>\n\n<p>is called outside of test class. You are calling it from inside of your test class. Just move it outside of your <code>TestAOS</code></p>\n"}], "owner": {"reputation": 2176, "user_id": 323303, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/1443a67b8c1b8ffd44cddad350ae6e2a?s=128&d=identicon&r=PG", "display_name": "amadain", "link": "https://stackoverflow.com/users/323303/amadain"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 85, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1447844860, "creation_date": 1447834999, "last_edit_date": 1447835439, "question_id": 33774926, "link": "https://stackoverflow.com/questions/33774926/ruby-unit-testing-at-start-not-found", "title": "ruby unit testing at_start not found", "body": "<p>I am using test-unit-2.5.5 with ruby 1.9.3. In <a href=\"http://test-unit.rubyforge.org/test-unit/en/Test/Unit.html#at_start-class_method\" rel=\"nofollow\">http://test-unit.rubyforge.org/test-unit/en/Test/Unit.html#at_start-class_method</a> there is a method called at_start as part of the ruby test::unit module from version 2.5.2. I tried to use it from the examples on the page like so:</p>\n\n<pre><code>class TestAOS &lt; Test::Unit::TestCase\n  Test::Unit.at_start do\n    puts \"start\"\n  end\n  Test::Unit.at_exit do\n    puts \"Exit!\"\n  end\n</code></pre>\n\n<p>But when I run my test I get the following:</p>\n\n<pre><code>NoMethodError: undefined method `at_start' for Test::Unit:Module\n  TestAOS at unit/TestAOS.rb:8\n   (root) at unit/TestAOS.rb:7\n</code></pre>\n\n<p>Do I need to do anything first before this method can be used? I'm new to ruby</p>\n\n<p>When I comment out the at_start bloack and run the test I get a different error for at_exit:</p>\n\n<pre><code>NoMethodError: private method `at_exit' called for Test::Unit:Module\n  TestAOS at unit/TestAOS.rb:12\n   (root) at unit/TestAOS.rb:7\n</code></pre>\n\n<p>A</p>\n"}, {"tags": ["sql", "ruby", "execute"], "comments": [{"owner": {"reputation": 9602, "user_id": 3607136, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/NRFso.jpg?s=128&g=1", "display_name": "Gagan Gami", "link": "https://stackoverflow.com/users/3607136/gagan-gami"}, "edited": false, "score": 1, "creation_date": 1447837142, "post_id": 33774849, "comment_id": 55317750, "body": "use like this <code>DB.execute(&quot;SELECT id FROM departments WHERE name = ?&quot;, name)</code>"}], "answers": [{"comments": [{"owner": {"reputation": 67, "user_id": 5557599, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/950d11ff53f4868001b3be078b3ab6a4?s=128&d=identicon&r=PG&f=1", "display_name": "TheRealWinnebagoMan ", "link": "https://stackoverflow.com/users/5557599/therealwinnebagoman"}, "edited": false, "score": 0, "creation_date": 1447890782, "post_id": 33774893, "comment_id": 55352368, "body": "if t = &quot;tom&quot;, why does t enter the SQL as tom, not &quot;tom&quot;, and as a schema object name, rather than the string literal which it was set."}, {"owner": {"reputation": 240688, "user_id": 14955, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/5DblQ.png?s=128&g=1", "display_name": "Thilo", "link": "https://stackoverflow.com/users/14955/thilo"}, "reply_to_user": {"reputation": 67, "user_id": 5557599, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/950d11ff53f4868001b3be078b3ab6a4?s=128&d=identicon&r=PG&f=1", "display_name": "TheRealWinnebagoMan ", "link": "https://stackoverflow.com/users/5557599/therealwinnebagoman"}, "edited": false, "score": 0, "creation_date": 1447892408, "post_id": 33774893, "comment_id": 55352965, "body": "If you write <code>&quot;Hello #{name}&quot;</code>, it outputs &quot;Hello Tom&quot; without any quotes. That&#39;s just what it does. Just the contents of your string variable. If you want quotes, you have to put them there. How else is Ruby supposed to know that you want quotes?"}], "tags": [], "owner": {"reputation": 240688, "user_id": 14955, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/5DblQ.png?s=128&g=1", "display_name": "Thilo", "link": "https://stackoverflow.com/users/14955/thilo"}, "is_accepted": true, "score": 3, "last_activity_date": 1447835224, "last_edit_date": 1447835224, "creation_date": 1447834885, "answer_id": 33774893, "question_id": 33774849, "link": "https://stackoverflow.com/questions/33774849/why-do-variables-need-single-quotes-in-execute-sql-query/33774893#33774893", "title": "Why do variables need single quotes in `execute` SQL query?", "body": "<p>It's not a Ruby problem, but an SQL syntax issue.</p>\n\n<pre><code>WHERE name = tom \n</code></pre>\n\n<p>and </p>\n\n<pre><code>WHERE name = 'tom'\n</code></pre>\n\n<p>are two different things.</p>\n\n<p>In the first case, it is treated as a schema object name (presumably a column name here), in the second case it is a String literal.</p>\n\n<p>You run into the same issue whenever you use one programming language to create a program for another programming language (here Ruby -> SQL) by direct String manipulation.</p>\n\n<p>The correct way is to use bind variables.</p>\n\n<pre><code>WHERE name = ?\n</code></pre>\n\n<p>That also deals with the problem of <code>name</code> containing special characters.</p>\n\n<pre><code>name = \"Little Bobby Tables, see http://xkcd.com/327/\"\n</code></pre>\n"}], "owner": {"reputation": 67, "user_id": 5557599, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/950d11ff53f4868001b3be078b3ab6a4?s=128&d=identicon&r=PG&f=1", "display_name": "TheRealWinnebagoMan ", "link": "https://stackoverflow.com/users/5557599/therealwinnebagoman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 145, "favorite_count": 0, "accepted_answer_id": 33774893, "answer_count": 1, "score": 1, "last_activity_date": 1447835359, "creation_date": 1447834680, "last_edit_date": 1447835359, "question_id": 33774849, "link": "https://stackoverflow.com/questions/33774849/why-do-variables-need-single-quotes-in-execute-sql-query", "title": "Why do variables need single quotes in `execute` SQL query?", "body": "<p>Given <code>name = \"Ben\"</code>, this does not work:</p>\n\n<pre><code>DB.execute(\"SELECT id FROM departments WHERE name = #{name}\")\n</code></pre>\n\n<p>but this does (added single quotes):</p>\n\n<pre><code>DB.execute(\"SELECT id FROM departments WHERE name = '#{name}'\")\n</code></pre>\n\n<p>Why? Why doesn't Ruby call the variable in the first example? It's already a string. I don't see why that should make any difference. Isn't that equivalent to passing <code>\"'Ben'\"</code>? Wouldn't this be equivalent to passing <code>\"Ben\"</code>?</p>\n"}, {"tags": ["ruby-on-rails", "arrays", "ruby", "loops", "hash"], "comments": [{"owner": {"reputation": 3467, "user_id": 906511, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/61286bced0ae2da15261439d1bb62297?s=128&d=identicon&r=PG", "display_name": "lcguida", "link": "https://stackoverflow.com/users/906511/lcguida"}, "edited": false, "score": 1, "creation_date": 1447834979, "post_id": 33774629, "comment_id": 55316448, "body": "They Both run twice, it&#39;s the output that is confusing you. In the first example, you print once per key. In the second example, you pront everything per key. hash.each will iterate over all keys of the given hash, in this case, they have 2 keys, so 2 times."}], "answers": [{"tags": [], "owner": {"reputation": 9487, "user_id": 5572893, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Y0cqs.jpg?s=128&g=1", "display_name": "Long Nguyen", "link": "https://stackoverflow.com/users/5572893/long-nguyen"}, "is_accepted": false, "score": 1, "last_activity_date": 1447835002, "last_edit_date": 1447835002, "creation_date": 1447834603, "answer_id": 33774821, "question_id": 33774629, "link": "https://stackoverflow.com/questions/33774629/explanation-of-ruby-code-for-iterating-over-an-array-of-hashes/33774821#33774821", "title": "Explanation of ruby code for iterating over an Array of hashes", "body": "<p>Block code inside <code>@newArray[@grades_counter].each</code> will run 2 times because each hash you have 2 pairs of key-value.</p>\n\n<p>And the shorter version of your code:</p>\n\n<pre><code>@newArray.each do |hash|\n  hash.each do |key, value|\n    print [key]\n    puts [value]\n  end\nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 3467, "user_id": 906511, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/61286bced0ae2da15261439d1bb62297?s=128&d=identicon&r=PG", "display_name": "lcguida", "link": "https://stackoverflow.com/users/906511/lcguida"}, "is_accepted": true, "score": 1, "last_activity_date": 1447835179, "creation_date": 1447835179, "answer_id": 33774978, "question_id": 33774629, "link": "https://stackoverflow.com/questions/33774629/explanation-of-ruby-code-for-iterating-over-an-array-of-hashes/33774978#33774978", "title": "Explanation of ruby code for iterating over an Array of hashes", "body": "<p>You don't want to iterate over the Hash in the second example. You're iterating over the hash keys (even though you don't use it).</p>\n\n<p>You should be doing something like this:</p>\n\n<pre><code>@newArray=[{grade_id:\"1\",sections:\"4\"},{grade_id:\"2\",sections:\"8\"},\n            {grade_id:\"3\",sections:\"7\"},{grade_id:\"4\",sections:\"7\"},\n            {grade_id:\"5\",sections:\"3\"},{grade_id:\"6\",sections:\"3\"},\n            {grade_id:\"7\",sections:\"3\"}]\n\n@total_grades_passed = @newArray.count\n@grades_counter = 0  \n\nwhile @grades_counter &lt; @total_grades_passed do\n\n    @grade_id = @newArray[@grades_counter][:grade_id].to_i\n    @no_of_sections = @newArray[@grades_counter][:sections].to_i\n    puts \"Grade id is #{@grade_id} and its class is #{@grade_id.class}\"\n    puts \"section is #{@no_of_sections} and its class is #{@no_of_sections.class}\"\n\n  @grades_counter += 1\nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1958, "user_id": 2803062, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/ed9b78fe5151cbc40739c7db14fbecf7?s=128&d=identicon&r=PG", "display_name": "bosskovic", "link": "https://stackoverflow.com/users/2803062/bosskovic"}, "is_accepted": false, "score": 3, "last_activity_date": 1447835307, "creation_date": 1447835307, "answer_id": 33775006, "question_id": 33774629, "link": "https://stackoverflow.com/questions/33774629/explanation-of-ruby-code-for-iterating-over-an-array-of-hashes/33775006#33775006", "title": "Explanation of ruby code for iterating over an Array of hashes", "body": "<p>There are better, cleaner, more \"ruby-like\" ways to do this.</p>\n\n<p>if grade_id and sections is what you want, you could access it like this:</p>\n\n<pre><code>@newArray.each do |hash|\n  hash.each do |grade_id, sections|\n    # do something\n  end\nend\n</code></pre>\n\n<p>Also please note that when you iterate through a hash, it will pass as many times as there are keys. That is why your text got outputted twice.</p>\n"}], "owner": {"reputation": 336, "user_id": 2975692, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/a929a7c3802cc7277952cfeefcaa88f4?s=128&d=identicon&r=PG", "display_name": "Anjan", "link": "https://stackoverflow.com/users/2975692/anjan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 76, "favorite_count": 0, "accepted_answer_id": 33774978, "answer_count": 3, "score": -1, "last_activity_date": 1447836861, "creation_date": 1447833946, "last_edit_date": 1447836861, "question_id": 33774629, "link": "https://stackoverflow.com/questions/33774629/explanation-of-ruby-code-for-iterating-over-an-array-of-hashes", "title": "Explanation of ruby code for iterating over an Array of hashes", "body": "<p>I have two scripts both behave differently one runs one time while other twice, cant understand why can any one plz help??</p>\n\n<p>SCRIPT - 1</p>\n\n<pre><code>@newArray=[{grade_id:\"1\",sections:\"4\"},\n           {grade_id:\"2\",sections:\"8\"},\n           {grade_id:\"3\",sections:\"7\"},\n           {grade_id:\"4\",sections:\"7\"},\n           {grade_id:\"5\",sections:\"3\"},\n           {grade_id:\"6\",sections:\"3\"},\n           {grade_id:\"7\",sections:\"3\"}]\n\n@total_grades_passed = @newArray.count\n@grades_counter = 0\n\nwhile @grades_counter &lt; @total_grades_passed do\n  @newArray[@grades_counter].each do |key, value|\n     print [key]\n     puts [value] \n  end\n  @grades_counter += 1\nend\n</code></pre>\n\n<p>Gives below output.</p>\n\n<pre><code>[:grade_id]1\n[:sections]4\n[:grade_id]2\n[:sections]8\n[:grade_id]3\n[:sections]7\n[:grade_id]4\n[:sections]7\n[:grade_id]5\n[:sections]3\n[:grade_id]6\n[:sections]3\n[:grade_id]7\n[:sections]3\n</code></pre>\n\n<p>While SCRIPT - 2 gives completely different output.</p>\n\n<pre><code>@newArray=[{grade_id:\"1\",sections:\"4\"},\n           {grade_id:\"2\",sections:\"8\"},\n           {grade_id:\"3\",sections:\"7\"},\n           {grade_id:\"4\",sections:\"7\"},\n           {grade_id:\"5\",sections:\"3\"},\n           {grade_id:\"6\",sections:\"3\"},\n           {grade_id:\"7\",sections:\"3\"}]\n\n@total_grades_passed = @newArray.count\n@grades_counter = 0  \n\nwhile @grades_counter &lt; @total_grades_passed do\n  @newArray[@grades_counter].each do |x,y|\n    @grade_id = @newArray[@grades_counter][:grade_id].to_i\n    @no_of_sections = @newArray[@grades_counter][:sections].to_i\n    puts \"Grade id is #{@grade_id} and its class is #{@grade_id.class}\"\n    puts \"section is #{@no_of_sections} and its class is #{@no_of_sections.class}\"\n  end\n  @grades_counter += 1\nend\n</code></pre>\n\n<p>Gives the below strange output.</p>\n\n<pre><code>Grade id is 1 and its class is Fixnum\nsection is 4 and its class is Fixnum\nGrade id is 1 and its class is Fixnum\nsection is 4 and its class is Fixnum\nGrade id is 2 and its class is Fixnum\nsection is 8 and its class is Fixnum\nGrade id is 2 and its class is Fixnum\nsection is 8 and its class is Fixnum\nGrade id is 3 and its class is Fixnum\nsection is 7 and its class is Fixnum\nGrade id is 3 and its class is Fixnum\nsection is 7 and its class is Fixnum\nGrade id is 4 and its class is Fixnum\nsection is 7 and its class is Fixnum\nGrade id is 4 and its class is Fixnum\nsection is 7 and its class is Fixnum\nGrade id is 5 and its class is Fixnum\nsection is 3 and its class is Fixnum\nGrade id is 5 and its class is Fixnum\nsection is 3 and its class is Fixnum\nGrade id is 6 and its class is Fixnum\nsection is 3 and its class is Fixnum\nGrade id is 6 and its class is Fixnum\nsection is 3 and its class is Fixnum\nGrade id is 7 and its class is Fixnum\nsection is 3 and its class is Fixnum\nGrade id is 7 and its class is Fixnum\nsection is 3 and its class is Fixnum\n</code></pre>\n\n<p>Can anyone please explain me why this is happening, whats the difference between both scripts and their subsequent outputs are due to which lines of code?\nI just want to extract the grade_id and section_id and do some computation then move on to the next pair of grade and section ids and do the same computation on them.</p>\n"}, {"tags": ["ruby", "mongodb"], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 5231702, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/7d6998b0dae572bc9bfd0618f71b05d9?s=128&d=identicon&r=PG&f=1", "display_name": "coder0110", "link": "https://stackoverflow.com/users/5231702/coder0110"}, "edited": false, "score": 0, "creation_date": 1447833831, "post_id": 33774571, "comment_id": 55315884, "body": "Where do i put this piece of code is what i dont understand"}], "tags": [], "owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "is_accepted": false, "score": 0, "last_activity_date": 1447833752, "creation_date": 1447833752, "answer_id": 33774571, "question_id": 33774495, "link": "https://stackoverflow.com/questions/33774495/how-to-format-the-ruby-model-level-errors/33774571#33774571", "title": "How to format the ruby model level errors", "body": "<pre><code>your_hash.each{|k, v| your_hash[k] = v.first}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 3, "user_id": 5231702, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/7d6998b0dae572bc9bfd0618f71b05d9?s=128&d=identicon&r=PG&f=1", "display_name": "coder0110", "link": "https://stackoverflow.com/users/5231702/coder0110"}, "is_accepted": true, "score": 0, "last_activity_date": 1447844353, "creation_date": 1447844353, "answer_id": 33778261, "question_id": 33774495, "link": "https://stackoverflow.com/questions/33774495/how-to-format-the-ruby-model-level-errors/33778261#33778261", "title": "How to format the ruby model level errors", "body": "<p>I figured it out. Since I am using grape gem, I could use error_fomatter. I just defined a custom error formatter</p>\n\n<pre><code>        (message.each {|k, v|\n                      message[k] = v.join(\",\")\n                    }).to_json \n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 5231702, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/7d6998b0dae572bc9bfd0618f71b05d9?s=128&d=identicon&r=PG&f=1", "display_name": "coder0110", "link": "https://stackoverflow.com/users/5231702/coder0110"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 23, "favorite_count": 0, "accepted_answer_id": 33778261, "answer_count": 2, "score": 0, "last_activity_date": 1447844353, "creation_date": 1447833440, "last_edit_date": 1447833874, "question_id": 33774495, "link": "https://stackoverflow.com/questions/33774495/how-to-format-the-ruby-model-level-errors", "title": "How to format the ruby model level errors", "body": "<p>I am using mongodb. I implemented some model level validations, and the error message comes in an array format like:</p>\n\n<pre><code>{\n  \"first_name\": [\n    \"is invalid\"\n  ],\n  \"last_name\": [\n    \"is invalid\"\n  ]\n}\n</code></pre>\n\n<p>I want to change this to string format like this:</p>\n\n<pre><code>{\n  \"first_name\": \"is invalid\",\n  \"last_name\": \"is invalid\"\n}\n</code></pre>\n\n<p>What do I do?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4", "devise", "rails-activerecord"], "answers": [{"tags": [], "owner": {"reputation": 3346, "user_id": 832780, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/uOmJB.jpg?s=128&g=1", "display_name": "hallucinations", "link": "https://stackoverflow.com/users/832780/hallucinations"}, "is_accepted": false, "score": 2, "last_activity_date": 1447832911, "creation_date": 1447832911, "answer_id": 33774383, "question_id": 33774315, "link": "https://stackoverflow.com/questions/33774315/how-to-skip-callback-before-save-for-specific-user/33774383#33774383", "title": "How to skip_callback before_save for specific user?", "body": "<p>I think this is all what you need: </p>\n\n<p><a href=\"http://guides.rubyonrails.org/active_record_callbacks.html#conditional-callbacks\" rel=\"nofollow\">http://guides.rubyonrails.org/active_record_callbacks.html#conditional-callbacks</a></p>\n"}, {"tags": [], "owner": {"reputation": 1958, "user_id": 2803062, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/ed9b78fe5151cbc40739c7db14fbecf7?s=128&d=identicon&r=PG", "display_name": "bosskovic", "link": "https://stackoverflow.com/users/2803062/bosskovic"}, "is_accepted": false, "score": 0, "last_activity_date": 1447846072, "last_edit_date": 1447846072, "creation_date": 1447834231, "answer_id": 33774702, "question_id": 33774315, "link": "https://stackoverflow.com/questions/33774315/how-to-skip-callback-before-save-for-specific-user/33774702#33774702", "title": "How to skip_callback before_save for specific user?", "body": "<p>If you skip callback, you should enable it later. Anyway, this does not look as the best solution. Perhaps you could avoid the callbacks otherwise.</p>\n\n<p>One way would be to use update_all:</p>\n\n<pre><code>DailyOrder.where(id: @daily_order.id).update_all( daily_order_params.merge({default_order:false}) )\n</code></pre>\n\n<p>Or you could do something like this:</p>\n\n<pre><code>#in the model:\nbefore_validation :refresh_total\n\n#in the controller\n@daily_order.assign_attributes( daily_order_params.merge({default_order:false}) )\n@daily_order.save(validate: current_admin.nil?)\n</code></pre>\n\n<p>or maybe it would be the best to add a new column to the model: <strong>refresh_needed</strong> and then you would conditionally update that column on before_validation, and on before_save you would still call the same callback, but conditionally to the state of refresh_needed. In this callback you should reset that column. Please let me know if you would like me to illustrate this with some code.</p>\n\n<hr>\n\n<p>This may come in handy: \n<a href=\"http://www.davidverhasselt.com/set-attributes-in-activerecord/\" rel=\"nofollow\">http://www.davidverhasselt.com/set-attributes-in-activerecord/</a></p>\n\n<hr>\n\n<p><strong>UPDATE</strong></p>\n\n<p>Even better, you can call <em>update_columns</em>.\nHere is what it says in the <a href=\"https://github.com/rails/rails/blob/master/activerecord/lib/active_record/persistence.rb#L304\" rel=\"nofollow\">documentation of the method</a>:</p>\n\n<blockquote>\n  <p>Updates the attributes directly in the database issuing an UPDATE SQL\n    statement and sets them in the receiver:</p>\n  \n  <p>user.update_columns(last_request_at: Time.current)</p>\n  \n  <p>This is the fastest way to update attributes because it goes straight to\n    the database, but take into account that in consequence the regular update\n    procedures are totally bypassed. In particular:</p>\n  \n  <ul>\n  <li>\\Validations are skipped.</li>\n  <li>\\Callbacks are skipped.</li>\n  <li><p>+updated_at+/+updated_on+ are not updated.</p>\n  \n  <p>This method raises an ActiveRecord::ActiveRecordError when called on new\n  objects, or when at least one of the attributes is marked as readonly.</p></li>\n  </ul>\n</blockquote>\n"}], "owner": {"reputation": 7975, "user_id": 1577357, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/9db0054df76cc4b80888ff713527a652?s=128&d=identicon&r=PG", "display_name": "Zulhilmi Zainudin", "link": "https://stackoverflow.com/users/1577357/zulhilmi-zainudin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 729, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1447846072, "creation_date": 1447832645, "question_id": 33774315, "link": "https://stackoverflow.com/questions/33774315/how-to-skip-callback-before-save-for-specific-user", "title": "How to skip_callback before_save for specific user?", "body": "<p>I've a method named <code>update</code> inside my <code>DailyOrdersController</code>:</p>\n\n<pre><code>def update\n    if @daily_order.update( daily_order_params.merge({default_order:false}) )\n        respond_or_redirect(@daily_order)\n    else\n        render :edit\n    end\nend\n</code></pre>\n\n<p>My <code>DailyOrder</code> model:</p>\n\n<pre><code>before_save :refresh_total\n\ndef refresh_total\n    # i do something here\nend\n</code></pre>\n\n<p>What I'm trying to do now is, I want the <code>refresh_total</code> callback to be skipped if the update request is coming from <code>current_admin</code>.</p>\n\n<p>I have 2 user model generated using Devise gem:</p>\n\n<ol>\n<li>User (has <code>current_user</code>)</li>\n<li>Admin (has <code>current_admin</code>)</li>\n</ol>\n\n<p>I try to make it like this:</p>\n\n<pre><code>def update\n   if current_admin\n      DailyOrder.skip_callback :update, :before, :refresh_total\n   end\n\n   if @daily_order.update( daily_order_params.merge({default_order:false}) )\n      respond_or_redirect(@daily_order)\n   else\n      render :edit\n   end\nend\n</code></pre>\n\n<p>But it's not working and still keep calling the <code>refresh_total</code> callback if the update request is coming from <code>current_admin</code> (when the logged-in user is admin user).</p>\n\n<p>What should I do now?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "rails-activerecord"], "answers": [{"comments": [{"owner": {"reputation": 3467, "user_id": 906511, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/61286bced0ae2da15261439d1bb62297?s=128&d=identicon&r=PG", "display_name": "lcguida", "link": "https://stackoverflow.com/users/906511/lcguida"}, "edited": false, "score": 0, "creation_date": 1447834204, "post_id": 33774454, "comment_id": 55316053, "body": "role is the string attribute of PublickKeyRole?"}, {"owner": {"reputation": 1790, "user_id": 204406, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/e5fc2adfaf7d787593faf6b78250be12?s=128&d=identicon&r=PG&f=1", "display_name": "drack", "link": "https://stackoverflow.com/users/204406/drack"}, "edited": false, "score": 0, "creation_date": 1447834243, "post_id": 33774454, "comment_id": 55316074, "body": "Looks like my spec was missing the public_key_role model. Both of these seem to work."}, {"owner": {"reputation": 1790, "user_id": 204406, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/e5fc2adfaf7d787593faf6b78250be12?s=128&d=identicon&r=PG&f=1", "display_name": "drack", "link": "https://stackoverflow.com/users/204406/drack"}, "edited": false, "score": 0, "creation_date": 1447834473, "post_id": 33774454, "comment_id": 55316190, "body": "Thanks for fixing the parenthesis. SO wouldn&#39;t allow me to make a single edit, it needed a minimum of 6 characters or something."}], "tags": [], "owner": {"reputation": 3467, "user_id": 906511, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/61286bced0ae2da15261439d1bb62297?s=128&d=identicon&r=PG", "display_name": "lcguida", "link": "https://stackoverflow.com/users/906511/lcguida"}, "is_accepted": true, "score": 1, "last_activity_date": 1447834426, "last_edit_date": 1447834426, "creation_date": 1447833278, "answer_id": 33774454, "question_id": 33774309, "link": "https://stackoverflow.com/questions/33774309/rails-scope-filter-search-from-association/33774454#33774454", "title": "Rails scope filter/search from association", "body": "<p>From <a href=\"http://guides.rubyonrails.org/active_record_querying.html#merging-of-scopes\" rel=\"nofollow\">the docs</a> you have some examples. You can search in the relation passing the query to the PublicKeyRole relation:</p>\n\n<pre><code>scope :filter_by_role, lambda { |query|\n  joins(:public_key_role).merge(PublicKeyRole.where(role: query))\n}\n</code></pre>\n\n<p>If you want a string search (as LIKE):</p>\n\n<pre><code>scope :filter_by_role, lambda { |query|\n  joins(:public_key_role).merge(PublicKeyRole.where(PublicKeyRole.arel_table[:role].matches(query)))\n}\n</code></pre>\n"}], "owner": {"reputation": 1790, "user_id": 204406, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/e5fc2adfaf7d787593faf6b78250be12?s=128&d=identicon&r=PG&f=1", "display_name": "drack", "link": "https://stackoverflow.com/users/204406/drack"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 782, "favorite_count": 0, "accepted_answer_id": 33774454, "answer_count": 1, "score": 0, "last_activity_date": 1447834426, "creation_date": 1447832613, "last_edit_date": 1447834356, "question_id": 33774309, "link": "https://stackoverflow.com/questions/33774309/rails-scope-filter-search-from-association", "title": "Rails scope filter/search from association", "body": "<p>I have a one-to-one association between PublicKey and PublicKeyRole. The PublicKey model has a column, <code>role_id</code>, and the PublicKeyRole model has <code>role</code> column which is a string, such as <code>'super'</code>. </p>\n\n<p>I want to be able to search by role string via a url query param, like; <code>https://api.domain.com/public_keys?role=admin</code>. I've tried this on the PublicKey model but I'm not sure where to pass the query in to:</p>\n\n<pre><code>scope :filter_by_role, lambda { |query|\n  joins(:public_key_role).merge(PublicKeyRole.role)\n}\n</code></pre>\n\n<p>Here are my models:</p>\n\n<pre><code>class PublicKey &lt; ActiveRecord::Base\n  belongs_to :user\n  belongs_to :public_key_role, foreign_key: :role_id\n\n  def self.search(params = {})\n    public_keys = params[:public_key_ids].present? ? PublicKey.where(id: params[:public_key_ids]) : PublicKey.all\n    public_keys = public_keys.filter_by_role(params[:role]) if params[:role]\n\n    public_keys\n  end\nend\n\nclass PublicKeyRole &lt; ActiveRecord::Base\n  has_one :public_key\nend\n</code></pre>\n\n<p>Also, here's my test:</p>\n\n<pre><code>describe '.filter_by_role' do\n    before(:each) do\n      @public_key1 = FactoryGirl.create :public_key, { role_id: 1 }\n      @public_key2 = FactoryGirl.create :public_key, { role_id: 2 }\n      @public_key3 = FactoryGirl.create :public_key, { role_id: 1 }\n    end\n\n    context \"when a 'super' role is sent\" do\n      it 'returns the 2 matching public keys results' do\n        expect(PublicKey.filter_by_role('super').size).to eq(2)\n      end\n\n      it 'returns the matching public keys' do\n        expect(PublicKey.filter_by_role('super').sort).to match_array([@public_key1, @public_key3])\n      end\n    end\n  end\n</code></pre>\n\n<h3>Update</h3>\n\n<p>I was missing the following in my spec, @lcguida's answer works.</p>\n\n<pre><code>FactoryGirl.create :public_key_role, { id: 1, role: 'super' }\n</code></pre>\n"}, {"tags": ["sql", "ruby-on-rails", "ruby", "ruby-on-rails-3", "rails-activerecord"], "answers": [{"comments": [{"owner": {"reputation": 22312, "user_id": 463758, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/105689a9cb392f18c1d0b27ed0cf657f?s=128&d=identicon&r=PG&f=1", "display_name": "balki", "link": "https://stackoverflow.com/users/463758/balki"}, "edited": false, "score": 0, "creation_date": 1447835300, "post_id": 33774183, "comment_id": 55316626, "body": "This works if I know the value is null. But if the code was <code>myrecords.where(&quot;foo = ? OR bar = ?&quot;, some_obj_could_be_nil, 42).first</code>. Is there a better way?"}, {"owner": {"reputation": 22312, "user_id": 463758, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/105689a9cb392f18c1d0b27ed0cf657f?s=128&d=identicon&r=PG&f=1", "display_name": "balki", "link": "https://stackoverflow.com/users/463758/balki"}, "edited": false, "score": 0, "creation_date": 1447843151, "post_id": 33774183, "comment_id": 55322056, "body": "Thanks! I wish there was a database independent solution in rails"}, {"owner": {"reputation": 1835, "user_id": 4985645, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NMblv.png?s=128&g=1", "display_name": "Vishal JAIN", "link": "https://stackoverflow.com/users/4985645/vishal-jain"}, "reply_to_user": {"reputation": 22312, "user_id": 463758, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/105689a9cb392f18c1d0b27ed0cf657f?s=128&d=identicon&r=PG&f=1", "display_name": "balki", "link": "https://stackoverflow.com/users/463758/balki"}, "edited": false, "score": 0, "creation_date": 1447843940, "post_id": 33774183, "comment_id": 55322616, "body": "@balki in higher version of rails you can place <code>OR</code> condition in rails active record query or <code>Arel</code> query you can place <code>OR</code> then you can directly create active record query. then their is no database dependent part."}], "tags": [], "owner": {"reputation": 1835, "user_id": 4985645, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NMblv.png?s=128&g=1", "display_name": "Vishal JAIN", "link": "https://stackoverflow.com/users/4985645/vishal-jain"}, "is_accepted": true, "score": 2, "last_activity_date": 1447838963, "last_edit_date": 1447838963, "creation_date": 1447831981, "answer_id": 33774183, "question_id": 33774109, "link": "https://stackoverflow.com/questions/33774109/activerecord-or-query-behavior-when-first-argument-is-nil/33774183#33774183", "title": "ActiveRecord OR query behavior when first argument is nil", "body": "<p>Hey you can try this way null value is not compare in mysql for more info of <code>NULL</code> values refer\n<a href=\"http://dev.mysql.com/doc/refman/5.7/en/working-with-null.html\" rel=\"nofollow\">Working with NULL Values</a></p>\n\n<pre><code>myrecords.where(\"foo is null OR bar = ?\", 42).first\n</code></pre>\n\n<blockquote>\n  <p>If in case you are not aware of value of object is <code>null</code> or\n  <code>not null</code> used  <a href=\"http://dev.mysql.com/doc/refman/5.0/en/comparison-operators.html#operator_equal-to\" rel=\"nofollow\">NULL-safe equal to operator </a> of mysql as:</p>\n</blockquote>\n\n<pre><code> myrecords.where(\"foo &lt;=&gt; ? OR bar = ?\", nil, 42).first\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1835, "user_id": 4985645, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NMblv.png?s=128&g=1", "display_name": "Vishal JAIN", "link": "https://stackoverflow.com/users/4985645/vishal-jain"}, "edited": false, "score": 0, "creation_date": 1447832228, "post_id": 33774207, "comment_id": 55315122, "body": "hey <code>where(foo: nil, bar: 42)</code> is this place <code>OR</code> clause?? i think it place <code>AND</code> in mysql query. and OP requires <code>OR</code>"}, {"owner": {"reputation": 22312, "user_id": 463758, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/105689a9cb392f18c1d0b27ed0cf657f?s=128&d=identicon&r=PG&f=1", "display_name": "balki", "link": "https://stackoverflow.com/users/463758/balki"}, "edited": false, "score": 0, "creation_date": 1447832633, "post_id": 33774207, "comment_id": 55315296, "body": "What is NULL? a constant defined somewhere? Is the issue mysql specific. The behaviour could be different elsewhere?"}, {"owner": {"reputation": 2575, "user_id": 891359, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/4926014a83c1d25207953e5e585556cb?s=128&d=identicon&r=PG", "display_name": "bo-oz", "link": "https://stackoverflow.com/users/891359/bo-oz"}, "edited": false, "score": 0, "creation_date": 1447832898, "post_id": 33774207, "comment_id": 55315416, "body": "True, that&#39;s why I had the second solution (which I removed because it creates AND query). Just write a Unit test to confirm it works in your current setup. Or use a gem which is capable of performing OR queries. I think MetaWhere does this."}, {"owner": {"reputation": 2575, "user_id": 891359, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/4926014a83c1d25207953e5e585556cb?s=128&d=identicon&r=PG", "display_name": "bo-oz", "link": "https://stackoverflow.com/users/891359/bo-oz"}, "edited": false, "score": 0, "creation_date": 1447833144, "post_id": 33774207, "comment_id": 55315543, "body": "PS. it looks like Rails 5 will be supporting the use of the .or method to chain multiple .where&#39;s, but that probably won&#39;t help you at this moment."}], "tags": [], "owner": {"reputation": 2575, "user_id": 891359, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/4926014a83c1d25207953e5e585556cb?s=128&d=identicon&r=PG", "display_name": "bo-oz", "link": "https://stackoverflow.com/users/891359/bo-oz"}, "is_accepted": false, "score": -1, "last_activity_date": 1447832828, "last_edit_date": 1447832828, "creation_date": 1447832056, "answer_id": 33774207, "question_id": 33774109, "link": "https://stackoverflow.com/questions/33774109/activerecord-or-query-behavior-when-first-argument-is-nil/33774207#33774207", "title": "ActiveRecord OR query behavior when first argument is nil", "body": "<p>This should work:</p>\n\n<pre><code>myrecords.where(\"foo = ? OR bar = ?\", NULL, 42).first\n</code></pre>\n"}], "owner": {"reputation": 22312, "user_id": 463758, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/105689a9cb392f18c1d0b27ed0cf657f?s=128&d=identicon&r=PG&f=1", "display_name": "balki", "link": "https://stackoverflow.com/users/463758/balki"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 51, "favorite_count": 0, "accepted_answer_id": 33774183, "answer_count": 2, "score": 1, "last_activity_date": 1447838963, "creation_date": 1447831741, "question_id": 33774109, "link": "https://stackoverflow.com/questions/33774109/activerecord-or-query-behavior-when-first-argument-is-nil", "title": "ActiveRecord OR query behavior when first argument is nil", "body": "<p>There is a record with <code>foo=nil</code> and <code>bar=43</code>. Why does the following query does not match that record. Should it not just check only <code>foo</code> since it matches with the given value (i.e <code>nil</code>)?</p>\n\n<pre><code>myrecords.where(\"foo = ? OR bar = ?\", nil, 42).first\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4", "sass", "asset-pipeline"], "comments": [{"owner": {"reputation": 6569, "user_id": 371530, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/UJz1r.jpg?s=128&g=1", "display_name": "Robin", "link": "https://stackoverflow.com/users/371530/robin"}, "edited": false, "score": 2, "creation_date": 1447832522, "post_id": 33773925, "comment_id": 55315251, "body": "Check this out: <a href=\"http://stackoverflow.com/questions/17536023/rake-assetsprecompilenodigest-in-rails-4\" title=\"rake assetsprecompilenodigest in rails 4\">stackoverflow.com/questions/17536023/&hellip;</a>"}], "answers": [{"comments": [{"owner": {"reputation": 1545, "user_id": 384109, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/19168f90634d83872ca3803b328b3c41?s=128&d=identicon&r=PG", "display_name": "tassock", "link": "https://stackoverflow.com/users/384109/tassock"}, "edited": false, "score": 1, "creation_date": 1447874305, "post_id": 33776112, "comment_id": 55343888, "body": "Great, thanks! When I made this change, only my css file was un-fingerprinted, but once I made a change to my sass all fingerprints in the css were removed."}], "tags": [], "owner": {"reputation": 1487, "user_id": 4314737, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/--oKvmYGmbWo/AAAAAAAAAAI/AAAAAAAAACE/DViFEFiuDjo/photo.jpg?sz=128", "display_name": "Van Huy", "link": "https://stackoverflow.com/users/4314737/van-huy"}, "is_accepted": true, "score": 3, "last_activity_date": 1447838747, "creation_date": 1447838747, "answer_id": 33776112, "question_id": 33773925, "link": "https://stackoverflow.com/questions/33773925/compile-sass-stylsheets-in-rails-without-fingerprinting/33776112#33776112", "title": "Compile sass stylsheets in Rails without fingerprinting", "body": "<p>Rails 4 has documentation for this.\nJust set </p>\n\n<pre><code>config.assets.digest = false \n</code></pre>\n\n<p>in your environment configuration file (for example <code>config/environments/production.rb</code>)</p>\n\n<p><a href=\"http://guides.rubyonrails.org/asset_pipeline.html#turning-digests-off\" rel=\"nofollow\">http://guides.rubyonrails.org/asset_pipeline.html#turning-digests-off</a></p>\n"}, {"tags": [], "owner": {"reputation": 6584, "user_id": 1831520, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/QFRGt.jpg?s=128&g=1", "display_name": "sadaf2605", "link": "https://stackoverflow.com/users/1831520/sadaf2605"}, "is_accepted": false, "score": 2, "last_activity_date": 1447839191, "creation_date": 1447839191, "answer_id": 33776278, "question_id": 33773925, "link": "https://stackoverflow.com/questions/33773925/compile-sass-stylsheets-in-rails-without-fingerprinting/33776278#33776278", "title": "Compile sass stylsheets in Rails without fingerprinting", "body": "<p>There is a gem called <a href=\"https://github.com/alexspeller/non-stupid-digest-assets\" rel=\"nofollow\">non-stupid-digest-assets</a> which allows you to determine which files are \"fingerprinted\" and which are not.</p>\n\n<pre><code>#config/initializers/non_digest_assets.rb\nNonStupidDigestAssets.whitelist = [\"your_file.js\"]\n</code></pre>\n\n<p>You'll then be able to call it <code>your_file.js</code> as well as using asset_path <code>asset_path(\"your_file.js\")</code></p>\n"}], "owner": {"reputation": 1545, "user_id": 384109, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/19168f90634d83872ca3803b328b3c41?s=128&d=identicon&r=PG", "display_name": "tassock", "link": "https://stackoverflow.com/users/384109/tassock"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 103, "favorite_count": 0, "accepted_answer_id": 33776112, "answer_count": 2, "score": 1, "last_activity_date": 1447839191, "creation_date": 1447831026, "last_edit_date": 1495541036, "question_id": 33773925, "link": "https://stackoverflow.com/questions/33773925/compile-sass-stylsheets-in-rails-without-fingerprinting", "title": "Compile sass stylsheets in Rails without fingerprinting", "body": "<p>I need to use my sass stylesheets for another non-rails site (a Wordpress blog), so I need to compile them into a css file without the file fingerprinting from the asset pipeline. I saw this related post: </p>\n\n<p><a href=\"https://stackoverflow.com/questions/23544904/rails-4-asset-pipeline-compile-both-with-and-without-fingerprint\">Rails 4 Asset Pipeline: Compile both with and without fingerprint</a></p>\n\n<p>However, it doesn't seem to give me the non-fingerprinted stylesheet I'm looking for </p>\n"}, {"tags": ["ruby-on-rails", "ruby", "postgresql", "rake"], "answers": [{"tags": [], "owner": {"reputation": 359, "user_id": 2404943, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/4810bbeb01d8add880fb30caa1fd02df?s=128&d=identicon&r=PG", "display_name": "Yoshi", "link": "https://stackoverflow.com/users/2404943/yoshi"}, "is_accepted": false, "score": 0, "last_activity_date": 1453254142, "last_edit_date": 1495535276, "creation_date": 1453254142, "answer_id": 34890102, "question_id": 33773895, "link": "https://stackoverflow.com/questions/33773895/possible-issues-with-the-rake-railsupdatebin-command/34890102#34890102", "title": "Possible issues with the rake rails:update:bin command", "body": "<p>here is very similar post.\n<a href=\"https://stackoverflow.com/questions/22481691/ruby-on-rails-cannot-load-such-file-net-ssh\">Ruby on rails - cannot load such file -- net/ssh</a></p>\n\n<p>Only you need is add this to your Gemfile and install.</p>\n\n<pre><code>gem 'net-ssh'\n</code></pre>\n\n<p>It worked for me.</p>\n"}], "owner": {"reputation": 339, "user_id": 5241955, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/a0abbd797508561c53992c650ea2e2f2?s=128&d=identicon&r=PG&f=1", "display_name": "kpaul ", "link": "https://stackoverflow.com/users/5241955/kpaul"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 676, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1453254142, "creation_date": 1447830917, "question_id": 33773895, "link": "https://stackoverflow.com/questions/33773895/possible-issues-with-the-rake-railsupdatebin-command", "title": "Possible issues with the rake rails:update:bin command", "body": "<p>I have had this issue and I have not been able to solve it. I have posted two questions prior to this. The problem is with the rails server (WEBrick). It was running fine in development. I installed a simple jquery-ui gem and ran <code>bundle install</code> and <code>bundle update</code> and the server stopped working. The error is given below.</p>\n\n<pre><code>Server Error    \n    warning: previous definition of APP_PATH was here\n    Error: Command '-b' not recognized\n    Usage: rails COMMAND [ARGS]\n</code></pre>\n\n<p>After doing further investigation, I realized that the way to fix this is updating bin, so I ran the command, <code>rake rails:update:bin</code>. This also gave me an error. The snippet of the error is given below.</p>\n\n<pre><code>rake aborted!\nLoadError: cannot load such file -- net/ssh\n\n/home/ubuntu/workspace/config/application.rb:7:in `&lt;top (required)&gt;'\n/home/ubuntu/workspace/Rakefile:4:in `&lt;top (required)&gt;'\n</code></pre>\n\n<p>I figured that if I could fix the rake command issue, I could potentially run the command and fix the server problem. I tried looking for solution on the web, however, they were focused towards MySQL database. I run sqlite3 version 1.3.9 in development. I have looked for potential reasons why <code>rake rails:update:bin</code> command would fail and give me that error but I haven't found a clear answer. I have never changed any of the code in the <code>config/bin</code> directory. Everything looks normal.</p>\n\n<p>I have been trying to debug the this problem for the past two days. I have had no luck. I have tried to un-install gems such as spring and PostgreSQL and installed them again to see if they causing any problems. Not the problem. I have read almost every suggestion on the web. None of them really have the same issue as mine. If anyone can help me figure this problem out, It would be a great deal of help. Any documentation, posts or anything that can help me solve the problem would be highly appreciated. I hope I made myself clear and included all the relevant information, I tried to keep it concise. If any additional detail is needed, please do let me know. Again, any help would be appreciated. Thanks!!!</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 6689, "user_id": 273444, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/26988136c0514172417b7c7c863733f2?s=128&d=identicon&r=PG", "display_name": "Alexey Shein", "link": "https://stackoverflow.com/users/273444/alexey-shein"}, "edited": false, "score": 2, "creation_date": 1447830358, "post_id": 33773702, "comment_id": 55314290, "body": "What is <code>points</code>? Is it a number (i.e. you want to sort users depending on their points) or is it a collection of objects (a Point model for example)?"}, {"owner": {"reputation": 2212, "user_id": 4803039, "user_type": "registered", "accept_rate": 96, "profile_image": "https://lh3.googleusercontent.com/-MmbDSCFLpd8/AAAAAAAAAAI/AAAAAAAAADg/2jruEOH8FM0/photo.jpg?sz=128", "display_name": "philip yoo", "link": "https://stackoverflow.com/users/4803039/philip-yoo"}, "edited": false, "score": 0, "creation_date": 1447830486, "post_id": 33773702, "comment_id": 55314346, "body": "Have you tried: <code>&lt;% @users.sort.each do |user| %&gt;</code> ? Also, another way would be to use a helper method to sort however way you want it sorted, create a separate variable in your controller to store this sorted element, and use that variable in your view like you have above but instead <code>&lt;% @sorted_users.each do |user| %&gt;</code>"}, {"owner": {"user_type": "does_not_exist", "display_name": "user5245636"}, "edited": false, "score": 0, "creation_date": 1447830682, "post_id": 33773702, "comment_id": 55314435, "body": "what error did it shows? Is points is a model or it is just a column of user model?"}, {"owner": {"reputation": 1528, "user_id": 1616697, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Pwa5t.jpg?s=128&g=1", "display_name": "Lahiru", "link": "https://stackoverflow.com/users/1616697/lahiru"}, "edited": false, "score": 0, "creation_date": 1447830782, "post_id": 33773702, "comment_id": 55314471, "body": "Can you post some details on this? like the controller, and error you getting?"}, {"owner": {"reputation": 24729, "user_id": 2564200, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/a92dfcc9fcac72dabd4b1eefa0b5106e?s=128&d=identicon&r=PG&f=1", "display_name": "Santhosh", "link": "https://stackoverflow.com/users/2564200/santhosh"}, "edited": false, "score": 0, "creation_date": 1447831045, "post_id": 33773702, "comment_id": 55314570, "body": "If points is a column in user&#39;s table, you can do this in your controller <code>@users = User.order(&#39;points desc&#39;)</code>"}, {"owner": {"reputation": 17, "user_id": 5006444, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/09fff79fa4a1db0a325375631807419f?s=128&d=identicon&r=PG&f=1", "display_name": "Victor Lara ", "link": "https://stackoverflow.com/users/5006444/victor-lara"}, "edited": false, "score": 0, "creation_date": 1447832289, "post_id": 33773702, "comment_id": 55315149, "body": "sorry I  didn&#39;t give enough info . I thought i gave enough to answer my simple question. My question has been answered , though."}], "answers": [{"comments": [{"owner": {"reputation": 17, "user_id": 5006444, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/09fff79fa4a1db0a325375631807419f?s=128&d=identicon&r=PG&f=1", "display_name": "Victor Lara ", "link": "https://stackoverflow.com/users/5006444/victor-lara"}, "edited": false, "score": 0, "creation_date": 1447832073, "post_id": 33773907, "comment_id": 55315040, "body": "this gave me this : #&lt;User::ActiveRecord_Relation:0x007fd4a54513a8&gt;"}], "tags": [], "owner": {"reputation": 6584, "user_id": 1831520, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/QFRGt.jpg?s=128&g=1", "display_name": "sadaf2605", "link": "https://stackoverflow.com/users/1831520/sadaf2605"}, "is_accepted": false, "score": 1, "last_activity_date": 1447830964, "creation_date": 1447830964, "answer_id": 33773907, "question_id": 33773702, "link": "https://stackoverflow.com/questions/33773702/sorting-in-rails-app/33773907#33773907", "title": "Sorting in rails app", "body": "<p>You can go for:</p>\n\n<pre><code>&lt;% @users.sort_by{|u| u.points}.each do |user| %&gt;\n&lt;li&gt; &lt;%= user.points%&gt;&lt;/li&gt;\n&lt;%end%&gt;\n</code></pre>\n\n<p>Or you can go for:</p>\n\n<pre><code>@users=User.order(:points)\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 17, "user_id": 5006444, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/09fff79fa4a1db0a325375631807419f?s=128&d=identicon&r=PG&f=1", "display_name": "Victor Lara ", "link": "https://stackoverflow.com/users/5006444/victor-lara"}, "edited": false, "score": 1, "creation_date": 1447832190, "post_id": 33773977, "comment_id": 55315097, "body": "thanks alot! this helped. it was exactly what i needed!"}, {"owner": {"reputation": 9602, "user_id": 3607136, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/NRFso.jpg?s=128&g=1", "display_name": "Gagan Gami", "link": "https://stackoverflow.com/users/3607136/gagan-gami"}, "reply_to_user": {"reputation": 17, "user_id": 5006444, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/09fff79fa4a1db0a325375631807419f?s=128&d=identicon&r=PG&f=1", "display_name": "Victor Lara ", "link": "https://stackoverflow.com/users/5006444/victor-lara"}, "edited": false, "score": 0, "creation_date": 1447832902, "post_id": 33773977, "comment_id": 55315419, "body": "@VictorLara : glad to help you :)"}], "tags": [], "owner": {"reputation": 9602, "user_id": 3607136, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/NRFso.jpg?s=128&g=1", "display_name": "Gagan Gami", "link": "https://stackoverflow.com/users/3607136/gagan-gami"}, "is_accepted": true, "score": 0, "last_activity_date": 1447831804, "last_edit_date": 1447831804, "creation_date": 1447831192, "answer_id": 33773977, "question_id": 33773702, "link": "https://stackoverflow.com/questions/33773702/sorting-in-rails-app/33773977#33773977", "title": "Sorting in rails app", "body": "<p>Try this:</p>\n\n<pre><code>&lt;% @users.sort_by{|u| u.points}.reverse.each do |user| %&gt;\n  &lt;li&gt; &lt;%= user.points%&gt;&lt;/li&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p><strong>Note:</strong> I have used <code>reverese</code> as you have mentioned <code>I want to sort the points in descending order.</code> But It's always good practise to assign data to object  in controller as per your requirement.</p>\n\n<p>Do it in controller like:</p>\n\n<pre><code>@users = User.order(points: :desc) # this will fetch users in descending order on basis of points\n</code></pre>\n\n<p>then in view simply use:</p>\n\n<pre><code>&lt;% @users.each do |user| %&gt;\n  &lt;li&gt; &lt;%= user.points%&gt;&lt;/li&gt;\n&lt;%end%&gt;\n</code></pre>\n\n<p>for more info regarding <strong><a href=\"http://apidock.com/rails/ActiveRecord/QueryMethods/order\" rel=\"nofollow\">Order</a></strong></p>\n"}, {"tags": [], "owner": {"reputation": 899, "user_id": 5246692, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/eiKat.jpg?s=128&g=1", "display_name": "Ben Hawker", "link": "https://stackoverflow.com/users/5246692/ben-hawker"}, "is_accepted": false, "score": 0, "last_activity_date": 1447833485, "creation_date": 1447833485, "answer_id": 33774506, "question_id": 33773702, "link": "https://stackoverflow.com/questions/33773702/sorting-in-rails-app/33774506#33774506", "title": "Sorting in rails app", "body": "<p>The documentation for Active Record .order is what you need.</p>\n\n<p><a href=\"http://apidock.com/rails/ActiveRecord/QueryMethods/order\" rel=\"nofollow\">http://apidock.com/rails/ActiveRecord/QueryMethods/order</a></p>\n\n<p>For example:</p>\n\n<pre><code>  User.order(:points) \n</code></pre>\n\n<p>would provide you with users ordered by points. Do the ordering from your controller rather in your view. </p>\n"}], "owner": {"reputation": 17, "user_id": 5006444, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/09fff79fa4a1db0a325375631807419f?s=128&d=identicon&r=PG&f=1", "display_name": "Victor Lara ", "link": "https://stackoverflow.com/users/5006444/victor-lara"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 53, "favorite_count": 0, "accepted_answer_id": 33773977, "answer_count": 3, "score": -2, "last_activity_date": 1447833485, "creation_date": 1447830129, "last_edit_date": 1447830542, "question_id": 33773702, "link": "https://stackoverflow.com/questions/33773702/sorting-in-rails-app", "title": "Sorting in rails app", "body": "<p>I created an app that gives points to students. I want to sort the points in descending order. This is my code.</p>\n\n<pre><code>&lt;% @users.each do |user| %&gt;\n&lt;li&gt; &lt;%= user.points%&gt;&lt;/li&gt;\n&lt;%end%&gt;\n</code></pre>\n\n<p>This code outputs the points from each student, but when I try to add <code>sort!</code> after <code>user.points</code>, it gives me an error. I am not sure where I should do this.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "zlib"], "comments": [{"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 1, "creation_date": 1447974853, "post_id": 33773416, "comment_id": 55398014, "body": "Why is this a Nokogiri or XML problem? Your code doesn&#39;t reference Nokogiri at all, you just want to eventually parse XML using Nokogiri. Don&#39;t throw every tag you can think of into a question, only the ones that are directly involved."}], "owner": {"reputation": 223, "user_id": 5027587, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-hCHUdg3zOgM/AAAAAAAAAAI/AAAAAAAAAF0/ST47jmB0kX8/photo.jpg?sz=128", "display_name": "Elmiya Agnes", "link": "https://stackoverflow.com/users/5027587/elmiya-agnes"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 50, "favorite_count": 0, "closed_date": 1447979541, "answer_count": 0, "score": 2, "last_activity_date": 1447974920, "creation_date": 1447829013, "last_edit_date": 1447974920, "question_id": 33773416, "link": "https://stackoverflow.com/questions/33773416/nomemoryerror-negative-re-allocation-size-while-unzipping-large-xml-gz-files", "closed_reason": "Duplicate", "title": "NoMemoryError: negative re-allocation size while unzipping large XML (.gz) files", "body": "<p>In my Rails application, I wanted to gunzip a group of XML files I downloaded from an FTP server.</p>\n\n<p>Each XML file is associated with a merchant and consists of product details. I am trying to unzip each file using <code>GzipReader</code> and then want to parse it with <code>Nokogiri::XML::SAX::Document</code>. </p>\n\n<p>The \"gz\" files are of variable sizes and I was able to unzip files of sizes around 140 MB, but when the file is larger (~428 MB), the application is throwing this error:</p>\n\n<pre><code>cj_unzipping.rb:10:in `read': negative re-allocation size (NoMemoryError)\nfrom cj_unzipping.rb:10:in `block in &lt;main&gt;'\n</code></pre>\n\n<p>I read \"<a href=\"https://stackoverflow.com/questions/10838475/why-do-i-get-a-nokogiri-crash-and-memoryerror-negative-re-allocation-size\">Why do I get a Nokogiri crash and MemoryError: negative re-allocation size?</a>\", but there is lot of space left in my disk.</p>\n\n<pre><code>require 'rubygems'\nrequire 'zlib'\n\nZlib::GzipReader.open(\"/home/elmiya/project/mywebapp/cj1.xml.gz\") { |gz|\n  g = File.new(\"/home/elmiya/project/mywebapp/cj1.xml\", \"w\")\n  g.write(gz.read)\n  g.close()\n}\n</code></pre>\n\n<p>the line <code>gz.read</code> creates the issue.</p>\n\n<p>I'm running:</p>\n\n<pre><code>Rails version: 4.0.2\nRuby version: 2.0.0p643\n</code></pre>\n\n<p>Can anyone please help me resolve this issue?</p>\n"}, {"tags": ["ruby", "regex"], "comments": [{"owner": {"reputation": 294955, "user_id": 20670, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/251f2449ffba9fbcc3491db6564ff4a2?s=128&d=identicon&r=PG", "display_name": "Tim Pietzcker", "link": "https://stackoverflow.com/users/20670/tim-pietzcker"}, "edited": false, "score": 3, "creation_date": 1447828703, "post_id": 33773292, "comment_id": 55313597, "body": "What exactly is making those brackets special that they should be matched? Is it the <code>!</code> before them? Is it the fact that they are corresponding opening/closing brackets? Could those brackets be nested more deeply?"}, {"owner": {"reputation": 74843, "user_id": 2988730, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/ZOX7t.jpg?s=128&g=1", "display_name": "Mad Physicist", "link": "https://stackoverflow.com/users/2988730/mad-physicist"}, "edited": false, "score": 0, "creation_date": 1447828743, "post_id": 33773292, "comment_id": 55313612, "body": "What flavor of regex?"}, {"owner": {"reputation": 2747, "user_id": 3182836, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7iDyf.png?s=128&g=1", "display_name": "binarysubstrate", "link": "https://stackoverflow.com/users/3182836/binarysubstrate"}, "edited": false, "score": 0, "creation_date": 1447828767, "post_id": 33773292, "comment_id": 55313621, "body": "We need to know what &quot;flavor&quot; of <a href=\"https://en.m.wikipedia.org/wiki/Comparison_of_regular_expression_engines\" rel=\"nofollow noreferrer\">regex</a> you&#39;re using."}, {"owner": {"reputation": 3678, "user_id": 145536, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/9e92c681072b514fb360a0b01c0f5ea7?s=128&d=identicon&r=PG", "display_name": "Allen Liu", "link": "https://stackoverflow.com/users/145536/allen-liu"}, "edited": false, "score": 0, "creation_date": 1447828789, "post_id": 33773292, "comment_id": 55313628, "body": "Yes, it&#39;s the <code>!</code> before the brackets that makes it special."}, {"owner": {"reputation": 3678, "user_id": 145536, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/9e92c681072b514fb360a0b01c0f5ea7?s=128&d=identicon&r=PG", "display_name": "Allen Liu", "link": "https://stackoverflow.com/users/145536/allen-liu"}, "edited": false, "score": 0, "creation_date": 1447828813, "post_id": 33773292, "comment_id": 55313635, "body": "Not sure what flavor it&#39;s in but it&#39;s for RoR. (rails 3.2, ruby 2.2)"}, {"owner": {"reputation": 6043, "user_id": 5290909, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2a34788cb69a6f3007f88e3a36a590ca?s=128&d=identicon&r=PG", "display_name": "Mariano", "link": "https://stackoverflow.com/users/5290909/mariano"}, "edited": false, "score": 0, "creation_date": 1447830522, "post_id": 33773292, "comment_id": 55314364, "body": "@AllenLiu you should tag your question with the programming language. For example, the <code>&#47;m</code> modifier has a very different meaning in Ruby (this regex would not match newlines in any other flavor)"}, {"owner": {"reputation": 3678, "user_id": 145536, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/9e92c681072b514fb360a0b01c0f5ea7?s=128&d=identicon&r=PG", "display_name": "Allen Liu", "link": "https://stackoverflow.com/users/145536/allen-liu"}, "reply_to_user": {"reputation": 6043, "user_id": 5290909, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2a34788cb69a6f3007f88e3a36a590ca?s=128&d=identicon&r=PG", "display_name": "Mariano", "link": "https://stackoverflow.com/users/5290909/mariano"}, "edited": false, "score": 0, "creation_date": 1447830581, "post_id": 33773292, "comment_id": 55314389, "body": "@Mariano - Done! Thanks."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1447879216, "post_id": 33773292, "comment_id": 55346859, "body": "Suppose instead of <code>![](&#47;some&#47;path)</code> it were <code>![cat](&#47;some&#47;path)</code> or <code>![text: cat](&#47;some&#47;path)</code>.  What would you want returned in those cases?"}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1447895059, "post_id": 33773292, "comment_id": 55353780, "body": "That&#39;s helpful. Is it <code>![](&#47;&#39;</code> or <code>![](&#39;</code> that determines whether it&#39;s a match?"}], "answers": [{"tags": [], "owner": {"reputation": 1584, "user_id": 2947203, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/3c5c548803537f4c91d02f259afc009b?s=128&d=identicon&r=PG&f=1", "display_name": "Mayur Koshti", "link": "https://stackoverflow.com/users/2947203/mayur-koshti"}, "is_accepted": false, "score": 0, "last_activity_date": 1447829015, "creation_date": 1447829015, "answer_id": 33773419, "question_id": 33773292, "link": "https://stackoverflow.com/questions/33773292/how-to-find-text-within-brackets-with-some-exceptions-by-regular-expressions/33773419#33773419", "title": "How to find text within brackets with some exceptions by regular expressions?", "body": "<p>I think you should try the following regex:</p>\n\n<pre><code>^\\[(text:.*?(?&lt;!\\[))\\]\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 1, "creation_date": 1447840978, "post_id": 33773560, "comment_id": 55320449, "body": "If you don&#39;t use <code>.</code> in the regex, you don&#39;t need the <code>m</code> identifier."}, {"owner": {"reputation": 294955, "user_id": 20670, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/251f2449ffba9fbcc3491db6564ff4a2?s=128&d=identicon&r=PG", "display_name": "Tim Pietzcker", "link": "https://stackoverflow.com/users/20670/tim-pietzcker"}, "reply_to_user": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1447842034, "post_id": 33773560, "comment_id": 55321253, "body": "@sawa: Ah, the <code>ruby</code> tag was added after my answer. Luckily, the meaning of <code>^</code> is unambiguous in Ruby :)"}], "tags": [], "owner": {"reputation": 294955, "user_id": 20670, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/251f2449ffba9fbcc3491db6564ff4a2?s=128&d=identicon&r=PG", "display_name": "Tim Pietzcker", "link": "https://stackoverflow.com/users/20670/tim-pietzcker"}, "is_accepted": true, "score": 6, "last_activity_date": 1447829944, "last_edit_date": 1447829944, "creation_date": 1447829530, "answer_id": 33773560, "question_id": 33773292, "link": "https://stackoverflow.com/questions/33773292/how-to-find-text-within-brackets-with-some-exceptions-by-regular-expressions/33773560#33773560", "title": "How to find text within brackets with some exceptions by regular expressions?", "body": "<p>OK, so you want to allow either</p>\n\n<ul>\n<li>a character that's not a bracket or</li>\n<li>the sequence <code>![]</code></li>\n</ul>\n\n<p>between the starting and ending bracket. This gives you the regex</p>\n\n<pre><code>/^\\[(text:[^\\[\\]]*(?:!\\[\\][^\\[\\]]*)*)\\]/mi\n</code></pre>\n\n<p><strong>Explanation:</strong></p>\n\n<pre class=\"lang-none prettyprint-override\"><code>^           # Start of line\n\\[          # Match [\n(           # Start of capturing group\n text:      # Match text:\n [^\\[\\]]*   # Match any number of characters except [ or ]\n (?:        # Optional non-capturing group:\n  !\\[\\]     #  Match ![]\n  [^\\[\\]]*  #  Match any number of characters except [ or ]\n )*         # Repeat as needed (0 times is OK)\n)           # End of capturing group\n\\]          # Match ]\n</code></pre>\n\n<p>Test it <a href=\"https://regex101.com/r/pA6sI4/1\">live on regex101.com</a>.</p>\n"}, {"comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1447887905, "post_id": 33773621, "comment_id": 55351332, "body": "Clever! Note that <code>\\s*</code> doesn&#39;t add anything. If you write the regex in extended mode (see my answer) you don&#39;t have to repeat yourself (recognizing that extended mode cannot always be used)."}, {"owner": {"reputation": 2747, "user_id": 3182836, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7iDyf.png?s=128&g=1", "display_name": "binarysubstrate", "link": "https://stackoverflow.com/users/3182836/binarysubstrate"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1447889811, "post_id": 33773621, "comment_id": 55352034, "body": "Nice; I use verbose Python for documentation/readability, but wasn&#39;t sure how to do it in Ruby. And good point about the unnecessary <code>\\s*</code>--I&#39;ve updated my answer."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1447894866, "post_id": 33773621, "comment_id": 55353726, "body": "Don&#39;t forget that SO members are not notified of comments directed to them if the member&#39;s name is not in the comment (e.g., @CarySwoveland or just @Cary)."}], "tags": [], "owner": {"reputation": 2747, "user_id": 3182836, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7iDyf.png?s=128&g=1", "display_name": "binarysubstrate", "link": "https://stackoverflow.com/users/3182836/binarysubstrate"}, "is_accepted": false, "score": 3, "last_activity_date": 1447889675, "last_edit_date": 1447889675, "creation_date": 1447829732, "answer_id": 33773621, "question_id": 33773292, "link": "https://stackoverflow.com/questions/33773292/how-to-find-text-within-brackets-with-some-exceptions-by-regular-expressions/33773621#33773621", "title": "How to find text within brackets with some exceptions by regular expressions?", "body": "<p>I've used a <a href=\"http://ruby-doc.org/core-2.1.0/Regexp.html\" rel=\"nofollow\">negative lookbehind</a> in this regex to assert that a closing bracket doesn't immediately follow an opening bracket:</p>\n\n<pre><code>^\\[(text:.+?)(?&lt;!\\[)\\]\n</code></pre>\n\n<p>Here's the walk-through.</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>^           # Start of line anchor.\n\\[          # Match opening bracket '['\n(           # Start capturing group 1. \ntext:       # Match 'text:'\n.+?         # Match any character one or more times lazily.\n)           # End capturing group 1. \n(?&lt;!        # Begin negative lookbehind.\n\\[          # '[' must not preceed the next match.\n)           # End negative lookbehind.\n\\]          # Match closing bracket.\n</code></pre>\n\n<p>Here's a <a href=\"http://rubular.com/r/nNGElegJr5\" rel=\"nofollow\">demo</a>.</p>\n"}, {"tags": [], "owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "is_accepted": false, "score": 3, "last_activity_date": 1447832706, "creation_date": 1447832706, "answer_id": 33774329, "question_id": 33773292, "link": "https://stackoverflow.com/questions/33773292/how-to-find-text-within-brackets-with-some-exceptions-by-regular-expressions/33774329#33774329", "title": "How to find text within brackets with some exceptions by regular expressions?", "body": "<p>I don't understand how the new line character is relevant to what you describe, so I removed <code>^</code>.</p>\n\n<pre><code>/\\[(text:(?:[^\\[\\]]|!\\[\\][/\\w]+)+)\\]/i\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": false, "score": 4, "last_activity_date": 1447895551, "last_edit_date": 1447895551, "creation_date": 1447886667, "answer_id": 33791902, "question_id": 33773292, "link": "https://stackoverflow.com/questions/33773292/how-to-find-text-within-brackets-with-some-exceptions-by-regular-expressions/33791902#33791902", "title": "How to find text within brackets with some exceptions by regular expressions?", "body": "<p>You can use your regex, slightly modified and simplified.</p>\n\n<pre><code>str =&lt;&lt;_\n[text: here is my text that is\ncaptured within the brackets\nand also includes ![](/some/path)]\nand other stuff\n_\n\nr = /\n    ^       # match beginning of string\n    \\[text: # match string\n    .+?     # match one or more characters lazily\n    \\]      # match right bracket\n   /imx      # case indifferent (i), multiline (m) and extended/free-spacing (x) modes\n\nPLACEHOLDER = 0.chr\nSUBSTITUTE_OUT = '![](/'\n\nputs str.gsub(SUBSTITUTE_OUT, PLACEHOLDER).\n  scan(r).\n  map { |s| s.gsub(PLACEHOLDER, SUBSTITUTE_OUT) }\n\n[text: here is my text that is\ncaptured within the brackets\nand also includes ![](/some/path)]\n</code></pre>\n\n<p>Note that, in the regex, <code>\\s*.+?\\s*</code> is the same as <code>.+?</code> and (as @sawa noted) you could replace <code>.+?</code> with <code>[^\\]]+</code> in which case you would not need multiline mode.</p>\n\n<p>Edit: I updated <code>SUBSTITUTE_OUT</code> in light of the OP's edit of the question. This illustrates one advantage of this approach: the regex is not affected by changes to the inner matching text. </p>\n"}], "owner": {"reputation": 3678, "user_id": 145536, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/9e92c681072b514fb360a0b01c0f5ea7?s=128&d=identicon&r=PG", "display_name": "Allen Liu", "link": "https://stackoverflow.com/users/145536/allen-liu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 292, "favorite_count": 0, "accepted_answer_id": 33773560, "answer_count": 5, "score": 10, "last_activity_date": 1447895551, "creation_date": 1447828513, "last_edit_date": 1447891039, "question_id": 33773292, "link": "https://stackoverflow.com/questions/33773292/how-to-find-text-within-brackets-with-some-exceptions-by-regular-expressions", "title": "How to find text within brackets with some exceptions by regular expressions?", "body": "<p>I have a regex <code>/^\\[(text:\\s*.+?\\s*)\\]/mi</code> that currently works in capturing text in brackets that begin with <code>text:</code>. Here is an example where it works:</p>\n\n<pre><code>[text: here is my text that is\ncaptured within the brackets.]\n</code></pre>\n\n<p>Now, I would like to add an exception so that it allows certain brackets like in the case below:</p>\n\n<pre><code>[text: here is my text that is\ncaptured within the brackets\nand also include ![](/some/path)]\n</code></pre>\n\n<p>Basically, I need it to allow the <code>![](/some/path)</code> brackets in the match. </p>\n\n<p>Any help would be greatly appreciated. Thanks.</p>\n\n<p><strong>Update:</strong></p>\n\n<p>Here are some cases where the text inside the brackets should be matched:</p>\n\n<pre><code>[text: here is my text that is\ncaptured within the brackets\nand also include ![](/some/path)]\n\n[text: here is my text that is\ncaptured within the brackets\nand also include ![](/some/path) and some more text]\n\n[text: ![](/some/path)]\n\n![text: cat]\n</code></pre>\n\n<p>Here are some cases where it should not match:</p>\n\n<pre><code>[text: here is my text that is\ncaptured within the brackets\nand also include ![invalid syntax](/some/path)]\n\n[text: here is my text that is\ncaptured within the brackets\nand also include ![] (/some/path)]\n\n[text: here is my text that is\ncaptured within the brackets\nand also include ! [](/some/path)]\n\n[text: here is my text that is\ncaptured within the brackets\nand also include ! [] (/some/path)]\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-3", "ruby-on-rails-4", "google-calendar-api"], "comments": [{"owner": {"reputation": 2278, "user_id": 3728916, "user_type": "registered", "accept_rate": 49, "profile_image": "https://i.stack.imgur.com/Zmke4.jpg?s=128&g=1", "display_name": "ImranNaqvi", "link": "https://stackoverflow.com/users/3728916/imrannaqvi"}, "edited": false, "score": 0, "creation_date": 1447830445, "post_id": 33773284, "comment_id": 55314330, "body": "can you post your intializer file where you specified the <code>customer_key</code> and <code>customer_secret</code> for google developer console"}, {"owner": {"reputation": 384, "user_id": 3062270, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/1985ce4a2b8afa4ed3f9813bd4b7ef34?s=128&d=identicon&r=PG&f=1", "display_name": "sreenivas", "link": "https://stackoverflow.com/users/3062270/sreenivas"}, "reply_to_user": {"reputation": 2278, "user_id": 3728916, "user_type": "registered", "accept_rate": 49, "profile_image": "https://i.stack.imgur.com/Zmke4.jpg?s=128&g=1", "display_name": "ImranNaqvi", "link": "https://stackoverflow.com/users/3728916/imrannaqvi"}, "edited": false, "score": 0, "creation_date": 1447830621, "post_id": 33773284, "comment_id": 55314408, "body": "{&quot;web&quot;:{&quot;client_id&quot;:&quot;myclientid&quot;,&quot;auth_uri&quot;:&quot;<a href=\"https://accounts.google.com/o/oauth2/auth&quot;,&quot;token_uri&quot;:&quot;https://accounts.google.com/o/oauth2/token&quot;,&quot;auth_provider_x509_cert_url&quot;:&quot;https://www.googleapis.com/oauth2/v1/certs&quot;,&quot;client_secret&quot;:&quot;myclientsecret&quot;,&quot;redirect_uris&quot;:[&quot;http://localhost:3000&quot;,&quot;https://localhost:3000&quot;],&quot;javascript_origins&quot;:[&quot;http://localhost:3000&quot;,&quot;https://localhost:3000&quot;]\" rel=\"nofollow noreferrer\">accounts.google&zwnj;&#8203;.com/o/oauth2/&hellip;</a>}}"}, {"owner": {"reputation": 9602, "user_id": 3607136, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/NRFso.jpg?s=128&g=1", "display_name": "Gagan Gami", "link": "https://stackoverflow.com/users/3607136/gagan-gami"}, "edited": false, "score": 0, "creation_date": 1447837731, "post_id": 33773284, "comment_id": 55318120, "body": "@priya : Can you try by run your server on port 9292 by <code>rails s -p 9292</code> and change in google console accordingly and check that works for you or not? I guess there is <code>DNS</code> or <code>NAT</code> issue"}, {"owner": {"reputation": 70965, "user_id": 1841839, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/ZyKjr.png?s=128&g=1", "display_name": "DaImTo", "link": "https://stackoverflow.com/users/1841839/daimto"}, "edited": false, "score": 0, "creation_date": 1447838921, "post_id": 33773284, "comment_id": 55318942, "body": "in Google developer console add http:/ /localhost  remove the port."}, {"owner": {"reputation": 384, "user_id": 3062270, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/1985ce4a2b8afa4ed3f9813bd4b7ef34?s=128&d=identicon&r=PG&f=1", "display_name": "sreenivas", "link": "https://stackoverflow.com/users/3062270/sreenivas"}, "reply_to_user": {"reputation": 70965, "user_id": 1841839, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/ZyKjr.png?s=128&g=1", "display_name": "DaImTo", "link": "https://stackoverflow.com/users/1841839/daimto"}, "edited": false, "score": 0, "creation_date": 1447839526, "post_id": 33773284, "comment_id": 55319402, "body": "@DaImTo tried still redirect uri issue using port 9292 again"}, {"owner": {"reputation": 384, "user_id": 3062270, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/1985ce4a2b8afa4ed3f9813bd4b7ef34?s=128&d=identicon&r=PG&f=1", "display_name": "sreenivas", "link": "https://stackoverflow.com/users/3062270/sreenivas"}, "reply_to_user": {"reputation": 9602, "user_id": 3607136, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/NRFso.jpg?s=128&g=1", "display_name": "Gagan Gami", "link": "https://stackoverflow.com/users/3607136/gagan-gami"}, "edited": false, "score": 0, "creation_date": 1447839596, "post_id": 33773284, "comment_id": 55319451, "body": "@GaganGami tried it before it wont workout"}, {"owner": {"reputation": 70965, "user_id": 1841839, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/ZyKjr.png?s=128&g=1", "display_name": "DaImTo", "link": "https://stackoverflow.com/users/1841839/daimto"}, "edited": false, "score": 0, "creation_date": 1447840215, "post_id": 33773284, "comment_id": 55319891, "body": "Then add http:// localhost:9292/  The redirect uri on google developers console must match the URI you are sending it from."}], "answers": [{"comments": [{"owner": {"reputation": 384, "user_id": 3062270, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/1985ce4a2b8afa4ed3f9813bd4b7ef34?s=128&d=identicon&r=PG&f=1", "display_name": "sreenivas", "link": "https://stackoverflow.com/users/3062270/sreenivas"}, "edited": false, "score": 0, "creation_date": 1447831540, "post_id": 33773900, "comment_id": 55314794, "body": "can you please mention your redirect uri which you gave in google developer console"}, {"owner": {"reputation": 384, "user_id": 3062270, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/1985ce4a2b8afa4ed3f9813bd4b7ef34?s=128&d=identicon&r=PG&f=1", "display_name": "sreenivas", "link": "https://stackoverflow.com/users/3062270/sreenivas"}, "edited": false, "score": 0, "creation_date": 1447831971, "post_id": 33773900, "comment_id": 55314980, "body": "where should i mention this                Provider :google_oauth2, &#39;customer_key&#39;, &#39;my_sec&#39; , {:scope =&gt; &#39;email,profile&#39; }"}, {"owner": {"reputation": 2278, "user_id": 3728916, "user_type": "registered", "accept_rate": 49, "profile_image": "https://i.stack.imgur.com/Zmke4.jpg?s=128&g=1", "display_name": "ImranNaqvi", "link": "https://stackoverflow.com/users/3728916/imrannaqvi"}, "reply_to_user": {"reputation": 384, "user_id": 3062270, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/1985ce4a2b8afa4ed3f9813bd4b7ef34?s=128&d=identicon&r=PG&f=1", "display_name": "sreenivas", "link": "https://stackoverflow.com/users/3062270/sreenivas"}, "edited": false, "score": 0, "creation_date": 1447832088, "post_id": 33773900, "comment_id": 55315051, "body": "in your <code>config&#47;initializer&#47;omniauth.rb</code> . You have to create <code>omniauth.rb</code> if not yet created"}, {"owner": {"reputation": 2278, "user_id": 3728916, "user_type": "registered", "accept_rate": 49, "profile_image": "https://i.stack.imgur.com/Zmke4.jpg?s=128&g=1", "display_name": "ImranNaqvi", "link": "https://stackoverflow.com/users/3728916/imrannaqvi"}, "reply_to_user": {"reputation": 384, "user_id": 3062270, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/1985ce4a2b8afa4ed3f9813bd4b7ef34?s=128&d=identicon&r=PG&f=1", "display_name": "sreenivas", "link": "https://stackoverflow.com/users/3062270/sreenivas"}, "edited": false, "score": 0, "creation_date": 1447833175, "post_id": 33773900, "comment_id": 55315564, "body": "@priya did you figured it out ? I also updated my answer"}], "tags": [], "owner": {"reputation": 2278, "user_id": 3728916, "user_type": "registered", "accept_rate": 49, "profile_image": "https://i.stack.imgur.com/Zmke4.jpg?s=128&g=1", "display_name": "ImranNaqvi", "link": "https://stackoverflow.com/users/3728916/imrannaqvi"}, "is_accepted": false, "score": 0, "last_activity_date": 1447832292, "last_edit_date": 1447832292, "creation_date": 1447830939, "answer_id": 33773900, "question_id": 33773284, "link": "https://stackoverflow.com/questions/33773284/google-calendar-api-redirect-uri-mismatch/33773900#33773900", "title": "Google calendar api, redirect uri mismatch", "body": "<p>I ran in the same problem and unfortunately wasted my 4 hours on that silly problem , as i see that you're using <code>gem \"omniauth-google-oauth2\"</code> actually there is no scope defined , you need to add scope otherwise it will keep misleading you . I used keys in intializer like below<br><br>\n<code>Provider :google_oauth2, 'customer_key', 'my_sec' , {:scope =&gt; 'email,profile' }</code></p>\n\n<p>and update your <code>gem file</code> like below</p>\n\n<p><code>gem 'omniauth-oauth2', '~&gt; 1.3.1'</code></p>\n\n<p><code>gem \"omniauth-google-oauth2\"</code></p>\n\n<p><strong>Update</strong></p>\n\n<p><code>origin Url -&gt; http://localhost:3000</code></p>\n\n<p><code>callback Url-&gt; http://localhost:3000/auth/google_oauth2/callback</code></p>\n\n<p><code>routes.rb -&gt;  get \"auth/:provider/callback\", to: 'registration#create_session'</code></p>\n"}, {"tags": [], "owner": {"reputation": 320, "user_id": 5153500, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oB2ln.jpg?s=128&g=1", "display_name": "Semih Sezer", "link": "https://stackoverflow.com/users/5153500/semih-sezer"}, "is_accepted": false, "score": 0, "last_activity_date": 1448066257, "creation_date": 1448066257, "answer_id": 33838328, "question_id": 33773284, "link": "https://stackoverflow.com/questions/33773284/google-calendar-api-redirect-uri-mismatch/33838328#33838328", "title": "Google calendar api, redirect uri mismatch", "body": "<p>Just an addition to @ImranNaqvi's answer; when I ran 'bundle install' after changing the version of omniauth-oauth2, the terminal complained that my omniauth-oauth2 is locked at version 1.4.0. If this happens, you will need to go into the gem.lock file (not gem list) and change the omniauth-oauth2 version to 1.3.1. Then 'bundle install'.</p>\n"}], "owner": {"reputation": 384, "user_id": 3062270, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/1985ce4a2b8afa4ed3f9813bd4b7ef34?s=128&d=identicon&r=PG&f=1", "display_name": "sreenivas", "link": "https://stackoverflow.com/users/3062270/sreenivas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 238, "favorite_count": 1, "answer_count": 2, "score": 1, "last_activity_date": 1448066257, "creation_date": 1447828495, "last_edit_date": 1447838447, "question_id": 33773284, "link": "https://stackoverflow.com/questions/33773284/google-calendar-api-redirect-uri-mismatch", "title": "Google calendar api, redirect uri mismatch", "body": "<p>i was trying to integrate google calendar api for my ruby application, in google developer console i gave my redirect uri</p>\n\n<p><code>http://localhost:3000</code> </p>\n\n<p><code>http://localhost:3000/auth/google_oauth2/callback</code> </p>\n\n<pre><code>400. That\u2019s an error.\n</code></pre>\n\n<p>Error: redirect_uri_mismatch</p>\n\n<pre><code>redirect_uri=http://localhost:9292/\n</code></pre>\n\n<p>it keep getting port 9292 even though i mention 3000</p>\n\n<p>i have followed these link \n <a href=\"https://developers.google.com/google-apps/calendar/quickstart/ruby\" rel=\"nofollow\">ruby quickstart from google</a></p>\n"}, {"tags": ["ruby-on-rails", "ruby", "if-statement", "syntax", "coding-style"], "comments": [{"owner": {"reputation": 2575, "user_id": 891359, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/4926014a83c1d25207953e5e585556cb?s=128&d=identicon&r=PG", "display_name": "bo-oz", "link": "https://stackoverflow.com/users/891359/bo-oz"}, "edited": false, "score": 1, "creation_date": 1447829180, "post_id": 33773281, "comment_id": 55313782, "body": "Have a look at the Builder Pattern: <a href=\"http://rorandme.blogspot.nl/2012/02/some-simple-design-patterns-in-ruby.html\" rel=\"nofollow noreferrer\">rorandme.blogspot.nl/2012/02/&hellip;</a>"}, {"owner": {"reputation": 175, "user_id": 4235045, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh5.googleusercontent.com/--pI_4FHL7Yg/AAAAAAAAAAI/AAAAAAAAAAw/C6_QYNUVEXs/photo.jpg?sz=128", "display_name": "Robin Garg", "link": "https://stackoverflow.com/users/4235045/robin-garg"}, "edited": false, "score": 0, "creation_date": 1447829303, "post_id": 33773281, "comment_id": 55313831, "body": "Just try to use below:         if internet? &amp;&amp; cable_tv? return internet_and_cable_tv_sentence"}], "answers": [{"tags": [], "owner": {"reputation": 1814, "user_id": 2119317, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/65e386ab94962682b0abd72463670e23?s=128&d=identicon&r=PG", "display_name": "Pardeep Saini", "link": "https://stackoverflow.com/users/2119317/pardeep-saini"}, "is_accepted": false, "score": 3, "last_activity_date": 1447830683, "last_edit_date": 1447830683, "creation_date": 1447828752, "answer_id": 33773348, "question_id": 33773281, "link": "https://stackoverflow.com/questions/33773281/ruby-if-statement-how-to-avoid-multiple-elsif-statements-including-not/33773348#33773348", "title": "Ruby if statement - how to avoid multiple elsif statements including not", "body": "<p>You can use</p>\n\n<pre><code>def generate\n  return internet_and_cable_tv_sentence if internet? &amp;&amp; cable_tv? \n  return internet_and_tv_sentence if internet? &amp;&amp; tv? &amp;&amp; !cable_tv? \n  return internet_sentence if internet? &amp;&amp; !tv? &amp;&amp; !cable_tv? \nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "is_accepted": true, "score": 3, "last_activity_date": 1447832619, "creation_date": 1447832619, "answer_id": 33774310, "question_id": 33773281, "link": "https://stackoverflow.com/questions/33773281/ruby-if-statement-how-to-avoid-multiple-elsif-statements-including-not/33774310#33774310", "title": "Ruby if statement - how to avoid multiple elsif statements including not", "body": "<p>I would argue that some of the conditions are useless. For example you test for <code>!cable_tv?</code> in the second condition, but if <code>cable_tv?</code> was <code>true</code> then the first condition would have been <code>true</code>alreday. Similar situation in the last condition. </p>\n\n<p>Furthermore you check for <code>internet?</code> in every condition. One check upfront would be more efficient.</p>\n\n<p>I would rewrite the block to something like: </p>\n\n<pre><code>def generate\n  return unless internet? \n\n  case\n  when cable_tv? then internet_and_cable_tv_sentence\n  when tv?       then internet_and_tv_sentence\n  else                internet_sentence\n  end\nend\n</code></pre>\n\n<p>Note that I prefer a <code>case when</code> blocks over a <code>if elsif</code> blocks for readablity reasons</p>\n"}], "owner": {"reputation": 899, "user_id": 5246692, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/eiKat.jpg?s=128&g=1", "display_name": "Ben Hawker", "link": "https://stackoverflow.com/users/5246692/ben-hawker"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1718, "favorite_count": 0, "accepted_answer_id": 33774310, "answer_count": 2, "score": 2, "last_activity_date": 1447832619, "creation_date": 1447828473, "question_id": 33773281, "link": "https://stackoverflow.com/questions/33773281/ruby-if-statement-how-to-avoid-multiple-elsif-statements-including-not", "title": "Ruby if statement - how to avoid multiple elsif statements including not", "body": "<p>I am creating a piece of functionality to auto generate descriptions based on attributes I have on properties (in a Rails app).</p>\n\n<p>I have created a series of service classes to handle this - here is </p>\n\n<pre><code>class RoomDescriptionGeneratorInternetTV &lt;  RoomDescriptionGeneratorBase\n\n  def generate\n    if internet? &amp;&amp; cable_tv?\n      internet_and_cable_tv_sentence\n    elsif internet? &amp;&amp; tv? &amp;&amp; !cable_tv?\n      internet_and_tv_sentence\n    elsif internet? &amp;&amp; !tv? &amp;&amp; !cable_tv?\n      internet_sentence\n    end\n  end\n\n  private\n\n  def internet?\n    room.internet (#refers to an active record column in the room model)\n  end\n\n  def cable_tv?\n    room.cable_tv\n  end\n\n  def tv?\n    room.tv\n  end\n\n  # The sentences are then held in the locales for translation purposes.\n  def internet_sentence\n    t(\"internet\")\n  end\n\n  def internet_and_tv_sentence\n    t(\"internet_and_tv\")\n  end\n\n  def internet_and_cable_tv_sentence\n    t(\"internet_and_cable_tv\")\n  end\n</code></pre>\n\n<p>The the purpose of this code is to generate sentence which reads \"This property has [internet], and [cable TV], [TV]\" if of course these property has these attributes. The use of this sentence and the instantuation of this class however happens in a separate Service Object using: </p>\n\n<pre><code>class RoomDescriptionGenerator &lt; RoomDescriptionGeneratorBase\n  #Other code...\n\n  def internet_tv\n    RoomDescriptionGeneratorInternetTV.new(room,locale).generate\n  end\n\nend\n</code></pre>\n\n<p>The use if/elsif statments combined with not(!) just seems horrible. I am looking for clearer ways to refactor this to achieve my aim of generating the correct sentences based on the attributes.</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 9487, "user_id": 5572893, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Y0cqs.jpg?s=128&g=1", "display_name": "Long Nguyen", "link": "https://stackoverflow.com/users/5572893/long-nguyen"}, "edited": false, "score": 1, "creation_date": 1447828860, "post_id": 33773266, "comment_id": 55313647, "body": "What do you mean by &quot;security problem&quot;? As I know, <code>&lt;&lt;</code> (shovel) is faster and cost less memory compare to <code>+=</code> because shovel operator modifies the String object rather than creating a new String object (costing memory)."}, {"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1447830111, "post_id": 33773266, "comment_id": 55314183, "body": "You have two pretty much different questions."}, {"owner": {"reputation": 7565, "user_id": 1021515, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/Z9QcP.jpg?s=128&g=1", "display_name": "mwp", "link": "https://stackoverflow.com/users/1021515/mwp"}, "edited": false, "score": 0, "creation_date": 1447832069, "post_id": 33773266, "comment_id": 55315036, "body": "It&#39;s fine to mix them. I often do things like <code>foo + &quot;bar&quot; &lt;&lt; qux</code> when I want to build a string from parts but not mutate all of them and not create too many new string objects. Of course, it&#39;s usually better to just do <code>&quot;#{foo}bar#{qux}&quot;</code>."}, {"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "reply_to_user": {"reputation": 7565, "user_id": 1021515, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/Z9QcP.jpg?s=128&g=1", "display_name": "mwp", "link": "https://stackoverflow.com/users/1021515/mwp"}, "edited": false, "score": 0, "creation_date": 1447832283, "post_id": 33773266, "comment_id": 55315142, "body": "@mwp The question is not about mixing them. It is about replacing one with the other."}, {"owner": {"reputation": 7565, "user_id": 1021515, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/Z9QcP.jpg?s=128&g=1", "display_name": "mwp", "link": "https://stackoverflow.com/users/1021515/mwp"}, "reply_to_user": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1447832373, "post_id": 33773266, "comment_id": 55315190, "body": "Ah, I reread the question and I understand now. Thanks @sawa."}, {"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1447833564, "post_id": 33773266, "comment_id": 55315740, "body": "Your question is unclear. What kinds of security problems are you talking about? What is your threat model? Security is always relative to a threat model, it doesn&#39;t make sense to talk about security without a threat model. Also, what do you mean by using <code>+=</code> and <code>&lt;&lt;</code> interchangeably? They aren&#39;t interchangeable, they do different things!"}, {"owner": {"reputation": 1027, "user_id": 4036030, "user_type": "registered", "accept_rate": 40, "profile_image": "https://graph.facebook.com/100000007346996/picture?type=large", "display_name": "Zhiliang Xing", "link": "https://stackoverflow.com/users/4036030/zhiliang-xing"}, "reply_to_user": {"reputation": 9487, "user_id": 5572893, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Y0cqs.jpg?s=128&g=1", "display_name": "Long Nguyen", "link": "https://stackoverflow.com/users/5572893/long-nguyen"}, "edited": false, "score": 0, "creation_date": 1448171531, "post_id": 33773266, "comment_id": 55468360, "body": "@LongNguyen apologize for describe the question unclearly, my english is not perfect. the question is really about if I replace <code>+=</code> with <code>&lt;&lt;</code> or vice versa, except for speed difference and memory cost difference, is there any other difference? say if use <code>+=</code> all the time and never use <code>&lt;&lt;</code>, could I get bug?"}], "answers": [{"comments": [{"owner": {"reputation": 7565, "user_id": 1021515, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/Z9QcP.jpg?s=128&g=1", "display_name": "mwp", "link": "https://stackoverflow.com/users/1021515/mwp"}, "edited": false, "score": 0, "creation_date": 1447832128, "post_id": 33773760, "comment_id": 55315070, "body": "Can you elaborate on the security risk? Is there more to it than accidentally mutating the wrong variable and exposing the program to tainted data?"}], "tags": [], "owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "is_accepted": false, "score": 2, "last_activity_date": 1447830331, "creation_date": 1447830331, "answer_id": 33773760, "question_id": 33773266, "link": "https://stackoverflow.com/questions/33773266/will-it-cause-any-issue-if-i-use-and-interchangeably-for-string/33773760#33773760", "title": "Will it cause any issue if I use `&lt;&lt;` and `+=` interchangeably for string?", "body": "<p>Yes, string is mutable, but that is only by default. It can also be made immutable. In future versions of Ruby, strings may become immutable by default.</p>\n\n<p>Yes. Switching the two can cause security problems. In fact, not only that, but it can break the code and make it not work at all.</p>\n"}], "owner": {"reputation": 1027, "user_id": 4036030, "user_type": "registered", "accept_rate": 40, "profile_image": "https://graph.facebook.com/100000007346996/picture?type=large", "display_name": "Zhiliang Xing", "link": "https://stackoverflow.com/users/4036030/zhiliang-xing"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 54, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1448170955, "creation_date": 1447828407, "last_edit_date": 1448170955, "question_id": 33773266, "link": "https://stackoverflow.com/questions/33773266/will-it-cause-any-issue-if-i-use-and-interchangeably-for-string", "title": "Will it cause any issue if I use `&lt;&lt;` and `+=` interchangeably for string?", "body": "<p>I understand that a string being mutable means its value in the memory can be changed, and it being immutable means that not the value in the memory but only the reference can be changed.</p>\n\n<p>Based on the result of the following code:</p>\n\n<pre><code>a = \"foo\"\nb = \"bar\"\na.object_id # =&gt; 70218039369160\na &lt;&lt; b # =&gt; \"foobar\"\na.object_id # =&gt; 70218039369160\n</code></pre>\n\n<p>can I say that a string in Ruby is mutable because the value in the same memory changed?</p>\n\n<p>And the <code>+</code> method creates a new <code>String</code> object instead of changing its value:</p>\n\n<pre><code>a += b # =&gt; \"foobar\"\na.object_id # =&gt; 70218039184800\n</code></pre>\n\n<p>That's why the object id changed.</p>\n\n<p>Will it cause any issue except for efficiency issue if I use <code>+=</code> instead of <code>&lt;&lt;</code> or vice versa? if the answer is yes, please give me an example</p>\n"}, {"tags": ["jquery", "ruby-on-rails", "ruby", "popup"], "comments": [{"owner": {"reputation": 1133, "user_id": 4840615, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ObOwb.jpg?s=128&g=1", "display_name": "Gaurav Gupta", "link": "https://stackoverflow.com/users/4840615/gaurav-gupta"}, "edited": false, "score": 0, "creation_date": 1447828198, "post_id": 33773108, "comment_id": 55313371, "body": "Try to change &quot;$( &quot;.share a&quot; ).button().click(function()&quot; to &quot;$( &quot;.share a&quot; ).click(function()&quot;"}, {"owner": {"user_type": "does_not_exist", "display_name": "user5574945"}, "reply_to_user": {"reputation": 1133, "user_id": 4840615, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ObOwb.jpg?s=128&g=1", "display_name": "Gaurav Gupta", "link": "https://stackoverflow.com/users/4840615/gaurav-gupta"}, "edited": false, "score": 0, "creation_date": 1447828838, "post_id": 33773108, "comment_id": 55313645, "body": "Not working when I am clicking on it pop up is not opening"}, {"owner": {"reputation": 175, "user_id": 4235045, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh5.googleusercontent.com/--pI_4FHL7Yg/AAAAAAAAAAI/AAAAAAAAAAw/C6_QYNUVEXs/photo.jpg?sz=128", "display_name": "Robin Garg", "link": "https://stackoverflow.com/users/4235045/robin-garg"}, "edited": false, "score": 0, "creation_date": 1447829425, "post_id": 33773108, "comment_id": 55313871, "body": "Use this one:  $( &quot;body&quot; ).on(&quot;click&quot;, &quot;.share a&quot;, function() {...code...});"}, {"owner": {"user_type": "does_not_exist", "display_name": "user5574945"}, "edited": false, "score": 0, "creation_date": 1447829705, "post_id": 33773108, "comment_id": 55313999, "body": "not working still nothing is happening"}], "answers": [{"tags": [], "owner": {"reputation": 5695, "user_id": 5466575, "user_type": "registered", "accept_rate": 57, "profile_image": "https://lh5.googleusercontent.com/-HQWnjB6PMu0/AAAAAAAAAAI/AAAAAAAAAF0/JyBt49xzaLU/photo.jpg?sz=128", "display_name": "Neha Jain", "link": "https://stackoverflow.com/users/5466575/neha-jain"}, "is_accepted": false, "score": 0, "last_activity_date": 1447828323, "creation_date": 1447828323, "answer_id": 33773244, "question_id": 33773108, "link": "https://stackoverflow.com/questions/33773108/jquery-popup-not-opening-rails/33773244#33773244", "title": "Jquery popup not opening rails", "body": "<p>I think the way you implement the click event is wrong. Consider changing it to</p>\n\n<pre><code>$( \"body\" ).on(\"click\", \".share a\", function() {...\n</code></pre>\n\n<p>If you load content asynchronously, then default .click event will not work, you have to use .on method to bind the event to control you generated asynchronously</p>\n"}, {"comments": [{"owner": {"reputation": 175, "user_id": 4235045, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh5.googleusercontent.com/--pI_4FHL7Yg/AAAAAAAAAAI/AAAAAAAAAAw/C6_QYNUVEXs/photo.jpg?sz=128", "display_name": "Robin Garg", "link": "https://stackoverflow.com/users/4235045/robin-garg"}, "edited": false, "score": 0, "creation_date": 1447829980, "post_id": 33773556, "comment_id": 55314126, "body": "Just print the the alert(&quot;hello&quot;) message inside the code like:   $( &quot;body&quot; ).on(&quot;click&quot;, &quot;.share a&quot;, function() { alert(&#39;hello&#39;); });  check is it work or not."}, {"owner": {"user_type": "does_not_exist", "display_name": "user5574945"}, "edited": false, "score": 0, "creation_date": 1447830275, "post_id": 33773556, "comment_id": 55314257, "body": "let me show you my scripts which are there maybe there are conflicting"}, {"owner": {"reputation": 175, "user_id": 4235045, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh5.googleusercontent.com/--pI_4FHL7Yg/AAAAAAAAAAI/AAAAAAAAAAw/C6_QYNUVEXs/photo.jpg?sz=128", "display_name": "Robin Garg", "link": "https://stackoverflow.com/users/4235045/robin-garg"}, "edited": false, "score": 0, "creation_date": 1447830362, "post_id": 33773556, "comment_id": 55314291, "body": "okay. If alert message is not pop-up then for sure there is some confliction in your js files."}, {"owner": {"user_type": "does_not_exist", "display_name": "user5574945"}, "edited": false, "score": 0, "creation_date": 1447830421, "post_id": 33773556, "comment_id": 55314322, "body": "yeah so how can I can resolve that problem even I have posted my jquery files"}], "tags": [], "owner": {"reputation": 175, "user_id": 4235045, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh5.googleusercontent.com/--pI_4FHL7Yg/AAAAAAAAAAI/AAAAAAAAAAw/C6_QYNUVEXs/photo.jpg?sz=128", "display_name": "Robin Garg", "link": "https://stackoverflow.com/users/4235045/robin-garg"}, "is_accepted": false, "score": 0, "last_activity_date": 1447829513, "creation_date": 1447829513, "answer_id": 33773556, "question_id": 33773108, "link": "https://stackoverflow.com/questions/33773108/jquery-popup-not-opening-rails/33773556#33773556", "title": "Jquery popup not opening rails", "body": "<p>Use below code:</p>\n\n<pre><code>$( \"body\" ).on(\"click\", \".share a\", function() {...code...});\n</code></pre>\n\n<p>I hope it'll help you to solve your problem.</p>\n"}, {"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user5574945"}, "edited": false, "score": 0, "creation_date": 1447830339, "post_id": 33773757, "comment_id": 55314288, "body": "These are all of my scripts"}], "tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user5574945"}, "is_accepted": false, "score": 0, "last_activity_date": 1447830305, "creation_date": 1447830305, "answer_id": 33773757, "question_id": 33773108, "link": "https://stackoverflow.com/questions/33773108/jquery-popup-not-opening-rails/33773757#33773757", "title": "Jquery popup not opening rails", "body": "<pre><code>&lt;script src=\"/pipeline_assets/jquery.self-a714331225dda820228db323939889f149aec0127aeb06255646b616ba1ca419.js?body=1\"&gt;&lt;/script&gt;\n&lt;script src=\"/pipeline_assets/jquery_ujs.self-d456baa54c1fa6be2ec3711f0a72ddf7a5b2f34a6b4f515f33767d6207b7d4b3.js?body=1\"&gt;&lt;/script&gt;\n&lt;script src=\"/pipeline_assets/turbolinks.self-c37727e9bd6b2735da5c311aa83fead54ed0be6cc8bd9a65309e9c5abe2cbfff.js?body=1\"&gt;&lt;/script&gt;\n&lt;script src=\"/pipeline_assets/assets.self-877aef30ae1b040ab8a3aba4e3e309a11d7f2612f44dde450b5c157aa5f95c05.js?body=1\"&gt;&lt;/script&gt;\n&lt;script src=\"/pipeline_assets/controls.self-ab2e2fa469e30fcd7a69ff0fdf510bf7fd037396e9fb3e77c84af11b60aff548.js?body=1\"&gt;&lt;/script&gt;\n&lt;script src=\"/pipeline_assets/dragdrop.self-36431046ae5f9e21ecda6df33f8c0c4eb27662780cef6fca6f29c93ce550e00b.js?body=1\"&gt;&lt;/script&gt;\n&lt;script src=\"/pipeline_assets/effects.self-dd03ea45ac506c542f4130304d3f8a78ebcd0a10996add7a0896665d0a1a7346.js?body=1\"&gt;&lt;/script&gt;\n&lt;script src=\"/pipeline_assets/folders.self-877aef30ae1b040ab8a3aba4e3e309a11d7f2612f44dde450b5c157aa5f95c05.js?body=1\"&gt;&lt;/script&gt;\n&lt;script src=\"/pipeline_assets/jquery-1.4.4.min.self-4f26ef985d523b47553f38a0e8ff3084dbeb3d177a1df62ccf650ecd288d2c8f.js?body=1\"&gt;&lt;/script&gt;\n&lt;script src=\"/pipeline_assets/jquery-ui-1.8.9.custom.min.self-7ca2e56d842202968964bce8796efe4b122f989de0e317e9a8815a3721e36547.js?body=1\"&gt;&lt;/script&gt;\n&lt;script src=\"/pipeline_assets/jquery.rails.self-b53727dd8652853e07923b1d5c99755df923482448e4e0f869b988f51af34af0.js?body=1\"&gt;&lt;/script&gt;\n&lt;script src=\"/pipeline_assets/prototype.self-a25a23744532b0eed575efd9fe88f42d7f042ed73e3abdb0911748b63e217d5c.js?body=1\"&gt;&lt;/script&gt;\n&lt;script src=\"/pipeline_assets/rails.self-7fa7e1dfd72cae11fff2095dd6171afc6fafbfb76f4668873445883a71287dcc.js?body=1\"&gt;&lt;/script&gt;\n&lt;script src=\"/pipeline_assets/scriptaculous.self-6845f707fc3579647bbe9b48f10a86c8edc7a7f564af9a7465832a2577ec1fdd.js?body=1\"&gt;&lt;/script&gt;\n&lt;script src=\"/pipeline_assets/users.self-877aef30ae1b040ab8a3aba4e3e309a11d7f2612f44dde450b5c157aa5f95c05.js?body=1\"&gt;&lt;/script&gt;\n&lt;script src=\"/pipeline_assets/social-share-button.self-d1725d35699d974c9834cae2be205aae782d1dc63fe9d4cebcfce8146bf2e71a.js?body=1\"&gt;&lt;/script&gt;\n&lt;script src=\"/pipeline_assets/application.self-29d8065068110d1c25667fc41416f8a3216af60ecde3cb52fe0095c720578d84.js?body=1\"&gt;&lt;/script&gt; \n</code></pre>\n"}, {"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user5574945"}, "edited": false, "score": 0, "creation_date": 1447831278, "post_id": 33773931, "comment_id": 55314658, "body": "Sorry not working ..when I click on share in URL a # is embedded and nothing else happens"}, {"owner": {"reputation": 4497, "user_id": 1050875, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/3549436942ea890da97f41d1dbd3594f?s=128&d=identicon&r=PG", "display_name": "akbarbin", "link": "https://stackoverflow.com/users/1050875/akbarbin"}, "edited": false, "score": 0, "creation_date": 1447831777, "post_id": 33773931, "comment_id": 55314907, "body": "Can you put alert inside your javascript to check it works or not? Does it show the alert?"}, {"owner": {"reputation": 4497, "user_id": 1050875, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/3549436942ea890da97f41d1dbd3594f?s=128&d=identicon&r=PG", "display_name": "akbarbin", "link": "https://stackoverflow.com/users/1050875/akbarbin"}, "edited": false, "score": 0, "creation_date": 1447832665, "post_id": 33773931, "comment_id": 55315309, "body": "You can use this <code>$( &quot;.share a&quot; ).bind(&quot;click&quot;, function(){ &#47;&#47;your code });</code>. But before you implement this, you have to delete <code>open</code> div like my answer above. Then please show me the console browser error when it doesn&#39;t work."}, {"owner": {"user_type": "does_not_exist", "display_name": "user5574945"}, "edited": false, "score": 0, "creation_date": 1447836039, "post_id": 33773931, "comment_id": 55317028, "body": "I think some problem is in jquery files ...I have application.js  , assets.coffee , controls.js , dragdrop.js  effects.js , folders.coffee , jquery-1.4.4.min.js , jquery-ui-1.8.9.custom.min.js , jquery.rails.js , prototype.js , rails.js , scriptaculous.js , users.coffee"}, {"owner": {"user_type": "does_not_exist", "display_name": "user5574945"}, "edited": false, "score": 0, "creation_date": 1447837452, "post_id": 33773931, "comment_id": 55317938, "body": "hey now I am getting error in console actually I was viewing in mozilla but now in chrome     Uncaught controls.js requires including script.aculo.us&#39; effects.js library dragdrop.self-36431046ae5f9e21ecda6df33f8c0c4eb27662780cef6f&zwnj;&#8203;ca6f29c93ce550e00b.j&zwnj;&#8203;s:8 Uncaught ReferenceError: Effect is not defined"}, {"owner": {"user_type": "does_not_exist", "display_name": "user5574945"}, "edited": false, "score": 0, "creation_date": 1447837467, "post_id": 33773931, "comment_id": 55317951, "body": "Uncaught ReferenceError: Effect is not defined effects.self-dd03ea45ac506c542f4130304d3f8a78ebcd0a10996add7&zwnj;&#8203;a0896665d0a1a7346.js&zwnj;&#8203;?body=1:73 Uncaught ReferenceError: Prototype is not defined application.self-5514ec077808f549f621bf4aa6d9d9e73ddb9ead85f&zwnj;&#8203;c82fa757c7d9ce3fc32f&zwnj;&#8203;1.js:73 Uncaught SyntaxError: Unexpected token }"}], "tags": [], "owner": {"reputation": 4497, "user_id": 1050875, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/3549436942ea890da97f41d1dbd3594f?s=128&d=identicon&r=PG", "display_name": "akbarbin", "link": "https://stackoverflow.com/users/1050875/akbarbin"}, "is_accepted": false, "score": 0, "last_activity_date": 1447831041, "creation_date": 1447831041, "answer_id": 33773931, "question_id": 33773108, "link": "https://stackoverflow.com/questions/33773108/jquery-popup-not-opening-rails/33773931#33773931", "title": "Jquery popup not opening rails", "body": "<p>It seems like you have to change your class share into</p>\n\n<pre><code>$( \".share a\" )\n</code></pre>\n\n<p>into</p>\n\n<pre><code>$( \"#open a\" )\n</code></pre>\n\n<p>Or if you think that <code>div open</code> doesn't need, you can remove it because in it's nothing in the tutorial.</p>\n\n<pre><code>&lt;div class=\"share\"&gt;\n  &lt;%= link_to \"Share\" ,\"#\", :folder_id =&gt; folder.id, :folder_name =&gt; folder.name  %&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p>I hope this help you.</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user5574945"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 159, "favorite_count": 0, "answer_count": 4, "score": 0, "last_activity_date": 1447831041, "creation_date": 1447827766, "question_id": 33773108, "link": "https://stackoverflow.com/questions/33773108/jquery-popup-not-opening-rails", "title": "Jquery popup not opening rails", "body": "<p>I am trying to load pop up when I click on share link but it is not opening I don't know where I am making mistake\n<br/>\nI am following this tutorial and struck at step 12\n[<a href=\"http://code.tutsplus.com/tutorials/build-a-dropbox-like-file-sharing-site-with-ruby-on-rails--net-17940]\" rel=\"nofollow\">http://code.tutsplus.com/tutorials/build-a-dropbox-like-file-sharing-site-with-ruby-on-rails--net-17940]</a>\n<br/>\n [index.html.erb]</p>\n\n<pre><code>&lt;% unless user_signed_in? %&gt; \n   &lt;h1&gt;Welcome to ShareBox&lt;/h1&gt; \n   &lt;p&gt;File sharing web application you can't ignore.&lt;/p&gt; \n\n\n\n\n&lt;% else %&gt; \n   &lt;div id=\"menu\"&gt; \n       &lt;ul id= \"top_menu\"&gt;     \n\n\n\n      &lt;% if @current_folder %&gt;\n          &lt;li&gt;&lt;%= link_to \"Upload\", new_sub_file_path(@current_folder) %&gt;&lt;/li&gt;\n          &lt;li&gt;&lt;%= link_to \"New Folder\", new_sub_folder_path(@current_folder) %&gt;&lt;/li&gt;\n\n        &lt;% else %&gt;\n          &lt;li&gt;&lt;%= link_to \"Upload\", new_asset_path %&gt;&lt;/li&gt;\n          &lt;li&gt;&lt;%= link_to \"New Folder\", new_folder_path %&gt;&lt;/li&gt;\n        &lt;% end %&gt;   \n\n       &lt;/ul&gt; \n    &lt;/div&gt; \n\n        &lt;%= render :partial =&gt; \"breadcrumbs\" %&gt;\n\n   &lt;div class=\"asset_list_header\"&gt; \n       &lt;div class=\"file_name_header\"&gt;File Name&lt;/div&gt; \n       &lt;div class=\"file_size_header\"&gt;Size&lt;/div&gt; \n       &lt;div class=\"file_last_updated_header\"&gt;Modified&lt;/div&gt; \n   &lt;/div&gt; \n\n\n   &lt;div class=\"asset_list\"&gt; \n\n    &lt;!-- Listing Folders --&gt;\n&lt;% @folders.each do |folder| %&gt; \n\n  &lt;div class=\"asset_details folder\"&gt;     \n\n\n        &lt;div class=\"file_name\"&gt;&lt;%= link_to folder.name, browse_path(folder) %&gt;&lt;/div&gt; \n        &lt;div class=\"file_size\"&gt;-&lt;/div&gt; \n        &lt;div class=\"file_last_updated\"&gt;-&lt;/div&gt; \n        &lt;div class=\"action\"&gt; \n\n           &lt;div class=\"share\"&gt; \n                 &lt;div id=\"open\"&gt;\n\n            &lt;%= link_to \"Share\" ,\"#\", :folder_id =&gt; folder.id, :folder_name =&gt; folder.name  %&gt;\n            &lt;/div&gt;\n\n          &lt;/div&gt;\n\n            &lt;div class=\"rename\"&gt; \n                &lt;%= link_to \"Rename\", rename_folder_path(folder) %&gt; \n            &lt;/div&gt; \n            &lt;div class=\"delete\"&gt; \n\n\n               &lt;%= button_to 'destroy', folder_path(folder), :confirm =&gt; 'Are you sure to delete the folder and all of its contents?', :method=&gt;:delete %&gt;\n\n            &lt;/div&gt; \n        &lt;/div&gt; \n    &lt;/div&gt; \n&lt;% end %&gt;\n&lt;!-- listing files --&gt;      \n       &lt;% @assets.each do |asset| %&gt; \n       &lt;div class=\"asset_details file\"&gt; \n       &lt;div class=\"file_name\"&gt;&lt;%= link_to asset.file_name, download_url(asset) %&gt;&lt;/div&gt; \n       &lt;div class=\"file_size\"&gt;&lt;%= number_to_human_size(asset.file_size, :precision =&gt; 2) %&gt;&lt;/div&gt; \n       &lt;div class=\"file_last_updated\"&gt;&lt;%= asset.uploaded_file_updated_at %&gt;&lt;/div&gt; \n       &lt;div class=\"action\"&gt; \n           &lt;div class=\"download\"&gt; \n               &lt;%= link_to \"Download\" ,download_url(asset) %&gt; \n           &lt;/div&gt; \n           &lt;div class=\"delete\"&gt; \n\n                   &lt;%= button_to 'destroy', folder_path(asset), :confirm =&gt; 'Are you sure to delete the folder and all of its contents?', :method=&gt;:delete %&gt;\n           &lt;/div&gt; \n       &lt;/div&gt; \n   &lt;/div&gt; \n&lt;% end %&gt;\n\n   &lt;/div&gt; \n\n  &lt;div id=\"invitation_form\" title=\"Invite others to share\" style=\"display:none\"&gt;\n    &lt;% form_tag '/home/share' do -%&gt;\n        &lt;label for=\"email_addresses\"&gt;Enter recipient email addresses here&lt;/label&gt;&lt;br /&gt;\n        &lt;%= text_field_tag 'email_addresses', \"\", :class =&gt; 'text ui-widget-content ui-corner-all'%&gt;\n        &lt;br /&gt;&lt;br /&gt;\n        &lt;label for=\"message\"&gt;Optional message&lt;/label&gt;&lt;br /&gt;\n        &lt;%= text_area_tag 'message',\"\",  :class =&gt; 'text ui-widget-content ui-corner-all'%&gt;\n        &lt;%= hidden_field_tag \"folder_id\" %&gt;\n    &lt;% end -%&gt;        \n  &lt;/div&gt;\n\n&lt;% end %&gt;\n</code></pre>\n\n<p><br/>\n[home controller]</p>\n\n<pre><code>class HomeController &lt; ApplicationController \n\n  def index \n    if user_signed_in? \n     @folders = current_user.folders.roots        \n     @assets = current_user.assets.where(\"folder_id is NULL\").order(\"uploaded_file_file_name desc\")       \n    end\nend\n\n\n\ndef browse \n    #get the folders owned/created by the current_user \n    @current_folder = current_user.folders.find_by_id(params[:folder_id])   \n\n    if @current_folder\n\n      #getting the folders which are inside this @current_folder \n      @folders = @current_folder.children \n\n      #We need to fix this to show files under a specific folder if we are viewing that folder \n      @assets = current_user.assets.order(\"uploaded_file_file_name desc\") \n\n      render :action =&gt; \"index\"\n    else\n      flash[:error] = \"You cannot acces other ppl folder\"\n      redirect_to root_url \n    end\n\nend\nend\n</code></pre>\n\n<p><br/></p>\n\n<p>[application.js]</p>\n\n<pre><code>$(function () { \n    //open the invitation form when a share button is clicked\n    $( \".share a\" )\n            .button()\n            .click(function() {\n\n                //assign this specific Share link element into a variable called \"a\"\n                var a = this;\n\n                //First, set the title of the Dialog box to display the folder name\n                $(\"#invitation_form\").attr(\"title\", \"Share '\" + $(a).attr(\"folder_name\") + \"' with others\" );\n\n                //a hack to display the different folder names correctly\n                $(\"#ui-dialog-title-invitation_form\").text(\"Share '\" + $(a).attr(\"folder_name\") + \"' with others\"); \n\n                //then put the folder_id of the Share link into the hidden field \"folder_id\" of the invite form\n                $(\"#folder_id\").val($(a).attr(\"folder_id\"));\n\n\n                //the dialog box customization\n                $( \"#invitation_form\" ).dialog({\n                    height: 300,\n                    width: 600,\n                    modal: true,\n                    buttons: {\n                        //First button\n                        \"Share\": function() {\n                            //get the url to post the form data to\n                            var post_url = $(\"#invitation_form form\").attr(\"action\");\n\n                            //serialize the form data and post it the url with ajax\n                            $.post(post_url,$(\"#invitation_form form\").serialize(), null, \"script\");\n\n                            return false;\n                        },\n                        //Second button\n                        Cancel: function() {\n                            $( this ).dialog( \"close\" );\n                        }\n                    },\n                    close: function() {\n\n                    }\n                });\n\n                return false;\n            });\n});\n</code></pre>\n"}, {"tags": ["ruby", "require", "opalrb"], "answers": [{"tags": [], "owner": {"reputation": 979, "user_id": 601782, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c82630c82a3c675d2928804f432fcf17?s=128&d=identicon&r=PG", "display_name": "Elia Schito", "link": "https://stackoverflow.com/users/601782/elia-schito"}, "is_accepted": true, "score": 1, "last_activity_date": 1447837841, "creation_date": 1447837841, "answer_id": 33775803, "question_id": 33773098, "link": "https://stackoverflow.com/questions/33773098/how-and-where-does-the-require-table-variable-get-stored-opalrb/33775803#33775803", "title": "How and where does the `require_table` variable get stored? (OpalRb)", "body": "<p>The require table is defined <a href=\"https://github.com/opal/opal/blob/36c0a36730c08a388da9b9a3fa1b680257b89f3a/opal/corelib/runtime.js#L1700\" rel=\"nofollow\">here</a> and yes, the runtime is reloaded when the browser is reloaded. That's normal as the whole HTML page starts from scratch reloading all of its assets and thus reloading Opal and its dependencies too. </p>\n\n<p>It's impossible anyway to persist live objects through requests, the best you can do is to persist some data (e.g. with <code>localStorage</code>) but of course that has nothing to do with loaded libs and can at best be used to save requests (don't do that! or you would re-invent HTTP cache).</p>\n"}], "owner": {"reputation": 1798, "user_id": 2636454, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/FyyQr.png?s=128&g=1", "display_name": "GDP2", "link": "https://stackoverflow.com/users/2636454/gdp2"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 35, "favorite_count": 0, "accepted_answer_id": 33775803, "answer_count": 1, "score": 0, "last_activity_date": 1447837841, "creation_date": 1447827711, "question_id": 33773098, "link": "https://stackoverflow.com/questions/33773098/how-and-where-does-the-require-table-variable-get-stored-opalrb", "title": "How and where does the `require_table` variable get stored? (OpalRb)", "body": "<p>So, I was recently reading through the <a href=\"https://github.com/opal/opal/blob/master/opal/corelib/runtime.js#L1696-L1780\" rel=\"nofollow\">require system of OpalRb</a>, and came across the interesting <code>require_table</code> variable. Reading through the methods there, it's clear that <code>require_table</code> is used to see whether a file has already been loaded or not, for methods like <code>require</code> or <code>loaded</code>. But, I'm not sure how or where this variable gets stored. Wouldn't the <code>opal/corelib/runtime.js</code> file just get reloaded once the browser reloads the page, thus resetting <code>require_table</code>'s value? I guess I'm just trying to better understand how <code>require</code> works with the dynamics of a browser.</p>\n"}, {"tags": ["ruby", "puts"], "answers": [{"tags": [], "owner": {"reputation": 2212, "user_id": 4803039, "user_type": "registered", "accept_rate": 96, "profile_image": "https://lh3.googleusercontent.com/-MmbDSCFLpd8/AAAAAAAAAAI/AAAAAAAAADg/2jruEOH8FM0/photo.jpg?sz=128", "display_name": "philip yoo", "link": "https://stackoverflow.com/users/4803039/philip-yoo"}, "is_accepted": false, "score": 1, "last_activity_date": 1447829275, "creation_date": 1447829275, "answer_id": 33773490, "question_id": 33773069, "link": "https://stackoverflow.com/questions/33773069/preferred-style-for-displaying-multiple-lines-using-puts/33773490#33773490", "title": "Preferred style for displaying multiple lines using `puts`", "body": "<p>TL;DR preference and readability</p>\n\n<p>I've scoured the following ruby style guides:</p>\n\n<p><a href=\"https://github.com/styleguide/ruby\" rel=\"nofollow\">Ruby Style Guide</a></p>\n\n<p><a href=\"https://github.com/bbatsov/ruby-style-guide\" rel=\"nofollow\">bbatsov's Ruby Style Guide</a></p>\n\n<p>Neither of them mention any specific or preferred method of printing multiple puts statements.</p>\n\n<p>I think it's both situational and preferential. What is more readable in the situation? If you have several long puts statements as simply strings, split them into separate puts statements on several lines. </p>\n\n<pre><code>puts \"Something very longgggggggggggg\"\nputs \"Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an...\"\nputs  \"unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets containing...\"\n</code></pre>\n\n<p>If you have for some reason stored your separate statements in variables, just puts them all on a single line: <code>puts this, that, thing</code>.</p>\n\n<p>For storing puts statements in a method, it might be convenient for times you want to print several lines out in the console. For example, when making a program where the user would interact and use with via the terminal, you might want to store certain statements within a method and on users call, print them out (i.e. Printing out instructions, or printing out available commands).</p>\n"}, {"comments": [{"owner": {"reputation": 1164, "user_id": 1288869, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/o0Ced.jpg?s=128&g=1", "display_name": "Tony DiNitto", "link": "https://stackoverflow.com/users/1288869/tony-dinitto"}, "edited": false, "score": 2, "creation_date": 1447859874, "post_id": 33774031, "comment_id": 55334175, "body": "It may be helpful for others to know that <code>unindent</code> appears to be a Ruby gem that needs to be installed before this style can work."}], "tags": [], "owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "is_accepted": true, "score": 4, "last_activity_date": 1447831433, "last_edit_date": 1495539870, "creation_date": 1447831433, "answer_id": 33774031, "question_id": 33773069, "link": "https://stackoverflow.com/questions/33773069/preferred-style-for-displaying-multiple-lines-using-puts/33774031#33774031", "title": "Preferred style for displaying multiple lines using `puts`", "body": "<p>If the lines to be printed are short enough to be put together on a single line in the source, then I would go with your first option:</p>\n\n<pre><code>puts \"This\", \"is\", \"fairly\", \"easy\"\n</code></pre>\n\n<p>If they are long, then I would use a heredoc:</p>\n\n<pre><code>puts &lt;&lt;_.unindent\n  This Blah Blah ...\n  Seems Blah Blah ...\n  Straightforward. Blah Blah ...\n_\n</code></pre>\n\n<p>where <code>unindent</code> is a method to unindent an indented heredoc along the lines suggested in <a href=\"https://stackoverflow.com/questions/3350648/ruby-indented-multiline-strings\">Ruby indented multiline strings</a>. Notice that in future versions of Ruby, it is likely that there will be a simpler way to unindent a heredoc, so this option will become more useful.</p>\n\n<p>I see no point in using your second or fourth option. The third may be used, but it looks ugly.</p>\n"}], "owner": {"reputation": 1164, "user_id": 1288869, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/o0Ced.jpg?s=128&g=1", "display_name": "Tony DiNitto", "link": "https://stackoverflow.com/users/1288869/tony-dinitto"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 471, "favorite_count": 0, "accepted_answer_id": 33774031, "answer_count": 2, "score": 2, "last_activity_date": 1447831433, "creation_date": 1447827560, "last_edit_date": 1447830810, "question_id": 33773069, "link": "https://stackoverflow.com/questions/33773069/preferred-style-for-displaying-multiple-lines-using-puts", "title": "Preferred style for displaying multiple lines using `puts`", "body": "<p>I know there are several different ways of being able to combine <code>puts</code> statements into one. But more importantly, I'm trying to determine if there's a generally accepted/preferred style for this (I've only been able to dig up other people's clever ways of doing it, but no real reference on a preferred style).</p>\n\n<p>I've seen things like this:</p>\n\n<pre><code>puts \"This\", \"is\", \"fairly\", \"easy\"  # Each word goes on it's own line\n</code></pre>\n\n<p>or perhaps: </p>\n\n<pre><code>puts [\"This\", \"seems\", \"convoluted\"].join(\"\\n\") # Each word goes on it's own line\n</code></pre>\n\n<p>or an \"ugly\" way: </p>\n\n<pre><code>  def ugly_puts\n    puts \"Not using quotes\nAnd using no code indentation to preserve output formatting\"\n  end\n</code></pre>\n\n<p>or simply: </p>\n\n<pre><code>puts \"This\"\nputs \"Seems\" \nputs \"Straightforward.\"\n</code></pre>\n\n<p>It makes most sense for me to use the last methodology, but I'm just curious if there's a common/preferred way I should go about dealing with multiple line output like this.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "web-scraping", "nokogiri"], "comments": [{"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1447975347, "post_id": 33772255, "comment_id": 55398202, "body": "When asking, show us what you are receiving and explain why it&#39;s wrong. Don&#39;t show us only code. Without an example and explanation of why the output is wrong we&#39;re left guessing, based on experience of what is useful for us."}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 3015386, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/40d6129add54036f61d079a5915da0d9?s=128&d=identicon&r=PG&f=1", "display_name": "user3015386", "link": "https://stackoverflow.com/users/3015386/user3015386"}, "edited": false, "score": 0, "creation_date": 1447883589, "post_id": 33772352, "comment_id": 55349379, "body": "Thanks for your timely response."}], "tags": [], "owner": {"reputation": 167912, "user_id": 240443, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/495d675e3bc42ed1dee469e2ce701f1b?s=128&d=identicon&r=PG", "display_name": "Amadan", "link": "https://stackoverflow.com/users/240443/amadan"}, "is_accepted": false, "score": 0, "last_activity_date": 1447823970, "creation_date": 1447823970, "answer_id": 33772352, "question_id": 33772255, "link": "https://stackoverflow.com/questions/33772255/trouble-receiving-properly-formatted-result-using-nokogiri/33772352#33772352", "title": "Trouble receiving properly formatted result using Nokogiri", "body": "<p>In the first case, the result should be the single <code>dl</code>; you are getting a single block of text. That is expected.</p>\n\n<p>In the second case, the result should be two individual <code>dt</code> elements. You are printing their text one after another, which is indistinguishable from printing the text of the <code>dl</code>.</p>\n\n<pre><code>doc.css('.target &gt; dl').length\n# =&gt; 1 # as you have one `dl` element in `.target`\n\ndoc.css('.target &gt; dl &gt; dt').length\n# =&gt; 2 # as you have two `dt` elements that are children of a `dl` in `.target`\n\ndoc.css(\".target &gt; dl &gt; dt\").each do |item|\n  puts item.text\n  puts \"---\" # make it obvious which element is which\nend\n# =&gt; A:\n#    ---\n#    B:\n#    ---\n</code></pre>\n\n<p>I am not quite sure what other result you are expecting.</p>\n"}, {"tags": [], "owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "is_accepted": false, "score": 0, "last_activity_date": 1493058401, "last_edit_date": 1495540015, "creation_date": 1447975722, "answer_id": 33816285, "question_id": 33772255, "link": "https://stackoverflow.com/questions/33772255/trouble-receiving-properly-formatted-result-using-nokogiri/33816285#33816285", "title": "Trouble receiving properly formatted result using Nokogiri", "body": "<p>I'd use something like:</p>\n\n<pre><code>require 'nokogiri'\n\ndoc = Nokogiri::HTML(&lt;&lt;EOT)\n&lt;div class=\"target\"&gt;\n  &lt;dl&gt;\n    &lt;dt&gt;A:&lt;/dt&gt;\n    &lt;dd&gt;foo&lt;/dd&gt; \n    &lt;dt&gt;B:&lt;/dt&gt;\n    &lt;dd&gt;bar&lt;/dd&gt;\n  &lt;/dl&gt;\n&lt;/div&gt;\nEOT\n</code></pre>\n\n<p>This finds the first <code>class='target'</code>, then its contained <code>&lt;dt&gt;</code> tags, and extracts each <code>&lt;dt&gt;</code>'s text:</p>\n\n<pre><code>doc.at('.target').search('dt').map{ |n| n.text } # =&gt; [\"A:\", \"B:\"]\n</code></pre>\n\n<p>This does the same only passing the <code>text</code> to <code>map</code> as shorthand:</p>\n\n<pre><code>doc.at('.target').search('dt').map(&amp;:text) # =&gt; [\"A:\", \"B:\"]\n</code></pre>\n\n<p>This lets the engine find all <code>&lt;dt&gt;</code> embedded in all <code>class=\"target\"</code> tags:</p>\n\n<pre><code>doc.search('.target dt').map(&amp;:text) # =&gt; [\"A:\", \"B:\"]\n</code></pre>\n\n<p>See \"<a href=\"https://stackoverflow.com/questions/43594656/how-to-avoid-joining-all-text-from-nodes-when-scraping\">How to avoid joining all text from Nodes when scraping</a>\" also.</p>\n"}], "owner": {"reputation": 1, "user_id": 3015386, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/40d6129add54036f61d079a5915da0d9?s=128&d=identicon&r=PG&f=1", "display_name": "user3015386", "link": "https://stackoverflow.com/users/3015386/user3015386"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 36, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1493058401, "creation_date": 1447823477, "last_edit_date": 1447975133, "question_id": 33772255, "link": "https://stackoverflow.com/questions/33772255/trouble-receiving-properly-formatted-result-using-nokogiri", "title": "Trouble receiving properly formatted result using Nokogiri", "body": "<p>I am moving some of my scraping from JavaScript to Ruby, and I am having trouble using Nokogiri.</p>\n\n<p>I have trouble getting the right <code>&lt;dl&gt;</code> in a target class. I tried using <code>css</code> and <code>xpath</code> with the same result.</p>\n\n<p>This is a sample of the HTML:</p>\n\n<pre><code>&lt;div class=\"target\"&gt;\n  &lt;dl&gt;\n    &lt;dt&gt;A:&lt;/dt&gt;\n    &lt;dd&gt;foo&lt;/dd&gt; \n    &lt;dt&gt;B:&lt;/dt&gt;\n    &lt;dd&gt;bar&lt;/dd&gt;\n  &lt;/dl&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p>This is a sample of my code:</p>\n\n<pre><code>require 'rubygems'\nrequire 'nokogiri'\nrequire 'open-uri'\n\ndoc = Nokogiri::HTML(open(url))\ndoc.css(\".target &gt; dl\").each do |item|\n  puts item.text # I would expect to receive a collection of nodes here,\n                  # yet I am receiving a single block of text\nend\n\ndoc.css(\".target &gt; dl &gt; dt\").each do |item|\n  puts item.text # Here I would expect to iterate through a collection of\n                  # dt elements, however I receive a single block of text\nend\n</code></pre>\n\n<p>Can someone show me what I am doing wrong?        </p>\n"}, {"tags": ["mysql", "ruby", "macos", "osx-elcapitan", "ruby-on-rails-4.2"], "comments": [{"owner": {"reputation": 6970, "user_id": 1620792, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/473ae99ae56cd2ab4bd238ecb74e919b?s=128&d=identicon&r=PG", "display_name": "iankit", "link": "https://stackoverflow.com/users/1620792/iankit"}, "edited": false, "score": 0, "creation_date": 1453456745, "post_id": 33772047, "comment_id": 57619187, "body": "I am facing the same issue immediately after upgrading to El Captain. Not sure why apple hasnt fixed the issue yet. Even after upgrading mysql and MySQL-python via pip the issue persists."}], "answers": [{"comments": [{"owner": {"reputation": 5272, "user_id": 1745902, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/a629f4656cabd0433729ab0c6523cedd?s=128&d=identicon&r=PG", "display_name": "Askar", "link": "https://stackoverflow.com/users/1745902/askar"}, "edited": false, "score": 0, "creation_date": 1447903143, "post_id": 33777477, "comment_id": 55355939, "body": "I did some update on my post you might be interested in... ;)"}, {"owner": {"reputation": 196, "user_id": 3424361, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9GG62.jpg?s=128&g=1", "display_name": "Valmiky Arquissandas", "link": "https://stackoverflow.com/users/3424361/valmiky-arquissandas"}, "edited": false, "score": 0, "creation_date": 1461772329, "post_id": 33777477, "comment_id": 61353788, "body": "For future reference, I got to this thread due to similar problems in Python and pip, and this solution also worked (pip uninstall MySQL-python &amp;&amp; pip install MySQL-python)."}, {"owner": {"reputation": 396, "user_id": 751756, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/28a292b3b588b0818326d839e499cdf4?s=128&d=identicon&r=PG", "display_name": "Sukeerthi Adiga", "link": "https://stackoverflow.com/users/751756/sukeerthi-adiga"}, "edited": false, "score": 0, "creation_date": 1512388515, "post_id": 33777477, "comment_id": 82223162, "body": "If there is only one version of the mysql installed, then re installing is only the solution."}], "tags": [], "owner": {"reputation": 1704, "user_id": 3723506, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/wHveY.jpg?s=128&g=1", "display_name": "Rashmirathi", "link": "https://stackoverflow.com/users/3723506/rashmirathi"}, "is_accepted": true, "score": 53, "last_activity_date": 1479439728, "last_edit_date": 1479439728, "creation_date": 1447842275, "answer_id": 33777477, "question_id": 33772047, "link": "https://stackoverflow.com/questions/33772047/el-capitan-upgrade-library-not-loaded-usr-local-lib-libmysqlclient-18-dylib/33777477#33777477", "title": "El Capitan upgrade: Library not loaded: /usr/local/lib/libmysqlclient.18.dylib", "body": "<p>I was getting the same issue earlier on, I fixed it by reinstalling the gem <code>mysql2</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 437, "user_id": 5579081, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-Pvtx5uNZwsY/AAAAAAAAAAI/AAAAAAAAAd8/Q5CcsjLLhbQ/photo.jpg?sz=128", "display_name": "Jorge I. Casta&#241;eda M.", "link": "https://stackoverflow.com/users/5579081/jorge-i-casta%c3%b1eda-m"}, "is_accepted": false, "score": 42, "last_activity_date": 1447894932, "creation_date": 1447894932, "answer_id": 33793481, "question_id": 33772047, "link": "https://stackoverflow.com/questions/33772047/el-capitan-upgrade-library-not-loaded-usr-local-lib-libmysqlclient-18-dylib/33793481#33793481", "title": "El Capitan upgrade: Library not loaded: /usr/local/lib/libmysqlclient.18.dylib", "body": "<p>this will solve your problem:</p>\n\n<pre><code>gem pristine mysql2\n</code></pre>\n\n<blockquote>\n  <p>solution by <a href=\"http://mailto:cesar@castamic.com\">Cesar Sulbar\u00e1n</a></p>\n</blockquote>\n"}, {"tags": [], "owner": {"reputation": 689, "user_id": 4409186, "user_type": "registered", "accept_rate": 38, "profile_image": "https://lh3.googleusercontent.com/-M_x58hCBTVU/AAAAAAAAAAI/AAAAAAAAqJw/sdHmd03mFwc/photo.jpg?sz=128", "display_name": "erikdstock", "link": "https://stackoverflow.com/users/4409186/erikdstock"}, "is_accepted": false, "score": 1, "last_activity_date": 1448388211, "last_edit_date": 1448388211, "creation_date": 1448387904, "answer_id": 33900640, "question_id": 33772047, "link": "https://stackoverflow.com/questions/33772047/el-capitan-upgrade-library-not-loaded-usr-local-lib-libmysqlclient-18-dylib/33900640#33900640", "title": "El Capitan upgrade: Library not loaded: /usr/local/lib/libmysqlclient.18.dylib", "body": "<p>Just want to chime in here- I just had the same problem with the libmysqlclient.18.dylib 18-20 difference. reinstalling the <code>mysql</code> gem (a dependency of the <code>activerecord-mysql-adapter</code>) made the difference. reinstalling <code>mysql2</code> did nothing.</p>\n\n<p>editing to clarify: my error message traced back to my mysql gem, but i found this thread via searching so i'm including it here:</p>\n\n<pre><code>Please install the mysql adapter: `gem install activerecord-mysql-adapter` (dlopen(/Users/eriks/.rvm/gems/ruby-2.1.4/gems/mysql-2.9.1/lib/mysql/mysql_api.bundle, 9): \nLibrary not loaded: /usr/local/lib/libmysqlclient.18.dylib \nReferenced from: /Users/eriks/.rvm/gems/ruby-2.1.4/gems/mysql-2.9.1/lib/mysql/mysql_api.bundle\nReason: image not found - /Users/eriks/.rvm/gems/ruby-2.1.4/gems/mysql-2.9.1/lib/mysql/mysql_api.bundle) (LoadError)\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 358, "user_id": 3165623, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/uh4Tf.jpg?s=128&g=1", "display_name": "arsenyinfo", "link": "https://stackoverflow.com/users/3165623/arsenyinfo"}, "edited": false, "score": 4, "creation_date": 1455986575, "post_id": 34818634, "comment_id": 58741412, "body": "Relevant lib is installed as <code>pip install MySQL-python</code>. However <code>--upgrade</code> didn&#39;t work for me as I had latest version of the lib which has been broken for some reason. Combination uninstall + install worked for me."}, {"owner": {"reputation": 2284, "user_id": 685109, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8644f2f9a593344059da4b58fb3c6222?s=128&d=identicon&r=PG", "display_name": "Esteban", "link": "https://stackoverflow.com/users/685109/esteban"}, "reply_to_user": {"reputation": 358, "user_id": 3165623, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/uh4Tf.jpg?s=128&g=1", "display_name": "arsenyinfo", "link": "https://stackoverflow.com/users/3165623/arsenyinfo"}, "edited": false, "score": 1, "creation_date": 1474387687, "post_id": 34818634, "comment_id": 66506189, "body": "@arsenyinfo this worked for me. I got the errors from updating/upgrading brew."}], "tags": [], "owner": {"reputation": 1293, "user_id": 2559070, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7b3b66a4dc7e569e800f828cbf6c39a7?s=128&d=identicon&r=PG", "display_name": "ben.dichter", "link": "https://stackoverflow.com/users/2559070/ben-dichter"}, "is_accepted": false, "score": 5, "last_activity_date": 1452886919, "creation_date": 1452886919, "answer_id": 34818634, "question_id": 33772047, "link": "https://stackoverflow.com/questions/33772047/el-capitan-upgrade-library-not-loaded-usr-local-lib-libmysqlclient-18-dylib/34818634#34818634", "title": "El Capitan upgrade: Library not loaded: /usr/local/lib/libmysqlclient.18.dylib", "body": "<p>I had an analogous problem in python: <code>libmysqlclient.20.dylib</code> instead of <code>18</code> on El Capitan. <code>pip install --upgrade mysql</code> fixed it, but only works in python2.</p>\n"}, {"comments": [{"owner": {"reputation": 465, "user_id": 1337320, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YbJvL.jpg?s=128&g=1", "display_name": "Arkhitech", "link": "https://stackoverflow.com/users/1337320/arkhitech"}, "edited": false, "score": 0, "creation_date": 1469223966, "post_id": 35994683, "comment_id": 64465055, "body": "for me this is a more generic solution:   ln -nfs /usr/local/lib/libmysqlclient.dylib /usr/local/lib/libmysqlclient.18.dylib"}], "tags": [], "owner": {"reputation": 7516, "user_id": 1066915, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89d475fb9dc14a3f4f84f876f812fb50?s=128&d=identicon&r=PG", "display_name": "Fabien Sa", "link": "https://stackoverflow.com/users/1066915/fabien-sa"}, "is_accepted": false, "score": 23, "last_activity_date": 1474729011, "last_edit_date": 1495541427, "creation_date": 1457978224, "answer_id": 35994683, "question_id": 33772047, "link": "https://stackoverflow.com/questions/33772047/el-capitan-upgrade-library-not-loaded-usr-local-lib-libmysqlclient-18-dylib/35994683#35994683", "title": "El Capitan upgrade: Library not loaded: /usr/local/lib/libmysqlclient.18.dylib", "body": "<p>For those on OS X El Capitain or more, this fix my problem:</p>\n\n<pre><code>sudo ln -s /usr/local/mysql/lib/libmysqlclient.18.dylib /usr/local/lib/libmysqlclient.18.dylib\n</code></pre>\n\n<p>For more info <a href=\"https://stackoverflow.com/a/32875545/1066915\">https://stackoverflow.com/a/32875545/1066915</a></p>\n"}, {"tags": [], "owner": {"reputation": 8937, "user_id": 19893, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/7dcd274c0876e1a8f57da36cdf3291a3?s=128&d=identicon&r=PG", "display_name": "allesklar", "link": "https://stackoverflow.com/users/19893/allesklar"}, "is_accepted": false, "score": 4, "last_activity_date": 1472134500, "creation_date": 1472134500, "answer_id": 39147726, "question_id": 33772047, "link": "https://stackoverflow.com/questions/33772047/el-capitan-upgrade-library-not-loaded-usr-local-lib-libmysqlclient-18-dylib/39147726#39147726", "title": "El Capitan upgrade: Library not loaded: /usr/local/lib/libmysqlclient.18.dylib", "body": "<p>I'm using Homebrew so I've fixed this problem by clearing up everything step by step:</p>\n\n<ol>\n<li><p>Comment out the mysql2 gem in in the Rails app Gemfile</p>\n\n<p>\"# gem 'mysql2'\"</p></li>\n<li><p>Remove mysql2 gem from bundle</p>\n\n<p>bundle install</p></li>\n<li><p>Uninstall the mysql2 gem (all versions)</p>\n\n<p>gem uninstall mysql2</p></li>\n<li><p>Update Homebrew</p>\n\n<p>brew update</p></li>\n<li><p>Uninstall all versions of mysql</p>\n\n<p>brew uninstall --force mysql</p></li>\n<li><p>Reinstall mysql</p>\n\n<p>brew install mysql</p></li>\n<li><p>Uncomment mysql2 gem in Gemfile</p>\n\n<p>gem mysql2</p></li>\n<li><p>Add mysql2 to bundle</p>\n\n<p>bundle install</p></li>\n</ol>\n\n<p>This approach might be a bit overkill but feels clean to me.</p>\n"}], "owner": {"reputation": 5272, "user_id": 1745902, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/a629f4656cabd0433729ab0c6523cedd?s=128&d=identicon&r=PG", "display_name": "Askar", "link": "https://stackoverflow.com/users/1745902/askar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 22219, "favorite_count": 1, "accepted_answer_id": 33777477, "answer_count": 6, "score": 34, "last_activity_date": 1504982087, "creation_date": 1447822086, "last_edit_date": 1504982087, "question_id": 33772047, "link": "https://stackoverflow.com/questions/33772047/el-capitan-upgrade-library-not-loaded-usr-local-lib-libmysqlclient-18-dylib", "title": "El Capitan upgrade: Library not loaded: /usr/local/lib/libmysqlclient.18.dylib", "body": "<p>Error:</p>\n\n<pre><code>/Users/askar/.rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/mysql2-0.3.20/lib/mysql2.rb:31:in `require': dlopen(/Users/askar/.rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/extensions/x86_64-darwin-14/2.2.0-static/mysql2-0.3.20/mysql2/mysql2.bundle, 9): Library not loaded: /usr/local/lib/libmysqlclient.18.dylib (LoadError)\n  Referenced from: /Users/askar/.rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/extensions/x86_64-darwin-14/2.2.0-static/mysql2-0.3.20/mysql2/mysql2.bundle\n  Reason: image not found - /Users/askar/.rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/extensions/x86_64-darwin-14/2.2.0-static/mysql2-0.3.20/mysql2/mysql2.bundle\n</code></pre>\n\n<p>In Gemfile: <code>gem 'mysql2'</code></p>\n\n<p><strong>$ ls -al /usr/local/lib/libmysql*</strong></p>\n\n<pre><code>lrwxr-xr-x  1 askar  admin  49 Nov 13 10:48 /usr/local/lib/libmysqlclient.20.dylib -&gt; ../Cellar/mysql/5.7.9/lib/libmysqlclient.20.dylib\nlrwxr-xr-x  1 askar  admin  42 Nov 13 10:48 /usr/local/lib/libmysqlclient.a -&gt; ../Cellar/mysql/5.7.9/lib/libmysqlclient.a\nlrwxr-xr-x  1 askar  admin  46 Nov 13 10:48 /usr/local/lib/libmysqlclient.dylib -&gt; ../Cellar/mysql/5.7.9/lib/libmysqlclient.dylib\nlrwxr-xr-x  1 askar  admin  37 Nov 13 10:48 /usr/local/lib/libmysqld.a -&gt; ../Cellar/mysql/5.7.9/lib/libmysqld.a\nlrwxr-xr-x  1 askar  admin  44 Nov 13 10:48 /usr/local/lib/libmysqlservices.a -&gt; ../Cellar/mysql/5.7.9/lib/libmysqlservices.a\n</code></pre>\n\n<p><strong>$ ls -al /usr/local/Cellar/mysql/5.7.9/lib/</strong></p>\n\n<pre><code>total 84392\ndrwxr-xr-x   9 askar  admin       306 Nov 12 22:16 .\ndrwxr-xr-x  14 askar  admin       476 Nov 13 10:48 ..\n-r--r--r--   1 askar  admin   3780168 Nov 13 10:48 libmysqlclient.20.dylib\n-r--r--r--   1 askar  admin   4280752 Nov 12 22:16 libmysqlclient.a\nlrwxr-xr-x   1 askar  admin        23 Nov 12 22:16 libmysqlclient.dylib -&gt; libmysqlclient.20.dylib\n-r--r--r--   1 askar  admin  35126528 Nov 12 22:16 libmysqld.a\n-r--r--r--   1 askar  admin      9048 Nov 12 22:16 libmysqlservices.a\ndrwxr-xr-x   3 askar  admin       102 Nov 13 10:48 pkgconfig\ndrwxr-xr-x  43 askar  admin      1462 Nov 12 22:17 plugin\ndrwxr-xr-x  43 askar  admin      1462 Nov 12 22:17 plugin\n</code></pre>\n\n<p>As you see I'm having <code>libmysqlclient.20.dylib</code>, it's <code>20</code> not <code>18</code>, otherwise I'd follow the solution <a href=\"https://stackoverflow.com/a/18465283/1745902\">here</a>.</p>\n\n<p>I've recently upgraded to El Capitan but not sure it that's the cause.</p>\n\n<p><strong>UPDATE:</strong></p>\n\n<p>Thanks to @Rashmirathi for the hint to re-install the gem.</p>\n\n<p>Just wanted to note, I needed also to specify in Gemfile as:</p>\n\n<pre><code>gem 'mysql2', '~&gt; 0.3.18'\n</code></pre>\n\n<p>Otherwise I had error:</p>\n\n<blockquote>\n  <p>Specified 'mysql2' for database adapter, but the gem is not loaded. Add <code>gem 'mysql2'</code> to your Gemfile (and ensure its version is at the minimum required by ActiveRecord).</p>\n</blockquote>\n\n<p>But finally I got error:</p>\n\n<blockquote>\n  <p>Mysql2::Error<br>\n      Your password has expired. To log in you must change it using a client that supports expired passwords.</p>\n</blockquote>\n\n<p>Which is solved by setting up a password again:</p>\n\n<pre><code>SET PASSWORD=PASSWORD('your_password');\n</code></pre>\n"}, {"tags": ["ruby", "sinatra"], "answers": [{"comments": [{"owner": {"reputation": 89, "user_id": 5352253, "user_type": "registered", "accept_rate": 69, "profile_image": "https://graph.facebook.com/1028839820499621/picture?type=large", "display_name": "Joseph McKenzie", "link": "https://stackoverflow.com/users/5352253/joseph-mckenzie"}, "edited": false, "score": 0, "creation_date": 1447823910, "post_id": 33772084, "comment_id": 55311830, "body": "elsif   answerdoor.include?(&#39;yes&#39;) &amp;&amp; door == 1 \t\t\t\t(ive tried it here) \t\t\t\terb :answerdoor, :locals =&gt; {:answerdoor =&gt; &quot;You Decide to get up and answer the door&quot;, :answerdoor2 =&gt; &quot; Oh No its The cops.&quot; } (and here) \t\t\t\t\tredirect to (&#39;/police&#39;)                                                                                                             and it just will wait the time and redirect but chow me my erb file im trying to see first"}], "tags": [], "owner": {"reputation": 11, "user_id": 4661670, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-PdDcHnJrr20/AAAAAAAAAAI/AAAAAAAAAEU/pgC0sH-XYOk/photo.jpg?sz=128", "display_name": "Ronald Chacon", "link": "https://stackoverflow.com/users/4661670/ronald-chacon"}, "is_accepted": false, "score": 1, "last_activity_date": 1447822349, "creation_date": 1447822349, "answer_id": 33772084, "question_id": 33772036, "link": "https://stackoverflow.com/questions/33772036/how-to-wait-a-few-seconds-on-a-redirect-in-sinatra/33772084#33772084", "title": "How to wait a few seconds on a redirect in sinatra", "body": "<p>Have you tried using the sleep method before the erb render?</p>\n\n<p><a href=\"http://ruby-doc.org/core-2.2.3/Kernel.html#method-i-sleep\" rel=\"nofollow\">http://ruby-doc.org/core-2.2.3/Kernel.html#method-i-sleep</a></p>\n"}, {"tags": [], "owner": {"reputation": 79498, "user_id": 298624, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/5b84ccc2f7709bbb7105baeb40e0961b?s=128&d=identicon&r=PG", "display_name": "fl00r", "link": "https://stackoverflow.com/users/298624/fl00r"}, "is_accepted": false, "score": 0, "last_activity_date": 1447967038, "creation_date": 1447967038, "answer_id": 33814322, "question_id": 33772036, "link": "https://stackoverflow.com/questions/33772036/how-to-wait-a-few-seconds-on-a-redirect-in-sinatra/33814322#33814322", "title": "How to wait a few seconds on a redirect in sinatra", "body": "<p>You can't do what you want in Ruby. You should render your HTML where you could add some javascript or html to redirect after a second or more.</p>\n\n<p>For example add this meta tag</p>\n\n<pre><code>&lt;meta http-equiv=\"refresh\" content=\"1; url=http://example.com/\" /&gt;\n</code></pre>\n\n<p>Where <code>1</code> is an amount of seconds</p>\n"}], "owner": {"reputation": 89, "user_id": 5352253, "user_type": "registered", "accept_rate": 69, "profile_image": "https://graph.facebook.com/1028839820499621/picture?type=large", "display_name": "Joseph McKenzie", "link": "https://stackoverflow.com/users/5352253/joseph-mckenzie"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 652, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1447967038, "creation_date": 1447821972, "last_edit_date": 1447966537, "question_id": 33772036, "link": "https://stackoverflow.com/questions/33772036/how-to-wait-a-few-seconds-on-a-redirect-in-sinatra", "title": "How to wait a few seconds on a redirect in sinatra", "body": "<p>I want to wait a few seconds on the erb answerdoorno before it redirects to police how do  i do that having problems finding the answer....</p>\n\n<pre><code>post '/answerdoor' do \n\n    answerdoor = params[:door]  \n\n    door = rand(2).floor\n    if answerdoor.include?('yes') &amp;&amp; door == 0\n\n        erb :answerdoor, :locals =&gt; {:answerdoor =&gt; \"You Decide to get up and answer the door\", :answerdoor2 =&gt; \" You are in Luck It's Your good buddy Dave.\" }\n\n    elsif  answerdoor.include?('yes') &amp;&amp; door == 1\n\n        erb :answerdoor, :locals =&gt; {:answerdoor =&gt; \"You Decide to get up and answer the door\", :answerdoor2 =&gt; \" Oh No its The cops.\" }\n        redirect to ('/police')\n\n    elsif answerdoor.include?('no') &amp;&amp; door == 0\n\n        erb :answerdoorno, :locals =&gt; {:answerdoor =&gt; \"You Decide not to answer the door, but it dosen't Really matter cause Dave walks in anyways.\"}\n\n    elsif answerdoor.include?('no') &amp;&amp; door == 1\n\n        erb :answerdoorno, :locals =&gt; {:answerdoor =&gt; \"You Decide not to answer the door, but it dosen't Really matter cause its the cops and the bust in.\"}            \n        redirct to ('/police')\n\n    end\nend\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 1814, "user_id": 2119317, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/65e386ab94962682b0abd72463670e23?s=128&d=identicon&r=PG", "display_name": "Pardeep Saini", "link": "https://stackoverflow.com/users/2119317/pardeep-saini"}, "edited": false, "score": 1, "creation_date": 1447821766, "post_id": 33771887, "comment_id": 55311138, "body": "You need to review your development.rb . show  your development.rb ."}, {"owner": {"user_type": "does_not_exist", "display_name": "user5574945"}, "reply_to_user": {"reputation": 1814, "user_id": 2119317, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/65e386ab94962682b0abd72463670e23?s=128&d=identicon&r=PG", "display_name": "Pardeep Saini", "link": "https://stackoverflow.com/users/2119317/pardeep-saini"}, "edited": false, "score": 0, "creation_date": 1447822951, "post_id": 33771887, "comment_id": 55311537, "body": "Rails.application.configure do   config.cache_classes = false   config.eager_load = false   config.consider_all_requests_local       = true   config.action_controller.perform_caching = false   config.action_mailer.raise_delivery_errors = false   config.active_support.deprecation = :log   config.active_record.migration_error = :page_load   config.assets.debug = true   config.assets.digest = true   config.assets.raise_runtime_errors = true"}, {"owner": {"user_type": "does_not_exist", "display_name": "user5574945"}, "reply_to_user": {"reputation": 1814, "user_id": 2119317, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/65e386ab94962682b0abd72463670e23?s=128&d=identicon&r=PG", "display_name": "Pardeep Saini", "link": "https://stackoverflow.com/users/2119317/pardeep-saini"}, "edited": false, "score": 0, "creation_date": 1447823005, "post_id": 33771887, "comment_id": 55311555, "body": "Mail settings   config.action_mailer.delivery_method = :smtp   config.action_mailer.smtp_settings = {     :address =&gt; &#39;&#39;,     :port =&gt; 587,     :user_name =&gt; &#39;anikettiwari91&#39;,     :password =&gt; &#39;ladeeda&#39;,     :authentication =&gt; &#39;plain&#39;   }    config.action_mailer.default_url_options = { :host =&gt; &#39;localhost:3000&#39; } end"}, {"owner": {"user_type": "does_not_exist", "display_name": "user5574945"}, "reply_to_user": {"reputation": 1814, "user_id": 2119317, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/65e386ab94962682b0abd72463670e23?s=128&d=identicon&r=PG", "display_name": "Pardeep Saini", "link": "https://stackoverflow.com/users/2119317/pardeep-saini"}, "edited": false, "score": 0, "creation_date": 1447823035, "post_id": 33771887, "comment_id": 55311564, "body": "I  was actually trying to send mail but that was also not working and my server wasn&#39;t either"}, {"owner": {"reputation": 1814, "user_id": 2119317, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/65e386ab94962682b0abd72463670e23?s=128&d=identicon&r=PG", "display_name": "Pardeep Saini", "link": "https://stackoverflow.com/users/2119317/pardeep-saini"}, "edited": false, "score": 0, "creation_date": 1447826804, "post_id": 33771887, "comment_id": 55312831, "body": "you can edit you question and add your application.rb with your question. i think that make sense."}], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user5574945"}, "edited": false, "score": 0, "creation_date": 1447827994, "post_id": 33773017, "comment_id": 55313287, "body": "Rails server is Working now but still I am unable to send email"}, {"owner": {"reputation": 1814, "user_id": 2119317, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/65e386ab94962682b0abd72463670e23?s=128&d=identicon&r=PG", "display_name": "Pardeep Saini", "link": "https://stackoverflow.com/users/2119317/pardeep-saini"}, "edited": false, "score": 0, "creation_date": 1447828242, "post_id": 33773017, "comment_id": 55313391, "body": "what are you using to send emails i.e gmail, sendgrid, yahoo or somthing else. if you are using gmail then in <code>:address   =&gt; &quot;smtp.gmail.com</code> and provide your gmail username and password there."}], "tags": [], "owner": {"reputation": 1814, "user_id": 2119317, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/65e386ab94962682b0abd72463670e23?s=128&d=identicon&r=PG", "display_name": "Pardeep Saini", "link": "https://stackoverflow.com/users/2119317/pardeep-saini"}, "is_accepted": false, "score": 0, "last_activity_date": 1447828384, "last_edit_date": 1447828384, "creation_date": 1447827356, "answer_id": 33773017, "question_id": 33771887, "link": "https://stackoverflow.com/questions/33771887/rails-server-not-working-unknown-error/33773017#33773017", "title": "Rails server not working unknown error", "body": "<p>Replace you development.rb with this</p>\n\n<pre><code>Rails.application.configure do\n  # Settings specified here will take precedence over those in config/application.rb.\n\n  # In the development environment your application's code is reloaded on\n  # every request. This slows down response time but is perfect for development\n  # since you don't have to restart the web server when you make code changes.\n  config.cache_classes = false\n\n  # Do not eager load code on boot.\n  config.eager_load = false\n\n  # Show full error reports and disable caching.\n  config.consider_all_requests_local       = true\n  config.action_controller.perform_caching = false\n\n  # Don't care if the mailer can't send.\n  config.action_mailer.raise_delivery_errors = true\n\n  # Print deprecation notices to the Rails logger.\n  config.active_support.deprecation = :log\n\n  # Raise an error on page load if there are pending migrations.\n  config.active_record.migration_error = :page_load\n\n  # Debug mode disables concatenation and preprocessing of assets.\n  # This option may cause significant delays in view rendering with a large\n  # number of complex assets.\n  config.assets.debug = true\n\n  # Asset digests allow you to set far-future HTTP expiration dates on all assets,\n  # yet still be able to expire them through the digest params.\n  config.assets.digest = true\n\n  # Adds additional error checking when serving assets at runtime.\n  # Checks for improperly declared sprockets dependencies.\n  # Raises helpful error messages.\n   config.assets.raise_runtime_errors = true\n   config.action_mailer.default_url_options = {host: \"localhost:3000\"}\n   config.action_mailer.perform_deliveries = true\n\n   config.action_mailer.smtp_settings = {\n      :address              =&gt; \"\",\n      :port                 =&gt; 587,\n      # :domain               =&gt; \".com\",\n      :user_name            =&gt; \"your user name\",\n      :password             =&gt; \"your password\",\n\n      :authentication       =&gt; :plain,\n     # :enable_starttls_auto =&gt; true\n  }\n  # Raises error for missing translations\n  # config.action_view.raise_on_missing_translations = true\nend\n</code></pre>\n\n<p>sample code for gmail settings</p>\n\n<pre><code>config.action_mailer.smtp_settings = {\n:address =&gt; \"smtp.gmail.com\",\n:port =&gt; \"587\",\n:domain =&gt; \"mydomain.net\",\n:user_name =&gt; \"mygmailusername@gmail.com\",\n:password =&gt; \"myGmailPassword\",\n:authentication =&gt; \"plain\",\n:enable_starttls_auto =&gt; true\n</code></pre>\n\n<p>} </p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user5574945"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 94, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1447828384, "creation_date": 1447821128, "last_edit_date": 1447821742, "question_id": 33771887, "link": "https://stackoverflow.com/questions/33771887/rails-server-not-working-unknown-error", "title": "Rails server not working unknown error", "body": "<p>This is the error it is showing when I am trying to start my rails server \nI am using <code>rails 4.2.4.</code> and the ruby version is2.2.1p85.\nI am new to rails so tell me what to do</p>\n\n<pre><code>/home/techbirds/Downloads/boxroom-master/config/environments/development.rb:42:in `block in &lt;top (required)&gt;': undefined local variable or method `settings' for #&lt;Boxroom::Application:0x00000002785a80&gt; (NameError)\n    from /home/techbirds/.rvm/gems/ruby-2.2.1/gems/railties-4.2.4/lib/rails/railtie.rb:210:in `instance_eval'\n    from /home/techbirds/.rvm/gems/ruby-2.2.1/gems/railties-4.2.4/lib/rails/railtie.rb:210:in `configure'\n    from /home/techbirds/Downloads/boxroom-master/config/environments/development.rb:1:in `&lt;top (required)&gt;'\n    from /home/techbirds/.rvm/gems/ruby-2.2.1/gems/activesupport-4.2.4/lib/active_support/dependencies.rb:274:in `require'\n    from /home/techbirds/.rvm/gems/ruby-2.2.1/gems/activesupport-4.2.4/lib/active_support/dependencies.rb:274:in `block in require'\n    from /home/techbirds/.rvm/gems/ruby-2.2.1/gems/activesupport-4.2.4/lib/active_support/dependencies.rb:240:in `load_dependency'\n    from /home/techbirds/.rvm/gems/ruby-2.2.1/gems/activesupport-4.2.4/lib/active_support/dependencies.rb:274:in `require'\n    from /home/techbirds/.rvm/gems/ruby-2.2.1/gems/railties-4.2.4/lib/rails/engine.rb:598:in `block (2 levels) in &lt;class:Engine&gt;'\n    from /home/techbirds/.rvm/gems/ruby-2.2.1/gems/railties-4.2.4/lib/rails/engine.rb:597:in `each'\n    from /home/techbirds/.rvm/gems/ruby-2.2.1/gems/railties-4.2.4/lib/rails/engine.rb:597:in `block in &lt;class:Engine&gt;'\n    from /home/techbirds/.rvm/gems/ruby-2.2.1/gems/railties-4.2.4/lib/rails/initializable.rb:30:in `instance_exec'\n    from /home/techbirds/.rvm/gems/ruby-2.2.1/gems/railties-4.2.4/lib/rails/initializable.rb:30:in `run'\n    from /home/techbirds/.rvm/gems/ruby-2.2.1/gems/railties-4.2.4/lib/rails/initializable.rb:55:in `block in run_initializers'\n    from /home/techbirds/.rvm/rubies/ruby-2.2.1/lib/ruby/2.2.0/tsort.rb:226:in `block in tsort_each'\n    from /home/techbirds/.rvm/rubies/ruby-2.2.1/lib/ruby/2.2.0/tsort.rb:348:in `block (2 levels) in each_strongly_connected_component'\n    from /home/techbirds/.rvm/rubies/ruby-2.2.1/lib/ruby/2.2.0/tsort.rb:420:in `block (2 levels) in each_strongly_connected_component_from'\n    from /home/techbirds/.rvm/rubies/ruby-2.2.1/lib/ruby/2.2.0/tsort.rb:429:in `each_strongly_connected_component_from'\n    from /home/techbirds/.rvm/rubies/ruby-2.2.1/lib/ruby/2.2.0/tsort.rb:419:in `block in each_strongly_connected_component_from'\n    from /home/techbirds/.rvm/gems/ruby-2.2.1/gems/railties-4.2.4/lib/rails/initializable.rb:44:in `each'\n    from /home/techbirds/.rvm/gems/ruby-2.2.1/gems/railties-4.2.4/lib/rails/initializable.rb:44:in `tsort_each_child'\n    from /home/techbirds/.rvm/rubies/ruby-2.2.1/lib/ruby/2.2.0/tsort.rb:413:in `call'\n    from /home/techbirds/.rvm/rubies/ruby-2.2.1/lib/ruby/2.2.0/tsort.rb:413:in `each_strongly_connected_component_from'\n    from /home/techbirds/.rvm/rubies/ruby-2.2.1/lib/ruby/2.2.0/tsort.rb:347:in `block in each_strongly_connected_component'\n    from /home/techbirds/.rvm/rubies/ruby-2.2.1/lib/ruby/2.2.0/tsort.rb:345:in `each'\n    from /home/techbirds/.rvm/rubies/ruby-2.2.1/lib/ruby/2.2.0/tsort.rb:345:in `call'\n    from /home/techbirds/.rvm/rubies/ruby-2.2.1/lib/ruby/2.2.0/tsort.rb:345:in `each_strongly_connected_component'\n    from /home/techbirds/.rvm/rubies/ruby-2.2.1/lib/ruby/2.2.0/tsort.rb:224:in `tsort_each'\n    from /home/techbirds/.rvm/rubies/ruby-2.2.1/lib/ruby/2.2.0/tsort.rb:203:in `tsort_each'\n    from /home/techbirds/.rvm/gems/ruby-2.2.1/gems/railties-4.2.4/lib/rails/initializable.rb:54:in `run_initializers'\n    from /home/techbirds/.rvm/gems/ruby-2.2.1/gems/railties-4.2.4/lib/rails/application.rb:352:in `initialize!'\n    from /home/techbirds/Downloads/boxroom-master/config/environment.rb:5:in `&lt;top (required)&gt;'\n    from /home/techbirds/Downloads/boxroom-master/config.ru:3:in `require'\n    from /home/techbirds/Downloads/boxroom-master/config.ru:3:in `block in &lt;main&gt;'\n    from /home/techbirds/.rvm/gems/ruby-2.2.1/gems/rack-1.6.4/lib/rack/builder.rb:55:in `instance_eval'\n    from /home/techbirds/.rvm/gems/ruby-2.2.1/gems/rack-1.6.4/lib/rack/builder.rb:55:in `initialize'\n    from /home/techbirds/Downloads/boxroom-master/config.ru:in `new'\n    from /home/techbirds/Downloads/boxroom-master/config.ru:in `&lt;main&gt;'\n    from /home/techbirds/.rvm/gems/ruby-2.2.1/gems/rack-1.6.4/lib/rack/builder.rb:49:in `eval'\n    from /home/techbirds/.rvm/gems/ruby-2.2.1/gems/rack-1.6.4/lib/rack/builder.rb:49:in `new_from_string'\n    from /home/techbirds/.rvm/gems/ruby-2.2.1/gems/rack-1.6.4/lib/rack/builder.rb:40:in `parse_file'\n    from /home/techbirds/.rvm/gems/ruby-2.2.1/gems/rack-1.6.4/lib/rack/server.rb:299:in `build_app_and_options_from_config'\n    from /home/techbirds/.rvm/gems/ruby-2.2.1/gems/rack-1.6.4/lib/rack/server.rb:208:in `app'\n    from /home/techbirds/.rvm/gems/ruby-2.2.1/gems/railties-4.2.4/lib/rails/commands/server.rb:61:in `app'\n    from /home/techbirds/.rvm/gems/ruby-2.2.1/gems/rack-1.6.4/lib/rack/server.rb:336:in `wrapped_app'\n    from /home/techbirds/.rvm/gems/ruby-2.2.1/gems/railties-4.2.4/lib/rails/commands/server.rb:139:in `log_to_stdout'\n    from /home/techbirds/.rvm/gems/ruby-2.2.1/gems/railties-4.2.4/lib/rails/commands/server.rb:78:in `start'\n    from /home/techbirds/.rvm/gems/ruby-2.2.1/gems/railties-4.2.4/lib/rails/commands/commands_tasks.rb:80:in `block in server'\n    from /home/techbirds/.rvm/gems/ruby-2.2.1/gems/railties-4.2.4/lib/rails/commands/commands_tasks.rb:75:in `tap'\n    from /home/techbirds/.rvm/gems/ruby-2.2.1/gems/railties-4.2.4/lib/rails/commands/commands_tasks.rb:75:in `server'\n    from /home/techbirds/.rvm/gems/ruby-2.2.1/gems/railties-4.2.4/lib/rails/commands/commands_tasks.rb:39:in `run_command!'\n    from /home/techbirds/.rvm/gems/ruby-2.2.1/gems/railties-4.2.4/lib/rails/commands.rb:17:in `&lt;top (required)&gt;'\n    from bin/rails:8:in `require'\n    from bin/rails:8:in `&lt;main&gt;'\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "nokogiri", "xcode7"], "answers": [{"tags": [], "owner": {"reputation": 2886, "user_id": 344720, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/06dbda6ccadbb1ca30943526c3ef22df?s=128&d=identicon&r=PG", "display_name": "Jon Kern", "link": "https://stackoverflow.com/users/344720/jon-kern"}, "is_accepted": false, "score": 11, "last_activity_date": 1447817047, "creation_date": 1447817047, "answer_id": 33771277, "question_id": 33771276, "link": "https://stackoverflow.com/questions/33771276/library-not-found-for-lgmp-error-when-installing-rails-on-el-capitan-mac-os-1/33771277#33771277", "title": "library not found for -lgmp error when installing Rails on El Capitan ( Mac OS 10.11.1 (15B42))", "body": "<p><em>FIX</em></p>\n\n<pre><code>xcode-select --install\n</code></pre>\n\n<p>And re-running the <code>gem install rails</code> worked.</p>\n"}], "owner": {"reputation": 2886, "user_id": 344720, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/06dbda6ccadbb1ca30943526c3ef22df?s=128&d=identicon&r=PG", "display_name": "Jon Kern", "link": "https://stackoverflow.com/users/344720/jon-kern"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1412, "favorite_count": 2, "answer_count": 1, "score": 6, "last_activity_date": 1447975784, "creation_date": 1447817047, "last_edit_date": 1447975784, "question_id": 33771276, "link": "https://stackoverflow.com/questions/33771276/library-not-found-for-lgmp-error-when-installing-rails-on-el-capitan-mac-os-1", "title": "library not found for -lgmp error when installing Rails on El Capitan ( Mac OS 10.11.1 (15B42))", "body": "<p>When installing Rails on El Capitan (Mac OS X 10.11.1) on Ruby v2.2.2, I got the following error:</p>\n\n<pre><code>ERROR:  Error installing nokogiri:\n    ERROR: Failed to build gem native extension.\n\n    /Users/jon/.rvm/rubies/ruby-2.2.2/bin/ruby -r ./siteconf20151117-26799-ux15fd.rb extconf.rb --use-system-libraries\nchecking if the C compiler accepts ... *** extconf.rb failed ***\nCould not create Makefile due to some reason, probably lack of necessary\nlibraries and/or headers.  Check the mkmf.log file for more details.  You may\nneed configuration options.\n</code></pre>\n\n<p>And the <code>mkmf.log</code> file had:</p>\n\n<pre><code>$ cat /Users/jon/.rvm/rubies/ruby-2.2.2/lib/ruby/gems/2.2.0/extensions/x86_64-darwin-14/2.2.0/nokogiri-1.6.6.3/mkmf.log \n\"gcc -o conftest -I/Users/jon/.rvm/rubies/ruby-2.2.2/include/ruby-2.2.0/x86_64-darwin14 ...\n-lruby.2.2.0  -lpthread -lgmp -ldl -lobjc  \"\nld: library not found for -lgmp\nclang: error: linker command failed with exit code 1 (use -v to see invocation)\nchecked program was:\n/* begin */\n1: #include \"ruby.h\"\n2: \n3: int main(int argc, char **argv)\n4: {\n5:   return 0;\n6: }\n/* end */\n</code></pre>\n"}, {"tags": ["ruby", "palindrome"], "answers": [{"tags": [], "owner": {"reputation": 889, "user_id": 1188897, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b80248dd952f83ca0f63bbc4694c44e9?s=128&d=identicon&r=PG", "display_name": "Morgen", "link": "https://stackoverflow.com/users/1188897/morgen"}, "is_accepted": false, "score": 0, "last_activity_date": 1447815028, "creation_date": 1447815028, "answer_id": 33771000, "question_id": 33770875, "link": "https://stackoverflow.com/questions/33770875/finding-six-digit-palindrome-number-works-for-four-and-five-digits/33771000#33771000", "title": "Finding six-digit palindrome number. Works for four and five digits", "body": "<p>Well, your code is pretty straightforward, except were you are reversing the digits. </p>\n\n<p>I'd recommend two steps to solve this: </p>\n\n<ol>\n<li>Extract the reverse portion into a separate function and write a bunch of unit tests to make sure it's doing what you think it is. My intuition is that it is not. </li>\n<li>If that doesn't fix it, start writing tests for the whole thing. Actually, you should probably do that anyway. </li>\n</ol>\n"}, {"comments": [{"owner": {"reputation": 121, "user_id": 5573098, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Nq--IMJ8WM0/AAAAAAAAAAI/AAAAAAAAAdU/YalwtY7AsGQ/photo.jpg?sz=128", "display_name": "Brad Nauta", "link": "https://stackoverflow.com/users/5573098/brad-nauta"}, "edited": false, "score": 0, "creation_date": 1447884279, "post_id": 33771234, "comment_id": 55349741, "body": "@Pr4njal please accept my answer if you feel I&#39;ve addressed your issue, thanks!"}, {"owner": {"reputation": 45, "user_id": 4525885, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hk3mg.jpg?s=128&g=1", "display_name": "Pr4njal", "link": "https://stackoverflow.com/users/4525885/pr4njal"}, "edited": false, "score": 0, "creation_date": 1447947783, "post_id": 33771234, "comment_id": 55381815, "body": "This one line that I was missing... It frustrated me for two days... Thanks to u.."}], "tags": [], "owner": {"reputation": 121, "user_id": 5573098, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Nq--IMJ8WM0/AAAAAAAAAAI/AAAAAAAAAdU/YalwtY7AsGQ/photo.jpg?sz=128", "display_name": "Brad Nauta", "link": "https://stackoverflow.com/users/5573098/brad-nauta"}, "is_accepted": true, "score": 1, "last_activity_date": 1447816738, "creation_date": 1447816738, "answer_id": 33771234, "question_id": 33770875, "link": "https://stackoverflow.com/questions/33770875/finding-six-digit-palindrome-number-works-for-four-and-five-digits/33771234#33771234", "title": "Finding six-digit palindrome number. Works for four and five digits", "body": "<p>You're not resetting <code>y</code> to 999 after each iteration of <code>x</code>, so your program isn't actually iterating over the full range of values as intended. Bump <code>y = 999</code> to just under <code>while x &gt; 100</code>.</p>\n"}], "owner": {"reputation": 45, "user_id": 4525885, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hk3mg.jpg?s=128&g=1", "display_name": "Pr4njal", "link": "https://stackoverflow.com/users/4525885/pr4njal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 82, "favorite_count": 0, "accepted_answer_id": 33771234, "answer_count": 2, "score": 0, "last_activity_date": 1447816738, "creation_date": 1447814101, "question_id": 33770875, "link": "https://stackoverflow.com/questions/33770875/finding-six-digit-palindrome-number-works-for-four-and-five-digits", "title": "Finding six-digit palindrome number. Works for four and five digits", "body": "<p>I have to find palindrome numbers which are Product of three-digit numbers. The program I made works for 2*2 and 3*2. But not for 3*3. Why? I can't figure out.</p>\n\n<pre><code>#initialized variables\n\nx = 999             \ny = 999\n\n\n while x &gt; 100\n\n    while y &gt; 100\n\n        num = x*y\n\n        #Reversing the digits\n\n        a = num/100000\n        b = num%100000\n        c = b/10000\n        d = b%10000\n        e = d/1000\n        f = d%1000\n        g = f/100\n        h = f%100\n        i = h/10\n        j = h%10\n        rev = 100000*j+10000*i+1000*g+100*e+10*c+a\n\n        #Checking for palindrome\n\n        if rev == num\n            puts num\n        end\n        y -= 1\n\n    end\n    x -= 1  \n\nend\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "sorting"], "comments": [{"owner": {"reputation": 37, "user_id": 5183339, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/efcc985506e7368a75cc4d81de82501b?s=128&d=identicon&r=PG&f=1", "display_name": "Andy", "link": "https://stackoverflow.com/users/5183339/andy"}, "reply_to_user": {"reputation": 5702, "user_id": 1136195, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eeb5f37d1c4579d52290c503838b9f15?s=128&d=identicon&r=PG", "display_name": "dda", "link": "https://stackoverflow.com/users/1136195/dda"}, "edited": false, "score": 0, "creation_date": 1447814490, "post_id": 33770731, "comment_id": 55309299, "body": "sort_by { |k,v| v[:c] }  but it passes from a hash to some type of array, sorry but im still new to ruby"}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1447820335, "post_id": 33770731, "comment_id": 55310706, "body": "Andy, I hope you don&#39;t mind how I reformatted your hash. For it to be shown as code, lines must be indented at least four spaces (or select the code and click on <code>{}</code> above). I also assigned the hash to a variable, <code>h</code>. That way readers can simply refer to <code>h</code> in answers and comments without having to define it. Ha! As I am writing this I see @John removed the definition of <code>h</code> in his code, presumably because I just stuck it into your code."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1447820789, "post_id": 33770731, "comment_id": 55310852, "body": "One more thing, when you give an example it&#39;s helpful for you to also show the expected or desired output. You might consider editing the question to do that. btw, one does not normally sort a hash, but you certainly can. I normally don&#39;t edit questions, but in this case it was easier to do it than for me to explain how to do it."}, {"owner": {"reputation": 37, "user_id": 5183339, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/efcc985506e7368a75cc4d81de82501b?s=128&d=identicon&r=PG&f=1", "display_name": "Andy", "link": "https://stackoverflow.com/users/5183339/andy"}, "edited": false, "score": 0, "creation_date": 1447879070, "post_id": 33770731, "comment_id": 55346794, "body": "Thank you very much for your advice ! I really appreciate it"}], "answers": [{"tags": [], "owner": {"reputation": 261375, "user_id": 174728, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/eRO75.jpg?s=128&g=1", "display_name": "John La Rooy", "link": "https://stackoverflow.com/users/174728/john-la-rooy"}, "is_accepted": false, "score": 2, "last_activity_date": 1447820527, "last_edit_date": 1447820527, "creation_date": 1447816614, "answer_id": 33771215, "question_id": 33770731, "link": "https://stackoverflow.com/questions/33770731/how-can-i-the-sort-this-hash-based-on-the-c-value/33771215#33771215", "title": "How can I the sort this hash based on the c value?", "body": "<p>Your keys are the string (<code>\"c\"</code>), not a symbol (<code>:c</code>). You can call <code>to_h</code> on the array to get back to a hash.</p>\n\n<pre><code>h.sort_by{|k, v| v[\"c\"]}.to_h \n# =&gt; {\"Collectible\\nGames\"=&gt;{\"c\"=&gt;19}, \n     \"Classic Games\\n\"=&gt;{\"c\"=&gt;22}, \n     \"Logic Games\\n\"=&gt;{\"c\"=&gt;32}, \n     \"Card Games\\n\"=&gt;{\"c\"=&gt;40}, \n     \"Preschool\\nGames\"=&gt;{\"c\"=&gt;48}, \n     \"Family &amp; Friends\\nGames\"=&gt;{\"c\"=&gt;71}, \n     \"Kids Games\\n\"=&gt;{\"c\"=&gt;92}} \n</code></pre>\n"}], "owner": {"reputation": 37, "user_id": 5183339, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/efcc985506e7368a75cc4d81de82501b?s=128&d=identicon&r=PG&f=1", "display_name": "Andy", "link": "https://stackoverflow.com/users/5183339/andy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 32, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1447820527, "creation_date": 1447813200, "last_edit_date": 1447820299, "question_id": 33770731, "link": "https://stackoverflow.com/questions/33770731/how-can-i-the-sort-this-hash-based-on-the-c-value", "title": "How can I the sort this hash based on the c value?", "body": "<pre><code>h = {\"Collectible\\\\nGames\"     =&gt;{\"c\"=&gt;19},\n     \"Family &amp; Friends\\\\nGames\"=&gt;{\"c\"=&gt;71},\n     \"Logic Games\\\\n\"          =&gt;{\"c\"=&gt;32},\n     \"Kids Games\\\\n\"           =&gt;{\"c\"=&gt;92},\n     \"Classic Games\\\\n\"        =&gt;{\"c\"=&gt;22},\n     \"Card Games\\\\n\"           =&gt;{\"c\"=&gt;40},\n     \"Preschool\\\\nGames\"       =&gt;{\"c\"=&gt;48}}\n</code></pre>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 23312, "user_id": 560215, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/bb365e8477053edcc55b40c3d27781d8?s=128&d=identicon&r=PG", "display_name": "sevenseacat", "link": "https://stackoverflow.com/users/560215/sevenseacat"}, "edited": false, "score": 0, "creation_date": 1447820101, "post_id": 33770625, "comment_id": 55310646, "body": "because that method doesn&#39;t exist."}], "answers": [{"tags": [], "owner": {"reputation": 261375, "user_id": 174728, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/eRO75.jpg?s=128&g=1", "display_name": "John La Rooy", "link": "https://stackoverflow.com/users/174728/john-la-rooy"}, "is_accepted": false, "score": 5, "last_activity_date": 1447819432, "last_edit_date": 1447819432, "creation_date": 1447812982, "answer_id": 33770700, "question_id": 33770625, "link": "https://stackoverflow.com/questions/33770625/undefined-method-for-hash/33770700#33770700", "title": "undefined method `&lt;&lt;&#39; for {}:Hash", "body": "<p><a href=\"http://docs.ruby-lang.org/en/2.2.0/Hash.html\" rel=\"nofollow\">Hash</a> doesn't have a <code>&lt;&lt;</code> method.</p>\n\n<p>I guess the real question is why you think it does, and what you think should happen if you <code>&lt;&lt;</code> a string to an object that consists of key/value pairs.</p>\n\n<p>Is it possible you meant to do the following?</p>\n\n<pre><code>a = Array.new\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1528, "user_id": 1616697, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Pwa5t.jpg?s=128&g=1", "display_name": "Lahiru", "link": "https://stackoverflow.com/users/1616697/lahiru"}, "is_accepted": true, "score": 3, "last_activity_date": 1448090928, "last_edit_date": 1448090928, "creation_date": 1447824175, "answer_id": 33772392, "question_id": 33770625, "link": "https://stackoverflow.com/questions/33770625/undefined-method-for-hash/33772392#33772392", "title": "undefined method `&lt;&lt;&#39; for {}:Hash", "body": "<p>It's because you are trying to assign values for a <a href=\"http://ruby-doc.org/core-2.2.0/Hash.html\" rel=\"nofollow\">Hash</a> using <code>&lt;&lt;</code> (shovel operator).</p>\n\n<p>Instead, try assigning them like this: (There should be <em>key/value</em> pairs in a <code>Hash</code>)</p>\n\n<pre><code>a = Hash.new\na[:foo] = \"Bom dia!\"\n</code></pre>\n\n<p>or,</p>\n\n<pre><code>a = {foo: \"Bom dia!\"}\n</code></pre>\n"}], "owner": {"reputation": 71, "user_id": 2077603, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/ac7adb61bee19b6c8ba5843f7c9b8818?s=128&d=identicon&r=PG", "display_name": "inBlackAndWhite", "link": "https://stackoverflow.com/users/2077603/inblackandwhite"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 5471, "favorite_count": 0, "accepted_answer_id": 33772392, "answer_count": 2, "score": -1, "last_activity_date": 1448090928, "creation_date": 1447812567, "last_edit_date": 1447819333, "question_id": 33770625, "link": "https://stackoverflow.com/questions/33770625/undefined-method-for-hash", "title": "undefined method `&lt;&lt;&#39; for {}:Hash", "body": "<p>I was trying the following code:</p>\n\n<pre><code>a = Hash.new\na &lt;&lt; \"Bom dia!\" # =&gt; NoMethodError: undefined method `&lt;&lt;' for {}:Hash\n</code></pre>\n\n<p>Any idea why it returns 'undefined method'?</p>\n"}, {"tags": ["ruby", "header", "authorization"], "answers": [{"comments": [{"owner": {"reputation": 129, "user_id": 5563649, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6f133319a778f7d8cb6970d951d3a1bf?s=128&d=identicon&r=PG&f=1", "display_name": "Dr.Rabbit", "link": "https://stackoverflow.com/users/5563649/dr-rabbit"}, "edited": false, "score": 0, "creation_date": 1447835870, "post_id": 33770442, "comment_id": 55316949, "body": "Sorry mate I have the docs and I cannot seem to intergrate it with my class. I have updated my post with the complete code"}, {"owner": {"reputation": 665, "user_id": 1159723, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/749b6d33776d04c8205e8d64494209ee?s=128&d=identicon&r=PG", "display_name": "shurik", "link": "https://stackoverflow.com/users/1159723/shurik"}, "reply_to_user": {"reputation": 129, "user_id": 5563649, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6f133319a778f7d8cb6970d951d3a1bf?s=128&d=identicon&r=PG&f=1", "display_name": "Dr.Rabbit", "link": "https://stackoverflow.com/users/5563649/dr-rabbit"}, "edited": false, "score": 0, "creation_date": 1447881056, "post_id": 33770442, "comment_id": 55347924, "body": "You can add headers using add_field method request.add_field &#39;Authorization&#39;, &#39;huda7da97hre3rhr1yrh0130409u1u&#39;"}, {"owner": {"reputation": 129, "user_id": 5563649, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6f133319a778f7d8cb6970d951d3a1bf?s=128&d=identicon&r=PG&f=1", "display_name": "Dr.Rabbit", "link": "https://stackoverflow.com/users/5563649/dr-rabbit"}, "edited": false, "score": 0, "creation_date": 1447900063, "post_id": 33770442, "comment_id": 55355182, "body": "thank you so much, I wasn&#39;t aware you can just add Auth fields like that. Much appreciated."}], "tags": [], "owner": {"reputation": 665, "user_id": 1159723, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/749b6d33776d04c8205e8d64494209ee?s=128&d=identicon&r=PG", "display_name": "shurik", "link": "https://stackoverflow.com/users/1159723/shurik"}, "is_accepted": true, "score": 1, "last_activity_date": 1447881025, "last_edit_date": 1447881025, "creation_date": 1447811383, "answer_id": 33770442, "question_id": 33770326, "link": "https://stackoverflow.com/questions/33770326/ruby-http-sending-api-key-basic-auth/33770442#33770442", "title": "Ruby HTTP sending API key Basic_auth", "body": "<p>Basic Authentication example:</p>\n\n<pre><code>req = Net::HTTP::Get.new(uri)\nreq.basic_auth 'user', 'pass'\n</code></pre>\n\n<p><a href=\"http://docs.ruby-lang.org/en/trunk/Net/HTTP.html#class-Net::HTTP-label-Basic+Authentication\" rel=\"nofollow\">http://docs.ruby-lang.org/en/trunk/Net/HTTP.html#class-Net::HTTP-label-Basic+Authentication</a></p>\n\n<p>Or if you want to add a raw Authorization header in your request method you can do</p>\n\n<pre><code> request.add_field 'Authorization', 'huda7da97hre3rhr1yrh0130409u1u'\n</code></pre>\n\n<p>But basic authentication normally means that there is a user name and a password. With your API key - I am not sure you actually need basic authentication. I do not know what you API actually requires but if you have not tried it yet you can try sending the api key as an additional parameter</p>\n\n<pre><code>result = connection.post(\"register\", {'email' =&gt; email, 'name' =&gt; name, 'password' =&gt; password, 'apiKey' =&gt; 'huda7da97hre3rhr1yrh0130409u1u' })\n</code></pre>\n"}], "owner": {"reputation": 129, "user_id": 5563649, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6f133319a778f7d8cb6970d951d3a1bf?s=128&d=identicon&r=PG&f=1", "display_name": "Dr.Rabbit", "link": "https://stackoverflow.com/users/5563649/dr-rabbit"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3821, "favorite_count": 1, "accepted_answer_id": 33770442, "answer_count": 1, "score": 1, "last_activity_date": 1447881025, "creation_date": 1447810586, "last_edit_date": 1447812652, "question_id": 33770326, "link": "https://stackoverflow.com/questions/33770326/ruby-http-sending-api-key-basic-auth", "title": "Ruby HTTP sending API key Basic_auth", "body": "<p>I have been following a tutorial on <a href=\"http://danknox.github.io/2013/01/27/using-rubys-native-nethttp-library/\" rel=\"nofollow\">GitHub Pages</a> and \nI am trying to pass an Apikey to a webservice as basic auth 'apiKey' => 'huda7da97hre3rhr1yrh0130409u1u' for example but I cannot work out how to implement it into the method, or even if that is the proper place for it.</p>\n\n<p>I have a class called connection with my request method in it. I need to post 'apiKey' as header and not in the body. I have read the ruby docs but I cannot work out how to apply it to this specific class. </p>\n\n<pre><code>require \"net/http\"\nrequire \"uri\"\nrequire \"ostruct\"\nrequire \"json\"\n\n\nclass Connection\n    ENDPOINT = \"http://localhost\"\n    APP_LOCATION = \"/task_manager/v1/\"\n\nVERB_MAP = {\n    :get    =&gt; Net::HTTP::Get,\n    :post   =&gt; Net::HTTP::Post,\n    :put    =&gt; Net::HTTP::Put,\n    :delete =&gt; Net::HTTP::Delete\n}\n\ndef initialize(endpoint = ENDPOINT)\n    uri = URI.parse(endpoint)\n    @http = Net::HTTP.new(uri.host, uri.port)\nend\n\ndef get(path, params)\n    request_json :get, path, params\nend\n\ndef post(path, params)\n    request_json :post, APP_LOCATION + path, params\nend\n\ndef put(path, params)\n    request_json :put, path, params\nend\n\ndef delete(path, params)\n    request_json :delete, path, params\nend\n\nprivate\ndef request_json(method, path, params)\n    response = request(method, path, params)\n    body = JSON.parse(response.body)\n\n    OpenStruct.new(:code =&gt; response.code, :body =&gt; body)\nrescue JSON::ParserError\n    response\nend\n\ndef request(method, path, params = {})\n    case method     \n    when :get\n        full_path = encode_path_params(path, params)\n        request = VERB_MAP[method.to_sym].new(full_path)\n    else            \n        request = VERB_MAP[method.to_sym].new(path)\n        request.set_form_data(params)\n    end\n    @http.request(request)\nend\n\ndef encode_path_params(path, params)\n    encoded = URI.encode_www_form(params)\n    [path, encoded].join(\"?\")\nend\n\nend\n</code></pre>\n\n<p>If I post to the server using Advanced Rest Client and put the apikey in the </p>\n\n<pre><code>http://localhost/task_manager/v1/tasks?=\n</code></pre>\n\n<p>header</p>\n\n<pre><code>Authorization: 9c62acdda8fe12507a435345bb9b2338\n</code></pre>\n\n<p>and in the body</p>\n\n<pre><code>email=free%40mail.com&amp;password=free&amp;task=test\n</code></pre>\n\n<p>then I get</p>\n\n<pre><code>    {\nerror: false\nmessage: \"Task created successfully\"\ntask_id: 5\n}\n</code></pre>\n\n<p>So how can I post it using this class?.</p>\n\n<pre><code>        connection = Connection.new\n        result = connection.post(\"task\", {'task' =&gt; 'task'})\n</code></pre>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1447817484, "post_id": 33770268, "comment_id": 55310059, "body": "When you give an example, you should 1) pare it down to smallest size necessary to make your point (e.g, could you not have, say, 4 4x4 blocks?); 2) assign each input to a variable (e.g., <code>arr = [[[0,0...]</code>) so readers can refer to those variables in comments and answers without have to define them. If I understand your question correctly,  all the elements you are removing are zeroes, which makes it difficult to understand the question from the example."}, {"owner": {"reputation": 129, "user_id": 5472936, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0fdc9ef187ab8a54c7b36151f90ce73e?s=128&d=identicon&r=PG&f=1", "display_name": "Mandar Dalvi", "link": "https://stackoverflow.com/users/5472936/mandar-dalvi"}, "edited": false, "score": 0, "creation_date": 1447969923, "post_id": 33770268, "comment_id": 55395698, "body": "Cary Swoveland, I will make sure to simply my questions from next time."}], "answers": [{"comments": [{"owner": {"reputation": 129, "user_id": 5472936, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0fdc9ef187ab8a54c7b36151f90ce73e?s=128&d=identicon&r=PG&f=1", "display_name": "Mandar Dalvi", "link": "https://stackoverflow.com/users/5472936/mandar-dalvi"}, "edited": false, "score": 0, "creation_date": 1447811432, "post_id": 33770343, "comment_id": 55308439, "body": "That works but it removes element from every single column. I just need to remove the 1st element from 1st,2nd and 5th column."}, {"owner": {"reputation": 129, "user_id": 5472936, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0fdc9ef187ab8a54c7b36151f90ce73e?s=128&d=identicon&r=PG&f=1", "display_name": "Mandar Dalvi", "link": "https://stackoverflow.com/users/5472936/mandar-dalvi"}, "edited": false, "score": 0, "creation_date": 1447811697, "post_id": 33770343, "comment_id": 55308519, "body": "Thanks AmitA. This solution works perfectly."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1447816568, "post_id": 33770343, "comment_id": 55309827, "body": "That&#39;s perhaps not the best reason to select an answer. Asking for the greenie wrankles."}], "tags": [], "owner": {"reputation": 3129, "user_id": 455826, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/aPD2c.jpg?s=128&g=1", "display_name": "AmitA", "link": "https://stackoverflow.com/users/455826/amita"}, "is_accepted": true, "score": -2, "last_activity_date": 1447811448, "last_edit_date": 1447811448, "creation_date": 1447810748, "answer_id": 33770343, "question_id": 33770268, "link": "https://stackoverflow.com/questions/33770268/how-to-remove-elements-from-a-3d-array-in-ruby/33770343#33770343", "title": "How to remove elements from a 3D array in ruby", "body": "<p>Try this:</p>\n\n<pre><code>array.map do |row_of_column_arrays| \n  row_of_column_arrays.each_with_index.map do |column_arr, index| \n    [0, 1, 4].include?(index) ? column_arr[1..-1] : column_arr\n  end\nend\n</code></pre>\n\n<p>Bottom-up, your array is made out of the following dimensions:</p>\n\n<p>(1) Cell</p>\n\n<p>(2) Column Array (e.g. <code>[0,0,0,2,3,0,0,5]</code>)</p>\n\n<p>(3) Row of Column Array (e.g. the first row in your question)</p>\n\n<p>(4) Array of Rows of Column Array (this is the value residing in <code>array</code>.</p>\n\n<p>So, the first <code>map</code> is applied on #4 and goes over each Row of Column Arrays (3). For each of this we run the second <code>map</code> method, which goes over each Column Array (2). We simply return from that block that particular Column Array without the first element, if we are dealing with indices 0, 1, and 4 (corresponding to 1st, 2nd and 5th columns):</p>\n\n<pre><code>[0,0,0,2,3,0,0,5][1..-1]\n# =&gt; [0,0,2,3,0,0,5]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": false, "score": 0, "last_activity_date": 1447819503, "creation_date": 1447819503, "answer_id": 33771629, "question_id": 33770268, "link": "https://stackoverflow.com/questions/33770268/how-to-remove-elements-from-a-3d-array-in-ruby/33771629#33771629", "title": "How to remove elements from a 3D array in ruby", "body": "<p>If I understand your question correctly, you can do the following, where <code>arr</code> is your array:</p>\n\n<pre><code>arr_cpy = Marshal.load(Marshal.dump(arr))\n[0,1,4].each { |i| arr_cpy[i] = arr_cpy[i].transpose[1..-1].transpose }\narr_cpy\n</code></pre>\n\n<p>I've used <a href=\"http://ruby-doc.org/core-2.0.0/Marshal.html#method-c-dump\" rel=\"nofollow\">Marshal#dump</a> and <a href=\"http://ruby-doc.org/core-2.0.0/Marshal.html#method-c-load\" rel=\"nofollow\">Marshal#load</a> to make a <a href=\"http://ruby.about.com/od/advancedruby/a/deepcopy.htm\" rel=\"nofollow\">\"deep copy\"</a> of <code>arr</code>, so that <code>arr</code> will not be altered (\"mutated\"). If you wish to mutate <code>arr</code>, simply skip that step and change <code>arr_cpy</code> to <code>arr</code> in the second line.</p>\n"}], "owner": {"reputation": 129, "user_id": 5472936, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0fdc9ef187ab8a54c7b36151f90ce73e?s=128&d=identicon&r=PG&f=1", "display_name": "Mandar Dalvi", "link": "https://stackoverflow.com/users/5472936/mandar-dalvi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 65, "favorite_count": 0, "closed_date": 1447819464, "accepted_answer_id": 33770343, "answer_count": 2, "score": -3, "last_activity_date": 1447819503, "creation_date": 1447810234, "last_edit_date": 1447811297, "question_id": 33770268, "link": "https://stackoverflow.com/questions/33770268/how-to-remove-elements-from-a-3d-array-in-ruby", "closed_reason": "Needs details or clarity", "title": "How to remove elements from a 3D array in ruby", "body": "<p>I am trying to remove first element from the every 1D array in the 1st, 2nd and 5th column.\nThe 3D array looks like</p>\n\n<pre><code>       1st col              2nd col                       3rd col                  4th col                  5th col\n[\n[[0, 0, 0, 2, 3, 0, 0, 5], [0, 0, 0, 0, 0, 0, 0, 0], [0, 0, 0, 0, 0, 0, 0, 0], [0, 0, 0, 0, 0, 0, 0, 0], [0, 0, 0, 0, 0, 0, 0, 0]], \n[[0, 0, 0, 0, 0, 0, 0, 0], [0, 0, 0, 0, 0, 0, 0, 0], [0, 0, 0, 0, 0, 0, 0, 0], [0, 0, 0, 0, 0, 0, 0, 0], [0, 0, 0, 0, 0, 0, 0, 0]],\n[[0, 0, 0, 0, 0, 0, 0, 0], [0, 0, 0, 0, 0, 0, 0, 0], [0, 0, 0, 0, 0, 0, 0, 0], [0, 0, 0, 0, 0, 0, 0, 0], [0, 0, 0, 0, 0, 0, 0, 0]], \n[[0, 0, 0, 0, 0, 0, 0, 0], [0, 0, 0, 0, 0, 0, 0, 0], [0, 0, 0, 0, 0, 0, 0, 0], [0, 0, 0, 0, 0, 0, 0, 0], [0, 0, 0, 0, 0, 0, 0, 0]],\n[[0, 0, 0, 0, 0, 0, 0, 0], [0, 0, 0, 0, 0, 0, 0, 0], [0, 0, 0, 0, 0, 0, 0, 0], [0, 0, 0, 0, 0, 0, 0, 0], [0, 0, 0, 0, 0, 0, 0, 0]],\n[[0, 0, 0, 0, 0, 0, 0, 0], [0, 0, 0, 0, 0, 0, 0, 0], [0, 0, 0, 0, 0, 0, 0, 0], [0, 0, 0, 0, 0, 0, 0, 0], [0, 0, 0, 0, 0, 0, 0, 0]], \n[[0, 0, 0, 0, 0, 0, 0, 0], [0, 0, 0, 0, 0, 0, 0, 0], [0, 0, 0, 0, 0, 0, 0, 0], [0, 0, 0, 0, 0, 0, 0, 0], [0, 0, 0, 0, 0, 0, 0, 0]], \n[[0, 0, 0, 0, 0, 0, 0, 0], [0, 0, 0, 0, 0, 0, 0, 0], [0, 0, 0, 0, 0, 0, 0, 0], [0, 0, 0, 0, 0, 0, 0, 0], [0, 0, 0, 0, 0, 0, 0, 0]]\n]\n</code></pre>\n\n<p>Desired 3D array should look like</p>\n\n<pre><code>       1st col              2nd col                       3rd col                  4th col                  5th col\n\n[\n[[ 0, 0, 2, 3, 0, 0, 5], [ 0, 0, 0, 0, 0, 0, 0], [0, 0, 0, 0, 0, 0, 0, 0], [0, 0, 0, 0, 0, 0, 0, 0], [ 0, 0, 0, 0, 0, 0, 0]], \n[[ 0, 0, 0, 0, 0, 0, 0], [ 0, 0, 0, 0, 0, 0, 0], [0, 0, 0, 0, 0, 0, 0, 0], [0, 0, 0, 0, 0, 0, 0, 0], [ 0, 0, 0, 0, 0, 0, 0]],\n[[ 0, 0, 0, 0, 0, 0, 0], [ 0, 0, 0, 0, 0, 0, 0], [0, 0, 0, 0, 0, 0, 0, 0], [0, 0, 0, 0, 0, 0, 0, 0], [ 0, 0, 0, 0, 0, 0, 0]], \n[[ 0, 0, 0, 0, 0, 0, 0], [ 0, 0, 0, 0, 0, 0, 0], [0, 0, 0, 0, 0, 0, 0, 0], [0, 0, 0, 0, 0, 0, 0, 0], [ 0, 0, 0, 0, 0, 0, 0]],\n[[ 0, 0, 0, 0, 0, 0, 0], [ 0, 0, 0, 0, 0, 0, 0], [0, 0, 0, 0, 0, 0, 0, 0], [0, 0, 0, 0, 0, 0, 0, 0], [ 0, 0, 0, 0, 0, 0, 0]],\n[[ 0, 0, 0, 0, 0, 0, 0], [ 0, 0, 0, 0, 0, 0, 0], [0, 0, 0, 0, 0, 0, 0, 0], [0, 0, 0, 0, 0, 0, 0, 0], [ 0, 0, 0, 0, 0, 0, 0]], \n[[ 0, 0, 0, 0, 0, 0, 0], [ 0, 0, 0, 0, 0, 0, 0], [0, 0, 0, 0, 0, 0, 0, 0], [0, 0, 0, 0, 0, 0, 0, 0], [ 0, 0, 0, 0, 0, 0, 0]], \n[[ 0, 0, 0, 0, 0, 0, 0], [ 0, 0, 0, 0, 0, 0, 0], [0, 0, 0, 0, 0, 0, 0, 0], [0, 0, 0, 0, 0, 0, 0, 0], [ 0, 0, 0, 0, 0, 0, 0]]\n]\n</code></pre>\n\n<p>I am not sure what is best way to do this in ruby.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4"], "comments": [{"owner": {"reputation": 18224, "user_id": 406987, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8865b16d4f3493cfae865af2b3247fd3?s=128&d=identicon&r=PG", "display_name": "Doon", "link": "https://stackoverflow.com/users/406987/doon"}, "edited": false, "score": 0, "creation_date": 1447808695, "post_id": 33770019, "comment_id": 55307683, "body": "What are units stored as? Strings.  Something like minutes.  You could possibly use eval. But is is possible to standardize and change db to store duration in only 1 unit?"}], "answers": [{"comments": [{"owner": {"reputation": 1038, "user_id": 708964, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/gIRPQ.png?s=128&g=1", "display_name": "Carl", "link": "https://stackoverflow.com/users/708964/carl"}, "edited": false, "score": 1, "creation_date": 1447809101, "post_id": 33770073, "comment_id": 55307767, "body": "That&#39;s exactly it! I can&#39;t mark it as the answer for another 5 minutes though. Thanks!"}, {"owner": {"reputation": 2278, "user_id": 3728916, "user_type": "registered", "accept_rate": 49, "profile_image": "https://i.stack.imgur.com/Zmke4.jpg?s=128&g=1", "display_name": "ImranNaqvi", "link": "https://stackoverflow.com/users/3728916/imrannaqvi"}, "reply_to_user": {"reputation": 1038, "user_id": 708964, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/gIRPQ.png?s=128&g=1", "display_name": "Carl", "link": "https://stackoverflow.com/users/708964/carl"}, "edited": false, "score": 0, "creation_date": 1447813760, "post_id": 33770073, "comment_id": 55309091, "body": "@unclesol dude you even didn&#39;t marked it after more than 1 hour :P"}, {"owner": {"reputation": 7433, "user_id": 423384, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d00ee8458992eaf37c0562b306ff8ed7?s=128&d=identicon&r=PG", "display_name": "Josh", "link": "https://stackoverflow.com/users/423384/josh"}, "edited": false, "score": 0, "creation_date": 1447834944, "post_id": 33770073, "comment_id": 55316429, "body": "Be careful sending arbitrary strings!  You need to make sure your DB is locked down to only allow the unit strings you want.  For example, a hacker could potentially set the units to &#39;~&#39; converting your duration to a negative number and travel back in time.  It&#39;s best to whitelist this at the database level.  It&#39;s a good idea to pretend to be a malicious user and see what security holes are in your code."}, {"owner": {"reputation": 7433, "user_id": 423384, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d00ee8458992eaf37c0562b306ff8ed7?s=128&d=identicon&r=PG", "display_name": "Josh", "link": "https://stackoverflow.com/users/423384/josh"}, "edited": false, "score": 0, "creation_date": 1447835272, "post_id": 33770073, "comment_id": 55316613, "body": "If they were able to set the unit to &#39;exabytes&#39; that could end up w/ some interesting large numbers :)"}, {"owner": {"reputation": 1038, "user_id": 708964, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/gIRPQ.png?s=128&g=1", "display_name": "Carl", "link": "https://stackoverflow.com/users/708964/carl"}, "edited": false, "score": 0, "creation_date": 1449516579, "post_id": 33770073, "comment_id": 56031250, "body": "Fortunately, this process is run after the data is entered into the database, and the model validations make sure the data is valid when they are entered."}], "tags": [], "owner": {"reputation": 22836, "user_id": 152786, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/581hP.jpg?s=128&g=1", "display_name": "smathy", "link": "https://stackoverflow.com/users/152786/smathy"}, "is_accepted": true, "score": 0, "last_activity_date": 1447808971, "creation_date": 1447808971, "answer_id": 33770073, "question_id": 33770019, "link": "https://stackoverflow.com/questions/33770019/how-do-i-add-a-variable-amount-of-time-to-a-datetime-variable-in-ruby-and-or-rai/33770073#33770073", "title": "How Do I Add a variable amount of Time to a Datetime variable in Ruby and/or Rails?", "body": "<p>What you're trying to do is:</p>\n\n<pre><code>@event.duration.public_send(@event.unit.downcase)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 7433, "user_id": 423384, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d00ee8458992eaf37c0562b306ff8ed7?s=128&d=identicon&r=PG", "display_name": "Josh", "link": "https://stackoverflow.com/users/423384/josh"}, "is_accepted": false, "score": 0, "last_activity_date": 1447835665, "creation_date": 1447835665, "answer_id": 33775125, "question_id": 33770019, "link": "https://stackoverflow.com/questions/33770019/how-do-i-add-a-variable-amount-of-time-to-a-datetime-variable-in-ruby-and-or-rai/33775125#33775125", "title": "How Do I Add a variable amount of Time to a Datetime variable in Ruby and/or Rails?", "body": "<p>If you are able to, you may want to store the duration in minutes (as an integer possibly) in your DB or another similar unit and then convert to days or hours for display.</p>\n\n<p>This would make it easier to whitelist the units when storing the data from the user and set up validations to make sure your data is valid.</p>\n\n<p>Also, this will give you extra flexibility, so you can easily have a duration of 1 day 3 hours and 15 minutes if you want to (1,635 minutes) and it will give you the ability to easily sort the events by duration if you want.</p>\n"}], "owner": {"reputation": 1038, "user_id": 708964, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/gIRPQ.png?s=128&g=1", "display_name": "Carl", "link": "https://stackoverflow.com/users/708964/carl"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 185, "favorite_count": 0, "accepted_answer_id": 33770073, "answer_count": 2, "score": 0, "last_activity_date": 1447835665, "creation_date": 1447808574, "question_id": 33770019, "link": "https://stackoverflow.com/questions/33770019/how-do-i-add-a-variable-amount-of-time-to-a-datetime-variable-in-ruby-and-or-rai", "title": "How Do I Add a variable amount of Time to a Datetime variable in Ruby and/or Rails?", "body": "<p>I have an events table in my database, which stores a start field (datetime) and a duration field (integer) as well as a unit field (string - Minutes, Hours or Days). In order to derive the end date, I need to add the duration (according to units) to the start. Something like this...</p>\n\n<pre><code>@end = @event.start + (@event.duration).(@event.unit)\n</code></pre>\n\n<p>I'm just not sure how to accomplish this in Ruby/Rails. </p>\n"}, {"tags": ["ruby", "file"], "comments": [{"owner": {"reputation": 2194, "user_id": 2142505, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99f16433508978bc7ab06ee6fd8f124b?s=128&d=identicon&r=PG", "display_name": "davejagoda", "link": "https://stackoverflow.com/users/2142505/davejagoda"}, "edited": false, "score": 2, "creation_date": 1447807589, "post_id": 33769865, "comment_id": 55307367, "body": "use a checksum like shasum - if the shasums are the same, the contents are very likely to be the same."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 1, "creation_date": 1447809420, "post_id": 33769865, "comment_id": 55307862, "body": "Are you asking if the files contents are identical?"}, {"owner": {"reputation": 2429, "user_id": 594916, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/55d19990ceaa2f85a9196dc5e8f6ea7b?s=128&d=identicon&r=PG", "display_name": "Melanie Shebel", "link": "https://stackoverflow.com/users/594916/melanie-shebel"}, "edited": false, "score": 0, "creation_date": 1447809587, "post_id": 33769865, "comment_id": 55307912, "body": "Yeah, I just need to know if each pair (pppp.txt and ff_pppp.txt) is identical. I&#39;m not checking for overall uniqueness... there is a chance that pppp.txt is identical to nnnn.txt, but if so, it&#39;s irrelevant, because I only need to know if the pairs are a match."}], "answers": [{"tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": true, "score": 20, "last_activity_date": 1447809360, "creation_date": 1447809360, "answer_id": 33770135, "question_id": 33769865, "link": "https://stackoverflow.com/questions/33769865/how-to-bulk-check-whether-files-have-the-same-content/33770135#33770135", "title": "How to bulk check whether files have the same content", "body": "<pre><code>require 'fileutils'\n\nFileUtils.compare_file('file1','file2')\n</code></pre>\n\n<p>returns <code>true</code> if and only if files <code>file1</code> and <code>file2</code> are identical.</p>\n"}], "owner": {"reputation": 2429, "user_id": 594916, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/55d19990ceaa2f85a9196dc5e8f6ea7b?s=128&d=identicon&r=PG", "display_name": "Melanie Shebel", "link": "https://stackoverflow.com/users/594916/melanie-shebel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2745, "favorite_count": 1, "accepted_answer_id": 33770135, "answer_count": 1, "score": 8, "last_activity_date": 1614634982, "creation_date": 1447807407, "last_edit_date": 1614634982, "question_id": 33769865, "link": "https://stackoverflow.com/questions/33769865/how-to-bulk-check-whether-files-have-the-same-content", "title": "How to bulk check whether files have the same content", "body": "<p>I would like to use Ruby to check if each of several thousand pairs of files contain identical information. Could someone point me in the right direction?</p>\n"}, {"tags": ["ruby", "api", "oauth", "xero-api"], "answers": [{"tags": [], "owner": {"reputation": 469, "user_id": 1132060, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/675a8ade256fd7226ab5a4829df4033c?s=128&d=identicon&r=PG", "display_name": "gorlaz", "link": "https://stackoverflow.com/users/1132060/gorlaz"}, "is_accepted": true, "score": 0, "last_activity_date": 1447925470, "creation_date": 1447925470, "answer_id": 33799906, "question_id": 33769713, "link": "https://stackoverflow.com/questions/33769713/issue-with-headers-when-using-oauth-token-to-connect-to-xero-api-via-httparty/33799906#33799906", "title": "Issue with Headers when using oAuth token to connect to Xero API via HTTParty", "body": "<p>Gave up trying to sort it out that way and sifted through the gem until I found an authorise from access token method which works fine;</p>\n\n<pre><code>require 'xeroizer'\n\nclient = Xeroizer::PublicApplication.new(XERO_CONS_KEY, XERO_CONS_SECRET)\nclient.authorize_from_access(TOKEN, TOKEN_SECRET)\n\nputs client.Organisation.all\n</code></pre>\n"}], "owner": {"reputation": 469, "user_id": 1132060, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/675a8ade256fd7226ab5a4829df4033c?s=128&d=identicon&r=PG", "display_name": "gorlaz", "link": "https://stackoverflow.com/users/1132060/gorlaz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 307, "favorite_count": 0, "accepted_answer_id": 33799906, "answer_count": 1, "score": 0, "last_activity_date": 1447925470, "creation_date": 1447806501, "question_id": 33769713, "link": "https://stackoverflow.com/questions/33769713/issue-with-headers-when-using-oauth-token-to-connect-to-xero-api-via-httparty", "title": "Issue with Headers when using oAuth token to connect to Xero API via HTTParty", "body": "<p>I'm trying to connect to the Xero API via a Public application, and I've got a separate process that does the oAuth flow which stores off the token and token secret which I then turn around to use in this script.</p>\n\n<p>My issue is when I go to use that token in a HTTParty call, I keep getting a Consumer_key_unknown error and I'm not sure why.</p>\n\n<p>Script;</p>\n\n<pre><code>require 'httparty'\n\ndef nonce_generator()\n  random = Random.new\n  random.rand(100000000000)\nend\n\n//statics for testing\nXERO_API_URL = 'https://api.xero.com/api.xro/2.0/'\nTOKEN = \"token received back from initial oauth process\"\nTOKEN_SECRET = \"token secret received back from initial oauth process\"\nXERO_CONS_KEY = \"my cons key per Xero Developer/Applications page\"\nXERO_CONS_SECRET = \"my cons secret per Xero Developer/Applications page\"\nAUTH = \"oauth_consumer_key=#{XERO_CONS_KEY}&amp;\n    oauth_token=#{TOKEN}&amp;\n    oauth_token_secret=#{TOKEN_SECRET}&amp;\n    oauth_signature_method=RSA-SHA1&amp;\n    oauth_timestamp=#{Time.now.to_i}&amp;\n    oauth_nonce=#{nonce_generator()}\"\n\n//test it works\nxero_accounts =  HTTParty.get(\"#{XERO_API_URL}/accounts\", :headers =&gt; { \"Authorization\" =&gt; AUTH }, \"Accept\" =&gt; \"application/json\")\n</code></pre>\n\n<p>NB: I've split AUTH across multiple lines here for ease of viewing they're all on one line in my script.</p>\n\n<p>I've tried swapping AUTH out for either;</p>\n\n<pre><code>AUTH = \"Token #{TOKEN}\"\nAUTH = \"Bearer #{TOKEN}\"\n</code></pre>\n\n<p>to no effect. I've used a similar script with the Kounta API which works via the Bearer token.</p>\n\n<p>I've thought about using the Xeroizer/Xero Gateway gems but both are built with the aim of doing the oAuth for you and carrying that forward, whereas I've already done that as a separate process.</p>\n\n<p>Any comments welcomed!</p>\n"}, {"tags": ["ruby", "ruby-on-rails-4", "spree", "strong-parameters"], "comments": [{"owner": {"reputation": 3706, "user_id": 3700798, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LpxP2.png?s=128&g=1", "display_name": "svelandiag", "link": "https://stackoverflow.com/users/3700798/svelandiag"}, "edited": false, "score": 0, "creation_date": 1448216309, "post_id": 33769193, "comment_id": 55481178, "body": "&quot;I think it might be better to add it in ApplicationController or some other file that gets reloaded with the app though. You might experience issues where rails would reload the app code and attributes would be missing on that class accessor&quot; - Cited from the github thread... did you tried in ApplicationController?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user2536065"}, "edited": false, "score": 0, "creation_date": 1448534860, "post_id": 33769193, "comment_id": 55632812, "body": "Have you tried putting it in an initializer, as was suggested in the update of the article you posted? (<a href=\"http://www.rubycoloredglasses.com/2014/04/strong-parameters-with-spree-extensions/\" rel=\"nofollow noreferrer\">rubycoloredglasses.com/2014/04/&hellip;</a>)"}, {"owner": {"reputation": 195, "user_id": 2623762, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hcQjX.png?s=128&g=1", "display_name": "Ramkumar K R", "link": "https://stackoverflow.com/users/2623762/ramkumar-k-r"}, "edited": false, "score": 0, "creation_date": 1466486871, "post_id": 33769193, "comment_id": 63322142, "body": "I also have a couple of custom attributes and I added <code>Spree::PermittedAttributes.shipment_attributes &lt;&lt; :my_custom_attribute</code> in config/initializers/spree.rb (at the end) and it worked for me"}, {"owner": {"reputation": 608, "user_id": 1945693, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/MeB76.jpg?s=128&g=1", "display_name": "Anoop Kanyan", "link": "https://stackoverflow.com/users/1945693/anoop-kanyan"}, "edited": false, "score": 0, "creation_date": 1467668650, "post_id": 33769193, "comment_id": 63810597, "body": "Did you find any alternative approach? Because, putting it in spree.rb is probably not the best approach."}, {"owner": {"reputation": 3655, "user_id": 1267729, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1e487a17a60371229131bb99b7852a48?s=128&d=identicon&r=PG", "display_name": "Shelvacu", "link": "https://stackoverflow.com/users/1267729/shelvacu"}, "reply_to_user": {"reputation": 608, "user_id": 1945693, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/MeB76.jpg?s=128&g=1", "display_name": "Anoop Kanyan", "link": "https://stackoverflow.com/users/1945693/anoop-kanyan"}, "edited": false, "score": 1, "creation_date": 1467672215, "post_id": 33769193, "comment_id": 63811472, "body": "@anoop No, although I may have fsck&#39;d up my installation so try the solutions I linked, they may work for you even though they didn&#39;t work for me."}], "answers": [{"comments": [{"owner": {"reputation": 3655, "user_id": 1267729, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1e487a17a60371229131bb99b7852a48?s=128&d=identicon&r=PG", "display_name": "Shelvacu", "link": "https://stackoverflow.com/users/1267729/shelvacu"}, "edited": false, "score": 0, "creation_date": 1448645283, "post_id": 33946588, "comment_id": 55681927, "body": "See my edit about telling me to try things in the links I posted."}, {"owner": {"reputation": 47232, "user_id": 1772830, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Qtoqg.jpg?s=128&g=1", "display_name": "Andrey Deineko", "link": "https://stackoverflow.com/users/1772830/andrey-deineko"}, "reply_to_user": {"reputation": 3655, "user_id": 1267729, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1e487a17a60371229131bb99b7852a48?s=128&d=identicon&r=PG", "display_name": "Shelvacu", "link": "https://stackoverflow.com/users/1267729/shelvacu"}, "edited": false, "score": 0, "creation_date": 1448653429, "post_id": 33946588, "comment_id": 55685131, "body": "I did not mean to irritate or provoke you. I do not imagine a case though, in which my solution with app_controller would not affect the situation. But, as you say so"}], "tags": [], "owner": {"reputation": 47232, "user_id": 1772830, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Qtoqg.jpg?s=128&g=1", "display_name": "Andrey Deineko", "link": "https://stackoverflow.com/users/1772830/andrey-deineko"}, "is_accepted": false, "score": 0, "last_activity_date": 1448570577, "last_edit_date": 1448570577, "creation_date": 1448570055, "answer_id": 33946588, "question_id": 33769193, "link": "https://stackoverflow.com/questions/33769193/spree-3-0-adding-to-permitted-attributes-in-extension/33946588#33946588", "title": "Spree 3.0 adding to permitted attributes in extension", "body": "<p>As it is stated <a href=\"https://github.com/spree/spree/pull/3566#issuecomment-36420097\" rel=\"nofollow\">here</a> you could put it just into <code>ApplicationController</code>.</p>\n\n<p>Or you could override the whole permitted_params,adding yours to whitelisted (by either putting this code straight into <code>application_controller.rb</code> after last <code>end</code>, which will 100% work, or by creating a new file(for example under lib, as you have already tried)):</p>\n\n<pre><code>module Spree\n  module PermittedAttributes\n\n    # bunch of code\n\n    @@checkout_attributes = %i(\n      email\n      use_billing\n      shipping_method_id\n      coupon_code\n      my_custom_attribute\n    )\n\n    # bunch of code\n\n  end\nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2377, "user_id": 959634, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/9c23af4ac1ba2152ff33776713e0c297?s=128&d=identicon&r=PG", "display_name": "Thomas", "link": "https://stackoverflow.com/users/959634/thomas"}, "is_accepted": false, "score": 4, "last_activity_date": 1467314277, "last_edit_date": 1467314277, "creation_date": 1467313972, "answer_id": 38131487, "question_id": 33769193, "link": "https://stackoverflow.com/questions/33769193/spree-3-0-adding-to-permitted-attributes-in-extension/38131487#38131487", "title": "Spree 3.0 adding to permitted attributes in extension", "body": "<p>\"spree.rb\" actually means <code>config/initializers/spree.rb</code>.  This is the proper place for spree config.  I noticed you/that article mentioned various files, but never this file.</p>\n\n<p>Once in this file either:</p>\n\n<pre><code>Spree::PermittedAttributes.shipment_attributes &lt;&lt; :my_custom_attribute\n</code></pre>\n\n<p>as you mentioned or </p>\n\n<pre><code>Spree::PermittedAttributes.shipment_attributes.push :my_custom_attribute\n</code></pre>\n\n<p>If that doesn't work you will need to provide more detail.</p>\n"}], "owner": {"reputation": 3655, "user_id": 1267729, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1e487a17a60371229131bb99b7852a48?s=128&d=identicon&r=PG", "display_name": "Shelvacu", "link": "https://stackoverflow.com/users/1267729/shelvacu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2027, "favorite_count": 0, "answer_count": 2, "score": 9, "last_activity_date": 1481821395, "creation_date": 1447803626, "last_edit_date": 1481821395, "question_id": 33769193, "link": "https://stackoverflow.com/questions/33769193/spree-3-0-adding-to-permitted-attributes-in-extension", "title": "Spree 3.0 adding to permitted attributes in extension", "body": "<p>So I'm making a spree extension in which I have my own attribute that I added to <code>Spree::Shipment</code> and added an input during the checkout process, the problem is my attribute is not part of the permitted attributes for shipments, and it is not clear how to add it to the permitted attributes. I found the conversation on <a href=\"https://github.com/spree/spree/pull/3566\" rel=\"nofollow noreferrer\">this pull req</a> which says to use </p>\n\n<pre><code>Spree::PermittedAttributes.shipment_attributes &lt;&lt; :my_custom_attribute\n</code></pre>\n\n<p>However, it is unclear <em>where do I put this!?</em></p>\n\n<p>\"Oh, put it in <code>spree.rb</code>\"</p>\n\n<p>This doesn't help. I have tried putting this code in </p>\n\n<pre><code>lib/spree.rb\nlib/spree/permitted_attributes.rb\nlib/spree_decorator.rb\nlib/spree/permitted_attributes_decorator.rb\n</code></pre>\n\n<p>(<a href=\"http://www.rubycoloredglasses.com/2014/04/strong-parameters-with-spree-extensions/\" rel=\"nofollow noreferrer\">as suggested here</a>) and all of these result in either an error complaining about <code>shipment_attributes</code> not being defined (so presumably the code is run before the main file defining <code>PermittedAttributes</code> is evaluated) or simply nothing happens. Where should I put this code to add my attribute to the list of permitted attributes?</p>\n\n<hr>\n\n<p>Edit: Since this seems unclear to people, I have tried all of the things listed in the links I have posted. Telling me to try the things in them is quite infuriating. Stop doing that.</p>\n"}, {"tags": ["ruby", "string"], "answers": [{"comments": [{"owner": {"reputation": 798, "user_id": 652779, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/bfdf2256663085a64c468c4b4c0f62f4?s=128&d=identicon&r=PG", "display_name": "Lomefin", "link": "https://stackoverflow.com/users/652779/lomefin"}, "edited": false, "score": 0, "creation_date": 1447803703, "post_id": 33769088, "comment_id": 55306080, "body": "But the first one can give you a one liner result whereas the second one must include a return statement."}, {"owner": {"reputation": 5019, "user_id": 592795, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/913acc75c0777600b8c85ae549b099df?s=128&d=identicon&r=PG", "display_name": "marimaf", "link": "https://stackoverflow.com/users/592795/marimaf"}, "edited": false, "score": 0, "creation_date": 1447903579, "post_id": 33769088, "comment_id": 55356075, "body": "There&#39;s a ruby method for this, check my answer"}, {"owner": {"reputation": 798, "user_id": 652779, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/bfdf2256663085a64c468c4b4c0f62f4?s=128&d=identicon&r=PG", "display_name": "Lomefin", "link": "https://stackoverflow.com/users/652779/lomefin"}, "edited": false, "score": 0, "creation_date": 1447961087, "post_id": 33769088, "comment_id": 55390740, "body": "But here you are assuming that Ruby = Rails (but that was my case, anyway)"}], "tags": [], "owner": {"reputation": 11698, "user_id": 309641, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/YuQvL.jpg?s=128&g=1", "display_name": "David Zorychta", "link": "https://stackoverflow.com/users/309641/david-zorychta"}, "is_accepted": true, "score": 0, "last_activity_date": 1447934431, "last_edit_date": 1447934431, "creation_date": 1447803064, "answer_id": 33769088, "question_id": 33769059, "link": "https://stackoverflow.com/questions/33769059/add-extra-text-to-a-string-if-its-long-enough/33769088#33769088", "title": "Add extra text to a string if it&#39;s long enough", "body": "<p>You can do it with a quick-if:</p>\n\n<pre><code>string.length &gt; 30 ? string[0..30]+'...' : string\n</code></pre>\n\n<p>Or a more \"ruby way\" using an if statement:</p>\n\n<pre><code>string = string[0..30] + '...' if string.length &gt; 30\n</code></pre>\n\n<p>in this second example if the string is shorter or equal to 30 characters then it's left untouched.</p>\n\n<p>or another way (as @marimaf pointed out) is to use the <code>truncate</code> method:</p>\n\n<pre><code>string.truncate(30)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 798, "user_id": 652779, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/bfdf2256663085a64c468c4b4c0f62f4?s=128&d=identicon&r=PG", "display_name": "Lomefin", "link": "https://stackoverflow.com/users/652779/lomefin"}, "is_accepted": false, "score": 0, "last_activity_date": 1447803878, "creation_date": 1447803878, "answer_id": 33769250, "question_id": 33769059, "link": "https://stackoverflow.com/questions/33769059/add-extra-text-to-a-string-if-its-long-enough/33769250#33769250", "title": "Add extra text to a string if it&#39;s long enough", "body": "<p>My first thought was of</p>\n\n<pre><code>\"#{string[0..30]}#{'...' if string.length &gt; 30}\"\n</code></pre>\n\n<p>But the first quick-if from @Macmee looks very good, and I guess is less expensive than my proposal.</p>\n"}, {"comments": [{"owner": {"reputation": 798, "user_id": 652779, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/bfdf2256663085a64c468c4b4c0f62f4?s=128&d=identicon&r=PG", "display_name": "Lomefin", "link": "https://stackoverflow.com/users/652779/lomefin"}, "edited": false, "score": 0, "creation_date": 1447961345, "post_id": 33771708, "comment_id": 55390867, "body": "I&#39;ve tried that one and didn&#39;t work if you try it with N &lt; string.length it only shows the ellipsis."}, {"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "reply_to_user": {"reputation": 798, "user_id": 652779, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/bfdf2256663085a64c468c4b4c0f62f4?s=128&d=identicon&r=PG", "display_name": "Lomefin", "link": "https://stackoverflow.com/users/652779/lomefin"}, "edited": false, "score": 0, "creation_date": 1447962637, "post_id": 33771708, "comment_id": 55391625, "body": "@Lomefin Sorry. I fixed it."}], "tags": [], "owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "is_accepted": false, "score": 2, "last_activity_date": 1447962626, "last_edit_date": 1447962626, "creation_date": 1447820000, "answer_id": 33771708, "question_id": 33769059, "link": "https://stackoverflow.com/questions/33769059/add-extra-text-to-a-string-if-its-long-enough/33771708#33771708", "title": "Add extra text to a string if it&#39;s long enough", "body": "<pre><code>\"some string\".sub(/(.{31,})/, '\\1...')\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 798, "user_id": 652779, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/bfdf2256663085a64c468c4b4c0f62f4?s=128&d=identicon&r=PG", "display_name": "Lomefin", "link": "https://stackoverflow.com/users/652779/lomefin"}, "edited": false, "score": 0, "creation_date": 1447961623, "post_id": 33794724, "comment_id": 55391017, "body": "Not a ruby method, a Rails method."}], "tags": [], "owner": {"reputation": 5019, "user_id": 592795, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/913acc75c0777600b8c85ae549b099df?s=128&d=identicon&r=PG", "display_name": "marimaf", "link": "https://stackoverflow.com/users/592795/marimaf"}, "is_accepted": false, "score": 0, "last_activity_date": 1448247769, "last_edit_date": 1448247769, "creation_date": 1447903545, "answer_id": 33794724, "question_id": 33769059, "link": "https://stackoverflow.com/questions/33769059/add-extra-text-to-a-string-if-its-long-enough/33794724#33794724", "title": "Add extra text to a string if it&#39;s long enough", "body": "<p>There is a rails method that does what you need, its called <a href=\"http://apidock.com/rails/String/truncate\" rel=\"nofollow\">truncate</a></p>\n\n<p>It works like this, lets say N = 5:</p>\n\n<pre><code> \"some string\".truncate(5)\n =&gt; \"so...\" \n</code></pre>\n\n<p>notice that in this <code>N = 5</code> it includes the ellipsis characters, so you might need <code>N + 3</code> for the example you described.</p>\n"}], "owner": {"reputation": 798, "user_id": 652779, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/bfdf2256663085a64c468c4b4c0f62f4?s=128&d=identicon&r=PG", "display_name": "Lomefin", "link": "https://stackoverflow.com/users/652779/lomefin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 62, "favorite_count": 0, "accepted_answer_id": 33769088, "answer_count": 4, "score": 0, "last_activity_date": 1448247769, "creation_date": 1447802939, "last_edit_date": 1447819830, "question_id": 33769059, "link": "https://stackoverflow.com/questions/33769059/add-extra-text-to-a-string-if-its-long-enough", "title": "Add extra text to a string if it&#39;s long enough", "body": "<p>I want to add an ellipsis <code>...</code> to a string if the string is more than <code>N</code> characters long. For example, for <code>N = 11</code>,</p>\n\n<pre><code>ellipse_if_necessary('Hello') # =&gt; \"Hello\"\nellipse_if_necessary('Hello world, how are you') # =&gt; \"Hello world...\"\n</code></pre>\n\n<p>What is the simplest way to do it?</p>\n"}, {"tags": ["python", "ruby", "hash", "sha256", "hashlib"], "answers": [{"tags": [], "owner": {"reputation": 601, "user_id": 825916, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/03920ebc1f9fa07ee85825259a2da239?s=128&d=identicon&r=PG", "display_name": "jermenkoo", "link": "https://stackoverflow.com/users/825916/jermenkoo"}, "is_accepted": false, "score": 1, "last_activity_date": 1614685851, "last_edit_date": 1614685851, "creation_date": 1447801902, "answer_id": 33768855, "question_id": 33768598, "link": "https://stackoverflow.com/questions/33768598/ruby-sha-256-hexidigest-values-are-different-from-what-python-generates/33768855#33768855", "title": "ruby sha 256 hexidigest values are different from what python generates", "body": "<p>I get the same results using the following code:</p>\n<h3>Python 3.5.0:</h3>\n<pre><code>import hashlib\n&gt;&gt;&gt; hashlib.sha256(&quot;xyz&quot;.encode()).hexdigest()\n'3608bca1e44ea6c4d268eb6db02260269892c0b42b86bbf1e77a6fa16c3c9282'\n</code></pre>\n<h3>Ruby 2.2.3</h3>\n<pre><code>require 'digest'\n\nDigest::SHA256.hexdigest(&quot;xyz&quot;)\n# =&gt; &quot;3608bca1e44ea6c4d268eb6db02260269892c0b42b86bbf1e77a6fa16c3c9282&quot;\n\nOR\n\nH = Digest::SHA256.new\n# =&gt; #&lt;Digest::SHA256: e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855&gt;\nH &lt;&lt; &quot;xyz&quot;\n# =&gt; #&lt;Digest::SHA256: 3608bca1e44ea6c4d268eb6db02260269892c0b42b86bbf1e77a6fa16c3c9282&gt;\nH.hexdigest\n# =&gt; &quot;3608bca1e44ea6c4d268eb6db02260269892c0b42b86bbf1e77a6fa16c3c9282&quot;\n</code></pre>\n<p>The issue lied within (in my opinion), that:</p>\n<pre><code>hasher = Digest::SHA256.digest(&quot;xyz&quot;)\n# =&gt; &quot;6\\b\\xBC\\xA1\\xE4N\\xA6\\xC4\\xD2h\\xEBm\\xB0\\&quot;`&amp;\\x98\\x92\\xC0\\xB4+\\x86\\xBB\\xF1\\xE7zo\\xA1l&lt;\\x92\\x82&quot;`\n</code></pre>\n<p>which is not <code>&quot;xyz:&quot;</code>. (disclaimer: I had barely used Ruby in the past).</p>\n"}, {"tags": [], "owner": {"reputation": 79161, "user_id": 1064226, "user_type": "registered", "profile_image": "https://graph.facebook.com/36912842/picture?type=large", "display_name": "Frederick Cheung", "link": "https://stackoverflow.com/users/1064226/frederick-cheung"}, "is_accepted": true, "score": 7, "last_activity_date": 1447802007, "creation_date": 1447802007, "answer_id": 33768888, "question_id": 33768598, "link": "https://stackoverflow.com/questions/33768598/ruby-sha-256-hexidigest-values-are-different-from-what-python-generates/33768888#33768888", "title": "ruby sha 256 hexidigest values are different from what python generates", "body": "<p>The ruby code you want is just </p>\n\n<pre><code>require 'digest'\nhash   = Digest::SHA256.hexdigest(\"xyz\")\n</code></pre>\n\n<p><code>hexdigest</code> takes as argument the string to digest, so what your previous code was doing was digesting the string (returning as a raw array of 32 bytes), and then computing the SHA256 of that &amp; formatting as 64 hex characters.</p>\n\n<p>The ruby digest library does also have an api similar to your python example:</p>\n\n<pre><code>hash = Digest::SHA256.new\nhash.update 'xyz'\nhash.hexdigest\n</code></pre>\n\n<p>For when you want to compute a hash incrementally</p>\n"}], "owner": {"reputation": 407, "user_id": 3009657, "user_type": "registered", "accept_rate": 10, "profile_image": "https://www.gravatar.com/avatar/6bb03a126e83de92cb68ddd77b56fb1b?s=128&d=identicon&r=PG&f=1", "display_name": "Hound", "link": "https://stackoverflow.com/users/3009657/hound"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4005, "favorite_count": 1, "accepted_answer_id": 33768888, "answer_count": 2, "score": 3, "last_activity_date": 1614685851, "creation_date": 1447800638, "last_edit_date": 1570901886, "question_id": 33768598, "link": "https://stackoverflow.com/questions/33768598/ruby-sha-256-hexidigest-values-are-different-from-what-python-generates", "title": "ruby sha 256 hexidigest values are different from what python generates", "body": "<p>I am using hashlib library in python and Digest::SHA256.hexdigest library in ruby</p>\n\n<p>With python I tried, </p>\n\n<pre><code>import hashlib\nhasher = hashlib.sha256()\nhasher.update(\"xyz\")\nhasher.digest()\nhash = hasher.hexdigest()\nprint hash\n</code></pre>\n\n<p>output : 3608bca1e44ea6c4d268eb6db02260269892c0b42b86bbf1e77a6fa16c3c9282</p>\n\n<p>With Ruby I tried,</p>\n\n<pre><code>require 'digest'\nhasher   = Digest::SHA256.digest \"xyz\"\nhash   = Digest::SHA256.hexdigest(hasher)\n</code></pre>\n\n<p>output : \"18cefdae0f25ad7bb5f3934634513e54e5ac56d9891eb13ce456d3eb1f3e72e8\"</p>\n\n<p>Can anyone help me to understand why there is a difference? how can I get the same value as python ?</p>\n"}, {"tags": ["ruby", "selenium", "rspec", "proxy", "browsermob-proxy"], "answers": [{"tags": [], "owner": {"reputation": 3878, "user_id": 5019769, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-AZIN5bdpPvY/AAAAAAAAAAI/AAAAAAAACXQ/W8jFHU8QlO8/photo.jpg?sz=128", "display_name": "F. Stephen Q", "link": "https://stackoverflow.com/users/5019769/f-stephen-q"}, "is_accepted": true, "score": 0, "last_activity_date": 1488998705, "creation_date": 1488998705, "answer_id": 42679460, "question_id": 33768355, "link": "https://stackoverflow.com/questions/33768355/why-is-browsermob-proxy-rb-w-selenium-failing-to-record-http-traffic-arbitraril/42679460#42679460", "title": "Why is Browsermob-Proxy-rb w/ Selenium failing to record HTTP traffic arbitrarily?", "body": "<p>In case anyone searching finds this, it turned out that I had incorrectly set the proxy in the Internet Explorer Webdriver instantiation. A simple mistake leading to a lot of confusion.</p>\n"}], "owner": {"reputation": 3878, "user_id": 5019769, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-AZIN5bdpPvY/AAAAAAAAAAI/AAAAAAAACXQ/W8jFHU8QlO8/photo.jpg?sz=128", "display_name": "F. Stephen Q", "link": "https://stackoverflow.com/users/5019769/f-stephen-q"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 605, "favorite_count": 0, "accepted_answer_id": 42679460, "answer_count": 1, "score": 4, "last_activity_date": 1488998705, "creation_date": 1447799630, "last_edit_date": 1448467698, "question_id": 33768355, "link": "https://stackoverflow.com/questions/33768355/why-is-browsermob-proxy-rb-w-selenium-failing-to-record-http-traffic-arbitraril", "title": "Why is Browsermob-Proxy-rb w/ Selenium failing to record HTTP traffic arbitrarily?", "body": "<p>I've been working with the <code>Browsermob Proxy</code>, via the current release of the <a href=\"https://github.com/jarib/browsermob-proxy-rb\" rel=\"nofollow\">browsermob-proxy.rb</a> gem, to record several <code>RSpec</code> tests. </p>\n\n<p>Unfortunately, it seems to be randomly failing to record traffic. On some test runs, the traffic is recorded perfectly. On others, without any modification of the code or the environment, the har files it outputs are all but empty. The tests themselves pass without issue, but nothing is being recorded. The har files are always generated.</p>\n\n<p>I know that all of my code is being run, via my logs. So I'm unsure where exactly the problem lies. I've included some of the relevant code below:</p>\n\n<p>Har saving logic (this is called by an <code>after(:all)</code> block at the end of the tests)</p>\n\n<pre><code>  def save_har(test_name,har_dir)\n    if @proxy.nil?\n      log_proxy_helper \"Proxy instance already stopped, cannot save 'har' file\"\n    else\n      log_proxy_helper \"Saving har to #{har_dir}\"\n      filename = (\"#{test_name}.har\").gsub(' ','_')\n      path = File.expand_path(File.join(har_dir , filename))\n      if path.match(/^C:\\//)\n        path.gsub!(/\\//, \"\\\\\")\n      end\n      begin\n        @proxy.har.save_to path\n      rescue Exception =&gt; e\n        log_proxy_helper \"Error: #{e}\"\n      end\n      log_proxy_helper \"Saved har to #{path}\"\n    end\n  end\n</code></pre>\n\n<p>The proxy-creation logic (in the same file and context as above)</p>\n\n<pre><code>  def start_proxy\n    begin\n      log_proxy_helper \"Starting proxy using port #{proxy_port}\"\n      logs_path = 'logs/'\n      logs_path = ENV['WORKSPACE'] + '/logs/' if ENV['WORKSPACE']\n      @proxy_server = BrowserMob::Proxy::Server.new(browsermob_proxy_path,{:port =&gt; 9090,:log =&gt; false,:logs_path =&gt; logs_path, :use_little_proxy =&gt; false, :timeout =&gt; 30})\n      begin\n        @proxy_server.start\n      rescue Exception =&gt; e\n        log_proxy_helper \"Error: #{e}\"\n      end\n      @proxy = @proxy_server.create_proxy proxy_port\n      @proxy.new_har(:capture_binary_content =&gt; true)\n    log_proxy_helper \"Server Started\"\n    end if check_proxy_configured 'Can\\'t start proxy'\n  end\n</code></pre>\n\n<p>An example of one of the almost-empty har files generated:</p>\n\n<pre><code>{\n    \"log\": {\n        \"version\": \"1.2\",\n        \"creator\": {\n            \"name\": \"BrowserMob Proxy\",\n            \"version\": \"2.1.0-beta-3-littleproxy\",\n            \"comment\": \"\"\n        },\n        \"pages\": [\n            {\n                \"id\": \"Page 0\",\n                \"startedDateTime\": \"2015-11-17T16:18:16.695-05:00\",\n                \"title\": \"Page 0\",\n                \"pageTimings\": {\n                    \"onLoad\": 2916,\n                    \"comment\": \"\"\n                },\n                \"comment\": \"\"\n            }\n        ],\n        \"entries\": [],\n        \"comment\": \"\"\n    }\n}\n</code></pre>\n\n<p>Any ideas?</p>\n\n<p>EDIT:\nAfter some more testing, I found that this only happens with Internet Explorer; Firefox and Chrome record properly</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4"], "comments": [{"owner": {"reputation": 3665, "user_id": 4330954, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/340ffba5552ac48227741a8695a255ff?s=128&d=identicon&r=PG", "display_name": "x6iae", "link": "https://stackoverflow.com/users/4330954/x6iae"}, "edited": false, "score": 2, "creation_date": 1447800086, "post_id": 33768350, "comment_id": 55304670, "body": "your problem is with <code>forum_post.user</code>. there is no <code>user</code> on your <code>forum_post</code>"}, {"owner": {"reputation": 43, "user_id": 3468440, "user_type": "registered", "accept_rate": 12, "profile_image": "https://graph.facebook.com/1316802897/picture?type=large", "display_name": "user3468440", "link": "https://stackoverflow.com/users/3468440/user3468440"}, "reply_to_user": {"reputation": 3665, "user_id": 4330954, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/340ffba5552ac48227741a8695a255ff?s=128&d=identicon&r=PG", "display_name": "x6iae", "link": "https://stackoverflow.com/users/4330954/x6iae"}, "edited": false, "score": 0, "creation_date": 1447800840, "post_id": 33768350, "comment_id": 55304997, "body": "But there is, an unedited thread will display correctly.  I only get that error why I try to update."}, {"owner": {"reputation": 367, "user_id": 5362133, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/LzIta.png?s=128&g=1", "display_name": "weezing", "link": "https://stackoverflow.com/users/5362133/weezing"}, "edited": false, "score": 0, "creation_date": 1447802325, "post_id": 33768350, "comment_id": 55305606, "body": "Does the edit template display correctly? Could you paste show &amp; edit views?"}, {"owner": {"reputation": 43, "user_id": 3468440, "user_type": "registered", "accept_rate": 12, "profile_image": "https://graph.facebook.com/1316802897/picture?type=large", "display_name": "user3468440", "link": "https://stackoverflow.com/users/3468440/user3468440"}, "edited": false, "score": 0, "creation_date": 1447807668, "post_id": 33768350, "comment_id": 55307395, "body": "<a href=\"http://pastebin.com/wuGy9F32\" rel=\"nofollow noreferrer\">pastebin.com/wuGy9F32</a>"}, {"owner": {"reputation": 2278, "user_id": 3728916, "user_type": "registered", "accept_rate": 49, "profile_image": "https://i.stack.imgur.com/Zmke4.jpg?s=128&g=1", "display_name": "ImranNaqvi", "link": "https://stackoverflow.com/users/3728916/imrannaqvi"}, "edited": false, "score": 0, "creation_date": 1447814012, "post_id": 33768350, "comment_id": 55309165, "body": "have you sorted out your question"}], "answers": [{"comments": [{"owner": {"reputation": 43, "user_id": 3468440, "user_type": "registered", "accept_rate": 12, "profile_image": "https://graph.facebook.com/1316802897/picture?type=large", "display_name": "user3468440", "link": "https://stackoverflow.com/users/3468440/user3468440"}, "edited": false, "score": 0, "creation_date": 1447807687, "post_id": 33769759, "comment_id": 55307404, "body": "Can I get an example? Thanks"}], "tags": [], "owner": {"reputation": 311, "user_id": 2517810, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d0cc6ac8c3f852840afa8c31f0270fa9?s=128&d=identicon&r=PG", "display_name": "joem", "link": "https://stackoverflow.com/users/2517810/joem"}, "is_accepted": false, "score": 0, "last_activity_date": 1447969399, "last_edit_date": 1447969399, "creation_date": 1447806774, "answer_id": 33769759, "question_id": 33768350, "link": "https://stackoverflow.com/questions/33768350/rails-undefined-method-username-after-update/33769759#33769759", "title": "Rails: undefined method username after update", "body": "<p>You more than likely are not submitting the user_id so when you call update with the params, user_id may be set to nil.  </p>\n\n<p>You can check in advance whether you see user_id in your param hash when you submit the update.</p>\n\n<p>You can add a hidden field on the form for user_id and that ought to fix things.</p>\n\n<p>Example:</p>\n\n<pre><code>&lt;%= form_for(@forum_post) do |f| %&gt;\n    &lt;%= f.hidden_field :user_id %&gt;\n    ...\n&lt;% end %&gt;\n</code></pre>\n"}], "owner": {"reputation": 43, "user_id": 3468440, "user_type": "registered", "accept_rate": 12, "profile_image": "https://graph.facebook.com/1316802897/picture?type=large", "display_name": "user3468440", "link": "https://stackoverflow.com/users/3468440/user3468440"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 206, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1447978615, "creation_date": 1447799614, "last_edit_date": 1447978615, "question_id": 33768350, "link": "https://stackoverflow.com/questions/33768350/rails-undefined-method-username-after-update", "title": "Rails: undefined method username after update", "body": "<p>Currently trying to add a edit function to my forum threads controller, but when I click update I get undefined method username.</p>\n\n<p>Forum_threads Controller</p>\n\n<pre><code>class ForumThreadsController &lt; ApplicationController\nrequire 'forum_controller'\nbefore_action :authenticate_user!, except: [:index, :show]\nbefore_action :set_forum_thread, except: [:index, :new, :create]\n\ndef index\n@q = ForumThread.search(params[:q])\n@forum_threads = @q.result(distinct: true)\nend\n\ndef show\n@forum_post = ForumPost.new\n@forum_posts = @forum_thread.forum_posts.paginate(:page =&gt; params[:page], :per_page =&gt; 2)\nend\n\ndef new\n@forum_thread = ForumThread.new\n@forum_thread.forum_posts.new\nend\n\ndef create\n@forum_thread = current_user.forum_threads.new forum_thread_params\n@forum_thread.forum_posts.first.user_id = current_user.id\n\nif @forum_thread.save\n  redirect_to @forum_thread\nelse\n  render action: :new\nend\nend\n\ndef edit\nend\n\ndef update\nif @forum_thread.update(forum_thread_params)\nredirect_to @forum_thread\nelse\nrender 'edit'\nend\nend\n\nprivate\n\ndef set_forum_thread\n  @forum_thread = ForumThread.find(params[:id])\n  @forum_post = ForumPost.find(params[:id])\nend\n\ndef forum_thread_params\n  params.require(:forum_thread).permit(:subject, forum_posts_attributes: [:body])\nend\nend\n</code></pre>\n\n<p>Error Log</p>\n\n<pre><code>ActionView::Template::Error (undefined method `username' for nil:NilClass):\n1:\n\n\n2: &lt;%= div_for forum_post do %&gt;\n3:\nPosted by &lt;%= forum_post.user.username %&gt; &lt;%= time_ago_in_words forum_post.created_at %&gt;\n\n\n4:\n&lt;%= forum_post.body %&gt;\n\n\n5: &lt;% end %&gt;\n</code></pre>\n\n<p>If I remove the forum_post.user.username from the HTML it'll load just fine, I've tried adding @forum_post to the update but that didn't work either...</p>\n"}, {"tags": ["ruby", "selenium", "selenium-webdriver"], "answers": [{"tags": [], "owner": {"reputation": 798, "user_id": 5146424, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/1dfjN.jpg?s=128&g=1", "display_name": "MKay", "link": "https://stackoverflow.com/users/5146424/mkay"}, "is_accepted": false, "score": 0, "last_activity_date": 1447824303, "last_edit_date": 1495542190, "creation_date": 1447823942, "answer_id": 33772344, "question_id": 33768107, "link": "https://stackoverflow.com/questions/33768107/selecting-a-file-when-prompt-appears-to-upload-a-file-using-selenium-webdriver-w/33772344#33772344", "title": "Selecting a file when prompt appears to upload a file using Selenium-Webdriver with Ruby", "body": "<p>I assume you want to select file via browse and then click on <code>Upload Images</code> link. If that is the case, ID for your interest is <code>imageUpload</code>.\nCode is in Java, you can change for ruby.</p>\n\n<p>It worked for me using :</p>\n\n<pre><code>driver.findElement(By.id(\"imageUpload\")).sendKeys(\"absolutepathtoimage\\\\testImage.jpg\");\n</code></pre>\n\n<p>Check out the use of <strong>not using</strong> <code>click()</code> on button. It triggers the OS level modal dialog where selenium fails to automate.\nI referred it from <a href=\"https://stackoverflow.com/questions/16896685/how-to-upload-files-using-selenium-webdriver-in-java\">How to upload file using Selenium WebDriver in Java</a> answer given by @talktokets</p>\n"}, {"tags": [], "owner": {"reputation": 11, "user_id": 1359405, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/859cfec051f8ec27f498f388b81d75b9?s=128&d=identicon&r=PG", "display_name": "tourdedave", "link": "https://stackoverflow.com/users/1359405/tourdedave"}, "is_accepted": false, "score": 0, "last_activity_date": 1447849289, "creation_date": 1447849289, "answer_id": 33779944, "question_id": 33768107, "link": "https://stackoverflow.com/questions/33768107/selecting-a-file-when-prompt-appears-to-upload-a-file-using-selenium-webdriver-w/33779944#33779944", "title": "Selecting a file when prompt appears to upload a file using Selenium-Webdriver with Ruby", "body": "<p>When uploading files with Selenium you want to add the file path to the form (e.g., id: 'imageUpload') and then submit the form. You want to avoid triggering the system level dialog box since Selenium isn't able to handle this.</p>\n\n<p>For Ruby, it would look like this:</p>\n\n<pre><code>file_upload = driver.find_element(id: 'imageUpload')\nfile_upload.send_keys('path/to/your/file')\nfile_upload.submit\n</code></pre>\n\n<p>You can see a full write-up that steps through this <a href=\"http://elementalselenium.com/tips/1-upload-a-file\" rel=\"nofollow\">here</a>.</p>\n\n<p>And if you're looking to run your tests on a remote node (e.g., with <a href=\"https://code.google.com/p/selenium/wiki/Grid2\" rel=\"nofollow\">Selenium Grid</a> or on a third-party like <a href=\"https://saucelabs.com/\" rel=\"nofollow\">Sauce Labs</a>) then you'll want to take a look at the <a href=\"https://seleniumhq.github.io/selenium/docs/api/rb/Selenium/WebDriver/DriverExtensions/UploadsFiles.html#file_detector%3D-instance_method\" rel=\"nofollow\">file_detector</a> method.</p>\n"}], "owner": {"reputation": 1, "user_id": 5574040, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4c018469a5cb3b06226d205f6cda46e7?s=128&d=identicon&r=PG&f=1", "display_name": "D. Scarlett", "link": "https://stackoverflow.com/users/5574040/d-scarlett"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 375, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1447849289, "creation_date": 1447798618, "last_edit_date": 1447824757, "question_id": 33768107, "link": "https://stackoverflow.com/questions/33768107/selecting-a-file-when-prompt-appears-to-upload-a-file-using-selenium-webdriver-w", "title": "Selecting a file when prompt appears to upload a file using Selenium-Webdriver with Ruby", "body": "<p>I am trying to automatically select a file into an upload prompt.\nHere is the code for the upload section of the website.</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>&lt;input name=\"__RequestVerificationToken\" value=\"rAyNscZYeYLEYTV1rodwr0lQr_0Eadpfd11lcuHUvJf83lM57R2vruocFLDPjK0axYr_XBYgqmgTXVH_V2qHGFpAq-zGx_mMm72XIUj4Z6HlUjcyz47Vepfjysur7CR0N8xgHMkjW1KRgb4K6w6VPQ2\" type=\"hidden\"&gt;\r\n&lt;li&gt;\r\n  &lt;input id=\"imageUpload\" class=\"hideupload\" name=\"imageUpload\" multiple=\"\" type=\"file\"&gt;\r\n  &lt;a id=\"imageUploadLink\" href=\"#\"&gt;&lt;i class=\"addContent_icon uploadlink\"&gt;&lt;img src=\"/Content/images/addContent-icon-images.png\"&gt;&lt;/i&gt;Upload Images&lt;/a&gt;\r\n&lt;/li&gt;</code></pre>\r\n</div>\r\n</div>\r\n</p>\n\n<p>The element of interest as far as I can tell is id: imageUploadLink. Clicking that will open the prompt to select file. Here is my code.</p>\n\n<pre><code>require \"selenium-webdriver\"\nbrowser = Selenium::WebDriver.for :firefox\nsign_in(browser, myUsername, myPassword) #signs into testing site\nbrowser.find_element(:id, 'imageUploadLink').click\nelement = browser.find_element(:id, 'imageUploadLink')\nelement.send_keys \"/Users/DanielScarlett/Desktop/Example.JPG\"\n</code></pre>\n\n<p>send_keys seems to be typed into the bottom of the browser in a sort of find section that disappears quickly: <a href=\"http://imgur.com/a/7iXcW\" rel=\"nofollow\">http://imgur.com/a/7iXcW</a></p>\n\n<p>I have tried many different ways to implement this, and nothing seems to work. Also, couldn't find anything anywhere to handle this.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-3", "routes"], "comments": [{"owner": {"reputation": 91121, "user_id": 179125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5594142dcc49a24b1902ec8059181f8d?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan Running", "link": "https://stackoverflow.com/users/179125/jordan-running"}, "edited": false, "score": 0, "creation_date": 1447797983, "post_id": 33767847, "comment_id": 55303626, "body": "Did you forget to run <code>rake db:migrate</code> after generating the scaffold, perhaps?"}, {"owner": {"reputation": 653, "user_id": 4230699, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/0VBXh.gif?s=128&g=1", "display_name": "Jonathan", "link": "https://stackoverflow.com/users/4230699/jonathan"}, "reply_to_user": {"reputation": 91121, "user_id": 179125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5594142dcc49a24b1902ec8059181f8d?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan Running", "link": "https://stackoverflow.com/users/179125/jordan-running"}, "edited": false, "score": 0, "creation_date": 1447798047, "post_id": 33767847, "comment_id": 55303664, "body": "Yep - already ran. Works perfectly, except for this"}, {"owner": {"reputation": 91121, "user_id": 179125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5594142dcc49a24b1902ec8059181f8d?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan Running", "link": "https://stackoverflow.com/users/179125/jordan-running"}, "edited": false, "score": 0, "creation_date": 1447798160, "post_id": 33767847, "comment_id": 55303729, "body": "The cause of the error, as @Macmee points out, is that your <code>offers</code> table doesn&#39;t have a <code>friendly_id</code> column. So either you don&#39;t have a migration that creates that column, or the migration hasn&#39;t been run. Can you edit your question to include your migration code?"}, {"owner": {"reputation": 653, "user_id": 4230699, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/0VBXh.gif?s=128&g=1", "display_name": "Jonathan", "link": "https://stackoverflow.com/users/4230699/jonathan"}, "reply_to_user": {"reputation": 91121, "user_id": 179125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5594142dcc49a24b1902ec8059181f8d?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan Running", "link": "https://stackoverflow.com/users/179125/jordan-running"}, "edited": false, "score": 0, "creation_date": 1447798583, "post_id": 33767847, "comment_id": 55303954, "body": "@Jordan I&#39;ve added the model - all migrations have been ran, also the migration within Macmee&#39;s answer"}, {"owner": {"reputation": 3773, "user_id": 991903, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/J12Hi.jpg?s=128&g=1", "display_name": "Meier", "link": "https://stackoverflow.com/users/991903/meier"}, "edited": false, "score": 0, "creation_date": 1447804344, "post_id": 33767847, "comment_id": 55306300, "body": "Why do you want to trick your users and mask the link? If you only want a nice hover-experience, just use the title attribute for your link tags."}], "answers": [{"comments": [{"owner": {"reputation": 653, "user_id": 4230699, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/0VBXh.gif?s=128&g=1", "display_name": "Jonathan", "link": "https://stackoverflow.com/users/4230699/jonathan"}, "edited": false, "score": 0, "creation_date": 1447797984, "post_id": 33767923, "comment_id": 55303627, "body": "But isn&#39;t it looking for the slug within the class?"}, {"owner": {"reputation": 11698, "user_id": 309641, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/YuQvL.jpg?s=128&g=1", "display_name": "David Zorychta", "link": "https://stackoverflow.com/users/309641/david-zorychta"}, "reply_to_user": {"reputation": 653, "user_id": 4230699, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/0VBXh.gif?s=128&g=1", "display_name": "Jonathan", "link": "https://stackoverflow.com/users/4230699/jonathan"}, "edited": false, "score": 0, "creation_date": 1447798119, "post_id": 33767923, "comment_id": 55303706, "body": "did you run  rails generate migration AddFriendlyIdRef friendly_id:references and rake db:migrate?"}, {"owner": {"reputation": 11698, "user_id": 309641, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/YuQvL.jpg?s=128&g=1", "display_name": "David Zorychta", "link": "https://stackoverflow.com/users/309641/david-zorychta"}, "reply_to_user": {"reputation": 653, "user_id": 4230699, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/0VBXh.gif?s=128&g=1", "display_name": "Jonathan", "link": "https://stackoverflow.com/users/4230699/jonathan"}, "edited": false, "score": 0, "creation_date": 1447798156, "post_id": 33767923, "comment_id": 55303725, "body": "also @Jonathan can you post your models?"}, {"owner": {"reputation": 653, "user_id": 4230699, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/0VBXh.gif?s=128&g=1", "display_name": "Jonathan", "link": "https://stackoverflow.com/users/4230699/jonathan"}, "edited": false, "score": 0, "creation_date": 1447798162, "post_id": 33767923, "comment_id": 55303731, "body": "Nope - I will add this now"}, {"owner": {"reputation": 653, "user_id": 4230699, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/0VBXh.gif?s=128&g=1", "display_name": "Jonathan", "link": "https://stackoverflow.com/users/4230699/jonathan"}, "edited": false, "score": 0, "creation_date": 1447798405, "post_id": 33767923, "comment_id": 55303866, "body": "Added Model to question"}], "tags": [], "owner": {"reputation": 11698, "user_id": 309641, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/YuQvL.jpg?s=128&g=1", "display_name": "David Zorychta", "link": "https://stackoverflow.com/users/309641/david-zorychta"}, "is_accepted": false, "score": 2, "last_activity_date": 1447797946, "creation_date": 1447797946, "answer_id": 33767923, "question_id": 33767847, "link": "https://stackoverflow.com/questions/33767847/masking-links-in-rails/33767923#33767923", "title": "Masking Links in Rails", "body": "<p>the error says:</p>\n\n<p><code>UndefinedColumn: ERROR: column offers.friendly_id does not exist</code></p>\n\n<p>so your table does not have a column called <code>friendly_id</code> and therefore the query is crashing.</p>\n"}, {"comments": [{"owner": {"reputation": 653, "user_id": 4230699, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/0VBXh.gif?s=128&g=1", "display_name": "Jonathan", "link": "https://stackoverflow.com/users/4230699/jonathan"}, "edited": false, "score": 0, "creation_date": 1447799452, "post_id": 33768266, "comment_id": 55304391, "body": "Thanks for your answer. After implementing your answer I still get &#39;Couldn&#39;t find Offer without an ID&#39; when trying to create an offer"}, {"owner": {"reputation": 91121, "user_id": 179125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5594142dcc49a24b1902ec8059181f8d?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan Running", "link": "https://stackoverflow.com/users/179125/jordan-running"}, "reply_to_user": {"reputation": 653, "user_id": 4230699, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/0VBXh.gif?s=128&g=1", "display_name": "Jonathan", "link": "https://stackoverflow.com/users/4230699/jonathan"}, "edited": false, "score": 0, "creation_date": 1447799711, "post_id": 33768266, "comment_id": 55304503, "body": "Can you edit your question to include your updated code? Also can you include the relevant portion of the Rails log?"}, {"owner": {"reputation": 91121, "user_id": 179125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5594142dcc49a24b1902ec8059181f8d?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan Running", "link": "https://stackoverflow.com/users/179125/jordan-running"}, "reply_to_user": {"reputation": 653, "user_id": 4230699, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/0VBXh.gif?s=128&g=1", "display_name": "Jonathan", "link": "https://stackoverflow.com/users/4230699/jonathan"}, "edited": false, "score": 0, "creation_date": 1447799939, "post_id": 33768266, "comment_id": 55304604, "body": "Can you post he relevant portion of the Rails log? It will start with &quot;<code>Started GET &quot;&#47;offers&#47;...&quot; ...</code>&quot; and end with &quot;<code>Completed ...</code>&quot; or an error message."}, {"owner": {"reputation": 91121, "user_id": 179125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5594142dcc49a24b1902ec8059181f8d?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan Running", "link": "https://stackoverflow.com/users/179125/jordan-running"}, "reply_to_user": {"reputation": 653, "user_id": 4230699, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/0VBXh.gif?s=128&g=1", "display_name": "Jonathan", "link": "https://stackoverflow.com/users/4230699/jonathan"}, "edited": false, "score": 0, "creation_date": 1447800401, "post_id": 33768266, "comment_id": 55304816, "body": "By default Rails in development mode generates a log that shows, among other things, every requests, which route it matches, what its parameters are, which controller action processes it, what database queries are executed, any exceptions that are raised, and what the returned status code is. It usually lives in <code>log&#47;development.log</code>. This is the log I&#39;m referring to."}], "tags": [], "owner": {"reputation": 91121, "user_id": 179125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5594142dcc49a24b1902ec8059181f8d?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan Running", "link": "https://stackoverflow.com/users/179125/jordan-running"}, "is_accepted": true, "score": 1, "last_activity_date": 1447799271, "creation_date": 1447799271, "answer_id": 33768266, "question_id": 33767847, "link": "https://stackoverflow.com/questions/33767847/masking-links-in-rails/33768266#33768266", "title": "Masking Links in Rails", "body": "<p>It looks like you're using the friendly_id gem. The <a href=\"https://github.com/norman/friendly_id/blob/8069fc9959215e5f4872927928b3b7a95e9beacd/README.md#rails-quickstart\" rel=\"nofollow\">friendly_id README</a> has the following example:</p>\n\n<pre><code>User.friendly.find(params[:id])\n</code></pre>\n\n<p>...but your code looks like this:</p>\n\n<pre><code>link = Offer.find_by!(friendly_id: params[:slug])\n</code></pre>\n\n<p>Your code is failing because you're trying to use the ActiveRecord <code>find_by!</code> method, which takes as an argument a hash whose keys are expected to be column names, but your table doesn't have a <code>friendly_id</code> column. Instead, you should do as the friendly_id README indicates and use something like this:</p>\n\n<pre><code>link = Offer.friendly.find(params[:slug])\n</code></pre>\n"}], "owner": {"reputation": 653, "user_id": 4230699, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/0VBXh.gif?s=128&g=1", "display_name": "Jonathan", "link": "https://stackoverflow.com/users/4230699/jonathan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 179, "favorite_count": 1, "accepted_answer_id": 33768266, "answer_count": 2, "score": 0, "last_activity_date": 1447799833, "creation_date": 1447797642, "last_edit_date": 1447799833, "question_id": 33767847, "link": "https://stackoverflow.com/questions/33767847/masking-links-in-rails", "title": "Masking Links in Rails", "body": "<p>I'm currently trying to mask a link within my rails application as it's linking out to different websites. I'll explain a simple scenario below:</p>\n\n<p>Currently when hovering a link I get</p>\n\n<p><a href=\"http://www.testexampleoutsideurl.com/news/posts/1234\" rel=\"nofollow\">http://www.testexampleoutsideurl.com/news/posts/1234</a></p>\n\n<p>I'm trying to make it show</p>\n\n<p><a href=\"http://www.myapplication.com/offer/123\" rel=\"nofollow\">http://www.myapplication.com/offer/123</a></p>\n\n<p>I'm using a basic rails scaffold set-up with friendly_id on my models. I've asked this before but it's giving me errors. Please see code below.</p>\n\n<p><strong>The Error</strong></p>\n\n<blockquote>\n  <p>PG::UndefinedColumn: ERROR: column offers.friendly_id does not exist\n  LINE 1: SELECT \"offers\".* FROM \"offers\" WHERE \"offers\".\"friendly_id...\n  ^ : SELECT \"offers\".* FROM \"offers\" WHERE \"offers\".\"friendly_id\" IS\n  NULL LIMIT 1</p>\n</blockquote>\n\n<p><strong>offers_controller.rb</strong></p>\n\n<pre><code># GET /offers/1.json\n  def show\n    link = Offer.find_by!(friendly_id: params[:slug])\n    redirect_to link.url\n  end\n</code></pre>\n\n<p><strong>routes.rb</strong></p>\n\n<pre><code>get \"offers/:slug\", to: \"offers#show\"\n</code></pre>\n\n<p><strong>offer.rb</strong></p>\n\n<pre><code>class Offer &lt; ActiveRecord::Base\n    belongs_to :category\n  validates :category, presence: true\n\n  extend FriendlyId\n  friendly_id :title, use: :slugged\n\n  mount_uploader :merchantImg, MerchantImgUploader\n  mount_uploader :image, ImageUploader\nend\n</code></pre>\n\n<p>Any help would be greatly appreciated!</p>\n\n<p><strong>UPDATE</strong></p>\n\n<p>offers_controller.rb</p>\n\n<pre><code>  def show\n    link = Offer.friendly.find(params[:slug])\n    redirect_to link.url\n  end\n</code></pre>\n\n<p>routes.rb</p>\n\n<pre><code>get \"offers/:slug\", to: \"offers#show\"\n</code></pre>\n\n<p>Console Error</p>\n\n<blockquote>\n  <p>Couldn't find Offer without an ID</p>\n</blockquote>\n\n<pre><code>22:36:36 web.1    | [28829] 127.0.0.1 - - [17/Nov/2015:22:36:36 +0000] \"GET /offers/blahihaidh HTTP/1.1\" 404 118512 0.2532\n</code></pre>\n"}, {"tags": ["ruby", "performance", "optimization", "sinatra"], "answers": [{"comments": [{"owner": {"reputation": 1887, "user_id": 4948732, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh4.googleusercontent.com/-ZnN3lJjklJg/AAAAAAAAAAI/AAAAAAAAAWE/zqGtDAyXfjo/photo.jpg?sz=128", "display_name": "thesecretmaster", "link": "https://stackoverflow.com/users/4948732/thesecretmaster"}, "edited": false, "score": 0, "creation_date": 1447801217, "post_id": 33768082, "comment_id": 55305149, "body": "Opps sorry! Typo! This might have been better as a comment. I have fixed by question now."}], "tags": [], "owner": {"reputation": 2409, "user_id": 4008366, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/5a9f80535627f21ba4191fea0c6a0771?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Kim", "link": "https://stackoverflow.com/users/4008366/andrew-kim"}, "is_accepted": false, "score": 0, "last_activity_date": 1447798501, "creation_date": 1447798501, "answer_id": 33768082, "question_id": 33767838, "link": "https://stackoverflow.com/questions/33767838/run-when-you-can/33768082#33768082", "title": "Run when you can", "body": "<p><code>MyClass.run(temp)</code> is never actually executing. In your current request to <code>/</code> path you instantiate a new instance of <code>MyClass</code> then it will immediately do a <code>get</code> request to <code>/home</code>. I'm not entirely sure what the question is though. If you want something to execute after the redirect, that functionality needs to exist within the <code>/home</code> route.</p>\n\n<pre><code>get '/home' do\n  # some code like MyClass.run(some_arg)\nend\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1887, "user_id": 4948732, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh4.googleusercontent.com/-ZnN3lJjklJg/AAAAAAAAAAI/AAAAAAAAAWE/zqGtDAyXfjo/photo.jpg?sz=128", "display_name": "thesecretmaster", "link": "https://stackoverflow.com/users/4948732/thesecretmaster"}, "edited": false, "score": 0, "creation_date": 1447845724, "post_id": 33770789, "comment_id": 55323881, "body": "I had actually already seen the work queue solution, and was looking if there was something better, because the work queue solution will still slow down the next request because the server will be busy and have less resources available. But +1 for the great detailed answer! I will certainly look into that gem as it seems to be the most promising solution for me."}, {"owner": {"reputation": 1887, "user_id": 4948732, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh4.googleusercontent.com/-ZnN3lJjklJg/AAAAAAAAAAI/AAAAAAAAAWE/zqGtDAyXfjo/photo.jpg?sz=128", "display_name": "thesecretmaster", "link": "https://stackoverflow.com/users/4948732/thesecretmaster"}, "edited": false, "score": 0, "creation_date": 1447846302, "post_id": 33770789, "comment_id": 55324259, "body": "But what I am also looking for is a way to run things when the server traffic lessens. So I would need something that would just track the traffic, and when the load on the server is light, it would execute the tasks."}, {"owner": {"reputation": 7565, "user_id": 1021515, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/Z9QcP.jpg?s=128&g=1", "display_name": "mwp", "link": "https://stackoverflow.com/users/1021515/mwp"}, "reply_to_user": {"reputation": 1887, "user_id": 4948732, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh4.googleusercontent.com/-ZnN3lJjklJg/AAAAAAAAAAI/AAAAAAAAAWE/zqGtDAyXfjo/photo.jpg?sz=128", "display_name": "thesecretmaster", "link": "https://stackoverflow.com/users/4948732/thesecretmaster"}, "edited": false, "score": 0, "creation_date": 1447871346, "post_id": 33770789, "comment_id": 55342034, "body": "The easiest way to do that would be to run the background process(es) with <code>nice</code>, which &quot;hints&quot; to the kernel to run the command with a lower priority."}], "tags": [], "owner": {"reputation": 7565, "user_id": 1021515, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/Z9QcP.jpg?s=128&g=1", "display_name": "mwp", "link": "https://stackoverflow.com/users/1021515/mwp"}, "is_accepted": false, "score": 2, "last_activity_date": 1447820119, "last_edit_date": 1447820119, "creation_date": 1447813579, "answer_id": 33770789, "question_id": 33767838, "link": "https://stackoverflow.com/questions/33767838/run-when-you-can/33770789#33770789", "title": "Run when you can", "body": "<p>As Andrew mentioned (correctly\u2014not sure why he was voted down), Sinatra <a href=\"https://github.com/sinatra/sinatra/blob/v1.4.6/lib/sinatra/base.rb#L260\" rel=\"nofollow\">stops</a> processing a route when it sees a <code>redirect</code>, so any subsequent statements will never execute. As you stated, you don't want to put those statements <em>before</em> the <code>redirect</code> because that will block the request until they complete. You could potentially send the redirect status and header to the client without using the <code>redirect</code> method and <em>then</em> call <code>MyClass#run</code>. This will have the desired effect (from the client's perspective), but the server process (or thread) will block until it completes. This is undesirable because that process (or thread) will not be able to serve any new requests until it unblocks.</p>\n\n<p>You could fork a new process (or spawn a new thread) to handle this background task asynchronously from the main process associated with the request. Unfortunately, this approach has the potential to get messy. You would have to code around different situations like the background task failing, or the <code>fork</code>/<code>spawn</code> failing, or the main request process not ending if it owns a running thread or other process. (Disclaimer: I don't really know enough about IPC in Ruby and Rack under different application servers to understand all of the different scenarios, but I'm confident that here there be dragons.)</p>\n\n<p>The most common solution pattern for this type of problem is to push the task into some kind of work queue to be serviced later by another process. Pushing a task onto the queue is ideally a very quick operation, and won't block the main process for more than a few milliseconds. This introduces a few new challenges (where is the queue? how is the task described so that it can be facilitated at a later time without any context? how do we maintain the worker processes?) but fortunately a lot of the leg work has already been done by other people. :-) </p>\n\n<p>There is the <a href=\"https://github.com/collectiveidea/delayed_job\" rel=\"nofollow\">delayed_job</a> gem, which seems to provide a nice all-in-one solution. Unfortunately, it's mostly geared towards Rails and ActiveRecord, and the efforts people have made in the past to make it work with Sinatra look to be unmaintained. The contemporary, framework-agnostic solutions are <a href=\"http://github.com/blog/542-introducing-resque\" rel=\"nofollow\">Resque</a> and <a href=\"http://sidekiq.org\" rel=\"nofollow\">Sidekiq</a>. It might take some effort to get up and running with either option, but it would be well worth it if you have several \"run when you can\" type functions in your application. </p>\n"}], "owner": {"reputation": 1887, "user_id": 4948732, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh4.googleusercontent.com/-ZnN3lJjklJg/AAAAAAAAAAI/AAAAAAAAAWE/zqGtDAyXfjo/photo.jpg?sz=128", "display_name": "thesecretmaster", "link": "https://stackoverflow.com/users/4948732/thesecretmaster"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 52, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1447846602, "creation_date": 1447797613, "last_edit_date": 1447846602, "question_id": 33767838, "link": "https://stackoverflow.com/questions/33767838/run-when-you-can", "title": "Run when you can", "body": "<p>In my sinatra web application, I have a route:</p>\n\n<pre><code>get \"/\" do\n    temp = MyClass.new(\"hello\",1)\n    redirect \"/home\"\nend\n</code></pre>\n\n<p>Where <code>MyClass</code> is:</p>\n\n<pre><code>class MyClass\n    @instancesArray = []\n    def initialize(string,id)\n        @string = string\n        @id = id\n        @instancesArray[id] = this\n    end\n    def run(id)\n        puts @instancesArray[id].string\n    end\nend\n</code></pre>\n\n<p>At some point I would want to run <code>MyClass.run(1)</code>, but I wouldn't want it to execute immediately because that would slow down the servers response to some clients. I would want the server to wait to run <code>MyClass.run(temp)</code> until there was some time with a lighter load. How could I tell it to wait until there is an empty/light load, then run <code>MyClass.run(temp)</code>? Can I do that?</p>\n\n<p><b>Addendum</b></p>\n\n<p>Here is some sample code for what I would want to do:</p>\n\n<pre><code>$var = 0\n\nget \"/\" do\n    $var = $var+1 # each time a request is recieved, it incriments\nend\n</code></pre>\n\n<p>After that I would have a loop that would count requests/minute (so after a minute it would reset <code>$var</code> to 0, and if <code>$var</code> was less than some number, then it would run tasks util the load increased.</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 1434, "user_id": 664675, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/f463b697306d3bd0d4d7dc6dd562b7c1?s=128&d=identicon&r=PG", "display_name": "rii", "link": "https://stackoverflow.com/users/664675/rii"}, "edited": false, "score": 0, "creation_date": 1447862948, "post_id": 33767729, "comment_id": 55336617, "body": "Assuming your first provider has locations (if not, grab one that does), what do you get if you go to the console and do this: <code>@provider = Provider.first</code> then do this <code>@provider.provider_locations</code> and then do this <code>@provider.provider_locations.map{ |j| j.dba }</code>"}, {"owner": {"reputation": 3146, "user_id": 327258, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/50d026903563e045ca29cab1ad0b1d66?s=128&d=identicon&r=PG", "display_name": "Codejoy", "link": "https://stackoverflow.com/users/327258/codejoy"}, "reply_to_user": {"reputation": 1434, "user_id": 664675, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/f463b697306d3bd0d4d7dc6dd562b7c1?s=128&d=identicon&r=PG", "display_name": "rii", "link": "https://stackoverflow.com/users/664675/rii"}, "edited": false, "score": 0, "creation_date": 1447879696, "post_id": 33767729, "comment_id": 55347136, "body": "gives me an undefined method &#39;dba&#39; error."}, {"owner": {"reputation": 3146, "user_id": 327258, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/50d026903563e045ca29cab1ad0b1d66?s=128&d=identicon&r=PG", "display_name": "Codejoy", "link": "https://stackoverflow.com/users/327258/codejoy"}, "reply_to_user": {"reputation": 1434, "user_id": 664675, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/f463b697306d3bd0d4d7dc6dd562b7c1?s=128&d=identicon&r=PG", "display_name": "rii", "link": "https://stackoverflow.com/users/664675/rii"}, "edited": false, "score": 0, "creation_date": 1447969150, "post_id": 33767729, "comment_id": 55395308, "body": "I can say j.group_location.dba and it finds the name, but then I get the error that it is neither a symbol nor a string.  That is to say it works fine in the rails console returning [&quot;my group location name&quot;]  but it fails in the actual html.erb file."}, {"owner": {"reputation": 1434, "user_id": 664675, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/f463b697306d3bd0d4d7dc6dd562b7c1?s=128&d=identicon&r=PG", "display_name": "rii", "link": "https://stackoverflow.com/users/664675/rii"}, "edited": false, "score": 0, "creation_date": 1447970177, "post_id": 33767729, "comment_id": 55395826, "body": "Why is your name inside an array? in any case, if you use <code>.first</code> at the end like so:  <code>@provider.provider_locations.map{ |j| j.dba.first }</code> it will probably work."}, {"owner": {"reputation": 3146, "user_id": 327258, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/50d026903563e045ca29cab1ad0b1d66?s=128&d=identicon&r=PG", "display_name": "Codejoy", "link": "https://stackoverflow.com/users/327258/codejoy"}, "reply_to_user": {"reputation": 1434, "user_id": 664675, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/f463b697306d3bd0d4d7dc6dd562b7c1?s=128&d=identicon&r=PG", "display_name": "rii", "link": "https://stackoverflow.com/users/664675/rii"}, "edited": false, "score": 0, "creation_date": 1447970470, "post_id": 33767729, "comment_id": 55395961, "body": "it is how the relationships work.  Inside a provider location has a group location and that is where the DBA name is. Oh i see what you are saying though it was coming back as a  name but it is in an array.   so j.group_location.dba.first is what I want."}, {"owner": {"reputation": 3146, "user_id": 327258, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/50d026903563e045ca29cab1ad0b1d66?s=128&d=identicon&r=PG", "display_name": "Codejoy", "link": "https://stackoverflow.com/users/327258/codejoy"}, "reply_to_user": {"reputation": 1434, "user_id": 664675, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/f463b697306d3bd0d4d7dc6dd562b7c1?s=128&d=identicon&r=PG", "display_name": "rii", "link": "https://stackoverflow.com/users/664675/rii"}, "edited": false, "score": 0, "creation_date": 1447971314, "post_id": 33767729, "comment_id": 55396394, "body": "Well maybe I was mistaken.  The provider location has a provider and a group_location and in that it has the dba.  The provider_location can have many group locations for a given provider.  Then I want to map all those group locations by name in my little select tag"}, {"owner": {"reputation": 3146, "user_id": 327258, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/50d026903563e045ca29cab1ad0b1d66?s=128&d=identicon&r=PG", "display_name": "Codejoy", "link": "https://stackoverflow.com/users/327258/codejoy"}, "reply_to_user": {"reputation": 1434, "user_id": 664675, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/f463b697306d3bd0d4d7dc6dd562b7c1?s=128&d=identicon&r=PG", "display_name": "rii", "link": "https://stackoverflow.com/users/664675/rii"}, "edited": false, "score": 0, "creation_date": 1447971676, "post_id": 33767729, "comment_id": 55396588, "body": "I figured it out i was using the map wrong:      <code>&lt;%= select_tag &quot;provider_locations&quot;, options_from_collection_for_select(@provider.provider_locati&zwnj;&#8203;ons.map{|j| j.group_location}, :id , :dba), :multiple =&gt; true %&gt;</code>"}, {"owner": {"reputation": 1434, "user_id": 664675, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/f463b697306d3bd0d4d7dc6dd562b7c1?s=128&d=identicon&r=PG", "display_name": "rii", "link": "https://stackoverflow.com/users/664675/rii"}, "edited": false, "score": 0, "creation_date": 1447993549, "post_id": 33767729, "comment_id": 55403766, "body": "ahh glad you got it working!"}], "owner": {"reputation": 3146, "user_id": 327258, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/50d026903563e045ca29cab1ad0b1d66?s=128&d=identicon&r=PG", "display_name": "Codejoy", "link": "https://stackoverflow.com/users/327258/codejoy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 51, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1447797126, "creation_date": 1447797126, "question_id": 33767729, "link": "https://stackoverflow.com/questions/33767729/using-options-from-collection-for-select-with-a-model-that-has-a-belongs-to", "title": "Using options_from_collection_for select with a model that has a belongs_to", "body": "<p>I keep getting the error:</p>\n\n<blockquote>\n  <p>NoMethodError in Providers#add_location Showing\n  /vagrant/ipanmv2/app/views/providers/add_location.html.erb where line</p>\n  \n  <h1>13 raised:</h1>\n  \n  <p>undefined method `dba' for # Extracted\n  source (around line #13): 10 11 12 13 14 15 16</p>\n\n<pre><code>&lt;tr&gt;\n  &lt;td&gt;          \n    &lt;% if @provider.provider_locations.count &gt;0 %&gt;\n       &lt;%= select_tag \"provider_locations\",  options_from_collection_for_select(@provider.provider_locations, :id , @provider.provider_locations.map{ |j| j.dba }), :multiple =&gt; true %&gt;\n    &lt;% else %&gt;\n       &lt;%= select_tag \"provider_locations\", \"&lt;option&gt;&lt;/option&gt;\".html_safe, :multiple =&gt; true, :style =&gt; \"width: 300px\" %&gt;       \n    &lt;% end %&gt;                   \n</code></pre>\n  \n  <p>Rails.root: /vagrant/ipanmv2</p>\n  \n  <p>Application Trace | Framework Trace | Full Trace\n  app/views/providers/add_location.html.erb:13:in <code>block in\n  _app_views_providers_add_location_html_erb__446308859_95329970' app/views/providers/add_location.html.erb:13:in\n  </code>_app_views_providers_add_location_html_erb__446308859_95329970'\n  Request</p>\n  \n  <p>Parameters:</p>\n  \n  <p>{\"id\"=>\"4332\"} Toggle session dump Toggle env dump Response</p>\n  \n  <p>Headers:</p>\n  \n  <p>None</p>\n</blockquote>\n\n<p>I am trying to get at data in this options_from_collection_for_select but through a model that belongs to another.</p>\n\n<p>Provider has a provider_location which belongs to group_location which in turn has a group_id, an address_id and a name: dba   I want to use that name in the list:</p>\n\n<p>With the code:</p>\n\n<pre><code>&lt;tr&gt;\n        &lt;td&gt;          \n          &lt;% if @provider.provider_locations.count &gt;0 %&gt;\n            &lt;%= select_tag \"provider_locations\", options_from_collection_for_select(@provider.provider_locations, :id , @provider.provider_locations.map{ |j| j.dba }), :multiple =&gt; true %&gt;\n          &lt;% else %&gt;\n            &lt;%= select_tag \"provider_locations\", \"&lt;option&gt;&lt;/option&gt;\".html_safe, :multiple =&gt; true, :style =&gt; \"width: 300px\" %&gt;       \n          &lt;% end %&gt;                   \n        &lt;/td&gt;\n      &lt;/tr&gt;\n</code></pre>\n\n<p>I know from another stack overflow question I have that my map is what is breaking this, though the fix from the other question won't help here since i have to somehow essentially for all locations on that provider get every group location and dig into that to get the group locations name.  Not sure how to approach this or what my types are.</p>\n\n<p>I know I somehow have to map all the group location name (as field dba in model group_location) to the provider locations group_location_id somehow.  Just no idea how to do this.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "rspec", "rspec3"], "comments": [{"owner": {"reputation": 591, "user_id": 1169939, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/pRDKs.jpg?s=128&g=1", "display_name": "marksiemers", "link": "https://stackoverflow.com/users/1169939/marksiemers"}, "edited": false, "score": 0, "creation_date": 1447796804, "post_id": 33767508, "comment_id": 55303032, "body": "Is your question about whether you have to pass a code block to <code>expect</code> if you are expecting to raise an error? If so, then yes, it has to be a code block for RSpec to handle exceptions."}], "answers": [{"tags": [], "owner": {"reputation": 1958, "user_id": 2803062, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/ed9b78fe5151cbc40739c7db14fbecf7?s=128&d=identicon&r=PG", "display_name": "bosskovic", "link": "https://stackoverflow.com/users/2803062/bosskovic"}, "is_accepted": false, "score": 0, "last_activity_date": 1447796625, "creation_date": 1447796625, "answer_id": 33767578, "question_id": 33767508, "link": "https://stackoverflow.com/questions/33767508/run-an-rspec-example-with-exception-raising-code-without-raise-error/33767578#33767578", "title": "Run an RSpec example with exception-raising code without raise_error", "body": "<p>I see nothing wrong with how you wrote it. If you do not want to test multiple assertions in the same test, then you can split them, but if the test triggers an exception, you have to expect it. </p>\n\n<p>Was that what you asked? </p>\n\n<p>Btw, it is a bad practice to just raise_error. Its much better to pass it the correct class of exception that you expect, for example:</p>\n\n<pre><code>expect { log_exception_and_reraise }.to raise_error(ActiveRecord::RecordNotFound)\n</code></pre>\n"}], "owner": {"reputation": 1241, "user_id": 979838, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/MSMhU.jpg?s=128&g=1", "display_name": "Patrick Brinich-Langlois", "link": "https://stackoverflow.com/users/979838/patrick-brinich-langlois"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 689, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1449840515, "creation_date": 1447796341, "last_edit_date": 1449840515, "question_id": 33767508, "link": "https://stackoverflow.com/questions/33767508/run-an-rspec-example-with-exception-raising-code-without-raise-error", "title": "Run an RSpec example with exception-raising code without raise_error", "body": "<p>To test whether code raises an exception using RSpec, you can use a block with <code>raise_error</code>:</p>\n\n<pre><code>it \"raises an exception\" do\n  expect { raise_an_exception }.to raise_error\nend\n</code></pre>\n\n<p>Let's say you want to test whether the code that raises an exception does something else as well. Must you always use the above syntax?</p>\n\n<pre><code># testing whether an error is raised\nit \"reraises exceptions\" do\n  expect { log_exception_and_reraise }.to raise_error(ExceptionClass)\nend\n\n# not testing whether an error is raised\nit \"logs errors\" do\n  expect(Rails.logger).to receive(:error)\n  expect { log_exception_and_reraise }.to raise_error\nend\n\n# not testing whether an error is raised\nit \"sends errors to error tracker\"\n  expect(ErrorTracker).to receive(:send_error)\n  expect { log_exception_and_reraise }.to raise_error\nend\n</code></pre>\n\n<p>This works, but you're testing two separate things in each example (even though you don't want to). And you have to duplicate the <code>raise_error</code> expectation for each one.</p>\n\n<p>I'd rather do something like </p>\n\n<pre><code>it \"sends errors to error tracker\"\n  expect(ErrorTracker).to receive(:send_error)\n  execute { log_exception_and_reraise }\nend\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "heroku"], "comments": [{"owner": {"reputation": 7433, "user_id": 423384, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d00ee8458992eaf37c0562b306ff8ed7?s=128&d=identicon&r=PG", "display_name": "Josh", "link": "https://stackoverflow.com/users/423384/josh"}, "edited": false, "score": 0, "creation_date": 1447835934, "post_id": 33767364, "comment_id": 55316973, "body": "you may want to remove your email address from your log files above."}, {"owner": {"reputation": 7433, "user_id": 423384, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d00ee8458992eaf37c0562b306ff8ed7?s=128&d=identicon&r=PG", "display_name": "Josh", "link": "https://stackoverflow.com/users/423384/josh"}, "edited": false, "score": 0, "creation_date": 1447836176, "post_id": 33767364, "comment_id": 55317113, "body": "What is the output if you run <code>heroku config:get BUNDLE_WITHOUT</code>"}], "answers": [{"comments": [{"owner": {"reputation": 529, "user_id": 3574178, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/6f9079310597136064b4b8197f7a8bf5?s=128&d=identicon&r=PG&f=1", "display_name": "Neil", "link": "https://stackoverflow.com/users/3574178/neil"}, "edited": false, "score": 0, "creation_date": 1447842660, "post_id": 33775879, "comment_id": 55321707, "body": "yes no procfile has been setup . -&gt; No Procfile detected, using the default web server (webrick) remote:        <a href=\"https://devcenter.heroku.com/articles/ruby-default-web-server\" rel=\"nofollow noreferrer\">devcenter.heroku.com/articles/ruby-default-web-server</a> remote: -----&gt; Discovering process types remote:        Procfile declares types     -&gt; (none) remote:        Default types for buildpack -&gt; console, rake, web, worker"}], "tags": [], "owner": {"reputation": 7433, "user_id": 423384, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d00ee8458992eaf37c0562b306ff8ed7?s=128&d=identicon&r=PG", "display_name": "Josh", "link": "https://stackoverflow.com/users/423384/josh"}, "is_accepted": false, "score": 2, "last_activity_date": 1447838107, "creation_date": 1447838107, "answer_id": 33775879, "question_id": 33767364, "link": "https://stackoverflow.com/questions/33767364/rails-4-2-application-error-using-heroku-create/33775879#33775879", "title": "Rails 4.2: Application error using heroku create", "body": "<p>You are trying to start <code>rails/server</code> on Heroku and you don't have <code>spring</code> installed on Heroku (which is fine, you don't need it on Heroku), it was throwing an error.</p>\n\n<p>Looks like you don't have <code>Procfile</code> set up, or if you do, you're using <code>rails/server</code> instead of a production web server.  Heroku <a href=\"https://devcenter.heroku.com/articles/deploying-rails-applications-with-the-puma-web-server\" rel=\"nofollow\">recommends Puma as the webserver</a> you can also use Unicorn.</p>\n\n<p>Follow the instructions in the link above to set up Puma for heroku.  The basic setup is to just create a <code>Procfile</code> and a <code>config/puma.rb</code> file.</p>\n\n<p>If you're using Puma or Unicorn, you won't be using <code>rails/server</code> and so it won't try to load spring.</p>\n"}, {"comments": [{"owner": {"reputation": 7433, "user_id": 423384, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d00ee8458992eaf37c0562b306ff8ed7?s=128&d=identicon&r=PG", "display_name": "Josh", "link": "https://stackoverflow.com/users/423384/josh"}, "edited": false, "score": 1, "creation_date": 1447866190, "post_id": 33784837, "comment_id": 55338919, "body": "This is not a good solution.  From the spring docs: &quot;You must not install Spring on your production environment&quot; <a href=\"https://github.com/rails/spring#deployment\" rel=\"nofollow noreferrer\">github.com/rails/spring#deployment</a>"}, {"owner": {"reputation": 6202, "user_id": 1066615, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/iv68W.png?s=128&g=1", "display_name": "sixty4bit", "link": "https://stackoverflow.com/users/1066615/sixty4bit"}, "edited": false, "score": 0, "creation_date": 1447884918, "post_id": 33784837, "comment_id": 55350075, "body": "yeah...this is incorrect. Note that in a brand new rails app generated with <code>rails new</code>, the <code>spring</code> gem is nested in <code>group :development</code>"}, {"owner": {"reputation": 99, "user_id": 1776169, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XJB9n.jpg?s=128&g=1", "display_name": "yatindra rao", "link": "https://stackoverflow.com/users/1776169/yatindra-rao"}, "edited": false, "score": 0, "creation_date": 1447904164, "post_id": 33784837, "comment_id": 55356252, "body": "Yes.... it is not correct according to the docs but for quick fix I tried it with my project."}], "tags": [], "owner": {"reputation": 99, "user_id": 1776169, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XJB9n.jpg?s=128&g=1", "display_name": "yatindra rao", "link": "https://stackoverflow.com/users/1776169/yatindra-rao"}, "is_accepted": true, "score": 0, "last_activity_date": 1447862754, "creation_date": 1447862754, "answer_id": 33784837, "question_id": 33767364, "link": "https://stackoverflow.com/questions/33767364/rails-4-2-application-error-using-heroku-create/33784837#33784837", "title": "Rails 4.2: Application error using heroku create", "body": "<p>1.Replace </p>\n\n<pre><code>gem 'spring', group: :development\n</code></pre>\n\n<p>by </p>\n\n<pre><code>gem 'spring'\n</code></pre>\n\n<p>in your Gemfile.\nThen run </p>\n\n<pre><code>bundle install\n</code></pre>\n\n<p>to update the Gemfile.lock and commit changes and push the code to heroku. <br>\nIt should work.\nBecause as spring is grouped in development so cannot find this gem but when you remove this group It will be found on production mode.<br>\n<br>For more info please look at <a href=\"https://github.com/rails/spring\" rel=\"nofollow\">https://github.com/rails/spring</a></p>\n"}], "owner": {"reputation": 529, "user_id": 3574178, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/6f9079310597136064b4b8197f7a8bf5?s=128&d=identicon&r=PG&f=1", "display_name": "Neil", "link": "https://stackoverflow.com/users/3574178/neil"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 219, "favorite_count": 1, "accepted_answer_id": 33784837, "answer_count": 2, "score": 0, "last_activity_date": 1447862754, "creation_date": 1447795791, "question_id": 33767364, "link": "https://stackoverflow.com/questions/33767364/rails-4-2-application-error-using-heroku-create", "title": "Rails 4.2: Application error using heroku create", "body": "<p>Getting an application error using Heroku create. Work in development. Tried Heroku restart but getting the  same error. </p>\n\n<p>heroku run rake db:migrate gave me this message which i have not seen before. </p>\n\n<pre><code>(9.6ms)  CREATE TABLE \"schema_migrations\" (\"version\" character varying NOT NULL) \n   (4.1ms)  CREATE UNIQUE INDEX  \"unique_schema_migrations\" ON \"schema_migrations\"  (\"version\")\n\n  ActiveRecord::SchemaMigration Load (1.4ms)  SELECT \"schema_migrations\".* FROM \"schema_migrations\"\n\nMigrating to CreatePosts (20151117140811)\n\n   (2.2ms)  BEGIN\n\n== 20151117140811 CreatePosts: migrating ======================================\n\n-- create_table(:posts)\n\n   (8.1ms)  CREATE TABLE \"posts\" (\"id\" serial primary key, \"title\" character varying, \"content\" text, \"created_at\" timestamp NOT NULL, \"updated_at\" timestamp NOT NULL) \n</code></pre>\n\n<p><strong>heroku logs</strong></p>\n\n<pre><code>2015-11-17T21:01:58.922113+00:00 heroku[web.1]: State changed from crashed to starting\n2015-11-17T21:02:01.619357+00:00 heroku[web.1]: Starting process with command `bin/rails server -p 58664 -e production`\n2015-11-17T21:02:03.996752+00:00 app[web.1]:    from /app/vendor/ruby-2.0.0/lib/ruby/2.0.0/rubygems/dependency.rb:307:in `to_spec'\n2015-11-17T21:02:03.996753+00:00 app[web.1]:    from /app/vendor/ruby-2.0.0/lib/ruby/2.0.0/rubygems/core_ext/kernel_gem.rb:47:in `gem'\n2015-11-17T21:02:03.996757+00:00 app[web.1]:    from bin/rails:4:in `load'\n2015-11-17T21:02:03.996743+00:00 app[web.1]: /app/vendor/ruby-2.0.0/lib/ruby/2.0.0/rubygems/dependency.rb:296:in `to_specs': Could not find 'spring' (= 1.4.3) among 65 total gem(s) (Gem::LoadError)\n2015-11-17T21:02:03.996757+00:00 app[web.1]:    from bin/rails:4:in `&lt;main&gt;'\n2015-11-17T21:02:03.996754+00:00 app[web.1]:    from /app/bin/spring:12:in `&lt;top (required)&gt;'\n2015-11-17T21:02:04.969978+00:00 heroku[web.1]: Process exited with status 1\n2015-11-17T21:02:04.982155+00:00 heroku[web.1]: State changed from starting to crashed\n2015-11-17T21:02:19.841210+00:00 heroku[router]: at=error code=H10 desc=\"App crashed\" method=GET path=\"/\" host=wiki2015.herokuapp.com request_id=2daf0895-2f82-4b53-8779-d868927d174d fwd=\"80.42.198.211\" dyno= connect= service= status=503 bytes=\n2015-11-17T21:07:52.541848+00:00 heroku[web.1]: State changed from crashed to starting\n2015-11-17T21:07:54.465372+00:00 heroku[web.1]: Starting process with command `bin/rails server -p 34156 -e production`\n2015-11-17T21:07:55.963293+00:00 app[web.1]: /app/vendor/ruby-2.0.0/lib/ruby/2.0.0/rubygems/dependency.rb:296:in `to_specs': Could not find 'spring' (= 1.4.3) among 65 total gem(s) (Gem::LoadError)\n2015-11-17T21:07:55.963309+00:00 app[web.1]:    from /app/vendor/ruby-2.0.0/lib/ruby/2.0.0/rubygems/dependency.rb:307:in `to_spec'\n2015-11-17T21:07:55.963310+00:00 app[web.1]:    from /app/vendor/ruby-2.0.0/lib/ruby/2.0.0/rubygems/core_ext/kernel_gem.rb:47:in `gem'\n2015-11-17T21:07:55.963311+00:00 app[web.1]:    from /app/bin/spring:12:in `&lt;top (required)&gt;'\n2015-11-17T21:07:55.963312+00:00 app[web.1]:    from bin/rails:4:in `load'\n2015-11-17T21:07:55.963312+00:00 app[web.1]:    from bin/rails:4:in `&lt;main&gt;'\n2015-11-17T21:07:56.601024+00:00 heroku[web.1]: State changed from starting to crashed\n2015-11-17T21:07:56.592508+00:00 heroku[web.1]: Process exited with status 1\n2015-11-17T21:08:11.237584+00:00 heroku[web.1]: State changed from crashed to starting\n2015-11-17T21:08:13.869504+00:00 heroku[web.1]: Starting process with command `bin/rails server -p 51681 -e production`\n2015-11-17T21:08:16.370873+00:00 app[web.1]: /app/vendor/ruby-2.0.0/lib/ruby/2.0.0/rubygems/dependency.rb:296:in `to_specs': Could not find 'spring' (= 1.4.3) among 65 total gem(s) (Gem::LoadError)\n2015-11-17T21:08:16.370893+00:00 app[web.1]:    from /app/vendor/ruby-2.0.0/lib/ruby/2.0.0/rubygems/dependency.rb:307:in `to_spec'\n2015-11-17T21:08:16.370895+00:00 app[web.1]:    from /app/vendor/ruby-2.0.0/lib/ruby/2.0.0/rubygems/core_ext/kernel_gem.rb:47:in `gem'\n2015-11-17T21:08:16.370896+00:00 app[web.1]:    from /app/bin/spring:12:in `&lt;top (required)&gt;'\n2015-11-17T21:08:16.370897+00:00 app[web.1]:    from bin/rails:4:in `load'\n2015-11-17T21:08:16.370898+00:00 app[web.1]:    from bin/rails:4:in `&lt;main&gt;'\n2015-11-17T21:08:17.375973+00:00 heroku[web.1]: State changed from starting to crashed\n2015-11-17T21:08:17.362848+00:00 heroku[web.1]: Process exited with status 1\n2015-11-17T21:08:19.043366+00:00 heroku[router]: at=error code=H10 desc=\"App crashed\" method=GET path=\"/\" host=wiki2015.herokuapp.com request_id=056b3e11-0204-4a64-aab2-9f33928cce07 fwd=\"80.42.198.211\" dyno= connect= service= status=503 bytes=\nNeils-MacBook-Pro-2:wiki123 neilpatel$ \n</code></pre>\n\n<p><strong>Gemfile</strong></p>\n\n<p>source '<a href=\"https://rubygems.org\" rel=\"nofollow\">https://rubygems.org</a>'</p>\n\n<pre><code>ruby '2.0.0'\ngem 'rails', '4.2.4'\ngem 'sqlite3', group: :development\ngem 'sass-rails', '~&gt; 5.0'\ngem 'uglifier', '&gt;= 1.3.0'\ngem 'coffee-rails', '~&gt; 4.1.0'\ngem 'jquery-rails'\ngem 'turbolinks'\ngem 'jbuilder', '~&gt; 2.0'\ngem 'sdoc', '~&gt; 0.4.0', group: :doc\ngem 'bootstrap-sass', '~&gt; 3.3.5'\ngem 'pygments.rb', '~&gt; 0.6.0'\ngem 'redcarpet', '~&gt; 3.2.2'\n\n\ngem 'rails_12factor', group: :production\ngem 'pg', group: :production\n\n\ngem 'spring',        group: :development\n\n\ngroup :development, :test do\n  gem 'byebug'\n  gem 'rspec-rails', '~&gt; 3.0.1'\nend\n</code></pre>\n\n<p>also updated the spring gem to </p>\n\n<pre><code>group :development do\n  gem 'web-console', '~&gt; 2.0'\nend\n\ngroup :test do\n  gem 'capybara', '~&gt; 2.3.0'\nend\n</code></pre>\n\n<p>also updated the spring gem as advised in the heroku logs to </p>\n\n<p>gem 'spring', '~> 1.4', '>= 1.4.3', group: :development</p>\n\n<p>ran heroku open and get the following message </p>\n\n<pre><code>2015-11-17T20:52:47.008259+00:00 heroku[api]: Release v4 created by neil@myindianweddingapp.com\n2015-11-17T20:52:47.356212+00:00 heroku[api]: Scale to web=1 by neil@myindianweddingapp.com\n2015-11-17T20:52:47.415652+00:00 heroku[api]: Deploy a2f4d0a by neil@myindianweddingapp.com\n2015-11-17T20:52:47.415652+00:00 heroku[api]: Release v5 created by neil@myindianweddingapp.com\n2015-11-17T20:52:47.721228+00:00 heroku[slug-compiler]: Slug compilation started\n2015-11-17T20:52:47.721239+00:00 heroku[slug-compiler]: Slug compilation finished\n2015-11-17T20:52:50.084314+00:00 heroku[web.1]: Starting process with command `bin/rails server -p 15687 -e production`\n2015-11-17T20:52:52.299661+00:00 app[web.1]: /app/vendor/ruby-2.0.0/lib/ruby/2.0.0/rubygems/dependency.rb:296:in `to_specs': Could not find 'spring' (= 1.4.3) among 65 total gem(s) (Gem::LoadError)\n2015-11-17T20:52:52.299686+00:00 app[web.1]:    from /app/vendor/ruby-2.0.0/lib/ruby/2.0.0/rubygems/dependency.rb:307:in `to_spec'\n2015-11-17T20:52:52.299703+00:00 app[web.1]:    from /app/vendor/ruby-2.0.0/lib/ruby/2.0.0/rubygems/core_ext/kernel_gem.rb:47:in `gem'\n2015-11-17T20:52:52.299720+00:00 app[web.1]:    from /app/bin/spring:12:in `&lt;top (required)&gt;'\n2015-11-17T20:52:52.299736+00:00 app[web.1]:    from bin/rails:4:in `load'\n2015-11-17T20:52:52.299775+00:00 app[web.1]:    from bin/rails:4:in `&lt;main&gt;'\n2015-11-17T20:52:53.219221+00:00 heroku[web.1]: State changed from crashed to starting\n2015-11-17T20:52:53.217867+00:00 heroku[web.1]: State changed from starting to crashed\n2015-11-17T20:52:53.202791+00:00 heroku[web.1]: Process exited with status 1\n2015-11-17T20:52:55.291203+00:00 heroku[web.1]: Starting process with command `bin/rails server -p 37936 -e production`\n2015-11-17T20:52:57.066805+00:00 app[web.1]: /app/vendor/ruby-2.0.0/lib/ruby/2.0.0/rubygems/dependency.rb:296:in `to_specs': Could not find 'spring' (= 1.4.3) among 65 total gem(s) (Gem::LoadError)\n2015-11-17T20:52:57.066819+00:00 app[web.1]:    from /app/vendor/ruby-2.0.0/lib/ruby/2.0.0/rubygems/dependency.rb:307:in `to_spec'\n2015-11-17T20:52:57.066821+00:00 app[web.1]:    from /app/bin/spring:12:in `&lt;top (required)&gt;'\n2015-11-17T20:52:57.066820+00:00 app[web.1]:    from /app/vendor/ruby-2.0.0/lib/ruby/2.0.0/rubygems/core_ext/kernel_gem.rb:47:in `gem'\n2015-11-17T20:52:57.066822+00:00 app[web.1]:    from bin/rails:4:in `load'\n2015-11-17T20:52:57.066823+00:00 app[web.1]:    from bin/rails:4:in `&lt;main&gt;'\n2015-11-17T20:52:57.652025+00:00 heroku[web.1]: State changed from starting to crashed\n2015-11-17T20:52:57.644122+00:00 heroku[web.1]: Process exited with status 1\n2015-11-17T20:53:12.090669+00:00 heroku[api]: Starting process with command `bundle exec rake db:migrate` by neil@myindianweddingapp.com\n2015-11-17T20:53:15.086077+00:00 heroku[run.7997]: Awaiting client\n2015-11-17T20:53:15.126176+00:00 heroku[run.7997]: Starting process with command `bundle exec rake db:migrate`\n2015-11-17T20:53:15.445357+00:00 heroku[run.7997]: State changed from starting to up\n2015-11-17T20:53:20.527470+00:00 heroku[run.7997]: Process exited with status 0\n2015-11-17T20:53:20.542413+00:00 heroku[run.7997]: State changed from up to complete\n2015-11-17T20:54:06.611902+00:00 heroku[router]: at=error code=H10 desc=\"App crashed\" method=GET path=\"/\" host=wiki2015.herokuapp.com request_id=91c5e397-df18-4ed2-8b38-7a99f0acd7a5 fwd=\"80.42.198.211\" dyno= connect= service= status=503 bytes=\n2015-11-17T20:54:09.852632+00:00 heroku[router]: at=error code=H10 desc=\"App crashed\" method=GET path=\"/favicon.ico\" host=wiki2015.herokuapp.com request_id=2aaa7177-4534-48c9-afc9-64e8ff2e8563 fwd=\"80.42.198.211\" dyno= connect= service= status=503 bytes=\n2015-11-17T20:54:09.986585+00:00 heroku[router]: at=error code=H10 desc=\"App crashed\" method=GET path=\"/favicon.ico\" host=wiki2015.herokuapp.com request_id=ffe1b818-0924-4989-840c-f9589c3e02c7 fwd=\"80.42.198.211\" dyno= connect= service= status=503 bytes=\n2015-11-17T20:57:17.611886+00:00 heroku[slug-compiler]: Slug compilation started\n2015-11-17T20:57:17.611896+00:00 heroku[slug-compiler]: Slug compilation finished\n2015-11-17T20:57:17.479563+00:00 heroku[api]: Deploy 1402961 by neil@myindianweddingapp.com\n2015-11-17T20:57:17.479619+00:00 heroku[api]: Release v6 created by neil@myindianweddingapp.com\n2015-11-17T20:57:17.972832+00:00 heroku[web.1]: State changed from crashed to starting\n2015-11-17T20:57:20.345858+00:00 heroku[web.1]: Starting process with command `bin/rails server -p 47455 -e production`\n2015-11-17T20:57:21.711597+00:00 app[web.1]: /app/vendor/ruby-2.0.0/lib/ruby/2.0.0/rubygems/dependency.rb:296:in `to_specs': Could not find 'spring' (= 1.4.3) among 65 total gem(s) (Gem::LoadError)\n2015-11-17T20:57:21.711626+00:00 app[web.1]:    from /app/vendor/ruby-2.0.0/lib/ruby/2.0.0/rubygems/dependency.rb:307:in `to_spec'\n2015-11-17T20:57:21.711627+00:00 app[web.1]:    from /app/bin/spring:12:in `&lt;top (required)&gt;'\n2015-11-17T20:57:21.711627+00:00 app[web.1]:    from /app/vendor/ruby-2.0.0/lib/ruby/2.0.0/rubygems/core_ext/kernel_gem.rb:47:in `gem'\n2015-11-17T20:57:21.711628+00:00 app[web.1]:    from bin/rails:4:in `load'\n2015-11-17T20:57:21.711628+00:00 app[web.1]:    from bin/rails:4:in `&lt;main&gt;'\n2015-11-17T20:57:22.386419+00:00 heroku[web.1]: Process exited with status 1\n2015-11-17T20:57:22.400171+00:00 heroku[web.1]: State changed from starting to crashed\n2015-11-17T20:57:27.636221+00:00 heroku[router]: at=error code=H10 desc=\"App crashed\" method=GET path=\"/\" host=wiki2015.herokuapp.com request_id=c82ba8c6-85de-4ac0-b407-0e70a0293016 fwd=\"80.42.198.211\" dyno= connect= service= status=503 bytes=\n2015-11-17T21:01:58.961493+00:00 heroku[slug-compiler]: Slug compilation finished\n2015-11-17T21:01:58.961483+00:00 heroku[slug-compiler]: Slug compilation started\n2015-11-17T21:01:58.802834+00:00 heroku[api]: Release v7 created by neil@myindianweddingapp.com\n2015-11-17T21:01:58.802834+00:00 heroku[api]: Deploy f9fc5c0 by neil@myindianweddingapp.com\n2015-11-17T21:01:58.922113+00:00 heroku[web.1]: State changed from crashed to starting\n2015-11-17T21:02:01.619357+00:00 heroku[web.1]: Starting process with command `bin/rails server -p 58664 -e production`\n2015-11-17T21:02:03.996752+00:00 app[web.1]:    from /app/vendor/ruby-2.0.0/lib/ruby/2.0.0/rubygems/dependency.rb:307:in `to_spec'\n2015-11-17T21:02:03.996753+00:00 app[web.1]:    from /app/vendor/ruby-2.0.0/lib/ruby/2.0.0/rubygems/core_ext/kernel_gem.rb:47:in `gem'\n2015-11-17T21:02:03.996757+00:00 app[web.1]:    from bin/rails:4:in `load'\n2015-11-17T21:02:03.996743+00:00 app[web.1]: /app/vendor/ruby-2.0.0/lib/ruby/2.0.0/rubygems/dependency.rb:296:in `to_specs': Could not find 'spring' (= 1.4.3) among 65 total gem(s) (Gem::LoadError)\n2015-11-17T21:02:03.996757+00:00 app[web.1]:    from bin/rails:4:in `&lt;main&gt;'\n2015-11-17T21:02:03.996754+00:00 app[web.1]:    from /app/bin/spring:12:in `&lt;top (required)&gt;'\n2015-11-17T21:02:04.969978+00:00 heroku[web.1]: Process exited with status 1\n2015-11-17T21:02:04.982155+00:00 heroku[web.1]: State changed from starting to crashed\n2015-11-17T21:02:19.841210+00:00 heroku[router]: at=error code=H10 desc=\"App crashed\" method=GET path=\"/\" host=wiki2015.herokuapp.com request_id=2daf0895-2f82-4b53-8779-d868927d174d fwd=\"80.42.198.211\" dyno= connect= service= status=503 bytes=\n2015-11-17T21:07:52.541848+00:00 heroku[web.1]: State changed from crashed to starting\n2015-11-17T21:07:54.465372+00:00 heroku[web.1]: Starting process with command `bin/rails server -p 34156 -e production`\n2015-11-17T21:07:55.963293+00:00 app[web.1]: /app/vendor/ruby-2.0.0/lib/ruby/2.0.0/rubygems/dependency.rb:296:in `to_specs': Could not find 'spring' (= 1.4.3) among 65 total gem(s) (Gem::LoadError)\n2015-11-17T21:07:55.963309+00:00 app[web.1]:    from /app/vendor/ruby-2.0.0/lib/ruby/2.0.0/rubygems/dependency.rb:307:in `to_spec'\n2015-11-17T21:07:55.963310+00:00 app[web.1]:    from /app/vendor/ruby-2.0.0/lib/ruby/2.0.0/rubygems/core_ext/kernel_gem.rb:47:in `gem'\n2015-11-17T21:07:55.963311+00:00 app[web.1]:    from /app/bin/spring:12:in `&lt;top (required)&gt;'\n2015-11-17T21:07:55.963312+00:00 app[web.1]:    from bin/rails:4:in `load'\n2015-11-17T21:07:55.963312+00:00 app[web.1]:    from bin/rails:4:in `&lt;main&gt;'\n2015-11-17T21:07:56.601024+00:00 heroku[web.1]: State changed from starting to crashed\n2015-11-17T21:07:56.592508+00:00 heroku[web.1]: Process exited with status 1\n2015-11-17T21:08:11.237584+00:00 heroku[web.1]: State changed from crashed to starting\n2015-11-17T21:08:13.869504+00:00 heroku[web.1]: Starting process with command `bin/rails server -p 51681 -e production`\n2015-11-17T21:08:16.370873+00:00 app[web.1]: /app/vendor/ruby-2.0.0/lib/ruby/2.0.0/rubygems/dependency.rb:296:in `to_specs': Could not find 'spring' (= 1.4.3) among 65 total gem(s) (Gem::LoadError)\n2015-11-17T21:08:16.370893+00:00 app[web.1]:    from /app/vendor/ruby-2.0.0/lib/ruby/2.0.0/rubygems/dependency.rb:307:in `to_spec'\n2015-11-17T21:08:16.370895+00:00 app[web.1]:    from /app/vendor/ruby-2.0.0/lib/ruby/2.0.0/rubygems/core_ext/kernel_gem.rb:47:in `gem'\n2015-11-17T21:08:16.370896+00:00 app[web.1]:    from /app/bin/spring:12:in `&lt;top (required)&gt;'\n2015-11-17T21:08:16.370897+00:00 app[web.1]:    from bin/rails:4:in `load'\n2015-11-17T21:08:16.370898+00:00 app[web.1]:    from bin/rails:4:in `&lt;main&gt;'\n2015-11-17T21:08:17.375973+00:00 heroku[web.1]: State changed from starting to crashed\n2015-11-17T21:08:17.362848+00:00 heroku[web.1]: Process exited with status 1\n2015-11-17T21:08:19.043366+00:00 heroku[router]: at=error code=H10 desc=\"App crashed\" method=GET path=\"/\" host=wiki2015.herokuapp.com request_id=056b3e11-0204-4a64-aab2-9f33928cce07 fwd=\"80.42.198.211\" dyno= connect= service= status=503 bytes=\n2015-11-17T21:17:26.807218+00:00 heroku[api]: Deploy d922aba by neil@myindianweddingapp.com\n2015-11-17T21:17:26.807281+00:00 heroku[api]: Release v8 created by neil@myindianweddingapp.com\n2015-11-17T21:17:26.909902+00:00 heroku[web.1]: State changed from crashed to starting\n2015-11-17T21:17:27.222648+00:00 heroku[slug-compiler]: Slug compilation started\n2015-11-17T21:17:27.222657+00:00 heroku[slug-compiler]: Slug compilation finished\n2015-11-17T21:17:28.953132+00:00 heroku[web.1]: Starting process with command `bin/rails server -p 37736 -e production`\n2015-11-17T21:17:31.073507+00:00 app[web.1]: /app/vendor/ruby-2.0.0/lib/ruby/2.0.0/rubygems/dependency.rb:296:in `to_specs': Could not find 'spring' (= 1.4.3) among 65 total gem(s) (Gem::LoadError)\n2015-11-17T21:17:31.073522+00:00 app[web.1]:    from /app/vendor/ruby-2.0.0/lib/ruby/2.0.0/rubygems/dependency.rb:307:in `to_spec'\n2015-11-17T21:17:31.073524+00:00 app[web.1]:    from /app/vendor/ruby-2.0.0/lib/ruby/2.0.0/rubygems/core_ext/kernel_gem.rb:47:in `gem'\n2015-11-17T21:17:31.073525+00:00 app[web.1]:    from /app/bin/spring:12:in `&lt;top (required)&gt;'\n2015-11-17T21:17:31.073525+00:00 app[web.1]:    from bin/rails:4:in `load'\n2015-11-17T21:17:31.073526+00:00 app[web.1]:    from bin/rails:4:in `&lt;main&gt;'\n2015-11-17T21:17:32.008445+00:00 heroku[web.1]: Process exited with status 1\n2015-11-17T21:17:32.018017+00:00 heroku[web.1]: State changed from starting to crashed\n2015-11-17T21:18:35.592839+00:00 heroku[router]: at=error code=H10 desc=\"App crashed\" method=GET path=\"/\" host=wiki2015.herokuapp.com request_id=097d7d00-533f-4b9a-b588-6cfe369b332e fwd=\"80.42.198.211\" dyno= connect= service= status=503 bytes=\nNeils-MacBook-Pro-2:wiki123 neilpatel$ \n</code></pre>\n\n<p><strong>heroku run rake console</strong></p>\n\n<pre><code>eils-MacBook-Pro-2:wiki123 neilpatel$ heroku run rails console\nRunning rails console on wiki2015... up, run.8231\n/app/vendor/ruby-2.0.0/lib/ruby/2.0.0/rubygems/dependency.rb:296:in `to_specs': Could not find 'spring' (= 1.4.3) among 65 total gem(s) (Gem::LoadError)\n    from /app/vendor/ruby-2.0.0/lib/ruby/2.0.0/rubygems/dependency.rb:307:in `to_spec'\n    from /app/vendor/ruby-2.0.0/lib/ruby/2.0.0/rubygems/core_ext/kernel_gem.rb:47:in `gem'\n    from /app/bin/spring:12:in `&lt;top (required)&gt;'\n    from /app/bin/rails:4:in `load'\n    from /app/bin/rails:4:in `&lt;main&gt;'\nNeils-MacBook-Pro-2:wiki123 neilpatel$ \n</code></pre>\n"}]